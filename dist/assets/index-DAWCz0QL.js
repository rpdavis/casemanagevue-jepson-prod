(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Hh(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Jt={},tc=[],Gs=()=>{},GD=()=>!1,$d=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),l1=t=>t.startsWith("onUpdate:"),xr=Object.assign,c1=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},WD=Object.prototype.hasOwnProperty,ur=(t,e)=>WD.call(t,e),ht=Array.isArray,rc=t=>Bc(t)==="[object Map]",fl=t=>Bc(t)==="[object Set]",x2=t=>Bc(t)==="[object Date]",zD=t=>Bc(t)==="[object RegExp]",Tt=t=>typeof t=="function",Tr=t=>typeof t=="string",pa=t=>typeof t=="symbol",gr=t=>t!==null&&typeof t=="object",u1=t=>(gr(t)||Tt(t))&&Tt(t.then)&&Tt(t.catch),tA=Object.prototype.toString,Bc=t=>tA.call(t),KD=t=>Bc(t).slice(8,-1),jh=t=>Bc(t)==="[object Object]",d1=t=>Tr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,nc=Hh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gh=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},qD=/-(\w)/g,In=Gh(t=>t.replace(qD,(e,r)=>r?r.toUpperCase():"")),XD=/\B([A-Z])/g,_s=Gh(t=>t.replace(XD,"-$1").toLowerCase()),Vd=Gh(t=>t.charAt(0).toUpperCase()+t.slice(1)),Fu=Gh(t=>t?`on${Vd(t)}`:""),ls=(t,e)=>!Object.is(t,e),sc=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},Vg=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},$0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},V0=t=>{const e=Tr(t)?Number(t):NaN;return isNaN(e)?t:e};let E2;const Wh=()=>E2||(E2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),YD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",QD=Hh(YD);function Nr(t){if(ht(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=Tr(n)?t3(n):Nr(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(Tr(t)||gr(t))return t}const JD=/;(?![^(]*\))/g,ZD=/:([^]+)/,e3=/\/\*[^]*?\*\//g;function t3(t){const e={};return t.replace(e3,"").split(JD).forEach(r=>{if(r){const n=r.split(ZD);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ye(t){let e="";if(Tr(t))e=t;else if(ht(t))for(let r=0;r<t.length;r++){const n=Ye(t[r]);n&&(e+=n+" ")}else if(gr(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function r3(t){if(!t)return null;let{class:e,style:r}=t;return e&&!Tr(e)&&(t.class=Ye(e)),r&&(t.style=Nr(r)),t}const n3="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s3=Hh(n3);function rA(t){return!!t||t===""}function a3(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=oo(t[n],e[n]);return r}function oo(t,e){if(t===e)return!0;let r=x2(t),n=x2(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=pa(t),n=pa(e),r||n)return t===e;if(r=ht(t),n=ht(e),r||n)return r&&n?a3(t,e):!1;if(r=gr(t),n=gr(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!oo(t[a],e[a]))return!1}}return String(t)===String(e)}function zh(t,e){return t.findIndex(r=>oo(r,e))}const nA=t=>!!(t&&t.__v_isRef===!0),X=t=>Tr(t)?t:t==null?"":ht(t)||gr(t)&&(t.toString===tA||!Tt(t.toString))?nA(t)?X(t.value):JSON.stringify(t,sA,2):String(t),sA=(t,e)=>nA(e)?sA(t,e.value):rc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],i)=>(r[em(n,i)+" =>"]=s,r),{})}:fl(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>em(r))}:pa(e)?em(e):gr(e)&&!ht(e)&&!jh(e)?String(e):e,em=(t,e="")=>{var r;return pa(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hn;class f1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Hn,!e&&Hn&&(this.index=(Hn.scopes||(Hn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Hn;try{return Hn=this,e()}finally{Hn=r}}}on(){++this._on===1&&(this.prevScope=Hn,Hn=this)}off(){this._on>0&&--this._on===0&&(Hn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function h1(t){return new f1(t)}function p1(){return Hn}function aA(t,e=!1){Hn&&Hn.cleanups.push(t)}let br;const tm=new WeakSet;class dd{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Hn&&Hn.active&&Hn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,tm.has(this)&&(tm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||oA(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_2(this),lA(this);const e=br,r=da;br=this,da=!0;try{return this.fn()}finally{cA(this),br=e,da=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)v1(e);this.deps=this.depsTail=void 0,_2(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?tm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Hg(this)&&this.run()}get dirty(){return Hg(this)}}let iA=0,Nu,Ou;function oA(t,e=!1){if(t.flags|=8,e){t.next=Ou,Ou=t;return}t.next=Nu,Nu=t}function m1(){iA++}function g1(){if(--iA>0)return;if(Ou){let e=Ou;for(Ou=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;Nu;){let e=Nu;for(Nu=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function lA(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cA(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),v1(n),i3(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function Hg(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(uA(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function uA(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===fd)||(t.globalVersion=fd,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Hg(t))))return;t.flags|=2;const e=t.dep,r=br,n=da;br=t,da=!0;try{lA(t);const s=t.fn(t._value);(e.version===0||ls(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{br=r,da=n,cA(t),t.flags&=-3}}function v1(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)v1(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function i3(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}function o3(t,e){t.effect instanceof dd&&(t=t.effect.fn);const r=new dd(t);e&&xr(r,e);try{r.run()}catch(s){throw r.stop(),s}const n=r.run.bind(r);return n.effect=r,n}function l3(t){t.effect.stop()}let da=!0;const dA=[];function gi(){dA.push(da),da=!1}function vi(){const t=dA.pop();da=t===void 0?!0:t}function _2(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=br;br=void 0;try{e()}finally{br=r}}}let fd=0,c3=class{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Kh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!br||!da||br===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==br)r=this.activeLink=new c3(br,this),br.deps?(r.prevDep=br.depsTail,br.depsTail.nextDep=r,br.depsTail=r):br.deps=br.depsTail=r,fA(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=br.depsTail,r.nextDep=void 0,br.depsTail.nextDep=r,br.depsTail=r,br.deps===r&&(br.deps=n)}return r}trigger(e){this.version++,fd++,this.notify(e)}notify(e){m1();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{g1()}}}function fA(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)fA(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const H0=new WeakMap,Ho=Symbol(""),jg=Symbol(""),hd=Symbol("");function Wn(t,e,r){if(da&&br){let n=H0.get(t);n||H0.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new Kh),s.map=n,s.key=r),s.track()}}function Za(t,e,r,n,s,i){const a=H0.get(t);if(!a){fd++;return}const o=l=>{l&&l.trigger()};if(m1(),e==="clear")a.forEach(o);else{const l=ht(t),c=l&&d1(r);if(l&&r==="length"){const u=Number(n);a.forEach((f,h)=>{(h==="length"||h===hd||!pa(h)&&h>=u)&&o(f)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),c&&o(a.get(hd)),e){case"add":l?c&&o(a.get("length")):(o(a.get(Ho)),rc(t)&&o(a.get(jg)));break;case"delete":l||(o(a.get(Ho)),rc(t)&&o(a.get(jg)));break;case"set":rc(t)&&o(a.get(Ho));break}}g1()}function u3(t,e){const r=H0.get(t);return r&&r.get(e)}function Fl(t){const e=Xt(t);return e===t?e:(Wn(e,"iterate",hd),Ps(t)?e:e.map(Cn))}function qh(t){return Wn(t=Xt(t),"iterate",hd),t}const d3={__proto__:null,[Symbol.iterator](){return rm(this,Symbol.iterator,Cn)},concat(...t){return Fl(this).concat(...t.map(e=>ht(e)?Fl(e):e))},entries(){return rm(this,"entries",t=>(t[1]=Cn(t[1]),t))},every(t,e){return Xa(this,"every",t,e,void 0,arguments)},filter(t,e){return Xa(this,"filter",t,e,r=>r.map(Cn),arguments)},find(t,e){return Xa(this,"find",t,e,Cn,arguments)},findIndex(t,e){return Xa(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Xa(this,"findLast",t,e,Cn,arguments)},findLastIndex(t,e){return Xa(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Xa(this,"forEach",t,e,void 0,arguments)},includes(...t){return nm(this,"includes",t)},indexOf(...t){return nm(this,"indexOf",t)},join(t){return Fl(this).join(t)},lastIndexOf(...t){return nm(this,"lastIndexOf",t)},map(t,e){return Xa(this,"map",t,e,void 0,arguments)},pop(){return au(this,"pop")},push(...t){return au(this,"push",t)},reduce(t,...e){return b2(this,"reduce",t,e)},reduceRight(t,...e){return b2(this,"reduceRight",t,e)},shift(){return au(this,"shift")},some(t,e){return Xa(this,"some",t,e,void 0,arguments)},splice(...t){return au(this,"splice",t)},toReversed(){return Fl(this).toReversed()},toSorted(t){return Fl(this).toSorted(t)},toSpliced(...t){return Fl(this).toSpliced(...t)},unshift(...t){return au(this,"unshift",t)},values(){return rm(this,"values",Cn)}};function rm(t,e,r){const n=qh(t),s=n[e]();return n!==t&&!Ps(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const f3=Array.prototype;function Xa(t,e,r,n,s,i){const a=qh(t),o=a!==t&&!Ps(t),l=a[e];if(l!==f3[e]){const f=l.apply(t,i);return o?Cn(f):f}let c=r;a!==t&&(o?c=function(f,h){return r.call(this,Cn(f),h,t)}:r.length>2&&(c=function(f,h){return r.call(this,f,h,t)}));const u=l.call(a,c,n);return o&&s?s(u):u}function b2(t,e,r,n){const s=qh(t);let i=r;return s!==t&&(Ps(t)?r.length>3&&(i=function(a,o,l){return r.call(this,a,o,l,t)}):i=function(a,o,l){return r.call(this,a,Cn(o),l,t)}),s[e](i,...n)}function nm(t,e,r){const n=Xt(t);Wn(n,"iterate",hd);const s=n[e](...r);return(s===-1||s===!1)&&Qh(r[0])?(r[0]=Xt(r[0]),n[e](...r)):s}function au(t,e,r=[]){gi(),m1();const n=Xt(t)[e].apply(t,r);return g1(),vi(),n}const h3=Hh("__proto__,__v_isRef,__isVue"),hA=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(pa));function p3(t){pa(t)||(t=String(t));const e=Xt(this);return Wn(e,"has",t),e.hasOwnProperty(t)}class pA{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?EA:xA:i?yA:vA).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=ht(e);if(!s){let l;if(a&&(l=d3[r]))return l;if(r==="hasOwnProperty")return p3}const o=Reflect.get(e,r,Cr(e)?e:n);return(pa(r)?hA.has(r):h3(r))||(s||Wn(e,"get",r),i)?o:Cr(o)?a&&d1(r)?o:o.value:gr(o)?s?x1(o):Ns(o):o}}class mA extends pA{constructor(e=!1){super(!1,e)}set(e,r,n,s){let i=e[r];if(!this._isShallow){const l=yi(i);if(!Ps(n)&&!yi(n)&&(i=Xt(i),n=Xt(n)),!ht(e)&&Cr(i)&&!Cr(n))return l?!1:(i.value=n,!0)}const a=ht(e)&&d1(r)?Number(r)<e.length:ur(e,r),o=Reflect.set(e,r,n,Cr(e)?e:s);return e===Xt(s)&&(a?ls(n,i)&&Za(e,"set",r,n):Za(e,"add",r,n)),o}deleteProperty(e,r){const n=ur(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&Za(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!pa(r)||!hA.has(r))&&Wn(e,"has",r),n}ownKeys(e){return Wn(e,"iterate",ht(e)?"length":Ho),Reflect.ownKeys(e)}}class gA extends pA{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const m3=new mA,g3=new gA,v3=new mA(!0),y3=new gA(!0),Gg=t=>t,Df=t=>Reflect.getPrototypeOf(t);function x3(t,e,r){return function(...n){const s=this.__v_raw,i=Xt(s),a=rc(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=s[t](...n),u=r?Gg:e?j0:Cn;return!e&&Wn(i,"iterate",l?jg:Ho),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:o?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Pf(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function E3(t,e){const r={get(s){const i=this.__v_raw,a=Xt(i),o=Xt(s);t||(ls(s,o)&&Wn(a,"get",s),Wn(a,"get",o));const{has:l}=Df(a),c=e?Gg:t?j0:Cn;if(l.call(a,s))return c(i.get(s));if(l.call(a,o))return c(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Wn(Xt(s),"iterate",Ho),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=Xt(i),o=Xt(s);return t||(ls(s,o)&&Wn(a,"has",s),Wn(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=Xt(o),c=e?Gg:t?j0:Cn;return!t&&Wn(l,"iterate",Ho),o.forEach((u,f)=>s.call(i,c(u),c(f),a))}};return xr(r,t?{add:Pf("add"),set:Pf("set"),delete:Pf("delete"),clear:Pf("clear")}:{add(s){!e&&!Ps(s)&&!yi(s)&&(s=Xt(s));const i=Xt(this);return Df(i).has.call(i,s)||(i.add(s),Za(i,"add",s,s)),this},set(s,i){!e&&!Ps(i)&&!yi(i)&&(i=Xt(i));const a=Xt(this),{has:o,get:l}=Df(a);let c=o.call(a,s);c||(s=Xt(s),c=o.call(a,s));const u=l.call(a,s);return a.set(s,i),c?ls(i,u)&&Za(a,"set",s,i):Za(a,"add",s,i),this},delete(s){const i=Xt(this),{has:a,get:o}=Df(i);let l=a.call(i,s);l||(s=Xt(s),l=a.call(i,s)),o&&o.call(i,s);const c=i.delete(s);return l&&Za(i,"delete",s,void 0),c},clear(){const s=Xt(this),i=s.size!==0,a=s.clear();return i&&Za(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=x3(s,t,e)}),r}function Xh(t,e){const r=E3(t,e);return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(ur(r,s)&&s in n?r:n,s,i)}const _3={get:Xh(!1,!1)},b3={get:Xh(!1,!0)},S3={get:Xh(!0,!1)},A3={get:Xh(!0,!0)},vA=new WeakMap,yA=new WeakMap,xA=new WeakMap,EA=new WeakMap;function T3(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function w3(t){return t.__v_skip||!Object.isExtensible(t)?0:T3(KD(t))}function Ns(t){return yi(t)?t:Yh(t,!1,m3,_3,vA)}function y1(t){return Yh(t,!1,v3,b3,yA)}function x1(t){return Yh(t,!0,g3,S3,xA)}function C3(t){return Yh(t,!0,y3,A3,EA)}function Yh(t,e,r,n,s){if(!gr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=w3(t);if(i===0)return t;const a=s.get(t);if(a)return a;const o=new Proxy(t,i===2?n:r);return s.set(t,o),o}function Ra(t){return yi(t)?Ra(t.__v_raw):!!(t&&t.__v_isReactive)}function yi(t){return!!(t&&t.__v_isReadonly)}function Ps(t){return!!(t&&t.__v_isShallow)}function Qh(t){return t?!!t.__v_raw:!1}function Xt(t){const e=t&&t.__v_raw;return e?Xt(e):t}function Jh(t){return!ur(t,"__v_skip")&&Object.isExtensible(t)&&Vg(t,"__v_skip",!0),t}const Cn=t=>gr(t)?Ns(t):t,j0=t=>gr(t)?x1(t):t;function Cr(t){return t?t.__v_isRef===!0:!1}function se(t){return _A(t,!1)}function E1(t){return _A(t,!0)}function _A(t,e){return Cr(t)?t:new k3(t,e)}class k3{constructor(e,r){this.dep=new Kh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Xt(e),this._value=r?e:Cn(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Ps(e)||yi(e);e=n?e:Xt(e),ls(e,r)&&(this._rawValue=e,this._value=n?e:Cn(e),this.dep.trigger())}}function I3(t){t.dep&&t.dep.trigger()}function K(t){return Cr(t)?t.value:t}function D3(t){return Tt(t)?t():K(t)}const P3={get:(t,e,r)=>e==="__v_raw"?t:K(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return Cr(s)&&!Cr(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function _1(t){return Ra(t)?t:new Proxy(t,P3)}class R3{constructor(e){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new Kh,{get:n,set:s}=e(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function bA(t){return new R3(t)}function SA(t){const e=ht(t)?new Array(t.length):{};for(const r in t)e[r]=AA(t,r);return e}class F3{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return u3(Xt(this._object),this._key)}}class N3{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function O3(t,e,r){return Cr(t)?t:Tt(t)?new N3(t):gr(t)&&arguments.length>1?AA(t,e,r):se(t)}function AA(t,e,r){const n=t[e];return Cr(n)?n:new F3(t,e,r)}class M3{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Kh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fd-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&br!==this)return oA(this,!0),!0}get value(){const e=this.dep.track();return uA(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function L3(t,e,r=!1){let n,s;return Tt(t)?n=t:(n=t.get,s=t.set),new M3(n,s,r)}const B3={GET:"get",HAS:"has",ITERATE:"iterate"},U3={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},Rf={},G0=new WeakMap;let ji;function $3(){return ji}function TA(t,e=!1,r=ji){if(r){let n=G0.get(r);n||G0.set(r,n=[]),n.push(t)}}function V3(t,e,r=Jt){const{immediate:n,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=r,c=w=>s?w:Ps(w)||s===!1||s===0?ei(w,1):ei(w);let u,f,h,p,g=!1,v=!1;if(Cr(t)?(f=()=>t.value,g=Ps(t)):Ra(t)?(f=()=>c(t),g=!0):ht(t)?(v=!0,g=t.some(w=>Ra(w)||Ps(w)),f=()=>t.map(w=>{if(Cr(w))return w.value;if(Ra(w))return c(w);if(Tt(w))return l?l(w,2):w()})):Tt(t)?e?f=l?()=>l(t,2):t:f=()=>{if(h){gi();try{h()}finally{vi()}}const w=ji;ji=u;try{return l?l(t,3,[p]):t(p)}finally{ji=w}}:f=Gs,e&&s){const w=f,R=s===!0?1/0:s;f=()=>ei(w(),R)}const y=p1(),b=()=>{u.stop(),y&&y.active&&c1(y.effects,u)};if(i&&e){const w=e;e=(...R)=>{w(...R),b()}}let E=v?new Array(t.length).fill(Rf):Rf;const x=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(e){const R=u.run();if(s||g||(v?R.some((P,S)=>ls(P,E[S])):ls(R,E))){h&&h();const P=ji;ji=u;try{const S=[R,E===Rf?void 0:v&&E[0]===Rf?[]:E,p];E=R,l?l(e,3,S):e(...S)}finally{ji=P}}}else u.run()};return o&&o(x),u=new dd(f),u.scheduler=a?()=>a(x,!1):x,p=w=>TA(w,!1,u),h=u.onStop=()=>{const w=G0.get(u);if(w){if(l)l(w,4);else for(const R of w)R();G0.delete(u)}},e?n?x(!0):E=u.run():a?a(x.bind(null,!0),!0):u.run(),b.pause=u.pause.bind(u),b.resume=u.resume.bind(u),b.stop=b,b}function ei(t,e=1/0,r){if(e<=0||!gr(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Cr(t))ei(t.value,e,r);else if(ht(t))for(let n=0;n<t.length;n++)ei(t[n],e,r);else if(fl(t)||rc(t))t.forEach(n=>{ei(n,e,r)});else if(jh(t)){for(const n in t)ei(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&ei(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const wA=[];function H3(t){wA.push(t)}function j3(){wA.pop()}function G3(t,e){}const W3={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},z3={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Uc(t,e,r,n){try{return n?t(...n):t()}catch(s){hl(s,e,r)}}function Ks(t,e,r,n){if(Tt(t)){const s=Uc(t,e,r,n);return s&&u1(s)&&s.catch(i=>{hl(i,e,r)}),s}if(ht(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Ks(t[i],e,r,n));return s}}function hl(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Jt;if(e){let o=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,l,c)===!1)return}o=o.parent}if(i){gi(),Uc(i,null,10,[t,l,c]),vi();return}}K3(t,r,s,n,a)}function K3(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const cs=[];let ka=-1;const ac=[];let Gi=null,Hl=0;const CA=Promise.resolve();let W0=null;function pl(t){const e=W0||CA;return t?e.then(this?t.bind(this):t):e}function q3(t){let e=ka+1,r=cs.length;for(;e<r;){const n=e+r>>>1,s=cs[n],i=md(s);i<t||i===t&&s.flags&2?e=n+1:r=n}return e}function b1(t){if(!(t.flags&1)){const e=md(t),r=cs[cs.length-1];!r||!(t.flags&2)&&e>=md(r)?cs.push(t):cs.splice(q3(e),0,t),t.flags|=1,kA()}}function kA(){W0||(W0=CA.then(IA))}function pd(t){ht(t)?ac.push(...t):Gi&&t.id===-1?Gi.splice(Hl+1,0,t):t.flags&1||(ac.push(t),t.flags|=1),kA()}function S2(t,e,r=ka+1){for(;r<cs.length;r++){const n=cs[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;cs.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function z0(t){if(ac.length){const e=[...new Set(ac)].sort((r,n)=>md(r)-md(n));if(ac.length=0,Gi){Gi.push(...e);return}for(Gi=e,Hl=0;Hl<Gi.length;Hl++){const r=Gi[Hl];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Gi=null,Hl=0}}const md=t=>t.id==null?t.flags&2?-1:1/0:t.id;function IA(t){try{for(ka=0;ka<cs.length;ka++){const e=cs[ka];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Uc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ka<cs.length;ka++){const e=cs[ka];e&&(e.flags&=-2)}ka=-1,cs.length=0,z0(),W0=null,(cs.length||ac.length)&&IA()}}let jl,Ff=[];function DA(t,e){var r,n;jl=t,jl?(jl.enabled=!0,Ff.forEach(({event:s,args:i})=>jl.emit(s,...i)),Ff=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{DA(i,e)}),setTimeout(()=>{jl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Ff=[])},3e3)):Ff=[]}let cn=null,Zh=null;function gd(t){const e=cn;return cn=t,Zh=t&&t.type.__scopeId||null,e}function X3(t){Zh=t}function Y3(){Zh=null}const Q3=t=>ep;function ep(t,e=cn,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&Jg(-1);const i=gd(e);let a;try{a=t(...s)}finally{gd(i),n._d&&Jg(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Oe(t,e){if(cn===null)return t;const r=Wd(cn),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,o,l=Jt]=e[s];i&&(Tt(i)&&(i={mounted:i,updated:i}),i.deep&&ei(a),n.push({dir:i,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function Ia(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(gi(),Ks(l,r,8,[t.el,o,t,e]),vi())}}const PA=Symbol("_vte"),RA=t=>t.__isTeleport,Mu=t=>t&&(t.disabled||t.disabled===""),A2=t=>t&&(t.defer||t.defer===""),T2=t=>typeof SVGElement<"u"&&t instanceof SVGElement,w2=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Wg=(t,e)=>{const r=t&&t.to;return Tr(r)?e?e(r):null:r},FA={name:"Teleport",__isTeleport:!0,process(t,e,r,n,s,i,a,o,l,c){const{mc:u,pc:f,pbc:h,o:{insert:p,querySelector:g,createText:v,createComment:y}}=c,b=Mu(e.props);let{shapeFlag:E,children:x,dynamicChildren:w}=e;if(t==null){const R=e.el=v(""),P=e.anchor=v("");p(R,r,n),p(P,r,n);const S=(m,A)=>{E&16&&(s&&s.isCE&&(s.ce._teleportTarget=m),u(x,m,A,s,i,a,o,l))},_=()=>{const m=e.target=Wg(e.props,g),A=NA(m,e,v,p);m&&(a!=="svg"&&T2(m)?a="svg":a!=="mathml"&&w2(m)&&(a="mathml"),b||(S(m,A),y0(e,!1)))};b&&(S(r,P),y0(e,!0)),A2(e.props)?(e.el.__isMounted=!1,an(()=>{_(),delete e.el.__isMounted},i)):_()}else{if(A2(e.props)&&t.el.__isMounted===!1){an(()=>{FA.process(t,e,r,n,s,i,a,o,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const R=e.anchor=t.anchor,P=e.target=t.target,S=e.targetAnchor=t.targetAnchor,_=Mu(t.props),m=_?r:P,A=_?R:S;if(a==="svg"||T2(P)?a="svg":(a==="mathml"||w2(P))&&(a="mathml"),w?(h(t.dynamicChildren,w,m,s,i,a,o),N1(t,e,!0)):l||f(t,e,m,A,s,i,a,o,!1),b)_?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Nf(e,r,R,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const k=e.target=Wg(e.props,g);k&&Nf(e,k,null,c,0)}else _&&Nf(e,P,S,c,1);y0(e,b)}},remove(t,e,r,{um:n,o:{remove:s}},i){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:f,props:h}=t;if(f&&(s(c),s(u)),i&&s(l),a&16){const p=i||!Mu(h);for(let g=0;g<o.length;g++){const v=o[g];n(v,e,r,p,!!v.dynamicChildren)}}},move:Nf,hydrate:J3};function Nf(t,e,r,{o:{insert:n},m:s},i=2){i===0&&n(t.targetAnchor,e,r);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=t,f=i===2;if(f&&n(a,e,r),(!f||Mu(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,r,2);f&&n(o,e,r)}function J3(t,e,r,n,s,i,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},f){const h=e.target=Wg(e.props,l);if(h){const p=Mu(e.props),g=h._lpa||h.firstChild;if(e.shapeFlag&16)if(p)e.anchor=f(a(t),e,o(t),r,n,s,i),e.targetStart=g,e.targetAnchor=g&&a(g);else{e.anchor=a(t);let v=g;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,h._lpa=e.targetAnchor&&a(e.targetAnchor);break}}v=a(v)}e.targetAnchor||NA(h,e,u,c),f(g&&a(g),e,h,r,n,s,i)}y0(e,p)}return e.anchor&&a(e.anchor)}const Z3=FA;function y0(t,e){const r=t.ctx;if(r&&r.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function NA(t,e,r,n){const s=e.targetStart=r(""),i=e.targetAnchor=r("");return s[PA]=i,t&&(n(s,t),n(i,t)),i}const Wi=Symbol("_leaveCb"),Of=Symbol("_enterCb");function S1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Gt(()=>{t.isMounted=!0}),sp(()=>{t.isUnmounting=!0}),t}const Ms=[Function,Array],A1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ms,onEnter:Ms,onAfterEnter:Ms,onEnterCancelled:Ms,onBeforeLeave:Ms,onLeave:Ms,onAfterLeave:Ms,onLeaveCancelled:Ms,onBeforeAppear:Ms,onAppear:Ms,onAfterAppear:Ms,onAppearCancelled:Ms},OA=t=>{const e=t.subTree;return e.component?OA(e.component):e},eP={name:"BaseTransition",props:A1,setup(t,{slots:e}){const r=Ys(),n=S1();return()=>{const s=e.default&&tp(e.default(),!0);if(!s||!s.length)return;const i=MA(s),a=Xt(t),{mode:o}=a;if(n.isLeaving)return sm(i);const l=C2(i);if(!l)return sm(i);let c=Ec(l,a,n,r,f=>c=f);l.type!==qr&&xi(l,c);let u=r.subTree&&C2(r.subTree);if(u&&u.type!==qr&&!aa(l,u)&&OA(r).type!==qr){let f=Ec(u,a,n,r);if(xi(u,f),o==="out-in"&&l.type!==qr)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete f.afterLeave,u=void 0},sm(i);o==="in-out"&&l.type!==qr?f.delayLeave=(h,p,g)=>{const v=BA(n,u);v[String(u.key)]=u,h[Wi]=()=>{p(),h[Wi]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function MA(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==qr){e=r;break}}return e}const LA=eP;function BA(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function Ec(t,e,r,n,s){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:p,onAfterLeave:g,onLeaveCancelled:v,onBeforeAppear:y,onAppear:b,onAfterAppear:E,onAppearCancelled:x}=e,w=String(t.key),R=BA(r,t),P=(m,A)=>{m&&Ks(m,n,9,A)},S=(m,A)=>{const k=A[1];P(m,A),ht(m)?m.every(I=>I.length<=1)&&k():m.length<=1&&k()},_={mode:a,persisted:o,beforeEnter(m){let A=l;if(!r.isMounted)if(i)A=y||l;else return;m[Wi]&&m[Wi](!0);const k=R[w];k&&aa(t,k)&&k.el[Wi]&&k.el[Wi](),P(A,[m])},enter(m){let A=c,k=u,I=f;if(!r.isMounted)if(i)A=b||c,k=E||u,I=x||f;else return;let C=!1;const M=m[Of]=D=>{C||(C=!0,D?P(I,[m]):P(k,[m]),_.delayedLeave&&_.delayedLeave(),m[Of]=void 0)};A?S(A,[m,M]):M()},leave(m,A){const k=String(t.key);if(m[Of]&&m[Of](!0),r.isUnmounting)return A();P(h,[m]);let I=!1;const C=m[Wi]=M=>{I||(I=!0,A(),M?P(v,[m]):P(g,[m]),m[Wi]=void 0,R[k]===t&&delete R[k])};R[k]=t,p?S(p,[m,C]):C()},clone(m){const A=Ec(m,e,r,n,s);return s&&s(A),A}};return _}function sm(t){if(jd(t))return t=La(t),t.children=null,t}function C2(t){if(!jd(t))return RA(t.type)&&t.children?MA(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&Tt(r.default))return r.default()}}function xi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,xi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function tp(t,e=!1,r){let n=[],s=0;for(let i=0;i<t.length;i++){let a=t[i];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:i);a.type===Pe?(a.patchFlag&128&&s++,n=n.concat(tp(a.children,e,o))):(e||a.type!==qr)&&n.push(o!=null?La(a,{key:o}):a)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Hd(t,e){return Tt(t)?xr({name:t.name},e,{setup:t}):t}function tP(){const t=Ys();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function T1(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function rP(t){const e=Ys(),r=E1(null);if(e){const s=e.refs===Jt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>r.value,set:i=>r.value=i})}return r}function ic(t,e,r,n,s=!1){if(ht(t)){t.forEach((g,v)=>ic(g,e&&(ht(e)?e[v]:e),r,n,s));return}if(ro(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ic(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?Wd(n.component):n.el,a=s?null:i,{i:o,r:l}=t,c=e&&e.r,u=o.refs===Jt?o.refs={}:o.refs,f=o.setupState,h=Xt(f),p=f===Jt?()=>!1:g=>ur(h,g);if(c!=null&&c!==l&&(Tr(c)?(u[c]=null,p(c)&&(f[c]=null)):Cr(c)&&(c.value=null)),Tt(l))Uc(l,o,12,[a,u]);else{const g=Tr(l),v=Cr(l);if(g||v){const y=()=>{if(t.f){const b=g?p(l)?f[l]:u[l]:l.value;s?ht(b)&&c1(b,i):ht(b)?b.includes(i)||b.push(i):g?(u[l]=[i],p(l)&&(f[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else g?(u[l]=a,p(l)&&(f[l]=a)):v&&(l.value=a,t.k&&(u[t.k]=a))};a?(y.id=-1,an(y,r)):y()}}}let k2=!1;const Nl=()=>{k2||(console.error("Hydration completed but contains mismatches."),k2=!0)},nP=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",sP=t=>t.namespaceURI.includes("MathML"),Mf=t=>{if(t.nodeType===1){if(nP(t))return"svg";if(sP(t))return"mathml"}},Ql=t=>t.nodeType===8;function aP(t){const{mt:e,p:r,o:{patchProp:n,createText:s,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=t,u=(x,w)=>{if(!w.hasChildNodes()){r(null,x,w),z0(),w._vnode=x;return}f(w.firstChild,x,null,null,null),z0(),w._vnode=x},f=(x,w,R,P,S,_=!1)=>{_=_||!!w.dynamicChildren;const m=Ql(x)&&x.data==="[",A=()=>v(x,w,R,P,S,m),{type:k,ref:I,shapeFlag:C,patchFlag:M}=w;let D=x.nodeType;w.el=x,M===-2&&(_=!1,w.dynamicChildren=null);let F=null;switch(k){case no:D!==3?w.children===""?(l(w.el=s(""),a(x),x),F=x):F=A():(x.data!==w.children&&(Nl(),x.data=w.children),F=i(x));break;case qr:E(x)?(F=i(x),b(w.el=x.content.firstChild,x,R)):D!==8||m?F=A():F=i(x);break;case Go:if(m&&(x=i(x),D=x.nodeType),D===1||D===3){F=x;const N=!w.children.length;for(let L=0;L<w.staticCount;L++)N&&(w.children+=F.nodeType===1?F.outerHTML:F.data),L===w.staticCount-1&&(w.anchor=F),F=i(F);return m?i(F):F}else A();break;case Pe:m?F=g(x,w,R,P,S,_):F=A();break;default:if(C&1)(D!==1||w.type.toLowerCase()!==x.tagName.toLowerCase())&&!E(x)?F=A():F=h(x,w,R,P,S,_);else if(C&6){w.slotScopeIds=S;const N=a(x);if(m?F=y(x):Ql(x)&&x.data==="teleport start"?F=y(x,x.data,"teleport end"):F=i(x),e(w,N,null,R,P,Mf(N),_),ro(w)&&!w.type.__asyncResolved){let L;m?(L=Re(Pe),L.anchor=F?F.previousSibling:N.lastChild):L=x.nodeType===3?we(""):Re("div"),L.el=x,w.component.subTree=L}}else C&64?D!==8?F=A():F=w.type.hydrate(x,w,R,P,S,_,t,p):C&128&&(F=w.type.hydrate(x,w,R,P,Mf(a(x)),S,_,t,f))}return I!=null&&ic(I,null,P,w),F},h=(x,w,R,P,S,_)=>{_=_||!!w.dynamicChildren;const{type:m,props:A,patchFlag:k,shapeFlag:I,dirs:C,transition:M}=w,D=m==="input"||m==="option";if(D||k!==-1){C&&Ia(w,null,R,"created");let F=!1;if(E(x)){F=uT(null,M)&&R&&R.vnode.props&&R.vnode.props.appear;const L=x.content.firstChild;if(F){const O=L.getAttribute("class");O&&(L.$cls=O),M.beforeEnter(L)}b(L,x,R),w.el=x=L}if(I&16&&!(A&&(A.innerHTML||A.textContent))){let L=p(x.firstChild,w,x,R,P,S,_);for(;L;){Lf(x,1)||Nl();const O=L;L=L.nextSibling,o(O)}}else if(I&8){let L=w.children;L[0]===`
`&&(x.tagName==="PRE"||x.tagName==="TEXTAREA")&&(L=L.slice(1)),x.textContent!==L&&(Lf(x,0)||Nl(),x.textContent=w.children)}if(A){if(D||!_||k&48){const L=x.tagName.includes("-");for(const O in A)(D&&(O.endsWith("value")||O==="indeterminate")||$d(O)&&!nc(O)||O[0]==="."||L)&&n(x,O,null,A[O],void 0,R)}else if(A.onClick)n(x,"onClick",null,A.onClick,void 0,R);else if(k&4&&Ra(A.style))for(const L in A.style)A.style[L]}let N;(N=A&&A.onVnodeBeforeMount)&&ys(N,R,w),C&&Ia(w,null,R,"beforeMount"),((N=A&&A.onVnodeMounted)||C||F)&&xT(()=>{N&&ys(N,R,w),F&&M.enter(x),C&&Ia(w,null,R,"mounted")},P)}return x.nextSibling},p=(x,w,R,P,S,_,m)=>{m=m||!!w.dynamicChildren;const A=w.children,k=A.length;for(let I=0;I<k;I++){const C=m?A[I]:A[I]=Es(A[I]),M=C.type===no;x?(M&&!m&&I+1<k&&Es(A[I+1]).type===no&&(l(s(x.data.slice(C.children.length)),R,i(x)),x.data=C.children),x=f(x,C,P,S,_,m)):M&&!C.children?l(C.el=s(""),R):(Lf(R,1)||Nl(),r(null,C,R,null,P,S,Mf(R),_))}return x},g=(x,w,R,P,S,_)=>{const{slotScopeIds:m}=w;m&&(S=S?S.concat(m):m);const A=a(x),k=p(i(x),w,A,R,P,S,_);return k&&Ql(k)&&k.data==="]"?i(w.anchor=k):(Nl(),l(w.anchor=c("]"),A,k),k)},v=(x,w,R,P,S,_)=>{if(Lf(x.parentElement,1)||Nl(),w.el=null,_){const k=y(x);for(;;){const I=i(x);if(I&&I!==k)o(I);else break}}const m=i(x),A=a(x);return o(x),r(null,w,A,m,R,P,Mf(A),S),R&&(R.vnode.el=w.el,ip(R,w.el)),m},y=(x,w="[",R="]")=>{let P=0;for(;x;)if(x=i(x),x&&Ql(x)&&(x.data===w&&P++,x.data===R)){if(P===0)return i(x);P--}return x},b=(x,w,R)=>{const P=w.parentNode;P&&P.replaceChild(x,w);let S=R;for(;S;)S.vnode.el===w&&(S.vnode.el=S.subTree.el=x),S=S.parent},E=x=>x.nodeType===1&&x.tagName==="TEMPLATE";return[u,f]}const I2="data-allow-mismatch",iP={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Lf(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(I2);)t=t.parentElement;const r=t&&t.getAttribute(I2);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return e===0&&n.includes("children")?!0:n.includes(iP[e])}}const oP=Wh().requestIdleCallback||(t=>setTimeout(t,1)),lP=Wh().cancelIdleCallback||(t=>clearTimeout(t)),cP=(t=1e4)=>e=>{const r=oP(e,{timeout:t});return()=>lP(r)};function uP(t){const{top:e,left:r,bottom:n,right:s}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:a}=window;return(e>0&&e<i||n>0&&n<i)&&(r>0&&r<a||s>0&&s<a)}const dP=t=>(e,r)=>{const n=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){n.disconnect(),e();break}},t);return r(s=>{if(s instanceof Element){if(uP(s))return e(),n.disconnect(),!1;n.observe(s)}}),()=>n.disconnect()},fP=t=>e=>{if(t){const r=matchMedia(t);if(r.matches)e();else return r.addEventListener("change",e,{once:!0}),()=>r.removeEventListener("change",e)}},hP=(t=[])=>(e,r)=>{Tr(t)&&(t=[t]);let n=!1;const s=a=>{n||(n=!0,i(),e(),a.target.dispatchEvent(new a.constructor(a.type,a)))},i=()=>{r(a=>{for(const o of t)a.removeEventListener(o,s)})};return r(a=>{for(const o of t)a.addEventListener(o,s,{once:!0})}),i};function pP(t,e){if(Ql(t)&&t.data==="["){let r=1,n=t.nextSibling;for(;n;){if(n.nodeType===1){if(e(n)===!1)break}else if(Ql(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else e(t)}const ro=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function mP(t){Tt(t)&&(t={loader:t});const{loader:e,loadingComponent:r,errorComponent:n,delay:s=200,hydrate:i,timeout:a,suspensible:o=!0,onError:l}=t;let c=null,u,f=0;const h=()=>(f++,c=null,p()),p=()=>{let g;return c||(g=c=e().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),l)return new Promise((y,b)=>{l(v,()=>y(h()),()=>b(v),f+1)});throw v}).then(v=>g!==c&&c?c:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),u=v,v)))};return Hd({name:"AsyncComponentWrapper",__asyncLoader:p,__asyncHydrate(g,v,y){const b=i?()=>{const x=i(()=>{y()},w=>pP(g,w));x&&(v.bum||(v.bum=[])).push(x),(v.u||(v.u=[])).push(()=>!0)}:y;u?b():p().then(()=>!v.isUnmounted&&b())},get __asyncResolved(){return u},setup(){const g=ln;if(T1(g),u)return()=>am(u,g);const v=x=>{c=null,hl(x,g,13,!n)};if(o&&g.suspense||_c)return p().then(x=>()=>am(x,g)).catch(x=>(v(x),()=>n?Re(n,{error:x}):null));const y=se(!1),b=se(),E=se(!!s);return s&&setTimeout(()=>{E.value=!1},s),a!=null&&setTimeout(()=>{if(!y.value&&!b.value){const x=new Error(`Async component timed out after ${a}ms.`);v(x),b.value=x}},a),p().then(()=>{y.value=!0,g.parent&&jd(g.parent.vnode)&&g.parent.update()}).catch(x=>{v(x),b.value=x}),()=>{if(y.value&&u)return am(u,g);if(b.value&&n)return Re(n,{error:b.value});if(r&&!E.value)return Re(r)}}})}function am(t,e){const{ref:r,props:n,children:s,ce:i}=e.vnode,a=Re(t,n,s);return a.ref=r,a.ce=i,delete e.vnode.ce,a}const jd=t=>t.type.__isKeepAlive,gP={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const r=Ys(),n=r.ctx;if(!n.renderer)return()=>{const E=e.default&&e.default();return E&&E.length===1?E[0]:E};const s=new Map,i=new Set;let a=null;const o=r.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:f}}}=n,h=f("div");n.activate=(E,x,w,R,P)=>{const S=E.component;c(E,x,w,0,o),l(S.vnode,E,x,w,S,o,R,E.slotScopeIds,P),an(()=>{S.isDeactivated=!1,S.a&&sc(S.a);const _=E.props&&E.props.onVnodeMounted;_&&ys(_,S.parent,E)},o)},n.deactivate=E=>{const x=E.component;q0(x.m),q0(x.a),c(E,h,null,1,o),an(()=>{x.da&&sc(x.da);const w=E.props&&E.props.onVnodeUnmounted;w&&ys(w,x.parent,E),x.isDeactivated=!0},o)};function p(E){im(E),u(E,r,o,!0)}function g(E){s.forEach((x,w)=>{const R=nv(x.type);R&&!E(R)&&v(w)})}function v(E){const x=s.get(E);x&&(!a||!aa(x,a))?p(x):a&&im(a),s.delete(E),i.delete(E)}$t(()=>[t.include,t.exclude],([E,x])=>{E&&g(w=>xu(E,w)),x&&g(w=>!xu(x,w))},{flush:"post",deep:!0});let y=null;const b=()=>{y!=null&&(X0(r.subTree.type)?an(()=>{s.set(y,Bf(r.subTree))},r.subTree.suspense):s.set(y,Bf(r.subTree)))};return Gt(b),np(b),sp(()=>{s.forEach(E=>{const{subTree:x,suspense:w}=r,R=Bf(x);if(E.type===R.type&&E.key===R.key){im(R);const P=R.component.da;P&&an(P,w);return}p(E)})}),()=>{if(y=null,!e.default)return a=null;const E=e.default(),x=E[0];if(E.length>1)return a=null,E;if(!Ei(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return a=null,x;let w=Bf(x);if(w.type===qr)return a=null,w;const R=w.type,P=nv(ro(w)?w.type.__asyncResolved||{}:R),{include:S,exclude:_,max:m}=t;if(S&&(!P||!xu(S,P))||_&&P&&xu(_,P))return w.shapeFlag&=-257,a=w,x;const A=w.key==null?R:w.key,k=s.get(A);return w.el&&(w=La(w),x.shapeFlag&128&&(x.ssContent=w)),y=A,k?(w.el=k.el,w.component=k.component,w.transition&&xi(w,w.transition),w.shapeFlag|=512,i.delete(A),i.add(A)):(i.add(A),m&&i.size>parseInt(m,10)&&v(i.values().next().value)),w.shapeFlag|=256,a=w,X0(x.type)?x:w}}},vP=gP;function xu(t,e){return ht(t)?t.some(r=>xu(r,e)):Tr(t)?t.split(",").includes(e):zD(t)?(t.lastIndex=0,t.test(e)):!1}function UA(t,e){VA(t,"a",e)}function $A(t,e){VA(t,"da",e)}function VA(t,e,r=ln){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(rp(e,n,r),r){let s=r.parent;for(;s&&s.parent;)jd(s.parent.vnode)&&yP(n,e,r,s),s=s.parent}}function yP(t,e,r,n){const s=rp(e,t,n,!0);Ha(()=>{c1(n[e],s)},r)}function im(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Bf(t){return t.shapeFlag&128?t.ssContent:t}function rp(t,e,r=ln,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...a)=>{gi();const o=Zo(r),l=Ks(e,r,t,a);return o(),vi(),l});return n?s.unshift(i):s.push(i),i}}const Ci=t=>(e,r=ln)=>{(!_c||t==="sp")&&rp(t,(...n)=>e(...n),r)},HA=Ci("bm"),Gt=Ci("m"),w1=Ci("bu"),np=Ci("u"),sp=Ci("bum"),Ha=Ci("um"),jA=Ci("sp"),GA=Ci("rtg"),WA=Ci("rtc");function zA(t,e=ln){rp("ec",t,e)}const C1="components",xP="directives";function _r(t,e){return I1(C1,t,!0,e)||t}const KA=Symbol.for("v-ndc");function k1(t){return Tr(t)?I1(C1,t,!1)||t:t||KA}function EP(t){return I1(xP,t)}function I1(t,e,r=!0,n=!1){const s=cn||ln;if(s){const i=s.type;if(t===C1){const o=nv(i,!1);if(o&&(o===e||o===In(e)||o===Vd(In(e))))return i}const a=D2(s[t]||i[t],e)||D2(s.appContext[t],e);return!a&&n?i:a}}function D2(t,e){return t&&(t[e]||t[In(e)]||t[Vd(In(e))])}function He(t,e,r,n){let s;const i=r&&r[n],a=ht(t);if(a||Tr(t)){const o=a&&Ra(t);let l=!1,c=!1;o&&(l=!Ps(t),c=yi(t),t=qh(t)),s=new Array(t.length);for(let u=0,f=t.length;u<f;u++)s[u]=e(l?c?j0(Cn(t[u])):Cn(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(gr(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,i&&i[l]));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];s[l]=e(t[u],u,l,i&&i[l])}}else s=[];return r&&(r[n]=s),s}function _P(t,e){for(let r=0;r<e.length;r++){const n=e[r];if(ht(n))for(let s=0;s<n.length;s++)t[n[s].name]=n[s].fn;else n&&(t[n.name]=n.key?(...s)=>{const i=n.fn(...s);return i&&(i.key=n.key),i}:n.fn)}return t}function qA(t,e,r={},n,s){if(cn.ce||cn.parent&&ro(cn.parent)&&cn.parent.ce)return e!=="default"&&(r.name=e),B(),Qt(Pe,null,[Re("slot",r,n&&n())],64);let i=t[e];i&&i._c&&(i._d=!1),B();const a=i&&D1(i(r)),o=r.key||a&&a.key,l=Qt(Pe,{key:(o&&!pa(o)?o:`_${e}`)+(!a&&n?"_fb":"")},a||(n?n():[]),a&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function D1(t){return t.some(e=>Ei(e)?!(e.type===qr||e.type===Pe&&!D1(e.children)):!0)?t:null}function bP(t,e){const r={};for(const n in t)r[e&&/[A-Z]/.test(n)?`on:${n}`:Fu(n)]=t[n];return r}const zg=t=>t?wT(t)?Wd(t):zg(t.parent):null,Lu=xr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>zg(t.parent),$root:t=>zg(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>P1(t),$forceUpdate:t=>t.f||(t.f=()=>{b1(t.update)}),$nextTick:t=>t.n||(t.n=pl.bind(t.proxy)),$watch:t=>ZP.bind(t)}),om=(t,e)=>t!==Jt&&!t.__isScriptSetup&&ur(t,e),Kg={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:a,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(om(n,e))return a[e]=1,n[e];if(s!==Jt&&ur(s,e))return a[e]=2,s[e];if((c=t.propsOptions[0])&&ur(c,e))return a[e]=3,i[e];if(r!==Jt&&ur(r,e))return a[e]=4,r[e];qg&&(a[e]=0)}}const u=Lu[e];let f,h;if(u)return e==="$attrs"&&Wn(t.attrs,"get",""),u(t);if((f=o.__cssModules)&&(f=f[e]))return f;if(r!==Jt&&ur(r,e))return a[e]=4,r[e];if(h=l.config.globalProperties,ur(h,e))return h[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return om(s,e)?(s[e]=r,!0):n!==Jt&&ur(n,e)?(n[e]=r,!0):ur(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},a){let o;return!!r[a]||t!==Jt&&ur(t,a)||om(e,a)||(o=i[0])&&ur(o,a)||ur(n,a)||ur(Lu,a)||ur(s.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:ur(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}},SP=xr({},Kg,{get(t,e){if(e!==Symbol.unscopables)return Kg.get(t,e,t)},has(t,e){return e[0]!=="_"&&!QD(e)}});function AP(){return null}function TP(){return null}function wP(t){}function CP(t){}function kP(){return null}function IP(){}function DP(t,e){return null}function PP(){return XA().slots}function RP(){return XA().attrs}function XA(){const t=Ys();return t.setupContext||(t.setupContext=IT(t))}function vd(t){return ht(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}function FP(t,e){const r=vd(t);for(const n in e){if(n.startsWith("__skip"))continue;let s=r[n];s?ht(s)||Tt(s)?s=r[n]={type:s,default:e[n]}:s.default=e[n]:s===null&&(s=r[n]={default:e[n]}),s&&e[`__skip_${n}`]&&(s.skipFactory=!0)}return r}function NP(t,e){return!t||!e?t||e:ht(t)&&ht(e)?t.concat(e):xr({},vd(t),vd(e))}function OP(t,e){const r={};for(const n in t)e.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>t[n]});return r}function MP(t){const e=Ys();let r=t();return ev(),u1(r)&&(r=r.catch(n=>{throw Zo(e),n})),[r,()=>Zo(e)]}let qg=!0;function LP(t){const e=P1(t),r=t.proxy,n=t.ctx;qg=!1,e.beforeCreate&&P2(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:p,updated:g,activated:v,deactivated:y,beforeDestroy:b,beforeUnmount:E,destroyed:x,unmounted:w,render:R,renderTracked:P,renderTriggered:S,errorCaptured:_,serverPrefetch:m,expose:A,inheritAttrs:k,components:I,directives:C,filters:M}=e;if(c&&BP(c,n,null),a)for(const N in a){const L=a[N];Tt(L)&&(n[N]=L.bind(r))}if(s){const N=s.call(r,r);gr(N)&&(t.data=Ns(N))}if(qg=!0,i)for(const N in i){const L=i[N],O=Tt(L)?L.bind(r,r):Tt(L.get)?L.get.bind(r,r):Gs,z=!Tt(L)&&Tt(L.set)?L.set.bind(r):Gs,H=be({get:O,set:z});Object.defineProperty(n,N,{enumerable:!0,configurable:!0,get:()=>H.value,set:V=>H.value=V})}if(o)for(const N in o)YA(o[N],n,r,N);if(l){const N=Tt(l)?l.call(r):l;Reflect.ownKeys(N).forEach(L=>{Bu(L,N[L])})}u&&P2(u,t,"c");function F(N,L){ht(L)?L.forEach(O=>N(O.bind(r))):L&&N(L.bind(r))}if(F(HA,f),F(Gt,h),F(w1,p),F(np,g),F(UA,v),F($A,y),F(zA,_),F(WA,P),F(GA,S),F(sp,E),F(Ha,w),F(jA,m),ht(A))if(A.length){const N=t.exposed||(t.exposed={});A.forEach(L=>{Object.defineProperty(N,L,{get:()=>r[L],set:O=>r[L]=O})})}else t.exposed||(t.exposed={});R&&t.render===Gs&&(t.render=R),k!=null&&(t.inheritAttrs=k),I&&(t.components=I),C&&(t.directives=C),m&&T1(t)}function BP(t,e,r=Gs){ht(t)&&(t=Xg(t));for(const n in t){const s=t[n];let i;gr(s)?"default"in s?i=Rs(s.from||n,s.default,!0):i=Rs(s.from||n):i=Rs(s),Cr(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function P2(t,e,r){Ks(ht(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function YA(t,e,r,n){let s=n.includes(".")?mT(r,n):()=>r[n];if(Tr(t)){const i=e[t];Tt(i)&&$t(s,i)}else if(Tt(t))$t(s,t.bind(r));else if(gr(t))if(ht(t))t.forEach(i=>YA(i,e,r,n));else{const i=Tt(t.handler)?t.handler.bind(r):e[t.handler];Tt(i)&&$t(s,i,t)}}function P1(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let l;return o?l=o:!s.length&&!r&&!n?l=e:(l={},s.length&&s.forEach(c=>K0(l,c,a,!0)),K0(l,e,a)),gr(e)&&i.set(e,l),l}function K0(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&K0(t,i,r,!0),s&&s.forEach(a=>K0(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=UP[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const UP={data:R2,props:F2,emits:F2,methods:Eu,computed:Eu,beforeCreate:as,created:as,beforeMount:as,mounted:as,beforeUpdate:as,updated:as,beforeDestroy:as,beforeUnmount:as,destroyed:as,unmounted:as,activated:as,deactivated:as,errorCaptured:as,serverPrefetch:as,components:Eu,directives:Eu,watch:VP,provide:R2,inject:$P};function R2(t,e){return e?t?function(){return xr(Tt(t)?t.call(this,this):t,Tt(e)?e.call(this,this):e)}:e:t}function $P(t,e){return Eu(Xg(t),Xg(e))}function Xg(t){if(ht(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function as(t,e){return t?[...new Set([].concat(t,e))]:e}function Eu(t,e){return t?xr(Object.create(null),t,e):e}function F2(t,e){return t?ht(t)&&ht(e)?[...new Set([...t,...e])]:xr(Object.create(null),vd(t),vd(e??{})):e}function VP(t,e){if(!t)return e;if(!e)return t;const r=xr(Object.create(null),t);for(const n in e)r[n]=as(t[n],e[n]);return r}function QA(){return{app:null,config:{isNativeTag:GD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let HP=0;function jP(t,e){return function(n,s=null){Tt(n)||(n=xr({},n)),s!=null&&!gr(s)&&(s=null);const i=QA(),a=new WeakSet,o=[];let l=!1;const c=i.app={_uid:HP++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:PT,get config(){return i.config},set config(u){},use(u,...f){return a.has(u)||(u&&Tt(u.install)?(a.add(u),u.install(c,...f)):Tt(u)&&(a.add(u),u(c,...f))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,f){return f?(i.components[u]=f,c):i.components[u]},directive(u,f){return f?(i.directives[u]=f,c):i.directives[u]},mount(u,f,h){if(!l){const p=c._ceVNode||Re(n,s);return p.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),f&&e?e(p,u):t(p,u,h),l=!0,c._container=u,u.__vue_app__=c,Wd(p.component)}},onUnmount(u){o.push(u)},unmount(){l&&(Ks(o,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return i.provides[u]=f,c},runWithContext(u){const f=jo;jo=c;try{return u()}finally{jo=f}}};return c}}let jo=null;function Bu(t,e){if(ln){let r=ln.provides;const n=ln.parent&&ln.parent.provides;n===r&&(r=ln.provides=Object.create(n)),r[t]=e}}function Rs(t,e,r=!1){const n=ln||cn;if(n||jo){let s=jo?jo._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&Tt(e)?e.call(n&&n.proxy):e}}function JA(){return!!(ln||cn||jo)}const ZA={},eT=()=>Object.create(ZA),tT=t=>Object.getPrototypeOf(t)===ZA;function GP(t,e,r,n=!1){const s={},i=eT();t.propsDefaults=Object.create(null),rT(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);r?t.props=n?s:y1(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function WP(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,o=Xt(s),[l]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(ap(t.emitsOptions,h))continue;const p=e[h];if(l)if(ur(i,h))p!==i[h]&&(i[h]=p,c=!0);else{const g=In(h);s[g]=Yg(l,o,g,p,t,!1)}else p!==i[h]&&(i[h]=p,c=!0)}}}else{rT(t,e,s,i)&&(c=!0);let u;for(const f in o)(!e||!ur(e,f)&&((u=_s(f))===f||!ur(e,u)))&&(l?r&&(r[f]!==void 0||r[u]!==void 0)&&(s[f]=Yg(l,o,f,void 0,t,!0)):delete s[f]);if(i!==o)for(const f in i)(!e||!ur(e,f))&&(delete i[f],c=!0)}c&&Za(t.attrs,"set","")}function rT(t,e,r,n){const[s,i]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(nc(l))continue;const c=e[l];let u;s&&ur(s,u=In(l))?!i||!i.includes(u)?r[u]=c:(o||(o={}))[u]=c:ap(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=Xt(r),c=o||Jt;for(let u=0;u<i.length;u++){const f=i[u];r[f]=Yg(s,l,f,c[f],t,!ur(c,f))}}return a}function Yg(t,e,r,n,s,i){const a=t[r];if(a!=null){const o=ur(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Tt(l)){const{propsDefaults:c}=s;if(r in c)n=c[r];else{const u=Zo(s);n=c[r]=l.call(null,e),u()}}else n=l;s.ce&&s.ce._setProp(r,n)}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===_s(r))&&(n=!0))}return n}const zP=new WeakMap;function nT(t,e,r=!1){const n=r?zP:e.propsCache,s=n.get(t);if(s)return s;const i=t.props,a={},o=[];let l=!1;if(!Tt(t)){const u=f=>{l=!0;const[h,p]=nT(f,e,!0);xr(a,h),p&&o.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return gr(t)&&n.set(t,tc),tc;if(ht(i))for(let u=0;u<i.length;u++){const f=In(i[u]);N2(f)&&(a[f]=Jt)}else if(i)for(const u in i){const f=In(u);if(N2(f)){const h=i[u],p=a[f]=ht(h)||Tt(h)?{type:h}:xr({},h),g=p.type;let v=!1,y=!0;if(ht(g))for(let b=0;b<g.length;++b){const E=g[b],x=Tt(E)&&E.name;if(x==="Boolean"){v=!0;break}else x==="String"&&(y=!1)}else v=Tt(g)&&g.name==="Boolean";p[0]=v,p[1]=y,(v||ur(p,"default"))&&o.push(f)}}const c=[a,o];return gr(t)&&n.set(t,c),c}function N2(t){return t[0]!=="$"&&!nc(t)}const R1=t=>t[0]==="_"||t==="$stable",F1=t=>ht(t)?t.map(Es):[Es(t)],KP=(t,e,r)=>{if(e._n)return e;const n=ep((...s)=>F1(e(...s)),r);return n._c=!1,n},sT=(t,e,r)=>{const n=t._ctx;for(const s in t){if(R1(s))continue;const i=t[s];if(Tt(i))e[s]=KP(s,i,n);else if(i!=null){const a=F1(i);e[s]=()=>a}}},aT=(t,e)=>{const r=F1(e);t.slots.default=()=>r},iT=(t,e,r)=>{for(const n in e)(r||!R1(n))&&(t[n]=e[n])},qP=(t,e,r)=>{const n=t.slots=eT();if(t.vnode.shapeFlag&32){const s=e.__;s&&Vg(n,"__",s,!0);const i=e._;i?(iT(n,e,r),r&&Vg(n,"_",i,!0)):sT(e,n)}else e&&aT(t,e)},XP=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,a=Jt;if(n.shapeFlag&32){const o=e._;o?r&&o===1?i=!1:iT(s,e,r):(i=!e.$stable,sT(e,s)),a=e}else e&&(aT(t,e),a={default:1});if(i)for(const o in s)!R1(o)&&a[o]==null&&delete s[o]},an=xT;function oT(t){return cT(t)}function lT(t){return cT(t,aP)}function cT(t,e){const r=Wh();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:p=Gs,insertStaticContent:g}=t,v=(Y,Q,fe,ye=null,ie=null,ee=null,ge=void 0,Te=null,ke=!!Q.dynamicChildren)=>{if(Y===Q)return;Y&&!aa(Y,Q)&&(ye=ae(Y),V(Y,ie,ee,!0),Y=null),Q.patchFlag===-2&&(ke=!1,Q.dynamicChildren=null);const{type:Ae,ref:We,shapeFlag:De}=Q;switch(Ae){case no:y(Y,Q,fe,ye);break;case qr:b(Y,Q,fe,ye);break;case Go:Y==null&&E(Q,fe,ye,ge);break;case Pe:I(Y,Q,fe,ye,ie,ee,ge,Te,ke);break;default:De&1?R(Y,Q,fe,ye,ie,ee,ge,Te,ke):De&6?C(Y,Q,fe,ye,ie,ee,ge,Te,ke):(De&64||De&128)&&Ae.process(Y,Q,fe,ye,ie,ee,ge,Te,ke,Z)}We!=null&&ie?ic(We,Y&&Y.ref,ee,Q||Y,!Q):We==null&&Y&&Y.ref!=null&&ic(Y.ref,null,ee,Y,!0)},y=(Y,Q,fe,ye)=>{if(Y==null)n(Q.el=o(Q.children),fe,ye);else{const ie=Q.el=Y.el;Q.children!==Y.children&&c(ie,Q.children)}},b=(Y,Q,fe,ye)=>{Y==null?n(Q.el=l(Q.children||""),fe,ye):Q.el=Y.el},E=(Y,Q,fe,ye)=>{[Y.el,Y.anchor]=g(Y.children,Q,fe,ye,Y.el,Y.anchor)},x=({el:Y,anchor:Q},fe,ye)=>{let ie;for(;Y&&Y!==Q;)ie=h(Y),n(Y,fe,ye),Y=ie;n(Q,fe,ye)},w=({el:Y,anchor:Q})=>{let fe;for(;Y&&Y!==Q;)fe=h(Y),s(Y),Y=fe;s(Q)},R=(Y,Q,fe,ye,ie,ee,ge,Te,ke)=>{Q.type==="svg"?ge="svg":Q.type==="math"&&(ge="mathml"),Y==null?P(Q,fe,ye,ie,ee,ge,Te,ke):m(Y,Q,ie,ee,ge,Te,ke)},P=(Y,Q,fe,ye,ie,ee,ge,Te)=>{let ke,Ae;const{props:We,shapeFlag:De,transition:je,dirs:$e}=Y;if(ke=Y.el=a(Y.type,ee,We&&We.is,We),De&8?u(ke,Y.children):De&16&&_(Y.children,ke,null,ye,ie,lm(Y,ee),ge,Te),$e&&Ia(Y,null,ye,"created"),S(ke,Y,Y.scopeId,ge,ye),We){for(const Ke in We)Ke!=="value"&&!nc(Ke)&&i(ke,Ke,null,We[Ke],ee,ye);"value"in We&&i(ke,"value",null,We.value,ee),(Ae=We.onVnodeBeforeMount)&&ys(Ae,ye,Y)}$e&&Ia(Y,null,ye,"beforeMount");const Ie=uT(ie,je);Ie&&je.beforeEnter(ke),n(ke,Q,fe),((Ae=We&&We.onVnodeMounted)||Ie||$e)&&an(()=>{Ae&&ys(Ae,ye,Y),Ie&&je.enter(ke),$e&&Ia(Y,null,ye,"mounted")},ie)},S=(Y,Q,fe,ye,ie)=>{if(fe&&p(Y,fe),ye)for(let ee=0;ee<ye.length;ee++)p(Y,ye[ee]);if(ie){let ee=ie.subTree;if(Q===ee||X0(ee.type)&&(ee.ssContent===Q||ee.ssFallback===Q)){const ge=ie.vnode;S(Y,ge,ge.scopeId,ge.slotScopeIds,ie.parent)}}},_=(Y,Q,fe,ye,ie,ee,ge,Te,ke=0)=>{for(let Ae=ke;Ae<Y.length;Ae++){const We=Y[Ae]=Te?zi(Y[Ae]):Es(Y[Ae]);v(null,We,Q,fe,ye,ie,ee,ge,Te)}},m=(Y,Q,fe,ye,ie,ee,ge)=>{const Te=Q.el=Y.el;let{patchFlag:ke,dynamicChildren:Ae,dirs:We}=Q;ke|=Y.patchFlag&16;const De=Y.props||Jt,je=Q.props||Jt;let $e;if(fe&&ko(fe,!1),($e=je.onVnodeBeforeUpdate)&&ys($e,fe,Q,Y),We&&Ia(Q,Y,fe,"beforeUpdate"),fe&&ko(fe,!0),(De.innerHTML&&je.innerHTML==null||De.textContent&&je.textContent==null)&&u(Te,""),Ae?A(Y.dynamicChildren,Ae,Te,fe,ye,lm(Q,ie),ee):ge||L(Y,Q,Te,null,fe,ye,lm(Q,ie),ee,!1),ke>0){if(ke&16)k(Te,De,je,fe,ie);else if(ke&2&&De.class!==je.class&&i(Te,"class",null,je.class,ie),ke&4&&i(Te,"style",De.style,je.style,ie),ke&8){const Ie=Q.dynamicProps;for(let Ke=0;Ke<Ie.length;Ke++){const _e=Ie[Ke],Ee=De[_e],Se=je[_e];(Se!==Ee||_e==="value")&&i(Te,_e,Ee,Se,ie,fe)}}ke&1&&Y.children!==Q.children&&u(Te,Q.children)}else!ge&&Ae==null&&k(Te,De,je,fe,ie);(($e=je.onVnodeUpdated)||We)&&an(()=>{$e&&ys($e,fe,Q,Y),We&&Ia(Q,Y,fe,"updated")},ye)},A=(Y,Q,fe,ye,ie,ee,ge)=>{for(let Te=0;Te<Q.length;Te++){const ke=Y[Te],Ae=Q[Te],We=ke.el&&(ke.type===Pe||!aa(ke,Ae)||ke.shapeFlag&198)?f(ke.el):fe;v(ke,Ae,We,null,ye,ie,ee,ge,!0)}},k=(Y,Q,fe,ye,ie)=>{if(Q!==fe){if(Q!==Jt)for(const ee in Q)!nc(ee)&&!(ee in fe)&&i(Y,ee,Q[ee],null,ie,ye);for(const ee in fe){if(nc(ee))continue;const ge=fe[ee],Te=Q[ee];ge!==Te&&ee!=="value"&&i(Y,ee,Te,ge,ie,ye)}"value"in fe&&i(Y,"value",Q.value,fe.value,ie)}},I=(Y,Q,fe,ye,ie,ee,ge,Te,ke)=>{const Ae=Q.el=Y?Y.el:o(""),We=Q.anchor=Y?Y.anchor:o("");let{patchFlag:De,dynamicChildren:je,slotScopeIds:$e}=Q;$e&&(Te=Te?Te.concat($e):$e),Y==null?(n(Ae,fe,ye),n(We,fe,ye),_(Q.children||[],fe,We,ie,ee,ge,Te,ke)):De>0&&De&64&&je&&Y.dynamicChildren?(A(Y.dynamicChildren,je,fe,ie,ee,ge,Te),(Q.key!=null||ie&&Q===ie.subTree)&&N1(Y,Q,!0)):L(Y,Q,fe,We,ie,ee,ge,Te,ke)},C=(Y,Q,fe,ye,ie,ee,ge,Te,ke)=>{Q.slotScopeIds=Te,Y==null?Q.shapeFlag&512?ie.ctx.activate(Q,fe,ye,ge,ke):M(Q,fe,ye,ie,ee,ge,ke):D(Y,Q,ke)},M=(Y,Q,fe,ye,ie,ee,ge)=>{const Te=Y.component=TT(Y,ye,ie);if(jd(Y)&&(Te.ctx.renderer=Z),CT(Te,!1,ge),Te.asyncDep){if(ie&&ie.registerDep(Te,F,ge),!Y.el){const ke=Te.subTree=Re(qr);b(null,ke,Q,fe)}}else F(Te,Y,Q,fe,ie,ee,ge)},D=(Y,Q,fe)=>{const ye=Q.component=Y.component;if(aR(Y,Q,fe))if(ye.asyncDep&&!ye.asyncResolved){N(ye,Q,fe);return}else ye.next=Q,ye.update();else Q.el=Y.el,ye.vnode=Q},F=(Y,Q,fe,ye,ie,ee,ge)=>{const Te=()=>{if(Y.isMounted){let{next:De,bu:je,u:$e,parent:Ie,vnode:Ke}=Y;{const ze=dT(Y);if(ze){De&&(De.el=Ke.el,N(Y,De,ge)),ze.asyncDep.then(()=>{Y.isUnmounted||Te()});return}}let _e=De,Ee;ko(Y,!1),De?(De.el=Ke.el,N(Y,De,ge)):De=Ke,je&&sc(je),(Ee=De.props&&De.props.onVnodeBeforeUpdate)&&ys(Ee,Ie,De,Ke),ko(Y,!0);const Se=x0(Y),Le=Y.subTree;Y.subTree=Se,v(Le,Se,f(Le.el),ae(Le),Y,ie,ee),De.el=Se.el,_e===null&&ip(Y,Se.el),$e&&an($e,ie),(Ee=De.props&&De.props.onVnodeUpdated)&&an(()=>ys(Ee,Ie,De,Ke),ie)}else{let De;const{el:je,props:$e}=Q,{bm:Ie,m:Ke,parent:_e,root:Ee,type:Se}=Y,Le=ro(Q);if(ko(Y,!1),Ie&&sc(Ie),!Le&&(De=$e&&$e.onVnodeBeforeMount)&&ys(De,_e,Q),ko(Y,!0),je&&J){const ze=()=>{Y.subTree=x0(Y),J(je,Y.subTree,Y,ie,null)};Le&&Se.__asyncHydrate?Se.__asyncHydrate(je,Y,ze):ze()}else{Ee.ce&&Ee.ce._def.shadowRoot!==!1&&Ee.ce._injectChildStyle(Se);const ze=Y.subTree=x0(Y);v(null,ze,fe,ye,Y,ie,ee),Q.el=ze.el}if(Ke&&an(Ke,ie),!Le&&(De=$e&&$e.onVnodeMounted)){const ze=Q;an(()=>ys(De,_e,ze),ie)}(Q.shapeFlag&256||_e&&ro(_e.vnode)&&_e.vnode.shapeFlag&256)&&Y.a&&an(Y.a,ie),Y.isMounted=!0,Q=fe=ye=null}};Y.scope.on();const ke=Y.effect=new dd(Te);Y.scope.off();const Ae=Y.update=ke.run.bind(ke),We=Y.job=ke.runIfDirty.bind(ke);We.i=Y,We.id=Y.uid,ke.scheduler=()=>b1(We),ko(Y,!0),Ae()},N=(Y,Q,fe)=>{Q.component=Y;const ye=Y.vnode.props;Y.vnode=Q,Y.next=null,WP(Y,Q.props,ye,fe),XP(Y,Q.children,fe),gi(),S2(Y),vi()},L=(Y,Q,fe,ye,ie,ee,ge,Te,ke=!1)=>{const Ae=Y&&Y.children,We=Y?Y.shapeFlag:0,De=Q.children,{patchFlag:je,shapeFlag:$e}=Q;if(je>0){if(je&128){z(Ae,De,fe,ye,ie,ee,ge,Te,ke);return}else if(je&256){O(Ae,De,fe,ye,ie,ee,ge,Te,ke);return}}$e&8?(We&16&&de(Ae,ie,ee),De!==Ae&&u(fe,De)):We&16?$e&16?z(Ae,De,fe,ye,ie,ee,ge,Te,ke):de(Ae,ie,ee,!0):(We&8&&u(fe,""),$e&16&&_(De,fe,ye,ie,ee,ge,Te,ke))},O=(Y,Q,fe,ye,ie,ee,ge,Te,ke)=>{Y=Y||tc,Q=Q||tc;const Ae=Y.length,We=Q.length,De=Math.min(Ae,We);let je;for(je=0;je<De;je++){const $e=Q[je]=ke?zi(Q[je]):Es(Q[je]);v(Y[je],$e,fe,null,ie,ee,ge,Te,ke)}Ae>We?de(Y,ie,ee,!0,!1,De):_(Q,fe,ye,ie,ee,ge,Te,ke,De)},z=(Y,Q,fe,ye,ie,ee,ge,Te,ke)=>{let Ae=0;const We=Q.length;let De=Y.length-1,je=We-1;for(;Ae<=De&&Ae<=je;){const $e=Y[Ae],Ie=Q[Ae]=ke?zi(Q[Ae]):Es(Q[Ae]);if(aa($e,Ie))v($e,Ie,fe,null,ie,ee,ge,Te,ke);else break;Ae++}for(;Ae<=De&&Ae<=je;){const $e=Y[De],Ie=Q[je]=ke?zi(Q[je]):Es(Q[je]);if(aa($e,Ie))v($e,Ie,fe,null,ie,ee,ge,Te,ke);else break;De--,je--}if(Ae>De){if(Ae<=je){const $e=je+1,Ie=$e<We?Q[$e].el:ye;for(;Ae<=je;)v(null,Q[Ae]=ke?zi(Q[Ae]):Es(Q[Ae]),fe,Ie,ie,ee,ge,Te,ke),Ae++}}else if(Ae>je)for(;Ae<=De;)V(Y[Ae],ie,ee,!0),Ae++;else{const $e=Ae,Ie=Ae,Ke=new Map;for(Ae=Ie;Ae<=je;Ae++){const St=Q[Ae]=ke?zi(Q[Ae]):Es(Q[Ae]);St.key!=null&&Ke.set(St.key,Ae)}let _e,Ee=0;const Se=je-Ie+1;let Le=!1,ze=0;const lt=new Array(Se);for(Ae=0;Ae<Se;Ae++)lt[Ae]=0;for(Ae=$e;Ae<=De;Ae++){const St=Y[Ae];if(Ee>=Se){V(St,ie,ee,!0);continue}let Vt;if(St.key!=null)Vt=Ke.get(St.key);else for(_e=Ie;_e<=je;_e++)if(lt[_e-Ie]===0&&aa(St,Q[_e])){Vt=_e;break}Vt===void 0?V(St,ie,ee,!0):(lt[Vt-Ie]=Ae+1,Vt>=ze?ze=Vt:Le=!0,v(St,Q[Vt],fe,null,ie,ee,ge,Te,ke),Ee++)}const xt=Le?YP(lt):tc;for(_e=xt.length-1,Ae=Se-1;Ae>=0;Ae--){const St=Ie+Ae,Vt=Q[St],pt=St+1<We?Q[St+1].el:ye;lt[Ae]===0?v(null,Vt,fe,pt,ie,ee,ge,Te,ke):Le&&(_e<0||Ae!==xt[_e]?H(Vt,fe,pt,2):_e--)}}},H=(Y,Q,fe,ye,ie=null)=>{const{el:ee,type:ge,transition:Te,children:ke,shapeFlag:Ae}=Y;if(Ae&6){H(Y.component.subTree,Q,fe,ye);return}if(Ae&128){Y.suspense.move(Q,fe,ye);return}if(Ae&64){ge.move(Y,Q,fe,Z);return}if(ge===Pe){n(ee,Q,fe);for(let De=0;De<ke.length;De++)H(ke[De],Q,fe,ye);n(Y.anchor,Q,fe);return}if(ge===Go){x(Y,Q,fe);return}if(ye!==2&&Ae&1&&Te)if(ye===0)Te.beforeEnter(ee),n(ee,Q,fe),an(()=>Te.enter(ee),ie);else{const{leave:De,delayLeave:je,afterLeave:$e}=Te,Ie=()=>{Y.ctx.isUnmounted?s(ee):n(ee,Q,fe)},Ke=()=>{De(ee,()=>{Ie(),$e&&$e()})};je?je(ee,Ie,Ke):Ke()}else n(ee,Q,fe)},V=(Y,Q,fe,ye=!1,ie=!1)=>{const{type:ee,props:ge,ref:Te,children:ke,dynamicChildren:Ae,shapeFlag:We,patchFlag:De,dirs:je,cacheIndex:$e}=Y;if(De===-2&&(ie=!1),Te!=null&&(gi(),ic(Te,null,fe,Y,!0),vi()),$e!=null&&(Q.renderCache[$e]=void 0),We&256){Q.ctx.deactivate(Y);return}const Ie=We&1&&je,Ke=!ro(Y);let _e;if(Ke&&(_e=ge&&ge.onVnodeBeforeUnmount)&&ys(_e,Q,Y),We&6)re(Y.component,fe,ye);else{if(We&128){Y.suspense.unmount(fe,ye);return}Ie&&Ia(Y,null,Q,"beforeUnmount"),We&64?Y.type.remove(Y,Q,fe,Z,ye):Ae&&!Ae.hasOnce&&(ee!==Pe||De>0&&De&64)?de(Ae,Q,fe,!1,!0):(ee===Pe&&De&384||!ie&&We&16)&&de(ke,Q,fe),ye&&W(Y)}(Ke&&(_e=ge&&ge.onVnodeUnmounted)||Ie)&&an(()=>{_e&&ys(_e,Q,Y),Ie&&Ia(Y,null,Q,"unmounted")},fe)},W=Y=>{const{type:Q,el:fe,anchor:ye,transition:ie}=Y;if(Q===Pe){G(fe,ye);return}if(Q===Go){w(Y);return}const ee=()=>{s(fe),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(Y.shapeFlag&1&&ie&&!ie.persisted){const{leave:ge,delayLeave:Te}=ie,ke=()=>ge(fe,ee);Te?Te(Y.el,ee,ke):ke()}else ee()},G=(Y,Q)=>{let fe;for(;Y!==Q;)fe=h(Y),s(Y),Y=fe;s(Q)},re=(Y,Q,fe)=>{const{bum:ye,scope:ie,job:ee,subTree:ge,um:Te,m:ke,a:Ae,parent:We,slots:{__:De}}=Y;q0(ke),q0(Ae),ye&&sc(ye),We&&ht(De)&&De.forEach(je=>{We.renderCache[je]=void 0}),ie.stop(),ee&&(ee.flags|=8,V(ge,Y,Q,fe)),Te&&an(Te,Q),an(()=>{Y.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&Y.asyncDep&&!Y.asyncResolved&&Y.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},de=(Y,Q,fe,ye=!1,ie=!1,ee=0)=>{for(let ge=ee;ge<Y.length;ge++)V(Y[ge],Q,fe,ye,ie)},ae=Y=>{if(Y.shapeFlag&6)return ae(Y.component.subTree);if(Y.shapeFlag&128)return Y.suspense.next();const Q=h(Y.anchor||Y.el),fe=Q&&Q[PA];return fe?h(fe):Q};let ce=!1;const te=(Y,Q,fe)=>{Y==null?Q._vnode&&V(Q._vnode,null,null,!0):v(Q._vnode||null,Y,Q,null,null,null,fe),Q._vnode=Y,ce||(ce=!0,S2(),z0(),ce=!1)},Z={p:v,um:V,m:H,r:W,mt:M,mc:_,pc:L,pbc:A,n:ae,o:t};let xe,J;return e&&([xe,J]=e(Z)),{render:te,hydrate:xe,createApp:jP(te,xe)}}function lm({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function ko({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function uT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function N1(t,e,r=!1){const n=t.children,s=e.children;if(ht(n)&&ht(s))for(let i=0;i<n.length;i++){const a=n[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=zi(s[i]),o.el=a.el),!r&&o.patchFlag!==-2&&N1(a,o)),o.type===no&&(o.el=a.el),o.type===qr&&!o.el&&(o.el=a.el)}}function YP(t){const e=t.slice(),r=[0];let n,s,i,a,o;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=r[r.length-1],t[s]<c){e[n]=s,r.push(n);continue}for(i=0,a=r.length-1;i<a;)o=i+a>>1,t[r[o]]<c?i=o+1:a=o;c<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,a=r[i-1];i-- >0;)r[i]=a,a=e[a];return r}function dT(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:dT(e)}function q0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const fT=Symbol.for("v-scx"),hT=()=>Rs(fT);function QP(t,e){return Gd(t,null,e)}function JP(t,e){return Gd(t,null,{flush:"post"})}function pT(t,e){return Gd(t,null,{flush:"sync"})}function $t(t,e,r){return Gd(t,e,r)}function Gd(t,e,r=Jt){const{immediate:n,deep:s,flush:i,once:a}=r,o=xr({},r),l=e&&n||!e&&i!=="post";let c;if(_c){if(i==="sync"){const p=hT();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Gs,p.resume=Gs,p.pause=Gs,p}}const u=ln;o.call=(p,g,v)=>Ks(p,u,g,v);let f=!1;i==="post"?o.scheduler=p=>{an(p,u&&u.suspense)}:i!=="sync"&&(f=!0,o.scheduler=(p,g)=>{g?p():b1(p)}),o.augmentJob=p=>{e&&(p.flags|=4),f&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=V3(t,e,o);return _c&&(c?c.push(h):l&&h()),h}function ZP(t,e,r){const n=this.proxy,s=Tr(t)?t.includes(".")?mT(n,t):()=>n[t]:t.bind(n,n);let i;Tt(e)?i=e:(i=e.handler,r=e);const a=Zo(this),o=Gd(s,i.bind(n),r);return a(),o}function mT(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}function eR(t,e,r=Jt){const n=Ys(),s=In(e),i=_s(e),a=gT(t,s),o=bA((l,c)=>{let u,f=Jt,h;return pT(()=>{const p=t[s];ls(u,p)&&(u=p,c())}),{get(){return l(),r.get?r.get(u):u},set(p){const g=r.set?r.set(p):p;if(!ls(g,u)&&!(f!==Jt&&ls(p,f)))return;const v=n.vnode.props;v&&(e in v||s in v||i in v)&&(`onUpdate:${e}`in v||`onUpdate:${s}`in v||`onUpdate:${i}`in v)||(u=p,c()),n.emit(`update:${e}`,g),ls(p,g)&&ls(p,f)&&!ls(g,h)&&c(),f=p,h=g}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||Jt:o,done:!1}:{done:!0}}}},o}const gT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${In(e)}Modifiers`]||t[`${_s(e)}Modifiers`];function tR(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Jt;let s=r;const i=e.startsWith("update:"),a=i&&gT(n,e.slice(7));a&&(a.trim&&(s=r.map(u=>Tr(u)?u.trim():u)),a.number&&(s=r.map($0)));let o,l=n[o=Fu(e)]||n[o=Fu(In(e))];!l&&i&&(l=n[o=Fu(_s(e))]),l&&Ks(l,t,6,s);const c=n[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Ks(c,t,6,s)}}function vT(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let a={},o=!1;if(!Tt(t)){const l=c=>{const u=vT(c,e,!0);u&&(o=!0,xr(a,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!o?(gr(t)&&n.set(t,null),null):(ht(i)?i.forEach(l=>a[l]=null):xr(a,i),gr(t)&&n.set(t,a),a)}function ap(t,e){return!t||!$d(e)?!1:(e=e.slice(2).replace(/Once$/,""),ur(t,e[0].toLowerCase()+e.slice(1))||ur(t,_s(e))||ur(t,e))}function x0(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:f,data:h,setupState:p,ctx:g,inheritAttrs:v}=t,y=gd(t);let b,E;try{if(r.shapeFlag&4){const w=s||n,R=w;b=Es(c.call(R,w,u,f,p,h,g)),E=o}else{const w=e;b=Es(w.length>1?w(f,{attrs:o,slots:a,emit:l}):w(f,null)),E=e.props?o:nR(o)}}catch(w){Uu.length=0,hl(w,t,1),b=Re(qr)}let x=b;if(E&&v!==!1){const w=Object.keys(E),{shapeFlag:R}=x;w.length&&R&7&&(i&&w.some(l1)&&(E=sR(E,i)),x=La(x,E,!1,!0))}return r.dirs&&(x=La(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&xi(x,r.transition),b=x,gd(y),b}function rR(t,e=!0){let r;for(let n=0;n<t.length;n++){const s=t[n];if(Ei(s)){if(s.type!==qr||s.children==="v-if"){if(r)return;r=s}}else return}return r}const nR=t=>{let e;for(const r in t)(r==="class"||r==="style"||$d(r))&&((e||(e={}))[r]=t[r]);return e},sR=(t,e)=>{const r={};for(const n in t)(!l1(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function aR(t,e,r){const{props:n,children:s,component:i}=t,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?O2(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(a[h]!==n[h]&&!ap(c,h))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?O2(n,a,c):!0:!!a;return!1}function O2(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!ap(r,i))return!0}return!1}function ip({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const X0=t=>t.__isSuspense;let Qg=0;const iR={name:"Suspense",__isSuspense:!0,process(t,e,r,n,s,i,a,o,l,c){if(t==null)lR(e,r,n,s,i,a,o,l,c);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}cR(t,e,r,n,s,a,o,l,c)}},hydrate:uR,normalize:dR},oR=iR;function yd(t,e){const r=t.props&&t.props[e];Tt(r)&&r()}function lR(t,e,r,n,s,i,a,o,l){const{p:c,o:{createElement:u}}=l,f=u("div"),h=t.suspense=yT(t,s,n,e,f,r,i,a,o,l);c(null,h.pendingBranch=t.ssContent,f,null,n,h,i,a),h.deps>0?(yd(t,"onPending"),yd(t,"onFallback"),c(null,t.ssFallback,e,r,n,null,i,a),oc(h,t.ssFallback)):h.resolve(!1,!0)}function cR(t,e,r,n,s,i,a,o,{p:l,um:c,o:{createElement:u}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const h=e.ssContent,p=e.ssFallback,{activeBranch:g,pendingBranch:v,isInFallback:y,isHydrating:b}=f;if(v)f.pendingBranch=h,aa(h,v)?(l(v,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0?f.resolve():y&&(b||(l(g,p,r,n,s,null,i,a,o),oc(f,p)))):(f.pendingId=Qg++,b?(f.isHydrating=!1,f.activeBranch=v):c(v,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=u("div"),y?(l(null,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0?f.resolve():(l(g,p,r,n,s,null,i,a,o),oc(f,p))):g&&aa(h,g)?(l(g,h,r,n,s,f,i,a,o),f.resolve(!0)):(l(null,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0&&f.resolve()));else if(g&&aa(h,g))l(g,h,r,n,s,f,i,a,o),oc(f,h);else if(yd(e,"onPending"),f.pendingBranch=h,h.shapeFlag&512?f.pendingId=h.component.suspenseId:f.pendingId=Qg++,l(null,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0)f.resolve();else{const{timeout:E,pendingId:x}=f;E>0?setTimeout(()=>{f.pendingId===x&&f.fallback(p)},E):E===0&&f.fallback(p)}}function yT(t,e,r,n,s,i,a,o,l,c,u=!1){const{p:f,m:h,um:p,n:g,o:{parentNode:v,remove:y}}=c;let b;const E=fR(t);E&&e&&e.pendingBranch&&(b=e.pendingId,e.deps++);const x=t.props?V0(t.props.timeout):void 0,w=i,R={vnode:t,parent:e,parentComponent:r,namespace:a,container:n,hiddenContainer:s,deps:0,pendingId:Qg++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(P=!1,S=!1){const{vnode:_,activeBranch:m,pendingBranch:A,pendingId:k,effects:I,parentComponent:C,container:M}=R;let D=!1;R.isHydrating?R.isHydrating=!1:P||(D=m&&A.transition&&A.transition.mode==="out-in",D&&(m.transition.afterLeave=()=>{k===R.pendingId&&(h(A,M,i===w?g(m):i,0),pd(I))}),m&&(v(m.el)===M&&(i=g(m)),p(m,C,R,!0)),D||h(A,M,i,0)),oc(R,A),R.pendingBranch=null,R.isInFallback=!1;let F=R.parent,N=!1;for(;F;){if(F.pendingBranch){F.effects.push(...I),N=!0;break}F=F.parent}!N&&!D&&pd(I),R.effects=[],E&&e&&e.pendingBranch&&b===e.pendingId&&(e.deps--,e.deps===0&&!S&&e.resolve()),yd(_,"onResolve")},fallback(P){if(!R.pendingBranch)return;const{vnode:S,activeBranch:_,parentComponent:m,container:A,namespace:k}=R;yd(S,"onFallback");const I=g(_),C=()=>{R.isInFallback&&(f(null,P,A,I,m,null,k,o,l),oc(R,P))},M=P.transition&&P.transition.mode==="out-in";M&&(_.transition.afterLeave=C),R.isInFallback=!0,p(_,m,null,!0),M||C()},move(P,S,_){R.activeBranch&&h(R.activeBranch,P,S,_),R.container=P},next(){return R.activeBranch&&g(R.activeBranch)},registerDep(P,S,_){const m=!!R.pendingBranch;m&&R.deps++;const A=P.vnode.el;P.asyncDep.catch(k=>{hl(k,P,0)}).then(k=>{if(P.isUnmounted||R.isUnmounted||R.pendingId!==P.suspenseId)return;P.asyncResolved=!0;const{vnode:I}=P;tv(P,k,!1),A&&(I.el=A);const C=!A&&P.subTree.el;S(P,I,v(A||P.subTree.el),A?null:g(P.subTree),R,a,_),C&&y(C),ip(P,I.el),m&&--R.deps===0&&R.resolve()})},unmount(P,S){R.isUnmounted=!0,R.activeBranch&&p(R.activeBranch,r,P,S),R.pendingBranch&&p(R.pendingBranch,r,P,S)}};return R}function uR(t,e,r,n,s,i,a,o,l){const c=e.suspense=yT(e,n,r,t.parentNode,document.createElement("div"),null,s,i,a,o,!0),u=l(t,c.pendingBranch=e.ssContent,r,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function dR(t){const{shapeFlag:e,children:r}=t,n=e&32;t.ssContent=M2(n?r.default:r),t.ssFallback=n?M2(r.fallback):Re(qr)}function M2(t){let e;if(Tt(t)){const r=Jo&&t._c;r&&(t._d=!1,B()),t=t(),r&&(t._d=!0,e=Xn,ET())}return ht(t)&&(t=rR(t)),t=Es(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(r=>r!==t)),t}function xT(t,e){e&&e.pendingBranch?ht(t)?e.effects.push(...t):e.effects.push(t):pd(t)}function oc(t,e){t.activeBranch=e;const{vnode:r,parentComponent:n}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;r.el=s,n&&n.subTree===r&&(n.vnode.el=s,ip(n,s))}function fR(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Pe=Symbol.for("v-fgt"),no=Symbol.for("v-txt"),qr=Symbol.for("v-cmt"),Go=Symbol.for("v-stc"),Uu=[];let Xn=null;function B(t=!1){Uu.push(Xn=t?null:[])}function ET(){Uu.pop(),Xn=Uu[Uu.length-1]||null}let Jo=1;function Jg(t,e=!1){Jo+=t,t<0&&Xn&&e&&(Xn.hasOnce=!0)}function _T(t){return t.dynamicChildren=Jo>0?Xn||tc:null,ET(),Jo>0&&Xn&&Xn.push(t),t}function U(t,e,r,n,s,i){return _T(d(t,e,r,n,s,i,!0))}function Qt(t,e,r,n,s){return _T(Re(t,e,r,n,s,!0))}function Ei(t){return t?t.__v_isVNode===!0:!1}function aa(t,e){return t.type===e.type&&t.key===e.key}function hR(t){}const bT=({key:t})=>t??null,E0=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Tr(t)||Cr(t)||Tt(t)?{i:cn,r:t,k:e,f:!!r}:t:null);function d(t,e=null,r=null,n=0,s=null,i=t===Pe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&bT(e),ref:e&&E0(e),scopeId:Zh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:cn};return o?(O1(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=Tr(r)?8:16),Jo>0&&!a&&Xn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Xn.push(l),l}const Re=pR;function pR(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===KA)&&(t=qr),Ei(t)){const o=La(t,e,!0);return r&&O1(o,r),Jo>0&&!i&&Xn&&(o.shapeFlag&6?Xn[Xn.indexOf(t)]=o:Xn.push(o)),o.patchFlag=-2,o}if(_R(t)&&(t=t.__vccOpts),e){e=ST(e);let{class:o,style:l}=e;o&&!Tr(o)&&(e.class=Ye(o)),gr(l)&&(Qh(l)&&!ht(l)&&(l=xr({},l)),e.style=Nr(l))}const a=Tr(t)?1:X0(t)?128:RA(t)?64:gr(t)?4:Tt(t)?2:0;return d(t,e,r,n,s,a,i,!0)}function ST(t){return t?Qh(t)||tT(t)?xr({},t):t:null}function La(t,e,r=!1,n=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=t,c=e?AT(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&bT(c),ref:e&&e.ref?r&&i?ht(i)?i.concat(E0(e)):[i,E0(e)]:E0(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&La(t.ssContent),ssFallback:t.ssFallback&&La(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&xi(u,l.clone(u)),u}function we(t=" ",e=0){return Re(no,null,t,e)}function Dn(t,e){const r=Re(Go,null,t);return r.staticCount=e,r}function ve(t="",e=!1){return e?(B(),Qt(qr,null,t)):Re(qr,null,t)}function Es(t){return t==null||typeof t=="boolean"?Re(qr):ht(t)?Re(Pe,null,t.slice()):Ei(t)?zi(t):Re(no,null,String(t))}function zi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:La(t)}function O1(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ht(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),O1(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!tT(e)?e._ctx=cn:s===3&&cn&&(cn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Tt(e)?(e={default:e,_ctx:cn},r=32):(e=String(e),n&64?(r=16,e=[we(e)]):r=8);t.children=e,t.shapeFlag|=r}function AT(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Ye([e.class,n.class]));else if(s==="style")e.style=Nr([e.style,n.style]);else if($d(s)){const i=e[s],a=n[s];a&&i!==a&&!(ht(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=n[s])}return e}function ys(t,e,r,n=null){Ks(t,e,7,[r,n])}const mR=QA();let gR=0;function TT(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||mR,i={uid:gR++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new f1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nT(n,s),emitsOptions:vT(n,s),emit:null,emitted:null,propsDefaults:Jt,inheritAttrs:n.inheritAttrs,ctx:Jt,data:Jt,props:Jt,attrs:Jt,slots:Jt,refs:Jt,setupState:Jt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=tR.bind(null,i),t.ce&&t.ce(i),i}let ln=null;const Ys=()=>ln||cn;let Y0,Zg;{const t=Wh(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Y0=e("__VUE_INSTANCE_SETTERS__",r=>ln=r),Zg=e("__VUE_SSR_SETTERS__",r=>_c=r)}const Zo=t=>{const e=ln;return Y0(t),t.scope.on(),()=>{t.scope.off(),Y0(e)}},ev=()=>{ln&&ln.scope.off(),Y0(null)};function wT(t){return t.vnode.shapeFlag&4}let _c=!1;function CT(t,e=!1,r=!1){e&&Zg(e);const{props:n,children:s}=t.vnode,i=wT(t);GP(t,n,i,e),qP(t,s,r||e);const a=i?vR(t,e):void 0;return e&&Zg(!1),a}function vR(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Kg);const{setup:n}=r;if(n){gi();const s=t.setupContext=n.length>1?IT(t):null,i=Zo(t),a=Uc(n,t,0,[t.props,s]),o=u1(a);if(vi(),i(),(o||t.sp)&&!ro(t)&&T1(t),o){if(a.then(ev,ev),e)return a.then(l=>{tv(t,l,e)}).catch(l=>{hl(l,t,0)});t.asyncDep=a}else tv(t,a,e)}else kT(t,e)}function tv(t,e,r){Tt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:gr(e)&&(t.setupState=_1(e)),kT(t,r)}let Q0,rv;function yR(t){Q0=t,rv=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,SP))}}const xR=()=>!Q0;function kT(t,e,r){const n=t.type;if(!t.render){if(!e&&Q0&&!n.render){const s=n.template||P1(t).template;if(s){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,c=xr(xr({isCustomElement:i,delimiters:o},a),l);n.render=Q0(s,c)}}t.render=n.render||Gs,rv&&rv(t)}{const s=Zo(t);gi();try{LP(t)}finally{vi(),s()}}}const ER={get(t,e){return Wn(t,"get",""),t[e]}};function IT(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,ER),slots:t.slots,emit:t.emit,expose:e}}function Wd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(_1(Jh(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Lu)return Lu[r](t)},has(e,r){return r in e||r in Lu}})):t.proxy}function nv(t,e=!0){return Tt(t)?t.displayName||t.name:t.name||e&&t.__name}function _R(t){return Tt(t)&&"__vccOpts"in t}const be=(t,e)=>L3(t,e,_c);function el(t,e,r){const n=arguments.length;return n===2?gr(e)&&!ht(e)?Ei(e)?Re(t,null,[e]):Re(t,e):Re(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Ei(r)&&(r=[r]),Re(t,e,r))}function bR(){}function SR(t,e,r,n){const s=r[n];if(s&&DT(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=n,r[n]=i}function DT(t,e){const r=t.memo;if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(ls(r[n],e[n]))return!1;return Jo>0&&Xn&&Xn.push(t),!0}const PT="3.5.17",AR=Gs,TR=z3,wR=jl,CR=DA,kR={createComponentInstance:TT,setupComponent:CT,renderComponentRoot:x0,setCurrentRenderingInstance:gd,isVNode:Ei,normalizeVNode:Es,getComponentPublicInstance:Wd,ensureValidVNode:D1,pushWarningContext:H3,popWarningContext:j3},IR=kR,DR=null,PR=null,RR=null;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sv;const L2=typeof window<"u"&&window.trustedTypes;if(L2)try{sv=L2.createPolicy("vue",{createHTML:t=>t})}catch{}const RT=sv?t=>sv.createHTML(t):t=>t,FR="http://www.w3.org/2000/svg",NR="http://www.w3.org/1998/Math/MathML",Ja=typeof document<"u"?document:null,B2=Ja&&Ja.createElement("template"),OR={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?Ja.createElementNS(FR,t):e==="mathml"?Ja.createElementNS(NR,t):r?Ja.createElement(t,{is:r}):Ja.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>Ja.createTextNode(t),createComment:t=>Ja.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ja.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const a=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{B2.innerHTML=RT(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=B2.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Mi="transition",iu="animation",bc=Symbol("_vtc"),FT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},NT=xr({},A1,FT),MR=t=>(t.displayName="Transition",t.props=NT,t),LR=MR((t,{slots:e})=>el(LA,OT(t),e)),Io=(t,e=[])=>{ht(t)?t.forEach(r=>r(...e)):t&&t(...e)},U2=t=>t?ht(t)?t.some(e=>e.length>1):t.length>1:!1;function OT(t){const e={};for(const I in t)I in FT||(e[I]=t[I]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=i,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,g=BR(s),v=g&&g[0],y=g&&g[1],{onBeforeEnter:b,onEnter:E,onEnterCancelled:x,onLeave:w,onLeaveCancelled:R,onBeforeAppear:P=b,onAppear:S=E,onAppearCancelled:_=x}=e,m=(I,C,M,D)=>{I._enterCancelled=D,$i(I,C?u:o),$i(I,C?c:a),M&&M()},A=(I,C)=>{I._isLeaving=!1,$i(I,f),$i(I,p),$i(I,h),C&&C()},k=I=>(C,M)=>{const D=I?S:E,F=()=>m(C,I,M);Io(D,[C,F]),$2(()=>{$i(C,I?l:i),wa(C,I?u:o),U2(D)||V2(C,n,v,F)})};return xr(e,{onBeforeEnter(I){Io(b,[I]),wa(I,i),wa(I,a)},onBeforeAppear(I){Io(P,[I]),wa(I,l),wa(I,c)},onEnter:k(!1),onAppear:k(!0),onLeave(I,C){I._isLeaving=!0;const M=()=>A(I,C);wa(I,f),I._enterCancelled?(wa(I,h),av()):(av(),wa(I,h)),$2(()=>{I._isLeaving&&($i(I,f),wa(I,p),U2(w)||V2(I,n,y,M))}),Io(w,[I,M])},onEnterCancelled(I){m(I,!1,void 0,!0),Io(x,[I])},onAppearCancelled(I){m(I,!0,void 0,!0),Io(_,[I])},onLeaveCancelled(I){A(I),Io(R,[I])}})}function BR(t){if(t==null)return null;if(gr(t))return[cm(t.enter),cm(t.leave)];{const e=cm(t);return[e,e]}}function cm(t){return V0(t)}function wa(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[bc]||(t[bc]=new Set)).add(e)}function $i(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[bc];r&&(r.delete(e),r.size||(t[bc]=void 0))}function $2(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let UR=0;function V2(t,e,r,n){const s=t._endId=++UR,i=()=>{s===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:a,timeout:o,propCount:l}=MT(t,e);if(!a)return n();const c=a+"end";let u=0;const f=()=>{t.removeEventListener(c,h),i()},h=p=>{p.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},o+1),t.addEventListener(c,h)}function MT(t,e){const r=window.getComputedStyle(t),n=g=>(r[g]||"").split(", "),s=n(`${Mi}Delay`),i=n(`${Mi}Duration`),a=H2(s,i),o=n(`${iu}Delay`),l=n(`${iu}Duration`),c=H2(o,l);let u=null,f=0,h=0;e===Mi?a>0&&(u=Mi,f=a,h=i.length):e===iu?c>0&&(u=iu,f=c,h=l.length):(f=Math.max(a,c),u=f>0?a>c?Mi:iu:null,h=u?u===Mi?i.length:l.length:0);const p=u===Mi&&/\b(transform|all)(,|$)/.test(n(`${Mi}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:p}}function H2(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>j2(r)+j2(t[n])))}function j2(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function av(){return document.body.offsetHeight}function $R(t,e,r){const n=t[bc];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const J0=Symbol("_vod"),LT=Symbol("_vsh"),BT={beforeMount(t,{value:e},{transition:r}){t[J0]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):ou(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),ou(t,!0),n.enter(t)):n.leave(t,()=>{ou(t,!1)}):ou(t,e))},beforeUnmount(t,{value:e}){ou(t,e)}};function ou(t,e){t.style.display=e?t[J0]:"none",t[LT]=!e}function VR(){BT.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const UT=Symbol("");function HR(t){const e=Ys();if(!e)return;const r=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>Z0(i,s))},n=()=>{const s=t(e.proxy);e.ce?Z0(e.ce,s):iv(e.subTree,s),r(s)};w1(()=>{pd(n)}),Gt(()=>{$t(n,Gs,{flush:"post"});const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),Ha(()=>s.disconnect())})}function iv(t,e){if(t.shapeFlag&128){const r=t.suspense;t=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{iv(r.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Z0(t.el,e);else if(t.type===Pe)t.children.forEach(r=>iv(r,e));else if(t.type===Go){let{el:r,anchor:n}=t;for(;r&&(Z0(r,e),r!==n);)r=r.nextSibling}}function Z0(t,e){if(t.nodeType===1){const r=t.style;let n="";for(const s in e)r.setProperty(`--${s}`,e[s]),n+=`--${s}: ${e[s]};`;r[UT]=n}}const jR=/(^|;)\s*display\s*:/;function GR(t,e,r){const n=t.style,s=Tr(r);let i=!1;if(r&&!s){if(e)if(Tr(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&_0(n,o,"")}else for(const a in e)r[a]==null&&_0(n,a,"");for(const a in r)a==="display"&&(i=!0),_0(n,a,r[a])}else if(s){if(e!==r){const a=n[UT];a&&(r+=";"+a),n.cssText=r,i=jR.test(r)}}else e&&t.removeAttribute("style");J0 in t&&(t[J0]=i?n.display:"",t[LT]&&(n.display="none"))}const G2=/\s*!important$/;function _0(t,e,r){if(ht(r))r.forEach(n=>_0(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=WR(t,e);G2.test(r)?t.setProperty(_s(n),r.replace(G2,""),"important"):t[n]=r}}const W2=["Webkit","Moz","ms"],um={};function WR(t,e){const r=um[e];if(r)return r;let n=In(e);if(n!=="filter"&&n in t)return um[e]=n;n=Vd(n);for(let s=0;s<W2.length;s++){const i=W2[s]+n;if(i in t)return um[e]=i}return e}const z2="http://www.w3.org/1999/xlink";function K2(t,e,r,n,s,i=s3(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(z2,e.slice(6,e.length)):t.setAttributeNS(z2,e,r):r==null||i&&!rA(r)?t.removeAttribute(e):t.setAttribute(e,i?"":pa(r)?String(r):r)}function q2(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?RT(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=rA(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(s||e)}function ti(t,e,r,n){t.addEventListener(e,r,n)}function zR(t,e,r,n){t.removeEventListener(e,r,n)}const X2=Symbol("_vei");function KR(t,e,r,n,s=null){const i=t[X2]||(t[X2]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=qR(e);if(n){const c=i[e]=QR(n,s);ti(t,o,c,l)}else a&&(zR(t,o,a,l),i[e]=void 0)}}const Y2=/(?:Once|Passive|Capture)$/;function qR(t){let e;if(Y2.test(t)){e={};let n;for(;n=t.match(Y2);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):_s(t.slice(2)),e]}let dm=0;const XR=Promise.resolve(),YR=()=>dm||(XR.then(()=>dm=0),dm=Date.now());function QR(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Ks(JR(n,r.value),e,5,[n])};return r.value=t,r.attached=YR(),r}function JR(t,e){if(ht(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Q2=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ZR=(t,e,r,n,s,i)=>{const a=s==="svg";e==="class"?$R(t,n,a):e==="style"?GR(t,r,n):$d(e)?l1(e)||KR(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):e8(t,e,n,a))?(q2(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&K2(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Tr(n))?q2(t,In(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),K2(t,e,n,a))};function e8(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Q2(e)&&Tt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Q2(e)&&Tr(r)?!1:e in t}const J2={};/*! #__NO_SIDE_EFFECTS__ */function $T(t,e,r){const n=Hd(t,e);jh(n)&&xr(n,e);class s extends op{constructor(a){super(n,a,r)}}return s.def=n,s}/*! #__NO_SIDE_EFFECTS__ */const t8=(t,e)=>$T(t,e,QT),r8=typeof HTMLElement<"u"?HTMLElement:class{};class op extends r8{constructor(e,r={},n=th){super(),this._def=e,this._props=r,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==th?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof op){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,pl(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:a}=n;let o;if(i&&!ht(i))for(const l in i){const c=i[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=V0(this._props[l])),(o||(o=Object.create(null)))[In(l)]=!0)}this._numberProps=o,this._resolveProps(n),this.shadowRoot&&this._applyStyles(a),this._mount(n)},r=this._def.__asyncLoader;r?this._pendingResolve=r().then(n=>{n.configureApp=this._def.configureApp,e(this._def=n,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const r=this._instance&&this._instance.exposed;if(r)for(const n in r)ur(this,n)||Object.defineProperty(this,n,{get:()=>K(r[n])})}_resolveProps(e){const{props:r}=e,n=ht(r)?r:Object.keys(r||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s]);for(const s of n.map(In))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const r=this.hasAttribute(e);let n=r?this.getAttribute(e):J2;const s=In(e);r&&this._numberProps&&this._numberProps[s]&&(n=V0(n)),this._setProp(s,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,r,n=!0,s=!1){if(r!==this._props[e]&&(r===J2?delete this._props[e]:(this._props[e]=r,e==="key"&&this._app&&(this._app._ceVNode.key=r)),s&&this._instance&&this._update(),n)){const i=this._ob;i&&i.disconnect(),r===!0?this.setAttribute(_s(e),""):typeof r=="string"||typeof r=="number"?this.setAttribute(_s(e),r+""):r||this.removeAttribute(_s(e)),i&&i.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),YT(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const r=Re(this._def,xr(e,this._props));return this._instance||(r.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const s=(i,a)=>{this.dispatchEvent(new CustomEvent(i,jh(a[0])?xr({detail:a},a[0]):{detail:a}))};n.emit=(i,...a)=>{s(i,a),_s(i)!==i&&s(_s(i),a)},this._setParent()}),r}_applyStyles(e,r){if(!e)return;if(r){if(r===this._def||this._styleChildren.has(r))return;this._styleChildren.add(r)}const n=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");n&&i.setAttribute("nonce",n),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let r;for(;r=this.firstChild;){const n=r.nodeType===1&&r.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(r),this.removeChild(r)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),r=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const s=e[n],i=s.getAttribute("name")||"default",a=this._slots[i],o=s.parentNode;if(a)for(const l of a){if(r&&l.nodeType===1){const c=r+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let f;for(;f=u.nextNode();)f.setAttribute(c,"")}o.insertBefore(l,s)}else for(;s.firstChild;)o.insertBefore(s.firstChild,s);o.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function VT(t){const e=Ys(),r=e&&e.ce;return r||null}function n8(){const t=VT();return t&&t.shadowRoot}function s8(t="$style"){{const e=Ys();if(!e)return Jt;const r=e.type.__cssModules;if(!r)return Jt;const n=r[t];return n||Jt}}const HT=new WeakMap,jT=new WeakMap,eh=Symbol("_moveCb"),Z2=Symbol("_enterCb"),a8=t=>(delete t.props.mode,t),i8=a8({name:"TransitionGroup",props:xr({},NT,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=Ys(),n=S1();let s,i;return np(()=>{if(!s.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!d8(s[0].el,r.vnode.el,a)){s=[];return}s.forEach(l8),s.forEach(c8);const o=s.filter(u8);av(),o.forEach(l=>{const c=l.el,u=c.style;wa(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[eh]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",f),c[eh]=null,$i(c,a))};c.addEventListener("transitionend",f)}),s=[]}),()=>{const a=Xt(t),o=OT(a);let l=a.tag||Pe;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),xi(u,Ec(u,o,n,r)),HT.set(u,u.el.getBoundingClientRect()))}i=e.default?tp(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&xi(u,Ec(u,o,n,r))}return Re(l,null,i)}}}),o8=i8;function l8(t){const e=t.el;e[eh]&&e[eh](),e[Z2]&&e[Z2]()}function c8(t){jT.set(t,t.el.getBoundingClientRect())}function u8(t){const e=HT.get(t),r=jT.get(t),n=e.left-r.left,s=e.top-r.top;if(n||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${s}px)`,i.transitionDuration="0s",t}}function d8(t,e,r){const n=t.cloneNode(),s=t[bc];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(n);const{hasTransform:a}=MT(n);return i.removeChild(n),a}const lo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ht(e)?r=>sc(e,r):e};function f8(t){t.target.composing=!0}function eE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ws=Symbol("_assign"),ft={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[Ws]=lo(s);const i=n||s.props&&s.props.type==="number";ti(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;r&&(o=o.trim()),i&&(o=$0(o)),t[Ws](o)}),r&&ti(t,"change",()=>{t.value=t.value.trim()}),e||(ti(t,"compositionstart",f8),ti(t,"compositionend",eE),ti(t,"change",eE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:i}},a){if(t[Ws]=lo(a),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?$0(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===l)||(t.value=l))}},yt={deep:!0,created(t,e,r){t[Ws]=lo(r),ti(t,"change",()=>{const n=t._modelValue,s=Sc(t),i=t.checked,a=t[Ws];if(ht(n)){const o=zh(n,s),l=o!==-1;if(i&&!l)a(n.concat(s));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(fl(n)){const o=new Set(n);i?o.add(s):o.delete(s),a(o)}else a(GT(t,i))})},mounted:tE,beforeUpdate(t,e,r){t[Ws]=lo(r),tE(t,e,r)}};function tE(t,{value:e,oldValue:r},n){t._modelValue=e;let s;if(ht(e))s=zh(e,n.props.value)>-1;else if(fl(e))s=e.has(n.props.value);else{if(e===r)return;s=oo(e,GT(t,!0))}t.checked!==s&&(t.checked=s)}const ma={created(t,{value:e},r){t.checked=oo(e,r.props.value),t[Ws]=lo(r),ti(t,"change",()=>{t[Ws](Sc(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[Ws]=lo(n),e!==r&&(t.checked=oo(e,n.props.value))}},cr={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=fl(e);ti(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>r?$0(Sc(a)):Sc(a));t[Ws](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,pl(()=>{t._assigning=!1})}),t[Ws]=lo(n)},mounted(t,{value:e}){rE(t,e)},beforeUpdate(t,e,r){t[Ws]=lo(r)},updated(t,{value:e}){t._assigning||rE(t,e)}};function rE(t,e){const r=t.multiple,n=ht(e);if(!(r&&!n&&!fl(e))){for(let s=0,i=t.options.length;s<i;s++){const a=t.options[s],o=Sc(a);if(r)if(n){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(c=>String(c)===String(o)):a.selected=zh(e,o)>-1}else a.selected=e.has(o);else if(oo(Sc(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Sc(t){return"_value"in t?t._value:t.value}function GT(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const WT={created(t,e,r){Uf(t,e,r,null,"created")},mounted(t,e,r){Uf(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){Uf(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){Uf(t,e,r,n,"updated")}};function zT(t,e){switch(t){case"SELECT":return cr;case"TEXTAREA":return ft;default:switch(e){case"checkbox":return yt;case"radio":return ma;default:return ft}}}function Uf(t,e,r,n,s){const a=zT(t.tagName,r.props&&r.props.type)[s];a&&a(t,e,r,n)}function h8(){ft.getSSRProps=({value:t})=>({value:t}),ma.getSSRProps=({value:t},e)=>{if(e.props&&oo(e.props.value,t))return{checked:!0}},yt.getSSRProps=({value:t},e)=>{if(ht(t)){if(e.props&&zh(t,e.props.value)>-1)return{checked:!0}}else if(fl(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},WT.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const r=zT(e.type.toUpperCase(),e.props&&e.props.type);if(r.getSSRProps)return r.getSSRProps(t,e)}}const p8=["ctrl","shift","alt","meta"],m8={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>p8.some(r=>t[`${r}Key`]&&!e.includes(r))},Xr=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...i)=>{for(let a=0;a<e.length;a++){const o=m8[e[a]];if(o&&o(s,e))return}return t(s,...i)})},g8={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},M1=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=s=>{if(!("key"in s))return;const i=_s(s.key);if(e.some(a=>a===i||g8[a]===i))return t(s)})},KT=xr({patchProp:ZR},OR);let $u,nE=!1;function qT(){return $u||($u=oT(KT))}function XT(){return $u=nE?$u:lT(KT),nE=!0,$u}const YT=(...t)=>{qT().render(...t)},v8=(...t)=>{XT().hydrate(...t)},th=(...t)=>{const e=qT().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=ZT(n);if(!s)return;const i=e._component;!Tt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=r(s,!1,JT(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e},QT=(...t)=>{const e=XT().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=ZT(n);if(s)return r(s,!0,JT(s))},e};function JT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ZT(t){return Tr(t)?document.querySelector(t):t}let sE=!1;const y8=()=>{sE||(sE=!0,h8(),VR())};/**
* vue v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const x8=()=>{},E8=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:LA,BaseTransitionPropsValidators:A1,Comment:qr,DeprecationTypes:RR,EffectScope:f1,ErrorCodes:W3,ErrorTypeStrings:TR,Fragment:Pe,KeepAlive:vP,ReactiveEffect:dd,Static:Go,Suspense:oR,Teleport:Z3,Text:no,TrackOpTypes:B3,Transition:LR,TransitionGroup:o8,TriggerOpTypes:U3,VueElement:op,assertNumber:G3,callWithAsyncErrorHandling:Ks,callWithErrorHandling:Uc,camelize:In,capitalize:Vd,cloneVNode:La,compatUtils:PR,compile:x8,computed:be,createApp:th,createBlock:Qt,createCommentVNode:ve,createElementBlock:U,createElementVNode:d,createHydrationRenderer:lT,createPropsRestProxy:OP,createRenderer:oT,createSSRApp:QT,createSlots:_P,createStaticVNode:Dn,createTextVNode:we,createVNode:Re,customRef:bA,defineAsyncComponent:mP,defineComponent:Hd,defineCustomElement:$T,defineEmits:TP,defineExpose:wP,defineModel:IP,defineOptions:CP,defineProps:AP,defineSSRCustomElement:t8,defineSlots:kP,devtools:wR,effect:o3,effectScope:h1,getCurrentInstance:Ys,getCurrentScope:p1,getCurrentWatcher:$3,getTransitionRawChildren:tp,guardReactiveProps:ST,h:el,handleError:hl,hasInjectionContext:JA,hydrate:v8,hydrateOnIdle:cP,hydrateOnInteraction:hP,hydrateOnMediaQuery:fP,hydrateOnVisible:dP,initCustomFormatter:bR,initDirectivesForSSR:y8,inject:Rs,isMemoSame:DT,isProxy:Qh,isReactive:Ra,isReadonly:yi,isRef:Cr,isRuntimeOnly:xR,isShallow:Ps,isVNode:Ei,markRaw:Jh,mergeDefaults:FP,mergeModels:NP,mergeProps:AT,nextTick:pl,normalizeClass:Ye,normalizeProps:r3,normalizeStyle:Nr,onActivated:UA,onBeforeMount:HA,onBeforeUnmount:sp,onBeforeUpdate:w1,onDeactivated:$A,onErrorCaptured:zA,onMounted:Gt,onRenderTracked:WA,onRenderTriggered:GA,onScopeDispose:aA,onServerPrefetch:jA,onUnmounted:Ha,onUpdated:np,onWatcherCleanup:TA,openBlock:B,popScopeId:Y3,provide:Bu,proxyRefs:_1,pushScopeId:X3,queuePostFlushCb:pd,reactive:Ns,readonly:x1,ref:se,registerRuntimeCompiler:yR,render:YT,renderList:He,renderSlot:qA,resolveComponent:_r,resolveDirective:EP,resolveDynamicComponent:k1,resolveFilter:DR,resolveTransitionHooks:Ec,setBlockTracking:Jg,setDevtoolsHook:CR,setTransitionHooks:xi,shallowReactive:y1,shallowReadonly:C3,shallowRef:E1,ssrContextKey:fT,ssrUtils:IR,stop:l3,toDisplayString:X,toHandlerKey:Fu,toHandlers:bP,toRaw:Xt,toRef:O3,toRefs:SA,toValue:D3,transformVNodeArgs:hR,triggerRef:I3,unref:K,useAttrs:RP,useCssModule:s8,useCssVars:HR,useHost:VT,useId:tP,useModel:eR,useSSRContext:hT,useShadowRoot:n8,useSlots:PP,useTemplateRef:rP,useTransitionState:S1,vModelCheckbox:yt,vModelDynamic:WT,vModelRadio:ma,vModelSelect:cr,vModelText:ft,vShow:BT,version:PT,warn:AR,watch:$t,watchEffect:QP,watchPostEffect:JP,watchSyncEffect:pT,withAsyncContext:MP,withCtx:ep,withDefaults:DP,withDirectives:Oe,withKeys:M1,withMemo:SR,withModifiers:Xr,withScopeId:Q3},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ew;const lp=t=>ew=t,tw=Symbol();function ov(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Vu;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Vu||(Vu={}));function _8(){const t=h1(!0),e=t.run(()=>se({}));let r=[],n=[];const s=Jh({install(i){lp(s),s._a=i,i.provide(tw,s),i.config.globalProperties.$pinia=s,n.forEach(a=>r.push(a)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const rw=()=>{};function aE(t,e,r,n=rw){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&p1()&&aA(s),s}function Ol(t,...e){t.slice().forEach(r=>{r(...e)})}const b8=t=>t(),iE=Symbol(),fm=Symbol();function lv(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];ov(s)&&ov(n)&&t.hasOwnProperty(r)&&!Cr(n)&&!Ra(n)?t[r]=lv(s,n):t[r]=n}return t}const S8=Symbol();function A8(t){return!ov(t)||!t.hasOwnProperty(S8)}const{assign:Vi}=Object;function T8(t){return!!(Cr(t)&&t.effect)}function w8(t,e,r,n){const{state:s,actions:i,getters:a}=e,o=r.state.value[t];let l;function c(){o||(r.state.value[t]=s?s():{});const u=SA(r.state.value[t]);return Vi(u,i,Object.keys(a||{}).reduce((f,h)=>(f[h]=Jh(be(()=>{lp(r);const p=r._s.get(t);return a[h].call(p,p)})),f),{}))}return l=nw(t,c,e,r,n,!0),l}function nw(t,e,r={},n,s,i){let a;const o=Vi({actions:{}},r),l={deep:!0};let c,u,f=[],h=[],p;const g=n.state.value[t];!i&&!g&&(n.state.value[t]={}),se({});let v;function y(_){let m;c=u=!1,typeof _=="function"?(_(n.state.value[t]),m={type:Vu.patchFunction,storeId:t,events:p}):(lv(n.state.value[t],_),m={type:Vu.patchObject,payload:_,storeId:t,events:p});const A=v=Symbol();pl().then(()=>{v===A&&(c=!0)}),u=!0,Ol(f,m,n.state.value[t])}const b=i?function(){const{state:m}=r,A=m?m():{};this.$patch(k=>{Vi(k,A)})}:rw;function E(){a.stop(),f=[],h=[],n._s.delete(t)}const x=(_,m="")=>{if(iE in _)return _[fm]=m,_;const A=function(){lp(n);const k=Array.from(arguments),I=[],C=[];function M(N){I.push(N)}function D(N){C.push(N)}Ol(h,{args:k,name:A[fm],store:R,after:M,onError:D});let F;try{F=_.apply(this&&this.$id===t?this:R,k)}catch(N){throw Ol(C,N),N}return F instanceof Promise?F.then(N=>(Ol(I,N),N)).catch(N=>(Ol(C,N),Promise.reject(N))):(Ol(I,F),F)};return A[iE]=!0,A[fm]=m,A},w={_p:n,$id:t,$onAction:aE.bind(null,h),$patch:y,$reset:b,$subscribe(_,m={}){const A=aE(f,_,m.detached,()=>k()),k=a.run(()=>$t(()=>n.state.value[t],I=>{(m.flush==="sync"?u:c)&&_({storeId:t,type:Vu.direct,events:p},I)},Vi({},l,m)));return A},$dispose:E},R=Ns(w);n._s.set(t,R);const S=(n._a&&n._a.runWithContext||b8)(()=>n._e.run(()=>(a=h1()).run(()=>e({action:x}))));for(const _ in S){const m=S[_];if(Cr(m)&&!T8(m)||Ra(m))i||(g&&A8(m)&&(Cr(m)?m.value=g[_]:lv(m,g[_])),n.state.value[t][_]=m);else if(typeof m=="function"){const A=x(m,_);S[_]=A,o.actions[_]=m}}return Vi(R,S),Vi(Xt(R),S),Object.defineProperty(R,"$state",{get:()=>n.state.value[t],set:_=>{y(m=>{Vi(m,_)})}}),n._p.forEach(_=>{Vi(R,a.run(()=>_({store:R,app:n._a,pinia:n,options:o})))}),g&&i&&r.hydrate&&r.hydrate(R.$state,g),c=!0,u=!0,R}/*! #__NO_SIDE_EFFECTS__ */function sw(t,e,r){let n,s;const i=typeof e=="function";typeof t=="string"?(n=t,s=i?r:e):(s=t,n=t.id);function a(o,l){const c=JA();return o=o||(c?Rs(tw,null):null),o&&lp(o),o=ew,o._s.has(n)||(i?nw(n,e,s,o):w8(n,s,o)),o._s.get(n)}return a.$id=n,a}var oE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},C8=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},iw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,f=(i&3)<<4|o>>4;let h=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(h=64)),n.push(r[u],r[f],r[h],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||f==null)throw new k8;const h=i<<2|o>>4;if(n.push(h),c!==64){const p=o<<4&240|c>>2;if(n.push(p),f!==64){const g=c<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I8=function(t){const e=aw(t);return iw.encodeByteArray(e,!0)},rh=function(t){return I8(t).replace(/\./g,"")},ow=function(t){try{return iw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=()=>D8().__FIREBASE_DEFAULTS__,R8=()=>{if(typeof process>"u"||typeof oE>"u")return;const t=oE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},F8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ow(t[1]);return e&&JSON.parse(e)},cp=()=>{try{return P8()||R8()||F8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lw=t=>{var e,r;return(r=(e=cp())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},L1=t=>{const e=lw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},cw=()=>{var t;return(t=cp())===null||t===void 0?void 0:t.config},uw=t=>{var e;return(e=cp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rh(JSON.stringify(r)),rh(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(es())}function M8(){var t;const e=(t=cp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function U8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $8(){const t=es();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function V8(){return!M8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H8(){try{return typeof indexedDB=="object"}catch{return!1}}function j8(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8="FirebaseError";class xa extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=G8,Object.setPrototypeOf(this,xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zd.prototype.create)}}class zd{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?W8(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new xa(s,o,n)}}function W8(t,e){return t.replace(z8,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const z8=/\{\$([^}]+)}/g;function K8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(lE(i)&&lE(a)){if(!nh(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function lE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function q8(t,e){const r=new X8(t,e);return r.subscribe.bind(r)}class X8{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Y8(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=hm),s.error===void 0&&(s.error=hm),s.complete===void 0&&(s.complete=hm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y8(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function hm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t){return t&&t._delegate?t._delegate:t}class _i{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new N8;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z8(e))try{this.getOrInitializeService({instanceIdentifier:Oo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oo){return this.instances.has(e)}getOptions(e=Oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:J8(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Oo){return this.component?this.component.multipleInstances?e:Oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J8(t){return t===Oo?void 0:t}function Z8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Q8(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Yt||(Yt={}));const tF={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},rF=Yt.INFO,nF={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},sF=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=nF[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class B1{constructor(e){this.name=e,this._logLevel=rF,this._logHandler=sF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}const aF=(t,e)=>e.some(r=>t instanceof r);let cE,uE;function iF(){return cE||(cE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oF(){return uE||(uE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fw=new WeakMap,cv=new WeakMap,hw=new WeakMap,pm=new WeakMap,U1=new WeakMap;function lF(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(so(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&fw.set(r,t)}).catch(()=>{}),U1.set(e,t),e}function cF(t){if(cv.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});cv.set(t,e)}let uv={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return cv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hw.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return so(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uF(t){uv=t(uv)}function dF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(mm(this),e,...r);return hw.set(n,e.sort?e.sort():[e]),so(n)}:oF().includes(t)?function(...e){return t.apply(mm(this),e),so(fw.get(this))}:function(...e){return so(t.apply(mm(this),e))}}function fF(t){return typeof t=="function"?dF(t):(t instanceof IDBTransaction&&cF(t),aF(t,iF())?new Proxy(t,uv):t)}function so(t){if(t instanceof IDBRequest)return lF(t);if(pm.has(t))return pm.get(t);const e=fF(t);return e!==t&&(pm.set(t,e),U1.set(e,t)),e}const mm=t=>U1.get(t);function hF(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=so(a);return n&&a.addEventListener("upgradeneeded",l=>{n(so(a.result),l.oldVersion,l.newVersion,so(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const pF=["get","getKey","getAll","getAllKeys","count"],mF=["put","add","delete","clear"],gm=new Map;function dE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gm.get(e))return gm.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=mF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||pF.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return gm.set(e,i),i}uF(t=>({...t,get:(e,r,n)=>dE(e,r)||t.get(e,r,n),has:(e,r)=>!!dE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(vF(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function vF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dv="@firebase/app",fE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new B1("@firebase/app"),yF="@firebase/app-compat",xF="@firebase/analytics-compat",EF="@firebase/analytics",_F="@firebase/app-check-compat",bF="@firebase/app-check",SF="@firebase/auth",AF="@firebase/auth-compat",TF="@firebase/database",wF="@firebase/data-connect",CF="@firebase/database-compat",kF="@firebase/functions",IF="@firebase/functions-compat",DF="@firebase/installations",PF="@firebase/installations-compat",RF="@firebase/messaging",FF="@firebase/messaging-compat",NF="@firebase/performance",OF="@firebase/performance-compat",MF="@firebase/remote-config",LF="@firebase/remote-config-compat",BF="@firebase/storage",UF="@firebase/storage-compat",$F="@firebase/firestore",VF="@firebase/vertexai-preview",HF="@firebase/firestore-compat",jF="firebase",GF="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="[DEFAULT]",WF={[dv]:"fire-core",[yF]:"fire-core-compat",[EF]:"fire-analytics",[xF]:"fire-analytics-compat",[bF]:"fire-app-check",[_F]:"fire-app-check-compat",[SF]:"fire-auth",[AF]:"fire-auth-compat",[TF]:"fire-rtdb",[wF]:"fire-data-connect",[CF]:"fire-rtdb-compat",[kF]:"fire-fn",[IF]:"fire-fn-compat",[DF]:"fire-iid",[PF]:"fire-iid-compat",[RF]:"fire-fcm",[FF]:"fire-fcm-compat",[NF]:"fire-perf",[OF]:"fire-perf-compat",[MF]:"fire-rc",[LF]:"fire-rc-compat",[BF]:"fire-gcs",[UF]:"fire-gcs-compat",[$F]:"fire-fst",[HF]:"fire-fst-compat",[VF]:"fire-vertex","fire-js":"fire-js",[jF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Map,zF=new Map,hv=new Map;function hE(t,e){try{t.container.addComponent(e)}catch(r){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function co(t){const e=t.name;if(hv.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;hv.set(e,t);for(const r of sh.values())hE(r,t);for(const r of zF.values())hE(r,t);return!0}function qd(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ii(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new zd("app","Firebase",KF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new _i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=GF;function pw(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:fv,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw ao.create("bad-app-name",{appName:String(s)});if(r||(r=cw()),!r)throw ao.create("no-options");const i=sh.get(s);if(i){if(nh(r,i.options)&&nh(n,i.config))return i;throw ao.create("duplicate-app",{appName:s})}const a=new eF(s);for(const l of hv.values())a.addComponent(l);const o=new qF(r,n,a);return sh.set(s,o),o}function Xd(t=fv){const e=sh.get(t);if(!e&&t===fv&&cw())return pw();if(!e)throw ao.create("no-app",{appName:t});return e}function zs(t,e,r){var n;let s=(n=WF[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(o.join(" "));return}co(new _i(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF="firebase-heartbeat-database",YF=1,xd="firebase-heartbeat-store";let vm=null;function mw(){return vm||(vm=hF(XF,YF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xd)}catch(r){console.warn(r)}}}}).catch(t=>{throw ao.create("idb-open",{originalErrorMessage:t.message})})),vm}async function QF(t){try{const r=(await mw()).transaction(xd),n=await r.objectStore(xd).get(gw(t));return await r.done,n}catch(e){if(e instanceof xa)bi.warn(e.message);else{const r=ao.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(r.message)}}}async function pE(t,e){try{const n=(await mw()).transaction(xd,"readwrite");await n.objectStore(xd).put(e,gw(t)),await n.done}catch(r){if(r instanceof xa)bi.warn(r.message);else{const n=ao.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});bi.warn(n.message)}}}function gw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=1024,ZF=30*24*60*60*1e3;class e6{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new r6(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=ZF}),this._storage.overwrite(this._heartbeatsCache))}catch(n){bi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=mE(),{heartbeatsToSend:n,unsentEntries:s}=t6(this._heartbeatsCache.heartbeats),i=rh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return bi.warn(r),""}}}function mE(){return new Date().toISOString().substring(0,10)}function t6(t,e=JF){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),gE(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),gE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class r6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return H8()?j8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await QF(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return pE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return pE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function gE(t){return rh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(t){co(new _i("platform-logger",e=>new gF(e),"PRIVATE")),co(new _i("heartbeat",e=>new e6(e),"PRIVATE")),zs(dv,fE,t),zs(dv,fE,"esm2017"),zs("fire-js","")}n6("");function $1(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yw=vw,xw=new zd("auth","Firebase",vw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new B1("@firebase/auth");function s6(t,...e){ah.logLevel<=Yt.WARN&&ah.warn(`Auth (${ml}): ${t}`,...e)}function b0(t,...e){ah.logLevel<=Yt.ERROR&&ah.error(`Auth (${ml}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t,...e){throw H1(t,...e)}function fa(t,...e){return H1(t,...e)}function V1(t,e,r){const n=Object.assign(Object.assign({},yw()),{[e]:r});return new zd("auth","Firebase",n).create(e,{appName:t.name})}function Wo(t){return V1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function a6(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ba(t,"argument-error"),V1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function H1(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return xw.create(t,...e)}function Dt(t,e,...r){if(!t)throw H1(e,...r)}function oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw b0(e),new Error(e)}function Si(t,e){t||oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function i6(){return vE()==="http:"||vE()==="https:"}function vE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i6()||B8()||"connection"in navigator)?navigator.onLine:!0}function l6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,r){this.shortDelay=e,this.longDelay=r,Si(r>e,"Short delay should be less than long delay!"),this.isMobile=O8()||U8()}get(){return o6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e){Si(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=new Yd(3e4,6e4);function G1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $c(t,e,r,n,s={}){return _w(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Kd(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return L8()||(c.referrerPolicy="no-referrer"),Ew.fetch()(bw(t,t.config.apiHost,r,o),c)})}async function _w(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},c6),e);try{const s=new f6(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw $f(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $f(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw $f(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw $f(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw V1(t,u,c);Ba(t,u)}}catch(s){if(s instanceof xa)throw s;Ba(t,"network-request-failed",{message:String(s)})}}async function d6(t,e,r,n,s={}){const i=await $c(t,e,r,n,s);return"mfaPendingCredential"in i&&Ba(t,"multi-factor-auth-required",{_serverResponse:i}),i}function bw(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?j1(t.config,s):`${t.config.apiScheme}://${s}`}class f6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(fa(this.auth,"network-request-failed")),u6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $f(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=fa(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(t,e){return $c(t,"POST","/v1/accounts:delete",e)}async function Sw(t,e){return $c(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t,e=!1){return dr(t).getIdToken(e)}async function Aw(t,e=!1){const r=dr(t),n=await r.getIdToken(e),s=W1(n);Dt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Hu(ym(s.auth_time)),issuedAtTime:Hu(ym(s.iat)),expirationTime:Hu(ym(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ym(t){return Number(t)*1e3}function W1(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return b0("JWT malformed, contained fewer than 3 sections"),null;try{const s=ow(r);return s?JSON.parse(s):(b0("Failed to decode base64 JWT payload"),null)}catch(s){return b0("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function yE(t){const e=W1(t);return Dt(e,"internal-error"),Dt(typeof e.exp<"u","internal-error"),Dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof xa&&p6(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function p6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hu(this.lastLoginAt),this.creationTime=Hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Ed(t,Sw(r,{idToken:n}));Dt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ww(i.providerUserInfo):[],o=g6(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new gv(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Tw(t){const e=dr(t);await ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function g6(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function ww(t){return t.map(e=>{var{providerId:r}=e,n=$1(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(t,e){const r=await _w(t,{},async()=>{const n=Kd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=bw(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ew.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function y6(t,e){return $c(t,"POST","/v2/accounts:revokeToken",G1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Dt(e.idToken,"internal-error"),Dt(typeof e.idToken<"u","internal-error"),Dt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Dt(e.length!==0,"internal-error");const r=yE(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await v6(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new lc;return n&&(Dt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Dt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Dt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lc,this.toJSON())}_performRefresh(){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t,e){Dt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class li{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=$1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new m6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Ed(this,this.stsTokenManager.getToken(this.auth,e));return Dt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Aw(this,e)}reload(){return Tw(this)}_assign(e){this!==e&&(Dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await ih(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(Wo(this.auth));const e=await this.getIdToken();return await Ed(this,h6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,u;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(s=r.email)!==null&&s!==void 0?s:void 0,p=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,g=(a=r.photoURL)!==null&&a!==void 0?a:void 0,v=(o=r.tenantId)!==null&&o!==void 0?o:void 0,y=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=r.createdAt)!==null&&c!==void 0?c:void 0,E=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:x,emailVerified:w,isAnonymous:R,providerData:P,stsTokenManager:S}=r;Dt(x&&S,e,"internal-error");const _=lc.fromJSON(this.name,S);Dt(typeof x=="string",e,"internal-error"),Li(f,e.name),Li(h,e.name),Dt(typeof w=="boolean",e,"internal-error"),Dt(typeof R=="boolean",e,"internal-error"),Li(p,e.name),Li(g,e.name),Li(v,e.name),Li(y,e.name),Li(b,e.name),Li(E,e.name);const m=new li({uid:x,auth:e,email:h,emailVerified:w,displayName:f,isAnonymous:R,photoURL:g,phoneNumber:p,tenantId:v,stsTokenManager:_,createdAt:b,lastLoginAt:E});return P&&Array.isArray(P)&&(m.providerData=P.map(A=>Object.assign({},A))),y&&(m._redirectEventId=y),m}static async _fromIdTokenResponse(e,r,n=!1){const s=new lc;s.updateFromServerResponse(r);const i=new li({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await ih(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Dt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ww(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new lc;o.updateFromIdToken(n);const l=new li({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new gv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Map;function ci(t){Si(t instanceof Function,"Expected a class definition");let e=xE.get(t);return e?(Si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Cw.type="NONE";const vv=Cw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t,e,r){return`firebase:${t}:${e}:${r}`}class cc{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=S0(this.userKey,s.apiKey,i),this.fullPersistenceKey=S0("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?li._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new cc(ci(vv),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ci(vv);const a=S0(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const f=li._fromJSON(e,u);c!==i&&(o=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new cc(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new cc(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fw(e))return"Blackberry";if(Nw(e))return"Webos";if(Iw(e))return"Safari";if((e.includes("chrome/")||Dw(e))&&!e.includes("edge/"))return"Chrome";if(Rw(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function kw(t=es()){return/firefox\//i.test(t)}function Iw(t=es()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dw(t=es()){return/crios\//i.test(t)}function Pw(t=es()){return/iemobile/i.test(t)}function Rw(t=es()){return/android/i.test(t)}function Fw(t=es()){return/blackberry/i.test(t)}function Nw(t=es()){return/webos/i.test(t)}function z1(t=es()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function x6(t=es()){var e;return z1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function E6(){return $8()&&document.documentMode===10}function Ow(t=es()){return z1(t)||Rw(t)||Nw(t)||Fw(t)||/windows phone/i.test(t)||Pw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t,e=[]){let r;switch(t){case"Browser":r=EE(es());break;case"Worker":r=`${EE(es())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${ml}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(t,e={}){return $c(t,"GET","/v2/passwordPolicy",G1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=6;class A6{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:S6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _E(this),this.idTokenSubscription=new _E(this),this.beforeStateQueue=new _6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ci(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await cc.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Sw(this,{idToken:e}),n=await li._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ii(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await ih(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=l6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(Wo(this));const r=e?dr(e):null;return r&&Dt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(Wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(Wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await b6(this),r=new A6(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zd("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await y6(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ci(e)||this._popupRedirectResolver;Dt(r,this,"argument-error"),this.redirectPersistenceManager=await cc.create(this,[ci(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&s6(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function up(t){return dr(t)}class _E{constructor(e){this.auth=e,this.observer=null,this.addObserver=q8(r=>this.observer=r)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w6(t){K1=t}function C6(t){return K1.loadJS(t)}function k6(){return K1.gapiScript}function I6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t,e){const r=qd(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(nh(i,e??{}))return s;Ba(s,"already-initialized")}return r.initialize({options:e})}function D6(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Bw(t,e,r){const n=up(t);Dt(n._canInitEmulator,n,"emulator-config-failed"),Dt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=Uw(e),{host:a,port:o}=P6(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),R6()}function Uw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P6(t){const e=Uw(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:bE(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:bE(a)}}}function bE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function R6(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,r){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t,e){return d6(t,"POST","/v1/accounts:signInWithIdp",G1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="http://localhost";class uo extends q1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ba("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=$1(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new uo(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return uc(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,uc(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,uc(e,r)}buildRequest(){const e={requestUri:F6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Kd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends X1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends Qd{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Qd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return uo._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ia.credential(r,n)}catch{return null}}}ia.GOOGLE_SIGN_IN_METHOD="google.com";ia.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends Qd{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.GITHUB_SIGN_IN_METHOD="github.com";ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends Qd{constructor(){super("twitter.com")}static credential(e,r){return uo._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return si.credential(r,n)}catch{return null}}}si.TWITTER_SIGN_IN_METHOD="twitter.com";si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await li._fromIdTokenResponse(e,n,s),a=SE(n);return new Ac({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=SE(n);return new Ac({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function SE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends xa{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,oh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new oh(e,r,n,s)}}function $w(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?oh._fromErrorAndOperation(t,i,e,n):i})}async function N6(t,e,r=!1){const n=await Ed(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ac._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6(t,e,r=!1){const{auth:n}=t;if(ii(n.app))return Promise.reject(Wo(n));const s="reauthenticate";try{const i=await Ed(t,$w(n,s,e,t),r);Dt(i.idToken,n,"internal-error");const a=W1(i.idToken);Dt(a,n,"internal-error");const{sub:o}=a;return Dt(t.uid===o,n,"user-mismatch"),Ac._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ba(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M6(t,e,r=!1){if(ii(t.app))return Promise.reject(Wo(t));const n="signIn",s=await $w(t,n,e),i=await Ac._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function Vw(t,e,r,n){return dr(t).onIdTokenChanged(e,r,n)}function Hw(t,e,r){return dr(t).beforeAuthStateChanged(e,r)}function dp(t,e,r,n){return dr(t).onAuthStateChanged(e,r,n)}function fp(t){return dr(t).signOut()}const lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(lh,"1"),this.storage.removeItem(lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=1e3,B6=10;class Gw extends jw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ow(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);E6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,B6):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},L6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gw.type="LOCAL";const Y1=Gw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww extends jw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Ww.type="SESSION";const Q1=Ww;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new hp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await U6(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=J1("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const h=f;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(h.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(){return window}function V6(t){Fa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(){return typeof Fa().WorkerGlobalScope<"u"&&typeof Fa().importScripts=="function"}async function H6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function G6(){return zw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="firebaseLocalStorageDb",W6=1,ch="firebaseLocalStorage",qw="fbase_key";class Jd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function pp(t,e){return t.transaction([ch],e?"readwrite":"readonly").objectStore(ch)}function z6(){const t=indexedDB.deleteDatabase(Kw);return new Jd(t).toPromise()}function yv(){const t=indexedDB.open(Kw,W6);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(ch,{keyPath:qw})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(ch)?e(n):(n.close(),await z6(),e(await yv()))})})}async function AE(t,e,r){const n=pp(t,!0).put({[qw]:e,value:r});return new Jd(n).toPromise()}async function K6(t,e){const r=pp(t,!1).get(e),n=await new Jd(r).toPromise();return n===void 0?null:n.value}function TE(t,e){const r=pp(t,!0).delete(e);return new Jd(r).toPromise()}const q6=800,X6=3;class Xw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>X6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hp._getInstance(G6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await H6(),!this.activeServiceWorker)return;this.sender=new $6(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yv();return await AE(e,lh,"1"),await TE(e,lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>AE(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>K6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>TE(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=pp(s,!1).getAll();return new Jd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xw.type="LOCAL";const Yw=Xw;new Yd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t,e){return e?ci(e):(Dt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1 extends q1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uc(e,this._buildIdpRequest())}_linkToIdToken(e,r){return uc(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return uc(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Y6(t){return M6(t.auth,new Z1(t),t.bypassAuthState)}function Q6(t){const{auth:e,user:r}=t;return Dt(r,e,"internal-error"),O6(r,new Z1(t),t.bypassAuthState)}async function J6(t){const{auth:e,user:r}=t;return Dt(r,e,"internal-error"),N6(r,new Z1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y6;case"linkViaPopup":case"linkViaRedirect":return J6;case"reauthViaPopup":case"reauthViaRedirect":return Q6;default:Ba(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=new Yd(2e3,1e4);async function ey(t,e,r){if(ii(t.app))return Promise.reject(fa(t,"operation-not-supported-in-this-environment"));const n=up(t);a6(t,e,X1);const s=Qw(n,r);return new Bo(n,"signInViaPopup",e,s).executeNotNull()}class Bo extends Jw{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Dt(e,this.auth,"internal-error"),e}async onExecution(){Si(this.filter.length===1,"Popup operations only handle one event");const e=J1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(fa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Z6.get())};e()}}Bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5="pendingRedirect",A0=new Map;class t5 extends Jw{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=A0.get(this.auth._key());if(!e){try{const n=await r5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}A0.set(this.auth._key(),e)}return this.bypassAuthState||A0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r5(t,e){const r=a5(e),n=s5(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function n5(t,e){A0.set(t._key(),e)}function s5(t){return ci(t._redirectPersistence)}function a5(t){return S0(e5,t.config.apiKey,t.name)}async function i5(t,e,r=!1){if(ii(t.app))return Promise.reject(Wo(t));const n=up(t),s=Qw(n,e),a=await new t5(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=10*60*1e3;class l5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c5(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!Zw(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(fa(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wE(e))}saveEventToCache(e){this.cachedEventUids.add(wE(e)),this.lastProcessedEventTime=Date.now()}}function wE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Zw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function c5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5(t,e={}){return $c(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f5=/^https?/;async function h5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await u5(t);for(const r of e)try{if(p5(r))return}catch{}Ba(t,"unauthorized-domain")}function p5(t){const e=pv(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!f5.test(r))return!1;if(d5.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=new Yd(3e4,6e4);function CE(){const t=Fa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function g5(t){return new Promise((e,r)=>{var n,s,i;function a(){CE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CE(),r(fa(t,"network-request-failed"))},timeout:m5.get()})}if(!((s=(n=Fa().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Fa().gapi)===null||i===void 0)&&i.load)a();else{const o=I6("iframefcb");return Fa()[o]=()=>{gapi.load?a():r(fa(t,"network-request-failed"))},C6(`${k6()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw T0=null,e})}let T0=null;function v5(t){return T0=T0||g5(t),T0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=new Yd(5e3,15e3),x5="__/auth/iframe",E5="emulator/auth/iframe",_5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function S5(t){const e=t.config;Dt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?j1(e,E5):`https://${t.config.authDomain}/${x5}`,n={apiKey:e.apiKey,appName:t.name,v:ml},s=b5.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Kd(n).slice(1)}`}async function A5(t){const e=await v5(t),r=Fa().gapi;return Dt(r,t,"internal-error"),e.open({where:document.body,url:S5(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_5,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=fa(t,"network-request-failed"),o=Fa().setTimeout(()=>{i(a)},y5.get());function l(){Fa().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w5=500,C5=600,k5="_blank",I5="http://localhost";class kE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D5(t,e,r,n=w5,s=C5){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},T5),{width:n.toString(),height:s.toString(),top:i,left:a}),c=es().toLowerCase();r&&(o=Dw(c)?k5:r),kw(c)&&(e=e||I5,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(x6(c)&&o!=="_self")return P5(e||"",o),new kE(null);const f=window.open(e||"",o,u);Dt(f,t,"popup-blocked");try{f.focus()}catch{}return new kE(f)}function P5(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5="__/auth/handler",F5="emulator/auth/handler",N5=encodeURIComponent("fac");async function IE(t,e,r,n,s,i){Dt(t.config.authDomain,t,"auth-domain-config-required"),Dt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:ml,eventId:s};if(e instanceof X1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",K8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))a[u]=f}if(e instanceof Qd){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${N5}=${encodeURIComponent(l)}`:"";return`${O5(t)}?${Kd(o).slice(1)}${c}`}function O5({config:t}){return t.emulator?j1(t,F5):`https://${t.authDomain}/${R5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="webStorageSupport";class M5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q1,this._completeRedirectFn=i5,this._overrideRedirectResult=n5}async _openPopup(e,r,n,s){var i;Si((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await IE(e,r,n,pv(),s);return D5(e,a,J1())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await IE(e,r,n,pv(),s);return V6(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Si(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await A5(e),n=new l5(e);return r.register("authEvent",s=>(Dt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(xm,{type:xm},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[xm];a!==void 0&&r(!!a),Ba(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=h5(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Ow()||Iw()||z1()}}const e4=M5;var DE="@firebase/auth",PE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U5(t){co(new _i("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Dt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mw(t)},c=new T6(n,s,i,l);return D6(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),co(new _i("auth-internal",e=>{const r=up(e.getProvider("auth").getImmediate());return(n=>new L5(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(DE,PE,B5(t)),zs(DE,PE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=5*60,V5=uw("authIdTokenMaxAge")||$5;let RE=null;const H5=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>V5)return;const s=r==null?void 0:r.token;RE!==s&&(RE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tl(t=Xd()){const e=qd(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Lw(t,{popupRedirectResolver:e4,persistence:[Yw,Y1,Q1]}),n=uw("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=H5(i.toString());Hw(r,a,()=>a(r.currentUser)),Vw(r,o=>a(o))}}const s=lw("auth");return s&&Bw(r,`http://${s}`),r}function j5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}w6({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=fa("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",j5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U5("Browser");const G5=Object.freeze(Object.defineProperty({__proto__:null,AuthCredential:q1,FacebookAuthProvider:ri,GithubAuthProvider:ni,GoogleAuthProvider:ia,OAuthCredential:uo,TwitterAuthProvider:si,beforeAuthStateChanged:Hw,browserLocalPersistence:Y1,browserPopupRedirectResolver:e4,browserSessionPersistence:Q1,connectAuthEmulator:Bw,getAuth:tl,getIdToken:mv,getIdTokenResult:Aw,inMemoryPersistence:vv,indexedDBLocalPersistence:Yw,initializeAuth:Lw,onAuthStateChanged:dp,onIdTokenChanged:Vw,prodErrorMap:yw,reload:Tw,signInWithPopup:ey,signOut:fp},Symbol.toStringTag,{value:"Module"}));var FE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zo,t4;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function m(){}m.prototype=_.prototype,S.D=_.prototype,S.prototype=new m,S.prototype.constructor=S,S.C=function(A,k,I){for(var C=Array(arguments.length-2),M=2;M<arguments.length;M++)C[M-2]=arguments[M];return _.prototype[k].apply(A,C)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,_,m){m||(m=0);var A=Array(16);if(typeof _=="string")for(var k=0;16>k;++k)A[k]=_.charCodeAt(m++)|_.charCodeAt(m++)<<8|_.charCodeAt(m++)<<16|_.charCodeAt(m++)<<24;else for(k=0;16>k;++k)A[k]=_[m++]|_[m++]<<8|_[m++]<<16|_[m++]<<24;_=S.g[0],m=S.g[1],k=S.g[2];var I=S.g[3],C=_+(I^m&(k^I))+A[0]+3614090360&4294967295;_=m+(C<<7&4294967295|C>>>25),C=I+(k^_&(m^k))+A[1]+3905402710&4294967295,I=_+(C<<12&4294967295|C>>>20),C=k+(m^I&(_^m))+A[2]+606105819&4294967295,k=I+(C<<17&4294967295|C>>>15),C=m+(_^k&(I^_))+A[3]+3250441966&4294967295,m=k+(C<<22&4294967295|C>>>10),C=_+(I^m&(k^I))+A[4]+4118548399&4294967295,_=m+(C<<7&4294967295|C>>>25),C=I+(k^_&(m^k))+A[5]+1200080426&4294967295,I=_+(C<<12&4294967295|C>>>20),C=k+(m^I&(_^m))+A[6]+2821735955&4294967295,k=I+(C<<17&4294967295|C>>>15),C=m+(_^k&(I^_))+A[7]+4249261313&4294967295,m=k+(C<<22&4294967295|C>>>10),C=_+(I^m&(k^I))+A[8]+1770035416&4294967295,_=m+(C<<7&4294967295|C>>>25),C=I+(k^_&(m^k))+A[9]+2336552879&4294967295,I=_+(C<<12&4294967295|C>>>20),C=k+(m^I&(_^m))+A[10]+4294925233&4294967295,k=I+(C<<17&4294967295|C>>>15),C=m+(_^k&(I^_))+A[11]+2304563134&4294967295,m=k+(C<<22&4294967295|C>>>10),C=_+(I^m&(k^I))+A[12]+1804603682&4294967295,_=m+(C<<7&4294967295|C>>>25),C=I+(k^_&(m^k))+A[13]+4254626195&4294967295,I=_+(C<<12&4294967295|C>>>20),C=k+(m^I&(_^m))+A[14]+2792965006&4294967295,k=I+(C<<17&4294967295|C>>>15),C=m+(_^k&(I^_))+A[15]+1236535329&4294967295,m=k+(C<<22&4294967295|C>>>10),C=_+(k^I&(m^k))+A[1]+4129170786&4294967295,_=m+(C<<5&4294967295|C>>>27),C=I+(m^k&(_^m))+A[6]+3225465664&4294967295,I=_+(C<<9&4294967295|C>>>23),C=k+(_^m&(I^_))+A[11]+643717713&4294967295,k=I+(C<<14&4294967295|C>>>18),C=m+(I^_&(k^I))+A[0]+3921069994&4294967295,m=k+(C<<20&4294967295|C>>>12),C=_+(k^I&(m^k))+A[5]+3593408605&4294967295,_=m+(C<<5&4294967295|C>>>27),C=I+(m^k&(_^m))+A[10]+38016083&4294967295,I=_+(C<<9&4294967295|C>>>23),C=k+(_^m&(I^_))+A[15]+3634488961&4294967295,k=I+(C<<14&4294967295|C>>>18),C=m+(I^_&(k^I))+A[4]+3889429448&4294967295,m=k+(C<<20&4294967295|C>>>12),C=_+(k^I&(m^k))+A[9]+568446438&4294967295,_=m+(C<<5&4294967295|C>>>27),C=I+(m^k&(_^m))+A[14]+3275163606&4294967295,I=_+(C<<9&4294967295|C>>>23),C=k+(_^m&(I^_))+A[3]+4107603335&4294967295,k=I+(C<<14&4294967295|C>>>18),C=m+(I^_&(k^I))+A[8]+1163531501&4294967295,m=k+(C<<20&4294967295|C>>>12),C=_+(k^I&(m^k))+A[13]+2850285829&4294967295,_=m+(C<<5&4294967295|C>>>27),C=I+(m^k&(_^m))+A[2]+4243563512&4294967295,I=_+(C<<9&4294967295|C>>>23),C=k+(_^m&(I^_))+A[7]+1735328473&4294967295,k=I+(C<<14&4294967295|C>>>18),C=m+(I^_&(k^I))+A[12]+2368359562&4294967295,m=k+(C<<20&4294967295|C>>>12),C=_+(m^k^I)+A[5]+4294588738&4294967295,_=m+(C<<4&4294967295|C>>>28),C=I+(_^m^k)+A[8]+2272392833&4294967295,I=_+(C<<11&4294967295|C>>>21),C=k+(I^_^m)+A[11]+1839030562&4294967295,k=I+(C<<16&4294967295|C>>>16),C=m+(k^I^_)+A[14]+4259657740&4294967295,m=k+(C<<23&4294967295|C>>>9),C=_+(m^k^I)+A[1]+2763975236&4294967295,_=m+(C<<4&4294967295|C>>>28),C=I+(_^m^k)+A[4]+1272893353&4294967295,I=_+(C<<11&4294967295|C>>>21),C=k+(I^_^m)+A[7]+4139469664&4294967295,k=I+(C<<16&4294967295|C>>>16),C=m+(k^I^_)+A[10]+3200236656&4294967295,m=k+(C<<23&4294967295|C>>>9),C=_+(m^k^I)+A[13]+681279174&4294967295,_=m+(C<<4&4294967295|C>>>28),C=I+(_^m^k)+A[0]+3936430074&4294967295,I=_+(C<<11&4294967295|C>>>21),C=k+(I^_^m)+A[3]+3572445317&4294967295,k=I+(C<<16&4294967295|C>>>16),C=m+(k^I^_)+A[6]+76029189&4294967295,m=k+(C<<23&4294967295|C>>>9),C=_+(m^k^I)+A[9]+3654602809&4294967295,_=m+(C<<4&4294967295|C>>>28),C=I+(_^m^k)+A[12]+3873151461&4294967295,I=_+(C<<11&4294967295|C>>>21),C=k+(I^_^m)+A[15]+530742520&4294967295,k=I+(C<<16&4294967295|C>>>16),C=m+(k^I^_)+A[2]+3299628645&4294967295,m=k+(C<<23&4294967295|C>>>9),C=_+(k^(m|~I))+A[0]+4096336452&4294967295,_=m+(C<<6&4294967295|C>>>26),C=I+(m^(_|~k))+A[7]+1126891415&4294967295,I=_+(C<<10&4294967295|C>>>22),C=k+(_^(I|~m))+A[14]+2878612391&4294967295,k=I+(C<<15&4294967295|C>>>17),C=m+(I^(k|~_))+A[5]+4237533241&4294967295,m=k+(C<<21&4294967295|C>>>11),C=_+(k^(m|~I))+A[12]+1700485571&4294967295,_=m+(C<<6&4294967295|C>>>26),C=I+(m^(_|~k))+A[3]+2399980690&4294967295,I=_+(C<<10&4294967295|C>>>22),C=k+(_^(I|~m))+A[10]+4293915773&4294967295,k=I+(C<<15&4294967295|C>>>17),C=m+(I^(k|~_))+A[1]+2240044497&4294967295,m=k+(C<<21&4294967295|C>>>11),C=_+(k^(m|~I))+A[8]+1873313359&4294967295,_=m+(C<<6&4294967295|C>>>26),C=I+(m^(_|~k))+A[15]+4264355552&4294967295,I=_+(C<<10&4294967295|C>>>22),C=k+(_^(I|~m))+A[6]+2734768916&4294967295,k=I+(C<<15&4294967295|C>>>17),C=m+(I^(k|~_))+A[13]+1309151649&4294967295,m=k+(C<<21&4294967295|C>>>11),C=_+(k^(m|~I))+A[4]+4149444226&4294967295,_=m+(C<<6&4294967295|C>>>26),C=I+(m^(_|~k))+A[11]+3174756917&4294967295,I=_+(C<<10&4294967295|C>>>22),C=k+(_^(I|~m))+A[2]+718787259&4294967295,k=I+(C<<15&4294967295|C>>>17),C=m+(I^(k|~_))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+I&4294967295}n.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var m=_-this.blockSize,A=this.B,k=this.h,I=0;I<_;){if(k==0)for(;I<=m;)s(this,S,I),I+=this.blockSize;if(typeof S=="string"){for(;I<_;)if(A[k++]=S.charCodeAt(I++),k==this.blockSize){s(this,A),k=0;break}}else for(;I<_;)if(A[k++]=S[I++],k==this.blockSize){s(this,A),k=0;break}}this.h=k,this.o+=_},n.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var m=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=m&255,m/=256;for(this.u(S),S=Array(16),_=m=0;4>_;++_)for(var A=0;32>A;A+=8)S[m++]=this.g[_]>>>A&255;return S};function i(S,_){var m=o;return Object.prototype.hasOwnProperty.call(m,S)?m[S]:m[S]=_(S)}function a(S,_){this.h=_;for(var m=[],A=!0,k=S.length-1;0<=k;k--){var I=S[k]|0;A&&I==_||(m[k]=I,A=!1)}this.g=m}var o={};function l(S){return-128<=S&&128>S?i(S,function(_){return new a([_|0],0>_?-1:0)}):new a([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return y(c(-S));for(var _=[],m=1,A=0;S>=m;A++)_[A]=S/m|0,m*=4294967296;return new a(_,0)}function u(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return y(u(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var m=c(Math.pow(_,8)),A=f,k=0;k<S.length;k+=8){var I=Math.min(8,S.length-k),C=parseInt(S.substring(k,k+I),_);8>I?(I=c(Math.pow(_,I)),A=A.j(I).add(c(C))):(A=A.j(m),A=A.add(c(C)))}return A}var f=l(0),h=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(v(this))return-y(this).m();for(var S=0,_=1,m=0;m<this.g.length;m++){var A=this.i(m);S+=(0<=A?A:4294967296+A)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(g(this))return"0";if(v(this))return"-"+y(this).toString(S);for(var _=c(Math.pow(S,6)),m=this,A="";;){var k=w(m,_).g;m=b(m,k.j(_));var I=((0<m.g.length?m.g[0]:m.h)>>>0).toString(S);if(m=k,g(m))return I+A;for(;6>I.length;)I="0"+I;A=I+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function g(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=b(this,S),v(S)?-1:g(S)?0:1};function y(S){for(var _=S.g.length,m=[],A=0;A<_;A++)m[A]=~S.g[A];return new a(m,~S.h).add(h)}t.abs=function(){return v(this)?y(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),m=[],A=0,k=0;k<=_;k++){var I=A+(this.i(k)&65535)+(S.i(k)&65535),C=(I>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);A=C>>>16,I&=65535,C&=65535,m[k]=C<<16|I}return new a(m,m[m.length-1]&-2147483648?-1:0)};function b(S,_){return S.add(y(_))}t.j=function(S){if(g(this)||g(S))return f;if(v(this))return v(S)?y(this).j(y(S)):y(y(this).j(S));if(v(S))return y(this.j(y(S)));if(0>this.l(p)&&0>S.l(p))return c(this.m()*S.m());for(var _=this.g.length+S.g.length,m=[],A=0;A<2*_;A++)m[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<S.g.length;k++){var I=this.i(A)>>>16,C=this.i(A)&65535,M=S.i(k)>>>16,D=S.i(k)&65535;m[2*A+2*k]+=C*D,E(m,2*A+2*k),m[2*A+2*k+1]+=I*D,E(m,2*A+2*k+1),m[2*A+2*k+1]+=C*M,E(m,2*A+2*k+1),m[2*A+2*k+2]+=I*M,E(m,2*A+2*k+2)}for(A=0;A<_;A++)m[A]=m[2*A+1]<<16|m[2*A];for(A=_;A<2*_;A++)m[A]=0;return new a(m,0)};function E(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function x(S,_){this.g=S,this.h=_}function w(S,_){if(g(_))throw Error("division by zero");if(g(S))return new x(f,f);if(v(S))return _=w(y(S),_),new x(y(_.g),y(_.h));if(v(_))return _=w(S,y(_)),new x(y(_.g),_.h);if(30<S.g.length){if(v(S)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var m=h,A=_;0>=A.l(S);)m=R(m),A=R(A);var k=P(m,1),I=P(A,1);for(A=P(A,2),m=P(m,2);!g(A);){var C=I.add(A);0>=C.l(S)&&(k=k.add(m),I=C),A=P(A,1),m=P(m,1)}return _=b(S,k.j(_)),new x(k,_)}for(k=f;0<=S.l(_);){for(m=Math.max(1,Math.floor(S.m()/_.m())),A=Math.ceil(Math.log(m)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),I=c(m),C=I.j(_);v(C)||0<C.l(S);)m-=A,I=c(m),C=I.j(_);g(I)&&(I=h),k=k.add(I),S=b(S,C)}return new x(k,S)}t.A=function(S){return w(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),m=[],A=0;A<_;A++)m[A]=this.i(A)&S.i(A);return new a(m,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),m=[],A=0;A<_;A++)m[A]=this.i(A)|S.i(A);return new a(m,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),m=[],A=0;A<_;A++)m[A]=this.i(A)^S.i(A);return new a(m,this.h^S.h)};function R(S){for(var _=S.g.length+1,m=[],A=0;A<_;A++)m[A]=S.i(A)<<1|S.i(A-1)>>>31;return new a(m,S.h)}function P(S,_){var m=_>>5;_%=32;for(var A=S.g.length-m,k=[],I=0;I<A;I++)k[I]=0<_?S.i(I+m)>>>_|S.i(I+m+1)<<32-_:S.i(I+m);return new a(k,S.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,t4=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,zo=a}).apply(typeof FE<"u"?FE:typeof self<"u"?self:typeof window<"u"?window:{});var Vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var r4,_u,n4,w0,xv,s4,a4,i4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,j,q){return T==Array.prototype||T==Object.prototype||(T[j]=q.value),T};function r(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vf=="object"&&Vf];for(var j=0;j<T.length;++j){var q=T[j];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}var n=r(this);function s(T,j){if(j)e:{var q=n;T=T.split(".");for(var oe=0;oe<T.length-1;oe++){var Ce=T[oe];if(!(Ce in q))break e;q=q[Ce]}T=T[T.length-1],oe=q[T],j=j(oe),j!=oe&&j!=null&&e(q,T,{configurable:!0,writable:!0,value:j})}}function i(T,j){T instanceof String&&(T+="");var q=0,oe=!1,Ce={next:function(){if(!oe&&q<T.length){var Ue=q++;return{value:j(Ue,T[Ue]),done:!1}}return oe=!0,{done:!0,value:void 0}}};return Ce[Symbol.iterator]=function(){return Ce},Ce}s("Array.prototype.values",function(T){return T||function(){return i(this,function(j,q){return q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(T){var j=typeof T;return j=j!="object"?j:T?Array.isArray(T)?"array":j:"null",j=="array"||j=="object"&&typeof T.length=="number"}function c(T){var j=typeof T;return j=="object"&&T!=null||j=="function"}function u(T,j,q){return T.call.apply(T.bind,arguments)}function f(T,j,q){if(!T)throw Error();if(2<arguments.length){var oe=Array.prototype.slice.call(arguments,2);return function(){var Ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ce,oe),T.apply(j,Ce)}}return function(){return T.apply(j,arguments)}}function h(T,j,q){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,h.apply(null,arguments)}function p(T,j){var q=Array.prototype.slice.call(arguments,1);return function(){var oe=q.slice();return oe.push.apply(oe,arguments),T.apply(this,oe)}}function g(T,j){function q(){}q.prototype=j.prototype,T.aa=j.prototype,T.prototype=new q,T.prototype.constructor=T,T.Qb=function(oe,Ce,Ue){for(var tt=Array(arguments.length-2),yr=2;yr<arguments.length;yr++)tt[yr-2]=arguments[yr];return j.prototype[Ce].apply(oe,tt)}}function v(T){const j=T.length;if(0<j){const q=Array(j);for(let oe=0;oe<j;oe++)q[oe]=T[oe];return q}return[]}function y(T,j){for(let q=1;q<arguments.length;q++){const oe=arguments[q];if(l(oe)){const Ce=T.length||0,Ue=oe.length||0;T.length=Ce+Ue;for(let tt=0;tt<Ue;tt++)T[Ce+tt]=oe[tt]}else T.push(oe)}}class b{constructor(j,q){this.i=j,this.j=q,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function E(T){return/^[\s\xa0]*$/.test(T)}function x(){var T=o.navigator;return T&&(T=T.userAgent)?T:""}function w(T){return w[" "](T),T}w[" "]=function(){};var R=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function P(T,j,q){for(const oe in T)j.call(q,T[oe],oe,T)}function S(T,j){for(const q in T)j.call(void 0,T[q],q,T)}function _(T){const j={};for(const q in T)j[q]=T[q];return j}const m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(T,j){let q,oe;for(let Ce=1;Ce<arguments.length;Ce++){oe=arguments[Ce];for(q in oe)T[q]=oe[q];for(let Ue=0;Ue<m.length;Ue++)q=m[Ue],Object.prototype.hasOwnProperty.call(oe,q)&&(T[q]=oe[q])}}function k(T){var j=1;T=T.split(":");const q=[];for(;0<j&&T.length;)q.push(T.shift()),j--;return T.length&&q.push(T.join(":")),q}function I(T){o.setTimeout(()=>{throw T},0)}function C(){var T=O;let j=null;return T.g&&(j=T.g,T.g=T.g.next,T.g||(T.h=null),j.next=null),j}class M{constructor(){this.h=this.g=null}add(j,q){const oe=D.get();oe.set(j,q),this.h?this.h.next=oe:this.g=oe,this.h=oe}}var D=new b(()=>new F,T=>T.reset());class F{constructor(){this.next=this.g=this.h=null}set(j,q){this.h=j,this.g=q,this.next=null}reset(){this.next=this.g=this.h=null}}let N,L=!1,O=new M,z=()=>{const T=o.Promise.resolve(void 0);N=()=>{T.then(H)}};var H=()=>{for(var T;T=C();){try{T.h.call(T.g)}catch(q){I(q)}var j=D;j.j(T),100>j.h&&(j.h++,T.next=j.g,j.g=T)}L=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(T,j){this.type=T,this.g=this.target=j,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var T=!1,j=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const q=()=>{};o.addEventListener("test",q,j),o.removeEventListener("test",q,j)}catch{}return T}();function re(T,j){if(W.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var q=this.type=T.type,oe=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=j,j=T.relatedTarget){if(R){e:{try{w(j.nodeName);var Ce=!0;break e}catch{}Ce=!1}Ce||(j=null)}}else q=="mouseover"?j=T.fromElement:q=="mouseout"&&(j=T.toElement);this.relatedTarget=j,oe?(this.clientX=oe.clientX!==void 0?oe.clientX:oe.pageX,this.clientY=oe.clientY!==void 0?oe.clientY:oe.pageY,this.screenX=oe.screenX||0,this.screenY=oe.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:de[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&re.aa.h.call(this)}}g(re,W);var de={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),ce=0;function te(T,j,q,oe,Ce){this.listener=T,this.proxy=null,this.src=j,this.type=q,this.capture=!!oe,this.ha=Ce,this.key=++ce,this.da=this.fa=!1}function Z(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function xe(T){this.src=T,this.g={},this.h=0}xe.prototype.add=function(T,j,q,oe,Ce){var Ue=T.toString();T=this.g[Ue],T||(T=this.g[Ue]=[],this.h++);var tt=Y(T,j,oe,Ce);return-1<tt?(j=T[tt],q||(j.fa=!1)):(j=new te(j,this.src,Ue,!!oe,Ce),j.fa=q,T.push(j)),j};function J(T,j){var q=j.type;if(q in T.g){var oe=T.g[q],Ce=Array.prototype.indexOf.call(oe,j,void 0),Ue;(Ue=0<=Ce)&&Array.prototype.splice.call(oe,Ce,1),Ue&&(Z(j),T.g[q].length==0&&(delete T.g[q],T.h--))}}function Y(T,j,q,oe){for(var Ce=0;Ce<T.length;++Ce){var Ue=T[Ce];if(!Ue.da&&Ue.listener==j&&Ue.capture==!!q&&Ue.ha==oe)return Ce}return-1}var Q="closure_lm_"+(1e6*Math.random()|0),fe={};function ye(T,j,q,oe,Ce){if(Array.isArray(j)){for(var Ue=0;Ue<j.length;Ue++)ye(T,j[Ue],q,oe,Ce);return null}return q=je(q),T&&T[ae]?T.K(j,q,c(oe)?!!oe.capture:!1,Ce):ie(T,j,q,!1,oe,Ce)}function ie(T,j,q,oe,Ce,Ue){if(!j)throw Error("Invalid event type");var tt=c(Ce)?!!Ce.capture:!!Ce,yr=We(T);if(yr||(T[Q]=yr=new xe(T)),q=yr.add(j,q,oe,tt,Ue),q.proxy)return q;if(oe=ee(),q.proxy=oe,oe.src=T,oe.listener=q,T.addEventListener)G||(Ce=tt),Ce===void 0&&(Ce=!1),T.addEventListener(j.toString(),oe,Ce);else if(T.attachEvent)T.attachEvent(ke(j.toString()),oe);else if(T.addListener&&T.removeListener)T.addListener(oe);else throw Error("addEventListener and attachEvent are unavailable.");return q}function ee(){function T(q){return j.call(T.src,T.listener,q)}const j=Ae;return T}function ge(T,j,q,oe,Ce){if(Array.isArray(j))for(var Ue=0;Ue<j.length;Ue++)ge(T,j[Ue],q,oe,Ce);else oe=c(oe)?!!oe.capture:!!oe,q=je(q),T&&T[ae]?(T=T.i,j=String(j).toString(),j in T.g&&(Ue=T.g[j],q=Y(Ue,q,oe,Ce),-1<q&&(Z(Ue[q]),Array.prototype.splice.call(Ue,q,1),Ue.length==0&&(delete T.g[j],T.h--)))):T&&(T=We(T))&&(j=T.g[j.toString()],T=-1,j&&(T=Y(j,q,oe,Ce)),(q=-1<T?j[T]:null)&&Te(q))}function Te(T){if(typeof T!="number"&&T&&!T.da){var j=T.src;if(j&&j[ae])J(j.i,T);else{var q=T.type,oe=T.proxy;j.removeEventListener?j.removeEventListener(q,oe,T.capture):j.detachEvent?j.detachEvent(ke(q),oe):j.addListener&&j.removeListener&&j.removeListener(oe),(q=We(j))?(J(q,T),q.h==0&&(q.src=null,j[Q]=null)):Z(T)}}}function ke(T){return T in fe?fe[T]:fe[T]="on"+T}function Ae(T,j){if(T.da)T=!0;else{j=new re(j,this);var q=T.listener,oe=T.ha||T.src;T.fa&&Te(T),T=q.call(oe,j)}return T}function We(T){return T=T[Q],T instanceof xe?T:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function je(T){return typeof T=="function"?T:(T[De]||(T[De]=function(j){return T.handleEvent(j)}),T[De])}function $e(){V.call(this),this.i=new xe(this),this.M=this,this.F=null}g($e,V),$e.prototype[ae]=!0,$e.prototype.removeEventListener=function(T,j,q,oe){ge(this,T,j,q,oe)};function Ie(T,j){var q,oe=T.F;if(oe)for(q=[];oe;oe=oe.F)q.push(oe);if(T=T.M,oe=j.type||j,typeof j=="string")j=new W(j,T);else if(j instanceof W)j.target=j.target||T;else{var Ce=j;j=new W(oe,T),A(j,Ce)}if(Ce=!0,q)for(var Ue=q.length-1;0<=Ue;Ue--){var tt=j.g=q[Ue];Ce=Ke(tt,oe,!0,j)&&Ce}if(tt=j.g=T,Ce=Ke(tt,oe,!0,j)&&Ce,Ce=Ke(tt,oe,!1,j)&&Ce,q)for(Ue=0;Ue<q.length;Ue++)tt=j.g=q[Ue],Ce=Ke(tt,oe,!1,j)&&Ce}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var T=this.i,j;for(j in T.g){for(var q=T.g[j],oe=0;oe<q.length;oe++)Z(q[oe]);delete T.g[j],T.h--}}this.F=null},$e.prototype.K=function(T,j,q,oe){return this.i.add(String(T),j,!1,q,oe)},$e.prototype.L=function(T,j,q,oe){return this.i.add(String(T),j,!0,q,oe)};function Ke(T,j,q,oe){if(j=T.i.g[String(j)],!j)return!0;j=j.concat();for(var Ce=!0,Ue=0;Ue<j.length;++Ue){var tt=j[Ue];if(tt&&!tt.da&&tt.capture==q){var yr=tt.listener,_n=tt.ha||tt.src;tt.fa&&J(T.i,tt),Ce=yr.call(_n,oe)!==!1&&Ce}}return Ce&&!oe.defaultPrevented}function _e(T,j,q){if(typeof T=="function")q&&(T=h(T,q));else if(T&&typeof T.handleEvent=="function")T=h(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:o.setTimeout(T,j||0)}function Ee(T){T.g=_e(()=>{T.g=null,T.i&&(T.i=!1,Ee(T))},T.l);const j=T.h;T.h=null,T.m.apply(null,j)}class Se extends V{constructor(j,q){super(),this.m=j,this.l=q,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:Ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(T){V.call(this),this.h=T,this.g={}}g(Le,V);var ze=[];function lt(T){P(T.g,function(j,q){this.g.hasOwnProperty(q)&&Te(j)},T),T.g={}}Le.prototype.N=function(){Le.aa.N.call(this),lt(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xt=o.JSON.stringify,St=o.JSON.parse,Vt=class{stringify(T){return o.JSON.stringify(T,void 0)}parse(T){return o.JSON.parse(T,void 0)}};function pt(){}pt.prototype.h=null;function ct(T){return T.h||(T.h=T.i())}function mt(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rt(){W.call(this,"d")}g(Rt,W);function mr(){W.call(this,"c")}g(mr,W);var ns={},Ri=null;function ms(){return Ri=Ri||new $e}ns.La="serverreachability";function Cl(T){W.call(this,ns.La,T)}g(Cl,W);function Wa(T){const j=ms();Ie(j,new Cl(j))}ns.STAT_EVENT="statevent";function So(T,j){W.call(this,ns.STAT_EVENT,T),this.stat=j}g(So,W);function sn(T){const j=ms();Ie(j,new So(j,T))}ns.Ma="timingevent";function Ao(T,j){W.call(this,ns.Ma,T),this.size=j}g(Ao,W);function Rr(T,j){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){T()},j)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function kl(T,j,q,oe,Ce,Ue){T.info(function(){if(T.g)if(Ue)for(var tt="",yr=Ue.split("&"),_n=0;_n<yr.length;_n++){var ir=yr[_n].split("=");if(1<ir.length){var Mn=ir[0];ir=ir[1];var Ln=Mn.split("_");tt=2<=Ln.length&&Ln[1]=="type"?tt+(Mn+"="+ir+"&"):tt+(Mn+"=redacted&")}}else tt=null;else tt=Ue;return"XMLHTTP REQ ("+oe+") [attempt "+Ce+"]: "+j+`
`+q+`
`+tt})}function Qc(T,j,q,oe,Ce,Ue,tt){T.info(function(){return"XMLHTTP RESP ("+oe+") [ attempt "+Ce+"]: "+j+`
`+q+`
`+Ue+" "+tt})}function ne(T,j,q,oe){T.info(function(){return"XMLHTTP TEXT ("+j+"): "+le(T,q)+(oe?" "+oe:"")})}function he(T,j){T.info(function(){return"TIMEOUT: "+j})}On.prototype.info=function(){};function le(T,j){if(!T.g)return j;if(!j)return null;try{var q=JSON.parse(j);if(q){for(T=0;T<q.length;T++)if(Array.isArray(q[T])){var oe=q[T];if(!(2>oe.length)){var Ce=oe[1];if(Array.isArray(Ce)&&!(1>Ce.length)){var Ue=Ce[0];if(Ue!="noop"&&Ue!="stop"&&Ue!="close")for(var tt=1;tt<Ce.length;tt++)Ce[tt]=""}}}}return xt(q)}catch{return j}}var ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},me;function Fe(){}g(Fe,pt),Fe.prototype.g=function(){return new XMLHttpRequest},Fe.prototype.i=function(){return{}},me=new Fe;function Ve(T,j,q,oe){this.j=T,this.i=j,this.l=q,this.R=oe||1,this.U=new Le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ne}function Ne(){this.i=null,this.g="",this.h=!1}var Me={},Be={};function Qe(T,j,q){T.L=1,T.v=_f(Ka(j)),T.m=q,T.P=!0,et(T,null)}function et(T,j){T.F=Date.now(),st(T),T.A=Ka(T.v);var q=T.A,oe=T.R;Array.isArray(oe)||(oe=[String(oe)]),Qx(q.i,"t",oe),T.C=0,q=T.j.J,T.h=new Ne,T.g=m2(T.j,q?j:null,!T.m),0<T.O&&(T.M=new Se(h(T.Y,T,T.g),T.O)),j=T.U,q=T.g,oe=T.ca;var Ce="readystatechange";Array.isArray(Ce)||(Ce&&(ze[0]=Ce.toString()),Ce=ze);for(var Ue=0;Ue<Ce.length;Ue++){var tt=ye(q,Ce[Ue],oe||j.handleEvent,!1,j.h||j);if(!tt)break;j.g[tt.key]=tt}j=T.H?_(T.H):{},T.m?(T.u||(T.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,j)):(T.u="GET",T.g.ea(T.A,T.u,null,j)),Wa(),kl(T.i,T.u,T.A,T.l,T.R,T.m)}Ve.prototype.ca=function(T){T=T.target;const j=this.M;j&&qa(T)==3?j.j():this.Y(T)},Ve.prototype.Y=function(T){try{if(T==this.g)e:{const Ln=qa(this.g);var j=this.g.Ba();const Rl=this.g.Z();if(!(3>Ln)&&(Ln!=3||this.g&&(this.h.h||this.g.oa()||s2(this.g)))){this.J||Ln!=4||j==7||(j==8||0>=Rl?Wa(3):Wa(2)),vr(this);var q=this.g.Z();this.X=q;t:if(ut(this)){var oe=s2(this.g);T="";var Ce=oe.length,Ue=qa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),hr(this);var tt="";break t}this.h.i=new o.TextDecoder}for(j=0;j<Ce;j++)this.h.h=!0,T+=this.h.i.decode(oe[j],{stream:!(Ue&&j==Ce-1)});oe.length=0,this.h.g+=T,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=q==200,Qc(this.i,this.u,this.A,this.l,this.R,Ln,q),this.o){if(this.T&&!this.K){t:{if(this.g){var yr,_n=this.g;if((yr=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(yr)){var ir=yr;break t}}ir=null}if(q=ir)ne(this.i,this.l,q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,za(this,q);else{this.o=!1,this.s=3,sn(12),kr(this),hr(this);break e}}if(this.P){q=!0;let Js;for(;!this.J&&this.C<tt.length;)if(Js=Je(this,tt),Js==Be){Ln==4&&(this.s=4,sn(14),q=!1),ne(this.i,this.l,null,"[Incomplete Response]");break}else if(Js==Me){this.s=4,sn(15),ne(this.i,this.l,tt,"[Invalid Chunk]"),q=!1;break}else ne(this.i,this.l,Js,null),za(this,Js);if(ut(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||tt.length!=0||this.h.h||(this.s=1,sn(16),q=!1),this.o=this.o&&q,!q)ne(this.i,this.l,tt,"[Invalid Chunked Response]"),kr(this),hr(this);else if(0<tt.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),Jp(Mn),Mn.M=!0,sn(11))}}else ne(this.i,this.l,tt,null),za(this,tt);Ln==4&&kr(this),this.o&&!this.J&&(Ln==4?d2(this.j,this):(this.o=!1,st(this)))}else HD(this.g),q==400&&0<tt.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),kr(this),hr(this)}}}catch{}finally{}};function ut(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function Je(T,j){var q=T.C,oe=j.indexOf(`
`,q);return oe==-1?Be:(q=Number(j.substring(q,oe)),isNaN(q)?Me:(oe+=1,oe+q>j.length?Be:(j=j.slice(oe,oe+q),T.C=oe+q,j)))}Ve.prototype.cancel=function(){this.J=!0,kr(this)};function st(T){T.S=Date.now()+T.I,It(T,T.I)}function It(T,j){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Rr(h(T.ba,T),j)}function vr(T){T.B&&(o.clearTimeout(T.B),T.B=null)}Ve.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(he(this.i,this.A),this.L!=2&&(Wa(),sn(17)),kr(this),this.s=2,hr(this)):It(this,this.S-T)};function hr(T){T.j.G==0||T.J||d2(T.j,T)}function kr(T){vr(T);var j=T.M;j&&typeof j.ma=="function"&&j.ma(),T.M=null,lt(T.U),T.g&&(j=T.g,T.g=null,j.abort(),j.ma())}function za(T,j){try{var q=T.j;if(q.G!=0&&(q.g==T||Ss(q.h,T))){if(!T.K&&Ss(q.h,T)&&q.G==3){try{var oe=q.Da.g.parse(j)}catch{oe=null}if(Array.isArray(oe)&&oe.length==3){var Ce=oe;if(Ce[0]==0){e:if(!q.u){if(q.g)if(q.g.F+3e3<T.F)Cf(q),Tf(q);else break e;Qp(q),sn(18)}}else q.za=Ce[1],0<q.za-q.T&&37500>Ce[2]&&q.F&&q.v==0&&!q.C&&(q.C=Rr(h(q.Za,q),6e3));if(1>=Il(q.h)&&q.ca){try{q.ca()}catch{}q.ca=void 0}}else Co(q,11)}else if((T.K||q.g==T)&&Cf(q),!E(j))for(Ce=q.Da.g.parse(j),j=0;j<Ce.length;j++){let ir=Ce[j];if(q.T=ir[0],ir=ir[1],q.G==2)if(ir[0]=="c"){q.K=ir[1],q.ia=ir[2];const Mn=ir[3];Mn!=null&&(q.la=Mn,q.j.info("VER="+q.la));const Ln=ir[4];Ln!=null&&(q.Aa=Ln,q.j.info("SVER="+q.Aa));const Rl=ir[5];Rl!=null&&typeof Rl=="number"&&0<Rl&&(oe=1.5*Rl,q.L=oe,q.j.info("backChannelRequestTimeoutMs_="+oe)),oe=q;const Js=T.g;if(Js){const If=Js.g?Js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(If){var Ue=oe.h;Ue.g||If.indexOf("spdy")==-1&&If.indexOf("quic")==-1&&If.indexOf("h2")==-1||(Ue.j=Ue.l,Ue.g=new Set,Ue.h&&(qp(Ue,Ue.h),Ue.h=null))}if(oe.D){const Zp=Js.g?Js.g.getResponseHeader("X-HTTP-Session-Id"):null;Zp&&(oe.ya=Zp,wr(oe.I,oe.D,Zp))}}q.G=3,q.l&&q.l.ua(),q.ba&&(q.R=Date.now()-T.F,q.j.info("Handshake RTT: "+q.R+"ms")),oe=q;var tt=T;if(oe.qa=p2(oe,oe.J?oe.ia:null,oe.W),tt.K){jx(oe.h,tt);var yr=tt,_n=oe.L;_n&&(yr.I=_n),yr.B&&(vr(yr),st(yr)),oe.g=tt}else c2(oe);0<q.i.length&&wf(q)}else ir[0]!="stop"&&ir[0]!="close"||Co(q,7);else q.G==3&&(ir[0]=="stop"||ir[0]=="close"?ir[0]=="stop"?Co(q,7):Yp(q):ir[0]!="noop"&&q.l&&q.l.ta(ir),q.v=0)}}Wa(4)}catch{}}var To=class{constructor(T,j){this.g=T,this.map=j}};function Fi(T){this.l=T||10,o.PerformanceNavigationTiming?(T=o.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ba(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Il(T){return T.h?1:T.g?T.g.size:0}function Ss(T,j){return T.h?T.h==j:T.g?T.g.has(j):!1}function qp(T,j){T.g?T.g.add(j):T.h=j}function jx(T,j){T.h&&T.h==j?T.h=null:T.g&&T.g.has(j)&&T.g.delete(j)}Fi.prototype.cancel=function(){if(this.i=Gx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function Gx(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let j=T.i;for(const q of T.g.values())j=j.concat(q.D);return j}return v(T.i)}function CD(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(l(T)){for(var j=[],q=T.length,oe=0;oe<q;oe++)j.push(T[oe]);return j}j=[],q=0;for(oe in T)j[q++]=T[oe];return j}function kD(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(l(T)||typeof T=="string"){var j=[];T=T.length;for(var q=0;q<T;q++)j.push(q);return j}j=[],q=0;for(const oe in T)j[q++]=oe;return j}}}function Wx(T,j){if(T.forEach&&typeof T.forEach=="function")T.forEach(j,void 0);else if(l(T)||typeof T=="string")Array.prototype.forEach.call(T,j,void 0);else for(var q=kD(T),oe=CD(T),Ce=oe.length,Ue=0;Ue<Ce;Ue++)j.call(void 0,oe[Ue],q&&q[Ue],T)}var zx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ID(T,j){if(T){T=T.split("&");for(var q=0;q<T.length;q++){var oe=T[q].indexOf("="),Ce=null;if(0<=oe){var Ue=T[q].substring(0,oe);Ce=T[q].substring(oe+1)}else Ue=T[q];j(Ue,Ce?decodeURIComponent(Ce.replace(/\+/g," ")):"")}}}function wo(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof wo){this.h=T.h,xf(this,T.j),this.o=T.o,this.g=T.g,Ef(this,T.s),this.l=T.l;var j=T.i,q=new eu;q.i=j.i,j.g&&(q.g=new Map(j.g),q.h=j.h),Kx(this,q),this.m=T.m}else T&&(j=String(T).match(zx))?(this.h=!1,xf(this,j[1]||"",!0),this.o=Jc(j[2]||""),this.g=Jc(j[3]||"",!0),Ef(this,j[4]),this.l=Jc(j[5]||"",!0),Kx(this,j[6]||"",!0),this.m=Jc(j[7]||"")):(this.h=!1,this.i=new eu(null,this.h))}wo.prototype.toString=function(){var T=[],j=this.j;j&&T.push(Zc(j,qx,!0),":");var q=this.g;return(q||j=="file")&&(T.push("//"),(j=this.o)&&T.push(Zc(j,qx,!0),"@"),T.push(encodeURIComponent(String(q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),q=this.s,q!=null&&T.push(":",String(q))),(q=this.l)&&(this.g&&q.charAt(0)!="/"&&T.push("/"),T.push(Zc(q,q.charAt(0)=="/"?RD:PD,!0))),(q=this.i.toString())&&T.push("?",q),(q=this.m)&&T.push("#",Zc(q,ND)),T.join("")};function Ka(T){return new wo(T)}function xf(T,j,q){T.j=q?Jc(j,!0):j,T.j&&(T.j=T.j.replace(/:$/,""))}function Ef(T,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);T.s=j}else T.s=null}function Kx(T,j,q){j instanceof eu?(T.i=j,OD(T.i,T.h)):(q||(j=Zc(j,FD)),T.i=new eu(j,T.h))}function wr(T,j,q){T.i.set(j,q)}function _f(T){return wr(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function Jc(T,j){return T?j?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Zc(T,j,q){return typeof T=="string"?(T=encodeURI(T).replace(j,DD),q&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function DD(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var qx=/[#\/\?@]/g,PD=/[#\?:]/g,RD=/[#\?]/g,FD=/[#\?@]/g,ND=/#/g;function eu(T,j){this.h=this.g=null,this.i=T||null,this.j=!!j}function Ni(T){T.g||(T.g=new Map,T.h=0,T.i&&ID(T.i,function(j,q){T.add(decodeURIComponent(j.replace(/\+/g," ")),q)}))}t=eu.prototype,t.add=function(T,j){Ni(this),this.i=null,T=Dl(this,T);var q=this.g.get(T);return q||this.g.set(T,q=[]),q.push(j),this.h+=1,this};function Xx(T,j){Ni(T),j=Dl(T,j),T.g.has(j)&&(T.i=null,T.h-=T.g.get(j).length,T.g.delete(j))}function Yx(T,j){return Ni(T),j=Dl(T,j),T.g.has(j)}t.forEach=function(T,j){Ni(this),this.g.forEach(function(q,oe){q.forEach(function(Ce){T.call(j,Ce,oe,this)},this)},this)},t.na=function(){Ni(this);const T=Array.from(this.g.values()),j=Array.from(this.g.keys()),q=[];for(let oe=0;oe<j.length;oe++){const Ce=T[oe];for(let Ue=0;Ue<Ce.length;Ue++)q.push(j[oe])}return q},t.V=function(T){Ni(this);let j=[];if(typeof T=="string")Yx(this,T)&&(j=j.concat(this.g.get(Dl(this,T))));else{T=Array.from(this.g.values());for(let q=0;q<T.length;q++)j=j.concat(T[q])}return j},t.set=function(T,j){return Ni(this),this.i=null,T=Dl(this,T),Yx(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[j]),this.h+=1,this},t.get=function(T,j){return T?(T=this.V(T),0<T.length?String(T[0]):j):j};function Qx(T,j,q){Xx(T,j),0<q.length&&(T.i=null,T.g.set(Dl(T,j),v(q)),T.h+=q.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],j=Array.from(this.g.keys());for(var q=0;q<j.length;q++){var oe=j[q];const Ue=encodeURIComponent(String(oe)),tt=this.V(oe);for(oe=0;oe<tt.length;oe++){var Ce=Ue;tt[oe]!==""&&(Ce+="="+encodeURIComponent(String(tt[oe]))),T.push(Ce)}}return this.i=T.join("&")};function Dl(T,j){return j=String(j),T.j&&(j=j.toLowerCase()),j}function OD(T,j){j&&!T.j&&(Ni(T),T.i=null,T.g.forEach(function(q,oe){var Ce=oe.toLowerCase();oe!=Ce&&(Xx(this,oe),Qx(this,Ce,q))},T)),T.j=j}function MD(T,j){const q=new On;if(o.Image){const oe=new Image;oe.onload=p(Oi,q,"TestLoadImage: loaded",!0,j,oe),oe.onerror=p(Oi,q,"TestLoadImage: error",!1,j,oe),oe.onabort=p(Oi,q,"TestLoadImage: abort",!1,j,oe),oe.ontimeout=p(Oi,q,"TestLoadImage: timeout",!1,j,oe),o.setTimeout(function(){oe.ontimeout&&oe.ontimeout()},1e4),oe.src=T}else j(!1)}function LD(T,j){const q=new On,oe=new AbortController,Ce=setTimeout(()=>{oe.abort(),Oi(q,"TestPingServer: timeout",!1,j)},1e4);fetch(T,{signal:oe.signal}).then(Ue=>{clearTimeout(Ce),Ue.ok?Oi(q,"TestPingServer: ok",!0,j):Oi(q,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(Ce),Oi(q,"TestPingServer: error",!1,j)})}function Oi(T,j,q,oe,Ce){try{Ce&&(Ce.onload=null,Ce.onerror=null,Ce.onabort=null,Ce.ontimeout=null),oe(q)}catch{}}function BD(){this.g=new Vt}function UD(T,j,q){const oe=q||"";try{Wx(T,function(Ce,Ue){let tt=Ce;c(Ce)&&(tt=xt(Ce)),j.push(oe+Ue+"="+encodeURIComponent(tt))})}catch(Ce){throw j.push(oe+"type="+encodeURIComponent("_badmap")),Ce}}function bf(T){this.l=T.Ub||null,this.j=T.eb||!1}g(bf,pt),bf.prototype.g=function(){return new Sf(this.l,this.j)},bf.prototype.i=function(T){return function(){return T}}({});function Sf(T,j){$e.call(this),this.D=T,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Sf,$e),t=Sf.prototype,t.open=function(T,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=j,this.readyState=1,ru(this)},t.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(j.body=T),(this.D||o).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tu(this)),this.readyState=0},t.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,ru(this)),this.g&&(this.readyState=3,ru(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jx(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jx(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}t.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var j=T.value?T.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!T.done}))&&(this.response=this.responseText+=j)}T.done?tu(this):ru(this),this.readyState==3&&Jx(this)}},t.Ra=function(T){this.g&&(this.response=this.responseText=T,tu(this))},t.Qa=function(T){this.g&&(this.response=T,tu(this))},t.ga=function(){this.g&&tu(this)};function tu(T){T.readyState=4,T.l=null,T.j=null,T.v=null,ru(T)}t.setRequestHeader=function(T,j){this.u.append(T,j)},t.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],j=this.h.entries();for(var q=j.next();!q.done;)q=q.value,T.push(q[0]+": "+q[1]),q=j.next();return T.join(`\r
`)};function ru(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(Sf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function Zx(T){let j="";return P(T,function(q,oe){j+=oe,j+=":",j+=q,j+=`\r
`}),j}function Xp(T,j,q){e:{for(oe in q){var oe=!1;break e}oe=!0}oe||(q=Zx(q),typeof T=="string"?q!=null&&encodeURIComponent(String(q)):wr(T,j,q))}function Mr(T){$e.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Mr,$e);var $D=/^https?$/i,VD=["POST","PUT"];t=Mr.prototype,t.Ha=function(T){this.J=T},t.ea=function(T,j,q,oe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);j=j?j.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():me.g(),this.v=this.o?ct(this.o):ct(me),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(j,String(T),!0),this.B=!1}catch(Ue){e2(this,Ue);return}if(T=q||"",q=new Map(this.headers),oe)if(Object.getPrototypeOf(oe)===Object.prototype)for(var Ce in oe)q.set(Ce,oe[Ce]);else if(typeof oe.keys=="function"&&typeof oe.get=="function")for(const Ue of oe.keys())q.set(Ue,oe.get(Ue));else throw Error("Unknown input type for opt_headers: "+String(oe));oe=Array.from(q.keys()).find(Ue=>Ue.toLowerCase()=="content-type"),Ce=o.FormData&&T instanceof o.FormData,!(0<=Array.prototype.indexOf.call(VD,j,void 0))||oe||Ce||q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ue,tt]of q)this.g.setRequestHeader(Ue,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{n2(this),this.u=!0,this.g.send(T),this.u=!1}catch(Ue){e2(this,Ue)}};function e2(T,j){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=j,T.m=5,t2(T),Af(T)}function t2(T){T.A||(T.A=!0,Ie(T,"complete"),Ie(T,"error"))}t.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,Ie(this,"complete"),Ie(this,"abort"),Af(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Af(this,!0)),Mr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?r2(this):this.bb())},t.bb=function(){r2(this)};function r2(T){if(T.h&&typeof a<"u"&&(!T.v[1]||qa(T)!=4||T.Z()!=2)){if(T.u&&qa(T)==4)_e(T.Ea,0,T);else if(Ie(T,"readystatechange"),qa(T)==4){T.h=!1;try{const tt=T.Z();e:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var q;if(!(q=j)){var oe;if(oe=tt===0){var Ce=String(T.D).match(zx)[1]||null;!Ce&&o.self&&o.self.location&&(Ce=o.self.location.protocol.slice(0,-1)),oe=!$D.test(Ce?Ce.toLowerCase():"")}q=oe}if(q)Ie(T,"complete"),Ie(T,"success");else{T.m=6;try{var Ue=2<qa(T)?T.g.statusText:""}catch{Ue=""}T.l=Ue+" ["+T.Z()+"]",t2(T)}}finally{Af(T)}}}}function Af(T,j){if(T.g){n2(T);const q=T.g,oe=T.v[0]?()=>{}:null;T.g=null,T.v=null,j||Ie(T,"ready");try{q.onreadystatechange=oe}catch{}}}function n2(T){T.I&&(o.clearTimeout(T.I),T.I=null)}t.isActive=function(){return!!this.g};function qa(T){return T.g?T.g.readyState:0}t.Z=function(){try{return 2<qa(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(T){if(this.g){var j=this.g.responseText;return T&&j.indexOf(T)==0&&(j=j.substring(T.length)),St(j)}};function s2(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function HD(T){const j={};T=(T.g&&2<=qa(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let oe=0;oe<T.length;oe++){if(E(T[oe]))continue;var q=k(T[oe]);const Ce=q[0];if(q=q[1],typeof q!="string")continue;q=q.trim();const Ue=j[Ce]||[];j[Ce]=Ue,Ue.push(q)}S(j,function(oe){return oe.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function nu(T,j,q){return q&&q.internalChannelParams&&q.internalChannelParams[T]||j}function a2(T){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nu("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nu("baseRetryDelayMs",5e3,T),this.cb=nu("retryDelaySeedMs",1e4,T),this.Wa=nu("forwardChannelMaxRetries",2,T),this.wa=nu("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Fi(T&&T.concurrentRequestLimit),this.Da=new BD,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=a2.prototype,t.la=8,t.G=1,t.connect=function(T,j,q,oe){sn(0),this.W=T,this.H=j||{},q&&oe!==void 0&&(this.H.OSID=q,this.H.OAID=oe),this.F=this.X,this.I=p2(this,null,this.W),wf(this)};function Yp(T){if(i2(T),T.G==3){var j=T.U++,q=Ka(T.I);if(wr(q,"SID",T.K),wr(q,"RID",j),wr(q,"TYPE","terminate"),su(T,q),j=new Ve(T,T.j,j),j.L=2,j.v=_f(Ka(q)),q=!1,o.navigator&&o.navigator.sendBeacon)try{q=o.navigator.sendBeacon(j.v.toString(),"")}catch{}!q&&o.Image&&(new Image().src=j.v,q=!0),q||(j.g=m2(j.j,null),j.g.ea(j.v)),j.F=Date.now(),st(j)}h2(T)}function Tf(T){T.g&&(Jp(T),T.g.cancel(),T.g=null)}function i2(T){Tf(T),T.u&&(o.clearTimeout(T.u),T.u=null),Cf(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&o.clearTimeout(T.s),T.s=null)}function wf(T){if(!ba(T.h)&&!T.s){T.s=!0;var j=T.Ga;N||z(),L||(N(),L=!0),O.add(j,T),T.B=0}}function jD(T,j){return Il(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=j.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Rr(h(T.Ga,T,j),f2(T,T.B)),T.B++,!0)}t.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const Ce=new Ve(this,this.j,T);let Ue=this.o;if(this.S&&(Ue?(Ue=_(Ue),A(Ue,this.S)):Ue=this.S),this.m!==null||this.O||(Ce.H=Ue,Ue=null),this.P)e:{for(var j=0,q=0;q<this.i.length;q++){t:{var oe=this.i[q];if("__data__"in oe.map&&(oe=oe.map.__data__,typeof oe=="string")){oe=oe.length;break t}oe=void 0}if(oe===void 0)break;if(j+=oe,4096<j){j=q;break e}if(j===4096||q===this.i.length-1){j=q+1;break e}}j=1e3}else j=1e3;j=l2(this,Ce,j),q=Ka(this.I),wr(q,"RID",T),wr(q,"CVER",22),this.D&&wr(q,"X-HTTP-Session-Id",this.D),su(this,q),Ue&&(this.O?j="headers="+encodeURIComponent(String(Zx(Ue)))+"&"+j:this.m&&Xp(q,this.m,Ue)),qp(this.h,Ce),this.Ua&&wr(q,"TYPE","init"),this.P?(wr(q,"$req",j),wr(q,"SID","null"),Ce.T=!0,Qe(Ce,q,null)):Qe(Ce,q,j),this.G=2}}else this.G==3&&(T?o2(this,T):this.i.length==0||ba(this.h)||o2(this))};function o2(T,j){var q;j?q=j.l:q=T.U++;const oe=Ka(T.I);wr(oe,"SID",T.K),wr(oe,"RID",q),wr(oe,"AID",T.T),su(T,oe),T.m&&T.o&&Xp(oe,T.m,T.o),q=new Ve(T,T.j,q,T.B+1),T.m===null&&(q.H=T.o),j&&(T.i=j.D.concat(T.i)),j=l2(T,q,1e3),q.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),qp(T.h,q),Qe(q,oe,j)}function su(T,j){T.H&&P(T.H,function(q,oe){wr(j,oe,q)}),T.l&&Wx({},function(q,oe){wr(j,oe,q)})}function l2(T,j,q){q=Math.min(T.i.length,q);var oe=T.l?h(T.l.Na,T.l,T):null;e:{var Ce=T.i;let Ue=-1;for(;;){const tt=["count="+q];Ue==-1?0<q?(Ue=Ce[0].g,tt.push("ofs="+Ue)):Ue=0:tt.push("ofs="+Ue);let yr=!0;for(let _n=0;_n<q;_n++){let ir=Ce[_n].g;const Mn=Ce[_n].map;if(ir-=Ue,0>ir)Ue=Math.max(0,Ce[_n].g-100),yr=!1;else try{UD(Mn,tt,"req"+ir+"_")}catch{oe&&oe(Mn)}}if(yr){oe=tt.join("&");break e}}}return T=T.i.splice(0,q),j.D=T,oe}function c2(T){if(!T.g&&!T.u){T.Y=1;var j=T.Fa;N||z(),L||(N(),L=!0),O.add(j,T),T.v=0}}function Qp(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Rr(h(T.Fa,T),f2(T,T.v)),T.v++,!0)}t.Fa=function(){if(this.u=null,u2(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Rr(h(this.ab,this),T)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),Tf(this),u2(this))};function Jp(T){T.A!=null&&(o.clearTimeout(T.A),T.A=null)}function u2(T){T.g=new Ve(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var j=Ka(T.qa);wr(j,"RID","rpc"),wr(j,"SID",T.K),wr(j,"AID",T.T),wr(j,"CI",T.F?"0":"1"),!T.F&&T.ja&&wr(j,"TO",T.ja),wr(j,"TYPE","xmlhttp"),su(T,j),T.m&&T.o&&Xp(j,T.m,T.o),T.L&&(T.g.I=T.L);var q=T.g;T=T.ia,q.L=1,q.v=_f(Ka(j)),q.m=null,q.P=!0,et(q,T)}t.Za=function(){this.C!=null&&(this.C=null,Tf(this),Qp(this),sn(19))};function Cf(T){T.C!=null&&(o.clearTimeout(T.C),T.C=null)}function d2(T,j){var q=null;if(T.g==j){Cf(T),Jp(T),T.g=null;var oe=2}else if(Ss(T.h,j))q=j.D,jx(T.h,j),oe=1;else return;if(T.G!=0){if(j.o)if(oe==1){q=j.m?j.m.length:0,j=Date.now()-j.F;var Ce=T.B;oe=ms(),Ie(oe,new Ao(oe,q)),wf(T)}else c2(T);else if(Ce=j.s,Ce==3||Ce==0&&0<j.X||!(oe==1&&jD(T,j)||oe==2&&Qp(T)))switch(q&&0<q.length&&(j=T.h,j.i=j.i.concat(q)),Ce){case 1:Co(T,5);break;case 4:Co(T,10);break;case 3:Co(T,6);break;default:Co(T,2)}}}function f2(T,j){let q=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(q*=2),q*j}function Co(T,j){if(T.j.info("Error code "+j),j==2){var q=h(T.fb,T),oe=T.Xa;const Ce=!oe;oe=new wo(oe||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||xf(oe,"https"),_f(oe),Ce?MD(oe.toString(),q):LD(oe.toString(),q)}else sn(2);T.G=0,T.l&&T.l.sa(j),h2(T),i2(T)}t.fb=function(T){T?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function h2(T){if(T.G=0,T.ka=[],T.l){const j=Gx(T.h);(j.length!=0||T.i.length!=0)&&(y(T.ka,j),y(T.ka,T.i),T.h.i.length=0,v(T.i),T.i.length=0),T.l.ra()}}function p2(T,j,q){var oe=q instanceof wo?Ka(q):new wo(q);if(oe.g!="")j&&(oe.g=j+"."+oe.g),Ef(oe,oe.s);else{var Ce=o.location;oe=Ce.protocol,j=j?j+"."+Ce.hostname:Ce.hostname,Ce=+Ce.port;var Ue=new wo(null);oe&&xf(Ue,oe),j&&(Ue.g=j),Ce&&Ef(Ue,Ce),q&&(Ue.l=q),oe=Ue}return q=T.D,j=T.ya,q&&j&&wr(oe,q,j),wr(oe,"VER",T.la),su(T,oe),oe}function m2(T,j,q){if(j&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=T.Ca&&!T.pa?new Mr(new bf({eb:q})):new Mr(T.pa),j.Ha(T.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function g2(){}t=g2.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function kf(){}kf.prototype.g=function(T,j){return new As(T,j)};function As(T,j){$e.call(this),this.g=new a2(j),this.l=T,this.h=j&&j.messageUrlParams||null,T=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(T?T["X-WebChannel-Content-Type"]=j.messageContentType:T={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(T?T["X-WebChannel-Client-Profile"]=j.va:T={"X-WebChannel-Client-Profile":j.va}),this.g.S=T,(T=j&&j.Sb)&&!E(T)&&(this.g.m=T),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!E(j)&&(this.g.D=j,T=this.h,T!==null&&j in T&&(T=this.h,j in T&&delete T[j])),this.j=new Pl(this)}g(As,$e),As.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},As.prototype.close=function(){Yp(this.g)},As.prototype.o=function(T){var j=this.g;if(typeof T=="string"){var q={};q.__data__=T,T=q}else this.u&&(q={},q.__data__=xt(T),T=q);j.i.push(new To(j.Ya++,T)),j.G==3&&wf(j)},As.prototype.N=function(){this.g.l=null,delete this.j,Yp(this.g),delete this.g,As.aa.N.call(this)};function v2(T){Rt.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var j=T.__sm__;if(j){e:{for(const q in j){T=q;break e}T=void 0}(this.i=T)&&(T=this.i,j=j!==null&&T in j?j[T]:void 0),this.data=j}else this.data=T}g(v2,Rt);function y2(){mr.call(this),this.status=1}g(y2,mr);function Pl(T){this.g=T}g(Pl,g2),Pl.prototype.ua=function(){Ie(this.g,"a")},Pl.prototype.ta=function(T){Ie(this.g,new v2(T))},Pl.prototype.sa=function(T){Ie(this.g,new y2)},Pl.prototype.ra=function(){Ie(this.g,"b")},kf.prototype.createWebChannel=kf.prototype.g,As.prototype.send=As.prototype.o,As.prototype.open=As.prototype.m,As.prototype.close=As.prototype.close,i4=function(){return new kf},a4=function(){return ms()},s4=ns,xv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,w0=ue,pe.COMPLETE="complete",n4=pe,mt.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",$e.prototype.listen=$e.prototype.K,_u=mt,Mr.prototype.listenOnce=Mr.prototype.L,Mr.prototype.getLastError=Mr.prototype.Ka,Mr.prototype.getLastErrorCode=Mr.prototype.Ba,Mr.prototype.getStatus=Mr.prototype.Z,Mr.prototype.getResponseJson=Mr.prototype.Oa,Mr.prototype.getResponseText=Mr.prototype.oa,Mr.prototype.send=Mr.prototype.ea,Mr.prototype.setWithCredentials=Mr.prototype.Ha,r4=Mr}).apply(typeof Vf<"u"?Vf:typeof self<"u"?self:typeof window<"u"?window:{});const NE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new B1("@firebase/firestore");function lu(){return rl.logLevel}function gt(t,...e){if(rl.logLevel<=Yt.DEBUG){const r=e.map(ty);rl.debug(`Firestore (${Vc}): ${t}`,...r)}}function Ai(t,...e){if(rl.logLevel<=Yt.ERROR){const r=e.map(ty);rl.error(`Firestore (${Vc}): ${t}`,...r)}}function nl(t,...e){if(rl.logLevel<=Yt.WARN){const r=e.map(ty);rl.warn(`Firestore (${Vc}): ${t}`,...r)}}function ty(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t="Unexpected state"){const e=`FIRESTORE (${Vc}) INTERNAL ASSERTION FAILED: `+t;throw Ai(e),new Error(e)}function pr(t,e){t||Pt()}function Lt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends xa{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(jn.UNAUTHENTICATED))}shutdown(){}}class W5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class z5{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){pr(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new di;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new di,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new di)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(pr(typeof n.accessToken=="string"),new o4(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pr(e===null||typeof e=="string"),new jn(e)}}class K5{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class q5{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new K5(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class X5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Y5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){pr(this.o===void 0);const n=i=>{i.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,gt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(pr(typeof r.token=="string"),this.R=r.token,new X5(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=Q5(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function lr(t,e){return t<e?-1:t>e?1:0}function Tc(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new nt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new nt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new nt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new nn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lr(this.nanoseconds,e.nanoseconds):lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new nn(0,0))}static max(){return new Ot(new nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,r,n){r===void 0?r=0:r>e.length&&Pt(),n===void 0?n=e.length-r:n>e.length-r&&Pt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return _d.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof _d?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Sr extends _d{construct(e,r,n){return new Sr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new nt(Ge.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Sr(r)}static emptyPath(){return new Sr([])}}const J5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends _d{construct(e,r,n){return new gn(e,r,n)}static isValidIdentifier(e){return J5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gn(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new nt(Ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new nt(Ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new nt(Ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new nt(Ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(r)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.path=e}static fromPath(e){return new Et(Sr.fromString(e))}static fromName(e){return new Et(Sr.fromString(e).popFirst(5))}static empty(){return new Et(Sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Sr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Et(new Sr(e.slice()))}}function Z5(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ot.fromTimestamp(n===1e9?new nn(r+1,0):new nn(r,n));return new fo(s,Et.empty(),e)}function eN(t){return new fo(t.readTime,t.key,-1)}class fo{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new fo(Ot.min(),Et.empty(),-1)}static max(){return new fo(Ot.max(),Et.empty(),-1)}}function tN(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Et.comparator(t.documentKey,e.documentKey),r!==0?r:lr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(t){if(t.code!==Ge.FAILED_PRECONDITION||t.message!==rN)throw t;gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Xe((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Xe?r:Xe.resolve(r)}catch(r){return Xe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Xe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Xe.reject(r)}static resolve(e){return new Xe((r,n)=>{r(e)})}static reject(e){return new Xe((r,n)=>{n(e)})}static waitFor(e){return new Xe((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=Xe.resolve(!1);for(const n of e)r=r.next(s=>s?Xe.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Xe((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Xe((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function sN(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ef(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ny.oe=-1;function mp(t){return t==null}function uh(t){return t===0&&1/t==-1/0}function aN(t){return typeof t=="number"&&Number.isInteger(t)&&!uh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function gl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function c4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,r){this.comparator=e,this.root=r||Tn.EMPTY}insert(e,r){return new Or(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new Or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hf(this.root,e,this.comparator,!0)}}class Hf{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tn{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Tn.RED,this.left=s??Tn.EMPTY,this.right=i??Tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Tn(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Tn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pt();const e=this.left.check();if(e!==this.right.check())throw Pt();return e+(this.isRed()?0:1)}}Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pt()}get value(){throw Pt()}get color(){throw Pt()}get left(){throw Pt()}get right(){throw Pt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new Tn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.comparator=e,this.data=new Or(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new ME(this.data.getIterator())}getIteratorFrom(e){return new ME(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Pn(this.comparator);return r.data=e,r}}class ME{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new Is([])}unionWith(e){let r=new Pn(gn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Is(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Tc(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new u4("Invalid base64 string: "+i):i}}(e);return new yn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new yn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const iN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ho(t){if(pr(!!t),typeof t=="string"){let e=0;const r=iN.exec(t);if(pr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Kr(t.seconds),nanos:Kr(t.nanos)}}function Kr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sl(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function sy(t){const e=t.mapValue.fields.__previous_value__;return gp(e)?sy(e):e}function bd(t){const e=ho(t.mapValue.fields.__local_write_time__.timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class wc{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new wc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf={mapValue:{}};function al(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gp(t)?4:cN(t)?9007199254740991:lN(t)?10:11:Pt()}function Ua(t,e){if(t===e)return!0;const r=al(t);if(r!==al(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bd(t).isEqual(bd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=ho(s.timestampValue),o=ho(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return sl(s.bytesValue).isEqual(sl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Kr(s.geoPointValue.latitude)===Kr(i.geoPointValue.latitude)&&Kr(s.geoPointValue.longitude)===Kr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Kr(s.integerValue)===Kr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Kr(s.doubleValue),o=Kr(i.doubleValue);return a===o?uh(a)===uh(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Tc(t.arrayValue.values||[],e.arrayValue.values||[],Ua);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(OE(a)!==OE(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ua(a[l],o[l])))return!1;return!0}(t,e);default:return Pt()}}function Sd(t,e){return(t.values||[]).find(r=>Ua(r,e))!==void 0}function Cc(t,e){if(t===e)return 0;const r=al(t),n=al(e);if(r!==n)return lr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return lr(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Kr(i.integerValue||i.doubleValue),l=Kr(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return LE(t.timestampValue,e.timestampValue);case 4:return LE(bd(t),bd(e));case 5:return lr(t.stringValue,e.stringValue);case 6:return function(i,a){const o=sl(i),l=sl(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=lr(o[c],l[c]);if(u!==0)return u}return lr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=lr(Kr(i.latitude),Kr(a.latitude));return o!==0?o:lr(Kr(i.longitude),Kr(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return BE(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,u;const f=i.fields||{},h=a.fields||{},p=(o=f.value)===null||o===void 0?void 0:o.arrayValue,g=(l=h.value)===null||l===void 0?void 0:l.arrayValue,v=lr(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:BE(p,g)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===jf.mapValue&&a===jf.mapValue)return 0;if(i===jf.mapValue)return 1;if(a===jf.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const h=lr(l[f],u[f]);if(h!==0)return h;const p=Cc(o[l[f]],c[u[f]]);if(p!==0)return p}return lr(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Pt()}}function LE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lr(t,e);const r=ho(t),n=ho(e),s=lr(r.seconds,n.seconds);return s!==0?s:lr(r.nanos,n.nanos)}function BE(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Cc(r[s],n[s]);if(i)return i}return lr(r.length,n.length)}function kc(t){return Ev(t)}function Ev(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ho(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return sl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Et.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Ev(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Ev(r.fields[a])}`;return s+"}"}(t.mapValue):Pt()}function dh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _v(t){return!!t&&"integerValue"in t}function ay(t){return!!t&&"arrayValue"in t}function UE(t){return!!t&&"nullValue"in t}function $E(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function C0(t){return!!t&&"mapValue"in t}function lN(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ju(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gl(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ju(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ju(t.arrayValue.values[r]);return e}return Object.assign({},t)}function cN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.value=e}static empty(){return new bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!C0(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ju(r)}setAll(e){let r=gn.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=ju(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());C0(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ua(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];C0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){gl(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new bs(ju(this.value))}}function d4(t){const e=[];return gl(t.fields,(r,n)=>{const s=new gn([r]);if(C0(n)){const i=d4(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Is(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new zn(e,0,Ot.min(),Ot.min(),Ot.min(),bs.empty(),0)}static newFoundDocument(e,r,n,s){return new zn(e,1,r,Ot.min(),n,s,0)}static newNoDocument(e,r){return new zn(e,2,r,Ot.min(),Ot.min(),bs.empty(),0)}static newUnknownDocument(e,r){return new zn(e,3,r,Ot.min(),Ot.min(),bs.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,r){this.position=e,this.inclusive=r}}function VE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=Et.comparator(Et.fromName(a.referenceValue),r.key):n=Cc(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function HE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ua(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,r="asc"){this.field=e,this.dir=r}}function uN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{}class tn extends f4{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new fN(e,r,n):r==="array-contains"?new mN(e,n):r==="in"?new gN(e,n):r==="not-in"?new vN(e,n):r==="array-contains-any"?new yN(e,n):new tn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new hN(e,n):new pN(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Cc(r,this.value)):r!==null&&al(this.value)===al(r)&&this.matchesComparison(Cc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ga extends f4{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ga(e,r)}matches(e){return h4(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function h4(t){return t.op==="and"}function p4(t){return dN(t)&&h4(t)}function dN(t){for(const e of t.filters)if(e instanceof ga)return!1;return!0}function bv(t){if(t instanceof tn)return t.field.canonicalString()+t.op.toString()+kc(t.value);if(p4(t))return t.filters.map(e=>bv(e)).join(",");{const e=t.filters.map(r=>bv(r)).join(",");return`${t.op}(${e})`}}function m4(t,e){return t instanceof tn?function(n,s){return s instanceof tn&&n.op===s.op&&n.field.isEqual(s.field)&&Ua(n.value,s.value)}(t,e):t instanceof ga?function(n,s){return s instanceof ga&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&m4(a,s.filters[o]),!0):!1}(t,e):void Pt()}function g4(t){return t instanceof tn?function(r){return`${r.field.canonicalString()} ${r.op} ${kc(r.value)}`}(t):t instanceof ga?function(r){return r.op.toString()+" {"+r.getFilters().map(g4).join(" ,")+"}"}(t):"Filter"}class fN extends tn{constructor(e,r,n){super(e,r,n),this.key=Et.fromName(n.referenceValue)}matches(e){const r=Et.comparator(e.key,this.key);return this.matchesComparison(r)}}class hN extends tn{constructor(e,r){super(e,"in",r),this.keys=v4("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class pN extends tn{constructor(e,r){super(e,"not-in",r),this.keys=v4("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function v4(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Et.fromName(n.referenceValue))}class mN extends tn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ay(r)&&Sd(r.arrayValue,this.value)}}class gN extends tn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Sd(this.value.arrayValue,r)}}class vN extends tn{constructor(e,r){super(e,"not-in",r)}matches(e){if(Sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Sd(this.value.arrayValue,r)}}class yN extends tn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ay(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Sd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function jE(t,e=null,r=[],n=[],s=null,i=null,a=null){return new xN(t,e,r,n,s,i,a)}function iy(t){const e=Lt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>bv(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),mp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>kc(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>kc(n)).join(",")),e.ue=r}return e.ue}function oy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!uN(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!m4(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HE(t.startAt,e.startAt)&&HE(t.endAt,e.endAt)}function Sv(t){return Et.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function EN(t,e,r,n,s,i,a,o){return new vl(t,e,r,n,s,i,a,o)}function vp(t){return new vl(t)}function GE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ly(t){return t.collectionGroup!==null}function dc(t){const e=Lt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Pn(gn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ad(i,n))}),r.has(gn.keyField().canonicalString())||e.ce.push(new Ad(gn.keyField(),n))}return e.ce}function Na(t){const e=Lt(t);return e.le||(e.le=_N(e,dc(t))),e.le}function _N(t,e){if(t.limitType==="F")return jE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ad(s.field,i)});const r=t.endAt?new Ic(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ic(t.startAt.position,t.startAt.inclusive):null;return jE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Av(t,e){const r=t.filters.concat([e]);return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function fh(t,e,r){return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function yp(t,e){return oy(Na(t),Na(e))&&t.limitType===e.limitType}function y4(t){return`${iy(Na(t))}|lt:${t.limitType}`}function Gl(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>g4(s)).join(", ")}]`),mp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>kc(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>kc(s)).join(",")),`Target(${n})`}(Na(t))}; limitType=${t.limitType})`}function xp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Et.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of dc(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=VE(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,dc(n),s)||n.endAt&&!function(a,o,l){const c=VE(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,dc(n),s))}(t,e)}function bN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x4(t){return(e,r)=>{let n=!1;for(const s of dc(t)){const i=SN(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function SN(t,e,r){const n=t.field.isKeyField()?Et.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?Cc(l,c):Pt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Pt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){gl(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return c4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new Or(Et.comparator);function Ti(){return AN}const E4=new Or(Et.comparator);function bu(...t){let e=E4;for(const r of t)e=e.insert(r.key,r);return e}function _4(t){let e=E4;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Uo(){return Gu()}function b4(){return Gu()}function Gu(){return new Hc(t=>t.toString(),(t,e)=>t.isEqual(e))}const TN=new Or(Et.comparator),wN=new Pn(Et.comparator);function qt(...t){let e=wN;for(const r of t)e=e.add(r);return e}const CN=new Pn(lr);function kN(){return CN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uh(e)?"-0":e}}function S4(t){return{integerValue:""+t}}function IN(t,e){return aN(e)?S4(e):cy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this._=void 0}}function DN(t,e,r){return t instanceof Td?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&gp(i)&&(i=sy(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof wd?T4(t,e):t instanceof Cd?w4(t,e):function(s,i){const a=A4(s,i),o=WE(a)+WE(s.Pe);return _v(a)&&_v(s.Pe)?S4(o):cy(s.serializer,o)}(t,e)}function PN(t,e,r){return t instanceof wd?T4(t,e):t instanceof Cd?w4(t,e):r}function A4(t,e){return t instanceof hh?function(n){return _v(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Td extends Ep{}class wd extends Ep{constructor(e){super(),this.elements=e}}function T4(t,e){const r=C4(e);for(const n of t.elements)r.some(s=>Ua(s,n))||r.push(n);return{arrayValue:{values:r}}}class Cd extends Ep{constructor(e){super(),this.elements=e}}function w4(t,e){let r=C4(e);for(const n of t.elements)r=r.filter(s=>!Ua(s,n));return{arrayValue:{values:r}}}class hh extends Ep{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function WE(t){return Kr(t.integerValue||t.doubleValue)}function C4(t){return ay(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,r){this.field=e,this.transform=r}}function FN(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof wd&&s instanceof wd||n instanceof Cd&&s instanceof Cd?Tc(n.elements,s.elements,Ua):n instanceof hh&&s instanceof hh?Ua(n.Pe,s.Pe):n instanceof Td&&s instanceof Td}(t.transform,e.transform)}class NN{constructor(e,r){this.version=e,this.transformResults=r}}class fs{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new fs}static exists(e){return new fs(void 0,e)}static updateTime(e){return new fs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function k0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _p{}function k4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bp(t.key,fs.none()):new tf(t.key,t.data,fs.none());{const r=t.data,n=bs.empty();let s=new Pn(gn.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new yo(t.key,n,new Is(s.toArray()),fs.none())}}function ON(t,e,r){t instanceof tf?function(s,i,a){const o=s.value.clone(),l=KE(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof yo?function(s,i,a){if(!k0(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=KE(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(I4(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Wu(t,e,r,n){return t instanceof tf?function(i,a,o,l){if(!k0(i.precondition,a))return o;const c=i.value.clone(),u=qE(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof yo?function(i,a,o,l){if(!k0(i.precondition,a))return o;const c=qE(i.fieldTransforms,l,a),u=a.data;return u.setAll(I4(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,o){return k0(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function MN(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=A4(n.transform,s||null);i!=null&&(r===null&&(r=bs.empty()),r.set(n.field,i))}return r||null}function zE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Tc(n,s,(i,a)=>FN(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tf extends _p{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class yo extends _p{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function I4(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function KE(t,e,r){const n=new Map;pr(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,PN(a,o,r[s]))}return n}function qE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,DN(i,a,e))}return n}class bp extends _p{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LN extends _p{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ON(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Wu(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Wu(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=b4();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=k4(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Ot.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),qt())}isEqual(e){return this.batchId===e.batchId&&Tc(this.mutations,e.mutations,(r,n)=>zE(r,n))&&Tc(this.baseMutations,e.baseMutations,(r,n)=>zE(r,n))}}class uy{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){pr(e.mutations.length===n.length);let s=function(){return TN}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new uy(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qr,tr;function VN(t){switch(t){default:return Pt();case Ge.CANCELLED:case Ge.UNKNOWN:case Ge.DEADLINE_EXCEEDED:case Ge.RESOURCE_EXHAUSTED:case Ge.INTERNAL:case Ge.UNAVAILABLE:case Ge.UNAUTHENTICATED:return!1;case Ge.INVALID_ARGUMENT:case Ge.NOT_FOUND:case Ge.ALREADY_EXISTS:case Ge.PERMISSION_DENIED:case Ge.FAILED_PRECONDITION:case Ge.ABORTED:case Ge.OUT_OF_RANGE:case Ge.UNIMPLEMENTED:case Ge.DATA_LOSS:return!0}}function D4(t){if(t===void 0)return Ai("GRPC error has no .code"),Ge.UNKNOWN;switch(t){case Qr.OK:return Ge.OK;case Qr.CANCELLED:return Ge.CANCELLED;case Qr.UNKNOWN:return Ge.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return Ge.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return Ge.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return Ge.INTERNAL;case Qr.UNAVAILABLE:return Ge.UNAVAILABLE;case Qr.UNAUTHENTICATED:return Ge.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return Ge.INVALID_ARGUMENT;case Qr.NOT_FOUND:return Ge.NOT_FOUND;case Qr.ALREADY_EXISTS:return Ge.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return Ge.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return Ge.FAILED_PRECONDITION;case Qr.ABORTED:return Ge.ABORTED;case Qr.OUT_OF_RANGE:return Ge.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return Ge.UNIMPLEMENTED;case Qr.DATA_LOSS:return Ge.DATA_LOSS;default:return Pt()}}(tr=Qr||(Qr={}))[tr.OK=0]="OK",tr[tr.CANCELLED=1]="CANCELLED",tr[tr.UNKNOWN=2]="UNKNOWN",tr[tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tr[tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tr[tr.NOT_FOUND=5]="NOT_FOUND",tr[tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",tr[tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",tr[tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",tr[tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tr[tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tr[tr.ABORTED=10]="ABORTED",tr[tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",tr[tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",tr[tr.INTERNAL=13]="INTERNAL",tr[tr.UNAVAILABLE=14]="UNAVAILABLE",tr[tr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=new zo([4294967295,4294967295],0);function XE(t){const e=HN().encode(t),r=new t4;return r.update(e),new Uint8Array(r.digest())}function YE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new zo([r,n],0),new zo([s,i],0)]}class dy{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Su(`Invalid padding: ${r}`);if(n<0)throw new Su(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Su(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Su(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=zo.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(zo.fromNumber(n)));return s.compare(jN)===1&&(s=new zo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=XE(e),[n,s]=YE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new dy(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=XE(e),[n,s]=YE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,rf.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Sp(Ot.min(),s,new Or(lr),Ti(),qt())}}class rf{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new rf(n,r,qt(),qt(),qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class P4{constructor(e,r){this.targetId=e,this.me=r}}class R4{constructor(e,r,n=yn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class QE{constructor(){this.fe=0,this.ge=ZE(),this.pe=yn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=qt(),r=qt(),n=qt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Pt()}}),new rf(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=ZE()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ti(),this.qe=JE(),this.Qe=new Or(lr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Pt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Sv(i))if(n===0){const a=new Et(i.path);this.Ue(r,a,zn.newNoDocument(a,Ot.min()))}else pr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=sl(n).toUint8Array()}catch(l){if(l instanceof u4)return nl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new dy(a,s,i)}catch(l){return nl(l instanceof Su?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Sv(o.target)){const l=new Et(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,zn.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=qt();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Sp(e,r,this.Qe,this.ke,n);return this.ke=Ti(),this.qe=JE(),this.Qe=new Or(lr),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new QE,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Pn(lr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||gt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new QE),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function JE(){return new Or(Et.comparator)}function ZE(){return new Or(Et.comparator)}const WN={asc:"ASCENDING",desc:"DESCENDING"},zN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KN={and:"AND",or:"OR"};class qN{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Tv(t,e){return t.useProto3Json||mp(e)?e:{value:e}}function ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XN(t,e){return ph(t,e.toTimestamp())}function Oa(t){return pr(!!t),Ot.fromTimestamp(function(r){const n=ho(r);return new nn(n.seconds,n.nanos)}(t))}function fy(t,e){return wv(t,e).canonicalString()}function wv(t,e){const r=function(s){return new Sr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function N4(t){const e=Sr.fromString(t);return pr(U4(e)),e}function Cv(t,e){return fy(t.databaseId,e.path)}function Em(t,e){const r=N4(e);if(r.get(1)!==t.databaseId.projectId)throw new nt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new nt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Et(M4(r))}function O4(t,e){return fy(t.databaseId,e)}function YN(t){const e=N4(t);return e.length===4?Sr.emptyPath():M4(e)}function kv(t){return new Sr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function M4(t){return pr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function e_(t,e,r){return{name:Cv(t,e),fields:r.value.mapValue.fields}}function QN(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Pt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(pr(u===void 0||typeof u=="string"),yn.fromBase64String(u||"")):(pr(u===void 0||u instanceof Buffer||u instanceof Uint8Array),yn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?Ge.UNKNOWN:D4(c.code);return new nt(u,c.message||"")}(a);r=new R4(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Em(t,n.document.name),i=Oa(n.document.updateTime),a=n.document.createTime?Oa(n.document.createTime):Ot.min(),o=new bs({mapValue:{fields:n.document.fields}}),l=zn.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new I0(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Em(t,n.document),i=n.readTime?Oa(n.readTime):Ot.min(),a=zn.newNoDocument(s,i),o=n.removedTargetIds||[];r=new I0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Em(t,n.document),i=n.removedTargetIds||[];r=new I0([],i,s,null)}else{if(!("filter"in e))return Pt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new $N(s,i),o=n.targetId;r=new P4(o,a)}}return r}function JN(t,e){let r;if(e instanceof tf)r={update:e_(t,e.key,e.value)};else if(e instanceof bp)r={delete:Cv(t,e.key)};else if(e instanceof yo)r={update:e_(t,e.key,e.data),updateMask:oO(e.fieldMask)};else{if(!(e instanceof LN))return Pt();r={verify:Cv(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof Td)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof wd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Cd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof hh)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Pt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:XN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Pt()}(t,e.precondition)),r}function ZN(t,e){return t&&t.length>0?(pr(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?Oa(s.updateTime):Oa(i);return a.isEqual(Ot.min())&&(a=Oa(i)),new NN(a,s.transformResults||[])}(r,e))):[]}function eO(t,e){return{documents:[O4(t,e.path)]}}function tO(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=O4(t,s);const i=function(c){if(c.length!==0)return B4(ga.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:Wl(h.field),direction:sO(h.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=Tv(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function rO(t){let e=YN(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){pr(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(f){const h=L4(f);return h instanceof ga&&p4(h)?h.getFilters():[h]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(h=>function(g){return new Ad(zl(g.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,mp(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(f){const h=!!f.before,p=f.values||[];return new Ic(p,h)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const h=!f.before,p=f.values||[];return new Ic(p,h)}(r.endAt)),EN(e,s,a,i,o,"F",l,c)}function nO(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function L4(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=zl(r.unaryFilter.field);return tn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=zl(r.unaryFilter.field);return tn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zl(r.unaryFilter.field);return tn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=zl(r.unaryFilter.field);return tn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Pt()}}(t):t.fieldFilter!==void 0?function(r){return tn.create(zl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ga.create(r.compositeFilter.filters.map(n=>L4(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Pt()}}(r.compositeFilter.op))}(t):Pt()}function sO(t){return WN[t]}function aO(t){return zN[t]}function iO(t){return KN[t]}function Wl(t){return{fieldPath:t.canonicalString()}}function zl(t){return gn.fromServerFormat(t.fieldPath)}function B4(t){return t instanceof tn?function(r){if(r.op==="=="){if($E(r.value))return{unaryFilter:{field:Wl(r.field),op:"IS_NAN"}};if(UE(r.value))return{unaryFilter:{field:Wl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if($E(r.value))return{unaryFilter:{field:Wl(r.field),op:"IS_NOT_NAN"}};if(UE(r.value))return{unaryFilter:{field:Wl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wl(r.field),op:aO(r.op),value:r.value}}}(t):t instanceof ga?function(r){const n=r.getFilters().map(s=>B4(s));return n.length===1?n[0]:{compositeFilter:{op:iO(r.op),filters:n}}}(t):Pt()}function oO(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function U4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,r,n,s,i=Ot.min(),a=Ot.min(),o=yn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.ct=e}}function cO(t){const e=rO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.un=new dO}addToCollectionParentIndex(e,r){return this.un.add(r),Xe.resolve()}getCollectionParents(e,r){return Xe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Xe.resolve()}deleteFieldIndex(e,r){return Xe.resolve()}deleteAllFieldIndexes(e){return Xe.resolve()}createTargetIndexes(e,r){return Xe.resolve()}getDocumentsMatchingTarget(e,r){return Xe.resolve(null)}getIndexType(e,r){return Xe.resolve(0)}getFieldIndexes(e,r){return Xe.resolve([])}getNextCollectionGroupToUpdate(e){return Xe.resolve(null)}getMinOffset(e,r){return Xe.resolve(fo.min())}getMinOffsetFromCollectionGroup(e,r){return Xe.resolve(fo.min())}updateCollectionGroup(e,r,n){return Xe.resolve()}updateIndexEntries(e,r){return Xe.resolve()}}class dO{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Pn(Sr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Pn(Sr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Dc(0)}static kn(){return new Dc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.changes=new Hc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Xe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Wu(n.mutation,s,Is.empty(),nn.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,qt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=qt()){const s=Uo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=bu();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Uo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,qt()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=Ti();const a=Gu(),o=function(){return Gu()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof yo)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),Wu(u.mutation,c,u.mutation.getFieldMask(),nn.now())):a.set(c.key,Is.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var f;return o.set(c,new hO(u,(f=a.get(c))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Gu();let s=new Or((a,o)=>a-o),i=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||Is.empty();u=o.applyToLocalView(c,u),n.set(l,u);const f=(s.get(o.batchId)||qt()).add(l);s=s.insert(o.batchId,f)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,f=b4();u.forEach(h=>{if(!i.has(h)){const p=k4(r.get(h),n.get(h));p!==null&&f.set(h,p),i=i.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Xe.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return Et.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):ly(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Xe.resolve(Uo());let o=-1,l=i;return a.next(c=>Xe.forEach(c,(u,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(u)?Xe.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,qt())).next(u=>({batchId:o,changes:_4(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Et(r)).next(n=>{let s=bu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=bu();return this.indexManager.getCollectionParents(e,i).next(o=>Xe.forEach(o,l=>{const c=function(f,h){return new vl(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((f,h)=>{a=a.insert(f,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,zn.newInvalidDocument(u)))});let o=bu();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Wu(u.mutation,c,Is.empty(),nn.now()),xp(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Xe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Oa(s.createTime)}}(r)),Xe.resolve()}getNamedQuery(e,r){return Xe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:cO(s.bundledQuery),readTime:Oa(s.readTime)}}(r)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.overlays=new Or(Et.comparator),this.Ir=new Map}getOverlay(e,r){return Xe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Uo();return Xe.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Xe.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Xe.resolve()}getOverlaysForCollection(e,r,n){const s=Uo(),i=r.length+1,a=new Et(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Xe.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Or((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=Uo(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Uo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Xe.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new UN(r,n));let i=this.Ir.get(r);i===void 0&&(i=qt(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return Xe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this.Tr=new Pn(fn.Er),this.dr=new Pn(fn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new fn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new fn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Et(new Sr([])),n=new fn(r,e),s=new fn(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Et(new Sr([])),n=new fn(r,e),s=new fn(r,e+1);let i=qt();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new fn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class fn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Et.comparator(e.key,r.key)||lr(e.wr,r.wr)}static Ar(e,r){return lr(e.wr,r.wr)||Et.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Pn(fn.Er)}checkEmpty(e){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new BN(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new fn(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Xe.resolve(a)}lookupMutationBatch(e,r){return Xe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Xe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new fn(r,0),s=new fn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Xe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Pn(lr);return r.forEach(s=>{const i=new fn(s,0),a=new fn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Xe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Et.isDocumentKey(i)||(i=i.child(""));const a=new fn(new Et(i),0);let o=new Pn(lr);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),Xe.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){pr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Xe.forEach(r.mutations,s=>{const i=new fn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new fn(r,0),s=this.br.firstAfterOrEqual(n);return Xe.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.Mr=e,this.docs=function(){return new Or(Et.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Xe.resolve(n?n.document.mutableCopy():zn.newInvalidDocument(r))}getEntries(e,r){let n=Ti();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():zn.newInvalidDocument(s))}),Xe.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Ti();const a=r.path,o=new Et(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||tN(eN(u),n)<=0||(s.has(u.key)||xp(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Xe.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Pt()}Or(e,r){return Xe.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new EO(this)}getSize(e){return Xe.resolve(this.size)}}class EO extends fO{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Xe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.persistence=e,this.Nr=new Hc(r=>iy(r),oy),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hy,this.targetCount=0,this.kr=Dc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Xe.resolve()}getLastRemoteSnapshotVersion(e){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Xe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Dc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Xe.resolve()}updateTargetData(e,r){return this.Kn(r),Xe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Xe.waitFor(i).next(()=>s)}getTargetCount(e){return Xe.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Xe.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Xe.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Xe.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Xe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Xe.resolve(n)}containsKey(e,r){return Xe.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,r){this.qr={},this.overlays={},this.Qr=new ny(0),this.Kr=!1,this.Kr=!0,this.$r=new vO,this.referenceDelegate=e(this),this.Ur=new _O(this),this.indexManager=new uO,this.remoteDocumentCache=function(s){return new xO(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new lO(r),this.Gr=new mO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new gO,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new yO(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){gt("MemoryPersistence","Starting transaction:",e);const s=new SO(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Xe.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class SO extends nN{constructor(e){super(),this.currentSequenceNumber=e}}class py{constructor(e){this.persistence=e,this.Jr=new hy,this.Yr=null}static Zr(e){return new py(e)}get Xr(){if(this.Yr)return this.Yr;throw Pt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Xe.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Xe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Xe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Xr,n=>{const s=Et.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Ot.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Xe.or([()=>Xe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=qt(),s=qt();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new my(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return V8()?8:sN(es())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new AO;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(lu()<=Yt.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",Gl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Xe.resolve()):(lu()<=Yt.DEBUG&&gt("QueryEngine","Query:",Gl(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(lu()<=Yt.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",Gl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Na(r))):Xe.resolve())}Yi(e,r){if(GE(r))return Xe.resolve(null);let n=Na(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=fh(r,null,"F"),n=Na(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=qt(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,fh(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return GE(r)||s.isEqual(Ot.min())?Xe.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Xe.resolve(null):(lu()<=Yt.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gl(r)),this.rs(e,a,r,Z5(s,-1)).next(o=>o))})}ts(e,r){let n=new Pn(x4(e));return r.forEach((s,i)=>{xp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return lu()<=Yt.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",Gl(r)),this.Ji.getDocumentsMatchingQuery(e,r,fo.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Or(lr),this._s=new Hc(i=>iy(i),oy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function CO(t,e,r,n){return new wO(t,e,r,n)}async function $4(t,e){const r=Lt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=qt();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function kO(t,e){const r=Lt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const f=c.batch,h=f.keys();let p=Xe.resolve();return h.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(v=>{const y=c.docVersions.get(g);pr(y!==null),v.version.compareTo(y)<0&&(f.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=qt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function V4(t){const e=Lt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function IO(t,e){const r=Lt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,f)=>{const h=s.get(f);if(!h)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,f)));let p=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(yn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),s=s.insert(f,p),function(v,y,b){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(h,p,u)&&o.push(r.Ur.updateTargetData(i,p))});let l=Ti(),c=qt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(DO(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(Ot.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(f=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Xe.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function DO(t,e,r){let n=qt(),s=qt();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Ti();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Ot.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):gt("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function PO(t,e){const r=Lt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function RO(t,e){const r=Lt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Xe.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Ji(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Iv(t,e,r){const n=Lt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ef(a))throw a;gt("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function t_(t,e,r){const n=Lt(t);let s=Ot.min(),i=qt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const f=Lt(l),h=f._s.get(u);return h!==void 0?Xe.resolve(f.os.get(h)):f.Ur.getTargetData(c,u)}(n,a,Na(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:Ot.min(),r?i:qt())).next(o=>(FO(n,bN(e),o),{documents:o,Ts:i})))}function FO(t,e,r){let n=t.us.get(e)||Ot.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class r_{constructor(){this.activeTargetIds=kN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NO{constructor(){this.so=new r_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new r_,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){gt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){gt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf=null;function _m(){return Gf===null?Gf=function(){return 268435456+Math.round(2147483648*Math.random())}():Gf++,"0x"+Gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class BO extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=_m(),l=this.xo(r,n.toUriEncodedString());gt("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(gt("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw nl("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vc}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=MO[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=_m();return new Promise((a,o)=>{const l=new r4;l.setWithCredentials(!0),l.listenOnce(n4.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case w0.NO_ERROR:const u=l.getResponseJson();gt(Bn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case w0.TIMEOUT:gt(Bn,`RPC '${e}' ${i} timed out`),o(new nt(Ge.DEADLINE_EXCEEDED,"Request time out"));break;case w0.HTTP_ERROR:const f=l.getStatus();if(gt(Bn,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const g=function(y){const b=y.toLowerCase().replace(/_/g,"-");return Object.values(Ge).indexOf(b)>=0?b:Ge.UNKNOWN}(p.status);o(new nt(g,p.message))}else o(new nt(Ge.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new nt(Ge.UNAVAILABLE,"Connection failed."));break;default:Pt()}}finally{gt(Bn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);gt(Bn,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=_m(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=i4(),o=a4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");gt(Bn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=a.createWebChannel(u,l);let h=!1,p=!1;const g=new LO({Io:y=>{p?gt(Bn,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(h||(gt(Bn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),h=!0),gt(Bn,`RPC '${e}' stream ${s} sending:`,y),f.send(y))},To:()=>f.close()}),v=(y,b,E)=>{y.listen(b,x=>{try{E(x)}catch(w){setTimeout(()=>{throw w},0)}})};return v(f,_u.EventType.OPEN,()=>{p||(gt(Bn,`RPC '${e}' stream ${s} transport opened.`),g.yo())}),v(f,_u.EventType.CLOSE,()=>{p||(p=!0,gt(Bn,`RPC '${e}' stream ${s} transport closed`),g.So())}),v(f,_u.EventType.ERROR,y=>{p||(p=!0,nl(Bn,`RPC '${e}' stream ${s} transport errored:`,y),g.So(new nt(Ge.UNAVAILABLE,"The operation could not be completed")))}),v(f,_u.EventType.MESSAGE,y=>{var b;if(!p){const E=y.data[0];pr(!!E);const x=E,w=x.error||((b=x[0])===null||b===void 0?void 0:b.error);if(w){gt(Bn,`RPC '${e}' stream ${s} received error:`,w);const R=w.status;let P=function(m){const A=Qr[m];if(A!==void 0)return D4(A)}(R),S=w.message;P===void 0&&(P=Ge.INTERNAL,S="Unknown error status: "+R+" with message "+w.message),p=!0,g.So(new nt(P,S)),f.close()}else gt(Bn,`RPC '${e}' stream ${s} received:`,E),g.bo(E)}}),v(o,s4.STAT_EVENT,y=>{y.stat===xv.PROXY?gt(Bn,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===xv.NOPROXY&&gt(Bn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){return new qN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&gt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new H4(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Ge.RESOURCE_EXHAUSTED?(Ai(r.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new nt(Ge.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return gt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(gt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UO extends j4{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=QN(this.serializer,e),n=function(i){if(!("targetChange"in i))return Ot.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ot.min():a.readTime?Oa(a.readTime):Ot.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=kv(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=Sv(l)?{documents:eO(i,l)}:{query:tO(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=F4(i,a.resumeToken);const c=Tv(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Ot.min())>0){o.readTime=ph(i,a.snapshotVersion.toTimestamp());const c=Tv(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=nO(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=kv(this.serializer),r.removeTarget=e,this.a_(r)}}class $O extends j4{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return pr(!!e.streamToken),this.lastStreamToken=e.streamToken,pr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=ZN(e.writeResults,e.commitTime),n=Oa(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=kv(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>JN(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new nt(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,wv(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new nt(Ge.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,wv(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new nt(Ge.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class HO{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ai(r),this.D_=!1):gt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{yl(this)&&(gt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Lt(l);c.L_.add(4),await nf(c),c.q_.set("Unknown"),c.L_.delete(4),await Tp(c)}(this))})}),this.q_=new HO(n,s)}}async function Tp(t){if(yl(t))for(const e of t.B_)await e(!0)}async function nf(t){for(const e of t.B_)await e(!1)}function G4(t,e){const r=Lt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),xy(r)?yy(r):jc(r).r_()&&vy(r,e))}function gy(t,e){const r=Lt(t),n=jc(r);r.N_.delete(e),n.r_()&&W4(r,e),r.N_.size===0&&(n.r_()?n.o_():yl(r)&&r.q_.set("Unknown"))}function vy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ot.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}jc(t).A_(e)}function W4(t,e){t.Q_.xe(e),jc(t).R_(e)}function yy(t){t.Q_=new GN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),jc(t).start(),t.q_.v_()}function xy(t){return yl(t)&&!jc(t).n_()&&t.N_.size>0}function yl(t){return Lt(t).L_.size===0}function z4(t){t.Q_=void 0}async function GO(t){t.q_.set("Online")}async function WO(t){t.N_.forEach((e,r)=>{vy(t,e)})}async function zO(t,e){z4(t),xy(t)?(t.q_.M_(e),yy(t)):t.q_.set("Unknown")}async function KO(t,e,r){if(t.q_.set("Online"),e instanceof R4&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){gt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await mh(t,n)}else if(e instanceof I0?t.Q_.Ke(e):e instanceof P4?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ot.min()))try{const n=await V4(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(yn.EMPTY_BYTE_STRING,u.snapshotVersion)),W4(i,l);const f=new Ji(u.target,l,c,u.sequenceNumber);vy(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){gt("RemoteStore","Failed to raise snapshot:",n),await mh(t,n)}}async function mh(t,e,r){if(!ef(e))throw e;t.L_.add(1),await nf(t),t.q_.set("Offline"),r||(r=()=>V4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{gt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Tp(t)})}function K4(t,e){return e().catch(r=>mh(t,r,e))}async function wp(t){const e=Lt(t),r=po(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qO(e);)try{const s=await PO(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,XO(e,s)}catch(s){await mh(e,s)}q4(e)&&X4(e)}function qO(t){return yl(t)&&t.O_.length<10}function XO(t,e){t.O_.push(e);const r=po(t);r.r_()&&r.V_&&r.m_(e.mutations)}function q4(t){return yl(t)&&!po(t).n_()&&t.O_.length>0}function X4(t){po(t).start()}async function YO(t){po(t).p_()}async function QO(t){const e=po(t);for(const r of t.O_)e.m_(r.mutations)}async function JO(t,e,r){const n=t.O_.shift(),s=uy.from(n,e,r);await K4(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await wp(t)}async function ZO(t,e){e&&po(t).V_&&await async function(n,s){if(function(a){return VN(a)&&a!==Ge.ABORTED}(s.code)){const i=n.O_.shift();po(n).s_(),await K4(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await wp(n)}}(t,e),q4(t)&&X4(t)}async function s_(t,e){const r=Lt(t);r.asyncQueue.verifyOperationInProgress(),gt("RemoteStore","RemoteStore received new credentials");const n=yl(r);r.L_.add(3),await nf(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Tp(r)}async function e9(t,e){const r=Lt(t);e?(r.L_.delete(2),await Tp(r)):e||(r.L_.add(2),await nf(r),r.q_.set("Unknown"))}function jc(t){return t.K_||(t.K_=function(r,n,s){const i=Lt(r);return i.w_(),new UO(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:GO.bind(null,t),Ro:WO.bind(null,t),mo:zO.bind(null,t),d_:KO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xy(t)?yy(t):t.q_.set("Unknown")):(await t.K_.stop(),z4(t))})),t.K_}function po(t){return t.U_||(t.U_=function(r,n,s){const i=Lt(r);return i.w_(),new $O(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:YO.bind(null,t),mo:ZO.bind(null,t),f_:QO.bind(null,t),g_:JO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await wp(t)):(await t.U_.stop(),t.O_.length>0&&(gt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new Ey(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(Ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _y(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),ef(t))return new nt(Ge.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Et.comparator(r.key,n.key):(r,n)=>Et.comparator(r.key,n.key),this.keyedMap=bu(),this.sortedSet=new Or(this.comparator)}static emptySet(e){return new fc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof fc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new fc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.W_=new Or(Et.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Pt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Pc{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new Pc(e,r,fc.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class r9{constructor(){this.queries=i_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Lt(r),i=s.queries;s.queries=i_(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new nt(Ge.ABORTED,"Firestore shutting down"))}}function i_(){return new Hc(t=>y4(t),yp)}async function by(t,e){const r=Lt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new t9,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=_y(a,`Initialization of query '${Gl(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&Ay(r)}async function Sy(t,e){const r=Lt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function n9(t,e){const r=Lt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&Ay(r)}function s9(t,e,r){const n=Lt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function Ay(t){t.Y_.forEach(e=>{e.next()})}var Dv,o_;(o_=Dv||(Dv={})).ea="default",o_.Cache="cache";class Ty{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Pc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Pc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Dv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.key=e}}class Q4{constructor(e){this.key=e}}class a9{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=qt(),this.mutatedKeys=qt(),this.Aa=x4(e),this.Ra=new fc(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new a_,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const h=s.get(u),p=xp(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let y=!1;h&&p?h.data.isEqual(p.data)?g!==v&&(n.track({type:3,doc:p}),y=!0):this.ga(h,p)||(n.track({type:2,doc:p}),y=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),y=!0):h&&!p&&(n.track({type:1,doc:h}),y=!0,(l||c)&&(o=!0)),y&&(p?(a=a.add(p),i=v?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,f)=>function(p,g){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pt()}};return v(p)-v(g)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new Pc(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new a_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=qt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new Q4(n))}),this.da.forEach(n=>{e.has(n)||r.push(new Y4(n))}),r}ba(e){this.Ta=e.Ts,this.da=qt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Pc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class i9{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class o9{constructor(e){this.key=e,this.va=!1}}class l9{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Hc(o=>y4(o),yp),this.Ma=new Map,this.xa=new Set,this.Oa=new Or(Et.comparator),this.Na=new Map,this.La=new hy,this.Ba={},this.ka=new Map,this.qa=Dc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function c9(t,e,r=!0){const n=nC(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await J4(n,e,r,!0),s}async function u9(t,e){const r=nC(t);await J4(r,e,!0,!1)}async function J4(t,e,r,n){const s=await RO(t.localStore,Na(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await d9(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&G4(t.remoteStore,s),o}async function d9(t,e,r,n,s){t.Ka=(f,h,p)=>async function(v,y,b,E){let x=y.view.ma(b);x.ns&&(x=await t_(v.localStore,y.query,!1).then(({documents:S})=>y.view.ma(S,x)));const w=E&&E.targetChanges.get(y.targetId),R=E&&E.targetMismatches.get(y.targetId)!=null,P=y.view.applyChanges(x,v.isPrimaryClient,w,R);return c_(v,y.targetId,P.wa),P.snapshot}(t,f,h,p);const i=await t_(t.localStore,e,!0),a=new a9(e,i.Ts),o=a.ma(i.documents),l=rf.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);c_(t,r,c.wa);const u=new i9(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function f9(t,e,r){const n=Lt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!yp(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Iv(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&gy(n.remoteStore,s.targetId),Pv(n,s.targetId)}).catch(Zd)):(Pv(n,s.targetId),await Iv(n.localStore,s.targetId,!0))}async function h9(t,e){const r=Lt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),gy(r.remoteStore,n.targetId))}async function p9(t,e,r){const n=_9(t);try{const s=await function(a,o){const l=Lt(a),c=nn.now(),u=o.reduce((p,g)=>p.add(g.key),qt());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Ti(),v=qt();return l.cs.getEntries(p,u).next(y=>{g=y,g.forEach((b,E)=>{E.isValidDocument()||(v=v.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(y=>{f=y;const b=[];for(const E of o){const x=MN(E,f.get(E.key).overlayedDocument);x!=null&&b.push(new yo(E.key,x,d4(x.value.mapValue),fs.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,b,o)}).next(y=>{h=y;const b=y.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(p,y.batchId,b)})}).then(()=>({batchId:h.batchId,changes:_4(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new Or(lr)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await sf(n,s.changes),await wp(n.remoteStore)}catch(s){const i=_y(s,"Failed to persist write");r.reject(i)}}async function Z4(t,e){const r=Lt(t);try{const n=await IO(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(pr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?pr(a.va):s.removedDocuments.size>0&&(pr(a.va),a.va=!1))}),await sf(r,n,e)}catch(n){await Zd(n)}}function l_(t,e,r){const n=Lt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Lt(a);l.onlineState=o;let c=!1;l.queries.forEach((u,f)=>{for(const h of f.j_)h.Z_(o)&&(c=!0)}),c&&Ay(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function m9(t,e,r){const n=Lt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Or(Et.comparator);a=a.insert(i,zn.newNoDocument(i,Ot.min()));const o=qt().add(i),l=new Sp(Ot.min(),new Map,new Or(lr),a,o);await Z4(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),wy(n)}else await Iv(n.localStore,e,!1).then(()=>Pv(n,e,r)).catch(Zd)}async function g9(t,e){const r=Lt(t),n=e.batch.batchId;try{const s=await kO(r.localStore,e);tC(r,n,null),eC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await sf(r,s)}catch(s){await Zd(s)}}async function v9(t,e,r){const n=Lt(t);try{const s=await function(a,o){const l=Lt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(f=>(pr(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);tC(n,e,r),eC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await sf(n,s)}catch(s){await Zd(s)}}function eC(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function tC(t,e,r){const n=Lt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Pv(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||rC(t,n)})}function rC(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(gy(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),wy(t))}function c_(t,e,r){for(const n of r)n instanceof Y4?(t.La.addReference(n.key,e),y9(t,n)):n instanceof Q4?(gt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||rC(t,n.key)):Pt()}function y9(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(gt("SyncEngine","New document in limbo: "+r),t.xa.add(n),wy(t))}function wy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Et(Sr.fromString(e)),n=t.qa.next();t.Na.set(n,new o9(r)),t.Oa=t.Oa.insert(r,n),G4(t.remoteStore,new Ji(Na(vp(r.path)),n,"TargetPurposeLimboResolution",ny.oe))}}async function sf(t,e,r){const n=Lt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const f=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=my.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=Lt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(c,h=>Xe.forEach(h.$i,p=>u.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Xe.forEach(h.Ui,p=>u.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!ef(f))throw f;gt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const h=f.targetId;if(!f.fromCache){const p=u.os.get(h),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(h,v)}}}(n.localStore,i))}async function x9(t,e){const r=Lt(t);if(!r.currentUser.isEqual(e)){gt("SyncEngine","User change. New user:",e.toKey());const n=await $4(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new nt(Ge.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await sf(r,n.hs)}}function E9(t,e){const r=Lt(t),n=r.Na.get(e);if(n&&n.va)return qt().add(n.key);{let s=qt();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function nC(t){const e=Lt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m9.bind(null,e),e.Ca.d_=n9.bind(null,e.eventManager),e.Ca.$a=s9.bind(null,e.eventManager),e}function _9(t){const e=Lt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v9.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ap(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return CO(this.persistence,new TO,e.initialUser,this.serializer)}Ga(e){return new bO(py.Zr,this.serializer)}Wa(e){return new NO}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class Rv{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>l_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=x9.bind(null,this.syncEngine),await e9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new r9}()}createDatastore(e){const r=Ap(e.databaseInfo.databaseId),n=function(i){return new BO(i)}(e.databaseInfo);return function(i,a,o,l){return new VO(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new jO(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>l_(this.syncEngine,r,0),function(){return n_.D()?new n_:new OO}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,u){const f=new l9(s,i,a,o,l,c);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Lt(s);gt("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await nf(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Rv.provider={build:()=>new Rv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=jn.UNAUTHENTICATED,this.clientId=ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{gt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(gt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=_y(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Sm(t,e){t.asyncQueue.verifyOperationInProgress(),gt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await $4(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function u_(t,e){t.asyncQueue.verifyOperationInProgress();const r=await S9(t);gt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>s_(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>s_(e.remoteStore,s)),t._onlineComponents=e}async function S9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){gt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sm(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Ge.FAILED_PRECONDITION||s.code===Ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;nl("Error using user provided cache. Falling back to memory cache: "+r),await Sm(t,new gh)}}else gt("FirestoreClient","Using default OfflineComponentProvider"),await Sm(t,new gh);return t._offlineComponents}async function sC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(gt("FirestoreClient","Using user provided OnlineComponentProvider"),await u_(t,t._uninitializedComponentsProvider._online)):(gt("FirestoreClient","Using default OnlineComponentProvider"),await u_(t,new Rv))),t._onlineComponents}function A9(t){return sC(t).then(e=>e.syncEngine)}async function vh(t){const e=await sC(t),r=e.eventManager;return r.onListen=c9.bind(null,e.syncEngine),r.onUnlisten=f9.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=u9.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=h9.bind(null,e.syncEngine),r}function T9(t,e,r={}){const n=new di;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new Cy({next:h=>{u.Za(),a.enqueueAndForget(()=>Sy(i,f));const p=h.docs.has(o);!p&&h.fromCache?c.reject(new nt(Ge.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?c.reject(new nt(Ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new Ty(vp(o.path),u,{includeMetadataChanges:!0,_a:!0});return by(i,f)}(await vh(t),t.asyncQueue,e,r,n)),n.promise}function w9(t,e,r={}){const n=new di;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new Cy({next:h=>{u.Za(),a.enqueueAndForget(()=>Sy(i,f)),h.fromCache&&l.source==="server"?c.reject(new nt(Ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new Ty(o,u,{includeMetadataChanges:!0,_a:!0});return by(i,f)}(await vh(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t,e,r){if(!r)throw new nt(Ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oC(t,e,r,n){if(e===!0&&n===!0)throw new nt(Ge.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function f_(t){if(!Et.isDocumentKey(t))throw new nt(Ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function h_(t){if(Et.isDocumentKey(t))throw new nt(Ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pt()}function Jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new nt(Ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Cp(t);throw new nt(Ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function C9(t,e){if(e<=0)throw new nt(Ge.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new nt(Ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new nt(Ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new nt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new nt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new nt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(Ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new nt(Ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p_(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new l4;switch(n.type){case"firstParty":return new q5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new nt(Ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=d_.get(r);n&&(gt("ComponentProvider","Removing Datastore"),d_.delete(r),n.terminate())}(this),Promise.resolve()}}function lC(t,e,r,n={}){var s;const i=(t=Jn(t,kp))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=jn.MOCK_USER;else{o=dw(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new nt(Ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new jn(c)}t._authCredentials=new W5(new o4(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ea(this.firestore,e,this._query)}}class Rn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class fi extends Ea{constructor(e,r,n){super(e,r,vp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new Et(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function At(t,e,...r){if(t=dr(t),iC("collection","path",e),t instanceof kp){const n=Sr.fromString(e,...r);return h_(n),new fi(t,null,n)}{if(!(t instanceof Rn||t instanceof fi))throw new nt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Sr.fromString(e,...r));return h_(n),new fi(t.firestore,null,n)}}function Ze(t,e,...r){if(t=dr(t),arguments.length===1&&(e=ry.newId()),iC("doc","path",e),t instanceof kp){const n=Sr.fromString(e,...r);return f_(n),new Rn(t,null,new Et(n))}{if(!(t instanceof Rn||t instanceof fi))throw new nt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Sr.fromString(e,...r));return f_(n),new Rn(t.firestore,t instanceof fi?t.converter:null,new Et(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new H4(this,"async_queue_retry"),this.Vu=()=>{const n=bm();n&&gt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=bm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=bm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new di;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ef(e))throw e;gt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw Ai("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=Ey.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Pt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function g_(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class va extends kp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new m_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m_(e),this._firestoreClient=void 0,await e}}}function xo(t,e){const r=typeof t=="object"?t:Xd(),n=typeof t=="string"?t:"(default)",s=qd(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=L1("firestore");i&&lC(s,...i)}return s}function Gc(t){if(t._terminated)throw new nt(Ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||k9(t),t._firestoreClient}function k9(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,u){return new oN(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,aC(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new b9(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(yn.fromBase64String(e))}catch(r){throw new nt(Ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new il(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new nt(Ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new nt(Ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new nt(Ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lr(this._lat,e._lat)||lr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9=/^__.*__$/;class D9{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new yo(e,this.data,this.fieldMask,r,this.fieldTransforms):new tf(e,this.data,r,this.fieldTransforms)}}class cC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new yo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function uC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pt()}}class ky{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ky(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return yh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uC(this.Cu)&&I9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class P9{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Ap(e)}Qu(e,r,n,s=!1){return new ky({Cu:e,methodName:r,qu:n,path:gn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zc(t){const e=t._freezeSettings(),r=Ap(t._databaseId);return new P9(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Iy(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);Py("Data must be an object, but it was:",a,n);const o=pC(n,a);let l,c;if(i.merge)l=new Is(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const h=Fv(e,f,r);if(!a.contains(h))throw new nt(Ge.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);gC(u,h)||u.push(h)}l=new Is(u),c=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=a.fieldTransforms;return new D9(new bs(o),l,c)}class Pp extends af{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pp}}class Dy extends af{_toFieldTransform(e){return new RN(e.path,new Td)}isEqual(e){return e instanceof Dy}}function dC(t,e,r,n){const s=t.Qu(1,e,r);Py("Data must be an object, but it was:",s,n);const i=[],a=bs.empty();gl(n,(l,c)=>{const u=Ry(e,l,r);c=dr(c);const f=s.Nu(u);if(c instanceof Pp)i.push(u);else{const h=of(c,f);h!=null&&(i.push(u),a.set(u,h))}});const o=new Is(i);return new cC(a,o,s.fieldTransforms)}function fC(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[Fv(e,n,r)],l=[s];if(i.length%2!=0)throw new nt(Ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(Fv(e,i[h])),l.push(i[h+1]);const c=[],u=bs.empty();for(let h=o.length-1;h>=0;--h)if(!gC(c,o[h])){const p=o[h];let g=l[h];g=dr(g);const v=a.Nu(p);if(g instanceof Pp)c.push(p);else{const y=of(g,v);y!=null&&(c.push(p),u.set(p,y))}}const f=new Is(c);return new cC(u,f,a.fieldTransforms)}function hC(t,e,r,n=!1){return of(r,t.Qu(n?4:3,e))}function of(t,e){if(mC(t=dr(t)))return Py("Unsupported field value:",e,t),pC(t,e);if(t instanceof af)return function(n,s){if(!uC(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=of(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=dr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return IN(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=nn.fromDate(n);return{timestampValue:ph(s.serializer,i)}}if(n instanceof nn){const i=new nn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ph(s.serializer,i)}}if(n instanceof Ip)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof il)return{bytesValue:F4(s.serializer,n._byteString)};if(n instanceof Rn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fy(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Dp)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return cy(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Cp(n)}`)}(t,e)}function pC(t,e){const r={};return c4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gl(t,(n,s)=>{const i=of(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function mC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nn||t instanceof Ip||t instanceof il||t instanceof Rn||t instanceof af||t instanceof Dp)}function Py(t,e,r){if(!mC(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Cp(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Fv(t,e,r){if((e=dr(e))instanceof Wc)return e._internalPath;if(typeof e=="string")return Ry(t,e);throw yh("Field path arguments must be of type string or ",t,!1,void 0,r)}const R9=new RegExp("[~\\*/\\[\\]]");function Ry(t,e,r){if(e.search(R9)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Wc(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function yh(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new nt(Ge.INVALID_ARGUMENT,o+t+l)}function gC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Rp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class F9 extends Fy{data(){return super.data()}}function Rp(t,e){return typeof e=="string"?Ry(t,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new nt(Ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ny{}class lf extends Ny{}function or(t,e,...r){let n=[];e instanceof Ny&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof Fp).length,o=i.filter(l=>l instanceof cf).length;if(a>1||a>0&&o>0)throw new nt(Ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class cf extends lf{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new cf(e,r,n)}_apply(e){const r=this._parse(e);return yC(e._query,r),new Ea(e.firestore,e.converter,Av(e._query,r))}_parse(e){const r=zc(e.firestore);return function(i,a,o,l,c,u,f){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new nt(Ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){y_(f,u);const p=[];for(const g of f)p.push(v_(l,i,g));h={arrayValue:{values:p}}}else h=v_(l,i,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||y_(f,u),h=hC(o,a,f,u==="in"||u==="not-in");return tn.create(c,u,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Ur(t,e,r){const n=e,s=Rp("where",t);return cf._create(s,n,r)}class Fp extends Ny{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Fp(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:ga.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)yC(a,l),a=Av(a,l)}(e._query,r),new Ea(e.firestore,e.converter,Av(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Np extends lf{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Np(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new nt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new nt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ad(i,a)}(e._query,this._field,this._direction);return new Ea(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new vl(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function hn(t,e="asc"){const r=e,n=Rp("orderBy",t);return Np._create(n,r)}class Op extends lf{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Op(e,r,n)}_apply(e){return new Ea(e.firestore,e.converter,fh(e._query,this._limit,this._limitType))}}function oa(t){return C9("limit",t),Op._create("limit",t,"F")}class Mp extends lf{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Mp(e,r,n)}_apply(e){const r=N9(e,this.type,this._docOrFields,this._inclusive);return new Ea(e.firestore,e.converter,function(s,i){return new vl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function xh(...t){return Mp._create("startAfter",t,!1)}function N9(t,e,r,n){if(r[0]=dr(r[0]),r[0]instanceof Fy)return function(i,a,o,l,c){if(!l)throw new nt(Ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const f of dc(i))if(f.field.isKeyField())u.push(dh(a,l.key));else{const h=l.data.field(f.field);if(gp(h))throw new nt(Ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(h)}return new Ic(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=zc(t.firestore);return function(a,o,l,c,u,f){const h=a.explicitOrderBy;if(u.length>h.length)throw new nt(Ge.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<u.length;g++){const v=u[g];if(h[g].field.isKeyField()){if(typeof v!="string")throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!ly(a)&&v.indexOf("/")!==-1)throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);const y=a.path.child(Sr.fromString(v));if(!Et.isDocumentKey(y))throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const b=new Et(y);p.push(dh(o,b))}else{const y=hC(l,c,v);p.push(y)}}return new Ic(p,f)}(t._query,t.firestore._databaseId,s,e,r,n)}}function v_(t,e,r){if(typeof(r=dr(r))=="string"){if(r==="")throw new nt(Ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ly(e)&&r.indexOf("/")!==-1)throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Sr.fromString(r));if(!Et.isDocumentKey(n))throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return dh(t,new Et(n))}if(r instanceof Rn)return dh(t,r._key);throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cp(r)}.`)}function y_(t,e){if(!Array.isArray(t)||t.length===0)throw new nt(Ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yC(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new nt(Ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new nt(Ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class xC{convertValue(e,r="none"){switch(al(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Pt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return gl(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Kr(a.doubleValue));return new Dp(i)}convertGeoPoint(e){return new Ip(Kr(e.latitude),Kr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=sy(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(bd(e));default:return null}}convertTimestamp(e){const r=ho(e);return new nn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Sr.fromString(e);pr(U4(n));const s=new wc(n.get(1),n.get(3)),i=new Et(n.popFirst(5));return s.isEqual(r)||Ai(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class My extends Fy{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Rp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class zu extends My{data(e={}){return super.data(e)}}class Ly{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Jl(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new zu(this._firestore,this._userDataWriter,n.key,n,new Jl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new nt(Ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new zu(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Jl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new zu(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Jl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:O9(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function O9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t){t=Jn(t,Rn);const e=Jn(t.firestore,va);return T9(Gc(e),t._key).then(r=>_C(e,t,r))}class By extends xC{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,r)}}function Wt(t){t=Jn(t,Ea);const e=Jn(t.firestore,va),r=Gc(e),n=new By(e);return vC(t._query),w9(r,t._query).then(s=>new Ly(e,n,t,s))}function Ht(t,e,r){t=Jn(t,Rn);const n=Jn(t.firestore,va),s=Oy(t.converter,e,r);return Kc(n,[Iy(zc(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,fs.none())])}function Lp(t,e,r,...n){t=Jn(t,Rn);const s=Jn(t.firestore,va),i=zc(s);let a;return a=typeof(e=dr(e))=="string"||e instanceof Wc?fC(i,"updateDoc",t._key,e,r,n):dC(i,"updateDoc",t._key,e),Kc(s,[a.toMutation(t._key,fs.exists(!0))])}function mo(t){return Kc(Jn(t.firestore,va),[new bp(t._key,fs.none())])}function EC(t,e){const r=Jn(t.firestore,va),n=Ze(t),s=Oy(t.converter,e);return Kc(r,[Iy(zc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,fs.exists(!1))]).then(()=>n)}function uf(t,...e){var r,n,s;t=dr(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||g_(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(g_(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,c,u;if(t instanceof Rn)c=Jn(t.firestore,va),u=vp(t._key.path),l={next:f=>{e[a]&&e[a](_C(c,t,f))},error:e[a+1],complete:e[a+2]};else{const f=Jn(t,Ea);c=Jn(f.firestore,va),u=f._query;const h=new By(c);l={next:p=>{e[a]&&e[a](new Ly(c,h,f,p))},error:e[a+1],complete:e[a+2]},vC(t._query)}return function(h,p,g,v){const y=new Cy(v),b=new Ty(p,y,g);return h.asyncQueue.enqueueAndForget(async()=>by(await vh(h),b)),()=>{y.Za(),h.asyncQueue.enqueueAndForget(async()=>Sy(await vh(h),b))}}(Gc(c),u,o,l)}function Kc(t,e){return function(n,s){const i=new di;return n.asyncQueue.enqueueAndForget(async()=>p9(await A9(n),s,i)),i.promise}(Gc(t),e)}function _C(t,e,r){const n=r.docs.get(e._key),s=new By(t);return new My(t,s,e._key,n,new Jl(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=zc(e)}set(e,r,n){this._verifyNotCommitted();const s=Am(e,this._firestore),i=Oy(s.converter,r,n),a=Iy(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,fs.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=Am(e,this._firestore);let a;return a=typeof(r=dr(r))=="string"||r instanceof Wc?fC(this._dataReader,"WriteBatch.update",i._key,r,n,s):dC(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,fs.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Am(e,this._firestore);return this._mutations=this._mutations.concat(new bp(r._key,fs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(Ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Am(t,e){if((t=dr(t)).firestore!==e)throw new nt(Ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function kn(){return new Dy("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t){return Gc(t=Jn(t,va)),new bC(t,e=>Kc(t,e))}(function(e,r=!0){(function(s){Vc=s})(ml),co(new _i("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new va(new z5(n.getProvider("auth-internal")),new Y5(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new nt(Ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wc(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),zs(NE,"4.7.3",e),zs(NE,"4.7.3","esm2017")})();const M9=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xC,Bytes:il,CollectionReference:fi,DocumentReference:Rn,DocumentSnapshot:My,FieldPath:Wc,FieldValue:af,Firestore:va,FirestoreError:nt,GeoPoint:Ip,Query:Ea,QueryCompositeFilterConstraint:Fp,QueryConstraint:lf,QueryDocumentSnapshot:zu,QueryFieldFilterConstraint:cf,QueryLimitConstraint:Op,QueryOrderByConstraint:Np,QuerySnapshot:Ly,QueryStartAtConstraint:Mp,SnapshotMetadata:Jl,Timestamp:nn,VectorValue:Dp,WriteBatch:bC,_AutoId:ry,_ByteString:yn,_DatabaseId:wc,_DocumentKey:Et,_EmptyAuthCredentialsProvider:l4,_FieldPath:gn,_cast:Jn,_logWarn:nl,_validateIsNotUsedTogether:oC,addDoc:EC,collection:At,connectFirestoreEmulator:lC,deleteDoc:mo,doc:Ze,ensureFirestoreConfigured:Gc,executeWrite:Kc,getDoc:nr,getDocs:Wt,getFirestore:xo,limit:oa,onSnapshot:uf,orderBy:hn,query:or,serverTimestamp:kn,setDoc:Ht,startAfter:xh,updateDoc:Lp,where:Ur,writeBatch:Uy},Symbol.toStringTag,{value:"Module"}));var L9="firebase",B9="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zs(L9,B9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="firebasestorage.googleapis.com",AC="storageBucket",U9=2*60*1e3,$9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends xa{constructor(e,r,n=0){super(Tm(e),`Firebase Storage: ${r} (${Tm(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jr||(jr={}));function Tm(t){return"storage/"+t}function $y(){const t="An unknown error occurred, please check the error payload for server response.";return new Wr(jr.UNKNOWN,t)}function V9(t){return new Wr(jr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function H9(t){return new Wr(jr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function j9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wr(jr.UNAUTHENTICATED,t)}function G9(){return new Wr(jr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function W9(t){return new Wr(jr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function z9(){return new Wr(jr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function K9(){return new Wr(jr.CANCELED,"User canceled the upload/download.")}function q9(t){return new Wr(jr.INVALID_URL,"Invalid URL '"+t+"'.")}function X9(t){return new Wr(jr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Y9(){return new Wr(jr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+AC+"' property when initializing the app?")}function Q9(){return new Wr(jr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function J9(t){return new Wr(jr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Eh(t){return new Wr(jr.INVALID_ARGUMENT,t)}function TC(){return new Wr(jr.APP_DELETED,"The Firebase app was deleted.")}function wC(t){return new Wr(jr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ku(t,e){return new Wr(jr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function cu(t){throw new Wr(jr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Yn.makeFromUrl(e,r)}catch{return new Yn(e,"")}if(n.path==="")return n;throw X9(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${u}/b/${s}/o${h}`,"i"),g={bucket:1,path:3},v=r===SC?"(?:storage.googleapis.com|storage.cloud.google.com)":r,y="([^?#]*)",b=new RegExp(`^https?://${v}/${s}/${y}`,"i"),x=[{regex:o,indices:l,postModify:i},{regex:p,indices:g,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<x.length;w++){const R=x[w],P=R.regex.exec(e);if(P){const S=P[R.indices.bucket];let _=P[R.indices.path];_||(_=""),n=new Yn(S,_),R.postModify(n);break}}if(n==null)throw q9(e);return n}}class Z9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t,e,r){let n=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function f(y){s=setTimeout(()=>{s=null,t(p,l())},y)}function h(){i&&clearTimeout(i)}function p(y,...b){if(c){h();return}if(y){h(),u.call(null,y,...b);return}if(l()||a){h(),u.call(null,y,...b);return}n<64&&(n*=2);let x;o===1?(o=2,x=0):x=(n+Math.random())*1e3,f(x)}let g=!1;function v(y){g||(g=!0,h(),!c&&(s!==null?(y||(o=2),clearTimeout(s),f(0)):y||(o=1)))}return f(0),i=setTimeout(()=>{a=!0,v(!0)},r),v}function tM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t){return t!==void 0}function nM(t){return typeof t=="object"&&!Array.isArray(t)}function CC(t){return typeof t=="string"||t instanceof String}function x_(t){return Vy()&&t instanceof Blob}function Vy(){return typeof Blob<"u"}function Nv(t,e,r,n){if(n<e)throw Eh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Eh(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function sM(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Ko;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ko||(Ko={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,r,n,s,i,a,o,l,c,u,f,h=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Wf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===Ko.NO_ERROR,l=i.getStatus();if(!o||aM(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Ko.ABORT;n(!1,new Wf(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Wf(c,i))})},r=(n,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());rM(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=$y();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?TC():K9();a(l)}else{const l=z9();a(l)}};this.canceled_?r(!1,new Wf(!1,null,!0)):this.backoffId_=eM(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wf{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function oM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function lM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function uM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function dM(t,e,r,n,s,i,a=!0){const o=sM(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return cM(c,e),oM(c,r),lM(c,i),uM(c,n),new iM(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function hM(...t){const e=fM();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(Vy())return new Blob(t);throw new Wr(jr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pM(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(t){if(typeof atob>"u")throw J9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wm{constructor(e,r){this.data=e,this.contentType=r||null}}function jy(t,e){switch(t){case Hs.RAW:return new wm(kC(e));case Hs.BASE64:case Hs.BASE64URL:return new wm(IC(t,e));case Hs.DATA_URL:return new wm(vM(e),yM(e))}throw $y()}function kC(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=t.charCodeAt(++r);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function gM(t){let e;try{e=decodeURIComponent(t)}catch{throw Ku(Hs.DATA_URL,"Malformed data URL.")}return kC(e)}function IC(t,e){switch(t){case Hs.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ku(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Hs.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ku(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=mM(e)}catch(s){throw s.message.includes("polyfill")?s:Ku(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class DC{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Ku(Hs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=xM(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function vM(t){const e=new DC(t);return e.base64?IC(Hs.BASE64,e.rest):gM(e.rest)}function yM(t){return new DC(t).contentType}function xM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,r){let n=0,s="";x_(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(x_(this.data_)){const n=this.data_,s=pM(n,e,r);return s===null?null:new ai(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new ai(n,!0)}}static getBlob(...e){if(Vy()){const r=e.map(n=>n instanceof ai?n.data_:n);return new ai(hM.apply(null,r))}else{const r=e.map(a=>CC(a)?jy(Hs.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new ai(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){let e;try{e=JSON.parse(t)}catch{return null}return nM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _M(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function RC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(t,e){return e}class ss{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||bM}}let zf=null;function SM(t){return!CC(t)||t.length<2?t:RC(t)}function AM(){if(zf)return zf;const t=[];t.push(new ss("bucket")),t.push(new ss("generation")),t.push(new ss("metageneration")),t.push(new ss("name","fullPath",!0));function e(i,a){return SM(a)}const r=new ss("name");r.xform=e,t.push(r);function n(i,a){return a!==void 0?Number(a):a}const s=new ss("size");return s.xform=n,t.push(s),t.push(new ss("timeCreated")),t.push(new ss("updated")),t.push(new ss("md5Hash",null,!0)),t.push(new ss("cacheControl",null,!0)),t.push(new ss("contentDisposition",null,!0)),t.push(new ss("contentEncoding",null,!0)),t.push(new ss("contentLanguage",null,!0)),t.push(new ss("contentType",null,!0)),t.push(new ss("metadata","customMetadata",!0)),zf=t,zf}function TM(t,e){function r(){const n=t.bucket,s=t.fullPath,i=new Yn(n,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function wM(t,e,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const a=r[i];n[a.local]=a.xform(n,e[a.server])}return TM(n,t),n}function CM(t,e,r){const n=PC(e);return n===null?null:wM(t,n,r)}function kM(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="prefixes",__="items";function IM(t,e,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[E_])for(const s of r[E_]){const i=s.replace(/\/$/,""),a=t._makeStorageReference(new Yn(e,i));n.prefixes.push(a)}if(r[__])for(const s of r[__]){const i=t._makeStorageReference(new Yn(e,s.name));n.items.push(i)}return n}function DM(t,e,r){const n=PC(r);return n===null?null:IM(t,e,n)}class Gy{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t){if(!t)throw $y()}function PM(t,e){function r(n,s){const i=CM(t,s,e);return FC(i!==null),i}return r}function RM(t,e){function r(n,s){const i=DM(t,e,s);return FC(i!==null),i}return r}function Wy(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=G9():s=j9():r.getStatus()===402?s=H9(t.bucket):r.getStatus()===403?s=W9(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function FM(t){const e=Wy(t);function r(n,s){let i=e(n,s);return n.getStatus()===404&&(i=V9(t.path)),i.serverResponse=s.serverResponse,i}return r}function NM(t,e,r,n,s){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",r.length>0&&(i.delimiter=r),n&&(i.pageToken=n),s&&(i.maxResults=s);const a=e.bucketOnlyServerUrl(),o=Hy(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new Gy(o,l,RM(t,e.bucket),c);return u.urlParams=i,u.errorHandler=Wy(e),u}function OM(t,e){const r=e.fullServerUrl(),n=Hy(r,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function a(l,c){}const o=new Gy(n,s,a,i);return o.successCodes=[200,204],o.errorHandler=FM(e),o}function MM(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function LM(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=MM(null,e)),n}function BM(t,e,r,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let x="";for(let w=0;w<2;w++)x=x+Math.random().toString().slice(2);return x}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=LM(e,n,s),u=kM(c,r),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=ai.getBlob(f,n,h);if(p===null)throw Q9();const g={name:c.fullPath},v=Hy(i,t.host,t._protocol),y="POST",b=t.maxUploadRetryTime,E=new Gy(v,y,PM(t,r),b);return E.urlParams=g,E.headers=a,E.body=p.uploadData(),E.errorHandler=Wy(e),E}class UM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ko.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ko.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ko.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw cu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $M extends UM{initXhr(){this.xhr_.responseType="text"}}function zy(){return new $M}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,r){this._service=e,r instanceof Yn?this._location=r:this._location=Yn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new ol(e,r)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RC(this._location.path)}get storage(){return this._service}get parent(){const e=EM(this._location.path);if(e===null)return null;const r=new Yn(this._location.bucket,e);return new ol(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw wC(e)}}function NC(t,e,r){t._throwIfRoot("uploadBytes");const n=BM(t.storage,t._location,AM(),new ai(e,!0),r);return t.storage.makeRequestWithTokens(n,zy).then(s=>({metadata:s,ref:t}))}function VM(t,e,r=Hs.RAW,n){t._throwIfRoot("uploadString");const s=jy(r,e),i=Object.assign({},n);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),NC(t,s.data,i)}function HM(t){const e={prefixes:[],items:[]};return OC(t,e).then(()=>e)}async function OC(t,e,r){const s=await jM(t,{pageToken:r});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await OC(t,e,s.nextPageToken)}function jM(t,e){e!=null&&typeof e.maxResults=="number"&&Nv("options.maxResults",1,1e3,e.maxResults);const r=e||{},n=NM(t.storage,t._location,"/",r.pageToken,r.maxResults);return t.storage.makeRequestWithTokens(n,zy)}function GM(t){t._throwIfRoot("deleteObject");const e=OM(t.storage,t._location);return t.storage.makeRequestWithTokens(e,zy)}function WM(t,e){const r=_M(t._location.path,e),n=new Yn(t._location.bucket,r);return new ol(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){return/^[A-Za-z]+:\/\//.test(t)}function KM(t,e){return new ol(t,e)}function MC(t,e){if(t instanceof Ky){const r=t;if(r._bucket==null)throw Y9();const n=new ol(r,r._bucket);return e!=null?MC(n,e):n}else return e!==void 0?WM(t,e):t}function qM(t,e){if(e&&zM(e)){if(t instanceof Ky)return KM(t,e);throw Eh("To use ref(service, url), the first argument must be a Storage instance.")}else return MC(t,e)}function b_(t,e){const r=e==null?void 0:e[AC];return r==null?null:Yn.makeFromBucketSpec(r,t)}function XM(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:dw(s,t.app.options.projectId))}class Ky{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=SC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=U9,this._maxUploadRetryTime=$9,this._requests=new Set,s!=null?this._bucket=Yn.makeFromBucketSpec(s,this._host):this._bucket=b_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=b_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Nv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Nv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ol(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new Z9(TC());{const a=dM(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const S_="@firebase/storage",A_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="storage";function BC(t,e,r){return t=dr(t),NC(t,e,r)}function UC(t,e,r,n){return t=dr(t),VM(t,e,r,n)}function $C(t){return t=dr(t),HM(t)}function Ov(t){return t=dr(t),GM(t)}function _h(t,e){return t=dr(t),qM(t,e)}function VC(t=Xd(),e){t=dr(t);const n=qd(t,LC).getImmediate({identifier:e}),s=L1("storage");return s&&HC(n,...s),n}function HC(t,e,r,n={}){XM(t,e,r,n)}function YM(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ky(r,n,s,e,ml)}function QM(){co(new _i(LC,YM,"PUBLIC").setMultipleInstances(!0)),zs(S_,A_,""),zs(S_,A_,"esm2017")}QM();const JM=Object.freeze(Object.defineProperty({__proto__:null,StorageError:Wr,get StorageErrorCode(){return jr},StringFormat:Hs,_FbsBlob:ai,_Location:Yn,_dataFromString:jy,_invalidArgument:Eh,_invalidRootOperation:wC,connectStorageEmulator:HC,deleteObject:Ov,getStorage:VC,listAll:$C,ref:_h,uploadBytes:BC,uploadString:UC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="type.googleapis.com/google.protobuf.Int64Value",eL="type.googleapis.com/google.protobuf.UInt64Value";function jC(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function Mv(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Mv(e));if(typeof t=="function"||typeof t=="object")return jC(t,e=>Mv(e));throw new Error("Data cannot be encoded in JSON: "+t)}function bh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case ZM:case eL:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>bh(e)):typeof t=="function"||typeof t=="object"?jC(t,e=>bh(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hc extends xa{constructor(e,r,n){super(`${qy}/${e}`,r||""),this.details=n}}function tL(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function rL(t,e){let r=tL(t),n=r,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!T_[a])return new hc("internal","internal");r=T_[a],n=a}const o=i.message;typeof o=="string"&&(n=o),s=i.details,s!==void 0&&(s=bh(s))}}catch{}return r==="ok"?null:new hc(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="us-central1";function sL(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new hc("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class aL{constructor(e,r,n,s,i=Lv,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new nL(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Lv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function iL(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function oL(t,e,r){return n=>cL(t,e,n,r||{})}async function lL(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function cL(t,e,r,n){const s=t._url(e);return uL(t,s,r,n)}async function uL(t,e,r,n){r=Mv(r);const s={data:r},i={},a=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,l=sL(o),c=await Promise.race([lL(e,s,i,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new hc("cancelled","Firebase Functions instance was deleted.");const u=rL(c.status,c.json);if(u)throw u;if(!c.json)throw new hc("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new hc("internal","Response is missing data field.");return{data:bh(f)}}const w_="@firebase/functions",C_="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="auth-internal",fL="app-check-internal",hL="messaging-internal";function pL(t,e){const r=(n,{instanceIdentifier:s})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(dL),o=n.getProvider(hL),l=n.getProvider(fL);return new aL(i,a,o,l,s,t)};co(new _i(qy,r,"PUBLIC").setMultipleInstances(!0)),zs(w_,C_,e),zs(w_,C_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t=Xd(),e=Lv){const n=qd(dr(t),qy).getImmediate({identifier:e}),s=L1("functions");return s&&GC(n,...s),n}function GC(t,e,r){iL(dr(t),e,r)}function Pa(t,e,r){return oL(dr(t),e,r)}pL(fetch.bind(self));const D0=Object.freeze(Object.defineProperty({__proto__:null,connectFunctionsEmulator:GC,getFunctions:pc,httpsCallable:Pa},Symbol.toStringTag,{value:"Module"})),Xy={apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",authDomain:"casemangervue.firebaseapp.com",projectId:"casemangervue",storageBucket:"casemangervue.firebasestorage.app",messagingSenderId:"756483333257",appId:"1:756483333257:web:694e2ad2415b7886563a58",measurementId:"G-YBRDQX9NFR"},Bp=pw(Xy),dt=tl(Bp);dt.setPersistence(Y1).then(()=>{console.log(" Firebase auth persistence set to LOCAL - each tab maintains independent auth state")}).catch(t=>{console.error(" Error setting auth persistence:",t)});const qe=xo(Bp),Rc=VC(Bp),WC=pc(Bp),Yy=new ia,zC=async()=>{try{const t=await fetch(`https://oauth2.googleapis.com/tokeninfo?client_id=${Xy.appId.split(":")[1]}`,{method:"GET"});if(t.ok){const e=await t.json();return!e.error&&(e.aud&&!e.aud.includes("apps.googleusercontent.com")||e.client_type==="confidential")?(Yy.addScope("https://www.googleapis.com/auth/gmail.compose"),console.log(" Internal OAuth detected - Gmail scope added"),!0):(console.log(" Public OAuth detected - Gmail scope not added"),!1)}}catch(t){console.warn(" Could not determine OAuth type:",t)}return!1};zC();console.log(" Connected to Firebase project:",Xy.projectId);const Qy=Object.freeze(Object.defineProperty({__proto__:null,auth:dt,checkAndAddGmailScope:zC,db:qe,functions:WC,googleProvider:Yy,storage:Rc},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Kl=typeof document<"u";function KC(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function mL(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&KC(t.default)}const fr=Object.assign;function Cm(t,e){const r={};for(const n in e){const s=e[n];r[n]=ya(s)?s.map(t):t(s)}return r}const qu=()=>{},ya=Array.isArray,qC=/#/g,gL=/&/g,vL=/\//g,yL=/=/g,xL=/\?/g,XC=/\+/g,EL=/%5B/g,_L=/%5D/g,YC=/%5E/g,bL=/%60/g,QC=/%7B/g,SL=/%7C/g,JC=/%7D/g,AL=/%20/g;function Jy(t){return encodeURI(""+t).replace(SL,"|").replace(EL,"[").replace(_L,"]")}function TL(t){return Jy(t).replace(QC,"{").replace(JC,"}").replace(YC,"^")}function Bv(t){return Jy(t).replace(XC,"%2B").replace(AL,"+").replace(qC,"%23").replace(gL,"%26").replace(bL,"`").replace(QC,"{").replace(JC,"}").replace(YC,"^")}function wL(t){return Bv(t).replace(yL,"%3D")}function CL(t){return Jy(t).replace(qC,"%23").replace(xL,"%3F")}function kL(t){return t==null?"":CL(t).replace(vL,"%2F")}function kd(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const IL=/\/$/,DL=t=>t.replace(IL,"");function km(t,e,r="/"){let n,s={},i="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=e.slice(0,l),i=e.slice(l+1,o>-1?o:e.length),s=t(i)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=NL(n??e,r),{fullPath:n+(i&&"?")+i+a,path:n,query:s,hash:kd(a)}}function PL(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function k_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function RL(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&Fc(e.matched[n],r.matched[s])&&ZC(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function Fc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function ZC(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!FL(t[r],e[r]))return!1;return!0}function FL(t,e){return ya(t)?I_(t,e):ya(e)?I_(e,t):t===e}function I_(t,e){return ya(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function NL(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const Bi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Id;(function(t){t.pop="pop",t.push="push"})(Id||(Id={}));var Xu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Xu||(Xu={}));function OL(t){if(!t)if(Kl){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),DL(t)}const ML=/^[^#]+#/;function LL(t,e){return t.replace(ML,"#")+e}function BL(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const Up=()=>({left:window.scrollX,top:window.scrollY});function UL(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=BL(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function D_(t,e){return(history.state?history.state.position-e:-1)+t}const Uv=new Map;function $L(t,e){Uv.set(t,e)}function VL(t){const e=Uv.get(t);return Uv.delete(t),e}let HL=()=>location.protocol+"//"+location.host;function ek(t,e){const{pathname:r,search:n,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),k_(l,"")}return k_(r,t)+n+s}function jL(t,e,r,n){let s=[],i=[],a=null;const o=({state:h})=>{const p=ek(t,location),g=r.value,v=e.value;let y=0;if(h){if(r.value=p,e.value=h,a&&a===g){a=null;return}y=v?h.position-v.position:0}else n(p);s.forEach(b=>{b(r.value,g,{delta:y,type:Id.pop,direction:y?y>0?Xu.forward:Xu.back:Xu.unknown})})};function l(){a=r.value}function c(h){s.push(h);const p=()=>{const g=s.indexOf(h);g>-1&&s.splice(g,1)};return i.push(p),p}function u(){const{history:h}=window;h.state&&h.replaceState(fr({},h.state,{scroll:Up()}),"")}function f(){for(const h of i)h();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function P_(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?Up():null}}function GL(t){const{history:e,location:r}=window,n={value:ek(t,r)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const f=t.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?t:t.slice(f))+l:HL()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),s.value=c}catch(p){console.error(p),r[u?"replace":"assign"](h)}}function a(l,c){const u=fr({},e.state,P_(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),n.value=l}function o(l,c){const u=fr({},s.value,e.state,{forward:l,scroll:Up()});i(u.current,u,!0);const f=fr({},P_(n.value,l,null),{position:u.position+1},c);i(l,f,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function WL(t){t=OL(t);const e=GL(t),r=jL(t,e.state,e.location,e.replace);function n(i,a=!0){a||r.pauseListeners(),history.go(i)}const s=fr({location:"",base:t,go:n,createHref:LL.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function zL(t){return typeof t=="string"||t&&typeof t=="object"}function tk(t){return typeof t=="string"||typeof t=="symbol"}const rk=Symbol("");var R_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(R_||(R_={}));function Nc(t,e){return fr(new Error,{type:t,[rk]:!0},e)}function Ya(t,e){return t instanceof Error&&rk in t&&(e==null||!!(t.type&e))}const F_="[^/]+?",KL={sensitive:!1,strict:!1,start:!0,end:!0},qL=/[.+*?^${}()[\]/\\]/g;function XL(t,e){const r=fr({},KL,e),n=[];let s=r.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(s+="/");for(let f=0;f<c.length;f++){const h=c[f];let p=40+(r.sensitive?.25:0);if(h.type===0)f||(s+="/"),s+=h.value.replace(qL,"\\$&"),p+=40;else if(h.type===1){const{value:g,repeatable:v,optional:y,regexp:b}=h;i.push({name:g,repeatable:v,optional:y});const E=b||F_;if(E!==F_){p+=10;try{new RegExp(`(${E})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${E}): `+w.message)}}let x=v?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;f||(x=y&&c.length<2?`(?:/${x})`:"/"+x),y&&(x+="?"),s+=x,p+=20,y&&(p+=-8),v&&(p+=-20),E===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,r.sensitive?"":"i");function o(c){const u=c.match(a),f={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",g=i[h-1];f[g.name]=p&&g.repeatable?p.split("/"):p}return f}function l(c){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:g,repeatable:v,optional:y}=p,b=g in c?c[g]:"";if(ya(b)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const E=ya(b)?b.join("/"):b;if(!E)if(y)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=E}}return u||"/"}return{re:a,score:n,keys:i,parse:o,stringify:l}}function YL(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function nk(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const i=YL(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(N_(n))return 1;if(N_(s))return-1}return s.length-n.length}function N_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const QL={type:0,value:""},JL=/[a-zA-Z0-9_]/;function ZL(t){if(!t)return[[]];if(t==="/")return[[QL]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=0,n=r;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,c="",u="";function f(){c&&(r===0?i.push({type:0,value:c}):r===1||r===2||r===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&f(),a()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:JL.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),a(),s}function eB(t,e,r){const n=XL(ZL(t.path),r),s=fr(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function tB(t,e){const r=[],n=new Map;e=B_({strict:!1,end:!0,sensitive:!1},e);function s(f){return n.get(f)}function i(f,h,p){const g=!p,v=M_(f);v.aliasOf=p&&p.record;const y=B_(e,f),b=[v];if("alias"in f){const w=typeof f.alias=="string"?[f.alias]:f.alias;for(const R of w)b.push(M_(fr({},v,{components:p?p.record.components:v.components,path:R,aliasOf:p?p.record:v})))}let E,x;for(const w of b){const{path:R}=w;if(h&&R[0]!=="/"){const P=h.record.path,S=P[P.length-1]==="/"?"":"/";w.path=h.record.path+(R&&S+R)}if(E=eB(w,h,y),p?p.alias.push(E):(x=x||E,x!==E&&x.alias.push(E),g&&f.name&&!L_(E)&&a(f.name)),sk(E)&&l(E),v.children){const P=v.children;for(let S=0;S<P.length;S++)i(P[S],E,p&&p.children[S])}p=p||E}return x?()=>{a(x)}:qu}function a(f){if(tk(f)){const h=n.get(f);h&&(n.delete(f),r.splice(r.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=r.indexOf(f);h>-1&&(r.splice(h,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function o(){return r}function l(f){const h=sB(f,r);r.splice(h,0,f),f.record.name&&!L_(f)&&n.set(f.record.name,f)}function c(f,h){let p,g={},v,y;if("name"in f&&f.name){if(p=n.get(f.name),!p)throw Nc(1,{location:f});y=p.record.name,g=fr(O_(h.params,p.keys.filter(x=>!x.optional).concat(p.parent?p.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),f.params&&O_(f.params,p.keys.map(x=>x.name))),v=p.stringify(g)}else if(f.path!=null)v=f.path,p=r.find(x=>x.re.test(v)),p&&(g=p.parse(v),y=p.record.name);else{if(p=h.name?n.get(h.name):r.find(x=>x.re.test(h.path)),!p)throw Nc(1,{location:f,currentLocation:h});y=p.record.name,g=fr({},h.params,f.params),v=p.stringify(g)}const b=[];let E=p;for(;E;)b.unshift(E.record),E=E.parent;return{name:y,path:v,params:g,matched:b,meta:nB(b)}}t.forEach(f=>i(f));function u(){r.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:a,clearRoutes:u,getRoutes:o,getRecordMatcher:s}}function O_(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function M_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:rB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function rB(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function L_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function nB(t){return t.reduce((e,r)=>fr(e,r.meta),{})}function B_(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function sB(t,e){let r=0,n=e.length;for(;r!==n;){const i=r+n>>1;nk(t,e[i])<0?n=i:r=i+1}const s=aB(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function aB(t){let e=t;for(;e=e.parent;)if(sk(e)&&nk(t,e)===0)return e}function sk({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function iB(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(XC," "),a=i.indexOf("="),o=kd(a<0?i:i.slice(0,a)),l=a<0?null:kd(i.slice(a+1));if(o in e){let c=e[o];ya(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function U_(t){let e="";for(let r in t){const n=t[r];if(r=wL(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(ya(n)?n.map(i=>i&&Bv(i)):[n&&Bv(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function oB(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=ya(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const lB=Symbol(""),$_=Symbol(""),$p=Symbol(""),Zy=Symbol(""),$v=Symbol("");function uu(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Ki(t,e,r,n,s,i=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const c=h=>{h===!1?l(Nc(4,{from:r,to:e})):h instanceof Error?l(h):zL(h)?l(Nc(2,{from:e,to:h})):(a&&n.enterCallbacks[s]===a&&typeof h=="function"&&a.push(h),o())},u=i(()=>t.call(n&&n.instances[s],e,r,c));let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(h=>l(h))})}function Im(t,e,r,n,s=i=>i()){const i=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(KC(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ki(u,r,n,a,o,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const f=mL(u)?u.default:u;a.mods[o]=u,a.components[o]=f;const p=(f.__vccOpts||f)[e];return p&&Ki(p,r,n,a,o,s)()}))}}return i}function V_(t){const e=Rs($p),r=Rs(Zy),n=be(()=>{const l=K(t.to);return e.resolve(l)}),s=be(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],f=r.matched;if(!u||!f.length)return-1;const h=f.findIndex(Fc.bind(null,u));if(h>-1)return h;const p=H_(l[c-2]);return c>1&&H_(u)===p&&f[f.length-1].path!==p?f.findIndex(Fc.bind(null,l[c-2])):h}),i=be(()=>s.value>-1&&hB(r.params,n.value.params)),a=be(()=>s.value>-1&&s.value===r.matched.length-1&&ZC(r.params,n.value.params));function o(l={}){if(fB(l)){const c=e[K(t.replace)?"replace":"push"](K(t.to)).catch(qu);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:be(()=>n.value.href),isActive:i,isExactActive:a,navigate:o}}function cB(t){return t.length===1?t[0]:t}const uB=Hd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:V_,setup(t,{slots:e}){const r=Ns(V_(t)),{options:n}=Rs($p),s=be(()=>({[j_(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[j_(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&cB(e.default(r));return t.custom?i:el("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),dB=uB;function fB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function hB(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!ya(s)||s.length!==n.length||n.some((i,a)=>i!==s[a]))return!1}return!0}function H_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const j_=(t,e,r)=>t??e??r,pB=Hd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=Rs($v),s=be(()=>t.route||n.value),i=Rs($_,0),a=be(()=>{let c=K(i);const{matched:u}=s.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),o=be(()=>s.value.matched[a.value]);Bu($_,be(()=>a.value+1)),Bu(lB,o),Bu($v,s);const l=se();return $t(()=>[l.value,o.value,t.name],([c,u,f],[h,p,g])=>{u&&(u.instances[f]=c,p&&p!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Fc(u,p)||!h)&&(u.enterCallbacks[f]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,f=o.value,h=f&&f.components[u];if(!h)return G_(r.default,{Component:h,route:c});const p=f.props[u],g=p?p===!0?c.params:typeof p=="function"?p(c):p:null,y=el(h,fr({},g,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return G_(r.default,{Component:y,route:c})||y}}});function G_(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const mB=pB;function gB(t){const e=tB(t.routes,t),r=t.parseQuery||iB,n=t.stringifyQuery||U_,s=t.history,i=uu(),a=uu(),o=uu(),l=E1(Bi);let c=Bi;Kl&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Cm.bind(null,ae=>""+ae),f=Cm.bind(null,kL),h=Cm.bind(null,kd);function p(ae,ce){let te,Z;return tk(ae)?(te=e.getRecordMatcher(ae),Z=ce):Z=ae,e.addRoute(Z,te)}function g(ae){const ce=e.getRecordMatcher(ae);ce&&e.removeRoute(ce)}function v(){return e.getRoutes().map(ae=>ae.record)}function y(ae){return!!e.getRecordMatcher(ae)}function b(ae,ce){if(ce=fr({},ce||l.value),typeof ae=="string"){const Q=km(r,ae,ce.path),fe=e.resolve({path:Q.path},ce),ye=s.createHref(Q.fullPath);return fr(Q,fe,{params:h(fe.params),hash:kd(Q.hash),redirectedFrom:void 0,href:ye})}let te;if(ae.path!=null)te=fr({},ae,{path:km(r,ae.path,ce.path).path});else{const Q=fr({},ae.params);for(const fe in Q)Q[fe]==null&&delete Q[fe];te=fr({},ae,{params:f(Q)}),ce.params=f(ce.params)}const Z=e.resolve(te,ce),xe=ae.hash||"";Z.params=u(h(Z.params));const J=PL(n,fr({},ae,{hash:TL(xe),path:Z.path})),Y=s.createHref(J);return fr({fullPath:J,hash:xe,query:n===U_?oB(ae.query):ae.query||{}},Z,{redirectedFrom:void 0,href:Y})}function E(ae){return typeof ae=="string"?km(r,ae,l.value.path):fr({},ae)}function x(ae,ce){if(c!==ae)return Nc(8,{from:ce,to:ae})}function w(ae){return S(ae)}function R(ae){return w(fr(E(ae),{replace:!0}))}function P(ae){const ce=ae.matched[ae.matched.length-1];if(ce&&ce.redirect){const{redirect:te}=ce;let Z=typeof te=="function"?te(ae):te;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=E(Z):{path:Z},Z.params={}),fr({query:ae.query,hash:ae.hash,params:Z.path!=null?{}:ae.params},Z)}}function S(ae,ce){const te=c=b(ae),Z=l.value,xe=ae.state,J=ae.force,Y=ae.replace===!0,Q=P(te);if(Q)return S(fr(E(Q),{state:typeof Q=="object"?fr({},xe,Q.state):xe,force:J,replace:Y}),ce||te);const fe=te;fe.redirectedFrom=ce;let ye;return!J&&RL(n,Z,te)&&(ye=Nc(16,{to:fe,from:Z}),H(Z,Z,!0,!1)),(ye?Promise.resolve(ye):A(fe,Z)).catch(ie=>Ya(ie)?Ya(ie,2)?ie:z(ie):L(ie,fe,Z)).then(ie=>{if(ie){if(Ya(ie,2))return S(fr({replace:Y},E(ie.to),{state:typeof ie.to=="object"?fr({},xe,ie.to.state):xe,force:J}),ce||fe)}else ie=I(fe,Z,!0,Y,xe);return k(fe,Z,ie),ie})}function _(ae,ce){const te=x(ae,ce);return te?Promise.reject(te):Promise.resolve()}function m(ae){const ce=G.values().next().value;return ce&&typeof ce.runWithContext=="function"?ce.runWithContext(ae):ae()}function A(ae,ce){let te;const[Z,xe,J]=vB(ae,ce);te=Im(Z.reverse(),"beforeRouteLeave",ae,ce);for(const Q of Z)Q.leaveGuards.forEach(fe=>{te.push(Ki(fe,ae,ce))});const Y=_.bind(null,ae,ce);return te.push(Y),de(te).then(()=>{te=[];for(const Q of i.list())te.push(Ki(Q,ae,ce));return te.push(Y),de(te)}).then(()=>{te=Im(xe,"beforeRouteUpdate",ae,ce);for(const Q of xe)Q.updateGuards.forEach(fe=>{te.push(Ki(fe,ae,ce))});return te.push(Y),de(te)}).then(()=>{te=[];for(const Q of J)if(Q.beforeEnter)if(ya(Q.beforeEnter))for(const fe of Q.beforeEnter)te.push(Ki(fe,ae,ce));else te.push(Ki(Q.beforeEnter,ae,ce));return te.push(Y),de(te)}).then(()=>(ae.matched.forEach(Q=>Q.enterCallbacks={}),te=Im(J,"beforeRouteEnter",ae,ce,m),te.push(Y),de(te))).then(()=>{te=[];for(const Q of a.list())te.push(Ki(Q,ae,ce));return te.push(Y),de(te)}).catch(Q=>Ya(Q,8)?Q:Promise.reject(Q))}function k(ae,ce,te){o.list().forEach(Z=>m(()=>Z(ae,ce,te)))}function I(ae,ce,te,Z,xe){const J=x(ae,ce);if(J)return J;const Y=ce===Bi,Q=Kl?history.state:{};te&&(Z||Y?s.replace(ae.fullPath,fr({scroll:Y&&Q&&Q.scroll},xe)):s.push(ae.fullPath,xe)),l.value=ae,H(ae,ce,te,Y),z()}let C;function M(){C||(C=s.listen((ae,ce,te)=>{if(!re.listening)return;const Z=b(ae),xe=P(Z);if(xe){S(fr(xe,{replace:!0,force:!0}),Z).catch(qu);return}c=Z;const J=l.value;Kl&&$L(D_(J.fullPath,te.delta),Up()),A(Z,J).catch(Y=>Ya(Y,12)?Y:Ya(Y,2)?(S(fr(E(Y.to),{force:!0}),Z).then(Q=>{Ya(Q,20)&&!te.delta&&te.type===Id.pop&&s.go(-1,!1)}).catch(qu),Promise.reject()):(te.delta&&s.go(-te.delta,!1),L(Y,Z,J))).then(Y=>{Y=Y||I(Z,J,!1),Y&&(te.delta&&!Ya(Y,8)?s.go(-te.delta,!1):te.type===Id.pop&&Ya(Y,20)&&s.go(-1,!1)),k(Z,J,Y)}).catch(qu)}))}let D=uu(),F=uu(),N;function L(ae,ce,te){z(ae);const Z=F.list();return Z.length?Z.forEach(xe=>xe(ae,ce,te)):console.error(ae),Promise.reject(ae)}function O(){return N&&l.value!==Bi?Promise.resolve():new Promise((ae,ce)=>{D.add([ae,ce])})}function z(ae){return N||(N=!ae,M(),D.list().forEach(([ce,te])=>ae?te(ae):ce()),D.reset()),ae}function H(ae,ce,te,Z){const{scrollBehavior:xe}=t;if(!Kl||!xe)return Promise.resolve();const J=!te&&VL(D_(ae.fullPath,0))||(Z||!te)&&history.state&&history.state.scroll||null;return pl().then(()=>xe(ae,ce,J)).then(Y=>Y&&UL(Y)).catch(Y=>L(Y,ae,ce))}const V=ae=>s.go(ae);let W;const G=new Set,re={currentRoute:l,listening:!0,addRoute:p,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:v,resolve:b,options:t,push:w,replace:R,go:V,back:()=>V(-1),forward:()=>V(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:F.add,isReady:O,install(ae){const ce=this;ae.component("RouterLink",dB),ae.component("RouterView",mB),ae.config.globalProperties.$router=ce,Object.defineProperty(ae.config.globalProperties,"$route",{enumerable:!0,get:()=>K(l)}),Kl&&!W&&l.value===Bi&&(W=!0,w(s.location).catch(xe=>{}));const te={};for(const xe in Bi)Object.defineProperty(te,xe,{get:()=>l.value[xe],enumerable:!0});ae.provide($p,ce),ae.provide(Zy,y1(te)),ae.provide($v,l);const Z=ae.unmount;G.add(ae),ae.unmount=function(){G.delete(ae),G.size<1&&(c=Bi,C&&C(),C=null,l.value=Bi,W=!1,N=!1),Z()}}};function de(ae){return ae.reduce((ce,te)=>ce.then(()=>m(te)),Promise.resolve())}return re}function vB(t,e){const r=[],n=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(t.matched.find(c=>Fc(c,o))?n.push(o):r.push(o));const l=t.matched[a];l&&(e.matched.find(c=>Fc(c,l))||s.push(l))}return[r,n,s]}function ki(){return Rs($p)}function yB(t){return Rs(Zy)}class xB{constructor(){this.enabled=!0}async logStudentAccess(e,r,n={}){if(!(!this.enabled||!dt.currentUser))try{const s=Ze(At(qe,"auditLogs"));await Ht(s,{type:"student_access",studentId:e,userId:dt.currentUser.uid,userEmail:dt.currentUser.email,action:r,details:n,timestamp:kn(),sessionId:this.getSessionId(),ipAddress:await this.getClientIP(),userAgent:navigator.userAgent})}catch(s){console.error("Audit logging failed:",s)}}async logUserManagement(e,r,n={}){if(!(!this.enabled||!dt.currentUser))try{const s=Ze(At(qe,"auditLogs"));await Ht(s,{type:"user_management",targetUserId:e,performedBy:dt.currentUser.uid,performedByEmail:dt.currentUser.email,action:r,details:n,timestamp:kn(),sessionId:this.getSessionId(),ipAddress:await this.getClientIP(),userAgent:navigator.userAgent})}catch(s){console.error("Audit logging failed:",s)}}async logSystemAccess(e,r={}){var n,s;if(this.enabled)try{const i=Ze(At(qe,"auditLogs"));await Ht(i,{type:"system_access",userId:((n=dt.currentUser)==null?void 0:n.uid)||"unknown",userEmail:((s=dt.currentUser)==null?void 0:s.email)||"unknown",action:e,details:r,timestamp:kn(),sessionId:this.getSessionId(),ipAddress:await this.getClientIP(),userAgent:navigator.userAgent})}catch(i){console.error("Audit logging failed:",i)}}async logDataExport(e,r,n={}){if(!(!this.enabled||!dt.currentUser))try{const s=Ze(At(qe,"auditLogs"));await Ht(s,{type:"data_export",exportType:e,studentIds:Array.isArray(r)?r:[r],studentCount:Array.isArray(r)?r.length:1,userId:dt.currentUser.uid,userEmail:dt.currentUser.email,details:n,timestamp:kn(),sessionId:this.getSessionId(),ipAddress:await this.getClientIP(),userAgent:navigator.userAgent})}catch(s){console.error("Audit logging failed:",s)}}getSessionId(){return sessionStorage.getItem("sessionId")||sessionStorage.setItem("sessionId",`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),sessionStorage.getItem("sessionId")}async getClientIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return"unknown"}}async generateAccessReport(e,r){try{const n=new Date(r.start),s=new Date(r.end);return{studentId:e,accessCount:0,uniqueUsers:[],actions:[],timeRange:r}}catch(n){return console.error("Report generation failed:",n),null}}}const rn=new xB,xn=sw("auth",()=>{const t=se(null),e=se(""),r=se(!0),n=ki(),s=()=>{dp(dt,async g=>{var v;if(r.value=!0,g)try{const y=await nr(Ze(qe,"users",g.uid));y.exists()?(t.value={uid:g.uid,email:g.email,name:g.displayName,...y.data()},console.log(" User authenticated:",t.value),console.log(" Setting up proactive token refresh for user:",t.value.uid),a()):(console.log(" User not found in Firestore"),t.value=null)}catch(y){console.error(" Error fetching user data:",y),console.error(" This might be due to expired token - user will be logged out"),t.value=null}else console.log(" CRITICAL: Firebase user became null - investigating cause..."),console.log(" Stack trace:",new Error().stack),console.log(" Previous user was:",((v=t.value)==null?void 0:v.email)||"None"),console.log(" Firebase auth object:",dt),console.log(" Firebase currentUser:",dt.currentUser),t.value=null,console.log(" No user authenticated"),o();r.value=!1})};let i=null;const a=()=>{o(),console.log(" setupTokenRefresh: Starting token refresh setup..."),i=setInterval(async()=>{if(console.log(" Token refresh interval triggered"),dt.currentUser){console.log(" Automatically refreshing Firebase token...");try{await f()||(console.error(" Failed to refresh token - logging user out for security"),console.log(" With IEP data, we cannot risk compromised authentication states"),await c())}catch(g){console.error(" Token refresh threw an error:",g),console.log(" Logging user out immediately for IEP data security"),await c()}}else console.log(" No current user during token refresh attempt")},2*60*1e3),console.log(" Token auto-refresh set up (every 2 minutes) - DEBUG MODE")},o=()=>{i&&(clearInterval(i),i=null,console.log(" Token auto-refresh cleared"))},l=async()=>{e.value="";try{const g=new ia,y=(await ey(dt,g)).user,b=await nr(Ze(qe,"users",y.uid));if(!b.exists()){e.value=" User not found in system.";return}t.value={uid:y.uid,email:y.email,name:y.displayName,...b.data()},n.push("/")}catch(g){console.error(" Login error:",g),e.value=g.message||"Authentication failed."}},c=async()=>{try{t.value&&await rn.logSystemAccess("logout",{userRole:t.value.role,success:!0}),console.log(" EXPLICIT LOGOUT: authStore.logout() called"),console.log(" Logout stack trace:",new Error().stack),await fp(dt),t.value=null,n.push("/login")}catch(g){console.error(" Logout error:",g),await rn.logSystemAccess("logout_error",{error:g.message,success:!1})}},u=g=>{t.value=g},f=async()=>{var g;if(console.log(" DEBUG: refreshToken() called"),console.log(" DEBUG: auth.currentUser exists?",!!dt.currentUser),console.log(" DEBUG: auth.currentUser uid:",(g=dt.currentUser)==null?void 0:g.uid),dt.currentUser)try{console.log(" DEBUG: About to call getIdToken()...");const v=await mv(dt.currentUser,!0);return console.log(" Token refreshed successfully"),console.log(" New token length:",v.length),console.log(" Token preview:",v.substring(0,50)+"..."),!0}catch(v){return console.error(" Error refreshing token:",v),console.error(" Error details:",v.code,v.message),console.error(" Error stack:",v.stack),!1}return console.log(" No current user for token refresh"),!1},h=async()=>{var g;if(console.log(" DEBUG: checkTokenValidity() called"),console.log(" DEBUG: auth.currentUser exists?",!!dt.currentUser),console.log(" DEBUG: auth.currentUser uid:",(g=dt.currentUser)==null?void 0:g.uid),!dt.currentUser)return console.log(" No current user to check token"),!1;try{console.log(" DEBUG: About to get current token...");const v=await mv(dt.currentUser,!1);return console.log(" Current token exists, length:",v.length),console.log(" Token preview:",v.substring(0,50)+"..."),!0}catch(v){return console.error(" Current token is invalid:",v),console.error(" Error details:",v.code,v.message),console.error(" Error stack:",v.stack),!1}},p=be(()=>t.value);return s(),{currentUser:t,user:p,errorMsg:e,isLoading:r,loginWithGoogle:l,logout:c,setUser:u,refreshToken:f,setupTokenRefresh:a,clearTokenRefresh:o,checkTokenValidity:h}}),EB=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:xn},Symbol.toStringTag,{value:"Module"})),mc=["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair","case_manager","teacher","service_provider","paraeducator"],_B=["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair","case_manager","teacher","service_provider","paraeducator"],du=["admin","school_admin","admin_504","sped_chair"],at={VIEW_USERS:"view_users",EDIT_USER:"edit_user",DELETE_USER:"delete_user",VIEW_STUDENTS:"view_students",EDIT_STUDENT_CM:"edit_student_CM",EDIT_STUDENT_ALL:"edit_student_All",ACCESS_ADMIN_PANEL:"access_admin_panel",MANAGE_AIDES:"manage_aides",MANAGE_SYSTEM_SETTINGS:"manage_system_settings",MANAGE_TEACHER_FEEDBACK:"manage_teacher_feedback",MANAGE_IMPORTS:"manage_imports",MANAGE_BACKUPS:"manage_backups"},ak={admin:[at.VIEW_USERS,at.EDIT_USER,at.DELETE_USER,at.VIEW_STUDENTS,at.EDIT_STUDENT_ALL,at.ACCESS_ADMIN_PANEL,at.MANAGE_AIDES,at.MANAGE_SYSTEM_SETTINGS,at.MANAGE_TEACHER_FEEDBACK,at.MANAGE_IMPORTS,at.MANAGE_BACKUPS],school_admin:[at.VIEW_USERS,at.EDIT_USER,at.DELETE_USER,at.VIEW_STUDENTS,at.EDIT_STUDENT_ALL,at.ACCESS_ADMIN_PANEL,at.MANAGE_AIDES,at.MANAGE_TEACHER_FEEDBACK,at.MANAGE_IMPORTS,at.MANAGE_BACKUPS],staff_view:[at.VIEW_USERS,at.VIEW_STUDENTS],staff_edit:[at.VIEW_USERS,at.VIEW_STUDENTS,at.EDIT_STUDENT_ALL],admin_504:[at.VIEW_USERS,at.EDIT_USER,at.DELETE_USER,at.VIEW_STUDENTS,at.EDIT_STUDENT_ALL,at.ACCESS_ADMIN_PANEL,at.MANAGE_AIDES,at.MANAGE_TEACHER_FEEDBACK],sped_chair:[at.VIEW_USERS,at.EDIT_USER,at.DELETE_USER,at.VIEW_STUDENTS,at.EDIT_STUDENT_ALL,at.ACCESS_ADMIN_PANEL,at.MANAGE_AIDES,at.MANAGE_TEACHER_FEEDBACK],case_manager:[at.VIEW_USERS,at.VIEW_STUDENTS,at.EDIT_STUDENT_CM,at.MANAGE_TEACHER_FEEDBACK],teacher:[at.VIEW_USERS,at.VIEW_STUDENTS],service_provider:[at.VIEW_USERS,at.VIEW_STUDENTS,at.EDIT_STUDENT_CM],paraeducator:[at.VIEW_USERS,at.VIEW_STUDENTS]};function W_(t){return mc.includes(t)}const bB={admin:"System Administrator - Full access to all features and settings",school_admin:"School Administrator - Manage students, aides, and users (no system settings)",staff_view:"Staff Viewer - IEP access for counselors, nurses, intervention specialists",staff_edit:"Staff Editor - Edit all students, no admin panel access",admin_504:"504 Plan Coordinator - Manage 504 plans, students, and aides",sped_chair:"Special Education Chair - Manage special education programs",case_manager:"Case Manager - Manage assigned student caseload only",teacher:"Teacher - View students in assigned classes",service_provider:"Service Provider - Manage students receiving services",paraeducator:"Paraeducator - View assigned students only"},ex=sw("permission",()=>{const t=xn(),e=se([]),r=se({}),n=se({}),s=se(!1),i=async()=>{n.value=ak,s.value=!0,console.log("Using static permissions matrix:",n.value),e.value.length>0&&(r.value=a(e.value))};function a(c){const u={};return console.log("Deriving permissions for roles:",c),console.log("Current permissions matrix:",n.value),console.log("Matrix loaded:",s.value),c.forEach(f=>{const h=n.value[f]||[];console.log(`Role ${f} has permissions:`,h),h.forEach(p=>u[p]=!0)}),console.log("Final derived permissions:",u),u}let o=null;return $t(()=>{var c;return(c=t.currentUser)==null?void 0:c.uid},()=>{var c;if(o&&o(),(c=t.currentUser)!=null&&c.uid){const u=Ze(qe,"users",t.currentUser.uid);o=uf(u,f=>{const h=f.data()||{};e.value=h.role?[h.role]:[],console.log("User roles updated:",e.value),t.currentUser&&(t.currentUser.value={...t.currentUser.value,...h},console.log(" Updated auth store user data:",t.currentUser.value)),s.value&&(r.value=a(e.value))})}else e.value=[],r.value={}},{immediate:!0}),i(),{userRoles:e,userPermissions:r,permissionsMatrix:n,matrixLoaded:s,hasRole:c=>e.value.includes(c),can:c=>r.value[c]===!0,loadPermissionsMatrix:i}});function SB(){const t=ex(),e=be(()=>t.hasRole("admin")),r=be(()=>t.can("manage_users")),n=s=>t.can(s);return{isAdmin:e,canManageUsers:r,hasRole:t.hasRole,can:t.can,hasPermission:n}}const bt=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},AB={name:"UserRoleSwitcher",setup(){const t=xn();SB();const e=se(!1),r=se(""),n=se({}),s=se(!1),i=be(()=>t.user),a=[{value:"admin",label:"Admin"},{value:"school_admin",label:"School Admin"},{value:"admin_504",label:"504 Coordinator"},{value:"sped_chair",label:"SPED Chair"},{value:"staff_view",label:"Staff (View)"},{value:"staff_edit",label:"Staff (Edit)"},{value:"case_manager",label:"Case Manager"},{value:"teacher",label:"Teacher"},{value:"service_provider",label:"Service Provider"},{value:"paraeducator",label:"Paraeducator"}],o=[{uid:"test-admin",name:"Test Admin",email:"admin@test.com",role:"admin"},{uid:"test-school-admin",name:"Test School Admin",email:"schooladmin@test.com",role:"school_admin"},{uid:"test-admin-504",name:"Test 504 Coordinator",email:"admin504@test.com",role:"admin_504"},{uid:"test-sped-chair",name:"Test SPED Chair",email:"spedchair@test.com",role:"sped_chair"},{uid:"test-case-manager",name:"Test Case Manager",email:"cm@test.com",role:"case_manager"},{uid:"test-paraeducator",name:"Test Paraeducator",email:"para@test.com",role:"paraeducator"},{uid:"test-teacher",name:"Test Teacher",email:"teacher@test.com",role:"teacher"},{uid:"test-service-provider",name:"Test Service Provider",email:"service@test.com",role:"service_provider"}],l=async()=>{s.value=!0;try{const b=Ze(qe,"config","permissions_matrix"),E=await nr(b);E.exists()?n.value=E.data():(console.warn("Permissions matrix not found in database"),n.value={})}catch(b){console.error("Error loading permissions matrix:",b),n.value={}}finally{s.value=!1}},c=be(()=>{var w;const b=[{action:at.VIEW_USERS,label:"View Users"},{action:at.EDIT_USER,label:"Edit User"},{action:at.DELETE_USER,label:"Delete User"},{action:at.MANAGE_SUBJECTS,label:"Manage Subjects"},{action:at.MANAGE_ROLES,label:"Manage Roles"},{action:at.VIEW_STUDENTS,label:"View Students"},{action:at.EDIT_STUDENT_CM,label:"Edit Students (Own Caseload)"},{action:at.EDIT_STUDENT_ALL,label:"Edit All Students"},{action:at.TESTING,label:"Testing"}],E=(w=i.value)==null?void 0:w.role,x=n.value[E]||[];return b.map(R=>({...R,granted:x.includes(R.action)}))}),u=()=>{e.value=!e.value},f=()=>{if(!r.value)return;const b={uid:`test-${r.value}-${Date.now()}`,email:`${r.value}@test.com`,name:`Test ${r.value.charAt(0).toUpperCase()+r.value.slice(1)}`,role:r.value,lastSyncTrigger:new Date().toISOString()};t.setUser(b),localStorage.setItem("debug-user",JSON.stringify(b)),r.value=""},h=b=>{t.setUser(b),localStorage.setItem("debug-user",JSON.stringify(b))},p=()=>{localStorage.removeItem("debug-user"),window.location.reload()},g=()=>{window.location.reload()};return Gt(async()=>{await l();const b=localStorage.getItem("debug-user");if(b)try{const E=JSON.parse(b);t.setUser(E)}catch(E){console.error("Error parsing debug user:",E),localStorage.removeItem("debug-user")}return()=>{}}),{canSwitchRoles:be(()=>{var E;const b=(E=i.value)==null?void 0:E.role;return["admin","administrator"].includes(b)}),hideRoleSwitcher:()=>{console.log("Role switcher hidden")},isExpanded:e,selectedRole:r,currentUser:i,availableRoles:a,testUsers:o,currentPermissions:c,loadingPermissions:s,toggleExpanded:u,switchRole:f,switchToUser:h,resetToRealUser:p,refreshPage:g}}},TB=["title"],wB={key:0,class:"debug-label"},CB={key:0,class:"switcher-content"},kB={class:"current-user-info"},IB={class:"role-selector"},DB=["value"],PB={class:"test-users"},RB={class:"test-user-buttons"},FB=["onClick"],NB={class:"permission-info"},OB={key:0,class:"loading-permissions"},MB={key:1,class:"permission-list"},LB={class:"permission-icon"},BB={class:"actions"};function UB(t,e,r,n,s,i){var a,o,l,c,u;return n.canSwitchRoles?(B(),U("div",{key:0,class:Ye(["user-role-switcher",{collapsed:!n.isExpanded}])},[d("div",{class:"switcher-header",onClick:e[1]||(e[1]=(...f)=>n.toggleExpanded&&n.toggleExpanded(...f)),title:n.isExpanded?"Collapse Debug Panel":"Expand Debug Panel"},[e[6]||(e[6]=d("span",{class:"debug-icon"},"",-1)),n.isExpanded?(B(),U("span",wB,"Debug Role Switcher")):ve("",!0),e[7]||(e[7]=d("span",{class:"beta-label"},"BETA",-1)),d("button",{onClick:e[0]||(e[0]=Xr((...f)=>n.hideRoleSwitcher&&n.hideRoleSwitcher(...f),["stop"])),class:"close-debug-btn",title:"Close Role Switcher"},"")],8,TB),n.isExpanded?(B(),U("div",CB,[e[18]||(e[18]=d("div",{class:"beta-warning"},[d("strong",null," BETA WARNING:"),we(" This debug tool is not working correctly and should be used with caution. It may not properly switch roles or could cause unexpected behavior. ")],-1)),d("div",kB,[e[8]||(e[8]=d("strong",null,"Current User:",-1)),we(" "+X(((a=n.currentUser)==null?void 0:a.name)||((o=n.currentUser)==null?void 0:o.email)||"Unknown")+" ",1),e[9]||(e[9]=d("br",null,null,-1)),e[10]||(e[10]=d("strong",null,"Role:",-1)),e[11]||(e[11]=we()),d("span",{class:Ye("role-"+((l=n.currentUser)==null?void 0:l.role))},X(((c=n.currentUser)==null?void 0:c.role)||"None"),3),e[12]||(e[12]=d("br",null,null,-1)),e[13]||(e[13]=d("strong",null,"UID:",-1)),we(" "+X(((u=n.currentUser)==null?void 0:u.uid)||"None"),1)]),d("div",IB,[e[15]||(e[15]=d("label",{for:"role-select"},"Switch to Role:",-1)),Oe(d("select",{id:"role-select","onUpdate:modelValue":e[2]||(e[2]=f=>n.selectedRole=f),onChange:e[3]||(e[3]=(...f)=>n.switchRole&&n.switchRole(...f))},[e[14]||(e[14]=d("option",{value:""},"-- Select Role --",-1)),(B(!0),U(Pe,null,He(n.availableRoles,f=>(B(),U("option",{key:f.value,value:f.value},X(f.label),9,DB))),128))],544),[[cr,n.selectedRole]])]),d("div",PB,[e[16]||(e[16]=d("h5",null,"Quick Test Users:",-1)),d("div",RB,[(B(!0),U(Pe,null,He(n.testUsers,f=>{var h;return B(),U("button",{key:f.uid,onClick:p=>n.switchToUser(f),class:Ye(["test-user-btn",{active:((h=n.currentUser)==null?void 0:h.uid)===f.uid}])},[we(X(f.name)+" ",1),d("small",null,"("+X(f.role)+")",1)],10,FB)}),128))])]),d("div",NB,[e[17]||(e[17]=d("h5",null,"Current Permissions:",-1)),n.loadingPermissions?(B(),U("div",OB," Loading permissions... ")):(B(),U("div",MB,[(B(!0),U(Pe,null,He(n.currentPermissions,f=>(B(),U("div",{key:f.action,class:Ye(["permission-item",{granted:f.granted}])},[d("span",LB,X(f.granted?"":""),1),we(" "+X(f.label),1)],2))),128))]))]),e[19]||(e[19]=Dn('<div class="testing-scenarios" data-v-26d536da><h5 data-v-26d536da> Testing Scenarios:</h5><div class="scenario-list" data-v-26d536da><div class="scenario-item" data-v-26d536da><strong data-v-26d536da>Students Page:</strong><ul data-v-26d536da><li data-v-26d536da> Can view students</li><li data-v-26d536da> Can edit own caseload (CM)</li><li data-v-26d536da> Can edit all students (Admin)</li><li data-v-26d536da> Paraeducator filter works</li></ul></div><div class="scenario-item" data-v-26d536da><strong data-v-26d536da>Admin Panel:</strong><ul data-v-26d536da><li data-v-26d536da> Users management</li><li data-v-26d536da> Permissions matrix</li><li data-v-26d536da> Aide assignments</li><li data-v-26d536da> App settings</li></ul></div><div class="scenario-item" data-v-26d536da><strong data-v-26d536da>Navigation:</strong><ul data-v-26d536da><li data-v-26d536da> Admin button visibility</li><li data-v-26d536da> My Schedule button (Para)</li><li data-v-26d536da> Role-based menu items</li></ul></div></div></div>',1)),d("div",BB,[d("button",{onClick:e[4]||(e[4]=(...f)=>n.resetToRealUser&&n.resetToRealUser(...f)),class:"reset-btn"},"  Reset to Real User "),d("button",{onClick:e[5]||(e[5]=(...f)=>n.refreshPage&&n.refreshPage(...f)),class:"refresh-btn"},"  Refresh Page ")])])):ve("",!0)],2)):ve("",!0)}const $B=bt(AB,[["render",UB],["__scopeId","data-v-26d536da"]]),VB={key:0,class:"debug-access-info"},HB={__name:"DebugAccessInfo",setup(t){const e=xn(),r=se(!1),n=be(()=>e.currentUser),s=be(()=>{var o;const a=(o=n.value)==null?void 0:o.role;return["admin","administrator"].includes(a)}),i=()=>{r.value=!1,localStorage.setItem("debug-info-hidden","true")};return Gt(()=>{const a=localStorage.getItem("debug-info-hidden");s.value&&!a&&setTimeout(()=>{r.value=!0},3e3)}),(a,o)=>r.value?(B(),U("div",VB,[d("div",{class:"debug-info-content"},[o[0]||(o[0]=d("span",{class:"debug-info-icon"},"",-1)),o[1]||(o[1]=d("span",{class:"debug-info-text"},[we("Debug tools available - Press "),d("kbd",null,"Ctrl+Shift+D")],-1)),d("button",{onClick:i,class:"debug-info-close"},"")])])):ve("",!0)}},jB=bt(HB,[["__scopeId","data-v-358a31dd"]]);class GB{constructor(){this.timeoutId=null,this.warningTimeoutId=null,this.isEnabled=se(!1),this.timeoutMinutes=se(30),this.showWarning=se(!1),this.warningCountdown=se(0),this.lastActivity=Date.now(),this.lastLogTime=null,this.router=null,this.unsubscribeSettings=null,this.activityEvents=["mousedown","mousemove","keypress","scroll","touchstart","click","keydown"],this.init()}init(){console.log(" Session timeout system initialization STARTED"),this.loadSettings(),this.setupActivityListeners(),this.setupAuthWatcher()}setupAuthWatcher(){dp(dt,e=>{e?setTimeout(()=>{this.resetTimeout()},1e3):(this.clearTimeouts(),this.hideWarning())})}async loadSettings(){try{const e=Ze(qe,"app_settings","security");this.unsubscribeSettings=uf(e,r=>{if(r.exists()){const n=r.data(),s=this.isEnabled.value;this.isEnabled.value=n.sessionTimeoutEnabled||!1,this.timeoutMinutes.value=n.sessionTimeoutMinutes||30,dt.currentUser&&this.resetTimeout()}else this.isEnabled.value=!1,this.timeoutMinutes.value=30})}catch(e){console.error("Failed to load session timeout settings:",e)}}async updateSettings(e,r){var n;try{const s=Ze(qe,"app_settings","security");await Ht(s,{sessionTimeoutEnabled:e,sessionTimeoutMinutes:r,updatedAt:new Date().toISOString(),updatedBy:(n=dt.currentUser)==null?void 0:n.uid},{merge:!0})}catch(s){console.error("Failed to update session timeout settings:",s)}}setupActivityListeners(){this.boundActivityHandler=this.handleActivity.bind(this),this.activityEvents.forEach(e=>{document.addEventListener(e,this.boundActivityHandler,!0)})}handleActivity(){if(!this.isEnabled.value)return;const e=Date.now();if(e-this.lastActivity<3e4){this.lastActivity=e;return}this.lastActivity=e,this.showWarning.value&&(this.hideWarning(),this.resetTimeout())}resetTimeout(){var i;if(console.log(" DEBUG: resetTimeout() called"),console.log(" DEBUG: isEnabled.value:",this.isEnabled.value),console.log(" DEBUG: auth.currentUser exists?",!!dt.currentUser),console.log(" DEBUG: auth.currentUser uid:",(i=dt.currentUser)==null?void 0:i.uid),!this.isEnabled.value||!dt.currentUser){console.log(" DEBUG: resetTimeout() early return - not enabled or no user");return}this.clearTimeouts();const e=Date.now(),r=Math.round(this.timeoutMinutes.value*60*1e3),n=Math.max(1e3,r-1*60*1e3);(!this.lastLogTime||e-this.lastLogTime>3e5||this.showWarning.value)&&(console.log(` Session timeout reset: ${this.timeoutMinutes.value} minutes (${r}ms), warning in ${n}ms`),this.lastLogTime=e),r>1e4&&(this.warningTimeoutId=setTimeout(()=>{console.log(" Showing session warning"),this.showSessionWarning()},n)),this.timeoutId=setTimeout(()=>{console.log(" Session timeout triggered"),this.handleSessionTimeout()},r)}showSessionWarning(){if(this.showWarning.value)return;this.showWarning.value=!0,this.warningCountdown.value=Math.min(120,Math.floor(this.timeoutMinutes.value*60/2)),console.log(` Session warning displayed, countdown: ${this.warningCountdown.value} seconds`);const e=setInterval(()=>{this.warningCountdown.value--,this.warningCountdown.value<=0&&(clearInterval(e),this.handleSessionTimeout())},1e3);this.countdownInterval=e}hideWarning(){this.showWarning.value=!1,this.warningCountdown.value=0,this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null)}async handleSessionTimeout(){var e;console.log(" DEBUG: handleSessionTimeout() called"),console.log(" DEBUG: auth.currentUser exists?",!!dt.currentUser),console.log(" DEBUG: auth.currentUser uid:",(e=dt.currentUser)==null?void 0:e.uid),console.log(" Handling session timeout");try{if(dt.currentUser){const r=Ze(qe,"auditLogs",`timeout_${Date.now()}_${dt.currentUser.uid}`);await Ht(r,{type:"session_timeout",userId:dt.currentUser.uid,userEmail:dt.currentUser.email,timeoutMinutes:this.timeoutMinutes.value,lastActivity:new Date(this.lastActivity),timestamp:new Date,userAgent:navigator.userAgent})}this.clearTimeouts(),this.hideWarning(),console.log(" SESSION TIMEOUT LOGOUT: About to call signOut()"),console.log(" Session timeout stack trace:",new Error().stack),await fp(dt),console.log(" User signed out due to session timeout"),this.router?this.router.push("/login"):window.location.href="/login"}catch(r){console.error("Error during session timeout:",r),window.location.href="/login"}}extendSession(){this.hideWarning(),this.resetTimeout()}clearTimeouts(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.warningTimeoutId&&(clearTimeout(this.warningTimeoutId),this.warningTimeoutId=null)}setRouter(e){this.router=e}destroy(){this.clearTimeouts(),this.hideWarning(),this.boundActivityHandler&&this.activityEvents.forEach(e=>{document.removeEventListener(e,this.boundActivityHandler,!0)}),this.unsubscribeSettings&&this.unsubscribeSettings()}}const Zs=new GB;function tx(){const t=ki();return Zs.setRouter(t),{isEnabled:Zs.isEnabled,timeoutMinutes:Zs.timeoutMinutes,showWarning:Zs.showWarning,warningCountdown:Zs.warningCountdown,updateSettings:Zs.updateSettings.bind(Zs),extendSession:Zs.extendSession.bind(Zs),resetTimeout:Zs.resetTimeout.bind(Zs)}}/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WB=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),zB=t=>{const e=WB(t);return e.charAt(0).toUpperCase()+e.slice(1)},KB=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=({size:t,strokeWidth:e=2,absoluteStrokeWidth:r,color:n,iconNode:s,name:i,class:a,...o},{slots:l})=>el("svg",{...Kf,width:t||Kf.width,height:t||Kf.height,stroke:n||Kf.stroke,"stroke-width":r?Number(e)*24/Number(t):e,class:KB("lucide",...i?[`lucide-${z_(zB(i))}-icon`,`lucide-${z_(i)}`]:["lucide-icon"]),...o},[...s.map(c=>el(...c)),...l.default?[l.default()]:[]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=(t,e)=>(r,{slots:n})=>el(qB,{...r,iconNode:e,name:t},n);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=_t("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=_t("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=_t("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=_t("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=_t("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=_t("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=_t("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=_t("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=_t("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=_t("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=_t("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=_t("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=_t("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=_t("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=_t("columns-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=_t("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=_t("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=_t("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=_t("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=_t("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=_t("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=_t("hand-heart",[["path",{d:"M11 14h2a2 2 0 0 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1v1a37"}],["path",{d:"m14.45 13.39 5.05-4.694C20.196 8 21 6.85 21 5.75a2.75 2.75 0 0 0-4.797-1.837.276.276 0 0 1-.406 0A2.75 2.75 0 0 0 11 5.75c0 1.2.802 2.248 1.5 2.946L16 11.95",key:"fhfbnt"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a1 1 0 0 0-2.75-2.91",key:"1x6kdw"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=_t("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=_t("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=_t("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=_t("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=_t("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=_t("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=_t("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=_t("monitor-speaker",[["path",{d:"M5.5 20H8",key:"1k40s5"}],["path",{d:"M17 9h.01",key:"1j24nn"}],["rect",{width:"10",height:"16",x:"12",y:"4",rx:"2",key:"ixliua"}],["path",{d:"M8 6H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h4",key:"1mp6e1"}],["circle",{cx:"17",cy:"15",r:"1",key:"tqvash"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=_t("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=_t("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=_t("presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=_t("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=_t("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=_t("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=_t("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=_t("school",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=_t("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=_t("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=_t("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=_t("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=_t("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=_t("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=_t("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=_t("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=_t("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=_t("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=_t("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=_t("user-pen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=_t("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=_t("user-search",[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=_t("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=_t("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=_t("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=_t("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=_t("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),T7={key:0,class:"session-timeout-overlay"},w7={class:"session-timeout-dialog"},C7={class:"dialog-header"},k7={class:"dialog-content"},I7={class:"countdown-section"},D7={class:"countdown-time"},P7={class:"info-note"},R7={class:"dialog-actions"},F7={__name:"SessionTimeoutDialog",setup(t){const e=ki(),{showWarning:r,warningCountdown:n,extendSession:s}=tx(),i=o=>{const l=Math.floor(o/60),c=o%60;return`${l}:${c.toString().padStart(2,"0")}`},a=async()=>{try{await fp(dt),e.push("/login")}catch(o){console.error("Error signing out:",o)}};return(o,l)=>K(r)?(B(),U("div",T7,[d("div",w7,[d("div",C7,[Re(K(lk),{class:"header-icon",size:24}),l[1]||(l[1]=d("h3",null,"Session Timeout",-1))]),d("div",k7,[d("div",I7,[d("div",D7,X(i(K(n))),1),l[2]||(l[2]=d("p",{class:"countdown-label"},"until automatic logout",-1))]),d("div",P7,[Re(K(l7),{size:16}),l[3]||(l[3]=d("span",null,"Any activity will extend your session",-1))])]),d("div",R7,[d("button",{onClick:l[0]||(l[0]=(...c)=>K(s)&&K(s)(...c)),class:"btn btn-primary"},[Re(K(P0),{size:16}),l[4]||(l[4]=we(" Stay Logged In "))]),d("button",{onClick:a,class:"btn btn-secondary"},[Re(K(d7),{size:16}),l[5]||(l[5]=we(" Logout Now "))])])])])):ve("",!0)}},N7=bt(F7,[["__scopeId","data-v-9d2333fd"]]),fu={primaryColor:"#1976d2",primaryHover:"#1565c0",primaryLight:"#e3f2fd",primaryDark:"#0d47a1",secondaryColor:"#6c757d",secondaryHover:"#545b62",secondaryLight:"#f8f9fa",secondaryDark:"#495057",bgPrimary:"#f4f6f9",bgSecondary:"#ffffff",bgTertiary:"#f8f9fa",bgMuted:"#e9ecef",textPrimary:"#333333",textSecondary:"#666666",textMuted:"#999999",textInverse:"#ffffff",headerTextColor:"#1a1a1a",accentColor:"#e3f2fd",borderColor:"#dee2e6",borderLight:"#e9ecef",borderDark:"#adb5bd",borderFocus:"#1976d2",successColor:"#28a745",successHover:"#218838",successLight:"#d4edda",warningColor:"#ffc107",warningHover:"#e0a800",warningLight:"#fff3cd",errorColor:"#dc3545",errorHover:"#c82333",errorLight:"#f8d7da",infoColor:"#17a2b8",infoHover:"#138496",infoLight:"#d1ecf1",adminTabBg:"#f8f9fa",adminTabActive:"#2a79c9",adminTabHover:"#e3eaf6",tableHeaderBg:"#dfe7f3",tableStripeBg:"#f8fafd",tableBorder:"#d1d1d1",tableHover:"#f0f0f0",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",shadowSm:"0 1px 2px rgba(0, 0, 0, 0.05)",shadowMd:"0 2px 4px rgba(0, 0, 0, 0.1)",shadowLg:"0 4px 6px rgba(0, 0, 0, 0.1)",shadowXl:"0 4px 20px rgba(0, 0, 0, 0.3)",fontFamilyBase:"'Inter', 'Segoe UI', 'Arial', sans-serif",fontSizeXs:"0.75rem",fontSizeSm:"0.875rem",fontSizeBase:"1rem",fontSizeLg:"1.125rem",fontSizeXl:"1.25rem",fontSizeXxl:"1.5rem",borderStyle:"rounded",shadowStyle:"subtle",contrastLevel:"standard",lineHeight:"1.5"},X_={primaryColor:"--primary-color",primaryHover:"--primary-hover",primaryLight:"--primary-light",primaryDark:"--primary-dark",secondaryColor:"--secondary-color",secondaryHover:"--secondary-hover",secondaryLight:"--secondary-light",secondaryDark:"--secondary-dark",bgPrimary:"--bg-primary",bgSecondary:"--bg-secondary",bgTertiary:"--bg-tertiary",bgMuted:"--bg-muted",textPrimary:"--text-primary",textSecondary:"--text-secondary",textMuted:"--text-muted",textInverse:"--text-inverse",headerTextColor:"--header-text-color",accentColor:"--accent-color",borderColor:"--border-color",borderLight:"--border-light",borderDark:"--border-dark",borderFocus:"--border-focus",successColor:"--success-color",successHover:"--success-hover",successLight:"--success-light",warningColor:"--warning-color",warningHover:"--warning-hover",warningLight:"--warning-light",errorColor:"--error-color",errorHover:"--error-hover",errorLight:"--error-light",infoColor:"--info-color",infoHover:"--info-hover",infoLight:"--info-light",adminTabBg:"--admin-tab-bg",adminTabActive:"--admin-tab-active",adminTabHover:"--admin-tab-hover",tableHeaderBg:"--table-header-bg",tableStripeBg:"--table-stripe-bg",tableBorder:"--table-border",tableHover:"--table-hover",borderRadiusSm:"--border-radius-sm",borderRadiusMd:"--border-radius-md",borderRadiusLg:"--border-radius-lg",borderRadiusXl:"--border-radius-xl",shadowSm:"--shadow-sm",shadowMd:"--shadow-md",shadowLg:"--shadow-lg",shadowXl:"--shadow-xl",fontFamilyBase:"--font-family-base",fontSizeXs:"--font-size-xs",fontSizeSm:"--font-size-sm",fontSizeBase:"--font-size-base",fontSizeLg:"--font-size-lg",fontSizeXl:"--font-size-xl",fontSizeXxl:"--font-size-xxl",lineHeight:"--line-height-base"};function gk(){const t=se({...fu}),e=se(!1),r=se(null),n=se(!1),s=async()=>{if(e.value)return t.value;e.value=!0,r.value=null;try{const g=Ze(qe,"app_settings","theme"),v=await nr(g);if(v.exists()){const y=v.data();t.value={...fu,...y},console.log("Theme loaded from database:",t.value)}else t.value={...fu},console.log("No saved theme found, using defaults");return n.value=!0,a(t.value),t.value}catch(g){throw r.value=g.message,console.error("Error loading theme:",g),g}finally{e.value=!1}},i=async(g=t.value)=>{e.value=!0,r.value=null;try{const v=Ze(qe,"app_settings","theme");return await Ht(v,{...g,lastUpdated:new Date().toISOString()}),t.value={...g},a(g),console.log("Theme saved successfully"),!0}catch(v){throw r.value=v.message,console.error("Error saving theme:",v),v}finally{e.value=!1}},a=g=>{const v=document.documentElement;Object.entries(X_).forEach(([y,b])=>{g[y]!==void 0&&v.style.setProperty(b,g[y])})},o=(g,v)=>{t.value[g]=v,a(t.value)},l=async()=>{t.value={...fu},a(t.value),await i(t.value)},c=g=>{a(g)},u=()=>{a(t.value)},f=g=>getComputedStyle(document.documentElement).getPropertyValue(g),h=g=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$|^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$|^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d.]+\s*\)$/.test(g),p=g=>({light:g,dark:g,hover:g});return Gt(()=>{n.value||s()}),{currentTheme:t,loading:e,error:r,isInitialized:n,loadTheme:s,saveTheme:i,applyTheme:a,updateThemeProperty:o,resetTheme:l,previewTheme:c,revertTheme:u,getCssVariableValue:f,validateColor:h,generateColorVariations:p,CSS_VARIABLE_MAP:X_,DEFAULT_THEME:fu}}function O7(){const{loadTheme:t,currentTheme:e,isInitialized:r}=gk();return Gt(async()=>{if(!r.value)try{await t(),console.log("Theme initialized successfully")}catch(n){console.error("Failed to initialize theme:",n)}}),{currentTheme:e,isInitialized:r}}const M7={id:"app"},L7={id:"main-content"},B7={__name:"App",setup(t){const e=se(!1);O7();const r=n=>{n.ctrlKey&&n.shiftKey&&n.key==="D"&&(n.preventDefault(),e.value=!e.value,console.log("Debug Role Switcher:",e.value?"Shown":"Hidden"))};return Gt(()=>{document.addEventListener("keydown",r)}),Ha(()=>{document.removeEventListener("keydown",r)}),(n,s)=>{const i=_r("router-view");return B(),U("div",M7,[d("div",L7,[Re(i)]),e.value?(B(),Qt($B,{key:0})):ve("",!0),Re(jB),Re(N7)])}}},U7="modulepreload",$7=function(t){return"/"+t},Y_={},js=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=$7(l),l in Y_)return;Y_[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":U7,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function mn(t,e=255){return typeof t!="string"?"":t.trim().replace(/\0/g,"").replace(/[<>'"&]/g,"").substring(0,e)}function V7(t){return typeof t!="string"?"":t.trim().toLowerCase().substring(0,255)}function Q_(t,e=0,r=999999){const n=parseFloat(t);return isNaN(n)?0:Math.max(e,Math.min(r,n))}function F0(t,e){return!t||typeof t=="string"&&t.trim()===""?{isValid:!1,error:`${e} is required`}:{isValid:!0}}function H7(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?{isValid:!0}:{isValid:!1,error:"Invalid email format"}}function Dd(t,e,r=0,n=255){return typeof t!="string"?{isValid:!1,error:`${e} must be a string`}:t.length<r?{isValid:!1,error:`${e} must be at least ${r} characters`}:t.length>n?{isValid:!1,error:`${e} must be no more than ${n} characters`}:{isValid:!0}}function j7(t){return["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair","case_manager","teacher","service_provider","paraeducator"].includes(t)?{isValid:!0}:{isValid:!1,error:"Invalid role"}}function G7(t,e=[],r=10*1024*1024){return t?e.length>0&&!e.includes(t.type)?{isValid:!1,error:`Invalid file type. Allowed: ${e.join(", ")}`}:t.size>r?{isValid:!1,error:`File too large. Maximum size: ${r/(1024*1024)}MB`}:[/\.exe$/i,/\.bat$/i,/\.cmd$/i,/\.scr$/i,/\.vbs$/i,/\.js$/i,/\.jar$/i].some(s=>s.test(t.name))?{isValid:!1,error:"Suspicious file type detected"}:{isValid:!0}:{isValid:!1,error:"No file selected"}}function Hr(t){if(typeof t!="string")return{isSafe:!0,threats:[]};const e=[];return/<script|javascript:|vbscript:|onload=|onerror=/i.test(t)&&e.push("Script injection attempt"),/(\bunion\b|\bselect\b|\binsert\b|\bupdate\b|\bdelete\b|\bdrop\b).*(\bfrom\b|\binto\b|\bwhere\b)/i.test(t)&&e.push("SQL injection pattern"),/\.\.\/|\.\.\\|%2e%2e%2f|%2e%2e%5c/i.test(t)&&e.push("Path traversal attempt"),/<[^>]*>/i.test(t)&&e.push("HTML injection attempt"),/\0/.test(t)&&e.push("Null byte injection"),{isSafe:e.length===0,threats:e}}const Ml={};function Ds(t,e=10,r=6e4){const n=Date.now(),s=`${t}_${Math.floor(n/r)}`;return Ml[s]||(Ml[s]=0),Ml[s]++,Ml[s]>e?{allowed:!1,error:`Rate limit exceeded. Maximum ${e} requests per ${r/1e3} seconds.`}:(Object.keys(Ml).forEach(i=>{const a=parseInt(i.split("_").pop())*r;n-a>r*2&&delete Ml[i]}),{allowed:!0})}function vk(t,e={}){const r=[],{isNew:n=!1}=e;if(!t||typeof t!="object")return{isValid:!1,errors:["Invalid student data"]};if(!t.app||!t.app.studentData)return r.push("Student data structure is invalid"),{isValid:!1,errors:r};const s=t.app.studentData;return[{field:"firstName",name:"First Name"},{field:"lastName",name:"Last Name"},{field:"caseManagerId",name:"Case Manager"}].forEach(({field:l,name:c})=>{const u=F0(s[l],c);u.isValid||r.push(u.error)}),[{field:"firstName",name:"First Name",maxLength:100},{field:"lastName",name:"Last Name",maxLength:100},{field:"studentId",name:"Student ID",maxLength:50},{field:"grade",name:"Grade",maxLength:10}].forEach(({field:l,name:c,maxLength:u})=>{if(s[l]){const f=Dd(s[l],c,1,u);f.isValid||r.push(f.error)}}),["firstName","lastName","studentId","grade"].forEach(l=>{if(s[l]){const c=Hr(s[l]);c.isSafe||r.push(`Security threat detected in ${l}: ${c.threats.join(", ")}`)}}),t.app.accommodations&&typeof t.app.accommodations!="string"&&t.app.accommodations!==null&&r.push("Accommodations must be encrypted string or null"),t.app.classServices&&typeof t.app.classServices!="string"&&t.app.classServices!==null&&r.push("Class services must be encrypted string or null"),s.plan&&typeof s.plan!="string"&&s.plan!==null&&r.push("Student plan must be encrypted string or null"),{isValid:r.length===0,errors:r}}function W7(t){const e=[];if(!t||typeof t!="object")return{isValid:!1,errors:["Invalid user data"]};const r=F0(t.name,"Name");r.isValid||e.push(r.error);const n=F0(t.email,"Email");n.isValid||e.push(n.error);const s=F0(t.role,"Role");if(s.isValid||e.push(s.error),t.email){const a=H7(t.email);a.isValid||e.push(a.error)}if(t.role){const a=j7(t.role);a.isValid||e.push(a.error)}if(t.name){const a=Dd(t.name,"Name",1,100);a.isValid||e.push(a.error)}if(t.email){const a=Dd(t.email,"Email",1,255);a.isValid||e.push(a.error)}return["name","email"].forEach(a=>{if(t[a]){const o=Hr(t[a]);o.isSafe||e.push(`Security threat detected in ${a}: ${o.threats.join(", ")}`)}}),{isValid:e.length===0,errors:e}}function yk(t){const e={...t};if(e.app&&e.app.studentData){const r=e.app.studentData;["firstName","lastName","studentId","grade"].forEach(s=>{r[s]&&(r[s]=mn(r[s],100))})}else["firstName","lastName","studentId","grade"].forEach(n=>{e[n]&&(e[n]=mn(e[n],100))});return e}function z7(t){const e={...t};return e.name&&(e.name=mn(e.name,100)),e.email&&(e.email=V7(e.email)),e}const K7=async(t,e,r=100,n=1e3)=>{const s=[];for(let a=0;a<t.length;a+=r)s.push(t.slice(a,a+r));const i=[];for(let a=0;a<s.length;a++)try{const o=await e(s[a]);i.push(o),a<s.length-1&&await new Promise(l=>setTimeout(l,n))}catch(o){throw console.error(`Error in batch ${a+1}:`,o),o}return i},ll=G7;function Ah(t){if(!t||typeof t!="object")return t;if(t.toJSON&&typeof t.toJSON=="function")return t.toJSON();if(Array.isArray(t))return t.map(Ah);const e={};for(const[r,n]of Object.entries(t)){if(r.toLowerCase().includes("schedule")&&typeof n=="object"&&n!==null)for(const[s,i]of Object.entries(n))i&&typeof i=="object"&&i.teacherId!==void 0&&(n[s].teacherId=String(i.teacherId));e[r]=Ah(n)}return e}const Ls=se([]);let Rm=null;function Ii(){async function t(){if(!Rm)try{const{useGoogleSheetsRealtime:o}=await js(async()=>{const{useGoogleSheetsRealtime:l}=await Promise.resolve().then(()=>Yde);return{useGoogleSheetsRealtime:l}},void 0);Rm=o()}catch(o){console.error("Failed to load Google Sheets sync:",o)}return Rm}async function e(){var c,u,f;const o=await Wt(At(qe,"students"));Ls.value=o.docs.map(h=>{const p=h.data(),g=Ah(p);return{id:h.id,...g}});const l=Ls.value.find(h=>h.aeries);l&&(console.log(" useStudents DEBUG - Student with aeries:",l),console.log(" useStudents DEBUG - aeries.schedule:",(c=l.aeries)==null?void 0:c.schedule),console.log(" useStudents DEBUG - aeries.schedule type:",typeof((u=l.aeries)==null?void 0:u.schedule)),(f=l.aeries)!=null&&f.schedule&&console.log(" useStudents DEBUG - schedule keys:",Object.keys(l.aeries.schedule)))}function r(o){Ls.value=o.map(l=>{const c=Ah(l);return{id:l.id,...c}})}async function n(){return(await Wt(At(qe,"students"))).docs.map(l=>({id:l.id,...l.data()}))}async function s(o,l){await Lp(Ze(qe,"students",o),l);try{const c=await t();if(c&&c.linkedSheetId.value){const u=Ls.value.findIndex(f=>f.id===o);u!==-1&&(Ls.value[u]={...Ls.value[u],...l}),console.log("Syncing student update to Google Sheets..."),await c.updateSheetData(Ls.value)}}catch(c){console.error("Failed to sync to Google Sheets:",c)}}async function i(o){var c,u,f,h,p,g,v;const l=Ls.value.find(y=>y.id===o);await mo(Ze(qe,"students",o)),await rn.logStudentAccess(o,"delete",{studentName:l?`${((u=(c=l.app)==null?void 0:c.studentData)==null?void 0:u.firstName)||""} ${((h=(f=l.app)==null?void 0:f.studentData)==null?void 0:h.lastName)||""}`.trim():"Unknown",ssid:(g=(p=l==null?void 0:l.app)==null?void 0:p.studentData)==null?void 0:g.ssid,deletedFields:l?Object.keys(((v=l.app)==null?void 0:v.studentData)||{}):[]});try{const y=await t();y&&y.linkedSheetId.value&&(Ls.value=Ls.value.filter(b=>b.id!==o),console.log("Syncing student deletion to Google Sheets..."),await y.updateSheetData(Ls.value))}catch(y){console.error("Failed to sync to Google Sheets:",y)}}return{students:Ls,fetchStudents:e,setStudents:r,fetchAllStudents:n,updateStudent:s,deleteStudent:i,deleteAllStudents:async()=>{try{const l=(await Wt(At(qe,"students"))).docs;return await rn.logStudentAccess("bulk_operation","delete_all",{studentCount:l.length,operation:"bulk_delete_all_students",deletedStudentIds:l.map(c=>c.id)}),await K7(l,async c=>{const u=Uy(qe);c.forEach(f=>{u.delete(f.ref)}),await u.commit()},50,2e3),{success:!0}}catch(o){throw console.error("Error deleting all students:",o),await rn.logStudentAccess("bulk_operation","delete_all_failed",{error:o.message,operation:"bulk_delete_all_students_failed"}),o}}}}function _a(){const t=se({}),e=se([]);async function r(){console.log(" USERS DEBUG: Starting fetchUsers()");try{const a=await Wt(At(qe,"users"));console.log(" USERS DEBUG: Retrieved",a.size,"users from database");const o={},l=[];a.forEach(u=>{const f=u.data();o[u.id]={id:u.id,...f},l.push({id:u.id,...f})}),t.value=o,e.value=l,console.log(" USERS DEBUG: Processed users by role:");const c={};l.forEach(u=>{c[u.role]=(c[u.role]||0)+1}),console.log(" USERS DEBUG: Role counts:",c),console.log(" USERS DEBUG: All users list:",l.map(u=>({id:u.id,name:u.name,email:u.email,role:u.role}))),console.log(" USERS DEBUG: fetchUsers() completed successfully")}catch(a){throw console.error(" USERS DEBUG: Error in fetchUsers():",a),a}}const n=be(()=>({teachers:e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)),caseManagers:e.value.filter(a=>["case_manager","sped_chair","admin_504"].includes(a.role)),speech:e.value.filter(a=>a.provider==="SLP"),ot:e.value.filter(a=>a.provider==="OT"),mh:e.value.filter(a=>a.provider==="MH"),pt:e.value.filter(a=>a.provider==="PT"),sc:e.value.filter(a=>a.provider==="SC"),tr:e.value.filter(a=>a.provider==="TR"),aud:e.value.filter(a=>a.provider==="AUD"),vi:e.value.filter(a=>a.provider==="VI"),at:e.value.filter(a=>a.provider==="AT"),dhh:e.value.filter(a=>a.provider==="DHH"),om:e.value.filter(a=>a.provider==="O&M"),bis:e.value.filter(a=>a.provider==="BIS"),hn:e.value.filter(a=>a.provider==="HN"),sw:e.value.filter(a=>a.provider==="SW")})),s=be(()=>e.value.filter(a=>["case_manager","sped_chair","admin_504"].includes(a.role))),i=be(()=>e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)));return{users:t,userList:e,fetchUsers:r,caseManagers:s,teacherList:i,userRoles:n}}function nx(){const t=se({}),e=se(!1);async function r(){e.value=!0;try{const h=await Wt(At(qe,"aideSchedules")),p={};h.forEach(g=>{p[g.id]=g.data()}),t.value=p}catch(h){console.error("Error loading aide assignments:",h),t.value={}}finally{e.value=!1}}async function n(h){if(!h){console.warn("loadAideAssignment called without aideId");return}e.value=!0;try{const p=await nr(Ze(qe,"aideSchedules",h));p.exists()?t.value[h]=p.data():t.value[h]={classAssignment:{},directAssignment:[]}}catch(p){console.error("Error loading aide assignment:",p),t.value[h]={classAssignment:{},directAssignment:[]}}finally{e.value=!1}}async function s(h,p){try{const g=JSON.parse(JSON.stringify(p));await Ht(Ze(qe,"aideSchedules",h),g,{merge:!0}),t.value[h]=g}catch(g){throw console.error("Error saving aide assignment:",g),g}}async function i(){try{const h=Object.entries(t.value);for(const[p,g]of h){const v=JSON.parse(JSON.stringify(g));await Ht(Ze(qe,"aideSchedules",p),v,{merge:!0})}}catch(h){throw console.error("Error saving all aide assignments:",h),h}}function a(h,p){const g=[];return Object.entries(t.value).forEach(([v,y])=>{y.classAssignment&&y.classAssignment[p]&&(Array.isArray(y.classAssignment[p])?y.classAssignment[p]:[y.classAssignment[p]]).includes(h)&&g.push(v)}),g}function o(h){var g;const p=(g=t.value[h])==null?void 0:g.directAssignment;return Array.isArray(p)?p.length>0?p[0]:null:p||null}function l(h){return Object.keys(t.value).find(g=>{var y;const v=(y=t.value[g])==null?void 0:y.directAssignment;return Array.isArray(v)?v.includes(h):v===h})||null}function c(h,p,g){const v=[],y=t.value[h];return y&&((Array.isArray(y.directAssignment)?y.directAssignment:y.directAssignment?[y.directAssignment]:[]).forEach(E=>{if(E){const x=p.find(w=>w.id===E);x&&v.push({...x,assignmentType:"direct"})}}),Object.entries(y.classAssignment||{}).forEach(([E,x])=>{x&&(Array.isArray(x)?x:[x]).forEach(R=>{R&&p.forEach(P=>{const S=f(P);if(S){const _=S[E];if((typeof _=="string"?_:_==null?void 0:_.teacherId)===R){const A=v.findIndex(k=>k.id===P.id);A===-1?v.push({...P,assignmentType:"class",period:E,teacherId:R}):(v[A].assignmentType="both",v[A].period=E,v[A].teacherId=R)}}})})})),v}function u(h,p,g,v){if(!h||!p||!g||!v)return!1;const y=g.find(P=>P.id===p);if(!y)return!1;const b=t.value[h];if(!b)return!1;if((Array.isArray(b.directAssignment)?b.directAssignment:b.directAssignment?[b.directAssignment]:[]).includes(p))return!0;const x=f(y);if(!x)return!1;const w=b.classAssignment||{};return Object.entries(x).some(([P,S])=>{const _=typeof S=="string"?S:S==null?void 0:S.teacherId,m=w[P];return!m||!_?!1:(Array.isArray(m)?m:[m]).includes(_)})}function f(h){var p,g,v,y,b;return h.schedule?h.schedule:(g=(p=h.app)==null?void 0:p.schedule)!=null&&g.periods?h.app.schedule.periods:(y=(v=h.aeries)==null?void 0:v.schedule)!=null&&y.periods?h.aeries.schedule.periods:(b=h.aeries)!=null&&b.schedule?h.aeries.schedule:null}return{aideAssignment:be(()=>t.value),loading:be(()=>e.value),loadAideAssignments:r,loadAideAssignment:n,saveAideAssignment:s,saveAllAideAssignments:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}function sx(){const t=se(!1),e=se(""),r=se("");let n,s,i,a;try{n=pc(),s=Pa(n,"getStudentFeedback"),i=Pa(n,"createFeedbackFormSheet"),a=Pa(n,"createFeedbackFormSheetWithUserAuth")}catch(w){console.warn("Firebase Functions not available:",w),s=()=>Promise.reject(new Error("Functions not available")),i=()=>Promise.reject(new Error("Functions not available")),a=()=>Promise.reject(new Error("Functions not available"))}const o=At(qe,"feedbackForms"),l=se(!1),c=se([]);let u;const f=be(()=>{var R;return(((R=c.value)==null?void 0:R.filter(P=>P.active!==!1))||[]).sort((P,S)=>{var A,k;const _=(A=P.createdAt)!=null&&A.seconds?new Date(P.createdAt.seconds*1e3):new Date(P.createdAt);return((k=S.createdAt)!=null&&k.seconds?new Date(S.createdAt.seconds*1e3):new Date(S.createdAt))-_})}),h=async w=>{try{t.value=!0,e.value="",console.log(" Creating Google Sheet with personal account for form:",w.title);const R=await i({title:w.title,description:w.description,formUrl:w.formUrl,studentId:w.studentId||null,studentName:w.studentName||null});if(!R.data.success)throw new Error("Failed to create Google Sheet: "+R.data.message);console.log(" Google Sheet created:",R.data.spreadsheetUrl);const P={title:w.title,description:w.description,formUrl:w.formUrl,spreadsheetId:R.data.spreadsheetId,spreadsheetUrl:R.data.spreadsheetUrl,userDriveId:R.data.userDriveId,parentFolderId:R.data.parentFolderId,active:!0,createdAt:new Date,createdBy:w.createdBy},S=Ze(o);return await Ht(S,P),r.value="Feedback form and Google Sheet created successfully!",{id:S.id,...P}}catch(R){throw console.error("Error creating feedback form:",R),R.message.includes("storage quota exceeded")||R.message.includes("Service account storage quota exceeded")?R.value=' Cannot create Google Sheet: Service account has no storage quota. Please use the "Test with Personal Account" button in Google Drive Setup to use your personal Google account instead.':R.message.includes("permission")||R.message.includes("access")?R.value=" Permission denied: Please ensure the folder is shared with the service account or use your personal Google account.":R.value=R.message,R}finally{t.value=!1}},p=async(w,R)=>{try{t.value=!0,e.value="";const P=Ze(o,w);await Ht(P,{...R,updatedAt:new Date},{merge:!0}),r.value="Feedback form updated successfully!"}catch(P){throw console.error("Error updating feedback form:",P),e.value=P.message,P}finally{t.value=!1}},g=async w=>{try{t.value=!0,e.value="";const R=Ze(o,w);await mo(R),r.value="Feedback form deleted successfully!"}catch(R){throw console.error("Error deleting feedback form:",R),e.value=R.message,R}finally{t.value=!1}},v=()=>{e.value="",r.value=""},y=w=>{const R=w.match(/\/forms\/d\/([a-zA-Z0-9-_]+)/);return R?R[1]:null},b=()=>{try{u=uf(o,w=>{c.value=w.docs.map(R=>({id:R.id,...R.data()})),l.value=!1},w=>{console.warn("Error listening to feedback forms:",w),l.value=!1})}catch(w){console.warn("Error initializing Firestore listeners:",w),l.value=!1}},E=()=>{u&&u()};return Gt(()=>{b()}),Ha(()=>{E()}),{isLoading:t,error:e,successMessage:r,formsLoading:l,feedbackForms:c,activeForms:f,createFeedbackForm:h,updateFeedbackForm:p,deleteFeedbackForm:g,clearMessages:v,extractFormId:y,createFeedbackFormWithUserAuth:async(w,R)=>{try{t.value=!0,e.value="",console.log(" Creating Google Sheet with personal account for form:",w.title);const P=await a({title:w.title,description:w.description,formUrl:w.formUrl,studentId:w.studentId||null,studentName:w.studentName||null,accessToken:R});if(!P.data.success)throw new Error("Failed to create Google Sheet: "+P.data.message);console.log(" Google Sheet created with personal account:",P.data.spreadsheetUrl);const S={title:w.title,description:w.description,formUrl:w.formUrl,spreadsheetId:P.data.spreadsheetId,spreadsheetUrl:P.data.spreadsheetUrl,driveType:"personal",active:!0,createdAt:new Date,createdBy:w.createdBy},_=Ze(o);return await Ht(_,S),r.value="Feedback form and Google Sheet created successfully in your personal Google Drive!",{id:_.id,...S}}catch(P){throw console.error("Error creating feedback form with user auth:",P),P.value=P.message,P}finally{t.value=!1}}}}function q7(){const t=xn(),e=se(!1),r=se(null),n=se([]),s=se(0),i=be(()=>t.user),a=be(()=>{var w;return(w=t.user)==null?void 0:w.role}),o=be(()=>{var w;return(w=t.user)==null?void 0:w.uid}),l=async()=>{console.log(" Admin query: Loading all students - START"),console.log(" Admin query: currentUser:",i.value),console.log(" Admin query: currentRole:",a.value),console.log(" Admin query: currentUserId:",o.value);try{const w=or(At(qe,"students"),hn("app.studentData.lastName","asc"));console.log(" Admin query created:",w);const R=await Wt(w);console.log(" Admin query snapshot:",R.size,"documents");const P=R.docs.map(S=>({id:S.id,...S.data()}));if(console.log(" Admin query result:",P.length,"students"),P.length>0)console.log(" First student structure:",P[0]);else{console.log(" Admin query: NO STUDENTS FOUND - checking collection directly");const S=or(At(qe,"students")),_=await Wt(S);console.log(" Simple query found:",_.size,"documents")}return P}catch(w){console.error(" Admin query error:",w),console.error(" Admin query error details:",w.message,w.code);try{console.log(" Trying fallback query without ordering...");const R=or(At(qe,"students")),P=await Wt(R);console.log(" Fallback query found:",P.size,"documents");const S=P.docs.map(_=>({id:_.id,..._.data()}));return console.log(" Fallback query returning:",S.length,"students"),S}catch(R){return console.error(" Fallback query also failed:",R),console.error(" Fallback query error details:",R.message,R.code),[]}}},c=async()=>{console.log(" 504 Admin query: Loading all students (edit restrictions applied at form level)");try{const w=or(At(qe,"students"),hn("app.studentData.lastName","asc"));return(await Wt(w)).docs.map(P=>({id:P.id,...P.data()}))}catch(w){console.error(" 504 Admin query error:",w);try{const R=or(At(qe,"students"));return(await Wt(R)).docs.map(S=>({id:S.id,...S.data()}))}catch(R){return console.error(" 504 Admin fallback query failed:",R),[]}}},u=async()=>{console.log(" SPED Chair query: Loading only IEP students");try{const w=or(At(qe,"students"),Ur("app.studentData.plan","==","IEP"),hn("app.studentData.lastName","asc"));return(await Wt(w)).docs.map(P=>({id:P.id,...P.data()}))}catch(w){console.error(" SPED Chair query error:",w);try{const R=or(At(qe,"students"),Ur("app.studentData.plan","==","IEP"));return(await Wt(R)).docs.map(S=>({id:S.id,...S.data()}))}catch(R){return console.error(" SPED Chair fallback query failed:",R),[]}}},f=async w=>{console.log(" Security: Loading students for case manager (CM + SP access):",w);try{const R=or(At(qe,"students"),Ur("app.studentData.caseManagerId","==",w)),S=(await Wt(R)).docs.map(I=>({id:I.id,...I.data()})),_=or(At(qe,"students"),Ur("app.staffIds","array-contains",w)),A=(await Wt(_)).docs.map(I=>({id:I.id,...I.data()})),k=[...S];return A.forEach(I=>{k.find(C=>C.id===I.id)||k.push(I)}),k.sort((I,C)=>{var F,N,L,O;const M=((N=(F=I.app)==null?void 0:F.studentData)==null?void 0:N.lastName)||"",D=((O=(L=C.app)==null?void 0:L.studentData)==null?void 0:O.lastName)||"";return M.localeCompare(D)}),console.log(" Security: Case manager found:",S.length,"CM students,",A.length,"SP students"),console.log(" Security: Total unique students:",k.length),console.log(" Security: CM accessible students:",k.map(I=>{var C,M,D,F;return`${(M=(C=I.app)==null?void 0:C.studentData)==null?void 0:M.firstName} ${(F=(D=I.app)==null?void 0:D.studentData)==null?void 0:F.lastName}`}).slice(0,8)),k}catch(R){return console.error(" Security: Error loading case manager students:",R),[]}},h=async w=>{console.log(" Teacher query: Loading students for teacher",w);try{const R=or(At(qe,"students"),Ur("app.staffIds","array-contains",w),hn("app.studentData.lastName","asc")),P=await Wt(R);return console.log(" Teacher query: Found",P.size,"students with teacher in staffIds"),P.docs.map(S=>({id:S.id,...S.data()}))}catch(R){return console.error(" Security: Error loading teacher students:",R),[]}},p=async w=>{var R,P,S,_;console.log(" Service Provider query: Loading students for provider",w),console.log(" Service Provider query: userId type:",typeof w),console.log(" Service Provider query: userId value:",JSON.stringify(w));try{const m=or(At(qe,"students"),Ur("app.staffIds","array-contains",w));console.log(" Service Provider query: Executing staffIds query...");const A=await Wt(m);console.log(" Service Provider query: Success! Found",A.size,"students");const k=A.docs.map(I=>({id:I.id,...I.data()}));return k.sort((I,C)=>{var F,N,L,O;const M=((N=(F=I.app)==null?void 0:F.studentData)==null?void 0:N.lastName)||"",D=((O=(L=C.app)==null?void 0:L.studentData)==null?void 0:O.lastName)||"";return M.localeCompare(D)}),k}catch(m){console.error(" Service Provider query FAILED:",m),console.error(" Error code:",m.code),console.error(" Error message:",m.message),console.error(" Full error object:",m);const A=tl();return console.error(" Current auth state:",{uid:(R=A.currentUser)==null?void 0:R.uid,email:(P=A.currentUser)==null?void 0:P.email,customClaims:"Check in browser dev tools"}),console.error(" Auth mismatch check:",{queryUserId:w,authUid:(S=A.currentUser)==null?void 0:S.uid,match:w===((_=A.currentUser)==null?void 0:_.uid)}),[]}},g=async w=>{var R,P,S,_;console.log(" Paraeducator query: Loading students for aide",w),console.log(" Paraeducator query: userId type:",typeof w),console.log(" Paraeducator query: userId value:",JSON.stringify(w));try{console.log(" Paraeducator query: Trying staffIds approach first...");try{const D=or(At(qe,"students"),Ur("app.staffIds","array-contains",w),hn("app.studentData.lastName","asc")),F=await Wt(D);if(console.log(" Paraeducator query: staffIds approach found",F.size,"students"),F.size>0){const N=F.docs.map(L=>({id:L.id,...L.data()}));return console.log(" Paraeducator query: SUCCESS with staffIds approach"),N}}catch(D){console.log(" Paraeducator query: staffIds approach failed:",D.message)}console.log(" Paraeducator query: Using aideSchedules fallback...");const m=await nr(Ze(qe,"aideSchedules",w));if(!m.exists())return console.log(" Paraeducator query: No aide schedule document found for",w),[];const A=m.data();console.log(" Paraeducator query: Found aide data:",A);let k=[];if(A.studentIds&&Array.isArray(A.studentIds)?(k=A.studentIds,console.log(" Paraeducator query: Using studentIds array:",k)):A.directAssignment&&(k=Array.isArray(A.directAssignment)?A.directAssignment:[A.directAssignment],console.log(" Paraeducator query: Using directAssignment as fallback:",k)),k.length===0)return console.log(" Paraeducator query: No student assignments found for aide",w),[];console.log(" Paraeducator query: Fetching",k.length,"assigned students individually...");const I=k.map(async D=>{try{const F=await nr(Ze(qe,"students",D));return F.exists()?{id:F.id,...F.data()}:null}catch(F){return console.warn(" Paraeducator query: Failed to fetch student",D,":",F.message),null}}),M=(await Promise.all(I)).filter(D=>D!==null);return M.sort((D,F)=>{var O,z,H,V;const N=((z=(O=D.app)==null?void 0:O.studentData)==null?void 0:z.lastName)||"",L=((V=(H=F.app)==null?void 0:H.studentData)==null?void 0:V.lastName)||"";return N.localeCompare(L)}),console.log(" Paraeducator query: Successfully fetched",M.length,"students"),M}catch(m){console.error(" Paraeducator query FAILED:",m),console.error(" Error code:",m.code),console.error(" Error message:",m.message),console.error(" Full error object:",m);const A=tl();return console.error(" Current auth state:",{uid:(R=A.currentUser)==null?void 0:R.uid,email:(P=A.currentUser)==null?void 0:P.email,customClaims:"Check in browser dev tools"}),console.error(" Auth mismatch check:",{queryUserId:w,authUid:(S=A.currentUser)==null?void 0:S.uid,match:w===((_=A.currentUser)==null?void 0:_.uid)}),[]}},v=async()=>{console.log(" Testing query: Loading students with testing flags");const w=or(At(qe,"students"),Ur("app.flags.flag2","==",!0),hn("app.studentData.lastName","asc")),R=or(At(qe,"students"),Ur("app.flags.separateSetting","==",!0),hn("app.studentData.lastName","asc")),[P,S]=await Promise.all([Wt(w),Wt(R)]),_=P.docs.map(k=>({id:k.id,...k.data()})),m=S.docs.map(k=>({id:k.id,...k.data()})),A=[..._];return m.forEach(k=>{A.find(I=>I.id===k.id)||A.push(k)}),A.sort((k,I)=>{var D,F,N,L;const C=((F=(D=k.app)==null?void 0:D.studentData)==null?void 0:F.lastName)||"",M=((L=(N=I.app)==null?void 0:N.studentData)==null?void 0:L.lastName)||"";return C.localeCompare(M)})},y=async(w={})=>{var R,P;if(console.log(" loadStudents called - DEBUG AUTH STATE:"),console.log("  currentUserId.value:",o.value),console.log("  currentRole.value:",a.value),console.log("  authStore.user:",t.user),console.log("  authStore.user?.uid:",(R=t.user)==null?void 0:R.uid),console.log("  authStore.user?.role:",(P=t.user)==null?void 0:P.role),!o.value||!a.value)return console.error(" No authenticated user or role - FAILING AUTH CHECK"),console.error("  currentUserId.value is:",o.value),console.error("  currentRole.value is:",a.value),r.value="Authentication required",[];e.value=!0,r.value=null;try{let S=[];switch(console.log(" ROUTING to query based on role:",a.value),console.log(" Available role cases: admin, school_admin, staff_view, staff_edit, admin_504, sped_chair, case_manager, teacher, service_provider, paraeducator"),a.value){case"admin":case"school_admin":case"staff_view":case"staff_edit":case"administrator":S=await l();break;case"sped_chair":S=await u();break;case"admin_504":S=await c();break;case"case_manager":console.log(" CALLING getCaseManagerStudents with userId:",o.value),S=await f(o.value),console.log(" getCaseManagerStudents COMPLETED, returned:",S.length,"students");break;case"teacher":S=await h(o.value);break;case"service_provider":S=await p(o.value);break;case"paraeducator":console.log(" PARAEDUCATOR QUERY: Starting query for userId:",o.value),S=await g(o.value),console.log(" PARAEDUCATOR QUERY: Query completed, returned:",S.length,"students");break;default:return console.error(" Unknown role:",a.value),r.value="Invalid user role",[]}return w.testingOnly&&(S=await v()),n.value=S,s.value=S.length,console.log(` Loaded ${S.length} students for ${a.value}`),S}catch(S){return console.error(" Error loading students:",S),r.value=S.message||"Failed to load students",[]}finally{e.value=!1}},b=async w=>{if(!w)throw new Error("Student ID is required");if(!o.value||!a.value)throw new Error("Authentication required");e.value=!0,r.value=null;try{const R=await nr(Ze(qe,"students",w));if(!R.exists())throw new Error("Student not found");const P={id:R.id,...R.data()};if(!await E(P,o.value,a.value))throw new Error("Access denied to this student");return P}catch(R){throw console.error(" Error getting student:",R),r.value=R.message,R}finally{e.value=!1}},E=async(w,R,P)=>{var S,_,m,A,k,I,C;if(!w||!R||!P)return!1;if(["admin","school_admin","admin_504","sped_chair"].includes(P))return!0;if(P==="case_manager")return((_=(S=w.app)==null?void 0:S.studentData)==null?void 0:_.caseManagerId)===R;if(P==="teacher"){if(!((A=(m=w.app)==null?void 0:m.schedule)!=null&&A.periods))return!1;const M=w.app.schedule.periods,D=Object.values(M);return D.includes(R)?!0:D.some(F=>{var N;return typeof F=="object"&&F!==null?F.teacherId===R||((N=F.coTeaching)==null?void 0:N.caseManagerId)===R:!1})}if(P==="service_provider"){if((k=w.app)!=null&&k.providers&&Object.values(w.app.providers).includes(R))return!0;if((C=(I=w.app)==null?void 0:I.schedule)!=null&&C.periods){const M=w.app.schedule.periods,D=Object.values(M);return D.includes(R)?!0:D.some(F=>{var N;return typeof F=="object"&&F!==null?F.teacherId===R||((N=F.coTeaching)==null?void 0:N.caseManagerId)===R:!1})}}return!1},x=async(w=50,R=null)=>{if(!o.value||!a.value)throw new Error("Authentication required");e.value=!0,r.value=null;try{let P=or(At(qe,"students"),hn("app.studentData.lastName","asc"),oa(w));R&&(P=or(P,xh(R))),a.value==="case_manager"&&(P=or(At(qe,"students"),Ur("app.studentData.caseManagerId","==",o.value),hn("app.studentData.lastName","asc"),oa(w)),R&&(P=or(P,xh(R))));const S=await Wt(P);return{students:S.docs.map(m=>({id:m.id,...m.data()})),lastDoc:S.docs[S.docs.length-1],hasMore:S.docs.length===w}}catch(P){throw console.error(" Error loading paginated students:",P),r.value=P.message,P}finally{e.value=!1}};return{students:be(()=>n.value),loading:be(()=>e.value),error:be(()=>r.value),totalCount:be(()=>s.value),loadStudents:y,getStudent:b,verifyStudentAccess:E,loadStudentsPaginated:x,getAdminStudents:l,getAdmin504Students:c,getCaseManagerStudents:f,getTeacherStudents:h,getServiceProviderStudents:p,getParaeducatorStudents:g,getTestingStudents:v}}function X7(t,e){const r={isSecure:!0,violations:[],summary:"",studentCount:t.length,authorizedCount:0,unauthorizedCount:0};return!e||!e.role?(r.isSecure=!1,r.violations.push("No user or role provided"),r):(t.forEach((n,s)=>{var a,o,l,c;Y7(n,e)?r.authorizedCount++:(r.unauthorizedCount++,r.isSecure=!1,r.violations.push({studentIndex:s,studentName:`${(o=(a=n.app)==null?void 0:a.studentData)==null?void 0:o.firstName} ${(c=(l=n.app)==null?void 0:l.studentData)==null?void 0:c.lastName}`,studentId:n.id,reason:Q7(n,e)}))}),r.summary=`User ${e.role} (${e.uid}) has access to ${r.authorizedCount}/${r.studentCount} students`,r.isSecure||(r.summary+=`. SECURITY VIOLATION: ${r.unauthorizedCount} unauthorized students accessible!`),r)}function Y7(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"admin":case"school_admin":case"admin_504":case"sped_chair":case"staff_view":case"staff_edit":return!0;case"case_manager":return((i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===n;case"teacher":const f=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(f).includes(n);case"service_provider":const h=((l=t.app)==null?void 0:l.providers)||{},p=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},g=Object.values(h).includes(n),v=Object.values(p).includes(n);return g||v;case"paraeducator":return!0;default:return!1}}function Q7(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"case_manager":const f=(i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId;return`Case manager ${n} is not assigned to student (assigned to: ${f})`;case"teacher":const h=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{},p=Object.values(h);return`Teacher ${n} does not teach this student (teachers: ${p.join(", ")})`;case"service_provider":const g=((l=t.app)==null?void 0:l.providers)||{},v=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},y=Object.values(g).filter(E=>E),b=Object.values(v);return`Service provider ${n} is not assigned to student (providers: ${y.join(", ")}, teachers: ${b.join(", ")})`;case"paraeducator":return null;default:return`Unknown role: ${r}`}}function J7(t){t.isSecure?console.log(" SECURITY TEST PASSED:",t.summary):(console.error(" SECURITY TEST FAILED:",t.summary),console.error("Violations:",t.violations))}function J_(t,e){const r=X7(t,e);return J7(r),r}const xk=(t,e)=>{console.log(` DEBUG: Schedule Operation - ${t}:`,e)};function Ek(t){return xk("getTeacherIdFromPeriod",{periodData:t,type:typeof t}),t?typeof t=="string"?t:t.teacherId||null:null}function Vp(t){var e;return xk("getCoTeachingCaseManagerFromPeriod",{periodData:t}),!t||typeof t!="object"?null:((e=t.coTeaching)==null?void 0:e.caseManagerId)||null}function Z7(t,e={}){if(!t||!t.periods)return[];const r=new Set;return Object.values(t.periods).forEach(n=>{const s=Ek(n);s&&r.add(s);const i=Vp(n);if(i){const a=e[i];a&&(a.role==="teacher"||a.roles&&a.roles.includes("teacher"))&&r.add(i)}}),Array.from(r)}function eU(t){if(!t||!t.periods)return[];const e=new Set;return Object.values(t.periods).forEach(r=>{const n=Vp(r);n&&e.add(n)}),Array.from(e)}function tU(t,e){var r,n;return!((n=(r=t.app)==null?void 0:r.schedule)!=null&&n.periods)||!e?!1:Object.values(t.app.schedule.periods).some(s=>Vp(s)===e)}function rU(){const t=ki(),e=xn(),{students:r,setStudents:n}=Ii(),{users:s,userList:i,fetchUsers:a,caseManagers:o,teacherList:l,userRoles:c}=_a(),{loadAideAssignment:u,loadAideAssignments:f,shouldAideSeeStudent:h,aideAssignment:p}=nx(),{feedbackForms:g,formsLoading:v}=sx(),{loadStudents:y}=q7(),b=se(!1),E=se(null),x=be(()=>e.currentUser),w=be(()=>{var D;const M=(D=x.value)==null?void 0:D.role;return["admin","school_admin","admin_504","sped_chair"].includes(M)}),R=be(()=>{var M;return["case_manager","admin_504","sped_chair"].includes((M=x.value)==null?void 0:M.role)}),P=be(()=>s.value||{}),S=be(()=>{var M;return((M=i.value)==null?void 0:M.filter(D=>D.role==="paraeducator"))||[]}),_=async()=>{var M,D,F,N,L;console.log(" useStudentData: fetchData() called"),b.value=!0,E.value=null;try{console.log(" useStudentData: About to fetchUsers()..."),await a(),console.log(" useStudentData: fetchUsers() completed"),console.log(" useStudentData: Users available in userMap:",Object.keys(P.value).length),console.log(" useStudentData: Users available in userList:",((M=i.value)==null?void 0:M.length)||0),((D=x.value)==null?void 0:D.role)==="paraeducator"&&console.log(" PARAEDUCATOR DEBUG: Can access user data:",{userMapKeys:Object.keys(P.value).slice(0,5),userListSample:(F=i.value)==null?void 0:F.slice(0,3).map(H=>({id:H.id,name:H.name,role:H.role}))});const O=x.value;if(console.log(" useStudentData: Checking user for loadStudents call:",O),(O==null?void 0:O.role)==="paraeducator"&&console.log(" PARAEDUCATOR DEBUG: Full user object:",{uid:O.uid,email:O.email,name:O.name,role:O.role,customClaims:O.customClaims,fullUser:O}),O){console.log(" Security: Fetching students for user role:",O.role,"userId:",O.uid),console.log(" useStudentData: About to call loadStudents()...");const H=await y();console.log(" useStudentData: loadStudents() returned:",H.length,"students"),O.role==="paraeducator"&&console.log(" PARAEDUCATOR DEBUG: Student details:",H.map(W=>{var G,re,de,ae;return{id:W.id,firstName:(re=(G=W.app)==null?void 0:G.studentData)==null?void 0:re.firstName,lastName:(ae=(de=W.app)==null?void 0:de.studentData)==null?void 0:ae.lastName,fullData:W}})),n(H);const V=J_(H,O);V.isSecure||console.error(" SECURITY VIOLATION DETECTED:",V.violations)}else console.log(" Security: No user found - setting empty student array"),n([]);const z=(N=x.value)==null?void 0:N.role;if(["admin","school_admin","admin_504","sped_chair"].includes(z))await f();else if(z==="paraeducator"&&x.value.uid){console.log(" PARAEDUCATOR DEBUG: Loading aide assignment for paraeducator:",x.value.uid),await u(x.value.uid),console.log(" PARAEDUCATOR DEBUG: Aide assignment loaded, current assignments:",p.value);const H=Ze(qe,"aideSchedules",x.value.uid),V=uf(H,async W=>{if(W.exists()){console.log(" useStudentData: Aide schedule updated, reloading students..."),await u(x.value.uid);const G=await y();n(G)}});Ha(()=>V())}console.log(" Security: Loaded",r.value.length,"students for",(L=x.value)==null?void 0:L.role),console.log("StudentsView - loaded users:",Object.keys(s.value||{}).length,"users")}catch(O){console.error("Error fetching data:",O),E.value=O.message||"Failed to load data"}finally{b.value=!1}},m=M=>r.value.find(D=>D.id===M)||{},A=M=>{const D=s.value[M];return D&&(D.name||D.email)||M},k=M=>{if(!M)return"N/A";const D=s.value[M];return D&&(D.name||D.email)||M},I=M=>{var D,F;return((F=(D=M.app)==null?void 0:D.studentData)==null?void 0:F.caseManagerId)||M.caseManagerId||M.casemanager_id},C=M=>{var D,F,N,L,O;return M.schedule?M.schedule:(F=(D=M.app)==null?void 0:D.schedule)!=null&&F.periods?M.app.schedule.periods:(L=(N=M.aeries)==null?void 0:N.schedule)!=null&&L.periods?M.aeries.schedule.periods:(O=M.aeries)!=null&&O.schedule?M.aeries.schedule:null};return Gt(()=>{console.log(" useStudentData: onMounted triggered, calling fetchData..."),_()}),$t(()=>{var M;return(M=x.value)==null?void 0:M.role},async(M,D)=>{if(M&&M!==D){console.log(" Security: User role changed from",D,"to",M,"- reloading students");const F=x.value;if(console.log(" useStudentData: Role watcher - checking user:",F),F){console.log(" useStudentData: Role watcher - about to call loadStudents()...");const N=await y();console.log(" useStudentData: Role watcher - loadStudents() returned:",N.length,"students"),n(N);const L=J_(N,F);L.isSecure||console.error(" SECURITY VIOLATION DETECTED:",L.violations),console.log(" Security: Reloaded",N.length,"students for role",M)}}},{immediate:!1}),{isLoading:b,error:E,students:r,userMap:s,userList:i,userMapObj:P,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:p,feedbackForms:g,formsLoading:v,paraeducators:S,currentUser:x,isAdmin:w,showProviderView:R,fetchData:_,getStudentById:m,getUserName:A,getCaseManagerName:k,getCaseManagerId:I,getSchedule:C,shouldAideSeeStudent:h,getTeacherIdFromPeriod:Ek,getCoTeachingCaseManagerFromPeriod:Vp,getAllTeacherIdsFromSchedule:Z7,getCoTeachingCaseManagersFromSchedule:eU,isCoTeachingCaseManager:tU,router:t}}function it(t,e,r=""){const n=(l,c)=>c.split(".").reduce((u,f)=>u&&u[f]!==void 0?u[f]:null,l),s=n(t.overrides,e);if(t.overrides&&s!=null&&s!=="")return s;if(t.app){if(["firstName","lastName","grade","plan","ssid","caseManagerId"].includes(e)){const c=n(t.app,`studentData.${e}`);if(c!=null&&c!=="")return c}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const c=n(t.app,`dates.${e}`);if(c!=null&&c!=="")return c}if(["instruction","assessment"].includes(e)){const c=n(t.app,`accommodations.${e}`);if(c!=null&&c!=="")return c}const l=n(t.app,e);if(l!=null&&l!=="")return l}const i=n(t.aeries,e);if(t.aeries&&i!=null&&i!=="")return i;const a=n(t.seis,e);if(t.seis&&a!=null&&a!=="")return a;const o=n(t,e);return o!=null&&o!==""?o:r}function hu(t,e){const r=(o,l)=>l.split(".").reduce((c,u)=>c&&c[u]!==void 0?c[u]:null,o),n=r(t.overrides,e);if(t.overrides&&n!=null&&n!=="")return"Override";if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const l=r(t.app,`studentData.${e}`);if(l!=null&&l!=="")return"App"}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const l=r(t.app,`dates.${e}`);if(l!=null&&l!=="")return"App"}if(["instruction","assessment"].includes(e)){const l=r(t.app,`accommodations.${e}`);if(l!=null&&l!=="")return"App"}const o=r(t.app,e);if(o!=null&&o!=="")return"App"}const s=r(t.aeries,e);if(t.aeries&&s!=null&&s!=="")return"Aeries";const i=r(t.seis,e);if(t.seis&&i!=null&&i!=="")return"SEIS";const a=r(t,e);return a!=null&&a!==""?"Top-level":""}function nU(t){return t?`<ul class="bullet-list">${t.split(/\n|\r|\d+\.\s+|\-\s+|;/).map(r=>r.trim()).filter(Boolean).map(r=>`<li>${r}</li>`).join("")}</ul>`:"<div></div>"}function sU(t){const{students:e,currentUser:r,shouldAideSeeStudent:n,userMap:s,getCaseManagerId:i,getSchedule:a,aideAssignment:o}=t,l=se(!1),c=se([]),u=Ns({sortBy:"firstName",cm:"all",teacher:"all",paraeducator:"all",plan:"all",search:"",providerView:"all",viewMode:"list"});let f=null;const h=()=>{f&&clearTimeout(f),f=setTimeout(()=>{y()},300)},p=()=>{l.value&&g(),l.value=!l.value},g=()=>{u.sortBy="firstName",u.cm="all",u.teacher="all",u.paraeducator="all",u.plan="all",u.search="",u.providerView="all",u.viewMode="list",y()},v=()=>({paraeducator:u.paraeducator,teacher:u.teacher}),y=(b=u)=>{var R,P,S,_;console.log(" FILTER DEBUG: applyFilters called with students.value.length:",e.value.length),console.log(" FILTER DEBUG: currentUser:",(R=r.value)==null?void 0:R.role,(P=r.value)==null?void 0:P.uid);let E=e.value;const x=(S=r.value)==null?void 0:S.role,w=["admin","school_admin"];if(console.log(" FILTER DEBUG: Provider view filtering check:",{userRole:x,providerView:b.providerView,shouldSkip:w.includes(x),resultLengthBefore:E.length}),!w.includes(x)&&b.providerView==="case_manager"?(console.log(" FILTER DEBUG: Applying case_manager filter"),E=E.filter(m=>{var A;return i(m)===((A=r.value)==null?void 0:A.uid)}),console.log(" FILTER DEBUG: After case_manager filter:",E.length)):!w.includes(x)&&b.providerView==="service_provider"?(console.log(" FILTER DEBUG: Applying service_provider filter"),E=E.filter(m=>{var M;const A=a(m),k=A?Object.entries(A).some(([D,F])=>{var N,L;return typeof F=="string"?F===((N=r.value)==null?void 0:N.uid):F&&typeof F=="object"?F.teacherId===((L=r.value)==null?void 0:L.uid):!1}):!1,I=(m.services||[]).some(D=>{var F;return D.includes((F=r.value)==null?void 0:F.uid)}),C=i(m)!==((M=r.value)==null?void 0:M.uid);return(k||I)&&C}),console.log(" FILTER DEBUG: After service_provider filter:",E.length)):console.log(" FILTER DEBUG: Skipping provider view filtering for role:",x),((_=r.value)==null?void 0:_.role)==="paraeducator"&&console.log(" FILTER DEBUG: Paraeducator - using database-filtered students, no additional filtering"),b.search){const m=b.search.toLowerCase();E=E.filter(A=>{const k=it(A,"firstName")||"",I=it(A,"lastName")||"";return`${k} ${I}`.toLowerCase().includes(m)})}if(b.cm&&b.cm!=="all"&&(E=E.filter(m=>i(m)===b.cm)),b.teacher&&b.teacher!=="all"&&(E=E.filter(m=>{const A=a(m);return A?Object.entries(A).some(([k,I])=>typeof I=="string"?I===b.teacher:I&&typeof I=="object"?I.teacherId===b.teacher:!1):!1})),b.paraeducator&&b.paraeducator!=="all"){console.log(" FILTER DEBUG: Applying paraeducator filter for:",b.paraeducator);const m=o.value[b.paraeducator];if(m){console.log(" FILTER DEBUG: Found aide data:",m);let A=[];m.studentIds&&Array.isArray(m.studentIds)?(A=m.studentIds,console.log(" FILTER DEBUG: Using studentIds array:",A)):m.directAssignment&&(A=Array.isArray(m.directAssignment)?m.directAssignment:[m.directAssignment],console.log(" FILTER DEBUG: Using directAssignment as fallback:",A)),E=E.filter(k=>A.includes(k.id)),console.log(" FILTER DEBUG: After paraeducator filter:",E.length,"students")}else console.log(" FILTER DEBUG: No aide data found for:",b.paraeducator),E=[]}b.plan&&b.plan!=="all"&&(E=E.filter(m=>it(m,"plan")===b.plan)),b.sortBy&&E.sort((m,A)=>{const k=it(m,b.sortBy)||"",I=it(A,b.sortBy)||"";if(["reviewDate","reevalDate","meetingDate"].includes(b.sortBy)){const C=k?new Date(k).getTime():0,M=I?new Date(I).getTime():0;return C-M}return k.toString().toLowerCase().localeCompare(I.toString().toLowerCase())}),c.value=E,console.log(" FILTER DEBUG: applyFilters completed. filteredStudents.value.length:",c.value.length)};return $t(()=>[e.value,r.value],()=>{console.log(" FILTER DEBUG: Watcher triggered. students.value.length:",e.value.length),e.value.length>0?(console.log(" FILTER DEBUG: Calling applyFilters from watcher"),y()):console.log(" FILTER DEBUG: No students to filter")},{deep:!0}),{showFilters:l,filteredStudents:c,currentFilters:u,toggleFilters:p,clearFilters:g,applyFilters:y,debouncedApplyFilters:h,getCurrentFilters:v}}const Au={grades:[],classServices:[{name:"SDC",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Co-teach",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"RSP",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Directed Studies",subcategories:["Directed Studies"],enabledSubcategories:["Directed Studies"]},{name:"FA",subcategories:["FA"],enabledSubcategories:["FA"]}],sdcSubcategories:[],customClassServices:[],serviceProviders:["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],customServiceProviders:[],numPeriods:7,periodLabels:["1","2","3","4","5","6","sh"],gmailApi:{enabled:!1,isWorkspace:!1,isInternalOAuth:!1,lastCheck:null}},Sa=se({...Au}),Aa=se(!1),Do=se(null);let Xf=!1;function Os(){const t=Ze(qe,"app_settings","global"),e=async()=>{var i;if(Aa.value)return new Promise(a=>{const o=$t(Aa,l=>{l||(o(),a(Sa.value))})});if(Xf&&!Do.value)return Sa.value;Aa.value=!0,Do.value=null;try{const a=await nr(t);if(Sa.value=a.exists()?a.data():{...Au},!((i=Sa.value.gmailApi)!=null&&i.lastCheck))try{await s()}catch(o){console.warn("Could not auto-check Gmail API status:",o)}}catch{Sa.value={...Au}}finally{Aa.value=!1,Xf=!0}return Sa.value},r=async i=>{Aa.value=!0,Do.value=null;try{const a=Ze(qe,"app_settings","general");await Ht(a,i),Sa.value={...i};try{localStorage.setItem("app_settings_backup",JSON.stringify(i))}catch(o){console.warn(" Failed to save localStorage backup:",o)}}catch(a){Do.value=a.message||"Unknown error";try{localStorage.setItem("app_settings_backup",JSON.stringify(i)),console.warn(" saveAppSettings: Fell back to localStorage due to Firestore error")}catch(o){throw console.error(" Both Firestore and localStorage saves failed:",o),new Error("Failed to save settings to both Firestore and localStorage")}}finally{Aa.value=!1}},n=async()=>{Aa.value=!0,Do.value=null;try{await Ht(t,{...Au}),Sa.value={...Au},Xf=!0}catch(i){throw Do.value=i.message,i}finally{Aa.value=!1}};!Xf&&!Aa.value&&e();const s=async()=>{try{const{checkAndAddGmailScope:i}=await js(async()=>{const{checkAndAddGmailScope:u}=await Promise.resolve().then(()=>Qy);return{checkAndAddGmailScope:u}},void 0),a=await i();let o=!1,l=a;try{const u=await fetch("https://oauth2.googleapis.com/tokeninfo");if(u.ok){const f=await u.json();o=f.hd&&f.hd.includes(".")}}catch(u){console.warn("Could not get detailed OAuth info:",u)}const c={...Sa.value,gmailApi:{enabled:a,isWorkspace:o,isInternalOAuth:l,lastCheck:new Date().toISOString()}};return await r(c),c.gmailApi}catch(i){return console.error("Failed to check Gmail API status:",i),{enabled:!1,isWorkspace:!1,isInternalOAuth:!1,lastCheck:new Date().toISOString(),error:i.message}}};return{appSettings:Sa,loadAppSettings:e,saveAppSettings:r,resetAppSettings:n,checkGmailApiStatus:s,loading:Aa,error:Do}}function Eo(){const{appSettings:t}=Os(),e=be(()=>{const o=t.value;return o!=null&&o.periodLabels&&(o!=null&&o.numPeriods)?[...o.periodLabels.slice(0,o.numPeriods)]:["1","2","3","4","5","6","7"]}),r=o=>{const l=parseInt(o);if(!l||l<1)return`Period ${o}`;const c=l-1;return e.value[c]||`Period ${l}`},n=o=>{const l=e.value.findIndex(c=>c===o);return l!==-1?l+1:null},s=be(()=>{var l;const o=((l=t.value)==null?void 0:l.numPeriods)||7;return Array.from({length:o},(c,u)=>u+1)}),i=be(()=>{const o={};return e.value.forEach((l,c)=>{o[l]=c+1}),o}),a=be(()=>{const o={};return e.value.forEach((l,c)=>{o[c+1]=l}),o});return{labels:e,getLabel:r,getNumber:n,numericPeriods:s,labelToNumberMap:i,numberToLabelMap:a}}function _k(t,e){const{students:r,userMapObj:n,currentUser:s,getCaseManagerId:i,getSchedule:a,getUserName:o,formatDate:l}=t,{getLabel:c}=Eo(),{filteredStudents:u,currentFilters:f,applyFilters:h}=e,p=(D,F)=>{if(!D)return{periods:{},isTeacher:!1,isCoTeacher:!1};let N=!1,L=!1;const O={};return Object.entries(D).forEach(([z,H])=>{const V=typeof H=="string"?H:H==null?void 0:H.teacherId,W=typeof H=="object"?H==null?void 0:H.coTeaching:null,G=W==null?void 0:W.caseManagerId;O[z]={teacherId:V,coTeaching:W,coTeachingCM:G,teacherName:o(V),coTeacherName:G?o(G):null,label:c(z)},V===F&&(N=!0),G===F&&(L=!0)}),{periods:O,isTeacher:N,isCoTeacher:L}},g=(D,F,N)=>{if(!D||!F)return[];switch(N){case"case_manager":return D.filter(L=>i(L)===F);case"service_provider":return D.filter(L=>{const O=a(L);return O?Object.values(O).some(H=>{var V;return typeof H=="string"?H===F:H&&typeof H=="object"?H.teacherId===F||((V=H.coTeaching)==null?void 0:V.caseManagerId)===F:!1}):!1});case"all":return D;default:return console.warn(`Unknown provider view: ${N}`),[]}},v=(D,F)=>!D||!F?[]:D.filter(N=>{const{isTeacher:L,isCoTeacher:O}=p(a(N),F);return L||O}),y=(D,F)=>{const N={};return D.forEach(L=>{const O=a(L);if(!O)return;const{periods:z}=p(O,F);Object.entries(z).forEach(([H,V])=>{(V.teacherId===F||V.coTeachingCM===F)&&(N[H]||(N[H]=[]),N[H].push(L))})}),N},b=be(()=>u.value||[]),E=D=>{const F=it(D,"firstName"),N=it(D,"lastName");return`${F} ${N}`},x=D=>({name:E(D),grade:it(D,"grade"),plan:it(D,"plan"),caseManager:o(i(D))}),w=D=>({reviewDate:l(it(D,"reviewDate")),reevalDate:l(it(D,"reevalDate")),meetingDate:l(it(D,"meetingDate"))}),R=D=>{const F=a(D);return F?Object.entries(F).reduce((N,[L,O])=>(N[L]={teacherId:O,teacherName:o(O)},N),{}):{}},P=D=>{f.search=D,h()},S=D=>{f.cm=D,h()},_=D=>{f.teacher=D,h()},m=D=>{f.viewMode=D,h()},A=be(()=>{const D={};return b.value.forEach(F=>{const N=it(F,"grade");D[N]||(D[N]=[]),D[N].push(F)}),D}),k=be(()=>{const D={};return b.value.forEach(F=>{const N=it(F,"plan");D[N]||(D[N]=[]),D[N].push(F)}),D}),I=be(()=>{var N;const D=(N=s.value)==null?void 0:N.role,F=f;return["teacher","paraeducator"].includes(D)?!1:D==="case_manager"||["sped_chair","admin_504","administrator_504_CM"].includes(D)?F.providerView!=="service_provider"&&F.teacher==="all":["admin","school_admin","staff_view","staff_edit","administrator"].includes(D)?F.teacher==="all"&&F.paraeducator==="all":D==="service_provider"?F.providerView!=="service_provider":!0}),C=be(()=>{var F;const D=(F=s.value)==null?void 0:F.role;return["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair"].includes(D)}),M=be(()=>{var F;const D=(F=s.value)==null?void 0:F.role;return["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair"].includes(D)});return $t(()=>I.value,D=>{D&&f.viewMode==="class"&&(console.log(" Auto-switching from class view to list view because class view is now disabled"),f.viewMode="list",h())},{immediate:!1}),{visibleStudents:b,currentUser:s,userMapObj:n,standardizeScheduleAccess:p,getProviderViewStudents:g,getClassViewStudents:v,groupStudentsByPeriod:y,groupStudentsByGrade:A,groupStudentsByPlan:k,canAccessFilters:M,isClassViewDisabled:I,isAdminRole:C,formatStudentName:E,formatStudentInfo:x,formatDates:w,getStudentSchedule:R,filterByName:P,filterByCaseManager:S,filterByTeacher:_,setViewMode:m,currentFilters:f,showProviderView:!1,providerViewOptions:be(()=>[])}}const Ft={ADMIN:"admin",SCHOOL_ADMIN:"school_admin",ADMIN_504:"admin_504",SPED_CHAIR:"sped_chair",STAFF_VIEW:"staff_view",STAFF_EDIT:"staff_edit",CASE_MANAGER:"case_manager",TEACHER:"teacher",SERVICE_PROVIDER:"service_provider",PARAEDUCATOR:"paraeducator"},aU={[Ft.ADMIN]:100,[Ft.SCHOOL_ADMIN]:90,[Ft.SPED_CHAIR]:80,[Ft.ADMIN_504]:70,[Ft.STAFF_EDIT]:65,[Ft.CASE_MANAGER]:60,[Ft.SERVICE_PROVIDER]:50,[Ft.STAFF_VIEW]:45,[Ft.TEACHER]:40,[Ft.PARAEDUCATOR]:30},ot={CAN_VIEW_ALL_STUDENTS:"canViewAllStudents",CAN_EDIT_ALL_STUDENTS:"canEditAllStudents",CAN_EDIT_OWN_STUDENTS:"canEditOwnStudents",CAN_SEND_FEEDBACK:"canSendFeedback",CAN_MANAGE_USERS:"canManageUsers",CAN_MANAGE_AIDES:"canManageAides",CAN_ACCESS_TESTING:"canAccessTesting",CAN_ACCESS_FILTERS:"canAccessFilters",SHOW_PROVIDER_VIEW:"showProviderView",CAN_USE_CLASS_VIEW:"canUseClassView"},iU={[Ft.ADMIN]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_MANAGE_USERS,ot.CAN_MANAGE_AIDES,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.ADMINISTRATOR]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_MANAGE_USERS,ot.CAN_MANAGE_AIDES,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.SPED_CHAIR]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_MANAGE_AIDES,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.SCHOOL_ADMIN]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_MANAGE_USERS,ot.CAN_MANAGE_AIDES,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.STAFF_VIEW]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.CAN_USE_CLASS_VIEW],[Ft.STAFF_EDIT]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.CAN_USE_CLASS_VIEW],[Ft.ADMINISTRATOR_504_CM]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_OWN_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_MANAGE_USERS,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.CASE_MANAGER]:[ot.CAN_EDIT_OWN_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_ACCESS_TESTING,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.TEACHER]:[ot.CAN_ACCESS_TESTING,ot.CAN_USE_CLASS_VIEW],[Ft.SERVICE_PROVIDER]:[ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_ACCESS_TESTING,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.PARAEDUCATOR]:[ot.CAN_ACCESS_TESTING,ot.CAN_USE_CLASS_VIEW]},oU={[Ft.SPED_CHAIR]:[{value:"all_iep",label:"*"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"},{value:"all",label:"All"}],[Ft.ADMINISTRATOR_504_CM]:[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}],admin_504:[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}],[Ft.CASE_MANAGER]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}],[Ft.SERVICE_PROVIDER]:[{value:"all",label:"All"},{value:"service_provider",label:"SP"}]},lU={[Ft.SPED_CHAIR]:"all",[Ft.ADMINISTRATOR_504_CM]:"case_manager",admin_504:"case_manager",[Ft.CASE_MANAGER]:"all",[Ft.SERVICE_PROVIDER]:"service_provider"},cU={[Ft.CASE_MANAGER]:{patterns:["case_manager","teacher"],description:"Students in their caseload and students they provide services to"},[Ft.TEACHER]:{patterns:["teacher"],description:"Students in their classes"},[Ft.SERVICE_PROVIDER]:{patterns:["teacher"],description:"Students in their classes"},[Ft.PARAEDUCATOR]:{patterns:["paraeducator"],description:"Students they are assigned to assist"},[Ft.SPED_CHAIR]:{patterns:["case_manager","teacher","all_iep"],description:"All students, with special access to IEP students"},[Ft.ADMINISTRATOR_504_CM]:{patterns:["case_manager","all_iep_504"],description:"All students, with special access to IEP/504 students"},[Ft.ADMIN]:{patterns:["all"],description:"All students"},[Ft.ADMINISTRATOR]:{patterns:["all"],description:"All students"},[Ft.SCHOOL_ADMIN]:{patterns:["all"],description:"All students"},[Ft.STAFF_VIEW]:{patterns:["all"],description:"All students (view-only)"},[Ft.STAFF_EDIT]:{patterns:["all"],description:"All students (can edit)"}},Da={case_manager:(t,e,r)=>r.getCaseManagerId(e)===t,teacher:(t,e,r)=>{const n=r.getSchedule(e);return n?Object.values(n).some(s=>{var i;return typeof s=="string"?s===t:s&&typeof s=="object"?s.teacherId===t||((i=s.coTeaching)==null?void 0:i.caseManagerId)===t:!1}):!1},paraeducator:(t,e,r,n)=>{if(!n)return!1;const s=n[t];if(!s)return!1;if((Array.isArray(s.directAssignment)?s.directAssignment:s.directAssignment?[s.directAssignment]:[]).includes(e.id))return!0;const a=r.getSchedule(e);if(!a)return!1;const o=s.classAssignment||{};return Object.entries(a).some(([l,c])=>{const u=typeof c=="string"?c:c==null?void 0:c.teacherId,f=o[l];return!f||!u?!1:(Array.isArray(f)?f:[f]).includes(u)})},all_iep:(t,e,r)=>it(e,"plan")==="IEP",all_iep_504:(t,e,r)=>{const n=it(e,"plan");return n==="IEP"||n==="504"},all:()=>!0},uU={[Ft.CASE_MANAGER]:{canSendFeedback:(t,e,r)=>r.getCaseManagerId(e)===t,description:"Can send feedback for students in their caseload"},[Ft.SPED_CHAIR]:{canSendFeedback:(t,e,r)=>{const n=r.getCaseManagerId(e)===t,s=Da.teacher(t,e,r),i=Da.all_iep(t,e,r);return n||s||i},description:"Can send feedback for students they case manage, teach, or have IEP"},[Ft.ADMINISTRATOR_504_CM]:{canSendFeedback:(t,e,r)=>{const n=r.getCaseManagerId(e)===t,s=Da.all_iep_504(t,e,r);return n||s},description:"Can send feedback for students they case manage or have IEP/504"},[Ft.ADMIN]:{canSendFeedback:()=>!0,description:"Can send feedback for all students"},[Ft.ADMINISTRATOR]:{canSendFeedback:()=>!0,description:"Can send feedback for all students"}},An={hasPermission:(t,e)=>(iU[t]||[]).includes(e),getProviderViewOptions:t=>oU[t]||[],getDefaultProviderView:t=>lU[t]||"all",canAccessStudent:(t,e,r,n,s=null)=>{var a;return(((a=cU[e])==null?void 0:a.patterns)||[]).some(o=>{const l=Da[o];return l?l(t,r,n,s):!1})},canSendFeedback:(t,e,r,n)=>{const s=uU[e];return s?s.canSendFeedback(t,r,n):!1},getRoleLevel:t=>aU[t]||0,hasHigherPrivileges:(t,e)=>An.getRoleLevel(t)>An.getRoleLevel(e)};function dU(t,e){const r=_k(t,e),n=be(()=>{var C;return(C=r.currentUser.value)==null?void 0:C.uid}),s=be(()=>{var C;return((C=r.currentUser.value)==null?void 0:C.role)||"guest"});console.log(" UNIFIED ROLE VIEW: Composable initialized for role:",s.value);const i=be(()=>An.getProviderViewOptions(s.value));$t(i,C=>{if(C.length>0){const M=An.getDefaultProviderView(s.value);C.map(F=>F.value).includes(e.currentFilters.providerView)||(e.currentFilters.providerView=M,e.applyFilters())}},{immediate:!0});const a=be(()=>{if(console.log(" UNIFIED ROLE VIEW: visibleStudents computed called for role:",s.value),!n.value)return console.log(" UNIFIED ROLE VIEW: No currentUserId, returning empty array"),[];const C=r.visibleStudents.value,M=e.currentFilters.providerView,D=s.value;if(console.log(" UNIFIED ROLE VIEW: Processing students:",{role:D,baseStudentsCount:C.length,providerView:M,currentUserId:n.value}),D==="paraeducator"||D==="teacher")return console.log(` ${D.toUpperCase()} ROLE VIEW: Received ${C.length} students from database`),console.log(` ${D.toUpperCase()} ROLE VIEW: Student names:`,C.map(F=>{var N,L,O,z;return`${((L=(N=F.app)==null?void 0:N.studentData)==null?void 0:L.firstName)||"Unknown"} ${((z=(O=F.app)==null?void 0:O.studentData)==null?void 0:z.lastName)||"Unknown"}`})),console.log(` ${D.toUpperCase()} ROLE VIEW: Returning students directly (no provider view filtering)`),C;if(!M||M==="")return C.filter(F=>An.canAccessStudent(n.value,D,F,t));switch(M){case"case_manager":return C.filter(F=>Da.case_manager(n.value,F,t));case"service_provider":return C.filter(F=>Da.teacher(n.value,F,t));case"all":return C.filter(F=>An.canAccessStudent(n.value,D,F,t));case"iep_all":return D==="sped_chair"?C.filter(F=>Da.all_iep(n.value,F,t)):[];case"all_iep":return C.filter(F=>{const N=Da.case_manager(n.value,F,t),L=Da.teacher(n.value,F,t);return N||L});case"iep_504_all":return D==="administrator_504_CM"||D==="admin_504"?C.filter(F=>Da.all_iep_504(n.value,F,t)):[];default:return console.warn(`Unknown provider view: ${M}`),[]}}),o=be(()=>An.hasPermission(s.value,ot.CAN_EDIT_ALL_STUDENTS)),l=be(()=>An.hasPermission(s.value,ot.CAN_EDIT_OWN_STUDENTS)),c=be(()=>An.hasPermission(s.value,ot.CAN_VIEW_ALL_STUDENTS)),u=be(()=>An.hasPermission(s.value,ot.CAN_MANAGE_USERS)),f=be(()=>An.hasPermission(s.value,ot.CAN_MANAGE_AIDES)),h=be(()=>An.hasPermission(s.value,ot.CAN_ACCESS_TESTING)),p=be(()=>h.value),g=be(()=>h.value),v=be(()=>An.hasPermission(s.value,ot.CAN_ACCESS_FILTERS)),y=be(()=>An.hasPermission(s.value,ot.SHOW_PROVIDER_VIEW)),b=be(()=>An.hasPermission(s.value,ot.CAN_USE_CLASS_VIEW)),E=C=>{var F,N;if(!n.value||!C)return!1;const M=s.value;return M==="paraeducator"||M==="teacher"?!1:M==="case_manager"?t.getCaseManagerId(C)===n.value:M==="service_provider"?(N=(F=C.app)==null?void 0:F.staffIds)==null?void 0:N.includes(n.value):["admin","school_admin","staff_edit","admin_504","sped_chair"].includes(M)},x=C=>!n.value||!C?!1:An.canSendFeedback(n.value,s.value,C,t),w=be(()=>n.value?r.groupStudentsByPeriod(a.value,n.value):{}),R=C=>{if(C==="class"&&!b.value){e.currentFilters.viewMode="list";return}e.currentFilters.viewMode=C},P=be(()=>{if(s.value!=="teacher")return{instruction:[],assessment:[]};const C={instruction:[],assessment:[]};return a.value.forEach(M=>{var D,F,N,L;(F=(D=M.app)==null?void 0:D.accommodations)!=null&&F.instruction&&C.instruction.push(M),(L=(N=M.app)==null?void 0:N.accommodations)!=null&&L.assessment&&C.assessment.push(M)}),C}),S=be(()=>{if(s.value!=="teacher")return{};const C={};return a.value.forEach(M=>{var F;const D=((F=M.app)==null?void 0:F.providers)||{};Object.entries(D).forEach(([N,L])=>{L&&(C[L]||(C[L]={provider:t.getUserName(L),providerType:N,students:[]}),C[L].students.push(M))})}),C}),_=be(()=>s.value==="teacher"),m=be(()=>s.value==="teacher"),A=be(()=>s.value==="teacher"),k=be(()=>!1),I=be(()=>!1);return{...r,visibleStudents:a,studentsByPeriod:w,providerViewOptions:i,showProviderView:y,canEditAllStudents:o,canEditOwnStudents:l,canViewAllStudents:c,canManageUsers:u,canManageAides:f,canAccessTesting:h,canAccessTestingPartial:p,hasAnyTestingAccess:g,canAccessFilters:v,canUseClassView:b,canEditStudent:E,canSendFeedback:x,setViewMode:R,studentsByAccommodation:P,studentsByServiceProvider:S,canViewAccommodations:_,canViewBasicInfo:m,canViewServiceProviders:A,canViewDates:k,canEditStudents:I,currentRole:s,currentUserId:n}}function fU(t,e){const r=_k(t,e),n=be(()=>{var o;return(o=r.currentUser.value)==null?void 0:o.uid}),s=be(()=>[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}]);$t(s,o=>{const l="case_manager";o.map(u=>u.value).includes(e.currentFilters.providerView)||(e.currentFilters.providerView=l,e.applyFilters())},{immediate:!0});const i=be(()=>{if(!n.value)return[];const o=r.visibleStudents.value;switch(e.currentFilters.providerView){case"case_manager":return r.getProviderViewStudents(o,n.value,"case_manager");case"iep_504_all":return o.filter(c=>{const u=it(c,"plan");return u==="IEP"||u==="504"});default:return[]}}),a=be(()=>n.value?r.groupStudentsByPeriod(i.value,n.value):{});return{...r,visibleStudents:i,studentsByPeriod:a,providerViewOptions:s,showProviderView:!0}}function hU(t,e){var g,v,y,b;const{currentUser:r}=t;ex();const n=be(()=>{var E;return((E=r.value)==null?void 0:E.role)||"guest"}),i=be(()=>{switch(n.value){case"admin_504":return fU(t,e);default:return dU(t,e)}}).value;n.value==="paraeducator"&&console.log(" ROLE-BASED VIEW: Paraeducator activeView:",{visibleStudents:((v=(g=i.visibleStudents)==null?void 0:g.value)==null?void 0:v.length)||0,providerViewOptions:((b=(y=i.providerViewOptions)==null?void 0:y.value)==null?void 0:b.length)||0,role:n.value});const a=be(()=>{var x;const E=(x=r.value)==null?void 0:x.role;return["admin","school_admin","staff_edit","sped_chair"].includes(E)}),o=be(()=>{var x;const E=(x=r.value)==null?void 0:x.role;return["case_manager","admin_504"].includes(E)}),l=be(()=>{var x;const E=(x=r.value)==null?void 0:x.role;return["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair"].includes(E)}),c=be(()=>{var x;const E=(x=r.value)==null?void 0:x.role;return["admin","school_admin","admin_504","sped_chair"].includes(E)}),u=be(()=>{var x;const E=(x=r.value)==null?void 0:x.role;return["admin","school_admin","admin_504","sped_chair"].includes(E)}),f=be(()=>!0),h=be(()=>!0),p=be(()=>!0);return{...i,currentRole:n,canEditAllStudents:a,canEditOwnStudents:o,canViewAllStudents:l,canManageUsers:c,canManageAides:u,canAccessTesting:f,canAccessTestingPartial:h,hasAnyTestingAccess:p}}function pU(t){Object.entries(t).reduce((e,[r,n])=>(e[r]=n.length,e),{})}function mU(t,e,r=null){const{aideAssignment:n,getCaseManagerId:s,getSchedule:i,standardizeScheduleAccess:a,currentUser:o}=t,{filteredStudents:l,currentFilters:c,getCurrentFilters:u}=e,f=r||l,h=se("list");$t(()=>c.viewMode,E=>{h.value=E||"list"});const p=be(()=>f.value.filter(E=>{var x,w,R,P;return((w=(x=E.app)==null?void 0:x.flags)==null?void 0:w.flag2)||((P=(R=E.app)==null?void 0:R.flags)==null?void 0:P.separateSetting)||E.separateSetting||E.flag2||!1})),g=be(()=>{var S,_,m;const E={};if(h.value!=="class")return E;const x=(S=o.value)==null?void 0:S.uid;if(!x)return console.log(" studentsByClass: No current user ID"),E;console.log(" studentsByClass: Current user ID:",x);const w=(_=t.currentUser.value)==null?void 0:_.role;w==="paraeducator"&&console.log(" studentsByClass DEBUG:",{role:w,roleBasedStudents:((m=r==null?void 0:r.value)==null?void 0:m.length)||0,aideAssignmentAvailable:!!n.value});let R;w==="case_manager"?(R=t.students.value,console.log(" studentsByClass: Case manager - using raw database students:",R.length)):w==="paraeducator"?(R=(r==null?void 0:r.value)||t.students.value,console.log(" studentsByClass: Paraeducator - using role-based students:",R.length)):(R=f.value,console.log(" studentsByClass: Other role - using provider-filtered students:",R.length));const P=u();return P.paraeducator&&P.paraeducator,R.forEach(A=>{const k=i(A)||{};Object.entries(k).forEach(([I,C])=>{var H,V;let M,D;if(typeof C=="string")M=C;else if(C&&typeof C=="object")M=C.teacherId,D=(H=C.coTeaching)==null?void 0:H.caseManagerId;else return;let F=!1;const N=u(),L=N.teacher&&N.teacher!=="all",O=N.paraeducator&&N.paraeducator!=="all";if(w==="paraeducator"){const W=(V=n.value)==null?void 0:V[x];W!=null&&W.classAssignment&&W.classAssignment[I]&&(F=(Array.isArray(W.classAssignment[I])?W.classAssignment[I]:[W.classAssignment[I]]).includes(M))}else if(["admin","administrator"].includes(w))if(L)F=M===N.teacher||D===N.teacher;else if(O){const W=n.value[N.paraeducator];W!=null&&W.classAssignment&&W.classAssignment[I]&&(F=(Array.isArray(W.classAssignment[I])?W.classAssignment[I]:[W.classAssignment[I]]).includes(M))}else F=!0;else F=M===x||D===x;!F||(E[I]||(E[I]=[]),E[I].some(W=>W.id===A.id))||E[I].push(A)})}),console.log(" studentsByClass: Final groups:",Object.keys(E).map(A=>`Period ${A}: ${E[A].length} students`)),pU(E),Object.keys(E).forEach(A=>{E[A].length===0&&delete E[A]}),Object.keys(E).sort((A,k)=>{const I=parseInt(A.replace(/\D/g,"")),C=parseInt(k.replace(/\D/g,""));return I-C}).reduce((A,k)=>(A[k]=E[k],A),{})}),v=be(()=>{var m,A;const E=u(),x=(m=t.currentUser.value)==null?void 0:m.role,w=(A=t.currentUser.value)==null?void 0:A.uid;let R=null;if(x==="paraeducator")R=w;else{if(!(E.paraeducator&&E.paraeducator!=="all"))return[];R=E.paraeducator}if(!R)return[];const P=n.value[R];if(!P||!P.directAssignment)return console.log(" directAssignmentStudents: No aide data or direct assignment for",R),[];const S=Array.isArray(P.directAssignment)?P.directAssignment:[P.directAssignment];console.log(" directAssignmentStudents: Direct student IDs:",S),console.log(" directAssignmentStudents: Available students:",f.value.length);const _=f.value.filter(k=>S.includes(k.id));return console.log(" directAssignmentStudents: Found direct assignment students:",_.length),_}),y=be(()=>{const E={};return f.value.forEach(x=>{const w=s(x);w&&(E[w]||(E[w]=[]),E[w].push(x))}),E});return{currentViewMode:h,studentsByClass:g,directAssignmentStudents:v,studentsByCaseManager:y,testingViewStudents:p,setViewMode:E=>{h.value=E,c.viewMode=E}}}function gU(t){const{router:e,fetchData:r}=t,n=se(null),s=se(null),i=se(!1),a=se(!1),o=se(!1),l=se(null),c=x=>{n.value=x},u=x=>{s.value=x},f=x=>{l.value=x,o.value=!0},h=()=>{console.log("Teacher feedback form sent successfully")},p=()=>{a.value=!1,r()},g=()=>{console.log("Student saved"),r()},v=()=>{e.push("/admin")},y=()=>{e.push("/aide-schedule")},b=async x=>{switch(x){case"add-student":a.value=!0;break;case"export":i.value=!0;break;case"print":window.print();break;case"admin":v();break;case"aide-schedule":y();break;case"logout":await E();break}},E=async()=>{try{const{useAuthStore:x}=await js(async()=>{const{useAuthStore:R}=await Promise.resolve().then(()=>EB);return{useAuthStore:R}},void 0);await x().logout(),e.push("/login")}catch(x){console.error("Logout failed:",x)}};return{editingStudentId:n,emailingStudentId:s,showExport:i,showAddStudent:a,showFeedbackDialog:o,feedbackStudentId:l,editStudent:c,emailStudent:u,handleTeacherFeedback:f,handleFormSent:h,handleStudentAdded:p,handleStudentSaved:g,navigateToAdmin:v,navigateToAideSchedule:y,handleNavAction:b,handleLogout:E}}const vU={class:"student-nav-menu"},yU=["title"],xU={class:"nav-content"},EU={class:"nav-section"},_U={class:"nav-buttons"},bU={key:0,class:"nav-section"},SU={class:"nav-buttons"},AU={key:1,class:"nav-section"},TU={class:"nav-buttons"},wU={class:"nav-section"},CU={class:"user-info"},kU={class:"user-details"},IU={key:0,class:"user-role"},DU={__name:"StudentNavMenu",props:{currentUser:{type:Object,default:null},isAdmin:{type:Boolean,default:!1}},emits:["action"],setup(t,{emit:e}){const r=t,n=e,s=be(()=>{var u;const c=(u=r.currentUser)==null?void 0:u.role;return c!=="paraeducator"&&c!=="teacher"}),i=se(!1);function a(){i.value=!i.value}function o(){i.value=!1}function l(c){n("action",c),o()}return(c,u)=>{var f,h,p,g;return B(),U("div",vU,[d("button",{onClick:a,class:Ye(["hamburger-btn",{active:i.value}]),title:i.value?"Close Menu":"Open Menu"},u[6]||(u[6]=[d("span",{class:"hamburger-line"},null,-1),d("span",{class:"hamburger-line"},null,-1),d("span",{class:"hamburger-line"},null,-1)]),10,yU),i.value?(B(),U("div",{key:0,class:"nav-overlay",onClick:o})):ve("",!0),d("div",{class:Ye(["nav-panel",{open:i.value}])},[d("div",{class:"nav-header"},[u[7]||(u[7]=d("h3",null,"Student Management",-1)),d("button",{onClick:o,class:"close-btn"},"")]),d("div",xU,[d("div",EU,[u[11]||(u[11]=d("h4",null,"Actions",-1)),d("div",_U,[s.value?(B(),U("button",{key:0,onClick:u[0]||(u[0]=v=>l("add-student")),class:"nav-btn primary"},u[8]||(u[8]=[d("span",null,"",-1),we(" Add Student ")]))):ve("",!0),d("button",{onClick:u[1]||(u[1]=v=>l("export")),class:"nav-btn"},u[9]||(u[9]=[d("span",null,"",-1),we(" Export ")])),d("button",{onClick:u[2]||(u[2]=v=>l("print")),class:"nav-btn print-btn"},u[10]||(u[10]=[d("span",null,"",-1),we(" Print ")]))])]),t.isAdmin?(B(),U("div",bU,[u[13]||(u[13]=d("h4",null,"Admin",-1)),d("div",SU,[d("button",{onClick:u[3]||(u[3]=v=>l("admin")),class:"nav-btn"},u[12]||(u[12]=[d("span",null,"",-1),we(" Admin Panel ")]))])])):ve("",!0),((f=t.currentUser)==null?void 0:f.role)==="paraeducator"?(B(),U("div",AU,[u[15]||(u[15]=d("h4",null,"Schedule",-1)),d("div",TU,[d("button",{onClick:u[4]||(u[4]=v=>l("aide-schedule")),class:"nav-btn"},u[14]||(u[14]=[d("span",null,"",-1),we(" My Schedule ")]))])])):ve("",!0),d("div",wU,[u[17]||(u[17]=d("h4",null,"User",-1)),d("div",CU,[d("div",kU,[d("strong",null,X(((h=t.currentUser)==null?void 0:h.name)||((p=t.currentUser)==null?void 0:p.email)||"User"),1),(g=t.currentUser)!=null&&g.role?(B(),U("span",IU,"("+X(t.currentUser.role)+")",1)):ve("",!0)]),d("button",{onClick:u[5]||(u[5]=v=>l("logout")),class:"nav-btn danger"},u[16]||(u[16]=[d("span",null,"",-1),we(" Logout ")]))])])])],2)])}}},PU=bt(DU,[["__scopeId","data-v-fd6a61ad"]]);function RU(t){const{appSettings:e,loadAppSettings:r,loading:n,error:s}=Os(),{getLabel:i}=Eo();Gt(async()=>{var C;try{console.log("StudentTable: Loading app settings..."),await r(),console.log("StudentTable: App settings loaded successfully"),t.studentData.students.value.length>0&&await rn.logStudentAccess("table_view","view",{studentCount:t.studentData.students.value.length,viewType:"student_table",hasFilters:(C=t.filterData)!=null&&C.currentFilters?Object.keys(t.filterData.currentFilters).length>0:!1})}catch(M){console.error("StudentTable: Error loading app settings:",M)}});const a=C=>{const M=t.userMap[C];return M&&(M.name||M.email)||C},o=C=>{const M=t.userMap[C];return M?M.initials?M.initials:M.name?M.name.split(" ").map(F=>F[0]).join("").toUpperCase():M.email?M.email[0].toUpperCase():"?":"?"},l=C=>{const M=t.userMap[C];if(!M)return C;if(M.name){const D=M.name.trim().split(" ");return D.length===1?D[0]:`${D[0][0]}. ${D.slice(1).join(" ")}`}return M.email?M.email[0].toUpperCase():C},c=C=>C?new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",u=C=>{if(!C)return"";const M=new Date,D=new Date(C),F=Math.ceil((D-M)/(1e3*60*60*24));return F<=0?"flag-critical":F<=7?"flag-high":F<=14?"flag-medium":F<=21?"flag-mid":F<=28?"flag-low":F<=35?"flag-prep":""},f=C=>{if(!C)return"";const M=new Date,D=new Date(C),F=Math.ceil((D-M)/(1e3*60*60*24));return F<=0?"flag-critical":F<=7?"flag-high":F<=14?"flag-medium":F<=21?"flag-mid":F<=28?"flag-low":F<=60?"flag-prep-reeval":""},h=C=>u(it(C,"meetingDate")),p=C=>u(it(C,"reviewDate")),g=C=>f(it(C,"reevalDate")),v=C=>{var M,D;return((D=(M=C.app)==null?void 0:M.studentData)==null?void 0:D.caseManagerId)||C.caseManagerId||C.casemanager_id},y=(C,M)=>{var D,F;return((F=(D=C.app)==null?void 0:D.flags)==null?void 0:F[M])||C[M]||!1},b=C=>{var M;return((M=C.app)==null?void 0:M.flags)&&Object.values(C.app.flags).some(Boolean)||C.flag1||C.flag2},E=(C,M)=>{var F,N,L;return((N=(F=C.app)==null?void 0:F.documents)==null?void 0:N[M])||((L=C.app)==null?void 0:L[M])||C[M]||C[`${M}_url`]||null},x=C=>{var D,F;const M=((F=(D=C.app)==null?void 0:D.documents)==null?void 0:F.additionalDocuments)||[];return Array.isArray(M)?M:[]},w=C=>{var M,D,F,N,L;if(C.schedule)return C.schedule;if((D=(M=C.app)==null?void 0:M.schedule)!=null&&D.periods)return C.app.schedule.periods;if((N=(F=C.aeries)==null?void 0:F.schedule)!=null&&N.periods)return C.aeries.schedule.periods;if((L=C.aeries)!=null&&L.schedule){const O={};return Object.entries(C.aeries.schedule).forEach(([z,H])=>{if(H&&H.teacherId){const V=parseInt(z.replace("period","")),W=i(V);let G=H.teacherId;if(t.userMap){let re=Object.values(t.userMap).find(de=>de.aeriesId===H.teacherId||de.aeriesId===parseInt(H.teacherId)||de.id===H.teacherId);if(re||(re=Object.values(t.userMap).find(de=>{var ae,ce,te,Z;return((ae=de.aeriesId)==null?void 0:ae.toString())===((ce=H.teacherId)==null?void 0:ce.toString())||((te=de.id)==null?void 0:te.toString())===((Z=H.teacherId)==null?void 0:Z.toString())})),re&&re.name){const de=re.name.split(" ");if(de.length>=2){const ae=de[0],ce=de[de.length-1];G=`${ae.charAt(0)}. ${ce}`}else G=re.name}else console.warn(`Teacher not found for ID: ${H.teacherId}`)}O[W]=G}}),Object.keys(O).length>0?O:null}return null},R=C=>{const M=[],D=w(C);return D&&Object.entries(D).forEach(([F,N])=>{if(N&&typeof N=="object"&&N.coTeaching){const L=N.coTeaching.subject;L&&M.push(`Co-teach: ${L}`)}}),M};return{appSettings:e,appSettingsLoading:n,appSettingsError:s,getUserName:a,getUserInitials:o,getUserInitialLastName:l,formatDate:c,getMeetingUrgencyClass:h,getReviewUrgencyClass:p,getReevalUrgencyClass:g,getCaseManagerId:v,getFlagValue:y,hasFlags:b,getDocumentUrl:E,getAdditionalDocuments:x,getSchedule:w,getClassServices:C=>{var O,z;const M=((z=(O=C.app)==null?void 0:O.schedule)==null?void 0:z.classServices)||C.services||[],D=R(C),F=M.filter(H=>H&&H.startsWith&&H.startsWith("Co-teach:")),N=D.filter(H=>!F.includes(H)),L=[...M,...N];if(n.value)return Array.isArray(L)?L.filter(H=>typeof H=="string"&&H.includes(":")):[];if(s.value)return Array.isArray(L)?L.filter(H=>typeof H=="string"&&H.includes(":")):[];if(e.value&&e.value.classServices){const H=e.value.classServices.filter(V=>V.enabledSubcategories&&V.enabledSubcategories.length>0).map(V=>V.name);return Array.isArray(L)?L.filter(V=>{if(typeof V!="string"||!V.includes(":"))return!1;const W=V.split(":")[0];return H.includes(W)}):[]}return Array.isArray(L)?L.filter(H=>typeof H=="string"&&H.includes(":")):[]},getOtherServices:C=>{var D,F;const M=((F=(D=C.app)==null?void 0:D.schedule)==null?void 0:F.otherServices)||C.other_services||[];return Array.isArray(M)?M.filter(N=>!!N):[]},getCoTeachingServices:R,hasServiceProviders:C=>{var N;const M=((N=C.app)==null?void 0:N.providers)||{},D=Object.values(M).some(Boolean);if(n.value||s.value){const L=C.speechId||C.speech_id||C.mhId||C.mh_id||C.otId||C.ot_id||C.ptId||C.pt_id||C.scId||C.sc_id||C.trId||C.tr_id||C.audId||C.aud_id||C.viId||C.vi_id||C.atId||C.at_id||C.dhhId||C.dhh_id||C.omId||C.om_id||C.bisId||C.bis_id||C.hnId||C.hn_id||C.swId||C.sw_id;return D||L}let F=!1;if(e.value&&e.value.serviceProviders){const L=e.value.serviceProviders,O={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"};F=L.some(z=>{const H=O[z];return C[H]||C[H.replace("Id","_id")]})}else F=C.speechId||C.speech_id||C.mhId||C.mh_id||C.otId||C.ot_id||C.ptId||C.pt_id||C.scId||C.sc_id||C.trId||C.tr_id||C.audId||C.aud_id||C.viId||C.vi_id||C.atId||C.at_id||C.dhhId||C.dhh_id||C.omId||C.om_id||C.bisId||C.bis_id||C.hnId||C.hn_id||C.swId||C.sw_id;return D||F},getServiceProviderId:(C,M)=>{var F,N;return((N=(F=C.app)==null?void 0:F.providers)==null?void 0:N[M])||C[M]||C[M.replace("Id","_id")]||null},getProviderFieldName:C=>({SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"})[C]||`${C.toLowerCase()}Id`,isDirectAssignment:C=>{if(!t.currentUser||t.currentUser.role!=="paraeducator")return!1;const M=t.currentUser.uid;let D=t.aideSchedule[M];if(!D){const F=Object.entries(t.userMap).find(([N,L])=>L.uid===M||L.email===t.currentUser.email);if(F){const[N]=F;D=t.aideSchedule[N]}}return(D==null?void 0:D.directAssignment)===C},formatListFromText:nU,getFlagClass:C=>{const M=C.toLowerCase();return M.includes("critical")?"flag-critical":M.includes("high")?"flag-high":M.includes("medium")?"flag-medium":M.includes("mid")?"flag-mid":M.includes("low")?"flag-low":M.includes("prep")?"flag-prep":"flag-low"},getPeriodLabel:i}}let Yf;const FU=new Uint8Array(16);function NU(){if(!Yf&&(Yf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yf(FU)}const bn=[];for(let t=0;t<256;++t)bn.push((t+256).toString(16).slice(1));function OU(t,e=0){return bn[t[e+0]]+bn[t[e+1]]+bn[t[e+2]]+bn[t[e+3]]+"-"+bn[t[e+4]]+bn[t[e+5]]+"-"+bn[t[e+6]]+bn[t[e+7]]+"-"+bn[t[e+8]]+bn[t[e+9]]+"-"+bn[t[e+10]]+bn[t[e+11]]+bn[t[e+12]]+bn[t[e+13]]+bn[t[e+14]]+bn[t[e+15]]}const MU=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Z_={randomUUID:MU};function LU(t,e,r){if(Z_.randomUUID&&!t)return Z_.randomUUID();t=t||{};const n=t.random||(t.rng||NU)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,OU(n)}var jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ax(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Sk={exports:{}};function BU(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fm={exports:{}};const UU={},$U=Object.freeze(Object.defineProperty({__proto__:null,default:UU},Symbol.toStringTag,{value:"Module"})),VU=ax($U);var eb;function er(){return eb||(eb=1,function(t,e){(function(r,n){t.exports=n()})(jt,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof jt<"u"&&jt.crypto&&(i=jt.crypto),!i&&typeof BU=="function")try{i=VU}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function E(){}return function(x){var w;return E.prototype=x,w=new E,E.prototype=null,w}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(E){var x=o(this);return E&&x.mixIn(E),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var x in E)E.hasOwnProperty(x)&&(this[x]=E[x]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=c.WordArray=u.extend({init:function(E,x){E=this.words=E||[],x!=s?this.sigBytes=x:this.sigBytes=E.length*4},toString:function(E){return(E||p).stringify(this)},concat:function(E){var x=this.words,w=E.words,R=this.sigBytes,P=E.sigBytes;if(this.clamp(),R%4)for(var S=0;S<P;S++){var _=w[S>>>2]>>>24-S%4*8&255;x[R+S>>>2]|=_<<24-(R+S)%4*8}else for(var m=0;m<P;m+=4)x[R+m>>>2]=w[m>>>2];return this.sigBytes+=P,this},clamp:function(){var E=this.words,x=this.sigBytes;E[x>>>2]&=4294967295<<32-x%4*8,E.length=n.ceil(x/4)},clone:function(){var E=u.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var x=[],w=0;w<E;w+=4)x.push(a());return new f.init(x,E)}}),h=l.enc={},p=h.Hex={stringify:function(E){for(var x=E.words,w=E.sigBytes,R=[],P=0;P<w;P++){var S=x[P>>>2]>>>24-P%4*8&255;R.push((S>>>4).toString(16)),R.push((S&15).toString(16))}return R.join("")},parse:function(E){for(var x=E.length,w=[],R=0;R<x;R+=2)w[R>>>3]|=parseInt(E.substr(R,2),16)<<24-R%8*4;return new f.init(w,x/2)}},g=h.Latin1={stringify:function(E){for(var x=E.words,w=E.sigBytes,R=[],P=0;P<w;P++){var S=x[P>>>2]>>>24-P%4*8&255;R.push(String.fromCharCode(S))}return R.join("")},parse:function(E){for(var x=E.length,w=[],R=0;R<x;R++)w[R>>>2]|=(E.charCodeAt(R)&255)<<24-R%4*8;return new f.init(w,x)}},v=h.Utf8={stringify:function(E){try{return decodeURIComponent(escape(g.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return g.parse(unescape(encodeURIComponent(E)))}},y=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=v.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var x,w=this._data,R=w.words,P=w.sigBytes,S=this.blockSize,_=S*4,m=P/_;E?m=n.ceil(m):m=n.max((m|0)-this._minBufferSize,0);var A=m*S,k=n.min(A*4,P);if(A){for(var I=0;I<A;I+=S)this._doProcessBlock(R,I);x=R.splice(0,A),w.sigBytes-=k}return new f.init(x,k)},clone:function(){var E=u.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});c.Hasher=y.extend({cfg:u.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(E){return function(x,w){return new E.init(w).finalize(x)}},_createHmacHelper:function(E){return function(x,w){return new b.HMAC.init(E,w).finalize(x)}}});var b=l.algo={};return l}(Math);return r})}(Fm)),Fm.exports}var Nm={exports:{}},tb;function Hp(){return tb||(tb=1,function(t,e){(function(r,n){t.exports=n(er())})(jt,function(r){return function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=s.x64={};l.Word=a.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=a.extend({init:function(c,u){c=this.words=c||[],u!=n?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,f=[],h=0;h<u;h++){var p=c[h];f.push(p.high),f.push(p.low)}return o.create(f,this.sigBytes)},clone:function(){for(var c=a.clone.call(this),u=c.words=this.words.slice(0),f=u.length,h=0;h<f;h++)u[h]=u[h].clone();return c}})}(),r})}(Nm)),Nm.exports}var Om={exports:{}},rb;function HU(){return rb||(rb=1,function(t,e){(function(r,n){t.exports=n(er())})(jt,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,o=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],f=0;f<c;f++)u[f>>>2]|=l[f]<<24-f%4*8;a.call(this,u,c)}else a.apply(this,arguments)};o.prototype=i}}(),r.lib.WordArray})}(Om)),Om.exports}var Mm={exports:{}},nb;function jU(){return nb||(nb=1,function(t,e){(function(r,n){t.exports=n(er())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,f=[],h=0;h<u;h+=2){var p=c[h>>>2]>>>16-h%4*8&65535;f.push(String.fromCharCode(p))}return f.join("")},parse:function(l){for(var c=l.length,u=[],f=0;f<c;f++)u[f>>>1]|=l.charCodeAt(f)<<16-f%2*16;return i.create(u,c*2)}},a.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,f=[],h=0;h<u;h+=2){var p=o(c[h>>>2]>>>16-h%4*8&65535);f.push(String.fromCharCode(p))}return f.join("")},parse:function(l){for(var c=l.length,u=[],f=0;f<c;f++)u[f>>>1]|=o(l.charCodeAt(f)<<16-f%2*16);return i.create(u,c*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}}(),r.enc.Utf16})}(Mm)),Mm.exports}var Lm={exports:{}},sb;function xl(){return sb||(sb=1,function(t,e){(function(r,n){t.exports=n(er())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,f=this._map;l.clamp();for(var h=[],p=0;p<u;p+=3)for(var g=c[p>>>2]>>>24-p%4*8&255,v=c[p+1>>>2]>>>24-(p+1)%4*8&255,y=c[p+2>>>2]>>>24-(p+2)%4*8&255,b=g<<16|v<<8|y,E=0;E<4&&p+E*.75<u;E++)h.push(f.charAt(b>>>6*(3-E)&63));var x=f.charAt(64);if(x)for(;h.length%4;)h.push(x);return h.join("")},parse:function(l){var c=l.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<u.length;h++)f[u.charCodeAt(h)]=h}var p=u.charAt(64);if(p){var g=l.indexOf(p);g!==-1&&(c=g)}return o(l,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,c,u){for(var f=[],h=0,p=0;p<c;p++)if(p%4){var g=u[l.charCodeAt(p-1)]<<p%4*2,v=u[l.charCodeAt(p)]>>>6-p%4*2,y=g|v;f[h>>>2]|=y<<24-h%4*8,h++}return i.create(f,h)}}(),r.enc.Base64})}(Lm)),Lm.exports}var Bm={exports:{}},ab;function GU(){return ab||(ab=1,function(t,e){(function(r,n){t.exports=n(er())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,f=l.sigBytes,h=c?this._safe_map:this._map;l.clamp();for(var p=[],g=0;g<f;g+=3)for(var v=u[g>>>2]>>>24-g%4*8&255,y=u[g+1>>>2]>>>24-(g+1)%4*8&255,b=u[g+2>>>2]>>>24-(g+2)%4*8&255,E=v<<16|y<<8|b,x=0;x<4&&g+x*.75<f;x++)p.push(h.charAt(E>>>6*(3-x)&63));var w=h.charAt(64);if(w)for(;p.length%4;)p.push(w);return p.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,f=c?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var p=0;p<f.length;p++)h[f.charCodeAt(p)]=p}var g=f.charAt(64);if(g){var v=l.indexOf(g);v!==-1&&(u=v)}return o(l,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,c,u){for(var f=[],h=0,p=0;p<c;p++)if(p%4){var g=u[l.charCodeAt(p-1)]<<p%4*2,v=u[l.charCodeAt(p)]>>>6-p%4*2,y=g|v;f[h>>>2]|=y<<24-h%4*8,h++}return i.create(f,h)}}(),r.enc.Base64url})}(Bm)),Bm.exports}var Um={exports:{}},ib;function El(){return ib||(ib=1,function(t,e){(function(r,n){t.exports=n(er())})(jt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[];(function(){for(var v=0;v<64;v++)c[v]=n.abs(n.sin(v+1))*4294967296|0})();var u=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,y){for(var b=0;b<16;b++){var E=y+b,x=v[E];v[E]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var w=this._hash.words,R=v[y+0],P=v[y+1],S=v[y+2],_=v[y+3],m=v[y+4],A=v[y+5],k=v[y+6],I=v[y+7],C=v[y+8],M=v[y+9],D=v[y+10],F=v[y+11],N=v[y+12],L=v[y+13],O=v[y+14],z=v[y+15],H=w[0],V=w[1],W=w[2],G=w[3];H=f(H,V,W,G,R,7,c[0]),G=f(G,H,V,W,P,12,c[1]),W=f(W,G,H,V,S,17,c[2]),V=f(V,W,G,H,_,22,c[3]),H=f(H,V,W,G,m,7,c[4]),G=f(G,H,V,W,A,12,c[5]),W=f(W,G,H,V,k,17,c[6]),V=f(V,W,G,H,I,22,c[7]),H=f(H,V,W,G,C,7,c[8]),G=f(G,H,V,W,M,12,c[9]),W=f(W,G,H,V,D,17,c[10]),V=f(V,W,G,H,F,22,c[11]),H=f(H,V,W,G,N,7,c[12]),G=f(G,H,V,W,L,12,c[13]),W=f(W,G,H,V,O,17,c[14]),V=f(V,W,G,H,z,22,c[15]),H=h(H,V,W,G,P,5,c[16]),G=h(G,H,V,W,k,9,c[17]),W=h(W,G,H,V,F,14,c[18]),V=h(V,W,G,H,R,20,c[19]),H=h(H,V,W,G,A,5,c[20]),G=h(G,H,V,W,D,9,c[21]),W=h(W,G,H,V,z,14,c[22]),V=h(V,W,G,H,m,20,c[23]),H=h(H,V,W,G,M,5,c[24]),G=h(G,H,V,W,O,9,c[25]),W=h(W,G,H,V,_,14,c[26]),V=h(V,W,G,H,C,20,c[27]),H=h(H,V,W,G,L,5,c[28]),G=h(G,H,V,W,S,9,c[29]),W=h(W,G,H,V,I,14,c[30]),V=h(V,W,G,H,N,20,c[31]),H=p(H,V,W,G,A,4,c[32]),G=p(G,H,V,W,C,11,c[33]),W=p(W,G,H,V,F,16,c[34]),V=p(V,W,G,H,O,23,c[35]),H=p(H,V,W,G,P,4,c[36]),G=p(G,H,V,W,m,11,c[37]),W=p(W,G,H,V,I,16,c[38]),V=p(V,W,G,H,D,23,c[39]),H=p(H,V,W,G,L,4,c[40]),G=p(G,H,V,W,R,11,c[41]),W=p(W,G,H,V,_,16,c[42]),V=p(V,W,G,H,k,23,c[43]),H=p(H,V,W,G,M,4,c[44]),G=p(G,H,V,W,N,11,c[45]),W=p(W,G,H,V,z,16,c[46]),V=p(V,W,G,H,S,23,c[47]),H=g(H,V,W,G,R,6,c[48]),G=g(G,H,V,W,I,10,c[49]),W=g(W,G,H,V,O,15,c[50]),V=g(V,W,G,H,A,21,c[51]),H=g(H,V,W,G,N,6,c[52]),G=g(G,H,V,W,_,10,c[53]),W=g(W,G,H,V,D,15,c[54]),V=g(V,W,G,H,P,21,c[55]),H=g(H,V,W,G,C,6,c[56]),G=g(G,H,V,W,z,10,c[57]),W=g(W,G,H,V,k,15,c[58]),V=g(V,W,G,H,L,21,c[59]),H=g(H,V,W,G,m,6,c[60]),G=g(G,H,V,W,F,10,c[61]),W=g(W,G,H,V,S,15,c[62]),V=g(V,W,G,H,M,21,c[63]),w[0]=w[0]+H|0,w[1]=w[1]+V|0,w[2]=w[2]+W|0,w[3]=w[3]+G|0},_doFinalize:function(){var v=this._data,y=v.words,b=this._nDataBytes*8,E=v.sigBytes*8;y[E>>>5]|=128<<24-E%32;var x=n.floor(b/4294967296),w=b;y[(E+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,y[(E+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,v.sigBytes=(y.length+1)*4,this._process();for(var R=this._hash,P=R.words,S=0;S<4;S++){var _=P[S];P[S]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return R},clone:function(){var v=o.clone.call(this);return v._hash=this._hash.clone(),v}});function f(v,y,b,E,x,w,R){var P=v+(y&b|~y&E)+x+R;return(P<<w|P>>>32-w)+y}function h(v,y,b,E,x,w,R){var P=v+(y&E|b&~E)+x+R;return(P<<w|P>>>32-w)+y}function p(v,y,b,E,x,w,R){var P=v+(y^b^E)+x+R;return(P<<w|P>>>32-w)+y}function g(v,y,b,E,x,w,R){var P=v+(b^(y|~E))+x+R;return(P<<w|P>>>32-w)+y}s.MD5=o._createHelper(u),s.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5})}(Um)),Um.exports}var $m={exports:{}},ob;function Ak(){return ob||(ob=1,function(t,e){(function(r,n){t.exports=n(er())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,o=n.algo,l=[],c=o.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var h=this._hash.words,p=h[0],g=h[1],v=h[2],y=h[3],b=h[4],E=0;E<80;E++){if(E<16)l[E]=u[f+E]|0;else{var x=l[E-3]^l[E-8]^l[E-14]^l[E-16];l[E]=x<<1|x>>>31}var w=(p<<5|p>>>27)+b+l[E];E<20?w+=(g&v|~g&y)+1518500249:E<40?w+=(g^v^y)+1859775393:E<60?w+=(g&v|g&y|v&y)-1894007588:w+=(g^v^y)-899497514,b=y,y=v,v=g<<30|g>>>2,g=p,p=w}h[0]=h[0]+p|0,h[1]=h[1]+g|0,h[2]=h[2]+v|0,h[3]=h[3]+y|0,h[4]=h[4]+b|0},_doFinalize:function(){var u=this._data,f=u.words,h=this._nDataBytes*8,p=u.sigBytes*8;return f[p>>>5]|=128<<24-p%32,f[(p+64>>>9<<4)+14]=Math.floor(h/4294967296),f[(p+64>>>9<<4)+15]=h,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=a.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c)}(),r.SHA1})}($m)),$m.exports}var Vm={exports:{}},lb;function ix(){return lb||(lb=1,function(t,e){(function(r,n){t.exports=n(er())})(jt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[],u=[];(function(){function p(b){for(var E=n.sqrt(b),x=2;x<=E;x++)if(!(b%x))return!1;return!0}function g(b){return(b-(b|0))*4294967296|0}for(var v=2,y=0;y<64;)p(v)&&(y<8&&(c[y]=g(n.pow(v,1/2))),u[y]=g(n.pow(v,1/3)),y++),v++})();var f=[],h=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(p,g){for(var v=this._hash.words,y=v[0],b=v[1],E=v[2],x=v[3],w=v[4],R=v[5],P=v[6],S=v[7],_=0;_<64;_++){if(_<16)f[_]=p[g+_]|0;else{var m=f[_-15],A=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,k=f[_-2],I=(k<<15|k>>>17)^(k<<13|k>>>19)^k>>>10;f[_]=A+f[_-7]+I+f[_-16]}var C=w&R^~w&P,M=y&b^y&E^b&E,D=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),F=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),N=S+F+C+u[_]+f[_],L=D+M;S=P,P=R,R=w,w=x+N|0,x=E,E=b,b=y,y=N+L|0}v[0]=v[0]+y|0,v[1]=v[1]+b|0,v[2]=v[2]+E|0,v[3]=v[3]+x|0,v[4]=v[4]+w|0,v[5]=v[5]+R|0,v[6]=v[6]+P|0,v[7]=v[7]+S|0},_doFinalize:function(){var p=this._data,g=p.words,v=this._nDataBytes*8,y=p.sigBytes*8;return g[y>>>5]|=128<<24-y%32,g[(y+64>>>9<<4)+14]=n.floor(v/4294967296),g[(y+64>>>9<<4)+15]=v,p.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=o._createHelper(h),s.HmacSHA256=o._createHmacHelper(h)}(Math),r.SHA256})}(Vm)),Vm.exports}var Hm={exports:{}},cb;function WU(){return cb||(cb=1,function(t,e){(function(r,n,s){t.exports=n(er(),ix())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)}(),r.SHA224})}(Hm)),Hm.exports}var jm={exports:{}},ub;function Tk(){return ub||(ub=1,function(t,e){(function(r,n,s){t.exports=n(er(),Hp())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,o=a.Word,l=a.WordArray,c=n.algo;function u(){return o.create.apply(o,arguments)}var f=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var g=0;g<80;g++)h[g]=u()})();var p=c.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(g,v){for(var y=this._hash.words,b=y[0],E=y[1],x=y[2],w=y[3],R=y[4],P=y[5],S=y[6],_=y[7],m=b.high,A=b.low,k=E.high,I=E.low,C=x.high,M=x.low,D=w.high,F=w.low,N=R.high,L=R.low,O=P.high,z=P.low,H=S.high,V=S.low,W=_.high,G=_.low,re=m,de=A,ae=k,ce=I,te=C,Z=M,xe=D,J=F,Y=N,Q=L,fe=O,ye=z,ie=H,ee=V,ge=W,Te=G,ke=0;ke<80;ke++){var Ae,We,De=h[ke];if(ke<16)We=De.high=g[v+ke*2]|0,Ae=De.low=g[v+ke*2+1]|0;else{var je=h[ke-15],$e=je.high,Ie=je.low,Ke=($e>>>1|Ie<<31)^($e>>>8|Ie<<24)^$e>>>7,_e=(Ie>>>1|$e<<31)^(Ie>>>8|$e<<24)^(Ie>>>7|$e<<25),Ee=h[ke-2],Se=Ee.high,Le=Ee.low,ze=(Se>>>19|Le<<13)^(Se<<3|Le>>>29)^Se>>>6,lt=(Le>>>19|Se<<13)^(Le<<3|Se>>>29)^(Le>>>6|Se<<26),xt=h[ke-7],St=xt.high,Vt=xt.low,pt=h[ke-16],ct=pt.high,mt=pt.low;Ae=_e+Vt,We=Ke+St+(Ae>>>0<_e>>>0?1:0),Ae=Ae+lt,We=We+ze+(Ae>>>0<lt>>>0?1:0),Ae=Ae+mt,We=We+ct+(Ae>>>0<mt>>>0?1:0),De.high=We,De.low=Ae}var Ct=Y&fe^~Y&ie,Rt=Q&ye^~Q&ee,mr=re&ae^re&te^ae&te,ns=de&ce^de&Z^ce&Z,Ri=(re>>>28|de<<4)^(re<<30|de>>>2)^(re<<25|de>>>7),ms=(de>>>28|re<<4)^(de<<30|re>>>2)^(de<<25|re>>>7),Cl=(Y>>>14|Q<<18)^(Y>>>18|Q<<14)^(Y<<23|Q>>>9),Wa=(Q>>>14|Y<<18)^(Q>>>18|Y<<14)^(Q<<23|Y>>>9),So=f[ke],sn=So.high,Ao=So.low,Rr=Te+Wa,On=ge+Cl+(Rr>>>0<Te>>>0?1:0),Rr=Rr+Rt,On=On+Ct+(Rr>>>0<Rt>>>0?1:0),Rr=Rr+Ao,On=On+sn+(Rr>>>0<Ao>>>0?1:0),Rr=Rr+Ae,On=On+We+(Rr>>>0<Ae>>>0?1:0),kl=ms+ns,Qc=Ri+mr+(kl>>>0<ms>>>0?1:0);ge=ie,Te=ee,ie=fe,ee=ye,fe=Y,ye=Q,Q=J+Rr|0,Y=xe+On+(Q>>>0<J>>>0?1:0)|0,xe=te,J=Z,te=ae,Z=ce,ae=re,ce=de,de=Rr+kl|0,re=On+Qc+(de>>>0<Rr>>>0?1:0)|0}A=b.low=A+de,b.high=m+re+(A>>>0<de>>>0?1:0),I=E.low=I+ce,E.high=k+ae+(I>>>0<ce>>>0?1:0),M=x.low=M+Z,x.high=C+te+(M>>>0<Z>>>0?1:0),F=w.low=F+J,w.high=D+xe+(F>>>0<J>>>0?1:0),L=R.low=L+Q,R.high=N+Y+(L>>>0<Q>>>0?1:0),z=P.low=z+ye,P.high=O+fe+(z>>>0<ye>>>0?1:0),V=S.low=V+ee,S.high=H+ie+(V>>>0<ee>>>0?1:0),G=_.low=G+Te,_.high=W+ge+(G>>>0<Te>>>0?1:0)},_doFinalize:function(){var g=this._data,v=g.words,y=this._nDataBytes*8,b=g.sigBytes*8;v[b>>>5]|=128<<24-b%32,v[(b+128>>>10<<5)+30]=Math.floor(y/4294967296),v[(b+128>>>10<<5)+31]=y,g.sigBytes=v.length*4,this._process();var E=this._hash.toX32();return E},clone:function(){var g=i.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});n.SHA512=i._createHelper(p),n.HmacSHA512=i._createHmacHelper(p)}(),r.SHA512})}(jm)),jm.exports}var Gm={exports:{}},db;function zU(){return db||(db=1,function(t,e){(function(r,n,s){t.exports=n(er(),Hp(),Tk())})(jt,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,o=n.algo,l=o.SHA512,c=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=l._createHelper(c),n.HmacSHA384=l._createHmacHelper(c)}(),r.SHA384})}(Gm)),Gm.exports}var Wm={exports:{}},fb;function KU(){return fb||(fb=1,function(t,e){(function(r,n,s){t.exports=n(er(),Hp())})(jt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.x64,c=l.Word,u=s.algo,f=[],h=[],p=[];(function(){for(var y=1,b=0,E=0;E<24;E++){f[y+5*b]=(E+1)*(E+2)/2%64;var x=b%5,w=(2*y+3*b)%5;y=x,b=w}for(var y=0;y<5;y++)for(var b=0;b<5;b++)h[y+5*b]=b+(2*y+3*b)%5*5;for(var R=1,P=0;P<24;P++){for(var S=0,_=0,m=0;m<7;m++){if(R&1){var A=(1<<m)-1;A<32?_^=1<<A:S^=1<<A-32}R&128?R=R<<1^113:R<<=1}p[P]=c.create(S,_)}})();var g=[];(function(){for(var y=0;y<25;y++)g[y]=c.create()})();var v=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var y=this._state=[],b=0;b<25;b++)y[b]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(y,b){for(var E=this._state,x=this.blockSize/2,w=0;w<x;w++){var R=y[b+2*w],P=y[b+2*w+1];R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360;var S=E[w];S.high^=P,S.low^=R}for(var _=0;_<24;_++){for(var m=0;m<5;m++){for(var A=0,k=0,I=0;I<5;I++){var S=E[m+5*I];A^=S.high,k^=S.low}var C=g[m];C.high=A,C.low=k}for(var m=0;m<5;m++)for(var M=g[(m+4)%5],D=g[(m+1)%5],F=D.high,N=D.low,A=M.high^(F<<1|N>>>31),k=M.low^(N<<1|F>>>31),I=0;I<5;I++){var S=E[m+5*I];S.high^=A,S.low^=k}for(var L=1;L<25;L++){var A,k,S=E[L],O=S.high,z=S.low,H=f[L];H<32?(A=O<<H|z>>>32-H,k=z<<H|O>>>32-H):(A=z<<H-32|O>>>64-H,k=O<<H-32|z>>>64-H);var V=g[h[L]];V.high=A,V.low=k}var W=g[0],G=E[0];W.high=G.high,W.low=G.low;for(var m=0;m<5;m++)for(var I=0;I<5;I++){var L=m+5*I,S=E[L],re=g[L],de=g[(m+1)%5+5*I],ae=g[(m+2)%5+5*I];S.high=re.high^~de.high&ae.high,S.low=re.low^~de.low&ae.low}var S=E[0],ce=p[_];S.high^=ce.high,S.low^=ce.low}},_doFinalize:function(){var y=this._data,b=y.words;this._nDataBytes*8;var E=y.sigBytes*8,x=this.blockSize*32;b[E>>>5]|=1<<24-E%32,b[(n.ceil((E+1)/x)*x>>>5)-1]|=128,y.sigBytes=b.length*4,this._process();for(var w=this._state,R=this.cfg.outputLength/8,P=R/8,S=[],_=0;_<P;_++){var m=w[_],A=m.high,k=m.low;A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,S.push(k),S.push(A)}return new a.init(S,R)},clone:function(){for(var y=o.clone.call(this),b=y._state=this._state.slice(0),E=0;E<25;E++)b[E]=b[E].clone();return y}});s.SHA3=o._createHelper(v),s.HmacSHA3=o._createHmacHelper(v)}(Math),r.SHA3})}(Wm)),Wm.exports}var zm={exports:{}},hb;function qU(){return hb||(hb=1,function(t,e){(function(r,n){t.exports=n(er())})(jt,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=a.create([0,1518500249,1859775393,2400959708,2840853838]),g=a.create([1352829926,1548603684,1836072691,2053994217,0]),v=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(P,S){for(var _=0;_<16;_++){var m=S+_,A=P[m];P[m]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var k=this._hash.words,I=p.words,C=g.words,M=c.words,D=u.words,F=f.words,N=h.words,L,O,z,H,V,W,G,re,de,ae;W=L=k[0],G=O=k[1],re=z=k[2],de=H=k[3],ae=V=k[4];for(var ce,_=0;_<80;_+=1)ce=L+P[S+M[_]]|0,_<16?ce+=y(O,z,H)+I[0]:_<32?ce+=b(O,z,H)+I[1]:_<48?ce+=E(O,z,H)+I[2]:_<64?ce+=x(O,z,H)+I[3]:ce+=w(O,z,H)+I[4],ce=ce|0,ce=R(ce,F[_]),ce=ce+V|0,L=V,V=H,H=R(z,10),z=O,O=ce,ce=W+P[S+D[_]]|0,_<16?ce+=w(G,re,de)+C[0]:_<32?ce+=x(G,re,de)+C[1]:_<48?ce+=E(G,re,de)+C[2]:_<64?ce+=b(G,re,de)+C[3]:ce+=y(G,re,de)+C[4],ce=ce|0,ce=R(ce,N[_]),ce=ce+ae|0,W=ae,ae=de,de=R(re,10),re=G,G=ce;ce=k[1]+z+de|0,k[1]=k[2]+H+ae|0,k[2]=k[3]+V+W|0,k[3]=k[4]+L+G|0,k[4]=k[0]+O+re|0,k[0]=ce},_doFinalize:function(){var P=this._data,S=P.words,_=this._nDataBytes*8,m=P.sigBytes*8;S[m>>>5]|=128<<24-m%32,S[(m+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,P.sigBytes=(S.length+1)*4,this._process();for(var A=this._hash,k=A.words,I=0;I<5;I++){var C=k[I];k[I]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}return A},clone:function(){var P=o.clone.call(this);return P._hash=this._hash.clone(),P}});function y(P,S,_){return P^S^_}function b(P,S,_){return P&S|~P&_}function E(P,S,_){return(P|~S)^_}function x(P,S,_){return P&_|S&~_}function w(P,S,_){return P^(S|~_)}function R(P,S){return P<<S|P>>>32-S}s.RIPEMD160=o._createHelper(v),s.HmacRIPEMD160=o._createHmacHelper(v)}(),r.RIPEMD160})}(zm)),zm.exports}var Km={exports:{}},pb;function ox(){return pb||(pb=1,function(t,e){(function(r,n){t.exports=n(er())})(jt,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,o=a.Utf8,l=n.algo;l.HMAC=i.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var f=c.blockSize,h=f*4;u.sigBytes>h&&(u=c.finalize(u)),u.clamp();for(var p=this._oKey=u.clone(),g=this._iKey=u.clone(),v=p.words,y=g.words,b=0;b<f;b++)v[b]^=1549556828,y[b]^=909522486;p.sigBytes=g.sigBytes=h,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,f=u.finalize(c);u.reset();var h=u.finalize(this._oKey.clone().concat(f));return h}})})()})}(Km)),Km.exports}var qm={exports:{}},mb;function XU(){return mb||(mb=1,function(t,e){(function(r,n,s){t.exports=n(er(),ix(),ox())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.SHA256,c=o.HMAC,u=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,h){for(var p=this.cfg,g=c.create(p.hasher,f),v=a.create(),y=a.create([1]),b=v.words,E=y.words,x=p.keySize,w=p.iterations;b.length<x;){var R=g.update(h).finalize(y);g.reset();for(var P=R.words,S=P.length,_=R,m=1;m<w;m++){_=g.finalize(_),g.reset();for(var A=_.words,k=0;k<S;k++)P[k]^=A[k]}v.concat(R),E[0]++}return v.sigBytes=x*4,v}});n.PBKDF2=function(f,h,p){return u.create(p).compute(f,h)}}(),r.PBKDF2})}(qm)),qm.exports}var Xm={exports:{}},gb;function _o(){return gb||(gb=1,function(t,e){(function(r,n,s){t.exports=n(er(),Ak(),ox())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.MD5,c=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var h,p=this.cfg,g=p.hasher.create(),v=a.create(),y=v.words,b=p.keySize,E=p.iterations;y.length<b;){h&&g.update(h),h=g.update(u).finalize(f),g.reset();for(var x=1;x<E;x++)h=g.finalize(h),g.reset();v.concat(h)}return v.sigBytes=b*4,v}});n.EvpKDF=function(u,f,h){return c.create(h).compute(u,f)}}(),r.EvpKDF})}(Xm)),Xm.exports}var Ym={exports:{}},vb;function En(){return vb||(vb=1,function(t,e){(function(r,n,s){t.exports=n(er(),_o())})(jt,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=i.BufferedBlockAlgorithm,c=s.enc;c.Utf8;var u=c.Base64,f=s.algo,h=f.EvpKDF,p=i.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(A,k){return this.create(this._ENC_XFORM_MODE,A,k)},createDecryptor:function(A,k){return this.create(this._DEC_XFORM_MODE,A,k)},init:function(A,k,I){this.cfg=this.cfg.extend(I),this._xformMode=A,this._key=k,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(A){return this._append(A),this._process()},finalize:function(A){A&&this._append(A);var k=this._doFinalize();return k},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function A(k){return typeof k=="string"?m:P}return function(k){return{encrypt:function(I,C,M){return A(C).encrypt(k,I,C,M)},decrypt:function(I,C,M){return A(C).decrypt(k,I,C,M)}}}}()});i.StreamCipher=p.extend({_doFinalize:function(){var A=this._process(!0);return A},blockSize:1});var g=s.mode={},v=i.BlockCipherMode=a.extend({createEncryptor:function(A,k){return this.Encryptor.create(A,k)},createDecryptor:function(A,k){return this.Decryptor.create(A,k)},init:function(A,k){this._cipher=A,this._iv=k}}),y=g.CBC=function(){var A=v.extend();A.Encryptor=A.extend({processBlock:function(I,C){var M=this._cipher,D=M.blockSize;k.call(this,I,C,D),M.encryptBlock(I,C),this._prevBlock=I.slice(C,C+D)}}),A.Decryptor=A.extend({processBlock:function(I,C){var M=this._cipher,D=M.blockSize,F=I.slice(C,C+D);M.decryptBlock(I,C),k.call(this,I,C,D),this._prevBlock=F}});function k(I,C,M){var D,F=this._iv;F?(D=F,this._iv=n):D=this._prevBlock;for(var N=0;N<M;N++)I[C+N]^=D[N]}return A}(),b=s.pad={},E=b.Pkcs7={pad:function(A,k){for(var I=k*4,C=I-A.sigBytes%I,M=C<<24|C<<16|C<<8|C,D=[],F=0;F<C;F+=4)D.push(M);var N=o.create(D,C);A.concat(N)},unpad:function(A){var k=A.words[A.sigBytes-1>>>2]&255;A.sigBytes-=k}};i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:y,padding:E}),reset:function(){var A;p.reset.call(this);var k=this.cfg,I=k.iv,C=k.mode;this._xformMode==this._ENC_XFORM_MODE?A=C.createEncryptor:(A=C.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==A?this._mode.init(this,I&&I.words):(this._mode=A.call(C,this,I&&I.words),this._mode.__creator=A)},_doProcessBlock:function(A,k){this._mode.processBlock(A,k)},_doFinalize:function(){var A,k=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(k.pad(this._data,this.blockSize),A=this._process(!0)):(A=this._process(!0),k.unpad(A)),A},blockSize:128/32});var x=i.CipherParams=a.extend({init:function(A){this.mixIn(A)},toString:function(A){return(A||this.formatter).stringify(this)}}),w=s.format={},R=w.OpenSSL={stringify:function(A){var k,I=A.ciphertext,C=A.salt;return C?k=o.create([1398893684,1701076831]).concat(C).concat(I):k=I,k.toString(u)},parse:function(A){var k,I=u.parse(A),C=I.words;return C[0]==1398893684&&C[1]==1701076831&&(k=o.create(C.slice(2,4)),C.splice(0,4),I.sigBytes-=16),x.create({ciphertext:I,salt:k})}},P=i.SerializableCipher=a.extend({cfg:a.extend({format:R}),encrypt:function(A,k,I,C){C=this.cfg.extend(C);var M=A.createEncryptor(I,C),D=M.finalize(k),F=M.cfg;return x.create({ciphertext:D,key:I,iv:F.iv,algorithm:A,mode:F.mode,padding:F.padding,blockSize:A.blockSize,formatter:C.format})},decrypt:function(A,k,I,C){C=this.cfg.extend(C),k=this._parse(k,C.format);var M=A.createDecryptor(I,C).finalize(k.ciphertext);return M},_parse:function(A,k){return typeof A=="string"?k.parse(A,this):A}}),S=s.kdf={},_=S.OpenSSL={execute:function(A,k,I,C,M){if(C||(C=o.random(64/8)),M)var D=h.create({keySize:k+I,hasher:M}).compute(A,C);else var D=h.create({keySize:k+I}).compute(A,C);var F=o.create(D.words.slice(k),I*4);return D.sigBytes=k*4,x.create({key:D,iv:F,salt:C})}},m=i.PasswordBasedCipher=P.extend({cfg:P.cfg.extend({kdf:_}),encrypt:function(A,k,I,C){C=this.cfg.extend(C);var M=C.kdf.execute(I,A.keySize,A.ivSize,C.salt,C.hasher);C.iv=M.iv;var D=P.encrypt.call(this,A,k,M.key,C);return D.mixIn(M),D},decrypt:function(A,k,I,C){C=this.cfg.extend(C),k=this._parse(k,C.format);var M=C.kdf.execute(I,A.keySize,A.ivSize,k.salt,C.hasher);C.iv=M.iv;var D=P.decrypt.call(this,A,k,M.key,C);return D}})}()})}(Ym)),Ym.exports}var Qm={exports:{}},yb;function YU(){return yb||(yb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize;s.call(this,i,a,l,o),this._prevBlock=i.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=i.slice(a,a+l);s.call(this,i,a,l,o),this._prevBlock=c}});function s(i,a,o,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var f=0;f<o;f++)i[a+f]^=c[f]}return n}(),r.mode.CFB})}(Qm)),Qm.exports}var Jm={exports:{}},xb;function QU(){return xb||(xb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var f=u.slice(0);o.encryptBlock(f,0),u[l-1]=u[l-1]+1|0;for(var h=0;h<l;h++)i[a+h]^=f[h]}});return n.Decryptor=s,n}(),r.mode.CTR})}(Jm)),Jm.exports}var Zm={exports:{}},Eb;function JU(){return Eb||(Eb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(o){if((o>>24&255)===255){var l=o>>16&255,c=o>>8&255,u=o&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,o=0,o+=l<<16,o+=c<<8,o+=u}else o+=1<<24;return o}function i(o){return(o[0]=s(o[0]))===0&&(o[1]=s(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,f=this._iv,h=this._counter;f&&(h=this._counter=f.slice(0),this._iv=void 0),i(h);var p=h.slice(0);c.encryptBlock(p,0);for(var g=0;g<u;g++)o[l+g]^=p[g]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(Zm)),Zm.exports}var eg={exports:{}},_b;function ZU(){return _b||(_b=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(u,0);for(var f=0;f<l;f++)i[a+f]^=u[f]}});return n.Decryptor=s,n}(),r.mode.OFB})}(eg)),eg.exports}var tg={exports:{}},bb;function e$(){return bb||(bb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(tg)),tg.exports}var rg={exports:{}},Sb;function t$(){return Sb||(Sb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,o=a-i%a,l=i+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(rg)),rg.exports}var ng={exports:{}},Ab;function r$(){return Ab||(Ab=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(ng)),ng.exports}var sg={exports:{}},Tb;function n$(){return Tb||(Tb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(sg)),sg.exports}var ag={exports:{}},wb;function s$(){return wb||(wb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(ag)),ag.exports}var ig={exports:{}},Cb;function a$(){return Cb||(Cb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(ig)),ig.exports}var og={exports:{}},kb;function i$(){return kb||(kb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(jt,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,o=s.enc,l=o.Hex,c=s.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var f=l.parse(u);return a.create({ciphertext:f})}}}(),r.format.Hex})}(og)),og.exports}var lg={exports:{}},Ib;function o$(){return Ib||(Ib=1,function(t,e){(function(r,n,s){t.exports=n(er(),xl(),El(),_o(),En())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,o=[],l=[],c=[],u=[],f=[],h=[],p=[],g=[],v=[],y=[];(function(){for(var x=[],w=0;w<256;w++)w<128?x[w]=w<<1:x[w]=w<<1^283;for(var R=0,P=0,w=0;w<256;w++){var S=P^P<<1^P<<2^P<<3^P<<4;S=S>>>8^S&255^99,o[R]=S,l[S]=R;var _=x[R],m=x[_],A=x[m],k=x[S]*257^S*16843008;c[R]=k<<24|k>>>8,u[R]=k<<16|k>>>16,f[R]=k<<8|k>>>24,h[R]=k;var k=A*16843009^m*65537^_*257^R*16843008;p[S]=k<<24|k>>>8,g[S]=k<<16|k>>>16,v[S]=k<<8|k>>>24,y[S]=k,R?(R=_^x[x[x[A^_]]],P^=x[x[P]]):R=P=1}})();var b=[0,1,2,4,8,16,32,64,128,27,54],E=a.AES=i.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,R=w.words,P=w.sigBytes/4,S=this._nRounds=P+6,_=(S+1)*4,m=this._keySchedule=[],A=0;A<_;A++)A<P?m[A]=R[A]:(x=m[A-1],A%P?P>6&&A%P==4&&(x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255]):(x=x<<8|x>>>24,x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255],x^=b[A/P|0]<<24),m[A]=m[A-P]^x);for(var k=this._invKeySchedule=[],I=0;I<_;I++){var A=_-I;if(I%4)var x=m[A];else var x=m[A-4];I<4||A<=4?k[I]=x:k[I]=p[o[x>>>24]]^g[o[x>>>16&255]]^v[o[x>>>8&255]]^y[o[x&255]]}}},encryptBlock:function(x,w){this._doCryptBlock(x,w,this._keySchedule,c,u,f,h,o)},decryptBlock:function(x,w){var R=x[w+1];x[w+1]=x[w+3],x[w+3]=R,this._doCryptBlock(x,w,this._invKeySchedule,p,g,v,y,l);var R=x[w+1];x[w+1]=x[w+3],x[w+3]=R},_doCryptBlock:function(x,w,R,P,S,_,m,A){for(var k=this._nRounds,I=x[w]^R[0],C=x[w+1]^R[1],M=x[w+2]^R[2],D=x[w+3]^R[3],F=4,N=1;N<k;N++){var L=P[I>>>24]^S[C>>>16&255]^_[M>>>8&255]^m[D&255]^R[F++],O=P[C>>>24]^S[M>>>16&255]^_[D>>>8&255]^m[I&255]^R[F++],z=P[M>>>24]^S[D>>>16&255]^_[I>>>8&255]^m[C&255]^R[F++],H=P[D>>>24]^S[I>>>16&255]^_[C>>>8&255]^m[M&255]^R[F++];I=L,C=O,M=z,D=H}var L=(A[I>>>24]<<24|A[C>>>16&255]<<16|A[M>>>8&255]<<8|A[D&255])^R[F++],O=(A[C>>>24]<<24|A[M>>>16&255]<<16|A[D>>>8&255]<<8|A[I&255])^R[F++],z=(A[M>>>24]<<24|A[D>>>16&255]<<16|A[I>>>8&255]<<8|A[C&255])^R[F++],H=(A[D>>>24]<<24|A[I>>>16&255]<<16|A[C>>>8&255]<<8|A[M&255])^R[F++];x[w]=L,x[w+1]=O,x[w+2]=z,x[w+3]=H},keySize:256/32});n.AES=i._createHelper(E)}(),r.AES})}(lg)),lg.exports}var cg={exports:{}},Db;function l$(){return Db||(Db=1,function(t,e){(function(r,n,s){t.exports=n(er(),xl(),El(),_o(),En())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=a.extend({_doReset:function(){for(var b=this._key,E=b.words,x=[],w=0;w<56;w++){var R=l[w]-1;x[w]=E[R>>>5]>>>31-R%32&1}for(var P=this._subKeys=[],S=0;S<16;S++){for(var _=P[S]=[],m=u[S],w=0;w<24;w++)_[w/6|0]|=x[(c[w]-1+m)%28]<<31-w%6,_[4+(w/6|0)]|=x[28+(c[w+24]-1+m)%28]<<31-w%6;_[0]=_[0]<<1|_[0]>>>31;for(var w=1;w<7;w++)_[w]=_[w]>>>(w-1)*4+3;_[7]=_[7]<<5|_[7]>>>27}for(var A=this._invSubKeys=[],w=0;w<16;w++)A[w]=P[15-w]},encryptBlock:function(b,E){this._doCryptBlock(b,E,this._subKeys)},decryptBlock:function(b,E){this._doCryptBlock(b,E,this._invSubKeys)},_doCryptBlock:function(b,E,x){this._lBlock=b[E],this._rBlock=b[E+1],g.call(this,4,252645135),g.call(this,16,65535),v.call(this,2,858993459),v.call(this,8,16711935),g.call(this,1,1431655765);for(var w=0;w<16;w++){for(var R=x[w],P=this._lBlock,S=this._rBlock,_=0,m=0;m<8;m++)_|=f[m][((S^R[m])&h[m])>>>0];this._lBlock=S,this._rBlock=P^_}var A=this._lBlock;this._lBlock=this._rBlock,this._rBlock=A,g.call(this,1,1431655765),v.call(this,8,16711935),v.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),b[E]=this._lBlock,b[E+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(b,E){var x=(this._lBlock>>>b^this._rBlock)&E;this._rBlock^=x,this._lBlock^=x<<b}function v(b,E){var x=(this._rBlock>>>b^this._lBlock)&E;this._lBlock^=x,this._rBlock^=x<<b}n.DES=a._createHelper(p);var y=o.TripleDES=a.extend({_doReset:function(){var b=this._key,E=b.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=E.slice(0,2),w=E.length<4?E.slice(0,2):E.slice(2,4),R=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=p.createEncryptor(i.create(x)),this._des2=p.createEncryptor(i.create(w)),this._des3=p.createEncryptor(i.create(R))},encryptBlock:function(b,E){this._des1.encryptBlock(b,E),this._des2.decryptBlock(b,E),this._des3.encryptBlock(b,E)},decryptBlock:function(b,E){this._des3.decryptBlock(b,E),this._des2.encryptBlock(b,E),this._des1.decryptBlock(b,E)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(y)}(),r.TripleDES})}(cg)),cg.exports}var ug={exports:{}},Pb;function c$(){return Pb||(Pb=1,function(t,e){(function(r,n,s){t.exports=n(er(),xl(),El(),_o(),En())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=a.RC4=i.extend({_doReset:function(){for(var u=this._key,f=u.words,h=u.sigBytes,p=this._S=[],g=0;g<256;g++)p[g]=g;for(var g=0,v=0;g<256;g++){var y=g%h,b=f[y>>>2]>>>24-y%4*8&255;v=(v+p[g]+b)%256;var E=p[g];p[g]=p[v],p[v]=E}this._i=this._j=0},_doProcessBlock:function(u,f){u[f]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,f=this._i,h=this._j,p=0,g=0;g<4;g++){f=(f+1)%256,h=(h+u[f])%256;var v=u[f];u[f]=u[h],u[h]=v,p|=u[(u[f]+u[h])%256]<<24-g*8}return this._i=f,this._j=h,p}n.RC4=i._createHelper(o);var c=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});n.RC4Drop=i._createHelper(c)}(),r.RC4})}(ug)),ug.exports}var dg={exports:{}},Rb;function u$(){return Rb||(Rb=1,function(t,e){(function(r,n,s){t.exports=n(er(),xl(),El(),_o(),En())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.Rabbit=i.extend({_doReset:function(){for(var h=this._key.words,p=this.cfg.iv,g=0;g<4;g++)h[g]=(h[g]<<8|h[g]>>>24)&16711935|(h[g]<<24|h[g]>>>8)&4278255360;var v=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],y=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)y[g]^=v[g+4&7];if(p){var b=p.words,E=b[0],x=b[1],w=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,P=w>>>16|R&4294901760,S=R<<16|w&65535;y[0]^=w,y[1]^=P,y[2]^=R,y[3]^=S,y[4]^=w,y[5]^=P,y[6]^=R,y[7]^=S;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(h,p){var g=this._X;f.call(this),o[0]=g[0]^g[5]>>>16^g[3]<<16,o[1]=g[2]^g[7]>>>16^g[5]<<16,o[2]=g[4]^g[1]>>>16^g[7]<<16,o[3]=g[6]^g[3]>>>16^g[1]<<16;for(var v=0;v<4;v++)o[v]=(o[v]<<8|o[v]>>>24)&16711935|(o[v]<<24|o[v]>>>8)&4278255360,h[p+v]^=o[v]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,p=this._C,g=0;g<8;g++)l[g]=p[g];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var g=0;g<8;g++){var v=h[g]+p[g],y=v&65535,b=v>>>16,E=((y*y>>>17)+y*b>>>15)+b*b,x=((v&4294901760)*v|0)+((v&65535)*v|0);c[g]=E^x}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=i._createHelper(u)}(),r.Rabbit})}(dg)),dg.exports}var fg={exports:{}},Fb;function d$(){return Fb||(Fb=1,function(t,e){(function(r,n,s){t.exports=n(er(),xl(),El(),_o(),En())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.RabbitLegacy=i.extend({_doReset:function(){var h=this._key.words,p=this.cfg.iv,g=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],v=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var y=0;y<4;y++)f.call(this);for(var y=0;y<8;y++)v[y]^=g[y+4&7];if(p){var b=p.words,E=b[0],x=b[1],w=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,P=w>>>16|R&4294901760,S=R<<16|w&65535;v[0]^=w,v[1]^=P,v[2]^=R,v[3]^=S,v[4]^=w,v[5]^=P,v[6]^=R,v[7]^=S;for(var y=0;y<4;y++)f.call(this)}},_doProcessBlock:function(h,p){var g=this._X;f.call(this),o[0]=g[0]^g[5]>>>16^g[3]<<16,o[1]=g[2]^g[7]>>>16^g[5]<<16,o[2]=g[4]^g[1]>>>16^g[7]<<16,o[3]=g[6]^g[3]>>>16^g[1]<<16;for(var v=0;v<4;v++)o[v]=(o[v]<<8|o[v]>>>24)&16711935|(o[v]<<24|o[v]>>>8)&4278255360,h[p+v]^=o[v]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,p=this._C,g=0;g<8;g++)l[g]=p[g];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var g=0;g<8;g++){var v=h[g]+p[g],y=v&65535,b=v>>>16,E=((y*y>>>17)+y*b>>>15)+b*b,x=((v&4294901760)*v|0)+((v&65535)*v|0);c[g]=E^x}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=i._createHelper(u)}(),r.RabbitLegacy})}(fg)),fg.exports}var hg={exports:{}},Nb;function f$(){return Nb||(Nb=1,function(t,e){(function(r,n,s){t.exports=n(er(),xl(),El(),_o(),En())})(jt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function f(y,b){let E=b>>24&255,x=b>>16&255,w=b>>8&255,R=b&255,P=y.sbox[0][E]+y.sbox[1][x];return P=P^y.sbox[2][w],P=P+y.sbox[3][R],P}function h(y,b,E){let x=b,w=E,R;for(let P=0;P<o;++P)x=x^y.pbox[P],w=f(y,x)^w,R=x,x=w,w=R;return R=x,x=w,w=R,w=w^y.pbox[o],x=x^y.pbox[o+1],{left:x,right:w}}function p(y,b,E){let x=b,w=E,R;for(let P=o+1;P>1;--P)x=x^y.pbox[P],w=f(y,x)^w,R=x,x=w,w=R;return R=x,x=w,w=R,w=w^y.pbox[1],x=x^y.pbox[0],{left:x,right:w}}function g(y,b,E){for(let S=0;S<4;S++){y.sbox[S]=[];for(let _=0;_<256;_++)y.sbox[S][_]=c[S][_]}let x=0;for(let S=0;S<o+2;S++)y.pbox[S]=l[S]^b[x],x++,x>=E&&(x=0);let w=0,R=0,P=0;for(let S=0;S<o+2;S+=2)P=h(y,w,R),w=P.left,R=P.right,y.pbox[S]=w,y.pbox[S+1]=R;for(let S=0;S<4;S++)for(let _=0;_<256;_+=2)P=h(y,w,R),w=P.left,R=P.right,y.sbox[S][_]=w,y.sbox[S][_+1]=R;return!0}var v=a.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var y=this._keyPriorReset=this._key,b=y.words,E=y.sigBytes/4;g(u,b,E)}},encryptBlock:function(y,b){var E=h(u,y[b],y[b+1]);y[b]=E.left,y[b+1]=E.right},decryptBlock:function(y,b){var E=p(u,y[b],y[b+1]);y[b]=E.left,y[b+1]=E.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(v)}(),r.Blowfish})}(hg)),hg.exports}(function(t,e){(function(r,n,s){t.exports=n(er(),Hp(),HU(),jU(),xl(),GU(),El(),Ak(),ix(),WU(),Tk(),zU(),KU(),qU(),ox(),XU(),_o(),En(),YU(),QU(),JU(),ZU(),e$(),t$(),r$(),n$(),s$(),a$(),i$(),o$(),l$(),c$(),u$(),d$(),f$())})(jt,function(r){return r})})(Sk);var h$=Sk.exports;const Xi=bk(h$);class p${constructor(){this.encryptionKey="your-dev-key-here"}async encryptAndUploadPdf(e,r){try{if(console.log(" Starting PDF encryption for student:",r),console.log(" File details:",{name:e.name,size:e.size,type:e.type}),(!this.encryptionKey||this.encryptionKey==="your-dev-key-here")&&console.warn(" Using default encryption key - set VITE_PDF_ENCRYPTION_KEY in production"),!dt.currentUser)throw new Error("User not authenticated");if(console.log(" Current user:",dt.currentUser.uid),r){console.log(" Checking student access for:",r);try{if(!(await nr(Ze(qe,"students",r))).exists())throw new Error(`Student ${r} not found`);console.log(" Student document exists")}catch(l){throw console.error(" Student access check failed:",l),new Error(`Student access check failed: ${l.message}`)}}console.log(" Reading file as ArrayBuffer...");const n=await e.arrayBuffer();console.log(" ArrayBuffer read, size:",n.byteLength),console.log(" Converting to Base64...");const s=btoa(new Uint8Array(n).reduce((l,c)=>l+String.fromCharCode(c),""));console.log(" Base64 conversion complete, length:",s.length),console.log(" Encrypting content...");const i=Xi.AES.encrypt(s,this.encryptionKey).toString();console.log(" Encryption complete, length:",i.length);const a=`${LU()}.enc`;console.log(" Generated filename:",a),console.log(" Uploading to storage...");const o=_h(Rc,`students/${r}/${a}`);return console.log(" Storage path:",`students/${r}/${a}`),await UC(o,i),console.log(" Upload to storage successful"),console.log(" Storing metadata in Firestore..."),await Ht(Ze(qe,"pdfMetadata",a),{originalName:e.name,studentId:r,uploadedBy:dt.currentUser.uid,uploadedAt:kn(),accessCount:0,lastAccessed:null,encryptionVersion:"1.0",fileSize:e.size,mimeType:e.type}),console.log(" Metadata stored successfully"),a}catch(n){throw console.error(" PDF encryption failed:",n),console.error(" Error details:",{message:n.message,code:n.code,stack:n.stack}),new Error(`Failed to securely store PDF: ${n.message}`)}}async downloadAndDecryptPdf(e,r){try{if(console.log(" Starting secure PDF download process..."),console.log(" Verifying user access permissions..."),!await this.verifyAccess(r))throw new Error("Access denied");console.log(" Access permissions verified"),console.log(" Getting authentication token...");const{auth:s}=await js(async()=>{const{auth:h}=await Promise.resolve().then(()=>Qy);return{auth:h}},void 0),i=await s.currentUser.getIdToken(),a=`https://downloadstudentfile-zr6j2ycwuq-uc.a.run.app/downloadStudentFile?studentId=${r}&fileName=${e}`;console.log(" Downloading encrypted file from secure storage...");const o=await fetch(a,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Failed to fetch file: ${o.status} ${o.statusText}`);const l=await o.text();console.log(" Downloaded encrypted content, size:",l.length,"characters"),console.log(" Decrypting PDF content...");const c=Xi.AES.decrypt(l,this.encryptionKey).toString(Xi.enc.Utf8);console.log(" Converting to PDF format...");const u=atob(c),f=new Blob([new Uint8Array(u.split("").map(h=>h.charCodeAt(0)))],{type:"application/pdf"});return console.log(" PDF ready for viewing, size:",f.size,"bytes"),f}catch(n){throw console.error(" PDF download failed:",n),new Error("Failed to retrieve PDF: "+n.message)}}async verifyAccess(e){var r,n,s,i,a,o;try{const l=dt.currentUser;if(!l)return!1;const u=(await nr(Ze(qe,"users",l.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager")return((s=(n=(r=(await nr(Ze(qe,"students",e))).data())==null?void 0:r.app)==null?void 0:n.studentData)==null?void 0:s.caseManagerId)===l.uid;if(u.role==="teacher"){const h=((o=(a=(i=(await nr(Ze(qe,"students",e))).data())==null?void 0:i.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(h).includes(l.uid)}return!1}catch(l){return console.error("Access verification failed:",l),!1}}async logAccess(e,r){try{await Ht(Ze(qe,"pdfAccessLogs",`${e}_${Date.now()}`),{fileId:e,studentId:r,userId:dt.currentUser.uid,userEmail:dt.currentUser.email,accessTime:kn(),userAgent:navigator.userAgent,accessType:"download"})}catch(n){console.error("Failed to log access:",n)}}async updateAccessMetadata(e){try{const r=Ze(qe,"pdfMetadata",e),n=await nr(r);n.exists()&&await Ht(r,{...n.data(),accessCount:(n.data().accessCount||0)+1,lastAccessed:kn()},{merge:!0})}catch(r){console.error("Failed to update access metadata:",r)}}async getFileAccessHistory(e){try{const r=or(At(qe,"pdfAccessLogs"),Ur("fileId","==",e),hn("accessTime","desc"));return(await Wt(r)).docs.map(s=>s.data())}catch(r){return console.error("Failed to fetch access history:",r),[]}}}const N0=new p$;function lx(){const t=se(!1),e=se(!1),r=se(null);return{uploadPdf:async(a,o)=>{t.value=!0,r.value=null;try{if(a.type!=="application/pdf")throw new Error("Only PDF files are allowed");if(a.size>10*1024*1024)throw new Error("File size must be less than 10MB");return await N0.encryptAndUploadPdf(a,o)}catch(l){throw r.value=l.message,l}finally{t.value=!1}},downloadPdf:async(a,o,l)=>{e.value=!0,r.value=null;try{const c=await N0.downloadAndDecryptPdf(a,o),u=window.URL.createObjectURL(c),f=window.open(u,"_blank","noopener,noreferrer");setTimeout(()=>{window.URL.revokeObjectURL(u)},5e3)}catch(c){throw r.value=c.message,c}finally{e.value=!1}},getAccessHistory:async a=>{try{return await N0.getFileAccessHistory(a)}catch(o){return r.value=o.message,[]}},isUploading:t,isDownloading:e,error:r}}const m$={class:"docs-item"},g$={key:0,class:"loading-spinner"},v$={key:0,class:"loading-spinner"},y$=["onClick"],x$={key:0,class:"loading-spinner"},E$={__name:"StudentDocsCell",props:{student:{type:Object,required:!0},getDocumentUrl:{type:Function,required:!0},getAdditionalDocuments:{type:Function,required:!0}},setup(t){const e=t,{downloadPdf:r}=lx(),n=se({ataglance:!1,bip:!1}),s=async(a,o)=>{var l,c,u,f;try{if(!a){alert("File not found.");return}n.value[o]=!0;const h=((c=(l=e.student.app)==null?void 0:l.documents)==null?void 0:c.bipFileName)||((f=(u=e.student.app)==null?void 0:u.documents)==null?void 0:f.ataglanceFileName)||"document.pdf";await r(a,e.student.id,h)}catch(h){console.error("Error opening secure file:",h),alert("Error opening file. Please try again.")}finally{n.value[o]=!1}},i=async a=>{try{if(!a.pdfUrl){alert("File not found.");return}n.value[a.id]=!0,await r(a.pdfUrl,e.student.id,a.fileName)}catch(o){console.error("Error opening additional document:",o),alert("Error opening file. Please try again.")}finally{n.value[a.id]=!1}};return(a,o)=>(B(),U("td",null,[d("div",m$,[t.getDocumentUrl(t.student,"ataglancePdfUrl")?(B(),U("a",{key:0,href:"#",onClick:o[0]||(o[0]=Xr(l=>s(t.getDocumentUrl(t.student,"ataglancePdfUrl"),"ataglance"),["prevent"])),class:Ye(["doc-link",{loading:n.value.ataglance}])},[n.value.ataglance?(B(),U("div",g$,[Re(K(gc),{size:14,class:"spin"})])):(B(),Qt(K(Yu),{key:1,size:16,class:"doc-icon"})),d("span",null,X(n.value.ataglance?"Loading...":"At-A-Glance"),1)],2)):ve("",!0),t.getDocumentUrl(t.student,"bipPdfUrl")?(B(),U("a",{key:1,href:"#",onClick:o[1]||(o[1]=Xr(l=>s(t.getDocumentUrl(t.student,"bipPdfUrl"),"bip"),["prevent"])),class:Ye(["doc-link",{loading:n.value.bip}])},[n.value.bip?(B(),U("div",v$,[Re(K(gc),{size:14,class:"spin"})])):(B(),Qt(K(Yu),{key:1,size:16,class:"doc-icon"})),d("span",null,X(n.value.bip?"Loading...":"BIP"),1)],2)):ve("",!0),(B(!0),U(Pe,null,He(t.getAdditionalDocuments(t.student),l=>(B(),U("a",{key:l.id,href:"#",onClick:Xr(c=>i(l),["prevent"]),class:Ye(["doc-link",{loading:n.value[l.id]}])},[n.value[l.id]?(B(),U("div",x$,[Re(K(gc),{size:14,class:"spin"})])):(B(),Qt(K(Yu),{key:1,size:16,class:"doc-icon"})),d("span",null,X(n.value[l.id]?"Loading...":l.title),1)],10,y$))),128)),!t.getDocumentUrl(t.student,"ataglancePdfUrl")&&!t.getDocumentUrl(t.student,"bipPdfUrl")&&t.getAdditionalDocuments(t.student).length===0?(B(),U(Pe,{key:2},[we("")],64)):ve("",!0)])]))}},_$=bt(E$,[["__scopeId","data-v-90303efc"]]),b$={class:"actions-cell"},S$={class:"actions-content"},A$={class:"action-buttons"},T$=["title"],w$={__name:"StudentActionsCell",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!1},studentData:{type:Object,required:!1},getUserName:{type:Function,required:!0},formatDate:{type:Function,required:!0}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,n=be(()=>{var o;return(o=r.student)!=null&&o.updatedBy?r.getUserName(r.student.updatedBy):null}),s=be(()=>{var o;if(!((o=r.student)!=null&&o.updatedAt))return"";try{let l="";r.student.updatedAt.seconds?l=new Date(r.student.updatedAt.seconds*1e3).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit",hour:"numeric",minute:"2-digit",hour12:!0}):l=new Date(r.student.updatedAt).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit",hour:"numeric",minute:"2-digit",hour12:!0});const c=n.value?` by ${n.value}`:"";return`Last Updated: ${l}${c}`}catch(l){console.warn("Error formatting date in tooltip:",l);const c=new Date(r.student.updatedAt.seconds*1e3),u=n.value?` by ${n.value}`:"";return`Last Updated: ${c.toLocaleDateString()}${u}`}}),i=be(()=>{var u,f,h,p,g;if(!((u=r.currentUser)!=null&&u.role)||!r.student)return!1;const o=r.currentUser.role,l=r.currentUser.uid;return o==="paraeducator"||o==="teacher"?!1:o==="case_manager"?((h=(f=r.student.app)==null?void 0:f.studentData)==null?void 0:h.caseManagerId)===l:o==="service_provider"?(g=(p=r.student.app)==null?void 0:p.staffIds)==null?void 0:g.includes(l):["admin","school_admin","staff_edit","admin_504","sped_chair"].includes(o)}),a=be(()=>{var o;return!((o=r.currentUser)!=null&&o.role)||!r.student||!r.studentData?!1:An.canSendFeedback(r.currentUser.uid,r.currentUser.role,r.student,r.studentData)});return(o,l)=>{var c;return B(),U("td",b$,[d("div",S$,[d("div",A$,[i.value?(B(),U("button",{key:0,class:"edit-btn",onClick:l[0]||(l[0]=u=>o.$emit("edit",t.student.id)),title:"Edit Student"},[Re(K(rx),{size:16})])):ve("",!0),d("button",{class:"email-btn",onClick:l[1]||(l[1]=u=>o.$emit("email",t.student.id)),title:"Email Student"},[Re(K(f7),{size:16})]),a.value?(B(),U("button",{key:1,class:"teacher-feedback-btn",onClick:l[2]||(l[2]=u=>o.$emit("teacher-feedback",t.student.id)),title:"Send Teacher Feedback Form"},[Re(K(ck),{size:16})])):ve("",!0)]),(c=t.student)!=null&&c.updatedAt?(B(),U("div",{key:0,class:"action-updated-date",title:s.value},X(t.student.updatedAt.seconds?new Date(t.student.updatedAt.seconds*1e3).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}):new Date(t.student.updatedAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"})),9,T$)):ve("",!0)])])}}},C$=bt(w$,[["__scopeId","data-v-a57a20c6"]]),k$={key:0,class:"schedule-list"},I$={class:"period-assignment"},D$={class:"primary-line"},P$={class:"period-label"},R$={class:"primary-teacher"},F$={key:0,class:"coteaching-info"},N$=["title"],O$={key:1,class:"no-schedule"},M$={__name:"StudentScheduleCell",props:{student:{type:Object,required:!0},getSchedule:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0},getPeriodLabel:{type:Function,required:!1}},setup(t){const e=r=>r&&typeof r=="object"&&r.coTeaching&&r.teacherId;return(r,n)=>(B(),U("td",null,[t.getSchedule(t.student)?(B(),U("div",k$,[d("ul",null,[(B(!0),U(Pe,null,He(t.getSchedule(t.student),(s,i)=>(B(),U("li",{key:i,class:"schedule-period"},[d("div",I$,[d("div",D$,[d("span",P$,X(t.getPeriodLabel?t.getPeriodLabel(i):i)+":",1),d("span",R$,X(t.getUserInitialLastName(s.teacherId||s)),1)]),e(s)?(B(),U("div",F$,[d("span",{class:"coteaching-indicator",title:`Co-teach ${s.coTeaching.subject}`},X(t.getUserInitialLastName(s.coTeaching.caseManagerId))+" (C"+X(s.coTeaching.subject.charAt(0))+") ",9,N$)])):ve("",!0)])]))),128))])])):(B(),U("div",O$,""))]))}},L$={key:0,class:"services-section"},B$={class:"services-container"},U$={key:1,class:"services-section"},$$={class:"services-container"},V$={key:0,class:"service-provider-item"},H$={key:0,class:"service-provider-item"},j$={key:1,class:"service-provider-item"},G$={key:2,class:"service-provider-item"},W$={key:3,class:"service-provider-item"},z$={key:4,class:"service-provider-item"},K$={key:5,class:"service-provider-item"},q$={__name:"StudentServicesCell",props:{student:{type:Object,required:!0},appSettings:{type:Object,required:!1},getClassServices:{type:Function,required:!0},getOtherServices:{type:Function,required:!0},hasServiceProviders:{type:Function,required:!0},getServiceProviderId:{type:Function,required:!0},getProviderFieldName:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){return(e,r)=>(B(),U("td",null,[t.getClassServices(t.student).length>0||t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(B(),U(Pe,{key:0},[t.getClassServices(t.student).length>0?(B(),U("div",L$,[r[0]||(r[0]=d("strong",null,"Class Services:",-1)),d("div",B$,[(B(!0),U(Pe,null,He(t.getClassServices(t.student),n=>(B(),U("span",{key:n,class:"service-item"},X(n),1))),128))])])):ve("",!0),t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(B(),U("div",U$,[r[1]||(r[1]=d("strong",null,"Related Services:",-1)),d("div",$$,[(B(!0),U(Pe,null,He(t.getOtherServices(t.student),n=>(B(),U("span",{key:n,class:"service-item"},X(n),1))),128)),t.appSettings&&t.appSettings.value&&t.appSettings.value.serviceProviders?(B(!0),U(Pe,{key:0},He(t.appSettings.value.serviceProviders,n=>(B(),U(Pe,{key:n},[t.getServiceProviderId(t.student,t.getProviderFieldName(n))?(B(),U("span",V$,X(n)+" ("+X(t.getUserInitialLastName(t.getServiceProviderId(t.student,t.getProviderFieldName(n))))+") ",1)):ve("",!0)],64))),128)):(B(),U(Pe,{key:1},[t.getServiceProviderId(t.student,"speechId")?(B(),U("span",H$,"SP ("+X(t.getUserInitialLastName(t.getServiceProviderId(t.student,"speechId")))+")",1)):ve("",!0),t.getServiceProviderId(t.student,"mhId")?(B(),U("span",j$,"MH ("+X(t.getUserInitialLastName(t.getServiceProviderId(t.student,"mhId")))+")",1)):ve("",!0),t.getServiceProviderId(t.student,"otId")?(B(),U("span",G$,"OT ("+X(t.getUserInitialLastName(t.getServiceProviderId(t.student,"otId")))+")",1)):ve("",!0),t.getServiceProviderId(t.student,"ptId")?(B(),U("span",W$,"PT ("+X(t.getUserInitialLastName(t.getServiceProviderId(t.student,"ptId")))+")",1)):ve("",!0),t.getServiceProviderId(t.student,"scId")?(B(),U("span",z$,"SC ("+X(t.getUserInitialLastName(t.getServiceProviderId(t.student,"scId")))+")",1)):ve("",!0),t.getServiceProviderId(t.student,"trId")?(B(),U("span",K$,"TR ("+X(t.getUserInitialLastName(t.getServiceProviderId(t.student,"trId")))+")",1)):ve("",!0)],64))])])):ve("",!0)],64)):(B(),U(Pe,{key:1},[we("  ")],64))]))}},X$=["innerHTML"],Y$={key:2},Ob={__name:"AccommodationsCell",props:{student:{type:Object,required:!0},fieldName:{type:String,required:!0},flagType:{type:String,required:!0},flagText:{type:String,required:!0},flagClass:{type:String,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(B(),U("td",{class:Ye(["instruction-cell",{"with-flag":t.getFlagValue(t.student,t.flagType)}])},[t.getFlagValue(t.student,t.flagType)?(B(),U("div",{key:0,class:Ye(["flag-overlay",t.flagClass])},X(t.flagText),3)):ve("",!0),K(it)(t.student,t.fieldName)?(B(),U("div",{key:1,innerHTML:t.formatListFromText(K(it)(t.student,t.fieldName))},null,8,X$)):(B(),U("div",Y$,""))],2))}},Q$={class:"student-name"},J$={class:"std-info-subheading"},Z$={key:0,class:"schedule-list"},eV={class:"period-assignment"},tV={class:"primary-line"},rV={class:"period-label"},nV={class:"primary-teacher"},sV={key:0,class:"coteaching-info"},aV=["title"],iV={key:1,class:"no-schedule"},oV={key:0,class:"flag-overlay flag-separate-setting"},lV={key:1,class:"bullet-list"},cV=["innerHTML"],uV={key:2},dV={class:"student-name"},fV=["title"],hV={class:"std-info-subheading"},pV={class:"student-dates print"},mV={key:0,class:"direct-assignment-badge"},Qf={__name:"StudentTable",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})},currentUser:{type:Object,default:null},studentData:{type:Object,default:null},testingView:{type:Boolean,default:!1},aideSchedule:{type:Object,default:()=>({})}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,{appSettings:n,getUserName:s,getUserInitialLastName:i,formatDate:a,getMeetingUrgencyClass:o,getReviewUrgencyClass:l,getReevalUrgencyClass:c,getCaseManagerId:u,getFlagValue:f,getDocumentUrl:h,getSchedule:p,getClassServices:g,getOtherServices:v,hasServiceProviders:y,getServiceProviderId:b,getProviderFieldName:E,isDirectAssignment:x,formatListFromText:w,getPeriodLabel:R,getAdditionalDocuments:P}=RU(r),S=_=>_&&typeof _=="object"&&_.coTeaching&&_.teacherId;return $t(()=>r.student,_=>{var m,A,k,I,C,M,D;_&&Object.keys(_).length>0&&(form.schedule=((A=(m=_.app)==null?void 0:m.schedule)==null?void 0:A.periods)||_.schedule||((I=(k=_.aeries)==null?void 0:k.schedule)==null?void 0:I.periods)||{},console.log("StudentForm DEBUG - form.schedule:",form.schedule),console.log("StudentForm DEBUG - aeries.schedule:",(C=r.student.aeries)==null?void 0:C.schedule),console.log("StudentForm DEBUG - app.schedule.periods:",(D=(M=r.student.app)==null?void 0:M.schedule)==null?void 0:D.periods))},{immediate:!0,deep:!0}),(_,m)=>(B(),U("table",{class:Ye(["students-table",{"testing-view":t.testingView}])},[d("thead",null,[d("tr",null,[t.testingView?(B(),U(Pe,{key:0},[m[0]||(m[0]=d("th",{class:"print"},"Student Info",-1)),m[1]||(m[1]=d("th",{class:"print"},"Schedule",-1)),m[2]||(m[2]=d("th",{class:"print"},"Assessment Accommodations",-1))],64)):(B(),U(Pe,{key:1},[m[3]||(m[3]=d("th",{class:"print"},"Student Info",-1)),m[4]||(m[4]=d("th",{class:"print"},"Services",-1)),m[5]||(m[5]=d("th",{class:"print"},"Schedule",-1)),m[6]||(m[6]=d("th",{class:"print"},"Instruction Accommodations",-1)),m[7]||(m[7]=d("th",{class:"print"},"Assessment Accommodations",-1)),m[8]||(m[8]=d("th",{class:"print"},"Docs",-1)),m[9]||(m[9]=d("th",{class:"print"},"Actions",-1))],64))])]),d("tbody",null,[(B(!0),U(Pe,null,He(t.students,A=>{var k;return B(),U("tr",{key:A.id},[t.testingView?(B(),U(Pe,{key:0},[d("td",null,[d("div",Q$,[d("strong",null,X(K(it)(A,"firstName"))+" "+X(K(it)(A,"lastName")),1)]),d("div",J$,[d("div",null,"Grd: "+X(K(it)(A,"grade"))+" | Prg: "+X(K(it)(A,"plan")),1),d("div",null,"CM: "+X(K(s)(K(u)(A))),1)])]),d("td",null,[K(p)(A)?(B(),U("div",Z$,[d("ul",null,[(B(!0),U(Pe,null,He(K(p)(A),(I,C)=>(B(),U("li",{key:C,class:"schedule-period"},[d("div",eV,[d("div",tV,[d("span",rV,X(K(R)?K(R)(C):C)+":",1),d("span",nV,X(K(i)(I.teacherId||I)),1)]),S(I)?(B(),U("div",sV,[d("span",{class:"coteaching-indicator",title:`Co-teach ${I.coTeaching.subject}`},X(K(i)(I.coTeaching.caseManagerId))+" (C"+X(I.coTeaching.subject.charAt(0))+") ",9,aV)])):ve("",!0)])]))),128))])])):(B(),U("div",iV,""))]),d("td",{class:Ye(["instruction-cell",{"with-flag":K(f)(A,"flag2")}])},[K(f)(A,"flag2")?(B(),U("div",oV,"Separate setting")):ve("",!0),K(it)(A,"assessment")?(B(),U("div",lV,[d("div",{innerHTML:K(w)(K(it)(A,"assessment"))},null,8,cV)])):(B(),U("div",uV,""))],2)],64)):(B(),U(Pe,{key:1},[d("td",null,[d("div",dV,[d("strong",null,X(K(it)(A,"firstName"))+" "+X(K(it)(A,"lastName")),1),d("span",{class:"data-source",title:`Data source: ${K(hu)(A,"firstName")}`},X(K(hu)(A,"firstName")==="Override"?"":K(hu)(A,"firstName")==="App"?"":K(hu)(A,"firstName")==="Aeries"?"":K(hu)(A,"firstName")==="SEIS"?"":""),9,fV)]),d("div",hV,[d("div",null,"Grd: "+X(K(it)(A,"grade"))+" | Prg: "+X(K(it)(A,"plan")),1),d("div",null,"CM: "+X(K(s)(K(u)(A))),1)]),d("div",pV,[d("span",{class:Ye(["badge badge-review plan-review",K(l)(A)])},"PR: "+X(K(a)(K(it)(A,"reviewDate"))),3),d("span",{class:Ye(["badge badge-reeval reeval-due",K(c)(A)])},"RE: "+X(K(a)(K(it)(A,"reevalDate"))),3),d("span",{class:Ye(["badge badge-meeting meeting-date",[K(o)(A),K(it)(A,"meetingDate")?"date-set":""]])},"  "+X(K(a)(K(it)(A,"meetingDate"))||"Not set"),3)]),((k=t.currentUser)==null?void 0:k.role)==="paraeducator"&&K(x)(A.id)?(B(),U("div",mV,m[10]||(m[10]=[d("span",{class:"badge badge-direct"},"Direct Assignment",-1)]))):ve("",!0)]),Re(q$,{student:A,"app-settings":K(n),"get-class-services":K(g),"get-other-services":K(v),"has-service-providers":K(y),"get-service-provider-id":K(b),"get-provider-field-name":K(E),"get-user-initial-last-name":K(i)},null,8,["student","app-settings","get-class-services","get-other-services","has-service-providers","get-service-provider-id","get-provider-field-name","get-user-initial-last-name"]),Re(M$,{student:A,"get-schedule":K(p),"get-user-initial-last-name":K(i),"get-period-label":K(R)},null,8,["student","get-schedule","get-user-initial-last-name","get-period-label"]),Re(Ob,{student:A,"field-name":"instruction","flag-type":"flag1","flag-text":"Preferential Seating","flag-class":"flag-preferential-seating","get-flag-value":K(f),"format-list-from-text":K(w)},null,8,["student","get-flag-value","format-list-from-text"]),Re(Ob,{student:A,"field-name":"assessment","flag-type":"flag2","flag-text":"Separate Setting","flag-class":"flag-separate-setting","get-flag-value":K(f),"format-list-from-text":K(w)},null,8,["student","get-flag-value","format-list-from-text"]),Re(_$,{student:A,"get-document-url":K(h),"get-additional-documents":K(P)},null,8,["student","get-document-url","get-additional-documents"]),Re(C$,{student:A,"current-user":t.currentUser,"student-data":t.studentData,"get-user-name":K(s),"format-date":K(a),onEdit:I=>_.$emit("edit",A.id),onEmail:I=>_.$emit("email",A.id),onTeacherFeedback:I=>_.$emit("teacher-feedback",A.id)},null,8,["student","current-user","student-data","get-user-name","format-date","onEdit","onEmail","onTeacherFeedback"])],64))])}),128))])],2))}};function gV(t,e){const{appSettings:r,loadAppSettings:n,loading:s,error:i}=Os(),a=xn(),o=se(!1);Gt(async()=>{try{console.log("useStudentForm: Starting to load app settings..."),await n(),console.log("useStudentForm: App settings loaded successfully:",r.value)}catch(D){console.error("useStudentForm: Error loading app settings:",D)}});const l=be(()=>{var F;const D=((F=r.value)==null?void 0:F.numPeriods)||7;return Array.from({length:D},(N,L)=>L+1)}),c=be(()=>{var D;return(D=r.value)!=null&&D.grades&&r.value.grades.length>0?(console.log("useStudentForm: Using app settings grades:",r.value.grades),r.value.grades):(console.log("useStudentForm: Using fallback grades: [7, 8]"),["7","8"])}),u=be(()=>{var D;if((D=r.value)!=null&&D.classServices&&r.value.classServices.length>0){const F=r.value.classServices.filter(N=>N.enabledSubcategories&&N.enabledSubcategories.length>0);return console.log("useStudentForm: Available class services:",F.length,"services"),F}return console.log("useStudentForm: No class services available"),[]}),f=be(()=>{var D;return(D=r.value)!=null&&D.serviceProviders&&r.value.serviceProviders.length>0?(console.log("useStudentForm: Using app settings service providers:",r.value.serviceProviders.length,"providers"),r.value.serviceProviders):(console.log("useStudentForm: No service providers configured in app settings"),[])}),h=be(()=>{var D;return(D=r.value)!=null&&D.customServiceProviders?r.value.customServiceProviders:[]}),p=be(()=>{let D=t.users.userRoles?t.users.userRoles:{teachers:t.users.teachers||[],caseManagers:t.users.caseManagers||[],speech:t.users.speech||[],ot:t.users.ot||[],mh:t.users.mh||[]};return D.teachers&&(D={...D,teachers:D.teachers.map(F=>({...F,id:String(F.id)}))}),D}),g=D=>{var F,N,L,O,z,H,V,W,G,re,de,ae,ce,te,Z,xe,J,Y,Q,fe,ye,ie,ee,ge,Te,ke,Ae,We,De,je,$e,Ie,Ke,_e,Ee,Se,Le,ze,lt,xt,St,Vt,pt,ct,mt,Ct,Rt,mr;return{ssid:it(D,"ssid")||D.id||"",firstName:it(D,"firstName")||"",lastName:it(D,"lastName")||"",grade:it(D,"grade")||"7",plan:it(D,"plan")||"IEP",reviewDate:it(D,"reviewDate")||"",reevalDate:it(D,"reevalDate")||"",meetingDate:it(D,"meetingDate")||"",caseManagerId:it(D,"caseManagerId")||D.caseManagerId||D.casemanager_id||"",schedule:((N=(F=D.app)==null?void 0:F.schedule)==null?void 0:N.periods)||((O=(L=D.aeries)==null?void 0:L.schedule)==null?void 0:O.periods)||D.schedule||{},services:((H=(z=D.app)==null?void 0:z.schedule)==null?void 0:H.classServices)||D.services||[],speechId:((W=(V=D.app)==null?void 0:V.providers)==null?void 0:W.speechId)||D.speechId||D.speech_id||"",otId:((re=(G=D.app)==null?void 0:G.providers)==null?void 0:re.otId)||D.otId||D.ot_id||"",mhId:((ae=(de=D.app)==null?void 0:de.providers)==null?void 0:ae.mhId)||D.mhId||D.mh_id||"",ptId:((te=(ce=D.app)==null?void 0:ce.providers)==null?void 0:te.ptId)||D.ptId||D.pt_id||"",scId:((xe=(Z=D.app)==null?void 0:Z.providers)==null?void 0:xe.scId)||D.scId||D.sc_id||"",trId:((Y=(J=D.app)==null?void 0:J.providers)==null?void 0:Y.trId)||D.trId||D.tr_id||"",audId:((fe=(Q=D.app)==null?void 0:Q.providers)==null?void 0:fe.audId)||D.audId||D.aud_id||"",viId:((ie=(ye=D.app)==null?void 0:ye.providers)==null?void 0:ie.viId)||D.viId||D.vi_id||"",atId:((ge=(ee=D.app)==null?void 0:ee.providers)==null?void 0:ge.atId)||D.atId||D.at_id||"",dhhId:((ke=(Te=D.app)==null?void 0:Te.providers)==null?void 0:ke.dhhId)||D.dhhId||D.dhh_id||"",omId:((We=(Ae=D.app)==null?void 0:Ae.providers)==null?void 0:We.omId)||D.omId||D.om_id||"",bisId:((je=(De=D.app)==null?void 0:De.providers)==null?void 0:je.bisId)||D.bisId||D.bis_id||"",hnId:((Ie=($e=D.app)==null?void 0:$e.providers)==null?void 0:Ie.hnId)||D.hnId||D.hn_id||"",swId:((_e=(Ke=D.app)==null?void 0:Ke.providers)==null?void 0:_e.swId)||D.swId||D.sw_id||"",instruction:it(D,"instruction")||"",assessment:it(D,"assessment")||"",flag1:((Se=(Ee=D.app)==null?void 0:Ee.flags)==null?void 0:Se.flag1)||D.flag1||!1,flag2:((ze=(Le=D.app)==null?void 0:Le.flags)==null?void 0:ze.flag2)||D.flag2||!1,ataglancePdfUrl:((xt=(lt=D.app)==null?void 0:lt.documents)==null?void 0:xt.ataglancePdfUrl)||D.ataglancePdfUrl||D.ataglance_pdf_url||"",bipPdfUrl:((Vt=(St=D.app)==null?void 0:St.documents)==null?void 0:Vt.bipPdfUrl)||D.bipPdfUrl||D.bip_pdf_url||"",ataglanceFileName:((ct=(pt=D.app)==null?void 0:pt.documents)==null?void 0:ct.ataglanceFileName)||D.ataglanceFileName||"",bipFileName:((Ct=(mt=D.app)==null?void 0:mt.documents)==null?void 0:Ct.bipFileName)||D.bipFileName||"",bipFile:null,ataglanceFile:null,removeBipFile:!1,removeAtaglanceFile:!1,additionalDocuments:((mr=(Rt=D.app)==null?void 0:Rt.documents)==null?void 0:mr.additionalDocuments)||[]}},v=Ns(g(t.student||{})),y=D=>{const F=[];return D&&typeof D=="object"&&Object.entries(D).forEach(([N,L])=>{if(L&&typeof L=="object"&&L.coTeaching){const O=L.coTeaching.subject;O&&F.push(`Co-teach: ${O}`)}}),F},b=()=>{const D=y(v.schedule),F=v.services.filter(N=>!N.startsWith("Co-teach:"));v.services=[...F,...D]};$t(()=>v.schedule,()=>{b()},{deep:!0}),$t(()=>t.student,(D,F)=>{if(D&&Object.keys(D).length>0){const N=!F||Object.keys(F).length===0,L=D.id!==(F==null?void 0:F.id);if(N||L){console.log(" useStudentForm DEBUG - Student data changed, updating form:",D.id),console.log(" useStudentForm DEBUG - Student data:",{firstName:it(D,"firstName"),lastName:it(D,"lastName"),plan:it(D,"plan"),caseManagerId:it(D,"caseManagerId"),rawStudent:D});const O=g(D);Object.assign(v,O),b(),console.log(" useStudentForm DEBUG - Form updated:",{plan:v.plan,caseManagerId:v.caseManagerId,firstName:v.firstName,lastName:v.lastName})}}},{immediate:!0,deep:!0}),$t(()=>r.value,D=>{console.log("useStudentForm: App settings watcher triggered:",D),D!=null&&D.grades&&D.grades.length>0&&(D.grades.includes(v.grade)||(v.grade=D.grades[0]||"7"))},{immediate:!0,deep:!0});const E=(D,F)=>{const N=D.target.files[0]||null;if(N){const L=ll(N,{allowedTypes:["pdf"],maxSize:10485760,fieldName:F==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!L.isValid){alert(L.error),D.target.value="";return}const O=Hr(N.name);if(!O.isSafe){alert(`File name contains potentially dangerous content: ${O.threats.join(", ")}`),D.target.value="";return}}v[F]=N},x=D=>{D.preventDefault(),D.stopPropagation(),v.removeBipFile=!0,v.bipFile=null},w=D=>{D.preventDefault(),D.stopPropagation(),v.removeAtaglanceFile=!0,v.ataglanceFile=null},R=D=>{if(!D||D.trim().length===0||D.trim().length>24)throw new Error("Title must be between 1 and 24 characters");if(2+v.additionalDocuments.length>=10)throw new Error("Maximum of 10 documents allowed (including BIP and At-A-Glance)");const N={id:crypto.randomUUID(),title:D.trim(),pdfUrl:"",fileName:"",toRemove:!1};return v.additionalDocuments.push(N),N.id},P=D=>{const F=v.additionalDocuments.find(N=>N.id===D);F&&(F.toRemove=!0)},S=D=>{const F=v.additionalDocuments.find(N=>N.id===D);F&&(F.toRemove=!1)},_=D=>{const F=v.additionalDocuments.findIndex(N=>N.id===D);F!==-1&&v.additionalDocuments.splice(F,1)},m={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"},A=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],k=D=>{var N;if((N=r.value)!=null&&N.serviceProviders&&Array.isArray(r.value.serviceProviders)){const L=(r.value.serviceProvidersDetails||A).find(O=>O.abbreviation===D);if(L)return L.name+" ("+D+")"}const F=A.find(L=>L.abbreviation===D);return F?F.name+" ("+D+")":D},I=D=>{const N={SLP:"speech",OT:"ot",MH:"mh",PT:"pt",SC:"sc",TR:"tr",AUD:"aud",VI:"vi",AT:"at",DHH:"dhh","O&M":"om",BIS:"bis",HN:"hn",SW:"sw"}[D]||D.toLowerCase();return p.value[N]||[]},C=()=>{const D=yk(v),F={app:{studentData:{firstName:D.firstName,lastName:D.lastName,grade:D.grade,plan:D.plan,caseManagerId:D.caseManagerId}}},N=vk(F,{isNew:t.mode==="new"});if(!N.isValid)return alert(`Please fix the following errors:

${N.errors.join(`
`)}`),!1;const L=["firstName","lastName","instruction","assessment"];for(const O of L)if(v[O]){const z=Hr(v[O]);if(!z.isSafe)return alert(`Security threat detected in ${O}: ${z.threats.join(", ")}`),!1}return Object.assign(v,D),!0};return{form:v,isSaving:o,appSettings:r,appSettingsLoading:s,appSettingsError:i,periods:l,gradeOptions:c,availableClassServices:u,serviceProviders:f,customServiceProviders:h,userRoles:p,onFileChange:E,removeBipFile:x,removeAtaglanceFile:w,addAdditionalDocument:R,removeAdditionalDocument:P,undoRemoveAdditionalDocument:S,deleteAdditionalDocument:_,providerFieldMap:m,getProviderLabel:k,getProviderUsers:I,handleSubmit:async()=>{var D,F,N,L,O;try{if(o.value){console.log("Form submission already in progress, ignoring duplicate");return}if(console.log(" Form submitted:",{plan:v.plan,caseManagerId:v.caseManagerId,firstName:v.firstName,lastName:v.lastName,mode:t.mode,studentId:(D=t.student)==null?void 0:D.id}),o.value=!0,console.log(" AUTH DEBUG - Current user:",{uid:(F=dt.currentUser)==null?void 0:F.uid,email:(N=dt.currentUser)==null?void 0:N.email,claims:await((L=dt.currentUser)==null?void 0:L.getIdTokenResult())}),!C()){o.value=!1;return}const z=v.services.filter(ae=>ae&&ae.includes(":")),H={};console.log(" FORM SCHEDULE DEBUG - Complete form.schedule:",JSON.stringify(v.schedule,null,2)),console.log(" FORM SCHEDULE DEBUG - periods.value:",l.value),l.value.forEach(ae=>{if(console.log(` FORM SCHEDULE DEBUG - Period ${ae} exists:`,!!v.schedule[ae],"Value:",v.schedule[ae]),v.schedule[ae]){const ce=v.schedule[ae];console.log(` SCHEDULE DEBUG - Period ${ae}:`,{type:typeof ce,data:ce,hasCoTeaching:!!(ce&&ce.coTeaching),hasCaseManagerId:!!(ce&&ce.coTeaching&&ce.coTeaching.caseManagerId)}),typeof ce=="string"?H[ae]=ce:typeof ce=="object"&&ce!==null&&(ce.coTeaching&&ce.coTeaching.caseManagerId?(console.log(` SCHEDULE DEBUG - Period ${ae} has co-teaching, preserving structure`),H[ae]={teacherId:ce.teacherId,coTeaching:{caseManagerId:ce.coTeaching.caseManagerId,subject:ce.coTeaching.subject||""}}):(console.log(` SCHEDULE DEBUG - Period ${ae} converting to simple format`),H[ae]=ce.teacherId||String(ce)||ce))}}),console.log(" Schedule Composition Debug:"),console.log("Form schedule before:",JSON.stringify(v.schedule,null,2)),console.log("Composed schedule after:",JSON.stringify(H,null,2)),console.log("Composed data:",{classServices:z,schedule:H});let V=v.bipPdfUrl||null,W=v.ataglancePdfUrl||null;if(console.log(" Form submission - PDF URLs:",{bipPdfUrl:V,ataglancePdfUrl:W,formBipPdfUrl:v.bipPdfUrl,formAtaglancePdfUrl:v.ataglancePdfUrl,bipFileName:v.bipFileName,ataglanceFileName:v.ataglanceFileName,bipFile:v.bipFile,ataglanceFile:v.ataglanceFile}),v.removeBipFile&&(console.log("Removing BIP file..."),V)){try{const ae=se(Rc,`students/${t.student.id||"temp"}/${V}`);await Ov(ae),await deleteDoc(Ze(qe,"pdfMetadata",V)),console.log("Secure BIP file deleted:",V)}catch(ae){console.warn("Error deleting secure BIP file:",ae)}V=null}if(v.removeAtaglanceFile&&(console.log("Removing At-A-Glance file..."),W)){try{const ae=se(Rc,`students/${t.student.id||"temp"}/${W}`);await Ov(ae),await deleteDoc(Ze(qe,"pdfMetadata",W)),console.log("Secure At-A-Glance file deleted:",W)}catch(ae){console.warn("Error deleting secure At-A-Glance file:",ae)}W=null}const G={studentData:{firstName:v.firstName,lastName:v.lastName,grade:v.grade,plan:v.plan,caseManagerId:v.caseManagerId},dates:{reviewDate:v.reviewDate,reevalDate:v.reevalDate,meetingDate:v.meetingDate},schedule:{periods:H,classServices:z},providers:{speechId:v.speechId,otId:v.otId,mhId:v.mhId,ptId:v.ptId,scId:v.scId,trId:v.trId,audId:v.audId,viId:v.viId,atId:v.atId,dhhId:v.dhhId,omId:v.omId,bisId:v.bisId,hnId:v.hnId,swId:v.swId},accommodations:{instruction:v.instruction,assessment:v.assessment},flags:{flag1:v.flag1,flag2:v.flag2},documents:{ataglancePdfUrl:W,bipPdfUrl:V,bipFileName:v.bipFileName||null,ataglanceFileName:v.ataglanceFileName||null,additionalDocuments:v.additionalDocuments.filter(ae=>!ae.toRemove&&ae.pdfUrl).map(ae=>({id:ae.id,title:ae.title,pdfUrl:ae.pdfUrl,fileName:ae.fileName,uploadDate:ae.uploadDate||new Date().toISOString()}))}};console.log(" Documents being saved:",{ataglancePdfUrl:W,bipPdfUrl:V,bipFileName:v.bipFileName||null,ataglanceFileName:v.ataglanceFileName||null}),console.log("Saving payload:",G);const re={app:G,updatedAt:kn(),updatedBy:((O=a.currentUser)==null?void 0:O.uid)||null};console.log("Saving payload:",re);let de=null;if(t.mode==="edit"&&t.student.id)console.log("Updating existing student:",t.student.id),await Ht(Ze(qe,"students",t.student.id),re,{merge:!0}),de=t.student.id,console.log("Student updated successfully"),await rn.logStudentAccess(t.student.id,"edit",{fields:Object.keys(G.studentData||{}),hasDocuments:!!(W||V),formMode:"edit"});else{if(console.log("Adding new student"),!v.ssid||v.ssid.trim()===""){alert("SSID is required for new students");return}const ae=v.ssid.trim();re.app.studentData.ssid=ae;const ce=Ze(At(qe,"students"));re.createdAt=kn(),await Ht(ce,re),de=ce.id,re.id=de,console.log("Student added successfully with ID:",de,"SSID:",ae),await rn.logStudentAccess(de,"create",{ssid:ae,fields:Object.keys(G.studentData||{}),hasDocuments:!!(W||V),formMode:"create"})}e("saved",re),e("close")}catch(z){console.error("Error saving student:",z),console.error("Error details:",{code:z.code,message:z.message,stack:z.stack}),alert(`Error saving student: ${z.message||z}. Please try again.`)}finally{o.value=!1}},validateForm:C}}const vV={class:"form-col"},yV={class:"inner-grid-3"},xV={key:0,class:"ssid-field"},EV=["value"],_V=["value"],bV={__name:"StudentBasicInfo",props:{form:{type:Object,required:!0},mode:{type:String,default:"new"},gradeOptions:{type:Array,required:!0},userRoles:{type:Object,required:!0}},setup(t){return(e,r)=>(B(),U("fieldset",vV,[r[21]||(r[21]=d("legend",null,"Student Info",-1)),d("div",yV,[t.mode==="new"?(B(),U("label",xV,[r[9]||(r[9]=d("span",{class:"field-label"},"SSID (State Student ID) *",-1)),Oe(d("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.ssid=n),type:"text",required:"",placeholder:"Enter student SSID",class:"ssid-input"},null,512),[[ft,t.form.ssid]]),r[10]||(r[10]=d("div",{class:"field-help"},[d("strong",null,"Required:"),we(" This can be found in your Student Information System (SIS) such as Aeries, or in SEIS. The SSID is used to link student data across different systems. ")],-1))])):ve("",!0),d("label",null,[r[11]||(r[11]=we(" First Name: ")),Oe(d("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.firstName=n),type:"text",required:""},null,512),[[ft,t.form.firstName]])]),d("label",null,[r[12]||(r[12]=we(" Last Name: ")),Oe(d("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>t.form.lastName=n),type:"text",required:""},null,512),[[ft,t.form.lastName]])]),d("label",null,[r[13]||(r[13]=we(" Grade: ")),Oe(d("select",{"onUpdate:modelValue":r[3]||(r[3]=n=>t.form.grade=n)},[(B(!0),U(Pe,null,He(t.gradeOptions,n=>(B(),U("option",{key:n,value:n},X(n),9,EV))),128))],512),[[cr,t.form.grade]])]),d("label",null,[r[15]||(r[15]=we(" Plan Type: ")),Oe(d("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>t.form.plan=n)},r[14]||(r[14]=[d("option",{value:"IEP"},"IEP",-1),d("option",{value:"504"},"504",-1)]),512),[[cr,t.form.plan]])]),d("label",null,[r[16]||(r[16]=we(" Review Date: ")),Oe(d("input",{"onUpdate:modelValue":r[5]||(r[5]=n=>t.form.reviewDate=n),type:"date"},null,512),[[ft,t.form.reviewDate]])]),d("label",null,[r[17]||(r[17]=we(" Reevaluation Date: ")),Oe(d("input",{"onUpdate:modelValue":r[6]||(r[6]=n=>t.form.reevalDate=n),type:"date"},null,512),[[ft,t.form.reevalDate]])]),d("label",null,[r[18]||(r[18]=we(" Meeting Date: ")),Oe(d("input",{"onUpdate:modelValue":r[7]||(r[7]=n=>t.form.meetingDate=n),type:"date"},null,512),[[ft,t.form.meetingDate]])]),d("label",null,[r[20]||(r[20]=we(" Case Manager: ")),Oe(d("select",{"onUpdate:modelValue":r[8]||(r[8]=n=>t.form.caseManagerId=n)},[r[19]||(r[19]=d("option",{value:""},"-- Select Case Manager --",-1)),(B(!0),U(Pe,null,He(t.userRoles.caseManagers,n=>(B(),U("option",{key:n.id,value:n.id},X(n.name||n.email||n.id),9,_V))),128))],512),[[cr,t.form.caseManagerId]])])])]))}},SV=bt(bV,[["__scopeId","data-v-5eadce29"]]),AV={class:"form-col"},TV={class:"periods-container"},wV={class:"period-main"},CV={class:"period-label"},kV=["value","onChange"],IV=["value"],DV=["disabled","onClick"],PV={key:0,class:"coteaching-config"},RV={class:"coteaching-info"},FV={class:"classroom-teacher"},NV={class:"case-manager-name"},OV={class:"config-row"},MV=["value","onChange"],LV=["value"],BV={class:"config-row"},UV=["value","onChange"],$V=["value"],VV={__name:"StudentSchedule",props:{form:{type:Object,required:!0},periods:{type:Array,required:!0},userRoles:{type:Object,required:!0},appSettings:{type:Object,default:()=>({})}},setup(t){const e=t,{getLabel:r}=Eo(),n=be(()=>(e.userRoles.caseManagers||[]).filter(b=>b.id&&(b.role==="case_manager"||b.role==="admin_504"||b.role==="administrator_504_CM"||b.role==="sped_chair"||b.roles&&b.roles.includes("case_manager")))),s=be(()=>{var y;if((y=e.appSettings)!=null&&y.classServices){const b=e.appSettings.classServices.find(E=>E.name==="Co-teach"&&E.enabledSubcategories);if(b)return b.enabledSubcategories.sort()}return["English","Math","History","Science"]}),i=y=>{const b=e.form.schedule[y];return typeof b=="string"?b:typeof b=="object"&&b!==null&&b.teacherId||""},a=(y,b)=>{if(h("SET_TEACHER_START",{period:y,teacherId:b,isCoTeachingActive:c(y),currentValue:e.form.schedule[y]}),c(y)){const E=u(y),x=f(y);e.form.schedule[y]={teacherId:b,coTeaching:{caseManagerId:E,subject:x}},h("SET_TEACHER_COTEACHING",{period:y,newValue:e.form.schedule[y]})}else e.form.schedule[y]=b,h("SET_TEACHER_SIMPLE",{period:y,newValue:e.form.schedule[y]})},o=y=>{if(!y)return"Unknown";const b=(e.userRoles.teachers||[]).find(E=>E.id===y);return b&&(b.name||b.email)||y},l=y=>{if(!y)return"Select Case Manager";const b=n.value.find(E=>E.id===y);return b&&(b.name||b.email)||y},c=y=>{var E;const b=e.form.schedule[y];return typeof b=="object"&&b!==null?!!((E=b.coTeaching)!=null&&E.caseManagerId):!1},u=y=>{var E;const b=e.form.schedule[y];return typeof b=="object"&&b!==null&&((E=b.coTeaching)==null?void 0:E.caseManagerId)||""},f=y=>{var E;const b=e.form.schedule[y];return typeof b=="object"&&b!==null&&((E=b.coTeaching)==null?void 0:E.subject)||""},h=(y,b)=>{const E=new Date().toISOString();console.log(` [${E}] Schedule Process: ${y}`,b)},p=(y,b)=>{h("UPDATE_CM_START",{period:y,caseManagerId:b,currentValue:e.form.schedule[y]});const E=i(y),x=f(y);E?(e.form.schedule[y]={teacherId:E,coTeaching:{caseManagerId:b,subject:x}},h("UPDATE_CM_COMPLETE",{period:y,newValue:e.form.schedule[y]}),console.log(" CO-TEACHING DEBUG - Case Manager Updated:",{period:y,periodType:typeof y,caseManagerId:b,teacherId:E,subject:x,finalValue:e.form.schedule[y],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):h("UPDATE_CM_BLOCKED",{reason:"No teacher ID",period:y})},g=(y,b)=>{h("UPDATE_SUBJECT_START",{period:y,subject:b,currentValue:e.form.schedule[y]});const E=i(y),x=u(y);E?(e.form.schedule[y]={teacherId:E,coTeaching:{caseManagerId:x,subject:b}},h("UPDATE_SUBJECT_COMPLETE",{period:y,newValue:e.form.schedule[y]}),console.log(" CO-TEACHING DEBUG - Subject Updated:",{period:y,periodType:typeof y,subject:b,teacherId:E,caseManagerId:x,finalValue:e.form.schedule[y],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):h("UPDATE_SUBJECT_BLOCKED",{reason:"No teacher ID",period:y})},v=y=>{var x;h("TOGGLE_START",{period:y,currentValue:e.form.schedule[y],formVersion:e.formVersion});const b=i(y);if(!b){h("TOGGLE_BLOCKED",{reason:"No teacher selected",period:y});return}const E=c(y);if(h("TOGGLE_STATE",{period:y,isActive:E,teacherId:b,beforeValue:e.form.schedule[y]}),E)e.form.schedule[y]=b;else{const w={teacherId:b,coTeaching:{caseManagerId:((x=n.value[0])==null?void 0:x.id)||"",subject:s.value[0]||""}};e.form.schedule[y]=w,setTimeout(()=>{var R;console.log(" CO-TEACHING PERSISTENCE CHECK - 100ms later:",{period:y,stillExists:!!e.form.schedule[y],currentValue:e.form.schedule[y],isObject:typeof e.form.schedule[y]=="object",hasCoTeaching:!!((R=e.form.schedule[y])!=null&&R.coTeaching)})},100),setTimeout(()=>{var R;console.log(" CO-TEACHING PERSISTENCE CHECK - 1000ms later:",{period:y,stillExists:!!e.form.schedule[y],currentValue:e.form.schedule[y],isObject:typeof e.form.schedule[y]=="object",hasCoTeaching:!!((R=e.form.schedule[y])!=null&&R.coTeaching)})},1e3)}h("TOGGLE_COMPLETE",{period:y,afterValue:e.form.schedule[y],formVersion:e.formVersion}),console.log(" CO-TEACHING DEBUG - Toggle Complete:",{period:y,periodType:typeof y,isActive:!E,finalValue:e.form.schedule[y],entireSchedule:JSON.stringify(e.form.schedule,null,2),availableCaseManagers:n.value.length,availableSubjects:s.value.length})};return $t(()=>e.form.schedule,(y,b)=>{console.log(" SCHEDULE WATCHER - Schedule changed:",{timestamp:new Date().toISOString(),newSchedule:JSON.stringify(y,null,2),oldSchedule:JSON.stringify(b,null,2),periodsWithObjects:Object.keys(y).filter(E=>typeof y[E]=="object"),periodsWithCoTeaching:Object.keys(y).filter(E=>{var x;return(x=y[E])==null?void 0:x.coTeaching})})},{deep:!0}),(y,b)=>(B(),U("fieldset",AV,[b[7]||(b[7]=d("legend",null,"Schedule",-1)),d("div",TV,[(B(!0),U(Pe,null,He(t.periods,E=>(B(),U("div",{key:E,class:"period-row"},[d("div",wV,[d("label",CV,X(K(r)(E))+":",1),d("select",{value:i(E),onChange:x=>a(E,x.target.value),class:"teacher-select"},[b[0]||(b[0]=d("option",{value:""},"--",-1)),(B(!0),U(Pe,null,He(t.userRoles.teachers,x=>(B(),U("option",{key:x.id,value:x.id},X(x.name||x.email||x.id),9,IV))),128))],40,kV),d("button",{type:"button",class:Ye(["coteaching-toggle",{active:c(E)}]),disabled:!i(E),onClick:x=>v(E),title:"Co-Teaching"}," C ",10,DV)]),c(E)?(B(),U("div",PV,[d("div",RV,[b[1]||(b[1]=d("span",{class:"coteaching-label"},"Co-Teaching:",-1)),d("span",FV,X(o(i(E))),1),b[2]||(b[2]=d("span",{class:"plus-sign"},"+",-1)),d("span",NV,X(l(u(E))),1)]),d("div",OV,[b[4]||(b[4]=d("label",{class:"config-label"},"Subject:",-1)),d("select",{value:f(E),onChange:x=>g(E,x.target.value),class:"subject-select",required:""},[b[3]||(b[3]=d("option",{value:""},"-- Select Subject --",-1)),(B(!0),U(Pe,null,He(s.value,x=>(B(),U("option",{key:x,value:x},X(x),9,LV))),128))],40,MV)]),d("div",BV,[b[6]||(b[6]=d("label",{class:"config-label"},"Case Manager:",-1)),d("select",{value:u(E),onChange:x=>p(E,x.target.value),class:"cm-select",required:""},[b[5]||(b[5]=d("option",{value:""},"-- Select Case Manager --",-1)),(B(!0),U(Pe,null,He(n.value,x=>(B(),U("option",{key:x.id,value:x.id},X(x.name||x.email||x.id),9,$V))),128))],40,UV)])])):ve("",!0)]))),128))])]))}},HV=bt(VV,[["__scopeId","data-v-4aeb2d99"]]),jV={class:"checkbox-inline-group"},GV=["value","checked","onChange"],Mb={__name:"ServiceCheckboxGroup",props:["label","items","modelValue"],emits:["update:modelValue"],setup(t,{emit:e}){const r=t,n=e;function s(i){const a=r.label+": "+i,o=r.modelValue?[...r.modelValue]:[],l=o.indexOf(a);l===-1?o.push(a):o.splice(l,1),n("update:modelValue",o)}return(i,a)=>(B(),U("fieldset",null,[d("legend",null,X(t.label),1),d("div",jV,[(B(!0),U(Pe,null,He(t.items,o=>(B(),U("label",{key:o},[d("input",{type:"checkbox",value:t.label+": "+o,checked:t.modelValue&&t.modelValue.includes(t.label+": "+o),onChange:l=>s(o)},null,40,GV),we(" "+X(o),1)]))),128))])]))}},WV={class:"form-col"},zV={class:"inner-grid-3"},KV={key:0,class:"loading-message"},qV={key:1,class:"error-message"},XV={style:{display:"none"}},YV={key:3,class:"no-services-message"},QV={__name:"StudentClassServices",props:{form:{type:Object,required:!0},availableClassServices:{type:Array,required:!0},appSettingsLoading:{type:Boolean,default:!1},appSettingsError:{type:String,default:null}},setup(t){const e=t,r=be(()=>e.availableClassServices.filter(s=>s.name!=="Co-teach")),n=be(()=>e.availableClassServices.filter(s=>s.name==="Co-teach"));return(s,i)=>(B(),U("fieldset",WV,[i[5]||(i[5]=d("legend",null,"Services: classes",-1)),d("div",zV,[t.appSettingsLoading?(B(),U("div",KV,i[2]||(i[2]=[d("span",{class:"loading-spinner"},"",-1),we(" Loading app settings... ")]))):t.appSettingsError?(B(),U("div",qV,[i[3]||(i[3]=d("span",{class:"error-icon"},"",-1)),we(" Error loading app settings: "+X(t.appSettingsError),1)])):t.availableClassServices.length>0?(B(),U(Pe,{key:2},[(B(!0),U(Pe,null,He(r.value,a=>(B(),Qt(Mb,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[0]||(i[0]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128)),d("div",XV,[(B(!0),U(Pe,null,He(n.value,a=>(B(),Qt(Mb,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[1]||(i[1]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128))])],64)):(B(),U("div",YV,i[4]||(i[4]=[d("span",{class:"info-icon"},"",-1),we(" No class services configured. "),d("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},JV=bt(QV,[["__scopeId","data-v-d750acb2"]]),ZV=["id","value"],eH=["value"],Lb={__name:"ServiceSelect",props:["id","label","list","modelValue"],emits:["update:modelValue"],setup(t){return(e,r)=>(B(),U("label",null,[we(X(t.label)+": ",1),d("select",{id:t.id,value:t.modelValue,onChange:r[0]||(r[0]=n=>e.$emit("update:modelValue",n.target.value))},[r[1]||(r[1]=d("option",{value:""},"--",-1)),(B(!0),U(Pe,null,He(t.list,n=>(B(),U("option",{key:n.id,value:n.id},X(n.name),9,eH))),128))],40,ZV)]))}},tH={class:"inner-grid-3"},rH={key:1,class:"no-services-message"},nH={__name:"StudentProviders",props:{form:{type:Object,required:!0},serviceProviders:{type:Array,required:!0},customServiceProviders:{type:Array,required:!0},providerFieldMap:{type:Object,required:!0},getProviderLabel:{type:Function,required:!0},getProviderUsers:{type:Function,required:!0}},setup(t){return(e,r)=>(B(),U("fieldset",null,[r[1]||(r[1]=d("legend",null,"Services: providers",-1)),d("div",tH,[t.serviceProviders.length>0?(B(),U(Pe,{key:0},[(B(!0),U(Pe,null,He(t.serviceProviders,n=>(B(),Qt(Lb,{key:n,id:n,label:t.getProviderLabel(n),list:t.getProviderUsers(n),modelValue:t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`]=s},null,8,["id","label","list","modelValue","onUpdate:modelValue"]))),128)),(B(!0),U(Pe,null,He(t.customServiceProviders,n=>(B(),Qt(Lb,{key:n,id:n,label:n,list:[],modelValue:t.form[`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[`${n.toLowerCase()}Id`]=s},null,8,["id","label","modelValue","onUpdate:modelValue"]))),128))],64)):(B(),U("div",rH,r[0]||(r[0]=[d("span",{class:"info-icon"},"",-1),we(" No service providers configured. "),d("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},sH=bt(nH,[["__scopeId","data-v-faa02238"]]),aH={class:"form-col"},iH={class:"document-section"},oH={key:0,class:"current-file"},lH={key:1,class:"removed-file"},cH={key:2,class:"upload-status loading-pulse"},uH={key:3,class:"error-message"},dH={class:"document-section"},fH={key:0,class:"current-file"},hH={key:1,class:"removed-file"},pH={key:2,class:"upload-status loading-pulse"},mH={class:"additional-documents-section"},gH={class:"additional-docs-header"},vH={class:"doc-counter"},yH={class:"additional-doc-header"},xH={class:"doc-title"},EH={key:0,class:"doc-upload-area"},_H=["onChange"],bH={key:1,class:"current-file"},SH=["onClick"],AH=["onClick"],TH={key:2,class:"removed-file"},wH=["onClick"],CH={key:3,class:"upload-status loading-pulse"},kH={key:0,class:"add-document-section"},IH={key:0,class:"add-document-button-container"},DH={key:1,class:"add-document-form"},PH={class:"title-input-container"},RH={class:"char-counter"},FH={class:"add-form-buttons"},NH=["disabled"],OH={key:1,class:"max-documents-message"},MH={__name:"StudentDocuments",props:{form:{type:Object,required:!0},student:{type:Object,default:()=>({})},mode:{type:String,default:"new"},onFileChange:{type:Function,required:!0},removeBipFile:{type:Function,required:!0},removeAtaglanceFile:{type:Function,required:!0},addAdditionalDocument:{type:Function,required:!0},removeAdditionalDocument:{type:Function,required:!0},undoRemoveAdditionalDocument:{type:Function,required:!0},deleteAdditionalDocument:{type:Function,required:!0}},emits:["loading-change"],setup(t,{emit:e}){const r=t,n=e,{uploadPdf:s,downloadPdf:i,isUploading:a,error:o}=lx(),l=se(null),c=be(()=>a.value||l.value!==null);$t(c,P=>{n("loading-change",P)},{immediate:!0});const u=be(()=>{var S,_,m,A;const P=((S=r.student)==null?void 0:S.id)||((_=r.form)==null?void 0:_.id);return console.log(" StudentDocuments - studentId computed:",{studentId:(m=r.student)==null?void 0:m.id,formId:(A=r.form)==null?void 0:A.id,finalId:P}),P}),f=async(P,S)=>{const _=P.target.files[0]||null;if(_){const m=ll(_,{allowedTypes:["pdf"],maxSize:10485760,fieldName:S==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!m.isValid){alert(m.error),P.target.value="";return}const A=Hr(_.name);if(!A.isSafe){alert(`File name contains potentially dangerous content: ${A.threats.join(", ")}`),P.target.value="";return}try{if(l.value=S==="bipFile"?"bip":"ataglance",!u.value)throw new Error("Student ID is required for secure file upload");const k=S==="bipFile"?r.form.bipPdfUrl:r.form.ataglancePdfUrl;if(k){console.log(` Cleaning up old ${S} file:`,k);try{const{ref:C,deleteObject:M}=await js(async()=>{const{ref:z,deleteObject:H}=await Promise.resolve().then(()=>JM);return{ref:z,deleteObject:H}},void 0),{doc:D,deleteDoc:F}=await js(async()=>{const{doc:z,deleteDoc:H}=await Promise.resolve().then(()=>M9);return{doc:z,deleteDoc:H}},void 0),{storage:N,db:L}=await js(async()=>{const{storage:z,db:H}=await Promise.resolve().then(()=>Qy);return{storage:z,db:H}},void 0),O=C(N,`students/${u.value}/${k}`);await M(O),await F(D(L,"pdfMetadata",k)),console.log(` Old ${S} file cleaned up:`,k)}catch(C){console.warn(`Failed to clean up old ${S} file:`,C.message)}}const I=await s(_,u.value);S==="bipFile"?(Object.assign(r.form,{bipPdfUrl:I,bipFileName:_.name}),console.log(" BIP file updated in form:",{bipPdfUrl:r.form.bipPdfUrl,bipFileName:r.form.bipFileName})):(Object.assign(r.form,{ataglancePdfUrl:I,ataglanceFileName:_.name}),console.log(" At-A-Glance file updated in form:",{ataglancePdfUrl:r.form.ataglancePdfUrl,ataglanceFileName:r.form.ataglanceFileName})),console.log(` Secure PDF uploaded: ${I}`),console.log(" Current form state:",{bipPdfUrl:r.form.bipPdfUrl,bipFileName:r.form.bipFileName,ataglancePdfUrl:r.form.ataglancePdfUrl,ataglanceFileName:r.form.ataglanceFileName})}catch(k){console.error("Secure PDF upload failed:",k),alert(`Failed to upload PDF: ${k.message}`)}finally{l.value=null,P.target.value=""}}r.onFileChange(P,S)},h=async P=>{try{const S=P==="bip"?r.form.bipPdfUrl:r.form.ataglancePdfUrl,_=P==="bip"?r.form.bipFileName:r.form.ataglanceFileName;if(!S||!u.value)throw new Error("File not found or student ID missing");await i(S,u.value,_)}catch(S){console.error("Secure PDF download failed:",S),alert(`Failed to download PDF: ${S.message}`)}},p=se(!1),g=se(""),v=be(()=>r.form.additionalDocuments||[]),y=be(()=>2+v.value.length<10),b=()=>{p.value=!0,g.value=""},E=()=>{p.value=!1,g.value=""},x=async()=>{try{if(!g.value.trim()){alert("Please enter a document title");return}const P=r.addAdditionalDocument(g.value.trim());p.value=!1,g.value=""}catch(P){alert(P.message)}},w=async(P,S)=>{const _=P.target.files[0]||null;if(_){const m=ll(_,{allowedTypes:["pdf"],maxSize:10485760,fieldName:"Additional Document"});if(!m.isValid){alert(m.error),P.target.value="";return}const A=Hr(_.name);if(!A.isSafe){alert(`File name contains potentially dangerous content: ${A.threats.join(", ")}`),P.target.value="";return}try{if(l.value=S,!u.value)throw new Error("Student ID is required for secure file upload");const k=await s(_,u.value),I=r.form.additionalDocuments.find(C=>C.id===S);I&&Object.assign(I,{pdfUrl:k,fileName:_.name,uploadDate:new Date().toISOString()}),console.log(` Additional document uploaded: ${k}`)}catch(k){console.error("Additional document upload failed:",k),alert(`Failed to upload PDF: ${k.message}`)}finally{l.value=null,P.target.value=""}}},R=async P=>{try{if(!P.pdfUrl||!u.value)throw new Error("File not found or student ID missing");await i(P.pdfUrl,u.value,P.fileName)}catch(S){console.error("Additional document download failed:",S),alert(`Failed to download PDF: ${S.message}`)}};return(P,S)=>(B(),U("fieldset",aH,[S[29]||(S[29]=d("legend",null,"Documents",-1)),d("div",iH,[d("label",null,[S[14]||(S[14]=we(" BIP: ")),d("input",{type:"file",accept:"application/pdf",onChange:S[0]||(S[0]=_=>f(_,"bipFile"))},null,32),t.form.bipPdfUrl&&!t.form.removeBipFile?(B(),U("span",oH,[S[10]||(S[10]=we(" Current: ")),d("a",{href:"#",onClick:S[1]||(S[1]=Xr(_=>h("bip"),["prevent"])),target:"_blank"},"View BIP"),d("button",{type:"button",onClick:S[2]||(S[2]=(..._)=>t.removeBipFile&&t.removeBipFile(..._)),class:"btn-remove"},[Re(K(qo),{size:16}),S[9]||(S[9]=we(" Remove "))])])):ve("",!0),t.form.removeBipFile?(B(),U("span",lH,[S[12]||(S[12]=we(" BIP file will be removed ")),d("button",{type:"button",onClick:S[3]||(S[3]=_=>t.form.removeBipFile=!1),class:"btn-undo"},[Re(K(P0),{size:16}),S[11]||(S[11]=we(" Undo "))])])):ve("",!0),K(a)&&l.value==="bip"?(B(),U("div",cH,[Re(K(gc),{size:16,class:"loading-spinner"}),S[13]||(S[13]=d("strong",null,"Loading... Uploading BIP document...",-1))])):ve("",!0),K(o)?(B(),U("div",uH,X(K(o)),1)):ve("",!0)])]),d("div",dH,[d("label",null,[S[20]||(S[20]=we(" At-A-Glance PDF: ")),d("input",{type:"file",accept:"application/pdf",onChange:S[4]||(S[4]=_=>f(_,"ataglanceFile"))},null,32),t.form.ataglancePdfUrl&&!t.form.removeAtaglanceFile?(B(),U("span",fH,[S[16]||(S[16]=we(" Current: ")),d("a",{href:"#",onClick:S[5]||(S[5]=Xr(_=>h("ataglance"),["prevent"])),target:"_blank"},"View At-A-Glance"),d("button",{type:"button",onClick:S[6]||(S[6]=(..._)=>t.removeAtaglanceFile&&t.removeAtaglanceFile(..._)),class:"btn-remove"},[Re(K(qo),{size:16}),S[15]||(S[15]=we(" Remove "))])])):ve("",!0),t.form.removeAtaglanceFile?(B(),U("span",hH,[S[18]||(S[18]=we(" At-A-Glance file will be removed ")),d("button",{type:"button",onClick:S[7]||(S[7]=_=>t.form.removeAtaglanceFile=!1),class:"btn-undo"},[Re(K(P0),{size:16}),S[17]||(S[17]=we(" Undo "))])])):ve("",!0),K(a)&&l.value==="ataglance"?(B(),U("div",pH,[Re(K(gc),{size:16,class:"loading-spinner"}),S[19]||(S[19]=d("strong",null,"Loading... Uploading At-A-Glance document...",-1))])):ve("",!0)])]),d("div",mH,[d("div",gH,[S[21]||(S[21]=d("h4",null,"Additional Documents",-1)),d("span",vH,X(v.value.length)+"/8 max",1)]),(B(!0),U(Pe,null,He(v.value,_=>(B(),U("div",{key:_.id,class:"document-section additional-doc"},[d("div",yH,[Re(K(Yu),{size:16,class:"doc-icon"}),d("span",xH,X(_.title),1)]),!_.pdfUrl&&!_.toRemove?(B(),U("div",EH,[d("input",{type:"file",accept:"application/pdf",onChange:m=>w(m,_.id),class:"additional-doc-input"},null,40,_H)])):ve("",!0),_.pdfUrl&&!_.toRemove?(B(),U("span",bH,[S[23]||(S[23]=we(" Current: ")),d("a",{href:"#",onClick:Xr(m=>R(_),["prevent"]),target:"_blank"},"View "+X(_.title),9,SH),d("button",{type:"button",onClick:m=>t.removeAdditionalDocument(_.id),class:"btn-remove"},[Re(K(qo),{size:16}),S[22]||(S[22]=we(" Remove "))],8,AH)])):ve("",!0),_.toRemove?(B(),U("span",TH,[we(X(_.title)+" will be removed ",1),d("button",{type:"button",onClick:m=>t.undoRemoveAdditionalDocument(_.id),class:"btn-undo"},[Re(K(P0),{size:16}),S[24]||(S[24]=we(" Undo "))],8,wH)])):ve("",!0),K(a)&&l.value===_.id?(B(),U("div",CH,[Re(K(gc),{size:16,class:"loading-spinner"}),d("strong",null,"Loading... Uploading "+X(_.title)+"...",1)])):ve("",!0)]))),128)),y.value?(B(),U("div",kH,[p.value?ve("",!0):(B(),U("div",IH,[d("button",{type:"button",onClick:b,class:"btn-add-document"},[Re(K(q_),{size:16}),S[25]||(S[25]=we(" Add Document "))])])),p.value?(B(),U("div",DH,[d("div",PH,[S[26]||(S[26]=d("label",{for:"newDocTitle"},"Document Title (max 24 characters):",-1)),Oe(d("input",{id:"newDocTitle",type:"text","onUpdate:modelValue":S[8]||(S[8]=_=>g.value=_),maxlength:"24",placeholder:"Enter document title...",class:"title-input",onKeyup:M1(x,["enter"])},null,544),[[ft,g.value]]),d("span",RH,X(g.value.length)+"/24",1)]),d("div",FH,[d("button",{type:"button",onClick:x,disabled:!g.value.trim(),class:"btn-confirm"},[Re(K(q_),{size:16}),S[27]||(S[27]=we(" Add "))],8,NH),d("button",{type:"button",onClick:E,class:"btn-cancel"}," Cancel ")])])):ve("",!0)])):ve("",!0),y.value?ve("",!0):(B(),U("div",OH,S[28]||(S[28]=[d("span",null,"Maximum of 10 documents reached (including BIP and At-A-Glance)",-1)])))])]))}},LH=bt(MH,[["__scopeId","data-v-039d1d4d"]]),BH={class:"form-col"},UH={class:"inner-grid-2"},$H={__name:"StudentAccommodations",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(B(),U("fieldset",BH,[r[4]||(r[4]=d("legend",null,"Accommodations",-1)),d("div",UH,[d("label",null,[r[2]||(r[2]=we(" Instruction: ")),Oe(d("textarea",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.instruction=n),placeholder:"Enter instructional accommodations..."},null,512),[[ft,t.form.instruction]])]),d("label",null,[r[3]||(r[3]=we(" Assessment: ")),Oe(d("textarea",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.assessment=n),placeholder:"Enter assessment accommodations..."},null,512),[[ft,t.form.assessment]])])])]))}},VH=bt($H,[["__scopeId","data-v-4ce4f379"]]),HH={class:"flags-container"},jH={class:"checkbox-label"},GH={class:"checkbox-label"},WH={__name:"StudentFlags",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(B(),U("fieldset",null,[r[4]||(r[4]=d("legend",null,"Flags",-1)),d("div",HH,[d("label",jH,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=n=>t.form.flag1=n)},null,512),[[yt,t.form.flag1]]),r[2]||(r[2]=we(" Preferential seating "))]),d("label",GH,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=n=>t.form.flag2=n)},null,512),[[yt,t.form.flag2]]),r[3]||(r[3]=we(" Separate setting "))])])]))}},zH=bt(WH,[["__scopeId","data-v-e7295a7a"]]),KH={class:"dialog-backdrop"},qH={class:"dialog"},XH=["disabled"],YH={__name:"StudentForm",props:{student:{type:Object,default:()=>({})},users:{type:Object,required:!0},mode:{type:String,default:"new"}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{form:s,isSaving:i,appSettings:a,appSettingsLoading:o,appSettingsError:l,periods:c,gradeOptions:u,availableClassServices:f,serviceProviders:h,customServiceProviders:p,userRoles:g,onFileChange:v,removeBipFile:y,removeAtaglanceFile:b,addAdditionalDocument:E,removeAdditionalDocument:x,undoRemoveAdditionalDocument:w,deleteAdditionalDocument:R,providerFieldMap:P,getProviderLabel:S,getProviderUsers:_,handleSubmit:m}=gV(r,n),A=se(!1),k=be(()=>i.value||A.value),I=be(()=>A.value?"Loading files...":i.value?"Saving...":r.mode==="edit"?"Save":"Add Student"),C=M=>{A.value=M};return(M,D)=>(B(),U("div",KH,[d("div",qH,[d("header",null,[d("h2",null,X(t.mode==="edit"?"Edit Student":"Add Student"),1),d("button",{onClick:D[0]||(D[0]=F=>M.$emit("close")),class:"close-btn"},"")]),d("form",{onSubmit:D[2]||(D[2]=Xr((...F)=>K(m)&&K(m)(...F),["prevent"])),id:"student-form"},[Re(SV,{form:K(s),mode:t.mode,"grade-options":K(u),"user-roles":K(g)},null,8,["form","mode","grade-options","user-roles"]),Re(HV,{form:K(s),periods:K(c),"user-roles":K(g),"app-settings":K(a)},null,8,["form","periods","user-roles","app-settings"]),Re(JV,{form:K(s),"available-class-services":K(f),"app-settings-loading":K(o),"app-settings-error":K(l)},null,8,["form","available-class-services","app-settings-loading","app-settings-error"]),Re(sH,{form:K(s),"service-providers":K(h),"custom-service-providers":K(p),"provider-field-map":K(P),"get-provider-label":K(S),"get-provider-users":K(_)},null,8,["form","service-providers","custom-service-providers","provider-field-map","get-provider-label","get-provider-users"]),Re(LH,{form:K(s),student:t.student,mode:t.mode,"on-file-change":K(v),"remove-bip-file":K(y),"remove-ataglance-file":K(b),"add-additional-document":K(E),"remove-additional-document":K(x),"undo-remove-additional-document":K(w),"delete-additional-document":K(R),onLoadingChange:C},null,8,["form","student","mode","on-file-change","remove-bip-file","remove-ataglance-file","add-additional-document","remove-additional-document","undo-remove-additional-document","delete-additional-document"]),Re(VH,{form:K(s)},null,8,["form"]),Re(zH,{form:K(s)},null,8,["form"]),d("footer",null,[d("button",{type:"button",onClick:D[1]||(D[1]=F=>M.$emit("close")),class:"btn btn-secondary"}," Cancel "),d("button",{type:"submit",class:"btn btn-primary",disabled:k.value},X(I.value),9,XH)])],32)])]))}},cx=bt(YH,[["__scopeId","data-v-f69b1564"]]),QH={key:0},JH={key:1,class:"loading-dialog"},ZH={__name:"StudentEditDialog",props:{studentId:{type:String,required:!0},users:{type:Object,required:!0}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{students:s}=Ii(),i=be(()=>{const o=s.value.find(l=>l.id===r.studentId);return console.log("StudentEditDialog - studentId:",r.studentId),console.log("StudentEditDialog - found student:",o),console.log("StudentEditDialog - students count:",s.value.length),o||{}});function a(o){console.log("StudentEditDialog - student saved:",o),n("saved",o)}return(o,l)=>i.value&&Object.keys(i.value).length>0?(B(),U("div",QH,[Re(cx,{student:i.value,users:t.users,mode:"edit",onClose:l[0]||(l[0]=c=>o.$emit("close")),onSaved:a},null,8,["student","users"])])):(B(),U("div",JH,l[1]||(l[1]=[d("div",{class:"dialog"},[d("header",null,[d("h2",null,"Loading Student Data...")]),d("div",{class:"content"},[d("p",null,"Please wait while we load the student information.")])],-1)])))}},ej=bt(ZH,[["__scopeId","data-v-dea0919d"]]),tj={class:"dialog-backdrop"},rj={class:"dialog"},nj={class:"button-group"},sj={key:0,class:"selected-recipients"},aj={class:"recipients-header"},ij={class:"recipients-list"},oj={key:0,class:"recipients-note"},lj={key:1,class:"members-list"},cj={key:0,class:"email"},uj=["value"],dj={key:2,class:"update-categories"},fj={class:"checkbox-group"},hj={class:"checkbox-item"},pj={class:"checkbox-item"},mj={class:"checkbox-item"},gj={class:"checkbox-item"},vj={class:"checkbox-item"},yj={class:"checkbox-item"},xj={class:"checkbox-item"},Ej=["disabled"],_j={key:0,class:"no-docs"},bj=["disabled"],Sj=["disabled"],Aj={__name:"StudentsEmailDialog",props:{student:{type:Object,required:!0},userMap:{type:Object,required:!0},currentUser:{type:Object,required:!1}},emits:["close"],setup(t,{emit:e}){const r=t,{student:n,userMap:s}=r,i=e,{appSettings:a}=Os(),o=be(()=>{var M;return((M=a.value.gmailApi)==null?void 0:M.enabled)??!1}),l=async M=>{try{await navigator.clipboard.writeText(M),u()}catch(D){console.error("Failed to copy:",D),alert("Failed to copy to clipboard. Please copy the email addresses manually.")}},c=se(!1),u=()=>{c.value=!0,setTimeout(()=>{c.value=!1},2e3)},f=se(""),h=se([]),p=se({studentInfo:!1,meetingDates:!1,services:!1,schedule:!1,instructionAccommodations:!1,assessmentAccommodations:!1,documents:!1}),g=be(()=>{var D,F;if((F=(D=n.app)==null?void 0:D.schedule)!=null&&F.periods){const N=[];return Object.values(n.app.schedule.periods).forEach(L=>{var z;const O=typeof L=="string"?L:L==null?void 0:L.teacherId;O&&N.push(O),(z=L==null?void 0:L.coTeaching)!=null&&z.caseManagerId&&N.push(L.coTeaching.caseManagerId)}),N}const M=n.schedule||{};return Object.values(M).filter(Boolean)}),v=be(()=>[...new Set(g.value)]),y=be(()=>{var D;const M=[];(D=n.app)!=null&&D.providers&&Object.entries(n.app.providers).forEach(([F,N])=>{N&&!["caseManagerId"].includes(F)&&M.push(N)});for(const F in n)F.endsWith("_id")&&!["casemanager_id","caseManagerId"].includes(F)&&n[F]&&M.push(n[F]);return[...new Set(M)].filter(F=>!v.value.includes(F))}),b=be(()=>v.value.map(M=>({id:M,...s[M]||{}})).filter(M=>M&&M.email)),E=be(()=>y.value.map(M=>({id:M,...s[M]||{}})).filter(M=>M&&M.email)),x=be(()=>{var F,N,L,O;const M=((N=(F=n.app)==null?void 0:F.studentData)==null?void 0:N.caseManagerId)||((O=(L=n.app)==null?void 0:L.providers)==null?void 0:O.caseManagerId)||n.caseManagerId||n.casemanager_id;if(!M)return null;const D=s[M];return D&&D.email?{id:M,...D}:null}),w=be(()=>{const M=[...b.value,...E.value];return x.value&&(M.map(F=>F.id).includes(x.value.id)||M.push(x.value)),M}),R=be(()=>{var M;return(M=r.currentUser)==null?void 0:M.uid});be(()=>{var D;const M=(D=r.currentUser)==null?void 0:D.role;return["paraeducator","staff_view","teacher"].includes(M)});const P=be(()=>{var F,N,L,O,z;const M=(F=r.currentUser)==null?void 0:F.uid,D=((L=(N=n.app)==null?void 0:N.studentData)==null?void 0:L.caseManagerId)||((z=(O=n.app)==null?void 0:O.providers)==null?void 0:z.caseManagerId)||n.caseManagerId||n.casemanager_id;return M&&D&&M===D}),S=be(()=>b.value.filter(M=>M.id!==R.value)),_=be(()=>E.value.filter(M=>M.id!==R.value)),m=be(()=>w.value.filter(M=>M.id!==R.value)),A=be(()=>{var M,D,F,N;return!!((D=(M=n.app)==null?void 0:M.documents)!=null&&D.ataglancePdfUrl||(N=(F=n.app)==null?void 0:F.documents)!=null&&N.bipPdfUrl||n.ataglancePdfUrl||n.ataglance_pdf_url||n.bipPdfUrl||n.bip_pdf_url)}),k=be(()=>f.value?f.value==="Individual"?h.value.length>0:!0:!1),I=be(()=>{let M=[];return f.value==="Teachers"?M=S.value:f.value==="TeachersAndService"?M=[...S.value,..._.value]:f.value==="CaseManager"?M=x.value?[x.value]:[]:f.value==="Individual"&&(M=m.value.filter(D=>h.value.includes(D.id))),M.map(D=>D.email).filter(Boolean).join(",")});async function C(){var G,re,de,ae,ce,te,Z,xe;if(!o.value){alert('Gmail API features are disabled. Please use the "Copy Email Addresses" button instead.');return}if(!I.value){alert("No email addresses found for the selected recipients.");return}console.log(" Student data for email:",{student:n,firstName:n.firstName,first_name:n.first_name,lastName:n.lastName,last_name:n.last_name,appStudentData:(G=n.app)==null?void 0:G.studentData});const M=n.firstName||n.first_name||((de=(re=n.app)==null?void 0:re.studentData)==null?void 0:de.firstName)||((ae=n.app)==null?void 0:ae.firstName)||"",D=n.lastName||n.last_name||((te=(ce=n.app)==null?void 0:ce.studentData)==null?void 0:te.lastName)||((Z=n.app)==null?void 0:Z.lastName)||"";console.log(" Extracted names:",{firstName:M,lastName:D});const F=`${M} ${D}`.trim()||"Student",N=(((M==null?void 0:M[0])||"")+((D==null?void 0:D[0])||"")).toUpperCase()||"ST";console.log(" Final values:",{fullName:F,initials:N});const L=Object.values(p.value).some(J=>J),O=L?`${N} - Student Update`:`${N} - Student Inquiry`;let z="";if(L){z+=`Hi team,

`,z+=`${F}'s student profile has been updated in the CaseManage app.

`,z+=`Update Summary:
`,p.value.studentInfo&&(z+=` Student data has been updated
`),p.value.documents&&(z+=` Documents have been updated and are available
`),p.value.schedule&&(z+=` Schedule details have been updated
`),p.value.instructionAccommodations&&(z+=` Instruction accommodations have been updated
`),p.value.assessmentAccommodations&&(z+=` Assessment accommodations have been updated
`),p.value.services&&(z+=` Services have been updated
`),p.value.meetingDates&&(z+=` Meeting dates have been updated
`),z+=`
`,z+=`Please reach out if you have any questions.

`,z+=`To access the updated confidential information and documents:
`,z+=`Log into the CaseManage app: ${window.location.origin}
`,z+=`Navigate to the student's record to view the updates. Authentication is required.

`;const J=x.value&&(`${x.value.firstName||""} ${x.value.lastName||""}`.trim()||x.value.displayName||x.value.email)||"Case Manager";J&&J!=="Case Manager"?z+=`For questions please contact the Case Manager (${J}) directly.
`:z+=`For questions please contact the Case Manager directly.
`}else z=`Hi team,

I have a question regarding ${F}.

Please reach out if you need any additional information.

Thank you!`;console.log(" Email composition:",{subject:O,body:z});const H=(xe=r.currentUser)==null?void 0:xe.email;if(!H){console.error(" No user email found in props.currentUser:",r.currentUser),alert("Unable to send email: User email not found. Please contact your administrator.");return}console.log(" User work email:",H);const V=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(I.value)}&su=${encodeURIComponent(O)}&body=${encodeURIComponent(z)}`;if(!confirm(`IMPORTANT: Security Check

This email MUST be sent from your school account: ${H}

Please confirm:
1. You are signed into Gmail with ${H}
2. You are NOT signed into any other Gmail accounts

Click OK only if you are using your school account.
Click Cancel to open Gmail and switch accounts.`)){window.open("https://mail.google.com","_blank","noopener");return}window.open(V,"_blank","noopener"),console.log(" Gmail compose window opened"),i("close")}return(M,D)=>(B(),U("div",tj,[d("div",rj,[d("header",null,[d("h2",null,"Email about "+X(K(n).firstName||K(n).first_name)+" "+X(K(n).lastName||K(n).last_name),1),d("button",{onClick:D[0]||(D[0]=F=>M.$emit("close")),title:"Close"},"")]),d("main",null,[d("form",{onSubmit:D[14]||(D[14]=Xr(()=>{},["prevent"]))},[d("div",nj,[x.value?(B(),U("button",{key:0,type:"button",class:Ye(["option-button",{active:f.value==="CaseManager"}]),onClick:D[1]||(D[1]=F=>f.value="CaseManager")}," Case Manager ",2)):ve("",!0),d("button",{type:"button",class:Ye(["option-button",{active:f.value==="Teachers"}]),onClick:D[2]||(D[2]=F=>f.value="Teachers")}," Teachers ",2),d("button",{type:"button",class:Ye(["option-button",{active:f.value==="TeachersAndService"}]),onClick:D[3]||(D[3]=F=>f.value="TeachersAndService")}," Teachers and service providers ",2),d("button",{type:"button",class:Ye(["option-button",{active:f.value==="Individual"}]),onClick:D[4]||(D[4]=F=>f.value="Individual")}," Individual member of the IEP team ",2)]),I.value?(B(),U("div",sj,[d("div",aj,[D[17]||(D[17]=d("h4",null,"Selected Recipients:",-1)),o.value?ve("",!0):(B(),U("button",{key:0,type:"button",class:Ye(["copy-button",{copied:c.value}]),onClick:D[5]||(D[5]=F=>l(I.value))},X(c.value?"Copied!":"Copy All"),3))]),d("div",ij,X(I.value),1),o.value?ve("",!0):(B(),U("div",oj,D[18]||(D[18]=[d("p",null,"Note: Gmail API features are not enabled. You can copy these email addresses to use in your email client.",-1)])))])):ve("",!0),f.value==="Individual"?(B(),U("div",lj,[D[19]||(D[19]=d("div",null,"Select members:",-1)),(B(!0),U(Pe,null,He(m.value,F=>(B(),U("div",{key:F.id},[d("label",null,[d("span",null,[we(X(F.name||F.displayName||F.email||F.id)+" ",1),F.email?(B(),U("span",cj,"("+X(F.email)+")",1)):ve("",!0)]),Oe(d("input",{type:"checkbox",value:F.id,"onUpdate:modelValue":D[6]||(D[6]=N=>h.value=N)},null,8,uj),[[yt,h.value]])])]))),128))])):ve("",!0),P.value?(B(),U("div",dj,[D[27]||(D[27]=d("h4",null,"Select what has been updated:",-1)),d("div",fj,[d("div",hj,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[7]||(D[7]=F=>p.value.studentInfo=F)},null,512),[[yt,p.value.studentInfo]]),D[20]||(D[20]=d("label",null,"Student information",-1))]),d("div",pj,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[8]||(D[8]=F=>p.value.meetingDates=F)},null,512),[[yt,p.value.meetingDates]]),D[21]||(D[21]=d("label",null,"Meeting dates",-1))]),d("div",mj,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[9]||(D[9]=F=>p.value.services=F)},null,512),[[yt,p.value.services]]),D[22]||(D[22]=d("label",null,"Services",-1))]),d("div",gj,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[10]||(D[10]=F=>p.value.schedule=F)},null,512),[[yt,p.value.schedule]]),D[23]||(D[23]=d("label",null,"Schedule",-1))]),d("div",vj,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[11]||(D[11]=F=>p.value.instructionAccommodations=F)},null,512),[[yt,p.value.instructionAccommodations]]),D[24]||(D[24]=d("label",null,"Instruction accommodations",-1))]),d("div",yj,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[12]||(D[12]=F=>p.value.assessmentAccommodations=F)},null,512),[[yt,p.value.assessmentAccommodations]]),D[25]||(D[25]=d("label",null,"Assessment accommodations",-1))]),d("div",xj,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[13]||(D[13]=F=>p.value.documents=F),disabled:!A.value},null,8,Ej),[[yt,p.value.documents]]),d("label",null,[D[26]||(D[26]=we(" Documents ")),A.value?ve("",!0):(B(),U("span",_j,"(No docs available)"))])])])])):ve("",!0)],32)]),d("footer",null,[d("button",{onClick:D[15]||(D[15]=F=>M.$emit("close"))},"Cancel"),o.value?(B(),U("button",{key:0,disabled:!k.value,onClick:C},"Send Email",8,bj)):(B(),U("button",{key:1,disabled:!k.value,onClick:D[16]||(D[16]=F=>l(I.value))},X(c.value?"Copied!":"Copy Email Addresses"),9,Sj))])])]))}},Tj=bt(Aj,[["__scopeId","data-v-d498c3e5"]]),wj={class:"dialog-backdrop"},Cj={class:"dialog"},kj={class:"field-groups"},Ij={class:"field-group"},Dj={class:"field-group"},Pj={class:"field-group"},Rj={class:"field-group"},Fj={class:"field-group"},Nj={class:"field-group"},Oj=["disabled"],Mj={__name:"ExportDialog",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})}},emits:["close"],setup(t,{emit:e}){const r=t,n=e,s=xn(),i=ex(),a=se({studentData:{firstName:!0,lastName:!0,grade:!0,plan:!0,caseManagerId:!0},dates:{reviewDate:!0,reevalDate:!0,meetingDate:!0},providers:{all:!0},accommodations:{instruction:!0,assessment:!0},schedule:{periods:!0,classServices:!0},documents:{ataglancePdfUrl:!0,bipPdfUrl:!0}}),o=["speechId","otId","mhId","ptId","scId","trId","audId","viId","atId","dhhId","omId","bisId","hnId","swId"],l=be(()=>Object.values(a.value).some(y=>Object.values(y).some(b=>b)));function c(y){if(!y||!r.userMap[y])return"";const b=r.userMap[y];return b.name||b.email||""}function u(y){const b=i.userPermissions||[];return Array.isArray(b)&&b.includes(y)}function f(){Object.keys(a.value).forEach(y=>{Object.keys(a.value[y]).forEach(b=>{a.value[y][b]=!0})})}function h(){Object.keys(a.value).forEach(y=>{Object.keys(a.value[y]).forEach(b=>{a.value[y][b]=!1})})}function p(y){var w,R,P,S,_,m,A,k,I,C,M,D,F,N,L,O,z,H,V,W,G,re,de,ae,ce,te,Z,xe,J,Y,Q,fe;const b=s.currentUser;if((b==null?void 0:b.role)==="admin"||(b==null?void 0:b.role)==="administrator"||(b==null?void 0:b.role)==="staff_view"||(b==null?void 0:b.role)==="sped_chair"||(b==null?void 0:b.role)==="administrator_504_CM"||(b==null?void 0:b.role)==="admin_504")return g(y);const x={};return a.value.studentData.firstName&&(x.firstName=(R=(w=y.app)==null?void 0:w.studentData)==null?void 0:R.firstName),a.value.studentData.lastName&&(x.lastName=(S=(P=y.app)==null?void 0:P.studentData)==null?void 0:S.lastName),a.value.studentData.grade&&(x.grade=(m=(_=y.app)==null?void 0:_.studentData)==null?void 0:m.grade),a.value.studentData.plan&&(x.plan=(k=(A=y.app)==null?void 0:A.studentData)==null?void 0:k.plan),a.value.studentData.caseManagerId&&(x.caseManagerId=(C=(I=y.app)==null?void 0:I.studentData)==null?void 0:C.caseManagerId),u("view_student_dates")&&(a.value.dates.reviewDate&&(x.reviewDate=(D=(M=y.app)==null?void 0:M.dates)==null?void 0:D.reviewDate),a.value.dates.reevalDate&&(x.reevalDate=(N=(F=y.app)==null?void 0:F.dates)==null?void 0:N.reevalDate),a.value.dates.meetingDate&&(x.meetingDate=(O=(L=y.app)==null?void 0:L.dates)==null?void 0:O.meetingDate)),(u("view_service_providers")||((H=(z=y.app)==null?void 0:z.studentData)==null?void 0:H.caseManagerId)===(b==null?void 0:b.uid)||o.some(ye=>{var ie,ee;return((ee=(ie=y.app)==null?void 0:ie.providers)==null?void 0:ee[ye])===(b==null?void 0:b.uid)}))&&a.value.providers.all&&o.forEach(ye=>{var ie,ee;x[ye]=(ee=(ie=y.app)==null?void 0:ie.providers)==null?void 0:ee[ye]}),u("view_accommodations")&&(a.value.accommodations.instruction&&(x.instruction=(W=(V=y.app)==null?void 0:V.accommodations)==null?void 0:W.instruction),a.value.accommodations.assessment&&(x.assessment=(re=(G=y.app)==null?void 0:G.accommodations)==null?void 0:re.assessment)),(u("view_schedule")||Object.values(((ae=(de=y.app)==null?void 0:de.schedule)==null?void 0:ae.periods)||{}).includes(b==null?void 0:b.uid))&&(a.value.schedule.periods&&(x.schedule=(te=(ce=y.app)==null?void 0:ce.schedule)==null?void 0:te.periods),a.value.schedule.classServices&&(x.classServices=(xe=(Z=y.app)==null?void 0:Z.schedule)==null?void 0:xe.classServices)),u("view_documents")&&(a.value.documents.ataglancePdfUrl&&(x.ataglancePdfUrl=(Y=(J=y.app)==null?void 0:J.documents)==null?void 0:Y.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(x.bipPdfUrl=(fe=(Q=y.app)==null?void 0:Q.documents)==null?void 0:fe.bipPdfUrl)),x}function g(y){var E,x,w,R,P,S,_,m,A,k,I,C,M,D,F,N,L,O,z,H,V,W,G,re,de,ae,ce,te;const b={};return a.value.studentData.firstName&&(b.firstName=(x=(E=y.app)==null?void 0:E.studentData)==null?void 0:x.firstName),a.value.studentData.lastName&&(b.lastName=(R=(w=y.app)==null?void 0:w.studentData)==null?void 0:R.lastName),a.value.studentData.grade&&(b.grade=(S=(P=y.app)==null?void 0:P.studentData)==null?void 0:S.grade),a.value.studentData.plan&&(b.plan=(m=(_=y.app)==null?void 0:_.studentData)==null?void 0:m.plan),a.value.studentData.caseManagerId&&(b.caseManagerId=(k=(A=y.app)==null?void 0:A.studentData)==null?void 0:k.caseManagerId),a.value.dates.reviewDate&&(b.reviewDate=(C=(I=y.app)==null?void 0:I.dates)==null?void 0:C.reviewDate),a.value.dates.reevalDate&&(b.reevalDate=(D=(M=y.app)==null?void 0:M.dates)==null?void 0:D.reevalDate),a.value.dates.meetingDate&&(b.meetingDate=(N=(F=y.app)==null?void 0:F.dates)==null?void 0:N.meetingDate),a.value.providers.all&&o.forEach(Z=>{var xe,J;b[Z]=(J=(xe=y.app)==null?void 0:xe.providers)==null?void 0:J[Z]}),a.value.accommodations.instruction&&(b.instruction=(O=(L=y.app)==null?void 0:L.accommodations)==null?void 0:O.instruction),a.value.accommodations.assessment&&(b.assessment=(H=(z=y.app)==null?void 0:z.accommodations)==null?void 0:H.assessment),a.value.schedule.periods&&(b.schedule=(W=(V=y.app)==null?void 0:V.schedule)==null?void 0:W.periods),a.value.schedule.classServices&&(b.classServices=(re=(G=y.app)==null?void 0:G.schedule)==null?void 0:re.classServices),a.value.documents.ataglancePdfUrl&&(b.ataglancePdfUrl=(ae=(de=y.app)==null?void 0:de.documents)==null?void 0:ae.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(b.bipPdfUrl=(te=(ce=y.app)==null?void 0:ce.documents)==null?void 0:te.bipPdfUrl),b}function v(){const y=r.students.map(_=>p(_)),b=[],E=[],x={firstName:"First Name",lastName:"Last Name",grade:"Grade",plan:"Plan Type",caseManagerId:"Case Manager",reviewDate:"Plan Review",reevalDate:"Reevaluation",meetingDate:"Meeting Date",speechId:"Speech",otId:"OT",mhId:"Mental Health",ptId:"PT",scId:"SC",trId:"TR",audId:"Audiology",viId:"Vision",atId:"AT",dhhId:"DHH",omId:"O&M",bisId:"BIS",hnId:"HN",swId:"SW",instruction:"Instructional Accommodation",assessment:"Assessment Accommodations",schedule:"Schedule",classServices:"Class Services",ataglancePdfUrl:"At-A-Glance",bipPdfUrl:"BIP"};Object.entries(a.value).forEach(([_,m])=>{Object.entries(m).forEach(([A,k])=>{k&&(A==="all"?o.forEach(I=>{b.push(x[I])}):b.push(x[A]))})}),y.forEach(_=>{const m=[];Object.entries(a.value).forEach(([A,k])=>{Object.entries(k).forEach(([I,C])=>{if(C)if(I==="all")o.forEach(M=>{const D=_[M]||"";m.push(D?c(D):"")});else{let M=_[I]||"";I.endsWith("Id")?M=M?c(M):"":I==="classServices"?M=Array.isArray(_.classServices)?_.classServices.join(", "):"":I==="schedule"&&(M=_.schedule?Object.entries(_.schedule).map(([D,F])=>`${D}: ${c(F)}`).join("; "):""),m.push(M)}})}),E.push(m)});const w=[b.join(","),...E.map(_=>_.map(m=>`"${String(m).replace(/"/g,'""')}"`).join(","))].join(`
`),R=new Blob([w],{type:"text/csv"}),P=window.URL.createObjectURL(R),S=document.createElement("a");S.href=P,S.download="students-export.csv",S.click(),window.URL.revokeObjectURL(P),n("close")}return(y,b)=>(B(),U("div",wj,[d("div",Cj,[d("header",null,[b[17]||(b[17]=d("h2",null,"Export Students",-1)),d("button",{onClick:b[0]||(b[0]=E=>y.$emit("close")),class:"close-btn"},"")]),d("main",null,[d("p",null,"Export "+X(t.students.length)+" students",1),d("div",kj,[d("div",Ij,[b[23]||(b[23]=d("h4",null,"Student Info",-1)),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[1]||(b[1]=E=>a.value.studentData.firstName=E)},null,512),[[yt,a.value.studentData.firstName]]),b[18]||(b[18]=we(" First Name "))]),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[2]||(b[2]=E=>a.value.studentData.lastName=E)},null,512),[[yt,a.value.studentData.lastName]]),b[19]||(b[19]=we(" Last Name "))]),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[3]||(b[3]=E=>a.value.studentData.grade=E)},null,512),[[yt,a.value.studentData.grade]]),b[20]||(b[20]=we(" Grade "))]),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[4]||(b[4]=E=>a.value.studentData.plan=E)},null,512),[[yt,a.value.studentData.plan]]),b[21]||(b[21]=we(" Plan Type "))]),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[5]||(b[5]=E=>a.value.studentData.caseManagerId=E)},null,512),[[yt,a.value.studentData.caseManagerId]]),b[22]||(b[22]=we(" Case Manager "))])]),d("div",Dj,[b[27]||(b[27]=d("h4",null,"Important Dates",-1)),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[6]||(b[6]=E=>a.value.dates.reviewDate=E)},null,512),[[yt,a.value.dates.reviewDate]]),b[24]||(b[24]=we(" Plan Review "))]),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[7]||(b[7]=E=>a.value.dates.reevalDate=E)},null,512),[[yt,a.value.dates.reevalDate]]),b[25]||(b[25]=we(" Reevaluation "))]),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[8]||(b[8]=E=>a.value.dates.meetingDate=E)},null,512),[[yt,a.value.dates.meetingDate]]),b[26]||(b[26]=we(" Meeting Date "))])]),d("div",Pj,[b[29]||(b[29]=d("h4",null,"Related Services",-1)),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[9]||(b[9]=E=>a.value.providers.all=E)},null,512),[[yt,a.value.providers.all]]),b[28]||(b[28]=we(" All Service Providers "))])]),d("div",Rj,[b[32]||(b[32]=d("h4",null,"Accommodations",-1)),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[10]||(b[10]=E=>a.value.accommodations.instruction=E)},null,512),[[yt,a.value.accommodations.instruction]]),b[30]||(b[30]=we(" Instructional "))]),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[11]||(b[11]=E=>a.value.accommodations.assessment=E)},null,512),[[yt,a.value.accommodations.assessment]]),b[31]||(b[31]=we(" Assessment "))])]),d("div",Fj,[b[35]||(b[35]=d("h4",null,"Schedule & Services",-1)),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[12]||(b[12]=E=>a.value.schedule.periods=E)},null,512),[[yt,a.value.schedule.periods]]),b[33]||(b[33]=we(" Class Schedule "))]),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[13]||(b[13]=E=>a.value.schedule.classServices=E)},null,512),[[yt,a.value.schedule.classServices]]),b[34]||(b[34]=we(" Class Services "))])]),d("div",Nj,[b[38]||(b[38]=d("h4",null,"Documents",-1)),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[14]||(b[14]=E=>a.value.documents.ataglancePdfUrl=E)},null,512),[[yt,a.value.documents.ataglancePdfUrl]]),b[36]||(b[36]=we(" At-A-Glance "))]),d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":b[15]||(b[15]=E=>a.value.documents.bipPdfUrl=E)},null,512),[[yt,a.value.documents.bipPdfUrl]]),b[37]||(b[37]=we(" BIP "))])])]),d("div",{class:"quick-select"},[d("button",{onClick:f},"Select All"),d("button",{onClick:h},"Deselect All")])]),d("footer",null,[d("button",{onClick:b[16]||(b[16]=E=>y.$emit("close")),class:"btn-secondary"},"Cancel"),d("button",{onClick:v,class:"btn-primary",disabled:!l.value},"Export",8,Oj)])])]))}},Lj=bt(Mj,[["__scopeId","data-v-08e1f384"]]),Bj={class:"modal-body"},Uj={class:"student-info"},$j={class:"case-manager-info"},Vj={class:"form-group"},Hj={key:0,class:"no-forms-message"},jj={key:1,class:"form-selection"},Gj=["id","value"],Wj=["for"],zj={class:"form-title"},Kj={class:"form-details"},qj={key:0,class:"form-description"},Xj={class:"form-date"},Yj={key:0,class:"form-group"},Qj={class:"teacher-selection-header"},Jj={class:"teacher-actions"},Zj=["title"],eG={class:"teacher-selection"},tG={key:0,class:"no-teachers-message"},rG={key:1,class:"teacher-checkboxes"},nG=["id","value"],sG=["for"],aG={class:"teacher-email"},iG={key:0,class:"selected-emails-preview"},oG={class:"email-preview"},lG={key:1,class:"form-group"},cG={class:"duplication-options"},uG={class:"option-item"},dG={key:2,class:"form-group"},fG={class:"send-history"},hG={class:"history-info"},pG={class:"history-date"},mG={class:"history-teachers"},gG={key:0,class:"history-success"},vG={key:1,class:"history-failed"},yG={key:0,class:"history-links"},xG=["href"],EG=["href"],_G={key:0,class:"resource-links"},bG={class:"resource-section"},SG={class:"resource-note"},AG={class:"success-details"},TG={key:0,class:"student-info"},wG={class:"form-link"},CG=["href"],kG={class:"modal-footer"},IG=["disabled"],DG={key:0},PG={key:1},RG={__name:"TeacherFeedbackDialog",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!0}},emits:["close","form-sent"],setup(t,{emit:e}){const r=t,n=e,{activeForms:s}=sx(),{userList:i,fetchUsers:a}=_a(),o=se(!1),l=se(""),c=se(""),u=se(null),f=se(!1),h=se("Copy teacher emails to clipboard"),p=se(""),g=se([]),v=be(()=>s.value||[]),y=be(()=>{var k;return p.value&&((k=v.value)==null?void 0:k.find(I=>I.id===p.value))||null}),b=be(()=>{if(!p.value||!r.student)return[];try{return JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]").filter(I=>I&&I.studentId===r.student.id&&I.formId===p.value).sort((I,C)=>new Date(C.sentAt)-new Date(I.sentAt))||[]}catch(k){return console.warn("Error parsing send history:",k),[]}}),E=be(()=>{var I,C,M;if(!r.student||!i.value)return[];const k=new Set;if((C=(I=r.student.app)==null?void 0:I.schedule)!=null&&C.periods)Object.values(r.student.app.schedule.periods).forEach(D=>{var N;const F=typeof D=="string"?D:D==null?void 0:D.teacherId;F&&k.add(F),(N=D==null?void 0:D.coTeaching)!=null&&N.caseManagerId&&k.add(D.coTeaching.caseManagerId)});else{const D=r.student.schedule||{};Object.values(D).forEach(F=>{F&&k.add(F)})}return(M=r.student.aeries)!=null&&M.schedule&&Object.values(r.student.aeries.schedule).forEach(D=>{D!=null&&D.teacherId&&k.add(D.teacherId)}),Array.from(k).map(D=>(i.value||[]).find(F=>F&&F.id===D)).filter(Boolean).filter(D=>D&&D.role==="teacher")}),x=be(()=>p.value&&(g.value||[]).length>0),w=k=>k?(k.seconds?new Date(k.seconds*1e3):new Date(k)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",R=k=>k?(k.seconds?new Date(k.seconds*1e3):new Date(k)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):"",P=()=>{g.value=[...E.value]},S=async()=>{const k=g.value.map(I=>I.email).join(", ");try{await navigator.clipboard.writeText(k),h.value=" Copied!",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}catch(I){console.error("Failed to copy emails:",I);const C=document.createElement("textarea");C.value=k,document.body.appendChild(C),C.select();try{document.execCommand("copy"),h.value=" Copied!",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}catch{h.value=" Copy failed",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}document.body.removeChild(C)}},_=async()=>{var k,I,C,M;if(x.value)try{o.value=!0,l.value="",u.value=null;const D=y.value,F=g.value.map(de=>de.email),N=g.value.map(de=>de.name||de.email).join(", "),L=r.student.firstName||r.student.first_name||((I=(k=r.student.app)==null?void 0:k.studentData)==null?void 0:I.firstName)||"",O=r.student.lastName||r.student.last_name||((M=(C=r.student.app)==null?void 0:C.studentData)==null?void 0:M.lastName)||"",z=`${L} ${O}`.trim(),H=(((L==null?void 0:L[0])||"")+((O==null?void 0:O[0])||"")).toUpperCase()||"ST";let V=D.formUrl;V.includes("/edit")&&(V=V.replace("/edit","/copy"));const W=new URLSearchParams;H&&H!=="ST"&&W.append("title",`${H} - ${D.title}`),z&&W.append("student",z),F.length>0&&W.append("responders",F.join(", "));const G=V.includes("?")?"&":"?",re=W.toString()?`${V}${G}${W.toString()}`:V;window.open(re,"_blank","noopener"),l.value=`Form opened for ${N}. Student: ${H} - ${z}`,c.value="success",u.value={message:`Form opened successfully for ${H} - ${z}`,sent:F.length,failed:0,formUrl:re,studentInitials:H,studentName:z},m(D,g.value,re)}catch(D){console.error("Error opening form:",D),l.value="Failed to open form. Please try again.",c.value="error"}finally{o.value=!1}},m=(k,I,C=null)=>{const M=JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]"),D={id:`${k.id}_${r.student.id}_${Date.now()}`,formId:k.id,formTitle:k.title,formUrl:C||k.formUrl,sheetUrl:null,studentId:r.student.id,studentName:`${r.student.firstName} ${r.student.lastName}`,caseManagerId:r.currentUser.uid,caseManagerName:r.currentUser.name||r.currentUser.email,teachers:I.map(N=>({id:N.id,name:N.name,email:N.email})),sentAt:new Date().toISOString(),method:"gmail"},F=M.findIndex(N=>N.id===D.id);F!==-1?M[F]=D:M.push(D),localStorage.setItem("casemanage_sent_forms",JSON.stringify(M))},A=()=>{n("close")};return Gt(()=>{p.value="",g.value=[],l.value="",a()}),$t(E,k=>{k&&k.length>0&&g.value.length===0&&(g.value=[...k])},{immediate:!0}),(k,I)=>{var C,M,D,F;return B(),U("div",{class:"modal-overlay",onClick:A},[d("div",{class:"modal-content",onClick:I[3]||(I[3]=Xr(()=>{},["stop"]))},[d("div",{class:"modal-header"},[I[4]||(I[4]=d("h3",null,"Send Teacher Feedback Form",-1)),d("button",{onClick:A,class:"close-btn"},"")]),d("div",Bj,[d("div",Uj,[d("h4",null,X(t.student.firstName)+" "+X(t.student.lastName)+" (Grade "+X(t.student.grade)+")",1),d("p",$j,"Case Manager: "+X(((C=t.currentUser)==null?void 0:C.name)||((M=t.currentUser)==null?void 0:M.email)),1)]),d("div",Vj,[I[6]||(I[6]=d("label",null,"Select Feedback Form to Send:",-1)),v.value.length===0?(B(),U("div",Hj,I[5]||(I[5]=[d("p",null,"No feedback forms available. Forms must be created in the Admin Panel first.",-1),d("p",null,[d("em",null,"Contact your administrator to create feedback forms.")],-1)]))):(B(),U("div",jj,[(B(!0),U(Pe,null,He(v.value,N=>(B(),U("div",{key:N.id,class:"form-option"},[Oe(d("input",{type:"radio",id:N.id,value:N.id,"onUpdate:modelValue":I[0]||(I[0]=L=>p.value=L)},null,8,Gj),[[ma,p.value]]),d("label",{for:N.id,class:"form-option-label"},[d("div",zj,X(N.title),1),d("div",Kj,[N.description?(B(),U("span",qj,X(N.description),1)):ve("",!0),d("span",Xj,"Created: "+X(w(N.createdAt)),1)])],8,Wj)]))),128))]))]),p.value?(B(),U("div",Yj,[d("div",Qj,[I[7]||(I[7]=d("label",null,"Select Teachers to Send Form To:",-1)),d("div",Jj,[E.value.length>0?(B(),U("button",{key:0,onClick:P,type:"button",class:"btn-select-all"}," Select All ")):ve("",!0),g.value.length>0?(B(),U("button",{key:1,onClick:S,type:"button",class:"btn-copy-emails",title:h.value},"  Copy Emails ",8,Zj)):ve("",!0)])]),d("div",eG,[E.value.length===0?(B(),U("div",tG,I[8]||(I[8]=[d("p",null,"No teachers found for this student's schedule.",-1)]))):(B(),U("div",rG,[(B(!0),U(Pe,null,He(E.value,N=>(B(),U("div",{key:N.id,class:"checkbox-item"},[Oe(d("input",{type:"checkbox",id:`teacher-${N.id}`,value:N,"onUpdate:modelValue":I[1]||(I[1]=L=>g.value=L)},null,8,nG),[[yt,g.value]]),d("label",{for:`teacher-${N.id}`},[we(X(N.name||N.email)+" ",1),d("span",aG,"("+X(N.email)+")",1)],8,sG)]))),128))]))]),g.value.length>0?(B(),U("div",iG,[I[9]||(I[9]=d("p",null,[d("strong",null,"Selected teacher emails:")],-1)),d("div",oG,X(g.value.map(N=>N.email).join(", ")),1)])):ve("",!0)])):ve("",!0),p.value&&g.value.length>0&&((D=y.value)!=null&&D.sheetTemplateUrl)?(B(),U("div",lG,[I[11]||(I[11]=d("label",null,"Response Collection:",-1)),d("div",cG,[d("div",uG,[Oe(d("input",{type:"checkbox",id:"duplicate-sheet","onUpdate:modelValue":I[2]||(I[2]=N=>f.value=N)},null,512),[[yt,f.value]]),I[10]||(I[10]=d("label",{for:"duplicate-sheet"},[d("strong",null,"Duplicate custom sheet"),d("span",{class:"option-description"},"Create a copy of the response template sheet in your Google Drive")],-1))])])])):ve("",!0),p.value&&b.value.length>0?(B(),U("div",dG,[I[12]||(I[12]=d("label",null,"Previous Sends for this Student:",-1)),d("div",fG,[(B(!0),U(Pe,null,He(b.value,N=>(B(),U("div",{key:N.id,class:"history-item"},[d("div",hG,[d("span",pG,X(R(N.sentAt)),1),d("span",mG,X((N.teacherEmails||[]).length)+" teacher"+X((N.teacherEmails||[]).length===1?"":"s"),1),N.successful>0?(B(),U("span",gG," "+X(N.successful)+" sent",1)):ve("",!0),N.failed>0?(B(),U("span",vG," "+X(N.failed)+" failed",1)):ve("",!0)]),N.formUrl||N.sheetUrl?(B(),U("div",yG,[N.formUrl?(B(),U("a",{key:0,href:N.formUrl,target:"_blank",class:"history-link"}," Form",8,xG)):ve("",!0),N.sheetUrl?(B(),U("a",{key:1,href:N.sheetUrl,target:"_blank",class:"history-link"}," Sheet",8,EG)):ve("",!0)])):ve("",!0)]))),128))])])):ve("",!0),l.value?(B(),U("div",{key:3,class:Ye(`status-message ${c.value}`)},[we(X(l.value)+" ",1),c.value==="success"&&u.value?(B(),U("div",_G,[d("div",bG,[I[16]||(I[16]=d("h5",null," Form Opened Successfully!",-1)),d("p",SG,[d("strong",null,X(u.value.message),1)]),d("div",AG,[d("p",null,[I[13]||(I[13]=we("  Form opened for ")),d("strong",null,X(u.value.sent),1),we(" teacher"+X(u.value.sent===1?"":"s"),1)]),u.value.studentInitials?(B(),U("p",TG,[I[14]||(I[14]=we("  Student: ")),d("strong",null,X(u.value.studentInitials),1),we(" - "+X(u.value.studentName),1)])):ve("",!0),d("p",wG,[I[15]||(I[15]=we("  Form Link: ")),d("a",{href:u.value.formUrl,target:"_blank"},X((F=y.value)==null?void 0:F.title),9,CG)])])])])):ve("",!0)],2)):ve("",!0)]),d("div",kG,[d("button",{onClick:A,class:"secondary-btn"},"Cancel"),d("button",{onClick:_,class:"primary-btn",disabled:!x.value||o.value},[o.value?(B(),U("span",DG,"Creating Form...")):(B(),U("span",PG," Create New Form"))],8,IG)])])])}}},FG=bt(RG,[["__scopeId","data-v-f8c1ccfe"]]),NG={class:"students-view"},OG={class:"page-header"},MG={class:"header-left"},LG={class:"search-container"},BG={class:"header-controls"},UG={class:"filter-group sort-group"},$G={key:0,class:"filter-group"},VG={class:"radio-group"},HG=["title"],jG=["value"],GG={class:"filter-group"},WG={class:"radio-group"},zG=["checked"],KG=["checked","disabled"],qG={key:0,class:"disabled-icon"},XG=["checked"],YG={key:0,class:"selected-radio-display"},QG={key:1,class:"filters-panel"},JG={class:"filters-content"},ZG={class:"filter-group"},eW=["value"],tW={class:"filter-group"},rW=["value"],nW={class:"filter-group"},sW=["value"],aW={class:"filter-group"},iW={class:"content"},oW={class:"print-user-name"},lW={key:0},cW={key:1,class:"view-container"},uW={key:0,class:"group-section"},dW={class:"group-header"},fW={key:2,class:"view-section"},hW={__name:"StudentsView",setup(t){var ye;const e=xn(),r=rU(),n=sU(r),s=hU(r,n);console.log(" STUDENTS VIEW DEBUG: Setting up watcher, currentRole:",(ye=s.currentRole)==null?void 0:ye.value),$t(()=>{var ie;return(ie=s.currentRole)==null?void 0:ie.value},ie=>{console.log(" STUDENTS VIEW DEBUG: Role changed to:",ie),ie==="paraeducator"&&(console.log(" STUDENTS VIEW DEBUG: Paraeducator role detected, setting up visibleStudents watcher"),$t(()=>{var ee;return(ee=s.visibleStudents)==null?void 0:ee.value},ee=>{console.log(" STUDENTS VIEW: Paraeducator visibleStudents changed:",{count:(ee==null?void 0:ee.length)||0,studentNames:(ee==null?void 0:ee.map(ge=>{var Te,ke,Ae,We;return`${((ke=(Te=ge.app)==null?void 0:Te.studentData)==null?void 0:ke.firstName)||"Unknown"} ${((We=(Ae=ge.app)==null?void 0:Ae.studentData)==null?void 0:We.lastName)||"Unknown"}`}))||[]})},{immediate:!0}))},{immediate:!0});const i=gU(r),{students:a,userMapObj:o,caseManagers:l,teacherList:c,userRoles:u,aideAssignment:f,paraeducators:h,currentUser:p,isAdmin:g,showProviderView:v,getStudentById:y}=r,{showFilters:b,currentFilters:E,toggleFilters:x,applyFilters:w,debouncedApplyFilters:R}=n,{visibleStudents:P,canEditAllStudents:S,canEditOwnStudents:_,canViewAllStudents:m,canAccessTesting:A,canAccessTestingPartial:k,canAccessFilters:I,isClassViewDisabled:C,setViewMode:M,providerViewOptions:D}=s,F=mU(r,n,be(()=>s.visibleStudents.value)),{currentViewMode:N,studentsByClass:L,directAssignmentStudents:O,testingViewStudents:z}=F,{editingStudentId:H,emailingStudentId:V,showExport:W,showAddStudent:G,showFeedbackDialog:re,feedbackStudentId:de,editStudent:ae,emailStudent:ce,handleTeacherFeedback:te,handleFormSent:Z,handleStudentAdded:xe,handleStudentSaved:J,handleNavAction:Y}=i,Q=ie=>{var ge;const ee=(ge=p.value)==null?void 0:ge.role;switch(ie){case"all_iep":return"CM+SP";case"case_manager":return"Case Manager";case"service_provider":return"Service Provider";case"teacher":return"Service Provider";case"iep_504_all":return"All IEP/504 students";case"all":return ee==="sped_chair"?"All students (with IEPs)":"All students";default:return"All students"}};be(()=>{var ee;return D!=null&&D.value?D.value:((ee=p.value)==null?void 0:ee.role)==="case_manager"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]});const fe=be(()=>{var ee;const ie=[];if(E.providerView&&((ee=D==null?void 0:D.value)!=null&&ee.length)){const ge=Q(E.providerView);ge&&ie.push(ge)}if(E.viewMode){let ge="";switch(E.viewMode){case"list":ge="List view";break;case"class":ge="Class-period view";break;case"testing":ge="Separate Setting For Testing";break}ge&&ie.push(ge)}return ie.length>0?ie.join(" | "):""});return(ie,ee)=>{var ge,Te,ke,Ae,We,De,je,$e;return B(),U("div",NG,[Re(PU,{"current-user":K(p),"is-admin":K(g),onAction:K(Y)},null,8,["current-user","is-admin","onAction"]),d("div",OG,[d("div",MG,[ee[23]||(ee[23]=d("h1",null,"Student Management",-1)),d("div",LG,[Oe(d("input",{type:"text","onUpdate:modelValue":ee[0]||(ee[0]=Ie=>K(E).search=Ie),onInput:ee[1]||(ee[1]=(...Ie)=>K(R)&&K(R)(...Ie)),placeholder:"Search students...",class:"search-input"},null,544),[[ft,K(E).search]])])]),d("div",BG,[d("div",UG,[Re(K(YB),{size:16,class:"sort-icon"}),Oe(d("select",{"onUpdate:modelValue":ee[2]||(ee[2]=Ie=>K(E).sortBy=Ie),onChange:ee[3]||(ee[3]=Ie=>K(w)()),class:"sort-select"},ee[24]||(ee[24]=[Dn('<option value="firstName" data-v-37eb092e>First Names</option><option value="lastName" data-v-37eb092e>Last Name</option><option value="grade" data-v-37eb092e>Grade</option><option value="reviewDate" data-v-37eb092e>Plan Review Date</option><option value="reevalDate" data-v-37eb092e>Re-evaluation Date</option><option value="meetingDate" data-v-37eb092e>Meeting Date</option>',6)]),544),[[cr,K(E).sortBy]])]),K(D)&&K(D).length?(B(),U("div",$G,[d("div",VG,[(B(!0),U(Pe,null,He(K(D),Ie=>(B(),U("label",{key:Ie.value,class:Ye(["radio-btn icon-btn",{active:K(E).providerView===Ie.value}]),title:Q(Ie.value)},[Oe(d("input",{type:"radio","onUpdate:modelValue":ee[4]||(ee[4]=Ke=>K(E).providerView=Ke),value:Ie.value,onChange:ee[5]||(ee[5]=(...Ke)=>K(w)&&K(w)(...Ke))},null,40,jG),[[ma,K(E).providerView]]),Ie.value==="all_iep"?(B(),Qt(K(ql),{key:0,size:16})):Ie.value==="case_manager"?(B(),Qt(K(Gv),{key:1,size:16})):Ie.value==="service_provider"||Ie.value==="teacher"?(B(),Qt(K(m7),{key:2,size:16})):Ie.value==="all"||Ie.value==="iep_504_all"?(B(),Qt(K(a7),{key:3,size:16})):ve("",!0)],10,HG))),128))])])):ve("",!0),d("div",GG,[d("div",WG,[d("label",{class:Ye(["radio-btn icon-btn",{active:K(E).viewMode==="list"}]),title:"List view"},[d("input",{type:"radio",value:"list",checked:K(E).viewMode==="list",onChange:ee[6]||(ee[6]=Ie=>K(M)("list"))},null,40,zG),Re(K(u7),{size:16})],2),d("label",{class:Ye(["radio-btn icon-btn",{active:K(E).viewMode==="class",disabled:K(C)}]),title:"Class-period view"},[d("input",{type:"radio",value:"class",checked:K(E).viewMode==="class",onChange:ee[7]||(ee[7]=Ie=>K(M)("class")),disabled:K(C)},null,40,KG),Re(K(r7),{size:16,class:Ye({strikethrough:K(C)})},null,8,["class"]),K(C)?(B(),U("span",qG,"")):ve("",!0)],2),K(A)?(B(),U("label",{key:0,class:Ye(["radio-btn icon-btn",{active:K(E).viewMode==="testing"}]),title:"Separate Setting For Testing"},[d("input",{type:"radio",value:"testing",checked:K(E).viewMode==="testing",onChange:ee[8]||(ee[8]=Ie=>K(M)("testing"))},null,40,XG),Re(K(Vv),{size:16})],2)):ve("",!0)])]),K(I)?(B(),U("button",{key:1,onClick:ee[9]||(ee[9]=(...Ie)=>K(x)&&K(x)(...Ie)),class:Ye(["radio-btn icon-btn filter-toggle-btn",{active:K(b)}]),title:"Toggle filters"},[Re(K(s7),{size:16})],2)):ve("",!0)])]),fe.value?(B(),U("div",YG,X(fe.value),1)):ve("",!0),K(b)?(B(),U("div",QG,[d("div",JG,[d("div",ZG,[ee[26]||(ee[26]=d("label",null,"Case Manager",-1)),Oe(d("select",{"onUpdate:modelValue":ee[10]||(ee[10]=Ie=>K(E).cm=Ie),onChange:ee[11]||(ee[11]=Ie=>K(w)()),class:"filter-select"},[ee[25]||(ee[25]=d("option",{value:"all"},"All Case Managers",-1)),(B(!0),U(Pe,null,He(K(l),Ie=>(B(),U("option",{key:Ie.id,value:Ie.id},X(Ie.name||Ie.email||Ie.id),9,eW))),128))],544),[[cr,K(E).cm]])]),d("div",tW,[ee[28]||(ee[28]=d("label",null,"Teacher",-1)),Oe(d("select",{"onUpdate:modelValue":ee[12]||(ee[12]=Ie=>K(E).teacher=Ie),onChange:ee[13]||(ee[13]=Ie=>K(w)()),class:"filter-select"},[ee[27]||(ee[27]=d("option",{value:"all"},"All Teachers",-1)),(B(!0),U(Pe,null,He(K(c),Ie=>(B(),U("option",{key:Ie.id,value:Ie.id},X(Ie.name||Ie.email||Ie.id),9,rW))),128))],544),[[cr,K(E).teacher]])]),d("div",nW,[ee[30]||(ee[30]=d("label",null,"Paraeducator",-1)),Oe(d("select",{"onUpdate:modelValue":ee[14]||(ee[14]=Ie=>K(E).paraeducator=Ie),onChange:ee[15]||(ee[15]=Ie=>K(w)()),class:"filter-select"},[ee[29]||(ee[29]=d("option",{value:"all"},"All Paraeducators",-1)),(B(!0),U(Pe,null,He(K(h),Ie=>(B(),U("option",{key:Ie.id,value:Ie.id},X(Ie.name||Ie.email||Ie.id),9,sW))),128))],544),[[cr,K(E).paraeducator]])]),d("div",aW,[ee[32]||(ee[32]=d("label",null,"Plan Type",-1)),Oe(d("select",{"onUpdate:modelValue":ee[16]||(ee[16]=Ie=>K(E).plan=Ie),onChange:ee[17]||(ee[17]=Ie=>K(w)()),class:"filter-select"},ee[31]||(ee[31]=[d("option",{value:"all"},"All Plans",-1),d("option",{value:"IEP"},"IEP",-1),d("option",{value:"504"},"504",-1)]),544),[[cr,K(E).plan]])])])])):ve("",!0),d("div",iW,[d("div",oW,X(((ge=K(e).currentUser)==null?void 0:ge.name)||((Te=K(e).currentUser)==null?void 0:Te.email)||((ke=K(e).currentUser)==null?void 0:ke.displayName)||((Ae=K(p))==null?void 0:Ae.name)||((We=K(p))==null?void 0:We.email)||"System User"),1),K(N)==="list"?(B(),U("div",lW,[Re(Qf,{students:K(P),"user-map":K(o),"current-user":K(p),"student-data":K(r),"can-edit-all":K(S),"can-edit-own":K(_),"can-view-all":K(m),"can-access-testing":K(A),"can-access-testing-partial":K(k),"aide-schedule":((De=K(p))==null?void 0:De.role)==="paraeducator"?K(f):{},onEdit:K(ae),onEmail:K(ce),onTeacherFeedback:K(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):K(N)==="class"?(B(),U("div",cW,[K(O).length>0?(B(),U("div",uW,[ee[33]||(ee[33]=d("h3",{class:"group-header direct-assignment-header"},"Direct Assignment",-1)),Re(Qf,{students:K(O),"user-map":K(o),"current-user":K(p),"student-data":K(r),"can-edit-all":K(S),"can-edit-own":K(_),"can-view-all":K(m),"can-access-testing":K(A),"can-access-testing-partial":K(k),"aide-schedule":((je=K(p))==null?void 0:je.role)==="paraeducator"?K(f):{},onEdit:K(ae),onEmail:K(ce),onTeacherFeedback:K(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):ve("",!0),(B(!0),U(Pe,null,He(K(L),(Ie,Ke)=>{var _e;return B(),U("div",{key:Ke,class:"group-section"},[d("h3",dW,"Period "+X(Ke),1),Re(Qf,{students:Ie,"user-map":K(o),"current-user":K(p),"student-data":K(r),"can-edit-all":K(S),"can-edit-own":K(_),"can-view-all":K(m),"can-access-testing":K(A),"can-access-testing-partial":K(k),"aide-schedule":((_e=K(p))==null?void 0:_e.role)==="paraeducator"?K(f):{},onEdit:K(ae),onEmail:K(ce),onTeacherFeedback:K(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])}),128))])):K(N)==="testing"?(B(),U("div",fW,[Re(Qf,{students:K(z),"user-map":K(o),"current-user":K(p),"student-data":K(r),"can-edit-all":K(S),"can-edit-own":K(_),"can-view-all":K(m),"can-access-testing":K(A),"can-access-testing-partial":K(k),"testing-view":!0,"aide-schedule":(($e=K(p))==null?void 0:$e.role)==="paraeducator"?K(f):{},onEdit:K(ae),onEmail:K(ce),onTeacherFeedback:K(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):ve("",!0)]),K(H)?(B(),Qt(ej,{key:2,"student-id":K(H),users:{userRoles:K(u)},onClose:ee[18]||(ee[18]=Ie=>H.value=null),onSaved:K(J)},null,8,["student-id","users","onSaved"])):ve("",!0),K(V)?(B(),Qt(Tj,{key:3,student:K(y)(K(V)),"user-map":K(o),"current-user":K(p),onClose:ee[19]||(ee[19]=Ie=>V.value=null)},null,8,["student","user-map","current-user"])):ve("",!0),K(W)?(B(),Qt(Lj,{key:4,students:K(a),"user-map":K(o),onClose:ee[20]||(ee[20]=Ie=>W.value=!1)},null,8,["students","user-map"])):ve("",!0),K(G)?(B(),Qt(cx,{key:5,users:{userRoles:K(u)},onClose:ee[21]||(ee[21]=Ie=>G.value=!1),onSaved:K(xe)},null,8,["users","onSaved"])):ve("",!0),K(re)?(B(),Qt(FG,{key:6,student:K(y)(K(de)),"current-user":K(p),"user-map":K(o),onClose:ee[22]||(ee[22]=Ie=>re.value=!1),onFormSent:K(Z)},null,8,["student","current-user","user-map","onFormSent"])):ve("",!0)])}}},pW=bt(hW,[["__scopeId","data-v-37eb092e"]]),Hi={domainValidation:{enabled:!1,controlledByCloudDomain:!1,requireAtLeastOne:!0,domains:[{id:"district",name:"District Domain",domain:"",enabled:!0,required:!0,description:"Main district email domain (e.g., district.edu)"},{id:"school",name:"School Domain",domain:"",enabled:!1,required:!1,description:"Individual school domain (e.g., schoolname.org)"},{id:"state",name:"State K-12 Domain",domain:"",enabled:!1,required:!1,description:"State education domain (e.g., k12.state.us)"}],emailExceptions:[{email:"",description:"Tech team member or cloud console owner"},{email:"",description:"IT administrator"},{email:"",description:"External consultant"},{email:"",description:"Emergency access"},{email:"",description:"Backup administrator"}]},sessionSecurity:{timeoutEnabled:!0,timeoutMinutes:30,enforcePasswordChange:!1,requireMFA:!1},dataAccess:{restrictExport:!0,watermarkPDFs:!0},ipRestrictions:{enabled:!1,allowedIPs:[]},alertSettings:{enabled:!0,unusualAccess:!0,bulkExport:!0,alertEmails:[]}},Un=se({...Hi}),Po=se(!1),Ll=se(null);let Bb=!1;function wk(){const t=Ze(qe,"system_security","global"),e=async()=>{var o,l;if(Po.value)return new Promise(c=>{const u=$t(Po,f=>{f||(u(),c(Un.value))})});if(Bb&&!Ll.value)return Un.value;Po.value=!0,Ll.value=null;try{const c=await nr(t);if(c.exists()){const u=c.data();Un.value={...Hi,...u,domainValidation:{...Hi.domainValidation,...u.domainValidation,domains:((o=u.domainValidation)==null?void 0:o.domains)||Hi.domainValidation.domains,emailExceptions:((l=u.domainValidation)==null?void 0:l.emailExceptions)||Hi.domainValidation.emailExceptions}}}else Un.value={...Hi},await Ht(t,Un.value);Bb=!0}catch(c){console.error("Error loading security settings:",c),Ll.value=c.message||"Failed to load security settings",Un.value={...Hi}}finally{Po.value=!1}return Un.value},r=async(o=null)=>{const l=o||Un.value;Po.value=!0,Ll.value=null;try{await Ht(t,l),o||(Un.value={...l}),console.log(" Security settings saved successfully")}catch(c){throw console.error("Error saving security settings:",c),Ll.value=c.message||"Failed to save security settings",c}finally{Po.value=!1}},n=async()=>{Un.value={...Hi},await r()},s=()=>{var o,l;return(l=(o=Un.value)==null?void 0:o.domainValidation)!=null&&l.domains?Un.value.domainValidation.domains.filter(c=>c.enabled&&c.domain&&c.domain.trim()).map(c=>c.domain.trim()):[]},i=()=>{var o,l;return(l=(o=Un.value)==null?void 0:o.domainValidation)!=null&&l.emailExceptions?Un.value.domainValidation.emailExceptions.filter(c=>c.email&&c.email.trim()).map(c=>c.email.trim()):[]};return{securitySettings:Un,loading:Po,error:Ll,loadSecuritySettings:e,saveSecuritySettings:r,resetSecuritySettings:n,getEnabledDomains:s,getEmailExceptions:i,isEmailAllowed:o=>{var f,h;if(!o)return!1;if(!((h=(f=Un.value)==null?void 0:f.domainValidation)!=null&&h.enabled))return!0;const l=o.toLowerCase();if(i().some(p=>l===p.toLowerCase()))return!0;const u=s();return u.length===0?!0:u.some(p=>l.endsWith(`@${p.toLowerCase()}`))}}}const mW={class:"login-container"},gW={key:0,class:"current-account-info"},vW={class:"current-account"},yW={key:0,class:"account-warning"},xW={key:1,class:"error-message"},EW={key:0,class:"suggested-actions"},_W=["disabled"],bW={__name:"LoginView",setup(t){const e=ki(),{loadSecuritySettings:r,isEmailAllowed:n,getEnabledDomains:s,getEmailExceptions:i}=wk(),a=se(!1),o=se(""),l=se(""),c=se([]),u=se(""),f=v=>n(v),h=()=>{o.value="",l.value="",c.value=[]},p=(v,y=null)=>{var b,E;if(console.error("Login failed:",v),h(),y&&!f(y)){l.value="Wrong Google Account";const x=s(),w=i();let R="approved accounts";x.length>0&&(R=`approved domains: ${x.join(", ")}`),o.value=`You signed in with ${y}, but this system requires ${R}.`;const P=["Sign out of your personal Google account in this browser","Or open an incognito/private window and sign in with your approved account"];x.length>0&&P.splice(1,0,`Sign in with your district account (${x.length>0?`@${x[0]}`:"@yourdomain.edu"})`),w.length>0&&P.push("If you are IT staff, ensure you are using your approved exception email"),c.value=P}else v.code==="auth/popup-blocked"?(l.value="Popup Blocked",o.value="Your browser blocked the Google sign-in popup.",c.value=["Allow popups for this site in your browser settings","Try signing in again"]):v.code==="auth/popup-closed-by-user"?(l.value="Sign-in Cancelled",o.value="You closed the sign-in window before completing authentication.",c.value=['Click "Sign in with Google" again',"Complete the sign-in process in the popup window"]):(b=v.message)!=null&&b.includes("insufficient permissions")||(E=v.message)!=null&&E.includes("not found")?(l.value="Account Not Found",o.value=y?`Your account (${y}) is not set up in this system.`:"Your account is not set up in this system.",c.value=["Contact your administrator to add your account","Verify you're using your district Google account","Check that you're signing in with the correct email address"]):(l.value="Sign-in Failed",o.value=v.message||"An unexpected error occurred during sign-in.",c.value=["Check your internet connection","Try signing in again","Contact IT support if the problem persists"])},g=async()=>{var v;try{a.value=!0,h();const{user:y}=await ey(dt,Yy);if(!f(y.email)){await dt.signOut(),p(new Error("Wrong account domain"),y.email);return}const b=Ze(qe,"users",y.uid);if(!(await nr(b)).exists()){await dt.signOut(),p(new Error("Account not found in system"),y.email);return}e.push({name:"Home"})}catch(y){p(y,(v=y.customData)==null?void 0:v.email)}finally{a.value=!1}};return Gt(async()=>{await r(),dp(dt,v=>{v?u.value=v.email:u.value=""})}),(v,y)=>(B(),U("div",mW,[y[2]||(y[2]=d("h1",null,"Case Manager Portal",-1)),y[3]||(y[3]=d("p",null,"Please sign in with your district Google account:",-1)),u.value?(B(),U("div",gW,[d("p",vW,[y[0]||(y[0]=we("Currently signed in as: ")),d("strong",null,X(u.value),1)]),f(u.value)?ve("",!0):(B(),U("p",yW,"  This appears to be a personal account. Please use your district account. "))])):ve("",!0),o.value?(B(),U("div",xW,[d("h3",null,X(l.value),1),d("p",null,X(o.value),1),c.value.length>0?(B(),U("div",EW,[y[1]||(y[1]=d("p",null,[d("strong",null,"Try these steps:")],-1)),d("ul",null,[(B(!0),U(Pe,null,He(c.value,b=>(B(),U("li",{key:b},X(b),1))),128))])])):ve("",!0),d("button",{onClick:h,class:"secondary-btn"},"Try Again")])):ve("",!0),d("button",{onClick:g,class:"primary-btn",disabled:a.value},X(a.value?"Signing in...":"Sign in with Google"),9,_W),y[4]||(y[4]=d("div",{class:"help-text"},[d("p",null,[d("small",null,"Need help? Contact IT support if you continue having issues.")])],-1))]))}},SW=bt(bW,[["__scopeId","data-v-a6260423"]]),AW={name:"TabBar",props:{tabs:{type:Array,required:!0,default:()=>[]},activeTab:{type:String,required:!0}},emits:["tab-change"],methods:{getStatusIcon(t){switch(t){case"not-active":return"";case"not-working":return"";default:return""}},getStatusTooltip(t){switch(t){case"not-active":return" = Not active";case"not-working":return" = Not working";default:return""}}}},TW={class:"admin-tab-bar"},wW=["onClick","title"];function CW(t,e,r,n,s,i){return B(),U("div",TW,[(B(!0),U(Pe,null,He(r.tabs,a=>(B(),U("button",{key:a.key,class:Ye({active:r.activeTab===a.key}),onClick:o=>t.$emit("tab-change",a.key),title:i.getStatusTooltip(a.status)},[we(X(a.label)+" ",1),a.status?(B(),U("span",{key:0,class:Ye(["status-indicator",a.status])},X(i.getStatusIcon(a.status)),3)):ve("",!0)],10,wW))),128))])}const kW=bt(AW,[["render",CW],["__scopeId","data-v-5be36c07"]]),IW={name:"UserAddForm",setup(){const t=Pa(WC,"addUserWithRole"),e=xo(),r=Ns({name:"",email:"",role:"",provider:"",aeriesId:""}),n=se(null),s=se(""),i=se(!1),a=se(null),o=mc,{appSettings:l,loadAppSettings:c}=Os(),u=be(()=>{if(l&&l.value&&l.value.serviceProviders){const x=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}];return l.value.serviceProviders.map(w=>x.find(R=>R.abbreviation===w)||{name:w,abbreviation:w})}return[]}),f=(x,w=!1)=>{s.value=x,i.value=w,setTimeout(()=>{s.value="",i.value=!1},5e3)},h=async(x,w,R,P,S)=>{try{const _={name:x,email:w,role:R,provider:P,aeriesId:S,createdAt:new Date,status:"active"},m=await EC(At(e,"users"),_);return await rn.logUserManagement(m.id,"create",{userData:{name:x,email:w,role:R,provider:P,aeriesId:S},method:"firestore_direct"}),{success:!0,userId:m.id}}catch(_){throw await rn.logUserManagement("unknown","create_failed",{error:_.message,attemptedData:{name:x,email:w,role:R,provider:P,aeriesId:S},method:"firestore_direct"}),_}},p=async(x,w,R,P,S)=>{var _,m;try{try{return await t({name:x,email:w,role:R,provider:P,aeriesId:S}),await rn.logUserManagement("cloud_function_user","create",{userData:{name:x,email:w,role:R,provider:P,aeriesId:S},method:"cloud_function"}),{success:!0,method:"cloud-function"}}catch(A){return A.code==="functions/already-exists"||(_=A.message)!=null&&_.includes("409")||(m=A.message)!=null&&m.includes("already exists")?(console.log(`User ${w} already exists in Firebase Auth, skipping...`),await rn.logUserManagement("existing_user","create_skipped",{userData:{name:x,email:w,role:R,provider:P,aeriesId:S},reason:"user_already_exists",method:"cloud_function"}),{success:!0,method:"already-exists",message:"User already exists"}):(await h(x,w,R,P,S),{success:!0,method:"firestore"})}}catch(A){return await rn.logUserManagement("unknown","create_failed",{error:A.message,attemptedData:{name:x,email:w,role:R,provider:P,aeriesId:S},method:"addUserToFirestore"}),{success:!1,error:A.message}}},g=async()=>{if(!Ds("addUser",5,6e4).allowed){f("Too many requests. Please wait before adding another user.",!0);return}const w=z7(r),R=W7(w);if(!R.isValid){f(`Please fix the following errors:
${R.errors.join(`
`)}`,!0);return}const P=["name","email","aeriesId"];for(const _ of P)if(w[_]){const m=Hr(w[_]);if(!m.isSafe){f(`Security threat detected in ${_}: ${m.threats.join(", ")}`,!0);return}}Object.assign(r,w);const S=await p(r.name,r.email,r.role,r.provider,r.aeriesId);S.success?(f(`User ${r.name} added successfully!`),r.name="",r.email="",r.role="",r.provider="",r.aeriesId=""):f(`Error adding user: ${S.error}`,!0)},v=x=>{const w=x.target.files[0];if(w){const R=ll(w,{allowedTypes:["csv","excel"],maxSize:5242880,fieldName:"User Import File"});if(!R.isValid){f(R.error,!0),x.target.value="";return}const P=Hr(w.name);if(!P.isSafe){f(`File name contains potentially dangerous content: ${P.threats.join(", ")}`,!0),x.target.value="";return}n.value=w}},y=async()=>{if(!n.value){f("Please select a file first",!0);return}const x=n.value.name.toLowerCase();if(!(x.endsWith(".csv")||x.endsWith(".xls")||x.endsWith(".xlsx"))){f("Unsupported file type. Please upload a .csv, .xls, or .xlsx file.",!0);return}f("Processing file...");try{x.endsWith(".csv")?await b(n.value):await E(n.value)}catch(w){f(`Error processing file: ${w.message}`,!0),console.error("Bulk upload error:",w)}},b=async x=>new Promise((w,R)=>{const P=new FileReader;P.onload=async S=>{try{const m=S.target.result.trim().split(/\r?\n/);if(m.length===0){R(new Error("The CSV file is empty."));return}const A=L=>{const O=[];let z="",H=!1;for(let V=0;V<L.length;V++){const W=L[V];W==='"'?H=!H:W===","&&!H?(O.push(z.trim()),z=""):z+=W}return O.push(z.trim()),O};let k=0;const I={name:0,email:1,role:2,provider:3,aeriesId:4},C=A(m[0]);C.map(L=>L.toLowerCase()).some(L=>L.includes("name")||L.includes("email")||L.includes("role"))&&(C.forEach((L,O)=>{const z=L.trim().toLowerCase();(z==="name"||z==="displayname")&&(I.name=O),z==="email"&&(I.email=O),z==="role"&&(I.role=O),(z==="provider"||z==="providertype")&&(I.provider=O),(z==="aeriesid"||z==="aeries_id"||z==="teacherid")&&(I.aeriesId=O)}),k=1);let D=0;const F=[];for(let L=k;L<m.length;L++){const O=m[L].trim();if(!O)continue;const z=A(O),H=(z[I.name]||"").trim(),V=(z[I.email]||"").trim(),W=(z[I.role]||"").trim(),G=(z[I.provider]||"").trim(),re=(z[I.aeriesId]||"").trim(),de=H.replace(/^"|"$/g,""),ae=V.replace(/^"|"$/g,""),ce=W.replace(/^"|"$/g,""),te=G.replace(/^"|"$/g,""),Z=re.replace(/^"|"$/g,"");if(!de||!ae||!ce){F.push(`Line ${L+1}: Missing name, email, or role.`);continue}if(!W_(ce)){F.push(`Line ${L+1}: Invalid role "${ce}".`);continue}const xe=await p(de,ae,ce,te,Z);xe.success?(D++,xe.method==="already-exists"&&console.log(`Line ${L+1}: User ${ae} already exists, skipped`)):F.push(`Line ${L+1}: ${xe.error}`)}let N=`${D} users added successfully.`;F.length>0&&(N+=`
${F.length} errors:
`+F.join(`
`)),f(N,F.length>0),n.value=null,a.value&&(a.value.value=""),w()}catch(_){R(new Error(`Error processing CSV file: ${_.message}`))}},P.onerror=()=>R(new Error("Failed to read the CSV file.")),P.readAsText(x)}),E=async x=>new Promise((w,R)=>{const P=new FileReader;P.onload=async S=>{try{if(typeof XLSX>"u"){R(new Error("Excel upload requires SheetJS (XLSX) library. Please include it in your page."));return}const _=new Uint8Array(S.target.result),m=XLSX.read(_,{type:"array"}),A=m.SheetNames[0],k=m.Sheets[A],I=XLSX.utils.sheet_to_json(k,{defval:""});if(I.length===0){R(new Error("The Excel file is empty or unrecognized."));return}let C=0;const M=[];for(let F=0;F<I.length;F++){const N=I[F];let L="",O="",z="",H="",V="";for(const re in N){const de=re.toLowerCase(),ae=(""+N[re]).trim();(de==="name"||de==="displayname")&&!L?L=ae:de==="email"&&!O?O=ae:de==="role"&&!z?z=ae:(de==="provider"||de==="providertype")&&!H?H=ae:(de==="aeriesid"||de==="aeries_id"||de==="teacherid")&&!V&&(V=ae)}const W=Object.values(N).map(re=>(""+re).trim());if(!L&&W[0]&&(L=W[0]),!O&&W[1]&&(O=W[1]),!z&&W[2]&&(z=W[2]),!H&&W[3]&&(H=W[3]),!V&&W[4]&&(V=W[4]),!L||!O||!z){M.push(`Row ${F+1}: Missing name, email, or role.`);continue}if(!W_(z)){M.push(`Row ${F+1}: Invalid role "${z}".`);continue}const G=await p(L,O,z,H,V);G.success?(C++,G.method==="already-exists"&&console.log(`Row ${F+1}: User ${O} already exists, skipped`)):M.push(`Row ${F+1}: ${G.error}`)}let D=`${C} users added successfully.`;M.length>0&&(D+=`
${M.length} errors:
`+M.join(`
`)),f(D,M.length>0),n.value=null,a.value&&(a.value.value=""),w()}catch(_){R(new Error(`Error processing Excel file: ${_.message}`))}},P.onerror=()=>R(new Error("Failed to read the Excel file.")),P.readAsArrayBuffer(x)});return Gt(async()=>{await c()}),{singleUser:r,validRoles:o,providerOptions:u,addSingleUser:g,selectedFile:n,statusMessage:s,isError:i,bulkFileInput:a,handleFileSelect:v,uploadBulkUsers:y,appSettings:l}}},DW={class:"add-user-wrapper"},PW={class:"add-single"},RW=["value"],FW={key:0},NW=["value"],OW={class:"add-bulk"},MW=["disabled"];function LW(t,e,r,n,s,i){return B(),U("div",DW,[d("div",PW,[e[16]||(e[16]=d("h3",null,"Add Single User",-1)),d("form",{onSubmit:e[5]||(e[5]=Xr((...a)=>n.addSingleUser&&n.addSingleUser(...a),["prevent"])),class:"form-grid"},[d("div",null,[d("label",null,[e[8]||(e[8]=we(" Name: ")),Oe(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.singleUser.name=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[ft,n.singleUser.name]])])]),d("div",null,[d("label",null,[e[9]||(e[9]=we(" Email: ")),Oe(d("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>n.singleUser.email=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[ft,n.singleUser.email]])])]),d("div",null,[d("label",null,[e[11]||(e[11]=we(" Role: ")),Oe(d("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.singleUser.role=a),required:""},[e[10]||(e[10]=d("option",{value:"",disabled:""},"Select role...",-1)),(B(!0),U(Pe,null,He(n.validRoles,a=>(B(),U("option",{key:a,value:a},X(a),9,RW))),128))],512),[[cr,n.singleUser.role]])])]),n.providerOptions.length>0?(B(),U("div",FW,[d("label",null,[e[13]||(e[13]=we(" Provider Type: ")),Oe(d("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.singleUser.provider=a)},[e[12]||(e[12]=d("option",{value:""},"None",-1)),(B(!0),U(Pe,null,He(n.providerOptions,a=>(B(),U("option",{key:a.abbreviation,value:a.abbreviation},X(a.name)+" ("+X(a.abbreviation)+") ",9,NW))),128))],512),[[cr,n.singleUser.provider]])])])):ve("",!0),d("div",null,[d("label",null,[e[14]||(e[14]=we(" Aeries ID: ")),Oe(d("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>n.singleUser.aeriesId=a),placeholder:"Optional Aeries Teacher ID"},null,512),[[ft,n.singleUser.aeriesId]])])]),e[15]||(e[15]=d("button",{type:"submit"},"Add User",-1))],32)]),d("div",OW,[e[17]||(e[17]=d("h3",null,"Bulk Upload Users",-1)),d("div",null,[d("input",{type:"file",ref:"bulkFileInput",accept:".csv, .xls, .xlsx",onChange:e[6]||(e[6]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),d("button",{onClick:e[7]||(e[7]=(...a)=>n.uploadBulkUsers&&n.uploadBulkUsers(...a)),disabled:!n.selectedFile}," Upload Users ",8,MW)]),e[18]||(e[18]=Dn('<h4 data-v-2e944241> Import Format &amp; Requirements</h4><div class="format-info" data-v-2e944241><p data-v-2e944241><strong data-v-2e944241> File Format:</strong> CSV, Excel (.xls, .xlsx) - First row must contain column headers</p><p data-v-2e944241><strong data-v-2e944241> Important:</strong> Column order matters! Headers must match exactly or use standard order</p></div><div class="spreadsheet-example" data-v-2e944241><h5 data-v-2e944241> Example Spreadsheet Layout</h5><div class="table-container" data-v-2e944241><table class="example-table" data-v-2e944241><thead data-v-2e944241><tr data-v-2e944241><th data-v-2e944241>Name</th><th data-v-2e944241>Email</th><th data-v-2e944241>Role</th><th data-v-2e944241>Provider</th><th data-v-2e944241>AeriesID</th></tr></thead><tbody data-v-2e944241><tr data-v-2e944241><td data-v-2e944241>John Smith</td><td data-v-2e944241>john.smith@school.org</td><td data-v-2e944241><span class="role-badge teacher" data-v-2e944241>teacher</span></td><td data-v-2e944241></td><td data-v-2e944241>123456</td></tr><tr data-v-2e944241><td data-v-2e944241>Jane Doe</td><td data-v-2e944241>jane.doe@school.org</td><td data-v-2e944241><span class="role-badge service-provider" data-v-2e944241>service_provider</span></td><td data-v-2e944241><span class="provider-badge" data-v-2e944241>SLP</span></td><td data-v-2e944241></td></tr><tr data-v-2e944241><td data-v-2e944241>Bob Johnson</td><td data-v-2e944241>bob.johnson@school.org</td><td data-v-2e944241><span class="role-badge case-manager" data-v-2e944241>case_manager</span></td><td data-v-2e944241></td><td data-v-2e944241>789012</td></tr></tbody></table></div></div><div class="reference-cards" data-v-2e944241><div class="reference-card roles-card" data-v-2e944241><div class="card-header roles-header" data-v-2e944241><h5 data-v-2e944241> Available Roles</h5><span class="card-count" data-v-2e944241>10 roles</span></div><div class="card-content" data-v-2e944241><div class="compact-grid" data-v-2e944241><div class="compact-item" data-v-2e944241><span class="role-badge admin" data-v-2e944241>admin</span><span class="compact-desc" data-v-2e944241>Full system access</span></div><div class="compact-item" data-v-2e944241><span class="role-badge school-admin" data-v-2e944241>school_admin</span><span class="compact-desc" data-v-2e944241>School-level admin</span></div><div class="compact-item" data-v-2e944241><span class="role-badge staff-view" data-v-2e944241>staff_view</span><span class="compact-desc" data-v-2e944241>View-only access</span></div><div class="compact-item" data-v-2e944241><span class="role-badge staff-edit" data-v-2e944241>staff_edit</span><span class="compact-desc" data-v-2e944241>Edit students, no admin panel</span></div><div class="compact-item" data-v-2e944241><span class="role-badge admin-504" data-v-2e944241>admin_504</span><span class="compact-desc" data-v-2e944241>504-specific admin</span></div><div class="compact-item" data-v-2e944241><span class="role-badge sped-chair" data-v-2e944241>sped_chair</span><span class="compact-desc" data-v-2e944241>SPED chair access</span></div><div class="compact-item" data-v-2e944241><span class="role-badge case-manager" data-v-2e944241>case_manager</span><span class="compact-desc" data-v-2e944241>Case manager access</span></div><div class="compact-item" data-v-2e944241><span class="role-badge teacher" data-v-2e944241>teacher</span><span class="compact-desc" data-v-2e944241>Teacher access</span></div><div class="compact-item" data-v-2e944241><span class="role-badge service-provider" data-v-2e944241>service_provider</span><span class="compact-desc" data-v-2e944241>Service provider access</span></div><div class="compact-item" data-v-2e944241><span class="role-badge paraeducator" data-v-2e944241>paraeducator</span><span class="compact-desc" data-v-2e944241>Paraeducator access</span></div></div></div></div><div class="reference-card providers-card" data-v-2e944241><div class="card-header providers-header" data-v-2e944241><h5 data-v-2e944241> Service Providers</h5><span class="card-count" data-v-2e944241>14 types</span></div><div class="card-content" data-v-2e944241><p class="card-note" data-v-2e944241><strong data-v-2e944241> Note:</strong> Use abbreviation only in import file</p><div class="compact-grid" data-v-2e944241><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>SLP</span><span class="compact-desc" data-v-2e944241>Speech-Language Therapy</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>OT</span><span class="compact-desc" data-v-2e944241>Occupational Therapy</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>PT</span><span class="compact-desc" data-v-2e944241>Physical Therapy</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>SC</span><span class="compact-desc" data-v-2e944241>School Counseling</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>MH</span><span class="compact-desc" data-v-2e944241>School-Based Mental Health</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>TR</span><span class="compact-desc" data-v-2e944241>Transportation</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>AUD</span><span class="compact-desc" data-v-2e944241>Audiology Services</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>VI</span><span class="compact-desc" data-v-2e944241>Vision Services</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>AT</span><span class="compact-desc" data-v-2e944241>Assistive Technology</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>DHH</span><span class="compact-desc" data-v-2e944241>Deaf and Hard of Hearing</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>O&amp;M</span><span class="compact-desc" data-v-2e944241>Orientation and Mobility</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>BIS</span><span class="compact-desc" data-v-2e944241>Behavioral Intervention</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>HN</span><span class="compact-desc" data-v-2e944241>Health/Nursing Services</span></div><div class="compact-item" data-v-2e944241><span class="provider-badge" data-v-2e944241>SW</span><span class="compact-desc" data-v-2e944241>Social Work Services</span></div></div></div></div><div class="reference-card aeries-card" data-v-2e944241><div class="card-header aeries-header" data-v-2e944241><h5 data-v-2e944241> Aeries ID / SIS ID</h5><span class="card-count" data-v-2e944241>6-digit numeric</span></div><div class="card-content" data-v-2e944241><div class="aeries-info" data-v-2e944241><div class="info-item" data-v-2e944241><span class="info-label" data-v-2e944241>Purpose:</span><span class="info-value" data-v-2e944241>Links teachers to classes in Aeries/SIS systems</span></div><div class="info-item" data-v-2e944241><span class="info-label" data-v-2e944241>Format:</span><span class="info-value" data-v-2e944241>123456 (6-digit numeric)</span></div><div class="info-item" data-v-2e944241><span class="info-label" data-v-2e944241>Required for:</span><span class="info-value" data-v-2e944241>Teachers &amp; service providers who teach classes</span></div><div class="info-item" data-v-2e944241><span class="info-label" data-v-2e944241>Optional for:</span><span class="info-value" data-v-2e944241>Admin roles, case managers, paraeducators</span></div></div></div></div></div><div class="troubleshooting-notes" data-v-2e944241><h5 data-v-2e944241> Troubleshooting Tips</h5><div class="tips-grid" data-v-2e944241><div class="tip-item" data-v-2e944241><strong data-v-2e944241> Column Headers:</strong><ul data-v-2e944241><li data-v-2e944241>Use exact header names: Name, Email, Role, Provider, AeriesID</li><li data-v-2e944241>Or use standard order: Name (1st), Email (2nd), Role (3rd), Provider (4th), AeriesID (5th)</li></ul></div><div class="tip-item" data-v-2e944241><strong data-v-2e944241> Validation:</strong><ul data-v-2e944241><li data-v-2e944241>All emails must be valid format</li><li data-v-2e944241>Roles must match exactly (case-sensitive)</li><li data-v-2e944241>Provider types only for service_provider role</li><li data-v-2e944241>Use provider abbreviations only (SLP, OT, PT, etc.)</li></ul></div><div class="tip-item" data-v-2e944241><strong data-v-2e944241> Common Issues:</strong><ul data-v-2e944241><li data-v-2e944241>Extra spaces in role names</li><li data-v-2e944241>Missing quotes around values with commas</li><li data-v-2e944241>Invalid email formats</li><li data-v-2e944241>Non-numeric Aeries IDs</li><li data-v-2e944241>Using full provider names instead of abbreviations</li></ul></div></div></div>',5))]),n.statusMessage?(B(),U("div",{key:0,class:Ye(["status-msg",{error:n.isError}])},X(n.statusMessage),3)):ve("",!0)])}const BW=bt(IW,[["render",LW],["__scopeId","data-v-2e944241"]]),Qa=se({}),Jf=se(!1),pg=se(!1);function Ck(){const t=xn(),e=be(()=>t.currentUser),r=async()=>{if(Jf.value||pg.value)return Qa.value;Jf.value=!0;try{const o=Ze(qe,"app_settings","admin_panel_permissions"),l=await nr(o);return l.exists()?Qa.value=l.data():Qa.value={},pg.value=!0,Qa.value}catch(o){return console.error("Error loading admin panel permissions:",o),Qa.value={},Qa.value}finally{Jf.value=!1}},n=be(()=>o=>{var c,u;if(!((c=e.value)!=null&&c.role)||!Qa.value[o])return!1;const l=e.value.role;return l==="admin"?!0:((u=Qa.value[o])==null?void 0:u[l])===!0}),s=be(()=>n.value("delete-all-users")),i=be(()=>n.value("delete-all-students"));return{permissions:Qa,isLoading:Jf,hasPermission:n,canDeleteAllUsers:s,canDeleteAllStudents:i,loadPermissions:r,initializeIfNeeded:async()=>{pg.value||await r()}}}const UW={class:"admin-form-row"},$W={class:"search-type-radios"},VW={class:"user-admin-table striped"},HW={key:0},jW=["data-userid"],GW=["value","disabled","onInput"],WW=["value","disabled","onInput"],zW=["disabled","value","onChange"],KW=["value"],qW={key:0},XW={key:0},YW={key:1},QW=["value","onChange"],JW=["value"],ZW={key:1},ez={class:"admin-action-btns"},tz=["onClick"],rz=["onClick"],nz=["onClick"],sz={class:"admin-pagination"},az=["disabled"],iz=["disabled"],pu=20,oz={__name:"UserTable",setup(t){const e=xo(),r=se([]),n=se(1),s=se("name"),i=se(""),a=se(null),o=se(""),l=se(!1),c=se(!1),u=se([]),f=se(null),h=mc,p=Os(),g=p.appSettings,v=p.loadAppSettings,{canDeleteAllUsers:y,initializeIfNeeded:b}=Ck();let E=null;const x=()=>{E&&clearTimeout(E),E=setTimeout(()=>{S()},300)},w=be(()=>{var L;return Array.isArray((L=g.value)==null?void 0:L.serviceProviders)&&g.value.serviceProviders.length>0}),R=be(()=>{var L;return((L=g.value)==null?void 0:L.serviceProviders)||[]}),P=(L,O=!1)=>{o.value=L,l.value=O,L&&setTimeout(()=>{o.value="",l.value=!1},5e3)},S=()=>{n.value=1,_()},_=async(L="first")=>{const O=At(e,"users");let z;if(i.value&&s.value==="name"){const W=(await Wt(or(O,hn("name"),oa(1e3)))).docs.map(G=>({id:G.id,...G.data()})).filter(G=>(G.name||"").toLowerCase().includes(i.value.toLowerCase()));a.value=null,r.value=W,c.value=!1;return}i.value&&s.value==="email"?z=or(O,hn("email"),Ur("email",">=",i.value),Ur("email","<=",i.value+""),oa(pu)):i.value?z=or(O,hn("name"),Ur("name",">=",i.value),Ur("name","<=",i.value+""),oa(pu)):z=or(O,hn("name"),oa(pu)),L==="next"&&u.value.length&&(z=or(O,hn(s.value),xh(u.value[u.value.length-1]),oa(pu)));const H=await Wt(z);u.value=H.docs,a.value=null,r.value=u.value.map(V=>({id:V.id,...V.data()})),c.value=H.size===pu},m=L=>{a.value||(a.value=L,f.value={...r.value.find(O=>O.id===L)})},A=()=>{a.value=null,f.value=null,_()},k=(L,O,z)=>{f.value&&f.value.id===L&&(f.value[O]=z)},I=async L=>{var O,z;if(!(!f.value||f.value.id!==L))try{const H=r.value.find(W=>W.id===L),V={};f.value.name!==void 0&&(V.name=((O=f.value.name)==null?void 0:O.trim())||null),f.value.title!==void 0&&(V.title=((z=f.value.title)==null?void 0:z.trim())||null),f.value.role!==void 0&&(V.role=f.value.role),f.value.provider!==void 0&&(V.provider=f.value.provider||null),await Lp(Ze(e,"users",L),V),await rn.logUserManagement(L,"update",{originalData:{name:H==null?void 0:H.name,title:H==null?void 0:H.title,role:H==null?void 0:H.role,provider:H==null?void 0:H.provider},updatedData:V,changedFields:Object.keys(V)}),P(" User updated."),a.value=null,f.value=null,_()}catch(H){console.error("Error updating user:",H),P(` Error updating user: ${H.message}`,!0),await rn.logUserManagement(L,"update_failed",{error:H.message,attemptedData:updateData})}},C=async L=>{if(confirm("Are you sure you want to delete this user?"))try{const O=r.value.find(z=>z.id===L);await mo(Ze(e,"users",L)),await rn.logUserManagement(L,"delete",{deletedUser:{name:O==null?void 0:O.name,email:O==null?void 0:O.email,role:O==null?void 0:O.role,provider:O==null?void 0:O.provider}}),P(" User deleted."),a.value=null,f.value=null,_()}catch(O){console.error("Error deleting user:",O),P(` Error deleting user: ${O.message}`,!0),await rn.logUserManagement(L,"delete_failed",{error:O.message})}},M=async()=>{if(prompt("Type DELETE ALL USERS to confirm:")==="DELETE ALL USERS")try{const O=await Wt(At(e,"users"));await Promise.all(O.docs.map(z=>mo(Ze(e,"users",z.id)))),P(" All users deleted."),n.value=1,_()}catch(O){console.error("Error deleting all users:",O),P(` Error deleting all users: ${O.message}`,!0)}},D=()=>{n.value++,_("next")},F=()=>{n.value>1&&(n.value--,_())},N=L=>{var W;if(!L)return"";const z=(((W=g.value)==null?void 0:W.customServiceProviders)||[]).find(G=>G.abbreviation===L);if(z)return`${z.name} (${z.abbreviation})`;const V=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}].find(G=>G.abbreviation===L);return V?`${V.name} (${V.abbreviation})`:L};return Gt(async()=>{await v(),await b(),_()}),Ha(()=>{E&&clearTimeout(E)}),(L,O)=>(B(),U("div",null,[O[12]||(O[12]=d("h2",null,"Edit Users",-1)),d("div",UW,[Oe(d("input",{type:"text","onUpdate:modelValue":O[0]||(O[0]=z=>i.value=z),placeholder:"Search by name or email",class:"admin-search-input",onInput:x},null,544),[[ft,i.value]]),d("div",$W,[d("label",null,[Oe(d("input",{type:"radio","onUpdate:modelValue":O[1]||(O[1]=z=>s.value=z),value:"name",onChange:S},null,544),[[ma,s.value]]),O[3]||(O[3]=we(" Name "))]),d("label",null,[Oe(d("input",{type:"radio","onUpdate:modelValue":O[2]||(O[2]=z=>s.value=z),value:"email",onChange:S},null,544),[[ma,s.value]]),O[4]||(O[4]=we(" Email "))])]),K(y)?(B(),U("button",{key:0,onClick:M,class:"delete-all-btn"},[Re(K(qo),{size:16}),O[5]||(O[5]=we(" Delete All Users "))])):ve("",!0)]),o.value?(B(),U("div",{key:0,class:Ye(["admin-status-msg",{error:l.value}])},X(o.value),3)):ve("",!0),d("div",null,[d("table",VW,[O[9]||(O[9]=d("thead",null,[d("tr",null,[d("th",null,"Name"),d("th",null,"Title"),d("th",null,"Email"),d("th",null,"Role"),d("th",null,"Provider Type"),d("th",{style:{"text-align":"center"}},"Actions")])],-1)),d("tbody",null,[r.value.length===0?(B(),U("tr",HW,O[6]||(O[6]=[d("td",{colspan:"5"},"No users found.",-1)]))):ve("",!0),(B(!0),U(Pe,null,He(r.value,z=>(B(),U("tr",{key:z.id,class:Ye({"active-row":a.value===z.id}),"data-userid":z.id},[d("td",null,[d("input",{type:"text",value:z.name||"",class:"editable-input",disabled:a.value!==z.id,onInput:H=>k(z.id,"name",H.target.value)},null,40,GW)]),d("td",null,[d("input",{type:"text",value:z.title||"",class:"editable-input",disabled:a.value!==z.id,onInput:H=>k(z.id,"title",H.target.value)},null,40,WW)]),d("td",null,X(z.email),1),d("td",null,[d("select",{class:"editable-select",disabled:a.value!==z.id,value:a.value===z.id?f.value.role:z.role,onChange:H=>k(z.id,"role",H.target.value)},[(B(!0),U(Pe,null,He(K(h),H=>(B(),U("option",{key:H,value:H},X(H.replace(/_/g," ")),9,KW))),128))],40,zW)]),w.value?(B(),U("td",qW,[a.value!==z.id?(B(),U("span",XW,X(N(z.provider)||""),1)):(B(),U("span",YW,[d("select",{value:f.value.provider||"",onChange:H=>k(z.id,"provider",H.target.value)},[O[7]||(O[7]=d("option",{value:""},"None",-1)),(B(!0),U(Pe,null,He(R.value,H=>(B(),U("option",{key:H,value:H},X(N(H)),9,JW))),128))],40,QW)]))])):(B(),U("td",ZW,O[8]||(O[8]=[d("span",null,"Loading...",-1)]))),d("td",ez,[a.value!==z.id?(B(),U("button",{key:0,onClick:H=>m(z.id),class:"admin-action-btn edit",title:"Edit"},[Re(K(rx),{size:16})],8,tz)):(B(),U(Pe,{key:1},[d("button",{onClick:H=>I(z.id),class:"admin-action-btn save",title:"Save"},[Re(K(uk),{size:16})],8,rz),d("button",{onClick:A,class:"admin-action-btn cancel",title:"Cancel"},[Re(K(mk),{size:16})]),d("button",{onClick:H=>C(z.id),class:"admin-action-btn delete red",title:"Delete User"},[Re(K(qo),{size:16})],8,nz)],64))])],10,jW))),128))])])]),d("div",sz,[d("button",{onClick:F,disabled:n.value===1,class:"admin-btn"},[Re(K(ok),{size:16}),O[10]||(O[10]=we(" Previous "))],8,az),d("span",null,"Page "+X(n.value),1),d("button",{onClick:D,disabled:!c.value,class:"admin-btn"},[O[11]||(O[11]=we(" Next ")),Re(K(ik),{size:16})],8,iz)])]))}},lz=bt(oz,[["__scopeId","data-v-59ee6066"]]),cz={class:"admin-students"},uz={class:"admin-form-row"},dz={class:"student-admin-table striped"},fz={key:0},hz=["data-id"],pz={style:{display:"none"}},mz=["value","disabled","onInput"],gz=["value","disabled","onInput"],vz=["value","disabled","onInput"],yz=["value","disabled","onChange"],xz=["value","disabled","onChange"],Ez=["value"],_z=["title"],bz={class:"admin-action-btns"},Sz=["onClick"],Az=["onClick"],Tz=["onClick"],wz={class:"admin-pagination"},Cz=["disabled"],kz=["disabled"],mg=50,Iz={__name:"AdminStudents",setup(t){const e=xo(),{students:r,fetchStudents:n,deleteStudent:s}=Ii(),{caseManagers:i,fetchUsers:a}=_a(),{canDeleteAllStudents:o,initializeIfNeeded:l}=Ck(),c=se(""),u=se([]),f=se(1),h=se(null),p=se({}),g=se(""),v=se(!1);let y=null;const b=()=>{y&&clearTimeout(y),y=setTimeout(()=>{R()},300)},E=be(()=>{const N=(f.value-1)*mg,L=N+mg;return u.value.slice(N,L)}),x=be(()=>Math.ceil(u.value.length/mg)),w=(N,L=!1)=>{g.value=N,v.value=L,setTimeout(()=>{g.value="",v.value=!1},5e3)},R=()=>{if(!Ds("studentSearch",20,6e4).allowed){w("Too many search requests. Please wait before searching again.",!0);return}const L=mn(c.value,100),O=Hr(L);if(!O.isSafe){w(`Security threat detected in search: ${O.threats.join(", ")}`,!0),c.value=L;return}L!==c.value&&(c.value=L);const z=L.toLowerCase();z?u.value=r.value.filter(H=>{const V=it(H,"firstName")||"",W=it(H,"lastName")||"";return`${V} ${W}`.toLowerCase().includes(z)}):u.value=r.value,f.value=1},P=N=>{var O;if(console.log(" ADMIN EDIT DEBUG - Starting edit:",{studentId:N,activeEditId:h.value,studentExists:!!r.value.find(z=>z.id===N)}),h.value)return;const L=r.value.find(z=>z.id===N);L?(console.log(" ADMIN EDIT DEBUG - Student found:",{id:L.id,hasApp:!!L.app,appStudentData:(O=L.app)==null?void 0:O.studentData,keys:Object.keys(L)}),h.value=N,p.value=JSON.parse(JSON.stringify(L)),console.log(" ADMIN EDIT DEBUG - Edit state set:",{activeEditId:h.value,editingStudentId:p.value.id})):console.error(" ADMIN EDIT DEBUG - Student not found!")},S=()=>{h.value=null,p.value={}},_=(N,L,O)=>{if(p.value.id===N){console.log(" ADMIN UPDATE DEBUG - Updating field:",{studentId:N,field:L,value:O,currentValue:it(p.value,L)});let z=O;if(L==="caseManagerId")z=O;else if(typeof O=="string"){z=mn(O,L==="grade"?10:100);const H=Hr(z);if(!H.isSafe){w(`Security threat detected in ${L}: ${H.threats.join(", ")}`,!0);return}const V=Dd(z,L,0,L==="grade"?10:100);if(!V.isValid){w(V.error,!0);return}}["firstName","lastName","grade","plan","ssid","caseManagerId"].includes(L)?(p.value.app||(p.value.app={}),p.value.app.studentData||(p.value.app.studentData={}),p.value.app.studentData[L]=z):p.value[L]=z,console.log(" ADMIN UPDATE DEBUG - Updated field:",{field:L,newValue:z,updatedPath:["firstName","lastName","grade","plan","ssid","caseManagerId"].includes(L)?`app.studentData.${L}`:L})}},m=async N=>{var L,O,z,H,V;try{console.log(" ADMIN SAVE DEBUG - Starting saveStudent:",{studentId:N,editingStudentId:p.value.id,editingStudentKeys:Object.keys(p.value),hasStudentInList:!!r.value.find(Q=>Q.id===N)});const W=xn(),G=be(()=>W.currentUser);if(console.log(" PERMISSION DEBUG:",{currentUser:G.value,userRole:(L=G.value)==null?void 0:L.role,userEmail:(O=G.value)==null?void 0:O.email,userId:(z=G.value)==null?void 0:z.uid}),!Ds("saveStudent",10,6e4).allowed){w("Too many save requests. Please wait before saving again.",!0);return}const de={},ae=r.value.find(Q=>Q.id===N),ce=["firstName","lastName","grade","plan","ssid","caseManagerId"];let te={},Z=!1;if(ce.forEach(Q=>{const fe=it(p.value,Q),ye=it(ae,Q);fe!==ye&&(te[Q]=fe,Z=!0,console.log(` CHANGE DETECTED - ${Q}: "${ye}"  "${fe}"`))}),Z&&(de.app={studentData:{...(H=ae.app)==null?void 0:H.studentData,...te}}),Object.keys(p.value).forEach(Q=>{Q!=="id"&&Q!=="app"&&p.value[Q]!==ae[Q]&&(de[Q]=p.value[Q])}),console.log(" ADMIN SAVE DEBUG - Updates prepared:",de),Object.keys(de).length===0){S();return}const xe=yk(de),J=vk(xe,{isNew:!1});if(!J.isValid){w(`Validation failed: ${J.errors.join(", ")}`,!0);return}xe.updatedAt=kn(),xe.updatedBy=((V=G.value)==null?void 0:V.uid)||null,Object.assign(p.value,xe),console.log(" ADMIN SAVE DEBUG - Calling setDoc with merge:",{studentId:N,sanitizedUpdates:xe}),await Ht(Ze(e,"students",N),xe,{merge:!0}),console.log(" ADMIN SAVE DEBUG - updateStudent completed successfully");const Y=r.value.findIndex(Q=>Q.id===N);if(Y!==-1){const Q={...r.value[Y]};Object.keys(xe).forEach(fe=>{fe==="app.studentData"?(Q.app||(Q.app={}),Q.app.studentData={...Q.app.studentData,...xe[fe]}):Q[fe]=xe[fe]}),r.value[Y]=Q}console.log(" ADMIN SAVE DEBUG - Local state updated"),w(" Student updated.")}catch(W){console.error(" ADMIN SAVE DEBUG - Save failed:",W),w(" Update failed.",!0),console.error("Update error:",W)}finally{S()}},A=async N=>{if(!Ds("deleteStudent",5,3e5).allowed){w("Too many delete requests. Please wait before deleting again.",!0);return}if(confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await s(N),w(" Student deleted.");const O=r.value.findIndex(z=>z.id===N);O!==-1&&r.value.splice(O,1),R()}catch(O){w(" Delete failed.",!0),console.error("Delete error:",O)}},k=async()=>{if(!Ds("deleteAllStudents",1,36e5).allowed){w("Delete all operation rate limited. Please wait before trying again.",!0);return}const L=`Are you sure you want to delete ALL ${r.value.length} students? 

This action cannot be undone and will permanently remove all student data.

Type "DELETE ALL STUDENTS" to confirm:`;if(prompt(L)!=="DELETE ALL STUDENTS"){w("Delete all operation cancelled.",!1);return}try{w("Deleting all students...");const z=Uy(e);let H=0;for(const V of r.value)z.delete(Ze(e,"students",V.id)),H++,H>=500&&(await z.commit(),H=0);H>0&&await z.commit(),r.value=[],u.value=[],w(" All students deleted.")}catch(z){w(" Failed to delete all students.",!0),console.error("Delete all error:",z)}},I=N=>{if(!N)return"N/A";try{if(N&&typeof N.toDate=="function")return N.toDate().toLocaleDateString();const L=new Date(N);return isNaN(L.getTime())?"Invalid Date":L.toLocaleDateString()}catch{return"Invalid Date"}},C=N=>{var L;return((L=N.app)==null?void 0:L.staffIds)&&Array.isArray(N.app.staffIds)&&N.app.staffIds.length>0},M=N=>C(N)?`Staff ID Array present (${N.app.staffIds.length} staff members)`:"Staff ID Array missing or empty",D=()=>{f.value<x.value&&f.value++},F=()=>{f.value>1&&f.value--};return Gt(async()=>{try{await Promise.all([n(),a(),l()]),u.value=r.value,console.log(" ADMIN DEBUG - Case managers loaded:",i.value.length)}catch(N){w("Failed to load data.",!0),console.error("Load data error:",N)}}),Ha(()=>{y&&clearTimeout(y)}),(N,L)=>(B(),U("div",cz,[L[8]||(L[8]=d("h2",null,"Edit Students",-1)),d("div",uz,[Oe(d("input",{type:"text","onUpdate:modelValue":L[0]||(L[0]=O=>c.value=O),onInput:b,placeholder:"Search by name",class:"admin-search-input"},null,544),[[ft,c.value]]),K(o)?(B(),U("button",{key:0,onClick:k,class:"delete-all-btn"},[Re(K(qo),{size:16}),L[1]||(L[1]=we(" Delete All Students "))])):ve("",!0)]),g.value?(B(),U("div",{key:0,class:Ye(["admin-status-msg",{error:v.value}])},X(g.value),3)):ve("",!0),d("table",dz,[L[5]||(L[5]=d("thead",null,[d("tr",null,[d("th",null,"SSID"),d("th",{style:{display:"none"}},"Student ID"),d("th",null,"First Name"),d("th",null,"Last Name"),d("th",null,"Grade"),d("th",null,"Plan"),d("th",null,"Case Manager"),d("th",{title:"Staff ID Array present"},"staffIdArr"),d("th",null,"Date Added"),d("th",{style:{"text-align":"center"}},"Actions")])],-1)),d("tbody",null,[E.value.length?ve("",!0):(B(),U("tr",fz,L[2]||(L[2]=[d("td",{colspan:"10"},"No students found.",-1)]))),(B(!0),U(Pe,null,He(E.value,O=>(B(),U("tr",{key:O.id,class:Ye({"active-row":h.value===O.id}),"data-id":O.id},[d("td",null,X(K(it)(O,"ssid")||O.id),1),d("td",pz,X(O.id),1),d("td",null,[d("input",{class:"editable-input","data-field":"firstName",value:K(it)(O,"firstName")||"",disabled:h.value!==O.id,onInput:z=>_(O.id,"firstName",z.target.value)},null,40,mz)]),d("td",null,[d("input",{class:"editable-input","data-field":"lastName",value:K(it)(O,"lastName")||"",disabled:h.value!==O.id,onInput:z=>_(O.id,"lastName",z.target.value)},null,40,gz)]),d("td",null,[d("input",{class:"editable-input","data-field":"grade",value:K(it)(O,"grade")||"",disabled:h.value!==O.id,onInput:z=>_(O.id,"grade",z.target.value)},null,40,vz)]),d("td",null,[d("select",{class:"editable-select","data-field":"plan",value:K(it)(O,"plan")||"",disabled:h.value!==O.id,onChange:z=>_(O.id,"plan",z.target.value)},L[3]||(L[3]=[d("option",{value:""},"Select Plan",-1),d("option",{value:"IEP"},"IEP",-1),d("option",{value:"504"},"504",-1)]),40,yz)]),d("td",null,[d("select",{class:"editable-select","data-field":"caseManagerId",value:K(it)(O,"caseManagerId")||"",disabled:h.value!==O.id,onChange:z=>_(O.id,"caseManagerId",z.target.value)},[L[4]||(L[4]=d("option",{value:""},"-- Select Case Manager --",-1)),(B(!0),U(Pe,null,He(K(i),z=>(B(),U("option",{key:z.id,value:z.id},X(z.name||z.email||z.id),9,Ez))),128))],40,xz)]),d("td",{class:"staff-id-status",title:M(O)},[d("span",{class:Ye(["status-icon",C(O)?"present":"missing"])},X(C(O)?"":""),3)],8,_z),d("td",null,X(I(O.created_at)),1),d("td",bz,[h.value===O.id?(B(),U(Pe,{key:0},[d("button",{onClick:z=>m(O.id),class:"admin-action-btn save",title:"Save"},[Re(K(uk),{size:16})],8,Sz),d("button",{onClick:S,class:"admin-action-btn cancel",title:"Cancel"},[Re(K(mk),{size:16})]),d("button",{onClick:z=>A(O.id),class:"admin-action-btn delete red",title:"Delete Student"},[Re(K(qo),{size:16})],8,Az)],64)):(B(),U("button",{key:1,onClick:z=>P(O.id),class:"admin-action-btn edit",title:"Edit"},[Re(K(rx),{size:16})],8,Tz))])],10,hz))),128))])]),d("div",wz,[d("button",{onClick:F,disabled:f.value===1,class:"admin-btn"},[Re(K(ok),{size:16}),L[6]||(L[6]=we(" Prev "))],8,Cz),d("span",null,"Page "+X(f.value)+" of "+X(x.value),1),d("button",{onClick:D,disabled:f.value===x.value,class:"admin-btn"},[L[7]||(L[7]=we(" Next ")),Re(K(ik),{size:16})],8,kz)])]))}},Dz=bt(Iz,[["__scopeId","data-v-7d623798"]]),Pz={class:"bulk-importer"},Rz={key:0,class:"step-container"},Fz={class:"file-upload-section"},Nz={class:"file-input-wrapper"},Oz={for:"csv-file",class:"file-label"},Mz={class:"file-text"},Lz={key:0,class:"error-message"},Bz={key:1,class:"file-info"},Uz={key:0},$z={class:"step-actions"},Vz=["disabled"],Hz={key:1,class:"step-container"},jz={class:"field-mapping-section"},Gz={class:"mapping-grid"},Wz={class:"csv-column"},zz={class:"app-field"},Kz=["onUpdate:modelValue"],qz={class:"sample-data"},Xz={key:0,class:"validation-errors"},Yz={class:"step-actions"},Qz=["disabled"],Jz={key:2,class:"step-container"},Zz={class:"preview-section"},eK={class:"preview-stats"},tK={class:"stat-item"},rK={class:"stat-value"},nK={class:"stat-item"},sK={class:"stat-value valid"},aK={class:"stat-item"},iK={class:"stat-value invalid"},oK={class:"preview-table-container"},lK={class:"preview-table"},cK={key:0,class:"error-list"},uK={key:1,class:"no-errors"},dK={class:"import-options"},fK={class:"options-grid"},hK={class:"option-item"},pK={class:"option-item"},mK={class:"option-item"},gK={class:"step-actions"},vK=["disabled"],yK={key:3,class:"step-container"},xK={class:"results-section"},EK={class:"results-stats"},_K={class:"stat-item success"},bK={class:"stat-value"},SK={class:"stat-item error"},AK={class:"stat-value"},TK={class:"stat-item"},wK={class:"stat-value"},CK={key:0,class:"import-errors"},kK={class:"results-actions"},IK={key:4,class:"loading-overlay"},DK={class:"loading-content"},PK={class:"progress-bar"},RK={__name:"StudentBulkImporter",emits:["close","imported"],setup(t,{emit:e}){const r=e,{users:n,fetchUsers:s}=_a(),i=se(1),a=se(""),o=se(""),l=se([]),c=se([]),u=se({}),f=se(""),h=se([]),p=se([]),g=se("valid-only"),v=se(!1),y=se(!1),b=se(0),E=se({successful:0,failed:0,errors:[],processingTime:0}),x=se(null),w=be(()=>{const te=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Z=Object.values(u.value).filter(J=>J),xe=Z.includes("app.studentData.ssid");return te.every(J=>Z.includes(J))&&xe}),R=be(()=>p.value.filter(te=>te.errors.length===0)),P=be(()=>p.value.filter(te=>te.errors.length>0));Gt(async()=>{console.log(" StudentBulkImporter component mounted!");try{await s(),console.log(" Users loaded successfully:",Object.keys(n.value).length,"users"),console.log("First few users:",Object.values(n.value).slice(0,3).map(te=>({id:te.id,name:te.name,role:te.role})))}catch(te){console.error(" Failed to load users:",te)}});const S=async te=>{const Z=te.target.files[0];if(Z){if(!Z.name.toLowerCase().endsWith(".csv")&&Z.type!=="text/csv"){f.value="File must be a CSV file (.csv extension)";return}if(Z.size>10*1024*1024){f.value="File must be smaller than 10MB";return}f.value="",a.value=Z.name,o.value=z(Z.size);try{const xe=await Z.text();_(xe)}catch(xe){f.value="Failed to read CSV file: "+xe.message}}},_=te=>{try{const Z=te.trim().split(`
`);if(Z.length<2)throw new Error("CSV must have at least a header row and one data row");const xe=Z[0].split(",").map(Y=>Y.trim().replace(/"/g,""));c.value=xe;const J=[];for(let Y=1;Y<Z.length;Y++){const Q={};let fe="",ye=!1,ie=0;for(let ee=0;ee<Z[Y].length;ee++){const ge=Z[Y][ee];ge==='"'?ye=!ye:ge===","&&!ye?(Q[xe[ie]]=fe.trim().replace(/^"|"$/g,""),fe="",ie++):fe+=ge}ie<xe.length&&(Q[xe[ie]]=fe.trim().replace(/^"|"$/g,"")),J.push(Q)}l.value=J,console.log("Parsed CSV data:",J.length,"records")}catch(Z){f.value="Failed to parse CSV: "+Z.message}},m=()=>{const te={SSID:"app.studentData.ssid",FirstName:"app.studentData.firstName",LastName:"app.studentData.lastName",Grade:"app.studentData.grade",Plan:"app.studentData.plan",CaseManagerId:"app.studentData.caseManagerId",ReviewDate:"app.dates.reviewDate",ReevalDate:"app.dates.reevalDate",MeetingDate:"app.dates.meetingDate",Period1Teacher:"app.schedule.periods.1",Period2Teacher:"app.schedule.periods.2",Period3Teacher:"app.schedule.periods.3",Period4Teacher:"app.schedule.periods.4",Period5Teacher:"app.schedule.periods.5",Period6Teacher:"app.schedule.periods.6",PeriodSHTeacher:"app.schedule.periods.SH",ClassServices:"app.schedule.classServices",SpeechProvider:"app.providers.speechId",OTProvider:"app.providers.otId",PTProvider:"app.providers.ptId",ATProvider:"app.providers.atId",Audiologist:"app.providers.audId",BISProvider:"app.providers.bisId",DHHProvider:"app.providers.dhhId",HNProvider:"app.providers.hnId",MHProvider:"app.providers.mhId",OMProvider:"app.providers.omId",SCProvider:"app.providers.scId",SWProvider:"app.providers.swId",TRProvider:"app.providers.trId",VIProvider:"app.providers.viId",Flag1:"app.flags.flag1",Flag2:"app.flags.flag2",BIPPdfUrl:"app.documents.bipPdfUrl",AtAGlancePdfUrl:"app.documents.ataglancePdfUrl",Assessment:"app.accommodations.assessment",Instruction:"app.accommodations.instruction"};c.value.forEach(Z=>{te[Z]&&(u.value[Z]=te[Z])})},A=()=>{u.value={}},k=te=>{const Z=l.value[0];if(!Z)return"";const xe=Z[te];return xe?te==="ClassServices"&&xe.includes(",")?`"${xe}"`:xe:""},I=()=>{h.value=[];const te=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Z=Object.values(u.value).filter(Y=>Y),xe=Z.includes("app.studentData.ssid");te.forEach(Y=>{if(!Z.includes(Y)){const Q=Y.split(".").pop();h.value.push(`Required field "${Q}" is not mapped`)}}),xe||h.value.push("SSID (State Student ID) must be mapped to app.studentData.ssid");const J=Z.filter((Y,Q)=>Z.indexOf(Y)!==Q);J.length>0&&h.value.push(`Duplicate field mappings: ${J.join(", ")}`)},C=()=>{p.value=l.value.map(te=>{const Z=M(te),xe=F(Z);return console.log("Row mapping:",{original:te,mapped:Z,errors:xe}),{data:Z,errors:xe}})},M=te=>{const Z={app:{studentData:{},dates:{},providers:{},accommodations:{},flags:{},schedule:{periods:{},classServices:[]},documents:{}}};return Object.entries(u.value).forEach(([xe,J])=>{if(!J||!te[xe])return;let Y=te[xe].trim();if(!Y)return;if(J==="app.schedule.classServices"){Y.startsWith('"')&&Y.endsWith('"')&&(Y=Y.slice(1,-1)),Z.app.schedule.classServices=Y.split(",").map(ye=>ye.trim()).filter(Boolean);return}if(J.startsWith("app.schedule.periods.")){const ye=J.split(".").pop(),ie=Y.trim();if(ie){const ee=G(ie);console.log(`Mapping Period ${ye} teacher:`,ie,"",ee),Z.app.schedule.periods[ye]=ee}return}if(J.startsWith("app.providers.")){const ye=J.split(".").pop(),ie=Y.trim();if(ie){const ee=re(ie);console.log(`Mapping ${ye} provider:`,ie,"",ee),Z.app.providers[ye]=ee}return}if(J==="app.accommodations.assessment"||J==="app.accommodations.instruction"){const ye=J.split(".").pop();Z.app.accommodations[ye]=Y;return}if(J.startsWith("app.flags.")){const ye=J.split(".").pop();Z.app.flags[ye]=["true","1","yes","y"].includes(Y.toLowerCase());return}if(J.includes("Date")){const[ye,ie,ee]=J.split(".");Z[ye][ie]||(Z[ye][ie]={}),Z[ye][ie][ee]=L(Y);return}const Q=J.split(".");let fe=Z;for(let ye=0;ye<Q.length-1;ye++){const ie=Q[ye];fe[ie]||(fe[ie]={}),fe=fe[ie]}fe[Q[Q.length-1]]=Y}),Z},D=te=>{const Z=Object.values(n.value).find(xe=>xe.id===te||xe.name===te||xe.email===te||xe.aeriesId===te);return console.log("Mapping case manager:",te,"to Firebase ID:",Z==null?void 0:Z.id),Z?Z.id:te},F=te=>{var J,Y,Q,fe,ye,ie,ee,ge,Te,ke,Ae,We,De,je,$e,Ie,Ke,_e;const Z=[],xe=te.ssid||((Y=(J=te.app)==null?void 0:J.studentData)==null?void 0:Y.ssid);return xe||Z.push("SSID is required (either top-level or in app.studentData)"),(fe=(Q=te.app)==null?void 0:Q.studentData)!=null&&fe.firstName||Z.push("First name is required"),(ie=(ye=te.app)==null?void 0:ye.studentData)!=null&&ie.lastName||Z.push("Last name is required"),(ge=(ee=te.app)==null?void 0:ee.studentData)!=null&&ge.grade||Z.push("Grade is required"),xe&&!/^\d{9,10}$/.test(xe)&&Z.push("SSID must be 9-10 digits"),(ke=(Te=te.app)==null?void 0:Te.studentData)!=null&&ke.grade&&!["K","1","2","3","4","5","6","7","8","9","10","11","12"].includes(te.app.studentData.grade)&&Z.push("Grade must be K-12"),(We=(Ae=te.app)==null?void 0:Ae.studentData)!=null&&We.plan&&!["IEP","504"].includes(te.app.studentData.plan)&&Z.push("Plan must be IEP or 504"),(je=(De=te.app)==null?void 0:De.dates)!=null&&je.reviewDate&&!N(te.app.dates.reviewDate)&&Z.push("Invalid review date format (use YYYY-MM-DD)"),(Ie=($e=te.app)==null?void 0:$e.dates)!=null&&Ie.reevalDate&&!N(te.app.dates.reevalDate)&&Z.push("Invalid reevaluation date format (use YYYY-MM-DD)"),(_e=(Ke=te.app)==null?void 0:Ke.dates)!=null&&_e.meetingDate&&!N(te.app.dates.meetingDate)&&Z.push("Invalid meeting date format (use YYYY-MM-DD)"),Z},N=te=>{if(!te)return!0;const Z=new Date(te);return!isNaN(Z.getTime())&&te.match(/^\d{4}-\d{2}-\d{2}$/)},L=te=>{if(!te)return"";try{const Z=new Date(te);return isNaN(Z.getTime())?"":Z.toISOString().split("T")[0]}catch{return""}},O=te=>{var J,Y,Q,fe;const Z=((Y=(J=te.app)==null?void 0:J.studentData)==null?void 0:Y.firstName)||"",xe=((fe=(Q=te.app)==null?void 0:Q.studentData)==null?void 0:fe.lastName)||"";return`${Z} ${xe}`.trim()||"Missing Name"},z=te=>{if(te===0)return"0 Bytes";const Z=1024,xe=["Bytes","KB","MB","GB"],J=Math.floor(Math.log(te)/Math.log(Z));return parseFloat((te/Math.pow(Z,J)).toFixed(2))+" "+xe[J]},H=()=>{if(i.value===2){if(I(),h.value.length>0)return;C()}i.value++},V=()=>{i.value--},W=async()=>{y.value=!0,b.value=0;const te=Date.now(),Z=g.value==="valid-only"?R.value:p.value;let xe=0,J=0;const Y=[];try{for(let Q=0;Q<Z.length;Q++){const fe=Z[Q];try{await ae(fe.data),xe++}catch(ye){J++,Y.push(`Row ${Q+1}: ${ye.message}`)}b.value=Math.round((Q+1)/Z.length*100)}E.value={successful:xe,failed:J,errors:Y,processingTime:Date.now()-te},i.value=4,r("imported",{successful:xe,failed:J})}catch(Q){console.error("Import failed:",Q),Y.push("Import process failed: "+Q.message),E.value={successful:xe,failed:J,errors:Y,processingTime:Date.now()-te},i.value=4}finally{y.value=!1}},G=te=>{if(!te)return"";console.log(" Mapping teacher ID:",te),console.log(" Available users:",Object.values(n.value).map(J=>({name:J.name,aeriesId:J.aeriesId,id:J.id})));const Z=Object.values(n.value).find(J=>{const Y=String(J.aeriesId)===String(te);return Y&&console.log(" Found exact Aeries ID match:",{teacherId:te,user:{name:J.name,aeriesId:J.aeriesId,id:J.id}}),Y});if(Z)return console.log(" Using Aeries ID match:",te,"",Z.id,"(",Z.name,")"),Z.id;const xe=Object.values(n.value).find(J=>J.id===te);return xe?(console.log(" Using Firebase ID match:",te,"",xe.id,"(",xe.name,")"),xe.id):(console.warn(" No user found for teacher ID:",te),te)},re=te=>{if(!te)return"";console.log(" Mapping provider ID:",te),console.log(" Available users:",Object.values(n.value).map(J=>({name:J.name,aeriesId:J.aeriesId,id:J.id})));const Z=Object.values(n.value).find(J=>{const Y=String(J.aeriesId)===String(te);return Y&&console.log(" Found exact Aeries ID match:",{providerId:te,user:{name:J.name,aeriesId:J.aeriesId,id:J.id}}),Y});if(Z)return console.log(" Using Aeries ID match:",te,"",Z.id,"(",Z.name,")"),Z.id;const xe=Object.values(n.value).find(J=>J.id===te);return xe?(console.log(" Using Firebase ID match:",te,"",xe.id,"(",xe.name,")"),xe.id):(console.warn(" No user found for provider ID:",te),te)},de=te=>{try{return te.app&&te.app.studentData&&te.app.studentData.ssid&&te.app.studentData.firstName&&te.app.studentData.lastName&&te.app.studentData.grade&&te.app.schedule&&Array.isArray(te.app.schedule.classServices)}catch{return!1}},ae=async te=>{try{const Z=te.app.studentData.ssid,xe=At(qe,"students"),J=or(xe,Ur("app.studentData.ssid","==",Z)),Y=await Wt(J);if(!Y.empty&&!v.value)throw new Error(`Student with SSID ${Z} already exists`);const Q={createdAt:kn(),updatedAt:kn(),app:{studentData:{firstName:te.app.studentData.firstName||"",lastName:te.app.studentData.lastName||"",grade:te.app.studentData.grade||"",plan:te.app.studentData.plan||"",caseManagerId:D(te.app.studentData.caseManagerId)||"",ssid:Z},dates:{reviewDate:te.app.dates.reviewDate||"",reevalDate:te.app.dates.reevalDate||"",meetingDate:te.app.dates.meetingDate||""},schedule:{periods:te.app.schedule.periods||{1:"",2:"",3:"",4:"",5:"",6:"",SH:""},classServices:Array.isArray(te.app.schedule.classServices)?te.app.schedule.classServices:[]},providers:te.app.providers||{speechId:"",otId:"",ptId:"",atId:"",audId:"",bisId:"",dhhId:"",hnId:"",mhId:"",omId:"",scId:"",swId:"",trId:"",viId:""},accommodations:{assessment:te.app.accommodations.assessment||"",instruction:te.app.accommodations.instruction||""},flags:{flag1:!!te.app.flags.flag1,flag2:!!te.app.flags.flag2},documents:{bipPdfUrl:te.app.documents.bipPdfUrl||null,ataglancePdfUrl:te.app.documents.ataglancePdfUrl||null}}};if(console.log("Saving student data:",{ssid:Q.app.studentData.ssid,schedule:Q.app.schedule.periods,providers:Q.app.providers}),!de(Q))throw new Error("Invalid student data structure");if(!Y.empty&&v.value){const fe=Y.docs[0];await Ht(Ze(qe,"students",fe.id),Q,{merge:!0})}else{const fe=Ze(At(qe,"students"));await Ht(fe,Q)}}catch(Z){throw console.error("Error importing student:",Z),Z}},ce=()=>{i.value=1,a.value="",o.value="",l.value=[],c.value=[],u.value={},f.value="",h.value=[],p.value=[],E.value={successful:0,failed:0,errors:[],processingTime:0},x.value&&(x.value.value="")};return(te,Z)=>(B(),U("div",Pz,[Z[30]||(Z[30]=d("div",{style:{background:"#e8f5e8",border:"2px solid #4caf50",padding:"10px","margin-bottom":"20px","border-radius":"4px","text-align":"center"}},[d("strong",null," StudentBulkImporter Component Loaded Successfully")],-1)),Z[31]||(Z[31]=d("div",{class:"importer-header"},[d("h2",null,"Add Students - Bulk Import"),d("p",{class:"description"}," Import multiple students from a CSV file. The system will map CSV fields to the app's database structure and allow you to preview and validate the data before importing. ")],-1)),i.value===1?(B(),U("div",Rz,[Z[8]||(Z[8]=d("div",{class:"step-header"},[d("h3",null,"Step 1: Upload CSV File"),d("p",null,"Select a CSV file containing student data. The first row should contain column headers.")],-1)),d("div",Fz,[d("div",Nz,[d("input",{type:"file",ref_key:"fileInput",ref:x,onChange:S,accept:".csv",class:"file-input",id:"csv-file"},null,544),d("label",Oz,[Z[4]||(Z[4]=d("span",{class:"file-icon"},"",-1)),d("span",Mz,X(a.value||"Choose CSV File"),1)])]),f.value?(B(),U("div",Lz,X(f.value),1)):ve("",!0),a.value?(B(),U("div",Bz,[d("p",null,[Z[5]||(Z[5]=d("strong",null,"File:",-1)),we(" "+X(a.value),1)]),d("p",null,[Z[6]||(Z[6]=d("strong",null,"Size:",-1)),we(" "+X(o.value),1)]),l.value.length>0?(B(),U("p",Uz,[Z[7]||(Z[7]=d("strong",null,"Records:",-1)),we(" "+X(l.value.length),1)])):ve("",!0)])):ve("",!0)]),Z[9]||(Z[9]=Dn('<div class="sample-format" data-v-494a4282><h4 data-v-494a4282>Expected CSV Format:</h4><div class="format-example" data-v-494a4282><code data-v-494a4282> SSID,FirstName,LastName,Grade,Plan,CaseManagerId,ReviewDate,ReevalDate,MeetingDate,Period1Teacher,Period2Teacher,Period3Teacher,Period4Teacher,Period5Teacher,Period6Teacher,SHTeacher,ClassServices,SpeechProvider,OTProvider,PTProvider,ATProvider,Audiologist,BISProvider,DHHProvider,HNProvider,MHProvider,OMProvider,SCProvider,SWProvider,TRProvider,VIProvider,Flag1,Flag2,BIPPdfUrl,AtAGlancePdfUrl,Assessment,Instruction<br data-v-494a4282> 123456789,John,Doe,9,IEP,user003,2025-07-15,2025-12-15,2025-07-10,user007,user008,user009,user010,user011,user012,user013,&quot;SDC: English,RSP: Math&quot;,user020,user021,user022,user023,user024,user025,user026,user027,user028,user029,user030,user031,user032,user033,true,false,https://example.com/bip.pdf,https://example.com/ataglance.pdf,&quot;Allow for test re-takes if the score is below average...&quot;,Divide larger projects or assignments into manageable parts... </code></div><p class="format-note" data-v-494a4282><strong data-v-494a4282>Required fields:</strong> SSID, FirstName, LastName, Grade<br data-v-494a4282><strong data-v-494a4282>App Structure:</strong> All fields map to the app data structure in your database<br data-v-494a4282><strong data-v-494a4282>Schedule fields:</strong> Period1Teacher through Period6Teacher and SHTeacher (Firebase user IDs like user001, user002, etc.)<br data-v-494a4282><strong data-v-494a4282>Provider fields:</strong> All service provider fields (Firebase user IDs like user020, user021, etc.)<br data-v-494a4282><strong data-v-494a4282>Class Services:</strong> Comma-separated list (e.g., &quot;SDC: English,RSP: Math,Co-teach: Science&quot;)<br data-v-494a4282><strong data-v-494a4282>Dates:</strong> Use YYYY-MM-DD format (e.g., 2025-07-15)<br data-v-494a4282><strong data-v-494a4282>Flags:</strong> Use true/false or 1/0<br data-v-494a4282><strong data-v-494a4282>Accommodations:</strong> Text fields for assessment and instruction<br data-v-494a4282><strong data-v-494a4282>Note:</strong> Teacher and provider IDs will be automatically mapped from names, emails, or Aeries IDs if user lookup is available </p></div>',1)),d("div",$z,[d("button",{onClick:H,disabled:!l.value.length,class:"btn btn-primary"}," Next: Map Fields ",8,Vz)])])):ve("",!0),i.value===2?(B(),U("div",Hz,[Z[15]||(Z[15]=d("div",{class:"step-header"},[d("h3",null,"Step 2: Map CSV Fields"),d("p",null,"Map your CSV columns to the app's database fields. Required fields are marked with *")],-1)),d("div",jz,[d("div",Gz,[Z[12]||(Z[12]=Dn('<div class="mapping-header" data-v-494a4282><div class="csv-column" data-v-494a4282>CSV Column</div><div class="arrow" data-v-494a4282></div><div class="app-field" data-v-494a4282>App Database Field</div><div class="sample-data" data-v-494a4282>Sample Data</div></div>',1)),(B(!0),U(Pe,null,He(c.value,(xe,J)=>(B(),U("div",{key:J,class:"mapping-row"},[d("div",Wz,[d("strong",null,X(xe),1)]),Z[11]||(Z[11]=d("div",{class:"arrow"},"",-1)),d("div",zz,[Oe(d("select",{"onUpdate:modelValue":Y=>u.value[xe]=Y,class:"field-select"},Z[10]||(Z[10]=[Dn('<option value="" data-v-494a4282>-- Skip this field --</option><optgroup label="Required Fields" data-v-494a4282><option value="app.studentData.ssid" data-v-494a4282>SSID (State Student ID) *</option><option value="app.studentData.firstName" data-v-494a4282>First Name *</option><option value="app.studentData.lastName" data-v-494a4282>Last Name *</option><option value="app.studentData.grade" data-v-494a4282>Grade *</option></optgroup><optgroup label="Student Information" data-v-494a4282><option value="app.studentData.plan" data-v-494a4282>Plan Type (IEP/504/RTI/None)</option><option value="app.studentData.caseManagerId" data-v-494a4282>Case Manager ID</option></optgroup><optgroup label="Important Dates" data-v-494a4282><option value="app.dates.reviewDate" data-v-494a4282>Review Date</option><option value="app.dates.reevalDate" data-v-494a4282>Reevaluation Date</option><option value="app.dates.meetingDate" data-v-494a4282>Meeting Date</option></optgroup><optgroup label="Class Schedule" data-v-494a4282><option value="app.schedule.periods.1" data-v-494a4282>Period 1 Teacher ID</option><option value="app.schedule.periods.2" data-v-494a4282>Period 2 Teacher ID</option><option value="app.schedule.periods.3" data-v-494a4282>Period 3 Teacher ID</option><option value="app.schedule.periods.4" data-v-494a4282>Period 4 Teacher ID</option><option value="app.schedule.periods.5" data-v-494a4282>Period 5 Teacher ID</option><option value="app.schedule.periods.6" data-v-494a4282>Period 6 Teacher ID</option><option value="app.schedule.periods.SH" data-v-494a4282>Study Hall Teacher ID</option><option value="app.schedule.classServices" data-v-494a4282>Class Services (Comma-separated)</option></optgroup><optgroup label="Service Providers" data-v-494a4282><option value="app.providers.speechId" data-v-494a4282>Speech Provider ID</option><option value="app.providers.otId" data-v-494a4282>OT Provider ID</option><option value="app.providers.ptId" data-v-494a4282>PT Provider ID</option><option value="app.providers.atId" data-v-494a4282>AT Provider ID</option><option value="app.providers.audId" data-v-494a4282>Audiologist ID</option><option value="app.providers.bisId" data-v-494a4282>BIS Provider ID</option><option value="app.providers.dhhId" data-v-494a4282>DHH Provider ID</option><option value="app.providers.hnId" data-v-494a4282>HN Provider ID</option><option value="app.providers.mhId" data-v-494a4282>MH Provider ID</option><option value="app.providers.omId" data-v-494a4282>OM Provider ID</option><option value="app.providers.scId" data-v-494a4282>SC Provider ID</option><option value="app.providers.swId" data-v-494a4282>SW Provider ID</option><option value="app.providers.trId" data-v-494a4282>TR Provider ID</option><option value="app.providers.viId" data-v-494a4282>VI Provider ID</option></optgroup><optgroup label="Flags" data-v-494a4282><option value="app.flags.flag1" data-v-494a4282>Flag 1 (Boolean)</option><option value="app.flags.flag2" data-v-494a4282>Flag 2 (Boolean)</option></optgroup><optgroup label="Documents" data-v-494a4282><option value="app.documents.bipPdfUrl" data-v-494a4282>BIP PDF URL</option><option value="app.documents.ataglancePdfUrl" data-v-494a4282>At-A-Glance PDF URL</option></optgroup><optgroup label="Accommodations" data-v-494a4282><option value="app.accommodations.assessment" data-v-494a4282>Assessment Accommodations</option><option value="app.accommodations.instruction" data-v-494a4282>Instructional Accommodations</option></optgroup>',9)]),8,Kz),[[cr,u.value[xe]]])]),d("div",qz,[d("code",null,X(k(xe)),1)])]))),128))]),d("div",{class:"auto-mapping-section"},[Z[13]||(Z[13]=d("h4",null,"Quick Mapping Options:",-1)),d("div",{class:"quick-actions"},[d("button",{onClick:m,class:"btn btn-secondary"}," Auto-map Common Fields "),d("button",{onClick:A,class:"btn btn-secondary"}," Clear All Mappings ")])]),h.value.length>0?(B(),U("div",Xz,[Z[14]||(Z[14]=d("h4",null,"Mapping Issues:",-1)),d("ul",null,[(B(!0),U(Pe,null,He(h.value,xe=>(B(),U("li",{key:xe,class:"error-item"},X(xe),1))),128))])])):ve("",!0)]),d("div",Yz,[d("button",{onClick:V,class:"btn btn-secondary"}," Back "),d("button",{onClick:H,disabled:!w.value,class:"btn btn-primary"}," Next: Preview Data ",8,Qz)])])):ve("",!0),i.value===3?(B(),U("div",Jz,[Z[23]||(Z[23]=d("div",{class:"step-header"},[d("h3",null,"Step 3: Preview and Validate"),d("p",null,"Review the mapped data before importing. Check for any validation errors.")],-1)),d("div",Zz,[d("div",eK,[d("div",tK,[Z[16]||(Z[16]=d("span",{class:"stat-label"},"Total Records:",-1)),d("span",rK,X(l.value.length),1)]),d("div",nK,[Z[17]||(Z[17]=d("span",{class:"stat-label"},"Valid Records:",-1)),d("span",sK,X(R.value.length),1)]),d("div",aK,[Z[18]||(Z[18]=d("span",{class:"stat-label"},"Invalid Records:",-1)),d("span",iK,X(P.value.length),1)])]),d("div",oK,[d("table",lK,[Z[19]||(Z[19]=d("thead",null,[d("tr",null,[d("th",null,"Status"),d("th",null,"SSID"),d("th",null,"Name"),d("th",null,"Grade"),d("th",null,"Plan"),d("th",null,"Case Manager"),d("th",null,"Issues")])],-1)),d("tbody",null,[(B(!0),U(Pe,null,He(p.value,(xe,J)=>{var Y,Q,fe,ye,ie,ee,ge,Te;return B(),U("tr",{key:J,class:Ye({"invalid-row":xe.errors.length>0})},[d("td",null,[d("span",{class:Ye(["status-badge",xe.errors.length>0?"error":"valid"])},X(xe.errors.length>0?"Error":"Valid"),3)]),d("td",null,X(xe.data.ssid||((Q=(Y=xe.data.app)==null?void 0:Y.studentData)==null?void 0:Q.ssid)||"Missing"),1),d("td",null,X(O(xe.data)),1),d("td",null,X(((ye=(fe=xe.data.app)==null?void 0:fe.studentData)==null?void 0:ye.grade)||"Missing"),1),d("td",null,X(((ee=(ie=xe.data.app)==null?void 0:ie.studentData)==null?void 0:ee.plan)||"Not set"),1),d("td",null,X(((Te=(ge=xe.data.app)==null?void 0:ge.studentData)==null?void 0:Te.caseManagerId)||"Not set"),1),d("td",null,[xe.errors.length>0?(B(),U("ul",cK,[(B(!0),U(Pe,null,He(xe.errors,ke=>(B(),U("li",{key:ke,class:"error-item"},X(ke),1))),128))])):(B(),U("span",uK,"No issues"))])],2)}),128))])])]),d("div",dK,[Z[22]||(Z[22]=d("h4",null,"Import Options:",-1)),d("div",fK,[d("label",hK,[Oe(d("input",{type:"radio","onUpdate:modelValue":Z[0]||(Z[0]=xe=>g.value=xe),value:"valid-only"},null,512),[[ma,g.value]]),d("span",null,"Import only valid records ("+X(R.value.length)+" records)",1)]),d("label",pK,[Oe(d("input",{type:"radio","onUpdate:modelValue":Z[1]||(Z[1]=xe=>g.value=xe),value:"all"},null,512),[[ma,g.value]]),Z[20]||(Z[20]=d("span",null,"Import all records (may cause errors for invalid data)",-1))]),d("label",mK,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":Z[2]||(Z[2]=xe=>v.value=xe)},null,512),[[yt,v.value]]),Z[21]||(Z[21]=d("span",null,"Update existing students if SSID already exists",-1))])])])]),d("div",gK,[d("button",{onClick:V,class:"btn btn-secondary"}," Back "),d("button",{onClick:W,disabled:y.value||g.value==="valid-only"&&R.value.length===0,class:"btn btn-primary"},X(y.value?"Importing...":`Import ${g.value==="valid-only"?R.value.length:l.value.length} Students`),9,vK)])])):ve("",!0),i.value===4?(B(),U("div",yK,[Z[28]||(Z[28]=d("div",{class:"step-header"},[d("h3",null,"Step 4: Import Complete"),d("p",null,"Your bulk import has been completed. Review the results below.")],-1)),d("div",xK,[d("div",EK,[d("div",_K,[Z[24]||(Z[24]=d("span",{class:"stat-label"},"Successfully Imported:",-1)),d("span",bK,X(E.value.successful),1)]),d("div",SK,[Z[25]||(Z[25]=d("span",{class:"stat-label"},"Failed to Import:",-1)),d("span",AK,X(E.value.failed),1)]),d("div",TK,[Z[26]||(Z[26]=d("span",{class:"stat-label"},"Total Processing Time:",-1)),d("span",wK,X(E.value.processingTime)+"ms",1)])]),E.value.errors.length>0?(B(),U("div",CK,[Z[27]||(Z[27]=d("h4",null,"Import Errors:",-1)),d("ul",null,[(B(!0),U(Pe,null,He(E.value.errors,xe=>(B(),U("li",{key:xe,class:"error-item"},X(xe),1))),128))])])):ve("",!0),d("div",kK,[d("button",{onClick:ce,class:"btn btn-secondary"}," Import More Students "),d("button",{onClick:Z[3]||(Z[3]=xe=>te.$emit("close")),class:"btn btn-primary"}," Close ")])])])):ve("",!0),y.value?(B(),U("div",IK,[d("div",DK,[Z[29]||(Z[29]=d("div",{class:"loading-spinner"},null,-1)),d("p",null,"Importing students... "+X(b.value)+"%",1),d("div",PK,[d("div",{class:"progress-fill",style:Nr({width:b.value+"%"})},null,4)])])])):ve("",!0)]))}},FK=bt(RK,[["__scopeId","data-v-494a4282"]]),NK={class:"permissions-overview"},OK={class:"roles-summary"},MK={class:"role-icon"},LK={class:"role-info"},BK={class:"role-stats"},UK={class:"stat"},$K={class:"stat-number"},VK={class:"stat"},HK={class:"stat-number"},jK={class:"stat"},GK={class:"stat-number"},WK={class:"permissions-matrix"},zK={class:"matrix-table-container"},KK={class:"matrix-table"},qK=["data-role"],XK={class:"permission-info"},YK={class:"permission-name"},QK={class:"permission-description"},JK={class:"permission-firebase"},ZK={class:"admin-panel-access"},eq={class:"access-grid"},tq={class:"access-header"},rq={class:"access-icon"},nq={class:"role-name"},sq={key:0,class:"access-details"},aq={class:"access-level"},iq={class:"access-description"},oq={key:1,class:"no-access"},lq={__name:"PermissionsOverview",setup(t){const e=ak,r=be(()=>mc.slice().sort((l,c)=>{var h,p;const u=((h=e[l])==null?void 0:h.length)||0;return(((p=e[c])==null?void 0:p.length)||0)-u})),n={admin:y7,school_admin:hk,staff_view:b7,staff_edit:jv,admin_504:dk,sped_chair:R0,case_manager:pk,teacher:Gv,paraeducator:e7,service_provider:fk},s=be(()=>r.value.map(l=>{const c=e[l]||[],u=c.some(v=>v.includes("admin_panel"));let f="No Access",h="No admin panel access";c.includes("admin_panel_full")?(f="Full Access",h="All admin panel features including permissions management"):c.includes("admin_panel_school")?(f="School Access",h="School operations, users, aides, and students"):c.includes("admin_panel_limited")?(f="Limited Access",h="Student management, aide management, and 504-related functions"):c.includes("admin_panel_sped")&&(f="SPED Access",h="SPED program management and aide oversight");let p="Viewer";c.includes(at.EDIT_STUDENT_ALL)?l==="admin"||l==="school_admin"?p="Admin":l==="staff_edit"?p="Editor":(l==="sped_chair"||l==="admin_504")&&(p="Admin/CM"):c.includes(at.EDIT_STUDENT_CM)&&(l==="admin_504"?p="Admin/CM":p="CM");const g=l==="admin_504"?"504 Coordinator":l==="sped_chair"?"SPED Chair":l==="school_admin"?"School Administrator":l==="staff_view"?"Staff Viewer":l==="staff_edit"?"Staff Editor":l==="case_manager"?"Case Manager":l==="service_provider"?"Service Provider":l.charAt(0).toUpperCase()+l.slice(1);return{key:l,name:g,icon:n[l]||Gv,description:bB[l]||`${g} role`,adminAccess:u,adminLevel:f,adminDescription:h,studentAccessLevel:p,permissions:c}})),i=be(()=>[{key:at.VIEW_USERS,name:"View Users",description:"Can view user accounts and basic information",firebaseRule:"All authenticated users"},{key:at.EDIT_USER,name:"Edit Users",description:"Can modify user accounts and profiles",firebaseRule:"Admin, School Admin, 504 Coordinator, SPED Chair"},{key:at.DELETE_USER,name:"Delete Users",description:"Can remove user accounts",firebaseRule:"Admin, School Admin, 504 Coordinator, SPED Chair"},{key:at.MANAGE_TEACHER_FEEDBACK,name:"Manage Teacher Feedback",description:"Can create and manage teacher feedback forms",firebaseRule:"Admin, School Admin, SPED Chair, 504 Coordinator, Case Manager"},{key:at.MANAGE_IMPORTS,name:"Manage Data Imports",description:"Can import data from SEIS, Aeries, and other sources",firebaseRule:"Admin, School Admin"},{key:at.MANAGE_BACKUPS,name:"Manage Backups",description:"Can create, restore, and manage database backups",firebaseRule:"Admin, School Admin"},{key:at.VIEW_STUDENTS,name:"View Students",description:"Can view student records (role-filtered)",firebaseRule:"All authenticated users"},{key:at.EDIT_STUDENT_CM,name:"Edit Own Caseload",description:"Can modify students on own caseload",firebaseRule:"Case Manager, Service Provider"},{key:at.EDIT_STUDENT_ALL,name:"Edit All Students",description:"Can modify any student record",firebaseRule:"Admin, School Admin, Staff Edit, 504 Coordinator, SPED Chair"},{key:at.ACCESS_ADMIN_PANEL,name:"Admin Panel Access",description:"Can access administrative functions",firebaseRule:"Admin, School Admin, SPED Chair, 504 Coordinator"},{key:at.MANAGE_AIDES,name:"Aide Management",description:"Can manage aide assignments and schedules",firebaseRule:"Admin, School Admin, SPED Chair, 504 Coordinator"},{key:at.MANAGE_SYSTEM_SETTINGS,name:"System Settings",description:"Can modify system-level configuration",firebaseRule:"Admin only"}].sort((c,u)=>{const f=mc.filter(p=>{var g;return(g=e[p])==null?void 0:g.includes(c.key)}).length;return mc.filter(p=>{var g;return(g=e[p])==null?void 0:g.includes(u.key)}).length-f})),a=(l,c)=>{var u;return((u=e[l])==null?void 0:u.includes(c))||!1},o=l=>({admin:"Admin",school_admin:"School Admin",staff_view:"Staff View",staff_edit:"Staff Edit",admin_504:"504 Coord",sped_chair:"SPED Chair",case_manager:"Case Mgr",teacher:"Teacher",service_provider:"Service",paraeducator:"Para"})[l]||l;return(l,c)=>(B(),U("div",NK,[c[7]||(c[7]=d("div",{class:"overview-header"},[d("h2",null," Permissions Overview"),d("p",{class:"overview-description"}," This a summary of the role-based permissions These permissions are hard-coded for consistency and security. ")],-1)),d("div",OK,[(B(!0),U(Pe,null,He(s.value,u=>(B(),U("div",{class:"summary-card",key:u.key},[d("div",{class:Ye(["role-header",u.key])},[d("div",MK,[(B(),Qt(k1(u.icon),{class:"w-6 h-6"}))]),d("div",LK,[d("h3",null,X(u.name),1),d("p",null,X(u.description),1)])],2),d("div",BK,[d("div",UK,[d("span",$K,X(u.permissions.length),1),c[0]||(c[0]=d("span",{class:"stat-label"},"Permissions",-1))]),d("div",VK,[d("span",HK,X(u.adminAccess?"Yes":"No"),1),c[1]||(c[1]=d("span",{class:"stat-label"},"Admin Panel",-1))]),d("div",jK,[d("span",GK,X(u.studentAccessLevel),1),c[2]||(c[2]=d("span",{class:"stat-label"},"Student Access",-1))])])]))),128))]),d("div",WK,[c[4]||(c[4]=d("h3",null," Detailed Permissions Matrix",-1)),c[5]||(c[5]=d("div",{class:"matrix-note"},[d("strong",null,"Note:"),we(" These permissions are synchronized with Firebase security rules and cannot be modified. They ensure consistent security across your application. ")],-1)),d("div",zK,[d("table",KK,[d("thead",null,[d("tr",null,[c[3]||(c[3]=d("th",{class:"permission-column"},"Permission",-1)),(B(!0),U(Pe,null,He(r.value,u=>(B(),U("th",{key:u,class:Ye(`role-header ${u}`),"data-role":o(u)},null,10,qK))),128))])]),d("tbody",null,[(B(!0),U(Pe,null,He(i.value,u=>(B(),U("tr",{key:u.key,class:"permission-row"},[d("td",XK,[d("div",YK,X(u.name),1),d("div",QK,X(u.description),1),d("div",JK,X(u.firebaseRule),1)]),(B(!0),U(Pe,null,He(r.value,f=>(B(),U("td",{key:f,class:"permission-cell"},[d("span",{class:Ye(["permission-indicator",{granted:a(f,u.key)}])},X(a(f,u.key)?"":""),3)]))),128))]))),128))])])])]),d("div",ZK,[c[6]||(c[6]=d("h3",null," Admin Panel Access",-1)),d("div",eq,[(B(!0),U(Pe,null,He(s.value,u=>(B(),U("div",{key:u.key,class:Ye(["access-card",{"has-access":u.adminAccess}])},[d("div",tq,[d("span",rq,X(u.adminAccess?"":""),1),d("span",nq,X(u.name),1)]),u.adminAccess?(B(),U("div",sq,[d("div",aq,X(u.adminLevel),1),d("div",iq,X(u.adminDescription),1)])):(B(),U("div",oq," No admin panel access "))],2))),128))])]),c[8]||(c[8]=Dn('<div class="firebase-rules" data-v-88586d63><h3 data-v-88586d63> Firebase Security Rules Summary</h3><div class="rules-grid" data-v-88586d63><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> Users Collection</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read:</strong> All authenticated users</li><li data-v-88586d63><strong data-v-88586d63>Write:</strong> Admin, School Admin, 504 Coordinator, SPED Chair</li><li data-v-88586d63><strong data-v-88586d63>Delete:</strong> Admin, School Admin, 504 Coordinator, SPED Chair</li></ul></div><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> Students Collection</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read:</strong> All authenticated users (role-filtered)</li><li data-v-88586d63><strong data-v-88586d63>Write (All):</strong> Admin, School Admin, Staff Edit, 504 Coordinator, SPED Chair</li><li data-v-88586d63><strong data-v-88586d63>Write (Own Caseload):</strong> Case Manager, Service Provider</li><li data-v-88586d63><strong data-v-88586d63>Delete:</strong> Admin, School Admin, SPED Chair, 504 Coordinator</li></ul></div><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> App Settings</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read:</strong> All authenticated users</li><li data-v-88586d63><strong data-v-88586d63>Write:</strong> Admin, School Admin</li></ul></div><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> Audit Logs</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read:</strong> Admin, School Admin</li><li data-v-88586d63><strong data-v-88586d63>Write:</strong> All authenticated users (own actions)</li></ul></div><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> Feedback Forms</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read:</strong> Admin, School Admin, SPED Chair, 504 Coordinator, Case Manager</li><li data-v-88586d63><strong data-v-88586d63>Write:</strong> Admin, School Admin, SPED Chair, 504 Coordinator, Case Manager</li><li data-v-88586d63><strong data-v-88586d63>Delete:</strong> Admin, School Admin, SPED Chair, 504 Coordinator</li></ul></div><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> Backups</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read/Write:</strong> Admin, School Admin</li><li data-v-88586d63><strong data-v-88586d63>Delete:</strong> Admin, School Admin</li></ul></div></div></div>',1))]))}},cq=bt(lq,[["__scopeId","data-v-88586d63"]]),uq={class:"admin-permissions"},dq={__name:"AdminPermissions",setup(t){return(e,r)=>(B(),U("div",uq,[Re(cq)]))}},fq=bt(dq,[["__scopeId","data-v-699444ca"]]);var kk={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(jt,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(m){var A=R(m);A.chunkSize=parseInt(A.chunkSize),m.step||m.chunk||(A.chunkSize=null),this._handle=new v(A),(this._handle.streamer=this)._config=A}).call(this,_),this.parseChunk=function(m,A){var k=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<k){let C=this._config.newline;C||(I=this._config.quoteChar||'"',C=this._handle.guessLineEndings(m,I)),m=[...m.split(C).slice(k)].join(C)}this.isFirstChunk&&S(this._config.beforeFirstChunk)&&(I=this._config.beforeFirstChunk(m))!==void 0&&(m=I),this.isFirstChunk=!1,this._halted=!1;var k=this._partialLine+m,I=(this._partialLine="",this._handle.parse(k,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(m=I.meta.cursor,k=(this._finished||(this._partialLine=k.substring(m-this._baseIndex),this._baseIndex=m),I&&I.data&&(this._rowCount+=I.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:I,workerId:c.WORKER_ID,finished:k});else if(S(this._config.chunk)&&!A){if(this._config.chunk(I,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=I=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(I.data),this._completeResults.errors=this._completeResults.errors.concat(I.errors),this._completeResults.meta=I.meta),this._completed||!k||!S(this._config.complete)||I&&I.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),k||I&&I.meta.paused||this._nextChunk(),I}this._halted=!0},this._sendError=function(m){S(this._config.error)?this._config.error(m):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:m,finished:!1})}}function f(_){var m;(_=_||{}).chunkSize||(_.chunkSize=c.RemoteChunkSize),u.call(this,_),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(A){this._input=A,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(m=new XMLHttpRequest,this._config.withCredentials&&(m.withCredentials=this._config.withCredentials),i||(m.onload=P(this._chunkLoaded,this),m.onerror=P(this._chunkError,this)),m.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var A,k=this._config.downloadRequestHeaders;for(A in k)m.setRequestHeader(A,k[A])}var I;this._config.chunkSize&&(I=this._start+this._config.chunkSize-1,m.setRequestHeader("Range","bytes="+this._start+"-"+I));try{m.send(this._config.downloadRequestBody)}catch(C){this._chunkError(C.message)}i&&m.status===0&&this._chunkError()}},this._chunkLoaded=function(){m.readyState===4&&(m.status<200||400<=m.status?this._chunkError():(this._start+=this._config.chunkSize||m.responseText.length,this._finished=!this._config.chunkSize||this._start>=(A=>(A=A.getResponseHeader("Content-Range"))!==null?parseInt(A.substring(A.lastIndexOf("/")+1)):-1)(m),this.parseChunk(m.responseText)))},this._chunkError=function(A){A=m.statusText||A,this._sendError(new Error(A))}}function h(_){(_=_||{}).chunkSize||(_.chunkSize=c.LocalChunkSize),u.call(this,_);var m,A,k=typeof FileReader<"u";this.stream=function(I){this._input=I,A=I.slice||I.webkitSlice||I.mozSlice,k?((m=new FileReader).onload=P(this._chunkLoaded,this),m.onerror=P(this._chunkError,this)):m=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var I=this._input,C=(this._config.chunkSize&&(C=Math.min(this._start+this._config.chunkSize,this._input.size),I=A.call(I,this._start,C)),m.readAsText(I,this._config.encoding));k||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(I){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(I.target.result)},this._chunkError=function(){this._sendError(m.error)}}function p(_){var m;u.call(this,_=_||{}),this.stream=function(A){return m=A,this._nextChunk()},this._nextChunk=function(){var A,k;if(!this._finished)return A=this._config.chunkSize,m=A?(k=m.substring(0,A),m.substring(A)):(k=m,""),this._finished=!m,this.parseChunk(k)}}function g(_){u.call(this,_=_||{});var m=[],A=!0,k=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(I){this._input=I,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&m.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),m.length?this.parseChunk(m.shift()):A=!0},this._streamData=P(function(I){try{m.push(typeof I=="string"?I:I.toString(this._config.encoding)),A&&(A=!1,this._checkIsFinished(),this.parseChunk(m.shift()))}catch(C){this._streamError(C)}},this),this._streamError=P(function(I){this._streamCleanUp(),this._sendError(I)},this),this._streamEnd=P(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=P(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(_){var m,A,k,I,C=Math.pow(2,53),M=-C,D=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,F=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,N=this,L=0,O=0,z=!1,H=!1,V=[],W={data:[],errors:[],meta:{}};function G(ce){return _.skipEmptyLines==="greedy"?ce.join("").trim()==="":ce.length===1&&ce[0].length===0}function re(){if(W&&k&&(ae("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),k=!1),_.skipEmptyLines&&(W.data=W.data.filter(function(J){return!G(J)})),de()){let J=function(Y,Q){S(_.transformHeader)&&(Y=_.transformHeader(Y,Q)),V.push(Y)};var xe=J;if(W)if(Array.isArray(W.data[0])){for(var ce=0;de()&&ce<W.data.length;ce++)W.data[ce].forEach(J);W.data.splice(0,1)}else W.data.forEach(J)}function te(J,Y){for(var Q=_.header?{}:[],fe=0;fe<J.length;fe++){var ye=fe,ie=J[fe],ie=((ee,ge)=>(Te=>(_.dynamicTypingFunction&&_.dynamicTyping[Te]===void 0&&(_.dynamicTyping[Te]=_.dynamicTypingFunction(Te)),(_.dynamicTyping[Te]||_.dynamicTyping)===!0))(ee)?ge==="true"||ge==="TRUE"||ge!=="false"&&ge!=="FALSE"&&((Te=>{if(D.test(Te)&&(Te=parseFloat(Te),M<Te&&Te<C))return 1})(ge)?parseFloat(ge):F.test(ge)?new Date(ge):ge===""?null:ge):ge)(ye=_.header?fe>=V.length?"__parsed_extra":V[fe]:ye,ie=_.transform?_.transform(ie,ye):ie);ye==="__parsed_extra"?(Q[ye]=Q[ye]||[],Q[ye].push(ie)):Q[ye]=ie}return _.header&&(fe>V.length?ae("FieldMismatch","TooManyFields","Too many fields: expected "+V.length+" fields but parsed "+fe,O+Y):fe<V.length&&ae("FieldMismatch","TooFewFields","Too few fields: expected "+V.length+" fields but parsed "+fe,O+Y)),Q}var Z;W&&(_.header||_.dynamicTyping||_.transform)&&(Z=1,!W.data.length||Array.isArray(W.data[0])?(W.data=W.data.map(te),Z=W.data.length):W.data=te(W.data,0),_.header&&W.meta&&(W.meta.fields=V),O+=Z)}function de(){return _.header&&V.length===0}function ae(ce,te,Z,xe){ce={type:ce,code:te,message:Z},xe!==void 0&&(ce.row=xe),W.errors.push(ce)}S(_.step)&&(I=_.step,_.step=function(ce){W=ce,de()?re():(re(),W.data.length!==0&&(L+=ce.data.length,_.preview&&L>_.preview?A.abort():(W.data=W.data[0],I(W,N))))}),this.parse=function(ce,te,Z){var xe=_.quoteChar||'"',xe=(_.newline||(_.newline=this.guessLineEndings(ce,xe)),k=!1,_.delimiter?S(_.delimiter)&&(_.delimiter=_.delimiter(ce),W.meta.delimiter=_.delimiter):((xe=((J,Y,Q,fe,ye)=>{var ie,ee,ge,Te;ye=ye||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var ke=0;ke<ye.length;ke++){for(var Ae,We=ye[ke],De=0,je=0,$e=0,Ie=(ge=void 0,new b({comments:fe,delimiter:We,newline:Y,preview:10}).parse(J)),Ke=0;Ke<Ie.data.length;Ke++)Q&&G(Ie.data[Ke])?$e++:(Ae=Ie.data[Ke].length,je+=Ae,ge===void 0?ge=Ae:0<Ae&&(De+=Math.abs(Ae-ge),ge=Ae));0<Ie.data.length&&(je/=Ie.data.length-$e),(ee===void 0||De<=ee)&&(Te===void 0||Te<je)&&1.99<je&&(ee=De,ie=We,Te=je)}return{successful:!!(_.delimiter=ie),bestDelimiter:ie}})(ce,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=xe.bestDelimiter:(k=!0,_.delimiter=c.DefaultDelimiter),W.meta.delimiter=_.delimiter),R(_));return _.preview&&_.header&&xe.preview++,m=ce,A=new b(xe),W=A.parse(m,te,Z),re(),z?{meta:{paused:!0}}:W||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,A.abort(),m=S(_.chunk)?"":m.substring(A.getCharIndex())},this.resume=function(){N.streamer._halted?(z=!1,N.streamer.parseChunk(m,!0)):setTimeout(N.resume,3)},this.aborted=function(){return H},this.abort=function(){H=!0,A.abort(),W.meta.aborted=!0,S(_.complete)&&_.complete(W),m=""},this.guessLineEndings=function(J,xe){J=J.substring(0,1048576);var xe=new RegExp(y(xe)+"([^]*?)"+y(xe),"gm"),Z=(J=J.replace(xe,"")).split("\r"),xe=J.split(`
`),J=1<xe.length&&xe[0].length<Z[0].length;if(Z.length===1||J)return`
`;for(var Y=0,Q=0;Q<Z.length;Q++)Z[Q][0]===`
`&&Y++;return Y>=Z.length/2?`\r
`:"\r"}}function y(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(_){var m=(_=_||{}).delimiter,A=_.newline,k=_.comments,I=_.step,C=_.preview,M=_.fastMode,D=null,F=!1,N=_.quoteChar==null?'"':_.quoteChar,L=N;if(_.escapeChar!==void 0&&(L=_.escapeChar),(typeof m!="string"||-1<c.BAD_DELIMITERS.indexOf(m))&&(m=","),k===m)throw new Error("Comment character same as delimiter");k===!0?k="#":(typeof k!="string"||-1<c.BAD_DELIMITERS.indexOf(k))&&(k=!1),A!==`
`&&A!=="\r"&&A!==`\r
`&&(A=`
`);var O=0,z=!1;this.parse=function(H,V,W){if(typeof H!="string")throw new Error("Input must be a string");var G=H.length,re=m.length,de=A.length,ae=k.length,ce=S(I),te=[],Z=[],xe=[],J=O=0;if(!H)return De();if(M||M!==!1&&H.indexOf(N)===-1){for(var Y=H.split(A),Q=0;Q<Y.length;Q++){if(xe=Y[Q],O+=xe.length,Q!==Y.length-1)O+=A.length;else if(W)return De();if(!k||xe.substring(0,ae)!==k){if(ce){if(te=[],Te(xe.split(m)),je(),z)return De()}else Te(xe.split(m));if(C&&C<=Q)return te=te.slice(0,C),De(!0)}}return De()}for(var fe=H.indexOf(m,O),ye=H.indexOf(A,O),ie=new RegExp(y(L)+y(N),"g"),ee=H.indexOf(N,O);;)if(H[O]===N)for(ee=O,O++;;){if((ee=H.indexOf(N,ee+1))===-1)return W||Z.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:te.length,index:O}),Ae();if(ee===G-1)return Ae(H.substring(O,ee).replace(ie,N));if(N===L&&H[ee+1]===L)ee++;else if(N===L||ee===0||H[ee-1]!==L){fe!==-1&&fe<ee+1&&(fe=H.indexOf(m,ee+1));var ge=ke((ye=ye!==-1&&ye<ee+1?H.indexOf(A,ee+1):ye)===-1?fe:Math.min(fe,ye));if(H.substr(ee+1+ge,re)===m){xe.push(H.substring(O,ee).replace(ie,N)),H[O=ee+1+ge+re]!==N&&(ee=H.indexOf(N,O)),fe=H.indexOf(m,O),ye=H.indexOf(A,O);break}if(ge=ke(ye),H.substring(ee+1+ge,ee+1+ge+de)===A){if(xe.push(H.substring(O,ee).replace(ie,N)),We(ee+1+ge+de),fe=H.indexOf(m,O),ee=H.indexOf(N,O),ce&&(je(),z))return De();if(C&&te.length>=C)return De(!0);break}Z.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:te.length,index:O}),ee++}}else if(k&&xe.length===0&&H.substring(O,O+ae)===k){if(ye===-1)return De();O=ye+de,ye=H.indexOf(A,O),fe=H.indexOf(m,O)}else if(fe!==-1&&(fe<ye||ye===-1))xe.push(H.substring(O,fe)),O=fe+re,fe=H.indexOf(m,O);else{if(ye===-1)break;if(xe.push(H.substring(O,ye)),We(ye+de),ce&&(je(),z))return De();if(C&&te.length>=C)return De(!0)}return Ae();function Te($e){te.push($e),J=O}function ke($e){var Ie=0;return Ie=$e!==-1&&($e=H.substring(ee+1,$e))&&$e.trim()===""?$e.length:Ie}function Ae($e){return W||($e===void 0&&($e=H.substring(O)),xe.push($e),O=G,Te(xe),ce&&je()),De()}function We($e){O=$e,Te(xe),xe=[],ye=H.indexOf(A,O)}function De($e){if(_.header&&!V&&te.length&&!F){var Ie=te[0],Ke=Object.create(null),_e=new Set(Ie);let Ee=!1;for(let Se=0;Se<Ie.length;Se++){let Le=Ie[Se];if(Ke[Le=S(_.transformHeader)?_.transformHeader(Le,Se):Le]){let ze,lt=Ke[Le];for(;ze=Le+"_"+lt,lt++,_e.has(ze););_e.add(ze),Ie[Se]=ze,Ke[Le]++,Ee=!0,(D=D===null?{}:D)[ze]=Le}else Ke[Le]=1,Ie[Se]=Le;_e.add(Le)}Ee&&console.warn("Duplicate headers found and renamed."),F=!0}return{data:te,errors:Z,meta:{delimiter:m,linebreak:A,aborted:z,truncated:!!$e,cursor:J+(V||0),renamedHeaders:D}}}function je(){I(De()),te=[],Z=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return O}}function E(_){var m=_.data,A=o[m.workerId],k=!1;if(m.error)A.userError(m.error,m.file);else if(m.results&&m.results.data){var I={abort:function(){k=!0,x(m.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if(S(A.userStep)){for(var C=0;C<m.results.data.length&&(A.userStep({data:m.results.data[C],errors:m.results.errors,meta:m.results.meta},I),!k);C++);delete m.results}else S(A.userChunk)&&(A.userChunk(m.results,I,m.file),delete m.results)}m.finished&&!k&&x(m.workerId,m.results)}function x(_,m){var A=o[_];S(A.userComplete)&&A.userComplete(m),A.terminate(),delete o[_]}function w(){throw new Error("Not implemented.")}function R(_){if(typeof _!="object"||_===null)return _;var m,A=Array.isArray(_)?[]:{};for(m in _)A[m]=R(_[m]);return A}function P(_,m){return function(){_.apply(m,arguments)}}function S(_){return typeof _=="function"}return c.parse=function(_,m){var A=(m=m||{}).dynamicTyping||!1;if(S(A)&&(m.dynamicTypingFunction=A,A={}),m.dynamicTyping=A,m.transform=!!S(m.transform)&&m.transform,!m.worker||!c.WORKERS_SUPPORTED)return A=null,c.NODE_STREAM_INPUT,typeof _=="string"?(_=(k=>k.charCodeAt(0)!==65279?k:k.slice(1))(_),A=new(m.download?f:p)(m)):_.readable===!0&&S(_.read)&&S(_.on)?A=new g(m):(n.File&&_ instanceof File||_ instanceof Object)&&(A=new h(m)),A.stream(_);(A=(()=>{var k;return!!c.WORKERS_SUPPORTED&&(k=(()=>{var I=n.URL||n.webkitURL||null,C=r.toString();return c.BLOB_URL||(c.BLOB_URL=I.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))})(),(k=new n.Worker(k)).onmessage=E,k.id=l++,o[k.id]=k)})()).userStep=m.step,A.userChunk=m.chunk,A.userComplete=m.complete,A.userError=m.error,m.step=S(m.step),m.chunk=S(m.chunk),m.complete=S(m.complete),m.error=S(m.error),delete m.worker,A.postMessage({input:_,config:m,workerId:A.id})},c.unparse=function(_,m){var A=!1,k=!0,I=",",C=`\r
`,M='"',D=M+M,F=!1,N=null,L=!1,O=((()=>{if(typeof m=="object"){if(typeof m.delimiter!="string"||c.BAD_DELIMITERS.filter(function(V){return m.delimiter.indexOf(V)!==-1}).length||(I=m.delimiter),typeof m.quotes!="boolean"&&typeof m.quotes!="function"&&!Array.isArray(m.quotes)||(A=m.quotes),typeof m.skipEmptyLines!="boolean"&&typeof m.skipEmptyLines!="string"||(F=m.skipEmptyLines),typeof m.newline=="string"&&(C=m.newline),typeof m.quoteChar=="string"&&(M=m.quoteChar),typeof m.header=="boolean"&&(k=m.header),Array.isArray(m.columns)){if(m.columns.length===0)throw new Error("Option columns is empty");N=m.columns}m.escapeChar!==void 0&&(D=m.escapeChar+M),m.escapeFormulae instanceof RegExp?L=m.escapeFormulae:typeof m.escapeFormulae=="boolean"&&m.escapeFormulae&&(L=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(M),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return z(null,_,F);if(typeof _[0]=="object")return z(N||Object.keys(_[0]),_,F)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||N),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),z(_.fields||[],_.data||[],F);throw new Error("Unable to serialize unrecognized input");function z(V,W,G){var re="",de=(typeof V=="string"&&(V=JSON.parse(V)),typeof W=="string"&&(W=JSON.parse(W)),Array.isArray(V)&&0<V.length),ae=!Array.isArray(W[0]);if(de&&k){for(var ce=0;ce<V.length;ce++)0<ce&&(re+=I),re+=H(V[ce],ce);0<W.length&&(re+=C)}for(var te=0;te<W.length;te++){var Z=(de?V:W[te]).length,xe=!1,J=de?Object.keys(W[te]).length===0:W[te].length===0;if(G&&!de&&(xe=G==="greedy"?W[te].join("").trim()==="":W[te].length===1&&W[te][0].length===0),G==="greedy"&&de){for(var Y=[],Q=0;Q<Z;Q++){var fe=ae?V[Q]:Q;Y.push(W[te][fe])}xe=Y.join("").trim()===""}if(!xe){for(var ye=0;ye<Z;ye++){0<ye&&!J&&(re+=I);var ie=de&&ae?V[ye]:ye;re+=H(W[te][ie],ye)}te<W.length-1&&(!G||0<Z&&!J)&&(re+=C)}}return re}function H(V,W){var G,re;return V==null?"":V.constructor===Date?JSON.stringify(V).slice(1,25):(re=!1,L&&typeof V=="string"&&L.test(V)&&(V="'"+V,re=!0),G=V.toString().replace(O,D),(re=re||A===!0||typeof A=="function"&&A(V,W)||Array.isArray(A)&&A[W]||((de,ae)=>{for(var ce=0;ce<ae.length;ce++)if(-1<de.indexOf(ae[ce]))return!0;return!1})(G,c.BAD_DELIMITERS)||-1<G.indexOf(I)||G.charAt(0)===" "||G.charAt(G.length-1)===" ")?M+G+M:G)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=b,c.ParserHandle=v,c.NetworkStreamer=f,c.FileStreamer=h,c.StringStreamer=p,c.ReadableStreamStreamer=g,n.jQuery&&((s=n.jQuery).fn.parse=function(_){var m=_.config||{},A=[];return this.each(function(C){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var M=0;M<this.files.length;M++)A.push({file:this.files[M],inputElem:this,instanceConfig:s.extend({},m)})}),k(),this;function k(){if(A.length===0)S(_.complete)&&_.complete();else{var C,M,D,F,N=A[0];if(S(_.before)){var L=_.before(N.file,N.inputElem);if(typeof L=="object"){if(L.action==="abort")return C="AbortError",M=N.file,D=N.inputElem,F=L.reason,void(S(_.error)&&_.error({name:C},M,D,F));if(L.action==="skip")return void I();typeof L.config=="object"&&(N.instanceConfig=s.extend(N.instanceConfig,L.config))}else if(L==="skip")return void I()}var O=N.instanceConfig.complete;N.instanceConfig.complete=function(z){S(O)&&O(z,N.file,N.inputElem),I()},c.parse(N.file,N.instanceConfig)}}function I(){A.splice(0,1),k()}}),a&&(n.onmessage=function(_){_=_.data,c.WORKER_ID===void 0&&_&&(c.WORKER_ID=_.workerId),typeof _.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(_.input,_.config),finished:!0}):(n.File&&_.input instanceof File||_.input instanceof Object)&&(_=c.parse(_.input,_.config))&&n.postMessage({workerId:c.WORKER_ID,results:_,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(h.prototype=Object.create(u.prototype)).constructor=h,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(u.prototype)).constructor=g,c})})(kk);var hq=kk.exports;const Ik=bk(hq),$o=xo();function Dk(t){return t.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,r)=>r.toUpperCase()).replace(/^[A-Z]/,e=>e.toLowerCase())}async function pq(t,e){if(!t)return null;const r=Object.values(e).find(n=>{var s;return n.aeriesId===t||n.aeriesId===parseInt(t)||((s=n.aeriesId)==null?void 0:s.toString())===(t==null?void 0:t.toString())});return r?r.id:(console.warn(`No Firebase user found for Aeries teacher ID: ${t}`),null)}function Wv(t){return{sourcedId:"stateId",SSID:"stateId",StateStudentID:"stateId",StudentNumber:"localId",givenName:"firstName",FirstName:"firstName",familyName:"lastName",LastName:"lastName",middleName:"middleName",MiddleName:"middleName",email:"email",Email:"email",phone:"phone",Phone:"phone",dateOfBirth:"birthDate",DOB:"birthDate",sex:"gender",Gender:"gender",grade:"grade",Grade:"grade",Address:"address",City:"city",State:"state",ZipCode:"zipCode",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",AttendanceRate:"attendanceRate",attendanceRate:"attendanceRate",Period1TeacherId:"schedule.periods.1",period1TeacherId:"schedule.periods.1",Period2TeacherId:"schedule.periods.2",period2TeacherId:"schedule.periods.2",Period3TeacherId:"schedule.periods.3",period3TeacherId:"schedule.periods.3",Period4TeacherId:"schedule.periods.4",period4TeacherId:"schedule.periods.4",Period5TeacherId:"schedule.periods.5",period5TeacherId:"schedule.periods.5",Period6TeacherId:"schedule.periods.6",period6TeacherId:"schedule.periods.6",Period7TeacherId:"schedule.periods.7",period7TeacherId:"schedule.periods.7",SHTeacherId:"schedule.periods.SH",shTeacherId:"schedule.periods.SH"}[t]||Dk(t)}function zv(t){return{SSID:"ssid",FirstName:"firstName",LastName:"lastName",MiddleName:"middleName",Grade:"grade",DOB:"dob",Gender:"gender",Ethnicity:"ethnicity",School:"school",Address:"address",City:"city",State:"state",ZipCode:"zipCode",Phone:"phone",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",ELL:"ell",504:"504",IEP:"iep",CaseManager:"caseManager",Disability:"disability",ServiceMinutes:"serviceMinutes",Goals:"goals",Notes:"notes",Plan:"plan",ReviewDate:"reviewDate",ReevalDate:"reevalDate",MeetingDate:"meetingDate",SpeechProvider:"speechProvider",MHProvider:"mhProvider",OTProvider:"otProvider",ProgramAccommodations:"programAccommodations",Accommodations:"programAccommodations",IEP_Services:"iepServices"}[t]||Dk(t)}async function mq(t){return new Promise((e,r)=>{Ik.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));const i=Object.keys(s[0]).map(o=>o.trim().toLowerCase());if(!(i.includes("sourcedid")||i.includes("ssid")||i.includes("statestudentid")))return r(new Error("Missing required 'sourcedId' or 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function gq(t,e){var a;let r=0;const n=At($o,"users"),s=await Wt(n),i={};s.forEach(o=>{i[o.id]={id:o.id,...o.data()}}),console.log(`Loaded ${Object.keys(i).length} users for teacher ID mapping`);for(const o of t){const l=(a=o.sourcedId||o.SSID||o.ssid||o.StateStudentID||o.stateStudentId)==null?void 0:a.trim();if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={firstName:"",lastName:"",grade:"",birthDate:"",gender:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",parentName:"",parentPhone:"",parentEmail:"",attendanceRate:"",schedule:{periods:{}}};for(const u of e){const f=Wv(u),h=o[u],p=h!=null&&typeof h=="string"?h.trim():h!=null?String(h):null;if(f.startsWith("schedule.periods.")){const g=f.split(".")[2];if(p){const v=await pq(p,i);v?(c.schedule.periods[g]=v,console.log(`Mapped Aeries teacher ID ${p} to Firebase user ID ${v} for period ${g}`)):console.warn(`Could not map Aeries teacher ID ${p} for period ${g}`)}}else c[f]=p}c.lastAeriesImport=new Date().toISOString(),console.log("Final aeriesData.schedule structure:",JSON.stringify(c.schedule,null,2));try{const u=At($o,"students"),f=or(u,Ur("app.studentData.ssid","==",l)),h=await Wt(f);if(h.empty){const p=Ze(At($o,"students")),g={app:{studentData:{ssid:l}},aeries:c,createdAt:kn()};await Ht(p,g),console.log(`Created new student ${p.id} with Aeries data for SSID ${l}`)}else{const p=h.docs[0];await Ht(Ze($o,"students",p.id),{aeries:c},{merge:!0}),console.log(`Updated existing student ${p.id} with Aeries data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import Aeries data for SSID ${l}:`,u)}}return r}async function vq(t){return new Promise((e,r)=>{Ik.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));if(!Object.keys(s[0]).some(a=>a.trim().toLowerCase()==="ssid"))return r(new Error("Missing required 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function yq(t,e){var n,s,i,a;let r=0;for(const o of t){const l=((n=o.SSID)==null?void 0:n.trim())||((s=o.ssid)==null?void 0:s.trim());if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={};for(const u of e){const f=zv(u);u==="IEP_Services"||u==="iep_services"?c[f]=((i=o[u])==null?void 0:i.split(";").map(h=>h.trim()))||[]:u==="ProgramAccommodations"||u==="Accommodations"?c[f]=((a=o[u])==null?void 0:a.split(";").map(h=>h.trim()))||[]:c[f]=o[u]}c.lastSeisImport=new Date().toISOString();try{const u=At($o,"students"),f=or(u,Ur("app.studentData.ssid","==",l)),h=await Wt(f);if(h.empty){const p=Ze(At($o,"students")),g={app:{studentData:{ssid:l}},seis:c,createdAt:kn()};await Ht(p,g),console.log(`Created new student ${p.id} with SEIS data for SSID ${l}`)}else{const p=h.docs[0];await Ht(Ze($o,"students",p.id),{seis:c},{merge:!0}),console.log(`Updated existing student ${p.id} with SEIS data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import SEIS data for SSID ${l}:`,u)}}return r}const xq={name:"SeisImport",setup(){const t=se(null),e=se(null),r=se([]),n=se([]),s=se([]),i=se([]),a=se(""),o=se(!1),l=be(()=>r.value.length>0&&s.value.length>0),c=(p,g=!1)=>{a.value=p,o.value=g,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:p=>{const g=p.target.files[0];if(g){const v=ll(g,{allowedTypes:["csv"],maxSize:10485760,fieldName:"SEIS Import File"});if(!v.isValid){c(v.error,!0),p.target.value="";return}const y=Hr(g.name);if(!y.isSafe){c(`File name contains potentially dangerous content: ${y.threats.join(", ")}`,!0),p.target.value="";return}e.value=g}},previewFile:async()=>{const p=e.value;if(!p){c(" Please select a CSV file.",!0);return}if(!Ds("seisPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const y=(await vq(p)).map(E=>{const x={};return Object.entries(E).forEach(([w,R])=>{const P=mn(w,{trim:!0,maxLength:100,removeDangerous:!0});let S=R;if(typeof R=="string"){S=mn(R,{trim:!0,maxLength:500,removeDangerous:!0});const _=Hr(S);_.isSafe||(console.warn(`Security threat detected in SEIS data: ${_.threats.join(", ")}`),S="")}x[P]=S}),x});r.value=y,c(` Loaded ${r.value.length} rows.`);const b=Object.keys(r.value[0]||{}).filter(E=>E.length>0);n.value=b,s.value=[...b],i.value=r.value.slice(0,5)}catch(v){c(` Error: ${v.message}`,!0),console.error("SEIS Parse Error:",v)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!Ds("seisImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} SEIS records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const g=r.value.map(y=>{const b={};return s.value.forEach(E=>{y[E]!==void 0&&(b[E]=y[E])}),b}),v=g.filter(y=>Object.values(y).some(E=>E&&typeof E=="string"&&E.trim().length>0));if(v.length===0){c(" No valid records found to import.",!0);return}if(v.length!==g.length){const y=g.length-v.length;c(` Skipping ${y} invalid records. Importing ${v.length} valid records.`)}await yq(v,s.value),c(` Successfully imported ${v.length} SEIS records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(g){c(` Import failed: ${g.message}`,!0),console.error("SEIS Import Error:",g)}}}}}},Eq={class:"seis-import"},_q=["disabled"],bq={key:0,id:"seis-field-options"},Sq=["value"],Aq={key:1,id:"seis-preview-container",style:{"margin-top":"1rem"}},Tq={border:"1",cellpadding:"4"},wq=["disabled"];function Cq(t,e,r,n,s,i){return B(),U("div",Eq,[e[5]||(e[5]=d("h3",null,"Upload SEIS CSV",-1)),d("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),d("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,_q),n.fieldOptions.length>0?(B(),U("div",bq,[e[4]||(e[4]=d("h4",null,"Select fields to import:",-1)),(B(!0),U(Pe,null,He(n.fieldOptions,a=>(B(),U("label",{key:a},[Oe(d("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,Sq),[[yt,n.selectedFields]]),we(" "+X(a),1)]))),128))])):ve("",!0),n.previewData.length>0?(B(),U("div",Aq,[d("table",Tq,[d("thead",null,[d("tr",null,[(B(!0),U(Pe,null,He(n.fieldOptions,a=>(B(),U("th",{key:a},X(a),1))),128))])]),d("tbody",null,[(B(!0),U(Pe,null,He(n.previewData,(a,o)=>(B(),U("tr",{key:o},[(B(!0),U(Pe,null,He(n.fieldOptions,l=>(B(),U("td",{key:l},X(a[l]||""),1))),128))]))),128))])]),d("p",null,"Showing first "+X(n.previewData.length)+" of "+X(n.parsedData.length)+" rows.",1)])):ve("",!0),d("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,wq),d("p",{class:Ye(["status-msg",{error:n.isError}])},X(n.statusMessage),3)])}const kq=bt(xq,[["render",Cq],["__scopeId","data-v-b942d3b4"]]),Iq={name:"AeriesImport",setup(){const t=se(null),e=se(null),r=se([]),n=se([]),s=se([]),i=se([]),a=se(""),o=se(!1),l=be(()=>r.value.length>0&&s.value.length>0),c=(p,g=!1)=>{a.value=p,o.value=g,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:p=>{const g=p.target.files[0];if(g){const v=ll(g,{allowedTypes:["csv"],maxSize:10485760,fieldName:"Aeries Import File"});if(!v.isValid){c(v.error,!0),p.target.value="";return}const y=Hr(g.name);if(!y.isSafe){c(`File name contains potentially dangerous content: ${y.threats.join(", ")}`,!0),p.target.value="";return}e.value=g}},previewFile:async()=>{const p=e.value;if(!p){c(" Please select a CSV file.",!0);return}if(!Ds("aeriesPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const y=(await mq(p)).map(E=>{const x={};return Object.entries(E).forEach(([w,R])=>{const P=mn(w,{trim:!0,maxLength:100,removeDangerous:!0});let S=R;if(typeof R=="string"){S=mn(R,{trim:!0,maxLength:500,removeDangerous:!0});const _=Hr(S);_.isSafe||(console.warn(`Security threat detected in Aeries data: ${_.threats.join(", ")}`),S="")}x[P]=S}),x});r.value=y,c(` Loaded ${r.value.length} rows.`);const b=Object.keys(r.value[0]||{}).filter(E=>E.length>0);n.value=b,s.value=[...b],i.value=r.value.slice(0,5)}catch(v){c(` Error: ${v.message}`,!0),console.error("Aeries Parse Error:",v)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!Ds("aeriesImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} Aeries records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const g=r.value.map(y=>{const b={};return s.value.forEach(E=>{y[E]!==void 0&&(b[E]=y[E])}),b}),v=g.filter(y=>Object.values(y).some(E=>E&&typeof E=="string"&&E.trim().length>0));if(v.length===0){c(" No valid records found to import.",!0);return}if(v.length!==g.length){const y=g.length-v.length;c(` Skipping ${y} invalid records. Importing ${v.length} valid records.`)}await gq(v,s.value),c(` Successfully imported ${v.length} Aeries records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(g){c(` Import failed: ${g.message}`,!0),console.error("Aeries Import Error:",g)}}}}}},Dq={class:"aeries-import"},Pq=["disabled"],Rq={key:0,id:"aeries-field-options"},Fq=["value"],Nq={key:1,id:"aeries-preview-container",style:{"margin-top":"1rem"}},Oq={border:"1",cellpadding:"4"},Mq=["disabled"];function Lq(t,e,r,n,s,i){return B(),U("div",Dq,[e[5]||(e[5]=d("h3",null,"Upload Aeries CSV",-1)),d("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),d("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,Pq),n.fieldOptions.length>0?(B(),U("div",Rq,[e[4]||(e[4]=d("h4",null,"Select fields to import:",-1)),(B(!0),U(Pe,null,He(n.fieldOptions,a=>(B(),U("label",{key:a},[Oe(d("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,Fq),[[yt,n.selectedFields]]),we(" "+X(a),1)]))),128))])):ve("",!0),n.previewData.length>0?(B(),U("div",Nq,[d("table",Oq,[d("thead",null,[d("tr",null,[(B(!0),U(Pe,null,He(n.fieldOptions,a=>(B(),U("th",{key:a},X(a),1))),128))])]),d("tbody",null,[(B(!0),U(Pe,null,He(n.previewData,(a,o)=>(B(),U("tr",{key:o},[(B(!0),U(Pe,null,He(n.fieldOptions,l=>(B(),U("td",{key:l},X(a[l]||""),1))),128))]))),128))])]),d("p",null,"Showing first "+X(n.previewData.length)+" of "+X(n.parsedData.length)+" rows.",1)])):ve("",!0),d("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,Mq),d("p",{class:Ye(["status-msg",{error:n.isError}])},X(n.statusMessage),3)])}const Bq=bt(Iq,[["render",Lq],["__scopeId","data-v-b40a9547"]]);function Uq(){const t=pc(Xd()),e=se(!1),r=se(!1),n=se(""),s=se(""),i=se(!1),a=Ns({baseUrl:"encrypted",clientId:"encrypted",clientSecret:"encrypted",selectedSchoolId:"school123",selectedClassIds:["class1","class2"],selectedApiTypes:{oneroster:!0,nativeAeries:!0},selectedEndpoints:["/schools","/students","/api/special-education/students"]}),o=se([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"},{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),l=(k,I=!1)=>{s.value=k,i.value=I,setTimeout(()=>{s.value="",i.value=!1},5e3)},c=()=>{a.baseUrl="https://demo.aeries.net/aeries",a.clientId="1279e5c6b747b6d62b7c76db3a205d40eb7458e678a90493d537d5af6b953550",a.clientSecret="68019dbf8d8ba82980dd148eecc3977ac0d7f1f040d444225874c88eb80b9c1a",l("Demo credentials loaded. Click Connect to test.")},u=async()=>{if(!a.baseUrl||!a.clientId||!a.clientSecret)return l("Please fill in all connection fields.",!0),!1;r.value=!0,l("Connecting to Aeries API...");try{const C=(await Pa(t,"getAeriesToken")({baseUrl:a.baseUrl,clientId:a.clientId,clientSecret:a.clientSecret})).data;if(C.success&&C.access_token)return n.value=C.access_token,e.value=!0,l(" Successfully connected to Aeries API!"),!0;throw new Error("No access token received")}catch(k){const I=k.message||"Connection failed";return l(` Connection failed: ${I}`,!0),console.error("Aeries API Connection Error:",k),!1}finally{r.value=!1}},f=()=>{e.value=!1,n.value="",l("Disconnected from Aeries API.")},h=async k=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const M=(await Pa(t,"testAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:k,accessToken:n.value})).data;if(M.success)return l(` Successfully fetched data from ${k}`),{data:M.data,responseTime:M.responseTime};throw new Error(M.error||"API call failed")}catch(I){const C=I.message||"API call failed";return l(` API call failed: ${C}`,!0),console.error("Aeries API Test Error:",I),{error:C}}},p=async k=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const M=(await Pa(t,"testCustomAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:k,accessToken:n.value})).data;return M.success?(l(` Successfully fetched data from ${k}`),{data:M.data,responseTime:M.responseTime}):{error:M.error||"API call failed"}}catch(I){const C=I.message||"API call failed";return l(` API call failed: ${C}`,!0),console.error("Custom Aeries API Test Error:",I),{error:C}}},g=async()=>await h("/students"),v=async()=>await h("/teachers"),y=async()=>{const k=["/api/special-education/students","/api/students/special-education","/api/iep/students","/api/504/students"];for(const I of k){const C=await p(I);if(C&&!C.error)return C}return{error:"No special education endpoints found"}},b=async()=>await p("/api/special-education/ieps"),E=async()=>await p("/api/special-education/504-plans"),x=async()=>await p("/api/special-education/accommodations"),w=async()=>await p("/api/special-education/services"),R=async()=>await p("/api/special-education/case-managers"),P=async()=>{const k={},I=o.value.filter(C=>C.path.includes("special-education")||C.path.includes("iep")||C.path.includes("504"));for(const C of I)k[C.path]=await p(C.path);return k},S=async()=>{var I;const k=await h("/students");if(k&&!k.error&&k.data){const C=((I=k.data.students)==null?void 0:I[0])||k.data[0],M=C&&(C.specialEducation||C.iep||C.plan504||C.disabilities||C.accommodations);return{success:!0,hasSpecialEdFields:M,sampleStudent:C,message:M?"OneRoster includes special education data!":"OneRoster does not include special education data"}}return k},_=async()=>{const k=["?filter=specialEducation=true","?filter=iep=true","?filter=plan504=true","?filter=disabilities=*","?filter=accommodations=*"],I={};for(const C of k)I[C]=await h(`/students${C}`);return I};async function m({baseUrl:k,accessToken:I}){const C=pc(),F=await Pa(C,"testAeriesEndpoint")({baseUrl:k,endpoint:"/schools",accessToken:I});return F.data.data.orgs||F.data.data.schools||F.data.data||[]}async function A({baseUrl:k,accessToken:I,schoolId:C}){const M=pc(),D=Pa(M,"testAeriesEndpoint"),F=`/classes?filter=school.sourcedId='${C}'`,N=await D({baseUrl:k,endpoint:F,accessToken:I});return N.data.data.classes||N.data.data||[]}return{isConnected:e,isConnecting:r,accessToken:n,connectionStatus:s,isError:i,connectionConfig:a,availableEndpoints:o,showStatus:l,loadDemoCredentials:c,connect:u,disconnect:f,testEndpoint:h,testCustomEndpoint:p,fetchStudents:g,fetchTeachers:v,fetchSpecialEducationStudents:y,fetchIEPRecords:b,fetch504Plans:E,fetchAccommodations:x,fetchServices:w,fetchCaseManagers:R,testAllSpecialEducationEndpoints:P,testOneRosterForSpecialEd:S,testStudentsWithSpecialEd:_,fetchSchools:m,fetchClasses:A}}const gg=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t.charCodeAt(n)^e.charCodeAt(n%e.length));return btoa(r)},vg=(t,e)=>{const r=atob(t);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r.charCodeAt(s)^e.charCodeAt(s%e.length));return n};function $q(){const t=xo(),e=tl(),r=se(!1),n=se(null),s=()=>{const c=e.currentUser;if(!c)throw new Error("User not authenticated");return c.uid+"_aeries_config_key"};return{isLoading:r,error:n,saveAeriesConfig:async c=>{if(!e.currentUser)throw new Error("User must be authenticated to save configuration");r.value=!0,n.value=null;try{const u=e.currentUser,f=s(),h={baseUrl:gg(c.baseUrl,f),clientId:gg(c.clientId,f),clientSecret:gg(c.clientSecret,f),selectedSchoolId:c.selectedSchoolId||"",selectedClassIds:c.selectedClassIds||[],manualClassInput:c.manualClassInput||"",savedAt:new Date().toISOString(),userId:u.uid},p=Ze(t,"users",u.uid,"aeries_config","current");return await Ht(p,h),{success:!0,message:"Configuration saved securely"}}catch(u){throw n.value=u.message,console.error("Failed to save Aeries configuration:",u),u}finally{r.value=!1}},loadAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to load configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=s(),f=Ze(t,"users",c.uid,"aeries_config","current"),h=await nr(f);if(!h.exists())return null;const p=h.data();if(p.userId!==c.uid)throw new Error("Configuration security check failed");return{baseUrl:vg(p.baseUrl,u),clientId:vg(p.clientId,u),clientSecret:vg(p.clientSecret,u),selectedSchoolId:p.selectedSchoolId||"",selectedClassIds:p.selectedClassIds||[],manualClassInput:p.manualClassInput||"",savedAt:p.savedAt}}catch(c){throw n.value=c.message,console.error("Failed to load Aeries configuration:",c),c}finally{r.value=!1}},deleteAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to delete configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=Ze(t,"users",c.uid,"aeries_config","current");return await mo(u),{success:!0,message:"Configuration deleted securely"}}catch(c){throw n.value=c.message,console.error("Failed to delete Aeries configuration:",c),c}finally{r.value=!1}},hasSavedConfig:async()=>{if(!e.currentUser)return!1;try{const c=e.currentUser,u=Ze(t,"users",c.uid,"aeries_config","current");return(await nr(u)).exists()}catch(c){return console.error("Failed to check for saved configuration:",c),!1}}}}const Vq={name:"AeriesAPIConnector",setup(){const{isConnected:t,isConnecting:e,accessToken:r,connectionStatus:n,isError:s,connectionConfig:i,availableEndpoints:a,showStatus:o,loadDemoCredentials:l,connect:c,disconnect:u,testEndpoint:f,testAllSpecialEducationEndpoints:h,testOneRosterForSpecialEd:p,testStudentsWithSpecialEd:g,fetchSchools:v,fetchClasses:y}=Uq(),{isLoading:b,error:E,saveAeriesConfig:x,loadAeriesConfig:w,deleteAeriesConfig:R,hasSavedConfig:P}=$q(),S=se(!1),_=se(null),m=se(""),A=se(null),k=se([]),I=se(""),C=se([]),M=se([]),D=se(!1),F=se(""),N=se(""),L=se(!1),O=se({oneroster:!1,nativeAeries:!1}),z=se([]),H=se([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"}]),V=se([{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),W=be(()=>i.baseUrl&&i.clientId&&i.clientSecret),G=async()=>{if(await c())try{S.value=!0;const ee=await v({baseUrl:i.baseUrl,accessToken:r.value});k.value=ee||[],I.value=""}catch(ee){console.error("Failed to fetch schools:",ee),o("Failed to fetch schools",!0),k.value=[]}finally{S.value=!1}},re=async ie=>{S.value=!0,m.value=ie,_.value=null,A.value=null;const ee=await f(ie);ee&&!ee.error?(_.value=ee.data,A.value=ee.responseTime):ee&&ee.error&&(_.value={error:ee.error}),S.value=!1},de=async()=>{S.value=!0,await h(),S.value=!1},ae=async()=>{S.value=!0,m.value="/students (SPED check)",_.value=null,A.value=null;const ie=await p();ie&&!ie.error?(_.value=ie,o(ie.message)):ie&&ie.error&&(_.value={error:ie.error},o(` OneRoster test failed: ${ie.error}`,!0)),S.value=!1},ce=async()=>{S.value=!0,m.value="/students (SPED filters)",_.value=null,A.value=null;const ie=await g();ie&&(_.value=ie,o("OneRoster SPED filter tests completed")),S.value=!1};$t(I,async ie=>{if(!ie){C.value=[],M.value=[];return}D.value=!1,F.value="",S.value=!0;try{C.value=await y({baseUrl:i.baseUrl,accessToken:r.value,schoolId:ie}),M.value=[]}catch{D.value=!0,C.value=[],M.value=[]}finally{S.value=!1}});const te=be(()=>t.value&&k.value.length>0),Z=be(()=>te.value&&I.value),xe=be(()=>O.value.oneroster||O.value.nativeAeries),J=()=>{const ie=[];O.value.oneroster&&ie.push(...H.value),O.value.nativeAeries&&ie.push(...V.value),a.value=ie},Y=(ie,ee=!1)=>{N.value=ie,L.value=ee,setTimeout(()=>{N.value="",L.value=!1},5e3)},Q=async()=>{try{const ie={baseUrl:i.baseUrl,clientId:i.clientId,clientSecret:i.clientSecret,selectedSchoolId:I.value,selectedClassIds:M.value,manualClassInput:F.value,selectedApiTypes:O.value,selectedEndpoints:z.value};await x(ie),Y(" Configuration saved securely to Firebase!")}catch(ie){console.error("Failed to save configuration:",ie),Y(` Failed to save configuration: ${ie.message}`,!0)}},fe=async()=>{try{const ie=await w();if(!ie){Y(" No saved configuration found",!0);return}i.baseUrl=ie.baseUrl||"",i.clientId=ie.clientId||"",i.clientSecret=ie.clientSecret||"",I.value=ie.selectedSchoolId||"",M.value=ie.selectedClassIds||[],F.value=ie.manualClassInput||"",ie.selectedApiTypes&&(O.value=ie.selectedApiTypes),ie.selectedEndpoints&&(z.value=ie.selectedEndpoints),J();const ee=ie.savedAt?new Date(ie.savedAt).toLocaleString():"Unknown";Y(` Configuration loaded securely (saved: ${ee})`)}catch(ie){console.error("Failed to load configuration:",ie),Y(` Failed to load configuration: ${ie.message}`,!0)}},ye=async()=>{if(confirm("Are you sure you want to permanently delete the saved configuration? This action cannot be undone."))try{await R(),Y(" Configuration permanently deleted from Firebase!")}catch(ie){console.error("Failed to clear configuration:",ie),Y(` Failed to clear configuration: ${ie.message}`,!0)}};return Gt(async()=>{try{if(await P()){const ee=await w();ee&&(i.baseUrl=ee.baseUrl||"",i.clientId=ee.clientId||"",i.clientSecret=ee.clientSecret||"",ee.selectedApiTypes&&(O.value=ee.selectedApiTypes),ee.selectedEndpoints&&(z.value=ee.selectedEndpoints),J(),Y(" Configuration auto-loaded securely from Firebase"))}}catch(ie){console.error("Failed to auto-load configuration:",ie)}}),{connectionConfig:i,isConnected:t,isConnecting:e,isLoading:S,connectionStatus:n,isError:s,apiResults:_,currentEndpoint:m,responseTime:A,availableEndpoints:a,canConnect:W,loadDemoCredentials:l,connect:G,disconnect:u,testEndpoint:re,handleTestSpecialEd:de,handleTestOneRosterSpecialEd:ae,handleTestStudentsWithSpecialEd:ce,schools:k,selectedSchoolId:I,classes:C,selectedClassIds:M,classesFetchError:D,manualClassInput:F,canShowSchoolDropdown:te,canShowClasses:Z,configStatus:N,configError:L,storageLoading:b,storageError:E,saveConfiguration:Q,loadConfiguration:fe,clearConfiguration:ye,selectedApiTypes:O,selectedEndpoints:z,onerosterEndpoints:H,nativeAeriesEndpoints:V,hasSelectedApiTypes:xe,updateAvailableEndpoints:J}}},Hq={class:"aeries-api-connector"},jq={class:"connection-form"},Gq={class:"form-group"},Wq=["disabled"],zq={class:"form-group"},Kq=["disabled"],qq={class:"form-group"},Xq=["disabled"],Yq={class:"button-group"},Qq=["disabled"],Jq=["disabled"],Zq={class:"api-type-selection"},eX={class:"api-type-options"},tX={class:"api-type-option"},rX={class:"checkbox-label"},nX={class:"api-type-option"},sX={class:"checkbox-label"},aX={key:0,class:"endpoint-selection"},iX={class:"endpoint-categories"},oX={key:0,class:"endpoint-category"},lX={class:"endpoint-checkboxes"},cX=["value"],uX={class:"endpoint-name"},dX={class:"endpoint-path-small"},fX={key:1,class:"endpoint-category"},hX={class:"endpoint-checkboxes"},pX=["value"],mX={class:"endpoint-name"},gX={class:"endpoint-path-small"},vX={class:"config-management"},yX={class:"config-buttons"},xX=["disabled"],EX=["disabled"],_X=["disabled"],bX={key:1,class:"api-testing"},SX={class:"special-ed-section"},AX={class:"quick-test-buttons"},TX=["disabled"],wX=["disabled"],CX=["disabled"],kX=["disabled"],IX=["disabled"],DX=["disabled"],PX={class:"endpoint-grid"},RX={class:"endpoint-path"},FX={class:"endpoint-description"},NX=["onClick","disabled"],OX={key:0,class:"api-results"},MX={class:"results-header"},LX={class:"endpoint-tested"},BX={key:0,class:"response-time"},UX={class:"results-content"},$X={key:2,class:"form-group"},VX=["value"],HX={key:3,class:"form-group"},jX={key:0},GX=["value"],WX={key:1};function zX(t,e,r,n,s,i){return B(),U("div",Hq,[e[48]||(e[48]=Dn('<h3 data-v-0f37c4fc>Aeries API Connection</h3><div class="api-info-section" data-v-0f37c4fc><h4 data-v-0f37c4fc>Getting Students with IEP/504 Plans</h4><div class="info-grid" data-v-0f37c4fc><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> OneRoster API (Limited)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> All students, basic info</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Cannot filter:</strong> Students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> You&#39;d get ALL students, not just SPED</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> Custom Aeries API (Recommended)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Only students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Includes:</strong> Accommodations, services, case managers</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Perfect for your use case</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> CSV Import (Fallback)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Filtered data from Aeries export</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Process:</strong> Export SPED students  Import CSV</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Works but requires manual steps</p></div></div><div class="testing-note" data-v-0f37c4fc><p data-v-0f37c4fc><strong data-v-0f37c4fc>Test the buttons below to see what your Aeries instance supports!</strong></p></div></div>',2)),d("div",jq,[d("div",Gq,[e[24]||(e[24]=d("label",{for:"baseUrl"},"Base URL:",-1)),Oe(d("input",{id:"baseUrl","onUpdate:modelValue":e[0]||(e[0]=a=>n.connectionConfig.baseUrl=a),type:"url",placeholder:"https://demo.aeries.net/aeries",disabled:n.isConnected},null,8,Wq),[[ft,n.connectionConfig.baseUrl]])]),d("div",zq,[e[25]||(e[25]=d("label",{for:"clientId"},"Client ID:",-1)),Oe(d("input",{id:"clientId","onUpdate:modelValue":e[1]||(e[1]=a=>n.connectionConfig.clientId=a),type:"text",placeholder:"Enter your Client ID",disabled:n.isConnected},null,8,Kq),[[ft,n.connectionConfig.clientId]])]),d("div",qq,[e[26]||(e[26]=d("label",{for:"clientSecret"},"Client Secret:",-1)),Oe(d("input",{id:"clientSecret","onUpdate:modelValue":e[2]||(e[2]=a=>n.connectionConfig.clientSecret=a),type:"password",placeholder:"Enter your Client Secret",disabled:n.isConnected},null,8,Xq),[[ft,n.connectionConfig.clientSecret]])]),d("div",Yq,[d("button",{onClick:e[3]||(e[3]=(...a)=>n.connect&&n.connect(...a)),disabled:!n.canConnect||n.isConnecting,class:"btn-primary"},X(n.isConnecting?"Connecting...":"Connect"),9,Qq),n.isConnected?(B(),U("button",{key:0,onClick:e[4]||(e[4]=(...a)=>n.disconnect&&n.disconnect(...a)),class:"btn-secondary"}," Disconnect ")):ve("",!0),d("button",{onClick:e[5]||(e[5]=(...a)=>n.loadDemoCredentials&&n.loadDemoCredentials(...a)),disabled:n.isConnected,class:"btn-demo"}," Load Demo Credentials ",8,Jq)]),d("div",Zq,[e[37]||(e[37]=d("h4",null,"Select API Types",-1)),e[38]||(e[38]=d("p",{class:"api-type-description"},"Choose which Aeries API types you want to use. This determines which endpoints will be available for testing and data import.",-1)),d("div",eX,[d("div",tX,[d("label",rX,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>n.selectedApiTypes.oneroster=a),onChange:e[7]||(e[7]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[yt,n.selectedApiTypes.oneroster]]),e[27]||(e[27]=d("span",{class:"checkmark"},null,-1)),e[28]||(e[28]=d("strong",null,"OneRoster API",-1))]),e[29]||(e[29]=d("p",{class:"api-type-desc"},"Standard OneRoster endpoints for basic student, teacher, and class data",-1))]),d("div",nX,[d("label",sX,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>n.selectedApiTypes.nativeAeries=a),onChange:e[9]||(e[9]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[yt,n.selectedApiTypes.nativeAeries]]),e[30]||(e[30]=d("span",{class:"checkmark"},null,-1)),e[31]||(e[31]=d("strong",null,"Native Aeries v5 API",-1))]),e[32]||(e[32]=d("p",{class:"api-type-desc"},"Aeries-specific endpoints for special education, IEP, and 504 plan data",-1))])]),n.hasSelectedApiTypes?(B(),U("div",aX,[e[35]||(e[35]=d("h5",null,"Select Endpoints to Use",-1)),e[36]||(e[36]=d("p",{class:"endpoint-description"},"Check the endpoints you want to enable for data import and testing.",-1)),d("div",iX,[n.selectedApiTypes.oneroster?(B(),U("div",oX,[e[33]||(e[33]=d("h6",null,"OneRoster Endpoints",-1)),d("div",lX,[(B(!0),U(Pe,null,He(n.onerosterEndpoints,a=>(B(),U("label",{key:a.path,class:"endpoint-checkbox"},[Oe(d("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>n.selectedEndpoints=o),value:a.path},null,8,cX),[[yt,n.selectedEndpoints]]),d("span",uX,X(a.name),1),d("span",dX,X(a.path),1)]))),128))])])):ve("",!0),n.selectedApiTypes.nativeAeries?(B(),U("div",fX,[e[34]||(e[34]=d("h6",null,"Native Aeries v5 Endpoints",-1)),d("div",hX,[(B(!0),U(Pe,null,He(n.nativeAeriesEndpoints,a=>(B(),U("label",{key:a.path,class:"endpoint-checkbox"},[Oe(d("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=o=>n.selectedEndpoints=o),value:a.path},null,8,pX),[[yt,n.selectedEndpoints]]),d("span",mX,X(a.name),1),d("span",gX,X(a.path),1)]))),128))])])):ve("",!0)])])):ve("",!0)]),d("div",vX,[e[39]||(e[39]=d("h4",null,"Save/Load Configuration",-1)),e[40]||(e[40]=d("div",{class:"security-note"},[d("p",null,[d("strong",null," Security:"),we(" Your API credentials are encrypted and stored securely in Firebase. Only you can access your saved configuration.")])],-1)),d("div",yX,[d("button",{onClick:e[12]||(e[12]=(...a)=>n.saveConfiguration&&n.saveConfiguration(...a)),disabled:!n.canConnect||n.storageLoading,class:"btn-save"},X(n.storageLoading?" Saving...":" Save Configuration"),9,xX),d("button",{onClick:e[13]||(e[13]=(...a)=>n.loadConfiguration&&n.loadConfiguration(...a)),disabled:n.storageLoading,class:"btn-load"},X(n.storageLoading?" Loading...":" Load Saved Configuration"),9,EX),d("button",{onClick:e[14]||(e[14]=(...a)=>n.clearConfiguration&&n.clearConfiguration(...a)),disabled:n.storageLoading,class:"btn-clear"},X(n.storageLoading?" Deleting...":" Clear Saved Configuration"),9,_X)]),n.configStatus?(B(),U("div",{key:0,class:Ye(["config-status",{error:n.configError}])},X(n.configStatus),3)):ve("",!0)])]),n.connectionStatus?(B(),U("div",{key:0,class:Ye(["status-message",{error:n.isError}])},X(n.connectionStatus),3)):ve("",!0),n.isConnected?(B(),U("div",bX,[e[43]||(e[43]=d("h4",null,"Test API Endpoints",-1)),d("div",SX,[e[41]||(e[41]=d("h5",null,"Special Education Data (IEP/504)",-1)),d("div",AX,[d("button",{onClick:e[15]||(e[15]=(...a)=>n.handleTestSpecialEd&&n.handleTestSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-special"},X(n.isLoading?"Testing...":"Test All SPED Endpoints"),9,TX),d("button",{onClick:e[16]||(e[16]=(...a)=>n.handleTestOneRosterSpecialEd&&n.handleTestOneRosterSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster for SPED Data ",8,wX),d("button",{onClick:e[17]||(e[17]=(...a)=>n.handleTestStudentsWithSpecialEd&&n.handleTestStudentsWithSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster SPED Filters ",8,CX),d("button",{onClick:e[18]||(e[18]=a=>t.handleTestEndpoint("/api/special-education/students")),disabled:n.isLoading,class:"btn-test-special"}," SPED Students ",8,kX),d("button",{onClick:e[19]||(e[19]=a=>t.handleTestEndpoint("/api/special-education/ieps")),disabled:n.isLoading,class:"btn-test-special"}," IEP Records ",8,IX),d("button",{onClick:e[20]||(e[20]=a=>t.handleTestEndpoint("/api/special-education/504-plans")),disabled:n.isLoading,class:"btn-test-special"}," 504 Plans ",8,DX)])]),d("div",PX,[(B(!0),U(Pe,null,He(n.availableEndpoints,a=>(B(),U("div",{key:a.path,class:"endpoint-card"},[d("h5",null,X(a.name),1),d("p",RX,X(a.path),1),d("p",FX,X(a.description),1),d("button",{onClick:o=>n.testEndpoint(a.path),disabled:n.isLoading,class:"btn-test"},X(n.isLoading&&n.currentEndpoint===a.path?"Testing...":"Test"),9,NX)]))),128))]),n.apiResults?(B(),U("div",OX,[e[42]||(e[42]=d("h4",null,"API Response",-1)),d("div",MX,[d("span",LX,"Endpoint: "+X(n.currentEndpoint),1),n.responseTime?(B(),U("span",BX,"Response time: "+X(n.responseTime)+"ms",1)):ve("",!0)]),d("div",UX,[d("pre",null,X(JSON.stringify(n.apiResults,null,2)),1)])])):ve("",!0)])):ve("",!0),n.canShowSchoolDropdown?(B(),U("div",$X,[e[45]||(e[45]=d("label",null,"School",-1)),Oe(d("select",{"onUpdate:modelValue":e[21]||(e[21]=a=>n.selectedSchoolId=a)},[e[44]||(e[44]=d("option",{value:"",disabled:""},"Select a school",-1)),(B(!0),U(Pe,null,He(n.schools,a=>(B(),U("option",{key:a.sourcedId||a.id||a.schoolId,value:a.sourcedId||a.id||a.schoolId},X(a.name||a.title||a.schoolName),9,VX))),128))],512),[[cr,n.selectedSchoolId]])])):ve("",!0),n.canShowClasses?(B(),U("div",HX,[e[47]||(e[47]=d("label",null,"Case Manager Classes",-1)),n.classesFetchError?(B(),U("div",WX,[e[46]||(e[46]=d("p",{class:"error"},"Could not fetch classes. Enter class names manually (comma separated):",-1)),Oe(d("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>n.manualClassInput=a),type:"text",placeholder:"Class1, Class2, ..."},null,512),[[ft,n.manualClassInput]])])):(B(),U("div",jX,[Oe(d("select",{"onUpdate:modelValue":e[22]||(e[22]=a=>n.selectedClassIds=a),multiple:""},[(B(!0),U(Pe,null,He(n.classes,a=>(B(),U("option",{key:a.sourcedId||a.id||a.classId,value:a.sourcedId||a.id||a.classId},X(a.title||a.name||a.className),9,GX))),128))],512),[[cr,n.selectedClassIds]])]))])):ve("",!0)])}const KX=bt(Vq,[["render",zX],["__scopeId","data-v-0f37c4fc"]]),qX={key:0,class:"app-settings-panel"},XX={class:"settings-section"},YX={class:"grades-checkboxes"},QX=["checked"],JX=["value"],ZX={class:"settings-section"},eY={key:0,class:"class-service-fieldset"},tY={class:"checkbox-inline-group"},rY=["value"],nY={key:1,class:"class-service-fieldset"},sY={class:"checkbox-inline-group"},aY=["value"],iY={key:2,class:"class-service-fieldset"},oY={class:"checkbox-inline-group"},lY=["value"],cY={key:3,class:"class-service-fieldset"},uY={class:"checkbox-inline-group"},dY={key:4,class:"class-service-fieldset"},fY={class:"checkbox-inline-group"},hY=["onClick"],pY={class:"checkbox-inline-group"},mY=["onClick"],gY=["onClick"],vY={class:"add-class-service"},yY={class:"custom-chips"},xY=["onClick"],EY={class:"settings-section"},_Y={class:"service-providers-defaults"},bY=["value"],SY={class:"service-providers-custom"},AY={class:"custom-provider-inputs"},TY={class:"custom-chips"},wY=["onClick"],CY={class:"settings-section"},kY={class:"periods-controls"},IY={class:"period-number-control"},DY={key:0,class:"period-labels"},PY={class:"period-labels-grid"},RY=["onUpdate:modelValue","placeholder"],FY={key:1,class:"period-preview"},NY={class:"settings-section"},OY={class:"gmail-api-settings"},MY={class:"gmail-api-status"},LY={class:"status-indicators"},BY={class:"status-item"},UY={class:"status-item"},$Y={class:"status-item"},VY={key:0,class:"status-message"},HY={key:1,class:"last-check"},jY={class:"gmail-api-actions"},GY=["disabled"],WY={class:"settings-section"},zY={class:"admin-action-btns"},KY=["disabled"],qY=["disabled"],XY=["disabled"],YY={key:1,class:"not-admin"},QY={__name:"AppSettings",setup(t){const{loadAppSettings:e,saveAppSettings:r,checkGmailApiStatus:n}=Os(),s=xn(),i=be(()=>s.currentUser),a=be(()=>{var M;return((M=i.value)==null?void 0:M.role)||null}),o=be(()=>["admin","school_admin","admin_504","sped_chair"].includes(a.value)),l=[{value:"K",label:"K"},...Array.from({length:12},(M,D)=>({value:(D+1).toString(),label:(D+1).toString()}))],c=["English","Math","History","Science"],u=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],f=se(!1),h=se(!1),p=se(!1),g=se(""),v=se(!1),y=se(""),b=se(""),E=se({grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...c]},{name:"Co-teach",enabledSubcategories:[...c]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:u,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]}),x=M=>{const D=Q_(M.numPeriods,{min:1,max:15,decimals:0});if(D===null)return m("Invalid number of periods. Must be between 1 and 15.",!0),!1;M.numPeriods=D;for(let F=0;F<M.numPeriods;F++){M.periodLabels[F]||(M.periodLabels[F]=`Per${F+1}`);const N=mn(M.periodLabels[F],{trim:!0,maxLength:3,removeDangerous:!0}),L=Hr(N);if(!L.isSafe)return m(`Security threat detected in period ${F+1} label: ${L.threats.join(", ")}`,!0),!1;const O=Dd(N,{max:3,fieldName:`Period ${F+1} label`});if(!O.isValid)return m(O.error,!0),!1;M.periodLabels[F]=N}if(M.customServiceProviders)for(let F=0;F<M.customServiceProviders.length;F++){const N=M.customServiceProviders[F];if(N.name){const L=mn(N.name,{trim:!0,maxLength:100,removeDangerous:!0}),O=Hr(L);if(!O.isSafe)return m(`Security threat detected in custom provider ${F+1}: ${O.threats.join(", ")}`,!0),!1;N.name=L}if(N.abbreviation){const L=mn(N.abbreviation,{trim:!0,maxLength:10,removeDangerous:!0}),O=Hr(L);if(!O.isSafe)return m(`Security threat detected in custom provider abbreviation ${F+1}: ${O.threats.join(", ")}`,!0),!1;N.abbreviation=L}}return!0},w=be(()=>u),R=be(()=>l.every(M=>E.value.grades.includes(M.value))),P=M=>{M.target.checked?E.value.grades=l.map(D=>D.value):E.value.grades=[]},S=()=>{if(!y.value.trim()||!b.value.trim()){m("Both name and abbreviation are required for custom service providers",!0);return}if(E.value.customServiceProviders.some(D=>D.abbreviation.toLowerCase()===b.value.toLowerCase())){m("A service provider with this abbreviation already exists",!0);return}E.value.customServiceProviders.push({name:y.value.trim(),abbreviation:b.value.trim()}),y.value="",b.value="",m("Custom service provider added successfully")},_=M=>{E.value.customServiceProviders.splice(M,1)};$t(()=>E.value.numPeriods,(M,D)=>{if(h.value||p.value)return;const F=Q_(M,{min:1,max:15,decimals:0});if(F!==null&&F!==M&&(E.value.numPeriods=F),E.value.periodLabels.length<E.value.numPeriods)for(let N=E.value.periodLabels.length;N<E.value.numPeriods;N++)E.value.periodLabels.push(`Per${N+1}`)}),$t(()=>E.value.periodLabels,(M,D)=>{h.value||p.value||M.forEach((F,N)=>{F&&F.length>3&&(E.value.periodLabels[N]=F.substring(0,3))})},{deep:!0});const m=(M,D=!1)=>{g.value=M,v.value=D,setTimeout(()=>{g.value="",v.value=!1},5e3)},A=async(M=!1)=>{f.value=!0;try{const D=await e();if(D){if(E.value={...E.value,...D},!E.value.periodLabels||E.value.periodLabels.length<E.value.numPeriods){E.value.periodLabels=[];for(let F=0;F<E.value.numPeriods;F++)E.value.periodLabels[F]=E.value.periodLabels[F]||`Per${F+1}`}M&&m("Settings loaded successfully")}}catch(D){m("Error loading settings",!0),console.error("Load settings error:",D)}finally{f.value=!1}},k=async()=>{if(console.log(" STEP 1: Starting save operation..."),!Ds("saveAppSettings",10,6e4).allowed){console.log(" STEP 1 FAILED: Rate limit exceeded"),m("Too many save requests. Please wait before saving again.",!0);return}console.log(" STEP 1 COMPLETE: Rate limit check passed"),console.log(" STEP 2: Preventing watchers and preparing settings..."),p.value=!0,h.value=!0;try{console.log(" STEP 3: Creating non-reactive copy for validation...");const D=JSON.parse(JSON.stringify(E.value));if(console.log(" STEP 4: Validating settings copy..."),!x(D)){console.log(" STEP 4 FAILED: Validation failed"),p.value=!1,h.value=!1;return}console.log(" STEP 4 COMPLETE: Validation passed"),console.log(" STEP 5: Calling saveAppSettings..."),await r(D),console.log(" STEP 5 COMPLETE: saveAppSettings returned successfully"),m("Settings saved successfully"),console.log(" SAVE OPERATION COMPLETED SUCCESSFULLY")}catch(D){console.error(" SAVE OPERATION FAILED at some step"),console.error(" Error:",D),console.error(" Error message:",D.message),console.error(" Error stack:",D.stack),D.message==="Save operation timed out"?m("Save operation timed out. Please try again.",!0):D.message&&D.message.includes("quota")?m("Storage quota exceeded. Please contact administrator.",!0):D.message&&D.message.includes("permission")?m("Permission denied. Please check your access rights.",!0):m("Error saving settings: "+(D.message||"Unknown error"),!0)}finally{console.log(" saveSettings: before cleanup"),console.log(" STEP 7: Cleaning up - setting saveLoading to false"),h.value=!1,setTimeout(()=>{p.value=!1},100),console.log(" saveSettings: after cleanup"),console.log(" STEP 7 COMPLETE: Cleanup finished")}},I=()=>{confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(E.value={grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...c]},{name:"Co-teach",enabledSubcategories:[...c]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:u,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]},m("Settings reset to defaults"))},C=async()=>{f.value=!0;try{const M=await n();M.enabled?m("Gmail API is enabled and ready to use!"):m(`Gmail API status: Workspace: ${M.isWorkspace?"Yes":"No"}, Internal OAuth: ${M.isInternalOAuth?"Yes":"No"}`,!0)}catch(M){m("Failed to check Gmail API status: "+M.message,!0)}finally{f.value=!1}};return Gt(()=>{A()}),(M,D)=>{var F,N,L,O,z,H,V,W;return o.value?(B(),U("div",qX,[D[39]||(D[39]=d("h2",null,"App Settings",-1)),d("form",{onSubmit:Xr(k,["prevent"])},[d("section",XX,[d("fieldset",null,[D[17]||(D[17]=d("legend",null,"Grades",-1)),d("div",YX,[d("label",null,[d("input",{type:"checkbox",checked:R.value,onChange:P},null,40,QX),D[16]||(D[16]=d("span",null,"Select All",-1))]),(B(),U(Pe,null,He(l,G=>d("label",{key:G.value},[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[0]||(D[0]=re=>E.value.grades=re),value:G.value},null,8,JX),[[yt,E.value.grades]]),d("span",null,X(G.label),1)])),64))])])]),d("section",ZX,[D[26]||(D[26]=d("h3",null,"Class Services",-1)),E.value.classServices[0]&&E.value.classServices[0].enabledSubcategories?(B(),U("div",eY,[d("fieldset",null,[D[18]||(D[18]=d("legend",null,"SDC",-1)),d("div",tY,[(B(),U(Pe,null,He(c,G=>d("label",{key:G},[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[1]||(D[1]=re=>E.value.classServices[0].enabledSubcategories=re),value:G},null,8,rY),[[yt,E.value.classServices[0].enabledSubcategories]]),we(" "+X(G),1)])),64))])])])):ve("",!0),E.value.classServices[1]&&E.value.classServices[1].enabledSubcategories?(B(),U("div",nY,[d("fieldset",null,[D[19]||(D[19]=d("legend",null,"Co-teach",-1)),d("div",sY,[(B(),U(Pe,null,He(c,G=>d("label",{key:G},[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[2]||(D[2]=re=>E.value.classServices[1].enabledSubcategories=re),value:G},null,8,aY),[[yt,E.value.classServices[1].enabledSubcategories]]),we(" "+X(G),1)])),64))])])])):ve("",!0),E.value.classServices[2]&&E.value.classServices[2].enabledSubcategories?(B(),U("div",iY,[d("fieldset",null,[D[20]||(D[20]=d("legend",null,"RSP",-1)),d("div",oY,[(B(),U(Pe,null,He(c,G=>d("label",{key:G},[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[3]||(D[3]=re=>E.value.classServices[2].enabledSubcategories=re),value:G},null,8,lY),[[yt,E.value.classServices[2].enabledSubcategories]]),we(" "+X(G),1)])),64))])])])):ve("",!0),E.value.classServices[3]&&E.value.classServices[3].enabledSubcategories?(B(),U("div",cY,[d("fieldset",null,[D[22]||(D[22]=d("legend",null,"Directed Studies",-1)),d("div",uY,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[4]||(D[4]=G=>E.value.classServices[3].enabledSubcategories=G),value:"Directed Studies"},null,512),[[yt,E.value.classServices[3].enabledSubcategories]]),D[21]||(D[21]=we(" Directed Studies "))])])])])):ve("",!0),E.value.classServices[4]&&E.value.classServices[4].enabledSubcategories?(B(),U("div",dY,[d("fieldset",null,[D[24]||(D[24]=d("legend",null,"FA",-1)),d("div",fY,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[5]||(D[5]=G=>E.value.classServices[4].enabledSubcategories=G),value:"FA"},null,512),[[yt,E.value.classServices[4].enabledSubcategories]]),D[23]||(D[23]=we(" FA "))])])])])):ve("",!0),(B(!0),U(Pe,null,He(E.value.classServices.slice(5),(G,re)=>(B(),U("div",{key:G.name,class:"class-service-fieldset"},[d("fieldset",null,[d("legend",null,[we(X(G.name)+" ",1),d("button",{type:"button",onClick:de=>M.removeClassService(re+5),title:"Remove Service"},"",8,hY)]),d("div",pY,[(B(!0),U(Pe,null,He(G.subcategories,(de,ae)=>(B(),U("label",{key:de},[D[25]||(D[25]=d("input",{type:"checkbox",checked:!0,disabled:""},null,-1)),we(" "+X(de)+" ",1),d("button",{type:"button",onClick:ce=>M.removeSubcategory(re+5,ae),title:"Remove Subcategory"},"",8,mY)]))),128)),d("button",{type:"button",onClick:de=>M.addSubcategory(re+5)},"+ Add Subcategory",8,gY)])])]))),128)),d("div",vY,[Oe(d("input",{type:"text","onUpdate:modelValue":D[6]||(D[6]=G=>M.newServiceName=G),placeholder:"New Service Name",maxlength:"18"},null,512),[[ft,M.newServiceName]]),Oe(d("input",{type:"text","onUpdate:modelValue":D[7]||(D[7]=G=>M.newServiceSubcat=G),placeholder:"Add Subcategory",maxlength:"18",onKeyup:D[8]||(D[8]=M1((...G)=>M.addNewServiceSubcat&&M.addNewServiceSubcat(...G),["enter"]))},null,544),[[ft,M.newServiceSubcat]]),d("button",{type:"button",onClick:D[9]||(D[9]=(...G)=>M.addNewServiceSubcat&&M.addNewServiceSubcat(...G))},"+ Add Subcategory"),d("div",yY,[(B(!0),U(Pe,null,He(M.newServiceSubcats,(G,re)=>(B(),U("span",{key:G,class:"chip"},[we(X(G)+" ",1),d("button",{type:"button",onClick:de=>M.removeNewServiceSubcat(re)},"",8,xY)]))),128))]),d("button",{type:"button",onClick:D[10]||(D[10]=(...G)=>M.addClassService&&M.addClassService(...G))},"+ Add Class Service")])]),d("section",EY,[d("fieldset",null,[D[28]||(D[28]=d("legend",null,"Service Providers",-1)),d("div",_Y,[(B(!0),U(Pe,null,He(w.value,G=>(B(),U("label",{key:G.abbreviation},[Oe(d("input",{type:"checkbox","onUpdate:modelValue":D[11]||(D[11]=re=>E.value.serviceProviders=re),value:G.abbreviation},null,8,bY),[[yt,E.value.serviceProviders]]),d("span",null,X(G.name)+" ("+X(G.abbreviation)+")",1)]))),128))]),d("div",SY,[D[27]||(D[27]=d("label",null,"Add Custom Service Provider:",-1)),d("div",AY,[Oe(d("input",{type:"text","onUpdate:modelValue":D[12]||(D[12]=G=>y.value=G),placeholder:"Full Name",maxlength:"100"},null,512),[[ft,y.value]]),Oe(d("input",{type:"text","onUpdate:modelValue":D[13]||(D[13]=G=>b.value=G),placeholder:"Abbreviation",maxlength:"10"},null,512),[[ft,b.value]]),d("button",{type:"button",onClick:S},"Add")]),d("div",TY,[(B(!0),U(Pe,null,He(E.value.customServiceProviders,(G,re)=>(B(),U("span",{key:re,class:"chip"},[we(X(G.name)+" ("+X(G.abbreviation)+") ",1),d("button",{type:"button",onClick:de=>_(re)},"",8,wY)]))),128))])])])]),d("section",CY,[d("fieldset",null,[D[32]||(D[32]=d("legend",null,"Periods",-1)),d("div",kY,[d("div",IY,[d("label",null,[D[29]||(D[29]=we(" Number of Periods (max 15): ")),Oe(d("input",{type:"number","onUpdate:modelValue":D[14]||(D[14]=G=>E.value.numPeriods=G),min:"1",max:"15",class:"period-number-input"},null,512),[[ft,E.value.numPeriods]])])]),E.value.numPeriods>0?(B(),U("div",DY,[D[30]||(D[30]=d("h4",null,"Period Labels (3 chars max each):",-1)),d("div",PY,[(B(!0),U(Pe,null,He(E.value.numPeriods,G=>(B(),U("div",{key:G,class:"period-label-item"},[d("label",null,[we(" Period "+X(G)+": ",1),Oe(d("input",{type:"text","onUpdate:modelValue":re=>E.value.periodLabels[G-1]=re,maxlength:"3",placeholder:`Per${G}`,class:"period-label-input"},null,8,RY),[[ft,E.value.periodLabels[G-1]]])])]))),128))])])):ve("",!0),E.value.numPeriods>0?(B(),U("div",FY,[D[31]||(D[31]=d("strong",null,"Preview:",-1)),(B(!0),U(Pe,null,He(E.value.numPeriods,G=>(B(),U("span",{key:G,class:"period-preview-item"},X(E.value.periodLabels[G-1]||`Per${G}`),1))),128))])):ve("",!0)])])]),d("section",NY,[d("fieldset",null,[D[38]||(D[38]=d("legend",null,"Gmail API Settings",-1)),d("div",OY,[d("div",MY,[D[37]||(D[37]=d("h4",null,"Status:",-1)),d("div",LY,[d("div",BY,[D[33]||(D[33]=d("span",{class:"status-label"},"Google Workspace:",-1)),d("span",{class:Ye(["status-value",(F=E.value.gmailApi)!=null&&F.isWorkspace?"enabled":"disabled"])},X((N=E.value.gmailApi)!=null&&N.isWorkspace?"Yes":"No"),3)]),d("div",UY,[D[34]||(D[34]=d("span",{class:"status-label"},"Internal OAuth:",-1)),d("span",{class:Ye(["status-value",(L=E.value.gmailApi)!=null&&L.isInternalOAuth?"enabled":"disabled"])},X((O=E.value.gmailApi)!=null&&O.isInternalOAuth?"Yes":"No"),3)]),d("div",$Y,[D[35]||(D[35]=d("span",{class:"status-label"},"Gmail API:",-1)),d("span",{class:Ye(["status-value",(z=E.value.gmailApi)!=null&&z.enabled?"enabled":"disabled"])},X((H=E.value.gmailApi)!=null&&H.enabled?"Enabled":"Disabled"),3)])]),(V=E.value.gmailApi)!=null&&V.enabled?ve("",!0):(B(),U("div",VY,D[36]||(D[36]=[d("p",null,"Gmail API features are currently disabled. To enable them, you need:",-1),d("ul",null,[d("li",null,"A Google Workspace organization (not a personal Gmail account)"),d("li",null,'OAuth consent screen set to "Internal" in Google Cloud Console')],-1),d("p",null,"Contact your Google Workspace administrator to configure these settings.",-1)]))),(W=E.value.gmailApi)!=null&&W.lastCheck?(B(),U("div",HY," Last checked: "+X(new Date(E.value.gmailApi.lastCheck).toLocaleString()),1)):ve("",!0)]),d("div",jY,[d("button",{type:"button",onClick:C,disabled:f.value}," Check Gmail API Status ",8,GY)])])])]),d("section",WY,[d("div",zY,[d("button",{type:"submit",disabled:h.value||f.value,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}}," Save Settings",8,KY),d("button",{type:"button",onClick:D[15]||(D[15]=()=>A(!0)),disabled:f.value,class:"admin-action-btn info",style:{"min-width":"100px","max-width":"100px"}}," Load",8,qY),d("button",{type:"button",onClick:I,disabled:f.value,class:"admin-action-btn warning",style:{"min-width":"100px","max-width":"100px"}}," Reset",8,XY)]),g.value?(B(),U("div",{key:0,class:Ye(["status-message",{error:v.value,success:!v.value}])},X(g.value),3)):ve("",!0)])],32)])):(B(),U("div",YY,D[40]||(D[40]=[d("h2",null,"App Settings",-1),d("p",null,"Access denied. You must be an admin to view this page.",-1)])))}}},JY=bt(QY,[["__scopeId","data-v-b1a89ed4"]]),ZY={class:"admin-aide-assignment"},eQ={class:"header"},tQ={class:"header-actions"},rQ=["disabled"],nQ={key:0},sQ={key:1},aQ={class:"content"},iQ={key:0,class:"error-message"},oQ={key:1,class:"error-message"},lQ={key:2,class:"loading"},cQ={key:3,class:"schedule-container"},uQ={class:"aide-schedule-table"},dQ={class:"aide-name"},fQ=["value","onChange"],hQ=["value"],pQ={class:"assignment-buttons"},mQ=["onClick"],gQ=["onClick"],vQ={class:"direct-assignment-cell"},yQ=["value","onChange"],xQ=["value"],EQ={class:"assignment-buttons"},_Q=["onClick"],bQ=["onClick"],SQ={__name:"AdminAideAssignment",setup(t){const e=ki(),{userList:r,fetchUsers:n}=_a(),{students:s,fetchStudents:i}=Ii(),a=xn(),{aideAssignment:o,loadAideAssignments:l,saveAllAideAssignments:c}=nx(),{appSettings:u,loadAppSettings:f}=Os(),h=se(!0),p=se(!1),g=be(()=>{var F;const D=(F=a.currentUser)==null?void 0:F.role;return["admin","school_admin","admin_504","sped_chair"].includes(D)}),v=be(()=>{var D;return((D=r.value)==null?void 0:D.filter(F=>F.role==="paraeducator"))||[]}),y=be(()=>{var D;return((D=r.value)==null?void 0:D.filter(F=>F.role==="teacher"))||[]}),b=be(()=>{var F;const D=((F=u.value)==null?void 0:F.numPeriods)||7;return Array.from({length:D},(N,L)=>L+1)});function E(D){return D.id}function x(D){return D.id}function w(D,F){if(!o.value[D])return[""];o.value[D].classAssignment||(o.value[D].classAssignment={});let N=o.value[D].classAssignment[F];return Array.isArray(N)?N.length?N:[""]:typeof N=="string"&&N!==""?[N]:[""]}function R(D){if(!o.value[D])return[""];let F=o.value[D].directAssignment;return Array.isArray(F)?F.length?F:[""]:typeof F=="string"&&F!==""?[F]:[""]}function P(D,F,N,L){o.value[D]||(o.value[D]={classAssignment:{},directAssignment:[]}),o.value[D].classAssignment||(o.value[D].classAssignment={});let O=w(D,F);for(O[N]=L;O.length>1&&O[O.length-1]==="";)O.pop();o.value[D].classAssignment[F]=[...O]}function S(D,F,N){o.value[D]||(o.value[D]={classAssignment:{},directAssignment:[]});let L=R(D);for(L[F]=N;L.length>1&&L[L.length-1]==="";)L.pop();o.value[D].directAssignment=[...L]}function _(D,F){o.value[D]||(o.value[D]={classAssignment:{},directAssignment:[]}),o.value[D].classAssignment||(o.value[D].classAssignment={});let N=w(D,F);N.push(""),o.value[D].classAssignment[F]=[...N]}function m(D,F,N){if(!o.value[D]||!o.value[D].classAssignment)return;let L=w(D,F);L.length<=1||(L.splice(N,1),o.value[D].classAssignment[F]=[...L])}function A(D){o.value[D]||(o.value[D]={classAssignment:{},directAssignment:[]});let F=R(D);F.push(""),o.value[D].directAssignment=[...F]}function k(D,F){if(!o.value[D])return;let N=R(D);N.length<=1||(N.splice(F,1),o.value[D].directAssignment=[...N])}async function I(){try{h.value=!0,await Promise.all([n(),i(),l(),f()]),h.value=!1}catch(D){console.error("Error loading data:",D),h.value=!1}}async function C(){try{p.value=!0,await c(),p.value=!1}catch(D){console.error("Error saving aide assignments:",D),p.value=!1}}function M(){e.push("/admin")}return Gt(I),(D,F)=>(B(),U("div",ZY,[d("div",eQ,[F[3]||(F[3]=d("h1",null,"Aide Assignment Management",-1)),d("div",tQ,[d("button",{onClick:C,class:"btn btn-primary",disabled:p.value},[p.value?(B(),U("span",nQ,"")):(B(),U("span",sQ,"")),we(" "+X(p.value?"Saving...":"Save Assignments"),1)],8,rQ),d("button",{onClick:M,class:"btn btn-secondary"},F[2]||(F[2]=[d("span",null,"",-1),we(" Back ")]))])]),d("div",aQ,[K(a).currentUser?g.value?h.value?(B(),U("div",lQ," Loading aide assignments... ")):(B(),U("div",cQ,[d("table",uQ,[d("thead",null,[d("tr",null,[F[8]||(F[8]=d("th",null,"Aide Name",-1)),(B(!0),U(Pe,null,He(b.value,N=>(B(),U("th",{key:N,class:"period-header"}," Period "+X(N),1))),128)),F[9]||(F[9]=d("th",null,"Direct Assignment",-1))])]),d("tbody",null,[(B(!0),U(Pe,null,He(v.value,N=>(B(),U("tr",{key:N.id,class:"aide-row"},[d("td",dQ,X(N.name||N.email),1),(B(!0),U(Pe,null,He(b.value,L=>(B(),U("td",{key:L,class:"period-cell"},[(B(!0),U(Pe,null,He(w(E(N),L),(O,z)=>(B(),U("div",{key:"t-"+z,class:"assignment-row"},[d("select",{value:O,onChange:H=>P(E(N),L,z,H.target.value),class:"teacher-select"},[F[10]||(F[10]=d("option",{value:""},"No Assignment",-1)),(B(!0),U(Pe,null,He(y.value,H=>(B(),U("option",{key:x(H),value:x(H)},X(H.name||H.email),9,hQ))),128))],40,fQ),d("div",pQ,[w(E(N),L).length>1?(B(),U("button",{key:0,onClick:H=>m(E(N),L,z),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,mQ)):ve("",!0),z===w(E(N),L).length-1?(B(),U("button",{key:1,onClick:H=>_(E(N),L),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,gQ)):ve("",!0)])]))),128))]))),128)),d("td",vQ,[(B(!0),U(Pe,null,He(R(E(N)),(L,O)=>(B(),U("div",{key:"d-"+O,class:"assignment-row"},[d("select",{value:L,onChange:z=>S(E(N),O,z.target.value),class:"student-select"},[F[11]||(F[11]=d("option",{value:""},"No Assignment",-1)),(B(!0),U(Pe,null,He(K(s),z=>(B(),U("option",{key:z.id,value:z.id},X(K(it)(z,"firstName"))+" "+X(K(it)(z,"lastName")),9,xQ))),128))],40,yQ),d("div",EQ,[R(E(N)).length>1?(B(),U("button",{key:0,onClick:z=>k(E(N),O),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,_Q)):ve("",!0),O===R(E(N)).length-1?(B(),U("button",{key:1,onClick:z=>A(E(N)),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,bQ)):ve("",!0)])]))),128))])]))),128))])])])):(B(),U("div",oQ,[F[6]||(F[6]=d("h2",null,"Access Denied",-1)),F[7]||(F[7]=d("p",null,"You do not have permission to access this page.",-1)),d("button",{onClick:F[1]||(F[1]=N=>K(e).push("/")),class:"btn btn-primary"},"Go Home")])):(B(),U("div",iQ,[F[4]||(F[4]=d("h2",null,"Authentication Required",-1)),F[5]||(F[5]=d("p",null,"Please log in to access this page.",-1)),d("button",{onClick:F[0]||(F[0]=N=>K(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},Pk=bt(SQ,[["__scopeId","data-v-bd60dfde"]]);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Rk=1252,AQ=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ux={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},dx=function(t){AQ.indexOf(t)!=-1&&(Rk=ux[0]=t)};function TQ(){dx(1252)}var ca=function(t){dx(t)};function Fk(){ca(1200),TQ()}function Ub(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function wQ(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function Nk(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Tu=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?wQ(t.slice(2)):e==254&&r==255?Nk(t.slice(2)):e==65279?t.slice(1):t},Zf=function(e){return String.fromCharCode(e)},$b=function(e){return String.fromCharCode(e)},Pd,Zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Vb(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Zi.charAt(i)+Zi.charAt(a)+Zi.charAt(o)+Zi.charAt(l);return e}function Fs(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=Zi.indexOf(t.charAt(c++)),a=Zi.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=Zi.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Zi.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var Zt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),_l=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function go(t){return Zt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Hb(t){return Zt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var la=function(e){return Zt?_l(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function bl(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function fx(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return fx(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Yi=Zt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:_l(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function CQ(t){for(var e=[],r=0,n=t.length+250,s=go(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=go(65535),n=65530)}return e.push(s.slice(0,r)),Yi(e)}var hs=/\u0000/g,wu=/[\u0001-\u0006]/g;function vc(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ua(t,e){var r=""+t;return r.length>=e?r:Vr("0",e-r.length)+r}function hx(t,e){var r=""+t;return r.length>=e?r:Vr(" ",e-r.length)+r}function Th(t,e){var r=""+t;return r.length>=e?r:r+Vr(" ",e-r.length)}function kQ(t,e){var r=""+Math.round(t);return r.length>=e?r:Vr("0",e-r.length)+r}function IQ(t,e){var r=""+t;return r.length>=e?r:Vr("0",e-r.length)+r}var jb=Math.pow(2,32);function Bl(t,e){if(t>jb||t<-jb)return kQ(t,e);var r=Math.round(t);return IQ(r,e)}function wh(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var Gb=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],yg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function DQ(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Ut={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Wb={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},PQ={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Ch(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,u=0,f=Math.floor(s);c<e&&(f=Math.floor(s),o=f*a+i,u=f*c+l,!(s-f<5e-8));)s=1/(s-f),i=a,a=o,l=c,c=u;if(u>e&&(c>e?(u=l,o=i):(u=c,o=a)),!r)return[0,n*o,u];var h=Math.floor(n*o/u);return[h,n*o-h*u,u]}function Vo(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=LQ(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var Ok=new Date(1899,11,31,0,0,0),RQ=Ok.getTime(),FQ=new Date(1900,2,1,0,0,0);function Mk(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=FQ&&(r+=24*60*60*1e3),(r-(RQ+(t.getTimezoneOffset()-Ok.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function px(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function NQ(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function OQ(t){var e=t<0?12:11,r=px(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function MQ(t){var e=px(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Rd(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=OQ(t):e===10?r=t.toFixed(10).substr(0,12):r=MQ(t),px(NQ(r.toUpperCase()))}function cl(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Rd(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return qs(14,Mk(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function LQ(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function BQ(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return yg[r.m-1][1];case 5:return yg[r.m-1][0];default:return yg[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return Gb[r.q][0];default:return Gb[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ua(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=ua(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?ua(l,c):"";return u}function eo(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var Lk=/%/g;function UQ(t,e,r){var n=e.replace(Lk,""),s=e.length-n.length;return hi(t,n,r*Math.pow(10,2*s))+Vr("%",s)}function $Q(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return hi(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Bk(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Bk(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Uk=/# (\?+)( ?)\/( ?)(\d+)/;function VQ(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?Vr(" ",t[1].length+1+t[4].length):hx(a,t[1].length)+t[2]+"/"+t[3]+ua(o,t[4].length))}function HQ(t,e,r){return r+(e===0?"":""+e)+Vr(" ",t[1].length+2+t[4].length)}var $k=/^#*0*\.([0#]+)/,Vk=/\).*[0#]/,Hk=/\(###\) ###\\?-####/;function os(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function zb(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function Kb(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function jQ(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function GQ(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function $s(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Vk)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?$s("n",n,r):"("+$s("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return $Q(t,e,r);if(e.indexOf("%")!==-1)return UQ(t,e,r);if(e.indexOf("E")!==-1)return Bk(e,r);if(e.charCodeAt(0)===36)return"$"+$s(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Bl(l,e.length);if(e.match(/^[#?]+$/))return s=Bl(r,0),s==="0"&&(s=""),s.length>e.length?s:os(e.substr(0,e.length-s.length))+s;if(i=e.match(Uk))return VQ(i,l,c);if(e.match(/^#+0+$/))return c+Bl(l,e.length-e.indexOf("0"));if(i=e.match($k))return s=zb(r,i[1].length).replace(/^([^\.]+)$/,"$1."+os(i[1])).replace(/\.$/,"."+os(i[1])).replace(/\.(\d*)$/,function(g,v){return"."+v+Vr("0",os(i[1]).length-v.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+zb(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+eo(Bl(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+$s(t,e,-r):eo(""+(Math.floor(r)+jQ(r,i[1].length)))+"."+ua(Kb(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return $s(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=vc($s(t,e.replace(/[\\-]/g,""),r)),a=0,vc(vc(e.replace(/\\/g,"")).replace(/[0#]/g,function(g){return a<s.length?s.charAt(a++):g==="0"?"0":""}));if(e.match(Hk))return s=$s(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=Ch(l,Math.pow(10,a)-1,!1),s=""+c,u=hi("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=Th(o[2],a),u.length<i[4].length&&(u=os(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=Ch(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?hx(o[1],a)+i[2]+"/"+i[3]+Th(o[2],a):Vr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=Bl(r,0),e.length<=s.length?s:os(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var f=e.indexOf(".")-a,h=e.length-s.length-f;return os(e.substr(0,f)+s+e.substr(e.length-h))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=Kb(r,i[1].length),r<0?"-"+$s(t,e,-r):eo(GQ(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?ua(0,3-g.length):"")+g})+"."+ua(a,i[1].length);switch(e){case"###,##0.00":return $s(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=eo(Bl(l,0));return p!=="0"?c+p:"";case"###,###.00":return $s(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return $s(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function WQ(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return hi(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function zQ(t,e,r){var n=e.replace(Lk,""),s=e.length-n.length;return hi(t,n,r*Math.pow(10,2*s))+Vr("%",s)}function jk(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+jk(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Ca(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Vk)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ca("n",n,r):"("+Ca("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return WQ(t,e,r);if(e.indexOf("%")!==-1)return zQ(t,e,r);if(e.indexOf("E")!==-1)return jk(e,r);if(e.charCodeAt(0)===36)return"$"+Ca(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+ua(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:os(e.substr(0,e.length-s.length))+s;if(i=e.match(Uk))return HQ(i,l,c);if(e.match(/^#+0+$/))return c+ua(l,e.length-e.indexOf("0"));if(i=e.match($k))return s=(""+r).replace(/^([^\.]+)$/,"$1."+os(i[1])).replace(/\.$/,"."+os(i[1])),s=s.replace(/\.(\d*)$/,function(g,v){return"."+v+Vr("0",os(i[1]).length-v.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+eo(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ca(t,e,-r):eo(""+r)+"."+Vr("0",i[1].length);if(i=e.match(/^#,#*,#0/))return Ca(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=vc(Ca(t,e.replace(/[\\-]/g,""),r)),a=0,vc(vc(e.replace(/\\/g,"")).replace(/[0#]/g,function(g){return a<s.length?s.charAt(a++):g==="0"?"0":""}));if(e.match(Hk))return s=Ca(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=Ch(l,Math.pow(10,a)-1,!1),s=""+c,u=hi("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=Th(o[2],a),u.length<i[4].length&&(u=os(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=Ch(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?hx(o[1],a)+i[2]+"/"+i[3]+Th(o[2],a):Vr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:os(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var f=e.indexOf(".")-a,h=e.length-s.length-f;return os(e.substr(0,f)+s+e.substr(e.length-h))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Ca(t,e,-r):eo(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?ua(0,3-g.length):"")+g})+"."+ua(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=eo(""+l);return p!=="0"?c+p:"";default:if(e.match(/\.[0#?]*$/))return Ca(t,e.slice(0,e.lastIndexOf(".")),r)+os(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function hi(t,e,r){return(r|0)===r?Ca(t,e,r):$s(t,e,r)}function KQ(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Gk=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function qc(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":wh(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Gk))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function qQ(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,u,f,h="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!wh(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(f=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(f);s[s.length]={t:"t",v:i},++a;break;case"\\":var p=t.charAt(++a),g=p==="("||p===")"?p:"t";s[s.length]={t:g,v:p},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=Vo(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Vo(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var v={t:o,v:o};if(c==null&&(c=Vo(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(v.v=c.H>=12?"P":"A"),v.t="T",h="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(v.v=c.H>=12?"PM":"AM"),v.t="T",a+=5,h="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(v.v=c.H>=12?"":""),v.t="T",a+=5,h="h"):(v.t="t",++a),c==null&&v.t==="T")return"";s[s.length]=v,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(Gk)){if(c==null&&(c=Vo(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",qc(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var y=0,b=0,E;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=h,l="h",y<1&&(y=1);break;case"s":(E=s[a].v.match(/\.0+$/))&&(b=Math.max(b,E[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&s[a].v.match(/[Hh]/)&&(y=1),y<2&&s[a].v.match(/[Mm]/)&&(y=2),y<3&&s[a].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var x="",w;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=BQ(s[a].t.charCodeAt(0),s[a].v,c,b),s[a].t="t";break;case"n":case"?":for(w=a+1;s[w]!=null&&((o=s[w].t)==="?"||o==="D"||(o===" "||o==="t")&&s[w+1]!=null&&(s[w+1].t==="?"||s[w+1].t==="t"&&s[w+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[w].v==="/"||s[w].v===" "&&s[w+1]!=null&&s[w+1].t=="?"));)s[a].v+=s[w].v,s[w]={v:"",t:";"},++w;x+=s[a].v,a=w-1;break;case"G":s[a].t="t",s[a].v=cl(e,r);break}var R="",P,S;if(x.length>0){x.charCodeAt(0)==40?(P=e<0&&x.charCodeAt(0)===45?-e:e,S=hi("n",x,P)):(P=e<0&&n>1?-e:e,S=hi("n",x,P),P<0&&s[0]&&s[0].t=="t"&&(S=S.substr(1),s[0].v="-"+s[0].v)),w=S.length-1;var _=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){_=a;break}var m=s.length;if(_===s.length&&S.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(w>=s[a].v.length-1?(w-=s[a].v.length,s[a].v=S.substr(w+1,s[a].v.length)):w<0?s[a].v="":(s[a].v=S.substr(0,w+1),w=-1),s[a].t="t",m=a);w>=0&&m<s.length&&(s[m].v=S.substr(0,w+1)+s[m].v)}else if(_!==s.length&&S.indexOf("E")===-1){for(w=S.indexOf(".")-1,a=_;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(u=s[a].v.indexOf(".")>-1&&a===_?s[a].v.indexOf(".")-1:s[a].v.length-1,R=s[a].v.substr(u+1);u>=0;--u)w>=0&&(s[a].v.charAt(u)==="0"||s[a].v.charAt(u)==="#")&&(R=S.charAt(w--)+R);s[a].v=R,s[a].t="t",m=a}for(w>=0&&m<s.length&&(s[m].v=S.substr(0,w+1)+s[m].v),w=S.indexOf(".")+1,a=_;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==_)){for(u=s[a].v.indexOf(".")>-1&&a===_?s[a].v.indexOf(".")+1:0,R=s[a].v.substr(0,u);u<s[a].v.length;++u)w<S.length&&(R+=S.charAt(w++));s[a].v=R,s[a].t="t",m=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(P=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=hi(s[a].t,s[a].v,P),s[a].t="t");var A="";for(a=0;a!==s.length;++a)s[a]!=null&&(A+=s[a].v);return A}var qb=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Xb(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function XQ(t,e){var r=KQ(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(qb),o=r[1].match(qb);return Xb(e,a)?[n,r[0]]:Xb(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function qs(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ut)[t],n==null&&(n=r.table&&r.table[Wb[t]]||Ut[Wb[t]]),n==null&&(n=PQ[t]||"General");break}if(wh(n,0))return cl(e,r);e instanceof Date&&(e=Mk(e,r.date1904));var s=XQ(n,e);if(wh(s[1]))return cl(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return qQ(s[1],e,r,s[0])}function Xo(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Ut[r]==null){e<0&&(e=r);continue}if(Ut[r]==t){e=r;break}}e<0&&(e=391)}return Ut[e]=t,e}function Wk(){Ut=DQ()}var YQ={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},zk=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function QQ(t){var e=typeof t=="number"?Ut[t]:t;return e=e.replace(zk,"(\\d+)"),new RegExp("^"+e+"$")}function JQ(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(zk)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:s=p;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?u:c+"T"+u}var ZQ=function(){var t={};t.version="1.2.0";function e(){for(var S=0,_=new Array(256),m=0;m!=256;++m)S=m,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,_[m]=S;return typeof Int32Array<"u"?new Int32Array(_):_}var r=e();function n(S){var _=0,m=0,A=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(A=0;A!=256;++A)k[A]=S[A];for(A=0;A!=256;++A)for(m=S[A],_=256+A;_<4096;_+=256)m=k[_]=m>>>8^S[m&255];var I=[];for(A=1;A!=16;++A)I[A-1]=typeof Int32Array<"u"?k.subarray(A*256,A*256+256):k.slice(A*256,A*256+256);return I}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],f=s[6],h=s[7],p=s[8],g=s[9],v=s[10],y=s[11],b=s[12],E=s[13],x=s[14];function w(S,_){for(var m=_^-1,A=0,k=S.length;A<k;)m=m>>>8^r[(m^S.charCodeAt(A++))&255];return~m}function R(S,_){for(var m=_^-1,A=S.length-15,k=0;k<A;)m=x[S[k++]^m&255]^E[S[k++]^m>>8&255]^b[S[k++]^m>>16&255]^y[S[k++]^m>>>24]^v[S[k++]]^g[S[k++]]^p[S[k++]]^h[S[k++]]^f[S[k++]]^u[S[k++]]^c[S[k++]]^l[S[k++]]^o[S[k++]]^a[S[k++]]^i[S[k++]]^r[S[k++]];for(A+=15;k<A;)m=m>>>8^r[(m^S[k++])&255];return~m}function P(S,_){for(var m=_^-1,A=0,k=S.length,I=0,C=0;A<k;)I=S.charCodeAt(A++),I<128?m=m>>>8^r[(m^I)&255]:I<2048?(m=m>>>8^r[(m^(192|I>>6&31))&255],m=m>>>8^r[(m^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,C=S.charCodeAt(A++)&1023,m=m>>>8^r[(m^(240|I>>8&7))&255],m=m>>>8^r[(m^(128|I>>2&63))&255],m=m>>>8^r[(m^(128|C>>6&15|(I&3)<<4))&255],m=m>>>8^r[(m^(128|C&63))&255]):(m=m>>>8^r[(m^(224|I>>12&15))&255],m=m>>>8^r[(m^(128|I>>6&63))&255],m=m>>>8^r[(m^(128|I&63))&255]);return~m}return t.table=r,t.bstr=w,t.buf=R,t.str=P,t}(),rr=function(){var e={};e.version="1.2.1";function r(ne,he){for(var le=ne.split("/"),ue=he.split("/"),pe=0,me=0,Fe=Math.min(le.length,ue.length);pe<Fe;++pe){if(me=le[pe].length-ue[pe].length)return me;if(le[pe]!=ue[pe])return le[pe]<ue[pe]?-1:1}return le.length-ue.length}function n(ne){if(ne.charAt(ne.length-1)=="/")return ne.slice(0,-1).indexOf("/")===-1?ne:n(ne.slice(0,-1));var he=ne.lastIndexOf("/");return he===-1?ne:ne.slice(0,he+1)}function s(ne){if(ne.charAt(ne.length-1)=="/")return s(ne.slice(0,-1));var he=ne.lastIndexOf("/");return he===-1?ne:ne.slice(he+1)}function i(ne,he){typeof he=="string"&&(he=new Date(he));var le=he.getHours();le=le<<6|he.getMinutes(),le=le<<5|he.getSeconds()>>>1,ne.write_shift(2,le);var ue=he.getFullYear()-1980;ue=ue<<4|he.getMonth()+1,ue=ue<<5|he.getDate(),ne.write_shift(2,ue)}function a(ne){var he=ne.read_shift(2)&65535,le=ne.read_shift(2)&65535,ue=new Date,pe=le&31;le>>>=5;var me=le&15;le>>>=4,ue.setMilliseconds(0),ue.setFullYear(le+1980),ue.setMonth(me-1),ue.setDate(pe);var Fe=he&31;he>>>=5;var Ve=he&63;return he>>>=6,ue.setHours(he),ue.setMinutes(Ve),ue.setSeconds(Fe<<1),ue}function o(ne){wn(ne,0);for(var he={},le=0;ne.l<=ne.length-4;){var ue=ne.read_shift(2),pe=ne.read_shift(2),me=ne.l+pe,Fe={};switch(ue){case 21589:le=ne.read_shift(1),le&1&&(Fe.mtime=ne.read_shift(4)),pe>5&&(le&2&&(Fe.atime=ne.read_shift(4)),le&4&&(Fe.ctime=ne.read_shift(4))),Fe.mtime&&(Fe.mt=new Date(Fe.mtime*1e3));break}ne.l=me,he[ue]=Fe}return he}var l;function c(){return l||(l={})}function u(ne,he){if(ne[0]==80&&ne[1]==75)return mt(ne,he);if((ne[0]|32)==109&&(ne[1]|32)==105)return So(ne,he);if(ne.length<512)throw new Error("CFB file size "+ne.length+" < 512");var le=3,ue=512,pe=0,me=0,Fe=0,Ve=0,Ne=0,Me=[],Be=ne.slice(0,512);wn(Be,0);var Qe=f(Be);switch(le=Qe[0],le){case 3:ue=512;break;case 4:ue=4096;break;case 0:if(Qe[1]==0)return mt(ne,he);default:throw new Error("Major Version: Expected 3 or 4 saw "+le)}ue!==512&&(Be=ne.slice(0,ue),wn(Be,28));var et=ne.slice(0,ue);h(Be,le);var ut=Be.read_shift(4,"i");if(le===3&&ut!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ut);Be.l+=4,Fe=Be.read_shift(4,"i"),Be.l+=4,Be.chk("00100000","Mini Stream Cutoff Size: "),Ve=Be.read_shift(4,"i"),pe=Be.read_shift(4,"i"),Ne=Be.read_shift(4,"i"),me=Be.read_shift(4,"i");for(var Je=-1,st=0;st<109&&(Je=Be.read_shift(4,"i"),!(Je<0));++st)Me[st]=Je;var It=p(ne,ue);y(Ne,me,It,ue,Me);var vr=E(It,Fe,Me,ue);vr[Fe].name="!Directory",pe>0&&Ve!==C&&(vr[Ve].name="!MiniFAT"),vr[Me[0]].name="!FAT",vr.fat_addrs=Me,vr.ssz=ue;var hr={},kr=[],za=[],To=[];x(Fe,vr,It,kr,pe,hr,za,Ve),g(za,To,kr),kr.shift();var Fi={FileIndex:za,FullPaths:To};return he&&he.raw&&(Fi.raw={header:et,sectors:It}),Fi}function f(ne){if(ne[ne.l]==80&&ne[ne.l+1]==75)return[0,0];ne.chk(M,"Header Signature: "),ne.l+=16;var he=ne.read_shift(2,"u");return[ne.read_shift(2,"u"),he]}function h(ne,he){var le=9;switch(ne.l+=2,le=ne.read_shift(2)){case 9:if(he!=3)throw new Error("Sector Shift: Expected 9 saw "+le);break;case 12:if(he!=4)throw new Error("Sector Shift: Expected 12 saw "+le);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+le)}ne.chk("0600","Mini Sector Shift: "),ne.chk("000000000000","Reserved: ")}function p(ne,he){for(var le=Math.ceil(ne.length/he)-1,ue=[],pe=1;pe<le;++pe)ue[pe-1]=ne.slice(pe*he,(pe+1)*he);return ue[le-1]=ne.slice(le*he),ue}function g(ne,he,le){for(var ue=0,pe=0,me=0,Fe=0,Ve=0,Ne=le.length,Me=[],Be=[];ue<Ne;++ue)Me[ue]=Be[ue]=ue,he[ue]=le[ue];for(;Ve<Be.length;++Ve)ue=Be[Ve],pe=ne[ue].L,me=ne[ue].R,Fe=ne[ue].C,Me[ue]===ue&&(pe!==-1&&Me[pe]!==pe&&(Me[ue]=Me[pe]),me!==-1&&Me[me]!==me&&(Me[ue]=Me[me])),Fe!==-1&&(Me[Fe]=ue),pe!==-1&&ue!=Me[ue]&&(Me[pe]=Me[ue],Be.lastIndexOf(pe)<Ve&&Be.push(pe)),me!==-1&&ue!=Me[ue]&&(Me[me]=Me[ue],Be.lastIndexOf(me)<Ve&&Be.push(me));for(ue=1;ue<Ne;++ue)Me[ue]===ue&&(me!==-1&&Me[me]!==me?Me[ue]=Me[me]:pe!==-1&&Me[pe]!==pe&&(Me[ue]=Me[pe]));for(ue=1;ue<Ne;++ue)if(ne[ue].type!==0){if(Ve=ue,Ve!=Me[Ve])do Ve=Me[Ve],he[ue]=he[Ve]+"/"+he[ue];while(Ve!==0&&Me[Ve]!==-1&&Ve!=Me[Ve]);Me[ue]=-1}for(he[0]+="/",ue=1;ue<Ne;++ue)ne[ue].type!==2&&(he[ue]+="/")}function v(ne,he,le){for(var ue=ne.start,pe=ne.size,me=[],Fe=ue;le&&pe>0&&Fe>=0;)me.push(he.slice(Fe*I,Fe*I+I)),pe-=I,Fe=Lo(le,Fe*4);return me.length===0?on(0):Yi(me).slice(0,ne.size)}function y(ne,he,le,ue,pe){var me=C;if(ne===C){if(he!==0)throw new Error("DIFAT chain shorter than expected")}else if(ne!==-1){var Fe=le[ne],Ve=(ue>>>2)-1;if(!Fe)return;for(var Ne=0;Ne<Ve&&(me=Lo(Fe,Ne*4))!==C;++Ne)pe.push(me);y(Lo(Fe,ue-4),he-1,le,ue,pe)}}function b(ne,he,le,ue,pe){var me=[],Fe=[];pe||(pe=[]);var Ve=ue-1,Ne=0,Me=0;for(Ne=he;Ne>=0;){pe[Ne]=!0,me[me.length]=Ne,Fe.push(ne[Ne]);var Be=le[Math.floor(Ne*4/ue)];if(Me=Ne*4&Ve,ue<4+Me)throw new Error("FAT boundary crossed: "+Ne+" 4 "+ue);if(!ne[Be])break;Ne=Lo(ne[Be],Me)}return{nodes:me,data:aS([Fe])}}function E(ne,he,le,ue){var pe=ne.length,me=[],Fe=[],Ve=[],Ne=[],Me=ue-1,Be=0,Qe=0,et=0,ut=0;for(Be=0;Be<pe;++Be)if(Ve=[],et=Be+he,et>=pe&&(et-=pe),!Fe[et]){Ne=[];var Je=[];for(Qe=et;Qe>=0;){Je[Qe]=!0,Fe[Qe]=!0,Ve[Ve.length]=Qe,Ne.push(ne[Qe]);var st=le[Math.floor(Qe*4/ue)];if(ut=Qe*4&Me,ue<4+ut)throw new Error("FAT boundary crossed: "+Qe+" 4 "+ue);if(!ne[st]||(Qe=Lo(ne[st],ut),Je[Qe]))break}me[et]={nodes:Ve,data:aS([Ne])}}return me}function x(ne,he,le,ue,pe,me,Fe,Ve){for(var Ne=0,Me=ue.length?2:0,Be=he[ne].data,Qe=0,et=0,ut;Qe<Be.length;Qe+=128){var Je=Be.slice(Qe,Qe+128);wn(Je,64),et=Je.read_shift(2),ut=xx(Je,0,et-Me),ue.push(ut);var st={name:ut,type:Je.read_shift(1),color:Je.read_shift(1),L:Je.read_shift(4,"i"),R:Je.read_shift(4,"i"),C:Je.read_shift(4,"i"),clsid:Je.read_shift(16),state:Je.read_shift(4,"i"),start:0,size:0},It=Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2);It!==0&&(st.ct=w(Je,Je.l-8));var vr=Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2);vr!==0&&(st.mt=w(Je,Je.l-8)),st.start=Je.read_shift(4,"i"),st.size=Je.read_shift(4,"i"),st.size<0&&st.start<0&&(st.size=st.type=0,st.start=C,st.name=""),st.type===5?(Ne=st.start,pe>0&&Ne!==C&&(he[Ne].name="!StreamData")):st.size>=4096?(st.storage="fat",he[st.start]===void 0&&(he[st.start]=b(le,st.start,he.fat_addrs,he.ssz)),he[st.start].name=st.name,st.content=he[st.start].data.slice(0,st.size)):(st.storage="minifat",st.size<0?st.size=0:Ne!==C&&st.start!==C&&he[Ne]&&(st.content=v(st,he[Ne].data,(he[Ve]||{}).data))),st.content&&wn(st.content,0),me[ut]=st,Fe.push(st)}}function w(ne,he){return new Date((Cs(ne,he+4)/1e7*Math.pow(2,32)+Cs(ne,he)/1e7-11644473600)*1e3)}function R(ne,he){return c(),u(l.readFileSync(ne),he)}function P(ne,he){var le=he&&he.type;switch(le||Zt&&Buffer.isBuffer(ne)&&(le="buffer"),le||"base64"){case"file":return R(ne,he);case"base64":return u(la(Fs(ne)),he);case"binary":return u(la(ne),he)}return u(ne,he)}function S(ne,he){var le=he||{},ue=le.root||"Root Entry";if(ne.FullPaths||(ne.FullPaths=[]),ne.FileIndex||(ne.FileIndex=[]),ne.FullPaths.length!==ne.FileIndex.length)throw new Error("inconsistent CFB structure");ne.FullPaths.length===0&&(ne.FullPaths[0]=ue+"/",ne.FileIndex[0]={name:ue,type:5}),le.CLSID&&(ne.FileIndex[0].clsid=le.CLSID),_(ne)}function _(ne){var he="Sh33tJ5";if(!rr.find(ne,"/"+he)){var le=on(4);le[0]=55,le[1]=le[3]=50,le[2]=54,ne.FileIndex.push({name:he,type:2,content:le,size:4,L:69,R:69,C:69}),ne.FullPaths.push(ne.FullPaths[0]+he),m(ne)}}function m(ne,he){S(ne);for(var le=!1,ue=!1,pe=ne.FullPaths.length-1;pe>=0;--pe){var me=ne.FileIndex[pe];switch(me.type){case 0:ue?le=!0:(ne.FileIndex.pop(),ne.FullPaths.pop());break;case 1:case 2:case 5:ue=!0,isNaN(me.R*me.L*me.C)&&(le=!0),me.R>-1&&me.L>-1&&me.R==me.L&&(le=!0);break;default:le=!0;break}}if(!(!le&&!he)){var Fe=new Date(1987,1,19),Ve=0,Ne=Object.create?Object.create(null):{},Me=[];for(pe=0;pe<ne.FullPaths.length;++pe)Ne[ne.FullPaths[pe]]=!0,ne.FileIndex[pe].type!==0&&Me.push([ne.FullPaths[pe],ne.FileIndex[pe]]);for(pe=0;pe<Me.length;++pe){var Be=n(Me[pe][0]);ue=Ne[Be],ue||(Me.push([Be,{name:s(Be).replace("/",""),type:1,clsid:F,ct:Fe,mt:Fe,content:null}]),Ne[Be]=!0)}for(Me.sort(function(ut,Je){return r(ut[0],Je[0])}),ne.FullPaths=[],ne.FileIndex=[],pe=0;pe<Me.length;++pe)ne.FullPaths[pe]=Me[pe][0],ne.FileIndex[pe]=Me[pe][1];for(pe=0;pe<Me.length;++pe){var Qe=ne.FileIndex[pe],et=ne.FullPaths[pe];if(Qe.name=s(et).replace("/",""),Qe.L=Qe.R=Qe.C=-(Qe.color=1),Qe.size=Qe.content?Qe.content.length:0,Qe.start=0,Qe.clsid=Qe.clsid||F,pe===0)Qe.C=Me.length>1?1:-1,Qe.size=0,Qe.type=5;else if(et.slice(-1)=="/"){for(Ve=pe+1;Ve<Me.length&&n(ne.FullPaths[Ve])!=et;++Ve);for(Qe.C=Ve>=Me.length?-1:Ve,Ve=pe+1;Ve<Me.length&&n(ne.FullPaths[Ve])!=n(et);++Ve);Qe.R=Ve>=Me.length?-1:Ve,Qe.type=1}else n(ne.FullPaths[pe+1]||"")==n(et)&&(Qe.R=pe+1),Qe.type=2}}}function A(ne,he){var le=he||{};if(le.fileType=="mad")return sn(ne,le);switch(m(ne),le.fileType){case"zip":return Rt(ne,le)}var ue=function(ut){for(var Je=0,st=0,It=0;It<ut.FileIndex.length;++It){var vr=ut.FileIndex[It];if(vr.content){var hr=vr.content.length;hr>0&&(hr<4096?Je+=hr+63>>6:st+=hr+511>>9)}}for(var kr=ut.FullPaths.length+3>>2,za=Je+7>>3,To=Je+127>>7,Fi=za+st+kr+To,ba=Fi+127>>7,Il=ba<=109?0:Math.ceil((ba-109)/127);Fi+ba+Il+127>>7>ba;)Il=++ba<=109?0:Math.ceil((ba-109)/127);var Ss=[1,Il,ba,To,kr,st,Je,0];return ut.FileIndex[0].size=Je<<6,Ss[7]=(ut.FileIndex[0].start=Ss[0]+Ss[1]+Ss[2]+Ss[3]+Ss[4]+Ss[5])+(Ss[6]+7>>3),Ss}(ne),pe=on(ue[7]<<9),me=0,Fe=0;{for(me=0;me<8;++me)pe.write_shift(1,D[me]);for(me=0;me<8;++me)pe.write_shift(2,0);for(pe.write_shift(2,62),pe.write_shift(2,3),pe.write_shift(2,65534),pe.write_shift(2,9),pe.write_shift(2,6),me=0;me<3;++me)pe.write_shift(2,0);for(pe.write_shift(4,0),pe.write_shift(4,ue[2]),pe.write_shift(4,ue[0]+ue[1]+ue[2]+ue[3]-1),pe.write_shift(4,0),pe.write_shift(4,4096),pe.write_shift(4,ue[3]?ue[0]+ue[1]+ue[2]-1:C),pe.write_shift(4,ue[3]),pe.write_shift(-4,ue[1]?ue[0]-1:C),pe.write_shift(4,ue[1]),me=0;me<109;++me)pe.write_shift(-4,me<ue[2]?ue[1]+me:-1)}if(ue[1])for(Fe=0;Fe<ue[1];++Fe){for(;me<236+Fe*127;++me)pe.write_shift(-4,me<ue[2]?ue[1]+me:-1);pe.write_shift(-4,Fe===ue[1]-1?C:Fe+1)}var Ve=function(ut){for(Fe+=ut;me<Fe-1;++me)pe.write_shift(-4,me+1);ut&&(++me,pe.write_shift(-4,C))};for(Fe=me=0,Fe+=ue[1];me<Fe;++me)pe.write_shift(-4,N.DIFSECT);for(Fe+=ue[2];me<Fe;++me)pe.write_shift(-4,N.FATSECT);Ve(ue[3]),Ve(ue[4]);for(var Ne=0,Me=0,Be=ne.FileIndex[0];Ne<ne.FileIndex.length;++Ne)Be=ne.FileIndex[Ne],Be.content&&(Me=Be.content.length,!(Me<4096)&&(Be.start=Fe,Ve(Me+511>>9)));for(Ve(ue[6]+7>>3);pe.l&511;)pe.write_shift(-4,N.ENDOFCHAIN);for(Fe=me=0,Ne=0;Ne<ne.FileIndex.length;++Ne)Be=ne.FileIndex[Ne],Be.content&&(Me=Be.content.length,!(!Me||Me>=4096)&&(Be.start=Fe,Ve(Me+63>>6)));for(;pe.l&511;)pe.write_shift(-4,N.ENDOFCHAIN);for(me=0;me<ue[4]<<2;++me){var Qe=ne.FullPaths[me];if(!Qe||Qe.length===0){for(Ne=0;Ne<17;++Ne)pe.write_shift(4,0);for(Ne=0;Ne<3;++Ne)pe.write_shift(4,-1);for(Ne=0;Ne<12;++Ne)pe.write_shift(4,0);continue}Be=ne.FileIndex[me],me===0&&(Be.start=Be.size?Be.start-1:C);var et=me===0&&le.root||Be.name;if(Me=2*(et.length+1),pe.write_shift(64,et,"utf16le"),pe.write_shift(2,Me),pe.write_shift(1,Be.type),pe.write_shift(1,Be.color),pe.write_shift(-4,Be.L),pe.write_shift(-4,Be.R),pe.write_shift(-4,Be.C),Be.clsid)pe.write_shift(16,Be.clsid,"hex");else for(Ne=0;Ne<4;++Ne)pe.write_shift(4,0);pe.write_shift(4,Be.state||0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,Be.start),pe.write_shift(4,Be.size),pe.write_shift(4,0)}for(me=1;me<ne.FileIndex.length;++me)if(Be=ne.FileIndex[me],Be.size>=4096)if(pe.l=Be.start+1<<9,Zt&&Buffer.isBuffer(Be.content))Be.content.copy(pe,pe.l,0,Be.size),pe.l+=Be.size+511&-512;else{for(Ne=0;Ne<Be.size;++Ne)pe.write_shift(1,Be.content[Ne]);for(;Ne&511;++Ne)pe.write_shift(1,0)}for(me=1;me<ne.FileIndex.length;++me)if(Be=ne.FileIndex[me],Be.size>0&&Be.size<4096)if(Zt&&Buffer.isBuffer(Be.content))Be.content.copy(pe,pe.l,0,Be.size),pe.l+=Be.size+63&-64;else{for(Ne=0;Ne<Be.size;++Ne)pe.write_shift(1,Be.content[Ne]);for(;Ne&63;++Ne)pe.write_shift(1,0)}if(Zt)pe.l=pe.length;else for(;pe.l<pe.length;)pe.write_shift(1,0);return pe}function k(ne,he){var le=ne.FullPaths.map(function(Ne){return Ne.toUpperCase()}),ue=le.map(function(Ne){var Me=Ne.split("/");return Me[Me.length-(Ne.slice(-1)=="/"?2:1)]}),pe=!1;he.charCodeAt(0)===47?(pe=!0,he=le[0].slice(0,-1)+he):pe=he.indexOf("/")!==-1;var me=he.toUpperCase(),Fe=pe===!0?le.indexOf(me):ue.indexOf(me);if(Fe!==-1)return ne.FileIndex[Fe];var Ve=!me.match(wu);for(me=me.replace(hs,""),Ve&&(me=me.replace(wu,"!")),Fe=0;Fe<le.length;++Fe)if((Ve?le[Fe].replace(wu,"!"):le[Fe]).replace(hs,"")==me||(Ve?ue[Fe].replace(wu,"!"):ue[Fe]).replace(hs,"")==me)return ne.FileIndex[Fe];return null}var I=64,C=-2,M="d0cf11e0a1b11ae1",D=[208,207,17,224,161,177,26,225],F="00000000000000000000000000000000",N={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:C,FREESECT:-1,HEADER_SIGNATURE:M,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:F,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function L(ne,he,le){c();var ue=A(ne,le);l.writeFileSync(he,ue)}function O(ne){for(var he=new Array(ne.length),le=0;le<ne.length;++le)he[le]=String.fromCharCode(ne[le]);return he.join("")}function z(ne,he){var le=A(ne,he);switch(he&&he.type||"buffer"){case"file":return c(),l.writeFileSync(he.filename,le),le;case"binary":return typeof le=="string"?le:O(le);case"base64":return Vb(typeof le=="string"?le:O(le));case"buffer":if(Zt)return Buffer.isBuffer(le)?le:_l(le);case"array":return typeof le=="string"?la(le):le}return le}var H;function V(ne){try{var he=ne.InflateRaw,le=new he;if(le._processChunk(new Uint8Array([3,0]),le._finishFlushFlag),le.bytesRead)H=ne;else throw new Error("zlib does not expose bytesRead")}catch(ue){console.error("cannot use native zlib: "+(ue.message||ue))}}function W(ne,he){if(!H)return pt(ne,he);var le=H.InflateRaw,ue=new le,pe=ue._processChunk(ne.slice(ne.l),ue._finishFlushFlag);return ne.l+=ue.bytesRead,pe}function G(ne){return H?H.deflateRawSync(ne):Ee(ne)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ce(ne){var he=(ne<<1|ne<<11)&139536|(ne<<5|ne<<15)&558144;return(he>>16|he>>8|he)&255}for(var te=typeof Uint8Array<"u",Z=te?new Uint8Array(256):[],xe=0;xe<256;++xe)Z[xe]=ce(xe);function J(ne,he){var le=Z[ne&255];return he<=8?le>>>8-he:(le=le<<8|Z[ne>>8&255],he<=16?le>>>16-he:(le=le<<8|Z[ne>>16&255],le>>>24-he))}function Y(ne,he){var le=he&7,ue=he>>>3;return(ne[ue]|(le<=6?0:ne[ue+1]<<8))>>>le&3}function Q(ne,he){var le=he&7,ue=he>>>3;return(ne[ue]|(le<=5?0:ne[ue+1]<<8))>>>le&7}function fe(ne,he){var le=he&7,ue=he>>>3;return(ne[ue]|(le<=4?0:ne[ue+1]<<8))>>>le&15}function ye(ne,he){var le=he&7,ue=he>>>3;return(ne[ue]|(le<=3?0:ne[ue+1]<<8))>>>le&31}function ie(ne,he){var le=he&7,ue=he>>>3;return(ne[ue]|(le<=1?0:ne[ue+1]<<8))>>>le&127}function ee(ne,he,le){var ue=he&7,pe=he>>>3,me=(1<<le)-1,Fe=ne[pe]>>>ue;return le<8-ue||(Fe|=ne[pe+1]<<8-ue,le<16-ue)||(Fe|=ne[pe+2]<<16-ue,le<24-ue)||(Fe|=ne[pe+3]<<24-ue),Fe&me}function ge(ne,he,le){var ue=he&7,pe=he>>>3;return ue<=5?ne[pe]|=(le&7)<<ue:(ne[pe]|=le<<ue&255,ne[pe+1]=(le&7)>>8-ue),he+3}function Te(ne,he,le){var ue=he&7,pe=he>>>3;return le=(le&1)<<ue,ne[pe]|=le,he+1}function ke(ne,he,le){var ue=he&7,pe=he>>>3;return le<<=ue,ne[pe]|=le&255,le>>>=8,ne[pe+1]=le,he+8}function Ae(ne,he,le){var ue=he&7,pe=he>>>3;return le<<=ue,ne[pe]|=le&255,le>>>=8,ne[pe+1]=le&255,ne[pe+2]=le>>>8,he+16}function We(ne,he){var le=ne.length,ue=2*le>he?2*le:he+5,pe=0;if(le>=he)return ne;if(Zt){var me=Hb(ue);if(ne.copy)ne.copy(me);else for(;pe<ne.length;++pe)me[pe]=ne[pe];return me}else if(te){var Fe=new Uint8Array(ue);if(Fe.set)Fe.set(ne);else for(;pe<le;++pe)Fe[pe]=ne[pe];return Fe}return ne.length=ue,ne}function De(ne){for(var he=new Array(ne),le=0;le<ne;++le)he[le]=0;return he}function je(ne,he,le){var ue=1,pe=0,me=0,Fe=0,Ve=0,Ne=ne.length,Me=te?new Uint16Array(32):De(32);for(me=0;me<32;++me)Me[me]=0;for(me=Ne;me<le;++me)ne[me]=0;Ne=ne.length;var Be=te?new Uint16Array(Ne):De(Ne);for(me=0;me<Ne;++me)Me[pe=ne[me]]++,ue<pe&&(ue=pe),Be[me]=0;for(Me[0]=0,me=1;me<=ue;++me)Me[me+16]=Ve=Ve+Me[me-1]<<1;for(me=0;me<Ne;++me)Ve=ne[me],Ve!=0&&(Be[me]=Me[Ve+16]++);var Qe=0;for(me=0;me<Ne;++me)if(Qe=ne[me],Qe!=0)for(Ve=J(Be[me],ue)>>ue-Qe,Fe=(1<<ue+4-Qe)-1;Fe>=0;--Fe)he[Ve|Fe<<Qe]=Qe&15|me<<4;return ue}var $e=te?new Uint16Array(512):De(512),Ie=te?new Uint16Array(32):De(32);if(!te){for(var Ke=0;Ke<512;++Ke)$e[Ke]=0;for(Ke=0;Ke<32;++Ke)Ie[Ke]=0}(function(){for(var ne=[],he=0;he<32;he++)ne.push(5);je(ne,Ie,32);var le=[];for(he=0;he<=143;he++)le.push(8);for(;he<=255;he++)le.push(9);for(;he<=279;he++)le.push(7);for(;he<=287;he++)le.push(8);je(le,$e,288)})();var _e=function(){for(var he=te?new Uint8Array(32768):[],le=0,ue=0;le<ae.length-1;++le)for(;ue<ae[le+1];++ue)he[ue]=le;for(;ue<32768;++ue)he[ue]=29;var pe=te?new Uint8Array(259):[];for(le=0,ue=0;le<de.length-1;++le)for(;ue<de[le+1];++ue)pe[ue]=le;function me(Ve,Ne){for(var Me=0;Me<Ve.length;){var Be=Math.min(65535,Ve.length-Me),Qe=Me+Be==Ve.length;for(Ne.write_shift(1,+Qe),Ne.write_shift(2,Be),Ne.write_shift(2,~Be&65535);Be-- >0;)Ne[Ne.l++]=Ve[Me++]}return Ne.l}function Fe(Ve,Ne){for(var Me=0,Be=0,Qe=te?new Uint16Array(32768):[];Be<Ve.length;){var et=Math.min(65535,Ve.length-Be);if(et<10){for(Me=ge(Ne,Me,+(Be+et==Ve.length)),Me&7&&(Me+=8-(Me&7)),Ne.l=Me/8|0,Ne.write_shift(2,et),Ne.write_shift(2,~et&65535);et-- >0;)Ne[Ne.l++]=Ve[Be++];Me=Ne.l*8;continue}Me=ge(Ne,Me,+(Be+et==Ve.length)+2);for(var ut=0;et-- >0;){var Je=Ve[Be];ut=(ut<<5^Je)&32767;var st=-1,It=0;if((st=Qe[ut])&&(st|=Be&-32768,st>Be&&(st-=32768),st<Be))for(;Ve[st+It]==Ve[Be+It]&&It<250;)++It;if(It>2){Je=pe[It],Je<=22?Me=ke(Ne,Me,Z[Je+1]>>1)-1:(ke(Ne,Me,3),Me+=5,ke(Ne,Me,Z[Je-23]>>5),Me+=3);var vr=Je<8?0:Je-4>>2;vr>0&&(Ae(Ne,Me,It-de[Je]),Me+=vr),Je=he[Be-st],Me=ke(Ne,Me,Z[Je]>>3),Me-=3;var hr=Je<4?0:Je-2>>1;hr>0&&(Ae(Ne,Me,Be-st-ae[Je]),Me+=hr);for(var kr=0;kr<It;++kr)Qe[ut]=Be&32767,ut=(ut<<5^Ve[Be])&32767,++Be;et-=It-1}else Je<=143?Je=Je+48:Me=Te(Ne,Me,1),Me=ke(Ne,Me,Z[Je]),Qe[ut]=Be&32767,++Be}Me=ke(Ne,Me,0)-1}return Ne.l=(Me+7)/8|0,Ne.l}return function(Ne,Me){return Ne.length<8?me(Ne,Me):Fe(Ne,Me)}}();function Ee(ne){var he=on(50+Math.floor(ne.length*1.1)),le=_e(ne,he);return he.slice(0,le)}var Se=te?new Uint16Array(32768):De(32768),Le=te?new Uint16Array(32768):De(32768),ze=te?new Uint16Array(128):De(128),lt=1,xt=1;function St(ne,he){var le=ye(ne,he)+257;he+=5;var ue=ye(ne,he)+1;he+=5;var pe=fe(ne,he)+4;he+=4;for(var me=0,Fe=te?new Uint8Array(19):De(19),Ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ne=1,Me=te?new Uint8Array(8):De(8),Be=te?new Uint8Array(8):De(8),Qe=Fe.length,et=0;et<pe;++et)Fe[re[et]]=me=Q(ne,he),Ne<me&&(Ne=me),Me[me]++,he+=3;var ut=0;for(Me[0]=0,et=1;et<=Ne;++et)Be[et]=ut=ut+Me[et-1]<<1;for(et=0;et<Qe;++et)(ut=Fe[et])!=0&&(Ve[et]=Be[ut]++);var Je=0;for(et=0;et<Qe;++et)if(Je=Fe[et],Je!=0){ut=Z[Ve[et]]>>8-Je;for(var st=(1<<7-Je)-1;st>=0;--st)ze[ut|st<<Je]=Je&7|et<<3}var It=[];for(Ne=1;It.length<le+ue;)switch(ut=ze[ie(ne,he)],he+=ut&7,ut>>>=3){case 16:for(me=3+Y(ne,he),he+=2,ut=It[It.length-1];me-- >0;)It.push(ut);break;case 17:for(me=3+Q(ne,he),he+=3;me-- >0;)It.push(0);break;case 18:for(me=11+ie(ne,he),he+=7;me-- >0;)It.push(0);break;default:It.push(ut),Ne<ut&&(Ne=ut);break}var vr=It.slice(0,le),hr=It.slice(le);for(et=le;et<286;++et)vr[et]=0;for(et=ue;et<30;++et)hr[et]=0;return lt=je(vr,Se,286),xt=je(hr,Le,30),he}function Vt(ne,he){if(ne[0]==3&&!(ne[1]&3))return[go(he),2];for(var le=0,ue=0,pe=Hb(he||1<<18),me=0,Fe=pe.length>>>0,Ve=0,Ne=0;!(ue&1);){if(ue=Q(ne,le),le+=3,ue>>>1)ue>>1==1?(Ve=9,Ne=5):(le=St(ne,le),Ve=lt,Ne=xt);else{le&7&&(le+=8-(le&7));var Me=ne[le>>>3]|ne[(le>>>3)+1]<<8;if(le+=32,Me>0)for(!he&&Fe<me+Me&&(pe=We(pe,me+Me),Fe=pe.length);Me-- >0;)pe[me++]=ne[le>>>3],le+=8;continue}for(;;){!he&&Fe<me+32767&&(pe=We(pe,me+32767),Fe=pe.length);var Be=ee(ne,le,Ve),Qe=ue>>>1==1?$e[Be]:Se[Be];if(le+=Qe&15,Qe>>>=4,!(Qe>>>8&255))pe[me++]=Qe;else{if(Qe==256)break;Qe-=257;var et=Qe<8?0:Qe-4>>2;et>5&&(et=0);var ut=me+de[Qe];et>0&&(ut+=ee(ne,le,et),le+=et),Be=ee(ne,le,Ne),Qe=ue>>>1==1?Ie[Be]:Le[Be],le+=Qe&15,Qe>>>=4;var Je=Qe<4?0:Qe-2>>1,st=ae[Qe];for(Je>0&&(st+=ee(ne,le,Je),le+=Je),!he&&Fe<ut&&(pe=We(pe,ut+100),Fe=pe.length);me<ut;)pe[me]=pe[me-st],++me}}}return he?[pe,le+7>>>3]:[pe.slice(0,me),le+7>>>3]}function pt(ne,he){var le=ne.slice(ne.l||0),ue=Vt(le,he);return ne.l+=ue[1],ue[0]}function ct(ne,he){if(ne)typeof console<"u"&&console.error(he);else throw new Error(he)}function mt(ne,he){var le=ne;wn(le,0);var ue=[],pe=[],me={FileIndex:ue,FullPaths:pe};S(me,{root:he.root});for(var Fe=le.length-4;(le[Fe]!=80||le[Fe+1]!=75||le[Fe+2]!=5||le[Fe+3]!=6)&&Fe>=0;)--Fe;le.l=Fe+4,le.l+=4;var Ve=le.read_shift(2);le.l+=6;var Ne=le.read_shift(4);for(le.l=Ne,Fe=0;Fe<Ve;++Fe){le.l+=20;var Me=le.read_shift(4),Be=le.read_shift(4),Qe=le.read_shift(2),et=le.read_shift(2),ut=le.read_shift(2);le.l+=8;var Je=le.read_shift(4),st=o(le.slice(le.l+Qe,le.l+Qe+et));le.l+=Qe+et+ut;var It=le.l;le.l=Je+4,Ct(le,Me,Be,me,st),le.l=It}return me}function Ct(ne,he,le,ue,pe){ne.l+=2;var me=ne.read_shift(2),Fe=ne.read_shift(2),Ve=a(ne);if(me&8257)throw new Error("Unsupported ZIP encryption");for(var Ne=ne.read_shift(4),Me=ne.read_shift(4),Be=ne.read_shift(4),Qe=ne.read_shift(2),et=ne.read_shift(2),ut="",Je=0;Je<Qe;++Je)ut+=String.fromCharCode(ne[ne.l++]);if(et){var st=o(ne.slice(ne.l,ne.l+et));(st[21589]||{}).mt&&(Ve=st[21589].mt),((pe||{})[21589]||{}).mt&&(Ve=pe[21589].mt)}ne.l+=et;var It=ne.slice(ne.l,ne.l+Me);switch(Fe){case 8:It=W(ne,Be);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Fe)}var vr=!1;me&8&&(Ne=ne.read_shift(4),Ne==134695760&&(Ne=ne.read_shift(4),vr=!0),Me=ne.read_shift(4),Be=ne.read_shift(4)),Me!=he&&ct(vr,"Bad compressed size: "+he+" != "+Me),Be!=le&&ct(vr,"Bad uncompressed size: "+le+" != "+Be),Rr(ue,ut,It,{unsafe:!0,mt:Ve})}function Rt(ne,he){var le=he||{},ue=[],pe=[],me=on(1),Fe=le.compression?8:0,Ve=0,Ne=0,Me=0,Be=0,Qe=0,et=ne.FullPaths[0],ut=et,Je=ne.FileIndex[0],st=[],It=0;for(Ne=1;Ne<ne.FullPaths.length;++Ne)if(ut=ne.FullPaths[Ne].slice(et.length),Je=ne.FileIndex[Ne],!(!Je.size||!Je.content||ut=="Sh33tJ5")){var vr=Be,hr=on(ut.length);for(Me=0;Me<ut.length;++Me)hr.write_shift(1,ut.charCodeAt(Me)&127);hr=hr.slice(0,hr.l),st[Qe]=ZQ.buf(Je.content,0);var kr=Je.content;Fe==8&&(kr=G(kr)),me=on(30),me.write_shift(4,67324752),me.write_shift(2,20),me.write_shift(2,Ve),me.write_shift(2,Fe),Je.mt?i(me,Je.mt):me.write_shift(4,0),me.write_shift(-4,st[Qe]),me.write_shift(4,kr.length),me.write_shift(4,Je.content.length),me.write_shift(2,hr.length),me.write_shift(2,0),Be+=me.length,ue.push(me),Be+=hr.length,ue.push(hr),Be+=kr.length,ue.push(kr),me=on(46),me.write_shift(4,33639248),me.write_shift(2,0),me.write_shift(2,20),me.write_shift(2,Ve),me.write_shift(2,Fe),me.write_shift(4,0),me.write_shift(-4,st[Qe]),me.write_shift(4,kr.length),me.write_shift(4,Je.content.length),me.write_shift(2,hr.length),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(4,0),me.write_shift(4,vr),It+=me.l,pe.push(me),It+=hr.length,pe.push(hr),++Qe}return me=on(22),me.write_shift(4,101010256),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,Qe),me.write_shift(2,Qe),me.write_shift(4,It),me.write_shift(4,Be),me.write_shift(2,0),Yi([Yi(ue),Yi(pe),me])}var mr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ns(ne,he){if(ne.ctype)return ne.ctype;var le=ne.name||"",ue=le.match(/\.([^\.]+)$/);return ue&&mr[ue[1]]||he&&(ue=(le=he).match(/[\.\\]([^\.\\])+$/),ue&&mr[ue[1]])?mr[ue[1]]:"application/octet-stream"}function Ri(ne){for(var he=Vb(ne),le=[],ue=0;ue<he.length;ue+=76)le.push(he.slice(ue,ue+76));return le.join(`\r
`)+`\r
`}function ms(ne){var he=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Me){var Be=Me.charCodeAt(0).toString(16).toUpperCase();return"="+(Be.length==1?"0"+Be:Be)});he=he.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),he.charAt(0)==`
`&&(he="=0D"+he.slice(1)),he=he.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var le=[],ue=he.split(`\r
`),pe=0;pe<ue.length;++pe){var me=ue[pe];if(me.length==0){le.push("");continue}for(var Fe=0;Fe<me.length;){var Ve=76,Ne=me.slice(Fe,Fe+Ve);Ne.charAt(Ve-1)=="="?Ve--:Ne.charAt(Ve-2)=="="?Ve-=2:Ne.charAt(Ve-3)=="="&&(Ve-=3),Ne=me.slice(Fe,Fe+Ve),Fe+=Ve,Fe<me.length&&(Ne+="="),le.push(Ne)}}return le.join(`\r
`)}function Cl(ne){for(var he=[],le=0;le<ne.length;++le){for(var ue=ne[le];le<=ne.length&&ue.charAt(ue.length-1)=="=";)ue=ue.slice(0,ue.length-1)+ne[++le];he.push(ue)}for(var pe=0;pe<he.length;++pe)he[pe]=he[pe].replace(/[=][0-9A-Fa-f]{2}/g,function(me){return String.fromCharCode(parseInt(me.slice(1),16))});return la(he.join(`\r
`))}function Wa(ne,he,le){for(var ue="",pe="",me="",Fe,Ve=0;Ve<10;++Ve){var Ne=he[Ve];if(!Ne||Ne.match(/^\s*$/))break;var Me=Ne.match(/^(.*?):\s*([^\s].*)$/);if(Me)switch(Me[1].toLowerCase()){case"content-location":ue=Me[2].trim();break;case"content-type":me=Me[2].trim();break;case"content-transfer-encoding":pe=Me[2].trim();break}}switch(++Ve,pe.toLowerCase()){case"base64":Fe=la(Fs(he.slice(Ve).join("")));break;case"quoted-printable":Fe=Cl(he.slice(Ve));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+pe)}var Be=Rr(ne,ue.slice(le.length),Fe,{unsafe:!0});me&&(Be.ctype=me)}function So(ne,he){if(O(ne.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var le=he&&he.root||"",ue=(Zt&&Buffer.isBuffer(ne)?ne.toString("binary"):O(ne)).split(`\r
`),pe=0,me="";for(pe=0;pe<ue.length;++pe)if(me=ue[pe],!!/^Content-Location:/i.test(me)&&(me=me.slice(me.indexOf("file")),le||(le=me.slice(0,me.lastIndexOf("/")+1)),me.slice(0,le.length)!=le))for(;le.length>0&&(le=le.slice(0,le.length-1),le=le.slice(0,le.lastIndexOf("/")+1),me.slice(0,le.length)!=le););var Fe=(ue[1]||"").match(/boundary="(.*?)"/);if(!Fe)throw new Error("MAD cannot find boundary");var Ve="--"+(Fe[1]||""),Ne=[],Me=[],Be={FileIndex:Ne,FullPaths:Me};S(Be);var Qe,et=0;for(pe=0;pe<ue.length;++pe){var ut=ue[pe];ut!==Ve&&ut!==Ve+"--"||(et++&&Wa(Be,ue.slice(Qe,pe),le),Qe=pe)}return Be}function sn(ne,he){var le=he||{},ue=le.boundary||"SheetJS";ue="------="+ue;for(var pe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ue.slice(2)+'"',"","",""],me=ne.FullPaths[0],Fe=me,Ve=ne.FileIndex[0],Ne=1;Ne<ne.FullPaths.length;++Ne)if(Fe=ne.FullPaths[Ne].slice(me.length),Ve=ne.FileIndex[Ne],!(!Ve.size||!Ve.content||Fe=="Sh33tJ5")){Fe=Fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(It){return"_x"+It.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(It){return"_u"+It.charCodeAt(0).toString(16)+"_"});for(var Me=Ve.content,Be=Zt&&Buffer.isBuffer(Me)?Me.toString("binary"):O(Me),Qe=0,et=Math.min(1024,Be.length),ut=0,Je=0;Je<=et;++Je)(ut=Be.charCodeAt(Je))>=32&&ut<128&&++Qe;var st=Qe>=et*4/5;pe.push(ue),pe.push("Content-Location: "+(le.root||"file:///C:/SheetJS/")+Fe),pe.push("Content-Transfer-Encoding: "+(st?"quoted-printable":"base64")),pe.push("Content-Type: "+ns(Ve,Fe)),pe.push(""),pe.push(st?ms(Be):Ri(Be))}return pe.push(ue+`--\r
`),pe.join(`\r
`)}function Ao(ne){var he={};return S(he,ne),he}function Rr(ne,he,le,ue){var pe=ue&&ue.unsafe;pe||S(ne);var me=!pe&&rr.find(ne,he);if(!me){var Fe=ne.FullPaths[0];he.slice(0,Fe.length)==Fe?Fe=he:(Fe.slice(-1)!="/"&&(Fe+="/"),Fe=(Fe+he).replace("//","/")),me={name:s(he),type:2},ne.FileIndex.push(me),ne.FullPaths.push(Fe),pe||rr.utils.cfb_gc(ne)}return me.content=le,me.size=le?le.length:0,ue&&(ue.CLSID&&(me.clsid=ue.CLSID),ue.mt&&(me.mt=ue.mt),ue.ct&&(me.ct=ue.ct)),me}function On(ne,he){S(ne);var le=rr.find(ne,he);if(le){for(var ue=0;ue<ne.FileIndex.length;++ue)if(ne.FileIndex[ue]==le)return ne.FileIndex.splice(ue,1),ne.FullPaths.splice(ue,1),!0}return!1}function kl(ne,he,le){S(ne);var ue=rr.find(ne,he);if(ue){for(var pe=0;pe<ne.FileIndex.length;++pe)if(ne.FileIndex[pe]==ue)return ne.FileIndex[pe].name=s(le),ne.FullPaths[pe]=le,!0}return!1}function Qc(ne){m(ne,!0)}return e.find=k,e.read=P,e.parse=u,e.write=z,e.writeFile=L,e.utils={cfb_new:Ao,cfb_add:Rr,cfb_del:On,cfb_mov:kl,cfb_gc:Qc,ReadShift:Qu,CheckField:pI,prep_blob:wn,bconcat:Yi,use_zlib:V,_deflateRaw:Ee,_inflateRaw:pt,consts:N},e}();function eJ(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function $a(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function mx(t){for(var e=[],r=$a(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}var kh=new Date(1899,11,30,0,0,0);function ps(t,e){var r=t.getTime(),n=kh.getTime()+(t.getTimezoneOffset()-kh.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Kk=new Date,tJ=kh.getTime()+(Kk.getTimezoneOffset()-kh.getTimezoneOffset())*6e4,Yb=Kk.getTimezoneOffset();function jp(t){var e=new Date;return e.setTime(t*24*60*60*1e3+tJ),e.getTimezoneOffset()!==Yb&&e.setTime(e.getTime()+(e.getTimezoneOffset()-Yb)*6e4),e}function rJ(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var Qb=new Date("2017-02-19T19:06:09.000Z"),qk=isNaN(Qb.getFullYear())?new Date("2/19/17"):Qb,nJ=qk.getFullYear()==2017;function vn(t,e){var r=new Date(t);if(nJ)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(qk.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function ul(t,e){if(Zt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return ku(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return ku(Nk(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return ku(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return ku(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function Fn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Fn(t[r]));return e}function Vr(t,e){for(var r="";r.length<e;)r+=t;return r}function ha(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var sJ=["january","february","march","april","may","june","july","august","september","october","november","december"];function Oc(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&sJ.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var aJ=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),a=[i[0]],o=1;o<i.length;++o)a.push(s),a.push(i[o]);return a}}();function Xk(t){return t?t.content&&t.type?ul(t.content,!0):t.data?Tu(t.data):t.asNodeBuffer&&Zt?Tu(t.asNodeBuffer().toString("binary")):t.asBinary?Tu(t.asBinary()):t._data&&t._data.getContent?Tu(ul(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Yk(t){if(!t)return null;if(t.data)return Ub(t.data);if(t.asNodeBuffer&&Zt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?Ub(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function iJ(t){return t&&t.name.slice(-4)===".bin"?Yk(t):Xk(t)}function Vs(t,e){for(var r=t.FullPaths||$a(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var a=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||s==a)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function gx(t,e){var r=Vs(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Zr(t,e,r){if(!r)return iJ(gx(t,e));if(!e)return null;try{return Zr(t,e)}catch{return null}}function ks(t,e,r){if(!r)return Xk(gx(t,e));if(!e)return null;try{return ks(t,e)}catch{return null}}function oJ(t,e,r){return Yk(gx(t,e))}function Jb(t){for(var e=t.FullPaths||$a(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function lJ(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Zt?n=_l(r):n=CQ(r),rr.utils.cfb_add(t,e,n)}rr.utils.cfb_add(t,e,r)}else t.file(e,r)}function Qk(t,e){switch(e.type){case"base64":return rr.read(t,{type:"base64"});case"binary":return rr.read(t,{type:"binary"});case"buffer":case"array":return rr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Cu(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Jk=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,cJ=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Zb=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,uJ=/<[^>]*>/g,rs=Jk.match(Zb)?Zb:uJ,dJ=/<\w*:/,fJ=/<(\/?)\w+:/;function kt(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var a=t.match(cJ),o=0,l="",c=0,u="",f="",h=1;if(a)for(c=0;c!=a.length;++c){for(f=a[c],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(u=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(h=(s=f.charCodeAt(i+1))==34||s==39?1:0,l=f.slice(i+1+h,f.length-h),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,n[u.toLowerCase()]=l;else{var p=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[p]&&u.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function ja(t){return t.replace(fJ,"<$1")}var Zk={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},hJ=mx(Zk),ar=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(o,l){return Zk[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,a)+r(s.slice(a+3))}}(),pJ=/[&<>'"]/g,mJ=/[\u0000-\u001f]/g;function vx(t){var e=t+"";return e.replace(pJ,function(r){return hJ[r]}).replace(/\n/g,"<br/>").replace(mJ,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var eS=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Dr(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function xg(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function tS(t){var e=go(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function rS(t){return _l(t,"binary").toString("utf8")}var e0="foo bar baz",Ar=Zt&&(rS(e0)==xg(e0)&&rS||tS(e0)==xg(e0)&&tS)||xg,ku=Zt?function(t){return _l(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Fd=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),eI=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),gJ=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),vJ=/<\/?(?:vt:)?variant>/g,yJ=/<(?:vt:)([^>]*)>([\s\S]*)</;function nS(t,e){var r=kt(t),n=t.match(gJ(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var a=i.replace(vJ,"").match(yJ);a&&s.push({v:Ar(a[2]),t:a[1]})}),s}var xJ=/(^\s|\s$|\n)/;function EJ(t){return $a(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function _J(t,e,r){return"<"+t+(r!=null?EJ(r):"")+(e!=null?(e.match(xJ)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function yx(t){if(Zt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Ar(bl(fx(t)));throw new Error("Bad input format: expected Buffer or string")}var Nd=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,bJ={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},SJ=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function AJ(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function TJ(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var sS=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},aS=Zt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:_l(e)})):sS(t)}:sS,iS=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(ui(t,s)));return n.join("").replace(hs,"")},xx=Zt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(hs,""):iS(t,e,r)}:iS,oS=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},tI=Zt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):oS(t,e,r)}:oS,lS=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Xl(t,s)));return n.join("")},df=Zt?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):lS(e,r,n)}:lS,rI=function(t,e){var r=Cs(t,e);return r>0?df(t,e+4,e+4+r-1):""},nI=rI,sI=function(t,e){var r=Cs(t,e);return r>0?df(t,e+4,e+4+r-1):""},aI=sI,iI=function(t,e){var r=2*Cs(t,e);return r>0?df(t,e+4,e+4+r-1):""},oI=iI,lI=function(e,r){var n=Cs(e,r);return n>0?xx(e,r+4,r+4+n):""},cI=lI,uI=function(t,e){var r=Cs(t,e);return r>0?df(t,e+4,e+4+r):""},dI=uI,fI=function(t,e){return AJ(t,e)},Ih=fI,hI=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Zt&&(nI=function(e,r){if(!Buffer.isBuffer(e))return rI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},aI=function(e,r){if(!Buffer.isBuffer(e))return sI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},oI=function(e,r){if(!Buffer.isBuffer(e))return iI(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},cI=function(e,r){if(!Buffer.isBuffer(e))return lI(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},dI=function(e,r){if(!Buffer.isBuffer(e))return uI(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},Ih=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):fI(e,r)},hI=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Xl=function(t,e){return t[e]},ui=function(t,e){return t[e+1]*256+t[e]},wJ=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Cs=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Lo=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},CJ=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Qu(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,Zt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(ui(this,c)),c+=2;t*=2;break;case"utf8":r=df(this,this.l,this.l+t);break;case"utf16le":t*=2,r=xx(this,this.l,this.l+t);break;case"wstr":return Qu.call(this,t,"dbcs");case"lpstr-ansi":r=nI(this,this.l),t=4+Cs(this,this.l);break;case"lpstr-cp":r=aI(this,this.l),t=4+Cs(this,this.l);break;case"lpwstr":r=oI(this,this.l),t=4+2*Cs(this,this.l);break;case"lpp4":t=4+Cs(this,this.l),r=cI(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Cs(this,this.l),r=dI(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Xl(this,this.l+t++))!==0;)i.push(Zf(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=ui(this,this.l+t))!==0;)i.push(Zf(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Xl(this,c),this.l=c+1,o=Qu.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Zf(ui(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Xl(this,c),this.l=c+1,o=Qu.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Zf(Xl(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=Xl(this,this.l),this.l++,n;case 2:return n=(e==="i"?wJ:ui)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Lo:CJ)(this,this.l),this.l+=4,n):(s=Cs(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=Ih(this,this.l):s=Ih([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=tI(this,this.l,t);break}}return this.l+=t,r}var kJ=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},IJ=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},DJ=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function PJ(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)DJ(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,kJ(this,e,this.l);break;case 8:if(n=8,r==="f"){TJ(this,e,this.l);break}case 16:break;case-4:n=4,IJ(this,e,this.l);break}return this.l+=n,this}function pI(t,e){var r=tI(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function wn(t,e){t.l=e,t.read_shift=Qu,t.chk=pI,t.write_shift=PJ}function ts(t,e){t.l+=e}function on(t){var e=go(t);return wn(e,0),e}function Di(t,e,r){if(t){var n,s,i;wn(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=Oh[o]||Oh[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;l=t.l+i;var u=c.f&&c.f(t,i,r);if(t.l=l,e(u,c,o))return}}}function Kv(){var t=[],e=Zt?256:2048,r=function(c){var u=on(c);return wn(u,0),u},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),Yi(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function Ju(t,e,r){var n=Fn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function cS(t,e,r){var n=Fn(t);return n.s=Ju(n.s,e.s,r),n.e=Ju(n.e,e.s,r),n}function Zu(t,e){if(t.cRel&&t.c<0)for(t=Fn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Fn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Mt(t);return!t.cRel&&t.cRel!=null&&(r=NJ(r)),!t.rRel&&t.rRel!=null&&(r=RJ(r)),r}function Eg(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+un(t.s.c)+":"+(t.e.cRel?"":"$")+un(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Nn(t.s.r)+":"+(t.e.rRel?"":"$")+Nn(t.e.r):Zu(t.s,e.biff)+":"+Zu(t.e,e.biff)}function Ex(t){return parseInt(FJ(t),10)-1}function Nn(t){return""+(t+1)}function RJ(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function FJ(t){return t.replace(/\$(\d+)$/,"$1")}function _x(t){for(var e=OJ(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function un(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function NJ(t){return t.replace(/^([A-Z])/,"$$$1")}function OJ(t){return t.replace(/^\$([A-Z])/,"$1")}function MJ(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ds(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Mt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Xc(t){var e=t.indexOf(":");return e==-1?{s:ds(t),e:ds(t)}:{s:ds(t.slice(0,e)),e:ds(t.slice(e+1))}}function sr(t,e){return typeof e>"u"||typeof e=="number"?sr(t.s,t.e):(typeof t!="string"&&(t=Mt(t)),typeof e!="string"&&(e=Mt(e)),t==e?t:t+":"+e)}function Gr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function uS(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=qs(t.z,r?ps(e):e)}catch{}try{return t.w=qs((t.XF||{}).numFmtId||(r?14:0),r?ps(e):e)}catch{return""+e}}function wi(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Tl[t.v]||t.v:e==null?uS(t,t.v):uS(t,e))}function bo(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function mI(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?ds(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Gr(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=u.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[f].length;++h)if(!(typeof e[f][h]>"u")){var p={v:e[f][h]},g=a+f,v=o+h;if(c.s.r>g&&(c.s.r=g),c.s.c>v&&(c.s.c=v),c.e.r<g&&(c.e.r=g),c.e.c<v&&(c.e.c=v),e[f][h]&&typeof e[f][h]=="object"&&!Array.isArray(e[f][h])&&!(e[f][h]instanceof Date))p=e[f][h];else if(Array.isArray(p.v)&&(p.f=e[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Ut[14],n.cellDates?(p.t="d",p.w=qs(p.z,ps(p.v))):(p.t="n",p.v=ps(p.v),p.w=qs(p.z,p.v))):p.t="s";if(s)i[g]||(i[g]=[]),i[g][v]&&i[g][v].z&&(p.z=i[g][v].z),i[g][v]=p;else{var y=Mt({c:v,r:g});i[y]&&i[y].z&&(p.z=i[y].z),i[y]=p}}}return c.s.c<1e7&&(i["!ref"]=sr(c)),i}function Yc(t,e){return mI(null,t,e)}function LJ(t){return t.read_shift(4,"i")}function Zn(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function BJ(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function bx(t,e){var r=t.l,n=t.read_shift(1),s=Zn(t),i=[],a={t:s,h:s};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(BJ(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}var UJ=bx;function Qs(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Sl(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var $J=Zn;function Sx(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var VJ=Zn,qv=Sx;function Ax(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?Ih([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Lo(e,0)>>2;return r?s/100:s}function gI(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var Al=gI;function Kn(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function HJ(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=Yo[s];c&&(e.rgb=Md(c));break;case 2:e.rgb=Md([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function jJ(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function vI(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function GJ(t){return vI(t,1)}function WJ(t){return vI(t,2)}var Tx=2,xs=3,t0=11,dS=12,Dh=19,r0=64,zJ=65,KJ=71,qJ=4108,XJ=4126,pn=80,yI=81,YJ=[pn,yI],QJ={1:{n:"CodePage",t:Tx},2:{n:"Category",t:pn},3:{n:"PresentationFormat",t:pn},4:{n:"ByteCount",t:xs},5:{n:"LineCount",t:xs},6:{n:"ParagraphCount",t:xs},7:{n:"SlideCount",t:xs},8:{n:"NoteCount",t:xs},9:{n:"HiddenCount",t:xs},10:{n:"MultimediaClipCount",t:xs},11:{n:"ScaleCrop",t:t0},12:{n:"HeadingPairs",t:qJ},13:{n:"TitlesOfParts",t:XJ},14:{n:"Manager",t:pn},15:{n:"Company",t:pn},16:{n:"LinksUpToDate",t:t0},17:{n:"CharacterCount",t:xs},19:{n:"SharedDoc",t:t0},22:{n:"HyperlinksChanged",t:t0},23:{n:"AppVersion",t:xs,p:"version"},24:{n:"DigSig",t:zJ},26:{n:"ContentType",t:pn},27:{n:"ContentStatus",t:pn},28:{n:"Language",t:pn},29:{n:"Version",t:pn},255:{},2147483648:{n:"Locale",t:Dh},2147483651:{n:"Behavior",t:Dh},1919054434:{}},JJ={1:{n:"CodePage",t:Tx},2:{n:"Title",t:pn},3:{n:"Subject",t:pn},4:{n:"Author",t:pn},5:{n:"Keywords",t:pn},6:{n:"Comments",t:pn},7:{n:"Template",t:pn},8:{n:"LastAuthor",t:pn},9:{n:"RevNumber",t:pn},10:{n:"EditTime",t:r0},11:{n:"LastPrinted",t:r0},12:{n:"CreatedDate",t:r0},13:{n:"ModifiedDate",t:r0},14:{n:"PageCount",t:xs},15:{n:"WordCount",t:xs},16:{n:"CharCount",t:xs},17:{n:"Thumbnail",t:KJ},18:{n:"Application",t:pn},19:{n:"DocSecurity",t:xs},255:{},2147483648:{n:"Locale",t:Dh},2147483651:{n:"Behavior",t:Dh},1919054434:{}},fS={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},ZJ=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function eZ(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var tZ=eZ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Yo=Fn(tZ),Tl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},xI={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},hS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function rZ(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function nZ(t){var e=rZ();if(!t||!t.match)return e;var r={};if((t.match(rs)||[]).forEach(function(n){var s=kt(n);switch(s[0].replace(dJ,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[hS[s.ContentType]]!==void 0&&e[hS[s.ContentType]].push(s.PartName);break}}),e.xmlns!==bJ.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}var Zl={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Xv(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function ed(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(rs)||[]).forEach(function(s){var i=kt(s);if(i[0]==="<Relationship"){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:Cu(i.Target,e);r[o]=a,n[i.Id]=a}}),r["!id"]=n,r}var sZ="application/vnd.oasis.opendocument.spreadsheet";function aZ(t,e){for(var r=yx(t),n,s;n=Nd.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=kt(n[0],!1),s.path=="/"&&s.type!==sZ)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var td=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],iZ=function(){for(var t=new Array(td.length),e=0;e<td.length;++e){var r=td[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function EI(t){var e={};t=Ar(t);for(var r=0;r<td.length;++r){var n=td[r],s=t.match(iZ[r]);s!=null&&s.length>0&&(e[n[1]]=ar(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=vn(e[n[1]]))}return e}var oZ=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function _I(t,e,r,n){var s=[];if(typeof t=="string")s=nS(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(u){return{v:u}}));var a=typeof e=="string"?nS(e,n).map(function(u){return u.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function lZ(t,e,r){var n={};return e||(e={}),t=Ar(t),oZ.forEach(function(s){var i=(t.match(Fd(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=ar(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var a=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));a&&a.length>0&&(n[s[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&_I(n.HeadingPairs,n.TitlesOfParts,e,r),e}var cZ=/<[^>]+>[^<]*/g;function uZ(t,e){var r={},n="",s=t.match(cZ);if(s)for(var i=0;i!=s.length;++i){var a=s[i],o=kt(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=ar(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=ar(u);break;case"bool":r[n]=Dr(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=vn(u);break;case"cy":case"error":r[n]=ar(u);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}var dZ={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},_g;function fZ(t,e,r){_g||(_g=mx(dZ)),e=_g[e]||e,t[e]=r}function wx(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function bI(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function SI(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function AI(t,e,r){return e===31?SI(t):bI(t,e,r)}function Yv(t,e,r){return AI(t,e,r===!1?0:4)}function hZ(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return AI(t,e,0)}function pZ(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(hs,""),t.l-s&2&&(t.l+=2)}return r}function mZ(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(hs,"");return r}function gZ(t){var e=t.l,r=Ph(t,yI);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=Ph(t,xs);return[r,n]}function vZ(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(gZ(t));return r}function pS(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),a=t.read_shift(4);n[i]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(hs,"").replace(wu,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function TI(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function yZ(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function Ph(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==dS&&n!==e&&YJ.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===dS?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return bI(t,n,4).replace(hs,"");case 31:return SI(t);case 64:return wx(t);case 65:return TI(t);case 71:return yZ(t);case 80:return Yv(t,n,!i.raw).replace(hs,"");case 81:return hZ(t,n).replace(hs,"");case 4108:return vZ(t);case 4126:case 4127:return n==4127?pZ(t):mZ(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function mS(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0,o=0,l=-1,c={};for(a=0;a!=s;++a){var u=t.read_shift(4),f=t.read_shift(4);i[a]=[u,f+r]}i.sort(function(E,x){return E[1]-x[1]});var h={};for(a=0;a!=s;++a){if(t.l!==i[a][1]){var p=!0;if(a>0&&e)switch(e[i[a-1][0]].t){case 2:t.l+2===i[a][1]&&(t.l+=2,p=!1);break;case 80:t.l<=i[a][1]&&(t.l=i[a][1],p=!1);break;case 4108:t.l<=i[a][1]&&(t.l=i[a][1],p=!1);break}if((!e||a==0)&&t.l<=i[a][1]&&(p=!1,t.l=i[a][1]),p)throw new Error("Read Error: Expected address "+i[a][1]+" at "+t.l+" :"+a)}if(e){var g=e[i[a][0]];if(h[g.n]=Ph(t,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ca(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(i[a][0]===1){if(o=h.CodePage=Ph(t,Tx),ca(o),l!==-1){var v=t.l;t.l=i[l][1],c=pS(t,o),t.l=v}}else if(i[a][0]===0){if(o===0){l=a,t.l=i[a+1][1];continue}c=pS(t,o)}else{var y=c[i[a][0]],b;switch(t[t.l]){case 65:t.l+=4,b=TI(t);break;case 30:t.l+=4,b=Yv(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,b=Yv(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,b=t.read_shift(4,"i");break;case 19:t.l+=4,b=t.read_shift(4);break;case 5:t.l+=4,b=t.read_shift(8,"f");break;case 11:t.l+=4,b=zr(t,4);break;case 64:t.l+=4,b=vn(wx(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[y]=b}}return t.l=r+n,h}function gS(t,e,r){var n=t.content;if(!n)return{};wn(n,0);var s,i,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==rr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(a=n.read_shift(16),l=n.read_shift(4));var f=mS(n,e),h={SystemIdentifier:c};for(var p in f)h[p]=f[p];if(h.FMTID=i,s===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var g;try{g=mS(n,null)}catch{}for(p in g)h[p]=g[p];return h.FMTID=[i,a],h}function Ui(t,e){return t.read_shift(e),null}function xZ(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function zr(t,e){return t.read_shift(e)===1}function en(t){return t.read_shift(2,"u")}function wI(t,e){return xZ(t,e,en)}function EZ(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function ff(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function _Z(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),a=0,o,l={};s&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",u=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*a),n&&(t.l+=o),l.t=u,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function dl(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function hf(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):dl(t,n,r)}function wl(t,e,r){if(r.biff>5)return hf(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function bZ(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function SZ(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(hs,"");return n&&(t.l+=24),s}function AZ(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(i>>1,"utf16le").replace(hs,"");return r+a}function TZ(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return SZ(t);case"0303000000000000c000000000000046":return AZ(t);default:throw new Error("Unsupported Moniker "+r)}}function n0(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(hs,""):"";return r}function wZ(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,a,o,l,c="",u,f;s&16&&(i=n0(t,r-t.l)),s&128&&(a=n0(t,r-t.l)),(s&257)===257&&(o=n0(t,r-t.l)),(s&257)===1&&(l=TZ(t,r-t.l)),s&8&&(c=n0(t,r-t.l)),s&32&&(u=t.read_shift(16)),s&64&&(f=wx(t)),t.l=r;var h=a||o||l||"";h&&c&&(h+="#"+c),h||(h="#"+c),s&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return u&&(p.guid=u),f&&(p.time=f),i&&(p.Tooltip=i),p}function CI(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function kI(t,e){var r=CI(t);return r[3]=0,r}function Ga(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function CZ(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function kZ(t,e,r){return e===0?"":wl(t,e,r)}function IZ(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function II(t){var e=t.read_shift(2),r=Ax(t);return[e,r]}function DZ(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=ff(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function Gp(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function DI(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var PZ=DI;function PI(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function RZ(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function FZ(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function $n(t){t.l+=2,t.l+=t.read_shift(2)}var NZ={0:$n,4:$n,5:$n,6:$n,7:FZ,8:$n,9:$n,10:$n,11:$n,12:$n,13:RZ,14:$n,15:$n,16:$n,17:$n,18:$n,19:$n,20:$n,21:PI};function OZ(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(NZ[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function s0(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function MZ(t,e){return e===0||t.read_shift(2),1200}function LZ(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=wl(t,0,r);return t.read_shift(e+n-t.l),s}function BZ(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function UZ(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var a=ff(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:s,dt:i,name:a}}function $Z(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0;a!=s&&t.l<r;++a)i.push(_Z(t));return i.Count=n,i.Unique=s,i}function VZ(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function HZ(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function jZ(t){var e=CZ(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function GZ(t){return t.read_shift(2),t.read_shift(4)}function vS(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function WZ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function zZ(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function KZ(){}function qZ(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=ff(t,0,r),n}function XZ(t){var e=Ga(t);return e.isst=t.read_shift(4),e}function YZ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=Ga(t);r.biff==2&&t.l++;var i=hf(t,n-t.l,r);return s.val=i,s}function QZ(t,e,r){var n=t.read_shift(2),s=wl(t,0,r);return[n,s]}var JZ=wl;function yS(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),a=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:i,c:o},e:{r:a,c:l}}}function ZZ(t){var e=t.read_shift(2),r=t.read_shift(2),n=II(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function eee(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(II(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:a,rkrec:i}}function tee(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:a,ixfe:i}}function ree(t,e,r,n){var s={},i=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=ZJ[o>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=a&15,s.dgRight=a>>4&15,s.dgTop=a>>8&15,s.dgBottom=a>>12&15,s.icvLeft=a>>16&127,s.icvRight=a>>23&127,s.grbitDiag=a>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function nee(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=ree(t,e,n.fStyle,r),n}function see(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function xS(t,e,r){var n=Ga(t);(r.biff==2||e==9)&&++t.l;var s=EZ(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function aee(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ga(t),s=Kn(t);return n.val=s,n}var ES=kZ;function iee(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var a=dl(t,i),o=[];n>t.l;)o.push(hf(t));return[i,s,a,o]}function _S(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=DZ(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var oee=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function bS(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=dl(t,a,r);s&32&&(c=oee[c.charCodeAt(0)]);var u=n-t.l;r&&r.biff==2&&--u;var f=n==t.l||o===0||!(u>0)?[]:Hne(t,u,r,o);return{chKey:i,Name:c,itab:l,rgce:f}}function RI(t,e,r){if(r.biff<8)return lee(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(IZ(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function lee(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=ff(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function cee(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=dl(t,n,r),a=dl(t,s,r);return[i,a]}function uee(t,e,r){var n=DI(t);t.l++;var s=t.read_shift(1);return e-=8,[jne(t,e,r),s,n]}function SS(t,e,r){var n=PZ(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,$ne(t,e,r)]}function dee(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function fee(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=wl(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,a,i]}}function hee(t,e,r){return fee(t,e,r)}function pee(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(Gp(t));return r}function mee(t,e,r){if(r&&r.biff<8)return vee(t,e,r);var n=PI(t),s=OZ(t,e-22,n[1]);return{cmo:n,ft:s}}var gee={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function vee(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((gee[n]||ts)(t,e,r)),{cmo:[s,n,i],ft:a}}function yee(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:a=bZ(t,6,r);var o=t.read_shift(2);t.read_shift(2),en(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var u=t[t.l],f=dl(t,t.lens[c+1]-t.lens[c]-1);if(s+=f,s.length>=(u?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function xee(t,e){var r=Gp(t);t.l+=16;var n=wZ(t,e-24);return[r,n]}function Eee(t,e){t.read_shift(2);var r=Gp(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(hs,""),[r,n]}function _ee(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=fS[r]||r,r=t.read_shift(2),e[1]=fS[r]||r,e}function bee(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(kI(t));return r}function See(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(kI(t));return r}function Aee(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function FI(t,e,r){if(!r.cellStyles)return ts(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function Tee(t,e){var r={};return e<32||(t.l+=16,r.header=Kn(t),r.footer=Kn(t),t.l+=2),r}function wee(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}var Cee=Ga,kee=wI,Iee=hf;function Dee(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function Pee(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ga(t);++t.l;var s=wl(t,e-7,r);return n.t="str",n.val=s,n}function Ree(t){var e=Ga(t);++t.l;var r=Kn(t);return e.t="n",e.val=r,e}function Fee(t){var e=Ga(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function Nee(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Oee(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Mee(t,e,r){var n=t.l+e,s=Ga(t),i=t.read_shift(2),a=dl(t,i,r);return t.l=n,s.t="str",s.val=a,s}var Lee=[2,3,48,49,131,139,140,245],AS=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=mx({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],u=go(1);switch(l.type){case"base64":u=la(Fs(o));break;case"binary":u=la(o);break;case"buffer":case"array":u=o;break}wn(u,0);var f=u.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,y=521;f==2&&(v=u.read_shift(2)),u.l+=3,f!=2&&(v=u.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(y=u.read_shift(2));var b=u.read_shift(2),E=l.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(E=t[u[u.l]]),u.l+=1,u.l+=2),g&&(u.l+=36);for(var x=[],w={},R=Math.min(u.length,f==2?521:y-10-(p?264:0)),P=g?32:11;u.l<R&&u[u.l]!=13;)switch(w={},w.name=Pd.utils.decode(E,u.slice(u.l,u.l+P)).replace(/[\u0000\r\n].*$/g,""),u.l+=P,w.type=String.fromCharCode(u.read_shift(1)),f!=2&&!g&&(w.offset=u.read_shift(4)),w.len=u.read_shift(1),f==2&&(w.offset=u.read_shift(2)),w.dec=u.read_shift(1),w.name.length&&x.push(w),f!=2&&(u.l+=g?13:14),w.type){case"B":(!p||w.len!=8)&&l.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(u[u.l]!==13&&(u.l=y-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=y;var S=0,_=0;for(c[0]=[],_=0;_!=x.length;++_)c[0][_]=x[_].name;for(;v-- >0;){if(u[u.l]===42){u.l+=b;continue}for(++u.l,c[++S]=[],_=0,_=0;_!=x.length;++_){var m=u.slice(u.l,u.l+x[_].len);u.l+=x[_].len,wn(m,0);var A=Pd.utils.decode(E,m);switch(x[_].type){case"C":A.trim().length&&(c[S][_]=A.replace(/\s+$/,""));break;case"D":A.length===8?c[S][_]=new Date(+A.slice(0,4),+A.slice(4,6)-1,+A.slice(6,8)):c[S][_]=A;break;case"F":c[S][_]=parseFloat(A.trim());break;case"+":case"I":c[S][_]=g?m.read_shift(-4,"i")^2147483648:m.read_shift(4,"i");break;case"L":switch(A.trim().toUpperCase()){case"Y":case"T":c[S][_]=!0;break;case"N":case"F":c[S][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+A+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));c[S][_]="##MEMO##"+(g?parseInt(A.trim(),10):m.read_shift(4));break;case"N":A=A.replace(/\u0000/g,"").trim(),A&&A!="."&&(c[S][_]=+A||0);break;case"@":c[S][_]=new Date(m.read_shift(-8,"f")-621356832e5);break;case"T":c[S][_]=new Date((m.read_shift(4)-2440588)*864e5+m.read_shift(4));break;case"Y":c[S][_]=m.read_shift(4,"i")/1e4+m.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[S][_]=-m.read_shift(-8,"f");break;case"B":if(p&&x[_].len==8){c[S][_]=m.read_shift(8,"f");break}case"G":case"P":m.l+=x[_].len;break;case"0":if(x[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+x[_].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=x,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=Yc(r(o,c),c);return u["!cols"]=c.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete c.DBF,u}function s(o,l){try{return bo(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&ca(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Kv(),f=r1(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=o["!cols"]||[],v=0,y=0,b=0,E=1;for(v=0;v<h.length;++v){if(((g[v]||{}).DBF||{}).name){h[v]=g[v].DBF.name,++b;continue}if(h[v]!=null){if(++b,typeof h[v]=="number"&&(h[v]=h[v].toString(10)),typeof h[v]!="string")throw new Error("DBF Invalid column name "+h[v]+" |"+typeof h[v]+"|");if(h.indexOf(h[v])!==v){for(y=0;y<1024;++y)if(h.indexOf(h[v]+"_"+y)==-1){h[v]+="_"+y;break}}}}var x=Gr(o["!ref"]),w=[],R=[],P=[];for(v=0;v<=x.e.c-x.s.c;++v){var S="",_="",m=0,A=[];for(y=0;y<p.length;++y)p[y][v]!=null&&A.push(p[y][v]);if(A.length==0||h[v]==null){w[v]="?";continue}for(y=0;y<A.length;++y){switch(typeof A[y]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=A[y]instanceof Date?"D":"C";break;default:_="C"}m=Math.max(m,String(A[y]).length),S=S&&S!=_?"C":_}m>250&&(m=250),_=((g[v]||{}).DBF||{}).type,_=="C"&&g[v].DBF.len>m&&(m=g[v].DBF.len),S=="B"&&_=="N"&&(S="N",P[v]=g[v].DBF.dec,m=g[v].DBF.len),R[v]=S=="C"||_=="N"?m:i[S]||0,E+=R[v],w[v]=S}var k=u.next(32);for(k.write_shift(4,318902576),k.write_shift(4,p.length),k.write_shift(2,296+32*b),k.write_shift(2,E),v=0;v<4;++v)k.write_shift(4,0);for(k.write_shift(4,0|(+e[Rk]||3)<<8),v=0,y=0;v<h.length;++v)if(h[v]!=null){var I=u.next(32),C=(h[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,C,"sbcs"),I.write_shift(1,w[v]=="?"?"C":w[v],"sbcs"),I.write_shift(4,y),I.write_shift(1,R[v]||i[w[v]]||0),I.write_shift(1,P[v]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),y+=R[v]||i[w[v]]||0}var M=u.next(264);for(M.write_shift(4,13),v=0;v<65;++v)M.write_shift(4,0);for(v=0;v<p.length;++v){var D=u.next(E);for(D.write_shift(1,0),y=0;y<h.length;++y)if(h[y]!=null)switch(w[y]){case"L":D.write_shift(1,p[v][y]==null?63:p[v][y]?84:70);break;case"B":D.write_shift(8,p[v][y]||0,"f");break;case"N":var F="0";for(typeof p[v][y]=="number"&&(F=p[v][y].toFixed(P[y]||0)),b=0;b<R[y]-F.length;++b)D.write_shift(1,32);D.write_shift(1,F,"sbcs");break;case"D":p[v][y]?(D.write_shift(4,("0000"+p[v][y].getFullYear()).slice(-4),"sbcs"),D.write_shift(2,("00"+(p[v][y].getMonth()+1)).slice(-2),"sbcs"),D.write_shift(2,("00"+p[v][y].getDate()).slice(-2),"sbcs")):D.write_shift(8,"00000000","sbcs");break;case"C":var N=String(p[v][y]!=null?p[v][y]:"").slice(0,R[y]);for(D.write_shift(1,N,"sbcs"),b=0;b<R[y]-N.length;++b)D.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}}(),Bee=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+$a(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=t[p];return typeof g=="number"?$b(g):g},n=function(h,p,g){var v=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return v==59?h:$b(v)};t["|"]=254;function s(h,p){switch(p.type){case"base64":return i(Fs(h),p);case"binary":return i(h,p);case"buffer":return i(Zt&&Buffer.isBuffer(h)?h.toString("binary"):bl(h),p);case"array":return i(ul(h),p)}throw new Error("Unrecognized type "+p.type)}function i(h,p){var g=h.split(/[\n\r]+/),v=-1,y=-1,b=0,E=0,x=[],w=[],R=null,P={},S=[],_=[],m=[],A=0,k;for(+p.codepage>=0&&ca(+p.codepage);b!==g.length;++b){A=0;var I=g[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),C=I.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),M=C[0],D;if(I.length>0)switch(M){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":C[1].charAt(0)=="P"&&w.push(I.slice(3).replace(/;;/g,";"));break;case"C":var F=!1,N=!1,L=!1,O=!1,z=-1,H=-1;for(E=1;E<C.length;++E)switch(C[E].charAt(0)){case"A":break;case"X":y=parseInt(C[E].slice(1))-1,N=!0;break;case"Y":for(v=parseInt(C[E].slice(1))-1,N||(y=0),k=x.length;k<=v;++k)x[k]=[];break;case"K":D=C[E].slice(1),D.charAt(0)==='"'?D=D.slice(1,D.length-1):D==="TRUE"?D=!0:D==="FALSE"?D=!1:isNaN(ha(D))?isNaN(Oc(D).getDate())||(D=vn(D)):(D=ha(D),R!==null&&qc(R)&&(D=jp(D))),F=!0;break;case"E":O=!0;var V=yc(C[E].slice(1),{r:v,c:y});x[v][y]=[x[v][y],V];break;case"S":L=!0,x[v][y]=[x[v][y],"S5S"];break;case"G":break;case"R":z=parseInt(C[E].slice(1))-1;break;case"C":H=parseInt(C[E].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}if(F&&(x[v][y]&&x[v][y].length==2?x[v][y][0]=D:x[v][y]=D,R=null),L){if(O)throw new Error("SYLK shared formula cannot have own formula");var W=z>-1&&x[z][H];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");x[v][y][1]=jI(W[1],{r:v-z,c:y-H})}break;case"F":var G=0;for(E=1;E<C.length;++E)switch(C[E].charAt(0)){case"X":y=parseInt(C[E].slice(1))-1,++G;break;case"Y":for(v=parseInt(C[E].slice(1))-1,k=x.length;k<=v;++k)x[k]=[];break;case"M":A=parseInt(C[E].slice(1))/20;break;case"F":break;case"G":break;case"P":R=w[parseInt(C[E].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(m=C[E].slice(1).split(" "),k=parseInt(m[0],10);k<=parseInt(m[1],10);++k)A=parseInt(m[2],10),_[k-1]=A===0?{hidden:!0}:{wch:A},Mc(_[k-1]);break;case"C":y=parseInt(C[E].slice(1))-1,_[y]||(_[y]={});break;case"R":v=parseInt(C[E].slice(1))-1,S[v]||(S[v]={}),A>0?(S[v].hpt=A,S[v].hpx=Ld(A)):A===0&&(S[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}G<1&&(R=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}}return S.length>0&&(P["!rows"]=S),_.length>0&&(P["!cols"]=_),p&&p.sheetRows&&(x=x.slice(0,p.sheetRows)),[x,P]}function a(h,p){var g=s(h,p),v=g[0],y=g[1],b=Yc(v,p);return $a(y).forEach(function(E){b[E]=y[E]}),b}function o(h,p){return bo(a(h,p),p)}function l(h,p,g,v){var y="C;Y"+(g+1)+";X"+(v+1)+";K";switch(h.t){case"n":y+=h.v||0,h.f&&!h.F&&(y+=";E"+Are(h.f,{r:g,c:v}));break;case"b":y+=h.v?"TRUE":"FALSE";break;case"e":y+=h.w||h.v;break;case"d":y+='"'+(h.w||h.v)+'"';break;case"s":y+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function c(h,p){p.forEach(function(g,v){var y="F;W"+(v+1)+" "+(v+1)+" ";g.hidden?y+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Fh(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=Nh(g.wpx)),typeof g.wch=="number"&&(y+=Math.round(g.wch))),y.charAt(y.length-1)!=" "&&h.push(y)})}function u(h,p){p.forEach(function(g,v){var y="F;";g.hidden?y+="M0;":g.hpt?y+="M"+20*g.hpt+";":g.hpx&&(y+="M"+20*$I(g.hpx)+";"),y.length>2&&h.push(y+"R"+(v+1))})}function f(h,p){var g=["ID;PWXL;N;E"],v=[],y=Gr(h["!ref"]),b,E=Array.isArray(h),x=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&c(g,h["!cols"]),h["!rows"]&&u(g,h["!rows"]),g.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var w=y.s.r;w<=y.e.r;++w)for(var R=y.s.c;R<=y.e.c;++R){var P=Mt({r:w,c:R});b=E?(h[w]||[])[R]:h[P],!(!b||b.v==null&&(!b.f||b.F))&&v.push(l(b,h,w,R))}return g.join(x)+x+v.join(x)+x+"E"+x}return{to_workbook:o,to_sheet:a,from_sheet:f}}(),Uee=function(){function t(i,a){switch(a.type){case"base64":return e(Fs(i),a);case"binary":return e(i,a);case"buffer":return e(Zt&&Buffer.isBuffer(i)?i.toString("binary"):bl(i),a);case"array":return e(ul(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,u=0,f=[];u!==o.length;++u){if(o[u].trim()==="BOT"){f[++l]=[],c=0;continue}if(!(l<0)){var h=o[u].trim().split(","),p=h[0],g=h[1];++u;for(var v=o[u]||"";(v.match(/["]/g)||[]).length&1&&u<o.length-1;)v+=`
`+o[++u];switch(v=v.trim(),+p){case-1:if(v==="BOT"){f[++l]=[],c=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[l][c]=!0:v==="FALSE"?f[l][c]=!1:isNaN(ha(g))?isNaN(Oc(g).getDate())?f[l][c]=g:f[l][c]=vn(g):f[l][c]=ha(g),++c;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[l][c++]=v!==""?v:null;break}if(v==="EOD")break}}return a&&a.sheetRows&&(f=f.slice(0,a.sheetRows)),f}function r(i,a){return Yc(t(i,a),a)}function n(i,a){return bo(r(i,a),a)}var s=function(){var i=function(l,c,u,f,h){l.push(c),l.push(u+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},a=function(l,c,u,f){l.push(c+","+u),l.push(c==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var c=[],u=Gr(l["!ref"]),f,h=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,u.e.r-u.s.r+1,""),i(c,"TUPLES",0,u.e.c-u.s.c+1,""),i(c,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){a(c,-1,0,"BOT");for(var g=u.s.c;g<=u.e.c;++g){var v=Mt({r:p,c:g});if(f=h?(l[p]||[])[g]:l[v],!f){a(c,1,0,"");continue}switch(f.t){case"n":var y=f.w;!y&&f.v!=null&&(y=f.v),y==null?f.f&&!f.F?a(c,1,0,"="+f.f):a(c,1,0,""):a(c,0,y,"V");break;case"b":a(c,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=qs(f.z||Ut[14],ps(vn(f.v)))),a(c,0,f.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var b=`\r
`,E=c.join(b);return E}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),$ee=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,v=-1,y=0,b=[];y!==p.length;++y){var E=p[y].trim().split(":");if(E[0]==="cell"){var x=ds(E[1]);if(b.length<=x.r)for(g=b.length;g<=x.r;++g)b[g]||(b[g]=[]);switch(g=x.r,v=x.c,E[2]){case"t":b[g][v]=t(E[3]);break;case"v":b[g][v]=+E[3];break;case"vtf":var w=E[E.length-1];case"vtc":switch(E[3]){case"nl":b[g][v]=!!+E[4];break;default:b[g][v]=+E[4];break}E[2]=="vtf"&&(b[g][v]=[b[g][v],w])}}}return h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),b}function n(f,h){return Yc(r(f,h),h)}function s(f,h){return bo(n(f,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,v="",y=Xc(f["!ref"]),b=Array.isArray(f),E=y.s.r;E<=y.e.r;++E)for(var x=y.s.c;x<=y.e.c;++x)if(v=Mt({r:E,c:x}),g=b?(f[E]||[])[x]:f[v],!(!g||g.v==null||g.t==="z")){switch(p=["cell",v,"t"],g.t){case"s":case"str":p.push(e(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=e(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=e(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var w=ps(vn(g.v));p[2]="vtc",p[3]="nd",p[4]=""+w,p[5]=g.w||qs(g.z||Ut[14],w);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(f){return[i,a,o,a,c(f),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),Od=function(){function t(u,f,h,p,g){g.raw?f[h][p]=u:u===""||(u==="TRUE"?f[h][p]=!0:u==="FALSE"?f[h][p]=!1:isNaN(ha(u))?isNaN(Oc(u).getDate())?f[h][p]=u:f[h][p]=vn(u):f[h][p]=ha(u))}function e(u,f){var h=f||{},p=[];if(!u||u.length===0)return p;for(var g=u.split(/[\r\n]/),v=g.length-1;v>=0&&g[v].length===0;)--v;for(var y=10,b=0,E=0;E<=v;++E)b=g[E].indexOf(" "),b==-1?b=g[E].length:b++,y=Math.max(y,b);for(E=0;E<=v;++E){p[E]=[];var x=0;for(t(g[E].slice(0,y).trim(),p,E,x,h),x=1;x<=(g[E].length-y)/10+1;++x)t(g[E].slice(y+(x-1)*10,y+x*10).trim(),p,E,x,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var f={},h=!1,p=0,g=0;p<u.length;++p)(g=u.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(v,y){return v[0]-y[0]||n[v[1]]-n[y[1]]}),r[g.pop()[1]]||44}function i(u,f){var h=f||{},p="",g=h.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):h&&h.FS?p=h.FS:p=s(u.slice(0,1024));var y=0,b=0,E=0,x=0,w=0,R=p.charCodeAt(0),P=!1,S=0,_=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var m=h.dateNF!=null?QQ(h.dateNF):null;function A(){var k=u.slice(x,w),I={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)I.t="z";else if(h.raw)I.t="s",I.v=k;else if(k.trim().length===0)I.t="s",I.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(I.t="s",I.v=k.slice(2,-1).replace(/""/g,'"')):wre(k)?(I.t="n",I.f=k.slice(1)):(I.t="s",I.v=k);else if(k=="TRUE")I.t="b",I.v=!0;else if(k=="FALSE")I.t="b",I.v=!1;else if(!isNaN(E=ha(k)))I.t="n",h.cellText!==!1&&(I.w=k),I.v=E;else if(!isNaN(Oc(k).getDate())||m&&k.match(m)){I.z=h.dateNF||Ut[14];var C=0;m&&k.match(m)&&(k=JQ(k,h.dateNF,k.match(m)||[]),C=1),h.cellDates?(I.t="d",I.v=vn(k,C)):(I.t="n",I.v=ps(vn(k,C))),h.cellText!==!1&&(I.w=qs(I.z,I.v instanceof Date?ps(I.v):I.v)),h.cellNF||delete I.z}else I.t="s",I.v=k;if(I.t=="z"||(h.dense?(g[y]||(g[y]=[]),g[y][b]=I):g[Mt({c:b,r:y})]=I),x=w+1,_=u.charCodeAt(x),v.e.c<b&&(v.e.c=b),v.e.r<y&&(v.e.r=y),S==R)++b;else if(b=0,++y,h.sheetRows&&h.sheetRows<=y)return!0}e:for(;w<u.length;++w)switch(S=u.charCodeAt(w)){case 34:_===34&&(P=!P);break;case R:case 10:case 13:if(!P&&A())break e;break}return w-x>0&&A(),g["!ref"]=sr(v),g}function a(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,f):Yc(e(u,f),f)}function o(u,f){var h="",p=f.type=="string"?[0,0,0,0]:Nx(u,f);switch(f.type){case"base64":h=Fs(u);break;case"binary":h=u;break;case"buffer":f.codepage==65001?h=u.toString("utf8"):f.codepage&&typeof Pd<"u"||(h=Zt&&Buffer.isBuffer(u)?u.toString("binary"):bl(u));break;case"array":h=ul(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Ar(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ar(h):f.type=="binary"&&typeof Pd<"u",h.slice(0,19)=="socialcalc:version:"?$ee.to_sheet(f.type=="string"?h:Ar(h),f):a(h,f)}function l(u,f){return bo(o(u,f),f)}function c(u){for(var f=[],h=Gr(u["!ref"]),p,g=Array.isArray(u),v=h.s.r;v<=h.e.r;++v){for(var y=[],b=h.s.c;b<=h.e.c;++b){var E=Mt({r:v,c:b});if(p=g?(u[v]||[])[b]:u[E],!p||p.v==null){y.push("          ");continue}for(var x=(p.w||(wi(p),p.w)||"").slice(0,10);x.length<10;)x+=" ";y.push(x+(b===0?" ":""))}f.push(y.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function Vee(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=Bee.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Od.to_workbook(t,e)}}var rd=function(){function t(V,W,G){if(V){wn(V,V.l||0);for(var re=G.Enum||z;V.l<V.length;){var de=V.read_shift(2),ae=re[de]||re[65535],ce=V.read_shift(2),te=V.l+ce,Z=ae.f&&ae.f(V,ce,G);if(V.l=te,W(Z,ae,de))return}}}function e(V,W){switch(W.type){case"base64":return r(la(Fs(V)),W);case"binary":return r(la(V),W);case"buffer":case"array":return r(V,W)}throw"Unsupported type "+W.type}function r(V,W){if(!V)return V;var G=W||{},re=G.dense?[]:{},de="Sheet1",ae="",ce=0,te={},Z=[],xe=[],J={s:{r:0,c:0},e:{r:0,c:0}},Y=G.sheetRows||0;if(V[2]==0&&(V[3]==8||V[3]==9)&&V.length>=16&&V[14]==5&&V[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(V[2]==2)G.Enum=z,t(V,function(ie,ee,ge){switch(ge){case 0:G.vers=ie,ie>=4096&&(G.qpro=!0);break;case 6:J=ie;break;case 204:ie&&(ae=ie);break;case 222:ae=ie;break;case 15:case 51:G.qpro||(ie[1].v=ie[1].v.slice(1));case 13:case 14:case 16:ge==14&&(ie[2]&112)==112&&(ie[2]&15)>1&&(ie[2]&15)<15&&(ie[1].z=G.dateNF||Ut[14],G.cellDates&&(ie[1].t="d",ie[1].v=jp(ie[1].v))),G.qpro&&ie[3]>ce&&(re["!ref"]=sr(J),te[de]=re,Z.push(de),re=G.dense?[]:{},J={s:{r:0,c:0},e:{r:0,c:0}},ce=ie[3],de=ae||"Sheet"+(ce+1),ae="");var Te=G.dense?(re[ie[0].r]||[])[ie[0].c]:re[Mt(ie[0])];if(Te){Te.t=ie[1].t,Te.v=ie[1].v,ie[1].z!=null&&(Te.z=ie[1].z),ie[1].f!=null&&(Te.f=ie[1].f);break}G.dense?(re[ie[0].r]||(re[ie[0].r]=[]),re[ie[0].r][ie[0].c]=ie[1]):re[Mt(ie[0])]=ie[1];break}},G);else if(V[2]==26||V[2]==14)G.Enum=H,V[2]==14&&(G.qpro=!0,V.l=0),t(V,function(ie,ee,ge){switch(ge){case 204:de=ie;break;case 22:ie[1].v=ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ie[3]>ce&&(re["!ref"]=sr(J),te[de]=re,Z.push(de),re=G.dense?[]:{},J={s:{r:0,c:0},e:{r:0,c:0}},ce=ie[3],de="Sheet"+(ce+1)),Y>0&&ie[0].r>=Y)break;G.dense?(re[ie[0].r]||(re[ie[0].r]=[]),re[ie[0].r][ie[0].c]=ie[1]):re[Mt(ie[0])]=ie[1],J.e.c<ie[0].c&&(J.e.c=ie[0].c),J.e.r<ie[0].r&&(J.e.r=ie[0].r);break;case 27:ie[14e3]&&(xe[ie[14e3][0]]=ie[14e3][1]);break;case 1537:xe[ie[0]]=ie[1],ie[0]==ce&&(de=ie[1]);break}},G);else throw new Error("Unrecognized LOTUS BOF "+V[2]);if(re["!ref"]=sr(J),te[ae||de]=re,Z.push(ae||de),!xe.length)return{SheetNames:Z,Sheets:te};for(var Q={},fe=[],ye=0;ye<xe.length;++ye)te[Z[ye]]?(fe.push(xe[ye]||Z[ye]),Q[xe[ye]]=te[xe[ye]]||te[Z[ye]]):(fe.push(xe[ye]),Q[xe[ye]]={"!ref":"A1"});return{SheetNames:fe,Sheets:Q}}function n(V,W){var G=W||{};if(+G.codepage>=0&&ca(+G.codepage),G.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Kv(),de=Gr(V["!ref"]),ae=Array.isArray(V),ce=[];ta(re,0,i(1030)),ta(re,6,l(de));for(var te=Math.min(de.e.r,8191),Z=de.s.r;Z<=te;++Z)for(var xe=Nn(Z),J=de.s.c;J<=de.e.c;++J){Z===de.s.r&&(ce[J]=un(J));var Y=ce[J]+xe,Q=ae?(V[Z]||[])[J]:V[Y];if(!(!Q||Q.t=="z"))if(Q.t=="n")(Q.v|0)==Q.v&&Q.v>=-32768&&Q.v<=32767?ta(re,13,p(Z,J,Q.v)):ta(re,14,v(Z,J,Q.v));else{var fe=wi(Q);ta(re,15,f(Z,J,fe.slice(0,239)))}}return ta(re,1),re.end()}function s(V,W){var G=W||{};if(+G.codepage>=0&&ca(+G.codepage),G.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Kv();ta(re,0,a(V));for(var de=0,ae=0;de<V.SheetNames.length;++de)(V.Sheets[V.SheetNames[de]]||{})["!ref"]&&ta(re,27,O(V.SheetNames[de],ae++));var ce=0;for(de=0;de<V.SheetNames.length;++de){var te=V.Sheets[V.SheetNames[de]];if(!(!te||!te["!ref"])){for(var Z=Gr(te["!ref"]),xe=Array.isArray(te),J=[],Y=Math.min(Z.e.r,8191),Q=Z.s.r;Q<=Y;++Q)for(var fe=Nn(Q),ye=Z.s.c;ye<=Z.e.c;++ye){Q===Z.s.r&&(J[ye]=un(ye));var ie=J[ye]+fe,ee=xe?(te[Q]||[])[ye]:te[ie];if(!(!ee||ee.t=="z"))if(ee.t=="n")ta(re,23,A(Q,ye,ce,ee.v));else{var ge=wi(ee);ta(re,22,S(Q,ye,ce,ge.slice(0,239)))}}++ce}}return ta(re,1),re.end()}function i(V){var W=on(2);return W.write_shift(2,V),W}function a(V){var W=on(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var G=0,re=0,de=0,ae=0;ae<V.SheetNames.length;++ae){var ce=V.SheetNames[ae],te=V.Sheets[ce];if(!(!te||!te["!ref"])){++de;var Z=Xc(te["!ref"]);G<Z.e.r&&(G=Z.e.r),re<Z.e.c&&(re=Z.e.c)}}return G>8191&&(G=8191),W.write_shift(2,G),W.write_shift(1,de),W.write_shift(1,re),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(V,W,G){var re={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&G.qpro?(re.s.c=V.read_shift(1),V.l++,re.s.r=V.read_shift(2),re.e.c=V.read_shift(1),V.l++,re.e.r=V.read_shift(2),re):(re.s.c=V.read_shift(2),re.s.r=V.read_shift(2),W==12&&G.qpro&&(V.l+=2),re.e.c=V.read_shift(2),re.e.r=V.read_shift(2),W==12&&G.qpro&&(V.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function l(V){var W=on(8);return W.write_shift(2,V.s.c),W.write_shift(2,V.s.r),W.write_shift(2,V.e.c),W.write_shift(2,V.e.r),W}function c(V,W,G){var re=[{c:0,r:0},{t:"n",v:0},0,0];return G.qpro&&G.vers!=20768?(re[0].c=V.read_shift(1),re[3]=V.read_shift(1),re[0].r=V.read_shift(2),V.l+=2):(re[2]=V.read_shift(1),re[0].c=V.read_shift(2),re[0].r=V.read_shift(2)),re}function u(V,W,G){var re=V.l+W,de=c(V,W,G);if(de[1].t="s",G.vers==20768){V.l++;var ae=V.read_shift(1);return de[1].v=V.read_shift(ae,"utf8"),de}return G.qpro&&V.l++,de[1].v=V.read_shift(re-V.l,"cstr"),de}function f(V,W,G){var re=on(7+G.length);re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,V),re.write_shift(1,39);for(var de=0;de<re.length;++de){var ae=G.charCodeAt(de);re.write_shift(1,ae>=128?95:ae)}return re.write_shift(1,0),re}function h(V,W,G){var re=c(V,W,G);return re[1].v=V.read_shift(2,"i"),re}function p(V,W,G){var re=on(7);return re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,V),re.write_shift(2,G,"i"),re}function g(V,W,G){var re=c(V,W,G);return re[1].v=V.read_shift(8,"f"),re}function v(V,W,G){var re=on(13);return re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,V),re.write_shift(8,G,"f"),re}function y(V,W,G){var re=V.l+W,de=c(V,W,G);if(de[1].v=V.read_shift(8,"f"),G.qpro)V.l=re;else{var ae=V.read_shift(2);w(V.slice(V.l,V.l+ae),de),V.l+=ae}return de}function b(V,W,G){var re=W&32768;return W&=-32769,W=(re?V:0)+(W>=8192?W-16384:W),(re?"":"$")+(G?un(W):Nn(W))}var E={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},x=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(V,W){wn(V,0);for(var G=[],re=0,de="",ae="",ce="",te="";V.l<V.length;){var Z=V[V.l++];switch(Z){case 0:G.push(V.read_shift(8,"f"));break;case 1:ae=b(W[0].c,V.read_shift(2),!0),de=b(W[0].r,V.read_shift(2),!1),G.push(ae+de);break;case 2:{var xe=b(W[0].c,V.read_shift(2),!0),J=b(W[0].r,V.read_shift(2),!1);ae=b(W[0].c,V.read_shift(2),!0),de=b(W[0].r,V.read_shift(2),!1),G.push(xe+J+":"+ae+de)}break;case 3:if(V.l<V.length){console.error("WK1 premature formula end");return}break;case 4:G.push("("+G.pop()+")");break;case 5:G.push(V.read_shift(2));break;case 6:{for(var Y="";Z=V[V.l++];)Y+=String.fromCharCode(Z);G.push('"'+Y.replace(/"/g,'""')+'"')}break;case 8:G.push("-"+G.pop());break;case 23:G.push("+"+G.pop());break;case 22:G.push("NOT("+G.pop()+")");break;case 20:case 21:te=G.pop(),ce=G.pop(),G.push(["AND","OR"][Z-20]+"("+ce+","+te+")");break;default:if(Z<32&&x[Z])te=G.pop(),ce=G.pop(),G.push(ce+x[Z]+te);else if(E[Z]){if(re=E[Z][1],re==69&&(re=V[V.l++]),re>G.length){console.error("WK1 bad formula parse 0x"+Z.toString(16)+":|"+G.join("|")+"|");return}var Q=G.slice(-re);G.length-=re,G.push(E[Z][0]+"("+Q.join(",")+")")}else return Z<=7?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=24?console.error("WK1 unsupported op "+Z.toString(16)):Z<=30?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=115?console.error("WK1 unsupported function opcode "+Z.toString(16)):console.error("WK1 unrecognized opcode "+Z.toString(16))}}G.length==1?W[1].f=""+G[0]:console.error("WK1 bad formula parse |"+G.join("|")+"|")}function R(V){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=V.read_shift(2),W[3]=V[V.l++],W[0].c=V[V.l++],W}function P(V,W){var G=R(V);return G[1].t="s",G[1].v=V.read_shift(W-4,"cstr"),G}function S(V,W,G,re){var de=on(6+re.length);de.write_shift(2,V),de.write_shift(1,G),de.write_shift(1,W),de.write_shift(1,39);for(var ae=0;ae<re.length;++ae){var ce=re.charCodeAt(ae);de.write_shift(1,ce>=128?95:ce)}return de.write_shift(1,0),de}function _(V,W){var G=R(V);G[1].v=V.read_shift(2);var re=G[1].v>>1;if(G[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return G[1].v=re,G}function m(V,W){var G=R(V),re=V.read_shift(4),de=V.read_shift(4),ae=V.read_shift(2);if(ae==65535)return re===0&&de===3221225472?(G[1].t="e",G[1].v=15):re===0&&de===3489660928?(G[1].t="e",G[1].v=42):G[1].v=0,G;var ce=ae&32768;return ae=(ae&32767)-16446,G[1].v=(1-ce*2)*(de*Math.pow(2,ae+32)+re*Math.pow(2,ae)),G}function A(V,W,G,re){var de=on(14);if(de.write_shift(2,V),de.write_shift(1,G),de.write_shift(1,W),re==0)return de.write_shift(4,0),de.write_shift(4,0),de.write_shift(2,65535),de;var ae=0,ce=0,te=0,Z=0;return re<0&&(ae=1,re=-re),ce=Math.log2(re)|0,re/=Math.pow(2,ce-31),Z=re>>>0,Z&2147483648||(re/=2,++ce,Z=re>>>0),re-=Z,Z|=2147483648,Z>>>=0,re*=Math.pow(2,32),te=re>>>0,de.write_shift(4,te),de.write_shift(4,Z),ce+=16383+(ae?32768:0),de.write_shift(2,ce),de}function k(V,W){var G=m(V);return V.l+=W-14,G}function I(V,W){var G=R(V),re=V.read_shift(4);return G[1].v=re>>6,G}function C(V,W){var G=R(V),re=V.read_shift(8,"f");return G[1].v=re,G}function M(V,W){var G=C(V);return V.l+=W-10,G}function D(V,W){return V[V.l+W-1]==0?V.read_shift(W,"cstr"):""}function F(V,W){var G=V[V.l++];G>W-1&&(G=W-1);for(var re="";re.length<G;)re+=String.fromCharCode(V[V.l++]);return re}function N(V,W,G){if(!(!G.qpro||W<21)){var re=V.read_shift(1);V.l+=17,V.l+=1,V.l+=2;var de=V.read_shift(W-21,"cstr");return[re,de]}}function L(V,W){for(var G={},re=V.l+W;V.l<re;){var de=V.read_shift(2);if(de==14e3){for(G[de]=[0,""],G[de][0]=V.read_shift(2);V[V.l];)G[de][1]+=String.fromCharCode(V[V.l]),V.l++;V.l++}}return G}function O(V,W){var G=on(5+V.length);G.write_shift(2,14e3),G.write_shift(2,W);for(var re=0;re<V.length;++re){var de=V.charCodeAt(re);G[G.l++]=de>127?95:de}return G[G.l++]=0,G}var z={0:{n:"BOF",f:en},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:D},222:{n:"SHEETNAMELP",f:F},65535:{n:""}},H={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:m},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:L},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:C},40:{n:"FORMULA28",f:M},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:D},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:N},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function Hee(t){var e={},r=t.match(rs),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=kt(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=ux[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var jee=function(){var t=Fd("t"),e=Fd("rPr");function r(i){var a=i.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:ar(a[1])},l=i.match(e);return l&&(o.s=Hee(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),Gee=function(){var e=/(\r\n|\n)/g;function r(s,i,a){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),a.push("</b>")),s.i&&(i.push("<i>"),a.push("</i>")),s.strike&&(i.push("<s>"),a.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),Wee=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,zee=/<(?:\w+:)?r>/,Kee=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Cx(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=ar(Ar(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ar(t),r&&(n.h=vx(n.t))):t.match(zee)&&(n.r=Ar(t),n.t=ar(Ar((t.replace(Kee,"").match(Wee)||[]).join("").replace(rs,""))),r&&(n.h=Gee(jee(n.r)))),n):{t:""}}var qee=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Xee=/<(?:\w+:)?(?:si|sstItem)>/g,Yee=/<\/(?:\w+:)?(?:si|sstItem)>/;function Qee(t,e){var r=[],n="";if(!t)return r;var s=t.match(qee);if(s){n=s[2].replace(Xee,"").split(Yee);for(var i=0;i!=n.length;++i){var a=Cx(n[i].trim(),e);a!=null&&(r[r.length]=a)}s=kt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function Jee(t){return[t.read_shift(4),t.read_shift(4)]}function Zee(t,e){var r=[],n=!1;return Di(t,function(i,a,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function NI(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function pi(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function ete(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=pi(t,4),e.U=pi(t,4),e.W=pi(t,4),e}function tte(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function rte(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(tte(t));return e}function nte(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function ste(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=pi(t,4),e.U=pi(t,4),e.W=pi(t,4),e}function ate(t){var e=ste(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function OI(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function MI(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function ite(t){var e=pi(t);switch(e.Minor){case 2:return[e.Minor,ote(t)];case 3:return[e.Minor,lte()];case 4:return[e.Minor,cte(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function ote(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=OI(t,r),s=MI(t,t.length-t.l);return{t:"Std",h:n,v:s}}function lte(){throw new Error("File is password-protected: ECMA-376 Extensible")}function cte(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(rs,function(i){var a=kt(i);switch(ja(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function ute(t,e){var r={},n=r.EncryptionVersionInfo=pi(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=OI(t,s),e-=s,r.EncryptionVerifier=MI(t,e),r}function dte(t){var e={},r=e.EncryptionVersionInfo=pi(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function fte(t){var e=0,r,n=NI(t),s=n.length+1,i,a,o,l,c;for(r=go(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var LI=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},s=function(a,o){return n(a^o)},i=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],f=0;f!=7;++f)u&64&&(o^=r[l]),u*=2,--l;return o};return function(a){for(var o=NI(a),l=i(o),c=o.length,u=go(16),f=0;f!=16;++f)u[f]=0;var h,p,g;for((c&1)===1&&(h=l>>8,u[c]=s(t[0],h),--c,h=l&255,p=o[o.length-1],u[c]=s(p,h));c>0;)--c,h=l>>8,u[c]=s(o[c],h),--c,h=l&255,u[c]=s(o[c],h);for(c=15,g=15-o.length;g>0;)h=l>>8,u[c]=s(t[g],h),--c,--g,h=l&255,u[c]=s(o[c],h),--c,--g;return u}}(),hte=function(t,e,r,n,s){s||(s=e),n||(n=LI(t));var i,a;for(i=0;i!=e.length;++i)a=e[i],a^=n[r],a=(a>>5|a<<3)&255,s[i]=a,++r;return[s,r,n]},pte=function(t){var e=0,r=LI(t);return function(n){var s=hte("",n,e,r);return e=s[1],s[0]}};function mte(t,e,r,n){var s={key:en(t),verificationBytes:en(t)};return r.password&&(s.verifier=fte(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=pte(r.password)),s}function gte(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=dte(t):n.Data=ute(t,e),n}function vte(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?gte(t,e-2,n):mte(t,r.biff>=8?e:e-2,r,n),n}var yte=function(){function t(s,i){switch(i.type){case"base64":return e(Fs(s),i);case"binary":return e(s,i);case"buffer":return e(Zt&&Buffer.isBuffer(s)?s.toString("binary"):bl(s),i);case"array":return e(ul(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,g,v=-1;g=h.exec(u);){switch(g[0]){case"\\cell":var y=u.slice(p,h.lastIndex-g[0].length);if(y[0]==" "&&(y=y.slice(1)),++v,y.length){var b={v:y,t:"s"};Array.isArray(o)?o[f][v]=b:o[Mt({r:f,c:v})]=b}break}p=h.lastIndex}v>c.e.c&&(c.e.c=v)}),o["!ref"]=sr(c),o}function r(s,i){return bo(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Gr(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var u=a.s.c;u<=a.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=a.s.c;u<=a.e.c;++u){var f=Mt({r:c,c:u});o=l?(s[c]||[])[u]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(wi(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function xte(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Md(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function Ete(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),a=s-i;if(a===0)return[0,0,e];var o=0,l=0,c=s+i;switch(l=a/(c>1?2-c:c),s){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function _te(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,a=[i,i,i],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,a[0]+=s,a[1]+=l;break;case 1:l=s*(2-o),a[0]+=l,a[1]+=s;break;case 2:l=s*(o-2),a[1]+=s,a[2]+=l;break;case 3:l=s*(4-o),a[1]+=l,a[2]+=s;break;case 4:l=s*(o-4),a[2]+=s,a[0]+=l;break;case 5:l=s*(6-o),a[2]+=l,a[0]+=s;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function Rh(t,e){if(e===0)return t;var r=Ete(xte(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),Md(_te(r))}var BI=6,bte=15,Ste=1,us=BI;function Fh(t){return Math.floor((t+Math.round(128/us)/256)*us)}function Nh(t){return Math.floor((t-5)/us*100+.5)/100}function Qv(t){return Math.round((t*us+5)/us*256)/256}function bg(t){return Qv(Nh(Fh(t)))}function kx(t){var e=Math.abs(t-bg(t)),r=us;if(e>.005)for(us=Ste;us<bte;++us)Math.abs(t-bg(t))<=e&&(e=Math.abs(t-bg(t)),r=us);us=r}function Mc(t){t.width?(t.wpx=Fh(t.width),t.wch=Nh(t.wpx),t.MDW=us):t.wpx?(t.wch=Nh(t.wpx),t.width=Qv(t.wch),t.MDW=us):typeof t.wch=="number"&&(t.width=Qv(t.wch),t.wpx=Fh(t.width),t.MDW=us),t.customWidth&&delete t.customWidth}var Ate=96,UI=Ate;function $I(t){return t*96/UI}function Ld(t){return t*UI/96}var Tte={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function wte(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(rs)||[]).forEach(function(a){var o=kt(a);switch(ja(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Dr(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Dr(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function Cte(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(rs)||[]).forEach(function(a){var o=kt(a);switch(ja(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function kte(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(rs)||[]).forEach(function(a){var o=kt(a);switch(ja(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=Ar(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Dr(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Dr(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Dr(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Dr(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Dr(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Dr(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Dr(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=ux[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Dr(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=Yo[s.color.index];s.color.index==81&&(l=Yo[1]),l||(l=Yo[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Rh(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Ite(t,e,r){e.NumberFmt=[];for(var n=$a(Ut),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Ut[n[s]];var i=t[0].match(rs);if(i)for(s=0;s<i.length;++s){var a=kt(i[s]);switch(ja(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=ar(Ar(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Xo(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var a0=["numFmtId","fillId","fontId","borderId","xfId"],i0=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Dte(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(rs)||[]).forEach(function(i){var a=kt(i),o=0;switch(ja(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<a0.length;++o)n[a0[o]]&&(n[a0[o]]=parseInt(n[a0[o]],10));for(o=0;o<i0.length;++o)n[i0[o]]&&(n[i0[o]]=Dr(n[i0[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=Dr(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var Pte=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(e))&&Ite(f,u,c),(f=o.match(s))&&kte(f,u,l,c),(f=o.match(n))&&Cte(f,u,l,c),(f=o.match(i))&&wte(f,u,l,c),(f=o.match(r))&&Dte(f,u,c),u}}();function Rte(t,e){var r=t.read_shift(2),n=Zn(t);return[r,n]}function Fte(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=jJ(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=HJ(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Zn(t),n}var Nte=ts;function Ote(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}var Mte=ts;function Lte(t,e,r){var n={};n.NumberFmt=[];for(var s in Ut)n.NumberFmt[s]=Ut[s];n.CellXf=[],n.Fonts=[];var i=[],a=!1;return Di(t,function(l,c,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],Xo(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=Rh(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:i.push(u),a=!0;break;case 38:i.pop(),a=!1;break;default:if(c.T>0)i.push(u);else if(c.T<0)i.pop();else if(!a||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}var Bte=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Ute(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(rs)||[]).forEach(function(s){var i=kt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[Bte.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function $te(){}function Vte(){}var Hte=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,jte=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Gte=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Wte(t,e,r){e.themeElements={};var n;[["clrScheme",Hte,Ute],["fontScheme",jte,$te],["fmtScheme",Gte,Vte]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var zte=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function VI(t,e){(!t||t.length===0)&&(t=Kte());var r,n={};if(!(r=t.match(zte)))throw new Error("themeElements not found in theme");return Wte(r[0],n,e),n.raw=t,n}function Kte(t,e){var r=[Jk];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function qte(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var a;try{a=Qk(i,{type:"array"})}catch{return}var o=ks(a,"theme/theme/theme1.xml",!0);if(o)return VI(o,r)}}function Xte(t){return t.read_shift(4)}function Yte(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Qte(t,4);break;case 2:e.xclrValue=CI(t);break;case 3:e.xclrValue=Xte(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Qte(t,e){return ts(t,e)}function Jte(t,e){return ts(t,e)}function Zte(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Yte(t);break;case 6:n[1]=Jte(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function ere(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(Zte(t,r-t.l));return{ixfe:n,ext:i}}function tre(t,e){e.forEach(function(r){switch(r[0]){}})}function rre(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Zn(t)}}function nre(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function sre(t){return t.l+=4,t.read_shift(4)!=0}function are(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],a=!1,o=2;return Di(t,function(l,c,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:i.push(u),a=!0;break;case 36:i.pop(),a=!1;break;default:if(!c.T){if(!a||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function ire(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,a;return t.replace(rs,function(o){var l=kt(o);switch(ja(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function ore(t){var e=[];if(!t)return e;var r=1;return(t.match(rs)||[]).forEach(function(n){var s=kt(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function lre(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Mt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function cre(t,e,r){var n=[];return Di(t,function(i,a,o){switch(o){case 63:n.push(i);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function ure(t,e,r,n){if(!t)return t;var s=n||{},i=!1;Di(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function dre(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function TS(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(a){var o=ds(a.ref);if(s?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[a.ref],!i){i={t:"z"},s?t[o.r][o.c]=i:t[a.ref]=i;var l=Gr(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=sr(l);c!==t["!ref"]&&(t["!ref"]=c)}i.c||(i.c=[]);var u={a:a.author,t:a.t,r:a.r,T:r};a.h&&(u.h=a.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(u.a==n[f].id){u.a=n[f].name||u.a;break}}i.c.push(u)})}function fre(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=kt(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=ds(l.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var f=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&Cx(f[1])||{r:"",t:"",h:""};c.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),c.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=h.h),n.push(c)}}}}),n}function hre(t,e){var r=[],n=!1,s={},i=0;return t.replace(rs,function(o,l){var c=kt(o);switch(ja(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=l+o.length;break;case"</text>":s.t=t.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function pre(t,e){var r=[],n=!1;return t.replace(rs,function(i){var a=kt(i);switch(ja(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return i}),r}function mre(t){var e={};e.iauthor=t.read_shift(4);var r=Al(t);return e.rfx=r.s,e.ref=Mt(r.s),t.l+=16,e}var gre=Zn;function vre(t,e){var r=[],n=[],s={},i=!1;return Di(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}var yre="application/vnd.ms-office.vbaProject";function xre(t){var e=rr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");rr.utils.cfb_add(e,s,t.FileIndex[n].content)}}),rr.write(e)}function Ere(){return{"!type":"dialog"}}function _re(){return{"!type":"dialog"}}function bre(){return{"!type":"macro"}}function Sre(){return{"!type":"macro"}}var yc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=e.c:--u,l?c+=e.r:--c,s+(o?"":"$")+un(u)+(l?"":"$")+Nn(c)}return function(s,i){return e=i,s.replace(t,r)}}(),HI=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Are=function(){return function(e,r){return e.replace(HI,function(n,s,i,a,o,l){var c=_x(a)-(i?0:r.c),u=Ex(l)-(o?0:r.r),f=u==0?"":o?u+1:"["+u+"]",h=c==0?"":i?c+1:"["+c+"]";return s+"R"+f+"C"+h})}}();function jI(t,e){return t.replace(HI,function(r,n,s,i,a,o){return n+(s=="$"?s+i:un(_x(i)+e.c))+(a=="$"?a+o:Nn(Ex(o)+e.r))})}function Tre(t,e,r){var n=Xc(e),s=n.s,i=ds(r),a={r:i.r-s.r,c:i.c-s.c};return jI(t,a)}function wre(t){return t.length!=1}function wS(t){return t.replace(/_xlfn\./g,"")}function Yr(t){t.l+=1}function vo(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function GI(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return WI(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=vo(t),o=vo(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function WI(t){var e=vo(t),r=vo(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Cre(t,e,r){if(r.biff<8)return WI(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=vo(t),a=vo(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function zI(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return kre(t);var n=t.read_shift(r&&r.biff==12?4:2),s=vo(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function kre(t){var e=vo(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function Ire(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Dre(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Pre(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function Pre(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function Rre(t,e,r){var n=(t[t.l++]&96)>>5,s=GI(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Fre(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=GI(t,i,r);return[n,s,a]}function Nre(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Ore(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function Mre(t,e,r){var n=(t[t.l++]&96)>>5,s=Cre(t,e-1,r);return[n,s]}function Lre(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function CS(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function Bre(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function Ure(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function $re(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Vre(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Hre(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function KI(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function jre(t){return t.read_shift(2),KI(t)}function Gre(t){return t.read_shift(2),KI(t)}function Wre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=zI(t,0,r);return[n,s]}function zre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=Dre(t,0,r);return[n,s]}function Kre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=zI(t,0,r);return[n,s,i]}function qre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[Xne[s],YI[s],n]}function Xre(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:Yre(t);return[s,(i[0]===0?YI:qne)[i[1]]]}function Yre(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Qre(t,e,r){t.l+=r&&r.biff==2?3:4}function Jre(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Zre(t){return t.l++,Tl[t.read_shift(1)]}function ene(t){return t.l++,t.read_shift(2)}function tne(t){return t.l++,t.read_shift(1)!==0}function rne(t){return t.l++,Kn(t)}function nne(t,e,r){return t.l++,ff(t,e-1,r)}function sne(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=zr(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Tl[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Kn(t);break;case 2:r[1]=wl(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function ane(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?Al:Gp)(t));return s}function ine(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=sne(t,r.biff);return a}function one(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function lne(t,e,r){if(r.biff==5)return cne(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function cne(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function une(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function dne(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function fne(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function hne(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var pne=ts,mne=ts,gne=ts;function pf(t,e,r){return t.l+=2,[Ire(t)]}function Ix(t){return t.l+=6,[]}var vne=pf,yne=Ix,xne=Ix,Ene=pf;function qI(t){return t.l+=2,[en(t),t.read_shift(2)&1]}var _ne=pf,bne=qI,Sne=Ix,Ane=pf,Tne=pf,wne=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Cne(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=wne[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function kne(t){return t.l+=2,[t.read_shift(4)]}function Ine(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function Dne(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Pne(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Rne(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Fne(t){return t.l+=4,[0,0]}var kS={1:{n:"PtgExp",f:Jre},2:{n:"PtgTbl",f:gne},3:{n:"PtgAdd",f:Yr},4:{n:"PtgSub",f:Yr},5:{n:"PtgMul",f:Yr},6:{n:"PtgDiv",f:Yr},7:{n:"PtgPower",f:Yr},8:{n:"PtgConcat",f:Yr},9:{n:"PtgLt",f:Yr},10:{n:"PtgLe",f:Yr},11:{n:"PtgEq",f:Yr},12:{n:"PtgGe",f:Yr},13:{n:"PtgGt",f:Yr},14:{n:"PtgNe",f:Yr},15:{n:"PtgIsect",f:Yr},16:{n:"PtgUnion",f:Yr},17:{n:"PtgRange",f:Yr},18:{n:"PtgUplus",f:Yr},19:{n:"PtgUminus",f:Yr},20:{n:"PtgPercent",f:Yr},21:{n:"PtgParen",f:Yr},22:{n:"PtgMissArg",f:Yr},23:{n:"PtgStr",f:nne},26:{n:"PtgSheet",f:Ine},27:{n:"PtgEndSheet",f:Dne},28:{n:"PtgErr",f:Zre},29:{n:"PtgBool",f:tne},30:{n:"PtgInt",f:ene},31:{n:"PtgNum",f:rne},32:{n:"PtgArray",f:Lre},33:{n:"PtgFunc",f:qre},34:{n:"PtgFuncVar",f:Xre},35:{n:"PtgName",f:one},36:{n:"PtgRef",f:Wre},37:{n:"PtgArea",f:Rre},38:{n:"PtgMemArea",f:une},39:{n:"PtgMemErr",f:pne},40:{n:"PtgMemNoMem",f:mne},41:{n:"PtgMemFunc",f:dne},42:{n:"PtgRefErr",f:fne},43:{n:"PtgAreaErr",f:Nre},44:{n:"PtgRefN",f:zre},45:{n:"PtgAreaN",f:Mre},46:{n:"PtgMemAreaN",f:Pne},47:{n:"PtgMemNoMemN",f:Rne},57:{n:"PtgNameX",f:lne},58:{n:"PtgRef3d",f:Kre},59:{n:"PtgArea3d",f:Fre},60:{n:"PtgRefErr3d",f:hne},61:{n:"PtgAreaErr3d",f:Ore},255:{}},Nne={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},One={1:{n:"PtgElfLel",f:qI},2:{n:"PtgElfRw",f:Ane},3:{n:"PtgElfCol",f:vne},6:{n:"PtgElfRwV",f:Tne},7:{n:"PtgElfColV",f:Ene},10:{n:"PtgElfRadical",f:_ne},11:{n:"PtgElfRadicalS",f:Sne},13:{n:"PtgElfColS",f:yne},15:{n:"PtgElfColSV",f:xne},16:{n:"PtgElfRadicalLel",f:bne},25:{n:"PtgList",f:Cne},29:{n:"PtgSxName",f:kne},255:{}},Mne={0:{n:"PtgAttrNoop",f:Fne},1:{n:"PtgAttrSemi",f:Hre},2:{n:"PtgAttrIf",f:$re},4:{n:"PtgAttrChoose",f:Bre},8:{n:"PtgAttrGoto",f:Ure},16:{n:"PtgAttrSum",f:Qre},32:{n:"PtgAttrBaxcel",f:CS},33:{n:"PtgAttrBaxcel",f:CS},64:{n:"PtgAttrSpace",f:jre},65:{n:"PtgAttrSpaceSemi",f:Gre},128:{n:"PtgAttrIfError",f:Vre},255:{}};function mf(t,e,r,n){if(n.biff<8)return ts(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=ine(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=ane(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(ts(t,e)),i}function gf(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=kS[i]||kS[Nne[i]],(i===24||i===25)&&(s=(i===24?One:Mne)[t[t.l+1]]),!s||!s.f?ts(t,e):a.push([s.n,s.f(t,e,r)]);return a}function Lne(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var Bne={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Une(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function XI(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function IS(t,e,r){var n=XI(t,e,r);return n=="#REF"?n:Une(n,r)}function Gn(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,u,f=0,h=0,p,g="";if(!t[0]||!t[0][0])return"";for(var v=-1,y="",b=0,E=t[0].length;b<E;++b){var x=t[0][b];switch(x[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),v>=0){switch(t[0][v][1][0]){case 0:y=Vr(" ",t[0][v][1][1]);break;case 1:y=Vr("\r",t[0][v][1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][v][1][0])}c=c+y,v=-1}o.push(c+Bne[x[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Ju(x[1][1],a,s),o.push(Zu(u,i));break;case"PtgRefN":u=r?Ju(x[1][1],r,s):x[1][1],o.push(Zu(u,i));break;case"PtgRef3d":f=x[1][1],u=Ju(x[1][2],a,s),g=IS(n,f,s),o.push(g+"!"+Zu(u,i));break;case"PtgFunc":case"PtgFuncVar":var w=x[1][0],R=x[1][1];w||(w=0),w&=127;var P=w==0?[]:o.slice(-w);o.length-=w,R==="User"&&(R=P.shift()),o.push(R+"("+P.join(",")+")");break;case"PtgBool":o.push(x[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(x[1]);break;case"PtgNum":o.push(String(x[1]));break;case"PtgStr":o.push('"'+x[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(x[1]);break;case"PtgAreaN":p=cS(x[1][1],r?{s:r}:a,s),o.push(Eg(p,s));break;case"PtgArea":p=cS(x[1][1],a,s),o.push(Eg(p,s));break;case"PtgArea3d":f=x[1][1],p=x[1][2],g=IS(n,f,s),o.push(g+"!"+Eg(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=x[1][2];var S=(n.names||[])[h-1]||(n[0]||[])[h],_=S?S.Name:"SH33TJSNAME"+String(h);_&&_.slice(0,6)=="_xlfn."&&!s.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var m=x[1][1];h=x[1][2];var A;if(s.biff<=5)m<0&&(m=-m),n[m]&&(A=n[m][h]);else{var k="";if(((n[m]||[])[0]||[])[0]==14849||(((n[m]||[])[0]||[])[0]==1025?n[m][h]&&n[m][h].itab>0&&(k=n.SheetNames[n[m][h].itab-1]+"!"):k=n.SheetNames[h-1]+"!"),n[m]&&n[m][h])k+=n[m][h].Name;else if(n[0]&&n[0][h])k+=n[0][h].Name;else{var I=(XI(n,m,s)||"").split(";;");I[h-1]?k=I[h-1]:k+="SH33TJSERRX"}o.push(k);break}A||(A={Name:"SH33TJSERRY"}),o.push(A.Name);break;case"PtgParen":var C="(",M=")";if(v>=0){switch(y="",t[0][v][1][0]){case 2:C=Vr(" ",t[0][v][1][1])+C;break;case 3:C=Vr("\r",t[0][v][1][1])+C;break;case 4:M=Vr(" ",t[0][v][1][1])+M;break;case 5:M=Vr("\r",t[0][v][1][1])+M;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][v][1][0])}v=-1}o.push(C+o.pop()+M);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:x[1][1],r:x[1][0]};var D={c:r.c,r:r.r};if(n.sharedf[Mt(u)]){var F=n.sharedf[Mt(u)];o.push(Gn(F,a,D,n,s))}else{var N=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(Gn(c[1],a,D,n,s)),N=!0;break}N||o.push(x[1])}break;case"PtgArray":o.push("{"+Lne(x[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+x[1].idx+"[#"+x[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(x));default:throw new Error("Unrecognized Formula Token: "+String(x))}var L=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&L.indexOf(t[0][b][0])==-1){x=t[0][v];var O=!0;switch(x[1][0]){case 4:O=!1;case 0:y=Vr(" ",x[1][1]);break;case 5:O=!1;case 1:y=Vr("\r",x[1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+x[1][0])}o.push((O?y:"")+o.pop()+(O?"":y)),v=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function $ne(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],ts(t,e-2)];var o=gf(t,a,r);return e!==a+s&&(i=mf(t,e-a-s,o,r)),t.l=n,[o,i]}function Vne(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],ts(t,e-2)];var o=gf(t,a,r);return e!==a+s&&(i=mf(t,e-a-s,o,r)),t.l=n,[o,i]}function Hne(t,e,r,n){var s=t.l+e,i=gf(t,n,r),a;return s!==t.l&&(a=mf(t,s-t.l,i,r)),[i,a]}function jne(t,e,r){var n=t.l+e,s,i=t.read_shift(2),a=gf(t,i,r);return i==65535?[[],ts(t,e-2)]:(e!==i+2&&(s=mf(t,n-i-2,a,r)),[a,s])}function Gne(t){var e;if(ui(t,t.l+6)!==65535)return[Kn(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Sg(t,e,r){var n=t.l+e,s=Ga(t);r.biff==2&&++t.l;var i=Gne(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=Vne(t,n-t.l,r);return{cell:s,val:i[0],formula:o,shared:a>>3&1,tt:i[1]}}function Wp(t,e,r){var n=t.read_shift(4),s=gf(t,n,r),i=t.read_shift(4),a=i>0?mf(t,i,s,r):null;return[s,a]}var Wne=Wp,zp=Wp,zne=Wp,Kne=Wp,qne={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},YI={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Xne={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function DS(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Ag(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var nd={},xc={};function sd(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function QI(t,e,r,n,s,i){try{n.cellNF&&(t.z=Ut[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=vn(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Ut[e]==null&&Xo(YQ[e]||"General",e),t.t==="e")t.w=t.w||Tl[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Rd(t.v);else if(t.t==="d"){var a=ps(t.v);(a|0)===a?t.w=a.toString(10):t.w=Rd(a)}else{if(t.v===void 0)return"";t.w=cl(t.v,xc)}else t.t==="d"?t.w=qs(e,ps(t.v),xc):t.w=qs(e,t.v,xc)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Rh(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Rh(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function Yne(t,e){var r=Gr(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=sr(r))}var Qne=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Jne=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Zne=/<(?:\w:)?hyperlink [^>]*>/mg,ese=/"(\w*:\w*)"/,tse=/<(?:\w:)?col\b[^>]*[\/]?>/g,rse=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,nse=/<(?:\w:)?pageMargins[^>]*\/>/g,JI=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,sse=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ase=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function ise(t,e,r,n,s,i,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",f=t.match(Jne);f?(c=t.slice(0,f.index),u=t.slice(f.index+f[0].length)):c=u=t;var h=c.match(JI);h?Dx(h[0],o,s,r):(h=c.match(sse))&&ose(h[0],h[1]||"",o,s,r);var p=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=c.slice(p,p+50).match(ese);g&&Yne(o,g[1])}var v=c.match(ase);v&&v[1]&&hse(v[1],s);var y=[];if(e.cellStyles){var b=c.match(tse);b&&use(y,b)}f&&pse(f[1],o,e,l,i,a);var E=u.match(rse);E&&(o["!autofilter"]=dse(E[0]));var x=[],w=u.match(Qne);if(w)for(p=0;p!=w.length;++p)x[p]=Gr(w[p].slice(w[p].indexOf('"')+1));var R=u.match(Zne);R&&lse(o,R,n);var P=u.match(nse);if(P&&(o["!margins"]=cse(kt(P[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=sr(l)),e.sheetRows>0&&o["!ref"]){var S=Gr(o["!ref"]);e.sheetRows<=+S.e.r&&(S.e.r=e.sheetRows-1,S.e.r>l.e.r&&(S.e.r=l.e.r),S.e.r<S.s.r&&(S.s.r=S.e.r),S.e.c>l.e.c&&(S.e.c=l.e.c),S.e.c<S.s.c&&(S.s.c=S.e.c),o["!fullref"]=o["!ref"],o["!ref"]=sr(S))}return y.length>0&&(o["!cols"]=y),x.length>0&&(o["!merges"]=x),o}function Dx(t,e,r,n){var s=kt(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=ar(Ar(s.codeName)))}function ose(t,e,r,n,s){Dx(t.slice(0,t.indexOf(">")),r,n,s)}function lse(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=kt(Ar(e[s]),!0);if(!i.ref)return;var a=((r||{})["!id"]||[])[i.id];a?(i.Target=a.Target,i.location&&(i.Target+="#"+ar(i.location))):(i.Target="#"+ar(i.location),a={Target:i.Target,TargetMode:"Internal"}),i.Rel=a,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Gr(i.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Mt({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function cse(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function use(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=kt(e[n],!0);s.hidden&&(s.hidden=Dr(s.hidden));var i=parseInt(s.min,10)-1,a=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,kx(s.width)),Mc(s);i<=a;)t[i++]=Fn(s)}}function dse(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var fse=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function hse(t,e){e.Views||(e.Views=[{}]),(t.match(fse)||[]).forEach(function(r,n){var s=kt(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),Dr(s.rightToLeft)&&(e.Views[n].RTL=!0)})}var pse=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=Fd("v"),a=Fd("f");return function(l,c,u,f,h,p){for(var g=0,v="",y=[],b=[],E=0,x=0,w=0,R="",P,S,_=0,m=0,A,k,I=0,C=0,M=Array.isArray(p.CellXf),D,F=[],N=[],L=Array.isArray(c),O=[],z={},H=!1,V=!!u.sheetStubs,W=l.split(e),G=0,re=W.length;G!=re;++G){v=W[G].trim();var de=v.length;if(de!==0){var ae=0;e:for(g=0;g<de;++g)switch(v[g]){case">":if(v[g-1]!="/"){++g;break e}if(u&&u.cellStyles){if(S=kt(v.slice(ae,g),!0),_=S.r!=null?parseInt(S.r,10):_+1,m=-1,u.sheetRows&&u.sheetRows<_)continue;z={},H=!1,S.ht&&(H=!0,z.hpt=parseFloat(S.ht),z.hpx=Ld(z.hpt)),S.hidden=="1"&&(H=!0,z.hidden=!0),S.outlineLevel!=null&&(H=!0,z.level=+S.outlineLevel),H&&(O[_-1]=z)}break;case"<":ae=g;break}if(ae>=g)break;if(S=kt(v.slice(ae,g),!0),_=S.r!=null?parseInt(S.r,10):_+1,m=-1,!(u.sheetRows&&u.sheetRows<_)){f.s.r>_-1&&(f.s.r=_-1),f.e.r<_-1&&(f.e.r=_-1),u&&u.cellStyles&&(z={},H=!1,S.ht&&(H=!0,z.hpt=parseFloat(S.ht),z.hpx=Ld(z.hpt)),S.hidden=="1"&&(H=!0,z.hidden=!0),S.outlineLevel!=null&&(H=!0,z.level=+S.outlineLevel),H&&(O[_-1]=z)),y=v.slice(g).split(t);for(var ce=0;ce!=y.length&&y[ce].trim().charAt(0)=="<";++ce);for(y=y.slice(ce),g=0;g!=y.length;++g)if(v=y[g].trim(),v.length!==0){if(b=v.match(r),E=g,x=0,w=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,b!=null&&b.length===2){for(E=0,R=b[1],x=0;x!=R.length&&!((w=R.charCodeAt(x)-64)<1||w>26);++x)E=26*E+w;--E,m=E}else++m;for(x=0;x!=v.length&&v.charCodeAt(x)!==62;++x);if(++x,S=kt(v.slice(0,x),!0),S.r||(S.r=Mt({r:_-1,c:m})),R=v.slice(x),P={t:""},(b=R.match(i))!=null&&b[1]!==""&&(P.v=ar(b[1])),u.cellFormula){if((b=R.match(a))!=null&&b[1]!==""){if(P.f=ar(Ar(b[1])).replace(/\r\n/g,`
`),u.xlfn||(P.f=wS(P.f)),b[0].indexOf('t="array"')>-1)P.F=(R.match(s)||[])[1],P.F.indexOf(":")>-1&&F.push([Gr(P.F),P.F]);else if(b[0].indexOf('t="shared"')>-1){k=kt(b[0]);var te=ar(Ar(b[1]));u.xlfn||(te=wS(te)),N[parseInt(k.si,10)]=[k,te,S.r]}}else(b=R.match(/<f[^>]*\/>/))&&(k=kt(b[0]),N[k.si]&&(P.f=Tre(N[k.si][1],N[k.si][2],S.r)));var Z=ds(S.r);for(x=0;x<F.length;++x)Z.r>=F[x][0].s.r&&Z.r<=F[x][0].e.r&&Z.c>=F[x][0].s.c&&Z.c<=F[x][0].e.c&&(P.F=F[x][1])}if(S.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(V)P.t="z";else continue;else P.t=S.t||"n";switch(f.s.c>m&&(f.s.c=m),f.e.c<m&&(f.e.c=m),P.t){case"n":if(P.v==""||P.v==null){if(!V)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!V)continue;P.t="z"}else A=nd[parseInt(P.v,10)],P.v=A.t,P.r=A.r,u.cellHTML&&(P.h=A.h);break;case"str":P.t="s",P.v=P.v!=null?Ar(P.v):"",u.cellHTML&&(P.h=vx(P.v));break;case"inlineStr":b=R.match(n),P.t="s",b!=null&&(A=Cx(b[1]))?(P.v=A.t,u.cellHTML&&(P.h=A.h)):P.v="";break;case"b":P.v=Dr(P.v);break;case"d":u.cellDates?P.v=vn(P.v,1):(P.v=ps(vn(P.v,1)),P.t="n");break;case"e":(!u||u.cellText!==!1)&&(P.w=P.v),P.v=xI[P.v];break}if(I=C=0,D=null,M&&S.s!==void 0&&(D=p.CellXf[S.s],D!=null&&(D.numFmtId!=null&&(I=D.numFmtId),u.cellStyles&&D.fillId!=null&&(C=D.fillId))),QI(P,I,C,u,h,p),u.cellDates&&M&&P.t=="n"&&qc(Ut[I])&&(P.t="d",P.v=jp(P.v)),S.cm&&u.xlmeta){var xe=(u.xlmeta.Cell||[])[+S.cm-1];xe&&xe.type=="XLDAPR"&&(P.D=!0)}if(L){var J=ds(S.r);c[J.r]||(c[J.r]=[]),c[J.r][J.c]=P}else c[S.r]=P}}}}O.length>0&&(c["!rows"]=O)}}();function mse(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var gse=Al;function vse(){}function yse(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=$J(t),r}function xse(t){var e=Qs(t);return[e]}function Ese(t){var e=Sl(t);return[e]}function _se(t){var e=Qs(t),r=t.read_shift(1);return[e,r,"b"]}function bse(t){var e=Sl(t),r=t.read_shift(1);return[e,r,"b"]}function Sse(t){var e=Qs(t),r=t.read_shift(1);return[e,r,"e"]}function Ase(t){var e=Sl(t),r=t.read_shift(1);return[e,r,"e"]}function Tse(t){var e=Qs(t),r=t.read_shift(4);return[e,r,"s"]}function wse(t){var e=Sl(t),r=t.read_shift(4);return[e,r,"s"]}function Cse(t){var e=Qs(t),r=Kn(t);return[e,r,"n"]}function ZI(t){var e=Sl(t),r=Kn(t);return[e,r,"n"]}function kse(t){var e=Qs(t),r=Ax(t);return[e,r,"n"]}function Ise(t){var e=Sl(t),r=Ax(t);return[e,r,"n"]}function Dse(t){var e=Qs(t),r=bx(t);return[e,r,"is"]}function Pse(t){var e=Qs(t),r=Zn(t);return[e,r,"str"]}function Rse(t){var e=Sl(t),r=Zn(t);return[e,r,"str"]}function Fse(t,e,r){var n=t.l+e,s=Qs(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=zp(t,n-t.l,r);a[3]=Gn(o,null,s,r.supbooks,r)}else t.l=n;return a}function Nse(t,e,r){var n=t.l+e,s=Qs(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=zp(t,n-t.l,r);a[3]=Gn(o,null,s,r.supbooks,r)}else t.l=n;return a}function Ose(t,e,r){var n=t.l+e,s=Qs(t);s.r=r["!row"];var i=Kn(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=zp(t,n-t.l,r);a[3]=Gn(o,null,s,r.supbooks,r)}else t.l=n;return a}function Mse(t,e,r){var n=t.l+e,s=Qs(t);s.r=r["!row"];var i=Zn(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=zp(t,n-t.l,r);a[3]=Gn(o,null,s,r.supbooks,r)}else t.l=n;return a}var Lse=Al;function Bse(t,e){var r=t.l+e,n=Al(t),s=Sx(t),i=Zn(t),a=Zn(t),o=Zn(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function Use(){}function $se(t,e,r){var n=t.l+e,s=gI(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=Wne(t,n-t.l,r);a[1]=o}else t.l=n;return a}function Vse(t,e,r){var n=t.l+e,s=Al(t),i=[s];if(r.cellFormula){var a=Kne(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}var Hse=["left","right","top","bottom","header","footer"];function jse(t){var e={};return Hse.forEach(function(r){e[r]=Kn(t)}),e}function Gse(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Wse(){}function zse(){}function Kse(t,e,r,n,s,i,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,g,v,y,b,E,x,w,R,P=[];o.biff=12,o["!row"]=0;var S=0,_=!1,m=[],A={},k=o.supbooks||s.supbooks||[[]];if(k.sharedf=A,k.arrayf=m,k.SheetNames=s.SheetNames||s.Sheets.map(function(L){return L.name}),!o.supbooks&&(o.supbooks=k,s.Names))for(var I=0;I<s.Names.length;++I)k[0][I+1]=s.Names[I];var C=[],M=[],D=!1;Oh[16]={n:"BrtShortReal",f:ZI};var F;if(Di(t,function(O,z,H){if(!h)switch(H){case 148:c=O;break;case 0:p=O,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),w=Nn(y=p.r),o["!row"]=p.r,(O.hidden||O.hpt||O.level!=null)&&(O.hpt&&(O.hpx=Ld(O.hpt)),M[O.r]=O);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:O[2]},O[2]){case"n":g.v=O[1];break;case"s":x=nd[O[1]],g.v=x.t,g.r=x.r;break;case"b":g.v=!!O[1];break;case"e":g.v=O[1],o.cellText!==!1&&(g.w=Tl[g.v]);break;case"str":g.t="s",g.v=O[1];break;case"is":g.t="s",g.v=O[1].t;break}if((v=a.CellXf[O[0].iStyleRef])&&QI(g,v.numFmtId,null,o,i,a),b=O[0].c==-1?b+1:O[0].c,o.dense?(l[y]||(l[y]=[]),l[y][b]=g):l[un(b)+w]=g,o.cellFormula){for(_=!1,S=0;S<m.length;++S){var V=m[S];p.r>=V[0].s.r&&p.r<=V[0].e.r&&b>=V[0].s.c&&b<=V[0].e.c&&(g.F=sr(V[0]),_=!0)}!_&&O.length>3&&(g.f=O[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>b&&(u.s.c=b),u.e.r<p.r&&(u.e.r=p.r),u.e.c<b&&(u.e.c=b),o.cellDates&&v&&g.t=="n"&&qc(Ut[v.numFmtId])){var W=Vo(g.v);W&&(g.t="d",g.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}F&&(F.type=="XLDAPR"&&(g.D=!0),F=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},b=O[0].c==-1?b+1:O[0].c,o.dense?(l[y]||(l[y]=[]),l[y][b]=g):l[un(b)+w]=g,u.s.r>p.r&&(u.s.r=p.r),u.s.c>b&&(u.s.c=b),u.e.r<p.r&&(u.e.r=p.r),u.e.c<b&&(u.e.c=b),F&&(F.type=="XLDAPR"&&(g.D=!0),F=void 0);break;case 176:P.push(O);break;case 49:F=((o.xlmeta||{}).Cell||[])[O-1];break;case 494:var G=n["!id"][O.relId];for(G?(O.Target=G.Target,O.loc&&(O.Target+="#"+O.loc),O.Rel=G):O.relId==""&&(O.Target="#"+O.loc),y=O.rfx.s.r;y<=O.rfx.e.r;++y)for(b=O.rfx.s.c;b<=O.rfx.e.c;++b)o.dense?(l[y]||(l[y]=[]),l[y][b]||(l[y][b]={t:"z",v:void 0}),l[y][b].l=O):(E=Mt({c:b,r:y}),l[E]||(l[E]={t:"z",v:void 0}),l[E].l=O);break;case 426:if(!o.cellFormula)break;m.push(O),R=o.dense?l[y][b]:l[un(b)+w],R.f=Gn(O[1],u,{r:p.r,c:b},k,o),R.F=sr(O[0]);break;case 427:if(!o.cellFormula)break;A[Mt(O[0].s)]=O[1],R=o.dense?l[y][b]:l[un(b)+w],R.f=Gn(O[1],u,{r:p.r,c:b},k,o);break;case 60:if(!o.cellStyles)break;for(;O.e>=O.s;)C[O.e--]={width:O.w/256,hidden:!!(O.flags&1),level:O.level},D||(D=!0,kx(O.w/256)),Mc(C[O.e+1]);break;case 161:l["!autofilter"]={ref:sr(O)};break;case 476:l["!margins"]=O;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),O.name&&(s.Sheets[r].CodeName=O.name),(O.above||O.left)&&(l["!outline"]={above:O.above,left:O.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),O.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!z.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+H.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=sr(c||u)),o.sheetRows&&l["!ref"]){var N=Gr(l["!ref"]);o.sheetRows<=+N.e.r&&(N.e.r=o.sheetRows-1,N.e.r>u.e.r&&(N.e.r=u.e.r),N.e.r<N.s.r&&(N.s.r=N.e.r),N.e.c>u.e.c&&(N.e.c=u.e.c),N.e.c<N.s.c&&(N.s.c=N.e.c),l["!fullref"]=l["!ref"],l["!ref"]=sr(N))}return P.length>0&&(l["!merges"]=P),C.length>0&&(l["!cols"]=C),M.length>0&&(l["!rows"]=M),l}function qse(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var a=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var s=ar((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function Xse(t,e,r,n,s,i){var a=i||{"!type":"chart"};if(!t)return i;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=qse(f);u.s.r=u.s.c=0,u.e.c=o,c=un(o),h[0].forEach(function(p,g){a[c+Nn(g)]={t:"n",v:p,z:h[1]},l=g}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=sr(u)),a}function Yse(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(JI);return o&&Dx(o[0],i,s,r),(a=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function Qse(t,e){t.l+=10;var r=Zn(t);return{name:r}}function Jse(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a=!1;return Di(t,function(l,c,u){switch(u){case 550:i["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var eD=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Zse=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],eae=[],tae=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function PS(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Dr(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function RS(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Dr(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function tD(t){RS(t.WBProps,eD),RS(t.CalcPr,tae),PS(t.WBView,Zse),PS(t.Sheets,eae),xc.date1904=Dr(t.WBProps.date1904)}var rae="][*?/\\".split("");function nae(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return rae.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var sae=/<\w+:workbook/;function aae(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},a=0;if(t.replace(rs,function(l,c){var u=kt(l);switch(ja(u[0])){case"<?xml":break;case"<workbook":l.match(sae)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":eD.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Dr(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=Ar(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=ar(Ar(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Ar(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Dr(u.hidden||"0")&&(i.Hidden=!0),a=c+l.length;break;case"</definedName>":i.Ref=ar(Ar(t.slice(a,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),SJ.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return tD(r),r}function iae(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=qv(t),r.name=Zn(t),r}function oae(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?Zn(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function lae(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function cae(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=VJ(t),a=zne(t,0,r),o=Sx(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function uae(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],a=[[]];return a.SheetNames=[],a.XTI=[],Oh[16]={n:"BrtFRTArchID$",f:lae},Di(t,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Gn(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),tD(r),r.Names=i,r.supbooks=a,r}function dae(t,e,r){return e.slice(-4)===".bin"?uae(t,r):aae(t,r)}function fae(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Kse(t,n,r,s,i,a,o):ise(t,n,r,s,i,a,o)}function hae(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Jse(t,n,r,s,i):Yse(t,n,r,s,i)}function pae(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?bre():Sre()}function mae(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Ere():_re()}function gae(t,e,r,n){return e.slice(-4)===".bin"?Lte(t,r,n):Pte(t,r,n)}function vae(t,e,r){return VI(t,r)}function yae(t,e,r){return e.slice(-4)===".bin"?Zee(t,r):Qee(t,r)}function xae(t,e,r){return e.slice(-4)===".bin"?vre(t,r):fre(t,r)}function Eae(t,e,r){return e.slice(-4)===".bin"?cre(t):ore(t)}function _ae(t,e,r,n){return r.slice(-4)===".bin"?ure(t,e,r,n):void 0}function bae(t,e,r){return e.slice(-4)===".bin"?are(t,e,r):ire(t,e,r)}var rD=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,nD=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function ea(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(rD),i,a,o,l;if(s)for(l=0;l!=s.length;++l)i=s[l].match(nD),(a=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(a+1),n[o]=i[2].slice(1,i[2].length-1));return n}function Sae(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(rD),s,i,a,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(nD),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?a="xmlns"+s[1].slice(6):a=s[1].slice(i+1),r[a]=s[2].slice(1,s[2].length-1));return r}var ad;function Aae(t,e){var r=ad[t]||ar(t);return r==="General"?cl(e):qs(r,e)}function Tae(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Dr(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=vn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[ar(e)]=s}function wae(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Tl[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Rd(t.v):t.w=cl(t.v):t.w=Aae(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=ad[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&qc(n)){var s=Vo(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Cae(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Tte[n.Pattern]||n.Pattern)}t[e.ID]=e}function kae(t,e,r,n,s,i,a,o,l,c){var u="General",f=n.StyleID,h={};c=c||{};var p=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&a&&(f=a.StyleID);i[f]!==void 0&&(i[f].nf&&(u=i[f].nf),i[f].Interior&&p.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Dr(t);break;case"String":n.t="s",n.r=eS(ar(t)),n.v=t.indexOf("<")>-1?ar(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(vn(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=ar(t):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=xI[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=eS(e||t));break}if(wae(n,u,c),c.cellFormula!==!1)if(n.Formula){var v=ar(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=yc(v,s),delete n.Formula,n.ArrayRange=="RC"?n.F=yc("RC:RC",s):n.ArrayRange&&(n.F=yc(n.ArrayRange,s),l.push([Gr(n.F),n.F]))}else for(g=0;g<l.length;++g)s.r>=l[g][0].s.r&&s.r<=l[g][0].e.r&&s.c>=l[g][0].s.c&&s.c<=l[g][0].e.c&&(n.F=l[g][1]);c.cellStyles&&(p.forEach(function(y){!h.patternType&&y.patternType&&(h.patternType=y.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Iae(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function Tg(t,e){var r=e||{};Wk();var n=Tu(yx(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ar(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var a=Fn(r);return a.type="string",Od.to_workbook(n,a)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ee){s.indexOf("<"+ee)>=0&&(i=!0)}),i)return Bae(n,r);ad={"General Number":"General","General Date":Ut[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ut[15],"Short Date":Ut[14],"Long Time":Ut[19],"Medium Time":Ut[18],"Short Time":Ut[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ut[2],Standard:Ut[4],Percent:Ut[10],Scientific:Ut[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},f=[],h=r.dense?[]:{},p="",g={},v={},y=ea('<Data ss:Type="String">'),b=0,E=0,x=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},R={},P={},S="",_=0,m=[],A={},k={},I=0,C=[],M=[],D={},F=[],N,L=!1,O=[],z=[],H={},V=0,W=0,G={Sheets:[],WBProps:{date1904:!1}},re={};Nd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var de="";o=Nd.exec(n);)switch(o[3]=(de=o[3]).toLowerCase()){case"data":if(de=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?kae(n.slice(b,o.index),S,y,l[l.length-1][0]=="comment"?D:g,{c:E,r:x},R,F[E],v,O,r):(S="",y=ea(o[0]),b=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(M.length>0&&(g.c=M),(!r.sheetRows||r.sheetRows>x)&&g.v!==void 0&&(r.dense?(h[x]||(h[x]=[]),h[x][E]=g):h[un(E)+Nn(x)]=g),g.HRef&&(g.l={Target:ar(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(V=E+(parseInt(g.MergeAcross,10)|0),W=x+(parseInt(g.MergeDown,10)|0),m.push({s:{c:E,r:x},e:{c:V,r:W}})),!r.sheetStubs)g.MergeAcross?E=V+1:++E;else if(g.MergeAcross||g.MergeDown){for(var ae=E;ae<=V;++ae)for(var ce=x;ce<=W;++ce)(ae>E||ce>x)&&(r.dense?(h[ce]||(h[ce]=[]),h[ce][ae]={t:"z"}):h[un(ae)+Nn(ce)]={t:"z"});E=V+1}else++E;else g=Sae(o[0]),g.Index&&(E=+g.Index-1),E<w.s.c&&(w.s.c=E),E>w.e.c&&(w.e.c=E),o[0].slice(-2)==="/>"&&++E,M=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(x<w.s.r&&(w.s.r=x),x>w.e.r&&(w.e.r=x),o[0].slice(-2)==="/>"&&(v=ea(o[0]),v.Index&&(x=+v.Index-1)),E=0,++x):(v=ea(o[0]),v.Index&&(x=+v.Index-1),H={},(v.AutoFitHeight=="0"||v.Height)&&(H.hpx=parseInt(v.Height,10),H.hpt=$I(H.hpx),z[x]=H),v.Hidden=="1"&&(H.hidden=!0,z[x]=H));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));f.push(p),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(h["!ref"]=sr(w),r.sheetRows&&r.sheetRows<=w.e.r&&(h["!fullref"]=h["!ref"],w.e.r=r.sheetRows-1,h["!ref"]=sr(w))),m.length&&(h["!merges"]=m),F.length>0&&(h["!cols"]=F),z.length>0&&(h["!rows"]=z),u[p]=h}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=E=0,l.push([o[3],!1]),c=ea(o[0]),p=ar(c.Name),h=r.dense?[]:{},m=[],O=[],z=[],re={name:p,Hidden:0},G.Sheets.push(re);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),F=[],L=!1}break;case"style":o[1]==="/"?Cae(R,P,r):P=ea(o[0]);break;case"numberformat":P.nf=ar(ea(o[0]).Format||"General"),ad[P.nf]&&(P.nf=ad[P.nf]);for(var te=0;te!=392&&Ut[te]!=P.nf;++te);if(te==392){for(te=57;te!=392;++te)if(Ut[te]==null){Xo(P.nf,te);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(N=ea(o[0]),N.Hidden&&(N.hidden=!0,delete N.Hidden),N.Width&&(N.wpx=parseInt(N.Width,10)),!L&&N.wpx>10){L=!0,us=BI;for(var Z=0;Z<F.length;++Z)F[Z]&&Mc(F[Z])}L&&Mc(N),F[N.Index-1||F.length]=N;for(var xe=0;xe<+N.Span;++xe)F[F.length]=Fn(N);break;case"namedrange":if(o[1]==="/")break;G.Names||(G.Names=[]);var J=kt(o[0]),Y={Name:J.Name,Ref:yc(J.RefersTo.slice(1),{r:0,c:0})};G.Sheets.length>0&&(Y.Sheet=G.Sheets.length-1),G.Names.push(Y);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?S+=n.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=ea(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?fZ(A,de,n.slice(I,o.index)):I=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));Iae(D),M.push(D)}else l.push([o[3],!1]),c=ea(o[0]),D={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Q=ea(o[0]);h["!autofilter"]={ref:yc(Q.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return BS(n,r);var fe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:fe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:fe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":G.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:fe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:fe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(I,o.index)){case"SheetHidden":re.Hidden=1;break;case"SheetVeryHidden":re.Hidden=2;break}else I=o.index+o[0].length;break;case"header":h["!margins"]||sd(h["!margins"]={},"xlml"),isNaN(+kt(o[0]).Margin)||(h["!margins"].header=+kt(o[0]).Margin);break;case"footer":h["!margins"]||sd(h["!margins"]={},"xlml"),isNaN(+kt(o[0]).Margin)||(h["!margins"].footer=+kt(o[0]).Margin);break;case"pagemargins":var ye=kt(o[0]);h["!margins"]||sd(h["!margins"]={},"xlml"),isNaN(+ye.Top)||(h["!margins"].top=+ye.Top),isNaN(+ye.Left)||(h["!margins"].left=+ye.Left),isNaN(+ye.Right)||(h["!margins"].right=+ye.Right),isNaN(+ye.Bottom)||(h["!margins"].bottom=+ye.Bottom);break;case"displayrighttoleft":G.Views||(G.Views=[]),G.Views[0]||(G.Views[0]={}),G.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:fe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:fe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:fe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:fe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:fe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:fe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:fe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:fe=!1}break;case"smarttags":break;default:fe=!1;break}if(fe||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Tae(k,de,C,n.slice(I,o.index)):(C=o,I=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var ie={};return!r.bookSheets&&!r.bookProps&&(ie.Sheets=u),ie.SheetNames=f,ie.Workbook=G,ie.SSF=Fn(Ut),ie.Props=A,ie.Custprops=k,ie}function Jv(t,e){switch(Fx(e=e||{}),e.type||"base64"){case"base64":return Tg(Fs(t),e);case"binary":case"buffer":case"file":return Tg(t,e);case"array":return Tg(bl(t),e)}}function Dae(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=GJ(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=WJ(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Pae=[60,1084,2066,2165,2175];function Rae(t,e,r,n,s){var i=n,a=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}a.push(o),r.l+=i;for(var l=ui(r,r.l),c=Zv[l],u=0;c!=null&&Pae.indexOf(l)>-1;)i=ui(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+i),a.push(o),r.l+=4+i,c=Zv[l=ui(r,r.l)];var f=Yi(a);wn(f,0);var h=0;f.lens=[];for(var p=0;p<a.length;++p)f.lens.push(h),h+=a[p].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,s)}function Ta(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Ut[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||Tl[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Rd(t.v):t.w=cl(t.v):t.w=qs(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&qc(Ut[n]||String(n))){var s=Vo(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function o0(t,e,r){return{v:t,ixfe:e,t:r}}function Fae(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},a={},o=null,l=[],c="",u={},f,h="",p,g,v,y,b={},E=[],x,w,R=[],P=[],S={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},m=function(Ee){return Ee<8?Yo[Ee]:Ee<64&&P[Ee-8]||Yo[Ee]},A=function(Ee,Se,Le){var ze=Se.XF.data;if(!(!ze||!ze.patternType||!Le||!Le.cellStyles)){Se.s={},Se.s.patternType=ze.patternType;var lt;(lt=Md(m(ze.icvFore)))&&(Se.s.fgColor={rgb:lt}),(lt=Md(m(ze.icvBack)))&&(Se.s.bgColor={rgb:lt})}},k=function(Ee,Se,Le){if(!(H>1)&&!(Le.sheetRows&&Ee.r>=Le.sheetRows)){if(Le.cellStyles&&Se.XF&&Se.XF.data&&A(Ee,Se,Le),delete Se.ixfe,delete Se.XF,f=Ee,h=Mt(Ee),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),Ee.r<a.s.r&&(a.s.r=Ee.r),Ee.c<a.s.c&&(a.s.c=Ee.c),Ee.r+1>a.e.r&&(a.e.r=Ee.r+1),Ee.c+1>a.e.c&&(a.e.c=Ee.c+1),Le.cellFormula&&Se.f){for(var ze=0;ze<E.length;++ze)if(!(E[ze][0].s.c>Ee.c||E[ze][0].s.r>Ee.r)&&!(E[ze][0].e.c<Ee.c||E[ze][0].e.r<Ee.r)){Se.F=sr(E[ze][0]),(E[ze][0].s.c!=Ee.c||E[ze][0].s.r!=Ee.r)&&delete Se.f,Se.f&&(Se.f=""+Gn(E[ze][1],a,Ee,O,I));break}}Le.dense?(s[Ee.r]||(s[Ee.r]=[]),s[Ee.r][Ee.c]=Se):s[h]=Se}},I={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:E,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(I.password=e.password);var C,M=[],D=[],F=[],N=[],L=!1,O=[];O.SheetNames=I.snames,O.sharedf=I.sharedf,O.arrayf=I.arrayf,O.names=[],O.XTI=[];var z=0,H=0,V=0,W=[],G=[],re;I.codepage=1200,ca(1200);for(var de=!1;t.l<t.length-1;){var ae=t.l,ce=t.read_shift(2);if(ce===0&&z===10)break;var te=t.l===t.length?0:t.read_shift(2),Z=Zv[ce];if(Z&&Z.f){if(e.bookSheets&&z===133&&ce!==133)break;if(z=ce,Z.r===2||Z.r==12){var xe=t.read_shift(2);if(te-=2,!I.enc&&xe!==ce&&((xe&255)<<8|xe>>8)!==ce)throw new Error("rt mismatch: "+xe+"!="+ce);Z.r==12&&(t.l+=10,te-=10)}var J={};if(ce===10?J=Z.f(t,te,I):J=Rae(ce,Z,t,te,I),H==0&&[9,521,1033,2057].indexOf(z)===-1)continue;switch(ce){case 34:r.opts.Date1904=S.WBProps.date1904=J;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(I.enc||(t.l=0),I.enc=J,!e.password)throw new Error("File is password-protected");if(J.valid==null)throw new Error("Encryption scheme unsupported");if(!J.valid)throw new Error("Password is incorrect");break;case 92:I.lastuser=J;break;case 66:var Y=Number(J);switch(Y){case 21010:Y=1200;break;case 32768:Y=1e4;break;case 32769:Y=1252;break}ca(I.codepage=Y),de=!0;break;case 317:I.rrtabid=J;break;case 25:I.winlocked=J;break;case 439:r.opts.RefreshAll=J;break;case 12:r.opts.CalcCount=J;break;case 16:r.opts.CalcDelta=J;break;case 17:r.opts.CalcIter=J;break;case 13:r.opts.CalcMode=J;break;case 14:r.opts.CalcPrecision=J;break;case 95:r.opts.CalcSaveRecalc=J;break;case 15:I.CalcRefMode=J;break;case 2211:r.opts.FullCalc=J;break;case 129:J.fDialog&&(s["!type"]="dialog"),J.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),J.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:R.push(J);break;case 430:O.push([J]),O[O.length-1].XTI=[];break;case 35:case 547:O[O.length-1].push(J);break;case 24:case 536:re={Name:J.Name,Ref:Gn(J.rgce,a,null,O,I)},J.itab>0&&(re.Sheet=J.itab-1),O.names.push(re),O[0]||(O[0]=[],O[0].XTI=[]),O[O.length-1].push(J),J.Name=="_xlnm._FilterDatabase"&&J.itab>0&&J.rgce&&J.rgce[0]&&J.rgce[0][0]&&J.rgce[0][0][0]=="PtgArea3d"&&(G[J.itab-1]={ref:sr(J.rgce[0][0][1][2])});break;case 22:I.ExternCount=J;break;case 23:O.length==0&&(O[0]=[],O[0].XTI=[]),O[O.length-1].XTI=O[O.length-1].XTI.concat(J),O.XTI=O.XTI.concat(J);break;case 2196:if(I.biff<8)break;re!=null&&(re.Comment=J[1]);break;case 18:s["!protect"]=J;break;case 19:J!==0&&I.WTF&&console.error("Password verifier: "+J);break;case 133:i[J.pos]=J,I.snames.push(J.name);break;case 10:{if(--H)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,s["!ref"]=sr(a),e.sheetRows&&e.sheetRows<=a.e.r){var Q=a.e.r;a.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=sr(a),a.e.r=Q}a.e.r++,a.e.c++}M.length>0&&(s["!merges"]=M),D.length>0&&(s["!objects"]=D),F.length>0&&(s["!cols"]=F),N.length>0&&(s["!rows"]=N),S.Sheets.push(_)}c===""?u=s:n[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(I.biff===8&&(I.biff={9:2,521:3,1033:4}[ce]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[J.BIFFVer]||8),I.biffguess=J.BIFFVer==0,J.BIFFVer==0&&J.dt==4096&&(I.biff=5,de=!0,ca(I.codepage=28591)),I.biff==8&&J.BIFFVer==0&&J.dt==16&&(I.biff=2),H++)break;if(s=e.dense?[]:{},I.biff<8&&!de&&(de=!0,ca(I.codepage=e.codepage||1252)),I.biff<5||J.BIFFVer==0&&J.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var fe={pos:t.l-te,name:c};i[fe.pos]=fe,I.snames.push(c)}else c=(i[ae]||{name:""}).name;J.dt==32&&(s["!type"]="chart"),J.dt==64&&(s["!type"]="macro"),M=[],D=[],I.arrayf=E=[],F=[],N=[],L=!1,_={Hidden:(i[ae]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[J.r]||[])[J.c]:s[Mt({c:J.c,r:J.r})])&&++J.c,x={ixfe:J.ixfe,XF:R[J.ixfe]||{},v:J.val,t:"n"},V>0&&(x.z=W[x.ixfe>>8&63]),Ta(x,e,r.opts.Date1904),k({c:J.c,r:J.r},x,e);break;case 5:case 517:x={ixfe:J.ixfe,XF:R[J.ixfe],v:J.val,t:J.t},V>0&&(x.z=W[x.ixfe>>8&63]),Ta(x,e,r.opts.Date1904),k({c:J.c,r:J.r},x,e);break;case 638:x={ixfe:J.ixfe,XF:R[J.ixfe],v:J.rknum,t:"n"},V>0&&(x.z=W[x.ixfe>>8&63]),Ta(x,e,r.opts.Date1904),k({c:J.c,r:J.r},x,e);break;case 189:for(var ye=J.c;ye<=J.C;++ye){var ie=J.rkrec[ye-J.c][0];x={ixfe:ie,XF:R[ie],v:J.rkrec[ye-J.c][1],t:"n"},V>0&&(x.z=W[x.ixfe>>8&63]),Ta(x,e,r.opts.Date1904),k({c:ye,r:J.r},x,e)}break;case 6:case 518:case 1030:{if(J.val=="String"){o=J;break}if(x=o0(J.val,J.cell.ixfe,J.tt),x.XF=R[x.ixfe],e.cellFormula){var ee=J.formula;if(ee&&ee[0]&&ee[0][0]&&ee[0][0][0]=="PtgExp"){var ge=ee[0][0][1][0],Te=ee[0][0][1][1],ke=Mt({r:ge,c:Te});b[ke]?x.f=""+Gn(J.formula,a,J.cell,O,I):x.F=((e.dense?(s[ge]||[])[Te]:s[ke])||{}).F}else x.f=""+Gn(J.formula,a,J.cell,O,I)}V>0&&(x.z=W[x.ixfe>>8&63]),Ta(x,e,r.opts.Date1904),k(J.cell,x,e),o=J}break;case 7:case 519:if(o)o.val=J,x=o0(J,o.cell.ixfe,"s"),x.XF=R[x.ixfe],e.cellFormula&&(x.f=""+Gn(o.formula,a,o.cell,O,I)),V>0&&(x.z=W[x.ixfe>>8&63]),Ta(x,e,r.opts.Date1904),k(o.cell,x,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{E.push(J);var Ae=Mt(J[0].s);if(p=e.dense?(s[J[0].s.r]||[])[J[0].s.c]:s[Ae],e.cellFormula&&p){if(!o||!Ae||!p)break;p.f=""+Gn(J[1],a,J[0],O,I),p.F=sr(J[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!o)break;b[Mt(o.cell)]=J[0],p=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Mt(o.cell)],(p||{}).f=""+Gn(J[0],a,f,O,I)}}break;case 253:x=o0(l[J.isst].t,J.ixfe,"s"),l[J.isst].h&&(x.h=l[J.isst].h),x.XF=R[x.ixfe],V>0&&(x.z=W[x.ixfe>>8&63]),Ta(x,e,r.opts.Date1904),k({c:J.c,r:J.r},x,e);break;case 513:e.sheetStubs&&(x={ixfe:J.ixfe,XF:R[J.ixfe],t:"z"},V>0&&(x.z=W[x.ixfe>>8&63]),Ta(x,e,r.opts.Date1904),k({c:J.c,r:J.r},x,e));break;case 190:if(e.sheetStubs)for(var We=J.c;We<=J.C;++We){var De=J.ixfe[We-J.c];x={ixfe:De,XF:R[De],t:"z"},V>0&&(x.z=W[x.ixfe>>8&63]),Ta(x,e,r.opts.Date1904),k({c:We,r:J.r},x,e)}break;case 214:case 516:case 4:x=o0(J.val,J.ixfe,"s"),x.XF=R[x.ixfe],V>0&&(x.z=W[x.ixfe>>8&63]),Ta(x,e,r.opts.Date1904),k({c:J.c,r:J.r},x,e);break;case 0:case 512:H===1&&(a=J);break;case 252:l=J;break;case 1054:if(I.biff==4){W[V++]=J[1];for(var je=0;je<V+163&&Ut[je]!=J[1];++je);je>=163&&Xo(J[1],V+163)}else Xo(J[1],J[0]);break;case 30:{W[V++]=J;for(var $e=0;$e<V+163&&Ut[$e]!=J;++$e);$e>=163&&Xo(J,V+163)}break;case 229:M=M.concat(J);break;case 93:D[J.cmo[0]]=I.lastobj=J;break;case 438:I.lastobj.TxO=J;break;case 127:I.lastobj.ImData=J;break;case 440:for(y=J[0].s.r;y<=J[0].e.r;++y)for(v=J[0].s.c;v<=J[0].e.c;++v)p=e.dense?(s[y]||[])[v]:s[Mt({c:v,r:y})],p&&(p.l=J[1]);break;case 2048:for(y=J[0].s.r;y<=J[0].e.r;++y)for(v=J[0].s.c;v<=J[0].e.c;++v)p=e.dense?(s[y]||[])[v]:s[Mt({c:v,r:y})],p&&p.l&&(p.l.Tooltip=J[1]);break;case 28:{if(I.biff<=5&&I.biff>=2)break;p=e.dense?(s[J[0].r]||[])[J[0].c]:s[Mt(J[0])];var Ie=D[J[2]];p||(e.dense?(s[J[0].r]||(s[J[0].r]=[]),p=s[J[0].r][J[0].c]={t:"z"}):p=s[Mt(J[0])]={t:"z"},a.e.r=Math.max(a.e.r,J[0].r),a.s.r=Math.min(a.s.r,J[0].r),a.e.c=Math.max(a.e.c,J[0].c),a.s.c=Math.min(a.s.c,J[0].c)),p.c||(p.c=[]),g={a:J[1],t:Ie.TxO.t},p.c.push(g)}break;case 2173:tre(R[J.ixfe],J.ext);break;case 125:{if(!I.cellStyles)break;for(;J.e>=J.s;)F[J.e--]={width:J.w/256,level:J.level||0,hidden:!!(J.flags&1)},L||(L=!0,kx(J.w/256)),Mc(F[J.e+1])}break;case 520:{var Ke={};J.level!=null&&(N[J.r]=Ke,Ke.level=J.level),J.hidden&&(N[J.r]=Ke,Ke.hidden=!0),J.hpt&&(N[J.r]=Ke,Ke.hpt=J.hpt,Ke.hpx=Ld(J.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||sd(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ce]]=J;break;case 161:s["!margins"]||sd(s["!margins"]={}),s["!margins"].header=J.header,s["!margins"].footer=J.footer;break;case 574:J.RTL&&(S.Views[0].RTL=!0);break;case 146:P=J;break;case 2198:C=J;break;case 140:w=J;break;case 442:c?_.CodeName=J||_.name:S.WBProps.CodeName=J||"ThisWorkbook";break}}else Z||console.error("Missing Info for XLS Record 0x"+ce.toString(16)),t.l+=te}return r.SheetNames=$a(i).sort(function(_e,Ee){return Number(_e)-Number(Ee)}).map(function(_e){return i[_e].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&G.forEach(function(_e,Ee){r.Sheets[r.SheetNames[Ee]]["!autofilter"]=_e}),r.Strings=l,r.SSF=Fn(Ut),I.enc&&(r.Encryption=I.enc),C&&(r.Themes=C),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),O.names.length>0&&(S.Names=O.names),r.Workbook=S,r}var FS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Nae(t,e,r){var n=rr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=gS(n,QJ,FS.DSI);for(var i in s)e[i]=s[i]}catch(c){if(r.WTF)throw c}var a=rr.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=gS(a,JJ,FS.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(_I(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function sD(t,e){e||(e={}),Fx(e),Fk(),e.codepage&&dx(e.codepage);var r,n;if(t.FullPaths){if(rr.find(t,"/encryption"))throw new Error("File is password-protected");r=rr.find(t,"!CompObj"),n=rr.find(t,"/Workbook")||rr.find(t,"/Book")}else{switch(e.type){case"base64":t=la(Fs(t));break;case"binary":t=la(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}wn(t,0),n={content:t}}var s,i;if(r&&Dae(r),e.bookProps&&!e.bookSheets)s={};else{var a=Zt?"buffer":"array";if(n&&n.content)s=Fae(n.content,e);else if((i=rr.find(t,"PerfectOffice_MAIN"))&&i.content)s=rd.to_workbook(i.content,(e.type=a,e));else if((i=rr.find(t,"NativeContent_MAIN"))&&i.content)s=rd.to_workbook(i.content,(e.type=a,e));else throw(i=rr.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&rr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=xre(t))}var o={};return t.FullPaths&&Nae(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}var Oh={0:{f:mse},1:{f:xse},2:{f:kse},3:{f:Sse},4:{f:_se},5:{f:Cse},6:{f:Pse},7:{f:Tse},8:{f:Mse},9:{f:Ose},10:{f:Fse},11:{f:Nse},12:{f:Ese},13:{f:Ise},14:{f:Ase},15:{f:bse},16:{f:ZI},17:{f:Rse},18:{f:wse},19:{f:bx},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:cae},40:{},42:{},43:{f:Fte},44:{f:Rte},45:{f:Nte},46:{f:Mte},47:{f:Ote},48:{},49:{f:LJ},50:{},51:{f:nre},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:FI},62:{f:Dse},63:{f:lre},64:{f:Wse},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ts,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Gse},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:yse},148:{f:gse,p:16},151:{f:Use},152:{},153:{f:oae},154:{},155:{},156:{f:iae},157:{},158:{},159:{T:1,f:Jee},160:{T:-1},161:{T:1,f:Al},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Lse},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:rre},336:{T:-1},337:{f:sre,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:qv},357:{},358:{},359:{},360:{T:1},361:{},362:{f:RI},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:$se},427:{f:Vse},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:jse},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:vse},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Bse},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:qv},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:gre},633:{T:1},634:{T:-1},635:{T:1,f:mre},636:{T:-1},637:{f:UJ},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Qse},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:zse},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Zv={6:{f:Sg},10:{f:Ui},12:{f:en},13:{f:en},14:{f:zr},15:{f:zr},16:{f:Kn},17:{f:zr},18:{f:zr},19:{f:en},20:{f:ES},21:{f:ES},23:{f:RI},24:{f:bS},25:{f:zr},26:{},27:{},28:{f:hee},29:{},34:{f:zr},35:{f:_S},38:{f:Kn},39:{f:Kn},40:{f:Kn},41:{f:Kn},42:{f:zr},43:{f:zr},47:{f:vte},49:{f:qZ},51:{f:en},60:{},61:{f:WZ},64:{f:zr},65:{f:KZ},66:{f:en},77:{},80:{},81:{},82:{},85:{f:en},89:{},90:{},91:{},92:{f:LZ},93:{f:mee},94:{},95:{f:zr},96:{},97:{},99:{f:zr},125:{f:FI},128:{f:see},129:{f:BZ},130:{f:en},131:{f:zr},132:{f:zr},133:{f:UZ},134:{},140:{f:_ee},141:{f:en},144:{},146:{f:See},151:{},152:{},153:{},154:{},155:{},156:{f:en},157:{},158:{},160:{f:kee},161:{f:Tee},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:eee},190:{f:tee},193:{f:Ui},197:{},198:{},199:{},200:{},201:{},202:{f:zr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:en},220:{},221:{f:zr},222:{},224:{f:nee},225:{f:MZ},226:{f:Ui},227:{},229:{f:pee},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:$Z},253:{f:XZ},255:{f:VZ},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:wI},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:zr},353:{f:Ui},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:iee},431:{f:zr},432:{},433:{},434:{},437:{},438:{f:yee},439:{f:zr},440:{f:xee},441:{},442:{f:hf},443:{},444:{f:en},445:{},446:{},448:{f:Ui},449:{f:GZ,r:2},450:{f:Ui},512:{f:yS},513:{f:Cee},515:{f:aee},516:{f:YZ},517:{f:xS},519:{f:Iee},520:{f:HZ},523:{},545:{f:SS},549:{f:vS},566:{},574:{f:zZ},638:{f:ZZ},659:{},1048:{},1054:{f:QZ},1084:{},1212:{f:uee},2048:{f:Eee},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:s0},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ui},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Aee,r:12},2173:{f:ere,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:zr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:cee,r:12},2197:{},2198:{f:qte,r:12},2199:{},2200:{},2201:{},2202:{f:dee,r:12},2203:{f:Ui},2204:{},2205:{},2206:{},2207:{},2211:{f:jZ},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:en},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:wee},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:bee},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:yS},1:{},2:{f:Fee},3:{f:Ree},4:{f:Pee},5:{f:xS},7:{f:Nee},8:{},9:{f:s0},11:{},22:{f:en},30:{f:JZ},31:{},32:{},33:{f:SS},36:{},37:{f:vS},50:{f:Oee},62:{},52:{},67:{},68:{f:en},69:{},86:{},126:{},127:{f:Dee},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Mee},223:{},234:{},354:{},421:{},518:{f:Sg},521:{f:s0},536:{f:bS},547:{f:_S},561:{},579:{},1030:{f:Sg},1033:{f:s0},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function ta(t,e,r,n){var s=e;if(!isNaN(s)){var i=(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&hI(r)&&t.push(r)}}function NS(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),a=s.index,o=i&&i.index||t.length,l=aJ(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(a=0;a<l.length;++a){var v=l[a].trim(),y=v.slice(0,3).toLowerCase();if(y=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(y!="<td"&&y!="<th")){var b=v.split(/<\/t[dh]>/i);for(o=0;o<b.length;++o){var E=b[o].trim();if(E.match(/<t[dh]/i)){for(var x=E,w=0;x.charAt(0)=="<"&&(w=x.indexOf(">"))>-1;)x=x.slice(w+1);for(var R=0;R<g.length;++R){var P=g[R];P.s.c==u&&P.s.r<c&&c<=P.e.r&&(u=P.e.c+1,R=-1)}var S=kt(E.slice(0,E.indexOf(">")));h=S.colspan?+S.colspan:1,((f=+S.rowspan)>1||h>1)&&g.push({s:{r:c,c:u},e:{r:c+(f||1)-1,c:u+h-1}});var _=S.t||S["data-t"]||"";if(!x.length){u+=h;continue}if(x=eI(x),p.s.r>c&&(p.s.r=c),p.e.r<c&&(p.e.r=c),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!x.length){u+=h;continue}var m={t:"s",v:x};r.raw||!x.trim().length||_=="s"||(x==="TRUE"?m={t:"b",v:!0}:x==="FALSE"?m={t:"b",v:!1}:isNaN(ha(x))?isNaN(Oc(x).getDate())||(m={t:"d",v:vn(x)},r.cellDates||(m={t:"n",v:ps(m.v)}),m.z=r.dateNF||Ut[14]):m={t:"n",v:ha(x)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=m):n[Mt({r:c,c:u})]=m,u+=h}}}}return n["!ref"]=sr(p),g.length&&(n["!merges"]=g),n}function Oae(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var u=Mt({r,c:a}),f=n.dense?(t[r]||[])[a]:t[u],h=f&&f.v!=null&&(f.h||vx(f.w||(wi(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+u,i.push(_J("td",h,p))}}var g="<tr>";return g+i.join("")+"</tr>"}var Mae='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Lae="</body></html>";function Bae(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return bo(NS(r[0],e),e);var n=Ox();return r.forEach(function(s,i){Mx(n,NS(s,e),"Sheet"+(i+1))}),n}function Uae(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function $ae(t,e){var r=e||{},n=r.header!=null?r.header:Mae,s=r.footer!=null?r.footer:Lae,i=[n],a=Xc(t["!ref"]);r.dense=Array.isArray(t),i.push(Uae(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(Oae(t,a,o,r));return i.push("</table>"+s),i.join("")}function aD(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?ds(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var u=Xc(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),s==-1&&(c.e.r=s=u.e.r+1)}var f=[],h=0,p=t["!rows"]||(t["!rows"]=[]),g=0,v=0,y=0,b=0,E=0,x=0;for(t["!cols"]||(t["!cols"]=[]);g<o.length&&v<l;++g){var w=o[g];if(OS(w)){if(n.display)continue;p[v]={hidden:!0}}var R=w.children;for(y=b=0;y<R.length;++y){var P=R[y];if(!(n.display&&OS(P))){var S=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):eI(P.innerHTML),_=P.getAttribute("data-z")||P.getAttribute("z");for(h=0;h<f.length;++h){var m=f[h];m.s.c==b+i&&m.s.r<v+s&&v+s<=m.e.r&&(b=m.e.c+1-i,h=-1)}x=+P.getAttribute("colspan")||1,((E=+P.getAttribute("rowspan")||1)>1||x>1)&&f.push({s:{r:v+s,c:b+i},e:{r:v+s+(E||1)-1,c:b+i+(x||1)-1}});var A={t:"s",v:S},k=P.getAttribute("data-t")||P.getAttribute("t")||"";S!=null&&(S.length==0?A.t=k||"z":n.raw||S.trim().length==0||k=="s"||(S==="TRUE"?A={t:"b",v:!0}:S==="FALSE"?A={t:"b",v:!1}:isNaN(ha(S))?isNaN(Oc(S).getDate())||(A={t:"d",v:vn(S)},n.cellDates||(A={t:"n",v:ps(A.v)}),A.z=n.dateNF||Ut[14]):A={t:"n",v:ha(S)})),A.z===void 0&&_!=null&&(A.z=_);var I="",C=P.getElementsByTagName("A");if(C&&C.length)for(var M=0;M<C.length&&!(C[M].hasAttribute("href")&&(I=C[M].getAttribute("href"),I.charAt(0)!="#"));++M);I&&I.charAt(0)!="#"&&(A.l={Target:I}),n.dense?(t[v+s]||(t[v+s]=[]),t[v+s][b+i]=A):t[Mt({c:b+i,r:v+s})]=A,c.e.c<b+i&&(c.e.c=b+i),b+=x}}++v}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),c.e.r=Math.max(c.e.r,v-1+s),t["!ref"]=sr(c),v>=l&&(t["!fullref"]=sr((c.e.r=o.length-g+v-1+s,c))),t}function iD(t,e){var r=e||{},n=r.dense?[]:{};return aD(n,t,e)}function Vae(t,e){return bo(iD(t,e),e)}function OS(t){var e="",r=Hae(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Hae(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function jae(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=ar(e.replace(/<[^>]*>/g,""));return[r]}var MS={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function oD(t,e){var r=e||{},n=yx(t),s=[],i,a,o={name:""},l="",c=0,u,f,h={},p=[],g=r.dense?[]:{},v,y,b={value:""},E="",x=0,w=[],R=-1,P=-1,S={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,m={},A=[],k={},I=0,C=0,M=[],D=1,F=1,N=[],L={Names:[]},O={},z=["",""],H=[],V={},W="",G=0,re=!1,de=!1,ae=0;for(Nd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=Nd.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(S.e.c>=S.s.c&&S.e.r>=S.s.r?g["!ref"]=sr(S):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=S.e.r&&(g["!fullref"]=g["!ref"],S.e.r=r.sheetRows-1,g["!ref"]=sr(S)),A.length&&(g["!merges"]=A),M.length&&(g["!rows"]=M),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),h[u.name]=g,de=!1):v[0].charAt(v[0].length-2)!=="/"&&(u=kt(v[0],!1),R=P=-1,S.s.r=S.s.c=1e7,S.e.r=S.e.c=0,g=r.dense?[]:{},A=[],M=[],de=!0);break;case"table-row-group":v[1]==="/"?--_:++_;break;case"table-row":case"":if(v[1]==="/"){R+=D,D=1;break}if(f=kt(v[0],!1),f.?R=f.-1:R==-1&&(R=0),D=+f["number-rows-repeated"]||1,D<10)for(ae=0;ae<D;++ae)_>0&&(M[R+ae]={level:_});P=-1;break;case"covered-table-cell":v[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(g[R]||(g[R]=[]),g[R][P]={t:"z"}):g[Mt({r:R,c:P})]={t:"z"}),E="",w=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++P,b=kt(v[0],!1),F=parseInt(b["number-columns-repeated"]||"1",10),y={t:"z",v:null},b.formula&&r.cellFormula!=!1&&(y.f=DS(ar(b.formula))),(b.||b["value-type"])=="string"&&(y.t="s",y.v=ar(b["string-value"]||""),r.dense?(g[R]||(g[R]=[]),g[R][P]=y):g[Mt({r:R,c:P})]=y),P+=F-1;else if(v[1]!=="/"){++P,E="",x=0,w=[],F=1;var ce=D?R+D-1:R;if(P>S.e.c&&(S.e.c=P),P<S.s.c&&(S.s.c=P),R<S.s.r&&(S.s.r=R),ce>S.e.r&&(S.e.r=ce),b=kt(v[0],!1),H=[],V={},y={t:b.||b["value-type"],v:null},r.cellFormula)if(b.formula&&(b.formula=ar(b.formula)),b["number-matrix-columns-spanned"]&&b["number-matrix-rows-spanned"]&&(I=parseInt(b["number-matrix-rows-spanned"],10)||0,C=parseInt(b["number-matrix-columns-spanned"],10)||0,k={s:{r:R,c:P},e:{r:R+I-1,c:P+C-1}},y.F=sr(k),N.push([k,y.F])),b.formula)y.f=DS(b.formula);else for(ae=0;ae<N.length;++ae)R>=N[ae][0].s.r&&R<=N[ae][0].e.r&&P>=N[ae][0].s.c&&P<=N[ae][0].e.c&&(y.F=N[ae][1]);switch((b["number-columns-spanned"]||b["number-rows-spanned"])&&(I=parseInt(b["number-rows-spanned"],10)||0,C=parseInt(b["number-columns-spanned"],10)||0,k={s:{r:R,c:P},e:{r:R+I-1,c:P+C-1}},A.push(k)),b["number-columns-repeated"]&&(F=parseInt(b["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=Dr(b["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(b.value);break;case"percentage":y.t="n",y.v=parseFloat(b.value);break;case"currency":y.t="n",y.v=parseFloat(b.value);break;case"date":y.t="d",y.v=vn(b["date-value"]),r.cellDates||(y.t="n",y.v=ps(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=rJ(b["time-value"])/86400,r.cellDates&&(y.t="d",y.v=jp(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(b.);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",b["string-value"]!=null&&(E=ar(b["string-value"]),w=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(re=!1,y.t==="s"&&(y.v=E||"",w.length&&(y.R=w),re=x==0),O.Target&&(y.l=O),H.length>0&&(y.c=H,H=[]),E&&r.cellText!==!1&&(y.w=E),re&&(y.t="z",delete y.v),(!re||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=R))for(var te=0;te<D;++te){if(F=parseInt(b["number-columns-repeated"]||"1",10),r.dense)for(g[R+te]||(g[R+te]=[]),g[R+te][P]=te==0?y:Fn(y);--F>0;)g[R+te][P+F]=Fn(y);else for(g[Mt({r:R+te,c:P})]=y;--F>0;)g[Mt({r:R+te,c:P+F})]=Fn(y);S.e.c<=P&&(S.e.c=P)}F=parseInt(b["number-columns-repeated"]||"1",10),P+=F-1,F=0,y={},E="",w=[]}O={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i;V.t=E,w.length&&(V.R=w),V.a=W,H.push(V)}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);W="",G=0,E="",x=0,w=[];break;case"creator":v[1]==="/"?W=n.slice(G,v.index):G=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);E="",x=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(m[o.name]=l,(i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&(l="",o=kt(v[0],!1),s.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":a=kt(v[0],!1),l+=MS[v[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":a=kt(v[0],!1),l+=MS[v[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,v.index);break}else c=v.index+v[0].length;break;case"named-range":a=kt(v[0],!1),z=Ag(a["cell-range-address"]);var Z={Name:a.name,Ref:z[0]+"!"+z[1]};de&&(Z.Sheet=p.length),L.Names.push(Z);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(v[1]==="/"&&(!b||!b["string-value"])){var xe=jae(n.slice(x,v.index));E=(E.length>0?E+`
`:"")+xe[0]}else kt(v[0],!1),x=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{z=Ag(kt(v[0])["target-range-address"]),h[z[0]]["!autofilter"]={ref:z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(O=kt(v[0],!1),!O.href)break;O.Target=ar(O.href),delete O.href,O.Target.charAt(0)=="#"&&O.Target.indexOf(".")>-1?(z=Ag(O.Target.slice(1)),O.Target="#"+z[0]+"!"+z[1]):O.Target.match(/^\.\.[\\\/]/)&&(O.Target=O.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var J={Sheets:h,SheetNames:p,Workbook:L};return r.bookSheets&&delete J.Sheets,J}function LS(t,e){e=e||{},Vs(t,"META-INF/manifest.xml")&&aZ(Zr(t,"META-INF/manifest.xml"),e);var r=ks(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=oD(Ar(r),e);return Vs(t,"meta.xml")&&(n.Props=EI(Zr(t,"meta.xml"))),n}function BS(t,e){return oD(t,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Px(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function e1(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Ar(bl(t))}function t1(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function US(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Gae(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function Bd(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function dn(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Qn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=Bd(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=Bd(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function Rx(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Wae(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=Bd(t,n),i=Qn(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:dn(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=Qn(o.data),c=dn(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=dn(i[3][0].data)>>>0>0),r.push(a)}return r}function zae(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Bd(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[t1(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var u=t1(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function Kae(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(zae(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return t1(e)}function qae(t,e,r,n){var s=Px(t),i=s.getUint32(4,!0),a=(n>1?12:8)+US(i&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);i&512&&(o=s.getUint32(a,!0),a+=4),a+=US(i&(n>1?12288:4096))*4,i&16&&(l=s.getUint32(a,!0),a+=4),i&32&&(c=s.getFloat64(a,!0),a+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(a,!0)*1e3),a+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:e[l]};else if(!isNaN(c))f={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function Xae(t,e,r){var n=Px(t),s=n.getUint32(8,!0),i=12,a=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);s&1&&(l=Gae(t,i),i+=16),s&2&&(c=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=n.getUint32(i,!0),i+=4),s&16&&(a=n.getUint32(i,!0),i+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:e[o]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(a>-1)f={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return f}function Yae(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return qae(t,e,r,t[0]);case 5:return Xae(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function io(t){var e=Qn(t);return Bd(e[1][0].data)}function $S(t,e){var r=Qn(e.data),n=dn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(a){var o=Qn(a.data),l=dn(o[1][0].data)>>>0;switch(n){case 1:i[l]=e1(o[3][0].data);break;case 8:{var c=t[io(o[9][0].data)][0],u=Qn(c.data),f=t[io(u[1][0].data)][0],h=dn(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=Qn(f.data);i[l]=p[3].map(function(g){return e1(g.data)}).join("")}break}}),i}function Qae(t,e){var r,n,s,i,a,o,l,c,u,f,h,p,g,v,y=Qn(t),b=dn(y[1][0].data)>>>0,E=dn(y[2][0].data)>>>0,x=((n=(r=y[8])==null?void 0:r[0])==null?void 0:n.data)&&dn(y[8][0].data)>0||!1,w,R;if((i=(s=y[7])==null?void 0:s[0])!=null&&i.data&&e!=0)w=(o=(a=y[7])==null?void 0:a[0])==null?void 0:o.data,R=(c=(l=y[6])==null?void 0:l[0])==null?void 0:c.data;else if((f=(u=y[4])==null?void 0:u[0])!=null&&f.data&&e!=1)w=(p=(h=y[4])==null?void 0:h[0])==null?void 0:p.data,R=(v=(g=y[3])==null?void 0:g[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var P=x?4:1,S=Px(w),_=[],m=0;m<w.length/2;++m){var A=S.getUint16(m*2,!0);A<65535&&_.push([m,A])}if(_.length!=E)throw"Expected ".concat(E," cells, found ").concat(_.length);var k=[];for(m=0;m<_.length-1;++m)k[_[m][0]]=R.subarray(_[m][1]*P,_[m+1][1]*P);return _.length>=1&&(k[_[_.length-1][0]]=R.subarray(_[_.length-1][1]*P)),{R:b,cells:k}}function Jae(t,e){var r,n=Qn(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?dn(n[7][0].data)>>>0>0?1:0:-1,i=Rx(n[5],function(a){return Qae(a,s)});return{nrows:dn(n[4][0].data)>>>0,data:i.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function Zae(t,e,r){var n,s=Qn(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(dn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(dn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=sr(i);var a=Qn(s[4][0].data),o=$S(t,t[io(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?$S(t,t[io(a[17][0].data)][0]):[],c=Qn(a[3][0].data),u=0;c[1].forEach(function(f){var h=Qn(f.data),p=t[io(h[2][0].data)][0],g=dn(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var v=Jae(t,p);v.data.forEach(function(y,b){y.forEach(function(E,x){var w=Mt({r:u+b,c:x}),R=Yae(E,o,l);R&&(r[w]=R)})}),u+=v.nrows})}function eie(t,e){var r=Qn(e.data),n={"!ref":"A1"},s=t[io(r[2][0].data)],i=dn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Zae(t,s[0],n),n}function tie(t,e){var r,n=Qn(e.data),s={name:(r=n[1])!=null&&r[0]?e1(n[1][0].data):"",sheets:[]},i=Rx(n[2],io);return i.forEach(function(a){t[a].forEach(function(o){var l=dn(o.meta[1][0].data);l==6e3&&s.sheets.push(eie(t,o))})}),s}function rie(t,e){var r=Ox(),n=Qn(e.data),s=Rx(n[1],io);if(s.forEach(function(i){t[i].forEach(function(a){var o=dn(a.meta[1][0].data);if(o==2){var l=tie(t,a);l.sheets.forEach(function(c,u){Mx(r,c,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function wg(t){var e,r,n,s,i={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Kae(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var u;try{u=Wae(c)}catch(f){return console.log("## "+(f.message||f))}u.forEach(function(f){i[f.id]=f.messages,a.push(f.id)})}}),!a.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&dn(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||a.forEach(function(l){i[l].forEach(function(c){var u=dn(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return rie(i,o)}function nie(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function Fx(t){nie([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function sie(t){return Zl.WS.indexOf(t)>-1?"sheet":t==Zl.CS?"chart":t==Zl.DS?"dialog":t==Zl.MS?"macro":t&&t.length?t:"sheet"}function aie(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,sie(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function iie(t,e,r,n,s,i,a,o,l,c,u,f){try{i[n]=ed(ks(t,r,!0),e);var h=Zr(t,e),p;switch(o){case"sheet":p=fae(h,e,s,l,i[n],c,u,f);break;case"chart":if(p=hae(h,e,s,l,i[n],c,u,f),!p||!p["!drawel"])break;var g=Cu(p["!drawel"].Target,e),v=Xv(g),y=dre(ks(t,g,!0),ed(ks(t,v,!0),g)),b=Cu(y,g),E=Xv(b);p=Xse(ks(t,b,!0),b,l,ed(ks(t,E,!0),b),c,p);break;case"macro":p=pae(h,e,s,l,i[n],c,u,f);break;case"dialog":p=mae(h,e,s,l,i[n],c,u,f);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=p;var x=[];i&&i[n]&&$a(i[n]).forEach(function(w){var R="";if(i[n][w].Type==Zl.CMNT){R=Cu(i[n][w].Target,e);var P=xae(Zr(t,R,!0),R,l);if(!P||!P.length)return;TS(p,P,!1)}i[n][w].Type==Zl.TCMNT&&(R=Cu(i[n][w].Target,e),x=x.concat(hre(Zr(t,R,!0),l)))}),x&&x.length&&TS(p,x,!0,l.people||[])}catch(w){if(l.WTF)throw w}}function Bs(t){return t.charAt(0)=="/"?t.slice(1):t}function oie(t,e){if(Wk(),e=e||{},Fx(e),Vs(t,"META-INF/manifest.xml")||Vs(t,"objectdata.xml"))return LS(t,e);if(Vs(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof wg<"u"){if(t.FileIndex)return wg(t);var r=rr.utils.cfb_new();return Jb(t).forEach(function(M){lJ(r,M,oJ(t,M))}),wg(r)}throw new Error("Unsupported NUMBERS file")}if(!Vs(t,"[Content_Types].xml"))throw Vs(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Vs(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=Jb(t),s=nZ(ks(t,"[Content_Types].xml")),i=!1,a,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Zr(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Zr(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(nd=[],s.sst)try{nd=yae(Zr(t,Bs(s.sst)),s.sst,e)}catch(M){if(e.WTF)throw M}e.cellStyles&&s.themes.length&&(l=vae(ks(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=gae(Zr(t,Bs(s.style)),s.style,l,e))}s.links.map(function(M){try{var D=ed(ks(t,Xv(Bs(M))),M);return _ae(Zr(t,Bs(M)),D,M,e)}catch{}});var u=dae(Zr(t,Bs(s.workbooks[0])),s.workbooks[0],e),f={},h="";s.coreprops.length&&(h=Zr(t,Bs(s.coreprops[0]),!0),h&&(f=EI(h)),s.extprops.length!==0&&(h=Zr(t,Bs(s.extprops[0]),!0),h&&lZ(h,f,e)));var p={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(h=ks(t,Bs(s.custprops[0]),!0),h&&(p=uZ(h,e)));var g={};if((e.bookSheets||e.bookProps)&&(u.Sheets?a=u.Sheets.map(function(D){return D.name}):f.Worksheets&&f.SheetNames.length>0&&(a=f.SheetNames),e.bookProps&&(g.Props=f,g.Custprops=p),e.bookSheets&&typeof a<"u"&&(g.SheetNames=a),e.bookSheets?g.SheetNames:e.bookProps))return g;a={};var v={};e.bookDeps&&s.calcchain&&(v=Eae(Zr(t,Bs(s.calcchain)),s.calcchain));var y=0,b={},E,x;{var w=u.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var R=0;R!=w.length;++R)f.SheetNames[R]=w[R].name}var P=i?"bin":"xml",S=s.workbooks[0].lastIndexOf("/"),_=(s.workbooks[0].slice(0,S+1)+"_rels/"+s.workbooks[0].slice(S+1)+".rels").replace(/^\//,"");Vs(t,_)||(_="xl/_rels/workbook."+P+".rels");var m=ed(ks(t,_,!0),_.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=bae(Zr(t,Bs(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=pre(Zr(t,Bs(s.people[0])),e)),m&&(m=aie(m,u.Sheets));var A=Zr(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=f.Worksheets;++y){var k="sheet";if(m&&m[y]?(E="xl/"+m[y][1].replace(/[\/]?xl\//,""),Vs(t,E)||(E=m[y][1]),Vs(t,E)||(E=_.replace(/_rels\/.*$/,"")+m[y][1]),k=m[y][2]):(E="xl/worksheets/sheet"+(y+1-A)+"."+P,E=E.replace(/sheet0\./,"sheet.")),x=E.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(y!=e.sheets)continue e;break;case"string":if(f.SheetNames[y].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var I=!1,C=0;C!=e.sheets.length;++C)typeof e.sheets[C]=="number"&&e.sheets[C]==y&&(I=1),typeof e.sheets[C]=="string"&&e.sheets[C].toLowerCase()==f.SheetNames[y].toLowerCase()&&(I=1);if(!I)continue e}}iie(t,E,x,f.SheetNames[y],y,b,a,k,e,u,l,c)}return g={Directory:s,Workbook:u,Props:f,Custprops:p,Deps:v,Sheets:a,SheetNames:f.SheetNames,Strings:nd,Styles:c,Themes:l,SSF:Fn(Ut)},e&&e.bookFiles&&(t.files?(g.keys=n,g.files=t.files):(g.keys=[],g.files={},t.FullPaths.forEach(function(M,D){M=M.replace(/^Root Entry[\/]/,""),g.keys.push(M),g.files[M]=t.FileIndex[D]}))),e&&e.bookVBA&&(s.vba.length>0?g.vbaraw=Zr(t,Bs(s.vba[0]),!0):s.defaults&&s.defaults.bin===yre&&(g.vbaraw=Zr(t,"xl/vbaProject.bin",!0))),g}function lie(t,e){var r=e||{},n="Workbook",s=rr.find(t,n);try{if(n="/!DataSpaces/Version",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(ete(s.content),n="/!DataSpaces/DataSpaceMap",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=rte(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=nte(s.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);ate(s.content)}catch{}if(n="/EncryptionInfo",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=ite(s.content);if(n="/EncryptedPackage",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Nx(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Fs(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function cie(t,e){return rr.find(t,"EncryptedPackage")?lie(t,e):sD(t,e)}function uie(t,e){var r,n=t,s=e||{};return s.type||(s.type=Zt&&Buffer.isBuffer(t)?"buffer":"base64"),r=Qk(n,s),oie(r,s)}function lD(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Jv(t.slice(r),e);default:break e}return Od.to_workbook(t,e)}function die(t,e){var r="",n=Nx(t,e);switch(e.type){case"base64":r=Fs(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=ul(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ar(r)),e.type="binary",lD(r,e)}function fie(t,e){var r=t;return e.type=="base64"&&(r=Fs(r)),r=Pd.utils.decode(1200,r.slice(2),"str"),e.type="binary",lD(r,e)}function hie(t){return t.match(/[^\x00-\x7F]/)?ku(t):t}function Cg(t,e,r,n){return n?(r.type="string",Od.to_workbook(t,r)):Od.to_workbook(e,r)}function Mh(t,e){Fk();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Mh(new Uint8Array(t),(r=Fn(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),xc={},r.dateNF&&(xc.dateNF=r.dateNF),r.type||(r.type=Zt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Zt?"buffer":"binary",n=eJ(t),typeof Uint8Array<"u"&&!Zt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=hie(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=Fn(r),r.type="array",Mh(fx(n),r)}switch((s=Nx(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return cie(rr.read(n,r),r);break;case 9:if(s[1]<=8)return sD(n,r);break;case 60:return Jv(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Vee(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return Uee.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?uie(n,r):Cg(t,n,r,i);case 239:return s[3]===60?Jv(n,r):Cg(t,n,r,i);case 255:if(s[1]===254)return fie(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return rd.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return rd.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return AS.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return yte.to_workbook(n,r);break;case 10:case 13:case 32:return die(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Lee.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?AS.to_workbook(n,r):Cg(t,n,r,i)}function pie(t,e,r,n,s,i,a,o){var l=Nn(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!a||t[r])for(var p=e.s.c;p<=e.e.c;++p){var g=a?t[r][p]:t[n[p]+l];if(g===void 0||g.t===void 0){if(c===void 0)continue;i[p]!=null&&(h[i[p]]=c);continue}var v=g.v;switch(g.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[p]!=null){if(v==null)if(g.t=="e"&&v===null)h[i[p]]=null;else if(c!==void 0)h[i[p]]=c;else if(u&&v===null)h[i[p]]=null;else continue;else h[i[p]]=u&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?v:wi(g,v,o);v!=null&&(f=!1)}}return{row:h,isempty:f}}function r1(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=Gr(u);break;case"number":l=Gr(t["!ref"]),l.s.r=u;break;default:l=u}n>0&&(s=0);var f=Nn(l.s.r),h=[],p=[],g=0,v=0,y=Array.isArray(t),b=l.s.r,E=0,x={};y&&!t[b]&&(t[b]=[]);var w=c.skipHidden&&t["!cols"]||[],R=c.skipHidden&&t["!rows"]||[];for(E=l.s.c;E<=l.e.c;++E)if(!(w[E]||{}).hidden)switch(h[E]=un(E),r=y?t[b][E]:t[h[E]+f],n){case 1:i[E]=E-l.s.c;break;case 2:i[E]=h[E];break;case 3:i[E]=c.header[E-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=wi(r,null,c),v=x[a]||0,!v)x[a]=1;else{do o=a+"_"+v++;while(x[o]);x[a]=v,x[o]=1}i[E]=o}for(b=l.s.r+s;b<=l.e.r;++b)if(!(R[b]||{}).hidden){var P=pie(t,l,b,h,n,i,y,c);(P.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(p[g++]=P.row)}return p.length=g,p}var VS=/"/g;function mie(t,e,r,n,s,i,a,o){for(var l=!0,c=[],u="",f=Nn(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var p=o.dense?(t[r]||[])[h]:t[n[h]+f];if(p==null)u="";else if(p.v!=null){l=!1,u=""+(o.rawNumbers&&p.t=="n"?p.v:wi(p,null,o));for(var g=0,v=0;g!==u.length;++g)if((v=u.charCodeAt(g))===s||v===i||v===34||o.forceQuotes){u='"'+u.replace(VS,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(l=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(VS,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(a)}function cD(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Gr(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),u="",f=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],p=n.skipHidden&&t["!rows"]||[],g=s.s.c;g<=s.e.c;++g)(h[g]||{}).hidden||(f[g]=un(g));for(var v=0,y=s.s.r;y<=s.e.r;++y)(p[y]||{}).hidden||(u=mie(t,s,y,f,a,l,i,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((v++?o:"")+u)));return delete n.dense,r.join("")}function gie(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=cD(t,e);return r}function vie(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Gr(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=un(o);for(var u=s.s.r;u<=s.e.r;++u)for(i=Nn(u),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[u]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function uD(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?ds(n.origin):n.origin;a=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var f=Gr(i["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),a==-1&&(a=f.e.r+1,u.e.r=a+e.length-1+s)}else a==-1&&(a=0,u.e.r=e.length-1+s);var h=n.header||[],p=0;e.forEach(function(v,y){$a(v).forEach(function(b){(p=h.indexOf(b))==-1&&(h[p=h.length]=b);var E=v[b],x="z",w="",R=Mt({c:o+p,r:a+y+s});c=Ud(i,R),E&&typeof E=="object"&&!(E instanceof Date)?i[R]=E:(typeof E=="number"?x="n":typeof E=="boolean"?x="b":typeof E=="string"?x="s":E instanceof Date?(x="d",n.cellDates||(x="n",E=ps(E)),w=n.dateNF||Ut[14]):E===null&&n.nullError&&(x="e",E=0),c?(c.t=x,c.v=E,delete c.w,delete c.R,w&&(c.z=w)):i[R]=c={t:x,v:E},w&&(c.z=w))})}),u.e.c=Math.max(u.e.c,o+h.length-1);var g=Nn(a);if(s)for(p=0;p<h.length;++p)i[un(p+o)+g]={t:"s",v:h[p]};return i["!ref"]=sr(u),i}function yie(t,e){return uD(null,t,e)}function Ud(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=ds(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Ud(t,Mt(e)):Ud(t,Mt({r:e,c:r||0}))}function xie(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Ox(){return{SheetNames:[],Sheets:{}}}function Mx(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(nae(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Eie(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=xie(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function _ie(t,e){return t.z=e,t}function dD(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function bie(t,e,r){return dD(t,"#"+e,r)}function Sie(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Aie(t,e,r,n){for(var s=typeof e!="string"?e:Gr(e),i=typeof e=="string"?e:sr(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=Ud(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Tie={encode_col:un,encode_row:Nn,encode_cell:Mt,encode_range:sr,decode_col:_x,decode_row:Ex,split_cell:MJ,decode_cell:ds,decode_range:Xc,format_cell:wi,sheet_add_aoa:mI,sheet_add_json:uD,sheet_add_dom:aD,aoa_to_sheet:Yc,json_to_sheet:yie,table_to_sheet:iD,table_to_book:Vae,sheet_to_csv:cD,sheet_to_txt:gie,sheet_to_json:r1,sheet_to_html:$ae,sheet_to_formulae:vie,sheet_to_row_object_array:r1,sheet_get_cell:Ud,book_new:Ox,book_append_sheet:Mx,book_set_sheet_visibility:Eie,cell_set_number_format:_ie,cell_set_hyperlink:dD,cell_set_internal_link:bie,cell_add_comment:Sie,sheet_set_array_formula:Aie,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const wie={class:"admin-time-table"},Cie={class:"header"},kie={class:"admin-action-btns"},Iie=["disabled"],Die={class:"import-section"},Pie={key:0,class:"import-preview"},Rie={class:"import-options"},Fie={class:"import-option-group"},Nie=["disabled"],Oie=["value"],Mie={class:"import-option-group"},Lie=["disabled"],Bie={class:"import-actions"},Uie=["disabled"],$ie={class:"content"},Vie={key:0,class:"loading"},Hie={key:1,class:"time-tables-container"},jie={key:0,class:"empty-state"},Gie={key:1,class:"time-tables-list"},Wie={class:"time-table-header"},zie={class:"time-table-info"},Kie={class:"time-table-days"},qie={class:"admin-action-btns"},Xie=["onClick"],Yie=["onClick"],Qie={class:"time-table-schedule"},Jie={class:"schedule-item-info"},Zie={class:"item-name"},eoe={class:"item-time"},toe={class:"schedule-item-type"},roe={class:"dialog-header"},noe={class:"dialog-content"},soe={class:"form-group"},aoe={class:"form-group"},ioe={class:"days-checkboxes"},ooe=["value"],loe={class:"form-group"},coe={class:"schedule-items"},uoe={class:"item-row"},doe=["onUpdate:modelValue"],foe=["onUpdate:modelValue"],hoe=["onUpdate:modelValue"],poe=["onUpdate:modelValue"],moe=["onClick"],goe={__name:"AdminTimeTable",setup(t){const{saveAppSettings:e}=Os(),r=se(!0),n=se(!1),s=se([]),i=se(!1),a=se(-1),o=se({name:"",days:[],schedule:[]}),l=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],c=se(null),u=se([]),f=se([]),h=se("overwrite"),p=se(""),g=se(""),v=be(()=>h.value==="overwrite"?p.value!=="":g.value.trim()!==""),y=()=>{const N=mn(o.value.name,{trim:!0,maxLength:100,removeDangerous:!0}),L=Hr(N);if(!L.isSafe)return alert(`Security threat detected in time table name: ${L.threats.join(", ")}`),!1;if(o.value.name=N,!o.value.name.trim())return alert("Please enter a time table name"),!1;if(o.value.days.length===0)return alert("Please select at least one day"),!1;if(o.value.schedule.length===0)return alert("Please add at least one schedule item"),!1;for(let O=0;O<o.value.schedule.length;O++){const z=o.value.schedule[O],H=mn(z.name,{trim:!0,maxLength:50,removeDangerous:!0}),V=Hr(H);if(!V.isSafe)return alert(`Security threat detected in schedule item ${O+1}: ${V.threats.join(", ")}`),!1;if(z.name=H,!z.name.trim())return alert(`Please enter a name for schedule item ${O+1}`),!1;if(!z.startTime||!z.endTime)return alert(`Please enter start and end times for ${z.name}`),!1;if(z.startTime>=z.endTime)return alert(`${z.name}: Start time must be before end time`),!1}return!0},b=N=>{const L=mn(N,{trim:!0,maxLength:100,removeDangerous:!0}),O=Hr(L);return O.isSafe?L:(alert(`Security threat detected in import name: ${O.threats.join(", ")}`),null)};async function E(){try{console.log("Loading time tables..."),r.value=!0;const N=await nr(Ze(qe,"app_settings","global"));if(N.exists()){const L=N.data();s.value=L.timeTables||[],console.log("Loaded time tables:",s.value)}else s.value=[],console.log("No time tables found, starting with empty array");r.value=!1}catch(N){console.error("Error loading time tables:",N),r.value=!1}}function x(){a.value=-1,o.value={name:"",days:[],schedule:[]},i.value=!0}function w(N){a.value=N,o.value=JSON.parse(JSON.stringify(s.value[N])),i.value=!0}function R(N){confirm("Are you sure you want to delete this time table?")&&s.value.splice(N,1)}function P(){o.value.schedule.push({name:"",type:"period",startTime:"",endTime:""})}function S(N){o.value.schedule.splice(N,1)}function _(){if(!y())return;if(!Ds("saveTimeTable",10,6e4).allowed){alert("Too many save requests. Please wait before saving again.");return}a.value===-1?s.value.push(JSON.parse(JSON.stringify(o.value))):s.value[a.value]=JSON.parse(JSON.stringify(o.value)),m()}function m(){i.value=!1,a.value=-1,o.value={name:"",days:[],schedule:[]}}async function A(){try{if(!Ds("saveAllTimeTables",5,3e5).allowed){alert("Too many save all requests. Please wait before saving again.");return}n.value=!0,console.log("Saving time tables:",s.value);const L=await nr(Ze(qe,"app_settings","global")),z={...L.exists()?L.data():{},timeTables:s.value};await e(z),n.value=!1,console.log("Time tables saved successfully")}catch(N){console.error("Error saving time tables:",N),n.value=!1}}function k(N){return N.length===0?"No days selected":N.length===7?"Every day":N.length===5&&N.includes("monday")&&N.includes("friday")?"Weekdays":N.map(L=>{const O=l.find(z=>z.value===L);return O?O.label:L}).join(", ")}function I(N){if(!N)return"";const[L,O]=N.split(":"),z=parseInt(L),H=z>=12?"PM":"AM";return`${z===0?12:z>12?z-12:z}:${O} ${H}`}function C(){c.value&&c.value.click()}function M(N){const L=N.target.files[0];if(!L)return;const O=ll(L,{allowedTypes:["csv","excel"],maxSize:5*1024*1024,fieldName:"Time Table Import File"});if(!O.isValid){alert(O.error),N.target.value="";return}const z=Hr(L.name);if(!z.isSafe){alert(`File name contains potentially dangerous content: ${z.threats.join(", ")}`),N.target.value="";return}const H=new FileReader;H.onload=V=>{try{let W=V.target.result,G;L.name.endsWith(".csv")?G=Mh(W,{type:"binary"}):G=Mh(W,{type:"binary"});const re=G.SheetNames[0],de=G.Sheets[re],ce=Tie.sheet_to_json(de,{defval:""}).map(te=>{const Z={};return Object.entries(te).forEach(([xe,J])=>{const Y=mn(xe,{trim:!0,maxLength:50,removeDangerous:!0}),Q=mn(String(J),{trim:!0,maxLength:100,removeDangerous:!0});Z[Y]=Q}),Z});u.value=ce,f.value=ce.length?Object.keys(ce[0]):[]}catch(W){alert("Error parsing file. Please check the file format and try again."),console.error("File parsing error:",W)}},H.readAsBinaryString(L)}function D(){try{if(!Ds("importTimeTable",3,3e5).allowed){alert("Too many import requests. Please wait before importing again.");return}const L=u.value.map(O=>{const z=O.name||O.Name||O.period||O.Period||O.item||O.Item||"Unknown",H=O.startTime||O["Start Time"]||O.start||O.Start||"08:00",V=O.endTime||O["End Time"]||O.end||O.End||"08:55",W=mn(z,{trim:!0,maxLength:50,removeDangerous:!0}),G=Hr(W);if(!G.isSafe)return console.warn(`Security threat detected in imported item: ${G.threats.join(", ")}`),null;let re="period";const de=O.type||O.Type||"",ae=W.toLowerCase();return de.toLowerCase().includes("lunch")||ae.includes("lunch")?re="lunch":de.toLowerCase().includes("break")||ae.includes("break")?re="break":(de.toLowerCase().includes("other")||ae.includes("other"))&&(re="other"),{name:W,type:re,startTime:H,endTime:V}}).filter(O=>O&&O.name&&O.name!=="Unknown");if(L.length===0){alert("No valid schedule items found in the imported data. Please check your file format.");return}if(h.value==="overwrite"){if(p.value===""){alert("Please select a time table to overwrite");return}const O=parseInt(p.value);s.value[O]={...s.value[O],schedule:L}}else{const O=b(g.value);if(!O)return;const z={name:O,days:["monday","tuesday","wednesday","thursday","friday"],schedule:L};s.value.push(z)}u.value=[],f.value=[],h.value="overwrite",p.value="",g.value="",alert("Time table imported successfully!")}catch(N){console.error("Error importing time table:",N),alert("Error importing time table. Please check your file format and try again.")}}function F(){u.value=[],f.value=[],h.value="overwrite",p.value="",g.value=""}return Gt(E),(N,L)=>(B(),U("div",wie,[d("div",Cie,[L[7]||(L[7]=d("h1",null,"Time Table Management",-1)),d("div",kie,[d("button",{onClick:A,class:"admin-action-btn primary",disabled:n.value,style:{"min-width":"160px","max-width":"160px"}},X(n.value?"Saving...":"Save Time Tables"),9,Iie),d("button",{onClick:x,class:"admin-action-btn secondary",style:{"min-width":"140px","max-width":"140px"}}," Add Time Table ")])]),d("div",Die,[d("button",{onClick:C,class:"admin-action-btn info",style:{"min-width":"150px","max-width":"150px"}},"Import CSV/XLSX"),d("input",{ref_key:"fileInput",ref:c,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:M},null,544),L[8]||(L[8]=d("div",{class:"import-note"}," You can export from Google Sheets or Excel as CSV, or upload your Excel file directly. ",-1))]),u.value.length?(B(),U("div",Pie,[L[13]||(L[13]=d("h3",null,"Preview Imported Time Table",-1)),d("table",null,[d("thead",null,[d("tr",null,[(B(!0),U(Pe,null,He(f.value,O=>(B(),U("th",{key:O},X(O),1))),128))])]),d("tbody",null,[(B(!0),U(Pe,null,He(u.value,(O,z)=>(B(),U("tr",{key:z},[(B(!0),U(Pe,null,He(f.value,H=>(B(),U("td",{key:H},X(O[H]),1))),128))]))),128))])]),d("div",Rie,[L[12]||(L[12]=d("h4",null,"Import Options",-1)),d("div",Fie,[d("label",null,[Oe(d("input",{type:"radio","onUpdate:modelValue":L[0]||(L[0]=O=>h.value=O),value:"overwrite"},null,512),[[ma,h.value]]),L[9]||(L[9]=we(" Overwrite existing time table: "))]),Oe(d("select",{"onUpdate:modelValue":L[1]||(L[1]=O=>p.value=O),disabled:h.value!=="overwrite",class:"form-select"},[L[10]||(L[10]=d("option",{value:""},"Select a time table...",-1)),(B(!0),U(Pe,null,He(s.value,(O,z)=>(B(),U("option",{key:z,value:z},X(O.name),9,Oie))),128))],8,Nie),[[cr,p.value]])]),d("div",Mie,[d("label",null,[Oe(d("input",{type:"radio","onUpdate:modelValue":L[2]||(L[2]=O=>h.value=O),value:"create"},null,512),[[ma,h.value]]),L[11]||(L[11]=we(" Create new time table: "))]),Oe(d("input",{"onUpdate:modelValue":L[3]||(L[3]=O=>g.value=O),type:"text",placeholder:"Enter time table name...",disabled:h.value!=="create",class:"form-input"},null,8,Lie),[[ft,g.value]])])]),d("div",Bie,[d("button",{onClick:D,class:"btn btn-primary",disabled:!v.value},X(h.value==="overwrite"?"Overwrite Time Table":"Create New Time Table"),9,Uie),d("button",{onClick:F,class:"btn btn-secondary"},"Cancel")])])):ve("",!0),d("div",$ie,[r.value?(B(),U("div",Vie," Loading time tables... ")):(B(),U("div",Hie,[s.value.length===0?(B(),U("div",jie,[L[14]||(L[14]=d("h3",null,"No Time Tables Created",-1)),L[15]||(L[15]=d("p",null,"Create your first time table to get started.",-1)),d("button",{onClick:x,class:"btn btn-primary"},"Create Time Table")])):(B(),U("div",Gie,[(B(!0),U(Pe,null,He(s.value,(O,z)=>(B(),U("div",{key:z,class:"time-table-card"},[d("div",Wie,[d("div",zie,[d("h3",null,X(O.name),1),d("p",Kie,X(k(O.days)),1)]),d("div",qie,[d("button",{onClick:H=>w(z),class:"admin-action-btn edit"}," Edit ",8,Xie),d("button",{onClick:H=>R(z),class:"admin-action-btn delete"}," Delete ",8,Yie)])]),d("div",Qie,[(B(!0),U(Pe,null,He(O.schedule,(H,V)=>(B(),U("div",{key:V,class:"schedule-item"},[d("div",Jie,[d("span",Zie,X(H.name),1),d("span",eoe,X(I(H.startTime))+" - "+X(I(H.endTime)),1)]),d("div",toe,[d("span",{class:Ye(["type-badge",H.type])},X(H.type),3)])]))),128))])]))),128))]))]))]),i.value?(B(),U("div",{key:1,class:"edit-dialog-overlay",onClick:m},[d("div",{class:"edit-dialog",onClick:L[6]||(L[6]=Xr(()=>{},["stop"]))},[d("div",roe,[d("h2",null,X(a.value===-1?"Create Time Table":"Edit Time Table"),1),d("button",{onClick:m,class:"btn-close"},"")]),d("div",noe,[d("div",soe,[L[16]||(L[16]=d("label",{for:"timeTableName"},"Time Table Name",-1)),Oe(d("input",{id:"timeTableName","onUpdate:modelValue":L[4]||(L[4]=O=>o.value.name=O),type:"text",placeholder:"e.g., Regular Schedule, Rally Day, Minimum Day",class:"form-input"},null,512),[[ft,o.value.name]])]),d("div",aoe,[L[17]||(L[17]=d("label",null,"Days This Schedule Applies",-1)),d("div",ioe,[(B(),U(Pe,null,He(l,O=>d("label",{key:O.value,class:"day-checkbox"},[Oe(d("input",{type:"checkbox",value:O.value,"onUpdate:modelValue":L[5]||(L[5]=z=>o.value.days=z)},null,8,ooe),[[yt,o.value.days]]),we(" "+X(O.label),1)])),64))])]),d("div",loe,[L[20]||(L[20]=d("label",null,"Schedule Items",-1)),d("div",coe,[(B(!0),U(Pe,null,He(o.value.schedule,(O,z)=>(B(),U("div",{key:z,class:"schedule-item-edit"},[d("div",uoe,[Oe(d("input",{"onUpdate:modelValue":H=>O.name=H,type:"text",placeholder:"Period 1, Lunch, Break, etc.",class:"form-input item-name-input"},null,8,doe),[[ft,O.name]]),Oe(d("select",{"onUpdate:modelValue":H=>O.type=H,class:"form-select item-type-select"},L[18]||(L[18]=[d("option",{value:"period"},"Period",-1),d("option",{value:"break"},"Break",-1),d("option",{value:"lunch"},"Lunch",-1),d("option",{value:"other"},"Other",-1)]),8,foe),[[cr,O.type]]),Oe(d("input",{"onUpdate:modelValue":H=>O.startTime=H,type:"time",class:"form-input time-input"},null,8,hoe),[[ft,O.startTime]]),L[19]||(L[19]=d("span",{class:"time-separator"},"to",-1)),Oe(d("input",{"onUpdate:modelValue":H=>O.endTime=H,type:"time",class:"form-input time-input"},null,8,poe),[[ft,O.endTime]]),d("button",{onClick:H=>S(z),class:"admin-action-btn delete"}," Delete ",8,moe)])]))),128)),d("button",{onClick:P,class:"admin-action-btn secondary",style:{"min-width":"150px","max-width":"150px"}}," Add Schedule Item ")])])]),d("div",{class:"admin-action-btns"},[d("button",{onClick:m,class:"admin-action-btn cancel",style:{"min-width":"100px","max-width":"100px"}},"Cancel"),d("button",{onClick:_,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},"Save Time Table")])])])):ve("",!0)]))}},fD=bt(goe,[["__scopeId","data-v-428c8e72"]]);function voe(){const t=se({}),e=se(!1);async function r(){e.value=!0;try{const f=await Wt(At(qe,"aideSchedules")),h={};f.forEach(p=>{h[p.id]=p.data()}),t.value=h}catch(f){console.error("Error loading aide schedules:",f),t.value={}}finally{e.value=!1}}async function n(f){e.value=!0;try{const h=await nr(Ze(qe,"aideSchedules",f));h.exists()?t.value[f]=h.data():t.value[f]={schedule:{},directAssignment:[]}}catch(h){console.error("Error loading aide schedule:",h),t.value[f]={schedule:{},directAssignment:[]}}finally{e.value=!1}}async function s(f,h,p=!0){try{const g=JSON.parse(JSON.stringify(h));p?await Ht(Ze(qe,"aideSchedules",f),g,{merge:!0}):await Ht(Ze(qe,"aideSchedules",f),g),t.value[f]=g}catch(g){throw console.error("Error saving aide schedule:",g),g}}async function i(){try{const f=Object.entries(t.value);for(const[h,p]of f){const g=JSON.parse(JSON.stringify(p));await Ht(Ze(qe,"aideSchedules",h),g,{merge:!0})}}catch(f){throw console.error("Error saving all aide schedules:",f),f}}function a(f,h){const p=[];return Object.entries(t.value).forEach(([g,v])=>{v.schedule&&v.schedule[h]&&(Array.isArray(v.schedule[h])?v.schedule[h]:[v.schedule[h]]).includes(f)&&p.push(g)}),p}function o(f){var p;const h=(p=t.value[f])==null?void 0:p.directAssignment;return Array.isArray(h)?h.length>0?h[0]:null:h||null}function l(f){return Object.keys(t.value).find(p=>{var v;const g=(v=t.value[p])==null?void 0:v.directAssignment;return Array.isArray(g)?g.includes(f):g===f})||null}function c(f,h,p){const g=[],v=t.value[f];return v&&((Array.isArray(v.directAssignment)?v.directAssignment:v.directAssignment?[v.directAssignment]:[]).forEach(b=>{if(b){const E=h.find(x=>x.id===b);E&&g.push({...E,assignmentType:"direct"})}}),Object.entries(v.schedule||{}).forEach(([b,E])=>{E&&(Array.isArray(E)?E:[E]).forEach(w=>{w&&h.forEach(R=>{if(R.schedule&&R.schedule[b]===w){const P=g.findIndex(S=>S.id===R.id);P===-1?g.push({...R,assignmentType:"class",period:b,teacherId:w}):(g[P].assignmentType="both",g[P].period=b,g[P].teacherId=w)}})})})),g}function u(f,h,p,g){if(!f||!h||!p||!g)return!1;const v=p.find(w=>w.id===h);if(!v)return!1;const y=t.value[f];if(!y)return!1;if((Array.isArray(y.directAssignment)?y.directAssignment:y.directAssignment?[y.directAssignment]:[]).includes(h))return!0;if(!v.schedule)return!1;const E=y.schedule||{};return Object.entries(v.schedule).some(([w,R])=>{const P=E[w];return P?(Array.isArray(P)?P:[P]).includes(R):!1})}return{aideSchedule:be(()=>t.value),loading:be(()=>e.value),loadAideSchedules:r,loadAideSchedule:n,saveAideSchedule:s,saveAllAideSchedules:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}var yoe={exports:{}};const xoe=ax(E8);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function HS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Va(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HS(Object(r),!0).forEach(function(n){Eoe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O0=function(e){return typeof e}:O0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O0(t)}function Eoe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xs(){return Xs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xs.apply(this,arguments)}function _oe(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function boe(t,e){if(t==null)return{};var r=_oe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Soe(t){return Aoe(t)||Toe(t)||woe(t)||Coe()}function Aoe(t){if(Array.isArray(t))return n1(t)}function Toe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function woe(t,e){if(t){if(typeof t=="string")return n1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n1(t,e)}}function n1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Coe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var koe="1.14.0";function mi(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Pi=mi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),vf=mi(/Edge/i),jS=mi(/firefox/i),id=mi(/safari/i)&&!mi(/chrome/i)&&!mi(/android/i),hD=mi(/iP(ad|od|hone)/i),Ioe=mi(/chrome/i)&&mi(/android/i),pD={capture:!1,passive:!1};function Kt(t,e,r){t.addEventListener(e,r,!Pi&&pD)}function zt(t,e,r){t.removeEventListener(e,r,!Pi&&pD)}function Lh(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Doe(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function sa(t,e,r,n){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&Lh(t,e):Lh(t,e))||n&&t===r)return t;if(t===r)break}while(t=Doe(t))}return null}var GS=/\s+/g;function Fr(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(GS," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(GS," ")}}function vt(t,e,r){var n=t&&t.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=r+(typeof r=="string"?"":"px")}}function Qo(t,e){var r="";if(typeof t=="string")r=t;else do{var n=vt(t,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function mD(t,e,r){if(t){var n=t.getElementsByTagName(e),s=0,i=n.length;if(r)for(;s<i;s++)r(n[s],s);return n}return[]}function Ma(){var t=document.scrollingElement;return t||document.documentElement}function Pr(t,e,r,n,s){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,o,l,c,u,f;if(t!==window&&t.parentNode&&t!==Ma()?(i=t.getBoundingClientRect(),a=i.top,o=i.left,l=i.bottom,c=i.right,u=i.height,f=i.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,f=window.innerWidth),(e||r)&&t!==window&&(s=s||t.parentNode,!Pi))do if(s&&s.getBoundingClientRect&&(vt(s,"transform")!=="none"||r&&vt(s,"position")!=="static")){var h=s.getBoundingClientRect();a-=h.top+parseInt(vt(s,"border-top-width")),o-=h.left+parseInt(vt(s,"border-left-width")),l=a+i.height,c=o+i.width;break}while(s=s.parentNode);if(n&&t!==window){var p=Qo(s||t),g=p&&p.a,v=p&&p.d;p&&(a/=v,o/=g,f/=g,u/=v,l=a+u,c=o+f)}return{top:a,left:o,bottom:l,right:c,width:f,height:u}}}function WS(t,e,r){for(var n=to(t,!0),s=Pr(t)[e];n;){var i=Pr(n)[r],a=void 0;if(a=s>=i,!a)return n;if(n===Ma())break;n=to(n,!1)}return!1}function Lc(t,e,r,n){for(var s=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==wt.ghost&&(n||a[i]!==wt.dragged)&&sa(a[i],r.draggable,t,!1)){if(s===e)return a[i];s++}i++}return null}function Lx(t,e){for(var r=t.lastElementChild;r&&(r===wt.ghost||vt(r,"display")==="none"||e&&!Lh(r,e));)r=r.previousElementSibling;return r||null}function $r(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==wt.clone&&(!e||Lh(t,e))&&r++;return r}function zS(t){var e=0,r=0,n=Ma();if(t)do{var s=Qo(t),i=s.a,a=s.d;e+=t.scrollLeft*i,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function Poe(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r)}return-1}function to(t,e){if(!t||!t.getBoundingClientRect)return Ma();var r=t,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=vt(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return Ma();if(n||e)return r;n=!0}}while(r=r.parentNode);return Ma()}function Roe(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function kg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var od;function gD(t,e){return function(){if(!od){var r=arguments,n=this;r.length===1?t.call(n,r[0]):t.apply(n,r),od=setTimeout(function(){od=void 0},e)}}}function Foe(){clearTimeout(od),od=void 0}function vD(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function Bx(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function KS(t,e){vt(t,"position","absolute"),vt(t,"top",e.top),vt(t,"left",e.left),vt(t,"width",e.width),vt(t,"height",e.height)}function Ig(t){vt(t,"position",""),vt(t,"top",""),vt(t,"left",""),vt(t,"width",""),vt(t,"height","")}var qn="Sortable"+new Date().getTime();function Noe(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(vt(s,"display")==="none"||s===wt.ghost)){t.push({target:s,rect:Pr(s)});var i=Va({},t[t.length-1].rect);if(s.thisAnimationDuration){var a=Qo(s,!0);a&&(i.top-=a.f,i.left-=a.e)}s.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(Poe(t,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,a=0;t.forEach(function(o){var l=0,c=o.target,u=c.fromRect,f=Pr(c),h=c.prevFromRect,p=c.prevToRect,g=o.rect,v=Qo(c,!0);v&&(f.top-=v.f,f.left-=v.e),c.toRect=f,c.thisAnimationDuration&&kg(h,f)&&!kg(u,f)&&(g.top-f.top)/(g.left-f.left)===(u.top-f.top)/(u.left-f.left)&&(l=Moe(g,h,p,s.options)),kg(f,u)||(c.prevFromRect=u,c.prevToRect=f,l||(l=s.options.animation),s.animate(c,g,f,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,s,i,a){if(a){vt(n,"transition",""),vt(n,"transform","");var o=Qo(this.el),l=o&&o.a,c=o&&o.d,u=(s.left-i.left)/(l||1),f=(s.top-i.top)/(c||1);n.animatingX=!!u,n.animatingY=!!f,vt(n,"transform","translate3d("+u+"px,"+f+"px,0)"),this.forRepaintDummy=Ooe(n),vt(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),vt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){vt(n,"transition",""),vt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function Ooe(t){return t.offsetWidth}function Moe(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}var Ul=[],Dg={initializeByDefault:!0},yf={mount:function(e){for(var r in Dg)Dg.hasOwnProperty(r)&&!(r in e)&&(e[r]=Dg[r]);Ul.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ul.push(e)},pluginEvent:function(e,r,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var i=e+"Global";Ul.forEach(function(a){r[a.pluginName]&&(r[a.pluginName][i]&&r[a.pluginName][i](Va({sortable:r},n)),r.options[a.pluginName]&&r[a.pluginName][e]&&r[a.pluginName][e](Va({sortable:r},n)))})},initializePlugins:function(e,r,n,s){Ul.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,r,e.options);c.sortable=e,c.options=e.options,e[l]=c,Xs(n,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,r){var n={};return Ul.forEach(function(s){typeof s.eventProperties=="function"&&Xs(n,s.eventProperties.call(r[s.pluginName],e))}),n},modifyOption:function(e,r,n){var s;return Ul.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(s=i.optionListeners[r].call(e[i.pluginName],n))}),s}};function Iu(t){var e=t.sortable,r=t.rootEl,n=t.name,s=t.targetEl,i=t.cloneEl,a=t.toEl,o=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,f=t.newDraggableIndex,h=t.originalEvent,p=t.putSortable,g=t.extraEventProperties;if(e=e||r&&r[qn],!!e){var v,y=e.options,b="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Pi&&!vf?v=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(n,!0,!0)),v.to=a||r,v.from=o||r,v.item=s||r,v.clone=i,v.oldIndex=l,v.newIndex=c,v.oldDraggableIndex=u,v.newDraggableIndex=f,v.originalEvent=h,v.pullMode=p?p.lastPutMode:void 0;var E=Va(Va({},g),yf.getEventProperties(n,e));for(var x in E)v[x]=E[x];r&&r.dispatchEvent(v),y[b]&&y[b].call(e,v)}}var Loe=["evt"],gs=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,i=boe(n,Loe);yf.pluginEvent.bind(wt)(e,r,Va({dragEl:rt,parentEl:Lr,ghostEl:Bt,rootEl:Ir,nextEl:Mo,lastDownEl:M0,cloneEl:Br,cloneHidden:Qi,dragStarted:Du,putSortable:Sn,activeSortable:wt.active,originalEvent:s,oldIndex:ec,oldDraggableIndex:ld,newIndex:ws,newDraggableIndex:qi,hideGhostForTarget:_D,unhideGhostForTarget:bD,cloneNowHidden:function(){Qi=!0},cloneNowShown:function(){Qi=!1},dispatchSortableEvent:function(o){is({sortable:r,name:o,originalEvent:s})}},i))};function is(t){Iu(Va({putSortable:Sn,cloneEl:Br,targetEl:rt,rootEl:Ir,oldIndex:ec,oldDraggableIndex:ld,newIndex:ws,newDraggableIndex:qi},t))}var rt,Lr,Bt,Ir,Mo,M0,Br,Qi,ec,ws,ld,qi,l0,Sn,Yl=!1,Bh=!1,Uh=[],Ro,ra,Pg,Rg,qS,XS,Du,$l,cd,ud=!1,c0=!1,L0,Vn,Fg=[],s1=!1,$h=[],Kp=typeof document<"u",u0=hD,YS=vf||Pi?"cssFloat":"float",Boe=Kp&&!Ioe&&!hD&&"draggable"in document.createElement("div"),yD=function(){if(Kp){if(Pi)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),xD=function(e,r){var n=vt(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Lc(e,0,r),a=Lc(e,1,r),o=i&&vt(i),l=a&&vt(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+Pr(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Pr(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&o.float!=="none"){var f=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return i&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=s&&n[YS]==="none"||a&&n[YS]==="none"&&c+u>s)?"vertical":"horizontal"},Uoe=function(e,r,n){var s=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?r.left:r.top,l=n?r.right:r.bottom,c=n?r.width:r.height;return s===o||i===l||s+a/2===o+c/2},$oe=function(e,r){var n;return Uh.some(function(s){var i=s[qn].options.emptyInsertThreshold;if(!(!i||Lx(s))){var a=Pr(s),o=e>=a.left-i&&e<=a.right+i,l=r>=a.top-i&&r<=a.bottom+i;if(o&&l)return n=s}}),n},ED=function(e){function r(i,a){return function(o,l,c,u){var f=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(i==null&&(a||f))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return r(i(o,l,c,u),a)(o,l,c,u);var h=(a?o:l).options.group.name;return i===!0||typeof i=="string"&&i===h||i.join&&i.indexOf(h)>-1}}var n={},s=e.group;(!s||O0(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=r(s.pull,!0),n.checkPut=r(s.put),n.revertClone=s.revertClone,e.group=n},_D=function(){!yD&&Bt&&vt(Bt,"display","none")},bD=function(){!yD&&Bt&&vt(Bt,"display","")};Kp&&document.addEventListener("click",function(t){if(Bh)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Bh=!1,!1},!0);var Fo=function(e){if(rt){e=e.touches?e.touches[0]:e;var r=$oe(e.clientX,e.clientY);if(r){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[qn]._onDragOver(n)}}},Voe=function(e){rt&&rt.parentNode[qn]._isOutsideThisEl(e.target)};function wt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Xs({},e),t[qn]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return xD(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:wt.supportPointer!==!1&&"PointerEvent"in window&&!id,emptyInsertThreshold:5};yf.initializePlugins(this,t,r);for(var n in r)!(n in e)&&(e[n]=r[n]);ED(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:Boe,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Kt(t,"pointerdown",this._onTapStart):(Kt(t,"mousedown",this._onTapStart),Kt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Kt(t,"dragover",this),Kt(t,"dragenter",this)),Uh.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xs(this,Noe())}wt.prototype={constructor:wt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&($l=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,rt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,s=this.options,i=s.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=s.filter;if(Xoe(n),!rt&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&id&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=sa(l,s.draggable,n,!1),!(l&&l.animated)&&M0!==l)){if(ec=$r(l),ld=$r(l,s.draggable),typeof u=="function"){if(u.call(this,e,l,this)){is({sortable:r,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),gs("filter",r,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(f){if(f=sa(c,f.trim(),n,!1),f)return is({sortable:r,rootEl:f,name:"filter",targetEl:l,fromEl:n,toEl:n}),gs("filter",r,{evt:e}),!0}),u)){i&&e.cancelable&&e.preventDefault();return}s.handle&&!sa(c,s.handle,n,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,r,n){var s=this,i=s.el,a=s.options,o=i.ownerDocument,l;if(n&&!rt&&n.parentNode===i){var c=Pr(n);if(Ir=i,rt=n,Lr=rt.parentNode,Mo=rt.nextSibling,M0=n,l0=a.group,wt.dragged=rt,Ro={target:rt,clientX:(r||e).clientX,clientY:(r||e).clientY},qS=Ro.clientX-c.left,XS=Ro.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,rt.style["will-change"]="all",l=function(){if(gs("delayEnded",s,{evt:e}),wt.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!jS&&s.nativeDraggable&&(rt.draggable=!0),s._triggerDragStart(e,r),is({sortable:s,name:"choose",originalEvent:e}),Fr(rt,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){mD(rt,u.trim(),Ng)}),Kt(o,"dragover",Fo),Kt(o,"mousemove",Fo),Kt(o,"touchmove",Fo),Kt(o,"mouseup",s._onDrop),Kt(o,"touchend",s._onDrop),Kt(o,"touchcancel",s._onDrop),jS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,rt.draggable=!0),gs("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(vf||Pi))){if(wt.eventCanceled){this._onDrop();return}Kt(o,"mouseup",s._disableDelayedDrag),Kt(o,"touchend",s._disableDelayedDrag),Kt(o,"touchcancel",s._disableDelayedDrag),Kt(o,"mousemove",s._delayedDragTouchMoveHandler),Kt(o,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&Kt(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){rt&&Ng(rt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;zt(e,"mouseup",this._disableDelayedDrag),zt(e,"touchend",this._disableDelayedDrag),zt(e,"touchcancel",this._disableDelayedDrag),zt(e,"mousemove",this._delayedDragTouchMoveHandler),zt(e,"touchmove",this._delayedDragTouchMoveHandler),zt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?Kt(document,"pointermove",this._onTouchMove):r?Kt(document,"touchmove",this._onTouchMove):Kt(document,"mousemove",this._onTouchMove):(Kt(rt,"dragend",this),Kt(Ir,"dragstart",this._onDragStart));try{document.selection?B0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Yl=!1,Ir&&rt){gs("dragStarted",this,{evt:r}),this.nativeDraggable&&Kt(document,"dragover",Voe);var n=this.options;!e&&Fr(rt,n.dragClass,!1),Fr(rt,n.ghostClass,!0),wt.active=this,e&&this._appendGhost(),is({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(ra){this._lastX=ra.clientX,this._lastY=ra.clientY,_D();for(var e=document.elementFromPoint(ra.clientX,ra.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ra.clientX,ra.clientY),e!==r);)r=e;if(rt.parentNode[qn]._isOutsideThisEl(e),r)do{if(r[qn]){var n=void 0;if(n=r[qn]._onDragOver({clientX:ra.clientX,clientY:ra.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=r.parentNode);bD()}},_onTouchMove:function(e){if(Ro){var r=this.options,n=r.fallbackTolerance,s=r.fallbackOffset,i=e.touches?e.touches[0]:e,a=Bt&&Qo(Bt,!0),o=Bt&&a&&a.a,l=Bt&&a&&a.d,c=u0&&Vn&&zS(Vn),u=(i.clientX-Ro.clientX+s.x)/(o||1)+(c?c[0]-Fg[0]:0)/(o||1),f=(i.clientY-Ro.clientY+s.y)/(l||1)+(c?c[1]-Fg[1]:0)/(l||1);if(!wt.active&&!Yl){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Bt){a?(a.e+=u-(Pg||0),a.f+=f-(Rg||0)):a={a:1,b:0,c:0,d:1,e:u,f};var h="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");vt(Bt,"webkitTransform",h),vt(Bt,"mozTransform",h),vt(Bt,"msTransform",h),vt(Bt,"transform",h),Pg=u,Rg=f,ra=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Bt){var e=this.options.fallbackOnBody?document.body:Ir,r=Pr(rt,!0,u0,!0,e),n=this.options;if(u0){for(Vn=e;vt(Vn,"position")==="static"&&vt(Vn,"transform")==="none"&&Vn!==document;)Vn=Vn.parentNode;Vn!==document.body&&Vn!==document.documentElement?(Vn===document&&(Vn=Ma()),r.top+=Vn.scrollTop,r.left+=Vn.scrollLeft):Vn=Ma(),Fg=zS(Vn)}Bt=rt.cloneNode(!0),Fr(Bt,n.ghostClass,!1),Fr(Bt,n.fallbackClass,!0),Fr(Bt,n.dragClass,!0),vt(Bt,"transition",""),vt(Bt,"transform",""),vt(Bt,"box-sizing","border-box"),vt(Bt,"margin",0),vt(Bt,"top",r.top),vt(Bt,"left",r.left),vt(Bt,"width",r.width),vt(Bt,"height",r.height),vt(Bt,"opacity","0.8"),vt(Bt,"position",u0?"absolute":"fixed"),vt(Bt,"zIndex","100000"),vt(Bt,"pointerEvents","none"),wt.ghost=Bt,e.appendChild(Bt),vt(Bt,"transform-origin",qS/parseInt(Bt.style.width)*100+"% "+XS/parseInt(Bt.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,s=e.dataTransfer,i=n.options;if(gs("dragStart",this,{evt:e}),wt.eventCanceled){this._onDrop();return}gs("setupClone",this),wt.eventCanceled||(Br=Bx(rt),Br.draggable=!1,Br.style["will-change"]="",this._hideClone(),Fr(Br,this.options.chosenClass,!1),wt.clone=Br),n.cloneId=B0(function(){gs("clone",n),!wt.eventCanceled&&(n.options.removeCloneOnHide||Ir.insertBefore(Br,rt),n._hideClone(),is({sortable:n,name:"clone"}))}),!r&&Fr(rt,i.dragClass,!0),r?(Bh=!0,n._loopId=setInterval(n._emulateDragOver,50)):(zt(document,"mouseup",n._onDrop),zt(document,"touchend",n._onDrop),zt(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,rt)),Kt(document,"drop",n),vt(rt,"transform","translateZ(0)")),Yl=!0,n._dragStartId=B0(n._dragStarted.bind(n,r,e)),Kt(document,"selectstart",n),Du=!0,id&&vt(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,s,i,a,o=this.options,l=o.group,c=wt.active,u=l0===l,f=o.sort,h=Sn||c,p,g=this,v=!1;if(s1)return;function y(L,O){gs(L,g,Va({evt:e,isOwner:u,axis:p?"vertical":"horizontal",revert:a,dragRect:s,targetRect:i,canSort:f,fromSortable:h,target:n,completed:E,onMove:function(H,V){return d0(Ir,r,rt,s,H,Pr(H),e,V)},changed:x},O))}function b(){y("dragOverAnimationCapture"),g.captureAnimationState(),g!==h&&h.captureAnimationState()}function E(L){return y("dragOverCompleted",{insertion:L}),L&&(u?c._hideClone():c._showClone(g),g!==h&&(Fr(rt,Sn?Sn.options.ghostClass:c.options.ghostClass,!1),Fr(rt,o.ghostClass,!0)),Sn!==g&&g!==wt.active?Sn=g:g===wt.active&&Sn&&(Sn=null),h===g&&(g._ignoreWhileAnimating=n),g.animateAll(function(){y("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(n===rt&&!rt.animated||n===r&&!n.animated)&&($l=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(rt.parentNode[qn]._isOutsideThisEl(e.target),!L&&Fo(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function x(){ws=$r(rt),qi=$r(rt,o.draggable),is({sortable:g,name:"change",toEl:r,newIndex:ws,newDraggableIndex:qi,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=sa(n,o.draggable,r,!0),y("dragOver"),wt.eventCanceled)return v;if(rt.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||g._ignoreWhileAnimating===n)return E(!1);if(Bh=!1,c&&!o.disabled&&(u?f||(a=Lr!==Ir):Sn===this||(this.lastPutMode=l0.checkPull(this,c,rt,e))&&l.checkPut(this,c,rt,e))){if(p=this._getDirection(e,n)==="vertical",s=Pr(rt),y("dragOverValid"),wt.eventCanceled)return v;if(a)return Lr=Ir,b(),this._hideClone(),y("revert"),wt.eventCanceled||(Mo?Ir.insertBefore(rt,Mo):Ir.appendChild(rt)),E(!0);var w=Lx(r,o.draggable);if(!w||Woe(e,p,this)&&!w.animated){if(w===rt)return E(!1);if(w&&r===e.target&&(n=w),n&&(i=Pr(n)),d0(Ir,r,rt,s,n,i,e,!!n)!==!1)return b(),r.appendChild(rt),Lr=r,x(),E(!0)}else if(w&&Goe(e,p,this)){var R=Lc(r,0,o,!0);if(R===rt)return E(!1);if(n=R,i=Pr(n),d0(Ir,r,rt,s,n,i,e,!1)!==!1)return b(),r.insertBefore(rt,R),Lr=r,x(),E(!0)}else if(n.parentNode===r){i=Pr(n);var P=0,S,_=rt.parentNode!==r,m=!Uoe(rt.animated&&rt.toRect||s,n.animated&&n.toRect||i,p),A=p?"top":"left",k=WS(n,"top","top")||WS(rt,"top","top"),I=k?k.scrollTop:void 0;$l!==n&&(S=i[A],ud=!1,c0=!m&&o.invertSwap||_),P=zoe(e,n,i,p,m?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,c0,$l===n);var C;if(P!==0){var M=$r(rt);do M-=P,C=Lr.children[M];while(C&&(vt(C,"display")==="none"||C===Bt))}if(P===0||C===n)return E(!1);$l=n,cd=P;var D=n.nextElementSibling,F=!1;F=P===1;var N=d0(Ir,r,rt,s,n,i,e,F);if(N!==!1)return(N===1||N===-1)&&(F=N===1),s1=!0,setTimeout(joe,30),b(),F&&!D?r.appendChild(rt):n.parentNode.insertBefore(rt,F?D:n),k&&vD(k,0,I-k.scrollTop),Lr=rt.parentNode,S!==void 0&&!c0&&(L0=Math.abs(S-Pr(n)[A])),x(),E(!0)}if(r.contains(rt))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){zt(document,"mousemove",this._onTouchMove),zt(document,"touchmove",this._onTouchMove),zt(document,"pointermove",this._onTouchMove),zt(document,"dragover",Fo),zt(document,"mousemove",Fo),zt(document,"touchmove",Fo)},_offUpEvents:function(){var e=this.el.ownerDocument;zt(e,"mouseup",this._onDrop),zt(e,"touchend",this._onDrop),zt(e,"pointerup",this._onDrop),zt(e,"touchcancel",this._onDrop),zt(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(ws=$r(rt),qi=$r(rt,n.draggable),gs("drop",this,{evt:e}),Lr=rt&&rt.parentNode,ws=$r(rt),qi=$r(rt,n.draggable),wt.eventCanceled){this._nulling();return}Yl=!1,c0=!1,ud=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),a1(this.cloneId),a1(this._dragStartId),this.nativeDraggable&&(zt(document,"drop",this),zt(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),id&&vt(document.body,"user-select",""),vt(rt,"transform",""),e&&(Du&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Bt&&Bt.parentNode&&Bt.parentNode.removeChild(Bt),(Ir===Lr||Sn&&Sn.lastPutMode!=="clone")&&Br&&Br.parentNode&&Br.parentNode.removeChild(Br),rt&&(this.nativeDraggable&&zt(rt,"dragend",this),Ng(rt),rt.style["will-change"]="",Du&&!Yl&&Fr(rt,Sn?Sn.options.ghostClass:this.options.ghostClass,!1),Fr(rt,this.options.chosenClass,!1),is({sortable:this,name:"unchoose",toEl:Lr,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ir!==Lr?(ws>=0&&(is({rootEl:Lr,name:"add",toEl:Lr,fromEl:Ir,originalEvent:e}),is({sortable:this,name:"remove",toEl:Lr,originalEvent:e}),is({rootEl:Lr,name:"sort",toEl:Lr,fromEl:Ir,originalEvent:e}),is({sortable:this,name:"sort",toEl:Lr,originalEvent:e})),Sn&&Sn.save()):ws!==ec&&ws>=0&&(is({sortable:this,name:"update",toEl:Lr,originalEvent:e}),is({sortable:this,name:"sort",toEl:Lr,originalEvent:e})),wt.active&&((ws==null||ws===-1)&&(ws=ec,qi=ld),is({sortable:this,name:"end",toEl:Lr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){gs("nulling",this),Ir=rt=Lr=Bt=Mo=Br=M0=Qi=Ro=ra=Du=ws=qi=ec=ld=$l=cd=Sn=l0=wt.dragged=wt.ghost=wt.clone=wt.active=null,$h.forEach(function(e){e.checked=!0}),$h.length=Pg=Rg=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":rt&&(this._onDragOver(e),Hoe(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,s=0,i=n.length,a=this.options;s<i;s++)r=n[s],sa(r,a.draggable,this.el,!1)&&e.push(r.getAttribute(a.dataIdAttr)||qoe(r));return e},sort:function(e,r){var n={},s=this.el;this.toArray().forEach(function(i,a){var o=s.children[a];sa(o,this.options.draggable,s,!1)&&(n[i]=o)},this),r&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(s.removeChild(n[i]),s.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return sa(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var s=yf.modifyOption(this,e,r);typeof s<"u"?n[e]=s:n[e]=r,e==="group"&&ED(n)},destroy:function(){gs("destroy",this);var e=this.el;e[qn]=null,zt(e,"mousedown",this._onTapStart),zt(e,"touchstart",this._onTapStart),zt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(zt(e,"dragover",this),zt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Uh.splice(Uh.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Qi){if(gs("hideClone",this),wt.eventCanceled)return;vt(Br,"display","none"),this.options.removeCloneOnHide&&Br.parentNode&&Br.parentNode.removeChild(Br),Qi=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Qi){if(gs("showClone",this),wt.eventCanceled)return;rt.parentNode==Ir&&!this.options.group.revertClone?Ir.insertBefore(Br,rt):Mo?Ir.insertBefore(Br,Mo):Ir.appendChild(Br),this.options.group.revertClone&&this.animate(rt,Br),vt(Br,"display",""),Qi=!1}}};function Hoe(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function d0(t,e,r,n,s,i,a,o){var l,c=t[qn],u=c.options.onMove,f;return window.CustomEvent&&!Pi&&!vf?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=r,l.draggedRect=n,l.related=s||e,l.relatedRect=i||Pr(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),u&&(f=u.call(c,l,a)),f}function Ng(t){t.draggable=!1}function joe(){s1=!1}function Goe(t,e,r){var n=Pr(Lc(r.el,0,r.options,!0)),s=10;return e?t.clientX<n.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-s||t.clientY<n.bottom&&t.clientX<n.left}function Woe(t,e,r){var n=Pr(Lx(r.el,r.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}function zoe(t,e,r,n,s,i,a,o){var l=n?t.clientY:t.clientX,c=n?r.height:r.width,u=n?r.top:r.left,f=n?r.bottom:r.right,h=!1;if(!a){if(o&&L0<c*s){if(!ud&&(cd===1?l>u+c*i/2:l<f-c*i/2)&&(ud=!0),ud)h=!0;else if(cd===1?l<u+L0:l>f-L0)return-cd}else if(l>u+c*(1-s)/2&&l<f-c*(1-s)/2)return Koe(e)}return h=h||a,h&&(l<u+c*i/2||l>f-c*i/2)?l>u+c/2?1:-1:0}function Koe(t){return $r(rt)<$r(t)?1:-1}function qoe(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function Xoe(t){$h.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&$h.push(n)}}function B0(t){return setTimeout(t,0)}function a1(t){return clearTimeout(t)}Kp&&Kt(document,"touchmove",function(t){(wt.active||Yl)&&t.cancelable&&t.preventDefault()});wt.utils={on:Kt,off:zt,css:vt,find:mD,is:function(e,r){return!!sa(e,r,e,!1)},extend:Roe,throttle:gD,closest:sa,toggleClass:Fr,clone:Bx,index:$r,nextTick:B0,cancelNextTick:a1,detectDirection:xD,getChild:Lc};wt.get=function(t){return t[qn]};wt.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(wt.utils=Va(Va({},wt.utils),n.utils)),yf.mount(n)})};wt.create=function(t,e){return new wt(t,e)};wt.version=koe;var Jr=[],Pu,i1,o1=!1,Og,Mg,Vh,Ru;function Yoe(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?Kt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Kt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Kt(document,"touchmove",this._handleFallbackAutoScroll):Kt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?zt(document,"dragover",this._handleAutoScroll):(zt(document,"pointermove",this._handleFallbackAutoScroll),zt(document,"touchmove",this._handleFallbackAutoScroll),zt(document,"mousemove",this._handleFallbackAutoScroll)),QS(),U0(),Foe()},nulling:function(){Vh=i1=Pu=o1=Ru=Og=Mg=null,Jr.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var s=this,i=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,o=document.elementFromPoint(i,a);if(Vh=r,n||this.options.forceAutoScrollFallback||vf||Pi||id){Lg(r,this.options,o,n);var l=to(o,!0);o1&&(!Ru||i!==Og||a!==Mg)&&(Ru&&QS(),Ru=setInterval(function(){var c=to(document.elementFromPoint(i,a),!0);c!==l&&(l=c,U0()),Lg(r,s.options,c,n)},10),Og=i,Mg=a)}else{if(!this.options.bubbleScroll||to(o,!0)===Ma()){U0();return}Lg(r,this.options,to(o,!1),!1)}}},Xs(t,{pluginName:"scroll",initializeByDefault:!0})}function U0(){Jr.forEach(function(t){clearInterval(t.pid)}),Jr=[]}function QS(){clearInterval(Ru)}var Lg=gD(function(t,e,r,n){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=Ma(),c=!1,u;i1!==r&&(i1=r,U0(),Pu=e.scroll,u=e.scrollFn,Pu===!0&&(Pu=to(r,!0)));var f=0,h=Pu;do{var p=h,g=Pr(p),v=g.top,y=g.bottom,b=g.left,E=g.right,x=g.width,w=g.height,R=void 0,P=void 0,S=p.scrollWidth,_=p.scrollHeight,m=vt(p),A=p.scrollLeft,k=p.scrollTop;p===l?(R=x<S&&(m.overflowX==="auto"||m.overflowX==="scroll"||m.overflowX==="visible"),P=w<_&&(m.overflowY==="auto"||m.overflowY==="scroll"||m.overflowY==="visible")):(R=x<S&&(m.overflowX==="auto"||m.overflowX==="scroll"),P=w<_&&(m.overflowY==="auto"||m.overflowY==="scroll"));var I=R&&(Math.abs(E-s)<=a&&A+x<S)-(Math.abs(b-s)<=a&&!!A),C=P&&(Math.abs(y-i)<=a&&k+w<_)-(Math.abs(v-i)<=a&&!!k);if(!Jr[f])for(var M=0;M<=f;M++)Jr[M]||(Jr[M]={});(Jr[f].vx!=I||Jr[f].vy!=C||Jr[f].el!==p)&&(Jr[f].el=p,Jr[f].vx=I,Jr[f].vy=C,clearInterval(Jr[f].pid),(I!=0||C!=0)&&(c=!0,Jr[f].pid=setInterval((function(){n&&this.layer===0&&wt.active._onTouchMove(Vh);var D=Jr[this.layer].vy?Jr[this.layer].vy*o:0,F=Jr[this.layer].vx?Jr[this.layer].vx*o:0;typeof u=="function"&&u.call(wt.dragged.parentNode[qn],F,D,t,Vh,Jr[this.layer].el)!=="continue"||vD(Jr[this.layer].el,F,D)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&h!==l&&(h=to(h,!1)));o1=c}},30),SD=function(e){var r=e.originalEvent,n=e.putSortable,s=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(r){var c=n||i;o();var u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,f=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(f)&&(a("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function Ux(){}Ux.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=Lc(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:SD};Xs(Ux,{pluginName:"revertOnSpill"});function $x(){}$x.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,s=n||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop:SD};Xs($x,{pluginName:"removeOnSpill"});var Us;function Qoe(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(r){var n=r.dragEl;Us=n},dragOverValid:function(r){var n=r.completed,s=r.target,i=r.onMove,a=r.activeSortable,o=r.changed,l=r.cancel;if(a.options.swap){var c=this.sortable.el,u=this.options;if(s&&s!==c){var f=Us;i(s)!==!1?(Fr(s,u.swapClass,!0),Us=s):Us=null,f&&f!==Us&&Fr(f,u.swapClass,!1)}o(),n(!0),l()}},drop:function(r){var n=r.activeSortable,s=r.putSortable,i=r.dragEl,a=s||this.sortable,o=this.options;Us&&Fr(Us,o.swapClass,!1),Us&&(o.swap||s&&s.options.swap)&&i!==Us&&(a.captureAnimationState(),a!==n&&n.captureAnimationState(),Joe(i,Us),a.animateAll(),a!==n&&n.animateAll())},nulling:function(){Us=null}},Xs(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Us}}})}function Joe(t,e){var r=t.parentNode,n=e.parentNode,s,i;!r||!n||r.isEqualNode(e)||n.isEqualNode(t)||(s=$r(t),i=$r(e),r.isEqualNode(n)&&s<i&&i++,r.insertBefore(e,r.children[s]),n.insertBefore(t,n.children[i]))}var Nt=[],Ts=[],mu,na,gu=!1,vs=!1,Vl=!1,Er,vu,f0;function Zoe(){function t(e){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));e.options.supportPointer?Kt(document,"pointerup",this._deselectMultiDrag):(Kt(document,"mouseup",this._deselectMultiDrag),Kt(document,"touchend",this._deselectMultiDrag)),Kt(document,"keydown",this._checkKeyDown),Kt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,i){var a="";Nt.length&&na===e?Nt.forEach(function(o,l){a+=(l?", ":"")+o.textContent}):a=i.textContent,s.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var n=r.dragEl;Er=n},delayEnded:function(){this.isMultiDrag=~Nt.indexOf(Er)},setupClone:function(r){var n=r.sortable,s=r.cancel;if(this.isMultiDrag){for(var i=0;i<Nt.length;i++)Ts.push(Bx(Nt[i])),Ts[i].sortableIndex=Nt[i].sortableIndex,Ts[i].draggable=!1,Ts[i].style["will-change"]="",Fr(Ts[i],this.options.selectedClass,!1),Nt[i]===Er&&Fr(Ts[i],this.options.chosenClass,!1);n._hideClone(),s()}},clone:function(r){var n=r.sortable,s=r.rootEl,i=r.dispatchSortableEvent,a=r.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Nt.length&&na===n&&(JS(!0,s),i("clone"),a()))},showClone:function(r){var n=r.cloneNowShown,s=r.rootEl,i=r.cancel;this.isMultiDrag&&(JS(!1,s),Ts.forEach(function(a){vt(a,"display","")}),n(),f0=!1,i())},hideClone:function(r){var n=this;r.sortable;var s=r.cloneNowHidden,i=r.cancel;this.isMultiDrag&&(Ts.forEach(function(a){vt(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),s(),f0=!0,i())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&na&&na.multiDrag._deselectMultiDrag(),Nt.forEach(function(n){n.sortableIndex=$r(n)}),Nt=Nt.sort(function(n,s){return n.sortableIndex-s.sortableIndex}),Vl=!0},dragStarted:function(r){var n=this,s=r.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){Nt.forEach(function(a){a!==Er&&vt(a,"position","absolute")});var i=Pr(Er,!1,!0,!0);Nt.forEach(function(a){a!==Er&&KS(a,i)}),vs=!0,gu=!0}s.animateAll(function(){vs=!1,gu=!1,n.options.animation&&Nt.forEach(function(a){Ig(a)}),n.options.sort&&h0()})}},dragOver:function(r){var n=r.target,s=r.completed,i=r.cancel;vs&&~Nt.indexOf(n)&&(s(!1),i())},revert:function(r){var n=r.fromSortable,s=r.rootEl,i=r.sortable,a=r.dragRect;Nt.length>1&&(Nt.forEach(function(o){i.addAnimationState({target:o,rect:vs?Pr(o):a}),Ig(o),o.fromRect=a,n.removeAnimationState(o)}),vs=!1,ele(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(r){var n=r.sortable,s=r.isOwner,i=r.insertion,a=r.activeSortable,o=r.parentEl,l=r.putSortable,c=this.options;if(i){if(s&&a._hideClone(),gu=!1,c.animation&&Nt.length>1&&(vs||!s&&!a.options.sort&&!l)){var u=Pr(Er,!1,!0,!0);Nt.forEach(function(h){h!==Er&&(KS(h,u),o.appendChild(h))}),vs=!0}if(!s)if(vs||h0(),Nt.length>1){var f=f0;a._showClone(n),a.options.animation&&!f0&&f&&Ts.forEach(function(h){a.addAnimationState({target:h,rect:vu}),h.fromRect=vu,h.thisAnimationDuration=null})}else a._showClone(n)}},dragOverAnimationCapture:function(r){var n=r.dragRect,s=r.isOwner,i=r.activeSortable;if(Nt.forEach(function(o){o.thisAnimationDuration=null}),i.options.animation&&!s&&i.multiDrag.isMultiDrag){vu=Xs({},n);var a=Qo(Er,!0);vu.top-=a.f,vu.left-=a.e}},dragOverAnimationComplete:function(){vs&&(vs=!1,h0())},drop:function(r){var n=r.originalEvent,s=r.rootEl,i=r.parentEl,a=r.sortable,o=r.dispatchSortableEvent,l=r.oldIndex,c=r.putSortable,u=c||this.sortable;if(n){var f=this.options,h=i.children;if(!Vl)if(f.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Fr(Er,f.selectedClass,!~Nt.indexOf(Er)),~Nt.indexOf(Er))Nt.splice(Nt.indexOf(Er),1),mu=null,Iu({sortable:a,rootEl:s,name:"deselect",targetEl:Er});else{if(Nt.push(Er),Iu({sortable:a,rootEl:s,name:"select",targetEl:Er}),n.shiftKey&&mu&&a.el.contains(mu)){var p=$r(mu),g=$r(Er);if(~p&&~g&&p!==g){var v,y;for(g>p?(y=p,v=g):(y=g,v=p+1);y<v;y++)~Nt.indexOf(h[y])||(Fr(h[y],f.selectedClass,!0),Nt.push(h[y]),Iu({sortable:a,rootEl:s,name:"select",targetEl:h[y]}))}}else mu=Er;na=u}if(Vl&&this.isMultiDrag){if(vs=!1,(i[qn].options.sort||i!==s)&&Nt.length>1){var b=Pr(Er),E=$r(Er,":not(."+this.options.selectedClass+")");if(!gu&&f.animation&&(Er.thisAnimationDuration=null),u.captureAnimationState(),!gu&&(f.animation&&(Er.fromRect=b,Nt.forEach(function(w){if(w.thisAnimationDuration=null,w!==Er){var R=vs?Pr(w):b;w.fromRect=R,u.addAnimationState({target:w,rect:R})}})),h0(),Nt.forEach(function(w){h[E]?i.insertBefore(w,h[E]):i.appendChild(w),E++}),l===$r(Er))){var x=!1;Nt.forEach(function(w){if(w.sortableIndex!==$r(w)){x=!0;return}}),x&&o("update")}Nt.forEach(function(w){Ig(w)}),u.animateAll()}na=u}(s===i||c&&c.lastPutMode!=="clone")&&Ts.forEach(function(w){w.parentNode&&w.parentNode.removeChild(w)})}},nullingGlobal:function(){this.isMultiDrag=Vl=!1,Ts.length=0},destroyGlobal:function(){this._deselectMultiDrag(),zt(document,"pointerup",this._deselectMultiDrag),zt(document,"mouseup",this._deselectMultiDrag),zt(document,"touchend",this._deselectMultiDrag),zt(document,"keydown",this._checkKeyDown),zt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof Vl<"u"&&Vl)&&na===this.sortable&&!(r&&sa(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;Nt.length;){var n=Nt[0];Fr(n,this.options.selectedClass,!1),Nt.shift(),Iu({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Xs(t,{pluginName:"multiDrag",utils:{select:function(r){var n=r.parentNode[qn];!n||!n.options.multiDrag||~Nt.indexOf(r)||(na&&na!==n&&(na.multiDrag._deselectMultiDrag(),na=n),Fr(r,n.options.selectedClass,!0),Nt.push(r))},deselect:function(r){var n=r.parentNode[qn],s=Nt.indexOf(r);!n||!n.options.multiDrag||!~s||(Fr(r,n.options.selectedClass,!1),Nt.splice(s,1))}},eventProperties:function(){var r=this,n=[],s=[];return Nt.forEach(function(i){n.push({multiDragElement:i,index:i.sortableIndex});var a;vs&&i!==Er?a=-1:vs?a=$r(i,":not(."+r.options.selectedClass+")"):a=$r(i),s.push({multiDragElement:i,index:a})}),{items:Soe(Nt),clones:[].concat(Ts),oldIndicies:n,newIndicies:s}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function ele(t,e){Nt.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function JS(t,e){Ts.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function h0(){Nt.forEach(function(t){t!==Er&&t.parentNode&&t.parentNode.removeChild(t)})}wt.mount(new Yoe);wt.mount($x,Ux);const tle=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Zoe,Sortable:wt,Swap:Qoe,default:wt},Symbol.toStringTag,{value:"Module"})),rle=ax(tle);(function(t,e){(function(n,s){t.exports=s(xoe,rle)})(typeof self<"u"?self:jt,function(r,n){return function(s){var i={};function a(o){if(i[o])return i[o].exports;var l=i[o]={i:o,l:!1,exports:{}};return s[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=s,a.c=i,a.d=function(o,l,c){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:c})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var u in o)a.d(c,u,(function(f){return o[f]}).bind(null,u));return c},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s="fb15")}({"00ee":function(s,i,a){var o=a("b622"),l=o("toStringTag"),c={};c[l]="z",s.exports=String(c)==="[object z]"},"0366":function(s,i,a){var o=a("1c0b");s.exports=function(l,c,u){if(o(l),c===void 0)return l;switch(u){case 0:return function(){return l.call(c)};case 1:return function(f){return l.call(c,f)};case 2:return function(f,h){return l.call(c,f,h)};case 3:return function(f,h,p){return l.call(c,f,h,p)}}return function(){return l.apply(c,arguments)}}},"057f":function(s,i,a){var o=a("fc6a"),l=a("241c").f,c={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(h){try{return l(h)}catch{return u.slice()}};s.exports.f=function(p){return u&&c.call(p)=="[object Window]"?f(p):l(o(p))}},"06cf":function(s,i,a){var o=a("83ab"),l=a("d1e7"),c=a("5c6c"),u=a("fc6a"),f=a("c04e"),h=a("5135"),p=a("0cfb"),g=Object.getOwnPropertyDescriptor;i.f=o?g:function(y,b){if(y=u(y),b=f(b,!0),p)try{return g(y,b)}catch{}if(h(y,b))return c(!l.f.call(y,b),y[b])}},"0cfb":function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("cc12");s.exports=!o&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,i,a){var o=a("23e7"),l=a("d58f").left,c=a("a640"),u=a("ae40"),f=c("reduce"),h=u("reduce",{1:0});o({target:"Array",proto:!0,forced:!f||!h},{reduce:function(g){return l(this,g,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,i,a){var o=a("c6b6"),l=a("9263");s.exports=function(c,u){var f=c.exec;if(typeof f=="function"){var h=f.call(c,u);if(typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(o(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,u)}},"159b":function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("17c2"),u=a("9112");for(var f in l){var h=o[f],p=h&&h.prototype;if(p&&p.forEach!==c)try{u(p,"forEach",c)}catch{p.forEach=c}}},"17c2":function(s,i,a){var o=a("b727").forEach,l=a("a640"),c=a("ae40"),u=l("forEach"),f=c("forEach");s.exports=!u||!f?function(p){return o(this,p,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,i,a){var o=a("d066");s.exports=o("document","documentElement")},"1c0b":function(s,i){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},"1c7e":function(s,i,a){var o=a("b622"),l=o("iterator"),c=!1;try{var u=0,f={next:function(){return{done:!!u++}},return:function(){c=!0}};f[l]=function(){return this},Array.from(f,function(){throw 2})}catch{}s.exports=function(h,p){if(!p&&!c)return!1;var g=!1;try{var v={};v[l]=function(){return{next:function(){return{done:g=!0}}}},h(v)}catch{}return g}},"1d80":function(s,i){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},"1dde":function(s,i,a){var o=a("d039"),l=a("b622"),c=a("2d00"),u=l("species");s.exports=function(f){return c>=51||!o(function(){var h=[],p=h.constructor={};return p[u]=function(){return{foo:1}},h[f](Boolean).foo!==1})}},"23cb":function(s,i,a){var o=a("a691"),l=Math.max,c=Math.min;s.exports=function(u,f){var h=o(u);return h<0?l(h+f,0):c(h,f)}},"23e7":function(s,i,a){var o=a("da84"),l=a("06cf").f,c=a("9112"),u=a("6eeb"),f=a("ce4e"),h=a("e893"),p=a("94ca");s.exports=function(g,v){var y=g.target,b=g.global,E=g.stat,x,w,R,P,S,_;if(b?w=o:E?w=o[y]||f(y,{}):w=(o[y]||{}).prototype,w)for(R in v){if(S=v[R],g.noTargetGet?(_=l(w,R),P=_&&_.value):P=w[R],x=p(b?R:y+(E?".":"#")+R,g.forced),!x&&P!==void 0){if(typeof S==typeof P)continue;h(S,P)}(g.sham||P&&P.sham)&&c(S,"sham",!0),u(w,R,S,g)}}},"241c":function(s,i,a){var o=a("ca84"),l=a("7839"),c=l.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(f){return o(f,c)}},"25f0":function(s,i,a){var o=a("6eeb"),l=a("825a"),c=a("d039"),u=a("ad6d"),f="toString",h=RegExp.prototype,p=h[f],g=c(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),v=p.name!=f;(g||v)&&o(RegExp.prototype,f,function(){var b=l(this),E=String(b.source),x=b.flags,w=String(x===void 0&&b instanceof RegExp&&!("flags"in h)?u.call(b):x);return"/"+E+"/"+w},{unsafe:!0})},"2ca0":function(s,i,a){var o=a("23e7"),l=a("06cf").f,c=a("50c4"),u=a("5a34"),f=a("1d80"),h=a("ab13"),p=a("c430"),g="".startsWith,v=Math.min,y=h("startsWith"),b=!p&&!y&&!!function(){var E=l(String.prototype,"startsWith");return E&&!E.writable}();o({target:"String",proto:!0,forced:!b&&!y},{startsWith:function(x){var w=String(f(this));u(x);var R=c(v(arguments.length>1?arguments[1]:void 0,w.length)),P=String(x);return g?g.call(w,P,R):w.slice(R,R+P.length)===P}})},"2d00":function(s,i,a){var o=a("da84"),l=a("342f"),c=o.process,u=c&&c.versions,f=u&&u.v8,h,p;f?(h=f.split("."),p=h[0]+h[1]):l&&(h=l.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=l.match(/Chrome\/(\d+)/),h&&(p=h[1]))),s.exports=p&&+p},"342f":function(s,i,a){var o=a("d066");s.exports=o("navigator","userAgent")||""},"35a1":function(s,i,a){var o=a("f5df"),l=a("3f8c"),c=a("b622"),u=c("iterator");s.exports=function(f){if(f!=null)return f[u]||f["@@iterator"]||l[o(f)]}},"37e8":function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("825a"),u=a("df75");s.exports=o?Object.defineProperties:function(h,p){c(h);for(var g=u(p),v=g.length,y=0,b;v>y;)l.f(h,b=g[y++],p[b]);return h}},"3bbe":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(s,i,a){var o=a("6547").charAt,l=a("69f3"),c=a("7dd0"),u="String Iterator",f=l.set,h=l.getterFor(u);c(String,"String",function(p){f(this,{type:u,string:String(p),index:0})},function(){var g=h(this),v=g.string,y=g.index,b;return y>=v.length?{value:void 0,done:!0}:(b=o(v,y),g.index+=b.length,{value:b,done:!1})})},"3f8c":function(s,i){s.exports={}},4160:function(s,i,a){var o=a("23e7"),l=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(s,i,a){var o=a("da84");s.exports=o},"44ad":function(s,i,a){var o=a("d039"),l=a("c6b6"),c="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return l(u)=="String"?c.call(u,""):Object(u)}:Object},"44d2":function(s,i,a){var o=a("b622"),l=a("7c73"),c=a("9bf2"),u=o("unscopables"),f=Array.prototype;f[u]==null&&c.f(f,u,{configurable:!0,value:l(null)}),s.exports=function(h){f[u][h]=!0}},"44e7":function(s,i,a){var o=a("861d"),l=a("c6b6"),c=a("b622"),u=c("match");s.exports=function(f){var h;return o(f)&&((h=f[u])!==void 0?!!h:l(f)=="RegExp")}},4930:function(s,i,a){var o=a("d039");s.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(s,i,a){var o=a("fc6a"),l=a("50c4"),c=a("23cb"),u=function(f){return function(h,p,g){var v=o(h),y=l(v.length),b=c(g,y),E;if(f&&p!=p){for(;y>b;)if(E=v[b++],E!=E)return!0}else for(;y>b;b++)if((f||b in v)&&v[b]===p)return f||b||0;return!f&&-1}};s.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(s,i,a){var o=a("23e7"),l=a("b727").filter,c=a("1dde"),u=a("ae40"),f=c("filter"),h=u("filter");o({target:"Array",proto:!0,forced:!f||!h},{filter:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,i,a){var o=a("0366"),l=a("7b0b"),c=a("9bdd"),u=a("e95a"),f=a("50c4"),h=a("8418"),p=a("35a1");s.exports=function(v){var y=l(v),b=typeof this=="function"?this:Array,E=arguments.length,x=E>1?arguments[1]:void 0,w=x!==void 0,R=p(y),P=0,S,_,m,A,k,I;if(w&&(x=o(x,E>2?arguments[2]:void 0,2)),R!=null&&!(b==Array&&u(R)))for(A=R.call(y),k=A.next,_=new b;!(m=k.call(A)).done;P++)I=w?c(A,x,[m.value,P],!0):m.value,h(_,P,I);else for(S=f(y.length),_=new b(S);S>P;P++)I=w?x(y[P],P):y[P],h(_,P,I);return _.length=P,_}},"4fad":function(s,i,a){var o=a("23e7"),l=a("6f53").entries;o({target:"Object",stat:!0},{entries:function(u){return l(u)}})},"50c4":function(s,i,a){var o=a("a691"),l=Math.min;s.exports=function(c){return c>0?l(o(c),9007199254740991):0}},5135:function(s,i){var a={}.hasOwnProperty;s.exports=function(o,l){return a.call(o,l)}},5319:function(s,i,a){var o=a("d784"),l=a("825a"),c=a("7b0b"),u=a("50c4"),f=a("a691"),h=a("1d80"),p=a("8aa5"),g=a("14c3"),v=Math.max,y=Math.min,b=Math.floor,E=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g,w=function(R){return R===void 0?R:String(R)};o("replace",2,function(R,P,S,_){var m=_.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,A=_.REPLACE_KEEPS_$0,k=m?"$":"$0";return[function(M,D){var F=h(this),N=M==null?void 0:M[R];return N!==void 0?N.call(M,F,D):P.call(String(F),M,D)},function(C,M){if(!m&&A||typeof M=="string"&&M.indexOf(k)===-1){var D=S(P,C,this,M);if(D.done)return D.value}var F=l(C),N=String(this),L=typeof M=="function";L||(M=String(M));var O=F.global;if(O){var z=F.unicode;F.lastIndex=0}for(var H=[];;){var V=g(F,N);if(V===null||(H.push(V),!O))break;var W=String(V[0]);W===""&&(F.lastIndex=p(N,u(F.lastIndex),z))}for(var G="",re=0,de=0;de<H.length;de++){V=H[de];for(var ae=String(V[0]),ce=v(y(f(V.index),N.length),0),te=[],Z=1;Z<V.length;Z++)te.push(w(V[Z]));var xe=V.groups;if(L){var J=[ae].concat(te,ce,N);xe!==void 0&&J.push(xe);var Y=String(M.apply(void 0,J))}else Y=I(ae,N,ce,te,xe,M);ce>=re&&(G+=N.slice(re,ce)+Y,re=ce+ae.length)}return G+N.slice(re)}];function I(C,M,D,F,N,L){var O=D+C.length,z=F.length,H=x;return N!==void 0&&(N=c(N),H=E),P.call(L,H,function(V,W){var G;switch(W.charAt(0)){case"$":return"$";case"&":return C;case"`":return M.slice(0,D);case"'":return M.slice(O);case"<":G=N[W.slice(1,-1)];break;default:var re=+W;if(re===0)return V;if(re>z){var de=b(re/10);return de===0?V:de<=z?F[de-1]===void 0?W.charAt(1):F[de-1]+W.charAt(1):V}G=F[re-1]}return G===void 0?"":G})}})},5692:function(s,i,a){var o=a("c430"),l=a("c6cd");(s.exports=function(c,u){return l[c]||(l[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,i,a){var o=a("d066"),l=a("241c"),c=a("7418"),u=a("825a");s.exports=o("Reflect","ownKeys")||function(h){var p=l.f(u(h)),g=c.f;return g?p.concat(g(h)):p}},"5a34":function(s,i,a){var o=a("44e7");s.exports=function(l){if(o(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(s,i){s.exports=function(a,o){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:o}}},"5db7":function(s,i,a){var o=a("23e7"),l=a("a2bf"),c=a("7b0b"),u=a("50c4"),f=a("1c0b"),h=a("65f0");o({target:"Array",proto:!0},{flatMap:function(g){var v=c(this),y=u(v.length),b;return f(g),b=h(v,0),b.length=l(b,v,v,y,0,1,g,arguments.length>1?arguments[1]:void 0),b}})},6547:function(s,i,a){var o=a("a691"),l=a("1d80"),c=function(u){return function(f,h){var p=String(l(f)),g=o(h),v=p.length,y,b;return g<0||g>=v?u?"":void 0:(y=p.charCodeAt(g),y<55296||y>56319||g+1===v||(b=p.charCodeAt(g+1))<56320||b>57343?u?p.charAt(g):y:u?p.slice(g,g+2):(y-55296<<10)+(b-56320)+65536)}};s.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(s,i,a){var o=a("861d"),l=a("e8b5"),c=a("b622"),u=c("species");s.exports=function(f,h){var p;return l(f)&&(p=f.constructor,typeof p=="function"&&(p===Array||l(p.prototype))?p=void 0:o(p)&&(p=p[u],p===null&&(p=void 0))),new(p===void 0?Array:p)(h===0?0:h)}},"69f3":function(s,i,a){var o=a("7f9a"),l=a("da84"),c=a("861d"),u=a("9112"),f=a("5135"),h=a("f772"),p=a("d012"),g=l.WeakMap,v,y,b,E=function(m){return b(m)?y(m):v(m,{})},x=function(m){return function(A){var k;if(!c(A)||(k=y(A)).type!==m)throw TypeError("Incompatible receiver, "+m+" required");return k}};if(o){var w=new g,R=w.get,P=w.has,S=w.set;v=function(m,A){return S.call(w,m,A),A},y=function(m){return R.call(w,m)||{}},b=function(m){return P.call(w,m)}}else{var _=h("state");p[_]=!0,v=function(m,A){return u(m,_,A),A},y=function(m){return f(m,_)?m[_]:{}},b=function(m){return f(m,_)}}s.exports={set:v,get:y,has:b,enforce:E,getterFor:x}},"6eeb":function(s,i,a){var o=a("da84"),l=a("9112"),c=a("5135"),u=a("ce4e"),f=a("8925"),h=a("69f3"),p=h.get,g=h.enforce,v=String(String).split("String");(s.exports=function(y,b,E,x){var w=x?!!x.unsafe:!1,R=x?!!x.enumerable:!1,P=x?!!x.noTargetGet:!1;if(typeof E=="function"&&(typeof b=="string"&&!c(E,"name")&&l(E,"name",b),g(E).source=v.join(typeof b=="string"?b:"")),y===o){R?y[b]=E:u(b,E);return}else w?!P&&y[b]&&(R=!0):delete y[b];R?y[b]=E:l(y,b,E)})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||f(this)})},"6f53":function(s,i,a){var o=a("83ab"),l=a("df75"),c=a("fc6a"),u=a("d1e7").f,f=function(h){return function(p){for(var g=c(p),v=l(g),y=v.length,b=0,E=[],x;y>b;)x=v[b++],(!o||u.call(g,x))&&E.push(h?[x,g[x]]:g[x]);return E}};s.exports={entries:f(!0),values:f(!1)}},"73d9":function(s,i,a){var o=a("44d2");o("flatMap")},7418:function(s,i){i.f=Object.getOwnPropertySymbols},"746f":function(s,i,a){var o=a("428f"),l=a("5135"),c=a("e538"),u=a("9bf2").f;s.exports=function(f){var h=o.Symbol||(o.Symbol={});l(h,f)||u(h,f,{value:c.f(f)})}},7839:function(s,i){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,i,a){var o=a("1d80");s.exports=function(l){return Object(o(l))}},"7c73":function(s,i,a){var o=a("825a"),l=a("37e8"),c=a("7839"),u=a("d012"),f=a("1be4"),h=a("cc12"),p=a("f772"),g=">",v="<",y="prototype",b="script",E=p("IE_PROTO"),x=function(){},w=function(m){return v+b+g+m+v+"/"+b+g},R=function(m){m.write(w("")),m.close();var A=m.parentWindow.Object;return m=null,A},P=function(){var m=h("iframe"),A="java"+b+":",k;return m.style.display="none",f.appendChild(m),m.src=String(A),k=m.contentWindow.document,k.open(),k.write(w("document.F=Object")),k.close(),k.F},S,_=function(){try{S=document.domain&&new ActiveXObject("htmlfile")}catch{}_=S?R(S):P();for(var m=c.length;m--;)delete _[y][c[m]];return _()};u[E]=!0,s.exports=Object.create||function(A,k){var I;return A!==null?(x[y]=o(A),I=new x,x[y]=null,I[E]=A):I=_(),k===void 0?I:l(I,k)}},"7dd0":function(s,i,a){var o=a("23e7"),l=a("9ed3"),c=a("e163"),u=a("d2bb"),f=a("d44e"),h=a("9112"),p=a("6eeb"),g=a("b622"),v=a("c430"),y=a("3f8c"),b=a("ae93"),E=b.IteratorPrototype,x=b.BUGGY_SAFARI_ITERATORS,w=g("iterator"),R="keys",P="values",S="entries",_=function(){return this};s.exports=function(m,A,k,I,C,M,D){l(k,A,I);var F=function(de){if(de===C&&H)return H;if(!x&&de in O)return O[de];switch(de){case R:return function(){return new k(this,de)};case P:return function(){return new k(this,de)};case S:return function(){return new k(this,de)}}return function(){return new k(this)}},N=A+" Iterator",L=!1,O=m.prototype,z=O[w]||O["@@iterator"]||C&&O[C],H=!x&&z||F(C),V=A=="Array"&&O.entries||z,W,G,re;if(V&&(W=c(V.call(new m)),E!==Object.prototype&&W.next&&(!v&&c(W)!==E&&(u?u(W,E):typeof W[w]!="function"&&h(W,w,_)),f(W,N,!0,!0),v&&(y[N]=_))),C==P&&z&&z.name!==P&&(L=!0,H=function(){return z.call(this)}),(!v||D)&&O[w]!==H&&h(O,w,H),y[A]=H,C)if(G={values:F(P),keys:M?H:F(R),entries:F(S)},D)for(re in G)(x||L||!(re in O))&&p(O,re,G[re]);else o({target:A,proto:!0,forced:x||L},G);return G}},"7f9a":function(s,i,a){var o=a("da84"),l=a("8925"),c=o.WeakMap;s.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(s,i,a){var o=a("d039");s.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,i,a){var o=a("c04e"),l=a("9bf2"),c=a("5c6c");s.exports=function(u,f,h){var p=o(f);p in u?l.f(u,p,c(0,h)):u[p]=h}},"861d":function(s,i){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},8875:function(s,i,a){var o,l,c;(function(u,f){l=[],o=f,c=typeof o=="function"?o.apply(i,l):o,c!==void 0&&(s.exports=c)})(typeof self<"u"?self:this,function(){function u(){var f=Object.getOwnPropertyDescriptor(document,"currentScript");if(!f&&"currentScript"in document&&document.currentScript||f&&f.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(S){var h=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,p=/@([^@]*):(\d+):(\d+)\s*$/ig,g=h.exec(S.stack)||p.exec(S.stack),v=g&&g[1]||!1,y=g&&g[2]||!1,b=document.location.href.replace(document.location.hash,""),E,x,w,R=document.getElementsByTagName("script");v===b&&(E=document.documentElement.outerHTML,x=new RegExp("(?:[^\\n]+?\\n){0,"+(y-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),w=E.replace(x,"$1").trim());for(var P=0;P<R.length;P++)if(R[P].readyState==="interactive"||R[P].src===v||v===b&&R[P].innerHTML&&R[P].innerHTML.trim()===w)return R[P];return null}}return u})},8925:function(s,i,a){var o=a("c6cd"),l=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(c){return l.call(c)}),s.exports=o.inspectSource},"8aa5":function(s,i,a){var o=a("6547").charAt;s.exports=function(l,c,u){return c+(u?o(l,c).length:1)}},"8bbf":function(s,i){s.exports=r},"90e3":function(s,i){var a=0,o=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+o).toString(36)}},9112:function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("5c6c");s.exports=o?function(u,f,h){return l.f(u,f,c(1,h))}:function(u,f,h){return u[f]=h,u}},9263:function(s,i,a){var o=a("ad6d"),l=a("9f7f"),c=RegExp.prototype.exec,u=String.prototype.replace,f=c,h=function(){var y=/a/,b=/b*/g;return c.call(y,"a"),c.call(b,"a"),y.lastIndex!==0||b.lastIndex!==0}(),p=l.UNSUPPORTED_Y||l.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0,v=h||g||p;v&&(f=function(b){var E=this,x,w,R,P,S=p&&E.sticky,_=o.call(E),m=E.source,A=0,k=b;return S&&(_=_.replace("y",""),_.indexOf("g")===-1&&(_+="g"),k=String(b).slice(E.lastIndex),E.lastIndex>0&&(!E.multiline||E.multiline&&b[E.lastIndex-1]!==`
`)&&(m="(?: "+m+")",k=" "+k,A++),w=new RegExp("^(?:"+m+")",_)),g&&(w=new RegExp("^"+m+"$(?!\\s)",_)),h&&(x=E.lastIndex),R=c.call(S?w:E,k),S?R?(R.input=R.input.slice(A),R[0]=R[0].slice(A),R.index=E.lastIndex,E.lastIndex+=R[0].length):E.lastIndex=0:h&&R&&(E.lastIndex=E.global?R.index+R[0].length:x),g&&R&&R.length>1&&u.call(R[0],w,function(){for(P=1;P<arguments.length-2;P++)arguments[P]===void 0&&(R[P]=void 0)}),R}),s.exports=f},"94ca":function(s,i,a){var o=a("d039"),l=/#|\.prototype\./,c=function(g,v){var y=f[u(g)];return y==p?!0:y==h?!1:typeof v=="function"?o(v):!!v},u=c.normalize=function(g){return String(g).replace(l,".").toLowerCase()},f=c.data={},h=c.NATIVE="N",p=c.POLYFILL="P";s.exports=c},"99af":function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("e8b5"),u=a("861d"),f=a("7b0b"),h=a("50c4"),p=a("8418"),g=a("65f0"),v=a("1dde"),y=a("b622"),b=a("2d00"),E=y("isConcatSpreadable"),x=9007199254740991,w="Maximum allowed index exceeded",R=b>=51||!l(function(){var m=[];return m[E]=!1,m.concat()[0]!==m}),P=v("concat"),S=function(m){if(!u(m))return!1;var A=m[E];return A!==void 0?!!A:c(m)},_=!R||!P;o({target:"Array",proto:!0,forced:_},{concat:function(A){var k=f(this),I=g(k,0),C=0,M,D,F,N,L;for(M=-1,F=arguments.length;M<F;M++)if(L=M===-1?k:arguments[M],S(L)){if(N=h(L.length),C+N>x)throw TypeError(w);for(D=0;D<N;D++,C++)D in L&&p(I,C,L[D])}else{if(C>=x)throw TypeError(w);p(I,C++,L)}return I.length=C,I}})},"9bdd":function(s,i,a){var o=a("825a");s.exports=function(l,c,u,f){try{return f?c(o(u)[0],u[1]):c(u)}catch(p){var h=l.return;throw h!==void 0&&o(h.call(l)),p}}},"9bf2":function(s,i,a){var o=a("83ab"),l=a("0cfb"),c=a("825a"),u=a("c04e"),f=Object.defineProperty;i.f=o?f:function(p,g,v){if(c(p),g=u(g,!0),c(v),l)try{return f(p,g,v)}catch{}if("get"in v||"set"in v)throw TypeError("Accessors not supported");return"value"in v&&(p[g]=v.value),p}},"9ed3":function(s,i,a){var o=a("ae93").IteratorPrototype,l=a("7c73"),c=a("5c6c"),u=a("d44e"),f=a("3f8c"),h=function(){return this};s.exports=function(p,g,v){var y=g+" Iterator";return p.prototype=l(o,{next:c(1,v)}),u(p,y,!1,!0),f[y]=h,p}},"9f7f":function(s,i,a){var o=a("d039");function l(c,u){return RegExp(c,u)}i.UNSUPPORTED_Y=o(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),i.BROKEN_CARET=o(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(s,i,a){var o=a("e8b5"),l=a("50c4"),c=a("0366"),u=function(f,h,p,g,v,y,b,E){for(var x=v,w=0,R=b?c(b,E,3):!1,P;w<g;){if(w in p){if(P=R?R(p[w],w,h):p[w],y>0&&o(P))x=u(f,h,P,l(P.length),x,y-1)-1;else{if(x>=9007199254740991)throw TypeError("Exceed the acceptable array length");f[x]=P}x++}w++}return x};s.exports=u},a352:function(s,i){s.exports=n},a434:function(s,i,a){var o=a("23e7"),l=a("23cb"),c=a("a691"),u=a("50c4"),f=a("7b0b"),h=a("65f0"),p=a("8418"),g=a("1dde"),v=a("ae40"),y=g("splice"),b=v("splice",{ACCESSORS:!0,0:0,1:2}),E=Math.max,x=Math.min,w=9007199254740991,R="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!y||!b},{splice:function(S,_){var m=f(this),A=u(m.length),k=l(S,A),I=arguments.length,C,M,D,F,N,L;if(I===0?C=M=0:I===1?(C=0,M=A-k):(C=I-2,M=x(E(c(_),0),A-k)),A+C-M>w)throw TypeError(R);for(D=h(m,M),F=0;F<M;F++)N=k+F,N in m&&p(D,F,m[N]);if(D.length=M,C<M){for(F=k;F<A-M;F++)N=F+M,L=F+C,N in m?m[L]=m[N]:delete m[L];for(F=A;F>A-M+C;F--)delete m[F-1]}else if(C>M)for(F=A-M;F>k;F--)N=F+M-1,L=F+C-1,N in m?m[L]=m[N]:delete m[L];for(F=0;F<C;F++)m[F+k]=arguments[F+2];return m.length=A-M+C,D}})},a4d3:function(s,i,a){var o=a("23e7"),l=a("da84"),c=a("d066"),u=a("c430"),f=a("83ab"),h=a("4930"),p=a("fdbf"),g=a("d039"),v=a("5135"),y=a("e8b5"),b=a("861d"),E=a("825a"),x=a("7b0b"),w=a("fc6a"),R=a("c04e"),P=a("5c6c"),S=a("7c73"),_=a("df75"),m=a("241c"),A=a("057f"),k=a("7418"),I=a("06cf"),C=a("9bf2"),M=a("d1e7"),D=a("9112"),F=a("6eeb"),N=a("5692"),L=a("f772"),O=a("d012"),z=a("90e3"),H=a("b622"),V=a("e538"),W=a("746f"),G=a("d44e"),re=a("69f3"),de=a("b727").forEach,ae=L("hidden"),ce="Symbol",te="prototype",Z=H("toPrimitive"),xe=re.set,J=re.getterFor(ce),Y=Object[te],Q=l.Symbol,fe=c("JSON","stringify"),ye=I.f,ie=C.f,ee=A.f,ge=M.f,Te=N("symbols"),ke=N("op-symbols"),Ae=N("string-to-symbol-registry"),We=N("symbol-to-string-registry"),De=N("wks"),je=l.QObject,$e=!je||!je[te]||!je[te].findChild,Ie=f&&g(function(){return S(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a!=7})?function(pt,ct,mt){var Ct=ye(Y,ct);Ct&&delete Y[ct],ie(pt,ct,mt),Ct&&pt!==Y&&ie(Y,ct,Ct)}:ie,Ke=function(pt,ct){var mt=Te[pt]=S(Q[te]);return xe(mt,{type:ce,tag:pt,description:ct}),f||(mt.description=ct),mt},_e=p?function(pt){return typeof pt=="symbol"}:function(pt){return Object(pt)instanceof Q},Ee=function(ct,mt,Ct){ct===Y&&Ee(ke,mt,Ct),E(ct);var Rt=R(mt,!0);return E(Ct),v(Te,Rt)?(Ct.enumerable?(v(ct,ae)&&ct[ae][Rt]&&(ct[ae][Rt]=!1),Ct=S(Ct,{enumerable:P(0,!1)})):(v(ct,ae)||ie(ct,ae,P(1,{})),ct[ae][Rt]=!0),Ie(ct,Rt,Ct)):ie(ct,Rt,Ct)},Se=function(ct,mt){E(ct);var Ct=w(mt),Rt=_(Ct).concat(St(Ct));return de(Rt,function(mr){(!f||ze.call(Ct,mr))&&Ee(ct,mr,Ct[mr])}),ct},Le=function(ct,mt){return mt===void 0?S(ct):Se(S(ct),mt)},ze=function(ct){var mt=R(ct,!0),Ct=ge.call(this,mt);return this===Y&&v(Te,mt)&&!v(ke,mt)?!1:Ct||!v(this,mt)||!v(Te,mt)||v(this,ae)&&this[ae][mt]?Ct:!0},lt=function(ct,mt){var Ct=w(ct),Rt=R(mt,!0);if(!(Ct===Y&&v(Te,Rt)&&!v(ke,Rt))){var mr=ye(Ct,Rt);return mr&&v(Te,Rt)&&!(v(Ct,ae)&&Ct[ae][Rt])&&(mr.enumerable=!0),mr}},xt=function(ct){var mt=ee(w(ct)),Ct=[];return de(mt,function(Rt){!v(Te,Rt)&&!v(O,Rt)&&Ct.push(Rt)}),Ct},St=function(ct){var mt=ct===Y,Ct=ee(mt?ke:w(ct)),Rt=[];return de(Ct,function(mr){v(Te,mr)&&(!mt||v(Y,mr))&&Rt.push(Te[mr])}),Rt};if(h||(Q=function(){if(this instanceof Q)throw TypeError("Symbol is not a constructor");var ct=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),mt=z(ct),Ct=function(Rt){this===Y&&Ct.call(ke,Rt),v(this,ae)&&v(this[ae],mt)&&(this[ae][mt]=!1),Ie(this,mt,P(1,Rt))};return f&&$e&&Ie(Y,mt,{configurable:!0,set:Ct}),Ke(mt,ct)},F(Q[te],"toString",function(){return J(this).tag}),F(Q,"withoutSetter",function(pt){return Ke(z(pt),pt)}),M.f=ze,C.f=Ee,I.f=lt,m.f=A.f=xt,k.f=St,V.f=function(pt){return Ke(H(pt),pt)},f&&(ie(Q[te],"description",{configurable:!0,get:function(){return J(this).description}}),u||F(Y,"propertyIsEnumerable",ze,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:Q}),de(_(De),function(pt){W(pt)}),o({target:ce,stat:!0,forced:!h},{for:function(pt){var ct=String(pt);if(v(Ae,ct))return Ae[ct];var mt=Q(ct);return Ae[ct]=mt,We[mt]=ct,mt},keyFor:function(ct){if(!_e(ct))throw TypeError(ct+" is not a symbol");if(v(We,ct))return We[ct]},useSetter:function(){$e=!0},useSimple:function(){$e=!1}}),o({target:"Object",stat:!0,forced:!h,sham:!f},{create:Le,defineProperty:Ee,defineProperties:Se,getOwnPropertyDescriptor:lt}),o({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:xt,getOwnPropertySymbols:St}),o({target:"Object",stat:!0,forced:g(function(){k.f(1)})},{getOwnPropertySymbols:function(ct){return k.f(x(ct))}}),fe){var Vt=!h||g(function(){var pt=Q();return fe([pt])!="[null]"||fe({a:pt})!="{}"||fe(Object(pt))!="{}"});o({target:"JSON",stat:!0,forced:Vt},{stringify:function(ct,mt,Ct){for(var Rt=[ct],mr=1,ns;arguments.length>mr;)Rt.push(arguments[mr++]);if(ns=mt,!(!b(mt)&&ct===void 0||_e(ct)))return y(mt)||(mt=function(Ri,ms){if(typeof ns=="function"&&(ms=ns.call(this,Ri,ms)),!_e(ms))return ms}),Rt[1]=mt,fe.apply(null,Rt)}})}Q[te][Z]||D(Q[te],Z,Q[te].valueOf),G(Q,ce),O[ae]=!0},a630:function(s,i,a){var o=a("23e7"),l=a("4df4"),c=a("1c7e"),u=!c(function(f){Array.from(f)});o({target:"Array",stat:!0,forced:u},{from:l})},a640:function(s,i,a){var o=a("d039");s.exports=function(l,c){var u=[][l];return!!u&&o(function(){u.call(null,c||function(){throw 1},1)})}},a691:function(s,i){var a=Math.ceil,o=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(l>0?o:a)(l)}},ab13:function(s,i,a){var o=a("b622"),l=o("match");s.exports=function(c){var u=/./;try{"/./"[c](u)}catch{try{return u[l]=!1,"/./"[c](u)}catch{}}return!1}},ac1f:function(s,i,a){var o=a("23e7"),l=a("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(s,i,a){var o=a("825a");s.exports=function(){var l=o(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("5135"),u=Object.defineProperty,f={},h=function(p){throw p};s.exports=function(p,g){if(c(f,p))return f[p];g||(g={});var v=[][p],y=c(g,"ACCESSORS")?g.ACCESSORS:!1,b=c(g,0)?g[0]:h,E=c(g,1)?g[1]:void 0;return f[p]=!!v&&!l(function(){if(y&&!o)return!0;var x={length:-1};y?u(x,1,{enumerable:!0,get:h}):x[1]=1,v.call(x,b,E)})}},ae93:function(s,i,a){var o=a("e163"),l=a("9112"),c=a("5135"),u=a("b622"),f=a("c430"),h=u("iterator"),p=!1,g=function(){return this},v,y,b;[].keys&&(b=[].keys(),"next"in b?(y=o(o(b)),y!==Object.prototype&&(v=y)):p=!0),v==null&&(v={}),!f&&!c(v,h)&&l(v,h,g),s.exports={IteratorPrototype:v,BUGGY_SAFARI_ITERATORS:p}},b041:function(s,i,a){var o=a("00ee"),l=a("f5df");s.exports=o?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(s,i,a){var o=a("83ab"),l=a("9bf2").f,c=Function.prototype,u=c.toString,f=/^\s*function ([^ (]*)/,h="name";o&&!(h in c)&&l(c,h,{configurable:!0,get:function(){try{return u.call(this).match(f)[1]}catch{return""}}})},b622:function(s,i,a){var o=a("da84"),l=a("5692"),c=a("5135"),u=a("90e3"),f=a("4930"),h=a("fdbf"),p=l("wks"),g=o.Symbol,v=h?g:g&&g.withoutSetter||u;s.exports=function(y){return c(p,y)||(f&&c(g,y)?p[y]=g[y]:p[y]=v("Symbol."+y)),p[y]}},b64b:function(s,i,a){var o=a("23e7"),l=a("7b0b"),c=a("df75"),u=a("d039"),f=u(function(){c(1)});o({target:"Object",stat:!0,forced:f},{keys:function(p){return c(l(p))}})},b727:function(s,i,a){var o=a("0366"),l=a("44ad"),c=a("7b0b"),u=a("50c4"),f=a("65f0"),h=[].push,p=function(g){var v=g==1,y=g==2,b=g==3,E=g==4,x=g==6,w=g==5||x;return function(R,P,S,_){for(var m=c(R),A=l(m),k=o(P,S,3),I=u(A.length),C=0,M=_||f,D=v?M(R,I):y?M(R,0):void 0,F,N;I>C;C++)if((w||C in A)&&(F=A[C],N=k(F,C,m),g)){if(v)D[C]=N;else if(N)switch(g){case 3:return!0;case 5:return F;case 6:return C;case 2:h.call(D,F)}else if(E)return!1}return x?-1:b||E?E:D}};s.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6)}},c04e:function(s,i,a){var o=a("861d");s.exports=function(l,c){if(!o(l))return l;var u,f;if(c&&typeof(u=l.toString)=="function"&&!o(f=u.call(l))||typeof(u=l.valueOf)=="function"&&!o(f=u.call(l))||!c&&typeof(u=l.toString)=="function"&&!o(f=u.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},c430:function(s,i){s.exports=!1},c6b6:function(s,i){var a={}.toString;s.exports=function(o){return a.call(o).slice(8,-1)}},c6cd:function(s,i,a){var o=a("da84"),l=a("ce4e"),c="__core-js_shared__",u=o[c]||l(c,{});s.exports=u},c740:function(s,i,a){var o=a("23e7"),l=a("b727").findIndex,c=a("44d2"),u=a("ae40"),f="findIndex",h=!0,p=u(f);f in[]&&Array(1)[f](function(){h=!1}),o({target:"Array",proto:!0,forced:h||!p},{findIndex:function(v){return l(this,v,arguments.length>1?arguments[1]:void 0)}}),c(f)},c8ba:function(s,i){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}s.exports=a},c975:function(s,i,a){var o=a("23e7"),l=a("4d64").indexOf,c=a("a640"),u=a("ae40"),f=[].indexOf,h=!!f&&1/[1].indexOf(1,-0)<0,p=c("indexOf"),g=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:h||!p||!g},{indexOf:function(y){return h?f.apply(this,arguments)||0:l(this,y,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,i,a){var o=a("5135"),l=a("fc6a"),c=a("4d64").indexOf,u=a("d012");s.exports=function(f,h){var p=l(f),g=0,v=[],y;for(y in p)!o(u,y)&&o(p,y)&&v.push(y);for(;h.length>g;)o(p,y=h[g++])&&(~c(v,y)||v.push(y));return v}},caad:function(s,i,a){var o=a("23e7"),l=a("4d64").includes,c=a("44d2"),u=a("ae40"),f=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!f},{includes:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(s,i,a){var o=a("da84"),l=a("861d"),c=o.document,u=l(c)&&l(c.createElement);s.exports=function(f){return u?c.createElement(f):{}}},ce4e:function(s,i,a){var o=a("da84"),l=a("9112");s.exports=function(c,u){try{l(o,c,u)}catch{o[c]=u}return u}},d012:function(s,i){s.exports={}},d039:function(s,i){s.exports=function(a){try{return!!a()}catch{return!0}}},d066:function(s,i,a){var o=a("428f"),l=a("da84"),c=function(u){return typeof u=="function"?u:void 0};s.exports=function(u,f){return arguments.length<2?c(o[u])||c(l[u]):o[u]&&o[u][f]||l[u]&&l[u][f]}},d1e7:function(s,i,a){var o={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!o.call({1:2},1);i.f=c?function(f){var h=l(this,f);return!!h&&h.enumerable}:o},d28b:function(s,i,a){var o=a("746f");o("iterator")},d2bb:function(s,i,a){var o=a("825a"),l=a("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,u={},f;try{f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,f.call(u,[]),c=u instanceof Array}catch{}return function(p,g){return o(p),l(g),c?f.call(p,g):p.__proto__=g,p}}():void 0)},d3b7:function(s,i,a){var o=a("00ee"),l=a("6eeb"),c=a("b041");o||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(s,i,a){var o=a("9bf2").f,l=a("5135"),c=a("b622"),u=c("toStringTag");s.exports=function(f,h,p){f&&!l(f=p?f:f.prototype,u)&&o(f,u,{configurable:!0,value:h})}},d58f:function(s,i,a){var o=a("1c0b"),l=a("7b0b"),c=a("44ad"),u=a("50c4"),f=function(h){return function(p,g,v,y){o(g);var b=l(p),E=c(b),x=u(b.length),w=h?x-1:0,R=h?-1:1;if(v<2)for(;;){if(w in E){y=E[w],w+=R;break}if(w+=R,h?w<0:x<=w)throw TypeError("Reduce of empty array with no initial value")}for(;h?w>=0:x>w;w+=R)w in E&&(y=g(y,E[w],w,b));return y}};s.exports={left:f(!1),right:f(!0)}},d784:function(s,i,a){a("ac1f");var o=a("6eeb"),l=a("d039"),c=a("b622"),u=a("9263"),f=a("9112"),h=c("species"),p=!l(function(){var E=/./;return E.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(E,"$<a>")!=="7"}),g=function(){return"a".replace(/./,"$0")==="$0"}(),v=c("replace"),y=function(){return/./[v]?/./[v]("a","$0")==="":!1}(),b=!l(function(){var E=/(?:)/,x=E.exec;E.exec=function(){return x.apply(this,arguments)};var w="ab".split(E);return w.length!==2||w[0]!=="a"||w[1]!=="b"});s.exports=function(E,x,w,R){var P=c(E),S=!l(function(){var C={};return C[P]=function(){return 7},""[E](C)!=7}),_=S&&!l(function(){var C=!1,M=/a/;return E==="split"&&(M={},M.constructor={},M.constructor[h]=function(){return M},M.flags="",M[P]=/./[P]),M.exec=function(){return C=!0,null},M[P](""),!C});if(!S||!_||E==="replace"&&!(p&&g&&!y)||E==="split"&&!b){var m=/./[P],A=w(P,""[E],function(C,M,D,F,N){return M.exec===u?S&&!N?{done:!0,value:m.call(M,D,F)}:{done:!0,value:C.call(D,M,F)}:{done:!1}},{REPLACE_KEEPS_$0:g,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}),k=A[0],I=A[1];o(String.prototype,E,k),o(RegExp.prototype,P,x==2?function(C,M){return I.call(C,this,M)}:function(C){return I.call(C,this)})}R&&f(RegExp.prototype[P],"sham",!0)}},d81d:function(s,i,a){var o=a("23e7"),l=a("b727").map,c=a("1dde"),u=a("ae40"),f=c("map"),h=u("map");o({target:"Array",proto:!0,forced:!f||!h},{map:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,i,a){(function(o){var l=function(c){return c&&c.Math==Math&&c};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof o=="object"&&o)||Function("return this")()}).call(this,a("c8ba"))},dbb4:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("56ef"),u=a("fc6a"),f=a("06cf"),h=a("8418");o({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(g){for(var v=u(g),y=f.f,b=c(v),E={},x=0,w,R;b.length>x;)R=y(v,w=b[x++]),R!==void 0&&h(E,w,R);return E}})},dbf1:function(s,i,a){(function(o){a.d(i,"a",function(){return c});function l(){return typeof window<"u"?window.console:o.console}var c=l()}).call(this,a("c8ba"))},ddb0:function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("e260"),u=a("9112"),f=a("b622"),h=f("iterator"),p=f("toStringTag"),g=c.values;for(var v in l){var y=o[v],b=y&&y.prototype;if(b){if(b[h]!==g)try{u(b,h,g)}catch{b[h]=g}if(b[p]||u(b,p,v),l[v]){for(var E in c)if(b[E]!==c[E])try{u(b,E,c[E])}catch{b[E]=c[E]}}}}},df75:function(s,i,a){var o=a("ca84"),l=a("7839");s.exports=Object.keys||function(u){return o(u,l)}},e01a:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("da84"),u=a("5135"),f=a("861d"),h=a("9bf2").f,p=a("e893"),g=c.Symbol;if(l&&typeof g=="function"&&(!("description"in g.prototype)||g().description!==void 0)){var v={},y=function(){var P=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),S=this instanceof y?new g(P):P===void 0?g():g(P);return P===""&&(v[S]=!0),S};p(y,g);var b=y.prototype=g.prototype;b.constructor=y;var E=b.toString,x=String(g("test"))=="Symbol(test)",w=/^Symbol\((.*)\)[^)]+$/;h(b,"description",{configurable:!0,get:function(){var P=f(this)?this.valueOf():this,S=E.call(P);if(u(v,P))return"";var _=x?S.slice(7,-1):S.replace(w,"$1");return _===""?void 0:_}}),o({global:!0,forced:!0},{Symbol:y})}},e163:function(s,i,a){var o=a("5135"),l=a("7b0b"),c=a("f772"),u=a("e177"),f=c("IE_PROTO"),h=Object.prototype;s.exports=u?Object.getPrototypeOf:function(p){return p=l(p),o(p,f)?p[f]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?h:null}},e177:function(s,i,a){var o=a("d039");s.exports=!o(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(s,i,a){var o=a("fc6a"),l=a("44d2"),c=a("3f8c"),u=a("69f3"),f=a("7dd0"),h="Array Iterator",p=u.set,g=u.getterFor(h);s.exports=f(Array,"Array",function(v,y){p(this,{type:h,target:o(v),index:0,kind:y})},function(){var v=g(this),y=v.target,b=v.kind,E=v.index++;return!y||E>=y.length?(v.target=void 0,{value:void 0,done:!0}):b=="keys"?{value:E,done:!1}:b=="values"?{value:y[E],done:!1}:{value:[E,y[E]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("fc6a"),u=a("06cf").f,f=a("83ab"),h=l(function(){u(1)}),p=!f||h;o({target:"Object",stat:!0,forced:p,sham:!f},{getOwnPropertyDescriptor:function(v,y){return u(c(v),y)}})},e538:function(s,i,a){var o=a("b622");i.f=o},e893:function(s,i,a){var o=a("5135"),l=a("56ef"),c=a("06cf"),u=a("9bf2");s.exports=function(f,h){for(var p=l(h),g=u.f,v=c.f,y=0;y<p.length;y++){var b=p[y];o(f,b)||g(f,b,v(h,b))}}},e8b5:function(s,i,a){var o=a("c6b6");s.exports=Array.isArray||function(c){return o(c)=="Array"}},e95a:function(s,i,a){var o=a("b622"),l=a("3f8c"),c=o("iterator"),u=Array.prototype;s.exports=function(f){return f!==void 0&&(l.Array===f||u[c]===f)}},f5df:function(s,i,a){var o=a("00ee"),l=a("c6b6"),c=a("b622"),u=c("toStringTag"),f=l(function(){return arguments}())=="Arguments",h=function(p,g){try{return p[g]}catch{}};s.exports=o?l:function(p){var g,v,y;return p===void 0?"Undefined":p===null?"Null":typeof(v=h(g=Object(p),u))=="string"?v:f?l(g):(y=l(g))=="Object"&&typeof g.callee=="function"?"Arguments":y}},f772:function(s,i,a){var o=a("5692"),l=a("90e3"),c=o("keys");s.exports=function(u){return c[u]||(c[u]=l(u))}},fb15:function(s,i,a){if(a.r(i),typeof window<"u"){var o=window.document.currentScript;{var l=a("8875");o=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(a.p=c[1])}a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("159b"),a("a4d3"),a("e439"),a("dbb4"),a("b64b");function u(_e,Ee,Se){return Ee in _e?Object.defineProperty(_e,Ee,{value:Se,enumerable:!0,configurable:!0,writable:!0}):_e[Ee]=Se,_e}function f(_e,Ee){var Se=Object.keys(_e);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(_e);Ee&&(Le=Le.filter(function(ze){return Object.getOwnPropertyDescriptor(_e,ze).enumerable})),Se.push.apply(Se,Le)}return Se}function h(_e){for(var Ee=1;Ee<arguments.length;Ee++){var Se=arguments[Ee]!=null?arguments[Ee]:{};Ee%2?f(Object(Se),!0).forEach(function(Le){u(_e,Le,Se[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(Se)):f(Object(Se)).forEach(function(Le){Object.defineProperty(_e,Le,Object.getOwnPropertyDescriptor(Se,Le))})}return _e}function p(_e){if(Array.isArray(_e))return _e}a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function g(_e,Ee){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_e)))){var Se=[],Le=!0,ze=!1,lt=void 0;try{for(var xt=_e[Symbol.iterator](),St;!(Le=(St=xt.next()).done)&&(Se.push(St.value),!(Ee&&Se.length===Ee));Le=!0);}catch(Vt){ze=!0,lt=Vt}finally{try{!Le&&xt.return!=null&&xt.return()}finally{if(ze)throw lt}}return Se}}a("a630"),a("fb6a"),a("b0c0"),a("25f0");function v(_e,Ee){(Ee==null||Ee>_e.length)&&(Ee=_e.length);for(var Se=0,Le=new Array(Ee);Se<Ee;Se++)Le[Se]=_e[Se];return Le}function y(_e,Ee){if(_e){if(typeof _e=="string")return v(_e,Ee);var Se=Object.prototype.toString.call(_e).slice(8,-1);if(Se==="Object"&&_e.constructor&&(Se=_e.constructor.name),Se==="Map"||Se==="Set")return Array.from(_e);if(Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se))return v(_e,Ee)}}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(_e,Ee){return p(_e)||g(_e,Ee)||y(_e,Ee)||b()}function x(_e){if(Array.isArray(_e))return v(_e)}function w(_e){if(typeof Symbol<"u"&&Symbol.iterator in Object(_e))return Array.from(_e)}function R(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(_e){return x(_e)||w(_e)||y(_e)||R()}var S=a("a352"),_=a.n(S);function m(_e){_e.parentElement!==null&&_e.parentElement.removeChild(_e)}function A(_e,Ee,Se){var Le=Se===0?_e.children[0]:_e.children[Se-1].nextSibling;_e.insertBefore(Ee,Le)}var k=a("dbf1");a("13d5"),a("4fad"),a("ac1f"),a("5319");function I(_e){var Ee=Object.create(null);return function(Le){var ze=Ee[Le];return ze||(Ee[Le]=_e(Le))}}var C=/-(\w)/g,M=I(function(_e){return _e.replace(C,function(Ee,Se){return Se.toUpperCase()})});a("5db7"),a("73d9");var D=["Start","Add","Remove","Update","End"],F=["Choose","Unchoose","Sort","Filter","Clone"],N=["Move"],L=[N,D,F].flatMap(function(_e){return _e}).map(function(_e){return"on".concat(_e)}),O={manage:N,manageAndEmit:D,emit:F};function z(_e){return L.indexOf(_e)!==-1}a("caad"),a("2ca0");var H=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function V(_e){return H.includes(_e)}function W(_e){return["transition-group","TransitionGroup"].includes(_e)}function G(_e){return["id","class","role","style"].includes(_e)||_e.startsWith("data-")||_e.startsWith("aria-")||_e.startsWith("on")}function re(_e){return _e.reduce(function(Ee,Se){var Le=E(Se,2),ze=Le[0],lt=Le[1];return Ee[ze]=lt,Ee},{})}function de(_e){var Ee=_e.$attrs,Se=_e.componentData,Le=Se===void 0?{}:Se,ze=re(Object.entries(Ee).filter(function(lt){var xt=E(lt,2),St=xt[0];return xt[1],G(St)}));return h(h({},ze),Le)}function ae(_e){var Ee=_e.$attrs,Se=_e.callBackBuilder,Le=re(ce(Ee));Object.entries(Se).forEach(function(lt){var xt=E(lt,2),St=xt[0],Vt=xt[1];O[St].forEach(function(pt){Le["on".concat(pt)]=Vt(pt)})});var ze="[data-draggable]".concat(Le.draggable||"");return h(h({},Le),{},{draggable:ze})}function ce(_e){return Object.entries(_e).filter(function(Ee){var Se=E(Ee,2),Le=Se[0];return Se[1],!G(Le)}).map(function(Ee){var Se=E(Ee,2),Le=Se[0],ze=Se[1];return[M(Le),ze]}).filter(function(Ee){var Se=E(Ee,2),Le=Se[0];return Se[1],!z(Le)})}a("c740");function te(_e,Ee){if(!(_e instanceof Ee))throw new TypeError("Cannot call a class as a function")}function Z(_e,Ee){for(var Se=0;Se<Ee.length;Se++){var Le=Ee[Se];Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(_e,Le.key,Le)}}function xe(_e,Ee,Se){return Ee&&Z(_e.prototype,Ee),_e}var J=function(Ee){var Se=Ee.el;return Se},Y=function(Ee,Se){return Ee.__draggable_context=Se},Q=function(Ee){return Ee.__draggable_context},fe=function(){function _e(Ee){var Se=Ee.nodes,Le=Se.header,ze=Se.default,lt=Se.footer,xt=Ee.root,St=Ee.realList;te(this,_e),this.defaultNodes=ze,this.children=[].concat(P(Le),P(ze),P(lt)),this.externalComponent=xt.externalComponent,this.rootTransition=xt.transition,this.tag=xt.tag,this.realList=St}return xe(_e,[{key:"render",value:function(Se,Le){var ze=this.tag,lt=this.children,xt=this._isRootComponent,St=xt?{default:function(){return lt}}:lt;return Se(ze,Le,St)}},{key:"updated",value:function(){var Se=this.defaultNodes,Le=this.realList;Se.forEach(function(ze,lt){Y(J(ze),{element:Le[lt],index:lt})})}},{key:"getUnderlyingVm",value:function(Se){return Q(Se)}},{key:"getVmIndexFromDomIndex",value:function(Se,Le){var ze=this.defaultNodes,lt=ze.length,xt=Le.children,St=xt.item(Se);if(St===null)return lt;var Vt=Q(St);if(Vt)return Vt.index;if(lt===0)return 0;var pt=J(ze[0]),ct=P(xt).findIndex(function(mt){return mt===pt});return Se<ct?0:lt}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),_e}(),ye=a("8bbf");function ie(_e,Ee){var Se=_e[Ee];return Se?Se():[]}function ee(_e){var Ee=_e.$slots,Se=_e.realList,Le=_e.getKey,ze=Se||[],lt=["header","footer"].map(function(mt){return ie(Ee,mt)}),xt=E(lt,2),St=xt[0],Vt=xt[1],pt=Ee.item;if(!pt)throw new Error("draggable element must have an item slot");var ct=ze.flatMap(function(mt,Ct){return pt({element:mt,index:Ct}).map(function(Rt){return Rt.key=Le(mt),Rt.props=h(h({},Rt.props||{}),{},{"data-draggable":!0}),Rt})});if(ct.length!==ze.length)throw new Error("Item slot must have only one child");return{header:St,footer:Vt,default:ct}}function ge(_e){var Ee=W(_e),Se=!V(_e)&&!Ee;return{transition:Ee,externalComponent:Se,tag:Se?Object(ye.resolveComponent)(_e):Ee?ye.TransitionGroup:_e}}function Te(_e){var Ee=_e.$slots,Se=_e.tag,Le=_e.realList,ze=_e.getKey,lt=ee({$slots:Ee,realList:Le,getKey:ze}),xt=ge(Se);return new fe({nodes:lt,root:xt,realList:Le})}function ke(_e,Ee){var Se=this;Object(ye.nextTick)(function(){return Se.$emit(_e.toLowerCase(),Ee)})}function Ae(_e){var Ee=this;return function(Se,Le){if(Ee.realList!==null)return Ee["onDrag".concat(_e)](Se,Le)}}function We(_e){var Ee=this,Se=Ae.call(this,_e);return function(Le,ze){Se.call(Ee,Le,ze),ke.call(Ee,_e,Le)}}var De=null,je={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(Ee){return Ee}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},$e=["update:modelValue","change"].concat(P([].concat(P(O.manageAndEmit),P(O.emit)).map(function(_e){return _e.toLowerCase()}))),Ie=Object(ye.defineComponent)({name:"draggable",inheritAttrs:!1,props:je,emits:$e,data:function(){return{error:!1}},render:function(){try{this.error=!1;var Ee=this.$slots,Se=this.$attrs,Le=this.tag,ze=this.componentData,lt=this.realList,xt=this.getKey,St=Te({$slots:Ee,tag:Le,realList:lt,getKey:xt});this.componentStructure=St;var Vt=de({$attrs:Se,componentData:ze});return St.render(ye.h,Vt)}catch(pt){return this.error=!0,Object(ye.h)("pre",{style:{color:"red"}},pt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&k.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var Ee=this;if(!this.error){var Se=this.$attrs,Le=this.$el,ze=this.componentStructure;ze.updated();var lt=ae({$attrs:Se,callBackBuilder:{manageAndEmit:function(Vt){return We.call(Ee,Vt)},emit:function(Vt){return ke.bind(Ee,Vt)},manage:function(Vt){return Ae.call(Ee,Vt)}}}),xt=Le.nodeType===1?Le:Le.parentElement;this._sortable=new _.a(xt,lt),this.targetDomElement=xt,xt.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var Ee=this.list;return Ee||this.modelValue},getKey:function(){var Ee=this.itemKey;return typeof Ee=="function"?Ee:function(Se){return Se[Ee]}}},watch:{$attrs:{handler:function(Ee){var Se=this._sortable;Se&&ce(Ee).forEach(function(Le){var ze=E(Le,2),lt=ze[0],xt=ze[1];Se.option(lt,xt)})},deep:!0}},methods:{getUnderlyingVm:function(Ee){return this.componentStructure.getUnderlyingVm(Ee)||null},getUnderlyingPotencialDraggableComponent:function(Ee){return Ee.__draggable_component__},emitChanges:function(Ee){var Se=this;Object(ye.nextTick)(function(){return Se.$emit("change",Ee)})},alterList:function(Ee){if(this.list){Ee(this.list);return}var Se=P(this.modelValue);Ee(Se),this.$emit("update:modelValue",Se)},spliceList:function(){var Ee=arguments,Se=function(ze){return ze.splice.apply(ze,P(Ee))};this.alterList(Se)},updatePosition:function(Ee,Se){var Le=function(lt){return lt.splice(Se,0,lt.splice(Ee,1)[0])};this.alterList(Le)},getRelatedContextFromMoveEvent:function(Ee){var Se=Ee.to,Le=Ee.related,ze=this.getUnderlyingPotencialDraggableComponent(Se);if(!ze)return{component:ze};var lt=ze.realList,xt={list:lt,component:ze};if(Se!==Le&&lt){var St=ze.getUnderlyingVm(Le)||{};return h(h({},St),xt)}return xt},getVmIndexFromDomIndex:function(Ee){return this.componentStructure.getVmIndexFromDomIndex(Ee,this.targetDomElement)},onDragStart:function(Ee){this.context=this.getUnderlyingVm(Ee.item),Ee.item._underlying_vm_=this.clone(this.context.element),De=Ee.item},onDragAdd:function(Ee){var Se=Ee.item._underlying_vm_;if(Se!==void 0){m(Ee.item);var Le=this.getVmIndexFromDomIndex(Ee.newIndex);this.spliceList(Le,0,Se);var ze={element:Se,newIndex:Le};this.emitChanges({added:ze})}},onDragRemove:function(Ee){if(A(this.$el,Ee.item,Ee.oldIndex),Ee.pullMode==="clone"){m(Ee.clone);return}var Se=this.context,Le=Se.index,ze=Se.element;this.spliceList(Le,1);var lt={element:ze,oldIndex:Le};this.emitChanges({removed:lt})},onDragUpdate:function(Ee){m(Ee.item),A(Ee.from,Ee.item,Ee.oldIndex);var Se=this.context.index,Le=this.getVmIndexFromDomIndex(Ee.newIndex);this.updatePosition(Se,Le);var ze={element:this.context.element,oldIndex:Se,newIndex:Le};this.emitChanges({moved:ze})},computeFutureIndex:function(Ee,Se){if(!Ee.element)return 0;var Le=P(Se.to.children).filter(function(St){return St.style.display!=="none"}),ze=Le.indexOf(Se.related),lt=Ee.component.getVmIndexFromDomIndex(ze),xt=Le.indexOf(De)!==-1;return xt||!Se.willInsertAfter?lt:lt+1},onDragMove:function(Ee,Se){var Le=this.move,ze=this.realList;if(!Le||!ze)return!0;var lt=this.getRelatedContextFromMoveEvent(Ee),xt=this.computeFutureIndex(lt,Ee),St=h(h({},this.context),{},{futureIndex:xt}),Vt=h(h({},Ee),{},{relatedContext:lt,draggedContext:St});return Le(Vt,Se)},onDragEnd:function(){De=null}}}),Ke=Ie;i.default=Ke},fb6a:function(s,i,a){var o=a("23e7"),l=a("861d"),c=a("e8b5"),u=a("23cb"),f=a("50c4"),h=a("fc6a"),p=a("8418"),g=a("b622"),v=a("1dde"),y=a("ae40"),b=v("slice"),E=y("slice",{ACCESSORS:!0,0:0,1:2}),x=g("species"),w=[].slice,R=Math.max;o({target:"Array",proto:!0,forced:!b||!E},{slice:function(S,_){var m=h(this),A=f(m.length),k=u(S,A),I=u(_===void 0?A:_,A),C,M,D;if(c(m)&&(C=m.constructor,typeof C=="function"&&(C===Array||c(C.prototype))?C=void 0:l(C)&&(C=C[x],C===null&&(C=void 0)),C===Array||C===void 0))return w.call(m,k,I);for(M=new(C===void 0?Array:C)(R(I-k,0)),D=0;k<I;k++,D++)k in m&&p(M,D,m[k]);return M.length=D,M}})},fc6a:function(s,i,a){var o=a("44ad"),l=a("1d80");s.exports=function(c){return o(l(c))}},fdbc:function(s,i){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,i,a){var o=a("4930");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(yoe);const nle={class:"assignment-dialog-modal"},sle={class:"form-row"},ale={key:0,class:"form-row"},ile=["value"],ole={key:1,class:"form-row"},lle=["value"],cle={key:2,class:"form-row"},ule={class:"form-row"},dle={class:"form-row"},fle={class:"form-row"},hle={class:"dialog-actions"},ple={__name:"AssignmentDialog",props:{teachers:Array,students:Array,assignment:Object},emits:["save","close"],setup(t,{emit:e}){const r=t,n=e,s=se("lunch"),i=se(""),a=se(""),o=se(""),l=se("12:00"),c=se("12:30"),u=se(""),f=se(""),h=se("");$t(()=>r.assignment,v=>{v?(f.value=v.id||Date.now().toString(),h.value=v.blockId||f.value||`block-${Date.now()}`,s.value=v.type||"lunch",i.value=v.teacherId||"",a.value=v.studentId||"",o.value=v.type==="other"?v.label:"",l.value=v.start||"12:00",c.value=v.end||"12:30",u.value=v.note||""):(f.value=Date.now().toString(),h.value=`block-${f.value}`,s.value="lunch",i.value="",a.value="",o.value="",l.value="12:00",c.value="12:30",u.value="")},{immediate:!0});const p=be(()=>{if(s.value==="lunch")return"Lunch";if(s.value==="break")return"Break";if(s.value==="class"){const v=r.teachers.find(y=>y.id===i.value);return v?v.name||v.email||v.id:""}if(s.value==="student"){const v=r.students.find(y=>y.id===a.value);return v?`${v.firstName} ${v.lastName}`:""}return s.value==="other"?o.value:""});function g(){!l.value||!c.value||s.value==="class"&&!i.value||s.value==="student"&&!a.value||s.value==="other"&&!o.value||n("save",{id:f.value,blockId:h.value,type:s.value,label:p.value,start:l.value,end:c.value,note:u.value,teacherId:i.value,studentId:a.value})}return(v,y)=>(B(),U("div",{class:"assignment-dialog-overlay",onClick:y[8]||(y[8]=Xr(b=>v.$emit("close"),["self"]))},[d("div",nle,[y[20]||(y[20]=d("h2",null,"Add Assignment",-1)),d("form",{onSubmit:Xr(g,["prevent"])},[d("div",sle,[y[10]||(y[10]=d("label",null,"Type:",-1)),Oe(d("select",{"onUpdate:modelValue":y[0]||(y[0]=b=>s.value=b)},y[9]||(y[9]=[Dn('<option value="lunch" data-v-f2af98a0>Lunch</option><option value="break" data-v-f2af98a0>Break</option><option value="class" data-v-f2af98a0>Class</option><option value="student" data-v-f2af98a0>Student</option><option value="other" data-v-f2af98a0>Other</option>',5)]),512),[[cr,s.value]])]),s.value==="class"?(B(),U("div",ale,[y[12]||(y[12]=d("label",null,"Teacher:",-1)),Oe(d("select",{"onUpdate:modelValue":y[1]||(y[1]=b=>i.value=b)},[y[11]||(y[11]=d("option",{value:""},"Select teacher...",-1)),(B(!0),U(Pe,null,He(t.teachers,b=>(B(),U("option",{key:b.id,value:b.id},X(b.name||b.email||b.id),9,ile))),128))],512),[[cr,i.value]])])):ve("",!0),s.value==="student"?(B(),U("div",ole,[y[14]||(y[14]=d("label",null,"Student:",-1)),Oe(d("select",{"onUpdate:modelValue":y[2]||(y[2]=b=>a.value=b)},[y[13]||(y[13]=d("option",{value:""},"Select student...",-1)),(B(!0),U(Pe,null,He(t.students,b=>(B(),U("option",{key:b.id,value:b.id},X(b.firstName)+" "+X(b.lastName),9,lle))),128))],512),[[cr,a.value]])])):ve("",!0),s.value==="other"?(B(),U("div",cle,[y[15]||(y[15]=d("label",null,"Label:",-1)),Oe(d("input",{"onUpdate:modelValue":y[3]||(y[3]=b=>o.value=b),placeholder:"Custom label"},null,512),[[ft,o.value]])])):ve("",!0),d("div",ule,[y[16]||(y[16]=d("label",null,"Start Time:",-1)),Oe(d("input",{"onUpdate:modelValue":y[4]||(y[4]=b=>l.value=b),type:"time",required:""},null,512),[[ft,l.value]])]),d("div",dle,[y[17]||(y[17]=d("label",null,"End Time:",-1)),Oe(d("input",{"onUpdate:modelValue":y[5]||(y[5]=b=>c.value=b),type:"time",required:""},null,512),[[ft,c.value]])]),d("div",fle,[y[18]||(y[18]=d("label",null,"Note:",-1)),Oe(d("input",{"onUpdate:modelValue":y[6]||(y[6]=b=>u.value=b),placeholder:"Optional note"},null,512),[[ft,u.value]])]),d("div",hle,[y[19]||(y[19]=d("button",{type:"submit",class:"btn btn-primary"},"Add",-1)),d("button",{type:"button",class:"btn btn-secondary",onClick:y[7]||(y[7]=b=>v.$emit("close"))},"Cancel")])],32)])]))}},mle=bt(ple,[["__scopeId","data-v-f2af98a0"]]),gle={class:"vertical-time-grid-wrapper"},vle={class:"grid-block-label-time"},yle=["title"],xle=["title"],Ele=["onDragstart","onDrag","onDragend"],_le={class:"assignment-content"},ble={class:"assignment-label-time"},Sle={class:"assignment-time-label"},Ale={class:"assignment-actions"},Tle=["onClick"],wle=["onClick"],Cle=["onMousedown"],ZS=24,kle={__name:"VerticalTimeGrid",props:{assignments:Array,teachers:Array,students:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,blocks:Array},emits:["update:assignments","edit-assignment"],setup(t,{emit:e}){const r=t,n=e,s=se(null);se(!1);const i=se(r.assignments?r.assignments.map(F=>({...F})):[]);$t(()=>r.assignments,F=>{i.value=F?F.map(N=>({...N})):[]},{immediate:!0});function a(F){const[N,L]=F.split(":").map(Number);return N*60+L}function o(F){const N=Math.floor(F/60),L=F%60;return`${N<10?"0":""}${N}:${L<10?"0":""}${L}`}const l=be(()=>!r.blocks||r.blocks.length===0?"08:00":r.blocks.reduce((F,N)=>N.startTime<F?N.startTime:F,r.blocks[0].startTime)),c=be(()=>!r.blocks||r.blocks.length===0?"16:00":r.blocks.reduce((F,N)=>N.endTime>F?N.endTime:F,r.blocks[0].endTime)),u=be(()=>a(l.value)),f=be(()=>a(c.value)),h=be(()=>f.value-u.value),p=be(()=>h.value*2.5+ZS*2);be(()=>{if(!r.blocks)return[];const F=[];return r.blocks.forEach(N=>{F.includes(N.startTime)||F.push(N.startTime),F.includes(N.endTime)||F.push(N.endTime)}),F.sort((N,L)=>a(N)-a(L))});function g(F){return(a(F)-u.value)*2.5+ZS-10}function v(F,N){if(!F||!N)return!1;const L=a(F.startTime),O=a(F.endTime),z=a(N.startTime),H=a(N.endTime);return L<H&&O>z}function y(F){const N=[];for(let O=0;O<F.length;O++){const z=F[O];let H=null;for(let V=0;V<N.length;V++)if(N[V].ids.some(W=>v(z,F.find(G=>G.id===W)))){H=N[V];break}H?(H.ids.push(z.id),H.blocks.push(z)):N.push({ids:[z.id],blocks:[z]})}let L=!0;for(;L;){L=!1;for(let O=0;O<N.length;O++){for(let z=O+1;z<N.length;z++)if(N[O].ids.some(H=>N[z].ids.some(V=>v(F.find(W=>W.id===H),F.find(W=>W.id===V))))){N[O].ids=Array.from(new Set([...N[O].ids,...N[z].ids])),N[O].blocks=Array.from(new Set([...N[O].blocks,...N[z].blocks])),N.splice(z,1),L=!0;break}if(L)break}}return N.map(O=>{const z=O.blocks.sort((W,G)=>W.startTime.localeCompare(G.startTime)||W.id.localeCompare(G.id)),H=z.reduce((W,G)=>G.startTime<W?G.startTime:W,z[0].startTime),V=z.reduce((W,G)=>G.endTime>W?G.endTime:W,z[0].endTime);return{ids:O.ids,startTime:H,endTime:V}})}be(()=>y(b.value));const b=be(()=>(r.blocks||[]).map((F,N)=>({...F,id:F.id||`block-${N}`})));function E(F){const N=[];for(let z=0;z<F.length;z++){const H=F[z];let V=null;for(let W=0;W<N.length;W++)if(N[W].some(G=>v(H,F.find(re=>re.id===G)))){V=N[W];break}V?V.push(H.id):N.push([H.id])}let L=!0;for(;L;){L=!1;for(let z=0;z<N.length;z++){for(let H=z+1;H<N.length;H++)if(N[z].some(V=>N[H].some(W=>v(F.find(G=>G.id===V),F.find(G=>G.id===W))))){N[z]=Array.from(new Set([...N[z],...N[H]])),N.splice(H,1),L=!0;break}if(L)break}}const O={};for(const z of N){const H=z.map(V=>F.find(W=>W.id===V)).sort((V,W)=>V.startTime.localeCompare(W.startTime)||V.id.localeCompare(W.id));H.forEach((V,W)=>{O[V.id]={groupSize:H.length,colIndex:W}})}return O}function x(F,N){const L=E(b.value)[F.id]||{groupSize:1,colIndex:0},O=g(F.startTime),z=(a(F.endTime)-a(F.startTime))*2.5,H=100/L.groupSize;return{position:"absolute",left:H*L.colIndex+"%",width:H+"%",top:O+"px",height:z+"px",zIndex:1,opacity:.38,boxSizing:"border-box",overflow:"hidden"}}function w(F,N){const L=i.value.filter((te,Z)=>{if(te.id===F.id)return!1;const xe=a(te.start),J=a(te.end),Y=a(F.start),Q=a(F.end);return xe<Q&&J>Y}),O=L.length+1,H=[F,...L].sort((te,Z)=>te.start.localeCompare(Z.start)||te.id.localeCompare(Z.id)).findIndex(te=>te.id===F.id),V=g(F.start),W=(a(F.end)-a(F.start))*2.5,G=Math.max(W,2.5),re=73,de=27,ae=re/O;return{position:"absolute",left:de+ae*H+"%",width:ae+"%",top:V+"px",height:G+"px",zIndex:2,minWidth:"80px",boxSizing:"border-box",padding:"4px",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",cursor:"grab",transition:"top 0.2s, height 0.2s"}}const R=se(null),P=se(0),S=se(0),_=se(null);function m(F,N){R.value=N,P.value=F.clientY,S.value=a(N.start),_.value="move",N.isDragging=!0,F.target.classList.add("background-dragging-div");const O=document.createElement("div");O.className="drag-preview-div",O.style.width="160px",O.style.height="40px",O.style.background="transparent",O.style.border="2px solid #007bff",O.style.position="absolute",O.style.top="-9999px",O.style.left="-9999px",document.body.appendChild(O),F.dataTransfer.setDragImage(O,80,20),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",N.id)}function A(F,N){if(!R.value||F.clientY===0)return;const L=F.clientY-P.value,O=Math.round(L/2.5);if(_.value==="move"){let z=S.value+O,H=z+(a(N.end)-a(N.start));z=Math.max(u.value,Math.min(z,f.value-1)),H=Math.max(z+1,Math.min(H,f.value)),N.start=o(z),N.end=o(H)}}function k(F,N){R.value=null,_.value=null,N.isDragging=!1,n("update:assignments",i.value)}function I(F,N){R.value=N,P.value=F.clientY,S.value=a(N.end),_.value="resize",window.addEventListener("mousemove",C),window.addEventListener("mouseup",M)}function C(F){if(!R.value)return;const N=F.clientY-P.value;let L=S.value+Math.round(N/2.5);const O=a(R.value.start);L=Math.max(O+1,Math.min(L,f.value)),R.value.end=o(L)}function M(F){R.value=null,_.value=null,window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",M)}function D(F){const N=i.value.findIndex(L=>L.id===F);N!==-1&&(i.value.splice(N,1),n("update:assignments",i.value))}return(F,N)=>(B(),U("div",gle,[d("div",{class:"vertical-time-grid",ref_key:"timeGridRef",ref:s,style:Nr({position:"relative",height:p.value+"px"})},[(B(!0),U(Pe,null,He(b.value,(L,O)=>(B(),U("div",{key:L.id,class:Ye(["grid-block-bg",L.type==="period"?"blocktype-period":"blocktype-"+(L.type||"period")]),style:Nr(x(L))},[d("div",vle,[d("span",{class:"grid-block-label",title:L.name||(L.type==="period"?L.label||L.periodName||L.periodNumber||"Period":L.type?L.type.charAt(0).toUpperCase()+L.type.slice(1):"")},X(L.name||(L.type==="period"?L.label||L.periodName||L.periodNumber||"Period":L.type?L.type.charAt(0).toUpperCase()+L.type.slice(1):"")),9,yle),d("span",{class:"grid-block-time",title:L.startTime},X(L.startTime),9,xle)])],6))),128)),(B(!0),U(Pe,null,He(i.value,(L,O)=>(B(),U("div",{key:L.id,class:Ye(["dialog-assignment-box",["type-"+(L.type||"other"),{dragging:L.isDragging}]]),style:Nr(w(L)),draggable:"true",onDragstart:z=>m(z,L),onDrag:z=>A(z,L),onDragend:z=>k(z,L)},[d("div",_le,[d("div",ble,[d("span",Sle,X(L.start)+""+X(L.end)+" "+X(L.label),1)])]),d("div",Ale,[d("button",{class:"edit-btn",onClick:z=>F.$emit("edit-assignment",L)},"",8,Tle),d("button",{class:"delete-btn",onClick:z=>D(L.id)},"",8,wle)]),d("div",{class:"resize-handle",onMousedown:Xr(z=>I(z,L),["stop"]),title:"Drag to resize block"},null,40,Cle)],46,Ele))),128))],4)]))}},Ile=bt(kle,[["__scopeId","data-v-8f5880e4"]]),Dle={class:"dialog-header"},Ple={class:"dialog-header-actions"},Rle={class:"dialog-content"},Fle={style:{display:"flex","align-items":"flex-start"}},Nle={class:"dialog-actions"},Ole=["disabled"],Mle={key:0},Lle={key:1},Ble={__name:"AideScheduleEditDialog",props:{aideName:String,timeTicks:Array,isTickInAnyBlock:Function,aideAssignments:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,showAddAssignment:Boolean,addAssignment:Function,onImportAssignments:Function,onSave:Function,onClose:Function,saving:Boolean,blocks:Array,teachers:Array,students:Array},setup(t){const e=t,r=se([]),n=se(!1),s=se(null);Gt(()=>{console.log("DEBUG: AideScheduleEditDialog mounted, blocks:",e.blocks)}),$t(()=>e.blocks,f=>{console.log("DEBUG: props.blocks in AideScheduleEditDialog",f)});function i(){e.onSave(r.value)}function a(){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],n.value=!0}function o(f){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],s.value={...f},n.value=!0}function l(f){if(s.value){const h=r.value.findIndex(p=>p.id===f.id);h!==-1&&(r.value[h]={...f}),s.value=null}else r.value=[...r.value,f];n.value=!1}function c(){s.value=null,n.value=!1}function u(f){console.log("handleUpdateAssignments called with:",f),r.value=f}return(f,h)=>(B(),U("div",{class:"dialog-overlay",onClick:h[4]||(h[4]=(...p)=>t.onClose&&t.onClose(...p))},[d("div",{class:"edit-dialog",onClick:h[3]||(h[3]=Xr(()=>{},["stop"]))},[d("div",Dle,[d("h2",null,"Edit Schedule: "+X(t.aideName),1),d("div",Ple,[d("button",{onClick:h[0]||(h[0]=(...p)=>t.onImportAssignments&&t.onImportAssignments(...p)),class:"btn btn-secondary btn-import-assignments"},"Import Aide Assignments"),d("button",{onClick:a,class:"btn btn-primary btn-add-assignment"},"Add Assignment"),d("button",{onClick:h[1]||(h[1]=(...p)=>t.onClose&&t.onClose(...p)),class:"btn btn-secondary close-btn"},"")])]),d("div",Rle,[d("div",Fle,[Re(Ile,{timeTicks:t.timeTicks,isTickInAnyBlock:t.isTickInAnyBlock,assignments:r.value,getAssignmentBoxStyle:t.getAssignmentBoxStyle,onAssignmentDragStart:t.onAssignmentDragStart,onAssignmentDrag:t.onAssignmentDrag,onAssignmentDragEnd:t.onAssignmentDragEnd,onResizeStart:t.onResizeStart,blocks:t.blocks,onEditAssignment:o,"onUpdate:assignments":u},null,8,["timeTicks","isTickInAnyBlock","assignments","getAssignmentBoxStyle","onAssignmentDragStart","onAssignmentDrag","onAssignmentDragEnd","onResizeStart","blocks"])]),n.value?(B(),Qt(mle,{key:0,teachers:t.teachers,students:t.students,assignment:s.value,onSave:l,onClose:c},null,8,["teachers","students","assignment"])):ve("",!0)]),d("div",Nle,[d("button",{onClick:i,class:"btn btn-primary",disabled:t.saving},[t.saving?(B(),U("span",Mle,"")):(B(),U("span",Lle,"")),we(" "+X(t.saving?"Saving...":"Save Schedule"),1)],8,Ole),d("button",{onClick:h[2]||(h[2]=(...p)=>t.onClose&&t.onClose(...p)),class:"btn btn-secondary"},"Cancel")])])]))}},Ule={class:"master-schedule"},$le={key:0,class:"no-time-table"},Vle={class:"no-data-message"},Hle={key:1,class:"schedule-graph-container"},jle={class:"timeline-header"},Gle={class:"block-time"},Wle={class:"block-name"},zle={class:"block-time"},Kle={class:"aide-header"},qle={class:"aide-name"},Xle=["onClick"],Yle={class:"time-line-container"},Qle={class:"time-blocks-background"},Jle={class:"assignment-bars"},Zle={class:"assignment-label"},Bg=30,ece={__name:"AideScheduleMasterTable",props:{paraeducators:Array,blocks:Array,getAideTimeBlocks:Function,getAideName:Function,currentTimeTable:Object},emits:["editAideAssignment","gotoTimeTableConfig"],setup(t,{emit:e}){const r=t,n=se([]);function s(b){const E=r.getAideTimeBlocks(b).filter(x=>x.assignment).map(x=>({id:x.id,label:x.assignment,type:x.assignmentType,start:x.start||x.displayTime.split(" - ")[0],end:x.end||x.displayTime.split(" - ")[1]}));return i(E)}function i(b){if(b.length===0)return[];const E=[...b].sort((P,S)=>f(P.start)-f(S.start)),x=[];let w=[];for(const P of E)w.length===0?w=[P]:w.some(_=>f(P.start)<f(_.end)&&f(P.end)>f(_.start))?w.push(P):(x.push(w),w=[P]);w.length>0&&x.push(w);const R=[];for(const P of x)P.forEach((S,_)=>{S.overlapIndex=_,S.overlapCount=P.length,R.push(S)});return R}function a(b){if(!b.overlapCount||b.overlapCount<=1)return 10;const E=40;return(60-(b.overlapCount*E+(b.overlapCount-1)*2))/2+b.overlapIndex*(E+2)}function o(b){if(!r.blocks||r.blocks.length===0)return 0;const E=r.blocks[0],x=r.blocks[r.blocks.length-1],w=f(E.startTime),P=f(x.endTime)-w,_=(f(b)-w)/P*100;return Math.max(0,Math.min(95,_))}function l(b,E){if(!r.blocks||r.blocks.length===0)return 10;const x=r.blocks[0],w=r.blocks[r.blocks.length-1],R=f(x.startTime),S=f(w.endTime)-R,_=f(b),A=(f(E)-_)/S*100;return Math.max(5,Math.min(95,A))}function c(b){if(!r.blocks||r.blocks.length===0)return 0;const E=r.blocks[0],x=r.blocks[r.blocks.length-1],w=f(E.startTime),P=f(x.endTime)-w,_=(f(b)-w)/P*100;return Math.max(0,Math.min(95,_))}function u(b,E){if(!r.blocks||r.blocks.length===0)return 10;const x=r.blocks[0],w=r.blocks[r.blocks.length-1],R=f(x.startTime),S=f(w.endTime)-R,_=f(b),A=(f(E)-_)/S*100;return Math.max(5,Math.min(95,A))}function f(b){const[E,x]=b.split(":").map(Number);return E*60+x}function h(b){var x;const E=((x=b.name)==null?void 0:x.toLowerCase())||"";return E.includes("lunch")?"lunch":E.includes("break")||E.includes("recess")?"break":E.includes("period")||E.includes("class")?"period":"other"}function p(b){const E=[...b].sort((R,P)=>f(R.startTime)-f(P.startTime)),x=[];for(const R of E){let P=!1;for(let S=0;S<x.length;S++){const _=x[S];if(!_.some(A=>f(R.startTime)<f(A.endTime)&&f(R.endTime)>f(A.startTime))){_.push(R),R.overlapIndex=S,P=!0;break}}P||(R.overlapIndex=x.length,x.push([R]))}const w=x.length;return E.map(R=>({...R,overlapIndex:R.overlapIndex,overlapCount:w}))}const g=be(()=>p(r.blocks||[])),v=be(()=>Math.max(...g.value.map(b=>b.overlapCount||1),1)),y=be(()=>v.value*Bg);return $t(()=>r.aideAssignments,b=>{n.value=b?JSON.parse(JSON.stringify(b)):[]},{immediate:!0}),(b,E)=>(B(),U("div",Ule,[E[4]||(E[4]=d("h2",null,"Master Schedule View",-1)),qA(b.$slots,"tab-bar",{},void 0,!0),!t.currentTimeTable||!t.currentTimeTable.schedule||t.currentTimeTable.schedule.length===0?(B(),U("div",$le,[d("div",Vle,[E[1]||(E[1]=d("h3",null,"No Time Table Configured",-1)),E[2]||(E[2]=d("p",null,"You need to configure a time table first before you can create aide assignments.",-1)),d("button",{onClick:E[0]||(E[0]=x=>b.$emit("gotoTimeTableConfig")),class:"btn btn-primary"}," Go to Time Table Configuration ")])])):(B(),U("div",Hle,[d("div",jle,[E[3]||(E[3]=d("div",{class:"aide-name-header"},"Aide Name",-1)),d("div",{class:"timeline-container",style:Nr({height:y.value+"px"})},[d("div",{class:"time-blocks-header",style:Nr({height:y.value+"px"})},[(B(!0),U(Pe,null,He(g.value,x=>(B(),U("div",{key:x.id+"-"+x.overlapIndex,class:Ye(["time-block-header",h(x)]),style:Nr({left:o(x.startTime)+"%",width:l(x.startTime,x.endTime)+"%",top:x.overlapIndex*Bg+"px",height:Bg+"px",zIndex:10})},[d("div",Gle,X(x.startTime),1),d("div",Wle,X(x.name||x.type),1),d("div",zle,X(x.endTime),1)],6))),128))],4)],4)]),(B(!0),U(Pe,null,He(t.paraeducators,x=>(B(),U("div",{key:x.id,class:"aide-row"},[d("div",Kle,[d("span",qle,X(t.getAideName(x.id)),1),d("button",{onClick:w=>b.$emit("editAideAssignment",x.id),class:"btn btn-small btn-primary edit-btn"}," Edit ",8,Xle)]),d("div",Yle,[d("div",Qle,[(B(!0),U(Pe,null,He(t.blocks,w=>(B(),U("div",{key:w.id,class:Ye(["time-block-bg",h(w)]),style:Nr({left:o(w.startTime)+"%",width:l(w.startTime,w.endTime)+"%"})},null,6))),128)),(B(!0),U(Pe,null,He(t.blocks.slice(0,-1),(w,R)=>(B(),U("div",{key:`bg-gap-${w.id}`,class:"time-block-bg-gap",style:Nr({left:o(w.endTime)-.5+"%",width:"1%"})},null,4))),128))]),d("div",Jle,[(B(!0),U(Pe,null,He(s(x.id),w=>(B(),U("div",{key:w.id,class:Ye(["master-assignment-bar",w.type]),style:Nr({left:c(w.start)+"%",width:u(w.start,w.end)+"%",top:a(w)+"px"})},[d("span",Zle,X(w.label),1)],6))),128))])])]))),128))]))]))}},tce=bt(ece,[["__scopeId","data-v-40c5158e"]]);function p0(t){return(t==null?void 0:t.schedule)||[]}function rce(t){let e="23:59",r="00:00";for(const n of t)n.startTime&&n.startTime<e&&(e=n.startTime),n.endTime&&n.endTime>r&&(r=n.endTime);return{min:e,max:r}}function nce(t){return be(()=>{const{min:e,max:r}=rce(t.value||t),[n,s]=e.split(":").map(Number),[i,a]=r.split(":").map(Number);let o=[],l=n,c=s;for(;l<i||l===i&&c<=a;){const f=l<10?`0${l}`:`${l}`,h=c<10?`0${c}`:`${c}`;o.push({time:`${f}:${h}`}),c+=5,c>=60&&(c=0,l++)}const u=(t.value||t).map(f=>f.startTime);for(const f of u)o.find(h=>h.time===f)||o.push({time:f});return o=Array.from(new Set(o.map(f=>f.time))).sort().map(f=>({time:f})),o})}function sce(t,e){return e.some(r=>r.startTime<=t&&r.endTime>=t)}const ace={class:"admin-aide-schedule-detailed"},ice={class:"header"},oce={class:"header-actions"},lce=["disabled"],cce={key:0},uce={key:1},dce={class:"content"},fce={key:0,class:"error-message"},hce={key:1,class:"error-message"},pce={key:2,class:"loading"},mce={key:3,class:"schedule-container"},gce={key:0,class:"time-table-tab-bar"},vce=["onClick"],AD={__name:"AdminAideSchedule",setup(t){const e=ki(),r=xn(),{userList:n,fetchUsers:s}=_a(),{students:i,fetchStudents:a}=Ii(),{appSettings:o,loadAppSettings:l,saveAppSettings:c}=Os(),{labels:u}=Eo(),{aideSchedule:f,loadAideSchedules:h,saveAideSchedule:p}=voe(),{aideAssignment:g}=nx(),v=se(!0),y=se(!1),b=se(null),E=se({}),x=se({}),w=se(null);se([]);const R=se({}),P=be(()=>E.value&&Array.isArray(E.value.timeTables)&&E.value.timeTables.length>0?E.value.timeTables.map((ee,ge)=>({id:ee.name?ee.name.toLowerCase().replace(/\s+/g,"-"):`tt-${ge}`,label:ee.name||`Time Table ${ge+1}`,...ee})):E.value&&E.value.schedule?[{id:"default",label:E.value.label||"Default Schedule",schedule:E.value.schedule}]:[]);Gt(async()=>{console.log("Loaded timeTableData:",E.value),console.log("Computed allTimeTables:",P.value),P.value.length>0&&!w.value&&(w.value=P.value[0].id,console.log("Set selectedTimeTable:",w.value)),await l(),o.value.timeTables&&Array.isArray(o.value.timeTables)?(E.value={timeTables:o.value.timeTables},console.log("Set timeTableData to timeTables array:",E.value)):o.value.schedule&&(E.value={schedule:o.value.schedule},console.log("Set timeTableData to single schedule:",E.value))}),$t(P,ee=>{console.log("allTimeTables changed:",ee)}),$t(w,ee=>{console.log("selectedTimeTable changed:",ee)});const S=be(()=>{const ee=P.value.find(ge=>ge.id===w.value)||P.value[0];return console.log("currentTimeTable:",ee),ee}),_=be(()=>p0(S.value)),m=nce(_);function A(ee){return sce(ee,_.value)}const k=be(()=>{var ge;const ee=(ge=r.currentUser)==null?void 0:ge.role;return["admin","school_admin","admin_504","sped_chair"].includes(ee)}),I=be(()=>{var ee;return((ee=n.value)==null?void 0:ee.filter(ge=>ge.role==="paraeducator"))||[]}),C=be(()=>{var ee;return((ee=n.value)==null?void 0:ee.filter(ge=>ge.role==="teacher"))||[]});be(()=>u.value);function M(ee){if(!_.value)return[];console.log("DEBUG: getAideTimeBlocks called for aide:",ee),console.log("DEBUG: aideSchedule.value:",f.value),console.log("DEBUG: aideAssignment.value:",g.value);const Te=(f.value[ee]||{}).schedule||{};console.log("DEBUG: aideScheduleData:",Te);const ke=Object.values(Te).filter(Ae=>Ae.start&&Ae.end&&Ae.label).map(Ae=>({id:Ae.id||Ae.blockId||`assignment-${Date.now()}`,assignment:Ae.label,assignmentType:Ae.type||"custom",displayTime:`${Ae.start} - ${Ae.end}`,start:Ae.start,end:Ae.end}));return console.log("DEBUG: individualAssignments:",ke),ke.length>0?ke:(console.log("DEBUG: No individual assignments found, adding test data"),[{id:"test-1",assignment:"Test Class Assignment",assignmentType:"class",displayTime:"08:00 - 09:00",start:"08:00",end:"09:00"},{id:"test-2",assignment:"Test Student Assignment",assignmentType:"student",displayTime:"10:00 - 11:00",start:"10:00",end:"11:00"}])}function D(ee){const ge=I.value.find(Te=>Te.id===ee);return ge?ge.name||ge.email:"Unknown Aide"}function F(ee){b.value=ee,te.value=!0}function N(){b.value=null}async function L(){try{y.value=!0;const ge={...await l(),detailedAideSchedule:x.value};await c(ge),console.log("Detailed aide schedule saved successfully")}catch(ee){console.error("Error saving detailed aide schedule:",ee)}finally{y.value=!1}}function O(){e.push("/admin")}async function z(){try{v.value=!0,await Promise.all([s(),a(),l()]);const ee=await nr(Ze(qe,"app_settings","global"));if(ee.exists()){const ge=ee.data();x.value=ge.detailedAideSchedule||{}}v.value=!1}catch(ee){console.error("Error loading aide schedule data:",ee),v.value=!1}}Gt(z);function H(ee,ge){return ee.assignments&&ee.assignments[ge]||""}function V(){var Ae,We;if(console.log("DEBUG: handleImportAssignments called"),console.log("DEBUG: editingAideId.value:",b.value),console.log("DEBUG: aideAssignment.value:",g.value),console.log("DEBUG: All aide IDs:",Object.keys(g.value)),console.log("DEBUG: All aide data:",Object.entries(g.value).map(([De,je])=>({id:De,keys:Object.keys(je)}))),!b.value||!g.value[b.value]){console.log("DEBUG: No aide data found"),alert("No aide assignment data found for this aide.");return}const ee=Q.value.length;if(ee>0&&!confirm(`WARNING: This will remove ${ee} current assignments and replace them with imported assignments.

Do you want to continue?`))return;const ge=g.value[b.value];console.log("DEBUG: aideData:",ge),console.log("DEBUG: aideData.classAssignment:",ge.classAssignment),console.log("DEBUG: aideData.directAssignment:",ge.directAssignment),console.log("DEBUG: Object.keys(aideData):",Object.keys(ge)),console.log("DEBUG: aideData.schedule:",ge.schedule),console.log("DEBUG: typeof aideData.schedule:",typeof ge.schedule),console.log("DEBUG: Array.isArray(aideData.schedule):",Array.isArray(ge.schedule));let Te=0;Q.value=[];const ke=p0(S.value);console.log("DEBUG: timeTableBlocks:",ke),console.log("DEBUG: timeTableBlocks with period numbers:",ke.map(De=>({name:De.name,periodNumber:De.periodNumber,type:De.type})));for(const De of ke){console.log("DEBUG: Processing block:",De),console.log("DEBUG: Block periodNumber:",De.periodNumber),console.log("DEBUG: Block name:",De.name),console.log("DEBUG: Available classAssignment keys:",Object.keys(ge.classAssignment||{}));let je=De.periodNumber;if(!je&&De.name){const Ke=De.name.match(/Period\s*(\d+)/i);Ke&&(je=Ke[1],console.log("DEBUG: Extracted periodNumber from name:",je))}let $e="",Ie=[];if(je&&ge.classAssignment&&ge.classAssignment[je]){console.log("DEBUG: Found class assignment for periodNumber:",je);const Ke=Array.isArray(ge.classAssignment[je])?ge.classAssignment[je]:[ge.classAssignment[je]];Ie=Ke.filter(Boolean).map(_e=>{const Ee=C.value.find(Se=>Se.id===_e);return Ee?Ee.name||Ee.email:"Unknown Teacher"}),$e=Ke.filter(Boolean).map(_e=>`teacher:${_e}`).join(","),console.log("DEBUG: Created assignment for periodNumber:",$e)}if(!$e&&De.name&&ge.classAssignment){console.log("DEBUG: Trying to match by block name:",De.name);const Ke=Object.keys(ge.classAssignment).find(_e=>_e.toLowerCase().trim()===De.name.toLowerCase().trim());if(Ke){console.log("DEBUG: Found match by block name:",Ke);const _e=Array.isArray(ge.classAssignment[Ke])?ge.classAssignment[Ke]:[ge.classAssignment[Ke]];Ie=_e.filter(Boolean).map(Ee=>{const Se=C.value.find(Le=>Le.id===Ee);return Se?Se.name||Se.email:"Unknown Teacher"}),$e=_e.filter(Boolean).map(Ee=>`teacher:${Ee}`).join(","),console.log("DEBUG: Created assignment for block name:",$e)}}if($e){const Ke=De.startTime,_e=W(De.startTime,30),Ee=$e.split(",").map(Le=>Le.replace("teacher:","")).filter(Boolean),Se={id:`imported-class-${Date.now()}-${Te}`,label:Ie.join(", "),start:Ke,end:_e,type:"class",blockId:`imported-block-${Te}`,teacherId:Ee[0]||"",note:Ee.length>1?`Multiple teachers: ${Ie.join(", ")}`:""};console.log("DEBUG: Adding new assignment:",Se),Q.value.push(Se),Te++}}if(console.log("DEBUG: Checking direct assignments..."),console.log("DEBUG: aideData.directAssignment:",ge.directAssignment),console.log("DEBUG: typeof aideData.directAssignment:",typeof ge.directAssignment),console.log("DEBUG: Array.isArray(aideData.directAssignment):",Array.isArray(ge.directAssignment)),ge.directAssignment){console.log("DEBUG: Found directAssignment:",ge.directAssignment);const De=Array.isArray(ge.directAssignment)?ge.directAssignment:[ge.directAssignment];console.log("DEBUG: directStudentIds:",De),console.log("DEBUG: students.value length:",(Ae=i.value)==null?void 0:Ae.length),console.log("DEBUG: students.value sample:",(We=i.value)==null?void 0:We.slice(0,3));for(const je of De)if(console.log("DEBUG: Processing studentId:",je),je&&je!==""){const $e=i.value.find(Ie=>Ie.id===je);if(console.log("DEBUG: Found student:",$e),$e){const Ie=`${it($e,"firstName")} ${it($e,"lastName")}`;console.log("DEBUG: Student name:",Ie);const Ke=p0(S.value).find(_e=>_e.type==="period");if(console.log("DEBUG: First period block:",Ke),Ke){const _e=Ke.startTime,Ee=W(Ke.startTime,30),Se={id:`imported-direct-${Date.now()}-${Te}`,label:Ie,start:_e,end:Ee,type:"student",blockId:`imported-direct-block-${Te}`,studentId:je};console.log("DEBUG: Adding direct assignment:",Se),Q.value.push(Se),Te++}}}}else console.log("DEBUG: No directAssignment found");if(console.log("DEBUG: Final importedCount:",Te),console.log("DEBUG: Final localAideAssignments:",Q.value),Te>0){alert(`Successfully imported ${Te} assignments with 30-minute time spans.

Types: Class assignments set to 'class', Direct assignments set to 'student'
Labels: Teacher names for class assignments, Student names for direct assignments
Duration: 30 minutes each`);const De=b.value,je=f.value[De]||{},$e={};Q.value.forEach(Ke=>{const _e=Ke.blockId||Ke.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;$e[_e]={id:Ke.id,blockId:_e,type:Ke.type,label:Ke.label,start:Ke.start,end:Ke.end,note:Ke.note,teacherId:Ke.teacherId,studentId:Ke.studentId}});const Ie={...je,schedule:$e};p(De,Ie).then(()=>{h().then(()=>{N(),pl(()=>{F(De)})})})}else alert("No matching assignments found in the Aide Assignment data for this schedule.")}function W(ee,ge){const[Te,ke]=ee.split(":").map(Number),Ae=Te*60+ke+ge,We=Math.floor(Ae/60),De=Ae%60;return`${We.toString().padStart(2,"0")}:${De.toString().padStart(2,"0")}`}$t(()=>p0(S.value),ee=>{const ge={};for(const Te of ee){const ke=H(Te,b.value);ge[Te.id]=ke?[{id:ke,value:ke}]:[]}R.value=ge},{immediate:!0});function G(ee,ge){Z.value=ge,xe.value=ee.clientY,J.value=m.value.findIndex(Te=>Te.time===ge.start),Y.value=0,ee.dataTransfer.effectAllowed="move",ee.dataTransfer.setData("text/plain",ge.id)}function re(ee,ge){if(!Z.value||ee.clientY===0)return;const Te=ee.clientY-xe.value;Y.value=Te,ge._dragOffset=Te}function de(ee,ge){if(!Z.value)return;const Te=24,ke=m.value.length;let Ae=J.value+Math.round(Y.value/Te);Ae=Math.max(0,Math.min(ke-2,Ae));const We=m.value[Ae].time,De=m.value.findIndex(Ie=>Ie.time===ge.end)-J.value;let je=Ae+De;je=Math.max(Ae+1,Math.min(ke-1,je));const $e=m.value[je].time;ge.start=We,ge.end=$e,ge._dragOffset=0,Z.value=null,Y.value=0}function ae(ee){const ge=m.value.findIndex($e=>$e.time===ee.start),Te=m.value.findIndex($e=>$e.time===ee.end),ke=24;if(ge===-1||Te===-1)return{display:"none"};const Ae=ge*ke+(ee._dragOffset||0),We=Math.max((Te-ge)*ke,ke);let De,je;return ee.type==="class"?(De="#e8f4fd",je="#4a90e2"):ee.type==="student"?(De="#f0f8e8",je="#7cb342"):(De="#f5f5f5",je="#9e9e9e"),{position:"absolute",left:"20px",top:`${Ae}px`,height:`${We}px`,width:"200px",minHeight:"24px",background:De,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"#333",border:`2px solid ${je}`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"grab",zIndex:2,transition:Z.value===ee?"none":"top 0.2s"}}function ce(){const ee=_.value&&_.value.length>0?_.value[0].startTime:"08:00",ge=_.value&&_.value.length>0?_.value[0].endTime:"08:30";Q.value.push({id:`custom:${Date.now()}`,label:"",start:ee,end:ge,blockId:`block-${Date.now()}`})}const te=se(!1);se(null);const Z=se(null),xe=se(0),J=se(0),Y=se(0),Q=se([]);$t(b,ee=>{if(!ee){Q.value=[];return}const Te=(f.value[ee]||{}).schedule||{};Q.value=Object.entries(Te).map(([ke,Ae])=>({id:ke+"-"+(ee||""),label:Ae.label||"",start:Ae.start,end:Ae.end,blockId:ke,type:Ae.type||"lunch",teacherId:Ae.teacherId||"",studentId:Ae.studentId||"",note:Ae.note||""}))},{immediate:!0});async function fe(ee){if(b.value)try{y.value=!0;const ge=f.value[b.value]||{},Te={};ee.forEach(Ae=>{const We=Ae.blockId||Ae.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;Te[We]={id:Ae.id,blockId:We,type:Ae.type,label:Ae.label,start:Ae.start,end:Ae.end,note:Ae.note,teacherId:Ae.teacherId,studentId:Ae.studentId}});const ke={...ge,schedule:Te};await p(b.value,ke),await h(),N(),alert("Schedule saved!")}catch(ge){alert("Failed to save schedule: "+ge.message)}finally{y.value=!1}}$t(()=>_,ee=>{console.log("DEBUG: blocks",ee)},{immediate:!0}),$t(b,ee=>{ee&&(console.log("DEBUG: Opening edit dialog for aide",ee),console.log("DEBUG: blocks passed to dialog",_.value))});function ye(ee,ge){console.log("Resize start:",ge)}function ie(){ce()}return(ee,ge)=>(B(),U("div",ace,[d("div",ice,[ge[4]||(ge[4]=d("h1",null,"Aide Schedule Management",-1)),d("div",oce,[d("button",{onClick:L,class:"btn btn-primary",disabled:y.value},[y.value?(B(),U("span",cce,"")):(B(),U("span",uce,"")),we(" "+X(y.value?"Saving...":"Save Schedule"),1)],8,lce),d("button",{onClick:O,class:"btn btn-secondary"},ge[3]||(ge[3]=[d("span",null,"",-1),we(" Back ")]))])]),d("div",dce,[K(r).currentUser?k.value?v.value?(B(),U("div",pce," Loading aide schedules... ")):(B(),U("div",mce,[Re(tce,{paraeducators:I.value,blocks:_.value,getAideTimeBlocks:M,getAideName:D,currentTimeTable:S.value,onEditAideAssignment:F,onGotoTimeTableConfig:ge[2]||(ge[2]=()=>K(e).push("/admin?tab=time-table"))},{"tab-bar":ep(()=>[P.value.length>1?(B(),U("div",gce,[(B(!0),U(Pe,null,He(P.value,Te=>(B(),U("div",{key:Te.id,class:Ye(["tab-btn",{active:w.value===Te.id}]),onClick:ke=>w.value=Te.id},X(Te.label),11,vce))),128))])):ve("",!0)]),_:1},8,["paraeducators","blocks","currentTimeTable"]),b.value?(B(),Qt(Ble,{key:0,aideName:D(b.value),timeTicks:K(m),isTickInAnyBlock:A,aideAssignments:Q.value,getAssignmentBoxStyle:ae,onAssignmentDragStart:G,onAssignmentDrag:re,onAssignmentDragEnd:de,onResizeStart:ye,showAddAssignment:te.value,addAssignment:ie,onImportAssignments:V,onSave:fe,onClose:N,saving:y.value,blocks:_.value,teachers:C.value,students:K(i)},null,8,["aideName","timeTicks","aideAssignments","showAddAssignment","saving","blocks","teachers","students"])):ve("",!0)])):(B(),U("div",hce,[ge[7]||(ge[7]=d("h2",null,"Access Denied",-1)),ge[8]||(ge[8]=d("p",null,"You do not have permission to access this page.",-1)),d("button",{onClick:ge[1]||(ge[1]=Te=>K(e).push("/")),class:"btn btn-primary"},"Go Home")])):(B(),U("div",fce,[ge[5]||(ge[5]=d("h2",null,"Authentication Required",-1)),ge[6]||(ge[6]=d("p",null,"Please log in to access this page.",-1)),d("button",{onClick:ge[0]||(ge[0]=Te=>K(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},yce={name:"AdminBackupRestore",setup(){const t=se([{id:"users",name:"Users"},{id:"students",name:"Students"},{id:"app_settings",name:"App Settings"},{id:"aideSchedules",name:"Aide Schedules"},{id:"aideAssignments",name:"Aide Assignments"},{id:"feedbackForms",name:"Teacher Feedback Forms"},{id:"config",name:"Configuration"},{id:"backups",name:"Backups Metadata"}]),e=se(["users","students","app_settings"]),r=se(""),n=se(!1),s=se(!1),i=se(null),a=se(null),o=se([]),l=se(""),c=se("info"),u=Ns({overwrite:!1,validate:!0}),f=se(null),h=async()=>{var R,P,S;try{console.log(" DEBUG: Current user role:",(R=currentUser.value)==null?void 0:R.role),console.log(" DEBUG: Current user:",currentUser.value);const _=At(qe,"backups"),m=or(_,hn("createdAt","desc"),oa(20)),A=await Wt(m);o.value=A.docs.map(k=>({id:k.id,...k.data()})),console.log(" DEBUG: Successfully loaded",o.value.length,"backups")}catch(_){console.error(" DEBUG: Error loading backups:",_),console.error(" DEBUG: Error details:",{code:_.code,message:_.message,userRole:(P=currentUser.value)==null?void 0:P.role,userId:(S=currentUser.value)==null?void 0:S.uid}),w("Error loading backups","error")}},p=async()=>{if(e.value.length===0){w("Please select at least one collection","error");return}n.value=!0,w("Creating backup...","info");try{const R={metadata:{version:"1.0",createdAt:new Date().toISOString(),createdBy:"admin",description:r.value||"Manual backup"},collections:{}};for(const _ of e.value)if(_==="app_settings"){const m=Ze(qe,"app_settings","global"),A=await nr(m);R.collections[_]=A.exists()?A.data():{}}else{const m=At(qe,_),A=await Wt(m);R.collections[_]=A.docs.map(k=>({id:k.id,...k.data()}))}const P=`backup_${Date.now()}`,S=Ze(qe,"backups",P);await Ht(S,{name:r.value||`Backup ${new Date().toLocaleDateString()}`,createdAt:new Date().toISOString(),collections:e.value,size:JSON.stringify(R).length,data:R}),r.value="",await h(),w("Backup created successfully!","success")}catch(R){console.error("Error creating backup:",R),w("Error creating backup: "+R.message,"error")}finally{n.value=!1}},g=R=>{const P=R.target.files[0];if(!P)return;i.value=P,a.value=null;const S=new FileReader;S.onload=_=>{try{const m=JSON.parse(_.target.result);m.metadata&&m.collections?(a.value=m,w("Backup file loaded successfully","success")):w("Invalid backup file format","error")}catch{w("Error parsing JSON file","error")}},S.readAsText(P)},v=async()=>{if(!i.value||!a.value){w("Please select a valid backup file","error");return}if(u.overwrite){if(!confirm("This will overwrite existing data. This action cannot be undone. Continue?"))return}else if(!confirm("This will add new data without overwriting existing records. Continue?"))return;s.value=!0,w("Restoring backup...","info");try{for(const[R,P]of Object.entries(a.value.collections))if(R==="app_settings"||R==="appSettings"){const S=Ze(qe,"app_settings","global");await Ht(S,P,{merge:!u.overwrite})}else{const S=At(qe,R);if(Array.isArray(P))for(const _ of P){const m=Ze(S,_.id);u.overwrite?await Ht(m,_):await Ht(m,_,{merge:!0})}}w("Backup restored successfully!","success"),i.value=null,a.value=null,f.value&&(f.value.value="")}catch(R){console.error("Error restoring backup:",R),w("Error restoring backup: "+R.message,"error")}finally{s.value=!1}},y=R=>{const P=JSON.stringify(R.data,null,2),S=new Blob([P],{type:"application/json"}),_=URL.createObjectURL(S),m=document.createElement("a");m.href=_,m.download=`${R.name||"backup"}.json`,m.target="_blank",m.rel="noopener noreferrer",document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(_)},b=async R=>{if(confirm("Are you sure you want to delete this backup?"))try{await mo(Ze(qe,"backups",R)),await h(),w("Backup deleted successfully","success")}catch(S){console.error("Error deleting backup:",S),w("Error deleting backup","error")}},E=R=>{if(R===0)return"0 Bytes";const P=1024,S=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(R)/Math.log(P));return parseFloat((R/Math.pow(P,_)).toFixed(2))+" "+S[_]},x=R=>new Date(R).toLocaleString(),w=(R,P="info")=>{l.value=R,c.value=P,setTimeout(()=>{l.value=""},5e3)};return Gt(()=>{h()}),{collections:t,selectedCollections:e,backupName:r,isBackingUp:n,isRestoring:s,selectedFile:i,backupData:a,backups:o,statusMessage:l,statusType:c,restoreOptions:u,fileInput:f,createBackup:p,handleFileSelect:g,restoreBackup:v,downloadBackup:y,deleteBackup:b,formatFileSize:E,formatDate:x}}},xce={class:"admin-backup-restore"},Ece={class:"content"},_ce={class:"section"},bce={class:"backup-options"},Sce={class:"option-group"},Ace={class:"checkbox-group"},Tce=["value","disabled"],wce={class:"option-group"},Cce=["disabled"],kce=["disabled"],Ice={key:0},Dce={key:1},Pce={class:"section"},Rce={class:"restore-options"},Fce={class:"file-upload"},Nce=["disabled"],Oce={key:0,class:"file-info"},Mce={key:0,class:"option-group"},Lce={class:"backup-info"},Bce={class:"collection-name"},Uce={class:"collection-count"},$ce={key:1,class:"option-group"},Vce={class:"checkbox-group"},Hce={class:"checkbox"},jce=["disabled"],Gce={class:"checkbox"},Wce=["disabled"],zce=["disabled"],Kce={key:0},qce={key:1},Xce={class:"section"},Yce={key:0,class:"backup-list"},Qce={class:"backup-info"},Jce={class:"admin-action-btns"},Zce=["onClick"],eue=["onClick"],tue={key:1,class:"no-backups"};function rue(t,e,r,n,s,i){return B(),U("div",xce,[e[17]||(e[17]=d("h1",null," Admin Tools",-1)),e[18]||(e[18]=d("div",{class:"header"},[d("h1",null,"Backup & Restore"),d("p",null,"Manage database backups and restore data from JSON files")],-1)),d("div",Ece,[d("div",_ce,[e[9]||(e[9]=d("h2",null,"Create Backup",-1)),d("div",bce,[d("div",Sce,[e[7]||(e[7]=d("label",null,"Collections to backup:",-1)),d("div",Ace,[(B(!0),U(Pe,null,He(n.collections,a=>(B(),U("label",{key:a.id,class:"checkbox"},[Oe(d("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>n.selectedCollections=o),value:a.id,disabled:n.isBackingUp},null,8,Tce),[[yt,n.selectedCollections]]),we(" "+X(a.name),1)]))),128))])]),d("div",wce,[e[8]||(e[8]=d("label",null,"Backup name (optional):",-1)),Oe(d("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.backupName=a),placeholder:"e.g., backup-2024-01-15",disabled:n.isBackingUp},null,8,Cce),[[ft,n.backupName]])]),d("button",{onClick:e[2]||(e[2]=(...a)=>n.createBackup&&n.createBackup(...a)),disabled:n.isBackingUp||n.selectedCollections.length===0,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},[n.isBackingUp?(B(),U("span",Ice,"Creating Backup...")):(B(),U("span",Dce,"Create Backup"))],8,kce)])]),d("div",Pce,[e[15]||(e[15]=d("h2",null,"Restore from Backup",-1)),d("div",Rce,[d("div",Fce,[e[10]||(e[10]=d("label",null,"Select JSON backup file:",-1)),d("input",{type:"file",onChange:e[3]||(e[3]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a)),accept:".json",disabled:n.isRestoring,ref:"fileInput"},null,40,Nce),n.selectedFile?(B(),U("p",Oce," Selected: "+X(n.selectedFile.name)+" ("+X(n.formatFileSize(n.selectedFile.size))+") ",1)):ve("",!0)]),n.backupData?(B(),U("div",Mce,[e[11]||(e[11]=d("label",null,"Collections in backup:",-1)),d("div",Lce,[(B(!0),U(Pe,null,He(n.backupData.collections,(a,o)=>(B(),U("div",{key:o,class:"collection-info"},[d("span",Bce,X(o)+":",1),d("span",Uce,X(Array.isArray(a)?a.length:"1")+" items",1)]))),128))])])):ve("",!0),n.backupData?(B(),U("div",$ce,[e[14]||(e[14]=d("label",null,"Restore options:",-1)),d("div",Vce,[d("label",Hce,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>n.restoreOptions.overwrite=a),disabled:n.isRestoring},null,8,jce),[[yt,n.restoreOptions.overwrite]]),e[12]||(e[12]=we(" Overwrite existing data "))]),d("label",Gce,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=a=>n.restoreOptions.validate=a),disabled:n.isRestoring},null,8,Wce),[[yt,n.restoreOptions.validate]]),e[13]||(e[13]=we(" Validate data before restore "))])])])):ve("",!0),d("button",{onClick:e[6]||(e[6]=(...a)=>n.restoreBackup&&n.restoreBackup(...a)),disabled:n.isRestoring||!n.selectedFile||!n.backupData,class:"admin-action-btn warning",style:{"min-width":"140px","max-width":"140px"}},[n.isRestoring?(B(),U("span",Kce,"Restoring...")):(B(),U("span",qce,"Restore Backup"))],8,zce)])]),d("div",Xce,[e[16]||(e[16]=d("h2",null,"Backup History",-1)),n.backups.length>0?(B(),U("div",Yce,[(B(!0),U(Pe,null,He(n.backups,a=>(B(),U("div",{key:a.id,class:"backup-item"},[d("div",Qce,[d("h3",null,X(a.name||"Unnamed Backup"),1),d("p",null,"Created: "+X(n.formatDate(a.createdAt)),1),d("p",null,"Size: "+X(n.formatFileSize(a.size)),1),d("p",null,"Collections: "+X(a.collections.join(", ")),1)]),d("div",Jce,[d("button",{onClick:o=>n.downloadBackup(a),class:"admin-action-btn secondary"},"Download",8,Zce),d("button",{onClick:o=>n.deleteBackup(a.id),class:"admin-action-btn delete"},"Delete",8,eue)])]))),128))])):(B(),U("p",tue,"No backups found"))])]),n.statusMessage?(B(),U("div",{key:0,class:Ye(["status-message",n.statusType])},X(n.statusMessage),3)):ve("",!0)])}const TD=bt(yce,[["render",rue],["__scopeId","data-v-bc031c32"]]),nue={class:"admin-audit-logs"},sue={class:"log-controls"},aue={class:"log-filters"},iue=["disabled"],oue=["disabled"],lue={class:"logs-container"},cue={key:0,class:"loading-state"},uue={key:1,class:"logs-table"},due={class:"timestamp"},fue={class:"log-type"},hue={class:"user-info"},pue={class:"user-email"},mue={class:"user-id"},gue={class:"action"},vue={class:"details"},yue={class:"details-preview"},xue={class:"actions"},Eue=["onClick"],_ue={key:2,class:"no-logs"},bue={key:1,class:"pagination"},Sue=["disabled"],Aue={class:"page-info"},Tue=["disabled"],wue={class:"dialog-content"},Cue={class:"log-detail-section"},kue={class:"detail-grid"},Iue={class:"detail-item"},Due={class:"detail-item"},Pue={class:"detail-item"},Rue={class:"detail-item"},Fue={class:"detail-item"},Nue={class:"detail-item"},Oue={class:"detail-item"},Mue={key:0,class:"log-detail-section"},Lue={class:"detail-grid"},Bue={key:0,class:"detail-item"},Uue={key:1,class:"detail-item"},$ue={key:2,class:"detail-item"},Vue={key:1,class:"log-detail-section"},Hue={class:"details-content"},jue={key:2,class:"log-detail-section"},Gue={class:"detail-grid"},Wue={key:0,class:"detail-item"},zue={key:1,class:"detail-item"},m0=25,Kue={__name:"AdminAuditLogs",setup(t){const e=xo(),r=se([]),n=se(!1),s=se(""),i=se(!1),a=se(null),o=se("7"),l=se(""),c=se(""),u=se(""),f=se(1),h=be(()=>{let k=r.value;if(l.value&&(k=k.filter(I=>I.type===l.value)),c.value&&(k=k.filter(I=>I.action===c.value)),u.value){const I=u.value.toLowerCase();k=k.filter(C=>C.userEmail&&C.userEmail.toLowerCase().includes(I)||C.action&&C.action.toLowerCase().includes(I)||C.details&&JSON.stringify(C.details).toLowerCase().includes(I)||C.studentId&&C.studentId.toLowerCase().includes(I))}return k}),p=be(()=>{const k=(f.value-1)*m0,I=k+m0;return h.value.slice(k,I)}),g=be(()=>Math.ceil(h.value.length/m0)),v=async()=>{n.value=!0,s.value="";try{const k=new Date;k.setDate(k.getDate()-parseInt(o.value));const I=or(At(e,"auditLogs"),Ur("timestamp",">=",k),hn("timestamp","desc"),oa(500)),C=await Wt(I);r.value=C.docs.map(M=>({id:M.id,...M.data()})),f.value=1,_(`Loaded ${r.value.length} audit logs`,!1)}catch(k){console.error("Error loading audit logs:",k),_("Error loading audit logs: "+k.message,!0)}finally{n.value=!1}},y=async()=>{try{const k=b(h.value),I=new Blob([k],{type:"text/csv"}),C=window.URL.createObjectURL(I),M=document.createElement("a");M.href=C,M.download=`audit-logs-${new Date().toISOString().split("T")[0]}.csv`,M.click(),window.URL.revokeObjectURL(C),_("Audit logs exported successfully",!1)}catch(k){console.error("Error exporting logs:",k),_("Error exporting logs: "+k.message,!0)}},b=k=>{const C=[["Timestamp","Type","User Email","User ID","Action","Details","Student ID","Session ID","IP Address"].join(",")];return k.forEach(M=>{const D=[w(M.timestamp),M.type||"",M.userEmail||M.performedByEmail||"",M.userId||M.performedBy||"",M.action||"",JSON.stringify(M.details||"").replace(/"/g,'""'),M.studentId||M.targetUserId||"",M.sessionId||"",M.ipAddress||""];C.push(D.map(F=>`"${F}"`).join(","))}),C.join(`
`)},E=k=>{a.value=k},x=()=>{a.value=null},w=k=>{if(!k)return"N/A";let I;return k.toDate?I=k.toDate():k instanceof Date?I=k:I=new Date(k),I.toLocaleString()},R=k=>({student_access:"Student Access",user_management:"User Management",system_access:"System Access",data_export:"Data Export",session_timeout:"Session Timeout"})[k]||k,P=k=>{if(k.details){const C=typeof k.details=="string"?k.details:JSON.stringify(k.details);return C.length>50?C.substring(0,50)+"...":C}const I=[];return k.studentId&&I.push(`Student: ${k.studentId}`),k.targetUserId&&I.push(`Target: ${k.targetUserId}`),k.exportType&&I.push(`Export: ${k.exportType}`),k.studentCount&&I.push(`Count: ${k.studentCount}`),I.join(", ")||"No additional details"},S=k=>{if(!k)return"No details available";if(typeof k=="string")try{const I=JSON.parse(k);return JSON.stringify(I,null,2)}catch{return k}return JSON.stringify(k,null,2)},_=(k,I=!1)=>{s.value=k,i.value=I,setTimeout(()=>{s.value="",i.value=!1},5e3)};let m=null;const A=()=>{m&&clearTimeout(m),m=setTimeout(()=>{f.value=1},300)};return Gt(()=>{v()}),(k,I)=>(B(),U("div",nue,[I[29]||(I[29]=d("div",{class:"logs-header"},[d("h2",null," System Audit Logs"),d("p",{class:"logs-description"}," View and search system audit logs for security monitoring and compliance. ")],-1)),d("div",sue,[d("div",aue,[Oe(d("select",{"onUpdate:modelValue":I[0]||(I[0]=C=>o.value=C),onChange:v,class:"form-select"},I[7]||(I[7]=[d("option",{value:"1"},"Last 24 hours",-1),d("option",{value:"7"},"Last 7 days",-1),d("option",{value:"30"},"Last 30 days",-1),d("option",{value:"90"},"Last 90 days",-1)]),544),[[cr,o.value]]),Oe(d("select",{"onUpdate:modelValue":I[1]||(I[1]=C=>l.value=C),onChange:v,class:"form-select"},I[8]||(I[8]=[Dn('<option value="" data-v-aacc574e>All Log Types</option><option value="student_access" data-v-aacc574e>Student Access</option><option value="user_management" data-v-aacc574e>User Management</option><option value="system_access" data-v-aacc574e>System Access</option><option value="data_export" data-v-aacc574e>Data Export</option><option value="session_timeout" data-v-aacc574e>Session Timeout</option>',6)]),544),[[cr,l.value]]),Oe(d("select",{"onUpdate:modelValue":I[2]||(I[2]=C=>c.value=C),onChange:v,class:"form-select"},I[9]||(I[9]=[Dn('<option value="" data-v-aacc574e>All Actions</option><option value="login" data-v-aacc574e>Login</option><option value="logout" data-v-aacc574e>Logout</option><option value="create" data-v-aacc574e>Create</option><option value="edit" data-v-aacc574e>Edit</option><option value="delete" data-v-aacc574e>Delete</option><option value="view" data-v-aacc574e>View</option><option value="admin_panel_access" data-v-aacc574e>Admin Access</option>',8)]),544),[[cr,c.value]]),Oe(d("input",{"onUpdate:modelValue":I[3]||(I[3]=C=>u.value=C),onInput:A,type:"text",placeholder:"Search logs...",class:"form-input"},null,544),[[ft,u.value]]),d("button",{onClick:v,class:"btn btn-secondary",disabled:n.value},"  "+X(n.value?"Loading...":"Refresh"),9,iue),d("button",{onClick:y,class:"btn btn-primary",disabled:n.value},"  Export Logs ",8,oue)])]),s.value?(B(),U("div",{key:0,class:Ye(["status-message",{error:i.value}])},X(s.value),3)):ve("",!0),d("div",lue,[n.value?(B(),U("div",cue," Loading audit logs... ")):h.value.length>0?(B(),U("table",uue,[I[10]||(I[10]=d("thead",null,[d("tr",null,[d("th",null,"Timestamp"),d("th",null,"Type"),d("th",null,"User"),d("th",null,"Action"),d("th",null,"Details"),d("th",null,"Actions")])],-1)),d("tbody",null,[(B(!0),U(Pe,null,He(p.value,C=>(B(),U("tr",{key:C.id,class:"log-row"},[d("td",due,X(w(C.timestamp)),1),d("td",fue,[d("span",{class:Ye(["type-badge",C.type])},X(R(C.type)),3)]),d("td",hue,[d("div",pue,X(C.userEmail||"Unknown"),1),d("div",mue,X(C.userId||C.performedBy||"N/A"),1)]),d("td",gue,X(C.action||"N/A"),1),d("td",vue,[d("div",yue,X(P(C)),1)]),d("td",xue,[d("button",{onClick:M=>E(C),class:"btn btn-sm btn-info",title:"View Details"},"  View ",8,Eue)])]))),128))])])):(B(),U("div",_ue,I[11]||(I[11]=[d("p",null,"No audit logs found for the selected criteria.",-1)])))]),h.value.length>m0?(B(),U("div",bue,[d("button",{onClick:I[4]||(I[4]=C=>f.value--),disabled:f.value===1,class:"btn btn-secondary"}," Previous ",8,Sue),d("span",Aue," Page "+X(f.value)+" of "+X(g.value)+" ("+X(h.value.length)+" logs) ",1),d("button",{onClick:I[5]||(I[5]=C=>f.value++),disabled:f.value===g.value,class:"btn btn-secondary"}," Next ",8,Tue)])):ve("",!0),a.value?(B(),U("div",{key:2,class:"log-dialog-overlay",onClick:x},[d("div",{class:"log-dialog",onClick:I[6]||(I[6]=Xr(()=>{},["stop"]))},[d("div",{class:"dialog-header"},[I[12]||(I[12]=d("h3",null," Audit Log Details",-1)),d("button",{onClick:x,class:"close-btn"},"")]),d("div",wue,[d("div",Cue,[I[20]||(I[20]=d("h4",null,"Basic Information",-1)),d("div",kue,[d("div",Iue,[I[13]||(I[13]=d("label",null,"Timestamp:",-1)),d("span",null,X(w(a.value.timestamp)),1)]),d("div",Due,[I[14]||(I[14]=d("label",null,"Log Type:",-1)),d("span",{class:Ye(["type-badge",a.value.type])},X(R(a.value.type)),3)]),d("div",Pue,[I[15]||(I[15]=d("label",null,"Action:",-1)),d("span",null,X(a.value.action||"N/A"),1)]),d("div",Rue,[I[16]||(I[16]=d("label",null,"User Email:",-1)),d("span",null,X(a.value.userEmail||a.value.performedByEmail||"Unknown"),1)]),d("div",Fue,[I[17]||(I[17]=d("label",null,"User ID:",-1)),d("span",null,X(a.value.userId||a.value.performedBy||"N/A"),1)]),d("div",Nue,[I[18]||(I[18]=d("label",null,"Session ID:",-1)),d("span",null,X(a.value.sessionId||"N/A"),1)]),d("div",Oue,[I[19]||(I[19]=d("label",null,"IP Address:",-1)),d("span",null,X(a.value.ipAddress||"N/A"),1)])])]),a.value.studentId||a.value.targetUserId?(B(),U("div",Mue,[I[24]||(I[24]=d("h4",null,"Target Information",-1)),d("div",Lue,[a.value.studentId?(B(),U("div",Bue,[I[21]||(I[21]=d("label",null,"Student ID:",-1)),d("span",null,X(a.value.studentId),1)])):ve("",!0),a.value.targetUserId?(B(),U("div",Uue,[I[22]||(I[22]=d("label",null,"Target User ID:",-1)),d("span",null,X(a.value.targetUserId),1)])):ve("",!0),a.value.studentIds?(B(),U("div",$ue,[I[23]||(I[23]=d("label",null,"Student IDs:",-1)),d("span",null,X(Array.isArray(a.value.studentIds)?a.value.studentIds.join(", "):a.value.studentIds),1)])):ve("",!0)])])):ve("",!0),a.value.details?(B(),U("div",Vue,[I[25]||(I[25]=d("h4",null,"Additional Details",-1)),d("div",Hue,[d("pre",null,X(S(a.value.details)),1)])])):ve("",!0),a.value.exportType||a.value.studentCount?(B(),U("div",jue,[I[28]||(I[28]=d("h4",null,"Export Information",-1)),d("div",Gue,[a.value.exportType?(B(),U("div",Wue,[I[26]||(I[26]=d("label",null,"Export Type:",-1)),d("span",null,X(a.value.exportType),1)])):ve("",!0),a.value.studentCount?(B(),U("div",zue,[I[27]||(I[27]=d("label",null,"Student Count:",-1)),d("span",null,X(a.value.studentCount),1)])):ve("",!0)])])):ve("",!0)]),d("div",{class:"dialog-actions"},[d("button",{onClick:x,class:"btn btn-secondary"},"Close")])])])):ve("",!0)]))}},que=bt(Kue,[["__scopeId","data-v-aacc574e"]]),Xue={class:"teacher-feedback-admin"},Yue={key:0,class:"status-message loading"},Que={key:1,class:"status-message success"},Jue={key:2,class:"status-message error"},Zue={class:"quick-actions"},ede=["disabled"],tde={class:"modal-body"},rde={class:"form-group"},nde={class:"form-group"},sde={class:"form-group"},ade={class:"form-group"},ide={class:"modal-footer"},ode=["disabled"],lde={key:0},cde={key:1},ude={class:"setup-section"},dde={key:0,class:"loading-state"},fde={key:1,class:"status-card"},hde={class:"status-header"},pde={class:"status-indicator"},mde={key:0,class:"status-badge success"},gde={key:1,class:"status-badge info"},vde={class:"status-details"},yde={key:0},xde={key:1},Ede={key:0},_de={key:1,class:"info-note"},bde={key:0,class:"drive-actions"},Sde=["href"],Ade={key:2,class:"setup-options"},Tde={class:"setup-card"},wde={class:"workspace-setup"},Cde={class:"form-group"},kde=["disabled"],Ide=["disabled"],Dde={key:0},Pde={key:1},Rde={class:"forms-list"},Fde={key:0,class:"loading"},Nde={key:1,class:"empty-state"},Ode={key:2,class:"forms-grid"},Mde={class:"form-header"},Lde={class:"admin-action-btns"},Bde=["onClick"],Ude=["onClick"],$de=["onClick"],Vde={class:"form-meta"},Hde={key:0},jde=["href"],Gde={key:1},Wde=["href"],zde={key:2,class:"sheet-status pending"},Kde={__name:"AdminTeacherFeedback",setup(t){const{isLoading:e,error:r,successMessage:n,formsLoading:s,activeForms:i,createFeedbackFormWithUserAuth:a,deleteFeedbackForm:o,clearMessages:l}=sx();_a();const c=xn(),u=se(!1),f=se(""),h=se(""),p=se(""),g=se(""),v=se(null),y=se(!0),b=se(""),E=se("info"),x=se(""),w=se(!1),R=be(()=>f.value.trim()&&p.value.trim()),P=async()=>{if(R.value)try{l();const{GoogleAuthProvider:D,signInWithPopup:F,getAuth:N}=await js(async()=>{const{GoogleAuthProvider:G,signInWithPopup:re,getAuth:de}=await Promise.resolve().then(()=>G5);return{GoogleAuthProvider:G,signInWithPopup:re,getAuth:de}},void 0),L=N(),O=new D;O.addScope("https://www.googleapis.com/auth/drive.file"),O.addScope("https://www.googleapis.com/auth/spreadsheets");let z;try{z=await F(L,O)}catch(G){throw G.code==="auth/popup-closed-by-user"||G.message.includes("Cross-Origin-Opener-Policy")?new Error(" Authentication popup was blocked or closed. Please allow popups for this site and try again."):G}const V=D.credentialFromResult(z).accessToken;if(!V)throw new Error("Failed to get Google access token. Please try again.");console.log(" Got Google access token for feedback form creation");const W={title:f.value.trim(),description:h.value.trim(),formUrl:p.value.trim(),sheetTemplateUrl:g.value.trim(),createdBy:c.user.uid};await a(W,V),S()}catch(D){console.error("Error adding form:",D),D.code==="auth/popup-closed-by-user"?D.value=" Authentication cancelled. Please try again and allow Google Drive access.":D.code==="auth/popup-blocked"?D.value=" Popup blocked. Please allow popups for this site and try again.":D.message&&D.message.includes("Cross-Origin-Opener-Policy")?D.value=" Browser security policy blocked the authentication popup. Please try again or contact support.":D.value=D.message||"Failed to create feedback form"}},S=()=>{u.value=!1,f.value="",h.value="",p.value="",g.value="",l()},_=D=>{window.open(D.formUrl,"_blank","noopener,noreferrer")},m=async D=>{window.open(D.formUrl,"_blank","noopener,noreferrer")},A=async D=>{if(confirm(`Are you sure you want to delete "${D.title}"?`))try{await o(D.id)}catch(F){console.error("Error deleting form:",F)}},k=D=>D?(D.seconds?new Date(D.seconds*1e3):new Date(D)).toLocaleDateString():"N/A",I=async()=>{try{y.value=!0;const{getFunctions:D,httpsCallable:F}=await js(async()=>{const{getFunctions:z,httpsCallable:H}=await Promise.resolve().then(()=>D0);return{getFunctions:z,httpsCallable:H}},void 0),N=D(),O=await F(N,"getUserSchool")();O.data.success&&O.data.school?v.value=O.data.school:await C()}catch(D){console.error("Error loading school info:",D),b.value="Error loading Google Drive settings",E.value="error"}finally{y.value=!1}},C=async()=>{try{const{getFunctions:D,httpsCallable:F}=await js(async()=>{const{getFunctions:z,httpsCallable:H}=await Promise.resolve().then(()=>D0);return{getFunctions:z,httpsCallable:H}},void 0),N=D(),O=await F(N,"getOrCreateSchool")();O.data.success&&(v.value=O.data.school,O.data.school.isNew&&(b.value="Google Drive settings initialized! You can now create feedback forms.",E.value="success"))}catch(D){console.error("Error creating school:",D),b.value="Error initializing Google Drive settings: "+D.message,E.value="error"}},M=async()=>{if(x.value.trim()){w.value=!0,b.value="";try{const{getFunctions:D,httpsCallable:F}=await js(async()=>{const{getFunctions:z,httpsCallable:H}=await Promise.resolve().then(()=>D0);return{getFunctions:z,httpsCallable:H}},void 0),N=D(),O=await F(N,"createSharedDrive")({schoolId:v.value.schoolId,driveName:x.value.trim()});if(O.data.requiresManualCreation){const z=O.data.instructions,H=O.data.serviceAccountEmail;b.value=`Google Workspace setup requires manual configuration:

1. ${z.join(`
2. `)}

Service Account Email: ${H}`,E.value="info"}else O.data.success?(b.value="Google Workspace setup completed successfully!",E.value="success",await I(),x.value=""):(b.value="Error setting up Google Workspace: "+O.data.error,E.value="error")}catch(D){console.error("Error setting up workspace:",D),b.value="Error setting up Google Workspace: "+D.message,E.value="error"}finally{w.value=!1}}};return Gt(async()=>{await I()}),(D,F)=>{var N;return B(),U("div",Xue,[F[35]||(F[35]=d("div",{class:"admin-header"},[d("h2",null,"Teacher Feedback Forms"),d("p",{class:"admin-description"}," Create and manage Google Forms for collecting teacher feedback on students. Each case manager will have their own response sheet automatically created when they first use the form. ")],-1)),K(e)?(B(),U("div",Yue," Processing... ")):ve("",!0),K(n)?(B(),U("div",Que,X(K(n)),1)):ve("",!0),K(r)?(B(),U("div",Jue,X(K(r)),1)):ve("",!0),d("div",Zue,[d("button",{onClick:F[0]||(F[0]=L=>u.value=!0),class:"primary-btn",disabled:K(e)},F[7]||(F[7]=[d("span",null,"",-1),we(" Add Form ")]),8,ede)]),u.value?(B(),U("div",{key:3,class:"modal-overlay",onClick:S},[d("div",{class:"modal-content",onClick:F[5]||(F[5]=Xr(()=>{},["stop"]))},[d("div",{class:"modal-header"},[F[8]||(F[8]=d("h3",null,"Add Teacher Feedback Form",-1)),d("button",{onClick:S,class:"close-btn"},"")]),d("div",tde,[d("div",rde,[F[9]||(F[9]=d("label",null,"Form Title:",-1)),Oe(d("input",{type:"text","onUpdate:modelValue":F[1]||(F[1]=L=>f.value=L),placeholder:"Enter a descriptive title for this form",class:"form-input",required:""},null,512),[[ft,f.value]])]),d("div",nde,[F[10]||(F[10]=d("label",null,"Form Description (optional):",-1)),Oe(d("textarea",{"onUpdate:modelValue":F[2]||(F[2]=L=>h.value=L),placeholder:"Brief description of what this form is for",class:"form-textarea",rows:"3"},null,512),[[ft,h.value]])]),d("div",sde,[F[11]||(F[11]=d("label",null,"Google Form URL:",-1)),Oe(d("input",{type:"url","onUpdate:modelValue":F[3]||(F[3]=L=>p.value=L),placeholder:"https://docs.google.com/forms/d/your-form-id/viewform",class:"form-input",required:""},null,512),[[ft,p.value]]),F[12]||(F[12]=d("small",{class:"form-help"},"Paste the Google Form URL here (viewform link)",-1))]),d("div",ade,[F[13]||(F[13]=d("label",null,"Google Sheet Template URL (optional):",-1)),Oe(d("input",{type:"url","onUpdate:modelValue":F[4]||(F[4]=L=>g.value=L),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id/edit",class:"form-input"},null,512),[[ft,g.value]]),F[14]||(F[14]=d("small",{class:"form-help"},"Optional: Provide a Google Sheet template that case managers can duplicate for collecting responses",-1))]),F[15]||(F[15]=d("div",{class:"form-info"},[d("h4",null," Setup Instructions:"),d("ol",null,[d("li",null,"Create your Google Form manually with the questions you want"),d("li",null,'Make sure to enable "Collect email addresses" in form settings'),d("li",null,"Copy the form's view URL and paste it above"),d("li",null,'Click "Add Form" - a Google Sheet will be automatically created for responses')]),d("p",{class:"info-note"},[d("strong",null," Automatic:"),we(" A Google Sheet will be created immediately when you add the form. Each case manager will get their own copy of this sheet when they use the form. ")])],-1))]),d("div",ide,[d("button",{onClick:S,class:"secondary-btn"},"Cancel"),d("button",{onClick:P,class:"primary-btn",disabled:!R.value||K(e)},[K(e)?(B(),U("span",lde,"Adding Form...")):(B(),U("span",cde,"Add Form"))],8,ode)])])])):ve("",!0),d("div",ude,[F[25]||(F[25]=d("h3",null,"Google Drive Setup",-1)),F[26]||(F[26]=d("p",{class:"section-description"}," Configure how the system accesses Google Drive for creating feedback forms and response sheets. ",-1)),y.value?(B(),U("div",dde,F[16]||(F[16]=[d("p",null,"Loading Google Drive settings...",-1)]))):v.value?(B(),U("div",fde,[d("div",hde,[d("h4",null,X(v.value.name||"Your School"),1),d("div",pde,[v.value.sharedDriveId?(B(),U("span",mde,"  Google Workspace Mode ")):(B(),U("span",gde,"  Personal Google Drive Mode "))])]),d("div",vde,[d("p",null,[F[17]||(F[17]=d("strong",null,"Current Mode:",-1)),v.value.sharedDriveId?(B(),U("span",yde,"Google Workspace Shared Drive")):(B(),U("span",xde,"Personal Google Drive"))]),v.value.sharedDriveId?(B(),U("p",Ede,[F[18]||(F[18]=d("strong",null,"Shared Drive:",-1)),we(" "+X(v.value.sharedDriveName||"CaseManageVue Templates"),1)])):ve("",!0),v.value.sharedDriveId?ve("",!0):(B(),U("p",_de,F[19]||(F[19]=[d("strong",null,"Note:",-1),we(" Files will be created in your personal Google Drive when you create forms. ")])))]),v.value.sharedDriveId?(B(),U("div",bde,[d("a",{href:`https://drive.google.com/drive/folders/${v.value.sharedDriveId}`,target:"_blank",class:"secondary-btn"},"  Open Shared Drive ",8,Sde)])):ve("",!0)])):ve("",!0),!y.value&&!((N=v.value)!=null&&N.sharedDriveId)?(B(),U("div",Ade,[F[24]||(F[24]=d("div",{class:"setup-card"},[d("h4",null," Personal Google Drive (Recommended for Testing)"),d("p",{class:"setup-description"}," Use your personal Google account to create forms and sheets. Files will be created in your personal Drive. "),d("div",{class:"setup-note"},[d("strong",null," Ready to use:"),we(" No additional setup required. When you create forms, you'll be prompted to sign in with your Google account. ")])],-1)),d("div",Tde,[F[22]||(F[22]=d("h4",null," Google Workspace (For Organizations)",-1)),F[23]||(F[23]=d("p",{class:"setup-description"}," Use a Google Workspace Shared Drive for organization-wide access and management. ",-1)),d("div",wde,[d("div",Cde,[F[20]||(F[20]=d("label",{for:"workspaceDriveName"},"Shared Drive Name:",-1)),Oe(d("input",{id:"workspaceDriveName","onUpdate:modelValue":F[6]||(F[6]=L=>x.value=L),type:"text",class:"form-input",placeholder:"e.g., CaseManageVue - School Name",disabled:w.value},null,8,kde),[[ft,x.value]])]),d("button",{onClick:M,class:"primary-btn",disabled:w.value||!x.value.trim()},[w.value?(B(),U("span",Dde," Setting up...")):(B(),U("span",Pde,"Setup Google Workspace"))],8,Ide),F[21]||(F[21]=d("div",{class:"workspace-note"},[d("strong",null,"Note:"),we(" This requires Google Workspace admin permissions and manual configuration. ")],-1))])])])):ve("",!0),b.value?(B(),U("div",{key:3,class:Ye(["alert",E.value])},X(b.value),3)):ve("",!0)]),d("div",Rde,[F[34]||(F[34]=d("h3",null,"Feedback Forms",-1)),K(s)?(B(),U("div",Fde,"Loading forms...")):K(i).length===0?(B(),U("div",Nde,F[27]||(F[27]=[d("p",null,"No feedback forms added yet.",-1),d("p",null,'Click "Add Form" to get started.',-1)]))):(B(),U("div",Ode,[(B(!0),U(Pe,null,He(K(i),L=>(B(),U("div",{key:L.id,class:"form-card"},[d("div",Mde,[d("h4",null,X(L.title||"Untitled Form"),1),d("div",Lde,[d("button",{onClick:O=>_(L),class:"admin-action-btn info",title:"View Form"},"  ",8,Bde),d("button",{onClick:O=>m(L),class:"admin-action-btn edit",title:"Edit Form"},"  ",8,Ude),d("button",{onClick:O=>A(L),class:"admin-action-btn delete",title:"Delete Form"},"  ",8,$de)])]),d("div",Vde,[d("p",null,[F[28]||(F[28]=d("strong",null,"Created:",-1)),we(" "+X(k(L.createdAt)),1)]),L.description?(B(),U("p",Hde,[F[29]||(F[29]=d("strong",null,"Description:",-1)),we(" "+X(L.description),1)])):ve("",!0),d("p",null,[F[30]||(F[30]=d("strong",null,"Form URL:",-1)),F[31]||(F[31]=we()),d("a",{href:L.formUrl,target:"_blank",class:"form-link"},"Open Form",8,jde)]),L.spreadsheetUrl?(B(),U("p",Gde,[F[32]||(F[32]=d("strong",null,"Response Sheet:",-1)),d("a",{href:L.spreadsheetUrl,target:"_blank",class:"form-link"},"View Responses",8,Wde),F[33]||(F[33]=d("span",{class:"sheet-status"}," Auto-created",-1))])):(B(),U("p",zde," Sheet will be created when form is first used"))])]))),128))]))])])}}},qde=bt(Kde,[["__scopeId","data-v-31360789"]]);function Xde(t,e,r){const{getLabel:n}=Eo(),s=be(()=>{var h;const f=((h=r.value)==null?void 0:h.numPeriods)||7;return Array.from({length:f},(p,g)=>({value:g.toString(),label:n(g+1),periodIndex:g}))}),i=be(()=>{const f=new Set;return console.log(" Finding teachers from students:",t.value.length),t.value.forEach(h=>{var p,g,v,y,b;(p=h.aeries)!=null&&p.schedule&&Object.values(h.aeries.schedule).forEach(E=>{E&&E.teacherId&&(console.log(" Found teacher ID in aeries.schedule:",E.teacherId),f.add(String(E.teacherId)))}),(v=(g=h.app)==null?void 0:g.schedule)!=null&&v.periods&&Object.values(h.app.schedule.periods).forEach(E=>{E&&(console.log(" Found teacher ID in app.schedule.periods:",E),f.add(String(E)))});for(let E=1;E<=7;E++){const x=`period${E}TeacherId`,w=h[x]||((y=h.aeries)==null?void 0:y[x])||((b=h.app)==null?void 0:b[x]);w&&(console.log(" Found teacher ID in",x,":",w),f.add(String(w)))}}),console.log(" Unique teacher IDs found:",Array.from(f)),console.log(" Users available:",e.value.length),Array.from(f).map(h=>{let p=e.value.find(g=>g.id===h);return!p&&/^\d+$/.test(h)&&(p=e.value.find(g=>g.aeriesId===h)),{id:h,name:p?p.name||`${p.firstName} ${p.lastName}`:`Teacher ${h}`,actualUserId:p?p.id:null}}).sort((h,p)=>h.name.localeCompare(p.name))}),a=(f,h=[])=>{let p=-1;if(/^\d+$/.test(f))p=parseInt(f)-1;else if(f==="SH")p=6;else if(f.startsWith("Per")){const g=f.replace("Per","");/^\d+$/.test(g)&&(p=parseInt(g)-1)}return h.includes(p.toString())};return{availablePeriods:s,availableTeachers:i,getStudentsForTeachers:(f,h=[])=>t.value.filter(p=>{var v,y,b,E,x,w,R;if(!(((y=(v=p.app)==null?void 0:v.flags)==null?void 0:y.flag1)||p.flag1||!1))return!1;if((b=p.aeries)!=null&&b.schedule){const P=Object.entries(p.aeries.schedule);for(let S=0;S<P.length;S++){const[_,m]=P[S];if(m&&m.teacherId&&f.includes(String(m.teacherId))&&!a(_,h))return!0}}if((x=(E=p.app)==null?void 0:E.schedule)!=null&&x.periods){const P=Object.entries(p.app.schedule.periods);for(let S=0;S<P.length;S++){const[_,m]=P[S];if(m&&f.includes(String(m))&&!a(_,h))return!0}}for(let P=0;P<7;P++){const S=`period${P+1}TeacherId`,_=p[S]||((w=p.aeries)==null?void 0:w[S])||((R=p.app)==null?void 0:R[S]);if(_&&f.includes(String(_))&&!h.includes(P.toString()))return!0}return!1}),getStudentTeacherPeriods:(f,h,p=[])=>{var v,y,b,E,x;const g=[];if((v=f.aeries)!=null&&v.schedule){const w=Object.entries(f.aeries.schedule);for(let R=0;R<w.length;R++){const[P,S]=w[R];if(S&&S.teacherId&&h.includes(String(S.teacherId))&&!a(P,p)){let _=e.value.find(A=>A.id===String(S.teacherId));!_&&/^\d+$/.test(S.teacherId)&&(_=e.value.find(A=>A.aeriesId===String(S.teacherId)));const m=n(R+1);g.push({period:m,teacherName:_?_.name||`${_.firstName} ${_.lastName}`:`Teacher ${S.teacherId}`})}}}if((b=(y=f.app)==null?void 0:y.schedule)!=null&&b.periods){const w=Object.entries(f.app.schedule.periods);for(let R=0;R<w.length;R++){const[P,S]=w[R];if(S&&h.includes(String(S))&&!a(P,p)){const _=e.value.find(A=>A.id===String(S)),m=n(parseInt(P));g.push({period:m,teacherName:_?_.name||`${_.firstName} ${_.lastName}`:`Teacher ${S}`})}}}for(let w=0;w<7;w++){const R=`period${w+1}TeacherId`,P=f[R]||((E=f.aeries)==null?void 0:E[R])||((x=f.app)==null?void 0:x[R]);if(P&&h.includes(String(P))&&!p.includes(w.toString())){let S=e.value.find(m=>m.id===String(P));!S&&/^\d+$/.test(P)&&(S=e.value.find(m=>m.aeriesId===String(P)));const _=n(w+1);g.push({period:_,teacherName:S?S.name||`${S.firstName} ${S.lastName}`:`Teacher ${P}`})}}return g},generateCSV:()=>{const f=["Student ID","First Name","Last Name","Grade","Case Manager","Assessment Accommodations","Services"],h=t.value.map(g=>{var R,P,S,_,m;const v=it(g,"firstName")||"",y=it(g,"lastName")||"",b=it(g,"grade")||"",E=g.caseManagerId||((P=(R=g.app)==null?void 0:R.studentData)==null?void 0:P.caseManagerId)||"",x=((_=(S=g.app)==null?void 0:S.accommodations)==null?void 0:_.assessment)||[],w=((m=g.app)==null?void 0:m.classServices)||[];return[g.id||"",v,y,b,E,Array.isArray(x)?x.join("; "):x,Array.isArray(w)?w.map(A=>A.name||A).join("; "):w]});return[f,...h].map(g=>g.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(",")).join(`
`)},downloadCSV:(f,h)=>{const p=new Blob([f],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a");g.href=URL.createObjectURL(p),g.download=h,g.click(),URL.revokeObjectURL(g.href)},isPeriodExcluded:a}}const Ug="casemanage_linked_sheet_id",g0="Student Data";function Vx(){const t=se(!1),e=se(localStorage.getItem(Ug)||""),r=se(""),n=se(null),s=se("idle"),i=se(""),a=se(null),o=se("");let l=null;const c=()=>new Promise((S,_)=>{var A,k,I;if((k=(A=window.google)==null?void 0:A.accounts)!=null&&k.oauth2&&((I=window.gapi)!=null&&I.client)){S();return}const m=document.createElement("script");m.src="https://accounts.google.com/gsi/client",m.onload=()=>{a.value=window.google.accounts.oauth2.initTokenClient({client_id:"756483333257-kh1cv865e0buv0cv9g0v1h7ghq7s0e70.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",callback:M=>{M.access_token?(o.value=M.access_token,t.value=!0,window.gapi.client.setToken({access_token:M.access_token}),l&&(l(M),l=null)):(console.error("Failed to get access token"),l&&(l(null),l=null))}});const C=document.createElement("script");C.src="https://apis.google.com/js/api.js",C.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]}),S()})},document.head.appendChild(C)},m.onerror=()=>_(new Error("Failed to load Google Identity Services")),document.head.appendChild(m)}),u=async()=>{if(!a.value)throw new Error("Google auth not initialized");if(o.value)try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:"1BxiMVs0XRA5nFMRigcZ_6g3D6P6dNTMhvBSm1x7kFNg"}),{access_token:o.value}}catch{console.log("Token expired, requesting new one"),o.value=""}return new Promise((S,_)=>{l=S;const m=setTimeout(()=>{l=null,_(new Error("Token request timed out"))},3e4),A=a.value.callback;a.value.callback=k=>{clearTimeout(m),a.value.callback=A,k.access_token?(o.value=k.access_token,t.value=!0,window.gapi.client.setToken({access_token:k.access_token}),l&&(l(k),l=null)):(console.error("Failed to get access token:",k),l&&(l(null),l=null))};try{a.value.requestAccessToken()}catch(k){clearTimeout(m),a.value.callback=A,_(k)}})},f=async(S,_=[])=>{var m;try{s.value="syncing",i.value="Creating new Google Sheet...",o.value||await u();const k=((m=tl().currentUser)==null?void 0:m.email)||"",I=await window.gapi.client.sheets.spreadsheets.create({properties:{title:`CaseManage Student Data - ${new Date().toLocaleDateString()}`,locale:"en_US",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},sheets:[{properties:{title:g0,gridProperties:{rowCount:1e3,columnCount:9,frozenRowCount:1}}}]}),C=I.result.spreadsheetId;e.value=C,r.value=`https://docs.google.com/spreadsheets/d/${C}`,localStorage.setItem(Ug,C),await h(S,_);const M=I.result.sheets[0].properties.sheetId;return await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:C,resource:{requests:[{repeatCell:{range:{sheetId:M,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:M,dimension:"COLUMNS",startIndex:0,endIndex:9}}},{addProtectedRange:{protectedRange:{range:{sheetId:M},description:`Read-only protection for ${g0}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),s.value="success",i.value="Sheet created and linked successfully!",n.value=new Date,window.open(r.value,"_blank"),{spreadsheetId:C,url:r.value}}catch(A){throw console.error("Error creating sheet:",A),s.value="error",i.value=`Failed to create sheet: ${A.message}`,A}},h=async(S,_=[])=>{if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{s.value="syncing",i.value="Updating Google Sheet...",o.value||await u();const m=S.filter(M=>{var F,N;return((N=(F=M.app)==null?void 0:F.flags)==null?void 0:N.flag1)||M.flag1||!1});console.log(" Google Sheets - Original students:",S.length),console.log(" Google Sheets - Filtered students (separate setting only):",m.length),console.log(" Google Sheets - Students data:",m),m&&m.length>0&&console.log(" Google Sheets - First student:",m[0]);const A=["Student ID","First Name","Last Name","Grade","Case Manager","Separate Setting","Assessment Accommodations","Services","Last Updated"],k=m.map(M=>{var D,F,N,L,O,z,H,V,W,G,re,de;return console.log(" Processing student:",M.id,{firstName:M.firstName||((F=(D=M.app)==null?void 0:D.studentData)==null?void 0:F.firstName),lastName:M.lastName||((L=(N=M.app)==null?void 0:N.studentData)==null?void 0:L.lastName),grade:M.grade||((z=(O=M.app)==null?void 0:O.studentData)==null?void 0:z.grade)}),[M.id||"",M.firstName||((V=(H=M.app)==null?void 0:H.studentData)==null?void 0:V.firstName)||"",M.lastName||((G=(W=M.app)==null?void 0:W.studentData)==null?void 0:G.lastName)||"",M.grade||((de=(re=M.app)==null?void 0:re.studentData)==null?void 0:de.grade)||"",g(M,_)||"",b(M)||"",v(M,"assessment")||"",y(M)||"",new Date().toLocaleString()]}),I=[A,...k];console.log(" Google Sheets - Data to write:",I),await window.gapi.client.sheets.spreadsheets.values.clear({spreadsheetId:e.value,range:`${g0}!A:Z`});const C=await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${g0}!A1`,valueInputOption:"RAW",resource:{values:I}});console.log(" Google Sheets - Update response:",C),s.value="success",i.value=`Updated ${k.length} students (separate setting only)`,n.value=new Date}catch(m){throw console.error("Error updating sheet:",m),s.value="error",i.value=`Failed to update: ${m.message}`,m.status===401&&(o.value="",await u()),m}},p=()=>{e.value="",r.value="",localStorage.removeItem(Ug),s.value="idle",i.value="",n.value=null},g=(S,_=[])=>{var k,I;const m=S.caseManagerId||((I=(k=S.app)==null?void 0:k.studentData)==null?void 0:I.caseManagerId)||S.casemanager_id;if(!m)return"Not Assigned";const A=_.find(C=>C.id===m);return A&&(A.name||`${A.firstName} ${A.lastName}`||A.email)||m},v=(S,_)=>{var A,k,I;const m=((k=(A=S.app)==null?void 0:A.accommodations)==null?void 0:k[_])||((I=S.accommodations)==null?void 0:I[_])||[];return Array.isArray(m)?m.join(", "):m},y=S=>{var m;const _=((m=S.app)==null?void 0:m.classServices)||S.classServices||[];return Array.isArray(_)?_.map(A=>A.name||A).join(", "):_},b=S=>{var m,A;return((A=(m=S.app)==null?void 0:m.flags)==null?void 0:A.flag1)||S.flag1||!1?"True":"False"},E=async()=>{if(!e.value)return!1;try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:e.value}),!0}catch(S){return S.status===404&&p(),!1}},x=async(S,_,m,A=[],k=[])=>{var I;if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{o.value||await u();const M=((I=tl().currentUser)==null?void 0:I.email)||"";console.log(" Creating custom tab:",S,"for teachers:",m,"excluding periods:",k);const F=(await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{addSheet:{properties:{title:S,gridProperties:{rowCount:1e3,columnCount:12,frozenRowCount:1}}}}]}})).result.replies[0].addSheet.properties.sheetId;console.log(" Created sheet with ID:",F);const N=_.filter(H=>{var W,G;return((G=(W=H.app)==null?void 0:W.flags)==null?void 0:G.flag1)||H.flag1||!1});console.log(" Custom tab - Original students:",_.length),console.log(" Custom tab - Filtered students (separate setting only):",N.length);const L=["Student ID","First Name","Last Name","Grade","Case Manager","Period","Teacher","Subject","Separate Setting","Assessment Accommodations","Services","Last Updated"],O=[];N.forEach(H=>{const V=w(H,m,A,k);console.log(" Student:",H.id,"Periods found:",V.length,"Excluded periods:",k),V.forEach(W=>{console.log(" Adding row for period:",W.period,"teacher:",W.teacherName,"source:",W.source||"unknown")}),V.forEach(W=>{var G,re,de,ae,ce,te;O.push([H.id||"",H.firstName||((re=(G=H.app)==null?void 0:G.studentData)==null?void 0:re.firstName)||"",H.lastName||((ae=(de=H.app)==null?void 0:de.studentData)==null?void 0:ae.lastName)||"",H.grade||((te=(ce=H.app)==null?void 0:ce.studentData)==null?void 0:te.grade)||"",g(H,A)||"",W.period||"",W.teacherName||"",W.subject||"",b(H)||"",v(H,"assessment")||"",y(H)||"",new Date().toLocaleString()])})});const z=[L,...O];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${S}!A1`,valueInputOption:"RAW",resource:{values:z}}),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{repeatCell:{range:{sheetId:F,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:F,dimension:"COLUMNS",startIndex:0,endIndex:12}}},{addProtectedRange:{protectedRange:{range:{sheetId:F},description:`Read-only protection for ${S}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),console.log(" Custom tab created successfully with",O.length,"rows and read-only protection"),{sheetId:F,rowCount:O.length}}catch(C){throw console.error("Error creating custom tab:",C),C}},w=(S,_,m=[],A=[])=>{var C,M,D,F,N;const k=[];console.log(" getStudentPeriodsForTeachers for student:",S.id,"teacherIds:",_,"excludedPeriods:",A,"excludedPeriods array:",JSON.stringify(A));const I=L=>{let O=-1;if(/^\d+$/.test(L))O=parseInt(L)-1;else if(L==="SH")O=6;else if(L.startsWith("Per")){const z=L.replace("Per","");/^\d+$/.test(z)&&(O=parseInt(z)-1)}return console.log(" Period",L,"maps to index",O,"excluded?",A.includes(O.toString())),A.includes(O.toString())};if((C=S.aeries)!=null&&C.schedule){const L=Object.entries(S.aeries.schedule);console.log(" Aeries schedule entries:",L.length);for(let O=0;O<L.length;O++){const[z,H]=L[O],V=I(z);console.log(" Checking aeries period key:",z,"teacherId:",H==null?void 0:H.teacherId,"excluded?",V),H&&H.teacherId&&_.includes(String(H.teacherId))&&(V?console.log(" Excluding aeries period",z):(console.log(" Including aeries period",z),k.push({period:z.replace("period",""),teacherId:H.teacherId,teacherName:R(H.teacherId,m),subject:H.subject||"",source:"aeries"})))}}if((D=(M=S.app)==null?void 0:M.schedule)!=null&&D.periods){const L=Object.entries(S.app.schedule.periods);console.log(" App schedule entries:",L.length);for(let O=0;O<L.length;O++){const[z,H]=L[O],V=I(z);console.log(" Checking app period key:",z,"teacherId:",H,"excluded?",V),H&&_.includes(String(H))&&(V?console.log(" Excluding app period",z):(console.log(" Including app period",z),k.push({period:z,teacherId:H,teacherName:R(H,m),subject:"",source:"app"})))}}for(let L=0;L<7;L++){const O=`period${L+1}TeacherId`,z=S[O]||((F=S.aeries)==null?void 0:F[O])||((N=S.app)==null?void 0:N[O]);if(z&&_.includes(String(z))){const H=A.includes(L.toString());console.log(" Checking CSV period index",L,"field:",O,"teacherId:",z,"excluded?",H),H?console.log(" Excluding CSV period",L):(console.log(" Including CSV period",L),k.push({period:(L+1).toString(),teacherId:z,teacherName:R(z,m),subject:"",source:"csv"}))}}return console.log(" Final periods for student",S.id,":",k.length,k),k},R=(S,_=[])=>{let m=_.find(A=>A.id===S);return!m&&/^\d+$/.test(S)&&(m=_.find(A=>A.aeriesId===S)),m?m.name||`${m.firstName} ${m.lastName}`||`Teacher ${S}`:`Teacher ${S}`};return{isInitialized:t,linkedSheetId:e,linkedSheetUrl:r,lastSyncTime:n,syncStatus:s,syncMessage:i,initializeGoogleAuth:c,requestAccessToken:u,createLinkedSheet:f,updateSheetData:h,createCustomTab:x,deleteCustomTab:async S=>{if(!e.value)throw new Error("No linked sheet.");try{o.value||await u(),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{deleteSheet:{sheetId:S}}]}}),console.log(" Deleted custom tab with sheet ID:",S)}catch(_){throw console.error("Error deleting custom tab:",_),_}},unlinkSheet:p,checkSheetConnection:E}}const Yde=Object.freeze(Object.defineProperty({__proto__:null,useGoogleSheetsRealtime:Vx},Symbol.toStringTag,{value:"Module"}));function Qde(t,e,r){const{generateCSV:n,downloadCSV:s}=r,{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeGoogleAuth:u,createLinkedSheet:f,updateSheetData:h,createCustomTab:p,deleteCustomTab:g,unlinkSheet:v,checkSheetConnection:y}=Vx();let b=null,E=!1;const x=async()=>{try{const C=localStorage.getItem("casemanage_linked_sheet_id");C&&C.startsWith("1XSL0Sl7")&&(console.log("Clearing old sheet ID that was causing 403 errors"),localStorage.removeItem("casemanage_linked_sheet_id")),await u(),i.value&&await y()&&(await S(),w())}catch(C){console.error("Failed to initialize Google Auth:",C)}};$t(()=>t.value,(C,M)=>{C&&M&&C!==M&&(E=!0,console.log(" Student data changed, will sync on next interval")),C!=null&&C.length},{deep:!0});const w=()=>{b&&clearInterval(b),b=setInterval(async()=>{if(i.value&&E&&l.value!=="syncing")try{console.log(" Hourly auto-sync starting..."),await S(),E=!1,console.log(" Hourly auto-sync completed")}catch(C){console.error(" Hourly auto-sync failed:",C)}},36e5)},R=()=>{b&&clearInterval(b)},P=async()=>{try{await f(t.value,e.value),w()}catch(C){console.error("Failed to create linked sheet:",C),alert("Failed to create Google Sheet. Please make sure you are signed in to Google.")}},S=async()=>{if(!(!i.value||l.value==="syncing"))try{await h(t.value,e.value)}catch(C){console.error("Failed to sync sheet:",C),alert("Failed to sync sheet. Please try again.")}};return{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeIntegration:x,createLinkedGoogleSheet:P,syncNow:S,openGoogleSheet:()=>{a.value&&(window.open(a.value,"_blank","noopener,noreferrer")||(window.location.href=a.value))},unlinkSheet:v,createCustomTab:p,deleteCustomTab:g,createGoogleSheetWithData:()=>{const C=n();s(C,"student_data.csv"),window.open("https://sheets.new","_blank")},createBlankGoogleSheet:()=>{window.open("https://sheets.new","_blank")},exportToCSV:()=>{const C=n();s(C,"student_data_export.csv")},formatTime:C=>new Date(C).toLocaleString(),setupAutoSync:w,cleanupAutoSync:R}}function Jde(t,e){const{getStudentsForTeachers:r}=t,{createCustomTab:n,deleteCustomTab:s}=e,i=se([]),a=se(!1),o=se(""),l=se([]),c=se([]),u=5,f=be(()=>l.value.length===0?[]:r(l.value,c.value)),h=async y=>{if(!o.value.trim()||l.value.length===0){alert("Please enter a tab name and select at least one teacher");return}if(i.value.length>=u){alert(`Maximum of ${u} custom tabs allowed`);return}try{const b=r(l.value,c.value),E=await n(o.value.trim(),b,l.value,y,c.value),x={id:Date.now().toString(),name:o.value.trim(),teachers:[...l.value],studentCount:E.rowCount,sheetId:E.sheetId};i.value.push(x),g(),console.log("Custom tab added:",x),alert(`Custom tab "${x.name}" created successfully with ${E.rowCount} student entries!`)}catch(b){console.error("Failed to create custom tab:",b),alert("Failed to create custom tab in Google Sheet. Please try again.")}},p=async y=>{const b=i.value.find(E=>E.id===y);if(b&&confirm(`Are you sure you want to remove the "${b.name}" tab?`))try{b.sheetId&&await s(b.sheetId),i.value=i.value.filter(E=>E.id!==y),console.log("Custom tab removed:",y),alert(`Tab "${b.name}" removed successfully.`)}catch(E){console.error("Failed to delete custom tab:",E),alert("Failed to delete tab from Google Sheet. You may need to delete it manually."),i.value=i.value.filter(x=>x.id!==y)}},g=()=>{o.value="",l.value=[],c.value=[],a.value=!1};return{customTabs:i,showAddTabForm:a,newTabName:o,selectedTeachers:l,selectedExcludedPeriods:c,maxCustomTabs:u,filteredStudentsPreview:f,addCustomTab:h,removeCustomTab:p,resetForm:g,toggleAddTabForm:()=>{a.value=!a.value,a.value||g()}}}const Zde={class:"sheets-section"},efe={key:0,class:"linked-sheet-status"},tfe={class:"status-card success"},rfe={class:"sync-info"},nfe={key:0},sfe={key:1,class:"syncing"},afe={key:2,class:"success"},ife={key:3,class:"error"},ofe={class:"sheet-actions"},lfe=["disabled"],cfe={key:1,class:"create-sheet-section"},ufe={class:"alternative-options"},dfe={class:"button-group"},ffe={__name:"GoogleSheetsConnector",props:{linkedSheetId:String,lastSyncTime:[String,Date],syncStatus:String,syncMessage:String},emits:["openGoogleSheet","syncNow","unlinkSheet","createLinkedGoogleSheet","createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){const e=r=>new Date(r).toLocaleString();return(r,n)=>(B(),U("div",Zde,[n[12]||(n[12]=d("h4",null,"Google Sheets Integration",-1)),t.linkedSheetId?(B(),U("div",efe,[d("div",tfe,[n[7]||(n[7]=d("h5",null," Linked Google Sheet",-1)),n[8]||(n[8]=d("p",null,"Your student data is synced to Google Sheets",-1)),d("button",{onClick:n[0]||(n[0]=s=>r.$emit("openGoogleSheet")),class:"sheet-link"}," Open Google Sheet  "),d("div",rfe,[t.lastSyncTime?(B(),U("span",nfe,"Last synced: "+X(e(t.lastSyncTime)),1)):ve("",!0),t.syncStatus==="syncing"?(B(),U("span",sfe," Syncing...")):t.syncStatus==="success"?(B(),U("span",afe," Synced")):t.syncStatus==="error"?(B(),U("span",ife," "+X(t.syncMessage),1)):ve("",!0)]),n[9]||(n[9]=d("div",{class:"auto-sync-info"},[d("span",{class:"auto-sync-badge"},[d("span",{class:"pulse"}),we(" Auto-sync enabled ")]),d("p",{class:"auto-sync-description"}," Changes to student data, accommodations, and services are automatically synced to your Google Sheet. ")],-1)),d("div",ofe,[d("button",{onClick:n[1]||(n[1]=s=>r.$emit("syncNow")),disabled:t.syncStatus==="syncing",class:"btn-sync"}," Sync Now ",8,lfe),d("button",{onClick:n[2]||(n[2]=s=>r.$emit("unlinkSheet")),class:"btn-unlink"}," Unlink Sheet ")])])])):(B(),U("div",cfe,[n[10]||(n[10]=Dn('<h5 data-v-ec72cef0>Create a Linked Google Sheet</h5><p data-v-ec72cef0>Link your student data to a Google Sheet that automatically updates when changes are made.</p><div class="features-list" data-v-ec72cef0><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Auto-syncs when students are added or updated</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Updates accommodations and services in real-time</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Maintains a live connection to your data</span></div></div>',3)),d("button",{onClick:n[3]||(n[3]=s=>r.$emit("createLinkedGoogleSheet")),class:"btn-primary"},"  Create & Link Google Sheet ")])),d("div",ufe,[n[11]||(n[11]=d("h5",null,"Other Export Options",-1)),d("div",dfe,[d("button",{onClick:n[4]||(n[4]=s=>r.$emit("createGoogleSheetWithData")),class:"btn-secondary"},"  Create Google Sheet with Data (One-time) "),d("button",{onClick:n[5]||(n[5]=s=>r.$emit("createBlankGoogleSheet")),class:"btn-secondary"},"  Create Blank Google Sheet "),d("button",{onClick:n[6]||(n[6]=s=>r.$emit("exportToCSV")),class:"btn-secondary"},"  Export to CSV Only ")])])]))}},hfe=bt(ffe,[["__scopeId","data-v-ec72cef0"]]),pfe={class:"preview-section"},mfe={class:"preview-table"},gfe={key:0},vfe={key:0},yfe={key:0,class:"preview-note"},$g=5,xfe={__name:"StudentPreview",props:{filteredStudents:{type:Array,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},setup(t){const e=t,r=be(()=>e.filteredStudents.slice(0,$g)),n=a=>{const o=it(a,"firstName")||"",l=it(a,"lastName")||"";return`${o} ${l}`.trim()},s=a=>it(a,"grade")||"",i=a=>e.getStudentTeacherPeriods(a,e.selectedTeachers,e.selectedExcludedPeriods);return(a,o)=>(B(),U("div",pfe,[d("h6",null,"Preview ("+X(t.filteredStudents.length)+" students)",1),d("div",mfe,[d("table",null,[o[0]||(o[0]=d("thead",null,[d("tr",null,[d("th",null,"Name"),d("th",null,"Grade"),d("th",null,"Period"),d("th",null,"Teacher")])],-1)),d("tbody",null,[(B(!0),U(Pe,null,He(r.value,l=>(B(),U("tr",{key:l.id},[d("td",null,X(n(l)),1),d("td",null,X(s(l)),1),d("td",null,[(B(!0),U(Pe,null,He(i(l),(c,u)=>(B(),U("span",{key:u},[we(X(c.period),1),u<i(l).length-1?(B(),U("span",gfe,", ")):ve("",!0)]))),128))]),d("td",null,[(B(!0),U(Pe,null,He(i(l),(c,u)=>(B(),U("span",{key:u},[we(X(c.teacherName),1),u<i(l).length-1?(B(),U("span",vfe,", ")):ve("",!0)]))),128))])]))),128))])]),t.filteredStudents.length>$g?(B(),U("p",yfe," ... and "+X(t.filteredStudents.length-$g)+" more students ",1)):ve("",!0)])]))}},Efe=bt(xfe,[["__scopeId","data-v-936b1ce9"]]),_fe={class:"custom-tabs-config"},bfe={class:"add-tab-controls"},Sfe=["disabled"],Afe={key:0,class:"max-tabs-warning"},Tfe={key:0,class:"add-tab-form"},wfe={class:"form-group"},Cfe=["value"],kfe={class:"form-group"},Ife={class:"teacher-checkboxes"},Dfe=["value","checked","onChange"],Pfe={class:"form-group"},Rfe={class:"period-checkboxes"},Ffe=["value","checked","onChange"],Nfe={class:"form-actions"},Ofe={key:1,class:"existing-tabs"},Mfe={class:"tab-teachers"},Lfe=["onClick"],Bfe={__name:"CustomTabManager",props:{customTabs:{type:Array,required:!0},showAddTabForm:{type:Boolean,required:!0},newTabName:{type:String,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},maxCustomTabs:{type:Number,required:!0},availableTeachers:{type:Array,required:!0},availablePeriods:{type:Array,required:!0},filteredStudentsPreview:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},emits:["toggleAddTabForm","update:newTabName","updateSelectedTeachers","updateSelectedExcludedPeriods","addCustomTab","removeCustomTab","resetForm"],setup(t){return(e,r)=>(B(),U("div",_fe,[r[8]||(r[8]=d("h5",null,"Custom Teacher Tabs",-1)),r[9]||(r[9]=d("p",null,"Create custom tabs with data filtered by specific teachers",-1)),d("div",bfe,[d("button",{onClick:r[0]||(r[0]=n=>e.$emit("toggleAddTabForm")),disabled:t.customTabs.length>=t.maxCustomTabs,class:"btn-primary"}," + Add Custom Tab ",8,Sfe),t.customTabs.length>=t.maxCustomTabs?(B(),U("span",Afe," Maximum of "+X(t.maxCustomTabs)+" custom tabs allowed ",1)):ve("",!0)]),t.showAddTabForm?(B(),U("div",Tfe,[d("div",wfe,[r[4]||(r[4]=d("label",null,"Tab Name",-1)),d("input",{value:t.newTabName,onInput:r[1]||(r[1]=n=>e.$emit("update:newTabName",n.target.value)),type:"text",class:"form-input",placeholder:"e.g., Math Teachers",maxlength:"30"},null,40,Cfe)]),d("div",kfe,[r[5]||(r[5]=d("label",null,"Select Teachers",-1)),d("div",Ife,[(B(!0),U(Pe,null,He(t.availableTeachers,n=>(B(),U("label",{key:n.id,class:"checkbox-label"},[d("input",{type:"checkbox",value:n.id,checked:t.selectedTeachers.includes(n.id),onChange:s=>e.$emit("updateSelectedTeachers",n.id,s.target.checked)},null,40,Dfe),we(" "+X(n.name),1)]))),128))])]),d("div",Pfe,[r[6]||(r[6]=d("label",null,"Exclude Periods (Optional)",-1)),d("div",Rfe,[(B(!0),U(Pe,null,He(t.availablePeriods,n=>(B(),U("label",{key:n.value,class:"checkbox-label"},[d("input",{type:"checkbox",value:n.value,checked:t.selectedExcludedPeriods.includes(n.value),onChange:s=>e.$emit("updateSelectedExcludedPeriods",n.value,s.target.checked)},null,40,Ffe),we(" "+X(n.label),1)]))),128))])]),t.selectedTeachers.length>0?(B(),Qt(Efe,{key:0,"filtered-students":t.filteredStudentsPreview,"selected-teachers":t.selectedTeachers,"selected-excluded-periods":t.selectedExcludedPeriods,"get-student-teacher-periods":t.getStudentTeacherPeriods},null,8,["filtered-students","selected-teachers","selected-excluded-periods","get-student-teacher-periods"])):ve("",!0),d("div",Nfe,[d("button",{onClick:r[2]||(r[2]=n=>e.$emit("addCustomTab")),class:"btn-primary"}," Create Tab "),d("button",{onClick:r[3]||(r[3]=n=>e.$emit("resetForm")),class:"btn-secondary"}," Cancel ")])])):ve("",!0),t.customTabs.length>0?(B(),U("div",Ofe,[r[7]||(r[7]=d("h6",null,"Current Custom Tabs",-1)),(B(!0),U(Pe,null,He(t.customTabs,n=>(B(),U("div",{key:n.id,class:"tab-item"},[d("div",null,[d("strong",null,X(n.name),1),d("span",Mfe,X(n.teachers.length)+" teacher(s), "+X(n.studentCount)+" students ",1)]),d("button",{onClick:s=>e.$emit("removeCustomTab",n.id),class:"btn-danger btn-small"}," Remove ",8,Lfe)]))),128))])):ve("",!0)]))}},Ufe=bt(Bfe,[["__scopeId","data-v-236484db"]]),$fe={class:"export-options-section"},Vfe={class:"export-grid"},Hfe={class:"export-card"},jfe={class:"export-card"},Gfe={class:"export-card"},Wfe={__name:"TestingExportOptions",emits:["createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){return(e,r)=>(B(),U("div",$fe,[r[12]||(r[12]=d("h4",null,"Export Options",-1)),r[13]||(r[13]=d("p",null,"Additional ways to export and work with your student data",-1)),d("div",Vfe,[d("div",Hfe,[r[3]||(r[3]=d("div",{class:"export-icon"},"",-1)),r[4]||(r[4]=d("h5",null,"Google Sheets with Data",-1)),r[5]||(r[5]=d("p",null,"Create a new Google Sheet and populate it with current student data (one-time export)",-1)),d("button",{onClick:r[0]||(r[0]=n=>e.$emit("createGoogleSheetWithData")),class:"btn-primary"}," Create Sheet with Data ")]),d("div",jfe,[r[6]||(r[6]=d("div",{class:"export-icon"},"",-1)),r[7]||(r[7]=d("h5",null,"Blank Google Sheet",-1)),r[8]||(r[8]=d("p",null,"Create a new blank Google Sheet that you can customize yourself",-1)),d("button",{onClick:r[1]||(r[1]=n=>e.$emit("createBlankGoogleSheet")),class:"btn-primary"}," Create Blank Sheet ")]),d("div",Gfe,[r[9]||(r[9]=d("div",{class:"export-icon"},"",-1)),r[10]||(r[10]=d("h5",null,"CSV Export",-1)),r[11]||(r[11]=d("p",null,"Download student data as a CSV file for use in Excel or other applications",-1)),d("button",{onClick:r[2]||(r[2]=n=>e.$emit("exportToCSV")),class:"btn-primary"}," Download CSV ")])]),r[14]||(r[14]=d("div",{class:"export-info"},[d("h5",null,"Export Information"),d("ul",null,[d("li",null,[d("strong",null,"Linked Sheets:"),we(" Automatically sync when data changes")]),d("li",null,[d("strong",null,"One-time Exports:"),we(" Snapshot of data at export time")]),d("li",null,[d("strong",null,"CSV Files:"),we(" Compatible with Excel, Numbers, and other spreadsheet apps")])])],-1))]))}},zfe=bt(Wfe,[["__scopeId","data-v-3bc6896f"]]),Kfe={class:"testing-links-container"},qfe={__name:"TestingLinks",setup(t){const{students:e,fetchStudents:r}=Ii(),{userList:n,fetchUsers:s}=_a(),{appSettings:i,loadAppSettings:a}=Os(),o=Xde(e,n,i),{availablePeriods:l,availableTeachers:c,getStudentTeacherPeriods:u}=o,f=Qde(e,n,o),{linkedSheetId:h,lastSyncTime:p,syncStatus:g,syncMessage:v,initializeIntegration:y,createLinkedGoogleSheet:b,syncNow:E,openGoogleSheet:x,unlinkSheet:w,createGoogleSheetWithData:R,createBlankGoogleSheet:P,exportToCSV:S,cleanupAutoSync:_}=f,m=Jde(o,f),{customTabs:A,showAddTabForm:k,newTabName:I,selectedTeachers:C,selectedExcludedPeriods:M,maxCustomTabs:D,filteredStudentsPreview:F,addCustomTab:N,removeCustomTab:L,resetForm:O,toggleAddTabForm:z}=m,H=(G,re)=>{if(re)C.value.includes(G)||C.value.push(G);else{const de=C.value.indexOf(G);de>-1&&C.value.splice(de,1)}},V=(G,re)=>{if(re)M.value.includes(G)||M.value.push(G);else{const de=M.value.indexOf(G);de>-1&&M.value.splice(de,1)}},W=async()=>{await N(n.value)};return Gt(async()=>{try{await Promise.all([r(),s(),a()]),console.log("Students loaded:",e.value.length),console.log("Users loaded:",n.value.length),console.log("App settings loaded:",i.value),await y()}catch(G){console.error("Failed to initialize TestingLinks:",G)}}),Ha(()=>{_()}),(G,re)=>(B(),U("div",Kfe,[re[1]||(re[1]=d("h3",null,"Testing Links & Google Sheets Integration",-1)),Re(hfe,{"linked-sheet-id":K(h),"last-sync-time":K(p),"sync-status":K(g),"sync-message":K(v),onOpenGoogleSheet:K(x),onSyncNow:K(E),onUnlinkSheet:K(w),onCreateLinkedGoogleSheet:K(b),onCreateGoogleSheetWithData:K(R),onCreateBlankGoogleSheet:K(P),onExportToCsv:K(S)},null,8,["linked-sheet-id","last-sync-time","sync-status","sync-message","onOpenGoogleSheet","onSyncNow","onUnlinkSheet","onCreateLinkedGoogleSheet","onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"]),K(h)?(B(),Qt(Ufe,{key:0,"custom-tabs":K(A),"show-add-tab-form":K(k),"new-tab-name":K(I),"selected-teachers":K(C),"selected-excluded-periods":K(M),"max-custom-tabs":K(D),"available-teachers":K(c),"available-periods":K(l),"filtered-students-preview":K(F),"get-student-teacher-periods":K(u),onToggleAddTabForm:K(z),"onUpdate:newTabName":re[0]||(re[0]=de=>I.value=de),onUpdateSelectedTeachers:H,onUpdateSelectedExcludedPeriods:V,onAddCustomTab:W,onRemoveCustomTab:K(L),onResetForm:K(O)},null,8,["custom-tabs","show-add-tab-form","new-tab-name","selected-teachers","selected-excluded-periods","max-custom-tabs","available-teachers","available-periods","filtered-students-preview","get-student-teacher-periods","onToggleAddTabForm","onRemoveCustomTab","onResetForm"])):ve("",!0),Re(zfe,{onCreateGoogleSheetWithData:K(R),onCreateBlankGoogleSheet:K(P),onExportToCsv:K(S)},null,8,["onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"])]))}},Xfe=bt(qfe,[["__scopeId","data-v-8d441fb1"]]),Yfe={class:"admin-dashboard"},Qfe={class:"stats-grid"},Jfe={class:"stat-card primary"},Zfe={class:"stat-icon"},e0e={class:"stat-content"},t0e={class:"stat-card iep"},r0e={class:"stat-icon"},n0e={class:"stat-content"},s0e={class:"stat-card plan-504"},a0e={class:"stat-icon"},i0e={class:"stat-content"},o0e={class:"stat-card users"},l0e={class:"stat-icon"},c0e={class:"stat-content"},u0e={class:"role-breakdown"},d0e={class:"role-stats-grid"},f0e={class:"role-icon"},h0e={class:"role-info"},p0e={class:"role-count"},m0e={class:"role-name"},g0e={class:"categories-grid"},v0e={class:"category-card"},y0e={class:"category-header"},x0e={class:"category-content"},E0e={class:"feature-list"},_0e={class:"feature-item"},b0e={class:"feature-icon"},S0e={class:"feature-item"},A0e={class:"feature-icon"},T0e={class:"feature-item"},w0e={class:"feature-icon"},C0e={class:"category-card"},k0e={class:"category-header"},I0e={class:"category-content"},D0e={class:"feature-list"},P0e={class:"feature-item"},R0e={class:"feature-icon"},F0e={class:"feature-item"},N0e={class:"feature-icon"},O0e={class:"feature-item"},M0e={class:"feature-icon"},L0e={class:"category-card"},B0e={class:"category-header"},U0e={class:"category-content"},$0e={class:"feature-list"},V0e={class:"feature-item"},H0e={class:"feature-icon"},j0e={class:"feature-item"},G0e={class:"feature-icon"},W0e={class:"feature-item"},z0e={class:"feature-icon"},K0e={class:"feature-item"},q0e={class:"feature-icon"},X0e={class:"feature-item"},Y0e={class:"feature-icon"},Q0e={class:"category-card"},J0e={class:"category-header"},Z0e={class:"category-content"},ehe={class:"feature-list"},the={class:"feature-item"},rhe={class:"feature-icon"},nhe={class:"feature-item"},she={class:"feature-icon"},ahe={class:"feature-item"},ihe={class:"feature-icon"},ohe={class:"system-status"},lhe={class:"status-grid"},che={class:"status-card"},uhe={class:"sync-status"},dhe={class:"sync-item"},fhe={key:0,class:"sync-time"},hhe={class:"sync-item"},phe={class:"sync-time"},mhe={class:"status-card"},ghe={class:"user-activity"},vhe={class:"activity-item"},yhe={class:"activity-count"},xhe={class:"activity-item"},Ehe={class:"activity-count"},_he={class:"status-card"},bhe={class:"health-indicators"},She={class:"health-item"},Ahe={class:"health-status healthy"},The={class:"health-item"},whe={class:"health-status healthy"},Che={class:"quick-actions"},khe={class:"actions-grid"},Ihe={__name:"AdminDashboard",emits:["goToCategory","goToStudents"],setup(t){const{students:e,fetchStudents:r}=Ii(),{userList:n,fetchUsers:s}=_a(),{linkedSheetId:i,lastSyncTime:a}=Vx(),o=se(12),l=se(8),c=se(!0),u=se("Connected"),f=be(()=>{var E;return((E=e.value)==null?void 0:E.length)||0}),h=be(()=>{var E;return((E=n.value)==null?void 0:E.length)||0}),p=be(()=>{var E;return((E=e.value)==null?void 0:E.filter(x=>{var R,P;return(((P=(R=x.app)==null?void 0:R.studentData)==null?void 0:P.plan)||x.plan||"").toLowerCase()==="iep"}).length)||0}),g=be(()=>{var E;return((E=e.value)==null?void 0:E.filter(x=>{var R,P;return(((P=(R=x.app)==null?void 0:R.studentData)==null?void 0:P.plan)||x.plan||"")==="504"}).length)||0}),v=be(()=>{var w;const E={};(w=n.value)==null||w.forEach(R=>{const P=R.role||"unknown";E[P]||(E[P]=0),E[P]++});const x={admin:{name:"Administrators",icon:Hv},school_admin:{name:"School Admins",icon:v7},teacher:{name:"Teachers",icon:QB},case_manager:{name:"Case Managers",icon:R0},paraeducator:{name:"Paraeducators",icon:Pm},service_provider:{name:"Service Providers",icon:fk},sped_chair:{name:"SPED Chairs",icon:JB},admin_504:{name:"504 Admins",icon:Vv},staff_view:{name:"Staff (View)",icon:ql},staff_edit:{name:"Staff (Edit)",icon:jv}};return Object.entries(E).map(([R,P])=>{var S,_;return{name:((S=x[R])==null?void 0:S.name)||R.replace("_"," ").toUpperCase(),count:P,icon:((_=x[R])==null?void 0:_.icon)||ql}}).sort((R,P)=>P.count-R.count).slice(0,8)});be(()=>i.value?1:0);const y=be(()=>!!i.value),b=E=>E?new Date(E).toLocaleString():"Never";return Gt(async()=>{try{await Promise.all([r(),s()])}catch(E){console.error("Error loading dashboard data:",E)}}),(E,x)=>(B(),U("div",Yfe,[d("div",Qfe,[d("div",Jfe,[d("div",Zfe,[Re(K(ql),{size:32})]),d("div",e0e,[d("h3",null,X(f.value),1),x[8]||(x[8]=d("p",null,"Total Students",-1))])]),d("div",t0e,[d("div",r0e,[Re(K(Yu),{size:32})]),d("div",n0e,[d("h3",null,X(p.value),1),x[9]||(x[9]=d("p",null,"IEP Students",-1))])]),d("div",s0e,[d("div",a0e,[Re(K(Vv),{size:32})]),d("div",i0e,[d("h3",null,X(g.value),1),x[10]||(x[10]=d("p",null,"504 Plan Students",-1))])]),d("div",o0e,[d("div",l0e,[Re(K(R0),{size:32})]),d("div",c0e,[d("h3",null,X(h.value),1),x[11]||(x[11]=d("p",null,"System Users",-1))])])]),d("div",u0e,[d("h2",null,[Re(K(hk),{size:20}),x[12]||(x[12]=we(" Staff Role Distribution"))]),d("div",d0e,[(B(!0),U(Pe,null,He(v.value,w=>(B(),U("div",{class:"role-stat",key:w.name},[d("div",f0e,[(B(),Qt(k1(w.icon),{size:24}))]),d("div",h0e,[d("span",p0e,X(w.count),1),d("span",m0e,X(w.name),1)])]))),128))])]),d("div",g0e,[d("div",v0e,[d("div",y0e,[d("h2",null,[Re(K(ql),{size:18}),x[13]||(x[13]=we(" User & Student Management"))]),d("button",{onClick:x[0]||(x[0]=w=>E.$emit("goToCategory","users-students")),class:"category-btn"},[Re(K(qf),{size:16}),x[14]||(x[14]=we(" Manage "))])]),d("div",x0e,[d("div",E0e,[d("div",_0e,[d("div",b0e,[Re(K(pk),{size:18})]),x[15]||(x[15]=d("div",null,[d("h4",null,"Add Users"),d("p",null,"Create new user accounts with role assignments")],-1))]),d("div",S0e,[d("div",A0e,[Re(K(jv),{size:18})]),x[16]||(x[16]=d("div",null,[d("h4",null,"Manage Users"),d("p",null,"Edit existing users, roles, and permissions")],-1))]),d("div",T0e,[d("div",w0e,[Re(K(i7),{size:18})]),x[17]||(x[17]=d("div",null,[d("h4",null,"Student Administration"),d("p",null,"Comprehensive student data management")],-1))])])])]),d("div",C0e,[d("div",k0e,[d("h2",null,[Re(K(Pm),{size:18}),x[18]||(x[18]=we(" Paraeducator Management"))]),d("button",{onClick:x[1]||(x[1]=w=>E.$emit("goToCategory","aide-management")),class:"category-btn"},[Re(K(qf),{size:16}),x[19]||(x[19]=we(" Manage "))])]),d("div",I0e,[d("div",D0e,[d("div",P0e,[d("div",R0e,[Re(K(t7),{size:18})]),x[20]||(x[20]=d("div",null,[d("h4",null,"Aide Assignment"),d("p",null,"Assign paraeducators to students and periods")],-1))]),d("div",F0e,[d("div",N0e,[Re(K(ZB),{size:18})]),x[21]||(x[21]=d("div",null,[d("h4",null,"Aide Schedule"),d("p",null,"Manage paraeducator schedules and assignments")],-1))]),d("div",O0e,[d("div",M0e,[Re(K(lk),{size:18})]),x[22]||(x[22]=d("div",null,[d("h4",null,"Time Table"),d("p",null,"Configure school periods and time slots")],-1))])])])]),d("div",L0e,[d("div",B0e,[d("h2",null,[Re(K(K_),{size:18}),x[23]||(x[23]=we(" Data & Integration"))]),d("button",{onClick:x[2]||(x[2]=w=>E.$emit("goToCategory","data-integration")),class:"category-btn"},[Re(K(qf),{size:16}),x[24]||(x[24]=we(" Manage "))])]),d("div",U0e,[d("div",$0e,[d("div",V0e,[d("div",H0e,[Re(K(n7),{size:18})]),x[25]||(x[25]=d("div",null,[d("h4",null,"SEIS Import"),d("p",null,"Import student data from SEIS system")],-1))]),d("div",j0e,[d("div",G0e,[Re(K(c7),{size:18})]),x[26]||(x[26]=d("div",null,[d("h4",null,"Aeries API & Import"),d("p",null,"Connect to Aeries SIS for data synchronization")],-1))]),d("div",W0e,[d("div",z0e,[Re(K(x7),{size:18})]),x[27]||(x[27]=d("div",null,[d("h4",null,"Testing Links"),d("p",null,"Google Sheets integration and export tools")],-1))]),d("div",K0e,[d("div",q0e,[Re(K(ck),{size:18})]),x[28]||(x[28]=d("div",null,[d("h4",null,"Teacher Feedback"),d("p",null,"Manage teacher feedback forms and responses")],-1))]),d("div",X0e,[d("div",Y0e,[Re(K(o7),{size:18})]),x[29]||(x[29]=d("div",null,[d("h4",null,"Backup & Restore"),d("p",null,"System backup and data restoration tools")],-1))])])])]),d("div",Q0e,[d("div",J0e,[d("h2",null,[Re(K(dk),{size:18}),x[30]||(x[30]=we(" System Configuration"))]),d("button",{onClick:x[3]||(x[3]=w=>E.$emit("goToCategory","system-config")),class:"category-btn"},[Re(K(qf),{size:16}),x[31]||(x[31]=we(" Manage "))])]),d("div",Z0e,[d("div",ehe,[d("div",the,[d("div",rhe,[Re(K(Hv),{size:18})]),x[32]||(x[32]=d("div",null,[d("h4",null,"Permissions"),d("p",null,"Role-based access control and permissions matrix")],-1))]),d("div",nhe,[d("div",she,[Re(K(S7),{size:18})]),x[33]||(x[33]=d("div",null,[d("h4",null,"App Settings"),d("p",null,"Configure application settings and preferences")],-1))]),d("div",ahe,[d("div",ihe,[Re(K(p7),{size:18})]),x[34]||(x[34]=d("div",null,[d("h4",null,"Theme Customization"),d("p",null,"Customize student page appearance and colors")],-1))])])])])]),d("div",ohe,[d("h2",null,[Re(K(E7),{size:20}),x[35]||(x[35]=we(" System Status"))]),d("div",lhe,[d("div",che,[d("h3",null,[Re(K(g7),{size:18}),x[36]||(x[36]=we(" Data Sync Status"))]),d("div",uhe,[d("div",dhe,[d("span",{class:Ye(["sync-indicator",{active:y.value}])},null,2),x[37]||(x[37]=d("span",null,"Google Sheets",-1)),K(a)?(B(),U("span",fhe,X(b(K(a))),1)):ve("",!0)]),d("div",hhe,[d("span",{class:Ye(["sync-indicator",{active:c.value}])},null,2),x[38]||(x[38]=d("span",null,"Aeries SIS",-1)),d("span",phe,X(u.value),1)])])]),d("div",mhe,[d("h3",null,[Re(K(XB),{size:18}),x[39]||(x[39]=we(" User Activity"))]),d("div",ghe,[d("div",vhe,[x[40]||(x[40]=d("span",null,"Active Users Today",-1)),d("span",yhe,X(o.value),1)]),d("div",xhe,[x[41]||(x[41]=d("span",null,"Recent Logins",-1)),d("span",Ehe,X(l.value),1)])])]),d("div",_he,[d("h3",null,[Re(K(h7),{size:18}),x[42]||(x[42]=we(" System Health"))]),d("div",bhe,[d("div",She,[x[44]||(x[44]=d("span",null,"Database",-1)),d("span",Ahe,[Re(K(Sh),{size:16}),x[43]||(x[43]=we(" Healthy "))])]),d("div",The,[x[46]||(x[46]=d("span",null,"Functions",-1)),d("span",whe,[Re(K(Sh),{size:16}),x[45]||(x[45]=we(" Operational "))])])])])])]),d("div",Che,[d("h2",null,[Re(K(A7),{size:20}),x[47]||(x[47]=we(" Quick Actions"))]),d("div",khe,[d("button",{onClick:x[4]||(x[4]=w=>E.$emit("goToStudents")),class:"admin-action-btn primary"},[Re(K(ql),{size:20}),x[48]||(x[48]=d("span",null,"View Students",-1))]),d("button",{onClick:x[5]||(x[5]=w=>E.$emit("goToCategory","users-students")),class:"admin-action-btn success"},[Re(K(R0),{size:20}),x[49]||(x[49]=d("span",null,"Manage Users",-1))]),d("button",{onClick:x[6]||(x[6]=w=>E.$emit("goToCategory","aide-management")),class:"admin-action-btn warning"},[Re(K(Pm),{size:20}),x[50]||(x[50]=d("span",null,"Paraeducators",-1))]),d("button",{onClick:x[7]||(x[7]=w=>E.$emit("goToCategory","data-integration")),class:"admin-action-btn info"},[Re(K(K_),{size:20}),x[51]||(x[51]=d("span",null,"Data & Integration",-1))])])])]))}},Dhe=bt(Ihe,[["__scopeId","data-v-b32b4e32"]]);var Phe={};class Rhe{constructor(){this.encryptionKey="default-dev-key-replace-in-production",this.encryptionEnabled=!0,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled")}setEncryptionEnabled(e){this.encryptionEnabled=e,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled"),e||console.warn(" Warning: Encryption disabled in production environment")}encryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.encryptField(i);this.setNestedValue(n,s,a)}}),n}decryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.decryptField(i);this.setNestedValue(n,s,a)}}),n}encryptField(e){if(!this.encryptionEnabled)return e;try{const r=typeof e=="object"?JSON.stringify(e):String(e);return Xi.AES.encrypt(r,this.encryptionKey).toString()}catch(r){return console.error("Encryption failed:",r),e}}decryptField(e){if(!this.encryptionEnabled)return e;try{const n=Xi.AES.decrypt(e,this.encryptionKey).toString(Xi.enc.Utf8);try{return JSON.parse(n)}catch{return n}}catch(r){return console.error("Decryption failed:",r),e}}getNestedValue(e,r){return r.split(".").reduce((n,s)=>n&&n[s],e)}setNestedValue(e,r,n){const s=r.split("."),i=s.pop(),a=s.reduce((o,l)=>o[l]=o[l]||{},e);return a[i]=n,e}async logAccess(e,r,n){var s,i;try{const a=Ze(At(qe,"iepAccessLogs"));await Ht(a,{studentId:e,userId:(s=dt.currentUser)==null?void 0:s.uid,userEmail:(i=dt.currentUser)==null?void 0:i.email,action:r,fields:n,timestamp:kn(),userAgent:navigator.userAgent,encryptionEnabled:this.encryptionEnabled})}catch(a){console.error("Failed to log access:",a)}}async verifyAccess(e,r="read"){var n,s,i,a,o,l;if(!dt.currentUser)return!1;try{const u=(await nr(Ze(qe,"users",dt.currentUser.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager"){const h=((i=(s=(n=(await nr(Ze(qe,"students",e))).data())==null?void 0:n.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===dt.currentUser.uid;return await this.logAccess(e,`access_attempt_${r}`,{success:h,role:"case_manager"}),h}if(u.role==="teacher"&&r==="read"){const h=((l=(o=(a=(await nr(Ze(qe,"students",e))).data())==null?void 0:a.app)==null?void 0:o.schedule)==null?void 0:l.periods)||{},p=Object.values(h).includes(dt.currentUser.uid);return await this.logAccess(e,`access_attempt_${r}`,{success:p,role:"teacher"}),p}return!1}catch(c){return console.error("Access verification failed:",c),!1}}async getAccessHistory(e){try{const r=or(At(qe,"iepAccessLogs"),Ur("studentId","==",e),Ur("timestamp",">=",new Date(Date.now()-2592e6)));return(await Wt(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Failed to fetch access history:",r),[]}}maskSensitiveData(e){var n,s,i;const r=JSON.parse(JSON.stringify(e));return(n=r.app)!=null&&n.accommodations&&(r.app.accommodations={assessment:"[RESTRICTED]",instruction:"[RESTRICTED]"}),(i=(s=r.app)==null?void 0:s.schedule)!=null&&i.classServices&&(r.app.schedule.classServices=["[RESTRICTED]"]),r}isEncryptionEnabled(){return this.encryptionEnabled}isValueEncrypted(e){try{return typeof e!="string"?!1:(Xi.AES.decrypt(e,this.encryptionKey).toString(Xi.enc.Utf8),!0)}catch{return!1}}encryptGmailPassword(e){return this.encryptionEnabled?this.encryptField(e):(console.warn(" Warning: Encryption is disabled"),e)}decryptGmailPassword(e){return this.encryptionEnabled?this.decryptField(e):e}getEncryptionStatus(){const e="true",r=e!==void 0;return{enabled:this.encryptionEnabled,environment:"production",keyAvailable:!!this.encryptionKey,environmentVariable:Phe.VUE_APP_ENABLE_ENCRYPTION,viteEncryptionValue:r?e:null,isViteSet:r,viteEncryptionEnabled:this.encryptionEnabled}}}const v0=new Rhe,Fhe={class:"debug-encryption"},Nhe={class:"debug-header"},Ohe={class:"encryption-status"},Mhe={class:"status-row"},Lhe={class:"encryption-toggle"},Bhe=["checked"],Uhe={key:0,class:"warning"},$he={class:"status-details"},Vhe={class:"status-row"},Hhe={class:"status-value"},jhe={class:"status-row"},Ghe={class:"status-value"},Whe={class:"status-row"},zhe={class:"status-value"},Khe={key:0,class:"env-value-set"},qhe={class:"env-guidance"},Xhe={key:0,class:"dev-guidance"},Yhe={key:1,class:"prod-guidance"},Qhe={key:1,class:"env-value-not-set"},Jhe={class:"status-row"},Zhe={class:"status-value"},epe={key:0,class:"debug-info"},tpe={class:"field-name"},rpe={class:"field-value"},npe={class:"value-preview"},spe={__name:"DebugEncryption",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=t,r=be(()=>v0.getEncryptionStatus()),n=be(()=>v0.isEncryptionEnabled()),s=be(()=>r.value.environment),i=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],a=()=>{v0.setEncryptionEnabled(!n.value)},o=(u,f)=>f.split(".").reduce((h,p)=>h&&h[p],u),l=u=>{if(!e.selectedStudent)return!1;const f=o(e.selectedStudent,u);return f?v0.isValueEncrypted(f):!1},c=u=>{if(!e.selectedStudent)return"No data";const f=o(e.selectedStudent,u);if(!f)return"Empty";if(l(u))return f.substring(0,20)+"...";const h=typeof f=="object"?JSON.stringify(f):String(f);return h.length>40?h.substring(0,40)+"...":h};return(u,f)=>(B(),U("div",Fhe,[d("div",Nhe,[f[0]||(f[0]=d("h3",null," IEP Encryption Control",-1)),d("div",{class:Ye(["environment-badge",s.value])},X(s.value.toUpperCase()),3)]),d("div",Ohe,[d("div",Mhe,[f[1]||(f[1]=d("div",{class:"status-label"},"Status:",-1)),d("div",{class:Ye(["status-value",{enabled:n.value}])},X(n.value?" Enabled":" Disabled"),3)]),d("div",Lhe,[d("label",null,[d("input",{type:"checkbox",checked:n.value,onChange:a},null,40,Bhe),f[2]||(f[2]=we(" Toggle Encryption "))]),s.value==="production"&&!n.value?(B(),U("div",Uhe,"  Warning: Encryption disabled in production ")):ve("",!0)]),d("div",$he,[d("div",Vhe,[f[3]||(f[3]=d("div",{class:"status-label"},"Environment:",-1)),d("div",Hhe,X(s.value),1)]),d("div",jhe,[f[4]||(f[4]=d("div",{class:"status-label"},"Encryption Key:",-1)),d("div",Ghe,X(r.value.keyAvailable?" Available":" Missing"),1)]),d("div",Whe,[f[6]||(f[6]=d("div",{class:"status-label"},"VITE_ENABLE_ENCRYPTION:",-1)),d("div",zhe,[r.value.isViteSet?(B(),U("div",Khe,[d("span",{class:Ye(["env-value",{"true-value":r.value.viteEncryptionValue==="true","false-value":r.value.viteEncryptionValue==="false"}])},X(r.value.viteEncryptionValue),3),d("div",qhe,[r.value.viteEncryptionValue==="true"?(B(),U("span",Xhe," Development mode")):r.value.viteEncryptionValue==="false"?(B(),U("span",Yhe," Production mode")):ve("",!0)])])):(B(),U("div",Qhe,f[5]||(f[5]=[d("span",{class:"not-set"},"Not set",-1),d("div",{class:"env-guidance"},[d("span",{class:"default-guidance"},"Defaults to enabled (secure)")],-1)])))])]),d("div",Jhe,[f[7]||(f[7]=d("div",{class:"status-label"},"Legacy ENV:",-1)),d("div",Zhe,X(r.value.environmentVariable||"Not set"),1)])])]),t.selectedStudent?(B(),U("div",epe,[f[8]||(f[8]=d("h4",null,"Selected Student Data:",-1)),(B(),U(Pe,null,He(i,h=>d("div",{class:"field-status",key:h},[d("div",tpe,X(h)+":",1),d("div",rpe,[d("div",{class:Ye(["encryption-status",{encrypted:l(h)}])},X(l(h)?" Encrypted":" Plain Text"),3),d("div",npe,X(c(h)),1)])])),64))])):ve("",!0)]))}},wD=bt(spe,[["__scopeId","data-v-7902f511"]]),ape={class:"session-debug"},ipe={class:"debug-info"},ope={class:"info-row"},lpe={class:"info-row"},cpe={class:"info-row"},upe={class:"info-row"},dpe={key:0,class:"info-row"},fpe={class:"countdown"},hpe={class:"debug-actions"},ppe={class:"timeout-setter"},mpe={__name:"SessionTimeoutDebug",setup(t){const{isEnabled:e,timeoutMinutes:r,showWarning:n,warningCountdown:s,updateSettings:i,resetTimeout:a}=tx(),o=xn(),l=be(()=>o.currentUser),c=se(!1),u=se(30),f=se(.17);Gt(()=>{c.value=e.value,u.value=r.value});const h=async()=>{!c.value&&!u.value&&(c.value=e.value,u.value=r.value),await i(!0,f.value),setTimeout(()=>{a()},100)},p=async()=>{await i(c.value,u.value),setTimeout(()=>{a()},100)},g=()=>{document.dispatchEvent(new Event("click"))},v=()=>{console.log(" Session Timeout Debug Info:"),console.log("- Enabled:",e.value),console.log("- Timeout Minutes:",r.value),console.log("- Warning Showing:",n.value),console.log("- Warning Countdown:",s.value),console.log("- User Logged In:",!!l.value),console.log("- Current User:",l.value)};return(y,b)=>(B(),U("div",ape,[d("h4",null,[Re(K(Hv),{size:16}),b[1]||(b[1]=we(" Session Timeout Debug"))]),d("div",ipe,[d("div",ope,[b[2]||(b[2]=d("strong",null,"Timeout Enabled:",-1)),d("span",{class:Ye({"status-active":K(e),"status-inactive":!K(e)})},[K(e)?(B(),Qt(K(Sh),{key:0,size:14})):(B(),Qt(K(Dm),{key:1,size:14})),we(" "+X(K(e)?"YES":"NO"),1)],2)]),d("div",lpe,[b[3]||(b[3]=d("strong",null,"Timeout Minutes:",-1)),d("span",null,X(K(r))+" minutes",1)]),d("div",cpe,[b[4]||(b[4]=d("strong",null,"User Logged In:",-1)),d("span",{class:Ye({"status-active":!!l.value,"status-inactive":!l.value})},[l.value?(B(),Qt(K(Sh),{key:0,size:14})):(B(),Qt(K(Dm),{key:1,size:14})),we(" "+X(l.value?"YES":"NO"),1)],2)]),d("div",upe,[b[5]||(b[5]=d("strong",null,"Warning Showing:",-1)),d("span",{class:Ye({"status-warning":K(n),"status-inactive":!K(n)})},[K(n)?(B(),Qt(K(_7),{key:0,size:14})):(B(),Qt(K(Dm),{key:1,size:14})),we(" "+X(K(n)?"YES":"NO"),1)],2)]),K(n)?(B(),U("div",dpe,[b[6]||(b[6]=d("strong",null,"Countdown:",-1)),d("span",fpe,X(K(s))+"s",1)])):ve("",!0)]),d("div",hpe,[d("div",ppe,[d("label",null,[b[8]||(b[8]=we(" Set Test Timeout: ")),Oe(d("select",{"onUpdate:modelValue":b[0]||(b[0]=E=>f.value=E),class:"timeout-select"},b[7]||(b[7]=[Dn('<option value="0.05" data-v-76f71c90>3 seconds</option><option value="0.17" data-v-76f71c90>10 seconds</option><option value="0.5" data-v-76f71c90>30 seconds</option><option value="1" data-v-76f71c90>1 minute</option><option value="2" data-v-76f71c90>2 minutes</option><option value="5" data-v-76f71c90>5 minutes</option>',6)]),512),[[cr,f.value]])]),d("button",{onClick:h,class:"btn btn-warning"}," Apply Test Timeout ")]),d("div",{class:"admin-action-btns"},[d("button",{onClick:g,class:"admin-action-btn",style:{"min-width":"120px","max-width":"120px"}}," Trigger Activity "),d("button",{onClick:v,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Show Console Info "),d("button",{onClick:p,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Reset to Original ")])])]))}},gpe=bt(mpe,[["__scopeId","data-v-76f71c90"]]),vpe={class:"security-control-center"},ype={class:"security-section"},xpe={class:"security-section"},Epe={class:"setting-group"},_pe={key:0,class:"setting-group"},bpe={class:"setting-group"},Spe={class:"setting-group"},Ape={class:"security-section"},Tpe={class:"setting-group"},wpe={key:0,class:"setting-group"},Cpe={key:1,class:"domain-config"},kpe={class:"subsection"},Ipe={class:"domain-list"},Dpe={class:"domain-header"},Ppe={class:"domain-toggle"},Rpe=["onUpdate:modelValue","disabled"],Fpe={class:"domain-name"},Npe={key:0,class:"required-badge"},Ope={key:0,class:"domain-input-row"},Mpe=["onUpdate:modelValue","placeholder","disabled"],Lpe={class:"domain-description"},Bpe={class:"subsection"},Upe={class:"email-exceptions"},$pe=["onUpdate:modelValue"],Vpe=["onUpdate:modelValue"],Hpe={class:"subsection"},jpe={class:"config-summary"},Gpe={key:0,class:"summary-warning"},Wpe={key:1,class:"summary-info"},zpe={key:0},Kpe={class:"domain-summary-list"},qpe={key:1,class:"exceptions-summary"},Xpe={class:"exception-summary-list"},Ype={class:"subsection"},Qpe={class:"test-section"},Jpe={class:"test-input-group"},Zpe=["disabled"],eme={key:2,class:"domain-disabled-info"},tme={class:"security-section"},rme={class:"setting-group"},nme={class:"setting-group"},sme={class:"security-section"},ame={class:"ip-list"},ime={class:"ip-input"},ome={key:0,class:"ip-table"},lme=["onClick"],cme={key:1,class:"no-ips"},ume={class:"security-section"},dme={class:"alert-settings"},fme={class:"setting-group"},hme={class:"setting-group"},pme={class:"alert-emails"},mme={class:"email-input"},gme={key:0,class:"email-list"},vme=["onClick"],yme={__name:"SecurityControlCenter",props:{selectedStudent:{type:Object,default:null}},setup(t){const{securitySettings:e,loadSecuritySettings:r,saveSecuritySettings:n,getEnabledDomains:s,getEmailExceptions:i,isEmailAllowed:a}=wk(),o=se(""),l=se(null),{isEnabled:c,timeoutMinutes:u,updateSettings:f}=tx(),h=se(!1),p=se(!1),g=se(!0),v=se(!0),y=se([]),b=se(""),E=se({unusualAccess:!0,bulkExport:!0}),x=se([]),w=se(""),R=be(()=>s()),P=be(()=>i()),S=async()=>{try{await n(),console.log(" Domain settings saved")}catch(z){console.error(" Failed to save domain settings:",z)}},_=()=>{if(!o.value){l.value=null;return}const z=o.value.trim();if(a(z))l.value={valid:!0,message:" This email would be accepted for login."};else{const V=R.value,W=P.value;let G=" This email would be rejected.";if(V.length>0||W.length>0){G+=" Allowed: ";const re=[];V.length>0&&re.push(`domains: ${V.join(", ")}`),W.length>0&&re.push(`exceptions: ${W.join(", ")}`),G+=re.join("; ")}l.value={valid:!1,message:G}}},m=async()=>{try{await f(c.value,u.value)}catch(z){console.error("Failed to toggle session timeout:",z)}},A=async()=>{try{await f(c.value,u.value)}catch(z){console.error("Failed to update session timeout:",z)}},k=()=>{console.log("Password policy updated:",h.value)},I=()=>{console.log("MFA policy updated:",p.value)},C=()=>{console.log("Export policy updated:",g.value)},M=()=>{console.log("PDF policy updated:",v.value)},D=()=>{b.value&&!y.value.includes(b.value)&&(y.value.push(b.value),b.value="")},F=z=>{y.value=y.value.filter(H=>H!==z)},N=()=>{console.log("Alert settings updated:",E.value)},L=()=>{w.value&&!x.value.includes(w.value)&&(x.value.push(w.value),w.value="")},O=z=>{x.value=x.value.filter(H=>H!==z)};return Gt(async()=>{await r()}),(z,H)=>(B(),U("div",vpe,[d("div",ype,[H[13]||(H[13]=d("h3",null," IEP Data Encryption",-1)),Re(wD,{"selected-student":t.selectedStudent},null,8,["selected-student"])]),d("div",xpe,[H[20]||(H[20]=d("h3",null," Session Security",-1)),Re(gpe),d("div",Epe,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":H[0]||(H[0]=V=>Cr(c)?c.value=V:null),onChange:m},null,544),[[yt,K(c)]]),H[14]||(H[14]=we(" Enable Auto Logout Timer "))]),H[15]||(H[15]=d("div",{class:"setting-description"}," Automatically log out users after a period of inactivity ",-1))]),K(c)?(B(),U("div",_pe,[d("label",null,[H[16]||(H[16]=we(" Auto Logout Timer (minutes): ")),Oe(d("input",{type:"number","onUpdate:modelValue":H[1]||(H[1]=V=>Cr(u)?u.value=V:null),min:"5",max:"120",onChange:A},null,544),[[ft,K(u)]])]),H[17]||(H[17]=d("div",{class:"setting-description"}," Users will be automatically logged out after this period of inactivity ",-1))])):ve("",!0),d("div",bpe,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":H[2]||(H[2]=V=>h.value=V),onChange:k},null,544),[[yt,h.value]]),H[18]||(H[18]=we(" Enforce Password Change Every 90 Days "))])]),d("div",Spe,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":H[3]||(H[3]=V=>p.value=V),onChange:I},null,544),[[yt,p.value]]),H[19]||(H[19]=we(" Require Two-Factor Authentication for Admin Access "))])])]),d("div",Ape,[H[33]||(H[33]=d("h3",null," Login Domain Validation",-1)),d("div",Tpe,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":H[4]||(H[4]=V=>K(e).domainValidation.enabled=V),onChange:S},null,544),[[yt,K(e).domainValidation.enabled]]),H[21]||(H[21]=we(" Enable domain validation for login "))]),H[22]||(H[22]=d("div",{class:"setting-description"}," When enabled, only users with approved email domains can sign in. This prevents personal accounts from accessing student data. ",-1))]),K(e).domainValidation.enabled?(B(),U("div",wpe,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":H[5]||(H[5]=V=>K(e).domainValidation.controlledByCloudDomain=V),onChange:S},null,544),[[yt,K(e).domainValidation.controlledByCloudDomain]]),H[23]||(H[23]=we(" Controlled by Google Cloud Domain "))]),H[24]||(H[24]=d("div",{class:"setting-description"}," When enabled, automatically validates against your Google Workspace domain configuration. ",-1))])):ve("",!0),K(e).domainValidation.enabled?(B(),U("div",Cpe,[d("div",kpe,[H[25]||(H[25]=d("h4",null,"Approved Email Domains:",-1)),d("div",Ipe,[(B(!0),U(Pe,null,He(K(e).domainValidation.domains,V=>{var W;return B(),U("div",{key:V.id,class:"domain-item"},[d("div",Dpe,[d("label",Ppe,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":G=>V.enabled=G,disabled:V.required||K(e).domainValidation.controlledByCloudDomain,onChange:S},null,40,Rpe),[[yt,V.enabled]]),d("span",Fpe,X(V.name),1),V.required?(B(),U("span",Npe,"Required")):ve("",!0)])]),V.enabled?(B(),U("div",Ope,[Oe(d("input",{type:"text","onUpdate:modelValue":G=>V.domain=G,placeholder:((W=V.description.match(/\(([^)]+)\)/))==null?void 0:W[1])||"yourdomain.edu",disabled:K(e).domainValidation.controlledByCloudDomain,onBlur:S,class:"domain-input"},null,40,Mpe),[[ft,V.domain]]),d("div",Lpe,X(V.description),1)])):ve("",!0)])}),128))])]),d("div",Bpe,[H[26]||(H[26]=d("h4",null,"Email Exceptions (Tech Team Access):",-1)),H[27]||(H[27]=d("div",{class:"setting-description"}," Add up to 5 specific email addresses that can bypass domain validation (e.g., cloud console owners, external IT support). ",-1)),d("div",Upe,[(B(!0),U(Pe,null,He(K(e).domainValidation.emailExceptions,(V,W)=>(B(),U("div",{key:W,class:"exception-item"},[Oe(d("input",{type:"email","onUpdate:modelValue":G=>V.email=G,placeholder:"tech@company.com",onBlur:S,class:"exception-email"},null,40,$pe),[[ft,V.email]]),Oe(d("input",{type:"text","onUpdate:modelValue":G=>V.description=G,placeholder:"Description (e.g., Cloud Console Owner)",onBlur:S,class:"exception-description"},null,40,Vpe),[[ft,V.description]])]))),128))])]),d("div",Hpe,[H[30]||(H[30]=d("h4",null,"Current Configuration:",-1)),d("div",jpe,[R.value.length===0&&P.value.length===0?(B(),U("div",Gpe,"  No domains or exceptions configured. Users will not be able to sign in. ")):(B(),U("div",Wpe,[R.value.length>0?(B(),U("div",zpe,[d("strong",null,X(R.value.length),1),H[28]||(H[28]=we(" domain(s) enabled: ")),d("ul",Kpe,[(B(!0),U(Pe,null,He(R.value,V=>(B(),U("li",{key:V},[d("code",null,"*@"+X(V),1)]))),128))])])):ve("",!0),P.value.length>0?(B(),U("div",qpe,[d("strong",null,X(P.value.length),1),H[29]||(H[29]=we(" email exception(s): ")),d("ul",Xpe,[(B(!0),U(Pe,null,He(P.value,V=>(B(),U("li",{key:V},[d("code",null,X(V),1)]))),128))])])):ve("",!0)]))])]),d("div",Ype,[H[31]||(H[31]=d("h4",null,"Test Domain Validation:",-1)),d("div",Qpe,[d("div",Jpe,[Oe(d("input",{type:"email","onUpdate:modelValue":H[6]||(H[6]=V=>o.value=V),placeholder:"Enter an email to test (e.g., teacher@yourdomain.edu)",class:"test-email-input"},null,512),[[ft,o.value]]),d("button",{type:"button",onClick:_,disabled:!o.value,class:"btn btn-primary"}," Test ",8,Zpe)]),l.value?(B(),U("div",{key:0,class:Ye(["test-result",l.value.valid?"test-success":"test-error"])},X(l.value.message),3)):ve("",!0)])])])):(B(),U("div",eme,H[32]||(H[32]=[d("div",{class:"info-message"},"  Domain validation is disabled. Any Google account can attempt to sign in (subject to user database permissions). ",-1)])))]),d("div",tme,[H[36]||(H[36]=d("h3",null," Data Access Controls",-1)),d("div",rme,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":H[7]||(H[7]=V=>g.value=V),onChange:C},null,544),[[yt,g.value]]),H[34]||(H[34]=we(" Restrict Data Export to Admins Only "))])]),d("div",nme,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":H[8]||(H[8]=V=>v.value=V),onChange:M},null,544),[[yt,v.value]]),H[35]||(H[35]=we(" Add Watermark to Exported PDFs "))])])]),d("div",sme,[H[37]||(H[37]=d("h3",null," IP Access Control",-1)),d("div",ame,[d("div",ime,[Oe(d("input",{type:"text","onUpdate:modelValue":H[9]||(H[9]=V=>b.value=V),placeholder:"Enter IP address or range"},null,512),[[ft,b.value]]),d("button",{onClick:D,class:"btn btn-primary"}," Add IP ")]),y.value.length?(B(),U("div",ome,[(B(!0),U(Pe,null,He(y.value,V=>(B(),U("div",{key:V,class:"ip-row"},[d("span",null,X(V),1),d("button",{onClick:W=>F(V),class:"btn btn-danger btn-sm"}," Remove ",8,lme)]))),128))])):(B(),U("div",cme," No IP restrictions configured "))])]),d("div",ume,[H[41]||(H[41]=d("h3",null," Security Alerts",-1)),d("div",dme,[d("div",fme,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":H[10]||(H[10]=V=>E.value.unusualAccess=V),onChange:N},null,544),[[yt,E.value.unusualAccess]]),H[38]||(H[38]=we(" Alert on Unusual Access Patterns "))])]),d("div",hme,[d("label",null,[Oe(d("input",{type:"checkbox","onUpdate:modelValue":H[11]||(H[11]=V=>E.value.bulkExport=V),onChange:N},null,544),[[yt,E.value.bulkExport]]),H[39]||(H[39]=we(" Alert on Bulk Data Exports "))])]),d("div",pme,[H[40]||(H[40]=d("h4",null,"Alert Recipients:",-1)),d("div",mme,[Oe(d("input",{type:"email","onUpdate:modelValue":H[12]||(H[12]=V=>w.value=V),placeholder:"Enter email address"},null,512),[[ft,w.value]]),d("button",{onClick:L,class:"btn btn-primary"}," Add ")]),x.value.length?(B(),U("div",gme,[(B(!0),U(Pe,null,He(x.value,V=>(B(),U("div",{key:V,class:"email-row"},[d("span",null,X(V),1),d("button",{onClick:W=>O(V),class:"btn btn-danger btn-sm"}," Remove ",8,vme)]))),128))])):ve("",!0)])])])]))}},xme=bt(yme,[["__scopeId","data-v-4a5993d3"]]),Eme={class:"card-header"},_me={class:"component-info"},bme={class:"component-name"},Sme={class:"component-description"},Ame={class:"card-body"},Tme={class:"status-details"},wme={class:"detail-row"},Cme={key:0,class:"detail-row"},kme={key:1,class:"detail-row"},Ime={class:"detail-value"},Dme={key:0,class:"errors-section"},Pme={class:"errors-list"},Rme={class:"card-actions"},Fme=["disabled"],Nme={key:1,class:"details-section"},Ome={class:"details-content"},Mme={class:"detail-item"},Lme={class:"detail-item"},Bme={key:0,class:"detail-item"},Ume={class:"detail-item"},$me={key:0,class:"loading-overlay"},Vme={__name:"ComponentHealthCard",props:{component:{type:Object,required:!0}},emits:["test","toggle"],setup(t){const e=t,r=se(!1),n=se(!1);$t(()=>e.component.status,(u,f)=>{f==="checking"&&u!=="checking"?n.value=!1:u==="checking"&&(n.value=!0)},{immediate:!0});const s=u=>{switch(u){case"operational":return"";case"degraded":return"";case"down":return"";case"disabled":return"";case"checking":return"";default:return""}},i=u=>{switch(u){case"operational":return"Healthy";case"degraded":return"Issues";case"down":return"Failed";case"disabled":return"Disabled";case"checking":return"Testing...";default:return"Unknown"}},a=u=>u<100?"latency-good":u<500?"latency-ok":"latency-poor",o=u=>u?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(u):"Never",l=u=>u?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(u):"Never",c=u=>u.toLowerCase().replace(/\s+/g,"-");return(u,f)=>(B(),U("div",{class:Ye(["health-card",[t.component.status,{disabled:!t.component.enabled}]])},[d("div",Eme,[d("div",_me,[d("h4",bme,X(t.component.name),1),d("p",Sme,X(t.component.description),1)]),d("div",{class:Ye(["status-indicator",t.component.status])},X(s(t.component.status)),3)]),d("div",Ame,[d("div",Tme,[d("div",wme,[f[3]||(f[3]=d("span",{class:"detail-label"},"Status:",-1)),d("span",{class:Ye(["detail-value",t.component.status])},X(i(t.component.status)),3)]),t.component.latency!==null?(B(),U("div",Cme,[f[4]||(f[4]=d("span",{class:"detail-label"},"Latency:",-1)),d("span",{class:Ye(["detail-value",a(t.component.latency)])},X(t.component.latency)+"ms ",3)])):ve("",!0),t.component.lastCheck?(B(),U("div",kme,[f[5]||(f[5]=d("span",{class:"detail-label"},"Last Check:",-1)),d("span",Ime,X(o(t.component.lastCheck)),1)])):ve("",!0)]),t.component.errors&&t.component.errors.length?(B(),U("div",Dme,[f[6]||(f[6]=d("div",{class:"errors-header"}," Issues:",-1)),d("ul",Pme,[(B(!0),U(Pe,null,He(t.component.errors,h=>(B(),U("li",{key:h,class:"error-item"},X(h),1))),128))])])):ve("",!0),d("div",Rme,[d("button",{onClick:f[0]||(f[0]=h=>u.$emit("test",t.component)),disabled:n.value,class:"btn btn-primary btn-sm"},X(n.value?"":"")+" Test ",9,Fme),d("button",{onClick:f[1]||(f[1]=h=>u.$emit("toggle",t.component)),class:Ye(["btn btn-sm",t.component.enabled?"btn-warning":"btn-success"])},X(t.component.enabled?" Disable":" Enable"),3),d("button",{onClick:f[2]||(f[2]=h=>r.value=!r.value),class:"btn btn-secondary btn-sm"},X(r.value?" Less":" More"),1)]),r.value?(B(),U("div",Nme,[d("div",Ome,[d("div",Mme,[f[7]||(f[7]=d("strong",null,"Test Function:",-1)),we(" "+X(t.component.testFunction||"N/A"),1)]),d("div",Lme,[f[8]||(f[8]=d("strong",null,"Enabled:",-1)),we(" "+X(t.component.enabled?"Yes":"No"),1)]),t.component.lastCheck?(B(),U("div",Bme,[f[9]||(f[9]=d("strong",null,"Last Test:",-1)),we(" "+X(l(t.component.lastCheck)),1)])):ve("",!0),d("div",Ume,[f[10]||(f[10]=d("strong",null,"Component ID:",-1)),we(" "+X(c(t.component.name)),1)])])])):ve("",!0)]),n.value?(B(),U("div",$me,f[11]||(f[11]=[d("div",{class:"loading-spinner"},"",-1),d("div",{class:"loading-text"},"Testing component...",-1)]))):ve("",!0)],2))}},eA=bt(Vme,[["__scopeId","data-v-18cc0437"]]),Hme={class:"health-dashboard"},jme={class:"dashboard-header"},Gme={class:"header-controls"},Wme=["disabled"],zme={key:0,class:"last-update"},Kme={class:"status-overview"},qme={class:"status-icon"},Xme={class:"status-info"},Yme={class:"status-details"},Qme={class:"component-categories"},Jme={class:"category-section"},Zme={class:"components-grid"},ege={class:"category-section"},tge={class:"components-grid"},rge={class:"quick-actions"},nge={class:"admin-action-btns"},sge=["disabled"],age={class:"logs-section"},ige={class:"logs-container"},oge={class:"log-time"},lge={class:"log-component"},cge={class:"log-message"},uge={key:0,class:"no-logs"},dge={class:"modal-header"},fge={class:"modal-content"},hge={__name:"ComponentHealthDashboard",setup(t){const e=se(!1),r=se(null),n=se(!1),s=se({}),i=se([]),a=se(!1),o=se([{name:"Firebase Auth",status:"operational",description:"User authentication service",lastCheck:new Date,enabled:!0,latency:150,errors:[]},{name:"Firestore Database",status:"operational",description:"Main database service",lastCheck:new Date,enabled:!0,latency:200,errors:[]},{name:"Firebase Storage",status:"operational",description:"File storage service",lastCheck:new Date,enabled:!0,latency:180,errors:[]},{name:"Cloud Functions",status:"operational",description:"Server-side functions",lastCheck:new Date,enabled:!0,latency:300,errors:[]}]),l=se([{name:"Session Timeout",status:"operational",description:"Automatic user logout system",lastCheck:new Date,enabled:!0,latency:50,errors:[]},{name:"IEP Encryption",status:"operational",description:"Sensitive data encryption",lastCheck:new Date,enabled:!0,latency:80,errors:[]},{name:"Access Control",status:"operational",description:"Role-based permissions",lastCheck:new Date,enabled:!0,latency:120,errors:[]},{name:"Audit Logging",status:"operational",description:"Activity tracking system",lastCheck:new Date,enabled:!0,latency:90,errors:[]}]),c=be(()=>[...o.value,...l.value]),u=be(()=>c.value.length),f=be(()=>c.value.filter(_=>_.status==="operational").length),h=be(()=>{const _=c.value.map(m=>m.status);return _.every(m=>m==="operational"||m==="disabled")?"operational":_.some(m=>m==="down"||m==="error")?"down":"degraded"}),p=_=>{switch(_){case"operational":return"";case"degraded":return"";case"down":return"";case"disabled":return"";default:return""}},g=_=>{switch(_){case"operational":return"All systems operational";case"degraded":return"Some issues detected";case"down":return"Critical issues found";case"checking":return"Running diagnostics...";default:return"Unknown status"}},v=_=>_?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(_):"",y=(_,m,A="info")=>{i.value.unshift({id:Date.now()+Math.random(),timestamp:new Date,component:_,message:m,type:A}),i.value.length>20&&(i.value=i.value.slice(0,20))},b=async _=>{y(_.name,"Starting component test...","info");try{const m=performance.now();await new Promise(I=>setTimeout(I,Math.random()*1e3+500));const A=Math.round(performance.now()-m),k=c.value.find(I=>I.name===_.name);k&&(k.status=Math.random()>.1?"operational":"degraded",k.latency=A,k.lastCheck=new Date,k.errors=k.status==="degraded"?["Minor performance issue detected"]:[]),y(_.name,`Test completed - ${k.status} (${A}ms)`,k.status==="operational"?"success":"warning"),s.value={component:_.name,data:{status:k.status,latency:`${A}ms`,timestamp:new Date().toISOString(),details:k.status==="operational"?"All checks passed successfully":"Minor performance issues detected"}},n.value=!0}catch(m){y(_.name,`Test failed: ${m.message}`,"error")}},E=_=>{const m=c.value.find(A=>A.name===_.name);m&&(m.enabled=!m.enabled,m.status=m.enabled?"operational":"disabled",y(_.name,`Component ${m.enabled?"enabled":"disabled"}`,"info"))},x=async()=>{if(!e.value){e.value=!0,r.value=new Date,y("System","Starting full system refresh...","info");try{const _=c.value.filter(m=>m.enabled).map(m=>b(m));await Promise.all(_),y("System","Full system refresh completed","success")}catch(_){y("System",`Refresh failed: ${_.message}`,"error")}finally{e.value=!1}}},w=async()=>{a.value=!0,y("System","Starting comprehensive system test...","info");try{await x(),y("System","Comprehensive system test completed","success")}catch(_){y("System",`System test failed: ${_.message}`,"error")}finally{a.value=!1}},R=()=>{const _={timestamp:new Date().toISOString(),overallStatus:h.value,components:c.value.map(I=>({name:I.name,status:I.status,enabled:I.enabled,latency:I.latency,lastCheck:I.lastCheck,errors:I.errors})),logs:i.value.slice(0,10)},m=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),A=URL.createObjectURL(m),k=document.createElement("a");k.href=A,k.download=`health-report-${Date.now()}.json`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(A),y("System","Health report exported","info")},P=()=>{i.value=[]},S=()=>{n.value=!1,s.value={}};return Gt(()=>{y("System","Component Health Dashboard initialized","success")}),(_,m)=>(B(),U("div",Hme,[d("div",jme,[m[1]||(m[1]=d("h2",null," Component Health Dashboard",-1)),d("div",Gme,[d("button",{onClick:x,disabled:e.value,class:"btn btn-primary"},X(e.value?" Refreshing...":" Refresh All"),9,Wme),r.value?(B(),U("span",zme," Last update: "+X(v(r.value)),1)):ve("",!0)])]),d("div",Kme,[d("div",{class:Ye(["status-card overall",h.value])},[d("div",qme,X(p(h.value)),1),d("div",Xme,[m[2]||(m[2]=d("h3",null,"System Status",-1)),d("p",null,X(g(h.value)),1),d("div",Yme,X(f.value)+"/"+X(u.value)+" components healthy ",1)])],2)]),d("div",Qme,[d("div",Jme,[m[3]||(m[3]=d("h3",null," Core Services",-1)),d("div",Zme,[(B(!0),U(Pe,null,He(o.value,A=>(B(),Qt(eA,{key:A.name,component:A,onTest:b,onToggle:E},null,8,["component"]))),128))])]),d("div",ege,[m[4]||(m[4]=d("h3",null," Authentication & Security",-1)),d("div",tge,[(B(!0),U(Pe,null,He(l.value,A=>(B(),Qt(eA,{key:A.name,component:A,onTest:b,onToggle:E},null,8,["component"]))),128))])])]),d("div",rge,[m[5]||(m[5]=d("h3",null," Quick Tests",-1)),d("div",nge,[d("button",{onClick:w,disabled:a.value,class:"admin-action-btn",style:{"min-width":"160px","max-width":"160px"}},X(a.value?" Testing...":" Full System Test"),9,sge),d("button",{onClick:R,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},"  Export Report ")])]),d("div",age,[d("div",{class:"logs-header"},[m[6]||(m[6]=d("h3",null," Component Activity Logs",-1)),d("div",{class:"log-controls"},[d("button",{onClick:P,class:"btn btn-sm btn-secondary"},"Clear")])]),d("div",ige,[(B(!0),U(Pe,null,He(i.value,A=>(B(),U("div",{key:A.id,class:Ye(["log-entry",A.type])},[d("span",oge,X(v(A.timestamp)),1),d("span",lge,X(A.component),1),d("span",cge,X(A.message),1)],2))),128)),i.value.length===0?(B(),U("div",uge,' No activity logs yet. Click "Refresh All" to start monitoring. ')):ve("",!0)])]),n.value?(B(),U("div",{key:0,class:"test-modal-overlay",onClick:S},[d("div",{class:"test-modal",onClick:m[0]||(m[0]=Xr(()=>{},["stop"]))},[d("div",dge,[d("h3",null,X(s.value.component)+" Test Results",1),d("button",{onClick:S,class:"btn btn-sm btn-secondary"},"")]),d("div",fge,[d("pre",null,X(JSON.stringify(s.value.data,null,2)),1)])])])):ve("",!0)]))}},pge=bt(hge,[["__scopeId","data-v-106cd980"]]),mge={class:"admin-permissions-matrix"},gge={class:"matrix-container"},vge={key:0,class:"loading-state"},yge={key:1,class:"permissions-table"},xge={key:0},Ege={key:0,class:"permission-row"},_ge={class:"page-info"},bge={class:"page-name"},Sge={class:"page-category"},Age={class:"page-description"},Tge={class:"permission-cell"},wge=["checked","disabled","onChange"],Cge={class:"permission-cell"},kge=["checked","disabled","onChange"],Ige={class:"permission-cell"},Dge=["checked","disabled","onChange"],Pge={class:"matrix-actions"},Rge={class:"bulk-actions"},Fge={class:"bulk-buttons"},Nge={key:0,class:"save-status"},Oge={__name:"AdminPermissionsMatrix",setup(t){const e=se(null),r=se(!0),n=be(()=>!r.value&&s.value.length>0&&Object.keys(i).length>0),s=se([{key:"dashboard",label:"Dashboard",category:"Dashboard",description:"Main admin overview and statistics"},{key:"usersAdd",label:"Add Users",category:"User Management",description:"Create new user accounts"},{key:"usersEdit",label:"Manage Users",category:"User Management",description:"Edit existing user accounts"},{key:"students",label:"Students",category:"Student Management",description:"View and manage student records"},{key:"addStudents",label:"Add Students",category:"Student Management",description:"Bulk import student data"},{key:"aide-assignment",label:"Aide Assignment",category:"Aide Management",description:"Assign aides to students"},{key:"aide-schedule",label:"Aide Schedule",category:"Aide Management",description:"Manage aide schedules"},{key:"time-table",label:"Time Table",category:"Aide Management",description:"Configure school time periods"},{key:"seis",label:"SEIS Import",category:"Data Integration",description:"Import SEIS student data"},{key:"aeries",label:"Aeries API & Import",category:"Data Integration",description:"Connect to Aeries SIS"},{key:"testing-links",label:"Testing Links",category:"Data Integration",description:"Google Sheets integration for testing"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"Data Integration",description:"Manage teacher feedback system"},{key:"backup-restore",label:"Backup & Restore",category:"Data Integration",description:"Database backup and restore"},{key:"settings",label:"App Settings",category:"Settings",description:"Global application settings"},{key:"delete-all-users",label:"Delete All Users",category:"Bulk Actions",description:"Mass deletion of user accounts (dangerous operation)"},{key:"delete-all-students",label:"Delete All Students",category:"Bulk Actions",description:"Mass deletion of student records (dangerous operation)"},{key:"permissions",label:"Admin Panel Permissions",category:"System",description:"User role and permission management"},{key:"audit-logs",label:"Audit Logs",category:"System",description:"View and search system audit logs"},{key:"iep-security",label:"IEP Security",category:"System",description:"IEP data encryption and security"},{key:"security",label:"Security Controls",category:"System",description:"Security monitoring and controls"},{key:"component-health",label:"Component Debug",category:"System",description:"Component health and debugging"},{key:"app-settings-testing",label:"App Settings Testing",category:"System",description:"App settings testing and debugging tools"}]),i=Ns({}),a={school_admin:{dashboard:!0,usersAdd:!0,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!1,aeries:!1,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!0,settings:!0,"delete-all-users":!0,"delete-all-students":!0,permissions:!1,"audit-logs":!1,"iep-security":!1,security:!1,"component-health":!1,"app-settings-testing":!0},admin_504:{dashboard:!0,usersAdd:!0,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!1,aeries:!1,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!1,settings:!1,"delete-all-users":!1,"delete-all-students":!1,permissions:!1,"audit-logs":!1,"iep-security":!1,security:!1,"component-health":!1,"app-settings-testing":!0},sped_chair:{dashboard:!0,usersAdd:!0,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!1,aeries:!1,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!1,settings:!1,"delete-all-users":!1,"delete-all-students":!1,permissions:!1,"audit-logs":!1,"iep-security":!1,security:!1,"component-health":!1,"app-settings-testing":!0}},o=()=>{if(!s.value||s.value.length===0){console.warn("adminPages not initialized yet");return}s.value.forEach(y=>{y&&y.key&&(i[y.key]={school_admin:a.school_admin[y.key]||!1,admin_504:a.admin_504[y.key]||!1,sped_chair:a.sped_chair[y.key]||!1})})},l=async()=>{try{const y=Ze(qe,"app_settings","admin_panel_permissions"),b=await nr(y);if(b.exists()){const E=b.data();s.value.forEach(x=>{x&&x.key&&E[x.key]&&(i[x.key]={school_admin:E[x.key].school_admin??a.school_admin[x.key],admin_504:E[x.key].admin_504??a.admin_504[x.key],sped_chair:E[x.key].sped_chair??a.sped_chair[x.key]})}),v("Permissions loaded successfully","success")}else o(),v("Using default permissions","info")}catch(y){console.error("Error loading permissions:",y),v("Error loading permissions","error"),o()}finally{r.value=!1}},c=async()=>{try{const y=Ze(qe,"app_settings","admin_panel_permissions");await Ht(y,i),v("Permissions saved successfully","success")}catch(y){console.error("Error saving permissions:",y),v("Error saving permissions","error")}},u=async(y,b,E)=>{i[y]&&(i[y][b]=E,await c())},f=async y=>{s.value.forEach(b=>{b&&b.key&&i[b.key]&&(i[b.key][y]=!0)}),await c(),v(`All permissions granted to ${y}`,"success")},h=async()=>{s.value.forEach(y=>{y&&y.key&&i[y.key]&&(i[y.key].school_admin=!1,i[y.key].admin_504=!1,i[y.key].sped_chair=!1)}),await c(),v("All permissions revoked","warning")},p=async()=>{o(),await c(),v("Permissions reset to defaults","info")},g=(y,b)=>["permissions","iep-security","security","component-health"].includes(y)?!0:["delete-all-users","delete-all-students"].includes(y)?b!=="school_admin":b==="admin_504"?["settings"].includes(y):b==="sped_chair"?["settings"].includes(y):!1,v=(y,b)=>{e.value={message:y,type:b},setTimeout(()=>{e.value=null},3e3)};return Gt(async()=>{await l()}),(y,b)=>(B(),U("div",mge,[b[9]||(b[9]=d("div",{class:"matrix-header"},[d("h2",null," Admin Panel Permissions Matrix"),d("p",{class:"matrix-description"}," Control which admin panel pages different admin roles can access. Changes are saved automatically. ")],-1)),d("div",gge,[r.value?(B(),U("div",vge,b[3]||(b[3]=[d("p",null,"Loading permissions...",-1)]))):(B(),U("table",yge,[b[7]||(b[7]=d("thead",null,[d("tr",null,[d("th",{class:"page-column"},"Admin Panel Page"),d("th",{class:"role-column"},"School Admin"),d("th",{class:"role-column"},"504 Coordinator"),d("th",{class:"role-column"},"SPED Chair")])],-1)),n.value?(B(),U("tbody",xge,[(B(!0),U(Pe,null,He(s.value,E=>(B(),U(Pe,{key:(E==null?void 0:E.key)||"unknown"},[E&&E.key&&i[E.key]?(B(),U("tr",Ege,[d("td",_ge,[d("div",bge,X(E.label),1),d("div",Sge,X(E.category),1),d("div",Age,X(E.description),1)]),d("td",Tge,[d("label",{class:Ye(["permission-toggle",{disabled:g(E.key,"school_admin")}])},[d("input",{type:"checkbox",checked:i[E.key]&&i[E.key].school_admin,disabled:g(E.key,"school_admin"),onChange:x=>u(E.key,"school_admin",x.target.checked)},null,40,wge),b[4]||(b[4]=d("span",{class:"toggle-slider"},null,-1))],2)]),d("td",Cge,[d("label",{class:Ye(["permission-toggle",{disabled:g(E.key,"admin_504")}])},[d("input",{type:"checkbox",checked:i[E.key]&&i[E.key].admin_504,disabled:g(E.key,"admin_504"),onChange:x=>u(E.key,"admin_504",x.target.checked)},null,40,kge),b[5]||(b[5]=d("span",{class:"toggle-slider"},null,-1))],2)]),d("td",Ige,[d("label",{class:Ye(["permission-toggle",{disabled:g(E.key,"sped_chair")}])},[d("input",{type:"checkbox",checked:i[E.key]&&i[E.key].sped_chair,disabled:g(E.key,"sped_chair"),onChange:x=>u(E.key,"sped_chair",x.target.checked)},null,40,Dge),b[6]||(b[6]=d("span",{class:"toggle-slider"},null,-1))],2)])])):ve("",!0)],64))),128))])):ve("",!0)]))]),d("div",Pge,[d("div",Rge,[b[8]||(b[8]=d("h3",null,"Bulk Actions",-1)),d("div",Fge,[d("button",{onClick:b[0]||(b[0]=E=>f("school_admin")),class:"btn btn-success"}," Grant All to School Admin "),d("button",{onClick:b[1]||(b[1]=E=>f("admin_504")),class:"btn btn-success"}," Grant All to 504 Coordinator "),d("button",{onClick:b[2]||(b[2]=E=>f("sped_chair")),class:"btn btn-success"}," Grant All to SPED Chair "),d("button",{onClick:h,class:"btn btn-warning"}," Revoke All Permissions "),d("button",{onClick:p,class:"btn btn-secondary"}," Reset to Defaults ")])])]),e.value?(B(),U("div",Nge,[d("div",{class:Ye(["status-message",e.value.type])},X(e.value.message),3)])):ve("",!0)]))}},Mge=bt(Oge,[["__scopeId","data-v-be29f1ae"]]),Lge={class:"theme-manager"},Bge={key:0,class:"loading-state"},Uge={key:1,class:"error-state"},$ge={class:"error-message"},Vge={key:2,class:"theme-editor"},Hge={class:"default-themes"},jge={class:"theme-presets"},Gge=["onClick"],Wge={class:"theme-preview-colors"},zge={class:"theme-info"},Kge={class:"theme-actions"},qge=["disabled"],Xge=["disabled"],Yge={class:"theme-sections"},Qge={class:"theme-section"},Jge={class:"enhanced-color-grid"},Zge={class:"color-input"},eve={class:"color-picker-wrapper"},tve={class:"color-input"},rve={class:"color-picker-wrapper"},nve={class:"color-input"},sve={class:"color-picker-wrapper"},ave={class:"color-input"},ive={class:"color-picker-wrapper"},ove={class:"color-input"},lve={class:"color-picker-wrapper"},cve={class:"color-input"},uve={class:"color-picker-wrapper"},dve={class:"theme-section"},fve={class:"typography-grid"},hve={class:"option-group"},pve={class:"option-group"},mve={class:"option-group"},gve={class:"theme-section"},vve={class:"style-options-grid"},yve={class:"option-group"},xve={class:"option-group"},Eve={class:"option-group"},_ve={class:"theme-section"},bve={class:"student-preview-container"},Sve={class:"mockup-header"},Ave={class:"mockup-table"},Tve={class:"mockup-table-row"},wve={class:"mockup-cell"},Cve={class:"mockup-table-row"},kve={class:"mockup-cell"},Ive={__name:"ThemeManager",setup(t){const{currentTheme:e,loading:r,error:n,loadTheme:s,saveTheme:i,resetTheme:a,updateThemeProperty:o,DEFAULT_THEME:l}=gk(),c=[{name:"Professional Blue",description:"Clean, accessible blue theme for professional use",primaryColor:"#1976d2",primaryHover:"#1565c0",primaryLight:"#e3f2fd",primaryDark:"#0d47a1",bgPrimary:"#f8f9fa",bgSecondary:"#ffffff",bgTertiary:"#f1f3f4",textPrimary:"#212529",textSecondary:"#495057",textMuted:"#6c757d",textInverse:"#ffffff",headerTextColor:"#1a202c",accentColor:"#e3f2fd",secondaryColor:"#6c757d",secondaryHover:"#545b62",successColor:"#28a745",warningColor:"#ffc107",errorColor:"#dc3545",infoColor:"#17a2b8",borderColor:"#dee2e6",borderStyle:"rounded",shadowStyle:"subtle",contrastLevel:"standard",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",fontFamilyBase:"'Inter', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1rem",lineHeight:"1.5"},{name:"Educational Orange",description:"Warm, professional orange theme optimized for readability",primaryColor:"#e65100",primaryHover:"#bf360c",primaryLight:"#fff3e0",primaryDark:"#bf360c",bgPrimary:"#fafafa",bgSecondary:"#ffffff",bgTertiary:"#f5f5f5",textPrimary:"#212121",textSecondary:"#424242",textMuted:"#757575",textInverse:"#ffffff",headerTextColor:"#bf360c",accentColor:"#ffcc80",secondaryColor:"#424242",secondaryHover:"#212121",successColor:"#2e7d32",warningColor:"#f57c00",errorColor:"#d32f2f",infoColor:"#1976d2",borderColor:"#e0e0e0",borderStyle:"rounded",shadowStyle:"subtle",contrastLevel:"high",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",fontFamilyBase:"'Source Sans Pro', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1rem",lineHeight:"1.6"},{name:"Accessible Green",description:"Professional green theme with excellent readability",primaryColor:"#2e7d32",primaryHover:"#1b5e20",primaryLight:"#e8f5e8",primaryDark:"#1b5e20",bgPrimary:"#f8f9fa",bgSecondary:"#ffffff",bgTertiary:"#f1f3f4",textPrimary:"#1b5e20",textSecondary:"#2e7d32",textMuted:"#558b2f",textInverse:"#ffffff",headerTextColor:"#1b5e20",accentColor:"#a5d6a7",secondaryColor:"#424242",secondaryHover:"#212121",successColor:"#4caf50",warningColor:"#f57c00",errorColor:"#d32f2f",infoColor:"#1976d2",borderColor:"#c8e6c9",borderStyle:"rounded",shadowStyle:"subtle",contrastLevel:"high",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",fontFamilyBase:"'Open Sans', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1rem",lineHeight:"1.6"},{name:"Professional Dark",description:"High-contrast dark theme for reduced eye strain",primaryColor:"#bb86fc",primaryHover:"#9c27b0",primaryLight:"#f3e5f5",primaryDark:"#6a1b9a",bgPrimary:"#121212",bgSecondary:"#1e1e1e",bgTertiary:"#2d2d2d",textPrimary:"#ffffff",textSecondary:"#e0e0e0",textMuted:"#bdbdbd",textInverse:"#000000",headerTextColor:"#bb86fc",accentColor:"#424242",secondaryColor:"#616161",secondaryHover:"#424242",successColor:"#4caf50",warningColor:"#ff9800",errorColor:"#f44336",infoColor:"#2196f3",borderColor:"#424242",borderStyle:"rounded",shadowStyle:"medium",contrastLevel:"maximum",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",fontFamilyBase:"'Roboto', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1rem",lineHeight:"1.6"},{name:"Corporate Navy",description:"Professional navy blue theme for corporate environments",primaryColor:"#1565c0",primaryHover:"#0d47a1",primaryLight:"#e3f2fd",primaryDark:"#0d47a1",bgPrimary:"#f8f9fa",bgSecondary:"#ffffff",bgTertiary:"#f1f3f4",textPrimary:"#0d47a1",textSecondary:"#1565c0",textMuted:"#1976d2",textInverse:"#ffffff",headerTextColor:"#0d47a1",accentColor:"#bbdefb",secondaryColor:"#424242",secondaryHover:"#212121",successColor:"#2e7d32",warningColor:"#f57c00",errorColor:"#d32f2f",infoColor:"#1976d2",borderColor:"#e1f5fe",borderStyle:"sharp",shadowStyle:"subtle",contrastLevel:"high",borderRadiusSm:"2px",borderRadiusMd:"4px",borderRadiusLg:"6px",borderRadiusXl:"8px",fontFamilyBase:"'Source Sans Pro', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1rem",lineHeight:"1.5"},{name:"High Contrast",description:"Maximum accessibility theme with high contrast ratios",primaryColor:"#000000",primaryHover:"#212121",primaryLight:"#f5f5f5",primaryDark:"#000000",bgPrimary:"#ffffff",bgSecondary:"#ffffff",bgTertiary:"#f8f9fa",textPrimary:"#000000",textSecondary:"#212121",textMuted:"#424242",textInverse:"#ffffff",headerTextColor:"#000000",accentColor:"#e0e0e0",secondaryColor:"#424242",secondaryHover:"#212121",successColor:"#1b5e20",warningColor:"#e65100",errorColor:"#b71c1c",infoColor:"#0d47a1",borderColor:"#000000",borderStyle:"sharp",shadowStyle:"bold",contrastLevel:"maximum",borderRadiusSm:"0px",borderRadiusMd:"2px",borderRadiusLg:"4px",borderRadiusXl:"6px",fontFamilyBase:"'Roboto', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1.125rem",lineHeight:"1.7"}],u=Ns({...l}),f=se(!1),h=se(""),p=se(!1),g=se(null);$t(e,_=>{Object.assign(u,_)},{deep:!0});const v=(_,m=!1)=>{h.value=_,p.value=m,setTimeout(()=>{h.value="",p.value=!1},5e3)},y=async()=>{f.value=!0;try{await i(u),v("Theme saved successfully!")}catch(_){v("Error saving theme: "+_.message,!0)}finally{f.value=!1}},b=async()=>{if(confirm("Are you sure you want to reset the theme to defaults? This cannot be undone."))try{await a(),v("Theme reset to defaults")}catch(_){v("Error resetting theme: "+_.message,!0)}},E=_=>{Object.assign(u,_),Object.keys(_).forEach(m=>{m!=="name"&&m!=="description"&&o(m,_[m])}),v(`Applied ${_.name} theme`)},x=_=>_.primaryColor===u.primaryColor&&_.bgPrimary===u.bgPrimary&&_.textPrimary===u.textPrimary,w=_=>{const A={rounded:{sm:"4px",md:"6px",lg:"8px",xl:"12px"},sharp:{sm:"2px",md:"4px",lg:"6px",xl:"8px"},"extra-rounded":{sm:"8px",md:"12px",lg:"16px",xl:"20px"}}[_];A&&(o("borderRadiusSm",A.sm),o("borderRadiusMd",A.md),o("borderRadiusLg",A.lg),o("borderRadiusXl",A.xl))},R=_=>{const A={none:{sm:"none",md:"none",lg:"none",xl:"none"},subtle:{sm:"0 1px 2px rgba(0, 0, 0, 0.05)",md:"0 2px 4px rgba(0, 0, 0, 0.1)",lg:"0 4px 6px rgba(0, 0, 0, 0.1)",xl:"0 4px 20px rgba(0, 0, 0, 0.15)"},medium:{sm:"0 2px 4px rgba(0, 0, 0, 0.1)",md:"0 4px 8px rgba(0, 0, 0, 0.15)",lg:"0 6px 12px rgba(0, 0, 0, 0.2)",xl:"0 8px 24px rgba(0, 0, 0, 0.25)"},bold:{sm:"0 4px 8px rgba(0, 0, 0, 0.15)",md:"0 8px 16px rgba(0, 0, 0, 0.2)",lg:"0 12px 24px rgba(0, 0, 0, 0.25)",xl:"0 16px 32px rgba(0, 0, 0, 0.3)"}}[_];A&&(o("shadowSm",A.sm),o("shadowMd",A.md),o("shadowLg",A.lg),o("shadowXl",A.xl))},P=_=>{o("fontSizeBase",_);const m=parseFloat(_),A=_.replace(/[\d.]/g,"");o("fontSizeXs",`${(m*.75).toFixed(3)}${A}`),o("fontSizeSm",`${(m*.875).toFixed(3)}${A}`),o("fontSizeLg",`${(m*1.125).toFixed(3)}${A}`),o("fontSizeXl",`${(m*1.25).toFixed(3)}${A}`),o("fontSizeXxl",`${(m*1.5).toFixed(3)}${A}`)},S=_=>{o("contrastLevel",_),_==="high"?u.textPrimary.includes("#")&&(o("textPrimary","#000000"),o("textSecondary","#212121")):_==="maximum"&&(o("textPrimary","#000000"),o("textSecondary","#000000"),o("bgPrimary","#ffffff"),o("bgSecondary","#ffffff"))};return Gt(async()=>{try{await s()}catch(_){console.error("Error loading theme:",_)}}),(_,m)=>(B(),U("div",Lge,[m[72]||(m[72]=d("div",{class:"theme-header"},[d("h2",null," Student Page Theme Customization"),d("p",{class:"theme-description"}," Customize the visual appearance of the student page. Changes are applied in real-time and saved to the database. ")],-1)),K(r)?(B(),U("div",Bge,m[38]||(m[38]=[d("div",{class:"spinner"},null,-1),d("p",null,"Loading theme settings...",-1)]))):K(n)?(B(),U("div",Uge,[d("p",$ge,X(K(n)),1),d("button",{onClick:m[0]||(m[0]=(...A)=>K(s)&&K(s)(...A)),class:"btn btn-primary"},"Retry")])):(B(),U("div",Vge,[d("div",Hge,[m[39]||(m[39]=d("h3",null," Quick Theme Selection",-1)),d("div",jge,[(B(),U(Pe,null,He(c,A=>d("div",{key:A.name,onClick:k=>E(A),class:Ye(["theme-preset",{active:x(A)}])},[d("div",Wge,[d("div",{class:"color-dot",style:Nr({backgroundColor:A.primaryColor})},null,4),d("div",{class:"color-dot",style:Nr({backgroundColor:A.bgPrimary})},null,4),d("div",{class:"color-dot",style:Nr({backgroundColor:A.textPrimary})},null,4)]),d("div",zge,[d("h4",null,X(A.name),1),d("p",null,X(A.description),1)])],10,Gge)),64))])]),d("div",Kge,[d("button",{onClick:y,disabled:f.value,class:"btn btn-primary"},X(f.value?" Saving...":" Save Theme"),9,qge),d("button",{onClick:b,disabled:f.value,class:"btn btn-warning"},"  Reset to Default ",8,Xge)]),h.value?(B(),U("div",{key:0,class:Ye(["status-message",{error:p.value,success:!p.value}])},X(h.value),3)):ve("",!0),d("div",Yge,[d("section",Qge,[m[46]||(m[46]=d("h3",null," Essential Student Page Colors",-1)),d("div",Jge,[d("div",Zge,[m[40]||(m[40]=d("label",null,"Primary Color (Buttons & Links)",-1)),d("div",eve,[Oe(d("input",{type:"color","onUpdate:modelValue":m[1]||(m[1]=A=>u.primaryColor=A),onInput:m[2]||(m[2]=A=>K(o)("primaryColor",A.target.value)),class:"color-picker"},null,544),[[ft,u.primaryColor]]),Oe(d("input",{type:"text","onUpdate:modelValue":m[3]||(m[3]=A=>u.primaryColor=A),onInput:m[4]||(m[4]=A=>K(o)("primaryColor",A.target.value)),class:"color-text",placeholder:"#1976d2"},null,544),[[ft,u.primaryColor]])])]),d("div",tve,[m[41]||(m[41]=d("label",null,"Header Text Color",-1)),d("div",rve,[Oe(d("input",{type:"color","onUpdate:modelValue":m[5]||(m[5]=A=>u.headerTextColor=A),onInput:m[6]||(m[6]=A=>K(o)("headerTextColor",A.target.value)),class:"color-picker"},null,544),[[ft,u.headerTextColor]]),Oe(d("input",{type:"text","onUpdate:modelValue":m[7]||(m[7]=A=>u.headerTextColor=A),onInput:m[8]||(m[8]=A=>K(o)("headerTextColor",A.target.value)),class:"color-text",placeholder:"#1a1a1a"},null,544),[[ft,u.headerTextColor]])])]),d("div",nve,[m[42]||(m[42]=d("label",null,"Background Color",-1)),d("div",sve,[Oe(d("input",{type:"color","onUpdate:modelValue":m[9]||(m[9]=A=>u.bgPrimary=A),onInput:m[10]||(m[10]=A=>K(o)("bgPrimary",A.target.value)),class:"color-picker"},null,544),[[ft,u.bgPrimary]]),Oe(d("input",{type:"text","onUpdate:modelValue":m[11]||(m[11]=A=>u.bgPrimary=A),onInput:m[12]||(m[12]=A=>K(o)("bgPrimary",A.target.value)),class:"color-text",placeholder:"#f4f6f9"},null,544),[[ft,u.bgPrimary]])])]),d("div",ave,[m[43]||(m[43]=d("label",null,"Text Color",-1)),d("div",ive,[Oe(d("input",{type:"color","onUpdate:modelValue":m[13]||(m[13]=A=>u.textPrimary=A),onInput:m[14]||(m[14]=A=>K(o)("textPrimary",A.target.value)),class:"color-picker"},null,544),[[ft,u.textPrimary]]),Oe(d("input",{type:"text","onUpdate:modelValue":m[15]||(m[15]=A=>u.textPrimary=A),onInput:m[16]||(m[16]=A=>K(o)("textPrimary",A.target.value)),class:"color-text",placeholder:"#333333"},null,544),[[ft,u.textPrimary]])])]),d("div",ove,[m[44]||(m[44]=d("label",null,"Accent Color (Service Pills)",-1)),d("div",lve,[Oe(d("input",{type:"color","onUpdate:modelValue":m[17]||(m[17]=A=>u.accentColor=A),onInput:m[18]||(m[18]=A=>K(o)("accentColor",A.target.value)),class:"color-picker"},null,544),[[ft,u.accentColor]]),Oe(d("input",{type:"text","onUpdate:modelValue":m[19]||(m[19]=A=>u.accentColor=A),onInput:m[20]||(m[20]=A=>K(o)("accentColor",A.target.value)),class:"color-text",placeholder:"#e3f2fd"},null,544),[[ft,u.accentColor]])])]),d("div",cve,[m[45]||(m[45]=d("label",null,"Card Background",-1)),d("div",uve,[Oe(d("input",{type:"color","onUpdate:modelValue":m[21]||(m[21]=A=>u.bgSecondary=A),onInput:m[22]||(m[22]=A=>K(o)("bgSecondary",A.target.value)),class:"color-picker"},null,544),[[ft,u.bgSecondary]]),Oe(d("input",{type:"text","onUpdate:modelValue":m[23]||(m[23]=A=>u.bgSecondary=A),onInput:m[24]||(m[24]=A=>K(o)("bgSecondary",A.target.value)),class:"color-text",placeholder:"#ffffff"},null,544),[[ft,u.bgSecondary]])])])])]),d("section",dve,[m[53]||(m[53]=d("h3",null," Typography & Readability",-1)),d("div",fve,[d("div",hve,[m[48]||(m[48]=d("label",null,"Font Family",-1)),Oe(d("select",{"onUpdate:modelValue":m[25]||(m[25]=A=>u.fontFamilyBase=A),onChange:m[26]||(m[26]=A=>K(o)("fontFamilyBase",A.target.value)),class:"style-select"},m[47]||(m[47]=[Dn('<option value="&#39;Inter&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Inter (Modern &amp; Clean)</option><option value="&#39;Roboto&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Roboto (Google Standard)</option><option value="&#39;Open Sans&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Open Sans (Friendly)</option><option value="&#39;Source Sans Pro&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Source Sans Pro (Professional)</option><option value="&#39;Lato&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Lato (Humanist)</option><option value="&#39;Nunito Sans&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Nunito Sans (Rounded)</option><option value="&#39;System UI&#39;, -apple-system, sans-serif" data-v-5e89749a>System Default</option>',7)]),544),[[cr,u.fontFamilyBase]])]),d("div",pve,[m[50]||(m[50]=d("label",null,"Base Font Size",-1)),Oe(d("select",{"onUpdate:modelValue":m[27]||(m[27]=A=>u.fontSizeBase=A),onChange:m[28]||(m[28]=A=>P(A.target.value)),class:"style-select"},m[49]||(m[49]=[d("option",{value:"0.875rem"},"Small (14px) - Compact",-1),d("option",{value:"1rem"},"Medium (16px) - Standard",-1),d("option",{value:"1.125rem"},"Large (18px) - Comfortable",-1),d("option",{value:"1.25rem"},"Extra Large (20px) - Accessible",-1)]),544),[[cr,u.fontSizeBase]])]),d("div",mve,[m[52]||(m[52]=d("label",null,"Line Height",-1)),Oe(d("select",{"onUpdate:modelValue":m[29]||(m[29]=A=>u.lineHeight=A),onChange:m[30]||(m[30]=A=>K(o)("lineHeight",A.target.value)),class:"style-select"},m[51]||(m[51]=[d("option",{value:"1.4"},"Compact (1.4)",-1),d("option",{value:"1.5"},"Standard (1.5)",-1),d("option",{value:"1.6"},"Comfortable (1.6)",-1),d("option",{value:"1.7"},"Spacious (1.7)",-1)]),544),[[cr,u.lineHeight]])])])]),d("section",gve,[m[60]||(m[60]=d("h3",null," Visual Style",-1)),d("div",vve,[d("div",yve,[m[55]||(m[55]=d("label",null,"Border Radius Style",-1)),Oe(d("select",{"onUpdate:modelValue":m[31]||(m[31]=A=>u.borderStyle=A),onChange:m[32]||(m[32]=A=>w(A.target.value)),class:"style-select"},m[54]||(m[54]=[d("option",{value:"rounded"},"Rounded (Modern)",-1),d("option",{value:"sharp"},"Sharp (Professional)",-1),d("option",{value:"extra-rounded"},"Extra Rounded (Friendly)",-1)]),544),[[cr,u.borderStyle]])]),d("div",xve,[m[57]||(m[57]=d("label",null,"Shadow Style",-1)),Oe(d("select",{"onUpdate:modelValue":m[33]||(m[33]=A=>u.shadowStyle=A),onChange:m[34]||(m[34]=A=>R(A.target.value)),class:"style-select"},m[56]||(m[56]=[d("option",{value:"subtle"},"Subtle",-1),d("option",{value:"medium"},"Medium",-1),d("option",{value:"bold"},"Bold",-1),d("option",{value:"none"},"No Shadows",-1)]),544),[[cr,u.shadowStyle]])]),d("div",Eve,[m[59]||(m[59]=d("label",null,"Contrast Level",-1)),Oe(d("select",{"onUpdate:modelValue":m[35]||(m[35]=A=>u.contrastLevel=A),onChange:m[36]||(m[36]=A=>S(A.target.value)),class:"style-select"},m[58]||(m[58]=[d("option",{value:"standard"},"Standard Contrast",-1),d("option",{value:"high"},"High Contrast (Accessible)",-1),d("option",{value:"maximum"},"Maximum Contrast",-1)]),544),[[cr,u.contrastLevel]])])])]),d("section",_ve,[m[71]||(m[71]=d("h3",null," Student Page Preview",-1)),d("div",bve,[d("div",{class:"student-page-mockup",style:Nr({fontFamily:u.fontFamilyBase,fontSize:u.fontSizeBase,lineHeight:u.lineHeight})},[d("div",Sve,[d("h2",{style:Nr({color:u.headerTextColor||u.textPrimary,fontFamily:u.fontFamilyBase})},"Student Management",4),m[61]||(m[61]=Dn('<div class="mockup-search" data-v-5e89749a><input type="text" placeholder="Search students..." readonly data-v-5e89749a></div><div class="mockup-controls" data-v-5e89749a><button class="mockup-btn primary" data-v-5e89749a> Filters</button><select class="mockup-select" data-v-5e89749a><option data-v-5e89749a>First Name</option></select><div class="mockup-radio-group" data-v-5e89749a><label class="active" data-v-5e89749a>List</label><label data-v-5e89749a>Class</label></div></div>',2))]),d("div",Ave,[m[70]||(m[70]=Dn('<div class="mockup-table-header" data-v-5e89749a><div class="mockup-cell" data-v-5e89749a>Student Name</div><div class="mockup-cell" data-v-5e89749a>Grade</div><div class="mockup-cell" data-v-5e89749a>Case Manager</div><div class="mockup-cell" data-v-5e89749a>Services</div><div class="mockup-cell" data-v-5e89749a>Actions</div></div>',1)),d("div",Tve,[m[62]||(m[62]=d("div",{class:"mockup-cell"},"John Smith",-1)),m[63]||(m[63]=d("div",{class:"mockup-cell"},"9th",-1)),m[64]||(m[64]=d("div",{class:"mockup-cell"},"Ms. Johnson",-1)),d("div",wve,[d("span",{class:"mockup-service-pill",style:Nr({backgroundColor:u.accentColor||u.primaryLight})},"Speech",4),d("span",{class:"mockup-service-pill",style:Nr({backgroundColor:u.accentColor||u.primaryLight})},"OT",4)]),m[65]||(m[65]=d("div",{class:"mockup-cell"},[d("button",{class:"mockup-btn primary small"},"Edit")],-1))]),d("div",Cve,[m[66]||(m[66]=d("div",{class:"mockup-cell"},"Jane Doe",-1)),m[67]||(m[67]=d("div",{class:"mockup-cell"},"10th",-1)),m[68]||(m[68]=d("div",{class:"mockup-cell"},"Mr. Wilson",-1)),d("div",kve,[d("span",{class:"mockup-service-pill",style:Nr({backgroundColor:u.accentColor||u.primaryLight})},"Resource",4)]),m[69]||(m[69]=d("div",{class:"mockup-cell"},[d("button",{class:"mockup-btn primary small"},"Edit")],-1))])])],4)])])])])),d("input",{ref_key:"fileInput",ref:g,type:"file",accept:".json",style:{display:"none"},onChange:m[37]||(m[37]=(...A)=>_.handleFileImport&&_.handleFileImport(...A))},null,544)]))}},Dve=bt(Ive,[["__scopeId","data-v-5e89749a"]]),Pve={class:"secure-pdf-test"},Rve={class:"test-section"},Fve={class:"status-grid"},Nve={class:"status-item"},Ove={class:"status-value"},Mve={class:"status-item"},Lve={class:"status-value"},Bve={class:"status-item"},Uve={class:"status-value"},$ve={class:"status-item"},Vve={class:"status-value"},Hve={class:"test-section"},jve=["disabled"],Gve=["disabled"],Wve={class:"test-section"},zve=["disabled"],Kve={key:0,class:"error-message"},qve={key:1,class:"success-message"},Xve={key:0,class:"test-section"},Yve=["disabled"],Qve={key:0,class:"error-message"},Jve={key:1,class:"success-message"},Zve={class:"test-section"},e1e=["disabled"],t1e={key:0,class:"error-message"},r1e={key:1,class:"success-message"},n1e={class:"test-section"},s1e=["disabled"],a1e={key:0,class:"error-message"},i1e={key:1,class:"success-message"},o1e={__name:"SecurePdfTest",setup(t){const e=se(null),r=se("test-student-123"),n=se(null),s=se(!1),i=se(!1),a=se(!1),o=se(null),l=se(null),c=se(!1),u=se(null),f=se(null),h=se("Checking..."),p=se("Checking..."),g=se("Checking..."),v=se("Checking..."),y=se(null),b=se(null),E=se(null),x=se(null),{uploadPdf:w,downloadPdf:R,isUploading:P,isDownloading:S}=lx();be(()=>{var F,N,L;return((F=dt.currentUser)==null?void 0:F.role)||((L=(N=dt.currentUser)==null?void 0:N.claims)==null?void 0:L.role)||"unknown"});const _=F=>{const N=F.target.files[0];if(N){if(N.type!=="application/pdf"){alert("Please select a PDF file"),F.target.value="";return}e.value=N,b.value=null,y.value=null,o.value=null,l.value=null}},m=async()=>{var F,N;if(!r.value){alert("Please enter a student ID");return}try{s.value=!0;const L=dt.currentUser;if(L){const H=await L.getIdTokenResult();console.log(" User token result:",H),console.log(" User role from token:",H.claims.role)}const O=Ze(qe,"students",r.value);(await nr(O)).exists()?alert(" Test student already exists"):(await Ht(O,{app:{studentData:{firstName:"Test",lastName:"Student",grade:"7",plan:"IEP",caseManagerId:((F=dt.currentUser)==null?void 0:F.uid)||"test-case-manager"},staffIds:[((N=dt.currentUser)==null?void 0:N.uid)||"test-user"],schedule:{periods:{},classServices:[]},providers:{},accommodations:{instruction:"",assessment:""},flags:{flag1:!1,flag2:!1}},createdAt:kn()}),alert(" Test student created successfully!"))}catch(L){alert(` Error creating test student: ${L.message}`),console.error("Error creating test student:",L),L.message.includes("permissions")&&alert(" Admin permissions required. Try using an existing student ID instead.")}finally{s.value=!1}},A=async()=>{var F,N,L,O;try{i.value=!0;const z=At(qe,"students"),H=or(z,oa(5)),V=await Wt(H);if(V.empty)alert(" No students found in database");else{const W=V.docs.map(re=>({id:re.id,...re.data()}));console.log(" Available students:",W);const G=W[0];r.value=G.id,alert(` Found student: ${((N=(F=G.app)==null?void 0:F.studentData)==null?void 0:N.firstName)||"Unknown"} ${((O=(L=G.app)==null?void 0:L.studentData)==null?void 0:O.lastName)||"Student"} (ID: ${G.id})`)}}catch(z){alert(` Error finding student: ${z.message}`),console.error("Error finding student:",z)}finally{i.value=!1}},k=async()=>{if(!e.value||!r.value){alert("Please select a file and enter a student ID");return}try{b.value=null,y.value=null;const F=await w(e.value,r.value);y.value=F,console.log(" Test PDF uploaded successfully:",F)}catch(F){b.value=F.message,console.error(" Test PDF upload failed:",F)}},I=async()=>{if(!y.value||!r.value){alert("Please upload a PDF first");return}try{E.value=null,x.value=null,await R(y.value,r.value,"test-document.pdf"),x.value=!0,console.log(" Test PDF downloaded successfully")}catch(F){E.value=F.message,console.error(" Test PDF download failed:",F)}},C=async()=>{if(!e.value){alert("Please select a file first");return}try{a.value=!0,o.value=null,l.value=null;const F=_h(Rc,`public/test-${Date.now()}.pdf`);await BC(F,e.value),l.value=!0,console.log(" Direct upload successful")}catch(F){o.value=F.message,console.error(" Direct upload failed:",F)}finally{a.value=!1}},M=async()=>{if(!r.value){alert("Please enter a student ID first");return}try{c.value=!0,u.value=null,f.value=null;const{getFunctions:F,httpsCallable:N}=await js(async()=>{const{getFunctions:W,httpsCallable:G}=await Promise.resolve().then(()=>D0);return{getFunctions:W,httpsCallable:G}},void 0),L=F(),O=N(L,"getStudentFileUrl"),z="test-document.pdf";console.log(` Testing cloud function with studentId: ${r.value}, fileName: ${z}`);const H=await O({studentId:r.value,fileName:z});console.log(" Cloud function result:",H.data),f.value=!0;const V=H.data.url;V&&!V.includes("token=")?console.log(" URL is private (no download token)"):console.warn(" URL may not be private")}catch(F){u.value=F.message,console.error(" Cloud function test failed:",F)}finally{c.value=!1}},D=async()=>{try{const F=N0.encryptionKey;h.value=F&&F!=="your-dev-key-here"?" Configured":" Using default key";try{const N=_h(Rc,"public/test-access");await $C(N),p.value=" Accessible"}catch(N){N.code==="storage/unauthorized"?p.value=" Limited access (expected)":p.value=" Access denied"}try{const N=Ze(qe,"test","test");await nr(N),g.value=" Accessible"}catch{g.value=" Access denied"}try{const N=dt.currentUser;if(N){const L=await N.getIdTokenResult();v.value=L.claims.role||"unknown",console.log(" User role detected:",v.value)}else v.value="not authenticated"}catch(N){v.value="error reading role",console.error("Error reading user role:",N)}}catch(F){console.error("Error checking system status:",F)}};return Gt(()=>{D()}),(F,N)=>(B(),U("div",Pve,[N[16]||(N[16]=d("h2",null," Secure PDF System Test",-1)),d("div",Rve,[N[5]||(N[5]=d("h3",null,"System Status",-1)),d("div",Fve,[d("div",Nve,[N[1]||(N[1]=d("span",{class:"status-label"},"Encryption Key:",-1)),d("span",Ove,X(h.value),1)]),d("div",Mve,[N[2]||(N[2]=d("span",{class:"status-label"},"Storage Access:",-1)),d("span",Lve,X(p.value),1)]),d("div",Bve,[N[3]||(N[3]=d("span",{class:"status-label"},"Firestore Access:",-1)),d("span",Uve,X(g.value),1)]),d("div",$ve,[N[4]||(N[4]=d("span",{class:"status-label"},"User Role:",-1)),d("span",Vve,X(v.value),1)])])]),d("div",Hve,[N[6]||(N[6]=d("h3",null,"Test Student ID",-1)),Oe(d("input",{"onUpdate:modelValue":N[0]||(N[0]=L=>r.value=L),placeholder:"Enter test student ID",class:"student-id-input"},null,512),[[ft,r.value]]),N[7]||(N[7]=d("p",{class:"help-text"},"Enter a student ID to test with. You can:",-1)),N[8]||(N[8]=d("ul",{class:"help-text"},[d("li",null,"Use an existing student ID from your database"),d("li",null,"Create a new test student (requires admin permissions)"),d("li",null,'Use "test-student-123" for testing')],-1)),d("button",{onClick:m,disabled:s.value,class:"btn btn-secondary"},X(s.value?"Creating...":"Create Test Student"),9,jve),d("button",{onClick:A,disabled:i.value,class:"btn btn-secondary"},X(i.value?"Finding...":"Find Existing Student"),9,Gve)]),d("div",Wve,[N[9]||(N[9]=d("h3",null,"Upload Test PDF",-1)),d("input",{type:"file",accept:"application/pdf",onChange:_,ref_key:"fileInput",ref:n},null,544),d("button",{onClick:k,disabled:!e.value||K(P)},X(K(P)?" Uploading...":" Upload PDF"),9,zve),b.value?(B(),U("div",Kve,X(b.value),1)):ve("",!0),y.value?(B(),U("div",qve,"  PDF uploaded successfully! Secure filename: "+X(y.value),1)):ve("",!0)]),y.value?(B(),U("div",Xve,[N[10]||(N[10]=d("h3",null,"Download Test PDF",-1)),d("button",{onClick:I,disabled:K(S)},X(K(S)?" Downloading...":" Download PDF"),9,Yve),E.value?(B(),U("div",Qve,X(E.value),1)):ve("",!0),x.value?(B(),U("div",Jve,"  PDF downloaded successfully! ")):ve("",!0)])):ve("",!0),d("div",Zve,[N[11]||(N[11]=d("h3",null,"Alternative Test: Direct Storage Upload",-1)),N[12]||(N[12]=d("p",{class:"help-text"},"This test bypasses the secure PDF system and uploads directly to storage for comparison.",-1)),d("button",{onClick:C,disabled:!e.value||a.value},X(a.value?" Uploading...":" Test Direct Upload"),9,e1e),o.value?(B(),U("div",t1e,X(o.value),1)):ve("",!0),l.value?(B(),U("div",r1e,"  Direct upload successful! This confirms storage permissions are working. ")):ve("",!0)]),d("div",n1e,[N[14]||(N[14]=d("h3",null,"Test Cloud Function: Private URL Generation",-1)),N[15]||(N[15]=d("p",{class:"help-text"},"Test if the cloud function can generate private URLs for existing files.",-1)),d("button",{onClick:M,disabled:c.value},X(c.value?" Testing...":" Test Cloud Function"),9,s1e),u.value?(B(),U("div",a1e,X(u.value),1)):ve("",!0),f.value?(B(),U("div",i1e,N[13]||(N[13]=[we("  Cloud function working! Private URL generated successfully. "),d("br",null,null,-1),d("small",null,"URL expires in 5 minutes",-1)]))):ve("",!0)])]))}},l1e=bt(o1e,[["__scopeId","data-v-4c041459"]]);async function c1e(){var t;console.log("Starting student ID migration...");try{const e=At(qe,"students"),r=await Wt(e);console.log(`Found ${r.size} students to migrate`);let n=0,s=0;for(const i of r.docs){const a=i.data(),o=i.id;if(!/^\d+$/.test(o)){console.log(`Student ${o} already uses auto-generated ID, skipping`);continue}const l=o;try{const c=Ze(At(qe,"students")),u={...a,app:{...a.app,studentData:{...(t=a.app)==null?void 0:t.studentData,ssid:l}},migratedFrom:o,migratedAt:new Date().toISOString()};await Ht(c,u),await mo(Ze(qe,"students",o)),console.log(` Migrated student ${o}  ${c.id}`),n++}catch(c){console.error(` Failed to migrate student ${o}:`,c),s++}}return console.log(`Migration complete: ${n} migrated, ${s} errors`),{migratedCount:n,errorCount:s}}catch(e){throw console.error("Migration failed:",e),e}}async function u1e(){var t,e;console.log("Verifying migration...");try{const r=At(qe,"students"),n=await Wt(r);let s=0,i=0;for(const a of n.docs){const o=a.data(),l=a.id,c=(e=(t=o.app)==null?void 0:t.studentData)==null?void 0:e.ssid;c?(console.log(` Student ${l} has SSID: ${c}`),s++):(console.warn(` Student ${l} missing SSID in app data`),i++)}return console.log(`Verification complete: ${s} verified, ${i} issues`),{verifiedCount:s,issuesCount:i}}catch(r){throw console.error("Verification failed:",r),r}}async function d1e(){var s,i,a,o;console.log(" Starting period label migration...");const{getNumber:t}=Eo();let e=0,r=0,n=[];try{const l=At(qe,"students"),c=await Wt(l);e=c.size,console.log(` Found ${e} students to check`);for(const u of c.docs)try{const f=u.data();let h=!1,p={};const g=((i=(s=f.app)==null?void 0:s.schedule)==null?void 0:i.periods)||f.schedule||{};if(Object.entries(g).forEach(([v,y])=>{if(isNaN(parseInt(v))){const b=t(v);if(b)p[b]=y,h=!0,console.log(` Converting "${v}"  ${b} for student ${u.id}`);else{const E=v.match(/^(?:period|per)(\d+)$/i);E?(p[parseInt(E[1])]=y,h=!0,console.log(` Converting "${v}"  ${E[1]} for student ${u.id}`)):(console.warn(` Could not convert period key "${v}" for student ${u.id}`),p[v]=y)}}else p[v]=y}),h){const v={};(o=(a=f.app)==null?void 0:a.schedule)!=null&&o.periods?v["app.schedule.periods"]=p:f.schedule&&(v.schedule=p),Object.keys(v).length>0&&(await Lp(Ze(qe,"students",u.id),v),r++,console.log(` Updated student ${u.id}`))}}catch(f){console.error(` Error processing student ${u.id}:`,f),n.push({studentId:u.id,error:f.message})}return console.log(" Migration completed!"),console.log(" Results:"),console.log(`   - Total students checked: ${e}`),console.log(`   - Students migrated: ${r}`),console.log(`   - Errors: ${n.length}`),n.length>0&&(console.warn(" Errors encountered:"),n.forEach(({studentId:u,error:f})=>{console.warn(`   - ${u}: ${f}`)})),{success:!0,totalStudents:e,migratedStudents:r,errors:n}}catch(l){return console.error(" Migration failed:",l),{success:!1,error:l.message,totalStudents:e,migratedStudents:r,errors:n}}}async function f1e(){var n,s;console.log(" Starting migration preview...");const{getNumber:t}=Eo();let e=0,r=[];try{const i=At(qe,"students"),a=await Wt(i);e=a.size;for(const o of a.docs){const l=o.data(),c=((s=(n=l.app)==null?void 0:n.schedule)==null?void 0:s.periods)||l.schedule||{};let u=[];Object.keys(c).forEach(f=>{if(isNaN(parseInt(f))){const h=t(f);if(h)u.push({from:f,to:h});else{const p=f.match(/^(?:period|per)(\d+)$/i);p&&u.push({from:f,to:parseInt(p[1])})}}}),u.length>0&&r.push({id:o.id,name:`${l.firstName||""} ${l.lastName||""}`.trim(),changes:u})}return console.log(" Migration Preview Results:"),console.log(`   - Total students: ${e}`),console.log(`   - Students needing migration: ${r.length}`),r.length>0&&(console.log("   - Changes needed:"),r.forEach(o=>{console.log(`      ${o.name} (${o.id}):`),o.changes.forEach(l=>{console.log(`        "${l.from}"  ${l.to}`)})})),{totalStudents:e,studentsNeedingMigration:r,changesNeeded:r.length>0}}catch(i){return console.error(" Preview failed:",i),{error:i.message,totalStudents:0,studentsNeedingMigration:[],changesNeeded:!1}}}const h1e={class:"testing-view"},p1e={class:"test-section"},m1e={class:"status-grid"},g1e={class:"status-item"},v1e={class:"status-item"},y1e={class:"status-item"},x1e={key:0,class:"test-section"},E1e={class:"settings-display"},_1e={class:"setting-group"},b1e={class:"setting-values"},S1e={class:"setting-group"},A1e={class:"setting-values"},T1e={class:"setting-group"},w1e={class:"setting-values"},C1e={class:"setting-group"},k1e={class:"setting-values"},I1e={class:"test-section"},D1e={class:"admin-action-btns"},P1e=["disabled"],R1e=["disabled"],F1e={class:"test-section"},N1e={class:"integration-test"},O1e={key:0,class:"test-form-container"},M1e={class:"test-section"},L1e={class:"admin-action-btns"},B1e=["disabled"],U1e=["disabled"],$1e={key:0,class:"migration-result"},V1e={class:"test-section"},H1e={class:"period-migration-controls"},j1e=["disabled"],G1e=["disabled"],W1e={key:0,class:"migration-result"},z1e={class:"test-section"},K1e={class:"ssid-test-controls"},q1e=["disabled"],X1e={key:0,class:"ssid-test-result"},Y1e={class:"test-section"},Q1e={__name:"TestingView",setup(t){const{appSettings:e,loadAppSettings:r,resetAppSettings:n,loading:s,error:i}=Os(),{labels:a}=Eo(),o=se(!1),l=se(!1),c=se(!1),u=se(null),f=se(!1),h=se(null),p=se(!1),g=se(null);Gt(async()=>{console.log("TestingView: Component mounted, checking app settings...")});const v=async()=>{try{await r(),console.log("TestingView: Settings reloaded successfully")}catch(_){console.error("TestingView: Error reloading settings:",_)}},y=async()=>{try{await n(),console.log("TestingView: Settings reset successfully")}catch(_){console.error("TestingView: Error resetting settings:",_)}},b=_=>{console.log("TestingView: Test student saved:",_),o.value=!1},E=async()=>{l.value=!0,u.value=null;try{const _=await c1e();u.value=_,console.log("Migration completed:",_)}catch(_){u.value={error:_.message},console.error("Migration failed:",_)}finally{l.value=!1}},x=async()=>{c.value=!0,u.value=null;try{const _=await u1e();u.value=_,console.log("Verification completed:",_)}catch(_){u.value={error:_.message},console.error("Verification failed:",_)}finally{c.value=!1}},w=async()=>{f.value=!0,h.value=null;try{const _=[{sourcedId:"123456789",givenName:"John",familyName:"Doe",specialEducation:"true"},{SSID:"987654321",FirstName:"Jane",LastName:"Smith",IEP:"Yes"},{ssid:"555666777",FirstName:"Bob",LastName:"Johnson",iep:"1"},{StateStudentID:"111222333",FirstName:"Alice",LastName:"Brown",504:"true"}],m={aeriesMapping:{},seisMapping:{},ssidExtraction:{},fieldMapping:{}};_.forEach((k,I)=>{const C={};Object.keys(k).forEach(M=>{C[M]=Wv(M)}),m.aeriesMapping[`row_${I}`]=C}),_.forEach((k,I)=>{const C={};Object.keys(k).forEach(M=>{C[M]=zv(M)}),m.seisMapping[`row_${I}`]=C}),_.forEach((k,I)=>{var M;const C=(M=k.sourcedId||k.SSID||k.ssid||k.StateStudentID||k.stateStudentId)==null?void 0:M.trim();m.ssidExtraction[`row_${I}`]={original:k,extractedSSID:C,success:!!C}});const A=["specialEducation","iep","IEP","plan504","504","disabilities","accommodations"];m.fieldMapping={aeries:A.map(k=>({field:k,mapped:Wv(k)})),seis:A.map(k=>({field:k,mapped:zv(k)}))},h.value={success:!0,message:"SSID resolution test completed successfully",results:m},console.log("SSID resolution test completed:",m)}catch(_){h.value={success:!1,error:_.message,message:"SSID resolution test failed"},console.error("SSID resolution test failed:",_)}finally{f.value=!1}},R=()=>{h.value=null},P=async()=>{p.value=!0,g.value=null;try{console.log("Starting period label migration preview...");const _=await f1e();_.error?g.value=`Preview failed: ${_.error}`:_.changesNeeded?g.value=`Preview completed: ${_.studentsNeedingMigration.length} students need migration (see console for details)`:g.value="No migration needed - all students already use numeric period keys"}catch(_){console.error("Period migration preview failed:",_),g.value=`Preview error: ${_.message}`}finally{p.value=!1}},S=async()=>{if(confirm("This will update period keys from labels to numbers for all students. Continue?")){p.value=!0,g.value=null;try{console.log("Starting period label migration...");const _=await d1e();_.success?(g.value=`Migration completed: ${_.migratedStudents}/${_.totalStudents} students updated`,_.errors.length>0&&(g.value+=` (${_.errors.length} errors - see console)`)):g.value=`Migration failed: ${_.error}`}catch(_){console.error("Period migration failed:",_),g.value=`Migration error: ${_.message}`}finally{p.value=!1}}};return(_,m)=>{var A,k,I,C,M,D;return B(),U("div",h1e,[m[21]||(m[21]=d("h2",null,"App Settings Testing",-1)),d("div",p1e,[m[5]||(m[5]=d("h3",null,"App Settings Status",-1)),d("div",m1e,[d("div",g1e,[m[2]||(m[2]=d("strong",null,"Loading:",-1)),we(" "+X(K(s)?"Yes":"No"),1)]),d("div",v1e,[m[3]||(m[3]=d("strong",null,"Error:",-1)),we(" "+X(K(i)||"None"),1)]),d("div",y1e,[m[4]||(m[4]=d("strong",null,"Loaded:",-1)),we(" "+X(K(e)&&Object.keys(K(e)).length>0?"Yes":"No"),1)])])]),K(e)?(B(),U("div",x1e,[m[10]||(m[10]=d("h3",null,"Current Settings",-1)),d("div",E1e,[d("div",_1e,[d("h4",null,"Grades ("+X(((A=K(e).grades)==null?void 0:A.length)||0)+")",1),d("div",b1e,X(((k=K(e).grades)==null?void 0:k.join(", "))||"None configured"),1)]),d("div",S1e,[d("h4",null,"Class Services ("+X(((I=K(e).classServices)==null?void 0:I.length)||0)+")",1),d("div",A1e,[(B(!0),U(Pe,null,He(K(e).classServices,F=>{var N;return B(),U("div",{key:F.name,class:"service-item"},[d("strong",null,X(F.name)+":",1),we(" "+X(((N=F.enabledSubcategories)==null?void 0:N.join(", "))||"None enabled"),1)])}),128))])]),d("div",T1e,[d("h4",null,"Service Providers ("+X(((C=K(e).serviceProviders)==null?void 0:C.length)||0)+")",1),d("div",w1e,X(((M=K(e).serviceProviders)==null?void 0:M.join(", "))||"None configured"),1)]),d("div",C1e,[m[9]||(m[9]=d("h4",null,"Periods",-1)),d("div",k1e,[m[6]||(m[6]=d("strong",null,"Number:",-1)),we(" "+X(K(e).numPeriods||0),1),m[7]||(m[7]=d("br",null,null,-1)),m[8]||(m[8]=d("strong",null,"Labels:",-1)),we(" "+X(((D=K(a))==null?void 0:D.join(", "))||"None"),1)])])])])):ve("",!0),d("div",I1e,[m[11]||(m[11]=d("h3",null,"Test Actions",-1)),d("div",D1e,[d("button",{onClick:v,disabled:K(s),class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},X(K(s)?"Loading...":"Reload Settings"),9,P1e),d("button",{onClick:y,disabled:K(s),class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Reset to Defaults ",8,R1e)])]),d("div",F1e,[m[13]||(m[13]=d("h3",null,"Component Integration Test",-1)),d("div",N1e,[m[12]||(m[12]=d("p",null,"This section tests if the StudentForm can access app settings:",-1)),d("button",{onClick:m[0]||(m[0]=F=>o.value=!o.value),class:"btn btn-primary"},X(o.value?"Hide":"Show")+" Test Student Form ",1),o.value?(B(),U("div",O1e,[Re(cx,{users:{userRoles:{}},mode:"new",onClose:m[1]||(m[1]=F=>o.value=!1),onSaved:b})])):ve("",!0)])]),d("div",M1e,[m[15]||(m[15]=d("h3",null,"Migration Tools",-1)),d("div",L1e,[d("button",{onClick:E,disabled:l.value,class:"admin-action-btn",style:{"min-width":"160px","max-width":"160px"}},X(l.value?"Migrating...":"Migrate Student IDs"),9,B1e),d("button",{onClick:x,disabled:c.value,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},X(c.value?"Verifying...":"Verify Migration"),9,U1e)]),u.value?(B(),U("div",$1e,[m[14]||(m[14]=d("h4",null,"Migration Result:",-1)),d("pre",null,X(JSON.stringify(u.value,null,2)),1)])):ve("",!0)]),d("div",V1e,[m[17]||(m[17]=d("h3",null,"Period Label Migration",-1)),d("div",H1e,[d("button",{onClick:P,disabled:p.value,class:"btn btn-secondary"},X(p.value?"Previewing...":"Preview Period Migration"),9,j1e),d("button",{onClick:S,disabled:p.value,class:"btn btn-warning"},X(p.value?"Migrating...":"Run Period Migration"),9,G1e)]),g.value?(B(),U("div",W1e,[m[16]||(m[16]=d("h4",null,"Period Migration Result:",-1)),d("p",null,X(g.value),1)])):ve("",!0)]),d("div",z1e,[m[19]||(m[19]=d("h3",null,"SSID Resolution Test",-1)),d("div",K1e,[d("button",{onClick:w,disabled:f.value,class:"btn btn-primary"},X(f.value?"Testing...":"Test SSID Resolution"),9,q1e),d("button",{onClick:R,class:"btn btn-secondary"}," Clear Results ")]),h.value?(B(),U("div",X1e,[m[18]||(m[18]=d("h4",null,"SSID Resolution Test Result:",-1)),d("pre",null,X(JSON.stringify(h.value,null,2)),1)])):ve("",!0)]),d("div",Y1e,[m[20]||(m[20]=d("h3",null," Secure PDF System Test",-1)),Re(l1e)])])}}},J1e=bt(Q1e,[["__scopeId","data-v-16ace2fd"]]),No=se({}),yu=se(!1);function Z1e(){const t=async()=>{try{const s=Ze(qe,"app_settings","admin_panel_permissions"),i=await nr(s);i.exists()?No.value=i.data():No.value=n(),yu.value=!0,console.log("Admin permissions loaded:",No.value)}catch(s){console.error("Error loading admin permissions:",s),No.value=n(),yu.value=!0}},e=(s,i)=>!yu.value||!No.value[s]?!1:i==="admin"?!0:No.value[s][i]===!0,r=(s,i)=>yu.value?s.filter(a=>i==="admin"?!0:e(a.key,i)):[],n=()=>({dashboard:{school_admin:!0,admin_504:!0,sped_chair:!0},usersAdd:{school_admin:!0,admin_504:!0,sped_chair:!1},usersEdit:{school_admin:!0,admin_504:!0,sped_chair:!0},students:{school_admin:!0,admin_504:!0,sped_chair:!0},addStudents:{school_admin:!0,admin_504:!0,sped_chair:!0},"aide-assignment":{school_admin:!0,admin_504:!0,sped_chair:!0},"aide-schedule":{school_admin:!0,admin_504:!0,sped_chair:!0},"time-table":{school_admin:!0,admin_504:!1,sped_chair:!0},seis:{school_admin:!0,admin_504:!0,sped_chair:!0},aeries:{school_admin:!0,admin_504:!0,sped_chair:!0},"testing-links":{school_admin:!0,admin_504:!1,sped_chair:!0},"teacher-feedback":{school_admin:!0,admin_504:!0,sped_chair:!0},"backup-restore":{school_admin:!0,admin_504:!1,sped_chair:!0},settings:{school_admin:!0,admin_504:!0,sped_chair:!0},permissions:{school_admin:!1,admin_504:!1,sped_chair:!1},"iep-security":{school_admin:!1,admin_504:!1,sped_chair:!1},security:{school_admin:!1,admin_504:!1,sped_chair:!1},"component-health":{school_admin:!1,admin_504:!1,sped_chair:!1}});return{adminPermissions:be(()=>No.value),permissionsLoaded:be(()=>yu.value),loadPermissions:t,hasPermission:e,getPermittedTabs:r}}const eye={name:"AdminView",components:{TabBar:kW,UserAddForm:BW,UserTable:lz,AdminStudents:Dz,StudentBulkImporter:FK,AdminPermissions:fq,SeisImport:kq,AeriesImport:Bq,AeriesAPIConnector:KX,AppSettings:JY,AdminAideAssignment:Pk,AdminTimeTable:fD,AdminAideSchedule:AD,AdminBackupRestore:TD,AdminAuditLogs:que,AdminTeacherFeedback:qde,TestingLinks:Xfe,AdminDashboard:Dhe,DebugEncryption:wD,SecurityControlCenter:xme,ComponentHealthDashboard:pge,AdminPermissionsMatrix:Mge,ThemeManager:Dve,TestingView:J1e},setup(){const t=ki(),e=yB(),r=se("dashboard"),n=se("dashboard"),{students:s,fetchStudents:i}=Ii(),{users:a,fetchUsers:o}=_a(),l=xn(),c=be(()=>l.currentUser),{loadPermissions:u,getPermittedTabs:f,permissionsLoaded:h}=Z1e();Gt(async()=>{try{await Promise.all([i(),o(),u()]),c.value&&await rn.logSystemAccess("admin_panel_access",{userRole:c.value.role,accessTime:new Date().toISOString(),initialCategory:e.query.category||"dashboard"});const _=e.query.category;_&&E(_)}catch(_){console.error("Error loading data:",_)}});const p=[{key:"dashboard",label:"Dashboard",category:"dashboard"},{key:"usersAdd",label:"Add Users",category:"users-students"},{key:"usersEdit",label:"Manage Users",category:"users-students"},{key:"students",label:"Students",category:"users-students"},{key:"addStudents",label:"Add Students",category:"users-students"},{key:"aide-assignment",label:"Aide Assignment",category:"aide-management"},{key:"aide-schedule",label:"Aide Schedule",category:"aide-management",status:"not-working"},{key:"time-table",label:"Time Table",category:"aide-management"},{key:"seis",label:"SEIS Import",category:"data-integration",status:"not-active"},{key:"aeries",label:"Aeries API & Import",category:"data-integration",status:"not-active"},{key:"testing-links",label:"Testing Links",category:"data-integration"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"data-integration"},{key:"backup-restore",label:"Backup & Restore",category:"data-integration"},{key:"permissions",label:"Permissions",category:"system-config"},{key:"settings",label:"App Settings",category:"system-config"},{key:"theme",label:"Theme Customization",category:"system-config"},{key:"audit-logs",label:"Audit Logs",category:"monitoring"},{key:"security",label:"Security Controls",category:"monitoring"},{key:"component-health",label:"Component Debug",category:"monitoring"},{key:"app-settings-testing",label:"App Settings Testing",category:"monitoring"}],g=[{key:"admin-permissions",label:"Admin Panel Permissions",category:"monitoring"}],v=be(()=>{var A;const _=(A=c.value)==null?void 0:A.role;if(!h.value)return[];let m=[...p];return _==="admin"&&(m=[...m,...g]),f(m,_)}),y=_=>v.value.filter(m=>m.category===_),b=_=>y(_).length>0,E=async _=>{n.value=_;const m=y(_);m.length>0&&(r.value=m[0].key),c.value&&await rn.logSystemAccess("admin_category_access",{category:_,userRole:c.value.role,availableTabs:m.map(A=>A.key)})};return{activeTab:r,activeCategory:n,getTabsForCategory:y,categoryHasTabs:b,setActiveCategory:E,handleTabChange:async _=>{r.value=_,c.value&&await rn.logSystemAccess("admin_tab_access",{tab:_,category:n.value,userRole:c.value.role})},goToStudents:()=>{t.push("/students")},goToDashboard:()=>{t.push("/admin/dashboard")},handleGoToCategory:_=>{E(_)},handleBulkImporterClose:()=>{r.value="students"},students:s,userMap:a,currentUser:c,permissionsLoaded:h}}},tye={class:"admin-header"},rye={class:"admin-nav"},nye={class:"admin-actions"},sye={key:0,class:"sub-tab-container"},aye={class:"admin-section"},iye={key:0,class:"admin-section"},oye={key:1,class:"admin-section"},lye={key:2,class:"admin-section"},cye={key:3,class:"admin-section"},uye={key:4,class:"admin-section"},dye={key:5,class:"admin-section"},fye={key:6,class:"admin-section"},hye={key:7,class:"admin-section"},pye={key:8,class:"admin-section"},mye={key:9,class:"admin-section"},gye={key:10,class:"admin-section"},vye={key:11,class:"admin-section"},yye={key:12,class:"admin-section"},xye={key:13,class:"admin-section"},Eye={key:14,class:"admin-section"},_ye={key:15,class:"admin-section"},bye={key:16,class:"admin-section"},Sye={key:17,class:"admin-section"},Aye={key:18,class:"admin-section"},Tye={key:19,class:"admin-section"},wye={key:20,class:"admin-section"},Cye={key:21,class:"admin-section"};function kye(t,e,r,n,s,i){const a=_r("TabBar"),o=_r("AdminDashboard"),l=_r("UserAddForm"),c=_r("UserTable"),u=_r("AdminStudents"),f=_r("StudentBulkImporter"),h=_r("AdminPermissions"),p=_r("AdminAideAssignment"),g=_r("AdminAideSchedule"),v=_r("AdminTimeTable"),y=_r("SeisImport"),b=_r("AeriesAPIConnector"),E=_r("AeriesImport"),x=_r("AppSettings"),w=_r("ThemeManager"),R=_r("TestingLinks"),P=_r("AdminTeacherFeedback"),S=_r("AdminBackupRestore"),_=_r("AdminAuditLogs"),m=_r("DebugEncryption"),A=_r("SecurityControlCenter"),k=_r("ComponentHealthDashboard"),I=_r("AdminPermissionsMatrix"),C=_r("TestingView");return B(),U("div",null,[d("div",tye,[e[8]||(e[8]=d("h1",null,"Admin Panel",-1)),d("div",rye,[n.categoryHasTabs("dashboard")?(B(),U("button",{key:0,onClick:e[0]||(e[0]=M=>n.setActiveCategory("dashboard")),class:Ye([{active:n.activeCategory==="dashboard"},"category-btn"])}," Dashboard ",2)):ve("",!0),n.categoryHasTabs("users-students")?(B(),U("button",{key:1,onClick:e[1]||(e[1]=M=>n.setActiveCategory("users-students")),class:Ye([{active:n.activeCategory==="users-students"},"category-btn"])}," User & Student ",2)):ve("",!0),n.categoryHasTabs("aide-management")?(B(),U("button",{key:2,onClick:e[2]||(e[2]=M=>n.setActiveCategory("aide-management")),class:Ye([{active:n.activeCategory==="aide-management"},"category-btn"])}," Paraprofessionals ",2)):ve("",!0),n.categoryHasTabs("data-integration")?(B(),U("button",{key:3,onClick:e[3]||(e[3]=M=>n.setActiveCategory("data-integration")),class:Ye([{active:n.activeCategory==="data-integration"},"category-btn"])}," Data & Integration ",2)):ve("",!0),n.categoryHasTabs("system-config")?(B(),U("button",{key:4,onClick:e[4]||(e[4]=M=>n.setActiveCategory("system-config")),class:Ye([{active:n.activeCategory==="system-config"},"category-btn"])}," Configuration ",2)):ve("",!0),n.categoryHasTabs("monitoring")?(B(),U("button",{key:5,onClick:e[5]||(e[5]=M=>n.setActiveCategory("monitoring")),class:Ye([{active:n.activeCategory==="monitoring"},"category-btn"])}," System ",2)):ve("",!0)]),d("div",nye,[d("button",{onClick:e[6]||(e[6]=(...M)=>n.goToStudents&&n.goToStudents(...M)),class:"return-btn"},e[7]||(e[7]=[d("span",null,"",-1)]))])]),n.activeCategory?(B(),U("div",sye,[Re(a,{tabs:n.getTabsForCategory(n.activeCategory),"active-tab":n.activeTab,onTabChange:n.handleTabChange},null,8,["tabs","active-tab","onTabChange"])])):ve("",!0),d("div",aye,[n.activeTab==="dashboard"?(B(),U("div",iye,[Re(o,{onGoToCategory:n.handleGoToCategory,onGoToStudents:n.goToStudents},null,8,["onGoToCategory","onGoToStudents"])])):ve("",!0),n.activeTab==="usersAdd"?(B(),U("div",oye,[Re(l)])):ve("",!0),n.activeTab==="usersEdit"?(B(),U("div",lye,[Re(c)])):ve("",!0),n.activeTab==="students"?(B(),U("div",cye,[Re(u)])):ve("",!0),n.activeTab==="addStudents"?(B(),U("div",uye,[Re(f,{onClose:n.handleBulkImporterClose,onImported:t.handleStudentsImported},null,8,["onClose","onImported"])])):ve("",!0),n.activeTab==="permissions"?(B(),U("div",dye,[Re(h)])):ve("",!0),n.activeTab==="aide-assignment"?(B(),U("div",fye,[Re(p)])):ve("",!0),n.activeTab==="aide-schedule"?(B(),U("div",hye,[Re(g)])):ve("",!0),n.activeTab==="time-table"?(B(),U("div",pye,[Re(v)])):ve("",!0),n.activeTab==="seis"?(B(),U("div",mye,[Re(y)])):ve("",!0),n.activeTab==="aeries"?(B(),U("div",gye,[Re(b),e[9]||(e[9]=d("hr",{style:{margin:"2rem 0",border:"1px solid #ddd"}},null,-1)),Re(E)])):ve("",!0),n.activeTab==="settings"?(B(),U("div",vye,[Re(x)])):ve("",!0),n.activeTab==="theme"?(B(),U("div",yye,[Re(w)])):ve("",!0),n.activeTab==="testing-links"?(B(),U("div",xye,[Re(R,{students:n.students,userMap:n.userMap},null,8,["students","userMap"])])):ve("",!0),n.activeTab==="teacher-feedback"?(B(),U("div",Eye,[Re(P)])):ve("",!0),n.activeTab==="backup-restore"?(B(),U("div",_ye,[Re(S)])):ve("",!0),n.activeTab==="audit-logs"?(B(),U("div",bye,[Re(_)])):ve("",!0),n.activeTab==="iep-security"?(B(),U("div",Sye,[e[10]||(e[10]=d("h2",null,"IEP Data Security",-1)),Re(m,{"selected-student":t.currentStudent},null,8,["selected-student"])])):ve("",!0),n.activeTab==="security"?(B(),U("div",Aye,[Re(A,{"selected-student":t.currentStudent},null,8,["selected-student"])])):ve("",!0),n.activeTab==="component-health"?(B(),U("div",Tye,[Re(k)])):ve("",!0),n.activeTab==="admin-permissions"?(B(),U("div",wye,[Re(I)])):ve("",!0),n.activeTab==="app-settings-testing"?(B(),U("div",Cye,[Re(C)])):ve("",!0)])])}const Iye=bt(eye,[["render",kye],["__scopeId","data-v-12c6e659"]]),Dye={class:"aide-schedule-view"},Pye={class:"header"},Rye={class:"user-info"},Fye={class:"content"},Nye={key:0,class:"error-message"},Oye={key:1,class:"error-message"},Mye={key:2,class:"loading"},Lye={key:3,class:"schedule-container"},Bye={class:"schedule-display"},Uye={class:"schedule-timeline"},$ye={class:"time-info"},Vye={class:"time"},Hye={class:"type-badge"},jye={class:"assignment-info"},Gye={key:0},Wye={key:1,class:"no-assignment"},zye={class:"schedule-editor"},Kye={class:"editor-content"},qye={class:"time-block-header"},Xye={class:"time"},Yye={class:"type-badge"},Qye={class:"assignment-editor"},Jye=["onUpdate:modelValue"],Zye=["value"],exe=["value"],txe={class:"editor-actions"},rxe=["disabled"],nxe={key:0},sxe={key:1},axe={__name:"AideScheduleView",setup(t){const e=ki(),r=xn(),{userList:n,fetchUsers:s}=_a(),{students:i,fetchStudents:a}=Ii(),{loadAppSettings:o,saveAppSettings:l}=Os(),c=se(!0),u=se(!1),f=se({}),h=se({}),p=be(()=>{var P;return((P=r.currentUser)==null?void 0:P.role)==="paraeducator"}),g=be(()=>{var P;return(P=r.currentUser)==null?void 0:P.uid}),v=be(()=>{var P;return((P=n.value)==null?void 0:P.filter(S=>S.role==="teacher"))||[]});async function y(){var P;try{const S=await nr(Ze(qe,"app_settings","global"));if(S.exists()){const _=S.data();f.value=((P=_.timeTables)==null?void 0:P[0])||_.timeTable||{}}}catch(S){console.error("Error loading time table:",S)}}function b(){return f.value.schedule?f.value.schedule.map((P,S)=>({...P,id:P.id||`block-${S}`,assignments:h.value[P.id||`block-${S}`]||{}})):[]}function E(){return b().map(S=>{const _=S.assignments[g.value];let m="";if(_){if(_.startsWith("teacher:")){const A=_.replace("teacher:",""),k=v.value.find(I=>I.id===A);m=k?k.name||k.email:"Unknown Teacher"}else if(_.startsWith("student:")){const A=_.replace("student:",""),k=i.value.find(I=>I.id===A);m=k?`${it(k,"firstName")} ${it(k,"lastName")}`:"Unknown Student"}}return{...S,assignment:m}})}async function x(){try{u.value=!0;const P=await o(),S={...P.detailedAideSchedule};b().forEach(m=>{S[m.id]||(S[m.id]={}),S[m.id][g.value]=m.assignments[g.value]});const _={...P,detailedAideSchedule:S};await l(_),console.log("My schedule saved successfully")}catch(P){console.error("Error saving my schedule:",P)}finally{u.value=!1}}function w(){r.logout(),e.push("/login")}async function R(){try{c.value=!0,await Promise.all([s(),a(),o(),y()]);const P=await nr(Ze(qe,"app_settings","global"));if(P.exists()){const S=P.data();h.value=S.detailedAideSchedule||{}}c.value=!1}catch(P){console.error("Error loading aide schedule data:",P),c.value=!1}}return Gt(R),(P,S)=>{var _,m;return B(),U("div",Dye,[d("div",Pye,[S[2]||(S[2]=d("h1",null,"My Schedule",-1)),d("div",Rye,[d("span",null,X(((_=K(r).currentUser)==null?void 0:_.name)||((m=K(r).currentUser)==null?void 0:m.email)),1),d("button",{onClick:w,class:"btn btn-secondary"}," Logout ")])]),d("div",Fye,[K(r).currentUser?p.value?c.value?(B(),U("div",Mye," Loading your schedule... ")):(B(),U("div",Lye,[d("div",Bye,[S[7]||(S[7]=d("h2",null,"My Daily Schedule",-1)),d("div",Uye,[(B(!0),U(Pe,null,He(E(),A=>(B(),U("div",{key:A.id,class:Ye(["time-block",A.type])},[d("div",$ye,[d("span",Vye,X(A.startTime)+" - "+X(A.endTime),1),d("span",Hye,X(A.type),1)]),d("div",jye,[A.assignment?(B(),U("span",Gye,X(A.assignment),1)):(B(),U("span",Wye,"No Assignment"))])],2))),128))])]),d("div",zye,[S[9]||(S[9]=d("h2",null,"Edit My Schedule",-1)),d("div",Kye,[(B(!0),U(Pe,null,He(b(),A=>(B(),U("div",{key:A.id,class:"time-block-editor"},[d("div",qye,[d("span",Xye,X(A.startTime)+" - "+X(A.endTime),1),d("span",Yye,X(A.type),1)]),d("div",Qye,[Oe(d("select",{"onUpdate:modelValue":k=>A.assignments[g.value]=k,class:"assignment-select"},[S[8]||(S[8]=d("option",{value:""},"No Assignment",-1)),(B(!0),U(Pe,null,He(v.value,k=>(B(),U("option",{key:k.id,value:`teacher:${k.id}`},X(k.name||k.email),9,Zye))),128)),(B(!0),U(Pe,null,He(K(i),k=>(B(),U("option",{key:k.id,value:`student:${k.id}`},X(K(it)(k,"firstName"))+" "+X(K(it)(k,"lastName")),9,exe))),128))],8,Jye),[[cr,A.assignments[g.value]]])])]))),128))]),d("div",txe,[d("button",{onClick:x,class:"btn btn-primary",disabled:u.value},[u.value?(B(),U("span",nxe,"")):(B(),U("span",sxe,"")),we(" "+X(u.value?"Saving...":"Save My Schedule"),1)],8,rxe)])])])):(B(),U("div",Oye,[S[5]||(S[5]=d("h2",null,"Access Denied",-1)),S[6]||(S[6]=d("p",null,"This page is only available to paraeducators.",-1)),d("button",{onClick:S[1]||(S[1]=A=>K(e).push("/")),class:"btn btn-primary"},"Go Home")])):(B(),U("div",Nye,[S[3]||(S[3]=d("h2",null,"Authentication Required",-1)),S[4]||(S[4]=d("p",null,"Please log in to access this page.",-1)),d("button",{onClick:S[0]||(S[0]=A=>K(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])])}}},ixe=bt(axe,[["__scopeId","data-v-f2c7a0cd"]]),oxe=t=>{console.log("Router guards setup completed")},lxe=[{path:"/login",name:"Login",component:SW},{path:"/",name:"Home",redirect:"/students"},{path:"/students",name:"Students",component:pW,meta:{requiresAuth:!0,allowedRoles:_B}},{path:"/admin",name:"Admin",component:Iye,meta:{requiresAuth:!0,allowedRoles:du}},{path:"/admin/aide-assignment",name:"AdminAideAssignment",component:Pk,meta:{requiresAuth:!0,allowedRoles:du}},{path:"/admin/time-table",name:"AdminTimeTable",component:fD,meta:{requiresAuth:!0,allowedRoles:du}},{path:"/admin/aide-schedule",name:"AdminAideSchedule",component:AD,meta:{requiresAuth:!0,allowedRoles:du}},{path:"/admin/backup-restore",name:"AdminBackupRestore",component:TD,meta:{requiresAuth:!0,allowedRoles:du}},{path:"/aide-schedule",name:"AideSchedule",component:ixe,meta:{requiresAuth:!0,allowedRoles:["paraeducator"]}}],cxe=gB({history:WL("/"),routes:lxe});oxe();const Hx=th(B7),uxe=_8();Hx.use(cxe);Hx.use(uxe);Hx.mount("#app");
//# sourceMappingURL=index-DAWCz0QL.js.map
