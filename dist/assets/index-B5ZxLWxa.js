(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Sh(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Yt={},Gl=[],Ls=()=>{},tD=()=>!1,Id=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Nv=t=>t.startsWith("onUpdate:"),gr=Object.assign,Mv=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},rD=Object.prototype.hasOwnProperty,ir=(t,e)=>rD.call(t,e),ut=Array.isArray,Wl=t=>wc(t)==="[object Map]",tl=t=>wc(t)==="[object Set]",By=t=>wc(t)==="[object Date]",nD=t=>wc(t)==="[object RegExp]",bt=t=>typeof t=="function",_r=t=>typeof t=="string",ua=t=>typeof t=="symbol",fr=t=>t!==null&&typeof t=="object",Lv=t=>(fr(t)||bt(t))&&bt(t.then)&&bt(t.catch),y2=Object.prototype.toString,wc=t=>y2.call(t),sD=t=>wc(t).slice(8,-1),Th=t=>wc(t)==="[object Object]",Bv=t=>_r(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,zl=Sh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ah=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},aD=/-(\w)/g,An=Ah(t=>t.replace(aD,(e,r)=>r?r.toUpperCase():"")),iD=/\B([A-Z])/g,gs=Ah(t=>t.replace(iD,"-$1").toLowerCase()),kd=Ah(t=>t.charAt(0).toUpperCase()+t.slice(1)),_u=Ah(t=>t?`on${kd(t)}`:""),ns=(t,e)=>!Object.is(t,e),Kl=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},yg=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},b0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},S0=t=>{const e=_r(t)?Number(t):NaN;return isNaN(e)?t:e};let Uy;const wh=()=>Uy||(Uy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),oD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",lD=Sh(oD);function Sn(t){if(ut(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=_r(n)?fD(n):Sn(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(_r(t)||fr(t))return t}const cD=/;(?![^(]*\))/g,uD=/:([^]+)/,dD=/\/\*[^]*?\*\//g;function fD(t){const e={};return t.replace(dD,"").split(cD).forEach(r=>{if(r){const n=r.split(uD);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ze(t){let e="";if(_r(t))e=t;else if(ut(t))for(let r=0;r<t.length;r++){const n=Ze(t[r]);n&&(e+=n+" ")}else if(fr(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function hD(t){if(!t)return null;let{class:e,style:r}=t;return e&&!_r(e)&&(t.class=Ze(e)),r&&(t.style=Sn(r)),t}const pD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mD=Sh(pD);function E2(t){return!!t||t===""}function gD(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=ro(t[n],e[n]);return r}function ro(t,e){if(t===e)return!0;let r=By(t),n=By(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=ua(t),n=ua(e),r||n)return t===e;if(r=ut(t),n=ut(e),r||n)return r&&n?gD(t,e):!1;if(r=fr(t),n=fr(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!ro(t[a],e[a]))return!1}}return String(t)===String(e)}function Ch(t,e){return t.findIndex(r=>ro(r,e))}const _2=t=>!!(t&&t.__v_isRef===!0),J=t=>_r(t)?t:t==null?"":ut(t)||fr(t)&&(t.toString===y2||!bt(t.toString))?_2(t)?J(t.value):JSON.stringify(t,b2,2):String(t),b2=(t,e)=>_2(e)?b2(t,e.value):Wl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],i)=>(r[Mp(n,i)+" =>"]=s,r),{})}:tl(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Mp(r))}:ua(e)?Mp(e):fr(e)&&!ut(e)&&!Th(e)?String(e):e,Mp=(t,e="")=>{var r;return ua(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ln;class Uv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ln,!e&&Ln&&(this.index=(Ln.scopes||(Ln.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Ln;try{return Ln=this,e()}finally{Ln=r}}}on(){++this._on===1&&(this.prevScope=Ln,Ln=this)}off(){this._on>0&&--this._on===0&&(Ln=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function $v(t){return new Uv(t)}function Vv(){return Ln}function S2(t,e=!1){Ln&&Ln.cleanups.push(t)}let xr;const Lp=new WeakSet;class Qu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ln&&Ln.active&&Ln.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Lp.has(this)&&(Lp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||A2(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,$y(this),w2(this);const e=xr,r=oa;xr=this,oa=!0;try{return this.fn()}finally{C2(this),xr=e,oa=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Gv(e);this.deps=this.depsTail=void 0,$y(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Lp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Eg(this)&&this.run()}get dirty(){return Eg(this)}}let T2=0,bu,Su;function A2(t,e=!1){if(t.flags|=8,e){t.next=Su,Su=t;return}t.next=bu,bu=t}function Hv(){T2++}function jv(){if(--T2>0)return;if(Su){let e=Su;for(Su=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;bu;){let e=bu;for(bu=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function w2(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function C2(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),Gv(n),vD(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function Eg(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(I2(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function I2(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Zu)||(t.globalVersion=Zu,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Eg(t))))return;t.flags|=2;const e=t.dep,r=xr,n=oa;xr=t,oa=!0;try{w2(t);const s=t.fn(t._value);(e.version===0||ns(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{xr=r,oa=n,C2(t),t.flags&=-3}}function Gv(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)Gv(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function vD(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}function xD(t,e){t.effect instanceof Qu&&(t=t.effect.fn);const r=new Qu(t);e&&gr(r,e);try{r.run()}catch(s){throw r.stop(),s}const n=r.run.bind(r);return n.effect=r,n}function yD(t){t.effect.stop()}let oa=!0;const k2=[];function ui(){k2.push(oa),oa=!1}function di(){const t=k2.pop();oa=t===void 0?!0:t}function $y(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=xr;xr=void 0;try{e()}finally{xr=r}}}let Zu=0;class ED{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ih{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!xr||!oa||xr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==xr)r=this.activeLink=new ED(xr,this),xr.deps?(r.prevDep=xr.depsTail,xr.depsTail.nextDep=r,xr.depsTail=r):xr.deps=xr.depsTail=r,D2(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=xr.depsTail,r.nextDep=void 0,xr.depsTail.nextDep=r,xr.depsTail=r,xr.deps===r&&(xr.deps=n)}return r}trigger(e){this.version++,Zu++,this.notify(e)}notify(e){Hv();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{jv()}}}function D2(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)D2(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const T0=new WeakMap,Oo=Symbol(""),_g=Symbol(""),ed=Symbol("");function $n(t,e,r){if(oa&&xr){let n=T0.get(t);n||T0.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new Ih),s.map=n,s.key=r),s.track()}}function Ka(t,e,r,n,s,i){const a=T0.get(t);if(!a){Zu++;return}const o=l=>{l&&l.trigger()};if(Hv(),e==="clear")a.forEach(o);else{const l=ut(t),c=l&&Bv(r);if(l&&r==="length"){const u=Number(n);a.forEach((f,h)=>{(h==="length"||h===ed||!ua(h)&&h>=u)&&o(f)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),c&&o(a.get(ed)),e){case"add":l?c&&o(a.get("length")):(o(a.get(Oo)),Wl(t)&&o(a.get(_g)));break;case"delete":l||(o(a.get(Oo)),Wl(t)&&o(a.get(_g)));break;case"set":Wl(t)&&o(a.get(Oo));break}}jv()}function _D(t,e){const r=T0.get(t);return r&&r.get(e)}function bl(t){const e=qt(t);return e===t?e:($n(e,"iterate",ed),Cs(t)?e:e.map(Tn))}function kh(t){return $n(t=qt(t),"iterate",ed),t}const bD={__proto__:null,[Symbol.iterator](){return Bp(this,Symbol.iterator,Tn)},concat(...t){return bl(this).concat(...t.map(e=>ut(e)?bl(e):e))},entries(){return Bp(this,"entries",t=>(t[1]=Tn(t[1]),t))},every(t,e){return Ga(this,"every",t,e,void 0,arguments)},filter(t,e){return Ga(this,"filter",t,e,r=>r.map(Tn),arguments)},find(t,e){return Ga(this,"find",t,e,Tn,arguments)},findIndex(t,e){return Ga(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ga(this,"findLast",t,e,Tn,arguments)},findLastIndex(t,e){return Ga(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ga(this,"forEach",t,e,void 0,arguments)},includes(...t){return Up(this,"includes",t)},indexOf(...t){return Up(this,"indexOf",t)},join(t){return bl(this).join(t)},lastIndexOf(...t){return Up(this,"lastIndexOf",t)},map(t,e){return Ga(this,"map",t,e,void 0,arguments)},pop(){return qc(this,"pop")},push(...t){return qc(this,"push",t)},reduce(t,...e){return Vy(this,"reduce",t,e)},reduceRight(t,...e){return Vy(this,"reduceRight",t,e)},shift(){return qc(this,"shift")},some(t,e){return Ga(this,"some",t,e,void 0,arguments)},splice(...t){return qc(this,"splice",t)},toReversed(){return bl(this).toReversed()},toSorted(t){return bl(this).toSorted(t)},toSpliced(...t){return bl(this).toSpliced(...t)},unshift(...t){return qc(this,"unshift",t)},values(){return Bp(this,"values",Tn)}};function Bp(t,e,r){const n=kh(t),s=n[e]();return n!==t&&!Cs(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const SD=Array.prototype;function Ga(t,e,r,n,s,i){const a=kh(t),o=a!==t&&!Cs(t),l=a[e];if(l!==SD[e]){const f=l.apply(t,i);return o?Tn(f):f}let c=r;a!==t&&(o?c=function(f,h){return r.call(this,Tn(f),h,t)}:r.length>2&&(c=function(f,h){return r.call(this,f,h,t)}));const u=l.call(a,c,n);return o&&s?s(u):u}function Vy(t,e,r,n){const s=kh(t);let i=r;return s!==t&&(Cs(t)?r.length>3&&(i=function(a,o,l){return r.call(this,a,o,l,t)}):i=function(a,o,l){return r.call(this,a,Tn(o),l,t)}),s[e](i,...n)}function Up(t,e,r){const n=qt(t);$n(n,"iterate",ed);const s=n[e](...r);return(s===-1||s===!1)&&Rh(r[0])?(r[0]=qt(r[0]),n[e](...r)):s}function qc(t,e,r=[]){ui(),Hv();const n=qt(t)[e].apply(t,r);return jv(),di(),n}const TD=Sh("__proto__,__v_isRef,__isVue"),P2=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ua));function AD(t){ua(t)||(t=String(t));const e=qt(this);return $n(e,"has",t),e.hasOwnProperty(t)}class R2{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?B2:L2:i?M2:N2).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=ut(e);if(!s){let l;if(a&&(l=bD[r]))return l;if(r==="hasOwnProperty")return AD}const o=Reflect.get(e,r,Tr(e)?e:n);return(ua(r)?P2.has(r):TD(r))||(s||$n(e,"get",r),i)?o:Tr(o)?a&&Bv(r)?o:o.value:fr(o)?s?zv(o):xs(o):o}}class F2 extends R2{constructor(e=!1){super(!1,e)}set(e,r,n,s){let i=e[r];if(!this._isShallow){const l=fi(i);if(!Cs(n)&&!fi(n)&&(i=qt(i),n=qt(n)),!ut(e)&&Tr(i)&&!Tr(n))return l?!1:(i.value=n,!0)}const a=ut(e)&&Bv(r)?Number(r)<e.length:ir(e,r),o=Reflect.set(e,r,n,Tr(e)?e:s);return e===qt(s)&&(a?ns(n,i)&&Ka(e,"set",r,n):Ka(e,"add",r,n)),o}deleteProperty(e,r){const n=ir(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&Ka(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!ua(r)||!P2.has(r))&&$n(e,"has",r),n}ownKeys(e){return $n(e,"iterate",ut(e)?"length":Oo),Reflect.ownKeys(e)}}class O2 extends R2{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const wD=new F2,CD=new O2,ID=new F2(!0),kD=new O2(!0),bg=t=>t,xf=t=>Reflect.getPrototypeOf(t);function DD(t,e,r){return function(...n){const s=this.__v_raw,i=qt(s),a=Wl(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=s[t](...n),u=r?bg:e?A0:Tn;return!e&&$n(i,"iterate",l?_g:Oo),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:o?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function yf(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function PD(t,e){const r={get(s){const i=this.__v_raw,a=qt(i),o=qt(s);t||(ns(s,o)&&$n(a,"get",s),$n(a,"get",o));const{has:l}=xf(a),c=e?bg:t?A0:Tn;if(l.call(a,s))return c(i.get(s));if(l.call(a,o))return c(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&$n(qt(s),"iterate",Oo),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=qt(i),o=qt(s);return t||(ns(s,o)&&$n(a,"has",s),$n(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=qt(o),c=e?bg:t?A0:Tn;return!t&&$n(l,"iterate",Oo),o.forEach((u,f)=>s.call(i,c(u),c(f),a))}};return gr(r,t?{add:yf("add"),set:yf("set"),delete:yf("delete"),clear:yf("clear")}:{add(s){!e&&!Cs(s)&&!fi(s)&&(s=qt(s));const i=qt(this);return xf(i).has.call(i,s)||(i.add(s),Ka(i,"add",s,s)),this},set(s,i){!e&&!Cs(i)&&!fi(i)&&(i=qt(i));const a=qt(this),{has:o,get:l}=xf(a);let c=o.call(a,s);c||(s=qt(s),c=o.call(a,s));const u=l.call(a,s);return a.set(s,i),c?ns(i,u)&&Ka(a,"set",s,i):Ka(a,"add",s,i),this},delete(s){const i=qt(this),{has:a,get:o}=xf(i);let l=a.call(i,s);l||(s=qt(s),l=a.call(i,s)),o&&o.call(i,s);const c=i.delete(s);return l&&Ka(i,"delete",s,void 0),c},clear(){const s=qt(this),i=s.size!==0,a=s.clear();return i&&Ka(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=DD(s,t,e)}),r}function Dh(t,e){const r=PD(t,e);return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(ir(r,s)&&s in n?r:n,s,i)}const RD={get:Dh(!1,!1)},FD={get:Dh(!1,!0)},OD={get:Dh(!0,!1)},ND={get:Dh(!0,!0)},N2=new WeakMap,M2=new WeakMap,L2=new WeakMap,B2=new WeakMap;function MD(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function LD(t){return t.__v_skip||!Object.isExtensible(t)?0:MD(sD(t))}function xs(t){return fi(t)?t:Ph(t,!1,wD,RD,N2)}function Wv(t){return Ph(t,!1,ID,FD,M2)}function zv(t){return Ph(t,!0,CD,OD,L2)}function BD(t){return Ph(t,!0,kD,ND,B2)}function Ph(t,e,r,n,s){if(!fr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=LD(t);if(i===0)return t;const a=s.get(t);if(a)return a;const o=new Proxy(t,i===2?n:r);return s.set(t,o),o}function Aa(t){return fi(t)?Aa(t.__v_raw):!!(t&&t.__v_isReactive)}function fi(t){return!!(t&&t.__v_isReadonly)}function Cs(t){return!!(t&&t.__v_isShallow)}function Rh(t){return t?!!t.__v_raw:!1}function qt(t){const e=t&&t.__v_raw;return e?qt(e):t}function Fh(t){return!ir(t,"__v_skip")&&Object.isExtensible(t)&&yg(t,"__v_skip",!0),t}const Tn=t=>fr(t)?xs(t):t,A0=t=>fr(t)?zv(t):t;function Tr(t){return t?t.__v_isRef===!0:!1}function se(t){return U2(t,!1)}function Kv(t){return U2(t,!0)}function U2(t,e){return Tr(t)?t:new UD(t,e)}class UD{constructor(e,r){this.dep=new Ih,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:qt(e),this._value=r?e:Tn(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Cs(e)||fi(e);e=n?e:qt(e),ns(e,r)&&(this._rawValue=e,this._value=n?e:Tn(e),this.dep.trigger())}}function $D(t){t.dep&&t.dep.trigger()}function Z(t){return Tr(t)?t.value:t}function VD(t){return bt(t)?t():Z(t)}const HD={get:(t,e,r)=>e==="__v_raw"?t:Z(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return Tr(s)&&!Tr(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function qv(t){return Aa(t)?t:new Proxy(t,HD)}class jD{constructor(e){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new Ih,{get:n,set:s}=e(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function $2(t){return new jD(t)}function V2(t){const e=ut(t)?new Array(t.length):{};for(const r in t)e[r]=H2(t,r);return e}class GD{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return _D(qt(this._object),this._key)}}class WD{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function zD(t,e,r){return Tr(t)?t:bt(t)?new WD(t):fr(t)&&arguments.length>1?H2(t,e,r):se(t)}function H2(t,e,r){const n=t[e];return Tr(n)?n:new GD(t,e,r)}class KD{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Ih(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Zu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&xr!==this)return A2(this,!0),!0}get value(){const e=this.dep.track();return I2(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function qD(t,e,r=!1){let n,s;return bt(t)?n=t:(n=t.get,s=t.set),new KD(n,s,r)}const XD={GET:"get",HAS:"has",ITERATE:"iterate"},YD={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},Ef={},w0=new WeakMap;let Li;function JD(){return Li}function j2(t,e=!1,r=Li){if(r){let n=w0.get(r);n||w0.set(r,n=[]),n.push(t)}}function QD(t,e,r=Yt){const{immediate:n,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=r,c=I=>s?I:Cs(I)||s===!1||s===0?qa(I,1):qa(I);let u,f,h,p,m=!1,g=!1;if(Tr(t)?(f=()=>t.value,m=Cs(t)):Aa(t)?(f=()=>c(t),m=!0):ut(t)?(g=!0,m=t.some(I=>Aa(I)||Cs(I)),f=()=>t.map(I=>{if(Tr(I))return I.value;if(Aa(I))return c(I);if(bt(I))return l?l(I,2):I()})):bt(t)?e?f=l?()=>l(t,2):t:f=()=>{if(h){ui();try{h()}finally{di()}}const I=Li;Li=u;try{return l?l(t,3,[p]):t(p)}finally{Li=I}}:f=Ls,e&&s){const I=f,R=s===!0?1/0:s;f=()=>qa(I(),R)}const v=Vv(),x=()=>{u.stop(),v&&v.active&&Mv(v.effects,u)};if(i&&e){const I=e;e=(...R)=>{I(...R),x()}}let y=g?new Array(t.length).fill(Ef):Ef;const _=I=>{if(!(!(u.flags&1)||!u.dirty&&!I))if(e){const R=u.run();if(s||m||(g?R.some((A,E)=>ns(A,y[E])):ns(R,y))){h&&h();const A=Li;Li=u;try{const E=[R,y===Ef?void 0:g&&y[0]===Ef?[]:y,p];y=R,l?l(e,3,E):e(...E)}finally{Li=A}}}else u.run()};return o&&o(_),u=new Qu(f),u.scheduler=a?()=>a(_,!1):_,p=I=>j2(I,!1,u),h=u.onStop=()=>{const I=w0.get(u);if(I){if(l)l(I,4);else for(const R of I)R();w0.delete(u)}},e?n?_(!0):y=u.run():a?a(_.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function qa(t,e=1/0,r){if(e<=0||!fr(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Tr(t))qa(t.value,e,r);else if(ut(t))for(let n=0;n<t.length;n++)qa(t[n],e,r);else if(tl(t)||Wl(t))t.forEach(n=>{qa(n,e,r)});else if(Th(t)){for(const n in t)qa(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&qa(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const G2=[];function ZD(t){G2.push(t)}function eP(){G2.pop()}function tP(t,e){}const rP={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},nP={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Cc(t,e,r,n){try{return n?t(...n):t()}catch(s){rl(s,e,r)}}function Vs(t,e,r,n){if(bt(t)){const s=Cc(t,e,r,n);return s&&Lv(s)&&s.catch(i=>{rl(i,e,r)}),s}if(ut(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Vs(t[i],e,r,n));return s}}function rl(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Yt;if(e){let o=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,l,c)===!1)return}o=o.parent}if(i){ui(),Cc(i,null,10,[t,l,c]),di();return}}sP(t,r,s,n,a)}function sP(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const ss=[];let ba=-1;const ql=[];let Bi=null,Pl=0;const W2=Promise.resolve();let C0=null;function nl(t){const e=C0||W2;return t?e.then(this?t.bind(this):t):e}function aP(t){let e=ba+1,r=ss.length;for(;e<r;){const n=e+r>>>1,s=ss[n],i=rd(s);i<t||i===t&&s.flags&2?e=n+1:r=n}return e}function Xv(t){if(!(t.flags&1)){const e=rd(t),r=ss[ss.length-1];!r||!(t.flags&2)&&e>=rd(r)?ss.push(t):ss.splice(aP(e),0,t),t.flags|=1,z2()}}function z2(){C0||(C0=W2.then(K2))}function td(t){ut(t)?ql.push(...t):Bi&&t.id===-1?Bi.splice(Pl+1,0,t):t.flags&1||(ql.push(t),t.flags|=1),z2()}function Hy(t,e,r=ba+1){for(;r<ss.length;r++){const n=ss[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;ss.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function I0(t){if(ql.length){const e=[...new Set(ql)].sort((r,n)=>rd(r)-rd(n));if(ql.length=0,Bi){Bi.push(...e);return}for(Bi=e,Pl=0;Pl<Bi.length;Pl++){const r=Bi[Pl];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Bi=null,Pl=0}}const rd=t=>t.id==null?t.flags&2?-1:1/0:t.id;function K2(t){try{for(ba=0;ba<ss.length;ba++){const e=ss[ba];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Cc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ba<ss.length;ba++){const e=ss[ba];e&&(e.flags&=-2)}ba=-1,ss.length=0,I0(),C0=null,(ss.length||ql.length)&&K2()}}let Rl,_f=[];function q2(t,e){var r,n;Rl=t,Rl?(Rl.enabled=!0,_f.forEach(({event:s,args:i})=>Rl.emit(s,...i)),_f=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{q2(i,e)}),setTimeout(()=>{Rl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,_f=[])},3e3)):_f=[]}let an=null,Oh=null;function nd(t){const e=an;return an=t,Oh=t&&t.type.__scopeId||null,e}function iP(t){Oh=t}function oP(){Oh=null}const lP=t=>Nh;function Nh(t,e=an,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&Dg(-1);const i=nd(e);let a;try{a=t(...s)}finally{nd(i),n._d&&Dg(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function we(t,e){if(an===null)return t;const r=Fd(an),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,o,l=Yt]=e[s];i&&(bt(i)&&(i={mounted:i,updated:i}),i.deep&&qa(a),n.push({dir:i,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function Sa(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(ui(),Vs(l,r,8,[t.el,o,t,e]),di())}}const X2=Symbol("_vte"),Y2=t=>t.__isTeleport,Tu=t=>t&&(t.disabled||t.disabled===""),jy=t=>t&&(t.defer||t.defer===""),Gy=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Wy=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Sg=(t,e)=>{const r=t&&t.to;return _r(r)?e?e(r):null:r},J2={name:"Teleport",__isTeleport:!0,process(t,e,r,n,s,i,a,o,l,c){const{mc:u,pc:f,pbc:h,o:{insert:p,querySelector:m,createText:g,createComment:v}}=c,x=Tu(e.props);let{shapeFlag:y,children:_,dynamicChildren:I}=e;if(t==null){const R=e.el=g(""),A=e.anchor=g("");p(R,r,n),p(A,r,n);const E=(b,S)=>{y&16&&(s&&s.isCE&&(s.ce._teleportTarget=b),u(_,b,S,s,i,a,o,l))},T=()=>{const b=e.target=Sg(e.props,m),S=Q2(b,e,g,p);b&&(a!=="svg"&&Gy(b)?a="svg":a!=="mathml"&&Wy(b)&&(a="mathml"),x||(E(b,S),t0(e,!1)))};x&&(E(r,A),t0(e,!0)),jy(e.props)?(e.el.__isMounted=!1,tn(()=>{T(),delete e.el.__isMounted},i)):T()}else{if(jy(e.props)&&t.el.__isMounted===!1){tn(()=>{J2.process(t,e,r,n,s,i,a,o,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const R=e.anchor=t.anchor,A=e.target=t.target,E=e.targetAnchor=t.targetAnchor,T=Tu(t.props),b=T?r:A,S=T?R:E;if(a==="svg"||Gy(A)?a="svg":(a==="mathml"||Wy(A))&&(a="mathml"),I?(h(t.dynamicChildren,I,b,s,i,a,o),i1(t,e,!0)):l||f(t,e,b,S,s,i,a,o,!1),x)T?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):bf(e,r,R,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const k=e.target=Sg(e.props,m);k&&bf(e,k,null,c,0)}else T&&bf(e,A,E,c,1);t0(e,x)}},remove(t,e,r,{um:n,o:{remove:s}},i){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:f,props:h}=t;if(f&&(s(c),s(u)),i&&s(l),a&16){const p=i||!Tu(h);for(let m=0;m<o.length;m++){const g=o[m];n(g,e,r,p,!!g.dynamicChildren)}}},move:bf,hydrate:cP};function bf(t,e,r,{o:{insert:n},m:s},i=2){i===0&&n(t.targetAnchor,e,r);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=t,f=i===2;if(f&&n(a,e,r),(!f||Tu(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,r,2);f&&n(o,e,r)}function cP(t,e,r,n,s,i,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},f){const h=e.target=Sg(e.props,l);if(h){const p=Tu(e.props),m=h._lpa||h.firstChild;if(e.shapeFlag&16)if(p)e.anchor=f(a(t),e,o(t),r,n,s,i),e.targetStart=m,e.targetAnchor=m&&a(m);else{e.anchor=a(t);let g=m;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,h._lpa=e.targetAnchor&&a(e.targetAnchor);break}}g=a(g)}e.targetAnchor||Q2(h,e,u,c),f(m&&a(m),e,h,r,n,s,i)}t0(e,p)}return e.anchor&&a(e.anchor)}const uP=J2;function t0(t,e){const r=t.ctx;if(r&&r.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function Q2(t,e,r,n){const s=e.targetStart=r(""),i=e.targetAnchor=r("");return s[X2]=i,t&&(n(s,t),n(i,t)),i}const Ui=Symbol("_leaveCb"),Sf=Symbol("_enterCb");function Yv(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ut(()=>{t.isMounted=!0}),Uh(()=>{t.isUnmounting=!0}),t}const Ds=[Function,Array],Jv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ds,onEnter:Ds,onAfterEnter:Ds,onEnterCancelled:Ds,onBeforeLeave:Ds,onLeave:Ds,onAfterLeave:Ds,onLeaveCancelled:Ds,onBeforeAppear:Ds,onAppear:Ds,onAfterAppear:Ds,onAppearCancelled:Ds},Z2=t=>{const e=t.subTree;return e.component?Z2(e.component):e},dP={name:"BaseTransition",props:Jv,setup(t,{slots:e}){const r=Gs(),n=Yv();return()=>{const s=e.default&&Mh(e.default(),!0);if(!s||!s.length)return;const i=eT(s),a=qt(t),{mode:o}=a;if(n.isLeaving)return $p(i);const l=zy(i);if(!l)return $p(i);let c=oc(l,a,n,r,f=>c=f);l.type!==Gr&&hi(l,c);let u=r.subTree&&zy(r.subTree);if(u&&u.type!==Gr&&!ta(l,u)&&Z2(r).type!==Gr){let f=oc(u,a,n,r);if(hi(u,f),o==="out-in"&&l.type!==Gr)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete f.afterLeave,u=void 0},$p(i);o==="in-out"&&l.type!==Gr?f.delayLeave=(h,p,m)=>{const g=rT(n,u);g[String(u.key)]=u,h[Ui]=()=>{p(),h[Ui]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function eT(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==Gr){e=r;break}}return e}const tT=dP;function rT(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function oc(t,e,r,n,s){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:p,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:x,onAfterAppear:y,onAppearCancelled:_}=e,I=String(t.key),R=rT(r,t),A=(b,S)=>{b&&Vs(b,n,9,S)},E=(b,S)=>{const k=S[1];A(b,S),ut(b)?b.every(w=>w.length<=1)&&k():b.length<=1&&k()},T={mode:a,persisted:o,beforeEnter(b){let S=l;if(!r.isMounted)if(i)S=v||l;else return;b[Ui]&&b[Ui](!0);const k=R[I];k&&ta(t,k)&&k.el[Ui]&&k.el[Ui](),A(S,[b])},enter(b){let S=c,k=u,w=f;if(!r.isMounted)if(i)S=x||c,k=y||u,w=_||f;else return;let D=!1;const N=b[Sf]=F=>{D||(D=!0,F?A(w,[b]):A(k,[b]),T.delayedLeave&&T.delayedLeave(),b[Sf]=void 0)};S?E(S,[b,N]):N()},leave(b,S){const k=String(t.key);if(b[Sf]&&b[Sf](!0),r.isUnmounting)return S();A(h,[b]);let w=!1;const D=b[Ui]=N=>{w||(w=!0,S(),N?A(g,[b]):A(m,[b]),b[Ui]=void 0,R[k]===t&&delete R[k])};R[k]=t,p?E(p,[b,D]):D()},clone(b){const S=oc(b,e,r,n,s);return s&&s(S),S}};return T}function $p(t){if(Pd(t))return t=Da(t),t.children=null,t}function zy(t){if(!Pd(t))return Y2(t.type)&&t.children?eT(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&bt(r.default))return r.default()}}function hi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,hi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Mh(t,e=!1,r){let n=[],s=0;for(let i=0;i<t.length;i++){let a=t[i];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:i);a.type===Re?(a.patchFlag&128&&s++,n=n.concat(Mh(a.children,e,o))):(e||a.type!==Gr)&&n.push(o!=null?Da(a,{key:o}):a)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Dd(t,e){return bt(t)?gr({name:t.name},e,{setup:t}):t}function fP(){const t=Gs();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Qv(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function hP(t){const e=Gs(),r=Kv(null);if(e){const s=e.refs===Yt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>r.value,set:i=>r.value=i})}return r}function Xl(t,e,r,n,s=!1){if(ut(t)){t.forEach((m,g)=>Xl(m,e&&(ut(e)?e[g]:e),r,n,s));return}if(Ji(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Xl(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?Fd(n.component):n.el,a=s?null:i,{i:o,r:l}=t,c=e&&e.r,u=o.refs===Yt?o.refs={}:o.refs,f=o.setupState,h=qt(f),p=f===Yt?()=>!1:m=>ir(h,m);if(c!=null&&c!==l&&(_r(c)?(u[c]=null,p(c)&&(f[c]=null)):Tr(c)&&(c.value=null)),bt(l))Cc(l,o,12,[a,u]);else{const m=_r(l),g=Tr(l);if(m||g){const v=()=>{if(t.f){const x=m?p(l)?f[l]:u[l]:l.value;s?ut(x)&&Mv(x,i):ut(x)?x.includes(i)||x.push(i):m?(u[l]=[i],p(l)&&(f[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else m?(u[l]=a,p(l)&&(f[l]=a)):g&&(l.value=a,t.k&&(u[t.k]=a))};a?(v.id=-1,tn(v,r)):v()}}}let Ky=!1;const Sl=()=>{Ky||(console.error("Hydration completed but contains mismatches."),Ky=!0)},pP=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",mP=t=>t.namespaceURI.includes("MathML"),Tf=t=>{if(t.nodeType===1){if(pP(t))return"svg";if(mP(t))return"mathml"}},Ul=t=>t.nodeType===8;function gP(t){const{mt:e,p:r,o:{patchProp:n,createText:s,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=t,u=(_,I)=>{if(!I.hasChildNodes()){r(null,_,I),I0(),I._vnode=_;return}f(I.firstChild,_,null,null,null),I0(),I._vnode=_},f=(_,I,R,A,E,T=!1)=>{T=T||!!I.dynamicChildren;const b=Ul(_)&&_.data==="[",S=()=>g(_,I,R,A,E,b),{type:k,ref:w,shapeFlag:D,patchFlag:N}=I;let F=_.nodeType;I.el=_,N===-2&&(T=!1,I.dynamicChildren=null);let P=null;switch(k){case Qi:F!==3?I.children===""?(l(I.el=s(""),a(_),_),P=_):P=S():(_.data!==I.children&&(Sl(),_.data=I.children),P=i(_));break;case Gr:y(_)?(P=i(_),x(I.el=_.content.firstChild,_,R)):F!==8||b?P=S():P=i(_);break;case Mo:if(b&&(_=i(_),F=_.nodeType),F===1||F===3){P=_;const O=!I.children.length;for(let M=0;M<I.staticCount;M++)O&&(I.children+=P.nodeType===1?P.outerHTML:P.data),M===I.staticCount-1&&(I.anchor=P),P=i(P);return b?i(P):P}else S();break;case Re:b?P=m(_,I,R,A,E,T):P=S();break;default:if(D&1)(F!==1||I.type.toLowerCase()!==_.tagName.toLowerCase())&&!y(_)?P=S():P=h(_,I,R,A,E,T);else if(D&6){I.slotScopeIds=E;const O=a(_);if(b?P=v(_):Ul(_)&&_.data==="teleport start"?P=v(_,_.data,"teleport end"):P=i(_),e(I,O,null,R,A,Tf(O),T),Ji(I)&&!I.type.__asyncResolved){let M;b?(M=st(Re),M.anchor=P?P.previousSibling:O.lastChild):M=_.nodeType===3?Oe(""):st("div"),M.el=_,I.component.subTree=M}}else D&64?F!==8?P=S():P=I.type.hydrate(_,I,R,A,E,T,t,p):D&128&&(P=I.type.hydrate(_,I,R,A,Tf(a(_)),E,T,t,f))}return w!=null&&Xl(w,null,A,I),P},h=(_,I,R,A,E,T)=>{T=T||!!I.dynamicChildren;const{type:b,props:S,patchFlag:k,shapeFlag:w,dirs:D,transition:N}=I,F=b==="input"||b==="option";if(F||k!==-1){D&&Sa(I,null,R,"created");let P=!1;if(y(_)){P=IT(null,N)&&R&&R.vnode.props&&R.vnode.props.appear;const M=_.content.firstChild;if(P){const U=M.getAttribute("class");U&&(M.$cls=U),N.beforeEnter(M)}x(M,_,R),I.el=_=M}if(w&16&&!(S&&(S.innerHTML||S.textContent))){let M=p(_.firstChild,I,_,R,A,E,T);for(;M;){Af(_,1)||Sl();const U=M;M=M.nextSibling,o(U)}}else if(w&8){let M=I.children;M[0]===`
`&&(_.tagName==="PRE"||_.tagName==="TEXTAREA")&&(M=M.slice(1)),_.textContent!==M&&(Af(_,0)||Sl(),_.textContent=I.children)}if(S){if(F||!T||k&48){const M=_.tagName.includes("-");for(const U in S)(F&&(U.endsWith("value")||U==="indeterminate")||Id(U)&&!zl(U)||U[0]==="."||M)&&n(_,U,null,S[U],void 0,R)}else if(S.onClick)n(_,"onClick",null,S.onClick,void 0,R);else if(k&4&&Aa(S.style))for(const M in S.style)S.style[M]}let O;(O=S&&S.onVnodeBeforeMount)&&hs(O,R,I),D&&Sa(I,null,R,"beforeMount"),((O=S&&S.onVnodeMounted)||D||P)&&LT(()=>{O&&hs(O,R,I),P&&N.enter(_),D&&Sa(I,null,R,"mounted")},A)}return _.nextSibling},p=(_,I,R,A,E,T,b)=>{b=b||!!I.dynamicChildren;const S=I.children,k=S.length;for(let w=0;w<k;w++){const D=b?S[w]:S[w]=ms(S[w]),N=D.type===Qi;_?(N&&!b&&w+1<k&&ms(S[w+1]).type===Qi&&(l(s(_.data.slice(D.children.length)),R,i(_)),_.data=D.children),_=f(_,D,A,E,T,b)):N&&!D.children?l(D.el=s(""),R):(Af(R,1)||Sl(),r(null,D,R,null,A,E,Tf(R),T))}return _},m=(_,I,R,A,E,T)=>{const{slotScopeIds:b}=I;b&&(E=E?E.concat(b):b);const S=a(_),k=p(i(_),I,S,R,A,E,T);return k&&Ul(k)&&k.data==="]"?i(I.anchor=k):(Sl(),l(I.anchor=c("]"),S,k),k)},g=(_,I,R,A,E,T)=>{if(Af(_.parentElement,1)||Sl(),I.el=null,T){const k=v(_);for(;;){const w=i(_);if(w&&w!==k)o(w);else break}}const b=i(_),S=a(_);return o(_),r(null,I,S,b,R,A,Tf(S),E),R&&(R.vnode.el=I.el,Vh(R,I.el)),b},v=(_,I="[",R="]")=>{let A=0;for(;_;)if(_=i(_),_&&Ul(_)&&(_.data===I&&A++,_.data===R)){if(A===0)return i(_);A--}return _},x=(_,I,R)=>{const A=I.parentNode;A&&A.replaceChild(_,I);let E=R;for(;E;)E.vnode.el===I&&(E.vnode.el=E.subTree.el=_),E=E.parent},y=_=>_.nodeType===1&&_.tagName==="TEMPLATE";return[u,f]}const qy="data-allow-mismatch",vP={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Af(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(qy);)t=t.parentElement;const r=t&&t.getAttribute(qy);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return e===0&&n.includes("children")?!0:n.includes(vP[e])}}const xP=wh().requestIdleCallback||(t=>setTimeout(t,1)),yP=wh().cancelIdleCallback||(t=>clearTimeout(t)),EP=(t=1e4)=>e=>{const r=xP(e,{timeout:t});return()=>yP(r)};function _P(t){const{top:e,left:r,bottom:n,right:s}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:a}=window;return(e>0&&e<i||n>0&&n<i)&&(r>0&&r<a||s>0&&s<a)}const bP=t=>(e,r)=>{const n=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){n.disconnect(),e();break}},t);return r(s=>{if(s instanceof Element){if(_P(s))return e(),n.disconnect(),!1;n.observe(s)}}),()=>n.disconnect()},SP=t=>e=>{if(t){const r=matchMedia(t);if(r.matches)e();else return r.addEventListener("change",e,{once:!0}),()=>r.removeEventListener("change",e)}},TP=(t=[])=>(e,r)=>{_r(t)&&(t=[t]);let n=!1;const s=a=>{n||(n=!0,i(),e(),a.target.dispatchEvent(new a.constructor(a.type,a)))},i=()=>{r(a=>{for(const o of t)a.removeEventListener(o,s)})};return r(a=>{for(const o of t)a.addEventListener(o,s,{once:!0})}),i};function AP(t,e){if(Ul(t)&&t.data==="["){let r=1,n=t.nextSibling;for(;n;){if(n.nodeType===1){if(e(n)===!1)break}else if(Ul(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else e(t)}const Ji=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function wP(t){bt(t)&&(t={loader:t});const{loader:e,loadingComponent:r,errorComponent:n,delay:s=200,hydrate:i,timeout:a,suspensible:o=!0,onError:l}=t;let c=null,u,f=0;const h=()=>(f++,c=null,p()),p=()=>{let m;return c||(m=c=e().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),l)return new Promise((v,x)=>{l(g,()=>v(h()),()=>x(g),f+1)});throw g}).then(g=>m!==c&&c?c:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),u=g,g)))};return Dd({name:"AsyncComponentWrapper",__asyncLoader:p,__asyncHydrate(m,g,v){const x=i?()=>{const _=i(()=>{v()},I=>AP(m,I));_&&(g.bum||(g.bum=[])).push(_),(g.u||(g.u=[])).push(()=>!0)}:v;u?x():p().then(()=>!g.isUnmounted&&x())},get __asyncResolved(){return u},setup(){const m=sn;if(Qv(m),u)return()=>Vp(u,m);const g=_=>{c=null,rl(_,m,13,!n)};if(o&&m.suspense||lc)return p().then(_=>()=>Vp(_,m)).catch(_=>(g(_),()=>n?st(n,{error:_}):null));const v=se(!1),x=se(),y=se(!!s);return s&&setTimeout(()=>{y.value=!1},s),a!=null&&setTimeout(()=>{if(!v.value&&!x.value){const _=new Error(`Async component timed out after ${a}ms.`);g(_),x.value=_}},a),p().then(()=>{v.value=!0,m.parent&&Pd(m.parent.vnode)&&m.parent.update()}).catch(_=>{g(_),x.value=_}),()=>{if(v.value&&u)return Vp(u,m);if(x.value&&n)return st(n,{error:x.value});if(r&&!y.value)return st(r)}}})}function Vp(t,e){const{ref:r,props:n,children:s,ce:i}=e.vnode,a=st(t,n,s);return a.ref=r,a.ce=i,delete e.vnode.ce,a}const Pd=t=>t.type.__isKeepAlive,CP={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const r=Gs(),n=r.ctx;if(!n.renderer)return()=>{const y=e.default&&e.default();return y&&y.length===1?y[0]:y};const s=new Map,i=new Set;let a=null;const o=r.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:f}}}=n,h=f("div");n.activate=(y,_,I,R,A)=>{const E=y.component;c(y,_,I,0,o),l(E.vnode,y,_,I,E,o,R,y.slotScopeIds,A),tn(()=>{E.isDeactivated=!1,E.a&&Kl(E.a);const T=y.props&&y.props.onVnodeMounted;T&&hs(T,E.parent,y)},o)},n.deactivate=y=>{const _=y.component;D0(_.m),D0(_.a),c(y,h,null,1,o),tn(()=>{_.da&&Kl(_.da);const I=y.props&&y.props.onVnodeUnmounted;I&&hs(I,_.parent,y),_.isDeactivated=!0},o)};function p(y){Hp(y),u(y,r,o,!0)}function m(y){s.forEach((_,I)=>{const R=Ng(_.type);R&&!y(R)&&g(I)})}function g(y){const _=s.get(y);_&&(!a||!ta(_,a))?p(_):a&&Hp(a),s.delete(y),i.delete(y)}Vt(()=>[t.include,t.exclude],([y,_])=>{y&&m(I=>lu(y,I)),_&&m(I=>!lu(_,I))},{flush:"post",deep:!0});let v=null;const x=()=>{v!=null&&(P0(r.subTree.type)?tn(()=>{s.set(v,wf(r.subTree))},r.subTree.suspense):s.set(v,wf(r.subTree)))};return Ut(x),Bh(x),Uh(()=>{s.forEach(y=>{const{subTree:_,suspense:I}=r,R=wf(_);if(y.type===R.type&&y.key===R.key){Hp(R);const A=R.component.da;A&&tn(A,I);return}p(y)})}),()=>{if(v=null,!e.default)return a=null;const y=e.default(),_=y[0];if(y.length>1)return a=null,y;if(!pi(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return a=null,_;let I=wf(_);if(I.type===Gr)return a=null,I;const R=I.type,A=Ng(Ji(I)?I.type.__asyncResolved||{}:R),{include:E,exclude:T,max:b}=t;if(E&&(!A||!lu(E,A))||T&&A&&lu(T,A))return I.shapeFlag&=-257,a=I,_;const S=I.key==null?R:I.key,k=s.get(S);return I.el&&(I=Da(I),_.shapeFlag&128&&(_.ssContent=I)),v=S,k?(I.el=k.el,I.component=k.component,I.transition&&hi(I,I.transition),I.shapeFlag|=512,i.delete(S),i.add(S)):(i.add(S),b&&i.size>parseInt(b,10)&&g(i.values().next().value)),I.shapeFlag|=256,a=I,P0(_.type)?_:I}}},IP=CP;function lu(t,e){return ut(t)?t.some(r=>lu(r,e)):_r(t)?t.split(",").includes(e):nD(t)?(t.lastIndex=0,t.test(e)):!1}function nT(t,e){aT(t,"a",e)}function sT(t,e){aT(t,"da",e)}function aT(t,e,r=sn){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Lh(e,n,r),r){let s=r.parent;for(;s&&s.parent;)Pd(s.parent.vnode)&&kP(n,e,r,s),s=s.parent}}function kP(t,e,r,n){const s=Lh(e,t,n,!0);Na(()=>{Mv(n[e],s)},r)}function Hp(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function wf(t){return t.shapeFlag&128?t.ssContent:t}function Lh(t,e,r=sn,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...a)=>{ui();const o=Go(r),l=Vs(e,r,t,a);return o(),di(),l});return n?s.unshift(i):s.push(i),i}}const bi=t=>(e,r=sn)=>{(!lc||t==="sp")&&Lh(t,(...n)=>e(...n),r)},iT=bi("bm"),Ut=bi("m"),Zv=bi("bu"),Bh=bi("u"),Uh=bi("bum"),Na=bi("um"),oT=bi("sp"),lT=bi("rtg"),cT=bi("rtc");function uT(t,e=sn){Lh("ec",t,e)}const e1="components",DP="directives";function wr(t,e){return t1(e1,t,!0,e)||t}const dT=Symbol.for("v-ndc");function PP(t){return _r(t)?t1(e1,t,!1)||t:t||dT}function RP(t){return t1(DP,t)}function t1(t,e,r=!0,n=!1){const s=an||sn;if(s){const i=s.type;if(t===e1){const o=Ng(i,!1);if(o&&(o===e||o===An(e)||o===kd(An(e))))return i}const a=Xy(s[t]||i[t],e)||Xy(s.appContext[t],e);return!a&&n?i:a}}function Xy(t,e){return t&&(t[e]||t[An(e)]||t[kd(An(e))])}function Ve(t,e,r,n){let s;const i=r&&r[n],a=ut(t);if(a||_r(t)){const o=a&&Aa(t);let l=!1,c=!1;o&&(l=!Cs(t),c=fi(t),t=kh(t)),s=new Array(t.length);for(let u=0,f=t.length;u<f;u++)s[u]=e(l?c?A0(Tn(t[u])):Tn(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(fr(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,i&&i[l]));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];s[l]=e(t[u],u,l,i&&i[l])}}else s=[];return r&&(r[n]=s),s}function FP(t,e){for(let r=0;r<e.length;r++){const n=e[r];if(ut(n))for(let s=0;s<n.length;s++)t[n[s].name]=n[s].fn;else n&&(t[n.name]=n.key?(...s)=>{const i=n.fn(...s);return i&&(i.key=n.key),i}:n.fn)}return t}function fT(t,e,r={},n,s){if(an.ce||an.parent&&Ji(an.parent)&&an.parent.ce)return e!=="default"&&(r.name=e),B(),Jr(Re,null,[st("slot",r,n&&n())],64);let i=t[e];i&&i._c&&(i._d=!1),B();const a=i&&r1(i(r)),o=r.key||a&&a.key,l=Jr(Re,{key:(o&&!ua(o)?o:`_${e}`)+(!a&&n?"_fb":"")},a||(n?n():[]),a&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function r1(t){return t.some(e=>pi(e)?!(e.type===Gr||e.type===Re&&!r1(e.children)):!0)?t:null}function OP(t,e){const r={};for(const n in t)r[e&&/[A-Z]/.test(n)?`on:${n}`:_u(n)]=t[n];return r}const Tg=t=>t?GT(t)?Fd(t):Tg(t.parent):null,Au=gr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Tg(t.parent),$root:t=>Tg(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>n1(t),$forceUpdate:t=>t.f||(t.f=()=>{Xv(t.update)}),$nextTick:t=>t.n||(t.n=nl.bind(t.proxy)),$watch:t=>dR.bind(t)}),jp=(t,e)=>t!==Yt&&!t.__isScriptSetup&&ir(t,e),Ag={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:a,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(jp(n,e))return a[e]=1,n[e];if(s!==Yt&&ir(s,e))return a[e]=2,s[e];if((c=t.propsOptions[0])&&ir(c,e))return a[e]=3,i[e];if(r!==Yt&&ir(r,e))return a[e]=4,r[e];wg&&(a[e]=0)}}const u=Au[e];let f,h;if(u)return e==="$attrs"&&$n(t.attrs,"get",""),u(t);if((f=o.__cssModules)&&(f=f[e]))return f;if(r!==Yt&&ir(r,e))return a[e]=4,r[e];if(h=l.config.globalProperties,ir(h,e))return h[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return jp(s,e)?(s[e]=r,!0):n!==Yt&&ir(n,e)?(n[e]=r,!0):ir(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},a){let o;return!!r[a]||t!==Yt&&ir(t,a)||jp(e,a)||(o=i[0])&&ir(o,a)||ir(n,a)||ir(Au,a)||ir(s.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:ir(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}},NP=gr({},Ag,{get(t,e){if(e!==Symbol.unscopables)return Ag.get(t,e,t)},has(t,e){return e[0]!=="_"&&!lD(e)}});function MP(){return null}function LP(){return null}function BP(t){}function UP(t){}function $P(){return null}function VP(){}function HP(t,e){return null}function jP(){return hT().slots}function GP(){return hT().attrs}function hT(){const t=Gs();return t.setupContext||(t.setupContext=KT(t))}function sd(t){return ut(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}function WP(t,e){const r=sd(t);for(const n in e){if(n.startsWith("__skip"))continue;let s=r[n];s?ut(s)||bt(s)?s=r[n]={type:s,default:e[n]}:s.default=e[n]:s===null&&(s=r[n]={default:e[n]}),s&&e[`__skip_${n}`]&&(s.skipFactory=!0)}return r}function zP(t,e){return!t||!e?t||e:ut(t)&&ut(e)?t.concat(e):gr({},sd(t),sd(e))}function KP(t,e){const r={};for(const n in t)e.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>t[n]});return r}function qP(t){const e=Gs();let r=t();return Rg(),Lv(r)&&(r=r.catch(n=>{throw Go(e),n})),[r,()=>Go(e)]}let wg=!0;function XP(t){const e=n1(t),r=t.proxy,n=t.ctx;wg=!1,e.beforeCreate&&Yy(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:p,updated:m,activated:g,deactivated:v,beforeDestroy:x,beforeUnmount:y,destroyed:_,unmounted:I,render:R,renderTracked:A,renderTriggered:E,errorCaptured:T,serverPrefetch:b,expose:S,inheritAttrs:k,components:w,directives:D,filters:N}=e;if(c&&YP(c,n,null),a)for(const O in a){const M=a[O];bt(M)&&(n[O]=M.bind(r))}if(s){const O=s.call(r,r);fr(O)&&(t.data=xs(O))}if(wg=!0,i)for(const O in i){const M=i[O],U=bt(M)?M.bind(r,r):bt(M.get)?M.get.bind(r,r):Ls,z=!bt(M)&&bt(M.set)?M.set.bind(r):Ls,j=Ae({get:U,set:z});Object.defineProperty(n,O,{enumerable:!0,configurable:!0,get:()=>j.value,set:H=>j.value=H})}if(o)for(const O in o)pT(o[O],n,r,O);if(l){const O=bt(l)?l.call(r):l;Reflect.ownKeys(O).forEach(M=>{wu(M,O[M])})}u&&Yy(u,t,"c");function P(O,M){ut(M)?M.forEach(U=>O(U.bind(r))):M&&O(M.bind(r))}if(P(iT,f),P(Ut,h),P(Zv,p),P(Bh,m),P(nT,g),P(sT,v),P(uT,T),P(cT,A),P(lT,E),P(Uh,y),P(Na,I),P(oT,b),ut(S))if(S.length){const O=t.exposed||(t.exposed={});S.forEach(M=>{Object.defineProperty(O,M,{get:()=>r[M],set:U=>r[M]=U})})}else t.exposed||(t.exposed={});R&&t.render===Ls&&(t.render=R),k!=null&&(t.inheritAttrs=k),w&&(t.components=w),D&&(t.directives=D),b&&Qv(t)}function YP(t,e,r=Ls){ut(t)&&(t=Cg(t));for(const n in t){const s=t[n];let i;fr(s)?"default"in s?i=Is(s.from||n,s.default,!0):i=Is(s.from||n):i=Is(s),Tr(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function Yy(t,e,r){Vs(ut(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function pT(t,e,r,n){let s=n.includes(".")?FT(r,n):()=>r[n];if(_r(t)){const i=e[t];bt(i)&&Vt(s,i)}else if(bt(t))Vt(s,t.bind(r));else if(fr(t))if(ut(t))t.forEach(i=>pT(i,e,r,n));else{const i=bt(t.handler)?t.handler.bind(r):e[t.handler];bt(i)&&Vt(s,i,t)}}function n1(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let l;return o?l=o:!s.length&&!r&&!n?l=e:(l={},s.length&&s.forEach(c=>k0(l,c,a,!0)),k0(l,e,a)),fr(e)&&i.set(e,l),l}function k0(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&k0(t,i,r,!0),s&&s.forEach(a=>k0(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=JP[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const JP={data:Jy,props:Qy,emits:Qy,methods:cu,computed:cu,beforeCreate:es,created:es,beforeMount:es,mounted:es,beforeUpdate:es,updated:es,beforeDestroy:es,beforeUnmount:es,destroyed:es,unmounted:es,activated:es,deactivated:es,errorCaptured:es,serverPrefetch:es,components:cu,directives:cu,watch:ZP,provide:Jy,inject:QP};function Jy(t,e){return e?t?function(){return gr(bt(t)?t.call(this,this):t,bt(e)?e.call(this,this):e)}:e:t}function QP(t,e){return cu(Cg(t),Cg(e))}function Cg(t){if(ut(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function es(t,e){return t?[...new Set([].concat(t,e))]:e}function cu(t,e){return t?gr(Object.create(null),t,e):e}function Qy(t,e){return t?ut(t)&&ut(e)?[...new Set([...t,...e])]:gr(Object.create(null),sd(t),sd(e??{})):e}function ZP(t,e){if(!t)return e;if(!e)return t;const r=gr(Object.create(null),t);for(const n in e)r[n]=es(t[n],e[n]);return r}function mT(){return{app:null,config:{isNativeTag:tD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let eR=0;function tR(t,e){return function(n,s=null){bt(n)||(n=gr({},n)),s!=null&&!fr(s)&&(s=null);const i=mT(),a=new WeakSet,o=[];let l=!1;const c=i.app={_uid:eR++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:XT,get config(){return i.config},set config(u){},use(u,...f){return a.has(u)||(u&&bt(u.install)?(a.add(u),u.install(c,...f)):bt(u)&&(a.add(u),u(c,...f))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,f){return f?(i.components[u]=f,c):i.components[u]},directive(u,f){return f?(i.directives[u]=f,c):i.directives[u]},mount(u,f,h){if(!l){const p=c._ceVNode||st(n,s);return p.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),f&&e?e(p,u):t(p,u,h),l=!0,c._container=u,u.__vue_app__=c,Fd(p.component)}},onUnmount(u){o.push(u)},unmount(){l&&(Vs(o,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return i.provides[u]=f,c},runWithContext(u){const f=No;No=c;try{return u()}finally{No=f}}};return c}}let No=null;function wu(t,e){if(sn){let r=sn.provides;const n=sn.parent&&sn.parent.provides;n===r&&(r=sn.provides=Object.create(n)),r[t]=e}}function Is(t,e,r=!1){const n=sn||an;if(n||No){let s=No?No._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&bt(e)?e.call(n&&n.proxy):e}}function gT(){return!!(sn||an||No)}const vT={},xT=()=>Object.create(vT),yT=t=>Object.getPrototypeOf(t)===vT;function rR(t,e,r,n=!1){const s={},i=xT();t.propsDefaults=Object.create(null),ET(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);r?t.props=n?s:Wv(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function nR(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,o=qt(s),[l]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if($h(t.emitsOptions,h))continue;const p=e[h];if(l)if(ir(i,h))p!==i[h]&&(i[h]=p,c=!0);else{const m=An(h);s[m]=Ig(l,o,m,p,t,!1)}else p!==i[h]&&(i[h]=p,c=!0)}}}else{ET(t,e,s,i)&&(c=!0);let u;for(const f in o)(!e||!ir(e,f)&&((u=gs(f))===f||!ir(e,u)))&&(l?r&&(r[f]!==void 0||r[u]!==void 0)&&(s[f]=Ig(l,o,f,void 0,t,!0)):delete s[f]);if(i!==o)for(const f in i)(!e||!ir(e,f))&&(delete i[f],c=!0)}c&&Ka(t.attrs,"set","")}function ET(t,e,r,n){const[s,i]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(zl(l))continue;const c=e[l];let u;s&&ir(s,u=An(l))?!i||!i.includes(u)?r[u]=c:(o||(o={}))[u]=c:$h(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=qt(r),c=o||Yt;for(let u=0;u<i.length;u++){const f=i[u];r[f]=Ig(s,l,f,c[f],t,!ir(c,f))}}return a}function Ig(t,e,r,n,s,i){const a=t[r];if(a!=null){const o=ir(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&bt(l)){const{propsDefaults:c}=s;if(r in c)n=c[r];else{const u=Go(s);n=c[r]=l.call(null,e),u()}}else n=l;s.ce&&s.ce._setProp(r,n)}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===gs(r))&&(n=!0))}return n}const sR=new WeakMap;function _T(t,e,r=!1){const n=r?sR:e.propsCache,s=n.get(t);if(s)return s;const i=t.props,a={},o=[];let l=!1;if(!bt(t)){const u=f=>{l=!0;const[h,p]=_T(f,e,!0);gr(a,h),p&&o.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return fr(t)&&n.set(t,Gl),Gl;if(ut(i))for(let u=0;u<i.length;u++){const f=An(i[u]);Zy(f)&&(a[f]=Yt)}else if(i)for(const u in i){const f=An(u);if(Zy(f)){const h=i[u],p=a[f]=ut(h)||bt(h)?{type:h}:gr({},h),m=p.type;let g=!1,v=!0;if(ut(m))for(let x=0;x<m.length;++x){const y=m[x],_=bt(y)&&y.name;if(_==="Boolean"){g=!0;break}else _==="String"&&(v=!1)}else g=bt(m)&&m.name==="Boolean";p[0]=g,p[1]=v,(g||ir(p,"default"))&&o.push(f)}}const c=[a,o];return fr(t)&&n.set(t,c),c}function Zy(t){return t[0]!=="$"&&!zl(t)}const s1=t=>t[0]==="_"||t==="$stable",a1=t=>ut(t)?t.map(ms):[ms(t)],aR=(t,e,r)=>{if(e._n)return e;const n=Nh((...s)=>a1(e(...s)),r);return n._c=!1,n},bT=(t,e,r)=>{const n=t._ctx;for(const s in t){if(s1(s))continue;const i=t[s];if(bt(i))e[s]=aR(s,i,n);else if(i!=null){const a=a1(i);e[s]=()=>a}}},ST=(t,e)=>{const r=a1(e);t.slots.default=()=>r},TT=(t,e,r)=>{for(const n in e)(r||!s1(n))&&(t[n]=e[n])},iR=(t,e,r)=>{const n=t.slots=xT();if(t.vnode.shapeFlag&32){const s=e.__;s&&yg(n,"__",s,!0);const i=e._;i?(TT(n,e,r),r&&yg(n,"_",i,!0)):bT(e,n)}else e&&ST(t,e)},oR=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,a=Yt;if(n.shapeFlag&32){const o=e._;o?r&&o===1?i=!1:TT(s,e,r):(i=!e.$stable,bT(e,s)),a=e}else e&&(ST(t,e),a={default:1});if(i)for(const o in s)!s1(o)&&a[o]==null&&delete s[o]},tn=LT;function AT(t){return CT(t)}function wT(t){return CT(t,gP)}function CT(t,e){const r=wh();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:p=Ls,insertStaticContent:m}=t,g=(q,Y,ne,ve=null,ae=null,le=null,de=void 0,Se=null,Ie=!!Y.dynamicChildren)=>{if(q===Y)return;q&&!ta(q,Y)&&(ve=ce(q),H(q,ae,le,!0),q=null),Y.patchFlag===-2&&(Ie=!1,Y.dynamicChildren=null);const{type:Te,ref:Ge,shapeFlag:ke}=Y;switch(Te){case Qi:v(q,Y,ne,ve);break;case Gr:x(q,Y,ne,ve);break;case Mo:q==null&&y(Y,ne,ve,de);break;case Re:w(q,Y,ne,ve,ae,le,de,Se,Ie);break;default:ke&1?R(q,Y,ne,ve,ae,le,de,Se,Ie):ke&6?D(q,Y,ne,ve,ae,le,de,Se,Ie):(ke&64||ke&128)&&Te.process(q,Y,ne,ve,ae,le,de,Se,Ie,Q)}Ge!=null&&ae?Xl(Ge,q&&q.ref,le,Y||q,!Y):Ge==null&&q&&q.ref!=null&&Xl(q.ref,null,le,q,!0)},v=(q,Y,ne,ve)=>{if(q==null)n(Y.el=o(Y.children),ne,ve);else{const ae=Y.el=q.el;Y.children!==q.children&&c(ae,Y.children)}},x=(q,Y,ne,ve)=>{q==null?n(Y.el=l(Y.children||""),ne,ve):Y.el=q.el},y=(q,Y,ne,ve)=>{[q.el,q.anchor]=m(q.children,Y,ne,ve,q.el,q.anchor)},_=({el:q,anchor:Y},ne,ve)=>{let ae;for(;q&&q!==Y;)ae=h(q),n(q,ne,ve),q=ae;n(Y,ne,ve)},I=({el:q,anchor:Y})=>{let ne;for(;q&&q!==Y;)ne=h(q),s(q),q=ne;s(Y)},R=(q,Y,ne,ve,ae,le,de,Se,Ie)=>{Y.type==="svg"?de="svg":Y.type==="math"&&(de="mathml"),q==null?A(Y,ne,ve,ae,le,de,Se,Ie):b(q,Y,ae,le,de,Se,Ie)},A=(q,Y,ne,ve,ae,le,de,Se)=>{let Ie,Te;const{props:Ge,shapeFlag:ke,transition:$e,dirs:Be}=q;if(Ie=q.el=a(q.type,le,Ge&&Ge.is,Ge),ke&8?u(Ie,q.children):ke&16&&T(q.children,Ie,null,ve,ae,Gp(q,le),de,Se),Be&&Sa(q,null,ve,"created"),E(Ie,q,q.scopeId,de,ve),Ge){for(const ze in Ge)ze!=="value"&&!zl(ze)&&i(Ie,ze,null,Ge[ze],le,ve);"value"in Ge&&i(Ie,"value",null,Ge.value,le),(Te=Ge.onVnodeBeforeMount)&&hs(Te,ve,q)}Be&&Sa(q,null,ve,"beforeMount");const We=IT(ae,$e);We&&$e.beforeEnter(Ie),n(Ie,Y,ne),((Te=Ge&&Ge.onVnodeMounted)||We||Be)&&tn(()=>{Te&&hs(Te,ve,q),We&&$e.enter(Ie),Be&&Sa(q,null,ve,"mounted")},ae)},E=(q,Y,ne,ve,ae)=>{if(ne&&p(q,ne),ve)for(let le=0;le<ve.length;le++)p(q,ve[le]);if(ae){let le=ae.subTree;if(Y===le||P0(le.type)&&(le.ssContent===Y||le.ssFallback===Y)){const de=ae.vnode;E(q,de,de.scopeId,de.slotScopeIds,ae.parent)}}},T=(q,Y,ne,ve,ae,le,de,Se,Ie=0)=>{for(let Te=Ie;Te<q.length;Te++){const Ge=q[Te]=Se?$i(q[Te]):ms(q[Te]);g(null,Ge,Y,ne,ve,ae,le,de,Se)}},b=(q,Y,ne,ve,ae,le,de)=>{const Se=Y.el=q.el;let{patchFlag:Ie,dynamicChildren:Te,dirs:Ge}=Y;Ie|=q.patchFlag&16;const ke=q.props||Yt,$e=Y.props||Yt;let Be;if(ne&&So(ne,!1),(Be=$e.onVnodeBeforeUpdate)&&hs(Be,ne,Y,q),Ge&&Sa(Y,q,ne,"beforeUpdate"),ne&&So(ne,!0),(ke.innerHTML&&$e.innerHTML==null||ke.textContent&&$e.textContent==null)&&u(Se,""),Te?S(q.dynamicChildren,Te,Se,ne,ve,Gp(Y,ae),le):de||M(q,Y,Se,null,ne,ve,Gp(Y,ae),le,!1),Ie>0){if(Ie&16)k(Se,ke,$e,ne,ae);else if(Ie&2&&ke.class!==$e.class&&i(Se,"class",null,$e.class,ae),Ie&4&&i(Se,"style",ke.style,$e.style,ae),Ie&8){const We=Y.dynamicProps;for(let ze=0;ze<We.length;ze++){const Ee=We[ze],xe=ke[Ee],be=$e[Ee];(be!==xe||Ee==="value")&&i(Se,Ee,xe,be,ae,ne)}}Ie&1&&q.children!==Y.children&&u(Se,Y.children)}else!de&&Te==null&&k(Se,ke,$e,ne,ae);((Be=$e.onVnodeUpdated)||Ge)&&tn(()=>{Be&&hs(Be,ne,Y,q),Ge&&Sa(Y,q,ne,"updated")},ve)},S=(q,Y,ne,ve,ae,le,de)=>{for(let Se=0;Se<Y.length;Se++){const Ie=q[Se],Te=Y[Se],Ge=Ie.el&&(Ie.type===Re||!ta(Ie,Te)||Ie.shapeFlag&198)?f(Ie.el):ne;g(Ie,Te,Ge,null,ve,ae,le,de,!0)}},k=(q,Y,ne,ve,ae)=>{if(Y!==ne){if(Y!==Yt)for(const le in Y)!zl(le)&&!(le in ne)&&i(q,le,Y[le],null,ae,ve);for(const le in ne){if(zl(le))continue;const de=ne[le],Se=Y[le];de!==Se&&le!=="value"&&i(q,le,Se,de,ae,ve)}"value"in ne&&i(q,"value",Y.value,ne.value,ae)}},w=(q,Y,ne,ve,ae,le,de,Se,Ie)=>{const Te=Y.el=q?q.el:o(""),Ge=Y.anchor=q?q.anchor:o("");let{patchFlag:ke,dynamicChildren:$e,slotScopeIds:Be}=Y;Be&&(Se=Se?Se.concat(Be):Be),q==null?(n(Te,ne,ve),n(Ge,ne,ve),T(Y.children||[],ne,Ge,ae,le,de,Se,Ie)):ke>0&&ke&64&&$e&&q.dynamicChildren?(S(q.dynamicChildren,$e,ne,ae,le,de,Se),(Y.key!=null||ae&&Y===ae.subTree)&&i1(q,Y,!0)):M(q,Y,ne,Ge,ae,le,de,Se,Ie)},D=(q,Y,ne,ve,ae,le,de,Se,Ie)=>{Y.slotScopeIds=Se,q==null?Y.shapeFlag&512?ae.ctx.activate(Y,ne,ve,de,Ie):N(Y,ne,ve,ae,le,de,Ie):F(q,Y,Ie)},N=(q,Y,ne,ve,ae,le,de)=>{const Se=q.component=jT(q,ve,ae);if(Pd(q)&&(Se.ctx.renderer=Q),WT(Se,!1,de),Se.asyncDep){if(ae&&ae.registerDep(Se,P,de),!q.el){const Ie=Se.subTree=st(Gr);x(null,Ie,Y,ne)}}else P(Se,q,Y,ne,ae,le,de)},F=(q,Y,ne)=>{const ve=Y.component=q.component;if(vR(q,Y,ne))if(ve.asyncDep&&!ve.asyncResolved){O(ve,Y,ne);return}else ve.next=Y,ve.update();else Y.el=q.el,ve.vnode=Y},P=(q,Y,ne,ve,ae,le,de)=>{const Se=()=>{if(q.isMounted){let{next:ke,bu:$e,u:Be,parent:We,vnode:ze}=q;{const je=kT(q);if(je){ke&&(ke.el=ze.el,O(q,ke,de)),je.asyncDep.then(()=>{q.isUnmounted||Se()});return}}let Ee=ke,xe;So(q,!1),ke?(ke.el=ze.el,O(q,ke,de)):ke=ze,$e&&Kl($e),(xe=ke.props&&ke.props.onVnodeBeforeUpdate)&&hs(xe,We,ke,ze),So(q,!0);const be=r0(q),Ne=q.subTree;q.subTree=be,g(Ne,be,f(Ne.el),ce(Ne),q,ae,le),ke.el=be.el,Ee===null&&Vh(q,be.el),Be&&tn(Be,ae),(xe=ke.props&&ke.props.onVnodeUpdated)&&tn(()=>hs(xe,We,ke,ze),ae)}else{let ke;const{el:$e,props:Be}=Y,{bm:We,m:ze,parent:Ee,root:xe,type:be}=q,Ne=Ji(Y);if(So(q,!1),We&&Kl(We),!Ne&&(ke=Be&&Be.onVnodeBeforeMount)&&hs(ke,Ee,Y),So(q,!0),$e&&X){const je=()=>{q.subTree=r0(q),X($e,q.subTree,q,ae,null)};Ne&&be.__asyncHydrate?be.__asyncHydrate($e,q,je):je()}else{xe.ce&&xe.ce._def.shadowRoot!==!1&&xe.ce._injectChildStyle(be);const je=q.subTree=r0(q);g(null,je,ne,ve,q,ae,le),Y.el=je.el}if(ze&&tn(ze,ae),!Ne&&(ke=Be&&Be.onVnodeMounted)){const je=Y;tn(()=>hs(ke,Ee,je),ae)}(Y.shapeFlag&256||Ee&&Ji(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&q.a&&tn(q.a,ae),q.isMounted=!0,Y=ne=ve=null}};q.scope.on();const Ie=q.effect=new Qu(Se);q.scope.off();const Te=q.update=Ie.run.bind(Ie),Ge=q.job=Ie.runIfDirty.bind(Ie);Ge.i=q,Ge.id=q.uid,Ie.scheduler=()=>Xv(Ge),So(q,!0),Te()},O=(q,Y,ne)=>{Y.component=q;const ve=q.vnode.props;q.vnode=Y,q.next=null,nR(q,Y.props,ve,ne),oR(q,Y.children,ne),ui(),Hy(q),di()},M=(q,Y,ne,ve,ae,le,de,Se,Ie=!1)=>{const Te=q&&q.children,Ge=q?q.shapeFlag:0,ke=Y.children,{patchFlag:$e,shapeFlag:Be}=Y;if($e>0){if($e&128){z(Te,ke,ne,ve,ae,le,de,Se,Ie);return}else if($e&256){U(Te,ke,ne,ve,ae,le,de,Se,Ie);return}}Be&8?(Ge&16&&me(Te,ae,le),ke!==Te&&u(ne,ke)):Ge&16?Be&16?z(Te,ke,ne,ve,ae,le,de,Se,Ie):me(Te,ae,le,!0):(Ge&8&&u(ne,""),Be&16&&T(ke,ne,ve,ae,le,de,Se,Ie))},U=(q,Y,ne,ve,ae,le,de,Se,Ie)=>{q=q||Gl,Y=Y||Gl;const Te=q.length,Ge=Y.length,ke=Math.min(Te,Ge);let $e;for($e=0;$e<ke;$e++){const Be=Y[$e]=Ie?$i(Y[$e]):ms(Y[$e]);g(q[$e],Be,ne,null,ae,le,de,Se,Ie)}Te>Ge?me(q,ae,le,!0,!1,ke):T(Y,ne,ve,ae,le,de,Se,Ie,ke)},z=(q,Y,ne,ve,ae,le,de,Se,Ie)=>{let Te=0;const Ge=Y.length;let ke=q.length-1,$e=Ge-1;for(;Te<=ke&&Te<=$e;){const Be=q[Te],We=Y[Te]=Ie?$i(Y[Te]):ms(Y[Te]);if(ta(Be,We))g(Be,We,ne,null,ae,le,de,Se,Ie);else break;Te++}for(;Te<=ke&&Te<=$e;){const Be=q[ke],We=Y[$e]=Ie?$i(Y[$e]):ms(Y[$e]);if(ta(Be,We))g(Be,We,ne,null,ae,le,de,Se,Ie);else break;ke--,$e--}if(Te>ke){if(Te<=$e){const Be=$e+1,We=Be<Ge?Y[Be].el:ve;for(;Te<=$e;)g(null,Y[Te]=Ie?$i(Y[Te]):ms(Y[Te]),ne,We,ae,le,de,Se,Ie),Te++}}else if(Te>$e)for(;Te<=ke;)H(q[Te],ae,le,!0),Te++;else{const Be=Te,We=Te,ze=new Map;for(Te=We;Te<=$e;Te++){const Et=Y[Te]=Ie?$i(Y[Te]):ms(Y[Te]);Et.key!=null&&ze.set(Et.key,Te)}let Ee,xe=0;const be=$e-We+1;let Ne=!1,je=0;const ot=new Array(be);for(Te=0;Te<be;Te++)ot[Te]=0;for(Te=Be;Te<=ke;Te++){const Et=q[Te];if(xe>=be){H(Et,ae,le,!0);continue}let Lt;if(Et.key!=null)Lt=ze.get(Et.key);else for(Ee=We;Ee<=$e;Ee++)if(ot[Ee-We]===0&&ta(Et,Y[Ee])){Lt=Ee;break}Lt===void 0?H(Et,ae,le,!0):(ot[Lt-We]=Te+1,Lt>=je?je=Lt:Ne=!0,g(Et,Y[Lt],ne,null,ae,le,de,Se,Ie),xe++)}const gt=Ne?lR(ot):Gl;for(Ee=gt.length-1,Te=be-1;Te>=0;Te--){const Et=We+Te,Lt=Y[Et],ft=Et+1<Ge?Y[Et+1].el:ve;ot[Te]===0?g(null,Lt,ne,ft,ae,le,de,Se,Ie):Ne&&(Ee<0||Te!==gt[Ee]?j(Lt,ne,ft,2):Ee--)}}},j=(q,Y,ne,ve,ae=null)=>{const{el:le,type:de,transition:Se,children:Ie,shapeFlag:Te}=q;if(Te&6){j(q.component.subTree,Y,ne,ve);return}if(Te&128){q.suspense.move(Y,ne,ve);return}if(Te&64){de.move(q,Y,ne,Q);return}if(de===Re){n(le,Y,ne);for(let ke=0;ke<Ie.length;ke++)j(Ie[ke],Y,ne,ve);n(q.anchor,Y,ne);return}if(de===Mo){_(q,Y,ne);return}if(ve!==2&&Te&1&&Se)if(ve===0)Se.beforeEnter(le),n(le,Y,ne),tn(()=>Se.enter(le),ae);else{const{leave:ke,delayLeave:$e,afterLeave:Be}=Se,We=()=>{q.ctx.isUnmounted?s(le):n(le,Y,ne)},ze=()=>{ke(le,()=>{We(),Be&&Be()})};$e?$e(le,We,ze):ze()}else n(le,Y,ne)},H=(q,Y,ne,ve=!1,ae=!1)=>{const{type:le,props:de,ref:Se,children:Ie,dynamicChildren:Te,shapeFlag:Ge,patchFlag:ke,dirs:$e,cacheIndex:Be}=q;if(ke===-2&&(ae=!1),Se!=null&&(ui(),Xl(Se,null,ne,q,!0),di()),Be!=null&&(Y.renderCache[Be]=void 0),Ge&256){Y.ctx.deactivate(q);return}const We=Ge&1&&$e,ze=!Ji(q);let Ee;if(ze&&(Ee=de&&de.onVnodeBeforeUnmount)&&hs(Ee,Y,q),Ge&6)re(q.component,ne,ve);else{if(Ge&128){q.suspense.unmount(ne,ve);return}We&&Sa(q,null,Y,"beforeUnmount"),Ge&64?q.type.remove(q,Y,ne,Q,ve):Te&&!Te.hasOnce&&(le!==Re||ke>0&&ke&64)?me(Te,Y,ne,!1,!0):(le===Re&&ke&384||!ae&&Ge&16)&&me(Ie,Y,ne),ve&&W(q)}(ze&&(Ee=de&&de.onVnodeUnmounted)||We)&&tn(()=>{Ee&&hs(Ee,Y,q),We&&Sa(q,null,Y,"unmounted")},ne)},W=q=>{const{type:Y,el:ne,anchor:ve,transition:ae}=q;if(Y===Re){K(ne,ve);return}if(Y===Mo){I(q);return}const le=()=>{s(ne),ae&&!ae.persisted&&ae.afterLeave&&ae.afterLeave()};if(q.shapeFlag&1&&ae&&!ae.persisted){const{leave:de,delayLeave:Se}=ae,Ie=()=>de(ne,le);Se?Se(q.el,le,Ie):Ie()}else le()},K=(q,Y)=>{let ne;for(;q!==Y;)ne=h(q),s(q),q=ne;s(Y)},re=(q,Y,ne)=>{const{bum:ve,scope:ae,job:le,subTree:de,um:Se,m:Ie,a:Te,parent:Ge,slots:{__:ke}}=q;D0(Ie),D0(Te),ve&&Kl(ve),Ge&&ut(ke)&&ke.forEach($e=>{Ge.renderCache[$e]=void 0}),ae.stop(),le&&(le.flags|=8,H(de,q,Y,ne)),Se&&tn(Se,Y),tn(()=>{q.isUnmounted=!0},Y),Y&&Y.pendingBranch&&!Y.isUnmounted&&q.asyncDep&&!q.asyncResolved&&q.suspenseId===Y.pendingId&&(Y.deps--,Y.deps===0&&Y.resolve())},me=(q,Y,ne,ve=!1,ae=!1,le=0)=>{for(let de=le;de<q.length;de++)H(q[de],Y,ne,ve,ae)},ce=q=>{if(q.shapeFlag&6)return ce(q.component.subTree);if(q.shapeFlag&128)return q.suspense.next();const Y=h(q.anchor||q.el),ne=Y&&Y[X2];return ne?h(ne):Y};let pe=!1;const te=(q,Y,ne)=>{q==null?Y._vnode&&H(Y._vnode,null,null,!0):g(Y._vnode||null,q,Y,null,null,null,ne),Y._vnode=q,pe||(pe=!0,Hy(),I0(),pe=!1)},Q={p:g,um:H,m:j,r:W,mt:N,mc:T,pc:M,pbc:S,n:ce,o:t};let ye,X;return e&&([ye,X]=e(Q)),{render:te,hydrate:ye,createApp:tR(te,ye)}}function Gp({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function So({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function IT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function i1(t,e,r=!1){const n=t.children,s=e.children;if(ut(n)&&ut(s))for(let i=0;i<n.length;i++){const a=n[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=$i(s[i]),o.el=a.el),!r&&o.patchFlag!==-2&&i1(a,o)),o.type===Qi&&(o.el=a.el),o.type===Gr&&!o.el&&(o.el=a.el)}}function lR(t){const e=t.slice(),r=[0];let n,s,i,a,o;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=r[r.length-1],t[s]<c){e[n]=s,r.push(n);continue}for(i=0,a=r.length-1;i<a;)o=i+a>>1,t[r[o]]<c?i=o+1:a=o;c<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,a=r[i-1];i-- >0;)r[i]=a,a=e[a];return r}function kT(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:kT(e)}function D0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const DT=Symbol.for("v-scx"),PT=()=>Is(DT);function cR(t,e){return Rd(t,null,e)}function uR(t,e){return Rd(t,null,{flush:"post"})}function RT(t,e){return Rd(t,null,{flush:"sync"})}function Vt(t,e,r){return Rd(t,e,r)}function Rd(t,e,r=Yt){const{immediate:n,deep:s,flush:i,once:a}=r,o=gr({},r),l=e&&n||!e&&i!=="post";let c;if(lc){if(i==="sync"){const p=PT();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Ls,p.resume=Ls,p.pause=Ls,p}}const u=sn;o.call=(p,m,g)=>Vs(p,u,m,g);let f=!1;i==="post"?o.scheduler=p=>{tn(p,u&&u.suspense)}:i!=="sync"&&(f=!0,o.scheduler=(p,m)=>{m?p():Xv(p)}),o.augmentJob=p=>{e&&(p.flags|=4),f&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=QD(t,e,o);return lc&&(c?c.push(h):l&&h()),h}function dR(t,e,r){const n=this.proxy,s=_r(t)?t.includes(".")?FT(n,t):()=>n[t]:t.bind(n,n);let i;bt(e)?i=e:(i=e.handler,r=e);const a=Go(this),o=Rd(s,i.bind(n),r);return a(),o}function FT(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}function fR(t,e,r=Yt){const n=Gs(),s=An(e),i=gs(e),a=OT(t,s),o=$2((l,c)=>{let u,f=Yt,h;return RT(()=>{const p=t[s];ns(u,p)&&(u=p,c())}),{get(){return l(),r.get?r.get(u):u},set(p){const m=r.set?r.set(p):p;if(!ns(m,u)&&!(f!==Yt&&ns(p,f)))return;const g=n.vnode.props;g&&(e in g||s in g||i in g)&&(`onUpdate:${e}`in g||`onUpdate:${s}`in g||`onUpdate:${i}`in g)||(u=p,c()),n.emit(`update:${e}`,m),ns(p,m)&&ns(p,f)&&!ns(m,h)&&c(),f=p,h=m}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||Yt:o,done:!1}:{done:!0}}}},o}const OT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${An(e)}Modifiers`]||t[`${gs(e)}Modifiers`];function hR(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Yt;let s=r;const i=e.startsWith("update:"),a=i&&OT(n,e.slice(7));a&&(a.trim&&(s=r.map(u=>_r(u)?u.trim():u)),a.number&&(s=r.map(b0)));let o,l=n[o=_u(e)]||n[o=_u(An(e))];!l&&i&&(l=n[o=_u(gs(e))]),l&&Vs(l,t,6,s);const c=n[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Vs(c,t,6,s)}}function NT(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let a={},o=!1;if(!bt(t)){const l=c=>{const u=NT(c,e,!0);u&&(o=!0,gr(a,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!o?(fr(t)&&n.set(t,null),null):(ut(i)?i.forEach(l=>a[l]=null):gr(a,i),fr(t)&&n.set(t,a),a)}function $h(t,e){return!t||!Id(e)?!1:(e=e.slice(2).replace(/Once$/,""),ir(t,e[0].toLowerCase()+e.slice(1))||ir(t,gs(e))||ir(t,e))}function r0(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:f,data:h,setupState:p,ctx:m,inheritAttrs:g}=t,v=nd(t);let x,y;try{if(r.shapeFlag&4){const I=s||n,R=I;x=ms(c.call(R,I,u,f,p,h,m)),y=o}else{const I=e;x=ms(I.length>1?I(f,{attrs:o,slots:a,emit:l}):I(f,null)),y=e.props?o:mR(o)}}catch(I){Cu.length=0,rl(I,t,1),x=st(Gr)}let _=x;if(y&&g!==!1){const I=Object.keys(y),{shapeFlag:R}=_;I.length&&R&7&&(i&&I.some(Nv)&&(y=gR(y,i)),_=Da(_,y,!1,!0))}return r.dirs&&(_=Da(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(r.dirs):r.dirs),r.transition&&hi(_,r.transition),x=_,nd(v),x}function pR(t,e=!0){let r;for(let n=0;n<t.length;n++){const s=t[n];if(pi(s)){if(s.type!==Gr||s.children==="v-if"){if(r)return;r=s}}else return}return r}const mR=t=>{let e;for(const r in t)(r==="class"||r==="style"||Id(r))&&((e||(e={}))[r]=t[r]);return e},gR=(t,e)=>{const r={};for(const n in t)(!Nv(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function vR(t,e,r){const{props:n,children:s,component:i}=t,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?eE(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(a[h]!==n[h]&&!$h(c,h))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?eE(n,a,c):!0:!!a;return!1}function eE(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!$h(r,i))return!0}return!1}function Vh({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const P0=t=>t.__isSuspense;let kg=0;const xR={name:"Suspense",__isSuspense:!0,process(t,e,r,n,s,i,a,o,l,c){if(t==null)ER(e,r,n,s,i,a,o,l,c);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}_R(t,e,r,n,s,a,o,l,c)}},hydrate:bR,normalize:SR},yR=xR;function ad(t,e){const r=t.props&&t.props[e];bt(r)&&r()}function ER(t,e,r,n,s,i,a,o,l){const{p:c,o:{createElement:u}}=l,f=u("div"),h=t.suspense=MT(t,s,n,e,f,r,i,a,o,l);c(null,h.pendingBranch=t.ssContent,f,null,n,h,i,a),h.deps>0?(ad(t,"onPending"),ad(t,"onFallback"),c(null,t.ssFallback,e,r,n,null,i,a),Yl(h,t.ssFallback)):h.resolve(!1,!0)}function _R(t,e,r,n,s,i,a,o,{p:l,um:c,o:{createElement:u}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const h=e.ssContent,p=e.ssFallback,{activeBranch:m,pendingBranch:g,isInFallback:v,isHydrating:x}=f;if(g)f.pendingBranch=h,ta(h,g)?(l(g,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0?f.resolve():v&&(x||(l(m,p,r,n,s,null,i,a,o),Yl(f,p)))):(f.pendingId=kg++,x?(f.isHydrating=!1,f.activeBranch=g):c(g,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=u("div"),v?(l(null,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0?f.resolve():(l(m,p,r,n,s,null,i,a,o),Yl(f,p))):m&&ta(h,m)?(l(m,h,r,n,s,f,i,a,o),f.resolve(!0)):(l(null,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0&&f.resolve()));else if(m&&ta(h,m))l(m,h,r,n,s,f,i,a,o),Yl(f,h);else if(ad(e,"onPending"),f.pendingBranch=h,h.shapeFlag&512?f.pendingId=h.component.suspenseId:f.pendingId=kg++,l(null,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0)f.resolve();else{const{timeout:y,pendingId:_}=f;y>0?setTimeout(()=>{f.pendingId===_&&f.fallback(p)},y):y===0&&f.fallback(p)}}function MT(t,e,r,n,s,i,a,o,l,c,u=!1){const{p:f,m:h,um:p,n:m,o:{parentNode:g,remove:v}}=c;let x;const y=TR(t);y&&e&&e.pendingBranch&&(x=e.pendingId,e.deps++);const _=t.props?S0(t.props.timeout):void 0,I=i,R={vnode:t,parent:e,parentComponent:r,namespace:a,container:n,hiddenContainer:s,deps:0,pendingId:kg++,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(A=!1,E=!1){const{vnode:T,activeBranch:b,pendingBranch:S,pendingId:k,effects:w,parentComponent:D,container:N}=R;let F=!1;R.isHydrating?R.isHydrating=!1:A||(F=b&&S.transition&&S.transition.mode==="out-in",F&&(b.transition.afterLeave=()=>{k===R.pendingId&&(h(S,N,i===I?m(b):i,0),td(w))}),b&&(g(b.el)===N&&(i=m(b)),p(b,D,R,!0)),F||h(S,N,i,0)),Yl(R,S),R.pendingBranch=null,R.isInFallback=!1;let P=R.parent,O=!1;for(;P;){if(P.pendingBranch){P.effects.push(...w),O=!0;break}P=P.parent}!O&&!F&&td(w),R.effects=[],y&&e&&e.pendingBranch&&x===e.pendingId&&(e.deps--,e.deps===0&&!E&&e.resolve()),ad(T,"onResolve")},fallback(A){if(!R.pendingBranch)return;const{vnode:E,activeBranch:T,parentComponent:b,container:S,namespace:k}=R;ad(E,"onFallback");const w=m(T),D=()=>{R.isInFallback&&(f(null,A,S,w,b,null,k,o,l),Yl(R,A))},N=A.transition&&A.transition.mode==="out-in";N&&(T.transition.afterLeave=D),R.isInFallback=!0,p(T,b,null,!0),N||D()},move(A,E,T){R.activeBranch&&h(R.activeBranch,A,E,T),R.container=A},next(){return R.activeBranch&&m(R.activeBranch)},registerDep(A,E,T){const b=!!R.pendingBranch;b&&R.deps++;const S=A.vnode.el;A.asyncDep.catch(k=>{rl(k,A,0)}).then(k=>{if(A.isUnmounted||R.isUnmounted||R.pendingId!==A.suspenseId)return;A.asyncResolved=!0;const{vnode:w}=A;Fg(A,k,!1),S&&(w.el=S);const D=!S&&A.subTree.el;E(A,w,g(S||A.subTree.el),S?null:m(A.subTree),R,a,T),D&&v(D),Vh(A,w.el),b&&--R.deps===0&&R.resolve()})},unmount(A,E){R.isUnmounted=!0,R.activeBranch&&p(R.activeBranch,r,A,E),R.pendingBranch&&p(R.pendingBranch,r,A,E)}};return R}function bR(t,e,r,n,s,i,a,o,l){const c=e.suspense=MT(e,n,r,t.parentNode,document.createElement("div"),null,s,i,a,o,!0),u=l(t,c.pendingBranch=e.ssContent,r,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function SR(t){const{shapeFlag:e,children:r}=t,n=e&32;t.ssContent=tE(n?r.default:r),t.ssFallback=n?tE(r.fallback):st(Gr)}function tE(t){let e;if(bt(t)){const r=jo&&t._c;r&&(t._d=!1,B()),t=t(),r&&(t._d=!0,e=Gn,BT())}return ut(t)&&(t=pR(t)),t=ms(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(r=>r!==t)),t}function LT(t,e){e&&e.pendingBranch?ut(t)?e.effects.push(...t):e.effects.push(t):td(t)}function Yl(t,e){t.activeBranch=e;const{vnode:r,parentComponent:n}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;r.el=s,n&&n.subTree===r&&(n.vnode.el=s,Vh(n,s))}function TR(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Re=Symbol.for("v-fgt"),Qi=Symbol.for("v-txt"),Gr=Symbol.for("v-cmt"),Mo=Symbol.for("v-stc"),Cu=[];let Gn=null;function B(t=!1){Cu.push(Gn=t?null:[])}function BT(){Cu.pop(),Gn=Cu[Cu.length-1]||null}let jo=1;function Dg(t,e=!1){jo+=t,t<0&&Gn&&e&&(Gn.hasOnce=!0)}function UT(t){return t.dynamicChildren=jo>0?Gn||Gl:null,BT(),jo>0&&Gn&&Gn.push(t),t}function V(t,e,r,n,s,i){return UT(d(t,e,r,n,s,i,!0))}function Jr(t,e,r,n,s){return UT(st(t,e,r,n,s,!0))}function pi(t){return t?t.__v_isVNode===!0:!1}function ta(t,e){return t.type===e.type&&t.key===e.key}function AR(t){}const $T=({key:t})=>t??null,n0=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?_r(t)||Tr(t)||bt(t)?{i:an,r:t,k:e,f:!!r}:t:null);function d(t,e=null,r=null,n=0,s=null,i=t===Re?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$T(e),ref:e&&n0(e),scopeId:Oh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:an};return o?(o1(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=_r(r)?8:16),jo>0&&!a&&Gn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Gn.push(l),l}const st=wR;function wR(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===dT)&&(t=Gr),pi(t)){const o=Da(t,e,!0);return r&&o1(o,r),jo>0&&!i&&Gn&&(o.shapeFlag&6?Gn[Gn.indexOf(t)]=o:Gn.push(o)),o.patchFlag=-2,o}if(FR(t)&&(t=t.__vccOpts),e){e=VT(e);let{class:o,style:l}=e;o&&!_r(o)&&(e.class=Ze(o)),fr(l)&&(Rh(l)&&!ut(l)&&(l=gr({},l)),e.style=Sn(l))}const a=_r(t)?1:P0(t)?128:Y2(t)?64:fr(t)?4:bt(t)?2:0;return d(t,e,r,n,s,a,i,!0)}function VT(t){return t?Rh(t)||yT(t)?gr({},t):t:null}function Da(t,e,r=!1,n=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=t,c=e?HT(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&$T(c),ref:e&&e.ref?r&&i?ut(i)?i.concat(n0(e)):[i,n0(e)]:n0(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Re?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Da(t.ssContent),ssFallback:t.ssFallback&&Da(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&hi(u,l.clone(u)),u}function Oe(t=" ",e=0){return st(Qi,null,t,e)}function nn(t,e){const r=st(Mo,null,t);return r.staticCount=e,r}function _e(t="",e=!1){return e?(B(),Jr(Gr,null,t)):st(Gr,null,t)}function ms(t){return t==null||typeof t=="boolean"?st(Gr):ut(t)?st(Re,null,t.slice()):pi(t)?$i(t):st(Qi,null,String(t))}function $i(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Da(t)}function o1(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ut(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),o1(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!yT(e)?e._ctx=an:s===3&&an&&(an.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else bt(e)?(e={default:e,_ctx:an},r=32):(e=String(e),n&64?(r=16,e=[Oe(e)]):r=8);t.children=e,t.shapeFlag|=r}function HT(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Ze([e.class,n.class]));else if(s==="style")e.style=Sn([e.style,n.style]);else if(Id(s)){const i=e[s],a=n[s];a&&i!==a&&!(ut(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=n[s])}return e}function hs(t,e,r,n=null){Vs(t,e,7,[r,n])}const CR=mT();let IR=0;function jT(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||CR,i={uid:IR++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Uv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_T(n,s),emitsOptions:NT(n,s),emit:null,emitted:null,propsDefaults:Yt,inheritAttrs:n.inheritAttrs,ctx:Yt,data:Yt,props:Yt,attrs:Yt,slots:Yt,refs:Yt,setupState:Yt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=hR.bind(null,i),t.ce&&t.ce(i),i}let sn=null;const Gs=()=>sn||an;let R0,Pg;{const t=wh(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};R0=e("__VUE_INSTANCE_SETTERS__",r=>sn=r),Pg=e("__VUE_SSR_SETTERS__",r=>lc=r)}const Go=t=>{const e=sn;return R0(t),t.scope.on(),()=>{t.scope.off(),R0(e)}},Rg=()=>{sn&&sn.scope.off(),R0(null)};function GT(t){return t.vnode.shapeFlag&4}let lc=!1;function WT(t,e=!1,r=!1){e&&Pg(e);const{props:n,children:s}=t.vnode,i=GT(t);rR(t,n,i,e),iR(t,s,r||e);const a=i?kR(t,e):void 0;return e&&Pg(!1),a}function kR(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Ag);const{setup:n}=r;if(n){ui();const s=t.setupContext=n.length>1?KT(t):null,i=Go(t),a=Cc(n,t,0,[t.props,s]),o=Lv(a);if(di(),i(),(o||t.sp)&&!Ji(t)&&Qv(t),o){if(a.then(Rg,Rg),e)return a.then(l=>{Fg(t,l,e)}).catch(l=>{rl(l,t,0)});t.asyncDep=a}else Fg(t,a,e)}else zT(t,e)}function Fg(t,e,r){bt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:fr(e)&&(t.setupState=qv(e)),zT(t,r)}let F0,Og;function DR(t){F0=t,Og=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,NP))}}const PR=()=>!F0;function zT(t,e,r){const n=t.type;if(!t.render){if(!e&&F0&&!n.render){const s=n.template||n1(t).template;if(s){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,c=gr(gr({isCustomElement:i,delimiters:o},a),l);n.render=F0(s,c)}}t.render=n.render||Ls,Og&&Og(t)}{const s=Go(t);ui();try{XP(t)}finally{di(),s()}}}const RR={get(t,e){return $n(t,"get",""),t[e]}};function KT(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,RR),slots:t.slots,emit:t.emit,expose:e}}function Fd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(qv(Fh(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Au)return Au[r](t)},has(e,r){return r in e||r in Au}})):t.proxy}function Ng(t,e=!0){return bt(t)?t.displayName||t.name:t.name||e&&t.__name}function FR(t){return bt(t)&&"__vccOpts"in t}const Ae=(t,e)=>qD(t,e,lc);function Hh(t,e,r){const n=arguments.length;return n===2?fr(e)&&!ut(e)?pi(e)?st(t,null,[e]):st(t,e):st(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&pi(r)&&(r=[r]),st(t,e,r))}function OR(){}function NR(t,e,r,n){const s=r[n];if(s&&qT(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=n,r[n]=i}function qT(t,e){const r=t.memo;if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(ns(r[n],e[n]))return!1;return jo>0&&Gn&&Gn.push(t),!0}const XT="3.5.17",MR=Ls,LR=nP,BR=Rl,UR=q2,$R={createComponentInstance:jT,setupComponent:WT,renderComponentRoot:r0,setCurrentRenderingInstance:nd,isVNode:pi,normalizeVNode:ms,getComponentPublicInstance:Fd,ensureValidVNode:r1,pushWarningContext:ZD,popWarningContext:eP},VR=$R,HR=null,jR=null,GR=null;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mg;const rE=typeof window<"u"&&window.trustedTypes;if(rE)try{Mg=rE.createPolicy("vue",{createHTML:t=>t})}catch{}const YT=Mg?t=>Mg.createHTML(t):t=>t,WR="http://www.w3.org/2000/svg",zR="http://www.w3.org/1998/Math/MathML",za=typeof document<"u"?document:null,nE=za&&za.createElement("template"),KR={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?za.createElementNS(WR,t):e==="mathml"?za.createElementNS(zR,t):r?za.createElement(t,{is:r}):za.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>za.createTextNode(t),createComment:t=>za.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>za.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const a=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{nE.innerHTML=YT(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=nE.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Di="transition",Xc="animation",cc=Symbol("_vtc"),JT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},QT=gr({},Jv,JT),qR=t=>(t.displayName="Transition",t.props=QT,t),XR=qR((t,{slots:e})=>Hh(tT,ZT(t),e)),To=(t,e=[])=>{ut(t)?t.forEach(r=>r(...e)):t&&t(...e)},sE=t=>t?ut(t)?t.some(e=>e.length>1):t.length>1:!1;function ZT(t){const e={};for(const w in t)w in JT||(e[w]=t[w]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=i,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,m=YR(s),g=m&&m[0],v=m&&m[1],{onBeforeEnter:x,onEnter:y,onEnterCancelled:_,onLeave:I,onLeaveCancelled:R,onBeforeAppear:A=x,onAppear:E=y,onAppearCancelled:T=_}=e,b=(w,D,N,F)=>{w._enterCancelled=F,Ni(w,D?u:o),Ni(w,D?c:a),N&&N()},S=(w,D)=>{w._isLeaving=!1,Ni(w,f),Ni(w,p),Ni(w,h),D&&D()},k=w=>(D,N)=>{const F=w?E:y,P=()=>b(D,w,N);To(F,[D,P]),aE(()=>{Ni(D,w?l:i),Ea(D,w?u:o),sE(F)||iE(D,n,g,P)})};return gr(e,{onBeforeEnter(w){To(x,[w]),Ea(w,i),Ea(w,a)},onBeforeAppear(w){To(A,[w]),Ea(w,l),Ea(w,c)},onEnter:k(!1),onAppear:k(!0),onLeave(w,D){w._isLeaving=!0;const N=()=>S(w,D);Ea(w,f),w._enterCancelled?(Ea(w,h),Lg()):(Lg(),Ea(w,h)),aE(()=>{w._isLeaving&&(Ni(w,f),Ea(w,p),sE(I)||iE(w,n,v,N))}),To(I,[w,N])},onEnterCancelled(w){b(w,!1,void 0,!0),To(_,[w])},onAppearCancelled(w){b(w,!0,void 0,!0),To(T,[w])},onLeaveCancelled(w){S(w),To(R,[w])}})}function YR(t){if(t==null)return null;if(fr(t))return[Wp(t.enter),Wp(t.leave)];{const e=Wp(t);return[e,e]}}function Wp(t){return S0(t)}function Ea(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[cc]||(t[cc]=new Set)).add(e)}function Ni(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[cc];r&&(r.delete(e),r.size||(t[cc]=void 0))}function aE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let JR=0;function iE(t,e,r,n){const s=t._endId=++JR,i=()=>{s===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:a,timeout:o,propCount:l}=eA(t,e);if(!a)return n();const c=a+"end";let u=0;const f=()=>{t.removeEventListener(c,h),i()},h=p=>{p.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},o+1),t.addEventListener(c,h)}function eA(t,e){const r=window.getComputedStyle(t),n=m=>(r[m]||"").split(", "),s=n(`${Di}Delay`),i=n(`${Di}Duration`),a=oE(s,i),o=n(`${Xc}Delay`),l=n(`${Xc}Duration`),c=oE(o,l);let u=null,f=0,h=0;e===Di?a>0&&(u=Di,f=a,h=i.length):e===Xc?c>0&&(u=Xc,f=c,h=l.length):(f=Math.max(a,c),u=f>0?a>c?Di:Xc:null,h=u?u===Di?i.length:l.length:0);const p=u===Di&&/\b(transform|all)(,|$)/.test(n(`${Di}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:p}}function oE(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>lE(r)+lE(t[n])))}function lE(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Lg(){return document.body.offsetHeight}function QR(t,e,r){const n=t[cc];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const O0=Symbol("_vod"),tA=Symbol("_vsh"),rA={beforeMount(t,{value:e},{transition:r}){t[O0]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):Yc(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),Yc(t,!0),n.enter(t)):n.leave(t,()=>{Yc(t,!1)}):Yc(t,e))},beforeUnmount(t,{value:e}){Yc(t,e)}};function Yc(t,e){t.style.display=e?t[O0]:"none",t[tA]=!e}function ZR(){rA.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const nA=Symbol("");function e3(t){const e=Gs();if(!e)return;const r=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>N0(i,s))},n=()=>{const s=t(e.proxy);e.ce?N0(e.ce,s):Bg(e.subTree,s),r(s)};Zv(()=>{td(n)}),Ut(()=>{Vt(n,Ls,{flush:"post"});const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),Na(()=>s.disconnect())})}function Bg(t,e){if(t.shapeFlag&128){const r=t.suspense;t=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{Bg(r.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)N0(t.el,e);else if(t.type===Re)t.children.forEach(r=>Bg(r,e));else if(t.type===Mo){let{el:r,anchor:n}=t;for(;r&&(N0(r,e),r!==n);)r=r.nextSibling}}function N0(t,e){if(t.nodeType===1){const r=t.style;let n="";for(const s in e)r.setProperty(`--${s}`,e[s]),n+=`--${s}: ${e[s]};`;r[nA]=n}}const t3=/(^|;)\s*display\s*:/;function r3(t,e,r){const n=t.style,s=_r(r);let i=!1;if(r&&!s){if(e)if(_r(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&s0(n,o,"")}else for(const a in e)r[a]==null&&s0(n,a,"");for(const a in r)a==="display"&&(i=!0),s0(n,a,r[a])}else if(s){if(e!==r){const a=n[nA];a&&(r+=";"+a),n.cssText=r,i=t3.test(r)}}else e&&t.removeAttribute("style");O0 in t&&(t[O0]=i?n.display:"",t[tA]&&(n.display="none"))}const cE=/\s*!important$/;function s0(t,e,r){if(ut(r))r.forEach(n=>s0(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=n3(t,e);cE.test(r)?t.setProperty(gs(n),r.replace(cE,""),"important"):t[n]=r}}const uE=["Webkit","Moz","ms"],zp={};function n3(t,e){const r=zp[e];if(r)return r;let n=An(e);if(n!=="filter"&&n in t)return zp[e]=n;n=kd(n);for(let s=0;s<uE.length;s++){const i=uE[s]+n;if(i in t)return zp[e]=i}return e}const dE="http://www.w3.org/1999/xlink";function fE(t,e,r,n,s,i=mD(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(dE,e.slice(6,e.length)):t.setAttributeNS(dE,e,r):r==null||i&&!E2(r)?t.removeAttribute(e):t.setAttribute(e,i?"":ua(r)?String(r):r)}function hE(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?YT(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=E2(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(s||e)}function Xa(t,e,r,n){t.addEventListener(e,r,n)}function s3(t,e,r,n){t.removeEventListener(e,r,n)}const pE=Symbol("_vei");function a3(t,e,r,n,s=null){const i=t[pE]||(t[pE]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=i3(e);if(n){const c=i[e]=c3(n,s);Xa(t,o,c,l)}else a&&(s3(t,o,a,l),i[e]=void 0)}}const mE=/(?:Once|Passive|Capture)$/;function i3(t){let e;if(mE.test(t)){e={};let n;for(;n=t.match(mE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):gs(t.slice(2)),e]}let Kp=0;const o3=Promise.resolve(),l3=()=>Kp||(o3.then(()=>Kp=0),Kp=Date.now());function c3(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Vs(u3(n,r.value),e,5,[n])};return r.value=t,r.attached=l3(),r}function u3(t,e){if(ut(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const gE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,d3=(t,e,r,n,s,i)=>{const a=s==="svg";e==="class"?QR(t,n,a):e==="style"?r3(t,r,n):Id(e)?Nv(e)||a3(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):f3(t,e,n,a))?(hE(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&fE(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!_r(n))?hE(t,An(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),fE(t,e,n,a))};function f3(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&gE(e)&&bt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return gE(e)&&_r(r)?!1:e in t}const vE={};/*! #__NO_SIDE_EFFECTS__ */function sA(t,e,r){const n=Dd(t,e);Th(n)&&gr(n,e);class s extends jh{constructor(a){super(n,a,r)}}return s.def=n,s}/*! #__NO_SIDE_EFFECTS__ */const h3=(t,e)=>sA(t,e,gA),p3=typeof HTMLElement<"u"?HTMLElement:class{};class jh extends p3{constructor(e,r={},n=L0){super(),this._def=e,this._props=r,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==L0?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof jh){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,nl(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:a}=n;let o;if(i&&!ut(i))for(const l in i){const c=i[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=S0(this._props[l])),(o||(o=Object.create(null)))[An(l)]=!0)}this._numberProps=o,this._resolveProps(n),this.shadowRoot&&this._applyStyles(a),this._mount(n)},r=this._def.__asyncLoader;r?this._pendingResolve=r().then(n=>{n.configureApp=this._def.configureApp,e(this._def=n,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const r=this._instance&&this._instance.exposed;if(r)for(const n in r)ir(this,n)||Object.defineProperty(this,n,{get:()=>Z(r[n])})}_resolveProps(e){const{props:r}=e,n=ut(r)?r:Object.keys(r||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s]);for(const s of n.map(An))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const r=this.hasAttribute(e);let n=r?this.getAttribute(e):vE;const s=An(e);r&&this._numberProps&&this._numberProps[s]&&(n=S0(n)),this._setProp(s,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,r,n=!0,s=!1){if(r!==this._props[e]&&(r===vE?delete this._props[e]:(this._props[e]=r,e==="key"&&this._app&&(this._app._ceVNode.key=r)),s&&this._instance&&this._update(),n)){const i=this._ob;i&&i.disconnect(),r===!0?this.setAttribute(gs(e),""):typeof r=="string"||typeof r=="number"?this.setAttribute(gs(e),r+""):r||this.removeAttribute(gs(e)),i&&i.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),mA(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const r=st(this._def,gr(e,this._props));return this._instance||(r.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const s=(i,a)=>{this.dispatchEvent(new CustomEvent(i,Th(a[0])?gr({detail:a},a[0]):{detail:a}))};n.emit=(i,...a)=>{s(i,a),gs(i)!==i&&s(gs(i),a)},this._setParent()}),r}_applyStyles(e,r){if(!e)return;if(r){if(r===this._def||this._styleChildren.has(r))return;this._styleChildren.add(r)}const n=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");n&&i.setAttribute("nonce",n),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let r;for(;r=this.firstChild;){const n=r.nodeType===1&&r.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(r),this.removeChild(r)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),r=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const s=e[n],i=s.getAttribute("name")||"default",a=this._slots[i],o=s.parentNode;if(a)for(const l of a){if(r&&l.nodeType===1){const c=r+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let f;for(;f=u.nextNode();)f.setAttribute(c,"")}o.insertBefore(l,s)}else for(;s.firstChild;)o.insertBefore(s.firstChild,s);o.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function aA(t){const e=Gs(),r=e&&e.ce;return r||null}function m3(){const t=aA();return t&&t.shadowRoot}function g3(t="$style"){{const e=Gs();if(!e)return Yt;const r=e.type.__cssModules;if(!r)return Yt;const n=r[t];return n||Yt}}const iA=new WeakMap,oA=new WeakMap,M0=Symbol("_moveCb"),xE=Symbol("_enterCb"),v3=t=>(delete t.props.mode,t),x3=v3({name:"TransitionGroup",props:gr({},QT,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=Gs(),n=Yv();let s,i;return Bh(()=>{if(!s.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!S3(s[0].el,r.vnode.el,a)){s=[];return}s.forEach(E3),s.forEach(_3);const o=s.filter(b3);Lg(),o.forEach(l=>{const c=l.el,u=c.style;Ea(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[M0]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",f),c[M0]=null,Ni(c,a))};c.addEventListener("transitionend",f)}),s=[]}),()=>{const a=qt(t),o=ZT(a);let l=a.tag||Re;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),hi(u,oc(u,o,n,r)),iA.set(u,u.el.getBoundingClientRect()))}i=e.default?Mh(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&hi(u,oc(u,o,n,r))}return st(l,null,i)}}}),y3=x3;function E3(t){const e=t.el;e[M0]&&e[M0](),e[xE]&&e[xE]()}function _3(t){oA.set(t,t.el.getBoundingClientRect())}function b3(t){const e=iA.get(t),r=oA.get(t),n=e.left-r.left,s=e.top-r.top;if(n||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${s}px)`,i.transitionDuration="0s",t}}function S3(t,e,r){const n=t.cloneNode(),s=t[cc];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(n);const{hasTransform:a}=eA(n);return i.removeChild(n),a}const no=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ut(e)?r=>Kl(e,r):e};function T3(t){t.target.composing=!0}function yE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Bs=Symbol("_assign"),Je={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[Bs]=no(s);const i=n||s.props&&s.props.type==="number";Xa(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;r&&(o=o.trim()),i&&(o=b0(o)),t[Bs](o)}),r&&Xa(t,"change",()=>{t.value=t.value.trim()}),e||(Xa(t,"compositionstart",T3),Xa(t,"compositionend",yE),Xa(t,"change",yE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:i}},a){if(t[Bs]=no(a),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?b0(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===l)||(t.value=l))}},_t={deep:!0,created(t,e,r){t[Bs]=no(r),Xa(t,"change",()=>{const n=t._modelValue,s=uc(t),i=t.checked,a=t[Bs];if(ut(n)){const o=Ch(n,s),l=o!==-1;if(i&&!l)a(n.concat(s));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(tl(n)){const o=new Set(n);i?o.add(s):o.delete(s),a(o)}else a(lA(t,i))})},mounted:EE,beforeUpdate(t,e,r){t[Bs]=no(r),EE(t,e,r)}};function EE(t,{value:e,oldValue:r},n){t._modelValue=e;let s;if(ut(e))s=Ch(e,n.props.value)>-1;else if(tl(e))s=e.has(n.props.value);else{if(e===r)return;s=ro(e,lA(t,!0))}t.checked!==s&&(t.checked=s)}const mi={created(t,{value:e},r){t.checked=ro(e,r.props.value),t[Bs]=no(r),Xa(t,"change",()=>{t[Bs](uc(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[Bs]=no(n),e!==r&&(t.checked=ro(e,n.props.value))}},mr={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=tl(e);Xa(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>r?b0(uc(a)):uc(a));t[Bs](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,nl(()=>{t._assigning=!1})}),t[Bs]=no(n)},mounted(t,{value:e}){_E(t,e)},beforeUpdate(t,e,r){t[Bs]=no(r)},updated(t,{value:e}){t._assigning||_E(t,e)}};function _E(t,e){const r=t.multiple,n=ut(e);if(!(r&&!n&&!tl(e))){for(let s=0,i=t.options.length;s<i;s++){const a=t.options[s],o=uc(a);if(r)if(n){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(c=>String(c)===String(o)):a.selected=Ch(e,o)>-1}else a.selected=e.has(o);else if(ro(uc(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function uc(t){return"_value"in t?t._value:t.value}function lA(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const cA={created(t,e,r){Cf(t,e,r,null,"created")},mounted(t,e,r){Cf(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){Cf(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){Cf(t,e,r,n,"updated")}};function uA(t,e){switch(t){case"SELECT":return mr;case"TEXTAREA":return Je;default:switch(e){case"checkbox":return _t;case"radio":return mi;default:return Je}}}function Cf(t,e,r,n,s){const a=uA(t.tagName,r.props&&r.props.type)[s];a&&a(t,e,r,n)}function A3(){Je.getSSRProps=({value:t})=>({value:t}),mi.getSSRProps=({value:t},e)=>{if(e.props&&ro(e.props.value,t))return{checked:!0}},_t.getSSRProps=({value:t},e)=>{if(ut(t)){if(e.props&&Ch(t,e.props.value)>-1)return{checked:!0}}else if(tl(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},cA.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const r=uA(e.type.toUpperCase(),e.props&&e.props.type);if(r.getSSRProps)return r.getSSRProps(t,e)}}const w3=["ctrl","shift","alt","meta"],C3={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>w3.some(r=>t[`${r}Key`]&&!e.includes(r))},mn=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...i)=>{for(let a=0;a<e.length;a++){const o=C3[e[a]];if(o&&o(s,e))return}return t(s,...i)})},I3={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},dA=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=s=>{if(!("key"in s))return;const i=gs(s.key);if(e.some(a=>a===i||I3[a]===i))return t(s)})},fA=gr({patchProp:d3},KR);let Iu,bE=!1;function hA(){return Iu||(Iu=AT(fA))}function pA(){return Iu=bE?Iu:wT(fA),bE=!0,Iu}const mA=(...t)=>{hA().render(...t)},k3=(...t)=>{pA().hydrate(...t)},L0=(...t)=>{const e=hA().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=xA(n);if(!s)return;const i=e._component;!bt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=r(s,!1,vA(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e},gA=(...t)=>{const e=pA().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=xA(n);if(s)return r(s,!0,vA(s))},e};function vA(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xA(t){return _r(t)?document.querySelector(t):t}let SE=!1;const D3=()=>{SE||(SE=!0,A3(),ZR())};/**
* vue v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const P3=()=>{},R3=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:tT,BaseTransitionPropsValidators:Jv,Comment:Gr,DeprecationTypes:GR,EffectScope:Uv,ErrorCodes:rP,ErrorTypeStrings:LR,Fragment:Re,KeepAlive:IP,ReactiveEffect:Qu,Static:Mo,Suspense:yR,Teleport:uP,Text:Qi,TrackOpTypes:XD,Transition:XR,TransitionGroup:y3,TriggerOpTypes:YD,VueElement:jh,assertNumber:tP,callWithAsyncErrorHandling:Vs,callWithErrorHandling:Cc,camelize:An,capitalize:kd,cloneVNode:Da,compatUtils:jR,compile:P3,computed:Ae,createApp:L0,createBlock:Jr,createCommentVNode:_e,createElementBlock:V,createElementVNode:d,createHydrationRenderer:wT,createPropsRestProxy:KP,createRenderer:AT,createSSRApp:gA,createSlots:FP,createStaticVNode:nn,createTextVNode:Oe,createVNode:st,customRef:$2,defineAsyncComponent:wP,defineComponent:Dd,defineCustomElement:sA,defineEmits:LP,defineExpose:BP,defineModel:VP,defineOptions:UP,defineProps:MP,defineSSRCustomElement:h3,defineSlots:$P,devtools:BR,effect:xD,effectScope:$v,getCurrentInstance:Gs,getCurrentScope:Vv,getCurrentWatcher:JD,getTransitionRawChildren:Mh,guardReactiveProps:VT,h:Hh,handleError:rl,hasInjectionContext:gT,hydrate:k3,hydrateOnIdle:EP,hydrateOnInteraction:TP,hydrateOnMediaQuery:SP,hydrateOnVisible:bP,initCustomFormatter:OR,initDirectivesForSSR:D3,inject:Is,isMemoSame:qT,isProxy:Rh,isReactive:Aa,isReadonly:fi,isRef:Tr,isRuntimeOnly:PR,isShallow:Cs,isVNode:pi,markRaw:Fh,mergeDefaults:WP,mergeModels:zP,mergeProps:HT,nextTick:nl,normalizeClass:Ze,normalizeProps:hD,normalizeStyle:Sn,onActivated:nT,onBeforeMount:iT,onBeforeUnmount:Uh,onBeforeUpdate:Zv,onDeactivated:sT,onErrorCaptured:uT,onMounted:Ut,onRenderTracked:cT,onRenderTriggered:lT,onScopeDispose:S2,onServerPrefetch:oT,onUnmounted:Na,onUpdated:Bh,onWatcherCleanup:j2,openBlock:B,popScopeId:oP,provide:wu,proxyRefs:qv,pushScopeId:iP,queuePostFlushCb:td,reactive:xs,readonly:zv,ref:se,registerRuntimeCompiler:DR,render:mA,renderList:Ve,renderSlot:fT,resolveComponent:wr,resolveDirective:RP,resolveDynamicComponent:PP,resolveFilter:HR,resolveTransitionHooks:oc,setBlockTracking:Dg,setDevtoolsHook:UR,setTransitionHooks:hi,shallowReactive:Wv,shallowReadonly:BD,shallowRef:Kv,ssrContextKey:DT,ssrUtils:VR,stop:yD,toDisplayString:J,toHandlerKey:_u,toHandlers:OP,toRaw:qt,toRef:zD,toRefs:V2,toValue:VD,transformVNodeArgs:AR,triggerRef:$D,unref:Z,useAttrs:GP,useCssModule:g3,useCssVars:e3,useHost:aA,useId:fP,useModel:fR,useSSRContext:PT,useShadowRoot:m3,useSlots:jP,useTemplateRef:hP,useTransitionState:Yv,vModelCheckbox:_t,vModelDynamic:cA,vModelRadio:mi,vModelSelect:mr,vModelText:Je,vShow:rA,version:XT,warn:MR,watch:Vt,watchEffect:cR,watchPostEffect:uR,watchSyncEffect:RT,withAsyncContext:qP,withCtx:Nh,withDefaults:HP,withDirectives:we,withKeys:dA,withMemo:NR,withModifiers:mn,withScopeId:lP},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let yA;const Gh=t=>yA=t,EA=Symbol();function Ug(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ku;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ku||(ku={}));function F3(){const t=$v(!0),e=t.run(()=>se({}));let r=[],n=[];const s=Fh({install(i){Gh(s),s._a=i,i.provide(EA,s),i.config.globalProperties.$pinia=s,n.forEach(a=>r.push(a)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const _A=()=>{};function TE(t,e,r,n=_A){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&Vv()&&S2(s),s}function Tl(t,...e){t.slice().forEach(r=>{r(...e)})}const O3=t=>t(),AE=Symbol(),qp=Symbol();function $g(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];Ug(s)&&Ug(n)&&t.hasOwnProperty(r)&&!Tr(n)&&!Aa(n)?t[r]=$g(s,n):t[r]=n}return t}const N3=Symbol();function M3(t){return!Ug(t)||!t.hasOwnProperty(N3)}const{assign:Mi}=Object;function L3(t){return!!(Tr(t)&&t.effect)}function B3(t,e,r,n){const{state:s,actions:i,getters:a}=e,o=r.state.value[t];let l;function c(){o||(r.state.value[t]=s?s():{});const u=V2(r.state.value[t]);return Mi(u,i,Object.keys(a||{}).reduce((f,h)=>(f[h]=Fh(Ae(()=>{Gh(r);const p=r._s.get(t);return a[h].call(p,p)})),f),{}))}return l=bA(t,c,e,r,n,!0),l}function bA(t,e,r={},n,s,i){let a;const o=Mi({actions:{}},r),l={deep:!0};let c,u,f=[],h=[],p;const m=n.state.value[t];!i&&!m&&(n.state.value[t]={}),se({});let g;function v(T){let b;c=u=!1,typeof T=="function"?(T(n.state.value[t]),b={type:ku.patchFunction,storeId:t,events:p}):($g(n.state.value[t],T),b={type:ku.patchObject,payload:T,storeId:t,events:p});const S=g=Symbol();nl().then(()=>{g===S&&(c=!0)}),u=!0,Tl(f,b,n.state.value[t])}const x=i?function(){const{state:b}=r,S=b?b():{};this.$patch(k=>{Mi(k,S)})}:_A;function y(){a.stop(),f=[],h=[],n._s.delete(t)}const _=(T,b="")=>{if(AE in T)return T[qp]=b,T;const S=function(){Gh(n);const k=Array.from(arguments),w=[],D=[];function N(O){w.push(O)}function F(O){D.push(O)}Tl(h,{args:k,name:S[qp],store:R,after:N,onError:F});let P;try{P=T.apply(this&&this.$id===t?this:R,k)}catch(O){throw Tl(D,O),O}return P instanceof Promise?P.then(O=>(Tl(w,O),O)).catch(O=>(Tl(D,O),Promise.reject(O))):(Tl(w,P),P)};return S[AE]=!0,S[qp]=b,S},I={_p:n,$id:t,$onAction:TE.bind(null,h),$patch:v,$reset:x,$subscribe(T,b={}){const S=TE(f,T,b.detached,()=>k()),k=a.run(()=>Vt(()=>n.state.value[t],w=>{(b.flush==="sync"?u:c)&&T({storeId:t,type:ku.direct,events:p},w)},Mi({},l,b)));return S},$dispose:y},R=xs(I);n._s.set(t,R);const E=(n._a&&n._a.runWithContext||O3)(()=>n._e.run(()=>(a=$v()).run(()=>e({action:_}))));for(const T in E){const b=E[T];if(Tr(b)&&!L3(b)||Aa(b))i||(m&&M3(b)&&(Tr(b)?b.value=m[T]:$g(b,m[T])),n.state.value[t][T]=b);else if(typeof b=="function"){const S=_(b,T);E[T]=S,o.actions[T]=b}}return Mi(R,E),Mi(qt(R),E),Object.defineProperty(R,"$state",{get:()=>n.state.value[t],set:T=>{v(b=>{Mi(b,T)})}}),n._p.forEach(T=>{Mi(R,a.run(()=>T({store:R,app:n._a,pinia:n,options:o})))}),m&&i&&r.hydrate&&r.hydrate(R.$state,m),c=!0,u=!0,R}/*! #__NO_SIDE_EFFECTS__ */function SA(t,e,r){let n,s;const i=typeof e=="function";typeof t=="string"?(n=t,s=i?r:e):(s=t,n=t.id);function a(o,l){const c=gT();return o=o||(c?Is(EA,null):null),o&&Gh(o),o=yA,o._s.has(n)||(i?bA(n,e,s,o):B3(n,s,o)),o._s.get(n)}return a.$id=n,a}var wE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},U3=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},AA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,f=(i&3)<<4|o>>4;let h=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(h=64)),n.push(r[u],r[f],r[h],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):U3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||f==null)throw new $3;const h=i<<2|o>>4;if(n.push(h),c!==64){const p=o<<4&240|c>>2;if(n.push(p),f!==64){const m=c<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V3=function(t){const e=TA(t);return AA.encodeByteArray(e,!0)},B0=function(t){return V3(t).replace(/\./g,"")},wA=function(t){try{return AA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=()=>H3().__FIREBASE_DEFAULTS__,G3=()=>{if(typeof process>"u"||typeof wE>"u")return;const t=wE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},W3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wA(t[1]);return e&&JSON.parse(e)},Wh=()=>{try{return j3()||G3()||W3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CA=t=>{var e,r;return(r=(e=Wh())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},l1=t=>{const e=CA(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},IA=()=>{var t;return(t=Wh())===null||t===void 0?void 0:t.config},kA=t=>{var e;return(e=Wh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[B0(JSON.stringify(r)),B0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function q3(){var t;const e=(t=Wh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function J3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q3(){const t=Xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Z3(){return!q3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eF(){try{return typeof indexedDB=="object"}catch{return!1}}function tF(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF="FirebaseError";class pa extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=rF,Object.setPrototypeOf(this,pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Od.prototype.create)}}class Od{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?nF(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new pa(s,o,n)}}function nF(t,e){return t.replace(sF,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const sF=/\{\$([^}]+)}/g;function aF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function U0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(CE(i)&&CE(a)){if(!U0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function CE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function iF(t,e){const r=new oF(t,e);return r.subscribe.bind(r)}class oF{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");lF(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Xp),s.error===void 0&&(s.error=Xp),s.complete===void 0&&(s.complete=Xp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lF(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Xp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){return t&&t._delegate?t._delegate:t}class gi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new z3;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dF(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:uF(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uF(t){return t===Co?void 0:t}function dF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new cF(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xt||(Xt={}));const hF={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},pF=Xt.INFO,mF={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},gF=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=mF[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c1{constructor(e){this.name=e,this._logLevel=pF,this._logHandler=gF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const vF=(t,e)=>e.some(r=>t instanceof r);let IE,kE;function xF(){return IE||(IE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yF(){return kE||(kE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PA=new WeakMap,Vg=new WeakMap,RA=new WeakMap,Yp=new WeakMap,u1=new WeakMap;function EF(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(Zi(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&PA.set(r,t)}).catch(()=>{}),u1.set(e,t),e}function _F(t){if(Vg.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Vg.set(t,e)}let Hg={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Vg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||RA.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Zi(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bF(t){Hg=t(Hg)}function SF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Jp(this),e,...r);return RA.set(n,e.sort?e.sort():[e]),Zi(n)}:yF().includes(t)?function(...e){return t.apply(Jp(this),e),Zi(PA.get(this))}:function(...e){return Zi(t.apply(Jp(this),e))}}function TF(t){return typeof t=="function"?SF(t):(t instanceof IDBTransaction&&_F(t),vF(t,xF())?new Proxy(t,Hg):t)}function Zi(t){if(t instanceof IDBRequest)return EF(t);if(Yp.has(t))return Yp.get(t);const e=TF(t);return e!==t&&(Yp.set(t,e),u1.set(e,t)),e}const Jp=t=>u1.get(t);function AF(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=Zi(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Zi(a.result),l.oldVersion,l.newVersion,Zi(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const wF=["get","getKey","getAll","getAllKeys","count"],CF=["put","add","delete","clear"],Qp=new Map;function DE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=CF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||wF.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return Qp.set(e,i),i}bF(t=>({...t,get:(e,r,n)=>DE(e,r)||t.get(e,r,n),has:(e,r)=>!!DE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(kF(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function kF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jg="@firebase/app",PE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new c1("@firebase/app"),DF="@firebase/app-compat",PF="@firebase/analytics-compat",RF="@firebase/analytics",FF="@firebase/app-check-compat",OF="@firebase/app-check",NF="@firebase/auth",MF="@firebase/auth-compat",LF="@firebase/database",BF="@firebase/data-connect",UF="@firebase/database-compat",$F="@firebase/functions",VF="@firebase/functions-compat",HF="@firebase/installations",jF="@firebase/installations-compat",GF="@firebase/messaging",WF="@firebase/messaging-compat",zF="@firebase/performance",KF="@firebase/performance-compat",qF="@firebase/remote-config",XF="@firebase/remote-config-compat",YF="@firebase/storage",JF="@firebase/storage-compat",QF="@firebase/firestore",ZF="@firebase/vertexai-preview",e8="@firebase/firestore-compat",t8="firebase",r8="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="[DEFAULT]",n8={[jg]:"fire-core",[DF]:"fire-core-compat",[RF]:"fire-analytics",[PF]:"fire-analytics-compat",[OF]:"fire-app-check",[FF]:"fire-app-check-compat",[NF]:"fire-auth",[MF]:"fire-auth-compat",[LF]:"fire-rtdb",[BF]:"fire-data-connect",[UF]:"fire-rtdb-compat",[$F]:"fire-fn",[VF]:"fire-fn-compat",[HF]:"fire-iid",[jF]:"fire-iid-compat",[GF]:"fire-fcm",[WF]:"fire-fcm-compat",[zF]:"fire-perf",[KF]:"fire-perf-compat",[qF]:"fire-rc",[XF]:"fire-rc-compat",[YF]:"fire-gcs",[JF]:"fire-gcs-compat",[QF]:"fire-fst",[e8]:"fire-fst-compat",[ZF]:"fire-vertex","fire-js":"fire-js",[t8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new Map,s8=new Map,Wg=new Map;function RE(t,e){try{t.container.addComponent(e)}catch(r){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function so(t){const e=t.name;if(Wg.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;Wg.set(e,t);for(const r of $0.values())RE(r,t);for(const r of s8.values())RE(r,t);return!0}function Md(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ei(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new Od("app","Firebase",a8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=r8;function FA(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Gg,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw eo.create("bad-app-name",{appName:String(s)});if(r||(r=IA()),!r)throw eo.create("no-options");const i=$0.get(s);if(i){if(U0(r,i.options)&&U0(n,i.config))return i;throw eo.create("duplicate-app",{appName:s})}const a=new fF(s);for(const l of Wg.values())a.addComponent(l);const o=new i8(r,n,a);return $0.set(s,o),o}function Ld(t=Gg){const e=$0.get(t);if(!e&&t===Gg&&IA())return FA();if(!e)throw eo.create("no-app",{appName:t});return e}function Us(t,e,r){var n;let s=(n=n8[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(o.join(" "));return}so(new gi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8="firebase-heartbeat-database",l8=1,id="firebase-heartbeat-store";let Zp=null;function OA(){return Zp||(Zp=AF(o8,l8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(id)}catch(r){console.warn(r)}}}}).catch(t=>{throw eo.create("idb-open",{originalErrorMessage:t.message})})),Zp}async function c8(t){try{const r=(await OA()).transaction(id),n=await r.objectStore(id).get(NA(t));return await r.done,n}catch(e){if(e instanceof pa)vi.warn(e.message);else{const r=eo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vi.warn(r.message)}}}async function FE(t,e){try{const n=(await OA()).transaction(id,"readwrite");await n.objectStore(id).put(e,NA(t)),await n.done}catch(r){if(r instanceof pa)vi.warn(r.message);else{const n=eo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});vi.warn(n.message)}}}function NA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8=1024,d8=30*24*60*60*1e3;class f8{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new p8(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=OE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=d8}),this._storage.overwrite(this._heartbeatsCache))}catch(n){vi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=OE(),{heartbeatsToSend:n,unsentEntries:s}=h8(this._heartbeatsCache.heartbeats),i=B0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return vi.warn(r),""}}}function OE(){return new Date().toISOString().substring(0,10)}function h8(t,e=u8){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),NE(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),NE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class p8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eF()?tF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await c8(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return FE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return FE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function NE(t){return B0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t){so(new gi("platform-logger",e=>new IF(e),"PRIVATE")),so(new gi("heartbeat",e=>new f8(e),"PRIVATE")),Us(jg,PE,t),Us(jg,PE,"esm2017"),Us("fire-js","")}m8("");function d1(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function MA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LA=MA,BA=new Od("auth","Firebase",MA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new c1("@firebase/auth");function g8(t,...e){V0.logLevel<=Xt.WARN&&V0.warn(`Auth (${sl}): ${t}`,...e)}function a0(t,...e){V0.logLevel<=Xt.ERROR&&V0.error(`Auth (${sl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t,...e){throw h1(t,...e)}function la(t,...e){return h1(t,...e)}function f1(t,e,r){const n=Object.assign(Object.assign({},LA()),{[e]:r});return new Od("auth","Firebase",n).create(e,{appName:t.name})}function Lo(t){return f1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v8(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Pa(t,"argument-error"),f1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function h1(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return BA.create(t,...e)}function Ct(t,e,...r){if(!t)throw h1(e,...r)}function ti(t){const e="INTERNAL ASSERTION FAILED: "+t;throw a0(e),new Error(e)}function xi(t,e){t||ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function x8(){return ME()==="http:"||ME()==="https:"}function ME(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x8()||Y3()||"connection"in navigator)?navigator.onLine:!0}function E8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,r){this.shortDelay=e,this.longDelay=r,xi(r>e,"Short delay should be less than long delay!"),this.isMobile=K3()||J3()}get(){return y8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t,e){xi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=new Bd(3e4,6e4);function m1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ic(t,e,r,n,s={}){return $A(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Nd(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return X3()||(c.referrerPolicy="no-referrer"),UA.fetch()(VA(t,t.config.apiHost,r,o),c)})}async function $A(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},_8),e);try{const s=new T8(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw If(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw If(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw If(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw If(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw f1(t,u,c);Pa(t,u)}}catch(s){if(s instanceof pa)throw s;Pa(t,"network-request-failed",{message:String(s)})}}async function S8(t,e,r,n,s={}){const i=await Ic(t,e,r,n,s);return"mfaPendingCredential"in i&&Pa(t,"multi-factor-auth-required",{_serverResponse:i}),i}function VA(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?p1(t.config,s):`${t.config.apiScheme}://${s}`}class T8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(la(this.auth,"network-request-failed")),b8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function If(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=la(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A8(t,e){return Ic(t,"POST","/v1/accounts:delete",e)}async function HA(t,e){return Ic(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t,e=!1){return or(t).getIdToken(e)}async function GA(t,e=!1){const r=or(t),n=await r.getIdToken(e),s=g1(n);Ct(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Du(em(s.auth_time)),issuedAtTime:Du(em(s.iat)),expirationTime:Du(em(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function em(t){return Number(t)*1e3}function g1(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return a0("JWT malformed, contained fewer than 3 sections"),null;try{const s=wA(r);return s?JSON.parse(s):(a0("Failed to decode base64 JWT payload"),null)}catch(s){return a0("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function LE(t){const e=g1(t);return Ct(e,"internal-error"),Ct(typeof e.exp<"u","internal-error"),Ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function od(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof pa&&w8(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function w8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Du(this.lastLoginAt),this.creationTime=Du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await od(t,HA(r,{idToken:n}));Ct(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?zA(i.providerUserInfo):[],o=I8(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Kg(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function WA(t){const e=or(t);await H0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I8(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function zA(t){return t.map(e=>{var{providerId:r}=e,n=d1(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k8(t,e){const r=await $A(t,{},async()=>{const n=Nd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=VA(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",UA.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function D8(t,e){return Ic(t,"POST","/v2/accounts:revokeToken",m1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ct(e.idToken,"internal-error"),Ct(typeof e.idToken<"u","internal-error"),Ct(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ct(e.length!==0,"internal-error");const r=LE(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await k8(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new Jl;return n&&(Ct(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Ct(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Ct(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jl,this.toJSON())}_performRefresh(){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t,e){Ct(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ri{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=d1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Kg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await od(this,this.stsTokenManager.getToken(this.auth,e));return Ct(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return GA(this,e)}reload(){return WA(this)}_assign(e){this!==e&&(Ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await H0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(Lo(this.auth));const e=await this.getIdToken();return await od(this,A8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,u;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(s=r.email)!==null&&s!==void 0?s:void 0,p=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,m=(a=r.photoURL)!==null&&a!==void 0?a:void 0,g=(o=r.tenantId)!==null&&o!==void 0?o:void 0,v=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=r.createdAt)!==null&&c!==void 0?c:void 0,y=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:I,isAnonymous:R,providerData:A,stsTokenManager:E}=r;Ct(_&&E,e,"internal-error");const T=Jl.fromJSON(this.name,E);Ct(typeof _=="string",e,"internal-error"),Pi(f,e.name),Pi(h,e.name),Ct(typeof I=="boolean",e,"internal-error"),Ct(typeof R=="boolean",e,"internal-error"),Pi(p,e.name),Pi(m,e.name),Pi(g,e.name),Pi(v,e.name),Pi(x,e.name),Pi(y,e.name);const b=new ri({uid:_,auth:e,email:h,emailVerified:I,displayName:f,isAnonymous:R,photoURL:m,phoneNumber:p,tenantId:g,stsTokenManager:T,createdAt:x,lastLoginAt:y});return A&&Array.isArray(A)&&(b.providerData=A.map(S=>Object.assign({},S))),v&&(b._redirectEventId=v),b}static async _fromIdTokenResponse(e,r,n=!1){const s=new Jl;s.updateFromServerResponse(r);const i=new ri({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await H0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ct(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?zA(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new Jl;o.updateFromIdToken(n);const l=new ri({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Kg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new Map;function ni(t){xi(t instanceof Function,"Expected a class definition");let e=BE.get(t);return e?(xi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}KA.type="NONE";const qg=KA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t,e,r){return`firebase:${t}:${e}:${r}`}class Ql{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=i0(this.userKey,s.apiKey,i),this.fullPersistenceKey=i0("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ri._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ql(ni(qg),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ni(qg);const a=i0(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const f=ri._fromJSON(e,u);c!==i&&(o=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ql(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new Ql(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZA(e))return"Blackberry";if(ew(e))return"Webos";if(XA(e))return"Safari";if((e.includes("chrome/")||YA(e))&&!e.includes("edge/"))return"Chrome";if(QA(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function qA(t=Xn()){return/firefox\//i.test(t)}function XA(t=Xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YA(t=Xn()){return/crios\//i.test(t)}function JA(t=Xn()){return/iemobile/i.test(t)}function QA(t=Xn()){return/android/i.test(t)}function ZA(t=Xn()){return/blackberry/i.test(t)}function ew(t=Xn()){return/webos/i.test(t)}function v1(t=Xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function P8(t=Xn()){var e;return v1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function R8(){return Q3()&&document.documentMode===10}function tw(t=Xn()){return v1(t)||QA(t)||ew(t)||ZA(t)||/windows phone/i.test(t)||JA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e=[]){let r;switch(t){case"Browser":r=UE(Xn());break;case"Worker":r=`${UE(Xn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${sl}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O8(t,e={}){return Ic(t,"GET","/v2/passwordPolicy",m1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=6;class M8{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:N8,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $E(this),this.idTokenSubscription=new $E(this),this.beforeStateQueue=new F8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ni(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Ql.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await HA(this,{idToken:e}),n=await ri._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ei(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await H0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(Lo(this));const r=e?or(e):null;return r&&Ct(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(Lo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(Lo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await O8(this),r=new M8(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Od("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await D8(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ni(e)||this._popupRedirectResolver;Ct(r,this,"argument-error"),this.redirectPersistenceManager=await Ql.create(this,[ni(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ct(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&g8(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function zh(t){return or(t)}class $E{constructor(e){this.auth=e,this.observer=null,this.addObserver=iF(r=>this.observer=r)}get next(){return Ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B8(t){x1=t}function U8(t){return x1.loadJS(t)}function $8(){return x1.gapiScript}function V8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t,e){const r=Md(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(U0(i,e??{}))return s;Pa(s,"already-initialized")}return r.initialize({options:e})}function H8(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function sw(t,e,r){const n=zh(t);Ct(n._canInitEmulator,n,"emulator-config-failed"),Ct(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=aw(e),{host:a,port:o}=j8(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),G8()}function aw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function j8(t){const e=aw(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:VE(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:VE(a)}}}function VE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function G8(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,r){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t,e){return S8(t,"POST","/v1/accounts:signInWithIdp",m1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8="http://localhost";class ao extends y1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Pa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=d1(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new ao(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Zl(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Zl(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Zl(e,r)}buildRequest(){const e={requestUri:W8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Nd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends E1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Ud{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ya.credential(e.oauthAccessToken)}catch{return null}}}Ya.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ya.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Ud{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ao._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ra.credential(r,n)}catch{return null}}}ra.GOOGLE_SIGN_IN_METHOD="google.com";ra.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends Ud{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ja.credential(e.oauthAccessToken)}catch{return null}}}Ja.GITHUB_SIGN_IN_METHOD="github.com";Ja.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends Ud{constructor(){super("twitter.com")}static credential(e,r){return ao._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Qa.credential(r,n)}catch{return null}}}Qa.TWITTER_SIGN_IN_METHOD="twitter.com";Qa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await ri._fromIdTokenResponse(e,n,s),a=HE(n);return new dc({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=HE(n);return new dc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function HE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0 extends pa{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,j0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new j0(e,r,n,s)}}function iw(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?j0._fromErrorAndOperation(t,i,e,n):i})}async function z8(t,e,r=!1){const n=await od(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return dc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K8(t,e,r=!1){const{auth:n}=t;if(ei(n.app))return Promise.reject(Lo(n));const s="reauthenticate";try{const i=await od(t,iw(n,s,e,t),r);Ct(i.idToken,n,"internal-error");const a=g1(i.idToken);Ct(a,n,"internal-error");const{sub:o}=a;return Ct(t.uid===o,n,"user-mismatch"),dc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Pa(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q8(t,e,r=!1){if(ei(t.app))return Promise.reject(Lo(t));const n="signIn",s=await iw(t,n,e),i=await dc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function ow(t,e,r,n){return or(t).onIdTokenChanged(e,r,n)}function lw(t,e,r){return or(t).beforeAuthStateChanged(e,r)}function Kh(t,e,r,n){return or(t).onAuthStateChanged(e,r,n)}function qh(t){return or(t).signOut()}const G0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(G0,"1"),this.storage.removeItem(G0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=1e3,Y8=10;class uw extends cw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);R8()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Y8):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},X8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}uw.type="LOCAL";const dw=uw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends cw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}fw.type="SESSION";const _1=fw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Xh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await J8(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=b1("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const h=f;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(h.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(){return window}function Z8(t){wa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(){return typeof wa().WorkerGlobalScope<"u"&&typeof wa().importScripts=="function"}async function e6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function r6(){return hw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="firebaseLocalStorageDb",n6=1,W0="firebaseLocalStorage",mw="fbase_key";class $d{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Yh(t,e){return t.transaction([W0],e?"readwrite":"readonly").objectStore(W0)}function s6(){const t=indexedDB.deleteDatabase(pw);return new $d(t).toPromise()}function Xg(){const t=indexedDB.open(pw,n6);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(W0,{keyPath:mw})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(W0)?e(n):(n.close(),await s6(),e(await Xg()))})})}async function jE(t,e,r){const n=Yh(t,!0).put({[mw]:e,value:r});return new $d(n).toPromise()}async function a6(t,e){const r=Yh(t,!1).get(e),n=await new $d(r).toPromise();return n===void 0?null:n.value}function GE(t,e){const r=Yh(t,!0).delete(e);return new $d(r).toPromise()}const i6=800,o6=3;class gw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>o6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xh._getInstance(r6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await e6(),!this.activeServiceWorker)return;this.sender=new Q8(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xg();return await jE(e,G0,"1"),await GE(e,G0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>jE(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>a6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>GE(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Yh(s,!1).getAll();return new $d(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gw.type="LOCAL";const vw=gw;new Bd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t,e){return e?ni(e):(Ct(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1 extends y1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Zl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function l6(t){return q8(t.auth,new S1(t),t.bypassAuthState)}function c6(t){const{auth:e,user:r}=t;return Ct(r,e,"internal-error"),K8(r,new S1(t),t.bypassAuthState)}async function u6(t){const{auth:e,user:r}=t;return Ct(r,e,"internal-error"),z8(r,new S1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l6;case"linkViaPopup":case"linkViaRedirect":return u6;case"reauthViaPopup":case"reauthViaRedirect":return c6;default:Pa(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=new Bd(2e3,1e4);async function T1(t,e,r){if(ei(t.app))return Promise.reject(la(t,"operation-not-supported-in-this-environment"));const n=zh(t);v8(t,e,E1);const s=xw(n,r);return new Do(n,"signInViaPopup",e,s).executeNotNull()}class Do extends yw{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ct(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=b1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(la(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(la(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(la(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,d6.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6="pendingRedirect",o0=new Map;class h6 extends yw{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=o0.get(this.auth._key());if(!e){try{const n=await p6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}o0.set(this.auth._key(),e)}return this.bypassAuthState||o0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p6(t,e){const r=v6(e),n=g6(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function m6(t,e){o0.set(t._key(),e)}function g6(t){return ni(t._redirectPersistence)}function v6(t){return i0(f6,t.config.apiKey,t.name)}async function x6(t,e,r=!1){if(ei(t.app))return Promise.reject(Lo(t));const n=zh(t),s=xw(n,e),a=await new h6(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=10*60*1e3;class E6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!Ew(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(la(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y6&&this.cachedEventUids.clear(),this.cachedEventUids.has(WE(e))}saveEventToCache(e){this.cachedEventUids.add(WE(e)),this.lastProcessedEventTime=Date.now()}}function WE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ew({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ew(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(t,e={}){return Ic(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T6=/^https?/;async function A6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await b6(t);for(const r of e)try{if(w6(r))return}catch{}Pa(t,"unauthorized-domain")}function w6(t){const e=zg(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!T6.test(r))return!1;if(S6.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=new Bd(3e4,6e4);function zE(){const t=wa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function I6(t){return new Promise((e,r)=>{var n,s,i;function a(){zE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zE(),r(la(t,"network-request-failed"))},timeout:C6.get()})}if(!((s=(n=wa().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=wa().gapi)===null||i===void 0)&&i.load)a();else{const o=V8("iframefcb");return wa()[o]=()=>{gapi.load?a():r(la(t,"network-request-failed"))},U8(`${$8()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw l0=null,e})}let l0=null;function k6(t){return l0=l0||I6(t),l0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new Bd(5e3,15e3),P6="__/auth/iframe",R6="emulator/auth/iframe",F6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N6(t){const e=t.config;Ct(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?p1(e,R6):`https://${t.config.authDomain}/${P6}`,n={apiKey:e.apiKey,appName:t.name,v:sl},s=O6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Nd(n).slice(1)}`}async function M6(t){const e=await k6(t),r=wa().gapi;return Ct(r,t,"internal-error"),e.open({where:document.body,url:N6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F6,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=la(t,"network-request-failed"),o=wa().setTimeout(()=>{i(a)},D6.get());function l(){wa().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B6=500,U6=600,$6="_blank",V6="http://localhost";class KE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function H6(t,e,r,n=B6,s=U6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},L6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Xn().toLowerCase();r&&(o=YA(c)?$6:r),qA(c)&&(e=e||V6,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(P8(c)&&o!=="_self")return j6(e||"",o),new KE(null);const f=window.open(e||"",o,u);Ct(f,t,"popup-blocked");try{f.focus()}catch{}return new KE(f)}function j6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6="__/auth/handler",W6="emulator/auth/handler",z6=encodeURIComponent("fac");async function qE(t,e,r,n,s,i){Ct(t.config.authDomain,t,"auth-domain-config-required"),Ct(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:sl,eventId:s};if(e instanceof E1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",aF(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))a[u]=f}if(e instanceof Ud){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${z6}=${encodeURIComponent(l)}`:"";return`${K6(t)}?${Nd(o).slice(1)}${c}`}function K6({config:t}){return t.emulator?p1(t,W6):`https://${t.authDomain}/${G6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class q6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_1,this._completeRedirectFn=x6,this._overrideRedirectResult=m6}async _openPopup(e,r,n,s){var i;xi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await qE(e,r,n,zg(),s);return H6(e,a,b1())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await qE(e,r,n,zg(),s);return Z8(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(xi(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await M6(e),n=new E6(e);return r.register("authEvent",s=>(Ct(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(tm,{type:tm},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[tm];a!==void 0&&r(!!a),Pa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=A6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return tw()||XA()||v1()}}const _w=q6;var XE="@firebase/auth",YE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J6(t){so(new gi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Ct(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rw(t)},c=new L8(n,s,i,l);return H8(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),so(new gi("auth-internal",e=>{const r=zh(e.getProvider("auth").getImmediate());return(n=>new X6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Us(XE,YE,Y6(t)),Us(XE,YE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=5*60,Z6=kA("authIdTokenMaxAge")||Q6;let JE=null;const eO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Z6)return;const s=r==null?void 0:r.token;JE!==s&&(JE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Wo(t=Ld()){const e=Md(t,"auth");if(e.isInitialized())return e.getImmediate();const r=nw(t,{popupRedirectResolver:_w,persistence:[vw,dw,_1]}),n=kA("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=eO(i.toString());lw(r,a,()=>a(r.currentUser)),ow(r,o=>a(o))}}const s=CA("auth");return s&&sw(r,`http://${s}`),r}function tO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}B8({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=la("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",tO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J6("Browser");const rO=Object.freeze(Object.defineProperty({__proto__:null,AuthCredential:y1,FacebookAuthProvider:Ya,GithubAuthProvider:Ja,GoogleAuthProvider:ra,OAuthCredential:ao,TwitterAuthProvider:Qa,beforeAuthStateChanged:lw,browserLocalPersistence:dw,browserPopupRedirectResolver:_w,browserSessionPersistence:_1,connectAuthEmulator:sw,getAuth:Wo,getIdToken:jA,getIdTokenResult:GA,inMemoryPersistence:qg,indexedDBLocalPersistence:vw,initializeAuth:nw,onAuthStateChanged:Kh,onIdTokenChanged:ow,prodErrorMap:LA,reload:WA,signInWithPopup:T1,signOut:qh},Symbol.toStringTag,{value:"Module"}));var QE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bo,bw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,T){function b(){}b.prototype=T.prototype,E.D=T.prototype,E.prototype=new b,E.prototype.constructor=E,E.C=function(S,k,w){for(var D=Array(arguments.length-2),N=2;N<arguments.length;N++)D[N-2]=arguments[N];return T.prototype[k].apply(S,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,T,b){b||(b=0);var S=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)S[k]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(k=0;16>k;++k)S[k]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=E.g[0],b=E.g[1],k=E.g[2];var w=E.g[3],D=T+(w^b&(k^w))+S[0]+3614090360&4294967295;T=b+(D<<7&4294967295|D>>>25),D=w+(k^T&(b^k))+S[1]+3905402710&4294967295,w=T+(D<<12&4294967295|D>>>20),D=k+(b^w&(T^b))+S[2]+606105819&4294967295,k=w+(D<<17&4294967295|D>>>15),D=b+(T^k&(w^T))+S[3]+3250441966&4294967295,b=k+(D<<22&4294967295|D>>>10),D=T+(w^b&(k^w))+S[4]+4118548399&4294967295,T=b+(D<<7&4294967295|D>>>25),D=w+(k^T&(b^k))+S[5]+1200080426&4294967295,w=T+(D<<12&4294967295|D>>>20),D=k+(b^w&(T^b))+S[6]+2821735955&4294967295,k=w+(D<<17&4294967295|D>>>15),D=b+(T^k&(w^T))+S[7]+4249261313&4294967295,b=k+(D<<22&4294967295|D>>>10),D=T+(w^b&(k^w))+S[8]+1770035416&4294967295,T=b+(D<<7&4294967295|D>>>25),D=w+(k^T&(b^k))+S[9]+2336552879&4294967295,w=T+(D<<12&4294967295|D>>>20),D=k+(b^w&(T^b))+S[10]+4294925233&4294967295,k=w+(D<<17&4294967295|D>>>15),D=b+(T^k&(w^T))+S[11]+2304563134&4294967295,b=k+(D<<22&4294967295|D>>>10),D=T+(w^b&(k^w))+S[12]+1804603682&4294967295,T=b+(D<<7&4294967295|D>>>25),D=w+(k^T&(b^k))+S[13]+4254626195&4294967295,w=T+(D<<12&4294967295|D>>>20),D=k+(b^w&(T^b))+S[14]+2792965006&4294967295,k=w+(D<<17&4294967295|D>>>15),D=b+(T^k&(w^T))+S[15]+1236535329&4294967295,b=k+(D<<22&4294967295|D>>>10),D=T+(k^w&(b^k))+S[1]+4129170786&4294967295,T=b+(D<<5&4294967295|D>>>27),D=w+(b^k&(T^b))+S[6]+3225465664&4294967295,w=T+(D<<9&4294967295|D>>>23),D=k+(T^b&(w^T))+S[11]+643717713&4294967295,k=w+(D<<14&4294967295|D>>>18),D=b+(w^T&(k^w))+S[0]+3921069994&4294967295,b=k+(D<<20&4294967295|D>>>12),D=T+(k^w&(b^k))+S[5]+3593408605&4294967295,T=b+(D<<5&4294967295|D>>>27),D=w+(b^k&(T^b))+S[10]+38016083&4294967295,w=T+(D<<9&4294967295|D>>>23),D=k+(T^b&(w^T))+S[15]+3634488961&4294967295,k=w+(D<<14&4294967295|D>>>18),D=b+(w^T&(k^w))+S[4]+3889429448&4294967295,b=k+(D<<20&4294967295|D>>>12),D=T+(k^w&(b^k))+S[9]+568446438&4294967295,T=b+(D<<5&4294967295|D>>>27),D=w+(b^k&(T^b))+S[14]+3275163606&4294967295,w=T+(D<<9&4294967295|D>>>23),D=k+(T^b&(w^T))+S[3]+4107603335&4294967295,k=w+(D<<14&4294967295|D>>>18),D=b+(w^T&(k^w))+S[8]+1163531501&4294967295,b=k+(D<<20&4294967295|D>>>12),D=T+(k^w&(b^k))+S[13]+2850285829&4294967295,T=b+(D<<5&4294967295|D>>>27),D=w+(b^k&(T^b))+S[2]+4243563512&4294967295,w=T+(D<<9&4294967295|D>>>23),D=k+(T^b&(w^T))+S[7]+1735328473&4294967295,k=w+(D<<14&4294967295|D>>>18),D=b+(w^T&(k^w))+S[12]+2368359562&4294967295,b=k+(D<<20&4294967295|D>>>12),D=T+(b^k^w)+S[5]+4294588738&4294967295,T=b+(D<<4&4294967295|D>>>28),D=w+(T^b^k)+S[8]+2272392833&4294967295,w=T+(D<<11&4294967295|D>>>21),D=k+(w^T^b)+S[11]+1839030562&4294967295,k=w+(D<<16&4294967295|D>>>16),D=b+(k^w^T)+S[14]+4259657740&4294967295,b=k+(D<<23&4294967295|D>>>9),D=T+(b^k^w)+S[1]+2763975236&4294967295,T=b+(D<<4&4294967295|D>>>28),D=w+(T^b^k)+S[4]+1272893353&4294967295,w=T+(D<<11&4294967295|D>>>21),D=k+(w^T^b)+S[7]+4139469664&4294967295,k=w+(D<<16&4294967295|D>>>16),D=b+(k^w^T)+S[10]+3200236656&4294967295,b=k+(D<<23&4294967295|D>>>9),D=T+(b^k^w)+S[13]+681279174&4294967295,T=b+(D<<4&4294967295|D>>>28),D=w+(T^b^k)+S[0]+3936430074&4294967295,w=T+(D<<11&4294967295|D>>>21),D=k+(w^T^b)+S[3]+3572445317&4294967295,k=w+(D<<16&4294967295|D>>>16),D=b+(k^w^T)+S[6]+76029189&4294967295,b=k+(D<<23&4294967295|D>>>9),D=T+(b^k^w)+S[9]+3654602809&4294967295,T=b+(D<<4&4294967295|D>>>28),D=w+(T^b^k)+S[12]+3873151461&4294967295,w=T+(D<<11&4294967295|D>>>21),D=k+(w^T^b)+S[15]+530742520&4294967295,k=w+(D<<16&4294967295|D>>>16),D=b+(k^w^T)+S[2]+3299628645&4294967295,b=k+(D<<23&4294967295|D>>>9),D=T+(k^(b|~w))+S[0]+4096336452&4294967295,T=b+(D<<6&4294967295|D>>>26),D=w+(b^(T|~k))+S[7]+1126891415&4294967295,w=T+(D<<10&4294967295|D>>>22),D=k+(T^(w|~b))+S[14]+2878612391&4294967295,k=w+(D<<15&4294967295|D>>>17),D=b+(w^(k|~T))+S[5]+4237533241&4294967295,b=k+(D<<21&4294967295|D>>>11),D=T+(k^(b|~w))+S[12]+1700485571&4294967295,T=b+(D<<6&4294967295|D>>>26),D=w+(b^(T|~k))+S[3]+2399980690&4294967295,w=T+(D<<10&4294967295|D>>>22),D=k+(T^(w|~b))+S[10]+4293915773&4294967295,k=w+(D<<15&4294967295|D>>>17),D=b+(w^(k|~T))+S[1]+2240044497&4294967295,b=k+(D<<21&4294967295|D>>>11),D=T+(k^(b|~w))+S[8]+1873313359&4294967295,T=b+(D<<6&4294967295|D>>>26),D=w+(b^(T|~k))+S[15]+4264355552&4294967295,w=T+(D<<10&4294967295|D>>>22),D=k+(T^(w|~b))+S[6]+2734768916&4294967295,k=w+(D<<15&4294967295|D>>>17),D=b+(w^(k|~T))+S[13]+1309151649&4294967295,b=k+(D<<21&4294967295|D>>>11),D=T+(k^(b|~w))+S[4]+4149444226&4294967295,T=b+(D<<6&4294967295|D>>>26),D=w+(b^(T|~k))+S[11]+3174756917&4294967295,w=T+(D<<10&4294967295|D>>>22),D=k+(T^(w|~b))+S[2]+718787259&4294967295,k=w+(D<<15&4294967295|D>>>17),D=b+(w^(k|~T))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+T&4294967295,E.g[1]=E.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,E.g[2]=E.g[2]+k&4294967295,E.g[3]=E.g[3]+w&4294967295}n.prototype.u=function(E,T){T===void 0&&(T=E.length);for(var b=T-this.blockSize,S=this.B,k=this.h,w=0;w<T;){if(k==0)for(;w<=b;)s(this,E,w),w+=this.blockSize;if(typeof E=="string"){for(;w<T;)if(S[k++]=E.charCodeAt(w++),k==this.blockSize){s(this,S),k=0;break}}else for(;w<T;)if(S[k++]=E[w++],k==this.blockSize){s(this,S),k=0;break}}this.h=k,this.o+=T},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var T=1;T<E.length-8;++T)E[T]=0;var b=8*this.o;for(T=E.length-8;T<E.length;++T)E[T]=b&255,b/=256;for(this.u(E),E=Array(16),T=b=0;4>T;++T)for(var S=0;32>S;S+=8)E[b++]=this.g[T]>>>S&255;return E};function i(E,T){var b=o;return Object.prototype.hasOwnProperty.call(b,E)?b[E]:b[E]=T(E)}function a(E,T){this.h=T;for(var b=[],S=!0,k=E.length-1;0<=k;k--){var w=E[k]|0;S&&w==T||(b[k]=w,S=!1)}this.g=b}var o={};function l(E){return-128<=E&&128>E?i(E,function(T){return new a([T|0],0>T?-1:0)}):new a([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return v(c(-E));for(var T=[],b=1,S=0;E>=b;S++)T[S]=E/b|0,b*=4294967296;return new a(T,0)}function u(E,T){if(E.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E.charAt(0)=="-")return v(u(E.substring(1),T));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(T,8)),S=f,k=0;k<E.length;k+=8){var w=Math.min(8,E.length-k),D=parseInt(E.substring(k,k+w),T);8>w?(w=c(Math.pow(T,w)),S=S.j(w).add(c(D))):(S=S.j(b),S=S.add(c(D)))}return S}var f=l(0),h=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(g(this))return-v(this).m();for(var E=0,T=1,b=0;b<this.g.length;b++){var S=this.i(b);E+=(0<=S?S:4294967296+S)*T,T*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(m(this))return"0";if(g(this))return"-"+v(this).toString(E);for(var T=c(Math.pow(E,6)),b=this,S="";;){var k=I(b,T).g;b=x(b,k.j(T));var w=((0<b.g.length?b.g[0]:b.h)>>>0).toString(E);if(b=k,m(b))return w+S;for(;6>w.length;)w="0"+w;S=w+S}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function m(E){if(E.h!=0)return!1;for(var T=0;T<E.g.length;T++)if(E.g[T]!=0)return!1;return!0}function g(E){return E.h==-1}t.l=function(E){return E=x(this,E),g(E)?-1:m(E)?0:1};function v(E){for(var T=E.g.length,b=[],S=0;S<T;S++)b[S]=~E.g[S];return new a(b,~E.h).add(h)}t.abs=function(){return g(this)?v(this):this},t.add=function(E){for(var T=Math.max(this.g.length,E.g.length),b=[],S=0,k=0;k<=T;k++){var w=S+(this.i(k)&65535)+(E.i(k)&65535),D=(w>>>16)+(this.i(k)>>>16)+(E.i(k)>>>16);S=D>>>16,w&=65535,D&=65535,b[k]=D<<16|w}return new a(b,b[b.length-1]&-2147483648?-1:0)};function x(E,T){return E.add(v(T))}t.j=function(E){if(m(this)||m(E))return f;if(g(this))return g(E)?v(this).j(v(E)):v(v(this).j(E));if(g(E))return v(this.j(v(E)));if(0>this.l(p)&&0>E.l(p))return c(this.m()*E.m());for(var T=this.g.length+E.g.length,b=[],S=0;S<2*T;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(var k=0;k<E.g.length;k++){var w=this.i(S)>>>16,D=this.i(S)&65535,N=E.i(k)>>>16,F=E.i(k)&65535;b[2*S+2*k]+=D*F,y(b,2*S+2*k),b[2*S+2*k+1]+=w*F,y(b,2*S+2*k+1),b[2*S+2*k+1]+=D*N,y(b,2*S+2*k+1),b[2*S+2*k+2]+=w*N,y(b,2*S+2*k+2)}for(S=0;S<T;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=T;S<2*T;S++)b[S]=0;return new a(b,0)};function y(E,T){for(;(E[T]&65535)!=E[T];)E[T+1]+=E[T]>>>16,E[T]&=65535,T++}function _(E,T){this.g=E,this.h=T}function I(E,T){if(m(T))throw Error("division by zero");if(m(E))return new _(f,f);if(g(E))return T=I(v(E),T),new _(v(T.g),v(T.h));if(g(T))return T=I(E,v(T)),new _(v(T.g),T.h);if(30<E.g.length){if(g(E)||g(T))throw Error("slowDivide_ only works with positive integers.");for(var b=h,S=T;0>=S.l(E);)b=R(b),S=R(S);var k=A(b,1),w=A(S,1);for(S=A(S,2),b=A(b,2);!m(S);){var D=w.add(S);0>=D.l(E)&&(k=k.add(b),w=D),S=A(S,1),b=A(b,1)}return T=x(E,k.j(T)),new _(k,T)}for(k=f;0<=E.l(T);){for(b=Math.max(1,Math.floor(E.m()/T.m())),S=Math.ceil(Math.log(b)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),w=c(b),D=w.j(T);g(D)||0<D.l(E);)b-=S,w=c(b),D=w.j(T);m(w)&&(w=h),k=k.add(w),E=x(E,D)}return new _(k,E)}t.A=function(E){return I(this,E).h},t.and=function(E){for(var T=Math.max(this.g.length,E.g.length),b=[],S=0;S<T;S++)b[S]=this.i(S)&E.i(S);return new a(b,this.h&E.h)},t.or=function(E){for(var T=Math.max(this.g.length,E.g.length),b=[],S=0;S<T;S++)b[S]=this.i(S)|E.i(S);return new a(b,this.h|E.h)},t.xor=function(E){for(var T=Math.max(this.g.length,E.g.length),b=[],S=0;S<T;S++)b[S]=this.i(S)^E.i(S);return new a(b,this.h^E.h)};function R(E){for(var T=E.g.length+1,b=[],S=0;S<T;S++)b[S]=E.i(S)<<1|E.i(S-1)>>>31;return new a(b,E.h)}function A(E,T){var b=T>>5;T%=32;for(var S=E.g.length-b,k=[],w=0;w<S;w++)k[w]=0<T?E.i(w+b)>>>T|E.i(w+b+1)<<32-T:E.i(w+b);return new a(k,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,bw=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,Bo=a}).apply(typeof QE<"u"?QE:typeof self<"u"?self:typeof window<"u"?window:{});var kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sw,uu,Tw,c0,Yg,Aw,ww,Cw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,L,G){return C==Array.prototype||C==Object.prototype||(C[L]=G.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof kf=="object"&&kf];for(var L=0;L<C.length;++L){var G=C[L];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var n=r(this);function s(C,L){if(L)e:{var G=n;C=C.split(".");for(var ie=0;ie<C.length-1;ie++){var Ce=C[ie];if(!(Ce in G))break e;G=G[Ce]}C=C[C.length-1],ie=G[C],L=L(ie),L!=ie&&L!=null&&e(G,C,{configurable:!0,writable:!0,value:L})}}function i(C,L){C instanceof String&&(C+="");var G=0,ie=!1,Ce={next:function(){if(!ie&&G<C.length){var Le=G++;return{value:L(Le,C[Le]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return Ce[Symbol.iterator]=function(){return Ce},Ce}s("Array.prototype.values",function(C){return C||function(){return i(this,function(L,G){return G})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(C){var L=typeof C;return L=L!="object"?L:C?Array.isArray(C)?"array":L:"null",L=="array"||L=="object"&&typeof C.length=="number"}function c(C){var L=typeof C;return L=="object"&&C!=null||L=="function"}function u(C,L,G){return C.call.apply(C.bind,arguments)}function f(C,L,G){if(!C)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var Ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ce,ie),C.apply(L,Ce)}}return function(){return C.apply(L,arguments)}}function h(C,L,G){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,h.apply(null,arguments)}function p(C,L){var G=Array.prototype.slice.call(arguments,1);return function(){var ie=G.slice();return ie.push.apply(ie,arguments),C.apply(this,ie)}}function m(C,L){function G(){}G.prototype=L.prototype,C.aa=L.prototype,C.prototype=new G,C.prototype.constructor=C,C.Qb=function(ie,Ce,Le){for(var tt=Array(arguments.length-2),pr=2;pr<arguments.length;pr++)tt[pr-2]=arguments[pr];return L.prototype[Ce].apply(ie,tt)}}function g(C){const L=C.length;if(0<L){const G=Array(L);for(let ie=0;ie<L;ie++)G[ie]=C[ie];return G}return[]}function v(C,L){for(let G=1;G<arguments.length;G++){const ie=arguments[G];if(l(ie)){const Ce=C.length||0,Le=ie.length||0;C.length=Ce+Le;for(let tt=0;tt<Le;tt++)C[Ce+tt]=ie[tt]}else C.push(ie)}}class x{constructor(L,G){this.i=L,this.j=G,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function y(C){return/^[\s\xa0]*$/.test(C)}function _(){var C=o.navigator;return C&&(C=C.userAgent)?C:""}function I(C){return I[" "](C),C}I[" "]=function(){};var R=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function A(C,L,G){for(const ie in C)L.call(G,C[ie],ie,C)}function E(C,L){for(const G in C)L.call(void 0,C[G],G,C)}function T(C){const L={};for(const G in C)L[G]=C[G];return L}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(C,L){let G,ie;for(let Ce=1;Ce<arguments.length;Ce++){ie=arguments[Ce];for(G in ie)C[G]=ie[G];for(let Le=0;Le<b.length;Le++)G=b[Le],Object.prototype.hasOwnProperty.call(ie,G)&&(C[G]=ie[G])}}function k(C){var L=1;C=C.split(":");const G=[];for(;0<L&&C.length;)G.push(C.shift()),L--;return C.length&&G.push(C.join(":")),G}function w(C){o.setTimeout(()=>{throw C},0)}function D(){var C=U;let L=null;return C.g&&(L=C.g,C.g=C.g.next,C.g||(C.h=null),L.next=null),L}class N{constructor(){this.h=this.g=null}add(L,G){const ie=F.get();ie.set(L,G),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var F=new x(()=>new P,C=>C.reset());class P{constructor(){this.next=this.g=this.h=null}set(L,G){this.h=L,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let O,M=!1,U=new N,z=()=>{const C=o.Promise.resolve(void 0);O=()=>{C.then(j)}};var j=()=>{for(var C;C=D();){try{C.h.call(C.g)}catch(G){w(G)}var L=F;L.j(C),100>L.h&&(L.h++,C.next=L.g,L.g=C)}M=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(C,L){this.type=C,this.g=this.target=L,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var C=!1,L=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const G=()=>{};o.addEventListener("test",G,L),o.removeEventListener("test",G,L)}catch{}return C}();function re(C,L){if(W.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var G=this.type=C.type,ie=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=L,L=C.relatedTarget){if(R){e:{try{I(L.nodeName);var Ce=!0;break e}catch{}Ce=!1}Ce||(L=null)}}else G=="mouseover"?L=C.fromElement:G=="mouseout"&&(L=C.toElement);this.relatedTarget=L,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:me[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&re.aa.h.call(this)}}m(re,W);var me={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),pe=0;function te(C,L,G,ie,Ce){this.listener=C,this.proxy=null,this.src=L,this.type=G,this.capture=!!ie,this.ha=Ce,this.key=++pe,this.da=this.fa=!1}function Q(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function ye(C){this.src=C,this.g={},this.h=0}ye.prototype.add=function(C,L,G,ie,Ce){var Le=C.toString();C=this.g[Le],C||(C=this.g[Le]=[],this.h++);var tt=q(C,L,ie,Ce);return-1<tt?(L=C[tt],G||(L.fa=!1)):(L=new te(L,this.src,Le,!!ie,Ce),L.fa=G,C.push(L)),L};function X(C,L){var G=L.type;if(G in C.g){var ie=C.g[G],Ce=Array.prototype.indexOf.call(ie,L,void 0),Le;(Le=0<=Ce)&&Array.prototype.splice.call(ie,Ce,1),Le&&(Q(L),C.g[G].length==0&&(delete C.g[G],C.h--))}}function q(C,L,G,ie){for(var Ce=0;Ce<C.length;++Ce){var Le=C[Ce];if(!Le.da&&Le.listener==L&&Le.capture==!!G&&Le.ha==ie)return Ce}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),ne={};function ve(C,L,G,ie,Ce){if(Array.isArray(L)){for(var Le=0;Le<L.length;Le++)ve(C,L[Le],G,ie,Ce);return null}return G=$e(G),C&&C[ce]?C.K(L,G,c(ie)?!!ie.capture:!1,Ce):ae(C,L,G,!1,ie,Ce)}function ae(C,L,G,ie,Ce,Le){if(!L)throw Error("Invalid event type");var tt=c(Ce)?!!Ce.capture:!!Ce,pr=Ge(C);if(pr||(C[Y]=pr=new ye(C)),G=pr.add(L,G,ie,tt,Le),G.proxy)return G;if(ie=le(),G.proxy=ie,ie.src=C,ie.listener=G,C.addEventListener)K||(Ce=tt),Ce===void 0&&(Ce=!1),C.addEventListener(L.toString(),ie,Ce);else if(C.attachEvent)C.attachEvent(Ie(L.toString()),ie);else if(C.addListener&&C.removeListener)C.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return G}function le(){function C(G){return L.call(C.src,C.listener,G)}const L=Te;return C}function de(C,L,G,ie,Ce){if(Array.isArray(L))for(var Le=0;Le<L.length;Le++)de(C,L[Le],G,ie,Ce);else ie=c(ie)?!!ie.capture:!!ie,G=$e(G),C&&C[ce]?(C=C.i,L=String(L).toString(),L in C.g&&(Le=C.g[L],G=q(Le,G,ie,Ce),-1<G&&(Q(Le[G]),Array.prototype.splice.call(Le,G,1),Le.length==0&&(delete C.g[L],C.h--)))):C&&(C=Ge(C))&&(L=C.g[L.toString()],C=-1,L&&(C=q(L,G,ie,Ce)),(G=-1<C?L[C]:null)&&Se(G))}function Se(C){if(typeof C!="number"&&C&&!C.da){var L=C.src;if(L&&L[ce])X(L.i,C);else{var G=C.type,ie=C.proxy;L.removeEventListener?L.removeEventListener(G,ie,C.capture):L.detachEvent?L.detachEvent(Ie(G),ie):L.addListener&&L.removeListener&&L.removeListener(ie),(G=Ge(L))?(X(G,C),G.h==0&&(G.src=null,L[Y]=null)):Q(C)}}}function Ie(C){return C in ne?ne[C]:ne[C]="on"+C}function Te(C,L){if(C.da)C=!0;else{L=new re(L,this);var G=C.listener,ie=C.ha||C.src;C.fa&&Se(C),C=G.call(ie,L)}return C}function Ge(C){return C=C[Y],C instanceof ye?C:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(C){return typeof C=="function"?C:(C[ke]||(C[ke]=function(L){return C.handleEvent(L)}),C[ke])}function Be(){H.call(this),this.i=new ye(this),this.M=this,this.F=null}m(Be,H),Be.prototype[ce]=!0,Be.prototype.removeEventListener=function(C,L,G,ie){de(this,C,L,G,ie)};function We(C,L){var G,ie=C.F;if(ie)for(G=[];ie;ie=ie.F)G.push(ie);if(C=C.M,ie=L.type||L,typeof L=="string")L=new W(L,C);else if(L instanceof W)L.target=L.target||C;else{var Ce=L;L=new W(ie,C),S(L,Ce)}if(Ce=!0,G)for(var Le=G.length-1;0<=Le;Le--){var tt=L.g=G[Le];Ce=ze(tt,ie,!0,L)&&Ce}if(tt=L.g=C,Ce=ze(tt,ie,!0,L)&&Ce,Ce=ze(tt,ie,!1,L)&&Ce,G)for(Le=0;Le<G.length;Le++)tt=L.g=G[Le],Ce=ze(tt,ie,!1,L)&&Ce}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var C=this.i,L;for(L in C.g){for(var G=C.g[L],ie=0;ie<G.length;ie++)Q(G[ie]);delete C.g[L],C.h--}}this.F=null},Be.prototype.K=function(C,L,G,ie){return this.i.add(String(C),L,!1,G,ie)},Be.prototype.L=function(C,L,G,ie){return this.i.add(String(C),L,!0,G,ie)};function ze(C,L,G,ie){if(L=C.i.g[String(L)],!L)return!0;L=L.concat();for(var Ce=!0,Le=0;Le<L.length;++Le){var tt=L[Le];if(tt&&!tt.da&&tt.capture==G){var pr=tt.listener,xn=tt.ha||tt.src;tt.fa&&X(C.i,tt),Ce=pr.call(xn,ie)!==!1&&Ce}}return Ce&&!ie.defaultPrevented}function Ee(C,L,G){if(typeof C=="function")G&&(C=h(C,G));else if(C&&typeof C.handleEvent=="function")C=h(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:o.setTimeout(C,L||0)}function xe(C){C.g=Ee(()=>{C.g=null,C.i&&(C.i=!1,xe(C))},C.l);const L=C.h;C.h=null,C.m.apply(null,L)}class be extends H{constructor(L,G){super(),this.m=L,this.l=G,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(C){H.call(this),this.h=C,this.g={}}m(Ne,H);var je=[];function ot(C){A(C.g,function(L,G){this.g.hasOwnProperty(G)&&Se(L)},C),C.g={}}Ne.prototype.N=function(){Ne.aa.N.call(this),ot(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=o.JSON.stringify,Et=o.JSON.parse,Lt=class{stringify(C){return o.JSON.stringify(C,void 0)}parse(C){return o.JSON.parse(C,void 0)}};function ft(){}ft.prototype.h=null;function ct(C){return C.h||(C.h=C.i())}function mt(){}var kt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ot(){W.call(this,"d")}m(Ot,W);function br(){W.call(this,"c")}m(br,W);var Qn={},wi=null;function us(){return wi=wi||new Be}Qn.La="serverreachability";function gl(C){W.call(this,Qn.La,C)}m(gl,W);function $a(C){const L=us();We(L,new gl(L))}Qn.STAT_EVENT="statevent";function xo(C,L){W.call(this,Qn.STAT_EVENT,C),this.stat=L}m(xo,W);function en(C){const L=us();We(L,new xo(L,C))}Qn.Ma="timingevent";function yo(C,L){W.call(this,Qn.Ma,C),this.size=L}m(yo,W);function Dr(C,L){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){C()},L)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function vl(C,L,G,ie,Ce,Le){C.info(function(){if(C.g)if(Le)for(var tt="",pr=Le.split("&"),xn=0;xn<pr.length;xn++){var sr=pr[xn].split("=");if(1<sr.length){var Pn=sr[0];sr=sr[1];var Rn=Pn.split("_");tt=2<=Rn.length&&Rn[1]=="type"?tt+(Pn+"="+sr+"&"):tt+(Pn+"=redacted&")}}else tt=null;else tt=Le;return"XMLHTTP REQ ("+ie+") [attempt "+Ce+"]: "+L+`
`+G+`
`+tt})}function $c(C,L,G,ie,Ce,Le,tt){C.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Ce+"]: "+L+`
`+G+`
`+Le+" "+tt})}function ee(C,L,G,ie){C.info(function(){return"XMLHTTP TEXT ("+L+"): "+oe(C,G)+(ie?" "+ie:"")})}function fe(C,L){C.info(function(){return"TIMEOUT: "+L})}Dn.prototype.info=function(){};function oe(C,L){if(!C.g)return L;if(!L)return null;try{var G=JSON.parse(L);if(G){for(C=0;C<G.length;C++)if(Array.isArray(G[C])){var ie=G[C];if(!(2>ie.length)){var Ce=ie[1];if(Array.isArray(Ce)&&!(1>Ce.length)){var Le=Ce[0];if(Le!="noop"&&Le!="stop"&&Le!="close")for(var tt=1;tt<Ce.length;tt++)Ce[tt]=""}}}}return gt(G)}catch{return L}}var ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},he={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ge;function De(){}m(De,ft),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},ge=new De;function Ue(C,L,G,ie){this.j=C,this.i=L,this.l=G,this.R=ie||1,this.U=new Ne(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}var Fe={},Me={};function qe(C,L,G){C.L=1,C.v=cf(Ha(L)),C.m=G,C.P=!0,et(C,null)}function et(C,L){C.F=Date.now(),at(C),C.A=Ha(C.v);var G=C.A,ie=C.R;Array.isArray(ie)||(ie=[String(ie)]),gy(G.i,"t",ie),C.C=0,G=C.j.J,C.h=new Pe,C.g=Oy(C.j,G?L:null,!C.m),0<C.O&&(C.M=new be(h(C.Y,C,C.g),C.O)),L=C.U,G=C.g,ie=C.ca;var Ce="readystatechange";Array.isArray(Ce)||(Ce&&(je[0]=Ce.toString()),Ce=je);for(var Le=0;Le<Ce.length;Le++){var tt=ve(G,Ce[Le],ie||L.handleEvent,!1,L.h||L);if(!tt)break;L.g[tt.key]=tt}L=C.H?T(C.H):{},C.m?(C.u||(C.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,L)):(C.u="GET",C.g.ea(C.A,C.u,null,L)),$a(),vl(C.i,C.u,C.A,C.l,C.R,C.m)}Ue.prototype.ca=function(C){C=C.target;const L=this.M;L&&ja(C)==3?L.j():this.Y(C)},Ue.prototype.Y=function(C){try{if(C==this.g)e:{const Rn=ja(this.g);var L=this.g.Ba();const _l=this.g.Z();if(!(3>Rn)&&(Rn!=3||this.g&&(this.h.h||this.g.oa()||Sy(this.g)))){this.J||Rn!=4||L==7||(L==8||0>=_l?$a(3):$a(2)),hr(this);var G=this.g.Z();this.X=G;t:if(lt(this)){var ie=Sy(this.g);C="";var Ce=ie.length,Le=ja(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ar(this),cr(this);var tt="";break t}this.h.i=new o.TextDecoder}for(L=0;L<Ce;L++)this.h.h=!0,C+=this.h.i.decode(ie[L],{stream:!(Le&&L==Ce-1)});ie.length=0,this.h.g+=C,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=G==200,$c(this.i,this.u,this.A,this.l,this.R,Rn,G),this.o){if(this.T&&!this.K){t:{if(this.g){var pr,xn=this.g;if((pr=xn.g?xn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(pr)){var sr=pr;break t}}sr=null}if(G=sr)ee(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Va(this,G);else{this.o=!1,this.s=3,en(12),Ar(this),cr(this);break e}}if(this.P){G=!0;let Ks;for(;!this.J&&this.C<tt.length;)if(Ks=Ye(this,tt),Ks==Me){Rn==4&&(this.s=4,en(14),G=!1),ee(this.i,this.l,null,"[Incomplete Response]");break}else if(Ks==Fe){this.s=4,en(15),ee(this.i,this.l,tt,"[Invalid Chunk]"),G=!1;break}else ee(this.i,this.l,Ks,null),Va(this,Ks);if(lt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rn!=4||tt.length!=0||this.h.h||(this.s=1,en(16),G=!1),this.o=this.o&&G,!G)ee(this.i,this.l,tt,"[Invalid Chunked Response]"),Ar(this),cr(this);else if(0<tt.length&&!this.W){this.W=!0;var Pn=this.j;Pn.g==this&&Pn.ba&&!Pn.M&&(Pn.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),Op(Pn),Pn.M=!0,en(11))}}else ee(this.i,this.l,tt,null),Va(this,tt);Rn==4&&Ar(this),this.o&&!this.J&&(Rn==4?Dy(this.j,this):(this.o=!1,at(this)))}else Zk(this.g),G==400&&0<tt.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),Ar(this),cr(this)}}}catch{}finally{}};function lt(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function Ye(C,L){var G=C.C,ie=L.indexOf(`
`,G);return ie==-1?Me:(G=Number(L.substring(G,ie)),isNaN(G)?Fe:(ie+=1,ie+G>L.length?Me:(L=L.slice(ie,ie+G),C.C=ie+G,L)))}Ue.prototype.cancel=function(){this.J=!0,Ar(this)};function at(C){C.S=Date.now()+C.I,At(C,C.I)}function At(C,L){if(C.B!=null)throw Error("WatchDog timer not null");C.B=Dr(h(C.ba,C),L)}function hr(C){C.B&&(o.clearTimeout(C.B),C.B=null)}Ue.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(fe(this.i,this.A),this.L!=2&&($a(),en(17)),Ar(this),this.s=2,cr(this)):At(this,this.S-C)};function cr(C){C.j.G==0||C.J||Dy(C.j,C)}function Ar(C){hr(C);var L=C.M;L&&typeof L.ma=="function"&&L.ma(),C.M=null,ot(C.U),C.g&&(L=C.g,C.g=null,L.abort(),L.ma())}function Va(C,L){try{var G=C.j;if(G.G!=0&&(G.g==C||ys(G.h,C))){if(!C.K&&ys(G.h,C)&&G.G==3){try{var ie=G.Da.g.parse(L)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Ce=ie;if(Ce[0]==0){e:if(!G.u){if(G.g)if(G.g.F+3e3<C.F)mf(G),hf(G);else break e;Fp(G),en(18)}}else G.za=Ce[1],0<G.za-G.T&&37500>Ce[2]&&G.F&&G.v==0&&!G.C&&(G.C=Dr(h(G.Za,G),6e3));if(1>=xl(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else bo(G,11)}else if((C.K||G.g==C)&&mf(G),!y(L))for(Ce=G.Da.g.parse(L),L=0;L<Ce.length;L++){let sr=Ce[L];if(G.T=sr[0],sr=sr[1],G.G==2)if(sr[0]=="c"){G.K=sr[1],G.ia=sr[2];const Pn=sr[3];Pn!=null&&(G.la=Pn,G.j.info("VER="+G.la));const Rn=sr[4];Rn!=null&&(G.Aa=Rn,G.j.info("SVER="+G.Aa));const _l=sr[5];_l!=null&&typeof _l=="number"&&0<_l&&(ie=1.5*_l,G.L=ie,G.j.info("backChannelRequestTimeoutMs_="+ie)),ie=G;const Ks=C.g;if(Ks){const vf=Ks.g?Ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vf){var Le=ie.h;Le.g||vf.indexOf("spdy")==-1&&vf.indexOf("quic")==-1&&vf.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(Dp(Le,Le.h),Le.h=null))}if(ie.D){const Np=Ks.g?Ks.g.getResponseHeader("X-HTTP-Session-Id"):null;Np&&(ie.ya=Np,Sr(ie.I,ie.D,Np))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-C.F,G.j.info("Handshake RTT: "+G.R+"ms")),ie=G;var tt=C;if(ie.qa=Fy(ie,ie.J?ie.ia:null,ie.W),tt.K){ly(ie.h,tt);var pr=tt,xn=ie.L;xn&&(pr.I=xn),pr.B&&(hr(pr),at(pr)),ie.g=tt}else Iy(ie);0<G.i.length&&pf(G)}else sr[0]!="stop"&&sr[0]!="close"||bo(G,7);else G.G==3&&(sr[0]=="stop"||sr[0]=="close"?sr[0]=="stop"?bo(G,7):Rp(G):sr[0]!="noop"&&G.l&&G.l.ta(sr),G.v=0)}}$a(4)}catch{}}var Eo=class{constructor(C,L){this.g=C,this.map=L}};function Ci(C){this.l=C||10,o.PerformanceNavigationTiming?(C=o.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function va(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function xl(C){return C.h?1:C.g?C.g.size:0}function ys(C,L){return C.h?C.h==L:C.g?C.g.has(L):!1}function Dp(C,L){C.g?C.g.add(L):C.h=L}function ly(C,L){C.h&&C.h==L?C.h=null:C.g&&C.g.has(L)&&C.g.delete(L)}Ci.prototype.cancel=function(){if(this.i=cy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function cy(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let L=C.i;for(const G of C.g.values())L=L.concat(G.D);return L}return g(C.i)}function Bk(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(l(C)){for(var L=[],G=C.length,ie=0;ie<G;ie++)L.push(C[ie]);return L}L=[],G=0;for(ie in C)L[G++]=C[ie];return L}function Uk(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(l(C)||typeof C=="string"){var L=[];C=C.length;for(var G=0;G<C;G++)L.push(G);return L}L=[],G=0;for(const ie in C)L[G++]=ie;return L}}}function uy(C,L){if(C.forEach&&typeof C.forEach=="function")C.forEach(L,void 0);else if(l(C)||typeof C=="string")Array.prototype.forEach.call(C,L,void 0);else for(var G=Uk(C),ie=Bk(C),Ce=ie.length,Le=0;Le<Ce;Le++)L.call(void 0,ie[Le],G&&G[Le],C)}var dy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $k(C,L){if(C){C=C.split("&");for(var G=0;G<C.length;G++){var ie=C[G].indexOf("="),Ce=null;if(0<=ie){var Le=C[G].substring(0,ie);Ce=C[G].substring(ie+1)}else Le=C[G];L(Le,Ce?decodeURIComponent(Ce.replace(/\+/g," ")):"")}}}function _o(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof _o){this.h=C.h,of(this,C.j),this.o=C.o,this.g=C.g,lf(this,C.s),this.l=C.l;var L=C.i,G=new jc;G.i=L.i,L.g&&(G.g=new Map(L.g),G.h=L.h),fy(this,G),this.m=C.m}else C&&(L=String(C).match(dy))?(this.h=!1,of(this,L[1]||"",!0),this.o=Vc(L[2]||""),this.g=Vc(L[3]||"",!0),lf(this,L[4]),this.l=Vc(L[5]||"",!0),fy(this,L[6]||"",!0),this.m=Vc(L[7]||"")):(this.h=!1,this.i=new jc(null,this.h))}_o.prototype.toString=function(){var C=[],L=this.j;L&&C.push(Hc(L,hy,!0),":");var G=this.g;return(G||L=="file")&&(C.push("//"),(L=this.o)&&C.push(Hc(L,hy,!0),"@"),C.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.s,G!=null&&C.push(":",String(G))),(G=this.l)&&(this.g&&G.charAt(0)!="/"&&C.push("/"),C.push(Hc(G,G.charAt(0)=="/"?jk:Hk,!0))),(G=this.i.toString())&&C.push("?",G),(G=this.m)&&C.push("#",Hc(G,Wk)),C.join("")};function Ha(C){return new _o(C)}function of(C,L,G){C.j=G?Vc(L,!0):L,C.j&&(C.j=C.j.replace(/:$/,""))}function lf(C,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);C.s=L}else C.s=null}function fy(C,L,G){L instanceof jc?(C.i=L,zk(C.i,C.h)):(G||(L=Hc(L,Gk)),C.i=new jc(L,C.h))}function Sr(C,L,G){C.i.set(L,G)}function cf(C){return Sr(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Vc(C,L){return C?L?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function Hc(C,L,G){return typeof C=="string"?(C=encodeURI(C).replace(L,Vk),G&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function Vk(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var hy=/[#\/\?@]/g,Hk=/[#\?:]/g,jk=/[#\?]/g,Gk=/[#\?@]/g,Wk=/#/g;function jc(C,L){this.h=this.g=null,this.i=C||null,this.j=!!L}function Ii(C){C.g||(C.g=new Map,C.h=0,C.i&&$k(C.i,function(L,G){C.add(decodeURIComponent(L.replace(/\+/g," ")),G)}))}t=jc.prototype,t.add=function(C,L){Ii(this),this.i=null,C=yl(this,C);var G=this.g.get(C);return G||this.g.set(C,G=[]),G.push(L),this.h+=1,this};function py(C,L){Ii(C),L=yl(C,L),C.g.has(L)&&(C.i=null,C.h-=C.g.get(L).length,C.g.delete(L))}function my(C,L){return Ii(C),L=yl(C,L),C.g.has(L)}t.forEach=function(C,L){Ii(this),this.g.forEach(function(G,ie){G.forEach(function(Ce){C.call(L,Ce,ie,this)},this)},this)},t.na=function(){Ii(this);const C=Array.from(this.g.values()),L=Array.from(this.g.keys()),G=[];for(let ie=0;ie<L.length;ie++){const Ce=C[ie];for(let Le=0;Le<Ce.length;Le++)G.push(L[ie])}return G},t.V=function(C){Ii(this);let L=[];if(typeof C=="string")my(this,C)&&(L=L.concat(this.g.get(yl(this,C))));else{C=Array.from(this.g.values());for(let G=0;G<C.length;G++)L=L.concat(C[G])}return L},t.set=function(C,L){return Ii(this),this.i=null,C=yl(this,C),my(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[L]),this.h+=1,this},t.get=function(C,L){return C?(C=this.V(C),0<C.length?String(C[0]):L):L};function gy(C,L,G){py(C,L),0<G.length&&(C.i=null,C.g.set(yl(C,L),g(G)),C.h+=G.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],L=Array.from(this.g.keys());for(var G=0;G<L.length;G++){var ie=L[G];const Le=encodeURIComponent(String(ie)),tt=this.V(ie);for(ie=0;ie<tt.length;ie++){var Ce=Le;tt[ie]!==""&&(Ce+="="+encodeURIComponent(String(tt[ie]))),C.push(Ce)}}return this.i=C.join("&")};function yl(C,L){return L=String(L),C.j&&(L=L.toLowerCase()),L}function zk(C,L){L&&!C.j&&(Ii(C),C.i=null,C.g.forEach(function(G,ie){var Ce=ie.toLowerCase();ie!=Ce&&(py(this,ie),gy(this,Ce,G))},C)),C.j=L}function Kk(C,L){const G=new Dn;if(o.Image){const ie=new Image;ie.onload=p(ki,G,"TestLoadImage: loaded",!0,L,ie),ie.onerror=p(ki,G,"TestLoadImage: error",!1,L,ie),ie.onabort=p(ki,G,"TestLoadImage: abort",!1,L,ie),ie.ontimeout=p(ki,G,"TestLoadImage: timeout",!1,L,ie),o.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=C}else L(!1)}function qk(C,L){const G=new Dn,ie=new AbortController,Ce=setTimeout(()=>{ie.abort(),ki(G,"TestPingServer: timeout",!1,L)},1e4);fetch(C,{signal:ie.signal}).then(Le=>{clearTimeout(Ce),Le.ok?ki(G,"TestPingServer: ok",!0,L):ki(G,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(Ce),ki(G,"TestPingServer: error",!1,L)})}function ki(C,L,G,ie,Ce){try{Ce&&(Ce.onload=null,Ce.onerror=null,Ce.onabort=null,Ce.ontimeout=null),ie(G)}catch{}}function Xk(){this.g=new Lt}function Yk(C,L,G){const ie=G||"";try{uy(C,function(Ce,Le){let tt=Ce;c(Ce)&&(tt=gt(Ce)),L.push(ie+Le+"="+encodeURIComponent(tt))})}catch(Ce){throw L.push(ie+"type="+encodeURIComponent("_badmap")),Ce}}function uf(C){this.l=C.Ub||null,this.j=C.eb||!1}m(uf,ft),uf.prototype.g=function(){return new df(this.l,this.j)},uf.prototype.i=function(C){return function(){return C}}({});function df(C,L){Be.call(this),this.D=C,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(df,Be),t=df.prototype,t.open=function(C,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=L,this.readyState=1,Wc(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(L.body=C),(this.D||o).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gc(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Wc(this)),this.g&&(this.readyState=3,Wc(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vy(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function vy(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var L=C.value?C.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!C.done}))&&(this.response=this.responseText+=L)}C.done?Gc(this):Wc(this),this.readyState==3&&vy(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,Gc(this))},t.Qa=function(C){this.g&&(this.response=C,Gc(this))},t.ga=function(){this.g&&Gc(this)};function Gc(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Wc(C)}t.setRequestHeader=function(C,L){this.u.append(C,L)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],L=this.h.entries();for(var G=L.next();!G.done;)G=G.value,C.push(G[0]+": "+G[1]),G=L.next();return C.join(`\r
`)};function Wc(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(df.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function xy(C){let L="";return A(C,function(G,ie){L+=ie,L+=":",L+=G,L+=`\r
`}),L}function Pp(C,L,G){e:{for(ie in G){var ie=!1;break e}ie=!0}ie||(G=xy(G),typeof C=="string"?G!=null&&encodeURIComponent(String(G)):Sr(C,L,G))}function Fr(C){Be.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Fr,Be);var Jk=/^https?$/i,Qk=["POST","PUT"];t=Fr.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,L,G,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);L=L?L.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ge.g(),this.v=this.o?ct(this.o):ct(ge),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(L,String(C),!0),this.B=!1}catch(Le){yy(this,Le);return}if(C=G||"",G=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Ce in ie)G.set(Ce,ie[Ce]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Le of ie.keys())G.set(Le,ie.get(Le));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(G.keys()).find(Le=>Le.toLowerCase()=="content-type"),Ce=o.FormData&&C instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Qk,L,void 0))||ie||Ce||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,tt]of G)this.g.setRequestHeader(Le,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{by(this),this.u=!0,this.g.send(C),this.u=!1}catch(Le){yy(this,Le)}};function yy(C,L){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=L,C.m=5,Ey(C),ff(C)}function Ey(C){C.A||(C.A=!0,We(C,"complete"),We(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,We(this,"complete"),We(this,"abort"),ff(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ff(this,!0)),Fr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_y(this):this.bb())},t.bb=function(){_y(this)};function _y(C){if(C.h&&typeof a<"u"&&(!C.v[1]||ja(C)!=4||C.Z()!=2)){if(C.u&&ja(C)==4)Ee(C.Ea,0,C);else if(We(C,"readystatechange"),ja(C)==4){C.h=!1;try{const tt=C.Z();e:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var G;if(!(G=L)){var ie;if(ie=tt===0){var Ce=String(C.D).match(dy)[1]||null;!Ce&&o.self&&o.self.location&&(Ce=o.self.location.protocol.slice(0,-1)),ie=!Jk.test(Ce?Ce.toLowerCase():"")}G=ie}if(G)We(C,"complete"),We(C,"success");else{C.m=6;try{var Le=2<ja(C)?C.g.statusText:""}catch{Le=""}C.l=Le+" ["+C.Z()+"]",Ey(C)}}finally{ff(C)}}}}function ff(C,L){if(C.g){by(C);const G=C.g,ie=C.v[0]?()=>{}:null;C.g=null,C.v=null,L||We(C,"ready");try{G.onreadystatechange=ie}catch{}}}function by(C){C.I&&(o.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function ja(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<ja(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var L=this.g.responseText;return C&&L.indexOf(C)==0&&(L=L.substring(C.length)),Et(L)}};function Sy(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function Zk(C){const L={};C=(C.g&&2<=ja(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<C.length;ie++){if(y(C[ie]))continue;var G=k(C[ie]);const Ce=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const Le=L[Ce]||[];L[Ce]=Le,Le.push(G)}E(L,function(ie){return ie.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zc(C,L,G){return G&&G.internalChannelParams&&G.internalChannelParams[C]||L}function Ty(C){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zc("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zc("baseRetryDelayMs",5e3,C),this.cb=zc("retryDelaySeedMs",1e4,C),this.Wa=zc("forwardChannelMaxRetries",2,C),this.wa=zc("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Ci(C&&C.concurrentRequestLimit),this.Da=new Xk,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ty.prototype,t.la=8,t.G=1,t.connect=function(C,L,G,ie){en(0),this.W=C,this.H=L||{},G&&ie!==void 0&&(this.H.OSID=G,this.H.OAID=ie),this.F=this.X,this.I=Fy(this,null,this.W),pf(this)};function Rp(C){if(Ay(C),C.G==3){var L=C.U++,G=Ha(C.I);if(Sr(G,"SID",C.K),Sr(G,"RID",L),Sr(G,"TYPE","terminate"),Kc(C,G),L=new Ue(C,C.j,L),L.L=2,L.v=cf(Ha(G)),G=!1,o.navigator&&o.navigator.sendBeacon)try{G=o.navigator.sendBeacon(L.v.toString(),"")}catch{}!G&&o.Image&&(new Image().src=L.v,G=!0),G||(L.g=Oy(L.j,null),L.g.ea(L.v)),L.F=Date.now(),at(L)}Ry(C)}function hf(C){C.g&&(Op(C),C.g.cancel(),C.g=null)}function Ay(C){hf(C),C.u&&(o.clearTimeout(C.u),C.u=null),mf(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&o.clearTimeout(C.s),C.s=null)}function pf(C){if(!va(C.h)&&!C.s){C.s=!0;var L=C.Ga;O||z(),M||(O(),M=!0),U.add(L,C),C.B=0}}function eD(C,L){return xl(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=L.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=Dr(h(C.Ga,C,L),Py(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const Ce=new Ue(this,this.j,C);let Le=this.o;if(this.S&&(Le?(Le=T(Le),S(Le,this.S)):Le=this.S),this.m!==null||this.O||(Ce.H=Le,Le=null),this.P)e:{for(var L=0,G=0;G<this.i.length;G++){t:{var ie=this.i[G];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(L+=ie,4096<L){L=G;break e}if(L===4096||G===this.i.length-1){L=G+1;break e}}L=1e3}else L=1e3;L=Cy(this,Ce,L),G=Ha(this.I),Sr(G,"RID",C),Sr(G,"CVER",22),this.D&&Sr(G,"X-HTTP-Session-Id",this.D),Kc(this,G),Le&&(this.O?L="headers="+encodeURIComponent(String(xy(Le)))+"&"+L:this.m&&Pp(G,this.m,Le)),Dp(this.h,Ce),this.Ua&&Sr(G,"TYPE","init"),this.P?(Sr(G,"$req",L),Sr(G,"SID","null"),Ce.T=!0,qe(Ce,G,null)):qe(Ce,G,L),this.G=2}}else this.G==3&&(C?wy(this,C):this.i.length==0||va(this.h)||wy(this))};function wy(C,L){var G;L?G=L.l:G=C.U++;const ie=Ha(C.I);Sr(ie,"SID",C.K),Sr(ie,"RID",G),Sr(ie,"AID",C.T),Kc(C,ie),C.m&&C.o&&Pp(ie,C.m,C.o),G=new Ue(C,C.j,G,C.B+1),C.m===null&&(G.H=C.o),L&&(C.i=L.D.concat(C.i)),L=Cy(C,G,1e3),G.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Dp(C.h,G),qe(G,ie,L)}function Kc(C,L){C.H&&A(C.H,function(G,ie){Sr(L,ie,G)}),C.l&&uy({},function(G,ie){Sr(L,ie,G)})}function Cy(C,L,G){G=Math.min(C.i.length,G);var ie=C.l?h(C.l.Na,C.l,C):null;e:{var Ce=C.i;let Le=-1;for(;;){const tt=["count="+G];Le==-1?0<G?(Le=Ce[0].g,tt.push("ofs="+Le)):Le=0:tt.push("ofs="+Le);let pr=!0;for(let xn=0;xn<G;xn++){let sr=Ce[xn].g;const Pn=Ce[xn].map;if(sr-=Le,0>sr)Le=Math.max(0,Ce[xn].g-100),pr=!1;else try{Yk(Pn,tt,"req"+sr+"_")}catch{ie&&ie(Pn)}}if(pr){ie=tt.join("&");break e}}}return C=C.i.splice(0,G),L.D=C,ie}function Iy(C){if(!C.g&&!C.u){C.Y=1;var L=C.Fa;O||z(),M||(O(),M=!0),U.add(L,C),C.v=0}}function Fp(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=Dr(h(C.Fa,C),Py(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,ky(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=Dr(h(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),hf(this),ky(this))};function Op(C){C.A!=null&&(o.clearTimeout(C.A),C.A=null)}function ky(C){C.g=new Ue(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var L=Ha(C.qa);Sr(L,"RID","rpc"),Sr(L,"SID",C.K),Sr(L,"AID",C.T),Sr(L,"CI",C.F?"0":"1"),!C.F&&C.ja&&Sr(L,"TO",C.ja),Sr(L,"TYPE","xmlhttp"),Kc(C,L),C.m&&C.o&&Pp(L,C.m,C.o),C.L&&(C.g.I=C.L);var G=C.g;C=C.ia,G.L=1,G.v=cf(Ha(L)),G.m=null,G.P=!0,et(G,C)}t.Za=function(){this.C!=null&&(this.C=null,hf(this),Fp(this),en(19))};function mf(C){C.C!=null&&(o.clearTimeout(C.C),C.C=null)}function Dy(C,L){var G=null;if(C.g==L){mf(C),Op(C),C.g=null;var ie=2}else if(ys(C.h,L))G=L.D,ly(C.h,L),ie=1;else return;if(C.G!=0){if(L.o)if(ie==1){G=L.m?L.m.length:0,L=Date.now()-L.F;var Ce=C.B;ie=us(),We(ie,new yo(ie,G)),pf(C)}else Iy(C);else if(Ce=L.s,Ce==3||Ce==0&&0<L.X||!(ie==1&&eD(C,L)||ie==2&&Fp(C)))switch(G&&0<G.length&&(L=C.h,L.i=L.i.concat(G)),Ce){case 1:bo(C,5);break;case 4:bo(C,10);break;case 3:bo(C,6);break;default:bo(C,2)}}}function Py(C,L){let G=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(G*=2),G*L}function bo(C,L){if(C.j.info("Error code "+L),L==2){var G=h(C.fb,C),ie=C.Xa;const Ce=!ie;ie=new _o(ie||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||of(ie,"https"),cf(ie),Ce?Kk(ie.toString(),G):qk(ie.toString(),G)}else en(2);C.G=0,C.l&&C.l.sa(L),Ry(C),Ay(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function Ry(C){if(C.G=0,C.ka=[],C.l){const L=cy(C.h);(L.length!=0||C.i.length!=0)&&(v(C.ka,L),v(C.ka,C.i),C.h.i.length=0,g(C.i),C.i.length=0),C.l.ra()}}function Fy(C,L,G){var ie=G instanceof _o?Ha(G):new _o(G);if(ie.g!="")L&&(ie.g=L+"."+ie.g),lf(ie,ie.s);else{var Ce=o.location;ie=Ce.protocol,L=L?L+"."+Ce.hostname:Ce.hostname,Ce=+Ce.port;var Le=new _o(null);ie&&of(Le,ie),L&&(Le.g=L),Ce&&lf(Le,Ce),G&&(Le.l=G),ie=Le}return G=C.D,L=C.ya,G&&L&&Sr(ie,G,L),Sr(ie,"VER",C.la),Kc(C,ie),ie}function Oy(C,L,G){if(L&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=C.Ca&&!C.pa?new Fr(new uf({eb:G})):new Fr(C.pa),L.Ha(C.J),L}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ny(){}t=Ny.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gf(){}gf.prototype.g=function(C,L){return new Es(C,L)};function Es(C,L){Be.call(this),this.g=new Ty(L),this.l=C,this.h=L&&L.messageUrlParams||null,C=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(C?C["X-WebChannel-Content-Type"]=L.messageContentType:C={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(C?C["X-WebChannel-Client-Profile"]=L.va:C={"X-WebChannel-Client-Profile":L.va}),this.g.S=C,(C=L&&L.Sb)&&!y(C)&&(this.g.m=C),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!y(L)&&(this.g.D=L,C=this.h,C!==null&&L in C&&(C=this.h,L in C&&delete C[L])),this.j=new El(this)}m(Es,Be),Es.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Es.prototype.close=function(){Rp(this.g)},Es.prototype.o=function(C){var L=this.g;if(typeof C=="string"){var G={};G.__data__=C,C=G}else this.u&&(G={},G.__data__=gt(C),C=G);L.i.push(new Eo(L.Ya++,C)),L.G==3&&pf(L)},Es.prototype.N=function(){this.g.l=null,delete this.j,Rp(this.g),delete this.g,Es.aa.N.call(this)};function My(C){Ot.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var L=C.__sm__;if(L){e:{for(const G in L){C=G;break e}C=void 0}(this.i=C)&&(C=this.i,L=L!==null&&C in L?L[C]:void 0),this.data=L}else this.data=C}m(My,Ot);function Ly(){br.call(this),this.status=1}m(Ly,br);function El(C){this.g=C}m(El,Ny),El.prototype.ua=function(){We(this.g,"a")},El.prototype.ta=function(C){We(this.g,new My(C))},El.prototype.sa=function(C){We(this.g,new Ly)},El.prototype.ra=function(){We(this.g,"b")},gf.prototype.createWebChannel=gf.prototype.g,Es.prototype.send=Es.prototype.o,Es.prototype.open=Es.prototype.m,Es.prototype.close=Es.prototype.close,Cw=function(){return new gf},ww=function(){return us()},Aw=Qn,Yg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,c0=ue,he.COMPLETE="complete",Tw=he,mt.EventType=kt,kt.OPEN="a",kt.CLOSE="b",kt.ERROR="c",kt.MESSAGE="d",Be.prototype.listen=Be.prototype.K,uu=mt,Fr.prototype.listenOnce=Fr.prototype.L,Fr.prototype.getLastError=Fr.prototype.Ka,Fr.prototype.getLastErrorCode=Fr.prototype.Ba,Fr.prototype.getStatus=Fr.prototype.Z,Fr.prototype.getResponseJson=Fr.prototype.Oa,Fr.prototype.getResponseText=Fr.prototype.oa,Fr.prototype.send=Fr.prototype.ea,Fr.prototype.setWithCredentials=Fr.prototype.Ha,Sw=Fr}).apply(typeof kf<"u"?kf:typeof self<"u"?self:typeof window<"u"?window:{});const ZE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=new c1("@firebase/firestore");function Jc(){return zo.logLevel}function ht(t,...e){if(zo.logLevel<=Xt.DEBUG){const r=e.map(A1);zo.debug(`Firestore (${kc}): ${t}`,...r)}}function yi(t,...e){if(zo.logLevel<=Xt.ERROR){const r=e.map(A1);zo.error(`Firestore (${kc}): ${t}`,...r)}}function Ko(t,...e){if(zo.logLevel<=Xt.WARN){const r=e.map(A1);zo.warn(`Firestore (${kc}): ${t}`,...r)}}function A1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t="Unexpected state"){const e=`FIRESTORE (${kc}) INTERNAL ASSERTION FAILED: `+t;throw yi(e),new Error(e)}function dr(t,e){t||It()}function Ft(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const He={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends pa{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Bn.UNAUTHENTICATED))}shutdown(){}}class nO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class sO{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){dr(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ai,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ai)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(dr(typeof n.accessToken=="string"),new Iw(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dr(e===null||typeof e=="string"),new Bn(e)}}class aO{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iO{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new aO(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){dr(this.o===void 0);const n=i=>{i.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,ht("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(dr(typeof r.token=="string"),this.R=r.token,new oO(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=cO(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function ar(t,e){return t<e?-1:t>e?1:0}function fc(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new nt(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new nt(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new nt(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zr.fromMillis(Date.now())}static fromDate(e){return Zr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Zr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ar(this.nanoseconds,e.nanoseconds):ar(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Zr(0,0))}static max(){return new Pt(new Zr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,r,n){r===void 0?r=0:r>e.length&&It(),n===void 0?n=e.length-r:n>e.length-r&&It(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ld.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ld?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class yr extends ld{construct(e,r,n){return new yr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new nt(He.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new yr(r)}static emptyPath(){return new yr([])}}const uO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends ld{construct(e,r,n){return new hn(e,r,n)}static isValidIdentifier(e){return uO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new hn(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new nt(He.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new nt(He.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new nt(He.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new nt(He.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(r)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.path=e}static fromPath(e){return new vt(yr.fromString(e))}static fromName(e){return new vt(yr.fromString(e).popFirst(5))}static empty(){return new vt(yr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return yr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vt(new yr(e.slice()))}}function dO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Pt.fromTimestamp(n===1e9?new Zr(r+1,0):new Zr(r,n));return new io(s,vt.empty(),e)}function fO(t){return new io(t.readTime,t.key,-1)}class io{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new io(Pt.min(),vt.empty(),-1)}static max(){return new io(Pt.max(),vt.empty(),-1)}}function hO(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=vt.comparator(t.documentKey,e.documentKey),r!==0?r:ar(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(t){if(t.code!==He.FAILED_PRECONDITION||t.message!==pO)throw t;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ke((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ke?r:Ke.resolve(r)}catch(r){return Ke.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ke.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ke.reject(r)}static resolve(e){return new Ke((r,n)=>{r(e)})}static reject(e){return new Ke((r,n)=>{n(e)})}static waitFor(e){return new Ke((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=Ke.resolve(!1);for(const n of e)r=r.next(s=>s?Ke.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Ke((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Ke((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function gO(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Hd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}C1.oe=-1;function Jh(t){return t==null}function z0(t){return t===0&&1/t==-1/0}function vO(t){return typeof t=="number"&&Number.isInteger(t)&&!z0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function al(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Dw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,r){this.comparator=e,this.root=r||_n.EMPTY}insert(e,r){return new Rr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??_n.RED,this.left=s??_n.EMPTY,this.right=i??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new _n(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return _n.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(e,r,n,s,i){return this}insert(e,r,n){return new _n(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new Rr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new t_(this.data.getIterator())}getIteratorFrom(e){return new t_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new wn(this.comparator);return r.data=e,r}}class t_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new As([])}unionWith(e){let r=new wn(hn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new As(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return fc(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Pw("Invalid base64 string: "+i):i}}(e);return new gn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new gn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ar(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const xO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oo(t){if(dr(!!t),typeof t=="string"){let e=0;const r=xO.exec(t);if(dr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Hr(t.seconds),nanos:Hr(t.nanos)}}function Hr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qo(t){return typeof t=="string"?gn.fromBase64String(t):gn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function I1(t){const e=t.mapValue.fields.__previous_value__;return Qh(e)?I1(e):e}function cd(t){const e=oo(t.mapValue.fields.__local_write_time__.timestampValue);return new Zr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class hc{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new hc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf={mapValue:{}};function Xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qh(t)?4:_O(t)?9007199254740991:EO(t)?10:11:It()}function Ra(t,e){if(t===e)return!0;const r=Xo(t);if(r!==Xo(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cd(t).isEqual(cd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=oo(s.timestampValue),o=oo(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return qo(s.bytesValue).isEqual(qo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Hr(s.geoPointValue.latitude)===Hr(i.geoPointValue.latitude)&&Hr(s.geoPointValue.longitude)===Hr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Hr(s.integerValue)===Hr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Hr(s.doubleValue),o=Hr(i.doubleValue);return a===o?z0(a)===z0(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return fc(t.arrayValue.values||[],e.arrayValue.values||[],Ra);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(e_(a)!==e_(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ra(a[l],o[l])))return!1;return!0}(t,e);default:return It()}}function ud(t,e){return(t.values||[]).find(r=>Ra(r,e))!==void 0}function pc(t,e){if(t===e)return 0;const r=Xo(t),n=Xo(e);if(r!==n)return ar(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ar(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Hr(i.integerValue||i.doubleValue),l=Hr(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return r_(t.timestampValue,e.timestampValue);case 4:return r_(cd(t),cd(e));case 5:return ar(t.stringValue,e.stringValue);case 6:return function(i,a){const o=qo(i),l=qo(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=ar(o[c],l[c]);if(u!==0)return u}return ar(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=ar(Hr(i.latitude),Hr(a.latitude));return o!==0?o:ar(Hr(i.longitude),Hr(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return n_(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,u;const f=i.fields||{},h=a.fields||{},p=(o=f.value)===null||o===void 0?void 0:o.arrayValue,m=(l=h.value)===null||l===void 0?void 0:l.arrayValue,g=ar(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return g!==0?g:n_(p,m)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Pf.mapValue&&a===Pf.mapValue)return 0;if(i===Pf.mapValue)return 1;if(a===Pf.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const h=ar(l[f],u[f]);if(h!==0)return h;const p=pc(o[l[f]],c[u[f]]);if(p!==0)return p}return ar(l.length,u.length)}(t.mapValue,e.mapValue);default:throw It()}}function r_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ar(t,e);const r=oo(t),n=oo(e),s=ar(r.seconds,n.seconds);return s!==0?s:ar(r.nanos,n.nanos)}function n_(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=pc(r[s],n[s]);if(i)return i}return ar(r.length,n.length)}function mc(t){return Jg(t)}function Jg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=oo(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return qo(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return vt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Jg(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Jg(r.fields[a])}`;return s+"}"}(t.mapValue):It()}function K0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Qg(t){return!!t&&"integerValue"in t}function k1(t){return!!t&&"arrayValue"in t}function s_(t){return!!t&&"nullValue"in t}function a_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function u0(t){return!!t&&"mapValue"in t}function EO(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return al(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Pu(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Pu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function _O(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.value=e}static empty(){return new vs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!u0(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(r)}setAll(e){let r=hn.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=Pu(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());u0(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ra(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];u0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){al(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new vs(Pu(this.value))}}function Rw(t){const e=[];return al(t.fields,(r,n)=>{const s=new hn([r]);if(u0(n)){const i=Rw(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new As(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Vn(e,0,Pt.min(),Pt.min(),Pt.min(),vs.empty(),0)}static newFoundDocument(e,r,n,s){return new Vn(e,1,r,Pt.min(),n,s,0)}static newNoDocument(e,r){return new Vn(e,2,r,Pt.min(),Pt.min(),vs.empty(),0)}static newUnknownDocument(e,r){return new Vn(e,3,r,Pt.min(),Pt.min(),vs.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,r){this.position=e,this.inclusive=r}}function i_(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=vt.comparator(vt.fromName(a.referenceValue),r.key):n=pc(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function o_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ra(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,r="asc"){this.field=e,this.dir=r}}function bO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{}class Qr extends Fw{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new TO(e,r,n):r==="array-contains"?new CO(e,n):r==="in"?new IO(e,n):r==="not-in"?new kO(e,n):r==="array-contains-any"?new DO(e,n):new Qr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new AO(e,n):new wO(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(pc(r,this.value)):r!==null&&Xo(this.value)===Xo(r)&&this.matchesComparison(pc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return It()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class da extends Fw{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new da(e,r)}matches(e){return Ow(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ow(t){return t.op==="and"}function Nw(t){return SO(t)&&Ow(t)}function SO(t){for(const e of t.filters)if(e instanceof da)return!1;return!0}function Zg(t){if(t instanceof Qr)return t.field.canonicalString()+t.op.toString()+mc(t.value);if(Nw(t))return t.filters.map(e=>Zg(e)).join(",");{const e=t.filters.map(r=>Zg(r)).join(",");return`${t.op}(${e})`}}function Mw(t,e){return t instanceof Qr?function(n,s){return s instanceof Qr&&n.op===s.op&&n.field.isEqual(s.field)&&Ra(n.value,s.value)}(t,e):t instanceof da?function(n,s){return s instanceof da&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&Mw(a,s.filters[o]),!0):!1}(t,e):void It()}function Lw(t){return t instanceof Qr?function(r){return`${r.field.canonicalString()} ${r.op} ${mc(r.value)}`}(t):t instanceof da?function(r){return r.op.toString()+" {"+r.getFilters().map(Lw).join(" ,")+"}"}(t):"Filter"}class TO extends Qr{constructor(e,r,n){super(e,r,n),this.key=vt.fromName(n.referenceValue)}matches(e){const r=vt.comparator(e.key,this.key);return this.matchesComparison(r)}}class AO extends Qr{constructor(e,r){super(e,"in",r),this.keys=Bw("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class wO extends Qr{constructor(e,r){super(e,"not-in",r),this.keys=Bw("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Bw(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>vt.fromName(n.referenceValue))}class CO extends Qr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return k1(r)&&ud(r.arrayValue,this.value)}}class IO extends Qr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ud(this.value.arrayValue,r)}}class kO extends Qr{constructor(e,r){super(e,"not-in",r)}matches(e){if(ud(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ud(this.value.arrayValue,r)}}class DO extends Qr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!k1(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ud(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function l_(t,e=null,r=[],n=[],s=null,i=null,a=null){return new PO(t,e,r,n,s,i,a)}function D1(t){const e=Ft(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Zg(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Jh(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>mc(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>mc(n)).join(",")),e.ue=r}return e.ue}function P1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!bO(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Mw(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!o_(t.startAt,e.startAt)&&o_(t.endAt,e.endAt)}function ev(t){return vt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function RO(t,e,r,n,s,i,a,o){return new il(t,e,r,n,s,i,a,o)}function Zh(t){return new il(t)}function c_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function R1(t){return t.collectionGroup!==null}function ec(t){const e=Ft(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new wn(hn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new dd(i,n))}),r.has(hn.keyField().canonicalString())||e.ce.push(new dd(hn.keyField(),n))}return e.ce}function Ca(t){const e=Ft(t);return e.le||(e.le=FO(e,ec(t))),e.le}function FO(t,e){if(t.limitType==="F")return l_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new dd(s.field,i)});const r=t.endAt?new gc(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new gc(t.startAt.position,t.startAt.inclusive):null;return l_(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function tv(t,e){const r=t.filters.concat([e]);return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function q0(t,e,r){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function ep(t,e){return P1(Ca(t),Ca(e))&&t.limitType===e.limitType}function Uw(t){return`${D1(Ca(t))}|lt:${t.limitType}`}function Fl(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>Lw(s)).join(", ")}]`),Jh(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>mc(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>mc(s)).join(",")),`Target(${n})`}(Ca(t))}; limitType=${t.limitType})`}function tp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):vt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of ec(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=i_(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,ec(n),s)||n.endAt&&!function(a,o,l){const c=i_(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,ec(n),s))}(t,e)}function OO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $w(t){return(e,r)=>{let n=!1;for(const s of ec(t)){const i=NO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function NO(t,e,r){const n=t.field.isKeyField()?vt.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?pc(l,c):It()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return It()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){al(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return Dw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new Rr(vt.comparator);function Ei(){return MO}const Vw=new Rr(vt.comparator);function du(...t){let e=Vw;for(const r of t)e=e.insert(r.key,r);return e}function Hw(t){let e=Vw;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Po(){return Ru()}function jw(){return Ru()}function Ru(){return new Dc(t=>t.toString(),(t,e)=>t.isEqual(e))}const LO=new Rr(vt.comparator),BO=new wn(vt.comparator);function zt(...t){let e=BO;for(const r of t)e=e.add(r);return e}const UO=new wn(ar);function $O(){return UO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z0(e)?"-0":e}}function Gw(t){return{integerValue:""+t}}function VO(t,e){return vO(e)?Gw(e):F1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this._=void 0}}function HO(t,e,r){return t instanceof fd?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Qh(i)&&(i=I1(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof hd?zw(t,e):t instanceof pd?Kw(t,e):function(s,i){const a=Ww(s,i),o=u_(a)+u_(s.Pe);return Qg(a)&&Qg(s.Pe)?Gw(o):F1(s.serializer,o)}(t,e)}function jO(t,e,r){return t instanceof hd?zw(t,e):t instanceof pd?Kw(t,e):r}function Ww(t,e){return t instanceof X0?function(n){return Qg(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class fd extends rp{}class hd extends rp{constructor(e){super(),this.elements=e}}function zw(t,e){const r=qw(e);for(const n of t.elements)r.some(s=>Ra(s,n))||r.push(n);return{arrayValue:{values:r}}}class pd extends rp{constructor(e){super(),this.elements=e}}function Kw(t,e){let r=qw(e);for(const n of t.elements)r=r.filter(s=>!Ra(s,n));return{arrayValue:{values:r}}}class X0 extends rp{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function u_(t){return Hr(t.integerValue||t.doubleValue)}function qw(t){return k1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,r){this.field=e,this.transform=r}}function WO(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof hd&&s instanceof hd||n instanceof pd&&s instanceof pd?fc(n.elements,s.elements,Ra):n instanceof X0&&s instanceof X0?Ra(n.Pe,s.Pe):n instanceof fd&&s instanceof fd}(t.transform,e.transform)}class zO{constructor(e,r){this.version=e,this.transformResults=r}}class os{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new os}static exists(e){return new os(void 0,e)}static updateTime(e){return new os(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function d0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class np{}function Xw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sp(t.key,os.none()):new jd(t.key,t.data,os.none());{const r=t.data,n=vs.empty();let s=new wn(hn.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new ho(t.key,n,new As(s.toArray()),os.none())}}function KO(t,e,r){t instanceof jd?function(s,i,a){const o=s.value.clone(),l=f_(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof ho?function(s,i,a){if(!d0(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=f_(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(Yw(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Fu(t,e,r,n){return t instanceof jd?function(i,a,o,l){if(!d0(i.precondition,a))return o;const c=i.value.clone(),u=h_(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof ho?function(i,a,o,l){if(!d0(i.precondition,a))return o;const c=h_(i.fieldTransforms,l,a),u=a.data;return u.setAll(Yw(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,o){return d0(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function qO(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=Ww(n.transform,s||null);i!=null&&(r===null&&(r=vs.empty()),r.set(n.field,i))}return r||null}function d_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&fc(n,s,(i,a)=>WO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jd extends np{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ho extends np{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yw(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function f_(t,e,r){const n=new Map;dr(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,jO(a,o,r[s]))}return n}function h_(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,HO(i,a,e))}return n}class sp extends np{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XO extends np{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&KO(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Fu(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Fu(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=jw();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=Xw(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Pt.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),zt())}isEqual(e){return this.batchId===e.batchId&&fc(this.mutations,e.mutations,(r,n)=>d_(r,n))&&fc(this.baseMutations,e.baseMutations,(r,n)=>d_(r,n))}}class O1{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){dr(e.mutations.length===n.length);let s=function(){return LO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new O1(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kr,Zt;function ZO(t){switch(t){default:return It();case He.CANCELLED:case He.UNKNOWN:case He.DEADLINE_EXCEEDED:case He.RESOURCE_EXHAUSTED:case He.INTERNAL:case He.UNAVAILABLE:case He.UNAUTHENTICATED:return!1;case He.INVALID_ARGUMENT:case He.NOT_FOUND:case He.ALREADY_EXISTS:case He.PERMISSION_DENIED:case He.FAILED_PRECONDITION:case He.ABORTED:case He.OUT_OF_RANGE:case He.UNIMPLEMENTED:case He.DATA_LOSS:return!0}}function Jw(t){if(t===void 0)return yi("GRPC error has no .code"),He.UNKNOWN;switch(t){case Kr.OK:return He.OK;case Kr.CANCELLED:return He.CANCELLED;case Kr.UNKNOWN:return He.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return He.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return He.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return He.INTERNAL;case Kr.UNAVAILABLE:return He.UNAVAILABLE;case Kr.UNAUTHENTICATED:return He.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return He.INVALID_ARGUMENT;case Kr.NOT_FOUND:return He.NOT_FOUND;case Kr.ALREADY_EXISTS:return He.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return He.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return He.FAILED_PRECONDITION;case Kr.ABORTED:return He.ABORTED;case Kr.OUT_OF_RANGE:return He.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return He.UNIMPLEMENTED;case Kr.DATA_LOSS:return He.DATA_LOSS;default:return It()}}(Zt=Kr||(Kr={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new Bo([4294967295,4294967295],0);function p_(t){const e=eN().encode(t),r=new bw;return r.update(e),new Uint8Array(r.digest())}function m_(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bo([r,n],0),new Bo([s,i],0)]}class N1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new fu(`Invalid padding: ${r}`);if(n<0)throw new fu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new fu(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Bo.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Bo.fromNumber(n)));return s.compare(tN)===1&&(s=new Bo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=p_(e),[n,s]=m_(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new N1(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=p_(e),[n,s]=m_(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Gd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new ap(Pt.min(),s,new Rr(ar),Ei(),zt())}}class Gd{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Gd(n,r,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class Qw{constructor(e,r){this.targetId=e,this.me=r}}class Zw{constructor(e,r,n=gn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class g_{constructor(){this.fe=0,this.ge=x_(),this.pe=gn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=zt(),r=zt(),n=zt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:It()}}),new Gd(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=x_()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,dr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ei(),this.qe=v_(),this.Qe=new Rr(ar)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:It()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(ev(i))if(n===0){const a=new vt(i.path);this.Ue(r,a,Vn.newNoDocument(a,Pt.min()))}else dr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=qo(n).toUint8Array()}catch(l){if(l instanceof Pw)return Ko("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new N1(a,s,i)}catch(l){return Ko(l instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&ev(o.target)){const l=new vt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Vn.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=zt();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new ap(e,r,this.Qe,this.ke,n);return this.ke=Ei(),this.qe=v_(),this.Qe=new Rr(ar),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new g_,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new wn(ar),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ht("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new g_),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function v_(){return new Rr(vt.comparator)}function x_(){return new Rr(vt.comparator)}const nN={asc:"ASCENDING",desc:"DESCENDING"},sN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aN={and:"AND",or:"OR"};class iN{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function rv(t,e){return t.useProto3Json||Jh(e)?e:{value:e}}function Y0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oN(t,e){return Y0(t,e.toTimestamp())}function Ia(t){return dr(!!t),Pt.fromTimestamp(function(r){const n=oo(r);return new Zr(n.seconds,n.nanos)}(t))}function M1(t,e){return nv(t,e).canonicalString()}function nv(t,e){const r=function(s){return new yr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function tC(t){const e=yr.fromString(t);return dr(iC(e)),e}function sv(t,e){return M1(t.databaseId,e.path)}function rm(t,e){const r=tC(e);if(r.get(1)!==t.databaseId.projectId)throw new nt(He.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new nt(He.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new vt(nC(r))}function rC(t,e){return M1(t.databaseId,e)}function lN(t){const e=tC(t);return e.length===4?yr.emptyPath():nC(e)}function av(t){return new yr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nC(t){return dr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function y_(t,e,r){return{name:sv(t,e),fields:r.value.mapValue.fields}}function cN(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:It()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(dr(u===void 0||typeof u=="string"),gn.fromBase64String(u||"")):(dr(u===void 0||u instanceof Buffer||u instanceof Uint8Array),gn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?He.UNKNOWN:Jw(c.code);return new nt(u,c.message||"")}(a);r=new Zw(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=rm(t,n.document.name),i=Ia(n.document.updateTime),a=n.document.createTime?Ia(n.document.createTime):Pt.min(),o=new vs({mapValue:{fields:n.document.fields}}),l=Vn.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new f0(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=rm(t,n.document),i=n.readTime?Ia(n.readTime):Pt.min(),a=Vn.newNoDocument(s,i),o=n.removedTargetIds||[];r=new f0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=rm(t,n.document),i=n.removedTargetIds||[];r=new f0([],i,s,null)}else{if(!("filter"in e))return It();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new QO(s,i),o=n.targetId;r=new Qw(o,a)}}return r}function uN(t,e){let r;if(e instanceof jd)r={update:y_(t,e.key,e.value)};else if(e instanceof sp)r={delete:sv(t,e.key)};else if(e instanceof ho)r={update:y_(t,e.key,e.data),updateMask:yN(e.fieldMask)};else{if(!(e instanceof XO))return It();r={verify:sv(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof fd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof hd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof pd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof X0)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw It()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:oN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:It()}(t,e.precondition)),r}function dN(t,e){return t&&t.length>0?(dr(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?Ia(s.updateTime):Ia(i);return a.isEqual(Pt.min())&&(a=Ia(i)),new zO(a,s.transformResults||[])}(r,e))):[]}function fN(t,e){return{documents:[rC(t,e.path)]}}function hN(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=rC(t,s);const i=function(c){if(c.length!==0)return aC(da.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:Ol(h.field),direction:gN(h.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=rv(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function pN(t){let e=lN(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){dr(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(f){const h=sC(f);return h instanceof da&&Nw(h)?h.getFilters():[h]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(h=>function(m){return new dd(Nl(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,Jh(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(f){const h=!!f.before,p=f.values||[];return new gc(p,h)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const h=!f.before,p=f.values||[];return new gc(p,h)}(r.endAt)),RO(e,s,a,i,o,"F",l,c)}function mN(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function sC(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Nl(r.unaryFilter.field);return Qr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Nl(r.unaryFilter.field);return Qr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Nl(r.unaryFilter.field);return Qr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Nl(r.unaryFilter.field);return Qr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return It()}}(t):t.fieldFilter!==void 0?function(r){return Qr.create(Nl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return da.create(r.compositeFilter.filters.map(n=>sC(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return It()}}(r.compositeFilter.op))}(t):It()}function gN(t){return nN[t]}function vN(t){return sN[t]}function xN(t){return aN[t]}function Ol(t){return{fieldPath:t.canonicalString()}}function Nl(t){return hn.fromServerFormat(t.fieldPath)}function aC(t){return t instanceof Qr?function(r){if(r.op==="=="){if(a_(r.value))return{unaryFilter:{field:Ol(r.field),op:"IS_NAN"}};if(s_(r.value))return{unaryFilter:{field:Ol(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(a_(r.value))return{unaryFilter:{field:Ol(r.field),op:"IS_NOT_NAN"}};if(s_(r.value))return{unaryFilter:{field:Ol(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ol(r.field),op:vN(r.op),value:r.value}}}(t):t instanceof da?function(r){const n=r.getFilters().map(s=>aC(s));return n.length===1?n[0]:{compositeFilter:{op:xN(r.op),filters:n}}}(t):It()}function yN(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function iC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,r,n,s,i=Pt.min(),a=Pt.min(),o=gn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.ct=e}}function _N(t){const e=pN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?q0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.un=new SN}addToCollectionParentIndex(e,r){return this.un.add(r),Ke.resolve()}getCollectionParents(e,r){return Ke.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ke.resolve()}deleteFieldIndex(e,r){return Ke.resolve()}deleteAllFieldIndexes(e){return Ke.resolve()}createTargetIndexes(e,r){return Ke.resolve()}getDocumentsMatchingTarget(e,r){return Ke.resolve(null)}getIndexType(e,r){return Ke.resolve(0)}getFieldIndexes(e,r){return Ke.resolve([])}getNextCollectionGroupToUpdate(e){return Ke.resolve(null)}getMinOffset(e,r){return Ke.resolve(io.min())}getMinOffsetFromCollectionGroup(e,r){return Ke.resolve(io.min())}updateCollectionGroup(e,r,n){return Ke.resolve()}updateIndexEntries(e,r){return Ke.resolve()}}class SN{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new wn(yr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new wn(yr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new vc(0)}static kn(){return new vc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.changes=new Dc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ke.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Fu(n.mutation,s,As.empty(),Zr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,zt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=zt()){const s=Po();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=du();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Po();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,zt()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=Ei();const a=Ru(),o=function(){return Ru()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof ho)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),Fu(u.mutation,c,u.mutation.getFieldMask(),Zr.now())):a.set(c.key,As.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var f;return o.set(c,new AN(u,(f=a.get(c))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Ru();let s=new Rr((a,o)=>a-o),i=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||As.empty();u=o.applyToLocalView(c,u),n.set(l,u);const f=(s.get(o.batchId)||zt()).add(l);s=s.insert(o.batchId,f)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,f=jw();u.forEach(h=>{if(!i.has(h)){const p=Xw(r.get(h),n.get(h));p!==null&&f.set(h,p),i=i.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Ke.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return vt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):R1(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Ke.resolve(Po());let o=-1,l=i;return a.next(c=>Ke.forEach(c,(u,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(u)?Ke.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,zt())).next(u=>({batchId:o,changes:Hw(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new vt(r)).next(n=>{let s=du();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=du();return this.indexManager.getCollectionParents(e,i).next(o=>Ke.forEach(o,l=>{const c=function(f,h){return new il(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((f,h)=>{a=a.insert(f,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Vn.newInvalidDocument(u)))});let o=du();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Fu(u.mutation,c,As.empty(),Zr.now()),tp(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ke.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Ia(s.createTime)}}(r)),Ke.resolve()}getNamedQuery(e,r){return Ke.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:_N(s.bundledQuery),readTime:Ia(s.readTime)}}(r)),Ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.overlays=new Rr(vt.comparator),this.Ir=new Map}getOverlay(e,r){return Ke.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Po();return Ke.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Ke.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Ke.resolve()}getOverlaysForCollection(e,r,n){const s=Po(),i=r.length+1,a=new vt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Ke.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Rr((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=Po(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Po(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Ke.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new JO(r,n));let i=this.Ir.get(r);i===void 0&&(i=zt(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return Ke.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.Tr=new wn(cn.Er),this.dr=new wn(cn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new cn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new cn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new vt(new yr([])),n=new cn(r,e),s=new cn(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new vt(new yr([])),n=new cn(r,e),s=new cn(r,e+1);let i=zt();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new cn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class cn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return vt.comparator(e.key,r.key)||ar(e.wr,r.wr)}static Ar(e,r){return ar(e.wr,r.wr)||vt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new wn(cn.Er)}checkEmpty(e){return Ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new YO(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new cn(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ke.resolve(a)}lookupMutationBatch(e,r){return Ke.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Ke.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new cn(r,0),s=new cn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Ke.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new wn(ar);return r.forEach(s=>{const i=new cn(s,0),a=new cn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Ke.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;vt.isDocumentKey(i)||(i=i.child(""));const a=new cn(new vt(i),0);let o=new wn(ar);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),Ke.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){dr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ke.forEach(r.mutations,s=>{const i=new cn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new cn(r,0),s=this.br.firstAfterOrEqual(n);return Ke.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ke.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.Mr=e,this.docs=function(){return new Rr(vt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ke.resolve(n?n.document.mutableCopy():Vn.newInvalidDocument(r))}getEntries(e,r){let n=Ei();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Vn.newInvalidDocument(s))}),Ke.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Ei();const a=r.path,o=new vt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||hO(fO(u),n)<=0||(s.has(u.key)||tp(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Ke.resolve(i)}getAllFromCollectionGroup(e,r,n,s){It()}Or(e,r){return Ke.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new RN(this)}getSize(e){return Ke.resolve(this.size)}}class RN extends TN{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Ke.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.persistence=e,this.Nr=new Dc(r=>D1(r),P1),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new L1,this.targetCount=0,this.kr=vc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Ke.resolve()}getLastRemoteSnapshotVersion(e){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ke.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ke.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new vc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ke.resolve()}updateTargetData(e,r){return this.Kn(r),Ke.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Ke.waitFor(i).next(()=>s)}getTargetCount(e){return Ke.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ke.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ke.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Ke.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ke.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ke.resolve(n)}containsKey(e,r){return Ke.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,r){this.qr={},this.overlays={},this.Qr=new C1(0),this.Kr=!1,this.Kr=!0,this.$r=new kN,this.referenceDelegate=e(this),this.Ur=new FN(this),this.indexManager=new bN,this.remoteDocumentCache=function(s){return new PN(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new EN(r),this.Gr=new CN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new IN,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new DN(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ht("MemoryPersistence","Starting transaction:",e);const s=new NN(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Ke.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class NN extends mO{constructor(e){super(),this.currentSequenceNumber=e}}class B1{constructor(e){this.persistence=e,this.Jr=new L1,this.Yr=null}static Zr(e){return new B1(e)}get Xr(){if(this.Yr)return this.Yr;throw It()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ke.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ke.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ke.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.Xr,n=>{const s=vt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Pt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ke.or([()=>Ke.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=zt(),s=zt();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new U1(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Z3()?8:gO(Xn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new MN;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Jc()<=Xt.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",Fl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ke.resolve()):(Jc()<=Xt.DEBUG&&ht("QueryEngine","Query:",Fl(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Jc()<=Xt.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",Fl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ca(r))):Ke.resolve())}Yi(e,r){if(c_(r))return Ke.resolve(null);let n=Ca(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=q0(r,null,"F"),n=Ca(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=zt(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,q0(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return c_(r)||s.isEqual(Pt.min())?Ke.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Ke.resolve(null):(Jc()<=Xt.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fl(r)),this.rs(e,a,r,dO(s,-1)).next(o=>o))})}ts(e,r){let n=new wn($w(e));return r.forEach((s,i)=>{tp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Jc()<=Xt.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",Fl(r)),this.Ji.getDocumentsMatchingQuery(e,r,io.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Rr(ar),this._s=new Dc(i=>D1(i),P1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function UN(t,e,r,n){return new BN(t,e,r,n)}async function oC(t,e){const r=Ft(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=zt();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function $N(t,e){const r=Ft(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const f=c.batch,h=f.keys();let p=Ke.resolve();return h.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(g=>{const v=c.docVersions.get(m);dr(v!==null),g.version.compareTo(v)<0&&(f.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=zt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function lC(t){const e=Ft(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function VN(t,e){const r=Ft(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,f)=>{const h=s.get(f);if(!h)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,f)));let p=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(gn.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),s=s.insert(f,p),function(g,v,x){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,p,u)&&o.push(r.Ur.updateTargetData(i,p))});let l=Ei(),c=zt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(HN(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(Pt.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(f=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Ke.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function HN(t,e,r){let n=zt(),s=zt();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Ei();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Pt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):ht("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function jN(t,e){const r=Ft(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function GN(t,e){const r=Ft(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Ke.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new zi(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function iv(t,e,r){const n=Ft(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Hd(a))throw a;ht("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function E_(t,e,r){const n=Ft(t);let s=Pt.min(),i=zt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const f=Ft(l),h=f._s.get(u);return h!==void 0?Ke.resolve(f.os.get(h)):f.Ur.getTargetData(c,u)}(n,a,Ca(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:Pt.min(),r?i:zt())).next(o=>(WN(n,OO(e),o),{documents:o,Ts:i})))}function WN(t,e,r){let n=t.us.get(e)||Pt.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class __{constructor(){this.activeTargetIds=$O()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zN{constructor(){this.so=new __,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new __,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ht("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ht("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf=null;function nm(){return Rf===null?Rf=function(){return 268435456+Math.round(2147483648*Math.random())}():Rf++,"0x"+Rf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class YN extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=nm(),l=this.xo(r,n.toUriEncodedString());ht("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(ht("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw Ko("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+kc}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=qN[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=nm();return new Promise((a,o)=>{const l=new Sw;l.setWithCredentials(!0),l.listenOnce(Tw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case c0.NO_ERROR:const u=l.getResponseJson();ht(Fn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case c0.TIMEOUT:ht(Fn,`RPC '${e}' ${i} timed out`),o(new nt(He.DEADLINE_EXCEEDED,"Request time out"));break;case c0.HTTP_ERROR:const f=l.getStatus();if(ht(Fn,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const m=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(He).indexOf(x)>=0?x:He.UNKNOWN}(p.status);o(new nt(m,p.message))}else o(new nt(He.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new nt(He.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{ht(Fn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ht(Fn,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=nm(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Cw(),o=ww(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");ht(Fn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=a.createWebChannel(u,l);let h=!1,p=!1;const m=new XN({Io:v=>{p?ht(Fn,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(h||(ht(Fn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),h=!0),ht(Fn,`RPC '${e}' stream ${s} sending:`,v),f.send(v))},To:()=>f.close()}),g=(v,x,y)=>{v.listen(x,_=>{try{y(_)}catch(I){setTimeout(()=>{throw I},0)}})};return g(f,uu.EventType.OPEN,()=>{p||(ht(Fn,`RPC '${e}' stream ${s} transport opened.`),m.yo())}),g(f,uu.EventType.CLOSE,()=>{p||(p=!0,ht(Fn,`RPC '${e}' stream ${s} transport closed`),m.So())}),g(f,uu.EventType.ERROR,v=>{p||(p=!0,Ko(Fn,`RPC '${e}' stream ${s} transport errored:`,v),m.So(new nt(He.UNAVAILABLE,"The operation could not be completed")))}),g(f,uu.EventType.MESSAGE,v=>{var x;if(!p){const y=v.data[0];dr(!!y);const _=y,I=_.error||((x=_[0])===null||x===void 0?void 0:x.error);if(I){ht(Fn,`RPC '${e}' stream ${s} received error:`,I);const R=I.status;let A=function(b){const S=Kr[b];if(S!==void 0)return Jw(S)}(R),E=I.message;A===void 0&&(A=He.INTERNAL,E="Unknown error status: "+R+" with message "+I.message),p=!0,m.So(new nt(A,E)),f.close()}else ht(Fn,`RPC '${e}' stream ${s} received:`,y),m.bo(y)}}),g(o,Aw.STAT_EVENT,v=>{v.stat===Yg.PROXY?ht(Fn,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===Yg.NOPROXY&&ht(Fn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){return new iN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ht("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cC(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===He.RESOURCE_EXHAUSTED?(yi(r.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===He.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new nt(He.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ht("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ht("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JN extends uC{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=cN(this.serializer,e),n=function(i){if(!("targetChange"in i))return Pt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Pt.min():a.readTime?Ia(a.readTime):Pt.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=av(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=ev(l)?{documents:fN(i,l)}:{query:hN(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=eC(i,a.resumeToken);const c=rv(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Pt.min())>0){o.readTime=Y0(i,a.snapshotVersion.toTimestamp());const c=rv(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=mN(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=av(this.serializer),r.removeTarget=e,this.a_(r)}}class QN extends uC{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return dr(!!e.streamToken),this.lastStreamToken=e.streamToken,dr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){dr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=dN(e.writeResults,e.commitTime),n=Ia(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=av(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>uN(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new nt(He.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,nv(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new nt(He.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,nv(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new nt(He.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class e5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yi(r),this.D_=!1):ht("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{ol(this)&&(ht("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ft(l);c.L_.add(4),await Wd(c),c.q_.set("Unknown"),c.L_.delete(4),await op(c)}(this))})}),this.q_=new e5(n,s)}}async function op(t){if(ol(t))for(const e of t.B_)await e(!0)}async function Wd(t){for(const e of t.B_)await e(!1)}function dC(t,e){const r=Ft(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),j1(r)?H1(r):Pc(r).r_()&&V1(r,e))}function $1(t,e){const r=Ft(t),n=Pc(r);r.N_.delete(e),n.r_()&&fC(r,e),r.N_.size===0&&(n.r_()?n.o_():ol(r)&&r.q_.set("Unknown"))}function V1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Pc(t).A_(e)}function fC(t,e){t.Q_.xe(e),Pc(t).R_(e)}function H1(t){t.Q_=new rN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Pc(t).start(),t.q_.v_()}function j1(t){return ol(t)&&!Pc(t).n_()&&t.N_.size>0}function ol(t){return Ft(t).L_.size===0}function hC(t){t.Q_=void 0}async function r5(t){t.q_.set("Online")}async function n5(t){t.N_.forEach((e,r)=>{V1(t,e)})}async function s5(t,e){hC(t),j1(t)?(t.q_.M_(e),H1(t)):t.q_.set("Unknown")}async function a5(t,e,r){if(t.q_.set("Online"),e instanceof Zw&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){ht("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await J0(t,n)}else if(e instanceof f0?t.Q_.Ke(e):e instanceof Qw?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Pt.min()))try{const n=await lC(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(gn.EMPTY_BYTE_STRING,u.snapshotVersion)),fC(i,l);const f=new zi(u.target,l,c,u.sequenceNumber);V1(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){ht("RemoteStore","Failed to raise snapshot:",n),await J0(t,n)}}async function J0(t,e,r){if(!Hd(e))throw e;t.L_.add(1),await Wd(t),t.q_.set("Offline"),r||(r=()=>lC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ht("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await op(t)})}function pC(t,e){return e().catch(r=>J0(t,r,e))}async function lp(t){const e=Ft(t),r=lo(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;i5(e);)try{const s=await jN(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,o5(e,s)}catch(s){await J0(e,s)}mC(e)&&gC(e)}function i5(t){return ol(t)&&t.O_.length<10}function o5(t,e){t.O_.push(e);const r=lo(t);r.r_()&&r.V_&&r.m_(e.mutations)}function mC(t){return ol(t)&&!lo(t).n_()&&t.O_.length>0}function gC(t){lo(t).start()}async function l5(t){lo(t).p_()}async function c5(t){const e=lo(t);for(const r of t.O_)e.m_(r.mutations)}async function u5(t,e,r){const n=t.O_.shift(),s=O1.from(n,e,r);await pC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await lp(t)}async function d5(t,e){e&&lo(t).V_&&await async function(n,s){if(function(a){return ZO(a)&&a!==He.ABORTED}(s.code)){const i=n.O_.shift();lo(n).s_(),await pC(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await lp(n)}}(t,e),mC(t)&&gC(t)}async function S_(t,e){const r=Ft(t);r.asyncQueue.verifyOperationInProgress(),ht("RemoteStore","RemoteStore received new credentials");const n=ol(r);r.L_.add(3),await Wd(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await op(r)}async function f5(t,e){const r=Ft(t);e?(r.L_.delete(2),await op(r)):e||(r.L_.add(2),await Wd(r),r.q_.set("Unknown"))}function Pc(t){return t.K_||(t.K_=function(r,n,s){const i=Ft(r);return i.w_(),new JN(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:r5.bind(null,t),Ro:n5.bind(null,t),mo:s5.bind(null,t),d_:a5.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),j1(t)?H1(t):t.q_.set("Unknown")):(await t.K_.stop(),hC(t))})),t.K_}function lo(t){return t.U_||(t.U_=function(r,n,s){const i=Ft(r);return i.w_(),new QN(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:l5.bind(null,t),mo:d5.bind(null,t),f_:c5.bind(null,t),g_:u5.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await lp(t)):(await t.U_.stop(),t.O_.length>0&&(ht("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new G1(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(He.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function W1(t,e){if(yi("AsyncQueue",`${e}: ${t}`),Hd(t))return new nt(He.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.comparator=e?(r,n)=>e(r,n)||vt.comparator(r.key,n.key):(r,n)=>vt.comparator(r.key,n.key),this.keyedMap=du(),this.sortedSet=new Rr(this.comparator)}static emptySet(e){return new tc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof tc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new tc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.W_=new Rr(vt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):It():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class xc{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new xc(e,r,tc.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class p5{constructor(){this.queries=A_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Ft(r),i=s.queries;s.queries=A_(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new nt(He.ABORTED,"Firestore shutting down"))}}function A_(){return new Dc(t=>Uw(t),ep)}async function z1(t,e){const r=Ft(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new h5,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=W1(a,`Initialization of query '${Fl(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&q1(r)}async function K1(t,e){const r=Ft(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function m5(t,e){const r=Ft(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&q1(r)}function g5(t,e,r){const n=Ft(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function q1(t){t.Y_.forEach(e=>{e.next()})}var ov,w_;(w_=ov||(ov={})).ea="default",w_.Cache="cache";class X1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new xc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ov.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.key=e}}class xC{constructor(e){this.key=e}}class v5{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=zt(),this.mutatedKeys=zt(),this.Aa=$w(e),this.Ra=new tc(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new T_,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const h=s.get(u),p=tp(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;h&&p?h.data.isEqual(p.data)?m!==g&&(n.track({type:3,doc:p}),v=!0):this.ga(h,p)||(n.track({type:2,doc:p}),v=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),v=!0):h&&!p&&(n.track({type:1,doc:h}),v=!0,(l||c)&&(o=!0)),v&&(p?(a=a.add(p),i=g?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,f)=>function(p,m){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return g(p)-g(m)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new xc(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new T_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=zt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new xC(n))}),this.da.forEach(n=>{e.has(n)||r.push(new vC(n))}),r}ba(e){this.Ta=e.Ts,this.da=zt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return xc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class x5{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class y5{constructor(e){this.key=e,this.va=!1}}class E5{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Dc(o=>Uw(o),ep),this.Ma=new Map,this.xa=new Set,this.Oa=new Rr(vt.comparator),this.Na=new Map,this.La=new L1,this.Ba={},this.ka=new Map,this.qa=vc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function _5(t,e,r=!0){const n=TC(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await yC(n,e,r,!0),s}async function b5(t,e){const r=TC(t);await yC(r,e,!0,!1)}async function yC(t,e,r,n){const s=await GN(t.localStore,Ca(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await S5(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&dC(t.remoteStore,s),o}async function S5(t,e,r,n,s){t.Ka=(f,h,p)=>async function(g,v,x,y){let _=v.view.ma(x);_.ns&&(_=await E_(g.localStore,v.query,!1).then(({documents:E})=>v.view.ma(E,_)));const I=y&&y.targetChanges.get(v.targetId),R=y&&y.targetMismatches.get(v.targetId)!=null,A=v.view.applyChanges(_,g.isPrimaryClient,I,R);return I_(g,v.targetId,A.wa),A.snapshot}(t,f,h,p);const i=await E_(t.localStore,e,!0),a=new v5(e,i.Ts),o=a.ma(i.documents),l=Gd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);I_(t,r,c.wa);const u=new x5(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function T5(t,e,r){const n=Ft(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!ep(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await iv(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&$1(n.remoteStore,s.targetId),lv(n,s.targetId)}).catch(Vd)):(lv(n,s.targetId),await iv(n.localStore,s.targetId,!0))}async function A5(t,e){const r=Ft(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),$1(r.remoteStore,n.targetId))}async function w5(t,e,r){const n=F5(t);try{const s=await function(a,o){const l=Ft(a),c=Zr.now(),u=o.reduce((p,m)=>p.add(m.key),zt());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Ei(),g=zt();return l.cs.getEntries(p,u).next(v=>{m=v,m.forEach((x,y)=>{y.isValidDocument()||(g=g.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(v=>{f=v;const x=[];for(const y of o){const _=qO(y,f.get(y.key).overlayedDocument);_!=null&&x.push(new ho(y.key,_,Rw(_.value.mapValue),os.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,x,o)}).next(v=>{h=v;const x=v.applyToLocalDocumentSet(f,g);return l.documentOverlayCache.saveOverlays(p,v.batchId,x)})}).then(()=>({batchId:h.batchId,changes:Hw(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new Rr(ar)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await zd(n,s.changes),await lp(n.remoteStore)}catch(s){const i=W1(s,"Failed to persist write");r.reject(i)}}async function EC(t,e){const r=Ft(t);try{const n=await VN(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(dr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?dr(a.va):s.removedDocuments.size>0&&(dr(a.va),a.va=!1))}),await zd(r,n,e)}catch(n){await Vd(n)}}function C_(t,e,r){const n=Ft(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Ft(a);l.onlineState=o;let c=!1;l.queries.forEach((u,f)=>{for(const h of f.j_)h.Z_(o)&&(c=!0)}),c&&q1(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function C5(t,e,r){const n=Ft(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Rr(vt.comparator);a=a.insert(i,Vn.newNoDocument(i,Pt.min()));const o=zt().add(i),l=new ap(Pt.min(),new Map,new Rr(ar),a,o);await EC(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),Y1(n)}else await iv(n.localStore,e,!1).then(()=>lv(n,e,r)).catch(Vd)}async function I5(t,e){const r=Ft(t),n=e.batch.batchId;try{const s=await $N(r.localStore,e);bC(r,n,null),_C(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await zd(r,s)}catch(s){await Vd(s)}}async function k5(t,e,r){const n=Ft(t);try{const s=await function(a,o){const l=Ft(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(f=>(dr(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);bC(n,e,r),_C(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await zd(n,s)}catch(s){await Vd(s)}}function _C(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function bC(t,e,r){const n=Ft(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function lv(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||SC(t,n)})}function SC(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&($1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),Y1(t))}function I_(t,e,r){for(const n of r)n instanceof vC?(t.La.addReference(n.key,e),D5(t,n)):n instanceof xC?(ht("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||SC(t,n.key)):It()}function D5(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ht("SyncEngine","New document in limbo: "+r),t.xa.add(n),Y1(t))}function Y1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new vt(yr.fromString(e)),n=t.qa.next();t.Na.set(n,new y5(r)),t.Oa=t.Oa.insert(r,n),dC(t.remoteStore,new zi(Ca(Zh(r.path)),n,"TargetPurposeLimboResolution",C1.oe))}}async function zd(t,e,r){const n=Ft(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const f=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=U1.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=Ft(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ke.forEach(c,h=>Ke.forEach(h.$i,p=>u.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Ke.forEach(h.Ui,p=>u.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!Hd(f))throw f;ht("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const h=f.targetId;if(!f.fromCache){const p=u.os.get(h),m=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(m);u.os=u.os.insert(h,g)}}}(n.localStore,i))}async function P5(t,e){const r=Ft(t);if(!r.currentUser.isEqual(e)){ht("SyncEngine","User change. New user:",e.toKey());const n=await oC(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new nt(He.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await zd(r,n.hs)}}function R5(t,e){const r=Ft(t),n=r.Na.get(e);if(n&&n.va)return zt().add(n.key);{let s=zt();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function TC(t){const e=Ft(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C5.bind(null,e),e.Ca.d_=m5.bind(null,e.eventManager),e.Ca.$a=g5.bind(null,e.eventManager),e}function F5(t){const e=Ft(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k5.bind(null,e),e}class Q0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ip(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return UN(this.persistence,new LN,e.initialUser,this.serializer)}Ga(e){return new ON(B1.Zr,this.serializer)}Wa(e){return new zN}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Q0.provider={build:()=>new Q0};class cv{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>C_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=P5.bind(null,this.syncEngine),await f5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new p5}()}createDatastore(e){const r=ip(e.databaseInfo.databaseId),n=function(i){return new YN(i)}(e.databaseInfo);return function(i,a,o,l){return new ZN(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new t5(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>C_(this.syncEngine,r,0),function(){return b_.D()?new b_:new KN}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,u){const f=new E5(s,i,a,o,l,c);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Ft(s);ht("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Wd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}cv.provider={build:()=>new cv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Bn.UNAUTHENTICATED,this.clientId=w1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{ht("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(ht("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=W1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function am(t,e){t.asyncQueue.verifyOperationInProgress(),ht("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await oC(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function k_(t,e){t.asyncQueue.verifyOperationInProgress();const r=await N5(t);ht("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>S_(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>S_(e.remoteStore,s)),t._onlineComponents=e}async function N5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ht("FirestoreClient","Using user provided OfflineComponentProvider");try{await am(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===He.FAILED_PRECONDITION||s.code===He.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Ko("Error using user provided cache. Falling back to memory cache: "+r),await am(t,new Q0)}}else ht("FirestoreClient","Using default OfflineComponentProvider"),await am(t,new Q0);return t._offlineComponents}async function AC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ht("FirestoreClient","Using user provided OnlineComponentProvider"),await k_(t,t._uninitializedComponentsProvider._online)):(ht("FirestoreClient","Using default OnlineComponentProvider"),await k_(t,new cv))),t._onlineComponents}function M5(t){return AC(t).then(e=>e.syncEngine)}async function Z0(t){const e=await AC(t),r=e.eventManager;return r.onListen=_5.bind(null,e.syncEngine),r.onUnlisten=T5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=b5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=A5.bind(null,e.syncEngine),r}function L5(t,e,r={}){const n=new ai;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new J1({next:h=>{u.Za(),a.enqueueAndForget(()=>K1(i,f));const p=h.docs.has(o);!p&&h.fromCache?c.reject(new nt(He.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?c.reject(new nt(He.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new X1(Zh(o.path),u,{includeMetadataChanges:!0,_a:!0});return z1(i,f)}(await Z0(t),t.asyncQueue,e,r,n)),n.promise}function B5(t,e,r={}){const n=new ai;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new J1({next:h=>{u.Za(),a.enqueueAndForget(()=>K1(i,f)),h.fromCache&&l.source==="server"?c.reject(new nt(He.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new X1(o,u,{includeMetadataChanges:!0,_a:!0});return z1(i,f)}(await Z0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t,e,r){if(!r)throw new nt(He.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IC(t,e,r,n){if(e===!0&&n===!0)throw new nt(He.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function P_(t){if(!vt.isDocumentKey(t))throw new nt(He.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function R_(t){if(vt.isDocumentKey(t))throw new nt(He.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":It()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new nt(He.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=cp(t);throw new nt(He.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function U5(t,e){if(e<=0)throw new nt(He.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new nt(He.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new nt(He.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new nt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new nt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new nt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class up{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(He.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new nt(He.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F_(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new kw;switch(n.type){case"firstParty":return new iO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new nt(He.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=D_.get(r);n&&(ht("ComponentProvider","Removing Datastore"),D_.delete(r),n.terminate())}(this),Promise.resolve()}}function kC(t,e,r,n={}){var s;const i=(t=Kn(t,up))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=Bn.MOCK_USER;else{o=DA(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new nt(He.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Bn(c)}t._authCredentials=new nO(new Iw(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ma(this.firestore,e,this._query)}}class Cn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cn(this.firestore,e,this._key)}}class ii extends ma{constructor(e,r,n){super(e,r,Zh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new vt(e))}withConverter(e){return new ii(this.firestore,e,this._path)}}function wt(t,e,...r){if(t=or(t),CC("collection","path",e),t instanceof up){const n=yr.fromString(e,...r);return R_(n),new ii(t,null,n)}{if(!(t instanceof Cn||t instanceof ii))throw new nt(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(yr.fromString(e,...r));return R_(n),new ii(t.firestore,null,n)}}function Qe(t,e,...r){if(t=or(t),arguments.length===1&&(e=w1.newId()),CC("doc","path",e),t instanceof up){const n=yr.fromString(e,...r);return P_(n),new Cn(t,null,new vt(n))}{if(!(t instanceof Cn||t instanceof ii))throw new nt(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(yr.fromString(e,...r));return P_(n),new Cn(t.firestore,t instanceof ii?t.converter:null,new vt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cC(this,"async_queue_retry"),this.Vu=()=>{const n=sm();n&&ht("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=sm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=sm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ai;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Hd(e))throw e;ht("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw yi("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=G1.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&It()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function N_(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fa extends up{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new O_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new O_(e),this._firestoreClient=void 0,await e}}}function po(t,e){const r=typeof t=="object"?t:Ld(),n=typeof t=="string"?t:"(default)",s=Md(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=l1("firestore");i&&kC(s,...i)}return s}function Rc(t){if(t._terminated)throw new nt(He.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$5(t),t._firestoreClient}function $5(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,u){return new yO(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,wC(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new O5(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yo(gn.fromBase64String(e))}catch(r){throw new nt(He.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Yo(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new nt(He.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new nt(He.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new nt(He.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ar(this._lat,e._lat)||ar(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=/^__.*__$/;class H5{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,r,this.fieldTransforms):new jd(e,this.data,r,this.fieldTransforms)}}class DC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ho(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function PC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It()}}class Q1{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Q1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return eh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(PC(this.Cu)&&V5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class j5{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||ip(e)}Qu(e,r,n,s=!1){return new Q1({Cu:e,methodName:r,qu:n,path:hn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oc(t){const e=t._freezeSettings(),r=ip(t._databaseId);return new j5(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Z1(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);tx("Data must be an object, but it was:",a,n);const o=NC(n,a);let l,c;if(i.merge)l=new As(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const h=uv(e,f,r);if(!a.contains(h))throw new nt(He.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);LC(u,h)||u.push(h)}l=new As(u),c=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=a.fieldTransforms;return new H5(new vs(o),l,c)}class hp extends Kd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hp}}class ex extends Kd{_toFieldTransform(e){return new GO(e.path,new fd)}isEqual(e){return e instanceof ex}}function RC(t,e,r,n){const s=t.Qu(1,e,r);tx("Data must be an object, but it was:",s,n);const i=[],a=vs.empty();al(n,(l,c)=>{const u=rx(e,l,r);c=or(c);const f=s.Nu(u);if(c instanceof hp)i.push(u);else{const h=qd(c,f);h!=null&&(i.push(u),a.set(u,h))}});const o=new As(i);return new DC(a,o,s.fieldTransforms)}function FC(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[uv(e,n,r)],l=[s];if(i.length%2!=0)throw new nt(He.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(uv(e,i[h])),l.push(i[h+1]);const c=[],u=vs.empty();for(let h=o.length-1;h>=0;--h)if(!LC(c,o[h])){const p=o[h];let m=l[h];m=or(m);const g=a.Nu(p);if(m instanceof hp)c.push(p);else{const v=qd(m,g);v!=null&&(c.push(p),u.set(p,v))}}const f=new As(c);return new DC(u,f,a.fieldTransforms)}function OC(t,e,r,n=!1){return qd(r,t.Qu(n?4:3,e))}function qd(t,e){if(MC(t=or(t)))return tx("Unsupported field value:",e,t),NC(t,e);if(t instanceof Kd)return function(n,s){if(!PC(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=qd(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=or(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return VO(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Zr.fromDate(n);return{timestampValue:Y0(s.serializer,i)}}if(n instanceof Zr){const i=new Zr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Y0(s.serializer,i)}}if(n instanceof dp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Yo)return{bytesValue:eC(s.serializer,n._byteString)};if(n instanceof Cn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:M1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof fp)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return F1(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${cp(n)}`)}(t,e)}function NC(t,e){const r={};return Dw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):al(t,(n,s)=>{const i=qd(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function MC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Zr||t instanceof dp||t instanceof Yo||t instanceof Cn||t instanceof Kd||t instanceof fp)}function tx(t,e,r){if(!MC(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=cp(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function uv(t,e,r){if((e=or(e))instanceof Fc)return e._internalPath;if(typeof e=="string")return rx(t,e);throw eh("Field path arguments must be of type string or ",t,!1,void 0,r)}const G5=new RegExp("[~\\*/\\[\\]]");function rx(t,e,r){if(e.search(G5)>=0)throw eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Fc(...e.split("."))._internalPath}catch{throw eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function eh(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new nt(He.INVALID_ARGUMENT,o+t+l)}function LC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(pp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class W5 extends nx{data(){return super.data()}}function pp(t,e){return typeof e=="string"?rx(t,e):e instanceof Fc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new nt(He.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sx{}class Xd extends sx{}function ur(t,e,...r){let n=[];e instanceof sx&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof mp).length,o=i.filter(l=>l instanceof Yd).length;if(a>1||a>0&&o>0)throw new nt(He.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Yd extends Xd{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Yd(e,r,n)}_apply(e){const r=this._parse(e);return UC(e._query,r),new ma(e.firestore,e.converter,tv(e._query,r))}_parse(e){const r=Oc(e.firestore);return function(i,a,o,l,c,u,f){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new nt(He.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){L_(f,u);const p=[];for(const m of f)p.push(M_(l,i,m));h={arrayValue:{values:p}}}else h=M_(l,i,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||L_(f,u),h=OC(o,a,f,u==="in"||u==="not-in");return Qr.create(c,u,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function jr(t,e,r){const n=e,s=pp("where",t);return Yd._create(s,n,r)}class mp extends sx{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new mp(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:da.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)UC(a,l),a=tv(a,l)}(e._query,r),new ma(e.firestore,e.converter,tv(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gp extends Xd{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new gp(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new nt(He.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new nt(He.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dd(i,a)}(e._query,this._field,this._direction);return new ma(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new il(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function dn(t,e="asc"){const r=e,n=pp("orderBy",t);return gp._create(n,r)}class vp extends Xd{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new vp(e,r,n)}_apply(e){return new ma(e.firestore,e.converter,q0(e._query,this._limit,this._limitType))}}function Ns(t){return U5("limit",t),vp._create("limit",t,"F")}class xp extends Xd{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new xp(e,r,n)}_apply(e){const r=z5(e,this.type,this._docOrFields,this._inclusive);return new ma(e.firestore,e.converter,function(s,i){return new il(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function th(...t){return xp._create("startAfter",t,!1)}function z5(t,e,r,n){if(r[0]=or(r[0]),r[0]instanceof nx)return function(i,a,o,l,c){if(!l)throw new nt(He.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const f of ec(i))if(f.field.isKeyField())u.push(K0(a,l.key));else{const h=l.data.field(f.field);if(Qh(h))throw new nt(He.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new nt(He.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(h)}return new gc(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Oc(t.firestore);return function(a,o,l,c,u,f){const h=a.explicitOrderBy;if(u.length>h.length)throw new nt(He.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let m=0;m<u.length;m++){const g=u[m];if(h[m].field.isKeyField()){if(typeof g!="string")throw new nt(He.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof g}`);if(!R1(a)&&g.indexOf("/")!==-1)throw new nt(He.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${g}' contains a slash.`);const v=a.path.child(yr.fromString(g));if(!vt.isDocumentKey(v))throw new nt(He.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const x=new vt(v);p.push(K0(o,x))}else{const v=OC(l,c,g);p.push(v)}}return new gc(p,f)}(t._query,t.firestore._databaseId,s,e,r,n)}}function M_(t,e,r){if(typeof(r=or(r))=="string"){if(r==="")throw new nt(He.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R1(e)&&r.indexOf("/")!==-1)throw new nt(He.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(yr.fromString(r));if(!vt.isDocumentKey(n))throw new nt(He.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return K0(t,new vt(n))}if(r instanceof Cn)return K0(t,r._key);throw new nt(He.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cp(r)}.`)}function L_(t,e){if(!Array.isArray(t)||t.length===0)throw new nt(He.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UC(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new nt(He.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new nt(He.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class $C{convertValue(e,r="none"){switch(Xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw It()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return al(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Hr(a.doubleValue));return new fp(i)}convertGeoPoint(e){return new dp(Hr(e.latitude),Hr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=I1(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(cd(e));default:return null}}convertTimestamp(e){const r=oo(e);return new Zr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=yr.fromString(e);dr(iC(n));const s=new hc(n.get(1),n.get(3)),i=new vt(n.popFirst(5));return s.isEqual(r)||yi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ix extends nx{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(pp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Ou extends ix{data(e={}){return super.data(e)}}class ox{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new $l(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ou(this._firestore,this._userDataWriter,n.key,n,new $l(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new nt(He.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new Ou(s._firestore,s._userDataWriter,o.doc.key,o.doc,new $l(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new Ou(s._firestore,s._userDataWriter,o.doc.key,o.doc,new $l(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:K5(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function K5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t){t=Kn(t,Cn);const e=Kn(t.firestore,fa);return L5(Rc(e),t._key).then(r=>HC(e,t,r))}class lx extends $C{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,r)}}function jt(t){t=Kn(t,ma);const e=Kn(t.firestore,fa),r=Rc(e),n=new lx(e);return BC(t._query),B5(r,t._query).then(s=>new ox(e,n,t,s))}function Kt(t,e,r){t=Kn(t,Cn);const n=Kn(t.firestore,fa),s=ax(t.converter,e,r);return Nc(n,[Z1(Oc(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,os.none())])}function Jd(t,e,r,...n){t=Kn(t,Cn);const s=Kn(t.firestore,fa),i=Oc(s);let a;return a=typeof(e=or(e))=="string"||e instanceof Fc?FC(i,"updateDoc",t._key,e,r,n):RC(i,"updateDoc",t._key,e),Nc(s,[a.toMutation(t._key,os.exists(!0))])}function co(t){return Nc(Kn(t.firestore,fa),[new sp(t._key,os.none())])}function VC(t,e){const r=Kn(t.firestore,fa),n=Qe(t),s=ax(t.converter,e);return Nc(r,[Z1(Oc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,os.exists(!1))]).then(()=>n)}function yc(t,...e){var r,n,s;t=or(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||N_(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(N_(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,c,u;if(t instanceof Cn)c=Kn(t.firestore,fa),u=Zh(t._key.path),l={next:f=>{e[a]&&e[a](HC(c,t,f))},error:e[a+1],complete:e[a+2]};else{const f=Kn(t,ma);c=Kn(f.firestore,fa),u=f._query;const h=new lx(c);l={next:p=>{e[a]&&e[a](new ox(c,h,f,p))},error:e[a+1],complete:e[a+2]},BC(t._query)}return function(h,p,m,g){const v=new J1(g),x=new X1(p,v,m);return h.asyncQueue.enqueueAndForget(async()=>z1(await Z0(h),x)),()=>{v.Za(),h.asyncQueue.enqueueAndForget(async()=>K1(await Z0(h),x))}}(Rc(c),u,o,l)}function Nc(t,e){return function(n,s){const i=new ai;return n.asyncQueue.enqueueAndForget(async()=>w5(await M5(n),s,i)),i.promise}(Rc(t),e)}function HC(t,e,r){const n=r.docs.get(e._key),s=new lx(t);return new ix(t,s,e._key,n,new $l(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Oc(e)}set(e,r,n){this._verifyNotCommitted();const s=im(e,this._firestore),i=ax(s.converter,r,n),a=Z1(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,os.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=im(e,this._firestore);let a;return a=typeof(r=or(r))=="string"||r instanceof Fc?FC(this._dataReader,"WriteBatch.update",i._key,r,n,s):RC(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,os.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=im(e,this._firestore);return this._mutations=this._mutations.concat(new sp(r._key,os.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(He.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function im(t,e){if((t=or(t)).firestore!==e)throw new nt(He.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function $s(){return new ex("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t){return Rc(t=Kn(t,fa)),new jC(t,e=>Nc(t,e))}(function(e,r=!0){(function(s){kc=s})(sl),so(new gi("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new fa(new sO(n.getProvider("auth-internal")),new lO(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new nt(He.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Us(ZE,"4.7.3",e),Us(ZE,"4.7.3","esm2017")})();const q5=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:$C,Bytes:Yo,CollectionReference:ii,DocumentReference:Cn,DocumentSnapshot:ix,FieldPath:Fc,FieldValue:Kd,Firestore:fa,FirestoreError:nt,GeoPoint:dp,Query:ma,QueryCompositeFilterConstraint:mp,QueryConstraint:Xd,QueryDocumentSnapshot:Ou,QueryFieldFilterConstraint:Yd,QueryLimitConstraint:vp,QueryOrderByConstraint:gp,QuerySnapshot:ox,QueryStartAtConstraint:xp,SnapshotMetadata:$l,Timestamp:Zr,VectorValue:fp,WriteBatch:jC,_AutoId:w1,_ByteString:gn,_DatabaseId:hc,_DocumentKey:vt,_EmptyAuthCredentialsProvider:kw,_FieldPath:hn,_cast:Kn,_logWarn:Ko,_validateIsNotUsedTogether:IC,addDoc:VC,collection:wt,connectFirestoreEmulator:kC,deleteDoc:co,doc:Qe,ensureFirestoreConfigured:Rc,executeWrite:Nc,getDoc:tr,getDocs:jt,getFirestore:po,limit:Ns,onSnapshot:yc,orderBy:dn,query:ur,serverTimestamp:$s,setDoc:Kt,startAfter:th,updateDoc:Jd,where:jr,writeBatch:cx},Symbol.toStringTag,{value:"Module"}));var X5="firebase",Y5="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us(X5,Y5,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="firebasestorage.googleapis.com",WC="storageBucket",J5=2*60*1e3,Q5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends pa{constructor(e,r,n=0){super(om(e),`Firebase Storage: ${r} (${om(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return om(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Br;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Br||(Br={}));function om(t){return"storage/"+t}function ux(){const t="An unknown error occurred, please check the error payload for server response.";return new $r(Br.UNKNOWN,t)}function Z5(t){return new $r(Br.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function e9(t){return new $r(Br.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function t9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $r(Br.UNAUTHENTICATED,t)}function r9(){return new $r(Br.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function n9(t){return new $r(Br.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function s9(){return new $r(Br.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function a9(){return new $r(Br.CANCELED,"User canceled the upload/download.")}function i9(t){return new $r(Br.INVALID_URL,"Invalid URL '"+t+"'.")}function o9(t){return new $r(Br.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function l9(){return new $r(Br.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WC+"' property when initializing the app?")}function c9(){return new $r(Br.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function u9(t){return new $r(Br.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rh(t){return new $r(Br.INVALID_ARGUMENT,t)}function zC(){return new $r(Br.APP_DELETED,"The Firebase app was deleted.")}function KC(t){return new $r(Br.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nu(t,e){return new $r(Br.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qc(t){throw new $r(Br.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Wn.makeFromUrl(e,r)}catch{return new Wn(e,"")}if(n.path==="")return n;throw o9(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${u}/b/${s}/o${h}`,"i"),m={bucket:1,path:3},g=r===GC?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",x=new RegExp(`^https?://${g}/${s}/${v}`,"i"),_=[{regex:o,indices:l,postModify:i},{regex:p,indices:m,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<_.length;I++){const R=_[I],A=R.regex.exec(e);if(A){const E=A[R.indices.bucket];let T=A[R.indices.path];T||(T=""),n=new Wn(E,T),R.postModify(n);break}}if(n==null)throw i9(e);return n}}class d9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t,e,r){let n=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...v){c||(c=!0,e.apply(null,v))}function f(v){s=setTimeout(()=>{s=null,t(p,l())},v)}function h(){i&&clearTimeout(i)}function p(v,...x){if(c){h();return}if(v){h(),u.call(null,v,...x);return}if(l()||a){h(),u.call(null,v,...x);return}n<64&&(n*=2);let _;o===1?(o=2,_=0):_=(n+Math.random())*1e3,f(_)}let m=!1;function g(v){m||(m=!0,h(),!c&&(s!==null?(v||(o=2),clearTimeout(s),f(0)):v||(o=1)))}return f(0),i=setTimeout(()=>{a=!0,g(!0)},r),g}function h9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(t){return t!==void 0}function m9(t){return typeof t=="object"&&!Array.isArray(t)}function qC(t){return typeof t=="string"||t instanceof String}function B_(t){return dx()&&t instanceof Blob}function dx(){return typeof Blob<"u"}function dv(t,e,r,n){if(n<e)throw rh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw rh(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function g9(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Uo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Uo||(Uo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e,r,n,s,i,a,o,l,c,u,f,h=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Ff(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===Uo.NO_ERROR,l=i.getStatus();if(!o||v9(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Uo.ABORT;n(!1,new Ff(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Ff(c,i))})},r=(n,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());p9(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=ux();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?zC():a9();a(l)}else{const l=s9();a(l)}};this.canceled_?r(!1,new Ff(!1,null,!0)):this.backoffId_=f9(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&h9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ff{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function y9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function E9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function b9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function S9(t,e,r,n,s,i,a=!0){const o=g9(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return _9(c,e),y9(c,r),E9(c,i),b9(c,n),new x9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function A9(...t){const e=T9();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(dx())return new Blob(t);throw new $r(Br.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function w9(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9(t){if(typeof atob>"u")throw u9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lm{constructor(e,r){this.data=e,this.contentType=r||null}}function hx(t,e){switch(t){case Ms.RAW:return new lm(XC(e));case Ms.BASE64:case Ms.BASE64URL:return new lm(YC(t,e));case Ms.DATA_URL:return new lm(k9(e),D9(e))}throw ux()}function XC(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=t.charCodeAt(++r);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function I9(t){let e;try{e=decodeURIComponent(t)}catch{throw Nu(Ms.DATA_URL,"Malformed data URL.")}return XC(e)}function YC(t,e){switch(t){case Ms.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Nu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ms.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Nu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=C9(e)}catch(s){throw s.message.includes("polyfill")?s:Nu(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class JC{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Nu(Ms.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=P9(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function k9(t){const e=new JC(t);return e.base64?YC(Ms.BASE64,e.rest):I9(e.rest)}function D9(t){return new JC(t).contentType}function P9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,r){let n=0,s="";B_(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(B_(this.data_)){const n=this.data_,s=w9(n,e,r);return s===null?null:new Za(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Za(n,!0)}}static getBlob(...e){if(dx()){const r=e.map(n=>n instanceof Za?n.data_:n);return new Za(A9.apply(null,r))}else{const r=e.map(a=>qC(a)?hx(Ms.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new Za(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){let e;try{e=JSON.parse(t)}catch{return null}return m9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function F9(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function ZC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(t,e){return e}class Zn{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||O9}}let Of=null;function N9(t){return!qC(t)||t.length<2?t:ZC(t)}function M9(){if(Of)return Of;const t=[];t.push(new Zn("bucket")),t.push(new Zn("generation")),t.push(new Zn("metageneration")),t.push(new Zn("name","fullPath",!0));function e(i,a){return N9(a)}const r=new Zn("name");r.xform=e,t.push(r);function n(i,a){return a!==void 0?Number(a):a}const s=new Zn("size");return s.xform=n,t.push(s),t.push(new Zn("timeCreated")),t.push(new Zn("updated")),t.push(new Zn("md5Hash",null,!0)),t.push(new Zn("cacheControl",null,!0)),t.push(new Zn("contentDisposition",null,!0)),t.push(new Zn("contentEncoding",null,!0)),t.push(new Zn("contentLanguage",null,!0)),t.push(new Zn("contentType",null,!0)),t.push(new Zn("metadata","customMetadata",!0)),Of=t,Of}function L9(t,e){function r(){const n=t.bucket,s=t.fullPath,i=new Wn(n,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function B9(t,e,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const a=r[i];n[a.local]=a.xform(n,e[a.server])}return L9(n,t),n}function U9(t,e,r){const n=QC(e);return n===null?null:B9(t,n,r)}function $9(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="prefixes",$_="items";function V9(t,e,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[U_])for(const s of r[U_]){const i=s.replace(/\/$/,""),a=t._makeStorageReference(new Wn(e,i));n.prefixes.push(a)}if(r[$_])for(const s of r[$_]){const i=t._makeStorageReference(new Wn(e,s.name));n.items.push(i)}return n}function H9(t,e,r){const n=QC(r);return n===null?null:V9(t,e,n)}class px{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){if(!t)throw ux()}function j9(t,e){function r(n,s){const i=U9(t,s,e);return eI(i!==null),i}return r}function G9(t,e){function r(n,s){const i=H9(t,e,s);return eI(i!==null),i}return r}function mx(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=r9():s=t9():r.getStatus()===402?s=e9(t.bucket):r.getStatus()===403?s=n9(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function W9(t){const e=mx(t);function r(n,s){let i=e(n,s);return n.getStatus()===404&&(i=Z5(t.path)),i.serverResponse=s.serverResponse,i}return r}function z9(t,e,r,n,s){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",r.length>0&&(i.delimiter=r),n&&(i.pageToken=n),s&&(i.maxResults=s);const a=e.bucketOnlyServerUrl(),o=fx(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new px(o,l,G9(t,e.bucket),c);return u.urlParams=i,u.errorHandler=mx(e),u}function K9(t,e){const r=e.fullServerUrl(),n=fx(r,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function a(l,c){}const o=new px(n,s,a,i);return o.successCodes=[200,204],o.errorHandler=W9(e),o}function q9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function X9(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=q9(null,e)),n}function Y9(t,e,r,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let _="";for(let I=0;I<2;I++)_=_+Math.random().toString().slice(2);return _}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=X9(e,n,s),u=$9(c,r),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=Za.getBlob(f,n,h);if(p===null)throw c9();const m={name:c.fullPath},g=fx(i,t.host,t._protocol),v="POST",x=t.maxUploadRetryTime,y=new px(g,v,j9(t,r),x);return y.urlParams=m,y.headers=a,y.body=p.uploadData(),y.errorHandler=mx(e),y}class J9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Uo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Uo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Uo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw Qc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Q9 extends J9{initXhr(){this.xhr_.responseType="text"}}function gx(){return new Q9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,r){this._service=e,r instanceof Wn?this._location=r:this._location=Wn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Jo(e,r)}get root(){const e=new Wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZC(this._location.path)}get storage(){return this._service}get parent(){const e=R9(this._location.path);if(e===null)return null;const r=new Wn(this._location.bucket,e);return new Jo(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw KC(e)}}function tI(t,e,r){t._throwIfRoot("uploadBytes");const n=Y9(t.storage,t._location,M9(),new Za(e,!0),r);return t.storage.makeRequestWithTokens(n,gx).then(s=>({metadata:s,ref:t}))}function Z9(t,e,r=Ms.RAW,n){t._throwIfRoot("uploadString");const s=hx(r,e),i=Object.assign({},n);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),tI(t,s.data,i)}function eM(t){const e={prefixes:[],items:[]};return rI(t,e).then(()=>e)}async function rI(t,e,r){const s=await tM(t,{pageToken:r});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await rI(t,e,s.nextPageToken)}function tM(t,e){e!=null&&typeof e.maxResults=="number"&&dv("options.maxResults",1,1e3,e.maxResults);const r=e||{},n=z9(t.storage,t._location,"/",r.pageToken,r.maxResults);return t.storage.makeRequestWithTokens(n,gx)}function rM(t){t._throwIfRoot("deleteObject");const e=K9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,gx)}function nM(t,e){const r=F9(t._location.path,e),n=new Wn(t._location.bucket,r);return new Jo(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){return/^[A-Za-z]+:\/\//.test(t)}function aM(t,e){return new Jo(t,e)}function nI(t,e){if(t instanceof vx){const r=t;if(r._bucket==null)throw l9();const n=new Jo(r,r._bucket);return e!=null?nI(n,e):n}else return e!==void 0?nM(t,e):t}function iM(t,e){if(e&&sM(e)){if(t instanceof vx)return aM(t,e);throw rh("To use ref(service, url), the first argument must be a Storage instance.")}else return nI(t,e)}function V_(t,e){const r=e==null?void 0:e[WC];return r==null?null:Wn.makeFromBucketSpec(r,t)}function oM(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:DA(s,t.app.options.projectId))}class vx{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=GC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=J5,this._maxUploadRetryTime=Q5,this._requests=new Set,s!=null?this._bucket=Wn.makeFromBucketSpec(s,this._host):this._bucket=V_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,e):this._bucket=V_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jo(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new d9(zC());{const a=S9(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const H_="@firebase/storage",j_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="storage";function aI(t,e,r){return t=or(t),tI(t,e,r)}function iI(t,e,r,n){return t=or(t),Z9(t,e,r,n)}function oI(t){return t=or(t),eM(t)}function fv(t){return t=or(t),rM(t)}function nh(t,e){return t=or(t),iM(t,e)}function lI(t=Ld(),e){t=or(t);const n=Md(t,sI).getImmediate({identifier:e}),s=l1("storage");return s&&cI(n,...s),n}function cI(t,e,r,n={}){oM(t,e,r,n)}function lM(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new vx(r,n,s,e,sl)}function cM(){so(new gi(sI,lM,"PUBLIC").setMultipleInstances(!0)),Us(H_,j_,""),Us(H_,j_,"esm2017")}cM();const uM=Object.freeze(Object.defineProperty({__proto__:null,StorageError:$r,get StorageErrorCode(){return Br},StringFormat:Ms,_FbsBlob:Za,_Location:Wn,_dataFromString:hx,_invalidArgument:rh,_invalidRootOperation:KC,connectStorageEmulator:cI,deleteObject:fv,getStorage:lI,listAll:oI,ref:nh,uploadBytes:aI,uploadString:iI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="type.googleapis.com/google.protobuf.Int64Value",fM="type.googleapis.com/google.protobuf.UInt64Value";function uI(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function hv(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>hv(e));if(typeof t=="function"||typeof t=="object")return uI(t,e=>hv(e));throw new Error("Data cannot be encoded in JSON: "+t)}function sh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case dM:case fM:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>sh(e)):typeof t=="function"||typeof t=="object"?uI(t,e=>sh(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rc extends pa{constructor(e,r,n){super(`${xx}/${e}`,r||""),this.details=n}}function hM(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function pM(t,e){let r=hM(t),n=r,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!G_[a])return new rc("internal","internal");r=G_[a],n=a}const o=i.message;typeof o=="string"&&(n=o),s=i.details,s!==void 0&&(s=sh(s))}}catch{}return r==="ok"?null:new rc(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="us-central1";function gM(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new rc("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class vM{constructor(e,r,n,s,i=pv,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new mM(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=pv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function xM(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function yM(t,e,r){return n=>_M(t,e,n,r||{})}async function EM(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function _M(t,e,r,n){const s=t._url(e);return bM(t,s,r,n)}async function bM(t,e,r,n){r=hv(r);const s={data:r},i={},a=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,l=gM(o),c=await Promise.race([EM(e,s,i,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new rc("cancelled","Firebase Functions instance was deleted.");const u=pM(c.status,c.json);if(u)throw u;if(!c.json)throw new rc("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new rc("internal","Response is missing data field.");return{data:sh(f)}}const W_="@firebase/functions",z_="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="auth-internal",TM="app-check-internal",AM="messaging-internal";function wM(t,e){const r=(n,{instanceIdentifier:s})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(SM),o=n.getProvider(AM),l=n.getProvider(TM);return new vM(i,a,o,l,s,t)};so(new gi(xx,r,"PUBLIC").setMultipleInstances(!0)),Us(W_,z_,e),Us(W_,z_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t=Ld(),e=pv){const n=Md(or(t),xx).getImmediate({identifier:e}),s=l1("functions");return s&&dI(n,...s),n}function dI(t,e,r){xM(or(t),e,r)}function Ta(t,e,r){return yM(or(t),e,r)}wM(fetch.bind(self));const h0=Object.freeze(Object.defineProperty({__proto__:null,connectFunctionsEmulator:dI,getFunctions:nc,httpsCallable:Ta},Symbol.toStringTag,{value:"Module"})),fI={apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",authDomain:"casemangervue.firebaseapp.com",projectId:"casemangervue",storageBucket:"casemangervue.firebasestorage.app",messagingSenderId:"756483333257",appId:"1:756483333257:web:694e2ad2415b7886563a58",measurementId:"G-YBRDQX9NFR"},yp=FA(fI),$t=Wo(yp),Xe=po(yp),Ec=lI(yp),hI=nc(yp),pI=new ra;console.log(" Connected to Firebase project:",fI.projectId);const mI=Object.freeze(Object.defineProperty({__proto__:null,auth:$t,db:Xe,functions:hI,googleProvider:pI,storage:Ec},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ml=typeof document<"u";function gI(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function CM(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&gI(t.default)}const lr=Object.assign;function cm(t,e){const r={};for(const n in e){const s=e[n];r[n]=ha(s)?s.map(t):t(s)}return r}const Mu=()=>{},ha=Array.isArray,vI=/#/g,IM=/&/g,kM=/\//g,DM=/=/g,PM=/\?/g,xI=/\+/g,RM=/%5B/g,FM=/%5D/g,yI=/%5E/g,OM=/%60/g,EI=/%7B/g,NM=/%7C/g,_I=/%7D/g,MM=/%20/g;function yx(t){return encodeURI(""+t).replace(NM,"|").replace(RM,"[").replace(FM,"]")}function LM(t){return yx(t).replace(EI,"{").replace(_I,"}").replace(yI,"^")}function mv(t){return yx(t).replace(xI,"%2B").replace(MM,"+").replace(vI,"%23").replace(IM,"%26").replace(OM,"`").replace(EI,"{").replace(_I,"}").replace(yI,"^")}function BM(t){return mv(t).replace(DM,"%3D")}function UM(t){return yx(t).replace(vI,"%23").replace(PM,"%3F")}function $M(t){return t==null?"":UM(t).replace(kM,"%2F")}function md(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const VM=/\/$/,HM=t=>t.replace(VM,"");function um(t,e,r="/"){let n,s={},i="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=e.slice(0,l),i=e.slice(l+1,o>-1?o:e.length),s=t(i)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=zM(n??e,r),{fullPath:n+(i&&"?")+i+a,path:n,query:s,hash:md(a)}}function jM(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function K_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function GM(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&_c(e.matched[n],r.matched[s])&&bI(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function _c(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function bI(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!WM(t[r],e[r]))return!1;return!0}function WM(t,e){return ha(t)?q_(t,e):ha(e)?q_(e,t):t===e}function q_(t,e){return ha(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function zM(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const Ri={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var gd;(function(t){t.pop="pop",t.push="push"})(gd||(gd={}));var Lu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Lu||(Lu={}));function KM(t){if(!t)if(Ml){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),HM(t)}const qM=/^[^#]+#/;function XM(t,e){return t.replace(qM,"#")+e}function YM(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const Ep=()=>({left:window.scrollX,top:window.scrollY});function JM(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=YM(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function X_(t,e){return(history.state?history.state.position-e:-1)+t}const gv=new Map;function QM(t,e){gv.set(t,e)}function ZM(t){const e=gv.get(t);return gv.delete(t),e}let eL=()=>location.protocol+"//"+location.host;function SI(t,e){const{pathname:r,search:n,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),K_(l,"")}return K_(r,t)+n+s}function tL(t,e,r,n){let s=[],i=[],a=null;const o=({state:h})=>{const p=SI(t,location),m=r.value,g=e.value;let v=0;if(h){if(r.value=p,e.value=h,a&&a===m){a=null;return}v=g?h.position-g.position:0}else n(p);s.forEach(x=>{x(r.value,m,{delta:v,type:gd.pop,direction:v?v>0?Lu.forward:Lu.back:Lu.unknown})})};function l(){a=r.value}function c(h){s.push(h);const p=()=>{const m=s.indexOf(h);m>-1&&s.splice(m,1)};return i.push(p),p}function u(){const{history:h}=window;h.state&&h.replaceState(lr({},h.state,{scroll:Ep()}),"")}function f(){for(const h of i)h();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function Y_(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?Ep():null}}function rL(t){const{history:e,location:r}=window,n={value:SI(t,r)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const f=t.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?t:t.slice(f))+l:eL()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),s.value=c}catch(p){console.error(p),r[u?"replace":"assign"](h)}}function a(l,c){const u=lr({},e.state,Y_(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),n.value=l}function o(l,c){const u=lr({},s.value,e.state,{forward:l,scroll:Ep()});i(u.current,u,!0);const f=lr({},Y_(n.value,l,null),{position:u.position+1},c);i(l,f,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function nL(t){t=KM(t);const e=rL(t),r=tL(t,e.state,e.location,e.replace);function n(i,a=!0){a||r.pauseListeners(),history.go(i)}const s=lr({location:"",base:t,go:n,createHref:XM.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function sL(t){return typeof t=="string"||t&&typeof t=="object"}function TI(t){return typeof t=="string"||typeof t=="symbol"}const AI=Symbol("");var J_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(J_||(J_={}));function bc(t,e){return lr(new Error,{type:t,[AI]:!0},e)}function Wa(t,e){return t instanceof Error&&AI in t&&(e==null||!!(t.type&e))}const Q_="[^/]+?",aL={sensitive:!1,strict:!1,start:!0,end:!0},iL=/[.+*?^${}()[\]/\\]/g;function oL(t,e){const r=lr({},aL,e),n=[];let s=r.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(s+="/");for(let f=0;f<c.length;f++){const h=c[f];let p=40+(r.sensitive?.25:0);if(h.type===0)f||(s+="/"),s+=h.value.replace(iL,"\\$&"),p+=40;else if(h.type===1){const{value:m,repeatable:g,optional:v,regexp:x}=h;i.push({name:m,repeatable:g,optional:v});const y=x||Q_;if(y!==Q_){p+=10;try{new RegExp(`(${y})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${m}" (${y}): `+I.message)}}let _=g?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(_=v&&c.length<2?`(?:/${_})`:"/"+_),v&&(_+="?"),s+=_,p+=20,v&&(p+=-8),g&&(p+=-20),y===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,r.sensitive?"":"i");function o(c){const u=c.match(a),f={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",m=i[h-1];f[m.name]=p&&m.repeatable?p.split("/"):p}return f}function l(c){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:g,optional:v}=p,x=m in c?c[m]:"";if(ha(x)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const y=ha(x)?x.join("/"):x;if(!y)if(v)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);u+=y}}return u||"/"}return{re:a,score:n,keys:i,parse:o,stringify:l}}function lL(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function wI(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const i=lL(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(Z_(n))return 1;if(Z_(s))return-1}return s.length-n.length}function Z_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const cL={type:0,value:""},uL=/[a-zA-Z0-9_]/;function dL(t){if(!t)return[[]];if(t==="/")return[[cL]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=0,n=r;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,c="",u="";function f(){c&&(r===0?i.push({type:0,value:c}):r===1||r===2||r===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&f(),a()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:uL.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),a(),s}function fL(t,e,r){const n=oL(dL(t.path),r),s=lr(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function hL(t,e){const r=[],n=new Map;e=nb({strict:!1,end:!0,sensitive:!1},e);function s(f){return n.get(f)}function i(f,h,p){const m=!p,g=tb(f);g.aliasOf=p&&p.record;const v=nb(e,f),x=[g];if("alias"in f){const I=typeof f.alias=="string"?[f.alias]:f.alias;for(const R of I)x.push(tb(lr({},g,{components:p?p.record.components:g.components,path:R,aliasOf:p?p.record:g})))}let y,_;for(const I of x){const{path:R}=I;if(h&&R[0]!=="/"){const A=h.record.path,E=A[A.length-1]==="/"?"":"/";I.path=h.record.path+(R&&E+R)}if(y=fL(I,h,v),p?p.alias.push(y):(_=_||y,_!==y&&_.alias.push(y),m&&f.name&&!rb(y)&&a(f.name)),CI(y)&&l(y),g.children){const A=g.children;for(let E=0;E<A.length;E++)i(A[E],y,p&&p.children[E])}p=p||y}return _?()=>{a(_)}:Mu}function a(f){if(TI(f)){const h=n.get(f);h&&(n.delete(f),r.splice(r.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=r.indexOf(f);h>-1&&(r.splice(h,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function o(){return r}function l(f){const h=gL(f,r);r.splice(h,0,f),f.record.name&&!rb(f)&&n.set(f.record.name,f)}function c(f,h){let p,m={},g,v;if("name"in f&&f.name){if(p=n.get(f.name),!p)throw bc(1,{location:f});v=p.record.name,m=lr(eb(h.params,p.keys.filter(_=>!_.optional).concat(p.parent?p.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),f.params&&eb(f.params,p.keys.map(_=>_.name))),g=p.stringify(m)}else if(f.path!=null)g=f.path,p=r.find(_=>_.re.test(g)),p&&(m=p.parse(g),v=p.record.name);else{if(p=h.name?n.get(h.name):r.find(_=>_.re.test(h.path)),!p)throw bc(1,{location:f,currentLocation:h});v=p.record.name,m=lr({},h.params,f.params),g=p.stringify(m)}const x=[];let y=p;for(;y;)x.unshift(y.record),y=y.parent;return{name:v,path:g,params:m,matched:x,meta:mL(x)}}t.forEach(f=>i(f));function u(){r.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:a,clearRoutes:u,getRoutes:o,getRecordMatcher:s}}function eb(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function tb(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:pL(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function pL(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function rb(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mL(t){return t.reduce((e,r)=>lr(e,r.meta),{})}function nb(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function gL(t,e){let r=0,n=e.length;for(;r!==n;){const i=r+n>>1;wI(t,e[i])<0?n=i:r=i+1}const s=vL(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function vL(t){let e=t;for(;e=e.parent;)if(CI(e)&&wI(t,e)===0)return e}function CI({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function xL(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(xI," "),a=i.indexOf("="),o=md(a<0?i:i.slice(0,a)),l=a<0?null:md(i.slice(a+1));if(o in e){let c=e[o];ha(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function sb(t){let e="";for(let r in t){const n=t[r];if(r=BM(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(ha(n)?n.map(i=>i&&mv(i)):[n&&mv(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function yL(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=ha(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const EL=Symbol(""),ab=Symbol(""),_p=Symbol(""),Ex=Symbol(""),vv=Symbol("");function Zc(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Vi(t,e,r,n,s,i=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const c=h=>{h===!1?l(bc(4,{from:r,to:e})):h instanceof Error?l(h):sL(h)?l(bc(2,{from:e,to:h})):(a&&n.enterCallbacks[s]===a&&typeof h=="function"&&a.push(h),o())},u=i(()=>t.call(n&&n.instances[s],e,r,c));let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(h=>l(h))})}function dm(t,e,r,n,s=i=>i()){const i=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(gI(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Vi(u,r,n,a,o,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const f=CM(u)?u.default:u;a.mods[o]=u,a.components[o]=f;const p=(f.__vccOpts||f)[e];return p&&Vi(p,r,n,a,o,s)()}))}}return i}function ib(t){const e=Is(_p),r=Is(Ex),n=Ae(()=>{const l=Z(t.to);return e.resolve(l)}),s=Ae(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],f=r.matched;if(!u||!f.length)return-1;const h=f.findIndex(_c.bind(null,u));if(h>-1)return h;const p=ob(l[c-2]);return c>1&&ob(u)===p&&f[f.length-1].path!==p?f.findIndex(_c.bind(null,l[c-2])):h}),i=Ae(()=>s.value>-1&&AL(r.params,n.value.params)),a=Ae(()=>s.value>-1&&s.value===r.matched.length-1&&bI(r.params,n.value.params));function o(l={}){if(TL(l)){const c=e[Z(t.replace)?"replace":"push"](Z(t.to)).catch(Mu);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:Ae(()=>n.value.href),isActive:i,isExactActive:a,navigate:o}}function _L(t){return t.length===1?t[0]:t}const bL=Dd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ib,setup(t,{slots:e}){const r=xs(ib(t)),{options:n}=Is(_p),s=Ae(()=>({[lb(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[lb(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&_L(e.default(r));return t.custom?i:Hh("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),SL=bL;function TL(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function AL(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!ha(s)||s.length!==n.length||n.some((i,a)=>i!==s[a]))return!1}return!0}function ob(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const lb=(t,e,r)=>t??e??r,wL=Dd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=Is(vv),s=Ae(()=>t.route||n.value),i=Is(ab,0),a=Ae(()=>{let c=Z(i);const{matched:u}=s.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),o=Ae(()=>s.value.matched[a.value]);wu(ab,Ae(()=>a.value+1)),wu(EL,o),wu(vv,s);const l=se();return Vt(()=>[l.value,o.value,t.name],([c,u,f],[h,p,m])=>{u&&(u.instances[f]=c,p&&p!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!_c(u,p)||!h)&&(u.enterCallbacks[f]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,f=o.value,h=f&&f.components[u];if(!h)return cb(r.default,{Component:h,route:c});const p=f.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,v=Hh(h,lr({},m,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return cb(r.default,{Component:v,route:c})||v}}});function cb(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const CL=wL;function IL(t){const e=hL(t.routes,t),r=t.parseQuery||xL,n=t.stringifyQuery||sb,s=t.history,i=Zc(),a=Zc(),o=Zc(),l=Kv(Ri);let c=Ri;Ml&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=cm.bind(null,ce=>""+ce),f=cm.bind(null,$M),h=cm.bind(null,md);function p(ce,pe){let te,Q;return TI(ce)?(te=e.getRecordMatcher(ce),Q=pe):Q=ce,e.addRoute(Q,te)}function m(ce){const pe=e.getRecordMatcher(ce);pe&&e.removeRoute(pe)}function g(){return e.getRoutes().map(ce=>ce.record)}function v(ce){return!!e.getRecordMatcher(ce)}function x(ce,pe){if(pe=lr({},pe||l.value),typeof ce=="string"){const Y=um(r,ce,pe.path),ne=e.resolve({path:Y.path},pe),ve=s.createHref(Y.fullPath);return lr(Y,ne,{params:h(ne.params),hash:md(Y.hash),redirectedFrom:void 0,href:ve})}let te;if(ce.path!=null)te=lr({},ce,{path:um(r,ce.path,pe.path).path});else{const Y=lr({},ce.params);for(const ne in Y)Y[ne]==null&&delete Y[ne];te=lr({},ce,{params:f(Y)}),pe.params=f(pe.params)}const Q=e.resolve(te,pe),ye=ce.hash||"";Q.params=u(h(Q.params));const X=jM(n,lr({},ce,{hash:LM(ye),path:Q.path})),q=s.createHref(X);return lr({fullPath:X,hash:ye,query:n===sb?yL(ce.query):ce.query||{}},Q,{redirectedFrom:void 0,href:q})}function y(ce){return typeof ce=="string"?um(r,ce,l.value.path):lr({},ce)}function _(ce,pe){if(c!==ce)return bc(8,{from:pe,to:ce})}function I(ce){return E(ce)}function R(ce){return I(lr(y(ce),{replace:!0}))}function A(ce){const pe=ce.matched[ce.matched.length-1];if(pe&&pe.redirect){const{redirect:te}=pe;let Q=typeof te=="function"?te(ce):te;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=y(Q):{path:Q},Q.params={}),lr({query:ce.query,hash:ce.hash,params:Q.path!=null?{}:ce.params},Q)}}function E(ce,pe){const te=c=x(ce),Q=l.value,ye=ce.state,X=ce.force,q=ce.replace===!0,Y=A(te);if(Y)return E(lr(y(Y),{state:typeof Y=="object"?lr({},ye,Y.state):ye,force:X,replace:q}),pe||te);const ne=te;ne.redirectedFrom=pe;let ve;return!X&&GM(n,Q,te)&&(ve=bc(16,{to:ne,from:Q}),j(Q,Q,!0,!1)),(ve?Promise.resolve(ve):S(ne,Q)).catch(ae=>Wa(ae)?Wa(ae,2)?ae:z(ae):M(ae,ne,Q)).then(ae=>{if(ae){if(Wa(ae,2))return E(lr({replace:q},y(ae.to),{state:typeof ae.to=="object"?lr({},ye,ae.to.state):ye,force:X}),pe||ne)}else ae=w(ne,Q,!0,q,ye);return k(ne,Q,ae),ae})}function T(ce,pe){const te=_(ce,pe);return te?Promise.reject(te):Promise.resolve()}function b(ce){const pe=K.values().next().value;return pe&&typeof pe.runWithContext=="function"?pe.runWithContext(ce):ce()}function S(ce,pe){let te;const[Q,ye,X]=kL(ce,pe);te=dm(Q.reverse(),"beforeRouteLeave",ce,pe);for(const Y of Q)Y.leaveGuards.forEach(ne=>{te.push(Vi(ne,ce,pe))});const q=T.bind(null,ce,pe);return te.push(q),me(te).then(()=>{te=[];for(const Y of i.list())te.push(Vi(Y,ce,pe));return te.push(q),me(te)}).then(()=>{te=dm(ye,"beforeRouteUpdate",ce,pe);for(const Y of ye)Y.updateGuards.forEach(ne=>{te.push(Vi(ne,ce,pe))});return te.push(q),me(te)}).then(()=>{te=[];for(const Y of X)if(Y.beforeEnter)if(ha(Y.beforeEnter))for(const ne of Y.beforeEnter)te.push(Vi(ne,ce,pe));else te.push(Vi(Y.beforeEnter,ce,pe));return te.push(q),me(te)}).then(()=>(ce.matched.forEach(Y=>Y.enterCallbacks={}),te=dm(X,"beforeRouteEnter",ce,pe,b),te.push(q),me(te))).then(()=>{te=[];for(const Y of a.list())te.push(Vi(Y,ce,pe));return te.push(q),me(te)}).catch(Y=>Wa(Y,8)?Y:Promise.reject(Y))}function k(ce,pe,te){o.list().forEach(Q=>b(()=>Q(ce,pe,te)))}function w(ce,pe,te,Q,ye){const X=_(ce,pe);if(X)return X;const q=pe===Ri,Y=Ml?history.state:{};te&&(Q||q?s.replace(ce.fullPath,lr({scroll:q&&Y&&Y.scroll},ye)):s.push(ce.fullPath,ye)),l.value=ce,j(ce,pe,te,q),z()}let D;function N(){D||(D=s.listen((ce,pe,te)=>{if(!re.listening)return;const Q=x(ce),ye=A(Q);if(ye){E(lr(ye,{replace:!0,force:!0}),Q).catch(Mu);return}c=Q;const X=l.value;Ml&&QM(X_(X.fullPath,te.delta),Ep()),S(Q,X).catch(q=>Wa(q,12)?q:Wa(q,2)?(E(lr(y(q.to),{force:!0}),Q).then(Y=>{Wa(Y,20)&&!te.delta&&te.type===gd.pop&&s.go(-1,!1)}).catch(Mu),Promise.reject()):(te.delta&&s.go(-te.delta,!1),M(q,Q,X))).then(q=>{q=q||w(Q,X,!1),q&&(te.delta&&!Wa(q,8)?s.go(-te.delta,!1):te.type===gd.pop&&Wa(q,20)&&s.go(-1,!1)),k(Q,X,q)}).catch(Mu)}))}let F=Zc(),P=Zc(),O;function M(ce,pe,te){z(ce);const Q=P.list();return Q.length?Q.forEach(ye=>ye(ce,pe,te)):console.error(ce),Promise.reject(ce)}function U(){return O&&l.value!==Ri?Promise.resolve():new Promise((ce,pe)=>{F.add([ce,pe])})}function z(ce){return O||(O=!ce,N(),F.list().forEach(([pe,te])=>ce?te(ce):pe()),F.reset()),ce}function j(ce,pe,te,Q){const{scrollBehavior:ye}=t;if(!Ml||!ye)return Promise.resolve();const X=!te&&ZM(X_(ce.fullPath,0))||(Q||!te)&&history.state&&history.state.scroll||null;return nl().then(()=>ye(ce,pe,X)).then(q=>q&&JM(q)).catch(q=>M(q,ce,pe))}const H=ce=>s.go(ce);let W;const K=new Set,re={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:g,resolve:x,options:t,push:I,replace:R,go:H,back:()=>H(-1),forward:()=>H(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:P.add,isReady:U,install(ce){const pe=this;ce.component("RouterLink",SL),ce.component("RouterView",CL),ce.config.globalProperties.$router=pe,Object.defineProperty(ce.config.globalProperties,"$route",{enumerable:!0,get:()=>Z(l)}),Ml&&!W&&l.value===Ri&&(W=!0,I(s.location).catch(ye=>{}));const te={};for(const ye in Ri)Object.defineProperty(te,ye,{get:()=>l.value[ye],enumerable:!0});ce.provide(_p,pe),ce.provide(Ex,Wv(te)),ce.provide(vv,l);const Q=ce.unmount;K.add(ce),ce.unmount=function(){K.delete(ce),K.size<1&&(c=Ri,D&&D(),D=null,l.value=Ri,W=!1,O=!1),Q()}}};function me(ce){return ce.reduce((pe,te)=>pe.then(()=>b(te)),Promise.resolve())}return re}function kL(t,e){const r=[],n=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(t.matched.find(c=>_c(c,o))?n.push(o):r.push(o));const l=t.matched[a];l&&(e.matched.find(c=>_c(c,l))||s.push(l))}return[r,n,s]}function Si(){return Is(_p)}function DL(t){return Is(Ex)}const ga=SA("auth",()=>{const t=se(null),e=se(""),r=se(!0),n=Si(),s=()=>{Kh($t,async u=>{if(r.value=!0,u)try{const f=await tr(Qe(Xe,"users",u.uid));f.exists()?(t.value={uid:u.uid,email:u.email,name:u.displayName,...f.data()},console.log(" User authenticated:",t.value)):(console.log(" User not found in Firestore"),t.value=null)}catch(f){console.error(" Error fetching user data:",f),t.value=null}else t.value=null,console.log(" No user authenticated");r.value=!1})},i=async()=>{e.value="";try{const u=new ra,h=(await T1($t,u)).user,p=await tr(Qe(Xe,"users",h.uid));if(!p.exists()){e.value=" User not found in system.";return}t.value={uid:h.uid,email:h.email,name:h.displayName,...p.data()},n.push("/")}catch(u){console.error(" Login error:",u),e.value=u.message||"Authentication failed."}},a=async()=>{try{await qh($t),t.value=null,n.push("/login")}catch(u){console.error(" Logout error:",u)}},o=u=>{t.value=u},l=async()=>{if($t.currentUser)try{return await jA($t.currentUser,!0),console.log(" Token refreshed successfully"),!0}catch(u){return console.error(" Error refreshing token:",u),!1}return!1},c=Ae(()=>t.value);return s(),{currentUser:t,user:c,errorMsg:e,isLoading:r,loginWithGoogle:i,logout:a,setUser:o,refreshToken:l}}),PL=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:ga},Symbol.toStringTag,{value:"Module"})),bp=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],ub=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],eu=["admin","administrator","administrator_504_CM","sped_chair"],it={VIEW_USERS:"view_users",EDIT_USER:"edit_user",DELETE_USER:"delete_user",MANAGE_SUBJECTS:"manage_subjects",MANAGE_ROLES:"manage_roles",VIEW_STUDENTS:"view_students",EDIT_STUDENT_CM:"edit_student_CM",EDIT_STUDENT_ALL:"edit_student_All"},Vl={admin:[it.VIEW_USERS,it.EDIT_USER,it.DELETE_USER,it.MANAGE_SUBJECTS,it.MANAGE_ROLES,it.VIEW_STUDENTS,it.EDIT_STUDENT_ALL,it.TESTING_ALL],administrator:[it.VIEW_USERS,it.EDIT_USER,it.DELETE_USER,it.MANAGE_SUBJECTS,it.MANAGE_ROLES,it.VIEW_STUDENTS,it.EDIT_STUDENT_ALL,it.TESTING_ALL],administrator_504_CM:[it.VIEW_USERS,it.EDIT_USER,it.DELETE_USER,it.MANAGE_SUBJECTS,it.MANAGE_ROLES,it.VIEW_STUDENTS,it.EDIT_STUDENT_ALL],sped_chair:[it.VIEW_USERS,it.VIEW_STUDENTS,it.EDIT_STUDENT_ALL],case_manager:[it.VIEW_USERS,it.VIEW_STUDENTS,it.EDIT_STUDENT_CM,it.TESTING_PARTIAL],teacher:[it.VIEW_USERS,it.VIEW_STUDENTS,it.TESTING_PARTIAL],service_provider:[it.VIEW_USERS,it.VIEW_STUDENTS,it.TESTING_PARTIAL],paraeducator:[it.VIEW_USERS,it.VIEW_STUDENTS]};function db(t){return bp.includes(t)}const II=SA("permission",()=>{const t=ga(),e=se([]),r=se({}),n=se({}),s=se(!1),i=async()=>{try{const f=Qe(Xe,"config/permissions_matrix"),h=await tr(f);h.exists()?(n.value=h.data(),console.log("Loaded permissions matrix from database:",n.value)):(n.value=Vl,console.log("Using default permissions matrix:",n.value)),s.value=!0,e.value.length>0&&(r.value=l(e.value))}catch(f){console.error("Error loading permissions matrix:",f),n.value=Vl,s.value=!0}};let a=null;const o=()=>{a&&a();const f=Qe(Xe,"config/permissions_matrix");a=yc(f,h=>{console.log("Permissions matrix updated:",h.exists(),h.data()),h.exists()?n.value=h.data():n.value=Vl,s.value=!0,e.value.length>0&&(r.value=l(e.value),console.log("User permissions recalculated:",r.value))},h=>{console.error("Error watching permissions matrix:",h),n.value=Vl,s.value=!0})};function l(f){const h={};return console.log("Deriving permissions for roles:",f),console.log("Current permissions matrix:",n.value),console.log("Matrix loaded:",s.value),f.forEach(p=>{const m=n.value[p]||[];console.log(`Role ${p} has permissions:`,m),m.forEach(g=>h[g]=!0)}),console.log("Final derived permissions:",h),h}let c=null;return Vt(()=>{var f;return(f=t.currentUser)==null?void 0:f.uid},()=>{var f;if(c&&c(),(f=t.currentUser)!=null&&f.uid){const h=Qe(Xe,"users",t.currentUser.uid);c=yc(h,p=>{const m=p.data()||{};e.value=m.role?[m.role]:[],console.log("User roles updated:",e.value),t.currentUser&&(t.currentUser.value={...t.currentUser.value,...m},console.log(" Updated auth store user data:",t.currentUser.value)),s.value&&(r.value=l(e.value))})}else e.value=[],r.value={}},{immediate:!0}),o(),i(),{userRoles:e,userPermissions:r,permissionsMatrix:n,matrixLoaded:s,hasRole:f=>e.value.includes(f),can:f=>r.value[f]===!0,loadPermissionsMatrix:i}});function RL(){const t=II(),e=Ae(()=>t.hasRole("admin")),r=Ae(()=>t.can("manage_users")),n=s=>t.can(s);return{isAdmin:e,canManageUsers:r,hasRole:t.hasRole,can:t.can,hasPermission:n}}const yt=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},FL={name:"UserRoleSwitcher",setup(){const t=ga();RL();const e=se(!1),r=se(""),n=se({}),s=se(!1),i=Ae(()=>t.user),a=[{value:"admin",label:"Admin"},{value:"administrator",label:"Administrator"},{value:"administrator_504_CM",label:"Administrator 504/CM"},{value:"sped_chair",label:"SPED Chair"},{value:"case_manager",label:"Case Manager"},{value:"paraeducator",label:"Paraeducator"},{value:"teacher",label:"Teacher"},{value:"service_provider",label:"Service Provider"}],o=[{uid:"test-admin",name:"Test Admin",email:"admin@test.com",role:"admin"},{uid:"test-administrator",name:"Test Administrator",email:"administrator@test.com",role:"administrator"},{uid:"test-administrator-504-cm",name:"Test Admin 504/CM",email:"admin504@test.com",role:"administrator_504_CM"},{uid:"test-sped-chair",name:"Test SPED Chair",email:"spedchair@test.com",role:"sped_chair"},{uid:"test-case-manager",name:"Test Case Manager",email:"cm@test.com",role:"case_manager"},{uid:"test-paraeducator",name:"Test Paraeducator",email:"para@test.com",role:"paraeducator"},{uid:"test-teacher",name:"Test Teacher",email:"teacher@test.com",role:"teacher"},{uid:"test-service-provider",name:"Test Service Provider",email:"service@test.com",role:"service_provider"}],l=async()=>{s.value=!0;try{const x=Qe(Xe,"config","permissions_matrix"),y=await tr(x);y.exists()?n.value=y.data():(console.warn("Permissions matrix not found in database"),n.value={})}catch(x){console.error("Error loading permissions matrix:",x),n.value={}}finally{s.value=!1}},c=Ae(()=>{var I;const x=[{action:it.VIEW_USERS,label:"View Users"},{action:it.EDIT_USER,label:"Edit User"},{action:it.DELETE_USER,label:"Delete User"},{action:it.MANAGE_SUBJECTS,label:"Manage Subjects"},{action:it.MANAGE_ROLES,label:"Manage Roles"},{action:it.VIEW_STUDENTS,label:"View Students"},{action:it.EDIT_STUDENT_CM,label:"Edit Students (Own Caseload)"},{action:it.EDIT_STUDENT_ALL,label:"Edit All Students"},{action:it.TESTING,label:"Testing"}],y=(I=i.value)==null?void 0:I.role,_=n.value[y]||[];return x.map(R=>({...R,granted:_.includes(R.action)}))}),u=()=>{e.value=!e.value},f=()=>{if(!r.value)return;const x={uid:`test-${r.value}-${Date.now()}`,email:`${r.value}@test.com`,name:`Test ${r.value.charAt(0).toUpperCase()+r.value.slice(1)}`,role:r.value,lastSyncTrigger:new Date().toISOString()};t.setUser(x),localStorage.setItem("debug-user",JSON.stringify(x)),r.value=""},h=x=>{t.setUser(x),localStorage.setItem("debug-user",JSON.stringify(x))},p=()=>{localStorage.removeItem("debug-user"),window.location.reload()},m=()=>{window.location.reload()};return Ut(async()=>{await l();const x=localStorage.getItem("debug-user");if(x)try{const y=JSON.parse(x);t.setUser(y)}catch(y){console.error("Error parsing debug user:",y),localStorage.removeItem("debug-user")}return()=>{}}),{canSwitchRoles:Ae(()=>{var y;const x=(y=i.value)==null?void 0:y.role;return["admin","administrator"].includes(x)}),hideRoleSwitcher:()=>{console.log("Role switcher hidden")},isExpanded:e,selectedRole:r,currentUser:i,availableRoles:a,testUsers:o,currentPermissions:c,loadingPermissions:s,toggleExpanded:u,switchRole:f,switchToUser:h,resetToRealUser:p,refreshPage:m}}},OL=["title"],NL={key:0,class:"debug-label"},ML={key:0,class:"switcher-content"},LL={class:"current-user-info"},BL={class:"role-selector"},UL=["value"],$L={class:"test-users"},VL={class:"test-user-buttons"},HL=["onClick"],jL={class:"permission-info"},GL={key:0,class:"loading-permissions"},WL={key:1,class:"permission-list"},zL={class:"permission-icon"},KL={class:"actions"};function qL(t,e,r,n,s,i){var a,o,l,c,u;return n.canSwitchRoles?(B(),V("div",{key:0,class:Ze(["user-role-switcher",{collapsed:!n.isExpanded}])},[d("div",{class:"switcher-header",onClick:e[1]||(e[1]=(...f)=>n.toggleExpanded&&n.toggleExpanded(...f)),title:n.isExpanded?"Collapse Debug Panel":"Expand Debug Panel"},[e[6]||(e[6]=d("span",{class:"debug-icon"},"",-1)),n.isExpanded?(B(),V("span",NL,"Debug Role Switcher")):_e("",!0),e[7]||(e[7]=d("span",{class:"beta-label"},"BETA",-1)),d("button",{onClick:e[0]||(e[0]=mn((...f)=>n.hideRoleSwitcher&&n.hideRoleSwitcher(...f),["stop"])),class:"close-debug-btn",title:"Close Role Switcher"},"")],8,OL),n.isExpanded?(B(),V("div",ML,[e[18]||(e[18]=d("div",{class:"beta-warning"},[d("strong",null," BETA WARNING:"),Oe(" This debug tool is not working correctly and should be used with caution. It may not properly switch roles or could cause unexpected behavior. ")],-1)),d("div",LL,[e[8]||(e[8]=d("strong",null,"Current User:",-1)),Oe(" "+J(((a=n.currentUser)==null?void 0:a.name)||((o=n.currentUser)==null?void 0:o.email)||"Unknown")+" ",1),e[9]||(e[9]=d("br",null,null,-1)),e[10]||(e[10]=d("strong",null,"Role:",-1)),e[11]||(e[11]=Oe()),d("span",{class:Ze("role-"+((l=n.currentUser)==null?void 0:l.role))},J(((c=n.currentUser)==null?void 0:c.role)||"None"),3),e[12]||(e[12]=d("br",null,null,-1)),e[13]||(e[13]=d("strong",null,"UID:",-1)),Oe(" "+J(((u=n.currentUser)==null?void 0:u.uid)||"None"),1)]),d("div",BL,[e[15]||(e[15]=d("label",{for:"role-select"},"Switch to Role:",-1)),we(d("select",{id:"role-select","onUpdate:modelValue":e[2]||(e[2]=f=>n.selectedRole=f),onChange:e[3]||(e[3]=(...f)=>n.switchRole&&n.switchRole(...f))},[e[14]||(e[14]=d("option",{value:""},"-- Select Role --",-1)),(B(!0),V(Re,null,Ve(n.availableRoles,f=>(B(),V("option",{key:f.value,value:f.value},J(f.label),9,UL))),128))],544),[[mr,n.selectedRole]])]),d("div",$L,[e[16]||(e[16]=d("h5",null,"Quick Test Users:",-1)),d("div",VL,[(B(!0),V(Re,null,Ve(n.testUsers,f=>{var h;return B(),V("button",{key:f.uid,onClick:p=>n.switchToUser(f),class:Ze(["test-user-btn",{active:((h=n.currentUser)==null?void 0:h.uid)===f.uid}])},[Oe(J(f.name)+" ",1),d("small",null,"("+J(f.role)+")",1)],10,HL)}),128))])]),d("div",jL,[e[17]||(e[17]=d("h5",null,"Current Permissions:",-1)),n.loadingPermissions?(B(),V("div",GL," Loading permissions... ")):(B(),V("div",WL,[(B(!0),V(Re,null,Ve(n.currentPermissions,f=>(B(),V("div",{key:f.action,class:Ze(["permission-item",{granted:f.granted}])},[d("span",zL,J(f.granted?"":""),1),Oe(" "+J(f.label),1)],2))),128))]))]),e[19]||(e[19]=nn('<div class="testing-scenarios" data-v-bae46714><h5 data-v-bae46714> Testing Scenarios:</h5><div class="scenario-list" data-v-bae46714><div class="scenario-item" data-v-bae46714><strong data-v-bae46714>Students Page:</strong><ul data-v-bae46714><li data-v-bae46714> Can view students</li><li data-v-bae46714> Can edit own caseload (CM)</li><li data-v-bae46714> Can edit all students (Admin)</li><li data-v-bae46714> Paraeducator filter works</li></ul></div><div class="scenario-item" data-v-bae46714><strong data-v-bae46714>Admin Panel:</strong><ul data-v-bae46714><li data-v-bae46714> Users management</li><li data-v-bae46714> Permissions matrix</li><li data-v-bae46714> Aide assignments</li><li data-v-bae46714> App settings</li></ul></div><div class="scenario-item" data-v-bae46714><strong data-v-bae46714>Navigation:</strong><ul data-v-bae46714><li data-v-bae46714> Admin button visibility</li><li data-v-bae46714> My Schedule button (Para)</li><li data-v-bae46714> Role-based menu items</li></ul></div></div></div>',1)),d("div",KL,[d("button",{onClick:e[4]||(e[4]=(...f)=>n.resetToRealUser&&n.resetToRealUser(...f)),class:"reset-btn"},"  Reset to Real User "),d("button",{onClick:e[5]||(e[5]=(...f)=>n.refreshPage&&n.refreshPage(...f)),class:"refresh-btn"},"  Refresh Page ")])])):_e("",!0)],2)):_e("",!0)}const XL=yt(FL,[["render",qL],["__scopeId","data-v-bae46714"]]),YL={key:0,class:"debug-access-info"},JL={__name:"DebugAccessInfo",setup(t){const e=ga(),r=se(!1),n=Ae(()=>e.currentUser),s=Ae(()=>{var o;const a=(o=n.value)==null?void 0:o.role;return["admin","administrator"].includes(a)}),i=()=>{r.value=!1,localStorage.setItem("debug-info-hidden","true")};return Ut(()=>{const a=localStorage.getItem("debug-info-hidden");s.value&&!a&&setTimeout(()=>{r.value=!0},3e3)}),(a,o)=>r.value?(B(),V("div",YL,[d("div",{class:"debug-info-content"},[o[0]||(o[0]=d("span",{class:"debug-info-icon"},"",-1)),o[1]||(o[1]=d("span",{class:"debug-info-text"},[Oe("Debug tools available - Press "),d("kbd",null,"Ctrl+Shift+D")],-1)),d("button",{onClick:i,class:"debug-info-close"},"")])])):_e("",!0)}},QL=yt(JL,[["__scopeId","data-v-358a31dd"]]);class ZL{constructor(){this.timeoutId=null,this.warningTimeoutId=null,this.isEnabled=se(!1),this.timeoutMinutes=se(30),this.showWarning=se(!1),this.warningCountdown=se(0),this.lastActivity=Date.now(),this.router=null,this.unsubscribeSettings=null,this.activityEvents=["mousedown","mousemove","keypress","scroll","touchstart","click","keydown"],this.init()}init(){this.loadSettings(),this.setupActivityListeners(),this.setupAuthWatcher()}setupAuthWatcher(){Kh($t,e=>{e?setTimeout(()=>{this.resetTimeout()},1e3):(this.clearTimeouts(),this.hideWarning())})}async loadSettings(){try{const e=Qe(Xe,"app_settings","security");this.unsubscribeSettings=yc(e,r=>{if(r.exists()){const n=r.data(),s=this.isEnabled.value;this.isEnabled.value=n.sessionTimeoutEnabled||!1,this.timeoutMinutes.value=n.sessionTimeoutMinutes||30,$t.currentUser&&this.resetTimeout()}else this.isEnabled.value=!1,this.timeoutMinutes.value=30})}catch(e){console.error("Failed to load session timeout settings:",e)}}async updateSettings(e,r){var n;try{const s=Qe(Xe,"app_settings","security");await Kt(s,{sessionTimeoutEnabled:e,sessionTimeoutMinutes:r,updatedAt:new Date().toISOString(),updatedBy:(n=$t.currentUser)==null?void 0:n.uid},{merge:!0})}catch(s){console.error("Failed to update session timeout settings:",s)}}setupActivityListeners(){this.activityEvents.forEach(e=>{document.addEventListener(e,this.handleActivity.bind(this),!0)})}handleActivity(){this.isEnabled.value&&(this.lastActivity=Date.now(),this.hideWarning(),this.resetTimeout())}resetTimeout(){if(!this.isEnabled.value||!$t.currentUser)return;this.clearTimeouts();const e=Math.round(this.timeoutMinutes.value*60*1e3),r=Math.max(0,e-2*60*1e3);r>0&&r<e&&(this.warningTimeoutId=setTimeout(()=>{this.showSessionWarning()},r)),this.timeoutId=setTimeout(()=>{this.handleSessionTimeout()},e)}showSessionWarning(){this.showWarning.value=!0,this.warningCountdown.value=120;const e=setInterval(()=>{this.warningCountdown.value--,this.warningCountdown.value<=0&&(clearInterval(e),this.handleSessionTimeout())},1e3);this.countdownInterval=e}hideWarning(){this.showWarning.value=!1,this.warningCountdown.value=0,this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null)}async handleSessionTimeout(){try{if($t.currentUser){const e=Qe(Xe,"auditLogs",`timeout_${Date.now()}_${$t.currentUser.uid}`);await Kt(e,{type:"session_timeout",userId:$t.currentUser.uid,userEmail:$t.currentUser.email,timeoutMinutes:this.timeoutMinutes.value,lastActivity:new Date(this.lastActivity),timestamp:new Date,userAgent:navigator.userAgent})}this.clearTimeouts(),this.hideWarning(),await qh($t),alert(`Your session has expired after ${this.timeoutMinutes.value} minutes of inactivity. Please log in again.`),this.router?this.router.push("/login"):window.location.href="/login"}catch(e){console.error("Error during session timeout:",e)}}extendSession(){this.hideWarning(),this.resetTimeout()}clearTimeouts(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.warningTimeoutId&&(clearTimeout(this.warningTimeoutId),this.warningTimeoutId=null)}setRouter(e){this.router=e}destroy(){this.clearTimeouts(),this.hideWarning(),this.activityEvents.forEach(e=>{document.removeEventListener(e,this.handleActivity.bind(this),!0)}),this.unsubscribeSettings&&this.unsubscribeSettings()}}const qs=new ZL;function _x(){const t=Si();return qs.setRouter(t),{isEnabled:qs.isEnabled,timeoutMinutes:qs.timeoutMinutes,showWarning:qs.showWarning,warningCountdown:qs.warningCountdown,updateSettings:qs.updateSettings.bind(qs),extendSession:qs.extendSession.bind(qs),resetTimeout:qs.resetTimeout.bind(qs)}}const eB={key:0,class:"session-timeout-overlay"},tB={class:"session-timeout-dialog"},rB={class:"dialog-content"},nB={class:"countdown"},sB={class:"countdown-time"},aB={class:"dialog-actions"},iB={__name:"SessionTimeoutDialog",setup(t){const e=Si(),{showWarning:r,warningCountdown:n,extendSession:s}=_x(),i=o=>{const l=Math.floor(o/60),c=o%60;return`${l}:${c.toString().padStart(2,"0")}`},a=async()=>{try{await qh($t),e.push("/login")}catch(o){console.error("Error signing out:",o)}};return(o,l)=>Z(r)?(B(),V("div",eB,[d("div",tB,[l[3]||(l[3]=d("div",{class:"dialog-header"},[d("h3",null," Session Timeout Warning")],-1)),d("div",rB,[l[1]||(l[1]=d("p",null,"Your session will expire in:",-1)),d("div",nB,[d("span",sB,J(i(Z(n))),1)]),l[2]||(l[2]=d("p",null,"You will be automatically logged out for security purposes.",-1))]),d("div",aB,[d("button",{onClick:l[0]||(l[0]=(...c)=>Z(s)&&Z(s)(...c)),class:"btn btn-primary"}," Stay Logged In "),d("button",{onClick:a,class:"btn btn-secondary"}," Logout Now ")])])])):_e("",!0)}},oB=yt(iB,[["__scopeId","data-v-db34d9f2"]]),tu={primaryColor:"#1976d2",primaryHover:"#1565c0",primaryLight:"#e3f2fd",primaryDark:"#0d47a1",secondaryColor:"#6c757d",secondaryHover:"#545b62",secondaryLight:"#f8f9fa",secondaryDark:"#495057",bgPrimary:"#f4f6f9",bgSecondary:"#ffffff",bgTertiary:"#f8f9fa",bgMuted:"#e9ecef",textPrimary:"#333333",textSecondary:"#666666",textMuted:"#999999",textInverse:"#ffffff",borderColor:"#dee2e6",borderLight:"#e9ecef",borderDark:"#adb5bd",borderFocus:"#1976d2",successColor:"#28a745",successHover:"#218838",successLight:"#d4edda",warningColor:"#ffc107",warningHover:"#e0a800",warningLight:"#fff3cd",errorColor:"#dc3545",errorHover:"#c82333",errorLight:"#f8d7da",infoColor:"#17a2b8",infoHover:"#138496",infoLight:"#d1ecf1",adminTabBg:"#f8f9fa",adminTabActive:"#2a79c9",adminTabHover:"#e3eaf6",tableHeaderBg:"#dfe7f3",tableStripeBg:"#f8fafd",tableBorder:"#d1d1d1",tableHover:"#f0f0f0",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",shadowSm:"0 1px 2px rgba(0, 0, 0, 0.05)",shadowMd:"0 2px 4px rgba(0, 0, 0, 0.1)",shadowLg:"0 4px 6px rgba(0, 0, 0, 0.1)",shadowXl:"0 4px 20px rgba(0, 0, 0, 0.3)",fontFamilyBase:"'Inter', 'Segoe UI', 'Arial', sans-serif",fontSizeXs:"0.75rem",fontSizeSm:"0.875rem",fontSizeBase:"1rem",fontSizeLg:"1.125rem",fontSizeXl:"1.25rem",fontSizeXxl:"1.5rem"},fb={primaryColor:"--primary-color",primaryHover:"--primary-hover",primaryLight:"--primary-light",primaryDark:"--primary-dark",secondaryColor:"--secondary-color",secondaryHover:"--secondary-hover",secondaryLight:"--secondary-light",secondaryDark:"--secondary-dark",bgPrimary:"--bg-primary",bgSecondary:"--bg-secondary",bgTertiary:"--bg-tertiary",bgMuted:"--bg-muted",textPrimary:"--text-primary",textSecondary:"--text-secondary",textMuted:"--text-muted",textInverse:"--text-inverse",borderColor:"--border-color",borderLight:"--border-light",borderDark:"--border-dark",borderFocus:"--border-focus",successColor:"--success-color",successHover:"--success-hover",successLight:"--success-light",warningColor:"--warning-color",warningHover:"--warning-hover",warningLight:"--warning-light",errorColor:"--error-color",errorHover:"--error-hover",errorLight:"--error-light",infoColor:"--info-color",infoHover:"--info-hover",infoLight:"--info-light",adminTabBg:"--admin-tab-bg",adminTabActive:"--admin-tab-active",adminTabHover:"--admin-tab-hover",tableHeaderBg:"--table-header-bg",tableStripeBg:"--table-stripe-bg",tableBorder:"--table-border",tableHover:"--table-hover",borderRadiusSm:"--border-radius-sm",borderRadiusMd:"--border-radius-md",borderRadiusLg:"--border-radius-lg",borderRadiusXl:"--border-radius-xl",shadowSm:"--shadow-sm",shadowMd:"--shadow-md",shadowLg:"--shadow-lg",shadowXl:"--shadow-xl",fontFamilyBase:"--font-family-base",fontSizeXs:"--font-size-xs",fontSizeSm:"--font-size-sm",fontSizeBase:"--font-size-base",fontSizeLg:"--font-size-lg",fontSizeXl:"--font-size-xl",fontSizeXxl:"--font-size-xxl"};function kI(){const t=se({...tu}),e=se(!1),r=se(null),n=se(!1),s=async()=>{if(e.value)return t.value;e.value=!0,r.value=null;try{const m=Qe(Xe,"app_settings","theme"),g=await tr(m);if(g.exists()){const v=g.data();t.value={...tu,...v},console.log("Theme loaded from database:",t.value)}else t.value={...tu},console.log("No saved theme found, using defaults");return n.value=!0,a(t.value),t.value}catch(m){throw r.value=m.message,console.error("Error loading theme:",m),m}finally{e.value=!1}},i=async(m=t.value)=>{e.value=!0,r.value=null;try{const g=Qe(Xe,"app_settings","theme");return await Kt(g,{...m,lastUpdated:new Date().toISOString()}),t.value={...m},a(m),console.log("Theme saved successfully"),!0}catch(g){throw r.value=g.message,console.error("Error saving theme:",g),g}finally{e.value=!1}},a=m=>{const g=document.documentElement;Object.entries(fb).forEach(([v,x])=>{m[v]!==void 0&&g.style.setProperty(x,m[v])})},o=(m,g)=>{t.value[m]=g,a(t.value)},l=async()=>{t.value={...tu},a(t.value),await i(t.value)},c=m=>{a(m)},u=()=>{a(t.value)},f=m=>getComputedStyle(document.documentElement).getPropertyValue(m),h=m=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$|^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$|^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d.]+\s*\)$/.test(m),p=m=>({light:m,dark:m,hover:m});return Ut(()=>{n.value||s()}),{currentTheme:t,loading:e,error:r,isInitialized:n,loadTheme:s,saveTheme:i,applyTheme:a,updateThemeProperty:o,resetTheme:l,previewTheme:c,revertTheme:u,getCssVariableValue:f,validateColor:h,generateColorVariations:p,CSS_VARIABLE_MAP:fb,DEFAULT_THEME:tu}}function lB(){const{loadTheme:t,currentTheme:e,isInitialized:r}=kI();return Ut(async()=>{if(!r.value)try{await t(),console.log("Theme initialized successfully")}catch(n){console.error("Failed to initialize theme:",n)}}),{currentTheme:e,isInitialized:r}}const cB={id:"app"},uB={id:"main-content"},dB={__name:"App",setup(t){const e=se(!1);lB();const r=n=>{n.ctrlKey&&n.shiftKey&&n.key==="D"&&(n.preventDefault(),e.value=!e.value,console.log("Debug Role Switcher:",e.value?"Shown":"Hidden"))};return Ut(()=>{document.addEventListener("keydown",r)}),Na(()=>{document.removeEventListener("keydown",r)}),(n,s)=>{const i=wr("router-view");return B(),V("div",cB,[d("div",uB,[st(i)]),e.value?(B(),Jr(XL,{key:0})):_e("",!0),st(QL),st(oB)])}}},fB="modulepreload",hB=function(t){return"/"+t},hb={},sa=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=hB(l),l in hb)return;hb[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":fB,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function fn(t,e=255){return typeof t!="string"?"":t.trim().replace(/\0/g,"").replace(/[<>'"&]/g,"").substring(0,e)}function pB(t){return typeof t!="string"?"":t.trim().toLowerCase().substring(0,255)}function pb(t,e=0,r=999999){const n=parseFloat(t);return isNaN(n)?0:Math.max(e,Math.min(r,n))}function p0(t,e){return!t||typeof t=="string"&&t.trim()===""?{isValid:!1,error:`${e} is required`}:{isValid:!0}}function mB(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?{isValid:!0}:{isValid:!1,error:"Invalid email format"}}function vd(t,e,r=0,n=255){return typeof t!="string"?{isValid:!1,error:`${e} must be a string`}:t.length<r?{isValid:!1,error:`${e} must be at least ${r} characters`}:t.length>n?{isValid:!1,error:`${e} must be no more than ${n} characters`}:{isValid:!0}}function gB(t){return["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"].includes(t)?{isValid:!0}:{isValid:!1,error:"Invalid role"}}function vB(t,e=[],r=10*1024*1024){return t?e.length>0&&!e.includes(t.type)?{isValid:!1,error:`Invalid file type. Allowed: ${e.join(", ")}`}:t.size>r?{isValid:!1,error:`File too large. Maximum size: ${r/(1024*1024)}MB`}:[/\.exe$/i,/\.bat$/i,/\.cmd$/i,/\.scr$/i,/\.vbs$/i,/\.js$/i,/\.jar$/i].some(s=>s.test(t.name))?{isValid:!1,error:"Suspicious file type detected"}:{isValid:!0}:{isValid:!1,error:"No file selected"}}function Wr(t){if(typeof t!="string")return{isSafe:!0,threats:[]};const e=[];return/<script|javascript:|vbscript:|onload=|onerror=/i.test(t)&&e.push("Script injection attempt"),/(\bunion\b|\bselect\b|\binsert\b|\bupdate\b|\bdelete\b|\bdrop\b).*(\bfrom\b|\binto\b|\bwhere\b)/i.test(t)&&e.push("SQL injection pattern"),/\.\.\/|\.\.\\|%2e%2e%2f|%2e%2e%5c/i.test(t)&&e.push("Path traversal attempt"),/<[^>]*>/i.test(t)&&e.push("HTML injection attempt"),/\0/.test(t)&&e.push("Null byte injection"),{isSafe:e.length===0,threats:e}}const Al={};function ws(t,e=10,r=6e4){const n=Date.now(),s=`${t}_${Math.floor(n/r)}`;return Al[s]||(Al[s]=0),Al[s]++,Al[s]>e?{allowed:!1,error:`Rate limit exceeded. Maximum ${e} requests per ${r/1e3} seconds.`}:(Object.keys(Al).forEach(i=>{const a=parseInt(i.split("_").pop())*r;n-a>r*2&&delete Al[i]}),{allowed:!0})}function DI(t,e={}){const r=[],{isNew:n=!1}=e;if(!t||typeof t!="object")return{isValid:!1,errors:["Invalid student data"]};if(!t.app||!t.app.studentData)return r.push("Student data structure is invalid"),{isValid:!1,errors:r};const s=t.app.studentData;return[{field:"firstName",name:"First Name"},{field:"lastName",name:"Last Name"},{field:"caseManagerId",name:"Case Manager"}].forEach(({field:l,name:c})=>{const u=p0(s[l],c);u.isValid||r.push(u.error)}),[{field:"firstName",name:"First Name",maxLength:100},{field:"lastName",name:"Last Name",maxLength:100},{field:"studentId",name:"Student ID",maxLength:50},{field:"grade",name:"Grade",maxLength:10}].forEach(({field:l,name:c,maxLength:u})=>{if(s[l]){const f=vd(s[l],c,1,u);f.isValid||r.push(f.error)}}),["firstName","lastName","studentId","grade"].forEach(l=>{if(s[l]){const c=Wr(s[l]);c.isSafe||r.push(`Security threat detected in ${l}: ${c.threats.join(", ")}`)}}),t.app.accommodations&&typeof t.app.accommodations!="string"&&t.app.accommodations!==null&&r.push("Accommodations must be encrypted string or null"),t.app.classServices&&typeof t.app.classServices!="string"&&t.app.classServices!==null&&r.push("Class services must be encrypted string or null"),s.plan&&typeof s.plan!="string"&&s.plan!==null&&r.push("Student plan must be encrypted string or null"),{isValid:r.length===0,errors:r}}function xB(t){const e=[];if(!t||typeof t!="object")return{isValid:!1,errors:["Invalid user data"]};const r=p0(t.name,"Name");r.isValid||e.push(r.error);const n=p0(t.email,"Email");n.isValid||e.push(n.error);const s=p0(t.role,"Role");if(s.isValid||e.push(s.error),t.email){const a=mB(t.email);a.isValid||e.push(a.error)}if(t.role){const a=gB(t.role);a.isValid||e.push(a.error)}if(t.name){const a=vd(t.name,"Name",1,100);a.isValid||e.push(a.error)}if(t.email){const a=vd(t.email,"Email",1,255);a.isValid||e.push(a.error)}return["name","email"].forEach(a=>{if(t[a]){const o=Wr(t[a]);o.isSafe||e.push(`Security threat detected in ${a}: ${o.threats.join(", ")}`)}}),{isValid:e.length===0,errors:e}}function PI(t){const e={...t};if(e.app&&e.app.studentData){const r=e.app.studentData;["firstName","lastName","studentId","grade"].forEach(s=>{r[s]&&(r[s]=fn(r[s],100))})}else["firstName","lastName","studentId","grade"].forEach(n=>{e[n]&&(e[n]=fn(e[n],100))});return e}function yB(t){const e={...t};return e.name&&(e.name=fn(e.name,100)),e.email&&(e.email=pB(e.email)),e}const EB=async(t,e,r=100,n=1e3)=>{const s=[];for(let a=0;a<t.length;a+=r)s.push(t.slice(a,a+r));const i=[];for(let a=0;a<s.length;a++)try{const o=await e(s[a]);i.push(o),a<s.length-1&&await new Promise(l=>setTimeout(l,n))}catch(o){throw console.error(`Error in batch ${a+1}:`,o),o}return i},Mc=vB;function ah(t){if(!t||typeof t!="object")return t;if(t.toJSON&&typeof t.toJSON=="function")return t.toJSON();if(Array.isArray(t))return t.map(ah);const e={};for(const[r,n]of Object.entries(t)){if(r.toLowerCase().includes("schedule")&&typeof n=="object"&&n!==null)for(const[s,i]of Object.entries(n))i&&typeof i=="object"&&i.teacherId!==void 0&&(n[s].teacherId=String(i.teacherId));e[r]=ah(n)}return e}function Ma(){const t=se([]);let e=null;async function r(){if(!e)try{const{useGoogleSheetsRealtime:c}=await sa(async()=>{const{useGoogleSheetsRealtime:u}=await Promise.resolve().then(()=>Mle);return{useGoogleSheetsRealtime:u}},void 0);e=c()}catch(c){console.error("Failed to load Google Sheets sync:",c)}return e}async function n(){var f,h,p;const c=await jt(wt(Xe,"students"));t.value=c.docs.map(m=>{const g=m.data(),v=ah(g);return{id:m.id,...v}});const u=t.value.find(m=>m.aeries);u&&(console.log(" useStudents DEBUG - Student with aeries:",u),console.log(" useStudents DEBUG - aeries.schedule:",(f=u.aeries)==null?void 0:f.schedule),console.log(" useStudents DEBUG - aeries.schedule type:",typeof((h=u.aeries)==null?void 0:h.schedule)),(p=u.aeries)!=null&&p.schedule&&console.log(" useStudents DEBUG - schedule keys:",Object.keys(u.aeries.schedule)))}function s(c){t.value=c.map(u=>{const f=ah(u);return{id:u.id,...f}})}async function i(){return(await jt(wt(Xe,"students"))).docs.map(u=>({id:u.id,...u.data()}))}async function a(c,u){await Jd(Qe(Xe,"students",c),u);try{const f=await r();if(f&&f.linkedSheetId.value){const h=t.value.findIndex(p=>p.id===c);h!==-1&&(t.value[h]={...t.value[h],...u}),console.log("Syncing student update to Google Sheets..."),await f.updateSheetData(t.value)}}catch(f){console.error("Failed to sync to Google Sheets:",f)}}async function o(c){await co(Qe(Xe,"students",c));try{const u=await r();u&&u.linkedSheetId.value&&(t.value=t.value.filter(f=>f.id!==c),console.log("Syncing student deletion to Google Sheets..."),await u.updateSheetData(t.value))}catch(u){console.error("Failed to sync to Google Sheets:",u)}}return{students:t,fetchStudents:n,setStudents:s,fetchAllStudents:i,updateStudent:a,deleteStudent:o,deleteAllStudents:async()=>{try{const u=(await jt(wt(Xe,"students"))).docs;return await EB(u,async f=>{const h=cx(Xe);f.forEach(p=>{h.delete(p.ref)}),await h.commit()},50,2e3),{success:!0}}catch(c){throw console.error("Error deleting all students:",c),c}}}}function La(){const t=se({}),e=se([]);async function r(){const a=await jt(wt(Xe,"users")),o={},l=[];a.forEach(c=>{const u=c.data();o[c.id]={id:c.id,...u},l.push({id:c.id,...u}),u.aeriesId&&console.log(" Loaded user with Aeries ID:",{name:u.name,email:u.email,aeriesId:u.aeriesId,id:c.id})}),t.value=o,e.value=l,console.log(" Total users loaded:",l.length),console.log(" Users with Aeries IDs:",l.filter(c=>c.aeriesId).length)}const n=Ae(()=>({teachers:e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)),caseManagers:e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role)),speech:e.value.filter(a=>a.provider==="SLP"),ot:e.value.filter(a=>a.provider==="OT"),mh:e.value.filter(a=>a.provider==="MH"),pt:e.value.filter(a=>a.provider==="PT"),sc:e.value.filter(a=>a.provider==="SC"),tr:e.value.filter(a=>a.provider==="TR"),aud:e.value.filter(a=>a.provider==="AUD"),vi:e.value.filter(a=>a.provider==="VI"),at:e.value.filter(a=>a.provider==="AT"),dhh:e.value.filter(a=>a.provider==="DHH"),om:e.value.filter(a=>a.provider==="O&M"),bis:e.value.filter(a=>a.provider==="BIS"),hn:e.value.filter(a=>a.provider==="HN"),sw:e.value.filter(a=>a.provider==="SW")})),s=Ae(()=>e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role))),i=Ae(()=>e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)));return{users:t,userList:e,fetchUsers:r,caseManagers:s,teacherList:i,userRoles:n}}function bx(){const t=se({}),e=se(!1);async function r(){e.value=!0;try{const h=await jt(wt(Xe,"aideSchedules")),p={};h.forEach(m=>{p[m.id]=m.data()}),t.value=p}catch(h){console.error("Error loading aide assignments:",h),t.value={}}finally{e.value=!1}}async function n(h){if(!h){console.warn("loadAideAssignment called without aideId");return}e.value=!0;try{const p=await tr(Qe(Xe,"aideSchedules",h));p.exists()?t.value[h]=p.data():t.value[h]={classAssignment:{},directAssignment:[]}}catch(p){console.error("Error loading aide assignment:",p),t.value[h]={classAssignment:{},directAssignment:[]}}finally{e.value=!1}}async function s(h,p){try{const m=JSON.parse(JSON.stringify(p));await Kt(Qe(Xe,"aideSchedules",h),m,{merge:!0}),t.value[h]=m}catch(m){throw console.error("Error saving aide assignment:",m),m}}async function i(){try{const h=Object.entries(t.value);for(const[p,m]of h){const g=JSON.parse(JSON.stringify(m));await Kt(Qe(Xe,"aideSchedules",p),g,{merge:!0})}}catch(h){throw console.error("Error saving all aide assignments:",h),h}}function a(h,p){const m=[];return Object.entries(t.value).forEach(([g,v])=>{v.classAssignment&&v.classAssignment[p]&&(Array.isArray(v.classAssignment[p])?v.classAssignment[p]:[v.classAssignment[p]]).includes(h)&&m.push(g)}),m}function o(h){var m;const p=(m=t.value[h])==null?void 0:m.directAssignment;return Array.isArray(p)?p.length>0?p[0]:null:p||null}function l(h){return Object.keys(t.value).find(m=>{var v;const g=(v=t.value[m])==null?void 0:v.directAssignment;return Array.isArray(g)?g.includes(h):g===h})||null}function c(h,p,m){const g=[],v=t.value[h];return v&&((Array.isArray(v.directAssignment)?v.directAssignment:v.directAssignment?[v.directAssignment]:[]).forEach(y=>{if(y){const _=p.find(I=>I.id===y);_&&g.push({..._,assignmentType:"direct"})}}),Object.entries(v.classAssignment||{}).forEach(([y,_])=>{_&&(Array.isArray(_)?_:[_]).forEach(R=>{R&&p.forEach(A=>{const E=f(A);if(E){const T=E[y];if((typeof T=="string"?T:T==null?void 0:T.teacherId)===R){const S=g.findIndex(k=>k.id===A.id);S===-1?g.push({...A,assignmentType:"class",period:y,teacherId:R}):(g[S].assignmentType="both",g[S].period=y,g[S].teacherId=R)}}})})})),g}function u(h,p,m,g){if(!h||!p||!m||!g)return!1;const v=m.find(A=>A.id===p);if(!v)return!1;const x=t.value[h];if(!x)return!1;if((Array.isArray(x.directAssignment)?x.directAssignment:x.directAssignment?[x.directAssignment]:[]).includes(p))return!0;const _=f(v);if(!_)return!1;const I=x.classAssignment||{};return Object.entries(_).some(([A,E])=>{const T=typeof E=="string"?E:E==null?void 0:E.teacherId,b=I[A];return!b||!T?!1:(Array.isArray(b)?b:[b]).includes(T)})}function f(h){var p,m,g,v,x;return h.schedule?h.schedule:(m=(p=h.app)==null?void 0:p.schedule)!=null&&m.periods?h.app.schedule.periods:(v=(g=h.aeries)==null?void 0:g.schedule)!=null&&v.periods?h.aeries.schedule.periods:(x=h.aeries)!=null&&x.schedule?h.aeries.schedule:null}return{aideAssignment:Ae(()=>t.value),loading:Ae(()=>e.value),loadAideAssignments:r,loadAideAssignment:n,saveAideAssignment:s,saveAllAideAssignments:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}function Sx(){const t=se(!1),e=se(""),r=se("");let n,s,i,a;try{n=nc(),s=Ta(n,"getStudentFeedback"),i=Ta(n,"createFeedbackFormSheet"),a=Ta(n,"createFeedbackFormSheetWithUserAuth")}catch(I){console.warn("Firebase Functions not available:",I),s=()=>Promise.reject(new Error("Functions not available")),i=()=>Promise.reject(new Error("Functions not available")),a=()=>Promise.reject(new Error("Functions not available"))}const o=wt(Xe,"feedbackForms"),l=se(!1),c=se([]);let u;const f=Ae(()=>{var R;return(((R=c.value)==null?void 0:R.filter(A=>A.active!==!1))||[]).sort((A,E)=>{var S,k;const T=(S=A.createdAt)!=null&&S.seconds?new Date(A.createdAt.seconds*1e3):new Date(A.createdAt);return((k=E.createdAt)!=null&&k.seconds?new Date(E.createdAt.seconds*1e3):new Date(E.createdAt))-T})}),h=async I=>{try{t.value=!0,e.value="",console.log(" Creating Google Sheet with personal account for form:",I.title);const R=await i({title:I.title,description:I.description,formUrl:I.formUrl,studentId:I.studentId||null,studentName:I.studentName||null});if(!R.data.success)throw new Error("Failed to create Google Sheet: "+R.data.message);console.log(" Google Sheet created:",R.data.spreadsheetUrl);const A={title:I.title,description:I.description,formUrl:I.formUrl,spreadsheetId:R.data.spreadsheetId,spreadsheetUrl:R.data.spreadsheetUrl,userDriveId:R.data.userDriveId,parentFolderId:R.data.parentFolderId,active:!0,createdAt:new Date,createdBy:I.createdBy},E=Qe(o);return await Kt(E,A),r.value="Feedback form and Google Sheet created successfully!",{id:E.id,...A}}catch(R){throw console.error("Error creating feedback form:",R),R.message.includes("storage quota exceeded")||R.message.includes("Service account storage quota exceeded")?R.value=' Cannot create Google Sheet: Service account has no storage quota. Please use the "Test with Personal Account" button in Google Drive Setup to use your personal Google account instead.':R.message.includes("permission")||R.message.includes("access")?R.value=" Permission denied: Please ensure the folder is shared with the service account or use your personal Google account.":R.value=R.message,R}finally{t.value=!1}},p=async(I,R)=>{try{t.value=!0,e.value="";const A=Qe(o,I);await Kt(A,{...R,updatedAt:new Date},{merge:!0}),r.value="Feedback form updated successfully!"}catch(A){throw console.error("Error updating feedback form:",A),e.value=A.message,A}finally{t.value=!1}},m=async I=>{try{t.value=!0,e.value="";const R=Qe(o,I);await co(R),r.value="Feedback form deleted successfully!"}catch(R){throw console.error("Error deleting feedback form:",R),e.value=R.message,R}finally{t.value=!1}},g=()=>{e.value="",r.value=""},v=I=>{const R=I.match(/\/forms\/d\/([a-zA-Z0-9-_]+)/);return R?R[1]:null},x=()=>{try{u=yc(o,I=>{c.value=I.docs.map(R=>({id:R.id,...R.data()})),l.value=!1},I=>{console.warn("Error listening to feedback forms:",I),l.value=!1})}catch(I){console.warn("Error initializing Firestore listeners:",I),l.value=!1}},y=()=>{u&&u()};return Ut(()=>{x()}),Na(()=>{y()}),{isLoading:t,error:e,successMessage:r,formsLoading:l,feedbackForms:c,activeForms:f,createFeedbackForm:h,updateFeedbackForm:p,deleteFeedbackForm:m,clearMessages:g,extractFormId:v,createFeedbackFormWithUserAuth:async(I,R)=>{try{t.value=!0,e.value="",console.log(" Creating Google Sheet with personal account for form:",I.title);const A=await a({title:I.title,description:I.description,formUrl:I.formUrl,studentId:I.studentId||null,studentName:I.studentName||null,accessToken:R});if(!A.data.success)throw new Error("Failed to create Google Sheet: "+A.data.message);console.log(" Google Sheet created with personal account:",A.data.spreadsheetUrl);const E={title:I.title,description:I.description,formUrl:I.formUrl,spreadsheetId:A.data.spreadsheetId,spreadsheetUrl:A.data.spreadsheetUrl,driveType:"personal",active:!0,createdAt:new Date,createdBy:I.createdBy},T=Qe(o);return await Kt(T,E),r.value="Feedback form and Google Sheet created successfully in your personal Google Drive!",{id:T.id,...E}}catch(A){throw console.error("Error creating feedback form with user auth:",A),A.value=A.message,A}finally{t.value=!1}}}}function _B(){const t=ga(),e=se(!1),r=se(null),n=se([]),s=se(0),i=Ae(()=>t.user),a=Ae(()=>{var _;return(_=t.user)==null?void 0:_.role}),o=Ae(()=>{var _;return(_=t.user)==null?void 0:_.uid}),l=async()=>{console.log(" Admin query: Loading all students - START"),console.log(" Admin query: currentUser:",i.value),console.log(" Admin query: currentRole:",a.value),console.log(" Admin query: currentUserId:",o.value);try{const _=ur(wt(Xe,"students"),dn("app.studentData.lastName","asc"));console.log(" Admin query created:",_);const I=await jt(_);console.log(" Admin query snapshot:",I.size,"documents");const R=I.docs.map(A=>({id:A.id,...A.data()}));if(console.log(" Admin query result:",R.length,"students"),R.length>0)console.log(" First student structure:",R[0]);else{console.log(" Admin query: NO STUDENTS FOUND - checking collection directly");const A=ur(wt(Xe,"students")),E=await jt(A);console.log(" Simple query found:",E.size,"documents")}return R}catch(_){console.error(" Admin query error:",_),console.error(" Admin query error details:",_.message,_.code);try{console.log(" Trying fallback query without ordering...");const I=ur(wt(Xe,"students")),R=await jt(I);console.log(" Fallback query found:",R.size,"documents");const A=R.docs.map(E=>({id:E.id,...E.data()}));return console.log(" Fallback query returning:",A.length,"students"),A}catch(I){return console.error(" Fallback query also failed:",I),console.error(" Fallback query error details:",I.message,I.code),[]}}},c=async()=>{console.log(" 504 Admin query: Loading only IEP and 504 students");try{const _=ur(wt(Xe,"students"),jr("app.studentData.plan","in",["IEP","504"]));return(await jt(_)).docs.map(R=>({id:R.id,...R.data()}))}catch(_){return console.error(" 504 Admin query error:",_),[]}},u=async _=>{console.log(" Security: Loading students for case manager using staffIds:",_);try{const I=ur(wt(Xe,"students"),jr("app.staffIds","array-contains",_),dn("app.studentData.lastName","asc")),A=(await jt(I)).docs.map(E=>({id:E.id,...E.data()}));return console.log(" Security: Case manager has access to",A.length,"students via staffIds"),console.log(" Security: CM accessible students:",A.map(E=>{var T,b,S,k;return`${(b=(T=E.app)==null?void 0:T.studentData)==null?void 0:b.firstName} ${(k=(S=E.app)==null?void 0:S.studentData)==null?void 0:k.lastName}`}).slice(0,5)),A}catch(I){return console.error(" Security: Error loading case manager students:",I),[]}},f=async _=>{console.log(" Teacher query: Loading students for teacher",_);try{const I=ur(wt(Xe,"students"),jr("app.staffIds","array-contains",_),dn("app.studentData.lastName","asc")),R=await jt(I);return console.log(" Teacher query: Found",R.size,"students with teacher in staffIds"),R.docs.map(A=>({id:A.id,...A.data()}))}catch(I){return console.error(" Security: Error loading teacher students:",I),[]}},h=async _=>{var I,R,A,E;console.log(" Service Provider query: Loading students for provider",_),console.log(" Service Provider query: userId type:",typeof _),console.log(" Service Provider query: userId value:",JSON.stringify(_));try{const T=ur(wt(Xe,"students"),jr("app.staffIds","array-contains",_));console.log(" Service Provider query: Executing staffIds query...");const b=await jt(T);console.log(" Service Provider query: Success! Found",b.size,"students");const S=b.docs.map(k=>({id:k.id,...k.data()}));return S.sort((k,w)=>{var F,P,O,M;const D=((P=(F=k.app)==null?void 0:F.studentData)==null?void 0:P.lastName)||"",N=((M=(O=w.app)==null?void 0:O.studentData)==null?void 0:M.lastName)||"";return D.localeCompare(N)}),S}catch(T){console.error(" Service Provider query FAILED:",T),console.error(" Error code:",T.code),console.error(" Error message:",T.message),console.error(" Full error object:",T);const b=Wo();return console.error(" Current auth state:",{uid:(I=b.currentUser)==null?void 0:I.uid,email:(R=b.currentUser)==null?void 0:R.email,customClaims:"Check in browser dev tools"}),console.error(" Auth mismatch check:",{queryUserId:_,authUid:(A=b.currentUser)==null?void 0:A.uid,match:_===((E=b.currentUser)==null?void 0:E.uid)}),[]}},p=async _=>{var I,R,A,E;console.log(" Paraeducator query: Loading students for aide",_),console.log(" Paraeducator query: userId type:",typeof _),console.log(" Paraeducator query: userId value:",JSON.stringify(_));try{console.log(" Paraeducator query: Trying staffIds approach first...");try{const N=ur(wt(Xe,"students"),jr("app.staffIds","array-contains",_),dn("app.studentData.lastName","asc")),F=await jt(N);if(console.log(" Paraeducator query: staffIds approach found",F.size,"students"),F.size>0){const P=F.docs.map(O=>({id:O.id,...O.data()}));return console.log(" Paraeducator query: SUCCESS with staffIds approach"),P}}catch(N){console.log(" Paraeducator query: staffIds approach failed:",N.message)}console.log(" Paraeducator query: Using aideSchedules fallback...");const T=await tr(Qe(Xe,"aideSchedules",_));if(!T.exists())return console.log(" Paraeducator query: No aide schedule document found for",_),[];const b=T.data();console.log(" Paraeducator query: Found aide data:",b);let S=[];if(b.studentIds&&Array.isArray(b.studentIds)?(S=b.studentIds,console.log(" Paraeducator query: Using studentIds array:",S)):b.directAssignment&&(S=Array.isArray(b.directAssignment)?b.directAssignment:[b.directAssignment],console.log(" Paraeducator query: Using directAssignment as fallback:",S)),S.length===0)return console.log(" Paraeducator query: No student assignments found for aide",_),[];console.log(" Paraeducator query: Fetching",S.length,"assigned students individually...");const k=S.map(async N=>{try{const F=await tr(Qe(Xe,"students",N));return F.exists()?{id:F.id,...F.data()}:null}catch(F){return console.warn(" Paraeducator query: Failed to fetch student",N,":",F.message),null}}),D=(await Promise.all(k)).filter(N=>N!==null);return D.sort((N,F)=>{var M,U,z,j;const P=((U=(M=N.app)==null?void 0:M.studentData)==null?void 0:U.lastName)||"",O=((j=(z=F.app)==null?void 0:z.studentData)==null?void 0:j.lastName)||"";return P.localeCompare(O)}),console.log(" Paraeducator query: Successfully fetched",D.length,"students"),D}catch(T){console.error(" Paraeducator query FAILED:",T),console.error(" Error code:",T.code),console.error(" Error message:",T.message),console.error(" Full error object:",T);const b=Wo();return console.error(" Current auth state:",{uid:(I=b.currentUser)==null?void 0:I.uid,email:(R=b.currentUser)==null?void 0:R.email,customClaims:"Check in browser dev tools"}),console.error(" Auth mismatch check:",{queryUserId:_,authUid:(A=b.currentUser)==null?void 0:A.uid,match:_===((E=b.currentUser)==null?void 0:E.uid)}),[]}},m=async()=>{console.log(" Testing query: Loading students with testing flags");const _=ur(wt(Xe,"students"),jr("app.flags.flag2","==",!0),dn("app.studentData.lastName","asc")),I=ur(wt(Xe,"students"),jr("app.flags.separateSetting","==",!0),dn("app.studentData.lastName","asc")),[R,A]=await Promise.all([jt(_),jt(I)]),E=R.docs.map(S=>({id:S.id,...S.data()})),T=A.docs.map(S=>({id:S.id,...S.data()})),b=[...E];return T.forEach(S=>{b.find(k=>k.id===S.id)||b.push(S)}),b.sort((S,k)=>{var N,F,P,O;const w=((F=(N=S.app)==null?void 0:N.studentData)==null?void 0:F.lastName)||"",D=((O=(P=k.app)==null?void 0:P.studentData)==null?void 0:O.lastName)||"";return w.localeCompare(D)})},g=async(_={})=>{var I,R;if(console.log(" loadStudents called - DEBUG AUTH STATE:"),console.log("  currentUserId.value:",o.value),console.log("  currentRole.value:",a.value),console.log("  authStore.user:",t.user),console.log("  authStore.user?.uid:",(I=t.user)==null?void 0:I.uid),console.log("  authStore.user?.role:",(R=t.user)==null?void 0:R.role),!o.value||!a.value)return console.error(" No authenticated user or role - FAILING AUTH CHECK"),console.error("  currentUserId.value is:",o.value),console.error("  currentRole.value is:",a.value),r.value="Authentication required",[];e.value=!0,r.value=null;try{let A=[];switch(console.log(" ROUTING to query based on role:",a.value),console.log(" Available role cases: admin, administrator, sped_chair, administrator_504_CM, case_manager, teacher, service_provider, paraeducator"),a.value){case"admin":case"administrator":case"sped_chair":A=await l();break;case"administrator_504_CM":A=await l();break;case"case_manager":console.log(" CALLING getCaseManagerStudents with userId:",o.value),A=await u(o.value),console.log(" getCaseManagerStudents COMPLETED, returned:",A.length,"students");break;case"teacher":A=await f(o.value);break;case"service_provider":A=await h(o.value);break;case"paraeducator":A=await p(o.value);break;default:return console.error(" Unknown role:",a.value),r.value="Invalid user role",[]}return _.testingOnly&&(A=await m()),n.value=A,s.value=A.length,console.log(` Loaded ${A.length} students for ${a.value}`),A}catch(A){return console.error(" Error loading students:",A),r.value=A.message||"Failed to load students",[]}finally{e.value=!1}},v=async _=>{if(!_)throw new Error("Student ID is required");if(!o.value||!a.value)throw new Error("Authentication required");e.value=!0,r.value=null;try{const I=await tr(Qe(Xe,"students",_));if(!I.exists())throw new Error("Student not found");const R={id:I.id,...I.data()};if(!await x(R,o.value,a.value))throw new Error("Access denied to this student");return R}catch(I){throw console.error(" Error getting student:",I),r.value=I.message,I}finally{e.value=!1}},x=async(_,I,R)=>{var A,E,T,b,S,k,w;if(!_||!I||!R)return!1;if(["admin","administrator","administrator_504_CM","sped_chair"].includes(R))return!0;if(R==="case_manager")return((E=(A=_.app)==null?void 0:A.studentData)==null?void 0:E.caseManagerId)===I;if(R==="teacher"){if(!((b=(T=_.app)==null?void 0:T.schedule)!=null&&b.periods))return!1;const D=_.app.schedule.periods,N=Object.values(D);return N.includes(I)?!0:N.some(F=>{var P;return typeof F=="object"&&F!==null?F.teacherId===I||((P=F.coTeaching)==null?void 0:P.caseManagerId)===I:!1})}if(R==="service_provider"){if((S=_.app)!=null&&S.providers&&Object.values(_.app.providers).includes(I))return!0;if((w=(k=_.app)==null?void 0:k.schedule)!=null&&w.periods){const D=_.app.schedule.periods,N=Object.values(D);return N.includes(I)?!0:N.some(F=>{var P;return typeof F=="object"&&F!==null?F.teacherId===I||((P=F.coTeaching)==null?void 0:P.caseManagerId)===I:!1})}}return!1},y=async(_=50,I=null)=>{if(!o.value||!a.value)throw new Error("Authentication required");e.value=!0,r.value=null;try{let R=ur(wt(Xe,"students"),dn("app.studentData.lastName","asc"),Ns(_));I&&(R=ur(R,th(I))),a.value==="case_manager"&&(R=ur(wt(Xe,"students"),jr("app.studentData.caseManagerId","==",o.value),dn("app.studentData.lastName","asc"),Ns(_)),I&&(R=ur(R,th(I))));const A=await jt(R);return{students:A.docs.map(T=>({id:T.id,...T.data()})),lastDoc:A.docs[A.docs.length-1],hasMore:A.docs.length===_}}catch(R){throw console.error(" Error loading paginated students:",R),r.value=R.message,R}finally{e.value=!1}};return{students:Ae(()=>n.value),loading:Ae(()=>e.value),error:Ae(()=>r.value),totalCount:Ae(()=>s.value),loadStudents:g,getStudent:v,verifyStudentAccess:x,loadStudentsPaginated:y,getAdminStudents:l,getAdmin504Students:c,getCaseManagerStudents:u,getTeacherStudents:f,getServiceProviderStudents:h,getParaeducatorStudents:p,getTestingStudents:m}}function bB(t,e){const r={isSecure:!0,violations:[],summary:"",studentCount:t.length,authorizedCount:0,unauthorizedCount:0};return!e||!e.role?(r.isSecure=!1,r.violations.push("No user or role provided"),r):(t.forEach((n,s)=>{var a,o,l,c;SB(n,e)?r.authorizedCount++:(r.unauthorizedCount++,r.isSecure=!1,r.violations.push({studentIndex:s,studentName:`${(o=(a=n.app)==null?void 0:a.studentData)==null?void 0:o.firstName} ${(c=(l=n.app)==null?void 0:l.studentData)==null?void 0:c.lastName}`,studentId:n.id,reason:TB(n,e)}))}),r.summary=`User ${e.role} (${e.uid}) has access to ${r.authorizedCount}/${r.studentCount} students`,r.isSecure||(r.summary+=`. SECURITY VIOLATION: ${r.unauthorizedCount} unauthorized students accessible!`),r)}function SB(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"admin":case"administrator":case"administrator_504_CM":case"sped_chair":return!0;case"case_manager":return((i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===n;case"teacher":const f=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(f).includes(n);case"service_provider":const h=((l=t.app)==null?void 0:l.providers)||{},p=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},m=Object.values(h).includes(n),g=Object.values(p).includes(n);return m||g;case"paraeducator":return!0;default:return!1}}function TB(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"case_manager":const f=(i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId;return`Case manager ${n} is not assigned to student (assigned to: ${f})`;case"teacher":const h=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{},p=Object.values(h);return`Teacher ${n} does not teach this student (teachers: ${p.join(", ")})`;case"service_provider":const m=((l=t.app)==null?void 0:l.providers)||{},g=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},v=Object.values(m).filter(y=>y),x=Object.values(g);return`Service provider ${n} is not assigned to student (providers: ${v.join(", ")}, teachers: ${x.join(", ")})`;case"paraeducator":return null;default:return`Unknown role: ${r}`}}function AB(t){t.isSecure?console.log(" SECURITY TEST PASSED:",t.summary):(console.error(" SECURITY TEST FAILED:",t.summary),console.error("Violations:",t.violations))}function mb(t,e){const r=bB(t,e);return AB(r),r}const RI=(t,e)=>{console.log(` DEBUG: Schedule Operation - ${t}:`,e)};function FI(t){return RI("getTeacherIdFromPeriod",{periodData:t,type:typeof t}),t?typeof t=="string"?t:t.teacherId||null:null}function Sp(t){var e;return RI("getCoTeachingCaseManagerFromPeriod",{periodData:t}),!t||typeof t!="object"?null:((e=t.coTeaching)==null?void 0:e.caseManagerId)||null}function wB(t,e={}){if(!t||!t.periods)return[];const r=new Set;return Object.values(t.periods).forEach(n=>{const s=FI(n);s&&r.add(s);const i=Sp(n);if(i){const a=e[i];a&&(a.role==="teacher"||a.roles&&a.roles.includes("teacher"))&&r.add(i)}}),Array.from(r)}function CB(t){if(!t||!t.periods)return[];const e=new Set;return Object.values(t.periods).forEach(r=>{const n=Sp(r);n&&e.add(n)}),Array.from(e)}function IB(t,e){var r,n;return!((n=(r=t.app)==null?void 0:r.schedule)!=null&&n.periods)||!e?!1:Object.values(t.app.schedule.periods).some(s=>Sp(s)===e)}function kB(){const t=Si(),e=ga(),{students:r,setStudents:n}=Ma(),{users:s,userList:i,fetchUsers:a,caseManagers:o,teacherList:l,userRoles:c}=La(),{loadAideAssignment:u,loadAideAssignments:f,shouldAideSeeStudent:h,aideAssignment:p}=bx(),{feedbackForms:m,formsLoading:g}=Sx(),{loadStudents:v}=_B(),x=se(!1),y=se(null),_=Ae(()=>e.currentUser),I=Ae(()=>{var F;const N=(F=_.value)==null?void 0:F.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(N)}),R=Ae(()=>{var N;return["case_manager","administrator_504_CM","sped_chair"].includes((N=_.value)==null?void 0:N.role)}),A=Ae(()=>s.value||{}),E=Ae(()=>{var N;return((N=i.value)==null?void 0:N.filter(F=>F.role==="paraeducator"))||[]}),T=async()=>{var N,F;console.log(" useStudentData: fetchData() called"),x.value=!0,y.value=null;try{console.log(" useStudentData: About to fetchUsers()..."),await a(),console.log(" useStudentData: fetchUsers() completed");const P=_.value;if(console.log(" useStudentData: Checking user for loadStudents call:",P),P){console.log(" Security: Fetching students for user role:",P.role),console.log(" useStudentData: About to call loadStudents()...");const M=await v();console.log(" useStudentData: loadStudents() returned:",M.length,"students"),n(M);const U=mb(M,P);U.isSecure||console.error(" SECURITY VIOLATION DETECTED:",U.violations)}else console.log(" Security: No user found - setting empty student array"),n([]);const O=(N=_.value)==null?void 0:N.role;if(["admin","administrator","administrator_504_CM","sped_chair"].includes(O))await f();else if(O==="paraeducator"&&_.value.uid){console.log(" useStudentData: Loading individual aide assignment for paraeducator:",_.value.uid),await u(_.value.uid);const M=Qe(Xe,"aideSchedules",_.value.uid),U=yc(M,async z=>{if(z.exists()){console.log(" useStudentData: Aide schedule updated, reloading students..."),await u(_.value.uid);const j=await v();n(j)}});Na(()=>U())}console.log(" Security: Loaded",r.value.length,"students for",(F=_.value)==null?void 0:F.role),console.log("StudentsView - loaded users:",Object.keys(s.value||{}).length,"users")}catch(P){console.error("Error fetching data:",P),y.value=P.message||"Failed to load data"}finally{x.value=!1}},b=N=>r.value.find(F=>F.id===N)||{},S=N=>{const F=s.value[N];return F&&(F.name||F.email)||N},k=N=>{if(!N)return"N/A";const F=s.value[N];return F&&(F.name||F.email)||N},w=N=>{var F,P;return((P=(F=N.app)==null?void 0:F.studentData)==null?void 0:P.caseManagerId)||N.caseManagerId||N.casemanager_id},D=N=>{var F,P,O,M,U;return N.schedule?N.schedule:(P=(F=N.app)==null?void 0:F.schedule)!=null&&P.periods?N.app.schedule.periods:(M=(O=N.aeries)==null?void 0:O.schedule)!=null&&M.periods?N.aeries.schedule.periods:(U=N.aeries)!=null&&U.schedule?N.aeries.schedule:null};return Ut(()=>{console.log(" useStudentData: onMounted triggered, calling fetchData..."),T()}),Vt(()=>{var N;return(N=_.value)==null?void 0:N.role},async(N,F)=>{if(N&&N!==F){console.log(" Security: User role changed from",F,"to",N,"- reloading students");const P=_.value;if(console.log(" useStudentData: Role watcher - checking user:",P),P){console.log(" useStudentData: Role watcher - about to call loadStudents()...");const O=await v();console.log(" useStudentData: Role watcher - loadStudents() returned:",O.length,"students"),n(O);const M=mb(O,P);M.isSecure||console.error(" SECURITY VIOLATION DETECTED:",M.violations),console.log(" Security: Reloaded",O.length,"students for role",N)}}},{immediate:!1}),{isLoading:x,error:y,students:r,userMap:s,userList:i,userMapObj:A,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:p,feedbackForms:m,formsLoading:g,paraeducators:E,currentUser:_,isAdmin:I,showProviderView:R,fetchData:T,getStudentById:b,getUserName:S,getCaseManagerName:k,getCaseManagerId:w,getSchedule:D,shouldAideSeeStudent:h,getTeacherIdFromPeriod:FI,getCoTeachingCaseManagerFromPeriod:Sp,getAllTeacherIdsFromSchedule:wB,getCoTeachingCaseManagersFromSchedule:CB,isCoTeachingCaseManager:IB,router:t}}function dt(t,e,r=""){const n=(l,c)=>c.split(".").reduce((u,f)=>u&&u[f]!==void 0?u[f]:null,l),s=n(t.overrides,e);if(t.overrides&&s!=null&&s!=="")return s;if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const c=n(t.app,`studentData.${e}`);if(c!=null&&c!=="")return c}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const c=n(t.app,`dates.${e}`);if(c!=null&&c!=="")return c}if(["instruction","assessment"].includes(e)){const c=n(t.app,`accommodations.${e}`);if(c!=null&&c!=="")return c}const l=n(t.app,e);if(l!=null&&l!=="")return l}const i=n(t.aeries,e);if(t.aeries&&i!=null&&i!=="")return i;const a=n(t.seis,e);if(t.seis&&a!=null&&a!=="")return a;const o=n(t,e);return o!=null&&o!==""?o:r}function ru(t,e){const r=(o,l)=>l.split(".").reduce((c,u)=>c&&c[u]!==void 0?c[u]:null,o),n=r(t.overrides,e);if(t.overrides&&n!=null&&n!=="")return"Override";if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const l=r(t.app,`studentData.${e}`);if(l!=null&&l!=="")return"App"}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const l=r(t.app,`dates.${e}`);if(l!=null&&l!=="")return"App"}if(["instruction","assessment"].includes(e)){const l=r(t.app,`accommodations.${e}`);if(l!=null&&l!=="")return"App"}const o=r(t.app,e);if(o!=null&&o!=="")return"App"}const s=r(t.aeries,e);if(t.aeries&&s!=null&&s!=="")return"Aeries";const i=r(t.seis,e);if(t.seis&&i!=null&&i!=="")return"SEIS";const a=r(t,e);return a!=null&&a!==""?"Top-level":""}function DB(t){return t?`<ul class="bullet-list">${t.split(/\n|\r|\d+\.\s+|\-\s+|;/).map(r=>r.trim()).filter(Boolean).map(r=>`<li>${r}</li>`).join("")}</ul>`:"<div></div>"}function PB(t){const{students:e,currentUser:r,shouldAideSeeStudent:n,userMap:s,getCaseManagerId:i,getSchedule:a,aideAssignment:o}=t,l=se(!1),c=se([]),u=xs({sortBy:"firstName",cm:"all",teacher:"all",paraeducator:"all",plan:"all",search:"",providerView:"all",viewMode:"list"});let f=null;const h=()=>{f&&clearTimeout(f),f=setTimeout(()=>{v()},300)},p=()=>{l.value=!l.value},m=()=>{u.sortBy="firstName",u.cm="all",u.teacher="all",u.paraeducator="all",u.plan="all",u.search="",u.providerView="all",u.viewMode="list",v()},g=()=>({paraeducator:u.paraeducator,teacher:u.teacher}),v=(x=u)=>{var R,A,E,T;console.log(" FILTER DEBUG: applyFilters called with students.value.length:",e.value.length),console.log(" FILTER DEBUG: currentUser:",(R=r.value)==null?void 0:R.role,(A=r.value)==null?void 0:A.uid);let y=e.value;const _=(E=r.value)==null?void 0:E.role,I=["admin","administrator"];if(console.log(" FILTER DEBUG: Provider view filtering check:",{userRole:_,providerView:x.providerView,shouldSkip:I.includes(_),resultLengthBefore:y.length}),!I.includes(_)&&x.providerView==="case_manager"?(console.log(" FILTER DEBUG: Applying case_manager filter"),y=y.filter(b=>{var S;return i(b)===((S=r.value)==null?void 0:S.uid)}),console.log(" FILTER DEBUG: After case_manager filter:",y.length)):!I.includes(_)&&x.providerView==="service_provider"?(console.log(" FILTER DEBUG: Applying service_provider filter"),y=y.filter(b=>{var N;const S=a(b),k=S?Object.entries(S).some(([F,P])=>{var O,M;return typeof P=="string"?P===((O=r.value)==null?void 0:O.uid):P&&typeof P=="object"?P.teacherId===((M=r.value)==null?void 0:M.uid):!1}):!1,w=(b.services||[]).some(F=>{var P;return F.includes((P=r.value)==null?void 0:P.uid)}),D=i(b)!==((N=r.value)==null?void 0:N.uid);return(k||w)&&D}),console.log(" FILTER DEBUG: After service_provider filter:",y.length)):console.log(" FILTER DEBUG: Skipping provider view filtering for role:",_),((T=r.value)==null?void 0:T.role)==="paraeducator"&&console.log(" FILTER DEBUG: Paraeducator - using database-filtered students, no additional filtering"),x.search){const b=x.search.toLowerCase();y=y.filter(S=>{const k=dt(S,"firstName")||"",w=dt(S,"lastName")||"";return`${k} ${w}`.toLowerCase().includes(b)})}if(x.cm&&x.cm!=="all"&&(y=y.filter(b=>i(b)===x.cm)),x.teacher&&x.teacher!=="all"&&(y=y.filter(b=>{const S=a(b);return S?Object.entries(S).some(([k,w])=>typeof w=="string"?w===x.teacher:w&&typeof w=="object"?w.teacherId===x.teacher:!1):!1})),x.paraeducator&&x.paraeducator!=="all"){console.log(" FILTER DEBUG: Applying paraeducator filter for:",x.paraeducator);const b=o.value[x.paraeducator];if(b){console.log(" FILTER DEBUG: Found aide data:",b);let S=[];b.studentIds&&Array.isArray(b.studentIds)?(S=b.studentIds,console.log(" FILTER DEBUG: Using studentIds array:",S)):b.directAssignment&&(S=Array.isArray(b.directAssignment)?b.directAssignment:[b.directAssignment],console.log(" FILTER DEBUG: Using directAssignment as fallback:",S)),y=y.filter(k=>S.includes(k.id)),console.log(" FILTER DEBUG: After paraeducator filter:",y.length,"students")}else console.log(" FILTER DEBUG: No aide data found for:",x.paraeducator),y=[]}x.plan&&x.plan!=="all"&&(y=y.filter(b=>dt(b,"plan")===x.plan)),x.sortBy&&y.sort((b,S)=>{const k=dt(b,x.sortBy)||"",w=dt(S,x.sortBy)||"";if(["reviewDate","reevalDate","meetingDate"].includes(x.sortBy)){const D=k?new Date(k).getTime():0,N=w?new Date(w).getTime():0;return D-N}return k.toString().toLowerCase().localeCompare(w.toString().toLowerCase())}),c.value=y,console.log(" FILTER DEBUG: applyFilters completed. filteredStudents.value.length:",c.value.length)};return Vt(()=>[e.value,r.value],()=>{console.log(" FILTER DEBUG: Watcher triggered. students.value.length:",e.value.length),e.value.length>0?(console.log(" FILTER DEBUG: Calling applyFilters from watcher"),v()):console.log(" FILTER DEBUG: No students to filter")},{deep:!0}),{showFilters:l,filteredStudents:c,currentFilters:u,toggleFilters:p,clearFilters:m,applyFilters:v,debouncedApplyFilters:h,getCurrentFilters:g}}const m0={grades:[],classServices:[{name:"SDC",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Co-teach",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"RSP",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Directed Studies",subcategories:["Directed Studies"],enabledSubcategories:["Directed Studies"]},{name:"FA",subcategories:["FA"],enabledSubcategories:["FA"]}],sdcSubcategories:[],customClassServices:[],serviceProviders:["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],customServiceProviders:[],numPeriods:7,periodLabels:["1","2","3","4","5","6","sh"]},Xs=se({...m0}),xa=se(!1),Fi=se(null);let nu=!1;function Ws(){const t=Qe(Xe,"app_settings","global"),e=async()=>{if(xa.value)return new Promise(s=>{const i=Vt(xa,a=>{a||(i(),s(Xs.value))})});if(nu&&!Fi.value)return Xs.value;xa.value=!0,Fi.value=null;try{const s=await tr(t);return s.exists()?(Xs.value=s.data(),console.log("useAppSettings: Loaded existing settings:",Xs.value)):(Xs.value={...m0},console.log("useAppSettings: No existing settings, using defaults:",Xs.value)),nu=!0,Xs.value}catch(s){throw Fi.value=s.message,console.error("useAppSettings: Error loading settings:",s),s}finally{xa.value=!1}},r=async s=>{xa.value=!0,Fi.value=null;try{console.log("useAppSettings: Saving settings:",s),await Kt(t,s),console.log("useAppSettings: Settings saved successfully"),Xs.value={...s},nu=!0}catch(i){throw Fi.value=i.message,console.error("useAppSettings: Error saving settings:",i),i}finally{xa.value=!1}},n=async()=>{xa.value=!0,Fi.value=null;try{await Kt(t,{...m0}),Xs.value={...m0},nu=!0}catch(s){throw Fi.value=s.message,s}finally{xa.value=!1}};return!nu&&!xa.value&&e(),Vt(Xs,s=>{console.log("appSettings changed:",s)},{deep:!0}),{appSettings:Xs,loadAppSettings:e,saveAppSettings:r,resetAppSettings:n,loading:xa,error:Fi}}function mo(){const{appSettings:t}=Ws(),e=Ae(()=>{var l,c,u,f;if(console.log(" usePeriodLabels: appSettings.value:",t.value),console.log(" usePeriodLabels: periodLabels:",(l=t.value)==null?void 0:l.periodLabels),console.log(" usePeriodLabels: numPeriods:",(c=t.value)==null?void 0:c.numPeriods),(u=t.value)!=null&&u.periodLabels&&((f=t.value)!=null&&f.numPeriods)){const h=t.value.periodLabels.slice(0,t.value.numPeriods);return console.log(" usePeriodLabels: returning labels:",h),h}const o=["1","2","3","4","5","6","7"];return console.log(" usePeriodLabels: returning fallback labels:",o),o}),r=o=>{const l=parseInt(o);if(!l||l<1)return`Period ${o}`;const c=l-1,u=e.value[c]||`Period ${l}`;return console.log(` getLabel(${o}) -> "${u}" (index: ${c}, labels:`,e.value,")"),u},n=o=>{const l=e.value.findIndex(c=>c===o);return l!==-1?l+1:null},s=Ae(()=>{var l;const o=((l=t.value)==null?void 0:l.numPeriods)||7;return Array.from({length:o},(c,u)=>u+1)}),i=Ae(()=>{const o={};return e.value.forEach((l,c)=>{o[l]=c+1}),o}),a=Ae(()=>{const o={};return e.value.forEach((l,c)=>{o[c+1]=l}),o});return{labels:e,getLabel:r,getNumber:n,numericPeriods:s,labelToNumberMap:i,numberToLabelMap:a}}function RB(t,e){const{students:r,userMapObj:n,currentUser:s,getCaseManagerId:i,getSchedule:a,getUserName:o,formatDate:l}=t,{getLabel:c}=mo(),{filteredStudents:u,currentFilters:f,applyFilters:h}=e,p=(F,P)=>{if(!F)return{periods:{},isTeacher:!1,isCoTeacher:!1};let O=!1,M=!1;const U={};return Object.entries(F).forEach(([z,j])=>{const H=typeof j=="string"?j:j==null?void 0:j.teacherId,W=typeof j=="object"?j==null?void 0:j.coTeaching:null,K=W==null?void 0:W.caseManagerId;U[z]={teacherId:H,coTeaching:W,coTeachingCM:K,teacherName:o(H),coTeacherName:K?o(K):null,label:c(z)},H===P&&(O=!0),K===P&&(M=!0)}),{periods:U,isTeacher:O,isCoTeacher:M}},m=(F,P,O)=>{if(!F||!P)return[];switch(O){case"case_manager":return F.filter(M=>i(M)===P);case"service_provider":return F.filter(M=>{const U=a(M);return U?Object.values(U).some(j=>{var H;return typeof j=="string"?j===P:j&&typeof j=="object"?j.teacherId===P||((H=j.coTeaching)==null?void 0:H.caseManagerId)===P:!1}):!1});case"all":return F;default:return console.warn(`Unknown provider view: ${O}`),[]}},g=(F,P)=>!F||!P?[]:F.filter(O=>{const{isTeacher:M,isCoTeacher:U}=p(a(O),P);return M||U}),v=(F,P)=>{const O={};return F.forEach(M=>{const U=a(M);if(!U)return;const{periods:z}=p(U,P);Object.entries(z).forEach(([j,H])=>{(H.teacherId===P||H.coTeachingCM===P)&&(O[j]||(O[j]=[]),O[j].push(M))})}),O},x=Ae(()=>u.value||[]),y=F=>{const P=dt(F,"firstName"),O=dt(F,"lastName");return`${P} ${O}`},_=F=>({name:y(F),grade:dt(F,"grade"),plan:dt(F,"plan"),caseManager:o(i(F))}),I=F=>({reviewDate:l(dt(F,"reviewDate")),reevalDate:l(dt(F,"reevalDate")),meetingDate:l(dt(F,"meetingDate"))}),R=F=>{const P=a(F);return P?Object.entries(P).reduce((O,[M,U])=>(O[M]={teacherId:U,teacherName:o(U)},O),{}):{}},A=F=>{f.search=F,h()},E=F=>{f.cm=F,h()},T=F=>{f.teacher=F,h()},b=F=>{f.viewMode=F,h()},S=Ae(()=>{const F={};return x.value.forEach(P=>{const O=dt(P,"grade");F[O]||(F[O]=[]),F[O].push(P)}),F}),k=Ae(()=>{const F={};return x.value.forEach(P=>{const O=dt(P,"plan");F[O]||(F[O]=[]),F[O].push(P)}),F}),w=Ae(()=>{var O;const F=(O=s.value)==null?void 0:O.role,P=f;return["teacher","paraeducator"].includes(F)?!1:F==="case_manager"||["sped_chair","administrator_504_CM"].includes(F)?P.providerView!=="service_provider"&&P.teacher==="all":["admin","administrator"].includes(F)?P.teacher==="all"&&P.paraeducator==="all":F==="service_provider"?P.providerView!=="service_provider":!0}),D=Ae(()=>{var P;const F=(P=s.value)==null?void 0:P.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(F)}),N=Ae(()=>{var P;const F=(P=s.value)==null?void 0:P.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(F)});return Vt(()=>w.value,F=>{F&&f.viewMode==="class"&&(console.log(" Auto-switching from class view to list view because class view is now disabled"),f.viewMode="list",h())},{immediate:!1}),{visibleStudents:x,currentUser:s,userMapObj:n,standardizeScheduleAccess:p,getProviderViewStudents:m,getClassViewStudents:g,groupStudentsByPeriod:v,groupStudentsByGrade:S,groupStudentsByPlan:k,canAccessFilters:N,isClassViewDisabled:w,isAdminRole:D,formatStudentName:y,formatStudentInfo:_,formatDates:I,getStudentSchedule:R,filterByName:A,filterByCaseManager:E,filterByTeacher:T,setViewMode:b,currentFilters:f,showProviderView:!1,providerViewOptions:Ae(()=>[])}}const Gt={ADMIN:"admin",ADMINISTRATOR:"administrator",ADMINISTRATOR_504_CM:"administrator_504_CM",SPED_CHAIR:"sped_chair",CASE_MANAGER:"case_manager",TEACHER:"teacher",SERVICE_PROVIDER:"service_provider",PARAEDUCATOR:"paraeducator"},FB={[Gt.ADMIN]:100,[Gt.ADMINISTRATOR]:90,[Gt.SPED_CHAIR]:80,[Gt.ADMINISTRATOR_504_CM]:70,[Gt.CASE_MANAGER]:60,[Gt.SERVICE_PROVIDER]:50,[Gt.TEACHER]:40,[Gt.PARAEDUCATOR]:30},xt={CAN_VIEW_ALL_STUDENTS:"canViewAllStudents",CAN_EDIT_ALL_STUDENTS:"canEditAllStudents",CAN_EDIT_OWN_STUDENTS:"canEditOwnStudents",CAN_SEND_FEEDBACK:"canSendFeedback",CAN_MANAGE_USERS:"canManageUsers",CAN_MANAGE_AIDES:"canManageAides",CAN_ACCESS_TESTING:"canAccessTesting",CAN_ACCESS_FILTERS:"canAccessFilters",SHOW_PROVIDER_VIEW:"showProviderView",CAN_USE_CLASS_VIEW:"canUseClassView"},OB={[Gt.ADMIN]:[xt.CAN_VIEW_ALL_STUDENTS,xt.CAN_EDIT_ALL_STUDENTS,xt.CAN_SEND_FEEDBACK,xt.CAN_MANAGE_USERS,xt.CAN_MANAGE_AIDES,xt.CAN_ACCESS_TESTING,xt.CAN_ACCESS_FILTERS,xt.SHOW_PROVIDER_VIEW,xt.CAN_USE_CLASS_VIEW],[Gt.ADMINISTRATOR]:[xt.CAN_VIEW_ALL_STUDENTS,xt.CAN_EDIT_ALL_STUDENTS,xt.CAN_SEND_FEEDBACK,xt.CAN_MANAGE_USERS,xt.CAN_MANAGE_AIDES,xt.CAN_ACCESS_TESTING,xt.CAN_ACCESS_FILTERS,xt.SHOW_PROVIDER_VIEW,xt.CAN_USE_CLASS_VIEW],[Gt.SPED_CHAIR]:[xt.CAN_VIEW_ALL_STUDENTS,xt.CAN_EDIT_ALL_STUDENTS,xt.CAN_SEND_FEEDBACK,xt.CAN_MANAGE_AIDES,xt.CAN_ACCESS_TESTING,xt.CAN_ACCESS_FILTERS,xt.SHOW_PROVIDER_VIEW,xt.CAN_USE_CLASS_VIEW],[Gt.ADMINISTRATOR_504_CM]:[xt.CAN_VIEW_ALL_STUDENTS,xt.CAN_EDIT_OWN_STUDENTS,xt.CAN_SEND_FEEDBACK,xt.CAN_MANAGE_USERS,xt.CAN_ACCESS_TESTING,xt.CAN_ACCESS_FILTERS,xt.SHOW_PROVIDER_VIEW,xt.CAN_USE_CLASS_VIEW],[Gt.CASE_MANAGER]:[xt.CAN_EDIT_OWN_STUDENTS,xt.CAN_SEND_FEEDBACK,xt.CAN_ACCESS_TESTING,xt.SHOW_PROVIDER_VIEW,xt.CAN_USE_CLASS_VIEW],[Gt.TEACHER]:[xt.CAN_ACCESS_TESTING,xt.CAN_USE_CLASS_VIEW],[Gt.SERVICE_PROVIDER]:[xt.CAN_EDIT_ALL_STUDENTS,xt.CAN_ACCESS_TESTING,xt.SHOW_PROVIDER_VIEW,xt.CAN_USE_CLASS_VIEW],[Gt.PARAEDUCATOR]:[xt.CAN_ACCESS_TESTING,xt.CAN_USE_CLASS_VIEW]},NB={[Gt.SPED_CHAIR]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"},{value:"iep_all",label:"*"}],[Gt.ADMINISTRATOR_504_CM]:[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}],[Gt.CASE_MANAGER]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}],[Gt.SERVICE_PROVIDER]:[{value:"all",label:"All"},{value:"service_provider",label:"SP"}]},MB={[Gt.SPED_CHAIR]:"all",[Gt.ADMINISTRATOR_504_CM]:"case_manager",[Gt.CASE_MANAGER]:"all",[Gt.SERVICE_PROVIDER]:"service_provider"},LB={[Gt.CASE_MANAGER]:{patterns:["case_manager"],description:"Students in their caseload"},[Gt.TEACHER]:{patterns:["teacher"],description:"Students in their classes"},[Gt.SERVICE_PROVIDER]:{patterns:["teacher"],description:"Students in their classes"},[Gt.PARAEDUCATOR]:{patterns:["paraeducator"],description:"Students they are assigned to assist"},[Gt.SPED_CHAIR]:{patterns:["case_manager","teacher","all_iep"],description:"All students, with special access to IEP students"},[Gt.ADMINISTRATOR_504_CM]:{patterns:["case_manager","all_iep_504"],description:"All students, with special access to IEP/504 students"},[Gt.ADMIN]:{patterns:["all"],description:"All students"},[Gt.ADMINISTRATOR]:{patterns:["all"],description:"All students"}},Ki={case_manager:(t,e,r)=>r.getCaseManagerId(e)===t,teacher:(t,e,r)=>{const n=r.getSchedule(e);return n?Object.values(n).some(s=>{var i;return typeof s=="string"?s===t:s&&typeof s=="object"?s.teacherId===t||((i=s.coTeaching)==null?void 0:i.caseManagerId)===t:!1}):!1},paraeducator:(t,e,r)=>r?r.shouldAideSeeStudent(t,e):!1,all_iep:(t,e,r)=>dt(e,"plan")==="IEP",all_iep_504:(t,e,r)=>{const n=dt(e,"plan");return n==="IEP"||n==="504"},all:()=>!0},BB={[Gt.CASE_MANAGER]:{canSendFeedback:(t,e,r)=>r.getCaseManagerId(e)===t,description:"Can send feedback for students in their caseload"},[Gt.SPED_CHAIR]:{canSendFeedback:(t,e,r)=>{const n=r.getCaseManagerId(e)===t,s=Ki.teacher(t,e,r),i=Ki.all_iep(t,e,r);return n||s||i},description:"Can send feedback for students they case manage, teach, or have IEP"},[Gt.ADMINISTRATOR_504_CM]:{canSendFeedback:(t,e,r)=>{const n=r.getCaseManagerId(e)===t,s=Ki.all_iep_504(t,e,r);return n||s},description:"Can send feedback for students they case manage or have IEP/504"},[Gt.ADMIN]:{canSendFeedback:()=>!0,description:"Can send feedback for all students"},[Gt.ADMINISTRATOR]:{canSendFeedback:()=>!0,description:"Can send feedback for all students"}},Mn={hasPermission:(t,e)=>(OB[t]||[]).includes(e),getProviderViewOptions:t=>NB[t]||[],getDefaultProviderView:t=>MB[t]||"all",canAccessStudent:(t,e,r,n,s=null)=>{var a;return(((a=LB[e])==null?void 0:a.patterns)||[]).some(o=>{const l=Ki[o];return l?l(t,r,n,s):!1})},canSendFeedback:(t,e,r,n)=>{const s=BB[e];return s?s.canSendFeedback(t,r,n):!1},getRoleLevel:t=>FB[t]||0,hasHigherPrivileges:(t,e)=>Mn.getRoleLevel(t)>Mn.getRoleLevel(e)};function UB(t,e){const r=RB(t,e),n=Ae(()=>{var D;return(D=r.currentUser.value)==null?void 0:D.uid}),s=Ae(()=>{var D;return((D=r.currentUser.value)==null?void 0:D.role)||"guest"}),i=Ae(()=>Mn.getProviderViewOptions(s.value));Vt(i,D=>{if(D.length>0){const N=Mn.getDefaultProviderView(s.value);D.map(P=>P.value).includes(e.currentFilters.providerView)||(e.currentFilters.providerView=N,e.applyFilters())}},{immediate:!0});const a=Ae(()=>{if(!n.value)return[];const D=r.visibleStudents.value,N=e.currentFilters.providerView,F=s.value;switch(N){case"case_manager":return D.filter(P=>Ki.case_manager(n.value,P,t));case"service_provider":return D.filter(P=>Ki.teacher(n.value,P,t));case"all":return D.filter(P=>Mn.canAccessStudent(n.value,F,P,t));case"iep_all":return F==="sped_chair"?D.filter(P=>Ki.all_iep(n.value,P,t)):[];case"iep_504_all":return F==="administrator_504_CM"?D.filter(P=>Ki.all_iep_504(n.value,P,t)):[];default:return console.warn(`Unknown provider view: ${N}`),[]}}),o=Ae(()=>Mn.hasPermission(s.value,xt.CAN_EDIT_ALL_STUDENTS)),l=Ae(()=>Mn.hasPermission(s.value,xt.CAN_EDIT_OWN_STUDENTS)),c=Ae(()=>Mn.hasPermission(s.value,xt.CAN_VIEW_ALL_STUDENTS)),u=Ae(()=>Mn.hasPermission(s.value,xt.CAN_MANAGE_USERS)),f=Ae(()=>Mn.hasPermission(s.value,xt.CAN_MANAGE_AIDES)),h=Ae(()=>Mn.hasPermission(s.value,xt.CAN_ACCESS_TESTING)),p=Ae(()=>h.value),m=Ae(()=>h.value),g=Ae(()=>Mn.hasPermission(s.value,xt.CAN_ACCESS_FILTERS)),v=Ae(()=>Mn.hasPermission(s.value,xt.SHOW_PROVIDER_VIEW)),x=Ae(()=>Mn.hasPermission(s.value,xt.CAN_USE_CLASS_VIEW)),y=D=>{if(!n.value||!D)return!1;const N=s.value;return N==="paraeducator"||N==="teacher"?!1:N==="case_manager"?t.getCaseManagerId(D)===n.value:["admin","administrator","sped_chair","administrator_504_CM","service_provider"].includes(N)},_=D=>!n.value||!D?!1:Mn.canSendFeedback(n.value,s.value,D,t),I=Ae(()=>n.value?r.groupStudentsByPeriod(a.value,n.value):{}),R=D=>{if(D==="class"&&!x.value){e.currentFilters.viewMode="list";return}e.currentFilters.viewMode=D},A=Ae(()=>{if(s.value!=="teacher")return{instruction:[],assessment:[]};const D={instruction:[],assessment:[]};return a.value.forEach(N=>{var F,P,O,M;(P=(F=N.app)==null?void 0:F.accommodations)!=null&&P.instruction&&D.instruction.push(N),(M=(O=N.app)==null?void 0:O.accommodations)!=null&&M.assessment&&D.assessment.push(N)}),D}),E=Ae(()=>{if(s.value!=="teacher")return{};const D={};return a.value.forEach(N=>{var P;const F=((P=N.app)==null?void 0:P.providers)||{};Object.entries(F).forEach(([O,M])=>{M&&(D[M]||(D[M]={provider:t.getUserName(M),providerType:O,students:[]}),D[M].students.push(N))})}),D}),T=Ae(()=>s.value==="teacher"),b=Ae(()=>s.value==="teacher"),S=Ae(()=>s.value==="teacher"),k=Ae(()=>!1),w=Ae(()=>!1);return{...r,visibleStudents:a,studentsByPeriod:I,providerViewOptions:i,showProviderView:v,canEditAllStudents:o,canEditOwnStudents:l,canViewAllStudents:c,canManageUsers:u,canManageAides:f,canAccessTesting:h,canAccessTestingPartial:p,hasAnyTestingAccess:m,canAccessFilters:g,canUseClassView:x,canEditStudent:y,canSendFeedback:_,setViewMode:R,studentsByAccommodation:A,studentsByServiceProvider:E,canViewAccommodations:T,canViewBasicInfo:b,canViewServiceProviders:S,canViewDates:k,canEditStudents:w,currentRole:s,currentUserId:n}}function $B(t){Object.entries(t).reduce((e,[r,n])=>(e[r]=n.length,e),{})}function VB(t,e,r=null){const{aideAssignment:n,getCaseManagerId:s,getSchedule:i,standardizeScheduleAccess:a,currentUser:o}=t,{filteredStudents:l,currentFilters:c,getCurrentFilters:u}=e,f=r||l,h=se("list");Vt(()=>c.viewMode,y=>{h.value=y||"list"});const p=Ae(()=>f.value.filter(y=>{var _,I,R,A;return((I=(_=y.app)==null?void 0:_.flags)==null?void 0:I.flag2)||((A=(R=y.app)==null?void 0:R.flags)==null?void 0:A.separateSetting)||y.separateSetting||y.flag2||!1})),m=Ae(()=>{var E,T;const y={};if(h.value!=="class")return y;const _=(E=o.value)==null?void 0:E.uid;if(!_)return console.log(" studentsByClass: No current user ID"),y;console.log(" studentsByClass: Current user ID:",_);const I=(T=t.currentUser.value)==null?void 0:T.role;let R;I==="case_manager"?(R=t.students.value,console.log(" studentsByClass: Case manager - using raw database students:",R.length)):(R=f.value,console.log(" studentsByClass: Other role - using provider-filtered students:",R.length));const A=u();return A.paraeducator&&A.paraeducator,R.forEach(b=>{var k,w;const S=i(b)||{};console.log(` studentsByClass full schedule for ${(w=(k=b.app)==null?void 0:k.studentData)==null?void 0:w.firstName}:`,S),Object.entries(S).forEach(([D,N])=>{var H,W,K;let F,P;if(typeof N=="string")F=N;else if(N&&typeof N=="object")F=N.teacherId,P=(H=N.coTeaching)==null?void 0:H.caseManagerId,N.coTeaching&&console.log(` studentsByClass coTeaching data for ${(K=(W=b.app)==null?void 0:W.studentData)==null?void 0:K.firstName} in period ${D}:`,N.coTeaching);else return;let O=!1;const M=u(),U=M.teacher&&M.teacher!=="all",z=M.paraeducator&&M.paraeducator!=="all";if(I==="paraeducator"){const re=n.value[_];re!=null&&re.classAssignment&&re.classAssignment[D]&&(O=(Array.isArray(re.classAssignment[D])?re.classAssignment[D]:[re.classAssignment[D]]).includes(F))}else if(["admin","administrator"].includes(I))if(U)O=F===M.teacher||P===M.teacher;else if(z){const re=n.value[M.paraeducator];re!=null&&re.classAssignment&&re.classAssignment[D]&&(O=(Array.isArray(re.classAssignment[D])?re.classAssignment[D]:[re.classAssignment[D]]).includes(F))}else O=!0;else O=F===_||P===_;!O||(y[D]||(y[D]=[]),y[D].some(re=>re.id===b.id))||y[D].push(b)})}),console.log(" studentsByClass: Final groups:",Object.keys(y).map(b=>`Period ${b}: ${y[b].length} students`)),$B(y),Object.keys(y).forEach(b=>{y[b].length===0&&delete y[b]}),Object.keys(y).sort((b,S)=>{const k=parseInt(b.replace(/\D/g,"")),w=parseInt(S.replace(/\D/g,""));return k-w}).reduce((b,S)=>(b[S]=y[S],b),{})}),g=Ae(()=>{var b,S;const y=u(),_=(b=t.currentUser.value)==null?void 0:b.role,I=(S=t.currentUser.value)==null?void 0:S.uid;let R=null;if(_==="paraeducator")R=I;else{if(!(y.paraeducator&&y.paraeducator!=="all"))return[];R=y.paraeducator}if(!R)return[];const A=n.value[R];if(!A||!A.directAssignment)return console.log(" directAssignmentStudents: No aide data or direct assignment for",R),[];const E=Array.isArray(A.directAssignment)?A.directAssignment:[A.directAssignment];console.log(" directAssignmentStudents: Direct student IDs:",E),console.log(" directAssignmentStudents: Available students:",f.value.length);const T=f.value.filter(k=>E.includes(k.id));return console.log(" directAssignmentStudents: Found direct assignment students:",T.length),T}),v=Ae(()=>{const y={};return f.value.forEach(_=>{const I=s(_);I&&(y[I]||(y[I]=[]),y[I].push(_))}),y});return{currentViewMode:h,studentsByClass:m,directAssignmentStudents:g,studentsByCaseManager:v,testingViewStudents:p,setViewMode:y=>{h.value=y,c.viewMode=y}}}function HB(t){const{router:e,fetchData:r}=t,n=se(null),s=se(null),i=se(!1),a=se(!1),o=se(!1),l=se(null),c=I=>{n.value=I},u=I=>{s.value=I},f=I=>{l.value=I,o.value=!0},h=()=>{console.log("Teacher feedback form sent successfully")},p=()=>{a.value=!1,r()},m=()=>{console.log("Student saved"),r()},g=()=>{e.push("/admin")},v=()=>{e.push("/testing")},x=()=>{e.push("/aide-schedule")},y=async I=>{switch(I){case"add-student":a.value=!0;break;case"export":i.value=!0;break;case"print":window.print();break;case"admin":g();break;case"testing":v();break;case"aide-schedule":x();break;case"logout":await _();break}},_=async()=>{try{const{useAuthStore:I}=await sa(async()=>{const{useAuthStore:A}=await Promise.resolve().then(()=>PL);return{useAuthStore:A}},void 0);await I().logout(),e.push("/login")}catch(I){console.error("Logout failed:",I)}};return{editingStudentId:n,emailingStudentId:s,showExport:i,showAddStudent:a,showFeedbackDialog:o,feedbackStudentId:l,editStudent:c,emailStudent:u,handleTeacherFeedback:f,handleFormSent:h,handleStudentAdded:p,handleStudentSaved:m,navigateToAdmin:g,navigateToTesting:v,navigateToAideSchedule:x,handleNavAction:y,handleLogout:_}}const jB={class:"student-nav-menu"},GB=["title"],WB={class:"nav-content"},zB={class:"nav-section"},KB={class:"nav-buttons"},qB={key:0,class:"nav-section"},XB={class:"nav-buttons"},YB={key:1,class:"nav-section"},JB={class:"nav-buttons"},QB={class:"nav-section"},ZB={class:"user-info"},e7={class:"user-details"},t7={key:0,class:"user-role"},r7={__name:"StudentNavMenu",props:{currentUser:{type:Object,default:null},isAdmin:{type:Boolean,default:!1}},emits:["action"],setup(t,{emit:e}){const r=t,n=e,s=Ae(()=>{var u;const c=(u=r.currentUser)==null?void 0:u.role;return c!=="paraeducator"&&c!=="teacher"}),i=se(!1);function a(){i.value=!i.value}function o(){i.value=!1}function l(c){n("action",c),o()}return(c,u)=>{var f,h,p,m;return B(),V("div",jB,[d("button",{onClick:a,class:Ze(["hamburger-btn",{active:i.value}]),title:i.value?"Close Menu":"Open Menu"},u[7]||(u[7]=[d("span",{class:"hamburger-line"},null,-1),d("span",{class:"hamburger-line"},null,-1),d("span",{class:"hamburger-line"},null,-1)]),10,GB),i.value?(B(),V("div",{key:0,class:"nav-overlay",onClick:o})):_e("",!0),d("div",{class:Ze(["nav-panel",{open:i.value}])},[d("div",{class:"nav-header"},[u[8]||(u[8]=d("h3",null,"Student Management",-1)),d("button",{onClick:o,class:"close-btn"},"")]),d("div",WB,[d("div",zB,[u[12]||(u[12]=d("h4",null,"Actions",-1)),d("div",KB,[s.value?(B(),V("button",{key:0,onClick:u[0]||(u[0]=g=>l("add-student")),class:"nav-btn primary"},u[9]||(u[9]=[d("span",null,"",-1),Oe(" Add Student ")]))):_e("",!0),d("button",{onClick:u[1]||(u[1]=g=>l("export")),class:"nav-btn"},u[10]||(u[10]=[d("span",null,"",-1),Oe(" Export ")])),d("button",{onClick:u[2]||(u[2]=g=>l("print")),class:"nav-btn print-btn"},u[11]||(u[11]=[d("span",null,"",-1),Oe(" Print ")]))])]),t.isAdmin?(B(),V("div",qB,[u[15]||(u[15]=d("h4",null,"Admin",-1)),d("div",XB,[d("button",{onClick:u[3]||(u[3]=g=>l("admin")),class:"nav-btn"},u[13]||(u[13]=[d("span",null,"",-1),Oe(" Admin Panel ")])),d("button",{onClick:u[4]||(u[4]=g=>l("testing")),class:"nav-btn"},u[14]||(u[14]=[d("span",null,"",-1),Oe(" Testing ")]))])])):_e("",!0),((f=t.currentUser)==null?void 0:f.role)==="paraeducator"?(B(),V("div",YB,[u[17]||(u[17]=d("h4",null,"Schedule",-1)),d("div",JB,[d("button",{onClick:u[5]||(u[5]=g=>l("aide-schedule")),class:"nav-btn"},u[16]||(u[16]=[d("span",null,"",-1),Oe(" My Schedule ")]))])])):_e("",!0),d("div",QB,[u[19]||(u[19]=d("h4",null,"User",-1)),d("div",ZB,[d("div",e7,[d("strong",null,J(((h=t.currentUser)==null?void 0:h.name)||((p=t.currentUser)==null?void 0:p.email)||"User"),1),(m=t.currentUser)!=null&&m.role?(B(),V("span",t7,"("+J(t.currentUser.role)+")",1)):_e("",!0)]),d("button",{onClick:u[6]||(u[6]=g=>l("logout")),class:"nav-btn danger"},u[18]||(u[18]=[d("span",null,"",-1),Oe(" Logout ")]))])])])],2)])}}},n7=yt(r7,[["__scopeId","data-v-11a16ca2"]]);function s7(t){const{appSettings:e,loadAppSettings:r,loading:n,error:s}=Ws(),{getLabel:i}=mo();Ut(async()=>{try{console.log("StudentTable: Loading app settings..."),await r(),console.log("StudentTable: App settings loaded successfully")}catch(w){console.error("StudentTable: Error loading app settings:",w)}});const a=w=>{const D=t.userMap[w];return D&&(D.name||D.email)||w},o=w=>{const D=t.userMap[w];return D?D.initials?D.initials:D.name?D.name.split(" ").map(F=>F[0]).join("").toUpperCase():D.email?D.email[0].toUpperCase():"?":"?"},l=w=>{const D=t.userMap[w];if(!D)return w;if(D.name){const N=D.name.trim().split(" ");return N.length===1?N[0]:`${N[0][0]}. ${N.slice(1).join(" ")}`}return D.email?D.email[0].toUpperCase():w},c=w=>w?new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",u=w=>{if(!w)return"";const D=new Date,N=new Date(w),F=Math.ceil((N-D)/(1e3*60*60*24));return F<=0?"flag-critical":F<=7?"flag-high":F<=14?"flag-medium":F<=21?"flag-mid":F<=28?"flag-low":F<=35?"flag-prep":""},f=w=>{if(!w)return"";const D=new Date,N=new Date(w),F=Math.ceil((N-D)/(1e3*60*60*24));return F<=0?"flag-critical":F<=7?"flag-high":F<=14?"flag-medium":F<=21?"flag-mid":F<=28?"flag-low":F<=60?"flag-prep-reeval":""},h=w=>u(dt(w,"meetingDate")),p=w=>u(dt(w,"reviewDate")),m=w=>f(dt(w,"reevalDate")),g=w=>{var D,N;return((N=(D=w.app)==null?void 0:D.studentData)==null?void 0:N.caseManagerId)||w.caseManagerId||w.casemanager_id},v=(w,D)=>{var N,F;return((F=(N=w.app)==null?void 0:N.flags)==null?void 0:F[D])||w[D]||!1},x=w=>{var D;return((D=w.app)==null?void 0:D.flags)&&Object.values(w.app.flags).some(Boolean)||w.flag1||w.flag2},y=(w,D)=>{var F,P,O,M,U;console.log(" getDocumentUrl called with:",{studentId:w.id,type:D,appDocuments:(F=w.app)==null?void 0:F.documents,directUrl:w[`${D}Url`],underscoreUrl:w[`${D}_url`],appLevel:(P=w.app)==null?void 0:P[D]});const N=((M=(O=w.app)==null?void 0:O.documents)==null?void 0:M[D])||((U=w.app)==null?void 0:U[D])||w[D]||w[`${D}_url`]||null;return console.log(" getDocumentUrl result:",N),N&&N.includes(".enc")&&console.log(" Secure filename detected:",N),N},_=w=>{var D,N,F,P,O;if(w.schedule)return w.schedule;if((N=(D=w.app)==null?void 0:D.schedule)!=null&&N.periods)return w.app.schedule.periods;if((P=(F=w.aeries)==null?void 0:F.schedule)!=null&&P.periods)return w.aeries.schedule.periods;if((O=w.aeries)!=null&&O.schedule){const M={};return Object.entries(w.aeries.schedule).forEach(([U,z])=>{if(z&&z.teacherId){const j=parseInt(U.replace("period","")),H=i(j);let W=z.teacherId;if(t.userMap){let K=Object.values(t.userMap).find(re=>re.aeriesId===z.teacherId||re.aeriesId===parseInt(z.teacherId)||re.id===z.teacherId);if(K||(K=Object.values(t.userMap).find(re=>{var me,ce,pe,te;return((me=re.aeriesId)==null?void 0:me.toString())===((ce=z.teacherId)==null?void 0:ce.toString())||((pe=re.id)==null?void 0:pe.toString())===((te=z.teacherId)==null?void 0:te.toString())})),K&&K.name){const re=K.name.split(" ");if(re.length>=2){const me=re[0],ce=re[re.length-1];W=`${me.charAt(0)}. ${ce}`}else W=K.name}else console.warn(`Teacher not found for ID: ${z.teacherId}`)}M[H]=W}}),Object.keys(M).length>0?M:null}return null},I=w=>{const D=[],N=_(w);return N&&Object.entries(N).forEach(([F,P])=>{if(P&&typeof P=="object"&&P.coTeaching){const O=P.coTeaching.subject;O&&D.push(`Co-teach: ${O}`)}}),D};return{appSettings:e,appSettingsLoading:n,appSettingsError:s,getUserName:a,getUserInitials:o,getUserInitialLastName:l,formatDate:c,getMeetingUrgencyClass:h,getReviewUrgencyClass:p,getReevalUrgencyClass:m,getCaseManagerId:g,getFlagValue:v,hasFlags:x,getDocumentUrl:y,getSchedule:_,getClassServices:w=>{var M,U;const D=((U=(M=w.app)==null?void 0:M.schedule)==null?void 0:U.classServices)||w.services||[],N=I(w),F=D.filter(z=>z&&z.startsWith&&z.startsWith("Co-teach:")),P=N.filter(z=>!F.includes(z)),O=[...D,...P];if(n.value)return Array.isArray(O)?O.filter(z=>typeof z=="string"&&z.includes(":")):[];if(s.value)return Array.isArray(O)?O.filter(z=>typeof z=="string"&&z.includes(":")):[];if(e.value&&e.value.classServices){const z=e.value.classServices.filter(j=>j.enabledSubcategories&&j.enabledSubcategories.length>0).map(j=>j.name);return Array.isArray(O)?O.filter(j=>{if(typeof j!="string"||!j.includes(":"))return!1;const H=j.split(":")[0];return z.includes(H)}):[]}return Array.isArray(O)?O.filter(z=>typeof z=="string"&&z.includes(":")):[]},getOtherServices:w=>{var N,F;const D=((F=(N=w.app)==null?void 0:N.schedule)==null?void 0:F.otherServices)||w.other_services||[];return Array.isArray(D)?D.filter(P=>!!P):[]},getCoTeachingServices:I,hasServiceProviders:w=>{var P;const D=((P=w.app)==null?void 0:P.providers)||{},N=Object.values(D).some(Boolean);if(n.value||s.value){const O=w.speechId||w.speech_id||w.mhId||w.mh_id||w.otId||w.ot_id||w.ptId||w.pt_id||w.scId||w.sc_id||w.trId||w.tr_id||w.audId||w.aud_id||w.viId||w.vi_id||w.atId||w.at_id||w.dhhId||w.dhh_id||w.omId||w.om_id||w.bisId||w.bis_id||w.hnId||w.hn_id||w.swId||w.sw_id;return N||O}let F=!1;if(e.value&&e.value.serviceProviders){const O=e.value.serviceProviders,M={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"};F=O.some(U=>{const z=M[U];return w[z]||w[z.replace("Id","_id")]})}else F=w.speechId||w.speech_id||w.mhId||w.mh_id||w.otId||w.ot_id||w.ptId||w.pt_id||w.scId||w.sc_id||w.trId||w.tr_id||w.audId||w.aud_id||w.viId||w.vi_id||w.atId||w.at_id||w.dhhId||w.dhh_id||w.omId||w.om_id||w.bisId||w.bis_id||w.hnId||w.hn_id||w.swId||w.sw_id;return N||F},getServiceProviderId:(w,D)=>{var F,P;return((P=(F=w.app)==null?void 0:F.providers)==null?void 0:P[D])||w[D]||w[D.replace("Id","_id")]||null},getProviderFieldName:w=>({SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"})[w]||`${w.toLowerCase()}Id`,isDirectAssignment:w=>{if(!t.currentUser||t.currentUser.role!=="paraeducator")return!1;const D=t.currentUser.uid;let N=t.aideSchedule[D];if(!N){const F=Object.entries(t.userMap).find(([P,O])=>O.uid===D||O.email===t.currentUser.email);if(F){const[P]=F;N=t.aideSchedule[P]}}return(N==null?void 0:N.directAssignment)===w},formatListFromText:DB,getFlagClass:w=>{const D=w.toLowerCase();return D.includes("critical")?"flag-critical":D.includes("high")?"flag-high":D.includes("medium")?"flag-medium":D.includes("mid")?"flag-mid":D.includes("low")?"flag-low":D.includes("prep")?"flag-prep":"flag-low"}}}let Nf;const a7=new Uint8Array(16);function i7(){if(!Nf&&(Nf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Nf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nf(a7)}const yn=[];for(let t=0;t<256;++t)yn.push((t+256).toString(16).slice(1));function o7(t,e=0){return yn[t[e+0]]+yn[t[e+1]]+yn[t[e+2]]+yn[t[e+3]]+"-"+yn[t[e+4]]+yn[t[e+5]]+"-"+yn[t[e+6]]+yn[t[e+7]]+"-"+yn[t[e+8]]+yn[t[e+9]]+"-"+yn[t[e+10]]+yn[t[e+11]]+yn[t[e+12]]+yn[t[e+13]]+yn[t[e+14]]+yn[t[e+15]]}const l7=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gb={randomUUID:l7};function c7(t,e,r){if(gb.randomUUID&&!t)return gb.randomUUID();t=t||{};const n=t.random||(t.rng||i7)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,o7(n)}var Bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function OI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Tx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var NI={exports:{}};function u7(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fm={exports:{}};const d7={},f7=Object.freeze(Object.defineProperty({__proto__:null,default:d7},Symbol.toStringTag,{value:"Module"})),h7=Tx(f7);var vb;function Qt(){return vb||(vb=1,function(t,e){(function(r,n){t.exports=n()})(Bt,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof Bt<"u"&&Bt.crypto&&(i=Bt.crypto),!i&&typeof u7=="function")try{i=h7}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function y(){}return function(_){var I;return y.prototype=_,I=new y,y.prototype=null,I}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(y){var _=o(this);return y&&_.mixIn(y),(!_.hasOwnProperty("init")||this.init===_.init)&&(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var _ in y)y.hasOwnProperty(_)&&(this[_]=y[_]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=c.WordArray=u.extend({init:function(y,_){y=this.words=y||[],_!=s?this.sigBytes=_:this.sigBytes=y.length*4},toString:function(y){return(y||p).stringify(this)},concat:function(y){var _=this.words,I=y.words,R=this.sigBytes,A=y.sigBytes;if(this.clamp(),R%4)for(var E=0;E<A;E++){var T=I[E>>>2]>>>24-E%4*8&255;_[R+E>>>2]|=T<<24-(R+E)%4*8}else for(var b=0;b<A;b+=4)_[R+b>>>2]=I[b>>>2];return this.sigBytes+=A,this},clamp:function(){var y=this.words,_=this.sigBytes;y[_>>>2]&=4294967295<<32-_%4*8,y.length=n.ceil(_/4)},clone:function(){var y=u.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var _=[],I=0;I<y;I+=4)_.push(a());return new f.init(_,y)}}),h=l.enc={},p=h.Hex={stringify:function(y){for(var _=y.words,I=y.sigBytes,R=[],A=0;A<I;A++){var E=_[A>>>2]>>>24-A%4*8&255;R.push((E>>>4).toString(16)),R.push((E&15).toString(16))}return R.join("")},parse:function(y){for(var _=y.length,I=[],R=0;R<_;R+=2)I[R>>>3]|=parseInt(y.substr(R,2),16)<<24-R%8*4;return new f.init(I,_/2)}},m=h.Latin1={stringify:function(y){for(var _=y.words,I=y.sigBytes,R=[],A=0;A<I;A++){var E=_[A>>>2]>>>24-A%4*8&255;R.push(String.fromCharCode(E))}return R.join("")},parse:function(y){for(var _=y.length,I=[],R=0;R<_;R++)I[R>>>2]|=(y.charCodeAt(R)&255)<<24-R%4*8;return new f.init(I,_)}},g=h.Utf8={stringify:function(y){try{return decodeURIComponent(escape(m.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return m.parse(unescape(encodeURIComponent(y)))}},v=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=g.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var _,I=this._data,R=I.words,A=I.sigBytes,E=this.blockSize,T=E*4,b=A/T;y?b=n.ceil(b):b=n.max((b|0)-this._minBufferSize,0);var S=b*E,k=n.min(S*4,A);if(S){for(var w=0;w<S;w+=E)this._doProcessBlock(R,w);_=R.splice(0,S),I.sigBytes-=k}return new f.init(_,k)},clone:function(){var y=u.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});c.Hasher=v.extend({cfg:u.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var _=this._doFinalize();return _},blockSize:16,_createHelper:function(y){return function(_,I){return new y.init(I).finalize(_)}},_createHmacHelper:function(y){return function(_,I){return new x.HMAC.init(y,I).finalize(_)}}});var x=l.algo={};return l}(Math);return r})}(fm)),fm.exports}var hm={exports:{}},xb;function Tp(){return xb||(xb=1,function(t,e){(function(r,n){t.exports=n(Qt())})(Bt,function(r){return function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=s.x64={};l.Word=a.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=a.extend({init:function(c,u){c=this.words=c||[],u!=n?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,f=[],h=0;h<u;h++){var p=c[h];f.push(p.high),f.push(p.low)}return o.create(f,this.sigBytes)},clone:function(){for(var c=a.clone.call(this),u=c.words=this.words.slice(0),f=u.length,h=0;h<f;h++)u[h]=u[h].clone();return c}})}(),r})}(hm)),hm.exports}var pm={exports:{}},yb;function p7(){return yb||(yb=1,function(t,e){(function(r,n){t.exports=n(Qt())})(Bt,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,o=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],f=0;f<c;f++)u[f>>>2]|=l[f]<<24-f%4*8;a.call(this,u,c)}else a.apply(this,arguments)};o.prototype=i}}(),r.lib.WordArray})}(pm)),pm.exports}var mm={exports:{}},Eb;function m7(){return Eb||(Eb=1,function(t,e){(function(r,n){t.exports=n(Qt())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,f=[],h=0;h<u;h+=2){var p=c[h>>>2]>>>16-h%4*8&65535;f.push(String.fromCharCode(p))}return f.join("")},parse:function(l){for(var c=l.length,u=[],f=0;f<c;f++)u[f>>>1]|=l.charCodeAt(f)<<16-f%2*16;return i.create(u,c*2)}},a.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,f=[],h=0;h<u;h+=2){var p=o(c[h>>>2]>>>16-h%4*8&65535);f.push(String.fromCharCode(p))}return f.join("")},parse:function(l){for(var c=l.length,u=[],f=0;f<c;f++)u[f>>>1]|=o(l.charCodeAt(f)<<16-f%2*16);return i.create(u,c*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}}(),r.enc.Utf16})}(mm)),mm.exports}var gm={exports:{}},_b;function ll(){return _b||(_b=1,function(t,e){(function(r,n){t.exports=n(Qt())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,f=this._map;l.clamp();for(var h=[],p=0;p<u;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,v=c[p+2>>>2]>>>24-(p+2)%4*8&255,x=m<<16|g<<8|v,y=0;y<4&&p+y*.75<u;y++)h.push(f.charAt(x>>>6*(3-y)&63));var _=f.charAt(64);if(_)for(;h.length%4;)h.push(_);return h.join("")},parse:function(l){var c=l.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<u.length;h++)f[u.charCodeAt(h)]=h}var p=u.charAt(64);if(p){var m=l.indexOf(p);m!==-1&&(c=m)}return o(l,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,c,u){for(var f=[],h=0,p=0;p<c;p++)if(p%4){var m=u[l.charCodeAt(p-1)]<<p%4*2,g=u[l.charCodeAt(p)]>>>6-p%4*2,v=m|g;f[h>>>2]|=v<<24-h%4*8,h++}return i.create(f,h)}}(),r.enc.Base64})}(gm)),gm.exports}var vm={exports:{}},bb;function g7(){return bb||(bb=1,function(t,e){(function(r,n){t.exports=n(Qt())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,f=l.sigBytes,h=c?this._safe_map:this._map;l.clamp();for(var p=[],m=0;m<f;m+=3)for(var g=u[m>>>2]>>>24-m%4*8&255,v=u[m+1>>>2]>>>24-(m+1)%4*8&255,x=u[m+2>>>2]>>>24-(m+2)%4*8&255,y=g<<16|v<<8|x,_=0;_<4&&m+_*.75<f;_++)p.push(h.charAt(y>>>6*(3-_)&63));var I=h.charAt(64);if(I)for(;p.length%4;)p.push(I);return p.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,f=c?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var p=0;p<f.length;p++)h[f.charCodeAt(p)]=p}var m=f.charAt(64);if(m){var g=l.indexOf(m);g!==-1&&(u=g)}return o(l,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,c,u){for(var f=[],h=0,p=0;p<c;p++)if(p%4){var m=u[l.charCodeAt(p-1)]<<p%4*2,g=u[l.charCodeAt(p)]>>>6-p%4*2,v=m|g;f[h>>>2]|=v<<24-h%4*8,h++}return i.create(f,h)}}(),r.enc.Base64url})}(vm)),vm.exports}var xm={exports:{}},Sb;function cl(){return Sb||(Sb=1,function(t,e){(function(r,n){t.exports=n(Qt())})(Bt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[];(function(){for(var g=0;g<64;g++)c[g]=n.abs(n.sin(g+1))*4294967296|0})();var u=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,v){for(var x=0;x<16;x++){var y=v+x,_=g[y];g[y]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var I=this._hash.words,R=g[v+0],A=g[v+1],E=g[v+2],T=g[v+3],b=g[v+4],S=g[v+5],k=g[v+6],w=g[v+7],D=g[v+8],N=g[v+9],F=g[v+10],P=g[v+11],O=g[v+12],M=g[v+13],U=g[v+14],z=g[v+15],j=I[0],H=I[1],W=I[2],K=I[3];j=f(j,H,W,K,R,7,c[0]),K=f(K,j,H,W,A,12,c[1]),W=f(W,K,j,H,E,17,c[2]),H=f(H,W,K,j,T,22,c[3]),j=f(j,H,W,K,b,7,c[4]),K=f(K,j,H,W,S,12,c[5]),W=f(W,K,j,H,k,17,c[6]),H=f(H,W,K,j,w,22,c[7]),j=f(j,H,W,K,D,7,c[8]),K=f(K,j,H,W,N,12,c[9]),W=f(W,K,j,H,F,17,c[10]),H=f(H,W,K,j,P,22,c[11]),j=f(j,H,W,K,O,7,c[12]),K=f(K,j,H,W,M,12,c[13]),W=f(W,K,j,H,U,17,c[14]),H=f(H,W,K,j,z,22,c[15]),j=h(j,H,W,K,A,5,c[16]),K=h(K,j,H,W,k,9,c[17]),W=h(W,K,j,H,P,14,c[18]),H=h(H,W,K,j,R,20,c[19]),j=h(j,H,W,K,S,5,c[20]),K=h(K,j,H,W,F,9,c[21]),W=h(W,K,j,H,z,14,c[22]),H=h(H,W,K,j,b,20,c[23]),j=h(j,H,W,K,N,5,c[24]),K=h(K,j,H,W,U,9,c[25]),W=h(W,K,j,H,T,14,c[26]),H=h(H,W,K,j,D,20,c[27]),j=h(j,H,W,K,M,5,c[28]),K=h(K,j,H,W,E,9,c[29]),W=h(W,K,j,H,w,14,c[30]),H=h(H,W,K,j,O,20,c[31]),j=p(j,H,W,K,S,4,c[32]),K=p(K,j,H,W,D,11,c[33]),W=p(W,K,j,H,P,16,c[34]),H=p(H,W,K,j,U,23,c[35]),j=p(j,H,W,K,A,4,c[36]),K=p(K,j,H,W,b,11,c[37]),W=p(W,K,j,H,w,16,c[38]),H=p(H,W,K,j,F,23,c[39]),j=p(j,H,W,K,M,4,c[40]),K=p(K,j,H,W,R,11,c[41]),W=p(W,K,j,H,T,16,c[42]),H=p(H,W,K,j,k,23,c[43]),j=p(j,H,W,K,N,4,c[44]),K=p(K,j,H,W,O,11,c[45]),W=p(W,K,j,H,z,16,c[46]),H=p(H,W,K,j,E,23,c[47]),j=m(j,H,W,K,R,6,c[48]),K=m(K,j,H,W,w,10,c[49]),W=m(W,K,j,H,U,15,c[50]),H=m(H,W,K,j,S,21,c[51]),j=m(j,H,W,K,O,6,c[52]),K=m(K,j,H,W,T,10,c[53]),W=m(W,K,j,H,F,15,c[54]),H=m(H,W,K,j,A,21,c[55]),j=m(j,H,W,K,D,6,c[56]),K=m(K,j,H,W,z,10,c[57]),W=m(W,K,j,H,k,15,c[58]),H=m(H,W,K,j,M,21,c[59]),j=m(j,H,W,K,b,6,c[60]),K=m(K,j,H,W,P,10,c[61]),W=m(W,K,j,H,E,15,c[62]),H=m(H,W,K,j,N,21,c[63]),I[0]=I[0]+j|0,I[1]=I[1]+H|0,I[2]=I[2]+W|0,I[3]=I[3]+K|0},_doFinalize:function(){var g=this._data,v=g.words,x=this._nDataBytes*8,y=g.sigBytes*8;v[y>>>5]|=128<<24-y%32;var _=n.floor(x/4294967296),I=x;v[(y+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,v[(y+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,g.sigBytes=(v.length+1)*4,this._process();for(var R=this._hash,A=R.words,E=0;E<4;E++){var T=A[E];A[E]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}return R},clone:function(){var g=o.clone.call(this);return g._hash=this._hash.clone(),g}});function f(g,v,x,y,_,I,R){var A=g+(v&x|~v&y)+_+R;return(A<<I|A>>>32-I)+v}function h(g,v,x,y,_,I,R){var A=g+(v&y|x&~y)+_+R;return(A<<I|A>>>32-I)+v}function p(g,v,x,y,_,I,R){var A=g+(v^x^y)+_+R;return(A<<I|A>>>32-I)+v}function m(g,v,x,y,_,I,R){var A=g+(x^(v|~y))+_+R;return(A<<I|A>>>32-I)+v}s.MD5=o._createHelper(u),s.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5})}(xm)),xm.exports}var ym={exports:{}},Tb;function MI(){return Tb||(Tb=1,function(t,e){(function(r,n){t.exports=n(Qt())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,o=n.algo,l=[],c=o.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var h=this._hash.words,p=h[0],m=h[1],g=h[2],v=h[3],x=h[4],y=0;y<80;y++){if(y<16)l[y]=u[f+y]|0;else{var _=l[y-3]^l[y-8]^l[y-14]^l[y-16];l[y]=_<<1|_>>>31}var I=(p<<5|p>>>27)+x+l[y];y<20?I+=(m&g|~m&v)+1518500249:y<40?I+=(m^g^v)+1859775393:y<60?I+=(m&g|m&v|g&v)-1894007588:I+=(m^g^v)-899497514,x=v,v=g,g=m<<30|m>>>2,m=p,p=I}h[0]=h[0]+p|0,h[1]=h[1]+m|0,h[2]=h[2]+g|0,h[3]=h[3]+v|0,h[4]=h[4]+x|0},_doFinalize:function(){var u=this._data,f=u.words,h=this._nDataBytes*8,p=u.sigBytes*8;return f[p>>>5]|=128<<24-p%32,f[(p+64>>>9<<4)+14]=Math.floor(h/4294967296),f[(p+64>>>9<<4)+15]=h,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=a.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c)}(),r.SHA1})}(ym)),ym.exports}var Em={exports:{}},Ab;function Ax(){return Ab||(Ab=1,function(t,e){(function(r,n){t.exports=n(Qt())})(Bt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[],u=[];(function(){function p(x){for(var y=n.sqrt(x),_=2;_<=y;_++)if(!(x%_))return!1;return!0}function m(x){return(x-(x|0))*4294967296|0}for(var g=2,v=0;v<64;)p(g)&&(v<8&&(c[v]=m(n.pow(g,1/2))),u[v]=m(n.pow(g,1/3)),v++),g++})();var f=[],h=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(p,m){for(var g=this._hash.words,v=g[0],x=g[1],y=g[2],_=g[3],I=g[4],R=g[5],A=g[6],E=g[7],T=0;T<64;T++){if(T<16)f[T]=p[m+T]|0;else{var b=f[T-15],S=(b<<25|b>>>7)^(b<<14|b>>>18)^b>>>3,k=f[T-2],w=(k<<15|k>>>17)^(k<<13|k>>>19)^k>>>10;f[T]=S+f[T-7]+w+f[T-16]}var D=I&R^~I&A,N=v&x^v&y^x&y,F=(v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22),P=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),O=E+P+D+u[T]+f[T],M=F+N;E=A,A=R,R=I,I=_+O|0,_=y,y=x,x=v,v=O+M|0}g[0]=g[0]+v|0,g[1]=g[1]+x|0,g[2]=g[2]+y|0,g[3]=g[3]+_|0,g[4]=g[4]+I|0,g[5]=g[5]+R|0,g[6]=g[6]+A|0,g[7]=g[7]+E|0},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,v=p.sigBytes*8;return m[v>>>5]|=128<<24-v%32,m[(v+64>>>9<<4)+14]=n.floor(g/4294967296),m[(v+64>>>9<<4)+15]=g,p.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=o._createHelper(h),s.HmacSHA256=o._createHmacHelper(h)}(Math),r.SHA256})}(Em)),Em.exports}var _m={exports:{}},wb;function v7(){return wb||(wb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),Ax())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)}(),r.SHA224})}(_m)),_m.exports}var bm={exports:{}},Cb;function LI(){return Cb||(Cb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),Tp())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,o=a.Word,l=a.WordArray,c=n.algo;function u(){return o.create.apply(o,arguments)}var f=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var m=0;m<80;m++)h[m]=u()})();var p=c.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(m,g){for(var v=this._hash.words,x=v[0],y=v[1],_=v[2],I=v[3],R=v[4],A=v[5],E=v[6],T=v[7],b=x.high,S=x.low,k=y.high,w=y.low,D=_.high,N=_.low,F=I.high,P=I.low,O=R.high,M=R.low,U=A.high,z=A.low,j=E.high,H=E.low,W=T.high,K=T.low,re=b,me=S,ce=k,pe=w,te=D,Q=N,ye=F,X=P,q=O,Y=M,ne=U,ve=z,ae=j,le=H,de=W,Se=K,Ie=0;Ie<80;Ie++){var Te,Ge,ke=h[Ie];if(Ie<16)Ge=ke.high=m[g+Ie*2]|0,Te=ke.low=m[g+Ie*2+1]|0;else{var $e=h[Ie-15],Be=$e.high,We=$e.low,ze=(Be>>>1|We<<31)^(Be>>>8|We<<24)^Be>>>7,Ee=(We>>>1|Be<<31)^(We>>>8|Be<<24)^(We>>>7|Be<<25),xe=h[Ie-2],be=xe.high,Ne=xe.low,je=(be>>>19|Ne<<13)^(be<<3|Ne>>>29)^be>>>6,ot=(Ne>>>19|be<<13)^(Ne<<3|be>>>29)^(Ne>>>6|be<<26),gt=h[Ie-7],Et=gt.high,Lt=gt.low,ft=h[Ie-16],ct=ft.high,mt=ft.low;Te=Ee+Lt,Ge=ze+Et+(Te>>>0<Ee>>>0?1:0),Te=Te+ot,Ge=Ge+je+(Te>>>0<ot>>>0?1:0),Te=Te+mt,Ge=Ge+ct+(Te>>>0<mt>>>0?1:0),ke.high=Ge,ke.low=Te}var kt=q&ne^~q&ae,Ot=Y&ve^~Y&le,br=re&ce^re&te^ce&te,Qn=me&pe^me&Q^pe&Q,wi=(re>>>28|me<<4)^(re<<30|me>>>2)^(re<<25|me>>>7),us=(me>>>28|re<<4)^(me<<30|re>>>2)^(me<<25|re>>>7),gl=(q>>>14|Y<<18)^(q>>>18|Y<<14)^(q<<23|Y>>>9),$a=(Y>>>14|q<<18)^(Y>>>18|q<<14)^(Y<<23|q>>>9),xo=f[Ie],en=xo.high,yo=xo.low,Dr=Se+$a,Dn=de+gl+(Dr>>>0<Se>>>0?1:0),Dr=Dr+Ot,Dn=Dn+kt+(Dr>>>0<Ot>>>0?1:0),Dr=Dr+yo,Dn=Dn+en+(Dr>>>0<yo>>>0?1:0),Dr=Dr+Te,Dn=Dn+Ge+(Dr>>>0<Te>>>0?1:0),vl=us+Qn,$c=wi+br+(vl>>>0<us>>>0?1:0);de=ae,Se=le,ae=ne,le=ve,ne=q,ve=Y,Y=X+Dr|0,q=ye+Dn+(Y>>>0<X>>>0?1:0)|0,ye=te,X=Q,te=ce,Q=pe,ce=re,pe=me,me=Dr+vl|0,re=Dn+$c+(me>>>0<Dr>>>0?1:0)|0}S=x.low=S+me,x.high=b+re+(S>>>0<me>>>0?1:0),w=y.low=w+pe,y.high=k+ce+(w>>>0<pe>>>0?1:0),N=_.low=N+Q,_.high=D+te+(N>>>0<Q>>>0?1:0),P=I.low=P+X,I.high=F+ye+(P>>>0<X>>>0?1:0),M=R.low=M+Y,R.high=O+q+(M>>>0<Y>>>0?1:0),z=A.low=z+ve,A.high=U+ne+(z>>>0<ve>>>0?1:0),H=E.low=H+le,E.high=j+ae+(H>>>0<le>>>0?1:0),K=T.low=K+Se,T.high=W+de+(K>>>0<Se>>>0?1:0)},_doFinalize:function(){var m=this._data,g=m.words,v=this._nDataBytes*8,x=m.sigBytes*8;g[x>>>5]|=128<<24-x%32,g[(x+128>>>10<<5)+30]=Math.floor(v/4294967296),g[(x+128>>>10<<5)+31]=v,m.sigBytes=g.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var m=i.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:1024/32});n.SHA512=i._createHelper(p),n.HmacSHA512=i._createHmacHelper(p)}(),r.SHA512})}(bm)),bm.exports}var Sm={exports:{}},Ib;function x7(){return Ib||(Ib=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),Tp(),LI())})(Bt,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,o=n.algo,l=o.SHA512,c=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=l._createHelper(c),n.HmacSHA384=l._createHmacHelper(c)}(),r.SHA384})}(Sm)),Sm.exports}var Tm={exports:{}},kb;function y7(){return kb||(kb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),Tp())})(Bt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.x64,c=l.Word,u=s.algo,f=[],h=[],p=[];(function(){for(var v=1,x=0,y=0;y<24;y++){f[v+5*x]=(y+1)*(y+2)/2%64;var _=x%5,I=(2*v+3*x)%5;v=_,x=I}for(var v=0;v<5;v++)for(var x=0;x<5;x++)h[v+5*x]=x+(2*v+3*x)%5*5;for(var R=1,A=0;A<24;A++){for(var E=0,T=0,b=0;b<7;b++){if(R&1){var S=(1<<b)-1;S<32?T^=1<<S:E^=1<<S-32}R&128?R=R<<1^113:R<<=1}p[A]=c.create(E,T)}})();var m=[];(function(){for(var v=0;v<25;v++)m[v]=c.create()})();var g=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],x=0;x<25;x++)v[x]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,x){for(var y=this._state,_=this.blockSize/2,I=0;I<_;I++){var R=v[x+2*I],A=v[x+2*I+1];R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360;var E=y[I];E.high^=A,E.low^=R}for(var T=0;T<24;T++){for(var b=0;b<5;b++){for(var S=0,k=0,w=0;w<5;w++){var E=y[b+5*w];S^=E.high,k^=E.low}var D=m[b];D.high=S,D.low=k}for(var b=0;b<5;b++)for(var N=m[(b+4)%5],F=m[(b+1)%5],P=F.high,O=F.low,S=N.high^(P<<1|O>>>31),k=N.low^(O<<1|P>>>31),w=0;w<5;w++){var E=y[b+5*w];E.high^=S,E.low^=k}for(var M=1;M<25;M++){var S,k,E=y[M],U=E.high,z=E.low,j=f[M];j<32?(S=U<<j|z>>>32-j,k=z<<j|U>>>32-j):(S=z<<j-32|U>>>64-j,k=U<<j-32|z>>>64-j);var H=m[h[M]];H.high=S,H.low=k}var W=m[0],K=y[0];W.high=K.high,W.low=K.low;for(var b=0;b<5;b++)for(var w=0;w<5;w++){var M=b+5*w,E=y[M],re=m[M],me=m[(b+1)%5+5*w],ce=m[(b+2)%5+5*w];E.high=re.high^~me.high&ce.high,E.low=re.low^~me.low&ce.low}var E=y[0],pe=p[T];E.high^=pe.high,E.low^=pe.low}},_doFinalize:function(){var v=this._data,x=v.words;this._nDataBytes*8;var y=v.sigBytes*8,_=this.blockSize*32;x[y>>>5]|=1<<24-y%32,x[(n.ceil((y+1)/_)*_>>>5)-1]|=128,v.sigBytes=x.length*4,this._process();for(var I=this._state,R=this.cfg.outputLength/8,A=R/8,E=[],T=0;T<A;T++){var b=I[T],S=b.high,k=b.low;S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,E.push(k),E.push(S)}return new a.init(E,R)},clone:function(){for(var v=o.clone.call(this),x=v._state=this._state.slice(0),y=0;y<25;y++)x[y]=x[y].clone();return v}});s.SHA3=o._createHelper(g),s.HmacSHA3=o._createHmacHelper(g)}(Math),r.SHA3})}(Tm)),Tm.exports}var Am={exports:{}},Db;function E7(){return Db||(Db=1,function(t,e){(function(r,n){t.exports=n(Qt())})(Bt,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=a.create([0,1518500249,1859775393,2400959708,2840853838]),m=a.create([1352829926,1548603684,1836072691,2053994217,0]),g=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(A,E){for(var T=0;T<16;T++){var b=E+T,S=A[b];A[b]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var k=this._hash.words,w=p.words,D=m.words,N=c.words,F=u.words,P=f.words,O=h.words,M,U,z,j,H,W,K,re,me,ce;W=M=k[0],K=U=k[1],re=z=k[2],me=j=k[3],ce=H=k[4];for(var pe,T=0;T<80;T+=1)pe=M+A[E+N[T]]|0,T<16?pe+=v(U,z,j)+w[0]:T<32?pe+=x(U,z,j)+w[1]:T<48?pe+=y(U,z,j)+w[2]:T<64?pe+=_(U,z,j)+w[3]:pe+=I(U,z,j)+w[4],pe=pe|0,pe=R(pe,P[T]),pe=pe+H|0,M=H,H=j,j=R(z,10),z=U,U=pe,pe=W+A[E+F[T]]|0,T<16?pe+=I(K,re,me)+D[0]:T<32?pe+=_(K,re,me)+D[1]:T<48?pe+=y(K,re,me)+D[2]:T<64?pe+=x(K,re,me)+D[3]:pe+=v(K,re,me)+D[4],pe=pe|0,pe=R(pe,O[T]),pe=pe+ce|0,W=ce,ce=me,me=R(re,10),re=K,K=pe;pe=k[1]+z+me|0,k[1]=k[2]+j+ce|0,k[2]=k[3]+H+W|0,k[3]=k[4]+M+K|0,k[4]=k[0]+U+re|0,k[0]=pe},_doFinalize:function(){var A=this._data,E=A.words,T=this._nDataBytes*8,b=A.sigBytes*8;E[b>>>5]|=128<<24-b%32,E[(b+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,A.sigBytes=(E.length+1)*4,this._process();for(var S=this._hash,k=S.words,w=0;w<5;w++){var D=k[w];k[w]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return S},clone:function(){var A=o.clone.call(this);return A._hash=this._hash.clone(),A}});function v(A,E,T){return A^E^T}function x(A,E,T){return A&E|~A&T}function y(A,E,T){return(A|~E)^T}function _(A,E,T){return A&T|E&~T}function I(A,E,T){return A^(E|~T)}function R(A,E){return A<<E|A>>>32-E}s.RIPEMD160=o._createHelper(g),s.HmacRIPEMD160=o._createHmacHelper(g)}(),r.RIPEMD160})}(Am)),Am.exports}var wm={exports:{}},Pb;function wx(){return Pb||(Pb=1,function(t,e){(function(r,n){t.exports=n(Qt())})(Bt,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,o=a.Utf8,l=n.algo;l.HMAC=i.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var f=c.blockSize,h=f*4;u.sigBytes>h&&(u=c.finalize(u)),u.clamp();for(var p=this._oKey=u.clone(),m=this._iKey=u.clone(),g=p.words,v=m.words,x=0;x<f;x++)g[x]^=1549556828,v[x]^=909522486;p.sigBytes=m.sigBytes=h,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,f=u.finalize(c);u.reset();var h=u.finalize(this._oKey.clone().concat(f));return h}})})()})}(wm)),wm.exports}var Cm={exports:{}},Rb;function _7(){return Rb||(Rb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),Ax(),wx())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.SHA256,c=o.HMAC,u=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,h){for(var p=this.cfg,m=c.create(p.hasher,f),g=a.create(),v=a.create([1]),x=g.words,y=v.words,_=p.keySize,I=p.iterations;x.length<_;){var R=m.update(h).finalize(v);m.reset();for(var A=R.words,E=A.length,T=R,b=1;b<I;b++){T=m.finalize(T),m.reset();for(var S=T.words,k=0;k<E;k++)A[k]^=S[k]}g.concat(R),y[0]++}return g.sigBytes=_*4,g}});n.PBKDF2=function(f,h,p){return u.create(p).compute(f,h)}}(),r.PBKDF2})}(Cm)),Cm.exports}var Im={exports:{}},Fb;function go(){return Fb||(Fb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),MI(),wx())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.MD5,c=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var h,p=this.cfg,m=p.hasher.create(),g=a.create(),v=g.words,x=p.keySize,y=p.iterations;v.length<x;){h&&m.update(h),h=m.update(u).finalize(f),m.reset();for(var _=1;_<y;_++)h=m.finalize(h),m.reset();g.concat(h)}return g.sigBytes=x*4,g}});n.EvpKDF=function(u,f,h){return c.create(h).compute(u,f)}}(),r.EvpKDF})}(Im)),Im.exports}var km={exports:{}},Ob;function vn(){return Ob||(Ob=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),go())})(Bt,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=i.BufferedBlockAlgorithm,c=s.enc;c.Utf8;var u=c.Base64,f=s.algo,h=f.EvpKDF,p=i.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(S,k){return this.create(this._ENC_XFORM_MODE,S,k)},createDecryptor:function(S,k){return this.create(this._DEC_XFORM_MODE,S,k)},init:function(S,k,w){this.cfg=this.cfg.extend(w),this._xformMode=S,this._key=k,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){S&&this._append(S);var k=this._doFinalize();return k},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function S(k){return typeof k=="string"?b:A}return function(k){return{encrypt:function(w,D,N){return S(D).encrypt(k,w,D,N)},decrypt:function(w,D,N){return S(D).decrypt(k,w,D,N)}}}}()});i.StreamCipher=p.extend({_doFinalize:function(){var S=this._process(!0);return S},blockSize:1});var m=s.mode={},g=i.BlockCipherMode=a.extend({createEncryptor:function(S,k){return this.Encryptor.create(S,k)},createDecryptor:function(S,k){return this.Decryptor.create(S,k)},init:function(S,k){this._cipher=S,this._iv=k}}),v=m.CBC=function(){var S=g.extend();S.Encryptor=S.extend({processBlock:function(w,D){var N=this._cipher,F=N.blockSize;k.call(this,w,D,F),N.encryptBlock(w,D),this._prevBlock=w.slice(D,D+F)}}),S.Decryptor=S.extend({processBlock:function(w,D){var N=this._cipher,F=N.blockSize,P=w.slice(D,D+F);N.decryptBlock(w,D),k.call(this,w,D,F),this._prevBlock=P}});function k(w,D,N){var F,P=this._iv;P?(F=P,this._iv=n):F=this._prevBlock;for(var O=0;O<N;O++)w[D+O]^=F[O]}return S}(),x=s.pad={},y=x.Pkcs7={pad:function(S,k){for(var w=k*4,D=w-S.sigBytes%w,N=D<<24|D<<16|D<<8|D,F=[],P=0;P<D;P+=4)F.push(N);var O=o.create(F,D);S.concat(O)},unpad:function(S){var k=S.words[S.sigBytes-1>>>2]&255;S.sigBytes-=k}};i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:v,padding:y}),reset:function(){var S;p.reset.call(this);var k=this.cfg,w=k.iv,D=k.mode;this._xformMode==this._ENC_XFORM_MODE?S=D.createEncryptor:(S=D.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==S?this._mode.init(this,w&&w.words):(this._mode=S.call(D,this,w&&w.words),this._mode.__creator=S)},_doProcessBlock:function(S,k){this._mode.processBlock(S,k)},_doFinalize:function(){var S,k=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(k.pad(this._data,this.blockSize),S=this._process(!0)):(S=this._process(!0),k.unpad(S)),S},blockSize:128/32});var _=i.CipherParams=a.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),I=s.format={},R=I.OpenSSL={stringify:function(S){var k,w=S.ciphertext,D=S.salt;return D?k=o.create([1398893684,1701076831]).concat(D).concat(w):k=w,k.toString(u)},parse:function(S){var k,w=u.parse(S),D=w.words;return D[0]==1398893684&&D[1]==1701076831&&(k=o.create(D.slice(2,4)),D.splice(0,4),w.sigBytes-=16),_.create({ciphertext:w,salt:k})}},A=i.SerializableCipher=a.extend({cfg:a.extend({format:R}),encrypt:function(S,k,w,D){D=this.cfg.extend(D);var N=S.createEncryptor(w,D),F=N.finalize(k),P=N.cfg;return _.create({ciphertext:F,key:w,iv:P.iv,algorithm:S,mode:P.mode,padding:P.padding,blockSize:S.blockSize,formatter:D.format})},decrypt:function(S,k,w,D){D=this.cfg.extend(D),k=this._parse(k,D.format);var N=S.createDecryptor(w,D).finalize(k.ciphertext);return N},_parse:function(S,k){return typeof S=="string"?k.parse(S,this):S}}),E=s.kdf={},T=E.OpenSSL={execute:function(S,k,w,D,N){if(D||(D=o.random(64/8)),N)var F=h.create({keySize:k+w,hasher:N}).compute(S,D);else var F=h.create({keySize:k+w}).compute(S,D);var P=o.create(F.words.slice(k),w*4);return F.sigBytes=k*4,_.create({key:F,iv:P,salt:D})}},b=i.PasswordBasedCipher=A.extend({cfg:A.cfg.extend({kdf:T}),encrypt:function(S,k,w,D){D=this.cfg.extend(D);var N=D.kdf.execute(w,S.keySize,S.ivSize,D.salt,D.hasher);D.iv=N.iv;var F=A.encrypt.call(this,S,k,N.key,D);return F.mixIn(N),F},decrypt:function(S,k,w,D){D=this.cfg.extend(D),k=this._parse(k,D.format);var N=D.kdf.execute(w,S.keySize,S.ivSize,k.salt,D.hasher);D.iv=N.iv;var F=A.decrypt.call(this,S,k,N.key,D);return F}})}()})}(km)),km.exports}var Dm={exports:{}},Nb;function b7(){return Nb||(Nb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize;s.call(this,i,a,l,o),this._prevBlock=i.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=i.slice(a,a+l);s.call(this,i,a,l,o),this._prevBlock=c}});function s(i,a,o,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var f=0;f<o;f++)i[a+f]^=c[f]}return n}(),r.mode.CFB})}(Dm)),Dm.exports}var Pm={exports:{}},Mb;function S7(){return Mb||(Mb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var f=u.slice(0);o.encryptBlock(f,0),u[l-1]=u[l-1]+1|0;for(var h=0;h<l;h++)i[a+h]^=f[h]}});return n.Decryptor=s,n}(),r.mode.CTR})}(Pm)),Pm.exports}var Rm={exports:{}},Lb;function T7(){return Lb||(Lb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(o){if((o>>24&255)===255){var l=o>>16&255,c=o>>8&255,u=o&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,o=0,o+=l<<16,o+=c<<8,o+=u}else o+=1<<24;return o}function i(o){return(o[0]=s(o[0]))===0&&(o[1]=s(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,f=this._iv,h=this._counter;f&&(h=this._counter=f.slice(0),this._iv=void 0),i(h);var p=h.slice(0);c.encryptBlock(p,0);for(var m=0;m<u;m++)o[l+m]^=p[m]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(Rm)),Rm.exports}var Fm={exports:{}},Bb;function A7(){return Bb||(Bb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(u,0);for(var f=0;f<l;f++)i[a+f]^=u[f]}});return n.Decryptor=s,n}(),r.mode.OFB})}(Fm)),Fm.exports}var Om={exports:{}},Ub;function w7(){return Ub||(Ub=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(Om)),Om.exports}var Nm={exports:{}},$b;function C7(){return $b||($b=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,o=a-i%a,l=i+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(Nm)),Nm.exports}var Mm={exports:{}},Vb;function I7(){return Vb||(Vb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(Mm)),Mm.exports}var Lm={exports:{}},Hb;function k7(){return Hb||(Hb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Lm)),Lm.exports}var Bm={exports:{}},jb;function D7(){return jb||(jb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(Bm)),Bm.exports}var Um={exports:{}},Gb;function P7(){return Gb||(Gb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Um)),Um.exports}var $m={exports:{}},Wb;function R7(){return Wb||(Wb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),vn())})(Bt,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,o=s.enc,l=o.Hex,c=s.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var f=l.parse(u);return a.create({ciphertext:f})}}}(),r.format.Hex})}($m)),$m.exports}var Vm={exports:{}},zb;function F7(){return zb||(zb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),ll(),cl(),go(),vn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,o=[],l=[],c=[],u=[],f=[],h=[],p=[],m=[],g=[],v=[];(function(){for(var _=[],I=0;I<256;I++)I<128?_[I]=I<<1:_[I]=I<<1^283;for(var R=0,A=0,I=0;I<256;I++){var E=A^A<<1^A<<2^A<<3^A<<4;E=E>>>8^E&255^99,o[R]=E,l[E]=R;var T=_[R],b=_[T],S=_[b],k=_[E]*257^E*16843008;c[R]=k<<24|k>>>8,u[R]=k<<16|k>>>16,f[R]=k<<8|k>>>24,h[R]=k;var k=S*16843009^b*65537^T*257^R*16843008;p[E]=k<<24|k>>>8,m[E]=k<<16|k>>>16,g[E]=k<<8|k>>>24,v[E]=k,R?(R=T^_[_[_[S^T]]],A^=_[_[A]]):R=A=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],y=a.AES=i.extend({_doReset:function(){var _;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,R=I.words,A=I.sigBytes/4,E=this._nRounds=A+6,T=(E+1)*4,b=this._keySchedule=[],S=0;S<T;S++)S<A?b[S]=R[S]:(_=b[S-1],S%A?A>6&&S%A==4&&(_=o[_>>>24]<<24|o[_>>>16&255]<<16|o[_>>>8&255]<<8|o[_&255]):(_=_<<8|_>>>24,_=o[_>>>24]<<24|o[_>>>16&255]<<16|o[_>>>8&255]<<8|o[_&255],_^=x[S/A|0]<<24),b[S]=b[S-A]^_);for(var k=this._invKeySchedule=[],w=0;w<T;w++){var S=T-w;if(w%4)var _=b[S];else var _=b[S-4];w<4||S<=4?k[w]=_:k[w]=p[o[_>>>24]]^m[o[_>>>16&255]]^g[o[_>>>8&255]]^v[o[_&255]]}}},encryptBlock:function(_,I){this._doCryptBlock(_,I,this._keySchedule,c,u,f,h,o)},decryptBlock:function(_,I){var R=_[I+1];_[I+1]=_[I+3],_[I+3]=R,this._doCryptBlock(_,I,this._invKeySchedule,p,m,g,v,l);var R=_[I+1];_[I+1]=_[I+3],_[I+3]=R},_doCryptBlock:function(_,I,R,A,E,T,b,S){for(var k=this._nRounds,w=_[I]^R[0],D=_[I+1]^R[1],N=_[I+2]^R[2],F=_[I+3]^R[3],P=4,O=1;O<k;O++){var M=A[w>>>24]^E[D>>>16&255]^T[N>>>8&255]^b[F&255]^R[P++],U=A[D>>>24]^E[N>>>16&255]^T[F>>>8&255]^b[w&255]^R[P++],z=A[N>>>24]^E[F>>>16&255]^T[w>>>8&255]^b[D&255]^R[P++],j=A[F>>>24]^E[w>>>16&255]^T[D>>>8&255]^b[N&255]^R[P++];w=M,D=U,N=z,F=j}var M=(S[w>>>24]<<24|S[D>>>16&255]<<16|S[N>>>8&255]<<8|S[F&255])^R[P++],U=(S[D>>>24]<<24|S[N>>>16&255]<<16|S[F>>>8&255]<<8|S[w&255])^R[P++],z=(S[N>>>24]<<24|S[F>>>16&255]<<16|S[w>>>8&255]<<8|S[D&255])^R[P++],j=(S[F>>>24]<<24|S[w>>>16&255]<<16|S[D>>>8&255]<<8|S[N&255])^R[P++];_[I]=M,_[I+1]=U,_[I+2]=z,_[I+3]=j},keySize:256/32});n.AES=i._createHelper(y)}(),r.AES})}(Vm)),Vm.exports}var Hm={exports:{}},Kb;function O7(){return Kb||(Kb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),ll(),cl(),go(),vn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=a.extend({_doReset:function(){for(var x=this._key,y=x.words,_=[],I=0;I<56;I++){var R=l[I]-1;_[I]=y[R>>>5]>>>31-R%32&1}for(var A=this._subKeys=[],E=0;E<16;E++){for(var T=A[E]=[],b=u[E],I=0;I<24;I++)T[I/6|0]|=_[(c[I]-1+b)%28]<<31-I%6,T[4+(I/6|0)]|=_[28+(c[I+24]-1+b)%28]<<31-I%6;T[0]=T[0]<<1|T[0]>>>31;for(var I=1;I<7;I++)T[I]=T[I]>>>(I-1)*4+3;T[7]=T[7]<<5|T[7]>>>27}for(var S=this._invSubKeys=[],I=0;I<16;I++)S[I]=A[15-I]},encryptBlock:function(x,y){this._doCryptBlock(x,y,this._subKeys)},decryptBlock:function(x,y){this._doCryptBlock(x,y,this._invSubKeys)},_doCryptBlock:function(x,y,_){this._lBlock=x[y],this._rBlock=x[y+1],m.call(this,4,252645135),m.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),m.call(this,1,1431655765);for(var I=0;I<16;I++){for(var R=_[I],A=this._lBlock,E=this._rBlock,T=0,b=0;b<8;b++)T|=f[b][((E^R[b])&h[b])>>>0];this._lBlock=E,this._rBlock=A^T}var S=this._lBlock;this._lBlock=this._rBlock,this._rBlock=S,m.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),x[y]=this._lBlock,x[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function m(x,y){var _=(this._lBlock>>>x^this._rBlock)&y;this._rBlock^=_,this._lBlock^=_<<x}function g(x,y){var _=(this._rBlock>>>x^this._lBlock)&y;this._lBlock^=_,this._rBlock^=_<<x}n.DES=a._createHelper(p);var v=o.TripleDES=a.extend({_doReset:function(){var x=this._key,y=x.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var _=y.slice(0,2),I=y.length<4?y.slice(0,2):y.slice(2,4),R=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=p.createEncryptor(i.create(_)),this._des2=p.createEncryptor(i.create(I)),this._des3=p.createEncryptor(i.create(R))},encryptBlock:function(x,y){this._des1.encryptBlock(x,y),this._des2.decryptBlock(x,y),this._des3.encryptBlock(x,y)},decryptBlock:function(x,y){this._des3.decryptBlock(x,y),this._des2.encryptBlock(x,y),this._des1.decryptBlock(x,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(v)}(),r.TripleDES})}(Hm)),Hm.exports}var jm={exports:{}},qb;function N7(){return qb||(qb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),ll(),cl(),go(),vn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=a.RC4=i.extend({_doReset:function(){for(var u=this._key,f=u.words,h=u.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,g=0;m<256;m++){var v=m%h,x=f[v>>>2]>>>24-v%4*8&255;g=(g+p[m]+x)%256;var y=p[m];p[m]=p[g],p[g]=y}this._i=this._j=0},_doProcessBlock:function(u,f){u[f]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,f=this._i,h=this._j,p=0,m=0;m<4;m++){f=(f+1)%256,h=(h+u[f])%256;var g=u[f];u[f]=u[h],u[h]=g,p|=u[(u[f]+u[h])%256]<<24-m*8}return this._i=f,this._j=h,p}n.RC4=i._createHelper(o);var c=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});n.RC4Drop=i._createHelper(c)}(),r.RC4})}(jm)),jm.exports}var Gm={exports:{}},Xb;function M7(){return Xb||(Xb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),ll(),cl(),go(),vn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.Rabbit=i.extend({_doReset:function(){for(var h=this._key.words,p=this.cfg.iv,m=0;m<4;m++)h[m]=(h[m]<<8|h[m]>>>24)&16711935|(h[m]<<24|h[m]>>>8)&4278255360;var g=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],v=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var m=0;m<4;m++)f.call(this);for(var m=0;m<8;m++)v[m]^=g[m+4&7];if(p){var x=p.words,y=x[0],_=x[1],I=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,R=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,A=I>>>16|R&4294901760,E=R<<16|I&65535;v[0]^=I,v[1]^=A,v[2]^=R,v[3]^=E,v[4]^=I,v[5]^=A,v[6]^=R,v[7]^=E;for(var m=0;m<4;m++)f.call(this)}},_doProcessBlock:function(h,p){var m=this._X;f.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var g=0;g<4;g++)o[g]=(o[g]<<8|o[g]>>>24)&16711935|(o[g]<<24|o[g]>>>8)&4278255360,h[p+g]^=o[g]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,p=this._C,m=0;m<8;m++)l[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var m=0;m<8;m++){var g=h[m]+p[m],v=g&65535,x=g>>>16,y=((v*v>>>17)+v*x>>>15)+x*x,_=((g&4294901760)*g|0)+((g&65535)*g|0);c[m]=y^_}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=i._createHelper(u)}(),r.Rabbit})}(Gm)),Gm.exports}var Wm={exports:{}},Yb;function L7(){return Yb||(Yb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),ll(),cl(),go(),vn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.RabbitLegacy=i.extend({_doReset:function(){var h=this._key.words,p=this.cfg.iv,m=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],g=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var v=0;v<4;v++)f.call(this);for(var v=0;v<8;v++)g[v]^=m[v+4&7];if(p){var x=p.words,y=x[0],_=x[1],I=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,R=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,A=I>>>16|R&4294901760,E=R<<16|I&65535;g[0]^=I,g[1]^=A,g[2]^=R,g[3]^=E,g[4]^=I,g[5]^=A,g[6]^=R,g[7]^=E;for(var v=0;v<4;v++)f.call(this)}},_doProcessBlock:function(h,p){var m=this._X;f.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var g=0;g<4;g++)o[g]=(o[g]<<8|o[g]>>>24)&16711935|(o[g]<<24|o[g]>>>8)&4278255360,h[p+g]^=o[g]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,p=this._C,m=0;m<8;m++)l[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var m=0;m<8;m++){var g=h[m]+p[m],v=g&65535,x=g>>>16,y=((v*v>>>17)+v*x>>>15)+x*x,_=((g&4294901760)*g|0)+((g&65535)*g|0);c[m]=y^_}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=i._createHelper(u)}(),r.RabbitLegacy})}(Wm)),Wm.exports}var zm={exports:{}},Jb;function B7(){return Jb||(Jb=1,function(t,e){(function(r,n,s){t.exports=n(Qt(),ll(),cl(),go(),vn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function f(v,x){let y=x>>24&255,_=x>>16&255,I=x>>8&255,R=x&255,A=v.sbox[0][y]+v.sbox[1][_];return A=A^v.sbox[2][I],A=A+v.sbox[3][R],A}function h(v,x,y){let _=x,I=y,R;for(let A=0;A<o;++A)_=_^v.pbox[A],I=f(v,_)^I,R=_,_=I,I=R;return R=_,_=I,I=R,I=I^v.pbox[o],_=_^v.pbox[o+1],{left:_,right:I}}function p(v,x,y){let _=x,I=y,R;for(let A=o+1;A>1;--A)_=_^v.pbox[A],I=f(v,_)^I,R=_,_=I,I=R;return R=_,_=I,I=R,I=I^v.pbox[1],_=_^v.pbox[0],{left:_,right:I}}function m(v,x,y){for(let E=0;E<4;E++){v.sbox[E]=[];for(let T=0;T<256;T++)v.sbox[E][T]=c[E][T]}let _=0;for(let E=0;E<o+2;E++)v.pbox[E]=l[E]^x[_],_++,_>=y&&(_=0);let I=0,R=0,A=0;for(let E=0;E<o+2;E+=2)A=h(v,I,R),I=A.left,R=A.right,v.pbox[E]=I,v.pbox[E+1]=R;for(let E=0;E<4;E++)for(let T=0;T<256;T+=2)A=h(v,I,R),I=A.left,R=A.right,v.sbox[E][T]=I,v.sbox[E][T+1]=R;return!0}var g=a.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var v=this._keyPriorReset=this._key,x=v.words,y=v.sigBytes/4;m(u,x,y)}},encryptBlock:function(v,x){var y=h(u,v[x],v[x+1]);v[x]=y.left,v[x+1]=y.right},decryptBlock:function(v,x){var y=p(u,v[x],v[x+1]);v[x]=y.left,v[x+1]=y.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(g)}(),r.Blowfish})}(zm)),zm.exports}(function(t,e){(function(r,n,s){t.exports=n(Qt(),Tp(),p7(),m7(),ll(),g7(),cl(),MI(),Ax(),v7(),LI(),x7(),y7(),E7(),wx(),_7(),go(),vn(),b7(),S7(),T7(),A7(),w7(),C7(),I7(),k7(),D7(),P7(),R7(),F7(),O7(),N7(),M7(),L7(),B7())})(Bt,function(r){return r})})(NI);var U7=NI.exports;const ji=OI(U7);class $7{constructor(){this.encryptionKey="your-dev-key-here"}async encryptAndUploadPdf(e,r){try{if(console.log(" Starting PDF encryption for student:",r),console.log(" File details:",{name:e.name,size:e.size,type:e.type}),(!this.encryptionKey||this.encryptionKey==="your-dev-key-here")&&console.warn(" Using default encryption key - set VITE_PDF_ENCRYPTION_KEY in production"),!$t.currentUser)throw new Error("User not authenticated");if(console.log(" Current user:",$t.currentUser.uid),r){console.log(" Checking student access for:",r);try{if(!(await tr(Qe(Xe,"students",r))).exists())throw new Error(`Student ${r} not found`);console.log(" Student document exists")}catch(l){throw console.error(" Student access check failed:",l),new Error(`Student access check failed: ${l.message}`)}}console.log(" Reading file as ArrayBuffer...");const n=await e.arrayBuffer();console.log(" ArrayBuffer read, size:",n.byteLength),console.log(" Converting to Base64...");const s=btoa(new Uint8Array(n).reduce((l,c)=>l+String.fromCharCode(c),""));console.log(" Base64 conversion complete, length:",s.length),console.log(" Encrypting content...");const i=ji.AES.encrypt(s,this.encryptionKey).toString();console.log(" Encryption complete, length:",i.length);const a=`${c7()}.enc`;console.log(" Generated filename:",a),console.log(" Uploading to storage...");const o=nh(Ec,`students/${r}/${a}`);return console.log(" Storage path:",`students/${r}/${a}`),await iI(o,i),console.log(" Upload to storage successful"),console.log(" Storing metadata in Firestore..."),await Kt(Qe(Xe,"pdfMetadata",a),{originalName:e.name,studentId:r,uploadedBy:$t.currentUser.uid,uploadedAt:$s(),accessCount:0,lastAccessed:null,encryptionVersion:"1.0",fileSize:e.size,mimeType:e.type}),console.log(" Metadata stored successfully"),a}catch(n){throw console.error(" PDF encryption failed:",n),console.error(" Error details:",{message:n.message,code:n.code,stack:n.stack}),new Error(`Failed to securely store PDF: ${n.message}`)}}async downloadAndDecryptPdf(e,r){try{if(!await this.verifyAccess(r))throw new Error("Access denied");const{auth:s}=await sa(async()=>{const{auth:h}=await Promise.resolve().then(()=>mI);return{auth:h}},void 0),i=await s.currentUser.getIdToken(),a=`https://downloadstudentfile-zr6j2ycwuq-uc.a.run.app/downloadStudentFile?studentId=${r}&fileName=${e}`;console.log(" Using proxy URL for secure download");const o=await fetch(a,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Failed to fetch file: ${o.status} ${o.statusText}`);const l=await o.text();console.log(" Downloaded encrypted content via proxy");const c=ji.AES.decrypt(l,this.encryptionKey).toString(ji.enc.Utf8),u=atob(c),f=new Blob([new Uint8Array(u.split("").map(h=>h.charCodeAt(0)))],{type:"application/pdf"});return console.log(" PDF decrypted and blob created"),f}catch(n){throw console.error("PDF decryption failed:",n),new Error("Failed to retrieve PDF")}}async verifyAccess(e){var r,n,s,i,a,o;try{const l=$t.currentUser;if(!l)return!1;const u=(await tr(Qe(Xe,"users",l.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager")return((s=(n=(r=(await tr(Qe(Xe,"students",e))).data())==null?void 0:r.app)==null?void 0:n.studentData)==null?void 0:s.caseManagerId)===l.uid;if(u.role==="teacher"){const h=((o=(a=(i=(await tr(Qe(Xe,"students",e))).data())==null?void 0:i.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(h).includes(l.uid)}return!1}catch(l){return console.error("Access verification failed:",l),!1}}async logAccess(e,r){try{await Kt(Qe(Xe,"pdfAccessLogs",`${e}_${Date.now()}`),{fileId:e,studentId:r,userId:$t.currentUser.uid,userEmail:$t.currentUser.email,accessTime:$s(),userAgent:navigator.userAgent,accessType:"download"})}catch(n){console.error("Failed to log access:",n)}}async updateAccessMetadata(e){try{const r=Qe(Xe,"pdfMetadata",e),n=await tr(r);n.exists()&&await Kt(r,{...n.data(),accessCount:(n.data().accessCount||0)+1,lastAccessed:$s()},{merge:!0})}catch(r){console.error("Failed to update access metadata:",r)}}async getFileAccessHistory(e){try{const r=ur(wt(Xe,"pdfAccessLogs"),jr("fileId","==",e),dn("accessTime","desc"));return(await jt(r)).docs.map(s=>s.data())}catch(r){return console.error("Failed to fetch access history:",r),[]}}}const g0=new $7;function Cx(){const t=se(!1),e=se(!1),r=se(null);return{uploadPdf:async(a,o)=>{t.value=!0,r.value=null;try{if(a.type!=="application/pdf")throw new Error("Only PDF files are allowed");if(a.size>10*1024*1024)throw new Error("File size must be less than 10MB");return await g0.encryptAndUploadPdf(a,o)}catch(l){throw r.value=l.message,l}finally{t.value=!1}},downloadPdf:async(a,o,l)=>{e.value=!0,r.value=null;try{const c=await g0.downloadAndDecryptPdf(a,o),u=window.URL.createObjectURL(c),f=window.open(u,"_blank","noopener,noreferrer");setTimeout(()=>{window.URL.revokeObjectURL(u)},5e3)}catch(c){throw r.value=c.message,c}finally{e.value=!1}},getAccessHistory:async a=>{try{return await g0.getFileAccessHistory(a)}catch(o){return r.value=o.message,[]}},isUploading:t,isDownloading:e,error:r}}const V7={class:"docs-item"},H7={__name:"StudentDocsCell",props:{student:{type:Object,required:!0},getDocumentUrl:{type:Function,required:!0}},setup(t){const e=t,{downloadPdf:r}=Cx(),n=async s=>{var i,a,o,l;try{if(!s){alert("File not found.");return}const c=((a=(i=e.student.app)==null?void 0:i.documents)==null?void 0:a.bipFileName)||((l=(o=e.student.app)==null?void 0:o.documents)==null?void 0:l.ataglanceFileName)||"document.pdf";await r(s,e.student.id,c)}catch(c){console.error("Error opening secure file:",c),alert("Error opening file. Please try again.")}};return(s,i)=>(B(),V("td",null,[d("div",V7,[t.getDocumentUrl(t.student,"ataglancePdfUrl")?(B(),V("a",{key:0,href:"#",onClick:i[0]||(i[0]=mn(a=>n(t.getDocumentUrl(t.student,"ataglancePdfUrl")),["prevent"]))}," At-A-Glance ")):_e("",!0),t.getDocumentUrl(t.student,"bipPdfUrl")?(B(),V("a",{key:1,href:"#",onClick:i[1]||(i[1]=mn(a=>n(t.getDocumentUrl(t.student,"bipPdfUrl")),["prevent"]))}," BIP ")):_e("",!0),!t.getDocumentUrl(t.student,"ataglancePdfUrl")&&!t.getDocumentUrl(t.student,"bipPdfUrl")?(B(),V(Re,{key:2},[Oe("")],64)):_e("",!0)])]))}},j7={class:"action-buttons"},G7=["title"],W7={__name:"StudentActionsCell",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!1},studentData:{type:Object,required:!1}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,n=Ae(()=>{var c,u,f;if(!((c=r.currentUser)!=null&&c.role)||!r.student)return!1;const a=r.currentUser.role,o=r.currentUser.uid;return a==="paraeducator"||a==="teacher"?!1:a==="case_manager"?((f=(u=r.student.app)==null?void 0:u.studentData)==null?void 0:f.caseManagerId)===o:["admin","administrator","sped_chair","administrator_504_CM","service_provider"].includes(a)}),s=Ae(()=>{var a;return!((a=r.currentUser)!=null&&a.role)||!r.student||!r.studentData?!1:Mn.canSendFeedback(r.currentUser.uid,r.currentUser.role,r.student,r.studentData)});function i(a,o=!1){if(!(a!=null&&a.seconds))return"";const l=new Date(a.seconds*1e3);return o?l.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}):l.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})+" at "+l.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"})}return(a,o)=>{var l,c;return B(),V("td",null,[d("div",j7,[n.value?(B(),V("button",{key:0,class:"edit-btn",onClick:o[0]||(o[0]=u=>a.$emit("edit",t.student.id)),title:"Edit Student"},"")):_e("",!0),d("button",{class:"email-btn",onClick:o[1]||(o[1]=u=>a.$emit("email",t.student.id)),title:"Email Student"},""),s.value?(B(),V("button",{key:1,class:"teacher-feedback-btn",onClick:o[2]||(o[2]=u=>a.$emit("teacher-feedback",t.student.id)),title:"Send Teacher Feedback Form"},"")):_e("",!0)]),(c=(l=t.student)==null?void 0:l.updatedAt)!=null&&c.seconds?(B(),V("div",{key:0,class:"updated-date",title:"Last Updated: "+i(t.student.updatedAt)},J(i(t.student.updatedAt,!0)),9,G7)):_e("",!0)])}}},z7=yt(W7,[["__scopeId","data-v-10589925"]]),K7={key:0,class:"schedule-list"},q7={class:"period-assignment"},X7={class:"primary-line"},Y7={class:"period-label"},J7={class:"primary-teacher"},Q7={key:0,class:"coteaching-info"},Z7=["title"],eU={key:1,class:"no-schedule"},tU={__name:"StudentScheduleCell",props:{student:{type:Object,required:!0},getSchedule:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){const e=r=>r&&typeof r=="object"&&r.coTeaching&&r.teacherId;return(r,n)=>(B(),V("td",null,[t.getSchedule(t.student)?(B(),V("div",K7,[d("ul",null,[(B(!0),V(Re,null,Ve(t.getSchedule(t.student),(s,i)=>(B(),V("li",{key:i,class:"schedule-period"},[d("div",q7,[d("div",X7,[d("span",Y7,J(i)+":",1),d("span",J7,J(t.getUserInitialLastName(s.teacherId||s)),1)]),e(s)?(B(),V("div",Q7,[d("span",{class:"coteaching-indicator",title:`Co-teach ${s.coTeaching.subject}`},J(t.getUserInitialLastName(s.coTeaching.caseManagerId))+" (C"+J(s.coTeaching.subject.charAt(0))+") ",9,Z7)])):_e("",!0)])]))),128))])])):(B(),V("div",eU,""))]))}},rU={key:0,class:"services-section"},nU={class:"services-container"},sU={key:1,class:"services-section"},aU={class:"services-container"},iU={key:0,class:"service-provider-item"},oU={key:0,class:"service-provider-item"},lU={key:1,class:"service-provider-item"},cU={key:2,class:"service-provider-item"},uU={key:3,class:"service-provider-item"},dU={key:4,class:"service-provider-item"},fU={key:5,class:"service-provider-item"},hU={__name:"StudentServicesCell",props:{student:{type:Object,required:!0},appSettings:{type:Object,required:!1},getClassServices:{type:Function,required:!0},getOtherServices:{type:Function,required:!0},hasServiceProviders:{type:Function,required:!0},getServiceProviderId:{type:Function,required:!0},getProviderFieldName:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){return(e,r)=>(B(),V("td",null,[t.getClassServices(t.student).length>0||t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(B(),V(Re,{key:0},[t.getClassServices(t.student).length>0?(B(),V("div",rU,[r[0]||(r[0]=d("strong",null,"Class Services:",-1)),d("div",nU,[(B(!0),V(Re,null,Ve(t.getClassServices(t.student),n=>(B(),V("span",{key:n,class:"service-item"},J(n),1))),128))])])):_e("",!0),t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(B(),V("div",sU,[r[1]||(r[1]=d("strong",null,"Related Services:",-1)),d("div",aU,[(B(!0),V(Re,null,Ve(t.getOtherServices(t.student),n=>(B(),V("span",{key:n,class:"service-item"},J(n),1))),128)),t.appSettings&&t.appSettings.value&&t.appSettings.value.serviceProviders?(B(!0),V(Re,{key:0},Ve(t.appSettings.value.serviceProviders,n=>(B(),V(Re,{key:n},[t.getServiceProviderId(t.student,t.getProviderFieldName(n))?(B(),V("span",iU,J(n)+" ("+J(t.getUserInitialLastName(t.getServiceProviderId(t.student,t.getProviderFieldName(n))))+") ",1)):_e("",!0)],64))),128)):(B(),V(Re,{key:1},[t.getServiceProviderId(t.student,"speechId")?(B(),V("span",oU,"SP ("+J(t.getUserInitialLastName(t.getServiceProviderId(t.student,"speechId")))+")",1)):_e("",!0),t.getServiceProviderId(t.student,"mhId")?(B(),V("span",lU,"MH ("+J(t.getUserInitialLastName(t.getServiceProviderId(t.student,"mhId")))+")",1)):_e("",!0),t.getServiceProviderId(t.student,"otId")?(B(),V("span",cU,"OT ("+J(t.getUserInitialLastName(t.getServiceProviderId(t.student,"otId")))+")",1)):_e("",!0),t.getServiceProviderId(t.student,"ptId")?(B(),V("span",uU,"PT ("+J(t.getUserInitialLastName(t.getServiceProviderId(t.student,"ptId")))+")",1)):_e("",!0),t.getServiceProviderId(t.student,"scId")?(B(),V("span",dU,"SC ("+J(t.getUserInitialLastName(t.getServiceProviderId(t.student,"scId")))+")",1)):_e("",!0),t.getServiceProviderId(t.student,"trId")?(B(),V("span",fU,"TR ("+J(t.getUserInitialLastName(t.getServiceProviderId(t.student,"trId")))+")",1)):_e("",!0)],64))])])):_e("",!0)],64)):(B(),V(Re,{key:1},[Oe("  ")],64))]))}},pU={key:1,class:"pill-list"},mU=["innerHTML"],gU={key:2},Qb={__name:"AccommodationsCell",props:{student:{type:Object,required:!0},fieldName:{type:String,required:!0},flagType:{type:String,required:!0},flagText:{type:String,required:!0},flagClass:{type:String,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(B(),V("td",{class:Ze(["instruction-cell",{"with-flag":t.getFlagValue(t.student,t.flagType)}])},[t.getFlagValue(t.student,t.flagType)?(B(),V("div",{key:0,class:Ze(["flag-overlay",t.flagClass])},J(t.flagText),3)):_e("",!0),Z(dt)(t.student,t.fieldName)?(B(),V("div",pU,[d("div",{innerHTML:t.formatListFromText(Z(dt)(t.student,t.fieldName))},null,8,mU)])):(B(),V("div",gU,""))],2))}},vU={class:"student-name"},xU={class:"std-info-subheading"},yU={key:0,class:"schedule-list"},EU={class:"period-assignment"},_U={class:"primary-line"},bU={class:"period-label"},SU={class:"primary-teacher"},TU={key:0,class:"coteaching-info"},AU=["title"],wU={key:1,class:"no-schedule"},CU={key:0,class:"flag-overlay flag-separate-setting"},IU={key:1,class:"bullet-list"},kU=["innerHTML"],DU={key:2},PU={class:"student-name"},RU=["title"],FU={class:"std-info-subheading"},OU={class:"student-dates print"},NU={key:0,class:"direct-assignment-badge"},Mf={__name:"StudentTable",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})},currentUser:{type:Object,default:null},studentData:{type:Object,default:null},testingView:{type:Boolean,default:!1},aideSchedule:{type:Object,default:()=>({})}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,{appSettings:n,getUserName:s,getUserInitialLastName:i,formatDate:a,getMeetingUrgencyClass:o,getReviewUrgencyClass:l,getReevalUrgencyClass:c,getCaseManagerId:u,getFlagValue:f,getDocumentUrl:h,getSchedule:p,getClassServices:m,getOtherServices:g,hasServiceProviders:v,getServiceProviderId:x,getProviderFieldName:y,isDirectAssignment:_,formatListFromText:I}=s7(r),R=A=>A&&typeof A=="object"&&A.coTeaching&&A.teacherId;return Vt(()=>r.student,A=>{var E,T,b,S,k,w,D;A&&Object.keys(A).length>0&&(form.schedule=((T=(E=A.app)==null?void 0:E.schedule)==null?void 0:T.periods)||A.schedule||((S=(b=A.aeries)==null?void 0:b.schedule)==null?void 0:S.periods)||{},console.log("StudentForm DEBUG - form.schedule:",form.schedule),console.log("StudentForm DEBUG - aeries.schedule:",(k=r.student.aeries)==null?void 0:k.schedule),console.log("StudentForm DEBUG - app.schedule.periods:",(D=(w=r.student.app)==null?void 0:w.schedule)==null?void 0:D.periods))},{immediate:!0,deep:!0}),(A,E)=>(B(),V("table",{class:Ze(["students-table",{"testing-view":t.testingView}])},[d("thead",null,[d("tr",null,[t.testingView?(B(),V(Re,{key:0},[E[0]||(E[0]=d("th",{class:"print"},"Student Info",-1)),E[1]||(E[1]=d("th",{class:"print"},"Schedule",-1)),E[2]||(E[2]=d("th",{class:"print"},"Assessment Accom.",-1))],64)):(B(),V(Re,{key:1},[E[3]||(E[3]=d("th",{class:"print"},"Student Info",-1)),E[4]||(E[4]=d("th",{class:"print"},"Services",-1)),E[5]||(E[5]=d("th",{class:"print"},"Schedule",-1)),E[6]||(E[6]=d("th",{class:"print"},"Instruction Accom.",-1)),E[7]||(E[7]=d("th",{class:"print"},"Assessment Accom.",-1)),E[8]||(E[8]=d("th",{class:"print"},"Docs",-1)),E[9]||(E[9]=d("th",{class:"print"},"Actions",-1))],64))])]),d("tbody",null,[(B(!0),V(Re,null,Ve(t.students,T=>{var b;return B(),V("tr",{key:T.id},[t.testingView?(B(),V(Re,{key:0},[d("td",null,[d("div",vU,[d("strong",null,J(Z(dt)(T,"firstName"))+" "+J(Z(dt)(T,"lastName")),1)]),d("div",xU,[d("div",null,"Grd: "+J(Z(dt)(T,"grade"))+" | Prg: "+J(Z(dt)(T,"plan")),1),d("div",null,"CM: "+J(Z(s)(Z(u)(T))),1)])]),d("td",null,[Z(p)(T)?(B(),V("div",yU,[d("ul",null,[(B(!0),V(Re,null,Ve(Z(p)(T),(S,k)=>(B(),V("li",{key:k,class:"schedule-period"},[d("div",EU,[d("div",_U,[d("span",bU,J(k)+":",1),d("span",SU,J(Z(i)(S.teacherId||S)),1)]),R(S)?(B(),V("div",TU,[d("span",{class:"coteaching-indicator",title:`Co-teach ${S.coTeaching.subject}`},J(Z(i)(S.coTeaching.caseManagerId))+" (C"+J(S.coTeaching.subject.charAt(0))+") ",9,AU)])):_e("",!0)])]))),128))])])):(B(),V("div",wU,""))]),d("td",{class:Ze(["instruction-cell",{"with-flag":Z(f)(T,"flag2")}])},[Z(f)(T,"flag2")?(B(),V("div",CU,"Separate setting")):_e("",!0),Z(dt)(T,"assessment")?(B(),V("div",IU,[d("div",{innerHTML:Z(I)(Z(dt)(T,"assessment"))},null,8,kU)])):(B(),V("div",DU,""))],2)],64)):(B(),V(Re,{key:1},[d("td",null,[d("div",PU,[d("strong",null,J(Z(dt)(T,"firstName"))+" "+J(Z(dt)(T,"lastName")),1),d("span",{class:"data-source",title:`Data source: ${Z(ru)(T,"firstName")}`},J(Z(ru)(T,"firstName")==="Override"?"":Z(ru)(T,"firstName")==="App"?"":Z(ru)(T,"firstName")==="Aeries"?"":Z(ru)(T,"firstName")==="SEIS"?"":""),9,RU)]),d("div",FU,[d("div",null,"Grd: "+J(Z(dt)(T,"grade"))+" | Prg: "+J(Z(dt)(T,"plan")),1),d("div",null,"CM: "+J(Z(s)(Z(u)(T))),1)]),d("div",OU,[d("span",{class:Ze(["badge badge-review plan-review",Z(l)(T)])},"PR: "+J(Z(a)(Z(dt)(T,"reviewDate"))),3),d("span",{class:Ze(["badge badge-reeval reeval-due",Z(c)(T)])},"RE: "+J(Z(a)(Z(dt)(T,"reevalDate"))),3),d("span",{class:Ze(["badge badge-meeting meeting-date",[Z(o)(T),Z(dt)(T,"meetingDate")?"date-set":""]])},"  "+J(Z(a)(Z(dt)(T,"meetingDate"))||"Not set"),3)]),((b=t.currentUser)==null?void 0:b.role)==="paraeducator"&&Z(_)(T.id)?(B(),V("div",NU,E[10]||(E[10]=[d("span",{class:"badge badge-direct"},"Direct Assignment",-1)]))):_e("",!0)]),st(hU,{student:T,"app-settings":Z(n),"get-class-services":Z(m),"get-other-services":Z(g),"has-service-providers":Z(v),"get-service-provider-id":Z(x),"get-provider-field-name":Z(y),"get-user-initial-last-name":Z(i)},null,8,["student","app-settings","get-class-services","get-other-services","has-service-providers","get-service-provider-id","get-provider-field-name","get-user-initial-last-name"]),st(tU,{student:T,"get-schedule":Z(p),"get-user-initial-last-name":Z(i)},null,8,["student","get-schedule","get-user-initial-last-name"]),st(Qb,{student:T,"field-name":"instruction","flag-type":"flag1","flag-text":"Preferential Seating","flag-class":"flag-preferential-seating","get-flag-value":Z(f),"format-list-from-text":Z(I)},null,8,["student","get-flag-value","format-list-from-text"]),st(Qb,{student:T,"field-name":"assessment","flag-type":"flag2","flag-text":"Separate Setting","flag-class":"flag-separate-setting","get-flag-value":Z(f),"format-list-from-text":Z(I)},null,8,["student","get-flag-value","format-list-from-text"]),st(H7,{student:T,"get-document-url":Z(h)},null,8,["student","get-document-url"]),st(z7,{student:T,"current-user":t.currentUser,"student-data":t.studentData,onEdit:S=>A.$emit("edit",T.id),onEmail:S=>A.$emit("email",T.id),onTeacherFeedback:S=>A.$emit("teacher-feedback",T.id)},null,8,["student","current-user","student-data","onEdit","onEmail","onTeacherFeedback"])],64))])}),128))])],2))}};function MU(t,e){const{appSettings:r,loadAppSettings:n,loading:s,error:i}=Ws(),a=se(!1);Ut(async()=>{try{console.log("useStudentForm: Starting to load app settings..."),await n(),console.log("useStudentForm: App settings loaded successfully:",r.value)}catch(S){console.error("useStudentForm: Error loading app settings:",S)}});const o=Ae(()=>{var k;const S=((k=r.value)==null?void 0:k.numPeriods)||7;return Array.from({length:S},(w,D)=>D+1)}),l=Ae(()=>{var S;return(S=r.value)!=null&&S.grades&&r.value.grades.length>0?(console.log("useStudentForm: Using app settings grades:",r.value.grades),r.value.grades):(console.log("useStudentForm: Using fallback grades: [7, 8]"),["7","8"])}),c=Ae(()=>{var S;if((S=r.value)!=null&&S.classServices&&r.value.classServices.length>0){const k=r.value.classServices.filter(w=>w.enabledSubcategories&&w.enabledSubcategories.length>0);return console.log("useStudentForm: Available class services:",k.length,"services"),k}return console.log("useStudentForm: No class services available"),[]}),u=Ae(()=>{var S;return(S=r.value)!=null&&S.serviceProviders&&r.value.serviceProviders.length>0?(console.log("useStudentForm: Using app settings service providers:",r.value.serviceProviders.length,"providers"),r.value.serviceProviders):(console.log("useStudentForm: No service providers configured in app settings"),[])}),f=Ae(()=>{var S;return(S=r.value)!=null&&S.customServiceProviders?r.value.customServiceProviders:[]}),h=Ae(()=>{let S=t.users.userRoles?t.users.userRoles:{teachers:t.users.teachers||[],caseManagers:t.users.caseManagers||[],speech:t.users.speech||[],ot:t.users.ot||[],mh:t.users.mh||[]};return S.teachers&&(S={...S,teachers:S.teachers.map(k=>({...k,id:String(k.id)}))}),S}),p=S=>{var k,w,D,N,F,P,O,M,U,z,j,H,W,K,re,me,ce,pe,te,Q,ye,X,q,Y,ne,ve,ae,le,de,Se,Ie,Te,Ge,ke,$e,Be,We,ze,Ee,xe,be,Ne,je,ot,gt,Et,Lt,ft;return{ssid:S.id||"",firstName:dt(S,"firstName")||"",lastName:dt(S,"lastName")||"",grade:dt(S,"grade")||"7",plan:dt(S,"plan")||"IEP",reviewDate:dt(S,"reviewDate")||"",reevalDate:dt(S,"reevalDate")||"",meetingDate:dt(S,"meetingDate")||"",caseManagerId:((w=(k=S.app)==null?void 0:k.studentData)==null?void 0:w.caseManagerId)||S.caseManagerId||S.casemanager_id||"",schedule:((N=(D=S.app)==null?void 0:D.schedule)==null?void 0:N.periods)||((P=(F=S.aeries)==null?void 0:F.schedule)==null?void 0:P.periods)||S.schedule||{},services:((M=(O=S.app)==null?void 0:O.schedule)==null?void 0:M.classServices)||S.services||[],speechId:((z=(U=S.app)==null?void 0:U.providers)==null?void 0:z.speechId)||S.speechId||S.speech_id||"",otId:((H=(j=S.app)==null?void 0:j.providers)==null?void 0:H.otId)||S.otId||S.ot_id||"",mhId:((K=(W=S.app)==null?void 0:W.providers)==null?void 0:K.mhId)||S.mhId||S.mh_id||"",ptId:((me=(re=S.app)==null?void 0:re.providers)==null?void 0:me.ptId)||S.ptId||S.pt_id||"",scId:((pe=(ce=S.app)==null?void 0:ce.providers)==null?void 0:pe.scId)||S.scId||S.sc_id||"",trId:((Q=(te=S.app)==null?void 0:te.providers)==null?void 0:Q.trId)||S.trId||S.tr_id||"",audId:((X=(ye=S.app)==null?void 0:ye.providers)==null?void 0:X.audId)||S.audId||S.aud_id||"",viId:((Y=(q=S.app)==null?void 0:q.providers)==null?void 0:Y.viId)||S.viId||S.vi_id||"",atId:((ve=(ne=S.app)==null?void 0:ne.providers)==null?void 0:ve.atId)||S.atId||S.at_id||"",dhhId:((le=(ae=S.app)==null?void 0:ae.providers)==null?void 0:le.dhhId)||S.dhhId||S.dhh_id||"",omId:((Se=(de=S.app)==null?void 0:de.providers)==null?void 0:Se.omId)||S.omId||S.om_id||"",bisId:((Te=(Ie=S.app)==null?void 0:Ie.providers)==null?void 0:Te.bisId)||S.bisId||S.bis_id||"",hnId:((ke=(Ge=S.app)==null?void 0:Ge.providers)==null?void 0:ke.hnId)||S.hnId||S.hn_id||"",swId:((Be=($e=S.app)==null?void 0:$e.providers)==null?void 0:Be.swId)||S.swId||S.sw_id||"",instruction:dt(S,"instruction")||"",assessment:dt(S,"assessment")||"",flag1:((ze=(We=S.app)==null?void 0:We.flags)==null?void 0:ze.flag1)||S.flag1||!1,flag2:((xe=(Ee=S.app)==null?void 0:Ee.flags)==null?void 0:xe.flag2)||S.flag2||!1,ataglancePdfUrl:((Ne=(be=S.app)==null?void 0:be.documents)==null?void 0:Ne.ataglancePdfUrl)||S.ataglancePdfUrl||S.ataglance_pdf_url||"",bipPdfUrl:((ot=(je=S.app)==null?void 0:je.documents)==null?void 0:ot.bipPdfUrl)||S.bipPdfUrl||S.bip_pdf_url||"",ataglanceFileName:((Et=(gt=S.app)==null?void 0:gt.documents)==null?void 0:Et.ataglanceFileName)||S.ataglanceFileName||"",bipFileName:((ft=(Lt=S.app)==null?void 0:Lt.documents)==null?void 0:ft.bipFileName)||S.bipFileName||"",bipFile:null,ataglanceFile:null,removeBipFile:!1,removeAtaglanceFile:!1}},m=xs(p(t.student||{})),g=S=>{const k=[];return S&&typeof S=="object"&&Object.entries(S).forEach(([w,D])=>{if(D&&typeof D=="object"&&D.coTeaching){const N=D.coTeaching.subject;N&&k.push(`Co-teach: ${N}`)}}),k},v=()=>{const S=g(m.schedule),k=m.services.filter(w=>!w.startsWith("Co-teach:"));m.services=[...k,...S]};Vt(()=>m.schedule,()=>{v()},{deep:!0}),Vt(()=>{var S;return(S=t.student)==null?void 0:S.id},(S,k)=>{var w,D,N,F,P,O,M;if(S&&S!==k){console.log(" useStudentForm DEBUG - Student ID changed, updating form:",S),console.log(" useStudentForm DEBUG - newStudent.app?.schedule?.periods:",JSON.stringify((N=(D=(w=t.student)==null?void 0:w.app)==null?void 0:D.schedule)==null?void 0:N.periods,null,2)),console.log(" useStudentForm DEBUG - newStudent.aeries?.schedule?.periods:",JSON.stringify((O=(P=(F=t.student)==null?void 0:F.aeries)==null?void 0:P.schedule)==null?void 0:O.periods,null,2)),console.log(" useStudentForm DEBUG - newStudent.schedule:",JSON.stringify((M=t.student)==null?void 0:M.schedule,null,2));const U=p(t.student);Object.assign(m,U),v(),console.log(" useStudentForm DEBUG - Processed form.schedule:",m.schedule)}},{immediate:!0}),Vt(()=>r.value,S=>{console.log("useStudentForm: App settings watcher triggered:",S),S!=null&&S.grades&&S.grades.length>0&&(S.grades.includes(m.grade)||(m.grade=S.grades[0]||"7"))},{immediate:!0,deep:!0});const x=(S,k)=>{const w=S.target.files[0]||null;if(w){const D=Mc(w,{allowedTypes:["pdf"],maxSize:10485760,fieldName:k==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!D.isValid){alert(D.error),S.target.value="";return}const N=Wr(w.name);if(!N.isSafe){alert(`File name contains potentially dangerous content: ${N.threats.join(", ")}`),S.target.value="";return}}m[k]=w},y=S=>{S.preventDefault(),S.stopPropagation(),m.removeBipFile=!0,m.bipFile=null},_=S=>{S.preventDefault(),S.stopPropagation(),m.removeAtaglanceFile=!0,m.ataglanceFile=null},I={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"},R=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],A=S=>{var w;if((w=r.value)!=null&&w.serviceProviders&&Array.isArray(r.value.serviceProviders)){const D=(r.value.serviceProvidersDetails||R).find(N=>N.abbreviation===S);if(D)return D.name+" ("+S+")"}const k=R.find(D=>D.abbreviation===S);return k?k.name+" ("+S+")":S},E=S=>{const w={SLP:"speech",OT:"ot",MH:"mh",PT:"pt",SC:"sc",TR:"tr",AUD:"aud",VI:"vi",AT:"at",DHH:"dhh","O&M":"om",BIS:"bis",HN:"hn",SW:"sw"}[S]||S.toLowerCase();return h.value[w]||[]},T=()=>{const S=PI(m),k={app:{studentData:{firstName:S.firstName,lastName:S.lastName,grade:S.grade,plan:S.plan,caseManagerId:S.caseManagerId}}},w=DI(k,{isNew:t.mode==="new"});if(!w.isValid)return alert(`Please fix the following errors:

${w.errors.join(`
`)}`),!1;const D=["firstName","lastName","instruction","assessment"];for(const N of D)if(m[N]){const F=Wr(m[N]);if(!F.isSafe)return alert(`Security threat detected in ${N}: ${F.threats.join(", ")}`),!1}return Object.assign(m,S),!0};return{form:m,isSaving:a,appSettings:r,appSettingsLoading:s,appSettingsError:i,periods:o,gradeOptions:l,availableClassServices:c,serviceProviders:u,customServiceProviders:f,userRoles:h,onFileChange:x,removeBipFile:y,removeAtaglanceFile:_,providerFieldMap:I,getProviderLabel:A,getProviderUsers:E,handleSubmit:async()=>{var S,k,w;try{if(a.value){console.log("Form submission already in progress, ignoring duplicate");return}if(console.log("Form submitted:",m),a.value=!0,console.log(" AUTH DEBUG - Current user:",{uid:(S=$t.currentUser)==null?void 0:S.uid,email:(k=$t.currentUser)==null?void 0:k.email,claims:await((w=$t.currentUser)==null?void 0:w.getIdTokenResult())}),!T()){a.value=!1;return}const D=m.services.filter(z=>z&&z.includes(":")),N={};console.log(" FORM SCHEDULE DEBUG - Complete form.schedule:",JSON.stringify(m.schedule,null,2)),console.log(" FORM SCHEDULE DEBUG - periods.value:",o.value),o.value.forEach(z=>{if(console.log(` FORM SCHEDULE DEBUG - Period ${z} exists:`,!!m.schedule[z],"Value:",m.schedule[z]),m.schedule[z]){const j=m.schedule[z];console.log(` SCHEDULE DEBUG - Period ${z}:`,{type:typeof j,data:j,hasCoTeaching:!!(j&&j.coTeaching),hasCaseManagerId:!!(j&&j.coTeaching&&j.coTeaching.caseManagerId)}),typeof j=="string"?N[z]=j:typeof j=="object"&&j!==null&&(j.coTeaching&&j.coTeaching.caseManagerId?(console.log(` SCHEDULE DEBUG - Period ${z} has co-teaching, preserving structure`),N[z]={teacherId:j.teacherId,coTeaching:{caseManagerId:j.coTeaching.caseManagerId,subject:j.coTeaching.subject||""}}):(console.log(` SCHEDULE DEBUG - Period ${z} converting to simple format`),N[z]=j.teacherId||String(j)||j))}}),console.log(" Schedule Composition Debug:"),console.log("Form schedule before:",JSON.stringify(m.schedule,null,2)),console.log("Composed schedule after:",JSON.stringify(N,null,2)),console.log("Composed data:",{classServices:D,schedule:N});let F=m.bipPdfUrl||null,P=m.ataglancePdfUrl||null;if(console.log(" Form submission - PDF URLs:",{bipPdfUrl:F,ataglancePdfUrl:P,formBipPdfUrl:m.bipPdfUrl,formAtaglancePdfUrl:m.ataglancePdfUrl,bipFileName:m.bipFileName,ataglanceFileName:m.ataglanceFileName,bipFile:m.bipFile,ataglanceFile:m.ataglanceFile}),m.removeBipFile&&(console.log("Removing BIP file..."),F)){try{const z=se(Ec,`students/${t.student.id||"temp"}/${F}`);await fv(z),await deleteDoc(Qe(Xe,"pdfMetadata",F)),console.log("Secure BIP file deleted:",F)}catch(z){console.warn("Error deleting secure BIP file:",z)}F=null}if(m.removeAtaglanceFile&&(console.log("Removing At-A-Glance file..."),P)){try{const z=se(Ec,`students/${t.student.id||"temp"}/${P}`);await fv(z),await deleteDoc(Qe(Xe,"pdfMetadata",P)),console.log("Secure At-A-Glance file deleted:",P)}catch(z){console.warn("Error deleting secure At-A-Glance file:",z)}P=null}const O={studentData:{firstName:m.firstName,lastName:m.lastName,grade:m.grade,plan:m.plan,caseManagerId:m.caseManagerId},dates:{reviewDate:m.reviewDate,reevalDate:m.reevalDate,meetingDate:m.meetingDate},schedule:{periods:N,classServices:D},providers:{speechId:m.speechId,otId:m.otId,mhId:m.mhId,ptId:m.ptId,scId:m.scId,trId:m.trId,audId:m.audId,viId:m.viId,atId:m.atId,dhhId:m.dhhId,omId:m.omId,bisId:m.bisId,hnId:m.hnId,swId:m.swId},accommodations:{instruction:m.instruction,assessment:m.assessment},flags:{flag1:m.flag1,flag2:m.flag2},documents:{ataglancePdfUrl:P,bipPdfUrl:F,bipFileName:m.bipFileName||null,ataglanceFileName:m.ataglanceFileName||null}};console.log(" Documents being saved:",{ataglancePdfUrl:P,bipPdfUrl:F,bipFileName:m.bipFileName||null,ataglanceFileName:m.ataglanceFileName||null}),console.log("Saving payload:",O);const M={app:O,updatedAt:$s()};console.log("Saving payload:",M);let U=null;if(t.mode==="edit"&&t.student.id)console.log("Updating existing student:",t.student.id),await Kt(Qe(Xe,"students",t.student.id),M,{merge:!0}),U=t.student.id,console.log("Student updated successfully");else{if(console.log("Adding new student"),!m.ssid||m.ssid.trim()===""){alert("SSID is required for new students");return}const z=m.ssid.trim();M.app.studentData.ssid=z;const j=Qe(wt(Xe,"students"));M.createdAt=$s(),await Kt(j,M),U=j.id,M.id=U,console.log("Student added successfully with ID:",U,"SSID:",z)}e("saved",M),e("close")}catch(D){console.error("Error saving student:",D),console.error("Error details:",{code:D.code,message:D.message,stack:D.stack}),alert(`Error saving student: ${D.message||D}. Please try again.`)}finally{a.value=!1}},validateForm:T}}const LU={class:"form-col"},BU={class:"inner-grid-3"},UU={key:0,class:"ssid-field"},$U=["value"],VU=["value"],HU={__name:"StudentBasicInfo",props:{form:{type:Object,required:!0},mode:{type:String,default:"new"},gradeOptions:{type:Array,required:!0},userRoles:{type:Object,required:!0}},setup(t){return(e,r)=>(B(),V("fieldset",LU,[r[21]||(r[21]=d("legend",null,"Student Info",-1)),d("div",BU,[t.mode==="new"?(B(),V("label",UU,[r[9]||(r[9]=d("span",{class:"field-label"},"SSID (State Student ID) *",-1)),we(d("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.ssid=n),type:"text",required:"",placeholder:"Enter student SSID",class:"ssid-input"},null,512),[[Je,t.form.ssid]]),r[10]||(r[10]=d("div",{class:"field-help"},[d("strong",null,"Required:"),Oe(" This can be found in your Student Information System (SIS) such as Aeries, or in SEIS. The SSID is used to link student data across different systems. ")],-1))])):_e("",!0),d("label",null,[r[11]||(r[11]=Oe(" First Name: ")),we(d("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.firstName=n),type:"text",required:""},null,512),[[Je,t.form.firstName]])]),d("label",null,[r[12]||(r[12]=Oe(" Last Name: ")),we(d("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>t.form.lastName=n),type:"text",required:""},null,512),[[Je,t.form.lastName]])]),d("label",null,[r[13]||(r[13]=Oe(" Grade: ")),we(d("select",{"onUpdate:modelValue":r[3]||(r[3]=n=>t.form.grade=n)},[(B(!0),V(Re,null,Ve(t.gradeOptions,n=>(B(),V("option",{key:n,value:n},J(n),9,$U))),128))],512),[[mr,t.form.grade]])]),d("label",null,[r[15]||(r[15]=Oe(" Plan Type: ")),we(d("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>t.form.plan=n)},r[14]||(r[14]=[d("option",{value:"IEP"},"IEP",-1),d("option",{value:"504"},"504",-1)]),512),[[mr,t.form.plan]])]),d("label",null,[r[16]||(r[16]=Oe(" Review Date: ")),we(d("input",{"onUpdate:modelValue":r[5]||(r[5]=n=>t.form.reviewDate=n),type:"date"},null,512),[[Je,t.form.reviewDate]])]),d("label",null,[r[17]||(r[17]=Oe(" Reevaluation Date: ")),we(d("input",{"onUpdate:modelValue":r[6]||(r[6]=n=>t.form.reevalDate=n),type:"date"},null,512),[[Je,t.form.reevalDate]])]),d("label",null,[r[18]||(r[18]=Oe(" Meeting Date: ")),we(d("input",{"onUpdate:modelValue":r[7]||(r[7]=n=>t.form.meetingDate=n),type:"date"},null,512),[[Je,t.form.meetingDate]])]),d("label",null,[r[20]||(r[20]=Oe(" Case Manager: ")),we(d("select",{"onUpdate:modelValue":r[8]||(r[8]=n=>t.form.caseManagerId=n)},[r[19]||(r[19]=d("option",{value:""},"-- Select Case Manager --",-1)),(B(!0),V(Re,null,Ve(t.userRoles.caseManagers,n=>(B(),V("option",{key:n.id,value:n.id},J(n.name||n.email||n.id),9,VU))),128))],512),[[mr,t.form.caseManagerId]])])])]))}},jU=yt(HU,[["__scopeId","data-v-5eadce29"]]),GU={class:"form-col"},WU={class:"periods-container"},zU={class:"period-main"},KU={class:"period-label"},qU=["value","onChange"],XU=["value"],YU=["disabled","onClick"],JU={key:0,class:"coteaching-config"},QU={class:"coteaching-info"},ZU={class:"classroom-teacher"},e$={class:"case-manager-name"},t$={class:"config-row"},r$=["value","onChange"],n$=["value"],s$={class:"config-row"},a$=["value","onChange"],i$=["value"],o$={__name:"StudentSchedule",props:{form:{type:Object,required:!0},periods:{type:Array,required:!0},userRoles:{type:Object,required:!0},appSettings:{type:Object,default:()=>({})}},setup(t){const e=t,{getLabel:r}=mo(),n=Ae(()=>(e.userRoles.caseManagers||[]).filter(x=>x.id&&(x.role==="case_manager"||x.role==="administrator_504_CM"||x.role==="sped_chair"||x.roles&&x.roles.includes("case_manager")))),s=Ae(()=>{var v;if((v=e.appSettings)!=null&&v.classServices){const x=e.appSettings.classServices.find(y=>y.name==="Co-teach"&&y.enabledSubcategories);if(x)return x.enabledSubcategories.sort()}return["English","Math","History","Science"]}),i=v=>{const x=e.form.schedule[v];return typeof x=="string"?x:typeof x=="object"&&x!==null&&x.teacherId||""},a=(v,x)=>{if(h("SET_TEACHER_START",{period:v,teacherId:x,isCoTeachingActive:c(v),currentValue:e.form.schedule[v]}),c(v)){const y=u(v),_=f(v);e.form.schedule[v]={teacherId:x,coTeaching:{caseManagerId:y,subject:_}},h("SET_TEACHER_COTEACHING",{period:v,newValue:e.form.schedule[v]})}else e.form.schedule[v]=x,h("SET_TEACHER_SIMPLE",{period:v,newValue:e.form.schedule[v]})},o=v=>{if(!v)return"Unknown";const x=(e.userRoles.teachers||[]).find(y=>y.id===v);return x&&(x.name||x.email)||v},l=v=>{if(!v)return"Select Case Manager";const x=n.value.find(y=>y.id===v);return x&&(x.name||x.email)||v},c=v=>{var y;const x=e.form.schedule[v];return typeof x=="object"&&x!==null?!!((y=x.coTeaching)!=null&&y.caseManagerId):!1},u=v=>{var y;const x=e.form.schedule[v];return typeof x=="object"&&x!==null&&((y=x.coTeaching)==null?void 0:y.caseManagerId)||""},f=v=>{var y;const x=e.form.schedule[v];return typeof x=="object"&&x!==null&&((y=x.coTeaching)==null?void 0:y.subject)||""},h=(v,x)=>{const y=new Date().toISOString();console.log(` [${y}] Schedule Process: ${v}`,x)},p=(v,x)=>{h("UPDATE_CM_START",{period:v,caseManagerId:x,currentValue:e.form.schedule[v]});const y=i(v),_=f(v);y?(e.form.schedule[v]={teacherId:y,coTeaching:{caseManagerId:x,subject:_}},h("UPDATE_CM_COMPLETE",{period:v,newValue:e.form.schedule[v]}),console.log(" CO-TEACHING DEBUG - Case Manager Updated:",{period:v,periodType:typeof v,caseManagerId:x,teacherId:y,subject:_,finalValue:e.form.schedule[v],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):h("UPDATE_CM_BLOCKED",{reason:"No teacher ID",period:v})},m=(v,x)=>{h("UPDATE_SUBJECT_START",{period:v,subject:x,currentValue:e.form.schedule[v]});const y=i(v),_=u(v);y?(e.form.schedule[v]={teacherId:y,coTeaching:{caseManagerId:_,subject:x}},h("UPDATE_SUBJECT_COMPLETE",{period:v,newValue:e.form.schedule[v]}),console.log(" CO-TEACHING DEBUG - Subject Updated:",{period:v,periodType:typeof v,subject:x,teacherId:y,caseManagerId:_,finalValue:e.form.schedule[v],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):h("UPDATE_SUBJECT_BLOCKED",{reason:"No teacher ID",period:v})},g=v=>{var _;h("TOGGLE_START",{period:v,currentValue:e.form.schedule[v],formVersion:e.formVersion});const x=i(v);if(!x){h("TOGGLE_BLOCKED",{reason:"No teacher selected",period:v});return}const y=c(v);if(h("TOGGLE_STATE",{period:v,isActive:y,teacherId:x,beforeValue:e.form.schedule[v]}),y)e.form.schedule[v]=x;else{const I={teacherId:x,coTeaching:{caseManagerId:((_=n.value[0])==null?void 0:_.id)||"",subject:s.value[0]||""}};e.form.schedule[v]=I,setTimeout(()=>{var R;console.log(" CO-TEACHING PERSISTENCE CHECK - 100ms later:",{period:v,stillExists:!!e.form.schedule[v],currentValue:e.form.schedule[v],isObject:typeof e.form.schedule[v]=="object",hasCoTeaching:!!((R=e.form.schedule[v])!=null&&R.coTeaching)})},100),setTimeout(()=>{var R;console.log(" CO-TEACHING PERSISTENCE CHECK - 1000ms later:",{period:v,stillExists:!!e.form.schedule[v],currentValue:e.form.schedule[v],isObject:typeof e.form.schedule[v]=="object",hasCoTeaching:!!((R=e.form.schedule[v])!=null&&R.coTeaching)})},1e3)}h("TOGGLE_COMPLETE",{period:v,afterValue:e.form.schedule[v],formVersion:e.formVersion}),console.log(" CO-TEACHING DEBUG - Toggle Complete:",{period:v,periodType:typeof v,isActive:!y,finalValue:e.form.schedule[v],entireSchedule:JSON.stringify(e.form.schedule,null,2),availableCaseManagers:n.value.length,availableSubjects:s.value.length})};return Vt(()=>e.form.schedule,(v,x)=>{console.log(" SCHEDULE WATCHER - Schedule changed:",{timestamp:new Date().toISOString(),newSchedule:JSON.stringify(v,null,2),oldSchedule:JSON.stringify(x,null,2),periodsWithObjects:Object.keys(v).filter(y=>typeof v[y]=="object"),periodsWithCoTeaching:Object.keys(v).filter(y=>{var _;return(_=v[y])==null?void 0:_.coTeaching})})},{deep:!0}),(v,x)=>(B(),V("fieldset",GU,[x[7]||(x[7]=d("legend",null,"Schedule",-1)),d("div",WU,[(B(!0),V(Re,null,Ve(t.periods,y=>(B(),V("div",{key:y,class:"period-row"},[d("div",zU,[d("label",KU,J(Z(r)(y))+":",1),d("select",{value:i(y),onChange:_=>a(y,_.target.value),class:"teacher-select"},[x[0]||(x[0]=d("option",{value:""},"--",-1)),(B(!0),V(Re,null,Ve(t.userRoles.teachers,_=>(B(),V("option",{key:_.id,value:_.id},J(_.name||_.email||_.id),9,XU))),128))],40,qU),d("button",{type:"button",class:Ze(["coteaching-toggle",{active:c(y)}]),disabled:!i(y),onClick:_=>g(y),title:"Co-Teaching"}," C ",10,YU)]),c(y)?(B(),V("div",JU,[d("div",QU,[x[1]||(x[1]=d("span",{class:"coteaching-label"},"Co-Teaching:",-1)),d("span",ZU,J(o(i(y))),1),x[2]||(x[2]=d("span",{class:"plus-sign"},"+",-1)),d("span",e$,J(l(u(y))),1)]),d("div",t$,[x[4]||(x[4]=d("label",{class:"config-label"},"Subject:",-1)),d("select",{value:f(y),onChange:_=>m(y,_.target.value),class:"subject-select",required:""},[x[3]||(x[3]=d("option",{value:""},"-- Select Subject --",-1)),(B(!0),V(Re,null,Ve(s.value,_=>(B(),V("option",{key:_,value:_},J(_),9,n$))),128))],40,r$)]),d("div",s$,[x[6]||(x[6]=d("label",{class:"config-label"},"Case Manager:",-1)),d("select",{value:u(y),onChange:_=>p(y,_.target.value),class:"cm-select",required:""},[x[5]||(x[5]=d("option",{value:""},"-- Select Case Manager --",-1)),(B(!0),V(Re,null,Ve(n.value,_=>(B(),V("option",{key:_.id,value:_.id},J(_.name||_.email||_.id),9,i$))),128))],40,a$)])])):_e("",!0)]))),128))])]))}},l$=yt(o$,[["__scopeId","data-v-eee60512"]]),c$={class:"checkbox-inline-group"},u$=["value","checked","onChange"],Zb={__name:"ServiceCheckboxGroup",props:["label","items","modelValue"],emits:["update:modelValue"],setup(t,{emit:e}){const r=t,n=e;function s(i){const a=r.label+": "+i,o=r.modelValue?[...r.modelValue]:[],l=o.indexOf(a);l===-1?o.push(a):o.splice(l,1),n("update:modelValue",o)}return(i,a)=>(B(),V("fieldset",null,[d("legend",null,J(t.label),1),d("div",c$,[(B(!0),V(Re,null,Ve(t.items,o=>(B(),V("label",{key:o},[d("input",{type:"checkbox",value:t.label+": "+o,checked:t.modelValue&&t.modelValue.includes(t.label+": "+o),onChange:l=>s(o)},null,40,u$),Oe(" "+J(o),1)]))),128))])]))}},d$={class:"form-col"},f$={class:"inner-grid-3"},h$={key:0,class:"loading-message"},p$={key:1,class:"error-message"},m$={style:{display:"none"}},g$={key:3,class:"no-services-message"},v$={__name:"StudentClassServices",props:{form:{type:Object,required:!0},availableClassServices:{type:Array,required:!0},appSettingsLoading:{type:Boolean,default:!1},appSettingsError:{type:String,default:null}},setup(t){const e=t,r=Ae(()=>e.availableClassServices.filter(s=>s.name!=="Co-teach")),n=Ae(()=>e.availableClassServices.filter(s=>s.name==="Co-teach"));return(s,i)=>(B(),V("fieldset",d$,[i[5]||(i[5]=d("legend",null,"Services: classes",-1)),d("div",f$,[t.appSettingsLoading?(B(),V("div",h$,i[2]||(i[2]=[d("span",{class:"loading-spinner"},"",-1),Oe(" Loading app settings... ")]))):t.appSettingsError?(B(),V("div",p$,[i[3]||(i[3]=d("span",{class:"error-icon"},"",-1)),Oe(" Error loading app settings: "+J(t.appSettingsError),1)])):t.availableClassServices.length>0?(B(),V(Re,{key:2},[(B(!0),V(Re,null,Ve(r.value,a=>(B(),Jr(Zb,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[0]||(i[0]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128)),d("div",m$,[(B(!0),V(Re,null,Ve(n.value,a=>(B(),Jr(Zb,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[1]||(i[1]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128))])],64)):(B(),V("div",g$,i[4]||(i[4]=[d("span",{class:"info-icon"},"",-1),Oe(" No class services configured. "),d("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},x$=yt(v$,[["__scopeId","data-v-d750acb2"]]),y$=["id","value"],E$=["value"],eS={__name:"ServiceSelect",props:["id","label","list","modelValue"],emits:["update:modelValue"],setup(t){return(e,r)=>(B(),V("label",null,[Oe(J(t.label)+": ",1),d("select",{id:t.id,value:t.modelValue,onChange:r[0]||(r[0]=n=>e.$emit("update:modelValue",n.target.value))},[r[1]||(r[1]=d("option",{value:""},"--",-1)),(B(!0),V(Re,null,Ve(t.list,n=>(B(),V("option",{key:n.id,value:n.id},J(n.name),9,E$))),128))],40,y$)]))}},_$={class:"inner-grid-3"},b$={key:1,class:"no-services-message"},S$={__name:"StudentProviders",props:{form:{type:Object,required:!0},serviceProviders:{type:Array,required:!0},customServiceProviders:{type:Array,required:!0},providerFieldMap:{type:Object,required:!0},getProviderLabel:{type:Function,required:!0},getProviderUsers:{type:Function,required:!0}},setup(t){return(e,r)=>(B(),V("fieldset",null,[r[1]||(r[1]=d("legend",null,"Services: providers",-1)),d("div",_$,[t.serviceProviders.length>0?(B(),V(Re,{key:0},[(B(!0),V(Re,null,Ve(t.serviceProviders,n=>(B(),Jr(eS,{key:n,id:n,label:t.getProviderLabel(n),list:t.getProviderUsers(n),modelValue:t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`]=s},null,8,["id","label","list","modelValue","onUpdate:modelValue"]))),128)),(B(!0),V(Re,null,Ve(t.customServiceProviders,n=>(B(),Jr(eS,{key:n,id:n,label:n,list:[],modelValue:t.form[`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[`${n.toLowerCase()}Id`]=s},null,8,["id","label","modelValue","onUpdate:modelValue"]))),128))],64)):(B(),V("div",b$,r[0]||(r[0]=[d("span",{class:"info-icon"},"",-1),Oe(" No service providers configured. "),d("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},T$=yt(S$,[["__scopeId","data-v-faa02238"]]),A$={class:"form-col"},w$={class:"document-section"},C$={key:0,class:"current-file"},I$={key:1,class:"removed-file"},k$={key:2,class:"upload-status loading-pulse"},D$={key:3,class:"error-message"},P$={class:"document-section"},R$={key:0,class:"current-file"},F$={key:1,class:"removed-file"},O$={key:2,class:"upload-status loading-pulse"},N$={__name:"StudentDocuments",props:{form:{type:Object,required:!0},student:{type:Object,default:()=>({})},mode:{type:String,default:"new"},onFileChange:{type:Function,required:!0},removeBipFile:{type:Function,required:!0},removeAtaglanceFile:{type:Function,required:!0}},emits:["loading-change"],setup(t,{emit:e}){const r=t,n=e,{uploadPdf:s,downloadPdf:i,isUploading:a,error:o}=Cx(),l=se(null),c=Ae(()=>a.value||l.value!==null);Vt(c,p=>{n("loading-change",p)},{immediate:!0});const u=Ae(()=>{var m,g,v,x;const p=((m=r.student)==null?void 0:m.id)||((g=r.form)==null?void 0:g.id);return console.log(" StudentDocuments - studentId computed:",{studentId:(v=r.student)==null?void 0:v.id,formId:(x=r.form)==null?void 0:x.id,finalId:p}),p}),f=async(p,m)=>{const g=p.target.files[0]||null;if(g){const v=Mc(g,{allowedTypes:["pdf"],maxSize:10485760,fieldName:m==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!v.isValid){alert(v.error),p.target.value="";return}const x=Wr(g.name);if(!x.isSafe){alert(`File name contains potentially dangerous content: ${x.threats.join(", ")}`),p.target.value="";return}try{if(l.value=m==="bipFile"?"bip":"ataglance",!u.value)throw new Error("Student ID is required for secure file upload");const y=m==="bipFile"?r.form.bipPdfUrl:r.form.ataglancePdfUrl;if(y){console.log(` Cleaning up old ${m} file:`,y);try{const{ref:I,deleteObject:R}=await sa(async()=>{const{ref:k,deleteObject:w}=await Promise.resolve().then(()=>uM);return{ref:k,deleteObject:w}},void 0),{doc:A,deleteDoc:E}=await sa(async()=>{const{doc:k,deleteDoc:w}=await Promise.resolve().then(()=>q5);return{doc:k,deleteDoc:w}},void 0),{storage:T,db:b}=await sa(async()=>{const{storage:k,db:w}=await Promise.resolve().then(()=>mI);return{storage:k,db:w}},void 0),S=I(T,`students/${u.value}/${y}`);await R(S),await E(A(b,"pdfMetadata",y)),console.log(` Old ${m} file cleaned up:`,y)}catch(I){console.warn(`Failed to clean up old ${m} file:`,I.message)}}const _=await s(g,u.value);m==="bipFile"?(Object.assign(r.form,{bipPdfUrl:_,bipFileName:g.name}),console.log(" BIP file updated in form:",{bipPdfUrl:r.form.bipPdfUrl,bipFileName:r.form.bipFileName})):(Object.assign(r.form,{ataglancePdfUrl:_,ataglanceFileName:g.name}),console.log(" At-A-Glance file updated in form:",{ataglancePdfUrl:r.form.ataglancePdfUrl,ataglanceFileName:r.form.ataglanceFileName})),console.log(` Secure PDF uploaded: ${_}`),console.log(" Current form state:",{bipPdfUrl:r.form.bipPdfUrl,bipFileName:r.form.bipFileName,ataglancePdfUrl:r.form.ataglancePdfUrl,ataglanceFileName:r.form.ataglanceFileName})}catch(y){console.error("Secure PDF upload failed:",y),alert(`Failed to upload PDF: ${y.message}`)}finally{l.value=null,p.target.value=""}}r.onFileChange(p,m)},h=async p=>{try{const m=p==="bip"?r.form.bipPdfUrl:r.form.ataglancePdfUrl,g=p==="bip"?r.form.bipFileName:r.form.ataglanceFileName;if(!m||!u.value)throw new Error("File not found or student ID missing");await i(m,u.value,g)}catch(m){console.error("Secure PDF download failed:",m),alert(`Failed to download PDF: ${m.message}`)}};return(p,m)=>(B(),V("fieldset",A$,[m[16]||(m[16]=d("legend",null,"Documents",-1)),d("div",w$,[d("label",null,[m[11]||(m[11]=Oe(" BIP: ")),d("input",{type:"file",accept:"application/pdf",onChange:m[0]||(m[0]=g=>f(g,"bipFile"))},null,32),t.form.bipPdfUrl&&!t.form.removeBipFile?(B(),V("span",C$,[m[8]||(m[8]=Oe(" Current: ")),d("a",{href:"#",onClick:m[1]||(m[1]=mn(g=>h("bip"),["prevent"])),target:"_blank"},"View BIP"),d("button",{type:"button",onClick:m[2]||(m[2]=(...g)=>t.removeBipFile&&t.removeBipFile(...g)),class:"btn-remove"},"  Remove ")])):_e("",!0),t.form.removeBipFile?(B(),V("span",I$,[m[9]||(m[9]=Oe(" BIP file will be removed ")),d("button",{type:"button",onClick:m[3]||(m[3]=g=>t.form.removeBipFile=!1),class:"btn-undo"},"  Undo ")])):_e("",!0),Z(a)&&l.value==="bip"?(B(),V("div",k$,m[10]||(m[10]=[d("span",{class:"loading-spinner"},"",-1),d("strong",null,"Loading... Uploading BIP document...",-1)]))):_e("",!0),Z(o)?(B(),V("div",D$,J(Z(o)),1)):_e("",!0)])]),d("div",P$,[d("label",null,[m[15]||(m[15]=Oe(" At-A-Glance PDF: ")),d("input",{type:"file",accept:"application/pdf",onChange:m[4]||(m[4]=g=>f(g,"ataglanceFile"))},null,32),t.form.ataglancePdfUrl&&!t.form.removeAtaglanceFile?(B(),V("span",R$,[m[12]||(m[12]=Oe(" Current: ")),d("a",{href:"#",onClick:m[5]||(m[5]=mn(g=>h("ataglance"),["prevent"])),target:"_blank"},"View At-A-Glance"),d("button",{type:"button",onClick:m[6]||(m[6]=(...g)=>t.removeAtaglanceFile&&t.removeAtaglanceFile(...g)),class:"btn-remove"},"  Remove ")])):_e("",!0),t.form.removeAtaglanceFile?(B(),V("span",F$,[m[13]||(m[13]=Oe(" At-A-Glance file will be removed ")),d("button",{type:"button",onClick:m[7]||(m[7]=g=>t.form.removeAtaglanceFile=!1),class:"btn-undo"},"  Undo ")])):_e("",!0),Z(a)&&l.value==="ataglance"?(B(),V("div",O$,m[14]||(m[14]=[d("span",{class:"loading-spinner"},"",-1),d("strong",null,"Loading... Uploading At-A-Glance document...",-1)]))):_e("",!0)])])]))}},M$=yt(N$,[["__scopeId","data-v-078af5f3"]]),L$={class:"form-col"},B$={class:"inner-grid-2"},U$={__name:"StudentAccommodations",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(B(),V("fieldset",L$,[r[4]||(r[4]=d("legend",null,"Accommodations",-1)),d("div",B$,[d("label",null,[r[2]||(r[2]=Oe(" Instruction: ")),we(d("textarea",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.instruction=n),placeholder:"Enter instructional accommodations..."},null,512),[[Je,t.form.instruction]])]),d("label",null,[r[3]||(r[3]=Oe(" Assessment: ")),we(d("textarea",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.assessment=n),placeholder:"Enter assessment accommodations..."},null,512),[[Je,t.form.assessment]])])])]))}},$$=yt(U$,[["__scopeId","data-v-4ce4f379"]]),V$={class:"flags-container"},H$={class:"checkbox-label"},j$={class:"checkbox-label"},G$={__name:"StudentFlags",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(B(),V("fieldset",null,[r[4]||(r[4]=d("legend",null,"Flags",-1)),d("div",V$,[d("label",H$,[we(d("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=n=>t.form.flag1=n)},null,512),[[_t,t.form.flag1]]),r[2]||(r[2]=Oe(" Preferential seating "))]),d("label",j$,[we(d("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=n=>t.form.flag2=n)},null,512),[[_t,t.form.flag2]]),r[3]||(r[3]=Oe(" Separate setting "))])])]))}},W$=yt(G$,[["__scopeId","data-v-e7295a7a"]]),z$={class:"dialog-backdrop"},K$={class:"dialog"},q$=["disabled"],X$={__name:"StudentForm",props:{student:{type:Object,default:()=>({})},users:{type:Object,required:!0},mode:{type:String,default:"new"}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{form:s,isSaving:i,appSettings:a,appSettingsLoading:o,appSettingsError:l,periods:c,gradeOptions:u,availableClassServices:f,serviceProviders:h,customServiceProviders:p,userRoles:m,onFileChange:g,removeBipFile:v,removeAtaglanceFile:x,providerFieldMap:y,getProviderLabel:_,getProviderUsers:I,handleSubmit:R}=MU(r,n),A=se(!1),E=Ae(()=>i.value||A.value),T=Ae(()=>A.value?"Loading files...":i.value?"Saving...":r.mode==="edit"?"Save":"Add Student"),b=S=>{A.value=S};return(S,k)=>(B(),V("div",z$,[d("div",K$,[d("header",null,[d("h2",null,J(t.mode==="edit"?"Edit Student":"Add Student"),1),d("button",{onClick:k[0]||(k[0]=w=>S.$emit("close")),class:"close-btn"},"")]),d("form",{onSubmit:k[2]||(k[2]=mn((...w)=>Z(R)&&Z(R)(...w),["prevent"])),id:"student-form"},[st(jU,{form:Z(s),mode:t.mode,"grade-options":Z(u),"user-roles":Z(m)},null,8,["form","mode","grade-options","user-roles"]),st(l$,{form:Z(s),periods:Z(c),"user-roles":Z(m),"app-settings":Z(a)},null,8,["form","periods","user-roles","app-settings"]),st(x$,{form:Z(s),"available-class-services":Z(f),"app-settings-loading":Z(o),"app-settings-error":Z(l)},null,8,["form","available-class-services","app-settings-loading","app-settings-error"]),st(T$,{form:Z(s),"service-providers":Z(h),"custom-service-providers":Z(p),"provider-field-map":Z(y),"get-provider-label":Z(_),"get-provider-users":Z(I)},null,8,["form","service-providers","custom-service-providers","provider-field-map","get-provider-label","get-provider-users"]),st(M$,{form:Z(s),student:t.student,mode:t.mode,"on-file-change":Z(g),"remove-bip-file":Z(v),"remove-ataglance-file":Z(x),onLoadingChange:b},null,8,["form","student","mode","on-file-change","remove-bip-file","remove-ataglance-file"]),st($$,{form:Z(s)},null,8,["form"]),st(W$,{form:Z(s)},null,8,["form"]),d("footer",null,[d("button",{type:"button",onClick:k[1]||(k[1]=w=>S.$emit("close")),class:"btn btn-secondary"}," Cancel "),d("button",{type:"submit",class:"btn btn-primary",disabled:E.value},J(T.value),9,q$)])],32)])]))}},Ix=yt(X$,[["__scopeId","data-v-7363b0d2"]]),Y$={key:0},J$={key:1,class:"loading-dialog"},Q$={__name:"StudentEditDialog",props:{studentId:{type:String,required:!0},users:{type:Object,required:!0}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{students:s,fetchStudents:i}=Ma(),a=Ae(()=>{const l=s.value.find(c=>c.id===r.studentId);return console.log("StudentEditDialog - studentId:",r.studentId),console.log("StudentEditDialog - all students:",s.value),console.log("StudentEditDialog - found student:",l),l||{}});Ut(async()=>{s.value.length===0&&(console.log("StudentEditDialog - fetching students..."),await i())});function o(l){console.log("StudentEditDialog - student saved:",l),n("saved",l)}return(l,c)=>a.value&&Object.keys(a.value).length>0?(B(),V("div",Y$,[st(Ix,{student:a.value,users:t.users,mode:"edit",onClose:c[0]||(c[0]=u=>l.$emit("close")),onSaved:o},null,8,["student","users"])])):(B(),V("div",J$,c[1]||(c[1]=[d("div",{class:"dialog"},[d("header",null,[d("h2",null,"Loading Student Data...")]),d("div",{class:"content"},[d("p",null,"Please wait while we load the student information.")])],-1)])))}},Z$=yt(Q$,[["__scopeId","data-v-0410ea60"]]),eV={class:"dialog-backdrop"},tV={class:"dialog"},rV={class:"button-group"},nV={key:0,class:"members-list"},sV={key:0,class:"email"},aV=["value"],iV={class:"docs-option"},oV={key:0,class:"no-docs"},lV=["disabled"],cV=["disabled"],uV={__name:"StudentsEmailDialog",props:{student:{type:Object,required:!0},userMap:{type:Object,required:!0}},emits:["close"],setup(t){const e=t,{student:r,userMap:n}=e,s=se(""),i=se([]),a=se(!1),o=Ae(()=>{var x,y;if((y=(x=r.app)==null?void 0:x.schedule)!=null&&y.periods){const _=[];return Object.values(r.app.schedule.periods).forEach(I=>{var A;const R=typeof I=="string"?I:I==null?void 0:I.teacherId;R&&_.push(R),(A=I==null?void 0:I.coTeaching)!=null&&A.caseManagerId&&_.push(I.coTeaching.caseManagerId)}),_}const v=r.schedule||{};return Object.values(v).filter(Boolean)}),l=Ae(()=>[...new Set(o.value)]),c=Ae(()=>{var x;const v=[];(x=r.app)!=null&&x.providers&&Object.entries(r.app.providers).forEach(([y,_])=>{_&&!["caseManagerId"].includes(y)&&v.push(_)});for(const y in r)y.endsWith("_id")&&!["casemanager_id","caseManagerId"].includes(y)&&r[y]&&v.push(r[y]);return[...new Set(v)].filter(y=>!l.value.includes(y))}),u=Ae(()=>l.value.map(v=>({id:v,...n[v]||{}})).filter(v=>v&&v.email)),f=Ae(()=>c.value.map(v=>({id:v,...n[v]||{}})).filter(v=>v&&v.email)),h=Ae(()=>[...u.value,...f.value]),p=Ae(()=>{var v,x,y,_;return!!((x=(v=r.app)==null?void 0:v.documents)!=null&&x.ataglancePdfUrl||(_=(y=r.app)==null?void 0:y.documents)!=null&&_.bipPdfUrl||r.ataglancePdfUrl||r.ataglance_pdf_url||r.bipPdfUrl||r.bip_pdf_url)}),m=Ae(()=>s.value?s.value==="Individual"?i.value.length>0:!0:!1);function g(){var b,S,k,w,D,N,F,P,O,M,U;let v=[];s.value==="Teachers"?v=u.value:s.value==="TeachersAndService"?v=[...u.value,...f.value]:s.value==="Individual"&&(v=h.value.filter(z=>i.value.includes(z.id)));const x=v.map(z=>z.email).filter(Boolean).join(",");if(!x){alert("No email addresses found for the selected recipients.");return}console.log(" Student data for email:",{student:r,firstName:r.firstName,first_name:r.first_name,lastName:r.lastName,last_name:r.last_name,appStudentData:(b=r.app)==null?void 0:b.studentData});const y=r.firstName||r.first_name||((k=(S=r.app)==null?void 0:S.studentData)==null?void 0:k.firstName)||((w=r.app)==null?void 0:w.firstName)||"",_=r.lastName||r.last_name||((N=(D=r.app)==null?void 0:D.studentData)==null?void 0:N.lastName)||((F=r.app)==null?void 0:F.lastName)||"";console.log(" Extracted names:",{firstName:y,lastName:_});const I=`${y} ${_}`.trim()||"Student",R=(((y==null?void 0:y[0])||"")+((_==null?void 0:_[0])||"")).toUpperCase()||"ST";console.log(" Final values:",{fullName:I,initials:R});const A=`${R} - Student Update`;let E="";if(a.value){E+=`Hi team!

${I}'s updated documents are available in the CaseManage app.

`;const z=((O=(P=r.app)==null?void 0:P.documents)==null?void 0:O.ataglancePdfUrl)||r.ataglancePdfUrl||r.ataglance_pdf_url,j=((U=(M=r.app)==null?void 0:M.documents)==null?void 0:U.bipPdfUrl)||r.bipPdfUrl||r.bip_pdf_url;z||j?(E+=`Available documents:
`,z&&(E+=` At-A-Glance
`),j&&(E+=` BIP (Behavior Intervention Plan)
`),E+=`
To access the documents:
`,E+=`Log into the CaseManage app: ${window.location.origin}
`,E+=`Navigate to the student's record to view their documents.

`,E+=`The documents require authentication to view for security purposes.
`):(E+=`No documents are currently available for ${I}.

`,E+=`If documents are added, you can access them by logging into:
`,E+=`${window.location.origin}
`)}else E="See attached.";console.log(" Email composition:",{subject:A,body:E});const T=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(x)}&su=${encodeURIComponent(A)}&body=${encodeURIComponent(E)}`;window.open(T,"_blank","noopener")}return(v,x)=>(B(),V("div",eV,[d("div",tV,[d("header",null,[d("h2",null,"Email about "+J(Z(r).firstName||Z(r).first_name)+" "+J(Z(r).lastName||Z(r).last_name),1),d("button",{onClick:x[0]||(x[0]=y=>v.$emit("close")),title:"Close"},"")]),d("main",null,[d("form",{onSubmit:x[6]||(x[6]=mn(()=>{},["prevent"]))},[d("div",rV,[d("button",{type:"button",class:Ze(["option-button",{active:s.value==="Teachers"}]),onClick:x[1]||(x[1]=y=>s.value="Teachers")}," Teachers ",2),d("button",{type:"button",class:Ze(["option-button",{active:s.value==="TeachersAndService"}]),onClick:x[2]||(x[2]=y=>s.value="TeachersAndService")}," Teachers and service providers ",2),d("button",{type:"button",class:Ze(["option-button",{active:s.value==="Individual"}]),onClick:x[3]||(x[3]=y=>s.value="Individual")}," Individual member of the IEP team ",2)]),s.value==="Individual"?(B(),V("div",nV,[x[8]||(x[8]=d("div",null,"Select members:",-1)),(B(!0),V(Re,null,Ve(h.value,y=>(B(),V("div",{key:y.id},[d("label",null,[d("span",null,[Oe(J(y.name||y.displayName||y.email||y.id)+" ",1),y.email?(B(),V("span",sV,"("+J(y.email)+")",1)):_e("",!0)]),we(d("input",{type:"checkbox",value:y.id,"onUpdate:modelValue":x[4]||(x[4]=_=>i.value=_)},null,8,aV),[[_t,i.value]])])]))),128))])):_e("",!0),d("div",iV,[d("label",null,[d("span",null,[x[9]||(x[9]=Oe(" Include documents ")),p.value?_e("",!0):(B(),V("span",oV,"(No docs available)"))]),we(d("input",{type:"checkbox","onUpdate:modelValue":x[5]||(x[5]=y=>a.value=y),disabled:!p.value},null,8,lV),[[_t,a.value]])])])],32)]),d("footer",null,[d("button",{onClick:x[7]||(x[7]=y=>v.$emit("close"))},"Cancel"),d("button",{disabled:!m.value,onClick:g},"Send",8,cV)])])]))}},dV=yt(uV,[["__scopeId","data-v-0e59eb1d"]]),fV={class:"dialog-backdrop"},hV={class:"dialog"},pV={class:"field-groups"},mV={class:"field-group"},gV={class:"field-group"},vV={class:"field-group"},xV={class:"field-group"},yV={class:"field-group"},EV={class:"field-group"},_V=["disabled"],bV={__name:"ExportDialog",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})}},emits:["close"],setup(t,{emit:e}){const r=t,n=e,s=ga(),i=II(),a=se({studentData:{firstName:!0,lastName:!0,grade:!0,plan:!0,caseManagerId:!0},dates:{reviewDate:!0,reevalDate:!0,meetingDate:!0},providers:{all:!0},accommodations:{instruction:!0,assessment:!0},schedule:{periods:!0,classServices:!0},documents:{ataglancePdfUrl:!0,bipPdfUrl:!0}}),o=["speechId","otId","mhId","ptId","scId","trId","audId","viId","atId","dhhId","omId","bisId","hnId","swId"],l=Ae(()=>Object.values(a.value).some(v=>Object.values(v).some(x=>x)));function c(v){if(!v||!r.userMap[v])return"";const x=r.userMap[v];return x.name||x.email||""}function u(v){const x=i.userPermissions||[];return Array.isArray(x)&&x.includes(v)}function f(){Object.keys(a.value).forEach(v=>{Object.keys(a.value[v]).forEach(x=>{a.value[v][x]=!0})})}function h(){Object.keys(a.value).forEach(v=>{Object.keys(a.value[v]).forEach(x=>{a.value[v][x]=!1})})}function p(v){var I,R,A,E,T,b,S,k,w,D,N,F,P,O,M,U,z,j,H,W,K,re,me,ce,pe,te,Q,ye,X,q,Y,ne;const x=s.currentUser;if((x==null?void 0:x.role)==="admin"||(x==null?void 0:x.role)==="administrator"||(x==null?void 0:x.role)==="sped_chair"||(x==null?void 0:x.role)==="administrator_504_CM")return m(v);const _={};return a.value.studentData.firstName&&(_.firstName=(R=(I=v.app)==null?void 0:I.studentData)==null?void 0:R.firstName),a.value.studentData.lastName&&(_.lastName=(E=(A=v.app)==null?void 0:A.studentData)==null?void 0:E.lastName),a.value.studentData.grade&&(_.grade=(b=(T=v.app)==null?void 0:T.studentData)==null?void 0:b.grade),a.value.studentData.plan&&(_.plan=(k=(S=v.app)==null?void 0:S.studentData)==null?void 0:k.plan),a.value.studentData.caseManagerId&&(_.caseManagerId=(D=(w=v.app)==null?void 0:w.studentData)==null?void 0:D.caseManagerId),u("view_student_dates")&&(a.value.dates.reviewDate&&(_.reviewDate=(F=(N=v.app)==null?void 0:N.dates)==null?void 0:F.reviewDate),a.value.dates.reevalDate&&(_.reevalDate=(O=(P=v.app)==null?void 0:P.dates)==null?void 0:O.reevalDate),a.value.dates.meetingDate&&(_.meetingDate=(U=(M=v.app)==null?void 0:M.dates)==null?void 0:U.meetingDate)),(u("view_service_providers")||((j=(z=v.app)==null?void 0:z.studentData)==null?void 0:j.caseManagerId)===(x==null?void 0:x.uid)||o.some(ve=>{var ae,le;return((le=(ae=v.app)==null?void 0:ae.providers)==null?void 0:le[ve])===(x==null?void 0:x.uid)}))&&a.value.providers.all&&o.forEach(ve=>{var ae,le;_[ve]=(le=(ae=v.app)==null?void 0:ae.providers)==null?void 0:le[ve]}),u("view_accommodations")&&(a.value.accommodations.instruction&&(_.instruction=(W=(H=v.app)==null?void 0:H.accommodations)==null?void 0:W.instruction),a.value.accommodations.assessment&&(_.assessment=(re=(K=v.app)==null?void 0:K.accommodations)==null?void 0:re.assessment)),(u("view_schedule")||Object.values(((ce=(me=v.app)==null?void 0:me.schedule)==null?void 0:ce.periods)||{}).includes(x==null?void 0:x.uid))&&(a.value.schedule.periods&&(_.schedule=(te=(pe=v.app)==null?void 0:pe.schedule)==null?void 0:te.periods),a.value.schedule.classServices&&(_.classServices=(ye=(Q=v.app)==null?void 0:Q.schedule)==null?void 0:ye.classServices)),u("view_documents")&&(a.value.documents.ataglancePdfUrl&&(_.ataglancePdfUrl=(q=(X=v.app)==null?void 0:X.documents)==null?void 0:q.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(_.bipPdfUrl=(ne=(Y=v.app)==null?void 0:Y.documents)==null?void 0:ne.bipPdfUrl)),_}function m(v){var y,_,I,R,A,E,T,b,S,k,w,D,N,F,P,O,M,U,z,j,H,W,K,re,me,ce,pe,te;const x={};return a.value.studentData.firstName&&(x.firstName=(_=(y=v.app)==null?void 0:y.studentData)==null?void 0:_.firstName),a.value.studentData.lastName&&(x.lastName=(R=(I=v.app)==null?void 0:I.studentData)==null?void 0:R.lastName),a.value.studentData.grade&&(x.grade=(E=(A=v.app)==null?void 0:A.studentData)==null?void 0:E.grade),a.value.studentData.plan&&(x.plan=(b=(T=v.app)==null?void 0:T.studentData)==null?void 0:b.plan),a.value.studentData.caseManagerId&&(x.caseManagerId=(k=(S=v.app)==null?void 0:S.studentData)==null?void 0:k.caseManagerId),a.value.dates.reviewDate&&(x.reviewDate=(D=(w=v.app)==null?void 0:w.dates)==null?void 0:D.reviewDate),a.value.dates.reevalDate&&(x.reevalDate=(F=(N=v.app)==null?void 0:N.dates)==null?void 0:F.reevalDate),a.value.dates.meetingDate&&(x.meetingDate=(O=(P=v.app)==null?void 0:P.dates)==null?void 0:O.meetingDate),a.value.providers.all&&o.forEach(Q=>{var ye,X;x[Q]=(X=(ye=v.app)==null?void 0:ye.providers)==null?void 0:X[Q]}),a.value.accommodations.instruction&&(x.instruction=(U=(M=v.app)==null?void 0:M.accommodations)==null?void 0:U.instruction),a.value.accommodations.assessment&&(x.assessment=(j=(z=v.app)==null?void 0:z.accommodations)==null?void 0:j.assessment),a.value.schedule.periods&&(x.schedule=(W=(H=v.app)==null?void 0:H.schedule)==null?void 0:W.periods),a.value.schedule.classServices&&(x.classServices=(re=(K=v.app)==null?void 0:K.schedule)==null?void 0:re.classServices),a.value.documents.ataglancePdfUrl&&(x.ataglancePdfUrl=(ce=(me=v.app)==null?void 0:me.documents)==null?void 0:ce.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(x.bipPdfUrl=(te=(pe=v.app)==null?void 0:pe.documents)==null?void 0:te.bipPdfUrl),x}function g(){const v=r.students.map(T=>p(T)),x=[],y=[],_={firstName:"First Name",lastName:"Last Name",grade:"Grade",plan:"Plan Type",caseManagerId:"Case Manager",reviewDate:"Plan Review",reevalDate:"Reevaluation",meetingDate:"Meeting Date",speechId:"Speech",otId:"OT",mhId:"Mental Health",ptId:"PT",scId:"SC",trId:"TR",audId:"Audiology",viId:"Vision",atId:"AT",dhhId:"DHH",omId:"O&M",bisId:"BIS",hnId:"HN",swId:"SW",instruction:"Instructional Accommodation",assessment:"Assessment Accommodations",schedule:"Schedule",classServices:"Class Services",ataglancePdfUrl:"At-A-Glance",bipPdfUrl:"BIP"};Object.entries(a.value).forEach(([T,b])=>{Object.entries(b).forEach(([S,k])=>{k&&(S==="all"?o.forEach(w=>{x.push(_[w])}):x.push(_[S]))})}),v.forEach(T=>{const b=[];Object.entries(a.value).forEach(([S,k])=>{Object.entries(k).forEach(([w,D])=>{if(D)if(w==="all")o.forEach(N=>{const F=T[N]||"";b.push(F?c(F):"")});else{let N=T[w]||"";w.endsWith("Id")?N=N?c(N):"":w==="classServices"?N=Array.isArray(T.classServices)?T.classServices.join(", "):"":w==="schedule"&&(N=T.schedule?Object.entries(T.schedule).map(([F,P])=>`${F}: ${c(P)}`).join("; "):""),b.push(N)}})}),y.push(b)});const I=[x.join(","),...y.map(T=>T.map(b=>`"${String(b).replace(/"/g,'""')}"`).join(","))].join(`
`),R=new Blob([I],{type:"text/csv"}),A=window.URL.createObjectURL(R),E=document.createElement("a");E.href=A,E.download="students-export.csv",E.click(),window.URL.revokeObjectURL(A),n("close")}return(v,x)=>(B(),V("div",fV,[d("div",hV,[d("header",null,[x[17]||(x[17]=d("h2",null,"Export Students",-1)),d("button",{onClick:x[0]||(x[0]=y=>v.$emit("close")),class:"close-btn"},"")]),d("main",null,[d("p",null,"Export "+J(t.students.length)+" students",1),d("div",pV,[d("div",mV,[x[23]||(x[23]=d("h4",null,"Student Info",-1)),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[1]||(x[1]=y=>a.value.studentData.firstName=y)},null,512),[[_t,a.value.studentData.firstName]]),x[18]||(x[18]=Oe(" First Name "))]),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[2]||(x[2]=y=>a.value.studentData.lastName=y)},null,512),[[_t,a.value.studentData.lastName]]),x[19]||(x[19]=Oe(" Last Name "))]),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[3]||(x[3]=y=>a.value.studentData.grade=y)},null,512),[[_t,a.value.studentData.grade]]),x[20]||(x[20]=Oe(" Grade "))]),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[4]||(x[4]=y=>a.value.studentData.plan=y)},null,512),[[_t,a.value.studentData.plan]]),x[21]||(x[21]=Oe(" Plan Type "))]),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[5]||(x[5]=y=>a.value.studentData.caseManagerId=y)},null,512),[[_t,a.value.studentData.caseManagerId]]),x[22]||(x[22]=Oe(" Case Manager "))])]),d("div",gV,[x[27]||(x[27]=d("h4",null,"Important Dates",-1)),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[6]||(x[6]=y=>a.value.dates.reviewDate=y)},null,512),[[_t,a.value.dates.reviewDate]]),x[24]||(x[24]=Oe(" Plan Review "))]),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[7]||(x[7]=y=>a.value.dates.reevalDate=y)},null,512),[[_t,a.value.dates.reevalDate]]),x[25]||(x[25]=Oe(" Reevaluation "))]),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[8]||(x[8]=y=>a.value.dates.meetingDate=y)},null,512),[[_t,a.value.dates.meetingDate]]),x[26]||(x[26]=Oe(" Meeting Date "))])]),d("div",vV,[x[29]||(x[29]=d("h4",null,"Related Services",-1)),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[9]||(x[9]=y=>a.value.providers.all=y)},null,512),[[_t,a.value.providers.all]]),x[28]||(x[28]=Oe(" All Service Providers "))])]),d("div",xV,[x[32]||(x[32]=d("h4",null,"Accommodations",-1)),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[10]||(x[10]=y=>a.value.accommodations.instruction=y)},null,512),[[_t,a.value.accommodations.instruction]]),x[30]||(x[30]=Oe(" Instructional "))]),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[11]||(x[11]=y=>a.value.accommodations.assessment=y)},null,512),[[_t,a.value.accommodations.assessment]]),x[31]||(x[31]=Oe(" Assessment "))])]),d("div",yV,[x[35]||(x[35]=d("h4",null,"Schedule & Services",-1)),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[12]||(x[12]=y=>a.value.schedule.periods=y)},null,512),[[_t,a.value.schedule.periods]]),x[33]||(x[33]=Oe(" Class Schedule "))]),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[13]||(x[13]=y=>a.value.schedule.classServices=y)},null,512),[[_t,a.value.schedule.classServices]]),x[34]||(x[34]=Oe(" Class Services "))])]),d("div",EV,[x[38]||(x[38]=d("h4",null,"Documents",-1)),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[14]||(x[14]=y=>a.value.documents.ataglancePdfUrl=y)},null,512),[[_t,a.value.documents.ataglancePdfUrl]]),x[36]||(x[36]=Oe(" At-A-Glance "))]),d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":x[15]||(x[15]=y=>a.value.documents.bipPdfUrl=y)},null,512),[[_t,a.value.documents.bipPdfUrl]]),x[37]||(x[37]=Oe(" BIP "))])])]),d("div",{class:"quick-select"},[d("button",{onClick:f},"Select All"),d("button",{onClick:h},"Deselect All")])]),d("footer",null,[d("button",{onClick:x[16]||(x[16]=y=>v.$emit("close")),class:"btn-secondary"},"Cancel"),d("button",{onClick:g,class:"btn-primary",disabled:!l.value},"Export",8,_V)])])]))}},SV=yt(bV,[["__scopeId","data-v-9cb02217"]]),TV={class:"modal-body"},AV={class:"student-info"},wV={class:"case-manager-info"},CV={class:"form-group"},IV={key:0,class:"no-forms-message"},kV={key:1,class:"form-selection"},DV=["id","value"],PV=["for"],RV={class:"form-title"},FV={class:"form-details"},OV={key:0,class:"form-description"},NV={class:"form-date"},MV={key:0,class:"form-group"},LV={class:"teacher-selection-header"},BV={class:"teacher-actions"},UV=["title"],$V={class:"teacher-selection"},VV={key:0,class:"no-teachers-message"},HV={key:1,class:"teacher-checkboxes"},jV=["id","value"],GV=["for"],WV={class:"teacher-email"},zV={key:0,class:"selected-emails-preview"},KV={class:"email-preview"},qV={key:1,class:"form-group"},XV={class:"duplication-options"},YV={class:"option-item"},JV={key:2,class:"form-group"},QV={class:"send-history"},ZV={class:"history-info"},eH={class:"history-date"},tH={class:"history-teachers"},rH={key:0,class:"history-success"},nH={key:1,class:"history-failed"},sH={key:0,class:"history-links"},aH=["href"],iH=["href"],oH={key:0,class:"resource-links"},lH={class:"resource-section"},cH={class:"resource-note"},uH={class:"success-details"},dH={key:0,class:"student-info"},fH={class:"form-link"},hH=["href"],pH={class:"modal-footer"},mH=["disabled"],gH={key:0},vH={key:1},xH={__name:"TeacherFeedbackDialog",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!0}},emits:["close","form-sent"],setup(t,{emit:e}){const r=t,n=e,{activeForms:s}=Sx(),{userList:i,fetchUsers:a}=La(),o=se(!1),l=se(""),c=se(""),u=se(null),f=se(!1),h=se("Copy teacher emails to clipboard"),p=se(""),m=se([]),g=Ae(()=>s.value||[]),v=Ae(()=>{var k;return p.value&&((k=g.value)==null?void 0:k.find(w=>w.id===p.value))||null}),x=Ae(()=>{if(!p.value||!r.student)return[];try{return JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]").filter(w=>w&&w.studentId===r.student.id&&w.formId===p.value).sort((w,D)=>new Date(D.sentAt)-new Date(w.sentAt))||[]}catch(k){return console.warn("Error parsing send history:",k),[]}}),y=Ae(()=>{var w,D,N;if(!r.student||!i.value)return[];const k=new Set;if((D=(w=r.student.app)==null?void 0:w.schedule)!=null&&D.periods)Object.values(r.student.app.schedule.periods).forEach(F=>{var O;const P=typeof F=="string"?F:F==null?void 0:F.teacherId;P&&k.add(P),(O=F==null?void 0:F.coTeaching)!=null&&O.caseManagerId&&k.add(F.coTeaching.caseManagerId)});else{const F=r.student.schedule||{};Object.values(F).forEach(P=>{P&&k.add(P)})}return(N=r.student.aeries)!=null&&N.schedule&&Object.values(r.student.aeries.schedule).forEach(F=>{F!=null&&F.teacherId&&k.add(F.teacherId)}),Array.from(k).map(F=>(i.value||[]).find(P=>P&&P.id===F)).filter(Boolean).filter(F=>F&&F.role==="teacher")}),_=Ae(()=>p.value&&(m.value||[]).length>0),I=k=>k?(k.seconds?new Date(k.seconds*1e3):new Date(k)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",R=k=>k?(k.seconds?new Date(k.seconds*1e3):new Date(k)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):"",A=()=>{m.value=[...y.value]},E=async()=>{const k=m.value.map(w=>w.email).join(", ");try{await navigator.clipboard.writeText(k),h.value=" Copied!",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}catch(w){console.error("Failed to copy emails:",w);const D=document.createElement("textarea");D.value=k,document.body.appendChild(D),D.select();try{document.execCommand("copy"),h.value=" Copied!",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}catch{h.value=" Copy failed",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}document.body.removeChild(D)}},T=async()=>{var k,w,D,N;if(_.value)try{o.value=!0,l.value="",u.value=null;const F=v.value,P=m.value.map(me=>me.email),O=m.value.map(me=>me.name||me.email).join(", "),M=r.student.firstName||r.student.first_name||((w=(k=r.student.app)==null?void 0:k.studentData)==null?void 0:w.firstName)||"",U=r.student.lastName||r.student.last_name||((N=(D=r.student.app)==null?void 0:D.studentData)==null?void 0:N.lastName)||"",z=`${M} ${U}`.trim(),j=(((M==null?void 0:M[0])||"")+((U==null?void 0:U[0])||"")).toUpperCase()||"ST";let H=F.formUrl;H.includes("/edit")&&(H=H.replace("/edit","/copy"));const W=new URLSearchParams;j&&j!=="ST"&&W.append("title",`${j} - ${F.title}`),z&&W.append("student",z),P.length>0&&W.append("responders",P.join(", "));const K=H.includes("?")?"&":"?",re=W.toString()?`${H}${K}${W.toString()}`:H;window.open(re,"_blank","noopener"),l.value=`Form opened for ${O}. Student: ${j} - ${z}`,c.value="success",u.value={message:`Form opened successfully for ${j} - ${z}`,sent:P.length,failed:0,formUrl:re,studentInitials:j,studentName:z},b(F,m.value,re)}catch(F){console.error("Error opening form:",F),l.value="Failed to open form. Please try again.",c.value="error"}finally{o.value=!1}},b=(k,w,D=null)=>{const N=JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]"),F={id:`${k.id}_${r.student.id}_${Date.now()}`,formId:k.id,formTitle:k.title,formUrl:D||k.formUrl,sheetUrl:null,studentId:r.student.id,studentName:`${r.student.firstName} ${r.student.lastName}`,caseManagerId:r.currentUser.uid,caseManagerName:r.currentUser.name||r.currentUser.email,teachers:w.map(O=>({id:O.id,name:O.name,email:O.email})),sentAt:new Date().toISOString(),method:"gmail"},P=N.findIndex(O=>O.id===F.id);P!==-1?N[P]=F:N.push(F),localStorage.setItem("casemanage_sent_forms",JSON.stringify(N))},S=()=>{n("close")};return Ut(()=>{p.value="",m.value=[],l.value="",a()}),Vt(y,k=>{k&&k.length>0&&m.value.length===0&&(m.value=[...k])},{immediate:!0}),(k,w)=>{var D,N,F,P;return B(),V("div",{class:"modal-overlay",onClick:S},[d("div",{class:"modal-content",onClick:w[3]||(w[3]=mn(()=>{},["stop"]))},[d("div",{class:"modal-header"},[w[4]||(w[4]=d("h3",null,"Send Teacher Feedback Form",-1)),d("button",{onClick:S,class:"close-btn"},"")]),d("div",TV,[d("div",AV,[d("h4",null,J(t.student.firstName)+" "+J(t.student.lastName)+" (Grade "+J(t.student.grade)+")",1),d("p",wV,"Case Manager: "+J(((D=t.currentUser)==null?void 0:D.name)||((N=t.currentUser)==null?void 0:N.email)),1)]),d("div",CV,[w[6]||(w[6]=d("label",null,"Select Feedback Form to Send:",-1)),g.value.length===0?(B(),V("div",IV,w[5]||(w[5]=[d("p",null,"No feedback forms available. Forms must be created in the Admin Panel first.",-1),d("p",null,[d("em",null,"Contact your administrator to create feedback forms.")],-1)]))):(B(),V("div",kV,[(B(!0),V(Re,null,Ve(g.value,O=>(B(),V("div",{key:O.id,class:"form-option"},[we(d("input",{type:"radio",id:O.id,value:O.id,"onUpdate:modelValue":w[0]||(w[0]=M=>p.value=M)},null,8,DV),[[mi,p.value]]),d("label",{for:O.id,class:"form-option-label"},[d("div",RV,J(O.title),1),d("div",FV,[O.description?(B(),V("span",OV,J(O.description),1)):_e("",!0),d("span",NV,"Created: "+J(I(O.createdAt)),1)])],8,PV)]))),128))]))]),p.value?(B(),V("div",MV,[d("div",LV,[w[7]||(w[7]=d("label",null,"Select Teachers to Send Form To:",-1)),d("div",BV,[y.value.length>0?(B(),V("button",{key:0,onClick:A,type:"button",class:"btn-select-all"}," Select All ")):_e("",!0),m.value.length>0?(B(),V("button",{key:1,onClick:E,type:"button",class:"btn-copy-emails",title:h.value},"  Copy Emails ",8,UV)):_e("",!0)])]),d("div",$V,[y.value.length===0?(B(),V("div",VV,w[8]||(w[8]=[d("p",null,"No teachers found for this student's schedule.",-1)]))):(B(),V("div",HV,[(B(!0),V(Re,null,Ve(y.value,O=>(B(),V("div",{key:O.id,class:"checkbox-item"},[we(d("input",{type:"checkbox",id:`teacher-${O.id}`,value:O,"onUpdate:modelValue":w[1]||(w[1]=M=>m.value=M)},null,8,jV),[[_t,m.value]]),d("label",{for:`teacher-${O.id}`},[Oe(J(O.name||O.email)+" ",1),d("span",WV,"("+J(O.email)+")",1)],8,GV)]))),128))]))]),m.value.length>0?(B(),V("div",zV,[w[9]||(w[9]=d("p",null,[d("strong",null,"Selected teacher emails:")],-1)),d("div",KV,J(m.value.map(O=>O.email).join(", ")),1)])):_e("",!0)])):_e("",!0),p.value&&m.value.length>0&&((F=v.value)!=null&&F.sheetTemplateUrl)?(B(),V("div",qV,[w[11]||(w[11]=d("label",null,"Response Collection:",-1)),d("div",XV,[d("div",YV,[we(d("input",{type:"checkbox",id:"duplicate-sheet","onUpdate:modelValue":w[2]||(w[2]=O=>f.value=O)},null,512),[[_t,f.value]]),w[10]||(w[10]=d("label",{for:"duplicate-sheet"},[d("strong",null,"Duplicate custom sheet"),d("span",{class:"option-description"},"Create a copy of the response template sheet in your Google Drive")],-1))])])])):_e("",!0),p.value&&x.value.length>0?(B(),V("div",JV,[w[12]||(w[12]=d("label",null,"Previous Sends for this Student:",-1)),d("div",QV,[(B(!0),V(Re,null,Ve(x.value,O=>(B(),V("div",{key:O.id,class:"history-item"},[d("div",ZV,[d("span",eH,J(R(O.sentAt)),1),d("span",tH,J((O.teacherEmails||[]).length)+" teacher"+J((O.teacherEmails||[]).length===1?"":"s"),1),O.successful>0?(B(),V("span",rH," "+J(O.successful)+" sent",1)):_e("",!0),O.failed>0?(B(),V("span",nH," "+J(O.failed)+" failed",1)):_e("",!0)]),O.formUrl||O.sheetUrl?(B(),V("div",sH,[O.formUrl?(B(),V("a",{key:0,href:O.formUrl,target:"_blank",class:"history-link"}," Form",8,aH)):_e("",!0),O.sheetUrl?(B(),V("a",{key:1,href:O.sheetUrl,target:"_blank",class:"history-link"}," Sheet",8,iH)):_e("",!0)])):_e("",!0)]))),128))])])):_e("",!0),l.value?(B(),V("div",{key:3,class:Ze(`status-message ${c.value}`)},[Oe(J(l.value)+" ",1),c.value==="success"&&u.value?(B(),V("div",oH,[d("div",lH,[w[16]||(w[16]=d("h5",null," Form Opened Successfully!",-1)),d("p",cH,[d("strong",null,J(u.value.message),1)]),d("div",uH,[d("p",null,[w[13]||(w[13]=Oe("  Form opened for ")),d("strong",null,J(u.value.sent),1),Oe(" teacher"+J(u.value.sent===1?"":"s"),1)]),u.value.studentInitials?(B(),V("p",dH,[w[14]||(w[14]=Oe("  Student: ")),d("strong",null,J(u.value.studentInitials),1),Oe(" - "+J(u.value.studentName),1)])):_e("",!0),d("p",fH,[w[15]||(w[15]=Oe("  Form Link: ")),d("a",{href:u.value.formUrl,target:"_blank"},J((P=v.value)==null?void 0:P.title),9,hH)])])])])):_e("",!0)],2)):_e("",!0)]),d("div",pH,[d("button",{onClick:S,class:"secondary-btn"},"Cancel"),d("button",{onClick:T,class:"primary-btn",disabled:!_.value||o.value},[o.value?(B(),V("span",gH,"Creating Form...")):(B(),V("span",vH," Create New Form"))],8,mH)])])])}}},yH=yt(xH,[["__scopeId","data-v-f8c1ccfe"]]),EH={class:"students-view"},_H={class:"page-header"},bH={class:"header-left"},SH={class:"search-container"},TH={class:"header-controls"},AH={class:"filter-group"},wH={key:1,class:"filter-group"},CH={class:"radio-group"},IH=["value"],kH={class:"filter-group"},DH={class:"radio-group"},PH=["checked"],RH=["checked","disabled"],FH=["checked"],OH={key:0,class:"filters-panel"},NH={class:"filters-content"},MH={class:"filter-group"},LH=["value"],BH={class:"filter-group"},UH=["value"],$H={class:"filter-group"},VH=["value"],HH={class:"filter-group"},jH={class:"content"},GH={key:0},WH={key:1,class:"view-container"},zH={key:0,class:"group-section"},KH={class:"group-header"},qH={key:2,class:"view-section"},XH={__name:"StudentsView",setup(t){const e=kB(),r=PB(e),n=UB(e,r),s=HB(e),{students:i,userMapObj:a,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:u,paraeducators:f,currentUser:h,isAdmin:p,showProviderView:m,getStudentById:g}=e,{showFilters:v,currentFilters:x,toggleFilters:y,clearFilters:_,applyFilters:I,debouncedApplyFilters:R}=r,{visibleStudents:A,canEditAllStudents:E,canEditOwnStudents:T,canViewAllStudents:b,canAccessTesting:S,canAccessTestingPartial:k,canAccessFilters:w,isClassViewDisabled:D,setViewMode:N,providerViewOptions:F}=n,P=VB(e,r,Ae(()=>n.visibleStudents.value)),{currentViewMode:O,studentsByClass:M,directAssignmentStudents:U,testingViewStudents:z}=P,{editingStudentId:j,emailingStudentId:H,showExport:W,showAddStudent:K,showFeedbackDialog:re,feedbackStudentId:me,editStudent:ce,emailStudent:pe,handleTeacherFeedback:te,handleFormSent:Q,handleStudentAdded:ye,handleStudentSaved:X,handleNavAction:q}=s;return Ae(()=>{var ne;return F!=null&&F.value?F.value:((ne=h.value)==null?void 0:ne.role)==="case_manager"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]}),(Y,ne)=>{var ve,ae,le;return B(),V("div",EH,[st(n7,{"current-user":Z(h),"is-admin":Z(p),onAction:Z(q)},null,8,["current-user","is-admin","onAction"]),d("div",_H,[d("div",bH,[ne[24]||(ne[24]=d("h1",null,"Student Management",-1)),d("div",SH,[we(d("input",{type:"text","onUpdate:modelValue":ne[0]||(ne[0]=de=>Z(x).search=de),onInput:ne[1]||(ne[1]=(...de)=>Z(R)&&Z(R)(...de)),placeholder:"Search students...",class:"search-input"},null,544),[[Je,Z(x).search]])])]),d("div",TH,[Z(w)?(B(),V("button",{key:0,onClick:ne[2]||(ne[2]=(...de)=>Z(y)&&Z(y)(...de)),class:Ze(["filter-toggle-btn",{active:Z(v)}])},ne[25]||(ne[25]=[d("span",null,"",-1),Oe(" Filters ")]),2)):_e("",!0),d("div",AH,[we(d("select",{"onUpdate:modelValue":ne[3]||(ne[3]=de=>Z(x).sortBy=de),onChange:ne[4]||(ne[4]=de=>Z(I)()),class:"sort-select"},ne[26]||(ne[26]=[nn('<option value="firstName" data-v-8bb6f87f>First Name</option><option value="lastName" data-v-8bb6f87f>Last Name</option><option value="grade" data-v-8bb6f87f>Grade</option><option value="reviewDate" data-v-8bb6f87f>Review Date</option><option value="reevalDate" data-v-8bb6f87f>Re-evaluation Date</option><option value="meetingDate" data-v-8bb6f87f>Meeting Date</option>',6)]),544),[[mr,Z(x).sortBy]])]),Z(F)&&Z(F).length?(B(),V("div",wH,[d("div",CH,[(B(!0),V(Re,null,Ve(Z(F),de=>(B(),V("label",{key:de.value,class:Ze(["radio-btn",{active:Z(x).providerView===de.value}])},[we(d("input",{type:"radio","onUpdate:modelValue":ne[5]||(ne[5]=Se=>Z(x).providerView=Se),value:de.value,onChange:ne[6]||(ne[6]=(...Se)=>Z(I)&&Z(I)(...Se))},null,40,IH),[[mi,Z(x).providerView]]),Oe(" "+J(de.label),1)],2))),128))])])):_e("",!0),d("div",kH,[d("div",DH,[d("label",{class:Ze(["radio-btn",{active:Z(x).viewMode==="list"}])},[d("input",{type:"radio",value:"list",checked:Z(x).viewMode==="list",onChange:ne[7]||(ne[7]=de=>Z(N)("list"))},null,40,PH),ne[27]||(ne[27]=Oe(" List "))],2),d("label",{class:Ze(["radio-btn",{active:Z(x).viewMode==="class",disabled:Z(D)}])},[d("input",{type:"radio",value:"class",checked:Z(x).viewMode==="class",onChange:ne[8]||(ne[8]=de=>Z(N)("class")),disabled:Z(D)},null,40,RH),d("span",{class:Ze({strikethrough:Z(D)})},"Class",2)],2),Z(S)?(B(),V("label",{key:0,class:Ze(["radio-btn",{active:Z(x).viewMode==="testing"}])},[d("input",{type:"radio",value:"testing",checked:Z(x).viewMode==="testing",onChange:ne[9]||(ne[9]=de=>Z(N)("testing"))},null,40,FH),ne[28]||(ne[28]=Oe(" SS-Testing "))],2)):_e("",!0)])]),d("button",{onClick:ne[10]||(ne[10]=(...de)=>Z(_)&&Z(_)(...de)),class:"reset-btn",title:"Reset all filters"},"  ")])]),Z(v)?(B(),V("div",OH,[d("div",NH,[d("div",MH,[ne[30]||(ne[30]=d("label",null,"Case Manager",-1)),we(d("select",{"onUpdate:modelValue":ne[11]||(ne[11]=de=>Z(x).cm=de),onChange:ne[12]||(ne[12]=de=>Z(I)()),class:"filter-select"},[ne[29]||(ne[29]=d("option",{value:"all"},"All Case Managers",-1)),(B(!0),V(Re,null,Ve(Z(o),de=>(B(),V("option",{key:de.id,value:de.id},J(de.name||de.email||de.id),9,LH))),128))],544),[[mr,Z(x).cm]])]),d("div",BH,[ne[32]||(ne[32]=d("label",null,"Teacher",-1)),we(d("select",{"onUpdate:modelValue":ne[13]||(ne[13]=de=>Z(x).teacher=de),onChange:ne[14]||(ne[14]=de=>Z(I)()),class:"filter-select"},[ne[31]||(ne[31]=d("option",{value:"all"},"All Teachers",-1)),(B(!0),V(Re,null,Ve(Z(l),de=>(B(),V("option",{key:de.id,value:de.id},J(de.name||de.email||de.id),9,UH))),128))],544),[[mr,Z(x).teacher]])]),d("div",$H,[ne[34]||(ne[34]=d("label",null,"Paraeducator",-1)),we(d("select",{"onUpdate:modelValue":ne[15]||(ne[15]=de=>Z(x).paraeducator=de),onChange:ne[16]||(ne[16]=de=>Z(I)()),class:"filter-select"},[ne[33]||(ne[33]=d("option",{value:"all"},"All Paraeducators",-1)),(B(!0),V(Re,null,Ve(Z(f),de=>(B(),V("option",{key:de.id,value:de.id},J(de.name||de.email||de.id),9,VH))),128))],544),[[mr,Z(x).paraeducator]])]),d("div",HH,[ne[36]||(ne[36]=d("label",null,"Plan Type",-1)),we(d("select",{"onUpdate:modelValue":ne[17]||(ne[17]=de=>Z(x).plan=de),onChange:ne[18]||(ne[18]=de=>Z(I)()),class:"filter-select"},ne[35]||(ne[35]=[d("option",{value:"all"},"All Plans",-1),d("option",{value:"IEP"},"IEP",-1),d("option",{value:"504"},"504",-1)]),544),[[mr,Z(x).plan]])])])])):_e("",!0),d("div",jH,[Z(O)==="list"?(B(),V("div",GH,[st(Mf,{students:Z(A),"user-map":Z(a),"current-user":Z(h),"student-data":Z(e),"can-edit-all":Z(E),"can-edit-own":Z(T),"can-view-all":Z(b),"can-access-testing":Z(S),"can-access-testing-partial":Z(k),"aide-schedule":((ve=Z(h))==null?void 0:ve.role)==="paraeducator"?Z(u):{},onEdit:Z(ce),onEmail:Z(pe),onTeacherFeedback:Z(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Z(O)==="class"?(B(),V("div",WH,[Z(U).length>0?(B(),V("div",zH,[ne[37]||(ne[37]=d("h3",{class:"group-header direct-assignment-header"},"Direct Assignment",-1)),st(Mf,{students:Z(U),"user-map":Z(a),"current-user":Z(h),"student-data":Z(e),"can-edit-all":Z(E),"can-edit-own":Z(T),"can-view-all":Z(b),"can-access-testing":Z(S),"can-access-testing-partial":Z(k),"aide-schedule":((ae=Z(h))==null?void 0:ae.role)==="paraeducator"?Z(u):{},onEdit:Z(ce),onEmail:Z(pe),onTeacherFeedback:Z(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):_e("",!0),(B(!0),V(Re,null,Ve(Z(M),(de,Se)=>{var Ie;return B(),V("div",{key:Se,class:"group-section"},[d("h3",KH,"Period "+J(Se),1),st(Mf,{students:de,"user-map":Z(a),"current-user":Z(h),"student-data":Z(e),"can-edit-all":Z(E),"can-edit-own":Z(T),"can-view-all":Z(b),"can-access-testing":Z(S),"can-access-testing-partial":Z(k),"aide-schedule":((Ie=Z(h))==null?void 0:Ie.role)==="paraeducator"?Z(u):{},onEdit:Z(ce),onEmail:Z(pe),onTeacherFeedback:Z(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])}),128))])):Z(O)==="testing"?(B(),V("div",qH,[st(Mf,{students:Z(z),"user-map":Z(a),"current-user":Z(h),"student-data":Z(e),"can-edit-all":Z(E),"can-edit-own":Z(T),"can-view-all":Z(b),"can-access-testing":Z(S),"can-access-testing-partial":Z(k),"testing-view":!0,"aide-schedule":((le=Z(h))==null?void 0:le.role)==="paraeducator"?Z(u):{},onEdit:Z(ce),onEmail:Z(pe),onTeacherFeedback:Z(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):_e("",!0)]),Z(j)?(B(),Jr(Z$,{key:1,"student-id":Z(j),users:{userRoles:Z(c)},onClose:ne[19]||(ne[19]=de=>j.value=null),onSaved:Z(X)},null,8,["student-id","users","onSaved"])):_e("",!0),Z(H)?(B(),Jr(dV,{key:2,student:Z(g)(Z(H)),"user-map":Z(a),onClose:ne[20]||(ne[20]=de=>H.value=null)},null,8,["student","user-map"])):_e("",!0),Z(W)?(B(),Jr(SV,{key:3,students:Z(i),"user-map":Z(a),onClose:ne[21]||(ne[21]=de=>W.value=!1)},null,8,["students","user-map"])):_e("",!0),Z(K)?(B(),Jr(Ix,{key:4,users:{userRoles:Z(c)},onClose:ne[22]||(ne[22]=de=>K.value=!1),onSaved:Z(ye)},null,8,["users","onSaved"])):_e("",!0),Z(re)?(B(),Jr(yH,{key:5,student:Z(g)(Z(me)),"current-user":Z(h),"user-map":Z(a),onClose:ne[23]||(ne[23]=de=>re.value=!1),onFormSent:Z(Q)},null,8,["student","current-user","user-map","onFormSent"])):_e("",!0)])}}},tS=yt(XH,[["__scopeId","data-v-8bb6f87f"]]),YH={class:"login-container"},JH={__name:"LoginView",setup(t){const e=Si(),r=async()=>{try{const{user:n}=await T1($t,pI),s=Qe(Xe,"users",n.uid);(await tr(s)).exists()||await Kt(s,{name:n.displayName||"",email:n.email,role:"admin"}),e.push({name:"Home"})}catch(n){console.error("Login failed:",n),alert("Login failed: "+n.message)}};return(n,s)=>(B(),V("div",YH,[s[0]||(s[0]=d("h1",null,"Case Manager Portal",-1)),s[1]||(s[1]=d("p",null,"Please sign in with your Google account:",-1)),d("button",{onClick:r,class:"primary-btn"}," Sign in with Google ")]))}},QH=yt(JH,[["__scopeId","data-v-d9b5a53b"]]),ZH={name:"TabBar",props:{tabs:{type:Array,required:!0,default:()=>[]},activeTab:{type:String,required:!0}},emits:["tab-change"],methods:{getStatusIcon(t){switch(t){case"not-active":return"";case"not-working":return"";default:return""}},getStatusTooltip(t){switch(t){case"not-active":return" = Not active";case"not-working":return" = Not working";default:return""}}}},ej={class:"admin-tab-bar"},tj=["onClick","title"];function rj(t,e,r,n,s,i){return B(),V("div",ej,[(B(!0),V(Re,null,Ve(r.tabs,a=>(B(),V("button",{key:a.key,class:Ze({active:r.activeTab===a.key}),onClick:o=>t.$emit("tab-change",a.key),title:i.getStatusTooltip(a.status)},[Oe(J(a.label)+" ",1),a.status?(B(),V("span",{key:0,class:Ze(["status-indicator",a.status])},J(i.getStatusIcon(a.status)),3)):_e("",!0)],10,tj))),128))])}const nj=yt(ZH,[["render",rj],["__scopeId","data-v-5be36c07"]]),sj={name:"UserAddForm",setup(){const t=Ta(hI,"addUserWithRole"),e=po(),r=xs({name:"",email:"",role:"",provider:"",aeriesId:""}),n=se(null),s=se(""),i=se(!1),a=se(null),o=bp,{appSettings:l,loadAppSettings:c}=Ws(),u=Ae(()=>{if(l&&l.value&&l.value.serviceProviders){const _=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}];return l.value.serviceProviders.map(I=>_.find(R=>R.abbreviation===I)||{name:I,abbreviation:I})}return[]}),f=(_,I=!1)=>{s.value=_,i.value=I,setTimeout(()=>{s.value="",i.value=!1},5e3)},h=async(_,I,R,A,E)=>{try{const T={name:_,email:I,role:R,provider:A,aeriesId:E,createdAt:new Date,status:"active"};return{success:!0,userId:(await VC(wt(e,"users"),T)).id}}catch(T){throw T}},p=async(_,I,R,A,E)=>{var T,b;try{try{return await t({name:_,email:I,role:R,provider:A,aeriesId:E}),{success:!0,method:"cloud-function"}}catch(S){return S.code==="functions/already-exists"||(T=S.message)!=null&&T.includes("409")||(b=S.message)!=null&&b.includes("already exists")?(console.log(`User ${I} already exists in Firebase Auth, skipping...`),{success:!0,method:"already-exists",message:"User already exists"}):(await h(_,I,R,A,E),{success:!0,method:"firestore"})}}catch(S){return{success:!1,error:S.message}}},m=async()=>{if(!ws("addUser",5,6e4).allowed){f("Too many requests. Please wait before adding another user.",!0);return}const I=yB(r),R=xB(I);if(!R.isValid){f(`Please fix the following errors:
${R.errors.join(`
`)}`,!0);return}const A=["name","email","aeriesId"];for(const T of A)if(I[T]){const b=Wr(I[T]);if(!b.isSafe){f(`Security threat detected in ${T}: ${b.threats.join(", ")}`,!0);return}}Object.assign(r,I);const E=await p(r.name,r.email,r.role,r.provider,r.aeriesId);E.success?(f(`User ${r.name} added successfully!`),r.name="",r.email="",r.role="",r.provider="",r.aeriesId=""):f(`Error adding user: ${E.error}`,!0)},g=_=>{const I=_.target.files[0];if(I){const R=Mc(I,{allowedTypes:["csv","excel"],maxSize:5242880,fieldName:"User Import File"});if(!R.isValid){f(R.error,!0),_.target.value="";return}const A=Wr(I.name);if(!A.isSafe){f(`File name contains potentially dangerous content: ${A.threats.join(", ")}`,!0),_.target.value="";return}n.value=I}},v=async()=>{if(!n.value){f("Please select a file first",!0);return}const _=n.value.name.toLowerCase();if(!(_.endsWith(".csv")||_.endsWith(".xls")||_.endsWith(".xlsx"))){f("Unsupported file type. Please upload a .csv, .xls, or .xlsx file.",!0);return}f("Processing file...");try{_.endsWith(".csv")?await x(n.value):await y(n.value)}catch(I){f(`Error processing file: ${I.message}`,!0),console.error("Bulk upload error:",I)}},x=async _=>new Promise((I,R)=>{const A=new FileReader;A.onload=async E=>{try{const b=E.target.result.trim().split(/\r?\n/);if(b.length===0){R(new Error("The CSV file is empty."));return}const S=M=>{const U=[];let z="",j=!1;for(let H=0;H<M.length;H++){const W=M[H];W==='"'?j=!j:W===","&&!j?(U.push(z.trim()),z=""):z+=W}return U.push(z.trim()),U};let k=0;const w={name:0,email:1,role:2,provider:3,aeriesId:4},D=S(b[0]);D.map(M=>M.toLowerCase()).some(M=>M.includes("name")||M.includes("email")||M.includes("role"))&&(D.forEach((M,U)=>{const z=M.trim().toLowerCase();(z==="name"||z==="displayname")&&(w.name=U),z==="email"&&(w.email=U),z==="role"&&(w.role=U),(z==="provider"||z==="providertype")&&(w.provider=U),(z==="aeriesid"||z==="aeries_id"||z==="teacherid")&&(w.aeriesId=U)}),k=1);let F=0;const P=[];for(let M=k;M<b.length;M++){const U=b[M].trim();if(!U)continue;const z=S(U),j=(z[w.name]||"").trim(),H=(z[w.email]||"").trim(),W=(z[w.role]||"").trim(),K=(z[w.provider]||"").trim(),re=(z[w.aeriesId]||"").trim(),me=j.replace(/^"|"$/g,""),ce=H.replace(/^"|"$/g,""),pe=W.replace(/^"|"$/g,""),te=K.replace(/^"|"$/g,""),Q=re.replace(/^"|"$/g,"");if(!me||!ce||!pe){P.push(`Line ${M+1}: Missing name, email, or role.`);continue}if(!db(pe)){P.push(`Line ${M+1}: Invalid role "${pe}".`);continue}const ye=await p(me,ce,pe,te,Q);ye.success?(F++,ye.method==="already-exists"&&console.log(`Line ${M+1}: User ${ce} already exists, skipped`)):P.push(`Line ${M+1}: ${ye.error}`)}let O=`${F} users added successfully.`;P.length>0&&(O+=`
${P.length} errors:
`+P.join(`
`)),f(O,P.length>0),n.value=null,a.value&&(a.value.value=""),I()}catch(T){R(new Error(`Error processing CSV file: ${T.message}`))}},A.onerror=()=>R(new Error("Failed to read the CSV file.")),A.readAsText(_)}),y=async _=>new Promise((I,R)=>{const A=new FileReader;A.onload=async E=>{try{if(typeof XLSX>"u"){R(new Error("Excel upload requires SheetJS (XLSX) library. Please include it in your page."));return}const T=new Uint8Array(E.target.result),b=XLSX.read(T,{type:"array"}),S=b.SheetNames[0],k=b.Sheets[S],w=XLSX.utils.sheet_to_json(k,{defval:""});if(w.length===0){R(new Error("The Excel file is empty or unrecognized."));return}let D=0;const N=[];for(let P=0;P<w.length;P++){const O=w[P];let M="",U="",z="",j="",H="";for(const re in O){const me=re.toLowerCase(),ce=(""+O[re]).trim();(me==="name"||me==="displayname")&&!M?M=ce:me==="email"&&!U?U=ce:me==="role"&&!z?z=ce:(me==="provider"||me==="providertype")&&!j?j=ce:(me==="aeriesid"||me==="aeries_id"||me==="teacherid")&&!H&&(H=ce)}const W=Object.values(O).map(re=>(""+re).trim());if(!M&&W[0]&&(M=W[0]),!U&&W[1]&&(U=W[1]),!z&&W[2]&&(z=W[2]),!j&&W[3]&&(j=W[3]),!H&&W[4]&&(H=W[4]),!M||!U||!z){N.push(`Row ${P+1}: Missing name, email, or role.`);continue}if(!db(z)){N.push(`Row ${P+1}: Invalid role "${z}".`);continue}const K=await p(M,U,z,j,H);K.success?(D++,K.method==="already-exists"&&console.log(`Row ${P+1}: User ${U} already exists, skipped`)):N.push(`Row ${P+1}: ${K.error}`)}let F=`${D} users added successfully.`;N.length>0&&(F+=`
${N.length} errors:
`+N.join(`
`)),f(F,N.length>0),n.value=null,a.value&&(a.value.value=""),I()}catch(T){R(new Error(`Error processing Excel file: ${T.message}`))}},A.onerror=()=>R(new Error("Failed to read the Excel file.")),A.readAsArrayBuffer(_)});return Ut(async()=>{await c()}),{singleUser:r,validRoles:o,providerOptions:u,addSingleUser:m,selectedFile:n,statusMessage:s,isError:i,bulkFileInput:a,handleFileSelect:g,uploadBulkUsers:v,appSettings:l}}},aj={class:"add-user-wrapper"},ij={class:"add-single"},oj=["value"],lj={key:0},cj=["value"],uj={class:"add-bulk"},dj=["disabled"];function fj(t,e,r,n,s,i){return B(),V("div",aj,[d("div",ij,[e[16]||(e[16]=d("h3",null,"Add Single User",-1)),d("form",{onSubmit:e[5]||(e[5]=mn((...a)=>n.addSingleUser&&n.addSingleUser(...a),["prevent"])),class:"form-grid"},[d("div",null,[d("label",null,[e[8]||(e[8]=Oe(" Name: ")),we(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.singleUser.name=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[Je,n.singleUser.name]])])]),d("div",null,[d("label",null,[e[9]||(e[9]=Oe(" Email: ")),we(d("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>n.singleUser.email=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[Je,n.singleUser.email]])])]),d("div",null,[d("label",null,[e[11]||(e[11]=Oe(" Role: ")),we(d("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.singleUser.role=a),required:""},[e[10]||(e[10]=d("option",{value:"",disabled:""},"Select role...",-1)),(B(!0),V(Re,null,Ve(n.validRoles,a=>(B(),V("option",{key:a,value:a},J(a),9,oj))),128))],512),[[mr,n.singleUser.role]])])]),n.providerOptions.length>0?(B(),V("div",lj,[d("label",null,[e[13]||(e[13]=Oe(" Provider Type: ")),we(d("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.singleUser.provider=a)},[e[12]||(e[12]=d("option",{value:""},"None",-1)),(B(!0),V(Re,null,Ve(n.providerOptions,a=>(B(),V("option",{key:a.abbreviation,value:a.abbreviation},J(a.name)+" ("+J(a.abbreviation)+") ",9,cj))),128))],512),[[mr,n.singleUser.provider]])])])):_e("",!0),d("div",null,[d("label",null,[e[14]||(e[14]=Oe(" Aeries ID: ")),we(d("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>n.singleUser.aeriesId=a),placeholder:"Optional Aeries Teacher ID"},null,512),[[Je,n.singleUser.aeriesId]])])]),e[15]||(e[15]=d("button",{type:"submit"},"Add User",-1))],32)]),d("div",uj,[e[17]||(e[17]=d("h3",null,"Bulk Upload Users",-1)),d("div",null,[d("input",{type:"file",ref:"bulkFileInput",accept:".csv, .xls, .xlsx",onChange:e[6]||(e[6]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),d("button",{onClick:e[7]||(e[7]=(...a)=>n.uploadBulkUsers&&n.uploadBulkUsers(...a)),disabled:!n.selectedFile}," Upload Users ",8,dj)]),e[18]||(e[18]=nn(`<h4 data-v-4932f701>Example Formatting</h4><div data-v-4932f701>File needs to be in .csv, .xls, .xlsx format, like an Excel spreadsheet.</div><div class="example-format" data-v-4932f701><p data-v-4932f701><strong data-v-4932f701>CSV Format:</strong></p><pre data-v-4932f701>Name,Email,Role,Provider,AeriesID
&quot;John Smith&quot;,&quot;john.smith@school.org&quot;,&quot;teacher&quot;,&quot;&quot;,&quot;123456&quot;
&quot;Jane Doe&quot;,&quot;jane.doe@school.org&quot;,&quot;service_provider&quot;,&quot;SLP&quot;,&quot;789012&quot;
&quot;Bob Johnson&quot;,&quot;bob.johnson@school.org&quot;,&quot;case_manager&quot;,&quot;&quot;,&quot;&quot;</pre><p data-v-4932f701><strong data-v-4932f701>Supported Roles:</strong> admin, teacher, case_manager, sped_chair, service_provider</p><p data-v-4932f701><strong data-v-4932f701>Provider Types:</strong> SLP, OT, PT, SC, MH, TR, AUD, VI, AT, DHH, O&amp;M, BIS, HN, SW</p><p data-v-4932f701><strong data-v-4932f701>Aeries ID:</strong> Optional 6-digit teacher ID from Aeries system</p></div>`,3))]),n.statusMessage?(B(),V("div",{key:0,class:Ze(["status-msg",{error:n.isError}])},J(n.statusMessage),3)):_e("",!0)])}const hj=yt(sj,[["render",fj],["__scopeId","data-v-4932f701"]]),su=20,pj={name:"UserTable",setup(){const t=po(),e=se([]),r=se(1),n=se("name"),s=se(""),i=se(null),a=se(""),o=se(!1),l=se(!1),c=se([]),u=se(null),f=bp,h=Ws(),p=h.appSettings,m=h.loadAppSettings;let g=null;const v=()=>{g&&clearTimeout(g),g=setTimeout(()=>{I()},300)},x=Ae(()=>{var F;return Array.isArray((F=p.value)==null?void 0:F.serviceProviders)&&p.value.serviceProviders.length>0}),y=Ae(()=>{var F;return((F=p.value)==null?void 0:F.serviceProviders)||[]}),_=(F,P=!1)=>{a.value=F,o.value=P,setTimeout(()=>{a.value="",o.value=!1},3e3)},I=()=>{r.value=1,R()},R=async(F="first")=>{_("");const P=wt(t,"users");let O;if(s.value&&n.value==="name"){const z=(await jt(ur(P,dn("name"),Ns(1e3)))).docs.map(j=>({id:j.id,...j.data()})).filter(j=>(j.name||"").toLowerCase().includes(s.value.toLowerCase()));i.value=null,e.value=z,l.value=!1;return}s.value&&n.value==="email"?O=ur(P,dn("email"),jr("email",">=",s.value),jr("email","<=",s.value+""),Ns(su)):s.value?O=ur(P,dn("name"),jr("name",">=",s.value),jr("name","<=",s.value+""),Ns(su)):O=ur(P,dn("name"),Ns(su)),F==="next"&&c.value.length&&(O=ur(P,dn(n.value),th(c.value[c.value.length-1]),Ns(su)));const M=await jt(O);c.value=M.docs,i.value=null,e.value=c.value.map(U=>({id:U.id,...U.data()})),l.value=M.size===su},A=F=>{i.value||(i.value=F,u.value={...e.value.find(P=>P.id===F)})},E=()=>{i.value=null,u.value=null,R()},T=(F,P,O)=>{u.value&&u.value.id===F&&(u.value[P]=O)},b=async F=>{var P,O;if(!(!u.value||u.value.id!==F))try{const M={};u.value.name!==void 0&&(M.name=((P=u.value.name)==null?void 0:P.trim())||null),u.value.title!==void 0&&(M.title=((O=u.value.title)==null?void 0:O.trim())||null),u.value.role!==void 0&&(M.role=u.value.role),u.value.provider!==void 0&&(M.provider=u.value.provider||null),await Jd(Qe(t,"users",F),M),_(" User updated."),i.value=null,u.value=null,R()}catch(M){console.error("Error updating user:",M),_(` Error updating user: ${M.message}`,!0)}},S=async F=>{if(confirm("Are you sure you want to delete this user?"))try{await co(Qe(t,"users",F)),_(" User deleted."),i.value=null,u.value=null,R()}catch(P){console.error("Error deleting user:",P),_(` Error deleting user: ${P.message}`,!0)}},k=async()=>{if(prompt("Type DELETE ALL USERS to confirm:")==="DELETE ALL USERS")try{const P=await jt(wt(t,"users"));await Promise.all(P.docs.map(O=>co(Qe(t,"users",O.id)))),_(" All users deleted."),r.value=1,R()}catch(P){console.error("Error deleting all users:",P),_(` Error deleting all users: ${P.message}`,!0)}},w=()=>{r.value++,R("next")},D=()=>{r.value>1&&(r.value--,R())},N=F=>{var z,j;if(!F)return"";const P=((z=p.value)==null?void 0:z.serviceProviders)||[],O=((j=p.value)==null?void 0:j.customServiceProviders)||[];[...P,...O];const U=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Adapted PE",abbreviation:"APE"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf/Hard of Hearing",abbreviation:"DHH"},{name:"Vision Services",abbreviation:"VI"},{name:"Orientation & Mobility",abbreviation:"OM"},{name:"Other",abbreviation:"OTHER"}].find(H=>H.abbreviation===F);return U?`${U.name} (${U.abbreviation})`:F};return Ut(async()=>{await m(),R()}),Na(()=>{g&&clearTimeout(g)}),{users:e,currentPage:r,searchType:n,searchTerm:s,activeRowId:i,statusMessage:a,isError:o,hasNextPage:l,validRoles:f,handleSearch:I,debouncedHandleSearch:v,startEdit:A,cancelEdit:E,updateUserField:T,saveUser:b,deleteUser:S,deleteAllUsers:k,loadNextPage:w,loadPreviousPage:D,getProviderLabel:N,appSettings:p,editingUser:u,providersLoaded:x,serviceProviders:y}}},mj={class:"admin-form-row"},gj={class:"user-admin-table users-table striped"},vj={key:0},xj=["data-userid"],yj=["value","disabled","onInput"],Ej=["value","disabled","onInput"],_j=["disabled","value","onChange"],bj=["value"],Sj={key:0},Tj={key:0},Aj={key:1},wj=["value"],Cj={key:1},Ij={class:"admin-action-btns"},kj=["onClick"],Dj=["onClick"],Pj=["onClick"],Rj={class:"admin-pagination"},Fj=["disabled"],Oj=["disabled"];function Nj(t,e,r,n,s,i){return B(),V("div",null,[e[14]||(e[14]=d("h2",null,"Edit Users",-1)),d("div",mj,[we(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.searchTerm=a),placeholder:"Search by name or email",onInput:e[1]||(e[1]=(...a)=>n.debouncedHandleSearch&&n.debouncedHandleSearch(...a))},null,544),[[Je,n.searchTerm]]),we(d("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.searchType=a),onChange:e[3]||(e[3]=(...a)=>n.handleSearch&&n.handleSearch(...a))},e[9]||(e[9]=[d("option",{value:"name"},"Name",-1),d("option",{value:"email"},"Email",-1)]),544),[[mr,n.searchType]]),d("button",{onClick:e[4]||(e[4]=(...a)=>n.deleteAllUsers&&n.deleteAllUsers(...a)),style:{"margin-left":"auto",background:"#f44336",color:"#fff",padding:"0.3rem 0.8rem",border:"none","border-radius":"4px",cursor:"pointer"}}," Delete All Users ")]),d("div",{class:Ze(["admin-status-msg",{error:n.isError}])},J(n.statusMessage),3),d("div",null,[d("table",gj,[e[13]||(e[13]=d("thead",null,[d("tr",null,[d("th",null,"Name"),d("th",null,"Title"),d("th",null,"Email"),d("th",null,"Role"),d("th",null,"Provider Type"),d("th",{style:{"text-align":"center"}},"Actions")])],-1)),d("tbody",null,[n.users.length===0?(B(),V("tr",vj,e[10]||(e[10]=[d("td",{colspan:"5"},"No users found.",-1)]))):_e("",!0),(B(!0),V(Re,null,Ve(n.users,a=>(B(),V("tr",{key:a.id,class:Ze({"active-row":n.activeRowId===a.id}),"data-userid":a.id},[d("td",null,[d("input",{type:"text",value:a.name||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"name",o.target.value)},null,40,yj)]),d("td",null,[d("input",{type:"text",value:a.title||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"title",o.target.value)},null,40,Ej)]),d("td",null,J(a.email),1),d("td",null,[d("select",{class:"editable-select",disabled:n.activeRowId!==a.id,value:a.role,onChange:o=>n.updateUserField(a.id,"role",o.target.value)},[(B(!0),V(Re,null,Ve(n.validRoles,o=>(B(),V("option",{key:o,value:o},J(o.replace(/_/g," ")),9,bj))),128))],40,_j)]),n.providersLoaded?(B(),V("td",Sj,[n.activeRowId!==a.id?(B(),V("span",Tj,J(a.provider||""),1)):(B(),V("span",Aj,[we(d("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>n.editingUser.provider=o)},[e[11]||(e[11]=d("option",{value:""},"None",-1)),(B(!0),V(Re,null,Ve(n.serviceProviders,o=>(B(),V("option",{key:o,value:o},J(o),9,wj))),128))],512),[[mr,n.editingUser.provider]])]))])):(B(),V("td",Cj,e[12]||(e[12]=[d("span",null,"Loading...",-1)]))),d("td",Ij,[n.activeRowId!==a.id?(B(),V("button",{key:0,class:"admin-action-btn edit",onClick:o=>n.startEdit(a.id)},"  ",8,kj)):(B(),V(Re,{key:1},[d("button",{class:"admin-action-btn save",onClick:o=>n.saveUser(a.id)},"",8,Dj),d("button",{class:"admin-action-btn cancel",onClick:e[6]||(e[6]=(...o)=>n.cancelEdit&&n.cancelEdit(...o))},""),d("button",{class:"admin-action-btn delete",onClick:o=>n.deleteUser(a.id)},"",8,Pj)],64))])],10,xj))),128))])])]),d("div",Rj,[d("button",{onClick:e[7]||(e[7]=(...a)=>n.loadPreviousPage&&n.loadPreviousPage(...a)),disabled:n.currentPage===1}," Previous ",8,Fj),d("span",null,"Page "+J(n.currentPage),1),d("button",{onClick:e[8]||(e[8]=(...a)=>n.loadNextPage&&n.loadNextPage(...a)),disabled:!n.hasNextPage}," Next ",8,Oj)])])}const Mj=yt(pj,[["render",Nj],["__scopeId","data-v-025d820e"]]),Lj=[it.VIEW_USERS,it.EDIT_USER,it.DELETE_USER,it.MANAGE_SUBJECTS,it.MANAGE_ROLES,it.VIEW_STUDENTS,it.EDIT_STUDENT_CM,it.EDIT_STUDENT_ALL],rS=[it.EDIT_USER,it.DELETE_USER,it.MANAGE_SUBJECTS,it.MANAGE_ROLES,it.EDIT_STUDENT_CM,it.EDIT_STUDENT_ALL],Bj={[it.VIEW_USERS]:"View Users",[it.EDIT_USER]:"Edit User",[it.DELETE_USER]:"Delete User",[it.MANAGE_SUBJECTS]:"Manage Subjects",[it.MANAGE_ROLES]:"Manage Roles",[it.VIEW_STUDENTS]:"View Students",[it.EDIT_STUDENT_CM]:"Edit Students (Own Caseload)",[it.EDIT_STUDENT_ALL]:"Edit All Students"},Uj={name:"PermissionsMatrix",setup(){const t=po(),e="config/permissions_matrix",r=xs({}),n=se(""),s=se(!1),i=bp,a=Lj,o=Bj,l=(g,v=!1)=>{n.value=g,s.value=v,setTimeout(()=>{n.value="",s.value=!1},3e3)},c=async()=>{try{const g=Qe(t,e),v=await tr(g);if(v.exists()){const x=v.data();Object.assign(r,x)}else Object.assign(r,Vl)}catch(g){console.error("Error loading permissions matrix:",g),Object.assign(r,Vl)}},u=(g,v,x)=>{if(rS.includes(v)){console.log(`Permission ${v} is read-only and cannot be changed`);return}if(r[g]||(r[g]=[]),x)r[g].includes(v)||r[g].push(v);else{const y=r[g].indexOf(v);y>-1&&r[g].splice(y,1)}},f=g=>rS.includes(g),h=g=>r[g]?r[g].includes(it.TESTING_ALL)?"all":r[g].includes(it.TESTING_PARTIAL)?"partial":"none":"none",p=(g,v)=>{r[g]||(r[g]=[]),[it.TESTING,it.TESTING_ALL,it.TESTING_PARTIAL].forEach(y=>{const _=r[g].indexOf(y);_>-1&&r[g].splice(_,1)}),v==="all"?r[g].push(it.TESTING_ALL):v==="partial"&&r[g].push(it.TESTING_PARTIAL)},m=async()=>{try{await Kt(Qe(t,e),r),l(" Permissions updated.",!1)}catch(g){console.error("Error saving permissions:",g),l(` Error saving: ${g.message}`,!0)}};return Ut(()=>{c()}),{matrix:r,statusMessage:n,isError:s,validRoles:i,actionList:a,actionLabels:o,updatePermission:u,isReadOnlyPermission:f,getTestingLevel:h,updateTestingPermission:p,savePermissions:m}}},$j={class:"permissions-table-admin"},Vj={style:{"font-weight":"bold"}},Hj=["data-role","data-action","checked","disabled","onChange"],jj={key:0,class:"read-only-indicator",title:"This permission matches Firebase security rules and cannot be changed"},Gj={style:{"text-align":"center"}},Wj=["value","onChange"];function zj(t,e,r,n,s,i){return B(),V("div",null,[e[4]||(e[4]=d("h3",null,"Role Permissions Matrix",-1)),e[5]||(e[5]=d("div",{class:"permissions-note"},[d("p",null,[d("strong",null,"Note:"),Oe(" Permissions marked with  are read-only and match Firebase security rules. These cannot be changed to ensure database security consistency. Only view permissions and testing access can be modified.")])],-1)),d("table",$j,[d("thead",null,[d("tr",null,[e[1]||(e[1]=d("th",{style:{"min-width":"120px"}},"Role",-1)),(B(!0),V(Re,null,Ve(n.actionList,a=>(B(),V("th",{key:a,style:{"min-width":"110px"}},J(n.actionLabels[a]),1))),128)),e[2]||(e[2]=d("th",{style:{"min-width":"120px"}},"Testing Access",-1))])]),d("tbody",null,[(B(!0),V(Re,null,Ve(n.validRoles,a=>(B(),V("tr",{key:a},[d("td",Vj,J(a),1),(B(!0),V(Re,null,Ve(n.actionList,o=>{var l;return B(),V("td",{key:o,style:{"text-align":"center"}},[d("input",{type:"checkbox","data-role":a,"data-action":o,checked:(l=n.matrix[a])==null?void 0:l.includes(o),disabled:n.isReadOnlyPermission(o),class:Ze({"read-only":n.isReadOnlyPermission(o)}),onChange:c=>n.updatePermission(a,o,c.target.checked)},null,42,Hj),n.isReadOnlyPermission(o)?(B(),V("span",jj,"")):_e("",!0)])}),128)),d("td",Gj,[d("select",{value:n.getTestingLevel(a),onChange:o=>n.updateTestingPermission(a,o.target.value),style:{width:"100px",padding:"2px"}},e[3]||(e[3]=[d("option",{value:"none"},"None",-1),d("option",{value:"partial"},"Partial",-1),d("option",{value:"all"},"All",-1)]),40,Wj)])]))),128))])]),d("button",{onClick:e[0]||(e[0]=(...a)=>n.savePermissions&&n.savePermissions(...a)),style:{padding:"0.5em 1.4em","font-size":"1.08em"}}," Save "),d("span",{style:Sn({marginLeft:"1em",fontSize:"1em",color:n.isError?"#b42c2c":"#267838"})},J(n.statusMessage),5)])}const Kj=yt(Uj,[["render",zj],["__scopeId","data-v-0d793d95"]]),qj={class:"admin-students"},Xj={class:"admin-form-row"},Yj={class:"search-container"},Jj={class:"user-admin-table students-table striped"},Qj={key:0},Zj=["data-id"],eG=["value","disabled","onInput"],tG=["value","disabled","onInput"],rG=["value","disabled","onInput"],nG=["value","disabled","onInput"],sG=["title"],aG={class:"admin-action-btns"},iG=["onClick"],oG=["onClick"],lG=["onClick"],cG={class:"admin-pagination"},uG=["disabled"],dG=["disabled"],Km=50,fG={__name:"AdminStudents",setup(t){const e=po(),{students:r,fetchStudents:n,updateStudent:s,deleteStudent:i}=Ma(),a=se(""),o=se([]),l=se(1),c=se(null),u=se({}),f=se(""),h=se(!1);let p=null;const m=()=>{p&&clearTimeout(p),p=setTimeout(()=>{y()},300)},g=Ae(()=>{const N=(l.value-1)*Km,F=N+Km;return o.value.slice(N,F)}),v=Ae(()=>Math.ceil(o.value.length/Km)),x=(N,F=!1)=>{f.value=N,h.value=F,setTimeout(()=>{f.value="",h.value=!1},5e3)},y=()=>{if(!ws("studentSearch",20,6e4).allowed){x("Too many search requests. Please wait before searching again.",!0);return}const F=fn(a.value,{trim:!0,maxLength:100,removeDangerous:!0}),P=Wr(F);if(!P.isSafe){x(`Security threat detected in search: ${P.threats.join(", ")}`,!0),a.value=F;return}F!==a.value&&(a.value=F);const O=F.toLowerCase();O?o.value=r.value.filter(M=>{const U=dt(M,"firstName")||"",z=dt(M,"lastName")||"";return`${U} ${z}`.toLowerCase().includes(O)}):o.value=r.value,l.value=1},_=N=>{if(c.value)return;const F=r.value.find(P=>P.id===N);F&&(c.value=N,u.value={...F})},I=()=>{c.value=null,u.value={}},R=(N,F,P)=>{if(u.value.id===N){let O=P;if(typeof P=="string"){O=fn(P,{trim:!0,maxLength:F==="caseManagerId"?50:100,removeDangerous:!0});const M=Wr(O);if(!M.isSafe){x(`Security threat detected in ${F}: ${M.threats.join(", ")}`,!0);return}const U=vd(O,{max:F==="caseManagerId"?50:100,fieldName:F});if(!U.isValid){x(U.error,!0);return}}u.value[F]=O}},A=async N=>{try{if(!ws("saveStudent",10,6e4).allowed){x("Too many save requests. Please wait before saving again.",!0);return}const P={};if(Object.keys(u.value).forEach(z=>{z!=="id"&&u.value[z]!==r.value.find(j=>j.id===N)[z]&&(P[z]=u.value[z])}),Object.keys(P).length===0){I();return}const O=PI(P),M=DI(O,{isNew:!1});if(!M.isValid){x(`Validation failed: ${M.errors.join(", ")}`,!0);return}Object.assign(u.value,O),await s(N,O);const U=r.value.findIndex(z=>z.id===N);U!==-1&&(r.value[U]={...r.value[U],...O}),x(" Student updated.")}catch(F){x(" Update failed.",!0),console.error("Update error:",F)}finally{I()}},E=async N=>{if(!ws("deleteStudent",5,3e5).allowed){x("Too many delete requests. Please wait before deleting again.",!0);return}if(confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await i(N),x(" Student deleted.");const P=r.value.findIndex(O=>O.id===N);P!==-1&&r.value.splice(P,1),y()}catch(P){x(" Delete failed.",!0),console.error("Delete error:",P)}},T=async()=>{if(!ws("deleteAllStudents",1,36e5).allowed){x("Delete all operation rate limited. Please wait before trying again.",!0);return}const F=`Are you sure you want to delete ALL ${r.value.length} students? 

This action cannot be undone and will permanently remove all student data.

Type "DELETE ALL STUDENTS" to confirm:`;if(prompt(F)!=="DELETE ALL STUDENTS"){x("Delete all operation cancelled.",!1);return}try{x("Deleting all students...");const O=cx(e);let M=0;for(const U of r.value)O.delete(Qe(e,"students",U.id)),M++,M>=500&&(await O.commit(),M=0);M>0&&await O.commit(),r.value=[],o.value=[],x(" All students deleted.")}catch(O){x(" Failed to delete all students.",!0),console.error("Delete all error:",O)}},b=N=>{if(!N)return"N/A";try{if(N&&typeof N.toDate=="function")return N.toDate().toLocaleDateString();const F=new Date(N);return isNaN(F.getTime())?"Invalid Date":F.toLocaleDateString()}catch{return"Invalid Date"}},S=N=>{var F;return((F=N.app)==null?void 0:F.staffIds)&&Array.isArray(N.app.staffIds)&&N.app.staffIds.length>0},k=N=>S(N)?`Staff ID Array present (${N.app.staffIds.length} staff members)`:"Staff ID Array missing or empty",w=()=>{l.value<v.value&&l.value++},D=()=>{l.value>1&&l.value--};return Ut(async()=>{try{await n(),o.value=r.value}catch(N){x("Failed to load students.",!0),console.error("Load students error:",N)}}),Na(()=>{p&&clearTimeout(p)}),(N,F)=>(B(),V("div",qj,[F[3]||(F[3]=d("h2",null,"Edit Students",-1)),d("div",Xj,[d("div",Yj,[we(d("input",{type:"text","onUpdate:modelValue":F[0]||(F[0]=P=>a.value=P),onInput:m,placeholder:"Search by name",class:"search-input"},null,544),[[Je,a.value]]),d("button",{onClick:T,class:"delete-all-btn"},"Delete All Students")])]),f.value?(B(),V("div",{key:0,class:Ze(["admin-status-msg",{error:h.value}])},J(f.value),3)):_e("",!0),d("table",Jj,[F[2]||(F[2]=d("thead",null,[d("tr",null,[d("th",null,"ID"),d("th",null,"First Name"),d("th",null,"Last Name"),d("th",null,"Grade"),d("th",null,"Case Manager"),d("th",{title:"Staff ID Array present"},"staffIdArr"),d("th",null,"Date Added"),d("th",null,"Actions")])],-1)),d("tbody",null,[g.value.length?_e("",!0):(B(),V("tr",Qj,F[1]||(F[1]=[d("td",{colspan:"8"},"No students found.",-1)]))),(B(!0),V(Re,null,Ve(g.value,P=>(B(),V("tr",{key:P.id,class:Ze({"active-row":c.value===P.id}),"data-id":P.id},[d("td",null,J(P.id),1),d("td",null,[d("input",{class:"editable-input","data-field":"first_name",value:Z(dt)(P,"firstName")||"",disabled:c.value!==P.id,onInput:O=>R(P.id,"first_name",O.target.value)},null,40,eG)]),d("td",null,[d("input",{class:"editable-input","data-field":"last_name",value:Z(dt)(P,"lastName")||"",disabled:c.value!==P.id,onInput:O=>R(P.id,"last_name",O.target.value)},null,40,tG)]),d("td",null,[d("input",{class:"editable-input","data-field":"grade",value:Z(dt)(P,"grade")||"",disabled:c.value!==P.id,onInput:O=>R(P.id,"grade",O.target.value)},null,40,rG)]),d("td",null,[d("input",{class:"editable-input","data-field":"caseManagerId",value:P.caseManagerId||"",disabled:c.value!==P.id,onInput:O=>R(P.id,"caseManagerId",O.target.value)},null,40,nG)]),d("td",{class:"staff-id-status",title:k(P)},[d("span",{class:Ze(["status-icon",S(P)?"present":"missing"])},J(S(P)?"":""),3)],8,sG),d("td",null,J(b(P.created_at)),1),d("td",aG,[c.value===P.id?(B(),V(Re,{key:0},[d("button",{onClick:O=>A(P.id),class:"admin-action-btn save",title:"Save"},"",8,iG),d("button",{onClick:I,class:"admin-action-btn cancel",title:"Cancel"},""),d("button",{onClick:O=>E(P.id),class:"admin-action-btn delete",title:"Delete"},"",8,oG)],64)):(B(),V("button",{key:1,onClick:O=>_(P.id),class:"admin-action-btn edit",title:"Edit"},"",8,lG))])],10,Zj))),128))])]),d("div",cG,[d("button",{onClick:D,disabled:l.value===1,class:"admin-btn"}," Prev ",8,uG),d("span",null,"Page "+J(l.value)+" of "+J(v.value),1),d("button",{onClick:w,disabled:l.value===v.value,class:"admin-btn"}," Next ",8,dG)])]))}},hG=yt(fG,[["__scopeId","data-v-ac89687e"]]),pG={class:"bulk-importer"},mG={key:0,class:"step-container"},gG={class:"file-upload-section"},vG={class:"file-input-wrapper"},xG={for:"csv-file",class:"file-label"},yG={class:"file-text"},EG={key:0,class:"error-message"},_G={key:1,class:"file-info"},bG={key:0},SG={class:"step-actions"},TG=["disabled"],AG={key:1,class:"step-container"},wG={class:"field-mapping-section"},CG={class:"mapping-grid"},IG={class:"csv-column"},kG={class:"app-field"},DG=["onUpdate:modelValue"],PG={class:"sample-data"},RG={key:0,class:"validation-errors"},FG={class:"step-actions"},OG=["disabled"],NG={key:2,class:"step-container"},MG={class:"preview-section"},LG={class:"preview-stats"},BG={class:"stat-item"},UG={class:"stat-value"},$G={class:"stat-item"},VG={class:"stat-value valid"},HG={class:"stat-item"},jG={class:"stat-value invalid"},GG={class:"preview-table-container"},WG={class:"preview-table"},zG={key:0,class:"error-list"},KG={key:1,class:"no-errors"},qG={class:"import-options"},XG={class:"options-grid"},YG={class:"option-item"},JG={class:"option-item"},QG={class:"option-item"},ZG={class:"step-actions"},eW=["disabled"],tW={key:3,class:"step-container"},rW={class:"results-section"},nW={class:"results-stats"},sW={class:"stat-item success"},aW={class:"stat-value"},iW={class:"stat-item error"},oW={class:"stat-value"},lW={class:"stat-item"},cW={class:"stat-value"},uW={key:0,class:"import-errors"},dW={class:"results-actions"},fW={key:4,class:"loading-overlay"},hW={class:"loading-content"},pW={class:"progress-bar"},mW={__name:"StudentBulkImporter",emits:["close","imported"],setup(t,{emit:e}){const r=e,{users:n,fetchUsers:s}=La(),i=se(1),a=se(""),o=se(""),l=se([]),c=se([]),u=se({}),f=se(""),h=se([]),p=se([]),m=se("valid-only"),g=se(!1),v=se(!1),x=se(0),y=se({successful:0,failed:0,errors:[],processingTime:0}),_=se(null),I=Ae(()=>{const te=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Q=Object.values(u.value).filter(X=>X),ye=Q.includes("app.studentData.ssid");return te.every(X=>Q.includes(X))&&ye}),R=Ae(()=>p.value.filter(te=>te.errors.length===0)),A=Ae(()=>p.value.filter(te=>te.errors.length>0));Ut(async()=>{console.log(" StudentBulkImporter component mounted!");try{await s(),console.log(" Users loaded successfully:",Object.keys(n.value).length,"users"),console.log("First few users:",Object.values(n.value).slice(0,3).map(te=>({id:te.id,name:te.name,role:te.role})))}catch(te){console.error(" Failed to load users:",te)}});const E=async te=>{const Q=te.target.files[0];if(Q){if(!Q.name.toLowerCase().endsWith(".csv")&&Q.type!=="text/csv"){f.value="File must be a CSV file (.csv extension)";return}if(Q.size>10*1024*1024){f.value="File must be smaller than 10MB";return}f.value="",a.value=Q.name,o.value=z(Q.size);try{const ye=await Q.text();T(ye)}catch(ye){f.value="Failed to read CSV file: "+ye.message}}},T=te=>{try{const Q=te.trim().split(`
`);if(Q.length<2)throw new Error("CSV must have at least a header row and one data row");const ye=Q[0].split(",").map(q=>q.trim().replace(/"/g,""));c.value=ye;const X=[];for(let q=1;q<Q.length;q++){const Y={};let ne="",ve=!1,ae=0;for(let le=0;le<Q[q].length;le++){const de=Q[q][le];de==='"'?ve=!ve:de===","&&!ve?(Y[ye[ae]]=ne.trim().replace(/^"|"$/g,""),ne="",ae++):ne+=de}ae<ye.length&&(Y[ye[ae]]=ne.trim().replace(/^"|"$/g,"")),X.push(Y)}l.value=X,console.log("Parsed CSV data:",X.length,"records")}catch(Q){f.value="Failed to parse CSV: "+Q.message}},b=()=>{const te={SSID:"app.studentData.ssid",FirstName:"app.studentData.firstName",LastName:"app.studentData.lastName",Grade:"app.studentData.grade",Plan:"app.studentData.plan",CaseManagerId:"app.studentData.caseManagerId",ReviewDate:"app.dates.reviewDate",ReevalDate:"app.dates.reevalDate",MeetingDate:"app.dates.meetingDate",Period1Teacher:"app.schedule.periods.1",Period2Teacher:"app.schedule.periods.2",Period3Teacher:"app.schedule.periods.3",Period4Teacher:"app.schedule.periods.4",Period5Teacher:"app.schedule.periods.5",Period6Teacher:"app.schedule.periods.6",PeriodSHTeacher:"app.schedule.periods.SH",ClassServices:"app.schedule.classServices",SpeechProvider:"app.providers.speechId",OTProvider:"app.providers.otId",PTProvider:"app.providers.ptId",ATProvider:"app.providers.atId",Audiologist:"app.providers.audId",BISProvider:"app.providers.bisId",DHHProvider:"app.providers.dhhId",HNProvider:"app.providers.hnId",MHProvider:"app.providers.mhId",OMProvider:"app.providers.omId",SCProvider:"app.providers.scId",SWProvider:"app.providers.swId",TRProvider:"app.providers.trId",VIProvider:"app.providers.viId",Flag1:"app.flags.flag1",Flag2:"app.flags.flag2",BIPPdfUrl:"app.documents.bipPdfUrl",AtAGlancePdfUrl:"app.documents.ataglancePdfUrl",Assessment:"app.accommodations.assessment",Instruction:"app.accommodations.instruction"};c.value.forEach(Q=>{te[Q]&&(u.value[Q]=te[Q])})},S=()=>{u.value={}},k=te=>{const Q=l.value[0];if(!Q)return"";const ye=Q[te];return ye?te==="ClassServices"&&ye.includes(",")?`"${ye}"`:ye:""},w=()=>{h.value=[];const te=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Q=Object.values(u.value).filter(q=>q),ye=Q.includes("app.studentData.ssid");te.forEach(q=>{if(!Q.includes(q)){const Y=q.split(".").pop();h.value.push(`Required field "${Y}" is not mapped`)}}),ye||h.value.push("SSID (State Student ID) must be mapped to app.studentData.ssid");const X=Q.filter((q,Y)=>Q.indexOf(q)!==Y);X.length>0&&h.value.push(`Duplicate field mappings: ${X.join(", ")}`)},D=()=>{p.value=l.value.map(te=>{const Q=N(te),ye=P(Q);return console.log("Row mapping:",{original:te,mapped:Q,errors:ye}),{data:Q,errors:ye}})},N=te=>{const Q={app:{studentData:{},dates:{},providers:{},accommodations:{},flags:{},schedule:{periods:{},classServices:[]},documents:{}}};return Object.entries(u.value).forEach(([ye,X])=>{if(!X||!te[ye])return;let q=te[ye].trim();if(!q)return;if(X==="app.schedule.classServices"){q.startsWith('"')&&q.endsWith('"')&&(q=q.slice(1,-1)),Q.app.schedule.classServices=q.split(",").map(ve=>ve.trim()).filter(Boolean);return}if(X.startsWith("app.schedule.periods.")){const ve=X.split(".").pop(),ae=q.trim();if(ae){const le=K(ae);console.log(`Mapping Period ${ve} teacher:`,ae,"",le),Q.app.schedule.periods[ve]=le}return}if(X.startsWith("app.providers.")){const ve=X.split(".").pop(),ae=q.trim();if(ae){const le=re(ae);console.log(`Mapping ${ve} provider:`,ae,"",le),Q.app.providers[ve]=le}return}if(X==="app.accommodations.assessment"||X==="app.accommodations.instruction"){const ve=X.split(".").pop();Q.app.accommodations[ve]=q;return}if(X.startsWith("app.flags.")){const ve=X.split(".").pop();Q.app.flags[ve]=["true","1","yes","y"].includes(q.toLowerCase());return}if(X.includes("Date")){const[ve,ae,le]=X.split(".");Q[ve][ae]||(Q[ve][ae]={}),Q[ve][ae][le]=M(q);return}const Y=X.split(".");let ne=Q;for(let ve=0;ve<Y.length-1;ve++){const ae=Y[ve];ne[ae]||(ne[ae]={}),ne=ne[ae]}ne[Y[Y.length-1]]=q}),Q},F=te=>{const Q=Object.values(n.value).find(ye=>ye.id===te||ye.name===te||ye.email===te||ye.aeriesId===te);return console.log("Mapping case manager:",te,"to Firebase ID:",Q==null?void 0:Q.id),Q?Q.id:te},P=te=>{var X,q,Y,ne,ve,ae,le,de,Se,Ie,Te,Ge,ke,$e,Be,We,ze,Ee;const Q=[],ye=te.ssid||((q=(X=te.app)==null?void 0:X.studentData)==null?void 0:q.ssid);return ye||Q.push("SSID is required (either top-level or in app.studentData)"),(ne=(Y=te.app)==null?void 0:Y.studentData)!=null&&ne.firstName||Q.push("First name is required"),(ae=(ve=te.app)==null?void 0:ve.studentData)!=null&&ae.lastName||Q.push("Last name is required"),(de=(le=te.app)==null?void 0:le.studentData)!=null&&de.grade||Q.push("Grade is required"),ye&&!/^\d{9,10}$/.test(ye)&&Q.push("SSID must be 9-10 digits"),(Ie=(Se=te.app)==null?void 0:Se.studentData)!=null&&Ie.grade&&!["K","1","2","3","4","5","6","7","8","9","10","11","12"].includes(te.app.studentData.grade)&&Q.push("Grade must be K-12"),(Ge=(Te=te.app)==null?void 0:Te.studentData)!=null&&Ge.plan&&!["IEP","504"].includes(te.app.studentData.plan)&&Q.push("Plan must be IEP or 504"),($e=(ke=te.app)==null?void 0:ke.dates)!=null&&$e.reviewDate&&!O(te.app.dates.reviewDate)&&Q.push("Invalid review date format (use YYYY-MM-DD)"),(We=(Be=te.app)==null?void 0:Be.dates)!=null&&We.reevalDate&&!O(te.app.dates.reevalDate)&&Q.push("Invalid reevaluation date format (use YYYY-MM-DD)"),(Ee=(ze=te.app)==null?void 0:ze.dates)!=null&&Ee.meetingDate&&!O(te.app.dates.meetingDate)&&Q.push("Invalid meeting date format (use YYYY-MM-DD)"),Q},O=te=>{if(!te)return!0;const Q=new Date(te);return!isNaN(Q.getTime())&&te.match(/^\d{4}-\d{2}-\d{2}$/)},M=te=>{if(!te)return"";try{const Q=new Date(te);return isNaN(Q.getTime())?"":Q.toISOString().split("T")[0]}catch{return""}},U=te=>{var X,q,Y,ne;const Q=((q=(X=te.app)==null?void 0:X.studentData)==null?void 0:q.firstName)||"",ye=((ne=(Y=te.app)==null?void 0:Y.studentData)==null?void 0:ne.lastName)||"";return`${Q} ${ye}`.trim()||"Missing Name"},z=te=>{if(te===0)return"0 Bytes";const Q=1024,ye=["Bytes","KB","MB","GB"],X=Math.floor(Math.log(te)/Math.log(Q));return parseFloat((te/Math.pow(Q,X)).toFixed(2))+" "+ye[X]},j=()=>{if(i.value===2){if(w(),h.value.length>0)return;D()}i.value++},H=()=>{i.value--},W=async()=>{v.value=!0,x.value=0;const te=Date.now(),Q=m.value==="valid-only"?R.value:p.value;let ye=0,X=0;const q=[];try{for(let Y=0;Y<Q.length;Y++){const ne=Q[Y];try{await ce(ne.data),ye++}catch(ve){X++,q.push(`Row ${Y+1}: ${ve.message}`)}x.value=Math.round((Y+1)/Q.length*100)}y.value={successful:ye,failed:X,errors:q,processingTime:Date.now()-te},i.value=4,r("imported",{successful:ye,failed:X})}catch(Y){console.error("Import failed:",Y),q.push("Import process failed: "+Y.message),y.value={successful:ye,failed:X,errors:q,processingTime:Date.now()-te},i.value=4}finally{v.value=!1}},K=te=>{if(!te)return"";console.log(" Mapping teacher ID:",te),console.log(" Available users:",Object.values(n.value).map(X=>({name:X.name,aeriesId:X.aeriesId,id:X.id})));const Q=Object.values(n.value).find(X=>{const q=String(X.aeriesId)===String(te);return q&&console.log(" Found exact Aeries ID match:",{teacherId:te,user:{name:X.name,aeriesId:X.aeriesId,id:X.id}}),q});if(Q)return console.log(" Using Aeries ID match:",te,"",Q.id,"(",Q.name,")"),Q.id;const ye=Object.values(n.value).find(X=>X.id===te);return ye?(console.log(" Using Firebase ID match:",te,"",ye.id,"(",ye.name,")"),ye.id):(console.warn(" No user found for teacher ID:",te),te)},re=te=>{if(!te)return"";console.log(" Mapping provider ID:",te),console.log(" Available users:",Object.values(n.value).map(X=>({name:X.name,aeriesId:X.aeriesId,id:X.id})));const Q=Object.values(n.value).find(X=>{const q=String(X.aeriesId)===String(te);return q&&console.log(" Found exact Aeries ID match:",{providerId:te,user:{name:X.name,aeriesId:X.aeriesId,id:X.id}}),q});if(Q)return console.log(" Using Aeries ID match:",te,"",Q.id,"(",Q.name,")"),Q.id;const ye=Object.values(n.value).find(X=>X.id===te);return ye?(console.log(" Using Firebase ID match:",te,"",ye.id,"(",ye.name,")"),ye.id):(console.warn(" No user found for provider ID:",te),te)},me=te=>{try{return te.app&&te.app.studentData&&te.app.studentData.ssid&&te.app.studentData.firstName&&te.app.studentData.lastName&&te.app.studentData.grade&&te.app.schedule&&Array.isArray(te.app.schedule.classServices)}catch{return!1}},ce=async te=>{try{const Q=te.app.studentData.ssid,ye=wt(Xe,"students"),X=ur(ye,jr("app.studentData.ssid","==",Q)),q=await jt(X);if(!q.empty&&!g.value)throw new Error(`Student with SSID ${Q} already exists`);const Y={createdAt:$s(),updatedAt:$s(),app:{studentData:{firstName:te.app.studentData.firstName||"",lastName:te.app.studentData.lastName||"",grade:te.app.studentData.grade||"",plan:te.app.studentData.plan||"",caseManagerId:F(te.app.studentData.caseManagerId)||"",ssid:Q},dates:{reviewDate:te.app.dates.reviewDate||"",reevalDate:te.app.dates.reevalDate||"",meetingDate:te.app.dates.meetingDate||""},schedule:{periods:te.app.schedule.periods||{1:"",2:"",3:"",4:"",5:"",6:"",SH:""},classServices:Array.isArray(te.app.schedule.classServices)?te.app.schedule.classServices:[]},providers:te.app.providers||{speechId:"",otId:"",ptId:"",atId:"",audId:"",bisId:"",dhhId:"",hnId:"",mhId:"",omId:"",scId:"",swId:"",trId:"",viId:""},accommodations:{assessment:te.app.accommodations.assessment||"",instruction:te.app.accommodations.instruction||""},flags:{flag1:!!te.app.flags.flag1,flag2:!!te.app.flags.flag2},documents:{bipPdfUrl:te.app.documents.bipPdfUrl||null,ataglancePdfUrl:te.app.documents.ataglancePdfUrl||null}}};if(console.log("Saving student data:",{ssid:Y.app.studentData.ssid,schedule:Y.app.schedule.periods,providers:Y.app.providers}),!me(Y))throw new Error("Invalid student data structure");if(!q.empty&&g.value){const ne=q.docs[0];await Kt(Qe(Xe,"students",ne.id),Y,{merge:!0})}else{const ne=Qe(wt(Xe,"students"));await Kt(ne,Y)}}catch(Q){throw console.error("Error importing student:",Q),Q}},pe=()=>{i.value=1,a.value="",o.value="",l.value=[],c.value=[],u.value={},f.value="",h.value=[],p.value=[],y.value={successful:0,failed:0,errors:[],processingTime:0},_.value&&(_.value.value="")};return(te,Q)=>(B(),V("div",pG,[Q[30]||(Q[30]=d("div",{style:{background:"#e8f5e8",border:"2px solid #4caf50",padding:"10px","margin-bottom":"20px","border-radius":"4px","text-align":"center"}},[d("strong",null," StudentBulkImporter Component Loaded Successfully")],-1)),Q[31]||(Q[31]=d("div",{class:"importer-header"},[d("h2",null,"Add Students - Bulk Import"),d("p",{class:"description"}," Import multiple students from a CSV file. The system will map CSV fields to the app's database structure and allow you to preview and validate the data before importing. ")],-1)),i.value===1?(B(),V("div",mG,[Q[8]||(Q[8]=d("div",{class:"step-header"},[d("h3",null,"Step 1: Upload CSV File"),d("p",null,"Select a CSV file containing student data. The first row should contain column headers.")],-1)),d("div",gG,[d("div",vG,[d("input",{type:"file",ref_key:"fileInput",ref:_,onChange:E,accept:".csv",class:"file-input",id:"csv-file"},null,544),d("label",xG,[Q[4]||(Q[4]=d("span",{class:"file-icon"},"",-1)),d("span",yG,J(a.value||"Choose CSV File"),1)])]),f.value?(B(),V("div",EG,J(f.value),1)):_e("",!0),a.value?(B(),V("div",_G,[d("p",null,[Q[5]||(Q[5]=d("strong",null,"File:",-1)),Oe(" "+J(a.value),1)]),d("p",null,[Q[6]||(Q[6]=d("strong",null,"Size:",-1)),Oe(" "+J(o.value),1)]),l.value.length>0?(B(),V("p",bG,[Q[7]||(Q[7]=d("strong",null,"Records:",-1)),Oe(" "+J(l.value.length),1)])):_e("",!0)])):_e("",!0)]),Q[9]||(Q[9]=nn('<div class="sample-format" data-v-494a4282><h4 data-v-494a4282>Expected CSV Format:</h4><div class="format-example" data-v-494a4282><code data-v-494a4282> SSID,FirstName,LastName,Grade,Plan,CaseManagerId,ReviewDate,ReevalDate,MeetingDate,Period1Teacher,Period2Teacher,Period3Teacher,Period4Teacher,Period5Teacher,Period6Teacher,SHTeacher,ClassServices,SpeechProvider,OTProvider,PTProvider,ATProvider,Audiologist,BISProvider,DHHProvider,HNProvider,MHProvider,OMProvider,SCProvider,SWProvider,TRProvider,VIProvider,Flag1,Flag2,BIPPdfUrl,AtAGlancePdfUrl,Assessment,Instruction<br data-v-494a4282> 123456789,John,Doe,9,IEP,user003,2025-07-15,2025-12-15,2025-07-10,user007,user008,user009,user010,user011,user012,user013,&quot;SDC: English,RSP: Math&quot;,user020,user021,user022,user023,user024,user025,user026,user027,user028,user029,user030,user031,user032,user033,true,false,https://example.com/bip.pdf,https://example.com/ataglance.pdf,&quot;Allow for test re-takes if the score is below average...&quot;,Divide larger projects or assignments into manageable parts... </code></div><p class="format-note" data-v-494a4282><strong data-v-494a4282>Required fields:</strong> SSID, FirstName, LastName, Grade<br data-v-494a4282><strong data-v-494a4282>App Structure:</strong> All fields map to the app data structure in your database<br data-v-494a4282><strong data-v-494a4282>Schedule fields:</strong> Period1Teacher through Period6Teacher and SHTeacher (Firebase user IDs like user001, user002, etc.)<br data-v-494a4282><strong data-v-494a4282>Provider fields:</strong> All service provider fields (Firebase user IDs like user020, user021, etc.)<br data-v-494a4282><strong data-v-494a4282>Class Services:</strong> Comma-separated list (e.g., &quot;SDC: English,RSP: Math,Co-teach: Science&quot;)<br data-v-494a4282><strong data-v-494a4282>Dates:</strong> Use YYYY-MM-DD format (e.g., 2025-07-15)<br data-v-494a4282><strong data-v-494a4282>Flags:</strong> Use true/false or 1/0<br data-v-494a4282><strong data-v-494a4282>Accommodations:</strong> Text fields for assessment and instruction<br data-v-494a4282><strong data-v-494a4282>Note:</strong> Teacher and provider IDs will be automatically mapped from names, emails, or Aeries IDs if user lookup is available </p></div>',1)),d("div",SG,[d("button",{onClick:j,disabled:!l.value.length,class:"btn btn-primary"}," Next: Map Fields ",8,TG)])])):_e("",!0),i.value===2?(B(),V("div",AG,[Q[15]||(Q[15]=d("div",{class:"step-header"},[d("h3",null,"Step 2: Map CSV Fields"),d("p",null,"Map your CSV columns to the app's database fields. Required fields are marked with *")],-1)),d("div",wG,[d("div",CG,[Q[12]||(Q[12]=nn('<div class="mapping-header" data-v-494a4282><div class="csv-column" data-v-494a4282>CSV Column</div><div class="arrow" data-v-494a4282></div><div class="app-field" data-v-494a4282>App Database Field</div><div class="sample-data" data-v-494a4282>Sample Data</div></div>',1)),(B(!0),V(Re,null,Ve(c.value,(ye,X)=>(B(),V("div",{key:X,class:"mapping-row"},[d("div",IG,[d("strong",null,J(ye),1)]),Q[11]||(Q[11]=d("div",{class:"arrow"},"",-1)),d("div",kG,[we(d("select",{"onUpdate:modelValue":q=>u.value[ye]=q,class:"field-select"},Q[10]||(Q[10]=[nn('<option value="" data-v-494a4282>-- Skip this field --</option><optgroup label="Required Fields" data-v-494a4282><option value="app.studentData.ssid" data-v-494a4282>SSID (State Student ID) *</option><option value="app.studentData.firstName" data-v-494a4282>First Name *</option><option value="app.studentData.lastName" data-v-494a4282>Last Name *</option><option value="app.studentData.grade" data-v-494a4282>Grade *</option></optgroup><optgroup label="Student Information" data-v-494a4282><option value="app.studentData.plan" data-v-494a4282>Plan Type (IEP/504/RTI/None)</option><option value="app.studentData.caseManagerId" data-v-494a4282>Case Manager ID</option></optgroup><optgroup label="Important Dates" data-v-494a4282><option value="app.dates.reviewDate" data-v-494a4282>Review Date</option><option value="app.dates.reevalDate" data-v-494a4282>Reevaluation Date</option><option value="app.dates.meetingDate" data-v-494a4282>Meeting Date</option></optgroup><optgroup label="Class Schedule" data-v-494a4282><option value="app.schedule.periods.1" data-v-494a4282>Period 1 Teacher ID</option><option value="app.schedule.periods.2" data-v-494a4282>Period 2 Teacher ID</option><option value="app.schedule.periods.3" data-v-494a4282>Period 3 Teacher ID</option><option value="app.schedule.periods.4" data-v-494a4282>Period 4 Teacher ID</option><option value="app.schedule.periods.5" data-v-494a4282>Period 5 Teacher ID</option><option value="app.schedule.periods.6" data-v-494a4282>Period 6 Teacher ID</option><option value="app.schedule.periods.SH" data-v-494a4282>Study Hall Teacher ID</option><option value="app.schedule.classServices" data-v-494a4282>Class Services (Comma-separated)</option></optgroup><optgroup label="Service Providers" data-v-494a4282><option value="app.providers.speechId" data-v-494a4282>Speech Provider ID</option><option value="app.providers.otId" data-v-494a4282>OT Provider ID</option><option value="app.providers.ptId" data-v-494a4282>PT Provider ID</option><option value="app.providers.atId" data-v-494a4282>AT Provider ID</option><option value="app.providers.audId" data-v-494a4282>Audiologist ID</option><option value="app.providers.bisId" data-v-494a4282>BIS Provider ID</option><option value="app.providers.dhhId" data-v-494a4282>DHH Provider ID</option><option value="app.providers.hnId" data-v-494a4282>HN Provider ID</option><option value="app.providers.mhId" data-v-494a4282>MH Provider ID</option><option value="app.providers.omId" data-v-494a4282>OM Provider ID</option><option value="app.providers.scId" data-v-494a4282>SC Provider ID</option><option value="app.providers.swId" data-v-494a4282>SW Provider ID</option><option value="app.providers.trId" data-v-494a4282>TR Provider ID</option><option value="app.providers.viId" data-v-494a4282>VI Provider ID</option></optgroup><optgroup label="Flags" data-v-494a4282><option value="app.flags.flag1" data-v-494a4282>Flag 1 (Boolean)</option><option value="app.flags.flag2" data-v-494a4282>Flag 2 (Boolean)</option></optgroup><optgroup label="Documents" data-v-494a4282><option value="app.documents.bipPdfUrl" data-v-494a4282>BIP PDF URL</option><option value="app.documents.ataglancePdfUrl" data-v-494a4282>At-A-Glance PDF URL</option></optgroup><optgroup label="Accommodations" data-v-494a4282><option value="app.accommodations.assessment" data-v-494a4282>Assessment Accommodations</option><option value="app.accommodations.instruction" data-v-494a4282>Instructional Accommodations</option></optgroup>',9)]),8,DG),[[mr,u.value[ye]]])]),d("div",PG,[d("code",null,J(k(ye)),1)])]))),128))]),d("div",{class:"auto-mapping-section"},[Q[13]||(Q[13]=d("h4",null,"Quick Mapping Options:",-1)),d("div",{class:"quick-actions"},[d("button",{onClick:b,class:"btn btn-secondary"}," Auto-map Common Fields "),d("button",{onClick:S,class:"btn btn-secondary"}," Clear All Mappings ")])]),h.value.length>0?(B(),V("div",RG,[Q[14]||(Q[14]=d("h4",null,"Mapping Issues:",-1)),d("ul",null,[(B(!0),V(Re,null,Ve(h.value,ye=>(B(),V("li",{key:ye,class:"error-item"},J(ye),1))),128))])])):_e("",!0)]),d("div",FG,[d("button",{onClick:H,class:"btn btn-secondary"}," Back "),d("button",{onClick:j,disabled:!I.value,class:"btn btn-primary"}," Next: Preview Data ",8,OG)])])):_e("",!0),i.value===3?(B(),V("div",NG,[Q[23]||(Q[23]=d("div",{class:"step-header"},[d("h3",null,"Step 3: Preview and Validate"),d("p",null,"Review the mapped data before importing. Check for any validation errors.")],-1)),d("div",MG,[d("div",LG,[d("div",BG,[Q[16]||(Q[16]=d("span",{class:"stat-label"},"Total Records:",-1)),d("span",UG,J(l.value.length),1)]),d("div",$G,[Q[17]||(Q[17]=d("span",{class:"stat-label"},"Valid Records:",-1)),d("span",VG,J(R.value.length),1)]),d("div",HG,[Q[18]||(Q[18]=d("span",{class:"stat-label"},"Invalid Records:",-1)),d("span",jG,J(A.value.length),1)])]),d("div",GG,[d("table",WG,[Q[19]||(Q[19]=d("thead",null,[d("tr",null,[d("th",null,"Status"),d("th",null,"SSID"),d("th",null,"Name"),d("th",null,"Grade"),d("th",null,"Plan"),d("th",null,"Case Manager"),d("th",null,"Issues")])],-1)),d("tbody",null,[(B(!0),V(Re,null,Ve(p.value,(ye,X)=>{var q,Y,ne,ve,ae,le,de,Se;return B(),V("tr",{key:X,class:Ze({"invalid-row":ye.errors.length>0})},[d("td",null,[d("span",{class:Ze(["status-badge",ye.errors.length>0?"error":"valid"])},J(ye.errors.length>0?"Error":"Valid"),3)]),d("td",null,J(ye.data.ssid||((Y=(q=ye.data.app)==null?void 0:q.studentData)==null?void 0:Y.ssid)||"Missing"),1),d("td",null,J(U(ye.data)),1),d("td",null,J(((ve=(ne=ye.data.app)==null?void 0:ne.studentData)==null?void 0:ve.grade)||"Missing"),1),d("td",null,J(((le=(ae=ye.data.app)==null?void 0:ae.studentData)==null?void 0:le.plan)||"Not set"),1),d("td",null,J(((Se=(de=ye.data.app)==null?void 0:de.studentData)==null?void 0:Se.caseManagerId)||"Not set"),1),d("td",null,[ye.errors.length>0?(B(),V("ul",zG,[(B(!0),V(Re,null,Ve(ye.errors,Ie=>(B(),V("li",{key:Ie,class:"error-item"},J(Ie),1))),128))])):(B(),V("span",KG,"No issues"))])],2)}),128))])])]),d("div",qG,[Q[22]||(Q[22]=d("h4",null,"Import Options:",-1)),d("div",XG,[d("label",YG,[we(d("input",{type:"radio","onUpdate:modelValue":Q[0]||(Q[0]=ye=>m.value=ye),value:"valid-only"},null,512),[[mi,m.value]]),d("span",null,"Import only valid records ("+J(R.value.length)+" records)",1)]),d("label",JG,[we(d("input",{type:"radio","onUpdate:modelValue":Q[1]||(Q[1]=ye=>m.value=ye),value:"all"},null,512),[[mi,m.value]]),Q[20]||(Q[20]=d("span",null,"Import all records (may cause errors for invalid data)",-1))]),d("label",QG,[we(d("input",{type:"checkbox","onUpdate:modelValue":Q[2]||(Q[2]=ye=>g.value=ye)},null,512),[[_t,g.value]]),Q[21]||(Q[21]=d("span",null,"Update existing students if SSID already exists",-1))])])])]),d("div",ZG,[d("button",{onClick:H,class:"btn btn-secondary"}," Back "),d("button",{onClick:W,disabled:v.value||m.value==="valid-only"&&R.value.length===0,class:"btn btn-primary"},J(v.value?"Importing...":`Import ${m.value==="valid-only"?R.value.length:l.value.length} Students`),9,eW)])])):_e("",!0),i.value===4?(B(),V("div",tW,[Q[28]||(Q[28]=d("div",{class:"step-header"},[d("h3",null,"Step 4: Import Complete"),d("p",null,"Your bulk import has been completed. Review the results below.")],-1)),d("div",rW,[d("div",nW,[d("div",sW,[Q[24]||(Q[24]=d("span",{class:"stat-label"},"Successfully Imported:",-1)),d("span",aW,J(y.value.successful),1)]),d("div",iW,[Q[25]||(Q[25]=d("span",{class:"stat-label"},"Failed to Import:",-1)),d("span",oW,J(y.value.failed),1)]),d("div",lW,[Q[26]||(Q[26]=d("span",{class:"stat-label"},"Total Processing Time:",-1)),d("span",cW,J(y.value.processingTime)+"ms",1)])]),y.value.errors.length>0?(B(),V("div",uW,[Q[27]||(Q[27]=d("h4",null,"Import Errors:",-1)),d("ul",null,[(B(!0),V(Re,null,Ve(y.value.errors,ye=>(B(),V("li",{key:ye,class:"error-item"},J(ye),1))),128))])])):_e("",!0),d("div",dW,[d("button",{onClick:pe,class:"btn btn-secondary"}," Import More Students "),d("button",{onClick:Q[3]||(Q[3]=ye=>te.$emit("close")),class:"btn btn-primary"}," Close ")])])])):_e("",!0),v.value?(B(),V("div",fW,[d("div",hW,[Q[29]||(Q[29]=d("div",{class:"loading-spinner"},null,-1)),d("p",null,"Importing students... "+J(x.value)+"%",1),d("div",pW,[d("div",{class:"progress-fill",style:Sn({width:x.value+"%"})},null,4)])])])):_e("",!0)]))}},gW=yt(mW,[["__scopeId","data-v-494a4282"]]),vW={class:"permissions-overview"},xW={class:"roles-summary"},yW={class:"role-icon"},EW={class:"role-info"},_W={class:"role-stats"},bW={class:"stat"},SW={class:"stat-number"},TW={class:"stat"},AW={class:"stat-number"},wW={class:"stat"},CW={class:"stat-number"},IW={class:"permissions-matrix"},kW={class:"matrix-table-container"},DW={class:"matrix-table"},PW={class:"permission-info"},RW={class:"permission-name"},FW={class:"permission-description"},OW={class:"permission-firebase"},NW={class:"admin-panel-access"},MW={class:"access-grid"},LW={class:"access-header"},BW={class:"access-icon"},UW={class:"role-name"},$W={key:0,class:"access-details"},VW={class:"access-level"},HW={class:"access-description"},jW={key:1,class:"no-access"},GW={__name:"PermissionsOverview",setup(t){const e={admin:["view_users","edit_user","delete_user","manage_subjects","manage_roles","view_students","edit_student_all","admin_panel_full","testing_all","security_controls","backup_restore","system_config"],administrator:["view_users","edit_user","delete_user","manage_subjects","manage_roles","view_students","edit_student_all","admin_panel_full","testing_all"],administrator_504_CM:["view_users","edit_user","delete_user","manage_subjects","manage_roles","view_students","edit_student_all","admin_panel_limited"],sped_chair:["view_users","view_students","edit_student_all","admin_panel_sped","security_monitoring","aide_management"],case_manager:["view_users","view_students","edit_student_cm","testing_partial"],teacher:["view_users","view_students","testing_partial"],paraeducator:["view_users","view_students","aide_schedule"],service_provider:["view_users","view_students"]},r=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","paraeducator","service_provider"],n=[{key:"admin",name:"Admin",icon:"",description:"Full system access and control",adminAccess:!0,adminLevel:"Full Access",adminDescription:"All admin panel features including permissions management",testingLevel:"All",permissions:e.admin},{key:"administrator",name:"Administrator",icon:"",description:"Administrative management without system permissions",adminAccess:!0,adminLevel:"Full Access",adminDescription:"All admin panel features except permissions management",testingLevel:"All",permissions:e.administrator},{key:"administrator_504_CM",name:"Administrator 504/CM",icon:"",description:"504 plan and case management administration",adminAccess:!0,adminLevel:"Limited Access",adminDescription:"Student management and 504-related functions",testingLevel:"None",permissions:e.administrator_504_CM},{key:"sped_chair",name:"SPED Chair",icon:"",description:"Special education program oversight",adminAccess:!0,adminLevel:"SPED Access",adminDescription:"SPED program management and aide oversight",testingLevel:"None",permissions:e.sped_chair},{key:"case_manager",name:"Case Manager",icon:"",description:"Individual student case management",adminAccess:!1,testingLevel:"Partial",permissions:e.case_manager},{key:"teacher",name:"Teacher",icon:"",description:"Classroom teacher with student access",adminAccess:!1,testingLevel:"Partial",permissions:e.teacher},{key:"paraeducator",name:"Paraeducator",icon:"",description:"Educational aide with schedule access",adminAccess:!1,testingLevel:"None",permissions:e.paraeducator},{key:"service_provider",name:"Service Provider",icon:"",description:"Related services provider",adminAccess:!1,testingLevel:"None",permissions:e.service_provider}],s=[{key:"view_users",name:"View Users",description:"Can view user accounts and basic information",firebaseRule:"Authenticated users only"},{key:"edit_user",name:"Edit Users",description:"Can modify user accounts and roles",firebaseRule:"Admin, Administrator, Administrator 504/CM"},{key:"delete_user",name:"Delete Users",description:"Can remove user accounts",firebaseRule:"Admin, Administrator only"},{key:"view_students",name:"View Students",description:"Can view student records (role-filtered)",firebaseRule:"All authenticated users"},{key:"edit_student_all",name:"Edit All Students",description:"Can modify any student record",firebaseRule:"Admin, Administrator, Administrator 504/CM, SPED Chair"},{key:"edit_student_cm",name:"Edit Own Caseload",description:"Can modify students on own caseload",firebaseRule:"Case Manager (caseload validation)"},{key:"admin_panel_full",name:"Full Admin Panel",description:"Access to all admin panel features",firebaseRule:"Admin, Administrator"},{key:"admin_panel_limited",name:"Limited Admin Panel",description:"Access to student management features",firebaseRule:"Administrator 504/CM"},{key:"admin_panel_sped",name:"SPED Admin Panel",description:"Access to SPED program management",firebaseRule:"SPED Chair"},{key:"testing_all",name:"Full Testing Access",description:"Can access all students in testing view",firebaseRule:"Admin, Administrator"},{key:"testing_partial",name:"Partial Testing Access",description:"Can access assigned students in testing view",firebaseRule:"Case Manager, Teacher"},{key:"security_controls",name:"Security Controls",description:"Access to security monitoring and controls",firebaseRule:"Admin only"},{key:"aide_management",name:"Aide Management",description:"Can manage aide assignments and schedules",firebaseRule:"Admin, Administrator, SPED Chair"},{key:"aide_schedule",name:"Aide Schedule Access",description:"Can view own aide schedule",firebaseRule:"Paraeducator"}],i=(a,o)=>{var l;return((l=e[a])==null?void 0:l.includes(o))||!1};return(a,o)=>(B(),V("div",vW,[o[7]||(o[7]=d("div",{class:"overview-header"},[d("h2",null," Permissions Overview"),d("p",{class:"overview-description"}," This is an informational view showing the current role-based permissions that match your Firebase security rules and role-based view settings. These permissions are hard-coded for consistency and security. ")],-1)),d("div",xW,[(B(),V(Re,null,Ve(n,l=>d("div",{class:"summary-card",key:l.key},[d("div",{class:Ze(["role-header",l.key])},[d("div",yW,J(l.icon),1),d("div",EW,[d("h3",null,J(l.name),1),d("p",null,J(l.description),1)])],2),d("div",_W,[d("div",bW,[d("span",SW,J(l.permissions.length),1),o[0]||(o[0]=d("span",{class:"stat-label"},"Permissions",-1))]),d("div",TW,[d("span",AW,J(l.adminAccess?"Yes":"No"),1),o[1]||(o[1]=d("span",{class:"stat-label"},"Admin Panel",-1))]),d("div",wW,[d("span",CW,J(l.testingLevel),1),o[2]||(o[2]=d("span",{class:"stat-label"},"Testing Access",-1))])])])),64))]),d("div",IW,[o[4]||(o[4]=d("h3",null," Detailed Permissions Matrix",-1)),o[5]||(o[5]=d("div",{class:"matrix-note"},[d("strong",null,"Note:"),Oe(" These permissions are synchronized with Firebase security rules and cannot be modified. They ensure consistent security across your application. ")],-1)),d("div",kW,[d("table",DW,[o[3]||(o[3]=d("thead",null,[d("tr",null,[d("th",{class:"permission-column"},"Permission"),d("th",{class:"role-header admin"},"Admin"),d("th",{class:"role-header administrator"},"Administrator"),d("th",{class:"role-header administrator_504_CM"},"Admin 504/CM"),d("th",{class:"role-header sped_chair"},"SPED Chair"),d("th",{class:"role-header case_manager"},"Case Manager"),d("th",{class:"role-header teacher"},"Teacher"),d("th",{class:"role-header paraeducator"},"Paraeducator"),d("th",{class:"role-header service_provider"},"Service Provider")])],-1)),d("tbody",null,[(B(),V(Re,null,Ve(s,l=>d("tr",{key:l.key,class:"permission-row"},[d("td",PW,[d("div",RW,J(l.name),1),d("div",FW,J(l.description),1),d("div",OW,J(l.firebaseRule),1)]),(B(),V(Re,null,Ve(r,c=>d("td",{key:c,class:"permission-cell"},[d("span",{class:Ze(["permission-indicator",{granted:i(c,l.key)}])},J(i(c,l.key)?"":""),3)])),64))])),64))])])])]),d("div",NW,[o[6]||(o[6]=d("h3",null," Admin Panel Access",-1)),d("div",MW,[(B(),V(Re,null,Ve(n,l=>d("div",{key:l.key,class:Ze(["access-card",{"has-access":l.adminAccess}])},[d("div",LW,[d("span",BW,J(l.adminAccess?"":""),1),d("span",UW,J(l.name),1)]),l.adminAccess?(B(),V("div",$W,[d("div",VW,J(l.adminLevel),1),d("div",HW,J(l.adminDescription),1)])):(B(),V("div",jW," No admin panel access "))],2)),64))])]),o[8]||(o[8]=nn('<div class="firebase-rules" data-v-d7ccf132><h3 data-v-d7ccf132> Firebase Security Rules Summary</h3><div class="rules-grid" data-v-d7ccf132><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132> Users Collection</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> All authenticated users</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write:</strong> Admin, Administrator, Administrator 504/CM only</li><li data-v-d7ccf132><strong data-v-d7ccf132>Delete:</strong> Admin, Administrator only</li></ul></div><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132> Students Collection</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> All authenticated users (role-filtered)</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write (All):</strong> Admin, Administrator, Administrator 504/CM, SPED Chair</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write (Own Caseload):</strong> Case Manager</li><li data-v-d7ccf132><strong data-v-d7ccf132>Read-only:</strong> Teacher, Paraeducator, Service Provider</li></ul></div><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132> App Settings</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> All authenticated users</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write:</strong> Admin, Administrator only</li></ul></div><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132> Audit Logs</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> Admin, Administrator, SPED Chair</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write:</strong> All authenticated users (own actions)</li></ul></div></div></div>',1))]))}},WW=yt(GW,[["__scopeId","data-v-d7ccf132"]]),zW={class:"admin-permissions"},KW={__name:"AdminPermissions",setup(t){return(e,r)=>(B(),V("div",zW,[st(WW)]))}},qW=yt(KW,[["__scopeId","data-v-699444ca"]]);var BI={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(Bt,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var S=R(b);S.chunkSize=parseInt(S.chunkSize),b.step||b.chunk||(S.chunkSize=null),this._handle=new g(S),(this._handle.streamer=this)._config=S}).call(this,T),this.parseChunk=function(b,S){var k=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<k){let D=this._config.newline;D||(w=this._config.quoteChar||'"',D=this._handle.guessLineEndings(b,w)),b=[...b.split(D).slice(k)].join(D)}this.isFirstChunk&&E(this._config.beforeFirstChunk)&&(w=this._config.beforeFirstChunk(b))!==void 0&&(b=w),this.isFirstChunk=!1,this._halted=!1;var k=this._partialLine+b,w=(this._partialLine="",this._handle.parse(k,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(b=w.meta.cursor,k=(this._finished||(this._partialLine=k.substring(b-this._baseIndex),this._baseIndex=b),w&&w.data&&(this._rowCount+=w.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:w,workerId:c.WORKER_ID,finished:k});else if(E(this._config.chunk)&&!S){if(this._config.chunk(w,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=w=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(w.data),this._completeResults.errors=this._completeResults.errors.concat(w.errors),this._completeResults.meta=w.meta),this._completed||!k||!E(this._config.complete)||w&&w.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),k||w&&w.meta.paused||this._nextChunk(),w}this._halted=!0},this._sendError=function(b){E(this._config.error)?this._config.error(b):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:b,finished:!1})}}function f(T){var b;(T=T||{}).chunkSize||(T.chunkSize=c.RemoteChunkSize),u.call(this,T),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(S){this._input=S,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),i||(b.onload=A(this._chunkLoaded,this),b.onerror=A(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var S,k=this._config.downloadRequestHeaders;for(S in k)b.setRequestHeader(S,k[S])}var w;this._config.chunkSize&&(w=this._start+this._config.chunkSize-1,b.setRequestHeader("Range","bytes="+this._start+"-"+w));try{b.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}i&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize||b.responseText.length,this._finished=!this._config.chunkSize||this._start>=(S=>(S=S.getResponseHeader("Content-Range"))!==null?parseInt(S.substring(S.lastIndexOf("/")+1)):-1)(b),this.parseChunk(b.responseText)))},this._chunkError=function(S){S=b.statusText||S,this._sendError(new Error(S))}}function h(T){(T=T||{}).chunkSize||(T.chunkSize=c.LocalChunkSize),u.call(this,T);var b,S,k=typeof FileReader<"u";this.stream=function(w){this._input=w,S=w.slice||w.webkitSlice||w.mozSlice,k?((b=new FileReader).onload=A(this._chunkLoaded,this),b.onerror=A(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var w=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),w=S.call(w,this._start,D)),b.readAsText(w,this._config.encoding));k||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(w){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(w.target.result)},this._chunkError=function(){this._sendError(b.error)}}function p(T){var b;u.call(this,T=T||{}),this.stream=function(S){return b=S,this._nextChunk()},this._nextChunk=function(){var S,k;if(!this._finished)return S=this._config.chunkSize,b=S?(k=b.substring(0,S),b.substring(S)):(k=b,""),this._finished=!b,this.parseChunk(k)}}function m(T){u.call(this,T=T||{});var b=[],S=!0,k=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(w){this._input=w,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):S=!0},this._streamData=A(function(w){try{b.push(typeof w=="string"?w:w.toString(this._config.encoding)),S&&(S=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(D){this._streamError(D)}},this),this._streamError=A(function(w){this._streamCleanUp(),this._sendError(w)},this),this._streamEnd=A(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(T){var b,S,k,w,D=Math.pow(2,53),N=-D,F=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,P=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,O=this,M=0,U=0,z=!1,j=!1,H=[],W={data:[],errors:[],meta:{}};function K(pe){return T.skipEmptyLines==="greedy"?pe.join("").trim()==="":pe.length===1&&pe[0].length===0}function re(){if(W&&k&&(ce("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),k=!1),T.skipEmptyLines&&(W.data=W.data.filter(function(X){return!K(X)})),me()){let X=function(q,Y){E(T.transformHeader)&&(q=T.transformHeader(q,Y)),H.push(q)};var ye=X;if(W)if(Array.isArray(W.data[0])){for(var pe=0;me()&&pe<W.data.length;pe++)W.data[pe].forEach(X);W.data.splice(0,1)}else W.data.forEach(X)}function te(X,q){for(var Y=T.header?{}:[],ne=0;ne<X.length;ne++){var ve=ne,ae=X[ne],ae=((le,de)=>(Se=>(T.dynamicTypingFunction&&T.dynamicTyping[Se]===void 0&&(T.dynamicTyping[Se]=T.dynamicTypingFunction(Se)),(T.dynamicTyping[Se]||T.dynamicTyping)===!0))(le)?de==="true"||de==="TRUE"||de!=="false"&&de!=="FALSE"&&((Se=>{if(F.test(Se)&&(Se=parseFloat(Se),N<Se&&Se<D))return 1})(de)?parseFloat(de):P.test(de)?new Date(de):de===""?null:de):de)(ve=T.header?ne>=H.length?"__parsed_extra":H[ne]:ve,ae=T.transform?T.transform(ae,ve):ae);ve==="__parsed_extra"?(Y[ve]=Y[ve]||[],Y[ve].push(ae)):Y[ve]=ae}return T.header&&(ne>H.length?ce("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+ne,U+q):ne<H.length&&ce("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+ne,U+q)),Y}var Q;W&&(T.header||T.dynamicTyping||T.transform)&&(Q=1,!W.data.length||Array.isArray(W.data[0])?(W.data=W.data.map(te),Q=W.data.length):W.data=te(W.data,0),T.header&&W.meta&&(W.meta.fields=H),U+=Q)}function me(){return T.header&&H.length===0}function ce(pe,te,Q,ye){pe={type:pe,code:te,message:Q},ye!==void 0&&(pe.row=ye),W.errors.push(pe)}E(T.step)&&(w=T.step,T.step=function(pe){W=pe,me()?re():(re(),W.data.length!==0&&(M+=pe.data.length,T.preview&&M>T.preview?S.abort():(W.data=W.data[0],w(W,O))))}),this.parse=function(pe,te,Q){var ye=T.quoteChar||'"',ye=(T.newline||(T.newline=this.guessLineEndings(pe,ye)),k=!1,T.delimiter?E(T.delimiter)&&(T.delimiter=T.delimiter(pe),W.meta.delimiter=T.delimiter):((ye=((X,q,Y,ne,ve)=>{var ae,le,de,Se;ve=ve||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ie=0;Ie<ve.length;Ie++){for(var Te,Ge=ve[Ie],ke=0,$e=0,Be=0,We=(de=void 0,new x({comments:ne,delimiter:Ge,newline:q,preview:10}).parse(X)),ze=0;ze<We.data.length;ze++)Y&&K(We.data[ze])?Be++:(Te=We.data[ze].length,$e+=Te,de===void 0?de=Te:0<Te&&(ke+=Math.abs(Te-de),de=Te));0<We.data.length&&($e/=We.data.length-Be),(le===void 0||ke<=le)&&(Se===void 0||Se<$e)&&1.99<$e&&(le=ke,ae=Ge,Se=$e)}return{successful:!!(T.delimiter=ae),bestDelimiter:ae}})(pe,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess)).successful?T.delimiter=ye.bestDelimiter:(k=!0,T.delimiter=c.DefaultDelimiter),W.meta.delimiter=T.delimiter),R(T));return T.preview&&T.header&&ye.preview++,b=pe,S=new x(ye),W=S.parse(b,te,Q),re(),z?{meta:{paused:!0}}:W||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,S.abort(),b=E(T.chunk)?"":b.substring(S.getCharIndex())},this.resume=function(){O.streamer._halted?(z=!1,O.streamer.parseChunk(b,!0)):setTimeout(O.resume,3)},this.aborted=function(){return j},this.abort=function(){j=!0,S.abort(),W.meta.aborted=!0,E(T.complete)&&T.complete(W),b=""},this.guessLineEndings=function(X,ye){X=X.substring(0,1048576);var ye=new RegExp(v(ye)+"([^]*?)"+v(ye),"gm"),Q=(X=X.replace(ye,"")).split("\r"),ye=X.split(`
`),X=1<ye.length&&ye[0].length<Q[0].length;if(Q.length===1||X)return`
`;for(var q=0,Y=0;Y<Q.length;Y++)Q[Y][0]===`
`&&q++;return q>=Q.length/2?`\r
`:"\r"}}function v(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(T){var b=(T=T||{}).delimiter,S=T.newline,k=T.comments,w=T.step,D=T.preview,N=T.fastMode,F=null,P=!1,O=T.quoteChar==null?'"':T.quoteChar,M=O;if(T.escapeChar!==void 0&&(M=T.escapeChar),(typeof b!="string"||-1<c.BAD_DELIMITERS.indexOf(b))&&(b=","),k===b)throw new Error("Comment character same as delimiter");k===!0?k="#":(typeof k!="string"||-1<c.BAD_DELIMITERS.indexOf(k))&&(k=!1),S!==`
`&&S!=="\r"&&S!==`\r
`&&(S=`
`);var U=0,z=!1;this.parse=function(j,H,W){if(typeof j!="string")throw new Error("Input must be a string");var K=j.length,re=b.length,me=S.length,ce=k.length,pe=E(w),te=[],Q=[],ye=[],X=U=0;if(!j)return ke();if(N||N!==!1&&j.indexOf(O)===-1){for(var q=j.split(S),Y=0;Y<q.length;Y++){if(ye=q[Y],U+=ye.length,Y!==q.length-1)U+=S.length;else if(W)return ke();if(!k||ye.substring(0,ce)!==k){if(pe){if(te=[],Se(ye.split(b)),$e(),z)return ke()}else Se(ye.split(b));if(D&&D<=Y)return te=te.slice(0,D),ke(!0)}}return ke()}for(var ne=j.indexOf(b,U),ve=j.indexOf(S,U),ae=new RegExp(v(M)+v(O),"g"),le=j.indexOf(O,U);;)if(j[U]===O)for(le=U,U++;;){if((le=j.indexOf(O,le+1))===-1)return W||Q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:te.length,index:U}),Te();if(le===K-1)return Te(j.substring(U,le).replace(ae,O));if(O===M&&j[le+1]===M)le++;else if(O===M||le===0||j[le-1]!==M){ne!==-1&&ne<le+1&&(ne=j.indexOf(b,le+1));var de=Ie((ve=ve!==-1&&ve<le+1?j.indexOf(S,le+1):ve)===-1?ne:Math.min(ne,ve));if(j.substr(le+1+de,re)===b){ye.push(j.substring(U,le).replace(ae,O)),j[U=le+1+de+re]!==O&&(le=j.indexOf(O,U)),ne=j.indexOf(b,U),ve=j.indexOf(S,U);break}if(de=Ie(ve),j.substring(le+1+de,le+1+de+me)===S){if(ye.push(j.substring(U,le).replace(ae,O)),Ge(le+1+de+me),ne=j.indexOf(b,U),le=j.indexOf(O,U),pe&&($e(),z))return ke();if(D&&te.length>=D)return ke(!0);break}Q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:te.length,index:U}),le++}}else if(k&&ye.length===0&&j.substring(U,U+ce)===k){if(ve===-1)return ke();U=ve+me,ve=j.indexOf(S,U),ne=j.indexOf(b,U)}else if(ne!==-1&&(ne<ve||ve===-1))ye.push(j.substring(U,ne)),U=ne+re,ne=j.indexOf(b,U);else{if(ve===-1)break;if(ye.push(j.substring(U,ve)),Ge(ve+me),pe&&($e(),z))return ke();if(D&&te.length>=D)return ke(!0)}return Te();function Se(Be){te.push(Be),X=U}function Ie(Be){var We=0;return We=Be!==-1&&(Be=j.substring(le+1,Be))&&Be.trim()===""?Be.length:We}function Te(Be){return W||(Be===void 0&&(Be=j.substring(U)),ye.push(Be),U=K,Se(ye),pe&&$e()),ke()}function Ge(Be){U=Be,Se(ye),ye=[],ve=j.indexOf(S,U)}function ke(Be){if(T.header&&!H&&te.length&&!P){var We=te[0],ze=Object.create(null),Ee=new Set(We);let xe=!1;for(let be=0;be<We.length;be++){let Ne=We[be];if(ze[Ne=E(T.transformHeader)?T.transformHeader(Ne,be):Ne]){let je,ot=ze[Ne];for(;je=Ne+"_"+ot,ot++,Ee.has(je););Ee.add(je),We[be]=je,ze[Ne]++,xe=!0,(F=F===null?{}:F)[je]=Ne}else ze[Ne]=1,We[be]=Ne;Ee.add(Ne)}xe&&console.warn("Duplicate headers found and renamed."),P=!0}return{data:te,errors:Q,meta:{delimiter:b,linebreak:S,aborted:z,truncated:!!Be,cursor:X+(H||0),renamedHeaders:F}}}function $e(){w(ke()),te=[],Q=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return U}}function y(T){var b=T.data,S=o[b.workerId],k=!1;if(b.error)S.userError(b.error,b.file);else if(b.results&&b.results.data){var w={abort:function(){k=!0,_(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(E(S.userStep)){for(var D=0;D<b.results.data.length&&(S.userStep({data:b.results.data[D],errors:b.results.errors,meta:b.results.meta},w),!k);D++);delete b.results}else E(S.userChunk)&&(S.userChunk(b.results,w,b.file),delete b.results)}b.finished&&!k&&_(b.workerId,b.results)}function _(T,b){var S=o[T];E(S.userComplete)&&S.userComplete(b),S.terminate(),delete o[T]}function I(){throw new Error("Not implemented.")}function R(T){if(typeof T!="object"||T===null)return T;var b,S=Array.isArray(T)?[]:{};for(b in T)S[b]=R(T[b]);return S}function A(T,b){return function(){T.apply(b,arguments)}}function E(T){return typeof T=="function"}return c.parse=function(T,b){var S=(b=b||{}).dynamicTyping||!1;if(E(S)&&(b.dynamicTypingFunction=S,S={}),b.dynamicTyping=S,b.transform=!!E(b.transform)&&b.transform,!b.worker||!c.WORKERS_SUPPORTED)return S=null,c.NODE_STREAM_INPUT,typeof T=="string"?(T=(k=>k.charCodeAt(0)!==65279?k:k.slice(1))(T),S=new(b.download?f:p)(b)):T.readable===!0&&E(T.read)&&E(T.on)?S=new m(b):(n.File&&T instanceof File||T instanceof Object)&&(S=new h(b)),S.stream(T);(S=(()=>{var k;return!!c.WORKERS_SUPPORTED&&(k=(()=>{var w=n.URL||n.webkitURL||null,D=r.toString();return c.BLOB_URL||(c.BLOB_URL=w.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(k=new n.Worker(k)).onmessage=y,k.id=l++,o[k.id]=k)})()).userStep=b.step,S.userChunk=b.chunk,S.userComplete=b.complete,S.userError=b.error,b.step=E(b.step),b.chunk=E(b.chunk),b.complete=E(b.complete),b.error=E(b.error),delete b.worker,S.postMessage({input:T,config:b,workerId:S.id})},c.unparse=function(T,b){var S=!1,k=!0,w=",",D=`\r
`,N='"',F=N+N,P=!1,O=null,M=!1,U=((()=>{if(typeof b=="object"){if(typeof b.delimiter!="string"||c.BAD_DELIMITERS.filter(function(H){return b.delimiter.indexOf(H)!==-1}).length||(w=b.delimiter),typeof b.quotes!="boolean"&&typeof b.quotes!="function"&&!Array.isArray(b.quotes)||(S=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||(P=b.skipEmptyLines),typeof b.newline=="string"&&(D=b.newline),typeof b.quoteChar=="string"&&(N=b.quoteChar),typeof b.header=="boolean"&&(k=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");O=b.columns}b.escapeChar!==void 0&&(F=b.escapeChar+N),b.escapeFormulae instanceof RegExp?M=b.escapeFormulae:typeof b.escapeFormulae=="boolean"&&b.escapeFormulae&&(M=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(N),"g"));if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return z(null,T,P);if(typeof T[0]=="object")return z(O||Object.keys(T[0]),T,P)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||O),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),z(T.fields||[],T.data||[],P);throw new Error("Unable to serialize unrecognized input");function z(H,W,K){var re="",me=(typeof H=="string"&&(H=JSON.parse(H)),typeof W=="string"&&(W=JSON.parse(W)),Array.isArray(H)&&0<H.length),ce=!Array.isArray(W[0]);if(me&&k){for(var pe=0;pe<H.length;pe++)0<pe&&(re+=w),re+=j(H[pe],pe);0<W.length&&(re+=D)}for(var te=0;te<W.length;te++){var Q=(me?H:W[te]).length,ye=!1,X=me?Object.keys(W[te]).length===0:W[te].length===0;if(K&&!me&&(ye=K==="greedy"?W[te].join("").trim()==="":W[te].length===1&&W[te][0].length===0),K==="greedy"&&me){for(var q=[],Y=0;Y<Q;Y++){var ne=ce?H[Y]:Y;q.push(W[te][ne])}ye=q.join("").trim()===""}if(!ye){for(var ve=0;ve<Q;ve++){0<ve&&!X&&(re+=w);var ae=me&&ce?H[ve]:ve;re+=j(W[te][ae],ve)}te<W.length-1&&(!K||0<Q&&!X)&&(re+=D)}}return re}function j(H,W){var K,re;return H==null?"":H.constructor===Date?JSON.stringify(H).slice(1,25):(re=!1,M&&typeof H=="string"&&M.test(H)&&(H="'"+H,re=!0),K=H.toString().replace(U,F),(re=re||S===!0||typeof S=="function"&&S(H,W)||Array.isArray(S)&&S[W]||((me,ce)=>{for(var pe=0;pe<ce.length;pe++)if(-1<me.indexOf(ce[pe]))return!0;return!1})(K,c.BAD_DELIMITERS)||-1<K.indexOf(w)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?N+K+N:K)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=x,c.ParserHandle=g,c.NetworkStreamer=f,c.FileStreamer=h,c.StringStreamer=p,c.ReadableStreamStreamer=m,n.jQuery&&((s=n.jQuery).fn.parse=function(T){var b=T.config||{},S=[];return this.each(function(D){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var N=0;N<this.files.length;N++)S.push({file:this.files[N],inputElem:this,instanceConfig:s.extend({},b)})}),k(),this;function k(){if(S.length===0)E(T.complete)&&T.complete();else{var D,N,F,P,O=S[0];if(E(T.before)){var M=T.before(O.file,O.inputElem);if(typeof M=="object"){if(M.action==="abort")return D="AbortError",N=O.file,F=O.inputElem,P=M.reason,void(E(T.error)&&T.error({name:D},N,F,P));if(M.action==="skip")return void w();typeof M.config=="object"&&(O.instanceConfig=s.extend(O.instanceConfig,M.config))}else if(M==="skip")return void w()}var U=O.instanceConfig.complete;O.instanceConfig.complete=function(z){E(U)&&U(z,O.file,O.inputElem),w()},c.parse(O.file,O.instanceConfig)}}function w(){S.splice(0,1),k()}}),a&&(n.onmessage=function(T){T=T.data,c.WORKER_ID===void 0&&T&&(c.WORKER_ID=T.workerId),typeof T.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(T.input,T.config),finished:!0}):(n.File&&T.input instanceof File||T.input instanceof Object)&&(T=c.parse(T.input,T.config))&&n.postMessage({workerId:c.WORKER_ID,results:T,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(h.prototype=Object.create(u.prototype)).constructor=h,(p.prototype=Object.create(p.prototype)).constructor=p,(m.prototype=Object.create(u.prototype)).constructor=m,c})})(BI);var XW=BI.exports;const UI=OI(XW),Ro=po();function $I(t){return t.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,r)=>r.toUpperCase()).replace(/^[A-Z]/,e=>e.toLowerCase())}async function YW(t,e){if(!t)return null;const r=Object.values(e).find(n=>{var s;return n.aeriesId===t||n.aeriesId===parseInt(t)||((s=n.aeriesId)==null?void 0:s.toString())===(t==null?void 0:t.toString())});return r?r.id:(console.warn(`No Firebase user found for Aeries teacher ID: ${t}`),null)}function xv(t){return{sourcedId:"stateId",SSID:"stateId",StateStudentID:"stateId",StudentNumber:"localId",givenName:"firstName",FirstName:"firstName",familyName:"lastName",LastName:"lastName",middleName:"middleName",MiddleName:"middleName",email:"email",Email:"email",phone:"phone",Phone:"phone",dateOfBirth:"birthDate",DOB:"birthDate",sex:"gender",Gender:"gender",grade:"grade",Grade:"grade",Address:"address",City:"city",State:"state",ZipCode:"zipCode",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",AttendanceRate:"attendanceRate",attendanceRate:"attendanceRate",Period1TeacherId:"schedule.periods.1",period1TeacherId:"schedule.periods.1",Period2TeacherId:"schedule.periods.2",period2TeacherId:"schedule.periods.2",Period3TeacherId:"schedule.periods.3",period3TeacherId:"schedule.periods.3",Period4TeacherId:"schedule.periods.4",period4TeacherId:"schedule.periods.4",Period5TeacherId:"schedule.periods.5",period5TeacherId:"schedule.periods.5",Period6TeacherId:"schedule.periods.6",period6TeacherId:"schedule.periods.6",Period7TeacherId:"schedule.periods.7",period7TeacherId:"schedule.periods.7",SHTeacherId:"schedule.periods.SH",shTeacherId:"schedule.periods.SH"}[t]||$I(t)}function yv(t){return{SSID:"ssid",FirstName:"firstName",LastName:"lastName",MiddleName:"middleName",Grade:"grade",DOB:"dob",Gender:"gender",Ethnicity:"ethnicity",School:"school",Address:"address",City:"city",State:"state",ZipCode:"zipCode",Phone:"phone",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",ELL:"ell",504:"504",IEP:"iep",CaseManager:"caseManager",Disability:"disability",ServiceMinutes:"serviceMinutes",Goals:"goals",Notes:"notes",Plan:"plan",ReviewDate:"reviewDate",ReevalDate:"reevalDate",MeetingDate:"meetingDate",SpeechProvider:"speechProvider",MHProvider:"mhProvider",OTProvider:"otProvider",ProgramAccommodations:"programAccommodations",Accommodations:"programAccommodations",IEP_Services:"iepServices"}[t]||$I(t)}async function JW(t){return new Promise((e,r)=>{UI.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));const i=Object.keys(s[0]).map(o=>o.trim().toLowerCase());if(!(i.includes("sourcedid")||i.includes("ssid")||i.includes("statestudentid")))return r(new Error("Missing required 'sourcedId' or 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function QW(t,e){var a;let r=0;const n=wt(Ro,"users"),s=await jt(n),i={};s.forEach(o=>{i[o.id]={id:o.id,...o.data()}}),console.log(`Loaded ${Object.keys(i).length} users for teacher ID mapping`);for(const o of t){const l=(a=o.sourcedId||o.SSID||o.ssid||o.StateStudentID||o.stateStudentId)==null?void 0:a.trim();if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={firstName:"",lastName:"",grade:"",birthDate:"",gender:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",parentName:"",parentPhone:"",parentEmail:"",attendanceRate:"",schedule:{periods:{}}};for(const u of e){const f=xv(u),h=o[u],p=h!=null&&typeof h=="string"?h.trim():h!=null?String(h):null;if(f.startsWith("schedule.periods.")){const m=f.split(".")[2];if(p){const g=await YW(p,i);g?(c.schedule.periods[m]=g,console.log(`Mapped Aeries teacher ID ${p} to Firebase user ID ${g} for period ${m}`)):console.warn(`Could not map Aeries teacher ID ${p} for period ${m}`)}}else c[f]=p}c.lastAeriesImport=new Date().toISOString(),console.log("Final aeriesData.schedule structure:",JSON.stringify(c.schedule,null,2));try{const u=wt(Ro,"students"),f=ur(u,jr("app.studentData.ssid","==",l)),h=await jt(f);if(h.empty){const p=Qe(wt(Ro,"students")),m={app:{studentData:{ssid:l}},aeries:c,createdAt:$s()};await Kt(p,m),console.log(`Created new student ${p.id} with Aeries data for SSID ${l}`)}else{const p=h.docs[0];await Kt(Qe(Ro,"students",p.id),{aeries:c},{merge:!0}),console.log(`Updated existing student ${p.id} with Aeries data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import Aeries data for SSID ${l}:`,u)}}return r}async function ZW(t){return new Promise((e,r)=>{UI.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));if(!Object.keys(s[0]).some(a=>a.trim().toLowerCase()==="ssid"))return r(new Error("Missing required 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function ez(t,e){var n,s,i,a;let r=0;for(const o of t){const l=((n=o.SSID)==null?void 0:n.trim())||((s=o.ssid)==null?void 0:s.trim());if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={};for(const u of e){const f=yv(u);u==="IEP_Services"||u==="iep_services"?c[f]=((i=o[u])==null?void 0:i.split(";").map(h=>h.trim()))||[]:u==="ProgramAccommodations"||u==="Accommodations"?c[f]=((a=o[u])==null?void 0:a.split(";").map(h=>h.trim()))||[]:c[f]=o[u]}c.lastSeisImport=new Date().toISOString();try{const u=wt(Ro,"students"),f=ur(u,jr("app.studentData.ssid","==",l)),h=await jt(f);if(h.empty){const p=Qe(wt(Ro,"students")),m={app:{studentData:{ssid:l}},seis:c,createdAt:$s()};await Kt(p,m),console.log(`Created new student ${p.id} with SEIS data for SSID ${l}`)}else{const p=h.docs[0];await Kt(Qe(Ro,"students",p.id),{seis:c},{merge:!0}),console.log(`Updated existing student ${p.id} with SEIS data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import SEIS data for SSID ${l}:`,u)}}return r}const tz={name:"SeisImport",setup(){const t=se(null),e=se(null),r=se([]),n=se([]),s=se([]),i=se([]),a=se(""),o=se(!1),l=Ae(()=>r.value.length>0&&s.value.length>0),c=(p,m=!1)=>{a.value=p,o.value=m,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:p=>{const m=p.target.files[0];if(m){const g=Mc(m,{allowedTypes:["csv"],maxSize:10485760,fieldName:"SEIS Import File"});if(!g.isValid){c(g.error,!0),p.target.value="";return}const v=Wr(m.name);if(!v.isSafe){c(`File name contains potentially dangerous content: ${v.threats.join(", ")}`,!0),p.target.value="";return}e.value=m}},previewFile:async()=>{const p=e.value;if(!p){c(" Please select a CSV file.",!0);return}if(!ws("seisPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const v=(await ZW(p)).map(y=>{const _={};return Object.entries(y).forEach(([I,R])=>{const A=fn(I,{trim:!0,maxLength:100,removeDangerous:!0});let E=R;if(typeof R=="string"){E=fn(R,{trim:!0,maxLength:500,removeDangerous:!0});const T=Wr(E);T.isSafe||(console.warn(`Security threat detected in SEIS data: ${T.threats.join(", ")}`),E="")}_[A]=E}),_});r.value=v,c(` Loaded ${r.value.length} rows.`);const x=Object.keys(r.value[0]||{}).filter(y=>y.length>0);n.value=x,s.value=[...x],i.value=r.value.slice(0,5)}catch(g){c(` Error: ${g.message}`,!0),console.error("SEIS Parse Error:",g)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!ws("seisImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} SEIS records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const m=r.value.map(v=>{const x={};return s.value.forEach(y=>{v[y]!==void 0&&(x[y]=v[y])}),x}),g=m.filter(v=>Object.values(v).some(y=>y&&typeof y=="string"&&y.trim().length>0));if(g.length===0){c(" No valid records found to import.",!0);return}if(g.length!==m.length){const v=m.length-g.length;c(` Skipping ${v} invalid records. Importing ${g.length} valid records.`)}await ez(g,s.value),c(` Successfully imported ${g.length} SEIS records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(m){c(` Import failed: ${m.message}`,!0),console.error("SEIS Import Error:",m)}}}}}},rz={class:"seis-import"},nz=["disabled"],sz={key:0,id:"seis-field-options"},az=["value"],iz={key:1,id:"seis-preview-container",style:{"margin-top":"1rem"}},oz={border:"1",cellpadding:"4"},lz=["disabled"];function cz(t,e,r,n,s,i){return B(),V("div",rz,[e[5]||(e[5]=d("h3",null,"Upload SEIS CSV",-1)),d("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),d("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,nz),n.fieldOptions.length>0?(B(),V("div",sz,[e[4]||(e[4]=d("h4",null,"Select fields to import:",-1)),(B(!0),V(Re,null,Ve(n.fieldOptions,a=>(B(),V("label",{key:a},[we(d("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,az),[[_t,n.selectedFields]]),Oe(" "+J(a),1)]))),128))])):_e("",!0),n.previewData.length>0?(B(),V("div",iz,[d("table",oz,[d("thead",null,[d("tr",null,[(B(!0),V(Re,null,Ve(n.fieldOptions,a=>(B(),V("th",{key:a},J(a),1))),128))])]),d("tbody",null,[(B(!0),V(Re,null,Ve(n.previewData,(a,o)=>(B(),V("tr",{key:o},[(B(!0),V(Re,null,Ve(n.fieldOptions,l=>(B(),V("td",{key:l},J(a[l]||""),1))),128))]))),128))])]),d("p",null,"Showing first "+J(n.previewData.length)+" of "+J(n.parsedData.length)+" rows.",1)])):_e("",!0),d("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,lz),d("p",{class:Ze(["status-msg",{error:n.isError}])},J(n.statusMessage),3)])}const uz=yt(tz,[["render",cz],["__scopeId","data-v-b942d3b4"]]),dz={name:"AeriesImport",setup(){const t=se(null),e=se(null),r=se([]),n=se([]),s=se([]),i=se([]),a=se(""),o=se(!1),l=Ae(()=>r.value.length>0&&s.value.length>0),c=(p,m=!1)=>{a.value=p,o.value=m,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:p=>{const m=p.target.files[0];if(m){const g=Mc(m,{allowedTypes:["csv"],maxSize:10485760,fieldName:"Aeries Import File"});if(!g.isValid){c(g.error,!0),p.target.value="";return}const v=Wr(m.name);if(!v.isSafe){c(`File name contains potentially dangerous content: ${v.threats.join(", ")}`,!0),p.target.value="";return}e.value=m}},previewFile:async()=>{const p=e.value;if(!p){c(" Please select a CSV file.",!0);return}if(!ws("aeriesPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const v=(await JW(p)).map(y=>{const _={};return Object.entries(y).forEach(([I,R])=>{const A=fn(I,{trim:!0,maxLength:100,removeDangerous:!0});let E=R;if(typeof R=="string"){E=fn(R,{trim:!0,maxLength:500,removeDangerous:!0});const T=Wr(E);T.isSafe||(console.warn(`Security threat detected in Aeries data: ${T.threats.join(", ")}`),E="")}_[A]=E}),_});r.value=v,c(` Loaded ${r.value.length} rows.`);const x=Object.keys(r.value[0]||{}).filter(y=>y.length>0);n.value=x,s.value=[...x],i.value=r.value.slice(0,5)}catch(g){c(` Error: ${g.message}`,!0),console.error("Aeries Parse Error:",g)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!ws("aeriesImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} Aeries records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const m=r.value.map(v=>{const x={};return s.value.forEach(y=>{v[y]!==void 0&&(x[y]=v[y])}),x}),g=m.filter(v=>Object.values(v).some(y=>y&&typeof y=="string"&&y.trim().length>0));if(g.length===0){c(" No valid records found to import.",!0);return}if(g.length!==m.length){const v=m.length-g.length;c(` Skipping ${v} invalid records. Importing ${g.length} valid records.`)}await QW(g,s.value),c(` Successfully imported ${g.length} Aeries records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(m){c(` Import failed: ${m.message}`,!0),console.error("Aeries Import Error:",m)}}}}}},fz={class:"aeries-import"},hz=["disabled"],pz={key:0,id:"aeries-field-options"},mz=["value"],gz={key:1,id:"aeries-preview-container",style:{"margin-top":"1rem"}},vz={border:"1",cellpadding:"4"},xz=["disabled"];function yz(t,e,r,n,s,i){return B(),V("div",fz,[e[5]||(e[5]=d("h3",null,"Upload Aeries CSV",-1)),d("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),d("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,hz),n.fieldOptions.length>0?(B(),V("div",pz,[e[4]||(e[4]=d("h4",null,"Select fields to import:",-1)),(B(!0),V(Re,null,Ve(n.fieldOptions,a=>(B(),V("label",{key:a},[we(d("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,mz),[[_t,n.selectedFields]]),Oe(" "+J(a),1)]))),128))])):_e("",!0),n.previewData.length>0?(B(),V("div",gz,[d("table",vz,[d("thead",null,[d("tr",null,[(B(!0),V(Re,null,Ve(n.fieldOptions,a=>(B(),V("th",{key:a},J(a),1))),128))])]),d("tbody",null,[(B(!0),V(Re,null,Ve(n.previewData,(a,o)=>(B(),V("tr",{key:o},[(B(!0),V(Re,null,Ve(n.fieldOptions,l=>(B(),V("td",{key:l},J(a[l]||""),1))),128))]))),128))])]),d("p",null,"Showing first "+J(n.previewData.length)+" of "+J(n.parsedData.length)+" rows.",1)])):_e("",!0),d("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,xz),d("p",{class:Ze(["status-msg",{error:n.isError}])},J(n.statusMessage),3)])}const Ez=yt(dz,[["render",yz],["__scopeId","data-v-b40a9547"]]);function _z(){const t=nc(Ld()),e=se(!1),r=se(!1),n=se(""),s=se(""),i=se(!1),a=xs({baseUrl:"encrypted",clientId:"encrypted",clientSecret:"encrypted",selectedSchoolId:"school123",selectedClassIds:["class1","class2"],selectedApiTypes:{oneroster:!0,nativeAeries:!0},selectedEndpoints:["/schools","/students","/api/special-education/students"]}),o=se([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"},{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),l=(k,w=!1)=>{s.value=k,i.value=w,setTimeout(()=>{s.value="",i.value=!1},5e3)},c=()=>{a.baseUrl="https://demo.aeries.net/aeries",a.clientId="1279e5c6b747b6d62b7c76db3a205d40eb7458e678a90493d537d5af6b953550",a.clientSecret="68019dbf8d8ba82980dd148eecc3977ac0d7f1f040d444225874c88eb80b9c1a",l("Demo credentials loaded. Click Connect to test.")},u=async()=>{if(!a.baseUrl||!a.clientId||!a.clientSecret)return l("Please fill in all connection fields.",!0),!1;r.value=!0,l("Connecting to Aeries API...");try{const D=(await Ta(t,"getAeriesToken")({baseUrl:a.baseUrl,clientId:a.clientId,clientSecret:a.clientSecret})).data;if(D.success&&D.access_token)return n.value=D.access_token,e.value=!0,l(" Successfully connected to Aeries API!"),!0;throw new Error("No access token received")}catch(k){const w=k.message||"Connection failed";return l(` Connection failed: ${w}`,!0),console.error("Aeries API Connection Error:",k),!1}finally{r.value=!1}},f=()=>{e.value=!1,n.value="",l("Disconnected from Aeries API.")},h=async k=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const N=(await Ta(t,"testAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:k,accessToken:n.value})).data;if(N.success)return l(` Successfully fetched data from ${k}`),{data:N.data,responseTime:N.responseTime};throw new Error(N.error||"API call failed")}catch(w){const D=w.message||"API call failed";return l(` API call failed: ${D}`,!0),console.error("Aeries API Test Error:",w),{error:D}}},p=async k=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const N=(await Ta(t,"testCustomAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:k,accessToken:n.value})).data;return N.success?(l(` Successfully fetched data from ${k}`),{data:N.data,responseTime:N.responseTime}):{error:N.error||"API call failed"}}catch(w){const D=w.message||"API call failed";return l(` API call failed: ${D}`,!0),console.error("Custom Aeries API Test Error:",w),{error:D}}},m=async()=>await h("/students"),g=async()=>await h("/teachers"),v=async()=>{const k=["/api/special-education/students","/api/students/special-education","/api/iep/students","/api/504/students"];for(const w of k){const D=await p(w);if(D&&!D.error)return D}return{error:"No special education endpoints found"}},x=async()=>await p("/api/special-education/ieps"),y=async()=>await p("/api/special-education/504-plans"),_=async()=>await p("/api/special-education/accommodations"),I=async()=>await p("/api/special-education/services"),R=async()=>await p("/api/special-education/case-managers"),A=async()=>{const k={},w=o.value.filter(D=>D.path.includes("special-education")||D.path.includes("iep")||D.path.includes("504"));for(const D of w)k[D.path]=await p(D.path);return k},E=async()=>{var w;const k=await h("/students");if(k&&!k.error&&k.data){const D=((w=k.data.students)==null?void 0:w[0])||k.data[0],N=D&&(D.specialEducation||D.iep||D.plan504||D.disabilities||D.accommodations);return{success:!0,hasSpecialEdFields:N,sampleStudent:D,message:N?"OneRoster includes special education data!":"OneRoster does not include special education data"}}return k},T=async()=>{const k=["?filter=specialEducation=true","?filter=iep=true","?filter=plan504=true","?filter=disabilities=*","?filter=accommodations=*"],w={};for(const D of k)w[D]=await h(`/students${D}`);return w};async function b({baseUrl:k,accessToken:w}){const D=nc(),P=await Ta(D,"testAeriesEndpoint")({baseUrl:k,endpoint:"/schools",accessToken:w});return P.data.data.orgs||P.data.data.schools||P.data.data||[]}async function S({baseUrl:k,accessToken:w,schoolId:D}){const N=nc(),F=Ta(N,"testAeriesEndpoint"),P=`/classes?filter=school.sourcedId='${D}'`,O=await F({baseUrl:k,endpoint:P,accessToken:w});return O.data.data.classes||O.data.data||[]}return{isConnected:e,isConnecting:r,accessToken:n,connectionStatus:s,isError:i,connectionConfig:a,availableEndpoints:o,showStatus:l,loadDemoCredentials:c,connect:u,disconnect:f,testEndpoint:h,testCustomEndpoint:p,fetchStudents:m,fetchTeachers:g,fetchSpecialEducationStudents:v,fetchIEPRecords:x,fetch504Plans:y,fetchAccommodations:_,fetchServices:I,fetchCaseManagers:R,testAllSpecialEducationEndpoints:A,testOneRosterForSpecialEd:E,testStudentsWithSpecialEd:T,fetchSchools:b,fetchClasses:S}}const qm=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t.charCodeAt(n)^e.charCodeAt(n%e.length));return btoa(r)},Xm=(t,e)=>{const r=atob(t);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r.charCodeAt(s)^e.charCodeAt(s%e.length));return n};function bz(){const t=po(),e=Wo(),r=se(!1),n=se(null),s=()=>{const c=e.currentUser;if(!c)throw new Error("User not authenticated");return c.uid+"_aeries_config_key"};return{isLoading:r,error:n,saveAeriesConfig:async c=>{if(!e.currentUser)throw new Error("User must be authenticated to save configuration");r.value=!0,n.value=null;try{const u=e.currentUser,f=s(),h={baseUrl:qm(c.baseUrl,f),clientId:qm(c.clientId,f),clientSecret:qm(c.clientSecret,f),selectedSchoolId:c.selectedSchoolId||"",selectedClassIds:c.selectedClassIds||[],manualClassInput:c.manualClassInput||"",savedAt:new Date().toISOString(),userId:u.uid},p=Qe(t,"users",u.uid,"aeries_config","current");return await Kt(p,h),{success:!0,message:"Configuration saved securely"}}catch(u){throw n.value=u.message,console.error("Failed to save Aeries configuration:",u),u}finally{r.value=!1}},loadAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to load configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=s(),f=Qe(t,"users",c.uid,"aeries_config","current"),h=await tr(f);if(!h.exists())return null;const p=h.data();if(p.userId!==c.uid)throw new Error("Configuration security check failed");return{baseUrl:Xm(p.baseUrl,u),clientId:Xm(p.clientId,u),clientSecret:Xm(p.clientSecret,u),selectedSchoolId:p.selectedSchoolId||"",selectedClassIds:p.selectedClassIds||[],manualClassInput:p.manualClassInput||"",savedAt:p.savedAt}}catch(c){throw n.value=c.message,console.error("Failed to load Aeries configuration:",c),c}finally{r.value=!1}},deleteAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to delete configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=Qe(t,"users",c.uid,"aeries_config","current");return await co(u),{success:!0,message:"Configuration deleted securely"}}catch(c){throw n.value=c.message,console.error("Failed to delete Aeries configuration:",c),c}finally{r.value=!1}},hasSavedConfig:async()=>{if(!e.currentUser)return!1;try{const c=e.currentUser,u=Qe(t,"users",c.uid,"aeries_config","current");return(await tr(u)).exists()}catch(c){return console.error("Failed to check for saved configuration:",c),!1}}}}const Sz={name:"AeriesAPIConnector",setup(){const{isConnected:t,isConnecting:e,accessToken:r,connectionStatus:n,isError:s,connectionConfig:i,availableEndpoints:a,showStatus:o,loadDemoCredentials:l,connect:c,disconnect:u,testEndpoint:f,testAllSpecialEducationEndpoints:h,testOneRosterForSpecialEd:p,testStudentsWithSpecialEd:m,fetchSchools:g,fetchClasses:v}=_z(),{isLoading:x,error:y,saveAeriesConfig:_,loadAeriesConfig:I,deleteAeriesConfig:R,hasSavedConfig:A}=bz(),E=se(!1),T=se(null),b=se(""),S=se(null),k=se([]),w=se(""),D=se([]),N=se([]),F=se(!1),P=se(""),O=se(""),M=se(!1),U=se({oneroster:!1,nativeAeries:!1}),z=se([]),j=se([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"}]),H=se([{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),W=Ae(()=>i.baseUrl&&i.clientId&&i.clientSecret),K=async()=>{if(await c())try{E.value=!0;const le=await g({baseUrl:i.baseUrl,accessToken:r.value});k.value=le||[],w.value=""}catch(le){console.error("Failed to fetch schools:",le),o("Failed to fetch schools",!0),k.value=[]}finally{E.value=!1}},re=async ae=>{E.value=!0,b.value=ae,T.value=null,S.value=null;const le=await f(ae);le&&!le.error?(T.value=le.data,S.value=le.responseTime):le&&le.error&&(T.value={error:le.error}),E.value=!1},me=async()=>{E.value=!0,await h(),E.value=!1},ce=async()=>{E.value=!0,b.value="/students (SPED check)",T.value=null,S.value=null;const ae=await p();ae&&!ae.error?(T.value=ae,o(ae.message)):ae&&ae.error&&(T.value={error:ae.error},o(` OneRoster test failed: ${ae.error}`,!0)),E.value=!1},pe=async()=>{E.value=!0,b.value="/students (SPED filters)",T.value=null,S.value=null;const ae=await m();ae&&(T.value=ae,o("OneRoster SPED filter tests completed")),E.value=!1};Vt(w,async ae=>{if(!ae){D.value=[],N.value=[];return}F.value=!1,P.value="",E.value=!0;try{D.value=await v({baseUrl:i.baseUrl,accessToken:r.value,schoolId:ae}),N.value=[]}catch{F.value=!0,D.value=[],N.value=[]}finally{E.value=!1}});const te=Ae(()=>t.value&&k.value.length>0),Q=Ae(()=>te.value&&w.value),ye=Ae(()=>U.value.oneroster||U.value.nativeAeries),X=()=>{const ae=[];U.value.oneroster&&ae.push(...j.value),U.value.nativeAeries&&ae.push(...H.value),a.value=ae},q=(ae,le=!1)=>{O.value=ae,M.value=le,setTimeout(()=>{O.value="",M.value=!1},5e3)},Y=async()=>{try{const ae={baseUrl:i.baseUrl,clientId:i.clientId,clientSecret:i.clientSecret,selectedSchoolId:w.value,selectedClassIds:N.value,manualClassInput:P.value,selectedApiTypes:U.value,selectedEndpoints:z.value};await _(ae),q(" Configuration saved securely to Firebase!")}catch(ae){console.error("Failed to save configuration:",ae),q(` Failed to save configuration: ${ae.message}`,!0)}},ne=async()=>{try{const ae=await I();if(!ae){q(" No saved configuration found",!0);return}i.baseUrl=ae.baseUrl||"",i.clientId=ae.clientId||"",i.clientSecret=ae.clientSecret||"",w.value=ae.selectedSchoolId||"",N.value=ae.selectedClassIds||[],P.value=ae.manualClassInput||"",ae.selectedApiTypes&&(U.value=ae.selectedApiTypes),ae.selectedEndpoints&&(z.value=ae.selectedEndpoints),X();const le=ae.savedAt?new Date(ae.savedAt).toLocaleString():"Unknown";q(` Configuration loaded securely (saved: ${le})`)}catch(ae){console.error("Failed to load configuration:",ae),q(` Failed to load configuration: ${ae.message}`,!0)}},ve=async()=>{if(confirm("Are you sure you want to permanently delete the saved configuration? This action cannot be undone."))try{await R(),q(" Configuration permanently deleted from Firebase!")}catch(ae){console.error("Failed to clear configuration:",ae),q(` Failed to clear configuration: ${ae.message}`,!0)}};return Ut(async()=>{try{if(await A()){const le=await I();le&&(i.baseUrl=le.baseUrl||"",i.clientId=le.clientId||"",i.clientSecret=le.clientSecret||"",le.selectedApiTypes&&(U.value=le.selectedApiTypes),le.selectedEndpoints&&(z.value=le.selectedEndpoints),X(),q(" Configuration auto-loaded securely from Firebase"))}}catch(ae){console.error("Failed to auto-load configuration:",ae)}}),{connectionConfig:i,isConnected:t,isConnecting:e,isLoading:E,connectionStatus:n,isError:s,apiResults:T,currentEndpoint:b,responseTime:S,availableEndpoints:a,canConnect:W,loadDemoCredentials:l,connect:K,disconnect:u,testEndpoint:re,handleTestSpecialEd:me,handleTestOneRosterSpecialEd:ce,handleTestStudentsWithSpecialEd:pe,schools:k,selectedSchoolId:w,classes:D,selectedClassIds:N,classesFetchError:F,manualClassInput:P,canShowSchoolDropdown:te,canShowClasses:Q,configStatus:O,configError:M,storageLoading:x,storageError:y,saveConfiguration:Y,loadConfiguration:ne,clearConfiguration:ve,selectedApiTypes:U,selectedEndpoints:z,onerosterEndpoints:j,nativeAeriesEndpoints:H,hasSelectedApiTypes:ye,updateAvailableEndpoints:X}}},Tz={class:"aeries-api-connector"},Az={class:"connection-form"},wz={class:"form-group"},Cz=["disabled"],Iz={class:"form-group"},kz=["disabled"],Dz={class:"form-group"},Pz=["disabled"],Rz={class:"button-group"},Fz=["disabled"],Oz=["disabled"],Nz={class:"api-type-selection"},Mz={class:"api-type-options"},Lz={class:"api-type-option"},Bz={class:"checkbox-label"},Uz={class:"api-type-option"},$z={class:"checkbox-label"},Vz={key:0,class:"endpoint-selection"},Hz={class:"endpoint-categories"},jz={key:0,class:"endpoint-category"},Gz={class:"endpoint-checkboxes"},Wz=["value"],zz={class:"endpoint-name"},Kz={class:"endpoint-path-small"},qz={key:1,class:"endpoint-category"},Xz={class:"endpoint-checkboxes"},Yz=["value"],Jz={class:"endpoint-name"},Qz={class:"endpoint-path-small"},Zz={class:"config-management"},eK={class:"config-buttons"},tK=["disabled"],rK=["disabled"],nK=["disabled"],sK={key:1,class:"api-testing"},aK={class:"special-ed-section"},iK={class:"quick-test-buttons"},oK=["disabled"],lK=["disabled"],cK=["disabled"],uK=["disabled"],dK=["disabled"],fK=["disabled"],hK={class:"endpoint-grid"},pK={class:"endpoint-path"},mK={class:"endpoint-description"},gK=["onClick","disabled"],vK={key:0,class:"api-results"},xK={class:"results-header"},yK={class:"endpoint-tested"},EK={key:0,class:"response-time"},_K={class:"results-content"},bK={key:2,class:"form-group"},SK=["value"],TK={key:3,class:"form-group"},AK={key:0},wK=["value"],CK={key:1};function IK(t,e,r,n,s,i){return B(),V("div",Tz,[e[48]||(e[48]=nn('<h3 data-v-0f37c4fc>Aeries API Connection</h3><div class="api-info-section" data-v-0f37c4fc><h4 data-v-0f37c4fc>Getting Students with IEP/504 Plans</h4><div class="info-grid" data-v-0f37c4fc><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> OneRoster API (Limited)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> All students, basic info</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Cannot filter:</strong> Students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> You&#39;d get ALL students, not just SPED</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> Custom Aeries API (Recommended)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Only students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Includes:</strong> Accommodations, services, case managers</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Perfect for your use case</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> CSV Import (Fallback)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Filtered data from Aeries export</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Process:</strong> Export SPED students  Import CSV</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Works but requires manual steps</p></div></div><div class="testing-note" data-v-0f37c4fc><p data-v-0f37c4fc><strong data-v-0f37c4fc>Test the buttons below to see what your Aeries instance supports!</strong></p></div></div>',2)),d("div",Az,[d("div",wz,[e[24]||(e[24]=d("label",{for:"baseUrl"},"Base URL:",-1)),we(d("input",{id:"baseUrl","onUpdate:modelValue":e[0]||(e[0]=a=>n.connectionConfig.baseUrl=a),type:"url",placeholder:"https://demo.aeries.net/aeries",disabled:n.isConnected},null,8,Cz),[[Je,n.connectionConfig.baseUrl]])]),d("div",Iz,[e[25]||(e[25]=d("label",{for:"clientId"},"Client ID:",-1)),we(d("input",{id:"clientId","onUpdate:modelValue":e[1]||(e[1]=a=>n.connectionConfig.clientId=a),type:"text",placeholder:"Enter your Client ID",disabled:n.isConnected},null,8,kz),[[Je,n.connectionConfig.clientId]])]),d("div",Dz,[e[26]||(e[26]=d("label",{for:"clientSecret"},"Client Secret:",-1)),we(d("input",{id:"clientSecret","onUpdate:modelValue":e[2]||(e[2]=a=>n.connectionConfig.clientSecret=a),type:"password",placeholder:"Enter your Client Secret",disabled:n.isConnected},null,8,Pz),[[Je,n.connectionConfig.clientSecret]])]),d("div",Rz,[d("button",{onClick:e[3]||(e[3]=(...a)=>n.connect&&n.connect(...a)),disabled:!n.canConnect||n.isConnecting,class:"btn-primary"},J(n.isConnecting?"Connecting...":"Connect"),9,Fz),n.isConnected?(B(),V("button",{key:0,onClick:e[4]||(e[4]=(...a)=>n.disconnect&&n.disconnect(...a)),class:"btn-secondary"}," Disconnect ")):_e("",!0),d("button",{onClick:e[5]||(e[5]=(...a)=>n.loadDemoCredentials&&n.loadDemoCredentials(...a)),disabled:n.isConnected,class:"btn-demo"}," Load Demo Credentials ",8,Oz)]),d("div",Nz,[e[37]||(e[37]=d("h4",null,"Select API Types",-1)),e[38]||(e[38]=d("p",{class:"api-type-description"},"Choose which Aeries API types you want to use. This determines which endpoints will be available for testing and data import.",-1)),d("div",Mz,[d("div",Lz,[d("label",Bz,[we(d("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>n.selectedApiTypes.oneroster=a),onChange:e[7]||(e[7]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[_t,n.selectedApiTypes.oneroster]]),e[27]||(e[27]=d("span",{class:"checkmark"},null,-1)),e[28]||(e[28]=d("strong",null,"OneRoster API",-1))]),e[29]||(e[29]=d("p",{class:"api-type-desc"},"Standard OneRoster endpoints for basic student, teacher, and class data",-1))]),d("div",Uz,[d("label",$z,[we(d("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>n.selectedApiTypes.nativeAeries=a),onChange:e[9]||(e[9]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[_t,n.selectedApiTypes.nativeAeries]]),e[30]||(e[30]=d("span",{class:"checkmark"},null,-1)),e[31]||(e[31]=d("strong",null,"Native Aeries v5 API",-1))]),e[32]||(e[32]=d("p",{class:"api-type-desc"},"Aeries-specific endpoints for special education, IEP, and 504 plan data",-1))])]),n.hasSelectedApiTypes?(B(),V("div",Vz,[e[35]||(e[35]=d("h5",null,"Select Endpoints to Use",-1)),e[36]||(e[36]=d("p",{class:"endpoint-description"},"Check the endpoints you want to enable for data import and testing.",-1)),d("div",Hz,[n.selectedApiTypes.oneroster?(B(),V("div",jz,[e[33]||(e[33]=d("h6",null,"OneRoster Endpoints",-1)),d("div",Gz,[(B(!0),V(Re,null,Ve(n.onerosterEndpoints,a=>(B(),V("label",{key:a.path,class:"endpoint-checkbox"},[we(d("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>n.selectedEndpoints=o),value:a.path},null,8,Wz),[[_t,n.selectedEndpoints]]),d("span",zz,J(a.name),1),d("span",Kz,J(a.path),1)]))),128))])])):_e("",!0),n.selectedApiTypes.nativeAeries?(B(),V("div",qz,[e[34]||(e[34]=d("h6",null,"Native Aeries v5 Endpoints",-1)),d("div",Xz,[(B(!0),V(Re,null,Ve(n.nativeAeriesEndpoints,a=>(B(),V("label",{key:a.path,class:"endpoint-checkbox"},[we(d("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=o=>n.selectedEndpoints=o),value:a.path},null,8,Yz),[[_t,n.selectedEndpoints]]),d("span",Jz,J(a.name),1),d("span",Qz,J(a.path),1)]))),128))])])):_e("",!0)])])):_e("",!0)]),d("div",Zz,[e[39]||(e[39]=d("h4",null,"Save/Load Configuration",-1)),e[40]||(e[40]=d("div",{class:"security-note"},[d("p",null,[d("strong",null," Security:"),Oe(" Your API credentials are encrypted and stored securely in Firebase. Only you can access your saved configuration.")])],-1)),d("div",eK,[d("button",{onClick:e[12]||(e[12]=(...a)=>n.saveConfiguration&&n.saveConfiguration(...a)),disabled:!n.canConnect||n.storageLoading,class:"btn-save"},J(n.storageLoading?" Saving...":" Save Configuration"),9,tK),d("button",{onClick:e[13]||(e[13]=(...a)=>n.loadConfiguration&&n.loadConfiguration(...a)),disabled:n.storageLoading,class:"btn-load"},J(n.storageLoading?" Loading...":" Load Saved Configuration"),9,rK),d("button",{onClick:e[14]||(e[14]=(...a)=>n.clearConfiguration&&n.clearConfiguration(...a)),disabled:n.storageLoading,class:"btn-clear"},J(n.storageLoading?" Deleting...":" Clear Saved Configuration"),9,nK)]),n.configStatus?(B(),V("div",{key:0,class:Ze(["config-status",{error:n.configError}])},J(n.configStatus),3)):_e("",!0)])]),n.connectionStatus?(B(),V("div",{key:0,class:Ze(["status-message",{error:n.isError}])},J(n.connectionStatus),3)):_e("",!0),n.isConnected?(B(),V("div",sK,[e[43]||(e[43]=d("h4",null,"Test API Endpoints",-1)),d("div",aK,[e[41]||(e[41]=d("h5",null,"Special Education Data (IEP/504)",-1)),d("div",iK,[d("button",{onClick:e[15]||(e[15]=(...a)=>n.handleTestSpecialEd&&n.handleTestSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-special"},J(n.isLoading?"Testing...":"Test All SPED Endpoints"),9,oK),d("button",{onClick:e[16]||(e[16]=(...a)=>n.handleTestOneRosterSpecialEd&&n.handleTestOneRosterSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster for SPED Data ",8,lK),d("button",{onClick:e[17]||(e[17]=(...a)=>n.handleTestStudentsWithSpecialEd&&n.handleTestStudentsWithSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster SPED Filters ",8,cK),d("button",{onClick:e[18]||(e[18]=a=>t.handleTestEndpoint("/api/special-education/students")),disabled:n.isLoading,class:"btn-test-special"}," SPED Students ",8,uK),d("button",{onClick:e[19]||(e[19]=a=>t.handleTestEndpoint("/api/special-education/ieps")),disabled:n.isLoading,class:"btn-test-special"}," IEP Records ",8,dK),d("button",{onClick:e[20]||(e[20]=a=>t.handleTestEndpoint("/api/special-education/504-plans")),disabled:n.isLoading,class:"btn-test-special"}," 504 Plans ",8,fK)])]),d("div",hK,[(B(!0),V(Re,null,Ve(n.availableEndpoints,a=>(B(),V("div",{key:a.path,class:"endpoint-card"},[d("h5",null,J(a.name),1),d("p",pK,J(a.path),1),d("p",mK,J(a.description),1),d("button",{onClick:o=>n.testEndpoint(a.path),disabled:n.isLoading,class:"btn-test"},J(n.isLoading&&n.currentEndpoint===a.path?"Testing...":"Test"),9,gK)]))),128))]),n.apiResults?(B(),V("div",vK,[e[42]||(e[42]=d("h4",null,"API Response",-1)),d("div",xK,[d("span",yK,"Endpoint: "+J(n.currentEndpoint),1),n.responseTime?(B(),V("span",EK,"Response time: "+J(n.responseTime)+"ms",1)):_e("",!0)]),d("div",_K,[d("pre",null,J(JSON.stringify(n.apiResults,null,2)),1)])])):_e("",!0)])):_e("",!0),n.canShowSchoolDropdown?(B(),V("div",bK,[e[45]||(e[45]=d("label",null,"School",-1)),we(d("select",{"onUpdate:modelValue":e[21]||(e[21]=a=>n.selectedSchoolId=a)},[e[44]||(e[44]=d("option",{value:"",disabled:""},"Select a school",-1)),(B(!0),V(Re,null,Ve(n.schools,a=>(B(),V("option",{key:a.sourcedId||a.id||a.schoolId,value:a.sourcedId||a.id||a.schoolId},J(a.name||a.title||a.schoolName),9,SK))),128))],512),[[mr,n.selectedSchoolId]])])):_e("",!0),n.canShowClasses?(B(),V("div",TK,[e[47]||(e[47]=d("label",null,"Case Manager Classes",-1)),n.classesFetchError?(B(),V("div",CK,[e[46]||(e[46]=d("p",{class:"error"},"Could not fetch classes. Enter class names manually (comma separated):",-1)),we(d("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>n.manualClassInput=a),type:"text",placeholder:"Class1, Class2, ..."},null,512),[[Je,n.manualClassInput]])])):(B(),V("div",AK,[we(d("select",{"onUpdate:modelValue":e[22]||(e[22]=a=>n.selectedClassIds=a),multiple:""},[(B(!0),V(Re,null,Ve(n.classes,a=>(B(),V("option",{key:a.sourcedId||a.id||a.classId,value:a.sourcedId||a.id||a.classId},J(a.title||a.name||a.className),9,wK))),128))],512),[[mr,n.selectedClassIds]])]))])):_e("",!0)])}const kK=yt(Sz,[["render",IK],["__scopeId","data-v-0f37c4fc"]]),wl=se(null);function xd(){const t=new Promise(e=>{const r=Kh($t,async n=>{if(n)try{const s=Qe(Xe,"users",n.uid),i=await tr(s);i.exists()?wl.value={uid:n.uid,email:n.email,displayName:n.displayName,...i.data()}:(console.warn(`User ${n.uid} exists in Auth but not in users collection`),wl.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null})}catch(s){console.error("Error fetching user document:",s),wl.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null}}else wl.value=null;e(wl.value),r()})});return{currentUser:wl,waitForAuthInit:t}}const DK={key:0,class:"app-settings-panel"},PK={class:"settings-section"},RK={class:"grades-checkboxes"},FK=["checked"],OK=["value"],NK={class:"settings-section"},MK={key:0,class:"class-service-fieldset"},LK={class:"checkbox-inline-group"},BK=["value"],UK={key:1,class:"class-service-fieldset"},$K={class:"checkbox-inline-group"},VK=["value"],HK={key:2,class:"class-service-fieldset"},jK={class:"checkbox-inline-group"},GK=["value"],WK={key:3,class:"class-service-fieldset"},zK={class:"checkbox-inline-group"},KK={key:4,class:"class-service-fieldset"},qK={class:"checkbox-inline-group"},XK=["onClick"],YK={class:"checkbox-inline-group"},JK=["onClick"],QK=["onClick"],ZK={class:"add-class-service"},eq={class:"custom-chips"},tq=["onClick"],rq={class:"settings-section"},nq={class:"service-providers-defaults"},sq=["value"],aq={class:"service-providers-custom"},iq={class:"custom-provider-inputs"},oq={class:"custom-chips"},lq=["onClick"],cq={class:"settings-section"},uq={class:"periods-controls"},dq={class:"period-number-control"},fq={key:0,class:"period-labels"},hq={class:"period-labels-grid"},pq=["onUpdate:modelValue","placeholder"],mq={key:1,class:"period-preview"},gq={class:"settings-section"},vq={class:"admin-action-btns"},xq=["disabled"],yq=["disabled"],Eq=["disabled"],_q={key:1,class:"not-admin"},bq={__name:"AppSettings",setup(t){const{currentUser:e}=xd(),r=Ae(()=>{var S;return((S=e.value)==null?void 0:S.role)||null}),n=Ae(()=>["admin","administrator","administrator_504_CM","sped_chair"].includes(r.value)),s=[{value:"K",label:"K"},...Array.from({length:12},(S,k)=>({value:(k+1).toString(),label:(k+1).toString()}))],i=["English","Math","History","Science"],a=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],{loadAppSettings:o,saveAppSettings:l}=Ws(),c=se(!1),u=se(!1),f=se(""),h=se(!1),p=se(""),m=se(""),g=se({grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]}),v=()=>{const S=pb(g.value.numPeriods,{min:1,max:15,decimals:0});if(S===null)return A("Invalid number of periods. Must be between 1 and 15.",!0),!1;g.value.numPeriods=S;for(let k=0;k<g.value.numPeriods;k++){g.value.periodLabels[k]||(g.value.periodLabels[k]=`Per${k+1}`);const w=fn(g.value.periodLabels[k],{trim:!0,maxLength:3,removeDangerous:!0}),D=Wr(w);if(!D.isSafe)return A(`Security threat detected in period ${k+1} label: ${D.threats.join(", ")}`,!0),!1;const N=vd(w,{max:3,fieldName:`Period ${k+1} label`});if(!N.isValid)return A(N.error,!0),!1;g.value.periodLabels[k]=w}if(g.value.customServiceProviders)for(let k=0;k<g.value.customServiceProviders.length;k++){const w=g.value.customServiceProviders[k];if(w.name){const D=fn(w.name,{trim:!0,maxLength:100,removeDangerous:!0}),N=Wr(D);if(!N.isSafe)return A(`Security threat detected in custom provider ${k+1}: ${N.threats.join(", ")}`,!0),!1;w.name=D}if(w.abbreviation){const D=fn(w.abbreviation,{trim:!0,maxLength:10,removeDangerous:!0}),N=Wr(D);if(!N.isSafe)return A(`Security threat detected in custom provider abbreviation ${k+1}: ${N.threats.join(", ")}`,!0),!1;w.abbreviation=D}}return!0},x=Ae(()=>a),y=Ae(()=>s.every(S=>g.value.grades.includes(S.value))),_=S=>{S.target.checked?g.value.grades=s.map(k=>k.value):g.value.grades=[]},I=()=>{if(!p.value.trim()||!m.value.trim()){A("Both name and abbreviation are required for custom service providers",!0);return}if(g.value.customServiceProviders.some(k=>k.abbreviation.toLowerCase()===m.value.toLowerCase())){A("A service provider with this abbreviation already exists",!0);return}g.value.customServiceProviders.push({name:p.value.trim(),abbreviation:m.value.trim()}),p.value="",m.value="",A("Custom service provider added successfully")},R=S=>{g.value.customServiceProviders.splice(S,1)};Vt(()=>g.value.numPeriods,S=>{const k=pb(S,{min:1,max:15,decimals:0});if(k!==null&&k!==S&&(g.value.numPeriods=k),g.value.periodLabels.length<g.value.numPeriods)for(let w=g.value.periodLabels.length;w<g.value.numPeriods;w++)g.value.periodLabels.push(`Per${w+1}`)}),Vt(()=>g.value.periodLabels,S=>{S.forEach((k,w)=>{k&&k.length>3&&(g.value.periodLabels[w]=k.substring(0,3))})},{deep:!0});const A=(S,k=!1)=>{f.value=S,h.value=k,setTimeout(()=>{f.value="",h.value=!1},5e3)},E=async(S=!1)=>{c.value=!0;try{const k=await o();if(k){if(g.value={...g.value,...k},!g.value.periodLabels||g.value.periodLabels.length<g.value.numPeriods){g.value.periodLabels=[];for(let w=0;w<g.value.numPeriods;w++)g.value.periodLabels[w]=g.value.periodLabels[w]||`Per${w+1}`}S&&A("Settings loaded successfully")}}catch(k){A("Error loading settings",!0),console.error("Load settings error:",k)}finally{c.value=!1}},T=async()=>{if(!ws("saveAppSettings",10,6e4).allowed){A("Too many save requests. Please wait before saving again.",!0);return}if(v()){u.value=!0;try{await l(g.value),A("Settings saved successfully")}catch(k){A("Error saving settings",!0),console.error("Save settings error:",k)}finally{u.value=!1}}},b=()=>{confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(g.value={grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]},A("Settings reset to defaults"))};return Ut(()=>{E()}),(S,k)=>n.value?(B(),V("div",DK,[k[33]||(k[33]=d("h2",null,"App Settings",-1)),d("form",{onSubmit:mn(T,["prevent"])},[d("section",PK,[d("fieldset",null,[k[17]||(k[17]=d("legend",null,"Grades",-1)),d("div",RK,[d("label",null,[d("input",{type:"checkbox",checked:y.value,onChange:_},null,40,FK),k[16]||(k[16]=d("span",null,"Select All",-1))]),(B(),V(Re,null,Ve(s,w=>d("label",{key:w.value},[we(d("input",{type:"checkbox","onUpdate:modelValue":k[0]||(k[0]=D=>g.value.grades=D),value:w.value},null,8,OK),[[_t,g.value.grades]]),d("span",null,J(w.label),1)])),64))])])]),d("section",NK,[k[26]||(k[26]=d("h3",null,"Class Services",-1)),g.value.classServices[0]&&g.value.classServices[0].enabledSubcategories?(B(),V("div",MK,[d("fieldset",null,[k[18]||(k[18]=d("legend",null,"SDC",-1)),d("div",LK,[(B(),V(Re,null,Ve(i,w=>d("label",{key:w},[we(d("input",{type:"checkbox","onUpdate:modelValue":k[1]||(k[1]=D=>g.value.classServices[0].enabledSubcategories=D),value:w},null,8,BK),[[_t,g.value.classServices[0].enabledSubcategories]]),Oe(" "+J(w),1)])),64))])])])):_e("",!0),g.value.classServices[1]&&g.value.classServices[1].enabledSubcategories?(B(),V("div",UK,[d("fieldset",null,[k[19]||(k[19]=d("legend",null,"Co-teach",-1)),d("div",$K,[(B(),V(Re,null,Ve(i,w=>d("label",{key:w},[we(d("input",{type:"checkbox","onUpdate:modelValue":k[2]||(k[2]=D=>g.value.classServices[1].enabledSubcategories=D),value:w},null,8,VK),[[_t,g.value.classServices[1].enabledSubcategories]]),Oe(" "+J(w),1)])),64))])])])):_e("",!0),g.value.classServices[2]&&g.value.classServices[2].enabledSubcategories?(B(),V("div",HK,[d("fieldset",null,[k[20]||(k[20]=d("legend",null,"RSP",-1)),d("div",jK,[(B(),V(Re,null,Ve(i,w=>d("label",{key:w},[we(d("input",{type:"checkbox","onUpdate:modelValue":k[3]||(k[3]=D=>g.value.classServices[2].enabledSubcategories=D),value:w},null,8,GK),[[_t,g.value.classServices[2].enabledSubcategories]]),Oe(" "+J(w),1)])),64))])])])):_e("",!0),g.value.classServices[3]&&g.value.classServices[3].enabledSubcategories?(B(),V("div",WK,[d("fieldset",null,[k[22]||(k[22]=d("legend",null,"Directed Studies",-1)),d("div",zK,[d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":k[4]||(k[4]=w=>g.value.classServices[3].enabledSubcategories=w),value:"Directed Studies"},null,512),[[_t,g.value.classServices[3].enabledSubcategories]]),k[21]||(k[21]=Oe(" Directed Studies "))])])])])):_e("",!0),g.value.classServices[4]&&g.value.classServices[4].enabledSubcategories?(B(),V("div",KK,[d("fieldset",null,[k[24]||(k[24]=d("legend",null,"FA",-1)),d("div",qK,[d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":k[5]||(k[5]=w=>g.value.classServices[4].enabledSubcategories=w),value:"FA"},null,512),[[_t,g.value.classServices[4].enabledSubcategories]]),k[23]||(k[23]=Oe(" FA "))])])])])):_e("",!0),(B(!0),V(Re,null,Ve(g.value.classServices.slice(5),(w,D)=>(B(),V("div",{key:w.name,class:"class-service-fieldset"},[d("fieldset",null,[d("legend",null,[Oe(J(w.name)+" ",1),d("button",{type:"button",onClick:N=>S.removeClassService(D+5),title:"Remove Service"},"",8,XK)]),d("div",YK,[(B(!0),V(Re,null,Ve(w.subcategories,(N,F)=>(B(),V("label",{key:N},[k[25]||(k[25]=d("input",{type:"checkbox",checked:!0,disabled:""},null,-1)),Oe(" "+J(N)+" ",1),d("button",{type:"button",onClick:P=>S.removeSubcategory(D+5,F),title:"Remove Subcategory"},"",8,JK)]))),128)),d("button",{type:"button",onClick:N=>S.addSubcategory(D+5)},"+ Add Subcategory",8,QK)])])]))),128)),d("div",ZK,[we(d("input",{type:"text","onUpdate:modelValue":k[6]||(k[6]=w=>S.newServiceName=w),placeholder:"New Service Name",maxlength:"18"},null,512),[[Je,S.newServiceName]]),we(d("input",{type:"text","onUpdate:modelValue":k[7]||(k[7]=w=>S.newServiceSubcat=w),placeholder:"Add Subcategory",maxlength:"18",onKeyup:k[8]||(k[8]=dA((...w)=>S.addNewServiceSubcat&&S.addNewServiceSubcat(...w),["enter"]))},null,544),[[Je,S.newServiceSubcat]]),d("button",{type:"button",onClick:k[9]||(k[9]=(...w)=>S.addNewServiceSubcat&&S.addNewServiceSubcat(...w))},"+ Add Subcategory"),d("div",eq,[(B(!0),V(Re,null,Ve(S.newServiceSubcats,(w,D)=>(B(),V("span",{key:w,class:"chip"},[Oe(J(w)+" ",1),d("button",{type:"button",onClick:N=>S.removeNewServiceSubcat(D)},"",8,tq)]))),128))]),d("button",{type:"button",onClick:k[10]||(k[10]=(...w)=>S.addClassService&&S.addClassService(...w))},"+ Add Class Service")])]),d("section",rq,[d("fieldset",null,[k[28]||(k[28]=d("legend",null,"Service Providers",-1)),d("div",nq,[(B(!0),V(Re,null,Ve(x.value,w=>(B(),V("label",{key:w.abbreviation},[we(d("input",{type:"checkbox","onUpdate:modelValue":k[11]||(k[11]=D=>g.value.serviceProviders=D),value:w.abbreviation},null,8,sq),[[_t,g.value.serviceProviders]]),d("span",null,J(w.name)+" ("+J(w.abbreviation)+")",1)]))),128))]),d("div",aq,[k[27]||(k[27]=d("label",null,"Add Custom Service Provider:",-1)),d("div",iq,[we(d("input",{type:"text","onUpdate:modelValue":k[12]||(k[12]=w=>p.value=w),placeholder:"Full Name",maxlength:"100"},null,512),[[Je,p.value]]),we(d("input",{type:"text","onUpdate:modelValue":k[13]||(k[13]=w=>m.value=w),placeholder:"Abbreviation",maxlength:"10"},null,512),[[Je,m.value]]),d("button",{type:"button",onClick:I},"Add")]),d("div",oq,[(B(!0),V(Re,null,Ve(g.value.customServiceProviders,(w,D)=>(B(),V("span",{key:D,class:"chip"},[Oe(J(w.name)+" ("+J(w.abbreviation)+") ",1),d("button",{type:"button",onClick:N=>R(D)},"",8,lq)]))),128))])])])]),d("section",cq,[d("fieldset",null,[k[32]||(k[32]=d("legend",null,"Periods",-1)),d("div",uq,[d("div",dq,[d("label",null,[k[29]||(k[29]=Oe(" Number of Periods (max 15): ")),we(d("input",{type:"number","onUpdate:modelValue":k[14]||(k[14]=w=>g.value.numPeriods=w),min:"1",max:"15",class:"period-number-input"},null,512),[[Je,g.value.numPeriods]])])]),g.value.numPeriods>0?(B(),V("div",fq,[k[30]||(k[30]=d("h4",null,"Period Labels (3 chars max each):",-1)),d("div",hq,[(B(!0),V(Re,null,Ve(g.value.numPeriods,w=>(B(),V("div",{key:w,class:"period-label-item"},[d("label",null,[Oe(" Period "+J(w)+": ",1),we(d("input",{type:"text","onUpdate:modelValue":D=>g.value.periodLabels[w-1]=D,maxlength:"3",placeholder:`Per${w}`,class:"period-label-input"},null,8,pq),[[Je,g.value.periodLabels[w-1]]])])]))),128))])])):_e("",!0),g.value.numPeriods>0?(B(),V("div",mq,[k[31]||(k[31]=d("strong",null,"Preview:",-1)),(B(!0),V(Re,null,Ve(g.value.numPeriods,w=>(B(),V("span",{key:w,class:"period-preview-item"},J(g.value.periodLabels[w-1]||`Per${w}`),1))),128))])):_e("",!0)])])]),d("section",gq,[d("div",vq,[d("button",{type:"submit",disabled:u.value||c.value,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}}," Save Settings",8,xq),d("button",{type:"button",onClick:k[15]||(k[15]=()=>E(!0)),disabled:c.value,class:"admin-action-btn info",style:{"min-width":"100px","max-width":"100px"}}," Load",8,yq),d("button",{type:"button",onClick:b,disabled:c.value,class:"admin-action-btn warning",style:{"min-width":"100px","max-width":"100px"}}," Reset",8,Eq)]),f.value?(B(),V("div",{key:0,class:Ze(["status-message",{error:h.value,success:!h.value}])},J(f.value),3)):_e("",!0)])],32)])):(B(),V("div",_q,k[34]||(k[34]=[d("h2",null,"App Settings",-1),d("p",null,"Access denied. You must be an admin to view this page.",-1)])))}},Sq=yt(bq,[["__scopeId","data-v-1689db17"]]),Tq={class:"admin-aide-assignment"},Aq={class:"header"},wq={class:"header-actions"},Cq=["disabled"],Iq={key:0},kq={key:1},Dq={class:"content"},Pq={key:0,class:"error-message"},Rq={key:1,class:"error-message"},Fq={key:2,class:"loading"},Oq={key:3,class:"schedule-container"},Nq={class:"aide-schedule-table"},Mq={class:"aide-name"},Lq=["value","onChange"],Bq=["value"],Uq={class:"assignment-buttons"},$q=["onClick"],Vq=["onClick"],Hq={class:"direct-assignment-cell"},jq=["value","onChange"],Gq=["value"],Wq={class:"assignment-buttons"},zq=["onClick"],Kq=["onClick"],qq={__name:"AdminAideAssignment",setup(t){const e=Si(),{userList:r,fetchUsers:n}=La(),{students:s,fetchStudents:i}=Ma(),a=ga(),{aideAssignment:o,loadAideAssignments:l,saveAllAideAssignments:c}=bx(),{appSettings:u,loadAppSettings:f}=Ws(),h=se(!0),p=se(!1),m=Ae(()=>{var P;const F=(P=a.currentUser)==null?void 0:P.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(F)}),g=Ae(()=>{var F;return((F=r.value)==null?void 0:F.filter(P=>P.role==="paraeducator"))||[]}),v=Ae(()=>{var F;return((F=r.value)==null?void 0:F.filter(P=>P.role==="teacher"))||[]}),x=Ae(()=>{var P;const F=((P=u.value)==null?void 0:P.numPeriods)||7;return Array.from({length:F},(O,M)=>M+1)});function y(F){return F.id}function _(F){return F.id}function I(F,P){if(!o.value[F])return[""];o.value[F].classAssignment||(o.value[F].classAssignment={});let O=o.value[F].classAssignment[P];return Array.isArray(O)?O.length?O:[""]:typeof O=="string"&&O!==""?[O]:[""]}function R(F){if(!o.value[F])return[""];let P=o.value[F].directAssignment;return Array.isArray(P)?P.length?P:[""]:typeof P=="string"&&P!==""?[P]:[""]}function A(F,P,O,M){o.value[F]||(o.value[F]={classAssignment:{},directAssignment:[]}),o.value[F].classAssignment||(o.value[F].classAssignment={});let U=I(F,P);for(U[O]=M;U.length>1&&U[U.length-1]==="";)U.pop();o.value[F].classAssignment[P]=[...U]}function E(F,P,O){o.value[F]||(o.value[F]={classAssignment:{},directAssignment:[]});let M=R(F);for(M[P]=O;M.length>1&&M[M.length-1]==="";)M.pop();o.value[F].directAssignment=[...M]}function T(F,P){o.value[F]||(o.value[F]={classAssignment:{},directAssignment:[]}),o.value[F].classAssignment||(o.value[F].classAssignment={});let O=I(F,P);O.push(""),o.value[F].classAssignment[P]=[...O]}function b(F,P,O){if(!o.value[F]||!o.value[F].classAssignment)return;let M=I(F,P);M.length<=1||(M.splice(O,1),o.value[F].classAssignment[P]=[...M])}function S(F){o.value[F]||(o.value[F]={classAssignment:{},directAssignment:[]});let P=R(F);P.push(""),o.value[F].directAssignment=[...P]}function k(F,P){if(!o.value[F])return;let O=R(F);O.length<=1||(O.splice(P,1),o.value[F].directAssignment=[...O])}async function w(){try{h.value=!0,await Promise.all([n(),i(),l(),f()]),h.value=!1}catch(F){console.error("Error loading data:",F),h.value=!1}}async function D(){try{p.value=!0,await c(),p.value=!1}catch(F){console.error("Error saving aide assignments:",F),p.value=!1}}function N(){e.push("/admin")}return Ut(w),(F,P)=>(B(),V("div",Tq,[d("div",Aq,[P[3]||(P[3]=d("h1",null,"Aide Assignment Management",-1)),d("div",wq,[d("button",{onClick:D,class:"btn btn-primary",disabled:p.value},[p.value?(B(),V("span",Iq,"")):(B(),V("span",kq,"")),Oe(" "+J(p.value?"Saving...":"Save Assignments"),1)],8,Cq),d("button",{onClick:N,class:"btn btn-secondary"},P[2]||(P[2]=[d("span",null,"",-1),Oe(" Back ")]))])]),d("div",Dq,[Z(a).currentUser?m.value?h.value?(B(),V("div",Fq," Loading aide assignments... ")):(B(),V("div",Oq,[d("table",Nq,[d("thead",null,[d("tr",null,[P[8]||(P[8]=d("th",null,"Aide Name",-1)),(B(!0),V(Re,null,Ve(x.value,O=>(B(),V("th",{key:O,class:"period-header"}," Period "+J(O),1))),128)),P[9]||(P[9]=d("th",null,"Direct Assignment",-1))])]),d("tbody",null,[(B(!0),V(Re,null,Ve(g.value,O=>(B(),V("tr",{key:O.id,class:"aide-row"},[d("td",Mq,J(O.name||O.email),1),(B(!0),V(Re,null,Ve(x.value,M=>(B(),V("td",{key:M,class:"period-cell"},[(B(!0),V(Re,null,Ve(I(y(O),M),(U,z)=>(B(),V("div",{key:"t-"+z,class:"assignment-row"},[d("select",{value:U,onChange:j=>A(y(O),M,z,j.target.value),class:"teacher-select"},[P[10]||(P[10]=d("option",{value:""},"No Assignment",-1)),(B(!0),V(Re,null,Ve(v.value,j=>(B(),V("option",{key:_(j),value:_(j)},J(j.name||j.email),9,Bq))),128))],40,Lq),d("div",Uq,[I(y(O),M).length>1?(B(),V("button",{key:0,onClick:j=>b(y(O),M,z),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,$q)):_e("",!0),z===I(y(O),M).length-1?(B(),V("button",{key:1,onClick:j=>T(y(O),M),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,Vq)):_e("",!0)])]))),128))]))),128)),d("td",Hq,[(B(!0),V(Re,null,Ve(R(y(O)),(M,U)=>(B(),V("div",{key:"d-"+U,class:"assignment-row"},[d("select",{value:M,onChange:z=>E(y(O),U,z.target.value),class:"student-select"},[P[11]||(P[11]=d("option",{value:""},"No Assignment",-1)),(B(!0),V(Re,null,Ve(Z(s),z=>(B(),V("option",{key:z.id,value:z.id},J(Z(dt)(z,"firstName"))+" "+J(Z(dt)(z,"lastName")),9,Gq))),128))],40,jq),d("div",Wq,[R(y(O)).length>1?(B(),V("button",{key:0,onClick:z=>k(y(O),U),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,zq)):_e("",!0),U===R(y(O)).length-1?(B(),V("button",{key:1,onClick:z=>S(y(O)),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,Kq)):_e("",!0)])]))),128))])]))),128))])])])):(B(),V("div",Rq,[P[6]||(P[6]=d("h2",null,"Access Denied",-1)),P[7]||(P[7]=d("p",null,"You do not have permission to access this page.",-1)),d("button",{onClick:P[1]||(P[1]=O=>Z(e).push("/")),class:"btn btn-primary"},"Go Home")])):(B(),V("div",Pq,[P[4]||(P[4]=d("h2",null,"Authentication Required",-1)),P[5]||(P[5]=d("p",null,"Please log in to access this page.",-1)),d("button",{onClick:P[0]||(P[0]=O=>Z(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},VI=yt(qq,[["__scopeId","data-v-3361cb08"]]);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var HI=1252,Xq=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],kx={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Dx=function(t){Xq.indexOf(t)!=-1&&(HI=kx[0]=t)};function Yq(){Dx(1252)}var aa=function(t){Dx(t)};function jI(){aa(1200),Yq()}function nS(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Jq(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function GI(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var hu=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Jq(t.slice(2)):e==254&&r==255?GI(t.slice(2)):e==65279?t.slice(1):t},Lf=function(e){return String.fromCharCode(e)},sS=function(e){return String.fromCharCode(e)},yd,qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function aS(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=qi.charAt(i)+qi.charAt(a)+qi.charAt(o)+qi.charAt(l);return e}function ks(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=qi.indexOf(t.charAt(c++)),a=qi.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=qi.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=qi.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var Jt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ul=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function uo(t){return Jt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function iS(t){return Jt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var na=function(e){return Jt?ul(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function dl(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Px(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return Px(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Gi=Jt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:ul(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Qq(t){for(var e=[],r=0,n=t.length+250,s=uo(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=uo(65535),n=65530)}return e.push(s.slice(0,r)),Gi(e)}var ls=/\u0000/g,pu=/[\u0001-\u0006]/g;function sc(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ia(t,e){var r=""+t;return r.length>=e?r:Lr("0",e-r.length)+r}function Rx(t,e){var r=""+t;return r.length>=e?r:Lr(" ",e-r.length)+r}function ih(t,e){var r=""+t;return r.length>=e?r:r+Lr(" ",e-r.length)}function Zq(t,e){var r=""+Math.round(t);return r.length>=e?r:Lr("0",e-r.length)+r}function eX(t,e){var r=""+t;return r.length>=e?r:Lr("0",e-r.length)+r}var oS=Math.pow(2,32);function Cl(t,e){if(t>oS||t<-oS)return Zq(t,e);var r=Math.round(t);return eX(r,e)}function oh(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var lS=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Ym=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function tX(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Mt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},cS={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},rX={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function lh(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,u=0,f=Math.floor(s);c<e&&(f=Math.floor(s),o=f*a+i,u=f*c+l,!(s-f<5e-8));)s=1/(s-f),i=a,a=o,l=c,c=u;if(u>e&&(c>e?(u=l,o=i):(u=c,o=a)),!r)return[0,n*o,u];var h=Math.floor(n*o/u);return[h,n*o-h*u,u]}function Fo(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=lX(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var WI=new Date(1899,11,31,0,0,0),nX=WI.getTime(),sX=new Date(1900,2,1,0,0,0);function zI(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=sX&&(r+=24*60*60*1e3),(r-(nX+(t.getTimezoneOffset()-WI.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Fx(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function aX(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function iX(t){var e=t<0?12:11,r=Fx(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function oX(t){var e=Fx(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Ed(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=iX(t):e===10?r=t.toFixed(10).substr(0,12):r=oX(t),Fx(aX(r.toUpperCase()))}function Qo(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Ed(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Hs(14,zI(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function lX(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function cX(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return Ym[r.m-1][1];case 5:return Ym[r.m-1][0];default:return Ym[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return lS[r.q][0];default:return lS[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ia(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=ia(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?ia(l,c):"";return u}function Xi(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var KI=/%/g;function uX(t,e,r){var n=e.replace(KI,""),s=e.length-n.length;return oi(t,n,r*Math.pow(10,2*s))+Lr("%",s)}function dX(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return oi(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function qI(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+qI(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var XI=/# (\?+)( ?)\/( ?)(\d+)/;function fX(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?Lr(" ",t[1].length+1+t[4].length):Rx(a,t[1].length)+t[2]+"/"+t[3]+ia(o,t[4].length))}function hX(t,e,r){return r+(e===0?"":""+e)+Lr(" ",t[1].length+2+t[4].length)}var YI=/^#*0*\.([0#]+)/,JI=/\).*[0#]/,QI=/\(###\) ###\\?-####/;function rs(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function uS(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function dS(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function pX(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function mX(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Fs(t,e,r){if(t.charCodeAt(0)===40&&!e.match(JI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Fs("n",n,r):"("+Fs("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return dX(t,e,r);if(e.indexOf("%")!==-1)return uX(t,e,r);if(e.indexOf("E")!==-1)return qI(e,r);if(e.charCodeAt(0)===36)return"$"+Fs(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Cl(l,e.length);if(e.match(/^[#?]+$/))return s=Cl(r,0),s==="0"&&(s=""),s.length>e.length?s:rs(e.substr(0,e.length-s.length))+s;if(i=e.match(XI))return fX(i,l,c);if(e.match(/^#+0+$/))return c+Cl(l,e.length-e.indexOf("0"));if(i=e.match(YI))return s=uS(r,i[1].length).replace(/^([^\.]+)$/,"$1."+rs(i[1])).replace(/\.$/,"."+rs(i[1])).replace(/\.(\d*)$/,function(m,g){return"."+g+Lr("0",rs(i[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+uS(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Xi(Cl(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Fs(t,e,-r):Xi(""+(Math.floor(r)+pX(r,i[1].length)))+"."+ia(dS(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return Fs(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=sc(Fs(t,e.replace(/[\\-]/g,""),r)),a=0,sc(sc(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return a<s.length?s.charAt(a++):m==="0"?"0":""}));if(e.match(QI))return s=Fs(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=lh(l,Math.pow(10,a)-1,!1),s=""+c,u=oi("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=ih(o[2],a),u.length<i[4].length&&(u=rs(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=lh(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Rx(o[1],a)+i[2]+"/"+i[3]+ih(o[2],a):Lr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=Cl(r,0),e.length<=s.length?s:rs(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var f=e.indexOf(".")-a,h=e.length-s.length-f;return rs(e.substr(0,f)+s+e.substr(e.length-h))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=dS(r,i[1].length),r<0?"-"+Fs(t,e,-r):Xi(mX(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?ia(0,3-m.length):"")+m})+"."+ia(a,i[1].length);switch(e){case"###,##0.00":return Fs(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Xi(Cl(l,0));return p!=="0"?c+p:"";case"###,###.00":return Fs(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Fs(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function gX(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return oi(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function vX(t,e,r){var n=e.replace(KI,""),s=e.length-n.length;return oi(t,n,r*Math.pow(10,2*s))+Lr("%",s)}function ZI(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+ZI(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function _a(t,e,r){if(t.charCodeAt(0)===40&&!e.match(JI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_a("n",n,r):"("+_a("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return gX(t,e,r);if(e.indexOf("%")!==-1)return vX(t,e,r);if(e.indexOf("E")!==-1)return ZI(e,r);if(e.charCodeAt(0)===36)return"$"+_a(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+ia(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:rs(e.substr(0,e.length-s.length))+s;if(i=e.match(XI))return hX(i,l,c);if(e.match(/^#+0+$/))return c+ia(l,e.length-e.indexOf("0"));if(i=e.match(YI))return s=(""+r).replace(/^([^\.]+)$/,"$1."+rs(i[1])).replace(/\.$/,"."+rs(i[1])),s=s.replace(/\.(\d*)$/,function(m,g){return"."+g+Lr("0",rs(i[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Xi(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_a(t,e,-r):Xi(""+r)+"."+Lr("0",i[1].length);if(i=e.match(/^#,#*,#0/))return _a(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=sc(_a(t,e.replace(/[\\-]/g,""),r)),a=0,sc(sc(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return a<s.length?s.charAt(a++):m==="0"?"0":""}));if(e.match(QI))return s=_a(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=lh(l,Math.pow(10,a)-1,!1),s=""+c,u=oi("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=ih(o[2],a),u.length<i[4].length&&(u=rs(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=lh(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Rx(o[1],a)+i[2]+"/"+i[3]+ih(o[2],a):Lr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:rs(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var f=e.indexOf(".")-a,h=e.length-s.length-f;return rs(e.substr(0,f)+s+e.substr(e.length-h))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+_a(t,e,-r):Xi(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?ia(0,3-m.length):"")+m})+"."+ia(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Xi(""+l);return p!=="0"?c+p:"";default:if(e.match(/\.[0#?]*$/))return _a(t,e.slice(0,e.lastIndexOf(".")),r)+rs(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function oi(t,e,r){return(r|0)===r?_a(t,e,r):Fs(t,e,r)}function xX(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var e4=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Lc(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":oh(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(e4))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function yX(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,u,f,h="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!oh(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(f=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(f);s[s.length]={t:"t",v:i},++a;break;case"\\":var p=t.charAt(++a),m=p==="("||p===")"?p:"t";s[s.length]={t:m,v:p},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=Fo(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Fo(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var g={t:o,v:o};if(c==null&&(c=Fo(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(g.v=c.H>=12?"P":"A"),g.t="T",h="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(g.v=c.H>=12?"PM":"AM"),g.t="T",a+=5,h="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(g.v=c.H>=12?"":""),g.t="T",a+=5,h="h"):(g.t="t",++a),c==null&&g.t==="T")return"";s[s.length]=g,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(e4)){if(c==null&&(c=Fo(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Lc(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var v=0,x=0,y;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=h,l="h",v<1&&(v=1);break;case"s":(y=s[a].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[a].v.match(/[Hh]/)&&(v=1),v<2&&s[a].v.match(/[Mm]/)&&(v=2),v<3&&s[a].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var _="",I;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=cX(s[a].t.charCodeAt(0),s[a].v,c,x),s[a].t="t";break;case"n":case"?":for(I=a+1;s[I]!=null&&((o=s[I].t)==="?"||o==="D"||(o===" "||o==="t")&&s[I+1]!=null&&(s[I+1].t==="?"||s[I+1].t==="t"&&s[I+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[I].v==="/"||s[I].v===" "&&s[I+1]!=null&&s[I+1].t=="?"));)s[a].v+=s[I].v,s[I]={v:"",t:";"},++I;_+=s[a].v,a=I-1;break;case"G":s[a].t="t",s[a].v=Qo(e,r);break}var R="",A,E;if(_.length>0){_.charCodeAt(0)==40?(A=e<0&&_.charCodeAt(0)===45?-e:e,E=oi("n",_,A)):(A=e<0&&n>1?-e:e,E=oi("n",_,A),A<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),I=E.length-1;var T=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){T=a;break}var b=s.length;if(T===s.length&&E.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(I>=s[a].v.length-1?(I-=s[a].v.length,s[a].v=E.substr(I+1,s[a].v.length)):I<0?s[a].v="":(s[a].v=E.substr(0,I+1),I=-1),s[a].t="t",b=a);I>=0&&b<s.length&&(s[b].v=E.substr(0,I+1)+s[b].v)}else if(T!==s.length&&E.indexOf("E")===-1){for(I=E.indexOf(".")-1,a=T;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(u=s[a].v.indexOf(".")>-1&&a===T?s[a].v.indexOf(".")-1:s[a].v.length-1,R=s[a].v.substr(u+1);u>=0;--u)I>=0&&(s[a].v.charAt(u)==="0"||s[a].v.charAt(u)==="#")&&(R=E.charAt(I--)+R);s[a].v=R,s[a].t="t",b=a}for(I>=0&&b<s.length&&(s[b].v=E.substr(0,I+1)+s[b].v),I=E.indexOf(".")+1,a=T;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==T)){for(u=s[a].v.indexOf(".")>-1&&a===T?s[a].v.indexOf(".")+1:0,R=s[a].v.substr(0,u);u<s[a].v.length;++u)I<E.length&&(R+=E.charAt(I++));s[a].v=R,s[a].t="t",b=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(A=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=oi(s[a].t,s[a].v,A),s[a].t="t");var S="";for(a=0;a!==s.length;++a)s[a]!=null&&(S+=s[a].v);return S}var fS=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function hS(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function EX(t,e){var r=xX(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(fS),o=r[1].match(fS);return hS(e,a)?[n,r[0]]:hS(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function Hs(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Mt)[t],n==null&&(n=r.table&&r.table[cS[t]]||Mt[cS[t]]),n==null&&(n=rX[t]||"General");break}if(oh(n,0))return Qo(e,r);e instanceof Date&&(e=zI(e,r.date1904));var s=EX(n,e);if(oh(s[1]))return Qo(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return yX(s[1],e,r,s[0])}function $o(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Mt[r]==null){e<0&&(e=r);continue}if(Mt[r]==t){e=r;break}}e<0&&(e=391)}return Mt[e]=t,e}function t4(){Mt=tX()}var _X={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},r4=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function bX(t){var e=typeof t=="number"?Mt[t]:t;return e=e.replace(r4,"(\\d+)"),new RegExp("^"+e+"$")}function SX(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(r4)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:s=p;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?u:c+"T"+u}var TX=function(){var t={};t.version="1.2.0";function e(){for(var E=0,T=new Array(256),b=0;b!=256;++b)E=b,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,T[b]=E;return typeof Int32Array<"u"?new Int32Array(T):T}var r=e();function n(E){var T=0,b=0,S=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(S=0;S!=256;++S)k[S]=E[S];for(S=0;S!=256;++S)for(b=E[S],T=256+S;T<4096;T+=256)b=k[T]=b>>>8^E[b&255];var w=[];for(S=1;S!=16;++S)w[S-1]=typeof Int32Array<"u"?k.subarray(S*256,S*256+256):k.slice(S*256,S*256+256);return w}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],f=s[6],h=s[7],p=s[8],m=s[9],g=s[10],v=s[11],x=s[12],y=s[13],_=s[14];function I(E,T){for(var b=T^-1,S=0,k=E.length;S<k;)b=b>>>8^r[(b^E.charCodeAt(S++))&255];return~b}function R(E,T){for(var b=T^-1,S=E.length-15,k=0;k<S;)b=_[E[k++]^b&255]^y[E[k++]^b>>8&255]^x[E[k++]^b>>16&255]^v[E[k++]^b>>>24]^g[E[k++]]^m[E[k++]]^p[E[k++]]^h[E[k++]]^f[E[k++]]^u[E[k++]]^c[E[k++]]^l[E[k++]]^o[E[k++]]^a[E[k++]]^i[E[k++]]^r[E[k++]];for(S+=15;k<S;)b=b>>>8^r[(b^E[k++])&255];return~b}function A(E,T){for(var b=T^-1,S=0,k=E.length,w=0,D=0;S<k;)w=E.charCodeAt(S++),w<128?b=b>>>8^r[(b^w)&255]:w<2048?(b=b>>>8^r[(b^(192|w>>6&31))&255],b=b>>>8^r[(b^(128|w&63))&255]):w>=55296&&w<57344?(w=(w&1023)+64,D=E.charCodeAt(S++)&1023,b=b>>>8^r[(b^(240|w>>8&7))&255],b=b>>>8^r[(b^(128|w>>2&63))&255],b=b>>>8^r[(b^(128|D>>6&15|(w&3)<<4))&255],b=b>>>8^r[(b^(128|D&63))&255]):(b=b>>>8^r[(b^(224|w>>12&15))&255],b=b>>>8^r[(b^(128|w>>6&63))&255],b=b>>>8^r[(b^(128|w&63))&255]);return~b}return t.table=r,t.bstr=I,t.buf=R,t.str=A,t}(),er=function(){var e={};e.version="1.2.1";function r(ee,fe){for(var oe=ee.split("/"),ue=fe.split("/"),he=0,ge=0,De=Math.min(oe.length,ue.length);he<De;++he){if(ge=oe[he].length-ue[he].length)return ge;if(oe[he]!=ue[he])return oe[he]<ue[he]?-1:1}return oe.length-ue.length}function n(ee){if(ee.charAt(ee.length-1)=="/")return ee.slice(0,-1).indexOf("/")===-1?ee:n(ee.slice(0,-1));var fe=ee.lastIndexOf("/");return fe===-1?ee:ee.slice(0,fe+1)}function s(ee){if(ee.charAt(ee.length-1)=="/")return s(ee.slice(0,-1));var fe=ee.lastIndexOf("/");return fe===-1?ee:ee.slice(fe+1)}function i(ee,fe){typeof fe=="string"&&(fe=new Date(fe));var oe=fe.getHours();oe=oe<<6|fe.getMinutes(),oe=oe<<5|fe.getSeconds()>>>1,ee.write_shift(2,oe);var ue=fe.getFullYear()-1980;ue=ue<<4|fe.getMonth()+1,ue=ue<<5|fe.getDate(),ee.write_shift(2,ue)}function a(ee){var fe=ee.read_shift(2)&65535,oe=ee.read_shift(2)&65535,ue=new Date,he=oe&31;oe>>>=5;var ge=oe&15;oe>>>=4,ue.setMilliseconds(0),ue.setFullYear(oe+1980),ue.setMonth(ge-1),ue.setDate(he);var De=fe&31;fe>>>=5;var Ue=fe&63;return fe>>>=6,ue.setHours(fe),ue.setMinutes(Ue),ue.setSeconds(De<<1),ue}function o(ee){bn(ee,0);for(var fe={},oe=0;ee.l<=ee.length-4;){var ue=ee.read_shift(2),he=ee.read_shift(2),ge=ee.l+he,De={};switch(ue){case 21589:oe=ee.read_shift(1),oe&1&&(De.mtime=ee.read_shift(4)),he>5&&(oe&2&&(De.atime=ee.read_shift(4)),oe&4&&(De.ctime=ee.read_shift(4))),De.mtime&&(De.mt=new Date(De.mtime*1e3));break}ee.l=ge,fe[ue]=De}return fe}var l;function c(){return l||(l={})}function u(ee,fe){if(ee[0]==80&&ee[1]==75)return mt(ee,fe);if((ee[0]|32)==109&&(ee[1]|32)==105)return xo(ee,fe);if(ee.length<512)throw new Error("CFB file size "+ee.length+" < 512");var oe=3,ue=512,he=0,ge=0,De=0,Ue=0,Pe=0,Fe=[],Me=ee.slice(0,512);bn(Me,0);var qe=f(Me);switch(oe=qe[0],oe){case 3:ue=512;break;case 4:ue=4096;break;case 0:if(qe[1]==0)return mt(ee,fe);default:throw new Error("Major Version: Expected 3 or 4 saw "+oe)}ue!==512&&(Me=ee.slice(0,ue),bn(Me,28));var et=ee.slice(0,ue);h(Me,oe);var lt=Me.read_shift(4,"i");if(oe===3&&lt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+lt);Me.l+=4,De=Me.read_shift(4,"i"),Me.l+=4,Me.chk("00100000","Mini Stream Cutoff Size: "),Ue=Me.read_shift(4,"i"),he=Me.read_shift(4,"i"),Pe=Me.read_shift(4,"i"),ge=Me.read_shift(4,"i");for(var Ye=-1,at=0;at<109&&(Ye=Me.read_shift(4,"i"),!(Ye<0));++at)Fe[at]=Ye;var At=p(ee,ue);v(Pe,ge,At,ue,Fe);var hr=y(At,De,Fe,ue);hr[De].name="!Directory",he>0&&Ue!==D&&(hr[Ue].name="!MiniFAT"),hr[Fe[0]].name="!FAT",hr.fat_addrs=Fe,hr.ssz=ue;var cr={},Ar=[],Va=[],Eo=[];_(De,hr,At,Ar,he,cr,Va,Ue),m(Va,Eo,Ar),Ar.shift();var Ci={FileIndex:Va,FullPaths:Eo};return fe&&fe.raw&&(Ci.raw={header:et,sectors:At}),Ci}function f(ee){if(ee[ee.l]==80&&ee[ee.l+1]==75)return[0,0];ee.chk(N,"Header Signature: "),ee.l+=16;var fe=ee.read_shift(2,"u");return[ee.read_shift(2,"u"),fe]}function h(ee,fe){var oe=9;switch(ee.l+=2,oe=ee.read_shift(2)){case 9:if(fe!=3)throw new Error("Sector Shift: Expected 9 saw "+oe);break;case 12:if(fe!=4)throw new Error("Sector Shift: Expected 12 saw "+oe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+oe)}ee.chk("0600","Mini Sector Shift: "),ee.chk("000000000000","Reserved: ")}function p(ee,fe){for(var oe=Math.ceil(ee.length/fe)-1,ue=[],he=1;he<oe;++he)ue[he-1]=ee.slice(he*fe,(he+1)*fe);return ue[oe-1]=ee.slice(oe*fe),ue}function m(ee,fe,oe){for(var ue=0,he=0,ge=0,De=0,Ue=0,Pe=oe.length,Fe=[],Me=[];ue<Pe;++ue)Fe[ue]=Me[ue]=ue,fe[ue]=oe[ue];for(;Ue<Me.length;++Ue)ue=Me[Ue],he=ee[ue].L,ge=ee[ue].R,De=ee[ue].C,Fe[ue]===ue&&(he!==-1&&Fe[he]!==he&&(Fe[ue]=Fe[he]),ge!==-1&&Fe[ge]!==ge&&(Fe[ue]=Fe[ge])),De!==-1&&(Fe[De]=ue),he!==-1&&ue!=Fe[ue]&&(Fe[he]=Fe[ue],Me.lastIndexOf(he)<Ue&&Me.push(he)),ge!==-1&&ue!=Fe[ue]&&(Fe[ge]=Fe[ue],Me.lastIndexOf(ge)<Ue&&Me.push(ge));for(ue=1;ue<Pe;++ue)Fe[ue]===ue&&(ge!==-1&&Fe[ge]!==ge?Fe[ue]=Fe[ge]:he!==-1&&Fe[he]!==he&&(Fe[ue]=Fe[he]));for(ue=1;ue<Pe;++ue)if(ee[ue].type!==0){if(Ue=ue,Ue!=Fe[Ue])do Ue=Fe[Ue],fe[ue]=fe[Ue]+"/"+fe[ue];while(Ue!==0&&Fe[Ue]!==-1&&Ue!=Fe[Ue]);Fe[ue]=-1}for(fe[0]+="/",ue=1;ue<Pe;++ue)ee[ue].type!==2&&(fe[ue]+="/")}function g(ee,fe,oe){for(var ue=ee.start,he=ee.size,ge=[],De=ue;oe&&he>0&&De>=0;)ge.push(fe.slice(De*w,De*w+w)),he-=w,De=ko(oe,De*4);return ge.length===0?rn(0):Gi(ge).slice(0,ee.size)}function v(ee,fe,oe,ue,he){var ge=D;if(ee===D){if(fe!==0)throw new Error("DIFAT chain shorter than expected")}else if(ee!==-1){var De=oe[ee],Ue=(ue>>>2)-1;if(!De)return;for(var Pe=0;Pe<Ue&&(ge=ko(De,Pe*4))!==D;++Pe)he.push(ge);v(ko(De,ue-4),fe-1,oe,ue,he)}}function x(ee,fe,oe,ue,he){var ge=[],De=[];he||(he=[]);var Ue=ue-1,Pe=0,Fe=0;for(Pe=fe;Pe>=0;){he[Pe]=!0,ge[ge.length]=Pe,De.push(ee[Pe]);var Me=oe[Math.floor(Pe*4/ue)];if(Fe=Pe*4&Ue,ue<4+Fe)throw new Error("FAT boundary crossed: "+Pe+" 4 "+ue);if(!ee[Me])break;Pe=ko(ee[Me],Fe)}return{nodes:ge,data:SS([De])}}function y(ee,fe,oe,ue){var he=ee.length,ge=[],De=[],Ue=[],Pe=[],Fe=ue-1,Me=0,qe=0,et=0,lt=0;for(Me=0;Me<he;++Me)if(Ue=[],et=Me+fe,et>=he&&(et-=he),!De[et]){Pe=[];var Ye=[];for(qe=et;qe>=0;){Ye[qe]=!0,De[qe]=!0,Ue[Ue.length]=qe,Pe.push(ee[qe]);var at=oe[Math.floor(qe*4/ue)];if(lt=qe*4&Fe,ue<4+lt)throw new Error("FAT boundary crossed: "+qe+" 4 "+ue);if(!ee[at]||(qe=ko(ee[at],lt),Ye[qe]))break}ge[et]={nodes:Ue,data:SS([Pe])}}return ge}function _(ee,fe,oe,ue,he,ge,De,Ue){for(var Pe=0,Fe=ue.length?2:0,Me=fe[ee].data,qe=0,et=0,lt;qe<Me.length;qe+=128){var Ye=Me.slice(qe,qe+128);bn(Ye,64),et=Ye.read_shift(2),lt=Bx(Ye,0,et-Fe),ue.push(lt);var at={name:lt,type:Ye.read_shift(1),color:Ye.read_shift(1),L:Ye.read_shift(4,"i"),R:Ye.read_shift(4,"i"),C:Ye.read_shift(4,"i"),clsid:Ye.read_shift(16),state:Ye.read_shift(4,"i"),start:0,size:0},At=Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2);At!==0&&(at.ct=I(Ye,Ye.l-8));var hr=Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2);hr!==0&&(at.mt=I(Ye,Ye.l-8)),at.start=Ye.read_shift(4,"i"),at.size=Ye.read_shift(4,"i"),at.size<0&&at.start<0&&(at.size=at.type=0,at.start=D,at.name=""),at.type===5?(Pe=at.start,he>0&&Pe!==D&&(fe[Pe].name="!StreamData")):at.size>=4096?(at.storage="fat",fe[at.start]===void 0&&(fe[at.start]=x(oe,at.start,fe.fat_addrs,fe.ssz)),fe[at.start].name=at.name,at.content=fe[at.start].data.slice(0,at.size)):(at.storage="minifat",at.size<0?at.size=0:Pe!==D&&at.start!==D&&fe[Pe]&&(at.content=g(at,fe[Pe].data,(fe[Ue]||{}).data))),at.content&&bn(at.content,0),ge[lt]=at,De.push(at)}}function I(ee,fe){return new Date((Ss(ee,fe+4)/1e7*Math.pow(2,32)+Ss(ee,fe)/1e7-11644473600)*1e3)}function R(ee,fe){return c(),u(l.readFileSync(ee),fe)}function A(ee,fe){var oe=fe&&fe.type;switch(oe||Jt&&Buffer.isBuffer(ee)&&(oe="buffer"),oe||"base64"){case"file":return R(ee,fe);case"base64":return u(na(ks(ee)),fe);case"binary":return u(na(ee),fe)}return u(ee,fe)}function E(ee,fe){var oe=fe||{},ue=oe.root||"Root Entry";if(ee.FullPaths||(ee.FullPaths=[]),ee.FileIndex||(ee.FileIndex=[]),ee.FullPaths.length!==ee.FileIndex.length)throw new Error("inconsistent CFB structure");ee.FullPaths.length===0&&(ee.FullPaths[0]=ue+"/",ee.FileIndex[0]={name:ue,type:5}),oe.CLSID&&(ee.FileIndex[0].clsid=oe.CLSID),T(ee)}function T(ee){var fe="Sh33tJ5";if(!er.find(ee,"/"+fe)){var oe=rn(4);oe[0]=55,oe[1]=oe[3]=50,oe[2]=54,ee.FileIndex.push({name:fe,type:2,content:oe,size:4,L:69,R:69,C:69}),ee.FullPaths.push(ee.FullPaths[0]+fe),b(ee)}}function b(ee,fe){E(ee);for(var oe=!1,ue=!1,he=ee.FullPaths.length-1;he>=0;--he){var ge=ee.FileIndex[he];switch(ge.type){case 0:ue?oe=!0:(ee.FileIndex.pop(),ee.FullPaths.pop());break;case 1:case 2:case 5:ue=!0,isNaN(ge.R*ge.L*ge.C)&&(oe=!0),ge.R>-1&&ge.L>-1&&ge.R==ge.L&&(oe=!0);break;default:oe=!0;break}}if(!(!oe&&!fe)){var De=new Date(1987,1,19),Ue=0,Pe=Object.create?Object.create(null):{},Fe=[];for(he=0;he<ee.FullPaths.length;++he)Pe[ee.FullPaths[he]]=!0,ee.FileIndex[he].type!==0&&Fe.push([ee.FullPaths[he],ee.FileIndex[he]]);for(he=0;he<Fe.length;++he){var Me=n(Fe[he][0]);ue=Pe[Me],ue||(Fe.push([Me,{name:s(Me).replace("/",""),type:1,clsid:P,ct:De,mt:De,content:null}]),Pe[Me]=!0)}for(Fe.sort(function(lt,Ye){return r(lt[0],Ye[0])}),ee.FullPaths=[],ee.FileIndex=[],he=0;he<Fe.length;++he)ee.FullPaths[he]=Fe[he][0],ee.FileIndex[he]=Fe[he][1];for(he=0;he<Fe.length;++he){var qe=ee.FileIndex[he],et=ee.FullPaths[he];if(qe.name=s(et).replace("/",""),qe.L=qe.R=qe.C=-(qe.color=1),qe.size=qe.content?qe.content.length:0,qe.start=0,qe.clsid=qe.clsid||P,he===0)qe.C=Fe.length>1?1:-1,qe.size=0,qe.type=5;else if(et.slice(-1)=="/"){for(Ue=he+1;Ue<Fe.length&&n(ee.FullPaths[Ue])!=et;++Ue);for(qe.C=Ue>=Fe.length?-1:Ue,Ue=he+1;Ue<Fe.length&&n(ee.FullPaths[Ue])!=n(et);++Ue);qe.R=Ue>=Fe.length?-1:Ue,qe.type=1}else n(ee.FullPaths[he+1]||"")==n(et)&&(qe.R=he+1),qe.type=2}}}function S(ee,fe){var oe=fe||{};if(oe.fileType=="mad")return en(ee,oe);switch(b(ee),oe.fileType){case"zip":return Ot(ee,oe)}var ue=function(lt){for(var Ye=0,at=0,At=0;At<lt.FileIndex.length;++At){var hr=lt.FileIndex[At];if(hr.content){var cr=hr.content.length;cr>0&&(cr<4096?Ye+=cr+63>>6:at+=cr+511>>9)}}for(var Ar=lt.FullPaths.length+3>>2,Va=Ye+7>>3,Eo=Ye+127>>7,Ci=Va+at+Ar+Eo,va=Ci+127>>7,xl=va<=109?0:Math.ceil((va-109)/127);Ci+va+xl+127>>7>va;)xl=++va<=109?0:Math.ceil((va-109)/127);var ys=[1,xl,va,Eo,Ar,at,Ye,0];return lt.FileIndex[0].size=Ye<<6,ys[7]=(lt.FileIndex[0].start=ys[0]+ys[1]+ys[2]+ys[3]+ys[4]+ys[5])+(ys[6]+7>>3),ys}(ee),he=rn(ue[7]<<9),ge=0,De=0;{for(ge=0;ge<8;++ge)he.write_shift(1,F[ge]);for(ge=0;ge<8;++ge)he.write_shift(2,0);for(he.write_shift(2,62),he.write_shift(2,3),he.write_shift(2,65534),he.write_shift(2,9),he.write_shift(2,6),ge=0;ge<3;++ge)he.write_shift(2,0);for(he.write_shift(4,0),he.write_shift(4,ue[2]),he.write_shift(4,ue[0]+ue[1]+ue[2]+ue[3]-1),he.write_shift(4,0),he.write_shift(4,4096),he.write_shift(4,ue[3]?ue[0]+ue[1]+ue[2]-1:D),he.write_shift(4,ue[3]),he.write_shift(-4,ue[1]?ue[0]-1:D),he.write_shift(4,ue[1]),ge=0;ge<109;++ge)he.write_shift(-4,ge<ue[2]?ue[1]+ge:-1)}if(ue[1])for(De=0;De<ue[1];++De){for(;ge<236+De*127;++ge)he.write_shift(-4,ge<ue[2]?ue[1]+ge:-1);he.write_shift(-4,De===ue[1]-1?D:De+1)}var Ue=function(lt){for(De+=lt;ge<De-1;++ge)he.write_shift(-4,ge+1);lt&&(++ge,he.write_shift(-4,D))};for(De=ge=0,De+=ue[1];ge<De;++ge)he.write_shift(-4,O.DIFSECT);for(De+=ue[2];ge<De;++ge)he.write_shift(-4,O.FATSECT);Ue(ue[3]),Ue(ue[4]);for(var Pe=0,Fe=0,Me=ee.FileIndex[0];Pe<ee.FileIndex.length;++Pe)Me=ee.FileIndex[Pe],Me.content&&(Fe=Me.content.length,!(Fe<4096)&&(Me.start=De,Ue(Fe+511>>9)));for(Ue(ue[6]+7>>3);he.l&511;)he.write_shift(-4,O.ENDOFCHAIN);for(De=ge=0,Pe=0;Pe<ee.FileIndex.length;++Pe)Me=ee.FileIndex[Pe],Me.content&&(Fe=Me.content.length,!(!Fe||Fe>=4096)&&(Me.start=De,Ue(Fe+63>>6)));for(;he.l&511;)he.write_shift(-4,O.ENDOFCHAIN);for(ge=0;ge<ue[4]<<2;++ge){var qe=ee.FullPaths[ge];if(!qe||qe.length===0){for(Pe=0;Pe<17;++Pe)he.write_shift(4,0);for(Pe=0;Pe<3;++Pe)he.write_shift(4,-1);for(Pe=0;Pe<12;++Pe)he.write_shift(4,0);continue}Me=ee.FileIndex[ge],ge===0&&(Me.start=Me.size?Me.start-1:D);var et=ge===0&&oe.root||Me.name;if(Fe=2*(et.length+1),he.write_shift(64,et,"utf16le"),he.write_shift(2,Fe),he.write_shift(1,Me.type),he.write_shift(1,Me.color),he.write_shift(-4,Me.L),he.write_shift(-4,Me.R),he.write_shift(-4,Me.C),Me.clsid)he.write_shift(16,Me.clsid,"hex");else for(Pe=0;Pe<4;++Pe)he.write_shift(4,0);he.write_shift(4,Me.state||0),he.write_shift(4,0),he.write_shift(4,0),he.write_shift(4,0),he.write_shift(4,0),he.write_shift(4,Me.start),he.write_shift(4,Me.size),he.write_shift(4,0)}for(ge=1;ge<ee.FileIndex.length;++ge)if(Me=ee.FileIndex[ge],Me.size>=4096)if(he.l=Me.start+1<<9,Jt&&Buffer.isBuffer(Me.content))Me.content.copy(he,he.l,0,Me.size),he.l+=Me.size+511&-512;else{for(Pe=0;Pe<Me.size;++Pe)he.write_shift(1,Me.content[Pe]);for(;Pe&511;++Pe)he.write_shift(1,0)}for(ge=1;ge<ee.FileIndex.length;++ge)if(Me=ee.FileIndex[ge],Me.size>0&&Me.size<4096)if(Jt&&Buffer.isBuffer(Me.content))Me.content.copy(he,he.l,0,Me.size),he.l+=Me.size+63&-64;else{for(Pe=0;Pe<Me.size;++Pe)he.write_shift(1,Me.content[Pe]);for(;Pe&63;++Pe)he.write_shift(1,0)}if(Jt)he.l=he.length;else for(;he.l<he.length;)he.write_shift(1,0);return he}function k(ee,fe){var oe=ee.FullPaths.map(function(Pe){return Pe.toUpperCase()}),ue=oe.map(function(Pe){var Fe=Pe.split("/");return Fe[Fe.length-(Pe.slice(-1)=="/"?2:1)]}),he=!1;fe.charCodeAt(0)===47?(he=!0,fe=oe[0].slice(0,-1)+fe):he=fe.indexOf("/")!==-1;var ge=fe.toUpperCase(),De=he===!0?oe.indexOf(ge):ue.indexOf(ge);if(De!==-1)return ee.FileIndex[De];var Ue=!ge.match(pu);for(ge=ge.replace(ls,""),Ue&&(ge=ge.replace(pu,"!")),De=0;De<oe.length;++De)if((Ue?oe[De].replace(pu,"!"):oe[De]).replace(ls,"")==ge||(Ue?ue[De].replace(pu,"!"):ue[De]).replace(ls,"")==ge)return ee.FileIndex[De];return null}var w=64,D=-2,N="d0cf11e0a1b11ae1",F=[208,207,17,224,161,177,26,225],P="00000000000000000000000000000000",O={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:N,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:P,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function M(ee,fe,oe){c();var ue=S(ee,oe);l.writeFileSync(fe,ue)}function U(ee){for(var fe=new Array(ee.length),oe=0;oe<ee.length;++oe)fe[oe]=String.fromCharCode(ee[oe]);return fe.join("")}function z(ee,fe){var oe=S(ee,fe);switch(fe&&fe.type||"buffer"){case"file":return c(),l.writeFileSync(fe.filename,oe),oe;case"binary":return typeof oe=="string"?oe:U(oe);case"base64":return aS(typeof oe=="string"?oe:U(oe));case"buffer":if(Jt)return Buffer.isBuffer(oe)?oe:ul(oe);case"array":return typeof oe=="string"?na(oe):oe}return oe}var j;function H(ee){try{var fe=ee.InflateRaw,oe=new fe;if(oe._processChunk(new Uint8Array([3,0]),oe._finishFlushFlag),oe.bytesRead)j=ee;else throw new Error("zlib does not expose bytesRead")}catch(ue){console.error("cannot use native zlib: "+(ue.message||ue))}}function W(ee,fe){if(!j)return ft(ee,fe);var oe=j.InflateRaw,ue=new oe,he=ue._processChunk(ee.slice(ee.l),ue._finishFlushFlag);return ee.l+=ue.bytesRead,he}function K(ee){return j?j.deflateRawSync(ee):xe(ee)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function pe(ee){var fe=(ee<<1|ee<<11)&139536|(ee<<5|ee<<15)&558144;return(fe>>16|fe>>8|fe)&255}for(var te=typeof Uint8Array<"u",Q=te?new Uint8Array(256):[],ye=0;ye<256;++ye)Q[ye]=pe(ye);function X(ee,fe){var oe=Q[ee&255];return fe<=8?oe>>>8-fe:(oe=oe<<8|Q[ee>>8&255],fe<=16?oe>>>16-fe:(oe=oe<<8|Q[ee>>16&255],oe>>>24-fe))}function q(ee,fe){var oe=fe&7,ue=fe>>>3;return(ee[ue]|(oe<=6?0:ee[ue+1]<<8))>>>oe&3}function Y(ee,fe){var oe=fe&7,ue=fe>>>3;return(ee[ue]|(oe<=5?0:ee[ue+1]<<8))>>>oe&7}function ne(ee,fe){var oe=fe&7,ue=fe>>>3;return(ee[ue]|(oe<=4?0:ee[ue+1]<<8))>>>oe&15}function ve(ee,fe){var oe=fe&7,ue=fe>>>3;return(ee[ue]|(oe<=3?0:ee[ue+1]<<8))>>>oe&31}function ae(ee,fe){var oe=fe&7,ue=fe>>>3;return(ee[ue]|(oe<=1?0:ee[ue+1]<<8))>>>oe&127}function le(ee,fe,oe){var ue=fe&7,he=fe>>>3,ge=(1<<oe)-1,De=ee[he]>>>ue;return oe<8-ue||(De|=ee[he+1]<<8-ue,oe<16-ue)||(De|=ee[he+2]<<16-ue,oe<24-ue)||(De|=ee[he+3]<<24-ue),De&ge}function de(ee,fe,oe){var ue=fe&7,he=fe>>>3;return ue<=5?ee[he]|=(oe&7)<<ue:(ee[he]|=oe<<ue&255,ee[he+1]=(oe&7)>>8-ue),fe+3}function Se(ee,fe,oe){var ue=fe&7,he=fe>>>3;return oe=(oe&1)<<ue,ee[he]|=oe,fe+1}function Ie(ee,fe,oe){var ue=fe&7,he=fe>>>3;return oe<<=ue,ee[he]|=oe&255,oe>>>=8,ee[he+1]=oe,fe+8}function Te(ee,fe,oe){var ue=fe&7,he=fe>>>3;return oe<<=ue,ee[he]|=oe&255,oe>>>=8,ee[he+1]=oe&255,ee[he+2]=oe>>>8,fe+16}function Ge(ee,fe){var oe=ee.length,ue=2*oe>fe?2*oe:fe+5,he=0;if(oe>=fe)return ee;if(Jt){var ge=iS(ue);if(ee.copy)ee.copy(ge);else for(;he<ee.length;++he)ge[he]=ee[he];return ge}else if(te){var De=new Uint8Array(ue);if(De.set)De.set(ee);else for(;he<oe;++he)De[he]=ee[he];return De}return ee.length=ue,ee}function ke(ee){for(var fe=new Array(ee),oe=0;oe<ee;++oe)fe[oe]=0;return fe}function $e(ee,fe,oe){var ue=1,he=0,ge=0,De=0,Ue=0,Pe=ee.length,Fe=te?new Uint16Array(32):ke(32);for(ge=0;ge<32;++ge)Fe[ge]=0;for(ge=Pe;ge<oe;++ge)ee[ge]=0;Pe=ee.length;var Me=te?new Uint16Array(Pe):ke(Pe);for(ge=0;ge<Pe;++ge)Fe[he=ee[ge]]++,ue<he&&(ue=he),Me[ge]=0;for(Fe[0]=0,ge=1;ge<=ue;++ge)Fe[ge+16]=Ue=Ue+Fe[ge-1]<<1;for(ge=0;ge<Pe;++ge)Ue=ee[ge],Ue!=0&&(Me[ge]=Fe[Ue+16]++);var qe=0;for(ge=0;ge<Pe;++ge)if(qe=ee[ge],qe!=0)for(Ue=X(Me[ge],ue)>>ue-qe,De=(1<<ue+4-qe)-1;De>=0;--De)fe[Ue|De<<qe]=qe&15|ge<<4;return ue}var Be=te?new Uint16Array(512):ke(512),We=te?new Uint16Array(32):ke(32);if(!te){for(var ze=0;ze<512;++ze)Be[ze]=0;for(ze=0;ze<32;++ze)We[ze]=0}(function(){for(var ee=[],fe=0;fe<32;fe++)ee.push(5);$e(ee,We,32);var oe=[];for(fe=0;fe<=143;fe++)oe.push(8);for(;fe<=255;fe++)oe.push(9);for(;fe<=279;fe++)oe.push(7);for(;fe<=287;fe++)oe.push(8);$e(oe,Be,288)})();var Ee=function(){for(var fe=te?new Uint8Array(32768):[],oe=0,ue=0;oe<ce.length-1;++oe)for(;ue<ce[oe+1];++ue)fe[ue]=oe;for(;ue<32768;++ue)fe[ue]=29;var he=te?new Uint8Array(259):[];for(oe=0,ue=0;oe<me.length-1;++oe)for(;ue<me[oe+1];++ue)he[ue]=oe;function ge(Ue,Pe){for(var Fe=0;Fe<Ue.length;){var Me=Math.min(65535,Ue.length-Fe),qe=Fe+Me==Ue.length;for(Pe.write_shift(1,+qe),Pe.write_shift(2,Me),Pe.write_shift(2,~Me&65535);Me-- >0;)Pe[Pe.l++]=Ue[Fe++]}return Pe.l}function De(Ue,Pe){for(var Fe=0,Me=0,qe=te?new Uint16Array(32768):[];Me<Ue.length;){var et=Math.min(65535,Ue.length-Me);if(et<10){for(Fe=de(Pe,Fe,+(Me+et==Ue.length)),Fe&7&&(Fe+=8-(Fe&7)),Pe.l=Fe/8|0,Pe.write_shift(2,et),Pe.write_shift(2,~et&65535);et-- >0;)Pe[Pe.l++]=Ue[Me++];Fe=Pe.l*8;continue}Fe=de(Pe,Fe,+(Me+et==Ue.length)+2);for(var lt=0;et-- >0;){var Ye=Ue[Me];lt=(lt<<5^Ye)&32767;var at=-1,At=0;if((at=qe[lt])&&(at|=Me&-32768,at>Me&&(at-=32768),at<Me))for(;Ue[at+At]==Ue[Me+At]&&At<250;)++At;if(At>2){Ye=he[At],Ye<=22?Fe=Ie(Pe,Fe,Q[Ye+1]>>1)-1:(Ie(Pe,Fe,3),Fe+=5,Ie(Pe,Fe,Q[Ye-23]>>5),Fe+=3);var hr=Ye<8?0:Ye-4>>2;hr>0&&(Te(Pe,Fe,At-me[Ye]),Fe+=hr),Ye=fe[Me-at],Fe=Ie(Pe,Fe,Q[Ye]>>3),Fe-=3;var cr=Ye<4?0:Ye-2>>1;cr>0&&(Te(Pe,Fe,Me-at-ce[Ye]),Fe+=cr);for(var Ar=0;Ar<At;++Ar)qe[lt]=Me&32767,lt=(lt<<5^Ue[Me])&32767,++Me;et-=At-1}else Ye<=143?Ye=Ye+48:Fe=Se(Pe,Fe,1),Fe=Ie(Pe,Fe,Q[Ye]),qe[lt]=Me&32767,++Me}Fe=Ie(Pe,Fe,0)-1}return Pe.l=(Fe+7)/8|0,Pe.l}return function(Pe,Fe){return Pe.length<8?ge(Pe,Fe):De(Pe,Fe)}}();function xe(ee){var fe=rn(50+Math.floor(ee.length*1.1)),oe=Ee(ee,fe);return fe.slice(0,oe)}var be=te?new Uint16Array(32768):ke(32768),Ne=te?new Uint16Array(32768):ke(32768),je=te?new Uint16Array(128):ke(128),ot=1,gt=1;function Et(ee,fe){var oe=ve(ee,fe)+257;fe+=5;var ue=ve(ee,fe)+1;fe+=5;var he=ne(ee,fe)+4;fe+=4;for(var ge=0,De=te?new Uint8Array(19):ke(19),Ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Pe=1,Fe=te?new Uint8Array(8):ke(8),Me=te?new Uint8Array(8):ke(8),qe=De.length,et=0;et<he;++et)De[re[et]]=ge=Y(ee,fe),Pe<ge&&(Pe=ge),Fe[ge]++,fe+=3;var lt=0;for(Fe[0]=0,et=1;et<=Pe;++et)Me[et]=lt=lt+Fe[et-1]<<1;for(et=0;et<qe;++et)(lt=De[et])!=0&&(Ue[et]=Me[lt]++);var Ye=0;for(et=0;et<qe;++et)if(Ye=De[et],Ye!=0){lt=Q[Ue[et]]>>8-Ye;for(var at=(1<<7-Ye)-1;at>=0;--at)je[lt|at<<Ye]=Ye&7|et<<3}var At=[];for(Pe=1;At.length<oe+ue;)switch(lt=je[ae(ee,fe)],fe+=lt&7,lt>>>=3){case 16:for(ge=3+q(ee,fe),fe+=2,lt=At[At.length-1];ge-- >0;)At.push(lt);break;case 17:for(ge=3+Y(ee,fe),fe+=3;ge-- >0;)At.push(0);break;case 18:for(ge=11+ae(ee,fe),fe+=7;ge-- >0;)At.push(0);break;default:At.push(lt),Pe<lt&&(Pe=lt);break}var hr=At.slice(0,oe),cr=At.slice(oe);for(et=oe;et<286;++et)hr[et]=0;for(et=ue;et<30;++et)cr[et]=0;return ot=$e(hr,be,286),gt=$e(cr,Ne,30),fe}function Lt(ee,fe){if(ee[0]==3&&!(ee[1]&3))return[uo(fe),2];for(var oe=0,ue=0,he=iS(fe||1<<18),ge=0,De=he.length>>>0,Ue=0,Pe=0;!(ue&1);){if(ue=Y(ee,oe),oe+=3,ue>>>1)ue>>1==1?(Ue=9,Pe=5):(oe=Et(ee,oe),Ue=ot,Pe=gt);else{oe&7&&(oe+=8-(oe&7));var Fe=ee[oe>>>3]|ee[(oe>>>3)+1]<<8;if(oe+=32,Fe>0)for(!fe&&De<ge+Fe&&(he=Ge(he,ge+Fe),De=he.length);Fe-- >0;)he[ge++]=ee[oe>>>3],oe+=8;continue}for(;;){!fe&&De<ge+32767&&(he=Ge(he,ge+32767),De=he.length);var Me=le(ee,oe,Ue),qe=ue>>>1==1?Be[Me]:be[Me];if(oe+=qe&15,qe>>>=4,!(qe>>>8&255))he[ge++]=qe;else{if(qe==256)break;qe-=257;var et=qe<8?0:qe-4>>2;et>5&&(et=0);var lt=ge+me[qe];et>0&&(lt+=le(ee,oe,et),oe+=et),Me=le(ee,oe,Pe),qe=ue>>>1==1?We[Me]:Ne[Me],oe+=qe&15,qe>>>=4;var Ye=qe<4?0:qe-2>>1,at=ce[qe];for(Ye>0&&(at+=le(ee,oe,Ye),oe+=Ye),!fe&&De<lt&&(he=Ge(he,lt+100),De=he.length);ge<lt;)he[ge]=he[ge-at],++ge}}}return fe?[he,oe+7>>>3]:[he.slice(0,ge),oe+7>>>3]}function ft(ee,fe){var oe=ee.slice(ee.l||0),ue=Lt(oe,fe);return ee.l+=ue[1],ue[0]}function ct(ee,fe){if(ee)typeof console<"u"&&console.error(fe);else throw new Error(fe)}function mt(ee,fe){var oe=ee;bn(oe,0);var ue=[],he=[],ge={FileIndex:ue,FullPaths:he};E(ge,{root:fe.root});for(var De=oe.length-4;(oe[De]!=80||oe[De+1]!=75||oe[De+2]!=5||oe[De+3]!=6)&&De>=0;)--De;oe.l=De+4,oe.l+=4;var Ue=oe.read_shift(2);oe.l+=6;var Pe=oe.read_shift(4);for(oe.l=Pe,De=0;De<Ue;++De){oe.l+=20;var Fe=oe.read_shift(4),Me=oe.read_shift(4),qe=oe.read_shift(2),et=oe.read_shift(2),lt=oe.read_shift(2);oe.l+=8;var Ye=oe.read_shift(4),at=o(oe.slice(oe.l+qe,oe.l+qe+et));oe.l+=qe+et+lt;var At=oe.l;oe.l=Ye+4,kt(oe,Fe,Me,ge,at),oe.l=At}return ge}function kt(ee,fe,oe,ue,he){ee.l+=2;var ge=ee.read_shift(2),De=ee.read_shift(2),Ue=a(ee);if(ge&8257)throw new Error("Unsupported ZIP encryption");for(var Pe=ee.read_shift(4),Fe=ee.read_shift(4),Me=ee.read_shift(4),qe=ee.read_shift(2),et=ee.read_shift(2),lt="",Ye=0;Ye<qe;++Ye)lt+=String.fromCharCode(ee[ee.l++]);if(et){var at=o(ee.slice(ee.l,ee.l+et));(at[21589]||{}).mt&&(Ue=at[21589].mt),((he||{})[21589]||{}).mt&&(Ue=he[21589].mt)}ee.l+=et;var At=ee.slice(ee.l,ee.l+Fe);switch(De){case 8:At=W(ee,Me);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+De)}var hr=!1;ge&8&&(Pe=ee.read_shift(4),Pe==134695760&&(Pe=ee.read_shift(4),hr=!0),Fe=ee.read_shift(4),Me=ee.read_shift(4)),Fe!=fe&&ct(hr,"Bad compressed size: "+fe+" != "+Fe),Me!=oe&&ct(hr,"Bad uncompressed size: "+oe+" != "+Me),Dr(ue,lt,At,{unsafe:!0,mt:Ue})}function Ot(ee,fe){var oe=fe||{},ue=[],he=[],ge=rn(1),De=oe.compression?8:0,Ue=0,Pe=0,Fe=0,Me=0,qe=0,et=ee.FullPaths[0],lt=et,Ye=ee.FileIndex[0],at=[],At=0;for(Pe=1;Pe<ee.FullPaths.length;++Pe)if(lt=ee.FullPaths[Pe].slice(et.length),Ye=ee.FileIndex[Pe],!(!Ye.size||!Ye.content||lt=="Sh33tJ5")){var hr=Me,cr=rn(lt.length);for(Fe=0;Fe<lt.length;++Fe)cr.write_shift(1,lt.charCodeAt(Fe)&127);cr=cr.slice(0,cr.l),at[qe]=TX.buf(Ye.content,0);var Ar=Ye.content;De==8&&(Ar=K(Ar)),ge=rn(30),ge.write_shift(4,67324752),ge.write_shift(2,20),ge.write_shift(2,Ue),ge.write_shift(2,De),Ye.mt?i(ge,Ye.mt):ge.write_shift(4,0),ge.write_shift(-4,at[qe]),ge.write_shift(4,Ar.length),ge.write_shift(4,Ye.content.length),ge.write_shift(2,cr.length),ge.write_shift(2,0),Me+=ge.length,ue.push(ge),Me+=cr.length,ue.push(cr),Me+=Ar.length,ue.push(Ar),ge=rn(46),ge.write_shift(4,33639248),ge.write_shift(2,0),ge.write_shift(2,20),ge.write_shift(2,Ue),ge.write_shift(2,De),ge.write_shift(4,0),ge.write_shift(-4,at[qe]),ge.write_shift(4,Ar.length),ge.write_shift(4,Ye.content.length),ge.write_shift(2,cr.length),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(4,0),ge.write_shift(4,hr),At+=ge.l,he.push(ge),At+=cr.length,he.push(cr),++qe}return ge=rn(22),ge.write_shift(4,101010256),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,qe),ge.write_shift(2,qe),ge.write_shift(4,At),ge.write_shift(4,Me),ge.write_shift(2,0),Gi([Gi(ue),Gi(he),ge])}var br={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Qn(ee,fe){if(ee.ctype)return ee.ctype;var oe=ee.name||"",ue=oe.match(/\.([^\.]+)$/);return ue&&br[ue[1]]||fe&&(ue=(oe=fe).match(/[\.\\]([^\.\\])+$/),ue&&br[ue[1]])?br[ue[1]]:"application/octet-stream"}function wi(ee){for(var fe=aS(ee),oe=[],ue=0;ue<fe.length;ue+=76)oe.push(fe.slice(ue,ue+76));return oe.join(`\r
`)+`\r
`}function us(ee){var fe=ee.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Fe){var Me=Fe.charCodeAt(0).toString(16).toUpperCase();return"="+(Me.length==1?"0"+Me:Me)});fe=fe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),fe.charAt(0)==`
`&&(fe="=0D"+fe.slice(1)),fe=fe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var oe=[],ue=fe.split(`\r
`),he=0;he<ue.length;++he){var ge=ue[he];if(ge.length==0){oe.push("");continue}for(var De=0;De<ge.length;){var Ue=76,Pe=ge.slice(De,De+Ue);Pe.charAt(Ue-1)=="="?Ue--:Pe.charAt(Ue-2)=="="?Ue-=2:Pe.charAt(Ue-3)=="="&&(Ue-=3),Pe=ge.slice(De,De+Ue),De+=Ue,De<ge.length&&(Pe+="="),oe.push(Pe)}}return oe.join(`\r
`)}function gl(ee){for(var fe=[],oe=0;oe<ee.length;++oe){for(var ue=ee[oe];oe<=ee.length&&ue.charAt(ue.length-1)=="=";)ue=ue.slice(0,ue.length-1)+ee[++oe];fe.push(ue)}for(var he=0;he<fe.length;++he)fe[he]=fe[he].replace(/[=][0-9A-Fa-f]{2}/g,function(ge){return String.fromCharCode(parseInt(ge.slice(1),16))});return na(fe.join(`\r
`))}function $a(ee,fe,oe){for(var ue="",he="",ge="",De,Ue=0;Ue<10;++Ue){var Pe=fe[Ue];if(!Pe||Pe.match(/^\s*$/))break;var Fe=Pe.match(/^(.*?):\s*([^\s].*)$/);if(Fe)switch(Fe[1].toLowerCase()){case"content-location":ue=Fe[2].trim();break;case"content-type":ge=Fe[2].trim();break;case"content-transfer-encoding":he=Fe[2].trim();break}}switch(++Ue,he.toLowerCase()){case"base64":De=na(ks(fe.slice(Ue).join("")));break;case"quoted-printable":De=gl(fe.slice(Ue));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+he)}var Me=Dr(ee,ue.slice(oe.length),De,{unsafe:!0});ge&&(Me.ctype=ge)}function xo(ee,fe){if(U(ee.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var oe=fe&&fe.root||"",ue=(Jt&&Buffer.isBuffer(ee)?ee.toString("binary"):U(ee)).split(`\r
`),he=0,ge="";for(he=0;he<ue.length;++he)if(ge=ue[he],!!/^Content-Location:/i.test(ge)&&(ge=ge.slice(ge.indexOf("file")),oe||(oe=ge.slice(0,ge.lastIndexOf("/")+1)),ge.slice(0,oe.length)!=oe))for(;oe.length>0&&(oe=oe.slice(0,oe.length-1),oe=oe.slice(0,oe.lastIndexOf("/")+1),ge.slice(0,oe.length)!=oe););var De=(ue[1]||"").match(/boundary="(.*?)"/);if(!De)throw new Error("MAD cannot find boundary");var Ue="--"+(De[1]||""),Pe=[],Fe=[],Me={FileIndex:Pe,FullPaths:Fe};E(Me);var qe,et=0;for(he=0;he<ue.length;++he){var lt=ue[he];lt!==Ue&&lt!==Ue+"--"||(et++&&$a(Me,ue.slice(qe,he),oe),qe=he)}return Me}function en(ee,fe){var oe=fe||{},ue=oe.boundary||"SheetJS";ue="------="+ue;for(var he=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ue.slice(2)+'"',"","",""],ge=ee.FullPaths[0],De=ge,Ue=ee.FileIndex[0],Pe=1;Pe<ee.FullPaths.length;++Pe)if(De=ee.FullPaths[Pe].slice(ge.length),Ue=ee.FileIndex[Pe],!(!Ue.size||!Ue.content||De=="Sh33tJ5")){De=De.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(At){return"_x"+At.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(At){return"_u"+At.charCodeAt(0).toString(16)+"_"});for(var Fe=Ue.content,Me=Jt&&Buffer.isBuffer(Fe)?Fe.toString("binary"):U(Fe),qe=0,et=Math.min(1024,Me.length),lt=0,Ye=0;Ye<=et;++Ye)(lt=Me.charCodeAt(Ye))>=32&&lt<128&&++qe;var at=qe>=et*4/5;he.push(ue),he.push("Content-Location: "+(oe.root||"file:///C:/SheetJS/")+De),he.push("Content-Transfer-Encoding: "+(at?"quoted-printable":"base64")),he.push("Content-Type: "+Qn(Ue,De)),he.push(""),he.push(at?us(Me):wi(Me))}return he.push(ue+`--\r
`),he.join(`\r
`)}function yo(ee){var fe={};return E(fe,ee),fe}function Dr(ee,fe,oe,ue){var he=ue&&ue.unsafe;he||E(ee);var ge=!he&&er.find(ee,fe);if(!ge){var De=ee.FullPaths[0];fe.slice(0,De.length)==De?De=fe:(De.slice(-1)!="/"&&(De+="/"),De=(De+fe).replace("//","/")),ge={name:s(fe),type:2},ee.FileIndex.push(ge),ee.FullPaths.push(De),he||er.utils.cfb_gc(ee)}return ge.content=oe,ge.size=oe?oe.length:0,ue&&(ue.CLSID&&(ge.clsid=ue.CLSID),ue.mt&&(ge.mt=ue.mt),ue.ct&&(ge.ct=ue.ct)),ge}function Dn(ee,fe){E(ee);var oe=er.find(ee,fe);if(oe){for(var ue=0;ue<ee.FileIndex.length;++ue)if(ee.FileIndex[ue]==oe)return ee.FileIndex.splice(ue,1),ee.FullPaths.splice(ue,1),!0}return!1}function vl(ee,fe,oe){E(ee);var ue=er.find(ee,fe);if(ue){for(var he=0;he<ee.FileIndex.length;++he)if(ee.FileIndex[he]==ue)return ee.FileIndex[he].name=s(oe),ee.FullPaths[he]=oe,!0}return!1}function $c(ee){b(ee,!0)}return e.find=k,e.read=A,e.parse=u,e.write=z,e.writeFile=M,e.utils={cfb_new:yo,cfb_add:Dr,cfb_del:Dn,cfb_mov:vl,cfb_gc:$c,ReadShift:Bu,CheckField:T4,prep_blob:bn,bconcat:Gi,use_zlib:H,_deflateRaw:xe,_inflateRaw:ft,consts:O},e}();function AX(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Fa(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function Ox(t){for(var e=[],r=Fa(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}var ch=new Date(1899,11,30,0,0,0);function cs(t,e){var r=t.getTime(),n=ch.getTime()+(t.getTimezoneOffset()-ch.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var n4=new Date,wX=ch.getTime()+(n4.getTimezoneOffset()-ch.getTimezoneOffset())*6e4,pS=n4.getTimezoneOffset();function Ap(t){var e=new Date;return e.setTime(t*24*60*60*1e3+wX),e.getTimezoneOffset()!==pS&&e.setTime(e.getTime()+(e.getTimezoneOffset()-pS)*6e4),e}function CX(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var mS=new Date("2017-02-19T19:06:09.000Z"),s4=isNaN(mS.getFullYear())?new Date("2/19/17"):mS,IX=s4.getFullYear()==2017;function pn(t,e){var r=new Date(t);if(IX)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(s4.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Zo(t,e){if(Jt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return gu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return gu(GI(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return gu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return gu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function In(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=In(t[r]));return e}function Lr(t,e){for(var r="";r.length<e;)r+=t;return r}function ca(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var kX=["january","february","march","april","may","june","july","august","september","october","november","december"];function Sc(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&kX.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var DX=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),a=[i[0]],o=1;o<i.length;++o)a.push(s),a.push(i[o]);return a}}();function a4(t){return t?t.content&&t.type?Zo(t.content,!0):t.data?hu(t.data):t.asNodeBuffer&&Jt?hu(t.asNodeBuffer().toString("binary")):t.asBinary?hu(t.asBinary()):t._data&&t._data.getContent?hu(Zo(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function i4(t){if(!t)return null;if(t.data)return nS(t.data);if(t.asNodeBuffer&&Jt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?nS(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function PX(t){return t&&t.name.slice(-4)===".bin"?i4(t):a4(t)}function Os(t,e){for(var r=t.FullPaths||Fa(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var a=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||s==a)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function Nx(t,e){var r=Os(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Xr(t,e,r){if(!r)return PX(Nx(t,e));if(!e)return null;try{return Xr(t,e)}catch{return null}}function Ts(t,e,r){if(!r)return a4(Nx(t,e));if(!e)return null;try{return Ts(t,e)}catch{return null}}function RX(t,e,r){return i4(Nx(t,e))}function gS(t){for(var e=t.FullPaths||Fa(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function FX(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Jt?n=ul(r):n=Qq(r),er.utils.cfb_add(t,e,n)}er.utils.cfb_add(t,e,r)}else t.file(e,r)}function o4(t,e){switch(e.type){case"base64":return er.read(t,{type:"base64"});case"binary":return er.read(t,{type:"binary"});case"buffer":case"array":return er.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function mu(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var l4=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,OX=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,vS=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,NX=/<[^>]*>/g,Jn=l4.match(vS)?vS:NX,MX=/<\w*:/,LX=/<(\/?)\w+:/;function Tt(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var a=t.match(OX),o=0,l="",c=0,u="",f="",h=1;if(a)for(c=0;c!=a.length;++c){for(f=a[c],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(u=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(h=(s=f.charCodeAt(i+1))==34||s==39?1:0,l=f.slice(i+1+h,f.length-h),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,n[u.toLowerCase()]=l;else{var p=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[p]&&u.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function Ba(t){return t.replace(LX,"<$1")}var c4={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},BX=Ox(c4),nr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(o,l){return c4[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,a)+r(s.slice(a+3))}}(),UX=/[&<>'"]/g,$X=/[\u0000-\u001f]/g;function Mx(t){var e=t+"";return e.replace(UX,function(r){return BX[r]}).replace(/\n/g,"<br/>").replace($X,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var xS=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Ir(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Jm(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function yS(t){var e=uo(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function ES(t){return ul(t,"binary").toString("utf8")}var Bf="foo bar baz",Er=Jt&&(ES(Bf)==Jm(Bf)&&ES||yS(Bf)==Jm(Bf)&&yS)||Jm,gu=Jt?function(t){return ul(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},_d=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),u4=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),VX=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),HX=/<\/?(?:vt:)?variant>/g,jX=/<(?:vt:)([^>]*)>([\s\S]*)</;function _S(t,e){var r=Tt(t),n=t.match(VX(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var a=i.replace(HX,"").match(jX);a&&s.push({v:Er(a[2]),t:a[1]})}),s}var GX=/(^\s|\s$|\n)/;function WX(t){return Fa(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function zX(t,e,r){return"<"+t+(r!=null?WX(r):"")+(e!=null?(e.match(GX)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Lx(t){if(Jt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Er(dl(Px(t)));throw new Error("Bad input format: expected Buffer or string")}var bd=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,KX={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},qX=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function XX(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function YX(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var bS=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},SS=Jt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:ul(e)})):bS(t)}:bS,TS=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(si(t,s)));return n.join("").replace(ls,"")},Bx=Jt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(ls,""):TS(t,e,r)}:TS,AS=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},d4=Jt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):AS(t,e,r)}:AS,wS=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Ll(t,s)));return n.join("")},Qd=Jt?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):wS(e,r,n)}:wS,f4=function(t,e){var r=Ss(t,e);return r>0?Qd(t,e+4,e+4+r-1):""},h4=f4,p4=function(t,e){var r=Ss(t,e);return r>0?Qd(t,e+4,e+4+r-1):""},m4=p4,g4=function(t,e){var r=2*Ss(t,e);return r>0?Qd(t,e+4,e+4+r-1):""},v4=g4,x4=function(e,r){var n=Ss(e,r);return n>0?Bx(e,r+4,r+4+n):""},y4=x4,E4=function(t,e){var r=Ss(t,e);return r>0?Qd(t,e+4,e+4+r):""},_4=E4,b4=function(t,e){return XX(t,e)},uh=b4,S4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Jt&&(h4=function(e,r){if(!Buffer.isBuffer(e))return f4(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},m4=function(e,r){if(!Buffer.isBuffer(e))return p4(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},v4=function(e,r){if(!Buffer.isBuffer(e))return g4(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},y4=function(e,r){if(!Buffer.isBuffer(e))return x4(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},_4=function(e,r){if(!Buffer.isBuffer(e))return E4(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},uh=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):b4(e,r)},S4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Ll=function(t,e){return t[e]},si=function(t,e){return t[e+1]*256+t[e]},JX=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Ss=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},ko=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},QX=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Bu(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,Jt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(si(this,c)),c+=2;t*=2;break;case"utf8":r=Qd(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Bx(this,this.l,this.l+t);break;case"wstr":return Bu.call(this,t,"dbcs");case"lpstr-ansi":r=h4(this,this.l),t=4+Ss(this,this.l);break;case"lpstr-cp":r=m4(this,this.l),t=4+Ss(this,this.l);break;case"lpwstr":r=v4(this,this.l),t=4+2*Ss(this,this.l);break;case"lpp4":t=4+Ss(this,this.l),r=y4(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Ss(this,this.l),r=_4(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Ll(this,this.l+t++))!==0;)i.push(Lf(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=si(this,this.l+t))!==0;)i.push(Lf(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Ll(this,c),this.l=c+1,o=Bu.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Lf(si(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Ll(this,c),this.l=c+1,o=Bu.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Lf(Ll(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=Ll(this,this.l),this.l++,n;case 2:return n=(e==="i"?JX:si)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?ko:QX)(this,this.l),this.l+=4,n):(s=Ss(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=uh(this,this.l):s=uh([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=d4(this,this.l,t);break}}return this.l+=t,r}var ZX=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},eY=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},tY=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function rY(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)tY(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,ZX(this,e,this.l);break;case 8:if(n=8,r==="f"){YX(this,e,this.l);break}case 16:break;case-4:n=4,eY(this,e,this.l);break}return this.l+=n,this}function T4(t,e){var r=d4(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function bn(t,e){t.l=e,t.read_shift=Bu,t.chk=T4,t.write_shift=rY}function Yn(t,e){t.l+=e}function rn(t){var e=uo(t);return bn(e,0),e}function Ti(t,e,r){if(t){var n,s,i;bn(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=gh[o]||gh[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;l=t.l+i;var u=c.f&&c.f(t,i,r);if(t.l=l,e(u,c,o))return}}}function Ev(){var t=[],e=Jt?256:2048,r=function(c){var u=rn(c);return bn(u,0),u},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),Gi(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function Uu(t,e,r){var n=In(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function CS(t,e,r){var n=In(t);return n.s=Uu(n.s,e.s,r),n.e=Uu(n.e,e.s,r),n}function $u(t,e){if(t.cRel&&t.c<0)for(t=In(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=In(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Rt(t);return!t.cRel&&t.cRel!=null&&(r=aY(r)),!t.rRel&&t.rRel!=null&&(r=nY(r)),r}function Qm(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+on(t.s.c)+":"+(t.e.cRel?"":"$")+on(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+kn(t.s.r)+":"+(t.e.rRel?"":"$")+kn(t.e.r):$u(t.s,e.biff)+":"+$u(t.e,e.biff)}function Ux(t){return parseInt(sY(t),10)-1}function kn(t){return""+(t+1)}function nY(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function sY(t){return t.replace(/\$(\d+)$/,"$1")}function $x(t){for(var e=iY(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function on(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function aY(t){return t.replace(/^([A-Z])/,"$$$1")}function iY(t){return t.replace(/^\$([A-Z])/,"$1")}function oY(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function is(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Rt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Bc(t){var e=t.indexOf(":");return e==-1?{s:is(t),e:is(t)}:{s:is(t.slice(0,e)),e:is(t.slice(e+1))}}function rr(t,e){return typeof e>"u"||typeof e=="number"?rr(t.s,t.e):(typeof t!="string"&&(t=Rt(t)),typeof e!="string"&&(e=Rt(e)),t==e?t:t+":"+e)}function Ur(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function IS(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Hs(t.z,r?cs(e):e)}catch{}try{return t.w=Hs((t.XF||{}).numFmtId||(r?14:0),r?cs(e):e)}catch{return""+e}}function _i(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?pl[t.v]||t.v:e==null?IS(t,t.v):IS(t,e))}function vo(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function A4(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?is(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Ur(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=u.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[f].length;++h)if(!(typeof e[f][h]>"u")){var p={v:e[f][h]},m=a+f,g=o+h;if(c.s.r>m&&(c.s.r=m),c.s.c>g&&(c.s.c=g),c.e.r<m&&(c.e.r=m),c.e.c<g&&(c.e.c=g),e[f][h]&&typeof e[f][h]=="object"&&!Array.isArray(e[f][h])&&!(e[f][h]instanceof Date))p=e[f][h];else if(Array.isArray(p.v)&&(p.f=e[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Mt[14],n.cellDates?(p.t="d",p.w=Hs(p.z,cs(p.v))):(p.t="n",p.v=cs(p.v),p.w=Hs(p.z,p.v))):p.t="s";if(s)i[m]||(i[m]=[]),i[m][g]&&i[m][g].z&&(p.z=i[m][g].z),i[m][g]=p;else{var v=Rt({c:g,r:m});i[v]&&i[v].z&&(p.z=i[v].z),i[v]=p}}}return c.s.c<1e7&&(i["!ref"]=rr(c)),i}function Uc(t,e){return A4(null,t,e)}function lY(t){return t.read_shift(4,"i")}function qn(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function cY(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Vx(t,e){var r=t.l,n=t.read_shift(1),s=qn(t),i=[],a={t:s,h:s};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(cY(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}var uY=Vx;function zs(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function fl(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var dY=qn;function Hx(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var fY=qn,_v=Hx;function jx(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?uh([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):ko(e,0)>>2;return r?s/100:s}function w4(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var hl=w4;function Hn(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function hY(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=Vo[s];c&&(e.rgb=Td(c));break;case 2:e.rgb=Td([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function pY(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function C4(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function mY(t){return C4(t,1)}function gY(t){return C4(t,2)}var Gx=2,ps=3,Uf=11,kS=12,dh=19,$f=64,vY=65,xY=71,yY=4108,EY=4126,un=80,I4=81,_Y=[un,I4],bY={1:{n:"CodePage",t:Gx},2:{n:"Category",t:un},3:{n:"PresentationFormat",t:un},4:{n:"ByteCount",t:ps},5:{n:"LineCount",t:ps},6:{n:"ParagraphCount",t:ps},7:{n:"SlideCount",t:ps},8:{n:"NoteCount",t:ps},9:{n:"HiddenCount",t:ps},10:{n:"MultimediaClipCount",t:ps},11:{n:"ScaleCrop",t:Uf},12:{n:"HeadingPairs",t:yY},13:{n:"TitlesOfParts",t:EY},14:{n:"Manager",t:un},15:{n:"Company",t:un},16:{n:"LinksUpToDate",t:Uf},17:{n:"CharacterCount",t:ps},19:{n:"SharedDoc",t:Uf},22:{n:"HyperlinksChanged",t:Uf},23:{n:"AppVersion",t:ps,p:"version"},24:{n:"DigSig",t:vY},26:{n:"ContentType",t:un},27:{n:"ContentStatus",t:un},28:{n:"Language",t:un},29:{n:"Version",t:un},255:{},2147483648:{n:"Locale",t:dh},2147483651:{n:"Behavior",t:dh},1919054434:{}},SY={1:{n:"CodePage",t:Gx},2:{n:"Title",t:un},3:{n:"Subject",t:un},4:{n:"Author",t:un},5:{n:"Keywords",t:un},6:{n:"Comments",t:un},7:{n:"Template",t:un},8:{n:"LastAuthor",t:un},9:{n:"RevNumber",t:un},10:{n:"EditTime",t:$f},11:{n:"LastPrinted",t:$f},12:{n:"CreatedDate",t:$f},13:{n:"ModifiedDate",t:$f},14:{n:"PageCount",t:ps},15:{n:"WordCount",t:ps},16:{n:"CharCount",t:ps},17:{n:"Thumbnail",t:xY},18:{n:"Application",t:un},19:{n:"DocSecurity",t:ps},255:{},2147483648:{n:"Locale",t:dh},2147483651:{n:"Behavior",t:dh},1919054434:{}},DS={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},TY=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function AY(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var wY=AY([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Vo=In(wY),pl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},k4={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},PS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function CY(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function IY(t){var e=CY();if(!t||!t.match)return e;var r={};if((t.match(Jn)||[]).forEach(function(n){var s=Tt(n);switch(s[0].replace(MX,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[PS[s.ContentType]]!==void 0&&e[PS[s.ContentType]].push(s.PartName);break}}),e.xmlns!==KX.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}var Hl={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function bv(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Vu(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Jn)||[]).forEach(function(s){var i=Tt(s);if(i[0]==="<Relationship"){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:mu(i.Target,e);r[o]=a,n[i.Id]=a}}),r["!id"]=n,r}var kY="application/vnd.oasis.opendocument.spreadsheet";function DY(t,e){for(var r=Lx(t),n,s;n=bd.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Tt(n[0],!1),s.path=="/"&&s.type!==kY)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var Hu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],PY=function(){for(var t=new Array(Hu.length),e=0;e<Hu.length;++e){var r=Hu[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function D4(t){var e={};t=Er(t);for(var r=0;r<Hu.length;++r){var n=Hu[r],s=t.match(PY[r]);s!=null&&s.length>0&&(e[n[1]]=nr(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=pn(e[n[1]]))}return e}var RY=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function P4(t,e,r,n){var s=[];if(typeof t=="string")s=_S(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(u){return{v:u}}));var a=typeof e=="string"?_S(e,n).map(function(u){return u.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function FY(t,e,r){var n={};return e||(e={}),t=Er(t),RY.forEach(function(s){var i=(t.match(_d(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=nr(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var a=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));a&&a.length>0&&(n[s[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&P4(n.HeadingPairs,n.TitlesOfParts,e,r),e}var OY=/<[^>]+>[^<]*/g;function NY(t,e){var r={},n="",s=t.match(OY);if(s)for(var i=0;i!=s.length;++i){var a=s[i],o=Tt(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=nr(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=nr(u);break;case"bool":r[n]=Ir(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=pn(u);break;case"cy":case"error":r[n]=nr(u);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}var MY={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Zm;function LY(t,e,r){Zm||(Zm=Ox(MY)),e=Zm[e]||e,t[e]=r}function Wx(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function R4(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function F4(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function O4(t,e,r){return e===31?F4(t):R4(t,e,r)}function Sv(t,e,r){return O4(t,e,r===!1?0:4)}function BY(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return O4(t,e,0)}function UY(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(ls,""),t.l-s&2&&(t.l+=2)}return r}function $Y(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(ls,"");return r}function VY(t){var e=t.l,r=fh(t,I4);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=fh(t,ps);return[r,n]}function HY(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(VY(t));return r}function RS(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),a=t.read_shift(4);n[i]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(ls,"").replace(pu,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function N4(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function jY(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function fh(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==kS&&n!==e&&_Y.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===kS?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return R4(t,n,4).replace(ls,"");case 31:return F4(t);case 64:return Wx(t);case 65:return N4(t);case 71:return jY(t);case 80:return Sv(t,n,!i.raw).replace(ls,"");case 81:return BY(t,n).replace(ls,"");case 4108:return HY(t);case 4126:case 4127:return n==4127?UY(t):$Y(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function FS(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0,o=0,l=-1,c={};for(a=0;a!=s;++a){var u=t.read_shift(4),f=t.read_shift(4);i[a]=[u,f+r]}i.sort(function(y,_){return y[1]-_[1]});var h={};for(a=0;a!=s;++a){if(t.l!==i[a][1]){var p=!0;if(a>0&&e)switch(e[i[a-1][0]].t){case 2:t.l+2===i[a][1]&&(t.l+=2,p=!1);break;case 80:t.l<=i[a][1]&&(t.l=i[a][1],p=!1);break;case 4108:t.l<=i[a][1]&&(t.l=i[a][1],p=!1);break}if((!e||a==0)&&t.l<=i[a][1]&&(p=!1,t.l=i[a][1]),p)throw new Error("Read Error: Expected address "+i[a][1]+" at "+t.l+" :"+a)}if(e){var m=e[i[a][0]];if(h[m.n]=fh(t,m.t,{raw:!0}),m.p==="version"&&(h[m.n]=String(h[m.n]>>16)+"."+("0000"+String(h[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(h[m.n]){case 0:h[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:aa(o=h[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[m.n])}}else if(i[a][0]===1){if(o=h.CodePage=fh(t,Gx),aa(o),l!==-1){var g=t.l;t.l=i[l][1],c=RS(t,o),t.l=g}}else if(i[a][0]===0){if(o===0){l=a,t.l=i[a+1][1];continue}c=RS(t,o)}else{var v=c[i[a][0]],x;switch(t[t.l]){case 65:t.l+=4,x=N4(t);break;case 30:t.l+=4,x=Sv(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,x=Sv(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,x=t.read_shift(4,"i");break;case 19:t.l+=4,x=t.read_shift(4);break;case 5:t.l+=4,x=t.read_shift(8,"f");break;case 11:t.l+=4,x=Vr(t,4);break;case 64:t.l+=4,x=pn(Wx(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[v]=x}}return t.l=r+n,h}function OS(t,e,r){var n=t.content;if(!n)return{};bn(n,0);var s,i,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==er.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(a=n.read_shift(16),l=n.read_shift(4));var f=FS(n,e),h={SystemIdentifier:c};for(var p in f)h[p]=f[p];if(h.FMTID=i,s===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var m;try{m=FS(n,null)}catch{}for(p in m)h[p]=m[p];return h.FMTID=[i,a],h}function Oi(t,e){return t.read_shift(e),null}function GY(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function Vr(t,e){return t.read_shift(e)===1}function Yr(t){return t.read_shift(2,"u")}function M4(t,e){return GY(t,e,Yr)}function WY(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function Zd(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function zY(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),a=0,o,l={};s&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",u=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*a),n&&(t.l+=o),l.t=u,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function el(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function ef(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):el(t,n,r)}function ml(t,e,r){if(r.biff>5)return ef(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function KY(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function qY(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(ls,"");return n&&(t.l+=24),s}function XY(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(i>>1,"utf16le").replace(ls,"");return r+a}function YY(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return qY(t);case"0303000000000000c000000000000046":return XY(t);default:throw new Error("Unsupported Moniker "+r)}}function Vf(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(ls,""):"";return r}function JY(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,a,o,l,c="",u,f;s&16&&(i=Vf(t,r-t.l)),s&128&&(a=Vf(t,r-t.l)),(s&257)===257&&(o=Vf(t,r-t.l)),(s&257)===1&&(l=YY(t,r-t.l)),s&8&&(c=Vf(t,r-t.l)),s&32&&(u=t.read_shift(16)),s&64&&(f=Wx(t)),t.l=r;var h=a||o||l||"";h&&c&&(h+="#"+c),h||(h="#"+c),s&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return u&&(p.guid=u),f&&(p.time=f),i&&(p.Tooltip=i),p}function L4(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function B4(t,e){var r=L4(t);return r[3]=0,r}function Ua(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function QY(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function ZY(t,e,r){return e===0?"":ml(t,e,r)}function eJ(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function U4(t){var e=t.read_shift(2),r=jx(t);return[e,r]}function tJ(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=Zd(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function wp(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function $4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var rJ=$4;function V4(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function nJ(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function sJ(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function On(t){t.l+=2,t.l+=t.read_shift(2)}var aJ={0:On,4:On,5:On,6:On,7:sJ,8:On,9:On,10:On,11:On,12:On,13:nJ,14:On,15:On,16:On,17:On,18:On,19:On,20:On,21:V4};function iJ(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(aJ[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Hf(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function oJ(t,e){return e===0||t.read_shift(2),1200}function lJ(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=ml(t,0,r);return t.read_shift(e+n-t.l),s}function cJ(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function uJ(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var a=Zd(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:s,dt:i,name:a}}function dJ(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0;a!=s&&t.l<r;++a)i.push(zY(t));return i.Count=n,i.Unique=s,i}function fJ(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function hJ(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function pJ(t){var e=QY(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function mJ(t){return t.read_shift(2),t.read_shift(4)}function NS(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function gJ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function vJ(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function xJ(){}function yJ(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Zd(t,0,r),n}function EJ(t){var e=Ua(t);return e.isst=t.read_shift(4),e}function _J(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=Ua(t);r.biff==2&&t.l++;var i=ef(t,n-t.l,r);return s.val=i,s}function bJ(t,e,r){var n=t.read_shift(2),s=ml(t,0,r);return[n,s]}var SJ=ml;function MS(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),a=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:i,c:o},e:{r:a,c:l}}}function TJ(t){var e=t.read_shift(2),r=t.read_shift(2),n=U4(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function AJ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(U4(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:a,rkrec:i}}function wJ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:a,ixfe:i}}function CJ(t,e,r,n){var s={},i=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=TY[o>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=a&15,s.dgRight=a>>4&15,s.dgTop=a>>8&15,s.dgBottom=a>>12&15,s.icvLeft=a>>16&127,s.icvRight=a>>23&127,s.grbitDiag=a>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function IJ(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=CJ(t,e,n.fStyle,r),n}function kJ(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function LS(t,e,r){var n=Ua(t);(r.biff==2||e==9)&&++t.l;var s=WY(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function DJ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ua(t),s=Hn(t);return n.val=s,n}var BS=ZY;function PJ(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var a=el(t,i),o=[];n>t.l;)o.push(ef(t));return[i,s,a,o]}function US(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=tJ(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var RJ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function $S(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=el(t,a,r);s&32&&(c=RJ[c.charCodeAt(0)]);var u=n-t.l;r&&r.biff==2&&--u;var f=n==t.l||o===0||!(u>0)?[]:hte(t,u,r,o);return{chKey:i,Name:c,itab:l,rgce:f}}function H4(t,e,r){if(r.biff<8)return FJ(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(eJ(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function FJ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Zd(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function OJ(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=el(t,n,r),a=el(t,s,r);return[i,a]}function NJ(t,e,r){var n=$4(t);t.l++;var s=t.read_shift(1);return e-=8,[pte(t,e,r),s,n]}function VS(t,e,r){var n=rJ(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,dte(t,e,r)]}function MJ(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function LJ(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=ml(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,a,i]}}function BJ(t,e,r){return LJ(t,e,r)}function UJ(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(wp(t));return r}function $J(t,e,r){if(r&&r.biff<8)return HJ(t,e,r);var n=V4(t),s=iJ(t,e-22,n[1]);return{cmo:n,ft:s}}var VJ={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function HJ(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((VJ[n]||Yn)(t,e,r)),{cmo:[s,n,i],ft:a}}function jJ(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:a=KY(t,6,r);var o=t.read_shift(2);t.read_shift(2),Yr(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var u=t[t.l],f=el(t,t.lens[c+1]-t.lens[c]-1);if(s+=f,s.length>=(u?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function GJ(t,e){var r=wp(t);t.l+=16;var n=JY(t,e-24);return[r,n]}function WJ(t,e){t.read_shift(2);var r=wp(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(ls,""),[r,n]}function zJ(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=DS[r]||r,r=t.read_shift(2),e[1]=DS[r]||r,e}function KJ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(B4(t));return r}function qJ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(B4(t));return r}function XJ(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function j4(t,e,r){if(!r.cellStyles)return Yn(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function YJ(t,e){var r={};return e<32||(t.l+=16,r.header=Hn(t),r.footer=Hn(t),t.l+=2),r}function JJ(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}var QJ=Ua,ZJ=M4,eQ=ef;function tQ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function rQ(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ua(t);++t.l;var s=ml(t,e-7,r);return n.t="str",n.val=s,n}function nQ(t){var e=Ua(t);++t.l;var r=Hn(t);return e.t="n",e.val=r,e}function sQ(t){var e=Ua(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function aQ(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function iQ(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function oQ(t,e,r){var n=t.l+e,s=Ua(t),i=t.read_shift(2),a=el(t,i,r);return t.l=n,s.t="str",s.val=a,s}var lQ=[2,3,48,49,131,139,140,245],HS=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Ox({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],u=uo(1);switch(l.type){case"base64":u=na(ks(o));break;case"binary":u=na(o);break;case"buffer":case"array":u=o;break}bn(u,0);var f=u.read_shift(1),h=!!(f&136),p=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var g=0,v=521;f==2&&(g=u.read_shift(2)),u.l+=3,f!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),f!=2&&(v=u.read_shift(2));var x=u.read_shift(2),y=l.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(y=t[u[u.l]]),u.l+=1,u.l+=2),m&&(u.l+=36);for(var _=[],I={},R=Math.min(u.length,f==2?521:v-10-(p?264:0)),A=m?32:11;u.l<R&&u[u.l]!=13;)switch(I={},I.name=yd.utils.decode(y,u.slice(u.l,u.l+A)).replace(/[\u0000\r\n].*$/g,""),u.l+=A,I.type=String.fromCharCode(u.read_shift(1)),f!=2&&!m&&(I.offset=u.read_shift(4)),I.len=u.read_shift(1),f==2&&(I.offset=u.read_shift(2)),I.dec=u.read_shift(1),I.name.length&&_.push(I),f!=2&&(u.l+=m?13:14),I.type){case"B":(!p||I.len!=8)&&l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+I.type)}if(u[u.l]!==13&&(u.l=v-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=v;var E=0,T=0;for(c[0]=[],T=0;T!=_.length;++T)c[0][T]=_[T].name;for(;g-- >0;){if(u[u.l]===42){u.l+=x;continue}for(++u.l,c[++E]=[],T=0,T=0;T!=_.length;++T){var b=u.slice(u.l,u.l+_[T].len);u.l+=_[T].len,bn(b,0);var S=yd.utils.decode(y,b);switch(_[T].type){case"C":S.trim().length&&(c[E][T]=S.replace(/\s+$/,""));break;case"D":S.length===8?c[E][T]=new Date(+S.slice(0,4),+S.slice(4,6)-1,+S.slice(6,8)):c[E][T]=S;break;case"F":c[E][T]=parseFloat(S.trim());break;case"+":case"I":c[E][T]=m?b.read_shift(-4,"i")^2147483648:b.read_shift(4,"i");break;case"L":switch(S.trim().toUpperCase()){case"Y":case"T":c[E][T]=!0;break;case"N":case"F":c[E][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+S+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));c[E][T]="##MEMO##"+(m?parseInt(S.trim(),10):b.read_shift(4));break;case"N":S=S.replace(/\u0000/g,"").trim(),S&&S!="."&&(c[E][T]=+S||0);break;case"@":c[E][T]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":c[E][T]=new Date((b.read_shift(4)-2440588)*864e5+b.read_shift(4));break;case"Y":c[E][T]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[E][T]=-b.read_shift(-8,"f");break;case"B":if(p&&_[T].len==8){c[E][T]=b.read_shift(8,"f");break}case"G":case"P":b.l+=_[T].len;break;case"0":if(_[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[T].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=_,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=Uc(r(o,c),c);return u["!cols"]=c.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete c.DBF,u}function s(o,l){try{return vo(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&aa(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Ev(),f=kv(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),m=o["!cols"]||[],g=0,v=0,x=0,y=1;for(g=0;g<h.length;++g){if(((m[g]||{}).DBF||{}).name){h[g]=m[g].DBF.name,++x;continue}if(h[g]!=null){if(++x,typeof h[g]=="number"&&(h[g]=h[g].toString(10)),typeof h[g]!="string")throw new Error("DBF Invalid column name "+h[g]+" |"+typeof h[g]+"|");if(h.indexOf(h[g])!==g){for(v=0;v<1024;++v)if(h.indexOf(h[g]+"_"+v)==-1){h[g]+="_"+v;break}}}}var _=Ur(o["!ref"]),I=[],R=[],A=[];for(g=0;g<=_.e.c-_.s.c;++g){var E="",T="",b=0,S=[];for(v=0;v<p.length;++v)p[v][g]!=null&&S.push(p[v][g]);if(S.length==0||h[g]==null){I[g]="?";continue}for(v=0;v<S.length;++v){switch(typeof S[v]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=S[v]instanceof Date?"D":"C";break;default:T="C"}b=Math.max(b,String(S[v]).length),E=E&&E!=T?"C":T}b>250&&(b=250),T=((m[g]||{}).DBF||{}).type,T=="C"&&m[g].DBF.len>b&&(b=m[g].DBF.len),E=="B"&&T=="N"&&(E="N",A[g]=m[g].DBF.dec,b=m[g].DBF.len),R[g]=E=="C"||T=="N"?b:i[E]||0,y+=R[g],I[g]=E}var k=u.next(32);for(k.write_shift(4,318902576),k.write_shift(4,p.length),k.write_shift(2,296+32*x),k.write_shift(2,y),g=0;g<4;++g)k.write_shift(4,0);for(k.write_shift(4,0|(+e[HI]||3)<<8),g=0,v=0;g<h.length;++g)if(h[g]!=null){var w=u.next(32),D=(h[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);w.write_shift(1,D,"sbcs"),w.write_shift(1,I[g]=="?"?"C":I[g],"sbcs"),w.write_shift(4,v),w.write_shift(1,R[g]||i[I[g]]||0),w.write_shift(1,A[g]||0),w.write_shift(1,2),w.write_shift(4,0),w.write_shift(1,0),w.write_shift(4,0),w.write_shift(4,0),v+=R[g]||i[I[g]]||0}var N=u.next(264);for(N.write_shift(4,13),g=0;g<65;++g)N.write_shift(4,0);for(g=0;g<p.length;++g){var F=u.next(y);for(F.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(I[v]){case"L":F.write_shift(1,p[g][v]==null?63:p[g][v]?84:70);break;case"B":F.write_shift(8,p[g][v]||0,"f");break;case"N":var P="0";for(typeof p[g][v]=="number"&&(P=p[g][v].toFixed(A[v]||0)),x=0;x<R[v]-P.length;++x)F.write_shift(1,32);F.write_shift(1,P,"sbcs");break;case"D":p[g][v]?(F.write_shift(4,("0000"+p[g][v].getFullYear()).slice(-4),"sbcs"),F.write_shift(2,("00"+(p[g][v].getMonth()+1)).slice(-2),"sbcs"),F.write_shift(2,("00"+p[g][v].getDate()).slice(-2),"sbcs")):F.write_shift(8,"00000000","sbcs");break;case"C":var O=String(p[g][v]!=null?p[g][v]:"").slice(0,R[v]);for(F.write_shift(1,O,"sbcs"),x=0;x<R[v]-O.length;++x)F.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}}(),cQ=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Fa(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var m=t[p];return typeof m=="number"?sS(m):m},n=function(h,p,m){var g=p.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return g==59?h:sS(g)};t["|"]=254;function s(h,p){switch(p.type){case"base64":return i(ks(h),p);case"binary":return i(h,p);case"buffer":return i(Jt&&Buffer.isBuffer(h)?h.toString("binary"):dl(h),p);case"array":return i(Zo(h),p)}throw new Error("Unrecognized type "+p.type)}function i(h,p){var m=h.split(/[\n\r]+/),g=-1,v=-1,x=0,y=0,_=[],I=[],R=null,A={},E=[],T=[],b=[],S=0,k;for(+p.codepage>=0&&aa(+p.codepage);x!==m.length;++x){S=0;var w=m[x].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=w.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),N=D[0],F;if(w.length>0)switch(N){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&I.push(w.slice(3).replace(/;;/g,";"));break;case"C":var P=!1,O=!1,M=!1,U=!1,z=-1,j=-1;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"A":break;case"X":v=parseInt(D[y].slice(1))-1,O=!0;break;case"Y":for(g=parseInt(D[y].slice(1))-1,O||(v=0),k=_.length;k<=g;++k)_[k]=[];break;case"K":F=D[y].slice(1),F.charAt(0)==='"'?F=F.slice(1,F.length-1):F==="TRUE"?F=!0:F==="FALSE"?F=!1:isNaN(ca(F))?isNaN(Sc(F).getDate())||(F=pn(F)):(F=ca(F),R!==null&&Lc(R)&&(F=Ap(F))),P=!0;break;case"E":U=!0;var H=ac(D[y].slice(1),{r:g,c:v});_[g][v]=[_[g][v],H];break;case"S":M=!0,_[g][v]=[_[g][v],"S5S"];break;case"G":break;case"R":z=parseInt(D[y].slice(1))-1;break;case"C":j=parseInt(D[y].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+w)}if(P&&(_[g][v]&&_[g][v].length==2?_[g][v][0]=F:_[g][v]=F,R=null),M){if(U)throw new Error("SYLK shared formula cannot have own formula");var W=z>-1&&_[z][j];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");_[g][v][1]=Z4(W[1],{r:g-z,c:v-j})}break;case"F":var K=0;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"X":v=parseInt(D[y].slice(1))-1,++K;break;case"Y":for(g=parseInt(D[y].slice(1))-1,k=_.length;k<=g;++k)_[k]=[];break;case"M":S=parseInt(D[y].slice(1))/20;break;case"F":break;case"G":break;case"P":R=I[parseInt(D[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(b=D[y].slice(1).split(" "),k=parseInt(b[0],10);k<=parseInt(b[1],10);++k)S=parseInt(b[2],10),T[k-1]=S===0?{hidden:!0}:{wch:S},Tc(T[k-1]);break;case"C":v=parseInt(D[y].slice(1))-1,T[v]||(T[v]={});break;case"R":g=parseInt(D[y].slice(1))-1,E[g]||(E[g]={}),S>0?(E[g].hpt=S,E[g].hpx=Ad(S)):S===0&&(E[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+w)}K<1&&(R=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+w)}}return E.length>0&&(A["!rows"]=E),T.length>0&&(A["!cols"]=T),p&&p.sheetRows&&(_=_.slice(0,p.sheetRows)),[_,A]}function a(h,p){var m=s(h,p),g=m[0],v=m[1],x=Uc(g,p);return Fa(v).forEach(function(y){x[y]=v[y]}),x}function o(h,p){return vo(a(h,p),p)}function l(h,p,m,g){var v="C;Y"+(m+1)+";X"+(g+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+XZ(h.f,{r:m,c:g}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function c(h,p){p.forEach(function(m,g){var v="F;W"+(g+1)+" "+(g+1)+" ";m.hidden?v+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=ph(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=mh(m.wpx)),typeof m.wch=="number"&&(v+=Math.round(m.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function u(h,p){p.forEach(function(m,g){var v="F;";m.hidden?v+="M0;":m.hpt?v+="M"+20*m.hpt+";":m.hpx&&(v+="M"+20*Y4(m.hpx)+";"),v.length>2&&h.push(v+"R"+(g+1))})}function f(h,p){var m=["ID;PWXL;N;E"],g=[],v=Ur(h["!ref"]),x,y=Array.isArray(h),_=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),h["!cols"]&&c(m,h["!cols"]),h["!rows"]&&u(m,h["!rows"]),m.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var I=v.s.r;I<=v.e.r;++I)for(var R=v.s.c;R<=v.e.c;++R){var A=Rt({r:I,c:R});x=y?(h[I]||[])[R]:h[A],!(!x||x.v==null&&(!x.f||x.F))&&g.push(l(x,h,I,R))}return m.join(_)+_+g.join(_)+_+"E"+_}return{to_workbook:o,to_sheet:a,from_sheet:f}}(),uQ=function(){function t(i,a){switch(a.type){case"base64":return e(ks(i),a);case"binary":return e(i,a);case"buffer":return e(Jt&&Buffer.isBuffer(i)?i.toString("binary"):dl(i),a);case"array":return e(Zo(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,u=0,f=[];u!==o.length;++u){if(o[u].trim()==="BOT"){f[++l]=[],c=0;continue}if(!(l<0)){var h=o[u].trim().split(","),p=h[0],m=h[1];++u;for(var g=o[u]||"";(g.match(/["]/g)||[]).length&1&&u<o.length-1;)g+=`
`+o[++u];switch(g=g.trim(),+p){case-1:if(g==="BOT"){f[++l]=[],c=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?f[l][c]=!0:g==="FALSE"?f[l][c]=!1:isNaN(ca(m))?isNaN(Sc(m).getDate())?f[l][c]=m:f[l][c]=pn(m):f[l][c]=ca(m),++c;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),f[l][c++]=g!==""?g:null;break}if(g==="EOD")break}}return a&&a.sheetRows&&(f=f.slice(0,a.sheetRows)),f}function r(i,a){return Uc(t(i,a),a)}function n(i,a){return vo(r(i,a),a)}var s=function(){var i=function(l,c,u,f,h){l.push(c),l.push(u+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},a=function(l,c,u,f){l.push(c+","+u),l.push(c==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var c=[],u=Ur(l["!ref"]),f,h=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,u.e.r-u.s.r+1,""),i(c,"TUPLES",0,u.e.c-u.s.c+1,""),i(c,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){a(c,-1,0,"BOT");for(var m=u.s.c;m<=u.e.c;++m){var g=Rt({r:p,c:m});if(f=h?(l[p]||[])[m]:l[g],!f){a(c,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?a(c,1,0,"="+f.f):a(c,1,0,""):a(c,0,v,"V");break;case"b":a(c,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Hs(f.z||Mt[14],cs(pn(f.v)))),a(c,0,f.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var x=`\r
`,y=c.join(x);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),dQ=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),m=-1,g=-1,v=0,x=[];v!==p.length;++v){var y=p[v].trim().split(":");if(y[0]==="cell"){var _=is(y[1]);if(x.length<=_.r)for(m=x.length;m<=_.r;++m)x[m]||(x[m]=[]);switch(m=_.r,g=_.c,y[2]){case"t":x[m][g]=t(y[3]);break;case"v":x[m][g]=+y[3];break;case"vtf":var I=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[m][g]=!!+y[4];break;default:x[m][g]=+y[4];break}y[2]=="vtf"&&(x[m][g]=[x[m][g],I])}}}return h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),x}function n(f,h){return Uc(r(f,h),h)}function s(f,h){return vo(n(f,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],m,g="",v=Bc(f["!ref"]),x=Array.isArray(f),y=v.s.r;y<=v.e.r;++y)for(var _=v.s.c;_<=v.e.c;++_)if(g=Rt({r:y,c:_}),m=x?(f[y]||[])[_]:f[g],!(!m||m.v==null||m.t==="z")){switch(p=["cell",g,"t"],m.t){case"s":case"str":p.push(e(m.v));break;case"n":m.f?(p[2]="vtf",p[3]="n",p[4]=m.v,p[5]=e(m.f)):(p[2]="v",p[3]=m.v);break;case"b":p[2]="vt"+(m.f?"f":"c"),p[3]="nl",p[4]=m.v?"1":"0",p[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var I=cs(pn(m.v));p[2]="vtc",p[3]="nd",p[4]=""+I,p[5]=m.w||Hs(m.z||Mt[14],I);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(f){return[i,a,o,a,c(f),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),Sd=function(){function t(u,f,h,p,m){m.raw?f[h][p]=u:u===""||(u==="TRUE"?f[h][p]=!0:u==="FALSE"?f[h][p]=!1:isNaN(ca(u))?isNaN(Sc(u).getDate())?f[h][p]=u:f[h][p]=pn(u):f[h][p]=ca(u))}function e(u,f){var h=f||{},p=[];if(!u||u.length===0)return p;for(var m=u.split(/[\r\n]/),g=m.length-1;g>=0&&m[g].length===0;)--g;for(var v=10,x=0,y=0;y<=g;++y)x=m[y].indexOf(" "),x==-1?x=m[y].length:x++,v=Math.max(v,x);for(y=0;y<=g;++y){p[y]=[];var _=0;for(t(m[y].slice(0,v).trim(),p,y,_,h),_=1;_<=(m[y].length-v)/10+1;++_)t(m[y].slice(v+(_-1)*10,v+_*10).trim(),p,y,_,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var f={},h=!1,p=0,m=0;p<u.length;++p)(m=u.charCodeAt(p))==34?h=!h:!h&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&m.push([f[p],p]);if(!m.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&m.push([f[p],p])}return m.sort(function(g,v){return g[0]-v[0]||n[g[1]]-n[v[1]]}),r[m.pop()[1]]||44}function i(u,f){var h=f||{},p="",m=h.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):h&&h.FS?p=h.FS:p=s(u.slice(0,1024));var v=0,x=0,y=0,_=0,I=0,R=p.charCodeAt(0),A=!1,E=0,T=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var b=h.dateNF!=null?bX(h.dateNF):null;function S(){var k=u.slice(_,I),w={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)w.t="z";else if(h.raw)w.t="s",w.v=k;else if(k.trim().length===0)w.t="s",w.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(w.t="s",w.v=k.slice(2,-1).replace(/""/g,'"')):JZ(k)?(w.t="n",w.f=k.slice(1)):(w.t="s",w.v=k);else if(k=="TRUE")w.t="b",w.v=!0;else if(k=="FALSE")w.t="b",w.v=!1;else if(!isNaN(y=ca(k)))w.t="n",h.cellText!==!1&&(w.w=k),w.v=y;else if(!isNaN(Sc(k).getDate())||b&&k.match(b)){w.z=h.dateNF||Mt[14];var D=0;b&&k.match(b)&&(k=SX(k,h.dateNF,k.match(b)||[]),D=1),h.cellDates?(w.t="d",w.v=pn(k,D)):(w.t="n",w.v=cs(pn(k,D))),h.cellText!==!1&&(w.w=Hs(w.z,w.v instanceof Date?cs(w.v):w.v)),h.cellNF||delete w.z}else w.t="s",w.v=k;if(w.t=="z"||(h.dense?(m[v]||(m[v]=[]),m[v][x]=w):m[Rt({c:x,r:v})]=w),_=I+1,T=u.charCodeAt(_),g.e.c<x&&(g.e.c=x),g.e.r<v&&(g.e.r=v),E==R)++x;else if(x=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;I<u.length;++I)switch(E=u.charCodeAt(I)){case 34:T===34&&(A=!A);break;case R:case 10:case 13:if(!A&&S())break e;break}return I-_>0&&S(),m["!ref"]=rr(g),m}function a(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,f):Uc(e(u,f),f)}function o(u,f){var h="",p=f.type=="string"?[0,0,0,0]:Zx(u,f);switch(f.type){case"base64":h=ks(u);break;case"binary":h=u;break;case"buffer":f.codepage==65001?h=u.toString("utf8"):f.codepage&&typeof yd<"u"||(h=Jt&&Buffer.isBuffer(u)?u.toString("binary"):dl(u));break;case"array":h=Zo(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Er(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Er(h):f.type=="binary"&&typeof yd<"u",h.slice(0,19)=="socialcalc:version:"?dQ.to_sheet(f.type=="string"?h:Er(h),f):a(h,f)}function l(u,f){return vo(o(u,f),f)}function c(u){for(var f=[],h=Ur(u["!ref"]),p,m=Array.isArray(u),g=h.s.r;g<=h.e.r;++g){for(var v=[],x=h.s.c;x<=h.e.c;++x){var y=Rt({r:g,c:x});if(p=m?(u[g]||[])[x]:u[y],!p||p.v==null){v.push("          ");continue}for(var _=(p.w||(_i(p),p.w)||"").slice(0,10);_.length<10;)_+=" ";v.push(_+(x===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function fQ(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=cQ.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Sd.to_workbook(t,e)}}var ju=function(){function t(H,W,K){if(H){bn(H,H.l||0);for(var re=K.Enum||z;H.l<H.length;){var me=H.read_shift(2),ce=re[me]||re[65535],pe=H.read_shift(2),te=H.l+pe,Q=ce.f&&ce.f(H,pe,K);if(H.l=te,W(Q,ce,me))return}}}function e(H,W){switch(W.type){case"base64":return r(na(ks(H)),W);case"binary":return r(na(H),W);case"buffer":case"array":return r(H,W)}throw"Unsupported type "+W.type}function r(H,W){if(!H)return H;var K=W||{},re=K.dense?[]:{},me="Sheet1",ce="",pe=0,te={},Q=[],ye=[],X={s:{r:0,c:0},e:{r:0,c:0}},q=K.sheetRows||0;if(H[2]==0&&(H[3]==8||H[3]==9)&&H.length>=16&&H[14]==5&&H[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(H[2]==2)K.Enum=z,t(H,function(ae,le,de){switch(de){case 0:K.vers=ae,ae>=4096&&(K.qpro=!0);break;case 6:X=ae;break;case 204:ae&&(ce=ae);break;case 222:ce=ae;break;case 15:case 51:K.qpro||(ae[1].v=ae[1].v.slice(1));case 13:case 14:case 16:de==14&&(ae[2]&112)==112&&(ae[2]&15)>1&&(ae[2]&15)<15&&(ae[1].z=K.dateNF||Mt[14],K.cellDates&&(ae[1].t="d",ae[1].v=Ap(ae[1].v))),K.qpro&&ae[3]>pe&&(re["!ref"]=rr(X),te[me]=re,Q.push(me),re=K.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},pe=ae[3],me=ce||"Sheet"+(pe+1),ce="");var Se=K.dense?(re[ae[0].r]||[])[ae[0].c]:re[Rt(ae[0])];if(Se){Se.t=ae[1].t,Se.v=ae[1].v,ae[1].z!=null&&(Se.z=ae[1].z),ae[1].f!=null&&(Se.f=ae[1].f);break}K.dense?(re[ae[0].r]||(re[ae[0].r]=[]),re[ae[0].r][ae[0].c]=ae[1]):re[Rt(ae[0])]=ae[1];break}},K);else if(H[2]==26||H[2]==14)K.Enum=j,H[2]==14&&(K.qpro=!0,H.l=0),t(H,function(ae,le,de){switch(de){case 204:me=ae;break;case 22:ae[1].v=ae[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ae[3]>pe&&(re["!ref"]=rr(X),te[me]=re,Q.push(me),re=K.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},pe=ae[3],me="Sheet"+(pe+1)),q>0&&ae[0].r>=q)break;K.dense?(re[ae[0].r]||(re[ae[0].r]=[]),re[ae[0].r][ae[0].c]=ae[1]):re[Rt(ae[0])]=ae[1],X.e.c<ae[0].c&&(X.e.c=ae[0].c),X.e.r<ae[0].r&&(X.e.r=ae[0].r);break;case 27:ae[14e3]&&(ye[ae[14e3][0]]=ae[14e3][1]);break;case 1537:ye[ae[0]]=ae[1],ae[0]==pe&&(me=ae[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+H[2]);if(re["!ref"]=rr(X),te[ce||me]=re,Q.push(ce||me),!ye.length)return{SheetNames:Q,Sheets:te};for(var Y={},ne=[],ve=0;ve<ye.length;++ve)te[Q[ve]]?(ne.push(ye[ve]||Q[ve]),Y[ye[ve]]=te[ye[ve]]||te[Q[ve]]):(ne.push(ye[ve]),Y[ye[ve]]={"!ref":"A1"});return{SheetNames:ne,Sheets:Y}}function n(H,W){var K=W||{};if(+K.codepage>=0&&aa(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Ev(),me=Ur(H["!ref"]),ce=Array.isArray(H),pe=[];Js(re,0,i(1030)),Js(re,6,l(me));for(var te=Math.min(me.e.r,8191),Q=me.s.r;Q<=te;++Q)for(var ye=kn(Q),X=me.s.c;X<=me.e.c;++X){Q===me.s.r&&(pe[X]=on(X));var q=pe[X]+ye,Y=ce?(H[Q]||[])[X]:H[q];if(!(!Y||Y.t=="z"))if(Y.t=="n")(Y.v|0)==Y.v&&Y.v>=-32768&&Y.v<=32767?Js(re,13,p(Q,X,Y.v)):Js(re,14,g(Q,X,Y.v));else{var ne=_i(Y);Js(re,15,f(Q,X,ne.slice(0,239)))}}return Js(re,1),re.end()}function s(H,W){var K=W||{};if(+K.codepage>=0&&aa(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Ev();Js(re,0,a(H));for(var me=0,ce=0;me<H.SheetNames.length;++me)(H.Sheets[H.SheetNames[me]]||{})["!ref"]&&Js(re,27,U(H.SheetNames[me],ce++));var pe=0;for(me=0;me<H.SheetNames.length;++me){var te=H.Sheets[H.SheetNames[me]];if(!(!te||!te["!ref"])){for(var Q=Ur(te["!ref"]),ye=Array.isArray(te),X=[],q=Math.min(Q.e.r,8191),Y=Q.s.r;Y<=q;++Y)for(var ne=kn(Y),ve=Q.s.c;ve<=Q.e.c;++ve){Y===Q.s.r&&(X[ve]=on(ve));var ae=X[ve]+ne,le=ye?(te[Y]||[])[ve]:te[ae];if(!(!le||le.t=="z"))if(le.t=="n")Js(re,23,S(Y,ve,pe,le.v));else{var de=_i(le);Js(re,22,E(Y,ve,pe,de.slice(0,239)))}}++pe}}return Js(re,1),re.end()}function i(H){var W=rn(2);return W.write_shift(2,H),W}function a(H){var W=rn(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var K=0,re=0,me=0,ce=0;ce<H.SheetNames.length;++ce){var pe=H.SheetNames[ce],te=H.Sheets[pe];if(!(!te||!te["!ref"])){++me;var Q=Bc(te["!ref"]);K<Q.e.r&&(K=Q.e.r),re<Q.e.c&&(re=Q.e.c)}}return K>8191&&(K=8191),W.write_shift(2,K),W.write_shift(1,me),W.write_shift(1,re),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(H,W,K){var re={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&K.qpro?(re.s.c=H.read_shift(1),H.l++,re.s.r=H.read_shift(2),re.e.c=H.read_shift(1),H.l++,re.e.r=H.read_shift(2),re):(re.s.c=H.read_shift(2),re.s.r=H.read_shift(2),W==12&&K.qpro&&(H.l+=2),re.e.c=H.read_shift(2),re.e.r=H.read_shift(2),W==12&&K.qpro&&(H.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function l(H){var W=rn(8);return W.write_shift(2,H.s.c),W.write_shift(2,H.s.r),W.write_shift(2,H.e.c),W.write_shift(2,H.e.r),W}function c(H,W,K){var re=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(re[0].c=H.read_shift(1),re[3]=H.read_shift(1),re[0].r=H.read_shift(2),H.l+=2):(re[2]=H.read_shift(1),re[0].c=H.read_shift(2),re[0].r=H.read_shift(2)),re}function u(H,W,K){var re=H.l+W,me=c(H,W,K);if(me[1].t="s",K.vers==20768){H.l++;var ce=H.read_shift(1);return me[1].v=H.read_shift(ce,"utf8"),me}return K.qpro&&H.l++,me[1].v=H.read_shift(re-H.l,"cstr"),me}function f(H,W,K){var re=rn(7+K.length);re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,H),re.write_shift(1,39);for(var me=0;me<re.length;++me){var ce=K.charCodeAt(me);re.write_shift(1,ce>=128?95:ce)}return re.write_shift(1,0),re}function h(H,W,K){var re=c(H,W,K);return re[1].v=H.read_shift(2,"i"),re}function p(H,W,K){var re=rn(7);return re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,H),re.write_shift(2,K,"i"),re}function m(H,W,K){var re=c(H,W,K);return re[1].v=H.read_shift(8,"f"),re}function g(H,W,K){var re=rn(13);return re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,H),re.write_shift(8,K,"f"),re}function v(H,W,K){var re=H.l+W,me=c(H,W,K);if(me[1].v=H.read_shift(8,"f"),K.qpro)H.l=re;else{var ce=H.read_shift(2);I(H.slice(H.l,H.l+ce),me),H.l+=ce}return me}function x(H,W,K){var re=W&32768;return W&=-32769,W=(re?H:0)+(W>=8192?W-16384:W),(re?"":"$")+(K?on(W):kn(W))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function I(H,W){bn(H,0);for(var K=[],re=0,me="",ce="",pe="",te="";H.l<H.length;){var Q=H[H.l++];switch(Q){case 0:K.push(H.read_shift(8,"f"));break;case 1:ce=x(W[0].c,H.read_shift(2),!0),me=x(W[0].r,H.read_shift(2),!1),K.push(ce+me);break;case 2:{var ye=x(W[0].c,H.read_shift(2),!0),X=x(W[0].r,H.read_shift(2),!1);ce=x(W[0].c,H.read_shift(2),!0),me=x(W[0].r,H.read_shift(2),!1),K.push(ye+X+":"+ce+me)}break;case 3:if(H.l<H.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(H.read_shift(2));break;case 6:{for(var q="";Q=H[H.l++];)q+=String.fromCharCode(Q);K.push('"'+q.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:te=K.pop(),pe=K.pop(),K.push(["AND","OR"][Q-20]+"("+pe+","+te+")");break;default:if(Q<32&&_[Q])te=K.pop(),pe=K.pop(),K.push(pe+_[Q]+te);else if(y[Q]){if(re=y[Q][1],re==69&&(re=H[H.l++]),re>K.length){console.error("WK1 bad formula parse 0x"+Q.toString(16)+":|"+K.join("|")+"|");return}var Y=K.slice(-re);K.length-=re,K.push(y[Q][0]+"("+Y.join(",")+")")}else return Q<=7?console.error("WK1 invalid opcode "+Q.toString(16)):Q<=24?console.error("WK1 unsupported op "+Q.toString(16)):Q<=30?console.error("WK1 invalid opcode "+Q.toString(16)):Q<=115?console.error("WK1 unsupported function opcode "+Q.toString(16)):console.error("WK1 unrecognized opcode "+Q.toString(16))}}K.length==1?W[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function R(H){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=H.read_shift(2),W[3]=H[H.l++],W[0].c=H[H.l++],W}function A(H,W){var K=R(H);return K[1].t="s",K[1].v=H.read_shift(W-4,"cstr"),K}function E(H,W,K,re){var me=rn(6+re.length);me.write_shift(2,H),me.write_shift(1,K),me.write_shift(1,W),me.write_shift(1,39);for(var ce=0;ce<re.length;++ce){var pe=re.charCodeAt(ce);me.write_shift(1,pe>=128?95:pe)}return me.write_shift(1,0),me}function T(H,W){var K=R(H);K[1].v=H.read_shift(2);var re=K[1].v>>1;if(K[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return K[1].v=re,K}function b(H,W){var K=R(H),re=H.read_shift(4),me=H.read_shift(4),ce=H.read_shift(2);if(ce==65535)return re===0&&me===3221225472?(K[1].t="e",K[1].v=15):re===0&&me===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var pe=ce&32768;return ce=(ce&32767)-16446,K[1].v=(1-pe*2)*(me*Math.pow(2,ce+32)+re*Math.pow(2,ce)),K}function S(H,W,K,re){var me=rn(14);if(me.write_shift(2,H),me.write_shift(1,K),me.write_shift(1,W),re==0)return me.write_shift(4,0),me.write_shift(4,0),me.write_shift(2,65535),me;var ce=0,pe=0,te=0,Q=0;return re<0&&(ce=1,re=-re),pe=Math.log2(re)|0,re/=Math.pow(2,pe-31),Q=re>>>0,Q&2147483648||(re/=2,++pe,Q=re>>>0),re-=Q,Q|=2147483648,Q>>>=0,re*=Math.pow(2,32),te=re>>>0,me.write_shift(4,te),me.write_shift(4,Q),pe+=16383+(ce?32768:0),me.write_shift(2,pe),me}function k(H,W){var K=b(H);return H.l+=W-14,K}function w(H,W){var K=R(H),re=H.read_shift(4);return K[1].v=re>>6,K}function D(H,W){var K=R(H),re=H.read_shift(8,"f");return K[1].v=re,K}function N(H,W){var K=D(H);return H.l+=W-10,K}function F(H,W){return H[H.l+W-1]==0?H.read_shift(W,"cstr"):""}function P(H,W){var K=H[H.l++];K>W-1&&(K=W-1);for(var re="";re.length<K;)re+=String.fromCharCode(H[H.l++]);return re}function O(H,W,K){if(!(!K.qpro||W<21)){var re=H.read_shift(1);H.l+=17,H.l+=1,H.l+=2;var me=H.read_shift(W-21,"cstr");return[re,me]}}function M(H,W){for(var K={},re=H.l+W;H.l<re;){var me=H.read_shift(2);if(me==14e3){for(K[me]=[0,""],K[me][0]=H.read_shift(2);H[H.l];)K[me][1]+=String.fromCharCode(H[H.l]),H.l++;H.l++}}return K}function U(H,W){var K=rn(5+H.length);K.write_shift(2,14e3),K.write_shift(2,W);for(var re=0;re<H.length;++re){var me=H.charCodeAt(re);K[K.l++]=me>127?95:me}return K[K.l++]=0,K}var z={0:{n:"BOF",f:Yr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:F},222:{n:"SHEETNAMELP",f:P},65535:{n:""}},j={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:A},23:{n:"NUMBER17",f:b},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:M},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:w},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:N},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:F},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:O},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function hQ(t){var e={},r=t.match(Jn),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=Tt(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=kx[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var pQ=function(){var t=_d("t"),e=_d("rPr");function r(i){var a=i.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:nr(a[1])},l=i.match(e);return l&&(o.s=hQ(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),mQ=function(){var e=/(\r\n|\n)/g;function r(s,i,a){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),a.push("</b>")),s.i&&(i.push("<i>"),a.push("</i>")),s.strike&&(i.push("<s>"),a.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),gQ=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,vQ=/<(?:\w+:)?r>/,xQ=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function zx(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=nr(Er(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Er(t),r&&(n.h=Mx(n.t))):t.match(vQ)&&(n.r=Er(t),n.t=nr(Er((t.replace(xQ,"").match(gQ)||[]).join("").replace(Jn,""))),r&&(n.h=mQ(pQ(n.r)))),n):{t:""}}var yQ=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,EQ=/<(?:\w+:)?(?:si|sstItem)>/g,_Q=/<\/(?:\w+:)?(?:si|sstItem)>/;function bQ(t,e){var r=[],n="";if(!t)return r;var s=t.match(yQ);if(s){n=s[2].replace(EQ,"").split(_Q);for(var i=0;i!=n.length;++i){var a=zx(n[i].trim(),e);a!=null&&(r[r.length]=a)}s=Tt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function SQ(t){return[t.read_shift(4),t.read_shift(4)]}function TQ(t,e){var r=[],n=!1;return Ti(t,function(i,a,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function G4(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function li(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function AQ(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=li(t,4),e.U=li(t,4),e.W=li(t,4),e}function wQ(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function CQ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(wQ(t));return e}function IQ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function kQ(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=li(t,4),e.U=li(t,4),e.W=li(t,4),e}function DQ(t){var e=kQ(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function W4(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function z4(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function PQ(t){var e=li(t);switch(e.Minor){case 2:return[e.Minor,RQ(t)];case 3:return[e.Minor,FQ()];case 4:return[e.Minor,OQ(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function RQ(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=W4(t,r),s=z4(t,t.length-t.l);return{t:"Std",h:n,v:s}}function FQ(){throw new Error("File is password-protected: ECMA-376 Extensible")}function OQ(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Jn,function(i){var a=Tt(i);switch(Ba(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function NQ(t,e){var r={},n=r.EncryptionVersionInfo=li(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=W4(t,s),e-=s,r.EncryptionVerifier=z4(t,e),r}function MQ(t){var e={},r=e.EncryptionVersionInfo=li(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function LQ(t){var e=0,r,n=G4(t),s=n.length+1,i,a,o,l,c;for(r=uo(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var K4=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},s=function(a,o){return n(a^o)},i=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],f=0;f!=7;++f)u&64&&(o^=r[l]),u*=2,--l;return o};return function(a){for(var o=G4(a),l=i(o),c=o.length,u=uo(16),f=0;f!=16;++f)u[f]=0;var h,p,m;for((c&1)===1&&(h=l>>8,u[c]=s(t[0],h),--c,h=l&255,p=o[o.length-1],u[c]=s(p,h));c>0;)--c,h=l>>8,u[c]=s(o[c],h),--c,h=l&255,u[c]=s(o[c],h);for(c=15,m=15-o.length;m>0;)h=l>>8,u[c]=s(t[m],h),--c,--m,h=l&255,u[c]=s(o[c],h),--c,--m;return u}}(),BQ=function(t,e,r,n,s){s||(s=e),n||(n=K4(t));var i,a;for(i=0;i!=e.length;++i)a=e[i],a^=n[r],a=(a>>5|a<<3)&255,s[i]=a,++r;return[s,r,n]},UQ=function(t){var e=0,r=K4(t);return function(n){var s=BQ("",n,e,r);return e=s[1],s[0]}};function $Q(t,e,r,n){var s={key:Yr(t),verificationBytes:Yr(t)};return r.password&&(s.verifier=LQ(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=UQ(r.password)),s}function VQ(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=MQ(t):n.Data=NQ(t,e),n}function HQ(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?VQ(t,e-2,n):$Q(t,r.biff>=8?e:e-2,r,n),n}var jQ=function(){function t(s,i){switch(i.type){case"base64":return e(ks(s),i);case"binary":return e(s,i);case"buffer":return e(Jt&&Buffer.isBuffer(s)?s.toString("binary"):dl(s),i);case"array":return e(Zo(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,m,g=-1;m=h.exec(u);){switch(m[0]){case"\\cell":var v=u.slice(p,h.lastIndex-m[0].length);if(v[0]==" "&&(v=v.slice(1)),++g,v.length){var x={v,t:"s"};Array.isArray(o)?o[f][g]=x:o[Rt({r:f,c:g})]=x}break}p=h.lastIndex}g>c.e.c&&(c.e.c=g)}),o["!ref"]=rr(c),o}function r(s,i){return vo(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Ur(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var u=a.s.c;u<=a.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=a.s.c;u<=a.e.c;++u){var f=Rt({r:c,c:u});o=l?(s[c]||[])[u]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(_i(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function GQ(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Td(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function WQ(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),a=s-i;if(a===0)return[0,0,e];var o=0,l=0,c=s+i;switch(l=a/(c>1?2-c:c),s){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function zQ(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,a=[i,i,i],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,a[0]+=s,a[1]+=l;break;case 1:l=s*(2-o),a[0]+=l,a[1]+=s;break;case 2:l=s*(o-2),a[1]+=s,a[2]+=l;break;case 3:l=s*(4-o),a[1]+=l,a[2]+=s;break;case 4:l=s*(o-4),a[2]+=s,a[0]+=l;break;case 5:l=s*(6-o),a[2]+=l,a[0]+=s;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function hh(t,e){if(e===0)return t;var r=WQ(GQ(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),Td(zQ(r))}var q4=6,KQ=15,qQ=1,as=q4;function ph(t){return Math.floor((t+Math.round(128/as)/256)*as)}function mh(t){return Math.floor((t-5)/as*100+.5)/100}function Tv(t){return Math.round((t*as+5)/as*256)/256}function eg(t){return Tv(mh(ph(t)))}function Kx(t){var e=Math.abs(t-eg(t)),r=as;if(e>.005)for(as=qQ;as<KQ;++as)Math.abs(t-eg(t))<=e&&(e=Math.abs(t-eg(t)),r=as);as=r}function Tc(t){t.width?(t.wpx=ph(t.width),t.wch=mh(t.wpx),t.MDW=as):t.wpx?(t.wch=mh(t.wpx),t.width=Tv(t.wch),t.MDW=as):typeof t.wch=="number"&&(t.width=Tv(t.wch),t.wpx=ph(t.width),t.MDW=as),t.customWidth&&delete t.customWidth}var XQ=96,X4=XQ;function Y4(t){return t*96/X4}function Ad(t){return t*X4/96}var YQ={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function JQ(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(Jn)||[]).forEach(function(a){var o=Tt(a);switch(Ba(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Ir(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Ir(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function QQ(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(Jn)||[]).forEach(function(a){var o=Tt(a);switch(Ba(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function ZQ(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(Jn)||[]).forEach(function(a){var o=Tt(a);switch(Ba(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=Er(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Ir(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Ir(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Ir(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Ir(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Ir(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Ir(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Ir(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=kx[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Ir(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=Vo[s.color.index];s.color.index==81&&(l=Vo[1]),l||(l=Vo[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=hh(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function eZ(t,e,r){e.NumberFmt=[];for(var n=Fa(Mt),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Mt[n[s]];var i=t[0].match(Jn);if(i)for(s=0;s<i.length;++s){var a=Tt(i[s]);switch(Ba(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=nr(Er(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}$o(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var jf=["numFmtId","fillId","fontId","borderId","xfId"],Gf=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function tZ(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Jn)||[]).forEach(function(i){var a=Tt(i),o=0;switch(Ba(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<jf.length;++o)n[jf[o]]&&(n[jf[o]]=parseInt(n[jf[o]],10));for(o=0;o<Gf.length;++o)n[Gf[o]]&&(n[Gf[o]]=Ir(n[Gf[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=Ir(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var rZ=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(e))&&eZ(f,u,c),(f=o.match(s))&&ZQ(f,u,l,c),(f=o.match(n))&&QQ(f,u,l,c),(f=o.match(i))&&JQ(f,u,l,c),(f=o.match(r))&&tZ(f,u,c),u}}();function nZ(t,e){var r=t.read_shift(2),n=qn(t);return[r,n]}function sZ(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=pY(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=hY(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=qn(t),n}var aZ=Yn;function iZ(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}var oZ=Yn;function lZ(t,e,r){var n={};n.NumberFmt=[];for(var s in Mt)n.NumberFmt[s]=Mt[s];n.CellXf=[],n.Fonts=[];var i=[],a=!1;return Ti(t,function(l,c,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],$o(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=hh(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:i.push(u),a=!0;break;case 38:i.pop(),a=!1;break;default:if(c.T>0)i.push(u);else if(c.T<0)i.pop();else if(!a||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}var cZ=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function uZ(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Jn)||[]).forEach(function(s){var i=Tt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[cZ.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function dZ(){}function fZ(){}var hZ=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,pZ=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,mZ=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function gZ(t,e,r){e.themeElements={};var n;[["clrScheme",hZ,uZ],["fontScheme",pZ,dZ],["fmtScheme",mZ,fZ]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var vZ=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function J4(t,e){(!t||t.length===0)&&(t=xZ());var r,n={};if(!(r=t.match(vZ)))throw new Error("themeElements not found in theme");return gZ(r[0],n,e),n.raw=t,n}function xZ(t,e){var r=[l4];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function yZ(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var a;try{a=o4(i,{type:"array"})}catch{return}var o=Ts(a,"theme/theme/theme1.xml",!0);if(o)return J4(o,r)}}function EZ(t){return t.read_shift(4)}function _Z(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=bZ(t,4);break;case 2:e.xclrValue=L4(t);break;case 3:e.xclrValue=EZ(t);break;case 4:t.l+=4;break}return t.l+=8,e}function bZ(t,e){return Yn(t,e)}function SZ(t,e){return Yn(t,e)}function TZ(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=_Z(t);break;case 6:n[1]=SZ(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function AZ(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(TZ(t,r-t.l));return{ixfe:n,ext:i}}function wZ(t,e){e.forEach(function(r){switch(r[0]){}})}function CZ(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:qn(t)}}function IZ(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function kZ(t){return t.l+=4,t.read_shift(4)!=0}function DZ(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],a=!1,o=2;return Ti(t,function(l,c,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:i.push(u),a=!0;break;case 36:i.pop(),a=!1;break;default:if(!c.T){if(!a||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function PZ(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,a;return t.replace(Jn,function(o){var l=Tt(o);switch(Ba(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function RZ(t){var e=[];if(!t)return e;var r=1;return(t.match(Jn)||[]).forEach(function(n){var s=Tt(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function FZ(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Rt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function OZ(t,e,r){var n=[];return Ti(t,function(i,a,o){switch(o){case 63:n.push(i);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function NZ(t,e,r,n){if(!t)return t;var s=n||{},i=!1;Ti(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function MZ(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function jS(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(a){var o=is(a.ref);if(s?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[a.ref],!i){i={t:"z"},s?t[o.r][o.c]=i:t[a.ref]=i;var l=Ur(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=rr(l);c!==t["!ref"]&&(t["!ref"]=c)}i.c||(i.c=[]);var u={a:a.author,t:a.t,r:a.r,T:r};a.h&&(u.h=a.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(u.a==n[f].id){u.a=n[f].name||u.a;break}}i.c.push(u)})}function LZ(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Tt(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=is(l.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var f=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&zx(f[1])||{r:"",t:"",h:""};c.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),c.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=h.h),n.push(c)}}}}),n}function BZ(t,e){var r=[],n=!1,s={},i=0;return t.replace(Jn,function(o,l){var c=Tt(o);switch(Ba(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=l+o.length;break;case"</text>":s.t=t.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function UZ(t,e){var r=[],n=!1;return t.replace(Jn,function(i){var a=Tt(i);switch(Ba(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return i}),r}function $Z(t){var e={};e.iauthor=t.read_shift(4);var r=hl(t);return e.rfx=r.s,e.ref=Rt(r.s),t.l+=16,e}var VZ=qn;function HZ(t,e){var r=[],n=[],s={},i=!1;return Ti(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}var jZ="application/vnd.ms-office.vbaProject";function GZ(t){var e=er.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");er.utils.cfb_add(e,s,t.FileIndex[n].content)}}),er.write(e)}function WZ(){return{"!type":"dialog"}}function zZ(){return{"!type":"dialog"}}function KZ(){return{"!type":"macro"}}function qZ(){return{"!type":"macro"}}var ac=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=e.c:--u,l?c+=e.r:--c,s+(o?"":"$")+on(u)+(l?"":"$")+kn(c)}return function(s,i){return e=i,s.replace(t,r)}}(),Q4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,XZ=function(){return function(e,r){return e.replace(Q4,function(n,s,i,a,o,l){var c=$x(a)-(i?0:r.c),u=Ux(l)-(o?0:r.r),f=u==0?"":o?u+1:"["+u+"]",h=c==0?"":i?c+1:"["+c+"]";return s+"R"+f+"C"+h})}}();function Z4(t,e){return t.replace(Q4,function(r,n,s,i,a,o){return n+(s=="$"?s+i:on($x(i)+e.c))+(a=="$"?a+o:kn(Ux(o)+e.r))})}function YZ(t,e,r){var n=Bc(e),s=n.s,i=is(r),a={r:i.r-s.r,c:i.c-s.c};return Z4(t,a)}function JZ(t){return t.length!=1}function GS(t){return t.replace(/_xlfn\./g,"")}function zr(t){t.l+=1}function fo(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function ek(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return tk(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=fo(t),o=fo(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function tk(t){var e=fo(t),r=fo(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function QZ(t,e,r){if(r.biff<8)return tk(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=fo(t),a=fo(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function rk(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return ZZ(t);var n=t.read_shift(r&&r.biff==12?4:2),s=fo(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function ZZ(t){var e=fo(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function eee(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function tee(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return ree(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function ree(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function nee(t,e,r){var n=(t[t.l++]&96)>>5,s=ek(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function see(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=ek(t,i,r);return[n,s,a]}function aee(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function iee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function oee(t,e,r){var n=(t[t.l++]&96)>>5,s=QZ(t,e-1,r);return[n,s]}function lee(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function WS(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function cee(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function uee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function dee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function fee(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function hee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function nk(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function pee(t){return t.read_shift(2),nk(t)}function mee(t){return t.read_shift(2),nk(t)}function gee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=rk(t,0,r);return[n,s]}function vee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=tee(t,0,r);return[n,s]}function xee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=rk(t,0,r);return[n,s,i]}function yee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[Ete[s],ik[s],n]}function Eee(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:_ee(t);return[s,(i[0]===0?ik:yte)[i[1]]]}function _ee(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function bee(t,e,r){t.l+=r&&r.biff==2?3:4}function See(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Tee(t){return t.l++,pl[t.read_shift(1)]}function Aee(t){return t.l++,t.read_shift(2)}function wee(t){return t.l++,t.read_shift(1)!==0}function Cee(t){return t.l++,Hn(t)}function Iee(t,e,r){return t.l++,Zd(t,e-1,r)}function kee(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Vr(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=pl[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Hn(t);break;case 2:r[1]=ml(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Dee(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?hl:wp)(t));return s}function Pee(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=kee(t,r.biff);return a}function Ree(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function Fee(t,e,r){if(r.biff==5)return Oee(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function Oee(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Nee(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Mee(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Lee(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Bee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var Uee=Yn,$ee=Yn,Vee=Yn;function tf(t,e,r){return t.l+=2,[eee(t)]}function qx(t){return t.l+=6,[]}var Hee=tf,jee=qx,Gee=qx,Wee=tf;function sk(t){return t.l+=2,[Yr(t),t.read_shift(2)&1]}var zee=tf,Kee=sk,qee=qx,Xee=tf,Yee=tf,Jee=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Qee(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=Jee[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function Zee(t){return t.l+=2,[t.read_shift(4)]}function ete(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function tte(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function rte(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function nte(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function ste(t){return t.l+=4,[0,0]}var zS={1:{n:"PtgExp",f:See},2:{n:"PtgTbl",f:Vee},3:{n:"PtgAdd",f:zr},4:{n:"PtgSub",f:zr},5:{n:"PtgMul",f:zr},6:{n:"PtgDiv",f:zr},7:{n:"PtgPower",f:zr},8:{n:"PtgConcat",f:zr},9:{n:"PtgLt",f:zr},10:{n:"PtgLe",f:zr},11:{n:"PtgEq",f:zr},12:{n:"PtgGe",f:zr},13:{n:"PtgGt",f:zr},14:{n:"PtgNe",f:zr},15:{n:"PtgIsect",f:zr},16:{n:"PtgUnion",f:zr},17:{n:"PtgRange",f:zr},18:{n:"PtgUplus",f:zr},19:{n:"PtgUminus",f:zr},20:{n:"PtgPercent",f:zr},21:{n:"PtgParen",f:zr},22:{n:"PtgMissArg",f:zr},23:{n:"PtgStr",f:Iee},26:{n:"PtgSheet",f:ete},27:{n:"PtgEndSheet",f:tte},28:{n:"PtgErr",f:Tee},29:{n:"PtgBool",f:wee},30:{n:"PtgInt",f:Aee},31:{n:"PtgNum",f:Cee},32:{n:"PtgArray",f:lee},33:{n:"PtgFunc",f:yee},34:{n:"PtgFuncVar",f:Eee},35:{n:"PtgName",f:Ree},36:{n:"PtgRef",f:gee},37:{n:"PtgArea",f:nee},38:{n:"PtgMemArea",f:Nee},39:{n:"PtgMemErr",f:Uee},40:{n:"PtgMemNoMem",f:$ee},41:{n:"PtgMemFunc",f:Mee},42:{n:"PtgRefErr",f:Lee},43:{n:"PtgAreaErr",f:aee},44:{n:"PtgRefN",f:vee},45:{n:"PtgAreaN",f:oee},46:{n:"PtgMemAreaN",f:rte},47:{n:"PtgMemNoMemN",f:nte},57:{n:"PtgNameX",f:Fee},58:{n:"PtgRef3d",f:xee},59:{n:"PtgArea3d",f:see},60:{n:"PtgRefErr3d",f:Bee},61:{n:"PtgAreaErr3d",f:iee},255:{}},ate={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},ite={1:{n:"PtgElfLel",f:sk},2:{n:"PtgElfRw",f:Xee},3:{n:"PtgElfCol",f:Hee},6:{n:"PtgElfRwV",f:Yee},7:{n:"PtgElfColV",f:Wee},10:{n:"PtgElfRadical",f:zee},11:{n:"PtgElfRadicalS",f:qee},13:{n:"PtgElfColS",f:jee},15:{n:"PtgElfColSV",f:Gee},16:{n:"PtgElfRadicalLel",f:Kee},25:{n:"PtgList",f:Qee},29:{n:"PtgSxName",f:Zee},255:{}},ote={0:{n:"PtgAttrNoop",f:ste},1:{n:"PtgAttrSemi",f:hee},2:{n:"PtgAttrIf",f:dee},4:{n:"PtgAttrChoose",f:cee},8:{n:"PtgAttrGoto",f:uee},16:{n:"PtgAttrSum",f:bee},32:{n:"PtgAttrBaxcel",f:WS},33:{n:"PtgAttrBaxcel",f:WS},64:{n:"PtgAttrSpace",f:pee},65:{n:"PtgAttrSpaceSemi",f:mee},128:{n:"PtgAttrIfError",f:fee},255:{}};function rf(t,e,r,n){if(n.biff<8)return Yn(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=Pee(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=Dee(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(Yn(t,e)),i}function nf(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=zS[i]||zS[ate[i]],(i===24||i===25)&&(s=(i===24?ite:ote)[t[t.l+1]]),!s||!s.f?Yn(t,e):a.push([s.n,s.f(t,e,r)]);return a}function lte(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var cte={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ute(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function ak(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function KS(t,e,r){var n=ak(t,e,r);return n=="#REF"?n:ute(n,r)}function Un(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,u,f=0,h=0,p,m="";if(!t[0]||!t[0][0])return"";for(var g=-1,v="",x=0,y=t[0].length;x<y;++x){var _=t[0][x];switch(_[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),g>=0){switch(t[0][g][1][0]){case 0:v=Lr(" ",t[0][g][1][1]);break;case 1:v=Lr("\r",t[0][g][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}c=c+v,g=-1}o.push(c+cte[_[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Uu(_[1][1],a,s),o.push($u(u,i));break;case"PtgRefN":u=r?Uu(_[1][1],r,s):_[1][1],o.push($u(u,i));break;case"PtgRef3d":f=_[1][1],u=Uu(_[1][2],a,s),m=KS(n,f,s),o.push(m+"!"+$u(u,i));break;case"PtgFunc":case"PtgFuncVar":var I=_[1][0],R=_[1][1];I||(I=0),I&=127;var A=I==0?[]:o.slice(-I);o.length-=I,R==="User"&&(R=A.shift()),o.push(R+"("+A.join(",")+")");break;case"PtgBool":o.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(_[1]);break;case"PtgNum":o.push(String(_[1]));break;case"PtgStr":o.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(_[1]);break;case"PtgAreaN":p=CS(_[1][1],r?{s:r}:a,s),o.push(Qm(p,s));break;case"PtgArea":p=CS(_[1][1],a,s),o.push(Qm(p,s));break;case"PtgArea3d":f=_[1][1],p=_[1][2],m=KS(n,f,s),o.push(m+"!"+Qm(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],T=E?E.Name:"SH33TJSNAME"+String(h);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),o.push(T);break;case"PtgNameX":var b=_[1][1];h=_[1][2];var S;if(s.biff<=5)b<0&&(b=-b),n[b]&&(S=n[b][h]);else{var k="";if(((n[b]||[])[0]||[])[0]==14849||(((n[b]||[])[0]||[])[0]==1025?n[b][h]&&n[b][h].itab>0&&(k=n.SheetNames[n[b][h].itab-1]+"!"):k=n.SheetNames[h-1]+"!"),n[b]&&n[b][h])k+=n[b][h].Name;else if(n[0]&&n[0][h])k+=n[0][h].Name;else{var w=(ak(n,b,s)||"").split(";;");w[h-1]?k=w[h-1]:k+="SH33TJSERRX"}o.push(k);break}S||(S={Name:"SH33TJSERRY"}),o.push(S.Name);break;case"PtgParen":var D="(",N=")";if(g>=0){switch(v="",t[0][g][1][0]){case 2:D=Lr(" ",t[0][g][1][1])+D;break;case 3:D=Lr("\r",t[0][g][1][1])+D;break;case 4:N=Lr(" ",t[0][g][1][1])+N;break;case 5:N=Lr("\r",t[0][g][1][1])+N;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}g=-1}o.push(D+o.pop()+N);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:_[1][1],r:_[1][0]};var F={c:r.c,r:r.r};if(n.sharedf[Rt(u)]){var P=n.sharedf[Rt(u)];o.push(Un(P,a,F,n,s))}else{var O=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(Un(c[1],a,F,n,s)),O=!0;break}O||o.push(_[1])}break;case"PtgArray":o.push("{"+lte(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var M=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&M.indexOf(t[0][x][0])==-1){_=t[0][g];var U=!0;switch(_[1][0]){case 4:U=!1;case 0:v=Lr(" ",_[1][1]);break;case 5:U=!1;case 1:v=Lr("\r",_[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}o.push((U?v:"")+o.pop()+(U?"":v)),g=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function dte(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],Yn(t,e-2)];var o=nf(t,a,r);return e!==a+s&&(i=rf(t,e-a-s,o,r)),t.l=n,[o,i]}function fte(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],Yn(t,e-2)];var o=nf(t,a,r);return e!==a+s&&(i=rf(t,e-a-s,o,r)),t.l=n,[o,i]}function hte(t,e,r,n){var s=t.l+e,i=nf(t,n,r),a;return s!==t.l&&(a=rf(t,s-t.l,i,r)),[i,a]}function pte(t,e,r){var n=t.l+e,s,i=t.read_shift(2),a=nf(t,i,r);return i==65535?[[],Yn(t,e-2)]:(e!==i+2&&(s=rf(t,n-i-2,a,r)),[a,s])}function mte(t){var e;if(si(t,t.l+6)!==65535)return[Hn(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function tg(t,e,r){var n=t.l+e,s=Ua(t);r.biff==2&&++t.l;var i=mte(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=fte(t,n-t.l,r);return{cell:s,val:i[0],formula:o,shared:a>>3&1,tt:i[1]}}function Cp(t,e,r){var n=t.read_shift(4),s=nf(t,n,r),i=t.read_shift(4),a=i>0?rf(t,i,s,r):null;return[s,a]}var gte=Cp,Ip=Cp,vte=Cp,xte=Cp,yte={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},ik={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Ete={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function qS(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function rg(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var Gu={},ic={};function Wu(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function ok(t,e,r,n,s,i){try{n.cellNF&&(t.z=Mt[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=pn(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Mt[e]==null&&$o(_X[e]||"General",e),t.t==="e")t.w=t.w||pl[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Ed(t.v);else if(t.t==="d"){var a=cs(t.v);(a|0)===a?t.w=a.toString(10):t.w=Ed(a)}else{if(t.v===void 0)return"";t.w=Qo(t.v,ic)}else t.t==="d"?t.w=Hs(e,cs(t.v),ic):t.w=Hs(e,t.v,ic)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=hh(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=hh(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function _te(t,e){var r=Ur(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=rr(r))}var bte=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Ste=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Tte=/<(?:\w:)?hyperlink [^>]*>/mg,Ate=/"(\w*:\w*)"/,wte=/<(?:\w:)?col\b[^>]*[\/]?>/g,Cte=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Ite=/<(?:\w:)?pageMargins[^>]*\/>/g,lk=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,kte=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Dte=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Pte(t,e,r,n,s,i,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",f=t.match(Ste);f?(c=t.slice(0,f.index),u=t.slice(f.index+f[0].length)):c=u=t;var h=c.match(lk);h?Xx(h[0],o,s,r):(h=c.match(kte))&&Rte(h[0],h[1]||"",o,s,r);var p=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var m=c.slice(p,p+50).match(Ate);m&&_te(o,m[1])}var g=c.match(Dte);g&&g[1]&&Bte(g[1],s);var v=[];if(e.cellStyles){var x=c.match(wte);x&&Nte(v,x)}f&&Ute(f[1],o,e,l,i,a);var y=u.match(Cte);y&&(o["!autofilter"]=Mte(y[0]));var _=[],I=u.match(bte);if(I)for(p=0;p!=I.length;++p)_[p]=Ur(I[p].slice(I[p].indexOf('"')+1));var R=u.match(Tte);R&&Fte(o,R,n);var A=u.match(Ite);if(A&&(o["!margins"]=Ote(Tt(A[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=rr(l)),e.sheetRows>0&&o["!ref"]){var E=Ur(o["!ref"]);e.sheetRows<=+E.e.r&&(E.e.r=e.sheetRows-1,E.e.r>l.e.r&&(E.e.r=l.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>l.e.c&&(E.e.c=l.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=rr(E))}return v.length>0&&(o["!cols"]=v),_.length>0&&(o["!merges"]=_),o}function Xx(t,e,r,n){var s=Tt(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=nr(Er(s.codeName)))}function Rte(t,e,r,n,s){Xx(t.slice(0,t.indexOf(">")),r,n,s)}function Fte(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=Tt(Er(e[s]),!0);if(!i.ref)return;var a=((r||{})["!id"]||[])[i.id];a?(i.Target=a.Target,i.location&&(i.Target+="#"+nr(i.location))):(i.Target="#"+nr(i.location),a={Target:i.Target,TargetMode:"Internal"}),i.Rel=a,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Ur(i.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Rt({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function Ote(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Nte(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=Tt(e[n],!0);s.hidden&&(s.hidden=Ir(s.hidden));var i=parseInt(s.min,10)-1,a=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,Kx(s.width)),Tc(s);i<=a;)t[i++]=In(s)}}function Mte(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var Lte=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Bte(t,e){e.Views||(e.Views=[{}]),(t.match(Lte)||[]).forEach(function(r,n){var s=Tt(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),Ir(s.rightToLeft)&&(e.Views[n].RTL=!0)})}var Ute=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=_d("v"),a=_d("f");return function(l,c,u,f,h,p){for(var m=0,g="",v=[],x=[],y=0,_=0,I=0,R="",A,E,T=0,b=0,S,k,w=0,D=0,N=Array.isArray(p.CellXf),F,P=[],O=[],M=Array.isArray(c),U=[],z={},j=!1,H=!!u.sheetStubs,W=l.split(e),K=0,re=W.length;K!=re;++K){g=W[K].trim();var me=g.length;if(me!==0){var ce=0;e:for(m=0;m<me;++m)switch(g[m]){case">":if(g[m-1]!="/"){++m;break e}if(u&&u.cellStyles){if(E=Tt(g.slice(ce,m),!0),T=E.r!=null?parseInt(E.r,10):T+1,b=-1,u.sheetRows&&u.sheetRows<T)continue;z={},j=!1,E.ht&&(j=!0,z.hpt=parseFloat(E.ht),z.hpx=Ad(z.hpt)),E.hidden=="1"&&(j=!0,z.hidden=!0),E.outlineLevel!=null&&(j=!0,z.level=+E.outlineLevel),j&&(U[T-1]=z)}break;case"<":ce=m;break}if(ce>=m)break;if(E=Tt(g.slice(ce,m),!0),T=E.r!=null?parseInt(E.r,10):T+1,b=-1,!(u.sheetRows&&u.sheetRows<T)){f.s.r>T-1&&(f.s.r=T-1),f.e.r<T-1&&(f.e.r=T-1),u&&u.cellStyles&&(z={},j=!1,E.ht&&(j=!0,z.hpt=parseFloat(E.ht),z.hpx=Ad(z.hpt)),E.hidden=="1"&&(j=!0,z.hidden=!0),E.outlineLevel!=null&&(j=!0,z.level=+E.outlineLevel),j&&(U[T-1]=z)),v=g.slice(m).split(t);for(var pe=0;pe!=v.length&&v[pe].trim().charAt(0)=="<";++pe);for(v=v.slice(pe),m=0;m!=v.length;++m)if(g=v[m].trim(),g.length!==0){if(x=g.match(r),y=m,_=0,I=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,x!=null&&x.length===2){for(y=0,R=x[1],_=0;_!=R.length&&!((I=R.charCodeAt(_)-64)<1||I>26);++_)y=26*y+I;--y,b=y}else++b;for(_=0;_!=g.length&&g.charCodeAt(_)!==62;++_);if(++_,E=Tt(g.slice(0,_),!0),E.r||(E.r=Rt({r:T-1,c:b})),R=g.slice(_),A={t:""},(x=R.match(i))!=null&&x[1]!==""&&(A.v=nr(x[1])),u.cellFormula){if((x=R.match(a))!=null&&x[1]!==""){if(A.f=nr(Er(x[1])).replace(/\r\n/g,`
`),u.xlfn||(A.f=GS(A.f)),x[0].indexOf('t="array"')>-1)A.F=(R.match(s)||[])[1],A.F.indexOf(":")>-1&&P.push([Ur(A.F),A.F]);else if(x[0].indexOf('t="shared"')>-1){k=Tt(x[0]);var te=nr(Er(x[1]));u.xlfn||(te=GS(te)),O[parseInt(k.si,10)]=[k,te,E.r]}}else(x=R.match(/<f[^>]*\/>/))&&(k=Tt(x[0]),O[k.si]&&(A.f=YZ(O[k.si][1],O[k.si][2],E.r)));var Q=is(E.r);for(_=0;_<P.length;++_)Q.r>=P[_][0].s.r&&Q.r<=P[_][0].e.r&&Q.c>=P[_][0].s.c&&Q.c<=P[_][0].e.c&&(A.F=P[_][1])}if(E.t==null&&A.v===void 0)if(A.f||A.F)A.v=0,A.t="n";else if(H)A.t="z";else continue;else A.t=E.t||"n";switch(f.s.c>b&&(f.s.c=b),f.e.c<b&&(f.e.c=b),A.t){case"n":if(A.v==""||A.v==null){if(!H)continue;A.t="z"}else A.v=parseFloat(A.v);break;case"s":if(typeof A.v>"u"){if(!H)continue;A.t="z"}else S=Gu[parseInt(A.v,10)],A.v=S.t,A.r=S.r,u.cellHTML&&(A.h=S.h);break;case"str":A.t="s",A.v=A.v!=null?Er(A.v):"",u.cellHTML&&(A.h=Mx(A.v));break;case"inlineStr":x=R.match(n),A.t="s",x!=null&&(S=zx(x[1]))?(A.v=S.t,u.cellHTML&&(A.h=S.h)):A.v="";break;case"b":A.v=Ir(A.v);break;case"d":u.cellDates?A.v=pn(A.v,1):(A.v=cs(pn(A.v,1)),A.t="n");break;case"e":(!u||u.cellText!==!1)&&(A.w=A.v),A.v=k4[A.v];break}if(w=D=0,F=null,N&&E.s!==void 0&&(F=p.CellXf[E.s],F!=null&&(F.numFmtId!=null&&(w=F.numFmtId),u.cellStyles&&F.fillId!=null&&(D=F.fillId))),ok(A,w,D,u,h,p),u.cellDates&&N&&A.t=="n"&&Lc(Mt[w])&&(A.t="d",A.v=Ap(A.v)),E.cm&&u.xlmeta){var ye=(u.xlmeta.Cell||[])[+E.cm-1];ye&&ye.type=="XLDAPR"&&(A.D=!0)}if(M){var X=is(E.r);c[X.r]||(c[X.r]=[]),c[X.r][X.c]=A}else c[E.r]=A}}}}U.length>0&&(c["!rows"]=U)}}();function $te(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var Vte=hl;function Hte(){}function jte(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=dY(t),r}function Gte(t){var e=zs(t);return[e]}function Wte(t){var e=fl(t);return[e]}function zte(t){var e=zs(t),r=t.read_shift(1);return[e,r,"b"]}function Kte(t){var e=fl(t),r=t.read_shift(1);return[e,r,"b"]}function qte(t){var e=zs(t),r=t.read_shift(1);return[e,r,"e"]}function Xte(t){var e=fl(t),r=t.read_shift(1);return[e,r,"e"]}function Yte(t){var e=zs(t),r=t.read_shift(4);return[e,r,"s"]}function Jte(t){var e=fl(t),r=t.read_shift(4);return[e,r,"s"]}function Qte(t){var e=zs(t),r=Hn(t);return[e,r,"n"]}function ck(t){var e=fl(t),r=Hn(t);return[e,r,"n"]}function Zte(t){var e=zs(t),r=jx(t);return[e,r,"n"]}function ere(t){var e=fl(t),r=jx(t);return[e,r,"n"]}function tre(t){var e=zs(t),r=Vx(t);return[e,r,"is"]}function rre(t){var e=zs(t),r=qn(t);return[e,r,"str"]}function nre(t){var e=fl(t),r=qn(t);return[e,r,"str"]}function sre(t,e,r){var n=t.l+e,s=zs(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=Ip(t,n-t.l,r);a[3]=Un(o,null,s,r.supbooks,r)}else t.l=n;return a}function are(t,e,r){var n=t.l+e,s=zs(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=Ip(t,n-t.l,r);a[3]=Un(o,null,s,r.supbooks,r)}else t.l=n;return a}function ire(t,e,r){var n=t.l+e,s=zs(t);s.r=r["!row"];var i=Hn(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=Ip(t,n-t.l,r);a[3]=Un(o,null,s,r.supbooks,r)}else t.l=n;return a}function ore(t,e,r){var n=t.l+e,s=zs(t);s.r=r["!row"];var i=qn(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=Ip(t,n-t.l,r);a[3]=Un(o,null,s,r.supbooks,r)}else t.l=n;return a}var lre=hl;function cre(t,e){var r=t.l+e,n=hl(t),s=Hx(t),i=qn(t),a=qn(t),o=qn(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function ure(){}function dre(t,e,r){var n=t.l+e,s=w4(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=gte(t,n-t.l,r);a[1]=o}else t.l=n;return a}function fre(t,e,r){var n=t.l+e,s=hl(t),i=[s];if(r.cellFormula){var a=xte(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}var hre=["left","right","top","bottom","header","footer"];function pre(t){var e={};return hre.forEach(function(r){e[r]=Hn(t)}),e}function mre(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function gre(){}function vre(){}function xre(t,e,r,n,s,i,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,m,g,v,x,y,_,I,R,A=[];o.biff=12,o["!row"]=0;var E=0,T=!1,b=[],S={},k=o.supbooks||s.supbooks||[[]];if(k.sharedf=S,k.arrayf=b,k.SheetNames=s.SheetNames||s.Sheets.map(function(M){return M.name}),!o.supbooks&&(o.supbooks=k,s.Names))for(var w=0;w<s.Names.length;++w)k[0][w+1]=s.Names[w];var D=[],N=[],F=!1;gh[16]={n:"BrtShortReal",f:ck};var P;if(Ti(t,function(U,z,j){if(!h)switch(j){case 148:c=U;break;case 0:p=U,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),I=kn(v=p.r),o["!row"]=p.r,(U.hidden||U.hpt||U.level!=null)&&(U.hpt&&(U.hpx=Ad(U.hpt)),N[U.r]=U);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:U[2]},U[2]){case"n":m.v=U[1];break;case"s":_=Gu[U[1]],m.v=_.t,m.r=_.r;break;case"b":m.v=!!U[1];break;case"e":m.v=U[1],o.cellText!==!1&&(m.w=pl[m.v]);break;case"str":m.t="s",m.v=U[1];break;case"is":m.t="s",m.v=U[1].t;break}if((g=a.CellXf[U[0].iStyleRef])&&ok(m,g.numFmtId,null,o,i,a),x=U[0].c==-1?x+1:U[0].c,o.dense?(l[v]||(l[v]=[]),l[v][x]=m):l[on(x)+I]=m,o.cellFormula){for(T=!1,E=0;E<b.length;++E){var H=b[E];p.r>=H[0].s.r&&p.r<=H[0].e.r&&x>=H[0].s.c&&x<=H[0].e.c&&(m.F=rr(H[0]),T=!0)}!T&&U.length>3&&(m.f=U[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>x&&(u.s.c=x),u.e.r<p.r&&(u.e.r=p.r),u.e.c<x&&(u.e.c=x),o.cellDates&&g&&m.t=="n"&&Lc(Mt[g.numFmtId])){var W=Fo(m.v);W&&(m.t="d",m.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}P&&(P.type=="XLDAPR"&&(m.D=!0),P=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;m={t:"z",v:void 0},x=U[0].c==-1?x+1:U[0].c,o.dense?(l[v]||(l[v]=[]),l[v][x]=m):l[on(x)+I]=m,u.s.r>p.r&&(u.s.r=p.r),u.s.c>x&&(u.s.c=x),u.e.r<p.r&&(u.e.r=p.r),u.e.c<x&&(u.e.c=x),P&&(P.type=="XLDAPR"&&(m.D=!0),P=void 0);break;case 176:A.push(U);break;case 49:P=((o.xlmeta||{}).Cell||[])[U-1];break;case 494:var K=n["!id"][U.relId];for(K?(U.Target=K.Target,U.loc&&(U.Target+="#"+U.loc),U.Rel=K):U.relId==""&&(U.Target="#"+U.loc),v=U.rfx.s.r;v<=U.rfx.e.r;++v)for(x=U.rfx.s.c;x<=U.rfx.e.c;++x)o.dense?(l[v]||(l[v]=[]),l[v][x]||(l[v][x]={t:"z",v:void 0}),l[v][x].l=U):(y=Rt({c:x,r:v}),l[y]||(l[y]={t:"z",v:void 0}),l[y].l=U);break;case 426:if(!o.cellFormula)break;b.push(U),R=o.dense?l[v][x]:l[on(x)+I],R.f=Un(U[1],u,{r:p.r,c:x},k,o),R.F=rr(U[0]);break;case 427:if(!o.cellFormula)break;S[Rt(U[0].s)]=U[1],R=o.dense?l[v][x]:l[on(x)+I],R.f=Un(U[1],u,{r:p.r,c:x},k,o);break;case 60:if(!o.cellStyles)break;for(;U.e>=U.s;)D[U.e--]={width:U.w/256,hidden:!!(U.flags&1),level:U.level},F||(F=!0,Kx(U.w/256)),Tc(D[U.e+1]);break;case 161:l["!autofilter"]={ref:rr(U)};break;case 476:l["!margins"]=U;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),U.name&&(s.Sheets[r].CodeName=U.name),(U.above||U.left)&&(l["!outline"]={above:U.above,left:U.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),U.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!z.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+j.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=rr(c||u)),o.sheetRows&&l["!ref"]){var O=Ur(l["!ref"]);o.sheetRows<=+O.e.r&&(O.e.r=o.sheetRows-1,O.e.r>u.e.r&&(O.e.r=u.e.r),O.e.r<O.s.r&&(O.s.r=O.e.r),O.e.c>u.e.c&&(O.e.c=u.e.c),O.e.c<O.s.c&&(O.s.c=O.e.c),l["!fullref"]=l["!ref"],l["!ref"]=rr(O))}return A.length>0&&(l["!merges"]=A),D.length>0&&(l["!cols"]=D),N.length>0&&(l["!rows"]=N),l}function yre(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var a=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var s=nr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function Ere(t,e,r,n,s,i){var a=i||{"!type":"chart"};if(!t)return i;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=yre(f);u.s.r=u.s.c=0,u.e.c=o,c=on(o),h[0].forEach(function(p,m){a[c+kn(m)]={t:"n",v:p,z:h[1]},l=m}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=rr(u)),a}function _re(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(lk);return o&&Xx(o[0],i,s,r),(a=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function bre(t,e){t.l+=10;var r=qn(t);return{name:r}}function Sre(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a=!1;return Ti(t,function(l,c,u){switch(u){case 550:i["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var uk=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Tre=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Are=[],wre=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function XS(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Ir(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function YS(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Ir(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function dk(t){YS(t.WBProps,uk),YS(t.CalcPr,wre),XS(t.WBView,Tre),XS(t.Sheets,Are),ic.date1904=Ir(t.WBProps.date1904)}var Cre="][*?/\\".split("");function Ire(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Cre.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var kre=/<\w+:workbook/;function Dre(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},a=0;if(t.replace(Jn,function(l,c){var u=Tt(l);switch(Ba(u[0])){case"<?xml":break;case"<workbook":l.match(kre)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":uk.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ir(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=Er(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=nr(Er(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Er(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Ir(u.hidden||"0")&&(i.Hidden=!0),a=c+l.length;break;case"</definedName>":i.Ref=nr(Er(t.slice(a,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),qX.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return dk(r),r}function Pre(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=_v(t),r.name=qn(t),r}function Rre(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?qn(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Fre(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function Ore(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=fY(t),a=vte(t,0,r),o=Hx(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function Nre(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],a=[[]];return a.SheetNames=[],a.XTI=[],gh[16]={n:"BrtFRTArchID$",f:Fre},Ti(t,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Un(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),dk(r),r.Names=i,r.supbooks=a,r}function Mre(t,e,r){return e.slice(-4)===".bin"?Nre(t,r):Dre(t,r)}function Lre(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?xre(t,n,r,s,i,a,o):Pte(t,n,r,s,i,a,o)}function Bre(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Sre(t,n,r,s,i):_re(t,n,r,s,i)}function Ure(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?KZ():qZ()}function $re(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?WZ():zZ()}function Vre(t,e,r,n){return e.slice(-4)===".bin"?lZ(t,r,n):rZ(t,r,n)}function Hre(t,e,r){return J4(t,r)}function jre(t,e,r){return e.slice(-4)===".bin"?TQ(t,r):bQ(t,r)}function Gre(t,e,r){return e.slice(-4)===".bin"?HZ(t,r):LZ(t,r)}function Wre(t,e,r){return e.slice(-4)===".bin"?OZ(t):RZ(t)}function zre(t,e,r,n){return r.slice(-4)===".bin"?NZ(t,e,r,n):void 0}function Kre(t,e,r){return e.slice(-4)===".bin"?DZ(t,e,r):PZ(t,e,r)}var fk=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,hk=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ys(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(fk),i,a,o,l;if(s)for(l=0;l!=s.length;++l)i=s[l].match(hk),(a=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(a+1),n[o]=i[2].slice(1,i[2].length-1));return n}function qre(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(fk),s,i,a,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(hk),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?a="xmlns"+s[1].slice(6):a=s[1].slice(i+1),r[a]=s[2].slice(1,s[2].length-1));return r}var zu;function Xre(t,e){var r=zu[t]||nr(t);return r==="General"?Qo(e):Hs(r,e)}function Yre(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ir(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=pn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[nr(e)]=s}function Jre(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||pl[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Ed(t.v):t.w=Qo(t.v):t.w=Xre(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=zu[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Lc(n)){var s=Fo(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Qre(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=YQ[n.Pattern]||n.Pattern)}t[e.ID]=e}function Zre(t,e,r,n,s,i,a,o,l,c){var u="General",f=n.StyleID,h={};c=c||{};var p=[],m=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&a&&(f=a.StyleID);i[f]!==void 0&&(i[f].nf&&(u=i[f].nf),i[f].Interior&&p.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ir(t);break;case"String":n.t="s",n.r=xS(nr(t)),n.v=t.indexOf("<")>-1?nr(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(pn(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=nr(t):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=k4[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=xS(e||t));break}if(Jre(n,u,c),c.cellFormula!==!1)if(n.Formula){var g=nr(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=ac(g,s),delete n.Formula,n.ArrayRange=="RC"?n.F=ac("RC:RC",s):n.ArrayRange&&(n.F=ac(n.ArrayRange,s),l.push([Ur(n.F),n.F]))}else for(m=0;m<l.length;++m)s.r>=l[m][0].s.r&&s.r<=l[m][0].e.r&&s.c>=l[m][0].s.c&&s.c<=l[m][0].e.c&&(n.F=l[m][1]);c.cellStyles&&(p.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function ene(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function ng(t,e){var r=e||{};t4();var n=hu(Lx(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Er(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var a=In(r);return a.type="string",Sd.to_workbook(n,a)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(le){s.indexOf("<"+le)>=0&&(i=!0)}),i)return cne(n,r);zu={"General Number":"General","General Date":Mt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Mt[15],"Short Date":Mt[14],"Long Time":Mt[19],"Medium Time":Mt[18],"Short Time":Mt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Mt[2],Standard:Mt[4],Percent:Mt[10],Scientific:Mt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},f=[],h=r.dense?[]:{},p="",m={},g={},v=Ys('<Data ss:Type="String">'),x=0,y=0,_=0,I={s:{r:2e6,c:2e6},e:{r:0,c:0}},R={},A={},E="",T=0,b=[],S={},k={},w=0,D=[],N=[],F={},P=[],O,M=!1,U=[],z=[],j={},H=0,W=0,K={Sheets:[],WBProps:{date1904:!1}},re={};bd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var me="";o=bd.exec(n);)switch(o[3]=(me=o[3]).toLowerCase()){case"data":if(me=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Zre(n.slice(x,o.index),E,v,l[l.length-1][0]=="comment"?F:m,{c:y,r:_},R,P[y],g,U,r):(E="",v=Ys(o[0]),x=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(N.length>0&&(m.c=N),(!r.sheetRows||r.sheetRows>_)&&m.v!==void 0&&(r.dense?(h[_]||(h[_]=[]),h[_][y]=m):h[on(y)+kn(_)]=m),m.HRef&&(m.l={Target:nr(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(H=y+(parseInt(m.MergeAcross,10)|0),W=_+(parseInt(m.MergeDown,10)|0),b.push({s:{c:y,r:_},e:{c:H,r:W}})),!r.sheetStubs)m.MergeAcross?y=H+1:++y;else if(m.MergeAcross||m.MergeDown){for(var ce=y;ce<=H;++ce)for(var pe=_;pe<=W;++pe)(ce>y||pe>_)&&(r.dense?(h[pe]||(h[pe]=[]),h[pe][ce]={t:"z"}):h[on(ce)+kn(pe)]={t:"z"});y=H+1}else++y;else m=qre(o[0]),m.Index&&(y=+m.Index-1),y<I.s.c&&(I.s.c=y),y>I.e.c&&(I.e.c=y),o[0].slice(-2)==="/>"&&++y,N=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(_<I.s.r&&(I.s.r=_),_>I.e.r&&(I.e.r=_),o[0].slice(-2)==="/>"&&(g=Ys(o[0]),g.Index&&(_=+g.Index-1)),y=0,++_):(g=Ys(o[0]),g.Index&&(_=+g.Index-1),j={},(g.AutoFitHeight=="0"||g.Height)&&(j.hpx=parseInt(g.Height,10),j.hpt=Y4(j.hpx),z[_]=j),g.Hidden=="1"&&(j.hidden=!0,z[_]=j));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));f.push(p),I.s.r<=I.e.r&&I.s.c<=I.e.c&&(h["!ref"]=rr(I),r.sheetRows&&r.sheetRows<=I.e.r&&(h["!fullref"]=h["!ref"],I.e.r=r.sheetRows-1,h["!ref"]=rr(I))),b.length&&(h["!merges"]=b),P.length>0&&(h["!cols"]=P),z.length>0&&(h["!rows"]=z),u[p]=h}else I={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=y=0,l.push([o[3],!1]),c=Ys(o[0]),p=nr(c.Name),h=r.dense?[]:{},b=[],U=[],z=[],re={name:p,Hidden:0},K.Sheets.push(re);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),P=[],M=!1}break;case"style":o[1]==="/"?Qre(R,A,r):A=Ys(o[0]);break;case"numberformat":A.nf=nr(Ys(o[0]).Format||"General"),zu[A.nf]&&(A.nf=zu[A.nf]);for(var te=0;te!=392&&Mt[te]!=A.nf;++te);if(te==392){for(te=57;te!=392;++te)if(Mt[te]==null){$o(A.nf,te);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(O=Ys(o[0]),O.Hidden&&(O.hidden=!0,delete O.Hidden),O.Width&&(O.wpx=parseInt(O.Width,10)),!M&&O.wpx>10){M=!0,as=q4;for(var Q=0;Q<P.length;++Q)P[Q]&&Tc(P[Q])}M&&Tc(O),P[O.Index-1||P.length]=O;for(var ye=0;ye<+O.Span;++ye)P[P.length]=In(O);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var X=Tt(o[0]),q={Name:X.Name,Ref:ac(X.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(q.Sheet=K.Sheets.length-1),K.Names.push(q);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=n.slice(T,o.index):T=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;A.Interior=Ys(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?LY(S,me,n.slice(w,o.index)):w=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));ene(F),N.push(F)}else l.push([o[3],!1]),c=Ys(o[0]),F={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Y=Ys(o[0]);h["!autofilter"]={ref:ac(Y.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return r2(n,r);var ne=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ne=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ne=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ne=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ne=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(w,o.index)){case"SheetHidden":re.Hidden=1;break;case"SheetVeryHidden":re.Hidden=2;break}else w=o.index+o[0].length;break;case"header":h["!margins"]||Wu(h["!margins"]={},"xlml"),isNaN(+Tt(o[0]).Margin)||(h["!margins"].header=+Tt(o[0]).Margin);break;case"footer":h["!margins"]||Wu(h["!margins"]={},"xlml"),isNaN(+Tt(o[0]).Margin)||(h["!margins"].footer=+Tt(o[0]).Margin);break;case"pagemargins":var ve=Tt(o[0]);h["!margins"]||Wu(h["!margins"]={},"xlml"),isNaN(+ve.Top)||(h["!margins"].top=+ve.Top),isNaN(+ve.Left)||(h["!margins"].left=+ve.Left),isNaN(+ve.Right)||(h["!margins"].right=+ve.Right),isNaN(+ve.Bottom)||(h["!margins"].bottom=+ve.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ne=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ne=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ne=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ne=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ne=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ne=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ne=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ne=!1}break;case"smarttags":break;default:ne=!1;break}if(ne||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Yre(k,me,D,n.slice(w,o.index)):(D=o,w=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var ae={};return!r.bookSheets&&!r.bookProps&&(ae.Sheets=u),ae.SheetNames=f,ae.Workbook=K,ae.SSF=In(Mt),ae.Props=S,ae.Custprops=k,ae}function Av(t,e){switch(Qx(e=e||{}),e.type||"base64"){case"base64":return ng(ks(t),e);case"binary":case"buffer":case"file":return ng(t,e);case"array":return ng(dl(t),e)}}function tne(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=mY(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=gY(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var rne=[60,1084,2066,2165,2175];function nne(t,e,r,n,s){var i=n,a=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}a.push(o),r.l+=i;for(var l=si(r,r.l),c=wv[l],u=0;c!=null&&rne.indexOf(l)>-1;)i=si(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+i),a.push(o),r.l+=4+i,c=wv[l=si(r,r.l)];var f=Gi(a);bn(f,0);var h=0;f.lens=[];for(var p=0;p<a.length;++p)f.lens.push(h),h+=a[p].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,s)}function ya(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Mt[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||pl[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Ed(t.v):t.w=Qo(t.v):t.w=Hs(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&Lc(Mt[n]||String(n))){var s=Fo(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Wf(t,e,r){return{v:t,ixfe:e,t:r}}function sne(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},a={},o=null,l=[],c="",u={},f,h="",p,m,g,v,x={},y=[],_,I,R=[],A=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},b=function(xe){return xe<8?Vo[xe]:xe<64&&A[xe-8]||Vo[xe]},S=function(xe,be,Ne){var je=be.XF.data;if(!(!je||!je.patternType||!Ne||!Ne.cellStyles)){be.s={},be.s.patternType=je.patternType;var ot;(ot=Td(b(je.icvFore)))&&(be.s.fgColor={rgb:ot}),(ot=Td(b(je.icvBack)))&&(be.s.bgColor={rgb:ot})}},k=function(xe,be,Ne){if(!(j>1)&&!(Ne.sheetRows&&xe.r>=Ne.sheetRows)){if(Ne.cellStyles&&be.XF&&be.XF.data&&S(xe,be,Ne),delete be.ixfe,delete be.XF,f=xe,h=Rt(xe),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),xe.r<a.s.r&&(a.s.r=xe.r),xe.c<a.s.c&&(a.s.c=xe.c),xe.r+1>a.e.r&&(a.e.r=xe.r+1),xe.c+1>a.e.c&&(a.e.c=xe.c+1),Ne.cellFormula&&be.f){for(var je=0;je<y.length;++je)if(!(y[je][0].s.c>xe.c||y[je][0].s.r>xe.r)&&!(y[je][0].e.c<xe.c||y[je][0].e.r<xe.r)){be.F=rr(y[je][0]),(y[je][0].s.c!=xe.c||y[je][0].s.r!=xe.r)&&delete be.f,be.f&&(be.f=""+Un(y[je][1],a,xe,U,w));break}}Ne.dense?(s[xe.r]||(s[xe.r]=[]),s[xe.r][xe.c]=be):s[h]=be}},w={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(w.password=e.password);var D,N=[],F=[],P=[],O=[],M=!1,U=[];U.SheetNames=w.snames,U.sharedf=w.sharedf,U.arrayf=w.arrayf,U.names=[],U.XTI=[];var z=0,j=0,H=0,W=[],K=[],re;w.codepage=1200,aa(1200);for(var me=!1;t.l<t.length-1;){var ce=t.l,pe=t.read_shift(2);if(pe===0&&z===10)break;var te=t.l===t.length?0:t.read_shift(2),Q=wv[pe];if(Q&&Q.f){if(e.bookSheets&&z===133&&pe!==133)break;if(z=pe,Q.r===2||Q.r==12){var ye=t.read_shift(2);if(te-=2,!w.enc&&ye!==pe&&((ye&255)<<8|ye>>8)!==pe)throw new Error("rt mismatch: "+ye+"!="+pe);Q.r==12&&(t.l+=10,te-=10)}var X={};if(pe===10?X=Q.f(t,te,w):X=nne(pe,Q,t,te,w),j==0&&[9,521,1033,2057].indexOf(z)===-1)continue;switch(pe){case 34:r.opts.Date1904=E.WBProps.date1904=X;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(w.enc||(t.l=0),w.enc=X,!e.password)throw new Error("File is password-protected");if(X.valid==null)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:w.lastuser=X;break;case 66:var q=Number(X);switch(q){case 21010:q=1200;break;case 32768:q=1e4;break;case 32769:q=1252;break}aa(w.codepage=q),me=!0;break;case 317:w.rrtabid=X;break;case 25:w.winlocked=X;break;case 439:r.opts.RefreshAll=X;break;case 12:r.opts.CalcCount=X;break;case 16:r.opts.CalcDelta=X;break;case 17:r.opts.CalcIter=X;break;case 13:r.opts.CalcMode=X;break;case 14:r.opts.CalcPrecision=X;break;case 95:r.opts.CalcSaveRecalc=X;break;case 15:w.CalcRefMode=X;break;case 2211:r.opts.FullCalc=X;break;case 129:X.fDialog&&(s["!type"]="dialog"),X.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),X.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:R.push(X);break;case 430:U.push([X]),U[U.length-1].XTI=[];break;case 35:case 547:U[U.length-1].push(X);break;case 24:case 536:re={Name:X.Name,Ref:Un(X.rgce,a,null,U,w)},X.itab>0&&(re.Sheet=X.itab-1),U.names.push(re),U[0]||(U[0]=[],U[0].XTI=[]),U[U.length-1].push(X),X.Name=="_xlnm._FilterDatabase"&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&X.rgce[0][0][0]=="PtgArea3d"&&(K[X.itab-1]={ref:rr(X.rgce[0][0][1][2])});break;case 22:w.ExternCount=X;break;case 23:U.length==0&&(U[0]=[],U[0].XTI=[]),U[U.length-1].XTI=U[U.length-1].XTI.concat(X),U.XTI=U.XTI.concat(X);break;case 2196:if(w.biff<8)break;re!=null&&(re.Comment=X[1]);break;case 18:s["!protect"]=X;break;case 19:X!==0&&w.WTF&&console.error("Password verifier: "+X);break;case 133:i[X.pos]=X,w.snames.push(X.name);break;case 10:{if(--j)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,s["!ref"]=rr(a),e.sheetRows&&e.sheetRows<=a.e.r){var Y=a.e.r;a.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=rr(a),a.e.r=Y}a.e.r++,a.e.c++}N.length>0&&(s["!merges"]=N),F.length>0&&(s["!objects"]=F),P.length>0&&(s["!cols"]=P),O.length>0&&(s["!rows"]=O),E.Sheets.push(T)}c===""?u=s:n[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(w.biff===8&&(w.biff={9:2,521:3,1033:4}[pe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),w.biffguess=X.BIFFVer==0,X.BIFFVer==0&&X.dt==4096&&(w.biff=5,me=!0,aa(w.codepage=28591)),w.biff==8&&X.BIFFVer==0&&X.dt==16&&(w.biff=2),j++)break;if(s=e.dense?[]:{},w.biff<8&&!me&&(me=!0,aa(w.codepage=e.codepage||1252)),w.biff<5||X.BIFFVer==0&&X.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var ne={pos:t.l-te,name:c};i[ne.pos]=ne,w.snames.push(c)}else c=(i[ce]||{name:""}).name;X.dt==32&&(s["!type"]="chart"),X.dt==64&&(s["!type"]="macro"),N=[],F=[],w.arrayf=y=[],P=[],O=[],M=!1,T={Hidden:(i[ce]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[X.r]||[])[X.c]:s[Rt({c:X.c,r:X.r})])&&++X.c,_={ixfe:X.ixfe,XF:R[X.ixfe]||{},v:X.val,t:"n"},H>0&&(_.z=W[_.ixfe>>8&63]),ya(_,e,r.opts.Date1904),k({c:X.c,r:X.r},_,e);break;case 5:case 517:_={ixfe:X.ixfe,XF:R[X.ixfe],v:X.val,t:X.t},H>0&&(_.z=W[_.ixfe>>8&63]),ya(_,e,r.opts.Date1904),k({c:X.c,r:X.r},_,e);break;case 638:_={ixfe:X.ixfe,XF:R[X.ixfe],v:X.rknum,t:"n"},H>0&&(_.z=W[_.ixfe>>8&63]),ya(_,e,r.opts.Date1904),k({c:X.c,r:X.r},_,e);break;case 189:for(var ve=X.c;ve<=X.C;++ve){var ae=X.rkrec[ve-X.c][0];_={ixfe:ae,XF:R[ae],v:X.rkrec[ve-X.c][1],t:"n"},H>0&&(_.z=W[_.ixfe>>8&63]),ya(_,e,r.opts.Date1904),k({c:ve,r:X.r},_,e)}break;case 6:case 518:case 1030:{if(X.val=="String"){o=X;break}if(_=Wf(X.val,X.cell.ixfe,X.tt),_.XF=R[_.ixfe],e.cellFormula){var le=X.formula;if(le&&le[0]&&le[0][0]&&le[0][0][0]=="PtgExp"){var de=le[0][0][1][0],Se=le[0][0][1][1],Ie=Rt({r:de,c:Se});x[Ie]?_.f=""+Un(X.formula,a,X.cell,U,w):_.F=((e.dense?(s[de]||[])[Se]:s[Ie])||{}).F}else _.f=""+Un(X.formula,a,X.cell,U,w)}H>0&&(_.z=W[_.ixfe>>8&63]),ya(_,e,r.opts.Date1904),k(X.cell,_,e),o=X}break;case 7:case 519:if(o)o.val=X,_=Wf(X,o.cell.ixfe,"s"),_.XF=R[_.ixfe],e.cellFormula&&(_.f=""+Un(o.formula,a,o.cell,U,w)),H>0&&(_.z=W[_.ixfe>>8&63]),ya(_,e,r.opts.Date1904),k(o.cell,_,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(X);var Te=Rt(X[0].s);if(p=e.dense?(s[X[0].s.r]||[])[X[0].s.c]:s[Te],e.cellFormula&&p){if(!o||!Te||!p)break;p.f=""+Un(X[1],a,X[0],U,w),p.F=rr(X[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!o)break;x[Rt(o.cell)]=X[0],p=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Rt(o.cell)],(p||{}).f=""+Un(X[0],a,f,U,w)}}break;case 253:_=Wf(l[X.isst].t,X.ixfe,"s"),l[X.isst].h&&(_.h=l[X.isst].h),_.XF=R[_.ixfe],H>0&&(_.z=W[_.ixfe>>8&63]),ya(_,e,r.opts.Date1904),k({c:X.c,r:X.r},_,e);break;case 513:e.sheetStubs&&(_={ixfe:X.ixfe,XF:R[X.ixfe],t:"z"},H>0&&(_.z=W[_.ixfe>>8&63]),ya(_,e,r.opts.Date1904),k({c:X.c,r:X.r},_,e));break;case 190:if(e.sheetStubs)for(var Ge=X.c;Ge<=X.C;++Ge){var ke=X.ixfe[Ge-X.c];_={ixfe:ke,XF:R[ke],t:"z"},H>0&&(_.z=W[_.ixfe>>8&63]),ya(_,e,r.opts.Date1904),k({c:Ge,r:X.r},_,e)}break;case 214:case 516:case 4:_=Wf(X.val,X.ixfe,"s"),_.XF=R[_.ixfe],H>0&&(_.z=W[_.ixfe>>8&63]),ya(_,e,r.opts.Date1904),k({c:X.c,r:X.r},_,e);break;case 0:case 512:j===1&&(a=X);break;case 252:l=X;break;case 1054:if(w.biff==4){W[H++]=X[1];for(var $e=0;$e<H+163&&Mt[$e]!=X[1];++$e);$e>=163&&$o(X[1],H+163)}else $o(X[1],X[0]);break;case 30:{W[H++]=X;for(var Be=0;Be<H+163&&Mt[Be]!=X;++Be);Be>=163&&$o(X,H+163)}break;case 229:N=N.concat(X);break;case 93:F[X.cmo[0]]=w.lastobj=X;break;case 438:w.lastobj.TxO=X;break;case 127:w.lastobj.ImData=X;break;case 440:for(v=X[0].s.r;v<=X[0].e.r;++v)for(g=X[0].s.c;g<=X[0].e.c;++g)p=e.dense?(s[v]||[])[g]:s[Rt({c:g,r:v})],p&&(p.l=X[1]);break;case 2048:for(v=X[0].s.r;v<=X[0].e.r;++v)for(g=X[0].s.c;g<=X[0].e.c;++g)p=e.dense?(s[v]||[])[g]:s[Rt({c:g,r:v})],p&&p.l&&(p.l.Tooltip=X[1]);break;case 28:{if(w.biff<=5&&w.biff>=2)break;p=e.dense?(s[X[0].r]||[])[X[0].c]:s[Rt(X[0])];var We=F[X[2]];p||(e.dense?(s[X[0].r]||(s[X[0].r]=[]),p=s[X[0].r][X[0].c]={t:"z"}):p=s[Rt(X[0])]={t:"z"},a.e.r=Math.max(a.e.r,X[0].r),a.s.r=Math.min(a.s.r,X[0].r),a.e.c=Math.max(a.e.c,X[0].c),a.s.c=Math.min(a.s.c,X[0].c)),p.c||(p.c=[]),m={a:X[1],t:We.TxO.t},p.c.push(m)}break;case 2173:wZ(R[X.ixfe],X.ext);break;case 125:{if(!w.cellStyles)break;for(;X.e>=X.s;)P[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(X.flags&1)},M||(M=!0,Kx(X.w/256)),Tc(P[X.e+1])}break;case 520:{var ze={};X.level!=null&&(O[X.r]=ze,ze.level=X.level),X.hidden&&(O[X.r]=ze,ze.hidden=!0),X.hpt&&(O[X.r]=ze,ze.hpt=X.hpt,ze.hpx=Ad(X.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Wu(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[pe]]=X;break;case 161:s["!margins"]||Wu(s["!margins"]={}),s["!margins"].header=X.header,s["!margins"].footer=X.footer;break;case 574:X.RTL&&(E.Views[0].RTL=!0);break;case 146:A=X;break;case 2198:D=X;break;case 140:I=X;break;case 442:c?T.CodeName=X||T.name:E.WBProps.CodeName=X||"ThisWorkbook";break}}else Q||console.error("Missing Info for XLS Record 0x"+pe.toString(16)),t.l+=te}return r.SheetNames=Fa(i).sort(function(Ee,xe){return Number(Ee)-Number(xe)}).map(function(Ee){return i[Ee].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&K.forEach(function(Ee,xe){r.Sheets[r.SheetNames[xe]]["!autofilter"]=Ee}),r.Strings=l,r.SSF=In(Mt),w.enc&&(r.Encryption=w.enc),D&&(r.Themes=D),r.Metadata={},I!==void 0&&(r.Metadata.Country=I),U.names.length>0&&(E.Names=U.names),r.Workbook=E,r}var JS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function ane(t,e,r){var n=er.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=OS(n,bY,JS.DSI);for(var i in s)e[i]=s[i]}catch(c){if(r.WTF)throw c}var a=er.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=OS(a,SY,JS.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(P4(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function pk(t,e){e||(e={}),Qx(e),jI(),e.codepage&&Dx(e.codepage);var r,n;if(t.FullPaths){if(er.find(t,"/encryption"))throw new Error("File is password-protected");r=er.find(t,"!CompObj"),n=er.find(t,"/Workbook")||er.find(t,"/Book")}else{switch(e.type){case"base64":t=na(ks(t));break;case"binary":t=na(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}bn(t,0),n={content:t}}var s,i;if(r&&tne(r),e.bookProps&&!e.bookSheets)s={};else{var a=Jt?"buffer":"array";if(n&&n.content)s=sne(n.content,e);else if((i=er.find(t,"PerfectOffice_MAIN"))&&i.content)s=ju.to_workbook(i.content,(e.type=a,e));else if((i=er.find(t,"NativeContent_MAIN"))&&i.content)s=ju.to_workbook(i.content,(e.type=a,e));else throw(i=er.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&er.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=GZ(t))}var o={};return t.FullPaths&&ane(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}var gh={0:{f:$te},1:{f:Gte},2:{f:Zte},3:{f:qte},4:{f:zte},5:{f:Qte},6:{f:rre},7:{f:Yte},8:{f:ore},9:{f:ire},10:{f:sre},11:{f:are},12:{f:Wte},13:{f:ere},14:{f:Xte},15:{f:Kte},16:{f:ck},17:{f:nre},18:{f:Jte},19:{f:Vx},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Ore},40:{},42:{},43:{f:sZ},44:{f:nZ},45:{f:aZ},46:{f:oZ},47:{f:iZ},48:{},49:{f:lY},50:{},51:{f:IZ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:j4},62:{f:tre},63:{f:FZ},64:{f:gre},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Yn,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:mre},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:jte},148:{f:Vte,p:16},151:{f:ure},152:{},153:{f:Rre},154:{},155:{},156:{f:Pre},157:{},158:{},159:{T:1,f:SQ},160:{T:-1},161:{T:1,f:hl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:lre},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:CZ},336:{T:-1},337:{f:kZ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:_v},357:{},358:{},359:{},360:{T:1},361:{},362:{f:H4},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:dre},427:{f:fre},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:pre},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Hte},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:cre},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:_v},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:VZ},633:{T:1},634:{T:-1},635:{T:1,f:$Z},636:{T:-1},637:{f:uY},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:bre},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:vre},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},wv={6:{f:tg},10:{f:Oi},12:{f:Yr},13:{f:Yr},14:{f:Vr},15:{f:Vr},16:{f:Hn},17:{f:Vr},18:{f:Vr},19:{f:Yr},20:{f:BS},21:{f:BS},23:{f:H4},24:{f:$S},25:{f:Vr},26:{},27:{},28:{f:BJ},29:{},34:{f:Vr},35:{f:US},38:{f:Hn},39:{f:Hn},40:{f:Hn},41:{f:Hn},42:{f:Vr},43:{f:Vr},47:{f:HQ},49:{f:yJ},51:{f:Yr},60:{},61:{f:gJ},64:{f:Vr},65:{f:xJ},66:{f:Yr},77:{},80:{},81:{},82:{},85:{f:Yr},89:{},90:{},91:{},92:{f:lJ},93:{f:$J},94:{},95:{f:Vr},96:{},97:{},99:{f:Vr},125:{f:j4},128:{f:kJ},129:{f:cJ},130:{f:Yr},131:{f:Vr},132:{f:Vr},133:{f:uJ},134:{},140:{f:zJ},141:{f:Yr},144:{},146:{f:qJ},151:{},152:{},153:{},154:{},155:{},156:{f:Yr},157:{},158:{},160:{f:ZJ},161:{f:YJ},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:AJ},190:{f:wJ},193:{f:Oi},197:{},198:{},199:{},200:{},201:{},202:{f:Vr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Yr},220:{},221:{f:Vr},222:{},224:{f:IJ},225:{f:oJ},226:{f:Oi},227:{},229:{f:UJ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:dJ},253:{f:EJ},255:{f:fJ},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:M4},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Vr},353:{f:Oi},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:PJ},431:{f:Vr},432:{},433:{},434:{},437:{},438:{f:jJ},439:{f:Vr},440:{f:GJ},441:{},442:{f:ef},443:{},444:{f:Yr},445:{},446:{},448:{f:Oi},449:{f:mJ,r:2},450:{f:Oi},512:{f:MS},513:{f:QJ},515:{f:DJ},516:{f:_J},517:{f:LS},519:{f:eQ},520:{f:hJ},523:{},545:{f:VS},549:{f:NS},566:{},574:{f:vJ},638:{f:TJ},659:{},1048:{},1054:{f:bJ},1084:{},1212:{f:NJ},2048:{f:WJ},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Hf},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Oi},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:XJ,r:12},2173:{f:AZ,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Vr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:OJ,r:12},2197:{},2198:{f:yZ,r:12},2199:{},2200:{},2201:{},2202:{f:MJ,r:12},2203:{f:Oi},2204:{},2205:{},2206:{},2207:{},2211:{f:pJ},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Yr},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:JJ},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:KJ},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:MS},1:{},2:{f:sQ},3:{f:nQ},4:{f:rQ},5:{f:LS},7:{f:aQ},8:{},9:{f:Hf},11:{},22:{f:Yr},30:{f:SJ},31:{},32:{},33:{f:VS},36:{},37:{f:NS},50:{f:iQ},62:{},52:{},67:{},68:{f:Yr},69:{},86:{},126:{},127:{f:tQ},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:oQ},223:{},234:{},354:{},421:{},518:{f:tg},521:{f:Hf},536:{f:$S},547:{f:US},561:{},579:{},1030:{f:tg},1033:{f:Hf},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Js(t,e,r,n){var s=e;if(!isNaN(s)){var i=(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&S4(r)&&t.push(r)}}function QS(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),a=s.index,o=i&&i.index||t.length,l=DX(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(a=0;a<l.length;++a){var g=l[a].trim(),v=g.slice(0,3).toLowerCase();if(v=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(v!="<td"&&v!="<th")){var x=g.split(/<\/t[dh]>/i);for(o=0;o<x.length;++o){var y=x[o].trim();if(y.match(/<t[dh]/i)){for(var _=y,I=0;_.charAt(0)=="<"&&(I=_.indexOf(">"))>-1;)_=_.slice(I+1);for(var R=0;R<m.length;++R){var A=m[R];A.s.c==u&&A.s.r<c&&c<=A.e.r&&(u=A.e.c+1,R=-1)}var E=Tt(y.slice(0,y.indexOf(">")));h=E.colspan?+E.colspan:1,((f=+E.rowspan)>1||h>1)&&m.push({s:{r:c,c:u},e:{r:c+(f||1)-1,c:u+h-1}});var T=E.t||E["data-t"]||"";if(!_.length){u+=h;continue}if(_=u4(_),p.s.r>c&&(p.s.r=c),p.e.r<c&&(p.e.r=c),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!_.length){u+=h;continue}var b={t:"s",v:_};r.raw||!_.trim().length||T=="s"||(_==="TRUE"?b={t:"b",v:!0}:_==="FALSE"?b={t:"b",v:!1}:isNaN(ca(_))?isNaN(Sc(_).getDate())||(b={t:"d",v:pn(_)},r.cellDates||(b={t:"n",v:cs(b.v)}),b.z=r.dateNF||Mt[14]):b={t:"n",v:ca(_)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=b):n[Rt({r:c,c:u})]=b,u+=h}}}}return n["!ref"]=rr(p),m.length&&(n["!merges"]=m),n}function ine(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var u=Rt({r,c:a}),f=n.dense?(t[r]||[])[a]:t[u],h=f&&f.v!=null&&(f.h||Mx(f.w||(_i(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+u,i.push(zX("td",h,p))}}var m="<tr>";return m+i.join("")+"</tr>"}var one='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',lne="</body></html>";function cne(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return vo(QS(r[0],e),e);var n=ey();return r.forEach(function(s,i){ty(n,QS(s,e),"Sheet"+(i+1))}),n}function une(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function dne(t,e){var r=e||{},n=r.header!=null?r.header:one,s=r.footer!=null?r.footer:lne,i=[n],a=Bc(t["!ref"]);r.dense=Array.isArray(t),i.push(une(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(ine(t,a,o,r));return i.push("</table>"+s),i.join("")}function mk(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?is(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var u=Bc(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),s==-1&&(c.e.r=s=u.e.r+1)}var f=[],h=0,p=t["!rows"]||(t["!rows"]=[]),m=0,g=0,v=0,x=0,y=0,_=0;for(t["!cols"]||(t["!cols"]=[]);m<o.length&&g<l;++m){var I=o[m];if(ZS(I)){if(n.display)continue;p[g]={hidden:!0}}var R=I.children;for(v=x=0;v<R.length;++v){var A=R[v];if(!(n.display&&ZS(A))){var E=A.hasAttribute("data-v")?A.getAttribute("data-v"):A.hasAttribute("v")?A.getAttribute("v"):u4(A.innerHTML),T=A.getAttribute("data-z")||A.getAttribute("z");for(h=0;h<f.length;++h){var b=f[h];b.s.c==x+i&&b.s.r<g+s&&g+s<=b.e.r&&(x=b.e.c+1-i,h=-1)}_=+A.getAttribute("colspan")||1,((y=+A.getAttribute("rowspan")||1)>1||_>1)&&f.push({s:{r:g+s,c:x+i},e:{r:g+s+(y||1)-1,c:x+i+(_||1)-1}});var S={t:"s",v:E},k=A.getAttribute("data-t")||A.getAttribute("t")||"";E!=null&&(E.length==0?S.t=k||"z":n.raw||E.trim().length==0||k=="s"||(E==="TRUE"?S={t:"b",v:!0}:E==="FALSE"?S={t:"b",v:!1}:isNaN(ca(E))?isNaN(Sc(E).getDate())||(S={t:"d",v:pn(E)},n.cellDates||(S={t:"n",v:cs(S.v)}),S.z=n.dateNF||Mt[14]):S={t:"n",v:ca(E)})),S.z===void 0&&T!=null&&(S.z=T);var w="",D=A.getElementsByTagName("A");if(D&&D.length)for(var N=0;N<D.length&&!(D[N].hasAttribute("href")&&(w=D[N].getAttribute("href"),w.charAt(0)!="#"));++N);w&&w.charAt(0)!="#"&&(S.l={Target:w}),n.dense?(t[g+s]||(t[g+s]=[]),t[g+s][x+i]=S):t[Rt({c:x+i,r:g+s})]=S,c.e.c<x+i&&(c.e.c=x+i),x+=_}}++g}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),c.e.r=Math.max(c.e.r,g-1+s),t["!ref"]=rr(c),g>=l&&(t["!fullref"]=rr((c.e.r=o.length-m+g-1+s,c))),t}function gk(t,e){var r=e||{},n=r.dense?[]:{};return mk(n,t,e)}function fne(t,e){return vo(gk(t,e),e)}function ZS(t){var e="",r=hne(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function hne(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function pne(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=nr(e.replace(/<[^>]*>/g,""));return[r]}var e2={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function vk(t,e){var r=e||{},n=Lx(t),s=[],i,a,o={name:""},l="",c=0,u,f,h={},p=[],m=r.dense?[]:{},g,v,x={value:""},y="",_=0,I=[],R=-1,A=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,b={},S=[],k={},w=0,D=0,N=[],F=1,P=1,O=[],M={Names:[]},U={},z=["",""],j=[],H={},W="",K=0,re=!1,me=!1,ce=0;for(bd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=bd.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?m["!ref"]=rr(E):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(m["!fullref"]=m["!ref"],E.e.r=r.sheetRows-1,m["!ref"]=rr(E)),S.length&&(m["!merges"]=S),N.length&&(m["!rows"]=N),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),h[u.name]=m,me=!1):g[0].charAt(g[0].length-2)!=="/"&&(u=Tt(g[0],!1),R=A=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,m=r.dense?[]:{},S=[],N=[],me=!0);break;case"table-row-group":g[1]==="/"?--T:++T;break;case"table-row":case"":if(g[1]==="/"){R+=F,F=1;break}if(f=Tt(g[0],!1),f.?R=f.-1:R==-1&&(R=0),F=+f["number-rows-repeated"]||1,F<10)for(ce=0;ce<F;++ce)T>0&&(N[R+ce]={level:T});A=-1;break;case"covered-table-cell":g[1]!=="/"&&++A,r.sheetStubs&&(r.dense?(m[R]||(m[R]=[]),m[R][A]={t:"z"}):m[Rt({r:R,c:A})]={t:"z"}),y="",I=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++A,x=Tt(g[0],!1),P=parseInt(x["number-columns-repeated"]||"1",10),v={t:"z",v:null},x.formula&&r.cellFormula!=!1&&(v.f=qS(nr(x.formula))),(x.||x["value-type"])=="string"&&(v.t="s",v.v=nr(x["string-value"]||""),r.dense?(m[R]||(m[R]=[]),m[R][A]=v):m[Rt({r:R,c:A})]=v),A+=P-1;else if(g[1]!=="/"){++A,y="",_=0,I=[],P=1;var pe=F?R+F-1:R;if(A>E.e.c&&(E.e.c=A),A<E.s.c&&(E.s.c=A),R<E.s.r&&(E.s.r=R),pe>E.e.r&&(E.e.r=pe),x=Tt(g[0],!1),j=[],H={},v={t:x.||x["value-type"],v:null},r.cellFormula)if(x.formula&&(x.formula=nr(x.formula)),x["number-matrix-columns-spanned"]&&x["number-matrix-rows-spanned"]&&(w=parseInt(x["number-matrix-rows-spanned"],10)||0,D=parseInt(x["number-matrix-columns-spanned"],10)||0,k={s:{r:R,c:A},e:{r:R+w-1,c:A+D-1}},v.F=rr(k),O.push([k,v.F])),x.formula)v.f=qS(x.formula);else for(ce=0;ce<O.length;++ce)R>=O[ce][0].s.r&&R<=O[ce][0].e.r&&A>=O[ce][0].s.c&&A<=O[ce][0].e.c&&(v.F=O[ce][1]);switch((x["number-columns-spanned"]||x["number-rows-spanned"])&&(w=parseInt(x["number-rows-spanned"],10)||0,D=parseInt(x["number-columns-spanned"],10)||0,k={s:{r:R,c:A},e:{r:R+w-1,c:A+D-1}},S.push(k)),x["number-columns-repeated"]&&(P=parseInt(x["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ir(x["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(x.value);break;case"percentage":v.t="n",v.v=parseFloat(x.value);break;case"currency":v.t="n",v.v=parseFloat(x.value);break;case"date":v.t="d",v.v=pn(x["date-value"]),r.cellDates||(v.t="n",v.v=cs(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=CX(x["time-value"])/86400,r.cellDates&&(v.t="d",v.v=Ap(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(x.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",x["string-value"]!=null&&(y=nr(x["string-value"]),I=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(re=!1,v.t==="s"&&(v.v=y||"",I.length&&(v.R=I),re=_==0),U.Target&&(v.l=U),j.length>0&&(v.c=j,j=[]),y&&r.cellText!==!1&&(v.w=y),re&&(v.t="z",delete v.v),(!re||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=R))for(var te=0;te<F;++te){if(P=parseInt(x["number-columns-repeated"]||"1",10),r.dense)for(m[R+te]||(m[R+te]=[]),m[R+te][A]=te==0?v:In(v);--P>0;)m[R+te][A+P]=In(v);else for(m[Rt({r:R+te,c:A})]=v;--P>0;)m[Rt({r:R+te,c:A+P})]=In(v);E.e.c<=A&&(E.e.c=A)}P=parseInt(x["number-columns-repeated"]||"1",10),A+=P-1,P=0,v={},y="",I=[]}U={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i;H.t=y,I.length&&(H.R=I),H.a=W,j.push(H)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);W="",K=0,y="",_=0,I=[];break;case"creator":g[1]==="/"?W=n.slice(K,g.index):K=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);y="",_=0,I=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(b[o.name]=l,(i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(l="",o=Tt(g[0],!1),s.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":a=Tt(g[0],!1),l+=e2[g[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":a=Tt(g[0],!1),l+=e2[g[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,g.index);break}else c=g.index+g[0].length;break;case"named-range":a=Tt(g[0],!1),z=rg(a["cell-range-address"]);var Q={Name:a.name,Ref:z[0]+"!"+z[1]};me&&(Q.Sheet=p.length),M.Names.push(Q);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!x||!x["string-value"])){var ye=pne(n.slice(_,g.index));y=(y.length>0?y+`
`:"")+ye[0]}else Tt(g[0],!1),_=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{z=rg(Tt(g[0])["target-range-address"]),h[z[0]]["!autofilter"]={ref:z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(U=Tt(g[0],!1),!U.href)break;U.Target=nr(U.href),delete U.href,U.Target.charAt(0)=="#"&&U.Target.indexOf(".")>-1?(z=rg(U.Target.slice(1)),U.Target="#"+z[0]+"!"+z[1]):U.Target.match(/^\.\.[\\\/]/)&&(U.Target=U.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var X={Sheets:h,SheetNames:p,Workbook:M};return r.bookSheets&&delete X.Sheets,X}function t2(t,e){e=e||{},Os(t,"META-INF/manifest.xml")&&DY(Xr(t,"META-INF/manifest.xml"),e);var r=Ts(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=vk(Er(r),e);return Os(t,"meta.xml")&&(n.Props=D4(Xr(t,"meta.xml"))),n}function r2(t,e){return vk(t,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Yx(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Cv(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Er(dl(t))}function Iv(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function n2(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function mne(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function wd(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function ln(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function zn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=wd(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=wd(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function Jx(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function gne(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=wd(t,n),i=zn(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:ln(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=zn(o.data),c=ln(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=ln(i[3][0].data)>>>0>0),r.push(a)}return r}function vne(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=wd(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Iv(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var u=Iv(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function xne(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(vne(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Iv(e)}function yne(t,e,r,n){var s=Yx(t),i=s.getUint32(4,!0),a=(n>1?12:8)+n2(i&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);i&512&&(o=s.getUint32(a,!0),a+=4),a+=n2(i&(n>1?12288:4096))*4,i&16&&(l=s.getUint32(a,!0),a+=4),i&32&&(c=s.getFloat64(a,!0),a+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(a,!0)*1e3),a+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:e[l]};else if(!isNaN(c))f={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function Ene(t,e,r){var n=Yx(t),s=n.getUint32(8,!0),i=12,a=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);s&1&&(l=mne(t,i),i+=16),s&2&&(c=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=n.getUint32(i,!0),i+=4),s&16&&(a=n.getUint32(i,!0),i+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:e[o]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(a>-1)f={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return f}function _ne(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return yne(t,e,r,t[0]);case 5:return Ene(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function to(t){var e=zn(t);return wd(e[1][0].data)}function s2(t,e){var r=zn(e.data),n=ln(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(a){var o=zn(a.data),l=ln(o[1][0].data)>>>0;switch(n){case 1:i[l]=Cv(o[3][0].data);break;case 8:{var c=t[to(o[9][0].data)][0],u=zn(c.data),f=t[to(u[1][0].data)][0],h=ln(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=zn(f.data);i[l]=p[3].map(function(m){return Cv(m.data)}).join("")}break}}),i}function bne(t,e){var r,n,s,i,a,o,l,c,u,f,h,p,m,g,v=zn(t),x=ln(v[1][0].data)>>>0,y=ln(v[2][0].data)>>>0,_=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&ln(v[8][0].data)>0||!1,I,R;if((i=(s=v[7])==null?void 0:s[0])!=null&&i.data&&e!=0)I=(o=(a=v[7])==null?void 0:a[0])==null?void 0:o.data,R=(c=(l=v[6])==null?void 0:l[0])==null?void 0:c.data;else if((f=(u=v[4])==null?void 0:u[0])!=null&&f.data&&e!=1)I=(p=(h=v[4])==null?void 0:h[0])==null?void 0:p.data,R=(g=(m=v[3])==null?void 0:m[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var A=_?4:1,E=Yx(I),T=[],b=0;b<I.length/2;++b){var S=E.getUint16(b*2,!0);S<65535&&T.push([b,S])}if(T.length!=y)throw"Expected ".concat(y," cells, found ").concat(T.length);var k=[];for(b=0;b<T.length-1;++b)k[T[b][0]]=R.subarray(T[b][1]*A,T[b+1][1]*A);return T.length>=1&&(k[T[T.length-1][0]]=R.subarray(T[T.length-1][1]*A)),{R:x,cells:k}}function Sne(t,e){var r,n=zn(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?ln(n[7][0].data)>>>0>0?1:0:-1,i=Jx(n[5],function(a){return bne(a,s)});return{nrows:ln(n[4][0].data)>>>0,data:i.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function Tne(t,e,r){var n,s=zn(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(ln(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(ln(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=rr(i);var a=zn(s[4][0].data),o=s2(t,t[to(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?s2(t,t[to(a[17][0].data)][0]):[],c=zn(a[3][0].data),u=0;c[1].forEach(function(f){var h=zn(f.data),p=t[to(h[2][0].data)][0],m=ln(p.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var g=Sne(t,p);g.data.forEach(function(v,x){v.forEach(function(y,_){var I=Rt({r:u+x,c:_}),R=_ne(y,o,l);R&&(r[I]=R)})}),u+=g.nrows})}function Ane(t,e){var r=zn(e.data),n={"!ref":"A1"},s=t[to(r[2][0].data)],i=ln(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Tne(t,s[0],n),n}function wne(t,e){var r,n=zn(e.data),s={name:(r=n[1])!=null&&r[0]?Cv(n[1][0].data):"",sheets:[]},i=Jx(n[2],to);return i.forEach(function(a){t[a].forEach(function(o){var l=ln(o.meta[1][0].data);l==6e3&&s.sheets.push(Ane(t,o))})}),s}function Cne(t,e){var r=ey(),n=zn(e.data),s=Jx(n[1],to);if(s.forEach(function(i){t[i].forEach(function(a){var o=ln(a.meta[1][0].data);if(o==2){var l=wne(t,a);l.sheets.forEach(function(c,u){ty(r,c,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function sg(t){var e,r,n,s,i={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=xne(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var u;try{u=gne(c)}catch(f){return console.log("## "+(f.message||f))}u.forEach(function(f){i[f.id]=f.messages,a.push(f.id)})}}),!a.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&ln(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||a.forEach(function(l){i[l].forEach(function(c){var u=ln(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Cne(i,o)}function Ine(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function Qx(t){Ine([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function kne(t){return Hl.WS.indexOf(t)>-1?"sheet":t==Hl.CS?"chart":t==Hl.DS?"dialog":t==Hl.MS?"macro":t&&t.length?t:"sheet"}function Dne(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,kne(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Pne(t,e,r,n,s,i,a,o,l,c,u,f){try{i[n]=Vu(Ts(t,r,!0),e);var h=Xr(t,e),p;switch(o){case"sheet":p=Lre(h,e,s,l,i[n],c,u,f);break;case"chart":if(p=Bre(h,e,s,l,i[n],c,u,f),!p||!p["!drawel"])break;var m=mu(p["!drawel"].Target,e),g=bv(m),v=MZ(Ts(t,m,!0),Vu(Ts(t,g,!0),m)),x=mu(v,m),y=bv(x);p=Ere(Ts(t,x,!0),x,l,Vu(Ts(t,y,!0),x),c,p);break;case"macro":p=Ure(h,e,s,l,i[n],c,u,f);break;case"dialog":p=$re(h,e,s,l,i[n],c,u,f);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=p;var _=[];i&&i[n]&&Fa(i[n]).forEach(function(I){var R="";if(i[n][I].Type==Hl.CMNT){R=mu(i[n][I].Target,e);var A=Gre(Xr(t,R,!0),R,l);if(!A||!A.length)return;jS(p,A,!1)}i[n][I].Type==Hl.TCMNT&&(R=mu(i[n][I].Target,e),_=_.concat(BZ(Xr(t,R,!0),l)))}),_&&_.length&&jS(p,_,!0,l.people||[])}catch(I){if(l.WTF)throw I}}function Ps(t){return t.charAt(0)=="/"?t.slice(1):t}function Rne(t,e){if(t4(),e=e||{},Qx(e),Os(t,"META-INF/manifest.xml")||Os(t,"objectdata.xml"))return t2(t,e);if(Os(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof sg<"u"){if(t.FileIndex)return sg(t);var r=er.utils.cfb_new();return gS(t).forEach(function(N){FX(r,N,RX(t,N))}),sg(r)}throw new Error("Unsupported NUMBERS file")}if(!Os(t,"[Content_Types].xml"))throw Os(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Os(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=gS(t),s=IY(Ts(t,"[Content_Types].xml")),i=!1,a,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Xr(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Xr(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(Gu=[],s.sst)try{Gu=jre(Xr(t,Ps(s.sst)),s.sst,e)}catch(N){if(e.WTF)throw N}e.cellStyles&&s.themes.length&&(l=Hre(Ts(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=Vre(Xr(t,Ps(s.style)),s.style,l,e))}s.links.map(function(N){try{var F=Vu(Ts(t,bv(Ps(N))),N);return zre(Xr(t,Ps(N)),F,N,e)}catch{}});var u=Mre(Xr(t,Ps(s.workbooks[0])),s.workbooks[0],e),f={},h="";s.coreprops.length&&(h=Xr(t,Ps(s.coreprops[0]),!0),h&&(f=D4(h)),s.extprops.length!==0&&(h=Xr(t,Ps(s.extprops[0]),!0),h&&FY(h,f,e)));var p={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(h=Ts(t,Ps(s.custprops[0]),!0),h&&(p=NY(h,e)));var m={};if((e.bookSheets||e.bookProps)&&(u.Sheets?a=u.Sheets.map(function(F){return F.name}):f.Worksheets&&f.SheetNames.length>0&&(a=f.SheetNames),e.bookProps&&(m.Props=f,m.Custprops=p),e.bookSheets&&typeof a<"u"&&(m.SheetNames=a),e.bookSheets?m.SheetNames:e.bookProps))return m;a={};var g={};e.bookDeps&&s.calcchain&&(g=Wre(Xr(t,Ps(s.calcchain)),s.calcchain));var v=0,x={},y,_;{var I=u.Sheets;f.Worksheets=I.length,f.SheetNames=[];for(var R=0;R!=I.length;++R)f.SheetNames[R]=I[R].name}var A=i?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Os(t,T)||(T="xl/_rels/workbook."+A+".rels");var b=Vu(Ts(t,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=Kre(Xr(t,Ps(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=UZ(Xr(t,Ps(s.people[0])),e)),b&&(b=Dne(b,u.Sheets));var S=Xr(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var k="sheet";if(b&&b[v]?(y="xl/"+b[v][1].replace(/[\/]?xl\//,""),Os(t,y)||(y=b[v][1]),Os(t,y)||(y=T.replace(/_rels\/.*$/,"")+b[v][1]),k=b[v][2]):(y="xl/worksheets/sheet"+(v+1-S)+"."+A,y=y.replace(/sheet0\./,"sheet.")),_=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(v!=e.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var w=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==v&&(w=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==f.SheetNames[v].toLowerCase()&&(w=1);if(!w)continue e}}Pne(t,y,_,f.SheetNames[v],v,x,a,k,e,u,l,c)}return m={Directory:s,Workbook:u,Props:f,Custprops:p,Deps:g,Sheets:a,SheetNames:f.SheetNames,Strings:Gu,Styles:c,Themes:l,SSF:In(Mt)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(N,F){N=N.replace(/^Root Entry[\/]/,""),m.keys.push(N),m.files[N]=t.FileIndex[F]}))),e&&e.bookVBA&&(s.vba.length>0?m.vbaraw=Xr(t,Ps(s.vba[0]),!0):s.defaults&&s.defaults.bin===jZ&&(m.vbaraw=Xr(t,"xl/vbaProject.bin",!0))),m}function Fne(t,e){var r=e||{},n="Workbook",s=er.find(t,n);try{if(n="/!DataSpaces/Version",s=er.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(AQ(s.content),n="/!DataSpaces/DataSpaceMap",s=er.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=CQ(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=er.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=IQ(s.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=er.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);DQ(s.content)}catch{}if(n="/EncryptionInfo",s=er.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=PQ(s.content);if(n="/EncryptedPackage",s=er.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Zx(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=ks(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function One(t,e){return er.find(t,"EncryptedPackage")?Fne(t,e):pk(t,e)}function Nne(t,e){var r,n=t,s=e||{};return s.type||(s.type=Jt&&Buffer.isBuffer(t)?"buffer":"base64"),r=o4(n,s),Rne(r,s)}function xk(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Av(t.slice(r),e);default:break e}return Sd.to_workbook(t,e)}function Mne(t,e){var r="",n=Zx(t,e);switch(e.type){case"base64":r=ks(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Zo(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Er(r)),e.type="binary",xk(r,e)}function Lne(t,e){var r=t;return e.type=="base64"&&(r=ks(r)),r=yd.utils.decode(1200,r.slice(2),"str"),e.type="binary",xk(r,e)}function Bne(t){return t.match(/[^\x00-\x7F]/)?gu(t):t}function ag(t,e,r,n){return n?(r.type="string",Sd.to_workbook(t,r)):Sd.to_workbook(e,r)}function vh(t,e){jI();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return vh(new Uint8Array(t),(r=In(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),ic={},r.dateNF&&(ic.dateNF=r.dateNF),r.type||(r.type=Jt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Jt?"buffer":"binary",n=AX(t),typeof Uint8Array<"u"&&!Jt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=Bne(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=In(r),r.type="array",vh(Px(n),r)}switch((s=Zx(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return One(er.read(n,r),r);break;case 9:if(s[1]<=8)return pk(n,r);break;case 60:return Av(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return fQ(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return uQ.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Nne(n,r):ag(t,n,r,i);case 239:return s[3]===60?Av(n,r):ag(t,n,r,i);case 255:if(s[1]===254)return Lne(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return ju.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return ju.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return HS.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return jQ.to_workbook(n,r);break;case 10:case 13:case 32:return Mne(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return lQ.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?HS.to_workbook(n,r):ag(t,n,r,i)}function Une(t,e,r,n,s,i,a,o){var l=kn(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!a||t[r])for(var p=e.s.c;p<=e.e.c;++p){var m=a?t[r][p]:t[n[p]+l];if(m===void 0||m.t===void 0){if(c===void 0)continue;i[p]!=null&&(h[i[p]]=c);continue}var g=m.v;switch(m.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(i[p]!=null){if(g==null)if(m.t=="e"&&g===null)h[i[p]]=null;else if(c!==void 0)h[i[p]]=c;else if(u&&g===null)h[i[p]]=null;else continue;else h[i[p]]=u&&(m.t!=="n"||m.t==="n"&&o.rawNumbers!==!1)?g:_i(m,g,o);g!=null&&(f=!1)}}return{row:h,isempty:f}}function kv(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=Ur(u);break;case"number":l=Ur(t["!ref"]),l.s.r=u;break;default:l=u}n>0&&(s=0);var f=kn(l.s.r),h=[],p=[],m=0,g=0,v=Array.isArray(t),x=l.s.r,y=0,_={};v&&!t[x]&&(t[x]=[]);var I=c.skipHidden&&t["!cols"]||[],R=c.skipHidden&&t["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(I[y]||{}).hidden)switch(h[y]=on(y),r=v?t[x][y]:t[h[y]+f],n){case 1:i[y]=y-l.s.c;break;case 2:i[y]=h[y];break;case 3:i[y]=c.header[y-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=_i(r,null,c),g=_[a]||0,!g)_[a]=1;else{do o=a+"_"+g++;while(_[o]);_[a]=g,_[o]=1}i[y]=o}for(x=l.s.r+s;x<=l.e.r;++x)if(!(R[x]||{}).hidden){var A=Une(t,l,x,h,n,i,v,c);(A.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(p[m++]=A.row)}return p.length=m,p}var a2=/"/g;function $ne(t,e,r,n,s,i,a,o){for(var l=!0,c=[],u="",f=kn(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var p=o.dense?(t[r]||[])[h]:t[n[h]+f];if(p==null)u="";else if(p.v!=null){l=!1,u=""+(o.rawNumbers&&p.t=="n"?p.v:_i(p,null,o));for(var m=0,g=0;m!==u.length;++m)if((g=u.charCodeAt(m))===s||g===i||g===34||o.forceQuotes){u='"'+u.replace(a2,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(l=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(a2,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(a)}function yk(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Ur(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),u="",f=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],p=n.skipHidden&&t["!rows"]||[],m=s.s.c;m<=s.e.c;++m)(h[m]||{}).hidden||(f[m]=on(m));for(var g=0,v=s.s.r;v<=s.e.r;++v)(p[v]||{}).hidden||(u=$ne(t,s,v,f,a,l,i,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((g++?o:"")+u)));return delete n.dense,r.join("")}function Vne(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=yk(t,e);return r}function Hne(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Ur(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=on(o);for(var u=s.s.r;u<=s.e.r;++u)for(i=kn(u),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[u]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function Ek(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?is(n.origin):n.origin;a=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var f=Ur(i["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),a==-1&&(a=f.e.r+1,u.e.r=a+e.length-1+s)}else a==-1&&(a=0,u.e.r=e.length-1+s);var h=n.header||[],p=0;e.forEach(function(g,v){Fa(g).forEach(function(x){(p=h.indexOf(x))==-1&&(h[p=h.length]=x);var y=g[x],_="z",I="",R=Rt({c:o+p,r:a+v+s});c=Cd(i,R),y&&typeof y=="object"&&!(y instanceof Date)?i[R]=y:(typeof y=="number"?_="n":typeof y=="boolean"?_="b":typeof y=="string"?_="s":y instanceof Date?(_="d",n.cellDates||(_="n",y=cs(y)),I=n.dateNF||Mt[14]):y===null&&n.nullError&&(_="e",y=0),c?(c.t=_,c.v=y,delete c.w,delete c.R,I&&(c.z=I)):i[R]=c={t:_,v:y},I&&(c.z=I))})}),u.e.c=Math.max(u.e.c,o+h.length-1);var m=kn(a);if(s)for(p=0;p<h.length;++p)i[on(p+o)+m]={t:"s",v:h[p]};return i["!ref"]=rr(u),i}function jne(t,e){return Ek(null,t,e)}function Cd(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=is(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Cd(t,Rt(e)):Cd(t,Rt({r:e,c:r||0}))}function Gne(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function ey(){return{SheetNames:[],Sheets:{}}}function ty(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(Ire(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Wne(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Gne(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function zne(t,e){return t.z=e,t}function _k(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Kne(t,e,r){return _k(t,"#"+e,r)}function qne(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Xne(t,e,r,n){for(var s=typeof e!="string"?e:Ur(e),i=typeof e=="string"?e:rr(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=Cd(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Yne={encode_col:on,encode_row:kn,encode_cell:Rt,encode_range:rr,decode_col:$x,decode_row:Ux,split_cell:oY,decode_cell:is,decode_range:Bc,format_cell:_i,sheet_add_aoa:A4,sheet_add_json:Ek,sheet_add_dom:mk,aoa_to_sheet:Uc,json_to_sheet:jne,table_to_sheet:gk,table_to_book:fne,sheet_to_csv:yk,sheet_to_txt:Vne,sheet_to_json:kv,sheet_to_html:dne,sheet_to_formulae:Hne,sheet_to_row_object_array:kv,sheet_get_cell:Cd,book_new:ey,book_append_sheet:ty,book_set_sheet_visibility:Wne,cell_set_number_format:zne,cell_set_hyperlink:_k,cell_set_internal_link:Kne,cell_add_comment:qne,sheet_set_array_formula:Xne,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Jne={class:"admin-time-table"},Qne={class:"header"},Zne={class:"admin-action-btns"},ese=["disabled"],tse={class:"import-section"},rse={key:0,class:"import-preview"},nse={class:"import-options"},sse={class:"import-option-group"},ase=["disabled"],ise=["value"],ose={class:"import-option-group"},lse=["disabled"],cse={class:"import-actions"},use=["disabled"],dse={class:"content"},fse={key:0,class:"loading"},hse={key:1,class:"time-tables-container"},pse={key:0,class:"empty-state"},mse={key:1,class:"time-tables-list"},gse={class:"time-table-header"},vse={class:"time-table-info"},xse={class:"time-table-days"},yse={class:"admin-action-btns"},Ese=["onClick"],_se=["onClick"],bse={class:"time-table-schedule"},Sse={class:"schedule-item-info"},Tse={class:"item-name"},Ase={class:"item-time"},wse={class:"schedule-item-type"},Cse={class:"dialog-header"},Ise={class:"dialog-content"},kse={class:"form-group"},Dse={class:"form-group"},Pse={class:"days-checkboxes"},Rse=["value"],Fse={class:"form-group"},Ose={class:"schedule-items"},Nse={class:"item-row"},Mse=["onUpdate:modelValue"],Lse=["onUpdate:modelValue"],Bse=["onUpdate:modelValue"],Use=["onUpdate:modelValue"],$se=["onClick"],Vse={__name:"AdminTimeTable",setup(t){const{saveAppSettings:e}=Ws(),r=se(!0),n=se(!1),s=se([]),i=se(!1),a=se(-1),o=se({name:"",days:[],schedule:[]}),l=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],c=se(null),u=se([]),f=se([]),h=se("overwrite"),p=se(""),m=se(""),g=Ae(()=>h.value==="overwrite"?p.value!=="":m.value.trim()!==""),v=()=>{const O=fn(o.value.name,{trim:!0,maxLength:100,removeDangerous:!0}),M=Wr(O);if(!M.isSafe)return alert(`Security threat detected in time table name: ${M.threats.join(", ")}`),!1;if(o.value.name=O,!o.value.name.trim())return alert("Please enter a time table name"),!1;if(o.value.days.length===0)return alert("Please select at least one day"),!1;if(o.value.schedule.length===0)return alert("Please add at least one schedule item"),!1;for(let U=0;U<o.value.schedule.length;U++){const z=o.value.schedule[U],j=fn(z.name,{trim:!0,maxLength:50,removeDangerous:!0}),H=Wr(j);if(!H.isSafe)return alert(`Security threat detected in schedule item ${U+1}: ${H.threats.join(", ")}`),!1;if(z.name=j,!z.name.trim())return alert(`Please enter a name for schedule item ${U+1}`),!1;if(!z.startTime||!z.endTime)return alert(`Please enter start and end times for ${z.name}`),!1;if(z.startTime>=z.endTime)return alert(`${z.name}: Start time must be before end time`),!1}return!0},x=O=>{const M=fn(O,{trim:!0,maxLength:100,removeDangerous:!0}),U=Wr(M);return U.isSafe?M:(alert(`Security threat detected in import name: ${U.threats.join(", ")}`),null)};async function y(){try{console.log("Loading time tables..."),r.value=!0;const O=await tr(Qe(Xe,"app_settings","global"));if(O.exists()){const M=O.data();s.value=M.timeTables||[],console.log("Loaded time tables:",s.value)}else s.value=[],console.log("No time tables found, starting with empty array");r.value=!1}catch(O){console.error("Error loading time tables:",O),r.value=!1}}function _(){a.value=-1,o.value={name:"",days:[],schedule:[]},i.value=!0}function I(O){a.value=O,o.value=JSON.parse(JSON.stringify(s.value[O])),i.value=!0}function R(O){confirm("Are you sure you want to delete this time table?")&&s.value.splice(O,1)}function A(){o.value.schedule.push({name:"",type:"period",startTime:"",endTime:""})}function E(O){o.value.schedule.splice(O,1)}function T(){if(!v())return;if(!ws("saveTimeTable",10,6e4).allowed){alert("Too many save requests. Please wait before saving again.");return}a.value===-1?s.value.push(JSON.parse(JSON.stringify(o.value))):s.value[a.value]=JSON.parse(JSON.stringify(o.value)),b()}function b(){i.value=!1,a.value=-1,o.value={name:"",days:[],schedule:[]}}async function S(){try{if(!ws("saveAllTimeTables",5,3e5).allowed){alert("Too many save all requests. Please wait before saving again.");return}n.value=!0,console.log("Saving time tables:",s.value);const M=await tr(Qe(Xe,"app_settings","global")),z={...M.exists()?M.data():{},timeTables:s.value};await e(z),n.value=!1,console.log("Time tables saved successfully")}catch(O){console.error("Error saving time tables:",O),n.value=!1}}function k(O){return O.length===0?"No days selected":O.length===7?"Every day":O.length===5&&O.includes("monday")&&O.includes("friday")?"Weekdays":O.map(M=>{const U=l.find(z=>z.value===M);return U?U.label:M}).join(", ")}function w(O){if(!O)return"";const[M,U]=O.split(":"),z=parseInt(M),j=z>=12?"PM":"AM";return`${z===0?12:z>12?z-12:z}:${U} ${j}`}function D(){c.value&&c.value.click()}function N(O){const M=O.target.files[0];if(!M)return;const U=Mc(M,{allowedTypes:["csv","excel"],maxSize:5*1024*1024,fieldName:"Time Table Import File"});if(!U.isValid){alert(U.error),O.target.value="";return}const z=Wr(M.name);if(!z.isSafe){alert(`File name contains potentially dangerous content: ${z.threats.join(", ")}`),O.target.value="";return}const j=new FileReader;j.onload=H=>{try{let W=H.target.result,K;M.name.endsWith(".csv")?K=vh(W,{type:"binary"}):K=vh(W,{type:"binary"});const re=K.SheetNames[0],me=K.Sheets[re],pe=Yne.sheet_to_json(me,{defval:""}).map(te=>{const Q={};return Object.entries(te).forEach(([ye,X])=>{const q=fn(ye,{trim:!0,maxLength:50,removeDangerous:!0}),Y=fn(String(X),{trim:!0,maxLength:100,removeDangerous:!0});Q[q]=Y}),Q});u.value=pe,f.value=pe.length?Object.keys(pe[0]):[]}catch(W){alert("Error parsing file. Please check the file format and try again."),console.error("File parsing error:",W)}},j.readAsBinaryString(M)}function F(){try{if(!ws("importTimeTable",3,3e5).allowed){alert("Too many import requests. Please wait before importing again.");return}const M=u.value.map(U=>{const z=U.name||U.Name||U.period||U.Period||U.item||U.Item||"Unknown",j=U.startTime||U["Start Time"]||U.start||U.Start||"08:00",H=U.endTime||U["End Time"]||U.end||U.End||"08:55",W=fn(z,{trim:!0,maxLength:50,removeDangerous:!0}),K=Wr(W);if(!K.isSafe)return console.warn(`Security threat detected in imported item: ${K.threats.join(", ")}`),null;let re="period";const me=U.type||U.Type||"",ce=W.toLowerCase();return me.toLowerCase().includes("lunch")||ce.includes("lunch")?re="lunch":me.toLowerCase().includes("break")||ce.includes("break")?re="break":(me.toLowerCase().includes("other")||ce.includes("other"))&&(re="other"),{name:W,type:re,startTime:j,endTime:H}}).filter(U=>U&&U.name&&U.name!=="Unknown");if(M.length===0){alert("No valid schedule items found in the imported data. Please check your file format.");return}if(h.value==="overwrite"){if(p.value===""){alert("Please select a time table to overwrite");return}const U=parseInt(p.value);s.value[U]={...s.value[U],schedule:M}}else{const U=x(m.value);if(!U)return;const z={name:U,days:["monday","tuesday","wednesday","thursday","friday"],schedule:M};s.value.push(z)}u.value=[],f.value=[],h.value="overwrite",p.value="",m.value="",alert("Time table imported successfully!")}catch(O){console.error("Error importing time table:",O),alert("Error importing time table. Please check your file format and try again.")}}function P(){u.value=[],f.value=[],h.value="overwrite",p.value="",m.value=""}return Ut(y),(O,M)=>(B(),V("div",Jne,[d("div",Qne,[M[7]||(M[7]=d("h1",null,"Time Table Management",-1)),d("div",Zne,[d("button",{onClick:S,class:"admin-action-btn primary",disabled:n.value,style:{"min-width":"160px","max-width":"160px"}},J(n.value?"Saving...":"Save Time Tables"),9,ese),d("button",{onClick:_,class:"admin-action-btn secondary",style:{"min-width":"140px","max-width":"140px"}}," Add Time Table ")])]),d("div",tse,[d("button",{onClick:D,class:"admin-action-btn info",style:{"min-width":"150px","max-width":"150px"}},"Import CSV/XLSX"),d("input",{ref_key:"fileInput",ref:c,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:N},null,544),M[8]||(M[8]=d("div",{class:"import-note"}," You can export from Google Sheets or Excel as CSV, or upload your Excel file directly. ",-1))]),u.value.length?(B(),V("div",rse,[M[13]||(M[13]=d("h3",null,"Preview Imported Time Table",-1)),d("table",null,[d("thead",null,[d("tr",null,[(B(!0),V(Re,null,Ve(f.value,U=>(B(),V("th",{key:U},J(U),1))),128))])]),d("tbody",null,[(B(!0),V(Re,null,Ve(u.value,(U,z)=>(B(),V("tr",{key:z},[(B(!0),V(Re,null,Ve(f.value,j=>(B(),V("td",{key:j},J(U[j]),1))),128))]))),128))])]),d("div",nse,[M[12]||(M[12]=d("h4",null,"Import Options",-1)),d("div",sse,[d("label",null,[we(d("input",{type:"radio","onUpdate:modelValue":M[0]||(M[0]=U=>h.value=U),value:"overwrite"},null,512),[[mi,h.value]]),M[9]||(M[9]=Oe(" Overwrite existing time table: "))]),we(d("select",{"onUpdate:modelValue":M[1]||(M[1]=U=>p.value=U),disabled:h.value!=="overwrite",class:"form-select"},[M[10]||(M[10]=d("option",{value:""},"Select a time table...",-1)),(B(!0),V(Re,null,Ve(s.value,(U,z)=>(B(),V("option",{key:z,value:z},J(U.name),9,ise))),128))],8,ase),[[mr,p.value]])]),d("div",ose,[d("label",null,[we(d("input",{type:"radio","onUpdate:modelValue":M[2]||(M[2]=U=>h.value=U),value:"create"},null,512),[[mi,h.value]]),M[11]||(M[11]=Oe(" Create new time table: "))]),we(d("input",{"onUpdate:modelValue":M[3]||(M[3]=U=>m.value=U),type:"text",placeholder:"Enter time table name...",disabled:h.value!=="create",class:"form-input"},null,8,lse),[[Je,m.value]])])]),d("div",cse,[d("button",{onClick:F,class:"btn btn-primary",disabled:!g.value},J(h.value==="overwrite"?"Overwrite Time Table":"Create New Time Table"),9,use),d("button",{onClick:P,class:"btn btn-secondary"},"Cancel")])])):_e("",!0),d("div",dse,[r.value?(B(),V("div",fse," Loading time tables... ")):(B(),V("div",hse,[s.value.length===0?(B(),V("div",pse,[M[14]||(M[14]=d("h3",null,"No Time Tables Created",-1)),M[15]||(M[15]=d("p",null,"Create your first time table to get started.",-1)),d("button",{onClick:_,class:"btn btn-primary"},"Create Time Table")])):(B(),V("div",mse,[(B(!0),V(Re,null,Ve(s.value,(U,z)=>(B(),V("div",{key:z,class:"time-table-card"},[d("div",gse,[d("div",vse,[d("h3",null,J(U.name),1),d("p",xse,J(k(U.days)),1)]),d("div",yse,[d("button",{onClick:j=>I(z),class:"admin-action-btn edit"}," Edit ",8,Ese),d("button",{onClick:j=>R(z),class:"admin-action-btn delete"}," Delete ",8,_se)])]),d("div",bse,[(B(!0),V(Re,null,Ve(U.schedule,(j,H)=>(B(),V("div",{key:H,class:"schedule-item"},[d("div",Sse,[d("span",Tse,J(j.name),1),d("span",Ase,J(w(j.startTime))+" - "+J(w(j.endTime)),1)]),d("div",wse,[d("span",{class:Ze(["type-badge",j.type])},J(j.type),3)])]))),128))])]))),128))]))]))]),i.value?(B(),V("div",{key:1,class:"edit-dialog-overlay",onClick:b},[d("div",{class:"edit-dialog",onClick:M[6]||(M[6]=mn(()=>{},["stop"]))},[d("div",Cse,[d("h2",null,J(a.value===-1?"Create Time Table":"Edit Time Table"),1),d("button",{onClick:b,class:"btn-close"},"")]),d("div",Ise,[d("div",kse,[M[16]||(M[16]=d("label",{for:"timeTableName"},"Time Table Name",-1)),we(d("input",{id:"timeTableName","onUpdate:modelValue":M[4]||(M[4]=U=>o.value.name=U),type:"text",placeholder:"e.g., Regular Schedule, Rally Day, Minimum Day",class:"form-input"},null,512),[[Je,o.value.name]])]),d("div",Dse,[M[17]||(M[17]=d("label",null,"Days This Schedule Applies",-1)),d("div",Pse,[(B(),V(Re,null,Ve(l,U=>d("label",{key:U.value,class:"day-checkbox"},[we(d("input",{type:"checkbox",value:U.value,"onUpdate:modelValue":M[5]||(M[5]=z=>o.value.days=z)},null,8,Rse),[[_t,o.value.days]]),Oe(" "+J(U.label),1)])),64))])]),d("div",Fse,[M[20]||(M[20]=d("label",null,"Schedule Items",-1)),d("div",Ose,[(B(!0),V(Re,null,Ve(o.value.schedule,(U,z)=>(B(),V("div",{key:z,class:"schedule-item-edit"},[d("div",Nse,[we(d("input",{"onUpdate:modelValue":j=>U.name=j,type:"text",placeholder:"Period 1, Lunch, Break, etc.",class:"form-input item-name-input"},null,8,Mse),[[Je,U.name]]),we(d("select",{"onUpdate:modelValue":j=>U.type=j,class:"form-select item-type-select"},M[18]||(M[18]=[d("option",{value:"period"},"Period",-1),d("option",{value:"break"},"Break",-1),d("option",{value:"lunch"},"Lunch",-1),d("option",{value:"other"},"Other",-1)]),8,Lse),[[mr,U.type]]),we(d("input",{"onUpdate:modelValue":j=>U.startTime=j,type:"time",class:"form-input time-input"},null,8,Bse),[[Je,U.startTime]]),M[19]||(M[19]=d("span",{class:"time-separator"},"to",-1)),we(d("input",{"onUpdate:modelValue":j=>U.endTime=j,type:"time",class:"form-input time-input"},null,8,Use),[[Je,U.endTime]]),d("button",{onClick:j=>E(z),class:"admin-action-btn delete"}," Delete ",8,$se)])]))),128)),d("button",{onClick:A,class:"admin-action-btn secondary",style:{"min-width":"150px","max-width":"150px"}}," Add Schedule Item ")])])]),d("div",{class:"admin-action-btns"},[d("button",{onClick:b,class:"admin-action-btn cancel",style:{"min-width":"100px","max-width":"100px"}},"Cancel"),d("button",{onClick:T,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},"Save Time Table")])])])):_e("",!0)]))}},bk=yt(Vse,[["__scopeId","data-v-428c8e72"]]);function Hse(){const t=se({}),e=se(!1);async function r(){e.value=!0;try{const f=await jt(wt(Xe,"aideSchedules")),h={};f.forEach(p=>{h[p.id]=p.data()}),t.value=h}catch(f){console.error("Error loading aide schedules:",f),t.value={}}finally{e.value=!1}}async function n(f){e.value=!0;try{const h=await tr(Qe(Xe,"aideSchedules",f));h.exists()?t.value[f]=h.data():t.value[f]={schedule:{},directAssignment:[]}}catch(h){console.error("Error loading aide schedule:",h),t.value[f]={schedule:{},directAssignment:[]}}finally{e.value=!1}}async function s(f,h,p=!0){try{const m=JSON.parse(JSON.stringify(h));p?await Kt(Qe(Xe,"aideSchedules",f),m,{merge:!0}):await Kt(Qe(Xe,"aideSchedules",f),m),t.value[f]=m}catch(m){throw console.error("Error saving aide schedule:",m),m}}async function i(){try{const f=Object.entries(t.value);for(const[h,p]of f){const m=JSON.parse(JSON.stringify(p));await Kt(Qe(Xe,"aideSchedules",h),m,{merge:!0})}}catch(f){throw console.error("Error saving all aide schedules:",f),f}}function a(f,h){const p=[];return Object.entries(t.value).forEach(([m,g])=>{g.schedule&&g.schedule[h]&&(Array.isArray(g.schedule[h])?g.schedule[h]:[g.schedule[h]]).includes(f)&&p.push(m)}),p}function o(f){var p;const h=(p=t.value[f])==null?void 0:p.directAssignment;return Array.isArray(h)?h.length>0?h[0]:null:h||null}function l(f){return Object.keys(t.value).find(p=>{var g;const m=(g=t.value[p])==null?void 0:g.directAssignment;return Array.isArray(m)?m.includes(f):m===f})||null}function c(f,h,p){const m=[],g=t.value[f];return g&&((Array.isArray(g.directAssignment)?g.directAssignment:g.directAssignment?[g.directAssignment]:[]).forEach(x=>{if(x){const y=h.find(_=>_.id===x);y&&m.push({...y,assignmentType:"direct"})}}),Object.entries(g.schedule||{}).forEach(([x,y])=>{y&&(Array.isArray(y)?y:[y]).forEach(I=>{I&&h.forEach(R=>{if(R.schedule&&R.schedule[x]===I){const A=m.findIndex(E=>E.id===R.id);A===-1?m.push({...R,assignmentType:"class",period:x,teacherId:I}):(m[A].assignmentType="both",m[A].period=x,m[A].teacherId=I)}})})})),m}function u(f,h,p,m){if(!f||!h||!p||!m)return!1;const g=p.find(I=>I.id===h);if(!g)return!1;const v=t.value[f];if(!v)return!1;if((Array.isArray(v.directAssignment)?v.directAssignment:v.directAssignment?[v.directAssignment]:[]).includes(h))return!0;if(!g.schedule)return!1;const y=v.schedule||{};return Object.entries(g.schedule).some(([I,R])=>{const A=y[I];return A?(Array.isArray(A)?A:[A]).includes(R):!1})}return{aideSchedule:Ae(()=>t.value),loading:Ae(()=>e.value),loadAideSchedules:r,loadAideSchedule:n,saveAideSchedule:s,saveAllAideSchedules:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}var jse={exports:{}};const Gse=Tx(R3);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function i2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i2(Object(r),!0).forEach(function(n){Wse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function v0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v0=function(e){return typeof e}:v0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v0(t)}function Wse(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function js(){return js=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},js.apply(this,arguments)}function zse(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Kse(t,e){if(t==null)return{};var r=zse(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qse(t){return Xse(t)||Yse(t)||Jse(t)||Qse()}function Xse(t){if(Array.isArray(t))return Dv(t)}function Yse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jse(t,e){if(t){if(typeof t=="string")return Dv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dv(t,e)}}function Dv(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Zse="1.14.0";function ci(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ai=ci(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),sf=ci(/Edge/i),o2=ci(/firefox/i),Ku=ci(/safari/i)&&!ci(/chrome/i)&&!ci(/android/i),Sk=ci(/iP(ad|od|hone)/i),eae=ci(/chrome/i)&&ci(/android/i),Tk={capture:!1,passive:!1};function Wt(t,e,r){t.addEventListener(e,r,!Ai&&Tk)}function Ht(t,e,r){t.removeEventListener(e,r,!Ai&&Tk)}function xh(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function tae(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ea(t,e,r,n){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&xh(t,e):xh(t,e))||n&&t===r)return t;if(t===r)break}while(t=tae(t))}return null}var l2=/\s+/g;function Pr(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(l2," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(l2," ")}}function pt(t,e,r){var n=t&&t.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=r+(typeof r=="string"?"":"px")}}function Ho(t,e){var r="";if(typeof t=="string")r=t;else do{var n=pt(t,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function Ak(t,e,r){if(t){var n=t.getElementsByTagName(e),s=0,i=n.length;if(r)for(;s<i;s++)r(n[s],s);return n}return[]}function ka(){var t=document.scrollingElement;return t||document.documentElement}function kr(t,e,r,n,s){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,o,l,c,u,f;if(t!==window&&t.parentNode&&t!==ka()?(i=t.getBoundingClientRect(),a=i.top,o=i.left,l=i.bottom,c=i.right,u=i.height,f=i.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,f=window.innerWidth),(e||r)&&t!==window&&(s=s||t.parentNode,!Ai))do if(s&&s.getBoundingClientRect&&(pt(s,"transform")!=="none"||r&&pt(s,"position")!=="static")){var h=s.getBoundingClientRect();a-=h.top+parseInt(pt(s,"border-top-width")),o-=h.left+parseInt(pt(s,"border-left-width")),l=a+i.height,c=o+i.width;break}while(s=s.parentNode);if(n&&t!==window){var p=Ho(s||t),m=p&&p.a,g=p&&p.d;p&&(a/=g,o/=m,f/=m,u/=g,l=a+u,c=o+f)}return{top:a,left:o,bottom:l,right:c,width:f,height:u}}}function c2(t,e,r){for(var n=Yi(t,!0),s=kr(t)[e];n;){var i=kr(n)[r],a=void 0;if(a=s>=i,!a)return n;if(n===ka())break;n=Yi(n,!1)}return!1}function Ac(t,e,r,n){for(var s=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==St.ghost&&(n||a[i]!==St.dragged)&&ea(a[i],r.draggable,t,!1)){if(s===e)return a[i];s++}i++}return null}function ry(t,e){for(var r=t.lastElementChild;r&&(r===St.ghost||pt(r,"display")==="none"||e&&!xh(r,e));)r=r.previousElementSibling;return r||null}function Mr(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==St.clone&&(!e||xh(t,e))&&r++;return r}function u2(t){var e=0,r=0,n=ka();if(t)do{var s=Ho(t),i=s.a,a=s.d;e+=t.scrollLeft*i,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function rae(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r)}return-1}function Yi(t,e){if(!t||!t.getBoundingClientRect)return ka();var r=t,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=pt(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return ka();if(n||e)return r;n=!0}}while(r=r.parentNode);return ka()}function nae(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function ig(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var qu;function wk(t,e){return function(){if(!qu){var r=arguments,n=this;r.length===1?t.call(n,r[0]):t.apply(n,r),qu=setTimeout(function(){qu=void 0},e)}}}function sae(){clearTimeout(qu),qu=void 0}function Ck(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function ny(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function d2(t,e){pt(t,"position","absolute"),pt(t,"top",e.top),pt(t,"left",e.left),pt(t,"width",e.width),pt(t,"height",e.height)}function og(t){pt(t,"position",""),pt(t,"top",""),pt(t,"left",""),pt(t,"width",""),pt(t,"height","")}var jn="Sortable"+new Date().getTime();function aae(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(pt(s,"display")==="none"||s===St.ghost)){t.push({target:s,rect:kr(s)});var i=Oa({},t[t.length-1].rect);if(s.thisAnimationDuration){var a=Ho(s,!0);a&&(i.top-=a.f,i.left-=a.e)}s.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(rae(t,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,a=0;t.forEach(function(o){var l=0,c=o.target,u=c.fromRect,f=kr(c),h=c.prevFromRect,p=c.prevToRect,m=o.rect,g=Ho(c,!0);g&&(f.top-=g.f,f.left-=g.e),c.toRect=f,c.thisAnimationDuration&&ig(h,f)&&!ig(u,f)&&(m.top-f.top)/(m.left-f.left)===(u.top-f.top)/(u.left-f.left)&&(l=oae(m,h,p,s.options)),ig(f,u)||(c.prevFromRect=u,c.prevToRect=f,l||(l=s.options.animation),s.animate(c,m,f,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,s,i,a){if(a){pt(n,"transition",""),pt(n,"transform","");var o=Ho(this.el),l=o&&o.a,c=o&&o.d,u=(s.left-i.left)/(l||1),f=(s.top-i.top)/(c||1);n.animatingX=!!u,n.animatingY=!!f,pt(n,"transform","translate3d("+u+"px,"+f+"px,0)"),this.forRepaintDummy=iae(n),pt(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),pt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){pt(n,"transition",""),pt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function iae(t){return t.offsetWidth}function oae(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}var Il=[],lg={initializeByDefault:!0},af={mount:function(e){for(var r in lg)lg.hasOwnProperty(r)&&!(r in e)&&(e[r]=lg[r]);Il.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Il.push(e)},pluginEvent:function(e,r,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var i=e+"Global";Il.forEach(function(a){r[a.pluginName]&&(r[a.pluginName][i]&&r[a.pluginName][i](Oa({sortable:r},n)),r.options[a.pluginName]&&r[a.pluginName][e]&&r[a.pluginName][e](Oa({sortable:r},n)))})},initializePlugins:function(e,r,n,s){Il.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,r,e.options);c.sortable=e,c.options=e.options,e[l]=c,js(n,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,r){var n={};return Il.forEach(function(s){typeof s.eventProperties=="function"&&js(n,s.eventProperties.call(r[s.pluginName],e))}),n},modifyOption:function(e,r,n){var s;return Il.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(s=i.optionListeners[r].call(e[i.pluginName],n))}),s}};function vu(t){var e=t.sortable,r=t.rootEl,n=t.name,s=t.targetEl,i=t.cloneEl,a=t.toEl,o=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,f=t.newDraggableIndex,h=t.originalEvent,p=t.putSortable,m=t.extraEventProperties;if(e=e||r&&r[jn],!!e){var g,v=e.options,x="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Ai&&!sf?g=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(n,!0,!0)),g.to=a||r,g.from=o||r,g.item=s||r,g.clone=i,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=f,g.originalEvent=h,g.pullMode=p?p.lastPutMode:void 0;var y=Oa(Oa({},m),af.getEventProperties(n,e));for(var _ in y)g[_]=y[_];r&&r.dispatchEvent(g),v[x]&&v[x].call(e,g)}}var lae=["evt"],ds=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,i=Kse(n,lae);af.pluginEvent.bind(St)(e,r,Oa({dragEl:rt,parentEl:Or,ghostEl:Nt,rootEl:Cr,nextEl:Io,lastDownEl:x0,cloneEl:Nr,cloneHidden:Wi,dragStarted:xu,putSortable:En,activeSortable:St.active,originalEvent:s,oldIndex:jl,oldDraggableIndex:Xu,newIndex:bs,newDraggableIndex:Hi,hideGhostForTarget:Pk,unhideGhostForTarget:Rk,cloneNowHidden:function(){Wi=!0},cloneNowShown:function(){Wi=!1},dispatchSortableEvent:function(o){ts({sortable:r,name:o,originalEvent:s})}},i))};function ts(t){vu(Oa({putSortable:En,cloneEl:Nr,targetEl:rt,rootEl:Cr,oldIndex:jl,oldDraggableIndex:Xu,newIndex:bs,newDraggableIndex:Hi},t))}var rt,Or,Nt,Cr,Io,x0,Nr,Wi,jl,bs,Xu,Hi,zf,En,Bl=!1,yh=!1,Eh=[],Ao,Qs,cg,ug,f2,h2,xu,kl,Yu,Ju=!1,Kf=!1,y0,Nn,dg=[],Pv=!1,_h=[],kp=typeof document<"u",qf=Sk,p2=sf||Ai?"cssFloat":"float",cae=kp&&!eae&&!Sk&&"draggable"in document.createElement("div"),Ik=function(){if(kp){if(Ai)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),kk=function(e,r){var n=pt(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Ac(e,0,r),a=Ac(e,1,r),o=i&&pt(i),l=a&&pt(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+kr(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+kr(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&o.float!=="none"){var f=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return i&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=s&&n[p2]==="none"||a&&n[p2]==="none"&&c+u>s)?"vertical":"horizontal"},uae=function(e,r,n){var s=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?r.left:r.top,l=n?r.right:r.bottom,c=n?r.width:r.height;return s===o||i===l||s+a/2===o+c/2},dae=function(e,r){var n;return Eh.some(function(s){var i=s[jn].options.emptyInsertThreshold;if(!(!i||ry(s))){var a=kr(s),o=e>=a.left-i&&e<=a.right+i,l=r>=a.top-i&&r<=a.bottom+i;if(o&&l)return n=s}}),n},Dk=function(e){function r(i,a){return function(o,l,c,u){var f=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(i==null&&(a||f))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return r(i(o,l,c,u),a)(o,l,c,u);var h=(a?o:l).options.group.name;return i===!0||typeof i=="string"&&i===h||i.join&&i.indexOf(h)>-1}}var n={},s=e.group;(!s||v0(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=r(s.pull,!0),n.checkPut=r(s.put),n.revertClone=s.revertClone,e.group=n},Pk=function(){!Ik&&Nt&&pt(Nt,"display","none")},Rk=function(){!Ik&&Nt&&pt(Nt,"display","")};kp&&document.addEventListener("click",function(t){if(yh)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),yh=!1,!1},!0);var wo=function(e){if(rt){e=e.touches?e.touches[0]:e;var r=dae(e.clientX,e.clientY);if(r){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[jn]._onDragOver(n)}}},fae=function(e){rt&&rt.parentNode[jn]._isOutsideThisEl(e.target)};function St(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=js({},e),t[jn]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kk(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:St.supportPointer!==!1&&"PointerEvent"in window&&!Ku,emptyInsertThreshold:5};af.initializePlugins(this,t,r);for(var n in r)!(n in e)&&(e[n]=r[n]);Dk(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:cae,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Wt(t,"pointerdown",this._onTapStart):(Wt(t,"mousedown",this._onTapStart),Wt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Wt(t,"dragover",this),Wt(t,"dragenter",this)),Eh.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),js(this,aae())}St.prototype={constructor:St,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(kl=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,rt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,s=this.options,i=s.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=s.filter;if(Eae(n),!rt&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Ku&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ea(l,s.draggable,n,!1),!(l&&l.animated)&&x0!==l)){if(jl=Mr(l),Xu=Mr(l,s.draggable),typeof u=="function"){if(u.call(this,e,l,this)){ts({sortable:r,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),ds("filter",r,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(f){if(f=ea(c,f.trim(),n,!1),f)return ts({sortable:r,rootEl:f,name:"filter",targetEl:l,fromEl:n,toEl:n}),ds("filter",r,{evt:e}),!0}),u)){i&&e.cancelable&&e.preventDefault();return}s.handle&&!ea(c,s.handle,n,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,r,n){var s=this,i=s.el,a=s.options,o=i.ownerDocument,l;if(n&&!rt&&n.parentNode===i){var c=kr(n);if(Cr=i,rt=n,Or=rt.parentNode,Io=rt.nextSibling,x0=n,zf=a.group,St.dragged=rt,Ao={target:rt,clientX:(r||e).clientX,clientY:(r||e).clientY},f2=Ao.clientX-c.left,h2=Ao.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,rt.style["will-change"]="all",l=function(){if(ds("delayEnded",s,{evt:e}),St.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!o2&&s.nativeDraggable&&(rt.draggable=!0),s._triggerDragStart(e,r),ts({sortable:s,name:"choose",originalEvent:e}),Pr(rt,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){Ak(rt,u.trim(),fg)}),Wt(o,"dragover",wo),Wt(o,"mousemove",wo),Wt(o,"touchmove",wo),Wt(o,"mouseup",s._onDrop),Wt(o,"touchend",s._onDrop),Wt(o,"touchcancel",s._onDrop),o2&&this.nativeDraggable&&(this.options.touchStartThreshold=4,rt.draggable=!0),ds("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(sf||Ai))){if(St.eventCanceled){this._onDrop();return}Wt(o,"mouseup",s._disableDelayedDrag),Wt(o,"touchend",s._disableDelayedDrag),Wt(o,"touchcancel",s._disableDelayedDrag),Wt(o,"mousemove",s._delayedDragTouchMoveHandler),Wt(o,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&Wt(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){rt&&fg(rt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ht(e,"mouseup",this._disableDelayedDrag),Ht(e,"touchend",this._disableDelayedDrag),Ht(e,"touchcancel",this._disableDelayedDrag),Ht(e,"mousemove",this._delayedDragTouchMoveHandler),Ht(e,"touchmove",this._delayedDragTouchMoveHandler),Ht(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?Wt(document,"pointermove",this._onTouchMove):r?Wt(document,"touchmove",this._onTouchMove):Wt(document,"mousemove",this._onTouchMove):(Wt(rt,"dragend",this),Wt(Cr,"dragstart",this._onDragStart));try{document.selection?E0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Bl=!1,Cr&&rt){ds("dragStarted",this,{evt:r}),this.nativeDraggable&&Wt(document,"dragover",fae);var n=this.options;!e&&Pr(rt,n.dragClass,!1),Pr(rt,n.ghostClass,!0),St.active=this,e&&this._appendGhost(),ts({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(Qs){this._lastX=Qs.clientX,this._lastY=Qs.clientY,Pk();for(var e=document.elementFromPoint(Qs.clientX,Qs.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Qs.clientX,Qs.clientY),e!==r);)r=e;if(rt.parentNode[jn]._isOutsideThisEl(e),r)do{if(r[jn]){var n=void 0;if(n=r[jn]._onDragOver({clientX:Qs.clientX,clientY:Qs.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=r.parentNode);Rk()}},_onTouchMove:function(e){if(Ao){var r=this.options,n=r.fallbackTolerance,s=r.fallbackOffset,i=e.touches?e.touches[0]:e,a=Nt&&Ho(Nt,!0),o=Nt&&a&&a.a,l=Nt&&a&&a.d,c=qf&&Nn&&u2(Nn),u=(i.clientX-Ao.clientX+s.x)/(o||1)+(c?c[0]-dg[0]:0)/(o||1),f=(i.clientY-Ao.clientY+s.y)/(l||1)+(c?c[1]-dg[1]:0)/(l||1);if(!St.active&&!Bl){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Nt){a?(a.e+=u-(cg||0),a.f+=f-(ug||0)):a={a:1,b:0,c:0,d:1,e:u,f};var h="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");pt(Nt,"webkitTransform",h),pt(Nt,"mozTransform",h),pt(Nt,"msTransform",h),pt(Nt,"transform",h),cg=u,ug=f,Qs=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Nt){var e=this.options.fallbackOnBody?document.body:Cr,r=kr(rt,!0,qf,!0,e),n=this.options;if(qf){for(Nn=e;pt(Nn,"position")==="static"&&pt(Nn,"transform")==="none"&&Nn!==document;)Nn=Nn.parentNode;Nn!==document.body&&Nn!==document.documentElement?(Nn===document&&(Nn=ka()),r.top+=Nn.scrollTop,r.left+=Nn.scrollLeft):Nn=ka(),dg=u2(Nn)}Nt=rt.cloneNode(!0),Pr(Nt,n.ghostClass,!1),Pr(Nt,n.fallbackClass,!0),Pr(Nt,n.dragClass,!0),pt(Nt,"transition",""),pt(Nt,"transform",""),pt(Nt,"box-sizing","border-box"),pt(Nt,"margin",0),pt(Nt,"top",r.top),pt(Nt,"left",r.left),pt(Nt,"width",r.width),pt(Nt,"height",r.height),pt(Nt,"opacity","0.8"),pt(Nt,"position",qf?"absolute":"fixed"),pt(Nt,"zIndex","100000"),pt(Nt,"pointerEvents","none"),St.ghost=Nt,e.appendChild(Nt),pt(Nt,"transform-origin",f2/parseInt(Nt.style.width)*100+"% "+h2/parseInt(Nt.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,s=e.dataTransfer,i=n.options;if(ds("dragStart",this,{evt:e}),St.eventCanceled){this._onDrop();return}ds("setupClone",this),St.eventCanceled||(Nr=ny(rt),Nr.draggable=!1,Nr.style["will-change"]="",this._hideClone(),Pr(Nr,this.options.chosenClass,!1),St.clone=Nr),n.cloneId=E0(function(){ds("clone",n),!St.eventCanceled&&(n.options.removeCloneOnHide||Cr.insertBefore(Nr,rt),n._hideClone(),ts({sortable:n,name:"clone"}))}),!r&&Pr(rt,i.dragClass,!0),r?(yh=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Ht(document,"mouseup",n._onDrop),Ht(document,"touchend",n._onDrop),Ht(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,rt)),Wt(document,"drop",n),pt(rt,"transform","translateZ(0)")),Bl=!0,n._dragStartId=E0(n._dragStarted.bind(n,r,e)),Wt(document,"selectstart",n),xu=!0,Ku&&pt(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,s,i,a,o=this.options,l=o.group,c=St.active,u=zf===l,f=o.sort,h=En||c,p,m=this,g=!1;if(Pv)return;function v(M,U){ds(M,m,Oa({evt:e,isOwner:u,axis:p?"vertical":"horizontal",revert:a,dragRect:s,targetRect:i,canSort:f,fromSortable:h,target:n,completed:y,onMove:function(j,H){return Xf(Cr,r,rt,s,j,kr(j),e,H)},changed:_},U))}function x(){v("dragOverAnimationCapture"),m.captureAnimationState(),m!==h&&h.captureAnimationState()}function y(M){return v("dragOverCompleted",{insertion:M}),M&&(u?c._hideClone():c._showClone(m),m!==h&&(Pr(rt,En?En.options.ghostClass:c.options.ghostClass,!1),Pr(rt,o.ghostClass,!0)),En!==m&&m!==St.active?En=m:m===St.active&&En&&(En=null),h===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){v("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(n===rt&&!rt.animated||n===r&&!n.animated)&&(kl=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(rt.parentNode[jn]._isOutsideThisEl(e.target),!M&&wo(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function _(){bs=Mr(rt),Hi=Mr(rt,o.draggable),ts({sortable:m,name:"change",toEl:r,newIndex:bs,newDraggableIndex:Hi,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=ea(n,o.draggable,r,!0),v("dragOver"),St.eventCanceled)return g;if(rt.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return y(!1);if(yh=!1,c&&!o.disabled&&(u?f||(a=Or!==Cr):En===this||(this.lastPutMode=zf.checkPull(this,c,rt,e))&&l.checkPut(this,c,rt,e))){if(p=this._getDirection(e,n)==="vertical",s=kr(rt),v("dragOverValid"),St.eventCanceled)return g;if(a)return Or=Cr,x(),this._hideClone(),v("revert"),St.eventCanceled||(Io?Cr.insertBefore(rt,Io):Cr.appendChild(rt)),y(!0);var I=ry(r,o.draggable);if(!I||gae(e,p,this)&&!I.animated){if(I===rt)return y(!1);if(I&&r===e.target&&(n=I),n&&(i=kr(n)),Xf(Cr,r,rt,s,n,i,e,!!n)!==!1)return x(),r.appendChild(rt),Or=r,_(),y(!0)}else if(I&&mae(e,p,this)){var R=Ac(r,0,o,!0);if(R===rt)return y(!1);if(n=R,i=kr(n),Xf(Cr,r,rt,s,n,i,e,!1)!==!1)return x(),r.insertBefore(rt,R),Or=r,_(),y(!0)}else if(n.parentNode===r){i=kr(n);var A=0,E,T=rt.parentNode!==r,b=!uae(rt.animated&&rt.toRect||s,n.animated&&n.toRect||i,p),S=p?"top":"left",k=c2(n,"top","top")||c2(rt,"top","top"),w=k?k.scrollTop:void 0;kl!==n&&(E=i[S],Ju=!1,Kf=!b&&o.invertSwap||T),A=vae(e,n,i,p,b?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,Kf,kl===n);var D;if(A!==0){var N=Mr(rt);do N-=A,D=Or.children[N];while(D&&(pt(D,"display")==="none"||D===Nt))}if(A===0||D===n)return y(!1);kl=n,Yu=A;var F=n.nextElementSibling,P=!1;P=A===1;var O=Xf(Cr,r,rt,s,n,i,e,P);if(O!==!1)return(O===1||O===-1)&&(P=O===1),Pv=!0,setTimeout(pae,30),x(),P&&!F?r.appendChild(rt):n.parentNode.insertBefore(rt,P?F:n),k&&Ck(k,0,w-k.scrollTop),Or=rt.parentNode,E!==void 0&&!Kf&&(y0=Math.abs(E-kr(n)[S])),_(),y(!0)}if(r.contains(rt))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ht(document,"mousemove",this._onTouchMove),Ht(document,"touchmove",this._onTouchMove),Ht(document,"pointermove",this._onTouchMove),Ht(document,"dragover",wo),Ht(document,"mousemove",wo),Ht(document,"touchmove",wo)},_offUpEvents:function(){var e=this.el.ownerDocument;Ht(e,"mouseup",this._onDrop),Ht(e,"touchend",this._onDrop),Ht(e,"pointerup",this._onDrop),Ht(e,"touchcancel",this._onDrop),Ht(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(bs=Mr(rt),Hi=Mr(rt,n.draggable),ds("drop",this,{evt:e}),Or=rt&&rt.parentNode,bs=Mr(rt),Hi=Mr(rt,n.draggable),St.eventCanceled){this._nulling();return}Bl=!1,Kf=!1,Ju=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Rv(this.cloneId),Rv(this._dragStartId),this.nativeDraggable&&(Ht(document,"drop",this),Ht(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ku&&pt(document.body,"user-select",""),pt(rt,"transform",""),e&&(xu&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Nt&&Nt.parentNode&&Nt.parentNode.removeChild(Nt),(Cr===Or||En&&En.lastPutMode!=="clone")&&Nr&&Nr.parentNode&&Nr.parentNode.removeChild(Nr),rt&&(this.nativeDraggable&&Ht(rt,"dragend",this),fg(rt),rt.style["will-change"]="",xu&&!Bl&&Pr(rt,En?En.options.ghostClass:this.options.ghostClass,!1),Pr(rt,this.options.chosenClass,!1),ts({sortable:this,name:"unchoose",toEl:Or,newIndex:null,newDraggableIndex:null,originalEvent:e}),Cr!==Or?(bs>=0&&(ts({rootEl:Or,name:"add",toEl:Or,fromEl:Cr,originalEvent:e}),ts({sortable:this,name:"remove",toEl:Or,originalEvent:e}),ts({rootEl:Or,name:"sort",toEl:Or,fromEl:Cr,originalEvent:e}),ts({sortable:this,name:"sort",toEl:Or,originalEvent:e})),En&&En.save()):bs!==jl&&bs>=0&&(ts({sortable:this,name:"update",toEl:Or,originalEvent:e}),ts({sortable:this,name:"sort",toEl:Or,originalEvent:e})),St.active&&((bs==null||bs===-1)&&(bs=jl,Hi=Xu),ts({sortable:this,name:"end",toEl:Or,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ds("nulling",this),Cr=rt=Or=Nt=Io=Nr=x0=Wi=Ao=Qs=xu=bs=Hi=jl=Xu=kl=Yu=En=zf=St.dragged=St.ghost=St.clone=St.active=null,_h.forEach(function(e){e.checked=!0}),_h.length=cg=ug=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":rt&&(this._onDragOver(e),hae(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,s=0,i=n.length,a=this.options;s<i;s++)r=n[s],ea(r,a.draggable,this.el,!1)&&e.push(r.getAttribute(a.dataIdAttr)||yae(r));return e},sort:function(e,r){var n={},s=this.el;this.toArray().forEach(function(i,a){var o=s.children[a];ea(o,this.options.draggable,s,!1)&&(n[i]=o)},this),r&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(s.removeChild(n[i]),s.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return ea(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var s=af.modifyOption(this,e,r);typeof s<"u"?n[e]=s:n[e]=r,e==="group"&&Dk(n)},destroy:function(){ds("destroy",this);var e=this.el;e[jn]=null,Ht(e,"mousedown",this._onTapStart),Ht(e,"touchstart",this._onTapStart),Ht(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ht(e,"dragover",this),Ht(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Eh.splice(Eh.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Wi){if(ds("hideClone",this),St.eventCanceled)return;pt(Nr,"display","none"),this.options.removeCloneOnHide&&Nr.parentNode&&Nr.parentNode.removeChild(Nr),Wi=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Wi){if(ds("showClone",this),St.eventCanceled)return;rt.parentNode==Cr&&!this.options.group.revertClone?Cr.insertBefore(Nr,rt):Io?Cr.insertBefore(Nr,Io):Cr.appendChild(Nr),this.options.group.revertClone&&this.animate(rt,Nr),pt(Nr,"display",""),Wi=!1}}};function hae(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Xf(t,e,r,n,s,i,a,o){var l,c=t[jn],u=c.options.onMove,f;return window.CustomEvent&&!Ai&&!sf?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=r,l.draggedRect=n,l.related=s||e,l.relatedRect=i||kr(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),u&&(f=u.call(c,l,a)),f}function fg(t){t.draggable=!1}function pae(){Pv=!1}function mae(t,e,r){var n=kr(Ac(r.el,0,r.options,!0)),s=10;return e?t.clientX<n.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-s||t.clientY<n.bottom&&t.clientX<n.left}function gae(t,e,r){var n=kr(ry(r.el,r.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}function vae(t,e,r,n,s,i,a,o){var l=n?t.clientY:t.clientX,c=n?r.height:r.width,u=n?r.top:r.left,f=n?r.bottom:r.right,h=!1;if(!a){if(o&&y0<c*s){if(!Ju&&(Yu===1?l>u+c*i/2:l<f-c*i/2)&&(Ju=!0),Ju)h=!0;else if(Yu===1?l<u+y0:l>f-y0)return-Yu}else if(l>u+c*(1-s)/2&&l<f-c*(1-s)/2)return xae(e)}return h=h||a,h&&(l<u+c*i/2||l>f-c*i/2)?l>u+c/2?1:-1:0}function xae(t){return Mr(rt)<Mr(t)?1:-1}function yae(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function Eae(t){_h.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&_h.push(n)}}function E0(t){return setTimeout(t,0)}function Rv(t){return clearTimeout(t)}kp&&Wt(document,"touchmove",function(t){(St.active||Bl)&&t.cancelable&&t.preventDefault()});St.utils={on:Wt,off:Ht,css:pt,find:Ak,is:function(e,r){return!!ea(e,r,e,!1)},extend:nae,throttle:wk,closest:ea,toggleClass:Pr,clone:ny,index:Mr,nextTick:E0,cancelNextTick:Rv,detectDirection:kk,getChild:Ac};St.get=function(t){return t[jn]};St.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(St.utils=Oa(Oa({},St.utils),n.utils)),af.mount(n)})};St.create=function(t,e){return new St(t,e)};St.version=Zse;var qr=[],yu,Fv,Ov=!1,hg,pg,bh,Eu;function _ae(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?Wt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Wt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Wt(document,"touchmove",this._handleFallbackAutoScroll):Wt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Ht(document,"dragover",this._handleAutoScroll):(Ht(document,"pointermove",this._handleFallbackAutoScroll),Ht(document,"touchmove",this._handleFallbackAutoScroll),Ht(document,"mousemove",this._handleFallbackAutoScroll)),m2(),_0(),sae()},nulling:function(){bh=Fv=yu=Ov=Eu=hg=pg=null,qr.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var s=this,i=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,o=document.elementFromPoint(i,a);if(bh=r,n||this.options.forceAutoScrollFallback||sf||Ai||Ku){mg(r,this.options,o,n);var l=Yi(o,!0);Ov&&(!Eu||i!==hg||a!==pg)&&(Eu&&m2(),Eu=setInterval(function(){var c=Yi(document.elementFromPoint(i,a),!0);c!==l&&(l=c,_0()),mg(r,s.options,c,n)},10),hg=i,pg=a)}else{if(!this.options.bubbleScroll||Yi(o,!0)===ka()){_0();return}mg(r,this.options,Yi(o,!1),!1)}}},js(t,{pluginName:"scroll",initializeByDefault:!0})}function _0(){qr.forEach(function(t){clearInterval(t.pid)}),qr=[]}function m2(){clearInterval(Eu)}var mg=wk(function(t,e,r,n){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=ka(),c=!1,u;Fv!==r&&(Fv=r,_0(),yu=e.scroll,u=e.scrollFn,yu===!0&&(yu=Yi(r,!0)));var f=0,h=yu;do{var p=h,m=kr(p),g=m.top,v=m.bottom,x=m.left,y=m.right,_=m.width,I=m.height,R=void 0,A=void 0,E=p.scrollWidth,T=p.scrollHeight,b=pt(p),S=p.scrollLeft,k=p.scrollTop;p===l?(R=_<E&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),A=I<T&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(R=_<E&&(b.overflowX==="auto"||b.overflowX==="scroll"),A=I<T&&(b.overflowY==="auto"||b.overflowY==="scroll"));var w=R&&(Math.abs(y-s)<=a&&S+_<E)-(Math.abs(x-s)<=a&&!!S),D=A&&(Math.abs(v-i)<=a&&k+I<T)-(Math.abs(g-i)<=a&&!!k);if(!qr[f])for(var N=0;N<=f;N++)qr[N]||(qr[N]={});(qr[f].vx!=w||qr[f].vy!=D||qr[f].el!==p)&&(qr[f].el=p,qr[f].vx=w,qr[f].vy=D,clearInterval(qr[f].pid),(w!=0||D!=0)&&(c=!0,qr[f].pid=setInterval((function(){n&&this.layer===0&&St.active._onTouchMove(bh);var F=qr[this.layer].vy?qr[this.layer].vy*o:0,P=qr[this.layer].vx?qr[this.layer].vx*o:0;typeof u=="function"&&u.call(St.dragged.parentNode[jn],P,F,t,bh,qr[this.layer].el)!=="continue"||Ck(qr[this.layer].el,P,F)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&h!==l&&(h=Yi(h,!1)));Ov=c}},30),Fk=function(e){var r=e.originalEvent,n=e.putSortable,s=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(r){var c=n||i;o();var u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,f=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(f)&&(a("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function sy(){}sy.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=Ac(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:Fk};js(sy,{pluginName:"revertOnSpill"});function ay(){}ay.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,s=n||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop:Fk};js(ay,{pluginName:"removeOnSpill"});var Rs;function bae(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(r){var n=r.dragEl;Rs=n},dragOverValid:function(r){var n=r.completed,s=r.target,i=r.onMove,a=r.activeSortable,o=r.changed,l=r.cancel;if(a.options.swap){var c=this.sortable.el,u=this.options;if(s&&s!==c){var f=Rs;i(s)!==!1?(Pr(s,u.swapClass,!0),Rs=s):Rs=null,f&&f!==Rs&&Pr(f,u.swapClass,!1)}o(),n(!0),l()}},drop:function(r){var n=r.activeSortable,s=r.putSortable,i=r.dragEl,a=s||this.sortable,o=this.options;Rs&&Pr(Rs,o.swapClass,!1),Rs&&(o.swap||s&&s.options.swap)&&i!==Rs&&(a.captureAnimationState(),a!==n&&n.captureAnimationState(),Sae(i,Rs),a.animateAll(),a!==n&&n.animateAll())},nulling:function(){Rs=null}},js(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Rs}}})}function Sae(t,e){var r=t.parentNode,n=e.parentNode,s,i;!r||!n||r.isEqualNode(e)||n.isEqualNode(t)||(s=Mr(t),i=Mr(e),r.isEqualNode(n)&&s<i&&i++,r.insertBefore(e,r.children[s]),n.insertBefore(t,n.children[i]))}var Dt=[],_s=[],au,Zs,iu=!1,fs=!1,Dl=!1,vr,ou,Yf;function Tae(){function t(e){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));e.options.supportPointer?Wt(document,"pointerup",this._deselectMultiDrag):(Wt(document,"mouseup",this._deselectMultiDrag),Wt(document,"touchend",this._deselectMultiDrag)),Wt(document,"keydown",this._checkKeyDown),Wt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,i){var a="";Dt.length&&Zs===e?Dt.forEach(function(o,l){a+=(l?", ":"")+o.textContent}):a=i.textContent,s.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var n=r.dragEl;vr=n},delayEnded:function(){this.isMultiDrag=~Dt.indexOf(vr)},setupClone:function(r){var n=r.sortable,s=r.cancel;if(this.isMultiDrag){for(var i=0;i<Dt.length;i++)_s.push(ny(Dt[i])),_s[i].sortableIndex=Dt[i].sortableIndex,_s[i].draggable=!1,_s[i].style["will-change"]="",Pr(_s[i],this.options.selectedClass,!1),Dt[i]===vr&&Pr(_s[i],this.options.chosenClass,!1);n._hideClone(),s()}},clone:function(r){var n=r.sortable,s=r.rootEl,i=r.dispatchSortableEvent,a=r.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Dt.length&&Zs===n&&(g2(!0,s),i("clone"),a()))},showClone:function(r){var n=r.cloneNowShown,s=r.rootEl,i=r.cancel;this.isMultiDrag&&(g2(!1,s),_s.forEach(function(a){pt(a,"display","")}),n(),Yf=!1,i())},hideClone:function(r){var n=this;r.sortable;var s=r.cloneNowHidden,i=r.cancel;this.isMultiDrag&&(_s.forEach(function(a){pt(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),s(),Yf=!0,i())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&Zs&&Zs.multiDrag._deselectMultiDrag(),Dt.forEach(function(n){n.sortableIndex=Mr(n)}),Dt=Dt.sort(function(n,s){return n.sortableIndex-s.sortableIndex}),Dl=!0},dragStarted:function(r){var n=this,s=r.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){Dt.forEach(function(a){a!==vr&&pt(a,"position","absolute")});var i=kr(vr,!1,!0,!0);Dt.forEach(function(a){a!==vr&&d2(a,i)}),fs=!0,iu=!0}s.animateAll(function(){fs=!1,iu=!1,n.options.animation&&Dt.forEach(function(a){og(a)}),n.options.sort&&Jf()})}},dragOver:function(r){var n=r.target,s=r.completed,i=r.cancel;fs&&~Dt.indexOf(n)&&(s(!1),i())},revert:function(r){var n=r.fromSortable,s=r.rootEl,i=r.sortable,a=r.dragRect;Dt.length>1&&(Dt.forEach(function(o){i.addAnimationState({target:o,rect:fs?kr(o):a}),og(o),o.fromRect=a,n.removeAnimationState(o)}),fs=!1,Aae(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(r){var n=r.sortable,s=r.isOwner,i=r.insertion,a=r.activeSortable,o=r.parentEl,l=r.putSortable,c=this.options;if(i){if(s&&a._hideClone(),iu=!1,c.animation&&Dt.length>1&&(fs||!s&&!a.options.sort&&!l)){var u=kr(vr,!1,!0,!0);Dt.forEach(function(h){h!==vr&&(d2(h,u),o.appendChild(h))}),fs=!0}if(!s)if(fs||Jf(),Dt.length>1){var f=Yf;a._showClone(n),a.options.animation&&!Yf&&f&&_s.forEach(function(h){a.addAnimationState({target:h,rect:ou}),h.fromRect=ou,h.thisAnimationDuration=null})}else a._showClone(n)}},dragOverAnimationCapture:function(r){var n=r.dragRect,s=r.isOwner,i=r.activeSortable;if(Dt.forEach(function(o){o.thisAnimationDuration=null}),i.options.animation&&!s&&i.multiDrag.isMultiDrag){ou=js({},n);var a=Ho(vr,!0);ou.top-=a.f,ou.left-=a.e}},dragOverAnimationComplete:function(){fs&&(fs=!1,Jf())},drop:function(r){var n=r.originalEvent,s=r.rootEl,i=r.parentEl,a=r.sortable,o=r.dispatchSortableEvent,l=r.oldIndex,c=r.putSortable,u=c||this.sortable;if(n){var f=this.options,h=i.children;if(!Dl)if(f.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Pr(vr,f.selectedClass,!~Dt.indexOf(vr)),~Dt.indexOf(vr))Dt.splice(Dt.indexOf(vr),1),au=null,vu({sortable:a,rootEl:s,name:"deselect",targetEl:vr});else{if(Dt.push(vr),vu({sortable:a,rootEl:s,name:"select",targetEl:vr}),n.shiftKey&&au&&a.el.contains(au)){var p=Mr(au),m=Mr(vr);if(~p&&~m&&p!==m){var g,v;for(m>p?(v=p,g=m):(v=m,g=p+1);v<g;v++)~Dt.indexOf(h[v])||(Pr(h[v],f.selectedClass,!0),Dt.push(h[v]),vu({sortable:a,rootEl:s,name:"select",targetEl:h[v]}))}}else au=vr;Zs=u}if(Dl&&this.isMultiDrag){if(fs=!1,(i[jn].options.sort||i!==s)&&Dt.length>1){var x=kr(vr),y=Mr(vr,":not(."+this.options.selectedClass+")");if(!iu&&f.animation&&(vr.thisAnimationDuration=null),u.captureAnimationState(),!iu&&(f.animation&&(vr.fromRect=x,Dt.forEach(function(I){if(I.thisAnimationDuration=null,I!==vr){var R=fs?kr(I):x;I.fromRect=R,u.addAnimationState({target:I,rect:R})}})),Jf(),Dt.forEach(function(I){h[y]?i.insertBefore(I,h[y]):i.appendChild(I),y++}),l===Mr(vr))){var _=!1;Dt.forEach(function(I){if(I.sortableIndex!==Mr(I)){_=!0;return}}),_&&o("update")}Dt.forEach(function(I){og(I)}),u.animateAll()}Zs=u}(s===i||c&&c.lastPutMode!=="clone")&&_s.forEach(function(I){I.parentNode&&I.parentNode.removeChild(I)})}},nullingGlobal:function(){this.isMultiDrag=Dl=!1,_s.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Ht(document,"pointerup",this._deselectMultiDrag),Ht(document,"mouseup",this._deselectMultiDrag),Ht(document,"touchend",this._deselectMultiDrag),Ht(document,"keydown",this._checkKeyDown),Ht(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof Dl<"u"&&Dl)&&Zs===this.sortable&&!(r&&ea(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;Dt.length;){var n=Dt[0];Pr(n,this.options.selectedClass,!1),Dt.shift(),vu({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},js(t,{pluginName:"multiDrag",utils:{select:function(r){var n=r.parentNode[jn];!n||!n.options.multiDrag||~Dt.indexOf(r)||(Zs&&Zs!==n&&(Zs.multiDrag._deselectMultiDrag(),Zs=n),Pr(r,n.options.selectedClass,!0),Dt.push(r))},deselect:function(r){var n=r.parentNode[jn],s=Dt.indexOf(r);!n||!n.options.multiDrag||!~s||(Pr(r,n.options.selectedClass,!1),Dt.splice(s,1))}},eventProperties:function(){var r=this,n=[],s=[];return Dt.forEach(function(i){n.push({multiDragElement:i,index:i.sortableIndex});var a;fs&&i!==vr?a=-1:fs?a=Mr(i,":not(."+r.options.selectedClass+")"):a=Mr(i),s.push({multiDragElement:i,index:a})}),{items:qse(Dt),clones:[].concat(_s),oldIndicies:n,newIndicies:s}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function Aae(t,e){Dt.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function g2(t,e){_s.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function Jf(){Dt.forEach(function(t){t!==vr&&t.parentNode&&t.parentNode.removeChild(t)})}St.mount(new _ae);St.mount(ay,sy);const wae=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Tae,Sortable:St,Swap:bae,default:St},Symbol.toStringTag,{value:"Module"})),Cae=Tx(wae);(function(t,e){(function(n,s){t.exports=s(Gse,Cae)})(typeof self<"u"?self:Bt,function(r,n){return function(s){var i={};function a(o){if(i[o])return i[o].exports;var l=i[o]={i:o,l:!1,exports:{}};return s[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=s,a.c=i,a.d=function(o,l,c){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:c})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var u in o)a.d(c,u,(function(f){return o[f]}).bind(null,u));return c},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s="fb15")}({"00ee":function(s,i,a){var o=a("b622"),l=o("toStringTag"),c={};c[l]="z",s.exports=String(c)==="[object z]"},"0366":function(s,i,a){var o=a("1c0b");s.exports=function(l,c,u){if(o(l),c===void 0)return l;switch(u){case 0:return function(){return l.call(c)};case 1:return function(f){return l.call(c,f)};case 2:return function(f,h){return l.call(c,f,h)};case 3:return function(f,h,p){return l.call(c,f,h,p)}}return function(){return l.apply(c,arguments)}}},"057f":function(s,i,a){var o=a("fc6a"),l=a("241c").f,c={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(h){try{return l(h)}catch{return u.slice()}};s.exports.f=function(p){return u&&c.call(p)=="[object Window]"?f(p):l(o(p))}},"06cf":function(s,i,a){var o=a("83ab"),l=a("d1e7"),c=a("5c6c"),u=a("fc6a"),f=a("c04e"),h=a("5135"),p=a("0cfb"),m=Object.getOwnPropertyDescriptor;i.f=o?m:function(v,x){if(v=u(v),x=f(x,!0),p)try{return m(v,x)}catch{}if(h(v,x))return c(!l.f.call(v,x),v[x])}},"0cfb":function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("cc12");s.exports=!o&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,i,a){var o=a("23e7"),l=a("d58f").left,c=a("a640"),u=a("ae40"),f=c("reduce"),h=u("reduce",{1:0});o({target:"Array",proto:!0,forced:!f||!h},{reduce:function(m){return l(this,m,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,i,a){var o=a("c6b6"),l=a("9263");s.exports=function(c,u){var f=c.exec;if(typeof f=="function"){var h=f.call(c,u);if(typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(o(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,u)}},"159b":function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("17c2"),u=a("9112");for(var f in l){var h=o[f],p=h&&h.prototype;if(p&&p.forEach!==c)try{u(p,"forEach",c)}catch{p.forEach=c}}},"17c2":function(s,i,a){var o=a("b727").forEach,l=a("a640"),c=a("ae40"),u=l("forEach"),f=c("forEach");s.exports=!u||!f?function(p){return o(this,p,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,i,a){var o=a("d066");s.exports=o("document","documentElement")},"1c0b":function(s,i){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},"1c7e":function(s,i,a){var o=a("b622"),l=o("iterator"),c=!1;try{var u=0,f={next:function(){return{done:!!u++}},return:function(){c=!0}};f[l]=function(){return this},Array.from(f,function(){throw 2})}catch{}s.exports=function(h,p){if(!p&&!c)return!1;var m=!1;try{var g={};g[l]=function(){return{next:function(){return{done:m=!0}}}},h(g)}catch{}return m}},"1d80":function(s,i){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},"1dde":function(s,i,a){var o=a("d039"),l=a("b622"),c=a("2d00"),u=l("species");s.exports=function(f){return c>=51||!o(function(){var h=[],p=h.constructor={};return p[u]=function(){return{foo:1}},h[f](Boolean).foo!==1})}},"23cb":function(s,i,a){var o=a("a691"),l=Math.max,c=Math.min;s.exports=function(u,f){var h=o(u);return h<0?l(h+f,0):c(h,f)}},"23e7":function(s,i,a){var o=a("da84"),l=a("06cf").f,c=a("9112"),u=a("6eeb"),f=a("ce4e"),h=a("e893"),p=a("94ca");s.exports=function(m,g){var v=m.target,x=m.global,y=m.stat,_,I,R,A,E,T;if(x?I=o:y?I=o[v]||f(v,{}):I=(o[v]||{}).prototype,I)for(R in g){if(E=g[R],m.noTargetGet?(T=l(I,R),A=T&&T.value):A=I[R],_=p(x?R:v+(y?".":"#")+R,m.forced),!_&&A!==void 0){if(typeof E==typeof A)continue;h(E,A)}(m.sham||A&&A.sham)&&c(E,"sham",!0),u(I,R,E,m)}}},"241c":function(s,i,a){var o=a("ca84"),l=a("7839"),c=l.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(f){return o(f,c)}},"25f0":function(s,i,a){var o=a("6eeb"),l=a("825a"),c=a("d039"),u=a("ad6d"),f="toString",h=RegExp.prototype,p=h[f],m=c(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),g=p.name!=f;(m||g)&&o(RegExp.prototype,f,function(){var x=l(this),y=String(x.source),_=x.flags,I=String(_===void 0&&x instanceof RegExp&&!("flags"in h)?u.call(x):_);return"/"+y+"/"+I},{unsafe:!0})},"2ca0":function(s,i,a){var o=a("23e7"),l=a("06cf").f,c=a("50c4"),u=a("5a34"),f=a("1d80"),h=a("ab13"),p=a("c430"),m="".startsWith,g=Math.min,v=h("startsWith"),x=!p&&!v&&!!function(){var y=l(String.prototype,"startsWith");return y&&!y.writable}();o({target:"String",proto:!0,forced:!x&&!v},{startsWith:function(_){var I=String(f(this));u(_);var R=c(g(arguments.length>1?arguments[1]:void 0,I.length)),A=String(_);return m?m.call(I,A,R):I.slice(R,R+A.length)===A}})},"2d00":function(s,i,a){var o=a("da84"),l=a("342f"),c=o.process,u=c&&c.versions,f=u&&u.v8,h,p;f?(h=f.split("."),p=h[0]+h[1]):l&&(h=l.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=l.match(/Chrome\/(\d+)/),h&&(p=h[1]))),s.exports=p&&+p},"342f":function(s,i,a){var o=a("d066");s.exports=o("navigator","userAgent")||""},"35a1":function(s,i,a){var o=a("f5df"),l=a("3f8c"),c=a("b622"),u=c("iterator");s.exports=function(f){if(f!=null)return f[u]||f["@@iterator"]||l[o(f)]}},"37e8":function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("825a"),u=a("df75");s.exports=o?Object.defineProperties:function(h,p){c(h);for(var m=u(p),g=m.length,v=0,x;g>v;)l.f(h,x=m[v++],p[x]);return h}},"3bbe":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(s,i,a){var o=a("6547").charAt,l=a("69f3"),c=a("7dd0"),u="String Iterator",f=l.set,h=l.getterFor(u);c(String,"String",function(p){f(this,{type:u,string:String(p),index:0})},function(){var m=h(this),g=m.string,v=m.index,x;return v>=g.length?{value:void 0,done:!0}:(x=o(g,v),m.index+=x.length,{value:x,done:!1})})},"3f8c":function(s,i){s.exports={}},4160:function(s,i,a){var o=a("23e7"),l=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(s,i,a){var o=a("da84");s.exports=o},"44ad":function(s,i,a){var o=a("d039"),l=a("c6b6"),c="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return l(u)=="String"?c.call(u,""):Object(u)}:Object},"44d2":function(s,i,a){var o=a("b622"),l=a("7c73"),c=a("9bf2"),u=o("unscopables"),f=Array.prototype;f[u]==null&&c.f(f,u,{configurable:!0,value:l(null)}),s.exports=function(h){f[u][h]=!0}},"44e7":function(s,i,a){var o=a("861d"),l=a("c6b6"),c=a("b622"),u=c("match");s.exports=function(f){var h;return o(f)&&((h=f[u])!==void 0?!!h:l(f)=="RegExp")}},4930:function(s,i,a){var o=a("d039");s.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(s,i,a){var o=a("fc6a"),l=a("50c4"),c=a("23cb"),u=function(f){return function(h,p,m){var g=o(h),v=l(g.length),x=c(m,v),y;if(f&&p!=p){for(;v>x;)if(y=g[x++],y!=y)return!0}else for(;v>x;x++)if((f||x in g)&&g[x]===p)return f||x||0;return!f&&-1}};s.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(s,i,a){var o=a("23e7"),l=a("b727").filter,c=a("1dde"),u=a("ae40"),f=c("filter"),h=u("filter");o({target:"Array",proto:!0,forced:!f||!h},{filter:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,i,a){var o=a("0366"),l=a("7b0b"),c=a("9bdd"),u=a("e95a"),f=a("50c4"),h=a("8418"),p=a("35a1");s.exports=function(g){var v=l(g),x=typeof this=="function"?this:Array,y=arguments.length,_=y>1?arguments[1]:void 0,I=_!==void 0,R=p(v),A=0,E,T,b,S,k,w;if(I&&(_=o(_,y>2?arguments[2]:void 0,2)),R!=null&&!(x==Array&&u(R)))for(S=R.call(v),k=S.next,T=new x;!(b=k.call(S)).done;A++)w=I?c(S,_,[b.value,A],!0):b.value,h(T,A,w);else for(E=f(v.length),T=new x(E);E>A;A++)w=I?_(v[A],A):v[A],h(T,A,w);return T.length=A,T}},"4fad":function(s,i,a){var o=a("23e7"),l=a("6f53").entries;o({target:"Object",stat:!0},{entries:function(u){return l(u)}})},"50c4":function(s,i,a){var o=a("a691"),l=Math.min;s.exports=function(c){return c>0?l(o(c),9007199254740991):0}},5135:function(s,i){var a={}.hasOwnProperty;s.exports=function(o,l){return a.call(o,l)}},5319:function(s,i,a){var o=a("d784"),l=a("825a"),c=a("7b0b"),u=a("50c4"),f=a("a691"),h=a("1d80"),p=a("8aa5"),m=a("14c3"),g=Math.max,v=Math.min,x=Math.floor,y=/\$([$&'`]|\d\d?|<[^>]*>)/g,_=/\$([$&'`]|\d\d?)/g,I=function(R){return R===void 0?R:String(R)};o("replace",2,function(R,A,E,T){var b=T.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,S=T.REPLACE_KEEPS_$0,k=b?"$":"$0";return[function(N,F){var P=h(this),O=N==null?void 0:N[R];return O!==void 0?O.call(N,P,F):A.call(String(P),N,F)},function(D,N){if(!b&&S||typeof N=="string"&&N.indexOf(k)===-1){var F=E(A,D,this,N);if(F.done)return F.value}var P=l(D),O=String(this),M=typeof N=="function";M||(N=String(N));var U=P.global;if(U){var z=P.unicode;P.lastIndex=0}for(var j=[];;){var H=m(P,O);if(H===null||(j.push(H),!U))break;var W=String(H[0]);W===""&&(P.lastIndex=p(O,u(P.lastIndex),z))}for(var K="",re=0,me=0;me<j.length;me++){H=j[me];for(var ce=String(H[0]),pe=g(v(f(H.index),O.length),0),te=[],Q=1;Q<H.length;Q++)te.push(I(H[Q]));var ye=H.groups;if(M){var X=[ce].concat(te,pe,O);ye!==void 0&&X.push(ye);var q=String(N.apply(void 0,X))}else q=w(ce,O,pe,te,ye,N);pe>=re&&(K+=O.slice(re,pe)+q,re=pe+ce.length)}return K+O.slice(re)}];function w(D,N,F,P,O,M){var U=F+D.length,z=P.length,j=_;return O!==void 0&&(O=c(O),j=y),A.call(M,j,function(H,W){var K;switch(W.charAt(0)){case"$":return"$";case"&":return D;case"`":return N.slice(0,F);case"'":return N.slice(U);case"<":K=O[W.slice(1,-1)];break;default:var re=+W;if(re===0)return H;if(re>z){var me=x(re/10);return me===0?H:me<=z?P[me-1]===void 0?W.charAt(1):P[me-1]+W.charAt(1):H}K=P[re-1]}return K===void 0?"":K})}})},5692:function(s,i,a){var o=a("c430"),l=a("c6cd");(s.exports=function(c,u){return l[c]||(l[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,i,a){var o=a("d066"),l=a("241c"),c=a("7418"),u=a("825a");s.exports=o("Reflect","ownKeys")||function(h){var p=l.f(u(h)),m=c.f;return m?p.concat(m(h)):p}},"5a34":function(s,i,a){var o=a("44e7");s.exports=function(l){if(o(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(s,i){s.exports=function(a,o){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:o}}},"5db7":function(s,i,a){var o=a("23e7"),l=a("a2bf"),c=a("7b0b"),u=a("50c4"),f=a("1c0b"),h=a("65f0");o({target:"Array",proto:!0},{flatMap:function(m){var g=c(this),v=u(g.length),x;return f(m),x=h(g,0),x.length=l(x,g,g,v,0,1,m,arguments.length>1?arguments[1]:void 0),x}})},6547:function(s,i,a){var o=a("a691"),l=a("1d80"),c=function(u){return function(f,h){var p=String(l(f)),m=o(h),g=p.length,v,x;return m<0||m>=g?u?"":void 0:(v=p.charCodeAt(m),v<55296||v>56319||m+1===g||(x=p.charCodeAt(m+1))<56320||x>57343?u?p.charAt(m):v:u?p.slice(m,m+2):(v-55296<<10)+(x-56320)+65536)}};s.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(s,i,a){var o=a("861d"),l=a("e8b5"),c=a("b622"),u=c("species");s.exports=function(f,h){var p;return l(f)&&(p=f.constructor,typeof p=="function"&&(p===Array||l(p.prototype))?p=void 0:o(p)&&(p=p[u],p===null&&(p=void 0))),new(p===void 0?Array:p)(h===0?0:h)}},"69f3":function(s,i,a){var o=a("7f9a"),l=a("da84"),c=a("861d"),u=a("9112"),f=a("5135"),h=a("f772"),p=a("d012"),m=l.WeakMap,g,v,x,y=function(b){return x(b)?v(b):g(b,{})},_=function(b){return function(S){var k;if(!c(S)||(k=v(S)).type!==b)throw TypeError("Incompatible receiver, "+b+" required");return k}};if(o){var I=new m,R=I.get,A=I.has,E=I.set;g=function(b,S){return E.call(I,b,S),S},v=function(b){return R.call(I,b)||{}},x=function(b){return A.call(I,b)}}else{var T=h("state");p[T]=!0,g=function(b,S){return u(b,T,S),S},v=function(b){return f(b,T)?b[T]:{}},x=function(b){return f(b,T)}}s.exports={set:g,get:v,has:x,enforce:y,getterFor:_}},"6eeb":function(s,i,a){var o=a("da84"),l=a("9112"),c=a("5135"),u=a("ce4e"),f=a("8925"),h=a("69f3"),p=h.get,m=h.enforce,g=String(String).split("String");(s.exports=function(v,x,y,_){var I=_?!!_.unsafe:!1,R=_?!!_.enumerable:!1,A=_?!!_.noTargetGet:!1;if(typeof y=="function"&&(typeof x=="string"&&!c(y,"name")&&l(y,"name",x),m(y).source=g.join(typeof x=="string"?x:"")),v===o){R?v[x]=y:u(x,y);return}else I?!A&&v[x]&&(R=!0):delete v[x];R?v[x]=y:l(v,x,y)})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||f(this)})},"6f53":function(s,i,a){var o=a("83ab"),l=a("df75"),c=a("fc6a"),u=a("d1e7").f,f=function(h){return function(p){for(var m=c(p),g=l(m),v=g.length,x=0,y=[],_;v>x;)_=g[x++],(!o||u.call(m,_))&&y.push(h?[_,m[_]]:m[_]);return y}};s.exports={entries:f(!0),values:f(!1)}},"73d9":function(s,i,a){var o=a("44d2");o("flatMap")},7418:function(s,i){i.f=Object.getOwnPropertySymbols},"746f":function(s,i,a){var o=a("428f"),l=a("5135"),c=a("e538"),u=a("9bf2").f;s.exports=function(f){var h=o.Symbol||(o.Symbol={});l(h,f)||u(h,f,{value:c.f(f)})}},7839:function(s,i){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,i,a){var o=a("1d80");s.exports=function(l){return Object(o(l))}},"7c73":function(s,i,a){var o=a("825a"),l=a("37e8"),c=a("7839"),u=a("d012"),f=a("1be4"),h=a("cc12"),p=a("f772"),m=">",g="<",v="prototype",x="script",y=p("IE_PROTO"),_=function(){},I=function(b){return g+x+m+b+g+"/"+x+m},R=function(b){b.write(I("")),b.close();var S=b.parentWindow.Object;return b=null,S},A=function(){var b=h("iframe"),S="java"+x+":",k;return b.style.display="none",f.appendChild(b),b.src=String(S),k=b.contentWindow.document,k.open(),k.write(I("document.F=Object")),k.close(),k.F},E,T=function(){try{E=document.domain&&new ActiveXObject("htmlfile")}catch{}T=E?R(E):A();for(var b=c.length;b--;)delete T[v][c[b]];return T()};u[y]=!0,s.exports=Object.create||function(S,k){var w;return S!==null?(_[v]=o(S),w=new _,_[v]=null,w[y]=S):w=T(),k===void 0?w:l(w,k)}},"7dd0":function(s,i,a){var o=a("23e7"),l=a("9ed3"),c=a("e163"),u=a("d2bb"),f=a("d44e"),h=a("9112"),p=a("6eeb"),m=a("b622"),g=a("c430"),v=a("3f8c"),x=a("ae93"),y=x.IteratorPrototype,_=x.BUGGY_SAFARI_ITERATORS,I=m("iterator"),R="keys",A="values",E="entries",T=function(){return this};s.exports=function(b,S,k,w,D,N,F){l(k,S,w);var P=function(me){if(me===D&&j)return j;if(!_&&me in U)return U[me];switch(me){case R:return function(){return new k(this,me)};case A:return function(){return new k(this,me)};case E:return function(){return new k(this,me)}}return function(){return new k(this)}},O=S+" Iterator",M=!1,U=b.prototype,z=U[I]||U["@@iterator"]||D&&U[D],j=!_&&z||P(D),H=S=="Array"&&U.entries||z,W,K,re;if(H&&(W=c(H.call(new b)),y!==Object.prototype&&W.next&&(!g&&c(W)!==y&&(u?u(W,y):typeof W[I]!="function"&&h(W,I,T)),f(W,O,!0,!0),g&&(v[O]=T))),D==A&&z&&z.name!==A&&(M=!0,j=function(){return z.call(this)}),(!g||F)&&U[I]!==j&&h(U,I,j),v[S]=j,D)if(K={values:P(A),keys:N?j:P(R),entries:P(E)},F)for(re in K)(_||M||!(re in U))&&p(U,re,K[re]);else o({target:S,proto:!0,forced:_||M},K);return K}},"7f9a":function(s,i,a){var o=a("da84"),l=a("8925"),c=o.WeakMap;s.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(s,i,a){var o=a("d039");s.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,i,a){var o=a("c04e"),l=a("9bf2"),c=a("5c6c");s.exports=function(u,f,h){var p=o(f);p in u?l.f(u,p,c(0,h)):u[p]=h}},"861d":function(s,i){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},8875:function(s,i,a){var o,l,c;(function(u,f){l=[],o=f,c=typeof o=="function"?o.apply(i,l):o,c!==void 0&&(s.exports=c)})(typeof self<"u"?self:this,function(){function u(){var f=Object.getOwnPropertyDescriptor(document,"currentScript");if(!f&&"currentScript"in document&&document.currentScript||f&&f.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(E){var h=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,p=/@([^@]*):(\d+):(\d+)\s*$/ig,m=h.exec(E.stack)||p.exec(E.stack),g=m&&m[1]||!1,v=m&&m[2]||!1,x=document.location.href.replace(document.location.hash,""),y,_,I,R=document.getElementsByTagName("script");g===x&&(y=document.documentElement.outerHTML,_=new RegExp("(?:[^\\n]+?\\n){0,"+(v-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),I=y.replace(_,"$1").trim());for(var A=0;A<R.length;A++)if(R[A].readyState==="interactive"||R[A].src===g||g===x&&R[A].innerHTML&&R[A].innerHTML.trim()===I)return R[A];return null}}return u})},8925:function(s,i,a){var o=a("c6cd"),l=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(c){return l.call(c)}),s.exports=o.inspectSource},"8aa5":function(s,i,a){var o=a("6547").charAt;s.exports=function(l,c,u){return c+(u?o(l,c).length:1)}},"8bbf":function(s,i){s.exports=r},"90e3":function(s,i){var a=0,o=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+o).toString(36)}},9112:function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("5c6c");s.exports=o?function(u,f,h){return l.f(u,f,c(1,h))}:function(u,f,h){return u[f]=h,u}},9263:function(s,i,a){var o=a("ad6d"),l=a("9f7f"),c=RegExp.prototype.exec,u=String.prototype.replace,f=c,h=function(){var v=/a/,x=/b*/g;return c.call(v,"a"),c.call(x,"a"),v.lastIndex!==0||x.lastIndex!==0}(),p=l.UNSUPPORTED_Y||l.BROKEN_CARET,m=/()??/.exec("")[1]!==void 0,g=h||m||p;g&&(f=function(x){var y=this,_,I,R,A,E=p&&y.sticky,T=o.call(y),b=y.source,S=0,k=x;return E&&(T=T.replace("y",""),T.indexOf("g")===-1&&(T+="g"),k=String(x).slice(y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&x[y.lastIndex-1]!==`
`)&&(b="(?: "+b+")",k=" "+k,S++),I=new RegExp("^(?:"+b+")",T)),m&&(I=new RegExp("^"+b+"$(?!\\s)",T)),h&&(_=y.lastIndex),R=c.call(E?I:y,k),E?R?(R.input=R.input.slice(S),R[0]=R[0].slice(S),R.index=y.lastIndex,y.lastIndex+=R[0].length):y.lastIndex=0:h&&R&&(y.lastIndex=y.global?R.index+R[0].length:_),m&&R&&R.length>1&&u.call(R[0],I,function(){for(A=1;A<arguments.length-2;A++)arguments[A]===void 0&&(R[A]=void 0)}),R}),s.exports=f},"94ca":function(s,i,a){var o=a("d039"),l=/#|\.prototype\./,c=function(m,g){var v=f[u(m)];return v==p?!0:v==h?!1:typeof g=="function"?o(g):!!g},u=c.normalize=function(m){return String(m).replace(l,".").toLowerCase()},f=c.data={},h=c.NATIVE="N",p=c.POLYFILL="P";s.exports=c},"99af":function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("e8b5"),u=a("861d"),f=a("7b0b"),h=a("50c4"),p=a("8418"),m=a("65f0"),g=a("1dde"),v=a("b622"),x=a("2d00"),y=v("isConcatSpreadable"),_=9007199254740991,I="Maximum allowed index exceeded",R=x>=51||!l(function(){var b=[];return b[y]=!1,b.concat()[0]!==b}),A=g("concat"),E=function(b){if(!u(b))return!1;var S=b[y];return S!==void 0?!!S:c(b)},T=!R||!A;o({target:"Array",proto:!0,forced:T},{concat:function(S){var k=f(this),w=m(k,0),D=0,N,F,P,O,M;for(N=-1,P=arguments.length;N<P;N++)if(M=N===-1?k:arguments[N],E(M)){if(O=h(M.length),D+O>_)throw TypeError(I);for(F=0;F<O;F++,D++)F in M&&p(w,D,M[F])}else{if(D>=_)throw TypeError(I);p(w,D++,M)}return w.length=D,w}})},"9bdd":function(s,i,a){var o=a("825a");s.exports=function(l,c,u,f){try{return f?c(o(u)[0],u[1]):c(u)}catch(p){var h=l.return;throw h!==void 0&&o(h.call(l)),p}}},"9bf2":function(s,i,a){var o=a("83ab"),l=a("0cfb"),c=a("825a"),u=a("c04e"),f=Object.defineProperty;i.f=o?f:function(p,m,g){if(c(p),m=u(m,!0),c(g),l)try{return f(p,m,g)}catch{}if("get"in g||"set"in g)throw TypeError("Accessors not supported");return"value"in g&&(p[m]=g.value),p}},"9ed3":function(s,i,a){var o=a("ae93").IteratorPrototype,l=a("7c73"),c=a("5c6c"),u=a("d44e"),f=a("3f8c"),h=function(){return this};s.exports=function(p,m,g){var v=m+" Iterator";return p.prototype=l(o,{next:c(1,g)}),u(p,v,!1,!0),f[v]=h,p}},"9f7f":function(s,i,a){var o=a("d039");function l(c,u){return RegExp(c,u)}i.UNSUPPORTED_Y=o(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),i.BROKEN_CARET=o(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(s,i,a){var o=a("e8b5"),l=a("50c4"),c=a("0366"),u=function(f,h,p,m,g,v,x,y){for(var _=g,I=0,R=x?c(x,y,3):!1,A;I<m;){if(I in p){if(A=R?R(p[I],I,h):p[I],v>0&&o(A))_=u(f,h,A,l(A.length),_,v-1)-1;else{if(_>=9007199254740991)throw TypeError("Exceed the acceptable array length");f[_]=A}_++}I++}return _};s.exports=u},a352:function(s,i){s.exports=n},a434:function(s,i,a){var o=a("23e7"),l=a("23cb"),c=a("a691"),u=a("50c4"),f=a("7b0b"),h=a("65f0"),p=a("8418"),m=a("1dde"),g=a("ae40"),v=m("splice"),x=g("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,_=Math.min,I=9007199254740991,R="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!v||!x},{splice:function(E,T){var b=f(this),S=u(b.length),k=l(E,S),w=arguments.length,D,N,F,P,O,M;if(w===0?D=N=0:w===1?(D=0,N=S-k):(D=w-2,N=_(y(c(T),0),S-k)),S+D-N>I)throw TypeError(R);for(F=h(b,N),P=0;P<N;P++)O=k+P,O in b&&p(F,P,b[O]);if(F.length=N,D<N){for(P=k;P<S-N;P++)O=P+N,M=P+D,O in b?b[M]=b[O]:delete b[M];for(P=S;P>S-N+D;P--)delete b[P-1]}else if(D>N)for(P=S-N;P>k;P--)O=P+N-1,M=P+D-1,O in b?b[M]=b[O]:delete b[M];for(P=0;P<D;P++)b[P+k]=arguments[P+2];return b.length=S-N+D,F}})},a4d3:function(s,i,a){var o=a("23e7"),l=a("da84"),c=a("d066"),u=a("c430"),f=a("83ab"),h=a("4930"),p=a("fdbf"),m=a("d039"),g=a("5135"),v=a("e8b5"),x=a("861d"),y=a("825a"),_=a("7b0b"),I=a("fc6a"),R=a("c04e"),A=a("5c6c"),E=a("7c73"),T=a("df75"),b=a("241c"),S=a("057f"),k=a("7418"),w=a("06cf"),D=a("9bf2"),N=a("d1e7"),F=a("9112"),P=a("6eeb"),O=a("5692"),M=a("f772"),U=a("d012"),z=a("90e3"),j=a("b622"),H=a("e538"),W=a("746f"),K=a("d44e"),re=a("69f3"),me=a("b727").forEach,ce=M("hidden"),pe="Symbol",te="prototype",Q=j("toPrimitive"),ye=re.set,X=re.getterFor(pe),q=Object[te],Y=l.Symbol,ne=c("JSON","stringify"),ve=w.f,ae=D.f,le=S.f,de=N.f,Se=O("symbols"),Ie=O("op-symbols"),Te=O("string-to-symbol-registry"),Ge=O("symbol-to-string-registry"),ke=O("wks"),$e=l.QObject,Be=!$e||!$e[te]||!$e[te].findChild,We=f&&m(function(){return E(ae({},"a",{get:function(){return ae(this,"a",{value:7}).a}})).a!=7})?function(ft,ct,mt){var kt=ve(q,ct);kt&&delete q[ct],ae(ft,ct,mt),kt&&ft!==q&&ae(q,ct,kt)}:ae,ze=function(ft,ct){var mt=Se[ft]=E(Y[te]);return ye(mt,{type:pe,tag:ft,description:ct}),f||(mt.description=ct),mt},Ee=p?function(ft){return typeof ft=="symbol"}:function(ft){return Object(ft)instanceof Y},xe=function(ct,mt,kt){ct===q&&xe(Ie,mt,kt),y(ct);var Ot=R(mt,!0);return y(kt),g(Se,Ot)?(kt.enumerable?(g(ct,ce)&&ct[ce][Ot]&&(ct[ce][Ot]=!1),kt=E(kt,{enumerable:A(0,!1)})):(g(ct,ce)||ae(ct,ce,A(1,{})),ct[ce][Ot]=!0),We(ct,Ot,kt)):ae(ct,Ot,kt)},be=function(ct,mt){y(ct);var kt=I(mt),Ot=T(kt).concat(Et(kt));return me(Ot,function(br){(!f||je.call(kt,br))&&xe(ct,br,kt[br])}),ct},Ne=function(ct,mt){return mt===void 0?E(ct):be(E(ct),mt)},je=function(ct){var mt=R(ct,!0),kt=de.call(this,mt);return this===q&&g(Se,mt)&&!g(Ie,mt)?!1:kt||!g(this,mt)||!g(Se,mt)||g(this,ce)&&this[ce][mt]?kt:!0},ot=function(ct,mt){var kt=I(ct),Ot=R(mt,!0);if(!(kt===q&&g(Se,Ot)&&!g(Ie,Ot))){var br=ve(kt,Ot);return br&&g(Se,Ot)&&!(g(kt,ce)&&kt[ce][Ot])&&(br.enumerable=!0),br}},gt=function(ct){var mt=le(I(ct)),kt=[];return me(mt,function(Ot){!g(Se,Ot)&&!g(U,Ot)&&kt.push(Ot)}),kt},Et=function(ct){var mt=ct===q,kt=le(mt?Ie:I(ct)),Ot=[];return me(kt,function(br){g(Se,br)&&(!mt||g(q,br))&&Ot.push(Se[br])}),Ot};if(h||(Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor");var ct=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),mt=z(ct),kt=function(Ot){this===q&&kt.call(Ie,Ot),g(this,ce)&&g(this[ce],mt)&&(this[ce][mt]=!1),We(this,mt,A(1,Ot))};return f&&Be&&We(q,mt,{configurable:!0,set:kt}),ze(mt,ct)},P(Y[te],"toString",function(){return X(this).tag}),P(Y,"withoutSetter",function(ft){return ze(z(ft),ft)}),N.f=je,D.f=xe,w.f=ot,b.f=S.f=gt,k.f=Et,H.f=function(ft){return ze(j(ft),ft)},f&&(ae(Y[te],"description",{configurable:!0,get:function(){return X(this).description}}),u||P(q,"propertyIsEnumerable",je,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:Y}),me(T(ke),function(ft){W(ft)}),o({target:pe,stat:!0,forced:!h},{for:function(ft){var ct=String(ft);if(g(Te,ct))return Te[ct];var mt=Y(ct);return Te[ct]=mt,Ge[mt]=ct,mt},keyFor:function(ct){if(!Ee(ct))throw TypeError(ct+" is not a symbol");if(g(Ge,ct))return Ge[ct]},useSetter:function(){Be=!0},useSimple:function(){Be=!1}}),o({target:"Object",stat:!0,forced:!h,sham:!f},{create:Ne,defineProperty:xe,defineProperties:be,getOwnPropertyDescriptor:ot}),o({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:gt,getOwnPropertySymbols:Et}),o({target:"Object",stat:!0,forced:m(function(){k.f(1)})},{getOwnPropertySymbols:function(ct){return k.f(_(ct))}}),ne){var Lt=!h||m(function(){var ft=Y();return ne([ft])!="[null]"||ne({a:ft})!="{}"||ne(Object(ft))!="{}"});o({target:"JSON",stat:!0,forced:Lt},{stringify:function(ct,mt,kt){for(var Ot=[ct],br=1,Qn;arguments.length>br;)Ot.push(arguments[br++]);if(Qn=mt,!(!x(mt)&&ct===void 0||Ee(ct)))return v(mt)||(mt=function(wi,us){if(typeof Qn=="function"&&(us=Qn.call(this,wi,us)),!Ee(us))return us}),Ot[1]=mt,ne.apply(null,Ot)}})}Y[te][Q]||F(Y[te],Q,Y[te].valueOf),K(Y,pe),U[ce]=!0},a630:function(s,i,a){var o=a("23e7"),l=a("4df4"),c=a("1c7e"),u=!c(function(f){Array.from(f)});o({target:"Array",stat:!0,forced:u},{from:l})},a640:function(s,i,a){var o=a("d039");s.exports=function(l,c){var u=[][l];return!!u&&o(function(){u.call(null,c||function(){throw 1},1)})}},a691:function(s,i){var a=Math.ceil,o=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(l>0?o:a)(l)}},ab13:function(s,i,a){var o=a("b622"),l=o("match");s.exports=function(c){var u=/./;try{"/./"[c](u)}catch{try{return u[l]=!1,"/./"[c](u)}catch{}}return!1}},ac1f:function(s,i,a){var o=a("23e7"),l=a("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(s,i,a){var o=a("825a");s.exports=function(){var l=o(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("5135"),u=Object.defineProperty,f={},h=function(p){throw p};s.exports=function(p,m){if(c(f,p))return f[p];m||(m={});var g=[][p],v=c(m,"ACCESSORS")?m.ACCESSORS:!1,x=c(m,0)?m[0]:h,y=c(m,1)?m[1]:void 0;return f[p]=!!g&&!l(function(){if(v&&!o)return!0;var _={length:-1};v?u(_,1,{enumerable:!0,get:h}):_[1]=1,g.call(_,x,y)})}},ae93:function(s,i,a){var o=a("e163"),l=a("9112"),c=a("5135"),u=a("b622"),f=a("c430"),h=u("iterator"),p=!1,m=function(){return this},g,v,x;[].keys&&(x=[].keys(),"next"in x?(v=o(o(x)),v!==Object.prototype&&(g=v)):p=!0),g==null&&(g={}),!f&&!c(g,h)&&l(g,h,m),s.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:p}},b041:function(s,i,a){var o=a("00ee"),l=a("f5df");s.exports=o?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(s,i,a){var o=a("83ab"),l=a("9bf2").f,c=Function.prototype,u=c.toString,f=/^\s*function ([^ (]*)/,h="name";o&&!(h in c)&&l(c,h,{configurable:!0,get:function(){try{return u.call(this).match(f)[1]}catch{return""}}})},b622:function(s,i,a){var o=a("da84"),l=a("5692"),c=a("5135"),u=a("90e3"),f=a("4930"),h=a("fdbf"),p=l("wks"),m=o.Symbol,g=h?m:m&&m.withoutSetter||u;s.exports=function(v){return c(p,v)||(f&&c(m,v)?p[v]=m[v]:p[v]=g("Symbol."+v)),p[v]}},b64b:function(s,i,a){var o=a("23e7"),l=a("7b0b"),c=a("df75"),u=a("d039"),f=u(function(){c(1)});o({target:"Object",stat:!0,forced:f},{keys:function(p){return c(l(p))}})},b727:function(s,i,a){var o=a("0366"),l=a("44ad"),c=a("7b0b"),u=a("50c4"),f=a("65f0"),h=[].push,p=function(m){var g=m==1,v=m==2,x=m==3,y=m==4,_=m==6,I=m==5||_;return function(R,A,E,T){for(var b=c(R),S=l(b),k=o(A,E,3),w=u(S.length),D=0,N=T||f,F=g?N(R,w):v?N(R,0):void 0,P,O;w>D;D++)if((I||D in S)&&(P=S[D],O=k(P,D,b),m)){if(g)F[D]=O;else if(O)switch(m){case 3:return!0;case 5:return P;case 6:return D;case 2:h.call(F,P)}else if(y)return!1}return _?-1:x||y?y:F}};s.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6)}},c04e:function(s,i,a){var o=a("861d");s.exports=function(l,c){if(!o(l))return l;var u,f;if(c&&typeof(u=l.toString)=="function"&&!o(f=u.call(l))||typeof(u=l.valueOf)=="function"&&!o(f=u.call(l))||!c&&typeof(u=l.toString)=="function"&&!o(f=u.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},c430:function(s,i){s.exports=!1},c6b6:function(s,i){var a={}.toString;s.exports=function(o){return a.call(o).slice(8,-1)}},c6cd:function(s,i,a){var o=a("da84"),l=a("ce4e"),c="__core-js_shared__",u=o[c]||l(c,{});s.exports=u},c740:function(s,i,a){var o=a("23e7"),l=a("b727").findIndex,c=a("44d2"),u=a("ae40"),f="findIndex",h=!0,p=u(f);f in[]&&Array(1)[f](function(){h=!1}),o({target:"Array",proto:!0,forced:h||!p},{findIndex:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}}),c(f)},c8ba:function(s,i){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}s.exports=a},c975:function(s,i,a){var o=a("23e7"),l=a("4d64").indexOf,c=a("a640"),u=a("ae40"),f=[].indexOf,h=!!f&&1/[1].indexOf(1,-0)<0,p=c("indexOf"),m=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:h||!p||!m},{indexOf:function(v){return h?f.apply(this,arguments)||0:l(this,v,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,i,a){var o=a("5135"),l=a("fc6a"),c=a("4d64").indexOf,u=a("d012");s.exports=function(f,h){var p=l(f),m=0,g=[],v;for(v in p)!o(u,v)&&o(p,v)&&g.push(v);for(;h.length>m;)o(p,v=h[m++])&&(~c(g,v)||g.push(v));return g}},caad:function(s,i,a){var o=a("23e7"),l=a("4d64").includes,c=a("44d2"),u=a("ae40"),f=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!f},{includes:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(s,i,a){var o=a("da84"),l=a("861d"),c=o.document,u=l(c)&&l(c.createElement);s.exports=function(f){return u?c.createElement(f):{}}},ce4e:function(s,i,a){var o=a("da84"),l=a("9112");s.exports=function(c,u){try{l(o,c,u)}catch{o[c]=u}return u}},d012:function(s,i){s.exports={}},d039:function(s,i){s.exports=function(a){try{return!!a()}catch{return!0}}},d066:function(s,i,a){var o=a("428f"),l=a("da84"),c=function(u){return typeof u=="function"?u:void 0};s.exports=function(u,f){return arguments.length<2?c(o[u])||c(l[u]):o[u]&&o[u][f]||l[u]&&l[u][f]}},d1e7:function(s,i,a){var o={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!o.call({1:2},1);i.f=c?function(f){var h=l(this,f);return!!h&&h.enumerable}:o},d28b:function(s,i,a){var o=a("746f");o("iterator")},d2bb:function(s,i,a){var o=a("825a"),l=a("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,u={},f;try{f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,f.call(u,[]),c=u instanceof Array}catch{}return function(p,m){return o(p),l(m),c?f.call(p,m):p.__proto__=m,p}}():void 0)},d3b7:function(s,i,a){var o=a("00ee"),l=a("6eeb"),c=a("b041");o||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(s,i,a){var o=a("9bf2").f,l=a("5135"),c=a("b622"),u=c("toStringTag");s.exports=function(f,h,p){f&&!l(f=p?f:f.prototype,u)&&o(f,u,{configurable:!0,value:h})}},d58f:function(s,i,a){var o=a("1c0b"),l=a("7b0b"),c=a("44ad"),u=a("50c4"),f=function(h){return function(p,m,g,v){o(m);var x=l(p),y=c(x),_=u(x.length),I=h?_-1:0,R=h?-1:1;if(g<2)for(;;){if(I in y){v=y[I],I+=R;break}if(I+=R,h?I<0:_<=I)throw TypeError("Reduce of empty array with no initial value")}for(;h?I>=0:_>I;I+=R)I in y&&(v=m(v,y[I],I,x));return v}};s.exports={left:f(!1),right:f(!0)}},d784:function(s,i,a){a("ac1f");var o=a("6eeb"),l=a("d039"),c=a("b622"),u=a("9263"),f=a("9112"),h=c("species"),p=!l(function(){var y=/./;return y.exec=function(){var _=[];return _.groups={a:"7"},_},"".replace(y,"$<a>")!=="7"}),m=function(){return"a".replace(/./,"$0")==="$0"}(),g=c("replace"),v=function(){return/./[g]?/./[g]("a","$0")==="":!1}(),x=!l(function(){var y=/(?:)/,_=y.exec;y.exec=function(){return _.apply(this,arguments)};var I="ab".split(y);return I.length!==2||I[0]!=="a"||I[1]!=="b"});s.exports=function(y,_,I,R){var A=c(y),E=!l(function(){var D={};return D[A]=function(){return 7},""[y](D)!=7}),T=E&&!l(function(){var D=!1,N=/a/;return y==="split"&&(N={},N.constructor={},N.constructor[h]=function(){return N},N.flags="",N[A]=/./[A]),N.exec=function(){return D=!0,null},N[A](""),!D});if(!E||!T||y==="replace"&&!(p&&m&&!v)||y==="split"&&!x){var b=/./[A],S=I(A,""[y],function(D,N,F,P,O){return N.exec===u?E&&!O?{done:!0,value:b.call(N,F,P)}:{done:!0,value:D.call(F,N,P)}:{done:!1}},{REPLACE_KEEPS_$0:m,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:v}),k=S[0],w=S[1];o(String.prototype,y,k),o(RegExp.prototype,A,_==2?function(D,N){return w.call(D,this,N)}:function(D){return w.call(D,this)})}R&&f(RegExp.prototype[A],"sham",!0)}},d81d:function(s,i,a){var o=a("23e7"),l=a("b727").map,c=a("1dde"),u=a("ae40"),f=c("map"),h=u("map");o({target:"Array",proto:!0,forced:!f||!h},{map:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,i,a){(function(o){var l=function(c){return c&&c.Math==Math&&c};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof o=="object"&&o)||Function("return this")()}).call(this,a("c8ba"))},dbb4:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("56ef"),u=a("fc6a"),f=a("06cf"),h=a("8418");o({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(m){for(var g=u(m),v=f.f,x=c(g),y={},_=0,I,R;x.length>_;)R=v(g,I=x[_++]),R!==void 0&&h(y,I,R);return y}})},dbf1:function(s,i,a){(function(o){a.d(i,"a",function(){return c});function l(){return typeof window<"u"?window.console:o.console}var c=l()}).call(this,a("c8ba"))},ddb0:function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("e260"),u=a("9112"),f=a("b622"),h=f("iterator"),p=f("toStringTag"),m=c.values;for(var g in l){var v=o[g],x=v&&v.prototype;if(x){if(x[h]!==m)try{u(x,h,m)}catch{x[h]=m}if(x[p]||u(x,p,g),l[g]){for(var y in c)if(x[y]!==c[y])try{u(x,y,c[y])}catch{x[y]=c[y]}}}}},df75:function(s,i,a){var o=a("ca84"),l=a("7839");s.exports=Object.keys||function(u){return o(u,l)}},e01a:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("da84"),u=a("5135"),f=a("861d"),h=a("9bf2").f,p=a("e893"),m=c.Symbol;if(l&&typeof m=="function"&&(!("description"in m.prototype)||m().description!==void 0)){var g={},v=function(){var A=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),E=this instanceof v?new m(A):A===void 0?m():m(A);return A===""&&(g[E]=!0),E};p(v,m);var x=v.prototype=m.prototype;x.constructor=v;var y=x.toString,_=String(m("test"))=="Symbol(test)",I=/^Symbol\((.*)\)[^)]+$/;h(x,"description",{configurable:!0,get:function(){var A=f(this)?this.valueOf():this,E=y.call(A);if(u(g,A))return"";var T=_?E.slice(7,-1):E.replace(I,"$1");return T===""?void 0:T}}),o({global:!0,forced:!0},{Symbol:v})}},e163:function(s,i,a){var o=a("5135"),l=a("7b0b"),c=a("f772"),u=a("e177"),f=c("IE_PROTO"),h=Object.prototype;s.exports=u?Object.getPrototypeOf:function(p){return p=l(p),o(p,f)?p[f]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?h:null}},e177:function(s,i,a){var o=a("d039");s.exports=!o(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(s,i,a){var o=a("fc6a"),l=a("44d2"),c=a("3f8c"),u=a("69f3"),f=a("7dd0"),h="Array Iterator",p=u.set,m=u.getterFor(h);s.exports=f(Array,"Array",function(g,v){p(this,{type:h,target:o(g),index:0,kind:v})},function(){var g=m(this),v=g.target,x=g.kind,y=g.index++;return!v||y>=v.length?(g.target=void 0,{value:void 0,done:!0}):x=="keys"?{value:y,done:!1}:x=="values"?{value:v[y],done:!1}:{value:[y,v[y]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("fc6a"),u=a("06cf").f,f=a("83ab"),h=l(function(){u(1)}),p=!f||h;o({target:"Object",stat:!0,forced:p,sham:!f},{getOwnPropertyDescriptor:function(g,v){return u(c(g),v)}})},e538:function(s,i,a){var o=a("b622");i.f=o},e893:function(s,i,a){var o=a("5135"),l=a("56ef"),c=a("06cf"),u=a("9bf2");s.exports=function(f,h){for(var p=l(h),m=u.f,g=c.f,v=0;v<p.length;v++){var x=p[v];o(f,x)||m(f,x,g(h,x))}}},e8b5:function(s,i,a){var o=a("c6b6");s.exports=Array.isArray||function(c){return o(c)=="Array"}},e95a:function(s,i,a){var o=a("b622"),l=a("3f8c"),c=o("iterator"),u=Array.prototype;s.exports=function(f){return f!==void 0&&(l.Array===f||u[c]===f)}},f5df:function(s,i,a){var o=a("00ee"),l=a("c6b6"),c=a("b622"),u=c("toStringTag"),f=l(function(){return arguments}())=="Arguments",h=function(p,m){try{return p[m]}catch{}};s.exports=o?l:function(p){var m,g,v;return p===void 0?"Undefined":p===null?"Null":typeof(g=h(m=Object(p),u))=="string"?g:f?l(m):(v=l(m))=="Object"&&typeof m.callee=="function"?"Arguments":v}},f772:function(s,i,a){var o=a("5692"),l=a("90e3"),c=o("keys");s.exports=function(u){return c[u]||(c[u]=l(u))}},fb15:function(s,i,a){if(a.r(i),typeof window<"u"){var o=window.document.currentScript;{var l=a("8875");o=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(a.p=c[1])}a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("159b"),a("a4d3"),a("e439"),a("dbb4"),a("b64b");function u(Ee,xe,be){return xe in Ee?Object.defineProperty(Ee,xe,{value:be,enumerable:!0,configurable:!0,writable:!0}):Ee[xe]=be,Ee}function f(Ee,xe){var be=Object.keys(Ee);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(Ee);xe&&(Ne=Ne.filter(function(je){return Object.getOwnPropertyDescriptor(Ee,je).enumerable})),be.push.apply(be,Ne)}return be}function h(Ee){for(var xe=1;xe<arguments.length;xe++){var be=arguments[xe]!=null?arguments[xe]:{};xe%2?f(Object(be),!0).forEach(function(Ne){u(Ee,Ne,be[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(be)):f(Object(be)).forEach(function(Ne){Object.defineProperty(Ee,Ne,Object.getOwnPropertyDescriptor(be,Ne))})}return Ee}function p(Ee){if(Array.isArray(Ee))return Ee}a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function m(Ee,xe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ee)))){var be=[],Ne=!0,je=!1,ot=void 0;try{for(var gt=Ee[Symbol.iterator](),Et;!(Ne=(Et=gt.next()).done)&&(be.push(Et.value),!(xe&&be.length===xe));Ne=!0);}catch(Lt){je=!0,ot=Lt}finally{try{!Ne&&gt.return!=null&&gt.return()}finally{if(je)throw ot}}return be}}a("a630"),a("fb6a"),a("b0c0"),a("25f0");function g(Ee,xe){(xe==null||xe>Ee.length)&&(xe=Ee.length);for(var be=0,Ne=new Array(xe);be<xe;be++)Ne[be]=Ee[be];return Ne}function v(Ee,xe){if(Ee){if(typeof Ee=="string")return g(Ee,xe);var be=Object.prototype.toString.call(Ee).slice(8,-1);if(be==="Object"&&Ee.constructor&&(be=Ee.constructor.name),be==="Map"||be==="Set")return Array.from(Ee);if(be==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(be))return g(Ee,xe)}}function x(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(Ee,xe){return p(Ee)||m(Ee,xe)||v(Ee,xe)||x()}function _(Ee){if(Array.isArray(Ee))return g(Ee)}function I(Ee){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ee))return Array.from(Ee)}function R(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(Ee){return _(Ee)||I(Ee)||v(Ee)||R()}var E=a("a352"),T=a.n(E);function b(Ee){Ee.parentElement!==null&&Ee.parentElement.removeChild(Ee)}function S(Ee,xe,be){var Ne=be===0?Ee.children[0]:Ee.children[be-1].nextSibling;Ee.insertBefore(xe,Ne)}var k=a("dbf1");a("13d5"),a("4fad"),a("ac1f"),a("5319");function w(Ee){var xe=Object.create(null);return function(Ne){var je=xe[Ne];return je||(xe[Ne]=Ee(Ne))}}var D=/-(\w)/g,N=w(function(Ee){return Ee.replace(D,function(xe,be){return be.toUpperCase()})});a("5db7"),a("73d9");var F=["Start","Add","Remove","Update","End"],P=["Choose","Unchoose","Sort","Filter","Clone"],O=["Move"],M=[O,F,P].flatMap(function(Ee){return Ee}).map(function(Ee){return"on".concat(Ee)}),U={manage:O,manageAndEmit:F,emit:P};function z(Ee){return M.indexOf(Ee)!==-1}a("caad"),a("2ca0");var j=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function H(Ee){return j.includes(Ee)}function W(Ee){return["transition-group","TransitionGroup"].includes(Ee)}function K(Ee){return["id","class","role","style"].includes(Ee)||Ee.startsWith("data-")||Ee.startsWith("aria-")||Ee.startsWith("on")}function re(Ee){return Ee.reduce(function(xe,be){var Ne=y(be,2),je=Ne[0],ot=Ne[1];return xe[je]=ot,xe},{})}function me(Ee){var xe=Ee.$attrs,be=Ee.componentData,Ne=be===void 0?{}:be,je=re(Object.entries(xe).filter(function(ot){var gt=y(ot,2),Et=gt[0];return gt[1],K(Et)}));return h(h({},je),Ne)}function ce(Ee){var xe=Ee.$attrs,be=Ee.callBackBuilder,Ne=re(pe(xe));Object.entries(be).forEach(function(ot){var gt=y(ot,2),Et=gt[0],Lt=gt[1];U[Et].forEach(function(ft){Ne["on".concat(ft)]=Lt(ft)})});var je="[data-draggable]".concat(Ne.draggable||"");return h(h({},Ne),{},{draggable:je})}function pe(Ee){return Object.entries(Ee).filter(function(xe){var be=y(xe,2),Ne=be[0];return be[1],!K(Ne)}).map(function(xe){var be=y(xe,2),Ne=be[0],je=be[1];return[N(Ne),je]}).filter(function(xe){var be=y(xe,2),Ne=be[0];return be[1],!z(Ne)})}a("c740");function te(Ee,xe){if(!(Ee instanceof xe))throw new TypeError("Cannot call a class as a function")}function Q(Ee,xe){for(var be=0;be<xe.length;be++){var Ne=xe[be];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(Ee,Ne.key,Ne)}}function ye(Ee,xe,be){return xe&&Q(Ee.prototype,xe),Ee}var X=function(xe){var be=xe.el;return be},q=function(xe,be){return xe.__draggable_context=be},Y=function(xe){return xe.__draggable_context},ne=function(){function Ee(xe){var be=xe.nodes,Ne=be.header,je=be.default,ot=be.footer,gt=xe.root,Et=xe.realList;te(this,Ee),this.defaultNodes=je,this.children=[].concat(A(Ne),A(je),A(ot)),this.externalComponent=gt.externalComponent,this.rootTransition=gt.transition,this.tag=gt.tag,this.realList=Et}return ye(Ee,[{key:"render",value:function(be,Ne){var je=this.tag,ot=this.children,gt=this._isRootComponent,Et=gt?{default:function(){return ot}}:ot;return be(je,Ne,Et)}},{key:"updated",value:function(){var be=this.defaultNodes,Ne=this.realList;be.forEach(function(je,ot){q(X(je),{element:Ne[ot],index:ot})})}},{key:"getUnderlyingVm",value:function(be){return Y(be)}},{key:"getVmIndexFromDomIndex",value:function(be,Ne){var je=this.defaultNodes,ot=je.length,gt=Ne.children,Et=gt.item(be);if(Et===null)return ot;var Lt=Y(Et);if(Lt)return Lt.index;if(ot===0)return 0;var ft=X(je[0]),ct=A(gt).findIndex(function(mt){return mt===ft});return be<ct?0:ot}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ee}(),ve=a("8bbf");function ae(Ee,xe){var be=Ee[xe];return be?be():[]}function le(Ee){var xe=Ee.$slots,be=Ee.realList,Ne=Ee.getKey,je=be||[],ot=["header","footer"].map(function(mt){return ae(xe,mt)}),gt=y(ot,2),Et=gt[0],Lt=gt[1],ft=xe.item;if(!ft)throw new Error("draggable element must have an item slot");var ct=je.flatMap(function(mt,kt){return ft({element:mt,index:kt}).map(function(Ot){return Ot.key=Ne(mt),Ot.props=h(h({},Ot.props||{}),{},{"data-draggable":!0}),Ot})});if(ct.length!==je.length)throw new Error("Item slot must have only one child");return{header:Et,footer:Lt,default:ct}}function de(Ee){var xe=W(Ee),be=!H(Ee)&&!xe;return{transition:xe,externalComponent:be,tag:be?Object(ve.resolveComponent)(Ee):xe?ve.TransitionGroup:Ee}}function Se(Ee){var xe=Ee.$slots,be=Ee.tag,Ne=Ee.realList,je=Ee.getKey,ot=le({$slots:xe,realList:Ne,getKey:je}),gt=de(be);return new ne({nodes:ot,root:gt,realList:Ne})}function Ie(Ee,xe){var be=this;Object(ve.nextTick)(function(){return be.$emit(Ee.toLowerCase(),xe)})}function Te(Ee){var xe=this;return function(be,Ne){if(xe.realList!==null)return xe["onDrag".concat(Ee)](be,Ne)}}function Ge(Ee){var xe=this,be=Te.call(this,Ee);return function(Ne,je){be.call(xe,Ne,je),Ie.call(xe,Ee,Ne)}}var ke=null,$e={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(xe){return xe}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Be=["update:modelValue","change"].concat(A([].concat(A(U.manageAndEmit),A(U.emit)).map(function(Ee){return Ee.toLowerCase()}))),We=Object(ve.defineComponent)({name:"draggable",inheritAttrs:!1,props:$e,emits:Be,data:function(){return{error:!1}},render:function(){try{this.error=!1;var xe=this.$slots,be=this.$attrs,Ne=this.tag,je=this.componentData,ot=this.realList,gt=this.getKey,Et=Se({$slots:xe,tag:Ne,realList:ot,getKey:gt});this.componentStructure=Et;var Lt=me({$attrs:be,componentData:je});return Et.render(ve.h,Lt)}catch(ft){return this.error=!0,Object(ve.h)("pre",{style:{color:"red"}},ft.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&k.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var xe=this;if(!this.error){var be=this.$attrs,Ne=this.$el,je=this.componentStructure;je.updated();var ot=ce({$attrs:be,callBackBuilder:{manageAndEmit:function(Lt){return Ge.call(xe,Lt)},emit:function(Lt){return Ie.bind(xe,Lt)},manage:function(Lt){return Te.call(xe,Lt)}}}),gt=Ne.nodeType===1?Ne:Ne.parentElement;this._sortable=new T.a(gt,ot),this.targetDomElement=gt,gt.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var xe=this.list;return xe||this.modelValue},getKey:function(){var xe=this.itemKey;return typeof xe=="function"?xe:function(be){return be[xe]}}},watch:{$attrs:{handler:function(xe){var be=this._sortable;be&&pe(xe).forEach(function(Ne){var je=y(Ne,2),ot=je[0],gt=je[1];be.option(ot,gt)})},deep:!0}},methods:{getUnderlyingVm:function(xe){return this.componentStructure.getUnderlyingVm(xe)||null},getUnderlyingPotencialDraggableComponent:function(xe){return xe.__draggable_component__},emitChanges:function(xe){var be=this;Object(ve.nextTick)(function(){return be.$emit("change",xe)})},alterList:function(xe){if(this.list){xe(this.list);return}var be=A(this.modelValue);xe(be),this.$emit("update:modelValue",be)},spliceList:function(){var xe=arguments,be=function(je){return je.splice.apply(je,A(xe))};this.alterList(be)},updatePosition:function(xe,be){var Ne=function(ot){return ot.splice(be,0,ot.splice(xe,1)[0])};this.alterList(Ne)},getRelatedContextFromMoveEvent:function(xe){var be=xe.to,Ne=xe.related,je=this.getUnderlyingPotencialDraggableComponent(be);if(!je)return{component:je};var ot=je.realList,gt={list:ot,component:je};if(be!==Ne&&ot){var Et=je.getUnderlyingVm(Ne)||{};return h(h({},Et),gt)}return gt},getVmIndexFromDomIndex:function(xe){return this.componentStructure.getVmIndexFromDomIndex(xe,this.targetDomElement)},onDragStart:function(xe){this.context=this.getUnderlyingVm(xe.item),xe.item._underlying_vm_=this.clone(this.context.element),ke=xe.item},onDragAdd:function(xe){var be=xe.item._underlying_vm_;if(be!==void 0){b(xe.item);var Ne=this.getVmIndexFromDomIndex(xe.newIndex);this.spliceList(Ne,0,be);var je={element:be,newIndex:Ne};this.emitChanges({added:je})}},onDragRemove:function(xe){if(S(this.$el,xe.item,xe.oldIndex),xe.pullMode==="clone"){b(xe.clone);return}var be=this.context,Ne=be.index,je=be.element;this.spliceList(Ne,1);var ot={element:je,oldIndex:Ne};this.emitChanges({removed:ot})},onDragUpdate:function(xe){b(xe.item),S(xe.from,xe.item,xe.oldIndex);var be=this.context.index,Ne=this.getVmIndexFromDomIndex(xe.newIndex);this.updatePosition(be,Ne);var je={element:this.context.element,oldIndex:be,newIndex:Ne};this.emitChanges({moved:je})},computeFutureIndex:function(xe,be){if(!xe.element)return 0;var Ne=A(be.to.children).filter(function(Et){return Et.style.display!=="none"}),je=Ne.indexOf(be.related),ot=xe.component.getVmIndexFromDomIndex(je),gt=Ne.indexOf(ke)!==-1;return gt||!be.willInsertAfter?ot:ot+1},onDragMove:function(xe,be){var Ne=this.move,je=this.realList;if(!Ne||!je)return!0;var ot=this.getRelatedContextFromMoveEvent(xe),gt=this.computeFutureIndex(ot,xe),Et=h(h({},this.context),{},{futureIndex:gt}),Lt=h(h({},xe),{},{relatedContext:ot,draggedContext:Et});return Ne(Lt,be)},onDragEnd:function(){ke=null}}}),ze=We;i.default=ze},fb6a:function(s,i,a){var o=a("23e7"),l=a("861d"),c=a("e8b5"),u=a("23cb"),f=a("50c4"),h=a("fc6a"),p=a("8418"),m=a("b622"),g=a("1dde"),v=a("ae40"),x=g("slice"),y=v("slice",{ACCESSORS:!0,0:0,1:2}),_=m("species"),I=[].slice,R=Math.max;o({target:"Array",proto:!0,forced:!x||!y},{slice:function(E,T){var b=h(this),S=f(b.length),k=u(E,S),w=u(T===void 0?S:T,S),D,N,F;if(c(b)&&(D=b.constructor,typeof D=="function"&&(D===Array||c(D.prototype))?D=void 0:l(D)&&(D=D[_],D===null&&(D=void 0)),D===Array||D===void 0))return I.call(b,k,w);for(N=new(D===void 0?Array:D)(R(w-k,0)),F=0;k<w;k++,F++)k in b&&p(N,F,b[k]);return N.length=F,N}})},fc6a:function(s,i,a){var o=a("44ad"),l=a("1d80");s.exports=function(c){return o(l(c))}},fdbc:function(s,i){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,i,a){var o=a("4930");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(jse);const Iae={class:"assignment-dialog-modal"},kae={class:"form-row"},Dae={key:0,class:"form-row"},Pae=["value"],Rae={key:1,class:"form-row"},Fae=["value"],Oae={key:2,class:"form-row"},Nae={class:"form-row"},Mae={class:"form-row"},Lae={class:"form-row"},Bae={class:"dialog-actions"},Uae={__name:"AssignmentDialog",props:{teachers:Array,students:Array,assignment:Object},emits:["save","close"],setup(t,{emit:e}){const r=t,n=e,s=se("lunch"),i=se(""),a=se(""),o=se(""),l=se("12:00"),c=se("12:30"),u=se(""),f=se(""),h=se("");Vt(()=>r.assignment,g=>{g?(f.value=g.id||Date.now().toString(),h.value=g.blockId||f.value||`block-${Date.now()}`,s.value=g.type||"lunch",i.value=g.teacherId||"",a.value=g.studentId||"",o.value=g.type==="other"?g.label:"",l.value=g.start||"12:00",c.value=g.end||"12:30",u.value=g.note||""):(f.value=Date.now().toString(),h.value=`block-${f.value}`,s.value="lunch",i.value="",a.value="",o.value="",l.value="12:00",c.value="12:30",u.value="")},{immediate:!0});const p=Ae(()=>{if(s.value==="lunch")return"Lunch";if(s.value==="break")return"Break";if(s.value==="class"){const g=r.teachers.find(v=>v.id===i.value);return g?g.name||g.email||g.id:""}if(s.value==="student"){const g=r.students.find(v=>v.id===a.value);return g?`${g.firstName} ${g.lastName}`:""}return s.value==="other"?o.value:""});function m(){!l.value||!c.value||s.value==="class"&&!i.value||s.value==="student"&&!a.value||s.value==="other"&&!o.value||n("save",{id:f.value,blockId:h.value,type:s.value,label:p.value,start:l.value,end:c.value,note:u.value,teacherId:i.value,studentId:a.value})}return(g,v)=>(B(),V("div",{class:"assignment-dialog-overlay",onClick:v[8]||(v[8]=mn(x=>g.$emit("close"),["self"]))},[d("div",Iae,[v[20]||(v[20]=d("h2",null,"Add Assignment",-1)),d("form",{onSubmit:mn(m,["prevent"])},[d("div",kae,[v[10]||(v[10]=d("label",null,"Type:",-1)),we(d("select",{"onUpdate:modelValue":v[0]||(v[0]=x=>s.value=x)},v[9]||(v[9]=[nn('<option value="lunch" data-v-f2af98a0>Lunch</option><option value="break" data-v-f2af98a0>Break</option><option value="class" data-v-f2af98a0>Class</option><option value="student" data-v-f2af98a0>Student</option><option value="other" data-v-f2af98a0>Other</option>',5)]),512),[[mr,s.value]])]),s.value==="class"?(B(),V("div",Dae,[v[12]||(v[12]=d("label",null,"Teacher:",-1)),we(d("select",{"onUpdate:modelValue":v[1]||(v[1]=x=>i.value=x)},[v[11]||(v[11]=d("option",{value:""},"Select teacher...",-1)),(B(!0),V(Re,null,Ve(t.teachers,x=>(B(),V("option",{key:x.id,value:x.id},J(x.name||x.email||x.id),9,Pae))),128))],512),[[mr,i.value]])])):_e("",!0),s.value==="student"?(B(),V("div",Rae,[v[14]||(v[14]=d("label",null,"Student:",-1)),we(d("select",{"onUpdate:modelValue":v[2]||(v[2]=x=>a.value=x)},[v[13]||(v[13]=d("option",{value:""},"Select student...",-1)),(B(!0),V(Re,null,Ve(t.students,x=>(B(),V("option",{key:x.id,value:x.id},J(x.firstName)+" "+J(x.lastName),9,Fae))),128))],512),[[mr,a.value]])])):_e("",!0),s.value==="other"?(B(),V("div",Oae,[v[15]||(v[15]=d("label",null,"Label:",-1)),we(d("input",{"onUpdate:modelValue":v[3]||(v[3]=x=>o.value=x),placeholder:"Custom label"},null,512),[[Je,o.value]])])):_e("",!0),d("div",Nae,[v[16]||(v[16]=d("label",null,"Start Time:",-1)),we(d("input",{"onUpdate:modelValue":v[4]||(v[4]=x=>l.value=x),type:"time",required:""},null,512),[[Je,l.value]])]),d("div",Mae,[v[17]||(v[17]=d("label",null,"End Time:",-1)),we(d("input",{"onUpdate:modelValue":v[5]||(v[5]=x=>c.value=x),type:"time",required:""},null,512),[[Je,c.value]])]),d("div",Lae,[v[18]||(v[18]=d("label",null,"Note:",-1)),we(d("input",{"onUpdate:modelValue":v[6]||(v[6]=x=>u.value=x),placeholder:"Optional note"},null,512),[[Je,u.value]])]),d("div",Bae,[v[19]||(v[19]=d("button",{type:"submit",class:"btn btn-primary"},"Add",-1)),d("button",{type:"button",class:"btn btn-secondary",onClick:v[7]||(v[7]=x=>g.$emit("close"))},"Cancel")])],32)])]))}},$ae=yt(Uae,[["__scopeId","data-v-f2af98a0"]]),Vae={class:"vertical-time-grid-wrapper"},Hae={class:"grid-block-label-time"},jae=["title"],Gae=["title"],Wae=["onDragstart","onDrag","onDragend"],zae={class:"assignment-content"},Kae={class:"assignment-label-time"},qae={class:"assignment-time-label"},Xae={class:"assignment-actions"},Yae=["onClick"],Jae=["onClick"],Qae=["onMousedown"],v2=24,Zae={__name:"VerticalTimeGrid",props:{assignments:Array,teachers:Array,students:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,blocks:Array},emits:["update:assignments","edit-assignment"],setup(t,{emit:e}){const r=t,n=e,s=se(null);se(!1);const i=se(r.assignments?r.assignments.map(P=>({...P})):[]);Vt(()=>r.assignments,P=>{i.value=P?P.map(O=>({...O})):[]},{immediate:!0});function a(P){const[O,M]=P.split(":").map(Number);return O*60+M}function o(P){const O=Math.floor(P/60),M=P%60;return`${O<10?"0":""}${O}:${M<10?"0":""}${M}`}const l=Ae(()=>!r.blocks||r.blocks.length===0?"08:00":r.blocks.reduce((P,O)=>O.startTime<P?O.startTime:P,r.blocks[0].startTime)),c=Ae(()=>!r.blocks||r.blocks.length===0?"16:00":r.blocks.reduce((P,O)=>O.endTime>P?O.endTime:P,r.blocks[0].endTime)),u=Ae(()=>a(l.value)),f=Ae(()=>a(c.value)),h=Ae(()=>f.value-u.value),p=Ae(()=>h.value*2.5+v2*2);Ae(()=>{if(!r.blocks)return[];const P=[];return r.blocks.forEach(O=>{P.includes(O.startTime)||P.push(O.startTime),P.includes(O.endTime)||P.push(O.endTime)}),P.sort((O,M)=>a(O)-a(M))});function m(P){return(a(P)-u.value)*2.5+v2-10}function g(P,O){if(!P||!O)return!1;const M=a(P.startTime),U=a(P.endTime),z=a(O.startTime),j=a(O.endTime);return M<j&&U>z}function v(P){const O=[];for(let U=0;U<P.length;U++){const z=P[U];let j=null;for(let H=0;H<O.length;H++)if(O[H].ids.some(W=>g(z,P.find(K=>K.id===W)))){j=O[H];break}j?(j.ids.push(z.id),j.blocks.push(z)):O.push({ids:[z.id],blocks:[z]})}let M=!0;for(;M;){M=!1;for(let U=0;U<O.length;U++){for(let z=U+1;z<O.length;z++)if(O[U].ids.some(j=>O[z].ids.some(H=>g(P.find(W=>W.id===j),P.find(W=>W.id===H))))){O[U].ids=Array.from(new Set([...O[U].ids,...O[z].ids])),O[U].blocks=Array.from(new Set([...O[U].blocks,...O[z].blocks])),O.splice(z,1),M=!0;break}if(M)break}}return O.map(U=>{const z=U.blocks.sort((W,K)=>W.startTime.localeCompare(K.startTime)||W.id.localeCompare(K.id)),j=z.reduce((W,K)=>K.startTime<W?K.startTime:W,z[0].startTime),H=z.reduce((W,K)=>K.endTime>W?K.endTime:W,z[0].endTime);return{ids:U.ids,startTime:j,endTime:H}})}Ae(()=>v(x.value));const x=Ae(()=>(r.blocks||[]).map((P,O)=>({...P,id:P.id||`block-${O}`})));function y(P){const O=[];for(let z=0;z<P.length;z++){const j=P[z];let H=null;for(let W=0;W<O.length;W++)if(O[W].some(K=>g(j,P.find(re=>re.id===K)))){H=O[W];break}H?H.push(j.id):O.push([j.id])}let M=!0;for(;M;){M=!1;for(let z=0;z<O.length;z++){for(let j=z+1;j<O.length;j++)if(O[z].some(H=>O[j].some(W=>g(P.find(K=>K.id===H),P.find(K=>K.id===W))))){O[z]=Array.from(new Set([...O[z],...O[j]])),O.splice(j,1),M=!0;break}if(M)break}}const U={};for(const z of O){const j=z.map(H=>P.find(W=>W.id===H)).sort((H,W)=>H.startTime.localeCompare(W.startTime)||H.id.localeCompare(W.id));j.forEach((H,W)=>{U[H.id]={groupSize:j.length,colIndex:W}})}return U}function _(P,O){const M=y(x.value)[P.id]||{groupSize:1,colIndex:0},U=m(P.startTime),z=(a(P.endTime)-a(P.startTime))*2.5,j=100/M.groupSize;return{position:"absolute",left:j*M.colIndex+"%",width:j+"%",top:U+"px",height:z+"px",zIndex:1,opacity:.38,boxSizing:"border-box",overflow:"hidden"}}function I(P,O){const M=i.value.filter((te,Q)=>{if(te.id===P.id)return!1;const ye=a(te.start),X=a(te.end),q=a(P.start),Y=a(P.end);return ye<Y&&X>q}),U=M.length+1,j=[P,...M].sort((te,Q)=>te.start.localeCompare(Q.start)||te.id.localeCompare(Q.id)).findIndex(te=>te.id===P.id),H=m(P.start),W=(a(P.end)-a(P.start))*2.5,K=Math.max(W,2.5),re=73,me=27,ce=re/U;return{position:"absolute",left:me+ce*j+"%",width:ce+"%",top:H+"px",height:K+"px",zIndex:2,minWidth:"80px",boxSizing:"border-box",padding:"4px",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",cursor:"grab",transition:"top 0.2s, height 0.2s"}}const R=se(null),A=se(0),E=se(0),T=se(null);function b(P,O){R.value=O,A.value=P.clientY,E.value=a(O.start),T.value="move",O.isDragging=!0,P.target.classList.add("background-dragging-div");const U=document.createElement("div");U.className="drag-preview-div",U.style.width="160px",U.style.height="40px",U.style.background="transparent",U.style.border="2px solid #007bff",U.style.position="absolute",U.style.top="-9999px",U.style.left="-9999px",document.body.appendChild(U),P.dataTransfer.setDragImage(U,80,20),P.dataTransfer.effectAllowed="move",P.dataTransfer.setData("text/plain",O.id)}function S(P,O){if(!R.value||P.clientY===0)return;const M=P.clientY-A.value,U=Math.round(M/2.5);if(T.value==="move"){let z=E.value+U,j=z+(a(O.end)-a(O.start));z=Math.max(u.value,Math.min(z,f.value-1)),j=Math.max(z+1,Math.min(j,f.value)),O.start=o(z),O.end=o(j)}}function k(P,O){R.value=null,T.value=null,O.isDragging=!1,n("update:assignments",i.value)}function w(P,O){R.value=O,A.value=P.clientY,E.value=a(O.end),T.value="resize",window.addEventListener("mousemove",D),window.addEventListener("mouseup",N)}function D(P){if(!R.value)return;const O=P.clientY-A.value;let M=E.value+Math.round(O/2.5);const U=a(R.value.start);M=Math.max(U+1,Math.min(M,f.value)),R.value.end=o(M)}function N(P){R.value=null,T.value=null,window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",N)}function F(P){const O=i.value.findIndex(M=>M.id===P);O!==-1&&(i.value.splice(O,1),n("update:assignments",i.value))}return(P,O)=>(B(),V("div",Vae,[d("div",{class:"vertical-time-grid",ref_key:"timeGridRef",ref:s,style:Sn({position:"relative",height:p.value+"px"})},[(B(!0),V(Re,null,Ve(x.value,(M,U)=>(B(),V("div",{key:M.id,class:Ze(["grid-block-bg",M.type==="period"?"blocktype-period":"blocktype-"+(M.type||"period")]),style:Sn(_(M))},[d("div",Hae,[d("span",{class:"grid-block-label",title:M.name||(M.type==="period"?M.label||M.periodName||M.periodNumber||"Period":M.type?M.type.charAt(0).toUpperCase()+M.type.slice(1):"")},J(M.name||(M.type==="period"?M.label||M.periodName||M.periodNumber||"Period":M.type?M.type.charAt(0).toUpperCase()+M.type.slice(1):"")),9,jae),d("span",{class:"grid-block-time",title:M.startTime},J(M.startTime),9,Gae)])],6))),128)),(B(!0),V(Re,null,Ve(i.value,(M,U)=>(B(),V("div",{key:M.id,class:Ze(["dialog-assignment-box",["type-"+(M.type||"other"),{dragging:M.isDragging}]]),style:Sn(I(M)),draggable:"true",onDragstart:z=>b(z,M),onDrag:z=>S(z,M),onDragend:z=>k(z,M)},[d("div",zae,[d("div",Kae,[d("span",qae,J(M.start)+""+J(M.end)+" "+J(M.label),1)])]),d("div",Xae,[d("button",{class:"edit-btn",onClick:z=>P.$emit("edit-assignment",M)},"",8,Yae),d("button",{class:"delete-btn",onClick:z=>F(M.id)},"",8,Jae)]),d("div",{class:"resize-handle",onMousedown:mn(z=>w(z,M),["stop"]),title:"Drag to resize block"},null,40,Qae)],46,Wae))),128))],4)]))}},eie=yt(Zae,[["__scopeId","data-v-8f5880e4"]]),tie={class:"dialog-header"},rie={class:"dialog-header-actions"},nie={class:"dialog-content"},sie={style:{display:"flex","align-items":"flex-start"}},aie={class:"dialog-actions"},iie=["disabled"],oie={key:0},lie={key:1},cie={__name:"AideScheduleEditDialog",props:{aideName:String,timeTicks:Array,isTickInAnyBlock:Function,aideAssignments:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,showAddAssignment:Boolean,addAssignment:Function,onImportAssignments:Function,onSave:Function,onClose:Function,saving:Boolean,blocks:Array,teachers:Array,students:Array},setup(t){const e=t,r=se([]),n=se(!1),s=se(null);Ut(()=>{console.log("DEBUG: AideScheduleEditDialog mounted, blocks:",e.blocks)}),Vt(()=>e.blocks,f=>{console.log("DEBUG: props.blocks in AideScheduleEditDialog",f)});function i(){e.onSave(r.value)}function a(){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],n.value=!0}function o(f){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],s.value={...f},n.value=!0}function l(f){if(s.value){const h=r.value.findIndex(p=>p.id===f.id);h!==-1&&(r.value[h]={...f}),s.value=null}else r.value=[...r.value,f];n.value=!1}function c(){s.value=null,n.value=!1}function u(f){console.log("handleUpdateAssignments called with:",f),r.value=f}return(f,h)=>(B(),V("div",{class:"dialog-overlay",onClick:h[4]||(h[4]=(...p)=>t.onClose&&t.onClose(...p))},[d("div",{class:"edit-dialog",onClick:h[3]||(h[3]=mn(()=>{},["stop"]))},[d("div",tie,[d("h2",null,"Edit Schedule: "+J(t.aideName),1),d("div",rie,[d("button",{onClick:h[0]||(h[0]=(...p)=>t.onImportAssignments&&t.onImportAssignments(...p)),class:"btn btn-secondary btn-import-assignments"},"Import Aide Assignments"),d("button",{onClick:a,class:"btn btn-primary btn-add-assignment"},"Add Assignment"),d("button",{onClick:h[1]||(h[1]=(...p)=>t.onClose&&t.onClose(...p)),class:"btn btn-secondary close-btn"},"")])]),d("div",nie,[d("div",sie,[st(eie,{timeTicks:t.timeTicks,isTickInAnyBlock:t.isTickInAnyBlock,assignments:r.value,getAssignmentBoxStyle:t.getAssignmentBoxStyle,onAssignmentDragStart:t.onAssignmentDragStart,onAssignmentDrag:t.onAssignmentDrag,onAssignmentDragEnd:t.onAssignmentDragEnd,onResizeStart:t.onResizeStart,blocks:t.blocks,onEditAssignment:o,"onUpdate:assignments":u},null,8,["timeTicks","isTickInAnyBlock","assignments","getAssignmentBoxStyle","onAssignmentDragStart","onAssignmentDrag","onAssignmentDragEnd","onResizeStart","blocks"])]),n.value?(B(),Jr($ae,{key:0,teachers:t.teachers,students:t.students,assignment:s.value,onSave:l,onClose:c},null,8,["teachers","students","assignment"])):_e("",!0)]),d("div",aie,[d("button",{onClick:i,class:"btn btn-primary",disabled:t.saving},[t.saving?(B(),V("span",oie,"")):(B(),V("span",lie,"")),Oe(" "+J(t.saving?"Saving...":"Save Schedule"),1)],8,iie),d("button",{onClick:h[2]||(h[2]=(...p)=>t.onClose&&t.onClose(...p)),class:"btn btn-secondary"},"Cancel")])])]))}},uie={class:"master-schedule"},die={key:0,class:"no-time-table"},fie={class:"no-data-message"},hie={key:1,class:"schedule-graph-container"},pie={class:"timeline-header"},mie={class:"block-time"},gie={class:"block-name"},vie={class:"block-time"},xie={class:"aide-header"},yie={class:"aide-name"},Eie=["onClick"],_ie={class:"time-line-container"},bie={class:"time-blocks-background"},Sie={class:"assignment-bars"},Tie={class:"assignment-label"},gg=30,Aie={__name:"AideScheduleMasterTable",props:{paraeducators:Array,blocks:Array,getAideTimeBlocks:Function,getAideName:Function,currentTimeTable:Object},emits:["editAideAssignment","gotoTimeTableConfig"],setup(t,{emit:e}){const r=t,n=se([]);function s(x){const y=r.getAideTimeBlocks(x).filter(_=>_.assignment).map(_=>({id:_.id,label:_.assignment,type:_.assignmentType,start:_.start||_.displayTime.split(" - ")[0],end:_.end||_.displayTime.split(" - ")[1]}));return i(y)}function i(x){if(x.length===0)return[];const y=[...x].sort((A,E)=>f(A.start)-f(E.start)),_=[];let I=[];for(const A of y)I.length===0?I=[A]:I.some(T=>f(A.start)<f(T.end)&&f(A.end)>f(T.start))?I.push(A):(_.push(I),I=[A]);I.length>0&&_.push(I);const R=[];for(const A of _)A.forEach((E,T)=>{E.overlapIndex=T,E.overlapCount=A.length,R.push(E)});return R}function a(x){if(!x.overlapCount||x.overlapCount<=1)return 10;const y=40;return(60-(x.overlapCount*y+(x.overlapCount-1)*2))/2+x.overlapIndex*(y+2)}function o(x){if(!r.blocks||r.blocks.length===0)return 0;const y=r.blocks[0],_=r.blocks[r.blocks.length-1],I=f(y.startTime),A=f(_.endTime)-I,T=(f(x)-I)/A*100;return Math.max(0,Math.min(95,T))}function l(x,y){if(!r.blocks||r.blocks.length===0)return 10;const _=r.blocks[0],I=r.blocks[r.blocks.length-1],R=f(_.startTime),E=f(I.endTime)-R,T=f(x),S=(f(y)-T)/E*100;return Math.max(5,Math.min(95,S))}function c(x){if(!r.blocks||r.blocks.length===0)return 0;const y=r.blocks[0],_=r.blocks[r.blocks.length-1],I=f(y.startTime),A=f(_.endTime)-I,T=(f(x)-I)/A*100;return Math.max(0,Math.min(95,T))}function u(x,y){if(!r.blocks||r.blocks.length===0)return 10;const _=r.blocks[0],I=r.blocks[r.blocks.length-1],R=f(_.startTime),E=f(I.endTime)-R,T=f(x),S=(f(y)-T)/E*100;return Math.max(5,Math.min(95,S))}function f(x){const[y,_]=x.split(":").map(Number);return y*60+_}function h(x){var _;const y=((_=x.name)==null?void 0:_.toLowerCase())||"";return y.includes("lunch")?"lunch":y.includes("break")||y.includes("recess")?"break":y.includes("period")||y.includes("class")?"period":"other"}function p(x){const y=[...x].sort((R,A)=>f(R.startTime)-f(A.startTime)),_=[];for(const R of y){let A=!1;for(let E=0;E<_.length;E++){const T=_[E];if(!T.some(S=>f(R.startTime)<f(S.endTime)&&f(R.endTime)>f(S.startTime))){T.push(R),R.overlapIndex=E,A=!0;break}}A||(R.overlapIndex=_.length,_.push([R]))}const I=_.length;return y.map(R=>({...R,overlapIndex:R.overlapIndex,overlapCount:I}))}const m=Ae(()=>p(r.blocks||[])),g=Ae(()=>Math.max(...m.value.map(x=>x.overlapCount||1),1)),v=Ae(()=>g.value*gg);return Vt(()=>r.aideAssignments,x=>{n.value=x?JSON.parse(JSON.stringify(x)):[]},{immediate:!0}),(x,y)=>(B(),V("div",uie,[y[4]||(y[4]=d("h2",null,"Master Schedule View",-1)),fT(x.$slots,"tab-bar",{},void 0,!0),!t.currentTimeTable||!t.currentTimeTable.schedule||t.currentTimeTable.schedule.length===0?(B(),V("div",die,[d("div",fie,[y[1]||(y[1]=d("h3",null,"No Time Table Configured",-1)),y[2]||(y[2]=d("p",null,"You need to configure a time table first before you can create aide assignments.",-1)),d("button",{onClick:y[0]||(y[0]=_=>x.$emit("gotoTimeTableConfig")),class:"btn btn-primary"}," Go to Time Table Configuration ")])])):(B(),V("div",hie,[d("div",pie,[y[3]||(y[3]=d("div",{class:"aide-name-header"},"Aide Name",-1)),d("div",{class:"timeline-container",style:Sn({height:v.value+"px"})},[d("div",{class:"time-blocks-header",style:Sn({height:v.value+"px"})},[(B(!0),V(Re,null,Ve(m.value,_=>(B(),V("div",{key:_.id+"-"+_.overlapIndex,class:Ze(["time-block-header",h(_)]),style:Sn({left:o(_.startTime)+"%",width:l(_.startTime,_.endTime)+"%",top:_.overlapIndex*gg+"px",height:gg+"px",zIndex:10})},[d("div",mie,J(_.startTime),1),d("div",gie,J(_.name||_.type),1),d("div",vie,J(_.endTime),1)],6))),128))],4)],4)]),(B(!0),V(Re,null,Ve(t.paraeducators,_=>(B(),V("div",{key:_.id,class:"aide-row"},[d("div",xie,[d("span",yie,J(t.getAideName(_.id)),1),d("button",{onClick:I=>x.$emit("editAideAssignment",_.id),class:"btn btn-small btn-primary edit-btn"}," Edit ",8,Eie)]),d("div",_ie,[d("div",bie,[(B(!0),V(Re,null,Ve(t.blocks,I=>(B(),V("div",{key:I.id,class:Ze(["time-block-bg",h(I)]),style:Sn({left:o(I.startTime)+"%",width:l(I.startTime,I.endTime)+"%"})},null,6))),128)),(B(!0),V(Re,null,Ve(t.blocks.slice(0,-1),(I,R)=>(B(),V("div",{key:`bg-gap-${I.id}`,class:"time-block-bg-gap",style:Sn({left:o(I.endTime)-.5+"%",width:"1%"})},null,4))),128))]),d("div",Sie,[(B(!0),V(Re,null,Ve(s(_.id),I=>(B(),V("div",{key:I.id,class:Ze(["master-assignment-bar",I.type]),style:Sn({left:c(I.start)+"%",width:u(I.start,I.end)+"%",top:a(I)+"px"})},[d("span",Tie,J(I.label),1)],6))),128))])])]))),128))]))]))}},wie=yt(Aie,[["__scopeId","data-v-40c5158e"]]);function Qf(t){return(t==null?void 0:t.schedule)||[]}function Cie(t){let e="23:59",r="00:00";for(const n of t)n.startTime&&n.startTime<e&&(e=n.startTime),n.endTime&&n.endTime>r&&(r=n.endTime);return{min:e,max:r}}function Iie(t){return Ae(()=>{const{min:e,max:r}=Cie(t.value||t),[n,s]=e.split(":").map(Number),[i,a]=r.split(":").map(Number);let o=[],l=n,c=s;for(;l<i||l===i&&c<=a;){const f=l<10?`0${l}`:`${l}`,h=c<10?`0${c}`:`${c}`;o.push({time:`${f}:${h}`}),c+=5,c>=60&&(c=0,l++)}const u=(t.value||t).map(f=>f.startTime);for(const f of u)o.find(h=>h.time===f)||o.push({time:f});return o=Array.from(new Set(o.map(f=>f.time))).sort().map(f=>({time:f})),o})}function kie(t,e){return e.some(r=>r.startTime<=t&&r.endTime>=t)}const Die={class:"admin-aide-schedule-detailed"},Pie={class:"header"},Rie={class:"header-actions"},Fie=["disabled"],Oie={key:0},Nie={key:1},Mie={class:"content"},Lie={key:0,class:"error-message"},Bie={key:1,class:"error-message"},Uie={key:2,class:"loading"},$ie={key:3,class:"schedule-container"},Vie={key:0,class:"time-table-tab-bar"},Hie=["onClick"],Ok={__name:"AdminAideSchedule",setup(t){const e=Si(),r=ga(),{userList:n,fetchUsers:s}=La(),{students:i,fetchStudents:a}=Ma(),{appSettings:o,loadAppSettings:l,saveAppSettings:c}=Ws(),{labels:u}=mo(),{aideSchedule:f,loadAideSchedules:h,saveAideSchedule:p}=Hse(),{aideAssignment:m}=bx(),g=se(!0),v=se(!1),x=se(null),y=se({}),_=se({}),I=se(null);se([]);const R=se({}),A=Ae(()=>y.value&&Array.isArray(y.value.timeTables)&&y.value.timeTables.length>0?y.value.timeTables.map((le,de)=>({id:le.name?le.name.toLowerCase().replace(/\s+/g,"-"):`tt-${de}`,label:le.name||`Time Table ${de+1}`,...le})):y.value&&y.value.schedule?[{id:"default",label:y.value.label||"Default Schedule",schedule:y.value.schedule}]:[]);Ut(async()=>{console.log("Loaded timeTableData:",y.value),console.log("Computed allTimeTables:",A.value),A.value.length>0&&!I.value&&(I.value=A.value[0].id,console.log("Set selectedTimeTable:",I.value)),await l(),o.value.timeTables&&Array.isArray(o.value.timeTables)?(y.value={timeTables:o.value.timeTables},console.log("Set timeTableData to timeTables array:",y.value)):o.value.schedule&&(y.value={schedule:o.value.schedule},console.log("Set timeTableData to single schedule:",y.value))}),Vt(A,le=>{console.log("allTimeTables changed:",le)}),Vt(I,le=>{console.log("selectedTimeTable changed:",le)});const E=Ae(()=>{const le=A.value.find(de=>de.id===I.value)||A.value[0];return console.log("currentTimeTable:",le),le}),T=Ae(()=>Qf(E.value)),b=Iie(T);function S(le){return kie(le,T.value)}const k=Ae(()=>{var de;const le=(de=r.currentUser)==null?void 0:de.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(le)}),w=Ae(()=>{var le;return((le=n.value)==null?void 0:le.filter(de=>de.role==="paraeducator"))||[]}),D=Ae(()=>{var le;return((le=n.value)==null?void 0:le.filter(de=>de.role==="teacher"))||[]});Ae(()=>u.value);function N(le){if(!T.value)return[];console.log("DEBUG: getAideTimeBlocks called for aide:",le),console.log("DEBUG: aideSchedule.value:",f.value),console.log("DEBUG: aideAssignment.value:",m.value);const Se=(f.value[le]||{}).schedule||{};console.log("DEBUG: aideScheduleData:",Se);const Ie=Object.values(Se).filter(Te=>Te.start&&Te.end&&Te.label).map(Te=>({id:Te.id||Te.blockId||`assignment-${Date.now()}`,assignment:Te.label,assignmentType:Te.type||"custom",displayTime:`${Te.start} - ${Te.end}`,start:Te.start,end:Te.end}));return console.log("DEBUG: individualAssignments:",Ie),Ie.length>0?Ie:(console.log("DEBUG: No individual assignments found, adding test data"),[{id:"test-1",assignment:"Test Class Assignment",assignmentType:"class",displayTime:"08:00 - 09:00",start:"08:00",end:"09:00"},{id:"test-2",assignment:"Test Student Assignment",assignmentType:"student",displayTime:"10:00 - 11:00",start:"10:00",end:"11:00"}])}function F(le){const de=w.value.find(Se=>Se.id===le);return de?de.name||de.email:"Unknown Aide"}function P(le){x.value=le,te.value=!0}function O(){x.value=null}async function M(){try{v.value=!0;const de={...await l(),detailedAideSchedule:_.value};await c(de),console.log("Detailed aide schedule saved successfully")}catch(le){console.error("Error saving detailed aide schedule:",le)}finally{v.value=!1}}function U(){e.push("/admin")}async function z(){try{g.value=!0,await Promise.all([s(),a(),l()]);const le=await tr(Qe(Xe,"app_settings","global"));if(le.exists()){const de=le.data();_.value=de.detailedAideSchedule||{}}g.value=!1}catch(le){console.error("Error loading aide schedule data:",le),g.value=!1}}Ut(z);function j(le,de){return le.assignments&&le.assignments[de]||""}function H(){var Te,Ge;if(console.log("DEBUG: handleImportAssignments called"),console.log("DEBUG: editingAideId.value:",x.value),console.log("DEBUG: aideAssignment.value:",m.value),console.log("DEBUG: All aide IDs:",Object.keys(m.value)),console.log("DEBUG: All aide data:",Object.entries(m.value).map(([ke,$e])=>({id:ke,keys:Object.keys($e)}))),!x.value||!m.value[x.value]){console.log("DEBUG: No aide data found"),alert("No aide assignment data found for this aide.");return}const le=Y.value.length;if(le>0&&!confirm(`WARNING: This will remove ${le} current assignments and replace them with imported assignments.

Do you want to continue?`))return;const de=m.value[x.value];console.log("DEBUG: aideData:",de),console.log("DEBUG: aideData.classAssignment:",de.classAssignment),console.log("DEBUG: aideData.directAssignment:",de.directAssignment),console.log("DEBUG: Object.keys(aideData):",Object.keys(de)),console.log("DEBUG: aideData.schedule:",de.schedule),console.log("DEBUG: typeof aideData.schedule:",typeof de.schedule),console.log("DEBUG: Array.isArray(aideData.schedule):",Array.isArray(de.schedule));let Se=0;Y.value=[];const Ie=Qf(E.value);console.log("DEBUG: timeTableBlocks:",Ie),console.log("DEBUG: timeTableBlocks with period numbers:",Ie.map(ke=>({name:ke.name,periodNumber:ke.periodNumber,type:ke.type})));for(const ke of Ie){console.log("DEBUG: Processing block:",ke),console.log("DEBUG: Block periodNumber:",ke.periodNumber),console.log("DEBUG: Block name:",ke.name),console.log("DEBUG: Available classAssignment keys:",Object.keys(de.classAssignment||{}));let $e=ke.periodNumber;if(!$e&&ke.name){const ze=ke.name.match(/Period\s*(\d+)/i);ze&&($e=ze[1],console.log("DEBUG: Extracted periodNumber from name:",$e))}let Be="",We=[];if($e&&de.classAssignment&&de.classAssignment[$e]){console.log("DEBUG: Found class assignment for periodNumber:",$e);const ze=Array.isArray(de.classAssignment[$e])?de.classAssignment[$e]:[de.classAssignment[$e]];We=ze.filter(Boolean).map(Ee=>{const xe=D.value.find(be=>be.id===Ee);return xe?xe.name||xe.email:"Unknown Teacher"}),Be=ze.filter(Boolean).map(Ee=>`teacher:${Ee}`).join(","),console.log("DEBUG: Created assignment for periodNumber:",Be)}if(!Be&&ke.name&&de.classAssignment){console.log("DEBUG: Trying to match by block name:",ke.name);const ze=Object.keys(de.classAssignment).find(Ee=>Ee.toLowerCase().trim()===ke.name.toLowerCase().trim());if(ze){console.log("DEBUG: Found match by block name:",ze);const Ee=Array.isArray(de.classAssignment[ze])?de.classAssignment[ze]:[de.classAssignment[ze]];We=Ee.filter(Boolean).map(xe=>{const be=D.value.find(Ne=>Ne.id===xe);return be?be.name||be.email:"Unknown Teacher"}),Be=Ee.filter(Boolean).map(xe=>`teacher:${xe}`).join(","),console.log("DEBUG: Created assignment for block name:",Be)}}if(Be){const ze=ke.startTime,Ee=W(ke.startTime,30),xe=Be.split(",").map(Ne=>Ne.replace("teacher:","")).filter(Boolean),be={id:`imported-class-${Date.now()}-${Se}`,label:We.join(", "),start:ze,end:Ee,type:"class",blockId:`imported-block-${Se}`,teacherId:xe[0]||"",note:xe.length>1?`Multiple teachers: ${We.join(", ")}`:""};console.log("DEBUG: Adding new assignment:",be),Y.value.push(be),Se++}}if(console.log("DEBUG: Checking direct assignments..."),console.log("DEBUG: aideData.directAssignment:",de.directAssignment),console.log("DEBUG: typeof aideData.directAssignment:",typeof de.directAssignment),console.log("DEBUG: Array.isArray(aideData.directAssignment):",Array.isArray(de.directAssignment)),de.directAssignment){console.log("DEBUG: Found directAssignment:",de.directAssignment);const ke=Array.isArray(de.directAssignment)?de.directAssignment:[de.directAssignment];console.log("DEBUG: directStudentIds:",ke),console.log("DEBUG: students.value length:",(Te=i.value)==null?void 0:Te.length),console.log("DEBUG: students.value sample:",(Ge=i.value)==null?void 0:Ge.slice(0,3));for(const $e of ke)if(console.log("DEBUG: Processing studentId:",$e),$e&&$e!==""){const Be=i.value.find(We=>We.id===$e);if(console.log("DEBUG: Found student:",Be),Be){const We=`${dt(Be,"firstName")} ${dt(Be,"lastName")}`;console.log("DEBUG: Student name:",We);const ze=Qf(E.value).find(Ee=>Ee.type==="period");if(console.log("DEBUG: First period block:",ze),ze){const Ee=ze.startTime,xe=W(ze.startTime,30),be={id:`imported-direct-${Date.now()}-${Se}`,label:We,start:Ee,end:xe,type:"student",blockId:`imported-direct-block-${Se}`,studentId:$e};console.log("DEBUG: Adding direct assignment:",be),Y.value.push(be),Se++}}}}else console.log("DEBUG: No directAssignment found");if(console.log("DEBUG: Final importedCount:",Se),console.log("DEBUG: Final localAideAssignments:",Y.value),Se>0){alert(`Successfully imported ${Se} assignments with 30-minute time spans.

Types: Class assignments set to 'class', Direct assignments set to 'student'
Labels: Teacher names for class assignments, Student names for direct assignments
Duration: 30 minutes each`);const ke=x.value,$e=f.value[ke]||{},Be={};Y.value.forEach(ze=>{const Ee=ze.blockId||ze.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;Be[Ee]={id:ze.id,blockId:Ee,type:ze.type,label:ze.label,start:ze.start,end:ze.end,note:ze.note,teacherId:ze.teacherId,studentId:ze.studentId}});const We={...$e,schedule:Be};p(ke,We).then(()=>{h().then(()=>{O(),nl(()=>{P(ke)})})})}else alert("No matching assignments found in the Aide Assignment data for this schedule.")}function W(le,de){const[Se,Ie]=le.split(":").map(Number),Te=Se*60+Ie+de,Ge=Math.floor(Te/60),ke=Te%60;return`${Ge.toString().padStart(2,"0")}:${ke.toString().padStart(2,"0")}`}Vt(()=>Qf(E.value),le=>{const de={};for(const Se of le){const Ie=j(Se,x.value);de[Se.id]=Ie?[{id:Ie,value:Ie}]:[]}R.value=de},{immediate:!0});function K(le,de){Q.value=de,ye.value=le.clientY,X.value=b.value.findIndex(Se=>Se.time===de.start),q.value=0,le.dataTransfer.effectAllowed="move",le.dataTransfer.setData("text/plain",de.id)}function re(le,de){if(!Q.value||le.clientY===0)return;const Se=le.clientY-ye.value;q.value=Se,de._dragOffset=Se}function me(le,de){if(!Q.value)return;const Se=24,Ie=b.value.length;let Te=X.value+Math.round(q.value/Se);Te=Math.max(0,Math.min(Ie-2,Te));const Ge=b.value[Te].time,ke=b.value.findIndex(We=>We.time===de.end)-X.value;let $e=Te+ke;$e=Math.max(Te+1,Math.min(Ie-1,$e));const Be=b.value[$e].time;de.start=Ge,de.end=Be,de._dragOffset=0,Q.value=null,q.value=0}function ce(le){const de=b.value.findIndex(Be=>Be.time===le.start),Se=b.value.findIndex(Be=>Be.time===le.end),Ie=24;if(de===-1||Se===-1)return{display:"none"};const Te=de*Ie+(le._dragOffset||0),Ge=Math.max((Se-de)*Ie,Ie);let ke,$e;return le.type==="class"?(ke="#e8f4fd",$e="#4a90e2"):le.type==="student"?(ke="#f0f8e8",$e="#7cb342"):(ke="#f5f5f5",$e="#9e9e9e"),{position:"absolute",left:"20px",top:`${Te}px`,height:`${Ge}px`,width:"200px",minHeight:"24px",background:ke,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"#333",border:`2px solid ${$e}`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"grab",zIndex:2,transition:Q.value===le?"none":"top 0.2s"}}function pe(){const le=T.value&&T.value.length>0?T.value[0].startTime:"08:00",de=T.value&&T.value.length>0?T.value[0].endTime:"08:30";Y.value.push({id:`custom:${Date.now()}`,label:"",start:le,end:de,blockId:`block-${Date.now()}`})}const te=se(!1);se(null);const Q=se(null),ye=se(0),X=se(0),q=se(0),Y=se([]);Vt(x,le=>{if(!le){Y.value=[];return}const Se=(f.value[le]||{}).schedule||{};Y.value=Object.entries(Se).map(([Ie,Te])=>({id:Ie+"-"+(le||""),label:Te.label||"",start:Te.start,end:Te.end,blockId:Ie,type:Te.type||"lunch",teacherId:Te.teacherId||"",studentId:Te.studentId||"",note:Te.note||""}))},{immediate:!0});async function ne(le){if(x.value)try{v.value=!0;const de=f.value[x.value]||{},Se={};le.forEach(Te=>{const Ge=Te.blockId||Te.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;Se[Ge]={id:Te.id,blockId:Ge,type:Te.type,label:Te.label,start:Te.start,end:Te.end,note:Te.note,teacherId:Te.teacherId,studentId:Te.studentId}});const Ie={...de,schedule:Se};await p(x.value,Ie),await h(),O(),alert("Schedule saved!")}catch(de){alert("Failed to save schedule: "+de.message)}finally{v.value=!1}}Vt(()=>T,le=>{console.log("DEBUG: blocks",le)},{immediate:!0}),Vt(x,le=>{le&&(console.log("DEBUG: Opening edit dialog for aide",le),console.log("DEBUG: blocks passed to dialog",T.value))});function ve(le,de){console.log("Resize start:",de)}function ae(){pe()}return(le,de)=>(B(),V("div",Die,[d("div",Pie,[de[4]||(de[4]=d("h1",null,"Aide Schedule Management",-1)),d("div",Rie,[d("button",{onClick:M,class:"btn btn-primary",disabled:v.value},[v.value?(B(),V("span",Oie,"")):(B(),V("span",Nie,"")),Oe(" "+J(v.value?"Saving...":"Save Schedule"),1)],8,Fie),d("button",{onClick:U,class:"btn btn-secondary"},de[3]||(de[3]=[d("span",null,"",-1),Oe(" Back ")]))])]),d("div",Mie,[Z(r).currentUser?k.value?g.value?(B(),V("div",Uie," Loading aide schedules... ")):(B(),V("div",$ie,[st(wie,{paraeducators:w.value,blocks:T.value,getAideTimeBlocks:N,getAideName:F,currentTimeTable:E.value,onEditAideAssignment:P,onGotoTimeTableConfig:de[2]||(de[2]=()=>Z(e).push("/admin?tab=time-table"))},{"tab-bar":Nh(()=>[A.value.length>1?(B(),V("div",Vie,[(B(!0),V(Re,null,Ve(A.value,Se=>(B(),V("div",{key:Se.id,class:Ze(["tab-btn",{active:I.value===Se.id}]),onClick:Ie=>I.value=Se.id},J(Se.label),11,Hie))),128))])):_e("",!0)]),_:1},8,["paraeducators","blocks","currentTimeTable"]),x.value?(B(),Jr(cie,{key:0,aideName:F(x.value),timeTicks:Z(b),isTickInAnyBlock:S,aideAssignments:Y.value,getAssignmentBoxStyle:ce,onAssignmentDragStart:K,onAssignmentDrag:re,onAssignmentDragEnd:me,onResizeStart:ve,showAddAssignment:te.value,addAssignment:ae,onImportAssignments:H,onSave:ne,onClose:O,saving:v.value,blocks:T.value,teachers:D.value,students:Z(i)},null,8,["aideName","timeTicks","aideAssignments","showAddAssignment","saving","blocks","teachers","students"])):_e("",!0)])):(B(),V("div",Bie,[de[7]||(de[7]=d("h2",null,"Access Denied",-1)),de[8]||(de[8]=d("p",null,"You do not have permission to access this page.",-1)),d("button",{onClick:de[1]||(de[1]=Se=>Z(e).push("/")),class:"btn btn-primary"},"Go Home")])):(B(),V("div",Lie,[de[5]||(de[5]=d("h2",null,"Authentication Required",-1)),de[6]||(de[6]=d("p",null,"Please log in to access this page.",-1)),d("button",{onClick:de[0]||(de[0]=Se=>Z(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},jie={name:"AdminBackupRestore",setup(){const t=se([{id:"users",name:"Users"},{id:"students",name:"Students"},{id:"app_settings",name:"App Settings"},{id:"aideSchedules",name:"Aide Schedules"},{id:"aideAssignments",name:"Aide Assignments"}]),e=se(["users","students","app_settings"]),r=se(""),n=se(!1),s=se(!1),i=se(null),a=se(null),o=se([]),l=se(""),c=se("info"),u=xs({overwrite:!1,validate:!0}),f=se(null),h=async()=>{try{const N=wt(Xe,"backups"),F=ur(N,dn("createdAt","desc"),Ns(20)),P=await jt(F);o.value=P.docs.map(O=>({id:O.id,...O.data()}))}catch(N){console.error("Error loading backups:",N),I("Error loading backups","error")}},p=async()=>{if(e.value.length===0){I("Please select at least one collection","error");return}n.value=!0,I("Creating backup...","info");try{const N={metadata:{version:"1.0",createdAt:new Date().toISOString(),createdBy:"admin",description:r.value||"Manual backup"},collections:{}};for(const O of e.value)if(O==="app_settings"){const M=Qe(Xe,"app_settings","global"),U=await tr(M);N.collections[O]=U.exists()?U.data():{}}else{const M=wt(Xe,O),U=await jt(M);N.collections[O]=U.docs.map(z=>({id:z.id,...z.data()}))}const F=`backup_${Date.now()}`,P=Qe(Xe,"backups",F);await Kt(P,{name:r.value||`Backup ${new Date().toLocaleDateString()}`,createdAt:new Date().toISOString(),collections:e.value,size:JSON.stringify(N).length,data:N}),r.value="",await h(),I("Backup created successfully!","success")}catch(N){console.error("Error creating backup:",N),I("Error creating backup: "+N.message,"error")}finally{n.value=!1}},m=N=>{const F=N.target.files[0];if(!F)return;i.value=F,a.value=null;const P=new FileReader;P.onload=O=>{try{const M=JSON.parse(O.target.result);M.metadata&&M.collections?(a.value=M,I("Backup file loaded successfully","success")):I("Invalid backup file format","error")}catch{I("Error parsing JSON file","error")}},P.readAsText(F)},g=async()=>{if(!i.value||!a.value){I("Please select a valid backup file","error");return}if(u.overwrite){if(!confirm("This will overwrite existing data. This action cannot be undone. Continue?"))return}else if(!confirm("This will add new data without overwriting existing records. Continue?"))return;s.value=!0,I("Restoring backup...","info");try{for(const[N,F]of Object.entries(a.value.collections))if(N==="app_settings"||N==="appSettings"){const P=Qe(Xe,"app_settings","global");await Kt(P,F,{merge:!u.overwrite})}else{const P=wt(Xe,N);if(Array.isArray(F))for(const O of F){const M=Qe(P,O.id);u.overwrite?await Kt(M,O):await Kt(M,O,{merge:!0})}}I("Backup restored successfully!","success"),i.value=null,a.value=null,f.value&&(f.value.value="")}catch(N){console.error("Error restoring backup:",N),I("Error restoring backup: "+N.message,"error")}finally{s.value=!1}},v=N=>{const F=JSON.stringify(N.data,null,2),P=new Blob([F],{type:"application/json"}),O=URL.createObjectURL(P),M=document.createElement("a");M.href=O,M.download=`${N.name||"backup"}.json`,M.click(),URL.revokeObjectURL(O)},x=async N=>{if(confirm("Are you sure you want to delete this backup?"))try{await co(Qe(Xe,"backups",N)),await h(),I("Backup deleted successfully","success")}catch(P){console.error("Error deleting backup:",P),I("Error deleting backup","error")}},y=N=>{if(N===0)return"0 Bytes";const F=1024,P=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(N)/Math.log(F));return parseFloat((N/Math.pow(F,O)).toFixed(2))+" "+P[O]},_=N=>new Date(N).toLocaleString(),I=(N,F="info")=>{l.value=N,c.value=F,setTimeout(()=>{l.value=""},5e3)},R=se(!1),A=se(""),E=se(null),T=se({total:0,processed:0,updated:0}),b={1:1,P1:1,2:2,P2:2,3:3,P3:3,4:4,P4:4,5:5,P5:5,6:6,P6:6,7:7,SH:7,F:7};function S(N){const F=new Date().toLocaleTimeString();A.value+=`[${F}] ${N}
`,E.value&&(E.value.scrollTop=E.value.scrollHeight)}function k(N){if(!N||typeof N!="object")return{};const F={};return Object.entries(N).forEach(([P,O])=>{const M=b[P];M&&O&&(F[M]?(typeof F[M]=="string"&&typeof O=="object"||typeof F[M]=="object"&&typeof O=="object"&&O.coTeaching&&!F[M].coTeaching)&&(F[M]=O):F[M]=O)}),F}async function w(){var N,F;if(!R.value){R.value=!0,A.value="",T.value={total:0,processed:0,updated:0};try{S(" Starting schedule normalization...");const O=(await jt(wt(Xe,"students"))).docs;T.value.total=O.length,S(` Found ${O.length} students to process`);for(const M of O){const U=M.data(),z=M.id;if(T.value.processed++,(F=(N=U.app)==null?void 0:N.schedule)!=null&&F.periods){const j=U.app.schedule.periods,H=k(j),W=Object.keys(j).sort(),K=Object.keys(H).map(me=>String(me)).sort();(JSON.stringify(W)!==JSON.stringify(K)||JSON.stringify(j)!==JSON.stringify(H))&&(S(` Updating student ${z}:`),S(`   Before: ${JSON.stringify(j)}`),S(`   After:  ${JSON.stringify(H)}`),await Jd(Qe(Xe,"students",z),{"app.schedule.periods":H}),T.value.updated++)}T.value.processed%10===0&&await new Promise(j=>setTimeout(j,100))}S(" Schedule normalization complete!"),S(` Final stats: ${T.value.processed} processed, ${T.value.updated} updated`)}catch(P){S(` Error during normalization: ${P.message}`),console.error("Normalization error:",P)}finally{R.value=!1}}}function D(){A.value="",T.value={total:0,processed:0,updated:0}}return Ut(()=>{h()}),{collections:t,selectedCollections:e,backupName:r,isBackingUp:n,isRestoring:s,selectedFile:i,backupData:a,backups:o,statusMessage:l,statusType:c,restoreOptions:u,fileInput:f,createBackup:p,handleFileSelect:m,restoreBackup:g,downloadBackup:v,deleteBackup:x,formatFileSize:y,formatDate:_,normalizationInProgress:R,normalizationLog:A,normalizationLogRef:E,normalizationProgress:T,startNormalization:w,clearNormalizationLog:D}}},Gie={class:"admin-backup-restore"},Wie={class:"content"},zie={class:"section"},Kie={class:"backup-options"},qie={class:"option-group"},Xie={class:"checkbox-group"},Yie=["value","disabled"],Jie={class:"option-group"},Qie=["disabled"],Zie=["disabled"],eoe={key:0},toe={key:1},roe={class:"section"},noe={class:"restore-options"},soe={class:"file-upload"},aoe=["disabled"],ioe={key:0,class:"file-info"},ooe={key:0,class:"option-group"},loe={class:"backup-info"},coe={class:"collection-name"},uoe={class:"collection-count"},doe={key:1,class:"option-group"},foe={class:"checkbox-group"},hoe={class:"checkbox"},poe=["disabled"],moe={class:"checkbox"},goe=["disabled"],voe=["disabled"],xoe={key:0},yoe={key:1},Eoe={class:"section"},_oe={key:0,class:"backup-list"},boe={class:"backup-info"},Soe={class:"admin-action-btns"},Toe=["onClick"],Aoe=["onClick"],woe={key:1,class:"no-backups"},Coe={class:"section"},Ioe={class:"admin-action-btns"},koe=["disabled"],Doe={key:0,class:"progress-section"},Poe={class:"progress-bar"},Roe={class:"progress-text"},Foe={class:"log-container"};function Ooe(t,e,r,n,s,i){return B(),V("div",Gie,[e[22]||(e[22]=d("h1",null," Admin Tools",-1)),e[23]||(e[23]=d("div",{class:"header"},[d("h1",null,"Backup & Restore"),d("p",null,"Manage database backups and restore data from JSON files")],-1)),d("div",Wie,[d("div",zie,[e[11]||(e[11]=d("h2",null,"Create Backup",-1)),d("div",Kie,[d("div",qie,[e[9]||(e[9]=d("label",null,"Collections to backup:",-1)),d("div",Xie,[(B(!0),V(Re,null,Ve(n.collections,a=>(B(),V("label",{key:a.id,class:"checkbox"},[we(d("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>n.selectedCollections=o),value:a.id,disabled:n.isBackingUp},null,8,Yie),[[_t,n.selectedCollections]]),Oe(" "+J(a.name),1)]))),128))])]),d("div",Jie,[e[10]||(e[10]=d("label",null,"Backup name (optional):",-1)),we(d("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.backupName=a),placeholder:"e.g., backup-2024-01-15",disabled:n.isBackingUp},null,8,Qie),[[Je,n.backupName]])]),d("button",{onClick:e[2]||(e[2]=(...a)=>n.createBackup&&n.createBackup(...a)),disabled:n.isBackingUp||n.selectedCollections.length===0,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},[n.isBackingUp?(B(),V("span",eoe,"Creating Backup...")):(B(),V("span",toe,"Create Backup"))],8,Zie)])]),d("div",roe,[e[17]||(e[17]=d("h2",null,"Restore from Backup",-1)),d("div",noe,[d("div",soe,[e[12]||(e[12]=d("label",null,"Select JSON backup file:",-1)),d("input",{type:"file",onChange:e[3]||(e[3]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a)),accept:".json",disabled:n.isRestoring,ref:"fileInput"},null,40,aoe),n.selectedFile?(B(),V("p",ioe," Selected: "+J(n.selectedFile.name)+" ("+J(n.formatFileSize(n.selectedFile.size))+") ",1)):_e("",!0)]),n.backupData?(B(),V("div",ooe,[e[13]||(e[13]=d("label",null,"Collections in backup:",-1)),d("div",loe,[(B(!0),V(Re,null,Ve(n.backupData.collections,(a,o)=>(B(),V("div",{key:o,class:"collection-info"},[d("span",coe,J(o)+":",1),d("span",uoe,J(Array.isArray(a)?a.length:"1")+" items",1)]))),128))])])):_e("",!0),n.backupData?(B(),V("div",doe,[e[16]||(e[16]=d("label",null,"Restore options:",-1)),d("div",foe,[d("label",hoe,[we(d("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>n.restoreOptions.overwrite=a),disabled:n.isRestoring},null,8,poe),[[_t,n.restoreOptions.overwrite]]),e[14]||(e[14]=Oe(" Overwrite existing data "))]),d("label",moe,[we(d("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=a=>n.restoreOptions.validate=a),disabled:n.isRestoring},null,8,goe),[[_t,n.restoreOptions.validate]]),e[15]||(e[15]=Oe(" Validate data before restore "))])])])):_e("",!0),d("button",{onClick:e[6]||(e[6]=(...a)=>n.restoreBackup&&n.restoreBackup(...a)),disabled:n.isRestoring||!n.selectedFile||!n.backupData,class:"admin-action-btn warning",style:{"min-width":"140px","max-width":"140px"}},[n.isRestoring?(B(),V("span",xoe,"Restoring...")):(B(),V("span",yoe,"Restore Backup"))],8,voe)])]),d("div",Eoe,[e[18]||(e[18]=d("h2",null,"Backup History",-1)),n.backups.length>0?(B(),V("div",_oe,[(B(!0),V(Re,null,Ve(n.backups,a=>(B(),V("div",{key:a.id,class:"backup-item"},[d("div",boe,[d("h3",null,J(a.name||"Unnamed Backup"),1),d("p",null,"Created: "+J(n.formatDate(a.createdAt)),1),d("p",null,"Size: "+J(n.formatFileSize(a.size)),1),d("p",null,"Collections: "+J(a.collections.join(", ")),1)]),d("div",Soe,[d("button",{onClick:o=>n.downloadBackup(a),class:"admin-action-btn secondary"},"Download",8,Toe),d("button",{onClick:o=>n.deleteBackup(a.id),class:"admin-action-btn delete"},"Delete",8,Aoe)])]))),128))])):(B(),V("p",woe,"No backups found"))]),d("div",Coe,[e[19]||(e[19]=d("h2",null," Schedule Period Normalization",-1)),e[20]||(e[20]=d("p",{class:"description"}," This tool normalizes all student schedule periods to use numeric format (1-7) and merges co-teaching data from string periods (P1, P2, etc.) into numeric periods. ",-1)),e[21]||(e[21]=d("div",{class:"warning-box"},[d("strong",null," Important:"),Oe(" This operation will modify all student records. Make sure to backup first! ")],-1)),d("div",Ioe,[d("button",{onClick:e[7]||(e[7]=(...a)=>n.startNormalization&&n.startNormalization(...a)),disabled:n.normalizationInProgress,class:"admin-action-btn primary",style:{"min-width":"220px","max-width":"220px"}},J(n.normalizationInProgress?"Normalizing...":"Start Schedule Normalization"),9,koe),d("button",{onClick:e[8]||(e[8]=(...a)=>n.clearNormalizationLog&&n.clearNormalizationLog(...a)),class:"admin-action-btn secondary",style:{"min-width":"100px","max-width":"100px"}},"Clear Log")]),n.normalizationProgress.total>0?(B(),V("div",Doe,[d("div",Poe,[d("div",{class:"progress-fill",style:Sn({width:n.normalizationProgress.processed/n.normalizationProgress.total*100+"%"})},null,4)]),d("p",Roe," Progress: "+J(n.normalizationProgress.processed)+"/"+J(n.normalizationProgress.total)+" processed, "+J(n.normalizationProgress.updated)+" updated ",1)])):_e("",!0),d("div",Foe,[d("pre",{class:"log-output",ref:"normalizationLogRef"},J(n.normalizationLog),513)])])]),n.statusMessage?(B(),V("div",{key:0,class:Ze(["status-message",n.statusType])},J(n.statusMessage),3)):_e("",!0)])}const Nk=yt(jie,[["render",Ooe],["__scopeId","data-v-b8a17214"]]),Noe={class:"teacher-feedback-admin"},Moe={key:0,class:"status-message loading"},Loe={key:1,class:"status-message success"},Boe={key:2,class:"status-message error"},Uoe={class:"quick-actions"},$oe=["disabled"],Voe={class:"modal-body"},Hoe={class:"form-group"},joe={class:"form-group"},Goe={class:"form-group"},Woe={class:"form-group"},zoe={class:"modal-footer"},Koe=["disabled"],qoe={key:0},Xoe={key:1},Yoe={class:"setup-section"},Joe={key:0,class:"loading-state"},Qoe={key:1,class:"status-card"},Zoe={class:"status-header"},ele={class:"status-indicator"},tle={key:0,class:"status-badge success"},rle={key:1,class:"status-badge info"},nle={class:"status-details"},sle={key:0},ale={key:1},ile={key:0},ole={key:1,class:"info-note"},lle={key:0,class:"drive-actions"},cle=["href"],ule={key:2,class:"setup-options"},dle={class:"setup-card"},fle={class:"workspace-setup"},hle={class:"form-group"},ple=["disabled"],mle=["disabled"],gle={key:0},vle={key:1},xle={class:"forms-list"},yle={key:0,class:"loading"},Ele={key:1,class:"empty-state"},_le={key:2,class:"forms-grid"},ble={class:"form-header"},Sle={class:"admin-action-btns"},Tle=["onClick"],Ale=["onClick"],wle=["onClick"],Cle={class:"form-meta"},Ile={key:0},kle=["href"],Dle={key:1},Ple=["href"],Rle={key:2,class:"sheet-status pending"},Fle={__name:"AdminTeacherFeedback",setup(t){const{isLoading:e,error:r,successMessage:n,formsLoading:s,activeForms:i,createFeedbackFormWithUserAuth:a,deleteFeedbackForm:o,clearMessages:l}=Sx();Ma(),La();const c=ga(),u=se(!1),f=se(""),h=se(""),p=se(""),m=se(""),g=se(null),v=se(!0),x=se(""),y=se("info"),_=se(""),I=se(!1),R=Ae(()=>f.value.trim()&&p.value.trim()),A=async()=>{if(R.value)try{l();const{GoogleAuthProvider:F,signInWithPopup:P,getAuth:O}=await sa(async()=>{const{GoogleAuthProvider:K,signInWithPopup:re,getAuth:me}=await Promise.resolve().then(()=>rO);return{GoogleAuthProvider:K,signInWithPopup:re,getAuth:me}},void 0),M=O(),U=new F;U.addScope("https://www.googleapis.com/auth/drive.file"),U.addScope("https://www.googleapis.com/auth/spreadsheets");const z=await P(M,U),H=F.credentialFromResult(z).accessToken;if(!H)throw new Error("Failed to get Google access token. Please try again.");console.log(" Got Google access token for feedback form creation");const W={title:f.value.trim(),description:h.value.trim(),formUrl:p.value.trim(),sheetTemplateUrl:m.value.trim(),createdBy:c.user.uid};await a(W,H),E()}catch(F){console.error("Error adding form:",F),F.code==="auth/popup-closed-by-user"?F.value=" Authentication cancelled. Please try again and allow Google Drive access.":F.code==="auth/popup-blocked"?F.value=" Popup blocked. Please allow popups for this site and try again.":F.value=F.message||"Failed to create feedback form"}},E=()=>{u.value=!1,f.value="",h.value="",p.value="",m.value="",l()},T=F=>{window.open(F.formUrl,"_blank")},b=async F=>{window.open(F.formUrl,"_blank")},S=async F=>{if(confirm(`Are you sure you want to delete "${F.title}"?`))try{await o(F.id)}catch(P){console.error("Error deleting form:",P)}},k=F=>F?(F.seconds?new Date(F.seconds*1e3):new Date(F)).toLocaleDateString():"N/A",w=async()=>{try{v.value=!0;const{getFunctions:F,httpsCallable:P}=await sa(async()=>{const{getFunctions:z,httpsCallable:j}=await Promise.resolve().then(()=>h0);return{getFunctions:z,httpsCallable:j}},void 0),O=F(),U=await P(O,"getUserSchool")();U.data.success&&U.data.school?g.value=U.data.school:await D()}catch(F){console.error("Error loading school info:",F),x.value="Error loading Google Drive settings",y.value="error"}finally{v.value=!1}},D=async()=>{try{const{getFunctions:F,httpsCallable:P}=await sa(async()=>{const{getFunctions:z,httpsCallable:j}=await Promise.resolve().then(()=>h0);return{getFunctions:z,httpsCallable:j}},void 0),O=F(),U=await P(O,"getOrCreateSchool")();U.data.success&&(g.value=U.data.school,U.data.school.isNew&&(x.value="Google Drive settings initialized! You can now create feedback forms.",y.value="success"))}catch(F){console.error("Error creating school:",F),x.value="Error initializing Google Drive settings: "+F.message,y.value="error"}},N=async()=>{if(_.value.trim()){I.value=!0,x.value="";try{const{getFunctions:F,httpsCallable:P}=await sa(async()=>{const{getFunctions:z,httpsCallable:j}=await Promise.resolve().then(()=>h0);return{getFunctions:z,httpsCallable:j}},void 0),O=F(),U=await P(O,"createSharedDrive")({schoolId:g.value.schoolId,driveName:_.value.trim()});if(U.data.requiresManualCreation){const z=U.data.instructions,j=U.data.serviceAccountEmail;x.value=`Google Workspace setup requires manual configuration:

1. ${z.join(`
2. `)}

Service Account Email: ${j}`,y.value="info"}else U.data.success?(x.value="Google Workspace setup completed successfully!",y.value="success",await w(),_.value=""):(x.value="Error setting up Google Workspace: "+U.data.error,y.value="error")}catch(F){console.error("Error setting up workspace:",F),x.value="Error setting up Google Workspace: "+F.message,y.value="error"}finally{I.value=!1}}};return Ut(async()=>{await w()}),(F,P)=>{var O;return B(),V("div",Noe,[P[35]||(P[35]=d("div",{class:"admin-header"},[d("h2",null,"Teacher Feedback Forms"),d("p",{class:"admin-description"}," Create and manage Google Forms for collecting teacher feedback on students. Each case manager will have their own response sheet automatically created when they first use the form. ")],-1)),Z(e)?(B(),V("div",Moe," Processing... ")):_e("",!0),Z(n)?(B(),V("div",Loe,J(Z(n)),1)):_e("",!0),Z(r)?(B(),V("div",Boe,J(Z(r)),1)):_e("",!0),d("div",Uoe,[d("button",{onClick:P[0]||(P[0]=M=>u.value=!0),class:"primary-btn",disabled:Z(e)},P[7]||(P[7]=[d("span",null,"",-1),Oe(" Add Form ")]),8,$oe)]),u.value?(B(),V("div",{key:3,class:"modal-overlay",onClick:E},[d("div",{class:"modal-content",onClick:P[5]||(P[5]=mn(()=>{},["stop"]))},[d("div",{class:"modal-header"},[P[8]||(P[8]=d("h3",null,"Add Teacher Feedback Form",-1)),d("button",{onClick:E,class:"close-btn"},"")]),d("div",Voe,[d("div",Hoe,[P[9]||(P[9]=d("label",null,"Form Title:",-1)),we(d("input",{type:"text","onUpdate:modelValue":P[1]||(P[1]=M=>f.value=M),placeholder:"Enter a descriptive title for this form",class:"form-input",required:""},null,512),[[Je,f.value]])]),d("div",joe,[P[10]||(P[10]=d("label",null,"Form Description (optional):",-1)),we(d("textarea",{"onUpdate:modelValue":P[2]||(P[2]=M=>h.value=M),placeholder:"Brief description of what this form is for",class:"form-textarea",rows:"3"},null,512),[[Je,h.value]])]),d("div",Goe,[P[11]||(P[11]=d("label",null,"Google Form URL:",-1)),we(d("input",{type:"url","onUpdate:modelValue":P[3]||(P[3]=M=>p.value=M),placeholder:"https://docs.google.com/forms/d/your-form-id/viewform",class:"form-input",required:""},null,512),[[Je,p.value]]),P[12]||(P[12]=d("small",{class:"form-help"},"Paste the Google Form URL here (viewform link)",-1))]),d("div",Woe,[P[13]||(P[13]=d("label",null,"Google Sheet Template URL (optional):",-1)),we(d("input",{type:"url","onUpdate:modelValue":P[4]||(P[4]=M=>m.value=M),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id/edit",class:"form-input"},null,512),[[Je,m.value]]),P[14]||(P[14]=d("small",{class:"form-help"},"Optional: Provide a Google Sheet template that case managers can duplicate for collecting responses",-1))]),P[15]||(P[15]=d("div",{class:"form-info"},[d("h4",null," Setup Instructions:"),d("ol",null,[d("li",null,"Create your Google Form manually with the questions you want"),d("li",null,'Make sure to enable "Collect email addresses" in form settings'),d("li",null,"Copy the form's view URL and paste it above"),d("li",null,'Click "Add Form" - a Google Sheet will be automatically created for responses')]),d("p",{class:"info-note"},[d("strong",null," Automatic:"),Oe(" A Google Sheet will be created immediately when you add the form. Each case manager will get their own copy of this sheet when they use the form. ")])],-1))]),d("div",zoe,[d("button",{onClick:E,class:"secondary-btn"},"Cancel"),d("button",{onClick:A,class:"primary-btn",disabled:!R.value||Z(e)},[Z(e)?(B(),V("span",qoe,"Adding Form...")):(B(),V("span",Xoe,"Add Form"))],8,Koe)])])])):_e("",!0),d("div",Yoe,[P[25]||(P[25]=d("h3",null,"Google Drive Setup",-1)),P[26]||(P[26]=d("p",{class:"section-description"}," Configure how the system accesses Google Drive for creating feedback forms and response sheets. ",-1)),v.value?(B(),V("div",Joe,P[16]||(P[16]=[d("p",null,"Loading Google Drive settings...",-1)]))):g.value?(B(),V("div",Qoe,[d("div",Zoe,[d("h4",null,J(g.value.name||"Your School"),1),d("div",ele,[g.value.sharedDriveId?(B(),V("span",tle,"  Google Workspace Mode ")):(B(),V("span",rle,"  Personal Google Drive Mode "))])]),d("div",nle,[d("p",null,[P[17]||(P[17]=d("strong",null,"Current Mode:",-1)),g.value.sharedDriveId?(B(),V("span",sle,"Google Workspace Shared Drive")):(B(),V("span",ale,"Personal Google Drive"))]),g.value.sharedDriveId?(B(),V("p",ile,[P[18]||(P[18]=d("strong",null,"Shared Drive:",-1)),Oe(" "+J(g.value.sharedDriveName||"CaseManageVue Templates"),1)])):_e("",!0),g.value.sharedDriveId?_e("",!0):(B(),V("p",ole,P[19]||(P[19]=[d("strong",null,"Note:",-1),Oe(" Files will be created in your personal Google Drive when you create forms. ")])))]),g.value.sharedDriveId?(B(),V("div",lle,[d("a",{href:`https://drive.google.com/drive/folders/${g.value.sharedDriveId}`,target:"_blank",class:"secondary-btn"},"  Open Shared Drive ",8,cle)])):_e("",!0)])):_e("",!0),!v.value&&!((O=g.value)!=null&&O.sharedDriveId)?(B(),V("div",ule,[P[24]||(P[24]=d("div",{class:"setup-card"},[d("h4",null," Personal Google Drive (Recommended for Testing)"),d("p",{class:"setup-description"}," Use your personal Google account to create forms and sheets. Files will be created in your personal Drive. "),d("div",{class:"setup-note"},[d("strong",null," Ready to use:"),Oe(" No additional setup required. When you create forms, you'll be prompted to sign in with your Google account. ")])],-1)),d("div",dle,[P[22]||(P[22]=d("h4",null," Google Workspace (For Organizations)",-1)),P[23]||(P[23]=d("p",{class:"setup-description"}," Use a Google Workspace Shared Drive for organization-wide access and management. ",-1)),d("div",fle,[d("div",hle,[P[20]||(P[20]=d("label",{for:"workspaceDriveName"},"Shared Drive Name:",-1)),we(d("input",{id:"workspaceDriveName","onUpdate:modelValue":P[6]||(P[6]=M=>_.value=M),type:"text",class:"form-input",placeholder:"e.g., CaseManageVue - School Name",disabled:I.value},null,8,ple),[[Je,_.value]])]),d("button",{onClick:N,class:"primary-btn",disabled:I.value||!_.value.trim()},[I.value?(B(),V("span",gle," Setting up...")):(B(),V("span",vle,"Setup Google Workspace"))],8,mle),P[21]||(P[21]=d("div",{class:"workspace-note"},[d("strong",null,"Note:"),Oe(" This requires Google Workspace admin permissions and manual configuration. ")],-1))])])])):_e("",!0),x.value?(B(),V("div",{key:3,class:Ze(["alert",y.value])},J(x.value),3)):_e("",!0)]),d("div",xle,[P[34]||(P[34]=d("h3",null,"Feedback Forms",-1)),Z(s)?(B(),V("div",yle,"Loading forms...")):Z(i).length===0?(B(),V("div",Ele,P[27]||(P[27]=[d("p",null,"No feedback forms added yet.",-1),d("p",null,'Click "Add Form" to get started.',-1)]))):(B(),V("div",_le,[(B(!0),V(Re,null,Ve(Z(i),M=>(B(),V("div",{key:M.id,class:"form-card"},[d("div",ble,[d("h4",null,J(M.title||"Untitled Form"),1),d("div",Sle,[d("button",{onClick:U=>T(M),class:"admin-action-btn info",title:"View Form"},"  ",8,Tle),d("button",{onClick:U=>b(M),class:"admin-action-btn edit",title:"Edit Form"},"  ",8,Ale),d("button",{onClick:U=>S(M),class:"admin-action-btn delete",title:"Delete Form"},"  ",8,wle)])]),d("div",Cle,[d("p",null,[P[28]||(P[28]=d("strong",null,"Created:",-1)),Oe(" "+J(k(M.createdAt)),1)]),M.description?(B(),V("p",Ile,[P[29]||(P[29]=d("strong",null,"Description:",-1)),Oe(" "+J(M.description),1)])):_e("",!0),d("p",null,[P[30]||(P[30]=d("strong",null,"Form URL:",-1)),P[31]||(P[31]=Oe()),d("a",{href:M.formUrl,target:"_blank",class:"form-link"},"Open Form",8,kle)]),M.spreadsheetUrl?(B(),V("p",Dle,[P[32]||(P[32]=d("strong",null,"Response Sheet:",-1)),d("a",{href:M.spreadsheetUrl,target:"_blank",class:"form-link"},"View Responses",8,Ple),P[33]||(P[33]=d("span",{class:"sheet-status"}," Auto-created",-1))])):(B(),V("p",Rle," Sheet will be created when form is first used"))])]))),128))]))])])}}},Ole=yt(Fle,[["__scopeId","data-v-4e2713cd"]]);function Nle(t,e,r){const{getLabel:n}=mo(),s=Ae(()=>{var h;const f=((h=r.value)==null?void 0:h.numPeriods)||7;return Array.from({length:f},(p,m)=>({value:m.toString(),label:n(m+1),periodIndex:m}))}),i=Ae(()=>{const f=new Set;return console.log(" Finding teachers from students:",t.value.length),t.value.forEach(h=>{var p,m,g,v,x;(p=h.aeries)!=null&&p.schedule&&Object.values(h.aeries.schedule).forEach(y=>{y&&y.teacherId&&(console.log(" Found teacher ID in aeries.schedule:",y.teacherId),f.add(String(y.teacherId)))}),(g=(m=h.app)==null?void 0:m.schedule)!=null&&g.periods&&Object.values(h.app.schedule.periods).forEach(y=>{y&&(console.log(" Found teacher ID in app.schedule.periods:",y),f.add(String(y)))});for(let y=1;y<=7;y++){const _=`period${y}TeacherId`,I=h[_]||((v=h.aeries)==null?void 0:v[_])||((x=h.app)==null?void 0:x[_]);I&&(console.log(" Found teacher ID in",_,":",I),f.add(String(I)))}}),console.log(" Unique teacher IDs found:",Array.from(f)),console.log(" Users available:",e.value.length),Array.from(f).map(h=>{let p=e.value.find(m=>m.id===h);return!p&&/^\d+$/.test(h)&&(p=e.value.find(m=>m.aeriesId===h)),{id:h,name:p?p.name||`${p.firstName} ${p.lastName}`:`Teacher ${h}`,actualUserId:p?p.id:null}}).sort((h,p)=>h.name.localeCompare(p.name))}),a=(f,h=[])=>{let p=-1;if(/^\d+$/.test(f))p=parseInt(f)-1;else if(f==="SH")p=6;else if(f.startsWith("Per")){const m=f.replace("Per","");/^\d+$/.test(m)&&(p=parseInt(m)-1)}return h.includes(p.toString())};return{availablePeriods:s,availableTeachers:i,getStudentsForTeachers:(f,h=[])=>t.value.filter(p=>{var g,v,x,y,_,I,R;if(!(((v=(g=p.app)==null?void 0:g.flags)==null?void 0:v.flag1)||p.flag1||!1))return!1;if((x=p.aeries)!=null&&x.schedule){const A=Object.entries(p.aeries.schedule);for(let E=0;E<A.length;E++){const[T,b]=A[E];if(b&&b.teacherId&&f.includes(String(b.teacherId))&&!a(T,h))return!0}}if((_=(y=p.app)==null?void 0:y.schedule)!=null&&_.periods){const A=Object.entries(p.app.schedule.periods);for(let E=0;E<A.length;E++){const[T,b]=A[E];if(b&&f.includes(String(b))&&!a(T,h))return!0}}for(let A=0;A<7;A++){const E=`period${A+1}TeacherId`,T=p[E]||((I=p.aeries)==null?void 0:I[E])||((R=p.app)==null?void 0:R[E]);if(T&&f.includes(String(T))&&!h.includes(A.toString()))return!0}return!1}),getStudentTeacherPeriods:(f,h,p=[])=>{var g,v,x,y,_;const m=[];if((g=f.aeries)!=null&&g.schedule){const I=Object.entries(f.aeries.schedule);for(let R=0;R<I.length;R++){const[A,E]=I[R];if(E&&E.teacherId&&h.includes(String(E.teacherId))&&!a(A,p)){let T=e.value.find(S=>S.id===String(E.teacherId));!T&&/^\d+$/.test(E.teacherId)&&(T=e.value.find(S=>S.aeriesId===String(E.teacherId)));const b=n(R+1);m.push({period:b,teacherName:T?T.name||`${T.firstName} ${T.lastName}`:`Teacher ${E.teacherId}`})}}}if((x=(v=f.app)==null?void 0:v.schedule)!=null&&x.periods){const I=Object.entries(f.app.schedule.periods);for(let R=0;R<I.length;R++){const[A,E]=I[R];if(E&&h.includes(String(E))&&!a(A,p)){const T=e.value.find(S=>S.id===String(E)),b=n(parseInt(A));m.push({period:b,teacherName:T?T.name||`${T.firstName} ${T.lastName}`:`Teacher ${E}`})}}}for(let I=0;I<7;I++){const R=`period${I+1}TeacherId`,A=f[R]||((y=f.aeries)==null?void 0:y[R])||((_=f.app)==null?void 0:_[R]);if(A&&h.includes(String(A))&&!p.includes(I.toString())){let E=e.value.find(b=>b.id===String(A));!E&&/^\d+$/.test(A)&&(E=e.value.find(b=>b.aeriesId===String(A)));const T=n(I+1);m.push({period:T,teacherName:E?E.name||`${E.firstName} ${E.lastName}`:`Teacher ${A}`})}}return m},generateCSV:()=>{const f=["Student ID","First Name","Last Name","Grade","Case Manager","Assessment Accommodations","Services"],h=t.value.map(m=>{var R,A,E,T,b;const g=dt(m,"firstName")||"",v=dt(m,"lastName")||"",x=dt(m,"grade")||"",y=m.caseManagerId||((A=(R=m.app)==null?void 0:R.studentData)==null?void 0:A.caseManagerId)||"",_=((T=(E=m.app)==null?void 0:E.accommodations)==null?void 0:T.assessment)||[],I=((b=m.app)==null?void 0:b.classServices)||[];return[m.id||"",g,v,x,y,Array.isArray(_)?_.join("; "):_,Array.isArray(I)?I.map(S=>S.name||S).join("; "):I]});return[f,...h].map(m=>m.map(g=>`"${String(g).replace(/"/g,'""')}"`).join(",")).join(`
`)},downloadCSV:(f,h)=>{const p=new Blob([f],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");m.href=URL.createObjectURL(p),m.download=h,m.click(),URL.revokeObjectURL(m.href)},isPeriodExcluded:a}}const vg="casemanage_linked_sheet_id",Zf="Student Data";function iy(){const t=se(!1),e=se(localStorage.getItem(vg)||""),r=se(""),n=se(null),s=se("idle"),i=se(""),a=se(null),o=se("");let l=null;const c=()=>new Promise((E,T)=>{var S,k,w;if((k=(S=window.google)==null?void 0:S.accounts)!=null&&k.oauth2&&((w=window.gapi)!=null&&w.client)){E();return}const b=document.createElement("script");b.src="https://accounts.google.com/gsi/client",b.onload=()=>{a.value=window.google.accounts.oauth2.initTokenClient({client_id:"756483333257-kh1cv865e0buv0cv9g0v1h7ghq7s0e70.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",callback:N=>{N.access_token?(o.value=N.access_token,t.value=!0,window.gapi.client.setToken({access_token:N.access_token}),l&&(l(N),l=null)):(console.error("Failed to get access token"),l&&(l(null),l=null))}});const D=document.createElement("script");D.src="https://apis.google.com/js/api.js",D.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]}),E()})},document.head.appendChild(D)},b.onerror=()=>T(new Error("Failed to load Google Identity Services")),document.head.appendChild(b)}),u=async()=>{if(!a.value)throw new Error("Google auth not initialized");if(o.value)try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:"1BxiMVs0XRA5nFMRigcZ_6g3D6P6dNTMhvBSm1x7kFNg"}),{access_token:o.value}}catch{console.log("Token expired, requesting new one"),o.value=""}return new Promise((E,T)=>{l=E;const b=setTimeout(()=>{l=null,T(new Error("Token request timed out"))},3e4),S=a.value.callback;a.value.callback=k=>{clearTimeout(b),a.value.callback=S,k.access_token?(o.value=k.access_token,t.value=!0,window.gapi.client.setToken({access_token:k.access_token}),l&&(l(k),l=null)):(console.error("Failed to get access token:",k),l&&(l(null),l=null))};try{a.value.requestAccessToken()}catch(k){clearTimeout(b),a.value.callback=S,T(k)}})},f=async(E,T=[])=>{var b;try{s.value="syncing",i.value="Creating new Google Sheet...",o.value||await u();const k=((b=Wo().currentUser)==null?void 0:b.email)||"",w=await window.gapi.client.sheets.spreadsheets.create({properties:{title:`CaseManage Student Data - ${new Date().toLocaleDateString()}`,locale:"en_US",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},sheets:[{properties:{title:Zf,gridProperties:{rowCount:1e3,columnCount:9,frozenRowCount:1}}}]}),D=w.result.spreadsheetId;e.value=D,r.value=`https://docs.google.com/spreadsheets/d/${D}`,localStorage.setItem(vg,D),await h(E,T);const N=w.result.sheets[0].properties.sheetId;return await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:D,resource:{requests:[{repeatCell:{range:{sheetId:N,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:N,dimension:"COLUMNS",startIndex:0,endIndex:9}}},{addProtectedRange:{protectedRange:{range:{sheetId:N},description:`Read-only protection for ${Zf}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),s.value="success",i.value="Sheet created and linked successfully!",n.value=new Date,window.open(r.value,"_blank"),{spreadsheetId:D,url:r.value}}catch(S){throw console.error("Error creating sheet:",S),s.value="error",i.value=`Failed to create sheet: ${S.message}`,S}},h=async(E,T=[])=>{if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{s.value="syncing",i.value="Updating Google Sheet...",o.value||await u();const b=E.filter(N=>{var P,O;return((O=(P=N.app)==null?void 0:P.flags)==null?void 0:O.flag1)||N.flag1||!1});console.log(" Google Sheets - Original students:",E.length),console.log(" Google Sheets - Filtered students (separate setting only):",b.length),console.log(" Google Sheets - Students data:",b),b&&b.length>0&&console.log(" Google Sheets - First student:",b[0]);const S=["Student ID","First Name","Last Name","Grade","Case Manager","Separate Setting","Assessment Accommodations","Services","Last Updated"],k=b.map(N=>{var F,P,O,M,U,z,j,H,W,K,re,me;return console.log(" Processing student:",N.id,{firstName:N.firstName||((P=(F=N.app)==null?void 0:F.studentData)==null?void 0:P.firstName),lastName:N.lastName||((M=(O=N.app)==null?void 0:O.studentData)==null?void 0:M.lastName),grade:N.grade||((z=(U=N.app)==null?void 0:U.studentData)==null?void 0:z.grade)}),[N.id||"",N.firstName||((H=(j=N.app)==null?void 0:j.studentData)==null?void 0:H.firstName)||"",N.lastName||((K=(W=N.app)==null?void 0:W.studentData)==null?void 0:K.lastName)||"",N.grade||((me=(re=N.app)==null?void 0:re.studentData)==null?void 0:me.grade)||"",m(N,T)||"",x(N)||"",g(N,"assessment")||"",v(N)||"",new Date().toLocaleString()]}),w=[S,...k];console.log(" Google Sheets - Data to write:",w),await window.gapi.client.sheets.spreadsheets.values.clear({spreadsheetId:e.value,range:`${Zf}!A:Z`});const D=await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${Zf}!A1`,valueInputOption:"RAW",resource:{values:w}});console.log(" Google Sheets - Update response:",D),s.value="success",i.value=`Updated ${k.length} students (separate setting only)`,n.value=new Date}catch(b){throw console.error("Error updating sheet:",b),s.value="error",i.value=`Failed to update: ${b.message}`,b.status===401&&(o.value="",await u()),b}},p=()=>{e.value="",r.value="",localStorage.removeItem(vg),s.value="idle",i.value="",n.value=null},m=(E,T=[])=>{var k,w;const b=E.caseManagerId||((w=(k=E.app)==null?void 0:k.studentData)==null?void 0:w.caseManagerId)||E.casemanager_id;if(!b)return"Not Assigned";const S=T.find(D=>D.id===b);return S&&(S.name||`${S.firstName} ${S.lastName}`||S.email)||b},g=(E,T)=>{var S,k,w;const b=((k=(S=E.app)==null?void 0:S.accommodations)==null?void 0:k[T])||((w=E.accommodations)==null?void 0:w[T])||[];return Array.isArray(b)?b.join(", "):b},v=E=>{var b;const T=((b=E.app)==null?void 0:b.classServices)||E.classServices||[];return Array.isArray(T)?T.map(S=>S.name||S).join(", "):T},x=E=>{var b,S;return((S=(b=E.app)==null?void 0:b.flags)==null?void 0:S.flag1)||E.flag1||!1?"True":"False"},y=async()=>{if(!e.value)return!1;try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:e.value}),!0}catch(E){return E.status===404&&p(),!1}},_=async(E,T,b,S=[],k=[])=>{var w;if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{o.value||await u();const N=((w=Wo().currentUser)==null?void 0:w.email)||"";console.log(" Creating custom tab:",E,"for teachers:",b,"excluding periods:",k);const P=(await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{addSheet:{properties:{title:E,gridProperties:{rowCount:1e3,columnCount:12,frozenRowCount:1}}}}]}})).result.replies[0].addSheet.properties.sheetId;console.log(" Created sheet with ID:",P);const O=T.filter(j=>{var W,K;return((K=(W=j.app)==null?void 0:W.flags)==null?void 0:K.flag1)||j.flag1||!1});console.log(" Custom tab - Original students:",T.length),console.log(" Custom tab - Filtered students (separate setting only):",O.length);const M=["Student ID","First Name","Last Name","Grade","Case Manager","Period","Teacher","Subject","Separate Setting","Assessment Accommodations","Services","Last Updated"],U=[];O.forEach(j=>{const H=I(j,b,S,k);console.log(" Student:",j.id,"Periods found:",H.length,"Excluded periods:",k),H.forEach(W=>{console.log(" Adding row for period:",W.period,"teacher:",W.teacherName,"source:",W.source||"unknown")}),H.forEach(W=>{var K,re,me,ce,pe,te;U.push([j.id||"",j.firstName||((re=(K=j.app)==null?void 0:K.studentData)==null?void 0:re.firstName)||"",j.lastName||((ce=(me=j.app)==null?void 0:me.studentData)==null?void 0:ce.lastName)||"",j.grade||((te=(pe=j.app)==null?void 0:pe.studentData)==null?void 0:te.grade)||"",m(j,S)||"",W.period||"",W.teacherName||"",W.subject||"",x(j)||"",g(j,"assessment")||"",v(j)||"",new Date().toLocaleString()])})});const z=[M,...U];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${E}!A1`,valueInputOption:"RAW",resource:{values:z}}),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{repeatCell:{range:{sheetId:P,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:P,dimension:"COLUMNS",startIndex:0,endIndex:12}}},{addProtectedRange:{protectedRange:{range:{sheetId:P},description:`Read-only protection for ${E}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),console.log(" Custom tab created successfully with",U.length,"rows and read-only protection"),{sheetId:P,rowCount:U.length}}catch(D){throw console.error("Error creating custom tab:",D),D}},I=(E,T,b=[],S=[])=>{var D,N,F,P,O;const k=[];console.log(" getStudentPeriodsForTeachers for student:",E.id,"teacherIds:",T,"excludedPeriods:",S,"excludedPeriods array:",JSON.stringify(S));const w=M=>{let U=-1;if(/^\d+$/.test(M))U=parseInt(M)-1;else if(M==="SH")U=6;else if(M.startsWith("Per")){const z=M.replace("Per","");/^\d+$/.test(z)&&(U=parseInt(z)-1)}return console.log(" Period",M,"maps to index",U,"excluded?",S.includes(U.toString())),S.includes(U.toString())};if((D=E.aeries)!=null&&D.schedule){const M=Object.entries(E.aeries.schedule);console.log(" Aeries schedule entries:",M.length);for(let U=0;U<M.length;U++){const[z,j]=M[U],H=w(z);console.log(" Checking aeries period key:",z,"teacherId:",j==null?void 0:j.teacherId,"excluded?",H),j&&j.teacherId&&T.includes(String(j.teacherId))&&(H?console.log(" Excluding aeries period",z):(console.log(" Including aeries period",z),k.push({period:z.replace("period",""),teacherId:j.teacherId,teacherName:R(j.teacherId,b),subject:j.subject||"",source:"aeries"})))}}if((F=(N=E.app)==null?void 0:N.schedule)!=null&&F.periods){const M=Object.entries(E.app.schedule.periods);console.log(" App schedule entries:",M.length);for(let U=0;U<M.length;U++){const[z,j]=M[U],H=w(z);console.log(" Checking app period key:",z,"teacherId:",j,"excluded?",H),j&&T.includes(String(j))&&(H?console.log(" Excluding app period",z):(console.log(" Including app period",z),k.push({period:z,teacherId:j,teacherName:R(j,b),subject:"",source:"app"})))}}for(let M=0;M<7;M++){const U=`period${M+1}TeacherId`,z=E[U]||((P=E.aeries)==null?void 0:P[U])||((O=E.app)==null?void 0:O[U]);if(z&&T.includes(String(z))){const j=S.includes(M.toString());console.log(" Checking CSV period index",M,"field:",U,"teacherId:",z,"excluded?",j),j?console.log(" Excluding CSV period",M):(console.log(" Including CSV period",M),k.push({period:(M+1).toString(),teacherId:z,teacherName:R(z,b),subject:"",source:"csv"}))}}return console.log(" Final periods for student",E.id,":",k.length,k),k},R=(E,T=[])=>{let b=T.find(S=>S.id===E);return!b&&/^\d+$/.test(E)&&(b=T.find(S=>S.aeriesId===E)),b?b.name||`${b.firstName} ${b.lastName}`||`Teacher ${E}`:`Teacher ${E}`};return{isInitialized:t,linkedSheetId:e,linkedSheetUrl:r,lastSyncTime:n,syncStatus:s,syncMessage:i,initializeGoogleAuth:c,requestAccessToken:u,createLinkedSheet:f,updateSheetData:h,createCustomTab:_,deleteCustomTab:async E=>{if(!e.value)throw new Error("No linked sheet.");try{o.value||await u(),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{deleteSheet:{sheetId:E}}]}}),console.log(" Deleted custom tab with sheet ID:",E)}catch(T){throw console.error("Error deleting custom tab:",T),T}},unlinkSheet:p,checkSheetConnection:y}}const Mle=Object.freeze(Object.defineProperty({__proto__:null,useGoogleSheetsRealtime:iy},Symbol.toStringTag,{value:"Module"}));function Lle(t,e,r){const{generateCSV:n,downloadCSV:s}=r,{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeGoogleAuth:u,createLinkedSheet:f,updateSheetData:h,createCustomTab:p,deleteCustomTab:m,unlinkSheet:g,checkSheetConnection:v}=iy();let x=null,y=!1;const _=async()=>{try{const D=localStorage.getItem("casemanage_linked_sheet_id");D&&D.startsWith("1XSL0Sl7")&&(console.log("Clearing old sheet ID that was causing 403 errors"),localStorage.removeItem("casemanage_linked_sheet_id")),await u(),i.value&&await v()&&(await E(),I())}catch(D){console.error("Failed to initialize Google Auth:",D)}};Vt(()=>t.value,(D,N)=>{D&&N&&D!==N&&(y=!0,console.log(" Student data changed, will sync on next interval")),D!=null&&D.length},{deep:!0});const I=()=>{x&&clearInterval(x),x=setInterval(async()=>{if(i.value&&y&&l.value!=="syncing")try{console.log(" Hourly auto-sync starting..."),await E(),y=!1,console.log(" Hourly auto-sync completed")}catch(D){console.error(" Hourly auto-sync failed:",D)}},36e5)},R=()=>{x&&clearInterval(x)},A=async()=>{try{await f(t.value,e.value),I()}catch(D){console.error("Failed to create linked sheet:",D),alert("Failed to create Google Sheet. Please make sure you are signed in to Google.")}},E=async()=>{if(!(!i.value||l.value==="syncing"))try{await h(t.value,e.value)}catch(D){console.error("Failed to sync sheet:",D),alert("Failed to sync sheet. Please try again.")}};return{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeIntegration:_,createLinkedGoogleSheet:A,syncNow:E,openGoogleSheet:()=>{a.value&&(window.open(a.value,"_blank","noopener,noreferrer")||(window.location.href=a.value))},unlinkSheet:g,createCustomTab:p,deleteCustomTab:m,createGoogleSheetWithData:()=>{const D=n();s(D,"student_data.csv"),window.open("https://sheets.new","_blank")},createBlankGoogleSheet:()=>{window.open("https://sheets.new","_blank")},exportToCSV:()=>{const D=n();s(D,"student_data_export.csv")},formatTime:D=>new Date(D).toLocaleString(),setupAutoSync:I,cleanupAutoSync:R}}function Ble(t,e){const{getStudentsForTeachers:r}=t,{createCustomTab:n,deleteCustomTab:s}=e,i=se([]),a=se(!1),o=se(""),l=se([]),c=se([]),u=5,f=Ae(()=>l.value.length===0?[]:r(l.value,c.value)),h=async v=>{if(!o.value.trim()||l.value.length===0){alert("Please enter a tab name and select at least one teacher");return}if(i.value.length>=u){alert(`Maximum of ${u} custom tabs allowed`);return}try{const x=r(l.value,c.value),y=await n(o.value.trim(),x,l.value,v,c.value),_={id:Date.now().toString(),name:o.value.trim(),teachers:[...l.value],studentCount:y.rowCount,sheetId:y.sheetId};i.value.push(_),m(),console.log("Custom tab added:",_),alert(`Custom tab "${_.name}" created successfully with ${y.rowCount} student entries!`)}catch(x){console.error("Failed to create custom tab:",x),alert("Failed to create custom tab in Google Sheet. Please try again.")}},p=async v=>{const x=i.value.find(y=>y.id===v);if(x&&confirm(`Are you sure you want to remove the "${x.name}" tab?`))try{x.sheetId&&await s(x.sheetId),i.value=i.value.filter(y=>y.id!==v),console.log("Custom tab removed:",v),alert(`Tab "${x.name}" removed successfully.`)}catch(y){console.error("Failed to delete custom tab:",y),alert("Failed to delete tab from Google Sheet. You may need to delete it manually."),i.value=i.value.filter(_=>_.id!==v)}},m=()=>{o.value="",l.value=[],c.value=[],a.value=!1};return{customTabs:i,showAddTabForm:a,newTabName:o,selectedTeachers:l,selectedExcludedPeriods:c,maxCustomTabs:u,filteredStudentsPreview:f,addCustomTab:h,removeCustomTab:p,resetForm:m,toggleAddTabForm:()=>{a.value=!a.value,a.value||m()}}}const Ule={class:"sheets-section"},$le={key:0,class:"linked-sheet-status"},Vle={class:"status-card success"},Hle={class:"sync-info"},jle={key:0},Gle={key:1,class:"syncing"},Wle={key:2,class:"success"},zle={key:3,class:"error"},Kle={class:"sheet-actions"},qle=["disabled"],Xle={key:1,class:"create-sheet-section"},Yle={class:"alternative-options"},Jle={class:"button-group"},Qle={__name:"GoogleSheetsConnector",props:{linkedSheetId:String,lastSyncTime:[String,Date],syncStatus:String,syncMessage:String},emits:["openGoogleSheet","syncNow","unlinkSheet","createLinkedGoogleSheet","createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){const e=r=>new Date(r).toLocaleString();return(r,n)=>(B(),V("div",Ule,[n[12]||(n[12]=d("h4",null,"Google Sheets Integration",-1)),t.linkedSheetId?(B(),V("div",$le,[d("div",Vle,[n[7]||(n[7]=d("h5",null," Linked Google Sheet",-1)),n[8]||(n[8]=d("p",null,"Your student data is synced to Google Sheets",-1)),d("button",{onClick:n[0]||(n[0]=s=>r.$emit("openGoogleSheet")),class:"sheet-link"}," Open Google Sheet  "),d("div",Hle,[t.lastSyncTime?(B(),V("span",jle,"Last synced: "+J(e(t.lastSyncTime)),1)):_e("",!0),t.syncStatus==="syncing"?(B(),V("span",Gle," Syncing...")):t.syncStatus==="success"?(B(),V("span",Wle," Synced")):t.syncStatus==="error"?(B(),V("span",zle," "+J(t.syncMessage),1)):_e("",!0)]),n[9]||(n[9]=d("div",{class:"auto-sync-info"},[d("span",{class:"auto-sync-badge"},[d("span",{class:"pulse"}),Oe(" Auto-sync enabled ")]),d("p",{class:"auto-sync-description"}," Changes to student data, accommodations, and services are automatically synced to your Google Sheet. ")],-1)),d("div",Kle,[d("button",{onClick:n[1]||(n[1]=s=>r.$emit("syncNow")),disabled:t.syncStatus==="syncing",class:"btn-sync"}," Sync Now ",8,qle),d("button",{onClick:n[2]||(n[2]=s=>r.$emit("unlinkSheet")),class:"btn-unlink"}," Unlink Sheet ")])])])):(B(),V("div",Xle,[n[10]||(n[10]=nn('<h5 data-v-ec72cef0>Create a Linked Google Sheet</h5><p data-v-ec72cef0>Link your student data to a Google Sheet that automatically updates when changes are made.</p><div class="features-list" data-v-ec72cef0><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Auto-syncs when students are added or updated</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Updates accommodations and services in real-time</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Maintains a live connection to your data</span></div></div>',3)),d("button",{onClick:n[3]||(n[3]=s=>r.$emit("createLinkedGoogleSheet")),class:"btn-primary"},"  Create & Link Google Sheet ")])),d("div",Yle,[n[11]||(n[11]=d("h5",null,"Other Export Options",-1)),d("div",Jle,[d("button",{onClick:n[4]||(n[4]=s=>r.$emit("createGoogleSheetWithData")),class:"btn-secondary"},"  Create Google Sheet with Data (One-time) "),d("button",{onClick:n[5]||(n[5]=s=>r.$emit("createBlankGoogleSheet")),class:"btn-secondary"},"  Create Blank Google Sheet "),d("button",{onClick:n[6]||(n[6]=s=>r.$emit("exportToCSV")),class:"btn-secondary"},"  Export to CSV Only ")])])]))}},Zle=yt(Qle,[["__scopeId","data-v-ec72cef0"]]),ece={class:"preview-section"},tce={class:"preview-table"},rce={key:0},nce={key:0},sce={key:0,class:"preview-note"},xg=5,ace={__name:"StudentPreview",props:{filteredStudents:{type:Array,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},setup(t){const e=t,r=Ae(()=>e.filteredStudents.slice(0,xg)),n=a=>{const o=dt(a,"firstName")||"",l=dt(a,"lastName")||"";return`${o} ${l}`.trim()},s=a=>dt(a,"grade")||"",i=a=>e.getStudentTeacherPeriods(a,e.selectedTeachers,e.selectedExcludedPeriods);return(a,o)=>(B(),V("div",ece,[d("h6",null,"Preview ("+J(t.filteredStudents.length)+" students)",1),d("div",tce,[d("table",null,[o[0]||(o[0]=d("thead",null,[d("tr",null,[d("th",null,"Name"),d("th",null,"Grade"),d("th",null,"Period"),d("th",null,"Teacher")])],-1)),d("tbody",null,[(B(!0),V(Re,null,Ve(r.value,l=>(B(),V("tr",{key:l.id},[d("td",null,J(n(l)),1),d("td",null,J(s(l)),1),d("td",null,[(B(!0),V(Re,null,Ve(i(l),(c,u)=>(B(),V("span",{key:u},[Oe(J(c.period),1),u<i(l).length-1?(B(),V("span",rce,", ")):_e("",!0)]))),128))]),d("td",null,[(B(!0),V(Re,null,Ve(i(l),(c,u)=>(B(),V("span",{key:u},[Oe(J(c.teacherName),1),u<i(l).length-1?(B(),V("span",nce,", ")):_e("",!0)]))),128))])]))),128))])]),t.filteredStudents.length>xg?(B(),V("p",sce," ... and "+J(t.filteredStudents.length-xg)+" more students ",1)):_e("",!0)])]))}},ice=yt(ace,[["__scopeId","data-v-936b1ce9"]]),oce={class:"custom-tabs-config"},lce={class:"add-tab-controls"},cce=["disabled"],uce={key:0,class:"max-tabs-warning"},dce={key:0,class:"add-tab-form"},fce={class:"form-group"},hce=["value"],pce={class:"form-group"},mce={class:"teacher-checkboxes"},gce=["value","checked","onChange"],vce={class:"form-group"},xce={class:"period-checkboxes"},yce=["value","checked","onChange"],Ece={class:"form-actions"},_ce={key:1,class:"existing-tabs"},bce={class:"tab-teachers"},Sce=["onClick"],Tce={__name:"CustomTabManager",props:{customTabs:{type:Array,required:!0},showAddTabForm:{type:Boolean,required:!0},newTabName:{type:String,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},maxCustomTabs:{type:Number,required:!0},availableTeachers:{type:Array,required:!0},availablePeriods:{type:Array,required:!0},filteredStudentsPreview:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},emits:["toggleAddTabForm","update:newTabName","updateSelectedTeachers","updateSelectedExcludedPeriods","addCustomTab","removeCustomTab","resetForm"],setup(t){return(e,r)=>(B(),V("div",oce,[r[8]||(r[8]=d("h5",null,"Custom Teacher Tabs",-1)),r[9]||(r[9]=d("p",null,"Create custom tabs with data filtered by specific teachers",-1)),d("div",lce,[d("button",{onClick:r[0]||(r[0]=n=>e.$emit("toggleAddTabForm")),disabled:t.customTabs.length>=t.maxCustomTabs,class:"btn-primary"}," + Add Custom Tab ",8,cce),t.customTabs.length>=t.maxCustomTabs?(B(),V("span",uce," Maximum of "+J(t.maxCustomTabs)+" custom tabs allowed ",1)):_e("",!0)]),t.showAddTabForm?(B(),V("div",dce,[d("div",fce,[r[4]||(r[4]=d("label",null,"Tab Name",-1)),d("input",{value:t.newTabName,onInput:r[1]||(r[1]=n=>e.$emit("update:newTabName",n.target.value)),type:"text",class:"form-input",placeholder:"e.g., Math Teachers",maxlength:"30"},null,40,hce)]),d("div",pce,[r[5]||(r[5]=d("label",null,"Select Teachers",-1)),d("div",mce,[(B(!0),V(Re,null,Ve(t.availableTeachers,n=>(B(),V("label",{key:n.id,class:"checkbox-label"},[d("input",{type:"checkbox",value:n.id,checked:t.selectedTeachers.includes(n.id),onChange:s=>e.$emit("updateSelectedTeachers",n.id,s.target.checked)},null,40,gce),Oe(" "+J(n.name),1)]))),128))])]),d("div",vce,[r[6]||(r[6]=d("label",null,"Exclude Periods (Optional)",-1)),d("div",xce,[(B(!0),V(Re,null,Ve(t.availablePeriods,n=>(B(),V("label",{key:n.value,class:"checkbox-label"},[d("input",{type:"checkbox",value:n.value,checked:t.selectedExcludedPeriods.includes(n.value),onChange:s=>e.$emit("updateSelectedExcludedPeriods",n.value,s.target.checked)},null,40,yce),Oe(" "+J(n.label),1)]))),128))])]),t.selectedTeachers.length>0?(B(),Jr(ice,{key:0,"filtered-students":t.filteredStudentsPreview,"selected-teachers":t.selectedTeachers,"selected-excluded-periods":t.selectedExcludedPeriods,"get-student-teacher-periods":t.getStudentTeacherPeriods},null,8,["filtered-students","selected-teachers","selected-excluded-periods","get-student-teacher-periods"])):_e("",!0),d("div",Ece,[d("button",{onClick:r[2]||(r[2]=n=>e.$emit("addCustomTab")),class:"btn-primary"}," Create Tab "),d("button",{onClick:r[3]||(r[3]=n=>e.$emit("resetForm")),class:"btn-secondary"}," Cancel ")])])):_e("",!0),t.customTabs.length>0?(B(),V("div",_ce,[r[7]||(r[7]=d("h6",null,"Current Custom Tabs",-1)),(B(!0),V(Re,null,Ve(t.customTabs,n=>(B(),V("div",{key:n.id,class:"tab-item"},[d("div",null,[d("strong",null,J(n.name),1),d("span",bce,J(n.teachers.length)+" teacher(s), "+J(n.studentCount)+" students ",1)]),d("button",{onClick:s=>e.$emit("removeCustomTab",n.id),class:"btn-danger btn-small"}," Remove ",8,Sce)]))),128))])):_e("",!0)]))}},Ace=yt(Tce,[["__scopeId","data-v-236484db"]]),wce={class:"export-options-section"},Cce={class:"export-grid"},Ice={class:"export-card"},kce={class:"export-card"},Dce={class:"export-card"},Pce={__name:"TestingExportOptions",emits:["createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){return(e,r)=>(B(),V("div",wce,[r[12]||(r[12]=d("h4",null,"Export Options",-1)),r[13]||(r[13]=d("p",null,"Additional ways to export and work with your student data",-1)),d("div",Cce,[d("div",Ice,[r[3]||(r[3]=d("div",{class:"export-icon"},"",-1)),r[4]||(r[4]=d("h5",null,"Google Sheets with Data",-1)),r[5]||(r[5]=d("p",null,"Create a new Google Sheet and populate it with current student data (one-time export)",-1)),d("button",{onClick:r[0]||(r[0]=n=>e.$emit("createGoogleSheetWithData")),class:"btn-primary"}," Create Sheet with Data ")]),d("div",kce,[r[6]||(r[6]=d("div",{class:"export-icon"},"",-1)),r[7]||(r[7]=d("h5",null,"Blank Google Sheet",-1)),r[8]||(r[8]=d("p",null,"Create a new blank Google Sheet that you can customize yourself",-1)),d("button",{onClick:r[1]||(r[1]=n=>e.$emit("createBlankGoogleSheet")),class:"btn-primary"}," Create Blank Sheet ")]),d("div",Dce,[r[9]||(r[9]=d("div",{class:"export-icon"},"",-1)),r[10]||(r[10]=d("h5",null,"CSV Export",-1)),r[11]||(r[11]=d("p",null,"Download student data as a CSV file for use in Excel or other applications",-1)),d("button",{onClick:r[2]||(r[2]=n=>e.$emit("exportToCSV")),class:"btn-primary"}," Download CSV ")])]),r[14]||(r[14]=d("div",{class:"export-info"},[d("h5",null,"Export Information"),d("ul",null,[d("li",null,[d("strong",null,"Linked Sheets:"),Oe(" Automatically sync when data changes")]),d("li",null,[d("strong",null,"One-time Exports:"),Oe(" Snapshot of data at export time")]),d("li",null,[d("strong",null,"CSV Files:"),Oe(" Compatible with Excel, Numbers, and other spreadsheet apps")])])],-1))]))}},Rce=yt(Pce,[["__scopeId","data-v-3bc6896f"]]),Fce={class:"testing-links-container"},Oce={__name:"TestingLinks",setup(t){const{students:e,fetchStudents:r}=Ma(),{userList:n,fetchUsers:s}=La(),{appSettings:i,loadAppSettings:a}=Ws(),o=Nle(e,n,i),{availablePeriods:l,availableTeachers:c,getStudentTeacherPeriods:u}=o,f=Lle(e,n,o),{linkedSheetId:h,lastSyncTime:p,syncStatus:m,syncMessage:g,initializeIntegration:v,createLinkedGoogleSheet:x,syncNow:y,openGoogleSheet:_,unlinkSheet:I,createGoogleSheetWithData:R,createBlankGoogleSheet:A,exportToCSV:E,cleanupAutoSync:T}=f,b=Ble(o,f),{customTabs:S,showAddTabForm:k,newTabName:w,selectedTeachers:D,selectedExcludedPeriods:N,maxCustomTabs:F,filteredStudentsPreview:P,addCustomTab:O,removeCustomTab:M,resetForm:U,toggleAddTabForm:z}=b,j=(K,re)=>{if(re)D.value.includes(K)||D.value.push(K);else{const me=D.value.indexOf(K);me>-1&&D.value.splice(me,1)}},H=(K,re)=>{if(re)N.value.includes(K)||N.value.push(K);else{const me=N.value.indexOf(K);me>-1&&N.value.splice(me,1)}},W=async()=>{await O(n.value)};return Ut(async()=>{try{await Promise.all([r(),s(),a()]),console.log("Students loaded:",e.value.length),console.log("Users loaded:",n.value.length),console.log("App settings loaded:",i.value),await v()}catch(K){console.error("Failed to initialize TestingLinks:",K)}}),Na(()=>{T()}),(K,re)=>(B(),V("div",Fce,[re[1]||(re[1]=d("h3",null,"Testing Links & Google Sheets Integration",-1)),st(Zle,{"linked-sheet-id":Z(h),"last-sync-time":Z(p),"sync-status":Z(m),"sync-message":Z(g),onOpenGoogleSheet:Z(_),onSyncNow:Z(y),onUnlinkSheet:Z(I),onCreateLinkedGoogleSheet:Z(x),onCreateGoogleSheetWithData:Z(R),onCreateBlankGoogleSheet:Z(A),onExportToCsv:Z(E)},null,8,["linked-sheet-id","last-sync-time","sync-status","sync-message","onOpenGoogleSheet","onSyncNow","onUnlinkSheet","onCreateLinkedGoogleSheet","onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"]),Z(h)?(B(),Jr(Ace,{key:0,"custom-tabs":Z(S),"show-add-tab-form":Z(k),"new-tab-name":Z(w),"selected-teachers":Z(D),"selected-excluded-periods":Z(N),"max-custom-tabs":Z(F),"available-teachers":Z(c),"available-periods":Z(l),"filtered-students-preview":Z(P),"get-student-teacher-periods":Z(u),onToggleAddTabForm:Z(z),"onUpdate:newTabName":re[0]||(re[0]=me=>w.value=me),onUpdateSelectedTeachers:j,onUpdateSelectedExcludedPeriods:H,onAddCustomTab:W,onRemoveCustomTab:Z(M),onResetForm:Z(U)},null,8,["custom-tabs","show-add-tab-form","new-tab-name","selected-teachers","selected-excluded-periods","max-custom-tabs","available-teachers","available-periods","filtered-students-preview","get-student-teacher-periods","onToggleAddTabForm","onRemoveCustomTab","onResetForm"])):_e("",!0),st(Rce,{onCreateGoogleSheetWithData:Z(R),onCreateBlankGoogleSheet:Z(A),onExportToCsv:Z(E)},null,8,["onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"])]))}},Nce=yt(Oce,[["__scopeId","data-v-8d441fb1"]]),Mce={class:"admin-dashboard"},Lce={class:"stats-grid"},Bce={class:"stat-card"},Uce={class:"stat-content"},$ce={class:"stat-card"},Vce={class:"stat-content"},Hce={class:"stat-card"},jce={class:"stat-content"},Gce={class:"stat-card"},Wce={class:"stat-content"},zce={class:"categories-grid"},Kce={class:"category-card"},qce={class:"category-header"},Xce={class:"category-card"},Yce={class:"category-header"},Jce={class:"category-card"},Qce={class:"category-header"},Zce={class:"category-card"},eue={class:"category-header"},tue={class:"system-status"},rue={class:"status-grid"},nue={class:"status-card"},sue={class:"sync-status"},aue={class:"sync-item"},iue={key:0,class:"sync-time"},oue={class:"sync-item"},lue={class:"sync-time"},cue={class:"status-card"},uue={class:"user-activity"},due={class:"activity-item"},fue={class:"activity-count"},hue={class:"activity-item"},pue={class:"activity-count"},mue={class:"quick-actions"},gue={class:"actions-grid"},vue={__name:"AdminDashboard",emits:["goToCategory","goToStudents"],setup(t){const{students:e,fetchStudents:r}=Ma(),{userList:n,fetchUsers:s}=La(),{linkedSheetId:i,lastSyncTime:a}=iy(),o=se(12),l=se(8),c=se(!0),u=se("Connected"),f=Ae(()=>{var x;return((x=e.value)==null?void 0:x.length)||0}),h=Ae(()=>{var x;return((x=n.value)==null?void 0:x.length)||0}),p=Ae(()=>{var x;return((x=n.value)==null?void 0:x.filter(y=>y.role==="paraeducator").length)||0}),m=Ae(()=>i.value?1:0),g=Ae(()=>!!i.value),v=x=>x?new Date(x).toLocaleString():"Never";return Ut(async()=>{try{await Promise.all([r(),s()])}catch(x){console.error("Error loading dashboard data:",x)}}),(x,y)=>(B(),V("div",Mce,[d("div",Lce,[d("div",Bce,[y[9]||(y[9]=d("div",{class:"stat-icon"},"",-1)),d("div",Uce,[d("h3",null,J(f.value),1),y[8]||(y[8]=d("p",null,"Total Students",-1))])]),d("div",$ce,[y[11]||(y[11]=d("div",{class:"stat-icon"},"",-1)),d("div",Vce,[d("h3",null,J(h.value),1),y[10]||(y[10]=d("p",null,"System Users",-1))])]),d("div",Hce,[y[13]||(y[13]=d("div",{class:"stat-icon"},"",-1)),d("div",jce,[d("h3",null,J(p.value),1),y[12]||(y[12]=d("p",null,"Paraeducators",-1))])]),d("div",Gce,[y[15]||(y[15]=d("div",{class:"stat-icon"},"",-1)),d("div",Wce,[d("h3",null,J(m.value),1),y[14]||(y[14]=d("p",null,"Linked Sheets",-1))])])]),d("div",zce,[d("div",Kce,[d("div",qce,[y[16]||(y[16]=d("h2",null," User & Student Management",-1)),d("button",{onClick:y[0]||(y[0]=_=>x.$emit("goToCategory","users-students")),class:"category-btn"}," Manage  ")]),y[17]||(y[17]=nn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Add Users</h4><p data-v-ecd98979>Create new user accounts with role assignments</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Manage Users</h4><p data-v-ecd98979>Edit existing users, roles, and permissions</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Student Administration</h4><p data-v-ecd98979>Comprehensive student data management</p></div></div></div></div>',1))]),d("div",Xce,[d("div",Yce,[y[18]||(y[18]=d("h2",null," Aide Management",-1)),d("button",{onClick:y[1]||(y[1]=_=>x.$emit("goToCategory","aide-management")),class:"category-btn"}," Manage  ")]),y[19]||(y[19]=nn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Aide Assignment</h4><p data-v-ecd98979>Assign paraeducators to students and periods</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Aide Schedule</h4><p data-v-ecd98979>Manage paraeducator schedules and assignments</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Time Table</h4><p data-v-ecd98979>Configure school periods and time slots</p></div></div></div></div>',1))]),d("div",Jce,[d("div",Qce,[y[20]||(y[20]=d("h2",null," Data & Integration",-1)),d("button",{onClick:y[2]||(y[2]=_=>x.$emit("goToCategory","data-integration")),class:"category-btn"}," Manage  ")]),y[21]||(y[21]=nn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>SEIS Import</h4><p data-v-ecd98979>Import student data from SEIS system</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Aeries API &amp; Import</h4><p data-v-ecd98979>Connect to Aeries SIS for data synchronization</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Testing Links</h4><p data-v-ecd98979>Google Sheets integration and export tools</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Teacher Feedback</h4><p data-v-ecd98979>Manage teacher feedback forms and responses</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Backup &amp; Restore</h4><p data-v-ecd98979>System backup and data restoration tools</p></div></div></div></div>',1))]),d("div",Zce,[d("div",eue,[y[22]||(y[22]=d("h2",null," System Configuration",-1)),d("button",{onClick:y[3]||(y[3]=_=>x.$emit("goToCategory","system-config")),class:"category-btn"}," Manage  ")]),y[23]||(y[23]=nn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Permissions</h4><p data-v-ecd98979>Role-based access control and permissions matrix</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>App Settings</h4><p data-v-ecd98979>Configure application settings and preferences</p></div></div></div></div>',1))])]),d("div",tue,[y[31]||(y[31]=d("h2",null," System Status",-1)),d("div",rue,[d("div",nue,[y[26]||(y[26]=d("h3",null," Data Sync Status",-1)),d("div",sue,[d("div",aue,[d("span",{class:Ze(["sync-indicator",{active:g.value}])},null,2),y[24]||(y[24]=d("span",null,"Google Sheets",-1)),Z(a)?(B(),V("span",iue,J(v(Z(a))),1)):_e("",!0)]),d("div",oue,[d("span",{class:Ze(["sync-indicator",{active:c.value}])},null,2),y[25]||(y[25]=d("span",null,"Aeries SIS",-1)),d("span",lue,J(u.value),1)])])]),d("div",cue,[y[29]||(y[29]=d("h3",null," User Activity",-1)),d("div",uue,[d("div",due,[y[27]||(y[27]=d("span",null,"Active Users Today",-1)),d("span",fue,J(o.value),1)]),d("div",hue,[y[28]||(y[28]=d("span",null,"Recent Logins",-1)),d("span",pue,J(l.value),1)])])]),y[30]||(y[30]=nn('<div class="status-card" data-v-ecd98979><h3 data-v-ecd98979> System Health</h3><div class="health-indicators" data-v-ecd98979><div class="health-item" data-v-ecd98979><span data-v-ecd98979>Database</span><span class="health-status healthy" data-v-ecd98979> Healthy</span></div><div class="health-item" data-v-ecd98979><span data-v-ecd98979>Functions</span><span class="health-status healthy" data-v-ecd98979> Operational</span></div></div></div>',1))])]),d("div",mue,[y[36]||(y[36]=d("h2",null," Quick Actions",-1)),d("div",gue,[d("button",{onClick:y[4]||(y[4]=_=>x.$emit("goToStudents")),class:"admin-action-btn primary",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},y[32]||(y[32]=[d("span",{class:"action-icon"},"",-1),d("span",null,"View Students",-1)])),d("button",{onClick:y[5]||(y[5]=_=>x.$emit("goToCategory","users-students")),class:"admin-action-btn success",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},y[33]||(y[33]=[d("span",{class:"action-icon"},"",-1),d("span",null,"Manage Users",-1)])),d("button",{onClick:y[6]||(y[6]=_=>x.$emit("goToCategory","aide-management")),class:"admin-action-btn warning",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},y[34]||(y[34]=[d("span",{class:"action-icon"},"",-1),d("span",null,"Aide Management",-1)])),d("button",{onClick:y[7]||(y[7]=_=>x.$emit("goToCategory","data-integration")),class:"admin-action-btn info",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},y[35]||(y[35]=[d("span",{class:"action-icon"},"",-1),d("span",null,"Data & Integration",-1)]))])])]))}},xue=yt(vue,[["__scopeId","data-v-ecd98979"]]);var yue={};class Eue{constructor(){this.encryptionKey="default-dev-key-replace-in-production",this.encryptionEnabled=!0,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled")}setEncryptionEnabled(e){this.encryptionEnabled=e,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled"),e||console.warn(" Warning: Encryption disabled in production environment")}encryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.encryptField(i);this.setNestedValue(n,s,a)}}),n}decryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.decryptField(i);this.setNestedValue(n,s,a)}}),n}encryptField(e){if(!this.encryptionEnabled)return e;try{const r=typeof e=="object"?JSON.stringify(e):String(e);return ji.AES.encrypt(r,this.encryptionKey).toString()}catch(r){return console.error("Encryption failed:",r),e}}decryptField(e){if(!this.encryptionEnabled)return e;try{const n=ji.AES.decrypt(e,this.encryptionKey).toString(ji.enc.Utf8);try{return JSON.parse(n)}catch{return n}}catch(r){return console.error("Decryption failed:",r),e}}getNestedValue(e,r){return r.split(".").reduce((n,s)=>n&&n[s],e)}setNestedValue(e,r,n){const s=r.split("."),i=s.pop(),a=s.reduce((o,l)=>o[l]=o[l]||{},e);return a[i]=n,e}async logAccess(e,r,n){var s,i;try{const a=Qe(wt(Xe,"iepAccessLogs"));await Kt(a,{studentId:e,userId:(s=$t.currentUser)==null?void 0:s.uid,userEmail:(i=$t.currentUser)==null?void 0:i.email,action:r,fields:n,timestamp:$s(),userAgent:navigator.userAgent,encryptionEnabled:this.encryptionEnabled})}catch(a){console.error("Failed to log access:",a)}}async verifyAccess(e,r="read"){var n,s,i,a,o,l;if(!$t.currentUser)return!1;try{const u=(await tr(Qe(Xe,"users",$t.currentUser.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager"){const h=((i=(s=(n=(await tr(Qe(Xe,"students",e))).data())==null?void 0:n.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===$t.currentUser.uid;return await this.logAccess(e,`access_attempt_${r}`,{success:h,role:"case_manager"}),h}if(u.role==="teacher"&&r==="read"){const h=((l=(o=(a=(await tr(Qe(Xe,"students",e))).data())==null?void 0:a.app)==null?void 0:o.schedule)==null?void 0:l.periods)||{},p=Object.values(h).includes($t.currentUser.uid);return await this.logAccess(e,`access_attempt_${r}`,{success:p,role:"teacher"}),p}return!1}catch(c){return console.error("Access verification failed:",c),!1}}async getAccessHistory(e){try{const r=ur(wt(Xe,"iepAccessLogs"),jr("studentId","==",e),jr("timestamp",">=",new Date(Date.now()-2592e6)));return(await jt(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Failed to fetch access history:",r),[]}}maskSensitiveData(e){var n,s,i;const r=JSON.parse(JSON.stringify(e));return(n=r.app)!=null&&n.accommodations&&(r.app.accommodations={assessment:"[RESTRICTED]",instruction:"[RESTRICTED]"}),(i=(s=r.app)==null?void 0:s.schedule)!=null&&i.classServices&&(r.app.schedule.classServices=["[RESTRICTED]"]),r}isEncryptionEnabled(){return this.encryptionEnabled}isValueEncrypted(e){try{return typeof e!="string"?!1:(ji.AES.decrypt(e,this.encryptionKey).toString(ji.enc.Utf8),!0)}catch{return!1}}getEncryptionStatus(){return{enabled:this.encryptionEnabled,environment:"production",keyAvailable:!!this.encryptionKey,environmentVariable:yue.VUE_APP_ENABLE_ENCRYPTION}}}const e0=new Eue,_ue={class:"debug-encryption"},bue={class:"debug-header"},Sue={class:"encryption-status"},Tue={class:"status-row"},Aue={class:"encryption-toggle"},wue=["checked"],Cue={key:0,class:"warning"},Iue={class:"status-details"},kue={class:"status-row"},Due={class:"status-value"},Pue={class:"status-row"},Rue={class:"status-value"},Fue={class:"status-row"},Oue={class:"status-value"},Nue={key:0,class:"debug-info"},Mue={class:"field-name"},Lue={class:"field-value"},Bue={class:"value-preview"},Uue={__name:"DebugEncryption",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=t,r=Ae(()=>e0.getEncryptionStatus()),n=Ae(()=>e0.isEncryptionEnabled()),s=Ae(()=>r.value.environment),i=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],a=()=>{e0.setEncryptionEnabled(!n.value)},o=(u,f)=>f.split(".").reduce((h,p)=>h&&h[p],u),l=u=>{if(!e.selectedStudent)return!1;const f=o(e.selectedStudent,u);return f?e0.isValueEncrypted(f):!1},c=u=>{if(!e.selectedStudent)return"No data";const f=o(e.selectedStudent,u);if(!f)return"Empty";if(l(u))return f.substring(0,20)+"...";const h=typeof f=="object"?JSON.stringify(f):String(f);return h.length>40?h.substring(0,40)+"...":h};return(u,f)=>(B(),V("div",_ue,[d("div",bue,[f[0]||(f[0]=d("h3",null," IEP Encryption Control",-1)),d("div",{class:Ze(["environment-badge",s.value])},J(s.value.toUpperCase()),3)]),d("div",Sue,[d("div",Tue,[f[1]||(f[1]=d("div",{class:"status-label"},"Status:",-1)),d("div",{class:Ze(["status-value",{enabled:n.value}])},J(n.value?" Enabled":" Disabled"),3)]),d("div",Aue,[d("label",null,[d("input",{type:"checkbox",checked:n.value,onChange:a},null,40,wue),f[2]||(f[2]=Oe(" Toggle Encryption "))]),s.value==="production"&&!n.value?(B(),V("div",Cue,"  Warning: Encryption disabled in production ")):_e("",!0)]),d("div",Iue,[d("div",kue,[f[3]||(f[3]=d("div",{class:"status-label"},"Environment:",-1)),d("div",Due,J(s.value),1)]),d("div",Pue,[f[4]||(f[4]=d("div",{class:"status-label"},"Encryption Key:",-1)),d("div",Rue,J(r.value.keyAvailable?" Available":" Missing"),1)]),d("div",Fue,[f[5]||(f[5]=d("div",{class:"status-label"},"ENV Variable:",-1)),d("div",Oue,J(r.value.environmentVariable||"Not set"),1)])])]),t.selectedStudent?(B(),V("div",Nue,[f[6]||(f[6]=d("h4",null,"Selected Student Data:",-1)),(B(),V(Re,null,Ve(i,h=>d("div",{class:"field-status",key:h},[d("div",Mue,J(h)+":",1),d("div",Lue,[d("div",{class:Ze(["encryption-status",{encrypted:l(h)}])},J(l(h)?" Encrypted":" Plain Text"),3),d("div",Bue,J(c(h)),1)])])),64))])):_e("",!0)]))}},Mk=yt(Uue,[["__scopeId","data-v-94726d44"]]),$ue={class:"session-debug"},Vue={class:"debug-info"},Hue={class:"info-row"},jue={class:"info-row"},Gue={class:"info-row"},Wue={class:"info-row"},zue={key:0,class:"info-row"},Kue={class:"countdown"},que={class:"debug-actions"},Xue={class:"timeout-setter"},Yue={__name:"SessionTimeoutDebug",setup(t){const{isEnabled:e,timeoutMinutes:r,showWarning:n,warningCountdown:s,updateSettings:i,resetTimeout:a}=_x(),{currentUser:o}=xd(),l=se(!1),c=se(30),u=se(.17);Ut(()=>{l.value=e.value,c.value=r.value});const f=async()=>{!l.value&&!c.value&&(l.value=e.value,c.value=r.value),await i(!0,u.value),setTimeout(()=>{a()},100)},h=async()=>{await i(l.value,c.value),setTimeout(()=>{a()},100)},p=()=>{document.dispatchEvent(new Event("click"))},m=()=>{};return(g,v)=>(B(),V("div",$ue,[v[8]||(v[8]=d("h4",null," Session Timeout Debug",-1)),d("div",Vue,[d("div",Hue,[v[1]||(v[1]=d("strong",null,"Timeout Enabled:",-1)),d("span",{class:Ze({"status-active":Z(e),"status-inactive":!Z(e)})},J(Z(e)?" YES":" NO"),3)]),d("div",jue,[v[2]||(v[2]=d("strong",null,"Timeout Minutes:",-1)),d("span",null,J(Z(r))+" minutes",1)]),d("div",Gue,[v[3]||(v[3]=d("strong",null,"User Logged In:",-1)),d("span",{class:Ze({"status-active":!!Z(o),"status-inactive":!Z(o)})},J(Z(o)?" YES":" NO"),3)]),d("div",Wue,[v[4]||(v[4]=d("strong",null,"Warning Showing:",-1)),d("span",{class:Ze({"status-warning":Z(n),"status-inactive":!Z(n)})},J(Z(n)?" YES":" NO"),3)]),Z(n)?(B(),V("div",zue,[v[5]||(v[5]=d("strong",null,"Countdown:",-1)),d("span",Kue,J(Z(s))+"s",1)])):_e("",!0)]),d("div",que,[d("div",Xue,[d("label",null,[v[7]||(v[7]=Oe(" Set Test Timeout: ")),we(d("select",{"onUpdate:modelValue":v[0]||(v[0]=x=>u.value=x),class:"timeout-select"},v[6]||(v[6]=[nn('<option value="0.05" data-v-bea6538b>3 seconds</option><option value="0.17" data-v-bea6538b>10 seconds</option><option value="0.5" data-v-bea6538b>30 seconds</option><option value="1" data-v-bea6538b>1 minute</option><option value="2" data-v-bea6538b>2 minutes</option><option value="5" data-v-bea6538b>5 minutes</option>',6)]),512),[[mr,u.value]])]),d("button",{onClick:f,class:"btn btn-warning"}," Apply Test Timeout ")]),d("div",{class:"admin-action-btns"},[d("button",{onClick:p,class:"admin-action-btn",style:{"min-width":"120px","max-width":"120px"}}," Trigger Activity "),d("button",{onClick:m,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Show Console Info "),d("button",{onClick:h,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Reset to Original ")])])]))}},Jue=yt(Yue,[["__scopeId","data-v-bea6538b"]]),Que={class:"security-control-center"},Zue={class:"security-section"},ede={class:"security-section"},tde={class:"log-filters"},rde={key:0,class:"log-table"},nde={key:1,class:"no-logs"},sde={class:"security-section"},ade={class:"setting-group"},ide={key:0,class:"setting-group"},ode={class:"setting-group"},lde={class:"setting-group"},cde={class:"security-section"},ude={class:"setting-group"},dde={class:"setting-group"},fde={class:"setting-group"},hde={class:"security-section"},pde={class:"ip-list"},mde={class:"ip-input"},gde={key:0,class:"ip-table"},vde=["onClick"],xde={key:1,class:"no-ips"},yde={class:"security-section"},Ede={class:"alert-settings"},_de={class:"setting-group"},bde={class:"setting-group"},Sde={class:"setting-group"},Tde={class:"alert-emails"},Ade={class:"email-input"},wde={key:0,class:"email-list"},Cde=["onClick"],Ide={__name:"SecurityControlCenter",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=se([]),r=se(1),{isEnabled:n,timeoutMinutes:s,updateSettings:i}=_x(),a=se(!1),o=se(!1),l=se(!0),c=se(!0),u=se(5),f=se([]),h=se(""),p=se({failedLogins:!0,unusualAccess:!0,bulkExport:!0}),m=se([]),g=se(""),v=async()=>{try{const N=new Date;N.setDate(N.getDate()-r.value);try{const O=ur(wt(Xe,"auditLogs"),jr("timestamp",">=",N),dn("timestamp","desc"),Ns(100)),M=await jt(O);if(e.value=M.docs.map(U=>({id:U.id,...U.data()})),e.value.length>0){console.log(" Loaded",e.value.length,"audit logs");return}}catch{console.log(" No audit logs found, trying legacy iepAccessLogs")}const F=ur(wt(Xe,"iepAccessLogs"),jr("timestamp",">=",N),dn("timestamp","desc"),Ns(100)),P=await jt(F);e.value=P.docs.map(O=>({id:O.id,...O.data()})),console.log(" Loaded",e.value.length,"legacy access logs")}catch(N){console.error("Failed to fetch logs:",N),e.value=[]}},x=N=>{if(!N)return"";const F=N.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(F)},y=async()=>{try{await i(n.value,s.value)}catch(N){console.error("Failed to toggle session timeout:",N)}},_=async()=>{try{await i(n.value,s.value)}catch(N){console.error("Failed to update session timeout:",N)}},I=()=>{console.log("Password policy updated:",a.value)},R=()=>{console.log("MFA policy updated:",o.value)},A=()=>{console.log("Export policy updated:",l.value)},E=()=>{console.log("PDF policy updated:",c.value)},T=()=>{console.log("Login policy updated:",u.value)},b=()=>{h.value&&!f.value.includes(h.value)&&(f.value.push(h.value),h.value="")},S=N=>{f.value=f.value.filter(F=>F!==N)},k=()=>{console.log("Alert settings updated:",p.value)},w=()=>{g.value&&!m.value.includes(g.value)&&(m.value.push(g.value),g.value="")},D=N=>{m.value=m.value.filter(F=>F!==N)};return Ut(()=>{v()}),(N,F)=>(B(),V("div",Que,[d("div",Zue,[F[13]||(F[13]=d("h3",null," IEP Data Encryption",-1)),st(Mk,{"selected-student":t.selectedStudent},null,8,["selected-student"])]),d("div",ede,[F[16]||(F[16]=d("h3",null," Access Logs",-1)),d("div",tde,[we(d("select",{"onUpdate:modelValue":F[0]||(F[0]=P=>r.value=P),class:"form-select"},F[14]||(F[14]=[d("option",{value:"1"},"Last 24 hours",-1),d("option",{value:"7"},"Last 7 days",-1),d("option",{value:"30"},"Last 30 days",-1)]),512),[[mr,r.value]]),d("button",{onClick:v,class:"btn btn-secondary"}," Refresh ")]),e.value.length?(B(),V("div",rde,[d("table",null,[F[15]||(F[15]=d("thead",null,[d("tr",null,[d("th",null,"Time"),d("th",null,"User"),d("th",null,"Action"),d("th",null,"Student"),d("th",null,"Status")])],-1)),d("tbody",null,[(B(!0),V(Re,null,Ve(e.value,P=>(B(),V("tr",{key:P.id},[d("td",null,J(x(P.timestamp)),1),d("td",null,J(P.userEmail),1),d("td",null,J(P.action),1),d("td",null,J(P.studentId),1),d("td",{class:Ze(P.success?"success":"error")},J(P.success?"":""),3)]))),128))])])])):(B(),V("div",nde," No access logs found for selected period "))]),d("div",sde,[F[23]||(F[23]=d("h3",null," Session Security",-1)),st(Jue),d("div",ade,[d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":F[1]||(F[1]=P=>Tr(n)?n.value=P:null),onChange:y},null,544),[[_t,Z(n)]]),F[17]||(F[17]=Oe(" Enable Auto Logout Timer "))]),F[18]||(F[18]=d("div",{class:"setting-description"}," Automatically log out users after a period of inactivity ",-1))]),Z(n)?(B(),V("div",ide,[d("label",null,[F[19]||(F[19]=Oe(" Auto Logout Timer (minutes): ")),we(d("input",{type:"number","onUpdate:modelValue":F[2]||(F[2]=P=>Tr(s)?s.value=P:null),min:"5",max:"120",onChange:_},null,544),[[Je,Z(s)]])]),F[20]||(F[20]=d("div",{class:"setting-description"}," Users will be automatically logged out after this period of inactivity ",-1))])):_e("",!0),d("div",ode,[d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":F[3]||(F[3]=P=>a.value=P),onChange:I},null,544),[[_t,a.value]]),F[21]||(F[21]=Oe(" Enforce Password Change Every 90 Days "))])]),d("div",lde,[d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":F[4]||(F[4]=P=>o.value=P),onChange:R},null,544),[[_t,o.value]]),F[22]||(F[22]=Oe(" Require Two-Factor Authentication for Admin Access "))])])]),d("div",cde,[F[27]||(F[27]=d("h3",null," Data Access Controls",-1)),d("div",ude,[d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":F[5]||(F[5]=P=>l.value=P),onChange:A},null,544),[[_t,l.value]]),F[24]||(F[24]=Oe(" Restrict Data Export to Admins Only "))])]),d("div",dde,[d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":F[6]||(F[6]=P=>c.value=P),onChange:E},null,544),[[_t,c.value]]),F[25]||(F[25]=Oe(" Add Watermark to Exported PDFs "))])]),d("div",fde,[d("label",null,[F[26]||(F[26]=Oe(" Maximum Failed Login Attempts: ")),we(d("input",{type:"number","onUpdate:modelValue":F[7]||(F[7]=P=>u.value=P),min:"3",max:"10",onChange:T},null,544),[[Je,u.value]])])])]),d("div",hde,[F[28]||(F[28]=d("h3",null," IP Access Control",-1)),d("div",pde,[d("div",mde,[we(d("input",{type:"text","onUpdate:modelValue":F[8]||(F[8]=P=>h.value=P),placeholder:"Enter IP address or range"},null,512),[[Je,h.value]]),d("button",{onClick:b,class:"btn btn-primary"}," Add IP ")]),f.value.length?(B(),V("div",gde,[(B(!0),V(Re,null,Ve(f.value,P=>(B(),V("div",{key:P,class:"ip-row"},[d("span",null,J(P),1),d("button",{onClick:O=>S(P),class:"btn btn-danger btn-sm"}," Remove ",8,vde)]))),128))])):(B(),V("div",xde," No IP restrictions configured "))])]),d("div",yde,[F[33]||(F[33]=d("h3",null," Security Alerts",-1)),d("div",Ede,[d("div",_de,[d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":F[9]||(F[9]=P=>p.value.failedLogins=P),onChange:k},null,544),[[_t,p.value.failedLogins]]),F[29]||(F[29]=Oe(" Alert on Multiple Failed Login Attempts "))])]),d("div",bde,[d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":F[10]||(F[10]=P=>p.value.unusualAccess=P),onChange:k},null,544),[[_t,p.value.unusualAccess]]),F[30]||(F[30]=Oe(" Alert on Unusual Access Patterns "))])]),d("div",Sde,[d("label",null,[we(d("input",{type:"checkbox","onUpdate:modelValue":F[11]||(F[11]=P=>p.value.bulkExport=P),onChange:k},null,544),[[_t,p.value.bulkExport]]),F[31]||(F[31]=Oe(" Alert on Bulk Data Exports "))])]),d("div",Tde,[F[32]||(F[32]=d("h4",null,"Alert Recipients:",-1)),d("div",Ade,[we(d("input",{type:"email","onUpdate:modelValue":F[12]||(F[12]=P=>g.value=P),placeholder:"Enter email address"},null,512),[[Je,g.value]]),d("button",{onClick:w,class:"btn btn-primary"}," Add ")]),m.value.length?(B(),V("div",wde,[(B(!0),V(Re,null,Ve(m.value,P=>(B(),V("div",{key:P,class:"email-row"},[d("span",null,J(P),1),d("button",{onClick:O=>D(P),class:"btn btn-danger btn-sm"}," Remove ",8,Cde)]))),128))])):_e("",!0)])])])]))}},kde=yt(Ide,[["__scopeId","data-v-de4ac33f"]]),Dde={class:"card-header"},Pde={class:"component-info"},Rde={class:"component-name"},Fde={class:"component-description"},Ode={class:"card-body"},Nde={class:"status-details"},Mde={class:"detail-row"},Lde={key:0,class:"detail-row"},Bde={key:1,class:"detail-row"},Ude={class:"detail-value"},$de={key:0,class:"errors-section"},Vde={class:"errors-list"},Hde={class:"card-actions"},jde=["disabled"],Gde={key:1,class:"details-section"},Wde={class:"details-content"},zde={class:"detail-item"},Kde={class:"detail-item"},qde={key:0,class:"detail-item"},Xde={class:"detail-item"},Yde={key:0,class:"loading-overlay"},Jde={__name:"ComponentHealthCard",props:{component:{type:Object,required:!0}},emits:["test","toggle"],setup(t){const e=t,r=se(!1),n=se(!1);Vt(()=>e.component.status,(u,f)=>{f==="checking"&&u!=="checking"?n.value=!1:u==="checking"&&(n.value=!0)},{immediate:!0});const s=u=>{switch(u){case"operational":return"";case"degraded":return"";case"down":return"";case"disabled":return"";case"checking":return"";default:return""}},i=u=>{switch(u){case"operational":return"Healthy";case"degraded":return"Issues";case"down":return"Failed";case"disabled":return"Disabled";case"checking":return"Testing...";default:return"Unknown"}},a=u=>u<100?"latency-good":u<500?"latency-ok":"latency-poor",o=u=>u?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(u):"Never",l=u=>u?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(u):"Never",c=u=>u.toLowerCase().replace(/\s+/g,"-");return(u,f)=>(B(),V("div",{class:Ze(["health-card",[t.component.status,{disabled:!t.component.enabled}]])},[d("div",Dde,[d("div",Pde,[d("h4",Rde,J(t.component.name),1),d("p",Fde,J(t.component.description),1)]),d("div",{class:Ze(["status-indicator",t.component.status])},J(s(t.component.status)),3)]),d("div",Ode,[d("div",Nde,[d("div",Mde,[f[3]||(f[3]=d("span",{class:"detail-label"},"Status:",-1)),d("span",{class:Ze(["detail-value",t.component.status])},J(i(t.component.status)),3)]),t.component.latency!==null?(B(),V("div",Lde,[f[4]||(f[4]=d("span",{class:"detail-label"},"Latency:",-1)),d("span",{class:Ze(["detail-value",a(t.component.latency)])},J(t.component.latency)+"ms ",3)])):_e("",!0),t.component.lastCheck?(B(),V("div",Bde,[f[5]||(f[5]=d("span",{class:"detail-label"},"Last Check:",-1)),d("span",Ude,J(o(t.component.lastCheck)),1)])):_e("",!0)]),t.component.errors&&t.component.errors.length?(B(),V("div",$de,[f[6]||(f[6]=d("div",{class:"errors-header"}," Issues:",-1)),d("ul",Vde,[(B(!0),V(Re,null,Ve(t.component.errors,h=>(B(),V("li",{key:h,class:"error-item"},J(h),1))),128))])])):_e("",!0),d("div",Hde,[d("button",{onClick:f[0]||(f[0]=h=>u.$emit("test",t.component)),disabled:n.value,class:"btn btn-primary btn-sm"},J(n.value?"":"")+" Test ",9,jde),d("button",{onClick:f[1]||(f[1]=h=>u.$emit("toggle",t.component)),class:Ze(["btn btn-sm",t.component.enabled?"btn-warning":"btn-success"])},J(t.component.enabled?" Disable":" Enable"),3),d("button",{onClick:f[2]||(f[2]=h=>r.value=!r.value),class:"btn btn-secondary btn-sm"},J(r.value?" Less":" More"),1)]),r.value?(B(),V("div",Gde,[d("div",Wde,[d("div",zde,[f[7]||(f[7]=d("strong",null,"Test Function:",-1)),Oe(" "+J(t.component.testFunction||"N/A"),1)]),d("div",Kde,[f[8]||(f[8]=d("strong",null,"Enabled:",-1)),Oe(" "+J(t.component.enabled?"Yes":"No"),1)]),t.component.lastCheck?(B(),V("div",qde,[f[9]||(f[9]=d("strong",null,"Last Test:",-1)),Oe(" "+J(l(t.component.lastCheck)),1)])):_e("",!0),d("div",Xde,[f[10]||(f[10]=d("strong",null,"Component ID:",-1)),Oe(" "+J(c(t.component.name)),1)])])])):_e("",!0)]),n.value?(B(),V("div",Yde,f[11]||(f[11]=[d("div",{class:"loading-spinner"},"",-1),d("div",{class:"loading-text"},"Testing component...",-1)]))):_e("",!0)],2))}},x2=yt(Jde,[["__scopeId","data-v-18cc0437"]]),Qde={class:"health-dashboard"},Zde={class:"dashboard-header"},efe={class:"header-controls"},tfe=["disabled"],rfe={key:0,class:"last-update"},nfe={class:"status-overview"},sfe={class:"status-icon"},afe={class:"status-info"},ife={class:"status-details"},ofe={class:"component-categories"},lfe={class:"category-section"},cfe={class:"components-grid"},ufe={class:"category-section"},dfe={class:"components-grid"},ffe={class:"quick-actions"},hfe={class:"admin-action-btns"},pfe=["disabled"],mfe={class:"logs-section"},gfe={class:"logs-container"},vfe={class:"log-time"},xfe={class:"log-component"},yfe={class:"log-message"},Efe={key:0,class:"no-logs"},_fe={class:"modal-header"},bfe={class:"modal-content"},Sfe={__name:"ComponentHealthDashboard",setup(t){const e=se(!1),r=se(null),n=se(!1),s=se({}),i=se([]),a=se(!1),o=se([{name:"Firebase Auth",status:"operational",description:"User authentication service",lastCheck:new Date,enabled:!0,latency:150,errors:[]},{name:"Firestore Database",status:"operational",description:"Main database service",lastCheck:new Date,enabled:!0,latency:200,errors:[]},{name:"Firebase Storage",status:"operational",description:"File storage service",lastCheck:new Date,enabled:!0,latency:180,errors:[]},{name:"Cloud Functions",status:"operational",description:"Server-side functions",lastCheck:new Date,enabled:!0,latency:300,errors:[]}]),l=se([{name:"Session Timeout",status:"operational",description:"Automatic user logout system",lastCheck:new Date,enabled:!0,latency:50,errors:[]},{name:"IEP Encryption",status:"operational",description:"Sensitive data encryption",lastCheck:new Date,enabled:!0,latency:80,errors:[]},{name:"Access Control",status:"operational",description:"Role-based permissions",lastCheck:new Date,enabled:!0,latency:120,errors:[]},{name:"Audit Logging",status:"operational",description:"Activity tracking system",lastCheck:new Date,enabled:!0,latency:90,errors:[]}]),c=Ae(()=>[...o.value,...l.value]),u=Ae(()=>c.value.length),f=Ae(()=>c.value.filter(T=>T.status==="operational").length),h=Ae(()=>{const T=c.value.map(b=>b.status);return T.every(b=>b==="operational"||b==="disabled")?"operational":T.some(b=>b==="down"||b==="error")?"down":"degraded"}),p=T=>{switch(T){case"operational":return"";case"degraded":return"";case"down":return"";case"disabled":return"";default:return""}},m=T=>{switch(T){case"operational":return"All systems operational";case"degraded":return"Some issues detected";case"down":return"Critical issues found";case"checking":return"Running diagnostics...";default:return"Unknown status"}},g=T=>T?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(T):"",v=(T,b,S="info")=>{i.value.unshift({id:Date.now()+Math.random(),timestamp:new Date,component:T,message:b,type:S}),i.value.length>20&&(i.value=i.value.slice(0,20))},x=async T=>{v(T.name,"Starting component test...","info");try{const b=performance.now();await new Promise(w=>setTimeout(w,Math.random()*1e3+500));const S=Math.round(performance.now()-b),k=c.value.find(w=>w.name===T.name);k&&(k.status=Math.random()>.1?"operational":"degraded",k.latency=S,k.lastCheck=new Date,k.errors=k.status==="degraded"?["Minor performance issue detected"]:[]),v(T.name,`Test completed - ${k.status} (${S}ms)`,k.status==="operational"?"success":"warning"),s.value={component:T.name,data:{status:k.status,latency:`${S}ms`,timestamp:new Date().toISOString(),details:k.status==="operational"?"All checks passed successfully":"Minor performance issues detected"}},n.value=!0}catch(b){v(T.name,`Test failed: ${b.message}`,"error")}},y=T=>{const b=c.value.find(S=>S.name===T.name);b&&(b.enabled=!b.enabled,b.status=b.enabled?"operational":"disabled",v(T.name,`Component ${b.enabled?"enabled":"disabled"}`,"info"))},_=async()=>{if(!e.value){e.value=!0,r.value=new Date,v("System","Starting full system refresh...","info");try{const T=c.value.filter(b=>b.enabled).map(b=>x(b));await Promise.all(T),v("System","Full system refresh completed","success")}catch(T){v("System",`Refresh failed: ${T.message}`,"error")}finally{e.value=!1}}},I=async()=>{a.value=!0,v("System","Starting comprehensive system test...","info");try{await _(),v("System","Comprehensive system test completed","success")}catch(T){v("System",`System test failed: ${T.message}`,"error")}finally{a.value=!1}},R=()=>{const T={timestamp:new Date().toISOString(),overallStatus:h.value,components:c.value.map(w=>({name:w.name,status:w.status,enabled:w.enabled,latency:w.latency,lastCheck:w.lastCheck,errors:w.errors})),logs:i.value.slice(0,10)},b=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),S=URL.createObjectURL(b),k=document.createElement("a");k.href=S,k.download=`health-report-${Date.now()}.json`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(S),v("System","Health report exported","info")},A=()=>{i.value=[]},E=()=>{n.value=!1,s.value={}};return Ut(()=>{v("System","Component Health Dashboard initialized","success")}),(T,b)=>(B(),V("div",Qde,[d("div",Zde,[b[1]||(b[1]=d("h2",null," Component Health Dashboard",-1)),d("div",efe,[d("button",{onClick:_,disabled:e.value,class:"btn btn-primary"},J(e.value?" Refreshing...":" Refresh All"),9,tfe),r.value?(B(),V("span",rfe," Last update: "+J(g(r.value)),1)):_e("",!0)])]),d("div",nfe,[d("div",{class:Ze(["status-card overall",h.value])},[d("div",sfe,J(p(h.value)),1),d("div",afe,[b[2]||(b[2]=d("h3",null,"System Status",-1)),d("p",null,J(m(h.value)),1),d("div",ife,J(f.value)+"/"+J(u.value)+" components healthy ",1)])],2)]),d("div",ofe,[d("div",lfe,[b[3]||(b[3]=d("h3",null," Core Services",-1)),d("div",cfe,[(B(!0),V(Re,null,Ve(o.value,S=>(B(),Jr(x2,{key:S.name,component:S,onTest:x,onToggle:y},null,8,["component"]))),128))])]),d("div",ufe,[b[4]||(b[4]=d("h3",null," Authentication & Security",-1)),d("div",dfe,[(B(!0),V(Re,null,Ve(l.value,S=>(B(),Jr(x2,{key:S.name,component:S,onTest:x,onToggle:y},null,8,["component"]))),128))])])]),d("div",ffe,[b[5]||(b[5]=d("h3",null," Quick Tests",-1)),d("div",hfe,[d("button",{onClick:I,disabled:a.value,class:"admin-action-btn",style:{"min-width":"160px","max-width":"160px"}},J(a.value?" Testing...":" Full System Test"),9,pfe),d("button",{onClick:R,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},"  Export Report ")])]),d("div",mfe,[d("div",{class:"logs-header"},[b[6]||(b[6]=d("h3",null," Component Activity Logs",-1)),d("div",{class:"log-controls"},[d("button",{onClick:A,class:"btn btn-sm btn-secondary"},"Clear")])]),d("div",gfe,[(B(!0),V(Re,null,Ve(i.value,S=>(B(),V("div",{key:S.id,class:Ze(["log-entry",S.type])},[d("span",vfe,J(g(S.timestamp)),1),d("span",xfe,J(S.component),1),d("span",yfe,J(S.message),1)],2))),128)),i.value.length===0?(B(),V("div",Efe,' No activity logs yet. Click "Refresh All" to start monitoring. ')):_e("",!0)])]),n.value?(B(),V("div",{key:0,class:"test-modal-overlay",onClick:E},[d("div",{class:"test-modal",onClick:b[0]||(b[0]=mn(()=>{},["stop"]))},[d("div",_fe,[d("h3",null,J(s.value.component)+" Test Results",1),d("button",{onClick:E,class:"btn btn-sm btn-secondary"},"")]),d("div",bfe,[d("pre",null,J(JSON.stringify(s.value.data,null,2)),1)])])])):_e("",!0)]))}},Tfe=yt(Sfe,[["__scopeId","data-v-106cd980"]]),Afe={class:"admin-permissions-matrix"},wfe={class:"matrix-container"},Cfe={class:"permissions-table"},Ife={class:"page-info"},kfe={class:"page-name"},Dfe={class:"page-category"},Pfe={class:"page-description"},Rfe={class:"permission-cell"},Ffe={class:"permission-toggle"},Ofe=["onUpdate:modelValue","onChange"],Nfe={class:"permission-cell"},Mfe={class:"permission-toggle"},Lfe=["onUpdate:modelValue","onChange"],Bfe={class:"permission-cell"},Ufe={class:"permission-toggle"},$fe=["onUpdate:modelValue","onChange"],Vfe={class:"matrix-actions"},Hfe={class:"bulk-actions"},jfe={class:"bulk-buttons"},Gfe={key:0,class:"save-status"},Wfe={__name:"AdminPermissionsMatrix",setup(t){const e=se(null),r=se([{key:"dashboard",label:"Dashboard",category:"Dashboard",description:"Main admin overview and statistics"},{key:"usersAdd",label:"Add Users",category:"User Management",description:"Create new user accounts"},{key:"usersEdit",label:"Manage Users",category:"User Management",description:"Edit existing user accounts"},{key:"students",label:"Students",category:"Student Management",description:"View and manage student records"},{key:"addStudents",label:"Add Students",category:"Student Management",description:"Bulk import student data"},{key:"aide-assignment",label:"Aide Assignment",category:"Aide Management",description:"Assign aides to students"},{key:"aide-schedule",label:"Aide Schedule",category:"Aide Management",description:"Manage aide schedules"},{key:"time-table",label:"Time Table",category:"Aide Management",description:"Configure school time periods"},{key:"seis",label:"SEIS Import",category:"Data Integration",description:"Import SEIS student data"},{key:"aeries",label:"Aeries API & Import",category:"Data Integration",description:"Connect to Aeries SIS"},{key:"testing-links",label:"Testing Links",category:"Data Integration",description:"Google Sheets integration for testing"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"Data Integration",description:"Manage teacher feedback system"},{key:"backup-restore",label:"Backup & Restore",category:"Data Integration",description:"Database backup and restore"},{key:"permissions",label:"Permissions",category:"System Config",description:"User role and permission management"},{key:"settings",label:"App Settings",category:"System Config",description:"Global application settings"},{key:"iep-security",label:"IEP Security",category:"System Config",description:"IEP data encryption and security"},{key:"security",label:"Security Controls",category:"System Config",description:"Security monitoring and controls"},{key:"component-health",label:"Component Debug",category:"System Monitoring",description:"Component health and debugging"}]),n=xs({}),s={administrator:{dashboard:!0,usersAdd:!0,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!0,aeries:!0,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!0,permissions:!1,settings:!0,"iep-security":!1,security:!1,"component-health":!0},administrator_504_CM:{dashboard:!0,usersAdd:!1,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!1,"aide-schedule":!1,"time-table":!1,seis:!0,aeries:!0,"testing-links":!1,"teacher-feedback":!0,"backup-restore":!1,permissions:!1,settings:!1,"iep-security":!1,security:!1,"component-health":!1},sped_chair:{dashboard:!0,usersAdd:!1,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!0,aeries:!0,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!0,permissions:!1,settings:!0,"iep-security":!0,security:!0,"component-health":!0}},i=()=>{r.value.forEach(p=>{n[p.key]={administrator:s.administrator[p.key]||!1,administrator_504_CM:s.administrator_504_CM[p.key]||!1,sped_chair:s.sped_chair[p.key]||!1}})},a=async()=>{try{const p=Qe(Xe,"app_settings","admin_panel_permissions"),m=await tr(p);if(m.exists()){const g=m.data();r.value.forEach(v=>{g[v.key]&&(n[v.key]={administrator:g[v.key].administrator??s.administrator[v.key],administrator_504_CM:g[v.key].administrator_504_CM??s.administrator_504_CM[v.key],sped_chair:g[v.key].sped_chair??s.sped_chair[v.key]})}),h("Permissions loaded successfully","success")}else i(),h("Using default permissions","info")}catch(p){console.error("Error loading permissions:",p),h("Error loading permissions","error"),i()}},o=async()=>{try{const p=Qe(Xe,"app_settings","admin_panel_permissions");await Kt(p,n),h("Permissions saved successfully","success")}catch(p){console.error("Error saving permissions:",p),h("Error saving permissions","error")}},l=async(p,m,g)=>{n[p][m]=g,await o()},c=async p=>{r.value.forEach(m=>{n[m.key][p]=!0}),await o(),h(`All permissions granted to ${p}`,"success")},u=async()=>{r.value.forEach(p=>{n[p.key].administrator=!1,n[p.key].administrator_504_CM=!1,n[p.key].sped_chair=!1}),await o(),h("All permissions revoked","warning")},f=async()=>{i(),await o(),h("Permissions reset to defaults","info")},h=(p,m)=>{e.value={message:p,type:m},setTimeout(()=>{e.value=null},3e3)};return Ut(()=>{i(),a()}),(p,m)=>(B(),V("div",Afe,[m[8]||(m[8]=d("div",{class:"matrix-header"},[d("h2",null," Admin Panel Permissions Matrix"),d("p",{class:"matrix-description"}," Control which admin panel pages different admin roles can access. Changes are saved automatically. ")],-1)),d("div",wfe,[d("table",Cfe,[m[6]||(m[6]=d("thead",null,[d("tr",null,[d("th",{class:"page-column"},"Admin Panel Page"),d("th",{class:"role-column"},"Administrator"),d("th",{class:"role-column"},"Administrator 504/CM"),d("th",{class:"role-column"},"SPED Chair")])],-1)),d("tbody",null,[(B(!0),V(Re,null,Ve(r.value,g=>(B(),V("tr",{key:g.key,class:"permission-row"},[d("td",Ife,[d("div",kfe,J(g.label),1),d("div",Dfe,J(g.category),1),d("div",Pfe,J(g.description),1)]),d("td",Rfe,[d("label",Ffe,[we(d("input",{type:"checkbox","onUpdate:modelValue":v=>n[g.key].administrator=v,onChange:v=>l(g.key,"administrator",v.target.checked)},null,40,Ofe),[[_t,n[g.key].administrator]]),m[3]||(m[3]=d("span",{class:"toggle-slider"},null,-1))])]),d("td",Nfe,[d("label",Mfe,[we(d("input",{type:"checkbox","onUpdate:modelValue":v=>n[g.key].administrator_504_CM=v,onChange:v=>l(g.key,"administrator_504_CM",v.target.checked)},null,40,Lfe),[[_t,n[g.key].administrator_504_CM]]),m[4]||(m[4]=d("span",{class:"toggle-slider"},null,-1))])]),d("td",Bfe,[d("label",Ufe,[we(d("input",{type:"checkbox","onUpdate:modelValue":v=>n[g.key].sped_chair=v,onChange:v=>l(g.key,"sped_chair",v.target.checked)},null,40,$fe),[[_t,n[g.key].sped_chair]]),m[5]||(m[5]=d("span",{class:"toggle-slider"},null,-1))])])]))),128))])])]),d("div",Vfe,[d("div",Hfe,[m[7]||(m[7]=d("h3",null,"Bulk Actions",-1)),d("div",jfe,[d("button",{onClick:m[0]||(m[0]=g=>c("administrator")),class:"btn btn-success"}," Grant All to Administrator "),d("button",{onClick:m[1]||(m[1]=g=>c("administrator_504_CM")),class:"btn btn-success"}," Grant All to Administrator 504/CM "),d("button",{onClick:m[2]||(m[2]=g=>c("sped_chair")),class:"btn btn-success"}," Grant All to SPED Chair "),d("button",{onClick:u,class:"btn btn-warning"}," Revoke All Permissions "),d("button",{onClick:f,class:"btn btn-secondary"}," Reset to Defaults ")])])]),e.value?(B(),V("div",Gfe,[d("div",{class:Ze(["status-message",e.value.type])},J(e.value.message),3)])):_e("",!0)]))}},zfe=yt(Wfe,[["__scopeId","data-v-3c083134"]]),Kfe={class:"theme-manager"},qfe={key:0,class:"loading-state"},Xfe={key:1,class:"error-state"},Yfe={class:"error-message"},Jfe={key:2,class:"theme-editor"},Qfe={class:"theme-actions"},Zfe=["disabled"],e0e=["disabled"],t0e=["disabled"],r0e={class:"theme-sections"},n0e={class:"theme-section"},s0e={class:"color-grid"},a0e={class:"color-group"},i0e={class:"color-inputs"},o0e={class:"color-input"},l0e={class:"color-picker-wrapper"},c0e={class:"color-input"},u0e={class:"color-picker-wrapper"},d0e={class:"color-input"},f0e={class:"color-picker-wrapper"},h0e={class:"color-input"},p0e={class:"color-picker-wrapper"},m0e={class:"color-group"},g0e={class:"color-inputs"},v0e={class:"color-input"},x0e={class:"color-picker-wrapper"},y0e={class:"color-input"},E0e={class:"color-picker-wrapper"},_0e={class:"color-group"},b0e={class:"color-inputs"},S0e={class:"color-input"},T0e={class:"color-picker-wrapper"},A0e={class:"color-input"},w0e={class:"color-picker-wrapper"},C0e={class:"color-input"},I0e={class:"color-picker-wrapper"},k0e={class:"color-input"},D0e={class:"color-picker-wrapper"},P0e={class:"theme-section"},R0e={class:"color-grid"},F0e={class:"color-input"},O0e={class:"color-picker-wrapper"},N0e={class:"color-input"},M0e={class:"color-picker-wrapper"},L0e={class:"color-input"},B0e={class:"color-picker-wrapper"},U0e={class:"color-input"},$0e={class:"color-picker-wrapper"},V0e={class:"theme-section"},H0e={class:"color-grid"},j0e={class:"color-input"},G0e={class:"color-picker-wrapper"},W0e={class:"color-input"},z0e={class:"color-picker-wrapper"},K0e={class:"color-input"},q0e={class:"color-picker-wrapper"},X0e={class:"color-input"},Y0e={class:"color-picker-wrapper"},J0e={class:"theme-section"},Q0e={class:"input-grid"},Z0e={class:"input-group"},ehe={class:"input-group"},the={class:"input-group"},rhe={class:"input-group"},nhe={class:"theme-section"},she={class:"input-grid"},ahe={class:"input-group"},ihe={class:"input-group"},ohe={__name:"ThemeManager",setup(t){const{currentTheme:e,loading:r,error:n,loadTheme:s,saveTheme:i,resetTheme:a,updateThemeProperty:o,DEFAULT_THEME:l}=kI(),c=xs({...l}),u=se(!1),f=se(""),h=se(!1),p=se(null);Vt(e,R=>{Object.assign(c,R)},{deep:!0});const m=(R,A=!1)=>{f.value=R,h.value=A,setTimeout(()=>{f.value="",h.value=!1},5e3)},g=async()=>{u.value=!0;try{await i(c),m("Theme saved successfully!")}catch(R){m("Error saving theme: "+R.message,!0)}finally{u.value=!1}},v=async()=>{if(confirm("Are you sure you want to reset the theme to defaults? This cannot be undone."))try{await a(),m("Theme reset to defaults")}catch(R){m("Error resetting theme: "+R.message,!0)}},x=()=>{Object.assign(c,e.value),m("Changes reverted")},y=()=>{const R=JSON.stringify(c,null,2),A=new Blob([R],{type:"application/json"}),E=URL.createObjectURL(A),T=document.createElement("a");T.href=E,T.download=`theme-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(E),m("Theme exported successfully")},_=()=>{p.value.click()},I=R=>{const A=R.target.files[0];if(!A)return;const E=new FileReader;E.onload=T=>{try{const b=JSON.parse(T.target.result);if(!Object.keys(l).every(k=>b.hasOwnProperty(k))){m("Invalid theme file format",!0);return}Object.assign(c,b),m("Theme imported successfully")}catch(b){m("Error importing theme: "+b.message,!0)}},E.readAsText(A),R.target.value=""};return Ut(async()=>{try{await s()}catch(R){console.error("Error loading theme:",R)}}),(R,A)=>(B(),V("div",Kfe,[A[120]||(A[120]=d("div",{class:"theme-header"},[d("h2",null," Theme Customization"),d("p",{class:"theme-description"}," Customize the visual appearance of the application. Changes are applied in real-time and saved to the database. ")],-1)),Z(r)?(B(),V("div",qfe,A[85]||(A[85]=[d("div",{class:"spinner"},null,-1),d("p",null,"Loading theme settings...",-1)]))):Z(n)?(B(),V("div",Xfe,[d("p",Yfe,J(Z(n)),1),d("button",{onClick:A[0]||(A[0]=(...E)=>Z(s)&&Z(s)(...E)),class:"btn btn-primary"},"Retry")])):(B(),V("div",Jfe,[d("div",Qfe,[d("button",{onClick:g,disabled:u.value,class:"btn btn-primary"},J(u.value?" Saving...":" Save Theme"),9,Zfe),d("button",{onClick:v,disabled:u.value,class:"btn btn-warning"},"  Reset to Defaults ",8,e0e),d("button",{onClick:x,disabled:u.value,class:"btn btn-secondary"},"  Revert Changes ",8,t0e),d("button",{onClick:y,class:"btn btn-info"},"  Export Theme "),d("button",{onClick:_,class:"btn btn-info"},"  Import Theme ")]),f.value?(B(),V("div",{key:0,class:Ze(["status-message",{error:h.value,success:!h.value}])},J(f.value),3)):_e("",!0),d("div",r0e,[d("section",n0e,[A[99]||(A[99]=d("h3",null," Color Palette",-1)),d("div",s0e,[d("div",a0e,[A[90]||(A[90]=d("h4",null,"Primary Colors",-1)),d("div",i0e,[d("div",o0e,[A[86]||(A[86]=d("label",null,"Primary Color",-1)),d("div",l0e,[we(d("input",{type:"color","onUpdate:modelValue":A[1]||(A[1]=E=>c.primaryColor=E),onInput:A[2]||(A[2]=E=>Z(o)("primaryColor",E.target.value)),class:"color-picker"},null,544),[[Je,c.primaryColor]]),we(d("input",{type:"text","onUpdate:modelValue":A[3]||(A[3]=E=>c.primaryColor=E),onInput:A[4]||(A[4]=E=>Z(o)("primaryColor",E.target.value)),class:"color-text",placeholder:"#1976d2"},null,544),[[Je,c.primaryColor]])])]),d("div",c0e,[A[87]||(A[87]=d("label",null,"Primary Hover",-1)),d("div",u0e,[we(d("input",{type:"color","onUpdate:modelValue":A[5]||(A[5]=E=>c.primaryHover=E),onInput:A[6]||(A[6]=E=>Z(o)("primaryHover",E.target.value)),class:"color-picker"},null,544),[[Je,c.primaryHover]]),we(d("input",{type:"text","onUpdate:modelValue":A[7]||(A[7]=E=>c.primaryHover=E),onInput:A[8]||(A[8]=E=>Z(o)("primaryHover",E.target.value)),class:"color-text",placeholder:"#1565c0"},null,544),[[Je,c.primaryHover]])])]),d("div",d0e,[A[88]||(A[88]=d("label",null,"Primary Light",-1)),d("div",f0e,[we(d("input",{type:"color","onUpdate:modelValue":A[9]||(A[9]=E=>c.primaryLight=E),onInput:A[10]||(A[10]=E=>Z(o)("primaryLight",E.target.value)),class:"color-picker"},null,544),[[Je,c.primaryLight]]),we(d("input",{type:"text","onUpdate:modelValue":A[11]||(A[11]=E=>c.primaryLight=E),onInput:A[12]||(A[12]=E=>Z(o)("primaryLight",E.target.value)),class:"color-text",placeholder:"#e3f2fd"},null,544),[[Je,c.primaryLight]])])]),d("div",h0e,[A[89]||(A[89]=d("label",null,"Primary Dark",-1)),d("div",p0e,[we(d("input",{type:"color","onUpdate:modelValue":A[13]||(A[13]=E=>c.primaryDark=E),onInput:A[14]||(A[14]=E=>Z(o)("primaryDark",E.target.value)),class:"color-picker"},null,544),[[Je,c.primaryDark]]),we(d("input",{type:"text","onUpdate:modelValue":A[15]||(A[15]=E=>c.primaryDark=E),onInput:A[16]||(A[16]=E=>Z(o)("primaryDark",E.target.value)),class:"color-text",placeholder:"#0d47a1"},null,544),[[Je,c.primaryDark]])])])])]),d("div",m0e,[A[93]||(A[93]=d("h4",null,"Secondary Colors",-1)),d("div",g0e,[d("div",v0e,[A[91]||(A[91]=d("label",null,"Secondary Color",-1)),d("div",x0e,[we(d("input",{type:"color","onUpdate:modelValue":A[17]||(A[17]=E=>c.secondaryColor=E),onInput:A[18]||(A[18]=E=>Z(o)("secondaryColor",E.target.value)),class:"color-picker"},null,544),[[Je,c.secondaryColor]]),we(d("input",{type:"text","onUpdate:modelValue":A[19]||(A[19]=E=>c.secondaryColor=E),onInput:A[20]||(A[20]=E=>Z(o)("secondaryColor",E.target.value)),class:"color-text",placeholder:"#6c757d"},null,544),[[Je,c.secondaryColor]])])]),d("div",y0e,[A[92]||(A[92]=d("label",null,"Secondary Hover",-1)),d("div",E0e,[we(d("input",{type:"color","onUpdate:modelValue":A[21]||(A[21]=E=>c.secondaryHover=E),onInput:A[22]||(A[22]=E=>Z(o)("secondaryHover",E.target.value)),class:"color-picker"},null,544),[[Je,c.secondaryHover]]),we(d("input",{type:"text","onUpdate:modelValue":A[23]||(A[23]=E=>c.secondaryHover=E),onInput:A[24]||(A[24]=E=>Z(o)("secondaryHover",E.target.value)),class:"color-text",placeholder:"#545b62"},null,544),[[Je,c.secondaryHover]])])])])]),d("div",_0e,[A[98]||(A[98]=d("h4",null,"Status Colors",-1)),d("div",b0e,[d("div",S0e,[A[94]||(A[94]=d("label",null,"Success",-1)),d("div",T0e,[we(d("input",{type:"color","onUpdate:modelValue":A[25]||(A[25]=E=>c.successColor=E),onInput:A[26]||(A[26]=E=>Z(o)("successColor",E.target.value)),class:"color-picker"},null,544),[[Je,c.successColor]]),we(d("input",{type:"text","onUpdate:modelValue":A[27]||(A[27]=E=>c.successColor=E),onInput:A[28]||(A[28]=E=>Z(o)("successColor",E.target.value)),class:"color-text",placeholder:"#28a745"},null,544),[[Je,c.successColor]])])]),d("div",A0e,[A[95]||(A[95]=d("label",null,"Warning",-1)),d("div",w0e,[we(d("input",{type:"color","onUpdate:modelValue":A[29]||(A[29]=E=>c.warningColor=E),onInput:A[30]||(A[30]=E=>Z(o)("warningColor",E.target.value)),class:"color-picker"},null,544),[[Je,c.warningColor]]),we(d("input",{type:"text","onUpdate:modelValue":A[31]||(A[31]=E=>c.warningColor=E),onInput:A[32]||(A[32]=E=>Z(o)("warningColor",E.target.value)),class:"color-text",placeholder:"#ffc107"},null,544),[[Je,c.warningColor]])])]),d("div",C0e,[A[96]||(A[96]=d("label",null,"Error",-1)),d("div",I0e,[we(d("input",{type:"color","onUpdate:modelValue":A[33]||(A[33]=E=>c.errorColor=E),onInput:A[34]||(A[34]=E=>Z(o)("errorColor",E.target.value)),class:"color-picker"},null,544),[[Je,c.errorColor]]),we(d("input",{type:"text","onUpdate:modelValue":A[35]||(A[35]=E=>c.errorColor=E),onInput:A[36]||(A[36]=E=>Z(o)("errorColor",E.target.value)),class:"color-text",placeholder:"#dc3545"},null,544),[[Je,c.errorColor]])])]),d("div",k0e,[A[97]||(A[97]=d("label",null,"Info",-1)),d("div",D0e,[we(d("input",{type:"color","onUpdate:modelValue":A[37]||(A[37]=E=>c.infoColor=E),onInput:A[38]||(A[38]=E=>Z(o)("infoColor",E.target.value)),class:"color-picker"},null,544),[[Je,c.infoColor]]),we(d("input",{type:"text","onUpdate:modelValue":A[39]||(A[39]=E=>c.infoColor=E),onInput:A[40]||(A[40]=E=>Z(o)("infoColor",E.target.value)),class:"color-text",placeholder:"#17a2b8"},null,544),[[Je,c.infoColor]])])])])])])]),d("section",P0e,[A[104]||(A[104]=d("h3",null," Background Colors",-1)),d("div",R0e,[d("div",F0e,[A[100]||(A[100]=d("label",null,"Primary Background",-1)),d("div",O0e,[we(d("input",{type:"color","onUpdate:modelValue":A[41]||(A[41]=E=>c.bgPrimary=E),onInput:A[42]||(A[42]=E=>Z(o)("bgPrimary",E.target.value)),class:"color-picker"},null,544),[[Je,c.bgPrimary]]),we(d("input",{type:"text","onUpdate:modelValue":A[43]||(A[43]=E=>c.bgPrimary=E),onInput:A[44]||(A[44]=E=>Z(o)("bgPrimary",E.target.value)),class:"color-text",placeholder:"#f4f6f9"},null,544),[[Je,c.bgPrimary]])])]),d("div",N0e,[A[101]||(A[101]=d("label",null,"Secondary Background",-1)),d("div",M0e,[we(d("input",{type:"color","onUpdate:modelValue":A[45]||(A[45]=E=>c.bgSecondary=E),onInput:A[46]||(A[46]=E=>Z(o)("bgSecondary",E.target.value)),class:"color-picker"},null,544),[[Je,c.bgSecondary]]),we(d("input",{type:"text","onUpdate:modelValue":A[47]||(A[47]=E=>c.bgSecondary=E),onInput:A[48]||(A[48]=E=>Z(o)("bgSecondary",E.target.value)),class:"color-text",placeholder:"#ffffff"},null,544),[[Je,c.bgSecondary]])])]),d("div",L0e,[A[102]||(A[102]=d("label",null,"Tertiary Background",-1)),d("div",B0e,[we(d("input",{type:"color","onUpdate:modelValue":A[49]||(A[49]=E=>c.bgTertiary=E),onInput:A[50]||(A[50]=E=>Z(o)("bgTertiary",E.target.value)),class:"color-picker"},null,544),[[Je,c.bgTertiary]]),we(d("input",{type:"text","onUpdate:modelValue":A[51]||(A[51]=E=>c.bgTertiary=E),onInput:A[52]||(A[52]=E=>Z(o)("bgTertiary",E.target.value)),class:"color-text",placeholder:"#f8f9fa"},null,544),[[Je,c.bgTertiary]])])]),d("div",U0e,[A[103]||(A[103]=d("label",null,"Muted Background",-1)),d("div",$0e,[we(d("input",{type:"color","onUpdate:modelValue":A[53]||(A[53]=E=>c.bgMuted=E),onInput:A[54]||(A[54]=E=>Z(o)("bgMuted",E.target.value)),class:"color-picker"},null,544),[[Je,c.bgMuted]]),we(d("input",{type:"text","onUpdate:modelValue":A[55]||(A[55]=E=>c.bgMuted=E),onInput:A[56]||(A[56]=E=>Z(o)("bgMuted",E.target.value)),class:"color-text",placeholder:"#e9ecef"},null,544),[[Je,c.bgMuted]])])])])]),d("section",V0e,[A[109]||(A[109]=d("h3",null," Text Colors",-1)),d("div",H0e,[d("div",j0e,[A[105]||(A[105]=d("label",null,"Primary Text",-1)),d("div",G0e,[we(d("input",{type:"color","onUpdate:modelValue":A[57]||(A[57]=E=>c.textPrimary=E),onInput:A[58]||(A[58]=E=>Z(o)("textPrimary",E.target.value)),class:"color-picker"},null,544),[[Je,c.textPrimary]]),we(d("input",{type:"text","onUpdate:modelValue":A[59]||(A[59]=E=>c.textPrimary=E),onInput:A[60]||(A[60]=E=>Z(o)("textPrimary",E.target.value)),class:"color-text",placeholder:"#333333"},null,544),[[Je,c.textPrimary]])])]),d("div",W0e,[A[106]||(A[106]=d("label",null,"Secondary Text",-1)),d("div",z0e,[we(d("input",{type:"color","onUpdate:modelValue":A[61]||(A[61]=E=>c.textSecondary=E),onInput:A[62]||(A[62]=E=>Z(o)("textSecondary",E.target.value)),class:"color-picker"},null,544),[[Je,c.textSecondary]]),we(d("input",{type:"text","onUpdate:modelValue":A[63]||(A[63]=E=>c.textSecondary=E),onInput:A[64]||(A[64]=E=>Z(o)("textSecondary",E.target.value)),class:"color-text",placeholder:"#666666"},null,544),[[Je,c.textSecondary]])])]),d("div",K0e,[A[107]||(A[107]=d("label",null,"Muted Text",-1)),d("div",q0e,[we(d("input",{type:"color","onUpdate:modelValue":A[65]||(A[65]=E=>c.textMuted=E),onInput:A[66]||(A[66]=E=>Z(o)("textMuted",E.target.value)),class:"color-picker"},null,544),[[Je,c.textMuted]]),we(d("input",{type:"text","onUpdate:modelValue":A[67]||(A[67]=E=>c.textMuted=E),onInput:A[68]||(A[68]=E=>Z(o)("textMuted",E.target.value)),class:"color-text",placeholder:"#999999"},null,544),[[Je,c.textMuted]])])]),d("div",X0e,[A[108]||(A[108]=d("label",null,"Inverse Text",-1)),d("div",Y0e,[we(d("input",{type:"color","onUpdate:modelValue":A[69]||(A[69]=E=>c.textInverse=E),onInput:A[70]||(A[70]=E=>Z(o)("textInverse",E.target.value)),class:"color-picker"},null,544),[[Je,c.textInverse]]),we(d("input",{type:"text","onUpdate:modelValue":A[71]||(A[71]=E=>c.textInverse=E),onInput:A[72]||(A[72]=E=>Z(o)("textInverse",E.target.value)),class:"color-text",placeholder:"#ffffff"},null,544),[[Je,c.textInverse]])])])])]),d("section",J0e,[A[114]||(A[114]=d("h3",null," Border Radius",-1)),d("div",Q0e,[d("div",Z0e,[A[110]||(A[110]=d("label",null,"Small Border Radius",-1)),we(d("input",{type:"text","onUpdate:modelValue":A[73]||(A[73]=E=>c.borderRadiusSm=E),onInput:A[74]||(A[74]=E=>Z(o)("borderRadiusSm",E.target.value)),placeholder:"4px"},null,544),[[Je,c.borderRadiusSm]])]),d("div",ehe,[A[111]||(A[111]=d("label",null,"Medium Border Radius",-1)),we(d("input",{type:"text","onUpdate:modelValue":A[75]||(A[75]=E=>c.borderRadiusMd=E),onInput:A[76]||(A[76]=E=>Z(o)("borderRadiusMd",E.target.value)),placeholder:"6px"},null,544),[[Je,c.borderRadiusMd]])]),d("div",the,[A[112]||(A[112]=d("label",null,"Large Border Radius",-1)),we(d("input",{type:"text","onUpdate:modelValue":A[77]||(A[77]=E=>c.borderRadiusLg=E),onInput:A[78]||(A[78]=E=>Z(o)("borderRadiusLg",E.target.value)),placeholder:"8px"},null,544),[[Je,c.borderRadiusLg]])]),d("div",rhe,[A[113]||(A[113]=d("label",null,"Extra Large Border Radius",-1)),we(d("input",{type:"text","onUpdate:modelValue":A[79]||(A[79]=E=>c.borderRadiusXl=E),onInput:A[80]||(A[80]=E=>Z(o)("borderRadiusXl",E.target.value)),placeholder:"12px"},null,544),[[Je,c.borderRadiusXl]])])])]),d("section",nhe,[A[118]||(A[118]=d("h3",null," Typography",-1)),d("div",she,[d("div",ahe,[A[116]||(A[116]=d("label",null,"Font Family",-1)),we(d("select",{"onUpdate:modelValue":A[81]||(A[81]=E=>c.fontFamilyBase=E),onChange:A[82]||(A[82]=E=>Z(o)("fontFamilyBase",E.target.value))},A[115]||(A[115]=[nn('<option value="&#39;Inter&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Inter (Default)</option><option value="&#39;Roboto&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Roboto</option><option value="&#39;Open Sans&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Open Sans</option><option value="&#39;Lato&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Lato</option><option value="&#39;Poppins&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Poppins</option><option value="&#39;Montserrat&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Montserrat</option><option value="&#39;Source Sans Pro&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Source Sans Pro</option><option value="&#39;Ubuntu&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Ubuntu</option>',8)]),544),[[mr,c.fontFamilyBase]])]),d("div",ihe,[A[117]||(A[117]=d("label",null,"Base Font Size",-1)),we(d("input",{type:"text","onUpdate:modelValue":A[83]||(A[83]=E=>c.fontSizeBase=E),onInput:A[84]||(A[84]=E=>Z(o)("fontSizeBase",E.target.value)),placeholder:"1rem"},null,544),[[Je,c.fontSizeBase]])])])]),A[119]||(A[119]=nn('<section class="theme-section" data-v-626c9c7f><h3 data-v-626c9c7f> Live Preview</h3><div class="preview-container" data-v-626c9c7f><div class="preview-card" data-v-626c9c7f><h4 data-v-626c9c7f>Sample Card</h4><p data-v-626c9c7f>This is a sample card to preview your theme changes in real-time.</p><div class="preview-buttons" data-v-626c9c7f><button class="btn btn-primary" data-v-626c9c7f>Primary Button</button><button class="btn btn-secondary" data-v-626c9c7f>Secondary Button</button><button class="btn btn-success" data-v-626c9c7f>Success Button</button><button class="btn btn-warning" data-v-626c9c7f>Warning Button</button><button class="btn btn-error" data-v-626c9c7f>Error Button</button></div></div></div></section>',1))])])),d("input",{ref_key:"fileInput",ref:p,type:"file",accept:".json",style:{display:"none"},onChange:I},null,544)]))}},lhe=yt(ohe,[["__scopeId","data-v-626c9c7f"]]),che={name:"AdminView",components:{TabBar:nj,UserAddForm:hj,UserTable:Mj,PermissionsMatrix:Kj,AdminStudents:hG,StudentBulkImporter:gW,AdminPermissions:qW,SeisImport:uz,AeriesImport:Ez,AeriesAPIConnector:kK,AppSettings:Sq,AdminAideAssignment:VI,AdminTimeTable:bk,AdminAideSchedule:Ok,AdminBackupRestore:Nk,AdminTeacherFeedback:Ole,TestingLinks:Nce,AdminDashboard:xue,DebugEncryption:Mk,SecurityControlCenter:kde,ComponentHealthDashboard:Tfe,AdminPermissionsMatrix:zfe,ThemeManager:lhe},setup(){const t=Si(),e=DL(),r=se("dashboard"),n=se("dashboard"),{students:s,fetchStudents:i}=Ma(),{users:a,fetchUsers:o}=La(),{currentUser:l}=xd();Ut(async()=>{try{await Promise.all([i(),o()]);const I=e.query.category;I&&p(I)}catch(I){console.error("Error loading data:",I)}});const c=[{key:"dashboard",label:"Dashboard",category:"dashboard"},{key:"usersAdd",label:"Add Users",category:"users-students"},{key:"usersEdit",label:"Manage Users",category:"users-students"},{key:"students",label:"Students",category:"users-students"},{key:"addStudents",label:"Add Students",category:"users-students"},{key:"aide-assignment",label:"Aide Assignment",category:"aide-management"},{key:"aide-schedule",label:"Aide Schedule",category:"aide-management",status:"not-working"},{key:"time-table",label:"Time Table",category:"aide-management"},{key:"seis",label:"SEIS Import",category:"data-integration",status:"not-active"},{key:"aeries",label:"Aeries API & Import",category:"data-integration",status:"not-active"},{key:"testing-links",label:"Testing Links",category:"data-integration"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"data-integration"},{key:"backup-restore",label:"Backup & Restore",category:"data-integration"},{key:"permissions",label:"Permissions",category:"system-config"},{key:"settings",label:"App Settings",category:"system-config"},{key:"theme",label:"Theme Customization",category:"system-config"},{key:"iep-security",label:"IEP Security",category:"system-config"},{key:"security",label:"Security Controls",category:"system-config"},{key:"component-health",label:"Component Debug",category:"monitoring"}],u=[{key:"admin-permissions",label:"Admin Panel Permissions",category:"system-config"}],f=Ae(()=>{var R;return((R=l.value)==null?void 0:R.role)==="admin"?[...c,...u]:c}),h=I=>f.value.filter(R=>R.category===I),p=I=>{n.value=I;const R=h(I);R.length>0&&(r.value=R[0].key)};return{activeTab:r,activeCategory:n,tabs:f,students:s,userMap:a,getTabsForCategory:h,setActiveCategory:p,handleTabChange:I=>{r.value=I},goToStudents:()=>{t.push("/students")},goToDashboard:()=>{t.push("/admin/dashboard")},handleGoToCategory:I=>{p(I)},handleBulkImporterClose:()=>{r.value="students"},handleStudentsImported:async I=>{console.log("Students imported:",I);try{await i()}catch(R){console.error("Failed to refresh students after import:",R)}}}}},uhe={class:"admin-header"},dhe={class:"admin-nav"},fhe={class:"admin-actions"},hhe={key:0,class:"sub-tab-container"},phe={class:"admin-section"},mhe={key:0,class:"admin-section"},ghe={key:1,class:"admin-section"},vhe={key:2,class:"admin-section"},xhe={key:3,class:"admin-section"},yhe={key:4,class:"admin-section"},Ehe={key:5,class:"admin-section"},_he={key:6,class:"admin-section"},bhe={key:7,class:"admin-section"},She={key:8,class:"admin-section"},The={key:9,class:"admin-section"},Ahe={key:10,class:"admin-section"},whe={key:11,class:"admin-section"},Che={key:12,class:"admin-section"},Ihe={key:13,class:"admin-section"},khe={key:14,class:"admin-section"},Dhe={key:15,class:"admin-section"},Phe={key:16,class:"admin-section"},Rhe={key:17,class:"admin-section"},Fhe={key:18,class:"admin-section"},Ohe={key:19,class:"admin-section"};function Nhe(t,e,r,n,s,i){const a=wr("TabBar"),o=wr("AdminDashboard"),l=wr("UserAddForm"),c=wr("UserTable"),u=wr("AdminStudents"),f=wr("StudentBulkImporter"),h=wr("AdminPermissions"),p=wr("AdminAideAssignment"),m=wr("AdminAideSchedule"),g=wr("AdminTimeTable"),v=wr("SeisImport"),x=wr("AeriesAPIConnector"),y=wr("AeriesImport"),_=wr("AppSettings"),I=wr("ThemeManager"),R=wr("TestingLinks"),A=wr("AdminTeacherFeedback"),E=wr("AdminBackupRestore"),T=wr("DebugEncryption"),b=wr("SecurityControlCenter"),S=wr("ComponentHealthDashboard"),k=wr("AdminPermissionsMatrix");return B(),V("div",null,[d("div",uhe,[e[8]||(e[8]=d("h1",null,"Admin Panel",-1)),d("div",dhe,[d("button",{onClick:e[0]||(e[0]=w=>n.setActiveCategory("dashboard")),class:Ze([{active:n.activeCategory==="dashboard"},"category-btn"])}," Dashboard ",2),d("button",{onClick:e[1]||(e[1]=w=>n.setActiveCategory("users-students")),class:Ze([{active:n.activeCategory==="users-students"},"category-btn"])}," User & Student Management ",2),d("button",{onClick:e[2]||(e[2]=w=>n.setActiveCategory("aide-management")),class:Ze([{active:n.activeCategory==="aide-management"},"category-btn"])}," Aide Management ",2),d("button",{onClick:e[3]||(e[3]=w=>n.setActiveCategory("data-integration")),class:Ze([{active:n.activeCategory==="data-integration"},"category-btn"])}," Data & Integration ",2),d("button",{onClick:e[4]||(e[4]=w=>n.setActiveCategory("system-config")),class:Ze([{active:n.activeCategory==="system-config"},"category-btn"])}," System Configuration ",2),d("button",{onClick:e[5]||(e[5]=w=>n.setActiveCategory("monitoring")),class:Ze([{active:n.activeCategory==="monitoring"},"category-btn"])}," System Monitoring ",2)]),d("div",fhe,[d("button",{onClick:e[6]||(e[6]=(...w)=>n.goToStudents&&n.goToStudents(...w)),class:"return-btn"},e[7]||(e[7]=[d("span",null,"",-1),Oe(" Return to Students ")]))])]),n.activeCategory?(B(),V("div",hhe,[st(a,{tabs:n.getTabsForCategory(n.activeCategory),"active-tab":n.activeTab,onTabChange:n.handleTabChange},null,8,["tabs","active-tab","onTabChange"])])):_e("",!0),d("div",phe,[n.activeTab==="dashboard"?(B(),V("div",mhe,[st(o,{onGoToCategory:n.handleGoToCategory,onGoToStudents:n.goToStudents},null,8,["onGoToCategory","onGoToStudents"])])):_e("",!0),n.activeTab==="usersAdd"?(B(),V("div",ghe,[st(l)])):_e("",!0),n.activeTab==="usersEdit"?(B(),V("div",vhe,[st(c)])):_e("",!0),n.activeTab==="students"?(B(),V("div",xhe,[st(u)])):_e("",!0),n.activeTab==="addStudents"?(B(),V("div",yhe,[st(f,{onClose:n.handleBulkImporterClose,onImported:n.handleStudentsImported},null,8,["onClose","onImported"])])):_e("",!0),n.activeTab==="permissions"?(B(),V("div",Ehe,[st(h)])):_e("",!0),n.activeTab==="aide-assignment"?(B(),V("div",_he,[st(p)])):_e("",!0),n.activeTab==="aide-schedule"?(B(),V("div",bhe,[st(m)])):_e("",!0),n.activeTab==="time-table"?(B(),V("div",She,[st(g)])):_e("",!0),n.activeTab==="seis"?(B(),V("div",The,[st(v)])):_e("",!0),n.activeTab==="aeries"?(B(),V("div",Ahe,[st(x),e[9]||(e[9]=d("hr",{style:{margin:"2rem 0",border:"1px solid #ddd"}},null,-1)),st(y)])):_e("",!0),n.activeTab==="settings"?(B(),V("div",whe,[st(_)])):_e("",!0),n.activeTab==="theme"?(B(),V("div",Che,[st(I)])):_e("",!0),n.activeTab==="testing-links"?(B(),V("div",Ihe,[st(R,{students:n.students,userMap:n.userMap},null,8,["students","userMap"])])):_e("",!0),n.activeTab==="teacher-feedback"?(B(),V("div",khe,[st(A)])):_e("",!0),n.activeTab==="backup-restore"?(B(),V("div",Dhe,[st(E)])):_e("",!0),n.activeTab==="iep-security"?(B(),V("div",Phe,[e[10]||(e[10]=d("h2",null,"IEP Data Security",-1)),st(T,{"selected-student":t.currentStudent},null,8,["selected-student"])])):_e("",!0),n.activeTab==="security"?(B(),V("div",Rhe,[st(b,{"selected-student":t.currentStudent},null,8,["selected-student"])])):_e("",!0),n.activeTab==="component-health"?(B(),V("div",Fhe,[st(S)])):_e("",!0),n.activeTab==="admin-permissions"?(B(),V("div",Ohe,[st(k)])):_e("",!0)])])}const Mhe=yt(che,[["render",Nhe],["__scopeId","data-v-434f1fd6"]]),Lhe={class:"aide-schedule-view"},Bhe={class:"header"},Uhe={class:"user-info"},$he={class:"content"},Vhe={key:0,class:"error-message"},Hhe={key:1,class:"error-message"},jhe={key:2,class:"loading"},Ghe={key:3,class:"schedule-container"},Whe={class:"schedule-display"},zhe={class:"schedule-timeline"},Khe={class:"time-info"},qhe={class:"time"},Xhe={class:"type-badge"},Yhe={class:"assignment-info"},Jhe={key:0},Qhe={key:1,class:"no-assignment"},Zhe={class:"schedule-editor"},epe={class:"editor-content"},tpe={class:"time-block-header"},rpe={class:"time"},npe={class:"type-badge"},spe={class:"assignment-editor"},ape=["onUpdate:modelValue"],ipe=["value"],ope=["value"],lpe={class:"editor-actions"},cpe=["disabled"],upe={key:0},dpe={key:1},fpe={__name:"AideScheduleView",setup(t){const e=Si(),r=ga(),{userList:n,fetchUsers:s}=La(),{students:i,fetchStudents:a}=Ma(),{loadAppSettings:o,saveAppSettings:l}=Ws(),c=se(!0),u=se(!1),f=se({}),h=se({}),p=Ae(()=>{var A;return((A=r.currentUser)==null?void 0:A.role)==="paraeducator"}),m=Ae(()=>{var A;return(A=r.currentUser)==null?void 0:A.uid}),g=Ae(()=>{var A;return((A=n.value)==null?void 0:A.filter(E=>E.role==="teacher"))||[]});async function v(){var A;try{const E=await tr(Qe(Xe,"app_settings","global"));if(E.exists()){const T=E.data();f.value=((A=T.timeTables)==null?void 0:A[0])||T.timeTable||{}}}catch(E){console.error("Error loading time table:",E)}}function x(){return f.value.schedule?f.value.schedule.map((A,E)=>({...A,id:A.id||`block-${E}`,assignments:h.value[A.id||`block-${E}`]||{}})):[]}function y(){return x().map(E=>{const T=E.assignments[m.value];let b="";if(T){if(T.startsWith("teacher:")){const S=T.replace("teacher:",""),k=g.value.find(w=>w.id===S);b=k?k.name||k.email:"Unknown Teacher"}else if(T.startsWith("student:")){const S=T.replace("student:",""),k=i.value.find(w=>w.id===S);b=k?`${dt(k,"firstName")} ${dt(k,"lastName")}`:"Unknown Student"}}return{...E,assignment:b}})}async function _(){try{u.value=!0;const A=await o(),E={...A.detailedAideSchedule};x().forEach(b=>{E[b.id]||(E[b.id]={}),E[b.id][m.value]=b.assignments[m.value]});const T={...A,detailedAideSchedule:E};await l(T),console.log("My schedule saved successfully")}catch(A){console.error("Error saving my schedule:",A)}finally{u.value=!1}}function I(){r.logout(),e.push("/login")}async function R(){try{c.value=!0,await Promise.all([s(),a(),o(),v()]);const A=await tr(Qe(Xe,"app_settings","global"));if(A.exists()){const E=A.data();h.value=E.detailedAideSchedule||{}}c.value=!1}catch(A){console.error("Error loading aide schedule data:",A),c.value=!1}}return Ut(R),(A,E)=>{var T,b;return B(),V("div",Lhe,[d("div",Bhe,[E[2]||(E[2]=d("h1",null,"My Schedule",-1)),d("div",Uhe,[d("span",null,J(((T=Z(r).currentUser)==null?void 0:T.name)||((b=Z(r).currentUser)==null?void 0:b.email)),1),d("button",{onClick:I,class:"btn btn-secondary"}," Logout ")])]),d("div",$he,[Z(r).currentUser?p.value?c.value?(B(),V("div",jhe," Loading your schedule... ")):(B(),V("div",Ghe,[d("div",Whe,[E[7]||(E[7]=d("h2",null,"My Daily Schedule",-1)),d("div",zhe,[(B(!0),V(Re,null,Ve(y(),S=>(B(),V("div",{key:S.id,class:Ze(["time-block",S.type])},[d("div",Khe,[d("span",qhe,J(S.startTime)+" - "+J(S.endTime),1),d("span",Xhe,J(S.type),1)]),d("div",Yhe,[S.assignment?(B(),V("span",Jhe,J(S.assignment),1)):(B(),V("span",Qhe,"No Assignment"))])],2))),128))])]),d("div",Zhe,[E[9]||(E[9]=d("h2",null,"Edit My Schedule",-1)),d("div",epe,[(B(!0),V(Re,null,Ve(x(),S=>(B(),V("div",{key:S.id,class:"time-block-editor"},[d("div",tpe,[d("span",rpe,J(S.startTime)+" - "+J(S.endTime),1),d("span",npe,J(S.type),1)]),d("div",spe,[we(d("select",{"onUpdate:modelValue":k=>S.assignments[m.value]=k,class:"assignment-select"},[E[8]||(E[8]=d("option",{value:""},"No Assignment",-1)),(B(!0),V(Re,null,Ve(g.value,k=>(B(),V("option",{key:k.id,value:`teacher:${k.id}`},J(k.name||k.email),9,ipe))),128)),(B(!0),V(Re,null,Ve(Z(i),k=>(B(),V("option",{key:k.id,value:`student:${k.id}`},J(Z(dt)(k,"firstName"))+" "+J(Z(dt)(k,"lastName")),9,ope))),128))],8,ape),[[mr,S.assignments[m.value]]])])]))),128))]),d("div",lpe,[d("button",{onClick:_,class:"btn btn-primary",disabled:u.value},[u.value?(B(),V("span",upe,"")):(B(),V("span",dpe,"")),Oe(" "+J(u.value?"Saving...":"Save My Schedule"),1)],8,cpe)])])])):(B(),V("div",Hhe,[E[5]||(E[5]=d("h2",null,"Access Denied",-1)),E[6]||(E[6]=d("p",null,"This page is only available to paraeducators.",-1)),d("button",{onClick:E[1]||(E[1]=S=>Z(e).push("/")),class:"btn btn-primary"},"Go Home")])):(B(),V("div",Vhe,[E[3]||(E[3]=d("h2",null,"Authentication Required",-1)),E[4]||(E[4]=d("p",null,"Please log in to access this page.",-1)),d("button",{onClick:E[0]||(E[0]=S=>Z(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])])}}},hpe=yt(fpe,[["__scopeId","data-v-f2c7a0cd"]]),ppe={class:"secure-pdf-test"},mpe={class:"test-section"},gpe={class:"status-grid"},vpe={class:"status-item"},xpe={class:"status-value"},ype={class:"status-item"},Epe={class:"status-value"},_pe={class:"status-item"},bpe={class:"status-value"},Spe={class:"status-item"},Tpe={class:"status-value"},Ape={class:"test-section"},wpe=["disabled"],Cpe=["disabled"],Ipe={class:"test-section"},kpe=["disabled"],Dpe={key:0,class:"error-message"},Ppe={key:1,class:"success-message"},Rpe={key:0,class:"test-section"},Fpe=["disabled"],Ope={key:0,class:"error-message"},Npe={key:1,class:"success-message"},Mpe={class:"test-section"},Lpe=["disabled"],Bpe={key:0,class:"error-message"},Upe={key:1,class:"success-message"},$pe={class:"test-section"},Vpe=["disabled"],Hpe={key:0,class:"error-message"},jpe={key:1,class:"success-message"},Gpe={__name:"SecurePdfTest",setup(t){const e=se(null),r=se("test-student-123"),n=se(null),s=se(!1),i=se(!1),a=se(!1),o=se(null),l=se(null),c=se(!1),u=se(null),f=se(null),h=se("Checking..."),p=se("Checking..."),m=se("Checking..."),g=se("Checking..."),v=se(null),x=se(null),y=se(null),_=se(null),{uploadPdf:I,downloadPdf:R,isUploading:A,isDownloading:E}=Cx();Ae(()=>{var P,O,M;return((P=$t.currentUser)==null?void 0:P.role)||((M=(O=$t.currentUser)==null?void 0:O.claims)==null?void 0:M.role)||"unknown"});const T=P=>{const O=P.target.files[0];if(O){if(O.type!=="application/pdf"){alert("Please select a PDF file"),P.target.value="";return}e.value=O,x.value=null,v.value=null,o.value=null,l.value=null}},b=async()=>{var P,O;if(!r.value){alert("Please enter a student ID");return}try{s.value=!0;const M=$t.currentUser;if(M){const j=await M.getIdTokenResult();console.log(" User token result:",j),console.log(" User role from token:",j.claims.role)}const U=Qe(Xe,"students",r.value);(await tr(U)).exists()?alert(" Test student already exists"):(await Kt(U,{app:{studentData:{firstName:"Test",lastName:"Student",grade:"7",plan:"IEP",caseManagerId:((P=$t.currentUser)==null?void 0:P.uid)||"test-case-manager"},staffIds:[((O=$t.currentUser)==null?void 0:O.uid)||"test-user"],schedule:{periods:{},classServices:[]},providers:{},accommodations:{instruction:"",assessment:""},flags:{flag1:!1,flag2:!1}},createdAt:$s()}),alert(" Test student created successfully!"))}catch(M){alert(` Error creating test student: ${M.message}`),console.error("Error creating test student:",M),M.message.includes("permissions")&&alert(" Admin permissions required. Try using an existing student ID instead.")}finally{s.value=!1}},S=async()=>{var P,O,M,U;try{i.value=!0;const z=wt(Xe,"students"),j=ur(z,Ns(5)),H=await jt(j);if(H.empty)alert(" No students found in database");else{const W=H.docs.map(re=>({id:re.id,...re.data()}));console.log(" Available students:",W);const K=W[0];r.value=K.id,alert(` Found student: ${((O=(P=K.app)==null?void 0:P.studentData)==null?void 0:O.firstName)||"Unknown"} ${((U=(M=K.app)==null?void 0:M.studentData)==null?void 0:U.lastName)||"Student"} (ID: ${K.id})`)}}catch(z){alert(` Error finding student: ${z.message}`),console.error("Error finding student:",z)}finally{i.value=!1}},k=async()=>{if(!e.value||!r.value){alert("Please select a file and enter a student ID");return}try{x.value=null,v.value=null;const P=await I(e.value,r.value);v.value=P,console.log(" Test PDF uploaded successfully:",P)}catch(P){x.value=P.message,console.error(" Test PDF upload failed:",P)}},w=async()=>{if(!v.value||!r.value){alert("Please upload a PDF first");return}try{y.value=null,_.value=null,await R(v.value,r.value,"test-document.pdf"),_.value=!0,console.log(" Test PDF downloaded successfully")}catch(P){y.value=P.message,console.error(" Test PDF download failed:",P)}},D=async()=>{if(!e.value){alert("Please select a file first");return}try{a.value=!0,o.value=null,l.value=null;const P=nh(Ec,`public/test-${Date.now()}.pdf`);await aI(P,e.value),l.value=!0,console.log(" Direct upload successful")}catch(P){o.value=P.message,console.error(" Direct upload failed:",P)}finally{a.value=!1}},N=async()=>{if(!r.value){alert("Please enter a student ID first");return}try{c.value=!0,u.value=null,f.value=null;const{getFunctions:P,httpsCallable:O}=await sa(async()=>{const{getFunctions:W,httpsCallable:K}=await Promise.resolve().then(()=>h0);return{getFunctions:W,httpsCallable:K}},void 0),M=P(),U=O(M,"getStudentFileUrl"),z="test-document.pdf";console.log(` Testing cloud function with studentId: ${r.value}, fileName: ${z}`);const j=await U({studentId:r.value,fileName:z});console.log(" Cloud function result:",j.data),f.value=!0;const H=j.data.url;H&&!H.includes("token=")?console.log(" URL is private (no download token)"):console.warn(" URL may not be private")}catch(P){u.value=P.message,console.error(" Cloud function test failed:",P)}finally{c.value=!1}},F=async()=>{try{const P=g0.encryptionKey;h.value=P&&P!=="your-dev-key-here"?" Configured":" Using default key";try{const O=nh(Ec,"public/test-access");await oI(O),p.value=" Accessible"}catch(O){O.code==="storage/unauthorized"?p.value=" Limited access (expected)":p.value=" Access denied"}try{const O=Qe(Xe,"test","test");await tr(O),m.value=" Accessible"}catch{m.value=" Access denied"}try{const O=$t.currentUser;if(O){const M=await O.getIdTokenResult();g.value=M.claims.role||"unknown",console.log(" User role detected:",g.value)}else g.value="not authenticated"}catch(O){g.value="error reading role",console.error("Error reading user role:",O)}}catch(P){console.error("Error checking system status:",P)}};return Ut(()=>{F()}),(P,O)=>(B(),V("div",ppe,[O[16]||(O[16]=d("h2",null," Secure PDF System Test",-1)),d("div",mpe,[O[5]||(O[5]=d("h3",null,"System Status",-1)),d("div",gpe,[d("div",vpe,[O[1]||(O[1]=d("span",{class:"status-label"},"Encryption Key:",-1)),d("span",xpe,J(h.value),1)]),d("div",ype,[O[2]||(O[2]=d("span",{class:"status-label"},"Storage Access:",-1)),d("span",Epe,J(p.value),1)]),d("div",_pe,[O[3]||(O[3]=d("span",{class:"status-label"},"Firestore Access:",-1)),d("span",bpe,J(m.value),1)]),d("div",Spe,[O[4]||(O[4]=d("span",{class:"status-label"},"User Role:",-1)),d("span",Tpe,J(g.value),1)])])]),d("div",Ape,[O[6]||(O[6]=d("h3",null,"Test Student ID",-1)),we(d("input",{"onUpdate:modelValue":O[0]||(O[0]=M=>r.value=M),placeholder:"Enter test student ID",class:"student-id-input"},null,512),[[Je,r.value]]),O[7]||(O[7]=d("p",{class:"help-text"},"Enter a student ID to test with. You can:",-1)),O[8]||(O[8]=d("ul",{class:"help-text"},[d("li",null,"Use an existing student ID from your database"),d("li",null,"Create a new test student (requires admin permissions)"),d("li",null,'Use "test-student-123" for testing')],-1)),d("button",{onClick:b,disabled:s.value,class:"btn btn-secondary"},J(s.value?"Creating...":"Create Test Student"),9,wpe),d("button",{onClick:S,disabled:i.value,class:"btn btn-secondary"},J(i.value?"Finding...":"Find Existing Student"),9,Cpe)]),d("div",Ipe,[O[9]||(O[9]=d("h3",null,"Upload Test PDF",-1)),d("input",{type:"file",accept:"application/pdf",onChange:T,ref_key:"fileInput",ref:n},null,544),d("button",{onClick:k,disabled:!e.value||Z(A)},J(Z(A)?" Uploading...":" Upload PDF"),9,kpe),x.value?(B(),V("div",Dpe,J(x.value),1)):_e("",!0),v.value?(B(),V("div",Ppe,"  PDF uploaded successfully! Secure filename: "+J(v.value),1)):_e("",!0)]),v.value?(B(),V("div",Rpe,[O[10]||(O[10]=d("h3",null,"Download Test PDF",-1)),d("button",{onClick:w,disabled:Z(E)},J(Z(E)?" Downloading...":" Download PDF"),9,Fpe),y.value?(B(),V("div",Ope,J(y.value),1)):_e("",!0),_.value?(B(),V("div",Npe,"  PDF downloaded successfully! ")):_e("",!0)])):_e("",!0),d("div",Mpe,[O[11]||(O[11]=d("h3",null,"Alternative Test: Direct Storage Upload",-1)),O[12]||(O[12]=d("p",{class:"help-text"},"This test bypasses the secure PDF system and uploads directly to storage for comparison.",-1)),d("button",{onClick:D,disabled:!e.value||a.value},J(a.value?" Uploading...":" Test Direct Upload"),9,Lpe),o.value?(B(),V("div",Bpe,J(o.value),1)):_e("",!0),l.value?(B(),V("div",Upe,"  Direct upload successful! This confirms storage permissions are working. ")):_e("",!0)]),d("div",$pe,[O[14]||(O[14]=d("h3",null,"Test Cloud Function: Private URL Generation",-1)),O[15]||(O[15]=d("p",{class:"help-text"},"Test if the cloud function can generate private URLs for existing files.",-1)),d("button",{onClick:N,disabled:c.value},J(c.value?" Testing...":" Test Cloud Function"),9,Vpe),u.value?(B(),V("div",Hpe,J(u.value),1)):_e("",!0),f.value?(B(),V("div",jpe,O[13]||(O[13]=[Oe("  Cloud function working! Private URL generated successfully. "),d("br",null,null,-1),d("small",null,"URL expires in 5 minutes",-1)]))):_e("",!0)])]))}},Wpe=yt(Gpe,[["__scopeId","data-v-4c041459"]]);async function zpe(){var t;console.log("Starting student ID migration...");try{const e=wt(Xe,"students"),r=await jt(e);console.log(`Found ${r.size} students to migrate`);let n=0,s=0;for(const i of r.docs){const a=i.data(),o=i.id;if(!/^\d+$/.test(o)){console.log(`Student ${o} already uses auto-generated ID, skipping`);continue}const l=o;try{const c=Qe(wt(Xe,"students")),u={...a,app:{...a.app,studentData:{...(t=a.app)==null?void 0:t.studentData,ssid:l}},migratedFrom:o,migratedAt:new Date().toISOString()};await Kt(c,u),await co(Qe(Xe,"students",o)),console.log(` Migrated student ${o}  ${c.id}`),n++}catch(c){console.error(` Failed to migrate student ${o}:`,c),s++}}return console.log(`Migration complete: ${n} migrated, ${s} errors`),{migratedCount:n,errorCount:s}}catch(e){throw console.error("Migration failed:",e),e}}async function Kpe(){var t,e;console.log("Verifying migration...");try{const r=wt(Xe,"students"),n=await jt(r);let s=0,i=0;for(const a of n.docs){const o=a.data(),l=a.id,c=(e=(t=o.app)==null?void 0:t.studentData)==null?void 0:e.ssid;c?(console.log(` Student ${l} has SSID: ${c}`),s++):(console.warn(` Student ${l} missing SSID in app data`),i++)}return console.log(`Verification complete: ${s} verified, ${i} issues`),{verifiedCount:s,issuesCount:i}}catch(r){throw console.error("Verification failed:",r),r}}async function qpe(){var s,i,a,o;console.log(" Starting period label migration...");const{getNumber:t}=mo();let e=0,r=0,n=[];try{const l=wt(Xe,"students"),c=await jt(l);e=c.size,console.log(` Found ${e} students to check`);for(const u of c.docs)try{const f=u.data();let h=!1,p={};const m=((i=(s=f.app)==null?void 0:s.schedule)==null?void 0:i.periods)||f.schedule||{};if(Object.entries(m).forEach(([g,v])=>{if(isNaN(parseInt(g))){const x=t(g);if(x)p[x]=v,h=!0,console.log(` Converting "${g}"  ${x} for student ${u.id}`);else{const y=g.match(/^(?:period|per)(\d+)$/i);y?(p[parseInt(y[1])]=v,h=!0,console.log(` Converting "${g}"  ${y[1]} for student ${u.id}`)):(console.warn(` Could not convert period key "${g}" for student ${u.id}`),p[g]=v)}}else p[g]=v}),h){const g={};(o=(a=f.app)==null?void 0:a.schedule)!=null&&o.periods?g["app.schedule.periods"]=p:f.schedule&&(g.schedule=p),Object.keys(g).length>0&&(await Jd(Qe(Xe,"students",u.id),g),r++,console.log(` Updated student ${u.id}`))}}catch(f){console.error(` Error processing student ${u.id}:`,f),n.push({studentId:u.id,error:f.message})}return console.log(" Migration completed!"),console.log(" Results:"),console.log(`   - Total students checked: ${e}`),console.log(`   - Students migrated: ${r}`),console.log(`   - Errors: ${n.length}`),n.length>0&&(console.warn(" Errors encountered:"),n.forEach(({studentId:u,error:f})=>{console.warn(`   - ${u}: ${f}`)})),{success:!0,totalStudents:e,migratedStudents:r,errors:n}}catch(l){return console.error(" Migration failed:",l),{success:!1,error:l.message,totalStudents:e,migratedStudents:r,errors:n}}}async function Xpe(){var n,s;console.log(" Starting migration preview...");const{getNumber:t}=mo();let e=0,r=[];try{const i=wt(Xe,"students"),a=await jt(i);e=a.size;for(const o of a.docs){const l=o.data(),c=((s=(n=l.app)==null?void 0:n.schedule)==null?void 0:s.periods)||l.schedule||{};let u=[];Object.keys(c).forEach(f=>{if(isNaN(parseInt(f))){const h=t(f);if(h)u.push({from:f,to:h});else{const p=f.match(/^(?:period|per)(\d+)$/i);p&&u.push({from:f,to:parseInt(p[1])})}}}),u.length>0&&r.push({id:o.id,name:`${l.firstName||""} ${l.lastName||""}`.trim(),changes:u})}return console.log(" Migration Preview Results:"),console.log(`   - Total students: ${e}`),console.log(`   - Students needing migration: ${r.length}`),r.length>0&&(console.log("   - Changes needed:"),r.forEach(o=>{console.log(`      ${o.name} (${o.id}):`),o.changes.forEach(l=>{console.log(`        "${l.from}"  ${l.to}`)})})),{totalStudents:e,studentsNeedingMigration:r,changesNeeded:r.length>0}}catch(i){return console.error(" Preview failed:",i),{error:i.message,totalStudents:0,studentsNeedingMigration:[],changesNeeded:!1}}}const Ype={class:"testing-view"},Jpe={class:"test-section"},Qpe={class:"status-grid"},Zpe={class:"status-item"},eme={class:"status-item"},tme={class:"status-item"},rme={key:0,class:"test-section"},nme={class:"settings-display"},sme={class:"setting-group"},ame={class:"setting-values"},ime={class:"setting-group"},ome={class:"setting-values"},lme={class:"setting-group"},cme={class:"setting-values"},ume={class:"setting-group"},dme={class:"setting-values"},fme={class:"test-section"},hme={class:"admin-action-btns"},pme=["disabled"],mme=["disabled"],gme={class:"test-section"},vme={class:"integration-test"},xme={key:0,class:"test-form-container"},yme={class:"test-section"},Eme={class:"admin-action-btns"},_me=["disabled"],bme=["disabled"],Sme={key:0,class:"migration-result"},Tme={class:"test-section"},Ame={class:"period-migration-controls"},wme=["disabled"],Cme=["disabled"],Ime={key:0,class:"migration-result"},kme={class:"test-section"},Dme={class:"ssid-test-controls"},Pme=["disabled"],Rme={key:0,class:"ssid-test-result"},Fme={class:"test-section"},Ome={__name:"TestingView",setup(t){const{appSettings:e,loadAppSettings:r,resetAppSettings:n,loading:s,error:i}=Ws(),{labels:a}=mo(),o=se(!1),l=se(!1),c=se(!1),u=se(null),f=se(!1),h=se(null),p=se(!1),m=se(null);Ut(async()=>{console.log("TestingView: Component mounted, checking app settings...")});const g=async()=>{try{await r(),console.log("TestingView: Settings reloaded successfully")}catch(T){console.error("TestingView: Error reloading settings:",T)}},v=async()=>{try{await n(),console.log("TestingView: Settings reset successfully")}catch(T){console.error("TestingView: Error resetting settings:",T)}},x=T=>{console.log("TestingView: Test student saved:",T),o.value=!1},y=async()=>{l.value=!0,u.value=null;try{const T=await zpe();u.value=T,console.log("Migration completed:",T)}catch(T){u.value={error:T.message},console.error("Migration failed:",T)}finally{l.value=!1}},_=async()=>{c.value=!0,u.value=null;try{const T=await Kpe();u.value=T,console.log("Verification completed:",T)}catch(T){u.value={error:T.message},console.error("Verification failed:",T)}finally{c.value=!1}},I=async()=>{f.value=!0,h.value=null;try{const T=[{sourcedId:"123456789",givenName:"John",familyName:"Doe",specialEducation:"true"},{SSID:"987654321",FirstName:"Jane",LastName:"Smith",IEP:"Yes"},{ssid:"555666777",FirstName:"Bob",LastName:"Johnson",iep:"1"},{StateStudentID:"111222333",FirstName:"Alice",LastName:"Brown",504:"true"}],b={aeriesMapping:{},seisMapping:{},ssidExtraction:{},fieldMapping:{}};T.forEach((k,w)=>{const D={};Object.keys(k).forEach(N=>{D[N]=xv(N)}),b.aeriesMapping[`row_${w}`]=D}),T.forEach((k,w)=>{const D={};Object.keys(k).forEach(N=>{D[N]=yv(N)}),b.seisMapping[`row_${w}`]=D}),T.forEach((k,w)=>{var N;const D=(N=k.sourcedId||k.SSID||k.ssid||k.StateStudentID||k.stateStudentId)==null?void 0:N.trim();b.ssidExtraction[`row_${w}`]={original:k,extractedSSID:D,success:!!D}});const S=["specialEducation","iep","IEP","plan504","504","disabilities","accommodations"];b.fieldMapping={aeries:S.map(k=>({field:k,mapped:xv(k)})),seis:S.map(k=>({field:k,mapped:yv(k)}))},h.value={success:!0,message:"SSID resolution test completed successfully",results:b},console.log("SSID resolution test completed:",b)}catch(T){h.value={success:!1,error:T.message,message:"SSID resolution test failed"},console.error("SSID resolution test failed:",T)}finally{f.value=!1}},R=()=>{h.value=null},A=async()=>{p.value=!0,m.value=null;try{console.log("Starting period label migration preview...");const T=await Xpe();T.error?m.value=`Preview failed: ${T.error}`:T.changesNeeded?m.value=`Preview completed: ${T.studentsNeedingMigration.length} students need migration (see console for details)`:m.value="No migration needed - all students already use numeric period keys"}catch(T){console.error("Period migration preview failed:",T),m.value=`Preview error: ${T.message}`}finally{p.value=!1}},E=async()=>{if(confirm("This will update period keys from labels to numbers for all students. Continue?")){p.value=!0,m.value=null;try{console.log("Starting period label migration...");const T=await qpe();T.success?(m.value=`Migration completed: ${T.migratedStudents}/${T.totalStudents} students updated`,T.errors.length>0&&(m.value+=` (${T.errors.length} errors - see console)`)):m.value=`Migration failed: ${T.error}`}catch(T){console.error("Period migration failed:",T),m.value=`Migration error: ${T.message}`}finally{p.value=!1}}};return(T,b)=>{var S,k,w,D,N,F;return B(),V("div",Ype,[b[21]||(b[21]=d("h2",null,"App Settings Testing",-1)),d("div",Jpe,[b[5]||(b[5]=d("h3",null,"App Settings Status",-1)),d("div",Qpe,[d("div",Zpe,[b[2]||(b[2]=d("strong",null,"Loading:",-1)),Oe(" "+J(Z(s)?"Yes":"No"),1)]),d("div",eme,[b[3]||(b[3]=d("strong",null,"Error:",-1)),Oe(" "+J(Z(i)||"None"),1)]),d("div",tme,[b[4]||(b[4]=d("strong",null,"Loaded:",-1)),Oe(" "+J(Z(e)&&Object.keys(Z(e)).length>0?"Yes":"No"),1)])])]),Z(e)?(B(),V("div",rme,[b[10]||(b[10]=d("h3",null,"Current Settings",-1)),d("div",nme,[d("div",sme,[d("h4",null,"Grades ("+J(((S=Z(e).grades)==null?void 0:S.length)||0)+")",1),d("div",ame,J(((k=Z(e).grades)==null?void 0:k.join(", "))||"None configured"),1)]),d("div",ime,[d("h4",null,"Class Services ("+J(((w=Z(e).classServices)==null?void 0:w.length)||0)+")",1),d("div",ome,[(B(!0),V(Re,null,Ve(Z(e).classServices,P=>{var O;return B(),V("div",{key:P.name,class:"service-item"},[d("strong",null,J(P.name)+":",1),Oe(" "+J(((O=P.enabledSubcategories)==null?void 0:O.join(", "))||"None enabled"),1)])}),128))])]),d("div",lme,[d("h4",null,"Service Providers ("+J(((D=Z(e).serviceProviders)==null?void 0:D.length)||0)+")",1),d("div",cme,J(((N=Z(e).serviceProviders)==null?void 0:N.join(", "))||"None configured"),1)]),d("div",ume,[b[9]||(b[9]=d("h4",null,"Periods",-1)),d("div",dme,[b[6]||(b[6]=d("strong",null,"Number:",-1)),Oe(" "+J(Z(e).numPeriods||0),1),b[7]||(b[7]=d("br",null,null,-1)),b[8]||(b[8]=d("strong",null,"Labels:",-1)),Oe(" "+J(((F=Z(a))==null?void 0:F.join(", "))||"None"),1)])])])])):_e("",!0),d("div",fme,[b[11]||(b[11]=d("h3",null,"Test Actions",-1)),d("div",hme,[d("button",{onClick:g,disabled:Z(s),class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},J(Z(s)?"Loading...":"Reload Settings"),9,pme),d("button",{onClick:v,disabled:Z(s),class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Reset to Defaults ",8,mme)])]),d("div",gme,[b[13]||(b[13]=d("h3",null,"Component Integration Test",-1)),d("div",vme,[b[12]||(b[12]=d("p",null,"This section tests if the StudentForm can access app settings:",-1)),d("button",{onClick:b[0]||(b[0]=P=>o.value=!o.value),class:"btn btn-primary"},J(o.value?"Hide":"Show")+" Test Student Form ",1),o.value?(B(),V("div",xme,[st(Ix,{users:{userRoles:{}},mode:"new",onClose:b[1]||(b[1]=P=>o.value=!1),onSaved:x})])):_e("",!0)])]),d("div",yme,[b[15]||(b[15]=d("h3",null,"Migration Tools",-1)),d("div",Eme,[d("button",{onClick:y,disabled:l.value,class:"admin-action-btn",style:{"min-width":"160px","max-width":"160px"}},J(l.value?"Migrating...":"Migrate Student IDs"),9,_me),d("button",{onClick:_,disabled:c.value,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},J(c.value?"Verifying...":"Verify Migration"),9,bme)]),u.value?(B(),V("div",Sme,[b[14]||(b[14]=d("h4",null,"Migration Result:",-1)),d("pre",null,J(JSON.stringify(u.value,null,2)),1)])):_e("",!0)]),d("div",Tme,[b[17]||(b[17]=d("h3",null,"Period Label Migration",-1)),d("div",Ame,[d("button",{onClick:A,disabled:p.value,class:"btn btn-secondary"},J(p.value?"Previewing...":"Preview Period Migration"),9,wme),d("button",{onClick:E,disabled:p.value,class:"btn btn-warning"},J(p.value?"Migrating...":"Run Period Migration"),9,Cme)]),m.value?(B(),V("div",Ime,[b[16]||(b[16]=d("h4",null,"Period Migration Result:",-1)),d("p",null,J(m.value),1)])):_e("",!0)]),d("div",kme,[b[19]||(b[19]=d("h3",null,"SSID Resolution Test",-1)),d("div",Dme,[d("button",{onClick:I,disabled:f.value,class:"btn btn-primary"},J(f.value?"Testing...":"Test SSID Resolution"),9,Pme),d("button",{onClick:R,class:"btn btn-secondary"}," Clear Results ")]),h.value?(B(),V("div",Rme,[b[18]||(b[18]=d("h4",null,"SSID Resolution Test Result:",-1)),d("pre",null,J(JSON.stringify(h.value,null,2)),1)])):_e("",!0)]),d("div",Fme,[b[20]||(b[20]=d("h3",null," Secure PDF System Test",-1)),st(Wpe)])])}}},Nme=yt(Ome,[["__scopeId","data-v-16ace2fd"]]);function Mme(t){const{waitForAuthInit:e}=xd();e.then(()=>{t.beforeEach((r,n,s)=>{const{currentUser:i}=xd(),a=r.meta.requiresAuth,o=r.meta.allowedRoles;a&&!i.value?s({name:"Login"}):a&&i.value&&!i.value.role?(console.log(`User ${i.value.uid} exists in Auth but has no role - redirecting to login for role assignment`),s({name:"Login"})):a&&o&&i.value&&!o.includes(i.value.role)?(console.warn(`User with role '${i.value.role}' tried to access restricted route: ${r.path}`),s({name:"Home"})):s()})})}const Lme=[{path:"/login",name:"Login",component:QH},{path:"/",name:"Home",component:tS,meta:{requiresAuth:!0,allowedRoles:ub}},{path:"/students",name:"Students",component:tS,meta:{requiresAuth:!0,allowedRoles:ub}},{path:"/admin",name:"Admin",component:Mhe,meta:{requiresAuth:!0,allowedRoles:eu}},{path:"/admin/aide-assignment",name:"AdminAideAssignment",component:VI,meta:{requiresAuth:!0,allowedRoles:eu}},{path:"/admin/time-table",name:"AdminTimeTable",component:bk,meta:{requiresAuth:!0,allowedRoles:eu}},{path:"/admin/aide-schedule",name:"AdminAideSchedule",component:Ok,meta:{requiresAuth:!0,allowedRoles:eu}},{path:"/admin/backup-restore",name:"AdminBackupRestore",component:Nk,meta:{requiresAuth:!0,allowedRoles:eu}},{path:"/aide-schedule",name:"AideSchedule",component:hpe,meta:{requiresAuth:!0,allowedRoles:["paraeducator"]}},{path:"/testing",name:"Testing",component:Nme,meta:{requiresAuth:!0,allowedRoles:["admin","administrator","sped_chair","administrator_504_CM"]}}],Lk=IL({history:nL("/"),routes:Lme});Mme(Lk);const oy=L0(dB),Bme=F3();oy.use(Lk);oy.use(Bme);oy.mount("#app");
