const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TestingView-BnaAJDTD.js","assets/TestingView-n3T5wFkl.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function eh(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Ht={},kl=[],Is=()=>{},uk=()=>!1,cd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),fg=t=>t.startsWith("onUpdate:"),lr=Object.assign,hg=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},dk=Object.prototype.hasOwnProperty,Jt=(t,e)=>dk.call(t,e),it=Array.isArray,Dl=t=>uc(t)==="[object Map]",Ho=t=>uc(t)==="[object Set]",uy=t=>uc(t)==="[object Date]",fk=t=>uc(t)==="[object RegExp]",gt=t=>typeof t=="function",hr=t=>typeof t=="string",Zs=t=>typeof t=="symbol",ar=t=>t!==null&&typeof t=="object",pg=t=>(ar(t)||gt(t))&&gt(t.then)&&gt(t.catch),j_=Object.prototype.toString,uc=t=>j_.call(t),hk=t=>uc(t).slice(8,-1),th=t=>uc(t)==="[object Object]",mg=t=>hr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Rl=eh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rh=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},pk=/-(\w)/g,hn=rh(t=>t.replace(pk,(e,r)=>r?r.toUpperCase():"")),mk=/\B([A-Z])/g,os=rh(t=>t.replace(mk,"-$1").toLowerCase()),ud=rh(t=>t.charAt(0).toUpperCase()+t.slice(1)),nu=rh(t=>t?`on${ud(t)}`:""),zn=(t,e)=>!Object.is(t,e),Fl=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},qm=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},n0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},s0=t=>{const e=hr(t)?Number(t):NaN;return isNaN(e)?t:e};let dy;const nh=()=>dy||(dy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),vk="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",gk=eh(vk);function Cn(t){if(it(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=hr(n)?bk(n):Cn(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(hr(t)||ar(t))return t}const xk=/;(?![^(]*\))/g,yk=/:([^]+)/,Ek=/\/\*[^]*?\*\//g;function bk(t){const e={};return t.replace(Ek,"").split(xk).forEach(r=>{if(r){const n=r.split(yk);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function at(t){let e="";if(hr(t))e=t;else if(it(t))for(let r=0;r<t.length;r++){const n=at(t[r]);n&&(e+=n+" ")}else if(ar(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function _k(t){if(!t)return null;let{class:e,style:r}=t;return e&&!hr(e)&&(t.class=at(e)),r&&(t.style=Cn(r)),t}const Sk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Tk=eh(Sk);function G_(t){return!!t||t===""}function Ak(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=Wi(t[n],e[n]);return r}function Wi(t,e){if(t===e)return!0;let r=uy(t),n=uy(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=Zs(t),n=Zs(e),r||n)return t===e;if(r=it(t),n=it(e),r||n)return r&&n?Ak(t,e):!1;if(r=ar(t),n=ar(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!Wi(t[a],e[a]))return!1}}return String(t)===String(e)}function sh(t,e){return t.findIndex(r=>Wi(r,e))}const W_=t=>!!(t&&t.__v_isRef===!0),oe=t=>hr(t)?t:t==null?"":it(t)||ar(t)&&(t.toString===j_||!gt(t.toString))?W_(t)?oe(t.value):JSON.stringify(t,z_,2):String(t),z_=(t,e)=>W_(e)?z_(t,e.value):Dl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],i)=>(r[cp(n,i)+" =>"]=s,r),{})}:Ho(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>cp(r))}:Zs(e)?cp(e):ar(e)&&!it(e)&&!th(e)?String(e):e,cp=(t,e="")=>{var r;return Zs(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Tn;class vg{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Tn,!e&&Tn&&(this.index=(Tn.scopes||(Tn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Tn;try{return Tn=this,e()}finally{Tn=r}}}on(){++this._on===1&&(this.prevScope=Tn,Tn=this)}off(){this._on>0&&--this._on===0&&(Tn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function gg(t){return new vg(t)}function xg(){return Tn}function K_(t,e=!1){Tn&&Tn.cleanups.push(t)}let ur;const up=new WeakSet;class Pu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Tn&&Tn.active&&Tn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,up.has(this)&&(up.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||X_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fy(this),Y_(this);const e=ur,r=Ys;ur=this,Ys=!0;try{return this.fn()}finally{Q_(this),ur=e,Ys=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bg(e);this.deps=this.depsTail=void 0,fy(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?up.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xm(this)&&this.run()}get dirty(){return Xm(this)}}let q_=0,su,au;function X_(t,e=!1){if(t.flags|=8,e){t.next=au,au=t;return}t.next=su,su=t}function yg(){q_++}function Eg(){if(--q_>0)return;if(au){let e=au;for(au=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;su;){let e=su;for(su=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function Y_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Q_(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),bg(n),wk(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function Xm(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(J_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function J_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ou)||(t.globalVersion=Ou,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Xm(t))))return;t.flags|=2;const e=t.dep,r=ur,n=Ys;ur=t,Ys=!0;try{Y_(t);const s=t.fn(t._value);(e.version===0||zn(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{ur=r,Ys=n,Q_(t),t.flags&=-3}}function bg(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)bg(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function wk(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}function Ck(t,e){t.effect instanceof Pu&&(t=t.effect.fn);const r=new Pu(t);e&&lr(r,e);try{r.run()}catch(s){throw r.stop(),s}const n=r.run.bind(r);return n.effect=r,n}function Ik(t){t.effect.stop()}let Ys=!0;const Z_=[];function Xa(){Z_.push(Ys),Ys=!1}function Ya(){const t=Z_.pop();Ys=t===void 0?!0:t}function fy(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=ur;ur=void 0;try{e()}finally{ur=r}}}let Ou=0;class kk{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ah{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ur||!Ys||ur===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==ur)r=this.activeLink=new kk(ur,this),ur.deps?(r.prevDep=ur.depsTail,ur.depsTail.nextDep=r,ur.depsTail=r):ur.deps=ur.depsTail=r,eS(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=ur.depsTail,r.nextDep=void 0,ur.depsTail.nextDep=r,ur.depsTail=r,ur.deps===r&&(ur.deps=n)}return r}trigger(e){this.version++,Ou++,this.notify(e)}notify(e){yg();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Eg()}}}function eS(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)eS(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const a0=new WeakMap,So=Symbol(""),Ym=Symbol(""),Nu=Symbol("");function In(t,e,r){if(Ys&&ur){let n=a0.get(t);n||a0.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new ah),s.map=n,s.key=r),s.track()}}function Ma(t,e,r,n,s,i){const a=a0.get(t);if(!a){Ou++;return}const o=l=>{l&&l.trigger()};if(yg(),e==="clear")a.forEach(o);else{const l=it(t),c=l&&mg(r);if(l&&r==="length"){const u=Number(n);a.forEach((d,f)=>{(f==="length"||f===Nu||!Zs(f)&&f>=u)&&o(d)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),c&&o(a.get(Nu)),e){case"add":l?c&&o(a.get("length")):(o(a.get(So)),Dl(t)&&o(a.get(Ym)));break;case"delete":l||(o(a.get(So)),Dl(t)&&o(a.get(Ym)));break;case"set":Dl(t)&&o(a.get(So));break}}Eg()}function Dk(t,e){const r=a0.get(t);return r&&r.get(e)}function ul(t){const e=Vt(t);return e===t?e:(In(e,"iterate",Nu),ys(t)?e:e.map(dn))}function ih(t){return In(t=Vt(t),"iterate",Nu),t}const Rk={__proto__:null,[Symbol.iterator](){return dp(this,Symbol.iterator,dn)},concat(...t){return ul(this).concat(...t.map(e=>it(e)?ul(e):e))},entries(){return dp(this,"entries",t=>(t[1]=dn(t[1]),t))},every(t,e){return Na(this,"every",t,e,void 0,arguments)},filter(t,e){return Na(this,"filter",t,e,r=>r.map(dn),arguments)},find(t,e){return Na(this,"find",t,e,dn,arguments)},findIndex(t,e){return Na(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Na(this,"findLast",t,e,dn,arguments)},findLastIndex(t,e){return Na(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Na(this,"forEach",t,e,void 0,arguments)},includes(...t){return fp(this,"includes",t)},indexOf(...t){return fp(this,"indexOf",t)},join(t){return ul(this).join(t)},lastIndexOf(...t){return fp(this,"lastIndexOf",t)},map(t,e){return Na(this,"map",t,e,void 0,arguments)},pop(){return Ic(this,"pop")},push(...t){return Ic(this,"push",t)},reduce(t,...e){return hy(this,"reduce",t,e)},reduceRight(t,...e){return hy(this,"reduceRight",t,e)},shift(){return Ic(this,"shift")},some(t,e){return Na(this,"some",t,e,void 0,arguments)},splice(...t){return Ic(this,"splice",t)},toReversed(){return ul(this).toReversed()},toSorted(t){return ul(this).toSorted(t)},toSpliced(...t){return ul(this).toSpliced(...t)},unshift(...t){return Ic(this,"unshift",t)},values(){return dp(this,"values",dn)}};function dp(t,e,r){const n=ih(t),s=n[e]();return n!==t&&!ys(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const Fk=Array.prototype;function Na(t,e,r,n,s,i){const a=ih(t),o=a!==t&&!ys(t),l=a[e];if(l!==Fk[e]){const d=l.apply(t,i);return o?dn(d):d}let c=r;a!==t&&(o?c=function(d,f){return r.call(this,dn(d),f,t)}:r.length>2&&(c=function(d,f){return r.call(this,d,f,t)}));const u=l.call(a,c,n);return o&&s?s(u):u}function hy(t,e,r,n){const s=ih(t);let i=r;return s!==t&&(ys(t)?r.length>3&&(i=function(a,o,l){return r.call(this,a,o,l,t)}):i=function(a,o,l){return r.call(this,a,dn(o),l,t)}),s[e](i,...n)}function fp(t,e,r){const n=Vt(t);In(n,"iterate",Nu);const s=n[e](...r);return(s===-1||s===!1)&&ch(r[0])?(r[0]=Vt(r[0]),n[e](...r)):s}function Ic(t,e,r=[]){Xa(),yg();const n=Vt(t)[e].apply(t,r);return Eg(),Ya(),n}const Pk=eh("__proto__,__v_isRef,__isVue"),tS=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Zs));function Ok(t){Zs(t)||(t=String(t));const e=Vt(this);return In(e,"has",t),e.hasOwnProperty(t)}class rS{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?lS:oS:i?iS:aS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=it(e);if(!s){let l;if(a&&(l=Rk[r]))return l;if(r==="hasOwnProperty")return Ok}const o=Reflect.get(e,r,Ar(e)?e:n);return(Zs(r)?tS.has(r):Pk(r))||(s||In(e,"get",r),i)?o:Ar(o)?a&&mg(r)?o:o.value:ar(o)?s?Sg(o):Os(o):o}}class nS extends rS{constructor(e=!1){super(!1,e)}set(e,r,n,s){let i=e[r];if(!this._isShallow){const l=Qa(i);if(!ys(n)&&!Qa(n)&&(i=Vt(i),n=Vt(n)),!it(e)&&Ar(i)&&!Ar(n))return l?!1:(i.value=n,!0)}const a=it(e)&&mg(r)?Number(r)<e.length:Jt(e,r),o=Reflect.set(e,r,n,Ar(e)?e:s);return e===Vt(s)&&(a?zn(n,i)&&Ma(e,"set",r,n):Ma(e,"add",r,n)),o}deleteProperty(e,r){const n=Jt(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&Ma(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!Zs(r)||!tS.has(r))&&In(e,"has",r),n}ownKeys(e){return In(e,"iterate",it(e)?"length":So),Reflect.ownKeys(e)}}class sS extends rS{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const Nk=new nS,Lk=new sS,Bk=new nS(!0),Mk=new sS(!0),Qm=t=>t,Zd=t=>Reflect.getPrototypeOf(t);function Uk(t,e,r){return function(...n){const s=this.__v_raw,i=Vt(s),a=Dl(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=s[t](...n),u=r?Qm:e?i0:dn;return!e&&In(i,"iterate",l?Ym:So),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:o?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function ef(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Vk(t,e){const r={get(s){const i=this.__v_raw,a=Vt(i),o=Vt(s);t||(zn(s,o)&&In(a,"get",s),In(a,"get",o));const{has:l}=Zd(a),c=e?Qm:t?i0:dn;if(l.call(a,s))return c(i.get(s));if(l.call(a,o))return c(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&In(Vt(s),"iterate",So),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=Vt(i),o=Vt(s);return t||(zn(s,o)&&In(a,"has",s),In(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=Vt(o),c=e?Qm:t?i0:dn;return!t&&In(l,"iterate",So),o.forEach((u,d)=>s.call(i,c(u),c(d),a))}};return lr(r,t?{add:ef("add"),set:ef("set"),delete:ef("delete"),clear:ef("clear")}:{add(s){!e&&!ys(s)&&!Qa(s)&&(s=Vt(s));const i=Vt(this);return Zd(i).has.call(i,s)||(i.add(s),Ma(i,"add",s,s)),this},set(s,i){!e&&!ys(i)&&!Qa(i)&&(i=Vt(i));const a=Vt(this),{has:o,get:l}=Zd(a);let c=o.call(a,s);c||(s=Vt(s),c=o.call(a,s));const u=l.call(a,s);return a.set(s,i),c?zn(i,u)&&Ma(a,"set",s,i):Ma(a,"add",s,i),this},delete(s){const i=Vt(this),{has:a,get:o}=Zd(i);let l=a.call(i,s);l||(s=Vt(s),l=a.call(i,s)),o&&o.call(i,s);const c=i.delete(s);return l&&Ma(i,"delete",s,void 0),c},clear(){const s=Vt(this),i=s.size!==0,a=s.clear();return i&&Ma(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=Uk(s,t,e)}),r}function oh(t,e){const r=Vk(t,e);return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(Jt(r,s)&&s in n?r:n,s,i)}const $k={get:oh(!1,!1)},Hk={get:oh(!1,!0)},jk={get:oh(!0,!1)},Gk={get:oh(!0,!0)},aS=new WeakMap,iS=new WeakMap,oS=new WeakMap,lS=new WeakMap;function Wk(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zk(t){return t.__v_skip||!Object.isExtensible(t)?0:Wk(hk(t))}function Os(t){return Qa(t)?t:lh(t,!1,Nk,$k,aS)}function _g(t){return lh(t,!1,Bk,Hk,iS)}function Sg(t){return lh(t,!0,Lk,jk,oS)}function Kk(t){return lh(t,!0,Mk,Gk,lS)}function lh(t,e,r,n,s){if(!ar(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=zk(t);if(i===0)return t;const a=s.get(t);if(a)return a;const o=new Proxy(t,i===2?n:r);return s.set(t,o),o}function pa(t){return Qa(t)?pa(t.__v_raw):!!(t&&t.__v_isReactive)}function Qa(t){return!!(t&&t.__v_isReadonly)}function ys(t){return!!(t&&t.__v_isShallow)}function ch(t){return t?!!t.__v_raw:!1}function Vt(t){const e=t&&t.__v_raw;return e?Vt(e):t}function uh(t){return!Jt(t,"__v_skip")&&Object.isExtensible(t)&&qm(t,"__v_skip",!0),t}const dn=t=>ar(t)?Os(t):t,i0=t=>ar(t)?Sg(t):t;function Ar(t){return t?t.__v_isRef===!0:!1}function he(t){return cS(t,!1)}function Tg(t){return cS(t,!0)}function cS(t,e){return Ar(t)?t:new qk(t,e)}class qk{constructor(e,r){this.dep=new ah,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Vt(e),this._value=r?e:dn(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||ys(e)||Qa(e);e=n?e:Vt(e),zn(e,r)&&(this._rawValue=e,this._value=n?e:dn(e),this.dep.trigger())}}function Xk(t){t.dep&&t.dep.trigger()}function ge(t){return Ar(t)?t.value:t}function Yk(t){return gt(t)?t():ge(t)}const Qk={get:(t,e,r)=>e==="__v_raw"?t:ge(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return Ar(s)&&!Ar(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function Ag(t){return pa(t)?t:new Proxy(t,Qk)}class Jk{constructor(e){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new ah,{get:n,set:s}=e(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function uS(t){return new Jk(t)}function dS(t){const e=it(t)?new Array(t.length):{};for(const r in t)e[r]=fS(t,r);return e}class Zk{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Dk(Vt(this._object),this._key)}}class eD{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function tD(t,e,r){return Ar(t)?t:gt(t)?new eD(t):ar(t)&&arguments.length>1?fS(t,e,r):he(t)}function fS(t,e,r){const n=t[e];return Ar(n)?n:new Zk(t,e,r)}class rD{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new ah(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ou-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ur!==this)return X_(this,!0),!0}get value(){const e=this.dep.track();return J_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function nD(t,e,r=!1){let n,s;return gt(t)?n=t:(n=t.get,s=t.set),new rD(n,s,r)}const sD={GET:"get",HAS:"has",ITERATE:"iterate"},aD={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},tf={},o0=new WeakMap;let bi;function iD(){return bi}function hS(t,e=!1,r=bi){if(r){let n=o0.get(r);n||o0.set(r,n=[]),n.push(t)}}function oD(t,e,r=Ht){const{immediate:n,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=r,c=C=>s?C:ys(C)||s===!1||s===0?Ua(C,1):Ua(C);let u,d,f,h,v=!1,m=!1;if(Ar(t)?(d=()=>t.value,v=ys(t)):pa(t)?(d=()=>c(t),v=!0):it(t)?(m=!0,v=t.some(C=>pa(C)||ys(C)),d=()=>t.map(C=>{if(Ar(C))return C.value;if(pa(C))return c(C);if(gt(C))return l?l(C,2):C()})):gt(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){Xa();try{f()}finally{Ya()}}const C=bi;bi=u;try{return l?l(t,3,[h]):t(h)}finally{bi=C}}:d=Is,e&&s){const C=d,R=s===!0?1/0:s;d=()=>Ua(C(),R)}const g=xg(),b=()=>{u.stop(),g&&g.active&&hg(g.effects,u)};if(i&&e){const C=e;e=(...R)=>{C(...R),b()}}let _=m?new Array(t.length).fill(tf):tf;const T=C=>{if(!(!(u.flags&1)||!u.dirty&&!C))if(e){const R=u.run();if(s||v||(m?R.some((D,w)=>zn(D,_[w])):zn(R,_))){f&&f();const D=bi;bi=u;try{const w=[R,_===tf?void 0:m&&_[0]===tf?[]:_,h];_=R,l?l(e,3,w):e(...w)}finally{bi=D}}}else u.run()};return o&&o(T),u=new Pu(d),u.scheduler=a?()=>a(T,!1):T,h=C=>hS(C,!1,u),f=u.onStop=()=>{const C=o0.get(u);if(C){if(l)l(C,4);else for(const R of C)R();o0.delete(u)}},e?n?T(!0):_=u.run():a?a(T.bind(null,!0),!0):u.run(),b.pause=u.pause.bind(u),b.resume=u.resume.bind(u),b.stop=b,b}function Ua(t,e=1/0,r){if(e<=0||!ar(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Ar(t))Ua(t.value,e,r);else if(it(t))for(let n=0;n<t.length;n++)Ua(t[n],e,r);else if(Ho(t)||Dl(t))t.forEach(n=>{Ua(n,e,r)});else if(th(t)){for(const n in t)Ua(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Ua(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const pS=[];function lD(t){pS.push(t)}function cD(){pS.pop()}function uD(t,e){}const dD={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},fD={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function dc(t,e,r,n){try{return n?t(...n):t()}catch(s){jo(s,e,r)}}function Rs(t,e,r,n){if(gt(t)){const s=dc(t,e,r,n);return s&&pg(s)&&s.catch(i=>{jo(i,e,r)}),s}if(it(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Rs(t[i],e,r,n));return s}}function jo(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Ht;if(e){let o=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}o=o.parent}if(i){Xa(),dc(i,null,10,[t,l,c]),Ya();return}}hD(t,r,s,n,a)}function hD(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const Kn=[];let la=-1;const Pl=[];let _i=null,xl=0;const mS=Promise.resolve();let l0=null;function Go(t){const e=l0||mS;return t?e.then(this?t.bind(this):t):e}function pD(t){let e=la+1,r=Kn.length;for(;e<r;){const n=e+r>>>1,s=Kn[n],i=Bu(s);i<t||i===t&&s.flags&2?e=n+1:r=n}return e}function wg(t){if(!(t.flags&1)){const e=Bu(t),r=Kn[Kn.length-1];!r||!(t.flags&2)&&e>=Bu(r)?Kn.push(t):Kn.splice(pD(e),0,t),t.flags|=1,vS()}}function vS(){l0||(l0=mS.then(gS))}function Lu(t){it(t)?Pl.push(...t):_i&&t.id===-1?_i.splice(xl+1,0,t):t.flags&1||(Pl.push(t),t.flags|=1),vS()}function py(t,e,r=la+1){for(;r<Kn.length;r++){const n=Kn[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Kn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function c0(t){if(Pl.length){const e=[...new Set(Pl)].sort((r,n)=>Bu(r)-Bu(n));if(Pl.length=0,_i){_i.push(...e);return}for(_i=e,xl=0;xl<_i.length;xl++){const r=_i[xl];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}_i=null,xl=0}}const Bu=t=>t.id==null?t.flags&2?-1:1/0:t.id;function gS(t){try{for(la=0;la<Kn.length;la++){const e=Kn[la];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),dc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;la<Kn.length;la++){const e=Kn[la];e&&(e.flags&=-2)}la=-1,Kn.length=0,c0(),l0=null,(Kn.length||Pl.length)&&gS()}}let yl,rf=[];function xS(t,e){var r,n;yl=t,yl?(yl.enabled=!0,rf.forEach(({event:s,args:i})=>yl.emit(s,...i)),rf=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{xS(i,e)}),setTimeout(()=>{yl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,rf=[])},3e3)):rf=[]}let Xr=null,dh=null;function Mu(t){const e=Xr;return Xr=t,dh=t&&t.type.__scopeId||null,e}function mD(t){dh=t}function vD(){dh=null}const gD=t=>fh;function fh(t,e=Xr,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&av(-1);const i=Mu(e);let a;try{a=t(...s)}finally{Mu(i),n._d&&av(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Me(t,e){if(Xr===null)return t;const r=pd(Xr),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,o,l=Ht]=e[s];i&&(gt(i)&&(i={mounted:i,updated:i}),i.deep&&Ua(a),n.push({dir:i,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function ca(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(Xa(),Rs(l,r,8,[t.el,o,t,e]),Ya())}}const yS=Symbol("_vte"),ES=t=>t.__isTeleport,iu=t=>t&&(t.disabled||t.disabled===""),my=t=>t&&(t.defer||t.defer===""),vy=t=>typeof SVGElement<"u"&&t instanceof SVGElement,gy=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Jm=(t,e)=>{const r=t&&t.to;return hr(r)?e?e(r):null:r},bS={name:"Teleport",__isTeleport:!0,process(t,e,r,n,s,i,a,o,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:v,createText:m,createComment:g}}=c,b=iu(e.props);let{shapeFlag:_,children:T,dynamicChildren:C}=e;if(t==null){const R=e.el=m(""),D=e.anchor=m("");h(R,r,n),h(D,r,n);const w=(y,x)=>{_&16&&(s&&s.isCE&&(s.ce._teleportTarget=y),u(T,y,x,s,i,a,o,l))},E=()=>{const y=e.target=Jm(e.props,v),x=_S(y,e,m,h);y&&(a!=="svg"&&vy(y)?a="svg":a!=="mathml"&&gy(y)&&(a="mathml"),b||(w(y,x),Lf(e,!1)))};b&&(w(r,D),Lf(e,!0)),my(e.props)?(e.el.__isMounted=!1,zr(()=>{E(),delete e.el.__isMounted},i)):E()}else{if(my(e.props)&&t.el.__isMounted===!1){zr(()=>{bS.process(t,e,r,n,s,i,a,o,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const R=e.anchor=t.anchor,D=e.target=t.target,w=e.targetAnchor=t.targetAnchor,E=iu(t.props),y=E?r:D,x=E?R:w;if(a==="svg"||vy(D)?a="svg":(a==="mathml"||gy(D))&&(a="mathml"),C?(f(t.dynamicChildren,C,y,s,i,a,o),Bg(t,e,!0)):l||d(t,e,y,x,s,i,a,o,!1),b)E?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):nf(e,r,R,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const I=e.target=Jm(e.props,v);I&&nf(e,I,null,c,0)}else E&&nf(e,D,w,c,1);Lf(e,b)}},remove(t,e,r,{um:n,o:{remove:s}},i){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=t;if(d&&(s(c),s(u)),i&&s(l),a&16){const h=i||!iu(f);for(let v=0;v<o.length;v++){const m=o[v];n(m,e,r,h,!!m.dynamicChildren)}}},move:nf,hydrate:xD};function nf(t,e,r,{o:{insert:n},m:s},i=2){i===0&&n(t.targetAnchor,e,r);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=t,d=i===2;if(d&&n(a,e,r),(!d||iu(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],e,r,2);d&&n(o,e,r)}function xD(t,e,r,n,s,i,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},d){const f=e.target=Jm(e.props,l);if(f){const h=iu(e.props),v=f._lpa||f.firstChild;if(e.shapeFlag&16)if(h)e.anchor=d(a(t),e,o(t),r,n,s,i),e.targetStart=v,e.targetAnchor=v&&a(v);else{e.anchor=a(t);let m=v;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")e.targetStart=m;else if(m.data==="teleport anchor"){e.targetAnchor=m,f._lpa=e.targetAnchor&&a(e.targetAnchor);break}}m=a(m)}e.targetAnchor||_S(f,e,u,c),d(v&&a(v),e,f,r,n,s,i)}Lf(e,h)}return e.anchor&&a(e.anchor)}const yD=bS;function Lf(t,e){const r=t.ctx;if(r&&r.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function _S(t,e,r,n){const s=e.targetStart=r(""),i=e.targetAnchor=r("");return s[yS]=i,t&&(n(s,t),n(i,t)),i}const Si=Symbol("_leaveCb"),sf=Symbol("_enterCb");function Cg(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Qt(()=>{t.isMounted=!0}),vh(()=>{t.isUnmounting=!0}),t}const Ss=[Function,Array],Ig={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ss,onEnter:Ss,onAfterEnter:Ss,onEnterCancelled:Ss,onBeforeLeave:Ss,onLeave:Ss,onAfterLeave:Ss,onLeaveCancelled:Ss,onBeforeAppear:Ss,onAppear:Ss,onAfterAppear:Ss,onAppearCancelled:Ss},SS=t=>{const e=t.subTree;return e.component?SS(e.component):e},ED={name:"BaseTransition",props:Ig,setup(t,{slots:e}){const r=Ns(),n=Cg();return()=>{const s=e.default&&hh(e.default(),!0);if(!s||!s.length)return;const i=TS(s),a=Vt(t),{mode:o}=a;if(n.isLeaving)return hp(i);const l=xy(i);if(!l)return hp(i);let c=zl(l,a,n,r,d=>c=d);l.type!==Mr&&Ja(l,c);let u=r.subTree&&xy(r.subTree);if(u&&u.type!==Mr&&!Ws(l,u)&&SS(r).type!==Mr){let d=zl(u,a,n,r);if(Ja(u,d),o==="out-in"&&l.type!==Mr)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete d.afterLeave,u=void 0},hp(i);o==="in-out"&&l.type!==Mr?d.delayLeave=(f,h,v)=>{const m=wS(n,u);m[String(u.key)]=u,f[Si]=()=>{h(),f[Si]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{v(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function TS(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==Mr){e=r;break}}return e}const AS=ED;function wS(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function zl(t,e,r,n,s){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:v,onLeaveCancelled:m,onBeforeAppear:g,onAppear:b,onAfterAppear:_,onAppearCancelled:T}=e,C=String(t.key),R=wS(r,t),D=(y,x)=>{y&&Rs(y,n,9,x)},w=(y,x)=>{const I=x[1];D(y,x),it(y)?y.every(A=>A.length<=1)&&I():y.length<=1&&I()},E={mode:a,persisted:o,beforeEnter(y){let x=l;if(!r.isMounted)if(i)x=g||l;else return;y[Si]&&y[Si](!0);const I=R[C];I&&Ws(t,I)&&I.el[Si]&&I.el[Si](),D(x,[y])},enter(y){let x=c,I=u,A=d;if(!r.isMounted)if(i)x=b||c,I=_||u,A=T||d;else return;let k=!1;const U=y[sf]=W=>{k||(k=!0,W?D(A,[y]):D(I,[y]),E.delayedLeave&&E.delayedLeave(),y[sf]=void 0)};x?w(x,[y,U]):U()},leave(y,x){const I=String(t.key);if(y[sf]&&y[sf](!0),r.isUnmounting)return x();D(f,[y]);let A=!1;const k=y[Si]=U=>{A||(A=!0,x(),U?D(m,[y]):D(v,[y]),y[Si]=void 0,R[I]===t&&delete R[I])};R[I]=t,h?w(h,[y,k]):k()},clone(y){const x=zl(y,e,r,n,s);return s&&s(x),x}};return E}function hp(t){if(fd(t))return t=ya(t),t.children=null,t}function xy(t){if(!fd(t))return ES(t.type)&&t.children?TS(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&gt(r.default))return r.default()}}function Ja(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ja(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function hh(t,e=!1,r){let n=[],s=0;for(let i=0;i<t.length;i++){let a=t[i];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:i);a.type===Pe?(a.patchFlag&128&&s++,n=n.concat(hh(a.children,e,o))):(e||a.type!==Mr)&&n.push(o!=null?ya(a,{key:o}):a)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function dd(t,e){return gt(t)?lr({name:t.name},e,{setup:t}):t}function bD(){const t=Ns();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function kg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function _D(t){const e=Ns(),r=Tg(null);if(e){const s=e.refs===Ht?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>r.value,set:i=>r.value=i})}return r}function Ol(t,e,r,n,s=!1){if(it(t)){t.forEach((v,m)=>Ol(v,e&&(it(e)?e[m]:e),r,n,s));return}if(Mi(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Ol(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?pd(n.component):n.el,a=s?null:i,{i:o,r:l}=t,c=e&&e.r,u=o.refs===Ht?o.refs={}:o.refs,d=o.setupState,f=Vt(d),h=d===Ht?()=>!1:v=>Jt(f,v);if(c!=null&&c!==l&&(hr(c)?(u[c]=null,h(c)&&(d[c]=null)):Ar(c)&&(c.value=null)),gt(l))dc(l,o,12,[a,u]);else{const v=hr(l),m=Ar(l);if(v||m){const g=()=>{if(t.f){const b=v?h(l)?d[l]:u[l]:l.value;s?it(b)&&hg(b,i):it(b)?b.includes(i)||b.push(i):v?(u[l]=[i],h(l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else v?(u[l]=a,h(l)&&(d[l]=a)):m&&(l.value=a,t.k&&(u[t.k]=a))};a?(g.id=-1,zr(g,r)):g()}}}let yy=!1;const dl=()=>{yy||(console.error("Hydration completed but contains mismatches."),yy=!0)},SD=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",TD=t=>t.namespaceURI.includes("MathML"),af=t=>{if(t.nodeType===1){if(SD(t))return"svg";if(TD(t))return"mathml"}},wl=t=>t.nodeType===8;function AD(t){const{mt:e,p:r,o:{patchProp:n,createText:s,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=t,u=(T,C)=>{if(!C.hasChildNodes()){r(null,T,C),c0(),C._vnode=T;return}d(C.firstChild,T,null,null,null),c0(),C._vnode=T},d=(T,C,R,D,w,E=!1)=>{E=E||!!C.dynamicChildren;const y=wl(T)&&T.data==="[",x=()=>m(T,C,R,D,w,y),{type:I,ref:A,shapeFlag:k,patchFlag:U}=C;let W=T.nodeType;C.el=T,U===-2&&(E=!1,C.dynamicChildren=null);let P=null;switch(I){case Ui:W!==3?C.children===""?(l(C.el=s(""),a(T),T),P=T):P=x():(T.data!==C.children&&(dl(),T.data=C.children),P=i(T));break;case Mr:_(T)?(P=i(T),b(C.el=T.content.firstChild,T,R)):W!==8||y?P=x():P=i(T);break;case Ao:if(y&&(T=i(T),W=T.nodeType),W===1||W===3){P=T;const B=!C.children.length;for(let H=0;H<C.staticCount;H++)B&&(C.children+=P.nodeType===1?P.outerHTML:P.data),H===C.staticCount-1&&(C.anchor=P),P=i(P);return y?i(P):P}else x();break;case Pe:y?P=v(T,C,R,D,w,E):P=x();break;default:if(k&1)(W!==1||C.type.toLowerCase()!==T.tagName.toLowerCase())&&!_(T)?P=x():P=f(T,C,R,D,w,E);else if(k&6){C.slotScopeIds=w;const B=a(T);if(y?P=g(T):wl(T)&&T.data==="teleport start"?P=g(T,T.data,"teleport end"):P=i(T),e(C,B,null,R,D,af(B),E),Mi(C)&&!C.type.__asyncResolved){let H;y?(H=rt(Pe),H.anchor=P?P.previousSibling:B.lastChild):H=T.nodeType===3?Ne(""):rt("div"),H.el=T,C.component.subTree=H}}else k&64?W!==8?P=x():P=C.type.hydrate(T,C,R,D,w,E,t,h):k&128&&(P=C.type.hydrate(T,C,R,D,af(a(T)),w,E,t,d))}return A!=null&&Ol(A,null,D,C),P},f=(T,C,R,D,w,E)=>{E=E||!!C.dynamicChildren;const{type:y,props:x,patchFlag:I,shapeFlag:A,dirs:k,transition:U}=C,W=y==="input"||y==="option";if(W||I!==-1){k&&ca(C,null,R,"created");let P=!1;if(_(T)){P=JS(null,U)&&R&&R.vnode.props&&R.vnode.props.appear;const H=T.content.firstChild;if(P){const L=H.getAttribute("class");L&&(H.$cls=L),U.beforeEnter(H)}b(H,T,R),C.el=T=H}if(A&16&&!(x&&(x.innerHTML||x.textContent))){let H=h(T.firstChild,C,T,R,D,w,E);for(;H;){of(T,1)||dl();const L=H;H=H.nextSibling,o(L)}}else if(A&8){let H=C.children;H[0]===`
`&&(T.tagName==="PRE"||T.tagName==="TEXTAREA")&&(H=H.slice(1)),T.textContent!==H&&(of(T,0)||dl(),T.textContent=C.children)}if(x){if(W||!E||I&48){const H=T.tagName.includes("-");for(const L in x)(W&&(L.endsWith("value")||L==="indeterminate")||cd(L)&&!Rl(L)||L[0]==="."||H)&&n(T,L,null,x[L],void 0,R)}else if(x.onClick)n(T,"onClick",null,x.onClick,void 0,R);else if(I&4&&pa(x.style))for(const H in x.style)x.style[H]}let B;(B=x&&x.onVnodeBeforeMount)&&ss(B,R,C),k&&ca(C,null,R,"beforeMount"),((B=x&&x.onVnodeMounted)||k||P)&&oT(()=>{B&&ss(B,R,C),P&&U.enter(T),k&&ca(C,null,R,"mounted")},D)}return T.nextSibling},h=(T,C,R,D,w,E,y)=>{y=y||!!C.dynamicChildren;const x=C.children,I=x.length;for(let A=0;A<I;A++){const k=y?x[A]:x[A]=is(x[A]),U=k.type===Ui;T?(U&&!y&&A+1<I&&is(x[A+1]).type===Ui&&(l(s(T.data.slice(k.children.length)),R,i(T)),T.data=k.children),T=d(T,k,D,w,E,y)):U&&!k.children?l(k.el=s(""),R):(of(R,1)||dl(),r(null,k,R,null,D,w,af(R),E))}return T},v=(T,C,R,D,w,E)=>{const{slotScopeIds:y}=C;y&&(w=w?w.concat(y):y);const x=a(T),I=h(i(T),C,x,R,D,w,E);return I&&wl(I)&&I.data==="]"?i(C.anchor=I):(dl(),l(C.anchor=c("]"),x,I),I)},m=(T,C,R,D,w,E)=>{if(of(T.parentElement,1)||dl(),C.el=null,E){const I=g(T);for(;;){const A=i(T);if(A&&A!==I)o(A);else break}}const y=i(T),x=a(T);return o(T),r(null,C,x,y,R,D,af(x),w),R&&(R.vnode.el=C.el,xh(R,C.el)),y},g=(T,C="[",R="]")=>{let D=0;for(;T;)if(T=i(T),T&&wl(T)&&(T.data===C&&D++,T.data===R)){if(D===0)return i(T);D--}return T},b=(T,C,R)=>{const D=C.parentNode;D&&D.replaceChild(T,C);let w=R;for(;w;)w.vnode.el===C&&(w.vnode.el=w.subTree.el=T),w=w.parent},_=T=>T.nodeType===1&&T.tagName==="TEMPLATE";return[u,d]}const Ey="data-allow-mismatch",wD={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function of(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Ey);)t=t.parentElement;const r=t&&t.getAttribute(Ey);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return e===0&&n.includes("children")?!0:n.includes(wD[e])}}const CD=nh().requestIdleCallback||(t=>setTimeout(t,1)),ID=nh().cancelIdleCallback||(t=>clearTimeout(t)),kD=(t=1e4)=>e=>{const r=CD(e,{timeout:t});return()=>ID(r)};function DD(t){const{top:e,left:r,bottom:n,right:s}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:a}=window;return(e>0&&e<i||n>0&&n<i)&&(r>0&&r<a||s>0&&s<a)}const RD=t=>(e,r)=>{const n=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){n.disconnect(),e();break}},t);return r(s=>{if(s instanceof Element){if(DD(s))return e(),n.disconnect(),!1;n.observe(s)}}),()=>n.disconnect()},FD=t=>e=>{if(t){const r=matchMedia(t);if(r.matches)e();else return r.addEventListener("change",e,{once:!0}),()=>r.removeEventListener("change",e)}},PD=(t=[])=>(e,r)=>{hr(t)&&(t=[t]);let n=!1;const s=a=>{n||(n=!0,i(),e(),a.target.dispatchEvent(new a.constructor(a.type,a)))},i=()=>{r(a=>{for(const o of t)a.removeEventListener(o,s)})};return r(a=>{for(const o of t)a.addEventListener(o,s,{once:!0})}),i};function OD(t,e){if(wl(t)&&t.data==="["){let r=1,n=t.nextSibling;for(;n;){if(n.nodeType===1){if(e(n)===!1)break}else if(wl(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else e(t)}const Mi=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function ND(t){gt(t)&&(t={loader:t});const{loader:e,loadingComponent:r,errorComponent:n,delay:s=200,hydrate:i,timeout:a,suspensible:o=!0,onError:l}=t;let c=null,u,d=0;const f=()=>(d++,c=null,h()),h=()=>{let v;return c||(v=c=e().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),l)return new Promise((g,b)=>{l(m,()=>g(f()),()=>b(m),d+1)});throw m}).then(m=>v!==c&&c?c:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),u=m,m)))};return dd({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(v,m,g){const b=i?()=>{const T=i(()=>{g()},C=>OD(v,C));T&&(m.bum||(m.bum=[])).push(T),(m.u||(m.u=[])).push(()=>!0)}:g;u?b():h().then(()=>!m.isUnmounted&&b())},get __asyncResolved(){return u},setup(){const v=qr;if(kg(v),u)return()=>pp(u,v);const m=T=>{c=null,jo(T,v,13,!n)};if(o&&v.suspense||Kl)return h().then(T=>()=>pp(T,v)).catch(T=>(m(T),()=>n?rt(n,{error:T}):null));const g=he(!1),b=he(),_=he(!!s);return s&&setTimeout(()=>{_.value=!1},s),a!=null&&setTimeout(()=>{if(!g.value&&!b.value){const T=new Error(`Async component timed out after ${a}ms.`);m(T),b.value=T}},a),h().then(()=>{g.value=!0,v.parent&&fd(v.parent.vnode)&&v.parent.update()}).catch(T=>{m(T),b.value=T}),()=>{if(g.value&&u)return pp(u,v);if(b.value&&n)return rt(n,{error:b.value});if(r&&!_.value)return rt(r)}}})}function pp(t,e){const{ref:r,props:n,children:s,ce:i}=e.vnode,a=rt(t,n,s);return a.ref=r,a.ce=i,delete e.vnode.ce,a}const fd=t=>t.type.__isKeepAlive,LD={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const r=Ns(),n=r.ctx;if(!n.renderer)return()=>{const _=e.default&&e.default();return _&&_.length===1?_[0]:_};const s=new Map,i=new Set;let a=null;const o=r.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=n,f=d("div");n.activate=(_,T,C,R,D)=>{const w=_.component;c(_,T,C,0,o),l(w.vnode,_,T,C,w,o,R,_.slotScopeIds,D),zr(()=>{w.isDeactivated=!1,w.a&&Fl(w.a);const E=_.props&&_.props.onVnodeMounted;E&&ss(E,w.parent,_)},o)},n.deactivate=_=>{const T=_.component;d0(T.m),d0(T.a),c(_,f,null,1,o),zr(()=>{T.da&&Fl(T.da);const C=_.props&&_.props.onVnodeUnmounted;C&&ss(C,T.parent,_),T.isDeactivated=!0},o)};function h(_){mp(_),u(_,r,o,!0)}function v(_){s.forEach((T,C)=>{const R=uv(T.type);R&&!_(R)&&m(C)})}function m(_){const T=s.get(_);T&&(!a||!Ws(T,a))?h(T):a&&mp(a),s.delete(_),i.delete(_)}er(()=>[t.include,t.exclude],([_,T])=>{_&&v(C=>jc(_,C)),T&&v(C=>!jc(T,C))},{flush:"post",deep:!0});let g=null;const b=()=>{g!=null&&(f0(r.subTree.type)?zr(()=>{s.set(g,lf(r.subTree))},r.subTree.suspense):s.set(g,lf(r.subTree)))};return Qt(b),mh(b),vh(()=>{s.forEach(_=>{const{subTree:T,suspense:C}=r,R=lf(T);if(_.type===R.type&&_.key===R.key){mp(R);const D=R.component.da;D&&zr(D,C);return}h(_)})}),()=>{if(g=null,!e.default)return a=null;const _=e.default(),T=_[0];if(_.length>1)return a=null,_;if(!Za(T)||!(T.shapeFlag&4)&&!(T.shapeFlag&128))return a=null,T;let C=lf(T);if(C.type===Mr)return a=null,C;const R=C.type,D=uv(Mi(C)?C.type.__asyncResolved||{}:R),{include:w,exclude:E,max:y}=t;if(w&&(!D||!jc(w,D))||E&&D&&jc(E,D))return C.shapeFlag&=-257,a=C,T;const x=C.key==null?R:C.key,I=s.get(x);return C.el&&(C=ya(C),T.shapeFlag&128&&(T.ssContent=C)),g=x,I?(C.el=I.el,C.component=I.component,C.transition&&Ja(C,C.transition),C.shapeFlag|=512,i.delete(x),i.add(x)):(i.add(x),y&&i.size>parseInt(y,10)&&m(i.values().next().value)),C.shapeFlag|=256,a=C,f0(T.type)?T:C}}},BD=LD;function jc(t,e){return it(t)?t.some(r=>jc(r,e)):hr(t)?t.split(",").includes(e):fk(t)?(t.lastIndex=0,t.test(e)):!1}function CS(t,e){kS(t,"a",e)}function IS(t,e){kS(t,"da",e)}function kS(t,e,r=qr){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(ph(e,n,r),r){let s=r.parent;for(;s&&s.parent;)fd(s.parent.vnode)&&MD(n,e,r,s),s=s.parent}}function MD(t,e,r,n){const s=ph(e,t,n,!0);eo(()=>{hg(n[e],s)},r)}function mp(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function lf(t){return t.shapeFlag&128?t.ssContent:t}function ph(t,e,r=qr,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...a)=>{Xa();const o=Fo(r),l=Rs(e,r,t,a);return o(),Ya(),l});return n?s.unshift(i):s.push(i),i}}const ii=t=>(e,r=qr)=>{(!Kl||t==="sp")&&ph(t,(...n)=>e(...n),r)},DS=ii("bm"),Qt=ii("m"),Dg=ii("bu"),mh=ii("u"),vh=ii("bum"),eo=ii("um"),RS=ii("sp"),FS=ii("rtg"),PS=ii("rtc");function OS(t,e=qr){ph("ec",t,e)}const Rg="components",UD="directives";function kr(t,e){return Fg(Rg,t,!0,e)||t}const NS=Symbol.for("v-ndc");function VD(t){return hr(t)?Fg(Rg,t,!1)||t:t||NS}function $D(t){return Fg(UD,t)}function Fg(t,e,r=!0,n=!1){const s=Xr||qr;if(s){const i=s.type;if(t===Rg){const o=uv(i,!1);if(o&&(o===e||o===hn(e)||o===ud(hn(e))))return i}const a=by(s[t]||i[t],e)||by(s.appContext[t],e);return!a&&n?i:a}}function by(t,e){return t&&(t[e]||t[hn(e)]||t[ud(hn(e))])}function We(t,e,r,n){let s;const i=r&&r[n],a=it(t);if(a||hr(t)){const o=a&&pa(t);let l=!1,c=!1;o&&(l=!ys(t),c=Qa(t),t=ih(t)),s=new Array(t.length);for(let u=0,d=t.length;u<d;u++)s[u]=e(l?c?i0(dn(t[u])):dn(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(ar(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,i&&i[l]));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];s[l]=e(t[u],u,l,i&&i[l])}}else s=[];return r&&(r[n]=s),s}function HD(t,e){for(let r=0;r<e.length;r++){const n=e[r];if(it(n))for(let s=0;s<n.length;s++)t[n[s].name]=n[s].fn;else n&&(t[n.name]=n.key?(...s)=>{const i=n.fn(...s);return i&&(i.key=n.key),i}:n.fn)}return t}function LS(t,e,r={},n,s){if(Xr.ce||Xr.parent&&Mi(Xr.parent)&&Xr.parent.ce)return e!=="default"&&(r.name=e),N(),Rn(Pe,null,[rt("slot",r,n&&n())],64);let i=t[e];i&&i._c&&(i._d=!1),N();const a=i&&Pg(i(r)),o=r.key||a&&a.key,l=Rn(Pe,{key:(o&&!Zs(o)?o:`_${e}`)+(!a&&n?"_fb":"")},a||(n?n():[]),a&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Pg(t){return t.some(e=>Za(e)?!(e.type===Mr||e.type===Pe&&!Pg(e.children)):!0)?t:null}function jD(t,e){const r={};for(const n in t)r[e&&/[A-Z]/.test(n)?`on:${n}`:nu(n)]=t[n];return r}const Zm=t=>t?pT(t)?pd(t):Zm(t.parent):null,ou=lr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zm(t.parent),$root:t=>Zm(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Og(t),$forceUpdate:t=>t.f||(t.f=()=>{wg(t.update)}),$nextTick:t=>t.n||(t.n=Go.bind(t.proxy)),$watch:t=>E3.bind(t)}),vp=(t,e)=>t!==Ht&&!t.__isScriptSetup&&Jt(t,e),ev={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:a,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(vp(n,e))return a[e]=1,n[e];if(s!==Ht&&Jt(s,e))return a[e]=2,s[e];if((c=t.propsOptions[0])&&Jt(c,e))return a[e]=3,i[e];if(r!==Ht&&Jt(r,e))return a[e]=4,r[e];tv&&(a[e]=0)}}const u=ou[e];let d,f;if(u)return e==="$attrs"&&In(t.attrs,"get",""),u(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(r!==Ht&&Jt(r,e))return a[e]=4,r[e];if(f=l.config.globalProperties,Jt(f,e))return f[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return vp(s,e)?(s[e]=r,!0):n!==Ht&&Jt(n,e)?(n[e]=r,!0):Jt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},a){let o;return!!r[a]||t!==Ht&&Jt(t,a)||vp(e,a)||(o=i[0])&&Jt(o,a)||Jt(n,a)||Jt(ou,a)||Jt(s.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Jt(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}},GD=lr({},ev,{get(t,e){if(e!==Symbol.unscopables)return ev.get(t,e,t)},has(t,e){return e[0]!=="_"&&!gk(e)}});function WD(){return null}function zD(){return null}function KD(t){}function qD(t){}function XD(){return null}function YD(){}function QD(t,e){return null}function JD(){return BS().slots}function ZD(){return BS().attrs}function BS(){const t=Ns();return t.setupContext||(t.setupContext=gT(t))}function Uu(t){return it(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}function e3(t,e){const r=Uu(t);for(const n in e){if(n.startsWith("__skip"))continue;let s=r[n];s?it(s)||gt(s)?s=r[n]={type:s,default:e[n]}:s.default=e[n]:s===null&&(s=r[n]={default:e[n]}),s&&e[`__skip_${n}`]&&(s.skipFactory=!0)}return r}function t3(t,e){return!t||!e?t||e:it(t)&&it(e)?t.concat(e):lr({},Uu(t),Uu(e))}function r3(t,e){const r={};for(const n in t)e.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>t[n]});return r}function n3(t){const e=Ns();let r=t();return ov(),pg(r)&&(r=r.catch(n=>{throw Fo(e),n})),[r,()=>Fo(e)]}let tv=!0;function s3(t){const e=Og(t),r=t.proxy,n=t.ctx;tv=!1,e.beforeCreate&&_y(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:v,activated:m,deactivated:g,beforeDestroy:b,beforeUnmount:_,destroyed:T,unmounted:C,render:R,renderTracked:D,renderTriggered:w,errorCaptured:E,serverPrefetch:y,expose:x,inheritAttrs:I,components:A,directives:k,filters:U}=e;if(c&&a3(c,n,null),a)for(const B in a){const H=a[B];gt(H)&&(n[B]=H.bind(r))}if(s){const B=s.call(r,r);ar(B)&&(t.data=Os(B))}if(tv=!0,i)for(const B in i){const H=i[B],L=gt(H)?H.bind(r,r):gt(H.get)?H.get.bind(r,r):Is,Z=!gt(H)&&gt(H.set)?H.set.bind(r):Is,j=Ve({get:L,set:Z});Object.defineProperty(n,B,{enumerable:!0,configurable:!0,get:()=>j.value,set:O=>j.value=O})}if(o)for(const B in o)MS(o[B],n,r,B);if(l){const B=gt(l)?l.call(r):l;Reflect.ownKeys(B).forEach(H=>{lu(H,B[H])})}u&&_y(u,t,"c");function P(B,H){it(H)?H.forEach(L=>B(L.bind(r))):H&&B(H.bind(r))}if(P(DS,d),P(Qt,f),P(Dg,h),P(mh,v),P(CS,m),P(IS,g),P(OS,E),P(PS,D),P(FS,w),P(vh,_),P(eo,C),P(RS,y),it(x))if(x.length){const B=t.exposed||(t.exposed={});x.forEach(H=>{Object.defineProperty(B,H,{get:()=>r[H],set:L=>r[H]=L})})}else t.exposed||(t.exposed={});R&&t.render===Is&&(t.render=R),I!=null&&(t.inheritAttrs=I),A&&(t.components=A),k&&(t.directives=k),y&&kg(t)}function a3(t,e,r=Is){it(t)&&(t=rv(t));for(const n in t){const s=t[n];let i;ar(s)?"default"in s?i=Es(s.from||n,s.default,!0):i=Es(s.from||n):i=Es(s),Ar(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function _y(t,e,r){Rs(it(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function MS(t,e,r,n){let s=n.includes(".")?nT(r,n):()=>r[n];if(hr(t)){const i=e[t];gt(i)&&er(s,i)}else if(gt(t))er(s,t.bind(r));else if(ar(t))if(it(t))t.forEach(i=>MS(i,e,r,n));else{const i=gt(t.handler)?t.handler.bind(r):e[t.handler];gt(i)&&er(s,i,t)}}function Og(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let l;return o?l=o:!s.length&&!r&&!n?l=e:(l={},s.length&&s.forEach(c=>u0(l,c,a,!0)),u0(l,e,a)),ar(e)&&i.set(e,l),l}function u0(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&u0(t,i,r,!0),s&&s.forEach(a=>u0(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=i3[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const i3={data:Sy,props:Ty,emits:Ty,methods:Gc,computed:Gc,beforeCreate:jn,created:jn,beforeMount:jn,mounted:jn,beforeUpdate:jn,updated:jn,beforeDestroy:jn,beforeUnmount:jn,destroyed:jn,unmounted:jn,activated:jn,deactivated:jn,errorCaptured:jn,serverPrefetch:jn,components:Gc,directives:Gc,watch:l3,provide:Sy,inject:o3};function Sy(t,e){return e?t?function(){return lr(gt(t)?t.call(this,this):t,gt(e)?e.call(this,this):e)}:e:t}function o3(t,e){return Gc(rv(t),rv(e))}function rv(t){if(it(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function jn(t,e){return t?[...new Set([].concat(t,e))]:e}function Gc(t,e){return t?lr(Object.create(null),t,e):e}function Ty(t,e){return t?it(t)&&it(e)?[...new Set([...t,...e])]:lr(Object.create(null),Uu(t),Uu(e??{})):e}function l3(t,e){if(!t)return e;if(!e)return t;const r=lr(Object.create(null),t);for(const n in e)r[n]=jn(t[n],e[n]);return r}function US(){return{app:null,config:{isNativeTag:uk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let c3=0;function u3(t,e){return function(n,s=null){gt(n)||(n=lr({},n)),s!=null&&!ar(s)&&(s=null);const i=US(),a=new WeakSet,o=[];let l=!1;const c=i.app={_uid:c3++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:yT,get config(){return i.config},set config(u){},use(u,...d){return a.has(u)||(u&&gt(u.install)?(a.add(u),u.install(c,...d)):gt(u)&&(a.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const h=c._ceVNode||rt(n,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(h,u):t(h,u,f),l=!0,c._container=u,u.__vue_app__=c,pd(h.component)}},onUnmount(u){o.push(u)},unmount(){l&&(Rs(o,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=To;To=c;try{return u()}finally{To=d}}};return c}}let To=null;function lu(t,e){if(qr){let r=qr.provides;const n=qr.parent&&qr.parent.provides;n===r&&(r=qr.provides=Object.create(n)),r[t]=e}}function Es(t,e,r=!1){const n=qr||Xr;if(n||To){let s=To?To._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&gt(e)?e.call(n&&n.proxy):e}}function VS(){return!!(qr||Xr||To)}const $S={},HS=()=>Object.create($S),jS=t=>Object.getPrototypeOf(t)===$S;function d3(t,e,r,n=!1){const s={},i=HS();t.propsDefaults=Object.create(null),GS(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);r?t.props=n?s:_g(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function f3(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,o=Vt(s),[l]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(gh(t.emitsOptions,f))continue;const h=e[f];if(l)if(Jt(i,f))h!==i[f]&&(i[f]=h,c=!0);else{const v=hn(f);s[v]=nv(l,o,v,h,t,!1)}else h!==i[f]&&(i[f]=h,c=!0)}}}else{GS(t,e,s,i)&&(c=!0);let u;for(const d in o)(!e||!Jt(e,d)&&((u=os(d))===d||!Jt(e,u)))&&(l?r&&(r[d]!==void 0||r[u]!==void 0)&&(s[d]=nv(l,o,d,void 0,t,!0)):delete s[d]);if(i!==o)for(const d in i)(!e||!Jt(e,d))&&(delete i[d],c=!0)}c&&Ma(t.attrs,"set","")}function GS(t,e,r,n){const[s,i]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Rl(l))continue;const c=e[l];let u;s&&Jt(s,u=hn(l))?!i||!i.includes(u)?r[u]=c:(o||(o={}))[u]=c:gh(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=Vt(r),c=o||Ht;for(let u=0;u<i.length;u++){const d=i[u];r[d]=nv(s,l,d,c[d],t,!Jt(c,d))}}return a}function nv(t,e,r,n,s,i){const a=t[r];if(a!=null){const o=Jt(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&gt(l)){const{propsDefaults:c}=s;if(r in c)n=c[r];else{const u=Fo(s);n=c[r]=l.call(null,e),u()}}else n=l;s.ce&&s.ce._setProp(r,n)}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===os(r))&&(n=!0))}return n}const h3=new WeakMap;function WS(t,e,r=!1){const n=r?h3:e.propsCache,s=n.get(t);if(s)return s;const i=t.props,a={},o=[];let l=!1;if(!gt(t)){const u=d=>{l=!0;const[f,h]=WS(d,e,!0);lr(a,f),h&&o.push(...h)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ar(t)&&n.set(t,kl),kl;if(it(i))for(let u=0;u<i.length;u++){const d=hn(i[u]);Ay(d)&&(a[d]=Ht)}else if(i)for(const u in i){const d=hn(u);if(Ay(d)){const f=i[u],h=a[d]=it(f)||gt(f)?{type:f}:lr({},f),v=h.type;let m=!1,g=!0;if(it(v))for(let b=0;b<v.length;++b){const _=v[b],T=gt(_)&&_.name;if(T==="Boolean"){m=!0;break}else T==="String"&&(g=!1)}else m=gt(v)&&v.name==="Boolean";h[0]=m,h[1]=g,(m||Jt(h,"default"))&&o.push(d)}}const c=[a,o];return ar(t)&&n.set(t,c),c}function Ay(t){return t[0]!=="$"&&!Rl(t)}const Ng=t=>t[0]==="_"||t==="$stable",Lg=t=>it(t)?t.map(is):[is(t)],p3=(t,e,r)=>{if(e._n)return e;const n=fh((...s)=>Lg(e(...s)),r);return n._c=!1,n},zS=(t,e,r)=>{const n=t._ctx;for(const s in t){if(Ng(s))continue;const i=t[s];if(gt(i))e[s]=p3(s,i,n);else if(i!=null){const a=Lg(i);e[s]=()=>a}}},KS=(t,e)=>{const r=Lg(e);t.slots.default=()=>r},qS=(t,e,r)=>{for(const n in e)(r||!Ng(n))&&(t[n]=e[n])},m3=(t,e,r)=>{const n=t.slots=HS();if(t.vnode.shapeFlag&32){const s=e.__;s&&qm(n,"__",s,!0);const i=e._;i?(qS(n,e,r),r&&qm(n,"_",i,!0)):zS(e,n)}else e&&KS(t,e)},v3=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,a=Ht;if(n.shapeFlag&32){const o=e._;o?r&&o===1?i=!1:qS(s,e,r):(i=!e.$stable,zS(e,s)),a=e}else e&&(KS(t,e),a={default:1});if(i)for(const o in s)!Ng(o)&&a[o]==null&&delete s[o]},zr=oT;function XS(t){return QS(t)}function YS(t){return QS(t,AD)}function QS(t,e){const r=nh();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Is,insertStaticContent:v}=t,m=(K,ee,fe,ve=null,Q=null,re=null,be=void 0,Te=null,_e=!!ee.dynamicChildren)=>{if(K===ee)return;K&&!Ws(K,ee)&&(ve=ie(K),O(K,Q,re,!0),K=null),ee.patchFlag===-2&&(_e=!1,ee.dynamicChildren=null);const{type:ke,ref:Be,shapeFlag:Ce}=ee;switch(ke){case Ui:g(K,ee,fe,ve);break;case Mr:b(K,ee,fe,ve);break;case Ao:K==null&&_(ee,fe,ve,be);break;case Pe:A(K,ee,fe,ve,Q,re,be,Te,_e);break;default:Ce&1?R(K,ee,fe,ve,Q,re,be,Te,_e):Ce&6?k(K,ee,fe,ve,Q,re,be,Te,_e):(Ce&64||Ce&128)&&ke.process(K,ee,fe,ve,Q,re,be,Te,_e,J)}Be!=null&&Q?Ol(Be,K&&K.ref,re,ee||K,!ee):Be==null&&K&&K.ref!=null&&Ol(K.ref,null,re,K,!0)},g=(K,ee,fe,ve)=>{if(K==null)n(ee.el=o(ee.children),fe,ve);else{const Q=ee.el=K.el;ee.children!==K.children&&c(Q,ee.children)}},b=(K,ee,fe,ve)=>{K==null?n(ee.el=l(ee.children||""),fe,ve):ee.el=K.el},_=(K,ee,fe,ve)=>{[K.el,K.anchor]=v(K.children,ee,fe,ve,K.el,K.anchor)},T=({el:K,anchor:ee},fe,ve)=>{let Q;for(;K&&K!==ee;)Q=f(K),n(K,fe,ve),K=Q;n(ee,fe,ve)},C=({el:K,anchor:ee})=>{let fe;for(;K&&K!==ee;)fe=f(K),s(K),K=fe;s(ee)},R=(K,ee,fe,ve,Q,re,be,Te,_e)=>{ee.type==="svg"?be="svg":ee.type==="math"&&(be="mathml"),K==null?D(ee,fe,ve,Q,re,be,Te,_e):y(K,ee,Q,re,be,Te,_e)},D=(K,ee,fe,ve,Q,re,be,Te)=>{let _e,ke;const{props:Be,shapeFlag:Ce,transition:je,dirs:Ue}=K;if(_e=K.el=a(K.type,re,Be&&Be.is,Be),Ce&8?u(_e,K.children):Ce&16&&E(K.children,_e,null,ve,Q,gp(K,re),be,Te),Ue&&ca(K,null,ve,"created"),w(_e,K,K.scopeId,be,ve),Be){for(const qe in Be)qe!=="value"&&!Rl(qe)&&i(_e,qe,null,Be[qe],re,ve);"value"in Be&&i(_e,"value",null,Be.value,re),(ke=Be.onVnodeBeforeMount)&&ss(ke,ve,K)}Ue&&ca(K,null,ve,"beforeMount");const He=JS(Q,je);He&&je.beforeEnter(_e),n(_e,ee,fe),((ke=Be&&Be.onVnodeMounted)||He||Ue)&&zr(()=>{ke&&ss(ke,ve,K),He&&je.enter(_e),Ue&&ca(K,null,ve,"mounted")},Q)},w=(K,ee,fe,ve,Q)=>{if(fe&&h(K,fe),ve)for(let re=0;re<ve.length;re++)h(K,ve[re]);if(Q){let re=Q.subTree;if(ee===re||f0(re.type)&&(re.ssContent===ee||re.ssFallback===ee)){const be=Q.vnode;w(K,be,be.scopeId,be.slotScopeIds,Q.parent)}}},E=(K,ee,fe,ve,Q,re,be,Te,_e=0)=>{for(let ke=_e;ke<K.length;ke++){const Be=K[ke]=Te?Ti(K[ke]):is(K[ke]);m(null,Be,ee,fe,ve,Q,re,be,Te)}},y=(K,ee,fe,ve,Q,re,be)=>{const Te=ee.el=K.el;let{patchFlag:_e,dynamicChildren:ke,dirs:Be}=ee;_e|=K.patchFlag&16;const Ce=K.props||Ht,je=ee.props||Ht;let Ue;if(fe&&uo(fe,!1),(Ue=je.onVnodeBeforeUpdate)&&ss(Ue,fe,ee,K),Be&&ca(ee,K,fe,"beforeUpdate"),fe&&uo(fe,!0),(Ce.innerHTML&&je.innerHTML==null||Ce.textContent&&je.textContent==null)&&u(Te,""),ke?x(K.dynamicChildren,ke,Te,fe,ve,gp(ee,Q),re):be||H(K,ee,Te,null,fe,ve,gp(ee,Q),re,!1),_e>0){if(_e&16)I(Te,Ce,je,fe,Q);else if(_e&2&&Ce.class!==je.class&&i(Te,"class",null,je.class,Q),_e&4&&i(Te,"style",Ce.style,je.style,Q),_e&8){const He=ee.dynamicProps;for(let qe=0;qe<He.length;qe++){const ye=He[qe],xe=Ce[ye],Ee=je[ye];(Ee!==xe||ye==="value")&&i(Te,ye,xe,Ee,Q,fe)}}_e&1&&K.children!==ee.children&&u(Te,ee.children)}else!be&&ke==null&&I(Te,Ce,je,fe,Q);((Ue=je.onVnodeUpdated)||Be)&&zr(()=>{Ue&&ss(Ue,fe,ee,K),Be&&ca(ee,K,fe,"updated")},ve)},x=(K,ee,fe,ve,Q,re,be)=>{for(let Te=0;Te<ee.length;Te++){const _e=K[Te],ke=ee[Te],Be=_e.el&&(_e.type===Pe||!Ws(_e,ke)||_e.shapeFlag&198)?d(_e.el):fe;m(_e,ke,Be,null,ve,Q,re,be,!0)}},I=(K,ee,fe,ve,Q)=>{if(ee!==fe){if(ee!==Ht)for(const re in ee)!Rl(re)&&!(re in fe)&&i(K,re,ee[re],null,Q,ve);for(const re in fe){if(Rl(re))continue;const be=fe[re],Te=ee[re];be!==Te&&re!=="value"&&i(K,re,Te,be,Q,ve)}"value"in fe&&i(K,"value",ee.value,fe.value,Q)}},A=(K,ee,fe,ve,Q,re,be,Te,_e)=>{const ke=ee.el=K?K.el:o(""),Be=ee.anchor=K?K.anchor:o("");let{patchFlag:Ce,dynamicChildren:je,slotScopeIds:Ue}=ee;Ue&&(Te=Te?Te.concat(Ue):Ue),K==null?(n(ke,fe,ve),n(Be,fe,ve),E(ee.children||[],fe,Be,Q,re,be,Te,_e)):Ce>0&&Ce&64&&je&&K.dynamicChildren?(x(K.dynamicChildren,je,fe,Q,re,be,Te),(ee.key!=null||Q&&ee===Q.subTree)&&Bg(K,ee,!0)):H(K,ee,fe,Be,Q,re,be,Te,_e)},k=(K,ee,fe,ve,Q,re,be,Te,_e)=>{ee.slotScopeIds=Te,K==null?ee.shapeFlag&512?Q.ctx.activate(ee,fe,ve,be,_e):U(ee,fe,ve,Q,re,be,_e):W(K,ee,_e)},U=(K,ee,fe,ve,Q,re,be)=>{const Te=K.component=hT(K,ve,Q);if(fd(K)&&(Te.ctx.renderer=J),mT(Te,!1,be),Te.asyncDep){if(Q&&Q.registerDep(Te,P,be),!K.el){const _e=Te.subTree=rt(Mr);b(null,_e,ee,fe)}}else P(Te,K,ee,fe,Q,re,be)},W=(K,ee,fe)=>{const ve=ee.component=K.component;if(w3(K,ee,fe))if(ve.asyncDep&&!ve.asyncResolved){B(ve,ee,fe);return}else ve.next=ee,ve.update();else ee.el=K.el,ve.vnode=ee},P=(K,ee,fe,ve,Q,re,be)=>{const Te=()=>{if(K.isMounted){let{next:Ce,bu:je,u:Ue,parent:He,vnode:qe}=K;{const Ge=ZS(K);if(Ge){Ce&&(Ce.el=qe.el,B(K,Ce,be)),Ge.asyncDep.then(()=>{K.isUnmounted||Te()});return}}let ye=Ce,xe;uo(K,!1),Ce?(Ce.el=qe.el,B(K,Ce,be)):Ce=qe,je&&Fl(je),(xe=Ce.props&&Ce.props.onVnodeBeforeUpdate)&&ss(xe,He,Ce,qe),uo(K,!0);const Ee=Bf(K),Fe=K.subTree;K.subTree=Ee,m(Fe,Ee,d(Fe.el),ie(Fe),K,Q,re),Ce.el=Ee.el,ye===null&&xh(K,Ee.el),Ue&&zr(Ue,Q),(xe=Ce.props&&Ce.props.onVnodeUpdated)&&zr(()=>ss(xe,He,Ce,qe),Q)}else{let Ce;const{el:je,props:Ue}=ee,{bm:He,m:qe,parent:ye,root:xe,type:Ee}=K,Fe=Mi(ee);if(uo(K,!1),He&&Fl(He),!Fe&&(Ce=Ue&&Ue.onVnodeBeforeMount)&&ss(Ce,ye,ee),uo(K,!0),je&&Y){const Ge=()=>{K.subTree=Bf(K),Y(je,K.subTree,K,Q,null)};Fe&&Ee.__asyncHydrate?Ee.__asyncHydrate(je,K,Ge):Ge()}else{xe.ce&&xe.ce._def.shadowRoot!==!1&&xe.ce._injectChildStyle(Ee);const Ge=K.subTree=Bf(K);m(null,Ge,fe,ve,K,Q,re),ee.el=Ge.el}if(qe&&zr(qe,Q),!Fe&&(Ce=Ue&&Ue.onVnodeMounted)){const Ge=ee;zr(()=>ss(Ce,ye,Ge),Q)}(ee.shapeFlag&256||ye&&Mi(ye.vnode)&&ye.vnode.shapeFlag&256)&&K.a&&zr(K.a,Q),K.isMounted=!0,ee=fe=ve=null}};K.scope.on();const _e=K.effect=new Pu(Te);K.scope.off();const ke=K.update=_e.run.bind(_e),Be=K.job=_e.runIfDirty.bind(_e);Be.i=K,Be.id=K.uid,_e.scheduler=()=>wg(Be),uo(K,!0),ke()},B=(K,ee,fe)=>{ee.component=K;const ve=K.vnode.props;K.vnode=ee,K.next=null,f3(K,ee.props,ve,fe),v3(K,ee.children,fe),Xa(),py(K),Ya()},H=(K,ee,fe,ve,Q,re,be,Te,_e=!1)=>{const ke=K&&K.children,Be=K?K.shapeFlag:0,Ce=ee.children,{patchFlag:je,shapeFlag:Ue}=ee;if(je>0){if(je&128){Z(ke,Ce,fe,ve,Q,re,be,Te,_e);return}else if(je&256){L(ke,Ce,fe,ve,Q,re,be,Te,_e);return}}Ue&8?(Be&16&&pe(ke,Q,re),Ce!==ke&&u(fe,Ce)):Be&16?Ue&16?Z(ke,Ce,fe,ve,Q,re,be,Te,_e):pe(ke,Q,re,!0):(Be&8&&u(fe,""),Ue&16&&E(Ce,fe,ve,Q,re,be,Te,_e))},L=(K,ee,fe,ve,Q,re,be,Te,_e)=>{K=K||kl,ee=ee||kl;const ke=K.length,Be=ee.length,Ce=Math.min(ke,Be);let je;for(je=0;je<Ce;je++){const Ue=ee[je]=_e?Ti(ee[je]):is(ee[je]);m(K[je],Ue,fe,null,Q,re,be,Te,_e)}ke>Be?pe(K,Q,re,!0,!1,Ce):E(ee,fe,ve,Q,re,be,Te,_e,Ce)},Z=(K,ee,fe,ve,Q,re,be,Te,_e)=>{let ke=0;const Be=ee.length;let Ce=K.length-1,je=Be-1;for(;ke<=Ce&&ke<=je;){const Ue=K[ke],He=ee[ke]=_e?Ti(ee[ke]):is(ee[ke]);if(Ws(Ue,He))m(Ue,He,fe,null,Q,re,be,Te,_e);else break;ke++}for(;ke<=Ce&&ke<=je;){const Ue=K[Ce],He=ee[je]=_e?Ti(ee[je]):is(ee[je]);if(Ws(Ue,He))m(Ue,He,fe,null,Q,re,be,Te,_e);else break;Ce--,je--}if(ke>Ce){if(ke<=je){const Ue=je+1,He=Ue<Be?ee[Ue].el:ve;for(;ke<=je;)m(null,ee[ke]=_e?Ti(ee[ke]):is(ee[ke]),fe,He,Q,re,be,Te,_e),ke++}}else if(ke>je)for(;ke<=Ce;)O(K[ke],Q,re,!0),ke++;else{const Ue=ke,He=ke,qe=new Map;for(ke=He;ke<=je;ke++){const mt=ee[ke]=_e?Ti(ee[ke]):is(ee[ke]);mt.key!=null&&qe.set(mt.key,ke)}let ye,xe=0;const Ee=je-He+1;let Fe=!1,Ge=0;const tt=new Array(Ee);for(ke=0;ke<Ee;ke++)tt[ke]=0;for(ke=Ue;ke<=Ce;ke++){const mt=K[ke];if(xe>=Ee){O(mt,Q,re,!0);continue}let Lt;if(mt.key!=null)Lt=qe.get(mt.key);else for(ye=He;ye<=je;ye++)if(tt[ye-He]===0&&Ws(mt,ee[ye])){Lt=ye;break}Lt===void 0?O(mt,Q,re,!0):(tt[Lt-He]=ke+1,Lt>=Ge?Ge=Lt:Fe=!0,m(mt,ee[Lt],fe,null,Q,re,be,Te,_e),xe++)}const ht=Fe?g3(tt):kl;for(ye=ht.length-1,ke=Ee-1;ke>=0;ke--){const mt=He+ke,Lt=ee[mt],ct=mt+1<Be?ee[mt+1].el:ve;tt[ke]===0?m(null,Lt,fe,ct,Q,re,be,Te,_e):Fe&&(ye<0||ke!==ht[ye]?j(Lt,fe,ct,2):ye--)}}},j=(K,ee,fe,ve,Q=null)=>{const{el:re,type:be,transition:Te,children:_e,shapeFlag:ke}=K;if(ke&6){j(K.component.subTree,ee,fe,ve);return}if(ke&128){K.suspense.move(ee,fe,ve);return}if(ke&64){be.move(K,ee,fe,J);return}if(be===Pe){n(re,ee,fe);for(let Ce=0;Ce<_e.length;Ce++)j(_e[Ce],ee,fe,ve);n(K.anchor,ee,fe);return}if(be===Ao){T(K,ee,fe);return}if(ve!==2&&ke&1&&Te)if(ve===0)Te.beforeEnter(re),n(re,ee,fe),zr(()=>Te.enter(re),Q);else{const{leave:Ce,delayLeave:je,afterLeave:Ue}=Te,He=()=>{K.ctx.isUnmounted?s(re):n(re,ee,fe)},qe=()=>{Ce(re,()=>{He(),Ue&&Ue()})};je?je(re,He,qe):qe()}else n(re,ee,fe)},O=(K,ee,fe,ve=!1,Q=!1)=>{const{type:re,props:be,ref:Te,children:_e,dynamicChildren:ke,shapeFlag:Be,patchFlag:Ce,dirs:je,cacheIndex:Ue}=K;if(Ce===-2&&(Q=!1),Te!=null&&(Xa(),Ol(Te,null,fe,K,!0),Ya()),Ue!=null&&(ee.renderCache[Ue]=void 0),Be&256){ee.ctx.deactivate(K);return}const He=Be&1&&je,qe=!Mi(K);let ye;if(qe&&(ye=be&&be.onVnodeBeforeUnmount)&&ss(ye,ee,K),Be&6)q(K.component,fe,ve);else{if(Be&128){K.suspense.unmount(fe,ve);return}He&&ca(K,null,ee,"beforeUnmount"),Be&64?K.type.remove(K,ee,fe,J,ve):ke&&!ke.hasOnce&&(re!==Pe||Ce>0&&Ce&64)?pe(ke,ee,fe,!1,!0):(re===Pe&&Ce&384||!Q&&Be&16)&&pe(_e,ee,fe),ve&&G(K)}(qe&&(ye=be&&be.onVnodeUnmounted)||He)&&zr(()=>{ye&&ss(ye,ee,K),He&&ca(K,null,ee,"unmounted")},fe)},G=K=>{const{type:ee,el:fe,anchor:ve,transition:Q}=K;if(ee===Pe){X(fe,ve);return}if(ee===Ao){C(K);return}const re=()=>{s(fe),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(K.shapeFlag&1&&Q&&!Q.persisted){const{leave:be,delayLeave:Te}=Q,_e=()=>be(fe,re);Te?Te(K.el,re,_e):_e()}else re()},X=(K,ee)=>{let fe;for(;K!==ee;)fe=f(K),s(K),K=fe;s(ee)},q=(K,ee,fe)=>{const{bum:ve,scope:Q,job:re,subTree:be,um:Te,m:_e,a:ke,parent:Be,slots:{__:Ce}}=K;d0(_e),d0(ke),ve&&Fl(ve),Be&&it(Ce)&&Ce.forEach(je=>{Be.renderCache[je]=void 0}),Q.stop(),re&&(re.flags|=8,O(be,K,ee,fe)),Te&&zr(Te,ee),zr(()=>{K.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve())},pe=(K,ee,fe,ve=!1,Q=!1,re=0)=>{for(let be=re;be<K.length;be++)O(K[be],ee,fe,ve,Q)},ie=K=>{if(K.shapeFlag&6)return ie(K.component.subTree);if(K.shapeFlag&128)return K.suspense.next();const ee=f(K.anchor||K.el),fe=ee&&ee[yS];return fe?f(fe):ee};let de=!1;const z=(K,ee,fe)=>{K==null?ee._vnode&&O(ee._vnode,null,null,!0):m(ee._vnode||null,K,ee,null,null,null,fe),ee._vnode=K,de||(de=!0,py(),c0(),de=!1)},J={p:m,um:O,m:j,r:G,mt:U,mc:E,pc:H,pbc:x,n:ie,o:t};let me,Y;return e&&([me,Y]=e(J)),{render:z,hydrate:me,createApp:u3(z,me)}}function gp({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function uo({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function JS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Bg(t,e,r=!1){const n=t.children,s=e.children;if(it(n)&&it(s))for(let i=0;i<n.length;i++){const a=n[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=Ti(s[i]),o.el=a.el),!r&&o.patchFlag!==-2&&Bg(a,o)),o.type===Ui&&(o.el=a.el),o.type===Mr&&!o.el&&(o.el=a.el)}}function g3(t){const e=t.slice(),r=[0];let n,s,i,a,o;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=r[r.length-1],t[s]<c){e[n]=s,r.push(n);continue}for(i=0,a=r.length-1;i<a;)o=i+a>>1,t[r[o]]<c?i=o+1:a=o;c<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,a=r[i-1];i-- >0;)r[i]=a,a=e[a];return r}function ZS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ZS(e)}function d0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const eT=Symbol.for("v-scx"),tT=()=>Es(eT);function x3(t,e){return hd(t,null,e)}function y3(t,e){return hd(t,null,{flush:"post"})}function rT(t,e){return hd(t,null,{flush:"sync"})}function er(t,e,r){return hd(t,e,r)}function hd(t,e,r=Ht){const{immediate:n,deep:s,flush:i,once:a}=r,o=lr({},r),l=e&&n||!e&&i!=="post";let c;if(Kl){if(i==="sync"){const h=tT();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Is,h.resume=Is,h.pause=Is,h}}const u=qr;o.call=(h,v,m)=>Rs(h,u,v,m);let d=!1;i==="post"?o.scheduler=h=>{zr(h,u&&u.suspense)}:i!=="sync"&&(d=!0,o.scheduler=(h,v)=>{v?h():wg(h)}),o.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=oD(t,e,o);return Kl&&(c?c.push(f):l&&f()),f}function E3(t,e,r){const n=this.proxy,s=hr(t)?t.includes(".")?nT(n,t):()=>n[t]:t.bind(n,n);let i;gt(e)?i=e:(i=e.handler,r=e);const a=Fo(this),o=hd(s,i.bind(n),r);return a(),o}function nT(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}function b3(t,e,r=Ht){const n=Ns(),s=hn(e),i=os(e),a=sT(t,s),o=uS((l,c)=>{let u,d=Ht,f;return rT(()=>{const h=t[s];zn(u,h)&&(u=h,c())}),{get(){return l(),r.get?r.get(u):u},set(h){const v=r.set?r.set(h):h;if(!zn(v,u)&&!(d!==Ht&&zn(h,d)))return;const m=n.vnode.props;m&&(e in m||s in m||i in m)&&(`onUpdate:${e}`in m||`onUpdate:${s}`in m||`onUpdate:${i}`in m)||(u=h,c()),n.emit(`update:${e}`,v),zn(h,v)&&zn(h,d)&&!zn(v,f)&&c(),d=h,f=v}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||Ht:o,done:!1}:{done:!0}}}},o}const sT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${hn(e)}Modifiers`]||t[`${os(e)}Modifiers`];function _3(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Ht;let s=r;const i=e.startsWith("update:"),a=i&&sT(n,e.slice(7));a&&(a.trim&&(s=r.map(u=>hr(u)?u.trim():u)),a.number&&(s=r.map(n0)));let o,l=n[o=nu(e)]||n[o=nu(hn(e))];!l&&i&&(l=n[o=nu(os(e))]),l&&Rs(l,t,6,s);const c=n[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Rs(c,t,6,s)}}function aT(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let a={},o=!1;if(!gt(t)){const l=c=>{const u=aT(c,e,!0);u&&(o=!0,lr(a,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!o?(ar(t)&&n.set(t,null),null):(it(i)?i.forEach(l=>a[l]=null):lr(a,i),ar(t)&&n.set(t,a),a)}function gh(t,e){return!t||!cd(e)?!1:(e=e.slice(2).replace(/Once$/,""),Jt(t,e[0].toLowerCase()+e.slice(1))||Jt(t,os(e))||Jt(t,e))}function Bf(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:v,inheritAttrs:m}=t,g=Mu(t);let b,_;try{if(r.shapeFlag&4){const C=s||n,R=C;b=is(c.call(R,C,u,d,h,f,v)),_=o}else{const C=e;b=is(C.length>1?C(d,{attrs:o,slots:a,emit:l}):C(d,null)),_=e.props?o:T3(o)}}catch(C){cu.length=0,jo(C,t,1),b=rt(Mr)}let T=b;if(_&&m!==!1){const C=Object.keys(_),{shapeFlag:R}=T;C.length&&R&7&&(i&&C.some(fg)&&(_=A3(_,i)),T=ya(T,_,!1,!0))}return r.dirs&&(T=ya(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(r.dirs):r.dirs),r.transition&&Ja(T,r.transition),b=T,Mu(g),b}function S3(t,e=!0){let r;for(let n=0;n<t.length;n++){const s=t[n];if(Za(s)){if(s.type!==Mr||s.children==="v-if"){if(r)return;r=s}}else return}return r}const T3=t=>{let e;for(const r in t)(r==="class"||r==="style"||cd(r))&&((e||(e={}))[r]=t[r]);return e},A3=(t,e)=>{const r={};for(const n in t)(!fg(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function w3(t,e,r){const{props:n,children:s,component:i}=t,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?wy(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(a[f]!==n[f]&&!gh(c,f))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?wy(n,a,c):!0:!!a;return!1}function wy(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!gh(r,i))return!0}return!1}function xh({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const f0=t=>t.__isSuspense;let sv=0;const C3={name:"Suspense",__isSuspense:!0,process(t,e,r,n,s,i,a,o,l,c){if(t==null)k3(e,r,n,s,i,a,o,l,c);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}D3(t,e,r,n,s,a,o,l,c)}},hydrate:R3,normalize:F3},I3=C3;function Vu(t,e){const r=t.props&&t.props[e];gt(r)&&r()}function k3(t,e,r,n,s,i,a,o,l){const{p:c,o:{createElement:u}}=l,d=u("div"),f=t.suspense=iT(t,s,n,e,d,r,i,a,o,l);c(null,f.pendingBranch=t.ssContent,d,null,n,f,i,a),f.deps>0?(Vu(t,"onPending"),Vu(t,"onFallback"),c(null,t.ssFallback,e,r,n,null,i,a),Nl(f,t.ssFallback)):f.resolve(!1,!0)}function D3(t,e,r,n,s,i,a,o,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,h=e.ssFallback,{activeBranch:v,pendingBranch:m,isInFallback:g,isHydrating:b}=d;if(m)d.pendingBranch=f,Ws(f,m)?(l(m,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0?d.resolve():g&&(b||(l(v,h,r,n,s,null,i,a,o),Nl(d,h)))):(d.pendingId=sv++,b?(d.isHydrating=!1,d.activeBranch=m):c(m,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),g?(l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0?d.resolve():(l(v,h,r,n,s,null,i,a,o),Nl(d,h))):v&&Ws(f,v)?(l(v,f,r,n,s,d,i,a,o),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0&&d.resolve()));else if(v&&Ws(f,v))l(v,f,r,n,s,d,i,a,o),Nl(d,f);else if(Vu(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=sv++,l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0)d.resolve();else{const{timeout:_,pendingId:T}=d;_>0?setTimeout(()=>{d.pendingId===T&&d.fallback(h)},_):_===0&&d.fallback(h)}}function iT(t,e,r,n,s,i,a,o,l,c,u=!1){const{p:d,m:f,um:h,n:v,o:{parentNode:m,remove:g}}=c;let b;const _=P3(t);_&&e&&e.pendingBranch&&(b=e.pendingId,e.deps++);const T=t.props?s0(t.props.timeout):void 0,C=i,R={vnode:t,parent:e,parentComponent:r,namespace:a,container:n,hiddenContainer:s,deps:0,pendingId:sv++,timeout:typeof T=="number"?T:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(D=!1,w=!1){const{vnode:E,activeBranch:y,pendingBranch:x,pendingId:I,effects:A,parentComponent:k,container:U}=R;let W=!1;R.isHydrating?R.isHydrating=!1:D||(W=y&&x.transition&&x.transition.mode==="out-in",W&&(y.transition.afterLeave=()=>{I===R.pendingId&&(f(x,U,i===C?v(y):i,0),Lu(A))}),y&&(m(y.el)===U&&(i=v(y)),h(y,k,R,!0)),W||f(x,U,i,0)),Nl(R,x),R.pendingBranch=null,R.isInFallback=!1;let P=R.parent,B=!1;for(;P;){if(P.pendingBranch){P.effects.push(...A),B=!0;break}P=P.parent}!B&&!W&&Lu(A),R.effects=[],_&&e&&e.pendingBranch&&b===e.pendingId&&(e.deps--,e.deps===0&&!w&&e.resolve()),Vu(E,"onResolve")},fallback(D){if(!R.pendingBranch)return;const{vnode:w,activeBranch:E,parentComponent:y,container:x,namespace:I}=R;Vu(w,"onFallback");const A=v(E),k=()=>{R.isInFallback&&(d(null,D,x,A,y,null,I,o,l),Nl(R,D))},U=D.transition&&D.transition.mode==="out-in";U&&(E.transition.afterLeave=k),R.isInFallback=!0,h(E,y,null,!0),U||k()},move(D,w,E){R.activeBranch&&f(R.activeBranch,D,w,E),R.container=D},next(){return R.activeBranch&&v(R.activeBranch)},registerDep(D,w,E){const y=!!R.pendingBranch;y&&R.deps++;const x=D.vnode.el;D.asyncDep.catch(I=>{jo(I,D,0)}).then(I=>{if(D.isUnmounted||R.isUnmounted||R.pendingId!==D.suspenseId)return;D.asyncResolved=!0;const{vnode:A}=D;lv(D,I,!1),x&&(A.el=x);const k=!x&&D.subTree.el;w(D,A,m(x||D.subTree.el),x?null:v(D.subTree),R,a,E),k&&g(k),xh(D,A.el),y&&--R.deps===0&&R.resolve()})},unmount(D,w){R.isUnmounted=!0,R.activeBranch&&h(R.activeBranch,r,D,w),R.pendingBranch&&h(R.pendingBranch,r,D,w)}};return R}function R3(t,e,r,n,s,i,a,o,l){const c=e.suspense=iT(e,n,r,t.parentNode,document.createElement("div"),null,s,i,a,o,!0),u=l(t,c.pendingBranch=e.ssContent,r,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function F3(t){const{shapeFlag:e,children:r}=t,n=e&32;t.ssContent=Cy(n?r.default:r),t.ssFallback=n?Cy(r.fallback):rt(Mr)}function Cy(t){let e;if(gt(t)){const r=Ro&&t._c;r&&(t._d=!1,N()),t=t(),r&&(t._d=!0,e=On,lT())}return it(t)&&(t=S3(t)),t=is(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(r=>r!==t)),t}function oT(t,e){e&&e.pendingBranch?it(t)?e.effects.push(...t):e.effects.push(t):Lu(t)}function Nl(t,e){t.activeBranch=e;const{vnode:r,parentComponent:n}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;r.el=s,n&&n.subTree===r&&(n.vnode.el=s,xh(n,s))}function P3(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Pe=Symbol.for("v-fgt"),Ui=Symbol.for("v-txt"),Mr=Symbol.for("v-cmt"),Ao=Symbol.for("v-stc"),cu=[];let On=null;function N(t=!1){cu.push(On=t?null:[])}function lT(){cu.pop(),On=cu[cu.length-1]||null}let Ro=1;function av(t,e=!1){Ro+=t,t<0&&On&&e&&(On.hasOnce=!0)}function cT(t){return t.dynamicChildren=Ro>0?On||kl:null,lT(),Ro>0&&On&&On.push(t),t}function M(t,e,r,n,s,i){return cT(p(t,e,r,n,s,i,!0))}function Rn(t,e,r,n,s){return cT(rt(t,e,r,n,s,!0))}function Za(t){return t?t.__v_isVNode===!0:!1}function Ws(t,e){return t.type===e.type&&t.key===e.key}function O3(t){}const uT=({key:t})=>t??null,Mf=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?hr(t)||Ar(t)||gt(t)?{i:Xr,r:t,k:e,f:!!r}:t:null);function p(t,e=null,r=null,n=0,s=null,i=t===Pe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&uT(e),ref:e&&Mf(e),scopeId:dh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Xr};return o?(Mg(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=hr(r)?8:16),Ro>0&&!a&&On&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&On.push(l),l}const rt=N3;function N3(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===NS)&&(t=Mr),Za(t)){const o=ya(t,e,!0);return r&&Mg(o,r),Ro>0&&!i&&On&&(o.shapeFlag&6?On[On.indexOf(t)]=o:On.push(o)),o.patchFlag=-2,o}if(H3(t)&&(t=t.__vccOpts),e){e=dT(e);let{class:o,style:l}=e;o&&!hr(o)&&(e.class=at(o)),ar(l)&&(ch(l)&&!it(l)&&(l=lr({},l)),e.style=Cn(l))}const a=hr(t)?1:f0(t)?128:ES(t)?64:ar(t)?4:gt(t)?2:0;return p(t,e,r,n,s,a,i,!0)}function dT(t){return t?ch(t)||jS(t)?lr({},t):t:null}function ya(t,e,r=!1,n=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=t,c=e?fT(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&uT(c),ref:e&&e.ref?r&&i?it(i)?i.concat(Mf(e)):[i,Mf(e)]:Mf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ya(t.ssContent),ssFallback:t.ssFallback&&ya(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&Ja(u,l.clone(u)),u}function Ne(t=" ",e=0){return rt(Ui,null,t,e)}function Xn(t,e){const r=rt(Ao,null,t);return r.staticCount=e,r}function Re(t="",e=!1){return e?(N(),Rn(Mr,null,t)):rt(Mr,null,t)}function is(t){return t==null||typeof t=="boolean"?rt(Mr):it(t)?rt(Pe,null,t.slice()):Za(t)?Ti(t):rt(Ui,null,String(t))}function Ti(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ya(t)}function Mg(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(it(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Mg(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!jS(e)?e._ctx=Xr:s===3&&Xr&&(Xr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else gt(e)?(e={default:e,_ctx:Xr},r=32):(e=String(e),n&64?(r=16,e=[Ne(e)]):r=8);t.children=e,t.shapeFlag|=r}function fT(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=at([e.class,n.class]));else if(s==="style")e.style=Cn([e.style,n.style]);else if(cd(s)){const i=e[s],a=n[s];a&&i!==a&&!(it(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=n[s])}return e}function ss(t,e,r,n=null){Rs(t,e,7,[r,n])}const L3=US();let B3=0;function hT(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||L3,i={uid:B3++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:WS(n,s),emitsOptions:aT(n,s),emit:null,emitted:null,propsDefaults:Ht,inheritAttrs:n.inheritAttrs,ctx:Ht,data:Ht,props:Ht,attrs:Ht,slots:Ht,refs:Ht,setupState:Ht,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=_3.bind(null,i),t.ce&&t.ce(i),i}let qr=null;const Ns=()=>qr||Xr;let h0,iv;{const t=nh(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};h0=e("__VUE_INSTANCE_SETTERS__",r=>qr=r),iv=e("__VUE_SSR_SETTERS__",r=>Kl=r)}const Fo=t=>{const e=qr;return h0(t),t.scope.on(),()=>{t.scope.off(),h0(e)}},ov=()=>{qr&&qr.scope.off(),h0(null)};function pT(t){return t.vnode.shapeFlag&4}let Kl=!1;function mT(t,e=!1,r=!1){e&&iv(e);const{props:n,children:s}=t.vnode,i=pT(t);d3(t,n,i,e),m3(t,s,r||e);const a=i?M3(t,e):void 0;return e&&iv(!1),a}function M3(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ev);const{setup:n}=r;if(n){Xa();const s=t.setupContext=n.length>1?gT(t):null,i=Fo(t),a=dc(n,t,0,[t.props,s]),o=pg(a);if(Ya(),i(),(o||t.sp)&&!Mi(t)&&kg(t),o){if(a.then(ov,ov),e)return a.then(l=>{lv(t,l,e)}).catch(l=>{jo(l,t,0)});t.asyncDep=a}else lv(t,a,e)}else vT(t,e)}function lv(t,e,r){gt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ar(e)&&(t.setupState=Ag(e)),vT(t,r)}let p0,cv;function U3(t){p0=t,cv=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,GD))}}const V3=()=>!p0;function vT(t,e,r){const n=t.type;if(!t.render){if(!e&&p0&&!n.render){const s=n.template||Og(t).template;if(s){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,c=lr(lr({isCustomElement:i,delimiters:o},a),l);n.render=p0(s,c)}}t.render=n.render||Is,cv&&cv(t)}{const s=Fo(t);Xa();try{s3(t)}finally{Ya(),s()}}}const $3={get(t,e){return In(t,"get",""),t[e]}};function gT(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,$3),slots:t.slots,emit:t.emit,expose:e}}function pd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ag(uh(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ou)return ou[r](t)},has(e,r){return r in e||r in ou}})):t.proxy}function uv(t,e=!0){return gt(t)?t.displayName||t.name:t.name||e&&t.__name}function H3(t){return gt(t)&&"__vccOpts"in t}const Ve=(t,e)=>nD(t,e,Kl);function yh(t,e,r){const n=arguments.length;return n===2?ar(e)&&!it(e)?Za(e)?rt(t,null,[e]):rt(t,e):rt(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Za(r)&&(r=[r]),rt(t,e,r))}function j3(){}function G3(t,e,r,n){const s=r[n];if(s&&xT(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=n,r[n]=i}function xT(t,e){const r=t.memo;if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(zn(r[n],e[n]))return!1;return Ro>0&&On&&On.push(t),!0}const yT="3.5.17",W3=Is,z3=fD,K3=yl,q3=xS,X3={createComponentInstance:hT,setupComponent:mT,renderComponentRoot:Bf,setCurrentRenderingInstance:Mu,isVNode:Za,normalizeVNode:is,getComponentPublicInstance:pd,ensureValidVNode:Pg,pushWarningContext:lD,popWarningContext:cD},Y3=X3,Q3=null,J3=null,Z3=null;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dv;const Iy=typeof window<"u"&&window.trustedTypes;if(Iy)try{dv=Iy.createPolicy("vue",{createHTML:t=>t})}catch{}const ET=dv?t=>dv.createHTML(t):t=>t,eR="http://www.w3.org/2000/svg",tR="http://www.w3.org/1998/Math/MathML",Ba=typeof document<"u"?document:null,ky=Ba&&Ba.createElement("template"),rR={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?Ba.createElementNS(eR,t):e==="mathml"?Ba.createElementNS(tR,t):r?Ba.createElement(t,{is:r}):Ba.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>Ba.createTextNode(t),createComment:t=>Ba.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ba.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const a=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{ky.innerHTML=ET(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=ky.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},pi="transition",kc="animation",ql=Symbol("_vtc"),bT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},_T=lr({},Ig,bT),nR=t=>(t.displayName="Transition",t.props=_T,t),sR=nR((t,{slots:e})=>yh(AS,ST(t),e)),fo=(t,e=[])=>{it(t)?t.forEach(r=>r(...e)):t&&t(...e)},Dy=t=>t?it(t)?t.some(e=>e.length>1):t.length>1:!1;function ST(t){const e={};for(const A in t)A in bT||(e[A]=t[A]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=i,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:h=`${r}-leave-to`}=t,v=aR(s),m=v&&v[0],g=v&&v[1],{onBeforeEnter:b,onEnter:_,onEnterCancelled:T,onLeave:C,onLeaveCancelled:R,onBeforeAppear:D=b,onAppear:w=_,onAppearCancelled:E=T}=e,y=(A,k,U,W)=>{A._enterCancelled=W,yi(A,k?u:o),yi(A,k?c:a),U&&U()},x=(A,k)=>{A._isLeaving=!1,yi(A,d),yi(A,h),yi(A,f),k&&k()},I=A=>(k,U)=>{const W=A?w:_,P=()=>y(k,A,U);fo(W,[k,P]),Ry(()=>{yi(k,A?l:i),ia(k,A?u:o),Dy(W)||Fy(k,n,m,P)})};return lr(e,{onBeforeEnter(A){fo(b,[A]),ia(A,i),ia(A,a)},onBeforeAppear(A){fo(D,[A]),ia(A,l),ia(A,c)},onEnter:I(!1),onAppear:I(!0),onLeave(A,k){A._isLeaving=!0;const U=()=>x(A,k);ia(A,d),A._enterCancelled?(ia(A,f),fv()):(fv(),ia(A,f)),Ry(()=>{A._isLeaving&&(yi(A,d),ia(A,h),Dy(C)||Fy(A,n,g,U))}),fo(C,[A,U])},onEnterCancelled(A){y(A,!1,void 0,!0),fo(T,[A])},onAppearCancelled(A){y(A,!0,void 0,!0),fo(E,[A])},onLeaveCancelled(A){x(A),fo(R,[A])}})}function aR(t){if(t==null)return null;if(ar(t))return[xp(t.enter),xp(t.leave)];{const e=xp(t);return[e,e]}}function xp(t){return s0(t)}function ia(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[ql]||(t[ql]=new Set)).add(e)}function yi(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[ql];r&&(r.delete(e),r.size||(t[ql]=void 0))}function Ry(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let iR=0;function Fy(t,e,r,n){const s=t._endId=++iR,i=()=>{s===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:a,timeout:o,propCount:l}=TT(t,e);if(!a)return n();const c=a+"end";let u=0;const d=()=>{t.removeEventListener(c,f),i()},f=h=>{h.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),t.addEventListener(c,f)}function TT(t,e){const r=window.getComputedStyle(t),n=v=>(r[v]||"").split(", "),s=n(`${pi}Delay`),i=n(`${pi}Duration`),a=Py(s,i),o=n(`${kc}Delay`),l=n(`${kc}Duration`),c=Py(o,l);let u=null,d=0,f=0;e===pi?a>0&&(u=pi,d=a,f=i.length):e===kc?c>0&&(u=kc,d=c,f=l.length):(d=Math.max(a,c),u=d>0?a>c?pi:kc:null,f=u?u===pi?i.length:l.length:0);const h=u===pi&&/\b(transform|all)(,|$)/.test(n(`${pi}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function Py(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>Oy(r)+Oy(t[n])))}function Oy(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function fv(){return document.body.offsetHeight}function oR(t,e,r){const n=t[ql];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const m0=Symbol("_vod"),AT=Symbol("_vsh"),wT={beforeMount(t,{value:e},{transition:r}){t[m0]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):Dc(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),Dc(t,!0),n.enter(t)):n.leave(t,()=>{Dc(t,!1)}):Dc(t,e))},beforeUnmount(t,{value:e}){Dc(t,e)}};function Dc(t,e){t.style.display=e?t[m0]:"none",t[AT]=!e}function lR(){wT.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const CT=Symbol("");function cR(t){const e=Ns();if(!e)return;const r=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>v0(i,s))},n=()=>{const s=t(e.proxy);e.ce?v0(e.ce,s):hv(e.subTree,s),r(s)};Dg(()=>{Lu(n)}),Qt(()=>{er(n,Is,{flush:"post"});const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),eo(()=>s.disconnect())})}function hv(t,e){if(t.shapeFlag&128){const r=t.suspense;t=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{hv(r.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)v0(t.el,e);else if(t.type===Pe)t.children.forEach(r=>hv(r,e));else if(t.type===Ao){let{el:r,anchor:n}=t;for(;r&&(v0(r,e),r!==n);)r=r.nextSibling}}function v0(t,e){if(t.nodeType===1){const r=t.style;let n="";for(const s in e)r.setProperty(`--${s}`,e[s]),n+=`--${s}: ${e[s]};`;r[CT]=n}}const uR=/(^|;)\s*display\s*:/;function dR(t,e,r){const n=t.style,s=hr(r);let i=!1;if(r&&!s){if(e)if(hr(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&Uf(n,o,"")}else for(const a in e)r[a]==null&&Uf(n,a,"");for(const a in r)a==="display"&&(i=!0),Uf(n,a,r[a])}else if(s){if(e!==r){const a=n[CT];a&&(r+=";"+a),n.cssText=r,i=uR.test(r)}}else e&&t.removeAttribute("style");m0 in t&&(t[m0]=i?n.display:"",t[AT]&&(n.display="none"))}const Ny=/\s*!important$/;function Uf(t,e,r){if(it(r))r.forEach(n=>Uf(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=fR(t,e);Ny.test(r)?t.setProperty(os(n),r.replace(Ny,""),"important"):t[n]=r}}const Ly=["Webkit","Moz","ms"],yp={};function fR(t,e){const r=yp[e];if(r)return r;let n=hn(e);if(n!=="filter"&&n in t)return yp[e]=n;n=ud(n);for(let s=0;s<Ly.length;s++){const i=Ly[s]+n;if(i in t)return yp[e]=i}return e}const By="http://www.w3.org/1999/xlink";function My(t,e,r,n,s,i=Tk(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(By,e.slice(6,e.length)):t.setAttributeNS(By,e,r):r==null||i&&!G_(r)?t.removeAttribute(e):t.setAttribute(e,i?"":Zs(r)?String(r):r)}function Uy(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?ET(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=G_(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(s||e)}function Va(t,e,r,n){t.addEventListener(e,r,n)}function hR(t,e,r,n){t.removeEventListener(e,r,n)}const Vy=Symbol("_vei");function pR(t,e,r,n,s=null){const i=t[Vy]||(t[Vy]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=mR(e);if(n){const c=i[e]=xR(n,s);Va(t,o,c,l)}else a&&(hR(t,o,a,l),i[e]=void 0)}}const $y=/(?:Once|Passive|Capture)$/;function mR(t){let e;if($y.test(t)){e={};let n;for(;n=t.match($y);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):os(t.slice(2)),e]}let Ep=0;const vR=Promise.resolve(),gR=()=>Ep||(vR.then(()=>Ep=0),Ep=Date.now());function xR(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Rs(yR(n,r.value),e,5,[n])};return r.value=t,r.attached=gR(),r}function yR(t,e){if(it(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Hy=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ER=(t,e,r,n,s,i)=>{const a=s==="svg";e==="class"?oR(t,n,a):e==="style"?dR(t,r,n):cd(e)?fg(e)||pR(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):bR(t,e,n,a))?(Uy(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&My(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!hr(n))?Uy(t,hn(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),My(t,e,n,a))};function bR(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Hy(e)&&gt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Hy(e)&&hr(r)?!1:e in t}const jy={};/*! #__NO_SIDE_EFFECTS__ */function IT(t,e,r){const n=dd(t,e);th(n)&&lr(n,e);class s extends Eh{constructor(a){super(n,a,r)}}return s.def=n,s}/*! #__NO_SIDE_EFFECTS__ */const _R=(t,e)=>IT(t,e,VT),SR=typeof HTMLElement<"u"?HTMLElement:class{};class Eh extends SR{constructor(e,r={},n=x0){super(),this._def=e,this._props=r,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==x0?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Eh){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,Go(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:a}=n;let o;if(i&&!it(i))for(const l in i){const c=i[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=s0(this._props[l])),(o||(o=Object.create(null)))[hn(l)]=!0)}this._numberProps=o,this._resolveProps(n),this.shadowRoot&&this._applyStyles(a),this._mount(n)},r=this._def.__asyncLoader;r?this._pendingResolve=r().then(n=>{n.configureApp=this._def.configureApp,e(this._def=n,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const r=this._instance&&this._instance.exposed;if(r)for(const n in r)Jt(this,n)||Object.defineProperty(this,n,{get:()=>ge(r[n])})}_resolveProps(e){const{props:r}=e,n=it(r)?r:Object.keys(r||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s]);for(const s of n.map(hn))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const r=this.hasAttribute(e);let n=r?this.getAttribute(e):jy;const s=hn(e);r&&this._numberProps&&this._numberProps[s]&&(n=s0(n)),this._setProp(s,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,r,n=!0,s=!1){if(r!==this._props[e]&&(r===jy?delete this._props[e]:(this._props[e]=r,e==="key"&&this._app&&(this._app._ceVNode.key=r)),s&&this._instance&&this._update(),n)){const i=this._ob;i&&i.disconnect(),r===!0?this.setAttribute(os(e),""):typeof r=="string"||typeof r=="number"?this.setAttribute(os(e),r+""):r||this.removeAttribute(os(e)),i&&i.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),UT(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const r=rt(this._def,lr(e,this._props));return this._instance||(r.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const s=(i,a)=>{this.dispatchEvent(new CustomEvent(i,th(a[0])?lr({detail:a},a[0]):{detail:a}))};n.emit=(i,...a)=>{s(i,a),os(i)!==i&&s(os(i),a)},this._setParent()}),r}_applyStyles(e,r){if(!e)return;if(r){if(r===this._def||this._styleChildren.has(r))return;this._styleChildren.add(r)}const n=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");n&&i.setAttribute("nonce",n),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let r;for(;r=this.firstChild;){const n=r.nodeType===1&&r.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(r),this.removeChild(r)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),r=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const s=e[n],i=s.getAttribute("name")||"default",a=this._slots[i],o=s.parentNode;if(a)for(const l of a){if(r&&l.nodeType===1){const c=r+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let d;for(;d=u.nextNode();)d.setAttribute(c,"")}o.insertBefore(l,s)}else for(;s.firstChild;)o.insertBefore(s.firstChild,s);o.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function kT(t){const e=Ns(),r=e&&e.ce;return r||null}function TR(){const t=kT();return t&&t.shadowRoot}function AR(t="$style"){{const e=Ns();if(!e)return Ht;const r=e.type.__cssModules;if(!r)return Ht;const n=r[t];return n||Ht}}const DT=new WeakMap,RT=new WeakMap,g0=Symbol("_moveCb"),Gy=Symbol("_enterCb"),wR=t=>(delete t.props.mode,t),CR=wR({name:"TransitionGroup",props:lr({},_T,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=Ns(),n=Cg();let s,i;return mh(()=>{if(!s.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!FR(s[0].el,r.vnode.el,a)){s=[];return}s.forEach(kR),s.forEach(DR);const o=s.filter(RR);fv(),o.forEach(l=>{const c=l.el,u=c.style;ia(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[g0]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c[g0]=null,yi(c,a))};c.addEventListener("transitionend",d)}),s=[]}),()=>{const a=Vt(t),o=ST(a);let l=a.tag||Pe;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),Ja(u,zl(u,o,n,r)),DT.set(u,u.el.getBoundingClientRect()))}i=e.default?hh(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&Ja(u,zl(u,o,n,r))}return rt(l,null,i)}}}),IR=CR;function kR(t){const e=t.el;e[g0]&&e[g0](),e[Gy]&&e[Gy]()}function DR(t){RT.set(t,t.el.getBoundingClientRect())}function RR(t){const e=DT.get(t),r=RT.get(t),n=e.left-r.left,s=e.top-r.top;if(n||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${s}px)`,i.transitionDuration="0s",t}}function FR(t,e,r){const n=t.cloneNode(),s=t[ql];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(n);const{hasTransform:a}=TT(n);return i.removeChild(n),a}const zi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return it(e)?r=>Fl(e,r):e};function PR(t){t.target.composing=!0}function Wy(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ks=Symbol("_assign"),At={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[ks]=zi(s);const i=n||s.props&&s.props.type==="number";Va(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;r&&(o=o.trim()),i&&(o=n0(o)),t[ks](o)}),r&&Va(t,"change",()=>{t.value=t.value.trim()}),e||(Va(t,"compositionstart",PR),Va(t,"compositionend",Wy),Va(t,"change",Wy))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:i}},a){if(t[ks]=zi(a),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?n0(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===l)||(t.value=l))}},Et={deep:!0,created(t,e,r){t[ks]=zi(r),Va(t,"change",()=>{const n=t._modelValue,s=Xl(t),i=t.checked,a=t[ks];if(it(n)){const o=sh(n,s),l=o!==-1;if(i&&!l)a(n.concat(s));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(Ho(n)){const o=new Set(n);i?o.add(s):o.delete(s),a(o)}else a(FT(t,i))})},mounted:zy,beforeUpdate(t,e,r){t[ks]=zi(r),zy(t,e,r)}};function zy(t,{value:e,oldValue:r},n){t._modelValue=e;let s;if(it(e))s=sh(e,n.props.value)>-1;else if(Ho(e))s=e.has(n.props.value);else{if(e===r)return;s=Wi(e,FT(t,!0))}t.checked!==s&&(t.checked=s)}const kn={created(t,{value:e},r){t.checked=Wi(e,r.props.value),t[ks]=zi(r),Va(t,"change",()=>{t[ks](Xl(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[ks]=zi(n),e!==r&&(t.checked=Wi(e,n.props.value))}},vr={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=Ho(e);Va(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>r?n0(Xl(a)):Xl(a));t[ks](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Go(()=>{t._assigning=!1})}),t[ks]=zi(n)},mounted(t,{value:e}){Ky(t,e)},beforeUpdate(t,e,r){t[ks]=zi(r)},updated(t,{value:e}){t._assigning||Ky(t,e)}};function Ky(t,e){const r=t.multiple,n=it(e);if(!(r&&!n&&!Ho(e))){for(let s=0,i=t.options.length;s<i;s++){const a=t.options[s],o=Xl(a);if(r)if(n){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(c=>String(c)===String(o)):a.selected=sh(e,o)>-1}else a.selected=e.has(o);else if(Wi(Xl(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Xl(t){return"_value"in t?t._value:t.value}function FT(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const PT={created(t,e,r){cf(t,e,r,null,"created")},mounted(t,e,r){cf(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){cf(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){cf(t,e,r,n,"updated")}};function OT(t,e){switch(t){case"SELECT":return vr;case"TEXTAREA":return At;default:switch(e){case"checkbox":return Et;case"radio":return kn;default:return At}}}function cf(t,e,r,n,s){const a=OT(t.tagName,r.props&&r.props.type)[s];a&&a(t,e,r,n)}function OR(){At.getSSRProps=({value:t})=>({value:t}),kn.getSSRProps=({value:t},e)=>{if(e.props&&Wi(e.props.value,t))return{checked:!0}},Et.getSSRProps=({value:t},e)=>{if(it(t)){if(e.props&&sh(t,e.props.value)>-1)return{checked:!0}}else if(Ho(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},PT.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const r=OT(e.type.toUpperCase(),e.props&&e.props.type);if(r.getSSRProps)return r.getSSRProps(t,e)}}const NR=["ctrl","shift","alt","meta"],LR={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>NR.some(r=>t[`${r}Key`]&&!e.includes(r))},bs=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...i)=>{for(let a=0;a<e.length;a++){const o=LR[e[a]];if(o&&o(s,e))return}return t(s,...i)})},BR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},NT=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=s=>{if(!("key"in s))return;const i=os(s.key);if(e.some(a=>a===i||BR[a]===i))return t(s)})},LT=lr({patchProp:ER},rR);let uu,qy=!1;function BT(){return uu||(uu=XS(LT))}function MT(){return uu=qy?uu:YS(LT),qy=!0,uu}const UT=(...t)=>{BT().render(...t)},MR=(...t)=>{MT().hydrate(...t)},x0=(...t)=>{const e=BT().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=HT(n);if(!s)return;const i=e._component;!gt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=r(s,!1,$T(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e},VT=(...t)=>{const e=MT().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=HT(n);if(s)return r(s,!0,$T(s))},e};function $T(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function HT(t){return hr(t)?document.querySelector(t):t}let Xy=!1;const UR=()=>{Xy||(Xy=!0,OR(),lR())};/**
* vue v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const VR=()=>{},$R=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:AS,BaseTransitionPropsValidators:Ig,Comment:Mr,DeprecationTypes:Z3,EffectScope:vg,ErrorCodes:dD,ErrorTypeStrings:z3,Fragment:Pe,KeepAlive:BD,ReactiveEffect:Pu,Static:Ao,Suspense:I3,Teleport:yD,Text:Ui,TrackOpTypes:sD,Transition:sR,TransitionGroup:IR,TriggerOpTypes:aD,VueElement:Eh,assertNumber:uD,callWithAsyncErrorHandling:Rs,callWithErrorHandling:dc,camelize:hn,capitalize:ud,cloneVNode:ya,compatUtils:J3,compile:VR,computed:Ve,createApp:x0,createBlock:Rn,createCommentVNode:Re,createElementBlock:M,createElementVNode:p,createHydrationRenderer:YS,createPropsRestProxy:r3,createRenderer:XS,createSSRApp:VT,createSlots:HD,createStaticVNode:Xn,createTextVNode:Ne,createVNode:rt,customRef:uS,defineAsyncComponent:ND,defineComponent:dd,defineCustomElement:IT,defineEmits:zD,defineExpose:KD,defineModel:YD,defineOptions:qD,defineProps:WD,defineSSRCustomElement:_R,defineSlots:XD,devtools:K3,effect:Ck,effectScope:gg,getCurrentInstance:Ns,getCurrentScope:xg,getCurrentWatcher:iD,getTransitionRawChildren:hh,guardReactiveProps:dT,h:yh,handleError:jo,hasInjectionContext:VS,hydrate:MR,hydrateOnIdle:kD,hydrateOnInteraction:PD,hydrateOnMediaQuery:FD,hydrateOnVisible:RD,initCustomFormatter:j3,initDirectivesForSSR:UR,inject:Es,isMemoSame:xT,isProxy:ch,isReactive:pa,isReadonly:Qa,isRef:Ar,isRuntimeOnly:V3,isShallow:ys,isVNode:Za,markRaw:uh,mergeDefaults:e3,mergeModels:t3,mergeProps:fT,nextTick:Go,normalizeClass:at,normalizeProps:_k,normalizeStyle:Cn,onActivated:CS,onBeforeMount:DS,onBeforeUnmount:vh,onBeforeUpdate:Dg,onDeactivated:IS,onErrorCaptured:OS,onMounted:Qt,onRenderTracked:PS,onRenderTriggered:FS,onScopeDispose:K_,onServerPrefetch:RS,onUnmounted:eo,onUpdated:mh,onWatcherCleanup:hS,openBlock:N,popScopeId:vD,provide:lu,proxyRefs:Ag,pushScopeId:mD,queuePostFlushCb:Lu,reactive:Os,readonly:Sg,ref:he,registerRuntimeCompiler:U3,render:UT,renderList:We,renderSlot:LS,resolveComponent:kr,resolveDirective:$D,resolveDynamicComponent:VD,resolveFilter:Q3,resolveTransitionHooks:zl,setBlockTracking:av,setDevtoolsHook:q3,setTransitionHooks:Ja,shallowReactive:_g,shallowReadonly:Kk,shallowRef:Tg,ssrContextKey:eT,ssrUtils:Y3,stop:Ik,toDisplayString:oe,toHandlerKey:nu,toHandlers:jD,toRaw:Vt,toRef:tD,toRefs:dS,toValue:Yk,transformVNodeArgs:O3,triggerRef:Xk,unref:ge,useAttrs:ZD,useCssModule:AR,useCssVars:cR,useHost:kT,useId:bD,useModel:b3,useSSRContext:tT,useShadowRoot:TR,useSlots:JD,useTemplateRef:_D,useTransitionState:Cg,vModelCheckbox:Et,vModelDynamic:PT,vModelRadio:kn,vModelSelect:vr,vModelText:At,vShow:wT,version:yT,warn:W3,watch:er,watchEffect:x3,watchPostEffect:y3,watchSyncEffect:rT,withAsyncContext:n3,withCtx:fh,withDefaults:QD,withDirectives:Me,withKeys:NT,withMemo:G3,withModifiers:bs,withScopeId:gD},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let jT;const bh=t=>jT=t,GT=Symbol();function pv(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var du;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(du||(du={}));function HR(){const t=gg(!0),e=t.run(()=>he({}));let r=[],n=[];const s=uh({install(i){bh(s),s._a=i,i.provide(GT,s),i.config.globalProperties.$pinia=s,n.forEach(a=>r.push(a)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const WT=()=>{};function Yy(t,e,r,n=WT){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&xg()&&K_(s),s}function fl(t,...e){t.slice().forEach(r=>{r(...e)})}const jR=t=>t(),Qy=Symbol(),bp=Symbol();function mv(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];pv(s)&&pv(n)&&t.hasOwnProperty(r)&&!Ar(n)&&!pa(n)?t[r]=mv(s,n):t[r]=n}return t}const GR=Symbol();function WR(t){return!pv(t)||!t.hasOwnProperty(GR)}const{assign:Ei}=Object;function zR(t){return!!(Ar(t)&&t.effect)}function KR(t,e,r,n){const{state:s,actions:i,getters:a}=e,o=r.state.value[t];let l;function c(){o||(r.state.value[t]=s?s():{});const u=dS(r.state.value[t]);return Ei(u,i,Object.keys(a||{}).reduce((d,f)=>(d[f]=uh(Ve(()=>{bh(r);const h=r._s.get(t);return a[f].call(h,h)})),d),{}))}return l=zT(t,c,e,r,n,!0),l}function zT(t,e,r={},n,s,i){let a;const o=Ei({actions:{}},r),l={deep:!0};let c,u,d=[],f=[],h;const v=n.state.value[t];!i&&!v&&(n.state.value[t]={}),he({});let m;function g(E){let y;c=u=!1,typeof E=="function"?(E(n.state.value[t]),y={type:du.patchFunction,storeId:t,events:h}):(mv(n.state.value[t],E),y={type:du.patchObject,payload:E,storeId:t,events:h});const x=m=Symbol();Go().then(()=>{m===x&&(c=!0)}),u=!0,fl(d,y,n.state.value[t])}const b=i?function(){const{state:y}=r,x=y?y():{};this.$patch(I=>{Ei(I,x)})}:WT;function _(){a.stop(),d=[],f=[],n._s.delete(t)}const T=(E,y="")=>{if(Qy in E)return E[bp]=y,E;const x=function(){bh(n);const I=Array.from(arguments),A=[],k=[];function U(B){A.push(B)}function W(B){k.push(B)}fl(f,{args:I,name:x[bp],store:R,after:U,onError:W});let P;try{P=E.apply(this&&this.$id===t?this:R,I)}catch(B){throw fl(k,B),B}return P instanceof Promise?P.then(B=>(fl(A,B),B)).catch(B=>(fl(k,B),Promise.reject(B))):(fl(A,P),P)};return x[Qy]=!0,x[bp]=y,x},C={_p:n,$id:t,$onAction:Yy.bind(null,f),$patch:g,$reset:b,$subscribe(E,y={}){const x=Yy(d,E,y.detached,()=>I()),I=a.run(()=>er(()=>n.state.value[t],A=>{(y.flush==="sync"?u:c)&&E({storeId:t,type:du.direct,events:h},A)},Ei({},l,y)));return x},$dispose:_},R=Os(C);n._s.set(t,R);const w=(n._a&&n._a.runWithContext||jR)(()=>n._e.run(()=>(a=gg()).run(()=>e({action:T}))));for(const E in w){const y=w[E];if(Ar(y)&&!zR(y)||pa(y))i||(v&&WR(y)&&(Ar(y)?y.value=v[E]:mv(y,v[E])),n.state.value[t][E]=y);else if(typeof y=="function"){const x=T(y,E);w[E]=x,o.actions[E]=y}}return Ei(R,w),Ei(Vt(R),w),Object.defineProperty(R,"$state",{get:()=>n.state.value[t],set:E=>{g(y=>{Ei(y,E)})}}),n._p.forEach(E=>{Ei(R,a.run(()=>E({store:R,app:n._a,pinia:n,options:o})))}),v&&i&&r.hydrate&&r.hydrate(R.$state,v),c=!0,u=!0,R}/*! #__NO_SIDE_EFFECTS__ */function KT(t,e,r){let n,s;const i=typeof e=="function";typeof t=="string"?(n=t,s=i?r:e):(s=t,n=t.id);function a(o,l){const c=VS();return o=o||(c?Es(GT,null):null),o&&bh(o),o=jT,o._s.has(n)||(i?zT(n,e,s,o):KR(n,s,o)),o._s.get(n)}return a.$id=n,a}var Jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},qR=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},XT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|o>>4;let f=(o&15)<<2|c>>6,h=c&63;l||(h=64,a||(f=64)),n.push(r[u],r[d],r[f],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const d=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||d==null)throw new XR;const f=i<<2|o>>4;if(n.push(f),c!==64){const h=o<<4&240|c>>2;if(n.push(h),d!==64){const v=c<<6&192|d;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YR=function(t){const e=qT(t);return XT.encodeByteArray(e,!0)},y0=function(t){return YR(t).replace(/\./g,"")},YT=function(t){try{return XT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=()=>QR().__FIREBASE_DEFAULTS__,ZR=()=>{if(typeof process>"u"||typeof Jy>"u")return;const t=Jy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&YT(t[1]);return e&&JSON.parse(e)},_h=()=>{try{return JR()||ZR()||eF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QT=t=>{var e,r;return(r=(e=_h())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Ug=t=>{const e=QT(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},JT=()=>{var t;return(t=_h())===null||t===void 0?void 0:t.config},ZT=t=>{var e;return(e=_h())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[y0(JSON.stringify(r)),y0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function nF(){var t;const e=(t=_h())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function iF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oF(){const t=Mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lF(){return!nF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cF(){try{return typeof indexedDB=="object"}catch{return!1}}function uF(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF="FirebaseError";class ra extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=dF,Object.setPrototypeOf(this,ra.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,md.prototype.create)}}class md{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?fF(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new ra(s,o,n)}}function fF(t,e){return t.replace(hF,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const hF=/\{\$([^}]+)}/g;function pF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function E0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(Zy(i)&&Zy(a)){if(!E0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Zy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function mF(t,e){const r=new vF(t,e);return r.subscribe.bind(r)}class vF{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");gF(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=_p),s.error===void 0&&(s.error=_p),s.complete===void 0&&(s.complete=_p);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gF(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function _p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t){return t&&t._delegate?t._delegate:t}class ei{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new tF;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EF(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:yF(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yF(t){return t===mo?void 0:t}function EF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new xF(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($t||($t={}));const _F={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},SF=$t.INFO,TF={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},AF=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=TF[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vg{constructor(e){this.name=e,this._logLevel=SF,this._logHandler=AF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_F[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...e),this._logHandler(this,$t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...e),this._logHandler(this,$t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...e),this._logHandler(this,$t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...e),this._logHandler(this,$t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...e),this._logHandler(this,$t.ERROR,...e)}}const wF=(t,e)=>e.some(r=>t instanceof r);let eE,tE;function CF(){return eE||(eE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IF(){return tE||(tE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tA=new WeakMap,vv=new WeakMap,rA=new WeakMap,Sp=new WeakMap,$g=new WeakMap;function kF(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(Vi(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&tA.set(r,t)}).catch(()=>{}),$g.set(e,t),e}function DF(t){if(vv.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});vv.set(t,e)}let gv={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return vv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rA.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Vi(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RF(t){gv=t(gv)}function FF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Tp(this),e,...r);return rA.set(n,e.sort?e.sort():[e]),Vi(n)}:IF().includes(t)?function(...e){return t.apply(Tp(this),e),Vi(tA.get(this))}:function(...e){return Vi(t.apply(Tp(this),e))}}function PF(t){return typeof t=="function"?FF(t):(t instanceof IDBTransaction&&DF(t),wF(t,CF())?new Proxy(t,gv):t)}function Vi(t){if(t instanceof IDBRequest)return kF(t);if(Sp.has(t))return Sp.get(t);const e=PF(t);return e!==t&&(Sp.set(t,e),$g.set(e,t)),e}const Tp=t=>$g.get(t);function OF(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=Vi(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Vi(a.result),l.oldVersion,l.newVersion,Vi(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const NF=["get","getKey","getAll","getAllKeys","count"],LF=["put","add","delete","clear"],Ap=new Map;function rE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ap.get(e))return Ap.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=LF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||NF.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return Ap.set(e,i),i}RF(t=>({...t,get:(e,r,n)=>rE(e,r)||t.get(e,r,n),has:(e,r)=>!!rE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(MF(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function MF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xv="@firebase/app",nE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new Vg("@firebase/app"),UF="@firebase/app-compat",VF="@firebase/analytics-compat",$F="@firebase/analytics",HF="@firebase/app-check-compat",jF="@firebase/app-check",GF="@firebase/auth",WF="@firebase/auth-compat",zF="@firebase/database",KF="@firebase/data-connect",qF="@firebase/database-compat",XF="@firebase/functions",YF="@firebase/functions-compat",QF="@firebase/installations",JF="@firebase/installations-compat",ZF="@firebase/messaging",eP="@firebase/messaging-compat",tP="@firebase/performance",rP="@firebase/performance-compat",nP="@firebase/remote-config",sP="@firebase/remote-config-compat",aP="@firebase/storage",iP="@firebase/storage-compat",oP="@firebase/firestore",lP="@firebase/vertexai-preview",cP="@firebase/firestore-compat",uP="firebase",dP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="[DEFAULT]",fP={[xv]:"fire-core",[UF]:"fire-core-compat",[$F]:"fire-analytics",[VF]:"fire-analytics-compat",[jF]:"fire-app-check",[HF]:"fire-app-check-compat",[GF]:"fire-auth",[WF]:"fire-auth-compat",[zF]:"fire-rtdb",[KF]:"fire-data-connect",[qF]:"fire-rtdb-compat",[XF]:"fire-fn",[YF]:"fire-fn-compat",[QF]:"fire-iid",[JF]:"fire-iid-compat",[ZF]:"fire-fcm",[eP]:"fire-fcm-compat",[tP]:"fire-perf",[rP]:"fire-perf-compat",[nP]:"fire-rc",[sP]:"fire-rc-compat",[aP]:"fire-gcs",[iP]:"fire-gcs-compat",[oP]:"fire-fst",[cP]:"fire-fst-compat",[lP]:"fire-vertex","fire-js":"fire-js",[uP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map,hP=new Map,Ev=new Map;function sE(t,e){try{t.container.addComponent(e)}catch(r){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ki(t){const e=t.name;if(Ev.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;Ev.set(e,t);for(const r of b0.values())sE(r,t);for(const r of hP.values())sE(r,t);return!0}function gd(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function fa(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new md("app","Firebase",pP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=dP;function nA(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:yv,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw $i.create("bad-app-name",{appName:String(s)});if(r||(r=JT()),!r)throw $i.create("no-options");const i=b0.get(s);if(i){if(E0(r,i.options)&&E0(n,i.config))return i;throw $i.create("duplicate-app",{appName:s})}const a=new bF(s);for(const l of Ev.values())a.addComponent(l);const o=new mP(r,n,a);return b0.set(s,o),o}function xd(t=yv){const e=b0.get(t);if(!e&&t===yv&&JT())return nA();if(!e)throw $i.create("no-app",{appName:t});return e}function Ds(t,e,r){var n;let s=(n=fP[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(o.join(" "));return}Ki(new ei(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="firebase-heartbeat-database",gP=1,$u="firebase-heartbeat-store";let wp=null;function sA(){return wp||(wp=OF(vP,gP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($u)}catch(r){console.warn(r)}}}}).catch(t=>{throw $i.create("idb-open",{originalErrorMessage:t.message})})),wp}async function xP(t){try{const r=(await sA()).transaction($u),n=await r.objectStore($u).get(aA(t));return await r.done,n}catch(e){if(e instanceof ra)ti.warn(e.message);else{const r=$i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ti.warn(r.message)}}}async function aE(t,e){try{const n=(await sA()).transaction($u,"readwrite");await n.objectStore($u).put(e,aA(t)),await n.done}catch(r){if(r instanceof ra)ti.warn(r.message);else{const n=$i.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ti.warn(n.message)}}}function aA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=1024,EP=30*24*60*60*1e3;class bP{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new SP(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=iE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=EP}),this._storage.overwrite(this._heartbeatsCache))}catch(n){ti.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=iE(),{heartbeatsToSend:n,unsentEntries:s}=_P(this._heartbeatsCache.heartbeats),i=y0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return ti.warn(r),""}}}function iE(){return new Date().toISOString().substring(0,10)}function _P(t,e=yP){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),oE(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),oE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class SP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cF()?uF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await xP(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return aE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return aE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function oE(t){return y0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){Ki(new ei("platform-logger",e=>new BF(e),"PRIVATE")),Ki(new ei("heartbeat",e=>new bP(e),"PRIVATE")),Ds(xv,nE,t),Ds(xv,nE,"esm2017"),Ds("fire-js","")}TP("");function Hg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function iA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AP=iA,oA=new md("auth","Firebase",iA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new Vg("@firebase/auth");function wP(t,...e){_0.logLevel<=$t.WARN&&_0.warn(`Auth (${Wo}): ${t}`,...e)}function Vf(t,...e){_0.logLevel<=$t.ERROR&&_0.error(`Auth (${Wo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t,...e){throw Gg(t,...e)}function Qs(t,...e){return Gg(t,...e)}function jg(t,e,r){const n=Object.assign(Object.assign({},AP()),{[e]:r});return new md("auth","Firebase",n).create(e,{appName:t.name})}function Hi(t){return jg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CP(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ea(t,"argument-error"),jg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gg(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return oA.create(t,...e)}function Tt(t,e,...r){if(!t)throw Gg(e,...r)}function $a(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vf(e),new Error(e)}function ri(t,e){t||$a(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IP(){return lE()==="http:"||lE()==="https:"}function lE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IP()||aF()||"connection"in navigator)?navigator.onLine:!0}function DP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,r){this.shortDelay=e,this.longDelay=r,ri(r>e,"Short delay should be less than long delay!"),this.isMobile=rF()||iF()}get(){return kP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t,e){ri(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=new yd(3e4,6e4);function Sh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fc(t,e,r,n,s={}){return cA(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=vd(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return sF()||(c.referrerPolicy="no-referrer"),lA.fetch()(dA(t,t.config.apiHost,r,o),c)})}async function cA(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},RP),e);try{const s=new PP(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw uf(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw uf(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw uf(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw jg(t,u,c);Ea(t,u)}}catch(s){if(s instanceof ra)throw s;Ea(t,"network-request-failed",{message:String(s)})}}async function uA(t,e,r,n,s={}){const i=await fc(t,e,r,n,s);return"mfaPendingCredential"in i&&Ea(t,"multi-factor-auth-required",{_serverResponse:i}),i}function dA(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Wg(t.config,s):`${t.config.apiScheme}://${s}`}class PP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Qs(this.auth,"network-request-failed")),FP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function uf(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Qs(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP(t,e){return fc(t,"POST","/v1/accounts:delete",e)}async function fA(t,e){return fc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NP(t,e=!1){const r=nr(t),n=await r.getIdToken(e),s=zg(n);Tt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:fu(Cp(s.auth_time)),issuedAtTime:fu(Cp(s.iat)),expirationTime:fu(Cp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Cp(t){return Number(t)*1e3}function zg(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Vf("JWT malformed, contained fewer than 3 sections"),null;try{const s=YT(r);return s?JSON.parse(s):(Vf("Failed to decode base64 JWT payload"),null)}catch(s){return Vf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cE(t){const e=zg(t);return Tt(e,"internal-error"),Tt(typeof e.exp<"u","internal-error"),Tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ra&&LP(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function LP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Hu(t,fA(r,{idToken:n}));Tt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?hA(i.providerUserInfo):[],o=UP(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _v(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function MP(t){const e=nr(t);await S0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UP(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function hA(t){return t.map(e=>{var{providerId:r}=e,n=Hg(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(t,e){const r=await cA(t,{},async()=>{const n=vd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=dA(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",lA.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function $P(t,e){return fc(t,"POST","/v2/accounts:revokeToken",Sh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt(typeof e.idToken<"u","internal-error"),Tt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Tt(e.length!==0,"internal-error");const r=cE(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await VP(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new Ll;return n&&(Tt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Tt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Tt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ll,this.toJSON())}_performRefresh(){return $a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t,e){Tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ha{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _v(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Hu(this,this.stsTokenManager.getToken(this.auth,e));return Tt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return NP(this,e)}reload(){return MP(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ha(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await S0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fa(this.auth.app))return Promise.reject(Hi(this.auth));const e=await this.getIdToken();return await Hu(this,OP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,u;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,h=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,v=(a=r.photoURL)!==null&&a!==void 0?a:void 0,m=(o=r.tenantId)!==null&&o!==void 0?o:void 0,g=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=r.createdAt)!==null&&c!==void 0?c:void 0,_=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:C,isAnonymous:R,providerData:D,stsTokenManager:w}=r;Tt(T&&w,e,"internal-error");const E=Ll.fromJSON(this.name,w);Tt(typeof T=="string",e,"internal-error"),mi(d,e.name),mi(f,e.name),Tt(typeof C=="boolean",e,"internal-error"),Tt(typeof R=="boolean",e,"internal-error"),mi(h,e.name),mi(v,e.name),mi(m,e.name),mi(g,e.name),mi(b,e.name),mi(_,e.name);const y=new Ha({uid:T,auth:e,email:f,emailVerified:C,displayName:d,isAnonymous:R,photoURL:v,phoneNumber:h,tenantId:m,stsTokenManager:E,createdAt:b,lastLoginAt:_});return D&&Array.isArray(D)&&(y.providerData=D.map(x=>Object.assign({},x))),g&&(y._redirectEventId=g),y}static async _fromIdTokenResponse(e,r,n=!1){const s=new Ll;s.updateFromServerResponse(r);const i=new Ha({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await S0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Tt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?hA(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new Ll;o.updateFromIdToken(n);const l=new Ha({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new _v(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;function ja(t){ri(t instanceof Function,"Expected a class definition");let e=uE.get(t);return e?(ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}pA.type="NONE";const dE=pA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t,e,r){return`firebase:${t}:${e}:${r}`}class Bl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=$f(this.userKey,s.apiKey,i),this.fullPersistenceKey=$f("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ha._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Bl(ja(dE),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ja(dE);const a=$f(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const d=Ha._fromJSON(e,u);c!==i&&(o=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Bl(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new Bl(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EA(e))return"Blackberry";if(bA(e))return"Webos";if(vA(e))return"Safari";if((e.includes("chrome/")||gA(e))&&!e.includes("edge/"))return"Chrome";if(yA(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function mA(t=Mn()){return/firefox\//i.test(t)}function vA(t=Mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gA(t=Mn()){return/crios\//i.test(t)}function xA(t=Mn()){return/iemobile/i.test(t)}function yA(t=Mn()){return/android/i.test(t)}function EA(t=Mn()){return/blackberry/i.test(t)}function bA(t=Mn()){return/webos/i.test(t)}function Kg(t=Mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HP(t=Mn()){var e;return Kg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jP(){return oF()&&document.documentMode===10}function _A(t=Mn()){return Kg(t)||yA(t)||bA(t)||EA(t)||/windows phone/i.test(t)||xA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t,e=[]){let r;switch(t){case"Browser":r=fE(Mn());break;case"Worker":r=`${fE(Mn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Wo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(t,e={}){return fc(t,"GET","/v2/passwordPolicy",Sh(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=6;class KP{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:zP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hE(this),this.idTokenSubscription=new hE(this),this.beforeStateQueue=new GP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ja(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Bl.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await fA(this,{idToken:e}),n=await Ha._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(fa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await S0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fa(this.app))return Promise.reject(Hi(this));const r=e?nr(e):null;return r&&Tt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fa(this.app)?Promise.reject(Hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fa(this.app)?Promise.reject(Hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ja(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WP(this),r=new KP(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new md("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await $P(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ja(e)||this._popupRedirectResolver;Tt(r,this,"argument-error"),this.redirectPersistenceManager=await Bl.create(this,[ja(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&wP(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ed(t){return nr(t)}class hE{constructor(e){this.auth=e,this.observer=null,this.addObserver=mF(r=>this.observer=r)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XP(t){qg=t}function YP(t){return qg.loadJS(t)}function QP(){return qg.gapiScript}function JP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e){const r=gd(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(E0(i,e??{}))return s;Ea(s,"already-initialized")}return r.initialize({options:e})}function e8(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ja);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function t8(t,e,r){const n=Ed(t);Tt(n._canInitEmulator,n,"emulator-config-failed"),Tt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=TA(e),{host:a,port:o}=r8(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),n8()}function TA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function r8(t){const e=TA(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:pE(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:pE(a)}}}function pE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function n8(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return $a("not implemented")}_getIdTokenResponse(e){return $a("not implemented")}_linkToIdToken(e,r){return $a("not implemented")}_getReauthenticationResolver(e){return $a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(t,e){return uA(t,"POST","/v1/accounts:signInWithIdp",Sh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8="http://localhost";class Po extends AA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ea("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Hg(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Po(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Ml(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ml(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ml(e,r)}buildRequest(){const e={requestUri:s8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=vd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends Xg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends bd{constructor(){super("facebook.com")}static credential(e){return Po._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends bd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Po._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ua.credential(r,n)}catch{return null}}}ua.GOOGLE_SIGN_IN_METHOD="google.com";ua.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends bd{constructor(){super("github.com")}static credential(e){return Po._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends bd{constructor(){super("twitter.com")}static credential(e,r){return Po._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return ki.credential(r,n)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a8(t,e){return uA(t,"POST","/v1/accounts:signUp",Sh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Ha._fromIdTokenResponse(e,n,s),a=mE(n);return new qi({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=mE(n);return new qi({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function mE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(t){var e;if(fa(t.app))return Promise.reject(Hi(t));const r=Ed(t);if(await r._initializationPromise,!((e=r.currentUser)===null||e===void 0)&&e.isAnonymous)return new qi({user:r.currentUser,providerId:null,operationType:"signIn"});const n=await a8(r,{returnSecureToken:!0}),s=await qi._fromIdTokenResponse(r,"signIn",n,!0);return await r._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends ra{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,T0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new T0(e,r,n,s)}}function wA(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?T0._fromErrorAndOperation(t,i,e,n):i})}async function o8(t,e,r=!1){const n=await Hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return qi._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l8(t,e,r=!1){const{auth:n}=t;if(fa(n.app))return Promise.reject(Hi(n));const s="reauthenticate";try{const i=await Hu(t,wA(n,s,e,t),r);Tt(i.idToken,n,"internal-error");const a=zg(i.idToken);Tt(a,n,"internal-error");const{sub:o}=a;return Tt(t.uid===o,n,"user-mismatch"),qi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ea(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c8(t,e,r=!1){if(fa(t.app))return Promise.reject(Hi(t));const n="signIn",s=await wA(t,n,e),i=await qi._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function u8(t,e,r,n){return nr(t).onIdTokenChanged(e,r,n)}function d8(t,e,r){return nr(t).beforeAuthStateChanged(e,r)}function CA(t,e,r,n){return nr(t).onAuthStateChanged(e,r,n)}function f8(t){return nr(t).signOut()}const A0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(A0,"1"),this.storage.removeItem(A0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=1e3,p8=10;class kA extends IA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_A(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);jP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,p8):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},h8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}kA.type="LOCAL";const m8=kA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends IA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}DA.type="SESSION";const RA=DA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Th(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await v8(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Th.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=Yg("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(){return window}function x8(t){ma().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){return typeof ma().WorkerGlobalScope<"u"&&typeof ma().importScripts=="function"}async function y8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function b8(){return FA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firebaseLocalStorageDb",_8=1,w0="firebaseLocalStorage",OA="fbase_key";class _d{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Ah(t,e){return t.transaction([w0],e?"readwrite":"readonly").objectStore(w0)}function S8(){const t=indexedDB.deleteDatabase(PA);return new _d(t).toPromise()}function Sv(){const t=indexedDB.open(PA,_8);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(w0,{keyPath:OA})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(w0)?e(n):(n.close(),await S8(),e(await Sv()))})})}async function vE(t,e,r){const n=Ah(t,!0).put({[OA]:e,value:r});return new _d(n).toPromise()}async function T8(t,e){const r=Ah(t,!1).get(e),n=await new _d(r).toPromise();return n===void 0?null:n.value}function gE(t,e){const r=Ah(t,!0).delete(e);return new _d(r).toPromise()}const A8=800,w8=3;class NA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>w8)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Th._getInstance(b8()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await y8(),!this.activeServiceWorker)return;this.sender=new g8(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||E8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sv();return await vE(e,A0,"1"),await gE(e,A0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>vE(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>T8(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>gE(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ah(s,!1).getAll();return new _d(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NA.type="LOCAL";const C8=NA;new yd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t,e){return e?ja(e):(Tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg extends AA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ml(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ml(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function I8(t){return c8(t.auth,new Qg(t),t.bypassAuthState)}function k8(t){const{auth:e,user:r}=t;return Tt(r,e,"internal-error"),l8(r,new Qg(t),t.bypassAuthState)}async function D8(t){const{auth:e,user:r}=t;return Tt(r,e,"internal-error"),o8(r,new Qg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return I8;case"linkViaPopup":case"linkViaRedirect":return D8;case"reauthViaPopup":case"reauthViaRedirect":return k8;default:Ea(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=new yd(2e3,1e4);async function MA(t,e,r){if(fa(t.app))return Promise.reject(Qs(t,"operation-not-supported-in-this-environment"));const n=Ed(t);CP(t,e,Xg);const s=LA(n,r);return new yo(n,"signInViaPopup",e,s).executeNotNull()}class yo extends BA{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,yo.currentPopupAction&&yo.currentPopupAction.cancel(),yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tt(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=Yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Qs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R8.get())};e()}}yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8="pendingRedirect",Hf=new Map;class P8 extends BA{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Hf.get(this.auth._key());if(!e){try{const n=await O8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Hf.set(this.auth._key(),e)}return this.bypassAuthState||Hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O8(t,e){const r=B8(e),n=L8(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function N8(t,e){Hf.set(t._key(),e)}function L8(t){return ja(t._redirectPersistence)}function B8(t){return $f(F8,t.config.apiKey,t.name)}async function M8(t,e,r=!1){if(fa(t.app))return Promise.reject(Hi(t));const n=Ed(t),s=LA(n,e),a=await new P8(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8=10*60*1e3;class V8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$8(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!UA(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Qs(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U8&&this.cachedEventUids.clear(),this.cachedEventUids.has(xE(e))}saveEventToCache(e){this.cachedEventUids.add(xE(e)),this.lastProcessedEventTime=Date.now()}}function xE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function UA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(t,e={}){return fc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G8=/^https?/;async function W8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await H8(t);for(const r of e)try{if(z8(r))return}catch{}Ea(t,"unauthorized-domain")}function z8(t){const e=bv(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!G8.test(r))return!1;if(j8.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=new yd(3e4,6e4);function yE(){const t=ma().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function q8(t){return new Promise((e,r)=>{var n,s,i;function a(){yE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yE(),r(Qs(t,"network-request-failed"))},timeout:K8.get()})}if(!((s=(n=ma().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ma().gapi)===null||i===void 0)&&i.load)a();else{const o=JP("iframefcb");return ma()[o]=()=>{gapi.load?a():r(Qs(t,"network-request-failed"))},YP(`${QP()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw jf=null,e})}let jf=null;function X8(t){return jf=jf||q8(t),jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=new yd(5e3,15e3),Q8="__/auth/iframe",J8="emulator/auth/iframe",Z8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t6(t){const e=t.config;Tt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Wg(e,J8):`https://${t.config.authDomain}/${Q8}`,n={apiKey:e.apiKey,appName:t.name,v:Wo},s=e6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${vd(n).slice(1)}`}async function r6(t){const e=await X8(t),r=ma().gapi;return Tt(r,t,"internal-error"),e.open({where:document.body,url:t6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z8,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=Qs(t,"network-request-failed"),o=ma().setTimeout(()=>{i(a)},Y8.get());function l(){ma().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s6=500,a6=600,i6="_blank",o6="http://localhost";class EE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l6(t,e,r,n=s6,s=a6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},n6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Mn().toLowerCase();r&&(o=gA(c)?i6:r),mA(c)&&(e=e||o6,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[h,v])=>`${f}${h}=${v},`,"");if(HP(c)&&o!=="_self")return c6(e||"",o),new EE(null);const d=window.open(e||"",o,u);Tt(d,t,"popup-blocked");try{d.focus()}catch{}return new EE(d)}function c6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="__/auth/handler",d6="emulator/auth/handler",f6=encodeURIComponent("fac");async function bE(t,e,r,n,s,i){Tt(t.config.authDomain,t,"auth-domain-config-required"),Tt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Wo,eventId:s};if(e instanceof Xg){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",pF(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))a[u]=d}if(e instanceof bd){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${f6}=${encodeURIComponent(l)}`:"";return`${h6(t)}?${vd(o).slice(1)}${c}`}function h6({config:t}){return t.emulator?Wg(t,d6):`https://${t.authDomain}/${u6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="webStorageSupport";class p6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RA,this._completeRedirectFn=M8,this._overrideRedirectResult=N8}async _openPopup(e,r,n,s){var i;ri((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await bE(e,r,n,bv(),s);return l6(e,a,Yg())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await bE(e,r,n,bv(),s);return x8(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(ri(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await r6(e),n=new V8(e);return r.register("authEvent",s=>(Tt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Ip,{type:Ip},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ip];a!==void 0&&r(!!a),Ea(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=W8(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return _A()||vA()||Kg()}}const m6=p6;var _E="@firebase/auth",SE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x6(t){Ki(new ei("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Tt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SA(t)},c=new qP(n,s,i,l);return e8(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ki(new ei("auth-internal",e=>{const r=Ed(e.getProvider("auth").getImmediate());return(n=>new v6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(_E,SE,g6(t)),Ds(_E,SE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=5*60,E6=ZT("authIdTokenMaxAge")||y6;let TE=null;const b6=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>E6)return;const s=r==null?void 0:r.token;TE!==s&&(TE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ju(t=xd()){const e=gd(t,"auth");if(e.isInitialized())return e.getImmediate();const r=ZP(t,{popupRedirectResolver:m6,persistence:[C8,m8,RA]}),n=ZT("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=b6(i.toString());d8(r,a,()=>a(r.currentUser)),u8(r,o=>a(o))}}const s=QT("auth");return s&&t8(r,`http://${s}`),r}function _6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}XP({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Qs("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",_6().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x6("Browser");var AE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wo,VA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,E){function y(){}y.prototype=E.prototype,w.D=E.prototype,w.prototype=new y,w.prototype.constructor=w,w.C=function(x,I,A){for(var k=Array(arguments.length-2),U=2;U<arguments.length;U++)k[U-2]=arguments[U];return E.prototype[I].apply(x,k)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,E,y){y||(y=0);var x=Array(16);if(typeof E=="string")for(var I=0;16>I;++I)x[I]=E.charCodeAt(y++)|E.charCodeAt(y++)<<8|E.charCodeAt(y++)<<16|E.charCodeAt(y++)<<24;else for(I=0;16>I;++I)x[I]=E[y++]|E[y++]<<8|E[y++]<<16|E[y++]<<24;E=w.g[0],y=w.g[1],I=w.g[2];var A=w.g[3],k=E+(A^y&(I^A))+x[0]+3614090360&4294967295;E=y+(k<<7&4294967295|k>>>25),k=A+(I^E&(y^I))+x[1]+3905402710&4294967295,A=E+(k<<12&4294967295|k>>>20),k=I+(y^A&(E^y))+x[2]+606105819&4294967295,I=A+(k<<17&4294967295|k>>>15),k=y+(E^I&(A^E))+x[3]+3250441966&4294967295,y=I+(k<<22&4294967295|k>>>10),k=E+(A^y&(I^A))+x[4]+4118548399&4294967295,E=y+(k<<7&4294967295|k>>>25),k=A+(I^E&(y^I))+x[5]+1200080426&4294967295,A=E+(k<<12&4294967295|k>>>20),k=I+(y^A&(E^y))+x[6]+2821735955&4294967295,I=A+(k<<17&4294967295|k>>>15),k=y+(E^I&(A^E))+x[7]+4249261313&4294967295,y=I+(k<<22&4294967295|k>>>10),k=E+(A^y&(I^A))+x[8]+1770035416&4294967295,E=y+(k<<7&4294967295|k>>>25),k=A+(I^E&(y^I))+x[9]+2336552879&4294967295,A=E+(k<<12&4294967295|k>>>20),k=I+(y^A&(E^y))+x[10]+4294925233&4294967295,I=A+(k<<17&4294967295|k>>>15),k=y+(E^I&(A^E))+x[11]+2304563134&4294967295,y=I+(k<<22&4294967295|k>>>10),k=E+(A^y&(I^A))+x[12]+1804603682&4294967295,E=y+(k<<7&4294967295|k>>>25),k=A+(I^E&(y^I))+x[13]+4254626195&4294967295,A=E+(k<<12&4294967295|k>>>20),k=I+(y^A&(E^y))+x[14]+2792965006&4294967295,I=A+(k<<17&4294967295|k>>>15),k=y+(E^I&(A^E))+x[15]+1236535329&4294967295,y=I+(k<<22&4294967295|k>>>10),k=E+(I^A&(y^I))+x[1]+4129170786&4294967295,E=y+(k<<5&4294967295|k>>>27),k=A+(y^I&(E^y))+x[6]+3225465664&4294967295,A=E+(k<<9&4294967295|k>>>23),k=I+(E^y&(A^E))+x[11]+643717713&4294967295,I=A+(k<<14&4294967295|k>>>18),k=y+(A^E&(I^A))+x[0]+3921069994&4294967295,y=I+(k<<20&4294967295|k>>>12),k=E+(I^A&(y^I))+x[5]+3593408605&4294967295,E=y+(k<<5&4294967295|k>>>27),k=A+(y^I&(E^y))+x[10]+38016083&4294967295,A=E+(k<<9&4294967295|k>>>23),k=I+(E^y&(A^E))+x[15]+3634488961&4294967295,I=A+(k<<14&4294967295|k>>>18),k=y+(A^E&(I^A))+x[4]+3889429448&4294967295,y=I+(k<<20&4294967295|k>>>12),k=E+(I^A&(y^I))+x[9]+568446438&4294967295,E=y+(k<<5&4294967295|k>>>27),k=A+(y^I&(E^y))+x[14]+3275163606&4294967295,A=E+(k<<9&4294967295|k>>>23),k=I+(E^y&(A^E))+x[3]+4107603335&4294967295,I=A+(k<<14&4294967295|k>>>18),k=y+(A^E&(I^A))+x[8]+1163531501&4294967295,y=I+(k<<20&4294967295|k>>>12),k=E+(I^A&(y^I))+x[13]+2850285829&4294967295,E=y+(k<<5&4294967295|k>>>27),k=A+(y^I&(E^y))+x[2]+4243563512&4294967295,A=E+(k<<9&4294967295|k>>>23),k=I+(E^y&(A^E))+x[7]+1735328473&4294967295,I=A+(k<<14&4294967295|k>>>18),k=y+(A^E&(I^A))+x[12]+2368359562&4294967295,y=I+(k<<20&4294967295|k>>>12),k=E+(y^I^A)+x[5]+4294588738&4294967295,E=y+(k<<4&4294967295|k>>>28),k=A+(E^y^I)+x[8]+2272392833&4294967295,A=E+(k<<11&4294967295|k>>>21),k=I+(A^E^y)+x[11]+1839030562&4294967295,I=A+(k<<16&4294967295|k>>>16),k=y+(I^A^E)+x[14]+4259657740&4294967295,y=I+(k<<23&4294967295|k>>>9),k=E+(y^I^A)+x[1]+2763975236&4294967295,E=y+(k<<4&4294967295|k>>>28),k=A+(E^y^I)+x[4]+1272893353&4294967295,A=E+(k<<11&4294967295|k>>>21),k=I+(A^E^y)+x[7]+4139469664&4294967295,I=A+(k<<16&4294967295|k>>>16),k=y+(I^A^E)+x[10]+3200236656&4294967295,y=I+(k<<23&4294967295|k>>>9),k=E+(y^I^A)+x[13]+681279174&4294967295,E=y+(k<<4&4294967295|k>>>28),k=A+(E^y^I)+x[0]+3936430074&4294967295,A=E+(k<<11&4294967295|k>>>21),k=I+(A^E^y)+x[3]+3572445317&4294967295,I=A+(k<<16&4294967295|k>>>16),k=y+(I^A^E)+x[6]+76029189&4294967295,y=I+(k<<23&4294967295|k>>>9),k=E+(y^I^A)+x[9]+3654602809&4294967295,E=y+(k<<4&4294967295|k>>>28),k=A+(E^y^I)+x[12]+3873151461&4294967295,A=E+(k<<11&4294967295|k>>>21),k=I+(A^E^y)+x[15]+530742520&4294967295,I=A+(k<<16&4294967295|k>>>16),k=y+(I^A^E)+x[2]+3299628645&4294967295,y=I+(k<<23&4294967295|k>>>9),k=E+(I^(y|~A))+x[0]+4096336452&4294967295,E=y+(k<<6&4294967295|k>>>26),k=A+(y^(E|~I))+x[7]+1126891415&4294967295,A=E+(k<<10&4294967295|k>>>22),k=I+(E^(A|~y))+x[14]+2878612391&4294967295,I=A+(k<<15&4294967295|k>>>17),k=y+(A^(I|~E))+x[5]+4237533241&4294967295,y=I+(k<<21&4294967295|k>>>11),k=E+(I^(y|~A))+x[12]+1700485571&4294967295,E=y+(k<<6&4294967295|k>>>26),k=A+(y^(E|~I))+x[3]+2399980690&4294967295,A=E+(k<<10&4294967295|k>>>22),k=I+(E^(A|~y))+x[10]+4293915773&4294967295,I=A+(k<<15&4294967295|k>>>17),k=y+(A^(I|~E))+x[1]+2240044497&4294967295,y=I+(k<<21&4294967295|k>>>11),k=E+(I^(y|~A))+x[8]+1873313359&4294967295,E=y+(k<<6&4294967295|k>>>26),k=A+(y^(E|~I))+x[15]+4264355552&4294967295,A=E+(k<<10&4294967295|k>>>22),k=I+(E^(A|~y))+x[6]+2734768916&4294967295,I=A+(k<<15&4294967295|k>>>17),k=y+(A^(I|~E))+x[13]+1309151649&4294967295,y=I+(k<<21&4294967295|k>>>11),k=E+(I^(y|~A))+x[4]+4149444226&4294967295,E=y+(k<<6&4294967295|k>>>26),k=A+(y^(E|~I))+x[11]+3174756917&4294967295,A=E+(k<<10&4294967295|k>>>22),k=I+(E^(A|~y))+x[2]+718787259&4294967295,I=A+(k<<15&4294967295|k>>>17),k=y+(A^(I|~E))+x[9]+3951481745&4294967295,w.g[0]=w.g[0]+E&4294967295,w.g[1]=w.g[1]+(I+(k<<21&4294967295|k>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+A&4294967295}n.prototype.u=function(w,E){E===void 0&&(E=w.length);for(var y=E-this.blockSize,x=this.B,I=this.h,A=0;A<E;){if(I==0)for(;A<=y;)s(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<E;)if(x[I++]=w.charCodeAt(A++),I==this.blockSize){s(this,x),I=0;break}}else for(;A<E;)if(x[I++]=w[A++],I==this.blockSize){s(this,x),I=0;break}}this.h=I,this.o+=E},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var E=1;E<w.length-8;++E)w[E]=0;var y=8*this.o;for(E=w.length-8;E<w.length;++E)w[E]=y&255,y/=256;for(this.u(w),w=Array(16),E=y=0;4>E;++E)for(var x=0;32>x;x+=8)w[y++]=this.g[E]>>>x&255;return w};function i(w,E){var y=o;return Object.prototype.hasOwnProperty.call(y,w)?y[w]:y[w]=E(w)}function a(w,E){this.h=E;for(var y=[],x=!0,I=w.length-1;0<=I;I--){var A=w[I]|0;x&&A==E||(y[I]=A,x=!1)}this.g=y}var o={};function l(w){return-128<=w&&128>w?i(w,function(E){return new a([E|0],0>E?-1:0)}):new a([w|0],0>w?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return d;if(0>w)return g(c(-w));for(var E=[],y=1,x=0;w>=y;x++)E[x]=w/y|0,y*=4294967296;return new a(E,0)}function u(w,E){if(w.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(w.charAt(0)=="-")return g(u(w.substring(1),E));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(E,8)),x=d,I=0;I<w.length;I+=8){var A=Math.min(8,w.length-I),k=parseInt(w.substring(I,I+A),E);8>A?(A=c(Math.pow(E,A)),x=x.j(A).add(c(k))):(x=x.j(y),x=x.add(c(k)))}return x}var d=l(0),f=l(1),h=l(16777216);t=a.prototype,t.m=function(){if(m(this))return-g(this).m();for(var w=0,E=1,y=0;y<this.g.length;y++){var x=this.i(y);w+=(0<=x?x:4294967296+x)*E,E*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(v(this))return"0";if(m(this))return"-"+g(this).toString(w);for(var E=c(Math.pow(w,6)),y=this,x="";;){var I=C(y,E).g;y=b(y,I.j(E));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(w);if(y=I,v(y))return A+x;for(;6>A.length;)A="0"+A;x=A+x}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function v(w){if(w.h!=0)return!1;for(var E=0;E<w.g.length;E++)if(w.g[E]!=0)return!1;return!0}function m(w){return w.h==-1}t.l=function(w){return w=b(this,w),m(w)?-1:v(w)?0:1};function g(w){for(var E=w.g.length,y=[],x=0;x<E;x++)y[x]=~w.g[x];return new a(y,~w.h).add(f)}t.abs=function(){return m(this)?g(this):this},t.add=function(w){for(var E=Math.max(this.g.length,w.g.length),y=[],x=0,I=0;I<=E;I++){var A=x+(this.i(I)&65535)+(w.i(I)&65535),k=(A>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);x=k>>>16,A&=65535,k&=65535,y[I]=k<<16|A}return new a(y,y[y.length-1]&-2147483648?-1:0)};function b(w,E){return w.add(g(E))}t.j=function(w){if(v(this)||v(w))return d;if(m(this))return m(w)?g(this).j(g(w)):g(g(this).j(w));if(m(w))return g(this.j(g(w)));if(0>this.l(h)&&0>w.l(h))return c(this.m()*w.m());for(var E=this.g.length+w.g.length,y=[],x=0;x<2*E;x++)y[x]=0;for(x=0;x<this.g.length;x++)for(var I=0;I<w.g.length;I++){var A=this.i(x)>>>16,k=this.i(x)&65535,U=w.i(I)>>>16,W=w.i(I)&65535;y[2*x+2*I]+=k*W,_(y,2*x+2*I),y[2*x+2*I+1]+=A*W,_(y,2*x+2*I+1),y[2*x+2*I+1]+=k*U,_(y,2*x+2*I+1),y[2*x+2*I+2]+=A*U,_(y,2*x+2*I+2)}for(x=0;x<E;x++)y[x]=y[2*x+1]<<16|y[2*x];for(x=E;x<2*E;x++)y[x]=0;return new a(y,0)};function _(w,E){for(;(w[E]&65535)!=w[E];)w[E+1]+=w[E]>>>16,w[E]&=65535,E++}function T(w,E){this.g=w,this.h=E}function C(w,E){if(v(E))throw Error("division by zero");if(v(w))return new T(d,d);if(m(w))return E=C(g(w),E),new T(g(E.g),g(E.h));if(m(E))return E=C(w,g(E)),new T(g(E.g),E.h);if(30<w.g.length){if(m(w)||m(E))throw Error("slowDivide_ only works with positive integers.");for(var y=f,x=E;0>=x.l(w);)y=R(y),x=R(x);var I=D(y,1),A=D(x,1);for(x=D(x,2),y=D(y,2);!v(x);){var k=A.add(x);0>=k.l(w)&&(I=I.add(y),A=k),x=D(x,1),y=D(y,1)}return E=b(w,I.j(E)),new T(I,E)}for(I=d;0<=w.l(E);){for(y=Math.max(1,Math.floor(w.m()/E.m())),x=Math.ceil(Math.log(y)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),A=c(y),k=A.j(E);m(k)||0<k.l(w);)y-=x,A=c(y),k=A.j(E);v(A)&&(A=f),I=I.add(A),w=b(w,k)}return new T(I,w)}t.A=function(w){return C(this,w).h},t.and=function(w){for(var E=Math.max(this.g.length,w.g.length),y=[],x=0;x<E;x++)y[x]=this.i(x)&w.i(x);return new a(y,this.h&w.h)},t.or=function(w){for(var E=Math.max(this.g.length,w.g.length),y=[],x=0;x<E;x++)y[x]=this.i(x)|w.i(x);return new a(y,this.h|w.h)},t.xor=function(w){for(var E=Math.max(this.g.length,w.g.length),y=[],x=0;x<E;x++)y[x]=this.i(x)^w.i(x);return new a(y,this.h^w.h)};function R(w){for(var E=w.g.length+1,y=[],x=0;x<E;x++)y[x]=w.i(x)<<1|w.i(x-1)>>>31;return new a(y,w.h)}function D(w,E){var y=E>>5;E%=32;for(var x=w.g.length-y,I=[],A=0;A<x;A++)I[A]=0<E?w.i(A+y)>>>E|w.i(A+y+1)<<32-E:w.i(A+y);return new a(I,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,VA=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,wo=a}).apply(typeof AE<"u"?AE:typeof self<"u"?self:typeof window<"u"?window:{});var df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $A,Wc,HA,Gf,Tv,jA,GA,WA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,F,V){return S==Array.prototype||S==Object.prototype||(S[F]=V.value),S};function r(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof df=="object"&&df];for(var F=0;F<S.length;++F){var V=S[F];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=r(this);function s(S,F){if(F)e:{var V=n;S=S.split(".");for(var ne=0;ne<S.length-1;ne++){var Se=S[ne];if(!(Se in V))break e;V=V[Se]}S=S[S.length-1],ne=V[S],F=F(ne),F!=ne&&F!=null&&e(V,S,{configurable:!0,writable:!0,value:F})}}function i(S,F){S instanceof String&&(S+="");var V=0,ne=!1,Se={next:function(){if(!ne&&V<S.length){var Oe=V++;return{value:F(Oe,S[Oe]),done:!1}}return ne=!0,{done:!0,value:void 0}}};return Se[Symbol.iterator]=function(){return Se},Se}s("Array.prototype.values",function(S){return S||function(){return i(this,function(F,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(S){var F=typeof S;return F=F!="object"?F:S?Array.isArray(S)?"array":F:"null",F=="array"||F=="object"&&typeof S.length=="number"}function c(S){var F=typeof S;return F=="object"&&S!=null||F=="function"}function u(S,F,V){return S.call.apply(S.bind,arguments)}function d(S,F,V){if(!S)throw Error();if(2<arguments.length){var ne=Array.prototype.slice.call(arguments,2);return function(){var Se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Se,ne),S.apply(F,Se)}}return function(){return S.apply(F,arguments)}}function f(S,F,V){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(S,F){var V=Array.prototype.slice.call(arguments,1);return function(){var ne=V.slice();return ne.push.apply(ne,arguments),S.apply(this,ne)}}function v(S,F){function V(){}V.prototype=F.prototype,S.aa=F.prototype,S.prototype=new V,S.prototype.constructor=S,S.Qb=function(ne,Se,Oe){for(var Qe=Array(arguments.length-2),or=2;or<arguments.length;or++)Qe[or-2]=arguments[or];return F.prototype[Se].apply(ne,Qe)}}function m(S){const F=S.length;if(0<F){const V=Array(F);for(let ne=0;ne<F;ne++)V[ne]=S[ne];return V}return[]}function g(S,F){for(let V=1;V<arguments.length;V++){const ne=arguments[V];if(l(ne)){const Se=S.length||0,Oe=ne.length||0;S.length=Se+Oe;for(let Qe=0;Qe<Oe;Qe++)S[Se+Qe]=ne[Qe]}else S.push(ne)}}class b{constructor(F,V){this.i=F,this.j=V,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function _(S){return/^[\s\xa0]*$/.test(S)}function T(){var S=o.navigator;return S&&(S=S.userAgent)?S:""}function C(S){return C[" "](S),S}C[" "]=function(){};var R=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function D(S,F,V){for(const ne in S)F.call(V,S[ne],ne,S)}function w(S,F){for(const V in S)F.call(void 0,S[V],V,S)}function E(S){const F={};for(const V in S)F[V]=S[V];return F}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(S,F){let V,ne;for(let Se=1;Se<arguments.length;Se++){ne=arguments[Se];for(V in ne)S[V]=ne[V];for(let Oe=0;Oe<y.length;Oe++)V=y[Oe],Object.prototype.hasOwnProperty.call(ne,V)&&(S[V]=ne[V])}}function I(S){var F=1;S=S.split(":");const V=[];for(;0<F&&S.length;)V.push(S.shift()),F--;return S.length&&V.push(S.join(":")),V}function A(S){o.setTimeout(()=>{throw S},0)}function k(){var S=L;let F=null;return S.g&&(F=S.g,S.g=S.g.next,S.g||(S.h=null),F.next=null),F}class U{constructor(){this.h=this.g=null}add(F,V){const ne=W.get();ne.set(F,V),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var W=new b(()=>new P,S=>S.reset());class P{constructor(){this.next=this.g=this.h=null}set(F,V){this.h=F,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,H=!1,L=new U,Z=()=>{const S=o.Promise.resolve(void 0);B=()=>{S.then(j)}};var j=()=>{for(var S;S=k();){try{S.h.call(S.g)}catch(V){A(V)}var F=W;F.j(S),100>F.h&&(F.h++,S.next=F.g,F.g=S)}H=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(S,F){this.type=S,this.g=this.target=F,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,F=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const V=()=>{};o.addEventListener("test",V,F),o.removeEventListener("test",V,F)}catch{}return S}();function q(S,F){if(G.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var V=this.type=S.type,ne=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=F,F=S.relatedTarget){if(R){e:{try{C(F.nodeName);var Se=!0;break e}catch{}Se=!1}Se||(F=null)}}else V=="mouseover"?F=S.fromElement:V=="mouseout"&&(F=S.toElement);this.relatedTarget=F,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:pe[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&q.aa.h.call(this)}}v(q,G);var pe={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),de=0;function z(S,F,V,ne,Se){this.listener=S,this.proxy=null,this.src=F,this.type=V,this.capture=!!ne,this.ha=Se,this.key=++de,this.da=this.fa=!1}function J(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function me(S){this.src=S,this.g={},this.h=0}me.prototype.add=function(S,F,V,ne,Se){var Oe=S.toString();S=this.g[Oe],S||(S=this.g[Oe]=[],this.h++);var Qe=K(S,F,ne,Se);return-1<Qe?(F=S[Qe],V||(F.fa=!1)):(F=new z(F,this.src,Oe,!!ne,Se),F.fa=V,S.push(F)),F};function Y(S,F){var V=F.type;if(V in S.g){var ne=S.g[V],Se=Array.prototype.indexOf.call(ne,F,void 0),Oe;(Oe=0<=Se)&&Array.prototype.splice.call(ne,Se,1),Oe&&(J(F),S.g[V].length==0&&(delete S.g[V],S.h--))}}function K(S,F,V,ne){for(var Se=0;Se<S.length;++Se){var Oe=S[Se];if(!Oe.da&&Oe.listener==F&&Oe.capture==!!V&&Oe.ha==ne)return Se}return-1}var ee="closure_lm_"+(1e6*Math.random()|0),fe={};function ve(S,F,V,ne,Se){if(Array.isArray(F)){for(var Oe=0;Oe<F.length;Oe++)ve(S,F[Oe],V,ne,Se);return null}return V=je(V),S&&S[ie]?S.K(F,V,c(ne)?!!ne.capture:!1,Se):Q(S,F,V,!1,ne,Se)}function Q(S,F,V,ne,Se,Oe){if(!F)throw Error("Invalid event type");var Qe=c(Se)?!!Se.capture:!!Se,or=Be(S);if(or||(S[ee]=or=new me(S)),V=or.add(F,V,ne,Qe,Oe),V.proxy)return V;if(ne=re(),V.proxy=ne,ne.src=S,ne.listener=V,S.addEventListener)X||(Se=Qe),Se===void 0&&(Se=!1),S.addEventListener(F.toString(),ne,Se);else if(S.attachEvent)S.attachEvent(_e(F.toString()),ne);else if(S.addListener&&S.removeListener)S.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return V}function re(){function S(V){return F.call(S.src,S.listener,V)}const F=ke;return S}function be(S,F,V,ne,Se){if(Array.isArray(F))for(var Oe=0;Oe<F.length;Oe++)be(S,F[Oe],V,ne,Se);else ne=c(ne)?!!ne.capture:!!ne,V=je(V),S&&S[ie]?(S=S.i,F=String(F).toString(),F in S.g&&(Oe=S.g[F],V=K(Oe,V,ne,Se),-1<V&&(J(Oe[V]),Array.prototype.splice.call(Oe,V,1),Oe.length==0&&(delete S.g[F],S.h--)))):S&&(S=Be(S))&&(F=S.g[F.toString()],S=-1,F&&(S=K(F,V,ne,Se)),(V=-1<S?F[S]:null)&&Te(V))}function Te(S){if(typeof S!="number"&&S&&!S.da){var F=S.src;if(F&&F[ie])Y(F.i,S);else{var V=S.type,ne=S.proxy;F.removeEventListener?F.removeEventListener(V,ne,S.capture):F.detachEvent?F.detachEvent(_e(V),ne):F.addListener&&F.removeListener&&F.removeListener(ne),(V=Be(F))?(Y(V,S),V.h==0&&(V.src=null,F[ee]=null)):J(S)}}}function _e(S){return S in fe?fe[S]:fe[S]="on"+S}function ke(S,F){if(S.da)S=!0;else{F=new q(F,this);var V=S.listener,ne=S.ha||S.src;S.fa&&Te(S),S=V.call(ne,F)}return S}function Be(S){return S=S[ee],S instanceof me?S:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function je(S){return typeof S=="function"?S:(S[Ce]||(S[Ce]=function(F){return S.handleEvent(F)}),S[Ce])}function Ue(){O.call(this),this.i=new me(this),this.M=this,this.F=null}v(Ue,O),Ue.prototype[ie]=!0,Ue.prototype.removeEventListener=function(S,F,V,ne){be(this,S,F,V,ne)};function He(S,F){var V,ne=S.F;if(ne)for(V=[];ne;ne=ne.F)V.push(ne);if(S=S.M,ne=F.type||F,typeof F=="string")F=new G(F,S);else if(F instanceof G)F.target=F.target||S;else{var Se=F;F=new G(ne,S),x(F,Se)}if(Se=!0,V)for(var Oe=V.length-1;0<=Oe;Oe--){var Qe=F.g=V[Oe];Se=qe(Qe,ne,!0,F)&&Se}if(Qe=F.g=S,Se=qe(Qe,ne,!0,F)&&Se,Se=qe(Qe,ne,!1,F)&&Se,V)for(Oe=0;Oe<V.length;Oe++)Qe=F.g=V[Oe],Se=qe(Qe,ne,!1,F)&&Se}Ue.prototype.N=function(){if(Ue.aa.N.call(this),this.i){var S=this.i,F;for(F in S.g){for(var V=S.g[F],ne=0;ne<V.length;ne++)J(V[ne]);delete S.g[F],S.h--}}this.F=null},Ue.prototype.K=function(S,F,V,ne){return this.i.add(String(S),F,!1,V,ne)},Ue.prototype.L=function(S,F,V,ne){return this.i.add(String(S),F,!0,V,ne)};function qe(S,F,V,ne){if(F=S.i.g[String(F)],!F)return!0;F=F.concat();for(var Se=!0,Oe=0;Oe<F.length;++Oe){var Qe=F[Oe];if(Qe&&!Qe.da&&Qe.capture==V){var or=Qe.listener,on=Qe.ha||Qe.src;Qe.fa&&Y(S.i,Qe),Se=or.call(on,ne)!==!1&&Se}}return Se&&!ne.defaultPrevented}function ye(S,F,V){if(typeof S=="function")V&&(S=f(S,V));else if(S&&typeof S.handleEvent=="function")S=f(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:o.setTimeout(S,F||0)}function xe(S){S.g=ye(()=>{S.g=null,S.i&&(S.i=!1,xe(S))},S.l);const F=S.h;S.h=null,S.m.apply(null,F)}class Ee extends O{constructor(F,V){super(),this.m=F,this.l=V,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(S){O.call(this),this.h=S,this.g={}}v(Fe,O);var Ge=[];function tt(S){D(S.g,function(F,V){this.g.hasOwnProperty(V)&&Te(F)},S),S.g={}}Fe.prototype.N=function(){Fe.aa.N.call(this),tt(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=o.JSON.stringify,mt=o.JSON.parse,Lt=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function ct(){}ct.prototype.h=null;function st(S){return S.h||(S.h=S.i())}function ut(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ft(){G.call(this,"d")}v(Ft,G);function pr(){G.call(this,"c")}v(pr,G);var $n={},ui=null;function ts(){return ui=ui||new Ue}$n.La="serverreachability";function sl(S){G.call(this,$n.La,S)}v(sl,G);function Ra(S){const F=ts();He(F,new sl(F))}$n.STAT_EVENT="statevent";function ao(S,F){G.call(this,$n.STAT_EVENT,S),this.stat=F}v(ao,G);function Wr(S){const F=ts();He(F,new ao(F,S))}$n.Ma="timingevent";function io(S,F){G.call(this,$n.Ma,S),this.size=F}v(io,G);function _r(S,F){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},F)}function xn(){this.g=!0}xn.prototype.xa=function(){this.g=!1};function al(S,F,V,ne,Se,Oe){S.info(function(){if(S.g)if(Oe)for(var Qe="",or=Oe.split("&"),on=0;on<or.length;on++){var Xt=or[on].split("=");if(1<Xt.length){var yn=Xt[0];Xt=Xt[1];var En=yn.split("_");Qe=2<=En.length&&En[1]=="type"?Qe+(yn+"="+Xt+"&"):Qe+(yn+"=redacted&")}}else Qe=null;else Qe=Oe;return"XMLHTTP REQ ("+ne+") [attempt "+Se+"]: "+F+`
`+V+`
`+Qe})}function Ec(S,F,V,ne,Se,Oe,Qe){S.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+Se+"]: "+F+`
`+V+`
`+Oe+" "+Qe})}function te(S,F,V,ne){S.info(function(){return"XMLHTTP TEXT ("+F+"): "+se(S,V)+(ne?" "+ne:"")})}function le(S,F){S.info(function(){return"TIMEOUT: "+F})}xn.prototype.info=function(){};function se(S,F){if(!S.g)return F;if(!F)return null;try{var V=JSON.parse(F);if(V){for(S=0;S<V.length;S++)if(Array.isArray(V[S])){var ne=V[S];if(!(2>ne.length)){var Se=ne[1];if(Array.isArray(Se)&&!(1>Se.length)){var Oe=Se[0];if(Oe!="noop"&&Oe!="stop"&&Oe!="close")for(var Qe=1;Qe<Se.length;Qe++)Se[Qe]=""}}}}return ht(V)}catch{return F}}var ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ce={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ue;function Ae(){}v(Ae,ct),Ae.prototype.g=function(){return new XMLHttpRequest},Ae.prototype.i=function(){return{}},ue=new Ae;function Le(S,F,V,ne){this.j=S,this.i=F,this.l=V,this.R=ne||1,this.U=new Fe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}var Ie={},De={};function Ke(S,F,V){S.L=1,S.v=Gd(Pa(F)),S.m=V,S.P=!0,Ye(S,null)}function Ye(S,F){S.F=Date.now(),et(S),S.A=Pa(S.v);var V=S.A,ne=S.R;Array.isArray(ne)||(ne=[String(ne)]),Hx(V.i,"t",ne),S.C=0,V=S.j.J,S.h=new we,S.g=iy(S.j,V?F:null,!S.m),0<S.O&&(S.M=new Ee(f(S.Y,S,S.g),S.O)),F=S.U,V=S.g,ne=S.ca;var Se="readystatechange";Array.isArray(Se)||(Se&&(Ge[0]=Se.toString()),Se=Ge);for(var Oe=0;Oe<Se.length;Oe++){var Qe=ve(V,Se[Oe],ne||F.handleEvent,!1,F.h||F);if(!Qe)break;F.g[Qe.key]=Qe}F=S.H?E(S.H):{},S.m?(S.u||(S.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,F)):(S.u="GET",S.g.ea(S.A,S.u,null,F)),Ra(),al(S.i,S.u,S.A,S.l,S.R,S.m)}Le.prototype.ca=function(S){S=S.target;const F=this.M;F&&Oa(S)==3?F.j():this.Y(S)},Le.prototype.Y=function(S){try{if(S==this.g)e:{const En=Oa(this.g);var F=this.g.Ba();const cl=this.g.Z();if(!(3>En)&&(En!=3||this.g&&(this.h.h||this.g.oa()||Xx(this.g)))){this.J||En!=4||F==7||(F==8||0>=cl?Ra(3):Ra(2)),ir(this);var V=this.g.Z();this.X=V;t:if(nt(this)){var ne=Xx(this.g);S="";var Se=ne.length,Oe=Oa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xr(this),tr(this);var Qe="";break t}this.h.i=new o.TextDecoder}for(F=0;F<Se;F++)this.h.h=!0,S+=this.h.i.decode(ne[F],{stream:!(Oe&&F==Se-1)});ne.length=0,this.h.g+=S,this.C=0,Qe=this.h.g}else Qe=this.g.oa();if(this.o=V==200,Ec(this.i,this.u,this.A,this.l,this.R,En,V),this.o){if(this.T&&!this.K){t:{if(this.g){var or,on=this.g;if((or=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(or)){var Xt=or;break t}}Xt=null}if(V=Xt)te(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fa(this,V);else{this.o=!1,this.s=3,Wr(12),xr(this),tr(this);break e}}if(this.P){V=!0;let Bs;for(;!this.J&&this.C<Qe.length;)if(Bs=Xe(this,Qe),Bs==De){En==4&&(this.s=4,Wr(14),V=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if(Bs==Ie){this.s=4,Wr(15),te(this.i,this.l,Qe,"[Invalid Chunk]"),V=!1;break}else te(this.i,this.l,Bs,null),Fa(this,Bs);if(nt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),En!=4||Qe.length!=0||this.h.h||(this.s=1,Wr(16),V=!1),this.o=this.o&&V,!V)te(this.i,this.l,Qe,"[Invalid Chunked Response]"),xr(this),tr(this);else if(0<Qe.length&&!this.W){this.W=!0;var yn=this.j;yn.g==this&&yn.ba&&!yn.M&&(yn.j.info("Great, no buffering proxy detected. Bytes received: "+Qe.length),op(yn),yn.M=!0,Wr(11))}}else te(this.i,this.l,Qe,null),Fa(this,Qe);En==4&&xr(this),this.o&&!this.J&&(En==4?ry(this.j,this):(this.o=!1,et(this)))}else lk(this.g),V==400&&0<Qe.indexOf("Unknown SID")?(this.s=3,Wr(12)):(this.s=0,Wr(13)),xr(this),tr(this)}}}catch{}finally{}};function nt(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function Xe(S,F){var V=S.C,ne=F.indexOf(`
`,V);return ne==-1?De:(V=Number(F.substring(V,ne)),isNaN(V)?Ie:(ne+=1,ne+V>F.length?De:(F=F.slice(ne,ne+V),S.C=ne+V,F)))}Le.prototype.cancel=function(){this.J=!0,xr(this)};function et(S){S.S=Date.now()+S.I,St(S,S.I)}function St(S,F){if(S.B!=null)throw Error("WatchDog timer not null");S.B=_r(f(S.ba,S),F)}function ir(S){S.B&&(o.clearTimeout(S.B),S.B=null)}Le.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(le(this.i,this.A),this.L!=2&&(Ra(),Wr(17)),xr(this),this.s=2,tr(this)):St(this,this.S-S)};function tr(S){S.j.G==0||S.J||ry(S.j,S)}function xr(S){ir(S);var F=S.M;F&&typeof F.ma=="function"&&F.ma(),S.M=null,tt(S.U),S.g&&(F=S.g,S.g=null,F.abort(),F.ma())}function Fa(S,F){try{var V=S.j;if(V.G!=0&&(V.g==S||cs(V.h,S))){if(!S.K&&cs(V.h,S)&&V.G==3){try{var ne=V.Da.g.parse(F)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var Se=ne;if(Se[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<S.F)Yd(V),qd(V);else break e;ip(V),Wr(18)}}else V.za=Se[1],0<V.za-V.T&&37500>Se[2]&&V.F&&V.v==0&&!V.C&&(V.C=_r(f(V.Za,V),6e3));if(1>=il(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else co(V,11)}else if((S.K||V.g==S)&&Yd(V),!_(F))for(Se=V.Da.g.parse(F),F=0;F<Se.length;F++){let Xt=Se[F];if(V.T=Xt[0],Xt=Xt[1],V.G==2)if(Xt[0]=="c"){V.K=Xt[1],V.ia=Xt[2];const yn=Xt[3];yn!=null&&(V.la=yn,V.j.info("VER="+V.la));const En=Xt[4];En!=null&&(V.Aa=En,V.j.info("SVER="+V.Aa));const cl=Xt[5];cl!=null&&typeof cl=="number"&&0<cl&&(ne=1.5*cl,V.L=ne,V.j.info("backChannelRequestTimeoutMs_="+ne)),ne=V;const Bs=S.g;if(Bs){const Jd=Bs.g?Bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jd){var Oe=ne.h;Oe.g||Jd.indexOf("spdy")==-1&&Jd.indexOf("quic")==-1&&Jd.indexOf("h2")==-1||(Oe.j=Oe.l,Oe.g=new Set,Oe.h&&(np(Oe,Oe.h),Oe.h=null))}if(ne.D){const lp=Bs.g?Bs.g.getResponseHeader("X-HTTP-Session-Id"):null;lp&&(ne.ya=lp,mr(ne.I,ne.D,lp))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-S.F,V.j.info("Handshake RTT: "+V.R+"ms")),ne=V;var Qe=S;if(ne.qa=ay(ne,ne.J?ne.ia:null,ne.W),Qe.K){Ox(ne.h,Qe);var or=Qe,on=ne.L;on&&(or.I=on),or.B&&(ir(or),et(or)),ne.g=Qe}else ey(ne);0<V.i.length&&Xd(V)}else Xt[0]!="stop"&&Xt[0]!="close"||co(V,7);else V.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?co(V,7):ap(V):Xt[0]!="noop"&&V.l&&V.l.ta(Xt),V.v=0)}}Ra(4)}catch{}}var oo=class{constructor(S,F){this.g=S,this.map=F}};function di(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function na(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function il(S){return S.h?1:S.g?S.g.size:0}function cs(S,F){return S.h?S.h==F:S.g?S.g.has(F):!1}function np(S,F){S.g?S.g.add(F):S.h=F}function Ox(S,F){S.h&&S.h==F?S.h=null:S.g&&S.g.has(F)&&S.g.delete(F)}di.prototype.cancel=function(){if(this.i=Nx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function Nx(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let F=S.i;for(const V of S.g.values())F=F.concat(V.D);return F}return m(S.i)}function KI(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(l(S)){for(var F=[],V=S.length,ne=0;ne<V;ne++)F.push(S[ne]);return F}F=[],V=0;for(ne in S)F[V++]=S[ne];return F}function qI(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(l(S)||typeof S=="string"){var F=[];S=S.length;for(var V=0;V<S;V++)F.push(V);return F}F=[],V=0;for(const ne in S)F[V++]=ne;return F}}}function Lx(S,F){if(S.forEach&&typeof S.forEach=="function")S.forEach(F,void 0);else if(l(S)||typeof S=="string")Array.prototype.forEach.call(S,F,void 0);else for(var V=qI(S),ne=KI(S),Se=ne.length,Oe=0;Oe<Se;Oe++)F.call(void 0,ne[Oe],V&&V[Oe],S)}var Bx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XI(S,F){if(S){S=S.split("&");for(var V=0;V<S.length;V++){var ne=S[V].indexOf("="),Se=null;if(0<=ne){var Oe=S[V].substring(0,ne);Se=S[V].substring(ne+1)}else Oe=S[V];F(Oe,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}function lo(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof lo){this.h=S.h,Hd(this,S.j),this.o=S.o,this.g=S.g,jd(this,S.s),this.l=S.l;var F=S.i,V=new Sc;V.i=F.i,F.g&&(V.g=new Map(F.g),V.h=F.h),Mx(this,V),this.m=S.m}else S&&(F=String(S).match(Bx))?(this.h=!1,Hd(this,F[1]||"",!0),this.o=bc(F[2]||""),this.g=bc(F[3]||"",!0),jd(this,F[4]),this.l=bc(F[5]||"",!0),Mx(this,F[6]||"",!0),this.m=bc(F[7]||"")):(this.h=!1,this.i=new Sc(null,this.h))}lo.prototype.toString=function(){var S=[],F=this.j;F&&S.push(_c(F,Ux,!0),":");var V=this.g;return(V||F=="file")&&(S.push("//"),(F=this.o)&&S.push(_c(F,Ux,!0),"@"),S.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&S.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&S.push("/"),S.push(_c(V,V.charAt(0)=="/"?JI:QI,!0))),(V=this.i.toString())&&S.push("?",V),(V=this.m)&&S.push("#",_c(V,ek)),S.join("")};function Pa(S){return new lo(S)}function Hd(S,F,V){S.j=V?bc(F,!0):F,S.j&&(S.j=S.j.replace(/:$/,""))}function jd(S,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);S.s=F}else S.s=null}function Mx(S,F,V){F instanceof Sc?(S.i=F,tk(S.i,S.h)):(V||(F=_c(F,ZI)),S.i=new Sc(F,S.h))}function mr(S,F,V){S.i.set(F,V)}function Gd(S){return mr(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function bc(S,F){return S?F?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function _c(S,F,V){return typeof S=="string"?(S=encodeURI(S).replace(F,YI),V&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function YI(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Ux=/[#\/\?@]/g,QI=/[#\?:]/g,JI=/[#\?]/g,ZI=/[#\?@]/g,ek=/#/g;function Sc(S,F){this.h=this.g=null,this.i=S||null,this.j=!!F}function fi(S){S.g||(S.g=new Map,S.h=0,S.i&&XI(S.i,function(F,V){S.add(decodeURIComponent(F.replace(/\+/g," ")),V)}))}t=Sc.prototype,t.add=function(S,F){fi(this),this.i=null,S=ol(this,S);var V=this.g.get(S);return V||this.g.set(S,V=[]),V.push(F),this.h+=1,this};function Vx(S,F){fi(S),F=ol(S,F),S.g.has(F)&&(S.i=null,S.h-=S.g.get(F).length,S.g.delete(F))}function $x(S,F){return fi(S),F=ol(S,F),S.g.has(F)}t.forEach=function(S,F){fi(this),this.g.forEach(function(V,ne){V.forEach(function(Se){S.call(F,Se,ne,this)},this)},this)},t.na=function(){fi(this);const S=Array.from(this.g.values()),F=Array.from(this.g.keys()),V=[];for(let ne=0;ne<F.length;ne++){const Se=S[ne];for(let Oe=0;Oe<Se.length;Oe++)V.push(F[ne])}return V},t.V=function(S){fi(this);let F=[];if(typeof S=="string")$x(this,S)&&(F=F.concat(this.g.get(ol(this,S))));else{S=Array.from(this.g.values());for(let V=0;V<S.length;V++)F=F.concat(S[V])}return F},t.set=function(S,F){return fi(this),this.i=null,S=ol(this,S),$x(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[F]),this.h+=1,this},t.get=function(S,F){return S?(S=this.V(S),0<S.length?String(S[0]):F):F};function Hx(S,F,V){Vx(S,F),0<V.length&&(S.i=null,S.g.set(ol(S,F),m(V)),S.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],F=Array.from(this.g.keys());for(var V=0;V<F.length;V++){var ne=F[V];const Oe=encodeURIComponent(String(ne)),Qe=this.V(ne);for(ne=0;ne<Qe.length;ne++){var Se=Oe;Qe[ne]!==""&&(Se+="="+encodeURIComponent(String(Qe[ne]))),S.push(Se)}}return this.i=S.join("&")};function ol(S,F){return F=String(F),S.j&&(F=F.toLowerCase()),F}function tk(S,F){F&&!S.j&&(fi(S),S.i=null,S.g.forEach(function(V,ne){var Se=ne.toLowerCase();ne!=Se&&(Vx(this,ne),Hx(this,Se,V))},S)),S.j=F}function rk(S,F){const V=new xn;if(o.Image){const ne=new Image;ne.onload=h(hi,V,"TestLoadImage: loaded",!0,F,ne),ne.onerror=h(hi,V,"TestLoadImage: error",!1,F,ne),ne.onabort=h(hi,V,"TestLoadImage: abort",!1,F,ne),ne.ontimeout=h(hi,V,"TestLoadImage: timeout",!1,F,ne),o.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=S}else F(!1)}function nk(S,F){const V=new xn,ne=new AbortController,Se=setTimeout(()=>{ne.abort(),hi(V,"TestPingServer: timeout",!1,F)},1e4);fetch(S,{signal:ne.signal}).then(Oe=>{clearTimeout(Se),Oe.ok?hi(V,"TestPingServer: ok",!0,F):hi(V,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(Se),hi(V,"TestPingServer: error",!1,F)})}function hi(S,F,V,ne,Se){try{Se&&(Se.onload=null,Se.onerror=null,Se.onabort=null,Se.ontimeout=null),ne(V)}catch{}}function sk(){this.g=new Lt}function ak(S,F,V){const ne=V||"";try{Lx(S,function(Se,Oe){let Qe=Se;c(Se)&&(Qe=ht(Se)),F.push(ne+Oe+"="+encodeURIComponent(Qe))})}catch(Se){throw F.push(ne+"type="+encodeURIComponent("_badmap")),Se}}function Wd(S){this.l=S.Ub||null,this.j=S.eb||!1}v(Wd,ct),Wd.prototype.g=function(){return new zd(this.l,this.j)},Wd.prototype.i=function(S){return function(){return S}}({});function zd(S,F){Ue.call(this),this.D=S,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(zd,Ue),t=zd.prototype,t.open=function(S,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=F,this.readyState=1,Ac(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(F.body=S),(this.D||o).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tc(this)),this.readyState=0},t.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Ac(this)),this.g&&(this.readyState=3,Ac(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jx(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function jx(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}t.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var F=S.value?S.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!S.done}))&&(this.response=this.responseText+=F)}S.done?Tc(this):Ac(this),this.readyState==3&&jx(this)}},t.Ra=function(S){this.g&&(this.response=this.responseText=S,Tc(this))},t.Qa=function(S){this.g&&(this.response=S,Tc(this))},t.ga=function(){this.g&&Tc(this)};function Tc(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Ac(S)}t.setRequestHeader=function(S,F){this.u.append(S,F)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],F=this.h.entries();for(var V=F.next();!V.done;)V=V.value,S.push(V[0]+": "+V[1]),V=F.next();return S.join(`\r
`)};function Ac(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(zd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function Gx(S){let F="";return D(S,function(V,ne){F+=ne,F+=":",F+=V,F+=`\r
`}),F}function sp(S,F,V){e:{for(ne in V){var ne=!1;break e}ne=!0}ne||(V=Gx(V),typeof S=="string"?V!=null&&encodeURIComponent(String(V)):mr(S,F,V))}function Cr(S){Ue.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Cr,Ue);var ik=/^https?$/i,ok=["POST","PUT"];t=Cr.prototype,t.Ha=function(S){this.J=S},t.ea=function(S,F,V,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);F=F?F.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ue.g(),this.v=this.o?st(this.o):st(ue),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(F,String(S),!0),this.B=!1}catch(Oe){Wx(this,Oe);return}if(S=V||"",V=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var Se in ne)V.set(Se,ne[Se]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const Oe of ne.keys())V.set(Oe,ne.get(Oe));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from(V.keys()).find(Oe=>Oe.toLowerCase()=="content-type"),Se=o.FormData&&S instanceof o.FormData,!(0<=Array.prototype.indexOf.call(ok,F,void 0))||ne||Se||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Oe,Qe]of V)this.g.setRequestHeader(Oe,Qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qx(this),this.u=!0,this.g.send(S),this.u=!1}catch(Oe){Wx(this,Oe)}};function Wx(S,F){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=F,S.m=5,zx(S),Kd(S)}function zx(S){S.A||(S.A=!0,He(S,"complete"),He(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,He(this,"complete"),He(this,"abort"),Kd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kd(this,!0)),Cr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Kx(this):this.bb())},t.bb=function(){Kx(this)};function Kx(S){if(S.h&&typeof a<"u"&&(!S.v[1]||Oa(S)!=4||S.Z()!=2)){if(S.u&&Oa(S)==4)ye(S.Ea,0,S);else if(He(S,"readystatechange"),Oa(S)==4){S.h=!1;try{const Qe=S.Z();e:switch(Qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var V;if(!(V=F)){var ne;if(ne=Qe===0){var Se=String(S.D).match(Bx)[1]||null;!Se&&o.self&&o.self.location&&(Se=o.self.location.protocol.slice(0,-1)),ne=!ik.test(Se?Se.toLowerCase():"")}V=ne}if(V)He(S,"complete"),He(S,"success");else{S.m=6;try{var Oe=2<Oa(S)?S.g.statusText:""}catch{Oe=""}S.l=Oe+" ["+S.Z()+"]",zx(S)}}finally{Kd(S)}}}}function Kd(S,F){if(S.g){qx(S);const V=S.g,ne=S.v[0]?()=>{}:null;S.g=null,S.v=null,F||He(S,"ready");try{V.onreadystatechange=ne}catch{}}}function qx(S){S.I&&(o.clearTimeout(S.I),S.I=null)}t.isActive=function(){return!!this.g};function Oa(S){return S.g?S.g.readyState:0}t.Z=function(){try{return 2<Oa(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(S){if(this.g){var F=this.g.responseText;return S&&F.indexOf(S)==0&&(F=F.substring(S.length)),mt(F)}};function Xx(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function lk(S){const F={};S=(S.g&&2<=Oa(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<S.length;ne++){if(_(S[ne]))continue;var V=I(S[ne]);const Se=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Oe=F[Se]||[];F[Se]=Oe,Oe.push(V)}w(F,function(ne){return ne.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wc(S,F,V){return V&&V.internalChannelParams&&V.internalChannelParams[S]||F}function Yx(S){this.Aa=0,this.i=[],this.j=new xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wc("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wc("baseRetryDelayMs",5e3,S),this.cb=wc("retryDelaySeedMs",1e4,S),this.Wa=wc("forwardChannelMaxRetries",2,S),this.wa=wc("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new di(S&&S.concurrentRequestLimit),this.Da=new sk,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Yx.prototype,t.la=8,t.G=1,t.connect=function(S,F,V,ne){Wr(0),this.W=S,this.H=F||{},V&&ne!==void 0&&(this.H.OSID=V,this.H.OAID=ne),this.F=this.X,this.I=ay(this,null,this.W),Xd(this)};function ap(S){if(Qx(S),S.G==3){var F=S.U++,V=Pa(S.I);if(mr(V,"SID",S.K),mr(V,"RID",F),mr(V,"TYPE","terminate"),Cc(S,V),F=new Le(S,S.j,F),F.L=2,F.v=Gd(Pa(V)),V=!1,o.navigator&&o.navigator.sendBeacon)try{V=o.navigator.sendBeacon(F.v.toString(),"")}catch{}!V&&o.Image&&(new Image().src=F.v,V=!0),V||(F.g=iy(F.j,null),F.g.ea(F.v)),F.F=Date.now(),et(F)}sy(S)}function qd(S){S.g&&(op(S),S.g.cancel(),S.g=null)}function Qx(S){qd(S),S.u&&(o.clearTimeout(S.u),S.u=null),Yd(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&o.clearTimeout(S.s),S.s=null)}function Xd(S){if(!na(S.h)&&!S.s){S.s=!0;var F=S.Ga;B||Z(),H||(B(),H=!0),L.add(F,S),S.B=0}}function ck(S,F){return il(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=F.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=_r(f(S.Ga,S,F),ny(S,S.B)),S.B++,!0)}t.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const Se=new Le(this,this.j,S);let Oe=this.o;if(this.S&&(Oe?(Oe=E(Oe),x(Oe,this.S)):Oe=this.S),this.m!==null||this.O||(Se.H=Oe,Oe=null),this.P)e:{for(var F=0,V=0;V<this.i.length;V++){t:{var ne=this.i[V];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(F+=ne,4096<F){F=V;break e}if(F===4096||V===this.i.length-1){F=V+1;break e}}F=1e3}else F=1e3;F=Zx(this,Se,F),V=Pa(this.I),mr(V,"RID",S),mr(V,"CVER",22),this.D&&mr(V,"X-HTTP-Session-Id",this.D),Cc(this,V),Oe&&(this.O?F="headers="+encodeURIComponent(String(Gx(Oe)))+"&"+F:this.m&&sp(V,this.m,Oe)),np(this.h,Se),this.Ua&&mr(V,"TYPE","init"),this.P?(mr(V,"$req",F),mr(V,"SID","null"),Se.T=!0,Ke(Se,V,null)):Ke(Se,V,F),this.G=2}}else this.G==3&&(S?Jx(this,S):this.i.length==0||na(this.h)||Jx(this))};function Jx(S,F){var V;F?V=F.l:V=S.U++;const ne=Pa(S.I);mr(ne,"SID",S.K),mr(ne,"RID",V),mr(ne,"AID",S.T),Cc(S,ne),S.m&&S.o&&sp(ne,S.m,S.o),V=new Le(S,S.j,V,S.B+1),S.m===null&&(V.H=S.o),F&&(S.i=F.D.concat(S.i)),F=Zx(S,V,1e3),V.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),np(S.h,V),Ke(V,ne,F)}function Cc(S,F){S.H&&D(S.H,function(V,ne){mr(F,ne,V)}),S.l&&Lx({},function(V,ne){mr(F,ne,V)})}function Zx(S,F,V){V=Math.min(S.i.length,V);var ne=S.l?f(S.l.Na,S.l,S):null;e:{var Se=S.i;let Oe=-1;for(;;){const Qe=["count="+V];Oe==-1?0<V?(Oe=Se[0].g,Qe.push("ofs="+Oe)):Oe=0:Qe.push("ofs="+Oe);let or=!0;for(let on=0;on<V;on++){let Xt=Se[on].g;const yn=Se[on].map;if(Xt-=Oe,0>Xt)Oe=Math.max(0,Se[on].g-100),or=!1;else try{ak(yn,Qe,"req"+Xt+"_")}catch{ne&&ne(yn)}}if(or){ne=Qe.join("&");break e}}}return S=S.i.splice(0,V),F.D=S,ne}function ey(S){if(!S.g&&!S.u){S.Y=1;var F=S.Fa;B||Z(),H||(B(),H=!0),L.add(F,S),S.v=0}}function ip(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=_r(f(S.Fa,S),ny(S,S.v)),S.v++,!0)}t.Fa=function(){if(this.u=null,ty(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=_r(f(this.ab,this),S)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wr(10),qd(this),ty(this))};function op(S){S.A!=null&&(o.clearTimeout(S.A),S.A=null)}function ty(S){S.g=new Le(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var F=Pa(S.qa);mr(F,"RID","rpc"),mr(F,"SID",S.K),mr(F,"AID",S.T),mr(F,"CI",S.F?"0":"1"),!S.F&&S.ja&&mr(F,"TO",S.ja),mr(F,"TYPE","xmlhttp"),Cc(S,F),S.m&&S.o&&sp(F,S.m,S.o),S.L&&(S.g.I=S.L);var V=S.g;S=S.ia,V.L=1,V.v=Gd(Pa(F)),V.m=null,V.P=!0,Ye(V,S)}t.Za=function(){this.C!=null&&(this.C=null,qd(this),ip(this),Wr(19))};function Yd(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function ry(S,F){var V=null;if(S.g==F){Yd(S),op(S),S.g=null;var ne=2}else if(cs(S.h,F))V=F.D,Ox(S.h,F),ne=1;else return;if(S.G!=0){if(F.o)if(ne==1){V=F.m?F.m.length:0,F=Date.now()-F.F;var Se=S.B;ne=ts(),He(ne,new io(ne,V)),Xd(S)}else ey(S);else if(Se=F.s,Se==3||Se==0&&0<F.X||!(ne==1&&ck(S,F)||ne==2&&ip(S)))switch(V&&0<V.length&&(F=S.h,F.i=F.i.concat(V)),Se){case 1:co(S,5);break;case 4:co(S,10);break;case 3:co(S,6);break;default:co(S,2)}}}function ny(S,F){let V=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(V*=2),V*F}function co(S,F){if(S.j.info("Error code "+F),F==2){var V=f(S.fb,S),ne=S.Xa;const Se=!ne;ne=new lo(ne||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Hd(ne,"https"),Gd(ne),Se?rk(ne.toString(),V):nk(ne.toString(),V)}else Wr(2);S.G=0,S.l&&S.l.sa(F),sy(S),Qx(S)}t.fb=function(S){S?(this.j.info("Successfully pinged google.com"),Wr(2)):(this.j.info("Failed to ping google.com"),Wr(1))};function sy(S){if(S.G=0,S.ka=[],S.l){const F=Nx(S.h);(F.length!=0||S.i.length!=0)&&(g(S.ka,F),g(S.ka,S.i),S.h.i.length=0,m(S.i),S.i.length=0),S.l.ra()}}function ay(S,F,V){var ne=V instanceof lo?Pa(V):new lo(V);if(ne.g!="")F&&(ne.g=F+"."+ne.g),jd(ne,ne.s);else{var Se=o.location;ne=Se.protocol,F=F?F+"."+Se.hostname:Se.hostname,Se=+Se.port;var Oe=new lo(null);ne&&Hd(Oe,ne),F&&(Oe.g=F),Se&&jd(Oe,Se),V&&(Oe.l=V),ne=Oe}return V=S.D,F=S.ya,V&&F&&mr(ne,V,F),mr(ne,"VER",S.la),Cc(S,ne),ne}function iy(S,F,V){if(F&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=S.Ca&&!S.pa?new Cr(new Wd({eb:V})):new Cr(S.pa),F.Ha(S.J),F}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function oy(){}t=oy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qd(){}Qd.prototype.g=function(S,F){return new us(S,F)};function us(S,F){Ue.call(this),this.g=new Yx(F),this.l=S,this.h=F&&F.messageUrlParams||null,S=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(S?S["X-WebChannel-Content-Type"]=F.messageContentType:S={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(S?S["X-WebChannel-Client-Profile"]=F.va:S={"X-WebChannel-Client-Profile":F.va}),this.g.S=S,(S=F&&F.Sb)&&!_(S)&&(this.g.m=S),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!_(F)&&(this.g.D=F,S=this.h,S!==null&&F in S&&(S=this.h,F in S&&delete S[F])),this.j=new ll(this)}v(us,Ue),us.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},us.prototype.close=function(){ap(this.g)},us.prototype.o=function(S){var F=this.g;if(typeof S=="string"){var V={};V.__data__=S,S=V}else this.u&&(V={},V.__data__=ht(S),S=V);F.i.push(new oo(F.Ya++,S)),F.G==3&&Xd(F)},us.prototype.N=function(){this.g.l=null,delete this.j,ap(this.g),delete this.g,us.aa.N.call(this)};function ly(S){Ft.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var F=S.__sm__;if(F){e:{for(const V in F){S=V;break e}S=void 0}(this.i=S)&&(S=this.i,F=F!==null&&S in F?F[S]:void 0),this.data=F}else this.data=S}v(ly,Ft);function cy(){pr.call(this),this.status=1}v(cy,pr);function ll(S){this.g=S}v(ll,oy),ll.prototype.ua=function(){He(this.g,"a")},ll.prototype.ta=function(S){He(this.g,new ly(S))},ll.prototype.sa=function(S){He(this.g,new cy)},ll.prototype.ra=function(){He(this.g,"b")},Qd.prototype.createWebChannel=Qd.prototype.g,us.prototype.send=us.prototype.o,us.prototype.open=us.prototype.m,us.prototype.close=us.prototype.close,WA=function(){return new Qd},GA=function(){return ts()},jA=$n,Tv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ae.NO_ERROR=0,ae.TIMEOUT=8,ae.HTTP_ERROR=6,Gf=ae,ce.COMPLETE="complete",HA=ce,ut.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",Ue.prototype.listen=Ue.prototype.K,Wc=ut,Cr.prototype.listenOnce=Cr.prototype.L,Cr.prototype.getLastError=Cr.prototype.Ka,Cr.prototype.getLastErrorCode=Cr.prototype.Ba,Cr.prototype.getStatus=Cr.prototype.Z,Cr.prototype.getResponseJson=Cr.prototype.Oa,Cr.prototype.getResponseText=Cr.prototype.oa,Cr.prototype.send=Cr.prototype.ea,Cr.prototype.setWithCredentials=Cr.prototype.Ha,$A=Cr}).apply(typeof df<"u"?df:typeof self<"u"?self:typeof window<"u"?window:{});const wE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new Vg("@firebase/firestore");function Rc(){return Oo.logLevel}function ot(t,...e){if(Oo.logLevel<=$t.DEBUG){const r=e.map(Jg);Oo.debug(`Firestore (${hc}): ${t}`,...r)}}function ni(t,...e){if(Oo.logLevel<=$t.ERROR){const r=e.map(Jg);Oo.error(`Firestore (${hc}): ${t}`,...r)}}function Yl(t,...e){if(Oo.logLevel<=$t.WARN){const r=e.map(Jg);Oo.warn(`Firestore (${hc}): ${t}`,...r)}}function Jg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t="Unexpected state"){const e=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: `+t;throw ni(e),new Error(e)}function rr(t,e){t||wt()}function Rt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends ra{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class S6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(An.UNAUTHENTICATED))}shutdown(){}}class T6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class A6{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){rr(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new Wa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wa,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wa)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(rr(typeof n.accessToken=="string"),new zA(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rr(e===null||typeof e=="string"),new An(e)}}class w6{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=An.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class C6{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new w6(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class k6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){rr(this.o===void 0);const n=i=>{i.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,ot("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(rr(typeof r.token=="string"),this.R=r.token,new I6(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=D6(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function Yt(t,e){return t<e?-1:t>e?1:0}function Ql(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ze($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ze($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Ze($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Qr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new Qr(0,0))}static max(){return new kt(new Qr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,r,n){r===void 0?r=0:r>e.length&&wt(),n===void 0?n=e.length-r:n>e.length-r&&wt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Gu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Gu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class dr extends Gu{construct(e,r,n){return new dr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ze($e.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new dr(r)}static emptyPath(){return new dr([])}}const R6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Gu{construct(e,r,n){return new fn(e,r,n)}static isValidIdentifier(e){return R6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new fn(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Ze($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Ze($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ze($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new Ze($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(r)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.path=e}static fromPath(e){return new dt(dr.fromString(e))}static fromName(e){return new dt(dr.fromString(e).popFirst(5))}static empty(){return new dt(dr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return dr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new dr(e.slice()))}}function F6(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=kt.fromTimestamp(n===1e9?new Qr(r+1,0):new Qr(r,n));return new Xi(s,dt.empty(),e)}function P6(t){return new Xi(t.readTime,t.key,-1)}class Xi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Xi(kt.min(),dt.empty(),-1)}static max(){return new Xi(kt.max(),dt.empty(),-1)}}function O6(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=dt.comparator(t.documentKey,e.documentKey),r!==0?r:Yt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(t){if(t.code!==$e.FAILED_PRECONDITION||t.message!==N6)throw t;ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ze((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ze?r:ze.resolve(r)}catch(r){return ze.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ze.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ze.reject(r)}static resolve(e){return new ze((r,n)=>{r(e)})}static reject(e){return new ze((r,n)=>{n(e)})}static waitFor(e){return new ze((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=ze.resolve(!1);for(const n of e)r=r.next(s=>s?ze.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new ze((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new ze((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function B6(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Td(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zg.oe=-1;function wh(t){return t==null}function C0(t){return t===0&&1/t==-1/0}function M6(t){return typeof t=="number"&&Number.isInteger(t)&&!C0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function zo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function qA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,r){this.comparator=e,this.root=r||cn.EMPTY}insert(e,r){return new wr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??cn.RED,this.left=s??cn.EMPTY,this.right=i??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new cn(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return cn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new cn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.comparator=e,this.data=new wr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new pn(this.comparator);return r.data=e,r}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new vs([])}unionWith(e){let r=new pn(fn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new vs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new XA("Invalid base64 string: "+i):i}}(e);return new gn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new gn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const U6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(t){if(rr(!!t),typeof t=="string"){let e=0;const r=U6.exec(t);if(rr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Br(t.seconds),nanos:Br(t.nanos)}}function Br(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function No(t){return typeof t=="string"?gn.fromBase64String(t):gn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function e1(t){const e=t.mapValue.fields.__previous_value__;return Ch(e)?e1(e):e}function Wu(t){const e=Yi(t.mapValue.fields.__local_write_time__.timestampValue);return new Qr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class zu{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new zu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf={mapValue:{}};function Lo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ch(t)?4:H6(t)?9007199254740991:$6(t)?10:11:wt()}function ba(t,e){if(t===e)return!0;const r=Lo(t);if(r!==Lo(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Yi(s.timestampValue),o=Yi(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return No(s.bytesValue).isEqual(No(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Br(s.geoPointValue.latitude)===Br(i.geoPointValue.latitude)&&Br(s.geoPointValue.longitude)===Br(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Br(s.integerValue)===Br(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Br(s.doubleValue),o=Br(i.doubleValue);return a===o?C0(a)===C0(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Ql(t.arrayValue.values||[],e.arrayValue.values||[],ba);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(CE(a)!==CE(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!ba(a[l],o[l])))return!1;return!0}(t,e);default:return wt()}}function Ku(t,e){return(t.values||[]).find(r=>ba(r,e))!==void 0}function Jl(t,e){if(t===e)return 0;const r=Lo(t),n=Lo(e);if(r!==n)return Yt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Yt(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Br(i.integerValue||i.doubleValue),l=Br(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return kE(t.timestampValue,e.timestampValue);case 4:return kE(Wu(t),Wu(e));case 5:return Yt(t.stringValue,e.stringValue);case 6:return function(i,a){const o=No(i),l=No(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=Yt(o[c],l[c]);if(u!==0)return u}return Yt(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=Yt(Br(i.latitude),Br(a.latitude));return o!==0?o:Yt(Br(i.longitude),Br(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return DE(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,u;const d=i.fields||{},f=a.fields||{},h=(o=d.value)===null||o===void 0?void 0:o.arrayValue,v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=Yt(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return m!==0?m:DE(h,v)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===hf.mapValue&&a===hf.mapValue)return 0;if(i===hf.mapValue)return 1;if(a===hf.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=Yt(l[d],u[d]);if(f!==0)return f;const h=Jl(o[l[d]],c[u[d]]);if(h!==0)return h}return Yt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw wt()}}function kE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Yt(t,e);const r=Yi(t),n=Yi(e),s=Yt(r.seconds,n.seconds);return s!==0?s:Yt(r.nanos,n.nanos)}function DE(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Jl(r[s],n[s]);if(i)return i}return Yt(r.length,n.length)}function Zl(t){return Av(t)}function Av(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Yi(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return No(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return dt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Av(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Av(r.fields[a])}`;return s+"}"}(t.mapValue):wt()}function I0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wv(t){return!!t&&"integerValue"in t}function t1(t){return!!t&&"arrayValue"in t}function RE(t){return!!t&&"nullValue"in t}function FE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wf(t){return!!t&&"mapValue"in t}function $6(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function hu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zo(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=hu(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=hu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function H6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.value=e}static empty(){return new ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Wf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(r)}setAll(e){let r=fn.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=hu(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());Wf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ba(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Wf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){zo(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new ls(hu(this.value))}}function YA(t){const e=[];return zo(t.fields,(r,n)=>{const s=new fn([r]);if(Wf(n)){const i=YA(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new vs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Dn(e,0,kt.min(),kt.min(),kt.min(),ls.empty(),0)}static newFoundDocument(e,r,n,s){return new Dn(e,1,r,kt.min(),n,s,0)}static newNoDocument(e,r){return new Dn(e,2,r,kt.min(),kt.min(),ls.empty(),0)}static newUnknownDocument(e,r){return new Dn(e,3,r,kt.min(),kt.min(),ls.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,r){this.position=e,this.inclusive=r}}function PE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=dt.comparator(dt.fromName(a.referenceValue),r.key):n=Jl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function OE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ba(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,r="asc"){this.field=e,this.dir=r}}function j6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{}class Gr extends QA{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new W6(e,r,n):r==="array-contains"?new q6(e,n):r==="in"?new X6(e,n):r==="not-in"?new Y6(e,n):r==="array-contains-any"?new Q6(e,n):new Gr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new z6(e,n):new K6(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Jl(r,this.value)):r!==null&&Lo(this.value)===Lo(r)&&this.matchesComparison(Jl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ea extends QA{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ea(e,r)}matches(e){return JA(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function JA(t){return t.op==="and"}function ZA(t){return G6(t)&&JA(t)}function G6(t){for(const e of t.filters)if(e instanceof ea)return!1;return!0}function Cv(t){if(t instanceof Gr)return t.field.canonicalString()+t.op.toString()+Zl(t.value);if(ZA(t))return t.filters.map(e=>Cv(e)).join(",");{const e=t.filters.map(r=>Cv(r)).join(",");return`${t.op}(${e})`}}function ew(t,e){return t instanceof Gr?function(n,s){return s instanceof Gr&&n.op===s.op&&n.field.isEqual(s.field)&&ba(n.value,s.value)}(t,e):t instanceof ea?function(n,s){return s instanceof ea&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&ew(a,s.filters[o]),!0):!1}(t,e):void wt()}function tw(t){return t instanceof Gr?function(r){return`${r.field.canonicalString()} ${r.op} ${Zl(r.value)}`}(t):t instanceof ea?function(r){return r.op.toString()+" {"+r.getFilters().map(tw).join(" ,")+"}"}(t):"Filter"}class W6 extends Gr{constructor(e,r,n){super(e,r,n),this.key=dt.fromName(n.referenceValue)}matches(e){const r=dt.comparator(e.key,this.key);return this.matchesComparison(r)}}class z6 extends Gr{constructor(e,r){super(e,"in",r),this.keys=rw("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class K6 extends Gr{constructor(e,r){super(e,"not-in",r),this.keys=rw("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function rw(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>dt.fromName(n.referenceValue))}class q6 extends Gr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return t1(r)&&Ku(r.arrayValue,this.value)}}class X6 extends Gr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ku(this.value.arrayValue,r)}}class Y6 extends Gr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Ku(this.value.arrayValue,r)}}class Q6 extends Gr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!t1(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ku(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function NE(t,e=null,r=[],n=[],s=null,i=null,a=null){return new J6(t,e,r,n,s,i,a)}function r1(t){const e=Rt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Cv(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),wh(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Zl(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Zl(n)).join(",")),e.ue=r}return e.ue}function n1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!j6(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!ew(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!OE(t.startAt,e.startAt)&&OE(t.endAt,e.endAt)}function Iv(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Z6(t,e,r,n,s,i,a,o){return new Ko(t,e,r,n,s,i,a,o)}function Ih(t){return new Ko(t)}function LE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function s1(t){return t.collectionGroup!==null}function Ul(t){const e=Rt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new pn(fn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new qu(i,n))}),r.has(fn.keyField().canonicalString())||e.ce.push(new qu(fn.keyField(),n))}return e.ce}function va(t){const e=Rt(t);return e.le||(e.le=eO(e,Ul(t))),e.le}function eO(t,e){if(t.limitType==="F")return NE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new qu(s.field,i)});const r=t.endAt?new ec(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new ec(t.startAt.position,t.startAt.inclusive):null;return NE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function kv(t,e){const r=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function k0(t,e,r){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function kh(t,e){return n1(va(t),va(e))&&t.limitType===e.limitType}function nw(t){return`${r1(va(t))}|lt:${t.limitType}`}function El(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>tw(s)).join(", ")}]`),wh(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Zl(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Zl(s)).join(",")),`Target(${n})`}(va(t))}; limitType=${t.limitType})`}function Dh(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):dt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Ul(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=PE(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,Ul(n),s)||n.endAt&&!function(a,o,l){const c=PE(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,Ul(n),s))}(t,e)}function tO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sw(t){return(e,r)=>{let n=!1;for(const s of Ul(t)){const i=rO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function rO(t,e,r){const n=t.field.isKeyField()?dt.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?Jl(l,c):wt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zo(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return qA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new wr(dt.comparator);function si(){return nO}const aw=new wr(dt.comparator);function zc(...t){let e=aw;for(const r of t)e=e.insert(r.key,r);return e}function iw(t){let e=aw;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Eo(){return pu()}function ow(){return pu()}function pu(){return new pc(t=>t.toString(),(t,e)=>t.isEqual(e))}const sO=new wr(dt.comparator),aO=new pn(dt.comparator);function Ut(...t){let e=aO;for(const r of t)e=e.add(r);return e}const iO=new pn(Yt);function oO(){return iO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:C0(e)?"-0":e}}function lw(t){return{integerValue:""+t}}function lO(t,e){return M6(e)?lw(e):a1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this._=void 0}}function cO(t,e,r){return t instanceof Xu?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ch(i)&&(i=e1(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Yu?uw(t,e):t instanceof Qu?dw(t,e):function(s,i){const a=cw(s,i),o=BE(a)+BE(s.Pe);return wv(a)&&wv(s.Pe)?lw(o):a1(s.serializer,o)}(t,e)}function uO(t,e,r){return t instanceof Yu?uw(t,e):t instanceof Qu?dw(t,e):r}function cw(t,e){return t instanceof D0?function(n){return wv(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Xu extends Rh{}class Yu extends Rh{constructor(e){super(),this.elements=e}}function uw(t,e){const r=fw(e);for(const n of t.elements)r.some(s=>ba(s,n))||r.push(n);return{arrayValue:{values:r}}}class Qu extends Rh{constructor(e){super(),this.elements=e}}function dw(t,e){let r=fw(e);for(const n of t.elements)r=r.filter(s=>!ba(s,n));return{arrayValue:{values:r}}}class D0 extends Rh{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function BE(t){return Br(t.integerValue||t.doubleValue)}function fw(t){return t1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,r){this.field=e,this.transform=r}}function fO(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Yu&&s instanceof Yu||n instanceof Qu&&s instanceof Qu?Ql(n.elements,s.elements,ba):n instanceof D0&&s instanceof D0?ba(n.Pe,s.Pe):n instanceof Xu&&s instanceof Xu}(t.transform,e.transform)}class hO{constructor(e,r){this.version=e,this.transformResults=r}}class Qn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fh{}function hw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ph(t.key,Qn.none()):new Ad(t.key,t.data,Qn.none());{const r=t.data,n=ls.empty();let s=new pn(fn.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new to(t.key,n,new vs(s.toArray()),Qn.none())}}function pO(t,e,r){t instanceof Ad?function(s,i,a){const o=s.value.clone(),l=UE(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof to?function(s,i,a){if(!zf(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=UE(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(pw(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function mu(t,e,r,n){return t instanceof Ad?function(i,a,o,l){if(!zf(i.precondition,a))return o;const c=i.value.clone(),u=VE(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof to?function(i,a,o,l){if(!zf(i.precondition,a))return o;const c=VE(i.fieldTransforms,l,a),u=a.data;return u.setAll(pw(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,a,o){return zf(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function mO(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=cw(n.transform,s||null);i!=null&&(r===null&&(r=ls.empty()),r.set(n.field,i))}return r||null}function ME(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ql(n,s,(i,a)=>fO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ad extends Fh{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class to extends Fh{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function pw(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function UE(t,e,r){const n=new Map;rr(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,uO(a,o,r[s]))}return n}function VE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,cO(i,a,e))}return n}class Ph extends Fh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vO extends Fh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pO(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=mu(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=mu(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=ow();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=hw(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(kt.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ut())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(r,n)=>ME(r,n))&&Ql(this.baseMutations,e.baseMutations,(r,n)=>ME(r,n))}}class i1{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){rr(e.mutations.length===n.length);let s=function(){return sO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new i1(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vr,Wt;function EO(t){switch(t){default:return wt();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function mw(t){if(t===void 0)return ni("GRPC error has no .code"),$e.UNKNOWN;switch(t){case Vr.OK:return $e.OK;case Vr.CANCELLED:return $e.CANCELLED;case Vr.UNKNOWN:return $e.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return $e.INTERNAL;case Vr.UNAVAILABLE:return $e.UNAVAILABLE;case Vr.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Vr.NOT_FOUND:return $e.NOT_FOUND;case Vr.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Vr.ABORTED:return $e.ABORTED;case Vr.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Vr.DATA_LOSS:return $e.DATA_LOSS;default:return wt()}}(Wt=Vr||(Vr={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new wo([4294967295,4294967295],0);function $E(t){const e=bO().encode(t),r=new VA;return r.update(e),new Uint8Array(r.digest())}function HE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wo([r,n],0),new wo([s,i],0)]}class o1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Kc(`Invalid padding: ${r}`);if(n<0)throw new Kc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Kc(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Kc(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=wo.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(wo.fromNumber(n)));return s.compare(_O)===1&&(s=new wo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=$E(e),[n,s]=HE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new o1(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=$E(e),[n,s]=HE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,wd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Oh(kt.min(),s,new wr(Yt),si(),Ut())}}class wd{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new wd(n,r,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class vw{constructor(e,r){this.targetId=e,this.me=r}}class gw{constructor(e,r,n=gn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class jE{constructor(){this.fe=0,this.ge=WE(),this.pe=gn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ut(),r=Ut(),n=Ut();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:wt()}}),new wd(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=WE()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class SO{constructor(e){this.Le=e,this.Be=new Map,this.ke=si(),this.qe=GE(),this.Qe=new wr(Yt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:wt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Iv(i))if(n===0){const a=new dt(i.path);this.Ue(r,a,Dn.newNoDocument(a,kt.min()))}else rr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=No(n).toUint8Array()}catch(l){if(l instanceof XA)return Yl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new o1(a,s,i)}catch(l){return Yl(l instanceof Kc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Iv(o.target)){const l=new dt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Dn.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=Ut();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Oh(e,r,this.Qe,this.ke,n);return this.ke=si(),this.qe=GE(),this.Qe=new wr(Yt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new jE,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new pn(Yt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ot("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jE),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function GE(){return new wr(dt.comparator)}function WE(){return new wr(dt.comparator)}const TO={asc:"ASCENDING",desc:"DESCENDING"},AO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wO={and:"AND",or:"OR"};class CO{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Dv(t,e){return t.useProto3Json||wh(e)?e:{value:e}}function R0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IO(t,e){return R0(t,e.toTimestamp())}function ga(t){return rr(!!t),kt.fromTimestamp(function(r){const n=Yi(r);return new Qr(n.seconds,n.nanos)}(t))}function l1(t,e){return Rv(t,e).canonicalString()}function Rv(t,e){const r=function(s){return new dr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function yw(t){const e=dr.fromString(t);return rr(Tw(e)),e}function Fv(t,e){return l1(t.databaseId,e.path)}function kp(t,e){const r=yw(e);if(r.get(1)!==t.databaseId.projectId)throw new Ze($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ze($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new dt(bw(r))}function Ew(t,e){return l1(t.databaseId,e)}function kO(t){const e=yw(t);return e.length===4?dr.emptyPath():bw(e)}function Pv(t){return new dr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bw(t){return rr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zE(t,e,r){return{name:Fv(t,e),fields:r.value.mapValue.fields}}function DO(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:wt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(rr(u===void 0||typeof u=="string"),gn.fromBase64String(u||"")):(rr(u===void 0||u instanceof Buffer||u instanceof Uint8Array),gn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?$e.UNKNOWN:mw(c.code);return new Ze(u,c.message||"")}(a);r=new gw(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=kp(t,n.document.name),i=ga(n.document.updateTime),a=n.document.createTime?ga(n.document.createTime):kt.min(),o=new ls({mapValue:{fields:n.document.fields}}),l=Dn.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new Kf(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=kp(t,n.document),i=n.readTime?ga(n.readTime):kt.min(),a=Dn.newNoDocument(s,i),o=n.removedTargetIds||[];r=new Kf([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=kp(t,n.document),i=n.removedTargetIds||[];r=new Kf([],i,s,null)}else{if(!("filter"in e))return wt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new yO(s,i),o=n.targetId;r=new vw(o,a)}}return r}function RO(t,e){let r;if(e instanceof Ad)r={update:zE(t,e.key,e.value)};else if(e instanceof Ph)r={delete:Fv(t,e.key)};else if(e instanceof to)r={update:zE(t,e.key,e.data),updateMask:VO(e.fieldMask)};else{if(!(e instanceof vO))return wt();r={verify:Fv(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof Xu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Yu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Qu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof D0)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw wt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:IO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:wt()}(t,e.precondition)),r}function FO(t,e){return t&&t.length>0?(rr(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?ga(s.updateTime):ga(i);return a.isEqual(kt.min())&&(a=ga(i)),new hO(a,s.transformResults||[])}(r,e))):[]}function PO(t,e){return{documents:[Ew(t,e.path)]}}function OO(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Ew(t,s);const i=function(c){if(c.length!==0)return Sw(ea.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:bl(f.field),direction:BO(f.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=Dv(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function NO(t){let e=kO(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){rr(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(d){const f=_w(d);return f instanceof ea&&ZA(f)?f.getFilters():[f]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(f=>function(v){return new qu(_l(v.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(r.orderBy));let o=null;r.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,wh(f)?null:f}(r.limit));let l=null;r.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new ec(h,f)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new ec(h,f)}(r.endAt)),Z6(e,s,a,i,o,"F",l,c)}function LO(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function _w(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=_l(r.unaryFilter.field);return Gr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=_l(r.unaryFilter.field);return Gr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_l(r.unaryFilter.field);return Gr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=_l(r.unaryFilter.field);return Gr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(t):t.fieldFilter!==void 0?function(r){return Gr.create(_l(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ea.create(r.compositeFilter.filters.map(n=>_w(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return wt()}}(r.compositeFilter.op))}(t):wt()}function BO(t){return TO[t]}function MO(t){return AO[t]}function UO(t){return wO[t]}function bl(t){return{fieldPath:t.canonicalString()}}function _l(t){return fn.fromServerFormat(t.fieldPath)}function Sw(t){return t instanceof Gr?function(r){if(r.op==="=="){if(FE(r.value))return{unaryFilter:{field:bl(r.field),op:"IS_NAN"}};if(RE(r.value))return{unaryFilter:{field:bl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(FE(r.value))return{unaryFilter:{field:bl(r.field),op:"IS_NOT_NAN"}};if(RE(r.value))return{unaryFilter:{field:bl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bl(r.field),op:MO(r.op),value:r.value}}}(t):t instanceof ea?function(r){const n=r.getFilters().map(s=>Sw(s));return n.length===1?n[0]:{compositeFilter:{op:UO(r.op),filters:n}}}(t):wt()}function VO(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Tw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,r,n,s,i=kt.min(),a=kt.min(),o=gn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.ct=e}}function HO(t){const e=NO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?k0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(){this.un=new GO}addToCollectionParentIndex(e,r){return this.un.add(r),ze.resolve()}getCollectionParents(e,r){return ze.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ze.resolve()}deleteFieldIndex(e,r){return ze.resolve()}deleteAllFieldIndexes(e){return ze.resolve()}createTargetIndexes(e,r){return ze.resolve()}getDocumentsMatchingTarget(e,r){return ze.resolve(null)}getIndexType(e,r){return ze.resolve(0)}getFieldIndexes(e,r){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,r){return ze.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,r){return ze.resolve(Xi.min())}updateCollectionGroup(e,r,n){return ze.resolve()}updateIndexEntries(e,r){return ze.resolve()}}class GO{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new pn(dr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new pn(dr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new tc(0)}static kn(){return new tc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(){this.changes=new pc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ze.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&mu(n.mutation,s,vs.empty(),Qr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ut()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ut()){const s=Eo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=zc();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Eo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ut()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=si();const a=pu(),o=function(){return pu()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof to)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),mu(u.mutation,c,u.mutation.getFieldMask(),Qr.now())):a.set(c.key,vs.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var d;return o.set(c,new zO(u,(d=a.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,r){const n=pu();let s=new wr((a,o)=>a-o),i=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||vs.empty();u=o.applyToLocalView(c,u),n.set(l,u);const d=(s.get(o.batchId)||Ut()).add(l);s=s.insert(o.batchId,d)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,d=ow();u.forEach(f=>{if(!i.has(f)){const h=hw(r.get(f),n.get(f));h!==null&&d.set(f,h),i=i.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return ze.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return dt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):s1(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):ze.resolve(Eo());let o=-1,l=i;return a.next(c=>ze.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),i.get(u)?ze.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ut())).next(u=>({batchId:o,changes:iw(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new dt(r)).next(n=>{let s=zc();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=zc();return this.indexManager.getCollectionParents(e,i).next(o=>ze.forEach(o,l=>{const c=function(d,f){return new Ko(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Dn.newInvalidDocument(u)))});let o=zc();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&mu(u.mutation,c,vs.empty(),Qr.now()),Dh(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ze.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ga(s.createTime)}}(r)),ze.resolve()}getNamedQuery(e,r){return ze.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:HO(s.bundledQuery),readTime:ga(s.readTime)}}(r)),ze.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.overlays=new wr(dt.comparator),this.Ir=new Map}getOverlay(e,r){return ze.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Eo();return ze.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),ze.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),ze.resolve()}getOverlaysForCollection(e,r,n){const s=Eo(),i=r.length+1,a=new dt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return ze.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new wr((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=Eo(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Eo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return ze.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new xO(r,n));let i=this.Ir.get(r);i===void 0&&(i=Ut(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return ze.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ze.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.Tr=new pn(tn.Er),this.dr=new pn(tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new tn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new tn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new dt(new dr([])),n=new tn(r,e),s=new tn(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new dt(new dr([])),n=new tn(r,e),s=new tn(r,e+1);let i=Ut();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new tn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class tn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return dt.comparator(e.key,r.key)||Yt(e.wr,r.wr)}static Ar(e,r){return Yt(e.wr,r.wr)||dt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new pn(tn.Er)}checkEmpty(e){return ze.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new gO(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new tn(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ze.resolve(a)}lookupMutationBatch(e,r){return ze.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return ze.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new tn(r,0),s=new tn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),ze.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new pn(Yt);return r.forEach(s=>{const i=new tn(s,0),a=new tn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),ze.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;dt.isDocumentKey(i)||(i=i.child(""));const a=new tn(new dt(i),0);let o=new pn(Yt);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),ze.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){rr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ze.forEach(r.mutations,s=>{const i=new tn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new tn(r,0),s=this.br.firstAfterOrEqual(n);return ze.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ze.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.Mr=e,this.docs=function(){return new wr(dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ze.resolve(n?n.document.mutableCopy():Dn.newInvalidDocument(r))}getEntries(e,r){let n=si();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Dn.newInvalidDocument(s))}),ze.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=si();const a=r.path,o=new dt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||O6(P6(u),n)<=0||(s.has(u.key)||Dh(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return ze.resolve(i)}getAllFromCollectionGroup(e,r,n,s){wt()}Or(e,r){return ze.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new ZO(this)}getSize(e){return ze.resolve(this.size)}}class ZO extends WO{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),ze.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e){this.persistence=e,this.Nr=new pc(r=>r1(r),n1),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new c1,this.targetCount=0,this.kr=tc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ze.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new tc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ze.resolve()}updateTargetData(e,r){return this.Kn(r),ze.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),ze.waitFor(i).next(()=>s)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return ze.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),ze.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),ze.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ze.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return ze.resolve(n)}containsKey(e,r){return ze.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Zg(0),this.Kr=!1,this.Kr=!0,this.$r=new YO,this.referenceDelegate=e(this),this.Ur=new e5(this),this.indexManager=new jO,this.remoteDocumentCache=function(s){return new JO(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new $O(r),this.Gr=new qO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new XO,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new QO(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ot("MemoryPersistence","Starting transaction:",e);const s=new r5(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return ze.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class r5 extends L6{constructor(e){super(),this.currentSequenceNumber=e}}class u1{constructor(e){this.persistence=e,this.Jr=new c1,this.Yr=null}static Zr(e){return new u1(e)}get Xr(){if(this.Yr)return this.Yr;throw wt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ze.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ze.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ze.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.Xr,n=>{const s=dt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,kt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return ze.or([()=>ze.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Ut(),s=Ut();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new d1(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lF()?8:B6(Mn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new n5;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Rc()<=$t.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",El(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ze.resolve()):(Rc()<=$t.DEBUG&&ot("QueryEngine","Query:",El(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Rc()<=$t.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",El(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,va(r))):ze.resolve())}Yi(e,r){if(LE(r))return ze.resolve(null);let n=va(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=k0(r,null,"F"),n=va(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Ut(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,k0(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return LE(r)||s.isEqual(kt.min())?ze.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?ze.resolve(null):(Rc()<=$t.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),El(r)),this.rs(e,a,r,F6(s,-1)).next(o=>o))})}ts(e,r){let n=new pn(sw(e));return r.forEach((s,i)=>{Dh(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Rc()<=$t.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",El(r)),this.Ji.getDocumentsMatchingQuery(e,r,Xi.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new wr(Yt),this._s=new pc(i=>r1(i),n1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function i5(t,e,r,n){return new a5(t,e,r,n)}async function Aw(t,e){const r=Rt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=Ut();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function o5(t,e){const r=Rt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const d=c.batch,f=d.keys();let h=ze.resolve();return f.forEach(v=>{h=h.next(()=>u.getEntry(l,v)).next(m=>{const g=c.docVersions.get(v);rr(g!==null),m.version.compareTo(g)<0&&(d.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Ut();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function ww(t){const e=Rt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function l5(t,e){const r=Rt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,d)=>{const f=s.get(d);if(!f)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,d).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,d)));let h=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?h=h.withResumeToken(gn.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,n)),s=s.insert(d,h),function(m,g,b){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,h,u)&&o.push(r.Ur.updateTargetData(i,h))});let l=si(),c=Ut();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(c5(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(kt.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(d=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return ze.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function c5(t,e,r){let n=Ut(),s=Ut();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=si();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(kt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):ot("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function u5(t,e){const r=Rt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function d5(t,e){const r=Rt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,ze.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Oi(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Ov(t,e,r){const n=Rt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Td(a))throw a;ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function KE(t,e,r){const n=Rt(t);let s=kt.min(),i=Ut();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const d=Rt(l),f=d._s.get(u);return f!==void 0?ze.resolve(d.os.get(f)):d.Ur.getTargetData(c,u)}(n,a,va(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:kt.min(),r?i:Ut())).next(o=>(f5(n,tO(e),o),{documents:o,Ts:i})))}function f5(t,e,r){let n=t.us.get(e)||kt.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class qE{constructor(){this.activeTargetIds=oO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h5{constructor(){this.so=new qE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf=null;function Dp(){return pf===null?pf=function(){return 268435456+Math.round(2147483648*Math.random())}():pf++,"0x"+pf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class g5 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=Dp(),l=this.xo(r,n.toUriEncodedString());ot("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(ot("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw Yl("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hc}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=m5[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=Dp();return new Promise((a,o)=>{const l=new $A;l.setWithCredentials(!0),l.listenOnce(HA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Gf.NO_ERROR:const u=l.getResponseJson();ot(bn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case Gf.TIMEOUT:ot(bn,`RPC '${e}' ${i} timed out`),o(new Ze($e.DEADLINE_EXCEEDED,"Request time out"));break;case Gf.HTTP_ERROR:const d=l.getStatus();if(ot(bn,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const v=function(g){const b=g.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(b)>=0?b:$e.UNKNOWN}(h.status);o(new Ze(v,h.message))}else o(new Ze($e.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Ze($e.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{ot(bn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ot(bn,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=Dp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=WA(),o=GA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");ot(bn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=a.createWebChannel(u,l);let f=!1,h=!1;const v=new v5({Io:g=>{h?ot(bn,`Not sending because RPC '${e}' stream ${s} is closed:`,g):(f||(ot(bn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),ot(bn,`RPC '${e}' stream ${s} sending:`,g),d.send(g))},To:()=>d.close()}),m=(g,b,_)=>{g.listen(b,T=>{try{_(T)}catch(C){setTimeout(()=>{throw C},0)}})};return m(d,Wc.EventType.OPEN,()=>{h||(ot(bn,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),m(d,Wc.EventType.CLOSE,()=>{h||(h=!0,ot(bn,`RPC '${e}' stream ${s} transport closed`),v.So())}),m(d,Wc.EventType.ERROR,g=>{h||(h=!0,Yl(bn,`RPC '${e}' stream ${s} transport errored:`,g),v.So(new Ze($e.UNAVAILABLE,"The operation could not be completed")))}),m(d,Wc.EventType.MESSAGE,g=>{var b;if(!h){const _=g.data[0];rr(!!_);const T=_,C=T.error||((b=T[0])===null||b===void 0?void 0:b.error);if(C){ot(bn,`RPC '${e}' stream ${s} received error:`,C);const R=C.status;let D=function(y){const x=Vr[y];if(x!==void 0)return mw(x)}(R),w=C.message;D===void 0&&(D=$e.INTERNAL,w="Unknown error status: "+R+" with message "+C.message),h=!0,v.So(new Ze(D,w)),d.close()}else ot(bn,`RPC '${e}' stream ${s} received:`,_),v.bo(_)}}),m(o,jA.STAT_EVENT,g=>{g.stat===Tv.PROXY?ot(bn,`RPC '${e}' stream ${s} detected buffering proxy`):g.stat===Tv.NOPROXY&&ot(bn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function Rp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){return new CO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ot("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Cw(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===$e.RESOURCE_EXHAUSTED?(ni(r.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new Ze($e.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x5 extends Iw{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=DO(this.serializer,e),n=function(i){if(!("targetChange"in i))return kt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?kt.min():a.readTime?ga(a.readTime):kt.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Pv(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=Iv(l)?{documents:PO(i,l)}:{query:OO(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=xw(i,a.resumeToken);const c=Dv(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(kt.min())>0){o.readTime=R0(i,a.snapshotVersion.toTimestamp());const c=Dv(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=LO(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Pv(this.serializer),r.removeTarget=e,this.a_(r)}}class y5 extends Iw{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return rr(!!e.streamToken),this.lastStreamToken=e.streamToken,rr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){rr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=FO(e.writeResults,e.commitTime),n=ga(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Pv(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>RO(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ze($e.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Rv(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ze($e.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,Rv(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ze($e.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class b5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ni(r),this.D_=!1):ot("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{qo(this)&&(ot("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Rt(l);c.L_.add(4),await Cd(c),c.q_.set("Unknown"),c.L_.delete(4),await Lh(c)}(this))})}),this.q_=new b5(n,s)}}async function Lh(t){if(qo(t))for(const e of t.B_)await e(!0)}async function Cd(t){for(const e of t.B_)await e(!1)}function kw(t,e){const r=Rt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),m1(r)?p1(r):mc(r).r_()&&h1(r,e))}function f1(t,e){const r=Rt(t),n=mc(r);r.N_.delete(e),n.r_()&&Dw(r,e),r.N_.size===0&&(n.r_()?n.o_():qo(r)&&r.q_.set("Unknown"))}function h1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}mc(t).A_(e)}function Dw(t,e){t.Q_.xe(e),mc(t).R_(e)}function p1(t){t.Q_=new SO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),mc(t).start(),t.q_.v_()}function m1(t){return qo(t)&&!mc(t).n_()&&t.N_.size>0}function qo(t){return Rt(t).L_.size===0}function Rw(t){t.Q_=void 0}async function S5(t){t.q_.set("Online")}async function T5(t){t.N_.forEach((e,r)=>{h1(t,e)})}async function A5(t,e){Rw(t),m1(t)?(t.q_.M_(e),p1(t)):t.q_.set("Unknown")}async function w5(t,e,r){if(t.q_.set("Online"),e instanceof gw&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await F0(t,n)}else if(e instanceof Kf?t.Q_.Ke(e):e instanceof vw?t.Q_.He(e):t.Q_.We(e),!r.isEqual(kt.min()))try{const n=await ww(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(gn.EMPTY_BYTE_STRING,u.snapshotVersion)),Dw(i,l);const d=new Oi(u.target,l,c,u.sequenceNumber);h1(i,d)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){ot("RemoteStore","Failed to raise snapshot:",n),await F0(t,n)}}async function F0(t,e,r){if(!Td(e))throw e;t.L_.add(1),await Cd(t),t.q_.set("Offline"),r||(r=()=>ww(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ot("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Lh(t)})}function Fw(t,e){return e().catch(r=>F0(t,r,e))}async function Bh(t){const e=Rt(t),r=Qi(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;C5(e);)try{const s=await u5(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,I5(e,s)}catch(s){await F0(e,s)}Pw(e)&&Ow(e)}function C5(t){return qo(t)&&t.O_.length<10}function I5(t,e){t.O_.push(e);const r=Qi(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Pw(t){return qo(t)&&!Qi(t).n_()&&t.O_.length>0}function Ow(t){Qi(t).start()}async function k5(t){Qi(t).p_()}async function D5(t){const e=Qi(t);for(const r of t.O_)e.m_(r.mutations)}async function R5(t,e,r){const n=t.O_.shift(),s=i1.from(n,e,r);await Fw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bh(t)}async function F5(t,e){e&&Qi(t).V_&&await async function(n,s){if(function(a){return EO(a)&&a!==$e.ABORTED}(s.code)){const i=n.O_.shift();Qi(n).s_(),await Fw(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bh(n)}}(t,e),Pw(t)&&Ow(t)}async function YE(t,e){const r=Rt(t);r.asyncQueue.verifyOperationInProgress(),ot("RemoteStore","RemoteStore received new credentials");const n=qo(r);r.L_.add(3),await Cd(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Lh(r)}async function P5(t,e){const r=Rt(t);e?(r.L_.delete(2),await Lh(r)):e||(r.L_.add(2),await Cd(r),r.q_.set("Unknown"))}function mc(t){return t.K_||(t.K_=function(r,n,s){const i=Rt(r);return i.w_(),new x5(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:S5.bind(null,t),Ro:T5.bind(null,t),mo:A5.bind(null,t),d_:w5.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),m1(t)?p1(t):t.q_.set("Unknown")):(await t.K_.stop(),Rw(t))})),t.K_}function Qi(t){return t.U_||(t.U_=function(r,n,s){const i=Rt(r);return i.w_(),new y5(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:k5.bind(null,t),mo:F5.bind(null,t),f_:D5.bind(null,t),g_:R5.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Bh(t)):(await t.U_.stop(),t.O_.length>0&&(ot("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Wa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new v1(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function g1(t,e){if(ni("AsyncQueue",`${e}: ${t}`),Td(t))return new Ze($e.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.comparator=e?(r,n)=>e(r,n)||dt.comparator(r.key,n.key):(r,n)=>dt.comparator(r.key,n.key),this.keyedMap=zc(),this.sortedSet=new wr(this.comparator)}static emptySet(e){return new Vl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Vl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Vl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.W_=new wr(dt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):wt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class rc{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new rc(e,r,Vl.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class N5{constructor(){this.queries=JE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Rt(r),i=s.queries;s.queries=JE(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new Ze($e.ABORTED,"Firestore shutting down"))}}function JE(){return new pc(t=>nw(t),kh)}async function x1(t,e){const r=Rt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new O5,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=g1(a,`Initialization of query '${El(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&E1(r)}async function y1(t,e){const r=Rt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function L5(t,e){const r=Rt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&E1(r)}function B5(t,e,r){const n=Rt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function E1(t){t.Y_.forEach(e=>{e.next()})}var Nv,ZE;(ZE=Nv||(Nv={})).ea="default",ZE.Cache="cache";class b1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new rc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.key=e}}class Lw{constructor(e){this.key=e}}class M5{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ut(),this.mutatedKeys=Ut(),this.Aa=sw(e),this.Ra=new Vl(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new QE,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const f=s.get(u),h=Dh(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;f&&h?f.data.isEqual(h.data)?v!==m&&(n.track({type:3,doc:h}),g=!0):this.ga(f,h)||(n.track({type:2,doc:h}),g=!0,(l&&this.Aa(h,l)>0||c&&this.Aa(h,c)<0)&&(o=!0)):!f&&h?(n.track({type:0,doc:h}),g=!0):f&&!h&&(n.track({type:1,doc:f}),g=!0,(l||c)&&(o=!0)),g&&(h?(a=a.add(h),i=m?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,d)=>function(h,v){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return m(h)-m(v)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new rc(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new QE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ut(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new Lw(n))}),this.da.forEach(n=>{e.has(n)||r.push(new Nw(n))}),r}ba(e){this.Ta=e.Ts,this.da=Ut();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return rc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class U5{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class V5{constructor(e){this.key=e,this.va=!1}}class $5{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new pc(o=>nw(o),kh),this.Ma=new Map,this.xa=new Set,this.Oa=new wr(dt.comparator),this.Na=new Map,this.La=new c1,this.Ba={},this.ka=new Map,this.qa=tc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function H5(t,e,r=!0){const n=Hw(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Bw(n,e,r,!0),s}async function j5(t,e){const r=Hw(t);await Bw(r,e,!0,!1)}async function Bw(t,e,r,n){const s=await d5(t.localStore,va(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await G5(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&kw(t.remoteStore,s),o}async function G5(t,e,r,n,s){t.Ka=(d,f,h)=>async function(m,g,b,_){let T=g.view.ma(b);T.ns&&(T=await KE(m.localStore,g.query,!1).then(({documents:w})=>g.view.ma(w,T)));const C=_&&_.targetChanges.get(g.targetId),R=_&&_.targetMismatches.get(g.targetId)!=null,D=g.view.applyChanges(T,m.isPrimaryClient,C,R);return t2(m,g.targetId,D.wa),D.snapshot}(t,d,f,h);const i=await KE(t.localStore,e,!0),a=new M5(e,i.Ts),o=a.ma(i.documents),l=wd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);t2(t,r,c.wa);const u=new U5(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function W5(t,e,r){const n=Rt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!kh(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Ov(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&f1(n.remoteStore,s.targetId),Lv(n,s.targetId)}).catch(Sd)):(Lv(n,s.targetId),await Ov(n.localStore,s.targetId,!0))}async function z5(t,e){const r=Rt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),f1(r.remoteStore,n.targetId))}async function K5(t,e,r){const n=eN(t);try{const s=await function(a,o){const l=Rt(a),c=Qr.now(),u=o.reduce((h,v)=>h.add(v.key),Ut());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let v=si(),m=Ut();return l.cs.getEntries(h,u).next(g=>{v=g,v.forEach((b,_)=>{_.isValidDocument()||(m=m.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,v)).next(g=>{d=g;const b=[];for(const _ of o){const T=mO(_,d.get(_.key).overlayedDocument);T!=null&&b.push(new to(_.key,T,YA(T.value.mapValue),Qn.exists(!0)))}return l.mutationQueue.addMutationBatch(h,c,b,o)}).next(g=>{f=g;const b=g.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(h,g.batchId,b)})}).then(()=>({batchId:f.batchId,changes:iw(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new wr(Yt)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await Id(n,s.changes),await Bh(n.remoteStore)}catch(s){const i=g1(s,"Failed to persist write");r.reject(i)}}async function Mw(t,e){const r=Rt(t);try{const n=await l5(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(rr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?rr(a.va):s.removedDocuments.size>0&&(rr(a.va),a.va=!1))}),await Id(r,n,e)}catch(n){await Sd(n)}}function e2(t,e,r){const n=Rt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Rt(a);l.onlineState=o;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.j_)f.Z_(o)&&(c=!0)}),c&&E1(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function q5(t,e,r){const n=Rt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new wr(dt.comparator);a=a.insert(i,Dn.newNoDocument(i,kt.min()));const o=Ut().add(i),l=new Oh(kt.min(),new Map,new wr(Yt),a,o);await Mw(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),_1(n)}else await Ov(n.localStore,e,!1).then(()=>Lv(n,e,r)).catch(Sd)}async function X5(t,e){const r=Rt(t),n=e.batch.batchId;try{const s=await o5(r.localStore,e);Vw(r,n,null),Uw(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Id(r,s)}catch(s){await Sd(s)}}async function Y5(t,e,r){const n=Rt(t);try{const s=await function(a,o){const l=Rt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(rr(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);Vw(n,e,r),Uw(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Id(n,s)}catch(s){await Sd(s)}}function Uw(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function Vw(t,e,r){const n=Rt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Lv(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||$w(t,n)})}function $w(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(f1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),_1(t))}function t2(t,e,r){for(const n of r)n instanceof Nw?(t.La.addReference(n.key,e),Q5(t,n)):n instanceof Lw?(ot("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||$w(t,n.key)):wt()}function Q5(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ot("SyncEngine","New document in limbo: "+r),t.xa.add(n),_1(t))}function _1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new dt(dr.fromString(e)),n=t.qa.next();t.Na.set(n,new V5(r)),t.Oa=t.Oa.insert(r,n),kw(t.remoteStore,new Oi(va(Ih(r.path)),n,"TargetPurposeLimboResolution",Zg.oe))}}async function Id(t,e,r){const n=Rt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=d1.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=Rt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ze.forEach(c,f=>ze.forEach(f.$i,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>ze.forEach(f.Ui,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!Td(d))throw d;ot("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.os.get(f),v=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(v);u.os=u.os.insert(f,m)}}}(n.localStore,i))}async function J5(t,e){const r=Rt(t);if(!r.currentUser.isEqual(e)){ot("SyncEngine","User change. New user:",e.toKey());const n=await Aw(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new Ze($e.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Id(r,n.hs)}}function Z5(t,e){const r=Rt(t),n=r.Na.get(e);if(n&&n.va)return Ut().add(n.key);{let s=Ut();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function Hw(t){const e=Rt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q5.bind(null,e),e.Ca.d_=L5.bind(null,e.eventManager),e.Ca.$a=B5.bind(null,e.eventManager),e}function eN(t){const e=Rt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y5.bind(null,e),e}class P0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return i5(this.persistence,new s5,e.initialUser,this.serializer)}Ga(e){return new t5(u1.Zr,this.serializer)}Wa(e){return new h5}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}P0.provider={build:()=>new P0};class Bv{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>e2(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=J5.bind(null,this.syncEngine),await P5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new N5}()}createDatastore(e){const r=Nh(e.databaseInfo.databaseId),n=function(i){return new g5(i)}(e.databaseInfo);return function(i,a,o,l){return new E5(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new _5(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>e2(this.syncEngine,r,0),function(){return XE.D()?new XE:new p5}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,u){const d=new $5(s,i,a,o,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Rt(s);ot("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Cd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Bv.provider={build:()=>new Bv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=An.UNAUTHENTICATED,this.clientId=KA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{ot("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(ot("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=g1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Fp(t,e){t.asyncQueue.verifyOperationInProgress(),ot("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await Aw(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function r2(t,e){t.asyncQueue.verifyOperationInProgress();const r=await rN(t);ot("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>YE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>YE(e.remoteStore,s)),t._onlineComponents=e}async function rN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ot("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===$e.FAILED_PRECONDITION||s.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Yl("Error using user provided cache. Falling back to memory cache: "+r),await Fp(t,new P0)}}else ot("FirestoreClient","Using default OfflineComponentProvider"),await Fp(t,new P0);return t._offlineComponents}async function jw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ot("FirestoreClient","Using user provided OnlineComponentProvider"),await r2(t,t._uninitializedComponentsProvider._online)):(ot("FirestoreClient","Using default OnlineComponentProvider"),await r2(t,new Bv))),t._onlineComponents}function nN(t){return jw(t).then(e=>e.syncEngine)}async function O0(t){const e=await jw(t),r=e.eventManager;return r.onListen=H5.bind(null,e.syncEngine),r.onUnlisten=W5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=j5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=z5.bind(null,e.syncEngine),r}function sN(t,e,r={}){const n=new Wa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new S1({next:f=>{u.Za(),a.enqueueAndForget(()=>y1(i,d));const h=f.docs.has(o);!h&&f.fromCache?c.reject(new Ze($e.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new Ze($e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new b1(Ih(o.path),u,{includeMetadataChanges:!0,_a:!0});return x1(i,d)}(await O0(t),t.asyncQueue,e,r,n)),n.promise}function aN(t,e,r={}){const n=new Wa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new S1({next:f=>{u.Za(),a.enqueueAndForget(()=>y1(i,d)),f.fromCache&&l.source==="server"?c.reject(new Ze($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new b1(o,u,{includeMetadataChanges:!0,_a:!0});return x1(i,d)}(await O0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t,e,r){if(!r)throw new Ze($e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iN(t,e,r,n){if(e===!0&&n===!0)throw new Ze($e.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function s2(t){if(!dt.isDocumentKey(t))throw new Ze($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function a2(t){if(dt.isDocumentKey(t))throw new Ze($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":wt()}function Jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ze($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Mh(t);throw new Ze($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function oN(t,e){if(e<=0)throw new Ze($e.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ze($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ze($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gw((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ze($e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ze($e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ze($e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i2({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i2(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new S6;switch(n.type){case"firstParty":return new C6(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ze($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=n2.get(r);n&&(ot("ComponentProvider","Removing Datastore"),n2.delete(r),n.terminate())}(this),Promise.resolve()}}function lN(t,e,r,n={}){var s;const i=(t=Jn(t,Uh))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=An.MOCK_USER;else{o=eA(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Ze($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new An(c)}t._authCredentials=new T6(new zA(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Aa(this.firestore,e,this._query)}}class Ln{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class ji extends Aa{constructor(e,r,n){super(e,r,Ih(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new dt(e))}withConverter(e){return new ji(this.firestore,e,this._path)}}function sr(t,e,...r){if(t=nr(t),Ww("collection","path",e),t instanceof Uh){const n=dr.fromString(e,...r);return a2(n),new ji(t,null,n)}{if(!(t instanceof Ln||t instanceof ji))throw new Ze($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(dr.fromString(e,...r));return a2(n),new ji(t.firestore,null,n)}}function vt(t,e,...r){if(t=nr(t),arguments.length===1&&(e=KA.newId()),Ww("doc","path",e),t instanceof Uh){const n=dr.fromString(e,...r);return s2(n),new Ln(t,null,new dt(n))}{if(!(t instanceof Ln||t instanceof ji))throw new Ze($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(dr.fromString(e,...r));return s2(n),new Ln(t.firestore,t instanceof ji?t.converter:null,new dt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Cw(this,"async_queue_retry"),this.Vu=()=>{const n=Rp();n&&ot("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Rp();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Rp();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Wa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Td(e))throw e;ot("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw ni("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=v1.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&wt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function l2(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class _a extends Uh{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new o2,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o2(e),this._firestoreClient=void 0,await e}}}function ro(t,e){const r=typeof t=="object"?t:xd(),n=typeof t=="string"?t:"(default)",s=gd(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=Ug("firestore");i&&lN(s,...i)}return s}function kd(t){if(t._terminated)throw new Ze($e.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cN(t),t._firestoreClient}function cN(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,u){return new V6(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Gw(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new tN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nc(gn.fromBase64String(e))}catch(r){throw new Ze($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new nc(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ze($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ze($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ze($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=/^__.*__$/;class dN{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new to(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ad(e,this.data,r,this.fieldTransforms)}}class zw{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new to(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Kw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class w1{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new w1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return N0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Kw(this.Cu)&&uN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class fN{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Nh(e)}Qu(e,r,n,s=!1){return new w1({Cu:e,methodName:r,qu:n,path:fn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vc(t){const e=t._freezeSettings(),r=Nh(t._databaseId);return new fN(t._databaseId,!!e.ignoreUndefinedProperties,r)}function C1(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);k1("Data must be an object, but it was:",a,n);const o=Qw(n,a);let l,c;if(i.merge)l=new vs(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const f=Mv(e,d,r);if(!a.contains(f))throw new Ze($e.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Zw(u,f)||u.push(f)}l=new vs(u),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new dN(new ls(o),l,c)}class $h extends Vh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $h}}class I1 extends Vh{_toFieldTransform(e){return new dO(e.path,new Xu)}isEqual(e){return e instanceof I1}}function qw(t,e,r,n){const s=t.Qu(1,e,r);k1("Data must be an object, but it was:",s,n);const i=[],a=ls.empty();zo(n,(l,c)=>{const u=D1(e,l,r);c=nr(c);const d=s.Nu(u);if(c instanceof $h)i.push(u);else{const f=Rd(c,d);f!=null&&(i.push(u),a.set(u,f))}});const o=new vs(i);return new zw(a,o,s.fieldTransforms)}function Xw(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[Mv(e,n,r)],l=[s];if(i.length%2!=0)throw new Ze($e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)o.push(Mv(e,i[f])),l.push(i[f+1]);const c=[],u=ls.empty();for(let f=o.length-1;f>=0;--f)if(!Zw(c,o[f])){const h=o[f];let v=l[f];v=nr(v);const m=a.Nu(h);if(v instanceof $h)c.push(h);else{const g=Rd(v,m);g!=null&&(c.push(h),u.set(h,g))}}const d=new vs(c);return new zw(u,d,a.fieldTransforms)}function Yw(t,e,r,n=!1){return Rd(r,t.Qu(n?4:3,e))}function Rd(t,e){if(Jw(t=nr(t)))return k1("Unsupported field value:",e,t),Qw(t,e);if(t instanceof Vh)return function(n,s){if(!Kw(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=Rd(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=nr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return lO(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Qr.fromDate(n);return{timestampValue:R0(s.serializer,i)}}if(n instanceof Qr){const i=new Qr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:R0(s.serializer,i)}}if(n instanceof T1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof nc)return{bytesValue:xw(s.serializer,n._byteString)};if(n instanceof Ln){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:l1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof A1)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return a1(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Mh(n)}`)}(t,e)}function Qw(t,e){const r={};return qA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zo(t,(n,s)=>{const i=Rd(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function Jw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qr||t instanceof T1||t instanceof nc||t instanceof Ln||t instanceof Vh||t instanceof A1)}function k1(t,e,r){if(!Jw(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Mh(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Mv(t,e,r){if((e=nr(e))instanceof Dd)return e._internalPath;if(typeof e=="string")return D1(t,e);throw N0("Field path arguments must be of type string or ",t,!1,void 0,r)}const hN=new RegExp("[~\\*/\\[\\]]");function D1(t,e,r){if(e.search(hN)>=0)throw N0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Dd(...e.split("."))._internalPath}catch{throw N0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function N0(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new Ze($e.INVALID_ARGUMENT,o+t+l)}function Zw(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Hh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class pN extends R1{data(){return super.data()}}function Hh(t,e){return typeof e=="string"?D1(t,e):e instanceof Dd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ze($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F1{}class jh extends F1{}function ps(t,e,...r){let n=[];e instanceof F1&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof P1).length,o=i.filter(l=>l instanceof Gh).length;if(a>1||a>0&&o>0)throw new Ze($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Gh extends jh{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Gh(e,r,n)}_apply(e){const r=this._parse(e);return tC(e._query,r),new Aa(e.firestore,e.converter,kv(e._query,r))}_parse(e){const r=vc(e.firestore);return function(i,a,o,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ze($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){u2(d,u);const h=[];for(const v of d)h.push(c2(l,i,v));f={arrayValue:{values:h}}}else f=c2(l,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||u2(d,u),f=Yw(o,a,d,u==="in"||u==="not-in");return Gr.create(c,u,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Ks(t,e,r){const n=e,s=Hh("where",t);return Gh._create(s,n,r)}class P1 extends F1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new P1(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:ea.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)tC(a,l),a=kv(a,l)}(e._query,r),new Aa(e.firestore,e.converter,kv(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class O1 extends jh{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new O1(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new Ze($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ze($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qu(i,a)}(e._query,this._field,this._direction);return new Aa(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Ko(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function go(t,e="asc"){const r=e,n=Hh("orderBy",t);return O1._create(n,r)}class N1 extends jh{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new N1(e,r,n)}_apply(e){return new Aa(e.firestore,e.converter,k0(e._query,this._limit,this._limitType))}}function Di(t){return oN("limit",t),N1._create("limit",t,"F")}class L1 extends jh{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new L1(e,r,n)}_apply(e){const r=vN(e,this.type,this._docOrFields,this._inclusive);return new Aa(e.firestore,e.converter,function(s,i){return new Ko(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function mN(...t){return L1._create("startAfter",t,!1)}function vN(t,e,r,n){if(r[0]=nr(r[0]),r[0]instanceof R1)return function(i,a,o,l,c){if(!l)throw new Ze($e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const d of Ul(i))if(d.field.isKeyField())u.push(I0(a,l.key));else{const f=l.data.field(d.field);if(Ch(f))throw new Ze($e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const h=d.field.canonicalString();throw new Ze($e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}u.push(f)}return new ec(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=vc(t.firestore);return function(a,o,l,c,u,d){const f=a.explicitOrderBy;if(u.length>f.length)throw new Ze($e.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let v=0;v<u.length;v++){const m=u[v];if(f[v].field.isKeyField()){if(typeof m!="string")throw new Ze($e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof m}`);if(!s1(a)&&m.indexOf("/")!==-1)throw new Ze($e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${m}' contains a slash.`);const g=a.path.child(dr.fromString(m));if(!dt.isDocumentKey(g))throw new Ze($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const b=new dt(g);h.push(I0(o,b))}else{const g=Yw(l,c,m);h.push(g)}}return new ec(h,d)}(t._query,t.firestore._databaseId,s,e,r,n)}}function c2(t,e,r){if(typeof(r=nr(r))=="string"){if(r==="")throw new Ze($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s1(e)&&r.indexOf("/")!==-1)throw new Ze($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(dr.fromString(r));if(!dt.isDocumentKey(n))throw new Ze($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return I0(t,new dt(n))}if(r instanceof Ln)return I0(t,r._key);throw new Ze($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mh(r)}.`)}function u2(t,e){if(!Array.isArray(t)||t.length===0)throw new Ze($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tC(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ze($e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze($e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class gN{convertValue(e,r="none"){switch(Lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw wt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return zo(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Br(a.doubleValue));return new A1(i)}convertGeoPoint(e){return new T1(Br(e.latitude),Br(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=e1(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const r=Yi(e);return new Qr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=dr.fromString(e);rr(Tw(n));const s=new zu(n.get(1),n.get(3)),i=new dt(n.popFirst(5));return s.isEqual(r)||ni(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rC extends R1{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class qf extends rC{data(e={}){return super.data(e)}}class nC{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new qc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new qf(this._firestore,this._userDataWriter,n.key,n,new qc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ze($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new qf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new qc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new qf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new qc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:xN(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function xN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t){t=Jn(t,Ln);const e=Jn(t.firestore,_a);return sN(kd(e),t._key).then(r=>aC(e,t,r))}class M1 extends gN{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,r)}}function Zr(t){t=Jn(t,Aa);const e=Jn(t.firestore,_a),r=kd(e),n=new M1(e);return eC(t._query),aN(r,t._query).then(s=>new nC(e,n,t,s))}function gr(t,e,r){t=Jn(t,Ln);const n=Jn(t.firestore,_a),s=B1(t.converter,e,r);return Fd(n,[C1(vc(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Qn.none())])}function sC(t,e,r,...n){t=Jn(t,Ln);const s=Jn(t.firestore,_a),i=vc(s);let a;return a=typeof(e=nr(e))=="string"||e instanceof Dd?Xw(i,"updateDoc",t._key,e,r,n):qw(i,"updateDoc",t._key,e),Fd(s,[a.toMutation(t._key,Qn.exists(!0))])}function sc(t){return Fd(Jn(t.firestore,_a),[new Ph(t._key,Qn.none())])}function yN(t,e){const r=Jn(t.firestore,_a),n=vt(t),s=B1(t.converter,e);return Fd(r,[C1(vc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Qn.exists(!1))]).then(()=>n)}function Xf(t,...e){var r,n,s;t=nr(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||l2(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(l2(e[a])){const d=e[a];e[a]=(r=d.next)===null||r===void 0?void 0:r.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,u;if(t instanceof Ln)c=Jn(t.firestore,_a),u=Ih(t._key.path),l={next:d=>{e[a]&&e[a](aC(c,t,d))},error:e[a+1],complete:e[a+2]};else{const d=Jn(t,Aa);c=Jn(d.firestore,_a),u=d._query;const f=new M1(c);l={next:h=>{e[a]&&e[a](new nC(c,f,d,h))},error:e[a+1],complete:e[a+2]},eC(t._query)}return function(f,h,v,m){const g=new S1(m),b=new b1(h,g,v);return f.asyncQueue.enqueueAndForget(async()=>x1(await O0(f),b)),()=>{g.Za(),f.asyncQueue.enqueueAndForget(async()=>y1(await O0(f),b))}}(kd(c),u,o,l)}function Fd(t,e){return function(n,s){const i=new Wa;return n.asyncQueue.enqueueAndForget(async()=>K5(await nN(n),s,i)),i.promise}(kd(t),e)}function aC(t,e,r){const n=r.docs.get(e._key),s=new M1(t);return new rC(t,s,e._key,n,new qc(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=vc(e)}set(e,r,n){this._verifyNotCommitted();const s=Pp(e,this._firestore),i=B1(s.converter,r,n),a=C1(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,Qn.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=Pp(e,this._firestore);let a;return a=typeof(r=nr(r))=="string"||r instanceof Dd?Xw(this._dataReader,"WriteBatch.update",i._key,r,n,s):qw(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Pp(e,this._firestore);return this._mutations=this._mutations.concat(new Ph(r._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze($e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pp(t,e){if((t=nr(t)).firestore!==e)throw new Ze($e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Bo(){return new I1("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){return kd(t=Jn(t,_a)),new EN(t,e=>Fd(t,e))}(function(e,r=!0){(function(s){hc=s})(Wo),Ki(new ei("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new _a(new A6(n.getProvider("auth-internal")),new k6(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ze($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ds(wE,"4.7.3",e),Ds(wE,"4.7.3","esm2017")})();var bN="firebase",_N="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds(bN,_N,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="firebasestorage.googleapis.com",lC="storageBucket",SN=2*60*1e3,TN=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends ra{constructor(e,r,n=0){super(Op(e),`Firebase Storage: ${r} (${Op(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Op(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pr||(Pr={}));function Op(t){return"storage/"+t}function U1(){const t="An unknown error occurred, please check the error payload for server response.";return new Nr(Pr.UNKNOWN,t)}function AN(t){return new Nr(Pr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function wN(t){return new Nr(Pr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CN(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nr(Pr.UNAUTHENTICATED,t)}function IN(){return new Nr(Pr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kN(t){return new Nr(Pr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function DN(){return new Nr(Pr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RN(){return new Nr(Pr.CANCELED,"User canceled the upload/download.")}function FN(t){return new Nr(Pr.INVALID_URL,"Invalid URL '"+t+"'.")}function PN(t){return new Nr(Pr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ON(){return new Nr(Pr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lC+"' property when initializing the app?")}function NN(){return new Nr(Pr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function LN(){return new Nr(Pr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function BN(t){return new Nr(Pr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Uv(t){return new Nr(Pr.INVALID_ARGUMENT,t)}function cC(){return new Nr(Pr.APP_DELETED,"The Firebase app was deleted.")}function MN(t){return new Nr(Pr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vu(t,e){return new Nr(Pr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fc(t){throw new Nr(Pr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=gs.makeFromUrl(e,r)}catch{return new gs(e,"")}if(n.path==="")return n;throw PN(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const u="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},m=r===oC?"(?:storage.googleapis.com|storage.cloud.google.com)":r,g="([^?#]*)",b=new RegExp(`^https?://${m}/${s}/${g}`,"i"),T=[{regex:o,indices:l,postModify:i},{regex:h,indices:v,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<T.length;C++){const R=T[C],D=R.regex.exec(e);if(D){const w=D[R.indices.bucket];let E=D[R.indices.path];E||(E=""),n=new gs(w,E),R.postModify(n);break}}if(n==null)throw FN(e);return n}}class UN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t,e,r){let n=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function d(g){s=setTimeout(()=>{s=null,t(h,l())},g)}function f(){i&&clearTimeout(i)}function h(g,...b){if(c){f();return}if(g){f(),u.call(null,g,...b);return}if(l()||a){f(),u.call(null,g,...b);return}n<64&&(n*=2);let T;o===1?(o=2,T=0):T=(n+Math.random())*1e3,d(T)}let v=!1;function m(g){v||(v=!0,f(),!c&&(s!==null?(g||(o=2),clearTimeout(s),d(0)):g||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,m(!0)},r),m}function $N(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){return t!==void 0}function jN(t){return typeof t=="object"&&!Array.isArray(t)}function V1(t){return typeof t=="string"||t instanceof String}function d2(t){return $1()&&t instanceof Blob}function $1(){return typeof Blob<"u"}function f2(t,e,r,n){if(n<e)throw Uv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Uv(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function uC(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Co;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Co||(Co={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,r,n,s,i,a,o,l,c,u,d,f=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,v)=>{this.resolve_=h,this.reject_=v,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new mf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===Co.NO_ERROR,l=i.getStatus();if(!o||GN(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Co.ABORT;n(!1,new mf(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new mf(c,i))})},r=(n,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());HN(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=U1();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?cC():RN();a(l)}else{const l=DN();a(l)}};this.canceled_?r(!1,new mf(!1,null,!0)):this.backoffId_=VN(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$N(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mf{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function zN(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function KN(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qN(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XN(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function YN(t,e,r,n,s,i,a=!0){const o=uC(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return qN(c,e),zN(c,r),KN(c,i),XN(c,n),new WN(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function JN(...t){const e=QN();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if($1())return new Blob(t);throw new Nr(Pr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ZN(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t){if(typeof atob>"u")throw BN("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Np{constructor(e,r){this.data=e,this.contentType=r||null}}function t9(t,e){switch(t){case ha.RAW:return new Np(dC(e));case ha.BASE64:case ha.BASE64URL:return new Np(fC(t,e));case ha.DATA_URL:return new Np(n9(e),s9(e))}throw U1()}function dC(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=t.charCodeAt(++r);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function r9(t){let e;try{e=decodeURIComponent(t)}catch{throw vu(ha.DATA_URL,"Malformed data URL.")}return dC(e)}function fC(t,e){switch(t){case ha.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw vu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ha.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw vu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=e9(e)}catch(s){throw s.message.includes("polyfill")?s:vu(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class hC{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw vu(ha.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=a9(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function n9(t){const e=new hC(t);return e.base64?fC(ha.BASE64,e.rest):r9(e.rest)}function s9(t){return new hC(t).contentType}function a9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,r){let n=0,s="";d2(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(d2(this.data_)){const n=this.data_,s=ZN(n,e,r);return s===null?null:new Ri(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Ri(n,!0)}}static getBlob(...e){if($1()){const r=e.map(n=>n instanceof Ri?n.data_:n);return new Ri(JN.apply(null,r))}else{const r=e.map(a=>V1(a)?t9(ha.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new Ri(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){let e;try{e=JSON.parse(t)}catch{return null}return jN(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function o9(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function mC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(t,e){return e}class Hn{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||l9}}let vf=null;function c9(t){return!V1(t)||t.length<2?t:mC(t)}function vC(){if(vf)return vf;const t=[];t.push(new Hn("bucket")),t.push(new Hn("generation")),t.push(new Hn("metageneration")),t.push(new Hn("name","fullPath",!0));function e(i,a){return c9(a)}const r=new Hn("name");r.xform=e,t.push(r);function n(i,a){return a!==void 0?Number(a):a}const s=new Hn("size");return s.xform=n,t.push(s),t.push(new Hn("timeCreated")),t.push(new Hn("updated")),t.push(new Hn("md5Hash",null,!0)),t.push(new Hn("cacheControl",null,!0)),t.push(new Hn("contentDisposition",null,!0)),t.push(new Hn("contentEncoding",null,!0)),t.push(new Hn("contentLanguage",null,!0)),t.push(new Hn("contentType",null,!0)),t.push(new Hn("metadata","customMetadata",!0)),vf=t,vf}function u9(t,e){function r(){const n=t.bucket,s=t.fullPath,i=new gs(n,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function d9(t,e,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const a=r[i];n[a.local]=a.xform(n,e[a.server])}return u9(n,t),n}function gC(t,e,r){const n=pC(e);return n===null?null:d9(t,n,r)}function f9(t,e,r,n){const s=pC(e);if(s===null||!V1(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+a(u)+"/o/"+a(d),h=Wh(f,r,n),v=uC({alt:"media",token:c});return h+v})[0]}function h9(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class H1{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t){if(!t)throw U1()}function p9(t,e){function r(n,s){const i=gC(t,s,e);return xC(i!==null),i}return r}function m9(t,e){function r(n,s){const i=gC(t,s,e);return xC(i!==null),f9(i,s,t.host,t._protocol)}return r}function yC(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=IN():s=CN():r.getStatus()===402?s=wN(t.bucket):r.getStatus()===403?s=kN(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function EC(t){const e=yC(t);function r(n,s){let i=e(n,s);return n.getStatus()===404&&(i=AN(t.path)),i.serverResponse=s.serverResponse,i}return r}function v9(t,e,r){const n=e.fullServerUrl(),s=Wh(n,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new H1(s,i,m9(t,r),a);return o.errorHandler=EC(e),o}function g9(t,e){const r=e.fullServerUrl(),n=Wh(r,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function a(l,c){}const o=new H1(n,s,a,i);return o.successCodes=[200,204],o.errorHandler=EC(e),o}function x9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function y9(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=x9(null,e)),n}function E9(t,e,r,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let T="";for(let C=0;C<2;C++)T=T+Math.random().toString().slice(2);return T}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=y9(e,n,s),u=h9(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Ri.getBlob(d,n,f);if(h===null)throw NN();const v={name:c.fullPath},m=Wh(i,t.host,t._protocol),g="POST",b=t.maxUploadRetryTime,_=new H1(m,g,p9(t,r),b);return _.urlParams=v,_.headers=a,_.body=h.uploadData(),_.errorHandler=yC(e),_}class b9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Co.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Co.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Co.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw Fc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _9 extends b9{initXhr(){this.xhr_.responseType="text"}}function j1(){return new _9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,r){this._service=e,r instanceof gs?this._location=r:this._location=gs.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Mo(e,r)}get root(){const e=new gs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mC(this._location.path)}get storage(){return this._service}get parent(){const e=i9(this._location.path);if(e===null)return null;const r=new gs(this._location.bucket,e);return new Mo(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw MN(e)}}function S9(t,e,r){t._throwIfRoot("uploadBytes");const n=E9(t.storage,t._location,vC(),new Ri(e,!0),r);return t.storage.makeRequestWithTokens(n,j1).then(s=>({metadata:s,ref:t}))}function T9(t){t._throwIfRoot("getDownloadURL");const e=v9(t.storage,t._location,vC());return t.storage.makeRequestWithTokens(e,j1).then(r=>{if(r===null)throw LN();return r})}function A9(t){t._throwIfRoot("deleteObject");const e=g9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,j1)}function w9(t,e){const r=o9(t._location.path,e),n=new gs(t._location.bucket,r);return new Mo(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9(t){return/^[A-Za-z]+:\/\//.test(t)}function I9(t,e){return new Mo(t,e)}function bC(t,e){if(t instanceof G1){const r=t;if(r._bucket==null)throw ON();const n=new Mo(r,r._bucket);return e!=null?bC(n,e):n}else return e!==void 0?w9(t,e):t}function k9(t,e){if(e&&C9(e)){if(t instanceof G1)return I9(t,e);throw Uv("To use ref(service, url), the first argument must be a Storage instance.")}else return bC(t,e)}function h2(t,e){const r=e==null?void 0:e[lC];return r==null?null:gs.makeFromBucketSpec(r,t)}function D9(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:eA(s,t.app.options.projectId))}class G1{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=oC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SN,this._maxUploadRetryTime=TN,this._requests=new Set,s!=null?this._bucket=gs.makeFromBucketSpec(s,this._host):this._bucket=h2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gs.makeFromBucketSpec(this._url,e):this._bucket=h2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){f2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){f2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mo(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new UN(cC());{const a=YN(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const p2="@firebase/storage",m2="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="storage";function R9(t,e,r){return t=nr(t),S9(t,e,r)}function F9(t){return t=nr(t),T9(t)}function P9(t){return t=nr(t),A9(t)}function Vv(t,e){return t=nr(t),k9(t,e)}function SC(t=xd(),e){t=nr(t);const n=gd(t,_C).getImmediate({identifier:e}),s=Ug("storage");return s&&O9(n,...s),n}function O9(t,e,r,n={}){D9(t,e,r,n)}function N9(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new G1(r,n,s,e,Wo)}function L9(){Ki(new ei(_C,N9,"PUBLIC").setMultipleInstances(!0)),Ds(p2,m2,""),Ds(p2,m2,"esm2017")}L9();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9="type.googleapis.com/google.protobuf.Int64Value",M9="type.googleapis.com/google.protobuf.UInt64Value";function TC(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function $v(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>$v(e));if(typeof t=="function"||typeof t=="object")return TC(t,e=>$v(e));throw new Error("Data cannot be encoded in JSON: "+t)}function L0(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case B9:case M9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>L0(e)):typeof t=="function"||typeof t=="object"?TC(t,e=>L0(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $l extends ra{constructor(e,r,n){super(`${W1}/${e}`,r||""),this.details=n}}function U9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function V9(t,e){let r=U9(t),n=r,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!v2[a])return new $l("internal","internal");r=v2[a],n=a}const o=i.message;typeof o=="string"&&(n=o),s=i.details,s!==void 0&&(s=L0(s))}}catch{}return r==="ok"?null:new $l(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="us-central1";function H9(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new $l("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class j9{constructor(e,r,n,s,i=Hv,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new $9(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Hv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function G9(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function W9(t,e,r){return n=>K9(t,e,n,{})}async function z9(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function K9(t,e,r,n){const s=t._url(e);return q9(t,s,r,n)}async function q9(t,e,r,n){r=$v(r);const s={data:r},i={},a=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,l=H9(o),c=await Promise.race([z9(e,s,i,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new $l("cancelled","Firebase Functions instance was deleted.");const u=V9(c.status,c.json);if(u)throw u;if(!c.json)throw new $l("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new $l("internal","Response is missing data field.");return{data:L0(d)}}const g2="@firebase/functions",x2="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9="auth-internal",Y9="app-check-internal",Q9="messaging-internal";function J9(t,e){const r=(n,{instanceIdentifier:s})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(X9),o=n.getProvider(Q9),l=n.getProvider(Y9);return new j9(i,a,o,l,s,t)};Ki(new ei(W1,r,"PUBLIC").setMultipleInstances(!0)),Ds(g2,x2,e),Ds(g2,x2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t=xd(),e=Hv){const n=gd(nr(t),W1).getImmediate({identifier:e}),s=Ug("functions");return s&&Z9(n,...s),n}function Z9(t,e,r){G9(nr(t),e,r)}function da(t,e,r){return W9(nr(t),e)}J9(fetch.bind(self));const AC={apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",authDomain:"casemangervue.firebaseapp.com",projectId:"casemangervue",storageBucket:"casemangervue.firebasestorage.app",messagingSenderId:"756483333257",appId:"1:756483333257:web:694e2ad2415b7886563a58",measurementId:"G-YBRDQX9NFR"},zh=nA(AC),Gs=ju(zh),yt=ro(zh),y2=SC(zh),eL=Hl(zh),tL=new ua;console.log(" Connected to Firebase project:",AC.projectId);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Sl=typeof document<"u";function wC(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function rL(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&wC(t.default)}const Zt=Object.assign;function Lp(t,e){const r={};for(const n in e){const s=e[n];r[n]=ta(s)?s.map(t):t(s)}return r}const gu=()=>{},ta=Array.isArray,CC=/#/g,nL=/&/g,sL=/\//g,aL=/=/g,iL=/\?/g,IC=/\+/g,oL=/%5B/g,lL=/%5D/g,kC=/%5E/g,cL=/%60/g,DC=/%7B/g,uL=/%7C/g,RC=/%7D/g,dL=/%20/g;function z1(t){return encodeURI(""+t).replace(uL,"|").replace(oL,"[").replace(lL,"]")}function fL(t){return z1(t).replace(DC,"{").replace(RC,"}").replace(kC,"^")}function jv(t){return z1(t).replace(IC,"%2B").replace(dL,"+").replace(CC,"%23").replace(nL,"%26").replace(cL,"`").replace(DC,"{").replace(RC,"}").replace(kC,"^")}function hL(t){return jv(t).replace(aL,"%3D")}function pL(t){return z1(t).replace(CC,"%23").replace(iL,"%3F")}function mL(t){return t==null?"":pL(t).replace(sL,"%2F")}function Ju(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const vL=/\/$/,gL=t=>t.replace(vL,"");function Bp(t,e,r="/"){let n,s={},i="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=e.slice(0,l),i=e.slice(l+1,o>-1?o:e.length),s=t(i)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=bL(n??e,r),{fullPath:n+(i&&"?")+i+a,path:n,query:s,hash:Ju(a)}}function xL(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function E2(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function yL(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&ac(e.matched[n],r.matched[s])&&FC(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function ac(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function FC(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!EL(t[r],e[r]))return!1;return!0}function EL(t,e){return ta(t)?b2(t,e):ta(e)?b2(e,t):t===e}function b2(t,e){return ta(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function bL(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const vi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Zu;(function(t){t.pop="pop",t.push="push"})(Zu||(Zu={}));var xu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(xu||(xu={}));function _L(t){if(!t)if(Sl){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),gL(t)}const SL=/^[^#]+#/;function TL(t,e){return t.replace(SL,"#")+e}function AL(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const Kh=()=>({left:window.scrollX,top:window.scrollY});function wL(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=AL(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function _2(t,e){return(history.state?history.state.position-e:-1)+t}const Gv=new Map;function CL(t,e){Gv.set(t,e)}function IL(t){const e=Gv.get(t);return Gv.delete(t),e}let kL=()=>location.protocol+"//"+location.host;function PC(t,e){const{pathname:r,search:n,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),E2(l,"")}return E2(r,t)+n+s}function DL(t,e,r,n){let s=[],i=[],a=null;const o=({state:f})=>{const h=PC(t,location),v=r.value,m=e.value;let g=0;if(f){if(r.value=h,e.value=f,a&&a===v){a=null;return}g=m?f.position-m.position:0}else n(h);s.forEach(b=>{b(r.value,v,{delta:g,type:Zu.pop,direction:g?g>0?xu.forward:xu.back:xu.unknown})})};function l(){a=r.value}function c(f){s.push(f);const h=()=>{const v=s.indexOf(f);v>-1&&s.splice(v,1)};return i.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(Zt({},f.state,{scroll:Kh()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function S2(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?Kh():null}}function RL(t){const{history:e,location:r}=window,n={value:PC(t,r)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(r.host&&document.querySelector("base")?t:t.slice(d))+l:kL()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(h){console.error(h),r[u?"replace":"assign"](f)}}function a(l,c){const u=Zt({},e.state,S2(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),n.value=l}function o(l,c){const u=Zt({},s.value,e.state,{forward:l,scroll:Kh()});i(u.current,u,!0);const d=Zt({},S2(n.value,l,null),{position:u.position+1},c);i(l,d,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function FL(t){t=_L(t);const e=RL(t),r=DL(t,e.state,e.location,e.replace);function n(i,a=!0){a||r.pauseListeners(),history.go(i)}const s=Zt({location:"",base:t,go:n,createHref:TL.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function PL(t){return typeof t=="string"||t&&typeof t=="object"}function OC(t){return typeof t=="string"||typeof t=="symbol"}const NC=Symbol("");var T2;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(T2||(T2={}));function ic(t,e){return Zt(new Error,{type:t,[NC]:!0},e)}function La(t,e){return t instanceof Error&&NC in t&&(e==null||!!(t.type&e))}const A2="[^/]+?",OL={sensitive:!1,strict:!1,start:!0,end:!0},NL=/[.+*?^${}()[\]/\\]/g;function LL(t,e){const r=Zt({},OL,e),n=[];let s=r.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(r.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(NL,"\\$&"),h+=40;else if(f.type===1){const{value:v,repeatable:m,optional:g,regexp:b}=f;i.push({name:v,repeatable:m,optional:g});const _=b||A2;if(_!==A2){h+=10;try{new RegExp(`(${_})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${v}" (${_}): `+C.message)}}let T=m?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(T=g&&c.length<2?`(?:/${T})`:"/"+T),g&&(T+="?"),s+=T,h+=20,g&&(h+=-8),m&&(h+=-20),_===".*"&&(h+=-50)}u.push(h)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,r.sensitive?"":"i");function o(c){const u=c.match(a),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",v=i[f-1];d[v.name]=h&&v.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:v,repeatable:m,optional:g}=h,b=v in c?c[v]:"";if(ta(b)&&!m)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const _=ta(b)?b.join("/"):b;if(!_)if(g)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);u+=_}}return u||"/"}return{re:a,score:n,keys:i,parse:o,stringify:l}}function BL(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function LC(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const i=BL(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(w2(n))return 1;if(w2(s))return-1}return s.length-n.length}function w2(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const ML={type:0,value:""},UL=/[a-zA-Z0-9_]/;function VL(t){if(!t)return[[]];if(t==="/")return[[ML]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${r})/"${c}": ${h}`)}let r=0,n=r;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,c="",u="";function d(){c&&(r===0?i.push({type:0,value:c}):r===1||r===2||r===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&d(),a()):l===":"?(d(),r=1):f();break;case 4:f(),r=n;break;case 1:l==="("?r=2:UL.test(l)?f():(d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),a(),s}function $L(t,e,r){const n=LL(VL(t.path),r),s=Zt(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function HL(t,e){const r=[],n=new Map;e=D2({strict:!1,end:!0,sensitive:!1},e);function s(d){return n.get(d)}function i(d,f,h){const v=!h,m=I2(d);m.aliasOf=h&&h.record;const g=D2(e,d),b=[m];if("alias"in d){const C=typeof d.alias=="string"?[d.alias]:d.alias;for(const R of C)b.push(I2(Zt({},m,{components:h?h.record.components:m.components,path:R,aliasOf:h?h.record:m})))}let _,T;for(const C of b){const{path:R}=C;if(f&&R[0]!=="/"){const D=f.record.path,w=D[D.length-1]==="/"?"":"/";C.path=f.record.path+(R&&w+R)}if(_=$L(C,f,g),h?h.alias.push(_):(T=T||_,T!==_&&T.alias.push(_),v&&d.name&&!k2(_)&&a(d.name)),BC(_)&&l(_),m.children){const D=m.children;for(let w=0;w<D.length;w++)i(D[w],_,h&&h.children[w])}h=h||_}return T?()=>{a(T)}:gu}function a(d){if(OC(d)){const f=n.get(d);f&&(n.delete(d),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(d);f>-1&&(r.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return r}function l(d){const f=WL(d,r);r.splice(f,0,d),d.record.name&&!k2(d)&&n.set(d.record.name,d)}function c(d,f){let h,v={},m,g;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw ic(1,{location:d});g=h.record.name,v=Zt(C2(f.params,h.keys.filter(T=>!T.optional).concat(h.parent?h.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),d.params&&C2(d.params,h.keys.map(T=>T.name))),m=h.stringify(v)}else if(d.path!=null)m=d.path,h=r.find(T=>T.re.test(m)),h&&(v=h.parse(m),g=h.record.name);else{if(h=f.name?n.get(f.name):r.find(T=>T.re.test(f.path)),!h)throw ic(1,{location:d,currentLocation:f});g=h.record.name,v=Zt({},f.params,d.params),m=h.stringify(v)}const b=[];let _=h;for(;_;)b.unshift(_.record),_=_.parent;return{name:g,path:m,params:v,matched:b,meta:GL(b)}}t.forEach(d=>i(d));function u(){r.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:a,clearRoutes:u,getRoutes:o,getRecordMatcher:s}}function C2(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function I2(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:jL(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function jL(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function k2(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function GL(t){return t.reduce((e,r)=>Zt(e,r.meta),{})}function D2(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function WL(t,e){let r=0,n=e.length;for(;r!==n;){const i=r+n>>1;LC(t,e[i])<0?n=i:r=i+1}const s=zL(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function zL(t){let e=t;for(;e=e.parent;)if(BC(e)&&LC(t,e)===0)return e}function BC({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function KL(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(IC," "),a=i.indexOf("="),o=Ju(a<0?i:i.slice(0,a)),l=a<0?null:Ju(i.slice(a+1));if(o in e){let c=e[o];ta(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function R2(t){let e="";for(let r in t){const n=t[r];if(r=hL(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(ta(n)?n.map(i=>i&&jv(i)):[n&&jv(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function qL(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=ta(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const XL=Symbol(""),F2=Symbol(""),qh=Symbol(""),K1=Symbol(""),Wv=Symbol("");function Pc(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Ai(t,e,r,n,s,i=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const c=f=>{f===!1?l(ic(4,{from:r,to:e})):f instanceof Error?l(f):PL(f)?l(ic(2,{from:e,to:f})):(a&&n.enterCallbacks[s]===a&&typeof f=="function"&&a.push(f),o())},u=i(()=>t.call(n&&n.instances[s],e,r,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function Mp(t,e,r,n,s=i=>i()){const i=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(wC(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ai(u,r,n,a,o,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const d=rL(u)?u.default:u;a.mods[o]=u,a.components[o]=d;const h=(d.__vccOpts||d)[e];return h&&Ai(h,r,n,a,o,s)()}))}}return i}function P2(t){const e=Es(qh),r=Es(K1),n=Ve(()=>{const l=ge(t.to);return e.resolve(l)}),s=Ve(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=r.matched;if(!u||!d.length)return-1;const f=d.findIndex(ac.bind(null,u));if(f>-1)return f;const h=O2(l[c-2]);return c>1&&O2(u)===h&&d[d.length-1].path!==h?d.findIndex(ac.bind(null,l[c-2])):f}),i=Ve(()=>s.value>-1&&eB(r.params,n.value.params)),a=Ve(()=>s.value>-1&&s.value===r.matched.length-1&&FC(r.params,n.value.params));function o(l={}){if(ZL(l)){const c=e[ge(t.replace)?"replace":"push"](ge(t.to)).catch(gu);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:Ve(()=>n.value.href),isActive:i,isExactActive:a,navigate:o}}function YL(t){return t.length===1?t[0]:t}const QL=dd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:P2,setup(t,{slots:e}){const r=Os(P2(t)),{options:n}=Es(qh),s=Ve(()=>({[N2(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[N2(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&YL(e.default(r));return t.custom?i:yh("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),JL=QL;function ZL(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function eB(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!ta(s)||s.length!==n.length||n.some((i,a)=>i!==s[a]))return!1}return!0}function O2(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const N2=(t,e,r)=>t??e??r,tB=dd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=Es(Wv),s=Ve(()=>t.route||n.value),i=Es(F2,0),a=Ve(()=>{let c=ge(i);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),o=Ve(()=>s.value.matched[a.value]);lu(F2,Ve(()=>a.value+1)),lu(XL,o),lu(Wv,s);const l=he();return er(()=>[l.value,o.value,t.name],([c,u,d],[f,h,v])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!ac(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,d=o.value,f=d&&d.components[u];if(!f)return L2(r.default,{Component:f,route:c});const h=d.props[u],v=h?h===!0?c.params:typeof h=="function"?h(c):h:null,g=yh(f,Zt({},v,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return L2(r.default,{Component:g,route:c})||g}}});function L2(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const rB=tB;function nB(t){const e=HL(t.routes,t),r=t.parseQuery||KL,n=t.stringifyQuery||R2,s=t.history,i=Pc(),a=Pc(),o=Pc(),l=Tg(vi);let c=vi;Sl&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Lp.bind(null,ie=>""+ie),d=Lp.bind(null,mL),f=Lp.bind(null,Ju);function h(ie,de){let z,J;return OC(ie)?(z=e.getRecordMatcher(ie),J=de):J=ie,e.addRoute(J,z)}function v(ie){const de=e.getRecordMatcher(ie);de&&e.removeRoute(de)}function m(){return e.getRoutes().map(ie=>ie.record)}function g(ie){return!!e.getRecordMatcher(ie)}function b(ie,de){if(de=Zt({},de||l.value),typeof ie=="string"){const ee=Bp(r,ie,de.path),fe=e.resolve({path:ee.path},de),ve=s.createHref(ee.fullPath);return Zt(ee,fe,{params:f(fe.params),hash:Ju(ee.hash),redirectedFrom:void 0,href:ve})}let z;if(ie.path!=null)z=Zt({},ie,{path:Bp(r,ie.path,de.path).path});else{const ee=Zt({},ie.params);for(const fe in ee)ee[fe]==null&&delete ee[fe];z=Zt({},ie,{params:d(ee)}),de.params=d(de.params)}const J=e.resolve(z,de),me=ie.hash||"";J.params=u(f(J.params));const Y=xL(n,Zt({},ie,{hash:fL(me),path:J.path})),K=s.createHref(Y);return Zt({fullPath:Y,hash:me,query:n===R2?qL(ie.query):ie.query||{}},J,{redirectedFrom:void 0,href:K})}function _(ie){return typeof ie=="string"?Bp(r,ie,l.value.path):Zt({},ie)}function T(ie,de){if(c!==ie)return ic(8,{from:de,to:ie})}function C(ie){return w(ie)}function R(ie){return C(Zt(_(ie),{replace:!0}))}function D(ie){const de=ie.matched[ie.matched.length-1];if(de&&de.redirect){const{redirect:z}=de;let J=typeof z=="function"?z(ie):z;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=_(J):{path:J},J.params={}),Zt({query:ie.query,hash:ie.hash,params:J.path!=null?{}:ie.params},J)}}function w(ie,de){const z=c=b(ie),J=l.value,me=ie.state,Y=ie.force,K=ie.replace===!0,ee=D(z);if(ee)return w(Zt(_(ee),{state:typeof ee=="object"?Zt({},me,ee.state):me,force:Y,replace:K}),de||z);const fe=z;fe.redirectedFrom=de;let ve;return!Y&&yL(n,J,z)&&(ve=ic(16,{to:fe,from:J}),j(J,J,!0,!1)),(ve?Promise.resolve(ve):x(fe,J)).catch(Q=>La(Q)?La(Q,2)?Q:Z(Q):H(Q,fe,J)).then(Q=>{if(Q){if(La(Q,2))return w(Zt({replace:K},_(Q.to),{state:typeof Q.to=="object"?Zt({},me,Q.to.state):me,force:Y}),de||fe)}else Q=A(fe,J,!0,K,me);return I(fe,J,Q),Q})}function E(ie,de){const z=T(ie,de);return z?Promise.reject(z):Promise.resolve()}function y(ie){const de=X.values().next().value;return de&&typeof de.runWithContext=="function"?de.runWithContext(ie):ie()}function x(ie,de){let z;const[J,me,Y]=sB(ie,de);z=Mp(J.reverse(),"beforeRouteLeave",ie,de);for(const ee of J)ee.leaveGuards.forEach(fe=>{z.push(Ai(fe,ie,de))});const K=E.bind(null,ie,de);return z.push(K),pe(z).then(()=>{z=[];for(const ee of i.list())z.push(Ai(ee,ie,de));return z.push(K),pe(z)}).then(()=>{z=Mp(me,"beforeRouteUpdate",ie,de);for(const ee of me)ee.updateGuards.forEach(fe=>{z.push(Ai(fe,ie,de))});return z.push(K),pe(z)}).then(()=>{z=[];for(const ee of Y)if(ee.beforeEnter)if(ta(ee.beforeEnter))for(const fe of ee.beforeEnter)z.push(Ai(fe,ie,de));else z.push(Ai(ee.beforeEnter,ie,de));return z.push(K),pe(z)}).then(()=>(ie.matched.forEach(ee=>ee.enterCallbacks={}),z=Mp(Y,"beforeRouteEnter",ie,de,y),z.push(K),pe(z))).then(()=>{z=[];for(const ee of a.list())z.push(Ai(ee,ie,de));return z.push(K),pe(z)}).catch(ee=>La(ee,8)?ee:Promise.reject(ee))}function I(ie,de,z){o.list().forEach(J=>y(()=>J(ie,de,z)))}function A(ie,de,z,J,me){const Y=T(ie,de);if(Y)return Y;const K=de===vi,ee=Sl?history.state:{};z&&(J||K?s.replace(ie.fullPath,Zt({scroll:K&&ee&&ee.scroll},me)):s.push(ie.fullPath,me)),l.value=ie,j(ie,de,z,K),Z()}let k;function U(){k||(k=s.listen((ie,de,z)=>{if(!q.listening)return;const J=b(ie),me=D(J);if(me){w(Zt(me,{replace:!0,force:!0}),J).catch(gu);return}c=J;const Y=l.value;Sl&&CL(_2(Y.fullPath,z.delta),Kh()),x(J,Y).catch(K=>La(K,12)?K:La(K,2)?(w(Zt(_(K.to),{force:!0}),J).then(ee=>{La(ee,20)&&!z.delta&&z.type===Zu.pop&&s.go(-1,!1)}).catch(gu),Promise.reject()):(z.delta&&s.go(-z.delta,!1),H(K,J,Y))).then(K=>{K=K||A(J,Y,!1),K&&(z.delta&&!La(K,8)?s.go(-z.delta,!1):z.type===Zu.pop&&La(K,20)&&s.go(-1,!1)),I(J,Y,K)}).catch(gu)}))}let W=Pc(),P=Pc(),B;function H(ie,de,z){Z(ie);const J=P.list();return J.length?J.forEach(me=>me(ie,de,z)):console.error(ie),Promise.reject(ie)}function L(){return B&&l.value!==vi?Promise.resolve():new Promise((ie,de)=>{W.add([ie,de])})}function Z(ie){return B||(B=!ie,U(),W.list().forEach(([de,z])=>ie?z(ie):de()),W.reset()),ie}function j(ie,de,z,J){const{scrollBehavior:me}=t;if(!Sl||!me)return Promise.resolve();const Y=!z&&IL(_2(ie.fullPath,0))||(J||!z)&&history.state&&history.state.scroll||null;return Go().then(()=>me(ie,de,Y)).then(K=>K&&wL(K)).catch(K=>H(K,ie,de))}const O=ie=>s.go(ie);let G;const X=new Set,q={currentRoute:l,listening:!0,addRoute:h,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:g,getRoutes:m,resolve:b,options:t,push:C,replace:R,go:O,back:()=>O(-1),forward:()=>O(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:P.add,isReady:L,install(ie){const de=this;ie.component("RouterLink",JL),ie.component("RouterView",rB),ie.config.globalProperties.$router=de,Object.defineProperty(ie.config.globalProperties,"$route",{enumerable:!0,get:()=>ge(l)}),Sl&&!G&&l.value===vi&&(G=!0,C(s.location).catch(me=>{}));const z={};for(const me in vi)Object.defineProperty(z,me,{get:()=>l.value[me],enumerable:!0});ie.provide(qh,de),ie.provide(K1,_g(z)),ie.provide(Wv,l);const J=ie.unmount;X.add(ie),ie.unmount=function(){X.delete(ie),X.size<1&&(c=vi,k&&k(),k=null,l.value=vi,G=!1,B=!1),J()}}};function pe(ie){return ie.reduce((de,z)=>de.then(()=>y(z)),Promise.resolve())}return q}function sB(t,e){const r=[],n=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(t.matched.find(c=>ac(c,o))?n.push(o):r.push(o));const l=t.matched[a];l&&(e.matched.find(c=>ac(c,l))||s.push(l))}return[r,n,s]}function Xo(){return Es(qh)}function aB(t){return Es(K1)}const oi=KT("auth",()=>{const t=he(null),e=he(""),r=he(!0),n=Xo(),s=()=>{CA(Gs,async c=>{if(r.value=!0,c)try{const u=await Jr(vt(yt,"users",c.uid));u.exists()?(t.value={uid:c.uid,email:c.email,name:c.displayName,...u.data()},console.log(" User authenticated:",t.value)):(console.log(" User not found in Firestore"),t.value=null)}catch(u){console.error(" Error fetching user data:",u),t.value=null}else t.value=null,console.log(" No user authenticated");r.value=!1})},i=async()=>{e.value="";try{const c=new ua,d=(await MA(Gs,c)).user,f=await Jr(vt(yt,"users",d.uid));if(!f.exists()){e.value=" User not found in system.";return}t.value={uid:d.uid,email:d.email,name:d.displayName,...f.data()},n.push("/")}catch(c){console.error(" Login error:",c),e.value=c.message||"Authentication failed."}},a=async()=>{try{await f8(Gs),t.value=null,n.push("/login")}catch(c){console.error(" Logout error:",c)}},o=c=>{t.value=c},l=Ve(()=>t.value);return s(),{currentUser:t,user:l,errorMsg:e,isLoading:r,loginWithGoogle:i,logout:a,setUser:o}}),iB=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:oi},Symbol.toStringTag,{value:"Module"})),Xh=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],B2=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],Oc=["admin","administrator","administrator_504_CM","sped_chair"],ft={VIEW_USERS:"view_users",EDIT_USER:"edit_user",DELETE_USER:"delete_user",MANAGE_SUBJECTS:"manage_subjects",MANAGE_ROLES:"manage_roles",VIEW_STUDENTS:"view_students",EDIT_STUDENT_CM:"edit_student_CM",EDIT_STUDENT_ALL:"edit_student_All",TESTING:"testing"},zv={admin:[...Object.values(ft)],administrator:[ft.VIEW_USERS,ft.EDIT_USER,ft.DELETE_USER,ft.MANAGE_SUBJECTS,ft.MANAGE_ROLES,ft.VIEW_STUDENTS,ft.EDIT_STUDENT_ALL,ft.TESTING],administrator_504_CM:[ft.VIEW_USERS,ft.EDIT_USER,ft.DELETE_USER,ft.MANAGE_SUBJECTS,ft.MANAGE_ROLES,ft.VIEW_STUDENTS,ft.EDIT_STUDENT_ALL],sped_chair:[ft.VIEW_USERS,ft.VIEW_STUDENTS,ft.EDIT_STUDENT_ALL],case_manager:[ft.VIEW_USERS,ft.VIEW_STUDENTS,ft.EDIT_STUDENT_CM],teacher:[ft.VIEW_USERS,ft.VIEW_STUDENTS],service_provider:[ft.VIEW_USERS,ft.VIEW_STUDENTS],paraeducator:[ft.VIEW_USERS,ft.VIEW_STUDENTS]};function M2(t){return Xh.includes(t)}const MC=KT("permission",()=>{const{currentUser:t}=oi(),e=he([]),r=he({});function n(a){const o={};return a.forEach(l=>{(zv[l]||[]).forEach(u=>o[u]=!0)}),o}let s=null;return er(()=>t==null?void 0:t.uid,()=>{if(s&&s(),t!=null&&t.uid){const a=vt(yt,"users",t.uid);s=Xf(a,o=>{const l=o.data()||{};e.value=l.role?[l.role]:[],r.value=n(e.value)})}else e.value=[],r.value={}},{immediate:!0}),{userRoles:e,userPermissions:r,hasRole:a=>e.value.includes(a),can:a=>r.value[a]===!0}});function oB(){const t=MC(),e=Ve(()=>t.hasRole("admin")),r=Ve(()=>t.can("manage_users")),n=s=>t.can(s);return{isAdmin:e,canManageUsers:r,hasRole:t.hasRole,can:t.can,hasPermission:n}}const lB=()=>!1,cB=()=>!0,Nc=he(!1);function q1(){const t=Ve(()=>lB()),e=Ve(()=>cB());return{isDebugMenuVisible:Nc,isDevelopment:t,canShowDebugMenu:e,toggleDebugMenu:()=>{e.value&&(Nc.value=!Nc.value)},showDebugMenu:()=>{e.value&&(Nc.value=!0)},hideDebugMenu:()=>{Nc.value=!1}}}const _t=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},uB={name:"UserRoleSwitcher",setup(){const t=oi();oB();const{isDebugMenuVisible:e,canShowDebugMenu:r,hideDebugMenu:n}=q1(),s=he(!1),i=he(""),a=he({}),o=he(!1),l=Ve(()=>t.user),c=[{value:"admin",label:"Admin"},{value:"administrator",label:"Administrator"},{value:"administrator_504_CM",label:"Administrator 504/CM"},{value:"sped_chair",label:"SPED Chair"},{value:"case_manager",label:"Case Manager"},{value:"paraeducator",label:"Paraeducator"},{value:"teacher",label:"Teacher"},{value:"service_provider",label:"Service Provider"}],u=[{uid:"test-admin",name:"Test Admin",email:"admin@test.com",role:"admin"},{uid:"test-administrator",name:"Test Administrator",email:"administrator@test.com",role:"administrator"},{uid:"test-administrator-504-cm",name:"Test Admin 504/CM",email:"admin504@test.com",role:"administrator_504_CM"},{uid:"test-sped-chair",name:"Test SPED Chair",email:"spedchair@test.com",role:"sped_chair"},{uid:"test-case-manager",name:"Test Case Manager",email:"cm@test.com",role:"case_manager"},{uid:"test-paraeducator",name:"Test Paraeducator",email:"para@test.com",role:"paraeducator"},{uid:"test-teacher",name:"Test Teacher",email:"teacher@test.com",role:"teacher"},{uid:"test-service-provider",name:"Test Service Provider",email:"service@test.com",role:"service_provider"}],d=async()=>{o.value=!0;try{const _=vt(yt,"config","permissions_matrix"),T=await Jr(_);T.exists()?a.value=T.data():(console.warn("Permissions matrix not found in database"),a.value={})}catch(_){console.error("Error loading permissions matrix:",_),a.value={}}finally{o.value=!1}},f=Ve(()=>{var R;const _=[{action:ft.VIEW_USERS,label:"View Users"},{action:ft.EDIT_USER,label:"Edit User"},{action:ft.DELETE_USER,label:"Delete User"},{action:ft.MANAGE_SUBJECTS,label:"Manage Subjects"},{action:ft.MANAGE_ROLES,label:"Manage Roles"},{action:ft.VIEW_STUDENTS,label:"View Students"},{action:ft.EDIT_STUDENT_CM,label:"Edit Students (Own Caseload)"},{action:ft.EDIT_STUDENT_ALL,label:"Edit All Students"},{action:ft.TESTING,label:"Testing"}],T=(R=l.value)==null?void 0:R.role,C=a.value[T]||[];return _.map(D=>({...D,granted:C.includes(D.action)}))}),h=()=>{s.value=!s.value},v=()=>{if(!i.value)return;const _={uid:`test-${i.value}-${Date.now()}`,email:`${i.value}@test.com`,name:`Test ${i.value.charAt(0).toUpperCase()+i.value.slice(1)}`,role:i.value,lastSyncTrigger:new Date().toISOString()};t.setUser(_),localStorage.setItem("debug-user",JSON.stringify(_)),i.value=""},m=_=>{t.setUser(_),localStorage.setItem("debug-user",JSON.stringify(_))},g=()=>{localStorage.removeItem("debug-user"),window.location.reload()},b=()=>{window.location.reload()};return Qt(async()=>{await d();const _=localStorage.getItem("debug-user");if(_)try{const C=JSON.parse(_);t.setUser(C)}catch(C){console.error("Error parsing debug user:",C),localStorage.removeItem("debug-user")}const T=C=>{C.ctrlKey&&C.shiftKey&&C.key==="D"&&(C.preventDefault(),r.value&&(e.value?h():(e.value=!0,s.value=!0)))};return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}}),{isDebugMenuVisible:e,canShowDebugMenu:r,hideDebugMenu:n,isExpanded:s,selectedRole:i,currentUser:l,availableRoles:c,testUsers:u,currentPermissions:f,loadingPermissions:o,toggleExpanded:h,switchRole:v,switchToUser:m,resetToRealUser:g,refreshPage:b}}},dB=["title"],fB={key:0,class:"debug-label"},hB={key:0,class:"switcher-content"},pB={class:"current-user-info"},mB={class:"role-selector"},vB=["value"],gB={class:"test-users"},xB={class:"test-user-buttons"},yB=["onClick"],EB={class:"permission-info"},bB={key:0,class:"loading-permissions"},_B={key:1,class:"permission-list"},SB={class:"permission-icon"},TB={class:"actions"};function AB(t,e,r,n,s,i){var a,o,l,c,u;return n.canShowDebugMenu&&n.isDebugMenuVisible?(N(),M("div",{key:0,class:at(["user-role-switcher",{collapsed:!n.isExpanded}])},[p("div",{class:"switcher-header",onClick:e[1]||(e[1]=(...d)=>n.toggleExpanded&&n.toggleExpanded(...d)),title:n.isExpanded?"Collapse Debug Panel":"Expand Debug Panel"},[e[6]||(e[6]=p("span",{class:"debug-icon"},"",-1)),n.isExpanded?(N(),M("span",fB,"Debug")):Re("",!0),p("button",{onClick:e[0]||(e[0]=bs((...d)=>n.hideDebugMenu&&n.hideDebugMenu(...d),["stop"])),class:"close-debug-btn",title:"Close Debug Menu"},"")],8,dB),n.isExpanded?(N(),M("div",hB,[p("div",pB,[e[7]||(e[7]=p("strong",null,"Current User:",-1)),Ne(" "+oe(((a=n.currentUser)==null?void 0:a.name)||((o=n.currentUser)==null?void 0:o.email)||"Unknown")+" ",1),e[8]||(e[8]=p("br",null,null,-1)),e[9]||(e[9]=p("strong",null,"Role:",-1)),e[10]||(e[10]=Ne()),p("span",{class:at("role-"+((l=n.currentUser)==null?void 0:l.role))},oe(((c=n.currentUser)==null?void 0:c.role)||"None"),3),e[11]||(e[11]=p("br",null,null,-1)),e[12]||(e[12]=p("strong",null,"UID:",-1)),Ne(" "+oe(((u=n.currentUser)==null?void 0:u.uid)||"None"),1)]),p("div",mB,[e[14]||(e[14]=p("label",{for:"role-select"},"Switch to Role:",-1)),Me(p("select",{id:"role-select","onUpdate:modelValue":e[2]||(e[2]=d=>n.selectedRole=d),onChange:e[3]||(e[3]=(...d)=>n.switchRole&&n.switchRole(...d))},[e[13]||(e[13]=p("option",{value:""},"-- Select Role --",-1)),(N(!0),M(Pe,null,We(n.availableRoles,d=>(N(),M("option",{key:d.value,value:d.value},oe(d.label),9,vB))),128))],544),[[vr,n.selectedRole]])]),p("div",gB,[e[15]||(e[15]=p("h5",null,"Quick Test Users:",-1)),p("div",xB,[(N(!0),M(Pe,null,We(n.testUsers,d=>{var f;return N(),M("button",{key:d.uid,onClick:h=>n.switchToUser(d),class:at(["test-user-btn",{active:((f=n.currentUser)==null?void 0:f.uid)===d.uid}])},[Ne(oe(d.name)+" ",1),p("small",null,"("+oe(d.role)+")",1)],10,yB)}),128))])]),p("div",EB,[e[16]||(e[16]=p("h5",null,"Current Permissions:",-1)),n.loadingPermissions?(N(),M("div",bB," Loading permissions... ")):(N(),M("div",_B,[(N(!0),M(Pe,null,We(n.currentPermissions,d=>(N(),M("div",{key:d.action,class:at(["permission-item",{granted:d.granted}])},[p("span",SB,oe(d.granted?"":""),1),Ne(" "+oe(d.label),1)],2))),128))]))]),e[17]||(e[17]=Xn('<div class="testing-scenarios" data-v-706a7ac7><h5 data-v-706a7ac7> Testing Scenarios:</h5><div class="scenario-list" data-v-706a7ac7><div class="scenario-item" data-v-706a7ac7><strong data-v-706a7ac7>Students Page:</strong><ul data-v-706a7ac7><li data-v-706a7ac7> Can view students</li><li data-v-706a7ac7> Can edit own caseload (CM)</li><li data-v-706a7ac7> Can edit all students (Admin)</li><li data-v-706a7ac7> Paraeducator filter works</li></ul></div><div class="scenario-item" data-v-706a7ac7><strong data-v-706a7ac7>Admin Panel:</strong><ul data-v-706a7ac7><li data-v-706a7ac7> Users management</li><li data-v-706a7ac7> Permissions matrix</li><li data-v-706a7ac7> Aide assignments</li><li data-v-706a7ac7> App settings</li></ul></div><div class="scenario-item" data-v-706a7ac7><strong data-v-706a7ac7>Navigation:</strong><ul data-v-706a7ac7><li data-v-706a7ac7> Admin button visibility</li><li data-v-706a7ac7> My Schedule button (Para)</li><li data-v-706a7ac7> Role-based menu items</li></ul></div></div></div>',1)),p("div",TB,[p("button",{onClick:e[4]||(e[4]=(...d)=>n.resetToRealUser&&n.resetToRealUser(...d)),class:"reset-btn"},"  Reset to Real User "),p("button",{onClick:e[5]||(e[5]=(...d)=>n.refreshPage&&n.refreshPage(...d)),class:"refresh-btn"},"  Refresh Page ")])])):Re("",!0)],2)):Re("",!0)}const wB=_t(uB,[["render",AB],["__scopeId","data-v-706a7ac7"]]),CB={id:"app"},IB={id:"main-content"},kB={__name:"App",setup(t){return(e,r)=>{const n=kr("router-view");return N(),M("div",CB,[p("div",IB,[rt(n)]),rt(wB)])}}},DB="modulepreload",RB=function(t){return"/"+t},U2={},X1=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=RB(l),l in U2)return;U2[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":DB,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},V2=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],$2=["K","1","2","3","4","5","6","7","8","9","10","11","12","TK","Pre-K","Ungraded"],H2=["IEP","504"],j2=["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],FB={pdf:["application/pdf"],csv:["text/csv","application/csv"],excel:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]};function Tr(t,e={}){if(typeof t!="string")return"";let r=t;return r=r.replace(/\0/g,""),e.trim!==!1&&(r=r.trim()),e.stripHtml&&(r=r.replace(/<[^>]*>/g,"")),e.escapeHtml&&(r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")),e.removeDangerous&&(r=r.replace(/[<>'"&]/g,"")),e.maxLength&&r.length>e.maxLength&&(r=r.substring(0,e.maxLength)),r}function PB(t){return typeof t!="string"?"":t.toLowerCase().trim()}function G2(t,e={}){const r=parseFloat(t);return isNaN(r)?null:e.min!==void 0&&r<e.min?e.min:e.max!==void 0&&r>e.max?e.max:e.decimals!==void 0?Math.round(r*Math.pow(10,e.decimals))/Math.pow(10,e.decimals):r}function Yf(t){if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e.toISOString().split("T")[0]}function Kv(t,e){const r=t==null||typeof t=="string"&&t.trim()===""||Array.isArray(t)&&t.length===0;return{isValid:!r,error:r?`${e} is required`:null}}function OB(t){if(!t)return{isValid:!1,error:"Email is required"};const r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t);return{isValid:r,error:r?null:"Invalid email format"}}function Yh(t,e={}){if(typeof t!="string")return{isValid:!1,error:"Value must be a string"};const{min:r=0,max:n=1/0,fieldName:s="Field"}=e,i=t.length;return i<r?{isValid:!1,error:`${s} must be at least ${r} characters`}:i>n?{isValid:!1,error:`${s} must be no more than ${n} characters`}:{isValid:!0,error:null}}function NB(t){const e=V2.includes(t);return{isValid:e,error:e?null:`Invalid role. Valid roles: ${V2.join(", ")}`}}function LB(t){const e=$2.includes(t);return{isValid:e,error:e?null:`Invalid grade. Valid grades: ${$2.join(", ")}`}}function BB(t){const e=H2.includes(t);return{isValid:e,error:e?null:`Invalid plan type. Valid types: ${H2.join(", ")}`}}function MB(t){if(!t)return{isValid:!0,error:null};const e=j2.includes(t);return{isValid:e,error:e?null:`Invalid provider type. Valid types: ${j2.join(", ")}`}}function UB(t){if(!t)return{isValid:!1,error:"SSID is required"};const r=/^\d{10}$/.test(t);return{isValid:r,error:r?null:"SSID must be exactly 10 digits"}}function Pd(t,e={}){if(!t)return{isValid:!0,error:null};const{allowedTypes:r=["pdf"],maxSize:n=10*1024*1024,fieldName:s="File"}=e;if(!r.flatMap(a=>FB[a]||[]).includes(t.type))return{isValid:!1,error:`${s} must be of type: ${r.join(", ")}`};if(t.size>n){const a=Math.round(n/1048576);return{isValid:!1,error:`${s} must be smaller than ${a}MB`}}return{isValid:!0,error:null}}function UC(t,e={}){const r=[],{isNew:n=!1}=e;if(n){const l=UB(t.ssid);l.isValid||r.push(l.error)}const s=Kv(t.firstName,"First Name");s.isValid||r.push(s.error);const i=Kv(t.lastName,"Last Name");i.isValid||r.push(i.error);const a=LB(t.grade);if(a.isValid||r.push(a.error),t.plan){const l=BB(t.plan);l.isValid||r.push(l.error)}return t.reviewDate&&(Yf(t.reviewDate)||r.push("Invalid review date format")),t.reevalDate&&(Yf(t.reevalDate)||r.push("Invalid reevaluation date format")),t.meetingDate&&(Yf(t.meetingDate)||r.push("Invalid meeting date format")),[{field:"firstName",max:50},{field:"lastName",max:50},{field:"instruction",max:2e3},{field:"assessment",max:2e3}].forEach(({field:l,max:c})=>{if(t[l]){const u=Yh(t[l],{max:c,fieldName:l});u.isValid||r.push(u.error)}}),{isValid:r.length===0,errors:r}}function VB(t){const e=[],r=Kv(t.name,"Name");r.isValid||e.push(r.error);const n=OB(t.email);n.isValid||e.push(n.error);const s=NB(t.role);if(s.isValid||e.push(s.error),t.provider){const a=MB(t.provider);a.isValid||e.push(a.error)}const i=Yh(t.name,{min:2,max:100,fieldName:"Name"});return i.isValid||e.push(i.error),{isValid:e.length===0,errors:e}}function VC(t){const e={};return["firstName","lastName","grade","plan","instruction","assessment"].forEach(i=>{t[i]&&(e[i]=Tr(t[i],{trim:!0,maxLength:i.includes("instruction")||i.includes("assessment")?2e3:100,removeDangerous:!0}))}),t.ssid&&(e.ssid=Tr(t.ssid,{trim:!0,maxLength:10})),["reviewDate","reevalDate","meetingDate"].forEach(i=>{t[i]&&(e[i]=Yf(t[i]))}),["flag1","flag2"].forEach(i=>{t[i]!==void 0&&(e[i]=!!t[i])}),Array.isArray(t.services)&&(e.services=t.services.filter(i=>typeof i=="string").map(i=>Tr(i,{trim:!0,maxLength:200})).filter(i=>i.length>0)),t.schedule&&typeof t.schedule=="object"&&(e.schedule={},Object.entries(t.schedule).forEach(([i,a])=>{a&&typeof a=="string"&&(e.schedule[i]=Tr(a,{trim:!0,maxLength:50}))})),e}function $B(t){const e={};return t.name&&(e.name=Tr(t.name,{trim:!0,maxLength:100,removeDangerous:!0})),t.email&&(e.email=PB(t.email)),t.role&&(e.role=Tr(t.role,{trim:!0,maxLength:50})),t.provider&&(e.provider=Tr(t.provider,{trim:!0,maxLength:10})),t.aeriesId&&(e.aeriesId=Tr(t.aeriesId,{trim:!0,maxLength:20})),e}function nn(t){if(typeof t!="string")return{isSafe:!0,threats:[]};const e=[];return/<script|javascript:|vbscript:|onload=|onerror=/i.test(t)&&e.push("Script injection attempt detected"),/(\bunion\b|\bselect\b|\binsert\b|\bupdate\b|\bdelete\b|\bdrop\b).*(\bfrom\b|\binto\b|\bwhere\b)/i.test(t)&&e.push("SQL injection pattern detected"),/\.\.\/|\.\.\\|%2e%2e%2f|%2e%2e%5c/i.test(t)&&e.push("Path traversal attempt detected"),t.includes("\0")&&e.push("Null byte injection detected"),{isSafe:e.length===0,threats:e}}function xs(t,e=10,r=6e4){if(typeof window>"u")return{allowed:!0,remaining:e};const n=Date.now(),s=`rateLimit_${t}`;let i=JSON.parse(localStorage.getItem(s)||"[]");return i=i.filter(a=>n-a<r),i.length>=e?{allowed:!1,remaining:0}:(i.push(n),localStorage.setItem(s,JSON.stringify(i)),{allowed:!0,remaining:e-i.length})}const HB=async(t,e,r=100,n=1e3)=>{const s=[];for(let a=0;a<t.length;a+=r)s.push(t.slice(a,a+r));const i=[];for(let a=0;a<s.length;a++)try{const o=await e(s[a]);i.push(o),a<s.length-1&&await new Promise(l=>setTimeout(l,n))}catch(o){throw console.error(`Error in batch ${a+1}:`,o),o}return i};function qv(t){if(!t||typeof t!="object")return t;if(t.toJSON&&typeof t.toJSON=="function")return t.toJSON();if(Array.isArray(t))return t.map(qv);const e={};for(const[r,n]of Object.entries(t)){if(r.toLowerCase().includes("schedule")&&typeof n=="object"&&n!==null)for(const[s,i]of Object.entries(n))i&&typeof i=="object"&&i.teacherId!==void 0&&(n[s].teacherId=String(i.teacherId));e[r]=qv(n)}return e}function wa(){const t=he([]);let e=null;async function r(){if(!e)try{const{useGoogleSheetsRealtime:l}=await X1(async()=>{const{useGoogleSheetsRealtime:c}=await Promise.resolve().then(()=>pae);return{useGoogleSheetsRealtime:c}},void 0);e=l()}catch(l){console.error("Failed to load Google Sheets sync:",l)}return e}async function n(){var u,d,f;const l=await Zr(sr(yt,"students"));t.value=l.docs.map(h=>{const v=h.data(),m=qv(v);return{id:h.id,...m}});const c=t.value.find(h=>h.aeries);c&&(console.log(" useStudents DEBUG - Student with aeries:",c),console.log(" useStudents DEBUG - aeries.schedule:",(u=c.aeries)==null?void 0:u.schedule),console.log(" useStudents DEBUG - aeries.schedule type:",typeof((d=c.aeries)==null?void 0:d.schedule)),(f=c.aeries)!=null&&f.schedule&&console.log(" useStudents DEBUG - schedule keys:",Object.keys(c.aeries.schedule)))}async function s(){return(await Zr(sr(yt,"students"))).docs.map(c=>({id:c.id,...c.data()}))}async function i(l,c){await sC(vt(yt,"students",l),c);try{const u=await r();if(u&&u.linkedSheetId.value){const d=t.value.findIndex(f=>f.id===l);d!==-1&&(t.value[d]={...t.value[d],...c}),console.log("Syncing student update to Google Sheets..."),await u.updateSheetData(t.value)}}catch(u){console.error("Failed to sync to Google Sheets:",u)}}async function a(l){await sc(vt(yt,"students",l));try{const c=await r();c&&c.linkedSheetId.value&&(t.value=t.value.filter(u=>u.id!==l),console.log("Syncing student deletion to Google Sheets..."),await c.updateSheetData(t.value))}catch(c){console.error("Failed to sync to Google Sheets:",c)}}return{students:t,fetchStudents:n,fetchAllStudents:s,updateStudent:i,deleteStudent:a,deleteAllStudents:async()=>{try{const c=(await Zr(sr(yt,"students"))).docs;return await HB(c,async u=>{const d=iC(yt);u.forEach(f=>{d.delete(f.ref)}),await d.commit()},50,2e3),{success:!0}}catch(l){throw console.error("Error deleting all students:",l),l}}}}function Ca(){const t=he({}),e=he([]);async function r(){const a=await Zr(sr(yt,"users")),o={},l=[];a.forEach(c=>{const u=c.data();o[c.id]={id:c.id,...u},l.push({id:c.id,...u}),u.aeriesId&&console.log(" Loaded user with Aeries ID:",{name:u.name,email:u.email,aeriesId:u.aeriesId,id:c.id})}),t.value=o,e.value=l,console.log(" Total users loaded:",l.length),console.log(" Users with Aeries IDs:",l.filter(c=>c.aeriesId).length)}const n=Ve(()=>({teachers:e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)),caseManagers:e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role)),speech:e.value.filter(a=>a.provider==="SLP"),ot:e.value.filter(a=>a.provider==="OT"),mh:e.value.filter(a=>a.provider==="MH"),pt:e.value.filter(a=>a.provider==="PT"),sc:e.value.filter(a=>a.provider==="SC"),tr:e.value.filter(a=>a.provider==="TR"),aud:e.value.filter(a=>a.provider==="AUD"),vi:e.value.filter(a=>a.provider==="VI"),at:e.value.filter(a=>a.provider==="AT"),dhh:e.value.filter(a=>a.provider==="DHH"),om:e.value.filter(a=>a.provider==="O&M"),bis:e.value.filter(a=>a.provider==="BIS"),hn:e.value.filter(a=>a.provider==="HN"),sw:e.value.filter(a=>a.provider==="SW")})),s=Ve(()=>e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role))),i=Ve(()=>e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)));return{users:t,userList:e,fetchUsers:r,caseManagers:s,teacherList:i,userRoles:n}}function Y1(){const t=he({}),e=he(!1);async function r(){e.value=!0;try{const d=await Zr(sr(yt,"aideSchedules")),f={};d.forEach(h=>{f[h.id]=h.data()}),t.value=f}catch(d){console.error("Error loading aide assignments:",d),t.value={}}finally{e.value=!1}}async function n(d){if(!d){console.warn("loadAideAssignment called without aideId");return}e.value=!0;try{const f=await Jr(vt(yt,"aideSchedules",d));f.exists()?t.value[d]=f.data():t.value[d]={classAssignment:{},directAssignment:[]}}catch(f){console.error("Error loading aide assignment:",f),t.value[d]={classAssignment:{},directAssignment:[]}}finally{e.value=!1}}async function s(d,f){try{const h=JSON.parse(JSON.stringify(f));await gr(vt(yt,"aideSchedules",d),h,{merge:!0}),t.value[d]=h}catch(h){throw console.error("Error saving aide assignment:",h),h}}async function i(){try{const d=Object.entries(t.value);for(const[f,h]of d){const v=JSON.parse(JSON.stringify(h));await gr(vt(yt,"aideSchedules",f),v,{merge:!0})}}catch(d){throw console.error("Error saving all aide assignments:",d),d}}function a(d,f){const h=[];return Object.entries(t.value).forEach(([v,m])=>{m.classAssignment&&m.classAssignment[f]&&(Array.isArray(m.classAssignment[f])?m.classAssignment[f]:[m.classAssignment[f]]).includes(d)&&h.push(v)}),h}function o(d){var h;const f=(h=t.value[d])==null?void 0:h.directAssignment;return Array.isArray(f)?f.length>0?f[0]:null:f||null}function l(d){return Object.keys(t.value).find(h=>{var m;const v=(m=t.value[h])==null?void 0:m.directAssignment;return Array.isArray(v)?v.includes(d):v===d})||null}function c(d,f,h){const v=[],m=t.value[d];return m&&((Array.isArray(m.directAssignment)?m.directAssignment:m.directAssignment?[m.directAssignment]:[]).forEach(b=>{if(b){const _=f.find(T=>T.id===b);_&&v.push({..._,assignmentType:"direct"})}}),Object.entries(m.classAssignment||{}).forEach(([b,_])=>{_&&(Array.isArray(_)?_:[_]).forEach(C=>{C&&f.forEach(R=>{if(R.schedule&&R.schedule[b]===C){const D=v.findIndex(w=>w.id===R.id);D===-1?v.push({...R,assignmentType:"class",period:b,teacherId:C}):(v[D].assignmentType="both",v[D].period=b,v[D].teacherId=C)}})})})),v}function u(d,f,h,v){if(!d||!f||!h||!v)return!1;const m=h.find(C=>C.id===f);if(!m)return!1;const g=t.value[d];if(!g)return!1;if((Array.isArray(g.directAssignment)?g.directAssignment:g.directAssignment?[g.directAssignment]:[]).includes(f))return!0;if(!m.schedule)return!1;const _=g.classAssignment||{};return Object.entries(m.schedule).some(([C,R])=>{const D=_[C];return D?(Array.isArray(D)?D:[D]).includes(R):!1})}return{aideAssignment:Ve(()=>t.value),loading:Ve(()=>e.value),loadAideAssignments:r,loadAideAssignment:n,saveAideAssignment:s,saveAllAideAssignments:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}function Q1(){const t=he(!1),e=he(""),r=he("");let n,s,i,a;try{n=Hl(),s=da(n,"sendTeacherFeedbackForm"),i=da(n,"syncFormResponses"),a=da(n,"getStudentFeedback")}catch(Z){console.warn("Firebase Functions not available:",Z),s=()=>Promise.reject(new Error("Functions not available")),i=()=>Promise.reject(new Error("Functions not available")),a=()=>Promise.reject(new Error("Functions not available"))}const o=sr(yt,"feedbackForms"),l=sr(yt,"feedbackResponses"),c=sr(yt,"feedbackSendLog"),u=he([]),d=he(!0),f=he([]),h=he(!0),v=he([]),m=he(!0);let g,b,_;const T=Ve(()=>{var j;return(((j=u.value)==null?void 0:j.filter(O=>O.active!==!1))||[]).sort((O,G)=>{var pe,ie;const X=(pe=O.createdAt)!=null&&pe.seconds?new Date(O.createdAt.seconds*1e3):new Date(O.createdAt);return((ie=G.createdAt)!=null&&ie.seconds?new Date(G.createdAt.seconds*1e3):new Date(G.createdAt))-X})}),C=Ve(()=>{var Z;return((Z=f.value)==null?void 0:Z.length)||0}),R=async Z=>{try{t.value=!0,e.value="";const j={title:Z.title,description:Z.description,formUrl:Z.formUrl,responseSpreadsheetId:Z.responseSpreadsheetId,active:!0,createdAt:new Date,createdBy:Z.createdBy},O=vt(o);return await gr(O,j),r.value="Feedback form created successfully!",{id:O.id,...j}}catch(j){throw console.error("Error creating feedback form:",j),e.value=j.message,j}finally{t.value=!1}},D=async(Z,j)=>{try{t.value=!0,e.value="";const O=vt(o,Z);await gr(O,{...j,updatedAt:new Date},{merge:!0}),r.value="Feedback form updated successfully!"}catch(O){throw console.error("Error updating feedback form:",O),e.value=O.message,O}finally{t.value=!1}},w=async Z=>{try{t.value=!0,e.value="";const j=vt(o,Z);await sc(j),r.value="Feedback form deleted successfully!"}catch(j){throw console.error("Error deleting feedback form:",j),e.value=j.message,j}finally{t.value=!1}},E=async Z=>{try{t.value=!0,e.value="";const j=await s(Z);if(j.data.success)return r.value=j.data.message,j.data;throw new Error(j.data.message||"Failed to send feedback form")}catch(j){throw console.error("Error sending feedback form:",j),e.value=j.message,j}finally{t.value=!1}},y=async(Z,j="Form Responses 1")=>{try{t.value=!0,e.value="";const O=await i({spreadsheetId:Z,sheetName:j});if(O.data.success)return r.value=O.data.message,O.data;throw new Error(O.data.message||"Failed to sync responses")}catch(O){throw console.error("Error syncing responses:",O),e.value=O.message,O}finally{t.value=!1}},x=async Z=>{try{t.value=!0,e.value="";const j=await a({studentId:Z});if(j.data.success)return j.data.responses;throw new Error(j.data.message||"Failed to get student feedback")}catch(j){throw console.error("Error getting student feedback:",j),e.value=j.message,j}finally{t.value=!1}},I=Z=>Ve(()=>{var j;return((j=f.value)==null?void 0:j.filter(O=>O.formId===Z))||[]}),A=Z=>Ve(()=>{var j;return((j=f.value)==null?void 0:j.filter(O=>O.spreadsheetId===Z))||[]}),k=Z=>Ve(()=>{var j;return((j=v.value)==null?void 0:j.filter(O=>O.studentId===Z))||[]}),U=()=>{e.value="",r.value=""},W=Z=>{const j=Z.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return j?j[1]:null},P=Z=>{const j=Z.match(/\/forms\/d\/([a-zA-Z0-9-_]+)/);return j?j[1]:null},B=()=>{try{g=Xf(o,Z=>{u.value=Z.docs.map(j=>({id:j.id,...j.data()})),d.value=!1},Z=>{console.warn("Error listening to feedback forms:",Z),d.value=!1}),b=Xf(l,Z=>{f.value=Z.docs.map(j=>({id:j.id,...j.data()})),h.value=!1},Z=>{console.warn("Error listening to feedback responses:",Z),h.value=!1}),_=Xf(c,Z=>{v.value=Z.docs.map(j=>({id:j.id,...j.data()})),m.value=!1},Z=>{console.warn("Error listening to send log:",Z),m.value=!1})}catch(Z){console.warn("Error initializing Firestore listeners:",Z),d.value=!1,h.value=!1,m.value=!1}},H=()=>{g&&g(),b&&b(),_&&_()};return Qt(()=>{B()}),eo(()=>{H()}),{isLoading:t,error:e,successMessage:r,formsLoading:d,responsesLoading:h,sendLogLoading:m,feedbackForms:u,feedbackResponses:f,sendLog:v,activeForms:T,totalResponses:C,createFeedbackForm:R,updateFeedbackForm:D,deleteFeedbackForm:w,sendFeedbackForm:E,syncResponses:y,getResponsesForStudent:x,getResponsesForForm:I,getResponsesForSpreadsheet:A,getSendLogForStudent:k,getTeacherEmails:async()=>{try{const Z=sr(yt,"users"),j=ps(Z,Ks("role","==","teacher"));return(await Zr(j)).docs.map(G=>{const X=G.data();return{id:G.id,name:X.name,email:X.email}})}catch(Z){throw console.error("Error getting teacher emails:",Z),Z}},clearMessages:U,extractSpreadsheetId:W,extractFormId:P}}function jB(){const t=Xo(),e=oi(),{students:r,fetchStudents:n}=wa(),{users:s,userList:i,fetchUsers:a,caseManagers:o,teacherList:l,userRoles:c}=Ca(),{loadAideAssignments:u,shouldAideSeeStudent:d,aideAssignment:f}=Y1(),{feedbackForms:h,formsLoading:v}=Q1(),m=he(!1),g=he(null),b=Ve(()=>e.currentUser),_=Ve(()=>{var k;const A=(k=b.value)==null?void 0:k.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(A)}),T=Ve(()=>{var A;return["case_manager","administrator_504_CM","sped_chair"].includes((A=b.value)==null?void 0:A.role)}),C=Ve(()=>s.value||{}),R=Ve(()=>{var A;return((A=i.value)==null?void 0:A.filter(k=>k.role==="paraeducator"))||[]}),D=async()=>{m.value=!0,g.value=null;try{const A=[n(),a(),u()];await Promise.all(A),console.log("StudentsView - loaded students:",r.value),console.log("StudentsView - loaded users:",s.value)}catch(A){console.error("Error fetching data:",A),g.value=A.message||"Failed to load data"}finally{m.value=!1}},w=A=>r.value.find(k=>k.id===A)||{},E=A=>{const k=s.value[A];return k&&(k.name||k.email)||A},y=A=>{if(!A)return"N/A";const k=s.value[A];return k&&(k.name||k.email)||A},x=A=>{var k,U;return((U=(k=A.app)==null?void 0:k.studentData)==null?void 0:U.caseManagerId)||A.caseManagerId||A.casemanager_id},I=A=>{var k,U,W,P,B;return A.schedule?A.schedule:(U=(k=A.app)==null?void 0:k.schedule)!=null&&U.periods?A.app.schedule.periods:(P=(W=A.aeries)==null?void 0:W.schedule)!=null&&P.periods?A.aeries.schedule.periods:(B=A.aeries)!=null&&B.schedule?A.aeries.schedule:null};return Qt(D),{isLoading:m,error:g,students:r,userMap:s,userList:i,userMapObj:C,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:f,feedbackForms:h,formsLoading:v,paraeducators:R,currentUser:b,isAdmin:_,showProviderView:T,fetchData:D,getStudentById:w,getUserName:E,getCaseManagerName:y,getCaseManagerId:x,getSchedule:I,shouldAideSeeStudent:d,router:t}}function pt(t,e,r=""){const n=(l,c)=>c.split(".").reduce((u,d)=>u&&u[d]!==void 0?u[d]:null,l),s=n(t.overrides,e);if(t.overrides&&s!=null&&s!=="")return s;if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const c=n(t.app,`studentData.${e}`);if(c!=null&&c!=="")return c}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const c=n(t.app,`dates.${e}`);if(c!=null&&c!=="")return c}if(["instruction","assessment"].includes(e)){const c=n(t.app,`accommodations.${e}`);if(c!=null&&c!=="")return c}const l=n(t.app,e);if(l!=null&&l!=="")return l}const i=n(t.aeries,e);if(t.aeries&&i!=null&&i!=="")return i;const a=n(t.seis,e);if(t.seis&&a!=null&&a!=="")return a;const o=n(t,e);return o!=null&&o!==""?o:r}function Lc(t,e){const r=(o,l)=>l.split(".").reduce((c,u)=>c&&c[u]!==void 0?c[u]:null,o),n=r(t.overrides,e);if(t.overrides&&n!=null&&n!=="")return"Override";if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const l=r(t.app,`studentData.${e}`);if(l!=null&&l!=="")return"App"}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const l=r(t.app,`dates.${e}`);if(l!=null&&l!=="")return"App"}if(["instruction","assessment"].includes(e)){const l=r(t.app,`accommodations.${e}`);if(l!=null&&l!=="")return"App"}const o=r(t.app,e);if(o!=null&&o!=="")return"App"}const s=r(t.aeries,e);if(t.aeries&&s!=null&&s!=="")return"Aeries";const i=r(t.seis,e);if(t.seis&&i!=null&&i!=="")return"SEIS";const a=r(t,e);return a!=null&&a!==""?"Top-level":""}function Up(t){return t?`<ul class="bullet-list">${t.split(/\n|\r|\d+\.\s+|\-\s+/).map(r=>r.trim()).filter(Boolean).map(r=>`<li>${r}</li>`).join("")}</ul>`:"<div></div>"}function GB(t){const{students:e,currentUser:r,shouldAideSeeStudent:n,userMap:s,getCaseManagerId:i,getSchedule:a}=t,o=he(!1),l=he([]),c=Os({sortBy:"firstName",cm:"all",teacher:"all",paraeducator:"all",search:"",providerView:"all",viewMode:"list"});let u=null;const d=()=>{u&&clearTimeout(u),u=setTimeout(()=>{m()},300)},f=()=>{o.value=!o.value},h=()=>{c.sortBy="firstName",c.cm="all",c.teacher="all",c.paraeducator="all",c.search="",c.providerView="all",c.viewMode="list",m()},v=()=>({paraeducator:c.paraeducator}),m=(g=c)=>{var _,T;let b=e.value;if(g.providerView==="case_manager"?b=b.filter(C=>{var R;return i(C)===((R=r.value)==null?void 0:R.uid)}):g.providerView==="service_provider"&&(b=b.filter(C=>{var y;const R=a(C),D=R?Object.entries(R).some(([x,I])=>{var A,k;return typeof I=="string"?I===((A=r.value)==null?void 0:A.uid):I&&typeof I=="object"?I.teacherId===((k=r.value)==null?void 0:k.uid):!1}):!1,w=(C.services||[]).some(x=>{var I;return x.includes((I=r.value)==null?void 0:I.uid)}),E=i(C)!==((y=r.value)==null?void 0:y.uid);return(D||w)&&E})),((_=r.value)==null?void 0:_.role)==="case_manager"&&g.providerView==="all"?b=b.filter(C=>i(C)===r.value.uid):((T=r.value)==null?void 0:T.role)==="paraeducator"&&(b=b.filter(C=>{try{return n(r.value.uid,C.id,e.value,s.value)}catch(R){return console.error("Error filtering student for aide:",R),!1}})),g.search){const C=g.search.toLowerCase();b=b.filter(R=>{const D=pt(R,"firstName")||"",w=pt(R,"lastName")||"";return`${D} ${w}`.toLowerCase().includes(C)})}g.cm&&g.cm!=="all"&&(b=b.filter(C=>i(C)===g.cm)),g.teacher&&g.teacher!=="all"&&(b=b.filter(C=>{const R=a(C);return R?Object.entries(R).some(([D,w])=>typeof w=="string"?w===g.teacher:w&&typeof w=="object"?w.teacherId===g.teacher:!1):!1})),g.paraeducator&&g.paraeducator!=="all"&&(b=b.filter(C=>{try{return n(g.paraeducator,C.id,e.value,s.value)}catch(R){return console.error("Error filtering student for paraeducator:",R),!1}})),g.sortBy&&b.sort((C,R)=>{const D=pt(C,g.sortBy)||"",w=pt(R,g.sortBy)||"";if(["reviewDate","reevalDate","meetingDate"].includes(g.sortBy)){const E=D?new Date(D).getTime():0,y=w?new Date(w).getTime():0;return E-y}return D.toString().toLowerCase().localeCompare(w.toString().toLowerCase())}),l.value=b};return er(()=>[e.value,r.value],()=>{e.value.length>0&&m()},{deep:!0}),{showFilters:o,filteredStudents:l,currentFilters:c,toggleFilters:f,clearFilters:h,applyFilters:m,debouncedApplyFilters:d,getCurrentFilters:v}}function Xv(t,e){const{aideAssignment:r,getCaseManagerId:n,getSchedule:s,userMapObj:i,currentUser:a}=t,{filteredStudents:o,currentFilters:l,getCurrentFilters:c}=e,u=he("list");er(()=>l.viewMode,C=>{u.value=C||"list"});const d=Ve(()=>o.value.filter(C=>{var R,D;return((D=(R=C.app)==null?void 0:R.flags)==null?void 0:D.flag2)||C.flag2||!1})),f=Ve(()=>{const C={},R=c(),D=R.paraeducator&&R.paraeducator!=="all";return o.value.forEach(w=>{const E=s(w);E&&Object.entries(E).forEach(([y,x])=>{C[y]||(C[y]=[]);let I;if(typeof x=="string")I=x;else if(x&&typeof x=="object")I=x.teacherId;else return;if(D){const A=r.value[R.paraeducator];A&&A.classAssignment&&A.classAssignment[y]&&(Array.isArray(A.classAssignment[y])?A.classAssignment[y]:[A.classAssignment[y]]).includes(I)&&C[y].push(w)}else C[y].push(w)})}),Object.keys(C).forEach(w=>{C[w].length===0&&delete C[w]}),C}),h=Ve(()=>{const C=c();if(!(C.paraeducator&&C.paraeducator!=="all"))return[];const D=r.value[C.paraeducator];if(!D||!D.directAssignment)return[];const w=Array.isArray(D.directAssignment)?D.directAssignment:[D.directAssignment];return o.value.filter(E=>w.includes(E.id))}),v=Ve(()=>{const C={};return o.value.forEach(R=>{const D=n(R);D&&(C[D]||(C[D]=[]),C[D].push(R))}),C}),m=C=>{u.value=C,l.viewMode=C},g=Ve(()=>{var C,R;return((C=a.value)==null?void 0:C.role)==="admin"||u.value==="testing"?!0:!(((R=a.value)==null?void 0:R.role)==="case_manager"&&u.value==="list")}),b=C=>{if(!C)return"";if(g.value){const R=i.value[C];return R&&(R.name||R.email)||C}return C};return{currentViewMode:u,studentsByClass:f,directAssignmentStudents:h,studentsByCaseManager:v,testingViewStudents:d,setViewMode:m,shouldShowUserName:g,formatUserDisplay:b,formatScheduleDisplay:C=>C?Object.entries(C).map(([R,D])=>`${R}: ${b(D)}`).join("; "):"",formatServiceProviderDisplay:C=>{var R;if(!C)return"";if(g.value){const D=i.value[C];if(D){const w=((R=D.name)==null?void 0:R.trim().split(" "))||[];return w.length>1?`${w[0][0]}. ${w.slice(1).join(" ")}`:D.name||D.email||C}}return C}}}function WB(t){const{router:e,fetchData:r}=t,n=he(null),s=he(null),i=he(!1),a=he(!1),o=he(!1),l=he(null),c=C=>{n.value=C},u=C=>{s.value=C},d=C=>{l.value=C,o.value=!0},f=()=>{console.log("Teacher feedback form sent successfully")},h=()=>{a.value=!1,r()},v=()=>{console.log("Student saved"),r()},m=()=>{e.push("/admin")},g=()=>{e.push("/testing")},b=()=>{e.push("/aide-schedule")},_=async C=>{switch(C){case"add-student":a.value=!0;break;case"export":i.value=!0;break;case"print":window.print();break;case"admin":m();break;case"testing":g();break;case"aide-schedule":b();break;case"logout":await T();break}},T=async()=>{try{const{useAuthStore:C}=await X1(async()=>{const{useAuthStore:D}=await Promise.resolve().then(()=>iB);return{useAuthStore:D}},void 0);await C().logout(),e.push("/login")}catch(C){console.error("Logout failed:",C)}};return{editingStudentId:n,emailingStudentId:s,showExport:i,showAddStudent:a,showFeedbackDialog:o,feedbackStudentId:l,editStudent:c,emailStudent:u,handleTeacherFeedback:d,handleFormSent:f,handleStudentAdded:h,handleStudentSaved:v,navigateToAdmin:m,navigateToTesting:g,navigateToAideSchedule:b,handleNavAction:_,handleLogout:T}}const zB={class:"student-nav-menu"},KB=["title"],qB={class:"nav-content"},XB={class:"nav-section"},YB={class:"nav-buttons"},QB={key:0,class:"nav-section"},JB={class:"nav-buttons"},ZB={key:1,class:"nav-section"},eM={class:"nav-buttons"},tM={key:2,class:"nav-section"},rM={class:"nav-buttons"},nM={class:"nav-section"},sM={class:"user-info"},aM={class:"user-details"},iM={key:0,class:"user-role"},oM={__name:"StudentNavMenu",props:{currentUser:{type:Object,default:null},isAdmin:{type:Boolean,default:!1}},emits:["action"],setup(t,{emit:e}){const r=e,{isDebugMenuVisible:n,canShowDebugMenu:s,toggleDebugMenu:i}=q1(),a=he(!1);function o(){a.value=!a.value}function l(){a.value=!1}function c(u){r("action",u),l()}return(u,d)=>{var f,h,v,m;return N(),M("div",zB,[p("button",{onClick:o,class:at(["hamburger-btn",{active:a.value}]),title:a.value?"Close Menu":"Open Menu"},d[8]||(d[8]=[p("span",{class:"hamburger-line"},null,-1),p("span",{class:"hamburger-line"},null,-1),p("span",{class:"hamburger-line"},null,-1)]),10,KB),a.value?(N(),M("div",{key:0,class:"nav-overlay",onClick:l})):Re("",!0),p("div",{class:at(["nav-panel",{open:a.value}])},[p("div",{class:"nav-header"},[d[9]||(d[9]=p("h3",null,"Student Management",-1)),p("button",{onClick:l,class:"close-btn"},"")]),p("div",qB,[p("div",XB,[d[13]||(d[13]=p("h4",null,"Actions",-1)),p("div",YB,[p("button",{onClick:d[0]||(d[0]=g=>c("add-student")),class:"nav-btn primary"},d[10]||(d[10]=[p("span",null,"",-1),Ne(" Add Student ")])),p("button",{onClick:d[1]||(d[1]=g=>c("export")),class:"nav-btn"},d[11]||(d[11]=[p("span",null,"",-1),Ne(" Export ")])),p("button",{onClick:d[2]||(d[2]=g=>c("print")),class:"nav-btn print-btn"},d[12]||(d[12]=[p("span",null,"",-1),Ne(" Print ")]))])]),t.isAdmin?(N(),M("div",QB,[d[16]||(d[16]=p("h4",null,"Admin",-1)),p("div",JB,[p("button",{onClick:d[3]||(d[3]=g=>c("admin")),class:"nav-btn"},d[14]||(d[14]=[p("span",null,"",-1),Ne(" Admin Panel ")])),p("button",{onClick:d[4]||(d[4]=g=>c("testing")),class:"nav-btn"},d[15]||(d[15]=[p("span",null,"",-1),Ne(" Testing ")]))])])):Re("",!0),ge(s)?(N(),M("div",ZB,[d[18]||(d[18]=p("h4",null,"Debug",-1)),p("div",eM,[p("button",{onClick:d[5]||(d[5]=(...g)=>ge(i)&&ge(i)(...g)),class:"nav-btn secondary"},[d[17]||(d[17]=p("span",null,"",-1)),Ne(" "+oe(ge(n)?"Hide":"Show")+" Debug Menu ",1)])])])):Re("",!0),((f=t.currentUser)==null?void 0:f.role)==="paraeducator"?(N(),M("div",tM,[d[20]||(d[20]=p("h4",null,"Schedule",-1)),p("div",rM,[p("button",{onClick:d[6]||(d[6]=g=>c("aide-schedule")),class:"nav-btn"},d[19]||(d[19]=[p("span",null,"",-1),Ne(" My Schedule ")]))])])):Re("",!0),p("div",nM,[d[22]||(d[22]=p("h4",null,"User",-1)),p("div",sM,[p("div",aM,[p("strong",null,oe(((h=t.currentUser)==null?void 0:h.name)||((v=t.currentUser)==null?void 0:v.email)||"User"),1),(m=t.currentUser)!=null&&m.role?(N(),M("span",iM,"("+oe(t.currentUser.role)+")",1)):Re("",!0)]),p("button",{onClick:d[7]||(d[7]=g=>c("logout")),class:"nav-btn danger"},d[21]||(d[21]=[p("span",null,"",-1),Ne(" Logout ")]))])])])],2)])}}},lM=_t(oM,[["__scopeId","data-v-53a7f24c"]]),Qf={grades:[],classServices:[{name:"SDC",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Co-teach",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"RSP",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Directed Studies",subcategories:["Directed Studies"],enabledSubcategories:["Directed Studies"]},{name:"FA",subcategories:["FA"],enabledSubcategories:["FA"]}],sdcSubcategories:[],customClassServices:[],serviceProviders:["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],customServiceProviders:[],numPeriods:7,periodLabels:["1","2","3","4","5","6","sh"]},Ms=he({...Qf}),sa=he(!1),gi=he(null);let Bc=!1;function Ia(){const t=vt(yt,"app_settings","global"),e=async()=>{if(sa.value)return new Promise(s=>{const i=er(sa,a=>{a||(i(),s(Ms.value))})});if(Bc&&!gi.value)return Ms.value;sa.value=!0,gi.value=null;try{const s=await Jr(t);return s.exists()?(Ms.value=s.data(),console.log("useAppSettings: Loaded existing settings:",Ms.value)):(Ms.value={...Qf},console.log("useAppSettings: No existing settings, using defaults:",Ms.value)),Bc=!0,Ms.value}catch(s){throw gi.value=s.message,console.error("useAppSettings: Error loading settings:",s),s}finally{sa.value=!1}},r=async s=>{sa.value=!0,gi.value=null;try{console.log("useAppSettings: Saving settings:",s),await gr(t,s),console.log("useAppSettings: Settings saved successfully"),Ms.value={...s},Bc=!0}catch(i){throw gi.value=i.message,console.error("useAppSettings: Error saving settings:",i),i}finally{sa.value=!1}},n=async()=>{sa.value=!0,gi.value=null;try{await gr(t,{...Qf}),Ms.value={...Qf},Bc=!0}catch(s){throw gi.value=s.message,s}finally{sa.value=!1}};return!Bc&&!sa.value&&e(),er(Ms,s=>{console.log("appSettings changed:",s)},{deep:!0}),{appSettings:Ms,loadAppSettings:e,saveAppSettings:r,resetAppSettings:n,loading:sa,error:gi}}const cM={class:"docs-item"},uM=["href"],dM=["href"],fM={__name:"StudentDocsCell",props:{student:{type:Object,required:!0},getDocumentUrl:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),M("td",null,[p("div",cM,[t.getDocumentUrl(t.student,"ataglancePdfUrl")?(N(),M("a",{key:0,href:t.getDocumentUrl(t.student,"ataglancePdfUrl"),target:"_blank"},"At-A-Glance",8,uM)):Re("",!0),t.getDocumentUrl(t.student,"bipPdfUrl")?(N(),M("a",{key:1,href:t.getDocumentUrl(t.student,"bipPdfUrl"),target:"_blank"},"BIP",8,dM)):Re("",!0),!t.getDocumentUrl(t.student,"ataglancePdfUrl")&&!t.getDocumentUrl(t.student,"bipPdfUrl")?(N(),M(Pe,{key:2},[Ne("")],64)):Re("",!0)])]))}},hM={class:"action-buttons"},pM=["title"],mM={__name:"StudentActionsCell",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!1}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){function r(n,s=!1){if(!(n!=null&&n.seconds))return"";const i=new Date(n.seconds*1e3);return s?i.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}):i.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})+" at "+i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"})}return(n,s)=>{var i,a,o;return N(),M("td",null,[p("div",hM,[p("button",{class:"edit-btn",onClick:s[0]||(s[0]=l=>n.$emit("edit",t.student.id)),title:"Edit Student"},""),p("button",{class:"email-btn",onClick:s[1]||(s[1]=l=>n.$emit("email",t.student.id)),title:"Email Student"},""),((i=t.currentUser)==null?void 0:i.role)==="case_manager"?(N(),M("button",{key:0,class:"teacher-feedback-btn",onClick:s[2]||(s[2]=l=>n.$emit("teacher-feedback",t.student.id)),title:"Send Teacher Feedback Form"},"")):Re("",!0)]),(o=(a=t.student)==null?void 0:a.updatedAt)!=null&&o.seconds?(N(),M("div",{key:0,class:"updated-date",title:"Last Updated: "+r(t.student.updatedAt)},oe(r(t.student.updatedAt,!0)),9,pM)):Re("",!0)])}}},vM=_t(mM,[["__scopeId","data-v-deb3b3aa"]]),gM={key:0,class:"schedule-list"},xM={class:"service-pill"},yM={key:1},EM={__name:"StudentScheduleCell",props:{student:{type:Object,required:!0},getSchedule:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),M("td",null,[t.getSchedule(t.student)?(N(),M("div",gM,[p("ul",null,[(N(!0),M(Pe,null,We(t.getSchedule(t.student),(n,s)=>(N(),M("li",{key:s},[p("span",xM,oe(s)+":",1),Ne(" "+oe(t.getUserInitialLastName(n)),1)]))),128))])])):(N(),M("div",yM,""))]))}},bM={key:0},_M={key:1},SM={key:0,class:"service-pill"},TM={key:1,class:"service-pill"},AM={key:2,class:"service-pill"},wM={key:3,class:"service-pill"},CM={key:4,class:"service-pill"},IM={key:5,class:"service-pill"},kM={__name:"StudentServicesCell",props:{student:{type:Object,required:!0},appSettings:{type:Object,required:!1},getClassServices:{type:Function,required:!0},getOtherServices:{type:Function,required:!0},hasServiceProviders:{type:Function,required:!0},getServiceProviderId:{type:Function,required:!0},getProviderFieldName:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),M("td",null,[t.getClassServices(t.student).length>0||t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(N(),M(Pe,{key:0},[t.getClassServices(t.student).length>0?(N(),M("div",bM,[r[0]||(r[0]=p("strong",null,"Class Services:",-1)),(N(!0),M(Pe,null,We(t.getClassServices(t.student),n=>(N(),M("span",{key:n,class:"service-pill"},oe(n),1))),128))])):Re("",!0),t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(N(),M("div",_M,[r[1]||(r[1]=p("strong",null,"Related Services:",-1)),(N(!0),M(Pe,null,We(t.getOtherServices(t.student),n=>(N(),M("span",{key:n,class:"service-pill"},oe(n),1))),128)),t.appSettings&&t.appSettings.value&&t.appSettings.value.serviceProviders?(N(),M(Pe,{key:0},[t.getServiceProviderId(t.student,t.getProviderFieldName(e.abbr))?(N(!0),M(Pe,{key:0},We(t.appSettings.value.serviceProviders,n=>(N(),M("span",{key:n,class:"service-pill"},oe(n)+" ("+oe(t.getUserInitialLastName(t.getServiceProviderId(t.student,t.getProviderFieldName(n))))+") ",1))),128)):Re("",!0)],64)):(N(),M(Pe,{key:1},[t.getServiceProviderId(t.student,"speechId")?(N(),M("span",SM,"SP ("+oe(t.getUserInitialLastName(t.getServiceProviderId(t.student,"speechId")))+")",1)):Re("",!0),t.getServiceProviderId(t.student,"mhId")?(N(),M("span",TM,"MH ("+oe(t.getUserInitialLastName(t.getServiceProviderId(t.student,"mhId")))+")",1)):Re("",!0),t.getServiceProviderId(t.student,"otId")?(N(),M("span",AM,"OT ("+oe(t.getUserInitialLastName(t.getServiceProviderId(t.student,"otId")))+")",1)):Re("",!0),t.getServiceProviderId(t.student,"ptId")?(N(),M("span",wM,"PT ("+oe(t.getUserInitialLastName(t.getServiceProviderId(t.student,"ptId")))+")",1)):Re("",!0),t.getServiceProviderId(t.student,"scId")?(N(),M("span",CM,"SC ("+oe(t.getUserInitialLastName(t.getServiceProviderId(t.student,"scId")))+")",1)):Re("",!0),t.getServiceProviderId(t.student,"trId")?(N(),M("span",IM,"TR ("+oe(t.getUserInitialLastName(t.getServiceProviderId(t.student,"trId")))+")",1)):Re("",!0)],64))])):Re("",!0)],64)):(N(),M(Pe,{key:1},[Ne("  ")],64))]))}},DM={key:0,class:"flag-overlay flag-preferential-seating"},RM={key:1,class:"bullet-list"},FM=["innerHTML"],PM={key:2},OM={__name:"StudentInstructionAccomCell",props:{student:{type:Object,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),M("td",{class:at(["instruction-cell",{"with-flag":t.getFlagValue(t.student,"flag1")}])},[t.getFlagValue(t.student,"flag1")?(N(),M("div",DM,"Preferential Seating")):Re("",!0),t.student&&t.formatListFromText(ge(pt)(t.student,"instruction"))!=="<div></div>"?(N(),M("div",RM,[p("div",{innerHTML:t.formatListFromText(ge(pt)(t.student,"instruction"))},null,8,FM)])):(N(),M("div",PM,""))],2))}},NM={key:0,class:"flag-overlay flag-separate-setting"},LM={key:1,class:"bullet-list"},BM=["innerHTML"],MM={key:2},UM={__name:"StudentAssessmentAccomCell",props:{student:{type:Object,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),M("td",{class:at(["instruction-cell",{"with-flag":t.getFlagValue(t.student,"flag2")}])},[t.getFlagValue(t.student,"flag2")?(N(),M("div",NM,"Separate setting")):Re("",!0),t.student&&t.formatListFromText(ge(pt)(t.student,"assessment"))!=="<div></div>"?(N(),M("div",LM,[p("div",{innerHTML:t.formatListFromText(ge(pt)(t.student,"assessment"))},null,8,BM)])):(N(),M("div",MM,""))],2))}},VM={class:"student-name"},$M={class:"std-info-subheading"},HM={key:0,class:"schedule-list"},jM={class:"service-pill"},GM={key:1},WM={key:0,class:"flag-overlay flag-separate-setting"},zM={key:1,class:"bullet-list"},KM=["innerHTML"],qM={key:2},XM={class:"student-name"},YM=["title"],QM={class:"std-info-subheading"},JM={class:"student-dates print"},ZM={key:0,class:"direct-assignment-badge"},e7={__name:"StudentTable",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})},currentUser:{type:Object,default:null},testingView:{type:Boolean,default:!1},aideSchedule:{type:Object,default:()=>({})}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,{appSettings:n,loadAppSettings:s,loading:i,error:a}=Ia();Qt(async()=>{try{console.log("StudentTable: Loading app settings..."),await s(),console.log("StudentTable: App settings loaded successfully")}catch(E){console.error("StudentTable: Error loading app settings:",E)}});function o(E){const{formatUserDisplay:y}=Xv({students:r.students,userMapObj:r.userMap,currentUser:r.currentUser});return y(E)}function l(E){return E?new Date(E).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function c(E){if(!E)return"";const y=new Date,x=new Date(E),I=Math.ceil((x-y)/(1e3*60*60*24));return I<=0?"flag-critical":I<=7?"flag-high":I<=14?"flag-medium":I<=21?"flag-mid":I<=28?"flag-low":I<=35?"flag-prep":I<=60?"flag-prep-reeval":""}function u(E){return c(pt(E,"meetingDate"))}function d(E){return c(pt(E,"reviewDate"))}function f(E){return c(pt(E,"reevalDate"))}function h(E){const{formatServiceProviderDisplay:y}=Xv({students:r.students,userMapObj:r.userMap,currentUser:r.currentUser});return y(E)}function v(E){var y,x;return((x=(y=E.app)==null?void 0:y.studentData)==null?void 0:x.caseManagerId)||E.caseManagerId||E.casemanager_id}function m(E,y){var x,I;return((I=(x=E.app)==null?void 0:x.flags)==null?void 0:I[y])||E[y]||!1}function g(E,y){var x,I;return((I=(x=E.app)==null?void 0:x.documents)==null?void 0:I[y])||E[`${y}Url`]||E[`${y}_url`]||null}function b(E){var y,x,I,A,k;if(E.schedule)return E.schedule;if((x=(y=E.app)==null?void 0:y.schedule)!=null&&x.periods)return E.app.schedule.periods;if((A=(I=E.aeries)==null?void 0:I.schedule)!=null&&A.periods)return E.aeries.schedule.periods;if((k=E.aeries)!=null&&k.schedule){const U={};return Object.entries(E.aeries.schedule).forEach(([W,P])=>{if(P&&P.teacherId){let B=W;if(n.value&&n.value.periodLabels){const L=parseInt(W.replace("period",""))-1;L>=0&&L<n.value.periodLabels.length&&(B=n.value.periodLabels[L])}let H=P.teacherId;if(r.userMap){let L=Object.values(r.userMap).find(Z=>Z.aeriesId===P.teacherId||Z.aeriesId===parseInt(P.teacherId)||Z.id===P.teacherId);if(L||(L=Object.values(r.userMap).find(Z=>{var j,O,G,X;return((j=Z.aeriesId)==null?void 0:j.toString())===((O=P.teacherId)==null?void 0:O.toString())||((G=Z.id)==null?void 0:G.toString())===((X=P.teacherId)==null?void 0:X.toString())})),L&&L.name){const Z=L.name.split(" ");if(Z.length>=2){const j=Z[0],O=Z[Z.length-1];H=`${j.charAt(0)}. ${O}`}else H=L.name}else console.warn(`Teacher not found for ID: ${P.teacherId}`)}U[B]=H}}),Object.keys(U).length>0?U:null}return null}function _(E){var x,I;const y=((I=(x=E.app)==null?void 0:x.schedule)==null?void 0:I.classServices)||E.services||[];if(i.value)return Array.isArray(y)?y.filter(A=>typeof A=="string"&&A.includes(":")):[];if(a.value)return Array.isArray(y)?y.filter(A=>typeof A=="string"&&A.includes(":")):[];if(n.value&&n.value.classServices){const A=n.value.classServices.filter(k=>k.enabledSubcategories&&k.enabledSubcategories.length>0).map(k=>k.name);return Array.isArray(y)?y.filter(k=>{if(typeof k!="string"||!k.includes(":"))return!1;const U=k.split(":")[0];return A.includes(U)}):[]}return Array.isArray(y)?y.filter(A=>typeof A=="string"&&A.includes(":")):[]}function T(E){var x,I;const y=((I=(x=E.app)==null?void 0:x.schedule)==null?void 0:I.otherServices)||E.other_services||[];return Array.isArray(y)?y.filter(A=>!!A):[]}function C(E){var A;const y=((A=E.app)==null?void 0:A.providers)||{},x=Object.values(y).some(Boolean);if(i.value||a.value){const k=E.speechId||E.speech_id||E.mhId||E.mh_id||E.otId||E.ot_id||E.ptId||E.pt_id||E.scId||E.sc_id||E.trId||E.tr_id||E.audId||E.aud_id||E.viId||E.vi_id||E.atId||E.at_id||E.dhhId||E.dhh_id||E.omId||E.om_id||E.bisId||E.bis_id||E.hnId||E.hn_id||E.swId||E.sw_id;return x||k}let I=!1;if(n.value&&n.value.serviceProviders){const k=n.value.serviceProviders,U={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"};I=k.some(W=>{const P=U[W];return E[P]||E[P.replace("Id","_id")]})}else I=E.speechId||E.speech_id||E.mhId||E.mh_id||E.otId||E.ot_id||E.ptId||E.pt_id||E.scId||E.sc_id||E.trId||E.tr_id||E.audId||E.aud_id||E.viId||E.vi_id||E.atId||E.at_id||E.dhhId||E.dhh_id||E.omId||E.om_id||E.bisId||E.bis_id||E.hnId||E.hn_id||E.swId||E.sw_id;return x||I}function R(E,y){var I,A;return((A=(I=E.app)==null?void 0:I.providers)==null?void 0:A[y])||E[y]||E[y.replace("Id","_id")]||null}function D(E){return{SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"}[E]||`${E.toLowerCase()}Id`}function w(E){if(!r.currentUser||r.currentUser.role!=="paraeducator")return!1;const y=r.currentUser.uid;let x=r.aideSchedule[y];if(!x){const I=Object.entries(r.userMap).find(([A,k])=>k.uid===y||k.email===r.currentUser.email);if(I){const[A]=I;x=r.aideSchedule[A]}}return(x==null?void 0:x.directAssignment)===E}return er(()=>r.student,E=>{var y,x,I,A,k,U,W;E&&Object.keys(E).length>0&&(form.schedule=((x=(y=E.app)==null?void 0:y.schedule)==null?void 0:x.periods)||E.schedule||((A=(I=E.aeries)==null?void 0:I.schedule)==null?void 0:A.periods)||{},console.log("StudentForm DEBUG - form.schedule:",form.schedule),console.log("StudentForm DEBUG - aeries.schedule:",(k=r.student.aeries)==null?void 0:k.schedule),console.log("StudentForm DEBUG - app.schedule.periods:",(W=(U=r.student.app)==null?void 0:U.schedule)==null?void 0:W.periods))},{immediate:!0,deep:!0}),(E,y)=>(N(),M("table",{class:at(["students-table",{"testing-view":t.testingView}])},[p("thead",null,[p("tr",null,[t.testingView?(N(),M(Pe,{key:0},[y[0]||(y[0]=p("th",{class:"print"},"Student Info",-1)),y[1]||(y[1]=p("th",{class:"print"},"Schedule",-1)),y[2]||(y[2]=p("th",{class:"print"},"Assessment Accom.",-1))],64)):(N(),M(Pe,{key:1},[y[3]||(y[3]=p("th",{class:"print"},"Student Info",-1)),y[4]||(y[4]=p("th",{class:"print"},"Services",-1)),y[5]||(y[5]=p("th",{class:"print"},"Schedule",-1)),y[6]||(y[6]=p("th",{class:"print"},"Instruction Accom.",-1)),y[7]||(y[7]=p("th",{class:"print"},"Assessment Accom.",-1)),y[8]||(y[8]=p("th",{class:"print"},"Docs",-1)),y[9]||(y[9]=p("th",{class:"print"},"Actions",-1))],64))])]),p("tbody",null,[(N(!0),M(Pe,null,We(t.students,x=>{var I;return N(),M("tr",{key:x.id},[t.testingView?(N(),M(Pe,{key:0},[p("td",null,[p("div",VM,[p("strong",null,oe(ge(pt)(x,"firstName"))+" "+oe(ge(pt)(x,"lastName")),1)]),p("div",$M,[p("div",null,"Grd: "+oe(ge(pt)(x,"grade"))+" | Prg: "+oe(ge(pt)(x,"plan")),1),p("div",null,"CM: "+oe(o(v(x))),1)])]),p("td",null,[b(x)?(N(),M("div",HM,[p("ul",null,[(N(!0),M(Pe,null,We(b(x),(A,k)=>(N(),M("li",{key:k},[p("span",jM,oe(k)+":",1),Ne(" "+oe(h(A)),1)]))),128))])])):b(x)?Re("",!0):(N(),M("div",GM,""))]),p("td",{class:at(["instruction-cell",{"with-flag":m(x,"flag2")}])},[m(x,"flag2")?(N(),M("div",WM,"Separate setting")):Re("",!0),ge(pt)(x,"assessment")?(N(),M("div",zM,[p("div",{innerHTML:ge(Up)(ge(pt)(x,"assessment"))},null,8,KM)])):(N(),M("div",qM,""))],2)],64)):(N(),M(Pe,{key:1},[p("td",null,[p("div",XM,[p("strong",null,oe(ge(pt)(x,"firstName"))+" "+oe(ge(pt)(x,"lastName")),1),p("span",{class:"data-source",title:`Data source: ${ge(Lc)(x,"firstName")}`},oe(ge(Lc)(x,"firstName")==="Override"?"":ge(Lc)(x,"firstName")==="App"?"":ge(Lc)(x,"firstName")==="Aeries"?"":ge(Lc)(x,"firstName")==="SEIS"?"":""),9,YM)]),p("div",QM,[p("div",null,"Grd: "+oe(ge(pt)(x,"grade"))+" | Prg: "+oe(ge(pt)(x,"plan")),1),p("div",null,"CM: "+oe(o(v(x))),1)]),p("div",JM,[p("span",{class:at(["badge badge-review plan-review",d(x)])},"PR: "+oe(l(ge(pt)(x,"reviewDate"))),3),p("span",{class:at(["badge badge-reeval reeval-due",f(x)])},"RE: "+oe(l(ge(pt)(x,"reevalDate"))),3),p("span",{class:at(["badge badge-meeting meeting-date",[u(x),ge(pt)(x,"meetingDate")?"date-set":""]])},"  "+oe(l(ge(pt)(x,"meetingDate"))||"Not set"),3)]),((I=t.currentUser)==null?void 0:I.role)==="paraeducator"&&w(x.id)?(N(),M("div",ZM,y[10]||(y[10]=[p("span",{class:"badge badge-direct"},"Direct Assignment",-1)]))):Re("",!0)]),rt(kM,{student:x,"app-settings":ge(n),"get-class-services":_,"get-other-services":T,"has-service-providers":C,"get-service-provider-id":R,"get-provider-field-name":D,"get-user-initial-last-name":h},null,8,["student","app-settings"]),rt(EM,{student:x,"get-schedule":b,"get-user-initial-last-name":h},null,8,["student"]),rt(OM,{student:x,"get-flag-value":m,"format-list-from-text":ge(Up)},null,8,["student","format-list-from-text"]),rt(UM,{student:x,"get-flag-value":m,"format-list-from-text":ge(Up)},null,8,["student","format-list-from-text"]),rt(fM,{student:x,"get-document-url":g},null,8,["student"]),rt(vM,{student:x,"current-user":t.currentUser,onEdit:A=>E.$emit("edit",x.id),onEmail:A=>E.$emit("email",x.id),onTeacherFeedback:A=>E.$emit("teacher-feedback",x.id)},null,8,["student","current-user","onEdit","onEmail","onTeacherFeedback"])],64))])}),128))])],2))}},gf=_t(e7,[["__scopeId","data-v-bb3c382d"]]);function t7(t,e){const{appSettings:r,loadAppSettings:n,loading:s,error:i}=Ia(),a=he(!1);Qt(async()=>{try{console.log("useStudentForm: Starting to load app settings..."),await n(),console.log("useStudentForm: App settings loaded successfully:",r.value)}catch(x){console.error("useStudentForm: Error loading app settings:",x)}});const o=Ve(()=>{var x,I;return(x=r.value)!=null&&x.numPeriods&&((I=r.value)!=null&&I.periodLabels)?r.value.periodLabels.slice(0,r.value.numPeriods):["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]}),l=Ve(()=>{var x;return(x=r.value)!=null&&x.grades&&r.value.grades.length>0?(console.log("useStudentForm: Using app settings grades:",r.value.grades),r.value.grades):(console.log("useStudentForm: Using fallback grades: [7, 8]"),["7","8"])}),c=Ve(()=>{var x;if((x=r.value)!=null&&x.classServices&&r.value.classServices.length>0){const I=r.value.classServices.filter(A=>A.enabledSubcategories&&A.enabledSubcategories.length>0);return console.log("useStudentForm: Available class services:",I.length,"services"),I}return console.log("useStudentForm: No class services available"),[]}),u=Ve(()=>{var x;return(x=r.value)!=null&&x.serviceProviders&&r.value.serviceProviders.length>0?(console.log("useStudentForm: Using app settings service providers:",r.value.serviceProviders.length,"providers"),r.value.serviceProviders):(console.log("useStudentForm: No service providers configured in app settings"),[])}),d=Ve(()=>{var x;return(x=r.value)!=null&&x.customServiceProviders?r.value.customServiceProviders:[]}),f=Ve(()=>{let x=t.users.userRoles?t.users.userRoles:{teachers:t.users.teachers||[],caseManagers:t.users.caseManagers||[],speech:t.users.speech||[],ot:t.users.ot||[],mh:t.users.mh||[]};return x.teachers&&(x={...x,teachers:x.teachers.map(I=>({...I,id:String(I.id)}))}),x}),h=x=>{var I,A,k,U,W,P,B,H,L,Z,j,O,G,X,q,pe,ie,de,z,J,me,Y,K,ee,fe,ve,Q,re,be,Te,_e,ke,Be,Ce,je,Ue,He,qe,ye,xe,Ee,Fe,Ge,tt;return{ssid:x.id||"",firstName:pt(x,"firstName")||"",lastName:pt(x,"lastName")||"",grade:pt(x,"grade")||"7",plan:pt(x,"plan")||"IEP",reviewDate:pt(x,"reviewDate")||"",reevalDate:pt(x,"reevalDate")||"",meetingDate:pt(x,"meetingDate")||"",caseManagerId:((A=(I=x.app)==null?void 0:I.studentData)==null?void 0:A.caseManagerId)||x.caseManagerId||x.casemanager_id||"",schedule:((U=(k=x.app)==null?void 0:k.schedule)==null?void 0:U.periods)||((P=(W=x.aeries)==null?void 0:W.schedule)==null?void 0:P.periods)||x.schedule||{},services:((H=(B=x.app)==null?void 0:B.schedule)==null?void 0:H.classServices)||x.services||[],speechId:((Z=(L=x.app)==null?void 0:L.providers)==null?void 0:Z.speechId)||x.speechId||x.speech_id||"",otId:((O=(j=x.app)==null?void 0:j.providers)==null?void 0:O.otId)||x.otId||x.ot_id||"",mhId:((X=(G=x.app)==null?void 0:G.providers)==null?void 0:X.mhId)||x.mhId||x.mh_id||"",ptId:((pe=(q=x.app)==null?void 0:q.providers)==null?void 0:pe.ptId)||x.ptId||x.pt_id||"",scId:((de=(ie=x.app)==null?void 0:ie.providers)==null?void 0:de.scId)||x.scId||x.sc_id||"",trId:((J=(z=x.app)==null?void 0:z.providers)==null?void 0:J.trId)||x.trId||x.tr_id||"",audId:((Y=(me=x.app)==null?void 0:me.providers)==null?void 0:Y.audId)||x.audId||x.aud_id||"",viId:((ee=(K=x.app)==null?void 0:K.providers)==null?void 0:ee.viId)||x.viId||x.vi_id||"",atId:((ve=(fe=x.app)==null?void 0:fe.providers)==null?void 0:ve.atId)||x.atId||x.at_id||"",dhhId:((re=(Q=x.app)==null?void 0:Q.providers)==null?void 0:re.dhhId)||x.dhhId||x.dhh_id||"",omId:((Te=(be=x.app)==null?void 0:be.providers)==null?void 0:Te.omId)||x.omId||x.om_id||"",bisId:((ke=(_e=x.app)==null?void 0:_e.providers)==null?void 0:ke.bisId)||x.bisId||x.bis_id||"",hnId:((Ce=(Be=x.app)==null?void 0:Be.providers)==null?void 0:Ce.hnId)||x.hnId||x.hn_id||"",swId:((Ue=(je=x.app)==null?void 0:je.providers)==null?void 0:Ue.swId)||x.swId||x.sw_id||"",instruction:pt(x,"instruction")||"",assessment:pt(x,"assessment")||"",flag1:((qe=(He=x.app)==null?void 0:He.flags)==null?void 0:qe.flag1)||x.flag1||!1,flag2:((xe=(ye=x.app)==null?void 0:ye.flags)==null?void 0:xe.flag2)||x.flag2||!1,ataglancePdfUrl:((Fe=(Ee=x.app)==null?void 0:Ee.documents)==null?void 0:Fe.ataglancePdfUrl)||x.ataglancePdfUrl||x.ataglance_pdf_url||"",bipPdfUrl:((tt=(Ge=x.app)==null?void 0:Ge.documents)==null?void 0:tt.bipPdfUrl)||x.bipPdfUrl||x.bip_pdf_url||"",bipFile:null,ataglanceFile:null,removeBipFile:!1,removeAtaglanceFile:!1}},v=Os(h(t.student||{}));er(()=>t.student,x=>{var I,A,k,U;if(x&&Object.keys(x).length>0){console.log(" useStudentForm DEBUG - newStudent.app?.schedule?.periods:",JSON.stringify((A=(I=x==null?void 0:x.app)==null?void 0:I.schedule)==null?void 0:A.periods,null,2)),console.log(" useStudentForm DEBUG - newStudent.aeries?.schedule?.periods:",JSON.stringify((U=(k=x==null?void 0:x.aeries)==null?void 0:k.schedule)==null?void 0:U.periods,null,2)),console.log(" useStudentForm DEBUG - newStudent.schedule:",JSON.stringify(x==null?void 0:x.schedule,null,2));const W=h(x);Object.assign(v,W),console.log(" useStudentForm DEBUG - Processed form.schedule:",v.schedule)}},{immediate:!0,deep:!0}),er(()=>r.value,x=>{console.log("useStudentForm: App settings watcher triggered:",x),x!=null&&x.grades&&x.grades.length>0&&(x.grades.includes(v.grade)||(v.grade=x.grades[0]||"7"))},{immediate:!0,deep:!0});const m=(x,I)=>{const A=x.target.files[0]||null;if(A){const k=Pd(A,{allowedTypes:["pdf"],maxSize:10485760,fieldName:I==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!k.isValid){alert(k.error),x.target.value="";return}const U=nn(A.name);if(!U.isSafe){alert(`File name contains potentially dangerous content: ${U.threats.join(", ")}`),x.target.value="";return}}v[I]=A},g=x=>{x.preventDefault(),x.stopPropagation(),v.removeBipFile=!0,v.bipFile=null},b=x=>{x.preventDefault(),x.stopPropagation(),v.removeAtaglanceFile=!0,v.ataglanceFile=null},_=async(x,I)=>{if(!x)return null;const A=Vv(y2,I),k=await R9(A,x);return await F9(k.ref)},T=async x=>{if(x)try{const A=new URL(x).pathname.split("/"),k=A.slice(A.indexOf("o")+1).join("/"),U=decodeURIComponent(k),W=Vv(y2,U);await P9(W),console.log("File deleted successfully:",U)}catch(I){throw console.error("Error deleting file:",I),I}},C={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"},R=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],D=x=>{var A;if((A=r.value)!=null&&A.serviceProviders&&Array.isArray(r.value.serviceProviders)){const k=(r.value.serviceProvidersDetails||R).find(U=>U.abbreviation===x);if(k)return k.name+" ("+x+")"}const I=R.find(k=>k.abbreviation===x);return I?I.name+" ("+x+")":x},w=x=>{const A={SLP:"speech",OT:"ot",MH:"mh",PT:"pt",SC:"sc",TR:"tr",AUD:"aud",VI:"vi",AT:"at",DHH:"dhh","O&M":"om",BIS:"bis",HN:"hn",SW:"sw"}[x]||x.toLowerCase();return f.value[A]||[]},E=()=>{const x=VC(v),I=UC(x,{isNew:t.mode==="new"});if(!I.isValid)return alert(`Please fix the following errors:

${I.errors.join(`
`)}`),!1;const A=["firstName","lastName","instruction","assessment"];for(const k of A)if(v[k]){const U=nn(v[k]);if(!U.isSafe)return alert(`Security threat detected in ${k}: ${U.threats.join(", ")}`),!1}return Object.assign(v,x),!0};return{form:v,isSaving:a,appSettings:r,appSettingsLoading:s,appSettingsError:i,periods:o,gradeOptions:l,availableClassServices:c,serviceProviders:u,customServiceProviders:d,userRoles:f,onFileChange:m,removeBipFile:g,removeAtaglanceFile:b,providerFieldMap:C,getProviderLabel:D,getProviderUsers:w,handleSubmit:async()=>{try{if(console.log("Form submitted:",v),a.value=!0,!E()){a.value=!1;return}const x=v.services.filter(P=>P&&P.includes(":")),I={};o.value.forEach(P=>{v.schedule[P]&&(I[P]=v.schedule[P])}),console.log("Composed data:",{classServices:x,schedule:I});let A=v.bipPdfUrl||null,k=v.ataglancePdfUrl||null;if(v.removeBipFile)console.log("Removing BIP file..."),A&&(await T(A),A=null);else if(v.bipFile){console.log("Uploading BIP file...");const P=t.mode==="edit"&&t.student.id?t.student.id:"temp";A=await _(v.bipFile,`students/${P}/bip.pdf`),console.log("BIP uploaded:",A)}if(v.removeAtaglanceFile)console.log("Removing At-A-Glance file..."),k&&(await T(k),k=null);else if(v.ataglanceFile){console.log("Uploading At-A-Glance file...");const P=t.mode==="edit"&&t.student.id?t.student.id:"temp";k=await _(v.ataglanceFile,`students/${P}/ataglance.pdf`),console.log("At-A-Glance uploaded:",k)}const U={studentData:{firstName:v.firstName,lastName:v.lastName,grade:v.grade,plan:v.plan,caseManagerId:v.caseManagerId},dates:{reviewDate:v.reviewDate,reevalDate:v.reevalDate,meetingDate:v.meetingDate},schedule:{periods:I,classServices:x},providers:{speechId:v.speechId,otId:v.otId,mhId:v.mhId,ptId:v.ptId,scId:v.scId,trId:v.trId,audId:v.audId,viId:v.viId,atId:v.atId,dhhId:v.dhhId,omId:v.omId,bisId:v.bisId,hnId:v.hnId,swId:v.swId},accommodations:{instruction:v.instruction,assessment:v.assessment},flags:{flag1:v.flag1,flag2:v.flag2},documents:{ataglancePdfUrl:k,bipPdfUrl:A}};console.log("Saving payload:",U);const W={app:U,updatedAt:Bo()};if(console.log("Saving payload:",W),t.mode==="edit"&&t.student.id)console.log("Updating existing student:",t.student.id),await gr(vt(yt,"students",t.student.id),W,{merge:!0}),console.log("Student updated successfully");else{if(console.log("Adding new student"),!v.ssid||v.ssid.trim()===""){alert("SSID is required for new students");return}const P=v.ssid.trim();W.app.studentData.ssid=P;const B=vt(sr(yt,"students"));W.createdAt=Bo(),await gr(B,W),W.id=B.id,console.log("Student added successfully with ID:",B.id,"SSID:",P)}e("saved",W),e("close")}catch(x){console.error("Error saving student:",x),alert("Error saving student. Please try again.")}finally{a.value=!1}},validateForm:E}}const r7={class:"form-col"},n7={class:"inner-grid-3"},s7={key:0,class:"ssid-field"},a7=["value"],i7=["value"],o7={__name:"StudentBasicInfo",props:{form:{type:Object,required:!0},mode:{type:String,default:"new"},gradeOptions:{type:Array,required:!0},userRoles:{type:Object,required:!0}},setup(t){return(e,r)=>(N(),M("fieldset",r7,[r[21]||(r[21]=p("legend",null,"Student Info",-1)),p("div",n7,[t.mode==="new"?(N(),M("label",s7,[r[9]||(r[9]=p("span",{class:"field-label"},"SSID (State Student ID) *",-1)),Me(p("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.ssid=n),type:"text",required:"",placeholder:"Enter student SSID",class:"ssid-input"},null,512),[[At,t.form.ssid]]),r[10]||(r[10]=p("div",{class:"field-help"},[p("strong",null,"Required:"),Ne(" This can be found in your Student Information System (SIS) such as Aeries, or in SEIS. The SSID is used to link student data across different systems. ")],-1))])):Re("",!0),p("label",null,[r[11]||(r[11]=Ne(" First Name: ")),Me(p("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.firstName=n),type:"text",required:""},null,512),[[At,t.form.firstName]])]),p("label",null,[r[12]||(r[12]=Ne(" Last Name: ")),Me(p("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>t.form.lastName=n),type:"text",required:""},null,512),[[At,t.form.lastName]])]),p("label",null,[r[13]||(r[13]=Ne(" Grade: ")),Me(p("select",{"onUpdate:modelValue":r[3]||(r[3]=n=>t.form.grade=n)},[(N(!0),M(Pe,null,We(t.gradeOptions,n=>(N(),M("option",{key:n,value:n},oe(n),9,a7))),128))],512),[[vr,t.form.grade]])]),p("label",null,[r[15]||(r[15]=Ne(" Plan Type: ")),Me(p("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>t.form.plan=n)},r[14]||(r[14]=[p("option",{value:"IEP"},"IEP",-1),p("option",{value:"504"},"504",-1)]),512),[[vr,t.form.plan]])]),p("label",null,[r[16]||(r[16]=Ne(" Review Date: ")),Me(p("input",{"onUpdate:modelValue":r[5]||(r[5]=n=>t.form.reviewDate=n),type:"date"},null,512),[[At,t.form.reviewDate]])]),p("label",null,[r[17]||(r[17]=Ne(" Reevaluation Date: ")),Me(p("input",{"onUpdate:modelValue":r[6]||(r[6]=n=>t.form.reevalDate=n),type:"date"},null,512),[[At,t.form.reevalDate]])]),p("label",null,[r[18]||(r[18]=Ne(" Meeting Date: ")),Me(p("input",{"onUpdate:modelValue":r[7]||(r[7]=n=>t.form.meetingDate=n),type:"date"},null,512),[[At,t.form.meetingDate]])]),p("label",null,[r[20]||(r[20]=Ne(" Case Manager: ")),Me(p("select",{"onUpdate:modelValue":r[8]||(r[8]=n=>t.form.caseManagerId=n)},[r[19]||(r[19]=p("option",{value:""},"-- Select Case Manager --",-1)),(N(!0),M(Pe,null,We(t.userRoles.caseManagers,n=>(N(),M("option",{key:n.id,value:n.id},oe(n.name||n.email||n.id),9,i7))),128))],512),[[vr,t.form.caseManagerId]])])])]))}},l7=_t(o7,[["__scopeId","data-v-5eadce29"]]),c7={class:"form-col"},u7={class:"inner-grid-3"},d7=["onUpdate:modelValue"],f7=["value"],h7={__name:"StudentSchedule",props:{form:{type:Object,required:!0},periods:{type:Array,required:!0},userRoles:{type:Object,required:!0}},setup(t){return(e,r)=>(N(),M("fieldset",c7,[r[1]||(r[1]=p("legend",null,"Schedule",-1)),p("div",u7,[(N(!0),M(Pe,null,We(t.periods,n=>(N(),M("label",{key:n},[Ne(oe(n)+": ",1),Me(p("select",{"onUpdate:modelValue":s=>t.form.schedule[n]=s,class:"sched"},[r[0]||(r[0]=p("option",{value:""},"--",-1)),(N(!0),M(Pe,null,We(t.userRoles.teachers,s=>(N(),M("option",{key:s.id,value:s.id},oe(s.name||s.email||s.id),9,f7))),128))],8,d7),[[vr,t.form.schedule[n]]])]))),128))])]))}},p7=_t(h7,[["__scopeId","data-v-8be54276"]]),m7={class:"checkbox-inline-group"},v7=["value","checked","onChange"],g7={__name:"ServiceCheckboxGroup",props:["label","items","modelValue"],emits:["update:modelValue"],setup(t,{emit:e}){const r=t,n=e;function s(i){const a=r.label+": "+i,o=r.modelValue?[...r.modelValue]:[],l=o.indexOf(a);l===-1?o.push(a):o.splice(l,1),n("update:modelValue",o)}return(i,a)=>(N(),M("fieldset",null,[p("legend",null,oe(t.label),1),p("div",m7,[(N(!0),M(Pe,null,We(t.items,o=>(N(),M("label",{key:o},[p("input",{type:"checkbox",value:t.label+": "+o,checked:t.modelValue&&t.modelValue.includes(t.label+": "+o),onChange:l=>s(o)},null,40,v7),Ne(" "+oe(o),1)]))),128))])]))}},x7={class:"form-col"},y7={class:"inner-grid-3"},E7={key:0,class:"loading-message"},b7={key:1,class:"error-message"},_7={key:3,class:"no-services-message"},S7={__name:"StudentClassServices",props:{form:{type:Object,required:!0},availableClassServices:{type:Array,required:!0},appSettingsLoading:{type:Boolean,default:!1},appSettingsError:{type:String,default:null}},setup(t){return(e,r)=>(N(),M("fieldset",x7,[r[4]||(r[4]=p("legend",null,"Services: classes",-1)),p("div",y7,[t.appSettingsLoading?(N(),M("div",E7,r[1]||(r[1]=[p("span",{class:"loading-spinner"},"",-1),Ne(" Loading app settings... ")]))):t.appSettingsError?(N(),M("div",b7,[r[2]||(r[2]=p("span",{class:"error-icon"},"",-1)),Ne(" Error loading app settings: "+oe(t.appSettingsError),1)])):t.availableClassServices.length>0?(N(!0),M(Pe,{key:2},We(t.availableClassServices,n=>(N(),Rn(g7,{key:n.name,label:n.name,items:n.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":r[0]||(r[0]=s=>t.form.services=s)},null,8,["label","items","modelValue"]))),128)):(N(),M("div",_7,r[3]||(r[3]=[p("span",{class:"info-icon"},"",-1),Ne(" No class services configured. "),p("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},T7=_t(S7,[["__scopeId","data-v-ee338537"]]),A7=["id","value"],w7=["value"],W2={__name:"ServiceSelect",props:["id","label","list","modelValue"],emits:["update:modelValue"],setup(t){return(e,r)=>(N(),M("label",null,[Ne(oe(t.label)+": ",1),p("select",{id:t.id,value:t.modelValue,onChange:r[0]||(r[0]=n=>e.$emit("update:modelValue",n.target.value))},[r[1]||(r[1]=p("option",{value:""},"--",-1)),(N(!0),M(Pe,null,We(t.list,n=>(N(),M("option",{key:n.id,value:n.id},oe(n.name),9,w7))),128))],40,A7)]))}},C7={class:"inner-grid-3"},I7={key:1,class:"no-services-message"},k7={__name:"StudentProviders",props:{form:{type:Object,required:!0},serviceProviders:{type:Array,required:!0},customServiceProviders:{type:Array,required:!0},providerFieldMap:{type:Object,required:!0},getProviderLabel:{type:Function,required:!0},getProviderUsers:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),M("fieldset",null,[r[1]||(r[1]=p("legend",null,"Services: providers",-1)),p("div",C7,[t.serviceProviders.length>0?(N(),M(Pe,{key:0},[(N(!0),M(Pe,null,We(t.serviceProviders,n=>(N(),Rn(W2,{key:n,id:n,label:t.getProviderLabel(n),list:t.getProviderUsers(n),modelValue:t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`]=s},null,8,["id","label","list","modelValue","onUpdate:modelValue"]))),128)),(N(!0),M(Pe,null,We(t.customServiceProviders,n=>(N(),Rn(W2,{key:n,id:n,label:n,list:[],modelValue:t.form[`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[`${n.toLowerCase()}Id`]=s},null,8,["id","label","modelValue","onUpdate:modelValue"]))),128))],64)):(N(),M("div",I7,r[0]||(r[0]=[p("span",{class:"info-icon"},"",-1),Ne(" No service providers configured. "),p("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},D7=_t(k7,[["__scopeId","data-v-faa02238"]]),R7={class:"form-col"},F7={class:"document-section"},P7={key:0,class:"current-file"},O7=["href"],N7={key:1,class:"removed-file"},L7={class:"document-section"},B7={key:0,class:"current-file"},M7=["href"],U7={key:1,class:"removed-file"},V7={__name:"StudentDocuments",props:{form:{type:Object,required:!0},student:{type:Object,default:()=>({})},mode:{type:String,default:"new"},onFileChange:{type:Function,required:!0},removeBipFile:{type:Function,required:!0},removeAtaglanceFile:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),M("fieldset",R7,[r[12]||(r[12]=p("legend",null,"Documents",-1)),p("div",F7,[p("label",null,[r[8]||(r[8]=Ne(" BIP: ")),p("input",{type:"file",accept:"application/pdf",onChange:r[0]||(r[0]=n=>t.onFileChange(n,"bipFile"))},null,32),t.form.bipPdfUrl&&!t.form.removeBipFile?(N(),M("span",P7,[r[6]||(r[6]=Ne(" Current: ")),p("a",{href:t.form.bipPdfUrl,target:"_blank"},"View BIP",8,O7),p("button",{type:"button",onClick:r[1]||(r[1]=(...n)=>t.removeBipFile&&t.removeBipFile(...n)),class:"btn-remove"},"  Remove ")])):Re("",!0),t.form.removeBipFile?(N(),M("span",N7,[r[7]||(r[7]=Ne(" BIP file will be removed ")),p("button",{type:"button",onClick:r[2]||(r[2]=n=>t.form.removeBipFile=!1),class:"btn-undo"},"  Undo ")])):Re("",!0)])]),p("div",L7,[p("label",null,[r[11]||(r[11]=Ne(" At-A-Glance PDF: ")),p("input",{type:"file",accept:"application/pdf",onChange:r[3]||(r[3]=n=>t.onFileChange(n,"ataglanceFile"))},null,32),t.form.ataglancePdfUrl&&!t.form.removeAtaglanceFile?(N(),M("span",B7,[r[9]||(r[9]=Ne(" Current: ")),p("a",{href:t.form.ataglancePdfUrl,target:"_blank"},"View At-A-Glance",8,M7),p("button",{type:"button",onClick:r[4]||(r[4]=(...n)=>t.removeAtaglanceFile&&t.removeAtaglanceFile(...n)),class:"btn-remove"},"  Remove ")])):Re("",!0),t.form.removeAtaglanceFile?(N(),M("span",U7,[r[10]||(r[10]=Ne(" At-A-Glance file will be removed ")),p("button",{type:"button",onClick:r[5]||(r[5]=n=>t.form.removeAtaglanceFile=!1),class:"btn-undo"},"  Undo ")])):Re("",!0)])])]))}},$7=_t(V7,[["__scopeId","data-v-908ab954"]]),H7={class:"form-col"},j7={class:"inner-grid-2"},G7={__name:"StudentAccommodations",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(N(),M("fieldset",H7,[r[4]||(r[4]=p("legend",null,"Accommodations",-1)),p("div",j7,[p("label",null,[r[2]||(r[2]=Ne(" Instruction: ")),Me(p("textarea",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.instruction=n),placeholder:"Enter instructional accommodations..."},null,512),[[At,t.form.instruction]])]),p("label",null,[r[3]||(r[3]=Ne(" Assessment: ")),Me(p("textarea",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.assessment=n),placeholder:"Enter assessment accommodations..."},null,512),[[At,t.form.assessment]])])])]))}},W7=_t(G7,[["__scopeId","data-v-4ce4f379"]]),z7={class:"flags-container"},K7={class:"checkbox-label"},q7={class:"checkbox-label"},X7={__name:"StudentFlags",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(N(),M("fieldset",null,[r[4]||(r[4]=p("legend",null,"Flags",-1)),p("div",z7,[p("label",K7,[Me(p("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=n=>t.form.flag1=n)},null,512),[[Et,t.form.flag1]]),r[2]||(r[2]=Ne(" Preferential seating "))]),p("label",q7,[Me(p("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=n=>t.form.flag2=n)},null,512),[[Et,t.form.flag2]]),r[3]||(r[3]=Ne(" Separate setting "))])])]))}},Y7=_t(X7,[["__scopeId","data-v-e7295a7a"]]),Q7={class:"dialog-backdrop"},J7={class:"dialog"},Z7=["disabled"],eU={__name:"StudentForm",props:{student:{type:Object,default:()=>({})},users:{type:Object,required:!0},mode:{type:String,default:"new"}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{form:s,isSaving:i,appSettingsLoading:a,appSettingsError:o,periods:l,gradeOptions:c,availableClassServices:u,serviceProviders:d,customServiceProviders:f,userRoles:h,onFileChange:v,removeBipFile:m,removeAtaglanceFile:g,providerFieldMap:b,getProviderLabel:_,getProviderUsers:T,handleSubmit:C}=t7(r,n);return(R,D)=>(N(),M("div",Q7,[p("div",J7,[p("header",null,[p("h2",null,oe(t.mode==="edit"?"Edit Student":"Add Student"),1),p("button",{onClick:D[0]||(D[0]=w=>R.$emit("close")),class:"close-btn"},"")]),p("form",{onSubmit:D[2]||(D[2]=bs((...w)=>ge(C)&&ge(C)(...w),["prevent"])),id:"student-form"},[rt(l7,{form:ge(s),mode:t.mode,"grade-options":ge(c),"user-roles":ge(h)},null,8,["form","mode","grade-options","user-roles"]),rt(p7,{form:ge(s),periods:ge(l),"user-roles":ge(h)},null,8,["form","periods","user-roles"]),rt(T7,{form:ge(s),"available-class-services":ge(u),"app-settings-loading":ge(a),"app-settings-error":ge(o)},null,8,["form","available-class-services","app-settings-loading","app-settings-error"]),rt(D7,{form:ge(s),"service-providers":ge(d),"custom-service-providers":ge(f),"provider-field-map":ge(b),"get-provider-label":ge(_),"get-provider-users":ge(T)},null,8,["form","service-providers","custom-service-providers","provider-field-map","get-provider-label","get-provider-users"]),rt($7,{form:ge(s),student:t.student,mode:t.mode,"on-file-change":ge(v),"remove-bip-file":ge(m),"remove-ataglance-file":ge(g)},null,8,["form","student","mode","on-file-change","remove-bip-file","remove-ataglance-file"]),rt(W7,{form:ge(s)},null,8,["form"]),rt(Y7,{form:ge(s)},null,8,["form"]),p("footer",null,[p("button",{type:"button",onClick:D[1]||(D[1]=w=>R.$emit("close")),class:"btn btn-secondary"}," Cancel "),p("button",{type:"submit",class:"btn btn-primary",disabled:ge(i)},oe(ge(i)?"Saving...":t.mode==="edit"?"Save":"Add Student"),9,Z7)])],32)])]))}},$C=_t(eU,[["__scopeId","data-v-91d73a2e"]]),tU={key:0},rU={key:1,class:"loading-dialog"},nU={__name:"StudentEditDialog",props:{studentId:{type:String,required:!0},users:{type:Object,required:!0}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{students:s,fetchStudents:i}=wa(),a=Ve(()=>{const l=s.value.find(c=>c.id===r.studentId);return console.log("StudentEditDialog - studentId:",r.studentId),console.log("StudentEditDialog - all students:",s.value),console.log("StudentEditDialog - found student:",l),l||{}});Qt(async()=>{s.value.length===0&&(console.log("StudentEditDialog - fetching students..."),await i())});function o(l){console.log("StudentEditDialog - student saved:",l),n("saved",l)}return(l,c)=>a.value&&Object.keys(a.value).length>0?(N(),M("div",tU,[rt($C,{student:a.value,users:t.users,mode:"edit",onClose:c[0]||(c[0]=u=>l.$emit("close")),onSaved:o},null,8,["student","users"])])):(N(),M("div",rU,c[1]||(c[1]=[p("div",{class:"dialog"},[p("header",null,[p("h2",null,"Loading Student Data...")]),p("div",{class:"content"},[p("p",null,"Please wait while we load the student information.")])],-1)])))}},sU=_t(nU,[["__scopeId","data-v-0410ea60"]]),aU={class:"dialog-backdrop"},iU={class:"dialog"},oU={class:"button-group"},lU={key:0,class:"members-list"},cU={key:0,class:"email"},uU=["value"],dU={class:"docs-option"},fU={key:0,class:"no-docs"},hU=["disabled"],pU=["disabled"],mU={__name:"StudentsEmailDialog",props:{student:{type:Object,required:!0},userMap:{type:Object,required:!0}},emits:["close"],setup(t){const e=t,{student:r,userMap:n}=e,s=he(""),i=he([]),a=he(!1),o=Ve(()=>{var b,_;if((_=(b=r.app)==null?void 0:b.schedule)!=null&&_.periods)return Object.values(r.app.schedule.periods).filter(Boolean);const g=r.schedule||{};return Object.values(g).filter(Boolean)}),l=Ve(()=>[...new Set(o.value)]),c=Ve(()=>{var b;const g=[];(b=r.app)!=null&&b.providers&&Object.entries(r.app.providers).forEach(([_,T])=>{T&&!["caseManagerId"].includes(_)&&g.push(T)});for(const _ in r)_.endsWith("_id")&&!["casemanager_id","caseManagerId"].includes(_)&&r[_]&&g.push(r[_]);return[...new Set(g)].filter(_=>!l.value.includes(_))}),u=Ve(()=>l.value.map(g=>({id:g,...n[g]||{}})).filter(g=>g&&g.email)),d=Ve(()=>c.value.map(g=>({id:g,...n[g]||{}})).filter(g=>g&&g.email)),f=Ve(()=>[...u.value,...d.value]),h=Ve(()=>{var g,b,_,T;return!!((b=(g=r.app)==null?void 0:g.documents)!=null&&b.ataglancePdfUrl||(T=(_=r.app)==null?void 0:_.documents)!=null&&T.bipPdfUrl||r.ataglancePdfUrl||r.ataglance_pdf_url||r.bipPdfUrl||r.bip_pdf_url)}),v=Ve(()=>s.value?s.value==="Individual"?i.value.length>0:!0:!1);function m(){var D,w,E,y,x,I,A,k;let g=[];s.value==="Teachers"?g=u.value:s.value==="TeachersAndService"?g=[...u.value,...d.value]:s.value==="Individual"&&(g=f.value.filter(U=>i.value.includes(U.id)));const b=g.map(U=>U.email).filter(Boolean).join(",");if(!b){alert("No email addresses found for the selected recipients.");return}const T=`${((((D=r.firstName)==null?void 0:D[0])||((w=r.first_name)==null?void 0:w[0])||"")+(((E=r.lastName)==null?void 0:E[0])||((y=r.last_name)==null?void 0:y[0])||"")).toUpperCase()} - Student Update`;let C="";if(a.value){C+=`Hi team!

Below are links to ${r.firstName||r.first_name||""} ${r.lastName||r.last_name||""}'s updated documents:

`;const U=((I=(x=r.app)==null?void 0:x.documents)==null?void 0:I.ataglancePdfUrl)||r.ataglancePdfUrl||r.ataglance_pdf_url,W=((k=(A=r.app)==null?void 0:A.documents)==null?void 0:k.bipPdfUrl)||r.bipPdfUrl||r.bip_pdf_url;U&&(C+=`At-A-Glance: ${U}
`),W&&(C+=`BIP:         ${W}
`)}else C="See attached.";const R=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(b)}&su=${encodeURIComponent(T)}&body=${encodeURIComponent(C)}`;window.open(R,"_blank","noopener")}return(g,b)=>(N(),M("div",aU,[p("div",iU,[p("header",null,[p("h2",null,"Email about "+oe(ge(r).firstName||ge(r).first_name)+" "+oe(ge(r).lastName||ge(r).last_name),1),p("button",{onClick:b[0]||(b[0]=_=>g.$emit("close")),title:"Close"},"")]),p("main",null,[p("form",{onSubmit:b[6]||(b[6]=bs(()=>{},["prevent"]))},[p("div",oU,[p("button",{type:"button",class:at(["option-button",{active:s.value==="Teachers"}]),onClick:b[1]||(b[1]=_=>s.value="Teachers")}," Teachers ",2),p("button",{type:"button",class:at(["option-button",{active:s.value==="TeachersAndService"}]),onClick:b[2]||(b[2]=_=>s.value="TeachersAndService")}," Teachers and service providers ",2),p("button",{type:"button",class:at(["option-button",{active:s.value==="Individual"}]),onClick:b[3]||(b[3]=_=>s.value="Individual")}," Individual member of the IEP team ",2)]),s.value==="Individual"?(N(),M("div",lU,[b[8]||(b[8]=p("div",null,"Select members:",-1)),(N(!0),M(Pe,null,We(f.value,_=>(N(),M("div",{key:_.id},[p("label",null,[p("span",null,[Ne(oe(_.name||_.displayName||_.email||_.id)+" ",1),_.email?(N(),M("span",cU,"("+oe(_.email)+")",1)):Re("",!0)]),Me(p("input",{type:"checkbox",value:_.id,"onUpdate:modelValue":b[4]||(b[4]=T=>i.value=T)},null,8,uU),[[Et,i.value]])])]))),128))])):Re("",!0),p("div",dU,[p("label",null,[p("span",null,[b[9]||(b[9]=Ne(" Include documents ")),h.value?Re("",!0):(N(),M("span",fU,"(No docs available)"))]),Me(p("input",{type:"checkbox","onUpdate:modelValue":b[5]||(b[5]=_=>a.value=_),disabled:!h.value},null,8,hU),[[Et,a.value]])])])],32)]),p("footer",null,[p("button",{onClick:b[7]||(b[7]=_=>g.$emit("close"))},"Cancel"),p("button",{disabled:!v.value,onClick:m},"Send",8,pU)])])]))}},vU=_t(mU,[["__scopeId","data-v-51cfe126"]]),gU={class:"dialog-backdrop"},xU={class:"dialog"},yU={class:"field-groups"},EU={class:"field-group"},bU={class:"field-group"},_U={class:"field-group"},SU={class:"field-group"},TU={class:"field-group"},AU={class:"field-group"},wU=["disabled"],CU={__name:"ExportDialog",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})}},emits:["close"],setup(t,{emit:e}){const r=t,n=e,s=oi(),i=MC(),a=he({studentData:{firstName:!0,lastName:!0,grade:!0,plan:!0,caseManagerId:!0},dates:{reviewDate:!0,reevalDate:!0,meetingDate:!0},providers:{all:!0},accommodations:{instruction:!0,assessment:!0},schedule:{periods:!0,classServices:!0},documents:{ataglancePdfUrl:!0,bipPdfUrl:!0}}),o=["speechId","otId","mhId","ptId","scId","trId","audId","viId","atId","dhhId","omId","bisId","hnId","swId"],l=Ve(()=>Object.values(a.value).some(g=>Object.values(g).some(b=>b)));function c(g){if(!g||!r.userMap[g])return"";const b=r.userMap[g];return b.name||b.email||""}function u(g){const b=i.userPermissions||[];return Array.isArray(b)&&b.includes(g)}function d(){Object.keys(a.value).forEach(g=>{Object.keys(a.value[g]).forEach(b=>{a.value[g][b]=!0})})}function f(){Object.keys(a.value).forEach(g=>{Object.keys(a.value[g]).forEach(b=>{a.value[g][b]=!1})})}function h(g){var C,R,D,w,E,y,x,I,A,k,U,W,P,B,H,L,Z,j,O,G,X,q,pe,ie,de,z,J,me,Y,K,ee,fe;const b=s.currentUser;if((b==null?void 0:b.role)==="admin"||(b==null?void 0:b.role)==="administrator"||(b==null?void 0:b.role)==="sped_chair"||(b==null?void 0:b.role)==="administrator_504_CM")return v(g);const T={};return a.value.studentData.firstName&&(T.firstName=(R=(C=g.app)==null?void 0:C.studentData)==null?void 0:R.firstName),a.value.studentData.lastName&&(T.lastName=(w=(D=g.app)==null?void 0:D.studentData)==null?void 0:w.lastName),a.value.studentData.grade&&(T.grade=(y=(E=g.app)==null?void 0:E.studentData)==null?void 0:y.grade),a.value.studentData.plan&&(T.plan=(I=(x=g.app)==null?void 0:x.studentData)==null?void 0:I.plan),a.value.studentData.caseManagerId&&(T.caseManagerId=(k=(A=g.app)==null?void 0:A.studentData)==null?void 0:k.caseManagerId),u("view_student_dates")&&(a.value.dates.reviewDate&&(T.reviewDate=(W=(U=g.app)==null?void 0:U.dates)==null?void 0:W.reviewDate),a.value.dates.reevalDate&&(T.reevalDate=(B=(P=g.app)==null?void 0:P.dates)==null?void 0:B.reevalDate),a.value.dates.meetingDate&&(T.meetingDate=(L=(H=g.app)==null?void 0:H.dates)==null?void 0:L.meetingDate)),(u("view_service_providers")||((j=(Z=g.app)==null?void 0:Z.studentData)==null?void 0:j.caseManagerId)===(b==null?void 0:b.uid)||o.some(ve=>{var Q,re;return((re=(Q=g.app)==null?void 0:Q.providers)==null?void 0:re[ve])===(b==null?void 0:b.uid)}))&&a.value.providers.all&&o.forEach(ve=>{var Q,re;T[ve]=(re=(Q=g.app)==null?void 0:Q.providers)==null?void 0:re[ve]}),u("view_accommodations")&&(a.value.accommodations.instruction&&(T.instruction=(G=(O=g.app)==null?void 0:O.accommodations)==null?void 0:G.instruction),a.value.accommodations.assessment&&(T.assessment=(q=(X=g.app)==null?void 0:X.accommodations)==null?void 0:q.assessment)),(u("view_schedule")||Object.values(((ie=(pe=g.app)==null?void 0:pe.schedule)==null?void 0:ie.periods)||{}).includes(b==null?void 0:b.uid))&&(a.value.schedule.periods&&(T.schedule=(z=(de=g.app)==null?void 0:de.schedule)==null?void 0:z.periods),a.value.schedule.classServices&&(T.classServices=(me=(J=g.app)==null?void 0:J.schedule)==null?void 0:me.classServices)),u("view_documents")&&(a.value.documents.ataglancePdfUrl&&(T.ataglancePdfUrl=(K=(Y=g.app)==null?void 0:Y.documents)==null?void 0:K.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(T.bipPdfUrl=(fe=(ee=g.app)==null?void 0:ee.documents)==null?void 0:fe.bipPdfUrl)),T}function v(g){var _,T,C,R,D,w,E,y,x,I,A,k,U,W,P,B,H,L,Z,j,O,G,X,q,pe,ie,de,z;const b={};return a.value.studentData.firstName&&(b.firstName=(T=(_=g.app)==null?void 0:_.studentData)==null?void 0:T.firstName),a.value.studentData.lastName&&(b.lastName=(R=(C=g.app)==null?void 0:C.studentData)==null?void 0:R.lastName),a.value.studentData.grade&&(b.grade=(w=(D=g.app)==null?void 0:D.studentData)==null?void 0:w.grade),a.value.studentData.plan&&(b.plan=(y=(E=g.app)==null?void 0:E.studentData)==null?void 0:y.plan),a.value.studentData.caseManagerId&&(b.caseManagerId=(I=(x=g.app)==null?void 0:x.studentData)==null?void 0:I.caseManagerId),a.value.dates.reviewDate&&(b.reviewDate=(k=(A=g.app)==null?void 0:A.dates)==null?void 0:k.reviewDate),a.value.dates.reevalDate&&(b.reevalDate=(W=(U=g.app)==null?void 0:U.dates)==null?void 0:W.reevalDate),a.value.dates.meetingDate&&(b.meetingDate=(B=(P=g.app)==null?void 0:P.dates)==null?void 0:B.meetingDate),a.value.providers.all&&o.forEach(J=>{var me,Y;b[J]=(Y=(me=g.app)==null?void 0:me.providers)==null?void 0:Y[J]}),a.value.accommodations.instruction&&(b.instruction=(L=(H=g.app)==null?void 0:H.accommodations)==null?void 0:L.instruction),a.value.accommodations.assessment&&(b.assessment=(j=(Z=g.app)==null?void 0:Z.accommodations)==null?void 0:j.assessment),a.value.schedule.periods&&(b.schedule=(G=(O=g.app)==null?void 0:O.schedule)==null?void 0:G.periods),a.value.schedule.classServices&&(b.classServices=(q=(X=g.app)==null?void 0:X.schedule)==null?void 0:q.classServices),a.value.documents.ataglancePdfUrl&&(b.ataglancePdfUrl=(ie=(pe=g.app)==null?void 0:pe.documents)==null?void 0:ie.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(b.bipPdfUrl=(z=(de=g.app)==null?void 0:de.documents)==null?void 0:z.bipPdfUrl),b}function m(){const g=r.students.map(E=>h(E)),b=[],_=[],T={firstName:"First Name",lastName:"Last Name",grade:"Grade",plan:"Plan Type",caseManagerId:"Case Manager",reviewDate:"Plan Review",reevalDate:"Reevaluation",meetingDate:"Meeting Date",speechId:"Speech",otId:"OT",mhId:"Mental Health",ptId:"PT",scId:"SC",trId:"TR",audId:"Audiology",viId:"Vision",atId:"AT",dhhId:"DHH",omId:"O&M",bisId:"BIS",hnId:"HN",swId:"SW",instruction:"Instructional Accommodation",assessment:"Assessment Accommodations",schedule:"Schedule",classServices:"Class Services",ataglancePdfUrl:"At-A-Glance",bipPdfUrl:"BIP"};Object.entries(a.value).forEach(([E,y])=>{Object.entries(y).forEach(([x,I])=>{I&&(x==="all"?o.forEach(A=>{b.push(T[A])}):b.push(T[x]))})}),g.forEach(E=>{const y=[];Object.entries(a.value).forEach(([x,I])=>{Object.entries(I).forEach(([A,k])=>{if(k)if(A==="all")o.forEach(U=>{const W=E[U]||"";y.push(W?c(W):"")});else{let U=E[A]||"";A.endsWith("Id")?U=U?c(U):"":A==="classServices"?U=Array.isArray(E.classServices)?E.classServices.join(", "):"":A==="schedule"&&(U=E.schedule?Object.entries(E.schedule).map(([W,P])=>`${W}: ${c(P)}`).join("; "):""),y.push(U)}})}),_.push(y)});const C=[b.join(","),..._.map(E=>E.map(y=>`"${String(y).replace(/"/g,'""')}"`).join(","))].join(`
`),R=new Blob([C],{type:"text/csv"}),D=window.URL.createObjectURL(R),w=document.createElement("a");w.href=D,w.download="students-export.csv",w.click(),window.URL.revokeObjectURL(D),n("close")}return(g,b)=>(N(),M("div",gU,[p("div",xU,[p("header",null,[b[17]||(b[17]=p("h2",null,"Export Students",-1)),p("button",{onClick:b[0]||(b[0]=_=>g.$emit("close")),class:"close-btn"},"")]),p("main",null,[p("p",null,"Export "+oe(t.students.length)+" students",1),p("div",yU,[p("div",EU,[b[23]||(b[23]=p("h4",null,"Student Info",-1)),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[1]||(b[1]=_=>a.value.studentData.firstName=_)},null,512),[[Et,a.value.studentData.firstName]]),b[18]||(b[18]=Ne(" First Name "))]),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[2]||(b[2]=_=>a.value.studentData.lastName=_)},null,512),[[Et,a.value.studentData.lastName]]),b[19]||(b[19]=Ne(" Last Name "))]),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[3]||(b[3]=_=>a.value.studentData.grade=_)},null,512),[[Et,a.value.studentData.grade]]),b[20]||(b[20]=Ne(" Grade "))]),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[4]||(b[4]=_=>a.value.studentData.plan=_)},null,512),[[Et,a.value.studentData.plan]]),b[21]||(b[21]=Ne(" Plan Type "))]),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[5]||(b[5]=_=>a.value.studentData.caseManagerId=_)},null,512),[[Et,a.value.studentData.caseManagerId]]),b[22]||(b[22]=Ne(" Case Manager "))])]),p("div",bU,[b[27]||(b[27]=p("h4",null,"Important Dates",-1)),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[6]||(b[6]=_=>a.value.dates.reviewDate=_)},null,512),[[Et,a.value.dates.reviewDate]]),b[24]||(b[24]=Ne(" Plan Review "))]),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[7]||(b[7]=_=>a.value.dates.reevalDate=_)},null,512),[[Et,a.value.dates.reevalDate]]),b[25]||(b[25]=Ne(" Reevaluation "))]),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[8]||(b[8]=_=>a.value.dates.meetingDate=_)},null,512),[[Et,a.value.dates.meetingDate]]),b[26]||(b[26]=Ne(" Meeting Date "))])]),p("div",_U,[b[29]||(b[29]=p("h4",null,"Related Services",-1)),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[9]||(b[9]=_=>a.value.providers.all=_)},null,512),[[Et,a.value.providers.all]]),b[28]||(b[28]=Ne(" All Service Providers "))])]),p("div",SU,[b[32]||(b[32]=p("h4",null,"Accommodations",-1)),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[10]||(b[10]=_=>a.value.accommodations.instruction=_)},null,512),[[Et,a.value.accommodations.instruction]]),b[30]||(b[30]=Ne(" Instructional "))]),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[11]||(b[11]=_=>a.value.accommodations.assessment=_)},null,512),[[Et,a.value.accommodations.assessment]]),b[31]||(b[31]=Ne(" Assessment "))])]),p("div",TU,[b[35]||(b[35]=p("h4",null,"Schedule & Services",-1)),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[12]||(b[12]=_=>a.value.schedule.periods=_)},null,512),[[Et,a.value.schedule.periods]]),b[33]||(b[33]=Ne(" Class Schedule "))]),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[13]||(b[13]=_=>a.value.schedule.classServices=_)},null,512),[[Et,a.value.schedule.classServices]]),b[34]||(b[34]=Ne(" Class Services "))])]),p("div",AU,[b[38]||(b[38]=p("h4",null,"Documents",-1)),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[14]||(b[14]=_=>a.value.documents.ataglancePdfUrl=_)},null,512),[[Et,a.value.documents.ataglancePdfUrl]]),b[36]||(b[36]=Ne(" At-A-Glance "))]),p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":b[15]||(b[15]=_=>a.value.documents.bipPdfUrl=_)},null,512),[[Et,a.value.documents.bipPdfUrl]]),b[37]||(b[37]=Ne(" BIP "))])])]),p("div",{class:"quick-select"},[p("button",{onClick:d},"Select All"),p("button",{onClick:f},"Deselect All")])]),p("footer",null,[p("button",{onClick:b[16]||(b[16]=_=>g.$emit("close")),class:"btn-secondary"},"Cancel"),p("button",{onClick:m,class:"btn-primary",disabled:!l.value},"Export",8,wU)])])]))}},IU=_t(CU,[["__scopeId","data-v-9cb02217"]]),kU={class:"modal-body"},DU={class:"student-info"},RU={class:"case-manager-info"},FU={class:"form-group"},PU={key:0,class:"no-forms-message"},OU={key:1,class:"form-selection"},NU=["id","value"],LU=["for"],BU={class:"form-title"},MU={class:"form-details"},UU={key:0,class:"form-description"},VU={class:"form-date"},$U={key:0,class:"form-group"},HU={class:"teacher-selection"},jU={key:0,class:"no-teachers-message"},GU={key:1,class:"teacher-checkboxes"},WU=["id","value"],zU=["for"],KU={class:"teacher-email"},qU={key:1,class:"form-group"},XU={class:"send-options"},YU={class:"option-item"},QU={class:"option-item"},JU={class:"modal-footer"},ZU=["disabled"],eV={key:0},tV={key:1},rV={__name:"TeacherFeedbackDialog",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!0}},emits:["close","form-sent"],setup(t,{emit:e}){const r=t,n=e,{activeForms:s,sendFeedbackForm:i}=Q1(),{users:a}=Ca(),o=he(""),l=he([]),c=he("copy"),u=he(""),d=he("success"),f=he(!1),h=Ve(()=>s.value||[]),v=Ve(()=>{var D,w,E;if(!r.student||!a.value)return[];const R=new Set;return(w=(D=r.student.app)==null?void 0:D.schedule)!=null&&w.periods&&Object.values(r.student.app.schedule.periods).forEach(y=>{y&&R.add(y)}),(E=r.student.aeries)!=null&&E.schedule&&Object.values(r.student.aeries.schedule).forEach(y=>{y!=null&&y.teacherId&&R.add(y.teacherId)}),Array.from(R).map(y=>a.value.find(x=>x.id===y)).filter(Boolean).filter(y=>y.role==="teacher")}),m=Ve(()=>h.value.find(R=>R.id===o.value)),g=Ve(()=>o.value&&l.value.length>0&&c.value),b=R=>R?(R.seconds?new Date(R.seconds*1e3):new Date(R)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",_=async()=>{if(g.value)try{f.value=!0,u.value="";const R=m.value,D=l.value.map(E=>E.email),w=l.value.map(E=>E.name||E.email).join(", ");if(c.value==="copy")await navigator.clipboard.writeText(R.formUrl),u.value=`Form link copied to clipboard! Send to: ${w}`,d.value="success",T(R,l.value);else if(c.value==="email"){try{const E=await i({formUrl:R.formUrl,studentId:r.student.id,teacherEmails:D,formTitle:R.title,customMessage:null});if(E.success)u.value=`Successfully sent to ${E.sent} teachers`,E.failed>0&&(u.value+=` (${E.failed} failed)`),d.value="success";else throw new Error("Failed to send emails")}catch(E){console.error("Email sending failed:",E),u.value="Failed to send emails. Generating mailto link instead.",d.value="error";const y=`Teacher Feedback Request - ${r.student.firstName} ${r.student.lastName}`,x=`Dear Teachers,

I am requesting your feedback for ${r.student.firstName} ${r.student.lastName} (Grade ${r.student.grade}).

Please complete the following feedback form:
${R.formUrl}

Form: ${R.title}

Thank you for your time and feedback.

Best regards,
${r.currentUser.name||r.currentUser.email}
Case Manager`,I=`mailto:${D.join(",")}?subject=${encodeURIComponent(y)}&body=${encodeURIComponent(x)}`;window.open(I,"_blank"),u.value=`Email client opened for: ${w}`,d.value="success"}T(R,l.value)}n("form-sent",{form:R,student:r.student,teachers:l.value,method:c.value})}catch(R){console.error("Error sending form:",R),u.value="Failed to send form. Please try again.",d.value="error"}finally{f.value=!1}},T=(R,D)=>{const w=JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]"),E={id:`${R.id}_${r.student.id}_${Date.now()}`,formId:R.id,formTitle:R.title,formUrl:R.formUrl,studentId:r.student.id,studentName:`${r.student.firstName} ${r.student.lastName}`,caseManagerId:r.currentUser.uid,caseManagerName:r.currentUser.name||r.currentUser.email,teachers:D.map(y=>({id:y.id,name:y.name,email:y.email})),sentAt:new Date().toISOString(),method:c.value};w.push(E),localStorage.setItem("casemanage_sent_forms",JSON.stringify(w))},C=()=>{n("close")};return Qt(()=>{o.value="",l.value=[],c.value="copy",u.value=""}),(R,D)=>{var w,E;return N(),M("div",{class:"modal-overlay",onClick:C},[p("div",{class:"modal-content",onClick:D[4]||(D[4]=bs(()=>{},["stop"]))},[p("div",{class:"modal-header"},[D[5]||(D[5]=p("h3",null,"Send Teacher Feedback Form",-1)),p("button",{onClick:C,class:"close-btn"},"")]),p("div",kU,[p("div",DU,[p("h4",null,oe(t.student.firstName)+" "+oe(t.student.lastName)+" (Grade "+oe(t.student.grade)+")",1),p("p",RU,"Case Manager: "+oe(((w=t.currentUser)==null?void 0:w.name)||((E=t.currentUser)==null?void 0:E.email)),1)]),p("div",FU,[D[7]||(D[7]=p("label",null,"Select Feedback Form to Send:",-1)),h.value.length===0?(N(),M("div",PU,D[6]||(D[6]=[p("p",null,"No feedback forms available. Forms must be created in the Admin Panel first.",-1),p("p",null,[p("em",null,"Contact your administrator to create feedback forms.")],-1)]))):(N(),M("div",OU,[(N(!0),M(Pe,null,We(h.value,y=>(N(),M("div",{key:y.id,class:"form-option"},[Me(p("input",{type:"radio",id:y.id,value:y.id,"onUpdate:modelValue":D[0]||(D[0]=x=>o.value=x)},null,8,NU),[[kn,o.value]]),p("label",{for:y.id,class:"form-option-label"},[p("div",BU,oe(y.title),1),p("div",MU,[y.description?(N(),M("span",UU,oe(y.description),1)):Re("",!0),p("span",VU,"Created: "+oe(b(y.createdAt)),1)])],8,LU)]))),128))]))]),o.value?(N(),M("div",$U,[D[9]||(D[9]=p("label",null,"Select Teachers to Send Form To:",-1)),p("div",HU,[v.value.length===0?(N(),M("div",jU,D[8]||(D[8]=[p("p",null,"No teachers found for this student's schedule.",-1)]))):(N(),M("div",GU,[(N(!0),M(Pe,null,We(v.value,y=>(N(),M("div",{key:y.id,class:"checkbox-item"},[Me(p("input",{type:"checkbox",id:`teacher-${y.id}`,value:y,"onUpdate:modelValue":D[1]||(D[1]=x=>l.value=x)},null,8,WU),[[Et,l.value]]),p("label",{for:`teacher-${y.id}`},[Ne(oe(y.name||y.email)+" ",1),p("span",KU,"("+oe(y.email)+")",1)],8,zU)]))),128))]))])])):Re("",!0),o.value&&l.value.length>0?(N(),M("div",qU,[D[12]||(D[12]=p("label",null,"Send Method:",-1)),p("div",XU,[p("div",YU,[Me(p("input",{type:"radio",id:"copy-link",value:"copy","onUpdate:modelValue":D[2]||(D[2]=y=>c.value=y)},null,512),[[kn,c.value]]),D[10]||(D[10]=p("label",{for:"copy-link"},"Copy form link to clipboard",-1))]),p("div",QU,[Me(p("input",{type:"radio",id:"email-link",value:"email","onUpdate:modelValue":D[3]||(D[3]=y=>c.value=y)},null,512),[[kn,c.value]]),D[11]||(D[11]=p("label",{for:"email-link"},"Generate email with form link",-1))])])])):Re("",!0),u.value?(N(),M("div",{key:2,class:at(["status-message",d.value])},oe(u.value),3)):Re("",!0)]),p("div",JU,[p("button",{onClick:C,class:"secondary-btn"},"Cancel"),p("button",{onClick:_,class:"primary-btn",disabled:!g.value||f.value},[f.value?(N(),M("span",eV,"Sending...")):(N(),M("span",tV,oe(c.value==="copy"?"Copy Link":"Generate Email"),1))],8,ZU)])])])}}},nV=_t(rV,[["__scopeId","data-v-bf0569a5"]]),sV={class:"students-view"},aV={class:"page-header"},iV={class:"header-left"},oV={class:"search-container"},lV={class:"header-controls"},cV={key:0,class:"filter-group"},uV={class:"radio-group"},dV={class:"filter-group"},fV={class:"radio-group"},hV={key:0,class:"filters-panel"},pV={class:"filters-content"},mV={class:"filter-group"},vV={class:"filter-group"},gV=["value"],xV={class:"filter-group"},yV=["value"],EV={class:"filter-group"},bV=["value"],_V={class:"content"},SV={key:0},TV={key:1,class:"view-container"},AV={key:0,class:"group-section"},wV={class:"group-header"},CV={key:2,class:"view-section"},IV={__name:"StudentsView",setup(t){const e=jB(),r=GB(e),n=Xv(e,r),s=WB(e),{students:i,userMapObj:a,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:u,paraeducators:d,currentUser:f,isAdmin:h,showProviderView:v,getStudentById:m}=e,{showFilters:g,filteredStudents:b,currentFilters:_,toggleFilters:T,clearFilters:C,applyFilters:R,debouncedApplyFilters:D}=r,{currentViewMode:w,studentsByClass:E,directAssignmentStudents:y,testingViewStudents:x}=n,{editingStudentId:I,emailingStudentId:A,showExport:k,showAddStudent:U,showFeedbackDialog:W,feedbackStudentId:P,editStudent:B,emailStudent:H,handleTeacherFeedback:L,handleFormSent:Z,handleStudentAdded:j,handleStudentSaved:O,handleNavAction:G}=s;return(X,q)=>{var pe,ie,de;return N(),M("div",sV,[rt(lM,{"current-user":ge(f),"is-admin":ge(h),onAction:ge(G)},null,8,["current-user","is-admin","onAction"]),p("div",aV,[p("div",iV,[q[29]||(q[29]=p("h1",null,"Student Management",-1)),p("div",oV,[Me(p("input",{type:"text","onUpdate:modelValue":q[0]||(q[0]=z=>ge(_).search=z),onInput:q[1]||(q[1]=(...z)=>ge(D)&&ge(D)(...z)),placeholder:"Search students...",class:"search-input"},null,544),[[At,ge(_).search]])])]),p("div",lV,[p("button",{onClick:q[2]||(q[2]=(...z)=>ge(T)&&ge(T)(...z)),class:at(["filter-toggle-btn",{active:ge(g)}])},q[30]||(q[30]=[p("span",null,"",-1),Ne(" Filters ")]),2),ge(v)?(N(),M("div",cV,[p("div",uV,[p("label",{class:at(["radio-btn",{active:ge(_).providerView==="all"}])},[Me(p("input",{type:"radio","onUpdate:modelValue":q[3]||(q[3]=z=>ge(_).providerView=z),value:"all",onChange:q[4]||(q[4]=(...z)=>ge(R)&&ge(R)(...z))},null,544),[[kn,ge(_).providerView]]),q[31]||(q[31]=Ne(" All "))],2),p("label",{class:at(["radio-btn",{active:ge(_).providerView==="case_manager"}])},[Me(p("input",{type:"radio","onUpdate:modelValue":q[5]||(q[5]=z=>ge(_).providerView=z),value:"case_manager",onChange:q[6]||(q[6]=(...z)=>ge(R)&&ge(R)(...z))},null,544),[[kn,ge(_).providerView]]),q[32]||(q[32]=Ne(" CM "))],2),p("label",{class:at(["radio-btn",{active:ge(_).providerView==="service_provider"}])},[Me(p("input",{type:"radio","onUpdate:modelValue":q[7]||(q[7]=z=>ge(_).providerView=z),value:"service_provider",onChange:q[8]||(q[8]=(...z)=>ge(R)&&ge(R)(...z))},null,544),[[kn,ge(_).providerView]]),q[33]||(q[33]=Ne(" SP "))],2)])])):Re("",!0),p("div",dV,[p("div",fV,[p("label",{class:at(["radio-btn",{active:ge(_).viewMode==="list"}])},[Me(p("input",{type:"radio","onUpdate:modelValue":q[9]||(q[9]=z=>ge(_).viewMode=z),value:"list",onChange:q[10]||(q[10]=z=>ge(R)())},null,544),[[kn,ge(_).viewMode]]),q[34]||(q[34]=Ne(" List "))],2),p("label",{class:at(["radio-btn",{active:ge(_).viewMode==="class"}])},[Me(p("input",{type:"radio","onUpdate:modelValue":q[11]||(q[11]=z=>ge(_).viewMode=z),value:"class",onChange:q[12]||(q[12]=z=>ge(R)())},null,544),[[kn,ge(_).viewMode]]),q[35]||(q[35]=Ne(" Class "))],2),p("label",{class:at(["radio-btn",{active:ge(_).viewMode==="testing"}])},[Me(p("input",{type:"radio","onUpdate:modelValue":q[13]||(q[13]=z=>ge(_).viewMode=z),value:"testing",onChange:q[14]||(q[14]=z=>ge(R)())},null,544),[[kn,ge(_).viewMode]]),q[36]||(q[36]=Ne(" Test "))],2)])]),p("button",{onClick:q[15]||(q[15]=(...z)=>ge(C)&&ge(C)(...z)),class:"reset-btn",title:"Reset all filters"},"  ")])]),ge(g)?(N(),M("div",hV,[p("div",pV,[p("div",mV,[q[38]||(q[38]=p("label",null,"Sort By",-1)),Me(p("select",{"onUpdate:modelValue":q[16]||(q[16]=z=>ge(_).sortBy=z),onChange:q[17]||(q[17]=z=>ge(R)()),class:"filter-select"},q[37]||(q[37]=[Xn('<option value="firstName" data-v-ba39accb>First Name</option><option value="lastName" data-v-ba39accb>Last Name</option><option value="grade" data-v-ba39accb>Grade</option><option value="plan" data-v-ba39accb>Plan</option><option value="reviewDate" data-v-ba39accb>Review Date</option><option value="reevalDate" data-v-ba39accb>Re-evaluation Date</option><option value="meetingDate" data-v-ba39accb>Meeting Date</option>',7)]),544),[[vr,ge(_).sortBy]])]),p("div",vV,[q[40]||(q[40]=p("label",null,"Case Manager",-1)),Me(p("select",{"onUpdate:modelValue":q[18]||(q[18]=z=>ge(_).cm=z),onChange:q[19]||(q[19]=z=>ge(R)()),class:"filter-select"},[q[39]||(q[39]=p("option",{value:"all"},"All Case Managers",-1)),(N(!0),M(Pe,null,We(ge(o),z=>(N(),M("option",{key:z.id,value:z.id},oe(z.name||z.email||z.id),9,gV))),128))],544),[[vr,ge(_).cm]])]),p("div",xV,[q[42]||(q[42]=p("label",null,"Teacher",-1)),Me(p("select",{"onUpdate:modelValue":q[20]||(q[20]=z=>ge(_).teacher=z),onChange:q[21]||(q[21]=z=>ge(R)()),class:"filter-select"},[q[41]||(q[41]=p("option",{value:"all"},"All Teachers",-1)),(N(!0),M(Pe,null,We(ge(l),z=>(N(),M("option",{key:z.id,value:z.id},oe(z.name||z.email||z.id),9,yV))),128))],544),[[vr,ge(_).teacher]])]),p("div",EV,[q[44]||(q[44]=p("label",null,"Paraeducator",-1)),Me(p("select",{"onUpdate:modelValue":q[22]||(q[22]=z=>ge(_).paraeducator=z),onChange:q[23]||(q[23]=z=>ge(R)()),class:"filter-select"},[q[43]||(q[43]=p("option",{value:"all"},"All Paraeducators",-1)),(N(!0),M(Pe,null,We(ge(d),z=>(N(),M("option",{key:z.id,value:z.id},oe(z.name||z.email||z.id),9,bV))),128))],544),[[vr,ge(_).paraeducator]])])])])):Re("",!0),p("div",_V,[ge(w)==="list"?(N(),M("div",SV,[rt(gf,{students:ge(b),"user-map":ge(a),"current-user":ge(f),"aide-schedule":((pe=ge(f))==null?void 0:pe.role)==="paraeducator"?ge(u):{},onEdit:ge(B),onEmail:ge(H),onTeacherFeedback:ge(L)},null,8,["students","user-map","current-user","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):ge(w)==="class"?(N(),M("div",TV,[ge(y).length>0?(N(),M("div",AV,[q[45]||(q[45]=p("h3",{class:"group-header direct-assignment-header"},"Direct Assignment",-1)),rt(gf,{students:ge(y),"user-map":ge(a),"current-user":ge(f),"aide-schedule":((ie=ge(f))==null?void 0:ie.role)==="paraeducator"?ge(u):{},onEdit:ge(B),onEmail:ge(H),onTeacherFeedback:ge(L)},null,8,["students","user-map","current-user","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Re("",!0),(N(!0),M(Pe,null,We(ge(E),(z,J)=>{var me;return N(),M("div",{key:J,class:"group-section"},[p("h3",wV,"Period "+oe(J),1),rt(gf,{students:z,"user-map":ge(a),"current-user":ge(f),"aide-schedule":((me=ge(f))==null?void 0:me.role)==="paraeducator"?ge(u):{},onEdit:ge(B),onEmail:ge(H),onTeacherFeedback:ge(L)},null,8,["students","user-map","current-user","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])}),128))])):ge(w)==="testing"?(N(),M("div",CV,[rt(gf,{students:ge(x),"user-map":ge(a),"current-user":ge(f),"testing-view":!0,"aide-schedule":((de=ge(f))==null?void 0:de.role)==="paraeducator"?ge(u):{},onEdit:ge(B),onEmail:ge(H),onTeacherFeedback:ge(L)},null,8,["students","user-map","current-user","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Re("",!0)]),ge(I)?(N(),Rn(sU,{key:1,"student-id":ge(I),users:{userRoles:ge(c)},onClose:q[24]||(q[24]=z=>I.value=null),onSaved:ge(O)},null,8,["student-id","users","onSaved"])):Re("",!0),ge(A)?(N(),Rn(vU,{key:2,student:ge(m)(ge(A)),"user-map":ge(a),onClose:q[25]||(q[25]=z=>A.value=null)},null,8,["student","user-map"])):Re("",!0),ge(k)?(N(),Rn(IU,{key:3,students:ge(i),"user-map":ge(a),onClose:q[26]||(q[26]=z=>k.value=!1)},null,8,["students","user-map"])):Re("",!0),ge(U)?(N(),Rn($C,{key:4,users:{userRoles:ge(c)},onClose:q[27]||(q[27]=z=>U.value=!1),onSaved:ge(j)},null,8,["users","onSaved"])):Re("",!0),ge(W)?(N(),Rn(nV,{key:5,student:ge(m)(ge(P)),"current-user":ge(f),onClose:q[28]||(q[28]=z=>W.value=!1),onFormSent:ge(Z)},null,8,["student","current-user","onFormSent"])):Re("",!0)])}}},z2=_t(IV,[["__scopeId","data-v-ba39accb"]]),kV={class:"login-container"},DV={__name:"LoginView",setup(t){const e=Xo(),r=async()=>{try{const{user:n}=await MA(Gs,tL),s=vt(yt,"users",n.uid);(await Jr(s)).exists()||await gr(s,{name:n.displayName||"",email:n.email,role:"admin"}),e.push({name:"Home"})}catch(n){console.error("Login failed:",n),alert("Login failed: "+n.message)}};return(n,s)=>(N(),M("div",kV,[s[0]||(s[0]=p("h1",null,"Case Manager Portal",-1)),s[1]||(s[1]=p("p",null,"Please sign in with your Google account:",-1)),p("button",{onClick:r,class:"primary-btn"}," Sign in with Google ")]))}},RV=_t(DV,[["__scopeId","data-v-d9b5a53b"]]),FV={name:"TabBar",props:{tabs:{type:Array,required:!0,default:()=>[]},activeTab:{type:String,required:!0}},emits:["tab-change"]},PV={class:"admin-tab-bar"},OV=["onClick"];function NV(t,e,r,n,s,i){return N(),M("div",PV,[(N(!0),M(Pe,null,We(r.tabs,a=>(N(),M("button",{key:a.key,class:at({active:r.activeTab===a.key}),onClick:o=>t.$emit("tab-change",a.key)},oe(a.label),11,OV))),128))])}const LV=_t(FV,[["render",NV],["__scopeId","data-v-78ba99cd"]]),BV={name:"UserAddForm",setup(){const t=da(eL,"addUserWithRole"),e=ro(),r=Os({name:"",email:"",role:"",provider:"",aeriesId:""}),n=he(null),s=he(""),i=he(!1),a=he(null),o=Xh,{appSettings:l,loadAppSettings:c}=Ia(),u=Ve(()=>{if(l&&l.value&&l.value.serviceProviders){const T=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}];return l.value.serviceProviders.map(C=>T.find(R=>R.abbreviation===C)||{name:C,abbreviation:C})}return[]}),d=(T,C=!1)=>{s.value=T,i.value=C,setTimeout(()=>{s.value="",i.value=!1},5e3)},f=async(T,C,R,D,w)=>{try{const E={name:T,email:C,role:R,provider:D,aeriesId:w,createdAt:new Date,status:"active"};return{success:!0,userId:(await yN(sr(e,"users"),E)).id}}catch(E){throw E}},h=async(T,C,R,D,w)=>{var E,y;try{try{return await t({name:T,email:C,role:R,provider:D,aeriesId:w}),{success:!0,method:"cloud-function"}}catch(x){return x.code==="functions/already-exists"||(E=x.message)!=null&&E.includes("409")||(y=x.message)!=null&&y.includes("already exists")?(console.log(`User ${C} already exists in Firebase Auth, skipping...`),{success:!0,method:"already-exists",message:"User already exists"}):(await f(T,C,R,D,w),{success:!0,method:"firestore"})}}catch(x){return{success:!1,error:x.message}}},v=async()=>{if(!xs("addUser",5,6e4).allowed){d("Too many requests. Please wait before adding another user.",!0);return}const C=$B(r),R=VB(C);if(!R.isValid){d(`Please fix the following errors:
${R.errors.join(`
`)}`,!0);return}const D=["name","email","aeriesId"];for(const E of D)if(C[E]){const y=nn(C[E]);if(!y.isSafe){d(`Security threat detected in ${E}: ${y.threats.join(", ")}`,!0);return}}Object.assign(r,C);const w=await h(r.name,r.email,r.role,r.provider,r.aeriesId);w.success?(d(`User ${r.name} added successfully!`),r.name="",r.email="",r.role="",r.provider="",r.aeriesId=""):d(`Error adding user: ${w.error}`,!0)},m=T=>{const C=T.target.files[0];if(C){const R=Pd(C,{allowedTypes:["csv","excel"],maxSize:5242880,fieldName:"User Import File"});if(!R.isValid){d(R.error,!0),T.target.value="";return}const D=nn(C.name);if(!D.isSafe){d(`File name contains potentially dangerous content: ${D.threats.join(", ")}`,!0),T.target.value="";return}n.value=C}},g=async()=>{if(!n.value){d("Please select a file first",!0);return}const T=n.value.name.toLowerCase();if(!(T.endsWith(".csv")||T.endsWith(".xls")||T.endsWith(".xlsx"))){d("Unsupported file type. Please upload a .csv, .xls, or .xlsx file.",!0);return}d("Processing file...");try{T.endsWith(".csv")?await b(n.value):await _(n.value)}catch(C){d(`Error processing file: ${C.message}`,!0),console.error("Bulk upload error:",C)}},b=async T=>new Promise((C,R)=>{const D=new FileReader;D.onload=async w=>{try{const y=w.target.result.trim().split(/\r?\n/);if(y.length===0){R(new Error("The CSV file is empty."));return}const x=H=>{const L=[];let Z="",j=!1;for(let O=0;O<H.length;O++){const G=H[O];G==='"'?j=!j:G===","&&!j?(L.push(Z.trim()),Z=""):Z+=G}return L.push(Z.trim()),L};let I=0;const A={name:0,email:1,role:2,provider:3,aeriesId:4},k=x(y[0]);k.map(H=>H.toLowerCase()).some(H=>H.includes("name")||H.includes("email")||H.includes("role"))&&(k.forEach((H,L)=>{const Z=H.trim().toLowerCase();(Z==="name"||Z==="displayname")&&(A.name=L),Z==="email"&&(A.email=L),Z==="role"&&(A.role=L),(Z==="provider"||Z==="providertype")&&(A.provider=L),(Z==="aeriesid"||Z==="aeries_id"||Z==="teacherid")&&(A.aeriesId=L)}),I=1);let W=0;const P=[];for(let H=I;H<y.length;H++){const L=y[H].trim();if(!L)continue;const Z=x(L),j=(Z[A.name]||"").trim(),O=(Z[A.email]||"").trim(),G=(Z[A.role]||"").trim(),X=(Z[A.provider]||"").trim(),q=(Z[A.aeriesId]||"").trim(),pe=j.replace(/^"|"$/g,""),ie=O.replace(/^"|"$/g,""),de=G.replace(/^"|"$/g,""),z=X.replace(/^"|"$/g,""),J=q.replace(/^"|"$/g,"");if(!pe||!ie||!de){P.push(`Line ${H+1}: Missing name, email, or role.`);continue}if(!M2(de)){P.push(`Line ${H+1}: Invalid role "${de}".`);continue}const me=await h(pe,ie,de,z,J);me.success?(W++,me.method==="already-exists"&&console.log(`Line ${H+1}: User ${ie} already exists, skipped`)):P.push(`Line ${H+1}: ${me.error}`)}let B=`${W} users added successfully.`;P.length>0&&(B+=`
${P.length} errors:
`+P.join(`
`)),d(B,P.length>0),n.value=null,a.value&&(a.value.value=""),C()}catch(E){R(new Error(`Error processing CSV file: ${E.message}`))}},D.onerror=()=>R(new Error("Failed to read the CSV file.")),D.readAsText(T)}),_=async T=>new Promise((C,R)=>{const D=new FileReader;D.onload=async w=>{try{if(typeof XLSX>"u"){R(new Error("Excel upload requires SheetJS (XLSX) library. Please include it in your page."));return}const E=new Uint8Array(w.target.result),y=XLSX.read(E,{type:"array"}),x=y.SheetNames[0],I=y.Sheets[x],A=XLSX.utils.sheet_to_json(I,{defval:""});if(A.length===0){R(new Error("The Excel file is empty or unrecognized."));return}let k=0;const U=[];for(let P=0;P<A.length;P++){const B=A[P];let H="",L="",Z="",j="",O="";for(const q in B){const pe=q.toLowerCase(),ie=(""+B[q]).trim();(pe==="name"||pe==="displayname")&&!H?H=ie:pe==="email"&&!L?L=ie:pe==="role"&&!Z?Z=ie:(pe==="provider"||pe==="providertype")&&!j?j=ie:(pe==="aeriesid"||pe==="aeries_id"||pe==="teacherid")&&!O&&(O=ie)}const G=Object.values(B).map(q=>(""+q).trim());if(!H&&G[0]&&(H=G[0]),!L&&G[1]&&(L=G[1]),!Z&&G[2]&&(Z=G[2]),!j&&G[3]&&(j=G[3]),!O&&G[4]&&(O=G[4]),!H||!L||!Z){U.push(`Row ${P+1}: Missing name, email, or role.`);continue}if(!M2(Z)){U.push(`Row ${P+1}: Invalid role "${Z}".`);continue}const X=await h(H,L,Z,j,O);X.success?(k++,X.method==="already-exists"&&console.log(`Row ${P+1}: User ${L} already exists, skipped`)):U.push(`Row ${P+1}: ${X.error}`)}let W=`${k} users added successfully.`;U.length>0&&(W+=`
${U.length} errors:
`+U.join(`
`)),d(W,U.length>0),n.value=null,a.value&&(a.value.value=""),C()}catch(E){R(new Error(`Error processing Excel file: ${E.message}`))}},D.onerror=()=>R(new Error("Failed to read the Excel file.")),D.readAsArrayBuffer(T)});return Qt(async()=>{await c()}),{singleUser:r,validRoles:o,providerOptions:u,addSingleUser:v,selectedFile:n,statusMessage:s,isError:i,bulkFileInput:a,handleFileSelect:m,uploadBulkUsers:g,appSettings:l}}},MV={class:"add-user-wrapper"},UV={class:"add-single"},VV=["value"],$V={key:0},HV=["value"],jV={class:"add-bulk"},GV=["disabled"];function WV(t,e,r,n,s,i){return N(),M("div",MV,[p("div",UV,[e[16]||(e[16]=p("h3",null,"Add Single User",-1)),p("form",{onSubmit:e[5]||(e[5]=bs((...a)=>n.addSingleUser&&n.addSingleUser(...a),["prevent"])),class:"form-grid"},[p("div",null,[p("label",null,[e[8]||(e[8]=Ne(" Name: ")),Me(p("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.singleUser.name=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[At,n.singleUser.name]])])]),p("div",null,[p("label",null,[e[9]||(e[9]=Ne(" Email: ")),Me(p("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>n.singleUser.email=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[At,n.singleUser.email]])])]),p("div",null,[p("label",null,[e[11]||(e[11]=Ne(" Role: ")),Me(p("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.singleUser.role=a),required:""},[e[10]||(e[10]=p("option",{value:"",disabled:""},"Select role...",-1)),(N(!0),M(Pe,null,We(n.validRoles,a=>(N(),M("option",{key:a,value:a},oe(a),9,VV))),128))],512),[[vr,n.singleUser.role]])])]),n.providerOptions.length>0?(N(),M("div",$V,[p("label",null,[e[13]||(e[13]=Ne(" Provider Type: ")),Me(p("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.singleUser.provider=a)},[e[12]||(e[12]=p("option",{value:""},"None",-1)),(N(!0),M(Pe,null,We(n.providerOptions,a=>(N(),M("option",{key:a.abbreviation,value:a.abbreviation},oe(a.name)+" ("+oe(a.abbreviation)+") ",9,HV))),128))],512),[[vr,n.singleUser.provider]])])])):Re("",!0),p("div",null,[p("label",null,[e[14]||(e[14]=Ne(" Aeries ID: ")),Me(p("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>n.singleUser.aeriesId=a),placeholder:"Optional Aeries Teacher ID"},null,512),[[At,n.singleUser.aeriesId]])])]),e[15]||(e[15]=p("button",{type:"submit"},"Add User",-1))],32)]),p("div",jV,[e[17]||(e[17]=p("h3",null,"Bulk Upload Users",-1)),p("div",null,[p("input",{type:"file",ref:"bulkFileInput",accept:".csv, .xls, .xlsx",onChange:e[6]||(e[6]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),p("button",{onClick:e[7]||(e[7]=(...a)=>n.uploadBulkUsers&&n.uploadBulkUsers(...a)),disabled:!n.selectedFile}," Upload Users ",8,GV)]),e[18]||(e[18]=Xn(`<h4 data-v-4932f701>Example Formatting</h4><div data-v-4932f701>File needs to be in .csv, .xls, .xlsx format, like an Excel spreadsheet.</div><div class="example-format" data-v-4932f701><p data-v-4932f701><strong data-v-4932f701>CSV Format:</strong></p><pre data-v-4932f701>Name,Email,Role,Provider,AeriesID
&quot;John Smith&quot;,&quot;john.smith@school.org&quot;,&quot;teacher&quot;,&quot;&quot;,&quot;123456&quot;
&quot;Jane Doe&quot;,&quot;jane.doe@school.org&quot;,&quot;service_provider&quot;,&quot;SLP&quot;,&quot;789012&quot;
&quot;Bob Johnson&quot;,&quot;bob.johnson@school.org&quot;,&quot;case_manager&quot;,&quot;&quot;,&quot;&quot;</pre><p data-v-4932f701><strong data-v-4932f701>Supported Roles:</strong> admin, teacher, case_manager, sped_chair, service_provider</p><p data-v-4932f701><strong data-v-4932f701>Provider Types:</strong> SLP, OT, PT, SC, MH, TR, AUD, VI, AT, DHH, O&amp;M, BIS, HN, SW</p><p data-v-4932f701><strong data-v-4932f701>Aeries ID:</strong> Optional 6-digit teacher ID from Aeries system</p></div>`,3))]),n.statusMessage?(N(),M("div",{key:0,class:at(["status-msg",{error:n.isError}])},oe(n.statusMessage),3)):Re("",!0)])}const zV=_t(BV,[["render",WV],["__scopeId","data-v-4932f701"]]),Mc=20,KV={name:"UserTable",setup(){const t=ro(),e=he([]),r=he(1),n=he("name"),s=he(""),i=he(null),a=he(""),o=he(!1),l=he(!1),c=he([]),u=he(null),d=Xh,f=Ia(),h=f.appSettings,v=f.loadAppSettings;let m=null;const g=()=>{m&&clearTimeout(m),m=setTimeout(()=>{C()},300)},b=Ve(()=>{var W;return Array.isArray((W=h.value)==null?void 0:W.serviceProviders)&&h.value.serviceProviders.length>0}),_=Ve(()=>{var W;return((W=h.value)==null?void 0:W.serviceProviders)||[]}),T=(W,P=!1)=>{a.value=W,o.value=P,setTimeout(()=>{a.value="",o.value=!1},3e3)},C=()=>{r.value=1,R()},R=async(W="first")=>{T("");const P=sr(t,"users");let B;if(s.value&&n.value==="name"){const Z=(await Zr(ps(P,go("name"),Di(1e3)))).docs.map(j=>({id:j.id,...j.data()})).filter(j=>(j.name||"").toLowerCase().includes(s.value.toLowerCase()));i.value=null,e.value=Z,l.value=!1;return}s.value&&n.value==="email"?B=ps(P,go("email"),Ks("email",">=",s.value),Ks("email","<=",s.value+""),Di(Mc)):s.value?B=ps(P,go("name"),Ks("name",">=",s.value),Ks("name","<=",s.value+""),Di(Mc)):B=ps(P,go("name"),Di(Mc)),W==="next"&&c.value.length&&(B=ps(P,go(n.value),mN(c.value[c.value.length-1]),Di(Mc)));const H=await Zr(B);c.value=H.docs,i.value=null,e.value=c.value.map(L=>({id:L.id,...L.data()})),l.value=H.size===Mc},D=W=>{i.value||(i.value=W,u.value={...e.value.find(P=>P.id===W)})},w=()=>{i.value=null,u.value=null,R()},E=(W,P,B)=>{u.value&&u.value.id===W&&(u.value[P]=B)},y=async W=>{var P,B;if(!(!u.value||u.value.id!==W))try{const H={};u.value.name!==void 0&&(H.name=((P=u.value.name)==null?void 0:P.trim())||null),u.value.title!==void 0&&(H.title=((B=u.value.title)==null?void 0:B.trim())||null),u.value.role!==void 0&&(H.role=u.value.role),u.value.provider!==void 0&&(H.provider=u.value.provider||null),await sC(vt(t,"users",W),H),T(" User updated."),i.value=null,u.value=null,R()}catch(H){console.error("Error updating user:",H),T(` Error updating user: ${H.message}`,!0)}},x=async W=>{if(confirm("Are you sure you want to delete this user?"))try{await sc(vt(t,"users",W)),T(" User deleted."),i.value=null,u.value=null,R()}catch(P){console.error("Error deleting user:",P),T(` Error deleting user: ${P.message}`,!0)}},I=async()=>{if(prompt("Type DELETE ALL USERS to confirm:")==="DELETE ALL USERS")try{const P=await Zr(sr(t,"users"));await Promise.all(P.docs.map(B=>sc(vt(t,"users",B.id)))),T(" All users deleted."),r.value=1,R()}catch(P){console.error("Error deleting all users:",P),T(` Error deleting all users: ${P.message}`,!0)}},A=()=>{r.value++,R("next")},k=()=>{r.value>1&&(r.value--,R())},U=W=>{var Z,j;if(!W)return"";const P=((Z=h.value)==null?void 0:Z.serviceProviders)||[],B=((j=h.value)==null?void 0:j.customServiceProviders)||[];[...P,...B];const L=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Adapted PE",abbreviation:"APE"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf/Hard of Hearing",abbreviation:"DHH"},{name:"Vision Services",abbreviation:"VI"},{name:"Orientation & Mobility",abbreviation:"OM"},{name:"Other",abbreviation:"OTHER"}].find(O=>O.abbreviation===W);return L?`${L.name} (${L.abbreviation})`:W};return Qt(async()=>{await v(),R()}),eo(()=>{m&&clearTimeout(m)}),{users:e,currentPage:r,searchType:n,searchTerm:s,activeRowId:i,statusMessage:a,isError:o,hasNextPage:l,validRoles:d,handleSearch:C,debouncedHandleSearch:g,startEdit:D,cancelEdit:w,updateUserField:E,saveUser:y,deleteUser:x,deleteAllUsers:I,loadNextPage:A,loadPreviousPage:k,getProviderLabel:U,appSettings:h,editingUser:u,providersLoaded:b,serviceProviders:_}}},qV={class:"admin-form-row"},XV={class:"user-admin-table users-table striped"},YV={key:0},QV=["data-userid"],JV=["value","disabled","onInput"],ZV=["value","disabled","onInput"],e$=["disabled","value","onChange"],t$=["value"],r$={key:0},n$={key:0},s$={key:1},a$=["value"],i$={key:1},o$={class:"action-btns"},l$=["onClick"],c$=["onClick"],u$=["onClick"],d$={class:"admin-pagination"},f$=["disabled"],h$=["disabled"];function p$(t,e,r,n,s,i){return N(),M("div",null,[e[14]||(e[14]=p("h2",null,"Edit Users",-1)),p("div",qV,[Me(p("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.searchTerm=a),placeholder:"Search by name or email",onInput:e[1]||(e[1]=(...a)=>n.debouncedHandleSearch&&n.debouncedHandleSearch(...a))},null,544),[[At,n.searchTerm]]),Me(p("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.searchType=a),onChange:e[3]||(e[3]=(...a)=>n.handleSearch&&n.handleSearch(...a))},e[9]||(e[9]=[p("option",{value:"name"},"Name",-1),p("option",{value:"email"},"Email",-1)]),544),[[vr,n.searchType]]),p("button",{onClick:e[4]||(e[4]=(...a)=>n.deleteAllUsers&&n.deleteAllUsers(...a)),style:{"margin-left":"auto",background:"#f44336",color:"#fff",padding:"0.3rem 0.8rem",border:"none","border-radius":"4px",cursor:"pointer"}}," Delete All Users ")]),p("div",{class:at(["admin-status-msg",{error:n.isError}])},oe(n.statusMessage),3),p("div",null,[p("table",XV,[e[13]||(e[13]=p("thead",null,[p("tr",null,[p("th",null,"Name"),p("th",null,"Title"),p("th",null,"Email"),p("th",null,"Role"),p("th",null,"Provider Type"),p("th",{style:{"text-align":"center"}},"Actions")])],-1)),p("tbody",null,[n.users.length===0?(N(),M("tr",YV,e[10]||(e[10]=[p("td",{colspan:"5"},"No users found.",-1)]))):Re("",!0),(N(!0),M(Pe,null,We(n.users,a=>(N(),M("tr",{key:a.id,class:at({"active-row":n.activeRowId===a.id}),"data-userid":a.id},[p("td",null,[p("input",{type:"text",value:a.name||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"name",o.target.value)},null,40,JV)]),p("td",null,[p("input",{type:"text",value:a.title||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"title",o.target.value)},null,40,ZV)]),p("td",null,oe(a.email),1),p("td",null,[p("select",{class:"editable-select",disabled:n.activeRowId!==a.id,value:a.role,onChange:o=>n.updateUserField(a.id,"role",o.target.value)},[(N(!0),M(Pe,null,We(n.validRoles,o=>(N(),M("option",{key:o,value:o},oe(o.replace(/_/g," ")),9,t$))),128))],40,e$)]),n.providersLoaded?(N(),M("td",r$,[n.activeRowId!==a.id?(N(),M("span",n$,oe(a.provider||""),1)):(N(),M("span",s$,[Me(p("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>n.editingUser.provider=o)},[e[11]||(e[11]=p("option",{value:""},"None",-1)),(N(!0),M(Pe,null,We(n.serviceProviders,o=>(N(),M("option",{key:o,value:o},oe(o),9,a$))),128))],512),[[vr,n.editingUser.provider]])]))])):(N(),M("td",i$,e[12]||(e[12]=[p("span",null,"Loading...",-1)]))),p("td",o$,[n.activeRowId!==a.id?(N(),M("button",{key:0,class:"edit-btn",onClick:o=>n.startEdit(a.id)},"  ",8,l$)):(N(),M(Pe,{key:1},[p("button",{class:"save-btn",onClick:o=>n.saveUser(a.id)},"",8,c$),p("button",{class:"cancel-btn",onClick:e[6]||(e[6]=(...o)=>n.cancelEdit&&n.cancelEdit(...o))},""),p("button",{class:"delete-btn",onClick:o=>n.deleteUser(a.id)},"",8,u$)],64))])],10,QV))),128))])])]),p("div",d$,[p("button",{onClick:e[7]||(e[7]=(...a)=>n.loadPreviousPage&&n.loadPreviousPage(...a)),disabled:n.currentPage===1}," Previous ",8,f$),p("span",null,"Page "+oe(n.currentPage),1),p("button",{onClick:e[8]||(e[8]=(...a)=>n.loadNextPage&&n.loadNextPage(...a)),disabled:!n.hasNextPage}," Next ",8,h$)])])}const m$=_t(KV,[["render",p$],["__scopeId","data-v-496615f3"]]),v$=[ft.VIEW_USERS,ft.EDIT_USER,ft.DELETE_USER,ft.MANAGE_SUBJECTS,ft.MANAGE_ROLES,ft.VIEW_STUDENTS,ft.EDIT_STUDENT_CM,ft.EDIT_STUDENT_ALL,ft.TESTING],g$={[ft.VIEW_USERS]:"View Users",[ft.EDIT_USER]:"Edit User",[ft.DELETE_USER]:"Delete User",[ft.MANAGE_SUBJECTS]:"Manage Subjects",[ft.MANAGE_ROLES]:"Manage Roles",[ft.VIEW_STUDENTS]:"View Students",[ft.EDIT_STUDENT_CM]:"Edit Students (Own Caseload)",[ft.EDIT_STUDENT_ALL]:"Edit All Students",[ft.TESTING]:"Testing"},x$={name:"PermissionsMatrix",setup(){const t=ro(),e="config/permissions_matrix",r=Os({}),n=he(""),s=he(!1),i=Xh,a=v$,o=g$,l=(f,h=!1)=>{n.value=f,s.value=h,setTimeout(()=>{n.value="",s.value=!1},3e3)},c=async()=>{try{const f=vt(t,e),h=await Jr(f);if(h.exists()){const v=h.data();Object.assign(r,v)}else Object.assign(r,zv)}catch(f){console.error("Error loading permissions matrix:",f),Object.assign(r,zv)}},u=(f,h,v)=>{if(r[f]||(r[f]=[]),v)r[f].includes(h)||r[f].push(h);else{const m=r[f].indexOf(h);m>-1&&r[f].splice(m,1)}},d=async()=>{try{await gr(vt(t,e),r),l(" Permissions updated.",!1)}catch(f){console.error("Error saving permissions:",f),l(` Error saving: ${f.message}`,!0)}};return Qt(()=>{c()}),{matrix:r,statusMessage:n,isError:s,validRoles:i,actionList:a,actionLabels:o,updatePermission:u,savePermissions:d}}},y$={class:"permissions-table-admin"},E$={style:{"font-weight":"bold"}},b$=["data-role","data-action","checked","onChange"];function _$(t,e,r,n,s,i){return N(),M("div",null,[e[2]||(e[2]=p("h3",null,"Role Permissions Matrix",-1)),p("table",y$,[p("thead",null,[p("tr",null,[e[1]||(e[1]=p("th",{style:{"min-width":"120px"}},"Role",-1)),(N(!0),M(Pe,null,We(n.actionList,a=>(N(),M("th",{key:a,style:{"min-width":"110px"}},oe(n.actionLabels[a]),1))),128))])]),p("tbody",null,[(N(!0),M(Pe,null,We(n.validRoles,a=>(N(),M("tr",{key:a},[p("td",E$,oe(a),1),(N(!0),M(Pe,null,We(n.actionList,o=>{var l;return N(),M("td",{key:o,style:{"text-align":"center"}},[p("input",{type:"checkbox","data-role":a,"data-action":o,checked:(l=n.matrix[a])==null?void 0:l.includes(o),onChange:c=>n.updatePermission(a,o,c.target.checked)},null,40,b$)])}),128))]))),128))])]),p("button",{onClick:e[0]||(e[0]=(...a)=>n.savePermissions&&n.savePermissions(...a)),style:{padding:"0.5em 1.4em","font-size":"1.08em"}}," Save "),p("span",{style:Cn({marginLeft:"1em",fontSize:"1em",color:n.isError?"#b42c2c":"#267838"})},oe(n.statusMessage),5)])}const HC=_t(x$,[["render",_$],["__scopeId","data-v-92dce780"]]),S$={class:"admin-students"},T$={class:"admin-form-row"},A$={class:"search-container"},w$={class:"user-admin-table students-table striped"},C$={key:0},I$=["data-id"],k$=["value","disabled","onInput"],D$=["value","disabled","onInput"],R$=["value","disabled","onInput"],F$=["value","disabled","onInput"],P$={class:"action-btns"},O$=["onClick"],N$=["onClick"],L$=["onClick"],B$={class:"admin-pagination"},M$=["disabled"],U$=["disabled"],Vp=50,V$={__name:"AdminStudents",setup(t){const e=ro(),{students:r,fetchStudents:n,updateStudent:s,deleteStudent:i}=wa(),a=he(""),o=he([]),l=he(1),c=he(null),u=he({}),d=he(""),f=he(!1);let h=null;const v=()=>{h&&clearTimeout(h),h=setTimeout(()=>{_()},300)},m=Ve(()=>{const A=(l.value-1)*Vp,k=A+Vp;return o.value.slice(A,k)}),g=Ve(()=>Math.ceil(o.value.length/Vp)),b=(A,k=!1)=>{d.value=A,f.value=k,setTimeout(()=>{d.value="",f.value=!1},5e3)},_=()=>{if(!xs("studentSearch",20,6e4).allowed){b("Too many search requests. Please wait before searching again.",!0);return}const k=Tr(a.value,{trim:!0,maxLength:100,removeDangerous:!0}),U=nn(k);if(!U.isSafe){b(`Security threat detected in search: ${U.threats.join(", ")}`,!0),a.value=k;return}k!==a.value&&(a.value=k);const W=k.toLowerCase();W?o.value=r.value.filter(P=>{const B=pt(P,"firstName")||"",H=pt(P,"lastName")||"";return`${B} ${H}`.toLowerCase().includes(W)}):o.value=r.value,l.value=1},T=A=>{if(c.value)return;const k=r.value.find(U=>U.id===A);k&&(c.value=A,u.value={...k})},C=()=>{c.value=null,u.value={}},R=(A,k,U)=>{if(u.value.id===A){let W=U;if(typeof U=="string"){W=Tr(U,{trim:!0,maxLength:k==="caseManagerId"?50:100,removeDangerous:!0});const P=nn(W);if(!P.isSafe){b(`Security threat detected in ${k}: ${P.threats.join(", ")}`,!0);return}const B=Yh(W,{max:k==="caseManagerId"?50:100,fieldName:k});if(!B.isValid){b(B.error,!0);return}}u.value[k]=W}},D=async A=>{try{if(!xs("saveStudent",10,6e4).allowed){b("Too many save requests. Please wait before saving again.",!0);return}const U={};if(Object.keys(u.value).forEach(H=>{H!=="id"&&u.value[H]!==r.value.find(L=>L.id===A)[H]&&(U[H]=u.value[H])}),Object.keys(U).length===0){C();return}const W=VC(U),P=UC(W,{isNew:!1});if(!P.isValid){b(`Validation failed: ${P.errors.join(", ")}`,!0);return}Object.assign(u.value,W),await s(A,W);const B=r.value.findIndex(H=>H.id===A);B!==-1&&(r.value[B]={...r.value[B],...W}),b(" Student updated.")}catch(k){b(" Update failed.",!0),console.error("Update error:",k)}finally{C()}},w=async A=>{if(!xs("deleteStudent",5,3e5).allowed){b("Too many delete requests. Please wait before deleting again.",!0);return}if(confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await i(A),b(" Student deleted.");const U=r.value.findIndex(W=>W.id===A);U!==-1&&r.value.splice(U,1),_()}catch(U){b(" Delete failed.",!0),console.error("Delete error:",U)}},E=async()=>{if(!xs("deleteAllStudents",1,36e5).allowed){b("Delete all operation rate limited. Please wait before trying again.",!0);return}const k=`Are you sure you want to delete ALL ${r.value.length} students? 

This action cannot be undone and will permanently remove all student data.

Type "DELETE ALL STUDENTS" to confirm:`;if(prompt(k)!=="DELETE ALL STUDENTS"){b("Delete all operation cancelled.",!1);return}try{b("Deleting all students...");const W=iC(e);let P=0;for(const B of r.value)W.delete(vt(e,"students",B.id)),P++,P>=500&&(await W.commit(),P=0);P>0&&await W.commit(),r.value=[],o.value=[],b(" All students deleted.")}catch(W){b(" Failed to delete all students.",!0),console.error("Delete all error:",W)}},y=A=>{if(!A)return"N/A";try{if(A&&typeof A.toDate=="function")return A.toDate().toLocaleDateString();const k=new Date(A);return isNaN(k.getTime())?"Invalid Date":k.toLocaleDateString()}catch{return"Invalid Date"}},x=()=>{l.value<g.value&&l.value++},I=()=>{l.value>1&&l.value--};return Qt(async()=>{try{await n(),o.value=r.value}catch(A){b("Failed to load students.",!0),console.error("Load students error:",A)}}),eo(()=>{h&&clearTimeout(h)}),(A,k)=>(N(),M("div",S$,[k[3]||(k[3]=p("h2",null,"Edit Students",-1)),p("div",T$,[p("div",A$,[Me(p("input",{type:"text","onUpdate:modelValue":k[0]||(k[0]=U=>a.value=U),onInput:v,placeholder:"Search by name",class:"search-input"},null,544),[[At,a.value]]),p("button",{onClick:E,class:"delete-all-btn"},"Delete All Students")])]),d.value?(N(),M("div",{key:0,class:at(["admin-status-msg",{error:f.value}])},oe(d.value),3)):Re("",!0),p("table",w$,[k[2]||(k[2]=p("thead",null,[p("tr",null,[p("th",null,"ID"),p("th",null,"First Name"),p("th",null,"Last Name"),p("th",null,"Grade"),p("th",null,"Case Manager"),p("th",null,"Date Added"),p("th",null,"Actions")])],-1)),p("tbody",null,[m.value.length?Re("",!0):(N(),M("tr",C$,k[1]||(k[1]=[p("td",{colspan:"7"},"No students found.",-1)]))),(N(!0),M(Pe,null,We(m.value,U=>(N(),M("tr",{key:U.id,class:at({"active-row":c.value===U.id}),"data-id":U.id},[p("td",null,oe(U.id),1),p("td",null,[p("input",{class:"editable-input","data-field":"first_name",value:ge(pt)(U,"firstName")||"",disabled:c.value!==U.id,onInput:W=>R(U.id,"first_name",W.target.value)},null,40,k$)]),p("td",null,[p("input",{class:"editable-input","data-field":"last_name",value:ge(pt)(U,"lastName")||"",disabled:c.value!==U.id,onInput:W=>R(U.id,"last_name",W.target.value)},null,40,D$)]),p("td",null,[p("input",{class:"editable-input","data-field":"grade",value:ge(pt)(U,"grade")||"",disabled:c.value!==U.id,onInput:W=>R(U.id,"grade",W.target.value)},null,40,R$)]),p("td",null,[p("input",{class:"editable-input","data-field":"caseManagerId",value:U.caseManagerId||"",disabled:c.value!==U.id,onInput:W=>R(U.id,"caseManagerId",W.target.value)},null,40,F$)]),p("td",null,oe(y(U.created_at)),1),p("td",P$,[c.value===U.id?(N(),M(Pe,{key:0},[p("button",{onClick:W=>D(U.id),class:"btn-save",title:"Save"},"",8,O$),p("button",{onClick:C,class:"btn-cancel",title:"Cancel"},""),p("button",{onClick:W=>w(U.id),class:"btn-delete",title:"Delete"},"",8,N$)],64)):(N(),M("button",{key:1,onClick:W=>T(U.id),class:"btn-edit",title:"Edit"},"",8,L$))])],10,I$))),128))])]),p("div",B$,[p("button",{onClick:I,disabled:l.value===1,class:"admin-btn"}," Prev ",8,M$),p("span",null,"Page "+oe(l.value)+" of "+oe(g.value),1),p("button",{onClick:x,disabled:l.value===g.value,class:"admin-btn"}," Next ",8,U$)])]))}},$$=_t(V$,[["__scopeId","data-v-d19751dc"]]),H$={class:"bulk-importer"},j$={key:0,class:"step-container"},G$={class:"file-upload-section"},W$={class:"file-input-wrapper"},z$={for:"csv-file",class:"file-label"},K$={class:"file-text"},q$={key:0,class:"error-message"},X$={key:1,class:"file-info"},Y$={key:0},Q$={class:"step-actions"},J$=["disabled"],Z$={key:1,class:"step-container"},eH={class:"field-mapping-section"},tH={class:"mapping-grid"},rH={class:"csv-column"},nH={class:"app-field"},sH=["onUpdate:modelValue"],aH={class:"sample-data"},iH={key:0,class:"validation-errors"},oH={class:"step-actions"},lH=["disabled"],cH={key:2,class:"step-container"},uH={class:"preview-section"},dH={class:"preview-stats"},fH={class:"stat-item"},hH={class:"stat-value"},pH={class:"stat-item"},mH={class:"stat-value valid"},vH={class:"stat-item"},gH={class:"stat-value invalid"},xH={class:"preview-table-container"},yH={class:"preview-table"},EH={key:0,class:"error-list"},bH={key:1,class:"no-errors"},_H={class:"import-options"},SH={class:"options-grid"},TH={class:"option-item"},AH={class:"option-item"},wH={class:"option-item"},CH={class:"step-actions"},IH=["disabled"],kH={key:3,class:"step-container"},DH={class:"results-section"},RH={class:"results-stats"},FH={class:"stat-item success"},PH={class:"stat-value"},OH={class:"stat-item error"},NH={class:"stat-value"},LH={class:"stat-item"},BH={class:"stat-value"},MH={key:0,class:"import-errors"},UH={class:"results-actions"},VH={key:4,class:"loading-overlay"},$H={class:"loading-content"},HH={class:"progress-bar"},jH={__name:"StudentBulkImporter",emits:["close","imported"],setup(t,{emit:e}){const r=e,{users:n,fetchUsers:s}=Ca(),i=he(1),a=he(""),o=he(""),l=he([]),c=he([]),u=he({}),d=he(""),f=he([]),h=he([]),v=he("valid-only"),m=he(!1),g=he(!1),b=he(0),_=he({successful:0,failed:0,errors:[],processingTime:0}),T=he(null),C=Ve(()=>{const z=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],J=Object.values(u.value).filter(Y=>Y),me=J.includes("app.studentData.ssid");return z.every(Y=>J.includes(Y))&&me}),R=Ve(()=>h.value.filter(z=>z.errors.length===0)),D=Ve(()=>h.value.filter(z=>z.errors.length>0));Qt(async()=>{console.log(" StudentBulkImporter component mounted!");try{await s(),console.log(" Users loaded successfully:",Object.keys(n.value).length,"users"),console.log("First few users:",Object.values(n.value).slice(0,3).map(z=>({id:z.id,name:z.name,role:z.role})))}catch(z){console.error(" Failed to load users:",z)}});const w=async z=>{const J=z.target.files[0];if(J){if(!J.name.toLowerCase().endsWith(".csv")&&J.type!=="text/csv"){d.value="File must be a CSV file (.csv extension)";return}if(J.size>10*1024*1024){d.value="File must be smaller than 10MB";return}d.value="",a.value=J.name,o.value=Z(J.size);try{const me=await J.text();E(me)}catch(me){d.value="Failed to read CSV file: "+me.message}}},E=z=>{try{const J=z.trim().split(`
`);if(J.length<2)throw new Error("CSV must have at least a header row and one data row");const me=J[0].split(",").map(K=>K.trim().replace(/"/g,""));c.value=me;const Y=[];for(let K=1;K<J.length;K++){const ee={};let fe="",ve=!1,Q=0;for(let re=0;re<J[K].length;re++){const be=J[K][re];be==='"'?ve=!ve:be===","&&!ve?(ee[me[Q]]=fe.trim().replace(/^"|"$/g,""),fe="",Q++):fe+=be}Q<me.length&&(ee[me[Q]]=fe.trim().replace(/^"|"$/g,"")),Y.push(ee)}l.value=Y,console.log("Parsed CSV data:",Y.length,"records")}catch(J){d.value="Failed to parse CSV: "+J.message}},y=()=>{const z={SSID:"app.studentData.ssid",FirstName:"app.studentData.firstName",LastName:"app.studentData.lastName",Grade:"app.studentData.grade",Plan:"app.studentData.plan",CaseManagerId:"app.studentData.caseManagerId",ReviewDate:"app.dates.reviewDate",ReevalDate:"app.dates.reevalDate",MeetingDate:"app.dates.meetingDate",Period1Teacher:"app.schedule.periods.1",Period2Teacher:"app.schedule.periods.2",Period3Teacher:"app.schedule.periods.3",Period4Teacher:"app.schedule.periods.4",Period5Teacher:"app.schedule.periods.5",Period6Teacher:"app.schedule.periods.6",PeriodSHTeacher:"app.schedule.periods.SH",ClassServices:"app.schedule.classServices",SpeechProvider:"app.providers.speechId",OTProvider:"app.providers.otId",PTProvider:"app.providers.ptId",ATProvider:"app.providers.atId",Audiologist:"app.providers.audId",BISProvider:"app.providers.bisId",DHHProvider:"app.providers.dhhId",HNProvider:"app.providers.hnId",MHProvider:"app.providers.mhId",OMProvider:"app.providers.omId",SCProvider:"app.providers.scId",SWProvider:"app.providers.swId",TRProvider:"app.providers.trId",VIProvider:"app.providers.viId",Flag1:"app.flags.flag1",Flag2:"app.flags.flag2",BIPPdfUrl:"app.documents.bipPdfUrl",AtAGlancePdfUrl:"app.documents.ataglancePdfUrl",Assessment:"app.accommodations.assessment",Instruction:"app.accommodations.instruction"};c.value.forEach(J=>{z[J]&&(u.value[J]=z[J])})},x=()=>{u.value={}},I=z=>{const J=l.value[0];if(!J)return"";const me=J[z];return me?z==="ClassServices"&&me.includes(",")?`"${me}"`:me:""},A=()=>{f.value=[];const z=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],J=Object.values(u.value).filter(K=>K),me=J.includes("app.studentData.ssid");z.forEach(K=>{if(!J.includes(K)){const ee=K.split(".").pop();f.value.push(`Required field "${ee}" is not mapped`)}}),me||f.value.push("SSID (State Student ID) must be mapped to app.studentData.ssid");const Y=J.filter((K,ee)=>J.indexOf(K)!==ee);Y.length>0&&f.value.push(`Duplicate field mappings: ${Y.join(", ")}`)},k=()=>{h.value=l.value.map(z=>{const J=U(z),me=P(J);return console.log("Row mapping:",{original:z,mapped:J,errors:me}),{data:J,errors:me}})},U=z=>{const J={app:{studentData:{},dates:{},providers:{},accommodations:{},flags:{},schedule:{periods:{},classServices:[]},documents:{}}};return Object.entries(u.value).forEach(([me,Y])=>{if(!Y||!z[me])return;let K=z[me].trim();if(!K)return;if(Y==="app.schedule.classServices"){K.startsWith('"')&&K.endsWith('"')&&(K=K.slice(1,-1)),J.app.schedule.classServices=K.split(",").map(ve=>ve.trim()).filter(Boolean);return}if(Y.startsWith("app.schedule.periods.")){const ve=Y.split(".").pop(),Q=K.trim();if(Q){const re=X(Q);console.log(`Mapping Period ${ve} teacher:`,Q,"",re),J.app.schedule.periods[ve]=re}return}if(Y.startsWith("app.providers.")){const ve=Y.split(".").pop(),Q=K.trim();if(Q){const re=q(Q);console.log(`Mapping ${ve} provider:`,Q,"",re),J.app.providers[ve]=re}return}if(Y==="app.accommodations.assessment"||Y==="app.accommodations.instruction"){const ve=Y.split(".").pop();J.app.accommodations[ve]=K;return}if(Y.startsWith("app.flags.")){const ve=Y.split(".").pop();J.app.flags[ve]=["true","1","yes","y"].includes(K.toLowerCase());return}if(Y.includes("Date")){const[ve,Q,re]=Y.split(".");J[ve][Q]||(J[ve][Q]={}),J[ve][Q][re]=H(K);return}const ee=Y.split(".");let fe=J;for(let ve=0;ve<ee.length-1;ve++){const Q=ee[ve];fe[Q]||(fe[Q]={}),fe=fe[Q]}fe[ee[ee.length-1]]=K}),J},W=z=>{const J=Object.values(n.value).find(me=>me.id===z||me.name===z||me.email===z||me.aeriesId===z);return console.log("Mapping case manager:",z,"to Firebase ID:",J==null?void 0:J.id),J?J.id:z},P=z=>{var Y,K,ee,fe,ve,Q,re,be,Te,_e,ke,Be,Ce,je,Ue,He,qe,ye;const J=[],me=z.ssid||((K=(Y=z.app)==null?void 0:Y.studentData)==null?void 0:K.ssid);return me||J.push("SSID is required (either top-level or in app.studentData)"),(fe=(ee=z.app)==null?void 0:ee.studentData)!=null&&fe.firstName||J.push("First name is required"),(Q=(ve=z.app)==null?void 0:ve.studentData)!=null&&Q.lastName||J.push("Last name is required"),(be=(re=z.app)==null?void 0:re.studentData)!=null&&be.grade||J.push("Grade is required"),me&&!/^\d{9,10}$/.test(me)&&J.push("SSID must be 9-10 digits"),(_e=(Te=z.app)==null?void 0:Te.studentData)!=null&&_e.grade&&!["K","1","2","3","4","5","6","7","8","9","10","11","12"].includes(z.app.studentData.grade)&&J.push("Grade must be K-12"),(Be=(ke=z.app)==null?void 0:ke.studentData)!=null&&Be.plan&&!["IEP","504"].includes(z.app.studentData.plan)&&J.push("Plan must be IEP or 504"),(je=(Ce=z.app)==null?void 0:Ce.dates)!=null&&je.reviewDate&&!B(z.app.dates.reviewDate)&&J.push("Invalid review date format (use YYYY-MM-DD)"),(He=(Ue=z.app)==null?void 0:Ue.dates)!=null&&He.reevalDate&&!B(z.app.dates.reevalDate)&&J.push("Invalid reevaluation date format (use YYYY-MM-DD)"),(ye=(qe=z.app)==null?void 0:qe.dates)!=null&&ye.meetingDate&&!B(z.app.dates.meetingDate)&&J.push("Invalid meeting date format (use YYYY-MM-DD)"),J},B=z=>{if(!z)return!0;const J=new Date(z);return!isNaN(J.getTime())&&z.match(/^\d{4}-\d{2}-\d{2}$/)},H=z=>{if(!z)return"";try{const J=new Date(z);return isNaN(J.getTime())?"":J.toISOString().split("T")[0]}catch{return""}},L=z=>{var Y,K,ee,fe;const J=((K=(Y=z.app)==null?void 0:Y.studentData)==null?void 0:K.firstName)||"",me=((fe=(ee=z.app)==null?void 0:ee.studentData)==null?void 0:fe.lastName)||"";return`${J} ${me}`.trim()||"Missing Name"},Z=z=>{if(z===0)return"0 Bytes";const J=1024,me=["Bytes","KB","MB","GB"],Y=Math.floor(Math.log(z)/Math.log(J));return parseFloat((z/Math.pow(J,Y)).toFixed(2))+" "+me[Y]},j=()=>{if(i.value===2){if(A(),f.value.length>0)return;k()}i.value++},O=()=>{i.value--},G=async()=>{g.value=!0,b.value=0;const z=Date.now(),J=v.value==="valid-only"?R.value:h.value;let me=0,Y=0;const K=[];try{for(let ee=0;ee<J.length;ee++){const fe=J[ee];try{await ie(fe.data),me++}catch(ve){Y++,K.push(`Row ${ee+1}: ${ve.message}`)}b.value=Math.round((ee+1)/J.length*100)}_.value={successful:me,failed:Y,errors:K,processingTime:Date.now()-z},i.value=4,r("imported",{successful:me,failed:Y})}catch(ee){console.error("Import failed:",ee),K.push("Import process failed: "+ee.message),_.value={successful:me,failed:Y,errors:K,processingTime:Date.now()-z},i.value=4}finally{g.value=!1}},X=z=>{if(!z)return"";console.log(" Mapping teacher ID:",z),console.log(" Available users:",Object.values(n.value).map(Y=>({name:Y.name,aeriesId:Y.aeriesId,id:Y.id})));const J=Object.values(n.value).find(Y=>{const K=String(Y.aeriesId)===String(z);return K&&console.log(" Found exact Aeries ID match:",{teacherId:z,user:{name:Y.name,aeriesId:Y.aeriesId,id:Y.id}}),K});if(J)return console.log(" Using Aeries ID match:",z,"",J.id,"(",J.name,")"),J.id;const me=Object.values(n.value).find(Y=>Y.id===z);return me?(console.log(" Using Firebase ID match:",z,"",me.id,"(",me.name,")"),me.id):(console.warn(" No user found for teacher ID:",z),z)},q=z=>{if(!z)return"";console.log(" Mapping provider ID:",z),console.log(" Available users:",Object.values(n.value).map(Y=>({name:Y.name,aeriesId:Y.aeriesId,id:Y.id})));const J=Object.values(n.value).find(Y=>{const K=String(Y.aeriesId)===String(z);return K&&console.log(" Found exact Aeries ID match:",{providerId:z,user:{name:Y.name,aeriesId:Y.aeriesId,id:Y.id}}),K});if(J)return console.log(" Using Aeries ID match:",z,"",J.id,"(",J.name,")"),J.id;const me=Object.values(n.value).find(Y=>Y.id===z);return me?(console.log(" Using Firebase ID match:",z,"",me.id,"(",me.name,")"),me.id):(console.warn(" No user found for provider ID:",z),z)},pe=z=>{try{return z.app&&z.app.studentData&&z.app.studentData.ssid&&z.app.studentData.firstName&&z.app.studentData.lastName&&z.app.studentData.grade&&z.app.schedule&&Array.isArray(z.app.schedule.classServices)}catch{return!1}},ie=async z=>{try{const J=z.app.studentData.ssid,me=sr(yt,"students"),Y=ps(me,Ks("app.studentData.ssid","==",J)),K=await Zr(Y);if(!K.empty&&!m.value)throw new Error(`Student with SSID ${J} already exists`);const ee={createdAt:Bo(),updatedAt:Bo(),app:{studentData:{firstName:z.app.studentData.firstName||"",lastName:z.app.studentData.lastName||"",grade:z.app.studentData.grade||"",plan:z.app.studentData.plan||"",caseManagerId:W(z.app.studentData.caseManagerId)||"",ssid:J},dates:{reviewDate:z.app.dates.reviewDate||"",reevalDate:z.app.dates.reevalDate||"",meetingDate:z.app.dates.meetingDate||""},schedule:{periods:z.app.schedule.periods||{1:"",2:"",3:"",4:"",5:"",6:"",SH:""},classServices:Array.isArray(z.app.schedule.classServices)?z.app.schedule.classServices:[]},providers:z.app.providers||{speechId:"",otId:"",ptId:"",atId:"",audId:"",bisId:"",dhhId:"",hnId:"",mhId:"",omId:"",scId:"",swId:"",trId:"",viId:""},accommodations:{assessment:z.app.accommodations.assessment||"",instruction:z.app.accommodations.instruction||""},flags:{flag1:!!z.app.flags.flag1,flag2:!!z.app.flags.flag2},documents:{bipPdfUrl:z.app.documents.bipPdfUrl||null,ataglancePdfUrl:z.app.documents.ataglancePdfUrl||null}}};if(console.log("Saving student data:",{ssid:ee.app.studentData.ssid,schedule:ee.app.schedule.periods,providers:ee.app.providers}),!pe(ee))throw new Error("Invalid student data structure");if(!K.empty&&m.value){const fe=K.docs[0];await gr(vt(yt,"students",fe.id),ee,{merge:!0})}else{const fe=vt(sr(yt,"students"));await gr(fe,ee)}}catch(J){throw console.error("Error importing student:",J),J}},de=()=>{i.value=1,a.value="",o.value="",l.value=[],c.value=[],u.value={},d.value="",f.value=[],h.value=[],_.value={successful:0,failed:0,errors:[],processingTime:0},T.value&&(T.value.value="")};return(z,J)=>(N(),M("div",H$,[J[30]||(J[30]=p("div",{style:{background:"#e8f5e8",border:"2px solid #4caf50",padding:"10px","margin-bottom":"20px","border-radius":"4px","text-align":"center"}},[p("strong",null," StudentBulkImporter Component Loaded Successfully")],-1)),J[31]||(J[31]=p("div",{class:"importer-header"},[p("h2",null,"Add Students - Bulk Import"),p("p",{class:"description"}," Import multiple students from a CSV file. The system will map CSV fields to the app's database structure and allow you to preview and validate the data before importing. ")],-1)),i.value===1?(N(),M("div",j$,[J[8]||(J[8]=p("div",{class:"step-header"},[p("h3",null,"Step 1: Upload CSV File"),p("p",null,"Select a CSV file containing student data. The first row should contain column headers.")],-1)),p("div",G$,[p("div",W$,[p("input",{type:"file",ref_key:"fileInput",ref:T,onChange:w,accept:".csv",class:"file-input",id:"csv-file"},null,544),p("label",z$,[J[4]||(J[4]=p("span",{class:"file-icon"},"",-1)),p("span",K$,oe(a.value||"Choose CSV File"),1)])]),d.value?(N(),M("div",q$,oe(d.value),1)):Re("",!0),a.value?(N(),M("div",X$,[p("p",null,[J[5]||(J[5]=p("strong",null,"File:",-1)),Ne(" "+oe(a.value),1)]),p("p",null,[J[6]||(J[6]=p("strong",null,"Size:",-1)),Ne(" "+oe(o.value),1)]),l.value.length>0?(N(),M("p",Y$,[J[7]||(J[7]=p("strong",null,"Records:",-1)),Ne(" "+oe(l.value.length),1)])):Re("",!0)])):Re("",!0)]),J[9]||(J[9]=Xn('<div class="sample-format" data-v-494a4282><h4 data-v-494a4282>Expected CSV Format:</h4><div class="format-example" data-v-494a4282><code data-v-494a4282> SSID,FirstName,LastName,Grade,Plan,CaseManagerId,ReviewDate,ReevalDate,MeetingDate,Period1Teacher,Period2Teacher,Period3Teacher,Period4Teacher,Period5Teacher,Period6Teacher,SHTeacher,ClassServices,SpeechProvider,OTProvider,PTProvider,ATProvider,Audiologist,BISProvider,DHHProvider,HNProvider,MHProvider,OMProvider,SCProvider,SWProvider,TRProvider,VIProvider,Flag1,Flag2,BIPPdfUrl,AtAGlancePdfUrl,Assessment,Instruction<br data-v-494a4282> 123456789,John,Doe,9,IEP,user003,2025-07-15,2025-12-15,2025-07-10,user007,user008,user009,user010,user011,user012,user013,&quot;SDC: English,RSP: Math&quot;,user020,user021,user022,user023,user024,user025,user026,user027,user028,user029,user030,user031,user032,user033,true,false,https://example.com/bip.pdf,https://example.com/ataglance.pdf,&quot;Allow for test re-takes if the score is below average...&quot;,Divide larger projects or assignments into manageable parts... </code></div><p class="format-note" data-v-494a4282><strong data-v-494a4282>Required fields:</strong> SSID, FirstName, LastName, Grade<br data-v-494a4282><strong data-v-494a4282>App Structure:</strong> All fields map to the app data structure in your database<br data-v-494a4282><strong data-v-494a4282>Schedule fields:</strong> Period1Teacher through Period6Teacher and SHTeacher (Firebase user IDs like user001, user002, etc.)<br data-v-494a4282><strong data-v-494a4282>Provider fields:</strong> All service provider fields (Firebase user IDs like user020, user021, etc.)<br data-v-494a4282><strong data-v-494a4282>Class Services:</strong> Comma-separated list (e.g., &quot;SDC: English,RSP: Math,Co-teach: Science&quot;)<br data-v-494a4282><strong data-v-494a4282>Dates:</strong> Use YYYY-MM-DD format (e.g., 2025-07-15)<br data-v-494a4282><strong data-v-494a4282>Flags:</strong> Use true/false or 1/0<br data-v-494a4282><strong data-v-494a4282>Accommodations:</strong> Text fields for assessment and instruction<br data-v-494a4282><strong data-v-494a4282>Note:</strong> Teacher and provider IDs will be automatically mapped from names, emails, or Aeries IDs if user lookup is available </p></div>',1)),p("div",Q$,[p("button",{onClick:j,disabled:!l.value.length,class:"btn btn-primary"}," Next: Map Fields ",8,J$)])])):Re("",!0),i.value===2?(N(),M("div",Z$,[J[15]||(J[15]=p("div",{class:"step-header"},[p("h3",null,"Step 2: Map CSV Fields"),p("p",null,"Map your CSV columns to the app's database fields. Required fields are marked with *")],-1)),p("div",eH,[p("div",tH,[J[12]||(J[12]=Xn('<div class="mapping-header" data-v-494a4282><div class="csv-column" data-v-494a4282>CSV Column</div><div class="arrow" data-v-494a4282></div><div class="app-field" data-v-494a4282>App Database Field</div><div class="sample-data" data-v-494a4282>Sample Data</div></div>',1)),(N(!0),M(Pe,null,We(c.value,(me,Y)=>(N(),M("div",{key:Y,class:"mapping-row"},[p("div",rH,[p("strong",null,oe(me),1)]),J[11]||(J[11]=p("div",{class:"arrow"},"",-1)),p("div",nH,[Me(p("select",{"onUpdate:modelValue":K=>u.value[me]=K,class:"field-select"},J[10]||(J[10]=[Xn('<option value="" data-v-494a4282>-- Skip this field --</option><optgroup label="Required Fields" data-v-494a4282><option value="app.studentData.ssid" data-v-494a4282>SSID (State Student ID) *</option><option value="app.studentData.firstName" data-v-494a4282>First Name *</option><option value="app.studentData.lastName" data-v-494a4282>Last Name *</option><option value="app.studentData.grade" data-v-494a4282>Grade *</option></optgroup><optgroup label="Student Information" data-v-494a4282><option value="app.studentData.plan" data-v-494a4282>Plan Type (IEP/504/RTI/None)</option><option value="app.studentData.caseManagerId" data-v-494a4282>Case Manager ID</option></optgroup><optgroup label="Important Dates" data-v-494a4282><option value="app.dates.reviewDate" data-v-494a4282>Review Date</option><option value="app.dates.reevalDate" data-v-494a4282>Reevaluation Date</option><option value="app.dates.meetingDate" data-v-494a4282>Meeting Date</option></optgroup><optgroup label="Class Schedule" data-v-494a4282><option value="app.schedule.periods.1" data-v-494a4282>Period 1 Teacher ID</option><option value="app.schedule.periods.2" data-v-494a4282>Period 2 Teacher ID</option><option value="app.schedule.periods.3" data-v-494a4282>Period 3 Teacher ID</option><option value="app.schedule.periods.4" data-v-494a4282>Period 4 Teacher ID</option><option value="app.schedule.periods.5" data-v-494a4282>Period 5 Teacher ID</option><option value="app.schedule.periods.6" data-v-494a4282>Period 6 Teacher ID</option><option value="app.schedule.periods.SH" data-v-494a4282>Study Hall Teacher ID</option><option value="app.schedule.classServices" data-v-494a4282>Class Services (Comma-separated)</option></optgroup><optgroup label="Service Providers" data-v-494a4282><option value="app.providers.speechId" data-v-494a4282>Speech Provider ID</option><option value="app.providers.otId" data-v-494a4282>OT Provider ID</option><option value="app.providers.ptId" data-v-494a4282>PT Provider ID</option><option value="app.providers.atId" data-v-494a4282>AT Provider ID</option><option value="app.providers.audId" data-v-494a4282>Audiologist ID</option><option value="app.providers.bisId" data-v-494a4282>BIS Provider ID</option><option value="app.providers.dhhId" data-v-494a4282>DHH Provider ID</option><option value="app.providers.hnId" data-v-494a4282>HN Provider ID</option><option value="app.providers.mhId" data-v-494a4282>MH Provider ID</option><option value="app.providers.omId" data-v-494a4282>OM Provider ID</option><option value="app.providers.scId" data-v-494a4282>SC Provider ID</option><option value="app.providers.swId" data-v-494a4282>SW Provider ID</option><option value="app.providers.trId" data-v-494a4282>TR Provider ID</option><option value="app.providers.viId" data-v-494a4282>VI Provider ID</option></optgroup><optgroup label="Flags" data-v-494a4282><option value="app.flags.flag1" data-v-494a4282>Flag 1 (Boolean)</option><option value="app.flags.flag2" data-v-494a4282>Flag 2 (Boolean)</option></optgroup><optgroup label="Documents" data-v-494a4282><option value="app.documents.bipPdfUrl" data-v-494a4282>BIP PDF URL</option><option value="app.documents.ataglancePdfUrl" data-v-494a4282>At-A-Glance PDF URL</option></optgroup><optgroup label="Accommodations" data-v-494a4282><option value="app.accommodations.assessment" data-v-494a4282>Assessment Accommodations</option><option value="app.accommodations.instruction" data-v-494a4282>Instructional Accommodations</option></optgroup>',9)]),8,sH),[[vr,u.value[me]]])]),p("div",aH,[p("code",null,oe(I(me)),1)])]))),128))]),p("div",{class:"auto-mapping-section"},[J[13]||(J[13]=p("h4",null,"Quick Mapping Options:",-1)),p("div",{class:"quick-actions"},[p("button",{onClick:y,class:"btn btn-secondary"}," Auto-map Common Fields "),p("button",{onClick:x,class:"btn btn-secondary"}," Clear All Mappings ")])]),f.value.length>0?(N(),M("div",iH,[J[14]||(J[14]=p("h4",null,"Mapping Issues:",-1)),p("ul",null,[(N(!0),M(Pe,null,We(f.value,me=>(N(),M("li",{key:me,class:"error-item"},oe(me),1))),128))])])):Re("",!0)]),p("div",oH,[p("button",{onClick:O,class:"btn btn-secondary"}," Back "),p("button",{onClick:j,disabled:!C.value,class:"btn btn-primary"}," Next: Preview Data ",8,lH)])])):Re("",!0),i.value===3?(N(),M("div",cH,[J[23]||(J[23]=p("div",{class:"step-header"},[p("h3",null,"Step 3: Preview and Validate"),p("p",null,"Review the mapped data before importing. Check for any validation errors.")],-1)),p("div",uH,[p("div",dH,[p("div",fH,[J[16]||(J[16]=p("span",{class:"stat-label"},"Total Records:",-1)),p("span",hH,oe(l.value.length),1)]),p("div",pH,[J[17]||(J[17]=p("span",{class:"stat-label"},"Valid Records:",-1)),p("span",mH,oe(R.value.length),1)]),p("div",vH,[J[18]||(J[18]=p("span",{class:"stat-label"},"Invalid Records:",-1)),p("span",gH,oe(D.value.length),1)])]),p("div",xH,[p("table",yH,[J[19]||(J[19]=p("thead",null,[p("tr",null,[p("th",null,"Status"),p("th",null,"SSID"),p("th",null,"Name"),p("th",null,"Grade"),p("th",null,"Plan"),p("th",null,"Case Manager"),p("th",null,"Issues")])],-1)),p("tbody",null,[(N(!0),M(Pe,null,We(h.value,(me,Y)=>{var K,ee,fe,ve,Q,re,be,Te;return N(),M("tr",{key:Y,class:at({"invalid-row":me.errors.length>0})},[p("td",null,[p("span",{class:at(["status-badge",me.errors.length>0?"error":"valid"])},oe(me.errors.length>0?"Error":"Valid"),3)]),p("td",null,oe(me.data.ssid||((ee=(K=me.data.app)==null?void 0:K.studentData)==null?void 0:ee.ssid)||"Missing"),1),p("td",null,oe(L(me.data)),1),p("td",null,oe(((ve=(fe=me.data.app)==null?void 0:fe.studentData)==null?void 0:ve.grade)||"Missing"),1),p("td",null,oe(((re=(Q=me.data.app)==null?void 0:Q.studentData)==null?void 0:re.plan)||"Not set"),1),p("td",null,oe(((Te=(be=me.data.app)==null?void 0:be.studentData)==null?void 0:Te.caseManagerId)||"Not set"),1),p("td",null,[me.errors.length>0?(N(),M("ul",EH,[(N(!0),M(Pe,null,We(me.errors,_e=>(N(),M("li",{key:_e,class:"error-item"},oe(_e),1))),128))])):(N(),M("span",bH,"No issues"))])],2)}),128))])])]),p("div",_H,[J[22]||(J[22]=p("h4",null,"Import Options:",-1)),p("div",SH,[p("label",TH,[Me(p("input",{type:"radio","onUpdate:modelValue":J[0]||(J[0]=me=>v.value=me),value:"valid-only"},null,512),[[kn,v.value]]),p("span",null,"Import only valid records ("+oe(R.value.length)+" records)",1)]),p("label",AH,[Me(p("input",{type:"radio","onUpdate:modelValue":J[1]||(J[1]=me=>v.value=me),value:"all"},null,512),[[kn,v.value]]),J[20]||(J[20]=p("span",null,"Import all records (may cause errors for invalid data)",-1))]),p("label",wH,[Me(p("input",{type:"checkbox","onUpdate:modelValue":J[2]||(J[2]=me=>m.value=me)},null,512),[[Et,m.value]]),J[21]||(J[21]=p("span",null,"Update existing students if SSID already exists",-1))])])])]),p("div",CH,[p("button",{onClick:O,class:"btn btn-secondary"}," Back "),p("button",{onClick:G,disabled:g.value||v.value==="valid-only"&&R.value.length===0,class:"btn btn-primary"},oe(g.value?"Importing...":`Import ${v.value==="valid-only"?R.value.length:l.value.length} Students`),9,IH)])])):Re("",!0),i.value===4?(N(),M("div",kH,[J[28]||(J[28]=p("div",{class:"step-header"},[p("h3",null,"Step 4: Import Complete"),p("p",null,"Your bulk import has been completed. Review the results below.")],-1)),p("div",DH,[p("div",RH,[p("div",FH,[J[24]||(J[24]=p("span",{class:"stat-label"},"Successfully Imported:",-1)),p("span",PH,oe(_.value.successful),1)]),p("div",OH,[J[25]||(J[25]=p("span",{class:"stat-label"},"Failed to Import:",-1)),p("span",NH,oe(_.value.failed),1)]),p("div",LH,[J[26]||(J[26]=p("span",{class:"stat-label"},"Total Processing Time:",-1)),p("span",BH,oe(_.value.processingTime)+"ms",1)])]),_.value.errors.length>0?(N(),M("div",MH,[J[27]||(J[27]=p("h4",null,"Import Errors:",-1)),p("ul",null,[(N(!0),M(Pe,null,We(_.value.errors,me=>(N(),M("li",{key:me,class:"error-item"},oe(me),1))),128))])])):Re("",!0),p("div",UH,[p("button",{onClick:de,class:"btn btn-secondary"}," Import More Students "),p("button",{onClick:J[3]||(J[3]=me=>z.$emit("close")),class:"btn btn-primary"}," Close ")])])])):Re("",!0),g.value?(N(),M("div",VH,[p("div",$H,[J[29]||(J[29]=p("div",{class:"loading-spinner"},null,-1)),p("p",null,"Importing students... "+oe(b.value)+"%",1),p("div",HH,[p("div",{class:"progress-fill",style:Cn({width:b.value+"%"})},null,4)])])])):Re("",!0)]))}},GH=_t(jH,[["__scopeId","data-v-494a4282"]]),WH={class:"admin-permissions"},zH={__name:"AdminPermissions",setup(t){return(e,r)=>(N(),M("div",WH,[r[0]||(r[0]=p("h2",null,"Role Permissions Matrix",-1)),rt(HC)]))}},KH=_t(zH,[["__scopeId","data-v-3b26c12f"]]);var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function J1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var GC={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(Nt,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(E){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(y){var x=R(y);x.chunkSize=parseInt(x.chunkSize),y.step||y.chunk||(x.chunkSize=null),this._handle=new m(x),(this._handle.streamer=this)._config=x}).call(this,E),this.parseChunk=function(y,x){var I=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<I){let k=this._config.newline;k||(A=this._config.quoteChar||'"',k=this._handle.guessLineEndings(y,A)),y=[...y.split(k).slice(I)].join(k)}this.isFirstChunk&&w(this._config.beforeFirstChunk)&&(A=this._config.beforeFirstChunk(y))!==void 0&&(y=A),this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+y,A=(this._partialLine="",this._handle.parse(I,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(y=A.meta.cursor,I=(this._finished||(this._partialLine=I.substring(y-this._baseIndex),this._baseIndex=y),A&&A.data&&(this._rowCount+=A.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:A,workerId:c.WORKER_ID,finished:I});else if(w(this._config.chunk)&&!x){if(this._config.chunk(A,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=A=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(A.data),this._completeResults.errors=this._completeResults.errors.concat(A.errors),this._completeResults.meta=A.meta),this._completed||!I||!w(this._config.complete)||A&&A.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),I||A&&A.meta.paused||this._nextChunk(),A}this._halted=!0},this._sendError=function(y){w(this._config.error)?this._config.error(y):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:y,finished:!1})}}function d(E){var y;(E=E||{}).chunkSize||(E.chunkSize=c.RemoteChunkSize),u.call(this,E),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(y=new XMLHttpRequest,this._config.withCredentials&&(y.withCredentials=this._config.withCredentials),i||(y.onload=D(this._chunkLoaded,this),y.onerror=D(this._chunkError,this)),y.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var x,I=this._config.downloadRequestHeaders;for(x in I)y.setRequestHeader(x,I[x])}var A;this._config.chunkSize&&(A=this._start+this._config.chunkSize-1,y.setRequestHeader("Range","bytes="+this._start+"-"+A));try{y.send(this._config.downloadRequestBody)}catch(k){this._chunkError(k.message)}i&&y.status===0&&this._chunkError()}},this._chunkLoaded=function(){y.readyState===4&&(y.status<200||400<=y.status?this._chunkError():(this._start+=this._config.chunkSize||y.responseText.length,this._finished=!this._config.chunkSize||this._start>=(x=>(x=x.getResponseHeader("Content-Range"))!==null?parseInt(x.substring(x.lastIndexOf("/")+1)):-1)(y),this.parseChunk(y.responseText)))},this._chunkError=function(x){x=y.statusText||x,this._sendError(new Error(x))}}function f(E){(E=E||{}).chunkSize||(E.chunkSize=c.LocalChunkSize),u.call(this,E);var y,x,I=typeof FileReader<"u";this.stream=function(A){this._input=A,x=A.slice||A.webkitSlice||A.mozSlice,I?((y=new FileReader).onload=D(this._chunkLoaded,this),y.onerror=D(this._chunkError,this)):y=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input,k=(this._config.chunkSize&&(k=Math.min(this._start+this._config.chunkSize,this._input.size),A=x.call(A,this._start,k)),y.readAsText(A,this._config.encoding));I||this._chunkLoaded({target:{result:k}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(y.error)}}function h(E){var y;u.call(this,E=E||{}),this.stream=function(x){return y=x,this._nextChunk()},this._nextChunk=function(){var x,I;if(!this._finished)return x=this._config.chunkSize,y=x?(I=y.substring(0,x),y.substring(x)):(I=y,""),this._finished=!y,this.parseChunk(I)}}function v(E){u.call(this,E=E||{});var y=[],x=!0,I=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&y.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),y.length?this.parseChunk(y.shift()):x=!0},this._streamData=D(function(A){try{y.push(typeof A=="string"?A:A.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(y.shift()))}catch(k){this._streamError(k)}},this),this._streamError=D(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=D(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(E){var y,x,I,A,k=Math.pow(2,53),U=-k,W=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,P=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,B=this,H=0,L=0,Z=!1,j=!1,O=[],G={data:[],errors:[],meta:{}};function X(de){return E.skipEmptyLines==="greedy"?de.join("").trim()==="":de.length===1&&de[0].length===0}function q(){if(G&&I&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),I=!1),E.skipEmptyLines&&(G.data=G.data.filter(function(me){return!X(me)})),pe()){let me=function(Y,K){w(E.transformHeader)&&(Y=E.transformHeader(Y,K)),O.push(Y)};if(G)if(Array.isArray(G.data[0])){for(var de=0;pe()&&de<G.data.length;de++)G.data[de].forEach(me);G.data.splice(0,1)}else G.data.forEach(me)}function z(me,Y){for(var K=E.header?{}:[],ee=0;ee<me.length;ee++){var fe=ee,ve=me[ee],ve=((Q,re)=>(be=>(E.dynamicTypingFunction&&E.dynamicTyping[be]===void 0&&(E.dynamicTyping[be]=E.dynamicTypingFunction(be)),(E.dynamicTyping[be]||E.dynamicTyping)===!0))(Q)?re==="true"||re==="TRUE"||re!=="false"&&re!=="FALSE"&&((be=>{if(W.test(be)&&(be=parseFloat(be),U<be&&be<k))return 1})(re)?parseFloat(re):P.test(re)?new Date(re):re===""?null:re):re)(fe=E.header?ee>=O.length?"__parsed_extra":O[ee]:fe,ve=E.transform?E.transform(ve,fe):ve);fe==="__parsed_extra"?(K[fe]=K[fe]||[],K[fe].push(ve)):K[fe]=ve}return E.header&&(ee>O.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+O.length+" fields but parsed "+ee,L+Y):ee<O.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+O.length+" fields but parsed "+ee,L+Y)),K}var J;G&&(E.header||E.dynamicTyping||E.transform)&&(J=1,!G.data.length||Array.isArray(G.data[0])?(G.data=G.data.map(z),J=G.data.length):G.data=z(G.data,0),E.header&&G.meta&&(G.meta.fields=O),L+=J)}function pe(){return E.header&&O.length===0}function ie(de,z,J,me){de={type:de,code:z,message:J},me!==void 0&&(de.row=me),G.errors.push(de)}w(E.step)&&(A=E.step,E.step=function(de){G=de,pe()?q():(q(),G.data.length!==0&&(H+=de.data.length,E.preview&&H>E.preview?x.abort():(G.data=G.data[0],A(G,B))))}),this.parse=function(de,z,J){var me=E.quoteChar||'"',me=(E.newline||(E.newline=this.guessLineEndings(de,me)),I=!1,E.delimiter?w(E.delimiter)&&(E.delimiter=E.delimiter(de),G.meta.delimiter=E.delimiter):((me=((Y,K,ee,fe,ve)=>{var Q,re,be,Te;ve=ve||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var _e=0;_e<ve.length;_e++){for(var ke,Be=ve[_e],Ce=0,je=0,Ue=0,He=(be=void 0,new b({comments:fe,delimiter:Be,newline:K,preview:10}).parse(Y)),qe=0;qe<He.data.length;qe++)ee&&X(He.data[qe])?Ue++:(ke=He.data[qe].length,je+=ke,be===void 0?be=ke:0<ke&&(Ce+=Math.abs(ke-be),be=ke));0<He.data.length&&(je/=He.data.length-Ue),(re===void 0||Ce<=re)&&(Te===void 0||Te<je)&&1.99<je&&(re=Ce,Q=Be,Te=je)}return{successful:!!(E.delimiter=Q),bestDelimiter:Q}})(de,E.newline,E.skipEmptyLines,E.comments,E.delimitersToGuess)).successful?E.delimiter=me.bestDelimiter:(I=!0,E.delimiter=c.DefaultDelimiter),G.meta.delimiter=E.delimiter),R(E));return E.preview&&E.header&&me.preview++,y=de,x=new b(me),G=x.parse(y,z,J),q(),Z?{meta:{paused:!0}}:G||{meta:{paused:!1}}},this.paused=function(){return Z},this.pause=function(){Z=!0,x.abort(),y=w(E.chunk)?"":y.substring(x.getCharIndex())},this.resume=function(){B.streamer._halted?(Z=!1,B.streamer.parseChunk(y,!0)):setTimeout(B.resume,3)},this.aborted=function(){return j},this.abort=function(){j=!0,x.abort(),G.meta.aborted=!0,w(E.complete)&&E.complete(G),y=""},this.guessLineEndings=function(Y,me){Y=Y.substring(0,1048576);var me=new RegExp(g(me)+"([^]*?)"+g(me),"gm"),J=(Y=Y.replace(me,"")).split("\r"),me=Y.split(`
`),Y=1<me.length&&me[0].length<J[0].length;if(J.length===1||Y)return`
`;for(var K=0,ee=0;ee<J.length;ee++)J[ee][0]===`
`&&K++;return K>=J.length/2?`\r
`:"\r"}}function g(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(E){var y=(E=E||{}).delimiter,x=E.newline,I=E.comments,A=E.step,k=E.preview,U=E.fastMode,W=null,P=!1,B=E.quoteChar==null?'"':E.quoteChar,H=B;if(E.escapeChar!==void 0&&(H=E.escapeChar),(typeof y!="string"||-1<c.BAD_DELIMITERS.indexOf(y))&&(y=","),I===y)throw new Error("Comment character same as delimiter");I===!0?I="#":(typeof I!="string"||-1<c.BAD_DELIMITERS.indexOf(I))&&(I=!1),x!==`
`&&x!=="\r"&&x!==`\r
`&&(x=`
`);var L=0,Z=!1;this.parse=function(j,O,G){if(typeof j!="string")throw new Error("Input must be a string");var X=j.length,q=y.length,pe=x.length,ie=I.length,de=w(A),z=[],J=[],me=[],Y=L=0;if(!j)return Ce();if(U||U!==!1&&j.indexOf(B)===-1){for(var K=j.split(x),ee=0;ee<K.length;ee++){if(me=K[ee],L+=me.length,ee!==K.length-1)L+=x.length;else if(G)return Ce();if(!I||me.substring(0,ie)!==I){if(de){if(z=[],Te(me.split(y)),je(),Z)return Ce()}else Te(me.split(y));if(k&&k<=ee)return z=z.slice(0,k),Ce(!0)}}return Ce()}for(var fe=j.indexOf(y,L),ve=j.indexOf(x,L),Q=new RegExp(g(H)+g(B),"g"),re=j.indexOf(B,L);;)if(j[L]===B)for(re=L,L++;;){if((re=j.indexOf(B,re+1))===-1)return G||J.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:z.length,index:L}),ke();if(re===X-1)return ke(j.substring(L,re).replace(Q,B));if(B===H&&j[re+1]===H)re++;else if(B===H||re===0||j[re-1]!==H){fe!==-1&&fe<re+1&&(fe=j.indexOf(y,re+1));var be=_e((ve=ve!==-1&&ve<re+1?j.indexOf(x,re+1):ve)===-1?fe:Math.min(fe,ve));if(j.substr(re+1+be,q)===y){me.push(j.substring(L,re).replace(Q,B)),j[L=re+1+be+q]!==B&&(re=j.indexOf(B,L)),fe=j.indexOf(y,L),ve=j.indexOf(x,L);break}if(be=_e(ve),j.substring(re+1+be,re+1+be+pe)===x){if(me.push(j.substring(L,re).replace(Q,B)),Be(re+1+be+pe),fe=j.indexOf(y,L),re=j.indexOf(B,L),de&&(je(),Z))return Ce();if(k&&z.length>=k)return Ce(!0);break}J.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:z.length,index:L}),re++}}else if(I&&me.length===0&&j.substring(L,L+ie)===I){if(ve===-1)return Ce();L=ve+pe,ve=j.indexOf(x,L),fe=j.indexOf(y,L)}else if(fe!==-1&&(fe<ve||ve===-1))me.push(j.substring(L,fe)),L=fe+q,fe=j.indexOf(y,L);else{if(ve===-1)break;if(me.push(j.substring(L,ve)),Be(ve+pe),de&&(je(),Z))return Ce();if(k&&z.length>=k)return Ce(!0)}return ke();function Te(Ue){z.push(Ue),Y=L}function _e(Ue){var He=0;return He=Ue!==-1&&(Ue=j.substring(re+1,Ue))&&Ue.trim()===""?Ue.length:He}function ke(Ue){return G||(Ue===void 0&&(Ue=j.substring(L)),me.push(Ue),L=X,Te(me),de&&je()),Ce()}function Be(Ue){L=Ue,Te(me),me=[],ve=j.indexOf(x,L)}function Ce(Ue){if(E.header&&!O&&z.length&&!P){var He=z[0],qe=Object.create(null),ye=new Set(He);let xe=!1;for(let Ee=0;Ee<He.length;Ee++){let Fe=He[Ee];if(qe[Fe=w(E.transformHeader)?E.transformHeader(Fe,Ee):Fe]){let Ge,tt=qe[Fe];for(;Ge=Fe+"_"+tt,tt++,ye.has(Ge););ye.add(Ge),He[Ee]=Ge,qe[Fe]++,xe=!0,(W=W===null?{}:W)[Ge]=Fe}else qe[Fe]=1,He[Ee]=Fe;ye.add(Fe)}xe&&console.warn("Duplicate headers found and renamed."),P=!0}return{data:z,errors:J,meta:{delimiter:y,linebreak:x,aborted:Z,truncated:!!Ue,cursor:Y+(O||0),renamedHeaders:W}}}function je(){A(Ce()),z=[],J=[]}},this.abort=function(){Z=!0},this.getCharIndex=function(){return L}}function _(E){var y=E.data,x=o[y.workerId],I=!1;if(y.error)x.userError(y.error,y.file);else if(y.results&&y.results.data){var A={abort:function(){I=!0,T(y.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(w(x.userStep)){for(var k=0;k<y.results.data.length&&(x.userStep({data:y.results.data[k],errors:y.results.errors,meta:y.results.meta},A),!I);k++);delete y.results}else w(x.userChunk)&&(x.userChunk(y.results,A,y.file),delete y.results)}y.finished&&!I&&T(y.workerId,y.results)}function T(E,y){var x=o[E];w(x.userComplete)&&x.userComplete(y),x.terminate(),delete o[E]}function C(){throw new Error("Not implemented.")}function R(E){if(typeof E!="object"||E===null)return E;var y,x=Array.isArray(E)?[]:{};for(y in E)x[y]=R(E[y]);return x}function D(E,y){return function(){E.apply(y,arguments)}}function w(E){return typeof E=="function"}return c.parse=function(E,y){var x=(y=y||{}).dynamicTyping||!1;if(w(x)&&(y.dynamicTypingFunction=x,x={}),y.dynamicTyping=x,y.transform=!!w(y.transform)&&y.transform,!y.worker||!c.WORKERS_SUPPORTED)return x=null,c.NODE_STREAM_INPUT,typeof E=="string"?(E=(I=>I.charCodeAt(0)!==65279?I:I.slice(1))(E),x=new(y.download?d:h)(y)):E.readable===!0&&w(E.read)&&w(E.on)?x=new v(y):(n.File&&E instanceof File||E instanceof Object)&&(x=new f(y)),x.stream(E);(x=(()=>{var I;return!!c.WORKERS_SUPPORTED&&(I=(()=>{var A=n.URL||n.webkitURL||null,k=r.toString();return c.BLOB_URL||(c.BLOB_URL=A.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",k,")();"],{type:"text/javascript"})))})(),(I=new n.Worker(I)).onmessage=_,I.id=l++,o[I.id]=I)})()).userStep=y.step,x.userChunk=y.chunk,x.userComplete=y.complete,x.userError=y.error,y.step=w(y.step),y.chunk=w(y.chunk),y.complete=w(y.complete),y.error=w(y.error),delete y.worker,x.postMessage({input:E,config:y,workerId:x.id})},c.unparse=function(E,y){var x=!1,I=!0,A=",",k=`\r
`,U='"',W=U+U,P=!1,B=null,H=!1,L=((()=>{if(typeof y=="object"){if(typeof y.delimiter!="string"||c.BAD_DELIMITERS.filter(function(O){return y.delimiter.indexOf(O)!==-1}).length||(A=y.delimiter),typeof y.quotes!="boolean"&&typeof y.quotes!="function"&&!Array.isArray(y.quotes)||(x=y.quotes),typeof y.skipEmptyLines!="boolean"&&typeof y.skipEmptyLines!="string"||(P=y.skipEmptyLines),typeof y.newline=="string"&&(k=y.newline),typeof y.quoteChar=="string"&&(U=y.quoteChar),typeof y.header=="boolean"&&(I=y.header),Array.isArray(y.columns)){if(y.columns.length===0)throw new Error("Option columns is empty");B=y.columns}y.escapeChar!==void 0&&(W=y.escapeChar+U),y.escapeFormulae instanceof RegExp?H=y.escapeFormulae:typeof y.escapeFormulae=="boolean"&&y.escapeFormulae&&(H=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(U),"g"));if(typeof E=="string"&&(E=JSON.parse(E)),Array.isArray(E)){if(!E.length||Array.isArray(E[0]))return Z(null,E,P);if(typeof E[0]=="object")return Z(B||Object.keys(E[0]),E,P)}else if(typeof E=="object")return typeof E.data=="string"&&(E.data=JSON.parse(E.data)),Array.isArray(E.data)&&(E.fields||(E.fields=E.meta&&E.meta.fields||B),E.fields||(E.fields=Array.isArray(E.data[0])?E.fields:typeof E.data[0]=="object"?Object.keys(E.data[0]):[]),Array.isArray(E.data[0])||typeof E.data[0]=="object"||(E.data=[E.data])),Z(E.fields||[],E.data||[],P);throw new Error("Unable to serialize unrecognized input");function Z(O,G,X){var q="",pe=(typeof O=="string"&&(O=JSON.parse(O)),typeof G=="string"&&(G=JSON.parse(G)),Array.isArray(O)&&0<O.length),ie=!Array.isArray(G[0]);if(pe&&I){for(var de=0;de<O.length;de++)0<de&&(q+=A),q+=j(O[de],de);0<G.length&&(q+=k)}for(var z=0;z<G.length;z++){var J=(pe?O:G[z]).length,me=!1,Y=pe?Object.keys(G[z]).length===0:G[z].length===0;if(X&&!pe&&(me=X==="greedy"?G[z].join("").trim()==="":G[z].length===1&&G[z][0].length===0),X==="greedy"&&pe){for(var K=[],ee=0;ee<J;ee++){var fe=ie?O[ee]:ee;K.push(G[z][fe])}me=K.join("").trim()===""}if(!me){for(var ve=0;ve<J;ve++){0<ve&&!Y&&(q+=A);var Q=pe&&ie?O[ve]:ve;q+=j(G[z][Q],ve)}z<G.length-1&&(!X||0<J&&!Y)&&(q+=k)}}return q}function j(O,G){var X,q;return O==null?"":O.constructor===Date?JSON.stringify(O).slice(1,25):(q=!1,H&&typeof O=="string"&&H.test(O)&&(O="'"+O,q=!0),X=O.toString().replace(L,W),(q=q||x===!0||typeof x=="function"&&x(O,G)||Array.isArray(x)&&x[G]||((pe,ie)=>{for(var de=0;de<ie.length;de++)if(-1<pe.indexOf(ie[de]))return!0;return!1})(X,c.BAD_DELIMITERS)||-1<X.indexOf(A)||X.charAt(0)===" "||X.charAt(X.length-1)===" ")?U+X+U:X)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=b,c.ParserHandle=m,c.NetworkStreamer=d,c.FileStreamer=f,c.StringStreamer=h,c.ReadableStreamStreamer=v,n.jQuery&&((s=n.jQuery).fn.parse=function(E){var y=E.config||{},x=[];return this.each(function(k){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var U=0;U<this.files.length;U++)x.push({file:this.files[U],inputElem:this,instanceConfig:s.extend({},y)})}),I(),this;function I(){if(x.length===0)w(E.complete)&&E.complete();else{var k,U,W,P,B=x[0];if(w(E.before)){var H=E.before(B.file,B.inputElem);if(typeof H=="object"){if(H.action==="abort")return k="AbortError",U=B.file,W=B.inputElem,P=H.reason,void(w(E.error)&&E.error({name:k},U,W,P));if(H.action==="skip")return void A();typeof H.config=="object"&&(B.instanceConfig=s.extend(B.instanceConfig,H.config))}else if(H==="skip")return void A()}var L=B.instanceConfig.complete;B.instanceConfig.complete=function(Z){w(L)&&L(Z,B.file,B.inputElem),A()},c.parse(B.file,B.instanceConfig)}}function A(){x.splice(0,1),I()}}),a&&(n.onmessage=function(E){E=E.data,c.WORKER_ID===void 0&&E&&(c.WORKER_ID=E.workerId),typeof E.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(E.input,E.config),finished:!0}):(n.File&&E.input instanceof File||E.input instanceof Object)&&(E=c.parse(E.input,E.config))&&n.postMessage({workerId:c.WORKER_ID,results:E,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(f.prototype=Object.create(u.prototype)).constructor=f,(h.prototype=Object.create(h.prototype)).constructor=h,(v.prototype=Object.create(u.prototype)).constructor=v,c})})(GC);var qH=GC.exports;const WC=jC(qH),bo=ro();function zC(t){return t.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,r)=>r.toUpperCase()).replace(/^[A-Z]/,e=>e.toLowerCase())}async function XH(t,e){if(!t)return null;const r=Object.values(e).find(n=>{var s;return n.aeriesId===t||n.aeriesId===parseInt(t)||((s=n.aeriesId)==null?void 0:s.toString())===(t==null?void 0:t.toString())});return r?r.id:(console.warn(`No Firebase user found for Aeries teacher ID: ${t}`),null)}function YH(t){return{sourcedId:"stateId",SSID:"stateId",StateStudentID:"stateId",StudentNumber:"localId",givenName:"firstName",FirstName:"firstName",familyName:"lastName",LastName:"lastName",middleName:"middleName",MiddleName:"middleName",email:"email",Email:"email",phone:"phone",Phone:"phone",dateOfBirth:"birthDate",DOB:"birthDate",sex:"gender",Gender:"gender",grade:"grade",Grade:"grade",Address:"address",City:"city",State:"state",ZipCode:"zipCode",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",AttendanceRate:"attendanceRate",attendanceRate:"attendanceRate",Period1TeacherId:"schedule.periods.1",period1TeacherId:"schedule.periods.1",Period2TeacherId:"schedule.periods.2",period2TeacherId:"schedule.periods.2",Period3TeacherId:"schedule.periods.3",period3TeacherId:"schedule.periods.3",Period4TeacherId:"schedule.periods.4",period4TeacherId:"schedule.periods.4",Period5TeacherId:"schedule.periods.5",period5TeacherId:"schedule.periods.5",Period6TeacherId:"schedule.periods.6",period6TeacherId:"schedule.periods.6",Period7TeacherId:"schedule.periods.7",period7TeacherId:"schedule.periods.7",SHTeacherId:"schedule.periods.SH",shTeacherId:"schedule.periods.SH"}[t]||zC(t)}function QH(t){return{SSID:"ssid",FirstName:"firstName",LastName:"lastName",MiddleName:"middleName",Grade:"grade",DOB:"dob",Gender:"gender",Ethnicity:"ethnicity",School:"school",Address:"address",City:"city",State:"state",ZipCode:"zipCode",Phone:"phone",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",ELL:"ell",504:"504",IEP:"iep",CaseManager:"caseManager",Disability:"disability",ServiceMinutes:"serviceMinutes",Goals:"goals",Notes:"notes",Plan:"plan",ReviewDate:"reviewDate",ReevalDate:"reevalDate",MeetingDate:"meetingDate",SpeechProvider:"speechProvider",MHProvider:"mhProvider",OTProvider:"otProvider",ProgramAccommodations:"programAccommodations",Accommodations:"programAccommodations",IEP_Services:"iepServices"}[t]||zC(t)}async function JH(t){return new Promise((e,r)=>{WC.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));const i=Object.keys(s[0]).map(o=>o.trim().toLowerCase());if(!(i.includes("sourcedid")||i.includes("ssid")||i.includes("statestudentid")))return r(new Error("Missing required 'sourcedId' or 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function ZH(t,e){var a;let r=0;const n=sr(bo,"users"),s=await Zr(n),i={};s.forEach(o=>{i[o.id]={id:o.id,...o.data()}}),console.log(`Loaded ${Object.keys(i).length} users for teacher ID mapping`);for(const o of t){const l=(a=o.sourcedId||o.SSID||o.ssid||o.StateStudentID||o.stateStudentId)==null?void 0:a.trim();if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={firstName:"",lastName:"",grade:"",birthDate:"",gender:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",parentName:"",parentPhone:"",parentEmail:"",attendanceRate:"",schedule:{periods:{}}};for(const u of e){const d=YH(u),f=o[u],h=f!=null&&typeof f=="string"?f.trim():f!=null?String(f):null;if(d.startsWith("schedule.periods.")){const v=d.split(".")[2];if(h){const m=await XH(h,i);m?(c.schedule.periods[v]=m,console.log(`Mapped Aeries teacher ID ${h} to Firebase user ID ${m} for period ${v}`)):console.warn(`Could not map Aeries teacher ID ${h} for period ${v}`)}}else c[d]=h}c.lastAeriesImport=new Date().toISOString(),console.log("Final aeriesData.schedule structure:",JSON.stringify(c.schedule,null,2));try{const u=sr(bo,"students"),d=ps(u,Ks("app.studentData.ssid","==",l)),f=await Zr(d);if(f.empty){const h=vt(sr(bo,"students")),v={app:{studentData:{ssid:l}},aeries:c,createdAt:Bo()};await gr(h,v),console.log(`Created new student ${h.id} with Aeries data for SSID ${l}`)}else{const h=f.docs[0];await gr(vt(bo,"students",h.id),{aeries:c},{merge:!0}),console.log(`Updated existing student ${h.id} with Aeries data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import Aeries data for SSID ${l}:`,u)}}return r}async function ej(t){return new Promise((e,r)=>{WC.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));if(!Object.keys(s[0]).some(a=>a.trim().toLowerCase()==="ssid"))return r(new Error("Missing required 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function tj(t,e){var n,s,i,a;let r=0;for(const o of t){const l=((n=o.SSID)==null?void 0:n.trim())||((s=o.ssid)==null?void 0:s.trim());if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={};for(const u of e){const d=QH(u);u==="IEP_Services"||u==="iep_services"?c[d]=((i=o[u])==null?void 0:i.split(";").map(f=>f.trim()))||[]:u==="ProgramAccommodations"||u==="Accommodations"?c[d]=((a=o[u])==null?void 0:a.split(";").map(f=>f.trim()))||[]:c[d]=o[u]}c.lastSeisImport=new Date().toISOString();try{const u=sr(bo,"students"),d=ps(u,Ks("app.studentData.ssid","==",l)),f=await Zr(d);if(f.empty){const h=vt(sr(bo,"students")),v={app:{studentData:{ssid:l}},seis:c,createdAt:Bo()};await gr(h,v),console.log(`Created new student ${h.id} with SEIS data for SSID ${l}`)}else{const h=f.docs[0];await gr(vt(bo,"students",h.id),{seis:c},{merge:!0}),console.log(`Updated existing student ${h.id} with SEIS data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import SEIS data for SSID ${l}:`,u)}}return r}const rj={name:"SeisImport",setup(){const t=he(null),e=he(null),r=he([]),n=he([]),s=he([]),i=he([]),a=he(""),o=he(!1),l=Ve(()=>r.value.length>0&&s.value.length>0),c=(h,v=!1)=>{a.value=h,o.value=v,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:h=>{const v=h.target.files[0];if(v){const m=Pd(v,{allowedTypes:["csv"],maxSize:10485760,fieldName:"SEIS Import File"});if(!m.isValid){c(m.error,!0),h.target.value="";return}const g=nn(v.name);if(!g.isSafe){c(`File name contains potentially dangerous content: ${g.threats.join(", ")}`,!0),h.target.value="";return}e.value=v}},previewFile:async()=>{const h=e.value;if(!h){c(" Please select a CSV file.",!0);return}if(!xs("seisPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const g=(await ej(h)).map(_=>{const T={};return Object.entries(_).forEach(([C,R])=>{const D=Tr(C,{trim:!0,maxLength:100,removeDangerous:!0});let w=R;if(typeof R=="string"){w=Tr(R,{trim:!0,maxLength:500,removeDangerous:!0});const E=nn(w);E.isSafe||(console.warn(`Security threat detected in SEIS data: ${E.threats.join(", ")}`),w="")}T[D]=w}),T});r.value=g,c(` Loaded ${r.value.length} rows.`);const b=Object.keys(r.value[0]||{}).filter(_=>_.length>0);n.value=b,s.value=[...b],i.value=r.value.slice(0,5)}catch(m){c(` Error: ${m.message}`,!0),console.error("SEIS Parse Error:",m)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!xs("seisImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} SEIS records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const v=r.value.map(g=>{const b={};return s.value.forEach(_=>{g[_]!==void 0&&(b[_]=g[_])}),b}),m=v.filter(g=>Object.values(g).some(_=>_&&typeof _=="string"&&_.trim().length>0));if(m.length===0){c(" No valid records found to import.",!0);return}if(m.length!==v.length){const g=v.length-m.length;c(` Skipping ${g} invalid records. Importing ${m.length} valid records.`)}await tj(m,s.value),c(` Successfully imported ${m.length} SEIS records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(v){c(` Import failed: ${v.message}`,!0),console.error("SEIS Import Error:",v)}}}}}},nj={class:"seis-import"},sj=["disabled"],aj={key:0,id:"seis-field-options"},ij=["value"],oj={key:1,id:"seis-preview-container",style:{"margin-top":"1rem"}},lj={border:"1",cellpadding:"4"},cj=["disabled"];function uj(t,e,r,n,s,i){return N(),M("div",nj,[e[5]||(e[5]=p("h3",null,"Upload SEIS CSV",-1)),p("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),p("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,sj),n.fieldOptions.length>0?(N(),M("div",aj,[e[4]||(e[4]=p("h4",null,"Select fields to import:",-1)),(N(!0),M(Pe,null,We(n.fieldOptions,a=>(N(),M("label",{key:a},[Me(p("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,ij),[[Et,n.selectedFields]]),Ne(" "+oe(a),1)]))),128))])):Re("",!0),n.previewData.length>0?(N(),M("div",oj,[p("table",lj,[p("thead",null,[p("tr",null,[(N(!0),M(Pe,null,We(n.fieldOptions,a=>(N(),M("th",{key:a},oe(a),1))),128))])]),p("tbody",null,[(N(!0),M(Pe,null,We(n.previewData,(a,o)=>(N(),M("tr",{key:o},[(N(!0),M(Pe,null,We(n.fieldOptions,l=>(N(),M("td",{key:l},oe(a[l]||""),1))),128))]))),128))])]),p("p",null,"Showing first "+oe(n.previewData.length)+" of "+oe(n.parsedData.length)+" rows.",1)])):Re("",!0),p("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,cj),p("p",{class:at(["status-msg",{error:n.isError}])},oe(n.statusMessage),3)])}const dj=_t(rj,[["render",uj],["__scopeId","data-v-b942d3b4"]]),fj={name:"AeriesImport",setup(){const t=he(null),e=he(null),r=he([]),n=he([]),s=he([]),i=he([]),a=he(""),o=he(!1),l=Ve(()=>r.value.length>0&&s.value.length>0),c=(h,v=!1)=>{a.value=h,o.value=v,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:h=>{const v=h.target.files[0];if(v){const m=Pd(v,{allowedTypes:["csv"],maxSize:10485760,fieldName:"Aeries Import File"});if(!m.isValid){c(m.error,!0),h.target.value="";return}const g=nn(v.name);if(!g.isSafe){c(`File name contains potentially dangerous content: ${g.threats.join(", ")}`,!0),h.target.value="";return}e.value=v}},previewFile:async()=>{const h=e.value;if(!h){c(" Please select a CSV file.",!0);return}if(!xs("aeriesPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const g=(await JH(h)).map(_=>{const T={};return Object.entries(_).forEach(([C,R])=>{const D=Tr(C,{trim:!0,maxLength:100,removeDangerous:!0});let w=R;if(typeof R=="string"){w=Tr(R,{trim:!0,maxLength:500,removeDangerous:!0});const E=nn(w);E.isSafe||(console.warn(`Security threat detected in Aeries data: ${E.threats.join(", ")}`),w="")}T[D]=w}),T});r.value=g,c(` Loaded ${r.value.length} rows.`);const b=Object.keys(r.value[0]||{}).filter(_=>_.length>0);n.value=b,s.value=[...b],i.value=r.value.slice(0,5)}catch(m){c(` Error: ${m.message}`,!0),console.error("Aeries Parse Error:",m)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!xs("aeriesImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} Aeries records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const v=r.value.map(g=>{const b={};return s.value.forEach(_=>{g[_]!==void 0&&(b[_]=g[_])}),b}),m=v.filter(g=>Object.values(g).some(_=>_&&typeof _=="string"&&_.trim().length>0));if(m.length===0){c(" No valid records found to import.",!0);return}if(m.length!==v.length){const g=v.length-m.length;c(` Skipping ${g} invalid records. Importing ${m.length} valid records.`)}await ZH(m,s.value),c(` Successfully imported ${m.length} Aeries records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(v){c(` Import failed: ${v.message}`,!0),console.error("Aeries Import Error:",v)}}}}}},hj={class:"aeries-import"},pj=["disabled"],mj={key:0,id:"aeries-field-options"},vj=["value"],gj={key:1,id:"aeries-preview-container",style:{"margin-top":"1rem"}},xj={border:"1",cellpadding:"4"},yj=["disabled"];function Ej(t,e,r,n,s,i){return N(),M("div",hj,[e[5]||(e[5]=p("h3",null,"Upload Aeries CSV",-1)),p("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),p("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,pj),n.fieldOptions.length>0?(N(),M("div",mj,[e[4]||(e[4]=p("h4",null,"Select fields to import:",-1)),(N(!0),M(Pe,null,We(n.fieldOptions,a=>(N(),M("label",{key:a},[Me(p("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,vj),[[Et,n.selectedFields]]),Ne(" "+oe(a),1)]))),128))])):Re("",!0),n.previewData.length>0?(N(),M("div",gj,[p("table",xj,[p("thead",null,[p("tr",null,[(N(!0),M(Pe,null,We(n.fieldOptions,a=>(N(),M("th",{key:a},oe(a),1))),128))])]),p("tbody",null,[(N(!0),M(Pe,null,We(n.previewData,(a,o)=>(N(),M("tr",{key:o},[(N(!0),M(Pe,null,We(n.fieldOptions,l=>(N(),M("td",{key:l},oe(a[l]||""),1))),128))]))),128))])]),p("p",null,"Showing first "+oe(n.previewData.length)+" of "+oe(n.parsedData.length)+" rows.",1)])):Re("",!0),p("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,yj),p("p",{class:at(["status-msg",{error:n.isError}])},oe(n.statusMessage),3)])}const bj=_t(fj,[["render",Ej],["__scopeId","data-v-b40a9547"]]);function _j(){const t=Hl(xd()),e=he(!1),r=he(!1),n=he(""),s=he(""),i=he(!1),a=Os({baseUrl:"encrypted",clientId:"encrypted",clientSecret:"encrypted",selectedSchoolId:"school123",selectedClassIds:["class1","class2"],selectedApiTypes:{oneroster:!0,nativeAeries:!0},selectedEndpoints:["/schools","/students","/api/special-education/students"]}),o=he([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"},{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),l=(I,A=!1)=>{s.value=I,i.value=A,setTimeout(()=>{s.value="",i.value=!1},5e3)},c=()=>{a.baseUrl="https://demo.aeries.net/aeries",a.clientId="1279e5c6b747b6d62b7c76db3a205d40eb7458e678a90493d537d5af6b953550",a.clientSecret="68019dbf8d8ba82980dd148eecc3977ac0d7f1f040d444225874c88eb80b9c1a",l("Demo credentials loaded. Click Connect to test.")},u=async()=>{if(!a.baseUrl||!a.clientId||!a.clientSecret)return l("Please fill in all connection fields.",!0),!1;r.value=!0,l("Connecting to Aeries API...");try{const k=(await da(t,"getAeriesToken")({baseUrl:a.baseUrl,clientId:a.clientId,clientSecret:a.clientSecret})).data;if(k.success&&k.access_token)return n.value=k.access_token,e.value=!0,l(" Successfully connected to Aeries API!"),!0;throw new Error("No access token received")}catch(I){const A=I.message||"Connection failed";return l(` Connection failed: ${A}`,!0),console.error("Aeries API Connection Error:",I),!1}finally{r.value=!1}},d=()=>{e.value=!1,n.value="",l("Disconnected from Aeries API.")},f=async I=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const U=(await da(t,"testAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:I,accessToken:n.value})).data;if(U.success)return l(` Successfully fetched data from ${I}`),{data:U.data,responseTime:U.responseTime};throw new Error(U.error||"API call failed")}catch(A){const k=A.message||"API call failed";return l(` API call failed: ${k}`,!0),console.error("Aeries API Test Error:",A),{error:k}}},h=async I=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const U=(await da(t,"testCustomAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:I,accessToken:n.value})).data;return U.success?(l(` Successfully fetched data from ${I}`),{data:U.data,responseTime:U.responseTime}):{error:U.error||"API call failed"}}catch(A){const k=A.message||"API call failed";return l(` API call failed: ${k}`,!0),console.error("Custom Aeries API Test Error:",A),{error:k}}},v=async()=>await f("/students"),m=async()=>await f("/teachers"),g=async()=>{const I=["/api/special-education/students","/api/students/special-education","/api/iep/students","/api/504/students"];for(const A of I){const k=await h(A);if(k&&!k.error)return k}return{error:"No special education endpoints found"}},b=async()=>await h("/api/special-education/ieps"),_=async()=>await h("/api/special-education/504-plans"),T=async()=>await h("/api/special-education/accommodations"),C=async()=>await h("/api/special-education/services"),R=async()=>await h("/api/special-education/case-managers"),D=async()=>{const I={},A=o.value.filter(k=>k.path.includes("special-education")||k.path.includes("iep")||k.path.includes("504"));for(const k of A)I[k.path]=await h(k.path);return I},w=async()=>{var A;const I=await f("/students");if(I&&!I.error&&I.data){const k=((A=I.data.students)==null?void 0:A[0])||I.data[0],U=k&&(k.specialEducation||k.iep||k.plan504||k.disabilities||k.accommodations);return{success:!0,hasSpecialEdFields:U,sampleStudent:k,message:U?"OneRoster includes special education data!":"OneRoster does not include special education data"}}return I},E=async()=>{const I=["?filter=specialEducation=true","?filter=iep=true","?filter=plan504=true","?filter=disabilities=*","?filter=accommodations=*"],A={};for(const k of I)A[k]=await f(`/students${k}`);return A};async function y({baseUrl:I,accessToken:A}){const k=Hl(),P=await da(k,"testAeriesEndpoint")({baseUrl:I,endpoint:"/schools",accessToken:A});return P.data.data.orgs||P.data.data.schools||P.data.data||[]}async function x({baseUrl:I,accessToken:A,schoolId:k}){const U=Hl(),W=da(U,"testAeriesEndpoint"),P=`/classes?filter=school.sourcedId='${k}'`,B=await W({baseUrl:I,endpoint:P,accessToken:A});return B.data.data.classes||B.data.data||[]}return{isConnected:e,isConnecting:r,accessToken:n,connectionStatus:s,isError:i,connectionConfig:a,availableEndpoints:o,showStatus:l,loadDemoCredentials:c,connect:u,disconnect:d,testEndpoint:f,testCustomEndpoint:h,fetchStudents:v,fetchTeachers:m,fetchSpecialEducationStudents:g,fetchIEPRecords:b,fetch504Plans:_,fetchAccommodations:T,fetchServices:C,fetchCaseManagers:R,testAllSpecialEducationEndpoints:D,testOneRosterForSpecialEd:w,testStudentsWithSpecialEd:E,fetchSchools:y,fetchClasses:x}}const $p=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t.charCodeAt(n)^e.charCodeAt(n%e.length));return btoa(r)},Hp=(t,e)=>{const r=atob(t);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r.charCodeAt(s)^e.charCodeAt(s%e.length));return n};function Sj(){const t=ro(),e=ju(),r=he(!1),n=he(null),s=()=>{const c=e.currentUser;if(!c)throw new Error("User not authenticated");return c.uid+"_aeries_config_key"};return{isLoading:r,error:n,saveAeriesConfig:async c=>{if(!e.currentUser)throw new Error("User must be authenticated to save configuration");r.value=!0,n.value=null;try{const u=e.currentUser,d=s(),f={baseUrl:$p(c.baseUrl,d),clientId:$p(c.clientId,d),clientSecret:$p(c.clientSecret,d),selectedSchoolId:c.selectedSchoolId||"",selectedClassIds:c.selectedClassIds||[],manualClassInput:c.manualClassInput||"",savedAt:new Date().toISOString(),userId:u.uid},h=vt(t,"users",u.uid,"aeries_config","current");return await gr(h,f),{success:!0,message:"Configuration saved securely"}}catch(u){throw n.value=u.message,console.error("Failed to save Aeries configuration:",u),u}finally{r.value=!1}},loadAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to load configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=s(),d=vt(t,"users",c.uid,"aeries_config","current"),f=await Jr(d);if(!f.exists())return null;const h=f.data();if(h.userId!==c.uid)throw new Error("Configuration security check failed");return{baseUrl:Hp(h.baseUrl,u),clientId:Hp(h.clientId,u),clientSecret:Hp(h.clientSecret,u),selectedSchoolId:h.selectedSchoolId||"",selectedClassIds:h.selectedClassIds||[],manualClassInput:h.manualClassInput||"",savedAt:h.savedAt}}catch(c){throw n.value=c.message,console.error("Failed to load Aeries configuration:",c),c}finally{r.value=!1}},deleteAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to delete configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=vt(t,"users",c.uid,"aeries_config","current");return await sc(u),{success:!0,message:"Configuration deleted securely"}}catch(c){throw n.value=c.message,console.error("Failed to delete Aeries configuration:",c),c}finally{r.value=!1}},hasSavedConfig:async()=>{if(!e.currentUser)return!1;try{const c=e.currentUser,u=vt(t,"users",c.uid,"aeries_config","current");return(await Jr(u)).exists()}catch(c){return console.error("Failed to check for saved configuration:",c),!1}}}}const Tj={name:"AeriesAPIConnector",setup(){const{isConnected:t,isConnecting:e,accessToken:r,connectionStatus:n,isError:s,connectionConfig:i,availableEndpoints:a,showStatus:o,loadDemoCredentials:l,connect:c,disconnect:u,testEndpoint:d,testAllSpecialEducationEndpoints:f,testOneRosterForSpecialEd:h,testStudentsWithSpecialEd:v,fetchSchools:m,fetchClasses:g}=_j(),{isLoading:b,error:_,saveAeriesConfig:T,loadAeriesConfig:C,deleteAeriesConfig:R,hasSavedConfig:D}=Sj(),w=he(!1),E=he(null),y=he(""),x=he(null),I=he([]),A=he(""),k=he([]),U=he([]),W=he(!1),P=he(""),B=he(""),H=he(!1),L=he({oneroster:!1,nativeAeries:!1}),Z=he([]),j=he([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"}]),O=he([{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),G=Ve(()=>i.baseUrl&&i.clientId&&i.clientSecret),X=async()=>{if(await c())try{w.value=!0;const re=await m({baseUrl:i.baseUrl,accessToken:r.value});I.value=re||[],A.value=""}catch(re){console.error("Failed to fetch schools:",re),o("Failed to fetch schools",!0),I.value=[]}finally{w.value=!1}},q=async Q=>{w.value=!0,y.value=Q,E.value=null,x.value=null;const re=await d(Q);re&&!re.error?(E.value=re.data,x.value=re.responseTime):re&&re.error&&(E.value={error:re.error}),w.value=!1},pe=async()=>{w.value=!0,await f(),w.value=!1},ie=async()=>{w.value=!0,y.value="/students (SPED check)",E.value=null,x.value=null;const Q=await h();Q&&!Q.error?(E.value=Q,o(Q.message)):Q&&Q.error&&(E.value={error:Q.error},o(` OneRoster test failed: ${Q.error}`,!0)),w.value=!1},de=async()=>{w.value=!0,y.value="/students (SPED filters)",E.value=null,x.value=null;const Q=await v();Q&&(E.value=Q,o("OneRoster SPED filter tests completed")),w.value=!1};er(A,async Q=>{if(!Q){k.value=[],U.value=[];return}W.value=!1,P.value="",w.value=!0;try{k.value=await g({baseUrl:i.baseUrl,accessToken:r.value,schoolId:Q}),U.value=[]}catch{W.value=!0,k.value=[],U.value=[]}finally{w.value=!1}});const z=Ve(()=>t.value&&I.value.length>0),J=Ve(()=>z.value&&A.value),me=Ve(()=>L.value.oneroster||L.value.nativeAeries),Y=()=>{const Q=[];L.value.oneroster&&Q.push(...j.value),L.value.nativeAeries&&Q.push(...O.value),a.value=Q},K=(Q,re=!1)=>{B.value=Q,H.value=re,setTimeout(()=>{B.value="",H.value=!1},5e3)},ee=async()=>{try{const Q={baseUrl:i.baseUrl,clientId:i.clientId,clientSecret:i.clientSecret,selectedSchoolId:A.value,selectedClassIds:U.value,manualClassInput:P.value,selectedApiTypes:L.value,selectedEndpoints:Z.value};await T(Q),K(" Configuration saved securely to Firebase!")}catch(Q){console.error("Failed to save configuration:",Q),K(` Failed to save configuration: ${Q.message}`,!0)}},fe=async()=>{try{const Q=await C();if(!Q){K(" No saved configuration found",!0);return}i.baseUrl=Q.baseUrl||"",i.clientId=Q.clientId||"",i.clientSecret=Q.clientSecret||"",A.value=Q.selectedSchoolId||"",U.value=Q.selectedClassIds||[],P.value=Q.manualClassInput||"",Q.selectedApiTypes&&(L.value=Q.selectedApiTypes),Q.selectedEndpoints&&(Z.value=Q.selectedEndpoints),Y();const re=Q.savedAt?new Date(Q.savedAt).toLocaleString():"Unknown";K(` Configuration loaded securely (saved: ${re})`)}catch(Q){console.error("Failed to load configuration:",Q),K(` Failed to load configuration: ${Q.message}`,!0)}},ve=async()=>{if(confirm("Are you sure you want to permanently delete the saved configuration? This action cannot be undone."))try{await R(),K(" Configuration permanently deleted from Firebase!")}catch(Q){console.error("Failed to clear configuration:",Q),K(` Failed to clear configuration: ${Q.message}`,!0)}};return Qt(async()=>{try{if(await D()){const re=await C();re&&(i.baseUrl=re.baseUrl||"",i.clientId=re.clientId||"",i.clientSecret=re.clientSecret||"",re.selectedApiTypes&&(L.value=re.selectedApiTypes),re.selectedEndpoints&&(Z.value=re.selectedEndpoints),Y(),K(" Configuration auto-loaded securely from Firebase"))}}catch(Q){console.error("Failed to auto-load configuration:",Q)}}),{connectionConfig:i,isConnected:t,isConnecting:e,isLoading:w,connectionStatus:n,isError:s,apiResults:E,currentEndpoint:y,responseTime:x,availableEndpoints:a,canConnect:G,loadDemoCredentials:l,connect:X,disconnect:u,testEndpoint:q,handleTestSpecialEd:pe,handleTestOneRosterSpecialEd:ie,handleTestStudentsWithSpecialEd:de,schools:I,selectedSchoolId:A,classes:k,selectedClassIds:U,classesFetchError:W,manualClassInput:P,canShowSchoolDropdown:z,canShowClasses:J,configStatus:B,configError:H,storageLoading:b,storageError:_,saveConfiguration:ee,loadConfiguration:fe,clearConfiguration:ve,selectedApiTypes:L,selectedEndpoints:Z,onerosterEndpoints:j,nativeAeriesEndpoints:O,hasSelectedApiTypes:me,updateAvailableEndpoints:Y}}},Aj={class:"aeries-api-connector"},wj={class:"connection-form"},Cj={class:"form-group"},Ij=["disabled"],kj={class:"form-group"},Dj=["disabled"],Rj={class:"form-group"},Fj=["disabled"],Pj={class:"button-group"},Oj=["disabled"],Nj=["disabled"],Lj={class:"api-type-selection"},Bj={class:"api-type-options"},Mj={class:"api-type-option"},Uj={class:"checkbox-label"},Vj={class:"api-type-option"},$j={class:"checkbox-label"},Hj={key:0,class:"endpoint-selection"},jj={class:"endpoint-categories"},Gj={key:0,class:"endpoint-category"},Wj={class:"endpoint-checkboxes"},zj=["value"],Kj={class:"endpoint-name"},qj={class:"endpoint-path-small"},Xj={key:1,class:"endpoint-category"},Yj={class:"endpoint-checkboxes"},Qj=["value"],Jj={class:"endpoint-name"},Zj={class:"endpoint-path-small"},eG={class:"config-management"},tG={class:"config-buttons"},rG=["disabled"],nG=["disabled"],sG=["disabled"],aG={key:1,class:"api-testing"},iG={class:"special-ed-section"},oG={class:"quick-test-buttons"},lG=["disabled"],cG=["disabled"],uG=["disabled"],dG=["disabled"],fG=["disabled"],hG=["disabled"],pG={class:"endpoint-grid"},mG={class:"endpoint-path"},vG={class:"endpoint-description"},gG=["onClick","disabled"],xG={key:0,class:"api-results"},yG={class:"results-header"},EG={class:"endpoint-tested"},bG={key:0,class:"response-time"},_G={class:"results-content"},SG={key:2,class:"form-group"},TG=["value"],AG={key:3,class:"form-group"},wG={key:0},CG=["value"],IG={key:1};function kG(t,e,r,n,s,i){return N(),M("div",Aj,[e[48]||(e[48]=Xn('<h3 data-v-0f37c4fc>Aeries API Connection</h3><div class="api-info-section" data-v-0f37c4fc><h4 data-v-0f37c4fc>Getting Students with IEP/504 Plans</h4><div class="info-grid" data-v-0f37c4fc><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> OneRoster API (Limited)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> All students, basic info</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Cannot filter:</strong> Students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> You&#39;d get ALL students, not just SPED</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> Custom Aeries API (Recommended)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Only students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Includes:</strong> Accommodations, services, case managers</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Perfect for your use case</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> CSV Import (Fallback)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Filtered data from Aeries export</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Process:</strong> Export SPED students  Import CSV</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Works but requires manual steps</p></div></div><div class="testing-note" data-v-0f37c4fc><p data-v-0f37c4fc><strong data-v-0f37c4fc>Test the buttons below to see what your Aeries instance supports!</strong></p></div></div>',2)),p("div",wj,[p("div",Cj,[e[24]||(e[24]=p("label",{for:"baseUrl"},"Base URL:",-1)),Me(p("input",{id:"baseUrl","onUpdate:modelValue":e[0]||(e[0]=a=>n.connectionConfig.baseUrl=a),type:"url",placeholder:"https://demo.aeries.net/aeries",disabled:n.isConnected},null,8,Ij),[[At,n.connectionConfig.baseUrl]])]),p("div",kj,[e[25]||(e[25]=p("label",{for:"clientId"},"Client ID:",-1)),Me(p("input",{id:"clientId","onUpdate:modelValue":e[1]||(e[1]=a=>n.connectionConfig.clientId=a),type:"text",placeholder:"Enter your Client ID",disabled:n.isConnected},null,8,Dj),[[At,n.connectionConfig.clientId]])]),p("div",Rj,[e[26]||(e[26]=p("label",{for:"clientSecret"},"Client Secret:",-1)),Me(p("input",{id:"clientSecret","onUpdate:modelValue":e[2]||(e[2]=a=>n.connectionConfig.clientSecret=a),type:"password",placeholder:"Enter your Client Secret",disabled:n.isConnected},null,8,Fj),[[At,n.connectionConfig.clientSecret]])]),p("div",Pj,[p("button",{onClick:e[3]||(e[3]=(...a)=>n.connect&&n.connect(...a)),disabled:!n.canConnect||n.isConnecting,class:"btn-primary"},oe(n.isConnecting?"Connecting...":"Connect"),9,Oj),n.isConnected?(N(),M("button",{key:0,onClick:e[4]||(e[4]=(...a)=>n.disconnect&&n.disconnect(...a)),class:"btn-secondary"}," Disconnect ")):Re("",!0),p("button",{onClick:e[5]||(e[5]=(...a)=>n.loadDemoCredentials&&n.loadDemoCredentials(...a)),disabled:n.isConnected,class:"btn-demo"}," Load Demo Credentials ",8,Nj)]),p("div",Lj,[e[37]||(e[37]=p("h4",null,"Select API Types",-1)),e[38]||(e[38]=p("p",{class:"api-type-description"},"Choose which Aeries API types you want to use. This determines which endpoints will be available for testing and data import.",-1)),p("div",Bj,[p("div",Mj,[p("label",Uj,[Me(p("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>n.selectedApiTypes.oneroster=a),onChange:e[7]||(e[7]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[Et,n.selectedApiTypes.oneroster]]),e[27]||(e[27]=p("span",{class:"checkmark"},null,-1)),e[28]||(e[28]=p("strong",null,"OneRoster API",-1))]),e[29]||(e[29]=p("p",{class:"api-type-desc"},"Standard OneRoster endpoints for basic student, teacher, and class data",-1))]),p("div",Vj,[p("label",$j,[Me(p("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>n.selectedApiTypes.nativeAeries=a),onChange:e[9]||(e[9]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[Et,n.selectedApiTypes.nativeAeries]]),e[30]||(e[30]=p("span",{class:"checkmark"},null,-1)),e[31]||(e[31]=p("strong",null,"Native Aeries v5 API",-1))]),e[32]||(e[32]=p("p",{class:"api-type-desc"},"Aeries-specific endpoints for special education, IEP, and 504 plan data",-1))])]),n.hasSelectedApiTypes?(N(),M("div",Hj,[e[35]||(e[35]=p("h5",null,"Select Endpoints to Use",-1)),e[36]||(e[36]=p("p",{class:"endpoint-description"},"Check the endpoints you want to enable for data import and testing.",-1)),p("div",jj,[n.selectedApiTypes.oneroster?(N(),M("div",Gj,[e[33]||(e[33]=p("h6",null,"OneRoster Endpoints",-1)),p("div",Wj,[(N(!0),M(Pe,null,We(n.onerosterEndpoints,a=>(N(),M("label",{key:a.path,class:"endpoint-checkbox"},[Me(p("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>n.selectedEndpoints=o),value:a.path},null,8,zj),[[Et,n.selectedEndpoints]]),p("span",Kj,oe(a.name),1),p("span",qj,oe(a.path),1)]))),128))])])):Re("",!0),n.selectedApiTypes.nativeAeries?(N(),M("div",Xj,[e[34]||(e[34]=p("h6",null,"Native Aeries v5 Endpoints",-1)),p("div",Yj,[(N(!0),M(Pe,null,We(n.nativeAeriesEndpoints,a=>(N(),M("label",{key:a.path,class:"endpoint-checkbox"},[Me(p("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=o=>n.selectedEndpoints=o),value:a.path},null,8,Qj),[[Et,n.selectedEndpoints]]),p("span",Jj,oe(a.name),1),p("span",Zj,oe(a.path),1)]))),128))])])):Re("",!0)])])):Re("",!0)]),p("div",eG,[e[39]||(e[39]=p("h4",null,"Save/Load Configuration",-1)),e[40]||(e[40]=p("div",{class:"security-note"},[p("p",null,[p("strong",null," Security:"),Ne(" Your API credentials are encrypted and stored securely in Firebase. Only you can access your saved configuration.")])],-1)),p("div",tG,[p("button",{onClick:e[12]||(e[12]=(...a)=>n.saveConfiguration&&n.saveConfiguration(...a)),disabled:!n.canConnect||n.storageLoading,class:"btn-save"},oe(n.storageLoading?" Saving...":" Save Configuration"),9,rG),p("button",{onClick:e[13]||(e[13]=(...a)=>n.loadConfiguration&&n.loadConfiguration(...a)),disabled:n.storageLoading,class:"btn-load"},oe(n.storageLoading?" Loading...":" Load Saved Configuration"),9,nG),p("button",{onClick:e[14]||(e[14]=(...a)=>n.clearConfiguration&&n.clearConfiguration(...a)),disabled:n.storageLoading,class:"btn-clear"},oe(n.storageLoading?" Deleting...":" Clear Saved Configuration"),9,sG)]),n.configStatus?(N(),M("div",{key:0,class:at(["config-status",{error:n.configError}])},oe(n.configStatus),3)):Re("",!0)])]),n.connectionStatus?(N(),M("div",{key:0,class:at(["status-message",{error:n.isError}])},oe(n.connectionStatus),3)):Re("",!0),n.isConnected?(N(),M("div",aG,[e[43]||(e[43]=p("h4",null,"Test API Endpoints",-1)),p("div",iG,[e[41]||(e[41]=p("h5",null,"Special Education Data (IEP/504)",-1)),p("div",oG,[p("button",{onClick:e[15]||(e[15]=(...a)=>n.handleTestSpecialEd&&n.handleTestSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-special"},oe(n.isLoading?"Testing...":"Test All SPED Endpoints"),9,lG),p("button",{onClick:e[16]||(e[16]=(...a)=>n.handleTestOneRosterSpecialEd&&n.handleTestOneRosterSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster for SPED Data ",8,cG),p("button",{onClick:e[17]||(e[17]=(...a)=>n.handleTestStudentsWithSpecialEd&&n.handleTestStudentsWithSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster SPED Filters ",8,uG),p("button",{onClick:e[18]||(e[18]=a=>t.handleTestEndpoint("/api/special-education/students")),disabled:n.isLoading,class:"btn-test-special"}," SPED Students ",8,dG),p("button",{onClick:e[19]||(e[19]=a=>t.handleTestEndpoint("/api/special-education/ieps")),disabled:n.isLoading,class:"btn-test-special"}," IEP Records ",8,fG),p("button",{onClick:e[20]||(e[20]=a=>t.handleTestEndpoint("/api/special-education/504-plans")),disabled:n.isLoading,class:"btn-test-special"}," 504 Plans ",8,hG)])]),p("div",pG,[(N(!0),M(Pe,null,We(n.availableEndpoints,a=>(N(),M("div",{key:a.path,class:"endpoint-card"},[p("h5",null,oe(a.name),1),p("p",mG,oe(a.path),1),p("p",vG,oe(a.description),1),p("button",{onClick:o=>n.testEndpoint(a.path),disabled:n.isLoading,class:"btn-test"},oe(n.isLoading&&n.currentEndpoint===a.path?"Testing...":"Test"),9,gG)]))),128))]),n.apiResults?(N(),M("div",xG,[e[42]||(e[42]=p("h4",null,"API Response",-1)),p("div",yG,[p("span",EG,"Endpoint: "+oe(n.currentEndpoint),1),n.responseTime?(N(),M("span",bG,"Response time: "+oe(n.responseTime)+"ms",1)):Re("",!0)]),p("div",_G,[p("pre",null,oe(JSON.stringify(n.apiResults,null,2)),1)])])):Re("",!0)])):Re("",!0),n.canShowSchoolDropdown?(N(),M("div",SG,[e[45]||(e[45]=p("label",null,"School",-1)),Me(p("select",{"onUpdate:modelValue":e[21]||(e[21]=a=>n.selectedSchoolId=a)},[e[44]||(e[44]=p("option",{value:"",disabled:""},"Select a school",-1)),(N(!0),M(Pe,null,We(n.schools,a=>(N(),M("option",{key:a.sourcedId||a.id||a.schoolId,value:a.sourcedId||a.id||a.schoolId},oe(a.name||a.title||a.schoolName),9,TG))),128))],512),[[vr,n.selectedSchoolId]])])):Re("",!0),n.canShowClasses?(N(),M("div",AG,[e[47]||(e[47]=p("label",null,"Case Manager Classes",-1)),n.classesFetchError?(N(),M("div",IG,[e[46]||(e[46]=p("p",{class:"error"},"Could not fetch classes. Enter class names manually (comma separated):",-1)),Me(p("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>n.manualClassInput=a),type:"text",placeholder:"Class1, Class2, ..."},null,512),[[At,n.manualClassInput]])])):(N(),M("div",wG,[Me(p("select",{"onUpdate:modelValue":e[22]||(e[22]=a=>n.selectedClassIds=a),multiple:""},[(N(!0),M(Pe,null,We(n.classes,a=>(N(),M("option",{key:a.sourcedId||a.id||a.classId,value:a.sourcedId||a.id||a.classId},oe(a.title||a.name||a.className),9,CG))),128))],512),[[vr,n.selectedClassIds]])]))])):Re("",!0)])}const DG=_t(Tj,[["render",kG],["__scopeId","data-v-0f37c4fc"]]),hl=he(null);function Yv(){const t=new Promise(e=>{const r=CA(Gs,async n=>{if(n)try{const s=vt(yt,"users",n.uid),i=await Jr(s);i.exists()?hl.value={uid:n.uid,email:n.email,displayName:n.displayName,...i.data()}:(console.warn(`User ${n.uid} exists in Auth but not in users collection`),hl.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null})}catch(s){console.error("Error fetching user document:",s),hl.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null}}else hl.value=null;e(hl.value),r()})});return{currentUser:hl,waitForAuthInit:t}}const RG={key:0,class:"app-settings-panel"},FG={class:"settings-section"},PG={class:"grades-checkboxes"},OG=["checked"],NG=["value"],LG={class:"settings-section"},BG={key:0,class:"class-service-fieldset"},MG={class:"checkbox-inline-group"},UG=["value"],VG={key:1,class:"class-service-fieldset"},$G={class:"checkbox-inline-group"},HG=["value"],jG={key:2,class:"class-service-fieldset"},GG={class:"checkbox-inline-group"},WG=["value"],zG={key:3,class:"class-service-fieldset"},KG={class:"checkbox-inline-group"},qG={key:4,class:"class-service-fieldset"},XG={class:"checkbox-inline-group"},YG=["onClick"],QG={class:"checkbox-inline-group"},JG=["onClick"],ZG=["onClick"],eW={class:"add-class-service"},tW={class:"custom-chips"},rW=["onClick"],nW={class:"settings-section"},sW={class:"service-providers-defaults"},aW=["value"],iW={class:"service-providers-custom"},oW={class:"custom-provider-inputs"},lW={class:"custom-chips"},cW=["onClick"],uW={class:"settings-section"},dW={class:"periods-controls"},fW={class:"period-number-control"},hW={key:0,class:"period-labels"},pW={class:"period-labels-grid"},mW=["onUpdate:modelValue","placeholder"],vW={key:1,class:"period-preview"},gW={class:"settings-section"},xW={class:"action-buttons"},yW=["disabled"],EW=["disabled"],bW=["disabled"],_W={key:1,class:"not-admin"},SW={__name:"AppSettings",setup(t){const{currentUser:e}=Yv(),r=Ve(()=>{var x;return((x=e.value)==null?void 0:x.role)||null}),n=Ve(()=>["admin","administrator","administrator_504_CM","sped_chair"].includes(r.value)),s=[{value:"K",label:"K"},...Array.from({length:12},(x,I)=>({value:(I+1).toString(),label:(I+1).toString()}))],i=["English","Math","History","Science"],a=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],{loadAppSettings:o,saveAppSettings:l}=Ia(),c=he(!1),u=he(!1),d=he(""),f=he(!1),h=he(""),v=he(""),m=he({grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]}),g=()=>{const x=G2(m.value.numPeriods,{min:1,max:15,decimals:0});if(x===null)return D("Invalid number of periods. Must be between 1 and 15.",!0),!1;m.value.numPeriods=x;for(let I=0;I<m.value.numPeriods;I++){m.value.periodLabels[I]||(m.value.periodLabels[I]=`Per${I+1}`);const A=Tr(m.value.periodLabels[I],{trim:!0,maxLength:3,removeDangerous:!0}),k=nn(A);if(!k.isSafe)return D(`Security threat detected in period ${I+1} label: ${k.threats.join(", ")}`,!0),!1;const U=Yh(A,{max:3,fieldName:`Period ${I+1} label`});if(!U.isValid)return D(U.error,!0),!1;m.value.periodLabels[I]=A}if(m.value.customServiceProviders)for(let I=0;I<m.value.customServiceProviders.length;I++){const A=m.value.customServiceProviders[I];if(A.name){const k=Tr(A.name,{trim:!0,maxLength:100,removeDangerous:!0}),U=nn(k);if(!U.isSafe)return D(`Security threat detected in custom provider ${I+1}: ${U.threats.join(", ")}`,!0),!1;A.name=k}if(A.abbreviation){const k=Tr(A.abbreviation,{trim:!0,maxLength:10,removeDangerous:!0}),U=nn(k);if(!U.isSafe)return D(`Security threat detected in custom provider abbreviation ${I+1}: ${U.threats.join(", ")}`,!0),!1;A.abbreviation=k}}return!0},b=Ve(()=>a),_=Ve(()=>s.every(x=>m.value.grades.includes(x.value))),T=x=>{x.target.checked?m.value.grades=s.map(I=>I.value):m.value.grades=[]},C=()=>{if(!h.value.trim()||!v.value.trim()){D("Both name and abbreviation are required for custom service providers",!0);return}if(m.value.customServiceProviders.some(I=>I.abbreviation.toLowerCase()===v.value.toLowerCase())){D("A service provider with this abbreviation already exists",!0);return}m.value.customServiceProviders.push({name:h.value.trim(),abbreviation:v.value.trim()}),h.value="",v.value="",D("Custom service provider added successfully")},R=x=>{m.value.customServiceProviders.splice(x,1)};er(()=>m.value.numPeriods,x=>{const I=G2(x,{min:1,max:15,decimals:0});if(I!==null&&I!==x&&(m.value.numPeriods=I),m.value.periodLabels.length<m.value.numPeriods)for(let A=m.value.periodLabels.length;A<m.value.numPeriods;A++)m.value.periodLabels.push(`Per${A+1}`)}),er(()=>m.value.periodLabels,x=>{x.forEach((I,A)=>{I&&I.length>3&&(m.value.periodLabels[A]=I.substring(0,3))})},{deep:!0});const D=(x,I=!1)=>{d.value=x,f.value=I,setTimeout(()=>{d.value="",f.value=!1},5e3)},w=async(x=!1)=>{c.value=!0;try{const I=await o();if(I){if(m.value={...m.value,...I},!m.value.periodLabels||m.value.periodLabels.length<m.value.numPeriods){m.value.periodLabels=[];for(let A=0;A<m.value.numPeriods;A++)m.value.periodLabels[A]=m.value.periodLabels[A]||`Per${A+1}`}x&&D("Settings loaded successfully")}}catch(I){D("Error loading settings",!0),console.error("Load settings error:",I)}finally{c.value=!1}},E=async()=>{if(!xs("saveAppSettings",10,6e4).allowed){D("Too many save requests. Please wait before saving again.",!0);return}if(g()){u.value=!0;try{await l(m.value),D("Settings saved successfully")}catch(I){D("Error saving settings",!0),console.error("Save settings error:",I)}finally{u.value=!1}}},y=()=>{confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(m.value={grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]},D("Settings reset to defaults"))};return Qt(()=>{w()}),(x,I)=>n.value?(N(),M("div",RG,[I[33]||(I[33]=p("h2",null,"App Settings",-1)),p("form",{onSubmit:bs(E,["prevent"])},[p("section",FG,[p("fieldset",null,[I[17]||(I[17]=p("legend",null,"Grades",-1)),p("div",PG,[p("label",null,[p("input",{type:"checkbox",checked:_.value,onChange:T},null,40,OG),I[16]||(I[16]=p("span",null,"Select All",-1))]),(N(),M(Pe,null,We(s,A=>p("label",{key:A.value},[Me(p("input",{type:"checkbox","onUpdate:modelValue":I[0]||(I[0]=k=>m.value.grades=k),value:A.value},null,8,NG),[[Et,m.value.grades]]),p("span",null,oe(A.label),1)])),64))])])]),p("section",LG,[I[26]||(I[26]=p("h3",null,"Class Services",-1)),m.value.classServices[0]&&m.value.classServices[0].enabledSubcategories?(N(),M("div",BG,[p("fieldset",null,[I[18]||(I[18]=p("legend",null,"SDC",-1)),p("div",MG,[(N(),M(Pe,null,We(i,A=>p("label",{key:A},[Me(p("input",{type:"checkbox","onUpdate:modelValue":I[1]||(I[1]=k=>m.value.classServices[0].enabledSubcategories=k),value:A},null,8,UG),[[Et,m.value.classServices[0].enabledSubcategories]]),Ne(" "+oe(A),1)])),64))])])])):Re("",!0),m.value.classServices[1]&&m.value.classServices[1].enabledSubcategories?(N(),M("div",VG,[p("fieldset",null,[I[19]||(I[19]=p("legend",null,"Co-teach",-1)),p("div",$G,[(N(),M(Pe,null,We(i,A=>p("label",{key:A},[Me(p("input",{type:"checkbox","onUpdate:modelValue":I[2]||(I[2]=k=>m.value.classServices[1].enabledSubcategories=k),value:A},null,8,HG),[[Et,m.value.classServices[1].enabledSubcategories]]),Ne(" "+oe(A),1)])),64))])])])):Re("",!0),m.value.classServices[2]&&m.value.classServices[2].enabledSubcategories?(N(),M("div",jG,[p("fieldset",null,[I[20]||(I[20]=p("legend",null,"RSP",-1)),p("div",GG,[(N(),M(Pe,null,We(i,A=>p("label",{key:A},[Me(p("input",{type:"checkbox","onUpdate:modelValue":I[3]||(I[3]=k=>m.value.classServices[2].enabledSubcategories=k),value:A},null,8,WG),[[Et,m.value.classServices[2].enabledSubcategories]]),Ne(" "+oe(A),1)])),64))])])])):Re("",!0),m.value.classServices[3]&&m.value.classServices[3].enabledSubcategories?(N(),M("div",zG,[p("fieldset",null,[I[22]||(I[22]=p("legend",null,"Directed Studies",-1)),p("div",KG,[p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":I[4]||(I[4]=A=>m.value.classServices[3].enabledSubcategories=A),value:"Directed Studies"},null,512),[[Et,m.value.classServices[3].enabledSubcategories]]),I[21]||(I[21]=Ne(" Directed Studies "))])])])])):Re("",!0),m.value.classServices[4]&&m.value.classServices[4].enabledSubcategories?(N(),M("div",qG,[p("fieldset",null,[I[24]||(I[24]=p("legend",null,"FA",-1)),p("div",XG,[p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":I[5]||(I[5]=A=>m.value.classServices[4].enabledSubcategories=A),value:"FA"},null,512),[[Et,m.value.classServices[4].enabledSubcategories]]),I[23]||(I[23]=Ne(" FA "))])])])])):Re("",!0),(N(!0),M(Pe,null,We(m.value.classServices.slice(5),(A,k)=>(N(),M("div",{key:A.name,class:"class-service-fieldset"},[p("fieldset",null,[p("legend",null,[Ne(oe(A.name)+" ",1),p("button",{type:"button",onClick:U=>x.removeClassService(k+5),title:"Remove Service"},"",8,YG)]),p("div",QG,[(N(!0),M(Pe,null,We(A.subcategories,(U,W)=>(N(),M("label",{key:U},[I[25]||(I[25]=p("input",{type:"checkbox",checked:!0,disabled:""},null,-1)),Ne(" "+oe(U)+" ",1),p("button",{type:"button",onClick:P=>x.removeSubcategory(k+5,W),title:"Remove Subcategory"},"",8,JG)]))),128)),p("button",{type:"button",onClick:U=>x.addSubcategory(k+5)},"+ Add Subcategory",8,ZG)])])]))),128)),p("div",eW,[Me(p("input",{type:"text","onUpdate:modelValue":I[6]||(I[6]=A=>x.newServiceName=A),placeholder:"New Service Name",maxlength:"18"},null,512),[[At,x.newServiceName]]),Me(p("input",{type:"text","onUpdate:modelValue":I[7]||(I[7]=A=>x.newServiceSubcat=A),placeholder:"Add Subcategory",maxlength:"18",onKeyup:I[8]||(I[8]=NT((...A)=>x.addNewServiceSubcat&&x.addNewServiceSubcat(...A),["enter"]))},null,544),[[At,x.newServiceSubcat]]),p("button",{type:"button",onClick:I[9]||(I[9]=(...A)=>x.addNewServiceSubcat&&x.addNewServiceSubcat(...A))},"+ Add Subcategory"),p("div",tW,[(N(!0),M(Pe,null,We(x.newServiceSubcats,(A,k)=>(N(),M("span",{key:A,class:"chip"},[Ne(oe(A)+" ",1),p("button",{type:"button",onClick:U=>x.removeNewServiceSubcat(k)},"",8,rW)]))),128))]),p("button",{type:"button",onClick:I[10]||(I[10]=(...A)=>x.addClassService&&x.addClassService(...A))},"+ Add Class Service")])]),p("section",nW,[p("fieldset",null,[I[28]||(I[28]=p("legend",null,"Service Providers",-1)),p("div",sW,[(N(!0),M(Pe,null,We(b.value,A=>(N(),M("label",{key:A.abbreviation},[Me(p("input",{type:"checkbox","onUpdate:modelValue":I[11]||(I[11]=k=>m.value.serviceProviders=k),value:A.abbreviation},null,8,aW),[[Et,m.value.serviceProviders]]),p("span",null,oe(A.name)+" ("+oe(A.abbreviation)+")",1)]))),128))]),p("div",iW,[I[27]||(I[27]=p("label",null,"Add Custom Service Provider:",-1)),p("div",oW,[Me(p("input",{type:"text","onUpdate:modelValue":I[12]||(I[12]=A=>h.value=A),placeholder:"Full Name",maxlength:"100"},null,512),[[At,h.value]]),Me(p("input",{type:"text","onUpdate:modelValue":I[13]||(I[13]=A=>v.value=A),placeholder:"Abbreviation",maxlength:"10"},null,512),[[At,v.value]]),p("button",{type:"button",onClick:C},"Add")]),p("div",lW,[(N(!0),M(Pe,null,We(m.value.customServiceProviders,(A,k)=>(N(),M("span",{key:k,class:"chip"},[Ne(oe(A.name)+" ("+oe(A.abbreviation)+") ",1),p("button",{type:"button",onClick:U=>R(k)},"",8,cW)]))),128))])])])]),p("section",uW,[p("fieldset",null,[I[32]||(I[32]=p("legend",null,"Periods",-1)),p("div",dW,[p("div",fW,[p("label",null,[I[29]||(I[29]=Ne(" Number of Periods (max 15): ")),Me(p("input",{type:"number","onUpdate:modelValue":I[14]||(I[14]=A=>m.value.numPeriods=A),min:"1",max:"15",class:"period-number-input"},null,512),[[At,m.value.numPeriods]])])]),m.value.numPeriods>0?(N(),M("div",hW,[I[30]||(I[30]=p("h4",null,"Period Labels (3 chars max each):",-1)),p("div",pW,[(N(!0),M(Pe,null,We(m.value.numPeriods,A=>(N(),M("div",{key:A,class:"period-label-item"},[p("label",null,[Ne(" Period "+oe(A)+": ",1),Me(p("input",{type:"text","onUpdate:modelValue":k=>m.value.periodLabels[A-1]=k,maxlength:"3",placeholder:`Per${A}`,class:"period-label-input"},null,8,mW),[[At,m.value.periodLabels[A-1]]])])]))),128))])])):Re("",!0),m.value.numPeriods>0?(N(),M("div",vW,[I[31]||(I[31]=p("strong",null,"Preview:",-1)),(N(!0),M(Pe,null,We(m.value.numPeriods,A=>(N(),M("span",{key:A,class:"period-preview-item"},oe(m.value.periodLabels[A-1]||`Per${A}`),1))),128))])):Re("",!0)])])]),p("section",gW,[p("div",xW,[p("button",{type:"submit",disabled:u.value||c.value}," Save Settings",8,yW),p("button",{type:"button",onClick:I[15]||(I[15]=()=>w(!0)),disabled:c.value}," Load",8,EW),p("button",{type:"button",onClick:y,disabled:c.value}," Reset",8,bW)]),d.value?(N(),M("div",{key:0,class:at(["status-message",{error:f.value,success:!f.value}])},oe(d.value),3)):Re("",!0)])],32)])):(N(),M("div",_W,I[34]||(I[34]=[p("h2",null,"App Settings",-1),p("p",null,"Access denied. You must be an admin to view this page.",-1)])))}},TW=_t(SW,[["__scopeId","data-v-f311a398"]]),AW={class:"admin-aide-assignment"},wW={class:"header"},CW={class:"header-actions"},IW=["disabled"],kW={key:0},DW={key:1},RW={class:"content"},FW={key:0,class:"error-message"},PW={key:1,class:"error-message"},OW={key:2,class:"loading"},NW={key:3,class:"schedule-container"},LW={class:"aide-schedule-table"},BW={class:"aide-name"},MW=["value","onChange"],UW=["value"],VW={class:"assignment-buttons"},$W=["onClick"],HW=["onClick"],jW={class:"direct-assignment-cell"},GW=["value","onChange"],WW=["value"],zW={class:"assignment-buttons"},KW=["onClick"],qW=["onClick"],XW={__name:"AdminAideAssignment",setup(t){const e=Xo(),{userList:r,fetchUsers:n}=Ca(),{students:s,fetchStudents:i}=wa(),a=oi(),{aideAssignment:o,loadAideAssignments:l,saveAllAideAssignments:c}=Y1(),{appSettings:u,loadAppSettings:d}=Ia(),f=he(!0),h=he(!1),v=Ve(()=>{var P;const W=(P=a.currentUser)==null?void 0:P.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(W)}),m=Ve(()=>{var W;return((W=r.value)==null?void 0:W.filter(P=>P.role==="paraeducator"))||[]}),g=Ve(()=>{var W;return((W=r.value)==null?void 0:W.filter(P=>P.role==="teacher"))||[]}),b=Ve(()=>{var W,P;return(W=u.value)!=null&&W.numPeriods&&((P=u.value)!=null&&P.periodLabels)?u.value.periodLabels.slice(0,u.value.numPeriods):["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]});function _(W){return W.id}function T(W){return W.id}function C(W,P){if(!o.value[W])return[""];o.value[W].classAssignment||(o.value[W].classAssignment={});let B=o.value[W].classAssignment[P];return Array.isArray(B)?B.length?B:[""]:typeof B=="string"&&B!==""?[B]:[""]}function R(W){if(!o.value[W])return[""];let P=o.value[W].directAssignment;return Array.isArray(P)?P.length?P:[""]:typeof P=="string"&&P!==""?[P]:[""]}function D(W,P,B,H){o.value[W]||(o.value[W]={classAssignment:{},directAssignment:[]}),o.value[W].classAssignment||(o.value[W].classAssignment={});let L=C(W,P);for(L[B]=H;L.length>1&&L[L.length-1]==="";)L.pop();o.value[W].classAssignment[P]=[...L]}function w(W,P,B){o.value[W]||(o.value[W]={classAssignment:{},directAssignment:[]});let H=R(W);for(H[P]=B;H.length>1&&H[H.length-1]==="";)H.pop();o.value[W].directAssignment=[...H]}function E(W,P){o.value[W]||(o.value[W]={classAssignment:{},directAssignment:[]}),o.value[W].classAssignment||(o.value[W].classAssignment={});let B=C(W,P);B.push(""),o.value[W].classAssignment[P]=[...B]}function y(W,P,B){if(!o.value[W]||!o.value[W].classAssignment)return;let H=C(W,P);H.length<=1||(H.splice(B,1),o.value[W].classAssignment[P]=[...H])}function x(W){o.value[W]||(o.value[W]={classAssignment:{},directAssignment:[]});let P=R(W);P.push(""),o.value[W].directAssignment=[...P]}function I(W,P){if(!o.value[W])return;let B=R(W);B.length<=1||(B.splice(P,1),o.value[W].directAssignment=[...B])}async function A(){try{f.value=!0,await Promise.all([n(),i(),l(),d()]),f.value=!1}catch(W){console.error("Error loading data:",W),f.value=!1}}async function k(){try{h.value=!0,await c(),h.value=!1}catch(W){console.error("Error saving aide assignments:",W),h.value=!1}}function U(){e.push("/admin")}return Qt(A),(W,P)=>(N(),M("div",AW,[p("div",wW,[P[3]||(P[3]=p("h1",null,"Aide Assignment Management",-1)),p("div",CW,[p("button",{onClick:k,class:"btn btn-primary",disabled:h.value},[h.value?(N(),M("span",kW,"")):(N(),M("span",DW,"")),Ne(" "+oe(h.value?"Saving...":"Save Assignments"),1)],8,IW),p("button",{onClick:U,class:"btn btn-secondary"},P[2]||(P[2]=[p("span",null,"",-1),Ne(" Back ")]))])]),p("div",RW,[ge(a).currentUser?v.value?f.value?(N(),M("div",OW," Loading aide assignments... ")):(N(),M("div",NW,[p("table",LW,[p("thead",null,[p("tr",null,[P[8]||(P[8]=p("th",null,"Aide Name",-1)),(N(!0),M(Pe,null,We(b.value,B=>(N(),M("th",{key:B,class:"period-header"}," Period "+oe(B),1))),128)),P[9]||(P[9]=p("th",null,"Direct Assignment",-1))])]),p("tbody",null,[(N(!0),M(Pe,null,We(m.value,B=>(N(),M("tr",{key:B.id,class:"aide-row"},[p("td",BW,oe(B.name||B.email),1),(N(!0),M(Pe,null,We(b.value,H=>(N(),M("td",{key:H,class:"period-cell"},[(N(!0),M(Pe,null,We(C(_(B),H),(L,Z)=>(N(),M("div",{key:"t-"+Z,class:"assignment-row"},[p("select",{value:L,onChange:j=>D(_(B),H,Z,j.target.value),class:"teacher-select"},[P[10]||(P[10]=p("option",{value:""},"No Assignment",-1)),(N(!0),M(Pe,null,We(g.value,j=>(N(),M("option",{key:T(j),value:T(j)},oe(j.name||j.email),9,UW))),128))],40,MW),p("div",VW,[C(_(B),H).length>1?(N(),M("button",{key:0,onClick:j=>y(_(B),H,Z),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,$W)):Re("",!0),Z===C(_(B),H).length-1?(N(),M("button",{key:1,onClick:j=>E(_(B),H),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,HW)):Re("",!0)])]))),128))]))),128)),p("td",jW,[(N(!0),M(Pe,null,We(R(_(B)),(H,L)=>(N(),M("div",{key:"d-"+L,class:"assignment-row"},[p("select",{value:H,onChange:Z=>w(_(B),L,Z.target.value),class:"student-select"},[P[11]||(P[11]=p("option",{value:""},"No Assignment",-1)),(N(!0),M(Pe,null,We(ge(s),Z=>(N(),M("option",{key:Z.id,value:Z.id},oe(ge(pt)(Z,"firstName"))+" "+oe(ge(pt)(Z,"lastName")),9,WW))),128))],40,GW),p("div",zW,[R(_(B)).length>1?(N(),M("button",{key:0,onClick:Z=>I(_(B),L),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,KW)):Re("",!0),L===R(_(B)).length-1?(N(),M("button",{key:1,onClick:Z=>x(_(B)),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,qW)):Re("",!0)])]))),128))])]))),128))])])])):(N(),M("div",PW,[P[6]||(P[6]=p("h2",null,"Access Denied",-1)),P[7]||(P[7]=p("p",null,"You do not have permission to access this page.",-1)),p("button",{onClick:P[1]||(P[1]=B=>ge(e).push("/")),class:"btn btn-primary"},"Go Home")])):(N(),M("div",FW,[P[4]||(P[4]=p("h2",null,"Authentication Required",-1)),P[5]||(P[5]=p("p",null,"Please log in to access this page.",-1)),p("button",{onClick:P[0]||(P[0]=B=>ge(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},KC=_t(XW,[["__scopeId","data-v-05c6a01a"]]);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var qC=1252,YW=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Z1={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},ex=function(t){YW.indexOf(t)!=-1&&(qC=Z1[0]=t)};function QW(){ex(1252)}var qs=function(t){ex(t)};function XC(){qs(1200),QW()}function K2(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function JW(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function YC(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Xc=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?JW(t.slice(2)):e==254&&r==255?YC(t.slice(2)):e==65279?t.slice(1):t},xf=function(e){return String.fromCharCode(e)},q2=function(e){return String.fromCharCode(e)},ed,Ni="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function X2(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Ni.charAt(i)+Ni.charAt(a)+Ni.charAt(o)+Ni.charAt(l);return e}function _s(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=Ni.indexOf(t.charAt(c++)),a=Ni.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=Ni.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Ni.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var jt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Yo=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Ji(t){return jt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Y2(t){return jt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var zs=function(e){return jt?Yo(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Qo(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function tx(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return tx(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Fi=jt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Yo(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function ZW(t){for(var e=[],r=0,n=t.length+250,s=Ji(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=Ji(65535),n=65530)}return e.push(s.slice(0,r)),Fi(e)}var Zn=/\u0000/g,Yc=/[\u0001-\u0006]/g;function jl(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Xs(t,e){var r=""+t;return r.length>=e?r:Fr("0",e-r.length)+r}function rx(t,e){var r=""+t;return r.length>=e?r:Fr(" ",e-r.length)+r}function B0(t,e){var r=""+t;return r.length>=e?r:r+Fr(" ",e-r.length)}function ez(t,e){var r=""+Math.round(t);return r.length>=e?r:Fr("0",e-r.length)+r}function tz(t,e){var r=""+t;return r.length>=e?r:Fr("0",e-r.length)+r}var Q2=Math.pow(2,32);function pl(t,e){if(t>Q2||t<-Q2)return ez(t,e);var r=Math.round(t);return tz(r,e)}function M0(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var J2=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],jp=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function rz(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Ot={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Z2={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},nz={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function U0(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,u=0,d=Math.floor(s);c<e&&(d=Math.floor(s),o=d*a+i,u=d*c+l,!(s-d<5e-8));)s=1/(s-d),i=a,a=o,l=c,c=u;if(u>e&&(c>e?(u=l,o=i):(u=c,o=a)),!r)return[0,n*o,u];var f=Math.floor(n*o/u);return[f,n*o-f*u,u]}function _o(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=cz(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var QC=new Date(1899,11,31,0,0,0),sz=QC.getTime(),az=new Date(1900,2,1,0,0,0);function JC(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=az&&(r+=24*60*60*1e3),(r-(sz+(t.getTimezoneOffset()-QC.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function nx(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function iz(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function oz(t){var e=t<0?12:11,r=nx(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function lz(t){var e=nx(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function td(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=oz(t):e===10?r=t.toFixed(10).substr(0,12):r=lz(t),nx(iz(r.toUpperCase()))}function Uo(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):td(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Fs(14,JC(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function cz(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function uz(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return jp[r.m-1][1];case 5:return jp[r.m-1][0];default:return jp[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return J2[r.q][0];default:return J2[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Xs(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=Xs(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?Xs(l,c):"";return u}function Li(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var ZC=/%/g;function dz(t,e,r){var n=e.replace(ZC,""),s=e.length-n.length;return za(t,n,r*Math.pow(10,2*s))+Fr("%",s)}function fz(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return za(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function e4(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+e4(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var t4=/# (\?+)( ?)\/( ?)(\d+)/;function hz(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?Fr(" ",t[1].length+1+t[4].length):rx(a,t[1].length)+t[2]+"/"+t[3]+Xs(o,t[4].length))}function pz(t,e,r){return r+(e===0?"":""+e)+Fr(" ",t[1].length+2+t[4].length)}var r4=/^#*0*\.([0#]+)/,n4=/\).*[0#]/,s4=/\(###\) ###\\?-####/;function Wn(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function eb(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function tb(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function mz(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function vz(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ws(t,e,r){if(t.charCodeAt(0)===40&&!e.match(n4)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ws("n",n,r):"("+ws("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return fz(t,e,r);if(e.indexOf("%")!==-1)return dz(t,e,r);if(e.indexOf("E")!==-1)return e4(e,r);if(e.charCodeAt(0)===36)return"$"+ws(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+pl(l,e.length);if(e.match(/^[#?]+$/))return s=pl(r,0),s==="0"&&(s=""),s.length>e.length?s:Wn(e.substr(0,e.length-s.length))+s;if(i=e.match(t4))return hz(i,l,c);if(e.match(/^#+0+$/))return c+pl(l,e.length-e.indexOf("0"));if(i=e.match(r4))return s=eb(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Wn(i[1])).replace(/\.$/,"."+Wn(i[1])).replace(/\.(\d*)$/,function(v,m){return"."+m+Fr("0",Wn(i[1]).length-m.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+eb(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Li(pl(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ws(t,e,-r):Li(""+(Math.floor(r)+mz(r,i[1].length)))+"."+Xs(tb(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return ws(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=jl(ws(t,e.replace(/[\\-]/g,""),r)),a=0,jl(jl(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<s.length?s.charAt(a++):v==="0"?"0":""}));if(e.match(s4))return s=ws(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=U0(l,Math.pow(10,a)-1,!1),s=""+c,u=za("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=B0(o[2],a),u.length<i[4].length&&(u=Wn(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=U0(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?rx(o[1],a)+i[2]+"/"+i[3]+B0(o[2],a):Fr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=pl(r,0),e.length<=s.length?s:Wn(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,f=e.length-s.length-d;return Wn(e.substr(0,d)+s+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=tb(r,i[1].length),r<0?"-"+ws(t,e,-r):Li(vz(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Xs(0,3-v.length):"")+v})+"."+Xs(a,i[1].length);switch(e){case"###,##0.00":return ws(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=Li(pl(l,0));return h!=="0"?c+h:"";case"###,###.00":return ws(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ws(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function gz(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return za(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function xz(t,e,r){var n=e.replace(ZC,""),s=e.length-n.length;return za(t,n,r*Math.pow(10,2*s))+Fr("%",s)}function a4(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+a4(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function oa(t,e,r){if(t.charCodeAt(0)===40&&!e.match(n4)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?oa("n",n,r):"("+oa("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return gz(t,e,r);if(e.indexOf("%")!==-1)return xz(t,e,r);if(e.indexOf("E")!==-1)return a4(e,r);if(e.charCodeAt(0)===36)return"$"+oa(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Xs(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:Wn(e.substr(0,e.length-s.length))+s;if(i=e.match(t4))return pz(i,l,c);if(e.match(/^#+0+$/))return c+Xs(l,e.length-e.indexOf("0"));if(i=e.match(r4))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Wn(i[1])).replace(/\.$/,"."+Wn(i[1])),s=s.replace(/\.(\d*)$/,function(v,m){return"."+m+Fr("0",Wn(i[1]).length-m.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Li(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+oa(t,e,-r):Li(""+r)+"."+Fr("0",i[1].length);if(i=e.match(/^#,#*,#0/))return oa(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=jl(oa(t,e.replace(/[\\-]/g,""),r)),a=0,jl(jl(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<s.length?s.charAt(a++):v==="0"?"0":""}));if(e.match(s4))return s=oa(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=U0(l,Math.pow(10,a)-1,!1),s=""+c,u=za("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=B0(o[2],a),u.length<i[4].length&&(u=Wn(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=U0(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?rx(o[1],a)+i[2]+"/"+i[3]+B0(o[2],a):Fr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:Wn(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,f=e.length-s.length-d;return Wn(e.substr(0,d)+s+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+oa(t,e,-r):Li(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Xs(0,3-v.length):"")+v})+"."+Xs(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var h=Li(""+l);return h!=="0"?c+h:"";default:if(e.match(/\.[0#?]*$/))return oa(t,e.slice(0,e.lastIndexOf(".")),r)+Wn(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function za(t,e,r){return(r|0)===r?oa(t,e,r):ws(t,e,r)}function yz(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var i4=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function gc(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":M0(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(i4))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Ez(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,u,d,f="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!M0(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(d=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(d);s[s.length]={t:"t",v:i},++a;break;case"\\":var h=t.charAt(++a),v=h==="("||h===")"?h:"t";s[s.length]={t:v,v:h},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=_o(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=_o(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=f),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var m={t:o,v:o};if(c==null&&(c=_o(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(m.v=c.H>=12?"P":"A"),m.t="T",f="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(m.v=c.H>=12?"PM":"AM"),m.t="T",a+=5,f="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(m.v=c.H>=12?"":""),m.t="T",a+=5,f="h"):(m.t="t",++a),c==null&&m.t==="T")return"";s[s.length]=m,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(i4)){if(c==null&&(c=_o(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",gc(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var g=0,b=0,_;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=f,l="h",g<1&&(g=1);break;case"s":(_=s[a].v.match(/\.0+$/))&&(b=Math.max(b,_[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[a].v.match(/[Hh]/)&&(g=1),g<2&&s[a].v.match(/[Mm]/)&&(g=2),g<3&&s[a].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var T="",C;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=uz(s[a].t.charCodeAt(0),s[a].v,c,b),s[a].t="t";break;case"n":case"?":for(C=a+1;s[C]!=null&&((o=s[C].t)==="?"||o==="D"||(o===" "||o==="t")&&s[C+1]!=null&&(s[C+1].t==="?"||s[C+1].t==="t"&&s[C+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[C].v==="/"||s[C].v===" "&&s[C+1]!=null&&s[C+1].t=="?"));)s[a].v+=s[C].v,s[C]={v:"",t:";"},++C;T+=s[a].v,a=C-1;break;case"G":s[a].t="t",s[a].v=Uo(e,r);break}var R="",D,w;if(T.length>0){T.charCodeAt(0)==40?(D=e<0&&T.charCodeAt(0)===45?-e:e,w=za("n",T,D)):(D=e<0&&n>1?-e:e,w=za("n",T,D),D<0&&s[0]&&s[0].t=="t"&&(w=w.substr(1),s[0].v="-"+s[0].v)),C=w.length-1;var E=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){E=a;break}var y=s.length;if(E===s.length&&w.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(C>=s[a].v.length-1?(C-=s[a].v.length,s[a].v=w.substr(C+1,s[a].v.length)):C<0?s[a].v="":(s[a].v=w.substr(0,C+1),C=-1),s[a].t="t",y=a);C>=0&&y<s.length&&(s[y].v=w.substr(0,C+1)+s[y].v)}else if(E!==s.length&&w.indexOf("E")===-1){for(C=w.indexOf(".")-1,a=E;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(u=s[a].v.indexOf(".")>-1&&a===E?s[a].v.indexOf(".")-1:s[a].v.length-1,R=s[a].v.substr(u+1);u>=0;--u)C>=0&&(s[a].v.charAt(u)==="0"||s[a].v.charAt(u)==="#")&&(R=w.charAt(C--)+R);s[a].v=R,s[a].t="t",y=a}for(C>=0&&y<s.length&&(s[y].v=w.substr(0,C+1)+s[y].v),C=w.indexOf(".")+1,a=E;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==E)){for(u=s[a].v.indexOf(".")>-1&&a===E?s[a].v.indexOf(".")+1:0,R=s[a].v.substr(0,u);u<s[a].v.length;++u)C<w.length&&(R+=w.charAt(C++));s[a].v=R,s[a].t="t",y=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(D=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=za(s[a].t,s[a].v,D),s[a].t="t");var x="";for(a=0;a!==s.length;++a)s[a]!=null&&(x+=s[a].v);return x}var rb=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function nb(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function bz(t,e){var r=yz(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(rb),o=r[1].match(rb);return nb(e,a)?[n,r[0]]:nb(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function Fs(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ot)[t],n==null&&(n=r.table&&r.table[Z2[t]]||Ot[Z2[t]]),n==null&&(n=nz[t]||"General");break}if(M0(n,0))return Uo(e,r);e instanceof Date&&(e=JC(e,r.date1904));var s=bz(n,e);if(M0(s[1]))return Uo(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Ez(s[1],e,r,s[0])}function Io(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Ot[r]==null){e<0&&(e=r);continue}if(Ot[r]==t){e=r;break}}e<0&&(e=391)}return Ot[e]=t,e}function o4(){Ot=rz()}var _z={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},l4=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Sz(t){var e=typeof t=="number"?Ot[t]:t;return e=e.replace(l4,"(\\d+)"),new RegExp("^"+e+"$")}function Tz(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(l4)||[]).forEach(function(d,f){var h=parseInt(r[f+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=h;break;case"d":i=h;break;case"h":a=h;break;case"s":l=h;break;case"m":a>=0?o=h:s=h;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?u:c+"T"+u}var Az=function(){var t={};t.version="1.2.0";function e(){for(var w=0,E=new Array(256),y=0;y!=256;++y)w=y,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,E[y]=w;return typeof Int32Array<"u"?new Int32Array(E):E}var r=e();function n(w){var E=0,y=0,x=0,I=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(x=0;x!=256;++x)I[x]=w[x];for(x=0;x!=256;++x)for(y=w[x],E=256+x;E<4096;E+=256)y=I[E]=y>>>8^w[y&255];var A=[];for(x=1;x!=16;++x)A[x-1]=typeof Int32Array<"u"?I.subarray(x*256,x*256+256):I.slice(x*256,x*256+256);return A}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],d=s[6],f=s[7],h=s[8],v=s[9],m=s[10],g=s[11],b=s[12],_=s[13],T=s[14];function C(w,E){for(var y=E^-1,x=0,I=w.length;x<I;)y=y>>>8^r[(y^w.charCodeAt(x++))&255];return~y}function R(w,E){for(var y=E^-1,x=w.length-15,I=0;I<x;)y=T[w[I++]^y&255]^_[w[I++]^y>>8&255]^b[w[I++]^y>>16&255]^g[w[I++]^y>>>24]^m[w[I++]]^v[w[I++]]^h[w[I++]]^f[w[I++]]^d[w[I++]]^u[w[I++]]^c[w[I++]]^l[w[I++]]^o[w[I++]]^a[w[I++]]^i[w[I++]]^r[w[I++]];for(x+=15;I<x;)y=y>>>8^r[(y^w[I++])&255];return~y}function D(w,E){for(var y=E^-1,x=0,I=w.length,A=0,k=0;x<I;)A=w.charCodeAt(x++),A<128?y=y>>>8^r[(y^A)&255]:A<2048?(y=y>>>8^r[(y^(192|A>>6&31))&255],y=y>>>8^r[(y^(128|A&63))&255]):A>=55296&&A<57344?(A=(A&1023)+64,k=w.charCodeAt(x++)&1023,y=y>>>8^r[(y^(240|A>>8&7))&255],y=y>>>8^r[(y^(128|A>>2&63))&255],y=y>>>8^r[(y^(128|k>>6&15|(A&3)<<4))&255],y=y>>>8^r[(y^(128|k&63))&255]):(y=y>>>8^r[(y^(224|A>>12&15))&255],y=y>>>8^r[(y^(128|A>>6&63))&255],y=y>>>8^r[(y^(128|A&63))&255]);return~y}return t.table=r,t.bstr=C,t.buf=R,t.str=D,t}(),zt=function(){var e={};e.version="1.2.1";function r(te,le){for(var se=te.split("/"),ae=le.split("/"),ce=0,ue=0,Ae=Math.min(se.length,ae.length);ce<Ae;++ce){if(ue=se[ce].length-ae[ce].length)return ue;if(se[ce]!=ae[ce])return se[ce]<ae[ce]?-1:1}return se.length-ae.length}function n(te){if(te.charAt(te.length-1)=="/")return te.slice(0,-1).indexOf("/")===-1?te:n(te.slice(0,-1));var le=te.lastIndexOf("/");return le===-1?te:te.slice(0,le+1)}function s(te){if(te.charAt(te.length-1)=="/")return s(te.slice(0,-1));var le=te.lastIndexOf("/");return le===-1?te:te.slice(le+1)}function i(te,le){typeof le=="string"&&(le=new Date(le));var se=le.getHours();se=se<<6|le.getMinutes(),se=se<<5|le.getSeconds()>>>1,te.write_shift(2,se);var ae=le.getFullYear()-1980;ae=ae<<4|le.getMonth()+1,ae=ae<<5|le.getDate(),te.write_shift(2,ae)}function a(te){var le=te.read_shift(2)&65535,se=te.read_shift(2)&65535,ae=new Date,ce=se&31;se>>>=5;var ue=se&15;se>>>=4,ae.setMilliseconds(0),ae.setFullYear(se+1980),ae.setMonth(ue-1),ae.setDate(ce);var Ae=le&31;le>>>=5;var Le=le&63;return le>>>=6,ae.setHours(le),ae.setMinutes(Le),ae.setSeconds(Ae<<1),ae}function o(te){un(te,0);for(var le={},se=0;te.l<=te.length-4;){var ae=te.read_shift(2),ce=te.read_shift(2),ue=te.l+ce,Ae={};switch(ae){case 21589:se=te.read_shift(1),se&1&&(Ae.mtime=te.read_shift(4)),ce>5&&(se&2&&(Ae.atime=te.read_shift(4)),se&4&&(Ae.ctime=te.read_shift(4))),Ae.mtime&&(Ae.mt=new Date(Ae.mtime*1e3));break}te.l=ue,le[ae]=Ae}return le}var l;function c(){return l||(l={})}function u(te,le){if(te[0]==80&&te[1]==75)return ut(te,le);if((te[0]|32)==109&&(te[1]|32)==105)return ao(te,le);if(te.length<512)throw new Error("CFB file size "+te.length+" < 512");var se=3,ae=512,ce=0,ue=0,Ae=0,Le=0,we=0,Ie=[],De=te.slice(0,512);un(De,0);var Ke=d(De);switch(se=Ke[0],se){case 3:ae=512;break;case 4:ae=4096;break;case 0:if(Ke[1]==0)return ut(te,le);default:throw new Error("Major Version: Expected 3 or 4 saw "+se)}ae!==512&&(De=te.slice(0,ae),un(De,28));var Ye=te.slice(0,ae);f(De,se);var nt=De.read_shift(4,"i");if(se===3&&nt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+nt);De.l+=4,Ae=De.read_shift(4,"i"),De.l+=4,De.chk("00100000","Mini Stream Cutoff Size: "),Le=De.read_shift(4,"i"),ce=De.read_shift(4,"i"),we=De.read_shift(4,"i"),ue=De.read_shift(4,"i");for(var Xe=-1,et=0;et<109&&(Xe=De.read_shift(4,"i"),!(Xe<0));++et)Ie[et]=Xe;var St=h(te,ae);g(we,ue,St,ae,Ie);var ir=_(St,Ae,Ie,ae);ir[Ae].name="!Directory",ce>0&&Le!==k&&(ir[Le].name="!MiniFAT"),ir[Ie[0]].name="!FAT",ir.fat_addrs=Ie,ir.ssz=ae;var tr={},xr=[],Fa=[],oo=[];T(Ae,ir,St,xr,ce,tr,Fa,Le),v(Fa,oo,xr),xr.shift();var di={FileIndex:Fa,FullPaths:oo};return le&&le.raw&&(di.raw={header:Ye,sectors:St}),di}function d(te){if(te[te.l]==80&&te[te.l+1]==75)return[0,0];te.chk(U,"Header Signature: "),te.l+=16;var le=te.read_shift(2,"u");return[te.read_shift(2,"u"),le]}function f(te,le){var se=9;switch(te.l+=2,se=te.read_shift(2)){case 9:if(le!=3)throw new Error("Sector Shift: Expected 9 saw "+se);break;case 12:if(le!=4)throw new Error("Sector Shift: Expected 12 saw "+se);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+se)}te.chk("0600","Mini Sector Shift: "),te.chk("000000000000","Reserved: ")}function h(te,le){for(var se=Math.ceil(te.length/le)-1,ae=[],ce=1;ce<se;++ce)ae[ce-1]=te.slice(ce*le,(ce+1)*le);return ae[se-1]=te.slice(se*le),ae}function v(te,le,se){for(var ae=0,ce=0,ue=0,Ae=0,Le=0,we=se.length,Ie=[],De=[];ae<we;++ae)Ie[ae]=De[ae]=ae,le[ae]=se[ae];for(;Le<De.length;++Le)ae=De[Le],ce=te[ae].L,ue=te[ae].R,Ae=te[ae].C,Ie[ae]===ae&&(ce!==-1&&Ie[ce]!==ce&&(Ie[ae]=Ie[ce]),ue!==-1&&Ie[ue]!==ue&&(Ie[ae]=Ie[ue])),Ae!==-1&&(Ie[Ae]=ae),ce!==-1&&ae!=Ie[ae]&&(Ie[ce]=Ie[ae],De.lastIndexOf(ce)<Le&&De.push(ce)),ue!==-1&&ae!=Ie[ae]&&(Ie[ue]=Ie[ae],De.lastIndexOf(ue)<Le&&De.push(ue));for(ae=1;ae<we;++ae)Ie[ae]===ae&&(ue!==-1&&Ie[ue]!==ue?Ie[ae]=Ie[ue]:ce!==-1&&Ie[ce]!==ce&&(Ie[ae]=Ie[ce]));for(ae=1;ae<we;++ae)if(te[ae].type!==0){if(Le=ae,Le!=Ie[Le])do Le=Ie[Le],le[ae]=le[Le]+"/"+le[ae];while(Le!==0&&Ie[Le]!==-1&&Le!=Ie[Le]);Ie[ae]=-1}for(le[0]+="/",ae=1;ae<we;++ae)te[ae].type!==2&&(le[ae]+="/")}function m(te,le,se){for(var ae=te.start,ce=te.size,ue=[],Ae=ae;se&&ce>0&&Ae>=0;)ue.push(le.slice(Ae*A,Ae*A+A)),ce-=A,Ae=xo(se,Ae*4);return ue.length===0?Kr(0):Fi(ue).slice(0,te.size)}function g(te,le,se,ae,ce){var ue=k;if(te===k){if(le!==0)throw new Error("DIFAT chain shorter than expected")}else if(te!==-1){var Ae=se[te],Le=(ae>>>2)-1;if(!Ae)return;for(var we=0;we<Le&&(ue=xo(Ae,we*4))!==k;++we)ce.push(ue);g(xo(Ae,ae-4),le-1,se,ae,ce)}}function b(te,le,se,ae,ce){var ue=[],Ae=[];ce||(ce=[]);var Le=ae-1,we=0,Ie=0;for(we=le;we>=0;){ce[we]=!0,ue[ue.length]=we,Ae.push(te[we]);var De=se[Math.floor(we*4/ae)];if(Ie=we*4&Le,ae<4+Ie)throw new Error("FAT boundary crossed: "+we+" 4 "+ae);if(!te[De])break;we=xo(te[De],Ie)}return{nodes:ue,data:hb([Ae])}}function _(te,le,se,ae){var ce=te.length,ue=[],Ae=[],Le=[],we=[],Ie=ae-1,De=0,Ke=0,Ye=0,nt=0;for(De=0;De<ce;++De)if(Le=[],Ye=De+le,Ye>=ce&&(Ye-=ce),!Ae[Ye]){we=[];var Xe=[];for(Ke=Ye;Ke>=0;){Xe[Ke]=!0,Ae[Ke]=!0,Le[Le.length]=Ke,we.push(te[Ke]);var et=se[Math.floor(Ke*4/ae)];if(nt=Ke*4&Ie,ae<4+nt)throw new Error("FAT boundary crossed: "+Ke+" 4 "+ae);if(!te[et]||(Ke=xo(te[et],nt),Xe[Ke]))break}ue[Ye]={nodes:Le,data:hb([we])}}return ue}function T(te,le,se,ae,ce,ue,Ae,Le){for(var we=0,Ie=ae.length?2:0,De=le[te].data,Ke=0,Ye=0,nt;Ke<De.length;Ke+=128){var Xe=De.slice(Ke,Ke+128);un(Xe,64),Ye=Xe.read_shift(2),nt=lx(Xe,0,Ye-Ie),ae.push(nt);var et={name:nt,type:Xe.read_shift(1),color:Xe.read_shift(1),L:Xe.read_shift(4,"i"),R:Xe.read_shift(4,"i"),C:Xe.read_shift(4,"i"),clsid:Xe.read_shift(16),state:Xe.read_shift(4,"i"),start:0,size:0},St=Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2);St!==0&&(et.ct=C(Xe,Xe.l-8));var ir=Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2);ir!==0&&(et.mt=C(Xe,Xe.l-8)),et.start=Xe.read_shift(4,"i"),et.size=Xe.read_shift(4,"i"),et.size<0&&et.start<0&&(et.size=et.type=0,et.start=k,et.name=""),et.type===5?(we=et.start,ce>0&&we!==k&&(le[we].name="!StreamData")):et.size>=4096?(et.storage="fat",le[et.start]===void 0&&(le[et.start]=b(se,et.start,le.fat_addrs,le.ssz)),le[et.start].name=et.name,et.content=le[et.start].data.slice(0,et.size)):(et.storage="minifat",et.size<0?et.size=0:we!==k&&et.start!==k&&le[we]&&(et.content=m(et,le[we].data,(le[Le]||{}).data))),et.content&&un(et.content,0),ue[nt]=et,Ae.push(et)}}function C(te,le){return new Date((hs(te,le+4)/1e7*Math.pow(2,32)+hs(te,le)/1e7-11644473600)*1e3)}function R(te,le){return c(),u(l.readFileSync(te),le)}function D(te,le){var se=le&&le.type;switch(se||jt&&Buffer.isBuffer(te)&&(se="buffer"),se||"base64"){case"file":return R(te,le);case"base64":return u(zs(_s(te)),le);case"binary":return u(zs(te),le)}return u(te,le)}function w(te,le){var se=le||{},ae=se.root||"Root Entry";if(te.FullPaths||(te.FullPaths=[]),te.FileIndex||(te.FileIndex=[]),te.FullPaths.length!==te.FileIndex.length)throw new Error("inconsistent CFB structure");te.FullPaths.length===0&&(te.FullPaths[0]=ae+"/",te.FileIndex[0]={name:ae,type:5}),se.CLSID&&(te.FileIndex[0].clsid=se.CLSID),E(te)}function E(te){var le="Sh33tJ5";if(!zt.find(te,"/"+le)){var se=Kr(4);se[0]=55,se[1]=se[3]=50,se[2]=54,te.FileIndex.push({name:le,type:2,content:se,size:4,L:69,R:69,C:69}),te.FullPaths.push(te.FullPaths[0]+le),y(te)}}function y(te,le){w(te);for(var se=!1,ae=!1,ce=te.FullPaths.length-1;ce>=0;--ce){var ue=te.FileIndex[ce];switch(ue.type){case 0:ae?se=!0:(te.FileIndex.pop(),te.FullPaths.pop());break;case 1:case 2:case 5:ae=!0,isNaN(ue.R*ue.L*ue.C)&&(se=!0),ue.R>-1&&ue.L>-1&&ue.R==ue.L&&(se=!0);break;default:se=!0;break}}if(!(!se&&!le)){var Ae=new Date(1987,1,19),Le=0,we=Object.create?Object.create(null):{},Ie=[];for(ce=0;ce<te.FullPaths.length;++ce)we[te.FullPaths[ce]]=!0,te.FileIndex[ce].type!==0&&Ie.push([te.FullPaths[ce],te.FileIndex[ce]]);for(ce=0;ce<Ie.length;++ce){var De=n(Ie[ce][0]);ae=we[De],ae||(Ie.push([De,{name:s(De).replace("/",""),type:1,clsid:P,ct:Ae,mt:Ae,content:null}]),we[De]=!0)}for(Ie.sort(function(nt,Xe){return r(nt[0],Xe[0])}),te.FullPaths=[],te.FileIndex=[],ce=0;ce<Ie.length;++ce)te.FullPaths[ce]=Ie[ce][0],te.FileIndex[ce]=Ie[ce][1];for(ce=0;ce<Ie.length;++ce){var Ke=te.FileIndex[ce],Ye=te.FullPaths[ce];if(Ke.name=s(Ye).replace("/",""),Ke.L=Ke.R=Ke.C=-(Ke.color=1),Ke.size=Ke.content?Ke.content.length:0,Ke.start=0,Ke.clsid=Ke.clsid||P,ce===0)Ke.C=Ie.length>1?1:-1,Ke.size=0,Ke.type=5;else if(Ye.slice(-1)=="/"){for(Le=ce+1;Le<Ie.length&&n(te.FullPaths[Le])!=Ye;++Le);for(Ke.C=Le>=Ie.length?-1:Le,Le=ce+1;Le<Ie.length&&n(te.FullPaths[Le])!=n(Ye);++Le);Ke.R=Le>=Ie.length?-1:Le,Ke.type=1}else n(te.FullPaths[ce+1]||"")==n(Ye)&&(Ke.R=ce+1),Ke.type=2}}}function x(te,le){var se=le||{};if(se.fileType=="mad")return Wr(te,se);switch(y(te),se.fileType){case"zip":return Ft(te,se)}var ae=function(nt){for(var Xe=0,et=0,St=0;St<nt.FileIndex.length;++St){var ir=nt.FileIndex[St];if(ir.content){var tr=ir.content.length;tr>0&&(tr<4096?Xe+=tr+63>>6:et+=tr+511>>9)}}for(var xr=nt.FullPaths.length+3>>2,Fa=Xe+7>>3,oo=Xe+127>>7,di=Fa+et+xr+oo,na=di+127>>7,il=na<=109?0:Math.ceil((na-109)/127);di+na+il+127>>7>na;)il=++na<=109?0:Math.ceil((na-109)/127);var cs=[1,il,na,oo,xr,et,Xe,0];return nt.FileIndex[0].size=Xe<<6,cs[7]=(nt.FileIndex[0].start=cs[0]+cs[1]+cs[2]+cs[3]+cs[4]+cs[5])+(cs[6]+7>>3),cs}(te),ce=Kr(ae[7]<<9),ue=0,Ae=0;{for(ue=0;ue<8;++ue)ce.write_shift(1,W[ue]);for(ue=0;ue<8;++ue)ce.write_shift(2,0);for(ce.write_shift(2,62),ce.write_shift(2,3),ce.write_shift(2,65534),ce.write_shift(2,9),ce.write_shift(2,6),ue=0;ue<3;++ue)ce.write_shift(2,0);for(ce.write_shift(4,0),ce.write_shift(4,ae[2]),ce.write_shift(4,ae[0]+ae[1]+ae[2]+ae[3]-1),ce.write_shift(4,0),ce.write_shift(4,4096),ce.write_shift(4,ae[3]?ae[0]+ae[1]+ae[2]-1:k),ce.write_shift(4,ae[3]),ce.write_shift(-4,ae[1]?ae[0]-1:k),ce.write_shift(4,ae[1]),ue=0;ue<109;++ue)ce.write_shift(-4,ue<ae[2]?ae[1]+ue:-1)}if(ae[1])for(Ae=0;Ae<ae[1];++Ae){for(;ue<236+Ae*127;++ue)ce.write_shift(-4,ue<ae[2]?ae[1]+ue:-1);ce.write_shift(-4,Ae===ae[1]-1?k:Ae+1)}var Le=function(nt){for(Ae+=nt;ue<Ae-1;++ue)ce.write_shift(-4,ue+1);nt&&(++ue,ce.write_shift(-4,k))};for(Ae=ue=0,Ae+=ae[1];ue<Ae;++ue)ce.write_shift(-4,B.DIFSECT);for(Ae+=ae[2];ue<Ae;++ue)ce.write_shift(-4,B.FATSECT);Le(ae[3]),Le(ae[4]);for(var we=0,Ie=0,De=te.FileIndex[0];we<te.FileIndex.length;++we)De=te.FileIndex[we],De.content&&(Ie=De.content.length,!(Ie<4096)&&(De.start=Ae,Le(Ie+511>>9)));for(Le(ae[6]+7>>3);ce.l&511;)ce.write_shift(-4,B.ENDOFCHAIN);for(Ae=ue=0,we=0;we<te.FileIndex.length;++we)De=te.FileIndex[we],De.content&&(Ie=De.content.length,!(!Ie||Ie>=4096)&&(De.start=Ae,Le(Ie+63>>6)));for(;ce.l&511;)ce.write_shift(-4,B.ENDOFCHAIN);for(ue=0;ue<ae[4]<<2;++ue){var Ke=te.FullPaths[ue];if(!Ke||Ke.length===0){for(we=0;we<17;++we)ce.write_shift(4,0);for(we=0;we<3;++we)ce.write_shift(4,-1);for(we=0;we<12;++we)ce.write_shift(4,0);continue}De=te.FileIndex[ue],ue===0&&(De.start=De.size?De.start-1:k);var Ye=ue===0&&se.root||De.name;if(Ie=2*(Ye.length+1),ce.write_shift(64,Ye,"utf16le"),ce.write_shift(2,Ie),ce.write_shift(1,De.type),ce.write_shift(1,De.color),ce.write_shift(-4,De.L),ce.write_shift(-4,De.R),ce.write_shift(-4,De.C),De.clsid)ce.write_shift(16,De.clsid,"hex");else for(we=0;we<4;++we)ce.write_shift(4,0);ce.write_shift(4,De.state||0),ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(4,De.start),ce.write_shift(4,De.size),ce.write_shift(4,0)}for(ue=1;ue<te.FileIndex.length;++ue)if(De=te.FileIndex[ue],De.size>=4096)if(ce.l=De.start+1<<9,jt&&Buffer.isBuffer(De.content))De.content.copy(ce,ce.l,0,De.size),ce.l+=De.size+511&-512;else{for(we=0;we<De.size;++we)ce.write_shift(1,De.content[we]);for(;we&511;++we)ce.write_shift(1,0)}for(ue=1;ue<te.FileIndex.length;++ue)if(De=te.FileIndex[ue],De.size>0&&De.size<4096)if(jt&&Buffer.isBuffer(De.content))De.content.copy(ce,ce.l,0,De.size),ce.l+=De.size+63&-64;else{for(we=0;we<De.size;++we)ce.write_shift(1,De.content[we]);for(;we&63;++we)ce.write_shift(1,0)}if(jt)ce.l=ce.length;else for(;ce.l<ce.length;)ce.write_shift(1,0);return ce}function I(te,le){var se=te.FullPaths.map(function(we){return we.toUpperCase()}),ae=se.map(function(we){var Ie=we.split("/");return Ie[Ie.length-(we.slice(-1)=="/"?2:1)]}),ce=!1;le.charCodeAt(0)===47?(ce=!0,le=se[0].slice(0,-1)+le):ce=le.indexOf("/")!==-1;var ue=le.toUpperCase(),Ae=ce===!0?se.indexOf(ue):ae.indexOf(ue);if(Ae!==-1)return te.FileIndex[Ae];var Le=!ue.match(Yc);for(ue=ue.replace(Zn,""),Le&&(ue=ue.replace(Yc,"!")),Ae=0;Ae<se.length;++Ae)if((Le?se[Ae].replace(Yc,"!"):se[Ae]).replace(Zn,"")==ue||(Le?ae[Ae].replace(Yc,"!"):ae[Ae]).replace(Zn,"")==ue)return te.FileIndex[Ae];return null}var A=64,k=-2,U="d0cf11e0a1b11ae1",W=[208,207,17,224,161,177,26,225],P="00000000000000000000000000000000",B={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:k,FREESECT:-1,HEADER_SIGNATURE:U,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:P,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(te,le,se){c();var ae=x(te,se);l.writeFileSync(le,ae)}function L(te){for(var le=new Array(te.length),se=0;se<te.length;++se)le[se]=String.fromCharCode(te[se]);return le.join("")}function Z(te,le){var se=x(te,le);switch(le&&le.type||"buffer"){case"file":return c(),l.writeFileSync(le.filename,se),se;case"binary":return typeof se=="string"?se:L(se);case"base64":return X2(typeof se=="string"?se:L(se));case"buffer":if(jt)return Buffer.isBuffer(se)?se:Yo(se);case"array":return typeof se=="string"?zs(se):se}return se}var j;function O(te){try{var le=te.InflateRaw,se=new le;if(se._processChunk(new Uint8Array([3,0]),se._finishFlushFlag),se.bytesRead)j=te;else throw new Error("zlib does not expose bytesRead")}catch(ae){console.error("cannot use native zlib: "+(ae.message||ae))}}function G(te,le){if(!j)return ct(te,le);var se=j.InflateRaw,ae=new se,ce=ae._processChunk(te.slice(te.l),ae._finishFlushFlag);return te.l+=ae.bytesRead,ce}function X(te){return j?j.deflateRawSync(te):xe(te)}var q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ie=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function de(te){var le=(te<<1|te<<11)&139536|(te<<5|te<<15)&558144;return(le>>16|le>>8|le)&255}for(var z=typeof Uint8Array<"u",J=z?new Uint8Array(256):[],me=0;me<256;++me)J[me]=de(me);function Y(te,le){var se=J[te&255];return le<=8?se>>>8-le:(se=se<<8|J[te>>8&255],le<=16?se>>>16-le:(se=se<<8|J[te>>16&255],se>>>24-le))}function K(te,le){var se=le&7,ae=le>>>3;return(te[ae]|(se<=6?0:te[ae+1]<<8))>>>se&3}function ee(te,le){var se=le&7,ae=le>>>3;return(te[ae]|(se<=5?0:te[ae+1]<<8))>>>se&7}function fe(te,le){var se=le&7,ae=le>>>3;return(te[ae]|(se<=4?0:te[ae+1]<<8))>>>se&15}function ve(te,le){var se=le&7,ae=le>>>3;return(te[ae]|(se<=3?0:te[ae+1]<<8))>>>se&31}function Q(te,le){var se=le&7,ae=le>>>3;return(te[ae]|(se<=1?0:te[ae+1]<<8))>>>se&127}function re(te,le,se){var ae=le&7,ce=le>>>3,ue=(1<<se)-1,Ae=te[ce]>>>ae;return se<8-ae||(Ae|=te[ce+1]<<8-ae,se<16-ae)||(Ae|=te[ce+2]<<16-ae,se<24-ae)||(Ae|=te[ce+3]<<24-ae),Ae&ue}function be(te,le,se){var ae=le&7,ce=le>>>3;return ae<=5?te[ce]|=(se&7)<<ae:(te[ce]|=se<<ae&255,te[ce+1]=(se&7)>>8-ae),le+3}function Te(te,le,se){var ae=le&7,ce=le>>>3;return se=(se&1)<<ae,te[ce]|=se,le+1}function _e(te,le,se){var ae=le&7,ce=le>>>3;return se<<=ae,te[ce]|=se&255,se>>>=8,te[ce+1]=se,le+8}function ke(te,le,se){var ae=le&7,ce=le>>>3;return se<<=ae,te[ce]|=se&255,se>>>=8,te[ce+1]=se&255,te[ce+2]=se>>>8,le+16}function Be(te,le){var se=te.length,ae=2*se>le?2*se:le+5,ce=0;if(se>=le)return te;if(jt){var ue=Y2(ae);if(te.copy)te.copy(ue);else for(;ce<te.length;++ce)ue[ce]=te[ce];return ue}else if(z){var Ae=new Uint8Array(ae);if(Ae.set)Ae.set(te);else for(;ce<se;++ce)Ae[ce]=te[ce];return Ae}return te.length=ae,te}function Ce(te){for(var le=new Array(te),se=0;se<te;++se)le[se]=0;return le}function je(te,le,se){var ae=1,ce=0,ue=0,Ae=0,Le=0,we=te.length,Ie=z?new Uint16Array(32):Ce(32);for(ue=0;ue<32;++ue)Ie[ue]=0;for(ue=we;ue<se;++ue)te[ue]=0;we=te.length;var De=z?new Uint16Array(we):Ce(we);for(ue=0;ue<we;++ue)Ie[ce=te[ue]]++,ae<ce&&(ae=ce),De[ue]=0;for(Ie[0]=0,ue=1;ue<=ae;++ue)Ie[ue+16]=Le=Le+Ie[ue-1]<<1;for(ue=0;ue<we;++ue)Le=te[ue],Le!=0&&(De[ue]=Ie[Le+16]++);var Ke=0;for(ue=0;ue<we;++ue)if(Ke=te[ue],Ke!=0)for(Le=Y(De[ue],ae)>>ae-Ke,Ae=(1<<ae+4-Ke)-1;Ae>=0;--Ae)le[Le|Ae<<Ke]=Ke&15|ue<<4;return ae}var Ue=z?new Uint16Array(512):Ce(512),He=z?new Uint16Array(32):Ce(32);if(!z){for(var qe=0;qe<512;++qe)Ue[qe]=0;for(qe=0;qe<32;++qe)He[qe]=0}(function(){for(var te=[],le=0;le<32;le++)te.push(5);je(te,He,32);var se=[];for(le=0;le<=143;le++)se.push(8);for(;le<=255;le++)se.push(9);for(;le<=279;le++)se.push(7);for(;le<=287;le++)se.push(8);je(se,Ue,288)})();var ye=function(){for(var le=z?new Uint8Array(32768):[],se=0,ae=0;se<ie.length-1;++se)for(;ae<ie[se+1];++ae)le[ae]=se;for(;ae<32768;++ae)le[ae]=29;var ce=z?new Uint8Array(259):[];for(se=0,ae=0;se<pe.length-1;++se)for(;ae<pe[se+1];++ae)ce[ae]=se;function ue(Le,we){for(var Ie=0;Ie<Le.length;){var De=Math.min(65535,Le.length-Ie),Ke=Ie+De==Le.length;for(we.write_shift(1,+Ke),we.write_shift(2,De),we.write_shift(2,~De&65535);De-- >0;)we[we.l++]=Le[Ie++]}return we.l}function Ae(Le,we){for(var Ie=0,De=0,Ke=z?new Uint16Array(32768):[];De<Le.length;){var Ye=Math.min(65535,Le.length-De);if(Ye<10){for(Ie=be(we,Ie,+(De+Ye==Le.length)),Ie&7&&(Ie+=8-(Ie&7)),we.l=Ie/8|0,we.write_shift(2,Ye),we.write_shift(2,~Ye&65535);Ye-- >0;)we[we.l++]=Le[De++];Ie=we.l*8;continue}Ie=be(we,Ie,+(De+Ye==Le.length)+2);for(var nt=0;Ye-- >0;){var Xe=Le[De];nt=(nt<<5^Xe)&32767;var et=-1,St=0;if((et=Ke[nt])&&(et|=De&-32768,et>De&&(et-=32768),et<De))for(;Le[et+St]==Le[De+St]&&St<250;)++St;if(St>2){Xe=ce[St],Xe<=22?Ie=_e(we,Ie,J[Xe+1]>>1)-1:(_e(we,Ie,3),Ie+=5,_e(we,Ie,J[Xe-23]>>5),Ie+=3);var ir=Xe<8?0:Xe-4>>2;ir>0&&(ke(we,Ie,St-pe[Xe]),Ie+=ir),Xe=le[De-et],Ie=_e(we,Ie,J[Xe]>>3),Ie-=3;var tr=Xe<4?0:Xe-2>>1;tr>0&&(ke(we,Ie,De-et-ie[Xe]),Ie+=tr);for(var xr=0;xr<St;++xr)Ke[nt]=De&32767,nt=(nt<<5^Le[De])&32767,++De;Ye-=St-1}else Xe<=143?Xe=Xe+48:Ie=Te(we,Ie,1),Ie=_e(we,Ie,J[Xe]),Ke[nt]=De&32767,++De}Ie=_e(we,Ie,0)-1}return we.l=(Ie+7)/8|0,we.l}return function(we,Ie){return we.length<8?ue(we,Ie):Ae(we,Ie)}}();function xe(te){var le=Kr(50+Math.floor(te.length*1.1)),se=ye(te,le);return le.slice(0,se)}var Ee=z?new Uint16Array(32768):Ce(32768),Fe=z?new Uint16Array(32768):Ce(32768),Ge=z?new Uint16Array(128):Ce(128),tt=1,ht=1;function mt(te,le){var se=ve(te,le)+257;le+=5;var ae=ve(te,le)+1;le+=5;var ce=fe(te,le)+4;le+=4;for(var ue=0,Ae=z?new Uint8Array(19):Ce(19),Le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],we=1,Ie=z?new Uint8Array(8):Ce(8),De=z?new Uint8Array(8):Ce(8),Ke=Ae.length,Ye=0;Ye<ce;++Ye)Ae[q[Ye]]=ue=ee(te,le),we<ue&&(we=ue),Ie[ue]++,le+=3;var nt=0;for(Ie[0]=0,Ye=1;Ye<=we;++Ye)De[Ye]=nt=nt+Ie[Ye-1]<<1;for(Ye=0;Ye<Ke;++Ye)(nt=Ae[Ye])!=0&&(Le[Ye]=De[nt]++);var Xe=0;for(Ye=0;Ye<Ke;++Ye)if(Xe=Ae[Ye],Xe!=0){nt=J[Le[Ye]]>>8-Xe;for(var et=(1<<7-Xe)-1;et>=0;--et)Ge[nt|et<<Xe]=Xe&7|Ye<<3}var St=[];for(we=1;St.length<se+ae;)switch(nt=Ge[Q(te,le)],le+=nt&7,nt>>>=3){case 16:for(ue=3+K(te,le),le+=2,nt=St[St.length-1];ue-- >0;)St.push(nt);break;case 17:for(ue=3+ee(te,le),le+=3;ue-- >0;)St.push(0);break;case 18:for(ue=11+Q(te,le),le+=7;ue-- >0;)St.push(0);break;default:St.push(nt),we<nt&&(we=nt);break}var ir=St.slice(0,se),tr=St.slice(se);for(Ye=se;Ye<286;++Ye)ir[Ye]=0;for(Ye=ae;Ye<30;++Ye)tr[Ye]=0;return tt=je(ir,Ee,286),ht=je(tr,Fe,30),le}function Lt(te,le){if(te[0]==3&&!(te[1]&3))return[Ji(le),2];for(var se=0,ae=0,ce=Y2(le||1<<18),ue=0,Ae=ce.length>>>0,Le=0,we=0;!(ae&1);){if(ae=ee(te,se),se+=3,ae>>>1)ae>>1==1?(Le=9,we=5):(se=mt(te,se),Le=tt,we=ht);else{se&7&&(se+=8-(se&7));var Ie=te[se>>>3]|te[(se>>>3)+1]<<8;if(se+=32,Ie>0)for(!le&&Ae<ue+Ie&&(ce=Be(ce,ue+Ie),Ae=ce.length);Ie-- >0;)ce[ue++]=te[se>>>3],se+=8;continue}for(;;){!le&&Ae<ue+32767&&(ce=Be(ce,ue+32767),Ae=ce.length);var De=re(te,se,Le),Ke=ae>>>1==1?Ue[De]:Ee[De];if(se+=Ke&15,Ke>>>=4,!(Ke>>>8&255))ce[ue++]=Ke;else{if(Ke==256)break;Ke-=257;var Ye=Ke<8?0:Ke-4>>2;Ye>5&&(Ye=0);var nt=ue+pe[Ke];Ye>0&&(nt+=re(te,se,Ye),se+=Ye),De=re(te,se,we),Ke=ae>>>1==1?He[De]:Fe[De],se+=Ke&15,Ke>>>=4;var Xe=Ke<4?0:Ke-2>>1,et=ie[Ke];for(Xe>0&&(et+=re(te,se,Xe),se+=Xe),!le&&Ae<nt&&(ce=Be(ce,nt+100),Ae=ce.length);ue<nt;)ce[ue]=ce[ue-et],++ue}}}return le?[ce,se+7>>>3]:[ce.slice(0,ue),se+7>>>3]}function ct(te,le){var se=te.slice(te.l||0),ae=Lt(se,le);return te.l+=ae[1],ae[0]}function st(te,le){if(te)typeof console<"u"&&console.error(le);else throw new Error(le)}function ut(te,le){var se=te;un(se,0);var ae=[],ce=[],ue={FileIndex:ae,FullPaths:ce};w(ue,{root:le.root});for(var Ae=se.length-4;(se[Ae]!=80||se[Ae+1]!=75||se[Ae+2]!=5||se[Ae+3]!=6)&&Ae>=0;)--Ae;se.l=Ae+4,se.l+=4;var Le=se.read_shift(2);se.l+=6;var we=se.read_shift(4);for(se.l=we,Ae=0;Ae<Le;++Ae){se.l+=20;var Ie=se.read_shift(4),De=se.read_shift(4),Ke=se.read_shift(2),Ye=se.read_shift(2),nt=se.read_shift(2);se.l+=8;var Xe=se.read_shift(4),et=o(se.slice(se.l+Ke,se.l+Ke+Ye));se.l+=Ke+Ye+nt;var St=se.l;se.l=Xe+4,Ct(se,Ie,De,ue,et),se.l=St}return ue}function Ct(te,le,se,ae,ce){te.l+=2;var ue=te.read_shift(2),Ae=te.read_shift(2),Le=a(te);if(ue&8257)throw new Error("Unsupported ZIP encryption");for(var we=te.read_shift(4),Ie=te.read_shift(4),De=te.read_shift(4),Ke=te.read_shift(2),Ye=te.read_shift(2),nt="",Xe=0;Xe<Ke;++Xe)nt+=String.fromCharCode(te[te.l++]);if(Ye){var et=o(te.slice(te.l,te.l+Ye));(et[21589]||{}).mt&&(Le=et[21589].mt),((ce||{})[21589]||{}).mt&&(Le=ce[21589].mt)}te.l+=Ye;var St=te.slice(te.l,te.l+Ie);switch(Ae){case 8:St=G(te,De);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ae)}var ir=!1;ue&8&&(we=te.read_shift(4),we==134695760&&(we=te.read_shift(4),ir=!0),Ie=te.read_shift(4),De=te.read_shift(4)),Ie!=le&&st(ir,"Bad compressed size: "+le+" != "+Ie),De!=se&&st(ir,"Bad uncompressed size: "+se+" != "+De),_r(ae,nt,St,{unsafe:!0,mt:Le})}function Ft(te,le){var se=le||{},ae=[],ce=[],ue=Kr(1),Ae=se.compression?8:0,Le=0,we=0,Ie=0,De=0,Ke=0,Ye=te.FullPaths[0],nt=Ye,Xe=te.FileIndex[0],et=[],St=0;for(we=1;we<te.FullPaths.length;++we)if(nt=te.FullPaths[we].slice(Ye.length),Xe=te.FileIndex[we],!(!Xe.size||!Xe.content||nt=="Sh33tJ5")){var ir=De,tr=Kr(nt.length);for(Ie=0;Ie<nt.length;++Ie)tr.write_shift(1,nt.charCodeAt(Ie)&127);tr=tr.slice(0,tr.l),et[Ke]=Az.buf(Xe.content,0);var xr=Xe.content;Ae==8&&(xr=X(xr)),ue=Kr(30),ue.write_shift(4,67324752),ue.write_shift(2,20),ue.write_shift(2,Le),ue.write_shift(2,Ae),Xe.mt?i(ue,Xe.mt):ue.write_shift(4,0),ue.write_shift(-4,et[Ke]),ue.write_shift(4,xr.length),ue.write_shift(4,Xe.content.length),ue.write_shift(2,tr.length),ue.write_shift(2,0),De+=ue.length,ae.push(ue),De+=tr.length,ae.push(tr),De+=xr.length,ae.push(xr),ue=Kr(46),ue.write_shift(4,33639248),ue.write_shift(2,0),ue.write_shift(2,20),ue.write_shift(2,Le),ue.write_shift(2,Ae),ue.write_shift(4,0),ue.write_shift(-4,et[Ke]),ue.write_shift(4,xr.length),ue.write_shift(4,Xe.content.length),ue.write_shift(2,tr.length),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(4,0),ue.write_shift(4,ir),St+=ue.l,ce.push(ue),St+=tr.length,ce.push(tr),++Ke}return ue=Kr(22),ue.write_shift(4,101010256),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,Ke),ue.write_shift(2,Ke),ue.write_shift(4,St),ue.write_shift(4,De),ue.write_shift(2,0),Fi([Fi(ae),Fi(ce),ue])}var pr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function $n(te,le){if(te.ctype)return te.ctype;var se=te.name||"",ae=se.match(/\.([^\.]+)$/);return ae&&pr[ae[1]]||le&&(ae=(se=le).match(/[\.\\]([^\.\\])+$/),ae&&pr[ae[1]])?pr[ae[1]]:"application/octet-stream"}function ui(te){for(var le=X2(te),se=[],ae=0;ae<le.length;ae+=76)se.push(le.slice(ae,ae+76));return se.join(`\r
`)+`\r
`}function ts(te){var le=te.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ie){var De=Ie.charCodeAt(0).toString(16).toUpperCase();return"="+(De.length==1?"0"+De:De)});le=le.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),le.charAt(0)==`
`&&(le="=0D"+le.slice(1)),le=le.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var se=[],ae=le.split(`\r
`),ce=0;ce<ae.length;++ce){var ue=ae[ce];if(ue.length==0){se.push("");continue}for(var Ae=0;Ae<ue.length;){var Le=76,we=ue.slice(Ae,Ae+Le);we.charAt(Le-1)=="="?Le--:we.charAt(Le-2)=="="?Le-=2:we.charAt(Le-3)=="="&&(Le-=3),we=ue.slice(Ae,Ae+Le),Ae+=Le,Ae<ue.length&&(we+="="),se.push(we)}}return se.join(`\r
`)}function sl(te){for(var le=[],se=0;se<te.length;++se){for(var ae=te[se];se<=te.length&&ae.charAt(ae.length-1)=="=";)ae=ae.slice(0,ae.length-1)+te[++se];le.push(ae)}for(var ce=0;ce<le.length;++ce)le[ce]=le[ce].replace(/[=][0-9A-Fa-f]{2}/g,function(ue){return String.fromCharCode(parseInt(ue.slice(1),16))});return zs(le.join(`\r
`))}function Ra(te,le,se){for(var ae="",ce="",ue="",Ae,Le=0;Le<10;++Le){var we=le[Le];if(!we||we.match(/^\s*$/))break;var Ie=we.match(/^(.*?):\s*([^\s].*)$/);if(Ie)switch(Ie[1].toLowerCase()){case"content-location":ae=Ie[2].trim();break;case"content-type":ue=Ie[2].trim();break;case"content-transfer-encoding":ce=Ie[2].trim();break}}switch(++Le,ce.toLowerCase()){case"base64":Ae=zs(_s(le.slice(Le).join("")));break;case"quoted-printable":Ae=sl(le.slice(Le));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ce)}var De=_r(te,ae.slice(se.length),Ae,{unsafe:!0});ue&&(De.ctype=ue)}function ao(te,le){if(L(te.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var se=le&&le.root||"",ae=(jt&&Buffer.isBuffer(te)?te.toString("binary"):L(te)).split(`\r
`),ce=0,ue="";for(ce=0;ce<ae.length;++ce)if(ue=ae[ce],!!/^Content-Location:/i.test(ue)&&(ue=ue.slice(ue.indexOf("file")),se||(se=ue.slice(0,ue.lastIndexOf("/")+1)),ue.slice(0,se.length)!=se))for(;se.length>0&&(se=se.slice(0,se.length-1),se=se.slice(0,se.lastIndexOf("/")+1),ue.slice(0,se.length)!=se););var Ae=(ae[1]||"").match(/boundary="(.*?)"/);if(!Ae)throw new Error("MAD cannot find boundary");var Le="--"+(Ae[1]||""),we=[],Ie=[],De={FileIndex:we,FullPaths:Ie};w(De);var Ke,Ye=0;for(ce=0;ce<ae.length;++ce){var nt=ae[ce];nt!==Le&&nt!==Le+"--"||(Ye++&&Ra(De,ae.slice(Ke,ce),se),Ke=ce)}return De}function Wr(te,le){var se=le||{},ae=se.boundary||"SheetJS";ae="------="+ae;for(var ce=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ae.slice(2)+'"',"","",""],ue=te.FullPaths[0],Ae=ue,Le=te.FileIndex[0],we=1;we<te.FullPaths.length;++we)if(Ae=te.FullPaths[we].slice(ue.length),Le=te.FileIndex[we],!(!Le.size||!Le.content||Ae=="Sh33tJ5")){Ae=Ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(St){return"_x"+St.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(St){return"_u"+St.charCodeAt(0).toString(16)+"_"});for(var Ie=Le.content,De=jt&&Buffer.isBuffer(Ie)?Ie.toString("binary"):L(Ie),Ke=0,Ye=Math.min(1024,De.length),nt=0,Xe=0;Xe<=Ye;++Xe)(nt=De.charCodeAt(Xe))>=32&&nt<128&&++Ke;var et=Ke>=Ye*4/5;ce.push(ae),ce.push("Content-Location: "+(se.root||"file:///C:/SheetJS/")+Ae),ce.push("Content-Transfer-Encoding: "+(et?"quoted-printable":"base64")),ce.push("Content-Type: "+$n(Le,Ae)),ce.push(""),ce.push(et?ts(De):ui(De))}return ce.push(ae+`--\r
`),ce.join(`\r
`)}function io(te){var le={};return w(le,te),le}function _r(te,le,se,ae){var ce=ae&&ae.unsafe;ce||w(te);var ue=!ce&&zt.find(te,le);if(!ue){var Ae=te.FullPaths[0];le.slice(0,Ae.length)==Ae?Ae=le:(Ae.slice(-1)!="/"&&(Ae+="/"),Ae=(Ae+le).replace("//","/")),ue={name:s(le),type:2},te.FileIndex.push(ue),te.FullPaths.push(Ae),ce||zt.utils.cfb_gc(te)}return ue.content=se,ue.size=se?se.length:0,ae&&(ae.CLSID&&(ue.clsid=ae.CLSID),ae.mt&&(ue.mt=ae.mt),ae.ct&&(ue.ct=ae.ct)),ue}function xn(te,le){w(te);var se=zt.find(te,le);if(se){for(var ae=0;ae<te.FileIndex.length;++ae)if(te.FileIndex[ae]==se)return te.FileIndex.splice(ae,1),te.FullPaths.splice(ae,1),!0}return!1}function al(te,le,se){w(te);var ae=zt.find(te,le);if(ae){for(var ce=0;ce<te.FileIndex.length;++ce)if(te.FileIndex[ce]==ae)return te.FileIndex[ce].name=s(se),te.FullPaths[ce]=se,!0}return!1}function Ec(te){y(te,!0)}return e.find=I,e.read=D,e.parse=u,e.write=Z,e.writeFile=H,e.utils={cfb_new:io,cfb_add:_r,cfb_del:xn,cfb_mov:al,cfb_gc:Ec,ReadShift:yu,CheckField:D4,prep_blob:un,bconcat:Fi,use_zlib:O,_deflateRaw:xe,_inflateRaw:ct,consts:B},e}();function wz(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Sa(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function sx(t){for(var e=[],r=Sa(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}var V0=new Date(1899,11,30,0,0,0);function es(t,e){var r=t.getTime(),n=V0.getTime()+(t.getTimezoneOffset()-V0.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var c4=new Date,Cz=V0.getTime()+(c4.getTimezoneOffset()-V0.getTimezoneOffset())*6e4,sb=c4.getTimezoneOffset();function Qh(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Cz),e.getTimezoneOffset()!==sb&&e.setTime(e.getTime()+(e.getTimezoneOffset()-sb)*6e4),e}function Iz(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var ab=new Date("2017-02-19T19:06:09.000Z"),u4=isNaN(ab.getFullYear())?new Date("2/19/17"):ab,kz=u4.getFullYear()==2017;function sn(t,e){var r=new Date(t);if(kz)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(u4.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Vo(t,e){if(jt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Jc(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Jc(YC(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Jc(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Jc(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function mn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=mn(t[r]));return e}function Fr(t,e){for(var r="";r.length<e;)r+=t;return r}function Js(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var Dz=["january","february","march","april","may","june","july","august","september","october","november","december"];function oc(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&Dz.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var Rz=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),a=[i[0]],o=1;o<i.length;++o)a.push(s),a.push(i[o]);return a}}();function d4(t){return t?t.content&&t.type?Vo(t.content,!0):t.data?Xc(t.data):t.asNodeBuffer&&jt?Xc(t.asNodeBuffer().toString("binary")):t.asBinary?Xc(t.asBinary()):t._data&&t._data.getContent?Xc(Vo(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function f4(t){if(!t)return null;if(t.data)return K2(t.data);if(t.asNodeBuffer&&jt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?K2(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Fz(t){return t&&t.name.slice(-4)===".bin"?f4(t):d4(t)}function Cs(t,e){for(var r=t.FullPaths||Sa(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var a=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||s==a)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function ax(t,e){var r=Cs(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Hr(t,e,r){if(!r)return Fz(ax(t,e));if(!e)return null;try{return Hr(t,e)}catch{return null}}function ms(t,e,r){if(!r)return d4(ax(t,e));if(!e)return null;try{return ms(t,e)}catch{return null}}function Pz(t,e,r){return f4(ax(t,e))}function ib(t){for(var e=t.FullPaths||Sa(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Oz(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return jt?n=Yo(r):n=ZW(r),zt.utils.cfb_add(t,e,n)}zt.utils.cfb_add(t,e,r)}else t.file(e,r)}function h4(t,e){switch(e.type){case"base64":return zt.read(t,{type:"base64"});case"binary":return zt.read(t,{type:"binary"});case"buffer":case"array":return zt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Qc(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var p4=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Nz=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,ob=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Lz=/<[^>]*>/g,Vn=p4.match(ob)?ob:Lz,Bz=/<\w*:/,Mz=/<(\/?)\w+:/;function bt(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var a=t.match(Nz),o=0,l="",c=0,u="",d="",f=1;if(a)for(c=0;c!=a.length;++c){for(d=a[c],i=0;i!=d.length&&d.charCodeAt(i)!==61;++i);for(u=d.slice(0,i).trim();d.charCodeAt(i+1)==32;)++i;for(f=(s=d.charCodeAt(i+1))==34||s==39?1:0,l=d.slice(i+1+f,d.length-f),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,n[u.toLowerCase()]=l;else{var h=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[h]&&u.slice(o-3,o)=="ext")continue;n[h]=l,n[h.toLowerCase()]=l}}return n}function ka(t){return t.replace(Mz,"<$1")}var m4={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Uz=sx(m4),qt=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(o,l){return m4[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,a)+r(s.slice(a+3))}}(),Vz=/[&<>'"]/g,$z=/[\u0000-\u001f]/g;function ix(t){var e=t+"";return e.replace(Vz,function(r){return Uz[r]}).replace(/\n/g,"<br/>").replace($z,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var lb=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Er(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Gp(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function cb(t){var e=Ji(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function ub(t){return Yo(t,"binary").toString("utf8")}var yf="foo bar baz",fr=jt&&(ub(yf)==Gp(yf)&&ub||cb(yf)==Gp(yf)&&cb)||Gp,Jc=jt?function(t){return Yo(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},rd=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),v4=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),Hz=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),jz=/<\/?(?:vt:)?variant>/g,Gz=/<(?:vt:)([^>]*)>([\s\S]*)</;function db(t,e){var r=bt(t),n=t.match(Hz(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var a=i.replace(jz,"").match(Gz);a&&s.push({v:fr(a[2]),t:a[1]})}),s}var Wz=/(^\s|\s$|\n)/;function zz(t){return Sa(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Kz(t,e,r){return"<"+t+(r!=null?zz(r):"")+(e!=null?(e.match(Wz)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function ox(t){if(jt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return fr(Qo(tx(t)));throw new Error("Bad input format: expected Buffer or string")}var nd=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,qz={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},Xz=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function Yz(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Qz(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var fb=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},hb=jt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Yo(e)})):fb(t)}:fb,pb=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(Ga(t,s)));return n.join("").replace(Zn,"")},lx=jt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Zn,""):pb(t,e,r)}:pb,mb=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},g4=jt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):mb(t,e,r)}:mb,vb=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Tl(t,s)));return n.join("")},Od=jt?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):vb(e,r,n)}:vb,x4=function(t,e){var r=hs(t,e);return r>0?Od(t,e+4,e+4+r-1):""},y4=x4,E4=function(t,e){var r=hs(t,e);return r>0?Od(t,e+4,e+4+r-1):""},b4=E4,_4=function(t,e){var r=2*hs(t,e);return r>0?Od(t,e+4,e+4+r-1):""},S4=_4,T4=function(e,r){var n=hs(e,r);return n>0?lx(e,r+4,r+4+n):""},A4=T4,w4=function(t,e){var r=hs(t,e);return r>0?Od(t,e+4,e+4+r):""},C4=w4,I4=function(t,e){return Yz(t,e)},$0=I4,k4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};jt&&(y4=function(e,r){if(!Buffer.isBuffer(e))return x4(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},b4=function(e,r){if(!Buffer.isBuffer(e))return E4(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},S4=function(e,r){if(!Buffer.isBuffer(e))return _4(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},A4=function(e,r){if(!Buffer.isBuffer(e))return T4(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},C4=function(e,r){if(!Buffer.isBuffer(e))return w4(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},$0=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):I4(e,r)},k4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Tl=function(t,e){return t[e]},Ga=function(t,e){return t[e+1]*256+t[e]},Jz=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},hs=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},xo=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Zz=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function yu(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,jt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(Ga(this,c)),c+=2;t*=2;break;case"utf8":r=Od(this,this.l,this.l+t);break;case"utf16le":t*=2,r=lx(this,this.l,this.l+t);break;case"wstr":return yu.call(this,t,"dbcs");case"lpstr-ansi":r=y4(this,this.l),t=4+hs(this,this.l);break;case"lpstr-cp":r=b4(this,this.l),t=4+hs(this,this.l);break;case"lpwstr":r=S4(this,this.l),t=4+2*hs(this,this.l);break;case"lpp4":t=4+hs(this,this.l),r=A4(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+hs(this,this.l),r=C4(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Tl(this,this.l+t++))!==0;)i.push(xf(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=Ga(this,this.l+t))!==0;)i.push(xf(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Tl(this,c),this.l=c+1,o=yu.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(xf(Ga(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Tl(this,c),this.l=c+1,o=yu.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(xf(Tl(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=Tl(this,this.l),this.l++,n;case 2:return n=(e==="i"?Jz:Ga)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?xo:Zz)(this,this.l),this.l+=4,n):(s=hs(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=$0(this,this.l):s=$0([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=g4(this,this.l,t);break}}return this.l+=t,r}var eK=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},tK=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},rK=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function nK(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)rK(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,eK(this,e,this.l);break;case 8:if(n=8,r==="f"){Qz(this,e,this.l);break}case 16:break;case-4:n=4,tK(this,e,this.l);break}return this.l+=n,this}function D4(t,e){var r=g4(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function un(t,e){t.l=e,t.read_shift=yu,t.chk=D4,t.write_shift=nK}function Un(t,e){t.l+=e}function Kr(t){var e=Ji(t);return un(e,0),e}function li(t,e,r){if(t){var n,s,i;un(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=K0[o]||K0[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;l=t.l+i;var u=c.f&&c.f(t,i,r);if(t.l=l,e(u,c,o))return}}}function Qv(){var t=[],e=jt?256:2048,r=function(c){var u=Kr(c);return un(u,0),u},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),Fi(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function Eu(t,e,r){var n=mn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function gb(t,e,r){var n=mn(t);return n.s=Eu(n.s,e.s,r),n.e=Eu(n.e,e.s,r),n}function bu(t,e){if(t.cRel&&t.c<0)for(t=mn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=mn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Dt(t);return!t.cRel&&t.cRel!=null&&(r=iK(r)),!t.rRel&&t.rRel!=null&&(r=sK(r)),r}function Wp(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Yr(t.s.c)+":"+(t.e.cRel?"":"$")+Yr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+vn(t.s.r)+":"+(t.e.rRel?"":"$")+vn(t.e.r):bu(t.s,e.biff)+":"+bu(t.e,e.biff)}function cx(t){return parseInt(aK(t),10)-1}function vn(t){return""+(t+1)}function sK(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function aK(t){return t.replace(/\$(\d+)$/,"$1")}function ux(t){for(var e=oK(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Yr(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function iK(t){return t.replace(/^([A-Z])/,"$$$1")}function oK(t){return t.replace(/^\$([A-Z])/,"$1")}function lK(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Yn(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Dt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function xc(t){var e=t.indexOf(":");return e==-1?{s:Yn(t),e:Yn(t)}:{s:Yn(t.slice(0,e)),e:Yn(t.slice(e+1))}}function Kt(t,e){return typeof e>"u"||typeof e=="number"?Kt(t.s,t.e):(typeof t!="string"&&(t=Dt(t)),typeof e!="string"&&(e=Dt(e)),t==e?t:t+":"+e)}function Or(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function xb(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Fs(t.z,r?es(e):e)}catch{}try{return t.w=Fs((t.XF||{}).numFmtId||(r?14:0),r?es(e):e)}catch{return""+e}}function ai(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?el[t.v]||t.v:e==null?xb(t,t.v):xb(t,e))}function no(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function R4(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Yn(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Or(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=u.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[d].length;++f)if(!(typeof e[d][f]>"u")){var h={v:e[d][f]},v=a+d,m=o+f;if(c.s.r>v&&(c.s.r=v),c.s.c>m&&(c.s.c=m),c.e.r<v&&(c.e.r=v),c.e.c<m&&(c.e.c=m),e[d][f]&&typeof e[d][f]=="object"&&!Array.isArray(e[d][f])&&!(e[d][f]instanceof Date))h=e[d][f];else if(Array.isArray(h.v)&&(h.f=e[d][f][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||Ot[14],n.cellDates?(h.t="d",h.w=Fs(h.z,es(h.v))):(h.t="n",h.v=es(h.v),h.w=Fs(h.z,h.v))):h.t="s";if(s)i[v]||(i[v]=[]),i[v][m]&&i[v][m].z&&(h.z=i[v][m].z),i[v][m]=h;else{var g=Dt({c:m,r:v});i[g]&&i[g].z&&(h.z=i[g].z),i[g]=h}}}return c.s.c<1e7&&(i["!ref"]=Kt(c)),i}function yc(t,e){return R4(null,t,e)}function cK(t){return t.read_shift(4,"i")}function Bn(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function uK(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function dx(t,e){var r=t.l,n=t.read_shift(1),s=Bn(t),i=[],a={t:s,h:s};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(uK(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}var dK=dx;function Ls(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Jo(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var fK=Bn;function fx(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var hK=Bn,Jv=fx;function hx(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?$0([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):xo(e,0)>>2;return r?s/100:s}function F4(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var Zo=F4;function Fn(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function pK(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=ko[s];c&&(e.rgb=ad(c));break;case 2:e.rgb=ad([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function mK(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function P4(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function vK(t){return P4(t,1)}function gK(t){return P4(t,2)}var px=2,as=3,Ef=11,yb=12,H0=19,bf=64,xK=65,yK=71,EK=4108,bK=4126,rn=80,O4=81,_K=[rn,O4],SK={1:{n:"CodePage",t:px},2:{n:"Category",t:rn},3:{n:"PresentationFormat",t:rn},4:{n:"ByteCount",t:as},5:{n:"LineCount",t:as},6:{n:"ParagraphCount",t:as},7:{n:"SlideCount",t:as},8:{n:"NoteCount",t:as},9:{n:"HiddenCount",t:as},10:{n:"MultimediaClipCount",t:as},11:{n:"ScaleCrop",t:Ef},12:{n:"HeadingPairs",t:EK},13:{n:"TitlesOfParts",t:bK},14:{n:"Manager",t:rn},15:{n:"Company",t:rn},16:{n:"LinksUpToDate",t:Ef},17:{n:"CharacterCount",t:as},19:{n:"SharedDoc",t:Ef},22:{n:"HyperlinksChanged",t:Ef},23:{n:"AppVersion",t:as,p:"version"},24:{n:"DigSig",t:xK},26:{n:"ContentType",t:rn},27:{n:"ContentStatus",t:rn},28:{n:"Language",t:rn},29:{n:"Version",t:rn},255:{},2147483648:{n:"Locale",t:H0},2147483651:{n:"Behavior",t:H0},1919054434:{}},TK={1:{n:"CodePage",t:px},2:{n:"Title",t:rn},3:{n:"Subject",t:rn},4:{n:"Author",t:rn},5:{n:"Keywords",t:rn},6:{n:"Comments",t:rn},7:{n:"Template",t:rn},8:{n:"LastAuthor",t:rn},9:{n:"RevNumber",t:rn},10:{n:"EditTime",t:bf},11:{n:"LastPrinted",t:bf},12:{n:"CreatedDate",t:bf},13:{n:"ModifiedDate",t:bf},14:{n:"PageCount",t:as},15:{n:"WordCount",t:as},16:{n:"CharCount",t:as},17:{n:"Thumbnail",t:yK},18:{n:"Application",t:rn},19:{n:"DocSecurity",t:as},255:{},2147483648:{n:"Locale",t:H0},2147483651:{n:"Behavior",t:H0},1919054434:{}},Eb={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},AK=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function wK(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var CK=wK([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ko=mn(CK),el={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},N4={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},bb={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function IK(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function kK(t){var e=IK();if(!t||!t.match)return e;var r={};if((t.match(Vn)||[]).forEach(function(n){var s=bt(n);switch(s[0].replace(Bz,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[bb[s.ContentType]]!==void 0&&e[bb[s.ContentType]].push(s.PartName);break}}),e.xmlns!==qz.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}var Cl={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Zv(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function _u(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Vn)||[]).forEach(function(s){var i=bt(s);if(i[0]==="<Relationship"){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:Qc(i.Target,e);r[o]=a,n[i.Id]=a}}),r["!id"]=n,r}var DK="application/vnd.oasis.opendocument.spreadsheet";function RK(t,e){for(var r=ox(t),n,s;n=nd.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=bt(n[0],!1),s.path=="/"&&s.type!==DK)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var Su=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],FK=function(){for(var t=new Array(Su.length),e=0;e<Su.length;++e){var r=Su[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function L4(t){var e={};t=fr(t);for(var r=0;r<Su.length;++r){var n=Su[r],s=t.match(FK[r]);s!=null&&s.length>0&&(e[n[1]]=qt(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=sn(e[n[1]]))}return e}var PK=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function B4(t,e,r,n){var s=[];if(typeof t=="string")s=db(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(u){return{v:u}}));var a=typeof e=="string"?db(e,n).map(function(u){return u.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function OK(t,e,r){var n={};return e||(e={}),t=fr(t),PK.forEach(function(s){var i=(t.match(rd(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=qt(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var a=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));a&&a.length>0&&(n[s[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&B4(n.HeadingPairs,n.TitlesOfParts,e,r),e}var NK=/<[^>]+>[^<]*/g;function LK(t,e){var r={},n="",s=t.match(NK);if(s)for(var i=0;i!=s.length;++i){var a=s[i],o=bt(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=qt(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=qt(u);break;case"bool":r[n]=Er(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=sn(u);break;case"cy":case"error":r[n]=qt(u);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}var BK={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},zp;function MK(t,e,r){zp||(zp=sx(BK)),e=zp[e]||e,t[e]=r}function mx(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function M4(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function U4(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function V4(t,e,r){return e===31?U4(t):M4(t,e,r)}function eg(t,e,r){return V4(t,e,r===!1?0:4)}function UK(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return V4(t,e,0)}function VK(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Zn,""),t.l-s&2&&(t.l+=2)}return r}function $K(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Zn,"");return r}function HK(t){var e=t.l,r=j0(t,O4);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=j0(t,as);return[r,n]}function jK(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(HK(t));return r}function _b(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),a=t.read_shift(4);n[i]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(Zn,"").replace(Yc,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function $4(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function GK(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function j0(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==yb&&n!==e&&_K.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===yb?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return M4(t,n,4).replace(Zn,"");case 31:return U4(t);case 64:return mx(t);case 65:return $4(t);case 71:return GK(t);case 80:return eg(t,n,!i.raw).replace(Zn,"");case 81:return UK(t,n).replace(Zn,"");case 4108:return jK(t);case 4126:case 4127:return n==4127?VK(t):$K(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function Sb(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0,o=0,l=-1,c={};for(a=0;a!=s;++a){var u=t.read_shift(4),d=t.read_shift(4);i[a]=[u,d+r]}i.sort(function(_,T){return _[1]-T[1]});var f={};for(a=0;a!=s;++a){if(t.l!==i[a][1]){var h=!0;if(a>0&&e)switch(e[i[a-1][0]].t){case 2:t.l+2===i[a][1]&&(t.l+=2,h=!1);break;case 80:t.l<=i[a][1]&&(t.l=i[a][1],h=!1);break;case 4108:t.l<=i[a][1]&&(t.l=i[a][1],h=!1);break}if((!e||a==0)&&t.l<=i[a][1]&&(h=!1,t.l=i[a][1]),h)throw new Error("Read Error: Expected address "+i[a][1]+" at "+t.l+" :"+a)}if(e){var v=e[i[a][0]];if(f[v.n]=j0(t,v.t,{raw:!0}),v.p==="version"&&(f[v.n]=String(f[v.n]>>16)+"."+("0000"+String(f[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(f[v.n]){case 0:f[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:qs(o=f[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[v.n])}}else if(i[a][0]===1){if(o=f.CodePage=j0(t,px),qs(o),l!==-1){var m=t.l;t.l=i[l][1],c=_b(t,o),t.l=m}}else if(i[a][0]===0){if(o===0){l=a,t.l=i[a+1][1];continue}c=_b(t,o)}else{var g=c[i[a][0]],b;switch(t[t.l]){case 65:t.l+=4,b=$4(t);break;case 30:t.l+=4,b=eg(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,b=eg(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,b=t.read_shift(4,"i");break;case 19:t.l+=4,b=t.read_shift(4);break;case 5:t.l+=4,b=t.read_shift(8,"f");break;case 11:t.l+=4,b=Lr(t,4);break;case 64:t.l+=4,b=sn(mx(t));break;default:throw new Error("unparsed value: "+t[t.l])}f[g]=b}}return t.l=r+n,f}function Tb(t,e,r){var n=t.content;if(!n)return{};un(n,0);var s,i,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==zt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(a=n.read_shift(16),l=n.read_shift(4));var d=Sb(n,e),f={SystemIdentifier:c};for(var h in d)f[h]=d[h];if(f.FMTID=i,s===1)return f;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var v;try{v=Sb(n,null)}catch{}for(h in v)f[h]=v[h];return f.FMTID=[i,a],f}function xi(t,e){return t.read_shift(e),null}function WK(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function Lr(t,e){return t.read_shift(e)===1}function jr(t){return t.read_shift(2,"u")}function H4(t,e){return WK(t,e,jr)}function zK(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function Nd(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function KK(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),a=0,o,l={};s&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",u=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*a),n&&(t.l+=o),l.t=u,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function $o(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Ld(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):$o(t,n,r)}function tl(t,e,r){if(r.biff>5)return Ld(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function qK(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function XK(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Zn,"");return n&&(t.l+=24),s}function YK(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(i>>1,"utf16le").replace(Zn,"");return r+a}function QK(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return XK(t);case"0303000000000000c000000000000046":return YK(t);default:throw new Error("Unsupported Moniker "+r)}}function _f(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Zn,""):"";return r}function JK(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,a,o,l,c="",u,d;s&16&&(i=_f(t,r-t.l)),s&128&&(a=_f(t,r-t.l)),(s&257)===257&&(o=_f(t,r-t.l)),(s&257)===1&&(l=QK(t,r-t.l)),s&8&&(c=_f(t,r-t.l)),s&32&&(u=t.read_shift(16)),s&64&&(d=mx(t)),t.l=r;var f=a||o||l||"";f&&c&&(f+="#"+c),f||(f="#"+c),s&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var h={Target:f};return u&&(h.guid=u),d&&(h.time=d),i&&(h.Tooltip=i),h}function j4(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function G4(t,e){var r=j4(t);return r[3]=0,r}function Da(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function ZK(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function eq(t,e,r){return e===0?"":tl(t,e,r)}function tq(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function W4(t){var e=t.read_shift(2),r=hx(t);return[e,r]}function rq(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=Nd(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function Jh(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function z4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var nq=z4;function K4(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function sq(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function aq(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function _n(t){t.l+=2,t.l+=t.read_shift(2)}var iq={0:_n,4:_n,5:_n,6:_n,7:aq,8:_n,9:_n,10:_n,11:_n,12:_n,13:sq,14:_n,15:_n,16:_n,17:_n,18:_n,19:_n,20:_n,21:K4};function oq(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(iq[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Sf(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function lq(t,e){return e===0||t.read_shift(2),1200}function cq(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=tl(t,0,r);return t.read_shift(e+n-t.l),s}function uq(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function dq(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var a=Nd(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:s,dt:i,name:a}}function fq(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0;a!=s&&t.l<r;++a)i.push(KK(t));return i.Count=n,i.Unique=s,i}function hq(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function pq(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function mq(t){var e=ZK(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function vq(t){return t.read_shift(2),t.read_shift(4)}function Ab(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function gq(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function xq(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function yq(){}function Eq(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Nd(t,0,r),n}function bq(t){var e=Da(t);return e.isst=t.read_shift(4),e}function _q(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=Da(t);r.biff==2&&t.l++;var i=Ld(t,n-t.l,r);return s.val=i,s}function Sq(t,e,r){var n=t.read_shift(2),s=tl(t,0,r);return[n,s]}var Tq=tl;function wb(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),a=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:i,c:o},e:{r:a,c:l}}}function Aq(t){var e=t.read_shift(2),r=t.read_shift(2),n=W4(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function wq(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(W4(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:a,rkrec:i}}function Cq(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:a,ixfe:i}}function Iq(t,e,r,n){var s={},i=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=AK[o>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=a&15,s.dgRight=a>>4&15,s.dgTop=a>>8&15,s.dgBottom=a>>12&15,s.icvLeft=a>>16&127,s.icvRight=a>>23&127,s.grbitDiag=a>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function kq(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=Iq(t,e,n.fStyle,r),n}function Dq(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Cb(t,e,r){var n=Da(t);(r.biff==2||e==9)&&++t.l;var s=zK(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Rq(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Da(t),s=Fn(t);return n.val=s,n}var Ib=eq;function Fq(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var a=$o(t,i),o=[];n>t.l;)o.push(Ld(t));return[i,s,a,o]}function kb(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=rq(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var Pq=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Db(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=$o(t,a,r);s&32&&(c=Pq[c.charCodeAt(0)]);var u=n-t.l;r&&r.biff==2&&--u;var d=n==t.l||o===0||!(u>0)?[]:pJ(t,u,r,o);return{chKey:i,Name:c,itab:l,rgce:d}}function q4(t,e,r){if(r.biff<8)return Oq(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(tq(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function Oq(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Nd(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function Nq(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=$o(t,n,r),a=$o(t,s,r);return[i,a]}function Lq(t,e,r){var n=z4(t);t.l++;var s=t.read_shift(1);return e-=8,[mJ(t,e,r),s,n]}function Rb(t,e,r){var n=nq(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,fJ(t,e,r)]}function Bq(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function Mq(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=tl(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,a,i]}}function Uq(t,e,r){return Mq(t,e,r)}function Vq(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(Jh(t));return r}function $q(t,e,r){if(r&&r.biff<8)return jq(t,e,r);var n=K4(t),s=oq(t,e-22,n[1]);return{cmo:n,ft:s}}var Hq={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function jq(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((Hq[n]||Un)(t,e,r)),{cmo:[s,n,i],ft:a}}function Gq(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:a=qK(t,6,r);var o=t.read_shift(2);t.read_shift(2),jr(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var u=t[t.l],d=$o(t,t.lens[c+1]-t.lens[c]-1);if(s+=d,s.length>=(u?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function Wq(t,e){var r=Jh(t);t.l+=16;var n=JK(t,e-24);return[r,n]}function zq(t,e){t.read_shift(2);var r=Jh(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Zn,""),[r,n]}function Kq(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=Eb[r]||r,r=t.read_shift(2),e[1]=Eb[r]||r,e}function qq(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(G4(t));return r}function Xq(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(G4(t));return r}function Yq(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function X4(t,e,r){if(!r.cellStyles)return Un(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function Qq(t,e){var r={};return e<32||(t.l+=16,r.header=Fn(t),r.footer=Fn(t),t.l+=2),r}function Jq(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}var Zq=Da,eX=H4,tX=Ld;function rX(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function nX(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Da(t);++t.l;var s=tl(t,e-7,r);return n.t="str",n.val=s,n}function sX(t){var e=Da(t);++t.l;var r=Fn(t);return e.t="n",e.val=r,e}function aX(t){var e=Da(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function iX(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function oX(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function lX(t,e,r){var n=t.l+e,s=Da(t),i=t.read_shift(2),a=$o(t,i,r);return t.l=n,s.t="str",s.val=a,s}var cX=[2,3,48,49,131,139,140,245],Fb=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=sx({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],u=Ji(1);switch(l.type){case"base64":u=zs(_s(o));break;case"binary":u=zs(o);break;case"buffer":case"array":u=o;break}un(u,0);var d=u.read_shift(1),f=!!(d&136),h=!1,v=!1;switch(d){case 2:break;case 3:break;case 48:h=!0,f=!0;break;case 49:h=!0,f=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var m=0,g=521;d==2&&(m=u.read_shift(2)),u.l+=3,d!=2&&(m=u.read_shift(4)),m>1048576&&(m=1e6),d!=2&&(g=u.read_shift(2));var b=u.read_shift(2),_=l.codepage||1252;d!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(_=t[u[u.l]]),u.l+=1,u.l+=2),v&&(u.l+=36);for(var T=[],C={},R=Math.min(u.length,d==2?521:g-10-(h?264:0)),D=v?32:11;u.l<R&&u[u.l]!=13;)switch(C={},C.name=ed.utils.decode(_,u.slice(u.l,u.l+D)).replace(/[\u0000\r\n].*$/g,""),u.l+=D,C.type=String.fromCharCode(u.read_shift(1)),d!=2&&!v&&(C.offset=u.read_shift(4)),C.len=u.read_shift(1),d==2&&(C.offset=u.read_shift(2)),C.dec=u.read_shift(1),C.name.length&&T.push(C),d!=2&&(u.l+=v?13:14),C.type){case"B":(!h||C.len!=8)&&l.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+C.type)}if(u[u.l]!==13&&(u.l=g-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=g;var w=0,E=0;for(c[0]=[],E=0;E!=T.length;++E)c[0][E]=T[E].name;for(;m-- >0;){if(u[u.l]===42){u.l+=b;continue}for(++u.l,c[++w]=[],E=0,E=0;E!=T.length;++E){var y=u.slice(u.l,u.l+T[E].len);u.l+=T[E].len,un(y,0);var x=ed.utils.decode(_,y);switch(T[E].type){case"C":x.trim().length&&(c[w][E]=x.replace(/\s+$/,""));break;case"D":x.length===8?c[w][E]=new Date(+x.slice(0,4),+x.slice(4,6)-1,+x.slice(6,8)):c[w][E]=x;break;case"F":c[w][E]=parseFloat(x.trim());break;case"+":case"I":c[w][E]=v?y.read_shift(-4,"i")^2147483648:y.read_shift(4,"i");break;case"L":switch(x.trim().toUpperCase()){case"Y":case"T":c[w][E]=!0;break;case"N":case"F":c[w][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+x+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[w][E]="##MEMO##"+(v?parseInt(x.trim(),10):y.read_shift(4));break;case"N":x=x.replace(/\u0000/g,"").trim(),x&&x!="."&&(c[w][E]=+x||0);break;case"@":c[w][E]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":c[w][E]=new Date((y.read_shift(4)-2440588)*864e5+y.read_shift(4));break;case"Y":c[w][E]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[w][E]=-y.read_shift(-8,"f");break;case"B":if(h&&T[E].len==8){c[w][E]=y.read_shift(8,"f");break}case"G":case"P":y.l+=T[E].len;break;case"0":if(T[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+T[E].type)}}}if(d!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=T,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=yc(r(o,c),c);return u["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,u}function s(o,l){try{return no(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&qs(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Qv(),d=ig(o,{header:1,raw:!0,cellDates:!0}),f=d[0],h=d.slice(1),v=o["!cols"]||[],m=0,g=0,b=0,_=1;for(m=0;m<f.length;++m){if(((v[m]||{}).DBF||{}).name){f[m]=v[m].DBF.name,++b;continue}if(f[m]!=null){if(++b,typeof f[m]=="number"&&(f[m]=f[m].toString(10)),typeof f[m]!="string")throw new Error("DBF Invalid column name "+f[m]+" |"+typeof f[m]+"|");if(f.indexOf(f[m])!==m){for(g=0;g<1024;++g)if(f.indexOf(f[m]+"_"+g)==-1){f[m]+="_"+g;break}}}}var T=Or(o["!ref"]),C=[],R=[],D=[];for(m=0;m<=T.e.c-T.s.c;++m){var w="",E="",y=0,x=[];for(g=0;g<h.length;++g)h[g][m]!=null&&x.push(h[g][m]);if(x.length==0||f[m]==null){C[m]="?";continue}for(g=0;g<x.length;++g){switch(typeof x[g]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=x[g]instanceof Date?"D":"C";break;default:E="C"}y=Math.max(y,String(x[g]).length),w=w&&w!=E?"C":E}y>250&&(y=250),E=((v[m]||{}).DBF||{}).type,E=="C"&&v[m].DBF.len>y&&(y=v[m].DBF.len),w=="B"&&E=="N"&&(w="N",D[m]=v[m].DBF.dec,y=v[m].DBF.len),R[m]=w=="C"||E=="N"?y:i[w]||0,_+=R[m],C[m]=w}var I=u.next(32);for(I.write_shift(4,318902576),I.write_shift(4,h.length),I.write_shift(2,296+32*b),I.write_shift(2,_),m=0;m<4;++m)I.write_shift(4,0);for(I.write_shift(4,0|(+e[qC]||3)<<8),m=0,g=0;m<f.length;++m)if(f[m]!=null){var A=u.next(32),k=(f[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);A.write_shift(1,k,"sbcs"),A.write_shift(1,C[m]=="?"?"C":C[m],"sbcs"),A.write_shift(4,g),A.write_shift(1,R[m]||i[C[m]]||0),A.write_shift(1,D[m]||0),A.write_shift(1,2),A.write_shift(4,0),A.write_shift(1,0),A.write_shift(4,0),A.write_shift(4,0),g+=R[m]||i[C[m]]||0}var U=u.next(264);for(U.write_shift(4,13),m=0;m<65;++m)U.write_shift(4,0);for(m=0;m<h.length;++m){var W=u.next(_);for(W.write_shift(1,0),g=0;g<f.length;++g)if(f[g]!=null)switch(C[g]){case"L":W.write_shift(1,h[m][g]==null?63:h[m][g]?84:70);break;case"B":W.write_shift(8,h[m][g]||0,"f");break;case"N":var P="0";for(typeof h[m][g]=="number"&&(P=h[m][g].toFixed(D[g]||0)),b=0;b<R[g]-P.length;++b)W.write_shift(1,32);W.write_shift(1,P,"sbcs");break;case"D":h[m][g]?(W.write_shift(4,("0000"+h[m][g].getFullYear()).slice(-4),"sbcs"),W.write_shift(2,("00"+(h[m][g].getMonth()+1)).slice(-2),"sbcs"),W.write_shift(2,("00"+h[m][g].getDate()).slice(-2),"sbcs")):W.write_shift(8,"00000000","sbcs");break;case"C":var B=String(h[m][g]!=null?h[m][g]:"").slice(0,R[g]);for(W.write_shift(1,B,"sbcs"),b=0;b<R[g]-B.length;++b)W.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}}(),uX=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Sa(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,h){var v=t[h];return typeof v=="number"?q2(v):v},n=function(f,h,v){var m=h.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return m==59?f:q2(m)};t["|"]=254;function s(f,h){switch(h.type){case"base64":return i(_s(f),h);case"binary":return i(f,h);case"buffer":return i(jt&&Buffer.isBuffer(f)?f.toString("binary"):Qo(f),h);case"array":return i(Vo(f),h)}throw new Error("Unrecognized type "+h.type)}function i(f,h){var v=f.split(/[\n\r]+/),m=-1,g=-1,b=0,_=0,T=[],C=[],R=null,D={},w=[],E=[],y=[],x=0,I;for(+h.codepage>=0&&qs(+h.codepage);b!==v.length;++b){x=0;var A=v[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),k=A.replace(/;;/g,"\0").split(";").map(function(q){return q.replace(/\u0000/g,";")}),U=k[0],W;if(A.length>0)switch(U){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":k[1].charAt(0)=="P"&&C.push(A.slice(3).replace(/;;/g,";"));break;case"C":var P=!1,B=!1,H=!1,L=!1,Z=-1,j=-1;for(_=1;_<k.length;++_)switch(k[_].charAt(0)){case"A":break;case"X":g=parseInt(k[_].slice(1))-1,B=!0;break;case"Y":for(m=parseInt(k[_].slice(1))-1,B||(g=0),I=T.length;I<=m;++I)T[I]=[];break;case"K":W=k[_].slice(1),W.charAt(0)==='"'?W=W.slice(1,W.length-1):W==="TRUE"?W=!0:W==="FALSE"?W=!1:isNaN(Js(W))?isNaN(oc(W).getDate())||(W=sn(W)):(W=Js(W),R!==null&&gc(R)&&(W=Qh(W))),P=!0;break;case"E":L=!0;var O=Gl(k[_].slice(1),{r:m,c:g});T[m][g]=[T[m][g],O];break;case"S":H=!0,T[m][g]=[T[m][g],"S5S"];break;case"G":break;case"R":Z=parseInt(k[_].slice(1))-1;break;case"C":j=parseInt(k[_].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}if(P&&(T[m][g]&&T[m][g].length==2?T[m][g][0]=W:T[m][g]=W,R=null),H){if(L)throw new Error("SYLK shared formula cannot have own formula");var G=Z>-1&&T[Z][j];if(!G||!G[1])throw new Error("SYLK shared formula cannot find base");T[m][g][1]=aI(G[1],{r:m-Z,c:g-j})}break;case"F":var X=0;for(_=1;_<k.length;++_)switch(k[_].charAt(0)){case"X":g=parseInt(k[_].slice(1))-1,++X;break;case"Y":for(m=parseInt(k[_].slice(1))-1,I=T.length;I<=m;++I)T[I]=[];break;case"M":x=parseInt(k[_].slice(1))/20;break;case"F":break;case"G":break;case"P":R=C[parseInt(k[_].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(y=k[_].slice(1).split(" "),I=parseInt(y[0],10);I<=parseInt(y[1],10);++I)x=parseInt(y[2],10),E[I-1]=x===0?{hidden:!0}:{wch:x},lc(E[I-1]);break;case"C":g=parseInt(k[_].slice(1))-1,E[g]||(E[g]={});break;case"R":m=parseInt(k[_].slice(1))-1,w[m]||(w[m]={}),x>0?(w[m].hpt=x,w[m].hpx=id(x)):x===0&&(w[m].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}X<1&&(R=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}}return w.length>0&&(D["!rows"]=w),E.length>0&&(D["!cols"]=E),h&&h.sheetRows&&(T=T.slice(0,h.sheetRows)),[T,D]}function a(f,h){var v=s(f,h),m=v[0],g=v[1],b=yc(m,h);return Sa(g).forEach(function(_){b[_]=g[_]}),b}function o(f,h){return no(a(f,h),h)}function l(f,h,v,m){var g="C;Y"+(v+1)+";X"+(m+1)+";K";switch(f.t){case"n":g+=f.v||0,f.f&&!f.F&&(g+=";E"+YY(f.f,{r:v,c:m}));break;case"b":g+=f.v?"TRUE":"FALSE";break;case"e":g+=f.w||f.v;break;case"d":g+='"'+(f.w||f.v)+'"';break;case"s":g+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function c(f,h){h.forEach(function(v,m){var g="F;W"+(m+1)+" "+(m+1)+" ";v.hidden?g+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=W0(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=z0(v.wpx)),typeof v.wch=="number"&&(g+=Math.round(v.wch))),g.charAt(g.length-1)!=" "&&f.push(g)})}function u(f,h){h.forEach(function(v,m){var g="F;";v.hidden?g+="M0;":v.hpt?g+="M"+20*v.hpt+";":v.hpx&&(g+="M"+20*rI(v.hpx)+";"),g.length>2&&f.push(g+"R"+(m+1))})}function d(f,h){var v=["ID;PWXL;N;E"],m=[],g=Or(f["!ref"]),b,_=Array.isArray(f),T=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),f["!cols"]&&c(v,f["!cols"]),f["!rows"]&&u(v,f["!rows"]),v.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var C=g.s.r;C<=g.e.r;++C)for(var R=g.s.c;R<=g.e.c;++R){var D=Dt({r:C,c:R});b=_?(f[C]||[])[R]:f[D],!(!b||b.v==null&&(!b.f||b.F))&&m.push(l(b,f,C,R))}return v.join(T)+T+m.join(T)+T+"E"+T}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),dX=function(){function t(i,a){switch(a.type){case"base64":return e(_s(i),a);case"binary":return e(i,a);case"buffer":return e(jt&&Buffer.isBuffer(i)?i.toString("binary"):Qo(i),a);case"array":return e(Vo(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,u=0,d=[];u!==o.length;++u){if(o[u].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var f=o[u].trim().split(","),h=f[0],v=f[1];++u;for(var m=o[u]||"";(m.match(/["]/g)||[]).length&1&&u<o.length-1;)m+=`
`+o[++u];switch(m=m.trim(),+h){case-1:if(m==="BOT"){d[++l]=[],c=0;continue}else if(m!=="EOD")throw new Error("Unrecognized DIF special command "+m);break;case 0:m==="TRUE"?d[l][c]=!0:m==="FALSE"?d[l][c]=!1:isNaN(Js(v))?isNaN(oc(v).getDate())?d[l][c]=v:d[l][c]=sn(v):d[l][c]=Js(v),++c;break;case 1:m=m.slice(1,m.length-1),m=m.replace(/""/g,'"'),m&&m.match(/^=".*"$/)&&(m=m.slice(2,-1)),d[l][c++]=m!==""?m:null;break}if(m==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function r(i,a){return yc(t(i,a),a)}function n(i,a){return no(r(i,a),a)}var s=function(){var i=function(l,c,u,d,f){l.push(c),l.push(u+","+d),l.push('"'+f.replace(/"/g,'""')+'"')},a=function(l,c,u,d){l.push(c+","+u),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],u=Or(l["!ref"]),d,f=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,u.e.r-u.s.r+1,""),i(c,"TUPLES",0,u.e.c-u.s.c+1,""),i(c,"DATA",0,0,"");for(var h=u.s.r;h<=u.e.r;++h){a(c,-1,0,"BOT");for(var v=u.s.c;v<=u.e.c;++v){var m=Dt({r:h,c:v});if(d=f?(l[h]||[])[v]:l[m],!d){a(c,1,0,"");continue}switch(d.t){case"n":var g=d.w;!g&&d.v!=null&&(g=d.v),g==null?d.f&&!d.F?a(c,1,0,"="+d.f):a(c,1,0,""):a(c,0,g,"V");break;case"b":a(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Fs(d.z||Ot[14],es(sn(d.v)))),a(c,0,d.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var b=`\r
`,_=c.join(b);return _}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),fX=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,f){for(var h=d.split(`
`),v=-1,m=-1,g=0,b=[];g!==h.length;++g){var _=h[g].trim().split(":");if(_[0]==="cell"){var T=Yn(_[1]);if(b.length<=T.r)for(v=b.length;v<=T.r;++v)b[v]||(b[v]=[]);switch(v=T.r,m=T.c,_[2]){case"t":b[v][m]=t(_[3]);break;case"v":b[v][m]=+_[3];break;case"vtf":var C=_[_.length-1];case"vtc":switch(_[3]){case"nl":b[v][m]=!!+_[4];break;default:b[v][m]=+_[4];break}_[2]=="vtf"&&(b[v][m]=[b[v][m],C])}}}return f&&f.sheetRows&&(b=b.slice(0,f.sheetRows)),b}function n(d,f){return yc(r(d,f),f)}function s(d,f){return no(n(d,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var f=[],h=[],v,m="",g=xc(d["!ref"]),b=Array.isArray(d),_=g.s.r;_<=g.e.r;++_)for(var T=g.s.c;T<=g.e.c;++T)if(m=Dt({r:_,c:T}),v=b?(d[_]||[])[T]:d[m],!(!v||v.v==null||v.t==="z")){switch(h=["cell",m,"t"],v.t){case"s":case"str":h.push(e(v.v));break;case"n":v.f?(h[2]="vtf",h[3]="n",h[4]=v.v,h[5]=e(v.f)):(h[2]="v",h[3]=v.v);break;case"b":h[2]="vt"+(v.f?"f":"c"),h[3]="nl",h[4]=v.v?"1":"0",h[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var C=es(sn(v.v));h[2]="vtc",h[3]="nd",h[4]=""+C,h[5]=v.w||Fs(v.z||Ot[14],C);break;case"e":continue}f.push(h.join(":"))}return f.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(d){return[i,a,o,a,c(d),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),sd=function(){function t(u,d,f,h,v){v.raw?d[f][h]=u:u===""||(u==="TRUE"?d[f][h]=!0:u==="FALSE"?d[f][h]=!1:isNaN(Js(u))?isNaN(oc(u).getDate())?d[f][h]=u:d[f][h]=sn(u):d[f][h]=Js(u))}function e(u,d){var f=d||{},h=[];if(!u||u.length===0)return h;for(var v=u.split(/[\r\n]/),m=v.length-1;m>=0&&v[m].length===0;)--m;for(var g=10,b=0,_=0;_<=m;++_)b=v[_].indexOf(" "),b==-1?b=v[_].length:b++,g=Math.max(g,b);for(_=0;_<=m;++_){h[_]=[];var T=0;for(t(v[_].slice(0,g).trim(),h,_,T,f),T=1;T<=(v[_].length-g)/10+1;++T)t(v[_].slice(g+(T-1)*10,g+T*10).trim(),h,_,T,f)}return f.sheetRows&&(h=h.slice(0,f.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var d={},f=!1,h=0,v=0;h<u.length;++h)(v=u.charCodeAt(h))==34?f=!f:!f&&v in r&&(d[v]=(d[v]||0)+1);v=[];for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&v.push([d[h],h]);if(!v.length){d=n;for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&v.push([d[h],h])}return v.sort(function(m,g){return m[0]-g[0]||n[m[1]]-n[g[1]]}),r[v.pop()[1]]||44}function i(u,d){var f=d||{},h="",v=f.dense?[]:{},m={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(h=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(h=u.charAt(4),u=u.slice(6)):h=s(u.slice(0,1024)):f&&f.FS?h=f.FS:h=s(u.slice(0,1024));var g=0,b=0,_=0,T=0,C=0,R=h.charCodeAt(0),D=!1,w=0,E=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var y=f.dateNF!=null?Sz(f.dateNF):null;function x(){var I=u.slice(T,C),A={};if(I.charAt(0)=='"'&&I.charAt(I.length-1)=='"'&&(I=I.slice(1,-1).replace(/""/g,'"')),I.length===0)A.t="z";else if(f.raw)A.t="s",A.v=I;else if(I.trim().length===0)A.t="s",A.v=I;else if(I.charCodeAt(0)==61)I.charCodeAt(1)==34&&I.charCodeAt(I.length-1)==34?(A.t="s",A.v=I.slice(2,-1).replace(/""/g,'"')):JY(I)?(A.t="n",A.f=I.slice(1)):(A.t="s",A.v=I);else if(I=="TRUE")A.t="b",A.v=!0;else if(I=="FALSE")A.t="b",A.v=!1;else if(!isNaN(_=Js(I)))A.t="n",f.cellText!==!1&&(A.w=I),A.v=_;else if(!isNaN(oc(I).getDate())||y&&I.match(y)){A.z=f.dateNF||Ot[14];var k=0;y&&I.match(y)&&(I=Tz(I,f.dateNF,I.match(y)||[]),k=1),f.cellDates?(A.t="d",A.v=sn(I,k)):(A.t="n",A.v=es(sn(I,k))),f.cellText!==!1&&(A.w=Fs(A.z,A.v instanceof Date?es(A.v):A.v)),f.cellNF||delete A.z}else A.t="s",A.v=I;if(A.t=="z"||(f.dense?(v[g]||(v[g]=[]),v[g][b]=A):v[Dt({c:b,r:g})]=A),T=C+1,E=u.charCodeAt(T),m.e.c<b&&(m.e.c=b),m.e.r<g&&(m.e.r=g),w==R)++b;else if(b=0,++g,f.sheetRows&&f.sheetRows<=g)return!0}e:for(;C<u.length;++C)switch(w=u.charCodeAt(C)){case 34:E===34&&(D=!D);break;case R:case 10:case 13:if(!D&&x())break e;break}return C-T>0&&x(),v["!ref"]=Kt(m),v}function a(u,d){return!(d&&d.PRN)||d.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,d):yc(e(u,d),d)}function o(u,d){var f="",h=d.type=="string"?[0,0,0,0]:Sx(u,d);switch(d.type){case"base64":f=_s(u);break;case"binary":f=u;break;case"buffer":d.codepage==65001?f=u.toString("utf8"):d.codepage&&typeof ed<"u"||(f=jt&&Buffer.isBuffer(u)?u.toString("binary"):Qo(u));break;case"array":f=Vo(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+d.type)}return h[0]==239&&h[1]==187&&h[2]==191?f=fr(f.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?f=fr(f):d.type=="binary"&&typeof ed<"u",f.slice(0,19)=="socialcalc:version:"?fX.to_sheet(d.type=="string"?f:fr(f),d):a(f,d)}function l(u,d){return no(o(u,d),d)}function c(u){for(var d=[],f=Or(u["!ref"]),h,v=Array.isArray(u),m=f.s.r;m<=f.e.r;++m){for(var g=[],b=f.s.c;b<=f.e.c;++b){var _=Dt({r:m,c:b});if(h=v?(u[m]||[])[b]:u[_],!h||h.v==null){g.push("          ");continue}for(var T=(h.w||(ai(h),h.w)||"").slice(0,10);T.length<10;)T+=" ";g.push(T+(b===0?" ":""))}d.push(g.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function hX(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=uX.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return sd.to_workbook(t,e)}}var Tu=function(){function t(O,G,X){if(O){un(O,O.l||0);for(var q=X.Enum||Z;O.l<O.length;){var pe=O.read_shift(2),ie=q[pe]||q[65535],de=O.read_shift(2),z=O.l+de,J=ie.f&&ie.f(O,de,X);if(O.l=z,G(J,ie,pe))return}}}function e(O,G){switch(G.type){case"base64":return r(zs(_s(O)),G);case"binary":return r(zs(O),G);case"buffer":case"array":return r(O,G)}throw"Unsupported type "+G.type}function r(O,G){if(!O)return O;var X=G||{},q=X.dense?[]:{},pe="Sheet1",ie="",de=0,z={},J=[],me=[],Y={s:{r:0,c:0},e:{r:0,c:0}},K=X.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)X.Enum=Z,t(O,function(Q,re,be){switch(be){case 0:X.vers=Q,Q>=4096&&(X.qpro=!0);break;case 6:Y=Q;break;case 204:Q&&(ie=Q);break;case 222:ie=Q;break;case 15:case 51:X.qpro||(Q[1].v=Q[1].v.slice(1));case 13:case 14:case 16:be==14&&(Q[2]&112)==112&&(Q[2]&15)>1&&(Q[2]&15)<15&&(Q[1].z=X.dateNF||Ot[14],X.cellDates&&(Q[1].t="d",Q[1].v=Qh(Q[1].v))),X.qpro&&Q[3]>de&&(q["!ref"]=Kt(Y),z[pe]=q,J.push(pe),q=X.dense?[]:{},Y={s:{r:0,c:0},e:{r:0,c:0}},de=Q[3],pe=ie||"Sheet"+(de+1),ie="");var Te=X.dense?(q[Q[0].r]||[])[Q[0].c]:q[Dt(Q[0])];if(Te){Te.t=Q[1].t,Te.v=Q[1].v,Q[1].z!=null&&(Te.z=Q[1].z),Q[1].f!=null&&(Te.f=Q[1].f);break}X.dense?(q[Q[0].r]||(q[Q[0].r]=[]),q[Q[0].r][Q[0].c]=Q[1]):q[Dt(Q[0])]=Q[1];break}},X);else if(O[2]==26||O[2]==14)X.Enum=j,O[2]==14&&(X.qpro=!0,O.l=0),t(O,function(Q,re,be){switch(be){case 204:pe=Q;break;case 22:Q[1].v=Q[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Q[3]>de&&(q["!ref"]=Kt(Y),z[pe]=q,J.push(pe),q=X.dense?[]:{},Y={s:{r:0,c:0},e:{r:0,c:0}},de=Q[3],pe="Sheet"+(de+1)),K>0&&Q[0].r>=K)break;X.dense?(q[Q[0].r]||(q[Q[0].r]=[]),q[Q[0].r][Q[0].c]=Q[1]):q[Dt(Q[0])]=Q[1],Y.e.c<Q[0].c&&(Y.e.c=Q[0].c),Y.e.r<Q[0].r&&(Y.e.r=Q[0].r);break;case 27:Q[14e3]&&(me[Q[14e3][0]]=Q[14e3][1]);break;case 1537:me[Q[0]]=Q[1],Q[0]==de&&(pe=Q[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(q["!ref"]=Kt(Y),z[ie||pe]=q,J.push(ie||pe),!me.length)return{SheetNames:J,Sheets:z};for(var ee={},fe=[],ve=0;ve<me.length;++ve)z[J[ve]]?(fe.push(me[ve]||J[ve]),ee[me[ve]]=z[me[ve]]||z[J[ve]]):(fe.push(me[ve]),ee[me[ve]]={"!ref":"A1"});return{SheetNames:fe,Sheets:ee}}function n(O,G){var X=G||{};if(+X.codepage>=0&&qs(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var q=Qv(),pe=Or(O["!ref"]),ie=Array.isArray(O),de=[];Vs(q,0,i(1030)),Vs(q,6,l(pe));for(var z=Math.min(pe.e.r,8191),J=pe.s.r;J<=z;++J)for(var me=vn(J),Y=pe.s.c;Y<=pe.e.c;++Y){J===pe.s.r&&(de[Y]=Yr(Y));var K=de[Y]+me,ee=ie?(O[J]||[])[Y]:O[K];if(!(!ee||ee.t=="z"))if(ee.t=="n")(ee.v|0)==ee.v&&ee.v>=-32768&&ee.v<=32767?Vs(q,13,h(J,Y,ee.v)):Vs(q,14,m(J,Y,ee.v));else{var fe=ai(ee);Vs(q,15,d(J,Y,fe.slice(0,239)))}}return Vs(q,1),q.end()}function s(O,G){var X=G||{};if(+X.codepage>=0&&qs(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var q=Qv();Vs(q,0,a(O));for(var pe=0,ie=0;pe<O.SheetNames.length;++pe)(O.Sheets[O.SheetNames[pe]]||{})["!ref"]&&Vs(q,27,L(O.SheetNames[pe],ie++));var de=0;for(pe=0;pe<O.SheetNames.length;++pe){var z=O.Sheets[O.SheetNames[pe]];if(!(!z||!z["!ref"])){for(var J=Or(z["!ref"]),me=Array.isArray(z),Y=[],K=Math.min(J.e.r,8191),ee=J.s.r;ee<=K;++ee)for(var fe=vn(ee),ve=J.s.c;ve<=J.e.c;++ve){ee===J.s.r&&(Y[ve]=Yr(ve));var Q=Y[ve]+fe,re=me?(z[ee]||[])[ve]:z[Q];if(!(!re||re.t=="z"))if(re.t=="n")Vs(q,23,x(ee,ve,de,re.v));else{var be=ai(re);Vs(q,22,w(ee,ve,de,be.slice(0,239)))}}++de}}return Vs(q,1),q.end()}function i(O){var G=Kr(2);return G.write_shift(2,O),G}function a(O){var G=Kr(26);G.write_shift(2,4096),G.write_shift(2,4),G.write_shift(4,0);for(var X=0,q=0,pe=0,ie=0;ie<O.SheetNames.length;++ie){var de=O.SheetNames[ie],z=O.Sheets[de];if(!(!z||!z["!ref"])){++pe;var J=xc(z["!ref"]);X<J.e.r&&(X=J.e.r),q<J.e.c&&(q=J.e.c)}}return X>8191&&(X=8191),G.write_shift(2,X),G.write_shift(1,pe),G.write_shift(1,q),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(1,1),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(4,0),G}function o(O,G,X){var q={s:{c:0,r:0},e:{c:0,r:0}};return G==8&&X.qpro?(q.s.c=O.read_shift(1),O.l++,q.s.r=O.read_shift(2),q.e.c=O.read_shift(1),O.l++,q.e.r=O.read_shift(2),q):(q.s.c=O.read_shift(2),q.s.r=O.read_shift(2),G==12&&X.qpro&&(O.l+=2),q.e.c=O.read_shift(2),q.e.r=O.read_shift(2),G==12&&X.qpro&&(O.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function l(O){var G=Kr(8);return G.write_shift(2,O.s.c),G.write_shift(2,O.s.r),G.write_shift(2,O.e.c),G.write_shift(2,O.e.r),G}function c(O,G,X){var q=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(q[0].c=O.read_shift(1),q[3]=O.read_shift(1),q[0].r=O.read_shift(2),O.l+=2):(q[2]=O.read_shift(1),q[0].c=O.read_shift(2),q[0].r=O.read_shift(2)),q}function u(O,G,X){var q=O.l+G,pe=c(O,G,X);if(pe[1].t="s",X.vers==20768){O.l++;var ie=O.read_shift(1);return pe[1].v=O.read_shift(ie,"utf8"),pe}return X.qpro&&O.l++,pe[1].v=O.read_shift(q-O.l,"cstr"),pe}function d(O,G,X){var q=Kr(7+X.length);q.write_shift(1,255),q.write_shift(2,G),q.write_shift(2,O),q.write_shift(1,39);for(var pe=0;pe<q.length;++pe){var ie=X.charCodeAt(pe);q.write_shift(1,ie>=128?95:ie)}return q.write_shift(1,0),q}function f(O,G,X){var q=c(O,G,X);return q[1].v=O.read_shift(2,"i"),q}function h(O,G,X){var q=Kr(7);return q.write_shift(1,255),q.write_shift(2,G),q.write_shift(2,O),q.write_shift(2,X,"i"),q}function v(O,G,X){var q=c(O,G,X);return q[1].v=O.read_shift(8,"f"),q}function m(O,G,X){var q=Kr(13);return q.write_shift(1,255),q.write_shift(2,G),q.write_shift(2,O),q.write_shift(8,X,"f"),q}function g(O,G,X){var q=O.l+G,pe=c(O,G,X);if(pe[1].v=O.read_shift(8,"f"),X.qpro)O.l=q;else{var ie=O.read_shift(2);C(O.slice(O.l,O.l+ie),pe),O.l+=ie}return pe}function b(O,G,X){var q=G&32768;return G&=-32769,G=(q?O:0)+(G>=8192?G-16384:G),(q?"":"$")+(X?Yr(G):vn(G))}var _={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},T=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function C(O,G){un(O,0);for(var X=[],q=0,pe="",ie="",de="",z="";O.l<O.length;){var J=O[O.l++];switch(J){case 0:X.push(O.read_shift(8,"f"));break;case 1:ie=b(G[0].c,O.read_shift(2),!0),pe=b(G[0].r,O.read_shift(2),!1),X.push(ie+pe);break;case 2:{var me=b(G[0].c,O.read_shift(2),!0),Y=b(G[0].r,O.read_shift(2),!1);ie=b(G[0].c,O.read_shift(2),!0),pe=b(G[0].r,O.read_shift(2),!1),X.push(me+Y+":"+ie+pe)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(O.read_shift(2));break;case 6:{for(var K="";J=O[O.l++];)K+=String.fromCharCode(J);X.push('"'+K.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:z=X.pop(),de=X.pop(),X.push(["AND","OR"][J-20]+"("+de+","+z+")");break;default:if(J<32&&T[J])z=X.pop(),de=X.pop(),X.push(de+T[J]+z);else if(_[J]){if(q=_[J][1],q==69&&(q=O[O.l++]),q>X.length){console.error("WK1 bad formula parse 0x"+J.toString(16)+":|"+X.join("|")+"|");return}var ee=X.slice(-q);X.length-=q,X.push(_[J][0]+"("+ee.join(",")+")")}else return J<=7?console.error("WK1 invalid opcode "+J.toString(16)):J<=24?console.error("WK1 unsupported op "+J.toString(16)):J<=30?console.error("WK1 invalid opcode "+J.toString(16)):J<=115?console.error("WK1 unsupported function opcode "+J.toString(16)):console.error("WK1 unrecognized opcode "+J.toString(16))}}X.length==1?G[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function R(O){var G=[{c:0,r:0},{t:"n",v:0},0];return G[0].r=O.read_shift(2),G[3]=O[O.l++],G[0].c=O[O.l++],G}function D(O,G){var X=R(O);return X[1].t="s",X[1].v=O.read_shift(G-4,"cstr"),X}function w(O,G,X,q){var pe=Kr(6+q.length);pe.write_shift(2,O),pe.write_shift(1,X),pe.write_shift(1,G),pe.write_shift(1,39);for(var ie=0;ie<q.length;++ie){var de=q.charCodeAt(ie);pe.write_shift(1,de>=128?95:de)}return pe.write_shift(1,0),pe}function E(O,G){var X=R(O);X[1].v=O.read_shift(2);var q=X[1].v>>1;if(X[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return X[1].v=q,X}function y(O,G){var X=R(O),q=O.read_shift(4),pe=O.read_shift(4),ie=O.read_shift(2);if(ie==65535)return q===0&&pe===3221225472?(X[1].t="e",X[1].v=15):q===0&&pe===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var de=ie&32768;return ie=(ie&32767)-16446,X[1].v=(1-de*2)*(pe*Math.pow(2,ie+32)+q*Math.pow(2,ie)),X}function x(O,G,X,q){var pe=Kr(14);if(pe.write_shift(2,O),pe.write_shift(1,X),pe.write_shift(1,G),q==0)return pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(2,65535),pe;var ie=0,de=0,z=0,J=0;return q<0&&(ie=1,q=-q),de=Math.log2(q)|0,q/=Math.pow(2,de-31),J=q>>>0,J&2147483648||(q/=2,++de,J=q>>>0),q-=J,J|=2147483648,J>>>=0,q*=Math.pow(2,32),z=q>>>0,pe.write_shift(4,z),pe.write_shift(4,J),de+=16383+(ie?32768:0),pe.write_shift(2,de),pe}function I(O,G){var X=y(O);return O.l+=G-14,X}function A(O,G){var X=R(O),q=O.read_shift(4);return X[1].v=q>>6,X}function k(O,G){var X=R(O),q=O.read_shift(8,"f");return X[1].v=q,X}function U(O,G){var X=k(O);return O.l+=G-10,X}function W(O,G){return O[O.l+G-1]==0?O.read_shift(G,"cstr"):""}function P(O,G){var X=O[O.l++];X>G-1&&(X=G-1);for(var q="";q.length<X;)q+=String.fromCharCode(O[O.l++]);return q}function B(O,G,X){if(!(!X.qpro||G<21)){var q=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var pe=O.read_shift(G-21,"cstr");return[q,pe]}}function H(O,G){for(var X={},q=O.l+G;O.l<q;){var pe=O.read_shift(2);if(pe==14e3){for(X[pe]=[0,""],X[pe][0]=O.read_shift(2);O[O.l];)X[pe][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return X}function L(O,G){var X=Kr(5+O.length);X.write_shift(2,14e3),X.write_shift(2,G);for(var q=0;q<O.length;++q){var pe=O.charCodeAt(q);X[X.l++]=pe>127?95:pe}return X[X.l++]=0,X}var Z={0:{n:"BOF",f:jr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:W},222:{n:"SHEETNAMELP",f:P},65535:{n:""}},j={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:y},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:I},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:A},38:{n:"??"},39:{n:"NUMBER27",f:k},40:{n:"FORMULA28",f:U},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:W},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:B},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function pX(t){var e={},r=t.match(Vn),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=bt(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=Z1[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var mX=function(){var t=rd("t"),e=rd("rPr");function r(i){var a=i.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:qt(a[1])},l=i.match(e);return l&&(o.s=pX(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),vX=function(){var e=/(\r\n|\n)/g;function r(s,i,a){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),a.push("</b>")),s.i&&(i.push("<i>"),a.push("</i>")),s.strike&&(i.push("<s>"),a.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),gX=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,xX=/<(?:\w+:)?r>/,yX=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function vx(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=qt(fr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=fr(t),r&&(n.h=ix(n.t))):t.match(xX)&&(n.r=fr(t),n.t=qt(fr((t.replace(yX,"").match(gX)||[]).join("").replace(Vn,""))),r&&(n.h=vX(mX(n.r)))),n):{t:""}}var EX=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,bX=/<(?:\w+:)?(?:si|sstItem)>/g,_X=/<\/(?:\w+:)?(?:si|sstItem)>/;function SX(t,e){var r=[],n="";if(!t)return r;var s=t.match(EX);if(s){n=s[2].replace(bX,"").split(_X);for(var i=0;i!=n.length;++i){var a=vx(n[i].trim(),e);a!=null&&(r[r.length]=a)}s=bt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function TX(t){return[t.read_shift(4),t.read_shift(4)]}function AX(t,e){var r=[],n=!1;return li(t,function(i,a,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Y4(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function Ka(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function wX(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=Ka(t,4),e.U=Ka(t,4),e.W=Ka(t,4),e}function CX(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function IX(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(CX(t));return e}function kX(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function DX(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=Ka(t,4),e.U=Ka(t,4),e.W=Ka(t,4),e}function RX(t){var e=DX(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function Q4(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function J4(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function FX(t){var e=Ka(t);switch(e.Minor){case 2:return[e.Minor,PX(t)];case 3:return[e.Minor,OX()];case 4:return[e.Minor,NX(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function PX(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=Q4(t,r),s=J4(t,t.length-t.l);return{t:"Std",h:n,v:s}}function OX(){throw new Error("File is password-protected: ECMA-376 Extensible")}function NX(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Vn,function(i){var a=bt(i);switch(ka(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function LX(t,e){var r={},n=r.EncryptionVersionInfo=Ka(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=Q4(t,s),e-=s,r.EncryptionVerifier=J4(t,e),r}function BX(t){var e={},r=e.EncryptionVersionInfo=Ka(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function MX(t){var e=0,r,n=Y4(t),s=n.length+1,i,a,o,l,c;for(r=Ji(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var Z4=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},s=function(a,o){return n(a^o)},i=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],d=0;d!=7;++d)u&64&&(o^=r[l]),u*=2,--l;return o};return function(a){for(var o=Y4(a),l=i(o),c=o.length,u=Ji(16),d=0;d!=16;++d)u[d]=0;var f,h,v;for((c&1)===1&&(f=l>>8,u[c]=s(t[0],f),--c,f=l&255,h=o[o.length-1],u[c]=s(h,f));c>0;)--c,f=l>>8,u[c]=s(o[c],f),--c,f=l&255,u[c]=s(o[c],f);for(c=15,v=15-o.length;v>0;)f=l>>8,u[c]=s(t[v],f),--c,--v,f=l&255,u[c]=s(o[c],f),--c,--v;return u}}(),UX=function(t,e,r,n,s){s||(s=e),n||(n=Z4(t));var i,a;for(i=0;i!=e.length;++i)a=e[i],a^=n[r],a=(a>>5|a<<3)&255,s[i]=a,++r;return[s,r,n]},VX=function(t){var e=0,r=Z4(t);return function(n){var s=UX("",n,e,r);return e=s[1],s[0]}};function $X(t,e,r,n){var s={key:jr(t),verificationBytes:jr(t)};return r.password&&(s.verifier=MX(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=VX(r.password)),s}function HX(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=BX(t):n.Data=LX(t,e),n}function jX(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?HX(t,e-2,n):$X(t,r.biff>=8?e:e-2,r,n),n}var GX=function(){function t(s,i){switch(i.type){case"base64":return e(_s(s),i);case"binary":return e(s,i);case"buffer":return e(jt&&Buffer.isBuffer(s)?s.toString("binary"):Qo(s),i);case"array":return e(Vo(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,d){Array.isArray(o)&&(o[d]=[]);for(var f=/\\\w+\b/g,h=0,v,m=-1;v=f.exec(u);){switch(v[0]){case"\\cell":var g=u.slice(h,f.lastIndex-v[0].length);if(g[0]==" "&&(g=g.slice(1)),++m,g.length){var b={v:g,t:"s"};Array.isArray(o)?o[d][m]=b:o[Dt({r:d,c:m})]=b}break}h=f.lastIndex}m>c.e.c&&(c.e.c=m)}),o["!ref"]=Kt(c),o}function r(s,i){return no(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Or(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var u=a.s.c;u<=a.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=a.s.c;u<=a.e.c;++u){var d=Dt({r:c,c:u});o=l?(s[c]||[])[u]:s[d],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(ai(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function WX(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function ad(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function zX(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),a=s-i;if(a===0)return[0,0,e];var o=0,l=0,c=s+i;switch(l=a/(c>1?2-c:c),s){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function KX(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,a=[i,i,i],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,a[0]+=s,a[1]+=l;break;case 1:l=s*(2-o),a[0]+=l,a[1]+=s;break;case 2:l=s*(o-2),a[1]+=s,a[2]+=l;break;case 3:l=s*(4-o),a[1]+=l,a[2]+=s;break;case 4:l=s*(o-4),a[2]+=s,a[0]+=l;break;case 5:l=s*(6-o),a[2]+=l,a[0]+=s;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function G0(t,e){if(e===0)return t;var r=zX(WX(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),ad(KX(r))}var eI=6,qX=15,XX=1,qn=eI;function W0(t){return Math.floor((t+Math.round(128/qn)/256)*qn)}function z0(t){return Math.floor((t-5)/qn*100+.5)/100}function tg(t){return Math.round((t*qn+5)/qn*256)/256}function Kp(t){return tg(z0(W0(t)))}function gx(t){var e=Math.abs(t-Kp(t)),r=qn;if(e>.005)for(qn=XX;qn<qX;++qn)Math.abs(t-Kp(t))<=e&&(e=Math.abs(t-Kp(t)),r=qn);qn=r}function lc(t){t.width?(t.wpx=W0(t.width),t.wch=z0(t.wpx),t.MDW=qn):t.wpx?(t.wch=z0(t.wpx),t.width=tg(t.wch),t.MDW=qn):typeof t.wch=="number"&&(t.width=tg(t.wch),t.wpx=W0(t.width),t.MDW=qn),t.customWidth&&delete t.customWidth}var YX=96,tI=YX;function rI(t){return t*96/tI}function id(t){return t*tI/96}var QX={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function JX(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(Vn)||[]).forEach(function(a){var o=bt(a);switch(ka(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Er(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Er(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function ZX(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(Vn)||[]).forEach(function(a){var o=bt(a);switch(ka(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function eY(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(Vn)||[]).forEach(function(a){var o=bt(a);switch(ka(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=fr(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Er(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Er(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Er(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Er(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Er(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Er(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Er(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=Z1[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Er(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=ko[s.color.index];s.color.index==81&&(l=ko[1]),l||(l=ko[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=G0(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function tY(t,e,r){e.NumberFmt=[];for(var n=Sa(Ot),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Ot[n[s]];var i=t[0].match(Vn);if(i)for(s=0;s<i.length;++s){var a=bt(i[s]);switch(ka(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=qt(fr(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Io(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var Tf=["numFmtId","fillId","fontId","borderId","xfId"],Af=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function rY(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Vn)||[]).forEach(function(i){var a=bt(i),o=0;switch(ka(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<Tf.length;++o)n[Tf[o]]&&(n[Tf[o]]=parseInt(n[Tf[o]],10));for(o=0;o<Af.length;++o)n[Af[o]]&&(n[Af[o]]=Er(n[Af[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=Er(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var nY=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=o.match(e))&&tY(d,u,c),(d=o.match(s))&&eY(d,u,l,c),(d=o.match(n))&&ZX(d,u,l,c),(d=o.match(i))&&JX(d,u,l,c),(d=o.match(r))&&rY(d,u,c),u}}();function sY(t,e){var r=t.read_shift(2),n=Bn(t);return[r,n]}function aY(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=mK(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=pK(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Bn(t),n}var iY=Un;function oY(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}var lY=Un;function cY(t,e,r){var n={};n.NumberFmt=[];for(var s in Ot)n.NumberFmt[s]=Ot[s];n.CellXf=[],n.Fonts=[];var i=[],a=!1;return li(t,function(l,c,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],Io(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=G0(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:i.push(u),a=!0;break;case 38:i.pop(),a=!1;break;default:if(c.T>0)i.push(u);else if(c.T<0)i.pop();else if(!a||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}var uY=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function dY(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Vn)||[]).forEach(function(s){var i=bt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[uY.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function fY(){}function hY(){}var pY=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,mY=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,vY=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function gY(t,e,r){e.themeElements={};var n;[["clrScheme",pY,dY],["fontScheme",mY,fY],["fmtScheme",vY,hY]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var xY=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function nI(t,e){(!t||t.length===0)&&(t=yY());var r,n={};if(!(r=t.match(xY)))throw new Error("themeElements not found in theme");return gY(r[0],n,e),n.raw=t,n}function yY(t,e){var r=[p4];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function EY(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var a;try{a=h4(i,{type:"array"})}catch{return}var o=ms(a,"theme/theme/theme1.xml",!0);if(o)return nI(o,r)}}function bY(t){return t.read_shift(4)}function _Y(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=SY(t,4);break;case 2:e.xclrValue=j4(t);break;case 3:e.xclrValue=bY(t);break;case 4:t.l+=4;break}return t.l+=8,e}function SY(t,e){return Un(t,e)}function TY(t,e){return Un(t,e)}function AY(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=_Y(t);break;case 6:n[1]=TY(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function wY(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(AY(t,r-t.l));return{ixfe:n,ext:i}}function CY(t,e){e.forEach(function(r){switch(r[0]){}})}function IY(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Bn(t)}}function kY(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function DY(t){return t.l+=4,t.read_shift(4)!=0}function RY(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],a=!1,o=2;return li(t,function(l,c,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(d){o==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):o==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:i.push(u),a=!0;break;case 36:i.pop(),a=!1;break;default:if(!c.T){if(!a||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function FY(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,a;return t.replace(Vn,function(o){var l=bt(o);switch(ka(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function PY(t){var e=[];if(!t)return e;var r=1;return(t.match(Vn)||[]).forEach(function(n){var s=bt(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function OY(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Dt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function NY(t,e,r){var n=[];return li(t,function(i,a,o){switch(o){case 63:n.push(i);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function LY(t,e,r,n){if(!t)return t;var s=n||{},i=!1;li(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function BY(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function Pb(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(a){var o=Yn(a.ref);if(s?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[a.ref],!i){i={t:"z"},s?t[o.r][o.c]=i:t[a.ref]=i;var l=Or(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=Kt(l);c!==t["!ref"]&&(t["!ref"]=c)}i.c||(i.c=[]);var u={a:a.author,t:a.t,r:a.r,T:r};a.h&&(u.h=a.h);for(var d=i.c.length-1;d>=0;--d){if(!r&&i.c[d].T)return;r&&!i.c[d].T&&i.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(u.a==n[d].id){u.a=n[d].name||u.a;break}}i.c.push(u)})}function MY(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=bt(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=Yn(l.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var d=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!d&&!!d[1]&&vx(d[1])||{r:"",t:"",h:""};c.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),c.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=f.h),n.push(c)}}}}),n}function UY(t,e){var r=[],n=!1,s={},i=0;return t.replace(Vn,function(o,l){var c=bt(o);switch(ka(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=l+o.length;break;case"</text>":s.t=t.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function VY(t,e){var r=[],n=!1;return t.replace(Vn,function(i){var a=bt(i);switch(ka(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return i}),r}function $Y(t){var e={};e.iauthor=t.read_shift(4);var r=Zo(t);return e.rfx=r.s,e.ref=Dt(r.s),t.l+=16,e}var HY=Bn;function jY(t,e){var r=[],n=[],s={},i=!1;return li(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}var GY="application/vnd.ms-office.vbaProject";function WY(t){var e=zt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");zt.utils.cfb_add(e,s,t.FileIndex[n].content)}}),zt.write(e)}function zY(){return{"!type":"dialog"}}function KY(){return{"!type":"dialog"}}function qY(){return{"!type":"macro"}}function XY(){return{"!type":"macro"}}var Gl=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=e.c:--u,l?c+=e.r:--c,s+(o?"":"$")+Yr(u)+(l?"":"$")+vn(c)}return function(s,i){return e=i,s.replace(t,r)}}(),sI=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,YY=function(){return function(e,r){return e.replace(sI,function(n,s,i,a,o,l){var c=ux(a)-(i?0:r.c),u=cx(l)-(o?0:r.r),d=u==0?"":o?u+1:"["+u+"]",f=c==0?"":i?c+1:"["+c+"]";return s+"R"+d+"C"+f})}}();function aI(t,e){return t.replace(sI,function(r,n,s,i,a,o){return n+(s=="$"?s+i:Yr(ux(i)+e.c))+(a=="$"?a+o:vn(cx(o)+e.r))})}function QY(t,e,r){var n=xc(e),s=n.s,i=Yn(r),a={r:i.r-s.r,c:i.c-s.c};return aI(t,a)}function JY(t){return t.length!=1}function Ob(t){return t.replace(/_xlfn\./g,"")}function Ur(t){t.l+=1}function Zi(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function iI(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return oI(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=Zi(t),o=Zi(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function oI(t){var e=Zi(t),r=Zi(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function ZY(t,e,r){if(r.biff<8)return oI(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=Zi(t),a=Zi(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function lI(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return eQ(t);var n=t.read_shift(r&&r.biff==12?4:2),s=Zi(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function eQ(t){var e=Zi(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function tQ(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function rQ(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return nQ(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function nQ(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function sQ(t,e,r){var n=(t[t.l++]&96)>>5,s=iI(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function aQ(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=iI(t,i,r);return[n,s,a]}function iQ(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function oQ(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function lQ(t,e,r){var n=(t[t.l++]&96)>>5,s=ZY(t,e-1,r);return[n,s]}function cQ(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Nb(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function uQ(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function dQ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function fQ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function hQ(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function pQ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function cI(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function mQ(t){return t.read_shift(2),cI(t)}function vQ(t){return t.read_shift(2),cI(t)}function gQ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=lI(t,0,r);return[n,s]}function xQ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=rQ(t,0,r);return[n,s]}function yQ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=lI(t,0,r);return[n,s,i]}function EQ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[bJ[s],fI[s],n]}function bQ(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:_Q(t);return[s,(i[0]===0?fI:EJ)[i[1]]]}function _Q(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function SQ(t,e,r){t.l+=r&&r.biff==2?3:4}function TQ(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function AQ(t){return t.l++,el[t.read_shift(1)]}function wQ(t){return t.l++,t.read_shift(2)}function CQ(t){return t.l++,t.read_shift(1)!==0}function IQ(t){return t.l++,Fn(t)}function kQ(t,e,r){return t.l++,Nd(t,e-1,r)}function DQ(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Lr(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=el[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Fn(t);break;case 2:r[1]=tl(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function RQ(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?Zo:Jh)(t));return s}function FQ(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=DQ(t,r.biff);return a}function PQ(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function OQ(t,e,r){if(r.biff==5)return NQ(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function NQ(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function LQ(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function BQ(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function MQ(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function UQ(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var VQ=Un,$Q=Un,HQ=Un;function Bd(t,e,r){return t.l+=2,[tQ(t)]}function xx(t){return t.l+=6,[]}var jQ=Bd,GQ=xx,WQ=xx,zQ=Bd;function uI(t){return t.l+=2,[jr(t),t.read_shift(2)&1]}var KQ=Bd,qQ=uI,XQ=xx,YQ=Bd,QQ=Bd,JQ=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ZQ(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=JQ[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function eJ(t){return t.l+=2,[t.read_shift(4)]}function tJ(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function rJ(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function nJ(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function sJ(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function aJ(t){return t.l+=4,[0,0]}var Lb={1:{n:"PtgExp",f:TQ},2:{n:"PtgTbl",f:HQ},3:{n:"PtgAdd",f:Ur},4:{n:"PtgSub",f:Ur},5:{n:"PtgMul",f:Ur},6:{n:"PtgDiv",f:Ur},7:{n:"PtgPower",f:Ur},8:{n:"PtgConcat",f:Ur},9:{n:"PtgLt",f:Ur},10:{n:"PtgLe",f:Ur},11:{n:"PtgEq",f:Ur},12:{n:"PtgGe",f:Ur},13:{n:"PtgGt",f:Ur},14:{n:"PtgNe",f:Ur},15:{n:"PtgIsect",f:Ur},16:{n:"PtgUnion",f:Ur},17:{n:"PtgRange",f:Ur},18:{n:"PtgUplus",f:Ur},19:{n:"PtgUminus",f:Ur},20:{n:"PtgPercent",f:Ur},21:{n:"PtgParen",f:Ur},22:{n:"PtgMissArg",f:Ur},23:{n:"PtgStr",f:kQ},26:{n:"PtgSheet",f:tJ},27:{n:"PtgEndSheet",f:rJ},28:{n:"PtgErr",f:AQ},29:{n:"PtgBool",f:CQ},30:{n:"PtgInt",f:wQ},31:{n:"PtgNum",f:IQ},32:{n:"PtgArray",f:cQ},33:{n:"PtgFunc",f:EQ},34:{n:"PtgFuncVar",f:bQ},35:{n:"PtgName",f:PQ},36:{n:"PtgRef",f:gQ},37:{n:"PtgArea",f:sQ},38:{n:"PtgMemArea",f:LQ},39:{n:"PtgMemErr",f:VQ},40:{n:"PtgMemNoMem",f:$Q},41:{n:"PtgMemFunc",f:BQ},42:{n:"PtgRefErr",f:MQ},43:{n:"PtgAreaErr",f:iQ},44:{n:"PtgRefN",f:xQ},45:{n:"PtgAreaN",f:lQ},46:{n:"PtgMemAreaN",f:nJ},47:{n:"PtgMemNoMemN",f:sJ},57:{n:"PtgNameX",f:OQ},58:{n:"PtgRef3d",f:yQ},59:{n:"PtgArea3d",f:aQ},60:{n:"PtgRefErr3d",f:UQ},61:{n:"PtgAreaErr3d",f:oQ},255:{}},iJ={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},oJ={1:{n:"PtgElfLel",f:uI},2:{n:"PtgElfRw",f:YQ},3:{n:"PtgElfCol",f:jQ},6:{n:"PtgElfRwV",f:QQ},7:{n:"PtgElfColV",f:zQ},10:{n:"PtgElfRadical",f:KQ},11:{n:"PtgElfRadicalS",f:XQ},13:{n:"PtgElfColS",f:GQ},15:{n:"PtgElfColSV",f:WQ},16:{n:"PtgElfRadicalLel",f:qQ},25:{n:"PtgList",f:ZQ},29:{n:"PtgSxName",f:eJ},255:{}},lJ={0:{n:"PtgAttrNoop",f:aJ},1:{n:"PtgAttrSemi",f:pQ},2:{n:"PtgAttrIf",f:fQ},4:{n:"PtgAttrChoose",f:uQ},8:{n:"PtgAttrGoto",f:dQ},16:{n:"PtgAttrSum",f:SQ},32:{n:"PtgAttrBaxcel",f:Nb},33:{n:"PtgAttrBaxcel",f:Nb},64:{n:"PtgAttrSpace",f:mQ},65:{n:"PtgAttrSpaceSemi",f:vQ},128:{n:"PtgAttrIfError",f:hQ},255:{}};function Md(t,e,r,n){if(n.biff<8)return Un(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=FQ(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=RQ(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(Un(t,e)),i}function Ud(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=Lb[i]||Lb[iJ[i]],(i===24||i===25)&&(s=(i===24?oJ:lJ)[t[t.l+1]]),!s||!s.f?Un(t,e):a.push([s.n,s.f(t,e,r)]);return a}function cJ(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var uJ={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function dJ(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function dI(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Bb(t,e,r){var n=dI(t,e,r);return n=="#REF"?n:dJ(n,r)}function wn(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,u,d=0,f=0,h,v="";if(!t[0]||!t[0][0])return"";for(var m=-1,g="",b=0,_=t[0].length;b<_;++b){var T=t[0][b];switch(T[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),m>=0){switch(t[0][m][1][0]){case 0:g=Fr(" ",t[0][m][1][1]);break;case 1:g=Fr("\r",t[0][m][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][m][1][0])}c=c+g,m=-1}o.push(c+uJ[T[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Eu(T[1][1],a,s),o.push(bu(u,i));break;case"PtgRefN":u=r?Eu(T[1][1],r,s):T[1][1],o.push(bu(u,i));break;case"PtgRef3d":d=T[1][1],u=Eu(T[1][2],a,s),v=Bb(n,d,s),o.push(v+"!"+bu(u,i));break;case"PtgFunc":case"PtgFuncVar":var C=T[1][0],R=T[1][1];C||(C=0),C&=127;var D=C==0?[]:o.slice(-C);o.length-=C,R==="User"&&(R=D.shift()),o.push(R+"("+D.join(",")+")");break;case"PtgBool":o.push(T[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(T[1]);break;case"PtgNum":o.push(String(T[1]));break;case"PtgStr":o.push('"'+T[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(T[1]);break;case"PtgAreaN":h=gb(T[1][1],r?{s:r}:a,s),o.push(Wp(h,s));break;case"PtgArea":h=gb(T[1][1],a,s),o.push(Wp(h,s));break;case"PtgArea3d":d=T[1][1],h=T[1][2],v=Bb(n,d,s),o.push(v+"!"+Wp(h,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=T[1][2];var w=(n.names||[])[f-1]||(n[0]||[])[f],E=w?w.Name:"SH33TJSNAME"+String(f);E&&E.slice(0,6)=="_xlfn."&&!s.xlfn&&(E=E.slice(6)),o.push(E);break;case"PtgNameX":var y=T[1][1];f=T[1][2];var x;if(s.biff<=5)y<0&&(y=-y),n[y]&&(x=n[y][f]);else{var I="";if(((n[y]||[])[0]||[])[0]==14849||(((n[y]||[])[0]||[])[0]==1025?n[y][f]&&n[y][f].itab>0&&(I=n.SheetNames[n[y][f].itab-1]+"!"):I=n.SheetNames[f-1]+"!"),n[y]&&n[y][f])I+=n[y][f].Name;else if(n[0]&&n[0][f])I+=n[0][f].Name;else{var A=(dI(n,y,s)||"").split(";;");A[f-1]?I=A[f-1]:I+="SH33TJSERRX"}o.push(I);break}x||(x={Name:"SH33TJSERRY"}),o.push(x.Name);break;case"PtgParen":var k="(",U=")";if(m>=0){switch(g="",t[0][m][1][0]){case 2:k=Fr(" ",t[0][m][1][1])+k;break;case 3:k=Fr("\r",t[0][m][1][1])+k;break;case 4:U=Fr(" ",t[0][m][1][1])+U;break;case 5:U=Fr("\r",t[0][m][1][1])+U;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][m][1][0])}m=-1}o.push(k+o.pop()+U);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:T[1][1],r:T[1][0]};var W={c:r.c,r:r.r};if(n.sharedf[Dt(u)]){var P=n.sharedf[Dt(u)];o.push(wn(P,a,W,n,s))}else{var B=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(wn(c[1],a,W,n,s)),B=!0;break}B||o.push(T[1])}break;case"PtgArray":o.push("{"+cJ(T[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+T[1].idx+"[#"+T[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(T));default:throw new Error("Unrecognized Formula Token: "+String(T))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&m>=0&&H.indexOf(t[0][b][0])==-1){T=t[0][m];var L=!0;switch(T[1][0]){case 4:L=!1;case 0:g=Fr(" ",T[1][1]);break;case 5:L=!1;case 1:g=Fr("\r",T[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+T[1][0])}o.push((L?g:"")+o.pop()+(L?"":g)),m=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function fJ(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],Un(t,e-2)];var o=Ud(t,a,r);return e!==a+s&&(i=Md(t,e-a-s,o,r)),t.l=n,[o,i]}function hJ(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],Un(t,e-2)];var o=Ud(t,a,r);return e!==a+s&&(i=Md(t,e-a-s,o,r)),t.l=n,[o,i]}function pJ(t,e,r,n){var s=t.l+e,i=Ud(t,n,r),a;return s!==t.l&&(a=Md(t,s-t.l,i,r)),[i,a]}function mJ(t,e,r){var n=t.l+e,s,i=t.read_shift(2),a=Ud(t,i,r);return i==65535?[[],Un(t,e-2)]:(e!==i+2&&(s=Md(t,n-i-2,a,r)),[a,s])}function vJ(t){var e;if(Ga(t,t.l+6)!==65535)return[Fn(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function qp(t,e,r){var n=t.l+e,s=Da(t);r.biff==2&&++t.l;var i=vJ(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=hJ(t,n-t.l,r);return{cell:s,val:i[0],formula:o,shared:a>>3&1,tt:i[1]}}function Zh(t,e,r){var n=t.read_shift(4),s=Ud(t,n,r),i=t.read_shift(4),a=i>0?Md(t,i,s,r):null;return[s,a]}var gJ=Zh,ep=Zh,xJ=Zh,yJ=Zh,EJ={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},fI={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},bJ={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Mb(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Xp(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var Au={},Wl={};function wu(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function hI(t,e,r,n,s,i){try{n.cellNF&&(t.z=Ot[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=sn(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Ot[e]==null&&Io(_z[e]||"General",e),t.t==="e")t.w=t.w||el[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=td(t.v);else if(t.t==="d"){var a=es(t.v);(a|0)===a?t.w=a.toString(10):t.w=td(a)}else{if(t.v===void 0)return"";t.w=Uo(t.v,Wl)}else t.t==="d"?t.w=Fs(e,es(t.v),Wl):t.w=Fs(e,t.v,Wl)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=G0(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=G0(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function _J(t,e){var r=Or(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Kt(r))}var SJ=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,TJ=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,AJ=/<(?:\w:)?hyperlink [^>]*>/mg,wJ=/"(\w*:\w*)"/,CJ=/<(?:\w:)?col\b[^>]*[\/]?>/g,IJ=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,kJ=/<(?:\w:)?pageMargins[^>]*\/>/g,pI=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,DJ=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,RJ=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function FJ(t,e,r,n,s,i,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",d=t.match(TJ);d?(c=t.slice(0,d.index),u=t.slice(d.index+d[0].length)):c=u=t;var f=c.match(pI);f?yx(f[0],o,s,r):(f=c.match(DJ))&&PJ(f[0],f[1]||"",o,s,r);var h=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var v=c.slice(h,h+50).match(wJ);v&&_J(o,v[1])}var m=c.match(RJ);m&&m[1]&&UJ(m[1],s);var g=[];if(e.cellStyles){var b=c.match(CJ);b&&LJ(g,b)}d&&VJ(d[1],o,e,l,i,a);var _=u.match(IJ);_&&(o["!autofilter"]=BJ(_[0]));var T=[],C=u.match(SJ);if(C)for(h=0;h!=C.length;++h)T[h]=Or(C[h].slice(C[h].indexOf('"')+1));var R=u.match(AJ);R&&OJ(o,R,n);var D=u.match(kJ);if(D&&(o["!margins"]=NJ(bt(D[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Kt(l)),e.sheetRows>0&&o["!ref"]){var w=Or(o["!ref"]);e.sheetRows<=+w.e.r&&(w.e.r=e.sheetRows-1,w.e.r>l.e.r&&(w.e.r=l.e.r),w.e.r<w.s.r&&(w.s.r=w.e.r),w.e.c>l.e.c&&(w.e.c=l.e.c),w.e.c<w.s.c&&(w.s.c=w.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Kt(w))}return g.length>0&&(o["!cols"]=g),T.length>0&&(o["!merges"]=T),o}function yx(t,e,r,n){var s=bt(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=qt(fr(s.codeName)))}function PJ(t,e,r,n,s){yx(t.slice(0,t.indexOf(">")),r,n,s)}function OJ(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=bt(fr(e[s]),!0);if(!i.ref)return;var a=((r||{})["!id"]||[])[i.id];a?(i.Target=a.Target,i.location&&(i.Target+="#"+qt(i.location))):(i.Target="#"+qt(i.location),a={Target:i.Target,TargetMode:"Internal"}),i.Rel=a,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Or(i.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Dt({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function NJ(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function LJ(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=bt(e[n],!0);s.hidden&&(s.hidden=Er(s.hidden));var i=parseInt(s.min,10)-1,a=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,gx(s.width)),lc(s);i<=a;)t[i++]=mn(s)}}function BJ(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var MJ=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function UJ(t,e){e.Views||(e.Views=[{}]),(t.match(MJ)||[]).forEach(function(r,n){var s=bt(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),Er(s.rightToLeft)&&(e.Views[n].RTL=!0)})}var VJ=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=rd("v"),a=rd("f");return function(l,c,u,d,f,h){for(var v=0,m="",g=[],b=[],_=0,T=0,C=0,R="",D,w,E=0,y=0,x,I,A=0,k=0,U=Array.isArray(h.CellXf),W,P=[],B=[],H=Array.isArray(c),L=[],Z={},j=!1,O=!!u.sheetStubs,G=l.split(e),X=0,q=G.length;X!=q;++X){m=G[X].trim();var pe=m.length;if(pe!==0){var ie=0;e:for(v=0;v<pe;++v)switch(m[v]){case">":if(m[v-1]!="/"){++v;break e}if(u&&u.cellStyles){if(w=bt(m.slice(ie,v),!0),E=w.r!=null?parseInt(w.r,10):E+1,y=-1,u.sheetRows&&u.sheetRows<E)continue;Z={},j=!1,w.ht&&(j=!0,Z.hpt=parseFloat(w.ht),Z.hpx=id(Z.hpt)),w.hidden=="1"&&(j=!0,Z.hidden=!0),w.outlineLevel!=null&&(j=!0,Z.level=+w.outlineLevel),j&&(L[E-1]=Z)}break;case"<":ie=v;break}if(ie>=v)break;if(w=bt(m.slice(ie,v),!0),E=w.r!=null?parseInt(w.r,10):E+1,y=-1,!(u.sheetRows&&u.sheetRows<E)){d.s.r>E-1&&(d.s.r=E-1),d.e.r<E-1&&(d.e.r=E-1),u&&u.cellStyles&&(Z={},j=!1,w.ht&&(j=!0,Z.hpt=parseFloat(w.ht),Z.hpx=id(Z.hpt)),w.hidden=="1"&&(j=!0,Z.hidden=!0),w.outlineLevel!=null&&(j=!0,Z.level=+w.outlineLevel),j&&(L[E-1]=Z)),g=m.slice(v).split(t);for(var de=0;de!=g.length&&g[de].trim().charAt(0)=="<";++de);for(g=g.slice(de),v=0;v!=g.length;++v)if(m=g[v].trim(),m.length!==0){if(b=m.match(r),_=v,T=0,C=0,m="<c "+(m.slice(0,1)=="<"?">":"")+m,b!=null&&b.length===2){for(_=0,R=b[1],T=0;T!=R.length&&!((C=R.charCodeAt(T)-64)<1||C>26);++T)_=26*_+C;--_,y=_}else++y;for(T=0;T!=m.length&&m.charCodeAt(T)!==62;++T);if(++T,w=bt(m.slice(0,T),!0),w.r||(w.r=Dt({r:E-1,c:y})),R=m.slice(T),D={t:""},(b=R.match(i))!=null&&b[1]!==""&&(D.v=qt(b[1])),u.cellFormula){if((b=R.match(a))!=null&&b[1]!==""){if(D.f=qt(fr(b[1])).replace(/\r\n/g,`
`),u.xlfn||(D.f=Ob(D.f)),b[0].indexOf('t="array"')>-1)D.F=(R.match(s)||[])[1],D.F.indexOf(":")>-1&&P.push([Or(D.F),D.F]);else if(b[0].indexOf('t="shared"')>-1){I=bt(b[0]);var z=qt(fr(b[1]));u.xlfn||(z=Ob(z)),B[parseInt(I.si,10)]=[I,z,w.r]}}else(b=R.match(/<f[^>]*\/>/))&&(I=bt(b[0]),B[I.si]&&(D.f=QY(B[I.si][1],B[I.si][2],w.r)));var J=Yn(w.r);for(T=0;T<P.length;++T)J.r>=P[T][0].s.r&&J.r<=P[T][0].e.r&&J.c>=P[T][0].s.c&&J.c<=P[T][0].e.c&&(D.F=P[T][1])}if(w.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(O)D.t="z";else continue;else D.t=w.t||"n";switch(d.s.c>y&&(d.s.c=y),d.e.c<y&&(d.e.c=y),D.t){case"n":if(D.v==""||D.v==null){if(!O)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!O)continue;D.t="z"}else x=Au[parseInt(D.v,10)],D.v=x.t,D.r=x.r,u.cellHTML&&(D.h=x.h);break;case"str":D.t="s",D.v=D.v!=null?fr(D.v):"",u.cellHTML&&(D.h=ix(D.v));break;case"inlineStr":b=R.match(n),D.t="s",b!=null&&(x=vx(b[1]))?(D.v=x.t,u.cellHTML&&(D.h=x.h)):D.v="";break;case"b":D.v=Er(D.v);break;case"d":u.cellDates?D.v=sn(D.v,1):(D.v=es(sn(D.v,1)),D.t="n");break;case"e":(!u||u.cellText!==!1)&&(D.w=D.v),D.v=N4[D.v];break}if(A=k=0,W=null,U&&w.s!==void 0&&(W=h.CellXf[w.s],W!=null&&(W.numFmtId!=null&&(A=W.numFmtId),u.cellStyles&&W.fillId!=null&&(k=W.fillId))),hI(D,A,k,u,f,h),u.cellDates&&U&&D.t=="n"&&gc(Ot[A])&&(D.t="d",D.v=Qh(D.v)),w.cm&&u.xlmeta){var me=(u.xlmeta.Cell||[])[+w.cm-1];me&&me.type=="XLDAPR"&&(D.D=!0)}if(H){var Y=Yn(w.r);c[Y.r]||(c[Y.r]=[]),c[Y.r][Y.c]=D}else c[w.r]=D}}}}L.length>0&&(c["!rows"]=L)}}();function $J(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var HJ=Zo;function jJ(){}function GJ(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=fK(t),r}function WJ(t){var e=Ls(t);return[e]}function zJ(t){var e=Jo(t);return[e]}function KJ(t){var e=Ls(t),r=t.read_shift(1);return[e,r,"b"]}function qJ(t){var e=Jo(t),r=t.read_shift(1);return[e,r,"b"]}function XJ(t){var e=Ls(t),r=t.read_shift(1);return[e,r,"e"]}function YJ(t){var e=Jo(t),r=t.read_shift(1);return[e,r,"e"]}function QJ(t){var e=Ls(t),r=t.read_shift(4);return[e,r,"s"]}function JJ(t){var e=Jo(t),r=t.read_shift(4);return[e,r,"s"]}function ZJ(t){var e=Ls(t),r=Fn(t);return[e,r,"n"]}function mI(t){var e=Jo(t),r=Fn(t);return[e,r,"n"]}function eZ(t){var e=Ls(t),r=hx(t);return[e,r,"n"]}function tZ(t){var e=Jo(t),r=hx(t);return[e,r,"n"]}function rZ(t){var e=Ls(t),r=dx(t);return[e,r,"is"]}function nZ(t){var e=Ls(t),r=Bn(t);return[e,r,"str"]}function sZ(t){var e=Jo(t),r=Bn(t);return[e,r,"str"]}function aZ(t,e,r){var n=t.l+e,s=Ls(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=ep(t,n-t.l,r);a[3]=wn(o,null,s,r.supbooks,r)}else t.l=n;return a}function iZ(t,e,r){var n=t.l+e,s=Ls(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=ep(t,n-t.l,r);a[3]=wn(o,null,s,r.supbooks,r)}else t.l=n;return a}function oZ(t,e,r){var n=t.l+e,s=Ls(t);s.r=r["!row"];var i=Fn(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=ep(t,n-t.l,r);a[3]=wn(o,null,s,r.supbooks,r)}else t.l=n;return a}function lZ(t,e,r){var n=t.l+e,s=Ls(t);s.r=r["!row"];var i=Bn(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=ep(t,n-t.l,r);a[3]=wn(o,null,s,r.supbooks,r)}else t.l=n;return a}var cZ=Zo;function uZ(t,e){var r=t.l+e,n=Zo(t),s=fx(t),i=Bn(t),a=Bn(t),o=Bn(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function dZ(){}function fZ(t,e,r){var n=t.l+e,s=F4(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=gJ(t,n-t.l,r);a[1]=o}else t.l=n;return a}function hZ(t,e,r){var n=t.l+e,s=Zo(t),i=[s];if(r.cellFormula){var a=yJ(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}var pZ=["left","right","top","bottom","header","footer"];function mZ(t){var e={};return pZ.forEach(function(r){e[r]=Fn(t)}),e}function vZ(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function gZ(){}function xZ(){}function yZ(t,e,r,n,s,i,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,f=!1,h,v,m,g,b,_,T,C,R,D=[];o.biff=12,o["!row"]=0;var w=0,E=!1,y=[],x={},I=o.supbooks||s.supbooks||[[]];if(I.sharedf=x,I.arrayf=y,I.SheetNames=s.SheetNames||s.Sheets.map(function(H){return H.name}),!o.supbooks&&(o.supbooks=I,s.Names))for(var A=0;A<s.Names.length;++A)I[0][A+1]=s.Names[A];var k=[],U=[],W=!1;K0[16]={n:"BrtShortReal",f:mI};var P;if(li(t,function(L,Z,j){if(!f)switch(j){case 148:c=L;break;case 0:h=L,o.sheetRows&&o.sheetRows<=h.r&&(f=!0),C=vn(g=h.r),o["!row"]=h.r,(L.hidden||L.hpt||L.level!=null)&&(L.hpt&&(L.hpx=id(L.hpt)),U[L.r]=L);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:L[2]},L[2]){case"n":v.v=L[1];break;case"s":T=Au[L[1]],v.v=T.t,v.r=T.r;break;case"b":v.v=!!L[1];break;case"e":v.v=L[1],o.cellText!==!1&&(v.w=el[v.v]);break;case"str":v.t="s",v.v=L[1];break;case"is":v.t="s",v.v=L[1].t;break}if((m=a.CellXf[L[0].iStyleRef])&&hI(v,m.numFmtId,null,o,i,a),b=L[0].c==-1?b+1:L[0].c,o.dense?(l[g]||(l[g]=[]),l[g][b]=v):l[Yr(b)+C]=v,o.cellFormula){for(E=!1,w=0;w<y.length;++w){var O=y[w];h.r>=O[0].s.r&&h.r<=O[0].e.r&&b>=O[0].s.c&&b<=O[0].e.c&&(v.F=Kt(O[0]),E=!0)}!E&&L.length>3&&(v.f=L[3])}if(u.s.r>h.r&&(u.s.r=h.r),u.s.c>b&&(u.s.c=b),u.e.r<h.r&&(u.e.r=h.r),u.e.c<b&&(u.e.c=b),o.cellDates&&m&&v.t=="n"&&gc(Ot[m.numFmtId])){var G=_o(v.v);G&&(v.t="d",v.v=new Date(G.y,G.m-1,G.d,G.H,G.M,G.S,G.u))}P&&(P.type=="XLDAPR"&&(v.D=!0),P=void 0);break;case 1:case 12:if(!o.sheetStubs||d)break;v={t:"z",v:void 0},b=L[0].c==-1?b+1:L[0].c,o.dense?(l[g]||(l[g]=[]),l[g][b]=v):l[Yr(b)+C]=v,u.s.r>h.r&&(u.s.r=h.r),u.s.c>b&&(u.s.c=b),u.e.r<h.r&&(u.e.r=h.r),u.e.c<b&&(u.e.c=b),P&&(P.type=="XLDAPR"&&(v.D=!0),P=void 0);break;case 176:D.push(L);break;case 49:P=((o.xlmeta||{}).Cell||[])[L-1];break;case 494:var X=n["!id"][L.relId];for(X?(L.Target=X.Target,L.loc&&(L.Target+="#"+L.loc),L.Rel=X):L.relId==""&&(L.Target="#"+L.loc),g=L.rfx.s.r;g<=L.rfx.e.r;++g)for(b=L.rfx.s.c;b<=L.rfx.e.c;++b)o.dense?(l[g]||(l[g]=[]),l[g][b]||(l[g][b]={t:"z",v:void 0}),l[g][b].l=L):(_=Dt({c:b,r:g}),l[_]||(l[_]={t:"z",v:void 0}),l[_].l=L);break;case 426:if(!o.cellFormula)break;y.push(L),R=o.dense?l[g][b]:l[Yr(b)+C],R.f=wn(L[1],u,{r:h.r,c:b},I,o),R.F=Kt(L[0]);break;case 427:if(!o.cellFormula)break;x[Dt(L[0].s)]=L[1],R=o.dense?l[g][b]:l[Yr(b)+C],R.f=wn(L[1],u,{r:h.r,c:b},I,o);break;case 60:if(!o.cellStyles)break;for(;L.e>=L.s;)k[L.e--]={width:L.w/256,hidden:!!(L.flags&1),level:L.level},W||(W=!0,gx(L.w/256)),lc(k[L.e+1]);break;case 161:l["!autofilter"]={ref:Kt(L)};break;case 476:l["!margins"]=L;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),L.name&&(s.Sheets[r].CodeName=L.name),(L.above||L.left)&&(l["!outline"]={above:L.above,left:L.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),L.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!Z.T){if(!d||o.WTF)throw new Error("Unexpected record 0x"+j.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=Kt(c||u)),o.sheetRows&&l["!ref"]){var B=Or(l["!ref"]);o.sheetRows<=+B.e.r&&(B.e.r=o.sheetRows-1,B.e.r>u.e.r&&(B.e.r=u.e.r),B.e.r<B.s.r&&(B.s.r=B.e.r),B.e.c>u.e.c&&(B.e.c=u.e.c),B.e.c<B.s.c&&(B.s.c=B.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Kt(B))}return D.length>0&&(l["!merges"]=D),k.length>0&&(l["!cols"]=k),U.length>0&&(l["!rows"]=U),l}function EZ(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var a=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var s=qt((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function bZ(t,e,r,n,s,i){var a=i||{"!type":"chart"};if(!t)return i;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var f=EZ(d);u.s.r=u.s.c=0,u.e.c=o,c=Yr(o),f[0].forEach(function(h,v){a[c+vn(v)]={t:"n",v:h,z:f[1]},l=v}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=Kt(u)),a}function _Z(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(pI);return o&&yx(o[0],i,s,r),(a=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function SZ(t,e){t.l+=10;var r=Bn(t);return{name:r}}function TZ(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a=!1;return li(t,function(l,c,u){switch(u){case 550:i["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var vI=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],AZ=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],wZ=[],CZ=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Ub(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Er(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function Vb(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Er(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function gI(t){Vb(t.WBProps,vI),Vb(t.CalcPr,CZ),Ub(t.WBView,AZ),Ub(t.Sheets,wZ),Wl.date1904=Er(t.WBProps.date1904)}var IZ="][*?/\\".split("");function kZ(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return IZ.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var DZ=/<\w+:workbook/;function RZ(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},a=0;if(t.replace(Vn,function(l,c){var u=bt(l);switch(ka(u[0])){case"<?xml":break;case"<workbook":l.match(DZ)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":vI.forEach(function(d){if(u[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=Er(u[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(u[d[0]],10);break;default:r.WBProps[d[0]]=u[d[0]]}}),u.codeName&&(r.WBProps.CodeName=fr(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=qt(fr(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=fr(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Er(u.hidden||"0")&&(i.Hidden=!0),a=c+l.length;break;case"</definedName>":i.Ref=qt(fr(t.slice(a,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),Xz.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return gI(r),r}function FZ(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Jv(t),r.name=Bn(t),r}function PZ(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?Bn(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function OZ(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function NZ(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=hK(t),a=xJ(t,0,r),o=fx(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function LZ(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],a=[[]];return a.SheetNames=[],a.XTI=[],K0[16]={n:"BrtFRTArchID$",f:OZ},li(t,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=wn(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),gI(r),r.Names=i,r.supbooks=a,r}function BZ(t,e,r){return e.slice(-4)===".bin"?LZ(t,r):RZ(t,r)}function MZ(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?yZ(t,n,r,s,i,a,o):FJ(t,n,r,s,i,a,o)}function UZ(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?TZ(t,n,r,s,i):_Z(t,n,r,s,i)}function VZ(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?qY():XY()}function $Z(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?zY():KY()}function HZ(t,e,r,n){return e.slice(-4)===".bin"?cY(t,r,n):nY(t,r,n)}function jZ(t,e,r){return nI(t,r)}function GZ(t,e,r){return e.slice(-4)===".bin"?AX(t,r):SX(t,r)}function WZ(t,e,r){return e.slice(-4)===".bin"?jY(t,r):MY(t,r)}function zZ(t,e,r){return e.slice(-4)===".bin"?NY(t):PY(t)}function KZ(t,e,r,n){return r.slice(-4)===".bin"?LY(t,e,r,n):void 0}function qZ(t,e,r){return e.slice(-4)===".bin"?RY(t,e,r):FY(t,e,r)}var xI=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,yI=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Us(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(xI),i,a,o,l;if(s)for(l=0;l!=s.length;++l)i=s[l].match(yI),(a=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(a+1),n[o]=i[2].slice(1,i[2].length-1));return n}function XZ(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(xI),s,i,a,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(yI),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?a="xmlns"+s[1].slice(6):a=s[1].slice(i+1),r[a]=s[2].slice(1,s[2].length-1));return r}var Cu;function YZ(t,e){var r=Cu[t]||qt(t);return r==="General"?Uo(e):Fs(r,e)}function QZ(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Er(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=sn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[qt(e)]=s}function JZ(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||el[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=td(t.v):t.w=Uo(t.v):t.w=YZ(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=Cu[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&gc(n)){var s=_o(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function ZZ(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=QX[n.Pattern]||n.Pattern)}t[e.ID]=e}function eee(t,e,r,n,s,i,a,o,l,c){var u="General",d=n.StyleID,f={};c=c||{};var h=[],v=0;for(d===void 0&&o&&(d=o.StyleID),d===void 0&&a&&(d=a.StyleID);i[d]!==void 0&&(i[d].nf&&(u=i[d].nf),i[d].Interior&&h.push(i[d].Interior),!!i[d].Parent);)d=i[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Er(t);break;case"String":n.t="s",n.r=lb(qt(t)),n.v=t.indexOf("<")>-1?qt(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(sn(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=qt(t):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=N4[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=lb(e||t));break}if(JZ(n,u,c),c.cellFormula!==!1)if(n.Formula){var m=qt(n.Formula);m.charCodeAt(0)==61&&(m=m.slice(1)),n.f=Gl(m,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Gl("RC:RC",s):n.ArrayRange&&(n.F=Gl(n.ArrayRange,s),l.push([Or(n.F),n.F]))}else for(v=0;v<l.length;++v)s.r>=l[v][0].s.r&&s.r<=l[v][0].e.r&&s.c>=l[v][0].s.c&&s.c<=l[v][0].e.c&&(n.F=l[v][1]);c.cellStyles&&(h.forEach(function(g){!f.patternType&&g.patternType&&(f.patternType=g.patternType)}),n.s=f),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function tee(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function Yp(t,e){var r=e||{};o4();var n=Xc(ox(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=fr(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var a=mn(r);return a.type="string",sd.to_workbook(n,a)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(re){s.indexOf("<"+re)>=0&&(i=!0)}),i)return uee(n,r);Cu={"General Number":"General","General Date":Ot[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ot[15],"Short Date":Ot[14],"Long Time":Ot[19],"Medium Time":Ot[18],"Short Time":Ot[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ot[2],Standard:Ot[4],Percent:Ot[10],Scientific:Ot[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},d=[],f=r.dense?[]:{},h="",v={},m={},g=Us('<Data ss:Type="String">'),b=0,_=0,T=0,C={s:{r:2e6,c:2e6},e:{r:0,c:0}},R={},D={},w="",E=0,y=[],x={},I={},A=0,k=[],U=[],W={},P=[],B,H=!1,L=[],Z=[],j={},O=0,G=0,X={Sheets:[],WBProps:{date1904:!1}},q={};nd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var pe="";o=nd.exec(n);)switch(o[3]=(pe=o[3]).toLowerCase()){case"data":if(pe=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?eee(n.slice(b,o.index),w,g,l[l.length-1][0]=="comment"?W:v,{c:_,r:T},R,P[_],m,L,r):(w="",g=Us(o[0]),b=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(U.length>0&&(v.c=U),(!r.sheetRows||r.sheetRows>T)&&v.v!==void 0&&(r.dense?(f[T]||(f[T]=[]),f[T][_]=v):f[Yr(_)+vn(T)]=v),v.HRef&&(v.l={Target:qt(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(O=_+(parseInt(v.MergeAcross,10)|0),G=T+(parseInt(v.MergeDown,10)|0),y.push({s:{c:_,r:T},e:{c:O,r:G}})),!r.sheetStubs)v.MergeAcross?_=O+1:++_;else if(v.MergeAcross||v.MergeDown){for(var ie=_;ie<=O;++ie)for(var de=T;de<=G;++de)(ie>_||de>T)&&(r.dense?(f[de]||(f[de]=[]),f[de][ie]={t:"z"}):f[Yr(ie)+vn(de)]={t:"z"});_=O+1}else++_;else v=XZ(o[0]),v.Index&&(_=+v.Index-1),_<C.s.c&&(C.s.c=_),_>C.e.c&&(C.e.c=_),o[0].slice(-2)==="/>"&&++_,U=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(T<C.s.r&&(C.s.r=T),T>C.e.r&&(C.e.r=T),o[0].slice(-2)==="/>"&&(m=Us(o[0]),m.Index&&(T=+m.Index-1)),_=0,++T):(m=Us(o[0]),m.Index&&(T=+m.Index-1),j={},(m.AutoFitHeight=="0"||m.Height)&&(j.hpx=parseInt(m.Height,10),j.hpt=rI(j.hpx),Z[T]=j),m.Hidden=="1"&&(j.hidden=!0,Z[T]=j));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));d.push(h),C.s.r<=C.e.r&&C.s.c<=C.e.c&&(f["!ref"]=Kt(C),r.sheetRows&&r.sheetRows<=C.e.r&&(f["!fullref"]=f["!ref"],C.e.r=r.sheetRows-1,f["!ref"]=Kt(C))),y.length&&(f["!merges"]=y),P.length>0&&(f["!cols"]=P),Z.length>0&&(f["!rows"]=Z),u[h]=f}else C={s:{r:2e6,c:2e6},e:{r:0,c:0}},T=_=0,l.push([o[3],!1]),c=Us(o[0]),h=qt(c.Name),f=r.dense?[]:{},y=[],L=[],Z=[],q={name:h,Hidden:0},X.Sheets.push(q);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),P=[],H=!1}break;case"style":o[1]==="/"?ZZ(R,D,r):D=Us(o[0]);break;case"numberformat":D.nf=qt(Us(o[0]).Format||"General"),Cu[D.nf]&&(D.nf=Cu[D.nf]);for(var z=0;z!=392&&Ot[z]!=D.nf;++z);if(z==392){for(z=57;z!=392;++z)if(Ot[z]==null){Io(D.nf,z);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(B=Us(o[0]),B.Hidden&&(B.hidden=!0,delete B.Hidden),B.Width&&(B.wpx=parseInt(B.Width,10)),!H&&B.wpx>10){H=!0,qn=eI;for(var J=0;J<P.length;++J)P[J]&&lc(P[J])}H&&lc(B),P[B.Index-1||P.length]=B;for(var me=0;me<+B.Span;++me)P[P.length]=mn(B);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var Y=bt(o[0]),K={Name:Y.Name,Ref:Gl(Y.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(K.Sheet=X.Sheets.length-1),X.Names.push(K);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?w+=n.slice(E,o.index):E=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=Us(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?MK(x,pe,n.slice(A,o.index)):A=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));tee(W),U.push(W)}else l.push([o[3],!1]),c=Us(o[0]),W={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var ee=Us(o[0]);f["!autofilter"]={ref:Gl(ee.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return zb(n,r);var fe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:fe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:fe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:fe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:fe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(A,o.index)){case"SheetHidden":q.Hidden=1;break;case"SheetVeryHidden":q.Hidden=2;break}else A=o.index+o[0].length;break;case"header":f["!margins"]||wu(f["!margins"]={},"xlml"),isNaN(+bt(o[0]).Margin)||(f["!margins"].header=+bt(o[0]).Margin);break;case"footer":f["!margins"]||wu(f["!margins"]={},"xlml"),isNaN(+bt(o[0]).Margin)||(f["!margins"].footer=+bt(o[0]).Margin);break;case"pagemargins":var ve=bt(o[0]);f["!margins"]||wu(f["!margins"]={},"xlml"),isNaN(+ve.Top)||(f["!margins"].top=+ve.Top),isNaN(+ve.Left)||(f["!margins"].left=+ve.Left),isNaN(+ve.Right)||(f["!margins"].right=+ve.Right),isNaN(+ve.Bottom)||(f["!margins"].bottom=+ve.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:fe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:fe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:fe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:fe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:fe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:fe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:fe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:fe=!1}break;case"smarttags":break;default:fe=!1;break}if(fe||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?QZ(I,pe,k,n.slice(A,o.index)):(k=o,A=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Q={};return!r.bookSheets&&!r.bookProps&&(Q.Sheets=u),Q.SheetNames=d,Q.Workbook=X,Q.SSF=mn(Ot),Q.Props=x,Q.Custprops=I,Q}function rg(t,e){switch(_x(e=e||{}),e.type||"base64"){case"base64":return Yp(_s(t),e);case"binary":case"buffer":case"file":return Yp(t,e);case"array":return Yp(Qo(t),e)}}function ree(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=vK(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=gK(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var nee=[60,1084,2066,2165,2175];function see(t,e,r,n,s){var i=n,a=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}a.push(o),r.l+=i;for(var l=Ga(r,r.l),c=ng[l],u=0;c!=null&&nee.indexOf(l)>-1;)i=Ga(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+i),a.push(o),r.l+=4+i,c=ng[l=Ga(r,r.l)];var d=Fi(a);un(d,0);var f=0;d.lens=[];for(var h=0;h<a.length;++h)d.lens.push(f),f+=a[h].length;if(d.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+d.length+" < "+n;return e.f(d,d.length,s)}function aa(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Ot[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||el[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=td(t.v):t.w=Uo(t.v):t.w=Fs(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&gc(Ot[n]||String(n))){var s=_o(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function wf(t,e,r){return{v:t,ixfe:e,t:r}}function aee(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},a={},o=null,l=[],c="",u={},d,f="",h,v,m,g,b={},_=[],T,C,R=[],D=[],w={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},y=function(xe){return xe<8?ko[xe]:xe<64&&D[xe-8]||ko[xe]},x=function(xe,Ee,Fe){var Ge=Ee.XF.data;if(!(!Ge||!Ge.patternType||!Fe||!Fe.cellStyles)){Ee.s={},Ee.s.patternType=Ge.patternType;var tt;(tt=ad(y(Ge.icvFore)))&&(Ee.s.fgColor={rgb:tt}),(tt=ad(y(Ge.icvBack)))&&(Ee.s.bgColor={rgb:tt})}},I=function(xe,Ee,Fe){if(!(j>1)&&!(Fe.sheetRows&&xe.r>=Fe.sheetRows)){if(Fe.cellStyles&&Ee.XF&&Ee.XF.data&&x(xe,Ee,Fe),delete Ee.ixfe,delete Ee.XF,d=xe,f=Dt(xe),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),xe.r<a.s.r&&(a.s.r=xe.r),xe.c<a.s.c&&(a.s.c=xe.c),xe.r+1>a.e.r&&(a.e.r=xe.r+1),xe.c+1>a.e.c&&(a.e.c=xe.c+1),Fe.cellFormula&&Ee.f){for(var Ge=0;Ge<_.length;++Ge)if(!(_[Ge][0].s.c>xe.c||_[Ge][0].s.r>xe.r)&&!(_[Ge][0].e.c<xe.c||_[Ge][0].e.r<xe.r)){Ee.F=Kt(_[Ge][0]),(_[Ge][0].s.c!=xe.c||_[Ge][0].s.r!=xe.r)&&delete Ee.f,Ee.f&&(Ee.f=""+wn(_[Ge][1],a,xe,L,A));break}}Fe.dense?(s[xe.r]||(s[xe.r]=[]),s[xe.r][xe.c]=Ee):s[f]=Ee}},A={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:_,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(A.password=e.password);var k,U=[],W=[],P=[],B=[],H=!1,L=[];L.SheetNames=A.snames,L.sharedf=A.sharedf,L.arrayf=A.arrayf,L.names=[],L.XTI=[];var Z=0,j=0,O=0,G=[],X=[],q;A.codepage=1200,qs(1200);for(var pe=!1;t.l<t.length-1;){var ie=t.l,de=t.read_shift(2);if(de===0&&Z===10)break;var z=t.l===t.length?0:t.read_shift(2),J=ng[de];if(J&&J.f){if(e.bookSheets&&Z===133&&de!==133)break;if(Z=de,J.r===2||J.r==12){var me=t.read_shift(2);if(z-=2,!A.enc&&me!==de&&((me&255)<<8|me>>8)!==de)throw new Error("rt mismatch: "+me+"!="+de);J.r==12&&(t.l+=10,z-=10)}var Y={};if(de===10?Y=J.f(t,z,A):Y=see(de,J,t,z,A),j==0&&[9,521,1033,2057].indexOf(Z)===-1)continue;switch(de){case 34:r.opts.Date1904=w.WBProps.date1904=Y;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(A.enc||(t.l=0),A.enc=Y,!e.password)throw new Error("File is password-protected");if(Y.valid==null)throw new Error("Encryption scheme unsupported");if(!Y.valid)throw new Error("Password is incorrect");break;case 92:A.lastuser=Y;break;case 66:var K=Number(Y);switch(K){case 21010:K=1200;break;case 32768:K=1e4;break;case 32769:K=1252;break}qs(A.codepage=K),pe=!0;break;case 317:A.rrtabid=Y;break;case 25:A.winlocked=Y;break;case 439:r.opts.RefreshAll=Y;break;case 12:r.opts.CalcCount=Y;break;case 16:r.opts.CalcDelta=Y;break;case 17:r.opts.CalcIter=Y;break;case 13:r.opts.CalcMode=Y;break;case 14:r.opts.CalcPrecision=Y;break;case 95:r.opts.CalcSaveRecalc=Y;break;case 15:A.CalcRefMode=Y;break;case 2211:r.opts.FullCalc=Y;break;case 129:Y.fDialog&&(s["!type"]="dialog"),Y.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),Y.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:R.push(Y);break;case 430:L.push([Y]),L[L.length-1].XTI=[];break;case 35:case 547:L[L.length-1].push(Y);break;case 24:case 536:q={Name:Y.Name,Ref:wn(Y.rgce,a,null,L,A)},Y.itab>0&&(q.Sheet=Y.itab-1),L.names.push(q),L[0]||(L[0]=[],L[0].XTI=[]),L[L.length-1].push(Y),Y.Name=="_xlnm._FilterDatabase"&&Y.itab>0&&Y.rgce&&Y.rgce[0]&&Y.rgce[0][0]&&Y.rgce[0][0][0]=="PtgArea3d"&&(X[Y.itab-1]={ref:Kt(Y.rgce[0][0][1][2])});break;case 22:A.ExternCount=Y;break;case 23:L.length==0&&(L[0]=[],L[0].XTI=[]),L[L.length-1].XTI=L[L.length-1].XTI.concat(Y),L.XTI=L.XTI.concat(Y);break;case 2196:if(A.biff<8)break;q!=null&&(q.Comment=Y[1]);break;case 18:s["!protect"]=Y;break;case 19:Y!==0&&A.WTF&&console.error("Password verifier: "+Y);break;case 133:i[Y.pos]=Y,A.snames.push(Y.name);break;case 10:{if(--j)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,s["!ref"]=Kt(a),e.sheetRows&&e.sheetRows<=a.e.r){var ee=a.e.r;a.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Kt(a),a.e.r=ee}a.e.r++,a.e.c++}U.length>0&&(s["!merges"]=U),W.length>0&&(s["!objects"]=W),P.length>0&&(s["!cols"]=P),B.length>0&&(s["!rows"]=B),w.Sheets.push(E)}c===""?u=s:n[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(A.biff===8&&(A.biff={9:2,521:3,1033:4}[de]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Y.BIFFVer]||8),A.biffguess=Y.BIFFVer==0,Y.BIFFVer==0&&Y.dt==4096&&(A.biff=5,pe=!0,qs(A.codepage=28591)),A.biff==8&&Y.BIFFVer==0&&Y.dt==16&&(A.biff=2),j++)break;if(s=e.dense?[]:{},A.biff<8&&!pe&&(pe=!0,qs(A.codepage=e.codepage||1252)),A.biff<5||Y.BIFFVer==0&&Y.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var fe={pos:t.l-z,name:c};i[fe.pos]=fe,A.snames.push(c)}else c=(i[ie]||{name:""}).name;Y.dt==32&&(s["!type"]="chart"),Y.dt==64&&(s["!type"]="macro"),U=[],W=[],A.arrayf=_=[],P=[],B=[],H=!1,E={Hidden:(i[ie]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[Y.r]||[])[Y.c]:s[Dt({c:Y.c,r:Y.r})])&&++Y.c,T={ixfe:Y.ixfe,XF:R[Y.ixfe]||{},v:Y.val,t:"n"},O>0&&(T.z=G[T.ixfe>>8&63]),aa(T,e,r.opts.Date1904),I({c:Y.c,r:Y.r},T,e);break;case 5:case 517:T={ixfe:Y.ixfe,XF:R[Y.ixfe],v:Y.val,t:Y.t},O>0&&(T.z=G[T.ixfe>>8&63]),aa(T,e,r.opts.Date1904),I({c:Y.c,r:Y.r},T,e);break;case 638:T={ixfe:Y.ixfe,XF:R[Y.ixfe],v:Y.rknum,t:"n"},O>0&&(T.z=G[T.ixfe>>8&63]),aa(T,e,r.opts.Date1904),I({c:Y.c,r:Y.r},T,e);break;case 189:for(var ve=Y.c;ve<=Y.C;++ve){var Q=Y.rkrec[ve-Y.c][0];T={ixfe:Q,XF:R[Q],v:Y.rkrec[ve-Y.c][1],t:"n"},O>0&&(T.z=G[T.ixfe>>8&63]),aa(T,e,r.opts.Date1904),I({c:ve,r:Y.r},T,e)}break;case 6:case 518:case 1030:{if(Y.val=="String"){o=Y;break}if(T=wf(Y.val,Y.cell.ixfe,Y.tt),T.XF=R[T.ixfe],e.cellFormula){var re=Y.formula;if(re&&re[0]&&re[0][0]&&re[0][0][0]=="PtgExp"){var be=re[0][0][1][0],Te=re[0][0][1][1],_e=Dt({r:be,c:Te});b[_e]?T.f=""+wn(Y.formula,a,Y.cell,L,A):T.F=((e.dense?(s[be]||[])[Te]:s[_e])||{}).F}else T.f=""+wn(Y.formula,a,Y.cell,L,A)}O>0&&(T.z=G[T.ixfe>>8&63]),aa(T,e,r.opts.Date1904),I(Y.cell,T,e),o=Y}break;case 7:case 519:if(o)o.val=Y,T=wf(Y,o.cell.ixfe,"s"),T.XF=R[T.ixfe],e.cellFormula&&(T.f=""+wn(o.formula,a,o.cell,L,A)),O>0&&(T.z=G[T.ixfe>>8&63]),aa(T,e,r.opts.Date1904),I(o.cell,T,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{_.push(Y);var ke=Dt(Y[0].s);if(h=e.dense?(s[Y[0].s.r]||[])[Y[0].s.c]:s[ke],e.cellFormula&&h){if(!o||!ke||!h)break;h.f=""+wn(Y[1],a,Y[0],L,A),h.F=Kt(Y[0])}}break;case 1212:{if(!e.cellFormula)break;if(f){if(!o)break;b[Dt(o.cell)]=Y[0],h=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Dt(o.cell)],(h||{}).f=""+wn(Y[0],a,d,L,A)}}break;case 253:T=wf(l[Y.isst].t,Y.ixfe,"s"),l[Y.isst].h&&(T.h=l[Y.isst].h),T.XF=R[T.ixfe],O>0&&(T.z=G[T.ixfe>>8&63]),aa(T,e,r.opts.Date1904),I({c:Y.c,r:Y.r},T,e);break;case 513:e.sheetStubs&&(T={ixfe:Y.ixfe,XF:R[Y.ixfe],t:"z"},O>0&&(T.z=G[T.ixfe>>8&63]),aa(T,e,r.opts.Date1904),I({c:Y.c,r:Y.r},T,e));break;case 190:if(e.sheetStubs)for(var Be=Y.c;Be<=Y.C;++Be){var Ce=Y.ixfe[Be-Y.c];T={ixfe:Ce,XF:R[Ce],t:"z"},O>0&&(T.z=G[T.ixfe>>8&63]),aa(T,e,r.opts.Date1904),I({c:Be,r:Y.r},T,e)}break;case 214:case 516:case 4:T=wf(Y.val,Y.ixfe,"s"),T.XF=R[T.ixfe],O>0&&(T.z=G[T.ixfe>>8&63]),aa(T,e,r.opts.Date1904),I({c:Y.c,r:Y.r},T,e);break;case 0:case 512:j===1&&(a=Y);break;case 252:l=Y;break;case 1054:if(A.biff==4){G[O++]=Y[1];for(var je=0;je<O+163&&Ot[je]!=Y[1];++je);je>=163&&Io(Y[1],O+163)}else Io(Y[1],Y[0]);break;case 30:{G[O++]=Y;for(var Ue=0;Ue<O+163&&Ot[Ue]!=Y;++Ue);Ue>=163&&Io(Y,O+163)}break;case 229:U=U.concat(Y);break;case 93:W[Y.cmo[0]]=A.lastobj=Y;break;case 438:A.lastobj.TxO=Y;break;case 127:A.lastobj.ImData=Y;break;case 440:for(g=Y[0].s.r;g<=Y[0].e.r;++g)for(m=Y[0].s.c;m<=Y[0].e.c;++m)h=e.dense?(s[g]||[])[m]:s[Dt({c:m,r:g})],h&&(h.l=Y[1]);break;case 2048:for(g=Y[0].s.r;g<=Y[0].e.r;++g)for(m=Y[0].s.c;m<=Y[0].e.c;++m)h=e.dense?(s[g]||[])[m]:s[Dt({c:m,r:g})],h&&h.l&&(h.l.Tooltip=Y[1]);break;case 28:{if(A.biff<=5&&A.biff>=2)break;h=e.dense?(s[Y[0].r]||[])[Y[0].c]:s[Dt(Y[0])];var He=W[Y[2]];h||(e.dense?(s[Y[0].r]||(s[Y[0].r]=[]),h=s[Y[0].r][Y[0].c]={t:"z"}):h=s[Dt(Y[0])]={t:"z"},a.e.r=Math.max(a.e.r,Y[0].r),a.s.r=Math.min(a.s.r,Y[0].r),a.e.c=Math.max(a.e.c,Y[0].c),a.s.c=Math.min(a.s.c,Y[0].c)),h.c||(h.c=[]),v={a:Y[1],t:He.TxO.t},h.c.push(v)}break;case 2173:CY(R[Y.ixfe],Y.ext);break;case 125:{if(!A.cellStyles)break;for(;Y.e>=Y.s;)P[Y.e--]={width:Y.w/256,level:Y.level||0,hidden:!!(Y.flags&1)},H||(H=!0,gx(Y.w/256)),lc(P[Y.e+1])}break;case 520:{var qe={};Y.level!=null&&(B[Y.r]=qe,qe.level=Y.level),Y.hidden&&(B[Y.r]=qe,qe.hidden=!0),Y.hpt&&(B[Y.r]=qe,qe.hpt=Y.hpt,qe.hpx=id(Y.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||wu(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[de]]=Y;break;case 161:s["!margins"]||wu(s["!margins"]={}),s["!margins"].header=Y.header,s["!margins"].footer=Y.footer;break;case 574:Y.RTL&&(w.Views[0].RTL=!0);break;case 146:D=Y;break;case 2198:k=Y;break;case 140:C=Y;break;case 442:c?E.CodeName=Y||E.name:w.WBProps.CodeName=Y||"ThisWorkbook";break}}else J||console.error("Missing Info for XLS Record 0x"+de.toString(16)),t.l+=z}return r.SheetNames=Sa(i).sort(function(ye,xe){return Number(ye)-Number(xe)}).map(function(ye){return i[ye].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&X.forEach(function(ye,xe){r.Sheets[r.SheetNames[xe]]["!autofilter"]=ye}),r.Strings=l,r.SSF=mn(Ot),A.enc&&(r.Encryption=A.enc),k&&(r.Themes=k),r.Metadata={},C!==void 0&&(r.Metadata.Country=C),L.names.length>0&&(w.Names=L.names),r.Workbook=w,r}var $b={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function iee(t,e,r){var n=zt.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=Tb(n,SK,$b.DSI);for(var i in s)e[i]=s[i]}catch(c){if(r.WTF)throw c}var a=zt.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=Tb(a,TK,$b.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(B4(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function EI(t,e){e||(e={}),_x(e),XC(),e.codepage&&ex(e.codepage);var r,n;if(t.FullPaths){if(zt.find(t,"/encryption"))throw new Error("File is password-protected");r=zt.find(t,"!CompObj"),n=zt.find(t,"/Workbook")||zt.find(t,"/Book")}else{switch(e.type){case"base64":t=zs(_s(t));break;case"binary":t=zs(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}un(t,0),n={content:t}}var s,i;if(r&&ree(r),e.bookProps&&!e.bookSheets)s={};else{var a=jt?"buffer":"array";if(n&&n.content)s=aee(n.content,e);else if((i=zt.find(t,"PerfectOffice_MAIN"))&&i.content)s=Tu.to_workbook(i.content,(e.type=a,e));else if((i=zt.find(t,"NativeContent_MAIN"))&&i.content)s=Tu.to_workbook(i.content,(e.type=a,e));else throw(i=zt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&zt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=WY(t))}var o={};return t.FullPaths&&iee(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}var K0={0:{f:$J},1:{f:WJ},2:{f:eZ},3:{f:XJ},4:{f:KJ},5:{f:ZJ},6:{f:nZ},7:{f:QJ},8:{f:lZ},9:{f:oZ},10:{f:aZ},11:{f:iZ},12:{f:zJ},13:{f:tZ},14:{f:YJ},15:{f:qJ},16:{f:mI},17:{f:sZ},18:{f:JJ},19:{f:dx},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:NZ},40:{},42:{},43:{f:aY},44:{f:sY},45:{f:iY},46:{f:lY},47:{f:oY},48:{},49:{f:cK},50:{},51:{f:kY},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:X4},62:{f:rZ},63:{f:OY},64:{f:gZ},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Un,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:vZ},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:GJ},148:{f:HJ,p:16},151:{f:dZ},152:{},153:{f:PZ},154:{},155:{},156:{f:FZ},157:{},158:{},159:{T:1,f:TX},160:{T:-1},161:{T:1,f:Zo},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:cZ},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:IY},336:{T:-1},337:{f:DY,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Jv},357:{},358:{},359:{},360:{T:1},361:{},362:{f:q4},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:fZ},427:{f:hZ},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:mZ},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:jJ},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:uZ},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Jv},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:HY},633:{T:1},634:{T:-1},635:{T:1,f:$Y},636:{T:-1},637:{f:dK},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:SZ},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:xZ},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},ng={6:{f:qp},10:{f:xi},12:{f:jr},13:{f:jr},14:{f:Lr},15:{f:Lr},16:{f:Fn},17:{f:Lr},18:{f:Lr},19:{f:jr},20:{f:Ib},21:{f:Ib},23:{f:q4},24:{f:Db},25:{f:Lr},26:{},27:{},28:{f:Uq},29:{},34:{f:Lr},35:{f:kb},38:{f:Fn},39:{f:Fn},40:{f:Fn},41:{f:Fn},42:{f:Lr},43:{f:Lr},47:{f:jX},49:{f:Eq},51:{f:jr},60:{},61:{f:gq},64:{f:Lr},65:{f:yq},66:{f:jr},77:{},80:{},81:{},82:{},85:{f:jr},89:{},90:{},91:{},92:{f:cq},93:{f:$q},94:{},95:{f:Lr},96:{},97:{},99:{f:Lr},125:{f:X4},128:{f:Dq},129:{f:uq},130:{f:jr},131:{f:Lr},132:{f:Lr},133:{f:dq},134:{},140:{f:Kq},141:{f:jr},144:{},146:{f:Xq},151:{},152:{},153:{},154:{},155:{},156:{f:jr},157:{},158:{},160:{f:eX},161:{f:Qq},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:wq},190:{f:Cq},193:{f:xi},197:{},198:{},199:{},200:{},201:{},202:{f:Lr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:jr},220:{},221:{f:Lr},222:{},224:{f:kq},225:{f:lq},226:{f:xi},227:{},229:{f:Vq},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:fq},253:{f:bq},255:{f:hq},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:H4},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Lr},353:{f:xi},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Fq},431:{f:Lr},432:{},433:{},434:{},437:{},438:{f:Gq},439:{f:Lr},440:{f:Wq},441:{},442:{f:Ld},443:{},444:{f:jr},445:{},446:{},448:{f:xi},449:{f:vq,r:2},450:{f:xi},512:{f:wb},513:{f:Zq},515:{f:Rq},516:{f:_q},517:{f:Cb},519:{f:tX},520:{f:pq},523:{},545:{f:Rb},549:{f:Ab},566:{},574:{f:xq},638:{f:Aq},659:{},1048:{},1054:{f:Sq},1084:{},1212:{f:Lq},2048:{f:zq},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Sf},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:xi},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Yq,r:12},2173:{f:wY,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Lr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Nq,r:12},2197:{},2198:{f:EY,r:12},2199:{},2200:{},2201:{},2202:{f:Bq,r:12},2203:{f:xi},2204:{},2205:{},2206:{},2207:{},2211:{f:mq},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:jr},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Jq},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:qq},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:wb},1:{},2:{f:aX},3:{f:sX},4:{f:nX},5:{f:Cb},7:{f:iX},8:{},9:{f:Sf},11:{},22:{f:jr},30:{f:Tq},31:{},32:{},33:{f:Rb},36:{},37:{f:Ab},50:{f:oX},62:{},52:{},67:{},68:{f:jr},69:{},86:{},126:{},127:{f:rX},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:lX},223:{},234:{},354:{},421:{},518:{f:qp},521:{f:Sf},536:{f:Db},547:{f:kb},561:{},579:{},1030:{f:qp},1033:{f:Sf},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Vs(t,e,r,n){var s=e;if(!isNaN(s)){var i=(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&k4(r)&&t.push(r)}}function Hb(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),a=s.index,o=i&&i.index||t.length,l=Rz(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,d=0,f=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(a=0;a<l.length;++a){var m=l[a].trim(),g=m.slice(0,3).toLowerCase();if(g=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(g!="<td"&&g!="<th")){var b=m.split(/<\/t[dh]>/i);for(o=0;o<b.length;++o){var _=b[o].trim();if(_.match(/<t[dh]/i)){for(var T=_,C=0;T.charAt(0)=="<"&&(C=T.indexOf(">"))>-1;)T=T.slice(C+1);for(var R=0;R<v.length;++R){var D=v[R];D.s.c==u&&D.s.r<c&&c<=D.e.r&&(u=D.e.c+1,R=-1)}var w=bt(_.slice(0,_.indexOf(">")));f=w.colspan?+w.colspan:1,((d=+w.rowspan)>1||f>1)&&v.push({s:{r:c,c:u},e:{r:c+(d||1)-1,c:u+f-1}});var E=w.t||w["data-t"]||"";if(!T.length){u+=f;continue}if(T=v4(T),h.s.r>c&&(h.s.r=c),h.e.r<c&&(h.e.r=c),h.s.c>u&&(h.s.c=u),h.e.c<u&&(h.e.c=u),!T.length){u+=f;continue}var y={t:"s",v:T};r.raw||!T.trim().length||E=="s"||(T==="TRUE"?y={t:"b",v:!0}:T==="FALSE"?y={t:"b",v:!1}:isNaN(Js(T))?isNaN(oc(T).getDate())||(y={t:"d",v:sn(T)},r.cellDates||(y={t:"n",v:es(y.v)}),y.z=r.dateNF||Ot[14]):y={t:"n",v:Js(T)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=y):n[Dt({r:c,c:u})]=y,u+=f}}}}return n["!ref"]=Kt(h),v.length&&(n["!merges"]=v),n}function oee(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var u=Dt({r,c:a}),d=n.dense?(t[r]||[])[a]:t[u],f=d&&d.v!=null&&(d.h||ix(d.w||(ai(d),d.w)||""))||"",h={};o>1&&(h.rowspan=o),l>1&&(h.colspan=l),n.editable?f='<span contenteditable="true">'+f+"</span>":d&&(h["data-t"]=d&&d.t||"z",d.v!=null&&(h["data-v"]=d.v),d.z!=null&&(h["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+d.l.Target+'">'+f+"</a>")),h.id=(n.id||"sjs")+"-"+u,i.push(Kz("td",f,h))}}var v="<tr>";return v+i.join("")+"</tr>"}var lee='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',cee="</body></html>";function uee(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return no(Hb(r[0],e),e);var n=Tx();return r.forEach(function(s,i){Ax(n,Hb(s,e),"Sheet"+(i+1))}),n}function dee(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function fee(t,e){var r=e||{},n=r.header!=null?r.header:lee,s=r.footer!=null?r.footer:cee,i=[n],a=xc(t["!ref"]);r.dense=Array.isArray(t),i.push(dee(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(oee(t,a,o,r));return i.push("</table>"+s),i.join("")}function bI(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?Yn(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var u=xc(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),s==-1&&(c.e.r=s=u.e.r+1)}var d=[],f=0,h=t["!rows"]||(t["!rows"]=[]),v=0,m=0,g=0,b=0,_=0,T=0;for(t["!cols"]||(t["!cols"]=[]);v<o.length&&m<l;++v){var C=o[v];if(jb(C)){if(n.display)continue;h[m]={hidden:!0}}var R=C.children;for(g=b=0;g<R.length;++g){var D=R[g];if(!(n.display&&jb(D))){var w=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):v4(D.innerHTML),E=D.getAttribute("data-z")||D.getAttribute("z");for(f=0;f<d.length;++f){var y=d[f];y.s.c==b+i&&y.s.r<m+s&&m+s<=y.e.r&&(b=y.e.c+1-i,f=-1)}T=+D.getAttribute("colspan")||1,((_=+D.getAttribute("rowspan")||1)>1||T>1)&&d.push({s:{r:m+s,c:b+i},e:{r:m+s+(_||1)-1,c:b+i+(T||1)-1}});var x={t:"s",v:w},I=D.getAttribute("data-t")||D.getAttribute("t")||"";w!=null&&(w.length==0?x.t=I||"z":n.raw||w.trim().length==0||I=="s"||(w==="TRUE"?x={t:"b",v:!0}:w==="FALSE"?x={t:"b",v:!1}:isNaN(Js(w))?isNaN(oc(w).getDate())||(x={t:"d",v:sn(w)},n.cellDates||(x={t:"n",v:es(x.v)}),x.z=n.dateNF||Ot[14]):x={t:"n",v:Js(w)})),x.z===void 0&&E!=null&&(x.z=E);var A="",k=D.getElementsByTagName("A");if(k&&k.length)for(var U=0;U<k.length&&!(k[U].hasAttribute("href")&&(A=k[U].getAttribute("href"),A.charAt(0)!="#"));++U);A&&A.charAt(0)!="#"&&(x.l={Target:A}),n.dense?(t[m+s]||(t[m+s]=[]),t[m+s][b+i]=x):t[Dt({c:b+i,r:m+s})]=x,c.e.c<b+i&&(c.e.c=b+i),b+=T}}++m}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,m-1+s),t["!ref"]=Kt(c),m>=l&&(t["!fullref"]=Kt((c.e.r=o.length-v+m-1+s,c))),t}function _I(t,e){var r=e||{},n=r.dense?[]:{};return bI(n,t,e)}function hee(t,e){return no(_I(t,e),e)}function jb(t){var e="",r=pee(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function pee(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function mee(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=qt(e.replace(/<[^>]*>/g,""));return[r]}var Gb={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function SI(t,e){var r=e||{},n=ox(t),s=[],i,a,o={name:""},l="",c=0,u,d,f={},h=[],v=r.dense?[]:{},m,g,b={value:""},_="",T=0,C=[],R=-1,D=-1,w={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,y={},x=[],I={},A=0,k=0,U=[],W=1,P=1,B=[],H={Names:[]},L={},Z=["",""],j=[],O={},G="",X=0,q=!1,pe=!1,ie=0;for(nd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");m=nd.exec(n);)switch(m[3]=m[3].replace(/_.*$/,"")){case"table":case"":m[1]==="/"?(w.e.c>=w.s.c&&w.e.r>=w.s.r?v["!ref"]=Kt(w):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=w.e.r&&(v["!fullref"]=v["!ref"],w.e.r=r.sheetRows-1,v["!ref"]=Kt(w)),x.length&&(v["!merges"]=x),U.length&&(v["!rows"]=U),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),h.push(u.name),f[u.name]=v,pe=!1):m[0].charAt(m[0].length-2)!=="/"&&(u=bt(m[0],!1),R=D=-1,w.s.r=w.s.c=1e7,w.e.r=w.e.c=0,v=r.dense?[]:{},x=[],U=[],pe=!0);break;case"table-row-group":m[1]==="/"?--E:++E;break;case"table-row":case"":if(m[1]==="/"){R+=W,W=1;break}if(d=bt(m[0],!1),d.?R=d.-1:R==-1&&(R=0),W=+d["number-rows-repeated"]||1,W<10)for(ie=0;ie<W;++ie)E>0&&(U[R+ie]={level:E});D=-1;break;case"covered-table-cell":m[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(v[R]||(v[R]=[]),v[R][D]={t:"z"}):v[Dt({r:R,c:D})]={t:"z"}),_="",C=[];break;case"table-cell":case"":if(m[0].charAt(m[0].length-2)==="/")++D,b=bt(m[0],!1),P=parseInt(b["number-columns-repeated"]||"1",10),g={t:"z",v:null},b.formula&&r.cellFormula!=!1&&(g.f=Mb(qt(b.formula))),(b.||b["value-type"])=="string"&&(g.t="s",g.v=qt(b["string-value"]||""),r.dense?(v[R]||(v[R]=[]),v[R][D]=g):v[Dt({r:R,c:D})]=g),D+=P-1;else if(m[1]!=="/"){++D,_="",T=0,C=[],P=1;var de=W?R+W-1:R;if(D>w.e.c&&(w.e.c=D),D<w.s.c&&(w.s.c=D),R<w.s.r&&(w.s.r=R),de>w.e.r&&(w.e.r=de),b=bt(m[0],!1),j=[],O={},g={t:b.||b["value-type"],v:null},r.cellFormula)if(b.formula&&(b.formula=qt(b.formula)),b["number-matrix-columns-spanned"]&&b["number-matrix-rows-spanned"]&&(A=parseInt(b["number-matrix-rows-spanned"],10)||0,k=parseInt(b["number-matrix-columns-spanned"],10)||0,I={s:{r:R,c:D},e:{r:R+A-1,c:D+k-1}},g.F=Kt(I),B.push([I,g.F])),b.formula)g.f=Mb(b.formula);else for(ie=0;ie<B.length;++ie)R>=B[ie][0].s.r&&R<=B[ie][0].e.r&&D>=B[ie][0].s.c&&D<=B[ie][0].e.c&&(g.F=B[ie][1]);switch((b["number-columns-spanned"]||b["number-rows-spanned"])&&(A=parseInt(b["number-rows-spanned"],10)||0,k=parseInt(b["number-columns-spanned"],10)||0,I={s:{r:R,c:D},e:{r:R+A-1,c:D+k-1}},x.push(I)),b["number-columns-repeated"]&&(P=parseInt(b["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=Er(b["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(b.value);break;case"percentage":g.t="n",g.v=parseFloat(b.value);break;case"currency":g.t="n",g.v=parseFloat(b.value);break;case"date":g.t="d",g.v=sn(b["date-value"]),r.cellDates||(g.t="n",g.v=es(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=Iz(b["time-value"])/86400,r.cellDates&&(g.t="d",g.v=Qh(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(b.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",b["string-value"]!=null&&(_=qt(b["string-value"]),C=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(q=!1,g.t==="s"&&(g.v=_||"",C.length&&(g.R=C),q=T==0),L.Target&&(g.l=L),j.length>0&&(g.c=j,j=[]),_&&r.cellText!==!1&&(g.w=_),q&&(g.t="z",delete g.v),(!q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=R))for(var z=0;z<W;++z){if(P=parseInt(b["number-columns-repeated"]||"1",10),r.dense)for(v[R+z]||(v[R+z]=[]),v[R+z][D]=z==0?g:mn(g);--P>0;)v[R+z][D+P]=mn(g);else for(v[Dt({r:R+z,c:D})]=g;--P>0;)v[Dt({r:R+z,c:D+P})]=mn(g);w.e.c<=D&&(w.e.c=D)}P=parseInt(b["number-columns-repeated"]||"1",10),D+=P-1,P=0,g={},_="",C=[]}L={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(m[1]==="/"){if((i=s.pop())[0]!==m[3])throw"Bad state: "+i}else m[0].charAt(m[0].length-2)!=="/"&&s.push([m[3],!0]);break;case"annotation":if(m[1]==="/"){if((i=s.pop())[0]!==m[3])throw"Bad state: "+i;O.t=_,C.length&&(O.R=C),O.a=G,j.push(O)}else m[0].charAt(m[0].length-2)!=="/"&&s.push([m[3],!1]);G="",X=0,_="",T=0,C=[];break;case"creator":m[1]==="/"?G=n.slice(X,m.index):X=m.index+m[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(m[1]==="/"){if((i=s.pop())[0]!==m[3])throw"Bad state: "+i}else m[0].charAt(m[0].length-2)!=="/"&&s.push([m[3],!1]);_="",T=0,C=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(m[1]==="/"){if(y[o.name]=l,(i=s.pop())[0]!==m[3])throw"Bad state: "+i}else m[0].charAt(m[0].length-2)!=="/"&&(l="",o=bt(m[0],!1),s.push([m[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":a=bt(m[0],!1),l+=Gb[m[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":a=bt(m[0],!1),l+=Gb[m[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(m[0].slice(-2)==="/>")break;if(m[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,m.index);break}else c=m.index+m[0].length;break;case"named-range":a=bt(m[0],!1),Z=Xp(a["cell-range-address"]);var J={Name:a.name,Ref:Z[0]+"!"+Z[1]};pe&&(J.Sheet=h.length),H.Names.push(J);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(m[1]==="/"&&(!b||!b["string-value"])){var me=mee(n.slice(T,m.index));_=(_.length>0?_+`
`:"")+me[0]}else bt(m[0],!1),T=m.index+m[0].length;break;case"s":break;case"database-range":if(m[1]==="/")break;try{Z=Xp(bt(m[0])["target-range-address"]),f[Z[0]]["!autofilter"]={ref:Z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(m[1]!=="/"){if(L=bt(m[0],!1),!L.href)break;L.Target=qt(L.href),delete L.href,L.Target.charAt(0)=="#"&&L.Target.indexOf(".")>-1?(Z=Xp(L.Target.slice(1)),L.Target="#"+Z[0]+"!"+Z[1]):L.Target.match(/^\.\.[\\\/]/)&&(L.Target=L.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(m[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(m)}}var Y={Sheets:f,SheetNames:h,Workbook:H};return r.bookSheets&&delete Y.Sheets,Y}function Wb(t,e){e=e||{},Cs(t,"META-INF/manifest.xml")&&RK(Hr(t,"META-INF/manifest.xml"),e);var r=ms(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=SI(fr(r),e);return Cs(t,"meta.xml")&&(n.Props=L4(Hr(t,"meta.xml"))),n}function zb(t,e){return SI(t,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ex(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function sg(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):fr(Qo(t))}function ag(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function Kb(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function vee(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function od(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function en(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Nn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=od(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=od(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function bx(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function gee(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=od(t,n),i=Nn(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:en(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=Nn(o.data),c=en(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=en(i[3][0].data)>>>0>0),r.push(a)}return r}function xee(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=od(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[ag(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var u=ag(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function yee(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(xee(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return ag(e)}function Eee(t,e,r,n){var s=Ex(t),i=s.getUint32(4,!0),a=(n>1?12:8)+Kb(i&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);i&512&&(o=s.getUint32(a,!0),a+=4),a+=Kb(i&(n>1?12288:4096))*4,i&16&&(l=s.getUint32(a,!0),a+=4),i&32&&(c=s.getFloat64(a,!0),a+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(a,!0)*1e3),a+=8);var d;switch(t[2]){case 0:break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:e[l]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else if(l>-1)d={t:"s",v:e[l]};else if(!isNaN(c))d={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return d}function bee(t,e,r){var n=Ex(t),s=n.getUint32(8,!0),i=12,a=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);s&1&&(l=vee(t,i),i+=16),s&2&&(c=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=n.getUint32(i,!0),i+=4),s&16&&(a=n.getUint32(i,!0),i+=4);var d;switch(t[1]){case 0:break;case 2:d={t:"n",v:l};break;case 3:d={t:"s",v:e[o]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(a>-1)d={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:d={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return d}function _ee(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return Eee(t,e,r,t[0]);case 5:return bee(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Gi(t){var e=Nn(t);return od(e[1][0].data)}function qb(t,e){var r=Nn(e.data),n=en(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(a){var o=Nn(a.data),l=en(o[1][0].data)>>>0;switch(n){case 1:i[l]=sg(o[3][0].data);break;case 8:{var c=t[Gi(o[9][0].data)][0],u=Nn(c.data),d=t[Gi(u[1][0].data)][0],f=en(d.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var h=Nn(d.data);i[l]=h[3].map(function(v){return sg(v.data)}).join("")}break}}),i}function See(t,e){var r,n,s,i,a,o,l,c,u,d,f,h,v,m,g=Nn(t),b=en(g[1][0].data)>>>0,_=en(g[2][0].data)>>>0,T=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&en(g[8][0].data)>0||!1,C,R;if((i=(s=g[7])==null?void 0:s[0])!=null&&i.data&&e!=0)C=(o=(a=g[7])==null?void 0:a[0])==null?void 0:o.data,R=(c=(l=g[6])==null?void 0:l[0])==null?void 0:c.data;else if((d=(u=g[4])==null?void 0:u[0])!=null&&d.data&&e!=1)C=(h=(f=g[4])==null?void 0:f[0])==null?void 0:h.data,R=(m=(v=g[3])==null?void 0:v[0])==null?void 0:m.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var D=T?4:1,w=Ex(C),E=[],y=0;y<C.length/2;++y){var x=w.getUint16(y*2,!0);x<65535&&E.push([y,x])}if(E.length!=_)throw"Expected ".concat(_," cells, found ").concat(E.length);var I=[];for(y=0;y<E.length-1;++y)I[E[y][0]]=R.subarray(E[y][1]*D,E[y+1][1]*D);return E.length>=1&&(I[E[E.length-1][0]]=R.subarray(E[E.length-1][1]*D)),{R:b,cells:I}}function Tee(t,e){var r,n=Nn(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?en(n[7][0].data)>>>0>0?1:0:-1,i=bx(n[5],function(a){return See(a,s)});return{nrows:en(n[4][0].data)>>>0,data:i.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function Aee(t,e,r){var n,s=Nn(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(en(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(en(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Kt(i);var a=Nn(s[4][0].data),o=qb(t,t[Gi(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?qb(t,t[Gi(a[17][0].data)][0]):[],c=Nn(a[3][0].data),u=0;c[1].forEach(function(d){var f=Nn(d.data),h=t[Gi(f[2][0].data)][0],v=en(h.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var m=Tee(t,h);m.data.forEach(function(g,b){g.forEach(function(_,T){var C=Dt({r:u+b,c:T}),R=_ee(_,o,l);R&&(r[C]=R)})}),u+=m.nrows})}function wee(t,e){var r=Nn(e.data),n={"!ref":"A1"},s=t[Gi(r[2][0].data)],i=en(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Aee(t,s[0],n),n}function Cee(t,e){var r,n=Nn(e.data),s={name:(r=n[1])!=null&&r[0]?sg(n[1][0].data):"",sheets:[]},i=bx(n[2],Gi);return i.forEach(function(a){t[a].forEach(function(o){var l=en(o.meta[1][0].data);l==6e3&&s.sheets.push(wee(t,o))})}),s}function Iee(t,e){var r=Tx(),n=Nn(e.data),s=bx(n[1],Gi);if(s.forEach(function(i){t[i].forEach(function(a){var o=en(a.meta[1][0].data);if(o==2){var l=Cee(t,a);l.sheets.forEach(function(c,u){Ax(r,c,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Qp(t){var e,r,n,s,i={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=yee(l.content)}catch(d){return console.log("?? "+l.content.length+" "+(d.message||d))}var u;try{u=gee(c)}catch(d){return console.log("## "+(d.message||d))}u.forEach(function(d){i[d.id]=d.messages,a.push(d.id)})}}),!a.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&en(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||a.forEach(function(l){i[l].forEach(function(c){var u=en(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Iee(i,o)}function kee(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function _x(t){kee([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function Dee(t){return Cl.WS.indexOf(t)>-1?"sheet":t==Cl.CS?"chart":t==Cl.DS?"dialog":t==Cl.MS?"macro":t&&t.length?t:"sheet"}function Ree(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,Dee(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Fee(t,e,r,n,s,i,a,o,l,c,u,d){try{i[n]=_u(ms(t,r,!0),e);var f=Hr(t,e),h;switch(o){case"sheet":h=MZ(f,e,s,l,i[n],c,u,d);break;case"chart":if(h=UZ(f,e,s,l,i[n],c,u,d),!h||!h["!drawel"])break;var v=Qc(h["!drawel"].Target,e),m=Zv(v),g=BY(ms(t,v,!0),_u(ms(t,m,!0),v)),b=Qc(g,v),_=Zv(b);h=bZ(ms(t,b,!0),b,l,_u(ms(t,_,!0),b),c,h);break;case"macro":h=VZ(f,e,s,l,i[n],c,u,d);break;case"dialog":h=$Z(f,e,s,l,i[n],c,u,d);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=h;var T=[];i&&i[n]&&Sa(i[n]).forEach(function(C){var R="";if(i[n][C].Type==Cl.CMNT){R=Qc(i[n][C].Target,e);var D=WZ(Hr(t,R,!0),R,l);if(!D||!D.length)return;Pb(h,D,!1)}i[n][C].Type==Cl.TCMNT&&(R=Qc(i[n][C].Target,e),T=T.concat(UY(Hr(t,R,!0),l)))}),T&&T.length&&Pb(h,T,!0,l.people||[])}catch(C){if(l.WTF)throw C}}function Ts(t){return t.charAt(0)=="/"?t.slice(1):t}function Pee(t,e){if(o4(),e=e||{},_x(e),Cs(t,"META-INF/manifest.xml")||Cs(t,"objectdata.xml"))return Wb(t,e);if(Cs(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Qp<"u"){if(t.FileIndex)return Qp(t);var r=zt.utils.cfb_new();return ib(t).forEach(function(U){Oz(r,U,Pz(t,U))}),Qp(r)}throw new Error("Unsupported NUMBERS file")}if(!Cs(t,"[Content_Types].xml"))throw Cs(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Cs(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=ib(t),s=kK(ms(t,"[Content_Types].xml")),i=!1,a,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Hr(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Hr(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(Au=[],s.sst)try{Au=GZ(Hr(t,Ts(s.sst)),s.sst,e)}catch(U){if(e.WTF)throw U}e.cellStyles&&s.themes.length&&(l=jZ(ms(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=HZ(Hr(t,Ts(s.style)),s.style,l,e))}s.links.map(function(U){try{var W=_u(ms(t,Zv(Ts(U))),U);return KZ(Hr(t,Ts(U)),W,U,e)}catch{}});var u=BZ(Hr(t,Ts(s.workbooks[0])),s.workbooks[0],e),d={},f="";s.coreprops.length&&(f=Hr(t,Ts(s.coreprops[0]),!0),f&&(d=L4(f)),s.extprops.length!==0&&(f=Hr(t,Ts(s.extprops[0]),!0),f&&OK(f,d,e)));var h={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(f=ms(t,Ts(s.custprops[0]),!0),f&&(h=LK(f,e)));var v={};if((e.bookSheets||e.bookProps)&&(u.Sheets?a=u.Sheets.map(function(W){return W.name}):d.Worksheets&&d.SheetNames.length>0&&(a=d.SheetNames),e.bookProps&&(v.Props=d,v.Custprops=h),e.bookSheets&&typeof a<"u"&&(v.SheetNames=a),e.bookSheets?v.SheetNames:e.bookProps))return v;a={};var m={};e.bookDeps&&s.calcchain&&(m=zZ(Hr(t,Ts(s.calcchain)),s.calcchain));var g=0,b={},_,T;{var C=u.Sheets;d.Worksheets=C.length,d.SheetNames=[];for(var R=0;R!=C.length;++R)d.SheetNames[R]=C[R].name}var D=i?"bin":"xml",w=s.workbooks[0].lastIndexOf("/"),E=(s.workbooks[0].slice(0,w+1)+"_rels/"+s.workbooks[0].slice(w+1)+".rels").replace(/^\//,"");Cs(t,E)||(E="xl/_rels/workbook."+D+".rels");var y=_u(ms(t,E,!0),E.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=qZ(Hr(t,Ts(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=VY(Hr(t,Ts(s.people[0])),e)),y&&(y=Ree(y,u.Sheets));var x=Hr(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=d.Worksheets;++g){var I="sheet";if(y&&y[g]?(_="xl/"+y[g][1].replace(/[\/]?xl\//,""),Cs(t,_)||(_=y[g][1]),Cs(t,_)||(_=E.replace(/_rels\/.*$/,"")+y[g][1]),I=y[g][2]):(_="xl/worksheets/sheet"+(g+1-x)+"."+D,_=_.replace(/sheet0\./,"sheet.")),T=_.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(d.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var A=!1,k=0;k!=e.sheets.length;++k)typeof e.sheets[k]=="number"&&e.sheets[k]==g&&(A=1),typeof e.sheets[k]=="string"&&e.sheets[k].toLowerCase()==d.SheetNames[g].toLowerCase()&&(A=1);if(!A)continue e}}Fee(t,_,T,d.SheetNames[g],g,b,a,I,e,u,l,c)}return v={Directory:s,Workbook:u,Props:d,Custprops:h,Deps:m,Sheets:a,SheetNames:d.SheetNames,Strings:Au,Styles:c,Themes:l,SSF:mn(Ot)},e&&e.bookFiles&&(t.files?(v.keys=n,v.files=t.files):(v.keys=[],v.files={},t.FullPaths.forEach(function(U,W){U=U.replace(/^Root Entry[\/]/,""),v.keys.push(U),v.files[U]=t.FileIndex[W]}))),e&&e.bookVBA&&(s.vba.length>0?v.vbaraw=Hr(t,Ts(s.vba[0]),!0):s.defaults&&s.defaults.bin===GY&&(v.vbaraw=Hr(t,"xl/vbaProject.bin",!0))),v}function Oee(t,e){var r=e||{},n="Workbook",s=zt.find(t,n);try{if(n="/!DataSpaces/Version",s=zt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(wX(s.content),n="/!DataSpaces/DataSpaceMap",s=zt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=IX(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=zt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=kX(s.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=zt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);RX(s.content)}catch{}if(n="/EncryptionInfo",s=zt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=FX(s.content);if(n="/EncryptedPackage",s=zt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Sx(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=_s(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Nee(t,e){return zt.find(t,"EncryptedPackage")?Oee(t,e):EI(t,e)}function Lee(t,e){var r,n=t,s=e||{};return s.type||(s.type=jt&&Buffer.isBuffer(t)?"buffer":"base64"),r=h4(n,s),Pee(r,s)}function TI(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return rg(t.slice(r),e);default:break e}return sd.to_workbook(t,e)}function Bee(t,e){var r="",n=Sx(t,e);switch(e.type){case"base64":r=_s(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Vo(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=fr(r)),e.type="binary",TI(r,e)}function Mee(t,e){var r=t;return e.type=="base64"&&(r=_s(r)),r=ed.utils.decode(1200,r.slice(2),"str"),e.type="binary",TI(r,e)}function Uee(t){return t.match(/[^\x00-\x7F]/)?Jc(t):t}function Jp(t,e,r,n){return n?(r.type="string",sd.to_workbook(t,r)):sd.to_workbook(e,r)}function q0(t,e){XC();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return q0(new Uint8Array(t),(r=mn(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Wl={},r.dateNF&&(Wl.dateNF=r.dateNF),r.type||(r.type=jt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=jt?"buffer":"binary",n=wz(t),typeof Uint8Array<"u"&&!jt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=Uee(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=mn(r),r.type="array",q0(tx(n),r)}switch((s=Sx(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Nee(zt.read(n,r),r);break;case 9:if(s[1]<=8)return EI(n,r);break;case 60:return rg(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return hX(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return dX.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Lee(n,r):Jp(t,n,r,i);case 239:return s[3]===60?rg(n,r):Jp(t,n,r,i);case 255:if(s[1]===254)return Mee(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Tu.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Tu.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Fb.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return GX.to_workbook(n,r);break;case 10:case 13:case 32:return Bee(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return cX.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?Fb.to_workbook(n,r):Jp(t,n,r,i)}function Vee(t,e,r,n,s,i,a,o){var l=vn(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,f=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!a||t[r])for(var h=e.s.c;h<=e.e.c;++h){var v=a?t[r][h]:t[n[h]+l];if(v===void 0||v.t===void 0){if(c===void 0)continue;i[h]!=null&&(f[i[h]]=c);continue}var m=v.v;switch(v.t){case"z":if(m==null)break;continue;case"e":m=m==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[h]!=null){if(m==null)if(v.t=="e"&&m===null)f[i[h]]=null;else if(c!==void 0)f[i[h]]=c;else if(u&&m===null)f[i[h]]=null;else continue;else f[i[h]]=u&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?m:ai(v,m,o);m!=null&&(d=!1)}}return{row:f,isempty:d}}function ig(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=Or(u);break;case"number":l=Or(t["!ref"]),l.s.r=u;break;default:l=u}n>0&&(s=0);var d=vn(l.s.r),f=[],h=[],v=0,m=0,g=Array.isArray(t),b=l.s.r,_=0,T={};g&&!t[b]&&(t[b]=[]);var C=c.skipHidden&&t["!cols"]||[],R=c.skipHidden&&t["!rows"]||[];for(_=l.s.c;_<=l.e.c;++_)if(!(C[_]||{}).hidden)switch(f[_]=Yr(_),r=g?t[b][_]:t[f[_]+d],n){case 1:i[_]=_-l.s.c;break;case 2:i[_]=f[_];break;case 3:i[_]=c.header[_-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=ai(r,null,c),m=T[a]||0,!m)T[a]=1;else{do o=a+"_"+m++;while(T[o]);T[a]=m,T[o]=1}i[_]=o}for(b=l.s.r+s;b<=l.e.r;++b)if(!(R[b]||{}).hidden){var D=Vee(t,l,b,f,n,i,g,c);(D.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(h[v++]=D.row)}return h.length=v,h}var Xb=/"/g;function $ee(t,e,r,n,s,i,a,o){for(var l=!0,c=[],u="",d=vn(r),f=e.s.c;f<=e.e.c;++f)if(n[f]){var h=o.dense?(t[r]||[])[f]:t[n[f]+d];if(h==null)u="";else if(h.v!=null){l=!1,u=""+(o.rawNumbers&&h.t=="n"?h.v:ai(h,null,o));for(var v=0,m=0;v!==u.length;++v)if((m=u.charCodeAt(v))===s||m===i||m===34||o.forceQuotes){u='"'+u.replace(Xb,'""')+'"';break}u=="ID"&&(u='"ID"')}else h.f!=null&&!h.F?(l=!1,u="="+h.f,u.indexOf(",")>=0&&(u='"'+u.replace(Xb,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(a)}function AI(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Or(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),u="",d=[];n.dense=Array.isArray(t);for(var f=n.skipHidden&&t["!cols"]||[],h=n.skipHidden&&t["!rows"]||[],v=s.s.c;v<=s.e.c;++v)(f[v]||{}).hidden||(d[v]=Yr(v));for(var m=0,g=s.s.r;g<=s.e.r;++g)(h[g]||{}).hidden||(u=$ee(t,s,g,d,a,l,i,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((m++?o:"")+u)));return delete n.dense,r.join("")}function Hee(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=AI(t,e);return r}function jee(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Or(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=Yr(o);for(var u=s.s.r;u<=s.e.r;++u)for(i=vn(u),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[u]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function wI(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Yn(n.origin):n.origin;a=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var d=Or(i["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),a==-1&&(a=d.e.r+1,u.e.r=a+e.length-1+s)}else a==-1&&(a=0,u.e.r=e.length-1+s);var f=n.header||[],h=0;e.forEach(function(m,g){Sa(m).forEach(function(b){(h=f.indexOf(b))==-1&&(f[h=f.length]=b);var _=m[b],T="z",C="",R=Dt({c:o+h,r:a+g+s});c=ld(i,R),_&&typeof _=="object"&&!(_ instanceof Date)?i[R]=_:(typeof _=="number"?T="n":typeof _=="boolean"?T="b":typeof _=="string"?T="s":_ instanceof Date?(T="d",n.cellDates||(T="n",_=es(_)),C=n.dateNF||Ot[14]):_===null&&n.nullError&&(T="e",_=0),c?(c.t=T,c.v=_,delete c.w,delete c.R,C&&(c.z=C)):i[R]=c={t:T,v:_},C&&(c.z=C))})}),u.e.c=Math.max(u.e.c,o+f.length-1);var v=vn(a);if(s)for(h=0;h<f.length;++h)i[Yr(h+o)+v]={t:"s",v:f[h]};return i["!ref"]=Kt(u),i}function Gee(t,e){return wI(null,t,e)}function ld(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Yn(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?ld(t,Dt(e)):ld(t,Dt({r:e,c:r||0}))}function Wee(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Tx(){return{SheetNames:[],Sheets:{}}}function Ax(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(kZ(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function zee(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Wee(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Kee(t,e){return t.z=e,t}function CI(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function qee(t,e,r){return CI(t,"#"+e,r)}function Xee(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Yee(t,e,r,n){for(var s=typeof e!="string"?e:Or(e),i=typeof e=="string"?e:Kt(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=ld(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Qee={encode_col:Yr,encode_row:vn,encode_cell:Dt,encode_range:Kt,decode_col:ux,decode_row:cx,split_cell:lK,decode_cell:Yn,decode_range:xc,format_cell:ai,sheet_add_aoa:R4,sheet_add_json:wI,sheet_add_dom:bI,aoa_to_sheet:yc,json_to_sheet:Gee,table_to_sheet:_I,table_to_book:hee,sheet_to_csv:AI,sheet_to_txt:Hee,sheet_to_json:ig,sheet_to_html:fee,sheet_to_formulae:jee,sheet_to_row_object_array:ig,sheet_get_cell:ld,book_new:Tx,book_append_sheet:Ax,book_set_sheet_visibility:zee,cell_set_number_format:Kee,cell_set_hyperlink:CI,cell_set_internal_link:qee,cell_add_comment:Xee,sheet_set_array_formula:Yee,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Jee={class:"admin-time-table"},Zee={class:"header"},ete={class:"header-actions"},tte=["disabled"],rte={class:"import-section"},nte={key:0,class:"import-preview"},ste={class:"import-options"},ate={class:"import-option-group"},ite=["disabled"],ote=["value"],lte={class:"import-option-group"},cte=["disabled"],ute={class:"import-actions"},dte=["disabled"],fte={class:"content"},hte={key:0,class:"loading"},pte={key:1,class:"time-tables-container"},mte={key:0,class:"empty-state"},vte={key:1,class:"time-tables-list"},gte={class:"time-table-header"},xte={class:"time-table-info"},yte={class:"time-table-days"},Ete={class:"time-table-actions"},bte=["onClick"],_te=["onClick"],Ste={class:"time-table-schedule"},Tte={class:"schedule-item-info"},Ate={class:"item-name"},wte={class:"item-time"},Cte={class:"schedule-item-type"},Ite={class:"dialog-header"},kte={class:"dialog-content"},Dte={class:"form-group"},Rte={class:"form-group"},Fte={class:"days-checkboxes"},Pte=["value"],Ote={class:"form-group"},Nte={class:"schedule-items"},Lte={class:"item-row"},Bte=["onUpdate:modelValue"],Mte=["onUpdate:modelValue"],Ute=["onUpdate:modelValue"],Vte=["onUpdate:modelValue"],$te=["onClick"],Hte={__name:"AdminTimeTable",setup(t){const{saveAppSettings:e}=Ia(),r=he(!0),n=he(!1),s=he([]),i=he(!1),a=he(-1),o=he({name:"",days:[],schedule:[]}),l=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],c=he(null),u=he([]),d=he([]),f=he("overwrite"),h=he(""),v=he(""),m=Ve(()=>f.value==="overwrite"?h.value!=="":v.value.trim()!==""),g=()=>{const B=Tr(o.value.name,{trim:!0,maxLength:100,removeDangerous:!0}),H=nn(B);if(!H.isSafe)return alert(`Security threat detected in time table name: ${H.threats.join(", ")}`),!1;if(o.value.name=B,!o.value.name.trim())return alert("Please enter a time table name"),!1;if(o.value.days.length===0)return alert("Please select at least one day"),!1;if(o.value.schedule.length===0)return alert("Please add at least one schedule item"),!1;for(let L=0;L<o.value.schedule.length;L++){const Z=o.value.schedule[L],j=Tr(Z.name,{trim:!0,maxLength:50,removeDangerous:!0}),O=nn(j);if(!O.isSafe)return alert(`Security threat detected in schedule item ${L+1}: ${O.threats.join(", ")}`),!1;if(Z.name=j,!Z.name.trim())return alert(`Please enter a name for schedule item ${L+1}`),!1;if(!Z.startTime||!Z.endTime)return alert(`Please enter start and end times for ${Z.name}`),!1;if(Z.startTime>=Z.endTime)return alert(`${Z.name}: Start time must be before end time`),!1}return!0},b=B=>{const H=Tr(B,{trim:!0,maxLength:100,removeDangerous:!0}),L=nn(H);return L.isSafe?H:(alert(`Security threat detected in import name: ${L.threats.join(", ")}`),null)};async function _(){try{console.log("Loading time tables..."),r.value=!0;const B=await Jr(vt(yt,"app_settings","global"));if(B.exists()){const H=B.data();s.value=H.timeTables||[],console.log("Loaded time tables:",s.value)}else s.value=[],console.log("No time tables found, starting with empty array");r.value=!1}catch(B){console.error("Error loading time tables:",B),r.value=!1}}function T(){a.value=-1,o.value={name:"",days:[],schedule:[]},i.value=!0}function C(B){a.value=B,o.value=JSON.parse(JSON.stringify(s.value[B])),i.value=!0}function R(B){confirm("Are you sure you want to delete this time table?")&&s.value.splice(B,1)}function D(){o.value.schedule.push({name:"",type:"period",startTime:"",endTime:""})}function w(B){o.value.schedule.splice(B,1)}function E(){if(!g())return;if(!xs("saveTimeTable",10,6e4).allowed){alert("Too many save requests. Please wait before saving again.");return}a.value===-1?s.value.push(JSON.parse(JSON.stringify(o.value))):s.value[a.value]=JSON.parse(JSON.stringify(o.value)),y()}function y(){i.value=!1,a.value=-1,o.value={name:"",days:[],schedule:[]}}async function x(){try{if(!xs("saveAllTimeTables",5,3e5).allowed){alert("Too many save all requests. Please wait before saving again.");return}n.value=!0,console.log("Saving time tables:",s.value);const H=await Jr(vt(yt,"app_settings","global")),Z={...H.exists()?H.data():{},timeTables:s.value};await e(Z),n.value=!1,console.log("Time tables saved successfully")}catch(B){console.error("Error saving time tables:",B),n.value=!1}}function I(B){return B.length===0?"No days selected":B.length===7?"Every day":B.length===5&&B.includes("monday")&&B.includes("friday")?"Weekdays":B.map(H=>{const L=l.find(Z=>Z.value===H);return L?L.label:H}).join(", ")}function A(B){if(!B)return"";const[H,L]=B.split(":"),Z=parseInt(H),j=Z>=12?"PM":"AM";return`${Z===0?12:Z>12?Z-12:Z}:${L} ${j}`}function k(){c.value&&c.value.click()}function U(B){const H=B.target.files[0];if(!H)return;const L=Pd(H,{allowedTypes:["csv","excel"],maxSize:5*1024*1024,fieldName:"Time Table Import File"});if(!L.isValid){alert(L.error),B.target.value="";return}const Z=nn(H.name);if(!Z.isSafe){alert(`File name contains potentially dangerous content: ${Z.threats.join(", ")}`),B.target.value="";return}const j=new FileReader;j.onload=O=>{try{let G=O.target.result,X;H.name.endsWith(".csv")?X=q0(G,{type:"binary"}):X=q0(G,{type:"binary"});const q=X.SheetNames[0],pe=X.Sheets[q],de=Qee.sheet_to_json(pe,{defval:""}).map(z=>{const J={};return Object.entries(z).forEach(([me,Y])=>{const K=Tr(me,{trim:!0,maxLength:50,removeDangerous:!0}),ee=Tr(String(Y),{trim:!0,maxLength:100,removeDangerous:!0});J[K]=ee}),J});u.value=de,d.value=de.length?Object.keys(de[0]):[]}catch(G){alert("Error parsing file. Please check the file format and try again."),console.error("File parsing error:",G)}},j.readAsBinaryString(H)}function W(){try{if(!xs("importTimeTable",3,3e5).allowed){alert("Too many import requests. Please wait before importing again.");return}const H=u.value.map(L=>{const Z=L.name||L.Name||L.period||L.Period||L.item||L.Item||"Unknown",j=L.startTime||L["Start Time"]||L.start||L.Start||"08:00",O=L.endTime||L["End Time"]||L.end||L.End||"08:55",G=Tr(Z,{trim:!0,maxLength:50,removeDangerous:!0}),X=nn(G);if(!X.isSafe)return console.warn(`Security threat detected in imported item: ${X.threats.join(", ")}`),null;let q="period";const pe=L.type||L.Type||"",ie=G.toLowerCase();return pe.toLowerCase().includes("lunch")||ie.includes("lunch")?q="lunch":pe.toLowerCase().includes("break")||ie.includes("break")?q="break":(pe.toLowerCase().includes("other")||ie.includes("other"))&&(q="other"),{name:G,type:q,startTime:j,endTime:O}}).filter(L=>L&&L.name&&L.name!=="Unknown");if(H.length===0){alert("No valid schedule items found in the imported data. Please check your file format.");return}if(f.value==="overwrite"){if(h.value===""){alert("Please select a time table to overwrite");return}const L=parseInt(h.value);s.value[L]={...s.value[L],schedule:H}}else{const L=b(v.value);if(!L)return;const Z={name:L,days:["monday","tuesday","wednesday","thursday","friday"],schedule:H};s.value.push(Z)}u.value=[],d.value=[],f.value="overwrite",h.value="",v.value="",alert("Time table imported successfully!")}catch(B){console.error("Error importing time table:",B),alert("Error importing time table. Please check your file format and try again.")}}function P(){u.value=[],d.value=[],f.value="overwrite",h.value="",v.value=""}return Qt(_),(B,H)=>(N(),M("div",Jee,[p("div",Zee,[H[7]||(H[7]=p("h1",null,"Time Table Management",-1)),p("div",ete,[p("button",{onClick:x,class:"btn btn-primary",disabled:n.value},oe(n.value?"Saving...":"Save Time Tables"),9,tte),p("button",{onClick:T,class:"btn btn-secondary"}," Add Time Table ")])]),p("div",rte,[p("button",{onClick:k,class:"btn btn-secondary"},"Import CSV/XLSX"),p("input",{ref_key:"fileInput",ref:c,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:U},null,544),H[8]||(H[8]=p("div",{class:"import-note"}," You can export from Google Sheets or Excel as CSV, or upload your Excel file directly. ",-1))]),u.value.length?(N(),M("div",nte,[H[13]||(H[13]=p("h3",null,"Preview Imported Time Table",-1)),p("table",null,[p("thead",null,[p("tr",null,[(N(!0),M(Pe,null,We(d.value,L=>(N(),M("th",{key:L},oe(L),1))),128))])]),p("tbody",null,[(N(!0),M(Pe,null,We(u.value,(L,Z)=>(N(),M("tr",{key:Z},[(N(!0),M(Pe,null,We(d.value,j=>(N(),M("td",{key:j},oe(L[j]),1))),128))]))),128))])]),p("div",ste,[H[12]||(H[12]=p("h4",null,"Import Options",-1)),p("div",ate,[p("label",null,[Me(p("input",{type:"radio","onUpdate:modelValue":H[0]||(H[0]=L=>f.value=L),value:"overwrite"},null,512),[[kn,f.value]]),H[9]||(H[9]=Ne(" Overwrite existing time table: "))]),Me(p("select",{"onUpdate:modelValue":H[1]||(H[1]=L=>h.value=L),disabled:f.value!=="overwrite",class:"form-select"},[H[10]||(H[10]=p("option",{value:""},"Select a time table...",-1)),(N(!0),M(Pe,null,We(s.value,(L,Z)=>(N(),M("option",{key:Z,value:Z},oe(L.name),9,ote))),128))],8,ite),[[vr,h.value]])]),p("div",lte,[p("label",null,[Me(p("input",{type:"radio","onUpdate:modelValue":H[2]||(H[2]=L=>f.value=L),value:"create"},null,512),[[kn,f.value]]),H[11]||(H[11]=Ne(" Create new time table: "))]),Me(p("input",{"onUpdate:modelValue":H[3]||(H[3]=L=>v.value=L),type:"text",placeholder:"Enter time table name...",disabled:f.value!=="create",class:"form-input"},null,8,cte),[[At,v.value]])])]),p("div",ute,[p("button",{onClick:W,class:"btn btn-primary",disabled:!m.value},oe(f.value==="overwrite"?"Overwrite Time Table":"Create New Time Table"),9,dte),p("button",{onClick:P,class:"btn btn-secondary"},"Cancel")])])):Re("",!0),p("div",fte,[r.value?(N(),M("div",hte," Loading time tables... ")):(N(),M("div",pte,[s.value.length===0?(N(),M("div",mte,[H[14]||(H[14]=p("h3",null,"No Time Tables Created",-1)),H[15]||(H[15]=p("p",null,"Create your first time table to get started.",-1)),p("button",{onClick:T,class:"btn btn-primary"},"Create Time Table")])):(N(),M("div",vte,[(N(!0),M(Pe,null,We(s.value,(L,Z)=>(N(),M("div",{key:Z,class:"time-table-card"},[p("div",gte,[p("div",xte,[p("h3",null,oe(L.name),1),p("p",yte,oe(I(L.days)),1)]),p("div",Ete,[p("button",{onClick:j=>C(Z),class:"btn btn-small btn-secondary"}," Edit ",8,bte),p("button",{onClick:j=>R(Z),class:"btn btn-small btn-danger"}," Delete ",8,_te)])]),p("div",Ste,[(N(!0),M(Pe,null,We(L.schedule,(j,O)=>(N(),M("div",{key:O,class:"schedule-item"},[p("div",Tte,[p("span",Ate,oe(j.name),1),p("span",wte,oe(A(j.startTime))+" - "+oe(A(j.endTime)),1)]),p("div",Cte,[p("span",{class:at(["type-badge",j.type])},oe(j.type),3)])]))),128))])]))),128))]))]))]),i.value?(N(),M("div",{key:1,class:"edit-dialog-overlay",onClick:y},[p("div",{class:"edit-dialog",onClick:H[6]||(H[6]=bs(()=>{},["stop"]))},[p("div",Ite,[p("h2",null,oe(a.value===-1?"Create Time Table":"Edit Time Table"),1),p("button",{onClick:y,class:"btn-close"},"")]),p("div",kte,[p("div",Dte,[H[16]||(H[16]=p("label",{for:"timeTableName"},"Time Table Name",-1)),Me(p("input",{id:"timeTableName","onUpdate:modelValue":H[4]||(H[4]=L=>o.value.name=L),type:"text",placeholder:"e.g., Regular Schedule, Rally Day, Minimum Day",class:"form-input"},null,512),[[At,o.value.name]])]),p("div",Rte,[H[17]||(H[17]=p("label",null,"Days This Schedule Applies",-1)),p("div",Fte,[(N(),M(Pe,null,We(l,L=>p("label",{key:L.value,class:"day-checkbox"},[Me(p("input",{type:"checkbox",value:L.value,"onUpdate:modelValue":H[5]||(H[5]=Z=>o.value.days=Z)},null,8,Pte),[[Et,o.value.days]]),Ne(" "+oe(L.label),1)])),64))])]),p("div",Ote,[H[20]||(H[20]=p("label",null,"Schedule Items",-1)),p("div",Nte,[(N(!0),M(Pe,null,We(o.value.schedule,(L,Z)=>(N(),M("div",{key:Z,class:"schedule-item-edit"},[p("div",Lte,[Me(p("input",{"onUpdate:modelValue":j=>L.name=j,type:"text",placeholder:"Period 1, Lunch, Break, etc.",class:"form-input item-name-input"},null,8,Bte),[[At,L.name]]),Me(p("select",{"onUpdate:modelValue":j=>L.type=j,class:"form-select item-type-select"},H[18]||(H[18]=[p("option",{value:"period"},"Period",-1),p("option",{value:"break"},"Break",-1),p("option",{value:"lunch"},"Lunch",-1),p("option",{value:"other"},"Other",-1)]),8,Mte),[[vr,L.type]]),Me(p("input",{"onUpdate:modelValue":j=>L.startTime=j,type:"time",class:"form-input time-input"},null,8,Ute),[[At,L.startTime]]),H[19]||(H[19]=p("span",{class:"time-separator"},"to",-1)),Me(p("input",{"onUpdate:modelValue":j=>L.endTime=j,type:"time",class:"form-input time-input"},null,8,Vte),[[At,L.endTime]]),p("button",{onClick:j=>w(Z),class:"btn btn-small btn-danger"}," Delete ",8,$te)])]))),128)),p("button",{onClick:D,class:"btn btn-secondary btn-add-item"}," Add Schedule Item ")])])]),p("div",{class:"dialog-actions"},[p("button",{onClick:y,class:"btn btn-secondary"},"Cancel"),p("button",{onClick:E,class:"btn btn-primary"},"Save Time Table")])])])):Re("",!0)]))}},II=_t(Hte,[["__scopeId","data-v-168ca22a"]]);function jte(){const t=he({}),e=he(!1);async function r(){e.value=!0;try{const d=await Zr(sr(yt,"aideSchedules")),f={};d.forEach(h=>{f[h.id]=h.data()}),t.value=f}catch(d){console.error("Error loading aide schedules:",d),t.value={}}finally{e.value=!1}}async function n(d){e.value=!0;try{const f=await Jr(vt(yt,"aideSchedules",d));f.exists()?t.value[d]=f.data():t.value[d]={schedule:{},directAssignment:[]}}catch(f){console.error("Error loading aide schedule:",f),t.value[d]={schedule:{},directAssignment:[]}}finally{e.value=!1}}async function s(d,f,h=!0){try{const v=JSON.parse(JSON.stringify(f));h?await gr(vt(yt,"aideSchedules",d),v,{merge:!0}):await gr(vt(yt,"aideSchedules",d),v),t.value[d]=v}catch(v){throw console.error("Error saving aide schedule:",v),v}}async function i(){try{const d=Object.entries(t.value);for(const[f,h]of d){const v=JSON.parse(JSON.stringify(h));await gr(vt(yt,"aideSchedules",f),v,{merge:!0})}}catch(d){throw console.error("Error saving all aide schedules:",d),d}}function a(d,f){const h=[];return Object.entries(t.value).forEach(([v,m])=>{m.schedule&&m.schedule[f]&&(Array.isArray(m.schedule[f])?m.schedule[f]:[m.schedule[f]]).includes(d)&&h.push(v)}),h}function o(d){var h;const f=(h=t.value[d])==null?void 0:h.directAssignment;return Array.isArray(f)?f.length>0?f[0]:null:f||null}function l(d){return Object.keys(t.value).find(h=>{var m;const v=(m=t.value[h])==null?void 0:m.directAssignment;return Array.isArray(v)?v.includes(d):v===d})||null}function c(d,f,h){const v=[],m=t.value[d];return m&&((Array.isArray(m.directAssignment)?m.directAssignment:m.directAssignment?[m.directAssignment]:[]).forEach(b=>{if(b){const _=f.find(T=>T.id===b);_&&v.push({..._,assignmentType:"direct"})}}),Object.entries(m.schedule||{}).forEach(([b,_])=>{_&&(Array.isArray(_)?_:[_]).forEach(C=>{C&&f.forEach(R=>{if(R.schedule&&R.schedule[b]===C){const D=v.findIndex(w=>w.id===R.id);D===-1?v.push({...R,assignmentType:"class",period:b,teacherId:C}):(v[D].assignmentType="both",v[D].period=b,v[D].teacherId=C)}})})})),v}function u(d,f,h,v){if(!d||!f||!h||!v)return!1;const m=h.find(C=>C.id===f);if(!m)return!1;const g=t.value[d];if(!g)return!1;if((Array.isArray(g.directAssignment)?g.directAssignment:g.directAssignment?[g.directAssignment]:[]).includes(f))return!0;if(!m.schedule)return!1;const _=g.schedule||{};return Object.entries(m.schedule).some(([C,R])=>{const D=_[C];return D?(Array.isArray(D)?D:[D]).includes(R):!1})}return{aideSchedule:Ve(()=>t.value),loading:Ve(()=>e.value),loadAideSchedules:r,loadAideSchedule:n,saveAideSchedule:s,saveAllAideSchedules:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}var Gte={exports:{}};const Wte=J1($R);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Yb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ta(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yb(Object(r),!0).forEach(function(n){zte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yb(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jf(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jf=function(e){return typeof e}:Jf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jf(t)}function zte(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ps(){return Ps=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ps.apply(this,arguments)}function Kte(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function qte(t,e){if(t==null)return{};var r=Kte(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xte(t){return Yte(t)||Qte(t)||Jte(t)||Zte()}function Yte(t){if(Array.isArray(t))return og(t)}function Qte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jte(t,e){if(t){if(typeof t=="string")return og(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return og(t,e)}}function og(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ere="1.14.0";function qa(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ci=qa(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Vd=qa(/Edge/i),Qb=qa(/firefox/i),Iu=qa(/safari/i)&&!qa(/chrome/i)&&!qa(/android/i),kI=qa(/iP(ad|od|hone)/i),tre=qa(/chrome/i)&&qa(/android/i),DI={capture:!1,passive:!1};function Mt(t,e,r){t.addEventListener(e,r,!ci&&DI)}function Bt(t,e,r){t.removeEventListener(e,r,!ci&&DI)}function X0(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function rre(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function js(t,e,r,n){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&X0(t,e):X0(t,e))||n&&t===r)return t;if(t===r)break}while(t=rre(t))}return null}var Jb=/\s+/g;function Sr(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(Jb," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(Jb," ")}}function lt(t,e,r){var n=t&&t.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=r+(typeof r=="string"?"":"px")}}function Do(t,e){var r="";if(typeof t=="string")r=t;else do{var n=lt(t,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function RI(t,e,r){if(t){var n=t.getElementsByTagName(e),s=0,i=n.length;if(r)for(;s<i;s++)r(n[s],s);return n}return[]}function xa(){var t=document.scrollingElement;return t||document.documentElement}function br(t,e,r,n,s){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,o,l,c,u,d;if(t!==window&&t.parentNode&&t!==xa()?(i=t.getBoundingClientRect(),a=i.top,o=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||r)&&t!==window&&(s=s||t.parentNode,!ci))do if(s&&s.getBoundingClientRect&&(lt(s,"transform")!=="none"||r&&lt(s,"position")!=="static")){var f=s.getBoundingClientRect();a-=f.top+parseInt(lt(s,"border-top-width")),o-=f.left+parseInt(lt(s,"border-left-width")),l=a+i.height,c=o+i.width;break}while(s=s.parentNode);if(n&&t!==window){var h=Do(s||t),v=h&&h.a,m=h&&h.d;h&&(a/=m,o/=v,d/=v,u/=m,l=a+u,c=o+d)}return{top:a,left:o,bottom:l,right:c,width:d,height:u}}}function Zb(t,e,r){for(var n=Bi(t,!0),s=br(t)[e];n;){var i=br(n)[r],a=void 0;if(a=s>=i,!a)return n;if(n===xa())break;n=Bi(n,!1)}return!1}function cc(t,e,r,n){for(var s=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==xt.ghost&&(n||a[i]!==xt.dragged)&&js(a[i],r.draggable,t,!1)){if(s===e)return a[i];s++}i++}return null}function wx(t,e){for(var r=t.lastElementChild;r&&(r===xt.ghost||lt(r,"display")==="none"||e&&!X0(r,e));)r=r.previousElementSibling;return r||null}function Rr(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==xt.clone&&(!e||X0(t,e))&&r++;return r}function e_(t){var e=0,r=0,n=xa();if(t)do{var s=Do(t),i=s.a,a=s.d;e+=t.scrollLeft*i,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function nre(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r)}return-1}function Bi(t,e){if(!t||!t.getBoundingClientRect)return xa();var r=t,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=lt(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return xa();if(n||e)return r;n=!0}}while(r=r.parentNode);return xa()}function sre(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function Zp(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var ku;function FI(t,e){return function(){if(!ku){var r=arguments,n=this;r.length===1?t.call(n,r[0]):t.apply(n,r),ku=setTimeout(function(){ku=void 0},e)}}}function are(){clearTimeout(ku),ku=void 0}function PI(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function Cx(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function t_(t,e){lt(t,"position","absolute"),lt(t,"top",e.top),lt(t,"left",e.left),lt(t,"width",e.width),lt(t,"height",e.height)}function em(t){lt(t,"position",""),lt(t,"top",""),lt(t,"left",""),lt(t,"width",""),lt(t,"height","")}var Pn="Sortable"+new Date().getTime();function ire(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(lt(s,"display")==="none"||s===xt.ghost)){t.push({target:s,rect:br(s)});var i=Ta({},t[t.length-1].rect);if(s.thisAnimationDuration){var a=Do(s,!0);a&&(i.top-=a.f,i.left-=a.e)}s.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(nre(t,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,a=0;t.forEach(function(o){var l=0,c=o.target,u=c.fromRect,d=br(c),f=c.prevFromRect,h=c.prevToRect,v=o.rect,m=Do(c,!0);m&&(d.top-=m.f,d.left-=m.e),c.toRect=d,c.thisAnimationDuration&&Zp(f,d)&&!Zp(u,d)&&(v.top-d.top)/(v.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=lre(v,f,h,s.options)),Zp(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=s.options.animation),s.animate(c,v,d,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,s,i,a){if(a){lt(n,"transition",""),lt(n,"transform","");var o=Do(this.el),l=o&&o.a,c=o&&o.d,u=(s.left-i.left)/(l||1),d=(s.top-i.top)/(c||1);n.animatingX=!!u,n.animatingY=!!d,lt(n,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=ore(n),lt(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),lt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){lt(n,"transition",""),lt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function ore(t){return t.offsetWidth}function lre(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}var ml=[],tm={initializeByDefault:!0},$d={mount:function(e){for(var r in tm)tm.hasOwnProperty(r)&&!(r in e)&&(e[r]=tm[r]);ml.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ml.push(e)},pluginEvent:function(e,r,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var i=e+"Global";ml.forEach(function(a){r[a.pluginName]&&(r[a.pluginName][i]&&r[a.pluginName][i](Ta({sortable:r},n)),r.options[a.pluginName]&&r[a.pluginName][e]&&r[a.pluginName][e](Ta({sortable:r},n)))})},initializePlugins:function(e,r,n,s){ml.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,r,e.options);c.sortable=e,c.options=e.options,e[l]=c,Ps(n,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,r){var n={};return ml.forEach(function(s){typeof s.eventProperties=="function"&&Ps(n,s.eventProperties.call(r[s.pluginName],e))}),n},modifyOption:function(e,r,n){var s;return ml.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(s=i.optionListeners[r].call(e[i.pluginName],n))}),s}};function Zc(t){var e=t.sortable,r=t.rootEl,n=t.name,s=t.targetEl,i=t.cloneEl,a=t.toEl,o=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,v=t.extraEventProperties;if(e=e||r&&r[Pn],!!e){var m,g=e.options,b="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!ci&&!Vd?m=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(n,!0,!0)),m.to=a||r,m.from=o||r,m.item=s||r,m.clone=i,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=h?h.lastPutMode:void 0;var _=Ta(Ta({},v),$d.getEventProperties(n,e));for(var T in _)m[T]=_[T];r&&r.dispatchEvent(m),g[b]&&g[b].call(e,m)}}var cre=["evt"],rs=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,i=qte(n,cre);$d.pluginEvent.bind(xt)(e,r,Ta({dragEl:Je,parentEl:Ir,ghostEl:Pt,rootEl:yr,nextEl:vo,lastDownEl:Zf,cloneEl:Dr,cloneHidden:Pi,dragStarted:eu,putSortable:ln,activeSortable:xt.active,originalEvent:s,oldIndex:Il,oldDraggableIndex:Du,newIndex:fs,newDraggableIndex:wi,hideGhostForTarget:BI,unhideGhostForTarget:MI,cloneNowHidden:function(){Pi=!0},cloneNowShown:function(){Pi=!1},dispatchSortableEvent:function(o){Gn({sortable:r,name:o,originalEvent:s})}},i))};function Gn(t){Zc(Ta({putSortable:ln,cloneEl:Dr,targetEl:Je,rootEl:yr,oldIndex:Il,oldDraggableIndex:Du,newIndex:fs,newDraggableIndex:wi},t))}var Je,Ir,Pt,yr,vo,Zf,Dr,Pi,Il,fs,Du,wi,Cf,ln,Al=!1,Y0=!1,Q0=[],ho,$s,rm,nm,r_,n_,eu,vl,Ru,Fu=!1,If=!1,e0,Sn,sm=[],lg=!1,J0=[],tp=typeof document<"u",kf=kI,s_=Vd||ci?"cssFloat":"float",ure=tp&&!tre&&!kI&&"draggable"in document.createElement("div"),OI=function(){if(tp){if(ci)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),NI=function(e,r){var n=lt(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=cc(e,0,r),a=cc(e,1,r),o=i&&lt(i),l=a&&lt(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+br(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+br(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&o.float!=="none"){var d=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=s&&n[s_]==="none"||a&&n[s_]==="none"&&c+u>s)?"vertical":"horizontal"},dre=function(e,r,n){var s=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?r.left:r.top,l=n?r.right:r.bottom,c=n?r.width:r.height;return s===o||i===l||s+a/2===o+c/2},fre=function(e,r){var n;return Q0.some(function(s){var i=s[Pn].options.emptyInsertThreshold;if(!(!i||wx(s))){var a=br(s),o=e>=a.left-i&&e<=a.right+i,l=r>=a.top-i&&r<=a.bottom+i;if(o&&l)return n=s}}),n},LI=function(e){function r(i,a){return function(o,l,c,u){var d=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(i==null&&(a||d))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return r(i(o,l,c,u),a)(o,l,c,u);var f=(a?o:l).options.group.name;return i===!0||typeof i=="string"&&i===f||i.join&&i.indexOf(f)>-1}}var n={},s=e.group;(!s||Jf(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=r(s.pull,!0),n.checkPut=r(s.put),n.revertClone=s.revertClone,e.group=n},BI=function(){!OI&&Pt&&lt(Pt,"display","none")},MI=function(){!OI&&Pt&&lt(Pt,"display","")};tp&&document.addEventListener("click",function(t){if(Y0)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Y0=!1,!1},!0);var po=function(e){if(Je){e=e.touches?e.touches[0]:e;var r=fre(e.clientX,e.clientY);if(r){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[Pn]._onDragOver(n)}}},hre=function(e){Je&&Je.parentNode[Pn]._isOutsideThisEl(e.target)};function xt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ps({},e),t[Pn]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return NI(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:xt.supportPointer!==!1&&"PointerEvent"in window&&!Iu,emptyInsertThreshold:5};$d.initializePlugins(this,t,r);for(var n in r)!(n in e)&&(e[n]=r[n]);LI(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:ure,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Mt(t,"pointerdown",this._onTapStart):(Mt(t,"mousedown",this._onTapStart),Mt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Mt(t,"dragover",this),Mt(t,"dragenter",this)),Q0.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ps(this,ire())}xt.prototype={constructor:xt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(vl=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,Je):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,s=this.options,i=s.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=s.filter;if(bre(n),!Je&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Iu&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=js(l,s.draggable,n,!1),!(l&&l.animated)&&Zf!==l)){if(Il=Rr(l),Du=Rr(l,s.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Gn({sortable:r,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),rs("filter",r,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=js(c,d.trim(),n,!1),d)return Gn({sortable:r,rootEl:d,name:"filter",targetEl:l,fromEl:n,toEl:n}),rs("filter",r,{evt:e}),!0}),u)){i&&e.cancelable&&e.preventDefault();return}s.handle&&!js(c,s.handle,n,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,r,n){var s=this,i=s.el,a=s.options,o=i.ownerDocument,l;if(n&&!Je&&n.parentNode===i){var c=br(n);if(yr=i,Je=n,Ir=Je.parentNode,vo=Je.nextSibling,Zf=n,Cf=a.group,xt.dragged=Je,ho={target:Je,clientX:(r||e).clientX,clientY:(r||e).clientY},r_=ho.clientX-c.left,n_=ho.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,Je.style["will-change"]="all",l=function(){if(rs("delayEnded",s,{evt:e}),xt.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Qb&&s.nativeDraggable&&(Je.draggable=!0),s._triggerDragStart(e,r),Gn({sortable:s,name:"choose",originalEvent:e}),Sr(Je,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){RI(Je,u.trim(),am)}),Mt(o,"dragover",po),Mt(o,"mousemove",po),Mt(o,"touchmove",po),Mt(o,"mouseup",s._onDrop),Mt(o,"touchend",s._onDrop),Mt(o,"touchcancel",s._onDrop),Qb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Je.draggable=!0),rs("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Vd||ci))){if(xt.eventCanceled){this._onDrop();return}Mt(o,"mouseup",s._disableDelayedDrag),Mt(o,"touchend",s._disableDelayedDrag),Mt(o,"touchcancel",s._disableDelayedDrag),Mt(o,"mousemove",s._delayedDragTouchMoveHandler),Mt(o,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&Mt(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Je&&am(Je),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Bt(e,"mouseup",this._disableDelayedDrag),Bt(e,"touchend",this._disableDelayedDrag),Bt(e,"touchcancel",this._disableDelayedDrag),Bt(e,"mousemove",this._delayedDragTouchMoveHandler),Bt(e,"touchmove",this._delayedDragTouchMoveHandler),Bt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?Mt(document,"pointermove",this._onTouchMove):r?Mt(document,"touchmove",this._onTouchMove):Mt(document,"mousemove",this._onTouchMove):(Mt(Je,"dragend",this),Mt(yr,"dragstart",this._onDragStart));try{document.selection?t0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Al=!1,yr&&Je){rs("dragStarted",this,{evt:r}),this.nativeDraggable&&Mt(document,"dragover",hre);var n=this.options;!e&&Sr(Je,n.dragClass,!1),Sr(Je,n.ghostClass,!0),xt.active=this,e&&this._appendGhost(),Gn({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if($s){this._lastX=$s.clientX,this._lastY=$s.clientY,BI();for(var e=document.elementFromPoint($s.clientX,$s.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint($s.clientX,$s.clientY),e!==r);)r=e;if(Je.parentNode[Pn]._isOutsideThisEl(e),r)do{if(r[Pn]){var n=void 0;if(n=r[Pn]._onDragOver({clientX:$s.clientX,clientY:$s.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=r.parentNode);MI()}},_onTouchMove:function(e){if(ho){var r=this.options,n=r.fallbackTolerance,s=r.fallbackOffset,i=e.touches?e.touches[0]:e,a=Pt&&Do(Pt,!0),o=Pt&&a&&a.a,l=Pt&&a&&a.d,c=kf&&Sn&&e_(Sn),u=(i.clientX-ho.clientX+s.x)/(o||1)+(c?c[0]-sm[0]:0)/(o||1),d=(i.clientY-ho.clientY+s.y)/(l||1)+(c?c[1]-sm[1]:0)/(l||1);if(!xt.active&&!Al){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Pt){a?(a.e+=u-(rm||0),a.f+=d-(nm||0)):a={a:1,b:0,c:0,d:1,e:u,f:d};var f="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");lt(Pt,"webkitTransform",f),lt(Pt,"mozTransform",f),lt(Pt,"msTransform",f),lt(Pt,"transform",f),rm=u,nm=d,$s=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Pt){var e=this.options.fallbackOnBody?document.body:yr,r=br(Je,!0,kf,!0,e),n=this.options;if(kf){for(Sn=e;lt(Sn,"position")==="static"&&lt(Sn,"transform")==="none"&&Sn!==document;)Sn=Sn.parentNode;Sn!==document.body&&Sn!==document.documentElement?(Sn===document&&(Sn=xa()),r.top+=Sn.scrollTop,r.left+=Sn.scrollLeft):Sn=xa(),sm=e_(Sn)}Pt=Je.cloneNode(!0),Sr(Pt,n.ghostClass,!1),Sr(Pt,n.fallbackClass,!0),Sr(Pt,n.dragClass,!0),lt(Pt,"transition",""),lt(Pt,"transform",""),lt(Pt,"box-sizing","border-box"),lt(Pt,"margin",0),lt(Pt,"top",r.top),lt(Pt,"left",r.left),lt(Pt,"width",r.width),lt(Pt,"height",r.height),lt(Pt,"opacity","0.8"),lt(Pt,"position",kf?"absolute":"fixed"),lt(Pt,"zIndex","100000"),lt(Pt,"pointerEvents","none"),xt.ghost=Pt,e.appendChild(Pt),lt(Pt,"transform-origin",r_/parseInt(Pt.style.width)*100+"% "+n_/parseInt(Pt.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,s=e.dataTransfer,i=n.options;if(rs("dragStart",this,{evt:e}),xt.eventCanceled){this._onDrop();return}rs("setupClone",this),xt.eventCanceled||(Dr=Cx(Je),Dr.draggable=!1,Dr.style["will-change"]="",this._hideClone(),Sr(Dr,this.options.chosenClass,!1),xt.clone=Dr),n.cloneId=t0(function(){rs("clone",n),!xt.eventCanceled&&(n.options.removeCloneOnHide||yr.insertBefore(Dr,Je),n._hideClone(),Gn({sortable:n,name:"clone"}))}),!r&&Sr(Je,i.dragClass,!0),r?(Y0=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Bt(document,"mouseup",n._onDrop),Bt(document,"touchend",n._onDrop),Bt(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,Je)),Mt(document,"drop",n),lt(Je,"transform","translateZ(0)")),Al=!0,n._dragStartId=t0(n._dragStarted.bind(n,r,e)),Mt(document,"selectstart",n),eu=!0,Iu&&lt(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,s,i,a,o=this.options,l=o.group,c=xt.active,u=Cf===l,d=o.sort,f=ln||c,h,v=this,m=!1;if(lg)return;function g(H,L){rs(H,v,Ta({evt:e,isOwner:u,axis:h?"vertical":"horizontal",revert:a,dragRect:s,targetRect:i,canSort:d,fromSortable:f,target:n,completed:_,onMove:function(j,O){return Df(yr,r,Je,s,j,br(j),e,O)},changed:T},L))}function b(){g("dragOverAnimationCapture"),v.captureAnimationState(),v!==f&&f.captureAnimationState()}function _(H){return g("dragOverCompleted",{insertion:H}),H&&(u?c._hideClone():c._showClone(v),v!==f&&(Sr(Je,ln?ln.options.ghostClass:c.options.ghostClass,!1),Sr(Je,o.ghostClass,!0)),ln!==v&&v!==xt.active?ln=v:v===xt.active&&ln&&(ln=null),f===v&&(v._ignoreWhileAnimating=n),v.animateAll(function(){g("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===Je&&!Je.animated||n===r&&!n.animated)&&(vl=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(Je.parentNode[Pn]._isOutsideThisEl(e.target),!H&&po(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function T(){fs=Rr(Je),wi=Rr(Je,o.draggable),Gn({sortable:v,name:"change",toEl:r,newIndex:fs,newDraggableIndex:wi,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=js(n,o.draggable,r,!0),g("dragOver"),xt.eventCanceled)return m;if(Je.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||v._ignoreWhileAnimating===n)return _(!1);if(Y0=!1,c&&!o.disabled&&(u?d||(a=Ir!==yr):ln===this||(this.lastPutMode=Cf.checkPull(this,c,Je,e))&&l.checkPut(this,c,Je,e))){if(h=this._getDirection(e,n)==="vertical",s=br(Je),g("dragOverValid"),xt.eventCanceled)return m;if(a)return Ir=yr,b(),this._hideClone(),g("revert"),xt.eventCanceled||(vo?yr.insertBefore(Je,vo):yr.appendChild(Je)),_(!0);var C=wx(r,o.draggable);if(!C||gre(e,h,this)&&!C.animated){if(C===Je)return _(!1);if(C&&r===e.target&&(n=C),n&&(i=br(n)),Df(yr,r,Je,s,n,i,e,!!n)!==!1)return b(),r.appendChild(Je),Ir=r,T(),_(!0)}else if(C&&vre(e,h,this)){var R=cc(r,0,o,!0);if(R===Je)return _(!1);if(n=R,i=br(n),Df(yr,r,Je,s,n,i,e,!1)!==!1)return b(),r.insertBefore(Je,R),Ir=r,T(),_(!0)}else if(n.parentNode===r){i=br(n);var D=0,w,E=Je.parentNode!==r,y=!dre(Je.animated&&Je.toRect||s,n.animated&&n.toRect||i,h),x=h?"top":"left",I=Zb(n,"top","top")||Zb(Je,"top","top"),A=I?I.scrollTop:void 0;vl!==n&&(w=i[x],Fu=!1,If=!y&&o.invertSwap||E),D=xre(e,n,i,h,y?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,If,vl===n);var k;if(D!==0){var U=Rr(Je);do U-=D,k=Ir.children[U];while(k&&(lt(k,"display")==="none"||k===Pt))}if(D===0||k===n)return _(!1);vl=n,Ru=D;var W=n.nextElementSibling,P=!1;P=D===1;var B=Df(yr,r,Je,s,n,i,e,P);if(B!==!1)return(B===1||B===-1)&&(P=B===1),lg=!0,setTimeout(mre,30),b(),P&&!W?r.appendChild(Je):n.parentNode.insertBefore(Je,P?W:n),I&&PI(I,0,A-I.scrollTop),Ir=Je.parentNode,w!==void 0&&!If&&(e0=Math.abs(w-br(n)[x])),T(),_(!0)}if(r.contains(Je))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Bt(document,"mousemove",this._onTouchMove),Bt(document,"touchmove",this._onTouchMove),Bt(document,"pointermove",this._onTouchMove),Bt(document,"dragover",po),Bt(document,"mousemove",po),Bt(document,"touchmove",po)},_offUpEvents:function(){var e=this.el.ownerDocument;Bt(e,"mouseup",this._onDrop),Bt(e,"touchend",this._onDrop),Bt(e,"pointerup",this._onDrop),Bt(e,"touchcancel",this._onDrop),Bt(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(fs=Rr(Je),wi=Rr(Je,n.draggable),rs("drop",this,{evt:e}),Ir=Je&&Je.parentNode,fs=Rr(Je),wi=Rr(Je,n.draggable),xt.eventCanceled){this._nulling();return}Al=!1,If=!1,Fu=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),cg(this.cloneId),cg(this._dragStartId),this.nativeDraggable&&(Bt(document,"drop",this),Bt(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Iu&&lt(document.body,"user-select",""),lt(Je,"transform",""),e&&(eu&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Pt&&Pt.parentNode&&Pt.parentNode.removeChild(Pt),(yr===Ir||ln&&ln.lastPutMode!=="clone")&&Dr&&Dr.parentNode&&Dr.parentNode.removeChild(Dr),Je&&(this.nativeDraggable&&Bt(Je,"dragend",this),am(Je),Je.style["will-change"]="",eu&&!Al&&Sr(Je,ln?ln.options.ghostClass:this.options.ghostClass,!1),Sr(Je,this.options.chosenClass,!1),Gn({sortable:this,name:"unchoose",toEl:Ir,newIndex:null,newDraggableIndex:null,originalEvent:e}),yr!==Ir?(fs>=0&&(Gn({rootEl:Ir,name:"add",toEl:Ir,fromEl:yr,originalEvent:e}),Gn({sortable:this,name:"remove",toEl:Ir,originalEvent:e}),Gn({rootEl:Ir,name:"sort",toEl:Ir,fromEl:yr,originalEvent:e}),Gn({sortable:this,name:"sort",toEl:Ir,originalEvent:e})),ln&&ln.save()):fs!==Il&&fs>=0&&(Gn({sortable:this,name:"update",toEl:Ir,originalEvent:e}),Gn({sortable:this,name:"sort",toEl:Ir,originalEvent:e})),xt.active&&((fs==null||fs===-1)&&(fs=Il,wi=Du),Gn({sortable:this,name:"end",toEl:Ir,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){rs("nulling",this),yr=Je=Ir=Pt=vo=Dr=Zf=Pi=ho=$s=eu=fs=wi=Il=Du=vl=Ru=ln=Cf=xt.dragged=xt.ghost=xt.clone=xt.active=null,J0.forEach(function(e){e.checked=!0}),J0.length=rm=nm=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Je&&(this._onDragOver(e),pre(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,s=0,i=n.length,a=this.options;s<i;s++)r=n[s],js(r,a.draggable,this.el,!1)&&e.push(r.getAttribute(a.dataIdAttr)||Ere(r));return e},sort:function(e,r){var n={},s=this.el;this.toArray().forEach(function(i,a){var o=s.children[a];js(o,this.options.draggable,s,!1)&&(n[i]=o)},this),r&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(s.removeChild(n[i]),s.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return js(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var s=$d.modifyOption(this,e,r);typeof s<"u"?n[e]=s:n[e]=r,e==="group"&&LI(n)},destroy:function(){rs("destroy",this);var e=this.el;e[Pn]=null,Bt(e,"mousedown",this._onTapStart),Bt(e,"touchstart",this._onTapStart),Bt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Bt(e,"dragover",this),Bt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Q0.splice(Q0.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Pi){if(rs("hideClone",this),xt.eventCanceled)return;lt(Dr,"display","none"),this.options.removeCloneOnHide&&Dr.parentNode&&Dr.parentNode.removeChild(Dr),Pi=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Pi){if(rs("showClone",this),xt.eventCanceled)return;Je.parentNode==yr&&!this.options.group.revertClone?yr.insertBefore(Dr,Je):vo?yr.insertBefore(Dr,vo):yr.appendChild(Dr),this.options.group.revertClone&&this.animate(Je,Dr),lt(Dr,"display",""),Pi=!1}}};function pre(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Df(t,e,r,n,s,i,a,o){var l,c=t[Pn],u=c.options.onMove,d;return window.CustomEvent&&!ci&&!Vd?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=r,l.draggedRect=n,l.related=s||e,l.relatedRect=i||br(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),u&&(d=u.call(c,l,a)),d}function am(t){t.draggable=!1}function mre(){lg=!1}function vre(t,e,r){var n=br(cc(r.el,0,r.options,!0)),s=10;return e?t.clientX<n.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-s||t.clientY<n.bottom&&t.clientX<n.left}function gre(t,e,r){var n=br(wx(r.el,r.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}function xre(t,e,r,n,s,i,a,o){var l=n?t.clientY:t.clientX,c=n?r.height:r.width,u=n?r.top:r.left,d=n?r.bottom:r.right,f=!1;if(!a){if(o&&e0<c*s){if(!Fu&&(Ru===1?l>u+c*i/2:l<d-c*i/2)&&(Fu=!0),Fu)f=!0;else if(Ru===1?l<u+e0:l>d-e0)return-Ru}else if(l>u+c*(1-s)/2&&l<d-c*(1-s)/2)return yre(e)}return f=f||a,f&&(l<u+c*i/2||l>d-c*i/2)?l>u+c/2?1:-1:0}function yre(t){return Rr(Je)<Rr(t)?1:-1}function Ere(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function bre(t){J0.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&J0.push(n)}}function t0(t){return setTimeout(t,0)}function cg(t){return clearTimeout(t)}tp&&Mt(document,"touchmove",function(t){(xt.active||Al)&&t.cancelable&&t.preventDefault()});xt.utils={on:Mt,off:Bt,css:lt,find:RI,is:function(e,r){return!!js(e,r,e,!1)},extend:sre,throttle:FI,closest:js,toggleClass:Sr,clone:Cx,index:Rr,nextTick:t0,cancelNextTick:cg,detectDirection:NI,getChild:cc};xt.get=function(t){return t[Pn]};xt.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(xt.utils=Ta(Ta({},xt.utils),n.utils)),$d.mount(n)})};xt.create=function(t,e){return new xt(t,e)};xt.version=ere;var $r=[],tu,ug,dg=!1,im,om,Z0,ru;function _re(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?Mt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Mt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Mt(document,"touchmove",this._handleFallbackAutoScroll):Mt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Bt(document,"dragover",this._handleAutoScroll):(Bt(document,"pointermove",this._handleFallbackAutoScroll),Bt(document,"touchmove",this._handleFallbackAutoScroll),Bt(document,"mousemove",this._handleFallbackAutoScroll)),a_(),r0(),are()},nulling:function(){Z0=ug=tu=dg=ru=im=om=null,$r.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var s=this,i=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,o=document.elementFromPoint(i,a);if(Z0=r,n||this.options.forceAutoScrollFallback||Vd||ci||Iu){lm(r,this.options,o,n);var l=Bi(o,!0);dg&&(!ru||i!==im||a!==om)&&(ru&&a_(),ru=setInterval(function(){var c=Bi(document.elementFromPoint(i,a),!0);c!==l&&(l=c,r0()),lm(r,s.options,c,n)},10),im=i,om=a)}else{if(!this.options.bubbleScroll||Bi(o,!0)===xa()){r0();return}lm(r,this.options,Bi(o,!1),!1)}}},Ps(t,{pluginName:"scroll",initializeByDefault:!0})}function r0(){$r.forEach(function(t){clearInterval(t.pid)}),$r=[]}function a_(){clearInterval(ru)}var lm=FI(function(t,e,r,n){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=xa(),c=!1,u;ug!==r&&(ug=r,r0(),tu=e.scroll,u=e.scrollFn,tu===!0&&(tu=Bi(r,!0)));var d=0,f=tu;do{var h=f,v=br(h),m=v.top,g=v.bottom,b=v.left,_=v.right,T=v.width,C=v.height,R=void 0,D=void 0,w=h.scrollWidth,E=h.scrollHeight,y=lt(h),x=h.scrollLeft,I=h.scrollTop;h===l?(R=T<w&&(y.overflowX==="auto"||y.overflowX==="scroll"||y.overflowX==="visible"),D=C<E&&(y.overflowY==="auto"||y.overflowY==="scroll"||y.overflowY==="visible")):(R=T<w&&(y.overflowX==="auto"||y.overflowX==="scroll"),D=C<E&&(y.overflowY==="auto"||y.overflowY==="scroll"));var A=R&&(Math.abs(_-s)<=a&&x+T<w)-(Math.abs(b-s)<=a&&!!x),k=D&&(Math.abs(g-i)<=a&&I+C<E)-(Math.abs(m-i)<=a&&!!I);if(!$r[d])for(var U=0;U<=d;U++)$r[U]||($r[U]={});($r[d].vx!=A||$r[d].vy!=k||$r[d].el!==h)&&($r[d].el=h,$r[d].vx=A,$r[d].vy=k,clearInterval($r[d].pid),(A!=0||k!=0)&&(c=!0,$r[d].pid=setInterval((function(){n&&this.layer===0&&xt.active._onTouchMove(Z0);var W=$r[this.layer].vy?$r[this.layer].vy*o:0,P=$r[this.layer].vx?$r[this.layer].vx*o:0;typeof u=="function"&&u.call(xt.dragged.parentNode[Pn],P,W,t,Z0,$r[this.layer].el)!=="continue"||PI($r[this.layer].el,P,W)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==l&&(f=Bi(f,!1)));dg=c}},30),UI=function(e){var r=e.originalEvent,n=e.putSortable,s=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(r){var c=n||i;o();var u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(a("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function Ix(){}Ix.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=cc(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:UI};Ps(Ix,{pluginName:"revertOnSpill"});function kx(){}kx.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,s=n||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop:UI};Ps(kx,{pluginName:"removeOnSpill"});var As;function Sre(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(r){var n=r.dragEl;As=n},dragOverValid:function(r){var n=r.completed,s=r.target,i=r.onMove,a=r.activeSortable,o=r.changed,l=r.cancel;if(a.options.swap){var c=this.sortable.el,u=this.options;if(s&&s!==c){var d=As;i(s)!==!1?(Sr(s,u.swapClass,!0),As=s):As=null,d&&d!==As&&Sr(d,u.swapClass,!1)}o(),n(!0),l()}},drop:function(r){var n=r.activeSortable,s=r.putSortable,i=r.dragEl,a=s||this.sortable,o=this.options;As&&Sr(As,o.swapClass,!1),As&&(o.swap||s&&s.options.swap)&&i!==As&&(a.captureAnimationState(),a!==n&&n.captureAnimationState(),Tre(i,As),a.animateAll(),a!==n&&n.animateAll())},nulling:function(){As=null}},Ps(t,{pluginName:"swap",eventProperties:function(){return{swapItem:As}}})}function Tre(t,e){var r=t.parentNode,n=e.parentNode,s,i;!r||!n||r.isEqualNode(e)||n.isEqualNode(t)||(s=Rr(t),i=Rr(e),r.isEqualNode(n)&&s<i&&i++,r.insertBefore(e,r.children[s]),n.insertBefore(t,n.children[i]))}var It=[],ds=[],Uc,Hs,Vc=!1,ns=!1,gl=!1,cr,$c,Rf;function Are(){function t(e){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));e.options.supportPointer?Mt(document,"pointerup",this._deselectMultiDrag):(Mt(document,"mouseup",this._deselectMultiDrag),Mt(document,"touchend",this._deselectMultiDrag)),Mt(document,"keydown",this._checkKeyDown),Mt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,i){var a="";It.length&&Hs===e?It.forEach(function(o,l){a+=(l?", ":"")+o.textContent}):a=i.textContent,s.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var n=r.dragEl;cr=n},delayEnded:function(){this.isMultiDrag=~It.indexOf(cr)},setupClone:function(r){var n=r.sortable,s=r.cancel;if(this.isMultiDrag){for(var i=0;i<It.length;i++)ds.push(Cx(It[i])),ds[i].sortableIndex=It[i].sortableIndex,ds[i].draggable=!1,ds[i].style["will-change"]="",Sr(ds[i],this.options.selectedClass,!1),It[i]===cr&&Sr(ds[i],this.options.chosenClass,!1);n._hideClone(),s()}},clone:function(r){var n=r.sortable,s=r.rootEl,i=r.dispatchSortableEvent,a=r.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||It.length&&Hs===n&&(i_(!0,s),i("clone"),a()))},showClone:function(r){var n=r.cloneNowShown,s=r.rootEl,i=r.cancel;this.isMultiDrag&&(i_(!1,s),ds.forEach(function(a){lt(a,"display","")}),n(),Rf=!1,i())},hideClone:function(r){var n=this;r.sortable;var s=r.cloneNowHidden,i=r.cancel;this.isMultiDrag&&(ds.forEach(function(a){lt(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),s(),Rf=!0,i())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&Hs&&Hs.multiDrag._deselectMultiDrag(),It.forEach(function(n){n.sortableIndex=Rr(n)}),It=It.sort(function(n,s){return n.sortableIndex-s.sortableIndex}),gl=!0},dragStarted:function(r){var n=this,s=r.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){It.forEach(function(a){a!==cr&&lt(a,"position","absolute")});var i=br(cr,!1,!0,!0);It.forEach(function(a){a!==cr&&t_(a,i)}),ns=!0,Vc=!0}s.animateAll(function(){ns=!1,Vc=!1,n.options.animation&&It.forEach(function(a){em(a)}),n.options.sort&&Ff()})}},dragOver:function(r){var n=r.target,s=r.completed,i=r.cancel;ns&&~It.indexOf(n)&&(s(!1),i())},revert:function(r){var n=r.fromSortable,s=r.rootEl,i=r.sortable,a=r.dragRect;It.length>1&&(It.forEach(function(o){i.addAnimationState({target:o,rect:ns?br(o):a}),em(o),o.fromRect=a,n.removeAnimationState(o)}),ns=!1,wre(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(r){var n=r.sortable,s=r.isOwner,i=r.insertion,a=r.activeSortable,o=r.parentEl,l=r.putSortable,c=this.options;if(i){if(s&&a._hideClone(),Vc=!1,c.animation&&It.length>1&&(ns||!s&&!a.options.sort&&!l)){var u=br(cr,!1,!0,!0);It.forEach(function(f){f!==cr&&(t_(f,u),o.appendChild(f))}),ns=!0}if(!s)if(ns||Ff(),It.length>1){var d=Rf;a._showClone(n),a.options.animation&&!Rf&&d&&ds.forEach(function(f){a.addAnimationState({target:f,rect:$c}),f.fromRect=$c,f.thisAnimationDuration=null})}else a._showClone(n)}},dragOverAnimationCapture:function(r){var n=r.dragRect,s=r.isOwner,i=r.activeSortable;if(It.forEach(function(o){o.thisAnimationDuration=null}),i.options.animation&&!s&&i.multiDrag.isMultiDrag){$c=Ps({},n);var a=Do(cr,!0);$c.top-=a.f,$c.left-=a.e}},dragOverAnimationComplete:function(){ns&&(ns=!1,Ff())},drop:function(r){var n=r.originalEvent,s=r.rootEl,i=r.parentEl,a=r.sortable,o=r.dispatchSortableEvent,l=r.oldIndex,c=r.putSortable,u=c||this.sortable;if(n){var d=this.options,f=i.children;if(!gl)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Sr(cr,d.selectedClass,!~It.indexOf(cr)),~It.indexOf(cr))It.splice(It.indexOf(cr),1),Uc=null,Zc({sortable:a,rootEl:s,name:"deselect",targetEl:cr});else{if(It.push(cr),Zc({sortable:a,rootEl:s,name:"select",targetEl:cr}),n.shiftKey&&Uc&&a.el.contains(Uc)){var h=Rr(Uc),v=Rr(cr);if(~h&&~v&&h!==v){var m,g;for(v>h?(g=h,m=v):(g=v,m=h+1);g<m;g++)~It.indexOf(f[g])||(Sr(f[g],d.selectedClass,!0),It.push(f[g]),Zc({sortable:a,rootEl:s,name:"select",targetEl:f[g]}))}}else Uc=cr;Hs=u}if(gl&&this.isMultiDrag){if(ns=!1,(i[Pn].options.sort||i!==s)&&It.length>1){var b=br(cr),_=Rr(cr,":not(."+this.options.selectedClass+")");if(!Vc&&d.animation&&(cr.thisAnimationDuration=null),u.captureAnimationState(),!Vc&&(d.animation&&(cr.fromRect=b,It.forEach(function(C){if(C.thisAnimationDuration=null,C!==cr){var R=ns?br(C):b;C.fromRect=R,u.addAnimationState({target:C,rect:R})}})),Ff(),It.forEach(function(C){f[_]?i.insertBefore(C,f[_]):i.appendChild(C),_++}),l===Rr(cr))){var T=!1;It.forEach(function(C){if(C.sortableIndex!==Rr(C)){T=!0;return}}),T&&o("update")}It.forEach(function(C){em(C)}),u.animateAll()}Hs=u}(s===i||c&&c.lastPutMode!=="clone")&&ds.forEach(function(C){C.parentNode&&C.parentNode.removeChild(C)})}},nullingGlobal:function(){this.isMultiDrag=gl=!1,ds.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Bt(document,"pointerup",this._deselectMultiDrag),Bt(document,"mouseup",this._deselectMultiDrag),Bt(document,"touchend",this._deselectMultiDrag),Bt(document,"keydown",this._checkKeyDown),Bt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof gl<"u"&&gl)&&Hs===this.sortable&&!(r&&js(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;It.length;){var n=It[0];Sr(n,this.options.selectedClass,!1),It.shift(),Zc({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Ps(t,{pluginName:"multiDrag",utils:{select:function(r){var n=r.parentNode[Pn];!n||!n.options.multiDrag||~It.indexOf(r)||(Hs&&Hs!==n&&(Hs.multiDrag._deselectMultiDrag(),Hs=n),Sr(r,n.options.selectedClass,!0),It.push(r))},deselect:function(r){var n=r.parentNode[Pn],s=It.indexOf(r);!n||!n.options.multiDrag||!~s||(Sr(r,n.options.selectedClass,!1),It.splice(s,1))}},eventProperties:function(){var r=this,n=[],s=[];return It.forEach(function(i){n.push({multiDragElement:i,index:i.sortableIndex});var a;ns&&i!==cr?a=-1:ns?a=Rr(i,":not(."+r.options.selectedClass+")"):a=Rr(i),s.push({multiDragElement:i,index:a})}),{items:Xte(It),clones:[].concat(ds),oldIndicies:n,newIndicies:s}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function wre(t,e){It.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function i_(t,e){ds.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function Ff(){It.forEach(function(t){t!==cr&&t.parentNode&&t.parentNode.removeChild(t)})}xt.mount(new _re);xt.mount(kx,Ix);const Cre=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Are,Sortable:xt,Swap:Sre,default:xt},Symbol.toStringTag,{value:"Module"})),Ire=J1(Cre);(function(t,e){(function(n,s){t.exports=s(Wte,Ire)})(typeof self<"u"?self:Nt,function(r,n){return function(s){var i={};function a(o){if(i[o])return i[o].exports;var l=i[o]={i:o,l:!1,exports:{}};return s[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=s,a.c=i,a.d=function(o,l,c){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:c})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var u in o)a.d(c,u,(function(d){return o[d]}).bind(null,u));return c},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s="fb15")}({"00ee":function(s,i,a){var o=a("b622"),l=o("toStringTag"),c={};c[l]="z",s.exports=String(c)==="[object z]"},"0366":function(s,i,a){var o=a("1c0b");s.exports=function(l,c,u){if(o(l),c===void 0)return l;switch(u){case 0:return function(){return l.call(c)};case 1:return function(d){return l.call(c,d)};case 2:return function(d,f){return l.call(c,d,f)};case 3:return function(d,f,h){return l.call(c,d,f,h)}}return function(){return l.apply(c,arguments)}}},"057f":function(s,i,a){var o=a("fc6a"),l=a("241c").f,c={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(f){try{return l(f)}catch{return u.slice()}};s.exports.f=function(h){return u&&c.call(h)=="[object Window]"?d(h):l(o(h))}},"06cf":function(s,i,a){var o=a("83ab"),l=a("d1e7"),c=a("5c6c"),u=a("fc6a"),d=a("c04e"),f=a("5135"),h=a("0cfb"),v=Object.getOwnPropertyDescriptor;i.f=o?v:function(g,b){if(g=u(g),b=d(b,!0),h)try{return v(g,b)}catch{}if(f(g,b))return c(!l.f.call(g,b),g[b])}},"0cfb":function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("cc12");s.exports=!o&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,i,a){var o=a("23e7"),l=a("d58f").left,c=a("a640"),u=a("ae40"),d=c("reduce"),f=u("reduce",{1:0});o({target:"Array",proto:!0,forced:!d||!f},{reduce:function(v){return l(this,v,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,i,a){var o=a("c6b6"),l=a("9263");s.exports=function(c,u){var d=c.exec;if(typeof d=="function"){var f=d.call(c,u);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(o(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,u)}},"159b":function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("17c2"),u=a("9112");for(var d in l){var f=o[d],h=f&&f.prototype;if(h&&h.forEach!==c)try{u(h,"forEach",c)}catch{h.forEach=c}}},"17c2":function(s,i,a){var o=a("b727").forEach,l=a("a640"),c=a("ae40"),u=l("forEach"),d=c("forEach");s.exports=!u||!d?function(h){return o(this,h,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,i,a){var o=a("d066");s.exports=o("document","documentElement")},"1c0b":function(s,i){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},"1c7e":function(s,i,a){var o=a("b622"),l=o("iterator"),c=!1;try{var u=0,d={next:function(){return{done:!!u++}},return:function(){c=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}s.exports=function(f,h){if(!h&&!c)return!1;var v=!1;try{var m={};m[l]=function(){return{next:function(){return{done:v=!0}}}},f(m)}catch{}return v}},"1d80":function(s,i){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},"1dde":function(s,i,a){var o=a("d039"),l=a("b622"),c=a("2d00"),u=l("species");s.exports=function(d){return c>=51||!o(function(){var f=[],h=f.constructor={};return h[u]=function(){return{foo:1}},f[d](Boolean).foo!==1})}},"23cb":function(s,i,a){var o=a("a691"),l=Math.max,c=Math.min;s.exports=function(u,d){var f=o(u);return f<0?l(f+d,0):c(f,d)}},"23e7":function(s,i,a){var o=a("da84"),l=a("06cf").f,c=a("9112"),u=a("6eeb"),d=a("ce4e"),f=a("e893"),h=a("94ca");s.exports=function(v,m){var g=v.target,b=v.global,_=v.stat,T,C,R,D,w,E;if(b?C=o:_?C=o[g]||d(g,{}):C=(o[g]||{}).prototype,C)for(R in m){if(w=m[R],v.noTargetGet?(E=l(C,R),D=E&&E.value):D=C[R],T=h(b?R:g+(_?".":"#")+R,v.forced),!T&&D!==void 0){if(typeof w==typeof D)continue;f(w,D)}(v.sham||D&&D.sham)&&c(w,"sham",!0),u(C,R,w,v)}}},"241c":function(s,i,a){var o=a("ca84"),l=a("7839"),c=l.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(d){return o(d,c)}},"25f0":function(s,i,a){var o=a("6eeb"),l=a("825a"),c=a("d039"),u=a("ad6d"),d="toString",f=RegExp.prototype,h=f[d],v=c(function(){return h.call({source:"a",flags:"b"})!="/a/b"}),m=h.name!=d;(v||m)&&o(RegExp.prototype,d,function(){var b=l(this),_=String(b.source),T=b.flags,C=String(T===void 0&&b instanceof RegExp&&!("flags"in f)?u.call(b):T);return"/"+_+"/"+C},{unsafe:!0})},"2ca0":function(s,i,a){var o=a("23e7"),l=a("06cf").f,c=a("50c4"),u=a("5a34"),d=a("1d80"),f=a("ab13"),h=a("c430"),v="".startsWith,m=Math.min,g=f("startsWith"),b=!h&&!g&&!!function(){var _=l(String.prototype,"startsWith");return _&&!_.writable}();o({target:"String",proto:!0,forced:!b&&!g},{startsWith:function(T){var C=String(d(this));u(T);var R=c(m(arguments.length>1?arguments[1]:void 0,C.length)),D=String(T);return v?v.call(C,D,R):C.slice(R,R+D.length)===D}})},"2d00":function(s,i,a){var o=a("da84"),l=a("342f"),c=o.process,u=c&&c.versions,d=u&&u.v8,f,h;d?(f=d.split("."),h=f[0]+f[1]):l&&(f=l.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=l.match(/Chrome\/(\d+)/),f&&(h=f[1]))),s.exports=h&&+h},"342f":function(s,i,a){var o=a("d066");s.exports=o("navigator","userAgent")||""},"35a1":function(s,i,a){var o=a("f5df"),l=a("3f8c"),c=a("b622"),u=c("iterator");s.exports=function(d){if(d!=null)return d[u]||d["@@iterator"]||l[o(d)]}},"37e8":function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("825a"),u=a("df75");s.exports=o?Object.defineProperties:function(f,h){c(f);for(var v=u(h),m=v.length,g=0,b;m>g;)l.f(f,b=v[g++],h[b]);return f}},"3bbe":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(s,i,a){var o=a("6547").charAt,l=a("69f3"),c=a("7dd0"),u="String Iterator",d=l.set,f=l.getterFor(u);c(String,"String",function(h){d(this,{type:u,string:String(h),index:0})},function(){var v=f(this),m=v.string,g=v.index,b;return g>=m.length?{value:void 0,done:!0}:(b=o(m,g),v.index+=b.length,{value:b,done:!1})})},"3f8c":function(s,i){s.exports={}},4160:function(s,i,a){var o=a("23e7"),l=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(s,i,a){var o=a("da84");s.exports=o},"44ad":function(s,i,a){var o=a("d039"),l=a("c6b6"),c="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return l(u)=="String"?c.call(u,""):Object(u)}:Object},"44d2":function(s,i,a){var o=a("b622"),l=a("7c73"),c=a("9bf2"),u=o("unscopables"),d=Array.prototype;d[u]==null&&c.f(d,u,{configurable:!0,value:l(null)}),s.exports=function(f){d[u][f]=!0}},"44e7":function(s,i,a){var o=a("861d"),l=a("c6b6"),c=a("b622"),u=c("match");s.exports=function(d){var f;return o(d)&&((f=d[u])!==void 0?!!f:l(d)=="RegExp")}},4930:function(s,i,a){var o=a("d039");s.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(s,i,a){var o=a("fc6a"),l=a("50c4"),c=a("23cb"),u=function(d){return function(f,h,v){var m=o(f),g=l(m.length),b=c(v,g),_;if(d&&h!=h){for(;g>b;)if(_=m[b++],_!=_)return!0}else for(;g>b;b++)if((d||b in m)&&m[b]===h)return d||b||0;return!d&&-1}};s.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(s,i,a){var o=a("23e7"),l=a("b727").filter,c=a("1dde"),u=a("ae40"),d=c("filter"),f=u("filter");o({target:"Array",proto:!0,forced:!d||!f},{filter:function(v){return l(this,v,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,i,a){var o=a("0366"),l=a("7b0b"),c=a("9bdd"),u=a("e95a"),d=a("50c4"),f=a("8418"),h=a("35a1");s.exports=function(m){var g=l(m),b=typeof this=="function"?this:Array,_=arguments.length,T=_>1?arguments[1]:void 0,C=T!==void 0,R=h(g),D=0,w,E,y,x,I,A;if(C&&(T=o(T,_>2?arguments[2]:void 0,2)),R!=null&&!(b==Array&&u(R)))for(x=R.call(g),I=x.next,E=new b;!(y=I.call(x)).done;D++)A=C?c(x,T,[y.value,D],!0):y.value,f(E,D,A);else for(w=d(g.length),E=new b(w);w>D;D++)A=C?T(g[D],D):g[D],f(E,D,A);return E.length=D,E}},"4fad":function(s,i,a){var o=a("23e7"),l=a("6f53").entries;o({target:"Object",stat:!0},{entries:function(u){return l(u)}})},"50c4":function(s,i,a){var o=a("a691"),l=Math.min;s.exports=function(c){return c>0?l(o(c),9007199254740991):0}},5135:function(s,i){var a={}.hasOwnProperty;s.exports=function(o,l){return a.call(o,l)}},5319:function(s,i,a){var o=a("d784"),l=a("825a"),c=a("7b0b"),u=a("50c4"),d=a("a691"),f=a("1d80"),h=a("8aa5"),v=a("14c3"),m=Math.max,g=Math.min,b=Math.floor,_=/\$([$&'`]|\d\d?|<[^>]*>)/g,T=/\$([$&'`]|\d\d?)/g,C=function(R){return R===void 0?R:String(R)};o("replace",2,function(R,D,w,E){var y=E.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,x=E.REPLACE_KEEPS_$0,I=y?"$":"$0";return[function(U,W){var P=f(this),B=U==null?void 0:U[R];return B!==void 0?B.call(U,P,W):D.call(String(P),U,W)},function(k,U){if(!y&&x||typeof U=="string"&&U.indexOf(I)===-1){var W=w(D,k,this,U);if(W.done)return W.value}var P=l(k),B=String(this),H=typeof U=="function";H||(U=String(U));var L=P.global;if(L){var Z=P.unicode;P.lastIndex=0}for(var j=[];;){var O=v(P,B);if(O===null||(j.push(O),!L))break;var G=String(O[0]);G===""&&(P.lastIndex=h(B,u(P.lastIndex),Z))}for(var X="",q=0,pe=0;pe<j.length;pe++){O=j[pe];for(var ie=String(O[0]),de=m(g(d(O.index),B.length),0),z=[],J=1;J<O.length;J++)z.push(C(O[J]));var me=O.groups;if(H){var Y=[ie].concat(z,de,B);me!==void 0&&Y.push(me);var K=String(U.apply(void 0,Y))}else K=A(ie,B,de,z,me,U);de>=q&&(X+=B.slice(q,de)+K,q=de+ie.length)}return X+B.slice(q)}];function A(k,U,W,P,B,H){var L=W+k.length,Z=P.length,j=T;return B!==void 0&&(B=c(B),j=_),D.call(H,j,function(O,G){var X;switch(G.charAt(0)){case"$":return"$";case"&":return k;case"`":return U.slice(0,W);case"'":return U.slice(L);case"<":X=B[G.slice(1,-1)];break;default:var q=+G;if(q===0)return O;if(q>Z){var pe=b(q/10);return pe===0?O:pe<=Z?P[pe-1]===void 0?G.charAt(1):P[pe-1]+G.charAt(1):O}X=P[q-1]}return X===void 0?"":X})}})},5692:function(s,i,a){var o=a("c430"),l=a("c6cd");(s.exports=function(c,u){return l[c]||(l[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,i,a){var o=a("d066"),l=a("241c"),c=a("7418"),u=a("825a");s.exports=o("Reflect","ownKeys")||function(f){var h=l.f(u(f)),v=c.f;return v?h.concat(v(f)):h}},"5a34":function(s,i,a){var o=a("44e7");s.exports=function(l){if(o(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(s,i){s.exports=function(a,o){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:o}}},"5db7":function(s,i,a){var o=a("23e7"),l=a("a2bf"),c=a("7b0b"),u=a("50c4"),d=a("1c0b"),f=a("65f0");o({target:"Array",proto:!0},{flatMap:function(v){var m=c(this),g=u(m.length),b;return d(v),b=f(m,0),b.length=l(b,m,m,g,0,1,v,arguments.length>1?arguments[1]:void 0),b}})},6547:function(s,i,a){var o=a("a691"),l=a("1d80"),c=function(u){return function(d,f){var h=String(l(d)),v=o(f),m=h.length,g,b;return v<0||v>=m?u?"":void 0:(g=h.charCodeAt(v),g<55296||g>56319||v+1===m||(b=h.charCodeAt(v+1))<56320||b>57343?u?h.charAt(v):g:u?h.slice(v,v+2):(g-55296<<10)+(b-56320)+65536)}};s.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(s,i,a){var o=a("861d"),l=a("e8b5"),c=a("b622"),u=c("species");s.exports=function(d,f){var h;return l(d)&&(h=d.constructor,typeof h=="function"&&(h===Array||l(h.prototype))?h=void 0:o(h)&&(h=h[u],h===null&&(h=void 0))),new(h===void 0?Array:h)(f===0?0:f)}},"69f3":function(s,i,a){var o=a("7f9a"),l=a("da84"),c=a("861d"),u=a("9112"),d=a("5135"),f=a("f772"),h=a("d012"),v=l.WeakMap,m,g,b,_=function(y){return b(y)?g(y):m(y,{})},T=function(y){return function(x){var I;if(!c(x)||(I=g(x)).type!==y)throw TypeError("Incompatible receiver, "+y+" required");return I}};if(o){var C=new v,R=C.get,D=C.has,w=C.set;m=function(y,x){return w.call(C,y,x),x},g=function(y){return R.call(C,y)||{}},b=function(y){return D.call(C,y)}}else{var E=f("state");h[E]=!0,m=function(y,x){return u(y,E,x),x},g=function(y){return d(y,E)?y[E]:{}},b=function(y){return d(y,E)}}s.exports={set:m,get:g,has:b,enforce:_,getterFor:T}},"6eeb":function(s,i,a){var o=a("da84"),l=a("9112"),c=a("5135"),u=a("ce4e"),d=a("8925"),f=a("69f3"),h=f.get,v=f.enforce,m=String(String).split("String");(s.exports=function(g,b,_,T){var C=T?!!T.unsafe:!1,R=T?!!T.enumerable:!1,D=T?!!T.noTargetGet:!1;if(typeof _=="function"&&(typeof b=="string"&&!c(_,"name")&&l(_,"name",b),v(_).source=m.join(typeof b=="string"?b:"")),g===o){R?g[b]=_:u(b,_);return}else C?!D&&g[b]&&(R=!0):delete g[b];R?g[b]=_:l(g,b,_)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||d(this)})},"6f53":function(s,i,a){var o=a("83ab"),l=a("df75"),c=a("fc6a"),u=a("d1e7").f,d=function(f){return function(h){for(var v=c(h),m=l(v),g=m.length,b=0,_=[],T;g>b;)T=m[b++],(!o||u.call(v,T))&&_.push(f?[T,v[T]]:v[T]);return _}};s.exports={entries:d(!0),values:d(!1)}},"73d9":function(s,i,a){var o=a("44d2");o("flatMap")},7418:function(s,i){i.f=Object.getOwnPropertySymbols},"746f":function(s,i,a){var o=a("428f"),l=a("5135"),c=a("e538"),u=a("9bf2").f;s.exports=function(d){var f=o.Symbol||(o.Symbol={});l(f,d)||u(f,d,{value:c.f(d)})}},7839:function(s,i){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,i,a){var o=a("1d80");s.exports=function(l){return Object(o(l))}},"7c73":function(s,i,a){var o=a("825a"),l=a("37e8"),c=a("7839"),u=a("d012"),d=a("1be4"),f=a("cc12"),h=a("f772"),v=">",m="<",g="prototype",b="script",_=h("IE_PROTO"),T=function(){},C=function(y){return m+b+v+y+m+"/"+b+v},R=function(y){y.write(C("")),y.close();var x=y.parentWindow.Object;return y=null,x},D=function(){var y=f("iframe"),x="java"+b+":",I;return y.style.display="none",d.appendChild(y),y.src=String(x),I=y.contentWindow.document,I.open(),I.write(C("document.F=Object")),I.close(),I.F},w,E=function(){try{w=document.domain&&new ActiveXObject("htmlfile")}catch{}E=w?R(w):D();for(var y=c.length;y--;)delete E[g][c[y]];return E()};u[_]=!0,s.exports=Object.create||function(x,I){var A;return x!==null?(T[g]=o(x),A=new T,T[g]=null,A[_]=x):A=E(),I===void 0?A:l(A,I)}},"7dd0":function(s,i,a){var o=a("23e7"),l=a("9ed3"),c=a("e163"),u=a("d2bb"),d=a("d44e"),f=a("9112"),h=a("6eeb"),v=a("b622"),m=a("c430"),g=a("3f8c"),b=a("ae93"),_=b.IteratorPrototype,T=b.BUGGY_SAFARI_ITERATORS,C=v("iterator"),R="keys",D="values",w="entries",E=function(){return this};s.exports=function(y,x,I,A,k,U,W){l(I,x,A);var P=function(pe){if(pe===k&&j)return j;if(!T&&pe in L)return L[pe];switch(pe){case R:return function(){return new I(this,pe)};case D:return function(){return new I(this,pe)};case w:return function(){return new I(this,pe)}}return function(){return new I(this)}},B=x+" Iterator",H=!1,L=y.prototype,Z=L[C]||L["@@iterator"]||k&&L[k],j=!T&&Z||P(k),O=x=="Array"&&L.entries||Z,G,X,q;if(O&&(G=c(O.call(new y)),_!==Object.prototype&&G.next&&(!m&&c(G)!==_&&(u?u(G,_):typeof G[C]!="function"&&f(G,C,E)),d(G,B,!0,!0),m&&(g[B]=E))),k==D&&Z&&Z.name!==D&&(H=!0,j=function(){return Z.call(this)}),(!m||W)&&L[C]!==j&&f(L,C,j),g[x]=j,k)if(X={values:P(D),keys:U?j:P(R),entries:P(w)},W)for(q in X)(T||H||!(q in L))&&h(L,q,X[q]);else o({target:x,proto:!0,forced:T||H},X);return X}},"7f9a":function(s,i,a){var o=a("da84"),l=a("8925"),c=o.WeakMap;s.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(s,i,a){var o=a("d039");s.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,i,a){var o=a("c04e"),l=a("9bf2"),c=a("5c6c");s.exports=function(u,d,f){var h=o(d);h in u?l.f(u,h,c(0,f)):u[h]=f}},"861d":function(s,i){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},8875:function(s,i,a){var o,l,c;(function(u,d){l=[],o=d,c=typeof o=="function"?o.apply(i,l):o,c!==void 0&&(s.exports=c)})(typeof self<"u"?self:this,function(){function u(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(w){var f=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,h=/@([^@]*):(\d+):(\d+)\s*$/ig,v=f.exec(w.stack)||h.exec(w.stack),m=v&&v[1]||!1,g=v&&v[2]||!1,b=document.location.href.replace(document.location.hash,""),_,T,C,R=document.getElementsByTagName("script");m===b&&(_=document.documentElement.outerHTML,T=new RegExp("(?:[^\\n]+?\\n){0,"+(g-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),C=_.replace(T,"$1").trim());for(var D=0;D<R.length;D++)if(R[D].readyState==="interactive"||R[D].src===m||m===b&&R[D].innerHTML&&R[D].innerHTML.trim()===C)return R[D];return null}}return u})},8925:function(s,i,a){var o=a("c6cd"),l=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(c){return l.call(c)}),s.exports=o.inspectSource},"8aa5":function(s,i,a){var o=a("6547").charAt;s.exports=function(l,c,u){return c+(u?o(l,c).length:1)}},"8bbf":function(s,i){s.exports=r},"90e3":function(s,i){var a=0,o=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+o).toString(36)}},9112:function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("5c6c");s.exports=o?function(u,d,f){return l.f(u,d,c(1,f))}:function(u,d,f){return u[d]=f,u}},9263:function(s,i,a){var o=a("ad6d"),l=a("9f7f"),c=RegExp.prototype.exec,u=String.prototype.replace,d=c,f=function(){var g=/a/,b=/b*/g;return c.call(g,"a"),c.call(b,"a"),g.lastIndex!==0||b.lastIndex!==0}(),h=l.UNSUPPORTED_Y||l.BROKEN_CARET,v=/()??/.exec("")[1]!==void 0,m=f||v||h;m&&(d=function(b){var _=this,T,C,R,D,w=h&&_.sticky,E=o.call(_),y=_.source,x=0,I=b;return w&&(E=E.replace("y",""),E.indexOf("g")===-1&&(E+="g"),I=String(b).slice(_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&b[_.lastIndex-1]!==`
`)&&(y="(?: "+y+")",I=" "+I,x++),C=new RegExp("^(?:"+y+")",E)),v&&(C=new RegExp("^"+y+"$(?!\\s)",E)),f&&(T=_.lastIndex),R=c.call(w?C:_,I),w?R?(R.input=R.input.slice(x),R[0]=R[0].slice(x),R.index=_.lastIndex,_.lastIndex+=R[0].length):_.lastIndex=0:f&&R&&(_.lastIndex=_.global?R.index+R[0].length:T),v&&R&&R.length>1&&u.call(R[0],C,function(){for(D=1;D<arguments.length-2;D++)arguments[D]===void 0&&(R[D]=void 0)}),R}),s.exports=d},"94ca":function(s,i,a){var o=a("d039"),l=/#|\.prototype\./,c=function(v,m){var g=d[u(v)];return g==h?!0:g==f?!1:typeof m=="function"?o(m):!!m},u=c.normalize=function(v){return String(v).replace(l,".").toLowerCase()},d=c.data={},f=c.NATIVE="N",h=c.POLYFILL="P";s.exports=c},"99af":function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("e8b5"),u=a("861d"),d=a("7b0b"),f=a("50c4"),h=a("8418"),v=a("65f0"),m=a("1dde"),g=a("b622"),b=a("2d00"),_=g("isConcatSpreadable"),T=9007199254740991,C="Maximum allowed index exceeded",R=b>=51||!l(function(){var y=[];return y[_]=!1,y.concat()[0]!==y}),D=m("concat"),w=function(y){if(!u(y))return!1;var x=y[_];return x!==void 0?!!x:c(y)},E=!R||!D;o({target:"Array",proto:!0,forced:E},{concat:function(x){var I=d(this),A=v(I,0),k=0,U,W,P,B,H;for(U=-1,P=arguments.length;U<P;U++)if(H=U===-1?I:arguments[U],w(H)){if(B=f(H.length),k+B>T)throw TypeError(C);for(W=0;W<B;W++,k++)W in H&&h(A,k,H[W])}else{if(k>=T)throw TypeError(C);h(A,k++,H)}return A.length=k,A}})},"9bdd":function(s,i,a){var o=a("825a");s.exports=function(l,c,u,d){try{return d?c(o(u)[0],u[1]):c(u)}catch(h){var f=l.return;throw f!==void 0&&o(f.call(l)),h}}},"9bf2":function(s,i,a){var o=a("83ab"),l=a("0cfb"),c=a("825a"),u=a("c04e"),d=Object.defineProperty;i.f=o?d:function(h,v,m){if(c(h),v=u(v,!0),c(m),l)try{return d(h,v,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(h[v]=m.value),h}},"9ed3":function(s,i,a){var o=a("ae93").IteratorPrototype,l=a("7c73"),c=a("5c6c"),u=a("d44e"),d=a("3f8c"),f=function(){return this};s.exports=function(h,v,m){var g=v+" Iterator";return h.prototype=l(o,{next:c(1,m)}),u(h,g,!1,!0),d[g]=f,h}},"9f7f":function(s,i,a){var o=a("d039");function l(c,u){return RegExp(c,u)}i.UNSUPPORTED_Y=o(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),i.BROKEN_CARET=o(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(s,i,a){var o=a("e8b5"),l=a("50c4"),c=a("0366"),u=function(d,f,h,v,m,g,b,_){for(var T=m,C=0,R=b?c(b,_,3):!1,D;C<v;){if(C in h){if(D=R?R(h[C],C,f):h[C],g>0&&o(D))T=u(d,f,D,l(D.length),T,g-1)-1;else{if(T>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[T]=D}T++}C++}return T};s.exports=u},a352:function(s,i){s.exports=n},a434:function(s,i,a){var o=a("23e7"),l=a("23cb"),c=a("a691"),u=a("50c4"),d=a("7b0b"),f=a("65f0"),h=a("8418"),v=a("1dde"),m=a("ae40"),g=v("splice"),b=m("splice",{ACCESSORS:!0,0:0,1:2}),_=Math.max,T=Math.min,C=9007199254740991,R="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!g||!b},{splice:function(w,E){var y=d(this),x=u(y.length),I=l(w,x),A=arguments.length,k,U,W,P,B,H;if(A===0?k=U=0:A===1?(k=0,U=x-I):(k=A-2,U=T(_(c(E),0),x-I)),x+k-U>C)throw TypeError(R);for(W=f(y,U),P=0;P<U;P++)B=I+P,B in y&&h(W,P,y[B]);if(W.length=U,k<U){for(P=I;P<x-U;P++)B=P+U,H=P+k,B in y?y[H]=y[B]:delete y[H];for(P=x;P>x-U+k;P--)delete y[P-1]}else if(k>U)for(P=x-U;P>I;P--)B=P+U-1,H=P+k-1,B in y?y[H]=y[B]:delete y[H];for(P=0;P<k;P++)y[P+I]=arguments[P+2];return y.length=x-U+k,W}})},a4d3:function(s,i,a){var o=a("23e7"),l=a("da84"),c=a("d066"),u=a("c430"),d=a("83ab"),f=a("4930"),h=a("fdbf"),v=a("d039"),m=a("5135"),g=a("e8b5"),b=a("861d"),_=a("825a"),T=a("7b0b"),C=a("fc6a"),R=a("c04e"),D=a("5c6c"),w=a("7c73"),E=a("df75"),y=a("241c"),x=a("057f"),I=a("7418"),A=a("06cf"),k=a("9bf2"),U=a("d1e7"),W=a("9112"),P=a("6eeb"),B=a("5692"),H=a("f772"),L=a("d012"),Z=a("90e3"),j=a("b622"),O=a("e538"),G=a("746f"),X=a("d44e"),q=a("69f3"),pe=a("b727").forEach,ie=H("hidden"),de="Symbol",z="prototype",J=j("toPrimitive"),me=q.set,Y=q.getterFor(de),K=Object[z],ee=l.Symbol,fe=c("JSON","stringify"),ve=A.f,Q=k.f,re=x.f,be=U.f,Te=B("symbols"),_e=B("op-symbols"),ke=B("string-to-symbol-registry"),Be=B("symbol-to-string-registry"),Ce=B("wks"),je=l.QObject,Ue=!je||!je[z]||!je[z].findChild,He=d&&v(function(){return w(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a!=7})?function(ct,st,ut){var Ct=ve(K,st);Ct&&delete K[st],Q(ct,st,ut),Ct&&ct!==K&&Q(K,st,Ct)}:Q,qe=function(ct,st){var ut=Te[ct]=w(ee[z]);return me(ut,{type:de,tag:ct,description:st}),d||(ut.description=st),ut},ye=h?function(ct){return typeof ct=="symbol"}:function(ct){return Object(ct)instanceof ee},xe=function(st,ut,Ct){st===K&&xe(_e,ut,Ct),_(st);var Ft=R(ut,!0);return _(Ct),m(Te,Ft)?(Ct.enumerable?(m(st,ie)&&st[ie][Ft]&&(st[ie][Ft]=!1),Ct=w(Ct,{enumerable:D(0,!1)})):(m(st,ie)||Q(st,ie,D(1,{})),st[ie][Ft]=!0),He(st,Ft,Ct)):Q(st,Ft,Ct)},Ee=function(st,ut){_(st);var Ct=C(ut),Ft=E(Ct).concat(mt(Ct));return pe(Ft,function(pr){(!d||Ge.call(Ct,pr))&&xe(st,pr,Ct[pr])}),st},Fe=function(st,ut){return ut===void 0?w(st):Ee(w(st),ut)},Ge=function(st){var ut=R(st,!0),Ct=be.call(this,ut);return this===K&&m(Te,ut)&&!m(_e,ut)?!1:Ct||!m(this,ut)||!m(Te,ut)||m(this,ie)&&this[ie][ut]?Ct:!0},tt=function(st,ut){var Ct=C(st),Ft=R(ut,!0);if(!(Ct===K&&m(Te,Ft)&&!m(_e,Ft))){var pr=ve(Ct,Ft);return pr&&m(Te,Ft)&&!(m(Ct,ie)&&Ct[ie][Ft])&&(pr.enumerable=!0),pr}},ht=function(st){var ut=re(C(st)),Ct=[];return pe(ut,function(Ft){!m(Te,Ft)&&!m(L,Ft)&&Ct.push(Ft)}),Ct},mt=function(st){var ut=st===K,Ct=re(ut?_e:C(st)),Ft=[];return pe(Ct,function(pr){m(Te,pr)&&(!ut||m(K,pr))&&Ft.push(Te[pr])}),Ft};if(f||(ee=function(){if(this instanceof ee)throw TypeError("Symbol is not a constructor");var st=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ut=Z(st),Ct=function(Ft){this===K&&Ct.call(_e,Ft),m(this,ie)&&m(this[ie],ut)&&(this[ie][ut]=!1),He(this,ut,D(1,Ft))};return d&&Ue&&He(K,ut,{configurable:!0,set:Ct}),qe(ut,st)},P(ee[z],"toString",function(){return Y(this).tag}),P(ee,"withoutSetter",function(ct){return qe(Z(ct),ct)}),U.f=Ge,k.f=xe,A.f=tt,y.f=x.f=ht,I.f=mt,O.f=function(ct){return qe(j(ct),ct)},d&&(Q(ee[z],"description",{configurable:!0,get:function(){return Y(this).description}}),u||P(K,"propertyIsEnumerable",Ge,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:ee}),pe(E(Ce),function(ct){G(ct)}),o({target:de,stat:!0,forced:!f},{for:function(ct){var st=String(ct);if(m(ke,st))return ke[st];var ut=ee(st);return ke[st]=ut,Be[ut]=st,ut},keyFor:function(st){if(!ye(st))throw TypeError(st+" is not a symbol");if(m(Be,st))return Be[st]},useSetter:function(){Ue=!0},useSimple:function(){Ue=!1}}),o({target:"Object",stat:!0,forced:!f,sham:!d},{create:Fe,defineProperty:xe,defineProperties:Ee,getOwnPropertyDescriptor:tt}),o({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:ht,getOwnPropertySymbols:mt}),o({target:"Object",stat:!0,forced:v(function(){I.f(1)})},{getOwnPropertySymbols:function(st){return I.f(T(st))}}),fe){var Lt=!f||v(function(){var ct=ee();return fe([ct])!="[null]"||fe({a:ct})!="{}"||fe(Object(ct))!="{}"});o({target:"JSON",stat:!0,forced:Lt},{stringify:function(st,ut,Ct){for(var Ft=[st],pr=1,$n;arguments.length>pr;)Ft.push(arguments[pr++]);if($n=ut,!(!b(ut)&&st===void 0||ye(st)))return g(ut)||(ut=function(ui,ts){if(typeof $n=="function"&&(ts=$n.call(this,ui,ts)),!ye(ts))return ts}),Ft[1]=ut,fe.apply(null,Ft)}})}ee[z][J]||W(ee[z],J,ee[z].valueOf),X(ee,de),L[ie]=!0},a630:function(s,i,a){var o=a("23e7"),l=a("4df4"),c=a("1c7e"),u=!c(function(d){Array.from(d)});o({target:"Array",stat:!0,forced:u},{from:l})},a640:function(s,i,a){var o=a("d039");s.exports=function(l,c){var u=[][l];return!!u&&o(function(){u.call(null,c||function(){throw 1},1)})}},a691:function(s,i){var a=Math.ceil,o=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(l>0?o:a)(l)}},ab13:function(s,i,a){var o=a("b622"),l=o("match");s.exports=function(c){var u=/./;try{"/./"[c](u)}catch{try{return u[l]=!1,"/./"[c](u)}catch{}}return!1}},ac1f:function(s,i,a){var o=a("23e7"),l=a("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(s,i,a){var o=a("825a");s.exports=function(){var l=o(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("5135"),u=Object.defineProperty,d={},f=function(h){throw h};s.exports=function(h,v){if(c(d,h))return d[h];v||(v={});var m=[][h],g=c(v,"ACCESSORS")?v.ACCESSORS:!1,b=c(v,0)?v[0]:f,_=c(v,1)?v[1]:void 0;return d[h]=!!m&&!l(function(){if(g&&!o)return!0;var T={length:-1};g?u(T,1,{enumerable:!0,get:f}):T[1]=1,m.call(T,b,_)})}},ae93:function(s,i,a){var o=a("e163"),l=a("9112"),c=a("5135"),u=a("b622"),d=a("c430"),f=u("iterator"),h=!1,v=function(){return this},m,g,b;[].keys&&(b=[].keys(),"next"in b?(g=o(o(b)),g!==Object.prototype&&(m=g)):h=!0),m==null&&(m={}),!d&&!c(m,f)&&l(m,f,v),s.exports={IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:h}},b041:function(s,i,a){var o=a("00ee"),l=a("f5df");s.exports=o?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(s,i,a){var o=a("83ab"),l=a("9bf2").f,c=Function.prototype,u=c.toString,d=/^\s*function ([^ (]*)/,f="name";o&&!(f in c)&&l(c,f,{configurable:!0,get:function(){try{return u.call(this).match(d)[1]}catch{return""}}})},b622:function(s,i,a){var o=a("da84"),l=a("5692"),c=a("5135"),u=a("90e3"),d=a("4930"),f=a("fdbf"),h=l("wks"),v=o.Symbol,m=f?v:v&&v.withoutSetter||u;s.exports=function(g){return c(h,g)||(d&&c(v,g)?h[g]=v[g]:h[g]=m("Symbol."+g)),h[g]}},b64b:function(s,i,a){var o=a("23e7"),l=a("7b0b"),c=a("df75"),u=a("d039"),d=u(function(){c(1)});o({target:"Object",stat:!0,forced:d},{keys:function(h){return c(l(h))}})},b727:function(s,i,a){var o=a("0366"),l=a("44ad"),c=a("7b0b"),u=a("50c4"),d=a("65f0"),f=[].push,h=function(v){var m=v==1,g=v==2,b=v==3,_=v==4,T=v==6,C=v==5||T;return function(R,D,w,E){for(var y=c(R),x=l(y),I=o(D,w,3),A=u(x.length),k=0,U=E||d,W=m?U(R,A):g?U(R,0):void 0,P,B;A>k;k++)if((C||k in x)&&(P=x[k],B=I(P,k,y),v)){if(m)W[k]=B;else if(B)switch(v){case 3:return!0;case 5:return P;case 6:return k;case 2:f.call(W,P)}else if(_)return!1}return T?-1:b||_?_:W}};s.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},c04e:function(s,i,a){var o=a("861d");s.exports=function(l,c){if(!o(l))return l;var u,d;if(c&&typeof(u=l.toString)=="function"&&!o(d=u.call(l))||typeof(u=l.valueOf)=="function"&&!o(d=u.call(l))||!c&&typeof(u=l.toString)=="function"&&!o(d=u.call(l)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(s,i){s.exports=!1},c6b6:function(s,i){var a={}.toString;s.exports=function(o){return a.call(o).slice(8,-1)}},c6cd:function(s,i,a){var o=a("da84"),l=a("ce4e"),c="__core-js_shared__",u=o[c]||l(c,{});s.exports=u},c740:function(s,i,a){var o=a("23e7"),l=a("b727").findIndex,c=a("44d2"),u=a("ae40"),d="findIndex",f=!0,h=u(d);d in[]&&Array(1)[d](function(){f=!1}),o({target:"Array",proto:!0,forced:f||!h},{findIndex:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),c(d)},c8ba:function(s,i){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}s.exports=a},c975:function(s,i,a){var o=a("23e7"),l=a("4d64").indexOf,c=a("a640"),u=a("ae40"),d=[].indexOf,f=!!d&&1/[1].indexOf(1,-0)<0,h=c("indexOf"),v=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:f||!h||!v},{indexOf:function(g){return f?d.apply(this,arguments)||0:l(this,g,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,i,a){var o=a("5135"),l=a("fc6a"),c=a("4d64").indexOf,u=a("d012");s.exports=function(d,f){var h=l(d),v=0,m=[],g;for(g in h)!o(u,g)&&o(h,g)&&m.push(g);for(;f.length>v;)o(h,g=f[v++])&&(~c(m,g)||m.push(g));return m}},caad:function(s,i,a){var o=a("23e7"),l=a("4d64").includes,c=a("44d2"),u=a("ae40"),d=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!d},{includes:function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(s,i,a){var o=a("da84"),l=a("861d"),c=o.document,u=l(c)&&l(c.createElement);s.exports=function(d){return u?c.createElement(d):{}}},ce4e:function(s,i,a){var o=a("da84"),l=a("9112");s.exports=function(c,u){try{l(o,c,u)}catch{o[c]=u}return u}},d012:function(s,i){s.exports={}},d039:function(s,i){s.exports=function(a){try{return!!a()}catch{return!0}}},d066:function(s,i,a){var o=a("428f"),l=a("da84"),c=function(u){return typeof u=="function"?u:void 0};s.exports=function(u,d){return arguments.length<2?c(o[u])||c(l[u]):o[u]&&o[u][d]||l[u]&&l[u][d]}},d1e7:function(s,i,a){var o={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!o.call({1:2},1);i.f=c?function(d){var f=l(this,d);return!!f&&f.enumerable}:o},d28b:function(s,i,a){var o=a("746f");o("iterator")},d2bb:function(s,i,a){var o=a("825a"),l=a("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,u={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(u,[]),c=u instanceof Array}catch{}return function(h,v){return o(h),l(v),c?d.call(h,v):h.__proto__=v,h}}():void 0)},d3b7:function(s,i,a){var o=a("00ee"),l=a("6eeb"),c=a("b041");o||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(s,i,a){var o=a("9bf2").f,l=a("5135"),c=a("b622"),u=c("toStringTag");s.exports=function(d,f,h){d&&!l(d=h?d:d.prototype,u)&&o(d,u,{configurable:!0,value:f})}},d58f:function(s,i,a){var o=a("1c0b"),l=a("7b0b"),c=a("44ad"),u=a("50c4"),d=function(f){return function(h,v,m,g){o(v);var b=l(h),_=c(b),T=u(b.length),C=f?T-1:0,R=f?-1:1;if(m<2)for(;;){if(C in _){g=_[C],C+=R;break}if(C+=R,f?C<0:T<=C)throw TypeError("Reduce of empty array with no initial value")}for(;f?C>=0:T>C;C+=R)C in _&&(g=v(g,_[C],C,b));return g}};s.exports={left:d(!1),right:d(!0)}},d784:function(s,i,a){a("ac1f");var o=a("6eeb"),l=a("d039"),c=a("b622"),u=a("9263"),d=a("9112"),f=c("species"),h=!l(function(){var _=/./;return _.exec=function(){var T=[];return T.groups={a:"7"},T},"".replace(_,"$<a>")!=="7"}),v=function(){return"a".replace(/./,"$0")==="$0"}(),m=c("replace"),g=function(){return/./[m]?/./[m]("a","$0")==="":!1}(),b=!l(function(){var _=/(?:)/,T=_.exec;_.exec=function(){return T.apply(this,arguments)};var C="ab".split(_);return C.length!==2||C[0]!=="a"||C[1]!=="b"});s.exports=function(_,T,C,R){var D=c(_),w=!l(function(){var k={};return k[D]=function(){return 7},""[_](k)!=7}),E=w&&!l(function(){var k=!1,U=/a/;return _==="split"&&(U={},U.constructor={},U.constructor[f]=function(){return U},U.flags="",U[D]=/./[D]),U.exec=function(){return k=!0,null},U[D](""),!k});if(!w||!E||_==="replace"&&!(h&&v&&!g)||_==="split"&&!b){var y=/./[D],x=C(D,""[_],function(k,U,W,P,B){return U.exec===u?w&&!B?{done:!0,value:y.call(U,W,P)}:{done:!0,value:k.call(W,U,P)}:{done:!1}},{REPLACE_KEEPS_$0:v,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}),I=x[0],A=x[1];o(String.prototype,_,I),o(RegExp.prototype,D,T==2?function(k,U){return A.call(k,this,U)}:function(k){return A.call(k,this)})}R&&d(RegExp.prototype[D],"sham",!0)}},d81d:function(s,i,a){var o=a("23e7"),l=a("b727").map,c=a("1dde"),u=a("ae40"),d=c("map"),f=u("map");o({target:"Array",proto:!0,forced:!d||!f},{map:function(v){return l(this,v,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,i,a){(function(o){var l=function(c){return c&&c.Math==Math&&c};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof o=="object"&&o)||Function("return this")()}).call(this,a("c8ba"))},dbb4:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("56ef"),u=a("fc6a"),d=a("06cf"),f=a("8418");o({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(v){for(var m=u(v),g=d.f,b=c(m),_={},T=0,C,R;b.length>T;)R=g(m,C=b[T++]),R!==void 0&&f(_,C,R);return _}})},dbf1:function(s,i,a){(function(o){a.d(i,"a",function(){return c});function l(){return typeof window<"u"?window.console:o.console}var c=l()}).call(this,a("c8ba"))},ddb0:function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("e260"),u=a("9112"),d=a("b622"),f=d("iterator"),h=d("toStringTag"),v=c.values;for(var m in l){var g=o[m],b=g&&g.prototype;if(b){if(b[f]!==v)try{u(b,f,v)}catch{b[f]=v}if(b[h]||u(b,h,m),l[m]){for(var _ in c)if(b[_]!==c[_])try{u(b,_,c[_])}catch{b[_]=c[_]}}}}},df75:function(s,i,a){var o=a("ca84"),l=a("7839");s.exports=Object.keys||function(u){return o(u,l)}},e01a:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("da84"),u=a("5135"),d=a("861d"),f=a("9bf2").f,h=a("e893"),v=c.Symbol;if(l&&typeof v=="function"&&(!("description"in v.prototype)||v().description!==void 0)){var m={},g=function(){var D=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),w=this instanceof g?new v(D):D===void 0?v():v(D);return D===""&&(m[w]=!0),w};h(g,v);var b=g.prototype=v.prototype;b.constructor=g;var _=b.toString,T=String(v("test"))=="Symbol(test)",C=/^Symbol\((.*)\)[^)]+$/;f(b,"description",{configurable:!0,get:function(){var D=d(this)?this.valueOf():this,w=_.call(D);if(u(m,D))return"";var E=T?w.slice(7,-1):w.replace(C,"$1");return E===""?void 0:E}}),o({global:!0,forced:!0},{Symbol:g})}},e163:function(s,i,a){var o=a("5135"),l=a("7b0b"),c=a("f772"),u=a("e177"),d=c("IE_PROTO"),f=Object.prototype;s.exports=u?Object.getPrototypeOf:function(h){return h=l(h),o(h,d)?h[d]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?f:null}},e177:function(s,i,a){var o=a("d039");s.exports=!o(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(s,i,a){var o=a("fc6a"),l=a("44d2"),c=a("3f8c"),u=a("69f3"),d=a("7dd0"),f="Array Iterator",h=u.set,v=u.getterFor(f);s.exports=d(Array,"Array",function(m,g){h(this,{type:f,target:o(m),index:0,kind:g})},function(){var m=v(this),g=m.target,b=m.kind,_=m.index++;return!g||_>=g.length?(m.target=void 0,{value:void 0,done:!0}):b=="keys"?{value:_,done:!1}:b=="values"?{value:g[_],done:!1}:{value:[_,g[_]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("fc6a"),u=a("06cf").f,d=a("83ab"),f=l(function(){u(1)}),h=!d||f;o({target:"Object",stat:!0,forced:h,sham:!d},{getOwnPropertyDescriptor:function(m,g){return u(c(m),g)}})},e538:function(s,i,a){var o=a("b622");i.f=o},e893:function(s,i,a){var o=a("5135"),l=a("56ef"),c=a("06cf"),u=a("9bf2");s.exports=function(d,f){for(var h=l(f),v=u.f,m=c.f,g=0;g<h.length;g++){var b=h[g];o(d,b)||v(d,b,m(f,b))}}},e8b5:function(s,i,a){var o=a("c6b6");s.exports=Array.isArray||function(c){return o(c)=="Array"}},e95a:function(s,i,a){var o=a("b622"),l=a("3f8c"),c=o("iterator"),u=Array.prototype;s.exports=function(d){return d!==void 0&&(l.Array===d||u[c]===d)}},f5df:function(s,i,a){var o=a("00ee"),l=a("c6b6"),c=a("b622"),u=c("toStringTag"),d=l(function(){return arguments}())=="Arguments",f=function(h,v){try{return h[v]}catch{}};s.exports=o?l:function(h){var v,m,g;return h===void 0?"Undefined":h===null?"Null":typeof(m=f(v=Object(h),u))=="string"?m:d?l(v):(g=l(v))=="Object"&&typeof v.callee=="function"?"Arguments":g}},f772:function(s,i,a){var o=a("5692"),l=a("90e3"),c=o("keys");s.exports=function(u){return c[u]||(c[u]=l(u))}},fb15:function(s,i,a){if(a.r(i),typeof window<"u"){var o=window.document.currentScript;{var l=a("8875");o=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(a.p=c[1])}a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("159b"),a("a4d3"),a("e439"),a("dbb4"),a("b64b");function u(ye,xe,Ee){return xe in ye?Object.defineProperty(ye,xe,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):ye[xe]=Ee,ye}function d(ye,xe){var Ee=Object.keys(ye);if(Object.getOwnPropertySymbols){var Fe=Object.getOwnPropertySymbols(ye);xe&&(Fe=Fe.filter(function(Ge){return Object.getOwnPropertyDescriptor(ye,Ge).enumerable})),Ee.push.apply(Ee,Fe)}return Ee}function f(ye){for(var xe=1;xe<arguments.length;xe++){var Ee=arguments[xe]!=null?arguments[xe]:{};xe%2?d(Object(Ee),!0).forEach(function(Fe){u(ye,Fe,Ee[Fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(Ee)):d(Object(Ee)).forEach(function(Fe){Object.defineProperty(ye,Fe,Object.getOwnPropertyDescriptor(Ee,Fe))})}return ye}function h(ye){if(Array.isArray(ye))return ye}a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function v(ye,xe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ye)))){var Ee=[],Fe=!0,Ge=!1,tt=void 0;try{for(var ht=ye[Symbol.iterator](),mt;!(Fe=(mt=ht.next()).done)&&(Ee.push(mt.value),!(xe&&Ee.length===xe));Fe=!0);}catch(Lt){Ge=!0,tt=Lt}finally{try{!Fe&&ht.return!=null&&ht.return()}finally{if(Ge)throw tt}}return Ee}}a("a630"),a("fb6a"),a("b0c0"),a("25f0");function m(ye,xe){(xe==null||xe>ye.length)&&(xe=ye.length);for(var Ee=0,Fe=new Array(xe);Ee<xe;Ee++)Fe[Ee]=ye[Ee];return Fe}function g(ye,xe){if(ye){if(typeof ye=="string")return m(ye,xe);var Ee=Object.prototype.toString.call(ye).slice(8,-1);if(Ee==="Object"&&ye.constructor&&(Ee=ye.constructor.name),Ee==="Map"||Ee==="Set")return Array.from(ye);if(Ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ee))return m(ye,xe)}}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(ye,xe){return h(ye)||v(ye,xe)||g(ye,xe)||b()}function T(ye){if(Array.isArray(ye))return m(ye)}function C(ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(ye))return Array.from(ye)}function R(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(ye){return T(ye)||C(ye)||g(ye)||R()}var w=a("a352"),E=a.n(w);function y(ye){ye.parentElement!==null&&ye.parentElement.removeChild(ye)}function x(ye,xe,Ee){var Fe=Ee===0?ye.children[0]:ye.children[Ee-1].nextSibling;ye.insertBefore(xe,Fe)}var I=a("dbf1");a("13d5"),a("4fad"),a("ac1f"),a("5319");function A(ye){var xe=Object.create(null);return function(Fe){var Ge=xe[Fe];return Ge||(xe[Fe]=ye(Fe))}}var k=/-(\w)/g,U=A(function(ye){return ye.replace(k,function(xe,Ee){return Ee.toUpperCase()})});a("5db7"),a("73d9");var W=["Start","Add","Remove","Update","End"],P=["Choose","Unchoose","Sort","Filter","Clone"],B=["Move"],H=[B,W,P].flatMap(function(ye){return ye}).map(function(ye){return"on".concat(ye)}),L={manage:B,manageAndEmit:W,emit:P};function Z(ye){return H.indexOf(ye)!==-1}a("caad"),a("2ca0");var j=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function O(ye){return j.includes(ye)}function G(ye){return["transition-group","TransitionGroup"].includes(ye)}function X(ye){return["id","class","role","style"].includes(ye)||ye.startsWith("data-")||ye.startsWith("aria-")||ye.startsWith("on")}function q(ye){return ye.reduce(function(xe,Ee){var Fe=_(Ee,2),Ge=Fe[0],tt=Fe[1];return xe[Ge]=tt,xe},{})}function pe(ye){var xe=ye.$attrs,Ee=ye.componentData,Fe=Ee===void 0?{}:Ee,Ge=q(Object.entries(xe).filter(function(tt){var ht=_(tt,2),mt=ht[0];return ht[1],X(mt)}));return f(f({},Ge),Fe)}function ie(ye){var xe=ye.$attrs,Ee=ye.callBackBuilder,Fe=q(de(xe));Object.entries(Ee).forEach(function(tt){var ht=_(tt,2),mt=ht[0],Lt=ht[1];L[mt].forEach(function(ct){Fe["on".concat(ct)]=Lt(ct)})});var Ge="[data-draggable]".concat(Fe.draggable||"");return f(f({},Fe),{},{draggable:Ge})}function de(ye){return Object.entries(ye).filter(function(xe){var Ee=_(xe,2),Fe=Ee[0];return Ee[1],!X(Fe)}).map(function(xe){var Ee=_(xe,2),Fe=Ee[0],Ge=Ee[1];return[U(Fe),Ge]}).filter(function(xe){var Ee=_(xe,2),Fe=Ee[0];return Ee[1],!Z(Fe)})}a("c740");function z(ye,xe){if(!(ye instanceof xe))throw new TypeError("Cannot call a class as a function")}function J(ye,xe){for(var Ee=0;Ee<xe.length;Ee++){var Fe=xe[Ee];Fe.enumerable=Fe.enumerable||!1,Fe.configurable=!0,"value"in Fe&&(Fe.writable=!0),Object.defineProperty(ye,Fe.key,Fe)}}function me(ye,xe,Ee){return xe&&J(ye.prototype,xe),ye}var Y=function(xe){var Ee=xe.el;return Ee},K=function(xe,Ee){return xe.__draggable_context=Ee},ee=function(xe){return xe.__draggable_context},fe=function(){function ye(xe){var Ee=xe.nodes,Fe=Ee.header,Ge=Ee.default,tt=Ee.footer,ht=xe.root,mt=xe.realList;z(this,ye),this.defaultNodes=Ge,this.children=[].concat(D(Fe),D(Ge),D(tt)),this.externalComponent=ht.externalComponent,this.rootTransition=ht.transition,this.tag=ht.tag,this.realList=mt}return me(ye,[{key:"render",value:function(Ee,Fe){var Ge=this.tag,tt=this.children,ht=this._isRootComponent,mt=ht?{default:function(){return tt}}:tt;return Ee(Ge,Fe,mt)}},{key:"updated",value:function(){var Ee=this.defaultNodes,Fe=this.realList;Ee.forEach(function(Ge,tt){K(Y(Ge),{element:Fe[tt],index:tt})})}},{key:"getUnderlyingVm",value:function(Ee){return ee(Ee)}},{key:"getVmIndexFromDomIndex",value:function(Ee,Fe){var Ge=this.defaultNodes,tt=Ge.length,ht=Fe.children,mt=ht.item(Ee);if(mt===null)return tt;var Lt=ee(mt);if(Lt)return Lt.index;if(tt===0)return 0;var ct=Y(Ge[0]),st=D(ht).findIndex(function(ut){return ut===ct});return Ee<st?0:tt}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),ye}(),ve=a("8bbf");function Q(ye,xe){var Ee=ye[xe];return Ee?Ee():[]}function re(ye){var xe=ye.$slots,Ee=ye.realList,Fe=ye.getKey,Ge=Ee||[],tt=["header","footer"].map(function(ut){return Q(xe,ut)}),ht=_(tt,2),mt=ht[0],Lt=ht[1],ct=xe.item;if(!ct)throw new Error("draggable element must have an item slot");var st=Ge.flatMap(function(ut,Ct){return ct({element:ut,index:Ct}).map(function(Ft){return Ft.key=Fe(ut),Ft.props=f(f({},Ft.props||{}),{},{"data-draggable":!0}),Ft})});if(st.length!==Ge.length)throw new Error("Item slot must have only one child");return{header:mt,footer:Lt,default:st}}function be(ye){var xe=G(ye),Ee=!O(ye)&&!xe;return{transition:xe,externalComponent:Ee,tag:Ee?Object(ve.resolveComponent)(ye):xe?ve.TransitionGroup:ye}}function Te(ye){var xe=ye.$slots,Ee=ye.tag,Fe=ye.realList,Ge=ye.getKey,tt=re({$slots:xe,realList:Fe,getKey:Ge}),ht=be(Ee);return new fe({nodes:tt,root:ht,realList:Fe})}function _e(ye,xe){var Ee=this;Object(ve.nextTick)(function(){return Ee.$emit(ye.toLowerCase(),xe)})}function ke(ye){var xe=this;return function(Ee,Fe){if(xe.realList!==null)return xe["onDrag".concat(ye)](Ee,Fe)}}function Be(ye){var xe=this,Ee=ke.call(this,ye);return function(Fe,Ge){Ee.call(xe,Fe,Ge),_e.call(xe,ye,Fe)}}var Ce=null,je={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(xe){return xe}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Ue=["update:modelValue","change"].concat(D([].concat(D(L.manageAndEmit),D(L.emit)).map(function(ye){return ye.toLowerCase()}))),He=Object(ve.defineComponent)({name:"draggable",inheritAttrs:!1,props:je,emits:Ue,data:function(){return{error:!1}},render:function(){try{this.error=!1;var xe=this.$slots,Ee=this.$attrs,Fe=this.tag,Ge=this.componentData,tt=this.realList,ht=this.getKey,mt=Te({$slots:xe,tag:Fe,realList:tt,getKey:ht});this.componentStructure=mt;var Lt=pe({$attrs:Ee,componentData:Ge});return mt.render(ve.h,Lt)}catch(ct){return this.error=!0,Object(ve.h)("pre",{style:{color:"red"}},ct.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&I.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var xe=this;if(!this.error){var Ee=this.$attrs,Fe=this.$el,Ge=this.componentStructure;Ge.updated();var tt=ie({$attrs:Ee,callBackBuilder:{manageAndEmit:function(Lt){return Be.call(xe,Lt)},emit:function(Lt){return _e.bind(xe,Lt)},manage:function(Lt){return ke.call(xe,Lt)}}}),ht=Fe.nodeType===1?Fe:Fe.parentElement;this._sortable=new E.a(ht,tt),this.targetDomElement=ht,ht.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var xe=this.list;return xe||this.modelValue},getKey:function(){var xe=this.itemKey;return typeof xe=="function"?xe:function(Ee){return Ee[xe]}}},watch:{$attrs:{handler:function(xe){var Ee=this._sortable;Ee&&de(xe).forEach(function(Fe){var Ge=_(Fe,2),tt=Ge[0],ht=Ge[1];Ee.option(tt,ht)})},deep:!0}},methods:{getUnderlyingVm:function(xe){return this.componentStructure.getUnderlyingVm(xe)||null},getUnderlyingPotencialDraggableComponent:function(xe){return xe.__draggable_component__},emitChanges:function(xe){var Ee=this;Object(ve.nextTick)(function(){return Ee.$emit("change",xe)})},alterList:function(xe){if(this.list){xe(this.list);return}var Ee=D(this.modelValue);xe(Ee),this.$emit("update:modelValue",Ee)},spliceList:function(){var xe=arguments,Ee=function(Ge){return Ge.splice.apply(Ge,D(xe))};this.alterList(Ee)},updatePosition:function(xe,Ee){var Fe=function(tt){return tt.splice(Ee,0,tt.splice(xe,1)[0])};this.alterList(Fe)},getRelatedContextFromMoveEvent:function(xe){var Ee=xe.to,Fe=xe.related,Ge=this.getUnderlyingPotencialDraggableComponent(Ee);if(!Ge)return{component:Ge};var tt=Ge.realList,ht={list:tt,component:Ge};if(Ee!==Fe&&tt){var mt=Ge.getUnderlyingVm(Fe)||{};return f(f({},mt),ht)}return ht},getVmIndexFromDomIndex:function(xe){return this.componentStructure.getVmIndexFromDomIndex(xe,this.targetDomElement)},onDragStart:function(xe){this.context=this.getUnderlyingVm(xe.item),xe.item._underlying_vm_=this.clone(this.context.element),Ce=xe.item},onDragAdd:function(xe){var Ee=xe.item._underlying_vm_;if(Ee!==void 0){y(xe.item);var Fe=this.getVmIndexFromDomIndex(xe.newIndex);this.spliceList(Fe,0,Ee);var Ge={element:Ee,newIndex:Fe};this.emitChanges({added:Ge})}},onDragRemove:function(xe){if(x(this.$el,xe.item,xe.oldIndex),xe.pullMode==="clone"){y(xe.clone);return}var Ee=this.context,Fe=Ee.index,Ge=Ee.element;this.spliceList(Fe,1);var tt={element:Ge,oldIndex:Fe};this.emitChanges({removed:tt})},onDragUpdate:function(xe){y(xe.item),x(xe.from,xe.item,xe.oldIndex);var Ee=this.context.index,Fe=this.getVmIndexFromDomIndex(xe.newIndex);this.updatePosition(Ee,Fe);var Ge={element:this.context.element,oldIndex:Ee,newIndex:Fe};this.emitChanges({moved:Ge})},computeFutureIndex:function(xe,Ee){if(!xe.element)return 0;var Fe=D(Ee.to.children).filter(function(mt){return mt.style.display!=="none"}),Ge=Fe.indexOf(Ee.related),tt=xe.component.getVmIndexFromDomIndex(Ge),ht=Fe.indexOf(Ce)!==-1;return ht||!Ee.willInsertAfter?tt:tt+1},onDragMove:function(xe,Ee){var Fe=this.move,Ge=this.realList;if(!Fe||!Ge)return!0;var tt=this.getRelatedContextFromMoveEvent(xe),ht=this.computeFutureIndex(tt,xe),mt=f(f({},this.context),{},{futureIndex:ht}),Lt=f(f({},xe),{},{relatedContext:tt,draggedContext:mt});return Fe(Lt,Ee)},onDragEnd:function(){Ce=null}}}),qe=He;i.default=qe},fb6a:function(s,i,a){var o=a("23e7"),l=a("861d"),c=a("e8b5"),u=a("23cb"),d=a("50c4"),f=a("fc6a"),h=a("8418"),v=a("b622"),m=a("1dde"),g=a("ae40"),b=m("slice"),_=g("slice",{ACCESSORS:!0,0:0,1:2}),T=v("species"),C=[].slice,R=Math.max;o({target:"Array",proto:!0,forced:!b||!_},{slice:function(w,E){var y=f(this),x=d(y.length),I=u(w,x),A=u(E===void 0?x:E,x),k,U,W;if(c(y)&&(k=y.constructor,typeof k=="function"&&(k===Array||c(k.prototype))?k=void 0:l(k)&&(k=k[T],k===null&&(k=void 0)),k===Array||k===void 0))return C.call(y,I,A);for(U=new(k===void 0?Array:k)(R(A-I,0)),W=0;I<A;I++,W++)I in y&&h(U,W,y[I]);return U.length=W,U}})},fc6a:function(s,i,a){var o=a("44ad"),l=a("1d80");s.exports=function(c){return o(l(c))}},fdbc:function(s,i){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,i,a){var o=a("4930");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(Gte);const kre={class:"assignment-dialog-modal"},Dre={class:"form-row"},Rre={key:0,class:"form-row"},Fre=["value"],Pre={key:1,class:"form-row"},Ore=["value"],Nre={key:2,class:"form-row"},Lre={class:"form-row"},Bre={class:"form-row"},Mre={class:"form-row"},Ure={class:"dialog-actions"},Vre={__name:"AssignmentDialog",props:{teachers:Array,students:Array,assignment:Object},emits:["save","close"],setup(t,{emit:e}){const r=t,n=e,s=he("lunch"),i=he(""),a=he(""),o=he(""),l=he("12:00"),c=he("12:30"),u=he(""),d=he(""),f=he("");er(()=>r.assignment,m=>{m?(d.value=m.id||Date.now().toString(),f.value=m.blockId||d.value||`block-${Date.now()}`,s.value=m.type||"lunch",i.value=m.teacherId||"",a.value=m.studentId||"",o.value=m.type==="other"?m.label:"",l.value=m.start||"12:00",c.value=m.end||"12:30",u.value=m.note||""):(d.value=Date.now().toString(),f.value=`block-${d.value}`,s.value="lunch",i.value="",a.value="",o.value="",l.value="12:00",c.value="12:30",u.value="")},{immediate:!0});const h=Ve(()=>{if(s.value==="lunch")return"Lunch";if(s.value==="break")return"Break";if(s.value==="class"){const m=r.teachers.find(g=>g.id===i.value);return m?m.name||m.email||m.id:""}if(s.value==="student"){const m=r.students.find(g=>g.id===a.value);return m?`${m.firstName} ${m.lastName}`:""}return s.value==="other"?o.value:""});function v(){!l.value||!c.value||s.value==="class"&&!i.value||s.value==="student"&&!a.value||s.value==="other"&&!o.value||n("save",{id:d.value,blockId:f.value,type:s.value,label:h.value,start:l.value,end:c.value,note:u.value,teacherId:i.value,studentId:a.value})}return(m,g)=>(N(),M("div",{class:"assignment-dialog-overlay",onClick:g[8]||(g[8]=bs(b=>m.$emit("close"),["self"]))},[p("div",kre,[g[20]||(g[20]=p("h2",null,"Add Assignment",-1)),p("form",{onSubmit:bs(v,["prevent"])},[p("div",Dre,[g[10]||(g[10]=p("label",null,"Type:",-1)),Me(p("select",{"onUpdate:modelValue":g[0]||(g[0]=b=>s.value=b)},g[9]||(g[9]=[Xn('<option value="lunch" data-v-f2af98a0>Lunch</option><option value="break" data-v-f2af98a0>Break</option><option value="class" data-v-f2af98a0>Class</option><option value="student" data-v-f2af98a0>Student</option><option value="other" data-v-f2af98a0>Other</option>',5)]),512),[[vr,s.value]])]),s.value==="class"?(N(),M("div",Rre,[g[12]||(g[12]=p("label",null,"Teacher:",-1)),Me(p("select",{"onUpdate:modelValue":g[1]||(g[1]=b=>i.value=b)},[g[11]||(g[11]=p("option",{value:""},"Select teacher...",-1)),(N(!0),M(Pe,null,We(t.teachers,b=>(N(),M("option",{key:b.id,value:b.id},oe(b.name||b.email||b.id),9,Fre))),128))],512),[[vr,i.value]])])):Re("",!0),s.value==="student"?(N(),M("div",Pre,[g[14]||(g[14]=p("label",null,"Student:",-1)),Me(p("select",{"onUpdate:modelValue":g[2]||(g[2]=b=>a.value=b)},[g[13]||(g[13]=p("option",{value:""},"Select student...",-1)),(N(!0),M(Pe,null,We(t.students,b=>(N(),M("option",{key:b.id,value:b.id},oe(b.firstName)+" "+oe(b.lastName),9,Ore))),128))],512),[[vr,a.value]])])):Re("",!0),s.value==="other"?(N(),M("div",Nre,[g[15]||(g[15]=p("label",null,"Label:",-1)),Me(p("input",{"onUpdate:modelValue":g[3]||(g[3]=b=>o.value=b),placeholder:"Custom label"},null,512),[[At,o.value]])])):Re("",!0),p("div",Lre,[g[16]||(g[16]=p("label",null,"Start Time:",-1)),Me(p("input",{"onUpdate:modelValue":g[4]||(g[4]=b=>l.value=b),type:"time",required:""},null,512),[[At,l.value]])]),p("div",Bre,[g[17]||(g[17]=p("label",null,"End Time:",-1)),Me(p("input",{"onUpdate:modelValue":g[5]||(g[5]=b=>c.value=b),type:"time",required:""},null,512),[[At,c.value]])]),p("div",Mre,[g[18]||(g[18]=p("label",null,"Note:",-1)),Me(p("input",{"onUpdate:modelValue":g[6]||(g[6]=b=>u.value=b),placeholder:"Optional note"},null,512),[[At,u.value]])]),p("div",Ure,[g[19]||(g[19]=p("button",{type:"submit",class:"btn btn-primary"},"Add",-1)),p("button",{type:"button",class:"btn btn-secondary",onClick:g[7]||(g[7]=b=>m.$emit("close"))},"Cancel")])],32)])]))}},$re=_t(Vre,[["__scopeId","data-v-f2af98a0"]]),Hre={class:"vertical-time-grid-wrapper"},jre={class:"grid-block-label-time"},Gre=["title"],Wre=["title"],zre=["onDragstart","onDrag","onDragend"],Kre={class:"assignment-content"},qre={class:"assignment-label-time"},Xre={class:"assignment-time-label"},Yre={class:"assignment-actions"},Qre=["onClick"],Jre=["onClick"],Zre=["onMousedown"],o_=24,ene={__name:"VerticalTimeGrid",props:{assignments:Array,teachers:Array,students:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,blocks:Array},emits:["update:assignments","edit-assignment"],setup(t,{emit:e}){const r=t,n=e,s=he(null);he(!1);const i=he(r.assignments?r.assignments.map(P=>({...P})):[]);er(()=>r.assignments,P=>{i.value=P?P.map(B=>({...B})):[]},{immediate:!0});function a(P){const[B,H]=P.split(":").map(Number);return B*60+H}function o(P){const B=Math.floor(P/60),H=P%60;return`${B<10?"0":""}${B}:${H<10?"0":""}${H}`}const l=Ve(()=>!r.blocks||r.blocks.length===0?"08:00":r.blocks.reduce((P,B)=>B.startTime<P?B.startTime:P,r.blocks[0].startTime)),c=Ve(()=>!r.blocks||r.blocks.length===0?"16:00":r.blocks.reduce((P,B)=>B.endTime>P?B.endTime:P,r.blocks[0].endTime)),u=Ve(()=>a(l.value)),d=Ve(()=>a(c.value)),f=Ve(()=>d.value-u.value),h=Ve(()=>f.value*2.5+o_*2);Ve(()=>{if(!r.blocks)return[];const P=[];return r.blocks.forEach(B=>{P.includes(B.startTime)||P.push(B.startTime),P.includes(B.endTime)||P.push(B.endTime)}),P.sort((B,H)=>a(B)-a(H))});function v(P){return(a(P)-u.value)*2.5+o_-10}function m(P,B){if(!P||!B)return!1;const H=a(P.startTime),L=a(P.endTime),Z=a(B.startTime),j=a(B.endTime);return H<j&&L>Z}function g(P){const B=[];for(let L=0;L<P.length;L++){const Z=P[L];let j=null;for(let O=0;O<B.length;O++)if(B[O].ids.some(G=>m(Z,P.find(X=>X.id===G)))){j=B[O];break}j?(j.ids.push(Z.id),j.blocks.push(Z)):B.push({ids:[Z.id],blocks:[Z]})}let H=!0;for(;H;){H=!1;for(let L=0;L<B.length;L++){for(let Z=L+1;Z<B.length;Z++)if(B[L].ids.some(j=>B[Z].ids.some(O=>m(P.find(G=>G.id===j),P.find(G=>G.id===O))))){B[L].ids=Array.from(new Set([...B[L].ids,...B[Z].ids])),B[L].blocks=Array.from(new Set([...B[L].blocks,...B[Z].blocks])),B.splice(Z,1),H=!0;break}if(H)break}}return B.map(L=>{const Z=L.blocks.sort((G,X)=>G.startTime.localeCompare(X.startTime)||G.id.localeCompare(X.id)),j=Z.reduce((G,X)=>X.startTime<G?X.startTime:G,Z[0].startTime),O=Z.reduce((G,X)=>X.endTime>G?X.endTime:G,Z[0].endTime);return{ids:L.ids,startTime:j,endTime:O}})}Ve(()=>g(b.value));const b=Ve(()=>(r.blocks||[]).map((P,B)=>({...P,id:P.id||`block-${B}`})));function _(P){const B=[];for(let Z=0;Z<P.length;Z++){const j=P[Z];let O=null;for(let G=0;G<B.length;G++)if(B[G].some(X=>m(j,P.find(q=>q.id===X)))){O=B[G];break}O?O.push(j.id):B.push([j.id])}let H=!0;for(;H;){H=!1;for(let Z=0;Z<B.length;Z++){for(let j=Z+1;j<B.length;j++)if(B[Z].some(O=>B[j].some(G=>m(P.find(X=>X.id===O),P.find(X=>X.id===G))))){B[Z]=Array.from(new Set([...B[Z],...B[j]])),B.splice(j,1),H=!0;break}if(H)break}}const L={};for(const Z of B){const j=Z.map(O=>P.find(G=>G.id===O)).sort((O,G)=>O.startTime.localeCompare(G.startTime)||O.id.localeCompare(G.id));j.forEach((O,G)=>{L[O.id]={groupSize:j.length,colIndex:G}})}return L}function T(P,B){const H=_(b.value)[P.id]||{groupSize:1,colIndex:0},L=v(P.startTime),Z=(a(P.endTime)-a(P.startTime))*2.5,j=100/H.groupSize;return{position:"absolute",left:j*H.colIndex+"%",width:j+"%",top:L+"px",height:Z+"px",zIndex:1,opacity:.38,boxSizing:"border-box",overflow:"hidden"}}function C(P,B){const H=i.value.filter((z,J)=>{if(z.id===P.id)return!1;const me=a(z.start),Y=a(z.end),K=a(P.start),ee=a(P.end);return me<ee&&Y>K}),L=H.length+1,j=[P,...H].sort((z,J)=>z.start.localeCompare(J.start)||z.id.localeCompare(J.id)).findIndex(z=>z.id===P.id),O=v(P.start),G=(a(P.end)-a(P.start))*2.5,X=Math.max(G,2.5),q=73,pe=27,ie=q/L;return{position:"absolute",left:pe+ie*j+"%",width:ie+"%",top:O+"px",height:X+"px",zIndex:2,minWidth:"80px",boxSizing:"border-box",padding:"4px",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",cursor:"grab",transition:"top 0.2s, height 0.2s"}}const R=he(null),D=he(0),w=he(0),E=he(null);function y(P,B){R.value=B,D.value=P.clientY,w.value=a(B.start),E.value="move",B.isDragging=!0,P.target.classList.add("background-dragging-div");const L=document.createElement("div");L.className="drag-preview-div",L.style.width="160px",L.style.height="40px",L.style.background="transparent",L.style.border="2px solid #007bff",L.style.position="absolute",L.style.top="-9999px",L.style.left="-9999px",document.body.appendChild(L),P.dataTransfer.setDragImage(L,80,20),P.dataTransfer.effectAllowed="move",P.dataTransfer.setData("text/plain",B.id)}function x(P,B){if(!R.value||P.clientY===0)return;const H=P.clientY-D.value,L=Math.round(H/2.5);if(E.value==="move"){let Z=w.value+L,j=Z+(a(B.end)-a(B.start));Z=Math.max(u.value,Math.min(Z,d.value-1)),j=Math.max(Z+1,Math.min(j,d.value)),B.start=o(Z),B.end=o(j)}}function I(P,B){R.value=null,E.value=null,B.isDragging=!1,n("update:assignments",i.value)}function A(P,B){R.value=B,D.value=P.clientY,w.value=a(B.end),E.value="resize",window.addEventListener("mousemove",k),window.addEventListener("mouseup",U)}function k(P){if(!R.value)return;const B=P.clientY-D.value;let H=w.value+Math.round(B/2.5);const L=a(R.value.start);H=Math.max(L+1,Math.min(H,d.value)),R.value.end=o(H)}function U(P){R.value=null,E.value=null,window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",U)}function W(P){const B=i.value.findIndex(H=>H.id===P);B!==-1&&(i.value.splice(B,1),n("update:assignments",i.value))}return(P,B)=>(N(),M("div",Hre,[p("div",{class:"vertical-time-grid",ref_key:"timeGridRef",ref:s,style:Cn({position:"relative",height:h.value+"px"})},[(N(!0),M(Pe,null,We(b.value,(H,L)=>(N(),M("div",{key:H.id,class:at(["grid-block-bg",H.type==="period"?"blocktype-period":"blocktype-"+(H.type||"period")]),style:Cn(T(H))},[p("div",jre,[p("span",{class:"grid-block-label",title:H.name||(H.type==="period"?H.label||H.periodName||H.periodNumber||"Period":H.type?H.type.charAt(0).toUpperCase()+H.type.slice(1):"")},oe(H.name||(H.type==="period"?H.label||H.periodName||H.periodNumber||"Period":H.type?H.type.charAt(0).toUpperCase()+H.type.slice(1):"")),9,Gre),p("span",{class:"grid-block-time",title:H.startTime},oe(H.startTime),9,Wre)])],6))),128)),(N(!0),M(Pe,null,We(i.value,(H,L)=>(N(),M("div",{key:H.id,class:at(["dialog-assignment-box",["type-"+(H.type||"other"),{dragging:H.isDragging}]]),style:Cn(C(H)),draggable:"true",onDragstart:Z=>y(Z,H),onDrag:Z=>x(Z,H),onDragend:Z=>I(Z,H)},[p("div",Kre,[p("div",qre,[p("span",Xre,oe(H.start)+""+oe(H.end)+" "+oe(H.label),1)])]),p("div",Yre,[p("button",{class:"edit-btn",onClick:Z=>P.$emit("edit-assignment",H)},"",8,Qre),p("button",{class:"delete-btn",onClick:Z=>W(H.id)},"",8,Jre)]),p("div",{class:"resize-handle",onMousedown:bs(Z=>A(Z,H),["stop"]),title:"Drag to resize block"},null,40,Zre)],46,zre))),128))],4)]))}},tne=_t(ene,[["__scopeId","data-v-8f5880e4"]]),rne={class:"dialog-header"},nne={class:"dialog-header-actions"},sne={class:"dialog-content"},ane={style:{display:"flex","align-items":"flex-start"}},ine={class:"dialog-actions"},one=["disabled"],lne={key:0},cne={key:1},une={__name:"AideScheduleEditDialog",props:{aideName:String,timeTicks:Array,isTickInAnyBlock:Function,aideAssignments:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,showAddAssignment:Boolean,addAssignment:Function,onImportAssignments:Function,onSave:Function,onClose:Function,saving:Boolean,blocks:Array,teachers:Array,students:Array},setup(t){const e=t,r=he([]),n=he(!1),s=he(null);Qt(()=>{console.log("DEBUG: AideScheduleEditDialog mounted, blocks:",e.blocks)}),er(()=>e.blocks,d=>{console.log("DEBUG: props.blocks in AideScheduleEditDialog",d)});function i(){e.onSave(r.value)}function a(){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],n.value=!0}function o(d){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],s.value={...d},n.value=!0}function l(d){if(s.value){const f=r.value.findIndex(h=>h.id===d.id);f!==-1&&(r.value[f]={...d}),s.value=null}else r.value=[...r.value,d];n.value=!1}function c(){s.value=null,n.value=!1}function u(d){console.log("handleUpdateAssignments called with:",d),r.value=d}return(d,f)=>(N(),M("div",{class:"dialog-overlay",onClick:f[4]||(f[4]=(...h)=>t.onClose&&t.onClose(...h))},[p("div",{class:"edit-dialog",onClick:f[3]||(f[3]=bs(()=>{},["stop"]))},[p("div",rne,[p("h2",null,"Edit Schedule: "+oe(t.aideName),1),p("div",nne,[p("button",{onClick:f[0]||(f[0]=(...h)=>t.onImportAssignments&&t.onImportAssignments(...h)),class:"btn btn-secondary btn-import-assignments"},"Import Aide Assignments"),p("button",{onClick:a,class:"btn btn-primary btn-add-assignment"},"Add Assignment"),p("button",{onClick:f[1]||(f[1]=(...h)=>t.onClose&&t.onClose(...h)),class:"btn btn-secondary close-btn"},"")])]),p("div",sne,[p("div",ane,[rt(tne,{timeTicks:t.timeTicks,isTickInAnyBlock:t.isTickInAnyBlock,assignments:r.value,getAssignmentBoxStyle:t.getAssignmentBoxStyle,onAssignmentDragStart:t.onAssignmentDragStart,onAssignmentDrag:t.onAssignmentDrag,onAssignmentDragEnd:t.onAssignmentDragEnd,onResizeStart:t.onResizeStart,blocks:t.blocks,onEditAssignment:o,"onUpdate:assignments":u},null,8,["timeTicks","isTickInAnyBlock","assignments","getAssignmentBoxStyle","onAssignmentDragStart","onAssignmentDrag","onAssignmentDragEnd","onResizeStart","blocks"])]),n.value?(N(),Rn($re,{key:0,teachers:t.teachers,students:t.students,assignment:s.value,onSave:l,onClose:c},null,8,["teachers","students","assignment"])):Re("",!0)]),p("div",ine,[p("button",{onClick:i,class:"btn btn-primary",disabled:t.saving},[t.saving?(N(),M("span",lne,"")):(N(),M("span",cne,"")),Ne(" "+oe(t.saving?"Saving...":"Save Schedule"),1)],8,one),p("button",{onClick:f[2]||(f[2]=(...h)=>t.onClose&&t.onClose(...h)),class:"btn btn-secondary"},"Cancel")])])]))}},dne={class:"master-schedule"},fne={key:0,class:"no-time-table"},hne={class:"no-data-message"},pne={key:1,class:"schedule-graph-container"},mne={class:"timeline-header"},vne={class:"block-time"},gne={class:"block-name"},xne={class:"block-time"},yne={class:"aide-header"},Ene={class:"aide-name"},bne=["onClick"],_ne={class:"time-line-container"},Sne={class:"time-blocks-background"},Tne={class:"assignment-bars"},Ane={class:"assignment-label"},cm=30,wne={__name:"AideScheduleMasterTable",props:{paraeducators:Array,blocks:Array,getAideTimeBlocks:Function,getAideName:Function,currentTimeTable:Object},emits:["editAideAssignment","gotoTimeTableConfig"],setup(t,{emit:e}){const r=t,n=he([]);function s(b){const _=r.getAideTimeBlocks(b).filter(T=>T.assignment).map(T=>({id:T.id,label:T.assignment,type:T.assignmentType,start:T.start||T.displayTime.split(" - ")[0],end:T.end||T.displayTime.split(" - ")[1]}));return i(_)}function i(b){if(b.length===0)return[];const _=[...b].sort((D,w)=>d(D.start)-d(w.start)),T=[];let C=[];for(const D of _)C.length===0?C=[D]:C.some(E=>d(D.start)<d(E.end)&&d(D.end)>d(E.start))?C.push(D):(T.push(C),C=[D]);C.length>0&&T.push(C);const R=[];for(const D of T)D.forEach((w,E)=>{w.overlapIndex=E,w.overlapCount=D.length,R.push(w)});return R}function a(b){if(!b.overlapCount||b.overlapCount<=1)return 10;const _=40;return(60-(b.overlapCount*_+(b.overlapCount-1)*2))/2+b.overlapIndex*(_+2)}function o(b){if(!r.blocks||r.blocks.length===0)return 0;const _=r.blocks[0],T=r.blocks[r.blocks.length-1],C=d(_.startTime),D=d(T.endTime)-C,E=(d(b)-C)/D*100;return Math.max(0,Math.min(95,E))}function l(b,_){if(!r.blocks||r.blocks.length===0)return 10;const T=r.blocks[0],C=r.blocks[r.blocks.length-1],R=d(T.startTime),w=d(C.endTime)-R,E=d(b),x=(d(_)-E)/w*100;return Math.max(5,Math.min(95,x))}function c(b){if(!r.blocks||r.blocks.length===0)return 0;const _=r.blocks[0],T=r.blocks[r.blocks.length-1],C=d(_.startTime),D=d(T.endTime)-C,E=(d(b)-C)/D*100;return Math.max(0,Math.min(95,E))}function u(b,_){if(!r.blocks||r.blocks.length===0)return 10;const T=r.blocks[0],C=r.blocks[r.blocks.length-1],R=d(T.startTime),w=d(C.endTime)-R,E=d(b),x=(d(_)-E)/w*100;return Math.max(5,Math.min(95,x))}function d(b){const[_,T]=b.split(":").map(Number);return _*60+T}function f(b){var T;const _=((T=b.name)==null?void 0:T.toLowerCase())||"";return _.includes("lunch")?"lunch":_.includes("break")||_.includes("recess")?"break":_.includes("period")||_.includes("class")?"period":"other"}function h(b){const _=[...b].sort((R,D)=>d(R.startTime)-d(D.startTime)),T=[];for(const R of _){let D=!1;for(let w=0;w<T.length;w++){const E=T[w];if(!E.some(x=>d(R.startTime)<d(x.endTime)&&d(R.endTime)>d(x.startTime))){E.push(R),R.overlapIndex=w,D=!0;break}}D||(R.overlapIndex=T.length,T.push([R]))}const C=T.length;return _.map(R=>({...R,overlapIndex:R.overlapIndex,overlapCount:C}))}const v=Ve(()=>h(r.blocks||[])),m=Ve(()=>Math.max(...v.value.map(b=>b.overlapCount||1),1)),g=Ve(()=>m.value*cm);return er(()=>r.aideAssignments,b=>{n.value=b?JSON.parse(JSON.stringify(b)):[]},{immediate:!0}),(b,_)=>(N(),M("div",dne,[_[4]||(_[4]=p("h2",null,"Master Schedule View",-1)),LS(b.$slots,"tab-bar",{},void 0,!0),!t.currentTimeTable||!t.currentTimeTable.schedule||t.currentTimeTable.schedule.length===0?(N(),M("div",fne,[p("div",hne,[_[1]||(_[1]=p("h3",null,"No Time Table Configured",-1)),_[2]||(_[2]=p("p",null,"You need to configure a time table first before you can create aide assignments.",-1)),p("button",{onClick:_[0]||(_[0]=T=>b.$emit("gotoTimeTableConfig")),class:"btn btn-primary"}," Go to Time Table Configuration ")])])):(N(),M("div",pne,[p("div",mne,[_[3]||(_[3]=p("div",{class:"aide-name-header"},"Aide Name",-1)),p("div",{class:"timeline-container",style:Cn({height:g.value+"px"})},[p("div",{class:"time-blocks-header",style:Cn({height:g.value+"px"})},[(N(!0),M(Pe,null,We(v.value,T=>(N(),M("div",{key:T.id+"-"+T.overlapIndex,class:at(["time-block-header",f(T)]),style:Cn({left:o(T.startTime)+"%",width:l(T.startTime,T.endTime)+"%",top:T.overlapIndex*cm+"px",height:cm+"px",zIndex:10})},[p("div",vne,oe(T.startTime),1),p("div",gne,oe(T.name||T.type),1),p("div",xne,oe(T.endTime),1)],6))),128))],4)],4)]),(N(!0),M(Pe,null,We(t.paraeducators,T=>(N(),M("div",{key:T.id,class:"aide-row"},[p("div",yne,[p("span",Ene,oe(t.getAideName(T.id)),1),p("button",{onClick:C=>b.$emit("editAideAssignment",T.id),class:"btn btn-small btn-primary edit-btn"}," Edit ",8,bne)]),p("div",_ne,[p("div",Sne,[(N(!0),M(Pe,null,We(t.blocks,C=>(N(),M("div",{key:C.id,class:at(["time-block-bg",f(C)]),style:Cn({left:o(C.startTime)+"%",width:l(C.startTime,C.endTime)+"%"})},null,6))),128)),(N(!0),M(Pe,null,We(t.blocks.slice(0,-1),(C,R)=>(N(),M("div",{key:`bg-gap-${C.id}`,class:"time-block-bg-gap",style:Cn({left:o(C.endTime)-.5+"%",width:"1%"})},null,4))),128))]),p("div",Tne,[(N(!0),M(Pe,null,We(s(T.id),C=>(N(),M("div",{key:C.id,class:at(["master-assignment-bar",C.type]),style:Cn({left:c(C.start)+"%",width:u(C.start,C.end)+"%",top:a(C)+"px"})},[p("span",Ane,oe(C.label),1)],6))),128))])])]))),128))]))]))}},Cne=_t(wne,[["__scopeId","data-v-40c5158e"]]);function Pf(t){return(t==null?void 0:t.schedule)||[]}function Ine(t){let e="23:59",r="00:00";for(const n of t)n.startTime&&n.startTime<e&&(e=n.startTime),n.endTime&&n.endTime>r&&(r=n.endTime);return{min:e,max:r}}function kne(t){return Ve(()=>{const{min:e,max:r}=Ine(t.value||t),[n,s]=e.split(":").map(Number),[i,a]=r.split(":").map(Number);let o=[],l=n,c=s;for(;l<i||l===i&&c<=a;){const d=l<10?`0${l}`:`${l}`,f=c<10?`0${c}`:`${c}`;o.push({time:`${d}:${f}`}),c+=5,c>=60&&(c=0,l++)}const u=(t.value||t).map(d=>d.startTime);for(const d of u)o.find(f=>f.time===d)||o.push({time:d});return o=Array.from(new Set(o.map(d=>d.time))).sort().map(d=>({time:d})),o})}function Dne(t,e){return e.some(r=>r.startTime<=t&&r.endTime>=t)}const Rne={class:"admin-aide-schedule-detailed"},Fne={class:"header"},Pne={class:"header-actions"},One=["disabled"],Nne={key:0},Lne={key:1},Bne={class:"content"},Mne={key:0,class:"error-message"},Une={key:1,class:"error-message"},Vne={key:2,class:"loading"},$ne={key:3,class:"schedule-container"},Hne={key:0,class:"time-table-tab-bar"},jne=["onClick"],VI={__name:"AdminAideSchedule",setup(t){const e=Xo(),r=oi(),{userList:n,fetchUsers:s}=Ca(),{students:i,fetchStudents:a}=wa(),{appSettings:o,loadAppSettings:l,saveAppSettings:c}=Ia(),{aideSchedule:u,loadAideSchedules:d,saveAideSchedule:f}=jte(),{aideAssignment:h}=Y1(),v=he(!0),m=he(!1),g=he(null),b=he({}),_=he({}),T=he(null);he([]);const C=he({}),R=Ve(()=>b.value&&Array.isArray(b.value.timeTables)&&b.value.timeTables.length>0?b.value.timeTables.map((Q,re)=>({id:Q.name?Q.name.toLowerCase().replace(/\s+/g,"-"):`tt-${re}`,label:Q.name||`Time Table ${re+1}`,...Q})):b.value&&b.value.schedule?[{id:"default",label:b.value.label||"Default Schedule",schedule:b.value.schedule}]:[]);Qt(async()=>{console.log("Loaded timeTableData:",b.value),console.log("Computed allTimeTables:",R.value),R.value.length>0&&!T.value&&(T.value=R.value[0].id,console.log("Set selectedTimeTable:",T.value)),await l(),o.value.timeTables&&Array.isArray(o.value.timeTables)?(b.value={timeTables:o.value.timeTables},console.log("Set timeTableData to timeTables array:",b.value)):o.value.schedule&&(b.value={schedule:o.value.schedule},console.log("Set timeTableData to single schedule:",b.value))}),er(R,Q=>{console.log("allTimeTables changed:",Q)}),er(T,Q=>{console.log("selectedTimeTable changed:",Q)});const D=Ve(()=>{const Q=R.value.find(re=>re.id===T.value)||R.value[0];return console.log("currentTimeTable:",Q),Q}),w=Ve(()=>Pf(D.value)),E=kne(w);function y(Q){return Dne(Q,w.value)}const x=Ve(()=>{var re;const Q=(re=r.currentUser)==null?void 0:re.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(Q)}),I=Ve(()=>{var Q;return((Q=n.value)==null?void 0:Q.filter(re=>re.role==="paraeducator"))||[]}),A=Ve(()=>{var Q;return((Q=n.value)==null?void 0:Q.filter(re=>re.role==="teacher"))||[]});Ve(()=>{var Q,re;return(Q=o.value)!=null&&Q.numPeriods&&((re=o.value)!=null&&re.periodLabels)?o.value.periodLabels.slice(0,o.value.numPeriods):["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]});function k(Q){if(!w.value)return[];console.log("DEBUG: getAideTimeBlocks called for aide:",Q),console.log("DEBUG: aideSchedule.value:",u.value),console.log("DEBUG: aideAssignment.value:",h.value);const be=(u.value[Q]||{}).schedule||{};console.log("DEBUG: aideScheduleData:",be);const Te=Object.values(be).filter(_e=>_e.start&&_e.end&&_e.label).map(_e=>({id:_e.id||_e.blockId||`assignment-${Date.now()}`,assignment:_e.label,assignmentType:_e.type||"custom",displayTime:`${_e.start} - ${_e.end}`,start:_e.start,end:_e.end}));return console.log("DEBUG: individualAssignments:",Te),Te.length>0?Te:(console.log("DEBUG: No individual assignments found, adding test data"),[{id:"test-1",assignment:"Test Class Assignment",assignmentType:"class",displayTime:"08:00 - 09:00",start:"08:00",end:"09:00"},{id:"test-2",assignment:"Test Student Assignment",assignmentType:"student",displayTime:"10:00 - 11:00",start:"10:00",end:"11:00"}])}function U(Q){const re=I.value.find(be=>be.id===Q);return re?re.name||re.email:"Unknown Aide"}function W(Q){g.value=Q,de.value=!0}function P(){g.value=null}async function B(){try{m.value=!0;const re={...await l(),detailedAideSchedule:_.value};await c(re),console.log("Detailed aide schedule saved successfully")}catch(Q){console.error("Error saving detailed aide schedule:",Q)}finally{m.value=!1}}function H(){e.push("/admin")}async function L(){try{v.value=!0,await Promise.all([s(),a(),l()]);const Q=await Jr(vt(yt,"app_settings","global"));if(Q.exists()){const re=Q.data();_.value=re.detailedAideSchedule||{}}v.value=!1}catch(Q){console.error("Error loading aide schedule data:",Q),v.value=!1}}Qt(L);function Z(Q,re){return Q.assignments&&Q.assignments[re]||""}function j(){var _e,ke;if(console.log("DEBUG: handleImportAssignments called"),console.log("DEBUG: editingAideId.value:",g.value),console.log("DEBUG: aideAssignment.value:",h.value),console.log("DEBUG: All aide IDs:",Object.keys(h.value)),console.log("DEBUG: All aide data:",Object.entries(h.value).map(([Be,Ce])=>({id:Be,keys:Object.keys(Ce)}))),!g.value||!h.value[g.value]){console.log("DEBUG: No aide data found"),alert("No aide assignment data found for this aide.");return}const Q=K.value.length;if(Q>0&&!confirm(`WARNING: This will remove ${Q} current assignments and replace them with imported assignments.

Do you want to continue?`))return;const re=h.value[g.value];console.log("DEBUG: aideData:",re),console.log("DEBUG: aideData.classAssignment:",re.classAssignment),console.log("DEBUG: aideData.directAssignment:",re.directAssignment),console.log("DEBUG: Object.keys(aideData):",Object.keys(re)),console.log("DEBUG: aideData.schedule:",re.schedule),console.log("DEBUG: typeof aideData.schedule:",typeof re.schedule),console.log("DEBUG: Array.isArray(aideData.schedule):",Array.isArray(re.schedule));let be=0;K.value=[];const Te=Pf(D.value);console.log("DEBUG: timeTableBlocks:",Te),console.log("DEBUG: timeTableBlocks with period numbers:",Te.map(Be=>({name:Be.name,periodNumber:Be.periodNumber,type:Be.type})));for(const Be of Te){console.log("DEBUG: Processing block:",Be),console.log("DEBUG: Block periodNumber:",Be.periodNumber),console.log("DEBUG: Block name:",Be.name),console.log("DEBUG: Available classAssignment keys:",Object.keys(re.classAssignment||{}));let Ce=Be.periodNumber;if(!Ce&&Be.name){const He=Be.name.match(/Period\s*(\d+)/i);He&&(Ce=He[1],console.log("DEBUG: Extracted periodNumber from name:",Ce))}let je="",Ue=[];if(Ce&&re.classAssignment&&re.classAssignment[Ce]){console.log("DEBUG: Found class assignment for periodNumber:",Ce);const He=Array.isArray(re.classAssignment[Ce])?re.classAssignment[Ce]:[re.classAssignment[Ce]];Ue=He.filter(Boolean).map(qe=>{const ye=A.value.find(xe=>xe.id===qe);return ye?ye.name||ye.email:"Unknown Teacher"}),je=He.filter(Boolean).map(qe=>`teacher:${qe}`).join(","),console.log("DEBUG: Created assignment for periodNumber:",je)}if(!je&&Be.name&&re.classAssignment){console.log("DEBUG: Trying to match by block name:",Be.name);const He=Object.keys(re.classAssignment).find(qe=>qe.toLowerCase().trim()===Be.name.toLowerCase().trim());if(He){console.log("DEBUG: Found match by block name:",He);const qe=Array.isArray(re.classAssignment[He])?re.classAssignment[He]:[re.classAssignment[He]];Ue=qe.filter(Boolean).map(ye=>{const xe=A.value.find(Ee=>Ee.id===ye);return xe?xe.name||xe.email:"Unknown Teacher"}),je=qe.filter(Boolean).map(ye=>`teacher:${ye}`).join(","),console.log("DEBUG: Created assignment for block name:",je)}}if(je){const He=Be.startTime,qe=O(Be.startTime,30),ye=je.split(",").map(Ee=>Ee.replace("teacher:","")).filter(Boolean),xe={id:`imported-class-${Date.now()}-${be}`,label:Ue.join(", "),start:He,end:qe,type:"class",blockId:`imported-block-${be}`,teacherId:ye[0]||"",note:ye.length>1?`Multiple teachers: ${Ue.join(", ")}`:""};console.log("DEBUG: Adding new assignment:",xe),K.value.push(xe),be++}}if(console.log("DEBUG: Checking direct assignments..."),console.log("DEBUG: aideData.directAssignment:",re.directAssignment),console.log("DEBUG: typeof aideData.directAssignment:",typeof re.directAssignment),console.log("DEBUG: Array.isArray(aideData.directAssignment):",Array.isArray(re.directAssignment)),re.directAssignment){console.log("DEBUG: Found directAssignment:",re.directAssignment);const Be=Array.isArray(re.directAssignment)?re.directAssignment:[re.directAssignment];console.log("DEBUG: directStudentIds:",Be),console.log("DEBUG: students.value length:",(_e=i.value)==null?void 0:_e.length),console.log("DEBUG: students.value sample:",(ke=i.value)==null?void 0:ke.slice(0,3));for(const Ce of Be)if(console.log("DEBUG: Processing studentId:",Ce),Ce&&Ce!==""){const je=i.value.find(Ue=>Ue.id===Ce);if(console.log("DEBUG: Found student:",je),je){const Ue=`${pt(je,"firstName")} ${pt(je,"lastName")}`;console.log("DEBUG: Student name:",Ue);const He=Pf(D.value).find(qe=>qe.type==="period");if(console.log("DEBUG: First period block:",He),He){const qe=He.startTime,ye=O(He.startTime,30),xe={id:`imported-direct-${Date.now()}-${be}`,label:Ue,start:qe,end:ye,type:"student",blockId:`imported-direct-block-${be}`,studentId:Ce};console.log("DEBUG: Adding direct assignment:",xe),K.value.push(xe),be++}}}}else console.log("DEBUG: No directAssignment found");if(console.log("DEBUG: Final importedCount:",be),console.log("DEBUG: Final localAideAssignments:",K.value),be>0){alert(`Successfully imported ${be} assignments with 30-minute time spans.

Types: Class assignments set to 'class', Direct assignments set to 'student'
Labels: Teacher names for class assignments, Student names for direct assignments
Duration: 30 minutes each`);const Be=g.value,Ce=u.value[Be]||{},je={};K.value.forEach(He=>{const qe=He.blockId||He.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;je[qe]={id:He.id,blockId:qe,type:He.type,label:He.label,start:He.start,end:He.end,note:He.note,teacherId:He.teacherId,studentId:He.studentId}});const Ue={...Ce,schedule:je};f(Be,Ue).then(()=>{d().then(()=>{P(),Go(()=>{W(Be)})})})}else alert("No matching assignments found in the Aide Assignment data for this schedule.")}function O(Q,re){const[be,Te]=Q.split(":").map(Number),_e=be*60+Te+re,ke=Math.floor(_e/60),Be=_e%60;return`${ke.toString().padStart(2,"0")}:${Be.toString().padStart(2,"0")}`}er(()=>Pf(D.value),Q=>{const re={};for(const be of Q){const Te=Z(be,g.value);re[be.id]=Te?[{id:Te,value:Te}]:[]}C.value=re},{immediate:!0});function G(Q,re){z.value=re,J.value=Q.clientY,me.value=E.value.findIndex(be=>be.time===re.start),Y.value=0,Q.dataTransfer.effectAllowed="move",Q.dataTransfer.setData("text/plain",re.id)}function X(Q,re){if(!z.value||Q.clientY===0)return;const be=Q.clientY-J.value;Y.value=be,re._dragOffset=be}function q(Q,re){if(!z.value)return;const be=24,Te=E.value.length;let _e=me.value+Math.round(Y.value/be);_e=Math.max(0,Math.min(Te-2,_e));const ke=E.value[_e].time,Be=E.value.findIndex(Ue=>Ue.time===re.end)-me.value;let Ce=_e+Be;Ce=Math.max(_e+1,Math.min(Te-1,Ce));const je=E.value[Ce].time;re.start=ke,re.end=je,re._dragOffset=0,z.value=null,Y.value=0}function pe(Q){const re=E.value.findIndex(je=>je.time===Q.start),be=E.value.findIndex(je=>je.time===Q.end),Te=24;if(re===-1||be===-1)return{display:"none"};const _e=re*Te+(Q._dragOffset||0),ke=Math.max((be-re)*Te,Te);let Be,Ce;return Q.type==="class"?(Be="#e8f4fd",Ce="#4a90e2"):Q.type==="student"?(Be="#f0f8e8",Ce="#7cb342"):(Be="#f5f5f5",Ce="#9e9e9e"),{position:"absolute",left:"20px",top:`${_e}px`,height:`${ke}px`,width:"200px",minHeight:"24px",background:Be,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"#333",border:`2px solid ${Ce}`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"grab",zIndex:2,transition:z.value===Q?"none":"top 0.2s"}}function ie(){const Q=w.value&&w.value.length>0?w.value[0].startTime:"08:00",re=w.value&&w.value.length>0?w.value[0].endTime:"08:30";K.value.push({id:`custom:${Date.now()}`,label:"",start:Q,end:re,blockId:`block-${Date.now()}`})}const de=he(!1);he(null);const z=he(null),J=he(0),me=he(0),Y=he(0),K=he([]);er(g,Q=>{if(!Q){K.value=[];return}const be=(u.value[Q]||{}).schedule||{};K.value=Object.entries(be).map(([Te,_e])=>({id:Te+"-"+(Q||""),label:_e.label||"",start:_e.start,end:_e.end,blockId:Te,type:_e.type||"lunch",teacherId:_e.teacherId||"",studentId:_e.studentId||"",note:_e.note||""}))},{immediate:!0});async function ee(Q){if(g.value)try{m.value=!0;const re=u.value[g.value]||{},be={};Q.forEach(_e=>{const ke=_e.blockId||_e.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;be[ke]={id:_e.id,blockId:ke,type:_e.type,label:_e.label,start:_e.start,end:_e.end,note:_e.note,teacherId:_e.teacherId,studentId:_e.studentId}});const Te={...re,schedule:be};await f(g.value,Te),await d(),P(),alert("Schedule saved!")}catch(re){alert("Failed to save schedule: "+re.message)}finally{m.value=!1}}er(()=>w,Q=>{console.log("DEBUG: blocks",Q)},{immediate:!0}),er(g,Q=>{Q&&(console.log("DEBUG: Opening edit dialog for aide",Q),console.log("DEBUG: blocks passed to dialog",w.value))});function fe(Q,re){console.log("Resize start:",re)}function ve(){ie()}return(Q,re)=>(N(),M("div",Rne,[p("div",Fne,[re[4]||(re[4]=p("h1",null,"Aide Schedule Management",-1)),p("div",Pne,[p("button",{onClick:B,class:"btn btn-primary",disabled:m.value},[m.value?(N(),M("span",Nne,"")):(N(),M("span",Lne,"")),Ne(" "+oe(m.value?"Saving...":"Save Schedule"),1)],8,One),p("button",{onClick:H,class:"btn btn-secondary"},re[3]||(re[3]=[p("span",null,"",-1),Ne(" Back ")]))])]),p("div",Bne,[ge(r).currentUser?x.value?v.value?(N(),M("div",Vne," Loading aide schedules... ")):(N(),M("div",$ne,[rt(Cne,{paraeducators:I.value,blocks:w.value,getAideTimeBlocks:k,getAideName:U,currentTimeTable:D.value,onEditAideAssignment:W,onGotoTimeTableConfig:re[2]||(re[2]=()=>ge(e).push("/admin?tab=time-table"))},{"tab-bar":fh(()=>[R.value.length>1?(N(),M("div",Hne,[(N(!0),M(Pe,null,We(R.value,be=>(N(),M("div",{key:be.id,class:at(["tab-btn",{active:T.value===be.id}]),onClick:Te=>T.value=be.id},oe(be.label),11,jne))),128))])):Re("",!0)]),_:1},8,["paraeducators","blocks","currentTimeTable"]),g.value?(N(),Rn(une,{key:0,aideName:U(g.value),timeTicks:ge(E),isTickInAnyBlock:y,aideAssignments:K.value,getAssignmentBoxStyle:pe,onAssignmentDragStart:G,onAssignmentDrag:X,onAssignmentDragEnd:q,onResizeStart:fe,showAddAssignment:de.value,addAssignment:ve,onImportAssignments:j,onSave:ee,onClose:P,saving:m.value,blocks:w.value,teachers:A.value,students:ge(i)},null,8,["aideName","timeTicks","aideAssignments","showAddAssignment","saving","blocks","teachers","students"])):Re("",!0)])):(N(),M("div",Une,[re[7]||(re[7]=p("h2",null,"Access Denied",-1)),re[8]||(re[8]=p("p",null,"You do not have permission to access this page.",-1)),p("button",{onClick:re[1]||(re[1]=be=>ge(e).push("/")),class:"btn btn-primary"},"Go Home")])):(N(),M("div",Mne,[re[5]||(re[5]=p("h2",null,"Authentication Required",-1)),re[6]||(re[6]=p("p",null,"Please log in to access this page.",-1)),p("button",{onClick:re[0]||(re[0]=be=>ge(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},Gne={name:"AdminBackupRestore",setup(){const t=he([{id:"users",name:"Users"},{id:"students",name:"Students"},{id:"appSettings",name:"App Settings"},{id:"aideSchedules",name:"Aide Schedules"},{id:"aideAssignments",name:"Aide Assignments"}]),e=he(["users","students","appSettings"]),r=he(""),n=he(!1),s=he(!1),i=he(null),a=he(null),o=he([]),l=he(""),c=he("info"),u=Os({overwrite:!1,validate:!0}),d=he(null),f=async()=>{try{const R=sr(yt,"backups"),D=ps(R,go("createdAt","desc"),Di(20)),w=await Zr(D);o.value=w.docs.map(E=>({id:E.id,...E.data()}))}catch(R){console.error("Error loading backups:",R),C("Error loading backups","error")}},h=async()=>{var R;if(e.value.length===0){C("Please select at least one collection","error");return}n.value=!0,C("Creating backup...","info");try{const D={metadata:{version:"1.0",createdAt:new Date().toISOString(),createdBy:"admin",description:r.value||"Manual backup"},collections:{}};for(const y of e.value){const x=sr(yt,y),I=await Zr(x);y==="appSettings"?D.collections[y]=((R=I.docs[0])==null?void 0:R.data())||{}:D.collections[y]=I.docs.map(A=>({id:A.id,...A.data()}))}const w=`backup_${Date.now()}`,E=vt(yt,"backups",w);await gr(E,{name:r.value||`Backup ${new Date().toLocaleDateString()}`,createdAt:new Date().toISOString(),collections:e.value,size:JSON.stringify(D).length,data:D}),r.value="",await f(),C("Backup created successfully!","success")}catch(D){console.error("Error creating backup:",D),C("Error creating backup: "+D.message,"error")}finally{n.value=!1}},v=R=>{const D=R.target.files[0];if(!D)return;i.value=D,a.value=null;const w=new FileReader;w.onload=E=>{try{const y=JSON.parse(E.target.result);y.metadata&&y.collections?(a.value=y,C("Backup file loaded successfully","success")):C("Invalid backup file format","error")}catch{C("Error parsing JSON file","error")}},w.readAsText(D)},m=async()=>{if(!i.value||!a.value){C("Please select a valid backup file","error");return}if(u.overwrite){if(!confirm("This will overwrite existing data. This action cannot be undone. Continue?"))return}else if(!confirm("This will add new data without overwriting existing records. Continue?"))return;s.value=!0,C("Restoring backup...","info");try{for(const[R,D]of Object.entries(a.value.collections))if(R==="appSettings"){const w=vt(yt,"appSettings","default");await gr(w,D,{merge:!u.overwrite})}else{const w=sr(yt,R);if(Array.isArray(D))for(const E of D){const y=vt(w,E.id);u.overwrite?await gr(y,E):await gr(y,E,{merge:!0})}}C("Backup restored successfully!","success"),i.value=null,a.value=null,d.value&&(d.value.value="")}catch(R){console.error("Error restoring backup:",R),C("Error restoring backup: "+R.message,"error")}finally{s.value=!1}},g=R=>{const D=JSON.stringify(R.data,null,2),w=new Blob([D],{type:"application/json"}),E=URL.createObjectURL(w),y=document.createElement("a");y.href=E,y.download=`${R.name||"backup"}.json`,y.click(),URL.revokeObjectURL(E)},b=async R=>{if(confirm("Are you sure you want to delete this backup?"))try{await sc(vt(yt,"backups",R)),await f(),C("Backup deleted successfully","success")}catch(w){console.error("Error deleting backup:",w),C("Error deleting backup","error")}},_=R=>{if(R===0)return"0 Bytes";const D=1024,w=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(R)/Math.log(D));return parseFloat((R/Math.pow(D,E)).toFixed(2))+" "+w[E]},T=R=>new Date(R).toLocaleString(),C=(R,D="info")=>{l.value=R,c.value=D,setTimeout(()=>{l.value=""},5e3)};return Qt(()=>{f()}),{collections:t,selectedCollections:e,backupName:r,isBackingUp:n,isRestoring:s,selectedFile:i,backupData:a,backups:o,statusMessage:l,statusType:c,restoreOptions:u,fileInput:d,createBackup:h,handleFileSelect:v,restoreBackup:m,downloadBackup:g,deleteBackup:b,formatFileSize:_,formatDate:T}}},Wne={class:"admin-backup-restore"},zne={class:"content"},Kne={class:"section"},qne={class:"backup-options"},Xne={class:"option-group"},Yne={class:"checkbox-group"},Qne=["value","disabled"],Jne={class:"option-group"},Zne=["disabled"],ese=["disabled"],tse={key:0},rse={key:1},nse={class:"section"},sse={class:"restore-options"},ase={class:"file-upload"},ise=["disabled"],ose={key:0,class:"file-info"},lse={key:0,class:"option-group"},cse={class:"backup-info"},use={class:"collection-name"},dse={class:"collection-count"},fse={key:1,class:"option-group"},hse={class:"checkbox-group"},pse={class:"checkbox"},mse=["disabled"],vse={class:"checkbox"},gse=["disabled"],xse=["disabled"],yse={key:0},Ese={key:1},bse={class:"section"},_se={key:0,class:"backup-list"},Sse={class:"backup-info"},Tse={class:"backup-actions"},Ase=["onClick"],wse=["onClick"],Cse={key:1,class:"no-backups"};function Ise(t,e,r,n,s,i){return N(),M("div",Wne,[e[17]||(e[17]=p("div",{class:"header"},[p("h1",null,"Backup & Restore"),p("p",null,"Manage database backups and restore data from JSON files")],-1)),p("div",zne,[p("div",Kne,[e[9]||(e[9]=p("h2",null,"Create Backup",-1)),p("div",qne,[p("div",Xne,[e[7]||(e[7]=p("label",null,"Collections to backup:",-1)),p("div",Yne,[(N(!0),M(Pe,null,We(n.collections,a=>(N(),M("label",{key:a.id,class:"checkbox"},[Me(p("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>n.selectedCollections=o),value:a.id,disabled:n.isBackingUp},null,8,Qne),[[Et,n.selectedCollections]]),Ne(" "+oe(a.name),1)]))),128))])]),p("div",Jne,[e[8]||(e[8]=p("label",null,"Backup name (optional):",-1)),Me(p("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.backupName=a),placeholder:"e.g., backup-2024-01-15",disabled:n.isBackingUp},null,8,Zne),[[At,n.backupName]])]),p("button",{onClick:e[2]||(e[2]=(...a)=>n.createBackup&&n.createBackup(...a)),disabled:n.isBackingUp||n.selectedCollections.length===0,class:"btn btn-primary"},[n.isBackingUp?(N(),M("span",tse,"Creating Backup...")):(N(),M("span",rse,"Create Backup"))],8,ese)])]),p("div",nse,[e[15]||(e[15]=p("h2",null,"Restore from Backup",-1)),p("div",sse,[p("div",ase,[e[10]||(e[10]=p("label",null,"Select JSON backup file:",-1)),p("input",{type:"file",onChange:e[3]||(e[3]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a)),accept:".json",disabled:n.isRestoring,ref:"fileInput"},null,40,ise),n.selectedFile?(N(),M("p",ose," Selected: "+oe(n.selectedFile.name)+" ("+oe(n.formatFileSize(n.selectedFile.size))+") ",1)):Re("",!0)]),n.backupData?(N(),M("div",lse,[e[11]||(e[11]=p("label",null,"Collections in backup:",-1)),p("div",cse,[(N(!0),M(Pe,null,We(n.backupData.collections,(a,o)=>(N(),M("div",{key:o,class:"collection-info"},[p("span",use,oe(o)+":",1),p("span",dse,oe(Array.isArray(a)?a.length:"1")+" items",1)]))),128))])])):Re("",!0),n.backupData?(N(),M("div",fse,[e[14]||(e[14]=p("label",null,"Restore options:",-1)),p("div",hse,[p("label",pse,[Me(p("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>n.restoreOptions.overwrite=a),disabled:n.isRestoring},null,8,mse),[[Et,n.restoreOptions.overwrite]]),e[12]||(e[12]=Ne(" Overwrite existing data "))]),p("label",vse,[Me(p("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=a=>n.restoreOptions.validate=a),disabled:n.isRestoring},null,8,gse),[[Et,n.restoreOptions.validate]]),e[13]||(e[13]=Ne(" Validate data before restore "))])])])):Re("",!0),p("button",{onClick:e[6]||(e[6]=(...a)=>n.restoreBackup&&n.restoreBackup(...a)),disabled:n.isRestoring||!n.selectedFile||!n.backupData,class:"btn btn-warning"},[n.isRestoring?(N(),M("span",yse,"Restoring...")):(N(),M("span",Ese,"Restore Backup"))],8,xse)])]),p("div",bse,[e[16]||(e[16]=p("h2",null,"Backup History",-1)),n.backups.length>0?(N(),M("div",_se,[(N(!0),M(Pe,null,We(n.backups,a=>(N(),M("div",{key:a.id,class:"backup-item"},[p("div",Sse,[p("h3",null,oe(a.name||"Unnamed Backup"),1),p("p",null,"Created: "+oe(n.formatDate(a.createdAt)),1),p("p",null,"Size: "+oe(n.formatFileSize(a.size)),1),p("p",null,"Collections: "+oe(a.collections.join(", ")),1)]),p("div",Tse,[p("button",{onClick:o=>n.downloadBackup(a),class:"btn btn-secondary"},"Download",8,Ase),p("button",{onClick:o=>n.deleteBackup(a.id),class:"btn btn-danger"},"Delete",8,wse)])]))),128))])):(N(),M("p",Cse,"No backups found"))])]),n.statusMessage?(N(),M("div",{key:0,class:at(["status-message",n.statusType])},oe(n.statusMessage),3)):Re("",!0)])}const $I=_t(Gne,[["render",Ise],["__scopeId","data-v-8e587f9a"]]),kse={name:"AdminTeacherFeedback",setup(){const{isLoading:t,error:e,successMessage:r,formsLoading:n,feedbackForms:s,activeForms:i,totalResponses:a,createFeedbackForm:o,deleteFeedbackForm:l,syncResponses:c,getResponsesForSpreadsheet:u,clearMessages:d,extractSpreadsheetId:f}=Q1(),{fetchStudents:h}=wa(),{fetchUsers:v}=Ca(),m=oi(),g=he(!1),b=he(""),_=he(""),T=he(""),C=he(""),R=Ve(()=>b.value.trim()&&T.value.trim()&&C.value.trim()),D=async()=>{if(R.value)try{d();const P={title:b.value.trim(),description:_.value.trim(),formUrl:T.value.trim(),responseSpreadsheetId:f(C.value),createdBy:m.user.uid};await o(P),w()}catch(P){console.error("Error adding form:",P)}},w=()=>{g.value=!1,b.value="",_.value="",T.value="",C.value="",d()},E=P=>{window.open(P.formUrl,"_blank")},y=async P=>{try{await c(P.responseSpreadsheetId)}catch(B){console.error("Error syncing responses:",B)}},x=async P=>{window.open(P.formUrl,"_blank")},I=async P=>{if(confirm(`Are you sure you want to delete "${P.title}"?`))try{await l(P.id)}catch(B){console.error("Error deleting form:",B)}},A=P=>u(P).value.length,k=P=>{var L,Z;const B=u(P);if(B.value.length===0)return"Never";const H=((L=B.value[0])==null?void 0:L.syncedAt)||((Z=B.value[0])==null?void 0:Z.autoSyncedAt);return H?new Date(H.seconds*1e3).toLocaleDateString():"Never"},U=P=>`https://docs.google.com/spreadsheets/d/${P}`,W=P=>P?(P.seconds?new Date(P.seconds*1e3):new Date(P)).toLocaleDateString():"N/A";return Qt(async()=>{try{await Promise.all([h(),v()])}catch(P){console.error("Error initializing teacher feedback:",P)}}),{isLoading:t,error:e,successMessage:r,showCreateModal:g,formTitle:b,formDescription:_,formUrl:T,responseSpreadsheetUrl:C,formsLoading:n,feedbackForms:s,activeForms:i,totalResponses:a,canAddForm:R,addForm:D,closeCreateForm:w,openForm:E,syncFormResponses:y,editForm:x,deleteForm:I,getResponseCount:A,getLastSyncDate:k,getSpreadsheetUrl:U,formatDate:W}}},Dse={class:"teacher-feedback-admin"},Rse={key:0,class:"status-message loading"},Fse={key:1,class:"status-message success"},Pse={key:2,class:"status-message error"},Ose={class:"quick-actions"},Nse=["disabled"],Lse={class:"modal-header"},Bse={class:"modal-body"},Mse={class:"form-group"},Use={class:"form-group"},Vse={class:"form-group"},$se={class:"form-group"},Hse={class:"modal-footer"},jse=["disabled"],Gse={key:0},Wse={key:1},zse={class:"forms-list"},Kse={key:0,class:"loading"},qse={key:1,class:"empty-state"},Xse={key:2,class:"forms-grid"},Yse={class:"form-header"},Qse={class:"form-actions"},Jse=["onClick"],Zse=["onClick"],eae=["onClick"],tae=["onClick"],rae={class:"form-meta"},nae={key:0},sae=["href"],aae=["href"],iae={class:"form-stats"},oae={class:"stat"},lae={class:"stat-value"},cae={class:"stat"},uae={class:"stat-value"};function dae(t,e,r,n,s,i){return N(),M("div",Dse,[e[29]||(e[29]=p("div",{class:"admin-header"},[p("h2",null,"Teacher Feedback Forms"),p("p",{class:"admin-description"}," Create and manage Google Forms for collecting teacher feedback on students. Forms can be customized with different question templates and sent to specific teachers. ")],-1)),n.isLoading?(N(),M("div",Rse," Processing... ")):Re("",!0),n.successMessage?(N(),M("div",Fse,oe(n.successMessage),1)):Re("",!0),n.error?(N(),M("div",Pse,oe(n.error),1)):Re("",!0),p("div",Ose,[p("button",{onClick:e[0]||(e[0]=a=>n.showCreateModal=!0),class:"primary-btn",disabled:n.isLoading},e[10]||(e[10]=[p("span",null,"",-1),Ne(" Add Form ")]),8,Nse)]),n.showCreateModal?(N(),M("div",{key:3,class:"modal-overlay",onClick:e[9]||(e[9]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a))},[p("div",{class:"modal-content",onClick:e[8]||(e[8]=bs(()=>{},["stop"]))},[p("div",Lse,[e[11]||(e[11]=p("h3",null,"Add Teacher Feedback Form",-1)),p("button",{onClick:e[1]||(e[1]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a)),class:"close-btn"},"")]),p("div",Bse,[p("div",Mse,[e[12]||(e[12]=p("label",null,"Form Title:",-1)),Me(p("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>n.formTitle=a),placeholder:"Enter a descriptive title for this form",class:"form-input",required:""},null,512),[[At,n.formTitle]])]),p("div",Use,[e[13]||(e[13]=p("label",null,"Form Description (optional):",-1)),Me(p("textarea",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.formDescription=a),placeholder:"Brief description of what this form is for",class:"form-textarea",rows:"3"},null,512),[[At,n.formDescription]])]),p("div",Vse,[e[14]||(e[14]=p("label",null,"Google Form URL:",-1)),Me(p("input",{type:"url","onUpdate:modelValue":e[4]||(e[4]=a=>n.formUrl=a),placeholder:"https://docs.google.com/forms/d/your-form-id/viewform",class:"form-input",required:""},null,512),[[At,n.formUrl]]),e[15]||(e[15]=p("small",{class:"form-help"},"Paste the Google Form URL here (viewform link)",-1))]),p("div",$se,[e[16]||(e[16]=p("label",null,"Response Spreadsheet URL:",-1)),Me(p("input",{type:"url","onUpdate:modelValue":e[5]||(e[5]=a=>n.responseSpreadsheetUrl=a),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id",class:"form-input",required:""},null,512),[[At,n.responseSpreadsheetUrl]]),e[17]||(e[17]=p("small",{class:"form-help"},"Link to the Google Sheet where responses are collected",-1))]),e[18]||(e[18]=p("div",{class:"form-info"},[p("h4",null," Setup Instructions:"),p("ol",null,[p("li",null,"Create your Google Form manually with the questions you want"),p("li",null,[Ne("Go to "),p("strong",null,"Responses"),Ne(" tab in your form")]),p("li",null,[Ne("Click "),p("strong",null,"Create Spreadsheet"),Ne(" to link it to a Google Sheet")]),p("li",null,"Copy both URLs and paste them above")])],-1))]),p("div",Hse,[p("button",{onClick:e[6]||(e[6]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a)),class:"secondary-btn"},"Cancel"),p("button",{onClick:e[7]||(e[7]=(...a)=>n.addForm&&n.addForm(...a)),class:"primary-btn",disabled:!n.canAddForm||n.isLoading},[n.isLoading?(N(),M("span",Gse,"Adding Form...")):(N(),M("span",Wse,"Add Form"))],8,jse)])])])):Re("",!0),p("div",zse,[e[28]||(e[28]=p("h3",null,"Feedback Forms",-1)),n.formsLoading?(N(),M("div",Kse,"Loading forms...")):n.activeForms.length===0?(N(),M("div",qse,e[19]||(e[19]=[p("p",null,"No feedback forms added yet.",-1),p("p",null,'Click "Add Form" to get started.',-1)]))):(N(),M("div",Xse,[(N(!0),M(Pe,null,We(n.activeForms,a=>(N(),M("div",{key:a.id,class:"form-card"},[p("div",Yse,[p("h4",null,oe(a.title||"Untitled Form"),1),p("div",Qse,[p("button",{onClick:o=>n.openForm(a),class:"action-btn view",title:"View Form"},"  ",8,Jse),p("button",{onClick:o=>n.syncFormResponses(a),class:"action-btn sync",title:"Sync Responses"},"  ",8,Zse),p("button",{onClick:o=>n.editForm(a),class:"action-btn edit",title:"Edit Form"},"  ",8,eae),p("button",{onClick:o=>n.deleteForm(a),class:"action-btn delete",title:"Delete Form"},"  ",8,tae)])]),p("div",rae,[p("p",null,[e[20]||(e[20]=p("strong",null,"Created:",-1)),Ne(" "+oe(n.formatDate(a.createdAt)),1)]),a.description?(N(),M("p",nae,[e[21]||(e[21]=p("strong",null,"Description:",-1)),Ne(" "+oe(a.description),1)])):Re("",!0),p("p",null,[e[22]||(e[22]=p("strong",null,"Form URL:",-1)),e[23]||(e[23]=Ne()),p("a",{href:a.formUrl,target:"_blank",class:"form-link"},"Open Form",8,sae)]),p("p",null,[e[24]||(e[24]=p("strong",null,"Responses:",-1)),e[25]||(e[25]=Ne()),p("a",{href:n.getSpreadsheetUrl(a.responseSpreadsheetId),target:"_blank",class:"form-link"},"View Sheet",8,aae)])]),p("div",iae,[p("div",oae,[e[26]||(e[26]=p("span",{class:"stat-label"},"Responses:",-1)),p("span",lae,oe(n.getResponseCount(a.responseSpreadsheetId)),1)]),p("div",cae,[e[27]||(e[27]=p("span",{class:"stat-label"},"Last Sync:",-1)),p("span",uae,oe(n.getLastSyncDate(a.responseSpreadsheetId)),1)])])]))),128))]))])])}const fae=_t(kse,[["render",dae],["__scopeId","data-v-ca33e38a"]]);function hae(t,e,r){const n=Ve(()=>{var u,d;return(u=r.value)!=null&&u.numPeriods&&((d=r.value)!=null&&d.periodLabels)?r.value.periodLabels.slice(0,r.value.numPeriods).map((f,h)=>({value:h.toString(),label:f,periodIndex:h})):[{value:"0",label:"Per1",periodIndex:0},{value:"1",label:"Per2",periodIndex:1},{value:"2",label:"Per3",periodIndex:2},{value:"3",label:"Per4",periodIndex:3},{value:"4",label:"Per5",periodIndex:4},{value:"5",label:"Per6",periodIndex:5},{value:"6",label:"Per7",periodIndex:6}]}),s=Ve(()=>{const u=new Set;return console.log(" Finding teachers from students:",t.value.length),t.value.forEach(d=>{var f,h,v,m,g;(f=d.aeries)!=null&&f.schedule&&Object.values(d.aeries.schedule).forEach(b=>{b&&b.teacherId&&(console.log(" Found teacher ID in aeries.schedule:",b.teacherId),u.add(String(b.teacherId)))}),(v=(h=d.app)==null?void 0:h.schedule)!=null&&v.periods&&Object.values(d.app.schedule.periods).forEach(b=>{b&&(console.log(" Found teacher ID in app.schedule.periods:",b),u.add(String(b)))});for(let b=1;b<=7;b++){const _=`period${b}TeacherId`,T=d[_]||((m=d.aeries)==null?void 0:m[_])||((g=d.app)==null?void 0:g[_]);T&&(console.log(" Found teacher ID in",_,":",T),u.add(String(T)))}}),console.log(" Unique teacher IDs found:",Array.from(u)),console.log(" Users available:",e.value.length),Array.from(u).map(d=>{let f=e.value.find(h=>h.id===d);return!f&&/^\d+$/.test(d)&&(f=e.value.find(h=>h.aeriesId===d)),{id:d,name:f?f.name||`${f.firstName} ${f.lastName}`:`Teacher ${d}`,actualUserId:f?f.id:null}}).sort((d,f)=>d.name.localeCompare(f.name))}),i=(u,d=[])=>{let f=-1;if(/^\d+$/.test(u))f=parseInt(u)-1;else if(u==="SH")f=6;else if(u.startsWith("Per")){const h=u.replace("Per","");/^\d+$/.test(h)&&(f=parseInt(h)-1)}return d.includes(f.toString())};return{availablePeriods:n,availableTeachers:s,getStudentsForTeachers:(u,d=[])=>t.value.filter(f=>{var v,m,g,b,_,T,C;if(!(((m=(v=f.app)==null?void 0:v.flags)==null?void 0:m.flag1)||f.flag1||!1))return!1;if((g=f.aeries)!=null&&g.schedule){const R=Object.entries(f.aeries.schedule);for(let D=0;D<R.length;D++){const[w,E]=R[D];if(E&&E.teacherId&&u.includes(String(E.teacherId))&&!i(w,d))return!0}}if((_=(b=f.app)==null?void 0:b.schedule)!=null&&_.periods){const R=Object.entries(f.app.schedule.periods);for(let D=0;D<R.length;D++){const[w,E]=R[D];if(E&&u.includes(String(E))&&!i(w,d))return!0}}for(let R=0;R<7;R++){const D=`period${R+1}TeacherId`,w=f[D]||((T=f.aeries)==null?void 0:T[D])||((C=f.app)==null?void 0:C[D]);if(w&&u.includes(String(w))&&!d.includes(R.toString()))return!0}return!1}),getStudentTeacherPeriods:(u,d,f=[])=>{var v,m,g,b,_,T,C,R,D,w,E;const h=[];if((v=u.aeries)!=null&&v.schedule){const y=Object.entries(u.aeries.schedule);for(let x=0;x<y.length;x++){const[I,A]=y[x];if(A&&A.teacherId&&d.includes(String(A.teacherId))&&!i(I,f)){let k=e.value.find(W=>W.id===String(A.teacherId));!k&&/^\d+$/.test(A.teacherId)&&(k=e.value.find(W=>W.aeriesId===String(A.teacherId)));const U=((g=(m=r.value)==null?void 0:m.periodLabels)==null?void 0:g[x])||`Period ${x+1}`;h.push({period:U,teacherName:k?k.name||`${k.firstName} ${k.lastName}`:`Teacher ${A.teacherId}`})}}}if((_=(b=u.app)==null?void 0:b.schedule)!=null&&_.periods){const y=Object.entries(u.app.schedule.periods);for(let x=0;x<y.length;x++){const[I,A]=y[x];if(A&&d.includes(String(A))&&!i(I,f)){const k=e.value.find(W=>W.id===String(A)),U=((C=(T=r.value)==null?void 0:T.periodLabels)==null?void 0:C[x])||`Period ${x+1}`;h.push({period:U,teacherName:k?k.name||`${k.firstName} ${k.lastName}`:`Teacher ${A}`})}}}for(let y=0;y<7;y++){const x=`period${y+1}TeacherId`,I=u[x]||((R=u.aeries)==null?void 0:R[x])||((D=u.app)==null?void 0:D[x]);if(I&&d.includes(String(I))&&!f.includes(y.toString())){let A=e.value.find(U=>U.id===String(I));!A&&/^\d+$/.test(I)&&(A=e.value.find(U=>U.aeriesId===String(I)));const k=((E=(w=r.value)==null?void 0:w.periodLabels)==null?void 0:E[y])||`Period ${y+1}`;h.push({period:k,teacherName:A?A.name||`${A.firstName} ${A.lastName}`:`Teacher ${I}`})}}return h},generateCSV:()=>{const u=["Student ID","First Name","Last Name","Grade","Case Manager","Assessment Accommodations","Services"],d=t.value.map(h=>{var C,R,D,w,E;const v=pt(h,"firstName")||"",m=pt(h,"lastName")||"",g=pt(h,"grade")||"",b=h.caseManagerId||((R=(C=h.app)==null?void 0:C.studentData)==null?void 0:R.caseManagerId)||"",_=((w=(D=h.app)==null?void 0:D.accommodations)==null?void 0:w.assessment)||[],T=((E=h.app)==null?void 0:E.classServices)||[];return[h.id||"",v,m,g,b,Array.isArray(_)?_.join("; "):_,Array.isArray(T)?T.map(y=>y.name||y).join("; "):T]});return[u,...d].map(h=>h.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(",")).join(`
`)},downloadCSV:(u,d)=>{const f=new Blob([u],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");h.href=URL.createObjectURL(f),h.download=d,h.click(),URL.revokeObjectURL(h.href)},isPeriodExcluded:i}}const um="casemanage_linked_sheet_id",Of="Student Data";function Dx(){const t=he(!1),e=he(localStorage.getItem(um)||""),r=he(""),n=he(null),s=he("idle"),i=he(""),a=he(null),o=he("");let l=null;const c=()=>new Promise((w,E)=>{var x,I,A;if((I=(x=window.google)==null?void 0:x.accounts)!=null&&I.oauth2&&((A=window.gapi)!=null&&A.client)){w();return}const y=document.createElement("script");y.src="https://accounts.google.com/gsi/client",y.onload=()=>{a.value=window.google.accounts.oauth2.initTokenClient({client_id:"756483333257-kh1cv865e0buv0cv9g0v1h7ghq7s0e70.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",callback:U=>{U.access_token?(o.value=U.access_token,t.value=!0,window.gapi.client.setToken({access_token:U.access_token}),l&&(l(U),l=null)):(console.error("Failed to get access token"),l&&(l(null),l=null))}});const k=document.createElement("script");k.src="https://apis.google.com/js/api.js",k.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]}),w()})},document.head.appendChild(k)},y.onerror=()=>E(new Error("Failed to load Google Identity Services")),document.head.appendChild(y)}),u=async()=>{if(!a.value)throw new Error("Google auth not initialized");if(o.value)try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:"1BxiMVs0XRA5nFMRigcZ_6g3D6P6dNTMhvBSm1x7kFNg"}),{access_token:o.value}}catch{console.log("Token expired, requesting new one"),o.value=""}return new Promise((w,E)=>{l=w;const y=setTimeout(()=>{l=null,E(new Error("Token request timed out"))},3e4),x=a.value.callback;a.value.callback=I=>{clearTimeout(y),a.value.callback=x,I.access_token?(o.value=I.access_token,t.value=!0,window.gapi.client.setToken({access_token:I.access_token}),l&&(l(I),l=null)):(console.error("Failed to get access token:",I),l&&(l(null),l=null))};try{a.value.requestAccessToken()}catch(I){clearTimeout(y),a.value.callback=x,E(I)}})},d=async(w,E=[])=>{var y;try{s.value="syncing",i.value="Creating new Google Sheet...",o.value||await u();const I=((y=ju().currentUser)==null?void 0:y.email)||"",A=await window.gapi.client.sheets.spreadsheets.create({properties:{title:`CaseManage Student Data - ${new Date().toLocaleDateString()}`,locale:"en_US",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},sheets:[{properties:{title:Of,gridProperties:{rowCount:1e3,columnCount:9,frozenRowCount:1}}}]}),k=A.result.spreadsheetId;e.value=k,r.value=`https://docs.google.com/spreadsheets/d/${k}`,localStorage.setItem(um,k),await f(w,E);const U=A.result.sheets[0].properties.sheetId;return await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:k,resource:{requests:[{repeatCell:{range:{sheetId:U,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:U,dimension:"COLUMNS",startIndex:0,endIndex:9}}},{addProtectedRange:{protectedRange:{range:{sheetId:U},description:`Read-only protection for ${Of}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),s.value="success",i.value="Sheet created and linked successfully!",n.value=new Date,window.open(r.value,"_blank"),{spreadsheetId:k,url:r.value}}catch(x){throw console.error("Error creating sheet:",x),s.value="error",i.value=`Failed to create sheet: ${x.message}`,x}},f=async(w,E=[])=>{if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{s.value="syncing",i.value="Updating Google Sheet...",o.value||await u();const y=w.filter(U=>{var P,B;return((B=(P=U.app)==null?void 0:P.flags)==null?void 0:B.flag1)||U.flag1||!1});console.log(" Google Sheets - Original students:",w.length),console.log(" Google Sheets - Filtered students (separate setting only):",y.length),console.log(" Google Sheets - Students data:",y),y&&y.length>0&&console.log(" Google Sheets - First student:",y[0]);const x=["Student ID","First Name","Last Name","Grade","Case Manager","Separate Setting","Assessment Accommodations","Services","Last Updated"],I=y.map(U=>{var W,P,B,H,L,Z,j,O,G,X,q,pe;return console.log(" Processing student:",U.id,{firstName:U.firstName||((P=(W=U.app)==null?void 0:W.studentData)==null?void 0:P.firstName),lastName:U.lastName||((H=(B=U.app)==null?void 0:B.studentData)==null?void 0:H.lastName),grade:U.grade||((Z=(L=U.app)==null?void 0:L.studentData)==null?void 0:Z.grade)}),[U.id||"",U.firstName||((O=(j=U.app)==null?void 0:j.studentData)==null?void 0:O.firstName)||"",U.lastName||((X=(G=U.app)==null?void 0:G.studentData)==null?void 0:X.lastName)||"",U.grade||((pe=(q=U.app)==null?void 0:q.studentData)==null?void 0:pe.grade)||"",v(U,E)||"",b(U)||"",m(U,"assessment")||"",g(U)||"",new Date().toLocaleString()]}),A=[x,...I];console.log(" Google Sheets - Data to write:",A),await window.gapi.client.sheets.spreadsheets.values.clear({spreadsheetId:e.value,range:`${Of}!A:Z`});const k=await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${Of}!A1`,valueInputOption:"RAW",resource:{values:A}});console.log(" Google Sheets - Update response:",k),s.value="success",i.value=`Updated ${I.length} students (separate setting only)`,n.value=new Date}catch(y){throw console.error("Error updating sheet:",y),s.value="error",i.value=`Failed to update: ${y.message}`,y.status===401&&(o.value="",await u()),y}},h=()=>{e.value="",r.value="",localStorage.removeItem(um),s.value="idle",i.value="",n.value=null},v=(w,E=[])=>{var I,A;const y=w.caseManagerId||((A=(I=w.app)==null?void 0:I.studentData)==null?void 0:A.caseManagerId)||w.casemanager_id;if(!y)return"Not Assigned";const x=E.find(k=>k.id===y);return x&&(x.name||`${x.firstName} ${x.lastName}`||x.email)||y},m=(w,E)=>{var x,I,A;const y=((I=(x=w.app)==null?void 0:x.accommodations)==null?void 0:I[E])||((A=w.accommodations)==null?void 0:A[E])||[];return Array.isArray(y)?y.join(", "):y},g=w=>{var y;const E=((y=w.app)==null?void 0:y.classServices)||w.classServices||[];return Array.isArray(E)?E.map(x=>x.name||x).join(", "):E},b=w=>{var y,x;return((x=(y=w.app)==null?void 0:y.flags)==null?void 0:x.flag1)||w.flag1||!1?"True":"False"},_=async()=>{if(!e.value)return!1;try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:e.value}),!0}catch(w){return w.status===404&&h(),!1}},T=async(w,E,y,x=[],I=[])=>{var A;if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{o.value||await u();const U=((A=ju().currentUser)==null?void 0:A.email)||"";console.log(" Creating custom tab:",w,"for teachers:",y,"excluding periods:",I);const P=(await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{addSheet:{properties:{title:w,gridProperties:{rowCount:1e3,columnCount:12,frozenRowCount:1}}}}]}})).result.replies[0].addSheet.properties.sheetId;console.log(" Created sheet with ID:",P);const B=E.filter(j=>{var G,X;return((X=(G=j.app)==null?void 0:G.flags)==null?void 0:X.flag1)||j.flag1||!1});console.log(" Custom tab - Original students:",E.length),console.log(" Custom tab - Filtered students (separate setting only):",B.length);const H=["Student ID","First Name","Last Name","Grade","Case Manager","Period","Teacher","Subject","Separate Setting","Assessment Accommodations","Services","Last Updated"],L=[];B.forEach(j=>{const O=C(j,y,x,I);console.log(" Student:",j.id,"Periods found:",O.length,"Excluded periods:",I),O.forEach(G=>{console.log(" Adding row for period:",G.period,"teacher:",G.teacherName,"source:",G.source||"unknown")}),O.forEach(G=>{var X,q,pe,ie,de,z;L.push([j.id||"",j.firstName||((q=(X=j.app)==null?void 0:X.studentData)==null?void 0:q.firstName)||"",j.lastName||((ie=(pe=j.app)==null?void 0:pe.studentData)==null?void 0:ie.lastName)||"",j.grade||((z=(de=j.app)==null?void 0:de.studentData)==null?void 0:z.grade)||"",v(j,x)||"",G.period||"",G.teacherName||"",G.subject||"",b(j)||"",m(j,"assessment")||"",g(j)||"",new Date().toLocaleString()])})});const Z=[H,...L];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${w}!A1`,valueInputOption:"RAW",resource:{values:Z}}),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{repeatCell:{range:{sheetId:P,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:P,dimension:"COLUMNS",startIndex:0,endIndex:12}}},{addProtectedRange:{protectedRange:{range:{sheetId:P},description:`Read-only protection for ${w}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),console.log(" Custom tab created successfully with",L.length,"rows and read-only protection"),{sheetId:P,rowCount:L.length}}catch(k){throw console.error("Error creating custom tab:",k),k}},C=(w,E,y=[],x=[])=>{var k,U,W,P,B;const I=[];console.log(" getStudentPeriodsForTeachers for student:",w.id,"teacherIds:",E,"excludedPeriods:",x,"excludedPeriods array:",JSON.stringify(x));const A=H=>{let L=-1;if(/^\d+$/.test(H))L=parseInt(H)-1;else if(H==="SH")L=6;else if(H.startsWith("Per")){const Z=H.replace("Per","");/^\d+$/.test(Z)&&(L=parseInt(Z)-1)}return console.log(" Period",H,"maps to index",L,"excluded?",x.includes(L.toString())),x.includes(L.toString())};if((k=w.aeries)!=null&&k.schedule){const H=Object.entries(w.aeries.schedule);console.log(" Aeries schedule entries:",H.length);for(let L=0;L<H.length;L++){const[Z,j]=H[L],O=A(Z);console.log(" Checking aeries period key:",Z,"teacherId:",j==null?void 0:j.teacherId,"excluded?",O),j&&j.teacherId&&E.includes(String(j.teacherId))&&(O?console.log(" Excluding aeries period",Z):(console.log(" Including aeries period",Z),I.push({period:Z.replace("period",""),teacherId:j.teacherId,teacherName:R(j.teacherId,y),subject:j.subject||"",source:"aeries"})))}}if((W=(U=w.app)==null?void 0:U.schedule)!=null&&W.periods){const H=Object.entries(w.app.schedule.periods);console.log(" App schedule entries:",H.length);for(let L=0;L<H.length;L++){const[Z,j]=H[L],O=A(Z);console.log(" Checking app period key:",Z,"teacherId:",j,"excluded?",O),j&&E.includes(String(j))&&(O?console.log(" Excluding app period",Z):(console.log(" Including app period",Z),I.push({period:Z,teacherId:j,teacherName:R(j,y),subject:"",source:"app"})))}}for(let H=0;H<7;H++){const L=`period${H+1}TeacherId`,Z=w[L]||((P=w.aeries)==null?void 0:P[L])||((B=w.app)==null?void 0:B[L]);if(Z&&E.includes(String(Z))){const j=x.includes(H.toString());console.log(" Checking CSV period index",H,"field:",L,"teacherId:",Z,"excluded?",j),j?console.log(" Excluding CSV period",H):(console.log(" Including CSV period",H),I.push({period:(H+1).toString(),teacherId:Z,teacherName:R(Z,y),subject:"",source:"csv"}))}}return console.log(" Final periods for student",w.id,":",I.length,I),I},R=(w,E=[])=>{let y=E.find(x=>x.id===w);return!y&&/^\d+$/.test(w)&&(y=E.find(x=>x.aeriesId===w)),y?y.name||`${y.firstName} ${y.lastName}`||`Teacher ${w}`:`Teacher ${w}`};return{isInitialized:t,linkedSheetId:e,linkedSheetUrl:r,lastSyncTime:n,syncStatus:s,syncMessage:i,initializeGoogleAuth:c,requestAccessToken:u,createLinkedSheet:d,updateSheetData:f,createCustomTab:T,deleteCustomTab:async w=>{if(!e.value)throw new Error("No linked sheet.");try{o.value||await u(),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{deleteSheet:{sheetId:w}}]}}),console.log(" Deleted custom tab with sheet ID:",w)}catch(E){throw console.error("Error deleting custom tab:",E),E}},unlinkSheet:h,checkSheetConnection:_}}const pae=Object.freeze(Object.defineProperty({__proto__:null,useGoogleSheetsRealtime:Dx},Symbol.toStringTag,{value:"Module"}));function mae(t,e,r){const{generateCSV:n,downloadCSV:s}=r,{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeGoogleAuth:u,createLinkedSheet:d,updateSheetData:f,createCustomTab:h,deleteCustomTab:v,unlinkSheet:m,checkSheetConnection:g}=Dx();let b=null,_=!1;const T=async()=>{try{const k=localStorage.getItem("casemanage_linked_sheet_id");k&&k.startsWith("1XSL0Sl7")&&(console.log("Clearing old sheet ID that was causing 403 errors"),localStorage.removeItem("casemanage_linked_sheet_id")),await u(),i.value&&await g()&&(await w(),C())}catch(k){console.error("Failed to initialize Google Auth:",k)}};er(()=>t.value,(k,U)=>{k&&U&&k!==U&&(_=!0,console.log(" Student data changed, will sync on next interval")),k!=null&&k.length},{deep:!0});const C=()=>{b&&clearInterval(b),b=setInterval(async()=>{if(i.value&&_&&l.value!=="syncing")try{console.log(" Hourly auto-sync starting..."),await w(),_=!1,console.log(" Hourly auto-sync completed")}catch(k){console.error(" Hourly auto-sync failed:",k)}},36e5)},R=()=>{b&&clearInterval(b)},D=async()=>{try{await d(t.value,e.value),C()}catch(k){console.error("Failed to create linked sheet:",k),alert("Failed to create Google Sheet. Please make sure you are signed in to Google.")}},w=async()=>{if(!(!i.value||l.value==="syncing"))try{await f(t.value,e.value)}catch(k){console.error("Failed to sync sheet:",k),alert("Failed to sync sheet. Please try again.")}};return{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeIntegration:T,createLinkedGoogleSheet:D,syncNow:w,openGoogleSheet:()=>{a.value&&(window.open(a.value,"_blank","noopener,noreferrer")||(window.location.href=a.value))},unlinkSheet:m,createCustomTab:h,deleteCustomTab:v,createGoogleSheetWithData:()=>{const k=n();s(k,"student_data.csv"),window.open("https://sheets.new","_blank")},createBlankGoogleSheet:()=>{window.open("https://sheets.new","_blank")},exportToCSV:()=>{const k=n();s(k,"student_data_export.csv")},formatTime:k=>new Date(k).toLocaleString(),setupAutoSync:C,cleanupAutoSync:R}}function vae(t,e){const{getStudentsForTeachers:r}=t,{createCustomTab:n,deleteCustomTab:s}=e,i=he([]),a=he(!1),o=he(""),l=he([]),c=he([]),u=5,d=Ve(()=>l.value.length===0?[]:r(l.value,c.value)),f=async g=>{if(!o.value.trim()||l.value.length===0){alert("Please enter a tab name and select at least one teacher");return}if(i.value.length>=u){alert(`Maximum of ${u} custom tabs allowed`);return}try{const b=r(l.value,c.value),_=await n(o.value.trim(),b,l.value,g,c.value),T={id:Date.now().toString(),name:o.value.trim(),teachers:[...l.value],studentCount:_.rowCount,sheetId:_.sheetId};i.value.push(T),v(),console.log("Custom tab added:",T),alert(`Custom tab "${T.name}" created successfully with ${_.rowCount} student entries!`)}catch(b){console.error("Failed to create custom tab:",b),alert("Failed to create custom tab in Google Sheet. Please try again.")}},h=async g=>{const b=i.value.find(_=>_.id===g);if(b&&confirm(`Are you sure you want to remove the "${b.name}" tab?`))try{b.sheetId&&await s(b.sheetId),i.value=i.value.filter(_=>_.id!==g),console.log("Custom tab removed:",g),alert(`Tab "${b.name}" removed successfully.`)}catch(_){console.error("Failed to delete custom tab:",_),alert("Failed to delete tab from Google Sheet. You may need to delete it manually."),i.value=i.value.filter(T=>T.id!==g)}},v=()=>{o.value="",l.value=[],c.value=[],a.value=!1};return{customTabs:i,showAddTabForm:a,newTabName:o,selectedTeachers:l,selectedExcludedPeriods:c,maxCustomTabs:u,filteredStudentsPreview:d,addCustomTab:f,removeCustomTab:h,resetForm:v,toggleAddTabForm:()=>{a.value=!a.value,a.value||v()}}}const gae={class:"sheets-section"},xae={key:0,class:"linked-sheet-status"},yae={class:"status-card success"},Eae={class:"sync-info"},bae={key:0},_ae={key:1,class:"syncing"},Sae={key:2,class:"success"},Tae={key:3,class:"error"},Aae={class:"sheet-actions"},wae=["disabled"],Cae={key:1,class:"create-sheet-section"},Iae={class:"alternative-options"},kae={class:"button-group"},Dae={__name:"GoogleSheetsConnector",props:{linkedSheetId:String,lastSyncTime:[String,Date],syncStatus:String,syncMessage:String},emits:["openGoogleSheet","syncNow","unlinkSheet","createLinkedGoogleSheet","createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){const e=r=>new Date(r).toLocaleString();return(r,n)=>(N(),M("div",gae,[n[12]||(n[12]=p("h4",null,"Google Sheets Integration",-1)),t.linkedSheetId?(N(),M("div",xae,[p("div",yae,[n[7]||(n[7]=p("h5",null," Linked Google Sheet",-1)),n[8]||(n[8]=p("p",null,"Your student data is synced to Google Sheets",-1)),p("button",{onClick:n[0]||(n[0]=s=>r.$emit("openGoogleSheet")),class:"sheet-link"}," Open Google Sheet  "),p("div",Eae,[t.lastSyncTime?(N(),M("span",bae,"Last synced: "+oe(e(t.lastSyncTime)),1)):Re("",!0),t.syncStatus==="syncing"?(N(),M("span",_ae," Syncing...")):t.syncStatus==="success"?(N(),M("span",Sae," Synced")):t.syncStatus==="error"?(N(),M("span",Tae," "+oe(t.syncMessage),1)):Re("",!0)]),n[9]||(n[9]=p("div",{class:"auto-sync-info"},[p("span",{class:"auto-sync-badge"},[p("span",{class:"pulse"}),Ne(" Auto-sync enabled ")]),p("p",{class:"auto-sync-description"}," Changes to student data, accommodations, and services are automatically synced to your Google Sheet. ")],-1)),p("div",Aae,[p("button",{onClick:n[1]||(n[1]=s=>r.$emit("syncNow")),disabled:t.syncStatus==="syncing",class:"btn-sync"}," Sync Now ",8,wae),p("button",{onClick:n[2]||(n[2]=s=>r.$emit("unlinkSheet")),class:"btn-unlink"}," Unlink Sheet ")])])])):(N(),M("div",Cae,[n[10]||(n[10]=Xn('<h5 data-v-ec72cef0>Create a Linked Google Sheet</h5><p data-v-ec72cef0>Link your student data to a Google Sheet that automatically updates when changes are made.</p><div class="features-list" data-v-ec72cef0><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Auto-syncs when students are added or updated</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Updates accommodations and services in real-time</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Maintains a live connection to your data</span></div></div>',3)),p("button",{onClick:n[3]||(n[3]=s=>r.$emit("createLinkedGoogleSheet")),class:"btn-primary"},"  Create & Link Google Sheet ")])),p("div",Iae,[n[11]||(n[11]=p("h5",null,"Other Export Options",-1)),p("div",kae,[p("button",{onClick:n[4]||(n[4]=s=>r.$emit("createGoogleSheetWithData")),class:"btn-secondary"},"  Create Google Sheet with Data (One-time) "),p("button",{onClick:n[5]||(n[5]=s=>r.$emit("createBlankGoogleSheet")),class:"btn-secondary"},"  Create Blank Google Sheet "),p("button",{onClick:n[6]||(n[6]=s=>r.$emit("exportToCSV")),class:"btn-secondary"},"  Export to CSV Only ")])])]))}},Rae=_t(Dae,[["__scopeId","data-v-ec72cef0"]]),Fae={class:"preview-section"},Pae={class:"preview-table"},Oae={key:0},Nae={key:0},Lae={key:0,class:"preview-note"},dm=5,Bae={__name:"StudentPreview",props:{filteredStudents:{type:Array,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},setup(t){const e=t,r=Ve(()=>e.filteredStudents.slice(0,dm)),n=a=>{const o=pt(a,"firstName")||"",l=pt(a,"lastName")||"";return`${o} ${l}`.trim()},s=a=>pt(a,"grade")||"",i=a=>e.getStudentTeacherPeriods(a,e.selectedTeachers,e.selectedExcludedPeriods);return(a,o)=>(N(),M("div",Fae,[p("h6",null,"Preview ("+oe(t.filteredStudents.length)+" students)",1),p("div",Pae,[p("table",null,[o[0]||(o[0]=p("thead",null,[p("tr",null,[p("th",null,"Name"),p("th",null,"Grade"),p("th",null,"Period"),p("th",null,"Teacher")])],-1)),p("tbody",null,[(N(!0),M(Pe,null,We(r.value,l=>(N(),M("tr",{key:l.id},[p("td",null,oe(n(l)),1),p("td",null,oe(s(l)),1),p("td",null,[(N(!0),M(Pe,null,We(i(l),(c,u)=>(N(),M("span",{key:u},[Ne(oe(c.period),1),u<i(l).length-1?(N(),M("span",Oae,", ")):Re("",!0)]))),128))]),p("td",null,[(N(!0),M(Pe,null,We(i(l),(c,u)=>(N(),M("span",{key:u},[Ne(oe(c.teacherName),1),u<i(l).length-1?(N(),M("span",Nae,", ")):Re("",!0)]))),128))])]))),128))])]),t.filteredStudents.length>dm?(N(),M("p",Lae," ... and "+oe(t.filteredStudents.length-dm)+" more students ",1)):Re("",!0)])]))}},Mae=_t(Bae,[["__scopeId","data-v-936b1ce9"]]),Uae={class:"custom-tabs-config"},Vae={class:"add-tab-controls"},$ae=["disabled"],Hae={key:0,class:"max-tabs-warning"},jae={key:0,class:"add-tab-form"},Gae={class:"form-group"},Wae=["value"],zae={class:"form-group"},Kae={class:"teacher-checkboxes"},qae=["value","checked","onChange"],Xae={class:"form-group"},Yae={class:"period-checkboxes"},Qae=["value","checked","onChange"],Jae={class:"form-actions"},Zae={key:1,class:"existing-tabs"},eie={class:"tab-teachers"},tie=["onClick"],rie={__name:"CustomTabManager",props:{customTabs:{type:Array,required:!0},showAddTabForm:{type:Boolean,required:!0},newTabName:{type:String,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},maxCustomTabs:{type:Number,required:!0},availableTeachers:{type:Array,required:!0},availablePeriods:{type:Array,required:!0},filteredStudentsPreview:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},emits:["toggleAddTabForm","update:newTabName","updateSelectedTeachers","updateSelectedExcludedPeriods","addCustomTab","removeCustomTab","resetForm"],setup(t){return(e,r)=>(N(),M("div",Uae,[r[8]||(r[8]=p("h5",null,"Custom Teacher Tabs",-1)),r[9]||(r[9]=p("p",null,"Create custom tabs with data filtered by specific teachers",-1)),p("div",Vae,[p("button",{onClick:r[0]||(r[0]=n=>e.$emit("toggleAddTabForm")),disabled:t.customTabs.length>=t.maxCustomTabs,class:"btn-primary"}," + Add Custom Tab ",8,$ae),t.customTabs.length>=t.maxCustomTabs?(N(),M("span",Hae," Maximum of "+oe(t.maxCustomTabs)+" custom tabs allowed ",1)):Re("",!0)]),t.showAddTabForm?(N(),M("div",jae,[p("div",Gae,[r[4]||(r[4]=p("label",null,"Tab Name",-1)),p("input",{value:t.newTabName,onInput:r[1]||(r[1]=n=>e.$emit("update:newTabName",n.target.value)),type:"text",class:"form-input",placeholder:"e.g., Math Teachers",maxlength:"30"},null,40,Wae)]),p("div",zae,[r[5]||(r[5]=p("label",null,"Select Teachers",-1)),p("div",Kae,[(N(!0),M(Pe,null,We(t.availableTeachers,n=>(N(),M("label",{key:n.id,class:"checkbox-label"},[p("input",{type:"checkbox",value:n.id,checked:t.selectedTeachers.includes(n.id),onChange:s=>e.$emit("updateSelectedTeachers",n.id,s.target.checked)},null,40,qae),Ne(" "+oe(n.name),1)]))),128))])]),p("div",Xae,[r[6]||(r[6]=p("label",null,"Exclude Periods (Optional)",-1)),p("div",Yae,[(N(!0),M(Pe,null,We(t.availablePeriods,n=>(N(),M("label",{key:n.value,class:"checkbox-label"},[p("input",{type:"checkbox",value:n.value,checked:t.selectedExcludedPeriods.includes(n.value),onChange:s=>e.$emit("updateSelectedExcludedPeriods",n.value,s.target.checked)},null,40,Qae),Ne(" "+oe(n.label),1)]))),128))])]),t.selectedTeachers.length>0?(N(),Rn(Mae,{key:0,"filtered-students":t.filteredStudentsPreview,"selected-teachers":t.selectedTeachers,"selected-excluded-periods":t.selectedExcludedPeriods,"get-student-teacher-periods":t.getStudentTeacherPeriods},null,8,["filtered-students","selected-teachers","selected-excluded-periods","get-student-teacher-periods"])):Re("",!0),p("div",Jae,[p("button",{onClick:r[2]||(r[2]=n=>e.$emit("addCustomTab")),class:"btn-primary"}," Create Tab "),p("button",{onClick:r[3]||(r[3]=n=>e.$emit("resetForm")),class:"btn-secondary"}," Cancel ")])])):Re("",!0),t.customTabs.length>0?(N(),M("div",Zae,[r[7]||(r[7]=p("h6",null,"Current Custom Tabs",-1)),(N(!0),M(Pe,null,We(t.customTabs,n=>(N(),M("div",{key:n.id,class:"tab-item"},[p("div",null,[p("strong",null,oe(n.name),1),p("span",eie,oe(n.teachers.length)+" teacher(s), "+oe(n.studentCount)+" students ",1)]),p("button",{onClick:s=>e.$emit("removeCustomTab",n.id),class:"btn-danger btn-small"}," Remove ",8,tie)]))),128))])):Re("",!0)]))}},nie=_t(rie,[["__scopeId","data-v-236484db"]]),sie={class:"export-options-section"},aie={class:"export-grid"},iie={class:"export-card"},oie={class:"export-card"},lie={class:"export-card"},cie={__name:"TestingExportOptions",emits:["createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){return(e,r)=>(N(),M("div",sie,[r[12]||(r[12]=p("h4",null,"Export Options",-1)),r[13]||(r[13]=p("p",null,"Additional ways to export and work with your student data",-1)),p("div",aie,[p("div",iie,[r[3]||(r[3]=p("div",{class:"export-icon"},"",-1)),r[4]||(r[4]=p("h5",null,"Google Sheets with Data",-1)),r[5]||(r[5]=p("p",null,"Create a new Google Sheet and populate it with current student data (one-time export)",-1)),p("button",{onClick:r[0]||(r[0]=n=>e.$emit("createGoogleSheetWithData")),class:"btn-primary"}," Create Sheet with Data ")]),p("div",oie,[r[6]||(r[6]=p("div",{class:"export-icon"},"",-1)),r[7]||(r[7]=p("h5",null,"Blank Google Sheet",-1)),r[8]||(r[8]=p("p",null,"Create a new blank Google Sheet that you can customize yourself",-1)),p("button",{onClick:r[1]||(r[1]=n=>e.$emit("createBlankGoogleSheet")),class:"btn-primary"}," Create Blank Sheet ")]),p("div",lie,[r[9]||(r[9]=p("div",{class:"export-icon"},"",-1)),r[10]||(r[10]=p("h5",null,"CSV Export",-1)),r[11]||(r[11]=p("p",null,"Download student data as a CSV file for use in Excel or other applications",-1)),p("button",{onClick:r[2]||(r[2]=n=>e.$emit("exportToCSV")),class:"btn-primary"}," Download CSV ")])]),r[14]||(r[14]=p("div",{class:"export-info"},[p("h5",null,"Export Information"),p("ul",null,[p("li",null,[p("strong",null,"Linked Sheets:"),Ne(" Automatically sync when data changes")]),p("li",null,[p("strong",null,"One-time Exports:"),Ne(" Snapshot of data at export time")]),p("li",null,[p("strong",null,"CSV Files:"),Ne(" Compatible with Excel, Numbers, and other spreadsheet apps")])])],-1))]))}},uie=_t(cie,[["__scopeId","data-v-3bc6896f"]]),die={class:"testing-links-container"},fie={__name:"TestingLinks",setup(t){const{students:e,fetchStudents:r}=wa(),{userList:n,fetchUsers:s}=Ca(),{appSettings:i,loadAppSettings:a}=Ia(),o=hae(e,n,i),{availablePeriods:l,availableTeachers:c,getStudentTeacherPeriods:u}=o,d=mae(e,n,o),{linkedSheetId:f,lastSyncTime:h,syncStatus:v,syncMessage:m,initializeIntegration:g,createLinkedGoogleSheet:b,syncNow:_,openGoogleSheet:T,unlinkSheet:C,createGoogleSheetWithData:R,createBlankGoogleSheet:D,exportToCSV:w,cleanupAutoSync:E}=d,y=vae(o,d),{customTabs:x,showAddTabForm:I,newTabName:A,selectedTeachers:k,selectedExcludedPeriods:U,maxCustomTabs:W,filteredStudentsPreview:P,addCustomTab:B,removeCustomTab:H,resetForm:L,toggleAddTabForm:Z}=y,j=(X,q)=>{if(q)k.value.includes(X)||k.value.push(X);else{const pe=k.value.indexOf(X);pe>-1&&k.value.splice(pe,1)}},O=(X,q)=>{if(q)U.value.includes(X)||U.value.push(X);else{const pe=U.value.indexOf(X);pe>-1&&U.value.splice(pe,1)}},G=async()=>{await B(n.value)};return Qt(async()=>{try{await Promise.all([r(),s(),a()]),console.log("Students loaded:",e.value.length),console.log("Users loaded:",n.value.length),console.log("App settings loaded:",i.value),await g()}catch(X){console.error("Failed to initialize TestingLinks:",X)}}),eo(()=>{E()}),(X,q)=>(N(),M("div",die,[q[1]||(q[1]=p("h3",null,"Testing Links & Google Sheets Integration",-1)),rt(Rae,{"linked-sheet-id":ge(f),"last-sync-time":ge(h),"sync-status":ge(v),"sync-message":ge(m),onOpenGoogleSheet:ge(T),onSyncNow:ge(_),onUnlinkSheet:ge(C),onCreateLinkedGoogleSheet:ge(b),onCreateGoogleSheetWithData:ge(R),onCreateBlankGoogleSheet:ge(D),onExportToCsv:ge(w)},null,8,["linked-sheet-id","last-sync-time","sync-status","sync-message","onOpenGoogleSheet","onSyncNow","onUnlinkSheet","onCreateLinkedGoogleSheet","onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"]),ge(f)?(N(),Rn(nie,{key:0,"custom-tabs":ge(x),"show-add-tab-form":ge(I),"new-tab-name":ge(A),"selected-teachers":ge(k),"selected-excluded-periods":ge(U),"max-custom-tabs":ge(W),"available-teachers":ge(c),"available-periods":ge(l),"filtered-students-preview":ge(P),"get-student-teacher-periods":ge(u),onToggleAddTabForm:ge(Z),"onUpdate:newTabName":q[0]||(q[0]=pe=>A.value=pe),onUpdateSelectedTeachers:j,onUpdateSelectedExcludedPeriods:O,onAddCustomTab:G,onRemoveCustomTab:ge(H),onResetForm:ge(L)},null,8,["custom-tabs","show-add-tab-form","new-tab-name","selected-teachers","selected-excluded-periods","max-custom-tabs","available-teachers","available-periods","filtered-students-preview","get-student-teacher-periods","onToggleAddTabForm","onRemoveCustomTab","onResetForm"])):Re("",!0),rt(uie,{onCreateGoogleSheetWithData:ge(R),onCreateBlankGoogleSheet:ge(D),onExportToCsv:ge(w)},null,8,["onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"])]))}},hie=_t(fie,[["__scopeId","data-v-8d441fb1"]]),pie={class:"admin-dashboard"},mie={class:"stats-grid"},vie={class:"stat-card"},gie={class:"stat-content"},xie={class:"stat-card"},yie={class:"stat-content"},Eie={class:"stat-card"},bie={class:"stat-content"},_ie={class:"stat-card"},Sie={class:"stat-content"},Tie={class:"categories-grid"},Aie={class:"category-card"},wie={class:"category-header"},Cie={class:"category-card"},Iie={class:"category-header"},kie={class:"category-card"},Die={class:"category-header"},Rie={class:"category-card"},Fie={class:"category-header"},Pie={class:"system-status"},Oie={class:"status-grid"},Nie={class:"status-card"},Lie={class:"sync-status"},Bie={class:"sync-item"},Mie={key:0,class:"sync-time"},Uie={class:"sync-item"},Vie={class:"sync-time"},$ie={class:"status-card"},Hie={class:"user-activity"},jie={class:"activity-item"},Gie={class:"activity-count"},Wie={class:"activity-item"},zie={class:"activity-count"},Kie={class:"quick-actions"},qie={class:"actions-grid"},Xie={__name:"AdminDashboard",emits:["goToCategory","goToStudents"],setup(t){const{students:e,fetchStudents:r}=wa(),{userList:n,fetchUsers:s}=Ca(),{linkedSheetId:i,lastSyncTime:a}=Dx(),o=he(12),l=he(8),c=he(!0),u=he("Connected"),d=Ve(()=>{var b;return((b=e.value)==null?void 0:b.length)||0}),f=Ve(()=>{var b;return((b=n.value)==null?void 0:b.length)||0}),h=Ve(()=>{var b;return((b=n.value)==null?void 0:b.filter(_=>_.role==="paraeducator").length)||0}),v=Ve(()=>i.value?1:0),m=Ve(()=>!!i.value),g=b=>b?new Date(b).toLocaleString():"Never";return Qt(async()=>{try{await Promise.all([r(),s()])}catch(b){console.error("Error loading dashboard data:",b)}}),(b,_)=>(N(),M("div",pie,[p("div",mie,[p("div",vie,[_[9]||(_[9]=p("div",{class:"stat-icon"},"",-1)),p("div",gie,[p("h3",null,oe(d.value),1),_[8]||(_[8]=p("p",null,"Total Students",-1))])]),p("div",xie,[_[11]||(_[11]=p("div",{class:"stat-icon"},"",-1)),p("div",yie,[p("h3",null,oe(f.value),1),_[10]||(_[10]=p("p",null,"System Users",-1))])]),p("div",Eie,[_[13]||(_[13]=p("div",{class:"stat-icon"},"",-1)),p("div",bie,[p("h3",null,oe(h.value),1),_[12]||(_[12]=p("p",null,"Paraeducators",-1))])]),p("div",_ie,[_[15]||(_[15]=p("div",{class:"stat-icon"},"",-1)),p("div",Sie,[p("h3",null,oe(v.value),1),_[14]||(_[14]=p("p",null,"Linked Sheets",-1))])])]),p("div",Tie,[p("div",Aie,[p("div",wie,[_[16]||(_[16]=p("h2",null," User & Student Management",-1)),p("button",{onClick:_[0]||(_[0]=T=>b.$emit("goToCategory","users-students")),class:"category-btn"}," Manage  ")]),_[17]||(_[17]=Xn('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Add Users</h4><p data-v-71bf3b1b>Create new user accounts with role assignments</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Manage Users</h4><p data-v-71bf3b1b>Edit existing users, roles, and permissions</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Student Administration</h4><p data-v-71bf3b1b>Comprehensive student data management</p></div></div></div></div>',1))]),p("div",Cie,[p("div",Iie,[_[18]||(_[18]=p("h2",null," Aide Management",-1)),p("button",{onClick:_[1]||(_[1]=T=>b.$emit("goToCategory","aide-management")),class:"category-btn"}," Manage  ")]),_[19]||(_[19]=Xn('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Aide Assignment</h4><p data-v-71bf3b1b>Assign paraeducators to students and periods</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Aide Schedule</h4><p data-v-71bf3b1b>Manage paraeducator schedules and assignments</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Time Table</h4><p data-v-71bf3b1b>Configure school periods and time slots</p></div></div></div></div>',1))]),p("div",kie,[p("div",Die,[_[20]||(_[20]=p("h2",null," Data & Integration",-1)),p("button",{onClick:_[2]||(_[2]=T=>b.$emit("goToCategory","data-integration")),class:"category-btn"}," Manage  ")]),_[21]||(_[21]=Xn('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>SEIS Import</h4><p data-v-71bf3b1b>Import student data from SEIS system</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Aeries API &amp; Import</h4><p data-v-71bf3b1b>Connect to Aeries SIS for data synchronization</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Testing Links</h4><p data-v-71bf3b1b>Google Sheets integration and export tools</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Teacher Feedback</h4><p data-v-71bf3b1b>Manage teacher feedback forms and responses</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Backup &amp; Restore</h4><p data-v-71bf3b1b>System backup and data restoration tools</p></div></div></div></div>',1))]),p("div",Rie,[p("div",Fie,[_[22]||(_[22]=p("h2",null," System Configuration",-1)),p("button",{onClick:_[3]||(_[3]=T=>b.$emit("goToCategory","system-config")),class:"category-btn"}," Manage  ")]),_[23]||(_[23]=Xn('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Permissions</h4><p data-v-71bf3b1b>Role-based access control and permissions matrix</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>App Settings</h4><p data-v-71bf3b1b>Configure application settings and preferences</p></div></div></div></div>',1))])]),p("div",Pie,[_[31]||(_[31]=p("h2",null," System Status",-1)),p("div",Oie,[p("div",Nie,[_[26]||(_[26]=p("h3",null," Data Sync Status",-1)),p("div",Lie,[p("div",Bie,[p("span",{class:at(["sync-indicator",{active:m.value}])},null,2),_[24]||(_[24]=p("span",null,"Google Sheets",-1)),ge(a)?(N(),M("span",Mie,oe(g(ge(a))),1)):Re("",!0)]),p("div",Uie,[p("span",{class:at(["sync-indicator",{active:c.value}])},null,2),_[25]||(_[25]=p("span",null,"Aeries SIS",-1)),p("span",Vie,oe(u.value),1)])])]),p("div",$ie,[_[29]||(_[29]=p("h3",null," User Activity",-1)),p("div",Hie,[p("div",jie,[_[27]||(_[27]=p("span",null,"Active Users Today",-1)),p("span",Gie,oe(o.value),1)]),p("div",Wie,[_[28]||(_[28]=p("span",null,"Recent Logins",-1)),p("span",zie,oe(l.value),1)])])]),_[30]||(_[30]=Xn('<div class="status-card" data-v-71bf3b1b><h3 data-v-71bf3b1b> System Health</h3><div class="health-indicators" data-v-71bf3b1b><div class="health-item" data-v-71bf3b1b><span data-v-71bf3b1b>Database</span><span class="health-status healthy" data-v-71bf3b1b> Healthy</span></div><div class="health-item" data-v-71bf3b1b><span data-v-71bf3b1b>Functions</span><span class="health-status healthy" data-v-71bf3b1b> Operational</span></div></div></div>',1))])]),p("div",Kie,[_[36]||(_[36]=p("h2",null," Quick Actions",-1)),p("div",qie,[p("button",{onClick:_[4]||(_[4]=T=>b.$emit("goToStudents")),class:"action-btn students"},_[32]||(_[32]=[p("span",{class:"action-icon"},"",-1),p("span",null,"View Students",-1)])),p("button",{onClick:_[5]||(_[5]=T=>b.$emit("goToCategory","users-students")),class:"action-btn users"},_[33]||(_[33]=[p("span",{class:"action-icon"},"",-1),p("span",null,"Manage Users",-1)])),p("button",{onClick:_[6]||(_[6]=T=>b.$emit("goToCategory","aide-management")),class:"action-btn aide"},_[34]||(_[34]=[p("span",{class:"action-icon"},"",-1),p("span",null,"Aide Management",-1)])),p("button",{onClick:_[7]||(_[7]=T=>b.$emit("goToCategory","data-integration")),class:"action-btn data"},_[35]||(_[35]=[p("span",{class:"action-icon"},"",-1),p("span",null,"Data & Integration",-1)]))])])]))}},Yie=_t(Xie,[["__scopeId","data-v-71bf3b1b"]]);var HI={exports:{}};function Qie(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fm={exports:{}};const Jie={},Zie=Object.freeze(Object.defineProperty({__proto__:null,default:Jie},Symbol.toStringTag,{value:"Module"})),eoe=J1(Zie);var l_;function Gt(){return l_||(l_=1,function(t,e){(function(r,n){t.exports=n()})(Nt,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof Nt<"u"&&Nt.crypto&&(i=Nt.crypto),!i&&typeof Qie=="function")try{i=eoe}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function _(){}return function(T){var C;return _.prototype=T,C=new _,_.prototype=null,C}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(_){var T=o(this);return _&&T.mixIn(_),(!T.hasOwnProperty("init")||this.init===T.init)&&(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var _=this.extend();return _.init.apply(_,arguments),_},init:function(){},mixIn:function(_){for(var T in _)_.hasOwnProperty(T)&&(this[T]=_[T]);_.hasOwnProperty("toString")&&(this.toString=_.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=c.WordArray=u.extend({init:function(_,T){_=this.words=_||[],T!=s?this.sigBytes=T:this.sigBytes=_.length*4},toString:function(_){return(_||h).stringify(this)},concat:function(_){var T=this.words,C=_.words,R=this.sigBytes,D=_.sigBytes;if(this.clamp(),R%4)for(var w=0;w<D;w++){var E=C[w>>>2]>>>24-w%4*8&255;T[R+w>>>2]|=E<<24-(R+w)%4*8}else for(var y=0;y<D;y+=4)T[R+y>>>2]=C[y>>>2];return this.sigBytes+=D,this},clamp:function(){var _=this.words,T=this.sigBytes;_[T>>>2]&=4294967295<<32-T%4*8,_.length=n.ceil(T/4)},clone:function(){var _=u.clone.call(this);return _.words=this.words.slice(0),_},random:function(_){for(var T=[],C=0;C<_;C+=4)T.push(a());return new d.init(T,_)}}),f=l.enc={},h=f.Hex={stringify:function(_){for(var T=_.words,C=_.sigBytes,R=[],D=0;D<C;D++){var w=T[D>>>2]>>>24-D%4*8&255;R.push((w>>>4).toString(16)),R.push((w&15).toString(16))}return R.join("")},parse:function(_){for(var T=_.length,C=[],R=0;R<T;R+=2)C[R>>>3]|=parseInt(_.substr(R,2),16)<<24-R%8*4;return new d.init(C,T/2)}},v=f.Latin1={stringify:function(_){for(var T=_.words,C=_.sigBytes,R=[],D=0;D<C;D++){var w=T[D>>>2]>>>24-D%4*8&255;R.push(String.fromCharCode(w))}return R.join("")},parse:function(_){for(var T=_.length,C=[],R=0;R<T;R++)C[R>>>2]|=(_.charCodeAt(R)&255)<<24-R%4*8;return new d.init(C,T)}},m=f.Utf8={stringify:function(_){try{return decodeURIComponent(escape(v.stringify(_)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(_){return v.parse(unescape(encodeURIComponent(_)))}},g=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(_){typeof _=="string"&&(_=m.parse(_)),this._data.concat(_),this._nDataBytes+=_.sigBytes},_process:function(_){var T,C=this._data,R=C.words,D=C.sigBytes,w=this.blockSize,E=w*4,y=D/E;_?y=n.ceil(y):y=n.max((y|0)-this._minBufferSize,0);var x=y*w,I=n.min(x*4,D);if(x){for(var A=0;A<x;A+=w)this._doProcessBlock(R,A);T=R.splice(0,x),C.sigBytes-=I}return new d.init(T,I)},clone:function(){var _=u.clone.call(this);return _._data=this._data.clone(),_},_minBufferSize:0});c.Hasher=g.extend({cfg:u.extend(),init:function(_){this.cfg=this.cfg.extend(_),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(_){return this._append(_),this._process(),this},finalize:function(_){_&&this._append(_);var T=this._doFinalize();return T},blockSize:16,_createHelper:function(_){return function(T,C){return new _.init(C).finalize(T)}},_createHmacHelper:function(_){return function(T,C){return new b.HMAC.init(_,C).finalize(T)}}});var b=l.algo={};return l}(Math);return r})}(fm)),fm.exports}var hm={exports:{}},c_;function rp(){return c_||(c_=1,function(t,e){(function(r,n){t.exports=n(Gt())})(Nt,function(r){return function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=s.x64={};l.Word=a.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=a.extend({init:function(c,u){c=this.words=c||[],u!=n?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,d=[],f=0;f<u;f++){var h=c[f];d.push(h.high),d.push(h.low)}return o.create(d,this.sigBytes)},clone:function(){for(var c=a.clone.call(this),u=c.words=this.words.slice(0),d=u.length,f=0;f<d;f++)u[f]=u[f].clone();return c}})}(),r})}(hm)),hm.exports}var pm={exports:{}},u_;function toe(){return u_||(u_=1,function(t,e){(function(r,n){t.exports=n(Gt())})(Nt,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,o=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],d=0;d<c;d++)u[d>>>2]|=l[d]<<24-d%4*8;a.call(this,u,c)}else a.apply(this,arguments)};o.prototype=i}}(),r.lib.WordArray})}(pm)),pm.exports}var mm={exports:{}},d_;function roe(){return d_||(d_=1,function(t,e){(function(r,n){t.exports=n(Gt())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var h=c[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return i.create(u,c*2)}},a.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var h=o(c[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=o(l.charCodeAt(d)<<16-d%2*16);return i.create(u,c*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}}(),r.enc.Utf16})}(mm)),mm.exports}var vm={exports:{}},f_;function rl(){return f_||(f_=1,function(t,e){(function(r,n){t.exports=n(Gt())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var f=[],h=0;h<u;h+=3)for(var v=c[h>>>2]>>>24-h%4*8&255,m=c[h+1>>>2]>>>24-(h+1)%4*8&255,g=c[h+2>>>2]>>>24-(h+2)%4*8&255,b=v<<16|m<<8|g,_=0;_<4&&h+_*.75<u;_++)f.push(d.charAt(b>>>6*(3-_)&63));var T=d.charAt(64);if(T)for(;f.length%4;)f.push(T);return f.join("")},parse:function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<u.length;f++)d[u.charCodeAt(f)]=f}var h=u.charAt(64);if(h){var v=l.indexOf(h);v!==-1&&(c=v)}return o(l,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,c,u){for(var d=[],f=0,h=0;h<c;h++)if(h%4){var v=u[l.charCodeAt(h-1)]<<h%4*2,m=u[l.charCodeAt(h)]>>>6-h%4*2,g=v|m;d[f>>>2]|=g<<24-f%4*8,f++}return i.create(d,f)}}(),r.enc.Base64})}(vm)),vm.exports}var gm={exports:{}},h_;function noe(){return h_||(h_=1,function(t,e){(function(r,n){t.exports=n(Gt())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,f=c?this._safe_map:this._map;l.clamp();for(var h=[],v=0;v<d;v+=3)for(var m=u[v>>>2]>>>24-v%4*8&255,g=u[v+1>>>2]>>>24-(v+1)%4*8&255,b=u[v+2>>>2]>>>24-(v+2)%4*8&255,_=m<<16|g<<8|b,T=0;T<4&&v+T*.75<d;T++)h.push(f.charAt(_>>>6*(3-T)&63));var C=f.charAt(64);if(C)for(;h.length%4;)h.push(C);return h.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<d.length;h++)f[d.charCodeAt(h)]=h}var v=d.charAt(64);if(v){var m=l.indexOf(v);m!==-1&&(u=m)}return o(l,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,c,u){for(var d=[],f=0,h=0;h<c;h++)if(h%4){var v=u[l.charCodeAt(h-1)]<<h%4*2,m=u[l.charCodeAt(h)]>>>6-h%4*2,g=v|m;d[f>>>2]|=g<<24-f%4*8,f++}return i.create(d,f)}}(),r.enc.Base64url})}(gm)),gm.exports}var xm={exports:{}},p_;function nl(){return p_||(p_=1,function(t,e){(function(r,n){t.exports=n(Gt())})(Nt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[];(function(){for(var m=0;m<64;m++)c[m]=n.abs(n.sin(m+1))*4294967296|0})();var u=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var b=0;b<16;b++){var _=g+b,T=m[_];m[_]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var C=this._hash.words,R=m[g+0],D=m[g+1],w=m[g+2],E=m[g+3],y=m[g+4],x=m[g+5],I=m[g+6],A=m[g+7],k=m[g+8],U=m[g+9],W=m[g+10],P=m[g+11],B=m[g+12],H=m[g+13],L=m[g+14],Z=m[g+15],j=C[0],O=C[1],G=C[2],X=C[3];j=d(j,O,G,X,R,7,c[0]),X=d(X,j,O,G,D,12,c[1]),G=d(G,X,j,O,w,17,c[2]),O=d(O,G,X,j,E,22,c[3]),j=d(j,O,G,X,y,7,c[4]),X=d(X,j,O,G,x,12,c[5]),G=d(G,X,j,O,I,17,c[6]),O=d(O,G,X,j,A,22,c[7]),j=d(j,O,G,X,k,7,c[8]),X=d(X,j,O,G,U,12,c[9]),G=d(G,X,j,O,W,17,c[10]),O=d(O,G,X,j,P,22,c[11]),j=d(j,O,G,X,B,7,c[12]),X=d(X,j,O,G,H,12,c[13]),G=d(G,X,j,O,L,17,c[14]),O=d(O,G,X,j,Z,22,c[15]),j=f(j,O,G,X,D,5,c[16]),X=f(X,j,O,G,I,9,c[17]),G=f(G,X,j,O,P,14,c[18]),O=f(O,G,X,j,R,20,c[19]),j=f(j,O,G,X,x,5,c[20]),X=f(X,j,O,G,W,9,c[21]),G=f(G,X,j,O,Z,14,c[22]),O=f(O,G,X,j,y,20,c[23]),j=f(j,O,G,X,U,5,c[24]),X=f(X,j,O,G,L,9,c[25]),G=f(G,X,j,O,E,14,c[26]),O=f(O,G,X,j,k,20,c[27]),j=f(j,O,G,X,H,5,c[28]),X=f(X,j,O,G,w,9,c[29]),G=f(G,X,j,O,A,14,c[30]),O=f(O,G,X,j,B,20,c[31]),j=h(j,O,G,X,x,4,c[32]),X=h(X,j,O,G,k,11,c[33]),G=h(G,X,j,O,P,16,c[34]),O=h(O,G,X,j,L,23,c[35]),j=h(j,O,G,X,D,4,c[36]),X=h(X,j,O,G,y,11,c[37]),G=h(G,X,j,O,A,16,c[38]),O=h(O,G,X,j,W,23,c[39]),j=h(j,O,G,X,H,4,c[40]),X=h(X,j,O,G,R,11,c[41]),G=h(G,X,j,O,E,16,c[42]),O=h(O,G,X,j,I,23,c[43]),j=h(j,O,G,X,U,4,c[44]),X=h(X,j,O,G,B,11,c[45]),G=h(G,X,j,O,Z,16,c[46]),O=h(O,G,X,j,w,23,c[47]),j=v(j,O,G,X,R,6,c[48]),X=v(X,j,O,G,A,10,c[49]),G=v(G,X,j,O,L,15,c[50]),O=v(O,G,X,j,x,21,c[51]),j=v(j,O,G,X,B,6,c[52]),X=v(X,j,O,G,E,10,c[53]),G=v(G,X,j,O,W,15,c[54]),O=v(O,G,X,j,D,21,c[55]),j=v(j,O,G,X,k,6,c[56]),X=v(X,j,O,G,Z,10,c[57]),G=v(G,X,j,O,I,15,c[58]),O=v(O,G,X,j,H,21,c[59]),j=v(j,O,G,X,y,6,c[60]),X=v(X,j,O,G,P,10,c[61]),G=v(G,X,j,O,w,15,c[62]),O=v(O,G,X,j,U,21,c[63]),C[0]=C[0]+j|0,C[1]=C[1]+O|0,C[2]=C[2]+G|0,C[3]=C[3]+X|0},_doFinalize:function(){var m=this._data,g=m.words,b=this._nDataBytes*8,_=m.sigBytes*8;g[_>>>5]|=128<<24-_%32;var T=n.floor(b/4294967296),C=b;g[(_+64>>>9<<4)+15]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,g[(_+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var R=this._hash,D=R.words,w=0;w<4;w++){var E=D[w];D[w]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}return R},clone:function(){var m=o.clone.call(this);return m._hash=this._hash.clone(),m}});function d(m,g,b,_,T,C,R){var D=m+(g&b|~g&_)+T+R;return(D<<C|D>>>32-C)+g}function f(m,g,b,_,T,C,R){var D=m+(g&_|b&~_)+T+R;return(D<<C|D>>>32-C)+g}function h(m,g,b,_,T,C,R){var D=m+(g^b^_)+T+R;return(D<<C|D>>>32-C)+g}function v(m,g,b,_,T,C,R){var D=m+(b^(g|~_))+T+R;return(D<<C|D>>>32-C)+g}s.MD5=o._createHelper(u),s.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5})}(xm)),xm.exports}var ym={exports:{}},m_;function jI(){return m_||(m_=1,function(t,e){(function(r,n){t.exports=n(Gt())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,o=n.algo,l=[],c=o.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var f=this._hash.words,h=f[0],v=f[1],m=f[2],g=f[3],b=f[4],_=0;_<80;_++){if(_<16)l[_]=u[d+_]|0;else{var T=l[_-3]^l[_-8]^l[_-14]^l[_-16];l[_]=T<<1|T>>>31}var C=(h<<5|h>>>27)+b+l[_];_<20?C+=(v&m|~v&g)+1518500249:_<40?C+=(v^m^g)+1859775393:_<60?C+=(v&m|v&g|m&g)-1894007588:C+=(v^m^g)-899497514,b=g,g=m,m=v<<30|v>>>2,v=h,h=C}f[0]=f[0]+h|0,f[1]=f[1]+v|0,f[2]=f[2]+m|0,f[3]=f[3]+g|0,f[4]=f[4]+b|0},_doFinalize:function(){var u=this._data,d=u.words,f=this._nDataBytes*8,h=u.sigBytes*8;return d[h>>>5]|=128<<24-h%32,d[(h+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(h+64>>>9<<4)+15]=f,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=a.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c)}(),r.SHA1})}(ym)),ym.exports}var Em={exports:{}},v_;function Rx(){return v_||(v_=1,function(t,e){(function(r,n){t.exports=n(Gt())})(Nt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[],u=[];(function(){function h(b){for(var _=n.sqrt(b),T=2;T<=_;T++)if(!(b%T))return!1;return!0}function v(b){return(b-(b|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(c[g]=v(n.pow(m,1/2))),u[g]=v(n.pow(m,1/3)),g++),m++})();var d=[],f=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(h,v){for(var m=this._hash.words,g=m[0],b=m[1],_=m[2],T=m[3],C=m[4],R=m[5],D=m[6],w=m[7],E=0;E<64;E++){if(E<16)d[E]=h[v+E]|0;else{var y=d[E-15],x=(y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3,I=d[E-2],A=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;d[E]=x+d[E-7]+A+d[E-16]}var k=C&R^~C&D,U=g&b^g&_^b&_,W=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),P=(C<<26|C>>>6)^(C<<21|C>>>11)^(C<<7|C>>>25),B=w+P+k+u[E]+d[E],H=W+U;w=D,D=R,R=C,C=T+B|0,T=_,_=b,b=g,g=B+H|0}m[0]=m[0]+g|0,m[1]=m[1]+b|0,m[2]=m[2]+_|0,m[3]=m[3]+T|0,m[4]=m[4]+C|0,m[5]=m[5]+R|0,m[6]=m[6]+D|0,m[7]=m[7]+w|0},_doFinalize:function(){var h=this._data,v=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return v[g>>>5]|=128<<24-g%32,v[(g+64>>>9<<4)+14]=n.floor(m/4294967296),v[(g+64>>>9<<4)+15]=m,h.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h}});s.SHA256=o._createHelper(f),s.HmacSHA256=o._createHmacHelper(f)}(Math),r.SHA256})}(Em)),Em.exports}var bm={exports:{}},g_;function soe(){return g_||(g_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),Rx())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)}(),r.SHA224})}(bm)),bm.exports}var _m={exports:{}},x_;function GI(){return x_||(x_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),rp())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,o=a.Word,l=a.WordArray,c=n.algo;function u(){return o.create.apply(o,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],f=[];(function(){for(var v=0;v<80;v++)f[v]=u()})();var h=c.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(v,m){for(var g=this._hash.words,b=g[0],_=g[1],T=g[2],C=g[3],R=g[4],D=g[5],w=g[6],E=g[7],y=b.high,x=b.low,I=_.high,A=_.low,k=T.high,U=T.low,W=C.high,P=C.low,B=R.high,H=R.low,L=D.high,Z=D.low,j=w.high,O=w.low,G=E.high,X=E.low,q=y,pe=x,ie=I,de=A,z=k,J=U,me=W,Y=P,K=B,ee=H,fe=L,ve=Z,Q=j,re=O,be=G,Te=X,_e=0;_e<80;_e++){var ke,Be,Ce=f[_e];if(_e<16)Be=Ce.high=v[m+_e*2]|0,ke=Ce.low=v[m+_e*2+1]|0;else{var je=f[_e-15],Ue=je.high,He=je.low,qe=(Ue>>>1|He<<31)^(Ue>>>8|He<<24)^Ue>>>7,ye=(He>>>1|Ue<<31)^(He>>>8|Ue<<24)^(He>>>7|Ue<<25),xe=f[_e-2],Ee=xe.high,Fe=xe.low,Ge=(Ee>>>19|Fe<<13)^(Ee<<3|Fe>>>29)^Ee>>>6,tt=(Fe>>>19|Ee<<13)^(Fe<<3|Ee>>>29)^(Fe>>>6|Ee<<26),ht=f[_e-7],mt=ht.high,Lt=ht.low,ct=f[_e-16],st=ct.high,ut=ct.low;ke=ye+Lt,Be=qe+mt+(ke>>>0<ye>>>0?1:0),ke=ke+tt,Be=Be+Ge+(ke>>>0<tt>>>0?1:0),ke=ke+ut,Be=Be+st+(ke>>>0<ut>>>0?1:0),Ce.high=Be,Ce.low=ke}var Ct=K&fe^~K&Q,Ft=ee&ve^~ee&re,pr=q&ie^q&z^ie&z,$n=pe&de^pe&J^de&J,ui=(q>>>28|pe<<4)^(q<<30|pe>>>2)^(q<<25|pe>>>7),ts=(pe>>>28|q<<4)^(pe<<30|q>>>2)^(pe<<25|q>>>7),sl=(K>>>14|ee<<18)^(K>>>18|ee<<14)^(K<<23|ee>>>9),Ra=(ee>>>14|K<<18)^(ee>>>18|K<<14)^(ee<<23|K>>>9),ao=d[_e],Wr=ao.high,io=ao.low,_r=Te+Ra,xn=be+sl+(_r>>>0<Te>>>0?1:0),_r=_r+Ft,xn=xn+Ct+(_r>>>0<Ft>>>0?1:0),_r=_r+io,xn=xn+Wr+(_r>>>0<io>>>0?1:0),_r=_r+ke,xn=xn+Be+(_r>>>0<ke>>>0?1:0),al=ts+$n,Ec=ui+pr+(al>>>0<ts>>>0?1:0);be=Q,Te=re,Q=fe,re=ve,fe=K,ve=ee,ee=Y+_r|0,K=me+xn+(ee>>>0<Y>>>0?1:0)|0,me=z,Y=J,z=ie,J=de,ie=q,de=pe,pe=_r+al|0,q=xn+Ec+(pe>>>0<_r>>>0?1:0)|0}x=b.low=x+pe,b.high=y+q+(x>>>0<pe>>>0?1:0),A=_.low=A+de,_.high=I+ie+(A>>>0<de>>>0?1:0),U=T.low=U+J,T.high=k+z+(U>>>0<J>>>0?1:0),P=C.low=P+Y,C.high=W+me+(P>>>0<Y>>>0?1:0),H=R.low=H+ee,R.high=B+K+(H>>>0<ee>>>0?1:0),Z=D.low=Z+ve,D.high=L+fe+(Z>>>0<ve>>>0?1:0),O=w.low=O+re,w.high=j+Q+(O>>>0<re>>>0?1:0),X=E.low=X+Te,E.high=G+be+(X>>>0<Te>>>0?1:0)},_doFinalize:function(){var v=this._data,m=v.words,g=this._nDataBytes*8,b=v.sigBytes*8;m[b>>>5]|=128<<24-b%32,m[(b+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(b+128>>>10<<5)+31]=g,v.sigBytes=m.length*4,this._process();var _=this._hash.toX32();return _},clone:function(){var v=i.clone.call(this);return v._hash=this._hash.clone(),v},blockSize:1024/32});n.SHA512=i._createHelper(h),n.HmacSHA512=i._createHmacHelper(h)}(),r.SHA512})}(_m)),_m.exports}var Sm={exports:{}},y_;function aoe(){return y_||(y_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),rp(),GI())})(Nt,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,o=n.algo,l=o.SHA512,c=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=l._createHelper(c),n.HmacSHA384=l._createHmacHelper(c)}(),r.SHA384})}(Sm)),Sm.exports}var Tm={exports:{}},E_;function ioe(){return E_||(E_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),rp())})(Nt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.x64,c=l.Word,u=s.algo,d=[],f=[],h=[];(function(){for(var g=1,b=0,_=0;_<24;_++){d[g+5*b]=(_+1)*(_+2)/2%64;var T=b%5,C=(2*g+3*b)%5;g=T,b=C}for(var g=0;g<5;g++)for(var b=0;b<5;b++)f[g+5*b]=b+(2*g+3*b)%5*5;for(var R=1,D=0;D<24;D++){for(var w=0,E=0,y=0;y<7;y++){if(R&1){var x=(1<<y)-1;x<32?E^=1<<x:w^=1<<x-32}R&128?R=R<<1^113:R<<=1}h[D]=c.create(w,E)}})();var v=[];(function(){for(var g=0;g<25;g++)v[g]=c.create()})();var m=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],b=0;b<25;b++)g[b]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,b){for(var _=this._state,T=this.blockSize/2,C=0;C<T;C++){var R=g[b+2*C],D=g[b+2*C+1];R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var w=_[C];w.high^=D,w.low^=R}for(var E=0;E<24;E++){for(var y=0;y<5;y++){for(var x=0,I=0,A=0;A<5;A++){var w=_[y+5*A];x^=w.high,I^=w.low}var k=v[y];k.high=x,k.low=I}for(var y=0;y<5;y++)for(var U=v[(y+4)%5],W=v[(y+1)%5],P=W.high,B=W.low,x=U.high^(P<<1|B>>>31),I=U.low^(B<<1|P>>>31),A=0;A<5;A++){var w=_[y+5*A];w.high^=x,w.low^=I}for(var H=1;H<25;H++){var x,I,w=_[H],L=w.high,Z=w.low,j=d[H];j<32?(x=L<<j|Z>>>32-j,I=Z<<j|L>>>32-j):(x=Z<<j-32|L>>>64-j,I=L<<j-32|Z>>>64-j);var O=v[f[H]];O.high=x,O.low=I}var G=v[0],X=_[0];G.high=X.high,G.low=X.low;for(var y=0;y<5;y++)for(var A=0;A<5;A++){var H=y+5*A,w=_[H],q=v[H],pe=v[(y+1)%5+5*A],ie=v[(y+2)%5+5*A];w.high=q.high^~pe.high&ie.high,w.low=q.low^~pe.low&ie.low}var w=_[0],de=h[E];w.high^=de.high,w.low^=de.low}},_doFinalize:function(){var g=this._data,b=g.words;this._nDataBytes*8;var _=g.sigBytes*8,T=this.blockSize*32;b[_>>>5]|=1<<24-_%32,b[(n.ceil((_+1)/T)*T>>>5)-1]|=128,g.sigBytes=b.length*4,this._process();for(var C=this._state,R=this.cfg.outputLength/8,D=R/8,w=[],E=0;E<D;E++){var y=C[E],x=y.high,I=y.low;x=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,w.push(I),w.push(x)}return new a.init(w,R)},clone:function(){for(var g=o.clone.call(this),b=g._state=this._state.slice(0),_=0;_<25;_++)b[_]=b[_].clone();return g}});s.SHA3=o._createHelper(m),s.HmacSHA3=o._createHmacHelper(m)}(Math),r.SHA3})}(Tm)),Tm.exports}var Am={exports:{}},b_;function ooe(){return b_||(b_=1,function(t,e){(function(r,n){t.exports=n(Gt())})(Nt,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=a.create([0,1518500249,1859775393,2400959708,2840853838]),v=a.create([1352829926,1548603684,1836072691,2053994217,0]),m=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,w){for(var E=0;E<16;E++){var y=w+E,x=D[y];D[y]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var I=this._hash.words,A=h.words,k=v.words,U=c.words,W=u.words,P=d.words,B=f.words,H,L,Z,j,O,G,X,q,pe,ie;G=H=I[0],X=L=I[1],q=Z=I[2],pe=j=I[3],ie=O=I[4];for(var de,E=0;E<80;E+=1)de=H+D[w+U[E]]|0,E<16?de+=g(L,Z,j)+A[0]:E<32?de+=b(L,Z,j)+A[1]:E<48?de+=_(L,Z,j)+A[2]:E<64?de+=T(L,Z,j)+A[3]:de+=C(L,Z,j)+A[4],de=de|0,de=R(de,P[E]),de=de+O|0,H=O,O=j,j=R(Z,10),Z=L,L=de,de=G+D[w+W[E]]|0,E<16?de+=C(X,q,pe)+k[0]:E<32?de+=T(X,q,pe)+k[1]:E<48?de+=_(X,q,pe)+k[2]:E<64?de+=b(X,q,pe)+k[3]:de+=g(X,q,pe)+k[4],de=de|0,de=R(de,B[E]),de=de+ie|0,G=ie,ie=pe,pe=R(q,10),q=X,X=de;de=I[1]+Z+pe|0,I[1]=I[2]+j+ie|0,I[2]=I[3]+O+G|0,I[3]=I[4]+H+X|0,I[4]=I[0]+L+q|0,I[0]=de},_doFinalize:function(){var D=this._data,w=D.words,E=this._nDataBytes*8,y=D.sigBytes*8;w[y>>>5]|=128<<24-y%32,w[(y+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,D.sigBytes=(w.length+1)*4,this._process();for(var x=this._hash,I=x.words,A=0;A<5;A++){var k=I[A];I[A]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return x},clone:function(){var D=o.clone.call(this);return D._hash=this._hash.clone(),D}});function g(D,w,E){return D^w^E}function b(D,w,E){return D&w|~D&E}function _(D,w,E){return(D|~w)^E}function T(D,w,E){return D&E|w&~E}function C(D,w,E){return D^(w|~E)}function R(D,w){return D<<w|D>>>32-w}s.RIPEMD160=o._createHelper(m),s.HmacRIPEMD160=o._createHmacHelper(m)}(),r.RIPEMD160})}(Am)),Am.exports}var wm={exports:{}},__;function Fx(){return __||(__=1,function(t,e){(function(r,n){t.exports=n(Gt())})(Nt,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,o=a.Utf8,l=n.algo;l.HMAC=i.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,f=d*4;u.sigBytes>f&&(u=c.finalize(u)),u.clamp();for(var h=this._oKey=u.clone(),v=this._iKey=u.clone(),m=h.words,g=v.words,b=0;b<d;b++)m[b]^=1549556828,g[b]^=909522486;h.sigBytes=v.sigBytes=f,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,d=u.finalize(c);u.reset();var f=u.finalize(this._oKey.clone().concat(d));return f}})})()})}(wm)),wm.exports}var Cm={exports:{}},S_;function loe(){return S_||(S_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),Rx(),Fx())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.SHA256,c=o.HMAC,u=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var h=this.cfg,v=c.create(h.hasher,d),m=a.create(),g=a.create([1]),b=m.words,_=g.words,T=h.keySize,C=h.iterations;b.length<T;){var R=v.update(f).finalize(g);v.reset();for(var D=R.words,w=D.length,E=R,y=1;y<C;y++){E=v.finalize(E),v.reset();for(var x=E.words,I=0;I<w;I++)D[I]^=x[I]}m.concat(R),_[0]++}return m.sigBytes=T*4,m}});n.PBKDF2=function(d,f,h){return u.create(h).compute(d,f)}}(),r.PBKDF2})}(Cm)),Cm.exports}var Im={exports:{}},T_;function so(){return T_||(T_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),jI(),Fx())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.MD5,c=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var f,h=this.cfg,v=h.hasher.create(),m=a.create(),g=m.words,b=h.keySize,_=h.iterations;g.length<b;){f&&v.update(f),f=v.update(u).finalize(d),v.reset();for(var T=1;T<_;T++)f=v.finalize(f),v.reset();m.concat(f)}return m.sigBytes=b*4,m}});n.EvpKDF=function(u,d,f){return c.create(f).compute(u,d)}}(),r.EvpKDF})}(Im)),Im.exports}var km={exports:{}},A_;function an(){return A_||(A_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),so())})(Nt,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=i.BufferedBlockAlgorithm,c=s.enc;c.Utf8;var u=c.Base64,d=s.algo,f=d.EvpKDF,h=i.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(x,I){return this.create(this._ENC_XFORM_MODE,x,I)},createDecryptor:function(x,I){return this.create(this._DEC_XFORM_MODE,x,I)},init:function(x,I,A){this.cfg=this.cfg.extend(A),this._xformMode=x,this._key=I,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(x){return this._append(x),this._process()},finalize:function(x){x&&this._append(x);var I=this._doFinalize();return I},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function x(I){return typeof I=="string"?y:D}return function(I){return{encrypt:function(A,k,U){return x(k).encrypt(I,A,k,U)},decrypt:function(A,k,U){return x(k).decrypt(I,A,k,U)}}}}()});i.StreamCipher=h.extend({_doFinalize:function(){var x=this._process(!0);return x},blockSize:1});var v=s.mode={},m=i.BlockCipherMode=a.extend({createEncryptor:function(x,I){return this.Encryptor.create(x,I)},createDecryptor:function(x,I){return this.Decryptor.create(x,I)},init:function(x,I){this._cipher=x,this._iv=I}}),g=v.CBC=function(){var x=m.extend();x.Encryptor=x.extend({processBlock:function(A,k){var U=this._cipher,W=U.blockSize;I.call(this,A,k,W),U.encryptBlock(A,k),this._prevBlock=A.slice(k,k+W)}}),x.Decryptor=x.extend({processBlock:function(A,k){var U=this._cipher,W=U.blockSize,P=A.slice(k,k+W);U.decryptBlock(A,k),I.call(this,A,k,W),this._prevBlock=P}});function I(A,k,U){var W,P=this._iv;P?(W=P,this._iv=n):W=this._prevBlock;for(var B=0;B<U;B++)A[k+B]^=W[B]}return x}(),b=s.pad={},_=b.Pkcs7={pad:function(x,I){for(var A=I*4,k=A-x.sigBytes%A,U=k<<24|k<<16|k<<8|k,W=[],P=0;P<k;P+=4)W.push(U);var B=o.create(W,k);x.concat(B)},unpad:function(x){var I=x.words[x.sigBytes-1>>>2]&255;x.sigBytes-=I}};i.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:_}),reset:function(){var x;h.reset.call(this);var I=this.cfg,A=I.iv,k=I.mode;this._xformMode==this._ENC_XFORM_MODE?x=k.createEncryptor:(x=k.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==x?this._mode.init(this,A&&A.words):(this._mode=x.call(k,this,A&&A.words),this._mode.__creator=x)},_doProcessBlock:function(x,I){this._mode.processBlock(x,I)},_doFinalize:function(){var x,I=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(I.pad(this._data,this.blockSize),x=this._process(!0)):(x=this._process(!0),I.unpad(x)),x},blockSize:128/32});var T=i.CipherParams=a.extend({init:function(x){this.mixIn(x)},toString:function(x){return(x||this.formatter).stringify(this)}}),C=s.format={},R=C.OpenSSL={stringify:function(x){var I,A=x.ciphertext,k=x.salt;return k?I=o.create([1398893684,1701076831]).concat(k).concat(A):I=A,I.toString(u)},parse:function(x){var I,A=u.parse(x),k=A.words;return k[0]==1398893684&&k[1]==1701076831&&(I=o.create(k.slice(2,4)),k.splice(0,4),A.sigBytes-=16),T.create({ciphertext:A,salt:I})}},D=i.SerializableCipher=a.extend({cfg:a.extend({format:R}),encrypt:function(x,I,A,k){k=this.cfg.extend(k);var U=x.createEncryptor(A,k),W=U.finalize(I),P=U.cfg;return T.create({ciphertext:W,key:A,iv:P.iv,algorithm:x,mode:P.mode,padding:P.padding,blockSize:x.blockSize,formatter:k.format})},decrypt:function(x,I,A,k){k=this.cfg.extend(k),I=this._parse(I,k.format);var U=x.createDecryptor(A,k).finalize(I.ciphertext);return U},_parse:function(x,I){return typeof x=="string"?I.parse(x,this):x}}),w=s.kdf={},E=w.OpenSSL={execute:function(x,I,A,k,U){if(k||(k=o.random(64/8)),U)var W=f.create({keySize:I+A,hasher:U}).compute(x,k);else var W=f.create({keySize:I+A}).compute(x,k);var P=o.create(W.words.slice(I),A*4);return W.sigBytes=I*4,T.create({key:W,iv:P,salt:k})}},y=i.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:E}),encrypt:function(x,I,A,k){k=this.cfg.extend(k);var U=k.kdf.execute(A,x.keySize,x.ivSize,k.salt,k.hasher);k.iv=U.iv;var W=D.encrypt.call(this,x,I,U.key,k);return W.mixIn(U),W},decrypt:function(x,I,A,k){k=this.cfg.extend(k),I=this._parse(I,k.format);var U=k.kdf.execute(A,x.keySize,x.ivSize,I.salt,k.hasher);k.iv=U.iv;var W=D.decrypt.call(this,x,I,U.key,k);return W}})}()})}(km)),km.exports}var Dm={exports:{}},w_;function coe(){return w_||(w_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize;s.call(this,i,a,l,o),this._prevBlock=i.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=i.slice(a,a+l);s.call(this,i,a,l,o),this._prevBlock=c}});function s(i,a,o,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var d=0;d<o;d++)i[a+d]^=c[d]}return n}(),r.mode.CFB})}(Dm)),Dm.exports}var Rm={exports:{}},C_;function uoe(){return C_||(C_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var d=u.slice(0);o.encryptBlock(d,0),u[l-1]=u[l-1]+1|0;for(var f=0;f<l;f++)i[a+f]^=d[f]}});return n.Decryptor=s,n}(),r.mode.CTR})}(Rm)),Rm.exports}var Fm={exports:{}},I_;function doe(){return I_||(I_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(o){if((o>>24&255)===255){var l=o>>16&255,c=o>>8&255,u=o&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,o=0,o+=l<<16,o+=c<<8,o+=u}else o+=1<<24;return o}function i(o){return(o[0]=s(o[0]))===0&&(o[1]=s(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),i(f);var h=f.slice(0);c.encryptBlock(h,0);for(var v=0;v<u;v++)o[l+v]^=h[v]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(Fm)),Fm.exports}var Pm={exports:{}},k_;function foe(){return k_||(k_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(u,0);for(var d=0;d<l;d++)i[a+d]^=u[d]}});return n.Decryptor=s,n}(),r.mode.OFB})}(Pm)),Pm.exports}var Om={exports:{}},D_;function hoe(){return D_||(D_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(Om)),Om.exports}var Nm={exports:{}},R_;function poe(){return R_||(R_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,o=a-i%a,l=i+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(Nm)),Nm.exports}var Lm={exports:{}},F_;function moe(){return F_||(F_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(Lm)),Lm.exports}var Bm={exports:{}},P_;function voe(){return P_||(P_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Bm)),Bm.exports}var Mm={exports:{}},O_;function goe(){return O_||(O_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(Mm)),Mm.exports}var Um={exports:{}},N_;function xoe(){return N_||(N_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Um)),Um.exports}var Vm={exports:{}},L_;function yoe(){return L_||(L_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),an())})(Nt,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,o=s.enc,l=o.Hex,c=s.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var d=l.parse(u);return a.create({ciphertext:d})}}}(),r.format.Hex})}(Vm)),Vm.exports}var $m={exports:{}},B_;function Eoe(){return B_||(B_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),rl(),nl(),so(),an())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,o=[],l=[],c=[],u=[],d=[],f=[],h=[],v=[],m=[],g=[];(function(){for(var T=[],C=0;C<256;C++)C<128?T[C]=C<<1:T[C]=C<<1^283;for(var R=0,D=0,C=0;C<256;C++){var w=D^D<<1^D<<2^D<<3^D<<4;w=w>>>8^w&255^99,o[R]=w,l[w]=R;var E=T[R],y=T[E],x=T[y],I=T[w]*257^w*16843008;c[R]=I<<24|I>>>8,u[R]=I<<16|I>>>16,d[R]=I<<8|I>>>24,f[R]=I;var I=x*16843009^y*65537^E*257^R*16843008;h[w]=I<<24|I>>>8,v[w]=I<<16|I>>>16,m[w]=I<<8|I>>>24,g[w]=I,R?(R=E^T[T[T[x^E]]],D^=T[T[D]]):R=D=1}})();var b=[0,1,2,4,8,16,32,64,128,27,54],_=a.AES=i.extend({_doReset:function(){var T;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var C=this._keyPriorReset=this._key,R=C.words,D=C.sigBytes/4,w=this._nRounds=D+6,E=(w+1)*4,y=this._keySchedule=[],x=0;x<E;x++)x<D?y[x]=R[x]:(T=y[x-1],x%D?D>6&&x%D==4&&(T=o[T>>>24]<<24|o[T>>>16&255]<<16|o[T>>>8&255]<<8|o[T&255]):(T=T<<8|T>>>24,T=o[T>>>24]<<24|o[T>>>16&255]<<16|o[T>>>8&255]<<8|o[T&255],T^=b[x/D|0]<<24),y[x]=y[x-D]^T);for(var I=this._invKeySchedule=[],A=0;A<E;A++){var x=E-A;if(A%4)var T=y[x];else var T=y[x-4];A<4||x<=4?I[A]=T:I[A]=h[o[T>>>24]]^v[o[T>>>16&255]]^m[o[T>>>8&255]]^g[o[T&255]]}}},encryptBlock:function(T,C){this._doCryptBlock(T,C,this._keySchedule,c,u,d,f,o)},decryptBlock:function(T,C){var R=T[C+1];T[C+1]=T[C+3],T[C+3]=R,this._doCryptBlock(T,C,this._invKeySchedule,h,v,m,g,l);var R=T[C+1];T[C+1]=T[C+3],T[C+3]=R},_doCryptBlock:function(T,C,R,D,w,E,y,x){for(var I=this._nRounds,A=T[C]^R[0],k=T[C+1]^R[1],U=T[C+2]^R[2],W=T[C+3]^R[3],P=4,B=1;B<I;B++){var H=D[A>>>24]^w[k>>>16&255]^E[U>>>8&255]^y[W&255]^R[P++],L=D[k>>>24]^w[U>>>16&255]^E[W>>>8&255]^y[A&255]^R[P++],Z=D[U>>>24]^w[W>>>16&255]^E[A>>>8&255]^y[k&255]^R[P++],j=D[W>>>24]^w[A>>>16&255]^E[k>>>8&255]^y[U&255]^R[P++];A=H,k=L,U=Z,W=j}var H=(x[A>>>24]<<24|x[k>>>16&255]<<16|x[U>>>8&255]<<8|x[W&255])^R[P++],L=(x[k>>>24]<<24|x[U>>>16&255]<<16|x[W>>>8&255]<<8|x[A&255])^R[P++],Z=(x[U>>>24]<<24|x[W>>>16&255]<<16|x[A>>>8&255]<<8|x[k&255])^R[P++],j=(x[W>>>24]<<24|x[A>>>16&255]<<16|x[k>>>8&255]<<8|x[U&255])^R[P++];T[C]=H,T[C+1]=L,T[C+2]=Z,T[C+3]=j},keySize:256/32});n.AES=i._createHelper(_)}(),r.AES})}($m)),$m.exports}var Hm={exports:{}},M_;function boe(){return M_||(M_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),rl(),nl(),so(),an())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=a.extend({_doReset:function(){for(var b=this._key,_=b.words,T=[],C=0;C<56;C++){var R=l[C]-1;T[C]=_[R>>>5]>>>31-R%32&1}for(var D=this._subKeys=[],w=0;w<16;w++){for(var E=D[w]=[],y=u[w],C=0;C<24;C++)E[C/6|0]|=T[(c[C]-1+y)%28]<<31-C%6,E[4+(C/6|0)]|=T[28+(c[C+24]-1+y)%28]<<31-C%6;E[0]=E[0]<<1|E[0]>>>31;for(var C=1;C<7;C++)E[C]=E[C]>>>(C-1)*4+3;E[7]=E[7]<<5|E[7]>>>27}for(var x=this._invSubKeys=[],C=0;C<16;C++)x[C]=D[15-C]},encryptBlock:function(b,_){this._doCryptBlock(b,_,this._subKeys)},decryptBlock:function(b,_){this._doCryptBlock(b,_,this._invSubKeys)},_doCryptBlock:function(b,_,T){this._lBlock=b[_],this._rBlock=b[_+1],v.call(this,4,252645135),v.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),v.call(this,1,1431655765);for(var C=0;C<16;C++){for(var R=T[C],D=this._lBlock,w=this._rBlock,E=0,y=0;y<8;y++)E|=d[y][((w^R[y])&f[y])>>>0];this._lBlock=w,this._rBlock=D^E}var x=this._lBlock;this._lBlock=this._rBlock,this._rBlock=x,v.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),v.call(this,16,65535),v.call(this,4,252645135),b[_]=this._lBlock,b[_+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function v(b,_){var T=(this._lBlock>>>b^this._rBlock)&_;this._rBlock^=T,this._lBlock^=T<<b}function m(b,_){var T=(this._rBlock>>>b^this._lBlock)&_;this._lBlock^=T,this._rBlock^=T<<b}n.DES=a._createHelper(h);var g=o.TripleDES=a.extend({_doReset:function(){var b=this._key,_=b.words;if(_.length!==2&&_.length!==4&&_.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var T=_.slice(0,2),C=_.length<4?_.slice(0,2):_.slice(2,4),R=_.length<6?_.slice(0,2):_.slice(4,6);this._des1=h.createEncryptor(i.create(T)),this._des2=h.createEncryptor(i.create(C)),this._des3=h.createEncryptor(i.create(R))},encryptBlock:function(b,_){this._des1.encryptBlock(b,_),this._des2.decryptBlock(b,_),this._des3.encryptBlock(b,_)},decryptBlock:function(b,_){this._des3.decryptBlock(b,_),this._des2.encryptBlock(b,_),this._des1.decryptBlock(b,_)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(g)}(),r.TripleDES})}(Hm)),Hm.exports}var jm={exports:{}},U_;function _oe(){return U_||(U_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),rl(),nl(),so(),an())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=a.RC4=i.extend({_doReset:function(){for(var u=this._key,d=u.words,f=u.sigBytes,h=this._S=[],v=0;v<256;v++)h[v]=v;for(var v=0,m=0;v<256;v++){var g=v%f,b=d[g>>>2]>>>24-g%4*8&255;m=(m+h[v]+b)%256;var _=h[v];h[v]=h[m],h[m]=_}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,d=this._i,f=this._j,h=0,v=0;v<4;v++){d=(d+1)%256,f=(f+u[d])%256;var m=u[d];u[d]=u[f],u[f]=m,h|=u[(u[d]+u[f])%256]<<24-v*8}return this._i=d,this._j=f,h}n.RC4=i._createHelper(o);var c=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});n.RC4Drop=i._createHelper(c)}(),r.RC4})}(jm)),jm.exports}var Gm={exports:{}},V_;function Soe(){return V_||(V_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),rl(),nl(),so(),an())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.Rabbit=i.extend({_doReset:function(){for(var f=this._key.words,h=this.cfg.iv,v=0;v<4;v++)f[v]=(f[v]<<8|f[v]>>>24)&16711935|(f[v]<<24|f[v]>>>8)&4278255360;var m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var v=0;v<4;v++)d.call(this);for(var v=0;v<8;v++)g[v]^=m[v+4&7];if(h){var b=h.words,_=b[0],T=b[1],C=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,R=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,D=C>>>16|R&4294901760,w=R<<16|C&65535;g[0]^=C,g[1]^=D,g[2]^=R,g[3]^=w,g[4]^=C,g[5]^=D,g[6]^=R,g[7]^=w;for(var v=0;v<4;v++)d.call(this)}},_doProcessBlock:function(f,h){var v=this._X;d.call(this),o[0]=v[0]^v[5]>>>16^v[3]<<16,o[1]=v[2]^v[7]>>>16^v[5]<<16,o[2]=v[4]^v[1]>>>16^v[7]<<16,o[3]=v[6]^v[3]>>>16^v[1]<<16;for(var m=0;m<4;m++)o[m]=(o[m]<<8|o[m]>>>24)&16711935|(o[m]<<24|o[m]>>>8)&4278255360,f[h+m]^=o[m]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,v=0;v<8;v++)l[v]=h[v];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var v=0;v<8;v++){var m=f[v]+h[v],g=m&65535,b=m>>>16,_=((g*g>>>17)+g*b>>>15)+b*b,T=((m&4294901760)*m|0)+((m&65535)*m|0);c[v]=_^T}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=i._createHelper(u)}(),r.Rabbit})}(Gm)),Gm.exports}var Wm={exports:{}},$_;function Toe(){return $_||($_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),rl(),nl(),so(),an())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.RabbitLegacy=i.extend({_doReset:function(){var f=this._key.words,h=this.cfg.iv,v=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],m=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)d.call(this);for(var g=0;g<8;g++)m[g]^=v[g+4&7];if(h){var b=h.words,_=b[0],T=b[1],C=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,R=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,D=C>>>16|R&4294901760,w=R<<16|C&65535;m[0]^=C,m[1]^=D,m[2]^=R,m[3]^=w,m[4]^=C,m[5]^=D,m[6]^=R,m[7]^=w;for(var g=0;g<4;g++)d.call(this)}},_doProcessBlock:function(f,h){var v=this._X;d.call(this),o[0]=v[0]^v[5]>>>16^v[3]<<16,o[1]=v[2]^v[7]>>>16^v[5]<<16,o[2]=v[4]^v[1]>>>16^v[7]<<16,o[3]=v[6]^v[3]>>>16^v[1]<<16;for(var m=0;m<4;m++)o[m]=(o[m]<<8|o[m]>>>24)&16711935|(o[m]<<24|o[m]>>>8)&4278255360,f[h+m]^=o[m]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,v=0;v<8;v++)l[v]=h[v];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var v=0;v<8;v++){var m=f[v]+h[v],g=m&65535,b=m>>>16,_=((g*g>>>17)+g*b>>>15)+b*b,T=((m&4294901760)*m|0)+((m&65535)*m|0);c[v]=_^T}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=i._createHelper(u)}(),r.RabbitLegacy})}(Wm)),Wm.exports}var zm={exports:{}},H_;function Aoe(){return H_||(H_=1,function(t,e){(function(r,n,s){t.exports=n(Gt(),rl(),nl(),so(),an())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(g,b){let _=b>>24&255,T=b>>16&255,C=b>>8&255,R=b&255,D=g.sbox[0][_]+g.sbox[1][T];return D=D^g.sbox[2][C],D=D+g.sbox[3][R],D}function f(g,b,_){let T=b,C=_,R;for(let D=0;D<o;++D)T=T^g.pbox[D],C=d(g,T)^C,R=T,T=C,C=R;return R=T,T=C,C=R,C=C^g.pbox[o],T=T^g.pbox[o+1],{left:T,right:C}}function h(g,b,_){let T=b,C=_,R;for(let D=o+1;D>1;--D)T=T^g.pbox[D],C=d(g,T)^C,R=T,T=C,C=R;return R=T,T=C,C=R,C=C^g.pbox[1],T=T^g.pbox[0],{left:T,right:C}}function v(g,b,_){for(let w=0;w<4;w++){g.sbox[w]=[];for(let E=0;E<256;E++)g.sbox[w][E]=c[w][E]}let T=0;for(let w=0;w<o+2;w++)g.pbox[w]=l[w]^b[T],T++,T>=_&&(T=0);let C=0,R=0,D=0;for(let w=0;w<o+2;w+=2)D=f(g,C,R),C=D.left,R=D.right,g.pbox[w]=C,g.pbox[w+1]=R;for(let w=0;w<4;w++)for(let E=0;E<256;E+=2)D=f(g,C,R),C=D.left,R=D.right,g.sbox[w][E]=C,g.sbox[w][E+1]=R;return!0}var m=a.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,b=g.words,_=g.sigBytes/4;v(u,b,_)}},encryptBlock:function(g,b){var _=f(u,g[b],g[b+1]);g[b]=_.left,g[b+1]=_.right},decryptBlock:function(g,b){var _=h(u,g[b],g[b+1]);g[b]=_.left,g[b+1]=_.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(m)}(),r.Blowfish})}(zm)),zm.exports}(function(t,e){(function(r,n,s){t.exports=n(Gt(),rp(),toe(),roe(),rl(),noe(),nl(),jI(),Rx(),soe(),GI(),aoe(),ioe(),ooe(),Fx(),loe(),so(),an(),coe(),uoe(),doe(),foe(),hoe(),poe(),moe(),voe(),goe(),xoe(),yoe(),Eoe(),boe(),_oe(),Soe(),Toe(),Aoe())})(Nt,function(r){return r})})(HI);var woe=HI.exports;const Hc=jC(woe);var Km={};class Coe{constructor(){this.encryptionKey=Km.VUE_APP_PDF_ENCRYPTION_KEY||"default-dev-key-replace-in-production",this.encryptionEnabled=Km.VUE_APP_ENABLE_ENCRYPTION!=="false",console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled")}setEncryptionEnabled(e){this.encryptionEnabled=e,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled"),e||console.warn(" Warning: Encryption disabled in production environment")}encryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.encryptField(i);this.setNestedValue(n,s,a)}}),n}decryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.decryptField(i);this.setNestedValue(n,s,a)}}),n}encryptField(e){if(!this.encryptionEnabled)return e;try{const r=typeof e=="object"?JSON.stringify(e):String(e);return Hc.AES.encrypt(r,this.encryptionKey).toString()}catch(r){return console.error("Encryption failed:",r),e}}decryptField(e){if(!this.encryptionEnabled)return e;try{const n=Hc.AES.decrypt(e,this.encryptionKey).toString(Hc.enc.Utf8);try{return JSON.parse(n)}catch{return n}}catch(r){return console.error("Decryption failed:",r),e}}getNestedValue(e,r){return r.split(".").reduce((n,s)=>n&&n[s],e)}setNestedValue(e,r,n){const s=r.split("."),i=s.pop(),a=s.reduce((o,l)=>o[l]=o[l]||{},e);return a[i]=n,e}async logAccess(e,r,n){var s,i;try{const a=vt(sr(yt,"iepAccessLogs"));await gr(a,{studentId:e,userId:(s=Gs.currentUser)==null?void 0:s.uid,userEmail:(i=Gs.currentUser)==null?void 0:i.email,action:r,fields:n,timestamp:Bo(),userAgent:navigator.userAgent,encryptionEnabled:this.encryptionEnabled})}catch(a){console.error("Failed to log access:",a)}}async verifyAccess(e,r="read"){var n,s,i,a,o,l;if(!Gs.currentUser)return!1;try{const u=(await Jr(vt(yt,"users",Gs.currentUser.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager"){const f=((i=(s=(n=(await Jr(vt(yt,"students",e))).data())==null?void 0:n.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===Gs.currentUser.uid;return await this.logAccess(e,`access_attempt_${r}`,{success:f,role:"case_manager"}),f}if(u.role==="teacher"&&r==="read"){const f=((l=(o=(a=(await Jr(vt(yt,"students",e))).data())==null?void 0:a.app)==null?void 0:o.schedule)==null?void 0:l.periods)||{},h=Object.values(f).includes(Gs.currentUser.uid);return await this.logAccess(e,`access_attempt_${r}`,{success:h,role:"teacher"}),h}return!1}catch(c){return console.error("Access verification failed:",c),!1}}async getAccessHistory(e){try{const r=ps(sr(yt,"iepAccessLogs"),Ks("studentId","==",e),Ks("timestamp",">=",new Date(Date.now()-2592e6)));return(await Zr(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Failed to fetch access history:",r),[]}}maskSensitiveData(e){var n,s,i;const r=JSON.parse(JSON.stringify(e));return(n=r.app)!=null&&n.accommodations&&(r.app.accommodations={assessment:"[RESTRICTED]",instruction:"[RESTRICTED]"}),(i=(s=r.app)==null?void 0:s.schedule)!=null&&i.classServices&&(r.app.schedule.classServices=["[RESTRICTED]"]),r}isEncryptionEnabled(){return this.encryptionEnabled}isValueEncrypted(e){try{return typeof e!="string"?!1:(Hc.AES.decrypt(e,this.encryptionKey).toString(Hc.enc.Utf8),!0)}catch{return!1}}getEncryptionStatus(){return{enabled:this.encryptionEnabled,environment:"production",keyAvailable:!!this.encryptionKey,environmentVariable:Km.VUE_APP_ENABLE_ENCRYPTION}}}const Nf=new Coe,Ioe={class:"debug-encryption"},koe={class:"debug-header"},Doe={class:"encryption-status"},Roe={class:"status-row"},Foe={class:"encryption-toggle"},Poe=["checked"],Ooe={key:0,class:"warning"},Noe={class:"status-details"},Loe={class:"status-row"},Boe={class:"status-value"},Moe={class:"status-row"},Uoe={class:"status-value"},Voe={class:"status-row"},$oe={class:"status-value"},Hoe={key:0,class:"debug-info"},joe={class:"field-name"},Goe={class:"field-value"},Woe={class:"value-preview"},zoe={__name:"DebugEncryption",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=t,r=Ve(()=>Nf.getEncryptionStatus()),n=Ve(()=>Nf.isEncryptionEnabled()),s=Ve(()=>r.value.environment),i=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],a=()=>{Nf.setEncryptionEnabled(!n.value)},o=(u,d)=>d.split(".").reduce((f,h)=>f&&f[h],u),l=u=>{if(!e.selectedStudent)return!1;const d=o(e.selectedStudent,u);return d?Nf.isValueEncrypted(d):!1},c=u=>{if(!e.selectedStudent)return"No data";const d=o(e.selectedStudent,u);if(!d)return"Empty";if(l(u))return d.substring(0,20)+"...";const f=typeof d=="object"?JSON.stringify(d):String(d);return f.length>40?f.substring(0,40)+"...":f};return(u,d)=>(N(),M("div",Ioe,[p("div",koe,[d[0]||(d[0]=p("h3",null," IEP Encryption Control",-1)),p("div",{class:at(["environment-badge",s.value])},oe(s.value.toUpperCase()),3)]),p("div",Doe,[p("div",Roe,[d[1]||(d[1]=p("div",{class:"status-label"},"Status:",-1)),p("div",{class:at(["status-value",{enabled:n.value}])},oe(n.value?" Enabled":" Disabled"),3)]),p("div",Foe,[p("label",null,[p("input",{type:"checkbox",checked:n.value,onChange:a},null,40,Poe),d[2]||(d[2]=Ne(" Toggle Encryption "))]),s.value==="production"&&!n.value?(N(),M("div",Ooe,"  Warning: Encryption disabled in production ")):Re("",!0)]),p("div",Noe,[p("div",Loe,[d[3]||(d[3]=p("div",{class:"status-label"},"Environment:",-1)),p("div",Boe,oe(s.value),1)]),p("div",Moe,[d[4]||(d[4]=p("div",{class:"status-label"},"Encryption Key:",-1)),p("div",Uoe,oe(r.value.keyAvailable?" Available":" Missing"),1)]),p("div",Voe,[d[5]||(d[5]=p("div",{class:"status-label"},"ENV Variable:",-1)),p("div",$oe,oe(r.value.environmentVariable||"Not set"),1)])])]),t.selectedStudent?(N(),M("div",Hoe,[d[6]||(d[6]=p("h4",null,"Selected Student Data:",-1)),(N(),M(Pe,null,We(i,f=>p("div",{class:"field-status",key:f},[p("div",joe,oe(f)+":",1),p("div",Goe,[p("div",{class:at(["encryption-status",{encrypted:l(f)}])},oe(l(f)?" Encrypted":" Plain Text"),3),p("div",Woe,oe(c(f)),1)])])),64))])):Re("",!0)]))}},WI=_t(zoe,[["__scopeId","data-v-94726d44"]]),Koe={class:"security-control-center"},qoe={class:"security-section"},Xoe={class:"security-section"},Yoe={class:"log-filters"},Qoe={key:0,class:"log-table"},Joe={key:1,class:"no-logs"},Zoe={class:"security-section"},ele={class:"setting-group"},tle={class:"setting-group"},rle={class:"setting-group"},nle={class:"security-section"},sle={class:"setting-group"},ale={class:"setting-group"},ile={class:"setting-group"},ole={class:"security-section"},lle={class:"ip-list"},cle={class:"ip-input"},ule={key:0,class:"ip-table"},dle=["onClick"],fle={key:1,class:"no-ips"},hle={class:"security-section"},ple={class:"alert-settings"},mle={class:"setting-group"},vle={class:"setting-group"},gle={class:"setting-group"},xle={class:"alert-emails"},yle={class:"email-input"},Ele={key:0,class:"email-list"},ble=["onClick"],_le={__name:"SecurityControlCenter",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=he([]),r=he(1),n=he(30),s=he(!1),i=he(!1),a=he(!0),o=he(!0),l=he(5),c=he([]),u=he(""),d=he({failedLogins:!0,unusualAccess:!0,bulkExport:!0}),f=he([]),h=he(""),v=async()=>{try{const I=new Date;I.setDate(I.getDate()-r.value);const A=ps(sr(yt,"iepAccessLogs"),Ks("timestamp",">=",I),go("timestamp","desc"),Di(100)),k=await Zr(A);e.value=k.docs.map(U=>({id:U.id,...U.data()}))}catch(I){console.error("Failed to fetch logs:",I)}},m=I=>{if(!I)return"";const A=I.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(A)},g=()=>{console.log("Session timeout updated:",n.value)},b=()=>{console.log("Password policy updated:",s.value)},_=()=>{console.log("MFA policy updated:",i.value)},T=()=>{console.log("Export policy updated:",a.value)},C=()=>{console.log("PDF policy updated:",o.value)},R=()=>{console.log("Login policy updated:",l.value)},D=()=>{u.value&&!c.value.includes(u.value)&&(c.value.push(u.value),u.value="")},w=I=>{c.value=c.value.filter(A=>A!==I)},E=()=>{console.log("Alert settings updated:",d.value)},y=()=>{h.value&&!f.value.includes(h.value)&&(f.value.push(h.value),h.value="")},x=I=>{f.value=f.value.filter(A=>A!==I)};return Qt(()=>{v()}),(I,A)=>(N(),M("div",Koe,[p("div",qoe,[A[12]||(A[12]=p("h3",null," IEP Data Encryption",-1)),rt(WI,{"selected-student":t.selectedStudent},null,8,["selected-student"])]),p("div",Xoe,[A[15]||(A[15]=p("h3",null," Access Logs",-1)),p("div",Yoe,[Me(p("select",{"onUpdate:modelValue":A[0]||(A[0]=k=>r.value=k),class:"form-select"},A[13]||(A[13]=[p("option",{value:"1"},"Last 24 hours",-1),p("option",{value:"7"},"Last 7 days",-1),p("option",{value:"30"},"Last 30 days",-1)]),512),[[vr,r.value]]),p("button",{onClick:v,class:"btn btn-secondary"}," Refresh ")]),e.value.length?(N(),M("div",Qoe,[p("table",null,[A[14]||(A[14]=p("thead",null,[p("tr",null,[p("th",null,"Time"),p("th",null,"User"),p("th",null,"Action"),p("th",null,"Student"),p("th",null,"Status")])],-1)),p("tbody",null,[(N(!0),M(Pe,null,We(e.value,k=>(N(),M("tr",{key:k.id},[p("td",null,oe(m(k.timestamp)),1),p("td",null,oe(k.userEmail),1),p("td",null,oe(k.action),1),p("td",null,oe(k.studentId),1),p("td",{class:at(k.success?"success":"error")},oe(k.success?"":""),3)]))),128))])])])):(N(),M("div",Joe," No access logs found for selected period "))]),p("div",Zoe,[A[20]||(A[20]=p("h3",null," Session Security",-1)),p("div",ele,[p("label",null,[A[16]||(A[16]=Ne(" Auto Logout Timer (minutes): ")),Me(p("input",{type:"number","onUpdate:modelValue":A[1]||(A[1]=k=>n.value=k),min:"5",max:"120",onChange:g},null,544),[[At,n.value]])]),A[17]||(A[17]=p("div",{class:"setting-description"}," Users will be automatically logged out after this period of inactivity ",-1))]),p("div",tle,[p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":A[2]||(A[2]=k=>s.value=k),onChange:b},null,544),[[Et,s.value]]),A[18]||(A[18]=Ne(" Enforce Password Change Every 90 Days "))])]),p("div",rle,[p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":A[3]||(A[3]=k=>i.value=k),onChange:_},null,544),[[Et,i.value]]),A[19]||(A[19]=Ne(" Require Two-Factor Authentication for Admin Access "))])])]),p("div",nle,[A[24]||(A[24]=p("h3",null," Data Access Controls",-1)),p("div",sle,[p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":A[4]||(A[4]=k=>a.value=k),onChange:T},null,544),[[Et,a.value]]),A[21]||(A[21]=Ne(" Restrict Data Export to Admins Only "))])]),p("div",ale,[p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":A[5]||(A[5]=k=>o.value=k),onChange:C},null,544),[[Et,o.value]]),A[22]||(A[22]=Ne(" Add Watermark to Exported PDFs "))])]),p("div",ile,[p("label",null,[A[23]||(A[23]=Ne(" Maximum Failed Login Attempts: ")),Me(p("input",{type:"number","onUpdate:modelValue":A[6]||(A[6]=k=>l.value=k),min:"3",max:"10",onChange:R},null,544),[[At,l.value]])])])]),p("div",ole,[A[25]||(A[25]=p("h3",null," IP Access Control",-1)),p("div",lle,[p("div",cle,[Me(p("input",{type:"text","onUpdate:modelValue":A[7]||(A[7]=k=>u.value=k),placeholder:"Enter IP address or range"},null,512),[[At,u.value]]),p("button",{onClick:D,class:"btn btn-primary"}," Add IP ")]),c.value.length?(N(),M("div",ule,[(N(!0),M(Pe,null,We(c.value,k=>(N(),M("div",{key:k,class:"ip-row"},[p("span",null,oe(k),1),p("button",{onClick:U=>w(k),class:"btn btn-danger btn-sm"}," Remove ",8,dle)]))),128))])):(N(),M("div",fle," No IP restrictions configured "))])]),p("div",hle,[A[30]||(A[30]=p("h3",null," Security Alerts",-1)),p("div",ple,[p("div",mle,[p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":A[8]||(A[8]=k=>d.value.failedLogins=k),onChange:E},null,544),[[Et,d.value.failedLogins]]),A[26]||(A[26]=Ne(" Alert on Multiple Failed Login Attempts "))])]),p("div",vle,[p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":A[9]||(A[9]=k=>d.value.unusualAccess=k),onChange:E},null,544),[[Et,d.value.unusualAccess]]),A[27]||(A[27]=Ne(" Alert on Unusual Access Patterns "))])]),p("div",gle,[p("label",null,[Me(p("input",{type:"checkbox","onUpdate:modelValue":A[10]||(A[10]=k=>d.value.bulkExport=k),onChange:E},null,544),[[Et,d.value.bulkExport]]),A[28]||(A[28]=Ne(" Alert on Bulk Data Exports "))])]),p("div",xle,[A[29]||(A[29]=p("h4",null,"Alert Recipients:",-1)),p("div",yle,[Me(p("input",{type:"email","onUpdate:modelValue":A[11]||(A[11]=k=>h.value=k),placeholder:"Enter email address"},null,512),[[At,h.value]]),p("button",{onClick:y,class:"btn btn-primary"}," Add ")]),f.value.length?(N(),M("div",Ele,[(N(!0),M(Pe,null,We(f.value,k=>(N(),M("div",{key:k,class:"email-row"},[p("span",null,oe(k),1),p("button",{onClick:U=>x(k),class:"btn btn-danger btn-sm"}," Remove ",8,ble)]))),128))])):Re("",!0)])])])]))}},Sle=_t(_le,[["__scopeId","data-v-cabb716e"]]),Tle={class:"health-check"},Ale={class:"status-header"},wle={class:"refresh-button"},Cle=["disabled"],Ile={key:0,class:"last-check"},kle={class:"status-icon"},Dle={class:"status-info"},Rle={class:"services-grid"},Fle={class:"service-header"},Ple={class:"service-icon"},Ole={class:"service-name"},Nle={class:"service-status"},Lle={key:0,class:"service-latency"},Ble={key:1,class:"service-message"},Mle={key:0,class:"recent-issues"},Ule={class:"issue-list"},Vle={class:"issue-time"},$le={class:"issue-service"},Hle={class:"issue-description"},jle={__name:"SystemHealthCheck",setup(t){const e=he(!1),r=he(null),n=he("checking"),s=he([{name:"Authentication",icon:"",status:"checking",latency:null},{name:"Database",icon:"",status:"checking",latency:null},{name:"Storage",icon:"",status:"checking",latency:null},{name:"Functions",icon:"",status:"checking",latency:null}]),i=he([]),a=m=>{switch(m){case"operational":return"Fully Operational";case"degraded":return"Performance Issues";case"down":return"Service Unavailable";case"checking":return"Checking Status...";default:return"Unknown Status"}},o=m=>{if(!m)return"";const g=m instanceof Date?m:m.toDate();return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(g)},l=async()=>{const m=ju(),g=performance.now();try{return await i8(m),{status:"operational",latency:Math.round(performance.now()-g)}}catch(b){return console.error("Auth check failed:",b),{status:"down",message:"Authentication service is not responding"}}},c=async()=>{const m=ro(),g=performance.now();try{const b=ps(sr(m,"health_checks"),Di(1));return await Zr(b),{status:"operational",latency:Math.round(performance.now()-g)}}catch(b){return console.error("Database check failed:",b),{status:"down",message:"Database service is not responding"}}},u=async()=>{const m=SC(),g=performance.now();try{return await Vv(m,"health_check.txt").toString(),{status:"operational",latency:Math.round(performance.now()-g)}}catch(b){return console.error("Storage check failed:",b),{status:"down",message:"Storage service is not responding"}}},d=async()=>{const m=Hl(),g=performance.now();try{return await da(m,"healthCheck")(),{status:"operational",latency:Math.round(performance.now()-g)}}catch(b){return console.error("Functions check failed:",b),{status:"down",message:"Cloud Functions service is not responding"}}},f=(m,g)=>{const b=s.value.find(_=>_.name===m);b&&(b.status=g.status,b.latency=g.latency,b.message=g.message)},h=()=>{const m=s.value.map(g=>g.status);return m.every(g=>g==="operational")?"operational":m.some(g=>g==="down")?"down":"degraded"},v=async()=>{if(!e.value){e.value=!0,r.value=new Date;try{s.value.forEach(C=>{C.status="checking",C.latency=null,C.message=null});const[m,g,b,_]=await Promise.all([l(),c(),u(),d()]);f("Authentication",m),f("Database",g),f("Storage",b),f("Functions",_),n.value=h();const T=s.value.filter(C=>C.status!=="operational").map(C=>({id:Date.now()+Math.random(),service:C.name,timestamp:new Date,description:C.message||`Service is ${C.status}`}));T.length&&(i.value=[...T,...i.value].slice(0,5))}catch(m){console.error("Health check failed:",m),n.value="down"}finally{e.value=!1}}};return Qt(()=>{v(),setInterval(v,5*60*1e3)}),(m,g)=>(N(),M("div",Tle,[p("div",Ale,[g[0]||(g[0]=p("h3",null,"System Health Status",-1)),p("div",wle,[p("button",{onClick:v,disabled:e.value,class:"btn btn-primary"},oe(e.value?"Checking...":"Check Now"),9,Cle),r.value?(N(),M("span",Ile," Last check: "+oe(o(r.value)),1)):Re("",!0)])]),p("div",{class:at(["status-card overall",n.value])},[p("div",kle,oe(n.value==="operational"?"":n.value==="degraded"?"":""),1),p("div",Dle,[g[1]||(g[1]=p("h4",null,"Overall System Status",-1)),p("p",null,oe(a(n.value)),1)])],2),p("div",Rle,[(N(!0),M(Pe,null,We(s.value,b=>(N(),M("div",{key:b.name,class:at(["service-card",b.status])},[p("div",Fle,[p("span",Ple,oe(b.icon),1),p("span",Ole,oe(b.name),1)]),p("div",Nle,oe(b.status==="operational"?"":b.status==="degraded"?"":"")+" "+oe(a(b.status)),1),b.latency!==void 0?(N(),M("div",Lle," Latency: "+oe(b.latency)+"ms ",1)):Re("",!0),b.message?(N(),M("div",Ble,oe(b.message),1)):Re("",!0)],2))),128))]),i.value.length?(N(),M("div",Mle,[g[2]||(g[2]=p("h4",null,"Recent Issues",-1)),p("div",Ule,[(N(!0),M(Pe,null,We(i.value,b=>(N(),M("div",{key:b.id,class:"issue-item"},[p("div",Vle,oe(o(b.timestamp)),1),p("div",$le,oe(b.service),1),p("div",Hle,oe(b.description),1)]))),128))])])):Re("",!0)]))}},Gle=_t(jle,[["__scopeId","data-v-9610f287"]]),Wle={name:"AdminView",components:{TabBar:LV,UserAddForm:zV,UserTable:m$,PermissionsMatrix:HC,AdminStudents:$$,StudentBulkImporter:GH,AdminPermissions:KH,SeisImport:dj,AeriesImport:bj,AeriesAPIConnector:DG,AppSettings:TW,AdminAideAssignment:KC,AdminTimeTable:II,AdminAideSchedule:VI,AdminBackupRestore:$I,AdminTeacherFeedback:fae,TestingLinks:hie,AdminDashboard:Yie,DebugEncryption:WI,SecurityControlCenter:Sle,SystemHealthCheck:Gle},setup(){const t=Xo(),e=aB(),r=he("dashboard"),n=he("dashboard"),{students:s,fetchStudents:i}=wa(),{users:a,fetchUsers:o}=Ca();Qt(async()=>{try{await Promise.all([i(),o()]);const C=e.query.category;C&&u(C)}catch(C){console.error("Error loading data:",C)}});const l=[{key:"dashboard",label:"Dashboard",category:"dashboard"},{key:"usersAdd",label:"Add Users",category:"users-students"},{key:"usersEdit",label:"Manage Users",category:"users-students"},{key:"students",label:"Students",category:"users-students"},{key:"addStudents",label:"Add Students",category:"users-students"},{key:"aide-assignment",label:"Aide Assignment",category:"aide-management"},{key:"aide-schedule",label:"Aide Schedule",category:"aide-management"},{key:"time-table",label:"Time Table",category:"aide-management"},{key:"seis",label:"SEIS Import",category:"data-integration"},{key:"aeries",label:"Aeries API & Import",category:"data-integration"},{key:"testing-links",label:"Testing Links",category:"data-integration"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"data-integration"},{key:"backup-restore",label:"Backup & Restore",category:"data-integration"},{key:"permissions",label:"Permissions",category:"system-config"},{key:"settings",label:"App Settings",category:"system-config"},{key:"iep-security",label:"IEP Security",category:"system-config"},{key:"security",label:"Security Controls",category:"system-config"},{key:"system-health",label:"System Health",category:"monitoring"}],c=C=>l.filter(R=>R.category===C),u=C=>{n.value=C;const R=c(C);R.length>0&&(r.value=R[0].key)},d=C=>{r.value=C},f=()=>{t.push("/students")},h=()=>{t.push("/admin/dashboard")},v=C=>{u(C)},m=()=>{r.value="students"},g=async C=>{console.log("Students imported:",C);try{await i()}catch(R){console.error("Failed to refresh students after import:",R)}},{isDebugMenuVisible:b,canShowDebugMenu:_,toggleDebugMenu:T}=q1();return{activeTab:r,activeCategory:n,tabs:l,students:s,userMap:a,getTabsForCategory:c,setActiveCategory:u,handleTabChange:d,goToStudents:f,goToDashboard:h,handleGoToCategory:v,handleBulkImporterClose:m,handleStudentsImported:g,isDebugMenuVisible:b,canShowDebugMenu:_,toggleDebugMenu:T}}},zle={class:"admin-header"},Kle={class:"admin-nav"},qle={class:"admin-actions"},Xle={key:0,class:"sub-tab-container"},Yle={class:"admin-section"},Qle={key:0,class:"admin-section"},Jle={key:1,class:"admin-section"},Zle={key:2,class:"admin-section"},ece={key:3,class:"admin-section"},tce={key:4,class:"admin-section"},rce={key:5,class:"admin-section"},nce={key:6,class:"admin-section"},sce={key:7,class:"admin-section"},ace={key:8,class:"admin-section"},ice={key:9,class:"admin-section"},oce={key:10,class:"admin-section"},lce={key:11,class:"admin-section"},cce={key:12,class:"admin-section"},uce={key:13,class:"admin-section"},dce={key:14,class:"admin-section"},fce={key:15,class:"admin-section"},hce={key:16,class:"admin-section"},pce={key:17,class:"admin-section"};function mce(t,e,r,n,s,i){const a=kr("TabBar"),o=kr("AdminDashboard"),l=kr("UserAddForm"),c=kr("UserTable"),u=kr("AdminStudents"),d=kr("StudentBulkImporter"),f=kr("AdminPermissions"),h=kr("AdminAideAssignment"),v=kr("AdminAideSchedule"),m=kr("AdminTimeTable"),g=kr("SeisImport"),b=kr("AeriesAPIConnector"),_=kr("AeriesImport"),T=kr("AppSettings"),C=kr("TestingLinks"),R=kr("AdminTeacherFeedback"),D=kr("AdminBackupRestore"),w=kr("DebugEncryption"),E=kr("SecurityControlCenter"),y=kr("SystemHealthCheck");return N(),M("div",null,[p("div",zle,[e[8]||(e[8]=p("h1",null,"Admin Panel",-1)),p("div",Kle,[p("button",{onClick:e[0]||(e[0]=x=>n.setActiveCategory("dashboard")),class:at([{active:n.activeCategory==="dashboard"},"category-btn"])}," Dashboard ",2),p("button",{onClick:e[1]||(e[1]=x=>n.setActiveCategory("users-students")),class:at([{active:n.activeCategory==="users-students"},"category-btn"])}," User & Student Management ",2),p("button",{onClick:e[2]||(e[2]=x=>n.setActiveCategory("aide-management")),class:at([{active:n.activeCategory==="aide-management"},"category-btn"])}," Aide Management ",2),p("button",{onClick:e[3]||(e[3]=x=>n.setActiveCategory("data-integration")),class:at([{active:n.activeCategory==="data-integration"},"category-btn"])}," Data & Integration ",2),p("button",{onClick:e[4]||(e[4]=x=>n.setActiveCategory("system-config")),class:at([{active:n.activeCategory==="system-config"},"category-btn"])}," System Configuration ",2)]),p("div",qle,[n.canShowDebugMenu?(N(),M("button",{key:0,onClick:e[5]||(e[5]=(...x)=>n.toggleDebugMenu&&n.toggleDebugMenu(...x)),class:"debug-btn"},"  "+oe(n.isDebugMenuVisible?"Hide":"Show")+" Debug ",1)):Re("",!0),p("button",{onClick:e[6]||(e[6]=(...x)=>n.goToStudents&&n.goToStudents(...x)),class:"return-btn"},e[7]||(e[7]=[p("span",null,"",-1),Ne(" Return to Students ")]))])]),n.activeCategory?(N(),M("div",Xle,[rt(a,{tabs:n.getTabsForCategory(n.activeCategory),"active-tab":n.activeTab,onTabChange:n.handleTabChange},null,8,["tabs","active-tab","onTabChange"])])):Re("",!0),p("div",Yle,[n.activeTab==="dashboard"?(N(),M("div",Qle,[rt(o,{onGoToCategory:n.handleGoToCategory,onGoToStudents:n.goToStudents},null,8,["onGoToCategory","onGoToStudents"])])):Re("",!0),n.activeTab==="usersAdd"?(N(),M("div",Jle,[rt(l)])):Re("",!0),n.activeTab==="usersEdit"?(N(),M("div",Zle,[rt(c)])):Re("",!0),n.activeTab==="students"?(N(),M("div",ece,[rt(u)])):Re("",!0),n.activeTab==="addStudents"?(N(),M("div",tce,[rt(d,{onClose:n.handleBulkImporterClose,onImported:n.handleStudentsImported},null,8,["onClose","onImported"])])):Re("",!0),n.activeTab==="permissions"?(N(),M("div",rce,[rt(f)])):Re("",!0),n.activeTab==="aide-assignment"?(N(),M("div",nce,[rt(h)])):Re("",!0),n.activeTab==="aide-schedule"?(N(),M("div",sce,[rt(v)])):Re("",!0),n.activeTab==="time-table"?(N(),M("div",ace,[rt(m)])):Re("",!0),n.activeTab==="seis"?(N(),M("div",ice,[rt(g)])):Re("",!0),n.activeTab==="aeries"?(N(),M("div",oce,[rt(b),e[9]||(e[9]=p("hr",{style:{margin:"2rem 0",border:"1px solid #ddd"}},null,-1)),rt(_)])):Re("",!0),n.activeTab==="settings"?(N(),M("div",lce,[rt(T)])):Re("",!0),n.activeTab==="testing-links"?(N(),M("div",cce,[rt(C,{students:n.students,userMap:n.userMap},null,8,["students","userMap"])])):Re("",!0),n.activeTab==="teacher-feedback"?(N(),M("div",uce,[rt(R)])):Re("",!0),n.activeTab==="backup-restore"?(N(),M("div",dce,[rt(D)])):Re("",!0),n.activeTab==="iep-security"?(N(),M("div",fce,[e[10]||(e[10]=p("h2",null,"IEP Data Security",-1)),rt(w,{"selected-student":t.currentStudent},null,8,["selected-student"])])):Re("",!0),n.activeTab==="security"?(N(),M("div",hce,[rt(E,{"selected-student":t.currentStudent},null,8,["selected-student"])])):Re("",!0),n.activeTab==="system-health"?(N(),M("div",pce,[rt(y)])):Re("",!0)])])}const vce=_t(Wle,[["render",mce],["__scopeId","data-v-4bebdd05"]]),gce={class:"aide-schedule-view"},xce={class:"header"},yce={class:"user-info"},Ece={class:"content"},bce={key:0,class:"error-message"},_ce={key:1,class:"error-message"},Sce={key:2,class:"loading"},Tce={key:3,class:"schedule-container"},Ace={class:"schedule-display"},wce={class:"schedule-timeline"},Cce={class:"time-info"},Ice={class:"time"},kce={class:"type-badge"},Dce={class:"assignment-info"},Rce={key:0},Fce={key:1,class:"no-assignment"},Pce={class:"schedule-editor"},Oce={class:"editor-content"},Nce={class:"time-block-header"},Lce={class:"time"},Bce={class:"type-badge"},Mce={class:"assignment-editor"},Uce=["onUpdate:modelValue"],Vce=["value"],$ce=["value"],Hce={class:"editor-actions"},jce=["disabled"],Gce={key:0},Wce={key:1},zce={__name:"AideScheduleView",setup(t){const e=Xo(),r=oi(),{userList:n,fetchUsers:s}=Ca(),{students:i,fetchStudents:a}=wa(),{loadAppSettings:o,saveAppSettings:l}=Ia(),c=he(!0),u=he(!1),d=he({}),f=he({}),h=Ve(()=>{var D;return((D=r.currentUser)==null?void 0:D.role)==="paraeducator"}),v=Ve(()=>{var D;return(D=r.currentUser)==null?void 0:D.uid}),m=Ve(()=>{var D;return((D=n.value)==null?void 0:D.filter(w=>w.role==="teacher"))||[]});async function g(){var D;try{const w=await Jr(vt(yt,"app_settings","global"));if(w.exists()){const E=w.data();d.value=((D=E.timeTables)==null?void 0:D[0])||E.timeTable||{}}}catch(w){console.error("Error loading time table:",w)}}function b(){return d.value.schedule?d.value.schedule.map((D,w)=>({...D,id:D.id||`block-${w}`,assignments:f.value[D.id||`block-${w}`]||{}})):[]}function _(){return b().map(w=>{const E=w.assignments[v.value];let y="";if(E){if(E.startsWith("teacher:")){const x=E.replace("teacher:",""),I=m.value.find(A=>A.id===x);y=I?I.name||I.email:"Unknown Teacher"}else if(E.startsWith("student:")){const x=E.replace("student:",""),I=i.value.find(A=>A.id===x);y=I?`${pt(I,"firstName")} ${pt(I,"lastName")}`:"Unknown Student"}}return{...w,assignment:y}})}async function T(){try{u.value=!0;const D=await o(),w={...D.detailedAideSchedule};b().forEach(y=>{w[y.id]||(w[y.id]={}),w[y.id][v.value]=y.assignments[v.value]});const E={...D,detailedAideSchedule:w};await l(E),console.log("My schedule saved successfully")}catch(D){console.error("Error saving my schedule:",D)}finally{u.value=!1}}function C(){r.logout(),e.push("/login")}async function R(){try{c.value=!0,await Promise.all([s(),a(),o(),g()]);const D=await Jr(vt(yt,"app_settings","global"));if(D.exists()){const w=D.data();f.value=w.detailedAideSchedule||{}}c.value=!1}catch(D){console.error("Error loading aide schedule data:",D),c.value=!1}}return Qt(R),(D,w)=>{var E,y;return N(),M("div",gce,[p("div",xce,[w[2]||(w[2]=p("h1",null,"My Schedule",-1)),p("div",yce,[p("span",null,oe(((E=ge(r).currentUser)==null?void 0:E.name)||((y=ge(r).currentUser)==null?void 0:y.email)),1),p("button",{onClick:C,class:"btn btn-secondary"}," Logout ")])]),p("div",Ece,[ge(r).currentUser?h.value?c.value?(N(),M("div",Sce," Loading your schedule... ")):(N(),M("div",Tce,[p("div",Ace,[w[7]||(w[7]=p("h2",null,"My Daily Schedule",-1)),p("div",wce,[(N(!0),M(Pe,null,We(_(),x=>(N(),M("div",{key:x.id,class:at(["time-block",x.type])},[p("div",Cce,[p("span",Ice,oe(x.startTime)+" - "+oe(x.endTime),1),p("span",kce,oe(x.type),1)]),p("div",Dce,[x.assignment?(N(),M("span",Rce,oe(x.assignment),1)):(N(),M("span",Fce,"No Assignment"))])],2))),128))])]),p("div",Pce,[w[9]||(w[9]=p("h2",null,"Edit My Schedule",-1)),p("div",Oce,[(N(!0),M(Pe,null,We(b(),x=>(N(),M("div",{key:x.id,class:"time-block-editor"},[p("div",Nce,[p("span",Lce,oe(x.startTime)+" - "+oe(x.endTime),1),p("span",Bce,oe(x.type),1)]),p("div",Mce,[Me(p("select",{"onUpdate:modelValue":I=>x.assignments[v.value]=I,class:"assignment-select"},[w[8]||(w[8]=p("option",{value:""},"No Assignment",-1)),(N(!0),M(Pe,null,We(m.value,I=>(N(),M("option",{key:I.id,value:`teacher:${I.id}`},oe(I.name||I.email),9,Vce))),128)),(N(!0),M(Pe,null,We(ge(i),I=>(N(),M("option",{key:I.id,value:`student:${I.id}`},oe(ge(pt)(I,"firstName"))+" "+oe(ge(pt)(I,"lastName")),9,$ce))),128))],8,Uce),[[vr,x.assignments[v.value]]])])]))),128))]),p("div",Hce,[p("button",{onClick:T,class:"btn btn-primary",disabled:u.value},[u.value?(N(),M("span",Gce,"")):(N(),M("span",Wce,"")),Ne(" "+oe(u.value?"Saving...":"Save My Schedule"),1)],8,jce)])])])):(N(),M("div",_ce,[w[5]||(w[5]=p("h2",null,"Access Denied",-1)),w[6]||(w[6]=p("p",null,"This page is only available to paraeducators.",-1)),p("button",{onClick:w[1]||(w[1]=x=>ge(e).push("/")),class:"btn btn-primary"},"Go Home")])):(N(),M("div",bce,[w[3]||(w[3]=p("h2",null,"Authentication Required",-1)),w[4]||(w[4]=p("p",null,"Please log in to access this page.",-1)),p("button",{onClick:w[0]||(w[0]=x=>ge(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])])}}},Kce=_t(zce,[["__scopeId","data-v-f2c7a0cd"]]);function qce(t){const{waitForAuthInit:e}=Yv();e.then(()=>{t.beforeEach((r,n,s)=>{const{currentUser:i}=Yv(),a=r.meta.requiresAuth,o=r.meta.allowedRoles;a&&!i.value?s({name:"Login"}):a&&i.value&&!i.value.role?(console.log(`User ${i.value.uid} exists in Auth but has no role - redirecting to login for role assignment`),s({name:"Login"})):a&&o&&i.value&&!o.includes(i.value.role)?(console.warn(`User with role '${i.value.role}' tried to access restricted route: ${r.path}`),s({name:"Home"})):s()})})}const Xce=[{path:"/login",name:"Login",component:RV},{path:"/",name:"Home",component:z2,meta:{requiresAuth:!0,allowedRoles:B2}},{path:"/students",name:"Students",component:z2,meta:{requiresAuth:!0,allowedRoles:B2}},{path:"/admin",name:"Admin",component:vce,meta:{requiresAuth:!0,allowedRoles:Oc}},{path:"/admin/aide-assignment",name:"AdminAideAssignment",component:KC,meta:{requiresAuth:!0,allowedRoles:Oc}},{path:"/admin/time-table",name:"AdminTimeTable",component:II,meta:{requiresAuth:!0,allowedRoles:Oc}},{path:"/admin/aide-schedule",name:"AdminAideSchedule",component:VI,meta:{requiresAuth:!0,allowedRoles:Oc}},{path:"/admin/backup-restore",name:"AdminBackupRestore",component:$I,meta:{requiresAuth:!0,allowedRoles:Oc}},{path:"/aide-schedule",name:"AideSchedule",component:Kce,meta:{requiresAuth:!0,allowedRoles:["paraeducator"]}},{path:"/testing",name:"Testing",component:()=>X1(()=>import("./TestingView-BnaAJDTD.js"),__vite__mapDeps([0,1])),meta:{requiresAuth:!0,allowedRoles:["admin","administrator","sped_chair","administrator_504_CM"]}}],zI=nB({history:FL("/"),routes:Xce});qce(zI);const Px=x0(kB),Yce=HR();Px.use(zI);Px.use(Yce);Px.mount("#app");export{Pe as F,$C as S,_t as _,vt as a,sc as b,sr as c,yt as d,M as e,p as f,Zr as g,Re as h,Ne as i,ge as j,We as k,rt as l,YH as m,QH as n,Qt as o,N as p,he as r,gr as s,oe as t,Ia as u};
