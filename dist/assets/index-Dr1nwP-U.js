(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Lh(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Jt={},Yl=[],js=()=>{},FD=()=>!1,Od=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),n1=t=>t.startsWith("onUpdate:"),Er=Object.assign,s1=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},ND=Object.prototype.hasOwnProperty,ur=(t,e)=>ND.call(t,e),dt=Array.isArray,Ql=t=>Fc(t)==="[object Map]",ll=t=>Fc(t)==="[object Set]",pE=t=>Fc(t)==="[object Date]",OD=t=>Fc(t)==="[object RegExp]",Tt=t=>typeof t=="function",Tr=t=>typeof t=="string",ha=t=>typeof t=="symbol",vr=t=>t!==null&&typeof t=="object",a1=t=>(vr(t)||Tt(t))&&Tt(t.then)&&Tt(t.catch),XS=Object.prototype.toString,Fc=t=>XS.call(t),MD=t=>Fc(t).slice(8,-1),Bh=t=>Fc(t)==="[object Object]",i1=t=>Tr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Jl=Lh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Uh=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},LD=/-(\w)/g,kn=Uh(t=>t.replace(LD,(e,r)=>r?r.toUpperCase():"")),BD=/\B([A-Z])/g,Es=Uh(t=>t.replace(BD,"-$1").toLowerCase()),Md=Uh(t=>t.charAt(0).toUpperCase()+t.slice(1)),Iu=Uh(t=>t?`on${Md(t)}`:""),os=(t,e)=>!Object.is(t,e),Zl=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},Mg=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},O0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},M0=t=>{const e=Tr(t)?Number(t):NaN;return isNaN(e)?t:e};let mE;const $h=()=>mE||(mE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),UD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",$D=Lh(UD);function Nr(t){if(dt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=Tr(n)?GD(n):Nr(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(Tr(t)||vr(t))return t}const VD=/;(?![^(]*\))/g,HD=/:([^]+)/,jD=/\/\*[^]*?\*\//g;function GD(t){const e={};return t.replace(jD,"").split(VD).forEach(r=>{if(r){const n=r.split(HD);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Qe(t){let e="";if(Tr(t))e=t;else if(dt(t))for(let r=0;r<t.length;r++){const n=Qe(t[r]);n&&(e+=n+" ")}else if(vr(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function WD(t){if(!t)return null;let{class:e,style:r}=t;return e&&!Tr(e)&&(t.class=Qe(e)),r&&(t.style=Nr(r)),t}const zD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",KD=Lh(zD);function YS(t){return!!t||t===""}function qD(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=ao(t[n],e[n]);return r}function ao(t,e){if(t===e)return!0;let r=pE(t),n=pE(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=ha(t),n=ha(e),r||n)return t===e;if(r=dt(t),n=dt(e),r||n)return r&&n?qD(t,e):!1;if(r=vr(t),n=vr(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!ao(t[a],e[a]))return!1}}return String(t)===String(e)}function Vh(t,e){return t.findIndex(r=>ao(r,e))}const QS=t=>!!(t&&t.__v_isRef===!0),Y=t=>Tr(t)?t:t==null?"":dt(t)||vr(t)&&(t.toString===XS||!Tt(t.toString))?QS(t)?Y(t.value):JSON.stringify(t,JS,2):String(t),JS=(t,e)=>QS(e)?JS(t,e.value):Ql(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],i)=>(r[qp(n,i)+" =>"]=s,r),{})}:ll(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>qp(r))}:ha(e)?qp(e):vr(e)&&!dt(e)&&!Bh(e)?String(e):e,qp=(t,e="")=>{var r;return ha(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vn;class o1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vn,!e&&Vn&&(this.index=(Vn.scopes||(Vn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Vn;try{return Vn=this,e()}finally{Vn=r}}}on(){++this._on===1&&(this.prevScope=Vn,Vn=this)}off(){this._on>0&&--this._on===0&&(Vn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function l1(t){return new o1(t)}function c1(){return Vn}function ZS(t,e=!1){Vn&&Vn.cleanups.push(t)}let br;const Xp=new WeakSet;class id{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vn&&Vn.active&&Vn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xp.has(this)&&(Xp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||tA(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gE(this),rA(this);const e=br,r=ua;br=this,ua=!0;try{return this.fn()}finally{nA(this),br=e,ua=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)f1(e);this.deps=this.depsTail=void 0,gE(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Lg(this)&&this.run()}get dirty(){return Lg(this)}}let eA=0,ku,Du;function tA(t,e=!1){if(t.flags|=8,e){t.next=Du,Du=t;return}t.next=ku,ku=t}function u1(){eA++}function d1(){if(--eA>0)return;if(Du){let e=Du;for(Du=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;ku;){let e=ku;for(ku=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function rA(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function nA(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),f1(n),XD(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function Lg(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(sA(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function sA(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===od)||(t.globalVersion=od,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Lg(t))))return;t.flags|=2;const e=t.dep,r=br,n=ua;br=t,ua=!0;try{rA(t);const s=t.fn(t._value);(e.version===0||os(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{br=r,ua=n,nA(t),t.flags&=-3}}function f1(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)f1(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function XD(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}function YD(t,e){t.effect instanceof id&&(t=t.effect.fn);const r=new id(t);e&&Er(r,e);try{r.run()}catch(s){throw r.stop(),s}const n=r.run.bind(r);return n.effect=r,n}function QD(t){t.effect.stop()}let ua=!0;const aA=[];function mi(){aA.push(ua),ua=!1}function gi(){const t=aA.pop();ua=t===void 0?!0:t}function gE(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=br;br=void 0;try{e()}finally{br=r}}}let od=0,JD=class{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Hh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!br||!ua||br===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==br)r=this.activeLink=new JD(br,this),br.deps?(r.prevDep=br.depsTail,br.depsTail.nextDep=r,br.depsTail=r):br.deps=br.depsTail=r,iA(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=br.depsTail,r.nextDep=void 0,br.depsTail.nextDep=r,br.depsTail=r,br.deps===r&&(br.deps=n)}return r}trigger(e){this.version++,od++,this.notify(e)}notify(e){u1();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{d1()}}}function iA(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)iA(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const L0=new WeakMap,Uo=Symbol(""),Bg=Symbol(""),ld=Symbol("");function Gn(t,e,r){if(ua&&br){let n=L0.get(t);n||L0.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new Hh),s.map=n,s.key=r),s.track()}}function Ja(t,e,r,n,s,i){const a=L0.get(t);if(!a){od++;return}const o=l=>{l&&l.trigger()};if(u1(),e==="clear")a.forEach(o);else{const l=dt(t),c=l&&i1(r);if(l&&r==="length"){const u=Number(n);a.forEach((f,h)=>{(h==="length"||h===ld||!ha(h)&&h>=u)&&o(f)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),c&&o(a.get(ld)),e){case"add":l?c&&o(a.get("length")):(o(a.get(Uo)),Ql(t)&&o(a.get(Bg)));break;case"delete":l||(o(a.get(Uo)),Ql(t)&&o(a.get(Bg)));break;case"set":Ql(t)&&o(a.get(Uo));break}}d1()}function ZD(t,e){const r=L0.get(t);return r&&r.get(e)}function kl(t){const e=Xt(t);return e===t?e:(Gn(e,"iterate",ld),Ds(t)?e:e.map(Cn))}function jh(t){return Gn(t=Xt(t),"iterate",ld),t}const e3={__proto__:null,[Symbol.iterator](){return Yp(this,Symbol.iterator,Cn)},concat(...t){return kl(this).concat(...t.map(e=>dt(e)?kl(e):e))},entries(){return Yp(this,"entries",t=>(t[1]=Cn(t[1]),t))},every(t,e){return qa(this,"every",t,e,void 0,arguments)},filter(t,e){return qa(this,"filter",t,e,r=>r.map(Cn),arguments)},find(t,e){return qa(this,"find",t,e,Cn,arguments)},findIndex(t,e){return qa(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return qa(this,"findLast",t,e,Cn,arguments)},findLastIndex(t,e){return qa(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return qa(this,"forEach",t,e,void 0,arguments)},includes(...t){return Qp(this,"includes",t)},indexOf(...t){return Qp(this,"indexOf",t)},join(t){return kl(this).join(t)},lastIndexOf(...t){return Qp(this,"lastIndexOf",t)},map(t,e){return qa(this,"map",t,e,void 0,arguments)},pop(){return eu(this,"pop")},push(...t){return eu(this,"push",t)},reduce(t,...e){return vE(this,"reduce",t,e)},reduceRight(t,...e){return vE(this,"reduceRight",t,e)},shift(){return eu(this,"shift")},some(t,e){return qa(this,"some",t,e,void 0,arguments)},splice(...t){return eu(this,"splice",t)},toReversed(){return kl(this).toReversed()},toSorted(t){return kl(this).toSorted(t)},toSpliced(...t){return kl(this).toSpliced(...t)},unshift(...t){return eu(this,"unshift",t)},values(){return Yp(this,"values",Cn)}};function Yp(t,e,r){const n=jh(t),s=n[e]();return n!==t&&!Ds(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const t3=Array.prototype;function qa(t,e,r,n,s,i){const a=jh(t),o=a!==t&&!Ds(t),l=a[e];if(l!==t3[e]){const f=l.apply(t,i);return o?Cn(f):f}let c=r;a!==t&&(o?c=function(f,h){return r.call(this,Cn(f),h,t)}:r.length>2&&(c=function(f,h){return r.call(this,f,h,t)}));const u=l.call(a,c,n);return o&&s?s(u):u}function vE(t,e,r,n){const s=jh(t);let i=r;return s!==t&&(Ds(t)?r.length>3&&(i=function(a,o,l){return r.call(this,a,o,l,t)}):i=function(a,o,l){return r.call(this,a,Cn(o),l,t)}),s[e](i,...n)}function Qp(t,e,r){const n=Xt(t);Gn(n,"iterate",ld);const s=n[e](...r);return(s===-1||s===!1)&&zh(r[0])?(r[0]=Xt(r[0]),n[e](...r)):s}function eu(t,e,r=[]){mi(),u1();const n=Xt(t)[e].apply(t,r);return d1(),gi(),n}const r3=Lh("__proto__,__v_isRef,__isVue"),oA=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ha));function n3(t){ha(t)||(t=String(t));const e=Xt(this);return Gn(e,"has",t),e.hasOwnProperty(t)}class lA{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?pA:hA:i?fA:dA).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=dt(e);if(!s){let l;if(a&&(l=e3[r]))return l;if(r==="hasOwnProperty")return n3}const o=Reflect.get(e,r,Cr(e)?e:n);return(ha(r)?oA.has(r):r3(r))||(s||Gn(e,"get",r),i)?o:Cr(o)?a&&i1(r)?o:o.value:vr(o)?s?p1(o):Fs(o):o}}class cA extends lA{constructor(e=!1){super(!1,e)}set(e,r,n,s){let i=e[r];if(!this._isShallow){const l=vi(i);if(!Ds(n)&&!vi(n)&&(i=Xt(i),n=Xt(n)),!dt(e)&&Cr(i)&&!Cr(n))return l?!1:(i.value=n,!0)}const a=dt(e)&&i1(r)?Number(r)<e.length:ur(e,r),o=Reflect.set(e,r,n,Cr(e)?e:s);return e===Xt(s)&&(a?os(n,i)&&Ja(e,"set",r,n):Ja(e,"add",r,n)),o}deleteProperty(e,r){const n=ur(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&Ja(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!ha(r)||!oA.has(r))&&Gn(e,"has",r),n}ownKeys(e){return Gn(e,"iterate",dt(e)?"length":Uo),Reflect.ownKeys(e)}}class uA extends lA{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const s3=new cA,a3=new uA,i3=new cA(!0),o3=new uA(!0),Ug=t=>t,Tf=t=>Reflect.getPrototypeOf(t);function l3(t,e,r){return function(...n){const s=this.__v_raw,i=Xt(s),a=Ql(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=s[t](...n),u=r?Ug:e?B0:Cn;return!e&&Gn(i,"iterate",l?Bg:Uo),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:o?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function wf(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function c3(t,e){const r={get(s){const i=this.__v_raw,a=Xt(i),o=Xt(s);t||(os(s,o)&&Gn(a,"get",s),Gn(a,"get",o));const{has:l}=Tf(a),c=e?Ug:t?B0:Cn;if(l.call(a,s))return c(i.get(s));if(l.call(a,o))return c(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Gn(Xt(s),"iterate",Uo),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=Xt(i),o=Xt(s);return t||(os(s,o)&&Gn(a,"has",s),Gn(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=Xt(o),c=e?Ug:t?B0:Cn;return!t&&Gn(l,"iterate",Uo),o.forEach((u,f)=>s.call(i,c(u),c(f),a))}};return Er(r,t?{add:wf("add"),set:wf("set"),delete:wf("delete"),clear:wf("clear")}:{add(s){!e&&!Ds(s)&&!vi(s)&&(s=Xt(s));const i=Xt(this);return Tf(i).has.call(i,s)||(i.add(s),Ja(i,"add",s,s)),this},set(s,i){!e&&!Ds(i)&&!vi(i)&&(i=Xt(i));const a=Xt(this),{has:o,get:l}=Tf(a);let c=o.call(a,s);c||(s=Xt(s),c=o.call(a,s));const u=l.call(a,s);return a.set(s,i),c?os(i,u)&&Ja(a,"set",s,i):Ja(a,"add",s,i),this},delete(s){const i=Xt(this),{has:a,get:o}=Tf(i);let l=a.call(i,s);l||(s=Xt(s),l=a.call(i,s)),o&&o.call(i,s);const c=i.delete(s);return l&&Ja(i,"delete",s,void 0),c},clear(){const s=Xt(this),i=s.size!==0,a=s.clear();return i&&Ja(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=l3(s,t,e)}),r}function Gh(t,e){const r=c3(t,e);return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(ur(r,s)&&s in n?r:n,s,i)}const u3={get:Gh(!1,!1)},d3={get:Gh(!1,!0)},f3={get:Gh(!0,!1)},h3={get:Gh(!0,!0)},dA=new WeakMap,fA=new WeakMap,hA=new WeakMap,pA=new WeakMap;function p3(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function m3(t){return t.__v_skip||!Object.isExtensible(t)?0:p3(MD(t))}function Fs(t){return vi(t)?t:Wh(t,!1,s3,u3,dA)}function h1(t){return Wh(t,!1,i3,d3,fA)}function p1(t){return Wh(t,!0,a3,f3,hA)}function g3(t){return Wh(t,!0,o3,h3,pA)}function Wh(t,e,r,n,s){if(!vr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=m3(t);if(i===0)return t;const a=s.get(t);if(a)return a;const o=new Proxy(t,i===2?n:r);return s.set(t,o),o}function Pa(t){return vi(t)?Pa(t.__v_raw):!!(t&&t.__v_isReactive)}function vi(t){return!!(t&&t.__v_isReadonly)}function Ds(t){return!!(t&&t.__v_isShallow)}function zh(t){return t?!!t.__v_raw:!1}function Xt(t){const e=t&&t.__v_raw;return e?Xt(e):t}function Kh(t){return!ur(t,"__v_skip")&&Object.isExtensible(t)&&Mg(t,"__v_skip",!0),t}const Cn=t=>vr(t)?Fs(t):t,B0=t=>vr(t)?p1(t):t;function Cr(t){return t?t.__v_isRef===!0:!1}function ae(t){return mA(t,!1)}function m1(t){return mA(t,!0)}function mA(t,e){return Cr(t)?t:new v3(t,e)}class v3{constructor(e,r){this.dep=new Hh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Xt(e),this._value=r?e:Cn(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Ds(e)||vi(e);e=n?e:Xt(e),os(e,r)&&(this._rawValue=e,this._value=n?e:Cn(e),this.dep.trigger())}}function y3(t){t.dep&&t.dep.trigger()}function q(t){return Cr(t)?t.value:t}function x3(t){return Tt(t)?t():q(t)}const E3={get:(t,e,r)=>e==="__v_raw"?t:q(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return Cr(s)&&!Cr(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function g1(t){return Pa(t)?t:new Proxy(t,E3)}class _3{constructor(e){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new Hh,{get:n,set:s}=e(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function gA(t){return new _3(t)}function vA(t){const e=dt(t)?new Array(t.length):{};for(const r in t)e[r]=yA(t,r);return e}class b3{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ZD(Xt(this._object),this._key)}}class S3{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function A3(t,e,r){return Cr(t)?t:Tt(t)?new S3(t):vr(t)&&arguments.length>1?yA(t,e,r):ae(t)}function yA(t,e,r){const n=t[e];return Cr(n)?n:new b3(t,e,r)}class T3{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Hh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=od-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&br!==this)return tA(this,!0),!0}get value(){const e=this.dep.track();return sA(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function w3(t,e,r=!1){let n,s;return Tt(t)?n=t:(n=t.get,s=t.set),new T3(n,s,r)}const C3={GET:"get",HAS:"has",ITERATE:"iterate"},I3={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},Cf={},U0=new WeakMap;let Vi;function k3(){return Vi}function xA(t,e=!1,r=Vi){if(r){let n=U0.get(r);n||U0.set(r,n=[]),n.push(t)}}function D3(t,e,r=Jt){const{immediate:n,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=r,c=w=>s?w:Ds(w)||s===!1||s===0?Za(w,1):Za(w);let u,f,h,p,g=!1,v=!1;if(Cr(t)?(f=()=>t.value,g=Ds(t)):Pa(t)?(f=()=>c(t),g=!0):dt(t)?(v=!0,g=t.some(w=>Pa(w)||Ds(w)),f=()=>t.map(w=>{if(Cr(w))return w.value;if(Pa(w))return c(w);if(Tt(w))return l?l(w,2):w()})):Tt(t)?e?f=l?()=>l(t,2):t:f=()=>{if(h){mi();try{h()}finally{gi()}}const w=Vi;Vi=u;try{return l?l(t,3,[p]):t(p)}finally{Vi=w}}:f=js,e&&s){const w=f,P=s===!0?1/0:s;f=()=>Za(w(),P)}const y=c1(),b=()=>{u.stop(),y&&y.active&&s1(y.effects,u)};if(i&&e){const w=e;e=(...P)=>{w(...P),b()}}let E=v?new Array(t.length).fill(Cf):Cf;const x=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(e){const P=u.run();if(s||g||(v?P.some((R,A)=>os(R,E[A])):os(P,E))){h&&h();const R=Vi;Vi=u;try{const A=[P,E===Cf?void 0:v&&E[0]===Cf?[]:E,p];E=P,l?l(e,3,A):e(...A)}finally{Vi=R}}}else u.run()};return o&&o(x),u=new id(f),u.scheduler=a?()=>a(x,!1):x,p=w=>xA(w,!1,u),h=u.onStop=()=>{const w=U0.get(u);if(w){if(l)l(w,4);else for(const P of w)P();U0.delete(u)}},e?n?x(!0):E=u.run():a?a(x.bind(null,!0),!0):u.run(),b.pause=u.pause.bind(u),b.resume=u.resume.bind(u),b.stop=b,b}function Za(t,e=1/0,r){if(e<=0||!vr(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Cr(t))Za(t.value,e,r);else if(dt(t))for(let n=0;n<t.length;n++)Za(t[n],e,r);else if(ll(t)||Ql(t))t.forEach(n=>{Za(n,e,r)});else if(Bh(t)){for(const n in t)Za(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Za(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const EA=[];function P3(t){EA.push(t)}function R3(){EA.pop()}function F3(t,e){}const N3={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},O3={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Nc(t,e,r,n){try{return n?t(...n):t()}catch(s){cl(s,e,r)}}function zs(t,e,r,n){if(Tt(t)){const s=Nc(t,e,r,n);return s&&a1(s)&&s.catch(i=>{cl(i,e,r)}),s}if(dt(t)){const s=[];for(let i=0;i<t.length;i++)s.push(zs(t[i],e,r,n));return s}}function cl(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Jt;if(e){let o=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,l,c)===!1)return}o=o.parent}if(i){mi(),Nc(i,null,10,[t,l,c]),gi();return}}M3(t,r,s,n,a)}function M3(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const ls=[];let Ca=-1;const ec=[];let Hi=null,Ll=0;const _A=Promise.resolve();let $0=null;function ul(t){const e=$0||_A;return t?e.then(this?t.bind(this):t):e}function L3(t){let e=Ca+1,r=ls.length;for(;e<r;){const n=e+r>>>1,s=ls[n],i=ud(s);i<t||i===t&&s.flags&2?e=n+1:r=n}return e}function v1(t){if(!(t.flags&1)){const e=ud(t),r=ls[ls.length-1];!r||!(t.flags&2)&&e>=ud(r)?ls.push(t):ls.splice(L3(e),0,t),t.flags|=1,bA()}}function bA(){$0||($0=_A.then(SA))}function cd(t){dt(t)?ec.push(...t):Hi&&t.id===-1?Hi.splice(Ll+1,0,t):t.flags&1||(ec.push(t),t.flags|=1),bA()}function yE(t,e,r=Ca+1){for(;r<ls.length;r++){const n=ls[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;ls.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function V0(t){if(ec.length){const e=[...new Set(ec)].sort((r,n)=>ud(r)-ud(n));if(ec.length=0,Hi){Hi.push(...e);return}for(Hi=e,Ll=0;Ll<Hi.length;Ll++){const r=Hi[Ll];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Hi=null,Ll=0}}const ud=t=>t.id==null?t.flags&2?-1:1/0:t.id;function SA(t){try{for(Ca=0;Ca<ls.length;Ca++){const e=ls[Ca];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Nc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ca<ls.length;Ca++){const e=ls[Ca];e&&(e.flags&=-2)}Ca=-1,ls.length=0,V0(),$0=null,(ls.length||ec.length)&&SA()}}let Bl,If=[];function AA(t,e){var r,n;Bl=t,Bl?(Bl.enabled=!0,If.forEach(({event:s,args:i})=>Bl.emit(s,...i)),If=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{AA(i,e)}),setTimeout(()=>{Bl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,If=[])},3e3)):If=[]}let cn=null,qh=null;function dd(t){const e=cn;return cn=t,qh=t&&t.type.__scopeId||null,e}function B3(t){qh=t}function U3(){qh=null}const $3=t=>Xh;function Xh(t,e=cn,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&Kg(-1);const i=dd(e);let a;try{a=t(...s)}finally{dd(i),n._d&&Kg(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Be(t,e){if(cn===null)return t;const r=$d(cn),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,o,l=Jt]=e[s];i&&(Tt(i)&&(i={mounted:i,updated:i}),i.deep&&Za(a),n.push({dir:i,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function Ia(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(mi(),zs(l,r,8,[t.el,o,t,e]),gi())}}const TA=Symbol("_vte"),wA=t=>t.__isTeleport,Pu=t=>t&&(t.disabled||t.disabled===""),xE=t=>t&&(t.defer||t.defer===""),EE=t=>typeof SVGElement<"u"&&t instanceof SVGElement,_E=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,$g=(t,e)=>{const r=t&&t.to;return Tr(r)?e?e(r):null:r},CA={name:"Teleport",__isTeleport:!0,process(t,e,r,n,s,i,a,o,l,c){const{mc:u,pc:f,pbc:h,o:{insert:p,querySelector:g,createText:v,createComment:y}}=c,b=Pu(e.props);let{shapeFlag:E,children:x,dynamicChildren:w}=e;if(t==null){const P=e.el=v(""),R=e.anchor=v("");p(P,r,n),p(R,r,n);const A=(m,S)=>{E&16&&(s&&s.isCE&&(s.ce._teleportTarget=m),u(x,m,S,s,i,a,o,l))},_=()=>{const m=e.target=$g(e.props,g),S=IA(m,e,v,p);m&&(a!=="svg"&&EE(m)?a="svg":a!=="mathml"&&_E(m)&&(a="mathml"),b||(A(m,S),h0(e,!1)))};b&&(A(r,R),h0(e,!0)),xE(e.props)?(e.el.__isMounted=!1,an(()=>{_(),delete e.el.__isMounted},i)):_()}else{if(xE(e.props)&&t.el.__isMounted===!1){an(()=>{CA.process(t,e,r,n,s,i,a,o,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const P=e.anchor=t.anchor,R=e.target=t.target,A=e.targetAnchor=t.targetAnchor,_=Pu(t.props),m=_?r:R,S=_?P:A;if(a==="svg"||EE(R)?a="svg":(a==="mathml"||_E(R))&&(a="mathml"),w?(h(t.dynamicChildren,w,m,s,i,a,o),k1(t,e,!0)):l||f(t,e,m,S,s,i,a,o,!1),b)_?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):kf(e,r,P,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const I=e.target=$g(e.props,g);I&&kf(e,I,null,c,0)}else _&&kf(e,R,A,c,1);h0(e,b)}},remove(t,e,r,{um:n,o:{remove:s}},i){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:f,props:h}=t;if(f&&(s(c),s(u)),i&&s(l),a&16){const p=i||!Pu(h);for(let g=0;g<o.length;g++){const v=o[g];n(v,e,r,p,!!v.dynamicChildren)}}},move:kf,hydrate:V3};function kf(t,e,r,{o:{insert:n},m:s},i=2){i===0&&n(t.targetAnchor,e,r);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=t,f=i===2;if(f&&n(a,e,r),(!f||Pu(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,r,2);f&&n(o,e,r)}function V3(t,e,r,n,s,i,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},f){const h=e.target=$g(e.props,l);if(h){const p=Pu(e.props),g=h._lpa||h.firstChild;if(e.shapeFlag&16)if(p)e.anchor=f(a(t),e,o(t),r,n,s,i),e.targetStart=g,e.targetAnchor=g&&a(g);else{e.anchor=a(t);let v=g;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,h._lpa=e.targetAnchor&&a(e.targetAnchor);break}}v=a(v)}e.targetAnchor||IA(h,e,u,c),f(g&&a(g),e,h,r,n,s,i)}h0(e,p)}return e.anchor&&a(e.anchor)}const H3=CA;function h0(t,e){const r=t.ctx;if(r&&r.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function IA(t,e,r,n){const s=e.targetStart=r(""),i=e.targetAnchor=r("");return s[TA]=i,t&&(n(s,t),n(i,t)),i}const ji=Symbol("_leaveCb"),Df=Symbol("_enterCb");function y1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Wt(()=>{t.isMounted=!0}),Zh(()=>{t.isUnmounting=!0}),t}const Os=[Function,Array],x1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Os,onEnter:Os,onAfterEnter:Os,onEnterCancelled:Os,onBeforeLeave:Os,onLeave:Os,onAfterLeave:Os,onLeaveCancelled:Os,onBeforeAppear:Os,onAppear:Os,onAfterAppear:Os,onAppearCancelled:Os},kA=t=>{const e=t.subTree;return e.component?kA(e.component):e},j3={name:"BaseTransition",props:x1,setup(t,{slots:e}){const r=Xs(),n=y1();return()=>{const s=e.default&&Yh(e.default(),!0);if(!s||!s.length)return;const i=DA(s),a=Xt(t),{mode:o}=a;if(n.isLeaving)return Jp(i);const l=bE(i);if(!l)return Jp(i);let c=mc(l,a,n,r,f=>c=f);l.type!==qr&&yi(l,c);let u=r.subTree&&bE(r.subTree);if(u&&u.type!==qr&&!sa(l,u)&&kA(r).type!==qr){let f=mc(u,a,n,r);if(yi(u,f),o==="out-in"&&l.type!==qr)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete f.afterLeave,u=void 0},Jp(i);o==="in-out"&&l.type!==qr?f.delayLeave=(h,p,g)=>{const v=RA(n,u);v[String(u.key)]=u,h[ji]=()=>{p(),h[ji]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function DA(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==qr){e=r;break}}return e}const PA=j3;function RA(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function mc(t,e,r,n,s){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:p,onAfterLeave:g,onLeaveCancelled:v,onBeforeAppear:y,onAppear:b,onAfterAppear:E,onAppearCancelled:x}=e,w=String(t.key),P=RA(r,t),R=(m,S)=>{m&&zs(m,n,9,S)},A=(m,S)=>{const I=S[1];R(m,S),dt(m)?m.every(k=>k.length<=1)&&I():m.length<=1&&I()},_={mode:a,persisted:o,beforeEnter(m){let S=l;if(!r.isMounted)if(i)S=y||l;else return;m[ji]&&m[ji](!0);const I=P[w];I&&sa(t,I)&&I.el[ji]&&I.el[ji](),R(S,[m])},enter(m){let S=c,I=u,k=f;if(!r.isMounted)if(i)S=b||c,I=E||u,k=x||f;else return;let C=!1;const O=m[Df]=D=>{C||(C=!0,D?R(k,[m]):R(I,[m]),_.delayedLeave&&_.delayedLeave(),m[Df]=void 0)};S?A(S,[m,O]):O()},leave(m,S){const I=String(t.key);if(m[Df]&&m[Df](!0),r.isUnmounting)return S();R(h,[m]);let k=!1;const C=m[ji]=O=>{k||(k=!0,S(),O?R(v,[m]):R(g,[m]),m[ji]=void 0,P[I]===t&&delete P[I])};P[I]=t,p?A(p,[m,C]):C()},clone(m){const S=mc(m,e,r,n,s);return s&&s(S),S}};return _}function Jp(t){if(Bd(t))return t=Ma(t),t.children=null,t}function bE(t){if(!Bd(t))return wA(t.type)&&t.children?DA(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&Tt(r.default))return r.default()}}function yi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,yi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Yh(t,e=!1,r){let n=[],s=0;for(let i=0;i<t.length;i++){let a=t[i];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:i);a.type===Pe?(a.patchFlag&128&&s++,n=n.concat(Yh(a.children,e,o))):(e||a.type!==qr)&&n.push(o!=null?Ma(a,{key:o}):a)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Ld(t,e){return Tt(t)?Er({name:t.name},e,{setup:t}):t}function G3(){const t=Xs();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function E1(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function W3(t){const e=Xs(),r=m1(null);if(e){const s=e.refs===Jt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>r.value,set:i=>r.value=i})}return r}function tc(t,e,r,n,s=!1){if(dt(t)){t.forEach((g,v)=>tc(g,e&&(dt(e)?e[v]:e),r,n,s));return}if(eo(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&tc(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?$d(n.component):n.el,a=s?null:i,{i:o,r:l}=t,c=e&&e.r,u=o.refs===Jt?o.refs={}:o.refs,f=o.setupState,h=Xt(f),p=f===Jt?()=>!1:g=>ur(h,g);if(c!=null&&c!==l&&(Tr(c)?(u[c]=null,p(c)&&(f[c]=null)):Cr(c)&&(c.value=null)),Tt(l))Nc(l,o,12,[a,u]);else{const g=Tr(l),v=Cr(l);if(g||v){const y=()=>{if(t.f){const b=g?p(l)?f[l]:u[l]:l.value;s?dt(b)&&s1(b,i):dt(b)?b.includes(i)||b.push(i):g?(u[l]=[i],p(l)&&(f[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else g?(u[l]=a,p(l)&&(f[l]=a)):v&&(l.value=a,t.k&&(u[t.k]=a))};a?(y.id=-1,an(y,r)):y()}}}let SE=!1;const Dl=()=>{SE||(console.error("Hydration completed but contains mismatches."),SE=!0)},z3=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",K3=t=>t.namespaceURI.includes("MathML"),Pf=t=>{if(t.nodeType===1){if(z3(t))return"svg";if(K3(t))return"mathml"}},zl=t=>t.nodeType===8;function q3(t){const{mt:e,p:r,o:{patchProp:n,createText:s,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=t,u=(x,w)=>{if(!w.hasChildNodes()){r(null,x,w),V0(),w._vnode=x;return}f(w.firstChild,x,null,null,null),V0(),w._vnode=x},f=(x,w,P,R,A,_=!1)=>{_=_||!!w.dynamicChildren;const m=zl(x)&&x.data==="[",S=()=>v(x,w,P,R,A,m),{type:I,ref:k,shapeFlag:C,patchFlag:O}=w;let D=x.nodeType;w.el=x,O===-2&&(_=!1,w.dynamicChildren=null);let F=null;switch(I){case to:D!==3?w.children===""?(l(w.el=s(""),a(x),x),F=x):F=S():(x.data!==w.children&&(Dl(),x.data=w.children),F=i(x));break;case qr:E(x)?(F=i(x),b(w.el=x.content.firstChild,x,P)):D!==8||m?F=S():F=i(x);break;case Vo:if(m&&(x=i(x),D=x.nodeType),D===1||D===3){F=x;const N=!w.children.length;for(let M=0;M<w.staticCount;M++)N&&(w.children+=F.nodeType===1?F.outerHTML:F.data),M===w.staticCount-1&&(w.anchor=F),F=i(F);return m?i(F):F}else S();break;case Pe:m?F=g(x,w,P,R,A,_):F=S();break;default:if(C&1)(D!==1||w.type.toLowerCase()!==x.tagName.toLowerCase())&&!E(x)?F=S():F=h(x,w,P,R,A,_);else if(C&6){w.slotScopeIds=A;const N=a(x);if(m?F=y(x):zl(x)&&x.data==="teleport start"?F=y(x,x.data,"teleport end"):F=i(x),e(w,N,null,P,R,Pf(N),_),eo(w)&&!w.type.__asyncResolved){let M;m?(M=Oe(Pe),M.anchor=F?F.previousSibling:N.lastChild):M=x.nodeType===3?we(""):Oe("div"),M.el=x,w.component.subTree=M}}else C&64?D!==8?F=S():F=w.type.hydrate(x,w,P,R,A,_,t,p):C&128&&(F=w.type.hydrate(x,w,P,R,Pf(a(x)),A,_,t,f))}return k!=null&&tc(k,null,R,w),F},h=(x,w,P,R,A,_)=>{_=_||!!w.dynamicChildren;const{type:m,props:S,patchFlag:I,shapeFlag:k,dirs:C,transition:O}=w,D=m==="input"||m==="option";if(D||I!==-1){C&&Ia(w,null,P,"created");let F=!1;if(E(x)){F=sT(null,O)&&P&&P.vnode.props&&P.vnode.props.appear;const M=x.content.firstChild;if(F){const L=M.getAttribute("class");L&&(M.$cls=L),O.beforeEnter(M)}b(M,x,P),w.el=x=M}if(k&16&&!(S&&(S.innerHTML||S.textContent))){let M=p(x.firstChild,w,x,P,R,A,_);for(;M;){Rf(x,1)||Dl();const L=M;M=M.nextSibling,o(L)}}else if(k&8){let M=w.children;M[0]===`
`&&(x.tagName==="PRE"||x.tagName==="TEXTAREA")&&(M=M.slice(1)),x.textContent!==M&&(Rf(x,0)||Dl(),x.textContent=w.children)}if(S){if(D||!_||I&48){const M=x.tagName.includes("-");for(const L in S)(D&&(L.endsWith("value")||L==="indeterminate")||Od(L)&&!Jl(L)||L[0]==="."||M)&&n(x,L,null,S[L],void 0,P)}else if(S.onClick)n(x,"onClick",null,S.onClick,void 0,P);else if(I&4&&Pa(S.style))for(const M in S.style)S.style[M]}let N;(N=S&&S.onVnodeBeforeMount)&&vs(N,P,w),C&&Ia(w,null,P,"beforeMount"),((N=S&&S.onVnodeMounted)||C||F)&&hT(()=>{N&&vs(N,P,w),F&&O.enter(x),C&&Ia(w,null,P,"mounted")},R)}return x.nextSibling},p=(x,w,P,R,A,_,m)=>{m=m||!!w.dynamicChildren;const S=w.children,I=S.length;for(let k=0;k<I;k++){const C=m?S[k]:S[k]=xs(S[k]),O=C.type===to;x?(O&&!m&&k+1<I&&xs(S[k+1]).type===to&&(l(s(x.data.slice(C.children.length)),P,i(x)),x.data=C.children),x=f(x,C,R,A,_,m)):O&&!C.children?l(C.el=s(""),P):(Rf(P,1)||Dl(),r(null,C,P,null,R,A,Pf(P),_))}return x},g=(x,w,P,R,A,_)=>{const{slotScopeIds:m}=w;m&&(A=A?A.concat(m):m);const S=a(x),I=p(i(x),w,S,P,R,A,_);return I&&zl(I)&&I.data==="]"?i(w.anchor=I):(Dl(),l(w.anchor=c("]"),S,I),I)},v=(x,w,P,R,A,_)=>{if(Rf(x.parentElement,1)||Dl(),w.el=null,_){const I=y(x);for(;;){const k=i(x);if(k&&k!==I)o(k);else break}}const m=i(x),S=a(x);return o(x),r(null,w,S,m,P,R,Pf(S),A),P&&(P.vnode.el=w.el,tp(P,w.el)),m},y=(x,w="[",P="]")=>{let R=0;for(;x;)if(x=i(x),x&&zl(x)&&(x.data===w&&R++,x.data===P)){if(R===0)return i(x);R--}return x},b=(x,w,P)=>{const R=w.parentNode;R&&R.replaceChild(x,w);let A=P;for(;A;)A.vnode.el===w&&(A.vnode.el=A.subTree.el=x),A=A.parent},E=x=>x.nodeType===1&&x.tagName==="TEMPLATE";return[u,f]}const AE="data-allow-mismatch",X3={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Rf(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(AE);)t=t.parentElement;const r=t&&t.getAttribute(AE);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return e===0&&n.includes("children")?!0:n.includes(X3[e])}}const Y3=$h().requestIdleCallback||(t=>setTimeout(t,1)),Q3=$h().cancelIdleCallback||(t=>clearTimeout(t)),J3=(t=1e4)=>e=>{const r=Y3(e,{timeout:t});return()=>Q3(r)};function Z3(t){const{top:e,left:r,bottom:n,right:s}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:a}=window;return(e>0&&e<i||n>0&&n<i)&&(r>0&&r<a||s>0&&s<a)}const eP=t=>(e,r)=>{const n=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){n.disconnect(),e();break}},t);return r(s=>{if(s instanceof Element){if(Z3(s))return e(),n.disconnect(),!1;n.observe(s)}}),()=>n.disconnect()},tP=t=>e=>{if(t){const r=matchMedia(t);if(r.matches)e();else return r.addEventListener("change",e,{once:!0}),()=>r.removeEventListener("change",e)}},rP=(t=[])=>(e,r)=>{Tr(t)&&(t=[t]);let n=!1;const s=a=>{n||(n=!0,i(),e(),a.target.dispatchEvent(new a.constructor(a.type,a)))},i=()=>{r(a=>{for(const o of t)a.removeEventListener(o,s)})};return r(a=>{for(const o of t)a.addEventListener(o,s,{once:!0})}),i};function nP(t,e){if(zl(t)&&t.data==="["){let r=1,n=t.nextSibling;for(;n;){if(n.nodeType===1){if(e(n)===!1)break}else if(zl(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else e(t)}const eo=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function sP(t){Tt(t)&&(t={loader:t});const{loader:e,loadingComponent:r,errorComponent:n,delay:s=200,hydrate:i,timeout:a,suspensible:o=!0,onError:l}=t;let c=null,u,f=0;const h=()=>(f++,c=null,p()),p=()=>{let g;return c||(g=c=e().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),l)return new Promise((y,b)=>{l(v,()=>y(h()),()=>b(v),f+1)});throw v}).then(v=>g!==c&&c?c:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),u=v,v)))};return Ld({name:"AsyncComponentWrapper",__asyncLoader:p,__asyncHydrate(g,v,y){const b=i?()=>{const x=i(()=>{y()},w=>nP(g,w));x&&(v.bum||(v.bum=[])).push(x),(v.u||(v.u=[])).push(()=>!0)}:y;u?b():p().then(()=>!v.isUnmounted&&b())},get __asyncResolved(){return u},setup(){const g=ln;if(E1(g),u)return()=>Zp(u,g);const v=x=>{c=null,cl(x,g,13,!n)};if(o&&g.suspense||gc)return p().then(x=>()=>Zp(x,g)).catch(x=>(v(x),()=>n?Oe(n,{error:x}):null));const y=ae(!1),b=ae(),E=ae(!!s);return s&&setTimeout(()=>{E.value=!1},s),a!=null&&setTimeout(()=>{if(!y.value&&!b.value){const x=new Error(`Async component timed out after ${a}ms.`);v(x),b.value=x}},a),p().then(()=>{y.value=!0,g.parent&&Bd(g.parent.vnode)&&g.parent.update()}).catch(x=>{v(x),b.value=x}),()=>{if(y.value&&u)return Zp(u,g);if(b.value&&n)return Oe(n,{error:b.value});if(r&&!E.value)return Oe(r)}}})}function Zp(t,e){const{ref:r,props:n,children:s,ce:i}=e.vnode,a=Oe(t,n,s);return a.ref=r,a.ce=i,delete e.vnode.ce,a}const Bd=t=>t.type.__isKeepAlive,aP={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const r=Xs(),n=r.ctx;if(!n.renderer)return()=>{const E=e.default&&e.default();return E&&E.length===1?E[0]:E};const s=new Map,i=new Set;let a=null;const o=r.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:f}}}=n,h=f("div");n.activate=(E,x,w,P,R)=>{const A=E.component;c(E,x,w,0,o),l(A.vnode,E,x,w,A,o,P,E.slotScopeIds,R),an(()=>{A.isDeactivated=!1,A.a&&Zl(A.a);const _=E.props&&E.props.onVnodeMounted;_&&vs(_,A.parent,E)},o)},n.deactivate=E=>{const x=E.component;j0(x.m),j0(x.a),c(E,h,null,1,o),an(()=>{x.da&&Zl(x.da);const w=E.props&&E.props.onVnodeUnmounted;w&&vs(w,x.parent,E),x.isDeactivated=!0},o)};function p(E){em(E),u(E,r,o,!0)}function g(E){s.forEach((x,w)=>{const P=Jg(x.type);P&&!E(P)&&v(w)})}function v(E){const x=s.get(E);x&&(!a||!sa(x,a))?p(x):a&&em(a),s.delete(E),i.delete(E)}Vt(()=>[t.include,t.exclude],([E,x])=>{E&&g(w=>pu(E,w)),x&&g(w=>!pu(x,w))},{flush:"post",deep:!0});let y=null;const b=()=>{y!=null&&(G0(r.subTree.type)?an(()=>{s.set(y,Ff(r.subTree))},r.subTree.suspense):s.set(y,Ff(r.subTree)))};return Wt(b),Jh(b),Zh(()=>{s.forEach(E=>{const{subTree:x,suspense:w}=r,P=Ff(x);if(E.type===P.type&&E.key===P.key){em(P);const R=P.component.da;R&&an(R,w);return}p(E)})}),()=>{if(y=null,!e.default)return a=null;const E=e.default(),x=E[0];if(E.length>1)return a=null,E;if(!xi(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return a=null,x;let w=Ff(x);if(w.type===qr)return a=null,w;const P=w.type,R=Jg(eo(w)?w.type.__asyncResolved||{}:P),{include:A,exclude:_,max:m}=t;if(A&&(!R||!pu(A,R))||_&&R&&pu(_,R))return w.shapeFlag&=-257,a=w,x;const S=w.key==null?P:w.key,I=s.get(S);return w.el&&(w=Ma(w),x.shapeFlag&128&&(x.ssContent=w)),y=S,I?(w.el=I.el,w.component=I.component,w.transition&&yi(w,w.transition),w.shapeFlag|=512,i.delete(S),i.add(S)):(i.add(S),m&&i.size>parseInt(m,10)&&v(i.values().next().value)),w.shapeFlag|=256,a=w,G0(x.type)?x:w}}},iP=aP;function pu(t,e){return dt(t)?t.some(r=>pu(r,e)):Tr(t)?t.split(",").includes(e):OD(t)?(t.lastIndex=0,t.test(e)):!1}function FA(t,e){OA(t,"a",e)}function NA(t,e){OA(t,"da",e)}function OA(t,e,r=ln){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Qh(e,n,r),r){let s=r.parent;for(;s&&s.parent;)Bd(s.parent.vnode)&&oP(n,e,r,s),s=s.parent}}function oP(t,e,r,n){const s=Qh(e,t,n,!0);Va(()=>{s1(n[e],s)},r)}function em(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Ff(t){return t.shapeFlag&128?t.ssContent:t}function Qh(t,e,r=ln,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...a)=>{mi();const o=Xo(r),l=zs(e,r,t,a);return o(),gi(),l});return n?s.unshift(i):s.push(i),i}}const wi=t=>(e,r=ln)=>{(!gc||t==="sp")&&Qh(t,(...n)=>e(...n),r)},MA=wi("bm"),Wt=wi("m"),_1=wi("bu"),Jh=wi("u"),Zh=wi("bum"),Va=wi("um"),LA=wi("sp"),BA=wi("rtg"),UA=wi("rtc");function $A(t,e=ln){Qh("ec",t,e)}const b1="components",lP="directives";function fr(t,e){return A1(b1,t,!0,e)||t}const VA=Symbol.for("v-ndc");function S1(t){return Tr(t)?A1(b1,t,!1)||t:t||VA}function cP(t){return A1(lP,t)}function A1(t,e,r=!0,n=!1){const s=cn||ln;if(s){const i=s.type;if(t===b1){const o=Jg(i,!1);if(o&&(o===e||o===kn(e)||o===Md(kn(e))))return i}const a=TE(s[t]||i[t],e)||TE(s.appContext[t],e);return!a&&n?i:a}}function TE(t,e){return t&&(t[e]||t[kn(e)]||t[Md(kn(e))])}function je(t,e,r,n){let s;const i=r&&r[n],a=dt(t);if(a||Tr(t)){const o=a&&Pa(t);let l=!1,c=!1;o&&(l=!Ds(t),c=vi(t),t=jh(t)),s=new Array(t.length);for(let u=0,f=t.length;u<f;u++)s[u]=e(l?c?B0(Cn(t[u])):Cn(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(vr(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,i&&i[l]));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];s[l]=e(t[u],u,l,i&&i[l])}}else s=[];return r&&(r[n]=s),s}function uP(t,e){for(let r=0;r<e.length;r++){const n=e[r];if(dt(n))for(let s=0;s<n.length;s++)t[n[s].name]=n[s].fn;else n&&(t[n.name]=n.key?(...s)=>{const i=n.fn(...s);return i&&(i.key=n.key),i}:n.fn)}return t}function HA(t,e,r={},n,s){if(cn.ce||cn.parent&&eo(cn.parent)&&cn.parent.ce)return e!=="default"&&(r.name=e),B(),Qt(Pe,null,[Oe("slot",r,n&&n())],64);let i=t[e];i&&i._c&&(i._d=!1),B();const a=i&&T1(i(r)),o=r.key||a&&a.key,l=Qt(Pe,{key:(o&&!ha(o)?o:`_${e}`)+(!a&&n?"_fb":"")},a||(n?n():[]),a&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function T1(t){return t.some(e=>xi(e)?!(e.type===qr||e.type===Pe&&!T1(e.children)):!0)?t:null}function dP(t,e){const r={};for(const n in t)r[e&&/[A-Z]/.test(n)?`on:${n}`:Iu(n)]=t[n];return r}const Vg=t=>t?ET(t)?$d(t):Vg(t.parent):null,Ru=Er(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Vg(t.parent),$root:t=>Vg(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>w1(t),$forceUpdate:t=>t.f||(t.f=()=>{v1(t.update)}),$nextTick:t=>t.n||(t.n=ul.bind(t.proxy)),$watch:t=>HP.bind(t)}),tm=(t,e)=>t!==Jt&&!t.__isScriptSetup&&ur(t,e),Hg={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:a,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(tm(n,e))return a[e]=1,n[e];if(s!==Jt&&ur(s,e))return a[e]=2,s[e];if((c=t.propsOptions[0])&&ur(c,e))return a[e]=3,i[e];if(r!==Jt&&ur(r,e))return a[e]=4,r[e];jg&&(a[e]=0)}}const u=Ru[e];let f,h;if(u)return e==="$attrs"&&Gn(t.attrs,"get",""),u(t);if((f=o.__cssModules)&&(f=f[e]))return f;if(r!==Jt&&ur(r,e))return a[e]=4,r[e];if(h=l.config.globalProperties,ur(h,e))return h[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return tm(s,e)?(s[e]=r,!0):n!==Jt&&ur(n,e)?(n[e]=r,!0):ur(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},a){let o;return!!r[a]||t!==Jt&&ur(t,a)||tm(e,a)||(o=i[0])&&ur(o,a)||ur(n,a)||ur(Ru,a)||ur(s.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:ur(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}},fP=Er({},Hg,{get(t,e){if(e!==Symbol.unscopables)return Hg.get(t,e,t)},has(t,e){return e[0]!=="_"&&!$D(e)}});function hP(){return null}function pP(){return null}function mP(t){}function gP(t){}function vP(){return null}function yP(){}function xP(t,e){return null}function EP(){return jA().slots}function _P(){return jA().attrs}function jA(){const t=Xs();return t.setupContext||(t.setupContext=ST(t))}function fd(t){return dt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}function bP(t,e){const r=fd(t);for(const n in e){if(n.startsWith("__skip"))continue;let s=r[n];s?dt(s)||Tt(s)?s=r[n]={type:s,default:e[n]}:s.default=e[n]:s===null&&(s=r[n]={default:e[n]}),s&&e[`__skip_${n}`]&&(s.skipFactory=!0)}return r}function SP(t,e){return!t||!e?t||e:dt(t)&&dt(e)?t.concat(e):Er({},fd(t),fd(e))}function AP(t,e){const r={};for(const n in t)e.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>t[n]});return r}function TP(t){const e=Xs();let r=t();return Xg(),a1(r)&&(r=r.catch(n=>{throw Xo(e),n})),[r,()=>Xo(e)]}let jg=!0;function wP(t){const e=w1(t),r=t.proxy,n=t.ctx;jg=!1,e.beforeCreate&&wE(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:p,updated:g,activated:v,deactivated:y,beforeDestroy:b,beforeUnmount:E,destroyed:x,unmounted:w,render:P,renderTracked:R,renderTriggered:A,errorCaptured:_,serverPrefetch:m,expose:S,inheritAttrs:I,components:k,directives:C,filters:O}=e;if(c&&CP(c,n,null),a)for(const N in a){const M=a[N];Tt(M)&&(n[N]=M.bind(r))}if(s){const N=s.call(r,r);vr(N)&&(t.data=Fs(N))}if(jg=!0,i)for(const N in i){const M=i[N],L=Tt(M)?M.bind(r,r):Tt(M.get)?M.get.bind(r,r):js,z=!Tt(M)&&Tt(M.set)?M.set.bind(r):js,j=be({get:L,set:z});Object.defineProperty(n,N,{enumerable:!0,configurable:!0,get:()=>j.value,set:H=>j.value=H})}if(o)for(const N in o)GA(o[N],n,r,N);if(l){const N=Tt(l)?l.call(r):l;Reflect.ownKeys(N).forEach(M=>{Fu(M,N[M])})}u&&wE(u,t,"c");function F(N,M){dt(M)?M.forEach(L=>N(L.bind(r))):M&&N(M.bind(r))}if(F(MA,f),F(Wt,h),F(_1,p),F(Jh,g),F(FA,v),F(NA,y),F($A,_),F(UA,R),F(BA,A),F(Zh,E),F(Va,w),F(LA,m),dt(S))if(S.length){const N=t.exposed||(t.exposed={});S.forEach(M=>{Object.defineProperty(N,M,{get:()=>r[M],set:L=>r[M]=L})})}else t.exposed||(t.exposed={});P&&t.render===js&&(t.render=P),I!=null&&(t.inheritAttrs=I),k&&(t.components=k),C&&(t.directives=C),m&&E1(t)}function CP(t,e,r=js){dt(t)&&(t=Gg(t));for(const n in t){const s=t[n];let i;vr(s)?"default"in s?i=Ps(s.from||n,s.default,!0):i=Ps(s.from||n):i=Ps(s),Cr(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function wE(t,e,r){zs(dt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function GA(t,e,r,n){let s=n.includes(".")?cT(r,n):()=>r[n];if(Tr(t)){const i=e[t];Tt(i)&&Vt(s,i)}else if(Tt(t))Vt(s,t.bind(r));else if(vr(t))if(dt(t))t.forEach(i=>GA(i,e,r,n));else{const i=Tt(t.handler)?t.handler.bind(r):e[t.handler];Tt(i)&&Vt(s,i,t)}}function w1(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let l;return o?l=o:!s.length&&!r&&!n?l=e:(l={},s.length&&s.forEach(c=>H0(l,c,a,!0)),H0(l,e,a)),vr(e)&&i.set(e,l),l}function H0(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&H0(t,i,r,!0),s&&s.forEach(a=>H0(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=IP[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const IP={data:CE,props:IE,emits:IE,methods:mu,computed:mu,beforeCreate:ss,created:ss,beforeMount:ss,mounted:ss,beforeUpdate:ss,updated:ss,beforeDestroy:ss,beforeUnmount:ss,destroyed:ss,unmounted:ss,activated:ss,deactivated:ss,errorCaptured:ss,serverPrefetch:ss,components:mu,directives:mu,watch:DP,provide:CE,inject:kP};function CE(t,e){return e?t?function(){return Er(Tt(t)?t.call(this,this):t,Tt(e)?e.call(this,this):e)}:e:t}function kP(t,e){return mu(Gg(t),Gg(e))}function Gg(t){if(dt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function ss(t,e){return t?[...new Set([].concat(t,e))]:e}function mu(t,e){return t?Er(Object.create(null),t,e):e}function IE(t,e){return t?dt(t)&&dt(e)?[...new Set([...t,...e])]:Er(Object.create(null),fd(t),fd(e??{})):e}function DP(t,e){if(!t)return e;if(!e)return t;const r=Er(Object.create(null),t);for(const n in e)r[n]=ss(t[n],e[n]);return r}function WA(){return{app:null,config:{isNativeTag:FD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let PP=0;function RP(t,e){return function(n,s=null){Tt(n)||(n=Er({},n)),s!=null&&!vr(s)&&(s=null);const i=WA(),a=new WeakSet,o=[];let l=!1;const c=i.app={_uid:PP++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:TT,get config(){return i.config},set config(u){},use(u,...f){return a.has(u)||(u&&Tt(u.install)?(a.add(u),u.install(c,...f)):Tt(u)&&(a.add(u),u(c,...f))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,f){return f?(i.components[u]=f,c):i.components[u]},directive(u,f){return f?(i.directives[u]=f,c):i.directives[u]},mount(u,f,h){if(!l){const p=c._ceVNode||Oe(n,s);return p.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),f&&e?e(p,u):t(p,u,h),l=!0,c._container=u,u.__vue_app__=c,$d(p.component)}},onUnmount(u){o.push(u)},unmount(){l&&(zs(o,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return i.provides[u]=f,c},runWithContext(u){const f=$o;$o=c;try{return u()}finally{$o=f}}};return c}}let $o=null;function Fu(t,e){if(ln){let r=ln.provides;const n=ln.parent&&ln.parent.provides;n===r&&(r=ln.provides=Object.create(n)),r[t]=e}}function Ps(t,e,r=!1){const n=ln||cn;if(n||$o){let s=$o?$o._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&Tt(e)?e.call(n&&n.proxy):e}}function zA(){return!!(ln||cn||$o)}const KA={},qA=()=>Object.create(KA),XA=t=>Object.getPrototypeOf(t)===KA;function FP(t,e,r,n=!1){const s={},i=qA();t.propsDefaults=Object.create(null),YA(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);r?t.props=n?s:h1(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function NP(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,o=Xt(s),[l]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(ep(t.emitsOptions,h))continue;const p=e[h];if(l)if(ur(i,h))p!==i[h]&&(i[h]=p,c=!0);else{const g=kn(h);s[g]=Wg(l,o,g,p,t,!1)}else p!==i[h]&&(i[h]=p,c=!0)}}}else{YA(t,e,s,i)&&(c=!0);let u;for(const f in o)(!e||!ur(e,f)&&((u=Es(f))===f||!ur(e,u)))&&(l?r&&(r[f]!==void 0||r[u]!==void 0)&&(s[f]=Wg(l,o,f,void 0,t,!0)):delete s[f]);if(i!==o)for(const f in i)(!e||!ur(e,f))&&(delete i[f],c=!0)}c&&Ja(t.attrs,"set","")}function YA(t,e,r,n){const[s,i]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Jl(l))continue;const c=e[l];let u;s&&ur(s,u=kn(l))?!i||!i.includes(u)?r[u]=c:(o||(o={}))[u]=c:ep(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=Xt(r),c=o||Jt;for(let u=0;u<i.length;u++){const f=i[u];r[f]=Wg(s,l,f,c[f],t,!ur(c,f))}}return a}function Wg(t,e,r,n,s,i){const a=t[r];if(a!=null){const o=ur(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Tt(l)){const{propsDefaults:c}=s;if(r in c)n=c[r];else{const u=Xo(s);n=c[r]=l.call(null,e),u()}}else n=l;s.ce&&s.ce._setProp(r,n)}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===Es(r))&&(n=!0))}return n}const OP=new WeakMap;function QA(t,e,r=!1){const n=r?OP:e.propsCache,s=n.get(t);if(s)return s;const i=t.props,a={},o=[];let l=!1;if(!Tt(t)){const u=f=>{l=!0;const[h,p]=QA(f,e,!0);Er(a,h),p&&o.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return vr(t)&&n.set(t,Yl),Yl;if(dt(i))for(let u=0;u<i.length;u++){const f=kn(i[u]);kE(f)&&(a[f]=Jt)}else if(i)for(const u in i){const f=kn(u);if(kE(f)){const h=i[u],p=a[f]=dt(h)||Tt(h)?{type:h}:Er({},h),g=p.type;let v=!1,y=!0;if(dt(g))for(let b=0;b<g.length;++b){const E=g[b],x=Tt(E)&&E.name;if(x==="Boolean"){v=!0;break}else x==="String"&&(y=!1)}else v=Tt(g)&&g.name==="Boolean";p[0]=v,p[1]=y,(v||ur(p,"default"))&&o.push(f)}}const c=[a,o];return vr(t)&&n.set(t,c),c}function kE(t){return t[0]!=="$"&&!Jl(t)}const C1=t=>t[0]==="_"||t==="$stable",I1=t=>dt(t)?t.map(xs):[xs(t)],MP=(t,e,r)=>{if(e._n)return e;const n=Xh((...s)=>I1(e(...s)),r);return n._c=!1,n},JA=(t,e,r)=>{const n=t._ctx;for(const s in t){if(C1(s))continue;const i=t[s];if(Tt(i))e[s]=MP(s,i,n);else if(i!=null){const a=I1(i);e[s]=()=>a}}},ZA=(t,e)=>{const r=I1(e);t.slots.default=()=>r},eT=(t,e,r)=>{for(const n in e)(r||!C1(n))&&(t[n]=e[n])},LP=(t,e,r)=>{const n=t.slots=qA();if(t.vnode.shapeFlag&32){const s=e.__;s&&Mg(n,"__",s,!0);const i=e._;i?(eT(n,e,r),r&&Mg(n,"_",i,!0)):JA(e,n)}else e&&ZA(t,e)},BP=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,a=Jt;if(n.shapeFlag&32){const o=e._;o?r&&o===1?i=!1:eT(s,e,r):(i=!e.$stable,JA(e,s)),a=e}else e&&(ZA(t,e),a={default:1});if(i)for(const o in s)!C1(o)&&a[o]==null&&delete s[o]},an=hT;function tT(t){return nT(t)}function rT(t){return nT(t,q3)}function nT(t,e){const r=$h();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:p=js,insertStaticContent:g}=t,v=(X,Q,fe,ve=null,ie=null,ee=null,ge=void 0,Te=null,Ie=!!Q.dynamicChildren)=>{if(X===Q)return;X&&!sa(X,Q)&&(ve=se(X),H(X,ie,ee,!0),X=null),Q.patchFlag===-2&&(Ie=!1,Q.dynamicChildren=null);const{type:Ae,ref:We,shapeFlag:De}=Q;switch(Ae){case to:y(X,Q,fe,ve);break;case qr:b(X,Q,fe,ve);break;case Vo:X==null&&E(Q,fe,ve,ge);break;case Pe:k(X,Q,fe,ve,ie,ee,ge,Te,Ie);break;default:De&1?P(X,Q,fe,ve,ie,ee,ge,Te,Ie):De&6?C(X,Q,fe,ve,ie,ee,ge,Te,Ie):(De&64||De&128)&&Ae.process(X,Q,fe,ve,ie,ee,ge,Te,Ie,Z)}We!=null&&ie?tc(We,X&&X.ref,ee,Q||X,!Q):We==null&&X&&X.ref!=null&&tc(X.ref,null,ee,X,!0)},y=(X,Q,fe,ve)=>{if(X==null)n(Q.el=o(Q.children),fe,ve);else{const ie=Q.el=X.el;Q.children!==X.children&&c(ie,Q.children)}},b=(X,Q,fe,ve)=>{X==null?n(Q.el=l(Q.children||""),fe,ve):Q.el=X.el},E=(X,Q,fe,ve)=>{[X.el,X.anchor]=g(X.children,Q,fe,ve,X.el,X.anchor)},x=({el:X,anchor:Q},fe,ve)=>{let ie;for(;X&&X!==Q;)ie=h(X),n(X,fe,ve),X=ie;n(Q,fe,ve)},w=({el:X,anchor:Q})=>{let fe;for(;X&&X!==Q;)fe=h(X),s(X),X=fe;s(Q)},P=(X,Q,fe,ve,ie,ee,ge,Te,Ie)=>{Q.type==="svg"?ge="svg":Q.type==="math"&&(ge="mathml"),X==null?R(Q,fe,ve,ie,ee,ge,Te,Ie):m(X,Q,ie,ee,ge,Te,Ie)},R=(X,Q,fe,ve,ie,ee,ge,Te)=>{let Ie,Ae;const{props:We,shapeFlag:De,transition:He,dirs:$e}=X;if(Ie=X.el=a(X.type,ee,We&&We.is,We),De&8?u(Ie,X.children):De&16&&_(X.children,Ie,null,ve,ie,rm(X,ee),ge,Te),$e&&Ia(X,null,ve,"created"),A(Ie,X,X.scopeId,ge,ve),We){for(const Ke in We)Ke!=="value"&&!Jl(Ke)&&i(Ie,Ke,null,We[Ke],ee,ve);"value"in We&&i(Ie,"value",null,We.value,ee),(Ae=We.onVnodeBeforeMount)&&vs(Ae,ve,X)}$e&&Ia(X,null,ve,"beforeMount");const ke=sT(ie,He);ke&&He.beforeEnter(Ie),n(Ie,Q,fe),((Ae=We&&We.onVnodeMounted)||ke||$e)&&an(()=>{Ae&&vs(Ae,ve,X),ke&&He.enter(Ie),$e&&Ia(X,null,ve,"mounted")},ie)},A=(X,Q,fe,ve,ie)=>{if(fe&&p(X,fe),ve)for(let ee=0;ee<ve.length;ee++)p(X,ve[ee]);if(ie){let ee=ie.subTree;if(Q===ee||G0(ee.type)&&(ee.ssContent===Q||ee.ssFallback===Q)){const ge=ie.vnode;A(X,ge,ge.scopeId,ge.slotScopeIds,ie.parent)}}},_=(X,Q,fe,ve,ie,ee,ge,Te,Ie=0)=>{for(let Ae=Ie;Ae<X.length;Ae++){const We=X[Ae]=Te?Gi(X[Ae]):xs(X[Ae]);v(null,We,Q,fe,ve,ie,ee,ge,Te)}},m=(X,Q,fe,ve,ie,ee,ge)=>{const Te=Q.el=X.el;let{patchFlag:Ie,dynamicChildren:Ae,dirs:We}=Q;Ie|=X.patchFlag&16;const De=X.props||Jt,He=Q.props||Jt;let $e;if(fe&&wo(fe,!1),($e=He.onVnodeBeforeUpdate)&&vs($e,fe,Q,X),We&&Ia(Q,X,fe,"beforeUpdate"),fe&&wo(fe,!0),(De.innerHTML&&He.innerHTML==null||De.textContent&&He.textContent==null)&&u(Te,""),Ae?S(X.dynamicChildren,Ae,Te,fe,ve,rm(Q,ie),ee):ge||M(X,Q,Te,null,fe,ve,rm(Q,ie),ee,!1),Ie>0){if(Ie&16)I(Te,De,He,fe,ie);else if(Ie&2&&De.class!==He.class&&i(Te,"class",null,He.class,ie),Ie&4&&i(Te,"style",De.style,He.style,ie),Ie&8){const ke=Q.dynamicProps;for(let Ke=0;Ke<ke.length;Ke++){const _e=ke[Ke],Ee=De[_e],Se=He[_e];(Se!==Ee||_e==="value")&&i(Te,_e,Ee,Se,ie,fe)}}Ie&1&&X.children!==Q.children&&u(Te,Q.children)}else!ge&&Ae==null&&I(Te,De,He,fe,ie);(($e=He.onVnodeUpdated)||We)&&an(()=>{$e&&vs($e,fe,Q,X),We&&Ia(Q,X,fe,"updated")},ve)},S=(X,Q,fe,ve,ie,ee,ge)=>{for(let Te=0;Te<Q.length;Te++){const Ie=X[Te],Ae=Q[Te],We=Ie.el&&(Ie.type===Pe||!sa(Ie,Ae)||Ie.shapeFlag&198)?f(Ie.el):fe;v(Ie,Ae,We,null,ve,ie,ee,ge,!0)}},I=(X,Q,fe,ve,ie)=>{if(Q!==fe){if(Q!==Jt)for(const ee in Q)!Jl(ee)&&!(ee in fe)&&i(X,ee,Q[ee],null,ie,ve);for(const ee in fe){if(Jl(ee))continue;const ge=fe[ee],Te=Q[ee];ge!==Te&&ee!=="value"&&i(X,ee,Te,ge,ie,ve)}"value"in fe&&i(X,"value",Q.value,fe.value,ie)}},k=(X,Q,fe,ve,ie,ee,ge,Te,Ie)=>{const Ae=Q.el=X?X.el:o(""),We=Q.anchor=X?X.anchor:o("");let{patchFlag:De,dynamicChildren:He,slotScopeIds:$e}=Q;$e&&(Te=Te?Te.concat($e):$e),X==null?(n(Ae,fe,ve),n(We,fe,ve),_(Q.children||[],fe,We,ie,ee,ge,Te,Ie)):De>0&&De&64&&He&&X.dynamicChildren?(S(X.dynamicChildren,He,fe,ie,ee,ge,Te),(Q.key!=null||ie&&Q===ie.subTree)&&k1(X,Q,!0)):M(X,Q,fe,We,ie,ee,ge,Te,Ie)},C=(X,Q,fe,ve,ie,ee,ge,Te,Ie)=>{Q.slotScopeIds=Te,X==null?Q.shapeFlag&512?ie.ctx.activate(Q,fe,ve,ge,Ie):O(Q,fe,ve,ie,ee,ge,Ie):D(X,Q,Ie)},O=(X,Q,fe,ve,ie,ee,ge)=>{const Te=X.component=xT(X,ve,ie);if(Bd(X)&&(Te.ctx.renderer=Z),_T(Te,!1,ge),Te.asyncDep){if(ie&&ie.registerDep(Te,F,ge),!X.el){const Ie=Te.subTree=Oe(qr);b(null,Ie,Q,fe)}}else F(Te,X,Q,fe,ie,ee,ge)},D=(X,Q,fe)=>{const ve=Q.component=X.component;if(qP(X,Q,fe))if(ve.asyncDep&&!ve.asyncResolved){N(ve,Q,fe);return}else ve.next=Q,ve.update();else Q.el=X.el,ve.vnode=Q},F=(X,Q,fe,ve,ie,ee,ge)=>{const Te=()=>{if(X.isMounted){let{next:De,bu:He,u:$e,parent:ke,vnode:Ke}=X;{const ze=aT(X);if(ze){De&&(De.el=Ke.el,N(X,De,ge)),ze.asyncDep.then(()=>{X.isUnmounted||Te()});return}}let _e=De,Ee;wo(X,!1),De?(De.el=Ke.el,N(X,De,ge)):De=Ke,He&&Zl(He),(Ee=De.props&&De.props.onVnodeBeforeUpdate)&&vs(Ee,ke,De,Ke),wo(X,!0);const Se=p0(X),Me=X.subTree;X.subTree=Se,v(Me,Se,f(Me.el),se(Me),X,ie,ee),De.el=Se.el,_e===null&&tp(X,Se.el),$e&&an($e,ie),(Ee=De.props&&De.props.onVnodeUpdated)&&an(()=>vs(Ee,ke,De,Ke),ie)}else{let De;const{el:He,props:$e}=Q,{bm:ke,m:Ke,parent:_e,root:Ee,type:Se}=X,Me=eo(Q);if(wo(X,!1),ke&&Zl(ke),!Me&&(De=$e&&$e.onVnodeBeforeMount)&&vs(De,_e,Q),wo(X,!0),He&&J){const ze=()=>{X.subTree=p0(X),J(He,X.subTree,X,ie,null)};Me&&Se.__asyncHydrate?Se.__asyncHydrate(He,X,ze):ze()}else{Ee.ce&&Ee.ce._def.shadowRoot!==!1&&Ee.ce._injectChildStyle(Se);const ze=X.subTree=p0(X);v(null,ze,fe,ve,X,ie,ee),Q.el=ze.el}if(Ke&&an(Ke,ie),!Me&&(De=$e&&$e.onVnodeMounted)){const ze=Q;an(()=>vs(De,_e,ze),ie)}(Q.shapeFlag&256||_e&&eo(_e.vnode)&&_e.vnode.shapeFlag&256)&&X.a&&an(X.a,ie),X.isMounted=!0,Q=fe=ve=null}};X.scope.on();const Ie=X.effect=new id(Te);X.scope.off();const Ae=X.update=Ie.run.bind(Ie),We=X.job=Ie.runIfDirty.bind(Ie);We.i=X,We.id=X.uid,Ie.scheduler=()=>v1(We),wo(X,!0),Ae()},N=(X,Q,fe)=>{Q.component=X;const ve=X.vnode.props;X.vnode=Q,X.next=null,NP(X,Q.props,ve,fe),BP(X,Q.children,fe),mi(),yE(X),gi()},M=(X,Q,fe,ve,ie,ee,ge,Te,Ie=!1)=>{const Ae=X&&X.children,We=X?X.shapeFlag:0,De=Q.children,{patchFlag:He,shapeFlag:$e}=Q;if(He>0){if(He&128){z(Ae,De,fe,ve,ie,ee,ge,Te,Ie);return}else if(He&256){L(Ae,De,fe,ve,ie,ee,ge,Te,Ie);return}}$e&8?(We&16&&de(Ae,ie,ee),De!==Ae&&u(fe,De)):We&16?$e&16?z(Ae,De,fe,ve,ie,ee,ge,Te,Ie):de(Ae,ie,ee,!0):(We&8&&u(fe,""),$e&16&&_(De,fe,ve,ie,ee,ge,Te,Ie))},L=(X,Q,fe,ve,ie,ee,ge,Te,Ie)=>{X=X||Yl,Q=Q||Yl;const Ae=X.length,We=Q.length,De=Math.min(Ae,We);let He;for(He=0;He<De;He++){const $e=Q[He]=Ie?Gi(Q[He]):xs(Q[He]);v(X[He],$e,fe,null,ie,ee,ge,Te,Ie)}Ae>We?de(X,ie,ee,!0,!1,De):_(Q,fe,ve,ie,ee,ge,Te,Ie,De)},z=(X,Q,fe,ve,ie,ee,ge,Te,Ie)=>{let Ae=0;const We=Q.length;let De=X.length-1,He=We-1;for(;Ae<=De&&Ae<=He;){const $e=X[Ae],ke=Q[Ae]=Ie?Gi(Q[Ae]):xs(Q[Ae]);if(sa($e,ke))v($e,ke,fe,null,ie,ee,ge,Te,Ie);else break;Ae++}for(;Ae<=De&&Ae<=He;){const $e=X[De],ke=Q[He]=Ie?Gi(Q[He]):xs(Q[He]);if(sa($e,ke))v($e,ke,fe,null,ie,ee,ge,Te,Ie);else break;De--,He--}if(Ae>De){if(Ae<=He){const $e=He+1,ke=$e<We?Q[$e].el:ve;for(;Ae<=He;)v(null,Q[Ae]=Ie?Gi(Q[Ae]):xs(Q[Ae]),fe,ke,ie,ee,ge,Te,Ie),Ae++}}else if(Ae>He)for(;Ae<=De;)H(X[Ae],ie,ee,!0),Ae++;else{const $e=Ae,ke=Ae,Ke=new Map;for(Ae=ke;Ae<=He;Ae++){const bt=Q[Ae]=Ie?Gi(Q[Ae]):xs(Q[Ae]);bt.key!=null&&Ke.set(bt.key,Ae)}let _e,Ee=0;const Se=He-ke+1;let Me=!1,ze=0;const lt=new Array(Se);for(Ae=0;Ae<Se;Ae++)lt[Ae]=0;for(Ae=$e;Ae<=De;Ae++){const bt=X[Ae];if(Ee>=Se){H(bt,ie,ee,!0);continue}let $t;if(bt.key!=null)$t=Ke.get(bt.key);else for(_e=ke;_e<=He;_e++)if(lt[_e-ke]===0&&sa(bt,Q[_e])){$t=_e;break}$t===void 0?H(bt,ie,ee,!0):(lt[$t-ke]=Ae+1,$t>=ze?ze=$t:Me=!0,v(bt,Q[$t],fe,null,ie,ee,ge,Te,Ie),Ee++)}const vt=Me?UP(lt):Yl;for(_e=vt.length-1,Ae=Se-1;Ae>=0;Ae--){const bt=ke+Ae,$t=Q[bt],ft=bt+1<We?Q[bt+1].el:ve;lt[Ae]===0?v(null,$t,fe,ft,ie,ee,ge,Te,Ie):Me&&(_e<0||Ae!==vt[_e]?j($t,fe,ft,2):_e--)}}},j=(X,Q,fe,ve,ie=null)=>{const{el:ee,type:ge,transition:Te,children:Ie,shapeFlag:Ae}=X;if(Ae&6){j(X.component.subTree,Q,fe,ve);return}if(Ae&128){X.suspense.move(Q,fe,ve);return}if(Ae&64){ge.move(X,Q,fe,Z);return}if(ge===Pe){n(ee,Q,fe);for(let De=0;De<Ie.length;De++)j(Ie[De],Q,fe,ve);n(X.anchor,Q,fe);return}if(ge===Vo){x(X,Q,fe);return}if(ve!==2&&Ae&1&&Te)if(ve===0)Te.beforeEnter(ee),n(ee,Q,fe),an(()=>Te.enter(ee),ie);else{const{leave:De,delayLeave:He,afterLeave:$e}=Te,ke=()=>{X.ctx.isUnmounted?s(ee):n(ee,Q,fe)},Ke=()=>{De(ee,()=>{ke(),$e&&$e()})};He?He(ee,ke,Ke):Ke()}else n(ee,Q,fe)},H=(X,Q,fe,ve=!1,ie=!1)=>{const{type:ee,props:ge,ref:Te,children:Ie,dynamicChildren:Ae,shapeFlag:We,patchFlag:De,dirs:He,cacheIndex:$e}=X;if(De===-2&&(ie=!1),Te!=null&&(mi(),tc(Te,null,fe,X,!0),gi()),$e!=null&&(Q.renderCache[$e]=void 0),We&256){Q.ctx.deactivate(X);return}const ke=We&1&&He,Ke=!eo(X);let _e;if(Ke&&(_e=ge&&ge.onVnodeBeforeUnmount)&&vs(_e,Q,X),We&6)ne(X.component,fe,ve);else{if(We&128){X.suspense.unmount(fe,ve);return}ke&&Ia(X,null,Q,"beforeUnmount"),We&64?X.type.remove(X,Q,fe,Z,ve):Ae&&!Ae.hasOnce&&(ee!==Pe||De>0&&De&64)?de(Ae,Q,fe,!1,!0):(ee===Pe&&De&384||!ie&&We&16)&&de(Ie,Q,fe),ve&&G(X)}(Ke&&(_e=ge&&ge.onVnodeUnmounted)||ke)&&an(()=>{_e&&vs(_e,Q,X),ke&&Ia(X,null,Q,"unmounted")},fe)},G=X=>{const{type:Q,el:fe,anchor:ve,transition:ie}=X;if(Q===Pe){W(fe,ve);return}if(Q===Vo){w(X);return}const ee=()=>{s(fe),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(X.shapeFlag&1&&ie&&!ie.persisted){const{leave:ge,delayLeave:Te}=ie,Ie=()=>ge(fe,ee);Te?Te(X.el,ee,Ie):Ie()}else ee()},W=(X,Q)=>{let fe;for(;X!==Q;)fe=h(X),s(X),X=fe;s(Q)},ne=(X,Q,fe)=>{const{bum:ve,scope:ie,job:ee,subTree:ge,um:Te,m:Ie,a:Ae,parent:We,slots:{__:De}}=X;j0(Ie),j0(Ae),ve&&Zl(ve),We&&dt(De)&&De.forEach(He=>{We.renderCache[He]=void 0}),ie.stop(),ee&&(ee.flags|=8,H(ge,X,Q,fe)),Te&&an(Te,Q),an(()=>{X.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&X.asyncDep&&!X.asyncResolved&&X.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},de=(X,Q,fe,ve=!1,ie=!1,ee=0)=>{for(let ge=ee;ge<X.length;ge++)H(X[ge],Q,fe,ve,ie)},se=X=>{if(X.shapeFlag&6)return se(X.component.subTree);if(X.shapeFlag&128)return X.suspense.next();const Q=h(X.anchor||X.el),fe=Q&&Q[TA];return fe?h(fe):Q};let ce=!1;const te=(X,Q,fe)=>{X==null?Q._vnode&&H(Q._vnode,null,null,!0):v(Q._vnode||null,X,Q,null,null,null,fe),Q._vnode=X,ce||(ce=!0,yE(),V0(),ce=!1)},Z={p:v,um:H,m:j,r:G,mt:O,mc:_,pc:M,pbc:S,n:se,o:t};let ye,J;return e&&([ye,J]=e(Z)),{render:te,hydrate:ye,createApp:RP(te,ye)}}function rm({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function wo({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function sT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function k1(t,e,r=!1){const n=t.children,s=e.children;if(dt(n)&&dt(s))for(let i=0;i<n.length;i++){const a=n[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=Gi(s[i]),o.el=a.el),!r&&o.patchFlag!==-2&&k1(a,o)),o.type===to&&(o.el=a.el),o.type===qr&&!o.el&&(o.el=a.el)}}function UP(t){const e=t.slice(),r=[0];let n,s,i,a,o;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=r[r.length-1],t[s]<c){e[n]=s,r.push(n);continue}for(i=0,a=r.length-1;i<a;)o=i+a>>1,t[r[o]]<c?i=o+1:a=o;c<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,a=r[i-1];i-- >0;)r[i]=a,a=e[a];return r}function aT(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:aT(e)}function j0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const iT=Symbol.for("v-scx"),oT=()=>Ps(iT);function $P(t,e){return Ud(t,null,e)}function VP(t,e){return Ud(t,null,{flush:"post"})}function lT(t,e){return Ud(t,null,{flush:"sync"})}function Vt(t,e,r){return Ud(t,e,r)}function Ud(t,e,r=Jt){const{immediate:n,deep:s,flush:i,once:a}=r,o=Er({},r),l=e&&n||!e&&i!=="post";let c;if(gc){if(i==="sync"){const p=oT();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=js,p.resume=js,p.pause=js,p}}const u=ln;o.call=(p,g,v)=>zs(p,u,g,v);let f=!1;i==="post"?o.scheduler=p=>{an(p,u&&u.suspense)}:i!=="sync"&&(f=!0,o.scheduler=(p,g)=>{g?p():v1(p)}),o.augmentJob=p=>{e&&(p.flags|=4),f&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=D3(t,e,o);return gc&&(c?c.push(h):l&&h()),h}function HP(t,e,r){const n=this.proxy,s=Tr(t)?t.includes(".")?cT(n,t):()=>n[t]:t.bind(n,n);let i;Tt(e)?i=e:(i=e.handler,r=e);const a=Xo(this),o=Ud(s,i.bind(n),r);return a(),o}function cT(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}function jP(t,e,r=Jt){const n=Xs(),s=kn(e),i=Es(e),a=uT(t,s),o=gA((l,c)=>{let u,f=Jt,h;return lT(()=>{const p=t[s];os(u,p)&&(u=p,c())}),{get(){return l(),r.get?r.get(u):u},set(p){const g=r.set?r.set(p):p;if(!os(g,u)&&!(f!==Jt&&os(p,f)))return;const v=n.vnode.props;v&&(e in v||s in v||i in v)&&(`onUpdate:${e}`in v||`onUpdate:${s}`in v||`onUpdate:${i}`in v)||(u=p,c()),n.emit(`update:${e}`,g),os(p,g)&&os(p,f)&&!os(g,h)&&c(),f=p,h=g}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||Jt:o,done:!1}:{done:!0}}}},o}const uT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${kn(e)}Modifiers`]||t[`${Es(e)}Modifiers`];function GP(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Jt;let s=r;const i=e.startsWith("update:"),a=i&&uT(n,e.slice(7));a&&(a.trim&&(s=r.map(u=>Tr(u)?u.trim():u)),a.number&&(s=r.map(O0)));let o,l=n[o=Iu(e)]||n[o=Iu(kn(e))];!l&&i&&(l=n[o=Iu(Es(e))]),l&&zs(l,t,6,s);const c=n[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,zs(c,t,6,s)}}function dT(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let a={},o=!1;if(!Tt(t)){const l=c=>{const u=dT(c,e,!0);u&&(o=!0,Er(a,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!o?(vr(t)&&n.set(t,null),null):(dt(i)?i.forEach(l=>a[l]=null):Er(a,i),vr(t)&&n.set(t,a),a)}function ep(t,e){return!t||!Od(e)?!1:(e=e.slice(2).replace(/Once$/,""),ur(t,e[0].toLowerCase()+e.slice(1))||ur(t,Es(e))||ur(t,e))}function p0(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:f,data:h,setupState:p,ctx:g,inheritAttrs:v}=t,y=dd(t);let b,E;try{if(r.shapeFlag&4){const w=s||n,P=w;b=xs(c.call(P,w,u,f,p,h,g)),E=o}else{const w=e;b=xs(w.length>1?w(f,{attrs:o,slots:a,emit:l}):w(f,null)),E=e.props?o:zP(o)}}catch(w){Nu.length=0,cl(w,t,1),b=Oe(qr)}let x=b;if(E&&v!==!1){const w=Object.keys(E),{shapeFlag:P}=x;w.length&&P&7&&(i&&w.some(n1)&&(E=KP(E,i)),x=Ma(x,E,!1,!0))}return r.dirs&&(x=Ma(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&yi(x,r.transition),b=x,dd(y),b}function WP(t,e=!0){let r;for(let n=0;n<t.length;n++){const s=t[n];if(xi(s)){if(s.type!==qr||s.children==="v-if"){if(r)return;r=s}}else return}return r}const zP=t=>{let e;for(const r in t)(r==="class"||r==="style"||Od(r))&&((e||(e={}))[r]=t[r]);return e},KP=(t,e)=>{const r={};for(const n in t)(!n1(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function qP(t,e,r){const{props:n,children:s,component:i}=t,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?DE(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(a[h]!==n[h]&&!ep(c,h))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?DE(n,a,c):!0:!!a;return!1}function DE(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!ep(r,i))return!0}return!1}function tp({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const G0=t=>t.__isSuspense;let zg=0;const XP={name:"Suspense",__isSuspense:!0,process(t,e,r,n,s,i,a,o,l,c){if(t==null)QP(e,r,n,s,i,a,o,l,c);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}JP(t,e,r,n,s,a,o,l,c)}},hydrate:ZP,normalize:eR},YP=XP;function hd(t,e){const r=t.props&&t.props[e];Tt(r)&&r()}function QP(t,e,r,n,s,i,a,o,l){const{p:c,o:{createElement:u}}=l,f=u("div"),h=t.suspense=fT(t,s,n,e,f,r,i,a,o,l);c(null,h.pendingBranch=t.ssContent,f,null,n,h,i,a),h.deps>0?(hd(t,"onPending"),hd(t,"onFallback"),c(null,t.ssFallback,e,r,n,null,i,a),rc(h,t.ssFallback)):h.resolve(!1,!0)}function JP(t,e,r,n,s,i,a,o,{p:l,um:c,o:{createElement:u}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const h=e.ssContent,p=e.ssFallback,{activeBranch:g,pendingBranch:v,isInFallback:y,isHydrating:b}=f;if(v)f.pendingBranch=h,sa(h,v)?(l(v,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0?f.resolve():y&&(b||(l(g,p,r,n,s,null,i,a,o),rc(f,p)))):(f.pendingId=zg++,b?(f.isHydrating=!1,f.activeBranch=v):c(v,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=u("div"),y?(l(null,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0?f.resolve():(l(g,p,r,n,s,null,i,a,o),rc(f,p))):g&&sa(h,g)?(l(g,h,r,n,s,f,i,a,o),f.resolve(!0)):(l(null,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0&&f.resolve()));else if(g&&sa(h,g))l(g,h,r,n,s,f,i,a,o),rc(f,h);else if(hd(e,"onPending"),f.pendingBranch=h,h.shapeFlag&512?f.pendingId=h.component.suspenseId:f.pendingId=zg++,l(null,h,f.hiddenContainer,null,s,f,i,a,o),f.deps<=0)f.resolve();else{const{timeout:E,pendingId:x}=f;E>0?setTimeout(()=>{f.pendingId===x&&f.fallback(p)},E):E===0&&f.fallback(p)}}function fT(t,e,r,n,s,i,a,o,l,c,u=!1){const{p:f,m:h,um:p,n:g,o:{parentNode:v,remove:y}}=c;let b;const E=tR(t);E&&e&&e.pendingBranch&&(b=e.pendingId,e.deps++);const x=t.props?M0(t.props.timeout):void 0,w=i,P={vnode:t,parent:e,parentComponent:r,namespace:a,container:n,hiddenContainer:s,deps:0,pendingId:zg++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(R=!1,A=!1){const{vnode:_,activeBranch:m,pendingBranch:S,pendingId:I,effects:k,parentComponent:C,container:O}=P;let D=!1;P.isHydrating?P.isHydrating=!1:R||(D=m&&S.transition&&S.transition.mode==="out-in",D&&(m.transition.afterLeave=()=>{I===P.pendingId&&(h(S,O,i===w?g(m):i,0),cd(k))}),m&&(v(m.el)===O&&(i=g(m)),p(m,C,P,!0)),D||h(S,O,i,0)),rc(P,S),P.pendingBranch=null,P.isInFallback=!1;let F=P.parent,N=!1;for(;F;){if(F.pendingBranch){F.effects.push(...k),N=!0;break}F=F.parent}!N&&!D&&cd(k),P.effects=[],E&&e&&e.pendingBranch&&b===e.pendingId&&(e.deps--,e.deps===0&&!A&&e.resolve()),hd(_,"onResolve")},fallback(R){if(!P.pendingBranch)return;const{vnode:A,activeBranch:_,parentComponent:m,container:S,namespace:I}=P;hd(A,"onFallback");const k=g(_),C=()=>{P.isInFallback&&(f(null,R,S,k,m,null,I,o,l),rc(P,R))},O=R.transition&&R.transition.mode==="out-in";O&&(_.transition.afterLeave=C),P.isInFallback=!0,p(_,m,null,!0),O||C()},move(R,A,_){P.activeBranch&&h(P.activeBranch,R,A,_),P.container=R},next(){return P.activeBranch&&g(P.activeBranch)},registerDep(R,A,_){const m=!!P.pendingBranch;m&&P.deps++;const S=R.vnode.el;R.asyncDep.catch(I=>{cl(I,R,0)}).then(I=>{if(R.isUnmounted||P.isUnmounted||P.pendingId!==R.suspenseId)return;R.asyncResolved=!0;const{vnode:k}=R;Yg(R,I,!1),S&&(k.el=S);const C=!S&&R.subTree.el;A(R,k,v(S||R.subTree.el),S?null:g(R.subTree),P,a,_),C&&y(C),tp(R,k.el),m&&--P.deps===0&&P.resolve()})},unmount(R,A){P.isUnmounted=!0,P.activeBranch&&p(P.activeBranch,r,R,A),P.pendingBranch&&p(P.pendingBranch,r,R,A)}};return P}function ZP(t,e,r,n,s,i,a,o,l){const c=e.suspense=fT(e,n,r,t.parentNode,document.createElement("div"),null,s,i,a,o,!0),u=l(t,c.pendingBranch=e.ssContent,r,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function eR(t){const{shapeFlag:e,children:r}=t,n=e&32;t.ssContent=PE(n?r.default:r),t.ssFallback=n?PE(r.fallback):Oe(qr)}function PE(t){let e;if(Tt(t)){const r=qo&&t._c;r&&(t._d=!1,B()),t=t(),r&&(t._d=!0,e=qn,pT())}return dt(t)&&(t=WP(t)),t=xs(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(r=>r!==t)),t}function hT(t,e){e&&e.pendingBranch?dt(t)?e.effects.push(...t):e.effects.push(t):cd(t)}function rc(t,e){t.activeBranch=e;const{vnode:r,parentComponent:n}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;r.el=s,n&&n.subTree===r&&(n.vnode.el=s,tp(n,s))}function tR(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Pe=Symbol.for("v-fgt"),to=Symbol.for("v-txt"),qr=Symbol.for("v-cmt"),Vo=Symbol.for("v-stc"),Nu=[];let qn=null;function B(t=!1){Nu.push(qn=t?null:[])}function pT(){Nu.pop(),qn=Nu[Nu.length-1]||null}let qo=1;function Kg(t,e=!1){qo+=t,t<0&&qn&&e&&(qn.hasOnce=!0)}function mT(t){return t.dynamicChildren=qo>0?qn||Yl:null,pT(),qo>0&&qn&&qn.push(t),t}function U(t,e,r,n,s,i){return mT(d(t,e,r,n,s,i,!0))}function Qt(t,e,r,n,s){return mT(Oe(t,e,r,n,s,!0))}function xi(t){return t?t.__v_isVNode===!0:!1}function sa(t,e){return t.type===e.type&&t.key===e.key}function rR(t){}const gT=({key:t})=>t??null,m0=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Tr(t)||Cr(t)||Tt(t)?{i:cn,r:t,k:e,f:!!r}:t:null);function d(t,e=null,r=null,n=0,s=null,i=t===Pe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&gT(e),ref:e&&m0(e),scopeId:qh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:cn};return o?(D1(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=Tr(r)?8:16),qo>0&&!a&&qn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&qn.push(l),l}const Oe=nR;function nR(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===VA)&&(t=qr),xi(t)){const o=Ma(t,e,!0);return r&&D1(o,r),qo>0&&!i&&qn&&(o.shapeFlag&6?qn[qn.indexOf(t)]=o:qn.push(o)),o.patchFlag=-2,o}if(uR(t)&&(t=t.__vccOpts),e){e=vT(e);let{class:o,style:l}=e;o&&!Tr(o)&&(e.class=Qe(o)),vr(l)&&(zh(l)&&!dt(l)&&(l=Er({},l)),e.style=Nr(l))}const a=Tr(t)?1:G0(t)?128:wA(t)?64:vr(t)?4:Tt(t)?2:0;return d(t,e,r,n,s,a,i,!0)}function vT(t){return t?zh(t)||XA(t)?Er({},t):t:null}function Ma(t,e,r=!1,n=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=t,c=e?yT(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&gT(c),ref:e&&e.ref?r&&i?dt(i)?i.concat(m0(e)):[i,m0(e)]:m0(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ma(t.ssContent),ssFallback:t.ssFallback&&Ma(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&yi(u,l.clone(u)),u}function we(t=" ",e=0){return Oe(to,null,t,e)}function Dn(t,e){const r=Oe(Vo,null,t);return r.staticCount=e,r}function xe(t="",e=!1){return e?(B(),Qt(qr,null,t)):Oe(qr,null,t)}function xs(t){return t==null||typeof t=="boolean"?Oe(qr):dt(t)?Oe(Pe,null,t.slice()):xi(t)?Gi(t):Oe(to,null,String(t))}function Gi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ma(t)}function D1(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(dt(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),D1(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!XA(e)?e._ctx=cn:s===3&&cn&&(cn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Tt(e)?(e={default:e,_ctx:cn},r=32):(e=String(e),n&64?(r=16,e=[we(e)]):r=8);t.children=e,t.shapeFlag|=r}function yT(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Qe([e.class,n.class]));else if(s==="style")e.style=Nr([e.style,n.style]);else if(Od(s)){const i=e[s],a=n[s];a&&i!==a&&!(dt(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=n[s])}return e}function vs(t,e,r,n=null){zs(t,e,7,[r,n])}const sR=WA();let aR=0;function xT(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||sR,i={uid:aR++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new o1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:QA(n,s),emitsOptions:dT(n,s),emit:null,emitted:null,propsDefaults:Jt,inheritAttrs:n.inheritAttrs,ctx:Jt,data:Jt,props:Jt,attrs:Jt,slots:Jt,refs:Jt,setupState:Jt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=GP.bind(null,i),t.ce&&t.ce(i),i}let ln=null;const Xs=()=>ln||cn;let W0,qg;{const t=$h(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};W0=e("__VUE_INSTANCE_SETTERS__",r=>ln=r),qg=e("__VUE_SSR_SETTERS__",r=>gc=r)}const Xo=t=>{const e=ln;return W0(t),t.scope.on(),()=>{t.scope.off(),W0(e)}},Xg=()=>{ln&&ln.scope.off(),W0(null)};function ET(t){return t.vnode.shapeFlag&4}let gc=!1;function _T(t,e=!1,r=!1){e&&qg(e);const{props:n,children:s}=t.vnode,i=ET(t);FP(t,n,i,e),LP(t,s,r||e);const a=i?iR(t,e):void 0;return e&&qg(!1),a}function iR(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Hg);const{setup:n}=r;if(n){mi();const s=t.setupContext=n.length>1?ST(t):null,i=Xo(t),a=Nc(n,t,0,[t.props,s]),o=a1(a);if(gi(),i(),(o||t.sp)&&!eo(t)&&E1(t),o){if(a.then(Xg,Xg),e)return a.then(l=>{Yg(t,l,e)}).catch(l=>{cl(l,t,0)});t.asyncDep=a}else Yg(t,a,e)}else bT(t,e)}function Yg(t,e,r){Tt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:vr(e)&&(t.setupState=g1(e)),bT(t,r)}let z0,Qg;function oR(t){z0=t,Qg=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,fP))}}const lR=()=>!z0;function bT(t,e,r){const n=t.type;if(!t.render){if(!e&&z0&&!n.render){const s=n.template||w1(t).template;if(s){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,c=Er(Er({isCustomElement:i,delimiters:o},a),l);n.render=z0(s,c)}}t.render=n.render||js,Qg&&Qg(t)}{const s=Xo(t);mi();try{wP(t)}finally{gi(),s()}}}const cR={get(t,e){return Gn(t,"get",""),t[e]}};function ST(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,cR),slots:t.slots,emit:t.emit,expose:e}}function $d(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(g1(Kh(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Ru)return Ru[r](t)},has(e,r){return r in e||r in Ru}})):t.proxy}function Jg(t,e=!0){return Tt(t)?t.displayName||t.name:t.name||e&&t.__name}function uR(t){return Tt(t)&&"__vccOpts"in t}const be=(t,e)=>w3(t,e,gc);function Yo(t,e,r){const n=arguments.length;return n===2?vr(e)&&!dt(e)?xi(e)?Oe(t,null,[e]):Oe(t,e):Oe(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&xi(r)&&(r=[r]),Oe(t,e,r))}function dR(){}function fR(t,e,r,n){const s=r[n];if(s&&AT(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=n,r[n]=i}function AT(t,e){const r=t.memo;if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(os(r[n],e[n]))return!1;return qo>0&&qn&&qn.push(t),!0}const TT="3.5.17",hR=js,pR=O3,mR=Bl,gR=AA,vR={createComponentInstance:xT,setupComponent:_T,renderComponentRoot:p0,setCurrentRenderingInstance:dd,isVNode:xi,normalizeVNode:xs,getComponentPublicInstance:$d,ensureValidVNode:T1,pushWarningContext:P3,popWarningContext:R3},yR=vR,xR=null,ER=null,_R=null;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zg;const RE=typeof window<"u"&&window.trustedTypes;if(RE)try{Zg=RE.createPolicy("vue",{createHTML:t=>t})}catch{}const wT=Zg?t=>Zg.createHTML(t):t=>t,bR="http://www.w3.org/2000/svg",SR="http://www.w3.org/1998/Math/MathML",Qa=typeof document<"u"?document:null,FE=Qa&&Qa.createElement("template"),AR={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?Qa.createElementNS(bR,t):e==="mathml"?Qa.createElementNS(SR,t):r?Qa.createElement(t,{is:r}):Qa.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>Qa.createTextNode(t),createComment:t=>Qa.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qa.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const a=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{FE.innerHTML=wT(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=FE.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Oi="transition",tu="animation",vc=Symbol("_vtc"),CT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},IT=Er({},x1,CT),TR=t=>(t.displayName="Transition",t.props=IT,t),wR=TR((t,{slots:e})=>Yo(PA,kT(t),e)),Co=(t,e=[])=>{dt(t)?t.forEach(r=>r(...e)):t&&t(...e)},NE=t=>t?dt(t)?t.some(e=>e.length>1):t.length>1:!1;function kT(t){const e={};for(const k in t)k in CT||(e[k]=t[k]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=i,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,g=CR(s),v=g&&g[0],y=g&&g[1],{onBeforeEnter:b,onEnter:E,onEnterCancelled:x,onLeave:w,onLeaveCancelled:P,onBeforeAppear:R=b,onAppear:A=E,onAppearCancelled:_=x}=e,m=(k,C,O,D)=>{k._enterCancelled=D,Ui(k,C?u:o),Ui(k,C?c:a),O&&O()},S=(k,C)=>{k._isLeaving=!1,Ui(k,f),Ui(k,p),Ui(k,h),C&&C()},I=k=>(C,O)=>{const D=k?A:E,F=()=>m(C,k,O);Co(D,[C,F]),OE(()=>{Ui(C,k?l:i),Ta(C,k?u:o),NE(D)||ME(C,n,v,F)})};return Er(e,{onBeforeEnter(k){Co(b,[k]),Ta(k,i),Ta(k,a)},onBeforeAppear(k){Co(R,[k]),Ta(k,l),Ta(k,c)},onEnter:I(!1),onAppear:I(!0),onLeave(k,C){k._isLeaving=!0;const O=()=>S(k,C);Ta(k,f),k._enterCancelled?(Ta(k,h),ev()):(ev(),Ta(k,h)),OE(()=>{k._isLeaving&&(Ui(k,f),Ta(k,p),NE(w)||ME(k,n,y,O))}),Co(w,[k,O])},onEnterCancelled(k){m(k,!1,void 0,!0),Co(x,[k])},onAppearCancelled(k){m(k,!0,void 0,!0),Co(_,[k])},onLeaveCancelled(k){S(k),Co(P,[k])}})}function CR(t){if(t==null)return null;if(vr(t))return[nm(t.enter),nm(t.leave)];{const e=nm(t);return[e,e]}}function nm(t){return M0(t)}function Ta(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[vc]||(t[vc]=new Set)).add(e)}function Ui(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[vc];r&&(r.delete(e),r.size||(t[vc]=void 0))}function OE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let IR=0;function ME(t,e,r,n){const s=t._endId=++IR,i=()=>{s===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:a,timeout:o,propCount:l}=DT(t,e);if(!a)return n();const c=a+"end";let u=0;const f=()=>{t.removeEventListener(c,h),i()},h=p=>{p.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},o+1),t.addEventListener(c,h)}function DT(t,e){const r=window.getComputedStyle(t),n=g=>(r[g]||"").split(", "),s=n(`${Oi}Delay`),i=n(`${Oi}Duration`),a=LE(s,i),o=n(`${tu}Delay`),l=n(`${tu}Duration`),c=LE(o,l);let u=null,f=0,h=0;e===Oi?a>0&&(u=Oi,f=a,h=i.length):e===tu?c>0&&(u=tu,f=c,h=l.length):(f=Math.max(a,c),u=f>0?a>c?Oi:tu:null,h=u?u===Oi?i.length:l.length:0);const p=u===Oi&&/\b(transform|all)(,|$)/.test(n(`${Oi}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:p}}function LE(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>BE(r)+BE(t[n])))}function BE(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ev(){return document.body.offsetHeight}function kR(t,e,r){const n=t[vc];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const K0=Symbol("_vod"),PT=Symbol("_vsh"),RT={beforeMount(t,{value:e},{transition:r}){t[K0]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):ru(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),ru(t,!0),n.enter(t)):n.leave(t,()=>{ru(t,!1)}):ru(t,e))},beforeUnmount(t,{value:e}){ru(t,e)}};function ru(t,e){t.style.display=e?t[K0]:"none",t[PT]=!e}function DR(){RT.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const FT=Symbol("");function PR(t){const e=Xs();if(!e)return;const r=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>q0(i,s))},n=()=>{const s=t(e.proxy);e.ce?q0(e.ce,s):tv(e.subTree,s),r(s)};_1(()=>{cd(n)}),Wt(()=>{Vt(n,js,{flush:"post"});const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),Va(()=>s.disconnect())})}function tv(t,e){if(t.shapeFlag&128){const r=t.suspense;t=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{tv(r.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)q0(t.el,e);else if(t.type===Pe)t.children.forEach(r=>tv(r,e));else if(t.type===Vo){let{el:r,anchor:n}=t;for(;r&&(q0(r,e),r!==n);)r=r.nextSibling}}function q0(t,e){if(t.nodeType===1){const r=t.style;let n="";for(const s in e)r.setProperty(`--${s}`,e[s]),n+=`--${s}: ${e[s]};`;r[FT]=n}}const RR=/(^|;)\s*display\s*:/;function FR(t,e,r){const n=t.style,s=Tr(r);let i=!1;if(r&&!s){if(e)if(Tr(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&g0(n,o,"")}else for(const a in e)r[a]==null&&g0(n,a,"");for(const a in r)a==="display"&&(i=!0),g0(n,a,r[a])}else if(s){if(e!==r){const a=n[FT];a&&(r+=";"+a),n.cssText=r,i=RR.test(r)}}else e&&t.removeAttribute("style");K0 in t&&(t[K0]=i?n.display:"",t[PT]&&(n.display="none"))}const UE=/\s*!important$/;function g0(t,e,r){if(dt(r))r.forEach(n=>g0(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=NR(t,e);UE.test(r)?t.setProperty(Es(n),r.replace(UE,""),"important"):t[n]=r}}const $E=["Webkit","Moz","ms"],sm={};function NR(t,e){const r=sm[e];if(r)return r;let n=kn(e);if(n!=="filter"&&n in t)return sm[e]=n;n=Md(n);for(let s=0;s<$E.length;s++){const i=$E[s]+n;if(i in t)return sm[e]=i}return e}const VE="http://www.w3.org/1999/xlink";function HE(t,e,r,n,s,i=KD(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(VE,e.slice(6,e.length)):t.setAttributeNS(VE,e,r):r==null||i&&!YS(r)?t.removeAttribute(e):t.setAttribute(e,i?"":ha(r)?String(r):r)}function jE(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?wT(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=YS(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(s||e)}function ei(t,e,r,n){t.addEventListener(e,r,n)}function OR(t,e,r,n){t.removeEventListener(e,r,n)}const GE=Symbol("_vei");function MR(t,e,r,n,s=null){const i=t[GE]||(t[GE]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=LR(e);if(n){const c=i[e]=$R(n,s);ei(t,o,c,l)}else a&&(OR(t,o,a,l),i[e]=void 0)}}const WE=/(?:Once|Passive|Capture)$/;function LR(t){let e;if(WE.test(t)){e={};let n;for(;n=t.match(WE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Es(t.slice(2)),e]}let am=0;const BR=Promise.resolve(),UR=()=>am||(BR.then(()=>am=0),am=Date.now());function $R(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;zs(VR(n,r.value),e,5,[n])};return r.value=t,r.attached=UR(),r}function VR(t,e){if(dt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const zE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,HR=(t,e,r,n,s,i)=>{const a=s==="svg";e==="class"?kR(t,n,a):e==="style"?FR(t,r,n):Od(e)?n1(e)||MR(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):jR(t,e,n,a))?(jE(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&HE(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Tr(n))?jE(t,kn(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),HE(t,e,n,a))};function jR(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&zE(e)&&Tt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return zE(e)&&Tr(r)?!1:e in t}const KE={};/*! #__NO_SIDE_EFFECTS__ */function NT(t,e,r){const n=Ld(t,e);Bh(n)&&Er(n,e);class s extends rp{constructor(a){super(n,a,r)}}return s.def=n,s}/*! #__NO_SIDE_EFFECTS__ */const GR=(t,e)=>NT(t,e,WT),WR=typeof HTMLElement<"u"?HTMLElement:class{};class rp extends WR{constructor(e,r={},n=Y0){super(),this._def=e,this._props=r,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==Y0?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof rp){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,ul(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:a}=n;let o;if(i&&!dt(i))for(const l in i){const c=i[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=M0(this._props[l])),(o||(o=Object.create(null)))[kn(l)]=!0)}this._numberProps=o,this._resolveProps(n),this.shadowRoot&&this._applyStyles(a),this._mount(n)},r=this._def.__asyncLoader;r?this._pendingResolve=r().then(n=>{n.configureApp=this._def.configureApp,e(this._def=n,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const r=this._instance&&this._instance.exposed;if(r)for(const n in r)ur(this,n)||Object.defineProperty(this,n,{get:()=>q(r[n])})}_resolveProps(e){const{props:r}=e,n=dt(r)?r:Object.keys(r||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s]);for(const s of n.map(kn))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const r=this.hasAttribute(e);let n=r?this.getAttribute(e):KE;const s=kn(e);r&&this._numberProps&&this._numberProps[s]&&(n=M0(n)),this._setProp(s,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,r,n=!0,s=!1){if(r!==this._props[e]&&(r===KE?delete this._props[e]:(this._props[e]=r,e==="key"&&this._app&&(this._app._ceVNode.key=r)),s&&this._instance&&this._update(),n)){const i=this._ob;i&&i.disconnect(),r===!0?this.setAttribute(Es(e),""):typeof r=="string"||typeof r=="number"?this.setAttribute(Es(e),r+""):r||this.removeAttribute(Es(e)),i&&i.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),GT(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const r=Oe(this._def,Er(e,this._props));return this._instance||(r.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const s=(i,a)=>{this.dispatchEvent(new CustomEvent(i,Bh(a[0])?Er({detail:a},a[0]):{detail:a}))};n.emit=(i,...a)=>{s(i,a),Es(i)!==i&&s(Es(i),a)},this._setParent()}),r}_applyStyles(e,r){if(!e)return;if(r){if(r===this._def||this._styleChildren.has(r))return;this._styleChildren.add(r)}const n=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");n&&i.setAttribute("nonce",n),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let r;for(;r=this.firstChild;){const n=r.nodeType===1&&r.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(r),this.removeChild(r)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),r=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const s=e[n],i=s.getAttribute("name")||"default",a=this._slots[i],o=s.parentNode;if(a)for(const l of a){if(r&&l.nodeType===1){const c=r+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let f;for(;f=u.nextNode();)f.setAttribute(c,"")}o.insertBefore(l,s)}else for(;s.firstChild;)o.insertBefore(s.firstChild,s);o.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function OT(t){const e=Xs(),r=e&&e.ce;return r||null}function zR(){const t=OT();return t&&t.shadowRoot}function KR(t="$style"){{const e=Xs();if(!e)return Jt;const r=e.type.__cssModules;if(!r)return Jt;const n=r[t];return n||Jt}}const MT=new WeakMap,LT=new WeakMap,X0=Symbol("_moveCb"),qE=Symbol("_enterCb"),qR=t=>(delete t.props.mode,t),XR=qR({name:"TransitionGroup",props:Er({},IT,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=Xs(),n=y1();let s,i;return Jh(()=>{if(!s.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!e8(s[0].el,r.vnode.el,a)){s=[];return}s.forEach(QR),s.forEach(JR);const o=s.filter(ZR);ev(),o.forEach(l=>{const c=l.el,u=c.style;Ta(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[X0]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",f),c[X0]=null,Ui(c,a))};c.addEventListener("transitionend",f)}),s=[]}),()=>{const a=Xt(t),o=kT(a);let l=a.tag||Pe;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),yi(u,mc(u,o,n,r)),MT.set(u,u.el.getBoundingClientRect()))}i=e.default?Yh(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&yi(u,mc(u,o,n,r))}return Oe(l,null,i)}}}),YR=XR;function QR(t){const e=t.el;e[X0]&&e[X0](),e[qE]&&e[qE]()}function JR(t){LT.set(t,t.el.getBoundingClientRect())}function ZR(t){const e=MT.get(t),r=LT.get(t),n=e.left-r.left,s=e.top-r.top;if(n||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${s}px)`,i.transitionDuration="0s",t}}function e8(t,e,r){const n=t.cloneNode(),s=t[vc];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(n);const{hasTransform:a}=DT(n);return i.removeChild(n),a}const io=t=>{const e=t.props["onUpdate:modelValue"]||!1;return dt(e)?r=>Zl(e,r):e};function t8(t){t.target.composing=!0}function XE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Gs=Symbol("_assign"),gt={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[Gs]=io(s);const i=n||s.props&&s.props.type==="number";ei(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;r&&(o=o.trim()),i&&(o=O0(o)),t[Gs](o)}),r&&ei(t,"change",()=>{t.value=t.value.trim()}),e||(ei(t,"compositionstart",t8),ei(t,"compositionend",XE),ei(t,"change",XE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:i}},a){if(t[Gs]=io(a),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?O0(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===l)||(t.value=l))}},Et={deep:!0,created(t,e,r){t[Gs]=io(r),ei(t,"change",()=>{const n=t._modelValue,s=yc(t),i=t.checked,a=t[Gs];if(dt(n)){const o=Vh(n,s),l=o!==-1;if(i&&!l)a(n.concat(s));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(ll(n)){const o=new Set(n);i?o.add(s):o.delete(s),a(o)}else a(BT(t,i))})},mounted:YE,beforeUpdate(t,e,r){t[Gs]=io(r),YE(t,e,r)}};function YE(t,{value:e,oldValue:r},n){t._modelValue=e;let s;if(dt(e))s=Vh(e,n.props.value)>-1;else if(ll(e))s=e.has(n.props.value);else{if(e===r)return;s=ao(e,BT(t,!0))}t.checked!==s&&(t.checked=s)}const pa={created(t,{value:e},r){t.checked=ao(e,r.props.value),t[Gs]=io(r),ei(t,"change",()=>{t[Gs](yc(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[Gs]=io(n),e!==r&&(t.checked=ao(e,n.props.value))}},cr={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=ll(e);ei(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>r?O0(yc(a)):yc(a));t[Gs](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,ul(()=>{t._assigning=!1})}),t[Gs]=io(n)},mounted(t,{value:e}){QE(t,e)},beforeUpdate(t,e,r){t[Gs]=io(r)},updated(t,{value:e}){t._assigning||QE(t,e)}};function QE(t,e){const r=t.multiple,n=dt(e);if(!(r&&!n&&!ll(e))){for(let s=0,i=t.options.length;s<i;s++){const a=t.options[s],o=yc(a);if(r)if(n){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(c=>String(c)===String(o)):a.selected=Vh(e,o)>-1}else a.selected=e.has(o);else if(ao(yc(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function yc(t){return"_value"in t?t._value:t.value}function BT(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const UT={created(t,e,r){Nf(t,e,r,null,"created")},mounted(t,e,r){Nf(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){Nf(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){Nf(t,e,r,n,"updated")}};function $T(t,e){switch(t){case"SELECT":return cr;case"TEXTAREA":return gt;default:switch(e){case"checkbox":return Et;case"radio":return pa;default:return gt}}}function Nf(t,e,r,n,s){const a=$T(t.tagName,r.props&&r.props.type)[s];a&&a(t,e,r,n)}function r8(){gt.getSSRProps=({value:t})=>({value:t}),pa.getSSRProps=({value:t},e)=>{if(e.props&&ao(e.props.value,t))return{checked:!0}},Et.getSSRProps=({value:t},e)=>{if(dt(t)){if(e.props&&Vh(t,e.props.value)>-1)return{checked:!0}}else if(ll(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},UT.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const r=$T(e.type.toUpperCase(),e.props&&e.props.type);if(r.getSSRProps)return r.getSSRProps(t,e)}}const n8=["ctrl","shift","alt","meta"],s8={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>n8.some(r=>t[`${r}Key`]&&!e.includes(r))},Xr=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...i)=>{for(let a=0;a<e.length;a++){const o=s8[e[a]];if(o&&o(s,e))return}return t(s,...i)})},a8={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},P1=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=s=>{if(!("key"in s))return;const i=Es(s.key);if(e.some(a=>a===i||a8[a]===i))return t(s)})},VT=Er({patchProp:HR},AR);let Ou,JE=!1;function HT(){return Ou||(Ou=tT(VT))}function jT(){return Ou=JE?Ou:rT(VT),JE=!0,Ou}const GT=(...t)=>{HT().render(...t)},i8=(...t)=>{jT().hydrate(...t)},Y0=(...t)=>{const e=HT().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=KT(n);if(!s)return;const i=e._component;!Tt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=r(s,!1,zT(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e},WT=(...t)=>{const e=jT().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=KT(n);if(s)return r(s,!0,zT(s))},e};function zT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function KT(t){return Tr(t)?document.querySelector(t):t}let ZE=!1;const o8=()=>{ZE||(ZE=!0,r8(),DR())};/**
* vue v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const l8=()=>{},c8=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:PA,BaseTransitionPropsValidators:x1,Comment:qr,DeprecationTypes:_R,EffectScope:o1,ErrorCodes:N3,ErrorTypeStrings:pR,Fragment:Pe,KeepAlive:iP,ReactiveEffect:id,Static:Vo,Suspense:YP,Teleport:H3,Text:to,TrackOpTypes:C3,Transition:wR,TransitionGroup:YR,TriggerOpTypes:I3,VueElement:rp,assertNumber:F3,callWithAsyncErrorHandling:zs,callWithErrorHandling:Nc,camelize:kn,capitalize:Md,cloneVNode:Ma,compatUtils:ER,compile:l8,computed:be,createApp:Y0,createBlock:Qt,createCommentVNode:xe,createElementBlock:U,createElementVNode:d,createHydrationRenderer:rT,createPropsRestProxy:AP,createRenderer:tT,createSSRApp:WT,createSlots:uP,createStaticVNode:Dn,createTextVNode:we,createVNode:Oe,customRef:gA,defineAsyncComponent:sP,defineComponent:Ld,defineCustomElement:NT,defineEmits:pP,defineExpose:mP,defineModel:yP,defineOptions:gP,defineProps:hP,defineSSRCustomElement:GR,defineSlots:vP,devtools:mR,effect:YD,effectScope:l1,getCurrentInstance:Xs,getCurrentScope:c1,getCurrentWatcher:k3,getTransitionRawChildren:Yh,guardReactiveProps:vT,h:Yo,handleError:cl,hasInjectionContext:zA,hydrate:i8,hydrateOnIdle:J3,hydrateOnInteraction:rP,hydrateOnMediaQuery:tP,hydrateOnVisible:eP,initCustomFormatter:dR,initDirectivesForSSR:o8,inject:Ps,isMemoSame:AT,isProxy:zh,isReactive:Pa,isReadonly:vi,isRef:Cr,isRuntimeOnly:lR,isShallow:Ds,isVNode:xi,markRaw:Kh,mergeDefaults:bP,mergeModels:SP,mergeProps:yT,nextTick:ul,normalizeClass:Qe,normalizeProps:WD,normalizeStyle:Nr,onActivated:FA,onBeforeMount:MA,onBeforeUnmount:Zh,onBeforeUpdate:_1,onDeactivated:NA,onErrorCaptured:$A,onMounted:Wt,onRenderTracked:UA,onRenderTriggered:BA,onScopeDispose:ZS,onServerPrefetch:LA,onUnmounted:Va,onUpdated:Jh,onWatcherCleanup:xA,openBlock:B,popScopeId:U3,provide:Fu,proxyRefs:g1,pushScopeId:B3,queuePostFlushCb:cd,reactive:Fs,readonly:p1,ref:ae,registerRuntimeCompiler:oR,render:GT,renderList:je,renderSlot:HA,resolveComponent:fr,resolveDirective:cP,resolveDynamicComponent:S1,resolveFilter:xR,resolveTransitionHooks:mc,setBlockTracking:Kg,setDevtoolsHook:gR,setTransitionHooks:yi,shallowReactive:h1,shallowReadonly:g3,shallowRef:m1,ssrContextKey:iT,ssrUtils:yR,stop:QD,toDisplayString:Y,toHandlerKey:Iu,toHandlers:dP,toRaw:Xt,toRef:A3,toRefs:vA,toValue:x3,transformVNodeArgs:rR,triggerRef:y3,unref:q,useAttrs:_P,useCssModule:KR,useCssVars:PR,useHost:OT,useId:G3,useModel:jP,useSSRContext:oT,useShadowRoot:zR,useSlots:EP,useTemplateRef:W3,useTransitionState:y1,vModelCheckbox:Et,vModelDynamic:UT,vModelRadio:pa,vModelSelect:cr,vModelText:gt,vShow:RT,version:TT,warn:hR,watch:Vt,watchEffect:$P,watchPostEffect:VP,watchSyncEffect:lT,withAsyncContext:TP,withCtx:Xh,withDefaults:xP,withDirectives:Be,withKeys:P1,withMemo:fR,withModifiers:Xr,withScopeId:$3},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let qT;const np=t=>qT=t,XT=Symbol();function rv(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Mu;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Mu||(Mu={}));function u8(){const t=l1(!0),e=t.run(()=>ae({}));let r=[],n=[];const s=Kh({install(i){np(s),s._a=i,i.provide(XT,s),i.config.globalProperties.$pinia=s,n.forEach(a=>r.push(a)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const YT=()=>{};function e2(t,e,r,n=YT){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&c1()&&ZS(s),s}function Pl(t,...e){t.slice().forEach(r=>{r(...e)})}const d8=t=>t(),t2=Symbol(),im=Symbol();function nv(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];rv(s)&&rv(n)&&t.hasOwnProperty(r)&&!Cr(n)&&!Pa(n)?t[r]=nv(s,n):t[r]=n}return t}const f8=Symbol();function h8(t){return!rv(t)||!t.hasOwnProperty(f8)}const{assign:$i}=Object;function p8(t){return!!(Cr(t)&&t.effect)}function m8(t,e,r,n){const{state:s,actions:i,getters:a}=e,o=r.state.value[t];let l;function c(){o||(r.state.value[t]=s?s():{});const u=vA(r.state.value[t]);return $i(u,i,Object.keys(a||{}).reduce((f,h)=>(f[h]=Kh(be(()=>{np(r);const p=r._s.get(t);return a[h].call(p,p)})),f),{}))}return l=QT(t,c,e,r,n,!0),l}function QT(t,e,r={},n,s,i){let a;const o=$i({actions:{}},r),l={deep:!0};let c,u,f=[],h=[],p;const g=n.state.value[t];!i&&!g&&(n.state.value[t]={}),ae({});let v;function y(_){let m;c=u=!1,typeof _=="function"?(_(n.state.value[t]),m={type:Mu.patchFunction,storeId:t,events:p}):(nv(n.state.value[t],_),m={type:Mu.patchObject,payload:_,storeId:t,events:p});const S=v=Symbol();ul().then(()=>{v===S&&(c=!0)}),u=!0,Pl(f,m,n.state.value[t])}const b=i?function(){const{state:m}=r,S=m?m():{};this.$patch(I=>{$i(I,S)})}:YT;function E(){a.stop(),f=[],h=[],n._s.delete(t)}const x=(_,m="")=>{if(t2 in _)return _[im]=m,_;const S=function(){np(n);const I=Array.from(arguments),k=[],C=[];function O(N){k.push(N)}function D(N){C.push(N)}Pl(h,{args:I,name:S[im],store:P,after:O,onError:D});let F;try{F=_.apply(this&&this.$id===t?this:P,I)}catch(N){throw Pl(C,N),N}return F instanceof Promise?F.then(N=>(Pl(k,N),N)).catch(N=>(Pl(C,N),Promise.reject(N))):(Pl(k,F),F)};return S[t2]=!0,S[im]=m,S},w={_p:n,$id:t,$onAction:e2.bind(null,h),$patch:y,$reset:b,$subscribe(_,m={}){const S=e2(f,_,m.detached,()=>I()),I=a.run(()=>Vt(()=>n.state.value[t],k=>{(m.flush==="sync"?u:c)&&_({storeId:t,type:Mu.direct,events:p},k)},$i({},l,m)));return S},$dispose:E},P=Fs(w);n._s.set(t,P);const A=(n._a&&n._a.runWithContext||d8)(()=>n._e.run(()=>(a=l1()).run(()=>e({action:x}))));for(const _ in A){const m=A[_];if(Cr(m)&&!p8(m)||Pa(m))i||(g&&h8(m)&&(Cr(m)?m.value=g[_]:nv(m,g[_])),n.state.value[t][_]=m);else if(typeof m=="function"){const S=x(m,_);A[_]=S,o.actions[_]=m}}return $i(P,A),$i(Xt(P),A),Object.defineProperty(P,"$state",{get:()=>n.state.value[t],set:_=>{y(m=>{$i(m,_)})}}),n._p.forEach(_=>{$i(P,a.run(()=>_({store:P,app:n._a,pinia:n,options:o})))}),g&&i&&r.hydrate&&r.hydrate(P.$state,g),c=!0,u=!0,P}/*! #__NO_SIDE_EFFECTS__ */function JT(t,e,r){let n,s;const i=typeof e=="function";typeof t=="string"?(n=t,s=i?r:e):(s=t,n=t.id);function a(o,l){const c=zA();return o=o||(c?Ps(XT,null):null),o&&np(o),o=qT,o._s.has(n)||(i?QT(n,e,s,o):m8(n,s,o)),o._s.get(n)}return a.$id=n,a}var r2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},g8=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,f=(i&3)<<4|o>>4;let h=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(h=64)),n.push(r[u],r[f],r[h],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):g8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||f==null)throw new v8;const h=i<<2|o>>4;if(n.push(h),c!==64){const p=o<<4&240|c>>2;if(n.push(p),f!==64){const g=c<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class v8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y8=function(t){const e=ZT(t);return ew.encodeByteArray(e,!0)},Q0=function(t){return y8(t).replace(/\./g,"")},tw=function(t){try{return ew.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=()=>x8().__FIREBASE_DEFAULTS__,_8=()=>{if(typeof process>"u"||typeof r2>"u")return;const t=r2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},b8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tw(t[1]);return e&&JSON.parse(e)},sp=()=>{try{return E8()||_8()||b8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rw=t=>{var e,r;return(r=(e=sp())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},R1=t=>{const e=rw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},nw=()=>{var t;return(t=sp())===null||t===void 0?void 0:t.config},sw=t=>{var e;return(e=sp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Q0(JSON.stringify(r)),Q0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zn())}function T8(){var t;const e=(t=sp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k8(){const t=Zn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D8(){return!T8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P8(){try{return typeof indexedDB=="object"}catch{return!1}}function R8(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8="FirebaseError";class ya extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=F8,Object.setPrototypeOf(this,ya.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vd.prototype.create)}}class Vd{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?N8(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new ya(s,o,n)}}function N8(t,e){return t.replace(O8,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const O8=/\{\$([^}]+)}/g;function M8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function J0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(n2(i)&&n2(a)){if(!J0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function n2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function L8(t,e){const r=new B8(t,e);return r.subscribe.bind(r)}class B8{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");U8(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=om),s.error===void 0&&(s.error=om),s.complete===void 0&&(s.complete=om);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U8(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t){return t&&t._delegate?t._delegate:t}class Ei{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new S8;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H8(e))try{this.getOrInitializeService({instanceIdentifier:Ro})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ro){return this.instances.has(e)}getOptions(e=Ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:V8(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ro){return this.component?this.component.multipleInstances?e:Ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function V8(t){return t===Ro?void 0:t}function H8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new $8(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Yt||(Yt={}));const G8={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},W8=Yt.INFO,z8={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},K8=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=z8[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class F1{constructor(e){this.name=e,this._logLevel=W8,this._logHandler=K8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}const q8=(t,e)=>e.some(r=>t instanceof r);let s2,a2;function X8(){return s2||(s2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y8(){return a2||(a2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iw=new WeakMap,sv=new WeakMap,ow=new WeakMap,lm=new WeakMap,N1=new WeakMap;function Q8(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(ro(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&iw.set(r,t)}).catch(()=>{}),N1.set(e,t),e}function J8(t){if(sv.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});sv.set(t,e)}let av={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return sv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ow.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ro(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Z8(t){av=t(av)}function eF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(cm(this),e,...r);return ow.set(n,e.sort?e.sort():[e]),ro(n)}:Y8().includes(t)?function(...e){return t.apply(cm(this),e),ro(iw.get(this))}:function(...e){return ro(t.apply(cm(this),e))}}function tF(t){return typeof t=="function"?eF(t):(t instanceof IDBTransaction&&J8(t),q8(t,X8())?new Proxy(t,av):t)}function ro(t){if(t instanceof IDBRequest)return Q8(t);if(lm.has(t))return lm.get(t);const e=tF(t);return e!==t&&(lm.set(t,e),N1.set(e,t)),e}const cm=t=>N1.get(t);function rF(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=ro(a);return n&&a.addEventListener("upgradeneeded",l=>{n(ro(a.result),l.oldVersion,l.newVersion,ro(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const nF=["get","getKey","getAll","getAllKeys","count"],sF=["put","add","delete","clear"],um=new Map;function i2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(um.get(e))return um.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=sF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||nF.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return um.set(e,i),i}Z8(t=>({...t,get:(e,r,n)=>i2(e,r)||t.get(e,r,n),has:(e,r)=>!!i2(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(iF(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function iF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const iv="@firebase/app",o2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new F1("@firebase/app"),oF="@firebase/app-compat",lF="@firebase/analytics-compat",cF="@firebase/analytics",uF="@firebase/app-check-compat",dF="@firebase/app-check",fF="@firebase/auth",hF="@firebase/auth-compat",pF="@firebase/database",mF="@firebase/data-connect",gF="@firebase/database-compat",vF="@firebase/functions",yF="@firebase/functions-compat",xF="@firebase/installations",EF="@firebase/installations-compat",_F="@firebase/messaging",bF="@firebase/messaging-compat",SF="@firebase/performance",AF="@firebase/performance-compat",TF="@firebase/remote-config",wF="@firebase/remote-config-compat",CF="@firebase/storage",IF="@firebase/storage-compat",kF="@firebase/firestore",DF="@firebase/vertexai-preview",PF="@firebase/firestore-compat",RF="firebase",FF="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="[DEFAULT]",NF={[iv]:"fire-core",[oF]:"fire-core-compat",[cF]:"fire-analytics",[lF]:"fire-analytics-compat",[dF]:"fire-app-check",[uF]:"fire-app-check-compat",[fF]:"fire-auth",[hF]:"fire-auth-compat",[pF]:"fire-rtdb",[mF]:"fire-data-connect",[gF]:"fire-rtdb-compat",[vF]:"fire-fn",[yF]:"fire-fn-compat",[xF]:"fire-iid",[EF]:"fire-iid-compat",[_F]:"fire-fcm",[bF]:"fire-fcm-compat",[SF]:"fire-perf",[AF]:"fire-perf-compat",[TF]:"fire-rc",[wF]:"fire-rc-compat",[CF]:"fire-gcs",[IF]:"fire-gcs-compat",[kF]:"fire-fst",[PF]:"fire-fst-compat",[DF]:"fire-vertex","fire-js":"fire-js",[RF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=new Map,OF=new Map,lv=new Map;function l2(t,e){try{t.container.addComponent(e)}catch(r){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function oo(t){const e=t.name;if(lv.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;lv.set(e,t);for(const r of Z0.values())l2(r,t);for(const r of OF.values())l2(r,t);return!0}function jd(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ai(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},no=new Vd("app","Firebase",MF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=FF;function lw(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:ov,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw no.create("bad-app-name",{appName:String(s)});if(r||(r=nw()),!r)throw no.create("no-options");const i=Z0.get(s);if(i){if(J0(r,i.options)&&J0(n,i.config))return i;throw no.create("duplicate-app",{appName:s})}const a=new j8(s);for(const l of lv.values())a.addComponent(l);const o=new LF(r,n,a);return Z0.set(s,o),o}function Gd(t=ov){const e=Z0.get(t);if(!e&&t===ov&&nw())return lw();if(!e)throw no.create("no-app",{appName:t});return e}function Ws(t,e,r){var n;let s=(n=NF[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(o.join(" "));return}oo(new Ei(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="firebase-heartbeat-database",UF=1,pd="firebase-heartbeat-store";let dm=null;function cw(){return dm||(dm=rF(BF,UF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pd)}catch(r){console.warn(r)}}}}).catch(t=>{throw no.create("idb-open",{originalErrorMessage:t.message})})),dm}async function $F(t){try{const r=(await cw()).transaction(pd),n=await r.objectStore(pd).get(uw(t));return await r.done,n}catch(e){if(e instanceof ya)_i.warn(e.message);else{const r=no.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_i.warn(r.message)}}}async function c2(t,e){try{const n=(await cw()).transaction(pd,"readwrite");await n.objectStore(pd).put(e,uw(t)),await n.done}catch(r){if(r instanceof ya)_i.warn(r.message);else{const n=no.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});_i.warn(n.message)}}}function uw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=1024,HF=30*24*60*60*1e3;class jF{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new WF(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=u2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=HF}),this._storage.overwrite(this._heartbeatsCache))}catch(n){_i.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=u2(),{heartbeatsToSend:n,unsentEntries:s}=GF(this._heartbeatsCache.heartbeats),i=Q0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return _i.warn(r),""}}}function u2(){return new Date().toISOString().substring(0,10)}function GF(t,e=VF){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),d2(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),d2(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class WF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return P8()?R8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await $F(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return c2(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return c2(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function d2(t){return Q0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t){oo(new Ei("platform-logger",e=>new aF(e),"PRIVATE")),oo(new Ei("heartbeat",e=>new jF(e),"PRIVATE")),Ws(iv,o2,t),Ws(iv,o2,"esm2017"),Ws("fire-js","")}zF("");function O1(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function dw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fw=dw,hw=new Vd("auth","Firebase",dw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new F1("@firebase/auth");function KF(t,...e){eh.logLevel<=Yt.WARN&&eh.warn(`Auth (${dl}): ${t}`,...e)}function v0(t,...e){eh.logLevel<=Yt.ERROR&&eh.error(`Auth (${dl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t,...e){throw L1(t,...e)}function da(t,...e){return L1(t,...e)}function M1(t,e,r){const n=Object.assign(Object.assign({},fw()),{[e]:r});return new Vd("auth","Firebase",n).create(e,{appName:t.name})}function Ho(t){return M1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qF(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&La(t,"argument-error"),M1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function L1(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return hw.create(t,...e)}function Dt(t,e,...r){if(!t)throw L1(e,...r)}function ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw v0(e),new Error(e)}function bi(t,e){t||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XF(){return f2()==="http:"||f2()==="https:"}function f2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XF()||C8()||"connection"in navigator)?navigator.onLine:!0}function QF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,r){this.shortDelay=e,this.longDelay=r,bi(r>e,"Short delay should be less than long delay!"),this.isMobile=A8()||I8()}get(){return YF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t,e){bi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=new Wd(3e4,6e4);function U1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Oc(t,e,r,n,s={}){return mw(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Hd(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return w8()||(c.referrerPolicy="no-referrer"),pw.fetch()(gw(t,t.config.apiHost,r,o),c)})}async function mw(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},JF),e);try{const s=new t6(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Of(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Of(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Of(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Of(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw M1(t,u,c);La(t,u)}}catch(s){if(s instanceof ya)throw s;La(t,"network-request-failed",{message:String(s)})}}async function e6(t,e,r,n,s={}){const i=await Oc(t,e,r,n,s);return"mfaPendingCredential"in i&&La(t,"multi-factor-auth-required",{_serverResponse:i}),i}function gw(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?B1(t.config,s):`${t.config.apiScheme}://${s}`}class t6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(da(this.auth,"network-request-failed")),ZF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Of(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=da(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r6(t,e){return Oc(t,"POST","/v1/accounts:delete",e)}async function vw(t,e){return Oc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t,e=!1){return dr(t).getIdToken(e)}async function yw(t,e=!1){const r=dr(t),n=await r.getIdToken(e),s=$1(n);Dt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Lu(fm(s.auth_time)),issuedAtTime:Lu(fm(s.iat)),expirationTime:Lu(fm(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function fm(t){return Number(t)*1e3}function $1(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return v0("JWT malformed, contained fewer than 3 sections"),null;try{const s=tw(r);return s?JSON.parse(s):(v0("Failed to decode base64 JWT payload"),null)}catch(s){return v0("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function h2(t){const e=$1(t);return Dt(e,"internal-error"),Dt(typeof e.exp<"u","internal-error"),Dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ya&&n6(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function n6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lu(this.lastLoginAt),this.creationTime=Lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(t){var e;const r=t.auth,n=await t.getIdToken(),s=await md(t,vw(r,{idToken:n}));Dt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ew(i.providerUserInfo):[],o=a6(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new dv(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function xw(t){const e=dr(t);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a6(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Ew(t){return t.map(e=>{var{providerId:r}=e,n=O1(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i6(t,e){const r=await mw(t,{},async()=>{const n=Hd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=gw(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",pw.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function o6(t,e){return Oc(t,"POST","/v2/accounts:revokeToken",U1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Dt(e.idToken,"internal-error"),Dt(typeof e.idToken<"u","internal-error"),Dt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Dt(e.length!==0,"internal-error");const r=h2(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await i6(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new nc;return n&&(Dt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Dt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Dt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nc,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t,e){Dt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class oi{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=O1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new dv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await md(this,this.stsTokenManager.getToken(this.auth,e));return Dt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return yw(this,e)}reload(){return xw(this)}_assign(e){this!==e&&(Dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await th(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(Ho(this.auth));const e=await this.getIdToken();return await md(this,r6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,u;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(s=r.email)!==null&&s!==void 0?s:void 0,p=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,g=(a=r.photoURL)!==null&&a!==void 0?a:void 0,v=(o=r.tenantId)!==null&&o!==void 0?o:void 0,y=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=r.createdAt)!==null&&c!==void 0?c:void 0,E=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:x,emailVerified:w,isAnonymous:P,providerData:R,stsTokenManager:A}=r;Dt(x&&A,e,"internal-error");const _=nc.fromJSON(this.name,A);Dt(typeof x=="string",e,"internal-error"),Mi(f,e.name),Mi(h,e.name),Dt(typeof w=="boolean",e,"internal-error"),Dt(typeof P=="boolean",e,"internal-error"),Mi(p,e.name),Mi(g,e.name),Mi(v,e.name),Mi(y,e.name),Mi(b,e.name),Mi(E,e.name);const m=new oi({uid:x,auth:e,email:h,emailVerified:w,displayName:f,isAnonymous:P,photoURL:g,phoneNumber:p,tenantId:v,stsTokenManager:_,createdAt:b,lastLoginAt:E});return R&&Array.isArray(R)&&(m.providerData=R.map(S=>Object.assign({},S))),y&&(m._redirectEventId=y),m}static async _fromIdTokenResponse(e,r,n=!1){const s=new nc;s.updateFromServerResponse(r);const i=new oi({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await th(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Dt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ew(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new nc;o.updateFromIdToken(n);const l=new oi({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new dv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=new Map;function li(t){bi(t instanceof Function,"Expected a class definition");let e=p2.get(t);return e?(bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,p2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}_w.type="NONE";const fv=_w;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t,e,r){return`firebase:${t}:${e}:${r}`}class sc{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=y0(this.userKey,s.apiKey,i),this.fullPersistenceKey=y0("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?oi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new sc(li(fv),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||li(fv);const a=y0(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const f=oi._fromJSON(e,u);c!==i&&(o=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new sc(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new sc(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Tw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cw(e))return"Blackberry";if(Iw(e))return"Webos";if(Sw(e))return"Safari";if((e.includes("chrome/")||Aw(e))&&!e.includes("edge/"))return"Chrome";if(ww(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function bw(t=Zn()){return/firefox\//i.test(t)}function Sw(t=Zn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Aw(t=Zn()){return/crios\//i.test(t)}function Tw(t=Zn()){return/iemobile/i.test(t)}function ww(t=Zn()){return/android/i.test(t)}function Cw(t=Zn()){return/blackberry/i.test(t)}function Iw(t=Zn()){return/webos/i.test(t)}function V1(t=Zn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function l6(t=Zn()){var e;return V1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function c6(){return k8()&&document.documentMode===10}function kw(t=Zn()){return V1(t)||ww(t)||Iw(t)||Cw(t)||/windows phone/i.test(t)||Tw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e=[]){let r;switch(t){case"Browser":r=m2(Zn());break;case"Worker":r=`${m2(Zn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${dl}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(t,e={}){return Oc(t,"GET","/v2/passwordPolicy",U1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=6;class h6{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:f6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g2(this),this.idTokenSubscription=new g2(this),this.beforeStateQueue=new u6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=li(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await sc.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await vw(this,{idToken:e}),n=await oi._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ai(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(Ho(this));const r=e?dr(e):null;return r&&Dt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(Ho(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(Ho(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await d6(this),r=new h6(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vd("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await o6(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&li(e)||this._popupRedirectResolver;Dt(r,this,"argument-error"),this.redirectPersistenceManager=await sc.create(this,[li(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&KF(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function ap(t){return dr(t)}class g2{constructor(e){this.auth=e,this.observer=null,this.addObserver=L8(r=>this.observer=r)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m6(t){H1=t}function g6(t){return H1.loadJS(t)}function v6(){return H1.gapiScript}function y6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e){const r=jd(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(J0(i,e??{}))return s;La(s,"already-initialized")}return r.initialize({options:e})}function x6(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Rw(t,e,r){const n=ap(t);Dt(n._canInitEmulator,n,"emulator-config-failed"),Dt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=Fw(e),{host:a,port:o}=E6(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),_6()}function Fw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function E6(t){const e=Fw(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:v2(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:v2(a)}}}function v2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _6(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,r){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(t,e){return e6(t,"POST","/v1/accounts:signInWithIdp",U1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="http://localhost";class lo extends j1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):La("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=O1(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new lo(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return ac(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ac(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ac(e,r)}buildRequest(){const e={requestUri:b6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Hd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends G1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends zd{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ti.credential(e.oauthAccessToken)}catch{return null}}}ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends zd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return lo._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return aa.credential(r,n)}catch{return null}}}aa.GOOGLE_SIGN_IN_METHOD="google.com";aa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends zd{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends zd{constructor(){super("twitter.com")}static credential(e,r){return lo._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return ni.credential(r,n)}catch{return null}}}ni.TWITTER_SIGN_IN_METHOD="twitter.com";ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await oi._fromIdTokenResponse(e,n,s),a=y2(n);return new xc({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=y2(n);return new xc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function y2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends ya{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,rh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new rh(e,r,n,s)}}function Nw(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?rh._fromErrorAndOperation(t,i,e,n):i})}async function S6(t,e,r=!1){const n=await md(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return xc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A6(t,e,r=!1){const{auth:n}=t;if(ai(n.app))return Promise.reject(Ho(n));const s="reauthenticate";try{const i=await md(t,Nw(n,s,e,t),r);Dt(i.idToken,n,"internal-error");const a=$1(i.idToken);Dt(a,n,"internal-error");const{sub:o}=a;return Dt(t.uid===o,n,"user-mismatch"),xc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&La(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T6(t,e,r=!1){if(ai(t.app))return Promise.reject(Ho(t));const n="signIn",s=await Nw(t,n,e),i=await xc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function Ow(t,e,r,n){return dr(t).onIdTokenChanged(e,r,n)}function Mw(t,e,r){return dr(t).beforeAuthStateChanged(e,r)}function W1(t,e,r,n){return dr(t).onAuthStateChanged(e,r,n)}function ip(t){return dr(t).signOut()}const nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(nh,"1"),this.storage.removeItem(nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=1e3,C6=10;class Bw extends Lw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);c6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,C6):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},w6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bw.type="LOCAL";const z1=Bw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw extends Lw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Uw.type="SESSION";const K1=Uw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new op(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await I6(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}op.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=q1("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const h=f;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(h.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(){return window}function D6(t){Ra().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(){return typeof Ra().WorkerGlobalScope<"u"&&typeof Ra().importScripts=="function"}async function P6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function R6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function F6(){return $w()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="firebaseLocalStorageDb",N6=1,sh="firebaseLocalStorage",Hw="fbase_key";class Kd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function lp(t,e){return t.transaction([sh],e?"readwrite":"readonly").objectStore(sh)}function O6(){const t=indexedDB.deleteDatabase(Vw);return new Kd(t).toPromise()}function hv(){const t=indexedDB.open(Vw,N6);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(sh,{keyPath:Hw})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(sh)?e(n):(n.close(),await O6(),e(await hv()))})})}async function x2(t,e,r){const n=lp(t,!0).put({[Hw]:e,value:r});return new Kd(n).toPromise()}async function M6(t,e){const r=lp(t,!1).get(e),n=await new Kd(r).toPromise();return n===void 0?null:n.value}function E2(t,e){const r=lp(t,!0).delete(e);return new Kd(r).toPromise()}const L6=800,B6=3;class jw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>B6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $w()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=op._getInstance(F6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await P6(),!this.activeServiceWorker)return;this.sender=new k6(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||R6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hv();return await x2(e,nh,"1"),await E2(e,nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>x2(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>M6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>E2(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=lp(s,!1).getAll();return new Kd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jw.type="LOCAL";const Gw=jw;new Wd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t,e){return e?li(e):(Dt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1 extends j1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ac(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ac(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ac(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function U6(t){return T6(t.auth,new X1(t),t.bypassAuthState)}function $6(t){const{auth:e,user:r}=t;return Dt(r,e,"internal-error"),A6(r,new X1(t),t.bypassAuthState)}async function V6(t){const{auth:e,user:r}=t;return Dt(r,e,"internal-error"),S6(r,new X1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U6;case"linkViaPopup":case"linkViaRedirect":return V6;case"reauthViaPopup":case"reauthViaRedirect":return $6;default:La(this.auth,"internal-error")}}resolve(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=new Wd(2e3,1e4);async function Y1(t,e,r){if(ai(t.app))return Promise.reject(da(t,"operation-not-supported-in-this-environment"));const n=ap(t);qF(t,e,G1);const s=Ww(n,r);return new Oo(n,"signInViaPopup",e,s).executeNotNull()}class Oo extends zw{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Dt(e,this.auth,"internal-error"),e}async onExecution(){bi(this.filter.length===1,"Popup operations only handle one event");const e=q1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(da(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(da(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(da(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,H6.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6="pendingRedirect",x0=new Map;class G6 extends zw{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=x0.get(this.auth._key());if(!e){try{const n=await W6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}x0.set(this.auth._key(),e)}return this.bypassAuthState||x0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function W6(t,e){const r=q6(e),n=K6(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function z6(t,e){x0.set(t._key(),e)}function K6(t){return li(t._redirectPersistence)}function q6(t){return y0(j6,t.config.apiKey,t.name)}async function X6(t,e,r=!1){if(ai(t.app))return Promise.reject(Ho(t));const n=ap(t),s=Ww(n,e),a=await new G6(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=10*60*1e3;class Q6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!Kw(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(da(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Y6&&this.cachedEventUids.clear(),this.cachedEventUids.has(_2(e))}saveEventToCache(e){this.cachedEventUids.add(_2(e)),this.lastProcessedEventTime=Date.now()}}function _2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function J6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(t,e={}){return Oc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t5=/^https?/;async function r5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Z6(t);for(const r of e)try{if(n5(r))return}catch{}La(t,"unauthorized-domain")}function n5(t){const e=cv(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!t5.test(r))return!1;if(e5.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=new Wd(3e4,6e4);function b2(){const t=Ra().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function a5(t){return new Promise((e,r)=>{var n,s,i;function a(){b2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b2(),r(da(t,"network-request-failed"))},timeout:s5.get()})}if(!((s=(n=Ra().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ra().gapi)===null||i===void 0)&&i.load)a();else{const o=y6("iframefcb");return Ra()[o]=()=>{gapi.load?a():r(da(t,"network-request-failed"))},g6(`${v6()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw E0=null,e})}let E0=null;function i5(t){return E0=E0||a5(t),E0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=new Wd(5e3,15e3),l5="__/auth/iframe",c5="emulator/auth/iframe",u5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f5(t){const e=t.config;Dt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?B1(e,c5):`https://${t.config.authDomain}/${l5}`,n={apiKey:e.apiKey,appName:t.name,v:dl},s=d5.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Hd(n).slice(1)}`}async function h5(t){const e=await i5(t),r=Ra().gapi;return Dt(r,t,"internal-error"),e.open({where:document.body,url:f5(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u5,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=da(t,"network-request-failed"),o=Ra().setTimeout(()=>{i(a)},o5.get());function l(){Ra().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m5=500,g5=600,v5="_blank",y5="http://localhost";class S2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x5(t,e,r,n=m5,s=g5){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},p5),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Zn().toLowerCase();r&&(o=Aw(c)?v5:r),bw(c)&&(e=e||y5,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(l6(c)&&o!=="_self")return E5(e||"",o),new S2(null);const f=window.open(e||"",o,u);Dt(f,t,"popup-blocked");try{f.focus()}catch{}return new S2(f)}function E5(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5="__/auth/handler",b5="emulator/auth/handler",S5=encodeURIComponent("fac");async function A2(t,e,r,n,s,i){Dt(t.config.authDomain,t,"auth-domain-config-required"),Dt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:dl,eventId:s};if(e instanceof G1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",M8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))a[u]=f}if(e instanceof zd){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${S5}=${encodeURIComponent(l)}`:"";return`${A5(t)}?${Hd(o).slice(1)}${c}`}function A5({config:t}){return t.emulator?B1(t,b5):`https://${t.authDomain}/${_5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="webStorageSupport";class T5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=K1,this._completeRedirectFn=X6,this._overrideRedirectResult=z6}async _openPopup(e,r,n,s){var i;bi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await A2(e,r,n,cv(),s);return x5(e,a,q1())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await A2(e,r,n,cv(),s);return D6(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(bi(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await h5(e),n=new Q6(e);return r.register("authEvent",s=>(Dt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(hm,{type:hm},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[hm];a!==void 0&&r(!!a),La(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=r5(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return kw()||Sw()||V1()}}const qw=T5;var T2="@firebase/auth",w2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I5(t){oo(new Ei("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Dt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dw(t)},c=new p6(n,s,i,l);return x6(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),oo(new Ei("auth-internal",e=>{const r=ap(e.getProvider("auth").getImmediate());return(n=>new w5(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ws(T2,w2,C5(t)),Ws(T2,w2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=5*60,D5=sw("authIdTokenMaxAge")||k5;let C2=null;const P5=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>D5)return;const s=r==null?void 0:r.token;C2!==s&&(C2=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Qo(t=Gd()){const e=jd(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Pw(t,{popupRedirectResolver:qw,persistence:[Gw,z1,K1]}),n=sw("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=P5(i.toString());Mw(r,a,()=>a(r.currentUser)),Ow(r,o=>a(o))}}const s=rw("auth");return s&&Rw(r,`http://${s}`),r}function R5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}m6({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=da("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",R5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I5("Browser");const F5=Object.freeze(Object.defineProperty({__proto__:null,AuthCredential:j1,FacebookAuthProvider:ti,GithubAuthProvider:ri,GoogleAuthProvider:aa,OAuthCredential:lo,TwitterAuthProvider:ni,beforeAuthStateChanged:Mw,browserLocalPersistence:z1,browserPopupRedirectResolver:qw,browserSessionPersistence:K1,connectAuthEmulator:Rw,getAuth:Qo,getIdToken:uv,getIdTokenResult:yw,inMemoryPersistence:fv,indexedDBLocalPersistence:Gw,initializeAuth:Pw,onAuthStateChanged:W1,onIdTokenChanged:Ow,prodErrorMap:fw,reload:xw,signInWithPopup:Y1,signOut:ip},Symbol.toStringTag,{value:"Module"}));var I2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jo,Xw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,_){function m(){}m.prototype=_.prototype,A.D=_.prototype,A.prototype=new m,A.prototype.constructor=A,A.C=function(S,I,k){for(var C=Array(arguments.length-2),O=2;O<arguments.length;O++)C[O-2]=arguments[O];return _.prototype[I].apply(S,C)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,_,m){m||(m=0);var S=Array(16);if(typeof _=="string")for(var I=0;16>I;++I)S[I]=_.charCodeAt(m++)|_.charCodeAt(m++)<<8|_.charCodeAt(m++)<<16|_.charCodeAt(m++)<<24;else for(I=0;16>I;++I)S[I]=_[m++]|_[m++]<<8|_[m++]<<16|_[m++]<<24;_=A.g[0],m=A.g[1],I=A.g[2];var k=A.g[3],C=_+(k^m&(I^k))+S[0]+3614090360&4294967295;_=m+(C<<7&4294967295|C>>>25),C=k+(I^_&(m^I))+S[1]+3905402710&4294967295,k=_+(C<<12&4294967295|C>>>20),C=I+(m^k&(_^m))+S[2]+606105819&4294967295,I=k+(C<<17&4294967295|C>>>15),C=m+(_^I&(k^_))+S[3]+3250441966&4294967295,m=I+(C<<22&4294967295|C>>>10),C=_+(k^m&(I^k))+S[4]+4118548399&4294967295,_=m+(C<<7&4294967295|C>>>25),C=k+(I^_&(m^I))+S[5]+1200080426&4294967295,k=_+(C<<12&4294967295|C>>>20),C=I+(m^k&(_^m))+S[6]+2821735955&4294967295,I=k+(C<<17&4294967295|C>>>15),C=m+(_^I&(k^_))+S[7]+4249261313&4294967295,m=I+(C<<22&4294967295|C>>>10),C=_+(k^m&(I^k))+S[8]+1770035416&4294967295,_=m+(C<<7&4294967295|C>>>25),C=k+(I^_&(m^I))+S[9]+2336552879&4294967295,k=_+(C<<12&4294967295|C>>>20),C=I+(m^k&(_^m))+S[10]+4294925233&4294967295,I=k+(C<<17&4294967295|C>>>15),C=m+(_^I&(k^_))+S[11]+2304563134&4294967295,m=I+(C<<22&4294967295|C>>>10),C=_+(k^m&(I^k))+S[12]+1804603682&4294967295,_=m+(C<<7&4294967295|C>>>25),C=k+(I^_&(m^I))+S[13]+4254626195&4294967295,k=_+(C<<12&4294967295|C>>>20),C=I+(m^k&(_^m))+S[14]+2792965006&4294967295,I=k+(C<<17&4294967295|C>>>15),C=m+(_^I&(k^_))+S[15]+1236535329&4294967295,m=I+(C<<22&4294967295|C>>>10),C=_+(I^k&(m^I))+S[1]+4129170786&4294967295,_=m+(C<<5&4294967295|C>>>27),C=k+(m^I&(_^m))+S[6]+3225465664&4294967295,k=_+(C<<9&4294967295|C>>>23),C=I+(_^m&(k^_))+S[11]+643717713&4294967295,I=k+(C<<14&4294967295|C>>>18),C=m+(k^_&(I^k))+S[0]+3921069994&4294967295,m=I+(C<<20&4294967295|C>>>12),C=_+(I^k&(m^I))+S[5]+3593408605&4294967295,_=m+(C<<5&4294967295|C>>>27),C=k+(m^I&(_^m))+S[10]+38016083&4294967295,k=_+(C<<9&4294967295|C>>>23),C=I+(_^m&(k^_))+S[15]+3634488961&4294967295,I=k+(C<<14&4294967295|C>>>18),C=m+(k^_&(I^k))+S[4]+3889429448&4294967295,m=I+(C<<20&4294967295|C>>>12),C=_+(I^k&(m^I))+S[9]+568446438&4294967295,_=m+(C<<5&4294967295|C>>>27),C=k+(m^I&(_^m))+S[14]+3275163606&4294967295,k=_+(C<<9&4294967295|C>>>23),C=I+(_^m&(k^_))+S[3]+4107603335&4294967295,I=k+(C<<14&4294967295|C>>>18),C=m+(k^_&(I^k))+S[8]+1163531501&4294967295,m=I+(C<<20&4294967295|C>>>12),C=_+(I^k&(m^I))+S[13]+2850285829&4294967295,_=m+(C<<5&4294967295|C>>>27),C=k+(m^I&(_^m))+S[2]+4243563512&4294967295,k=_+(C<<9&4294967295|C>>>23),C=I+(_^m&(k^_))+S[7]+1735328473&4294967295,I=k+(C<<14&4294967295|C>>>18),C=m+(k^_&(I^k))+S[12]+2368359562&4294967295,m=I+(C<<20&4294967295|C>>>12),C=_+(m^I^k)+S[5]+4294588738&4294967295,_=m+(C<<4&4294967295|C>>>28),C=k+(_^m^I)+S[8]+2272392833&4294967295,k=_+(C<<11&4294967295|C>>>21),C=I+(k^_^m)+S[11]+1839030562&4294967295,I=k+(C<<16&4294967295|C>>>16),C=m+(I^k^_)+S[14]+4259657740&4294967295,m=I+(C<<23&4294967295|C>>>9),C=_+(m^I^k)+S[1]+2763975236&4294967295,_=m+(C<<4&4294967295|C>>>28),C=k+(_^m^I)+S[4]+1272893353&4294967295,k=_+(C<<11&4294967295|C>>>21),C=I+(k^_^m)+S[7]+4139469664&4294967295,I=k+(C<<16&4294967295|C>>>16),C=m+(I^k^_)+S[10]+3200236656&4294967295,m=I+(C<<23&4294967295|C>>>9),C=_+(m^I^k)+S[13]+681279174&4294967295,_=m+(C<<4&4294967295|C>>>28),C=k+(_^m^I)+S[0]+3936430074&4294967295,k=_+(C<<11&4294967295|C>>>21),C=I+(k^_^m)+S[3]+3572445317&4294967295,I=k+(C<<16&4294967295|C>>>16),C=m+(I^k^_)+S[6]+76029189&4294967295,m=I+(C<<23&4294967295|C>>>9),C=_+(m^I^k)+S[9]+3654602809&4294967295,_=m+(C<<4&4294967295|C>>>28),C=k+(_^m^I)+S[12]+3873151461&4294967295,k=_+(C<<11&4294967295|C>>>21),C=I+(k^_^m)+S[15]+530742520&4294967295,I=k+(C<<16&4294967295|C>>>16),C=m+(I^k^_)+S[2]+3299628645&4294967295,m=I+(C<<23&4294967295|C>>>9),C=_+(I^(m|~k))+S[0]+4096336452&4294967295,_=m+(C<<6&4294967295|C>>>26),C=k+(m^(_|~I))+S[7]+1126891415&4294967295,k=_+(C<<10&4294967295|C>>>22),C=I+(_^(k|~m))+S[14]+2878612391&4294967295,I=k+(C<<15&4294967295|C>>>17),C=m+(k^(I|~_))+S[5]+4237533241&4294967295,m=I+(C<<21&4294967295|C>>>11),C=_+(I^(m|~k))+S[12]+1700485571&4294967295,_=m+(C<<6&4294967295|C>>>26),C=k+(m^(_|~I))+S[3]+2399980690&4294967295,k=_+(C<<10&4294967295|C>>>22),C=I+(_^(k|~m))+S[10]+4293915773&4294967295,I=k+(C<<15&4294967295|C>>>17),C=m+(k^(I|~_))+S[1]+2240044497&4294967295,m=I+(C<<21&4294967295|C>>>11),C=_+(I^(m|~k))+S[8]+1873313359&4294967295,_=m+(C<<6&4294967295|C>>>26),C=k+(m^(_|~I))+S[15]+4264355552&4294967295,k=_+(C<<10&4294967295|C>>>22),C=I+(_^(k|~m))+S[6]+2734768916&4294967295,I=k+(C<<15&4294967295|C>>>17),C=m+(k^(I|~_))+S[13]+1309151649&4294967295,m=I+(C<<21&4294967295|C>>>11),C=_+(I^(m|~k))+S[4]+4149444226&4294967295,_=m+(C<<6&4294967295|C>>>26),C=k+(m^(_|~I))+S[11]+3174756917&4294967295,k=_+(C<<10&4294967295|C>>>22),C=I+(_^(k|~m))+S[2]+718787259&4294967295,I=k+(C<<15&4294967295|C>>>17),C=m+(k^(I|~_))+S[9]+3951481745&4294967295,A.g[0]=A.g[0]+_&4294967295,A.g[1]=A.g[1]+(I+(C<<21&4294967295|C>>>11))&4294967295,A.g[2]=A.g[2]+I&4294967295,A.g[3]=A.g[3]+k&4294967295}n.prototype.u=function(A,_){_===void 0&&(_=A.length);for(var m=_-this.blockSize,S=this.B,I=this.h,k=0;k<_;){if(I==0)for(;k<=m;)s(this,A,k),k+=this.blockSize;if(typeof A=="string"){for(;k<_;)if(S[I++]=A.charCodeAt(k++),I==this.blockSize){s(this,S),I=0;break}}else for(;k<_;)if(S[I++]=A[k++],I==this.blockSize){s(this,S),I=0;break}}this.h=I,this.o+=_},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var _=1;_<A.length-8;++_)A[_]=0;var m=8*this.o;for(_=A.length-8;_<A.length;++_)A[_]=m&255,m/=256;for(this.u(A),A=Array(16),_=m=0;4>_;++_)for(var S=0;32>S;S+=8)A[m++]=this.g[_]>>>S&255;return A};function i(A,_){var m=o;return Object.prototype.hasOwnProperty.call(m,A)?m[A]:m[A]=_(A)}function a(A,_){this.h=_;for(var m=[],S=!0,I=A.length-1;0<=I;I--){var k=A[I]|0;S&&k==_||(m[I]=k,S=!1)}this.g=m}var o={};function l(A){return-128<=A&&128>A?i(A,function(_){return new a([_|0],0>_?-1:0)}):new a([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return y(c(-A));for(var _=[],m=1,S=0;A>=m;S++)_[S]=A/m|0,m*=4294967296;return new a(_,0)}function u(A,_){if(A.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(A.charAt(0)=="-")return y(u(A.substring(1),_));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var m=c(Math.pow(_,8)),S=f,I=0;I<A.length;I+=8){var k=Math.min(8,A.length-I),C=parseInt(A.substring(I,I+k),_);8>k?(k=c(Math.pow(_,k)),S=S.j(k).add(c(C))):(S=S.j(m),S=S.add(c(C)))}return S}var f=l(0),h=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(v(this))return-y(this).m();for(var A=0,_=1,m=0;m<this.g.length;m++){var S=this.i(m);A+=(0<=S?S:4294967296+S)*_,_*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(g(this))return"0";if(v(this))return"-"+y(this).toString(A);for(var _=c(Math.pow(A,6)),m=this,S="";;){var I=w(m,_).g;m=b(m,I.j(_));var k=((0<m.g.length?m.g[0]:m.h)>>>0).toString(A);if(m=I,g(m))return k+S;for(;6>k.length;)k="0"+k;S=k+S}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function g(A){if(A.h!=0)return!1;for(var _=0;_<A.g.length;_++)if(A.g[_]!=0)return!1;return!0}function v(A){return A.h==-1}t.l=function(A){return A=b(this,A),v(A)?-1:g(A)?0:1};function y(A){for(var _=A.g.length,m=[],S=0;S<_;S++)m[S]=~A.g[S];return new a(m,~A.h).add(h)}t.abs=function(){return v(this)?y(this):this},t.add=function(A){for(var _=Math.max(this.g.length,A.g.length),m=[],S=0,I=0;I<=_;I++){var k=S+(this.i(I)&65535)+(A.i(I)&65535),C=(k>>>16)+(this.i(I)>>>16)+(A.i(I)>>>16);S=C>>>16,k&=65535,C&=65535,m[I]=C<<16|k}return new a(m,m[m.length-1]&-2147483648?-1:0)};function b(A,_){return A.add(y(_))}t.j=function(A){if(g(this)||g(A))return f;if(v(this))return v(A)?y(this).j(y(A)):y(y(this).j(A));if(v(A))return y(this.j(y(A)));if(0>this.l(p)&&0>A.l(p))return c(this.m()*A.m());for(var _=this.g.length+A.g.length,m=[],S=0;S<2*_;S++)m[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<A.g.length;I++){var k=this.i(S)>>>16,C=this.i(S)&65535,O=A.i(I)>>>16,D=A.i(I)&65535;m[2*S+2*I]+=C*D,E(m,2*S+2*I),m[2*S+2*I+1]+=k*D,E(m,2*S+2*I+1),m[2*S+2*I+1]+=C*O,E(m,2*S+2*I+1),m[2*S+2*I+2]+=k*O,E(m,2*S+2*I+2)}for(S=0;S<_;S++)m[S]=m[2*S+1]<<16|m[2*S];for(S=_;S<2*_;S++)m[S]=0;return new a(m,0)};function E(A,_){for(;(A[_]&65535)!=A[_];)A[_+1]+=A[_]>>>16,A[_]&=65535,_++}function x(A,_){this.g=A,this.h=_}function w(A,_){if(g(_))throw Error("division by zero");if(g(A))return new x(f,f);if(v(A))return _=w(y(A),_),new x(y(_.g),y(_.h));if(v(_))return _=w(A,y(_)),new x(y(_.g),_.h);if(30<A.g.length){if(v(A)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var m=h,S=_;0>=S.l(A);)m=P(m),S=P(S);var I=R(m,1),k=R(S,1);for(S=R(S,2),m=R(m,2);!g(S);){var C=k.add(S);0>=C.l(A)&&(I=I.add(m),k=C),S=R(S,1),m=R(m,1)}return _=b(A,I.j(_)),new x(I,_)}for(I=f;0<=A.l(_);){for(m=Math.max(1,Math.floor(A.m()/_.m())),S=Math.ceil(Math.log(m)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),k=c(m),C=k.j(_);v(C)||0<C.l(A);)m-=S,k=c(m),C=k.j(_);g(k)&&(k=h),I=I.add(k),A=b(A,C)}return new x(I,A)}t.A=function(A){return w(this,A).h},t.and=function(A){for(var _=Math.max(this.g.length,A.g.length),m=[],S=0;S<_;S++)m[S]=this.i(S)&A.i(S);return new a(m,this.h&A.h)},t.or=function(A){for(var _=Math.max(this.g.length,A.g.length),m=[],S=0;S<_;S++)m[S]=this.i(S)|A.i(S);return new a(m,this.h|A.h)},t.xor=function(A){for(var _=Math.max(this.g.length,A.g.length),m=[],S=0;S<_;S++)m[S]=this.i(S)^A.i(S);return new a(m,this.h^A.h)};function P(A){for(var _=A.g.length+1,m=[],S=0;S<_;S++)m[S]=A.i(S)<<1|A.i(S-1)>>>31;return new a(m,A.h)}function R(A,_){var m=_>>5;_%=32;for(var S=A.g.length-m,I=[],k=0;k<S;k++)I[k]=0<_?A.i(k+m)>>>_|A.i(k+m+1)<<32-_:A.i(k+m);return new a(I,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Xw=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,jo=a}).apply(typeof I2<"u"?I2:typeof self<"u"?self:typeof window<"u"?window:{});var Mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yw,gu,Qw,_0,pv,Jw,Zw,eC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,V,K){return T==Array.prototype||T==Object.prototype||(T[V]=K.value),T};function r(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mf=="object"&&Mf];for(var V=0;V<T.length;++V){var K=T[V];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}var n=r(this);function s(T,V){if(V)e:{var K=n;T=T.split(".");for(var oe=0;oe<T.length-1;oe++){var Ce=T[oe];if(!(Ce in K))break e;K=K[Ce]}T=T[T.length-1],oe=K[T],V=V(oe),V!=oe&&V!=null&&e(K,T,{configurable:!0,writable:!0,value:V})}}function i(T,V){T instanceof String&&(T+="");var K=0,oe=!1,Ce={next:function(){if(!oe&&K<T.length){var Ue=K++;return{value:V(Ue,T[Ue]),done:!1}}return oe=!0,{done:!0,value:void 0}}};return Ce[Symbol.iterator]=function(){return Ce},Ce}s("Array.prototype.values",function(T){return T||function(){return i(this,function(V,K){return K})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(T){var V=typeof T;return V=V!="object"?V:T?Array.isArray(T)?"array":V:"null",V=="array"||V=="object"&&typeof T.length=="number"}function c(T){var V=typeof T;return V=="object"&&T!=null||V=="function"}function u(T,V,K){return T.call.apply(T.bind,arguments)}function f(T,V,K){if(!T)throw Error();if(2<arguments.length){var oe=Array.prototype.slice.call(arguments,2);return function(){var Ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ce,oe),T.apply(V,Ce)}}return function(){return T.apply(V,arguments)}}function h(T,V,K){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,h.apply(null,arguments)}function p(T,V){var K=Array.prototype.slice.call(arguments,1);return function(){var oe=K.slice();return oe.push.apply(oe,arguments),T.apply(this,oe)}}function g(T,V){function K(){}K.prototype=V.prototype,T.aa=V.prototype,T.prototype=new K,T.prototype.constructor=T,T.Qb=function(oe,Ce,Ue){for(var tt=Array(arguments.length-2),xr=2;xr<arguments.length;xr++)tt[xr-2]=arguments[xr];return V.prototype[Ce].apply(oe,tt)}}function v(T){const V=T.length;if(0<V){const K=Array(V);for(let oe=0;oe<V;oe++)K[oe]=T[oe];return K}return[]}function y(T,V){for(let K=1;K<arguments.length;K++){const oe=arguments[K];if(l(oe)){const Ce=T.length||0,Ue=oe.length||0;T.length=Ce+Ue;for(let tt=0;tt<Ue;tt++)T[Ce+tt]=oe[tt]}else T.push(oe)}}class b{constructor(V,K){this.i=V,this.j=K,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}function E(T){return/^[\s\xa0]*$/.test(T)}function x(){var T=o.navigator;return T&&(T=T.userAgent)?T:""}function w(T){return w[" "](T),T}w[" "]=function(){};var P=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function R(T,V,K){for(const oe in T)V.call(K,T[oe],oe,T)}function A(T,V){for(const K in T)V.call(void 0,T[K],K,T)}function _(T){const V={};for(const K in T)V[K]=T[K];return V}const m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(T,V){let K,oe;for(let Ce=1;Ce<arguments.length;Ce++){oe=arguments[Ce];for(K in oe)T[K]=oe[K];for(let Ue=0;Ue<m.length;Ue++)K=m[Ue],Object.prototype.hasOwnProperty.call(oe,K)&&(T[K]=oe[K])}}function I(T){var V=1;T=T.split(":");const K=[];for(;0<V&&T.length;)K.push(T.shift()),V--;return T.length&&K.push(T.join(":")),K}function k(T){o.setTimeout(()=>{throw T},0)}function C(){var T=L;let V=null;return T.g&&(V=T.g,T.g=T.g.next,T.g||(T.h=null),V.next=null),V}class O{constructor(){this.h=this.g=null}add(V,K){const oe=D.get();oe.set(V,K),this.h?this.h.next=oe:this.g=oe,this.h=oe}}var D=new b(()=>new F,T=>T.reset());class F{constructor(){this.next=this.g=this.h=null}set(V,K){this.h=V,this.g=K,this.next=null}reset(){this.next=this.g=this.h=null}}let N,M=!1,L=new O,z=()=>{const T=o.Promise.resolve(void 0);N=()=>{T.then(j)}};var j=()=>{for(var T;T=C();){try{T.h.call(T.g)}catch(K){k(K)}var V=D;V.j(T),100>V.h&&(V.h++,T.next=V.g,V.g=T)}M=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(T,V){this.type=T,this.g=this.target=V,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var T=!1,V=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const K=()=>{};o.addEventListener("test",K,V),o.removeEventListener("test",K,V)}catch{}return T}();function ne(T,V){if(G.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var K=this.type=T.type,oe=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=V,V=T.relatedTarget){if(P){e:{try{w(V.nodeName);var Ce=!0;break e}catch{}Ce=!1}Ce||(V=null)}}else K=="mouseover"?V=T.fromElement:K=="mouseout"&&(V=T.toElement);this.relatedTarget=V,oe?(this.clientX=oe.clientX!==void 0?oe.clientX:oe.pageX,this.clientY=oe.clientY!==void 0?oe.clientY:oe.pageY,this.screenX=oe.screenX||0,this.screenY=oe.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:de[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&ne.aa.h.call(this)}}g(ne,G);var de={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),ce=0;function te(T,V,K,oe,Ce){this.listener=T,this.proxy=null,this.src=V,this.type=K,this.capture=!!oe,this.ha=Ce,this.key=++ce,this.da=this.fa=!1}function Z(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function ye(T){this.src=T,this.g={},this.h=0}ye.prototype.add=function(T,V,K,oe,Ce){var Ue=T.toString();T=this.g[Ue],T||(T=this.g[Ue]=[],this.h++);var tt=X(T,V,oe,Ce);return-1<tt?(V=T[tt],K||(V.fa=!1)):(V=new te(V,this.src,Ue,!!oe,Ce),V.fa=K,T.push(V)),V};function J(T,V){var K=V.type;if(K in T.g){var oe=T.g[K],Ce=Array.prototype.indexOf.call(oe,V,void 0),Ue;(Ue=0<=Ce)&&Array.prototype.splice.call(oe,Ce,1),Ue&&(Z(V),T.g[K].length==0&&(delete T.g[K],T.h--))}}function X(T,V,K,oe){for(var Ce=0;Ce<T.length;++Ce){var Ue=T[Ce];if(!Ue.da&&Ue.listener==V&&Ue.capture==!!K&&Ue.ha==oe)return Ce}return-1}var Q="closure_lm_"+(1e6*Math.random()|0),fe={};function ve(T,V,K,oe,Ce){if(Array.isArray(V)){for(var Ue=0;Ue<V.length;Ue++)ve(T,V[Ue],K,oe,Ce);return null}return K=He(K),T&&T[se]?T.K(V,K,c(oe)?!!oe.capture:!1,Ce):ie(T,V,K,!1,oe,Ce)}function ie(T,V,K,oe,Ce,Ue){if(!V)throw Error("Invalid event type");var tt=c(Ce)?!!Ce.capture:!!Ce,xr=We(T);if(xr||(T[Q]=xr=new ye(T)),K=xr.add(V,K,oe,tt,Ue),K.proxy)return K;if(oe=ee(),K.proxy=oe,oe.src=T,oe.listener=K,T.addEventListener)W||(Ce=tt),Ce===void 0&&(Ce=!1),T.addEventListener(V.toString(),oe,Ce);else if(T.attachEvent)T.attachEvent(Ie(V.toString()),oe);else if(T.addListener&&T.removeListener)T.addListener(oe);else throw Error("addEventListener and attachEvent are unavailable.");return K}function ee(){function T(K){return V.call(T.src,T.listener,K)}const V=Ae;return T}function ge(T,V,K,oe,Ce){if(Array.isArray(V))for(var Ue=0;Ue<V.length;Ue++)ge(T,V[Ue],K,oe,Ce);else oe=c(oe)?!!oe.capture:!!oe,K=He(K),T&&T[se]?(T=T.i,V=String(V).toString(),V in T.g&&(Ue=T.g[V],K=X(Ue,K,oe,Ce),-1<K&&(Z(Ue[K]),Array.prototype.splice.call(Ue,K,1),Ue.length==0&&(delete T.g[V],T.h--)))):T&&(T=We(T))&&(V=T.g[V.toString()],T=-1,V&&(T=X(V,K,oe,Ce)),(K=-1<T?V[T]:null)&&Te(K))}function Te(T){if(typeof T!="number"&&T&&!T.da){var V=T.src;if(V&&V[se])J(V.i,T);else{var K=T.type,oe=T.proxy;V.removeEventListener?V.removeEventListener(K,oe,T.capture):V.detachEvent?V.detachEvent(Ie(K),oe):V.addListener&&V.removeListener&&V.removeListener(oe),(K=We(V))?(J(K,T),K.h==0&&(K.src=null,V[Q]=null)):Z(T)}}}function Ie(T){return T in fe?fe[T]:fe[T]="on"+T}function Ae(T,V){if(T.da)T=!0;else{V=new ne(V,this);var K=T.listener,oe=T.ha||T.src;T.fa&&Te(T),T=K.call(oe,V)}return T}function We(T){return T=T[Q],T instanceof ye?T:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function He(T){return typeof T=="function"?T:(T[De]||(T[De]=function(V){return T.handleEvent(V)}),T[De])}function $e(){H.call(this),this.i=new ye(this),this.M=this,this.F=null}g($e,H),$e.prototype[se]=!0,$e.prototype.removeEventListener=function(T,V,K,oe){ge(this,T,V,K,oe)};function ke(T,V){var K,oe=T.F;if(oe)for(K=[];oe;oe=oe.F)K.push(oe);if(T=T.M,oe=V.type||V,typeof V=="string")V=new G(V,T);else if(V instanceof G)V.target=V.target||T;else{var Ce=V;V=new G(oe,T),S(V,Ce)}if(Ce=!0,K)for(var Ue=K.length-1;0<=Ue;Ue--){var tt=V.g=K[Ue];Ce=Ke(tt,oe,!0,V)&&Ce}if(tt=V.g=T,Ce=Ke(tt,oe,!0,V)&&Ce,Ce=Ke(tt,oe,!1,V)&&Ce,K)for(Ue=0;Ue<K.length;Ue++)tt=V.g=K[Ue],Ce=Ke(tt,oe,!1,V)&&Ce}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var T=this.i,V;for(V in T.g){for(var K=T.g[V],oe=0;oe<K.length;oe++)Z(K[oe]);delete T.g[V],T.h--}}this.F=null},$e.prototype.K=function(T,V,K,oe){return this.i.add(String(T),V,!1,K,oe)},$e.prototype.L=function(T,V,K,oe){return this.i.add(String(T),V,!0,K,oe)};function Ke(T,V,K,oe){if(V=T.i.g[String(V)],!V)return!0;V=V.concat();for(var Ce=!0,Ue=0;Ue<V.length;++Ue){var tt=V[Ue];if(tt&&!tt.da&&tt.capture==K){var xr=tt.listener,_n=tt.ha||tt.src;tt.fa&&J(T.i,tt),Ce=xr.call(_n,oe)!==!1&&Ce}}return Ce&&!oe.defaultPrevented}function _e(T,V,K){if(typeof T=="function")K&&(T=h(T,K));else if(T&&typeof T.handleEvent=="function")T=h(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(V)?-1:o.setTimeout(T,V||0)}function Ee(T){T.g=_e(()=>{T.g=null,T.i&&(T.i=!1,Ee(T))},T.l);const V=T.h;T.h=null,T.m.apply(null,V)}class Se extends H{constructor(V,K){super(),this.m=V,this.l=K,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:Ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Me(T){H.call(this),this.h=T,this.g={}}g(Me,H);var ze=[];function lt(T){R(T.g,function(V,K){this.g.hasOwnProperty(K)&&Te(V)},T),T.g={}}Me.prototype.N=function(){Me.aa.N.call(this),lt(this)},Me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vt=o.JSON.stringify,bt=o.JSON.parse,$t=class{stringify(T){return o.JSON.stringify(T,void 0)}parse(T){return o.JSON.parse(T,void 0)}};function ft(){}ft.prototype.h=null;function ct(T){return T.h||(T.h=T.i())}function ht(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rt(){G.call(this,"d")}g(Rt,G);function gr(){G.call(this,"c")}g(gr,G);var rs={},Pi=null;function ps(){return Pi=Pi||new $e}rs.La="serverreachability";function Sl(T){G.call(this,rs.La,T)}g(Sl,G);function Ga(T){const V=ps();ke(V,new Sl(V))}rs.STAT_EVENT="statevent";function _o(T,V){G.call(this,rs.STAT_EVENT,T),this.stat=V}g(_o,G);function sn(T){const V=ps();ke(V,new _o(V,T))}rs.Ma="timingevent";function bo(T,V){G.call(this,rs.Ma,T),this.size=V}g(bo,G);function Rr(T,V){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){T()},V)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function Al(T,V,K,oe,Ce,Ue){T.info(function(){if(T.g)if(Ue)for(var tt="",xr=Ue.split("&"),_n=0;_n<xr.length;_n++){var ir=xr[_n].split("=");if(1<ir.length){var Mn=ir[0];ir=ir[1];var Ln=Mn.split("_");tt=2<=Ln.length&&Ln[1]=="type"?tt+(Mn+"="+ir+"&"):tt+(Mn+"=redacted&")}}else tt=null;else tt=Ue;return"XMLHTTP REQ ("+oe+") [attempt "+Ce+"]: "+V+`
`+K+`
`+tt})}function zc(T,V,K,oe,Ce,Ue,tt){T.info(function(){return"XMLHTTP RESP ("+oe+") [ attempt "+Ce+"]: "+V+`
`+K+`
`+Ue+" "+tt})}function re(T,V,K,oe){T.info(function(){return"XMLHTTP TEXT ("+V+"): "+le(T,K)+(oe?" "+oe:"")})}function he(T,V){T.info(function(){return"TIMEOUT: "+V})}On.prototype.info=function(){};function le(T,V){if(!T.g)return V;if(!V)return null;try{var K=JSON.parse(V);if(K){for(T=0;T<K.length;T++)if(Array.isArray(K[T])){var oe=K[T];if(!(2>oe.length)){var Ce=oe[1];if(Array.isArray(Ce)&&!(1>Ce.length)){var Ue=Ce[0];if(Ue!="noop"&&Ue!="stop"&&Ue!="close")for(var tt=1;tt<Ce.length;tt++)Ce[tt]=""}}}}return vt(K)}catch{return V}}var ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},me;function Re(){}g(Re,ft),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},me=new Re;function Ve(T,V,K,oe){this.j=T,this.i=V,this.l=K,this.R=oe||1,this.U=new Me(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fe}function Fe(){this.i=null,this.g="",this.h=!1}var Ne={},Le={};function Ye(T,V,K){T.L=1,T.v=gf(za(V)),T.m=K,T.P=!0,et(T,null)}function et(T,V){T.F=Date.now(),st(T),T.A=za(T.v);var K=T.A,oe=T.R;Array.isArray(oe)||(oe=[String(oe)]),zx(K.i,"t",oe),T.C=0,K=T.j.J,T.h=new Fe,T.g=uE(T.j,K?V:null,!T.m),0<T.O&&(T.M=new Se(h(T.Y,T,T.g),T.O)),V=T.U,K=T.g,oe=T.ca;var Ce="readystatechange";Array.isArray(Ce)||(Ce&&(ze[0]=Ce.toString()),Ce=ze);for(var Ue=0;Ue<Ce.length;Ue++){var tt=ve(K,Ce[Ue],oe||V.handleEvent,!1,V.h||V);if(!tt)break;V.g[tt.key]=tt}V=T.H?_(T.H):{},T.m?(T.u||(T.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,V)):(T.u="GET",T.g.ea(T.A,T.u,null,V)),Ga(),Al(T.i,T.u,T.A,T.l,T.R,T.m)}Ve.prototype.ca=function(T){T=T.target;const V=this.M;V&&Ka(T)==3?V.j():this.Y(T)},Ve.prototype.Y=function(T){try{if(T==this.g)e:{const Ln=Ka(this.g);var V=this.g.Ba();const Il=this.g.Z();if(!(3>Ln)&&(Ln!=3||this.g&&(this.h.h||this.g.oa()||Zx(this.g)))){this.J||Ln!=4||V==7||(V==8||0>=Il?Ga(3):Ga(2)),yr(this);var K=this.g.Z();this.X=K;t:if(ut(this)){var oe=Zx(this.g);T="";var Ce=oe.length,Ue=Ka(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),pr(this);var tt="";break t}this.h.i=new o.TextDecoder}for(V=0;V<Ce;V++)this.h.h=!0,T+=this.h.i.decode(oe[V],{stream:!(Ue&&V==Ce-1)});oe.length=0,this.h.g+=T,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=K==200,zc(this.i,this.u,this.A,this.l,this.R,Ln,K),this.o){if(this.T&&!this.K){t:{if(this.g){var xr,_n=this.g;if((xr=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(xr)){var ir=xr;break t}}ir=null}if(K=ir)re(this.i,this.l,K,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wa(this,K);else{this.o=!1,this.s=3,sn(12),Ir(this),pr(this);break e}}if(this.P){K=!0;let Qs;for(;!this.J&&this.C<tt.length;)if(Qs=Je(this,tt),Qs==Le){Ln==4&&(this.s=4,sn(14),K=!1),re(this.i,this.l,null,"[Incomplete Response]");break}else if(Qs==Ne){this.s=4,sn(15),re(this.i,this.l,tt,"[Invalid Chunk]"),K=!1;break}else re(this.i,this.l,Qs,null),Wa(this,Qs);if(ut(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||tt.length!=0||this.h.h||(this.s=1,sn(16),K=!1),this.o=this.o&&K,!K)re(this.i,this.l,tt,"[Invalid Chunked Response]"),Ir(this),pr(this);else if(0<tt.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),zp(Mn),Mn.M=!0,sn(11))}}else re(this.i,this.l,tt,null),Wa(this,tt);Ln==4&&Ir(this),this.o&&!this.J&&(Ln==4?iE(this.j,this):(this.o=!1,st(this)))}else PD(this.g),K==400&&0<tt.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),Ir(this),pr(this)}}}catch{}finally{}};function ut(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function Je(T,V){var K=T.C,oe=V.indexOf(`
`,K);return oe==-1?Le:(K=Number(V.substring(K,oe)),isNaN(K)?Ne:(oe+=1,oe+K>V.length?Le:(V=V.slice(oe,oe+K),T.C=oe+K,V)))}Ve.prototype.cancel=function(){this.J=!0,Ir(this)};function st(T){T.S=Date.now()+T.I,kt(T,T.I)}function kt(T,V){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Rr(h(T.ba,T),V)}function yr(T){T.B&&(o.clearTimeout(T.B),T.B=null)}Ve.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(he(this.i,this.A),this.L!=2&&(Ga(),sn(17)),Ir(this),this.s=2,pr(this)):kt(this,this.S-T)};function pr(T){T.j.G==0||T.J||iE(T.j,T)}function Ir(T){yr(T);var V=T.M;V&&typeof V.ma=="function"&&V.ma(),T.M=null,lt(T.U),T.g&&(V=T.g,T.g=null,V.abort(),V.ma())}function Wa(T,V){try{var K=T.j;if(K.G!=0&&(K.g==T||bs(K.h,T))){if(!T.K&&bs(K.h,T)&&K.G==3){try{var oe=K.Da.g.parse(V)}catch{oe=null}if(Array.isArray(oe)&&oe.length==3){var Ce=oe;if(Ce[0]==0){e:if(!K.u){if(K.g)if(K.g.F+3e3<T.F)bf(K),Ef(K);else break e;Wp(K),sn(18)}}else K.za=Ce[1],0<K.za-K.T&&37500>Ce[2]&&K.F&&K.v==0&&!K.C&&(K.C=Rr(h(K.Za,K),6e3));if(1>=Tl(K.h)&&K.ca){try{K.ca()}catch{}K.ca=void 0}}else To(K,11)}else if((T.K||K.g==T)&&bf(K),!E(V))for(Ce=K.Da.g.parse(V),V=0;V<Ce.length;V++){let ir=Ce[V];if(K.T=ir[0],ir=ir[1],K.G==2)if(ir[0]=="c"){K.K=ir[1],K.ia=ir[2];const Mn=ir[3];Mn!=null&&(K.la=Mn,K.j.info("VER="+K.la));const Ln=ir[4];Ln!=null&&(K.Aa=Ln,K.j.info("SVER="+K.Aa));const Il=ir[5];Il!=null&&typeof Il=="number"&&0<Il&&(oe=1.5*Il,K.L=oe,K.j.info("backChannelRequestTimeoutMs_="+oe)),oe=K;const Qs=T.g;if(Qs){const Af=Qs.g?Qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Af){var Ue=oe.h;Ue.g||Af.indexOf("spdy")==-1&&Af.indexOf("quic")==-1&&Af.indexOf("h2")==-1||(Ue.j=Ue.l,Ue.g=new Set,Ue.h&&(Hp(Ue,Ue.h),Ue.h=null))}if(oe.D){const Kp=Qs.g?Qs.g.getResponseHeader("X-HTTP-Session-Id"):null;Kp&&(oe.ya=Kp,wr(oe.I,oe.D,Kp))}}K.G=3,K.l&&K.l.ua(),K.ba&&(K.R=Date.now()-T.F,K.j.info("Handshake RTT: "+K.R+"ms")),oe=K;var tt=T;if(oe.qa=cE(oe,oe.J?oe.ia:null,oe.W),tt.K){Bx(oe.h,tt);var xr=tt,_n=oe.L;_n&&(xr.I=_n),xr.B&&(yr(xr),st(xr)),oe.g=tt}else sE(oe);0<K.i.length&&_f(K)}else ir[0]!="stop"&&ir[0]!="close"||To(K,7);else K.G==3&&(ir[0]=="stop"||ir[0]=="close"?ir[0]=="stop"?To(K,7):Gp(K):ir[0]!="noop"&&K.l&&K.l.ta(ir),K.v=0)}}Ga(4)}catch{}}var So=class{constructor(T,V){this.g=T,this.map=V}};function Ri(T){this.l=T||10,o.PerformanceNavigationTiming?(T=o.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _a(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Tl(T){return T.h?1:T.g?T.g.size:0}function bs(T,V){return T.h?T.h==V:T.g?T.g.has(V):!1}function Hp(T,V){T.g?T.g.add(V):T.h=V}function Bx(T,V){T.h&&T.h==V?T.h=null:T.g&&T.g.has(V)&&T.g.delete(V)}Ri.prototype.cancel=function(){if(this.i=Ux(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function Ux(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let V=T.i;for(const K of T.g.values())V=V.concat(K.D);return V}return v(T.i)}function gD(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(l(T)){for(var V=[],K=T.length,oe=0;oe<K;oe++)V.push(T[oe]);return V}V=[],K=0;for(oe in T)V[K++]=T[oe];return V}function vD(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(l(T)||typeof T=="string"){var V=[];T=T.length;for(var K=0;K<T;K++)V.push(K);return V}V=[],K=0;for(const oe in T)V[K++]=oe;return V}}}function $x(T,V){if(T.forEach&&typeof T.forEach=="function")T.forEach(V,void 0);else if(l(T)||typeof T=="string")Array.prototype.forEach.call(T,V,void 0);else for(var K=vD(T),oe=gD(T),Ce=oe.length,Ue=0;Ue<Ce;Ue++)V.call(void 0,oe[Ue],K&&K[Ue],T)}var Vx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yD(T,V){if(T){T=T.split("&");for(var K=0;K<T.length;K++){var oe=T[K].indexOf("="),Ce=null;if(0<=oe){var Ue=T[K].substring(0,oe);Ce=T[K].substring(oe+1)}else Ue=T[K];V(Ue,Ce?decodeURIComponent(Ce.replace(/\+/g," ")):"")}}}function Ao(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof Ao){this.h=T.h,pf(this,T.j),this.o=T.o,this.g=T.g,mf(this,T.s),this.l=T.l;var V=T.i,K=new Xc;K.i=V.i,V.g&&(K.g=new Map(V.g),K.h=V.h),Hx(this,K),this.m=T.m}else T&&(V=String(T).match(Vx))?(this.h=!1,pf(this,V[1]||"",!0),this.o=Kc(V[2]||""),this.g=Kc(V[3]||"",!0),mf(this,V[4]),this.l=Kc(V[5]||"",!0),Hx(this,V[6]||"",!0),this.m=Kc(V[7]||"")):(this.h=!1,this.i=new Xc(null,this.h))}Ao.prototype.toString=function(){var T=[],V=this.j;V&&T.push(qc(V,jx,!0),":");var K=this.g;return(K||V=="file")&&(T.push("//"),(V=this.o)&&T.push(qc(V,jx,!0),"@"),T.push(encodeURIComponent(String(K)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),K=this.s,K!=null&&T.push(":",String(K))),(K=this.l)&&(this.g&&K.charAt(0)!="/"&&T.push("/"),T.push(qc(K,K.charAt(0)=="/"?_D:ED,!0))),(K=this.i.toString())&&T.push("?",K),(K=this.m)&&T.push("#",qc(K,SD)),T.join("")};function za(T){return new Ao(T)}function pf(T,V,K){T.j=K?Kc(V,!0):V,T.j&&(T.j=T.j.replace(/:$/,""))}function mf(T,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);T.s=V}else T.s=null}function Hx(T,V,K){V instanceof Xc?(T.i=V,AD(T.i,T.h)):(K||(V=qc(V,bD)),T.i=new Xc(V,T.h))}function wr(T,V,K){T.i.set(V,K)}function gf(T){return wr(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function Kc(T,V){return T?V?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function qc(T,V,K){return typeof T=="string"?(T=encodeURI(T).replace(V,xD),K&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function xD(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var jx=/[#\/\?@]/g,ED=/[#\?:]/g,_D=/[#\?]/g,bD=/[#\?@]/g,SD=/#/g;function Xc(T,V){this.h=this.g=null,this.i=T||null,this.j=!!V}function Fi(T){T.g||(T.g=new Map,T.h=0,T.i&&yD(T.i,function(V,K){T.add(decodeURIComponent(V.replace(/\+/g," ")),K)}))}t=Xc.prototype,t.add=function(T,V){Fi(this),this.i=null,T=wl(this,T);var K=this.g.get(T);return K||this.g.set(T,K=[]),K.push(V),this.h+=1,this};function Gx(T,V){Fi(T),V=wl(T,V),T.g.has(V)&&(T.i=null,T.h-=T.g.get(V).length,T.g.delete(V))}function Wx(T,V){return Fi(T),V=wl(T,V),T.g.has(V)}t.forEach=function(T,V){Fi(this),this.g.forEach(function(K,oe){K.forEach(function(Ce){T.call(V,Ce,oe,this)},this)},this)},t.na=function(){Fi(this);const T=Array.from(this.g.values()),V=Array.from(this.g.keys()),K=[];for(let oe=0;oe<V.length;oe++){const Ce=T[oe];for(let Ue=0;Ue<Ce.length;Ue++)K.push(V[oe])}return K},t.V=function(T){Fi(this);let V=[];if(typeof T=="string")Wx(this,T)&&(V=V.concat(this.g.get(wl(this,T))));else{T=Array.from(this.g.values());for(let K=0;K<T.length;K++)V=V.concat(T[K])}return V},t.set=function(T,V){return Fi(this),this.i=null,T=wl(this,T),Wx(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[V]),this.h+=1,this},t.get=function(T,V){return T?(T=this.V(T),0<T.length?String(T[0]):V):V};function zx(T,V,K){Gx(T,V),0<K.length&&(T.i=null,T.g.set(wl(T,V),v(K)),T.h+=K.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],V=Array.from(this.g.keys());for(var K=0;K<V.length;K++){var oe=V[K];const Ue=encodeURIComponent(String(oe)),tt=this.V(oe);for(oe=0;oe<tt.length;oe++){var Ce=Ue;tt[oe]!==""&&(Ce+="="+encodeURIComponent(String(tt[oe]))),T.push(Ce)}}return this.i=T.join("&")};function wl(T,V){return V=String(V),T.j&&(V=V.toLowerCase()),V}function AD(T,V){V&&!T.j&&(Fi(T),T.i=null,T.g.forEach(function(K,oe){var Ce=oe.toLowerCase();oe!=Ce&&(Gx(this,oe),zx(this,Ce,K))},T)),T.j=V}function TD(T,V){const K=new On;if(o.Image){const oe=new Image;oe.onload=p(Ni,K,"TestLoadImage: loaded",!0,V,oe),oe.onerror=p(Ni,K,"TestLoadImage: error",!1,V,oe),oe.onabort=p(Ni,K,"TestLoadImage: abort",!1,V,oe),oe.ontimeout=p(Ni,K,"TestLoadImage: timeout",!1,V,oe),o.setTimeout(function(){oe.ontimeout&&oe.ontimeout()},1e4),oe.src=T}else V(!1)}function wD(T,V){const K=new On,oe=new AbortController,Ce=setTimeout(()=>{oe.abort(),Ni(K,"TestPingServer: timeout",!1,V)},1e4);fetch(T,{signal:oe.signal}).then(Ue=>{clearTimeout(Ce),Ue.ok?Ni(K,"TestPingServer: ok",!0,V):Ni(K,"TestPingServer: server error",!1,V)}).catch(()=>{clearTimeout(Ce),Ni(K,"TestPingServer: error",!1,V)})}function Ni(T,V,K,oe,Ce){try{Ce&&(Ce.onload=null,Ce.onerror=null,Ce.onabort=null,Ce.ontimeout=null),oe(K)}catch{}}function CD(){this.g=new $t}function ID(T,V,K){const oe=K||"";try{$x(T,function(Ce,Ue){let tt=Ce;c(Ce)&&(tt=vt(Ce)),V.push(oe+Ue+"="+encodeURIComponent(tt))})}catch(Ce){throw V.push(oe+"type="+encodeURIComponent("_badmap")),Ce}}function vf(T){this.l=T.Ub||null,this.j=T.eb||!1}g(vf,ft),vf.prototype.g=function(){return new yf(this.l,this.j)},vf.prototype.i=function(T){return function(){return T}}({});function yf(T,V){$e.call(this),this.D=T,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(yf,$e),t=yf.prototype,t.open=function(T,V){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=V,this.readyState=1,Qc(this)},t.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(V.body=T),(this.D||o).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yc(this)),this.readyState=0},t.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Qc(this)),this.g&&(this.readyState=3,Qc(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kx(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kx(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}t.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var V=T.value?T.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!T.done}))&&(this.response=this.responseText+=V)}T.done?Yc(this):Qc(this),this.readyState==3&&Kx(this)}},t.Ra=function(T){this.g&&(this.response=this.responseText=T,Yc(this))},t.Qa=function(T){this.g&&(this.response=T,Yc(this))},t.ga=function(){this.g&&Yc(this)};function Yc(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Qc(T)}t.setRequestHeader=function(T,V){this.u.append(T,V)},t.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],V=this.h.entries();for(var K=V.next();!K.done;)K=K.value,T.push(K[0]+": "+K[1]),K=V.next();return T.join(`\r
`)};function Qc(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(yf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function qx(T){let V="";return R(T,function(K,oe){V+=oe,V+=":",V+=K,V+=`\r
`}),V}function jp(T,V,K){e:{for(oe in K){var oe=!1;break e}oe=!0}oe||(K=qx(K),typeof T=="string"?K!=null&&encodeURIComponent(String(K)):wr(T,V,K))}function Mr(T){$e.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Mr,$e);var kD=/^https?$/i,DD=["POST","PUT"];t=Mr.prototype,t.Ha=function(T){this.J=T},t.ea=function(T,V,K,oe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);V=V?V.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():me.g(),this.v=this.o?ct(this.o):ct(me),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(V,String(T),!0),this.B=!1}catch(Ue){Xx(this,Ue);return}if(T=K||"",K=new Map(this.headers),oe)if(Object.getPrototypeOf(oe)===Object.prototype)for(var Ce in oe)K.set(Ce,oe[Ce]);else if(typeof oe.keys=="function"&&typeof oe.get=="function")for(const Ue of oe.keys())K.set(Ue,oe.get(Ue));else throw Error("Unknown input type for opt_headers: "+String(oe));oe=Array.from(K.keys()).find(Ue=>Ue.toLowerCase()=="content-type"),Ce=o.FormData&&T instanceof o.FormData,!(0<=Array.prototype.indexOf.call(DD,V,void 0))||oe||Ce||K.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ue,tt]of K)this.g.setRequestHeader(Ue,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jx(this),this.u=!0,this.g.send(T),this.u=!1}catch(Ue){Xx(this,Ue)}};function Xx(T,V){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=V,T.m=5,Yx(T),xf(T)}function Yx(T){T.A||(T.A=!0,ke(T,"complete"),ke(T,"error"))}t.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,ke(this,"complete"),ke(this,"abort"),xf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xf(this,!0)),Mr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qx(this):this.bb())},t.bb=function(){Qx(this)};function Qx(T){if(T.h&&typeof a<"u"&&(!T.v[1]||Ka(T)!=4||T.Z()!=2)){if(T.u&&Ka(T)==4)_e(T.Ea,0,T);else if(ke(T,"readystatechange"),Ka(T)==4){T.h=!1;try{const tt=T.Z();e:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var K;if(!(K=V)){var oe;if(oe=tt===0){var Ce=String(T.D).match(Vx)[1]||null;!Ce&&o.self&&o.self.location&&(Ce=o.self.location.protocol.slice(0,-1)),oe=!kD.test(Ce?Ce.toLowerCase():"")}K=oe}if(K)ke(T,"complete"),ke(T,"success");else{T.m=6;try{var Ue=2<Ka(T)?T.g.statusText:""}catch{Ue=""}T.l=Ue+" ["+T.Z()+"]",Yx(T)}}finally{xf(T)}}}}function xf(T,V){if(T.g){Jx(T);const K=T.g,oe=T.v[0]?()=>{}:null;T.g=null,T.v=null,V||ke(T,"ready");try{K.onreadystatechange=oe}catch{}}}function Jx(T){T.I&&(o.clearTimeout(T.I),T.I=null)}t.isActive=function(){return!!this.g};function Ka(T){return T.g?T.g.readyState:0}t.Z=function(){try{return 2<Ka(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(T){if(this.g){var V=this.g.responseText;return T&&V.indexOf(T)==0&&(V=V.substring(T.length)),bt(V)}};function Zx(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function PD(T){const V={};T=(T.g&&2<=Ka(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let oe=0;oe<T.length;oe++){if(E(T[oe]))continue;var K=I(T[oe]);const Ce=K[0];if(K=K[1],typeof K!="string")continue;K=K.trim();const Ue=V[Ce]||[];V[Ce]=Ue,Ue.push(K)}A(V,function(oe){return oe.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jc(T,V,K){return K&&K.internalChannelParams&&K.internalChannelParams[T]||V}function eE(T){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jc("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jc("baseRetryDelayMs",5e3,T),this.cb=Jc("retryDelaySeedMs",1e4,T),this.Wa=Jc("forwardChannelMaxRetries",2,T),this.wa=Jc("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Ri(T&&T.concurrentRequestLimit),this.Da=new CD,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=eE.prototype,t.la=8,t.G=1,t.connect=function(T,V,K,oe){sn(0),this.W=T,this.H=V||{},K&&oe!==void 0&&(this.H.OSID=K,this.H.OAID=oe),this.F=this.X,this.I=cE(this,null,this.W),_f(this)};function Gp(T){if(tE(T),T.G==3){var V=T.U++,K=za(T.I);if(wr(K,"SID",T.K),wr(K,"RID",V),wr(K,"TYPE","terminate"),Zc(T,K),V=new Ve(T,T.j,V),V.L=2,V.v=gf(za(K)),K=!1,o.navigator&&o.navigator.sendBeacon)try{K=o.navigator.sendBeacon(V.v.toString(),"")}catch{}!K&&o.Image&&(new Image().src=V.v,K=!0),K||(V.g=uE(V.j,null),V.g.ea(V.v)),V.F=Date.now(),st(V)}lE(T)}function Ef(T){T.g&&(zp(T),T.g.cancel(),T.g=null)}function tE(T){Ef(T),T.u&&(o.clearTimeout(T.u),T.u=null),bf(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&o.clearTimeout(T.s),T.s=null)}function _f(T){if(!_a(T.h)&&!T.s){T.s=!0;var V=T.Ga;N||z(),M||(N(),M=!0),L.add(V,T),T.B=0}}function RD(T,V){return Tl(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=V.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Rr(h(T.Ga,T,V),oE(T,T.B)),T.B++,!0)}t.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const Ce=new Ve(this,this.j,T);let Ue=this.o;if(this.S&&(Ue?(Ue=_(Ue),S(Ue,this.S)):Ue=this.S),this.m!==null||this.O||(Ce.H=Ue,Ue=null),this.P)e:{for(var V=0,K=0;K<this.i.length;K++){t:{var oe=this.i[K];if("__data__"in oe.map&&(oe=oe.map.__data__,typeof oe=="string")){oe=oe.length;break t}oe=void 0}if(oe===void 0)break;if(V+=oe,4096<V){V=K;break e}if(V===4096||K===this.i.length-1){V=K+1;break e}}V=1e3}else V=1e3;V=nE(this,Ce,V),K=za(this.I),wr(K,"RID",T),wr(K,"CVER",22),this.D&&wr(K,"X-HTTP-Session-Id",this.D),Zc(this,K),Ue&&(this.O?V="headers="+encodeURIComponent(String(qx(Ue)))+"&"+V:this.m&&jp(K,this.m,Ue)),Hp(this.h,Ce),this.Ua&&wr(K,"TYPE","init"),this.P?(wr(K,"$req",V),wr(K,"SID","null"),Ce.T=!0,Ye(Ce,K,null)):Ye(Ce,K,V),this.G=2}}else this.G==3&&(T?rE(this,T):this.i.length==0||_a(this.h)||rE(this))};function rE(T,V){var K;V?K=V.l:K=T.U++;const oe=za(T.I);wr(oe,"SID",T.K),wr(oe,"RID",K),wr(oe,"AID",T.T),Zc(T,oe),T.m&&T.o&&jp(oe,T.m,T.o),K=new Ve(T,T.j,K,T.B+1),T.m===null&&(K.H=T.o),V&&(T.i=V.D.concat(T.i)),V=nE(T,K,1e3),K.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Hp(T.h,K),Ye(K,oe,V)}function Zc(T,V){T.H&&R(T.H,function(K,oe){wr(V,oe,K)}),T.l&&$x({},function(K,oe){wr(V,oe,K)})}function nE(T,V,K){K=Math.min(T.i.length,K);var oe=T.l?h(T.l.Na,T.l,T):null;e:{var Ce=T.i;let Ue=-1;for(;;){const tt=["count="+K];Ue==-1?0<K?(Ue=Ce[0].g,tt.push("ofs="+Ue)):Ue=0:tt.push("ofs="+Ue);let xr=!0;for(let _n=0;_n<K;_n++){let ir=Ce[_n].g;const Mn=Ce[_n].map;if(ir-=Ue,0>ir)Ue=Math.max(0,Ce[_n].g-100),xr=!1;else try{ID(Mn,tt,"req"+ir+"_")}catch{oe&&oe(Mn)}}if(xr){oe=tt.join("&");break e}}}return T=T.i.splice(0,K),V.D=T,oe}function sE(T){if(!T.g&&!T.u){T.Y=1;var V=T.Fa;N||z(),M||(N(),M=!0),L.add(V,T),T.v=0}}function Wp(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Rr(h(T.Fa,T),oE(T,T.v)),T.v++,!0)}t.Fa=function(){if(this.u=null,aE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Rr(h(this.ab,this),T)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),Ef(this),aE(this))};function zp(T){T.A!=null&&(o.clearTimeout(T.A),T.A=null)}function aE(T){T.g=new Ve(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var V=za(T.qa);wr(V,"RID","rpc"),wr(V,"SID",T.K),wr(V,"AID",T.T),wr(V,"CI",T.F?"0":"1"),!T.F&&T.ja&&wr(V,"TO",T.ja),wr(V,"TYPE","xmlhttp"),Zc(T,V),T.m&&T.o&&jp(V,T.m,T.o),T.L&&(T.g.I=T.L);var K=T.g;T=T.ia,K.L=1,K.v=gf(za(V)),K.m=null,K.P=!0,et(K,T)}t.Za=function(){this.C!=null&&(this.C=null,Ef(this),Wp(this),sn(19))};function bf(T){T.C!=null&&(o.clearTimeout(T.C),T.C=null)}function iE(T,V){var K=null;if(T.g==V){bf(T),zp(T),T.g=null;var oe=2}else if(bs(T.h,V))K=V.D,Bx(T.h,V),oe=1;else return;if(T.G!=0){if(V.o)if(oe==1){K=V.m?V.m.length:0,V=Date.now()-V.F;var Ce=T.B;oe=ps(),ke(oe,new bo(oe,K)),_f(T)}else sE(T);else if(Ce=V.s,Ce==3||Ce==0&&0<V.X||!(oe==1&&RD(T,V)||oe==2&&Wp(T)))switch(K&&0<K.length&&(V=T.h,V.i=V.i.concat(K)),Ce){case 1:To(T,5);break;case 4:To(T,10);break;case 3:To(T,6);break;default:To(T,2)}}}function oE(T,V){let K=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(K*=2),K*V}function To(T,V){if(T.j.info("Error code "+V),V==2){var K=h(T.fb,T),oe=T.Xa;const Ce=!oe;oe=new Ao(oe||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||pf(oe,"https"),gf(oe),Ce?TD(oe.toString(),K):wD(oe.toString(),K)}else sn(2);T.G=0,T.l&&T.l.sa(V),lE(T),tE(T)}t.fb=function(T){T?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function lE(T){if(T.G=0,T.ka=[],T.l){const V=Ux(T.h);(V.length!=0||T.i.length!=0)&&(y(T.ka,V),y(T.ka,T.i),T.h.i.length=0,v(T.i),T.i.length=0),T.l.ra()}}function cE(T,V,K){var oe=K instanceof Ao?za(K):new Ao(K);if(oe.g!="")V&&(oe.g=V+"."+oe.g),mf(oe,oe.s);else{var Ce=o.location;oe=Ce.protocol,V=V?V+"."+Ce.hostname:Ce.hostname,Ce=+Ce.port;var Ue=new Ao(null);oe&&pf(Ue,oe),V&&(Ue.g=V),Ce&&mf(Ue,Ce),K&&(Ue.l=K),oe=Ue}return K=T.D,V=T.ya,K&&V&&wr(oe,K,V),wr(oe,"VER",T.la),Zc(T,oe),oe}function uE(T,V,K){if(V&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return V=T.Ca&&!T.pa?new Mr(new vf({eb:K})):new Mr(T.pa),V.Ha(T.J),V}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dE(){}t=dE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sf(){}Sf.prototype.g=function(T,V){return new Ss(T,V)};function Ss(T,V){$e.call(this),this.g=new eE(V),this.l=T,this.h=V&&V.messageUrlParams||null,T=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(T?T["X-WebChannel-Content-Type"]=V.messageContentType:T={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(T?T["X-WebChannel-Client-Profile"]=V.va:T={"X-WebChannel-Client-Profile":V.va}),this.g.S=T,(T=V&&V.Sb)&&!E(T)&&(this.g.m=T),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!E(V)&&(this.g.D=V,T=this.h,T!==null&&V in T&&(T=this.h,V in T&&delete T[V])),this.j=new Cl(this)}g(Ss,$e),Ss.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ss.prototype.close=function(){Gp(this.g)},Ss.prototype.o=function(T){var V=this.g;if(typeof T=="string"){var K={};K.__data__=T,T=K}else this.u&&(K={},K.__data__=vt(T),T=K);V.i.push(new So(V.Ya++,T)),V.G==3&&_f(V)},Ss.prototype.N=function(){this.g.l=null,delete this.j,Gp(this.g),delete this.g,Ss.aa.N.call(this)};function fE(T){Rt.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var V=T.__sm__;if(V){e:{for(const K in V){T=K;break e}T=void 0}(this.i=T)&&(T=this.i,V=V!==null&&T in V?V[T]:void 0),this.data=V}else this.data=T}g(fE,Rt);function hE(){gr.call(this),this.status=1}g(hE,gr);function Cl(T){this.g=T}g(Cl,dE),Cl.prototype.ua=function(){ke(this.g,"a")},Cl.prototype.ta=function(T){ke(this.g,new fE(T))},Cl.prototype.sa=function(T){ke(this.g,new hE)},Cl.prototype.ra=function(){ke(this.g,"b")},Sf.prototype.createWebChannel=Sf.prototype.g,Ss.prototype.send=Ss.prototype.o,Ss.prototype.open=Ss.prototype.m,Ss.prototype.close=Ss.prototype.close,eC=function(){return new Sf},Zw=function(){return ps()},Jw=rs,pv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,_0=ue,pe.COMPLETE="complete",Qw=pe,ht.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",$e.prototype.listen=$e.prototype.K,gu=ht,Mr.prototype.listenOnce=Mr.prototype.L,Mr.prototype.getLastError=Mr.prototype.Ka,Mr.prototype.getLastErrorCode=Mr.prototype.Ba,Mr.prototype.getStatus=Mr.prototype.Z,Mr.prototype.getResponseJson=Mr.prototype.Oa,Mr.prototype.getResponseText=Mr.prototype.oa,Mr.prototype.send=Mr.prototype.ea,Mr.prototype.setWithCredentials=Mr.prototype.Ha,Yw=Mr}).apply(typeof Mf<"u"?Mf:typeof self<"u"?self:typeof window<"u"?window:{});const k2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new F1("@firebase/firestore");function nu(){return Jo.logLevel}function pt(t,...e){if(Jo.logLevel<=Yt.DEBUG){const r=e.map(Q1);Jo.debug(`Firestore (${Mc}): ${t}`,...r)}}function Si(t,...e){if(Jo.logLevel<=Yt.ERROR){const r=e.map(Q1);Jo.error(`Firestore (${Mc}): ${t}`,...r)}}function Zo(t,...e){if(Jo.logLevel<=Yt.WARN){const r=e.map(Q1);Jo.warn(`Firestore (${Mc}): ${t}`,...r)}}function Q1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t="Unexpected state"){const e=`FIRESTORE (${Mc}) INTERNAL ASSERTION FAILED: `+t;throw Si(e),new Error(e)}function mr(t,e){t||Pt()}function Lt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends ya{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Hn.UNAUTHENTICATED))}shutdown(){}}class N5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class O5{constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){mr(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ui,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ui)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(mr(typeof n.accessToken=="string"),new tC(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mr(e===null||typeof e=="string"),new Hn(e)}}class M5{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class L5{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new M5(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){mr(this.o===void 0);const n=i=>{i.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,pt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(mr(typeof r.token=="string"),this.R=r.token,new B5(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=$5(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function lr(t,e){return t<e?-1:t>e?1:0}function Ec(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new nt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new nt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new nt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new nn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lr(this.nanoseconds,e.nanoseconds):lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new nn(0,0))}static max(){return new Ot(new nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,r,n){r===void 0?r=0:r>e.length&&Pt(),n===void 0?n=e.length-r:n>e.length-r&&Pt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return gd.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof gd?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Sr extends gd{construct(e,r,n){return new Sr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new nt(Ge.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Sr(r)}static emptyPath(){return new Sr([])}}const V5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends gd{construct(e,r,n){return new gn(e,r,n)}static isValidIdentifier(e){return V5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gn(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new nt(Ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new nt(Ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new nt(Ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new nt(Ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(r)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.path=e}static fromPath(e){return new yt(Sr.fromString(e))}static fromName(e){return new yt(Sr.fromString(e).popFirst(5))}static empty(){return new yt(Sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Sr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new Sr(e.slice()))}}function H5(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ot.fromTimestamp(n===1e9?new nn(r+1,0):new nn(r,n));return new co(s,yt.empty(),e)}function j5(t){return new co(t.readTime,t.key,-1)}class co{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new co(Ot.min(),yt.empty(),-1)}static max(){return new co(Ot.max(),yt.empty(),-1)}}function G5(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=yt.comparator(t.documentKey,e.documentKey),r!==0?r:lr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(t){if(t.code!==Ge.FAILED_PRECONDITION||t.message!==W5)throw t;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Xe((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Xe?r:Xe.resolve(r)}catch(r){return Xe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Xe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Xe.reject(r)}static resolve(e){return new Xe((r,n)=>{r(e)})}static reject(e){return new Xe((r,n)=>{n(e)})}static waitFor(e){return new Xe((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=Xe.resolve(!1);for(const n of e)r=r.next(s=>s?Xe.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Xe((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Xe((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function K5(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Xd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Z1.oe=-1;function cp(t){return t==null}function ah(t){return t===0&&1/t==-1/0}function q5(t){return typeof t=="number"&&Number.isInteger(t)&&!ah(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function fl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function nC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,r){this.comparator=e,this.root=r||Tn.EMPTY}insert(e,r){return new Or(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new Or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lf(this.root,e,this.comparator,!0)}}class Lf{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tn{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Tn.RED,this.left=s??Tn.EMPTY,this.right=i??Tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Tn(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Tn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pt();const e=this.left.check();if(e!==this.right.check())throw Pt();return e+(this.isRed()?0:1)}}Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pt()}get value(){throw Pt()}get color(){throw Pt()}get left(){throw Pt()}get right(){throw Pt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new Tn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.comparator=e,this.data=new Or(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new P2(this.data.getIterator())}getIteratorFrom(e){return new P2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Pn(this.comparator);return r.data=e,r}}class P2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new Is([])}unionWith(e){let r=new Pn(gn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Is(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ec(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sC("Invalid base64 string: "+i):i}}(e);return new yn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new yn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const X5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(t){if(mr(!!t),typeof t=="string"){let e=0;const r=X5.exec(t);if(mr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Kr(t.seconds),nanos:Kr(t.nanos)}}function Kr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function el(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function ey(t){const e=t.mapValue.fields.__previous_value__;return up(e)?ey(e):e}function vd(t){const e=uo(t.mapValue.fields.__local_write_time__.timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class _c{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new _c("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _c&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf={mapValue:{}};function tl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?up(t)?4:J5(t)?9007199254740991:Q5(t)?10:11:Pt()}function Ba(t,e){if(t===e)return!0;const r=tl(t);if(r!==tl(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vd(t).isEqual(vd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=uo(s.timestampValue),o=uo(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return el(s.bytesValue).isEqual(el(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Kr(s.geoPointValue.latitude)===Kr(i.geoPointValue.latitude)&&Kr(s.geoPointValue.longitude)===Kr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Kr(s.integerValue)===Kr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Kr(s.doubleValue),o=Kr(i.doubleValue);return a===o?ah(a)===ah(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Ec(t.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(D2(a)!==D2(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ba(a[l],o[l])))return!1;return!0}(t,e);default:return Pt()}}function yd(t,e){return(t.values||[]).find(r=>Ba(r,e))!==void 0}function bc(t,e){if(t===e)return 0;const r=tl(t),n=tl(e);if(r!==n)return lr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return lr(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Kr(i.integerValue||i.doubleValue),l=Kr(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return R2(t.timestampValue,e.timestampValue);case 4:return R2(vd(t),vd(e));case 5:return lr(t.stringValue,e.stringValue);case 6:return function(i,a){const o=el(i),l=el(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=lr(o[c],l[c]);if(u!==0)return u}return lr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=lr(Kr(i.latitude),Kr(a.latitude));return o!==0?o:lr(Kr(i.longitude),Kr(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return F2(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,u;const f=i.fields||{},h=a.fields||{},p=(o=f.value)===null||o===void 0?void 0:o.arrayValue,g=(l=h.value)===null||l===void 0?void 0:l.arrayValue,v=lr(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:F2(p,g)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Bf.mapValue&&a===Bf.mapValue)return 0;if(i===Bf.mapValue)return 1;if(a===Bf.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const h=lr(l[f],u[f]);if(h!==0)return h;const p=bc(o[l[f]],c[u[f]]);if(p!==0)return p}return lr(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Pt()}}function R2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lr(t,e);const r=uo(t),n=uo(e),s=lr(r.seconds,n.seconds);return s!==0?s:lr(r.nanos,n.nanos)}function F2(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=bc(r[s],n[s]);if(i)return i}return lr(r.length,n.length)}function Sc(t){return mv(t)}function mv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=uo(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return el(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return yt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=mv(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${mv(r.fields[a])}`;return s+"}"}(t.mapValue):Pt()}function ih(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gv(t){return!!t&&"integerValue"in t}function ty(t){return!!t&&"arrayValue"in t}function N2(t){return!!t&&"nullValue"in t}function O2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function b0(t){return!!t&&"mapValue"in t}function Q5(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Bu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fl(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Bu(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Bu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function J5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.value=e}static empty(){return new _s({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!b0(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(r)}setAll(e){let r=gn.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=Bu(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());b0(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];b0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){fl(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new _s(Bu(this.value))}}function aC(t){const e=[];return fl(t.fields,(r,n)=>{const s=new gn([r]);if(b0(n)){const i=aC(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Is(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Wn(e,0,Ot.min(),Ot.min(),Ot.min(),_s.empty(),0)}static newFoundDocument(e,r,n,s){return new Wn(e,1,r,Ot.min(),n,s,0)}static newNoDocument(e,r){return new Wn(e,2,r,Ot.min(),Ot.min(),_s.empty(),0)}static newUnknownDocument(e,r){return new Wn(e,3,r,Ot.min(),Ot.min(),_s.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_s.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_s.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,r){this.position=e,this.inclusive=r}}function M2(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=yt.comparator(yt.fromName(a.referenceValue),r.key):n=bc(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function L2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ba(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,r="asc"){this.field=e,this.dir=r}}function Z5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{}class tn extends iC{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new tN(e,r,n):r==="array-contains"?new sN(e,n):r==="in"?new aN(e,n):r==="not-in"?new iN(e,n):r==="array-contains-any"?new oN(e,n):new tn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new rN(e,n):new nN(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(bc(r,this.value)):r!==null&&tl(this.value)===tl(r)&&this.matchesComparison(bc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ma extends iC{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ma(e,r)}matches(e){return oC(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function oC(t){return t.op==="and"}function lC(t){return eN(t)&&oC(t)}function eN(t){for(const e of t.filters)if(e instanceof ma)return!1;return!0}function vv(t){if(t instanceof tn)return t.field.canonicalString()+t.op.toString()+Sc(t.value);if(lC(t))return t.filters.map(e=>vv(e)).join(",");{const e=t.filters.map(r=>vv(r)).join(",");return`${t.op}(${e})`}}function cC(t,e){return t instanceof tn?function(n,s){return s instanceof tn&&n.op===s.op&&n.field.isEqual(s.field)&&Ba(n.value,s.value)}(t,e):t instanceof ma?function(n,s){return s instanceof ma&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&cC(a,s.filters[o]),!0):!1}(t,e):void Pt()}function uC(t){return t instanceof tn?function(r){return`${r.field.canonicalString()} ${r.op} ${Sc(r.value)}`}(t):t instanceof ma?function(r){return r.op.toString()+" {"+r.getFilters().map(uC).join(" ,")+"}"}(t):"Filter"}class tN extends tn{constructor(e,r,n){super(e,r,n),this.key=yt.fromName(n.referenceValue)}matches(e){const r=yt.comparator(e.key,this.key);return this.matchesComparison(r)}}class rN extends tn{constructor(e,r){super(e,"in",r),this.keys=dC("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class nN extends tn{constructor(e,r){super(e,"not-in",r),this.keys=dC("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function dC(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>yt.fromName(n.referenceValue))}class sN extends tn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ty(r)&&yd(r.arrayValue,this.value)}}class aN extends tn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&yd(this.value.arrayValue,r)}}class iN extends tn{constructor(e,r){super(e,"not-in",r)}matches(e){if(yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!yd(this.value.arrayValue,r)}}class oN extends tn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ty(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>yd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function B2(t,e=null,r=[],n=[],s=null,i=null,a=null){return new lN(t,e,r,n,s,i,a)}function ry(t){const e=Lt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>vv(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),cp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Sc(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Sc(n)).join(",")),e.ue=r}return e.ue}function ny(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Z5(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!cC(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!L2(t.startAt,e.startAt)&&L2(t.endAt,e.endAt)}function yv(t){return yt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cN(t,e,r,n,s,i,a,o){return new hl(t,e,r,n,s,i,a,o)}function dp(t){return new hl(t)}function U2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sy(t){return t.collectionGroup!==null}function ic(t){const e=Lt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Pn(gn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new xd(i,n))}),r.has(gn.keyField().canonicalString())||e.ce.push(new xd(gn.keyField(),n))}return e.ce}function Fa(t){const e=Lt(t);return e.le||(e.le=uN(e,ic(t))),e.le}function uN(t,e){if(t.limitType==="F")return B2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new xd(s.field,i)});const r=t.endAt?new Ac(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ac(t.startAt.position,t.startAt.inclusive):null;return B2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function xv(t,e){const r=t.filters.concat([e]);return new hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function oh(t,e,r){return new hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function fp(t,e){return ny(Fa(t),Fa(e))&&t.limitType===e.limitType}function fC(t){return`${ry(Fa(t))}|lt:${t.limitType}`}function Ul(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>uC(s)).join(", ")}]`),cp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Sc(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Sc(s)).join(",")),`Target(${n})`}(Fa(t))}; limitType=${t.limitType})`}function hp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):yt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of ic(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=M2(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,ic(n),s)||n.endAt&&!function(a,o,l){const c=M2(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,ic(n),s))}(t,e)}function dN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hC(t){return(e,r)=>{let n=!1;for(const s of ic(t)){const i=fN(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function fN(t,e,r){const n=t.field.isKeyField()?yt.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?bc(l,c):Pt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Pt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fl(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return nC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new Or(yt.comparator);function Ai(){return hN}const pC=new Or(yt.comparator);function vu(...t){let e=pC;for(const r of t)e=e.insert(r.key,r);return e}function mC(t){let e=pC;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Mo(){return Uu()}function gC(){return Uu()}function Uu(){return new Lc(t=>t.toString(),(t,e)=>t.isEqual(e))}const pN=new Or(yt.comparator),mN=new Pn(yt.comparator);function qt(...t){let e=mN;for(const r of t)e=e.add(r);return e}const gN=new Pn(lr);function vN(){return gN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function vC(t){return{integerValue:""+t}}function yN(t,e){return q5(e)?vC(e):ay(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(){this._=void 0}}function xN(t,e,r){return t instanceof Ed?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&up(i)&&(i=ey(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof _d?xC(t,e):t instanceof bd?EC(t,e):function(s,i){const a=yC(s,i),o=$2(a)+$2(s.Pe);return gv(a)&&gv(s.Pe)?vC(o):ay(s.serializer,o)}(t,e)}function EN(t,e,r){return t instanceof _d?xC(t,e):t instanceof bd?EC(t,e):r}function yC(t,e){return t instanceof lh?function(n){return gv(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Ed extends pp{}class _d extends pp{constructor(e){super(),this.elements=e}}function xC(t,e){const r=_C(e);for(const n of t.elements)r.some(s=>Ba(s,n))||r.push(n);return{arrayValue:{values:r}}}class bd extends pp{constructor(e){super(),this.elements=e}}function EC(t,e){let r=_C(e);for(const n of t.elements)r=r.filter(s=>!Ba(s,n));return{arrayValue:{values:r}}}class lh extends pp{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function $2(t){return Kr(t.integerValue||t.doubleValue)}function _C(t){return ty(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,r){this.field=e,this.transform=r}}function bN(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof _d&&s instanceof _d||n instanceof bd&&s instanceof bd?Ec(n.elements,s.elements,Ba):n instanceof lh&&s instanceof lh?Ba(n.Pe,s.Pe):n instanceof Ed&&s instanceof Ed}(t.transform,e.transform)}class SN{constructor(e,r){this.version=e,this.transformResults=r}}class ds{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ds}static exists(e){return new ds(void 0,e)}static updateTime(e){return new ds(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function S0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mp{}function bC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gp(t.key,ds.none()):new Yd(t.key,t.data,ds.none());{const r=t.data,n=_s.empty();let s=new Pn(gn.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new go(t.key,n,new Is(s.toArray()),ds.none())}}function AN(t,e,r){t instanceof Yd?function(s,i,a){const o=s.value.clone(),l=H2(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof go?function(s,i,a){if(!S0(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=H2(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(SC(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function $u(t,e,r,n){return t instanceof Yd?function(i,a,o,l){if(!S0(i.precondition,a))return o;const c=i.value.clone(),u=j2(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof go?function(i,a,o,l){if(!S0(i.precondition,a))return o;const c=j2(i.fieldTransforms,l,a),u=a.data;return u.setAll(SC(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,o){return S0(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function TN(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=yC(n.transform,s||null);i!=null&&(r===null&&(r=_s.empty()),r.set(n.field,i))}return r||null}function V2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ec(n,s,(i,a)=>bN(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yd extends mp{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class go extends mp{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function SC(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function H2(t,e,r){const n=new Map;mr(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,EN(a,o,r[s]))}return n}function j2(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,xN(i,a,e))}return n}class gp extends mp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wN extends mp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&AN(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=$u(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=$u(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=gC();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=bC(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Ot.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),qt())}isEqual(e){return this.batchId===e.batchId&&Ec(this.mutations,e.mutations,(r,n)=>V2(r,n))&&Ec(this.baseMutations,e.baseMutations,(r,n)=>V2(r,n))}}class iy{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){mr(e.mutations.length===n.length);let s=function(){return pN}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new iy(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qr,tr;function DN(t){switch(t){default:return Pt();case Ge.CANCELLED:case Ge.UNKNOWN:case Ge.DEADLINE_EXCEEDED:case Ge.RESOURCE_EXHAUSTED:case Ge.INTERNAL:case Ge.UNAVAILABLE:case Ge.UNAUTHENTICATED:return!1;case Ge.INVALID_ARGUMENT:case Ge.NOT_FOUND:case Ge.ALREADY_EXISTS:case Ge.PERMISSION_DENIED:case Ge.FAILED_PRECONDITION:case Ge.ABORTED:case Ge.OUT_OF_RANGE:case Ge.UNIMPLEMENTED:case Ge.DATA_LOSS:return!0}}function AC(t){if(t===void 0)return Si("GRPC error has no .code"),Ge.UNKNOWN;switch(t){case Qr.OK:return Ge.OK;case Qr.CANCELLED:return Ge.CANCELLED;case Qr.UNKNOWN:return Ge.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return Ge.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return Ge.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return Ge.INTERNAL;case Qr.UNAVAILABLE:return Ge.UNAVAILABLE;case Qr.UNAUTHENTICATED:return Ge.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return Ge.INVALID_ARGUMENT;case Qr.NOT_FOUND:return Ge.NOT_FOUND;case Qr.ALREADY_EXISTS:return Ge.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return Ge.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return Ge.FAILED_PRECONDITION;case Qr.ABORTED:return Ge.ABORTED;case Qr.OUT_OF_RANGE:return Ge.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return Ge.UNIMPLEMENTED;case Qr.DATA_LOSS:return Ge.DATA_LOSS;default:return Pt()}}(tr=Qr||(Qr={}))[tr.OK=0]="OK",tr[tr.CANCELLED=1]="CANCELLED",tr[tr.UNKNOWN=2]="UNKNOWN",tr[tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tr[tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tr[tr.NOT_FOUND=5]="NOT_FOUND",tr[tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",tr[tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",tr[tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",tr[tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tr[tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tr[tr.ABORTED=10]="ABORTED",tr[tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",tr[tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",tr[tr.INTERNAL=13]="INTERNAL",tr[tr.UNAVAILABLE=14]="UNAVAILABLE",tr[tr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=new jo([4294967295,4294967295],0);function G2(t){const e=PN().encode(t),r=new Xw;return r.update(e),new Uint8Array(r.digest())}function W2(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new jo([r,n],0),new jo([s,i],0)]}class oy{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new yu(`Invalid padding: ${r}`);if(n<0)throw new yu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new yu(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new yu(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=jo.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(jo.fromNumber(n)));return s.compare(RN)===1&&(s=new jo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=G2(e),[n,s]=W2(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new oy(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=G2(e),[n,s]=W2(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Qd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new vp(Ot.min(),s,new Or(lr),Ai(),qt())}}class Qd{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Qd(n,r,qt(),qt(),qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class TC{constructor(e,r){this.targetId=e,this.me=r}}class wC{constructor(e,r,n=yn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class z2{constructor(){this.fe=0,this.ge=q2(),this.pe=yn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=qt(),r=qt(),n=qt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Pt()}}),new Qd(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=q2()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,mr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class FN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ai(),this.qe=K2(),this.Qe=new Or(lr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Pt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(yv(i))if(n===0){const a=new yt(i.path);this.Ue(r,a,Wn.newNoDocument(a,Ot.min()))}else mr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=el(n).toUint8Array()}catch(l){if(l instanceof sC)return Zo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new oy(a,s,i)}catch(l){return Zo(l instanceof yu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&yv(o.target)){const l=new yt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Wn.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=qt();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new vp(e,r,this.Qe,this.ke,n);return this.ke=Ai(),this.qe=K2(),this.Qe=new Or(lr),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new z2,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Pn(lr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||pt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new z2),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function K2(){return new Or(yt.comparator)}function q2(){return new Or(yt.comparator)}const NN={asc:"ASCENDING",desc:"DESCENDING"},ON={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MN={and:"AND",or:"OR"};class LN{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Ev(t,e){return t.useProto3Json||cp(e)?e:{value:e}}function ch(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BN(t,e){return ch(t,e.toTimestamp())}function Na(t){return mr(!!t),Ot.fromTimestamp(function(r){const n=uo(r);return new nn(n.seconds,n.nanos)}(t))}function ly(t,e){return _v(t,e).canonicalString()}function _v(t,e){const r=function(s){return new Sr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function IC(t){const e=Sr.fromString(t);return mr(FC(e)),e}function bv(t,e){return ly(t.databaseId,e.path)}function pm(t,e){const r=IC(e);if(r.get(1)!==t.databaseId.projectId)throw new nt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new nt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new yt(DC(r))}function kC(t,e){return ly(t.databaseId,e)}function UN(t){const e=IC(t);return e.length===4?Sr.emptyPath():DC(e)}function Sv(t){return new Sr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DC(t){return mr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function X2(t,e,r){return{name:bv(t,e),fields:r.value.mapValue.fields}}function $N(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Pt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(mr(u===void 0||typeof u=="string"),yn.fromBase64String(u||"")):(mr(u===void 0||u instanceof Buffer||u instanceof Uint8Array),yn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?Ge.UNKNOWN:AC(c.code);return new nt(u,c.message||"")}(a);r=new wC(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=pm(t,n.document.name),i=Na(n.document.updateTime),a=n.document.createTime?Na(n.document.createTime):Ot.min(),o=new _s({mapValue:{fields:n.document.fields}}),l=Wn.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new A0(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=pm(t,n.document),i=n.readTime?Na(n.readTime):Ot.min(),a=Wn.newNoDocument(s,i),o=n.removedTargetIds||[];r=new A0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=pm(t,n.document),i=n.removedTargetIds||[];r=new A0([],i,s,null)}else{if(!("filter"in e))return Pt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new kN(s,i),o=n.targetId;r=new TC(o,a)}}return r}function VN(t,e){let r;if(e instanceof Yd)r={update:X2(t,e.key,e.value)};else if(e instanceof gp)r={delete:bv(t,e.key)};else if(e instanceof go)r={update:X2(t,e.key,e.data),updateMask:YN(e.fieldMask)};else{if(!(e instanceof wN))return Pt();r={verify:bv(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof Ed)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof _d)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof bd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof lh)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Pt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:BN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Pt()}(t,e.precondition)),r}function HN(t,e){return t&&t.length>0?(mr(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?Na(s.updateTime):Na(i);return a.isEqual(Ot.min())&&(a=Na(i)),new SN(a,s.transformResults||[])}(r,e))):[]}function jN(t,e){return{documents:[kC(t,e.path)]}}function GN(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=kC(t,s);const i=function(c){if(c.length!==0)return RC(ma.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:$l(h.field),direction:KN(h.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=Ev(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function WN(t){let e=UN(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){mr(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(f){const h=PC(f);return h instanceof ma&&lC(h)?h.getFilters():[h]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(h=>function(g){return new xd(Vl(g.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,cp(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(f){const h=!!f.before,p=f.values||[];return new Ac(p,h)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const h=!f.before,p=f.values||[];return new Ac(p,h)}(r.endAt)),cN(e,s,a,i,o,"F",l,c)}function zN(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function PC(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Vl(r.unaryFilter.field);return tn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Vl(r.unaryFilter.field);return tn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vl(r.unaryFilter.field);return tn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vl(r.unaryFilter.field);return tn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Pt()}}(t):t.fieldFilter!==void 0?function(r){return tn.create(Vl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ma.create(r.compositeFilter.filters.map(n=>PC(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Pt()}}(r.compositeFilter.op))}(t):Pt()}function KN(t){return NN[t]}function qN(t){return ON[t]}function XN(t){return MN[t]}function $l(t){return{fieldPath:t.canonicalString()}}function Vl(t){return gn.fromServerFormat(t.fieldPath)}function RC(t){return t instanceof tn?function(r){if(r.op==="=="){if(O2(r.value))return{unaryFilter:{field:$l(r.field),op:"IS_NAN"}};if(N2(r.value))return{unaryFilter:{field:$l(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(O2(r.value))return{unaryFilter:{field:$l(r.field),op:"IS_NOT_NAN"}};if(N2(r.value))return{unaryFilter:{field:$l(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$l(r.field),op:qN(r.op),value:r.value}}}(t):t instanceof ma?function(r){const n=r.getFilters().map(s=>RC(s));return n.length===1?n[0]:{compositeFilter:{op:XN(r.op),filters:n}}}(t):Pt()}function YN(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function FC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,r,n,s,i=Ot.min(),a=Ot.min(),o=yn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.ct=e}}function JN(t){const e=WN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?oh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.un=new eO}addToCollectionParentIndex(e,r){return this.un.add(r),Xe.resolve()}getCollectionParents(e,r){return Xe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Xe.resolve()}deleteFieldIndex(e,r){return Xe.resolve()}deleteAllFieldIndexes(e){return Xe.resolve()}createTargetIndexes(e,r){return Xe.resolve()}getDocumentsMatchingTarget(e,r){return Xe.resolve(null)}getIndexType(e,r){return Xe.resolve(0)}getFieldIndexes(e,r){return Xe.resolve([])}getNextCollectionGroupToUpdate(e){return Xe.resolve(null)}getMinOffset(e,r){return Xe.resolve(co.min())}getMinOffsetFromCollectionGroup(e,r){return Xe.resolve(co.min())}updateCollectionGroup(e,r,n){return Xe.resolve()}updateIndexEntries(e,r){return Xe.resolve()}}class eO{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Pn(Sr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Pn(Sr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Tc(0)}static kn(){return new Tc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this.changes=new Lc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Xe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&$u(n.mutation,s,Is.empty(),nn.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,qt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=qt()){const s=Mo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=vu();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Mo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,qt()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=Ai();const a=Uu(),o=function(){return Uu()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof go)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),$u(u.mutation,c,u.mutation.getFieldMask(),nn.now())):a.set(c.key,Is.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var f;return o.set(c,new rO(u,(f=a.get(c))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Uu();let s=new Or((a,o)=>a-o),i=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||Is.empty();u=o.applyToLocalView(c,u),n.set(l,u);const f=(s.get(o.batchId)||qt()).add(l);s=s.insert(o.batchId,f)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,f=gC();u.forEach(h=>{if(!i.has(h)){const p=bC(r.get(h),n.get(h));p!==null&&f.set(h,p),i=i.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Xe.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return yt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):sy(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Xe.resolve(Mo());let o=-1,l=i;return a.next(c=>Xe.forEach(c,(u,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(u)?Xe.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,qt())).next(u=>({batchId:o,changes:mC(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new yt(r)).next(n=>{let s=vu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=vu();return this.indexManager.getCollectionParents(e,i).next(o=>Xe.forEach(o,l=>{const c=function(f,h){return new hl(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((f,h)=>{a=a.insert(f,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Wn.newInvalidDocument(u)))});let o=vu();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&$u(u.mutation,c,Is.empty(),nn.now()),hp(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Xe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Na(s.createTime)}}(r)),Xe.resolve()}getNamedQuery(e,r){return Xe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:JN(s.bundledQuery),readTime:Na(s.readTime)}}(r)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.overlays=new Or(yt.comparator),this.Ir=new Map}getOverlay(e,r){return Xe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Mo();return Xe.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Xe.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Xe.resolve()}getOverlaysForCollection(e,r,n){const s=Mo(),i=r.length+1,a=new yt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Xe.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Or((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=Mo(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Mo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Xe.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new IN(r,n));let i=this.Ir.get(r);i===void 0&&(i=qt(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return Xe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(){this.Tr=new Pn(fn.Er),this.dr=new Pn(fn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new fn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new fn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new yt(new Sr([])),n=new fn(r,e),s=new fn(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new yt(new Sr([])),n=new fn(r,e),s=new fn(r,e+1);let i=qt();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new fn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class fn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return yt.comparator(e.key,r.key)||lr(e.wr,r.wr)}static Ar(e,r){return lr(e.wr,r.wr)||yt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Pn(fn.Er)}checkEmpty(e){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new CN(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new fn(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Xe.resolve(a)}lookupMutationBatch(e,r){return Xe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Xe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new fn(r,0),s=new fn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Xe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Pn(lr);return r.forEach(s=>{const i=new fn(s,0),a=new fn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Xe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;yt.isDocumentKey(i)||(i=i.child(""));const a=new fn(new yt(i),0);let o=new Pn(lr);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),Xe.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){mr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Xe.forEach(r.mutations,s=>{const i=new fn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new fn(r,0),s=this.br.firstAfterOrEqual(n);return Xe.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.Mr=e,this.docs=function(){return new Or(yt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Xe.resolve(n?n.document.mutableCopy():Wn.newInvalidDocument(r))}getEntries(e,r){let n=Ai();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Wn.newInvalidDocument(s))}),Xe.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Ai();const a=r.path,o=new yt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||G5(j5(u),n)<=0||(s.has(u.key)||hp(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Xe.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Pt()}Or(e,r){return Xe.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new cO(this)}getSize(e){return Xe.resolve(this.size)}}class cO extends tO{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Xe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.persistence=e,this.Nr=new Lc(r=>ry(r),ny),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cy,this.targetCount=0,this.kr=Tc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Xe.resolve()}getLastRemoteSnapshotVersion(e){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Xe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Tc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Xe.resolve()}updateTargetData(e,r){return this.Kn(r),Xe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Xe.waitFor(i).next(()=>s)}getTargetCount(e){return Xe.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Xe.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Xe.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Xe.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Xe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Xe.resolve(n)}containsKey(e,r){return Xe.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Z1(0),this.Kr=!1,this.Kr=!0,this.$r=new iO,this.referenceDelegate=e(this),this.Ur=new uO(this),this.indexManager=new ZN,this.remoteDocumentCache=function(s){return new lO(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new QN(r),this.Gr=new sO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new aO,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new oO(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){pt("MemoryPersistence","Starting transaction:",e);const s=new fO(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Xe.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class fO extends z5{constructor(e){super(),this.currentSequenceNumber=e}}class uy{constructor(e){this.persistence=e,this.Jr=new cy,this.Yr=null}static Zr(e){return new uy(e)}get Xr(){if(this.Yr)return this.Yr;throw Pt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Xe.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Xe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Xe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Xr,n=>{const s=yt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Ot.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Xe.or([()=>Xe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=qt(),s=qt();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new dy(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return D8()?8:K5(Zn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new hO;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(nu()<=Yt.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",Ul(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Xe.resolve()):(nu()<=Yt.DEBUG&&pt("QueryEngine","Query:",Ul(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(nu()<=Yt.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",Ul(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fa(r))):Xe.resolve())}Yi(e,r){if(U2(r))return Xe.resolve(null);let n=Fa(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=oh(r,null,"F"),n=Fa(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=qt(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,oh(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return U2(r)||s.isEqual(Ot.min())?Xe.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Xe.resolve(null):(nu()<=Yt.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ul(r)),this.rs(e,a,r,H5(s,-1)).next(o=>o))})}ts(e,r){let n=new Pn(hC(e));return r.forEach((s,i)=>{hp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return nu()<=Yt.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",Ul(r)),this.Ji.getDocumentsMatchingQuery(e,r,co.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Or(lr),this._s=new Lc(i=>ry(i),ny),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function gO(t,e,r,n){return new mO(t,e,r,n)}async function NC(t,e){const r=Lt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=qt();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function vO(t,e){const r=Lt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const f=c.batch,h=f.keys();let p=Xe.resolve();return h.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(v=>{const y=c.docVersions.get(g);mr(y!==null),v.version.compareTo(y)<0&&(f.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=qt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function OC(t){const e=Lt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function yO(t,e){const r=Lt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,f)=>{const h=s.get(f);if(!h)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,f)));let p=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(yn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),s=s.insert(f,p),function(v,y,b){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(h,p,u)&&o.push(r.Ur.updateTargetData(i,p))});let l=Ai(),c=qt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(xO(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(Ot.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(f=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Xe.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function xO(t,e,r){let n=qt(),s=qt();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Ai();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Ot.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):pt("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function EO(t,e){const r=Lt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function _O(t,e){const r=Lt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Xe.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Yi(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Av(t,e,r){const n=Lt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Xd(a))throw a;pt("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Y2(t,e,r){const n=Lt(t);let s=Ot.min(),i=qt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const f=Lt(l),h=f._s.get(u);return h!==void 0?Xe.resolve(f.os.get(h)):f.Ur.getTargetData(c,u)}(n,a,Fa(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:Ot.min(),r?i:qt())).next(o=>(bO(n,dN(e),o),{documents:o,Ts:i})))}function bO(t,e,r){let n=t.us.get(e)||Ot.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class Q2{constructor(){this.activeTargetIds=vN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SO{constructor(){this.so=new Q2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Q2,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf=null;function mm(){return Uf===null?Uf=function(){return 268435456+Math.round(2147483648*Math.random())}():Uf++,"0x"+Uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class CO extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=mm(),l=this.xo(r,n.toUriEncodedString());pt("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(pt("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw Zo("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mc}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=TO[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=mm();return new Promise((a,o)=>{const l=new Yw;l.setWithCredentials(!0),l.listenOnce(Qw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _0.NO_ERROR:const u=l.getResponseJson();pt(Bn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case _0.TIMEOUT:pt(Bn,`RPC '${e}' ${i} timed out`),o(new nt(Ge.DEADLINE_EXCEEDED,"Request time out"));break;case _0.HTTP_ERROR:const f=l.getStatus();if(pt(Bn,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const g=function(y){const b=y.toLowerCase().replace(/_/g,"-");return Object.values(Ge).indexOf(b)>=0?b:Ge.UNKNOWN}(p.status);o(new nt(g,p.message))}else o(new nt(Ge.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new nt(Ge.UNAVAILABLE,"Connection failed."));break;default:Pt()}}finally{pt(Bn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);pt(Bn,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=mm(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=eC(),o=Zw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");pt(Bn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=a.createWebChannel(u,l);let h=!1,p=!1;const g=new wO({Io:y=>{p?pt(Bn,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(h||(pt(Bn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),h=!0),pt(Bn,`RPC '${e}' stream ${s} sending:`,y),f.send(y))},To:()=>f.close()}),v=(y,b,E)=>{y.listen(b,x=>{try{E(x)}catch(w){setTimeout(()=>{throw w},0)}})};return v(f,gu.EventType.OPEN,()=>{p||(pt(Bn,`RPC '${e}' stream ${s} transport opened.`),g.yo())}),v(f,gu.EventType.CLOSE,()=>{p||(p=!0,pt(Bn,`RPC '${e}' stream ${s} transport closed`),g.So())}),v(f,gu.EventType.ERROR,y=>{p||(p=!0,Zo(Bn,`RPC '${e}' stream ${s} transport errored:`,y),g.So(new nt(Ge.UNAVAILABLE,"The operation could not be completed")))}),v(f,gu.EventType.MESSAGE,y=>{var b;if(!p){const E=y.data[0];mr(!!E);const x=E,w=x.error||((b=x[0])===null||b===void 0?void 0:b.error);if(w){pt(Bn,`RPC '${e}' stream ${s} received error:`,w);const P=w.status;let R=function(m){const S=Qr[m];if(S!==void 0)return AC(S)}(P),A=w.message;R===void 0&&(R=Ge.INTERNAL,A="Unknown error status: "+P+" with message "+w.message),p=!0,g.So(new nt(R,A)),f.close()}else pt(Bn,`RPC '${e}' stream ${s} received:`,E),g.bo(E)}}),v(o,Jw.STAT_EVENT,y=>{y.stat===pv.PROXY?pt(Bn,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===pv.NOPROXY&&pt(Bn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t){return new LN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&pt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new MC(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Ge.RESOURCE_EXHAUSTED?(Si(r.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new nt(Ge.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return pt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IO extends LC{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=$N(this.serializer,e),n=function(i){if(!("targetChange"in i))return Ot.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ot.min():a.readTime?Na(a.readTime):Ot.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Sv(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=yv(l)?{documents:jN(i,l)}:{query:GN(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=CC(i,a.resumeToken);const c=Ev(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Ot.min())>0){o.readTime=ch(i,a.snapshotVersion.toTimestamp());const c=Ev(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=zN(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Sv(this.serializer),r.removeTarget=e,this.a_(r)}}class kO extends LC{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return mr(!!e.streamToken),this.lastStreamToken=e.streamToken,mr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){mr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=HN(e.writeResults,e.commitTime),n=Na(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Sv(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>VN(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new nt(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,_v(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new nt(Ge.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,_v(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new nt(Ge.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class PO{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Si(r),this.D_=!1):pt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{pl(this)&&(pt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Lt(l);c.L_.add(4),await Jd(c),c.q_.set("Unknown"),c.L_.delete(4),await xp(c)}(this))})}),this.q_=new PO(n,s)}}async function xp(t){if(pl(t))for(const e of t.B_)await e(!0)}async function Jd(t){for(const e of t.B_)await e(!1)}function BC(t,e){const r=Lt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),my(r)?py(r):Bc(r).r_()&&hy(r,e))}function fy(t,e){const r=Lt(t),n=Bc(r);r.N_.delete(e),n.r_()&&UC(r,e),r.N_.size===0&&(n.r_()?n.o_():pl(r)&&r.q_.set("Unknown"))}function hy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ot.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Bc(t).A_(e)}function UC(t,e){t.Q_.xe(e),Bc(t).R_(e)}function py(t){t.Q_=new FN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Bc(t).start(),t.q_.v_()}function my(t){return pl(t)&&!Bc(t).n_()&&t.N_.size>0}function pl(t){return Lt(t).L_.size===0}function $C(t){t.Q_=void 0}async function FO(t){t.q_.set("Online")}async function NO(t){t.N_.forEach((e,r)=>{hy(t,e)})}async function OO(t,e){$C(t),my(t)?(t.q_.M_(e),py(t)):t.q_.set("Unknown")}async function MO(t,e,r){if(t.q_.set("Online"),e instanceof wC&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){pt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await uh(t,n)}else if(e instanceof A0?t.Q_.Ke(e):e instanceof TC?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ot.min()))try{const n=await OC(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(yn.EMPTY_BYTE_STRING,u.snapshotVersion)),UC(i,l);const f=new Yi(u.target,l,c,u.sequenceNumber);hy(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){pt("RemoteStore","Failed to raise snapshot:",n),await uh(t,n)}}async function uh(t,e,r){if(!Xd(e))throw e;t.L_.add(1),await Jd(t),t.q_.set("Offline"),r||(r=()=>OC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await xp(t)})}function VC(t,e){return e().catch(r=>uh(t,r,e))}async function Ep(t){const e=Lt(t),r=fo(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;LO(e);)try{const s=await EO(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,BO(e,s)}catch(s){await uh(e,s)}HC(e)&&jC(e)}function LO(t){return pl(t)&&t.O_.length<10}function BO(t,e){t.O_.push(e);const r=fo(t);r.r_()&&r.V_&&r.m_(e.mutations)}function HC(t){return pl(t)&&!fo(t).n_()&&t.O_.length>0}function jC(t){fo(t).start()}async function UO(t){fo(t).p_()}async function $O(t){const e=fo(t);for(const r of t.O_)e.m_(r.mutations)}async function VO(t,e,r){const n=t.O_.shift(),s=iy.from(n,e,r);await VC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ep(t)}async function HO(t,e){e&&fo(t).V_&&await async function(n,s){if(function(a){return DN(a)&&a!==Ge.ABORTED}(s.code)){const i=n.O_.shift();fo(n).s_(),await VC(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ep(n)}}(t,e),HC(t)&&jC(t)}async function Z2(t,e){const r=Lt(t);r.asyncQueue.verifyOperationInProgress(),pt("RemoteStore","RemoteStore received new credentials");const n=pl(r);r.L_.add(3),await Jd(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await xp(r)}async function jO(t,e){const r=Lt(t);e?(r.L_.delete(2),await xp(r)):e||(r.L_.add(2),await Jd(r),r.q_.set("Unknown"))}function Bc(t){return t.K_||(t.K_=function(r,n,s){const i=Lt(r);return i.w_(),new IO(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:FO.bind(null,t),Ro:NO.bind(null,t),mo:OO.bind(null,t),d_:MO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),my(t)?py(t):t.q_.set("Unknown")):(await t.K_.stop(),$C(t))})),t.K_}function fo(t){return t.U_||(t.U_=function(r,n,s){const i=Lt(r);return i.w_(),new kO(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UO.bind(null,t),mo:HO.bind(null,t),f_:$O.bind(null,t),g_:VO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ep(t)):(await t.U_.stop(),t.O_.length>0&&(pt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new gy(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(Ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vy(t,e){if(Si("AsyncQueue",`${e}: ${t}`),Xd(t))return new nt(Ge.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.comparator=e?(r,n)=>e(r,n)||yt.comparator(r.key,n.key):(r,n)=>yt.comparator(r.key,n.key),this.keyedMap=vu(),this.sortedSet=new Or(this.comparator)}static emptySet(e){return new oc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof oc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new oc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.W_=new Or(yt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Pt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class wc{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new wc(e,r,oc.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class WO{constructor(){this.queries=t_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Lt(r),i=s.queries;s.queries=t_(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new nt(Ge.ABORTED,"Firestore shutting down"))}}function t_(){return new Lc(t=>fC(t),fp)}async function yy(t,e){const r=Lt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new GO,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=vy(a,`Initialization of query '${Ul(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&Ey(r)}async function xy(t,e){const r=Lt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function zO(t,e){const r=Lt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&Ey(r)}function KO(t,e,r){const n=Lt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function Ey(t){t.Y_.forEach(e=>{e.next()})}var Tv,r_;(r_=Tv||(Tv={})).ea="default",r_.Cache="cache";class _y{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new wc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=wc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.key=e}}class WC{constructor(e){this.key=e}}class qO{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=qt(),this.mutatedKeys=qt(),this.Aa=hC(e),this.Ra=new oc(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new e_,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const h=s.get(u),p=hp(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let y=!1;h&&p?h.data.isEqual(p.data)?g!==v&&(n.track({type:3,doc:p}),y=!0):this.ga(h,p)||(n.track({type:2,doc:p}),y=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),y=!0):h&&!p&&(n.track({type:1,doc:h}),y=!0,(l||c)&&(o=!0)),y&&(p?(a=a.add(p),i=v?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,f)=>function(p,g){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pt()}};return v(p)-v(g)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new wc(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new e_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=qt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new WC(n))}),this.da.forEach(n=>{e.has(n)||r.push(new GC(n))}),r}ba(e){this.Ta=e.Ts,this.da=qt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return wc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class XO{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class YO{constructor(e){this.key=e,this.va=!1}}class QO{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Lc(o=>fC(o),fp),this.Ma=new Map,this.xa=new Set,this.Oa=new Or(yt.comparator),this.Na=new Map,this.La=new cy,this.Ba={},this.ka=new Map,this.qa=Tc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JO(t,e,r=!0){const n=QC(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await zC(n,e,r,!0),s}async function ZO(t,e){const r=QC(t);await zC(r,e,!0,!1)}async function zC(t,e,r,n){const s=await _O(t.localStore,Fa(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await e9(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&BC(t.remoteStore,s),o}async function e9(t,e,r,n,s){t.Ka=(f,h,p)=>async function(v,y,b,E){let x=y.view.ma(b);x.ns&&(x=await Y2(v.localStore,y.query,!1).then(({documents:A})=>y.view.ma(A,x)));const w=E&&E.targetChanges.get(y.targetId),P=E&&E.targetMismatches.get(y.targetId)!=null,R=y.view.applyChanges(x,v.isPrimaryClient,w,P);return s_(v,y.targetId,R.wa),R.snapshot}(t,f,h,p);const i=await Y2(t.localStore,e,!0),a=new qO(e,i.Ts),o=a.ma(i.documents),l=Qd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);s_(t,r,c.wa);const u=new XO(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function t9(t,e,r){const n=Lt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!fp(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Av(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&fy(n.remoteStore,s.targetId),wv(n,s.targetId)}).catch(qd)):(wv(n,s.targetId),await Av(n.localStore,s.targetId,!0))}async function r9(t,e){const r=Lt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),fy(r.remoteStore,n.targetId))}async function n9(t,e,r){const n=u9(t);try{const s=await function(a,o){const l=Lt(a),c=nn.now(),u=o.reduce((p,g)=>p.add(g.key),qt());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Ai(),v=qt();return l.cs.getEntries(p,u).next(y=>{g=y,g.forEach((b,E)=>{E.isValidDocument()||(v=v.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(y=>{f=y;const b=[];for(const E of o){const x=TN(E,f.get(E.key).overlayedDocument);x!=null&&b.push(new go(E.key,x,aC(x.value.mapValue),ds.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,b,o)}).next(y=>{h=y;const b=y.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(p,y.batchId,b)})}).then(()=>({batchId:h.batchId,changes:mC(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new Or(lr)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await Zd(n,s.changes),await Ep(n.remoteStore)}catch(s){const i=vy(s,"Failed to persist write");r.reject(i)}}async function KC(t,e){const r=Lt(t);try{const n=await yO(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(mr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?mr(a.va):s.removedDocuments.size>0&&(mr(a.va),a.va=!1))}),await Zd(r,n,e)}catch(n){await qd(n)}}function n_(t,e,r){const n=Lt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Lt(a);l.onlineState=o;let c=!1;l.queries.forEach((u,f)=>{for(const h of f.j_)h.Z_(o)&&(c=!0)}),c&&Ey(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function s9(t,e,r){const n=Lt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Or(yt.comparator);a=a.insert(i,Wn.newNoDocument(i,Ot.min()));const o=qt().add(i),l=new vp(Ot.min(),new Map,new Or(lr),a,o);await KC(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),by(n)}else await Av(n.localStore,e,!1).then(()=>wv(n,e,r)).catch(qd)}async function a9(t,e){const r=Lt(t),n=e.batch.batchId;try{const s=await vO(r.localStore,e);XC(r,n,null),qC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Zd(r,s)}catch(s){await qd(s)}}async function i9(t,e,r){const n=Lt(t);try{const s=await function(a,o){const l=Lt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(f=>(mr(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);XC(n,e,r),qC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Zd(n,s)}catch(s){await qd(s)}}function qC(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function XC(t,e,r){const n=Lt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function wv(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||YC(t,n)})}function YC(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(fy(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),by(t))}function s_(t,e,r){for(const n of r)n instanceof GC?(t.La.addReference(n.key,e),o9(t,n)):n instanceof WC?(pt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||YC(t,n.key)):Pt()}function o9(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(pt("SyncEngine","New document in limbo: "+r),t.xa.add(n),by(t))}function by(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new yt(Sr.fromString(e)),n=t.qa.next();t.Na.set(n,new YO(r)),t.Oa=t.Oa.insert(r,n),BC(t.remoteStore,new Yi(Fa(dp(r.path)),n,"TargetPurposeLimboResolution",Z1.oe))}}async function Zd(t,e,r){const n=Lt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const f=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=dy.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=Lt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(c,h=>Xe.forEach(h.$i,p=>u.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Xe.forEach(h.Ui,p=>u.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!Xd(f))throw f;pt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const h=f.targetId;if(!f.fromCache){const p=u.os.get(h),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(h,v)}}}(n.localStore,i))}async function l9(t,e){const r=Lt(t);if(!r.currentUser.isEqual(e)){pt("SyncEngine","User change. New user:",e.toKey());const n=await NC(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new nt(Ge.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Zd(r,n.hs)}}function c9(t,e){const r=Lt(t),n=r.Na.get(e);if(n&&n.va)return qt().add(n.key);{let s=qt();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function QC(t){const e=Lt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s9.bind(null,e),e.Ca.d_=zO.bind(null,e.eventManager),e.Ca.$a=KO.bind(null,e.eventManager),e}function u9(t){const e=Lt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i9.bind(null,e),e}class dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return gO(this.persistence,new pO,e.initialUser,this.serializer)}Ga(e){return new dO(uy.Zr,this.serializer)}Wa(e){return new SO}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dh.provider={build:()=>new dh};class Cv{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>n_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=l9.bind(null,this.syncEngine),await jO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WO}()}createDatastore(e){const r=yp(e.databaseInfo.databaseId),n=function(i){return new CO(i)}(e.databaseInfo);return function(i,a,o,l){return new DO(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new RO(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>n_(this.syncEngine,r,0),function(){return J2.D()?new J2:new AO}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,u){const f=new QO(s,i,a,o,l,c);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Lt(s);pt("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Jd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Cv.provider={build:()=>new Cv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Hn.UNAUTHENTICATED,this.clientId=J1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{pt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(pt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=vy(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function vm(t,e){t.asyncQueue.verifyOperationInProgress(),pt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await NC(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function a_(t,e){t.asyncQueue.verifyOperationInProgress();const r=await f9(t);pt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>Z2(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>Z2(e.remoteStore,s)),t._onlineComponents=e}async function f9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pt("FirestoreClient","Using user provided OfflineComponentProvider");try{await vm(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Ge.FAILED_PRECONDITION||s.code===Ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Zo("Error using user provided cache. Falling back to memory cache: "+r),await vm(t,new dh)}}else pt("FirestoreClient","Using default OfflineComponentProvider"),await vm(t,new dh);return t._offlineComponents}async function JC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pt("FirestoreClient","Using user provided OnlineComponentProvider"),await a_(t,t._uninitializedComponentsProvider._online)):(pt("FirestoreClient","Using default OnlineComponentProvider"),await a_(t,new Cv))),t._onlineComponents}function h9(t){return JC(t).then(e=>e.syncEngine)}async function fh(t){const e=await JC(t),r=e.eventManager;return r.onListen=JO.bind(null,e.syncEngine),r.onUnlisten=t9.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=ZO.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=r9.bind(null,e.syncEngine),r}function p9(t,e,r={}){const n=new ui;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new Sy({next:h=>{u.Za(),a.enqueueAndForget(()=>xy(i,f));const p=h.docs.has(o);!p&&h.fromCache?c.reject(new nt(Ge.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?c.reject(new nt(Ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new _y(dp(o.path),u,{includeMetadataChanges:!0,_a:!0});return yy(i,f)}(await fh(t),t.asyncQueue,e,r,n)),n.promise}function m9(t,e,r={}){const n=new ui;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new Sy({next:h=>{u.Za(),a.enqueueAndForget(()=>xy(i,f)),h.fromCache&&l.source==="server"?c.reject(new nt(Ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new _y(o,u,{includeMetadataChanges:!0,_a:!0});return yy(i,f)}(await fh(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t,e,r){if(!r)throw new nt(Ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function t4(t,e,r,n){if(e===!0&&n===!0)throw new nt(Ge.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function o_(t){if(!yt.isDocumentKey(t))throw new nt(Ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function l_(t){if(yt.isDocumentKey(t))throw new nt(Ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _p(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pt()}function Qn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new nt(Ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=_p(t);throw new nt(Ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function g9(t,e){if(e<=0)throw new nt(Ge.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new nt(Ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new nt(Ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}t4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new nt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new nt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new nt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(Ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new nt(Ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c_(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new rC;switch(n.type){case"firstParty":return new L5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new nt(Ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=i_.get(r);n&&(pt("ComponentProvider","Removing Datastore"),i_.delete(r),n.terminate())}(this),Promise.resolve()}}function r4(t,e,r,n={}){var s;const i=(t=Qn(t,bp))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=Hn.MOCK_USER;else{o=aw(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new nt(Ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Hn(c)}t._authCredentials=new N5(new tC(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new xa(this.firestore,e,this._query)}}class Rn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class di extends xa{constructor(e,r,n){super(e,r,dp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new yt(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function At(t,e,...r){if(t=dr(t),e4("collection","path",e),t instanceof bp){const n=Sr.fromString(e,...r);return l_(n),new di(t,null,n)}{if(!(t instanceof Rn||t instanceof di))throw new nt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Sr.fromString(e,...r));return l_(n),new di(t.firestore,null,n)}}function Ze(t,e,...r){if(t=dr(t),arguments.length===1&&(e=J1.newId()),e4("doc","path",e),t instanceof bp){const n=Sr.fromString(e,...r);return o_(n),new Rn(t,null,new yt(n))}{if(!(t instanceof Rn||t instanceof di))throw new nt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Sr.fromString(e,...r));return o_(n),new Rn(t.firestore,t instanceof di?t.converter:null,new yt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new MC(this,"async_queue_retry"),this.Vu=()=>{const n=gm();n&&pt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=gm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=gm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ui;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xd(e))throw e;pt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw Si("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=gy.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Pt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function d_(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ga extends bp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new u_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u_(e),this._firestoreClient=void 0,await e}}}function vo(t,e){const r=typeof t=="object"?t:Gd(),n=typeof t=="string"?t:"(default)",s=jd(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=R1("firestore");i&&r4(s,...i)}return s}function Uc(t){if(t._terminated)throw new nt(Ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||v9(t),t._firestoreClient}function v9(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,u){return new Y5(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,ZC(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new d9(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rl(yn.fromBase64String(e))}catch(r){throw new nt(Ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new rl(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new nt(Ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new nt(Ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new nt(Ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lr(this._lat,e._lat)||lr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=/^__.*__$/;class x9{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new go(e,this.data,this.fieldMask,r,this.fieldTransforms):new Yd(e,this.data,r,this.fieldTransforms)}}class n4{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new go(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function s4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pt()}}class Ay{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ay(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(s4(this.Cu)&&y9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class E9{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||yp(e)}Qu(e,r,n,s=!1){return new Ay({Cu:e,methodName:r,qu:n,path:gn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vc(t){const e=t._freezeSettings(),r=yp(t._databaseId);return new E9(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Ty(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);Cy("Data must be an object, but it was:",a,n);const o=l4(n,a);let l,c;if(i.merge)l=new Is(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const h=Iv(e,f,r);if(!a.contains(h))throw new nt(Ge.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);u4(u,h)||u.push(h)}l=new Is(u),c=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=a.fieldTransforms;return new x9(new _s(o),l,c)}class Tp extends ef{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tp}}class wy extends ef{_toFieldTransform(e){return new _N(e.path,new Ed)}isEqual(e){return e instanceof wy}}function a4(t,e,r,n){const s=t.Qu(1,e,r);Cy("Data must be an object, but it was:",s,n);const i=[],a=_s.empty();fl(n,(l,c)=>{const u=Iy(e,l,r);c=dr(c);const f=s.Nu(u);if(c instanceof Tp)i.push(u);else{const h=tf(c,f);h!=null&&(i.push(u),a.set(u,h))}});const o=new Is(i);return new n4(a,o,s.fieldTransforms)}function i4(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[Iv(e,n,r)],l=[s];if(i.length%2!=0)throw new nt(Ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(Iv(e,i[h])),l.push(i[h+1]);const c=[],u=_s.empty();for(let h=o.length-1;h>=0;--h)if(!u4(c,o[h])){const p=o[h];let g=l[h];g=dr(g);const v=a.Nu(p);if(g instanceof Tp)c.push(p);else{const y=tf(g,v);y!=null&&(c.push(p),u.set(p,y))}}const f=new Is(c);return new n4(u,f,a.fieldTransforms)}function o4(t,e,r,n=!1){return tf(r,t.Qu(n?4:3,e))}function tf(t,e){if(c4(t=dr(t)))return Cy("Unsupported field value:",e,t),l4(t,e);if(t instanceof ef)return function(n,s){if(!s4(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=tf(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=dr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return yN(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=nn.fromDate(n);return{timestampValue:ch(s.serializer,i)}}if(n instanceof nn){const i=new nn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ch(s.serializer,i)}}if(n instanceof Sp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof rl)return{bytesValue:CC(s.serializer,n._byteString)};if(n instanceof Rn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ly(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Ap)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return ay(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${_p(n)}`)}(t,e)}function l4(t,e){const r={};return nC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fl(t,(n,s)=>{const i=tf(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function c4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nn||t instanceof Sp||t instanceof rl||t instanceof Rn||t instanceof ef||t instanceof Ap)}function Cy(t,e,r){if(!c4(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=_p(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Iv(t,e,r){if((e=dr(e))instanceof $c)return e._internalPath;if(typeof e=="string")return Iy(t,e);throw hh("Field path arguments must be of type string or ",t,!1,void 0,r)}const _9=new RegExp("[~\\*/\\[\\]]");function Iy(t,e,r){if(e.search(_9)>=0)throw hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new $c(...e.split("."))._internalPath}catch{throw hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function hh(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new nt(Ge.INVALID_ARGUMENT,o+t+l)}function u4(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(wp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class b9 extends ky{data(){return super.data()}}function wp(t,e){return typeof e=="string"?Iy(t,e):e instanceof $c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new nt(Ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dy{}class rf extends Dy{}function or(t,e,...r){let n=[];e instanceof Dy&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof Cp).length,o=i.filter(l=>l instanceof nf).length;if(a>1||a>0&&o>0)throw new nt(Ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class nf extends rf{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new nf(e,r,n)}_apply(e){const r=this._parse(e);return f4(e._query,r),new xa(e.firestore,e.converter,xv(e._query,r))}_parse(e){const r=Vc(e.firestore);return function(i,a,o,l,c,u,f){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new nt(Ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){h_(f,u);const p=[];for(const g of f)p.push(f_(l,i,g));h={arrayValue:{values:p}}}else h=f_(l,i,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||h_(f,u),h=o4(o,a,f,u==="in"||u==="not-in");return tn.create(c,u,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Ur(t,e,r){const n=e,s=wp("where",t);return nf._create(s,n,r)}class Cp extends Dy{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Cp(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:ma.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)f4(a,l),a=xv(a,l)}(e._query,r),new xa(e.firestore,e.converter,xv(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ip extends rf{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Ip(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new nt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new nt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xd(i,a)}(e._query,this._field,this._direction);return new xa(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new hl(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function hn(t,e="asc"){const r=e,n=wp("orderBy",t);return Ip._create(n,r)}class kp extends rf{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new kp(e,r,n)}_apply(e){return new xa(e.firestore,e.converter,oh(e._query,this._limit,this._limitType))}}function ia(t){return g9("limit",t),kp._create("limit",t,"F")}class Dp extends rf{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Dp(e,r,n)}_apply(e){const r=S9(e,this.type,this._docOrFields,this._inclusive);return new xa(e.firestore,e.converter,function(s,i){return new hl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function ph(...t){return Dp._create("startAfter",t,!1)}function S9(t,e,r,n){if(r[0]=dr(r[0]),r[0]instanceof ky)return function(i,a,o,l,c){if(!l)throw new nt(Ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const f of ic(i))if(f.field.isKeyField())u.push(ih(a,l.key));else{const h=l.data.field(f.field);if(up(h))throw new nt(Ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(h)}return new Ac(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Vc(t.firestore);return function(a,o,l,c,u,f){const h=a.explicitOrderBy;if(u.length>h.length)throw new nt(Ge.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<u.length;g++){const v=u[g];if(h[g].field.isKeyField()){if(typeof v!="string")throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!sy(a)&&v.indexOf("/")!==-1)throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);const y=a.path.child(Sr.fromString(v));if(!yt.isDocumentKey(y))throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const b=new yt(y);p.push(ih(o,b))}else{const y=o4(l,c,v);p.push(y)}}return new Ac(p,f)}(t._query,t.firestore._databaseId,s,e,r,n)}}function f_(t,e,r){if(typeof(r=dr(r))=="string"){if(r==="")throw new nt(Ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sy(e)&&r.indexOf("/")!==-1)throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Sr.fromString(r));if(!yt.isDocumentKey(n))throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ih(t,new yt(n))}if(r instanceof Rn)return ih(t,r._key);throw new nt(Ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_p(r)}.`)}function h_(t,e){if(!Array.isArray(t)||t.length===0)throw new nt(Ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function f4(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new nt(Ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new nt(Ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class h4{convertValue(e,r="none"){switch(tl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(el(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Pt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return fl(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Kr(a.doubleValue));return new Ap(i)}convertGeoPoint(e){return new Sp(Kr(e.latitude),Kr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=ey(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(vd(e));default:return null}}convertTimestamp(e){const r=uo(e);return new nn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Sr.fromString(e);mr(FC(n));const s=new _c(n.get(1),n.get(3)),i=new yt(n.popFirst(5));return s.isEqual(r)||Si(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ry extends ky{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(wp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Vu extends Ry{data(e={}){return super.data(e)}}class Fy{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Kl(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Vu(this._firestore,this._userDataWriter,n.key,n,new Kl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new nt(Ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new Vu(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Kl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new Vu(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Kl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:A9(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function A9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t){t=Qn(t,Rn);const e=Qn(t.firestore,ga);return p9(Uc(e),t._key).then(r=>m4(e,t,r))}class Ny extends h4{constructor(e){super(),this.firestore=e}convertBytes(e){return new rl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,r)}}function Gt(t){t=Qn(t,xa);const e=Qn(t.firestore,ga),r=Uc(e),n=new Ny(e);return d4(t._query),m9(r,t._query).then(s=>new Fy(e,n,t,s))}function jt(t,e,r){t=Qn(t,Rn);const n=Qn(t.firestore,ga),s=Py(t.converter,e,r);return Hc(n,[Ty(Vc(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,ds.none())])}function Pp(t,e,r,...n){t=Qn(t,Rn);const s=Qn(t.firestore,ga),i=Vc(s);let a;return a=typeof(e=dr(e))=="string"||e instanceof $c?i4(i,"updateDoc",t._key,e,r,n):a4(i,"updateDoc",t._key,e),Hc(s,[a.toMutation(t._key,ds.exists(!0))])}function ho(t){return Hc(Qn(t.firestore,ga),[new gp(t._key,ds.none())])}function p4(t,e){const r=Qn(t.firestore,ga),n=Ze(t),s=Py(t.converter,e);return Hc(r,[Ty(Vc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,ds.exists(!1))]).then(()=>n)}function sf(t,...e){var r,n,s;t=dr(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||d_(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(d_(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,c,u;if(t instanceof Rn)c=Qn(t.firestore,ga),u=dp(t._key.path),l={next:f=>{e[a]&&e[a](m4(c,t,f))},error:e[a+1],complete:e[a+2]};else{const f=Qn(t,xa);c=Qn(f.firestore,ga),u=f._query;const h=new Ny(c);l={next:p=>{e[a]&&e[a](new Fy(c,h,f,p))},error:e[a+1],complete:e[a+2]},d4(t._query)}return function(h,p,g,v){const y=new Sy(v),b=new _y(p,y,g);return h.asyncQueue.enqueueAndForget(async()=>yy(await fh(h),b)),()=>{y.Za(),h.asyncQueue.enqueueAndForget(async()=>xy(await fh(h),b))}}(Uc(c),u,o,l)}function Hc(t,e){return function(n,s){const i=new ui;return n.asyncQueue.enqueueAndForget(async()=>n9(await h9(n),s,i)),i.promise}(Uc(t),e)}function m4(t,e,r){const n=r.docs.get(e._key),s=new Ny(t);return new Ry(t,s,e._key,n,new Kl(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Vc(e)}set(e,r,n){this._verifyNotCommitted();const s=ym(e,this._firestore),i=Py(s.converter,r,n),a=Ty(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,ds.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=ym(e,this._firestore);let a;return a=typeof(r=dr(r))=="string"||r instanceof $c?i4(this._dataReader,"WriteBatch.update",i._key,r,n,s):a4(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,ds.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=ym(e,this._firestore);return this._mutations=this._mutations.concat(new gp(r._key,ds.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(Ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ym(t,e){if((t=dr(t)).firestore!==e)throw new nt(Ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function In(){return new wy("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){return Uc(t=Qn(t,ga)),new g4(t,e=>Hc(t,e))}(function(e,r=!0){(function(s){Mc=s})(dl),oo(new Ei("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new ga(new O5(n.getProvider("auth-internal")),new U5(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new nt(Ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _c(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ws(k2,"4.7.3",e),Ws(k2,"4.7.3","esm2017")})();const T9=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:h4,Bytes:rl,CollectionReference:di,DocumentReference:Rn,DocumentSnapshot:Ry,FieldPath:$c,FieldValue:ef,Firestore:ga,FirestoreError:nt,GeoPoint:Sp,Query:xa,QueryCompositeFilterConstraint:Cp,QueryConstraint:rf,QueryDocumentSnapshot:Vu,QueryFieldFilterConstraint:nf,QueryLimitConstraint:kp,QueryOrderByConstraint:Ip,QuerySnapshot:Fy,QueryStartAtConstraint:Dp,SnapshotMetadata:Kl,Timestamp:nn,VectorValue:Ap,WriteBatch:g4,_AutoId:J1,_ByteString:yn,_DatabaseId:_c,_DocumentKey:yt,_EmptyAuthCredentialsProvider:rC,_FieldPath:gn,_cast:Qn,_logWarn:Zo,_validateIsNotUsedTogether:t4,addDoc:p4,collection:At,connectFirestoreEmulator:r4,deleteDoc:ho,doc:Ze,ensureFirestoreConfigured:Uc,executeWrite:Hc,getDoc:sr,getDocs:Gt,getFirestore:vo,limit:ia,onSnapshot:sf,orderBy:hn,query:or,serverTimestamp:In,setDoc:jt,startAfter:ph,updateDoc:Pp,where:Ur,writeBatch:Oy},Symbol.toStringTag,{value:"Module"}));var w9="firebase",C9="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws(w9,C9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="firebasestorage.googleapis.com",y4="storageBucket",I9=2*60*1e3,k9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends ya{constructor(e,r,n=0){super(xm(e),`Firebase Storage: ${r} (${xm(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jr||(jr={}));function xm(t){return"storage/"+t}function My(){const t="An unknown error occurred, please check the error payload for server response.";return new Wr(jr.UNKNOWN,t)}function D9(t){return new Wr(jr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function P9(t){return new Wr(jr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function R9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wr(jr.UNAUTHENTICATED,t)}function F9(){return new Wr(jr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function N9(t){return new Wr(jr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function O9(){return new Wr(jr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function M9(){return new Wr(jr.CANCELED,"User canceled the upload/download.")}function L9(t){return new Wr(jr.INVALID_URL,"Invalid URL '"+t+"'.")}function B9(t){return new Wr(jr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function U9(){return new Wr(jr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+y4+"' property when initializing the app?")}function $9(){return new Wr(jr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function V9(t){return new Wr(jr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mh(t){return new Wr(jr.INVALID_ARGUMENT,t)}function x4(){return new Wr(jr.APP_DELETED,"The Firebase app was deleted.")}function E4(t){return new Wr(jr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hu(t,e){return new Wr(jr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function su(t){throw new Wr(jr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Xn.makeFromUrl(e,r)}catch{return new Xn(e,"")}if(n.path==="")return n;throw B9(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${u}/b/${s}/o${h}`,"i"),g={bucket:1,path:3},v=r===v4?"(?:storage.googleapis.com|storage.cloud.google.com)":r,y="([^?#]*)",b=new RegExp(`^https?://${v}/${s}/${y}`,"i"),x=[{regex:o,indices:l,postModify:i},{regex:p,indices:g,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<x.length;w++){const P=x[w],R=P.regex.exec(e);if(R){const A=R[P.indices.bucket];let _=R[P.indices.path];_||(_=""),n=new Xn(A,_),P.postModify(n);break}}if(n==null)throw L9(e);return n}}class H9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(t,e,r){let n=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function f(y){s=setTimeout(()=>{s=null,t(p,l())},y)}function h(){i&&clearTimeout(i)}function p(y,...b){if(c){h();return}if(y){h(),u.call(null,y,...b);return}if(l()||a){h(),u.call(null,y,...b);return}n<64&&(n*=2);let x;o===1?(o=2,x=0):x=(n+Math.random())*1e3,f(x)}let g=!1;function v(y){g||(g=!0,h(),!c&&(s!==null?(y||(o=2),clearTimeout(s),f(0)):y||(o=1)))}return f(0),i=setTimeout(()=>{a=!0,v(!0)},r),v}function G9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){return t!==void 0}function z9(t){return typeof t=="object"&&!Array.isArray(t)}function _4(t){return typeof t=="string"||t instanceof String}function p_(t){return Ly()&&t instanceof Blob}function Ly(){return typeof Blob<"u"}function kv(t,e,r,n){if(n<e)throw mh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw mh(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function K9(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Go;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Go||(Go={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,r,n,s,i,a,o,l,c,u,f,h=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new $f(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===Go.NO_ERROR,l=i.getStatus();if(!o||q9(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Go.ABORT;n(!1,new $f(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new $f(c,i))})},r=(n,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());W9(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=My();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?x4():M9();a(l)}else{const l=O9();a(l)}};this.canceled_?r(!1,new $f(!1,null,!0)):this.backoffId_=j9(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&G9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $f{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Y9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Q9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function J9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Z9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function eM(t,e,r,n,s,i,a=!0){const o=K9(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return J9(c,e),Y9(c,r),Q9(c,i),Z9(c,n),new X9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rM(...t){const e=tM();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(Ly())return new Blob(t);throw new Wr(jr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nM(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){if(typeof atob>"u")throw V9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Em{constructor(e,r){this.data=e,this.contentType=r||null}}function Uy(t,e){switch(t){case Vs.RAW:return new Em(b4(e));case Vs.BASE64:case Vs.BASE64URL:return new Em(S4(t,e));case Vs.DATA_URL:return new Em(iM(e),oM(e))}throw My()}function b4(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=t.charCodeAt(++r);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function aM(t){let e;try{e=decodeURIComponent(t)}catch{throw Hu(Vs.DATA_URL,"Malformed data URL.")}return b4(e)}function S4(t,e){switch(t){case Vs.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Hu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Vs.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Hu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=sM(e)}catch(s){throw s.message.includes("polyfill")?s:Hu(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class A4{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Hu(Vs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=lM(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function iM(t){const e=new A4(t);return e.base64?S4(Vs.BASE64,e.rest):aM(e.rest)}function oM(t){return new A4(t).contentType}function lM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,r){let n=0,s="";p_(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(p_(this.data_)){const n=this.data_,s=nM(n,e,r);return s===null?null:new si(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new si(n,!0)}}static getBlob(...e){if(Ly()){const r=e.map(n=>n instanceof si?n.data_:n);return new si(rM.apply(null,r))}else{const r=e.map(a=>_4(a)?Uy(Vs.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new si(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(t){let e;try{e=JSON.parse(t)}catch{return null}return z9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function uM(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function w4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t,e){return e}class ns{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||dM}}let Vf=null;function fM(t){return!_4(t)||t.length<2?t:w4(t)}function hM(){if(Vf)return Vf;const t=[];t.push(new ns("bucket")),t.push(new ns("generation")),t.push(new ns("metageneration")),t.push(new ns("name","fullPath",!0));function e(i,a){return fM(a)}const r=new ns("name");r.xform=e,t.push(r);function n(i,a){return a!==void 0?Number(a):a}const s=new ns("size");return s.xform=n,t.push(s),t.push(new ns("timeCreated")),t.push(new ns("updated")),t.push(new ns("md5Hash",null,!0)),t.push(new ns("cacheControl",null,!0)),t.push(new ns("contentDisposition",null,!0)),t.push(new ns("contentEncoding",null,!0)),t.push(new ns("contentLanguage",null,!0)),t.push(new ns("contentType",null,!0)),t.push(new ns("metadata","customMetadata",!0)),Vf=t,Vf}function pM(t,e){function r(){const n=t.bucket,s=t.fullPath,i=new Xn(n,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function mM(t,e,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const a=r[i];n[a.local]=a.xform(n,e[a.server])}return pM(n,t),n}function gM(t,e,r){const n=T4(e);return n===null?null:mM(t,n,r)}function vM(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="prefixes",g_="items";function yM(t,e,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[m_])for(const s of r[m_]){const i=s.replace(/\/$/,""),a=t._makeStorageReference(new Xn(e,i));n.prefixes.push(a)}if(r[g_])for(const s of r[g_]){const i=t._makeStorageReference(new Xn(e,s.name));n.items.push(i)}return n}function xM(t,e,r){const n=T4(r);return n===null?null:yM(t,e,n)}class $y{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t){if(!t)throw My()}function EM(t,e){function r(n,s){const i=gM(t,s,e);return C4(i!==null),i}return r}function _M(t,e){function r(n,s){const i=xM(t,e,s);return C4(i!==null),i}return r}function Vy(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=F9():s=R9():r.getStatus()===402?s=P9(t.bucket):r.getStatus()===403?s=N9(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function bM(t){const e=Vy(t);function r(n,s){let i=e(n,s);return n.getStatus()===404&&(i=D9(t.path)),i.serverResponse=s.serverResponse,i}return r}function SM(t,e,r,n,s){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",r.length>0&&(i.delimiter=r),n&&(i.pageToken=n),s&&(i.maxResults=s);const a=e.bucketOnlyServerUrl(),o=By(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new $y(o,l,_M(t,e.bucket),c);return u.urlParams=i,u.errorHandler=Vy(e),u}function AM(t,e){const r=e.fullServerUrl(),n=By(r,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function a(l,c){}const o=new $y(n,s,a,i);return o.successCodes=[200,204],o.errorHandler=bM(e),o}function TM(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function wM(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=TM(null,e)),n}function CM(t,e,r,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let x="";for(let w=0;w<2;w++)x=x+Math.random().toString().slice(2);return x}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=wM(e,n,s),u=vM(c,r),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=si.getBlob(f,n,h);if(p===null)throw $9();const g={name:c.fullPath},v=By(i,t.host,t._protocol),y="POST",b=t.maxUploadRetryTime,E=new $y(v,y,EM(t,r),b);return E.urlParams=g,E.headers=a,E.body=p.uploadData(),E.errorHandler=Vy(e),E}class IM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Go.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Go.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Go.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw su("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw su("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw su("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw su("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw su("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class kM extends IM{initXhr(){this.xhr_.responseType="text"}}function Hy(){return new kM}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,r){this._service=e,r instanceof Xn?this._location=r:this._location=Xn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new nl(e,r)}get root(){const e=new Xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return w4(this._location.path)}get storage(){return this._service}get parent(){const e=cM(this._location.path);if(e===null)return null;const r=new Xn(this._location.bucket,e);return new nl(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw E4(e)}}function I4(t,e,r){t._throwIfRoot("uploadBytes");const n=CM(t.storage,t._location,hM(),new si(e,!0),r);return t.storage.makeRequestWithTokens(n,Hy).then(s=>({metadata:s,ref:t}))}function DM(t,e,r=Vs.RAW,n){t._throwIfRoot("uploadString");const s=Uy(r,e),i=Object.assign({},n);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),I4(t,s.data,i)}function PM(t){const e={prefixes:[],items:[]};return k4(t,e).then(()=>e)}async function k4(t,e,r){const s=await RM(t,{pageToken:r});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await k4(t,e,s.nextPageToken)}function RM(t,e){e!=null&&typeof e.maxResults=="number"&&kv("options.maxResults",1,1e3,e.maxResults);const r=e||{},n=SM(t.storage,t._location,"/",r.pageToken,r.maxResults);return t.storage.makeRequestWithTokens(n,Hy)}function FM(t){t._throwIfRoot("deleteObject");const e=AM(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Hy)}function NM(t,e){const r=uM(t._location.path,e),n=new Xn(t._location.bucket,r);return new nl(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){return/^[A-Za-z]+:\/\//.test(t)}function MM(t,e){return new nl(t,e)}function D4(t,e){if(t instanceof jy){const r=t;if(r._bucket==null)throw U9();const n=new nl(r,r._bucket);return e!=null?D4(n,e):n}else return e!==void 0?NM(t,e):t}function LM(t,e){if(e&&OM(e)){if(t instanceof jy)return MM(t,e);throw mh("To use ref(service, url), the first argument must be a Storage instance.")}else return D4(t,e)}function v_(t,e){const r=e==null?void 0:e[y4];return r==null?null:Xn.makeFromBucketSpec(r,t)}function BM(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:aw(s,t.app.options.projectId))}class jy{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=v4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I9,this._maxUploadRetryTime=k9,this._requests=new Set,s!=null?this._bucket=Xn.makeFromBucketSpec(s,this._host):this._bucket=v_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xn.makeFromBucketSpec(this._url,e):this._bucket=v_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nl(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new H9(x4());{const a=eM(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const y_="@firebase/storage",x_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4="storage";function R4(t,e,r){return t=dr(t),I4(t,e,r)}function F4(t,e,r,n){return t=dr(t),DM(t,e,r,n)}function N4(t){return t=dr(t),PM(t)}function Dv(t){return t=dr(t),FM(t)}function gh(t,e){return t=dr(t),LM(t,e)}function O4(t=Gd(),e){t=dr(t);const n=jd(t,P4).getImmediate({identifier:e}),s=R1("storage");return s&&M4(n,...s),n}function M4(t,e,r,n={}){BM(t,e,r,n)}function UM(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new jy(r,n,s,e,dl)}function $M(){oo(new Ei(P4,UM,"PUBLIC").setMultipleInstances(!0)),Ws(y_,x_,""),Ws(y_,x_,"esm2017")}$M();const VM=Object.freeze(Object.defineProperty({__proto__:null,StorageError:Wr,get StorageErrorCode(){return jr},StringFormat:Vs,_FbsBlob:si,_Location:Xn,_dataFromString:Uy,_invalidArgument:mh,_invalidRootOperation:E4,connectStorageEmulator:M4,deleteObject:Dv,getStorage:O4,listAll:N4,ref:gh,uploadBytes:R4,uploadString:F4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="type.googleapis.com/google.protobuf.Int64Value",jM="type.googleapis.com/google.protobuf.UInt64Value";function L4(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function Pv(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Pv(e));if(typeof t=="function"||typeof t=="object")return L4(t,e=>Pv(e));throw new Error("Data cannot be encoded in JSON: "+t)}function vh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case HM:case jM:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>vh(e)):typeof t=="function"||typeof t=="object"?L4(t,e=>vh(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lc extends ya{constructor(e,r,n){super(`${Gy}/${e}`,r||""),this.details=n}}function GM(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function WM(t,e){let r=GM(t),n=r,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!E_[a])return new lc("internal","internal");r=E_[a],n=a}const o=i.message;typeof o=="string"&&(n=o),s=i.details,s!==void 0&&(s=vh(s))}}catch{}return r==="ok"?null:new lc(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="us-central1";function KM(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new lc("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class qM{constructor(e,r,n,s,i=Rv,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new zM(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Rv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function XM(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function YM(t,e,r){return n=>JM(t,e,n,r||{})}async function QM(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function JM(t,e,r,n){const s=t._url(e);return ZM(t,s,r,n)}async function ZM(t,e,r,n){r=Pv(r);const s={data:r},i={},a=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,l=KM(o),c=await Promise.race([QM(e,s,i,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new lc("cancelled","Firebase Functions instance was deleted.");const u=WM(c.status,c.json);if(u)throw u;if(!c.json)throw new lc("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new lc("internal","Response is missing data field.");return{data:vh(f)}}const __="@firebase/functions",b_="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="auth-internal",tL="app-check-internal",rL="messaging-internal";function nL(t,e){const r=(n,{instanceIdentifier:s})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(eL),o=n.getProvider(rL),l=n.getProvider(tL);return new qM(i,a,o,l,s,t)};oo(new Ei(Gy,r,"PUBLIC").setMultipleInstances(!0)),Ws(__,b_,e),Ws(__,b_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t=Gd(),e=Rv){const n=jd(dr(t),Gy).getImmediate({identifier:e}),s=R1("functions");return s&&B4(n,...s),n}function B4(t,e,r){XM(dr(t),e,r)}function Da(t,e,r){return YM(dr(t),e,r)}nL(fetch.bind(self));const T0=Object.freeze(Object.defineProperty({__proto__:null,connectFunctionsEmulator:B4,getFunctions:cc,httpsCallable:Da},Symbol.toStringTag,{value:"Module"})),Wy={apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",authDomain:"casemangervue.firebaseapp.com",projectId:"casemangervue",storageBucket:"casemangervue.firebasestorage.app",messagingSenderId:"756483333257",appId:"1:756483333257:web:694e2ad2415b7886563a58",measurementId:"G-YBRDQX9NFR"},Rp=lw(Wy),_t=Qo(Rp);_t.setPersistence(z1).then(()=>{console.log(" Firebase auth persistence set to LOCAL - each tab maintains independent auth state")}).catch(t=>{console.error(" Error setting auth persistence:",t)});const qe=vo(Rp),Cc=O4(Rp),U4=cc(Rp),zy=new aa,$4=async()=>{try{const t=await fetch(`https://oauth2.googleapis.com/tokeninfo?client_id=${Wy.appId.split(":")[1]}`,{method:"GET"});if(t.ok){const e=await t.json();return!e.error&&(e.aud&&!e.aud.includes("apps.googleusercontent.com")||e.client_type==="confidential")?(zy.addScope("https://www.googleapis.com/auth/gmail.compose"),console.log(" Internal OAuth detected - Gmail scope added"),!0):(console.log(" Public OAuth detected - Gmail scope not added"),!1)}}catch(t){console.warn(" Could not determine OAuth type:",t)}return!1};$4();console.log(" Connected to Firebase project:",Wy.projectId);const Ky=Object.freeze(Object.defineProperty({__proto__:null,auth:_t,checkAndAddGmailScope:$4,db:qe,functions:U4,googleProvider:zy,storage:Cc},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Hl=typeof document<"u";function V4(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function sL(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&V4(t.default)}const hr=Object.assign;function _m(t,e){const r={};for(const n in e){const s=e[n];r[n]=va(s)?s.map(t):t(s)}return r}const ju=()=>{},va=Array.isArray,H4=/#/g,aL=/&/g,iL=/\//g,oL=/=/g,lL=/\?/g,j4=/\+/g,cL=/%5B/g,uL=/%5D/g,G4=/%5E/g,dL=/%60/g,W4=/%7B/g,fL=/%7C/g,z4=/%7D/g,hL=/%20/g;function qy(t){return encodeURI(""+t).replace(fL,"|").replace(cL,"[").replace(uL,"]")}function pL(t){return qy(t).replace(W4,"{").replace(z4,"}").replace(G4,"^")}function Fv(t){return qy(t).replace(j4,"%2B").replace(hL,"+").replace(H4,"%23").replace(aL,"%26").replace(dL,"`").replace(W4,"{").replace(z4,"}").replace(G4,"^")}function mL(t){return Fv(t).replace(oL,"%3D")}function gL(t){return qy(t).replace(H4,"%23").replace(lL,"%3F")}function vL(t){return t==null?"":gL(t).replace(iL,"%2F")}function Sd(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const yL=/\/$/,xL=t=>t.replace(yL,"");function bm(t,e,r="/"){let n,s={},i="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=e.slice(0,l),i=e.slice(l+1,o>-1?o:e.length),s=t(i)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=SL(n??e,r),{fullPath:n+(i&&"?")+i+a,path:n,query:s,hash:Sd(a)}}function EL(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function S_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function _L(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&Ic(e.matched[n],r.matched[s])&&K4(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function Ic(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function K4(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!bL(t[r],e[r]))return!1;return!0}function bL(t,e){return va(t)?A_(t,e):va(e)?A_(e,t):t===e}function A_(t,e){return va(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function SL(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const Li={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ad;(function(t){t.pop="pop",t.push="push"})(Ad||(Ad={}));var Gu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Gu||(Gu={}));function AL(t){if(!t)if(Hl){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),xL(t)}const TL=/^[^#]+#/;function wL(t,e){return t.replace(TL,"#")+e}function CL(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const Fp=()=>({left:window.scrollX,top:window.scrollY});function IL(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=CL(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function T_(t,e){return(history.state?history.state.position-e:-1)+t}const Nv=new Map;function kL(t,e){Nv.set(t,e)}function DL(t){const e=Nv.get(t);return Nv.delete(t),e}let PL=()=>location.protocol+"//"+location.host;function q4(t,e){const{pathname:r,search:n,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),S_(l,"")}return S_(r,t)+n+s}function RL(t,e,r,n){let s=[],i=[],a=null;const o=({state:h})=>{const p=q4(t,location),g=r.value,v=e.value;let y=0;if(h){if(r.value=p,e.value=h,a&&a===g){a=null;return}y=v?h.position-v.position:0}else n(p);s.forEach(b=>{b(r.value,g,{delta:y,type:Ad.pop,direction:y?y>0?Gu.forward:Gu.back:Gu.unknown})})};function l(){a=r.value}function c(h){s.push(h);const p=()=>{const g=s.indexOf(h);g>-1&&s.splice(g,1)};return i.push(p),p}function u(){const{history:h}=window;h.state&&h.replaceState(hr({},h.state,{scroll:Fp()}),"")}function f(){for(const h of i)h();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function w_(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?Fp():null}}function FL(t){const{history:e,location:r}=window,n={value:q4(t,r)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const f=t.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?t:t.slice(f))+l:PL()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),s.value=c}catch(p){console.error(p),r[u?"replace":"assign"](h)}}function a(l,c){const u=hr({},e.state,w_(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),n.value=l}function o(l,c){const u=hr({},s.value,e.state,{forward:l,scroll:Fp()});i(u.current,u,!0);const f=hr({},w_(n.value,l,null),{position:u.position+1},c);i(l,f,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function NL(t){t=AL(t);const e=FL(t),r=RL(t,e.state,e.location,e.replace);function n(i,a=!0){a||r.pauseListeners(),history.go(i)}const s=hr({location:"",base:t,go:n,createHref:wL.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function OL(t){return typeof t=="string"||t&&typeof t=="object"}function X4(t){return typeof t=="string"||typeof t=="symbol"}const Y4=Symbol("");var C_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(C_||(C_={}));function kc(t,e){return hr(new Error,{type:t,[Y4]:!0},e)}function Xa(t,e){return t instanceof Error&&Y4 in t&&(e==null||!!(t.type&e))}const I_="[^/]+?",ML={sensitive:!1,strict:!1,start:!0,end:!0},LL=/[.+*?^${}()[\]/\\]/g;function BL(t,e){const r=hr({},ML,e),n=[];let s=r.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(s+="/");for(let f=0;f<c.length;f++){const h=c[f];let p=40+(r.sensitive?.25:0);if(h.type===0)f||(s+="/"),s+=h.value.replace(LL,"\\$&"),p+=40;else if(h.type===1){const{value:g,repeatable:v,optional:y,regexp:b}=h;i.push({name:g,repeatable:v,optional:y});const E=b||I_;if(E!==I_){p+=10;try{new RegExp(`(${E})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${E}): `+w.message)}}let x=v?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;f||(x=y&&c.length<2?`(?:/${x})`:"/"+x),y&&(x+="?"),s+=x,p+=20,y&&(p+=-8),v&&(p+=-20),E===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,r.sensitive?"":"i");function o(c){const u=c.match(a),f={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",g=i[h-1];f[g.name]=p&&g.repeatable?p.split("/"):p}return f}function l(c){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:g,repeatable:v,optional:y}=p,b=g in c?c[g]:"";if(va(b)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const E=va(b)?b.join("/"):b;if(!E)if(y)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=E}}return u||"/"}return{re:a,score:n,keys:i,parse:o,stringify:l}}function UL(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Q4(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const i=UL(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(k_(n))return 1;if(k_(s))return-1}return s.length-n.length}function k_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const $L={type:0,value:""},VL=/[a-zA-Z0-9_]/;function HL(t){if(!t)return[[]];if(t==="/")return[[$L]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=0,n=r;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,c="",u="";function f(){c&&(r===0?i.push({type:0,value:c}):r===1||r===2||r===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&f(),a()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:VL.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),a(),s}function jL(t,e,r){const n=BL(HL(t.path),r),s=hr(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function GL(t,e){const r=[],n=new Map;e=F_({strict:!1,end:!0,sensitive:!1},e);function s(f){return n.get(f)}function i(f,h,p){const g=!p,v=P_(f);v.aliasOf=p&&p.record;const y=F_(e,f),b=[v];if("alias"in f){const w=typeof f.alias=="string"?[f.alias]:f.alias;for(const P of w)b.push(P_(hr({},v,{components:p?p.record.components:v.components,path:P,aliasOf:p?p.record:v})))}let E,x;for(const w of b){const{path:P}=w;if(h&&P[0]!=="/"){const R=h.record.path,A=R[R.length-1]==="/"?"":"/";w.path=h.record.path+(P&&A+P)}if(E=jL(w,h,y),p?p.alias.push(E):(x=x||E,x!==E&&x.alias.push(E),g&&f.name&&!R_(E)&&a(f.name)),J4(E)&&l(E),v.children){const R=v.children;for(let A=0;A<R.length;A++)i(R[A],E,p&&p.children[A])}p=p||E}return x?()=>{a(x)}:ju}function a(f){if(X4(f)){const h=n.get(f);h&&(n.delete(f),r.splice(r.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=r.indexOf(f);h>-1&&(r.splice(h,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function o(){return r}function l(f){const h=KL(f,r);r.splice(h,0,f),f.record.name&&!R_(f)&&n.set(f.record.name,f)}function c(f,h){let p,g={},v,y;if("name"in f&&f.name){if(p=n.get(f.name),!p)throw kc(1,{location:f});y=p.record.name,g=hr(D_(h.params,p.keys.filter(x=>!x.optional).concat(p.parent?p.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),f.params&&D_(f.params,p.keys.map(x=>x.name))),v=p.stringify(g)}else if(f.path!=null)v=f.path,p=r.find(x=>x.re.test(v)),p&&(g=p.parse(v),y=p.record.name);else{if(p=h.name?n.get(h.name):r.find(x=>x.re.test(h.path)),!p)throw kc(1,{location:f,currentLocation:h});y=p.record.name,g=hr({},h.params,f.params),v=p.stringify(g)}const b=[];let E=p;for(;E;)b.unshift(E.record),E=E.parent;return{name:y,path:v,params:g,matched:b,meta:zL(b)}}t.forEach(f=>i(f));function u(){r.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:a,clearRoutes:u,getRoutes:o,getRecordMatcher:s}}function D_(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function P_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:WL(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function WL(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function R_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function zL(t){return t.reduce((e,r)=>hr(e,r.meta),{})}function F_(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function KL(t,e){let r=0,n=e.length;for(;r!==n;){const i=r+n>>1;Q4(t,e[i])<0?n=i:r=i+1}const s=qL(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function qL(t){let e=t;for(;e=e.parent;)if(J4(e)&&Q4(t,e)===0)return e}function J4({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function XL(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(j4," "),a=i.indexOf("="),o=Sd(a<0?i:i.slice(0,a)),l=a<0?null:Sd(i.slice(a+1));if(o in e){let c=e[o];va(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function N_(t){let e="";for(let r in t){const n=t[r];if(r=mL(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(va(n)?n.map(i=>i&&Fv(i)):[n&&Fv(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function YL(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=va(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const QL=Symbol(""),O_=Symbol(""),Np=Symbol(""),Xy=Symbol(""),Ov=Symbol("");function au(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Wi(t,e,r,n,s,i=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const c=h=>{h===!1?l(kc(4,{from:r,to:e})):h instanceof Error?l(h):OL(h)?l(kc(2,{from:e,to:h})):(a&&n.enterCallbacks[s]===a&&typeof h=="function"&&a.push(h),o())},u=i(()=>t.call(n&&n.instances[s],e,r,c));let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(h=>l(h))})}function Sm(t,e,r,n,s=i=>i()){const i=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(V4(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Wi(u,r,n,a,o,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const f=sL(u)?u.default:u;a.mods[o]=u,a.components[o]=f;const p=(f.__vccOpts||f)[e];return p&&Wi(p,r,n,a,o,s)()}))}}return i}function M_(t){const e=Ps(Np),r=Ps(Xy),n=be(()=>{const l=q(t.to);return e.resolve(l)}),s=be(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],f=r.matched;if(!u||!f.length)return-1;const h=f.findIndex(Ic.bind(null,u));if(h>-1)return h;const p=L_(l[c-2]);return c>1&&L_(u)===p&&f[f.length-1].path!==p?f.findIndex(Ic.bind(null,l[c-2])):h}),i=be(()=>s.value>-1&&rB(r.params,n.value.params)),a=be(()=>s.value>-1&&s.value===r.matched.length-1&&K4(r.params,n.value.params));function o(l={}){if(tB(l)){const c=e[q(t.replace)?"replace":"push"](q(t.to)).catch(ju);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:be(()=>n.value.href),isActive:i,isExactActive:a,navigate:o}}function JL(t){return t.length===1?t[0]:t}const ZL=Ld({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:M_,setup(t,{slots:e}){const r=Fs(M_(t)),{options:n}=Ps(Np),s=be(()=>({[B_(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[B_(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&JL(e.default(r));return t.custom?i:Yo("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),eB=ZL;function tB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function rB(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!va(s)||s.length!==n.length||n.some((i,a)=>i!==s[a]))return!1}return!0}function L_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const B_=(t,e,r)=>t??e??r,nB=Ld({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=Ps(Ov),s=be(()=>t.route||n.value),i=Ps(O_,0),a=be(()=>{let c=q(i);const{matched:u}=s.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),o=be(()=>s.value.matched[a.value]);Fu(O_,be(()=>a.value+1)),Fu(QL,o),Fu(Ov,s);const l=ae();return Vt(()=>[l.value,o.value,t.name],([c,u,f],[h,p,g])=>{u&&(u.instances[f]=c,p&&p!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Ic(u,p)||!h)&&(u.enterCallbacks[f]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,f=o.value,h=f&&f.components[u];if(!h)return U_(r.default,{Component:h,route:c});const p=f.props[u],g=p?p===!0?c.params:typeof p=="function"?p(c):p:null,y=Yo(h,hr({},g,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return U_(r.default,{Component:y,route:c})||y}}});function U_(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const sB=nB;function aB(t){const e=GL(t.routes,t),r=t.parseQuery||XL,n=t.stringifyQuery||N_,s=t.history,i=au(),a=au(),o=au(),l=m1(Li);let c=Li;Hl&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=_m.bind(null,se=>""+se),f=_m.bind(null,vL),h=_m.bind(null,Sd);function p(se,ce){let te,Z;return X4(se)?(te=e.getRecordMatcher(se),Z=ce):Z=se,e.addRoute(Z,te)}function g(se){const ce=e.getRecordMatcher(se);ce&&e.removeRoute(ce)}function v(){return e.getRoutes().map(se=>se.record)}function y(se){return!!e.getRecordMatcher(se)}function b(se,ce){if(ce=hr({},ce||l.value),typeof se=="string"){const Q=bm(r,se,ce.path),fe=e.resolve({path:Q.path},ce),ve=s.createHref(Q.fullPath);return hr(Q,fe,{params:h(fe.params),hash:Sd(Q.hash),redirectedFrom:void 0,href:ve})}let te;if(se.path!=null)te=hr({},se,{path:bm(r,se.path,ce.path).path});else{const Q=hr({},se.params);for(const fe in Q)Q[fe]==null&&delete Q[fe];te=hr({},se,{params:f(Q)}),ce.params=f(ce.params)}const Z=e.resolve(te,ce),ye=se.hash||"";Z.params=u(h(Z.params));const J=EL(n,hr({},se,{hash:pL(ye),path:Z.path})),X=s.createHref(J);return hr({fullPath:J,hash:ye,query:n===N_?YL(se.query):se.query||{}},Z,{redirectedFrom:void 0,href:X})}function E(se){return typeof se=="string"?bm(r,se,l.value.path):hr({},se)}function x(se,ce){if(c!==se)return kc(8,{from:ce,to:se})}function w(se){return A(se)}function P(se){return w(hr(E(se),{replace:!0}))}function R(se){const ce=se.matched[se.matched.length-1];if(ce&&ce.redirect){const{redirect:te}=ce;let Z=typeof te=="function"?te(se):te;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=E(Z):{path:Z},Z.params={}),hr({query:se.query,hash:se.hash,params:Z.path!=null?{}:se.params},Z)}}function A(se,ce){const te=c=b(se),Z=l.value,ye=se.state,J=se.force,X=se.replace===!0,Q=R(te);if(Q)return A(hr(E(Q),{state:typeof Q=="object"?hr({},ye,Q.state):ye,force:J,replace:X}),ce||te);const fe=te;fe.redirectedFrom=ce;let ve;return!J&&_L(n,Z,te)&&(ve=kc(16,{to:fe,from:Z}),j(Z,Z,!0,!1)),(ve?Promise.resolve(ve):S(fe,Z)).catch(ie=>Xa(ie)?Xa(ie,2)?ie:z(ie):M(ie,fe,Z)).then(ie=>{if(ie){if(Xa(ie,2))return A(hr({replace:X},E(ie.to),{state:typeof ie.to=="object"?hr({},ye,ie.to.state):ye,force:J}),ce||fe)}else ie=k(fe,Z,!0,X,ye);return I(fe,Z,ie),ie})}function _(se,ce){const te=x(se,ce);return te?Promise.reject(te):Promise.resolve()}function m(se){const ce=W.values().next().value;return ce&&typeof ce.runWithContext=="function"?ce.runWithContext(se):se()}function S(se,ce){let te;const[Z,ye,J]=iB(se,ce);te=Sm(Z.reverse(),"beforeRouteLeave",se,ce);for(const Q of Z)Q.leaveGuards.forEach(fe=>{te.push(Wi(fe,se,ce))});const X=_.bind(null,se,ce);return te.push(X),de(te).then(()=>{te=[];for(const Q of i.list())te.push(Wi(Q,se,ce));return te.push(X),de(te)}).then(()=>{te=Sm(ye,"beforeRouteUpdate",se,ce);for(const Q of ye)Q.updateGuards.forEach(fe=>{te.push(Wi(fe,se,ce))});return te.push(X),de(te)}).then(()=>{te=[];for(const Q of J)if(Q.beforeEnter)if(va(Q.beforeEnter))for(const fe of Q.beforeEnter)te.push(Wi(fe,se,ce));else te.push(Wi(Q.beforeEnter,se,ce));return te.push(X),de(te)}).then(()=>(se.matched.forEach(Q=>Q.enterCallbacks={}),te=Sm(J,"beforeRouteEnter",se,ce,m),te.push(X),de(te))).then(()=>{te=[];for(const Q of a.list())te.push(Wi(Q,se,ce));return te.push(X),de(te)}).catch(Q=>Xa(Q,8)?Q:Promise.reject(Q))}function I(se,ce,te){o.list().forEach(Z=>m(()=>Z(se,ce,te)))}function k(se,ce,te,Z,ye){const J=x(se,ce);if(J)return J;const X=ce===Li,Q=Hl?history.state:{};te&&(Z||X?s.replace(se.fullPath,hr({scroll:X&&Q&&Q.scroll},ye)):s.push(se.fullPath,ye)),l.value=se,j(se,ce,te,X),z()}let C;function O(){C||(C=s.listen((se,ce,te)=>{if(!ne.listening)return;const Z=b(se),ye=R(Z);if(ye){A(hr(ye,{replace:!0,force:!0}),Z).catch(ju);return}c=Z;const J=l.value;Hl&&kL(T_(J.fullPath,te.delta),Fp()),S(Z,J).catch(X=>Xa(X,12)?X:Xa(X,2)?(A(hr(E(X.to),{force:!0}),Z).then(Q=>{Xa(Q,20)&&!te.delta&&te.type===Ad.pop&&s.go(-1,!1)}).catch(ju),Promise.reject()):(te.delta&&s.go(-te.delta,!1),M(X,Z,J))).then(X=>{X=X||k(Z,J,!1),X&&(te.delta&&!Xa(X,8)?s.go(-te.delta,!1):te.type===Ad.pop&&Xa(X,20)&&s.go(-1,!1)),I(Z,J,X)}).catch(ju)}))}let D=au(),F=au(),N;function M(se,ce,te){z(se);const Z=F.list();return Z.length?Z.forEach(ye=>ye(se,ce,te)):console.error(se),Promise.reject(se)}function L(){return N&&l.value!==Li?Promise.resolve():new Promise((se,ce)=>{D.add([se,ce])})}function z(se){return N||(N=!se,O(),D.list().forEach(([ce,te])=>se?te(se):ce()),D.reset()),se}function j(se,ce,te,Z){const{scrollBehavior:ye}=t;if(!Hl||!ye)return Promise.resolve();const J=!te&&DL(T_(se.fullPath,0))||(Z||!te)&&history.state&&history.state.scroll||null;return ul().then(()=>ye(se,ce,J)).then(X=>X&&IL(X)).catch(X=>M(X,se,ce))}const H=se=>s.go(se);let G;const W=new Set,ne={currentRoute:l,listening:!0,addRoute:p,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:v,resolve:b,options:t,push:w,replace:P,go:H,back:()=>H(-1),forward:()=>H(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:F.add,isReady:L,install(se){const ce=this;se.component("RouterLink",eB),se.component("RouterView",sB),se.config.globalProperties.$router=ce,Object.defineProperty(se.config.globalProperties,"$route",{enumerable:!0,get:()=>q(l)}),Hl&&!G&&l.value===Li&&(G=!0,w(s.location).catch(ye=>{}));const te={};for(const ye in Li)Object.defineProperty(te,ye,{get:()=>l.value[ye],enumerable:!0});se.provide(Np,ce),se.provide(Xy,h1(te)),se.provide(Ov,l);const Z=se.unmount;W.add(se),se.unmount=function(){W.delete(se),W.size<1&&(c=Li,C&&C(),C=null,l.value=Li,G=!1,N=!1),Z()}}};function de(se){return se.reduce((ce,te)=>ce.then(()=>m(te)),Promise.resolve())}return ne}function iB(t,e){const r=[],n=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(t.matched.find(c=>Ic(c,o))?n.push(o):r.push(o));const l=t.matched[a];l&&(e.matched.find(c=>Ic(c,l))||s.push(l))}return[r,n,s]}function Ci(){return Ps(Np)}function oB(t){return Ps(Xy)}class lB{constructor(){this.enabled=!0}async logStudentAccess(e,r,n={}){if(!(!this.enabled||!_t.currentUser))try{const s=Ze(At(qe,"auditLogs"));await jt(s,{type:"student_access",studentId:e,userId:_t.currentUser.uid,userEmail:_t.currentUser.email,action:r,details:n,timestamp:In(),sessionId:this.getSessionId(),ipAddress:await this.getClientIP(),userAgent:navigator.userAgent})}catch(s){console.error("Audit logging failed:",s)}}async logUserManagement(e,r,n={}){if(!(!this.enabled||!_t.currentUser))try{const s=Ze(At(qe,"auditLogs"));await jt(s,{type:"user_management",targetUserId:e,performedBy:_t.currentUser.uid,performedByEmail:_t.currentUser.email,action:r,details:n,timestamp:In(),sessionId:this.getSessionId(),ipAddress:await this.getClientIP(),userAgent:navigator.userAgent})}catch(s){console.error("Audit logging failed:",s)}}async logSystemAccess(e,r={}){var n,s;if(this.enabled)try{const i=Ze(At(qe,"auditLogs"));await jt(i,{type:"system_access",userId:((n=_t.currentUser)==null?void 0:n.uid)||"unknown",userEmail:((s=_t.currentUser)==null?void 0:s.email)||"unknown",action:e,details:r,timestamp:In(),sessionId:this.getSessionId(),ipAddress:await this.getClientIP(),userAgent:navigator.userAgent})}catch(i){console.error("Audit logging failed:",i)}}async logDataExport(e,r,n={}){if(!(!this.enabled||!_t.currentUser))try{const s=Ze(At(qe,"auditLogs"));await jt(s,{type:"data_export",exportType:e,studentIds:Array.isArray(r)?r:[r],studentCount:Array.isArray(r)?r.length:1,userId:_t.currentUser.uid,userEmail:_t.currentUser.email,details:n,timestamp:In(),sessionId:this.getSessionId(),ipAddress:await this.getClientIP(),userAgent:navigator.userAgent})}catch(s){console.error("Audit logging failed:",s)}}getSessionId(){return sessionStorage.getItem("sessionId")||sessionStorage.setItem("sessionId",`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),sessionStorage.getItem("sessionId")}async getClientIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return"unknown"}}async generateAccessReport(e,r){try{const n=new Date(r.start),s=new Date(r.end);return{studentId:e,accessCount:0,uniqueUsers:[],actions:[],timeRange:r}}catch(n){return console.error("Report generation failed:",n),null}}}const rn=new lB,xn=JT("auth",()=>{const t=ae(null),e=ae(""),r=ae(!0),n=Ci(),s=()=>{W1(_t,async g=>{var v;if(r.value=!0,g)try{const y=await sr(Ze(qe,"users",g.uid));y.exists()?(t.value={uid:g.uid,email:g.email,name:g.displayName,...y.data()},console.log(" User authenticated:",t.value),console.log(" Setting up proactive token refresh for user:",t.value.uid),a()):(console.log(" User not found in Firestore"),t.value=null)}catch(y){console.error(" Error fetching user data:",y),console.error(" This might be due to expired token - user will be logged out"),t.value=null}else console.log(" CRITICAL: Firebase user became null - investigating cause..."),console.log(" Stack trace:",new Error().stack),console.log(" Previous user was:",((v=t.value)==null?void 0:v.email)||"None"),console.log(" Firebase auth object:",_t),console.log(" Firebase currentUser:",_t.currentUser),t.value=null,console.log(" No user authenticated"),o();r.value=!1})};let i=null;const a=()=>{o(),console.log(" setupTokenRefresh: Starting token refresh setup..."),i=setInterval(async()=>{if(console.log(" Token refresh interval triggered"),_t.currentUser){console.log(" Automatically refreshing Firebase token...");try{await f()||(console.error(" Failed to refresh token - logging user out for security"),console.log(" With IEP data, we cannot risk compromised authentication states"),await c())}catch(g){console.error(" Token refresh threw an error:",g),console.log(" Logging user out immediately for IEP data security"),await c()}}else console.log(" No current user during token refresh attempt")},45*60*1e3),console.log(" Token auto-refresh set up (every 45 minutes) - PROACTIVE MODE")},o=()=>{i&&(clearInterval(i),i=null,console.log(" Token auto-refresh cleared"))},l=async()=>{e.value="";try{const g=new aa,y=(await Y1(_t,g)).user,b=await sr(Ze(qe,"users",y.uid));if(!b.exists()){e.value=" User not found in system.";return}t.value={uid:y.uid,email:y.email,name:y.displayName,...b.data()},n.push("/")}catch(g){console.error(" Login error:",g),e.value=g.message||"Authentication failed."}},c=async()=>{try{t.value&&await rn.logSystemAccess("logout",{userRole:t.value.role,success:!0}),console.log(" EXPLICIT LOGOUT: authStore.logout() called"),console.log(" Logout stack trace:",new Error().stack),await ip(_t),t.value=null,n.push("/login")}catch(g){console.error(" Logout error:",g),await rn.logSystemAccess("logout_error",{error:g.message,success:!1})}},u=g=>{t.value=g},f=async()=>{if(_t.currentUser)try{const g=await uv(_t.currentUser,!0);return console.log(" Token refreshed successfully"),console.log(" New token length:",g.length),!0}catch(g){return console.error(" Error refreshing token:",g),console.error(" Error details:",g.code,g.message),!1}return console.log(" No current user for token refresh"),!1},h=async()=>{if(!_t.currentUser)return console.log(" No current user to check token"),!1;try{const g=await uv(_t.currentUser,!1);return console.log(" Current token exists, length:",g.length),!0}catch(g){return console.error(" Current token is invalid:",g),!1}},p=be(()=>t.value);return s(),{currentUser:t,user:p,errorMsg:e,isLoading:r,loginWithGoogle:l,logout:c,setUser:u,refreshToken:f,setupTokenRefresh:a,clearTokenRefresh:o,checkTokenValidity:h}}),cB=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:xn},Symbol.toStringTag,{value:"Module"})),uc=["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair","case_manager","teacher","service_provider","paraeducator"],uB=["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair","case_manager","teacher","service_provider","paraeducator"],iu=["admin","school_admin","admin_504","sped_chair"],at={VIEW_USERS:"view_users",EDIT_USER:"edit_user",DELETE_USER:"delete_user",VIEW_STUDENTS:"view_students",EDIT_STUDENT_CM:"edit_student_CM",EDIT_STUDENT_ALL:"edit_student_All",ACCESS_ADMIN_PANEL:"access_admin_panel",MANAGE_AIDES:"manage_aides",MANAGE_SYSTEM_SETTINGS:"manage_system_settings",MANAGE_TEACHER_FEEDBACK:"manage_teacher_feedback",MANAGE_IMPORTS:"manage_imports",MANAGE_BACKUPS:"manage_backups"},Z4={admin:[at.VIEW_USERS,at.EDIT_USER,at.DELETE_USER,at.VIEW_STUDENTS,at.EDIT_STUDENT_ALL,at.ACCESS_ADMIN_PANEL,at.MANAGE_AIDES,at.MANAGE_SYSTEM_SETTINGS,at.MANAGE_TEACHER_FEEDBACK,at.MANAGE_IMPORTS,at.MANAGE_BACKUPS],school_admin:[at.VIEW_USERS,at.EDIT_USER,at.DELETE_USER,at.VIEW_STUDENTS,at.EDIT_STUDENT_ALL,at.ACCESS_ADMIN_PANEL,at.MANAGE_AIDES,at.MANAGE_TEACHER_FEEDBACK,at.MANAGE_IMPORTS,at.MANAGE_BACKUPS],staff_view:[at.VIEW_USERS,at.VIEW_STUDENTS],staff_edit:[at.VIEW_USERS,at.VIEW_STUDENTS,at.EDIT_STUDENT_ALL],admin_504:[at.VIEW_USERS,at.EDIT_USER,at.DELETE_USER,at.VIEW_STUDENTS,at.EDIT_STUDENT_ALL,at.ACCESS_ADMIN_PANEL,at.MANAGE_AIDES,at.MANAGE_TEACHER_FEEDBACK],sped_chair:[at.VIEW_USERS,at.EDIT_USER,at.DELETE_USER,at.VIEW_STUDENTS,at.EDIT_STUDENT_ALL,at.ACCESS_ADMIN_PANEL,at.MANAGE_AIDES,at.MANAGE_TEACHER_FEEDBACK],case_manager:[at.VIEW_USERS,at.VIEW_STUDENTS,at.EDIT_STUDENT_CM,at.MANAGE_TEACHER_FEEDBACK],teacher:[at.VIEW_USERS,at.VIEW_STUDENTS],service_provider:[at.VIEW_USERS,at.VIEW_STUDENTS,at.EDIT_STUDENT_CM],paraeducator:[at.VIEW_USERS,at.VIEW_STUDENTS]};function $_(t){return uc.includes(t)}const dB={admin:"System Administrator - Full access to all features and settings",school_admin:"School Administrator - Manage students, aides, and users (no system settings)",staff_view:"Staff Viewer - IEP access for counselors, nurses, intervention specialists",staff_edit:"Staff Editor - Edit all students, no admin panel access",admin_504:"504 Plan Coordinator - Manage 504 plans, students, and aides",sped_chair:"Special Education Chair - Manage special education programs",case_manager:"Case Manager - Manage assigned student caseload only",teacher:"Teacher - View students in assigned classes",service_provider:"Service Provider - Manage students receiving services",paraeducator:"Paraeducator - View assigned students only"},Yy=JT("permission",()=>{const t=xn(),e=ae([]),r=ae({}),n=ae({}),s=ae(!1),i=async()=>{n.value=Z4,s.value=!0,console.log("Using static permissions matrix:",n.value),e.value.length>0&&(r.value=a(e.value))};function a(c){const u={};return console.log("Deriving permissions for roles:",c),console.log("Current permissions matrix:",n.value),console.log("Matrix loaded:",s.value),c.forEach(f=>{const h=n.value[f]||[];console.log(`Role ${f} has permissions:`,h),h.forEach(p=>u[p]=!0)}),console.log("Final derived permissions:",u),u}let o=null;return Vt(()=>{var c;return(c=t.currentUser)==null?void 0:c.uid},()=>{var c;if(o&&o(),(c=t.currentUser)!=null&&c.uid){const u=Ze(qe,"users",t.currentUser.uid);o=sf(u,f=>{const h=f.data()||{};e.value=h.role?[h.role]:[],console.log("User roles updated:",e.value),t.currentUser&&(t.currentUser.value={...t.currentUser.value,...h},console.log(" Updated auth store user data:",t.currentUser.value)),s.value&&(r.value=a(e.value))})}else e.value=[],r.value={}},{immediate:!0}),i(),{userRoles:e,userPermissions:r,permissionsMatrix:n,matrixLoaded:s,hasRole:c=>e.value.includes(c),can:c=>r.value[c]===!0,loadPermissionsMatrix:i}});function fB(){const t=Yy(),e=be(()=>t.hasRole("admin")),r=be(()=>t.can("manage_users")),n=s=>t.can(s);return{isAdmin:e,canManageUsers:r,hasRole:t.hasRole,can:t.can,hasPermission:n}}const xt=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},hB={name:"UserRoleSwitcher",setup(){const t=xn();fB();const e=ae(!1),r=ae(""),n=ae({}),s=ae(!1),i=be(()=>t.user),a=[{value:"admin",label:"Admin"},{value:"school_admin",label:"School Admin"},{value:"admin_504",label:"504 Coordinator"},{value:"sped_chair",label:"SPED Chair"},{value:"staff_view",label:"Staff (View)"},{value:"staff_edit",label:"Staff (Edit)"},{value:"case_manager",label:"Case Manager"},{value:"teacher",label:"Teacher"},{value:"service_provider",label:"Service Provider"},{value:"paraeducator",label:"Paraeducator"}],o=[{uid:"test-admin",name:"Test Admin",email:"admin@test.com",role:"admin"},{uid:"test-school-admin",name:"Test School Admin",email:"schooladmin@test.com",role:"school_admin"},{uid:"test-admin-504",name:"Test 504 Coordinator",email:"admin504@test.com",role:"admin_504"},{uid:"test-sped-chair",name:"Test SPED Chair",email:"spedchair@test.com",role:"sped_chair"},{uid:"test-case-manager",name:"Test Case Manager",email:"cm@test.com",role:"case_manager"},{uid:"test-paraeducator",name:"Test Paraeducator",email:"para@test.com",role:"paraeducator"},{uid:"test-teacher",name:"Test Teacher",email:"teacher@test.com",role:"teacher"},{uid:"test-service-provider",name:"Test Service Provider",email:"service@test.com",role:"service_provider"}],l=async()=>{s.value=!0;try{const b=Ze(qe,"config","permissions_matrix"),E=await sr(b);E.exists()?n.value=E.data():(console.warn("Permissions matrix not found in database"),n.value={})}catch(b){console.error("Error loading permissions matrix:",b),n.value={}}finally{s.value=!1}},c=be(()=>{var w;const b=[{action:at.VIEW_USERS,label:"View Users"},{action:at.EDIT_USER,label:"Edit User"},{action:at.DELETE_USER,label:"Delete User"},{action:at.MANAGE_SUBJECTS,label:"Manage Subjects"},{action:at.MANAGE_ROLES,label:"Manage Roles"},{action:at.VIEW_STUDENTS,label:"View Students"},{action:at.EDIT_STUDENT_CM,label:"Edit Students (Own Caseload)"},{action:at.EDIT_STUDENT_ALL,label:"Edit All Students"},{action:at.TESTING,label:"Testing"}],E=(w=i.value)==null?void 0:w.role,x=n.value[E]||[];return b.map(P=>({...P,granted:x.includes(P.action)}))}),u=()=>{e.value=!e.value},f=()=>{if(!r.value)return;const b={uid:`test-${r.value}-${Date.now()}`,email:`${r.value}@test.com`,name:`Test ${r.value.charAt(0).toUpperCase()+r.value.slice(1)}`,role:r.value,lastSyncTrigger:new Date().toISOString()};t.setUser(b),localStorage.setItem("debug-user",JSON.stringify(b)),r.value=""},h=b=>{t.setUser(b),localStorage.setItem("debug-user",JSON.stringify(b))},p=()=>{localStorage.removeItem("debug-user"),window.location.reload()},g=()=>{window.location.reload()};return Wt(async()=>{await l();const b=localStorage.getItem("debug-user");if(b)try{const E=JSON.parse(b);t.setUser(E)}catch(E){console.error("Error parsing debug user:",E),localStorage.removeItem("debug-user")}return()=>{}}),{canSwitchRoles:be(()=>{var E;const b=(E=i.value)==null?void 0:E.role;return["admin","administrator"].includes(b)}),hideRoleSwitcher:()=>{console.log("Role switcher hidden")},isExpanded:e,selectedRole:r,currentUser:i,availableRoles:a,testUsers:o,currentPermissions:c,loadingPermissions:s,toggleExpanded:u,switchRole:f,switchToUser:h,resetToRealUser:p,refreshPage:g}}},pB=["title"],mB={key:0,class:"debug-label"},gB={key:0,class:"switcher-content"},vB={class:"current-user-info"},yB={class:"role-selector"},xB=["value"],EB={class:"test-users"},_B={class:"test-user-buttons"},bB=["onClick"],SB={class:"permission-info"},AB={key:0,class:"loading-permissions"},TB={key:1,class:"permission-list"},wB={class:"permission-icon"},CB={class:"actions"};function IB(t,e,r,n,s,i){var a,o,l,c,u;return n.canSwitchRoles?(B(),U("div",{key:0,class:Qe(["user-role-switcher",{collapsed:!n.isExpanded}])},[d("div",{class:"switcher-header",onClick:e[1]||(e[1]=(...f)=>n.toggleExpanded&&n.toggleExpanded(...f)),title:n.isExpanded?"Collapse Debug Panel":"Expand Debug Panel"},[e[6]||(e[6]=d("span",{class:"debug-icon"},"",-1)),n.isExpanded?(B(),U("span",mB,"Debug Role Switcher")):xe("",!0),e[7]||(e[7]=d("span",{class:"beta-label"},"BETA",-1)),d("button",{onClick:e[0]||(e[0]=Xr((...f)=>n.hideRoleSwitcher&&n.hideRoleSwitcher(...f),["stop"])),class:"close-debug-btn",title:"Close Role Switcher"},"")],8,pB),n.isExpanded?(B(),U("div",gB,[e[18]||(e[18]=d("div",{class:"beta-warning"},[d("strong",null," BETA WARNING:"),we(" This debug tool is not working correctly and should be used with caution. It may not properly switch roles or could cause unexpected behavior. ")],-1)),d("div",vB,[e[8]||(e[8]=d("strong",null,"Current User:",-1)),we(" "+Y(((a=n.currentUser)==null?void 0:a.name)||((o=n.currentUser)==null?void 0:o.email)||"Unknown")+" ",1),e[9]||(e[9]=d("br",null,null,-1)),e[10]||(e[10]=d("strong",null,"Role:",-1)),e[11]||(e[11]=we()),d("span",{class:Qe("role-"+((l=n.currentUser)==null?void 0:l.role))},Y(((c=n.currentUser)==null?void 0:c.role)||"None"),3),e[12]||(e[12]=d("br",null,null,-1)),e[13]||(e[13]=d("strong",null,"UID:",-1)),we(" "+Y(((u=n.currentUser)==null?void 0:u.uid)||"None"),1)]),d("div",yB,[e[15]||(e[15]=d("label",{for:"role-select"},"Switch to Role:",-1)),Be(d("select",{id:"role-select","onUpdate:modelValue":e[2]||(e[2]=f=>n.selectedRole=f),onChange:e[3]||(e[3]=(...f)=>n.switchRole&&n.switchRole(...f))},[e[14]||(e[14]=d("option",{value:""},"-- Select Role --",-1)),(B(!0),U(Pe,null,je(n.availableRoles,f=>(B(),U("option",{key:f.value,value:f.value},Y(f.label),9,xB))),128))],544),[[cr,n.selectedRole]])]),d("div",EB,[e[16]||(e[16]=d("h5",null,"Quick Test Users:",-1)),d("div",_B,[(B(!0),U(Pe,null,je(n.testUsers,f=>{var h;return B(),U("button",{key:f.uid,onClick:p=>n.switchToUser(f),class:Qe(["test-user-btn",{active:((h=n.currentUser)==null?void 0:h.uid)===f.uid}])},[we(Y(f.name)+" ",1),d("small",null,"("+Y(f.role)+")",1)],10,bB)}),128))])]),d("div",SB,[e[17]||(e[17]=d("h5",null,"Current Permissions:",-1)),n.loadingPermissions?(B(),U("div",AB," Loading permissions... ")):(B(),U("div",TB,[(B(!0),U(Pe,null,je(n.currentPermissions,f=>(B(),U("div",{key:f.action,class:Qe(["permission-item",{granted:f.granted}])},[d("span",wB,Y(f.granted?"":""),1),we(" "+Y(f.label),1)],2))),128))]))]),e[19]||(e[19]=Dn('<div class="testing-scenarios" data-v-26d536da><h5 data-v-26d536da> Testing Scenarios:</h5><div class="scenario-list" data-v-26d536da><div class="scenario-item" data-v-26d536da><strong data-v-26d536da>Students Page:</strong><ul data-v-26d536da><li data-v-26d536da> Can view students</li><li data-v-26d536da> Can edit own caseload (CM)</li><li data-v-26d536da> Can edit all students (Admin)</li><li data-v-26d536da> Paraeducator filter works</li></ul></div><div class="scenario-item" data-v-26d536da><strong data-v-26d536da>Admin Panel:</strong><ul data-v-26d536da><li data-v-26d536da> Users management</li><li data-v-26d536da> Permissions matrix</li><li data-v-26d536da> Aide assignments</li><li data-v-26d536da> App settings</li></ul></div><div class="scenario-item" data-v-26d536da><strong data-v-26d536da>Navigation:</strong><ul data-v-26d536da><li data-v-26d536da> Admin button visibility</li><li data-v-26d536da> My Schedule button (Para)</li><li data-v-26d536da> Role-based menu items</li></ul></div></div></div>',1)),d("div",CB,[d("button",{onClick:e[4]||(e[4]=(...f)=>n.resetToRealUser&&n.resetToRealUser(...f)),class:"reset-btn"},"  Reset to Real User "),d("button",{onClick:e[5]||(e[5]=(...f)=>n.refreshPage&&n.refreshPage(...f)),class:"refresh-btn"},"  Refresh Page ")])])):xe("",!0)],2)):xe("",!0)}const kB=xt(hB,[["render",IB],["__scopeId","data-v-26d536da"]]),DB={key:0,class:"debug-access-info"},PB={__name:"DebugAccessInfo",setup(t){const e=xn(),r=ae(!1),n=be(()=>e.currentUser),s=be(()=>{var o;const a=(o=n.value)==null?void 0:o.role;return["admin","administrator"].includes(a)}),i=()=>{r.value=!1,localStorage.setItem("debug-info-hidden","true")};return Wt(()=>{const a=localStorage.getItem("debug-info-hidden");s.value&&!a&&setTimeout(()=>{r.value=!0},3e3)}),(a,o)=>r.value?(B(),U("div",DB,[d("div",{class:"debug-info-content"},[o[0]||(o[0]=d("span",{class:"debug-info-icon"},"",-1)),o[1]||(o[1]=d("span",{class:"debug-info-text"},[we("Debug tools available - Press "),d("kbd",null,"Ctrl+Shift+D")],-1)),d("button",{onClick:i,class:"debug-info-close"},"")])])):xe("",!0)}},RB=xt(PB,[["__scopeId","data-v-358a31dd"]]);class FB{constructor(){this.timeoutId=null,this.warningTimeoutId=null,this.isEnabled=ae(!1),this.timeoutMinutes=ae(30),this.showWarning=ae(!1),this.warningCountdown=ae(0),this.lastActivity=Date.now(),this.lastLogTime=null,this.router=null,this.unsubscribeSettings=null,this.activityEvents=["mousedown","mousemove","keypress","scroll","touchstart","click","keydown"],this.init()}init(){console.log(" Session timeout system initialization STARTED"),this.loadSettings(),this.setupActivityListeners(),this.setupAuthWatcher()}setupAuthWatcher(){W1(_t,e=>{e?setTimeout(()=>{this.resetTimeout()},1e3):(this.clearTimeouts(),this.hideWarning())})}async loadSettings(){try{const e=Ze(qe,"app_settings","security");this.unsubscribeSettings=sf(e,r=>{if(r.exists()){const n=r.data(),s=this.isEnabled.value;this.isEnabled.value=n.sessionTimeoutEnabled||!1,this.timeoutMinutes.value=n.sessionTimeoutMinutes||30,_t.currentUser&&this.resetTimeout()}else this.isEnabled.value=!1,this.timeoutMinutes.value=30})}catch(e){console.error("Failed to load session timeout settings:",e)}}async updateSettings(e,r){var n;try{const s=Ze(qe,"app_settings","security");await jt(s,{sessionTimeoutEnabled:e,sessionTimeoutMinutes:r,updatedAt:new Date().toISOString(),updatedBy:(n=_t.currentUser)==null?void 0:n.uid},{merge:!0})}catch(s){console.error("Failed to update session timeout settings:",s)}}setupActivityListeners(){this.boundActivityHandler=this.handleActivity.bind(this),this.activityEvents.forEach(e=>{document.addEventListener(e,this.boundActivityHandler,!0)})}handleActivity(){if(!this.isEnabled.value)return;const e=Date.now();if(e-this.lastActivity<3e4){this.lastActivity=e;return}this.lastActivity=e,this.showWarning.value&&(this.hideWarning(),this.resetTimeout())}resetTimeout(){if(!this.isEnabled.value||!_t.currentUser)return;this.clearTimeouts();const e=Date.now(),r=Math.round(this.timeoutMinutes.value*60*1e3),n=Math.max(1e3,r-2*60*1e3);(!this.lastLogTime||e-this.lastLogTime>3e5||this.showWarning.value)&&(console.log(` Session timeout reset: ${this.timeoutMinutes.value} minutes (${r}ms), warning in ${n}ms`),this.lastLogTime=e),r>1e4&&(this.warningTimeoutId=setTimeout(()=>{console.log(" Showing session warning"),this.showSessionWarning()},n)),this.timeoutId=setTimeout(()=>{console.log(" Session timeout triggered"),this.handleSessionTimeout()},r)}showSessionWarning(){if(this.showWarning.value)return;this.showWarning.value=!0,this.warningCountdown.value=Math.min(120,Math.floor(this.timeoutMinutes.value*60/2)),console.log(` Session warning displayed, countdown: ${this.warningCountdown.value} seconds`);const e=setInterval(()=>{this.warningCountdown.value--,this.warningCountdown.value<=0&&(clearInterval(e),this.handleSessionTimeout())},1e3);this.countdownInterval=e}hideWarning(){this.showWarning.value=!1,this.warningCountdown.value=0,this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null)}async handleSessionTimeout(){console.log(" Handling session timeout");try{if(_t.currentUser){const e=Ze(qe,"auditLogs",`timeout_${Date.now()}_${_t.currentUser.uid}`);await jt(e,{type:"session_timeout",userId:_t.currentUser.uid,userEmail:_t.currentUser.email,timeoutMinutes:this.timeoutMinutes.value,lastActivity:new Date(this.lastActivity),timestamp:new Date,userAgent:navigator.userAgent})}this.clearTimeouts(),this.hideWarning(),console.log(" SESSION TIMEOUT LOGOUT: About to call signOut()"),console.log(" Session timeout stack trace:",new Error().stack),await ip(_t),console.log(" User signed out due to session timeout"),this.router?this.router.push("/login"):window.location.href="/login"}catch(e){console.error("Error during session timeout:",e),window.location.href="/login"}}extendSession(){this.hideWarning(),this.resetTimeout()}clearTimeouts(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.warningTimeoutId&&(clearTimeout(this.warningTimeoutId),this.warningTimeoutId=null)}setRouter(e){this.router=e}destroy(){this.clearTimeouts(),this.hideWarning(),this.boundActivityHandler&&this.activityEvents.forEach(e=>{document.removeEventListener(e,this.boundActivityHandler,!0)}),this.unsubscribeSettings&&this.unsubscribeSettings()}}const Js=new FB;function Qy(){const t=Ci();return Js.setRouter(t),{isEnabled:Js.isEnabled,timeoutMinutes:Js.timeoutMinutes,showWarning:Js.showWarning,warningCountdown:Js.warningCountdown,updateSettings:Js.updateSettings.bind(Js),extendSession:Js.extendSession.bind(Js),resetTimeout:Js.resetTimeout.bind(Js)}}/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NB=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),OB=t=>{const e=NB(t);return e.charAt(0).toUpperCase()+e.slice(1)},MB=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=({size:t,strokeWidth:e=2,absoluteStrokeWidth:r,color:n,iconNode:s,name:i,class:a,...o},{slots:l})=>Yo("svg",{...Hf,width:t||Hf.width,height:t||Hf.height,stroke:n||Hf.stroke,"stroke-width":r?Number(e)*24/Number(t):e,class:MB("lucide",...i?[`lucide-${V_(OB(i))}-icon`,`lucide-${V_(i)}`]:["lucide-icon"]),...o},[...s.map(c=>Yo(...c)),...l.default?[l.default()]:[]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(t,e)=>(r,{slots:n})=>Yo(LB,{...r,iconNode:e,name:t},n);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=St("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=St("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=St("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=St("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=St("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=St("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=St("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=St("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=St("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=St("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=St("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=St("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=St("columns-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=St("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=St("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=St("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=St("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=St("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=St("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=St("hand-heart",[["path",{d:"M11 14h2a2 2 0 0 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1v1a37"}],["path",{d:"m14.45 13.39 5.05-4.694C20.196 8 21 6.85 21 5.75a2.75 2.75 0 0 0-4.797-1.837.276.276 0 0 1-.406 0A2.75 2.75 0 0 0 11 5.75c0 1.2.802 2.248 1.5 2.946L16 11.95",key:"fhfbnt"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a1 1 0 0 0-2.75-2.91",key:"1x6kdw"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=St("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=St("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=St("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=St("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=St("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=St("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=St("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=St("monitor-speaker",[["path",{d:"M5.5 20H8",key:"1k40s5"}],["path",{d:"M17 9h.01",key:"1j24nn"}],["rect",{width:"10",height:"16",x:"12",y:"4",rx:"2",key:"ixliua"}],["path",{d:"M8 6H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h4",key:"1mp6e1"}],["circle",{cx:"17",cy:"15",r:"1",key:"tqvash"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=St("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=St("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=St("presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=St("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=St("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=St("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=St("school",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=St("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=St("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=St("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=St("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=St("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=St("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=St("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=St("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=St("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=St("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=St("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=St("user-pen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=St("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=St("user-search",[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=St("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=St("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=St("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=St("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),m7={key:0,class:"session-timeout-overlay"},g7={class:"session-timeout-dialog"},v7={class:"dialog-header"},y7={class:"dialog-content"},x7={class:"countdown-section"},E7={class:"countdown-time"},_7={class:"info-note"},b7={class:"dialog-actions"},S7={__name:"SessionTimeoutDialog",setup(t){const e=Ci(),{showWarning:r,warningCountdown:n,extendSession:s}=Qy(),i=o=>{const l=Math.floor(o/60),c=o%60;return`${l}:${c.toString().padStart(2,"0")}`},a=async()=>{try{await ip(_t),e.push("/login")}catch(o){console.error("Error signing out:",o)}};return(o,l)=>q(r)?(B(),U("div",m7,[d("div",g7,[d("div",v7,[Oe(q(eI),{class:"header-icon",size:24}),l[1]||(l[1]=d("h3",null,"Session Timeout",-1))]),d("div",y7,[d("div",x7,[d("div",E7,Y(i(q(n))),1),l[2]||(l[2]=d("p",{class:"countdown-label"},"until automatic logout",-1))]),d("div",_7,[Oe(q(QB),{size:16}),l[3]||(l[3]=d("span",null,"Any activity will extend your session",-1))])]),d("div",b7,[d("button",{onClick:l[0]||(l[0]=(...c)=>q(s)&&q(s)(...c)),class:"btn btn-primary"},[Oe(q(w0),{size:16}),l[4]||(l[4]=we(" Stay Logged In "))]),d("button",{onClick:a,class:"btn btn-secondary"},[Oe(q(e7),{size:16}),l[5]||(l[5]=we(" Logout Now "))])])])])):xe("",!0)}},A7=xt(S7,[["__scopeId","data-v-9d2333fd"]]),ou={primaryColor:"#1976d2",primaryHover:"#1565c0",primaryLight:"#e3f2fd",primaryDark:"#0d47a1",secondaryColor:"#6c757d",secondaryHover:"#545b62",secondaryLight:"#f8f9fa",secondaryDark:"#495057",bgPrimary:"#f4f6f9",bgSecondary:"#ffffff",bgTertiary:"#f8f9fa",bgMuted:"#e9ecef",textPrimary:"#333333",textSecondary:"#666666",textMuted:"#999999",textInverse:"#ffffff",headerTextColor:"#1a1a1a",accentColor:"#e3f2fd",borderColor:"#dee2e6",borderLight:"#e9ecef",borderDark:"#adb5bd",borderFocus:"#1976d2",successColor:"#28a745",successHover:"#218838",successLight:"#d4edda",warningColor:"#ffc107",warningHover:"#e0a800",warningLight:"#fff3cd",errorColor:"#dc3545",errorHover:"#c82333",errorLight:"#f8d7da",infoColor:"#17a2b8",infoHover:"#138496",infoLight:"#d1ecf1",adminTabBg:"#f8f9fa",adminTabActive:"#2a79c9",adminTabHover:"#e3eaf6",tableHeaderBg:"#dfe7f3",tableStripeBg:"#f8fafd",tableBorder:"#d1d1d1",tableHover:"#f0f0f0",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",shadowSm:"0 1px 2px rgba(0, 0, 0, 0.05)",shadowMd:"0 2px 4px rgba(0, 0, 0, 0.1)",shadowLg:"0 4px 6px rgba(0, 0, 0, 0.1)",shadowXl:"0 4px 20px rgba(0, 0, 0, 0.3)",fontFamilyBase:"'Inter', 'Segoe UI', 'Arial', sans-serif",fontSizeXs:"0.75rem",fontSizeSm:"0.875rem",fontSizeBase:"1rem",fontSizeLg:"1.125rem",fontSizeXl:"1.25rem",fontSizeXxl:"1.5rem",borderStyle:"rounded",shadowStyle:"subtle",contrastLevel:"standard",lineHeight:"1.5"},G_={primaryColor:"--primary-color",primaryHover:"--primary-hover",primaryLight:"--primary-light",primaryDark:"--primary-dark",secondaryColor:"--secondary-color",secondaryHover:"--secondary-hover",secondaryLight:"--secondary-light",secondaryDark:"--secondary-dark",bgPrimary:"--bg-primary",bgSecondary:"--bg-secondary",bgTertiary:"--bg-tertiary",bgMuted:"--bg-muted",textPrimary:"--text-primary",textSecondary:"--text-secondary",textMuted:"--text-muted",textInverse:"--text-inverse",headerTextColor:"--header-text-color",accentColor:"--accent-color",borderColor:"--border-color",borderLight:"--border-light",borderDark:"--border-dark",borderFocus:"--border-focus",successColor:"--success-color",successHover:"--success-hover",successLight:"--success-light",warningColor:"--warning-color",warningHover:"--warning-hover",warningLight:"--warning-light",errorColor:"--error-color",errorHover:"--error-hover",errorLight:"--error-light",infoColor:"--info-color",infoHover:"--info-hover",infoLight:"--info-light",adminTabBg:"--admin-tab-bg",adminTabActive:"--admin-tab-active",adminTabHover:"--admin-tab-hover",tableHeaderBg:"--table-header-bg",tableStripeBg:"--table-stripe-bg",tableBorder:"--table-border",tableHover:"--table-hover",borderRadiusSm:"--border-radius-sm",borderRadiusMd:"--border-radius-md",borderRadiusLg:"--border-radius-lg",borderRadiusXl:"--border-radius-xl",shadowSm:"--shadow-sm",shadowMd:"--shadow-md",shadowLg:"--shadow-lg",shadowXl:"--shadow-xl",fontFamilyBase:"--font-family-base",fontSizeXs:"--font-size-xs",fontSizeSm:"--font-size-sm",fontSizeBase:"--font-size-base",fontSizeLg:"--font-size-lg",fontSizeXl:"--font-size-xl",fontSizeXxl:"--font-size-xxl",lineHeight:"--line-height-base"};function iI(){const t=ae({...ou}),e=ae(!1),r=ae(null),n=ae(!1),s=async()=>{if(e.value)return t.value;e.value=!0,r.value=null;try{const g=Ze(qe,"app_settings","theme"),v=await sr(g);if(v.exists()){const y=v.data();t.value={...ou,...y},console.log("Theme loaded from database:",t.value)}else t.value={...ou},console.log("No saved theme found, using defaults");return n.value=!0,a(t.value),t.value}catch(g){throw r.value=g.message,console.error("Error loading theme:",g),g}finally{e.value=!1}},i=async(g=t.value)=>{e.value=!0,r.value=null;try{const v=Ze(qe,"app_settings","theme");return await jt(v,{...g,lastUpdated:new Date().toISOString()}),t.value={...g},a(g),console.log("Theme saved successfully"),!0}catch(v){throw r.value=v.message,console.error("Error saving theme:",v),v}finally{e.value=!1}},a=g=>{const v=document.documentElement;Object.entries(G_).forEach(([y,b])=>{g[y]!==void 0&&v.style.setProperty(b,g[y])})},o=(g,v)=>{t.value[g]=v,a(t.value)},l=async()=>{t.value={...ou},a(t.value),await i(t.value)},c=g=>{a(g)},u=()=>{a(t.value)},f=g=>getComputedStyle(document.documentElement).getPropertyValue(g),h=g=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$|^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$|^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d.]+\s*\)$/.test(g),p=g=>({light:g,dark:g,hover:g});return Wt(()=>{n.value||s()}),{currentTheme:t,loading:e,error:r,isInitialized:n,loadTheme:s,saveTheme:i,applyTheme:a,updateThemeProperty:o,resetTheme:l,previewTheme:c,revertTheme:u,getCssVariableValue:f,validateColor:h,generateColorVariations:p,CSS_VARIABLE_MAP:G_,DEFAULT_THEME:ou}}function T7(){const{loadTheme:t,currentTheme:e,isInitialized:r}=iI();return Wt(async()=>{if(!r.value)try{await t(),console.log("Theme initialized successfully")}catch(n){console.error("Failed to initialize theme:",n)}}),{currentTheme:e,isInitialized:r}}const w7={id:"app"},C7={id:"main-content"},I7={__name:"App",setup(t){const e=ae(!1);T7();const r=n=>{n.ctrlKey&&n.shiftKey&&n.key==="D"&&(n.preventDefault(),e.value=!e.value,console.log("Debug Role Switcher:",e.value?"Shown":"Hidden"))};return Wt(()=>{document.addEventListener("keydown",r)}),Va(()=>{document.removeEventListener("keydown",r)}),(n,s)=>{const i=fr("router-view");return B(),U("div",w7,[d("div",C7,[Oe(i)]),e.value?(B(),Qt(kB,{key:0})):xe("",!0),Oe(RB),Oe(A7)])}}},k7="modulepreload",D7=function(t){return"/"+t},W_={},Hs=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=D7(l),l in W_)return;W_[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":k7,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function mn(t,e=255){return typeof t!="string"?"":t.trim().replace(/\0/g,"").replace(/[<>'"&]/g,"").substring(0,e)}function P7(t){return typeof t!="string"?"":t.trim().toLowerCase().substring(0,255)}function z_(t,e=0,r=999999){const n=parseFloat(t);return isNaN(n)?0:Math.max(e,Math.min(r,n))}function I0(t,e){return!t||typeof t=="string"&&t.trim()===""?{isValid:!1,error:`${e} is required`}:{isValid:!0}}function R7(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?{isValid:!0}:{isValid:!1,error:"Invalid email format"}}function Td(t,e,r=0,n=255){return typeof t!="string"?{isValid:!1,error:`${e} must be a string`}:t.length<r?{isValid:!1,error:`${e} must be at least ${r} characters`}:t.length>n?{isValid:!1,error:`${e} must be no more than ${n} characters`}:{isValid:!0}}function F7(t){return["admin","school_admin","admin_504","sped_chair","case_manager","teacher","service_provider","paraeducator"].includes(t)?{isValid:!0}:{isValid:!1,error:"Invalid role"}}function N7(t,e=[],r=10*1024*1024){return t?e.length>0&&!e.includes(t.type)?{isValid:!1,error:`Invalid file type. Allowed: ${e.join(", ")}`}:t.size>r?{isValid:!1,error:`File too large. Maximum size: ${r/(1024*1024)}MB`}:[/\.exe$/i,/\.bat$/i,/\.cmd$/i,/\.scr$/i,/\.vbs$/i,/\.js$/i,/\.jar$/i].some(s=>s.test(t.name))?{isValid:!1,error:"Suspicious file type detected"}:{isValid:!0}:{isValid:!1,error:"No file selected"}}function Hr(t){if(typeof t!="string")return{isSafe:!0,threats:[]};const e=[];return/<script|javascript:|vbscript:|onload=|onerror=/i.test(t)&&e.push("Script injection attempt"),/(\bunion\b|\bselect\b|\binsert\b|\bupdate\b|\bdelete\b|\bdrop\b).*(\bfrom\b|\binto\b|\bwhere\b)/i.test(t)&&e.push("SQL injection pattern"),/\.\.\/|\.\.\\|%2e%2e%2f|%2e%2e%5c/i.test(t)&&e.push("Path traversal attempt"),/<[^>]*>/i.test(t)&&e.push("HTML injection attempt"),/\0/.test(t)&&e.push("Null byte injection"),{isSafe:e.length===0,threats:e}}const Rl={};function ks(t,e=10,r=6e4){const n=Date.now(),s=`${t}_${Math.floor(n/r)}`;return Rl[s]||(Rl[s]=0),Rl[s]++,Rl[s]>e?{allowed:!1,error:`Rate limit exceeded. Maximum ${e} requests per ${r/1e3} seconds.`}:(Object.keys(Rl).forEach(i=>{const a=parseInt(i.split("_").pop())*r;n-a>r*2&&delete Rl[i]}),{allowed:!0})}function oI(t,e={}){const r=[],{isNew:n=!1}=e;if(!t||typeof t!="object")return{isValid:!1,errors:["Invalid student data"]};if(!t.app||!t.app.studentData)return r.push("Student data structure is invalid"),{isValid:!1,errors:r};const s=t.app.studentData;return[{field:"firstName",name:"First Name"},{field:"lastName",name:"Last Name"},{field:"caseManagerId",name:"Case Manager"}].forEach(({field:l,name:c})=>{const u=I0(s[l],c);u.isValid||r.push(u.error)}),[{field:"firstName",name:"First Name",maxLength:100},{field:"lastName",name:"Last Name",maxLength:100},{field:"studentId",name:"Student ID",maxLength:50},{field:"grade",name:"Grade",maxLength:10}].forEach(({field:l,name:c,maxLength:u})=>{if(s[l]){const f=Td(s[l],c,1,u);f.isValid||r.push(f.error)}}),["firstName","lastName","studentId","grade"].forEach(l=>{if(s[l]){const c=Hr(s[l]);c.isSafe||r.push(`Security threat detected in ${l}: ${c.threats.join(", ")}`)}}),t.app.accommodations&&typeof t.app.accommodations!="string"&&t.app.accommodations!==null&&r.push("Accommodations must be encrypted string or null"),t.app.classServices&&typeof t.app.classServices!="string"&&t.app.classServices!==null&&r.push("Class services must be encrypted string or null"),s.plan&&typeof s.plan!="string"&&s.plan!==null&&r.push("Student plan must be encrypted string or null"),{isValid:r.length===0,errors:r}}function O7(t){const e=[];if(!t||typeof t!="object")return{isValid:!1,errors:["Invalid user data"]};const r=I0(t.name,"Name");r.isValid||e.push(r.error);const n=I0(t.email,"Email");n.isValid||e.push(n.error);const s=I0(t.role,"Role");if(s.isValid||e.push(s.error),t.email){const a=R7(t.email);a.isValid||e.push(a.error)}if(t.role){const a=F7(t.role);a.isValid||e.push(a.error)}if(t.name){const a=Td(t.name,"Name",1,100);a.isValid||e.push(a.error)}if(t.email){const a=Td(t.email,"Email",1,255);a.isValid||e.push(a.error)}return["name","email"].forEach(a=>{if(t[a]){const o=Hr(t[a]);o.isSafe||e.push(`Security threat detected in ${a}: ${o.threats.join(", ")}`)}}),{isValid:e.length===0,errors:e}}function lI(t){const e={...t};if(e.app&&e.app.studentData){const r=e.app.studentData;["firstName","lastName","studentId","grade"].forEach(s=>{r[s]&&(r[s]=mn(r[s],100))})}else["firstName","lastName","studentId","grade"].forEach(n=>{e[n]&&(e[n]=mn(e[n],100))});return e}function M7(t){const e={...t};return e.name&&(e.name=mn(e.name,100)),e.email&&(e.email=P7(e.email)),e}const L7=async(t,e,r=100,n=1e3)=>{const s=[];for(let a=0;a<t.length;a+=r)s.push(t.slice(a,a+r));const i=[];for(let a=0;a<s.length;a++)try{const o=await e(s[a]);i.push(o),a<s.length-1&&await new Promise(l=>setTimeout(l,n))}catch(o){throw console.error(`Error in batch ${a+1}:`,o),o}return i},sl=N7;function xh(t){if(!t||typeof t!="object")return t;if(t.toJSON&&typeof t.toJSON=="function")return t.toJSON();if(Array.isArray(t))return t.map(xh);const e={};for(const[r,n]of Object.entries(t)){if(r.toLowerCase().includes("schedule")&&typeof n=="object"&&n!==null)for(const[s,i]of Object.entries(n))i&&typeof i=="object"&&i.teacherId!==void 0&&(n[s].teacherId=String(i.teacherId));e[r]=xh(n)}return e}const Ms=ae([]);let Cm=null;function Ii(){async function t(){if(!Cm)try{const{useGoogleSheetsRealtime:o}=await Hs(async()=>{const{useGoogleSheetsRealtime:l}=await Promise.resolve().then(()=>Ode);return{useGoogleSheetsRealtime:l}},void 0);Cm=o()}catch(o){console.error("Failed to load Google Sheets sync:",o)}return Cm}async function e(){var c,u,f;const o=await Gt(At(qe,"students"));Ms.value=o.docs.map(h=>{const p=h.data(),g=xh(p);return{id:h.id,...g}});const l=Ms.value.find(h=>h.aeries);l&&(console.log(" useStudents DEBUG - Student with aeries:",l),console.log(" useStudents DEBUG - aeries.schedule:",(c=l.aeries)==null?void 0:c.schedule),console.log(" useStudents DEBUG - aeries.schedule type:",typeof((u=l.aeries)==null?void 0:u.schedule)),(f=l.aeries)!=null&&f.schedule&&console.log(" useStudents DEBUG - schedule keys:",Object.keys(l.aeries.schedule)))}function r(o){Ms.value=o.map(l=>{const c=xh(l);return{id:l.id,...c}})}async function n(){return(await Gt(At(qe,"students"))).docs.map(l=>({id:l.id,...l.data()}))}async function s(o,l){await Pp(Ze(qe,"students",o),l);try{const c=await t();if(c&&c.linkedSheetId.value){const u=Ms.value.findIndex(f=>f.id===o);u!==-1&&(Ms.value[u]={...Ms.value[u],...l}),console.log("Syncing student update to Google Sheets..."),await c.updateSheetData(Ms.value)}}catch(c){console.error("Failed to sync to Google Sheets:",c)}}async function i(o){var c,u,f,h,p,g,v;const l=Ms.value.find(y=>y.id===o);await ho(Ze(qe,"students",o)),await rn.logStudentAccess(o,"delete",{studentName:l?`${((u=(c=l.app)==null?void 0:c.studentData)==null?void 0:u.firstName)||""} ${((h=(f=l.app)==null?void 0:f.studentData)==null?void 0:h.lastName)||""}`.trim():"Unknown",ssid:(g=(p=l==null?void 0:l.app)==null?void 0:p.studentData)==null?void 0:g.ssid,deletedFields:l?Object.keys(((v=l.app)==null?void 0:v.studentData)||{}):[]});try{const y=await t();y&&y.linkedSheetId.value&&(Ms.value=Ms.value.filter(b=>b.id!==o),console.log("Syncing student deletion to Google Sheets..."),await y.updateSheetData(Ms.value))}catch(y){console.error("Failed to sync to Google Sheets:",y)}}return{students:Ms,fetchStudents:e,setStudents:r,fetchAllStudents:n,updateStudent:s,deleteStudent:i,deleteAllStudents:async()=>{try{const l=(await Gt(At(qe,"students"))).docs;return await rn.logStudentAccess("bulk_operation","delete_all",{studentCount:l.length,operation:"bulk_delete_all_students",deletedStudentIds:l.map(c=>c.id)}),await L7(l,async c=>{const u=Oy(qe);c.forEach(f=>{u.delete(f.ref)}),await u.commit()},50,2e3),{success:!0}}catch(o){throw console.error("Error deleting all students:",o),await rn.logStudentAccess("bulk_operation","delete_all_failed",{error:o.message,operation:"bulk_delete_all_students_failed"}),o}}}}function Ea(){const t=ae({}),e=ae([]);async function r(){console.log(" USERS DEBUG: Starting fetchUsers()");try{const a=await Gt(At(qe,"users"));console.log(" USERS DEBUG: Retrieved",a.size,"users from database");const o={},l=[];a.forEach(u=>{const f=u.data();o[u.id]={id:u.id,...f},l.push({id:u.id,...f})}),t.value=o,e.value=l,console.log(" USERS DEBUG: Processed users by role:");const c={};l.forEach(u=>{c[u.role]=(c[u.role]||0)+1}),console.log(" USERS DEBUG: Role counts:",c),console.log(" USERS DEBUG: All users list:",l.map(u=>({id:u.id,name:u.name,email:u.email,role:u.role}))),console.log(" USERS DEBUG: fetchUsers() completed successfully")}catch(a){throw console.error(" USERS DEBUG: Error in fetchUsers():",a),a}}const n=be(()=>({teachers:e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)),caseManagers:e.value.filter(a=>["case_manager","sped_chair","admin_504"].includes(a.role)),speech:e.value.filter(a=>a.provider==="SLP"),ot:e.value.filter(a=>a.provider==="OT"),mh:e.value.filter(a=>a.provider==="MH"),pt:e.value.filter(a=>a.provider==="PT"),sc:e.value.filter(a=>a.provider==="SC"),tr:e.value.filter(a=>a.provider==="TR"),aud:e.value.filter(a=>a.provider==="AUD"),vi:e.value.filter(a=>a.provider==="VI"),at:e.value.filter(a=>a.provider==="AT"),dhh:e.value.filter(a=>a.provider==="DHH"),om:e.value.filter(a=>a.provider==="O&M"),bis:e.value.filter(a=>a.provider==="BIS"),hn:e.value.filter(a=>a.provider==="HN"),sw:e.value.filter(a=>a.provider==="SW")})),s=be(()=>e.value.filter(a=>["case_manager","sped_chair","admin_504"].includes(a.role))),i=be(()=>e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)));return{users:t,userList:e,fetchUsers:r,caseManagers:s,teacherList:i,userRoles:n}}function Jy(){const t=ae({}),e=ae(!1);async function r(){e.value=!0;try{const h=await Gt(At(qe,"aideSchedules")),p={};h.forEach(g=>{p[g.id]=g.data()}),t.value=p}catch(h){console.error("Error loading aide assignments:",h),t.value={}}finally{e.value=!1}}async function n(h){if(!h){console.warn("loadAideAssignment called without aideId");return}e.value=!0;try{const p=await sr(Ze(qe,"aideSchedules",h));p.exists()?t.value[h]=p.data():t.value[h]={classAssignment:{},directAssignment:[]}}catch(p){console.error("Error loading aide assignment:",p),t.value[h]={classAssignment:{},directAssignment:[]}}finally{e.value=!1}}async function s(h,p){try{const g=JSON.parse(JSON.stringify(p));await jt(Ze(qe,"aideSchedules",h),g,{merge:!0}),t.value[h]=g}catch(g){throw console.error("Error saving aide assignment:",g),g}}async function i(){try{const h=Object.entries(t.value);for(const[p,g]of h){const v=JSON.parse(JSON.stringify(g));await jt(Ze(qe,"aideSchedules",p),v,{merge:!0})}}catch(h){throw console.error("Error saving all aide assignments:",h),h}}function a(h,p){const g=[];return Object.entries(t.value).forEach(([v,y])=>{y.classAssignment&&y.classAssignment[p]&&(Array.isArray(y.classAssignment[p])?y.classAssignment[p]:[y.classAssignment[p]]).includes(h)&&g.push(v)}),g}function o(h){var g;const p=(g=t.value[h])==null?void 0:g.directAssignment;return Array.isArray(p)?p.length>0?p[0]:null:p||null}function l(h){return Object.keys(t.value).find(g=>{var y;const v=(y=t.value[g])==null?void 0:y.directAssignment;return Array.isArray(v)?v.includes(h):v===h})||null}function c(h,p,g){const v=[],y=t.value[h];return y&&((Array.isArray(y.directAssignment)?y.directAssignment:y.directAssignment?[y.directAssignment]:[]).forEach(E=>{if(E){const x=p.find(w=>w.id===E);x&&v.push({...x,assignmentType:"direct"})}}),Object.entries(y.classAssignment||{}).forEach(([E,x])=>{x&&(Array.isArray(x)?x:[x]).forEach(P=>{P&&p.forEach(R=>{const A=f(R);if(A){const _=A[E];if((typeof _=="string"?_:_==null?void 0:_.teacherId)===P){const S=v.findIndex(I=>I.id===R.id);S===-1?v.push({...R,assignmentType:"class",period:E,teacherId:P}):(v[S].assignmentType="both",v[S].period=E,v[S].teacherId=P)}}})})})),v}function u(h,p,g,v){if(!h||!p||!g||!v)return!1;const y=g.find(R=>R.id===p);if(!y)return!1;const b=t.value[h];if(!b)return!1;if((Array.isArray(b.directAssignment)?b.directAssignment:b.directAssignment?[b.directAssignment]:[]).includes(p))return!0;const x=f(y);if(!x)return!1;const w=b.classAssignment||{};return Object.entries(x).some(([R,A])=>{const _=typeof A=="string"?A:A==null?void 0:A.teacherId,m=w[R];return!m||!_?!1:(Array.isArray(m)?m:[m]).includes(_)})}function f(h){var p,g,v,y,b;return h.schedule?h.schedule:(g=(p=h.app)==null?void 0:p.schedule)!=null&&g.periods?h.app.schedule.periods:(y=(v=h.aeries)==null?void 0:v.schedule)!=null&&y.periods?h.aeries.schedule.periods:(b=h.aeries)!=null&&b.schedule?h.aeries.schedule:null}return{aideAssignment:be(()=>t.value),loading:be(()=>e.value),loadAideAssignments:r,loadAideAssignment:n,saveAideAssignment:s,saveAllAideAssignments:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}function Zy(){const t=ae(!1),e=ae(""),r=ae("");let n,s,i,a;try{n=cc(),s=Da(n,"getStudentFeedback"),i=Da(n,"createFeedbackFormSheet"),a=Da(n,"createFeedbackFormSheetWithUserAuth")}catch(w){console.warn("Firebase Functions not available:",w),s=()=>Promise.reject(new Error("Functions not available")),i=()=>Promise.reject(new Error("Functions not available")),a=()=>Promise.reject(new Error("Functions not available"))}const o=At(qe,"feedbackForms"),l=ae(!1),c=ae([]);let u;const f=be(()=>{var P;return(((P=c.value)==null?void 0:P.filter(R=>R.active!==!1))||[]).sort((R,A)=>{var S,I;const _=(S=R.createdAt)!=null&&S.seconds?new Date(R.createdAt.seconds*1e3):new Date(R.createdAt);return((I=A.createdAt)!=null&&I.seconds?new Date(A.createdAt.seconds*1e3):new Date(A.createdAt))-_})}),h=async w=>{try{t.value=!0,e.value="",console.log(" Creating Google Sheet with personal account for form:",w.title);const P=await i({title:w.title,description:w.description,formUrl:w.formUrl,studentId:w.studentId||null,studentName:w.studentName||null});if(!P.data.success)throw new Error("Failed to create Google Sheet: "+P.data.message);console.log(" Google Sheet created:",P.data.spreadsheetUrl);const R={title:w.title,description:w.description,formUrl:w.formUrl,spreadsheetId:P.data.spreadsheetId,spreadsheetUrl:P.data.spreadsheetUrl,userDriveId:P.data.userDriveId,parentFolderId:P.data.parentFolderId,active:!0,createdAt:new Date,createdBy:w.createdBy},A=Ze(o);return await jt(A,R),r.value="Feedback form and Google Sheet created successfully!",{id:A.id,...R}}catch(P){throw console.error("Error creating feedback form:",P),P.message.includes("storage quota exceeded")||P.message.includes("Service account storage quota exceeded")?P.value=' Cannot create Google Sheet: Service account has no storage quota. Please use the "Test with Personal Account" button in Google Drive Setup to use your personal Google account instead.':P.message.includes("permission")||P.message.includes("access")?P.value=" Permission denied: Please ensure the folder is shared with the service account or use your personal Google account.":P.value=P.message,P}finally{t.value=!1}},p=async(w,P)=>{try{t.value=!0,e.value="";const R=Ze(o,w);await jt(R,{...P,updatedAt:new Date},{merge:!0}),r.value="Feedback form updated successfully!"}catch(R){throw console.error("Error updating feedback form:",R),e.value=R.message,R}finally{t.value=!1}},g=async w=>{try{t.value=!0,e.value="";const P=Ze(o,w);await ho(P),r.value="Feedback form deleted successfully!"}catch(P){throw console.error("Error deleting feedback form:",P),e.value=P.message,P}finally{t.value=!1}},v=()=>{e.value="",r.value=""},y=w=>{const P=w.match(/\/forms\/d\/([a-zA-Z0-9-_]+)/);return P?P[1]:null},b=()=>{try{u=sf(o,w=>{c.value=w.docs.map(P=>({id:P.id,...P.data()})),l.value=!1},w=>{console.warn("Error listening to feedback forms:",w),l.value=!1})}catch(w){console.warn("Error initializing Firestore listeners:",w),l.value=!1}},E=()=>{u&&u()};return Wt(()=>{b()}),Va(()=>{E()}),{isLoading:t,error:e,successMessage:r,formsLoading:l,feedbackForms:c,activeForms:f,createFeedbackForm:h,updateFeedbackForm:p,deleteFeedbackForm:g,clearMessages:v,extractFormId:y,createFeedbackFormWithUserAuth:async(w,P)=>{try{t.value=!0,e.value="",console.log(" Creating Google Sheet with personal account for form:",w.title);const R=await a({title:w.title,description:w.description,formUrl:w.formUrl,studentId:w.studentId||null,studentName:w.studentName||null,accessToken:P});if(!R.data.success)throw new Error("Failed to create Google Sheet: "+R.data.message);console.log(" Google Sheet created with personal account:",R.data.spreadsheetUrl);const A={title:w.title,description:w.description,formUrl:w.formUrl,spreadsheetId:R.data.spreadsheetId,spreadsheetUrl:R.data.spreadsheetUrl,driveType:"personal",active:!0,createdAt:new Date,createdBy:w.createdBy},_=Ze(o);return await jt(_,A),r.value="Feedback form and Google Sheet created successfully in your personal Google Drive!",{id:_.id,...A}}catch(R){throw console.error("Error creating feedback form with user auth:",R),R.value=R.message,R}finally{t.value=!1}}}}function B7(){const t=xn(),e=ae(!1),r=ae(null),n=ae([]),s=ae(0),i=be(()=>t.user),a=be(()=>{var w;return(w=t.user)==null?void 0:w.role}),o=be(()=>{var w;return(w=t.user)==null?void 0:w.uid}),l=async()=>{console.log(" Admin query: Loading all students - START"),console.log(" Admin query: currentUser:",i.value),console.log(" Admin query: currentRole:",a.value),console.log(" Admin query: currentUserId:",o.value);try{const w=or(At(qe,"students"),hn("app.studentData.lastName","asc"));console.log(" Admin query created:",w);const P=await Gt(w);console.log(" Admin query snapshot:",P.size,"documents");const R=P.docs.map(A=>({id:A.id,...A.data()}));if(console.log(" Admin query result:",R.length,"students"),R.length>0)console.log(" First student structure:",R[0]);else{console.log(" Admin query: NO STUDENTS FOUND - checking collection directly");const A=or(At(qe,"students")),_=await Gt(A);console.log(" Simple query found:",_.size,"documents")}return R}catch(w){console.error(" Admin query error:",w),console.error(" Admin query error details:",w.message,w.code);try{console.log(" Trying fallback query without ordering...");const P=or(At(qe,"students")),R=await Gt(P);console.log(" Fallback query found:",R.size,"documents");const A=R.docs.map(_=>({id:_.id,..._.data()}));return console.log(" Fallback query returning:",A.length,"students"),A}catch(P){return console.error(" Fallback query also failed:",P),console.error(" Fallback query error details:",P.message,P.code),[]}}},c=async()=>{console.log(" 504 Admin query: Loading all students (edit restrictions applied at form level)");try{const w=or(At(qe,"students"),hn("app.studentData.lastName","asc"));return(await Gt(w)).docs.map(R=>({id:R.id,...R.data()}))}catch(w){console.error(" 504 Admin query error:",w);try{const P=or(At(qe,"students"));return(await Gt(P)).docs.map(A=>({id:A.id,...A.data()}))}catch(P){return console.error(" 504 Admin fallback query failed:",P),[]}}},u=async()=>{console.log(" SPED Chair query: Loading only IEP students");try{const w=or(At(qe,"students"),Ur("app.studentData.plan","==","IEP"),hn("app.studentData.lastName","asc"));return(await Gt(w)).docs.map(R=>({id:R.id,...R.data()}))}catch(w){console.error(" SPED Chair query error:",w);try{const P=or(At(qe,"students"),Ur("app.studentData.plan","==","IEP"));return(await Gt(P)).docs.map(A=>({id:A.id,...A.data()}))}catch(P){return console.error(" SPED Chair fallback query failed:",P),[]}}},f=async w=>{console.log(" Security: Loading students for case manager (CM + SP access):",w);try{const P=or(At(qe,"students"),Ur("app.studentData.caseManagerId","==",w)),A=(await Gt(P)).docs.map(k=>({id:k.id,...k.data()})),_=or(At(qe,"students"),Ur("app.staffIds","array-contains",w)),S=(await Gt(_)).docs.map(k=>({id:k.id,...k.data()})),I=[...A];return S.forEach(k=>{I.find(C=>C.id===k.id)||I.push(k)}),I.sort((k,C)=>{var F,N,M,L;const O=((N=(F=k.app)==null?void 0:F.studentData)==null?void 0:N.lastName)||"",D=((L=(M=C.app)==null?void 0:M.studentData)==null?void 0:L.lastName)||"";return O.localeCompare(D)}),console.log(" Security: Case manager found:",A.length,"CM students,",S.length,"SP students"),console.log(" Security: Total unique students:",I.length),console.log(" Security: CM accessible students:",I.map(k=>{var C,O,D,F;return`${(O=(C=k.app)==null?void 0:C.studentData)==null?void 0:O.firstName} ${(F=(D=k.app)==null?void 0:D.studentData)==null?void 0:F.lastName}`}).slice(0,8)),I}catch(P){return console.error(" Security: Error loading case manager students:",P),[]}},h=async w=>{console.log(" Teacher query: Loading students for teacher",w);try{const P=or(At(qe,"students"),Ur("app.staffIds","array-contains",w),hn("app.studentData.lastName","asc")),R=await Gt(P);return console.log(" Teacher query: Found",R.size,"students with teacher in staffIds"),R.docs.map(A=>({id:A.id,...A.data()}))}catch(P){return console.error(" Security: Error loading teacher students:",P),[]}},p=async w=>{var P,R,A,_;console.log(" Service Provider query: Loading students for provider",w),console.log(" Service Provider query: userId type:",typeof w),console.log(" Service Provider query: userId value:",JSON.stringify(w));try{const m=or(At(qe,"students"),Ur("app.staffIds","array-contains",w));console.log(" Service Provider query: Executing staffIds query...");const S=await Gt(m);console.log(" Service Provider query: Success! Found",S.size,"students");const I=S.docs.map(k=>({id:k.id,...k.data()}));return I.sort((k,C)=>{var F,N,M,L;const O=((N=(F=k.app)==null?void 0:F.studentData)==null?void 0:N.lastName)||"",D=((L=(M=C.app)==null?void 0:M.studentData)==null?void 0:L.lastName)||"";return O.localeCompare(D)}),I}catch(m){console.error(" Service Provider query FAILED:",m),console.error(" Error code:",m.code),console.error(" Error message:",m.message),console.error(" Full error object:",m);const S=Qo();return console.error(" Current auth state:",{uid:(P=S.currentUser)==null?void 0:P.uid,email:(R=S.currentUser)==null?void 0:R.email,customClaims:"Check in browser dev tools"}),console.error(" Auth mismatch check:",{queryUserId:w,authUid:(A=S.currentUser)==null?void 0:A.uid,match:w===((_=S.currentUser)==null?void 0:_.uid)}),[]}},g=async w=>{var P,R,A,_;console.log(" Paraeducator query: Loading students for aide",w),console.log(" Paraeducator query: userId type:",typeof w),console.log(" Paraeducator query: userId value:",JSON.stringify(w));try{console.log(" Paraeducator query: Trying staffIds approach first...");try{const D=or(At(qe,"students"),Ur("app.staffIds","array-contains",w),hn("app.studentData.lastName","asc")),F=await Gt(D);if(console.log(" Paraeducator query: staffIds approach found",F.size,"students"),F.size>0){const N=F.docs.map(M=>({id:M.id,...M.data()}));return console.log(" Paraeducator query: SUCCESS with staffIds approach"),N}}catch(D){console.log(" Paraeducator query: staffIds approach failed:",D.message)}console.log(" Paraeducator query: Using aideSchedules fallback...");const m=await sr(Ze(qe,"aideSchedules",w));if(!m.exists())return console.log(" Paraeducator query: No aide schedule document found for",w),[];const S=m.data();console.log(" Paraeducator query: Found aide data:",S);let I=[];if(S.studentIds&&Array.isArray(S.studentIds)?(I=S.studentIds,console.log(" Paraeducator query: Using studentIds array:",I)):S.directAssignment&&(I=Array.isArray(S.directAssignment)?S.directAssignment:[S.directAssignment],console.log(" Paraeducator query: Using directAssignment as fallback:",I)),I.length===0)return console.log(" Paraeducator query: No student assignments found for aide",w),[];console.log(" Paraeducator query: Fetching",I.length,"assigned students individually...");const k=I.map(async D=>{try{const F=await sr(Ze(qe,"students",D));return F.exists()?{id:F.id,...F.data()}:null}catch(F){return console.warn(" Paraeducator query: Failed to fetch student",D,":",F.message),null}}),O=(await Promise.all(k)).filter(D=>D!==null);return O.sort((D,F)=>{var L,z,j,H;const N=((z=(L=D.app)==null?void 0:L.studentData)==null?void 0:z.lastName)||"",M=((H=(j=F.app)==null?void 0:j.studentData)==null?void 0:H.lastName)||"";return N.localeCompare(M)}),console.log(" Paraeducator query: Successfully fetched",O.length,"students"),O}catch(m){console.error(" Paraeducator query FAILED:",m),console.error(" Error code:",m.code),console.error(" Error message:",m.message),console.error(" Full error object:",m);const S=Qo();return console.error(" Current auth state:",{uid:(P=S.currentUser)==null?void 0:P.uid,email:(R=S.currentUser)==null?void 0:R.email,customClaims:"Check in browser dev tools"}),console.error(" Auth mismatch check:",{queryUserId:w,authUid:(A=S.currentUser)==null?void 0:A.uid,match:w===((_=S.currentUser)==null?void 0:_.uid)}),[]}},v=async()=>{console.log(" Testing query: Loading students with testing flags");const w=or(At(qe,"students"),Ur("app.flags.flag2","==",!0),hn("app.studentData.lastName","asc")),P=or(At(qe,"students"),Ur("app.flags.separateSetting","==",!0),hn("app.studentData.lastName","asc")),[R,A]=await Promise.all([Gt(w),Gt(P)]),_=R.docs.map(I=>({id:I.id,...I.data()})),m=A.docs.map(I=>({id:I.id,...I.data()})),S=[..._];return m.forEach(I=>{S.find(k=>k.id===I.id)||S.push(I)}),S.sort((I,k)=>{var D,F,N,M;const C=((F=(D=I.app)==null?void 0:D.studentData)==null?void 0:F.lastName)||"",O=((M=(N=k.app)==null?void 0:N.studentData)==null?void 0:M.lastName)||"";return C.localeCompare(O)})},y=async(w={})=>{var P,R;if(console.log(" loadStudents called - DEBUG AUTH STATE:"),console.log("  currentUserId.value:",o.value),console.log("  currentRole.value:",a.value),console.log("  authStore.user:",t.user),console.log("  authStore.user?.uid:",(P=t.user)==null?void 0:P.uid),console.log("  authStore.user?.role:",(R=t.user)==null?void 0:R.role),!o.value||!a.value)return console.error(" No authenticated user or role - FAILING AUTH CHECK"),console.error("  currentUserId.value is:",o.value),console.error("  currentRole.value is:",a.value),r.value="Authentication required",[];e.value=!0,r.value=null;try{let A=[];switch(console.log(" ROUTING to query based on role:",a.value),console.log(" Available role cases: admin, school_admin, staff_view, staff_edit, admin_504, sped_chair, case_manager, teacher, service_provider, paraeducator"),a.value){case"admin":case"school_admin":case"staff_view":case"staff_edit":case"administrator":A=await l();break;case"sped_chair":A=await u();break;case"admin_504":A=await c();break;case"case_manager":console.log(" CALLING getCaseManagerStudents with userId:",o.value),A=await f(o.value),console.log(" getCaseManagerStudents COMPLETED, returned:",A.length,"students");break;case"teacher":A=await h(o.value);break;case"service_provider":A=await p(o.value);break;case"paraeducator":console.log(" PARAEDUCATOR QUERY: Starting query for userId:",o.value),A=await g(o.value),console.log(" PARAEDUCATOR QUERY: Query completed, returned:",A.length,"students");break;default:return console.error(" Unknown role:",a.value),r.value="Invalid user role",[]}return w.testingOnly&&(A=await v()),n.value=A,s.value=A.length,console.log(` Loaded ${A.length} students for ${a.value}`),A}catch(A){return console.error(" Error loading students:",A),r.value=A.message||"Failed to load students",[]}finally{e.value=!1}},b=async w=>{if(!w)throw new Error("Student ID is required");if(!o.value||!a.value)throw new Error("Authentication required");e.value=!0,r.value=null;try{const P=await sr(Ze(qe,"students",w));if(!P.exists())throw new Error("Student not found");const R={id:P.id,...P.data()};if(!await E(R,o.value,a.value))throw new Error("Access denied to this student");return R}catch(P){throw console.error(" Error getting student:",P),r.value=P.message,P}finally{e.value=!1}},E=async(w,P,R)=>{var A,_,m,S,I,k,C;if(!w||!P||!R)return!1;if(["admin","school_admin","admin_504","sped_chair"].includes(R))return!0;if(R==="case_manager")return((_=(A=w.app)==null?void 0:A.studentData)==null?void 0:_.caseManagerId)===P;if(R==="teacher"){if(!((S=(m=w.app)==null?void 0:m.schedule)!=null&&S.periods))return!1;const O=w.app.schedule.periods,D=Object.values(O);return D.includes(P)?!0:D.some(F=>{var N;return typeof F=="object"&&F!==null?F.teacherId===P||((N=F.coTeaching)==null?void 0:N.caseManagerId)===P:!1})}if(R==="service_provider"){if((I=w.app)!=null&&I.providers&&Object.values(w.app.providers).includes(P))return!0;if((C=(k=w.app)==null?void 0:k.schedule)!=null&&C.periods){const O=w.app.schedule.periods,D=Object.values(O);return D.includes(P)?!0:D.some(F=>{var N;return typeof F=="object"&&F!==null?F.teacherId===P||((N=F.coTeaching)==null?void 0:N.caseManagerId)===P:!1})}}return!1},x=async(w=50,P=null)=>{if(!o.value||!a.value)throw new Error("Authentication required");e.value=!0,r.value=null;try{let R=or(At(qe,"students"),hn("app.studentData.lastName","asc"),ia(w));P&&(R=or(R,ph(P))),a.value==="case_manager"&&(R=or(At(qe,"students"),Ur("app.studentData.caseManagerId","==",o.value),hn("app.studentData.lastName","asc"),ia(w)),P&&(R=or(R,ph(P))));const A=await Gt(R);return{students:A.docs.map(m=>({id:m.id,...m.data()})),lastDoc:A.docs[A.docs.length-1],hasMore:A.docs.length===w}}catch(R){throw console.error(" Error loading paginated students:",R),r.value=R.message,R}finally{e.value=!1}};return{students:be(()=>n.value),loading:be(()=>e.value),error:be(()=>r.value),totalCount:be(()=>s.value),loadStudents:y,getStudent:b,verifyStudentAccess:E,loadStudentsPaginated:x,getAdminStudents:l,getAdmin504Students:c,getCaseManagerStudents:f,getTeacherStudents:h,getServiceProviderStudents:p,getParaeducatorStudents:g,getTestingStudents:v}}function U7(t,e){const r={isSecure:!0,violations:[],summary:"",studentCount:t.length,authorizedCount:0,unauthorizedCount:0};return!e||!e.role?(r.isSecure=!1,r.violations.push("No user or role provided"),r):(t.forEach((n,s)=>{var a,o,l,c;$7(n,e)?r.authorizedCount++:(r.unauthorizedCount++,r.isSecure=!1,r.violations.push({studentIndex:s,studentName:`${(o=(a=n.app)==null?void 0:a.studentData)==null?void 0:o.firstName} ${(c=(l=n.app)==null?void 0:l.studentData)==null?void 0:c.lastName}`,studentId:n.id,reason:V7(n,e)}))}),r.summary=`User ${e.role} (${e.uid}) has access to ${r.authorizedCount}/${r.studentCount} students`,r.isSecure||(r.summary+=`. SECURITY VIOLATION: ${r.unauthorizedCount} unauthorized students accessible!`),r)}function $7(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"admin":case"school_admin":case"admin_504":case"sped_chair":case"staff_view":case"staff_edit":return!0;case"case_manager":return((i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===n;case"teacher":const f=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(f).includes(n);case"service_provider":const h=((l=t.app)==null?void 0:l.providers)||{},p=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},g=Object.values(h).includes(n),v=Object.values(p).includes(n);return g||v;case"paraeducator":return!0;default:return!1}}function V7(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"case_manager":const f=(i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId;return`Case manager ${n} is not assigned to student (assigned to: ${f})`;case"teacher":const h=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{},p=Object.values(h);return`Teacher ${n} does not teach this student (teachers: ${p.join(", ")})`;case"service_provider":const g=((l=t.app)==null?void 0:l.providers)||{},v=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},y=Object.values(g).filter(E=>E),b=Object.values(v);return`Service provider ${n} is not assigned to student (providers: ${y.join(", ")}, teachers: ${b.join(", ")})`;case"paraeducator":return null;default:return`Unknown role: ${r}`}}function H7(t){t.isSecure?console.log(" SECURITY TEST PASSED:",t.summary):(console.error(" SECURITY TEST FAILED:",t.summary),console.error("Violations:",t.violations))}function K_(t,e){const r=U7(t,e);return H7(r),r}const cI=(t,e)=>{console.log(` DEBUG: Schedule Operation - ${t}:`,e)};function uI(t){return cI("getTeacherIdFromPeriod",{periodData:t,type:typeof t}),t?typeof t=="string"?t:t.teacherId||null:null}function Op(t){var e;return cI("getCoTeachingCaseManagerFromPeriod",{periodData:t}),!t||typeof t!="object"?null:((e=t.coTeaching)==null?void 0:e.caseManagerId)||null}function j7(t,e={}){if(!t||!t.periods)return[];const r=new Set;return Object.values(t.periods).forEach(n=>{const s=uI(n);s&&r.add(s);const i=Op(n);if(i){const a=e[i];a&&(a.role==="teacher"||a.roles&&a.roles.includes("teacher"))&&r.add(i)}}),Array.from(r)}function G7(t){if(!t||!t.periods)return[];const e=new Set;return Object.values(t.periods).forEach(r=>{const n=Op(r);n&&e.add(n)}),Array.from(e)}function W7(t,e){var r,n;return!((n=(r=t.app)==null?void 0:r.schedule)!=null&&n.periods)||!e?!1:Object.values(t.app.schedule.periods).some(s=>Op(s)===e)}function z7(){const t=Ci(),e=xn(),{students:r,setStudents:n}=Ii(),{users:s,userList:i,fetchUsers:a,caseManagers:o,teacherList:l,userRoles:c}=Ea(),{loadAideAssignment:u,loadAideAssignments:f,shouldAideSeeStudent:h,aideAssignment:p}=Jy(),{feedbackForms:g,formsLoading:v}=Zy(),{loadStudents:y}=B7(),b=ae(!1),E=ae(null),x=be(()=>e.currentUser),w=be(()=>{var D;const O=(D=x.value)==null?void 0:D.role;return["admin","school_admin","admin_504","sped_chair"].includes(O)}),P=be(()=>{var O;return["case_manager","admin_504","sped_chair"].includes((O=x.value)==null?void 0:O.role)}),R=be(()=>s.value||{}),A=be(()=>{var O;return((O=i.value)==null?void 0:O.filter(D=>D.role==="paraeducator"))||[]}),_=async()=>{var O,D,F,N,M;console.log(" useStudentData: fetchData() called"),b.value=!0,E.value=null;try{console.log(" useStudentData: About to fetchUsers()..."),await a(),console.log(" useStudentData: fetchUsers() completed"),console.log(" useStudentData: Users available in userMap:",Object.keys(R.value).length),console.log(" useStudentData: Users available in userList:",((O=i.value)==null?void 0:O.length)||0),((D=x.value)==null?void 0:D.role)==="paraeducator"&&console.log(" PARAEDUCATOR DEBUG: Can access user data:",{userMapKeys:Object.keys(R.value).slice(0,5),userListSample:(F=i.value)==null?void 0:F.slice(0,3).map(j=>({id:j.id,name:j.name,role:j.role}))});const L=x.value;if(console.log(" useStudentData: Checking user for loadStudents call:",L),(L==null?void 0:L.role)==="paraeducator"&&console.log(" PARAEDUCATOR DEBUG: Full user object:",{uid:L.uid,email:L.email,name:L.name,role:L.role,customClaims:L.customClaims,fullUser:L}),L){console.log(" Security: Fetching students for user role:",L.role,"userId:",L.uid),console.log(" useStudentData: About to call loadStudents()...");const j=await y();console.log(" useStudentData: loadStudents() returned:",j.length,"students"),L.role==="paraeducator"&&console.log(" PARAEDUCATOR DEBUG: Student details:",j.map(G=>{var W,ne,de,se;return{id:G.id,firstName:(ne=(W=G.app)==null?void 0:W.studentData)==null?void 0:ne.firstName,lastName:(se=(de=G.app)==null?void 0:de.studentData)==null?void 0:se.lastName,fullData:G}})),n(j);const H=K_(j,L);H.isSecure||console.error(" SECURITY VIOLATION DETECTED:",H.violations)}else console.log(" Security: No user found - setting empty student array"),n([]);const z=(N=x.value)==null?void 0:N.role;if(["admin","school_admin","admin_504","sped_chair"].includes(z))await f();else if(z==="paraeducator"&&x.value.uid){console.log(" PARAEDUCATOR DEBUG: Loading aide assignment for paraeducator:",x.value.uid),await u(x.value.uid),console.log(" PARAEDUCATOR DEBUG: Aide assignment loaded, current assignments:",p.value);const j=Ze(qe,"aideSchedules",x.value.uid),H=sf(j,async G=>{if(G.exists()){console.log(" useStudentData: Aide schedule updated, reloading students..."),await u(x.value.uid);const W=await y();n(W)}});Va(()=>H())}console.log(" Security: Loaded",r.value.length,"students for",(M=x.value)==null?void 0:M.role),console.log("StudentsView - loaded users:",Object.keys(s.value||{}).length,"users")}catch(L){console.error("Error fetching data:",L),E.value=L.message||"Failed to load data"}finally{b.value=!1}},m=O=>r.value.find(D=>D.id===O)||{},S=O=>{const D=s.value[O];return D&&(D.name||D.email)||O},I=O=>{if(!O)return"N/A";const D=s.value[O];return D&&(D.name||D.email)||O},k=O=>{var D,F;return((F=(D=O.app)==null?void 0:D.studentData)==null?void 0:F.caseManagerId)||O.caseManagerId||O.casemanager_id},C=O=>{var D,F,N,M,L;return O.schedule?O.schedule:(F=(D=O.app)==null?void 0:D.schedule)!=null&&F.periods?O.app.schedule.periods:(M=(N=O.aeries)==null?void 0:N.schedule)!=null&&M.periods?O.aeries.schedule.periods:(L=O.aeries)!=null&&L.schedule?O.aeries.schedule:null};return Wt(()=>{console.log(" useStudentData: onMounted triggered, calling fetchData..."),_()}),Vt(()=>{var O;return(O=x.value)==null?void 0:O.role},async(O,D)=>{if(O&&O!==D){console.log(" Security: User role changed from",D,"to",O,"- reloading students");const F=x.value;if(console.log(" useStudentData: Role watcher - checking user:",F),F){console.log(" useStudentData: Role watcher - about to call loadStudents()...");const N=await y();console.log(" useStudentData: Role watcher - loadStudents() returned:",N.length,"students"),n(N);const M=K_(N,F);M.isSecure||console.error(" SECURITY VIOLATION DETECTED:",M.violations),console.log(" Security: Reloaded",N.length,"students for role",O)}}},{immediate:!1}),{isLoading:b,error:E,students:r,userMap:s,userList:i,userMapObj:R,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:p,feedbackForms:g,formsLoading:v,paraeducators:A,currentUser:x,isAdmin:w,showProviderView:P,fetchData:_,getStudentById:m,getUserName:S,getCaseManagerName:I,getCaseManagerId:k,getSchedule:C,shouldAideSeeStudent:h,getTeacherIdFromPeriod:uI,getCoTeachingCaseManagerFromPeriod:Op,getAllTeacherIdsFromSchedule:j7,getCoTeachingCaseManagersFromSchedule:G7,isCoTeachingCaseManager:W7,router:t}}function it(t,e,r=""){const n=(l,c)=>c.split(".").reduce((u,f)=>u&&u[f]!==void 0?u[f]:null,l),s=n(t.overrides,e);if(t.overrides&&s!=null&&s!=="")return s;if(t.app){if(["firstName","lastName","grade","plan","ssid","caseManagerId"].includes(e)){const c=n(t.app,`studentData.${e}`);if(c!=null&&c!=="")return c}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const c=n(t.app,`dates.${e}`);if(c!=null&&c!=="")return c}if(["instruction","assessment"].includes(e)){const c=n(t.app,`accommodations.${e}`);if(c!=null&&c!=="")return c}const l=n(t.app,e);if(l!=null&&l!=="")return l}const i=n(t.aeries,e);if(t.aeries&&i!=null&&i!=="")return i;const a=n(t.seis,e);if(t.seis&&a!=null&&a!=="")return a;const o=n(t,e);return o!=null&&o!==""?o:r}function lu(t,e){const r=(o,l)=>l.split(".").reduce((c,u)=>c&&c[u]!==void 0?c[u]:null,o),n=r(t.overrides,e);if(t.overrides&&n!=null&&n!=="")return"Override";if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const l=r(t.app,`studentData.${e}`);if(l!=null&&l!=="")return"App"}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const l=r(t.app,`dates.${e}`);if(l!=null&&l!=="")return"App"}if(["instruction","assessment"].includes(e)){const l=r(t.app,`accommodations.${e}`);if(l!=null&&l!=="")return"App"}const o=r(t.app,e);if(o!=null&&o!=="")return"App"}const s=r(t.aeries,e);if(t.aeries&&s!=null&&s!=="")return"Aeries";const i=r(t.seis,e);if(t.seis&&i!=null&&i!=="")return"SEIS";const a=r(t,e);return a!=null&&a!==""?"Top-level":""}function K7(t){return t?`<ul class="bullet-list">${t.split(/\n|\r|\d+\.\s+|\-\s+|;/).map(r=>r.trim()).filter(Boolean).map(r=>`<li>${r}</li>`).join("")}</ul>`:"<div></div>"}function q7(t){const{students:e,currentUser:r,shouldAideSeeStudent:n,userMap:s,getCaseManagerId:i,getSchedule:a,aideAssignment:o}=t,l=ae(!1),c=ae([]),u=Fs({sortBy:"firstName",cm:"all",teacher:"all",paraeducator:"all",plan:"all",search:"",providerView:"all",viewMode:"list"});let f=null;const h=()=>{f&&clearTimeout(f),f=setTimeout(()=>{y()},300)},p=()=>{l.value&&g(),l.value=!l.value},g=()=>{u.sortBy="firstName",u.cm="all",u.teacher="all",u.paraeducator="all",u.plan="all",u.search="",u.providerView="all",u.viewMode="list",y()},v=()=>({paraeducator:u.paraeducator,teacher:u.teacher}),y=(b=u)=>{var P,R,A,_;console.log(" FILTER DEBUG: applyFilters called with students.value.length:",e.value.length),console.log(" FILTER DEBUG: currentUser:",(P=r.value)==null?void 0:P.role,(R=r.value)==null?void 0:R.uid);let E=e.value;const x=(A=r.value)==null?void 0:A.role,w=["admin","school_admin"];if(console.log(" FILTER DEBUG: Provider view filtering check:",{userRole:x,providerView:b.providerView,shouldSkip:w.includes(x),resultLengthBefore:E.length}),!w.includes(x)&&b.providerView==="case_manager"?(console.log(" FILTER DEBUG: Applying case_manager filter"),E=E.filter(m=>{var S;return i(m)===((S=r.value)==null?void 0:S.uid)}),console.log(" FILTER DEBUG: After case_manager filter:",E.length)):!w.includes(x)&&b.providerView==="service_provider"?(console.log(" FILTER DEBUG: Applying service_provider filter"),E=E.filter(m=>{var O;const S=a(m),I=S?Object.entries(S).some(([D,F])=>{var N,M;return typeof F=="string"?F===((N=r.value)==null?void 0:N.uid):F&&typeof F=="object"?F.teacherId===((M=r.value)==null?void 0:M.uid):!1}):!1,k=(m.services||[]).some(D=>{var F;return D.includes((F=r.value)==null?void 0:F.uid)}),C=i(m)!==((O=r.value)==null?void 0:O.uid);return(I||k)&&C}),console.log(" FILTER DEBUG: After service_provider filter:",E.length)):console.log(" FILTER DEBUG: Skipping provider view filtering for role:",x),((_=r.value)==null?void 0:_.role)==="paraeducator"&&console.log(" FILTER DEBUG: Paraeducator - using database-filtered students, no additional filtering"),b.search){const m=b.search.toLowerCase();E=E.filter(S=>{const I=it(S,"firstName")||"",k=it(S,"lastName")||"";return`${I} ${k}`.toLowerCase().includes(m)})}if(b.cm&&b.cm!=="all"&&(E=E.filter(m=>i(m)===b.cm)),b.teacher&&b.teacher!=="all"&&(E=E.filter(m=>{const S=a(m);return S?Object.entries(S).some(([I,k])=>typeof k=="string"?k===b.teacher:k&&typeof k=="object"?k.teacherId===b.teacher:!1):!1})),b.paraeducator&&b.paraeducator!=="all"){console.log(" FILTER DEBUG: Applying paraeducator filter for:",b.paraeducator);const m=o.value[b.paraeducator];if(m){console.log(" FILTER DEBUG: Found aide data:",m);let S=[];m.studentIds&&Array.isArray(m.studentIds)?(S=m.studentIds,console.log(" FILTER DEBUG: Using studentIds array:",S)):m.directAssignment&&(S=Array.isArray(m.directAssignment)?m.directAssignment:[m.directAssignment],console.log(" FILTER DEBUG: Using directAssignment as fallback:",S)),E=E.filter(I=>S.includes(I.id)),console.log(" FILTER DEBUG: After paraeducator filter:",E.length,"students")}else console.log(" FILTER DEBUG: No aide data found for:",b.paraeducator),E=[]}b.plan&&b.plan!=="all"&&(E=E.filter(m=>it(m,"plan")===b.plan)),b.sortBy&&E.sort((m,S)=>{const I=it(m,b.sortBy)||"",k=it(S,b.sortBy)||"";if(["reviewDate","reevalDate","meetingDate"].includes(b.sortBy)){const C=I?new Date(I).getTime():0,O=k?new Date(k).getTime():0;return C-O}return I.toString().toLowerCase().localeCompare(k.toString().toLowerCase())}),c.value=E,console.log(" FILTER DEBUG: applyFilters completed. filteredStudents.value.length:",c.value.length)};return Vt(()=>[e.value,r.value],()=>{console.log(" FILTER DEBUG: Watcher triggered. students.value.length:",e.value.length),e.value.length>0?(console.log(" FILTER DEBUG: Calling applyFilters from watcher"),y()):console.log(" FILTER DEBUG: No students to filter")},{deep:!0}),{showFilters:l,filteredStudents:c,currentFilters:u,toggleFilters:p,clearFilters:g,applyFilters:y,debouncedApplyFilters:h,getCurrentFilters:v}}const xu={grades:[],classServices:[{name:"SDC",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Co-teach",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"RSP",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Directed Studies",subcategories:["Directed Studies"],enabledSubcategories:["Directed Studies"]},{name:"FA",subcategories:["FA"],enabledSubcategories:["FA"]}],sdcSubcategories:[],customClassServices:[],serviceProviders:["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],customServiceProviders:[],numPeriods:7,periodLabels:["1","2","3","4","5","6","sh"],gmailApi:{enabled:!1,isWorkspace:!1,isInternalOAuth:!1,lastCheck:null}},ba=ae({...xu}),Sa=ae(!1),Io=ae(null);let Gf=!1;function Ns(){const t=Ze(qe,"app_settings","global"),e=async()=>{var i;if(Sa.value)return new Promise(a=>{const o=Vt(Sa,l=>{l||(o(),a(ba.value))})});if(Gf&&!Io.value)return ba.value;Sa.value=!0,Io.value=null;try{const a=await sr(t);if(ba.value=a.exists()?a.data():{...xu},!((i=ba.value.gmailApi)!=null&&i.lastCheck))try{await s()}catch(o){console.warn("Could not auto-check Gmail API status:",o)}}catch{ba.value={...xu}}finally{Sa.value=!1,Gf=!0}return ba.value},r=async i=>{Sa.value=!0,Io.value=null;try{const a=Ze(qe,"app_settings","general");await jt(a,i),ba.value={...i};try{localStorage.setItem("app_settings_backup",JSON.stringify(i))}catch(o){console.warn(" Failed to save localStorage backup:",o)}}catch(a){Io.value=a.message||"Unknown error";try{localStorage.setItem("app_settings_backup",JSON.stringify(i)),console.warn(" saveAppSettings: Fell back to localStorage due to Firestore error")}catch(o){throw console.error(" Both Firestore and localStorage saves failed:",o),new Error("Failed to save settings to both Firestore and localStorage")}}finally{Sa.value=!1}},n=async()=>{Sa.value=!0,Io.value=null;try{await jt(t,{...xu}),ba.value={...xu},Gf=!0}catch(i){throw Io.value=i.message,i}finally{Sa.value=!1}};!Gf&&!Sa.value&&e();const s=async()=>{try{const{checkAndAddGmailScope:i}=await Hs(async()=>{const{checkAndAddGmailScope:u}=await Promise.resolve().then(()=>Ky);return{checkAndAddGmailScope:u}},void 0),a=await i();let o=!1,l=a;try{const u=await fetch("https://oauth2.googleapis.com/tokeninfo");if(u.ok){const f=await u.json();o=f.hd&&f.hd.includes(".")}}catch(u){console.warn("Could not get detailed OAuth info:",u)}const c={...ba.value,gmailApi:{enabled:a,isWorkspace:o,isInternalOAuth:l,lastCheck:new Date().toISOString()}};return await r(c),c.gmailApi}catch(i){return console.error("Failed to check Gmail API status:",i),{enabled:!1,isWorkspace:!1,isInternalOAuth:!1,lastCheck:new Date().toISOString(),error:i.message}}};return{appSettings:ba,loadAppSettings:e,saveAppSettings:r,resetAppSettings:n,checkGmailApiStatus:s,loading:Sa,error:Io}}function yo(){const{appSettings:t}=Ns(),e=be(()=>{const o=t.value;return o!=null&&o.periodLabels&&(o!=null&&o.numPeriods)?[...o.periodLabels.slice(0,o.numPeriods)]:["1","2","3","4","5","6","7"]}),r=o=>{const l=parseInt(o);if(!l||l<1)return`Period ${o}`;const c=l-1;return e.value[c]||`Period ${l}`},n=o=>{const l=e.value.findIndex(c=>c===o);return l!==-1?l+1:null},s=be(()=>{var l;const o=((l=t.value)==null?void 0:l.numPeriods)||7;return Array.from({length:o},(c,u)=>u+1)}),i=be(()=>{const o={};return e.value.forEach((l,c)=>{o[l]=c+1}),o}),a=be(()=>{const o={};return e.value.forEach((l,c)=>{o[c+1]=l}),o});return{labels:e,getLabel:r,getNumber:n,numericPeriods:s,labelToNumberMap:i,numberToLabelMap:a}}function dI(t,e){const{students:r,userMapObj:n,currentUser:s,getCaseManagerId:i,getSchedule:a,getUserName:o,formatDate:l}=t,{getLabel:c}=yo(),{filteredStudents:u,currentFilters:f,applyFilters:h}=e,p=(D,F)=>{if(!D)return{periods:{},isTeacher:!1,isCoTeacher:!1};let N=!1,M=!1;const L={};return Object.entries(D).forEach(([z,j])=>{const H=typeof j=="string"?j:j==null?void 0:j.teacherId,G=typeof j=="object"?j==null?void 0:j.coTeaching:null,W=G==null?void 0:G.caseManagerId;L[z]={teacherId:H,coTeaching:G,coTeachingCM:W,teacherName:o(H),coTeacherName:W?o(W):null,label:c(z)},H===F&&(N=!0),W===F&&(M=!0)}),{periods:L,isTeacher:N,isCoTeacher:M}},g=(D,F,N)=>{if(!D||!F)return[];switch(N){case"case_manager":return D.filter(M=>i(M)===F);case"service_provider":return D.filter(M=>{const L=a(M);return L?Object.values(L).some(j=>{var H;return typeof j=="string"?j===F:j&&typeof j=="object"?j.teacherId===F||((H=j.coTeaching)==null?void 0:H.caseManagerId)===F:!1}):!1});case"all":return D;default:return console.warn(`Unknown provider view: ${N}`),[]}},v=(D,F)=>!D||!F?[]:D.filter(N=>{const{isTeacher:M,isCoTeacher:L}=p(a(N),F);return M||L}),y=(D,F)=>{const N={};return D.forEach(M=>{const L=a(M);if(!L)return;const{periods:z}=p(L,F);Object.entries(z).forEach(([j,H])=>{(H.teacherId===F||H.coTeachingCM===F)&&(N[j]||(N[j]=[]),N[j].push(M))})}),N},b=be(()=>u.value||[]),E=D=>{const F=it(D,"firstName"),N=it(D,"lastName");return`${F} ${N}`},x=D=>({name:E(D),grade:it(D,"grade"),plan:it(D,"plan"),caseManager:o(i(D))}),w=D=>({reviewDate:l(it(D,"reviewDate")),reevalDate:l(it(D,"reevalDate")),meetingDate:l(it(D,"meetingDate"))}),P=D=>{const F=a(D);return F?Object.entries(F).reduce((N,[M,L])=>(N[M]={teacherId:L,teacherName:o(L)},N),{}):{}},R=D=>{f.search=D,h()},A=D=>{f.cm=D,h()},_=D=>{f.teacher=D,h()},m=D=>{f.viewMode=D,h()},S=be(()=>{const D={};return b.value.forEach(F=>{const N=it(F,"grade");D[N]||(D[N]=[]),D[N].push(F)}),D}),I=be(()=>{const D={};return b.value.forEach(F=>{const N=it(F,"plan");D[N]||(D[N]=[]),D[N].push(F)}),D}),k=be(()=>{var N;const D=(N=s.value)==null?void 0:N.role,F=f;return["teacher","paraeducator"].includes(D)?!1:D==="case_manager"||["sped_chair","admin_504","administrator_504_CM"].includes(D)?F.providerView!=="service_provider"&&F.teacher==="all":["admin","school_admin","staff_view","staff_edit","administrator"].includes(D)?F.teacher==="all"&&F.paraeducator==="all":D==="service_provider"?F.providerView!=="service_provider":!0}),C=be(()=>{var F;const D=(F=s.value)==null?void 0:F.role;return["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair"].includes(D)}),O=be(()=>{var F;const D=(F=s.value)==null?void 0:F.role;return["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair"].includes(D)});return Vt(()=>k.value,D=>{D&&f.viewMode==="class"&&(console.log(" Auto-switching from class view to list view because class view is now disabled"),f.viewMode="list",h())},{immediate:!1}),{visibleStudents:b,currentUser:s,userMapObj:n,standardizeScheduleAccess:p,getProviderViewStudents:g,getClassViewStudents:v,groupStudentsByPeriod:y,groupStudentsByGrade:S,groupStudentsByPlan:I,canAccessFilters:O,isClassViewDisabled:k,isAdminRole:C,formatStudentName:E,formatStudentInfo:x,formatDates:w,getStudentSchedule:P,filterByName:R,filterByCaseManager:A,filterByTeacher:_,setViewMode:m,currentFilters:f,showProviderView:!1,providerViewOptions:be(()=>[])}}const Ft={ADMIN:"admin",SCHOOL_ADMIN:"school_admin",ADMIN_504:"admin_504",SPED_CHAIR:"sped_chair",STAFF_VIEW:"staff_view",STAFF_EDIT:"staff_edit",CASE_MANAGER:"case_manager",TEACHER:"teacher",SERVICE_PROVIDER:"service_provider",PARAEDUCATOR:"paraeducator"},X7={[Ft.ADMIN]:100,[Ft.SCHOOL_ADMIN]:90,[Ft.SPED_CHAIR]:80,[Ft.ADMIN_504]:70,[Ft.STAFF_EDIT]:65,[Ft.CASE_MANAGER]:60,[Ft.SERVICE_PROVIDER]:50,[Ft.STAFF_VIEW]:45,[Ft.TEACHER]:40,[Ft.PARAEDUCATOR]:30},ot={CAN_VIEW_ALL_STUDENTS:"canViewAllStudents",CAN_EDIT_ALL_STUDENTS:"canEditAllStudents",CAN_EDIT_OWN_STUDENTS:"canEditOwnStudents",CAN_SEND_FEEDBACK:"canSendFeedback",CAN_MANAGE_USERS:"canManageUsers",CAN_MANAGE_AIDES:"canManageAides",CAN_ACCESS_TESTING:"canAccessTesting",CAN_ACCESS_FILTERS:"canAccessFilters",SHOW_PROVIDER_VIEW:"showProviderView",CAN_USE_CLASS_VIEW:"canUseClassView"},Y7={[Ft.ADMIN]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_MANAGE_USERS,ot.CAN_MANAGE_AIDES,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.ADMINISTRATOR]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_MANAGE_USERS,ot.CAN_MANAGE_AIDES,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.SPED_CHAIR]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_MANAGE_AIDES,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.SCHOOL_ADMIN]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_MANAGE_USERS,ot.CAN_MANAGE_AIDES,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.STAFF_VIEW]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.CAN_USE_CLASS_VIEW],[Ft.STAFF_EDIT]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.CAN_USE_CLASS_VIEW],[Ft.ADMINISTRATOR_504_CM]:[ot.CAN_VIEW_ALL_STUDENTS,ot.CAN_EDIT_OWN_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_MANAGE_USERS,ot.CAN_ACCESS_TESTING,ot.CAN_ACCESS_FILTERS,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.CASE_MANAGER]:[ot.CAN_EDIT_OWN_STUDENTS,ot.CAN_SEND_FEEDBACK,ot.CAN_ACCESS_TESTING,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.TEACHER]:[ot.CAN_ACCESS_TESTING,ot.CAN_USE_CLASS_VIEW],[Ft.SERVICE_PROVIDER]:[ot.CAN_EDIT_ALL_STUDENTS,ot.CAN_ACCESS_TESTING,ot.SHOW_PROVIDER_VIEW,ot.CAN_USE_CLASS_VIEW],[Ft.PARAEDUCATOR]:[ot.CAN_ACCESS_TESTING,ot.CAN_USE_CLASS_VIEW]},Q7={[Ft.SPED_CHAIR]:[{value:"all_iep",label:"*"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"},{value:"all",label:"All"}],[Ft.ADMINISTRATOR_504_CM]:[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}],admin_504:[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}],[Ft.CASE_MANAGER]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}],[Ft.SERVICE_PROVIDER]:[{value:"all",label:"All"},{value:"service_provider",label:"SP"}]},J7={[Ft.SPED_CHAIR]:"all",[Ft.ADMINISTRATOR_504_CM]:"case_manager",admin_504:"case_manager",[Ft.CASE_MANAGER]:"all",[Ft.SERVICE_PROVIDER]:"service_provider"},Z7={[Ft.CASE_MANAGER]:{patterns:["case_manager","teacher"],description:"Students in their caseload and students they provide services to"},[Ft.TEACHER]:{patterns:["teacher"],description:"Students in their classes"},[Ft.SERVICE_PROVIDER]:{patterns:["teacher"],description:"Students in their classes"},[Ft.PARAEDUCATOR]:{patterns:["paraeducator"],description:"Students they are assigned to assist"},[Ft.SPED_CHAIR]:{patterns:["case_manager","teacher","all_iep"],description:"All students, with special access to IEP students"},[Ft.ADMINISTRATOR_504_CM]:{patterns:["case_manager","all_iep_504"],description:"All students, with special access to IEP/504 students"},[Ft.ADMIN]:{patterns:["all"],description:"All students"},[Ft.ADMINISTRATOR]:{patterns:["all"],description:"All students"},[Ft.SCHOOL_ADMIN]:{patterns:["all"],description:"All students"},[Ft.STAFF_VIEW]:{patterns:["all"],description:"All students (view-only)"},[Ft.STAFF_EDIT]:{patterns:["all"],description:"All students (can edit)"}},ka={case_manager:(t,e,r)=>r.getCaseManagerId(e)===t,teacher:(t,e,r)=>{const n=r.getSchedule(e);return n?Object.values(n).some(s=>{var i;return typeof s=="string"?s===t:s&&typeof s=="object"?s.teacherId===t||((i=s.coTeaching)==null?void 0:i.caseManagerId)===t:!1}):!1},paraeducator:(t,e,r,n)=>{if(!n)return!1;const s=n[t];if(!s)return!1;if((Array.isArray(s.directAssignment)?s.directAssignment:s.directAssignment?[s.directAssignment]:[]).includes(e.id))return!0;const a=r.getSchedule(e);if(!a)return!1;const o=s.classAssignment||{};return Object.entries(a).some(([l,c])=>{const u=typeof c=="string"?c:c==null?void 0:c.teacherId,f=o[l];return!f||!u?!1:(Array.isArray(f)?f:[f]).includes(u)})},all_iep:(t,e,r)=>it(e,"plan")==="IEP",all_iep_504:(t,e,r)=>{const n=it(e,"plan");return n==="IEP"||n==="504"},all:()=>!0},eU={[Ft.CASE_MANAGER]:{canSendFeedback:(t,e,r)=>r.getCaseManagerId(e)===t,description:"Can send feedback for students in their caseload"},[Ft.SPED_CHAIR]:{canSendFeedback:(t,e,r)=>{const n=r.getCaseManagerId(e)===t,s=ka.teacher(t,e,r),i=ka.all_iep(t,e,r);return n||s||i},description:"Can send feedback for students they case manage, teach, or have IEP"},[Ft.ADMINISTRATOR_504_CM]:{canSendFeedback:(t,e,r)=>{const n=r.getCaseManagerId(e)===t,s=ka.all_iep_504(t,e,r);return n||s},description:"Can send feedback for students they case manage or have IEP/504"},[Ft.ADMIN]:{canSendFeedback:()=>!0,description:"Can send feedback for all students"},[Ft.ADMINISTRATOR]:{canSendFeedback:()=>!0,description:"Can send feedback for all students"}},An={hasPermission:(t,e)=>(Y7[t]||[]).includes(e),getProviderViewOptions:t=>Q7[t]||[],getDefaultProviderView:t=>J7[t]||"all",canAccessStudent:(t,e,r,n,s=null)=>{var a;return(((a=Z7[e])==null?void 0:a.patterns)||[]).some(o=>{const l=ka[o];return l?l(t,r,n,s):!1})},canSendFeedback:(t,e,r,n)=>{const s=eU[e];return s?s.canSendFeedback(t,r,n):!1},getRoleLevel:t=>X7[t]||0,hasHigherPrivileges:(t,e)=>An.getRoleLevel(t)>An.getRoleLevel(e)};function tU(t,e){const r=dI(t,e),n=be(()=>{var C;return(C=r.currentUser.value)==null?void 0:C.uid}),s=be(()=>{var C;return((C=r.currentUser.value)==null?void 0:C.role)||"guest"});console.log(" UNIFIED ROLE VIEW: Composable initialized for role:",s.value);const i=be(()=>An.getProviderViewOptions(s.value));Vt(i,C=>{if(C.length>0){const O=An.getDefaultProviderView(s.value);C.map(F=>F.value).includes(e.currentFilters.providerView)||(e.currentFilters.providerView=O,e.applyFilters())}},{immediate:!0});const a=be(()=>{if(console.log(" UNIFIED ROLE VIEW: visibleStudents computed called for role:",s.value),!n.value)return console.log(" UNIFIED ROLE VIEW: No currentUserId, returning empty array"),[];const C=r.visibleStudents.value,O=e.currentFilters.providerView,D=s.value;if(console.log(" UNIFIED ROLE VIEW: Processing students:",{role:D,baseStudentsCount:C.length,providerView:O,currentUserId:n.value}),D==="paraeducator"||D==="teacher")return console.log(` ${D.toUpperCase()} ROLE VIEW: Received ${C.length} students from database`),console.log(` ${D.toUpperCase()} ROLE VIEW: Student names:`,C.map(F=>{var N,M,L,z;return`${((M=(N=F.app)==null?void 0:N.studentData)==null?void 0:M.firstName)||"Unknown"} ${((z=(L=F.app)==null?void 0:L.studentData)==null?void 0:z.lastName)||"Unknown"}`})),console.log(` ${D.toUpperCase()} ROLE VIEW: Returning students directly (no provider view filtering)`),C;if(!O||O==="")return C.filter(F=>An.canAccessStudent(n.value,D,F,t));switch(O){case"case_manager":return C.filter(F=>ka.case_manager(n.value,F,t));case"service_provider":return C.filter(F=>ka.teacher(n.value,F,t));case"all":return C.filter(F=>An.canAccessStudent(n.value,D,F,t));case"iep_all":return D==="sped_chair"?C.filter(F=>ka.all_iep(n.value,F,t)):[];case"all_iep":return C.filter(F=>{const N=ka.case_manager(n.value,F,t),M=ka.teacher(n.value,F,t);return N||M});case"iep_504_all":return D==="administrator_504_CM"||D==="admin_504"?C.filter(F=>ka.all_iep_504(n.value,F,t)):[];default:return console.warn(`Unknown provider view: ${O}`),[]}}),o=be(()=>An.hasPermission(s.value,ot.CAN_EDIT_ALL_STUDENTS)),l=be(()=>An.hasPermission(s.value,ot.CAN_EDIT_OWN_STUDENTS)),c=be(()=>An.hasPermission(s.value,ot.CAN_VIEW_ALL_STUDENTS)),u=be(()=>An.hasPermission(s.value,ot.CAN_MANAGE_USERS)),f=be(()=>An.hasPermission(s.value,ot.CAN_MANAGE_AIDES)),h=be(()=>An.hasPermission(s.value,ot.CAN_ACCESS_TESTING)),p=be(()=>h.value),g=be(()=>h.value),v=be(()=>An.hasPermission(s.value,ot.CAN_ACCESS_FILTERS)),y=be(()=>An.hasPermission(s.value,ot.SHOW_PROVIDER_VIEW)),b=be(()=>An.hasPermission(s.value,ot.CAN_USE_CLASS_VIEW)),E=C=>{var F,N;if(!n.value||!C)return!1;const O=s.value;return O==="paraeducator"||O==="teacher"?!1:O==="case_manager"?t.getCaseManagerId(C)===n.value:O==="service_provider"?(N=(F=C.app)==null?void 0:F.staffIds)==null?void 0:N.includes(n.value):["admin","school_admin","staff_edit","admin_504","sped_chair"].includes(O)},x=C=>!n.value||!C?!1:An.canSendFeedback(n.value,s.value,C,t),w=be(()=>n.value?r.groupStudentsByPeriod(a.value,n.value):{}),P=C=>{if(C==="class"&&!b.value){e.currentFilters.viewMode="list";return}e.currentFilters.viewMode=C},R=be(()=>{if(s.value!=="teacher")return{instruction:[],assessment:[]};const C={instruction:[],assessment:[]};return a.value.forEach(O=>{var D,F,N,M;(F=(D=O.app)==null?void 0:D.accommodations)!=null&&F.instruction&&C.instruction.push(O),(M=(N=O.app)==null?void 0:N.accommodations)!=null&&M.assessment&&C.assessment.push(O)}),C}),A=be(()=>{if(s.value!=="teacher")return{};const C={};return a.value.forEach(O=>{var F;const D=((F=O.app)==null?void 0:F.providers)||{};Object.entries(D).forEach(([N,M])=>{M&&(C[M]||(C[M]={provider:t.getUserName(M),providerType:N,students:[]}),C[M].students.push(O))})}),C}),_=be(()=>s.value==="teacher"),m=be(()=>s.value==="teacher"),S=be(()=>s.value==="teacher"),I=be(()=>!1),k=be(()=>!1);return{...r,visibleStudents:a,studentsByPeriod:w,providerViewOptions:i,showProviderView:y,canEditAllStudents:o,canEditOwnStudents:l,canViewAllStudents:c,canManageUsers:u,canManageAides:f,canAccessTesting:h,canAccessTestingPartial:p,hasAnyTestingAccess:g,canAccessFilters:v,canUseClassView:b,canEditStudent:E,canSendFeedback:x,setViewMode:P,studentsByAccommodation:R,studentsByServiceProvider:A,canViewAccommodations:_,canViewBasicInfo:m,canViewServiceProviders:S,canViewDates:I,canEditStudents:k,currentRole:s,currentUserId:n}}function rU(t,e){const r=dI(t,e),n=be(()=>{var o;return(o=r.currentUser.value)==null?void 0:o.uid}),s=be(()=>[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}]);Vt(s,o=>{const l="case_manager";o.map(u=>u.value).includes(e.currentFilters.providerView)||(e.currentFilters.providerView=l,e.applyFilters())},{immediate:!0});const i=be(()=>{if(!n.value)return[];const o=r.visibleStudents.value;switch(e.currentFilters.providerView){case"case_manager":return r.getProviderViewStudents(o,n.value,"case_manager");case"iep_504_all":return o.filter(c=>{const u=it(c,"plan");return u==="IEP"||u==="504"});default:return[]}}),a=be(()=>n.value?r.groupStudentsByPeriod(i.value,n.value):{});return{...r,visibleStudents:i,studentsByPeriod:a,providerViewOptions:s,showProviderView:!0}}function nU(t,e){var g,v,y,b;const{currentUser:r}=t;Yy();const n=be(()=>{var E;return((E=r.value)==null?void 0:E.role)||"guest"}),i=be(()=>{switch(n.value){case"admin_504":return rU(t,e);default:return tU(t,e)}}).value;n.value==="paraeducator"&&console.log(" ROLE-BASED VIEW: Paraeducator activeView:",{visibleStudents:((v=(g=i.visibleStudents)==null?void 0:g.value)==null?void 0:v.length)||0,providerViewOptions:((b=(y=i.providerViewOptions)==null?void 0:y.value)==null?void 0:b.length)||0,role:n.value});const a=be(()=>{var x;const E=(x=r.value)==null?void 0:x.role;return["admin","school_admin","staff_edit","sped_chair"].includes(E)}),o=be(()=>{var x;const E=(x=r.value)==null?void 0:x.role;return["case_manager","admin_504"].includes(E)}),l=be(()=>{var x;const E=(x=r.value)==null?void 0:x.role;return["admin","school_admin","staff_view","staff_edit","admin_504","sped_chair"].includes(E)}),c=be(()=>{var x;const E=(x=r.value)==null?void 0:x.role;return["admin","school_admin","admin_504","sped_chair"].includes(E)}),u=be(()=>{var x;const E=(x=r.value)==null?void 0:x.role;return["admin","school_admin","admin_504","sped_chair"].includes(E)}),f=be(()=>!0),h=be(()=>!0),p=be(()=>!0);return{...i,currentRole:n,canEditAllStudents:a,canEditOwnStudents:o,canViewAllStudents:l,canManageUsers:c,canManageAides:u,canAccessTesting:f,canAccessTestingPartial:h,hasAnyTestingAccess:p}}function sU(t){Object.entries(t).reduce((e,[r,n])=>(e[r]=n.length,e),{})}function aU(t,e,r=null){const{aideAssignment:n,getCaseManagerId:s,getSchedule:i,standardizeScheduleAccess:a,currentUser:o}=t,{filteredStudents:l,currentFilters:c,getCurrentFilters:u}=e,f=r||l,h=ae("list");Vt(()=>c.viewMode,E=>{h.value=E||"list"});const p=be(()=>f.value.filter(E=>{var x,w,P,R;return((w=(x=E.app)==null?void 0:x.flags)==null?void 0:w.flag2)||((R=(P=E.app)==null?void 0:P.flags)==null?void 0:R.separateSetting)||E.separateSetting||E.flag2||!1})),g=be(()=>{var A,_,m;const E={};if(h.value!=="class")return E;const x=(A=o.value)==null?void 0:A.uid;if(!x)return console.log(" studentsByClass: No current user ID"),E;console.log(" studentsByClass: Current user ID:",x);const w=(_=t.currentUser.value)==null?void 0:_.role;w==="paraeducator"&&console.log(" studentsByClass DEBUG:",{role:w,roleBasedStudents:((m=r==null?void 0:r.value)==null?void 0:m.length)||0,aideAssignmentAvailable:!!n.value});let P;w==="case_manager"?(P=t.students.value,console.log(" studentsByClass: Case manager - using raw database students:",P.length)):w==="paraeducator"?(P=(r==null?void 0:r.value)||t.students.value,console.log(" studentsByClass: Paraeducator - using role-based students:",P.length)):(P=f.value,console.log(" studentsByClass: Other role - using provider-filtered students:",P.length));const R=u();return R.paraeducator&&R.paraeducator,P.forEach(S=>{const I=i(S)||{};Object.entries(I).forEach(([k,C])=>{var j,H;let O,D;if(typeof C=="string")O=C;else if(C&&typeof C=="object")O=C.teacherId,D=(j=C.coTeaching)==null?void 0:j.caseManagerId;else return;let F=!1;const N=u(),M=N.teacher&&N.teacher!=="all",L=N.paraeducator&&N.paraeducator!=="all";if(w==="paraeducator"){const G=(H=n.value)==null?void 0:H[x];G!=null&&G.classAssignment&&G.classAssignment[k]&&(F=(Array.isArray(G.classAssignment[k])?G.classAssignment[k]:[G.classAssignment[k]]).includes(O))}else if(["admin","administrator"].includes(w))if(M)F=O===N.teacher||D===N.teacher;else if(L){const G=n.value[N.paraeducator];G!=null&&G.classAssignment&&G.classAssignment[k]&&(F=(Array.isArray(G.classAssignment[k])?G.classAssignment[k]:[G.classAssignment[k]]).includes(O))}else F=!0;else F=O===x||D===x;!F||(E[k]||(E[k]=[]),E[k].some(G=>G.id===S.id))||E[k].push(S)})}),console.log(" studentsByClass: Final groups:",Object.keys(E).map(S=>`Period ${S}: ${E[S].length} students`)),sU(E),Object.keys(E).forEach(S=>{E[S].length===0&&delete E[S]}),Object.keys(E).sort((S,I)=>{const k=parseInt(S.replace(/\D/g,"")),C=parseInt(I.replace(/\D/g,""));return k-C}).reduce((S,I)=>(S[I]=E[I],S),{})}),v=be(()=>{var m,S;const E=u(),x=(m=t.currentUser.value)==null?void 0:m.role,w=(S=t.currentUser.value)==null?void 0:S.uid;let P=null;if(x==="paraeducator")P=w;else{if(!(E.paraeducator&&E.paraeducator!=="all"))return[];P=E.paraeducator}if(!P)return[];const R=n.value[P];if(!R||!R.directAssignment)return console.log(" directAssignmentStudents: No aide data or direct assignment for",P),[];const A=Array.isArray(R.directAssignment)?R.directAssignment:[R.directAssignment];console.log(" directAssignmentStudents: Direct student IDs:",A),console.log(" directAssignmentStudents: Available students:",f.value.length);const _=f.value.filter(I=>A.includes(I.id));return console.log(" directAssignmentStudents: Found direct assignment students:",_.length),_}),y=be(()=>{const E={};return f.value.forEach(x=>{const w=s(x);w&&(E[w]||(E[w]=[]),E[w].push(x))}),E});return{currentViewMode:h,studentsByClass:g,directAssignmentStudents:v,studentsByCaseManager:y,testingViewStudents:p,setViewMode:E=>{h.value=E,c.viewMode=E}}}function iU(t){const{router:e,fetchData:r}=t,n=ae(null),s=ae(null),i=ae(!1),a=ae(!1),o=ae(!1),l=ae(null),c=x=>{n.value=x},u=x=>{s.value=x},f=x=>{l.value=x,o.value=!0},h=()=>{console.log("Teacher feedback form sent successfully")},p=()=>{a.value=!1,r()},g=()=>{console.log("Student saved"),r()},v=()=>{e.push("/admin")},y=()=>{e.push("/aide-schedule")},b=async x=>{switch(x){case"add-student":a.value=!0;break;case"export":i.value=!0;break;case"print":window.print();break;case"admin":v();break;case"aide-schedule":y();break;case"logout":await E();break}},E=async()=>{try{const{useAuthStore:x}=await Hs(async()=>{const{useAuthStore:P}=await Promise.resolve().then(()=>cB);return{useAuthStore:P}},void 0);await x().logout(),e.push("/login")}catch(x){console.error("Logout failed:",x)}};return{editingStudentId:n,emailingStudentId:s,showExport:i,showAddStudent:a,showFeedbackDialog:o,feedbackStudentId:l,editStudent:c,emailStudent:u,handleTeacherFeedback:f,handleFormSent:h,handleStudentAdded:p,handleStudentSaved:g,navigateToAdmin:v,navigateToAideSchedule:y,handleNavAction:b,handleLogout:E}}const oU={class:"student-nav-menu"},lU=["title"],cU={class:"nav-content"},uU={class:"nav-section"},dU={class:"nav-buttons"},fU={key:0,class:"nav-section"},hU={class:"nav-buttons"},pU={key:1,class:"nav-section"},mU={class:"nav-buttons"},gU={class:"nav-section"},vU={class:"user-info"},yU={class:"user-details"},xU={key:0,class:"user-role"},EU={__name:"StudentNavMenu",props:{currentUser:{type:Object,default:null},isAdmin:{type:Boolean,default:!1}},emits:["action"],setup(t,{emit:e}){const r=t,n=e,s=be(()=>{var u;const c=(u=r.currentUser)==null?void 0:u.role;return c!=="paraeducator"&&c!=="teacher"}),i=ae(!1);function a(){i.value=!i.value}function o(){i.value=!1}function l(c){n("action",c),o()}return(c,u)=>{var f,h,p,g;return B(),U("div",oU,[d("button",{onClick:a,class:Qe(["hamburger-btn",{active:i.value}]),title:i.value?"Close Menu":"Open Menu"},u[6]||(u[6]=[d("span",{class:"hamburger-line"},null,-1),d("span",{class:"hamburger-line"},null,-1),d("span",{class:"hamburger-line"},null,-1)]),10,lU),i.value?(B(),U("div",{key:0,class:"nav-overlay",onClick:o})):xe("",!0),d("div",{class:Qe(["nav-panel",{open:i.value}])},[d("div",{class:"nav-header"},[u[7]||(u[7]=d("h3",null,"Student Management",-1)),d("button",{onClick:o,class:"close-btn"},"")]),d("div",cU,[d("div",uU,[u[11]||(u[11]=d("h4",null,"Actions",-1)),d("div",dU,[s.value?(B(),U("button",{key:0,onClick:u[0]||(u[0]=v=>l("add-student")),class:"nav-btn primary"},u[8]||(u[8]=[d("span",null,"",-1),we(" Add Student ")]))):xe("",!0),d("button",{onClick:u[1]||(u[1]=v=>l("export")),class:"nav-btn"},u[9]||(u[9]=[d("span",null,"",-1),we(" Export ")])),d("button",{onClick:u[2]||(u[2]=v=>l("print")),class:"nav-btn print-btn"},u[10]||(u[10]=[d("span",null,"",-1),we(" Print ")]))])]),t.isAdmin?(B(),U("div",fU,[u[13]||(u[13]=d("h4",null,"Admin",-1)),d("div",hU,[d("button",{onClick:u[3]||(u[3]=v=>l("admin")),class:"nav-btn"},u[12]||(u[12]=[d("span",null,"",-1),we(" Admin Panel ")]))])])):xe("",!0),((f=t.currentUser)==null?void 0:f.role)==="paraeducator"?(B(),U("div",pU,[u[15]||(u[15]=d("h4",null,"Schedule",-1)),d("div",mU,[d("button",{onClick:u[4]||(u[4]=v=>l("aide-schedule")),class:"nav-btn"},u[14]||(u[14]=[d("span",null,"",-1),we(" My Schedule ")]))])])):xe("",!0),d("div",gU,[u[17]||(u[17]=d("h4",null,"User",-1)),d("div",vU,[d("div",yU,[d("strong",null,Y(((h=t.currentUser)==null?void 0:h.name)||((p=t.currentUser)==null?void 0:p.email)||"User"),1),(g=t.currentUser)!=null&&g.role?(B(),U("span",xU,"("+Y(t.currentUser.role)+")",1)):xe("",!0)]),d("button",{onClick:u[5]||(u[5]=v=>l("logout")),class:"nav-btn danger"},u[16]||(u[16]=[d("span",null,"",-1),we(" Logout ")]))])])])],2)])}}},_U=xt(EU,[["__scopeId","data-v-fd6a61ad"]]);function bU(t){const{appSettings:e,loadAppSettings:r,loading:n,error:s}=Ns(),{getLabel:i}=yo();Wt(async()=>{var C;try{console.log("StudentTable: Loading app settings..."),await r(),console.log("StudentTable: App settings loaded successfully"),t.studentData.students.value.length>0&&await rn.logStudentAccess("table_view","view",{studentCount:t.studentData.students.value.length,viewType:"student_table",hasFilters:(C=t.filterData)!=null&&C.currentFilters?Object.keys(t.filterData.currentFilters).length>0:!1})}catch(O){console.error("StudentTable: Error loading app settings:",O)}});const a=C=>{const O=t.userMap[C];return O&&(O.name||O.email)||C},o=C=>{const O=t.userMap[C];return O?O.initials?O.initials:O.name?O.name.split(" ").map(F=>F[0]).join("").toUpperCase():O.email?O.email[0].toUpperCase():"?":"?"},l=C=>{const O=t.userMap[C];if(!O)return C;if(O.name){const D=O.name.trim().split(" ");return D.length===1?D[0]:`${D[0][0]}. ${D.slice(1).join(" ")}`}return O.email?O.email[0].toUpperCase():C},c=C=>C?new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",u=C=>{if(!C)return"";const O=new Date,D=new Date(C),F=Math.ceil((D-O)/(1e3*60*60*24));return F<=0?"flag-critical":F<=7?"flag-high":F<=14?"flag-medium":F<=21?"flag-mid":F<=28?"flag-low":F<=35?"flag-prep":""},f=C=>{if(!C)return"";const O=new Date,D=new Date(C),F=Math.ceil((D-O)/(1e3*60*60*24));return F<=0?"flag-critical":F<=7?"flag-high":F<=14?"flag-medium":F<=21?"flag-mid":F<=28?"flag-low":F<=60?"flag-prep-reeval":""},h=C=>u(it(C,"meetingDate")),p=C=>u(it(C,"reviewDate")),g=C=>f(it(C,"reevalDate")),v=C=>{var O,D;return((D=(O=C.app)==null?void 0:O.studentData)==null?void 0:D.caseManagerId)||C.caseManagerId||C.casemanager_id},y=(C,O)=>{var D,F;return((F=(D=C.app)==null?void 0:D.flags)==null?void 0:F[O])||C[O]||!1},b=C=>{var O;return((O=C.app)==null?void 0:O.flags)&&Object.values(C.app.flags).some(Boolean)||C.flag1||C.flag2},E=(C,O)=>{var F,N,M;return((N=(F=C.app)==null?void 0:F.documents)==null?void 0:N[O])||((M=C.app)==null?void 0:M[O])||C[O]||C[`${O}_url`]||null},x=C=>{var D,F;const O=((F=(D=C.app)==null?void 0:D.documents)==null?void 0:F.additionalDocuments)||[];return Array.isArray(O)?O:[]},w=C=>{var O,D,F,N,M;if(C.schedule)return C.schedule;if((D=(O=C.app)==null?void 0:O.schedule)!=null&&D.periods)return C.app.schedule.periods;if((N=(F=C.aeries)==null?void 0:F.schedule)!=null&&N.periods)return C.aeries.schedule.periods;if((M=C.aeries)!=null&&M.schedule){const L={};return Object.entries(C.aeries.schedule).forEach(([z,j])=>{if(j&&j.teacherId){const H=parseInt(z.replace("period","")),G=i(H);let W=j.teacherId;if(t.userMap){let ne=Object.values(t.userMap).find(de=>de.aeriesId===j.teacherId||de.aeriesId===parseInt(j.teacherId)||de.id===j.teacherId);if(ne||(ne=Object.values(t.userMap).find(de=>{var se,ce,te,Z;return((se=de.aeriesId)==null?void 0:se.toString())===((ce=j.teacherId)==null?void 0:ce.toString())||((te=de.id)==null?void 0:te.toString())===((Z=j.teacherId)==null?void 0:Z.toString())})),ne&&ne.name){const de=ne.name.split(" ");if(de.length>=2){const se=de[0],ce=de[de.length-1];W=`${se.charAt(0)}. ${ce}`}else W=ne.name}else console.warn(`Teacher not found for ID: ${j.teacherId}`)}L[G]=W}}),Object.keys(L).length>0?L:null}return null},P=C=>{const O=[],D=w(C);return D&&Object.entries(D).forEach(([F,N])=>{if(N&&typeof N=="object"&&N.coTeaching){const M=N.coTeaching.subject;M&&O.push(`Co-teach: ${M}`)}}),O};return{appSettings:e,appSettingsLoading:n,appSettingsError:s,getUserName:a,getUserInitials:o,getUserInitialLastName:l,formatDate:c,getMeetingUrgencyClass:h,getReviewUrgencyClass:p,getReevalUrgencyClass:g,getCaseManagerId:v,getFlagValue:y,hasFlags:b,getDocumentUrl:E,getAdditionalDocuments:x,getSchedule:w,getClassServices:C=>{var L,z;const O=((z=(L=C.app)==null?void 0:L.schedule)==null?void 0:z.classServices)||C.services||[],D=P(C),F=O.filter(j=>j&&j.startsWith&&j.startsWith("Co-teach:")),N=D.filter(j=>!F.includes(j)),M=[...O,...N];if(n.value)return Array.isArray(M)?M.filter(j=>typeof j=="string"&&j.includes(":")):[];if(s.value)return Array.isArray(M)?M.filter(j=>typeof j=="string"&&j.includes(":")):[];if(e.value&&e.value.classServices){const j=e.value.classServices.filter(H=>H.enabledSubcategories&&H.enabledSubcategories.length>0).map(H=>H.name);return Array.isArray(M)?M.filter(H=>{if(typeof H!="string"||!H.includes(":"))return!1;const G=H.split(":")[0];return j.includes(G)}):[]}return Array.isArray(M)?M.filter(j=>typeof j=="string"&&j.includes(":")):[]},getOtherServices:C=>{var D,F;const O=((F=(D=C.app)==null?void 0:D.schedule)==null?void 0:F.otherServices)||C.other_services||[];return Array.isArray(O)?O.filter(N=>!!N):[]},getCoTeachingServices:P,hasServiceProviders:C=>{var N;const O=((N=C.app)==null?void 0:N.providers)||{},D=Object.values(O).some(Boolean);if(n.value||s.value){const M=C.speechId||C.speech_id||C.mhId||C.mh_id||C.otId||C.ot_id||C.ptId||C.pt_id||C.scId||C.sc_id||C.trId||C.tr_id||C.audId||C.aud_id||C.viId||C.vi_id||C.atId||C.at_id||C.dhhId||C.dhh_id||C.omId||C.om_id||C.bisId||C.bis_id||C.hnId||C.hn_id||C.swId||C.sw_id;return D||M}let F=!1;if(e.value&&e.value.serviceProviders){const M=e.value.serviceProviders,L={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"};F=M.some(z=>{const j=L[z];return C[j]||C[j.replace("Id","_id")]})}else F=C.speechId||C.speech_id||C.mhId||C.mh_id||C.otId||C.ot_id||C.ptId||C.pt_id||C.scId||C.sc_id||C.trId||C.tr_id||C.audId||C.aud_id||C.viId||C.vi_id||C.atId||C.at_id||C.dhhId||C.dhh_id||C.omId||C.om_id||C.bisId||C.bis_id||C.hnId||C.hn_id||C.swId||C.sw_id;return D||F},getServiceProviderId:(C,O)=>{var F,N;return((N=(F=C.app)==null?void 0:F.providers)==null?void 0:N[O])||C[O]||C[O.replace("Id","_id")]||null},getProviderFieldName:C=>({SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"})[C]||`${C.toLowerCase()}Id`,isDirectAssignment:C=>{if(!t.currentUser||t.currentUser.role!=="paraeducator")return!1;const O=t.currentUser.uid;let D=t.aideSchedule[O];if(!D){const F=Object.entries(t.userMap).find(([N,M])=>M.uid===O||M.email===t.currentUser.email);if(F){const[N]=F;D=t.aideSchedule[N]}}return(D==null?void 0:D.directAssignment)===C},formatListFromText:K7,getFlagClass:C=>{const O=C.toLowerCase();return O.includes("critical")?"flag-critical":O.includes("high")?"flag-high":O.includes("medium")?"flag-medium":O.includes("mid")?"flag-mid":O.includes("low")?"flag-low":O.includes("prep")?"flag-prep":"flag-low"},getPeriodLabel:i}}let Wf;const SU=new Uint8Array(16);function AU(){if(!Wf&&(Wf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Wf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wf(SU)}const bn=[];for(let t=0;t<256;++t)bn.push((t+256).toString(16).slice(1));function TU(t,e=0){return bn[t[e+0]]+bn[t[e+1]]+bn[t[e+2]]+bn[t[e+3]]+"-"+bn[t[e+4]]+bn[t[e+5]]+"-"+bn[t[e+6]]+bn[t[e+7]]+"-"+bn[t[e+8]]+bn[t[e+9]]+"-"+bn[t[e+10]]+bn[t[e+11]]+bn[t[e+12]]+bn[t[e+13]]+bn[t[e+14]]+bn[t[e+15]]}const wU=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),q_={randomUUID:wU};function CU(t,e,r){if(q_.randomUUID&&!t)return q_.randomUUID();t=t||{};const n=t.random||(t.rng||AU)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,TU(n)}var Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ex(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var hI={exports:{}};function IU(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Im={exports:{}};const kU={},DU=Object.freeze(Object.defineProperty({__proto__:null,default:kU},Symbol.toStringTag,{value:"Module"})),PU=ex(DU);var X_;function er(){return X_||(X_=1,function(t,e){(function(r,n){t.exports=n()})(Ht,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof Ht<"u"&&Ht.crypto&&(i=Ht.crypto),!i&&typeof IU=="function")try{i=PU}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function E(){}return function(x){var w;return E.prototype=x,w=new E,E.prototype=null,w}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(E){var x=o(this);return E&&x.mixIn(E),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var x in E)E.hasOwnProperty(x)&&(this[x]=E[x]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=c.WordArray=u.extend({init:function(E,x){E=this.words=E||[],x!=s?this.sigBytes=x:this.sigBytes=E.length*4},toString:function(E){return(E||p).stringify(this)},concat:function(E){var x=this.words,w=E.words,P=this.sigBytes,R=E.sigBytes;if(this.clamp(),P%4)for(var A=0;A<R;A++){var _=w[A>>>2]>>>24-A%4*8&255;x[P+A>>>2]|=_<<24-(P+A)%4*8}else for(var m=0;m<R;m+=4)x[P+m>>>2]=w[m>>>2];return this.sigBytes+=R,this},clamp:function(){var E=this.words,x=this.sigBytes;E[x>>>2]&=4294967295<<32-x%4*8,E.length=n.ceil(x/4)},clone:function(){var E=u.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var x=[],w=0;w<E;w+=4)x.push(a());return new f.init(x,E)}}),h=l.enc={},p=h.Hex={stringify:function(E){for(var x=E.words,w=E.sigBytes,P=[],R=0;R<w;R++){var A=x[R>>>2]>>>24-R%4*8&255;P.push((A>>>4).toString(16)),P.push((A&15).toString(16))}return P.join("")},parse:function(E){for(var x=E.length,w=[],P=0;P<x;P+=2)w[P>>>3]|=parseInt(E.substr(P,2),16)<<24-P%8*4;return new f.init(w,x/2)}},g=h.Latin1={stringify:function(E){for(var x=E.words,w=E.sigBytes,P=[],R=0;R<w;R++){var A=x[R>>>2]>>>24-R%4*8&255;P.push(String.fromCharCode(A))}return P.join("")},parse:function(E){for(var x=E.length,w=[],P=0;P<x;P++)w[P>>>2]|=(E.charCodeAt(P)&255)<<24-P%4*8;return new f.init(w,x)}},v=h.Utf8={stringify:function(E){try{return decodeURIComponent(escape(g.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return g.parse(unescape(encodeURIComponent(E)))}},y=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=v.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var x,w=this._data,P=w.words,R=w.sigBytes,A=this.blockSize,_=A*4,m=R/_;E?m=n.ceil(m):m=n.max((m|0)-this._minBufferSize,0);var S=m*A,I=n.min(S*4,R);if(S){for(var k=0;k<S;k+=A)this._doProcessBlock(P,k);x=P.splice(0,S),w.sigBytes-=I}return new f.init(x,I)},clone:function(){var E=u.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});c.Hasher=y.extend({cfg:u.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(E){return function(x,w){return new E.init(w).finalize(x)}},_createHmacHelper:function(E){return function(x,w){return new b.HMAC.init(E,w).finalize(x)}}});var b=l.algo={};return l}(Math);return r})}(Im)),Im.exports}var km={exports:{}},Y_;function Mp(){return Y_||(Y_=1,function(t,e){(function(r,n){t.exports=n(er())})(Ht,function(r){return function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=s.x64={};l.Word=a.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=a.extend({init:function(c,u){c=this.words=c||[],u!=n?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,f=[],h=0;h<u;h++){var p=c[h];f.push(p.high),f.push(p.low)}return o.create(f,this.sigBytes)},clone:function(){for(var c=a.clone.call(this),u=c.words=this.words.slice(0),f=u.length,h=0;h<f;h++)u[h]=u[h].clone();return c}})}(),r})}(km)),km.exports}var Dm={exports:{}},Q_;function RU(){return Q_||(Q_=1,function(t,e){(function(r,n){t.exports=n(er())})(Ht,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,o=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],f=0;f<c;f++)u[f>>>2]|=l[f]<<24-f%4*8;a.call(this,u,c)}else a.apply(this,arguments)};o.prototype=i}}(),r.lib.WordArray})}(Dm)),Dm.exports}var Pm={exports:{}},J_;function FU(){return J_||(J_=1,function(t,e){(function(r,n){t.exports=n(er())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,f=[],h=0;h<u;h+=2){var p=c[h>>>2]>>>16-h%4*8&65535;f.push(String.fromCharCode(p))}return f.join("")},parse:function(l){for(var c=l.length,u=[],f=0;f<c;f++)u[f>>>1]|=l.charCodeAt(f)<<16-f%2*16;return i.create(u,c*2)}},a.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,f=[],h=0;h<u;h+=2){var p=o(c[h>>>2]>>>16-h%4*8&65535);f.push(String.fromCharCode(p))}return f.join("")},parse:function(l){for(var c=l.length,u=[],f=0;f<c;f++)u[f>>>1]|=o(l.charCodeAt(f)<<16-f%2*16);return i.create(u,c*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}}(),r.enc.Utf16})}(Pm)),Pm.exports}var Rm={exports:{}},Z_;function ml(){return Z_||(Z_=1,function(t,e){(function(r,n){t.exports=n(er())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,f=this._map;l.clamp();for(var h=[],p=0;p<u;p+=3)for(var g=c[p>>>2]>>>24-p%4*8&255,v=c[p+1>>>2]>>>24-(p+1)%4*8&255,y=c[p+2>>>2]>>>24-(p+2)%4*8&255,b=g<<16|v<<8|y,E=0;E<4&&p+E*.75<u;E++)h.push(f.charAt(b>>>6*(3-E)&63));var x=f.charAt(64);if(x)for(;h.length%4;)h.push(x);return h.join("")},parse:function(l){var c=l.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<u.length;h++)f[u.charCodeAt(h)]=h}var p=u.charAt(64);if(p){var g=l.indexOf(p);g!==-1&&(c=g)}return o(l,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,c,u){for(var f=[],h=0,p=0;p<c;p++)if(p%4){var g=u[l.charCodeAt(p-1)]<<p%4*2,v=u[l.charCodeAt(p)]>>>6-p%4*2,y=g|v;f[h>>>2]|=y<<24-h%4*8,h++}return i.create(f,h)}}(),r.enc.Base64})}(Rm)),Rm.exports}var Fm={exports:{}},eb;function NU(){return eb||(eb=1,function(t,e){(function(r,n){t.exports=n(er())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,f=l.sigBytes,h=c?this._safe_map:this._map;l.clamp();for(var p=[],g=0;g<f;g+=3)for(var v=u[g>>>2]>>>24-g%4*8&255,y=u[g+1>>>2]>>>24-(g+1)%4*8&255,b=u[g+2>>>2]>>>24-(g+2)%4*8&255,E=v<<16|y<<8|b,x=0;x<4&&g+x*.75<f;x++)p.push(h.charAt(E>>>6*(3-x)&63));var w=h.charAt(64);if(w)for(;p.length%4;)p.push(w);return p.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,f=c?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var p=0;p<f.length;p++)h[f.charCodeAt(p)]=p}var g=f.charAt(64);if(g){var v=l.indexOf(g);v!==-1&&(u=v)}return o(l,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,c,u){for(var f=[],h=0,p=0;p<c;p++)if(p%4){var g=u[l.charCodeAt(p-1)]<<p%4*2,v=u[l.charCodeAt(p)]>>>6-p%4*2,y=g|v;f[h>>>2]|=y<<24-h%4*8,h++}return i.create(f,h)}}(),r.enc.Base64url})}(Fm)),Fm.exports}var Nm={exports:{}},tb;function gl(){return tb||(tb=1,function(t,e){(function(r,n){t.exports=n(er())})(Ht,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[];(function(){for(var v=0;v<64;v++)c[v]=n.abs(n.sin(v+1))*4294967296|0})();var u=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,y){for(var b=0;b<16;b++){var E=y+b,x=v[E];v[E]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var w=this._hash.words,P=v[y+0],R=v[y+1],A=v[y+2],_=v[y+3],m=v[y+4],S=v[y+5],I=v[y+6],k=v[y+7],C=v[y+8],O=v[y+9],D=v[y+10],F=v[y+11],N=v[y+12],M=v[y+13],L=v[y+14],z=v[y+15],j=w[0],H=w[1],G=w[2],W=w[3];j=f(j,H,G,W,P,7,c[0]),W=f(W,j,H,G,R,12,c[1]),G=f(G,W,j,H,A,17,c[2]),H=f(H,G,W,j,_,22,c[3]),j=f(j,H,G,W,m,7,c[4]),W=f(W,j,H,G,S,12,c[5]),G=f(G,W,j,H,I,17,c[6]),H=f(H,G,W,j,k,22,c[7]),j=f(j,H,G,W,C,7,c[8]),W=f(W,j,H,G,O,12,c[9]),G=f(G,W,j,H,D,17,c[10]),H=f(H,G,W,j,F,22,c[11]),j=f(j,H,G,W,N,7,c[12]),W=f(W,j,H,G,M,12,c[13]),G=f(G,W,j,H,L,17,c[14]),H=f(H,G,W,j,z,22,c[15]),j=h(j,H,G,W,R,5,c[16]),W=h(W,j,H,G,I,9,c[17]),G=h(G,W,j,H,F,14,c[18]),H=h(H,G,W,j,P,20,c[19]),j=h(j,H,G,W,S,5,c[20]),W=h(W,j,H,G,D,9,c[21]),G=h(G,W,j,H,z,14,c[22]),H=h(H,G,W,j,m,20,c[23]),j=h(j,H,G,W,O,5,c[24]),W=h(W,j,H,G,L,9,c[25]),G=h(G,W,j,H,_,14,c[26]),H=h(H,G,W,j,C,20,c[27]),j=h(j,H,G,W,M,5,c[28]),W=h(W,j,H,G,A,9,c[29]),G=h(G,W,j,H,k,14,c[30]),H=h(H,G,W,j,N,20,c[31]),j=p(j,H,G,W,S,4,c[32]),W=p(W,j,H,G,C,11,c[33]),G=p(G,W,j,H,F,16,c[34]),H=p(H,G,W,j,L,23,c[35]),j=p(j,H,G,W,R,4,c[36]),W=p(W,j,H,G,m,11,c[37]),G=p(G,W,j,H,k,16,c[38]),H=p(H,G,W,j,D,23,c[39]),j=p(j,H,G,W,M,4,c[40]),W=p(W,j,H,G,P,11,c[41]),G=p(G,W,j,H,_,16,c[42]),H=p(H,G,W,j,I,23,c[43]),j=p(j,H,G,W,O,4,c[44]),W=p(W,j,H,G,N,11,c[45]),G=p(G,W,j,H,z,16,c[46]),H=p(H,G,W,j,A,23,c[47]),j=g(j,H,G,W,P,6,c[48]),W=g(W,j,H,G,k,10,c[49]),G=g(G,W,j,H,L,15,c[50]),H=g(H,G,W,j,S,21,c[51]),j=g(j,H,G,W,N,6,c[52]),W=g(W,j,H,G,_,10,c[53]),G=g(G,W,j,H,D,15,c[54]),H=g(H,G,W,j,R,21,c[55]),j=g(j,H,G,W,C,6,c[56]),W=g(W,j,H,G,z,10,c[57]),G=g(G,W,j,H,I,15,c[58]),H=g(H,G,W,j,M,21,c[59]),j=g(j,H,G,W,m,6,c[60]),W=g(W,j,H,G,F,10,c[61]),G=g(G,W,j,H,A,15,c[62]),H=g(H,G,W,j,O,21,c[63]),w[0]=w[0]+j|0,w[1]=w[1]+H|0,w[2]=w[2]+G|0,w[3]=w[3]+W|0},_doFinalize:function(){var v=this._data,y=v.words,b=this._nDataBytes*8,E=v.sigBytes*8;y[E>>>5]|=128<<24-E%32;var x=n.floor(b/4294967296),w=b;y[(E+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,y[(E+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,v.sigBytes=(y.length+1)*4,this._process();for(var P=this._hash,R=P.words,A=0;A<4;A++){var _=R[A];R[A]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return P},clone:function(){var v=o.clone.call(this);return v._hash=this._hash.clone(),v}});function f(v,y,b,E,x,w,P){var R=v+(y&b|~y&E)+x+P;return(R<<w|R>>>32-w)+y}function h(v,y,b,E,x,w,P){var R=v+(y&E|b&~E)+x+P;return(R<<w|R>>>32-w)+y}function p(v,y,b,E,x,w,P){var R=v+(y^b^E)+x+P;return(R<<w|R>>>32-w)+y}function g(v,y,b,E,x,w,P){var R=v+(b^(y|~E))+x+P;return(R<<w|R>>>32-w)+y}s.MD5=o._createHelper(u),s.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5})}(Nm)),Nm.exports}var Om={exports:{}},rb;function pI(){return rb||(rb=1,function(t,e){(function(r,n){t.exports=n(er())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,o=n.algo,l=[],c=o.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var h=this._hash.words,p=h[0],g=h[1],v=h[2],y=h[3],b=h[4],E=0;E<80;E++){if(E<16)l[E]=u[f+E]|0;else{var x=l[E-3]^l[E-8]^l[E-14]^l[E-16];l[E]=x<<1|x>>>31}var w=(p<<5|p>>>27)+b+l[E];E<20?w+=(g&v|~g&y)+1518500249:E<40?w+=(g^v^y)+1859775393:E<60?w+=(g&v|g&y|v&y)-1894007588:w+=(g^v^y)-899497514,b=y,y=v,v=g<<30|g>>>2,g=p,p=w}h[0]=h[0]+p|0,h[1]=h[1]+g|0,h[2]=h[2]+v|0,h[3]=h[3]+y|0,h[4]=h[4]+b|0},_doFinalize:function(){var u=this._data,f=u.words,h=this._nDataBytes*8,p=u.sigBytes*8;return f[p>>>5]|=128<<24-p%32,f[(p+64>>>9<<4)+14]=Math.floor(h/4294967296),f[(p+64>>>9<<4)+15]=h,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=a.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c)}(),r.SHA1})}(Om)),Om.exports}var Mm={exports:{}},nb;function tx(){return nb||(nb=1,function(t,e){(function(r,n){t.exports=n(er())})(Ht,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[],u=[];(function(){function p(b){for(var E=n.sqrt(b),x=2;x<=E;x++)if(!(b%x))return!1;return!0}function g(b){return(b-(b|0))*4294967296|0}for(var v=2,y=0;y<64;)p(v)&&(y<8&&(c[y]=g(n.pow(v,1/2))),u[y]=g(n.pow(v,1/3)),y++),v++})();var f=[],h=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(p,g){for(var v=this._hash.words,y=v[0],b=v[1],E=v[2],x=v[3],w=v[4],P=v[5],R=v[6],A=v[7],_=0;_<64;_++){if(_<16)f[_]=p[g+_]|0;else{var m=f[_-15],S=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,I=f[_-2],k=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;f[_]=S+f[_-7]+k+f[_-16]}var C=w&P^~w&R,O=y&b^y&E^b&E,D=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),F=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),N=A+F+C+u[_]+f[_],M=D+O;A=R,R=P,P=w,w=x+N|0,x=E,E=b,b=y,y=N+M|0}v[0]=v[0]+y|0,v[1]=v[1]+b|0,v[2]=v[2]+E|0,v[3]=v[3]+x|0,v[4]=v[4]+w|0,v[5]=v[5]+P|0,v[6]=v[6]+R|0,v[7]=v[7]+A|0},_doFinalize:function(){var p=this._data,g=p.words,v=this._nDataBytes*8,y=p.sigBytes*8;return g[y>>>5]|=128<<24-y%32,g[(y+64>>>9<<4)+14]=n.floor(v/4294967296),g[(y+64>>>9<<4)+15]=v,p.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=o._createHelper(h),s.HmacSHA256=o._createHmacHelper(h)}(Math),r.SHA256})}(Mm)),Mm.exports}var Lm={exports:{}},sb;function OU(){return sb||(sb=1,function(t,e){(function(r,n,s){t.exports=n(er(),tx())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)}(),r.SHA224})}(Lm)),Lm.exports}var Bm={exports:{}},ab;function mI(){return ab||(ab=1,function(t,e){(function(r,n,s){t.exports=n(er(),Mp())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,o=a.Word,l=a.WordArray,c=n.algo;function u(){return o.create.apply(o,arguments)}var f=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var g=0;g<80;g++)h[g]=u()})();var p=c.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(g,v){for(var y=this._hash.words,b=y[0],E=y[1],x=y[2],w=y[3],P=y[4],R=y[5],A=y[6],_=y[7],m=b.high,S=b.low,I=E.high,k=E.low,C=x.high,O=x.low,D=w.high,F=w.low,N=P.high,M=P.low,L=R.high,z=R.low,j=A.high,H=A.low,G=_.high,W=_.low,ne=m,de=S,se=I,ce=k,te=C,Z=O,ye=D,J=F,X=N,Q=M,fe=L,ve=z,ie=j,ee=H,ge=G,Te=W,Ie=0;Ie<80;Ie++){var Ae,We,De=h[Ie];if(Ie<16)We=De.high=g[v+Ie*2]|0,Ae=De.low=g[v+Ie*2+1]|0;else{var He=h[Ie-15],$e=He.high,ke=He.low,Ke=($e>>>1|ke<<31)^($e>>>8|ke<<24)^$e>>>7,_e=(ke>>>1|$e<<31)^(ke>>>8|$e<<24)^(ke>>>7|$e<<25),Ee=h[Ie-2],Se=Ee.high,Me=Ee.low,ze=(Se>>>19|Me<<13)^(Se<<3|Me>>>29)^Se>>>6,lt=(Me>>>19|Se<<13)^(Me<<3|Se>>>29)^(Me>>>6|Se<<26),vt=h[Ie-7],bt=vt.high,$t=vt.low,ft=h[Ie-16],ct=ft.high,ht=ft.low;Ae=_e+$t,We=Ke+bt+(Ae>>>0<_e>>>0?1:0),Ae=Ae+lt,We=We+ze+(Ae>>>0<lt>>>0?1:0),Ae=Ae+ht,We=We+ct+(Ae>>>0<ht>>>0?1:0),De.high=We,De.low=Ae}var Ct=X&fe^~X&ie,Rt=Q&ve^~Q&ee,gr=ne&se^ne&te^se&te,rs=de&ce^de&Z^ce&Z,Pi=(ne>>>28|de<<4)^(ne<<30|de>>>2)^(ne<<25|de>>>7),ps=(de>>>28|ne<<4)^(de<<30|ne>>>2)^(de<<25|ne>>>7),Sl=(X>>>14|Q<<18)^(X>>>18|Q<<14)^(X<<23|Q>>>9),Ga=(Q>>>14|X<<18)^(Q>>>18|X<<14)^(Q<<23|X>>>9),_o=f[Ie],sn=_o.high,bo=_o.low,Rr=Te+Ga,On=ge+Sl+(Rr>>>0<Te>>>0?1:0),Rr=Rr+Rt,On=On+Ct+(Rr>>>0<Rt>>>0?1:0),Rr=Rr+bo,On=On+sn+(Rr>>>0<bo>>>0?1:0),Rr=Rr+Ae,On=On+We+(Rr>>>0<Ae>>>0?1:0),Al=ps+rs,zc=Pi+gr+(Al>>>0<ps>>>0?1:0);ge=ie,Te=ee,ie=fe,ee=ve,fe=X,ve=Q,Q=J+Rr|0,X=ye+On+(Q>>>0<J>>>0?1:0)|0,ye=te,J=Z,te=se,Z=ce,se=ne,ce=de,de=Rr+Al|0,ne=On+zc+(de>>>0<Rr>>>0?1:0)|0}S=b.low=S+de,b.high=m+ne+(S>>>0<de>>>0?1:0),k=E.low=k+ce,E.high=I+se+(k>>>0<ce>>>0?1:0),O=x.low=O+Z,x.high=C+te+(O>>>0<Z>>>0?1:0),F=w.low=F+J,w.high=D+ye+(F>>>0<J>>>0?1:0),M=P.low=M+Q,P.high=N+X+(M>>>0<Q>>>0?1:0),z=R.low=z+ve,R.high=L+fe+(z>>>0<ve>>>0?1:0),H=A.low=H+ee,A.high=j+ie+(H>>>0<ee>>>0?1:0),W=_.low=W+Te,_.high=G+ge+(W>>>0<Te>>>0?1:0)},_doFinalize:function(){var g=this._data,v=g.words,y=this._nDataBytes*8,b=g.sigBytes*8;v[b>>>5]|=128<<24-b%32,v[(b+128>>>10<<5)+30]=Math.floor(y/4294967296),v[(b+128>>>10<<5)+31]=y,g.sigBytes=v.length*4,this._process();var E=this._hash.toX32();return E},clone:function(){var g=i.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});n.SHA512=i._createHelper(p),n.HmacSHA512=i._createHmacHelper(p)}(),r.SHA512})}(Bm)),Bm.exports}var Um={exports:{}},ib;function MU(){return ib||(ib=1,function(t,e){(function(r,n,s){t.exports=n(er(),Mp(),mI())})(Ht,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,o=n.algo,l=o.SHA512,c=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=l._createHelper(c),n.HmacSHA384=l._createHmacHelper(c)}(),r.SHA384})}(Um)),Um.exports}var $m={exports:{}},ob;function LU(){return ob||(ob=1,function(t,e){(function(r,n,s){t.exports=n(er(),Mp())})(Ht,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.x64,c=l.Word,u=s.algo,f=[],h=[],p=[];(function(){for(var y=1,b=0,E=0;E<24;E++){f[y+5*b]=(E+1)*(E+2)/2%64;var x=b%5,w=(2*y+3*b)%5;y=x,b=w}for(var y=0;y<5;y++)for(var b=0;b<5;b++)h[y+5*b]=b+(2*y+3*b)%5*5;for(var P=1,R=0;R<24;R++){for(var A=0,_=0,m=0;m<7;m++){if(P&1){var S=(1<<m)-1;S<32?_^=1<<S:A^=1<<S-32}P&128?P=P<<1^113:P<<=1}p[R]=c.create(A,_)}})();var g=[];(function(){for(var y=0;y<25;y++)g[y]=c.create()})();var v=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var y=this._state=[],b=0;b<25;b++)y[b]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(y,b){for(var E=this._state,x=this.blockSize/2,w=0;w<x;w++){var P=y[b+2*w],R=y[b+2*w+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var A=E[w];A.high^=R,A.low^=P}for(var _=0;_<24;_++){for(var m=0;m<5;m++){for(var S=0,I=0,k=0;k<5;k++){var A=E[m+5*k];S^=A.high,I^=A.low}var C=g[m];C.high=S,C.low=I}for(var m=0;m<5;m++)for(var O=g[(m+4)%5],D=g[(m+1)%5],F=D.high,N=D.low,S=O.high^(F<<1|N>>>31),I=O.low^(N<<1|F>>>31),k=0;k<5;k++){var A=E[m+5*k];A.high^=S,A.low^=I}for(var M=1;M<25;M++){var S,I,A=E[M],L=A.high,z=A.low,j=f[M];j<32?(S=L<<j|z>>>32-j,I=z<<j|L>>>32-j):(S=z<<j-32|L>>>64-j,I=L<<j-32|z>>>64-j);var H=g[h[M]];H.high=S,H.low=I}var G=g[0],W=E[0];G.high=W.high,G.low=W.low;for(var m=0;m<5;m++)for(var k=0;k<5;k++){var M=m+5*k,A=E[M],ne=g[M],de=g[(m+1)%5+5*k],se=g[(m+2)%5+5*k];A.high=ne.high^~de.high&se.high,A.low=ne.low^~de.low&se.low}var A=E[0],ce=p[_];A.high^=ce.high,A.low^=ce.low}},_doFinalize:function(){var y=this._data,b=y.words;this._nDataBytes*8;var E=y.sigBytes*8,x=this.blockSize*32;b[E>>>5]|=1<<24-E%32,b[(n.ceil((E+1)/x)*x>>>5)-1]|=128,y.sigBytes=b.length*4,this._process();for(var w=this._state,P=this.cfg.outputLength/8,R=P/8,A=[],_=0;_<R;_++){var m=w[_],S=m.high,I=m.low;S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,A.push(I),A.push(S)}return new a.init(A,P)},clone:function(){for(var y=o.clone.call(this),b=y._state=this._state.slice(0),E=0;E<25;E++)b[E]=b[E].clone();return y}});s.SHA3=o._createHelper(v),s.HmacSHA3=o._createHmacHelper(v)}(Math),r.SHA3})}($m)),$m.exports}var Vm={exports:{}},lb;function BU(){return lb||(lb=1,function(t,e){(function(r,n){t.exports=n(er())})(Ht,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=a.create([0,1518500249,1859775393,2400959708,2840853838]),g=a.create([1352829926,1548603684,1836072691,2053994217,0]),v=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(R,A){for(var _=0;_<16;_++){var m=A+_,S=R[m];R[m]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var I=this._hash.words,k=p.words,C=g.words,O=c.words,D=u.words,F=f.words,N=h.words,M,L,z,j,H,G,W,ne,de,se;G=M=I[0],W=L=I[1],ne=z=I[2],de=j=I[3],se=H=I[4];for(var ce,_=0;_<80;_+=1)ce=M+R[A+O[_]]|0,_<16?ce+=y(L,z,j)+k[0]:_<32?ce+=b(L,z,j)+k[1]:_<48?ce+=E(L,z,j)+k[2]:_<64?ce+=x(L,z,j)+k[3]:ce+=w(L,z,j)+k[4],ce=ce|0,ce=P(ce,F[_]),ce=ce+H|0,M=H,H=j,j=P(z,10),z=L,L=ce,ce=G+R[A+D[_]]|0,_<16?ce+=w(W,ne,de)+C[0]:_<32?ce+=x(W,ne,de)+C[1]:_<48?ce+=E(W,ne,de)+C[2]:_<64?ce+=b(W,ne,de)+C[3]:ce+=y(W,ne,de)+C[4],ce=ce|0,ce=P(ce,N[_]),ce=ce+se|0,G=se,se=de,de=P(ne,10),ne=W,W=ce;ce=I[1]+z+de|0,I[1]=I[2]+j+se|0,I[2]=I[3]+H+G|0,I[3]=I[4]+M+W|0,I[4]=I[0]+L+ne|0,I[0]=ce},_doFinalize:function(){var R=this._data,A=R.words,_=this._nDataBytes*8,m=R.sigBytes*8;A[m>>>5]|=128<<24-m%32,A[(m+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,R.sigBytes=(A.length+1)*4,this._process();for(var S=this._hash,I=S.words,k=0;k<5;k++){var C=I[k];I[k]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}return S},clone:function(){var R=o.clone.call(this);return R._hash=this._hash.clone(),R}});function y(R,A,_){return R^A^_}function b(R,A,_){return R&A|~R&_}function E(R,A,_){return(R|~A)^_}function x(R,A,_){return R&_|A&~_}function w(R,A,_){return R^(A|~_)}function P(R,A){return R<<A|R>>>32-A}s.RIPEMD160=o._createHelper(v),s.HmacRIPEMD160=o._createHmacHelper(v)}(),r.RIPEMD160})}(Vm)),Vm.exports}var Hm={exports:{}},cb;function rx(){return cb||(cb=1,function(t,e){(function(r,n){t.exports=n(er())})(Ht,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,o=a.Utf8,l=n.algo;l.HMAC=i.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var f=c.blockSize,h=f*4;u.sigBytes>h&&(u=c.finalize(u)),u.clamp();for(var p=this._oKey=u.clone(),g=this._iKey=u.clone(),v=p.words,y=g.words,b=0;b<f;b++)v[b]^=1549556828,y[b]^=909522486;p.sigBytes=g.sigBytes=h,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,f=u.finalize(c);u.reset();var h=u.finalize(this._oKey.clone().concat(f));return h}})})()})}(Hm)),Hm.exports}var jm={exports:{}},ub;function UU(){return ub||(ub=1,function(t,e){(function(r,n,s){t.exports=n(er(),tx(),rx())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.SHA256,c=o.HMAC,u=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,h){for(var p=this.cfg,g=c.create(p.hasher,f),v=a.create(),y=a.create([1]),b=v.words,E=y.words,x=p.keySize,w=p.iterations;b.length<x;){var P=g.update(h).finalize(y);g.reset();for(var R=P.words,A=R.length,_=P,m=1;m<w;m++){_=g.finalize(_),g.reset();for(var S=_.words,I=0;I<A;I++)R[I]^=S[I]}v.concat(P),E[0]++}return v.sigBytes=x*4,v}});n.PBKDF2=function(f,h,p){return u.create(p).compute(f,h)}}(),r.PBKDF2})}(jm)),jm.exports}var Gm={exports:{}},db;function xo(){return db||(db=1,function(t,e){(function(r,n,s){t.exports=n(er(),pI(),rx())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.MD5,c=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var h,p=this.cfg,g=p.hasher.create(),v=a.create(),y=v.words,b=p.keySize,E=p.iterations;y.length<b;){h&&g.update(h),h=g.update(u).finalize(f),g.reset();for(var x=1;x<E;x++)h=g.finalize(h),g.reset();v.concat(h)}return v.sigBytes=b*4,v}});n.EvpKDF=function(u,f,h){return c.create(h).compute(u,f)}}(),r.EvpKDF})}(Gm)),Gm.exports}var Wm={exports:{}},fb;function En(){return fb||(fb=1,function(t,e){(function(r,n,s){t.exports=n(er(),xo())})(Ht,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=i.BufferedBlockAlgorithm,c=s.enc;c.Utf8;var u=c.Base64,f=s.algo,h=f.EvpKDF,p=i.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(S,I){return this.create(this._ENC_XFORM_MODE,S,I)},createDecryptor:function(S,I){return this.create(this._DEC_XFORM_MODE,S,I)},init:function(S,I,k){this.cfg=this.cfg.extend(k),this._xformMode=S,this._key=I,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){S&&this._append(S);var I=this._doFinalize();return I},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function S(I){return typeof I=="string"?m:R}return function(I){return{encrypt:function(k,C,O){return S(C).encrypt(I,k,C,O)},decrypt:function(k,C,O){return S(C).decrypt(I,k,C,O)}}}}()});i.StreamCipher=p.extend({_doFinalize:function(){var S=this._process(!0);return S},blockSize:1});var g=s.mode={},v=i.BlockCipherMode=a.extend({createEncryptor:function(S,I){return this.Encryptor.create(S,I)},createDecryptor:function(S,I){return this.Decryptor.create(S,I)},init:function(S,I){this._cipher=S,this._iv=I}}),y=g.CBC=function(){var S=v.extend();S.Encryptor=S.extend({processBlock:function(k,C){var O=this._cipher,D=O.blockSize;I.call(this,k,C,D),O.encryptBlock(k,C),this._prevBlock=k.slice(C,C+D)}}),S.Decryptor=S.extend({processBlock:function(k,C){var O=this._cipher,D=O.blockSize,F=k.slice(C,C+D);O.decryptBlock(k,C),I.call(this,k,C,D),this._prevBlock=F}});function I(k,C,O){var D,F=this._iv;F?(D=F,this._iv=n):D=this._prevBlock;for(var N=0;N<O;N++)k[C+N]^=D[N]}return S}(),b=s.pad={},E=b.Pkcs7={pad:function(S,I){for(var k=I*4,C=k-S.sigBytes%k,O=C<<24|C<<16|C<<8|C,D=[],F=0;F<C;F+=4)D.push(O);var N=o.create(D,C);S.concat(N)},unpad:function(S){var I=S.words[S.sigBytes-1>>>2]&255;S.sigBytes-=I}};i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:y,padding:E}),reset:function(){var S;p.reset.call(this);var I=this.cfg,k=I.iv,C=I.mode;this._xformMode==this._ENC_XFORM_MODE?S=C.createEncryptor:(S=C.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==S?this._mode.init(this,k&&k.words):(this._mode=S.call(C,this,k&&k.words),this._mode.__creator=S)},_doProcessBlock:function(S,I){this._mode.processBlock(S,I)},_doFinalize:function(){var S,I=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(I.pad(this._data,this.blockSize),S=this._process(!0)):(S=this._process(!0),I.unpad(S)),S},blockSize:128/32});var x=i.CipherParams=a.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),w=s.format={},P=w.OpenSSL={stringify:function(S){var I,k=S.ciphertext,C=S.salt;return C?I=o.create([1398893684,1701076831]).concat(C).concat(k):I=k,I.toString(u)},parse:function(S){var I,k=u.parse(S),C=k.words;return C[0]==1398893684&&C[1]==1701076831&&(I=o.create(C.slice(2,4)),C.splice(0,4),k.sigBytes-=16),x.create({ciphertext:k,salt:I})}},R=i.SerializableCipher=a.extend({cfg:a.extend({format:P}),encrypt:function(S,I,k,C){C=this.cfg.extend(C);var O=S.createEncryptor(k,C),D=O.finalize(I),F=O.cfg;return x.create({ciphertext:D,key:k,iv:F.iv,algorithm:S,mode:F.mode,padding:F.padding,blockSize:S.blockSize,formatter:C.format})},decrypt:function(S,I,k,C){C=this.cfg.extend(C),I=this._parse(I,C.format);var O=S.createDecryptor(k,C).finalize(I.ciphertext);return O},_parse:function(S,I){return typeof S=="string"?I.parse(S,this):S}}),A=s.kdf={},_=A.OpenSSL={execute:function(S,I,k,C,O){if(C||(C=o.random(64/8)),O)var D=h.create({keySize:I+k,hasher:O}).compute(S,C);else var D=h.create({keySize:I+k}).compute(S,C);var F=o.create(D.words.slice(I),k*4);return D.sigBytes=I*4,x.create({key:D,iv:F,salt:C})}},m=i.PasswordBasedCipher=R.extend({cfg:R.cfg.extend({kdf:_}),encrypt:function(S,I,k,C){C=this.cfg.extend(C);var O=C.kdf.execute(k,S.keySize,S.ivSize,C.salt,C.hasher);C.iv=O.iv;var D=R.encrypt.call(this,S,I,O.key,C);return D.mixIn(O),D},decrypt:function(S,I,k,C){C=this.cfg.extend(C),I=this._parse(I,C.format);var O=C.kdf.execute(k,S.keySize,S.ivSize,I.salt,C.hasher);C.iv=O.iv;var D=R.decrypt.call(this,S,I,O.key,C);return D}})}()})}(Wm)),Wm.exports}var zm={exports:{}},hb;function $U(){return hb||(hb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize;s.call(this,i,a,l,o),this._prevBlock=i.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=i.slice(a,a+l);s.call(this,i,a,l,o),this._prevBlock=c}});function s(i,a,o,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var f=0;f<o;f++)i[a+f]^=c[f]}return n}(),r.mode.CFB})}(zm)),zm.exports}var Km={exports:{}},pb;function VU(){return pb||(pb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var f=u.slice(0);o.encryptBlock(f,0),u[l-1]=u[l-1]+1|0;for(var h=0;h<l;h++)i[a+h]^=f[h]}});return n.Decryptor=s,n}(),r.mode.CTR})}(Km)),Km.exports}var qm={exports:{}},mb;function HU(){return mb||(mb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(o){if((o>>24&255)===255){var l=o>>16&255,c=o>>8&255,u=o&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,o=0,o+=l<<16,o+=c<<8,o+=u}else o+=1<<24;return o}function i(o){return(o[0]=s(o[0]))===0&&(o[1]=s(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,f=this._iv,h=this._counter;f&&(h=this._counter=f.slice(0),this._iv=void 0),i(h);var p=h.slice(0);c.encryptBlock(p,0);for(var g=0;g<u;g++)o[l+g]^=p[g]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(qm)),qm.exports}var Xm={exports:{}},gb;function jU(){return gb||(gb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(u,0);for(var f=0;f<l;f++)i[a+f]^=u[f]}});return n.Decryptor=s,n}(),r.mode.OFB})}(Xm)),Xm.exports}var Ym={exports:{}},vb;function GU(){return vb||(vb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(Ym)),Ym.exports}var Qm={exports:{}},yb;function WU(){return yb||(yb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,o=a-i%a,l=i+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(Qm)),Qm.exports}var Jm={exports:{}},xb;function zU(){return xb||(xb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(Jm)),Jm.exports}var Zm={exports:{}},Eb;function KU(){return Eb||(Eb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Zm)),Zm.exports}var eg={exports:{}},_b;function qU(){return _b||(_b=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(eg)),eg.exports}var tg={exports:{}},bb;function XU(){return bb||(bb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(tg)),tg.exports}var rg={exports:{}},Sb;function YU(){return Sb||(Sb=1,function(t,e){(function(r,n,s){t.exports=n(er(),En())})(Ht,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,o=s.enc,l=o.Hex,c=s.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var f=l.parse(u);return a.create({ciphertext:f})}}}(),r.format.Hex})}(rg)),rg.exports}var ng={exports:{}},Ab;function QU(){return Ab||(Ab=1,function(t,e){(function(r,n,s){t.exports=n(er(),ml(),gl(),xo(),En())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,o=[],l=[],c=[],u=[],f=[],h=[],p=[],g=[],v=[],y=[];(function(){for(var x=[],w=0;w<256;w++)w<128?x[w]=w<<1:x[w]=w<<1^283;for(var P=0,R=0,w=0;w<256;w++){var A=R^R<<1^R<<2^R<<3^R<<4;A=A>>>8^A&255^99,o[P]=A,l[A]=P;var _=x[P],m=x[_],S=x[m],I=x[A]*257^A*16843008;c[P]=I<<24|I>>>8,u[P]=I<<16|I>>>16,f[P]=I<<8|I>>>24,h[P]=I;var I=S*16843009^m*65537^_*257^P*16843008;p[A]=I<<24|I>>>8,g[A]=I<<16|I>>>16,v[A]=I<<8|I>>>24,y[A]=I,P?(P=_^x[x[x[S^_]]],R^=x[x[R]]):P=R=1}})();var b=[0,1,2,4,8,16,32,64,128,27,54],E=a.AES=i.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,P=w.words,R=w.sigBytes/4,A=this._nRounds=R+6,_=(A+1)*4,m=this._keySchedule=[],S=0;S<_;S++)S<R?m[S]=P[S]:(x=m[S-1],S%R?R>6&&S%R==4&&(x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255]):(x=x<<8|x>>>24,x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255],x^=b[S/R|0]<<24),m[S]=m[S-R]^x);for(var I=this._invKeySchedule=[],k=0;k<_;k++){var S=_-k;if(k%4)var x=m[S];else var x=m[S-4];k<4||S<=4?I[k]=x:I[k]=p[o[x>>>24]]^g[o[x>>>16&255]]^v[o[x>>>8&255]]^y[o[x&255]]}}},encryptBlock:function(x,w){this._doCryptBlock(x,w,this._keySchedule,c,u,f,h,o)},decryptBlock:function(x,w){var P=x[w+1];x[w+1]=x[w+3],x[w+3]=P,this._doCryptBlock(x,w,this._invKeySchedule,p,g,v,y,l);var P=x[w+1];x[w+1]=x[w+3],x[w+3]=P},_doCryptBlock:function(x,w,P,R,A,_,m,S){for(var I=this._nRounds,k=x[w]^P[0],C=x[w+1]^P[1],O=x[w+2]^P[2],D=x[w+3]^P[3],F=4,N=1;N<I;N++){var M=R[k>>>24]^A[C>>>16&255]^_[O>>>8&255]^m[D&255]^P[F++],L=R[C>>>24]^A[O>>>16&255]^_[D>>>8&255]^m[k&255]^P[F++],z=R[O>>>24]^A[D>>>16&255]^_[k>>>8&255]^m[C&255]^P[F++],j=R[D>>>24]^A[k>>>16&255]^_[C>>>8&255]^m[O&255]^P[F++];k=M,C=L,O=z,D=j}var M=(S[k>>>24]<<24|S[C>>>16&255]<<16|S[O>>>8&255]<<8|S[D&255])^P[F++],L=(S[C>>>24]<<24|S[O>>>16&255]<<16|S[D>>>8&255]<<8|S[k&255])^P[F++],z=(S[O>>>24]<<24|S[D>>>16&255]<<16|S[k>>>8&255]<<8|S[C&255])^P[F++],j=(S[D>>>24]<<24|S[k>>>16&255]<<16|S[C>>>8&255]<<8|S[O&255])^P[F++];x[w]=M,x[w+1]=L,x[w+2]=z,x[w+3]=j},keySize:256/32});n.AES=i._createHelper(E)}(),r.AES})}(ng)),ng.exports}var sg={exports:{}},Tb;function JU(){return Tb||(Tb=1,function(t,e){(function(r,n,s){t.exports=n(er(),ml(),gl(),xo(),En())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=a.extend({_doReset:function(){for(var b=this._key,E=b.words,x=[],w=0;w<56;w++){var P=l[w]-1;x[w]=E[P>>>5]>>>31-P%32&1}for(var R=this._subKeys=[],A=0;A<16;A++){for(var _=R[A]=[],m=u[A],w=0;w<24;w++)_[w/6|0]|=x[(c[w]-1+m)%28]<<31-w%6,_[4+(w/6|0)]|=x[28+(c[w+24]-1+m)%28]<<31-w%6;_[0]=_[0]<<1|_[0]>>>31;for(var w=1;w<7;w++)_[w]=_[w]>>>(w-1)*4+3;_[7]=_[7]<<5|_[7]>>>27}for(var S=this._invSubKeys=[],w=0;w<16;w++)S[w]=R[15-w]},encryptBlock:function(b,E){this._doCryptBlock(b,E,this._subKeys)},decryptBlock:function(b,E){this._doCryptBlock(b,E,this._invSubKeys)},_doCryptBlock:function(b,E,x){this._lBlock=b[E],this._rBlock=b[E+1],g.call(this,4,252645135),g.call(this,16,65535),v.call(this,2,858993459),v.call(this,8,16711935),g.call(this,1,1431655765);for(var w=0;w<16;w++){for(var P=x[w],R=this._lBlock,A=this._rBlock,_=0,m=0;m<8;m++)_|=f[m][((A^P[m])&h[m])>>>0];this._lBlock=A,this._rBlock=R^_}var S=this._lBlock;this._lBlock=this._rBlock,this._rBlock=S,g.call(this,1,1431655765),v.call(this,8,16711935),v.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),b[E]=this._lBlock,b[E+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(b,E){var x=(this._lBlock>>>b^this._rBlock)&E;this._rBlock^=x,this._lBlock^=x<<b}function v(b,E){var x=(this._rBlock>>>b^this._lBlock)&E;this._lBlock^=x,this._rBlock^=x<<b}n.DES=a._createHelper(p);var y=o.TripleDES=a.extend({_doReset:function(){var b=this._key,E=b.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=E.slice(0,2),w=E.length<4?E.slice(0,2):E.slice(2,4),P=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=p.createEncryptor(i.create(x)),this._des2=p.createEncryptor(i.create(w)),this._des3=p.createEncryptor(i.create(P))},encryptBlock:function(b,E){this._des1.encryptBlock(b,E),this._des2.decryptBlock(b,E),this._des3.encryptBlock(b,E)},decryptBlock:function(b,E){this._des3.decryptBlock(b,E),this._des2.encryptBlock(b,E),this._des1.decryptBlock(b,E)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(y)}(),r.TripleDES})}(sg)),sg.exports}var ag={exports:{}},wb;function ZU(){return wb||(wb=1,function(t,e){(function(r,n,s){t.exports=n(er(),ml(),gl(),xo(),En())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=a.RC4=i.extend({_doReset:function(){for(var u=this._key,f=u.words,h=u.sigBytes,p=this._S=[],g=0;g<256;g++)p[g]=g;for(var g=0,v=0;g<256;g++){var y=g%h,b=f[y>>>2]>>>24-y%4*8&255;v=(v+p[g]+b)%256;var E=p[g];p[g]=p[v],p[v]=E}this._i=this._j=0},_doProcessBlock:function(u,f){u[f]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,f=this._i,h=this._j,p=0,g=0;g<4;g++){f=(f+1)%256,h=(h+u[f])%256;var v=u[f];u[f]=u[h],u[h]=v,p|=u[(u[f]+u[h])%256]<<24-g*8}return this._i=f,this._j=h,p}n.RC4=i._createHelper(o);var c=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});n.RC4Drop=i._createHelper(c)}(),r.RC4})}(ag)),ag.exports}var ig={exports:{}},Cb;function e$(){return Cb||(Cb=1,function(t,e){(function(r,n,s){t.exports=n(er(),ml(),gl(),xo(),En())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.Rabbit=i.extend({_doReset:function(){for(var h=this._key.words,p=this.cfg.iv,g=0;g<4;g++)h[g]=(h[g]<<8|h[g]>>>24)&16711935|(h[g]<<24|h[g]>>>8)&4278255360;var v=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],y=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)y[g]^=v[g+4&7];if(p){var b=p.words,E=b[0],x=b[1],w=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,P=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,R=w>>>16|P&4294901760,A=P<<16|w&65535;y[0]^=w,y[1]^=R,y[2]^=P,y[3]^=A,y[4]^=w,y[5]^=R,y[6]^=P,y[7]^=A;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(h,p){var g=this._X;f.call(this),o[0]=g[0]^g[5]>>>16^g[3]<<16,o[1]=g[2]^g[7]>>>16^g[5]<<16,o[2]=g[4]^g[1]>>>16^g[7]<<16,o[3]=g[6]^g[3]>>>16^g[1]<<16;for(var v=0;v<4;v++)o[v]=(o[v]<<8|o[v]>>>24)&16711935|(o[v]<<24|o[v]>>>8)&4278255360,h[p+v]^=o[v]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,p=this._C,g=0;g<8;g++)l[g]=p[g];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var g=0;g<8;g++){var v=h[g]+p[g],y=v&65535,b=v>>>16,E=((y*y>>>17)+y*b>>>15)+b*b,x=((v&4294901760)*v|0)+((v&65535)*v|0);c[g]=E^x}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=i._createHelper(u)}(),r.Rabbit})}(ig)),ig.exports}var og={exports:{}},Ib;function t$(){return Ib||(Ib=1,function(t,e){(function(r,n,s){t.exports=n(er(),ml(),gl(),xo(),En())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.RabbitLegacy=i.extend({_doReset:function(){var h=this._key.words,p=this.cfg.iv,g=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],v=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var y=0;y<4;y++)f.call(this);for(var y=0;y<8;y++)v[y]^=g[y+4&7];if(p){var b=p.words,E=b[0],x=b[1],w=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,P=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,R=w>>>16|P&4294901760,A=P<<16|w&65535;v[0]^=w,v[1]^=R,v[2]^=P,v[3]^=A,v[4]^=w,v[5]^=R,v[6]^=P,v[7]^=A;for(var y=0;y<4;y++)f.call(this)}},_doProcessBlock:function(h,p){var g=this._X;f.call(this),o[0]=g[0]^g[5]>>>16^g[3]<<16,o[1]=g[2]^g[7]>>>16^g[5]<<16,o[2]=g[4]^g[1]>>>16^g[7]<<16,o[3]=g[6]^g[3]>>>16^g[1]<<16;for(var v=0;v<4;v++)o[v]=(o[v]<<8|o[v]>>>24)&16711935|(o[v]<<24|o[v]>>>8)&4278255360,h[p+v]^=o[v]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,p=this._C,g=0;g<8;g++)l[g]=p[g];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var g=0;g<8;g++){var v=h[g]+p[g],y=v&65535,b=v>>>16,E=((y*y>>>17)+y*b>>>15)+b*b,x=((v&4294901760)*v|0)+((v&65535)*v|0);c[g]=E^x}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=i._createHelper(u)}(),r.RabbitLegacy})}(og)),og.exports}var lg={exports:{}},kb;function r$(){return kb||(kb=1,function(t,e){(function(r,n,s){t.exports=n(er(),ml(),gl(),xo(),En())})(Ht,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function f(y,b){let E=b>>24&255,x=b>>16&255,w=b>>8&255,P=b&255,R=y.sbox[0][E]+y.sbox[1][x];return R=R^y.sbox[2][w],R=R+y.sbox[3][P],R}function h(y,b,E){let x=b,w=E,P;for(let R=0;R<o;++R)x=x^y.pbox[R],w=f(y,x)^w,P=x,x=w,w=P;return P=x,x=w,w=P,w=w^y.pbox[o],x=x^y.pbox[o+1],{left:x,right:w}}function p(y,b,E){let x=b,w=E,P;for(let R=o+1;R>1;--R)x=x^y.pbox[R],w=f(y,x)^w,P=x,x=w,w=P;return P=x,x=w,w=P,w=w^y.pbox[1],x=x^y.pbox[0],{left:x,right:w}}function g(y,b,E){for(let A=0;A<4;A++){y.sbox[A]=[];for(let _=0;_<256;_++)y.sbox[A][_]=c[A][_]}let x=0;for(let A=0;A<o+2;A++)y.pbox[A]=l[A]^b[x],x++,x>=E&&(x=0);let w=0,P=0,R=0;for(let A=0;A<o+2;A+=2)R=h(y,w,P),w=R.left,P=R.right,y.pbox[A]=w,y.pbox[A+1]=P;for(let A=0;A<4;A++)for(let _=0;_<256;_+=2)R=h(y,w,P),w=R.left,P=R.right,y.sbox[A][_]=w,y.sbox[A][_+1]=P;return!0}var v=a.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var y=this._keyPriorReset=this._key,b=y.words,E=y.sigBytes/4;g(u,b,E)}},encryptBlock:function(y,b){var E=h(u,y[b],y[b+1]);y[b]=E.left,y[b+1]=E.right},decryptBlock:function(y,b){var E=p(u,y[b],y[b+1]);y[b]=E.left,y[b+1]=E.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(v)}(),r.Blowfish})}(lg)),lg.exports}(function(t,e){(function(r,n,s){t.exports=n(er(),Mp(),RU(),FU(),ml(),NU(),gl(),pI(),tx(),OU(),mI(),MU(),LU(),BU(),rx(),UU(),xo(),En(),$U(),VU(),HU(),jU(),GU(),WU(),zU(),KU(),qU(),XU(),YU(),QU(),JU(),ZU(),e$(),t$(),r$())})(Ht,function(r){return r})})(hI);var n$=hI.exports;const Ki=fI(n$);class s${constructor(){this.encryptionKey="your-dev-key-here"}async encryptAndUploadPdf(e,r){try{if(console.log(" Starting PDF encryption for student:",r),console.log(" File details:",{name:e.name,size:e.size,type:e.type}),(!this.encryptionKey||this.encryptionKey==="your-dev-key-here")&&console.warn(" Using default encryption key - set VITE_PDF_ENCRYPTION_KEY in production"),!_t.currentUser)throw new Error("User not authenticated");if(console.log(" Current user:",_t.currentUser.uid),r){console.log(" Checking student access for:",r);try{if(!(await sr(Ze(qe,"students",r))).exists())throw new Error(`Student ${r} not found`);console.log(" Student document exists")}catch(l){throw console.error(" Student access check failed:",l),new Error(`Student access check failed: ${l.message}`)}}console.log(" Reading file as ArrayBuffer...");const n=await e.arrayBuffer();console.log(" ArrayBuffer read, size:",n.byteLength),console.log(" Converting to Base64...");const s=btoa(new Uint8Array(n).reduce((l,c)=>l+String.fromCharCode(c),""));console.log(" Base64 conversion complete, length:",s.length),console.log(" Encrypting content...");const i=Ki.AES.encrypt(s,this.encryptionKey).toString();console.log(" Encryption complete, length:",i.length);const a=`${CU()}.enc`;console.log(" Generated filename:",a),console.log(" Uploading to storage...");const o=gh(Cc,`students/${r}/${a}`);return console.log(" Storage path:",`students/${r}/${a}`),await F4(o,i),console.log(" Upload to storage successful"),console.log(" Storing metadata in Firestore..."),await jt(Ze(qe,"pdfMetadata",a),{originalName:e.name,studentId:r,uploadedBy:_t.currentUser.uid,uploadedAt:In(),accessCount:0,lastAccessed:null,encryptionVersion:"1.0",fileSize:e.size,mimeType:e.type}),console.log(" Metadata stored successfully"),a}catch(n){throw console.error(" PDF encryption failed:",n),console.error(" Error details:",{message:n.message,code:n.code,stack:n.stack}),new Error(`Failed to securely store PDF: ${n.message}`)}}async downloadAndDecryptPdf(e,r){try{if(console.log(" Starting secure PDF download process..."),console.log(" Verifying user access permissions..."),!await this.verifyAccess(r))throw new Error("Access denied");console.log(" Access permissions verified"),console.log(" Getting authentication token...");const{auth:s}=await Hs(async()=>{const{auth:h}=await Promise.resolve().then(()=>Ky);return{auth:h}},void 0),i=await s.currentUser.getIdToken(),a=`https://downloadstudentfile-zr6j2ycwuq-uc.a.run.app/downloadStudentFile?studentId=${r}&fileName=${e}`;console.log(" Downloading encrypted file from secure storage...");const o=await fetch(a,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Failed to fetch file: ${o.status} ${o.statusText}`);const l=await o.text();console.log(" Downloaded encrypted content, size:",l.length,"characters"),console.log(" Decrypting PDF content...");const c=Ki.AES.decrypt(l,this.encryptionKey).toString(Ki.enc.Utf8);console.log(" Converting to PDF format...");const u=atob(c),f=new Blob([new Uint8Array(u.split("").map(h=>h.charCodeAt(0)))],{type:"application/pdf"});return console.log(" PDF ready for viewing, size:",f.size,"bytes"),f}catch(n){throw console.error(" PDF download failed:",n),new Error("Failed to retrieve PDF: "+n.message)}}async verifyAccess(e){var r,n,s,i,a,o;try{const l=_t.currentUser;if(!l)return!1;const u=(await sr(Ze(qe,"users",l.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager")return((s=(n=(r=(await sr(Ze(qe,"students",e))).data())==null?void 0:r.app)==null?void 0:n.studentData)==null?void 0:s.caseManagerId)===l.uid;if(u.role==="teacher"){const h=((o=(a=(i=(await sr(Ze(qe,"students",e))).data())==null?void 0:i.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(h).includes(l.uid)}return!1}catch(l){return console.error("Access verification failed:",l),!1}}async logAccess(e,r){try{await jt(Ze(qe,"pdfAccessLogs",`${e}_${Date.now()}`),{fileId:e,studentId:r,userId:_t.currentUser.uid,userEmail:_t.currentUser.email,accessTime:In(),userAgent:navigator.userAgent,accessType:"download"})}catch(n){console.error("Failed to log access:",n)}}async updateAccessMetadata(e){try{const r=Ze(qe,"pdfMetadata",e),n=await sr(r);n.exists()&&await jt(r,{...n.data(),accessCount:(n.data().accessCount||0)+1,lastAccessed:In()},{merge:!0})}catch(r){console.error("Failed to update access metadata:",r)}}async getFileAccessHistory(e){try{const r=or(At(qe,"pdfAccessLogs"),Ur("fileId","==",e),hn("accessTime","desc"));return(await Gt(r)).docs.map(s=>s.data())}catch(r){return console.error("Failed to fetch access history:",r),[]}}}const k0=new s$;function nx(){const t=ae(!1),e=ae(!1),r=ae(null);return{uploadPdf:async(a,o)=>{t.value=!0,r.value=null;try{if(a.type!=="application/pdf")throw new Error("Only PDF files are allowed");if(a.size>10*1024*1024)throw new Error("File size must be less than 10MB");return await k0.encryptAndUploadPdf(a,o)}catch(l){throw r.value=l.message,l}finally{t.value=!1}},downloadPdf:async(a,o,l)=>{e.value=!0,r.value=null;try{const c=await k0.downloadAndDecryptPdf(a,o),u=window.URL.createObjectURL(c),f=window.open(u,"_blank","noopener,noreferrer");setTimeout(()=>{window.URL.revokeObjectURL(u)},5e3)}catch(c){throw r.value=c.message,c}finally{e.value=!1}},getAccessHistory:async a=>{try{return await k0.getFileAccessHistory(a)}catch(o){return r.value=o.message,[]}},isUploading:t,isDownloading:e,error:r}}const a$={class:"docs-item"},i$={key:0,class:"loading-spinner"},o$={key:0,class:"loading-spinner"},l$=["onClick"],c$={key:0,class:"loading-spinner"},u$={__name:"StudentDocsCell",props:{student:{type:Object,required:!0},getDocumentUrl:{type:Function,required:!0},getAdditionalDocuments:{type:Function,required:!0}},setup(t){const e=t,{downloadPdf:r}=nx(),n=ae({ataglance:!1,bip:!1}),s=async(a,o)=>{var l,c,u,f;try{if(!a){alert("File not found.");return}n.value[o]=!0;const h=((c=(l=e.student.app)==null?void 0:l.documents)==null?void 0:c.bipFileName)||((f=(u=e.student.app)==null?void 0:u.documents)==null?void 0:f.ataglanceFileName)||"document.pdf";await r(a,e.student.id,h)}catch(h){console.error("Error opening secure file:",h),alert("Error opening file. Please try again.")}finally{n.value[o]=!1}},i=async a=>{try{if(!a.pdfUrl){alert("File not found.");return}n.value[a.id]=!0,await r(a.pdfUrl,e.student.id,a.fileName)}catch(o){console.error("Error opening additional document:",o),alert("Error opening file. Please try again.")}finally{n.value[a.id]=!1}};return(a,o)=>(B(),U("td",null,[d("div",a$,[t.getDocumentUrl(t.student,"ataglancePdfUrl")?(B(),U("a",{key:0,href:"#",onClick:o[0]||(o[0]=Xr(l=>s(t.getDocumentUrl(t.student,"ataglancePdfUrl"),"ataglance"),["prevent"])),class:Qe(["doc-link",{loading:n.value.ataglance}])},[n.value.ataglance?(B(),U("div",i$,[Oe(q(dc),{size:14,class:"spin"})])):(B(),Qt(q(Wu),{key:1,size:16,class:"doc-icon"})),d("span",null,Y(n.value.ataglance?"Loading...":"At-A-Glance"),1)],2)):xe("",!0),t.getDocumentUrl(t.student,"bipPdfUrl")?(B(),U("a",{key:1,href:"#",onClick:o[1]||(o[1]=Xr(l=>s(t.getDocumentUrl(t.student,"bipPdfUrl"),"bip"),["prevent"])),class:Qe(["doc-link",{loading:n.value.bip}])},[n.value.bip?(B(),U("div",o$,[Oe(q(dc),{size:14,class:"spin"})])):(B(),Qt(q(Wu),{key:1,size:16,class:"doc-icon"})),d("span",null,Y(n.value.bip?"Loading...":"BIP"),1)],2)):xe("",!0),(B(!0),U(Pe,null,je(t.getAdditionalDocuments(t.student),l=>(B(),U("a",{key:l.id,href:"#",onClick:Xr(c=>i(l),["prevent"]),class:Qe(["doc-link",{loading:n.value[l.id]}])},[n.value[l.id]?(B(),U("div",c$,[Oe(q(dc),{size:14,class:"spin"})])):(B(),Qt(q(Wu),{key:1,size:16,class:"doc-icon"})),d("span",null,Y(n.value[l.id]?"Loading...":l.title),1)],10,l$))),128)),!t.getDocumentUrl(t.student,"ataglancePdfUrl")&&!t.getDocumentUrl(t.student,"bipPdfUrl")&&t.getAdditionalDocuments(t.student).length===0?(B(),U(Pe,{key:2},[we("")],64)):xe("",!0)])]))}},d$=xt(u$,[["__scopeId","data-v-90303efc"]]),f$={class:"actions-cell"},h$={class:"actions-content"},p$={class:"action-buttons"},m$=["title"],g$={__name:"StudentActionsCell",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!1},studentData:{type:Object,required:!1},getUserName:{type:Function,required:!0},formatDate:{type:Function,required:!0}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,n=be(()=>{var o;return(o=r.student)!=null&&o.updatedBy?r.getUserName(r.student.updatedBy):null}),s=be(()=>{var o;if(!((o=r.student)!=null&&o.updatedAt))return"";try{let l="";r.student.updatedAt.seconds?l=new Date(r.student.updatedAt.seconds*1e3).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit",hour:"numeric",minute:"2-digit",hour12:!0}):l=new Date(r.student.updatedAt).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit",hour:"numeric",minute:"2-digit",hour12:!0});const c=n.value?` by ${n.value}`:"";return`Last Updated: ${l}${c}`}catch(l){console.warn("Error formatting date in tooltip:",l);const c=new Date(r.student.updatedAt.seconds*1e3),u=n.value?` by ${n.value}`:"";return`Last Updated: ${c.toLocaleDateString()}${u}`}}),i=be(()=>{var u,f,h,p,g;if(!((u=r.currentUser)!=null&&u.role)||!r.student)return!1;const o=r.currentUser.role,l=r.currentUser.uid;return o==="paraeducator"||o==="teacher"?!1:o==="case_manager"?((h=(f=r.student.app)==null?void 0:f.studentData)==null?void 0:h.caseManagerId)===l:o==="service_provider"?(g=(p=r.student.app)==null?void 0:p.staffIds)==null?void 0:g.includes(l):["admin","school_admin","staff_edit","admin_504","sped_chair"].includes(o)}),a=be(()=>{var o;return!((o=r.currentUser)!=null&&o.role)||!r.student||!r.studentData?!1:An.canSendFeedback(r.currentUser.uid,r.currentUser.role,r.student,r.studentData)});return(o,l)=>{var c;return B(),U("td",f$,[d("div",h$,[d("div",p$,[i.value?(B(),U("button",{key:0,class:"edit-btn",onClick:l[0]||(l[0]=u=>o.$emit("edit",t.student.id)),title:"Edit Student"},[Oe(q(l7),{size:16})])):xe("",!0),d("button",{class:"email-btn",onClick:l[1]||(l[1]=u=>o.$emit("email",t.student.id)),title:"Email Student"},[Oe(q(t7),{size:16})]),a.value?(B(),U("button",{key:1,class:"teacher-feedback-btn",onClick:l[2]||(l[2]=u=>o.$emit("teacher-feedback",t.student.id)),title:"Send Teacher Feedback Form"},[Oe(q(tI),{size:16})])):xe("",!0)]),(c=t.student)!=null&&c.updatedAt?(B(),U("div",{key:0,class:"action-updated-date",title:s.value},Y(t.student.updatedAt.seconds?new Date(t.student.updatedAt.seconds*1e3).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}):new Date(t.student.updatedAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"})),9,m$)):xe("",!0)])])}}},v$=xt(g$,[["__scopeId","data-v-a57a20c6"]]),y$={key:0,class:"schedule-list"},x$={class:"period-assignment"},E$={class:"primary-line"},_$={class:"period-label"},b$={class:"primary-teacher"},S$={key:0,class:"coteaching-info"},A$=["title"],T$={key:1,class:"no-schedule"},w$={__name:"StudentScheduleCell",props:{student:{type:Object,required:!0},getSchedule:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0},getPeriodLabel:{type:Function,required:!1}},setup(t){const e=r=>r&&typeof r=="object"&&r.coTeaching&&r.teacherId;return(r,n)=>(B(),U("td",null,[t.getSchedule(t.student)?(B(),U("div",y$,[d("ul",null,[(B(!0),U(Pe,null,je(t.getSchedule(t.student),(s,i)=>(B(),U("li",{key:i,class:"schedule-period"},[d("div",x$,[d("div",E$,[d("span",_$,Y(t.getPeriodLabel?t.getPeriodLabel(i):i)+":",1),d("span",b$,Y(t.getUserInitialLastName(s.teacherId||s)),1)]),e(s)?(B(),U("div",S$,[d("span",{class:"coteaching-indicator",title:`Co-teach ${s.coTeaching.subject}`},Y(t.getUserInitialLastName(s.coTeaching.caseManagerId))+" (C"+Y(s.coTeaching.subject.charAt(0))+") ",9,A$)])):xe("",!0)])]))),128))])])):(B(),U("div",T$,""))]))}},C$={key:0,class:"services-section"},I$={class:"services-container"},k$={key:1,class:"services-section"},D$={class:"services-container"},P$={key:0,class:"service-provider-item"},R$={key:0,class:"service-provider-item"},F$={key:1,class:"service-provider-item"},N$={key:2,class:"service-provider-item"},O$={key:3,class:"service-provider-item"},M$={key:4,class:"service-provider-item"},L$={key:5,class:"service-provider-item"},B$={__name:"StudentServicesCell",props:{student:{type:Object,required:!0},appSettings:{type:Object,required:!1},getClassServices:{type:Function,required:!0},getOtherServices:{type:Function,required:!0},hasServiceProviders:{type:Function,required:!0},getServiceProviderId:{type:Function,required:!0},getProviderFieldName:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){return(e,r)=>(B(),U("td",null,[t.getClassServices(t.student).length>0||t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(B(),U(Pe,{key:0},[t.getClassServices(t.student).length>0?(B(),U("div",C$,[r[0]||(r[0]=d("strong",null,"Class Services:",-1)),d("div",I$,[(B(!0),U(Pe,null,je(t.getClassServices(t.student),n=>(B(),U("span",{key:n,class:"service-item"},Y(n),1))),128))])])):xe("",!0),t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(B(),U("div",k$,[r[1]||(r[1]=d("strong",null,"Related Services:",-1)),d("div",D$,[(B(!0),U(Pe,null,je(t.getOtherServices(t.student),n=>(B(),U("span",{key:n,class:"service-item"},Y(n),1))),128)),t.appSettings&&t.appSettings.value&&t.appSettings.value.serviceProviders?(B(!0),U(Pe,{key:0},je(t.appSettings.value.serviceProviders,n=>(B(),U(Pe,{key:n},[t.getServiceProviderId(t.student,t.getProviderFieldName(n))?(B(),U("span",P$,Y(n)+" ("+Y(t.getUserInitialLastName(t.getServiceProviderId(t.student,t.getProviderFieldName(n))))+") ",1)):xe("",!0)],64))),128)):(B(),U(Pe,{key:1},[t.getServiceProviderId(t.student,"speechId")?(B(),U("span",R$,"SP ("+Y(t.getUserInitialLastName(t.getServiceProviderId(t.student,"speechId")))+")",1)):xe("",!0),t.getServiceProviderId(t.student,"mhId")?(B(),U("span",F$,"MH ("+Y(t.getUserInitialLastName(t.getServiceProviderId(t.student,"mhId")))+")",1)):xe("",!0),t.getServiceProviderId(t.student,"otId")?(B(),U("span",N$,"OT ("+Y(t.getUserInitialLastName(t.getServiceProviderId(t.student,"otId")))+")",1)):xe("",!0),t.getServiceProviderId(t.student,"ptId")?(B(),U("span",O$,"PT ("+Y(t.getUserInitialLastName(t.getServiceProviderId(t.student,"ptId")))+")",1)):xe("",!0),t.getServiceProviderId(t.student,"scId")?(B(),U("span",M$,"SC ("+Y(t.getUserInitialLastName(t.getServiceProviderId(t.student,"scId")))+")",1)):xe("",!0),t.getServiceProviderId(t.student,"trId")?(B(),U("span",L$,"TR ("+Y(t.getUserInitialLastName(t.getServiceProviderId(t.student,"trId")))+")",1)):xe("",!0)],64))])])):xe("",!0)],64)):(B(),U(Pe,{key:1},[we("  ")],64))]))}},U$=["innerHTML"],$$={key:2},Db={__name:"AccommodationsCell",props:{student:{type:Object,required:!0},fieldName:{type:String,required:!0},flagType:{type:String,required:!0},flagText:{type:String,required:!0},flagClass:{type:String,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(B(),U("td",{class:Qe(["instruction-cell",{"with-flag":t.getFlagValue(t.student,t.flagType)}])},[t.getFlagValue(t.student,t.flagType)?(B(),U("div",{key:0,class:Qe(["flag-overlay",t.flagClass])},Y(t.flagText),3)):xe("",!0),q(it)(t.student,t.fieldName)?(B(),U("div",{key:1,innerHTML:t.formatListFromText(q(it)(t.student,t.fieldName))},null,8,U$)):(B(),U("div",$$,""))],2))}},V$={class:"student-name"},H$={class:"std-info-subheading"},j$={key:0,class:"schedule-list"},G$={class:"period-assignment"},W$={class:"primary-line"},z$={class:"period-label"},K$={class:"primary-teacher"},q$={key:0,class:"coteaching-info"},X$=["title"],Y$={key:1,class:"no-schedule"},Q$={key:0,class:"flag-overlay flag-separate-setting"},J$={key:1,class:"bullet-list"},Z$=["innerHTML"],eV={key:2},tV={class:"student-name"},rV=["title"],nV={class:"std-info-subheading"},sV={class:"student-dates print"},aV={key:0,class:"direct-assignment-badge"},zf={__name:"StudentTable",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})},currentUser:{type:Object,default:null},studentData:{type:Object,default:null},testingView:{type:Boolean,default:!1},aideSchedule:{type:Object,default:()=>({})}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,{appSettings:n,getUserName:s,getUserInitialLastName:i,formatDate:a,getMeetingUrgencyClass:o,getReviewUrgencyClass:l,getReevalUrgencyClass:c,getCaseManagerId:u,getFlagValue:f,getDocumentUrl:h,getSchedule:p,getClassServices:g,getOtherServices:v,hasServiceProviders:y,getServiceProviderId:b,getProviderFieldName:E,isDirectAssignment:x,formatListFromText:w,getPeriodLabel:P,getAdditionalDocuments:R}=bU(r),A=_=>_&&typeof _=="object"&&_.coTeaching&&_.teacherId;return Vt(()=>r.student,_=>{var m,S,I,k,C,O,D;_&&Object.keys(_).length>0&&(form.schedule=((S=(m=_.app)==null?void 0:m.schedule)==null?void 0:S.periods)||_.schedule||((k=(I=_.aeries)==null?void 0:I.schedule)==null?void 0:k.periods)||{},console.log("StudentForm DEBUG - form.schedule:",form.schedule),console.log("StudentForm DEBUG - aeries.schedule:",(C=r.student.aeries)==null?void 0:C.schedule),console.log("StudentForm DEBUG - app.schedule.periods:",(D=(O=r.student.app)==null?void 0:O.schedule)==null?void 0:D.periods))},{immediate:!0,deep:!0}),(_,m)=>(B(),U("table",{class:Qe(["students-table",{"testing-view":t.testingView}])},[d("thead",null,[d("tr",null,[t.testingView?(B(),U(Pe,{key:0},[m[0]||(m[0]=d("th",{class:"print"},"Student Info",-1)),m[1]||(m[1]=d("th",{class:"print"},"Schedule",-1)),m[2]||(m[2]=d("th",{class:"print"},"Assessment Accommodations",-1))],64)):(B(),U(Pe,{key:1},[m[3]||(m[3]=d("th",{class:"print"},"Student Info",-1)),m[4]||(m[4]=d("th",{class:"print"},"Services",-1)),m[5]||(m[5]=d("th",{class:"print"},"Schedule",-1)),m[6]||(m[6]=d("th",{class:"print"},"Instruction Accommodations",-1)),m[7]||(m[7]=d("th",{class:"print"},"Assessment Accommodations",-1)),m[8]||(m[8]=d("th",{class:"print"},"Docs",-1)),m[9]||(m[9]=d("th",{class:"print"},"Actions",-1))],64))])]),d("tbody",null,[(B(!0),U(Pe,null,je(t.students,S=>{var I;return B(),U("tr",{key:S.id},[t.testingView?(B(),U(Pe,{key:0},[d("td",null,[d("div",V$,[d("strong",null,Y(q(it)(S,"firstName"))+" "+Y(q(it)(S,"lastName")),1)]),d("div",H$,[d("div",null,"Grd: "+Y(q(it)(S,"grade"))+" | Prg: "+Y(q(it)(S,"plan")),1),d("div",null,"CM: "+Y(q(s)(q(u)(S))),1)])]),d("td",null,[q(p)(S)?(B(),U("div",j$,[d("ul",null,[(B(!0),U(Pe,null,je(q(p)(S),(k,C)=>(B(),U("li",{key:C,class:"schedule-period"},[d("div",G$,[d("div",W$,[d("span",z$,Y(q(P)?q(P)(C):C)+":",1),d("span",K$,Y(q(i)(k.teacherId||k)),1)]),A(k)?(B(),U("div",q$,[d("span",{class:"coteaching-indicator",title:`Co-teach ${k.coTeaching.subject}`},Y(q(i)(k.coTeaching.caseManagerId))+" (C"+Y(k.coTeaching.subject.charAt(0))+") ",9,X$)])):xe("",!0)])]))),128))])])):(B(),U("div",Y$,""))]),d("td",{class:Qe(["instruction-cell",{"with-flag":q(f)(S,"flag2")}])},[q(f)(S,"flag2")?(B(),U("div",Q$,"Separate setting")):xe("",!0),q(it)(S,"assessment")?(B(),U("div",J$,[d("div",{innerHTML:q(w)(q(it)(S,"assessment"))},null,8,Z$)])):(B(),U("div",eV,""))],2)],64)):(B(),U(Pe,{key:1},[d("td",null,[d("div",tV,[d("strong",null,Y(q(it)(S,"firstName"))+" "+Y(q(it)(S,"lastName")),1),d("span",{class:"data-source",title:`Data source: ${q(lu)(S,"firstName")}`},Y(q(lu)(S,"firstName")==="Override"?"":q(lu)(S,"firstName")==="App"?"":q(lu)(S,"firstName")==="Aeries"?"":q(lu)(S,"firstName")==="SEIS"?"":""),9,rV)]),d("div",nV,[d("div",null,"Grd: "+Y(q(it)(S,"grade"))+" | Prg: "+Y(q(it)(S,"plan")),1),d("div",null,"CM: "+Y(q(s)(q(u)(S))),1)]),d("div",sV,[d("span",{class:Qe(["badge badge-review plan-review",q(l)(S)])},"PR: "+Y(q(a)(q(it)(S,"reviewDate"))),3),d("span",{class:Qe(["badge badge-reeval reeval-due",q(c)(S)])},"RE: "+Y(q(a)(q(it)(S,"reevalDate"))),3),d("span",{class:Qe(["badge badge-meeting meeting-date",[q(o)(S),q(it)(S,"meetingDate")?"date-set":""]])},"  "+Y(q(a)(q(it)(S,"meetingDate"))||"Not set"),3)]),((I=t.currentUser)==null?void 0:I.role)==="paraeducator"&&q(x)(S.id)?(B(),U("div",aV,m[10]||(m[10]=[d("span",{class:"badge badge-direct"},"Direct Assignment",-1)]))):xe("",!0)]),Oe(B$,{student:S,"app-settings":q(n),"get-class-services":q(g),"get-other-services":q(v),"has-service-providers":q(y),"get-service-provider-id":q(b),"get-provider-field-name":q(E),"get-user-initial-last-name":q(i)},null,8,["student","app-settings","get-class-services","get-other-services","has-service-providers","get-service-provider-id","get-provider-field-name","get-user-initial-last-name"]),Oe(w$,{student:S,"get-schedule":q(p),"get-user-initial-last-name":q(i),"get-period-label":q(P)},null,8,["student","get-schedule","get-user-initial-last-name","get-period-label"]),Oe(Db,{student:S,"field-name":"instruction","flag-type":"flag1","flag-text":"Preferential Seating","flag-class":"flag-preferential-seating","get-flag-value":q(f),"format-list-from-text":q(w)},null,8,["student","get-flag-value","format-list-from-text"]),Oe(Db,{student:S,"field-name":"assessment","flag-type":"flag2","flag-text":"Separate Setting","flag-class":"flag-separate-setting","get-flag-value":q(f),"format-list-from-text":q(w)},null,8,["student","get-flag-value","format-list-from-text"]),Oe(d$,{student:S,"get-document-url":q(h),"get-additional-documents":q(R)},null,8,["student","get-document-url","get-additional-documents"]),Oe(v$,{student:S,"current-user":t.currentUser,"student-data":t.studentData,"get-user-name":q(s),"format-date":q(a),onEdit:k=>_.$emit("edit",S.id),onEmail:k=>_.$emit("email",S.id),onTeacherFeedback:k=>_.$emit("teacher-feedback",S.id)},null,8,["student","current-user","student-data","get-user-name","format-date","onEdit","onEmail","onTeacherFeedback"])],64))])}),128))])],2))}};function iV(t,e){const{appSettings:r,loadAppSettings:n,loading:s,error:i}=Ns(),a=xn(),o=ae(!1);Wt(async()=>{try{console.log("useStudentForm: Starting to load app settings..."),await n(),console.log("useStudentForm: App settings loaded successfully:",r.value)}catch(D){console.error("useStudentForm: Error loading app settings:",D)}});const l=be(()=>{var F;const D=((F=r.value)==null?void 0:F.numPeriods)||7;return Array.from({length:D},(N,M)=>M+1)}),c=be(()=>{var D;return(D=r.value)!=null&&D.grades&&r.value.grades.length>0?(console.log("useStudentForm: Using app settings grades:",r.value.grades),r.value.grades):(console.log("useStudentForm: Using fallback grades: [7, 8]"),["7","8"])}),u=be(()=>{var D;if((D=r.value)!=null&&D.classServices&&r.value.classServices.length>0){const F=r.value.classServices.filter(N=>N.enabledSubcategories&&N.enabledSubcategories.length>0);return console.log("useStudentForm: Available class services:",F.length,"services"),F}return console.log("useStudentForm: No class services available"),[]}),f=be(()=>{var D;return(D=r.value)!=null&&D.serviceProviders&&r.value.serviceProviders.length>0?(console.log("useStudentForm: Using app settings service providers:",r.value.serviceProviders.length,"providers"),r.value.serviceProviders):(console.log("useStudentForm: No service providers configured in app settings"),[])}),h=be(()=>{var D;return(D=r.value)!=null&&D.customServiceProviders?r.value.customServiceProviders:[]}),p=be(()=>{let D=t.users.userRoles?t.users.userRoles:{teachers:t.users.teachers||[],caseManagers:t.users.caseManagers||[],speech:t.users.speech||[],ot:t.users.ot||[],mh:t.users.mh||[]};return D.teachers&&(D={...D,teachers:D.teachers.map(F=>({...F,id:String(F.id)}))}),D}),g=D=>{var F,N,M,L,z,j,H,G,W,ne,de,se,ce,te,Z,ye,J,X,Q,fe,ve,ie,ee,ge,Te,Ie,Ae,We,De,He,$e,ke,Ke,_e,Ee,Se,Me,ze,lt,vt,bt,$t,ft,ct,ht,Ct,Rt,gr;return{ssid:it(D,"ssid")||D.id||"",firstName:it(D,"firstName")||"",lastName:it(D,"lastName")||"",grade:it(D,"grade")||"7",plan:it(D,"plan")||"IEP",reviewDate:it(D,"reviewDate")||"",reevalDate:it(D,"reevalDate")||"",meetingDate:it(D,"meetingDate")||"",caseManagerId:it(D,"caseManagerId")||D.caseManagerId||D.casemanager_id||"",schedule:((N=(F=D.app)==null?void 0:F.schedule)==null?void 0:N.periods)||((L=(M=D.aeries)==null?void 0:M.schedule)==null?void 0:L.periods)||D.schedule||{},services:((j=(z=D.app)==null?void 0:z.schedule)==null?void 0:j.classServices)||D.services||[],speechId:((G=(H=D.app)==null?void 0:H.providers)==null?void 0:G.speechId)||D.speechId||D.speech_id||"",otId:((ne=(W=D.app)==null?void 0:W.providers)==null?void 0:ne.otId)||D.otId||D.ot_id||"",mhId:((se=(de=D.app)==null?void 0:de.providers)==null?void 0:se.mhId)||D.mhId||D.mh_id||"",ptId:((te=(ce=D.app)==null?void 0:ce.providers)==null?void 0:te.ptId)||D.ptId||D.pt_id||"",scId:((ye=(Z=D.app)==null?void 0:Z.providers)==null?void 0:ye.scId)||D.scId||D.sc_id||"",trId:((X=(J=D.app)==null?void 0:J.providers)==null?void 0:X.trId)||D.trId||D.tr_id||"",audId:((fe=(Q=D.app)==null?void 0:Q.providers)==null?void 0:fe.audId)||D.audId||D.aud_id||"",viId:((ie=(ve=D.app)==null?void 0:ve.providers)==null?void 0:ie.viId)||D.viId||D.vi_id||"",atId:((ge=(ee=D.app)==null?void 0:ee.providers)==null?void 0:ge.atId)||D.atId||D.at_id||"",dhhId:((Ie=(Te=D.app)==null?void 0:Te.providers)==null?void 0:Ie.dhhId)||D.dhhId||D.dhh_id||"",omId:((We=(Ae=D.app)==null?void 0:Ae.providers)==null?void 0:We.omId)||D.omId||D.om_id||"",bisId:((He=(De=D.app)==null?void 0:De.providers)==null?void 0:He.bisId)||D.bisId||D.bis_id||"",hnId:((ke=($e=D.app)==null?void 0:$e.providers)==null?void 0:ke.hnId)||D.hnId||D.hn_id||"",swId:((_e=(Ke=D.app)==null?void 0:Ke.providers)==null?void 0:_e.swId)||D.swId||D.sw_id||"",instruction:it(D,"instruction")||"",assessment:it(D,"assessment")||"",flag1:((Se=(Ee=D.app)==null?void 0:Ee.flags)==null?void 0:Se.flag1)||D.flag1||!1,flag2:((ze=(Me=D.app)==null?void 0:Me.flags)==null?void 0:ze.flag2)||D.flag2||!1,ataglancePdfUrl:((vt=(lt=D.app)==null?void 0:lt.documents)==null?void 0:vt.ataglancePdfUrl)||D.ataglancePdfUrl||D.ataglance_pdf_url||"",bipPdfUrl:(($t=(bt=D.app)==null?void 0:bt.documents)==null?void 0:$t.bipPdfUrl)||D.bipPdfUrl||D.bip_pdf_url||"",ataglanceFileName:((ct=(ft=D.app)==null?void 0:ft.documents)==null?void 0:ct.ataglanceFileName)||D.ataglanceFileName||"",bipFileName:((Ct=(ht=D.app)==null?void 0:ht.documents)==null?void 0:Ct.bipFileName)||D.bipFileName||"",bipFile:null,ataglanceFile:null,removeBipFile:!1,removeAtaglanceFile:!1,additionalDocuments:((gr=(Rt=D.app)==null?void 0:Rt.documents)==null?void 0:gr.additionalDocuments)||[]}},v=Fs(g(t.student||{})),y=D=>{const F=[];return D&&typeof D=="object"&&Object.entries(D).forEach(([N,M])=>{if(M&&typeof M=="object"&&M.coTeaching){const L=M.coTeaching.subject;L&&F.push(`Co-teach: ${L}`)}}),F},b=()=>{const D=y(v.schedule),F=v.services.filter(N=>!N.startsWith("Co-teach:"));v.services=[...F,...D]};Vt(()=>v.schedule,()=>{b()},{deep:!0}),Vt(()=>t.student,(D,F)=>{if(D&&Object.keys(D).length>0){const N=!F||Object.keys(F).length===0,M=D.id!==(F==null?void 0:F.id);if(N||M){console.log(" useStudentForm DEBUG - Student data changed, updating form:",D.id),console.log(" useStudentForm DEBUG - Student data:",{firstName:it(D,"firstName"),lastName:it(D,"lastName"),plan:it(D,"plan"),caseManagerId:it(D,"caseManagerId"),rawStudent:D});const L=g(D);Object.assign(v,L),b(),console.log(" useStudentForm DEBUG - Form updated:",{plan:v.plan,caseManagerId:v.caseManagerId,firstName:v.firstName,lastName:v.lastName})}}},{immediate:!0,deep:!0}),Vt(()=>r.value,D=>{console.log("useStudentForm: App settings watcher triggered:",D),D!=null&&D.grades&&D.grades.length>0&&(D.grades.includes(v.grade)||(v.grade=D.grades[0]||"7"))},{immediate:!0,deep:!0});const E=(D,F)=>{const N=D.target.files[0]||null;if(N){const M=sl(N,{allowedTypes:["pdf"],maxSize:10485760,fieldName:F==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!M.isValid){alert(M.error),D.target.value="";return}const L=Hr(N.name);if(!L.isSafe){alert(`File name contains potentially dangerous content: ${L.threats.join(", ")}`),D.target.value="";return}}v[F]=N},x=D=>{D.preventDefault(),D.stopPropagation(),v.removeBipFile=!0,v.bipFile=null},w=D=>{D.preventDefault(),D.stopPropagation(),v.removeAtaglanceFile=!0,v.ataglanceFile=null},P=D=>{if(!D||D.trim().length===0||D.trim().length>24)throw new Error("Title must be between 1 and 24 characters");if(2+v.additionalDocuments.length>=10)throw new Error("Maximum of 10 documents allowed (including BIP and At-A-Glance)");const N={id:crypto.randomUUID(),title:D.trim(),pdfUrl:"",fileName:"",toRemove:!1};return v.additionalDocuments.push(N),N.id},R=D=>{const F=v.additionalDocuments.find(N=>N.id===D);F&&(F.toRemove=!0)},A=D=>{const F=v.additionalDocuments.find(N=>N.id===D);F&&(F.toRemove=!1)},_=D=>{const F=v.additionalDocuments.findIndex(N=>N.id===D);F!==-1&&v.additionalDocuments.splice(F,1)},m={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"},S=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],I=D=>{var N;if((N=r.value)!=null&&N.serviceProviders&&Array.isArray(r.value.serviceProviders)){const M=(r.value.serviceProvidersDetails||S).find(L=>L.abbreviation===D);if(M)return M.name+" ("+D+")"}const F=S.find(M=>M.abbreviation===D);return F?F.name+" ("+D+")":D},k=D=>{const N={SLP:"speech",OT:"ot",MH:"mh",PT:"pt",SC:"sc",TR:"tr",AUD:"aud",VI:"vi",AT:"at",DHH:"dhh","O&M":"om",BIS:"bis",HN:"hn",SW:"sw"}[D]||D.toLowerCase();return p.value[N]||[]},C=()=>{const D=lI(v),F={app:{studentData:{firstName:D.firstName,lastName:D.lastName,grade:D.grade,plan:D.plan,caseManagerId:D.caseManagerId}}},N=oI(F,{isNew:t.mode==="new"});if(!N.isValid)return alert(`Please fix the following errors:

${N.errors.join(`
`)}`),!1;const M=["firstName","lastName","instruction","assessment"];for(const L of M)if(v[L]){const z=Hr(v[L]);if(!z.isSafe)return alert(`Security threat detected in ${L}: ${z.threats.join(", ")}`),!1}return Object.assign(v,D),!0};return{form:v,isSaving:o,appSettings:r,appSettingsLoading:s,appSettingsError:i,periods:l,gradeOptions:c,availableClassServices:u,serviceProviders:f,customServiceProviders:h,userRoles:p,onFileChange:E,removeBipFile:x,removeAtaglanceFile:w,addAdditionalDocument:P,removeAdditionalDocument:R,undoRemoveAdditionalDocument:A,deleteAdditionalDocument:_,providerFieldMap:m,getProviderLabel:I,getProviderUsers:k,handleSubmit:async()=>{var D,F,N,M,L;try{if(o.value){console.log("Form submission already in progress, ignoring duplicate");return}if(console.log(" Form submitted:",{plan:v.plan,caseManagerId:v.caseManagerId,firstName:v.firstName,lastName:v.lastName,mode:t.mode,studentId:(D=t.student)==null?void 0:D.id}),o.value=!0,console.log(" AUTH DEBUG - Current user:",{uid:(F=_t.currentUser)==null?void 0:F.uid,email:(N=_t.currentUser)==null?void 0:N.email,claims:await((M=_t.currentUser)==null?void 0:M.getIdTokenResult())}),!C()){o.value=!1;return}const z=v.services.filter(se=>se&&se.includes(":")),j={};console.log(" FORM SCHEDULE DEBUG - Complete form.schedule:",JSON.stringify(v.schedule,null,2)),console.log(" FORM SCHEDULE DEBUG - periods.value:",l.value),l.value.forEach(se=>{if(console.log(` FORM SCHEDULE DEBUG - Period ${se} exists:`,!!v.schedule[se],"Value:",v.schedule[se]),v.schedule[se]){const ce=v.schedule[se];console.log(` SCHEDULE DEBUG - Period ${se}:`,{type:typeof ce,data:ce,hasCoTeaching:!!(ce&&ce.coTeaching),hasCaseManagerId:!!(ce&&ce.coTeaching&&ce.coTeaching.caseManagerId)}),typeof ce=="string"?j[se]=ce:typeof ce=="object"&&ce!==null&&(ce.coTeaching&&ce.coTeaching.caseManagerId?(console.log(` SCHEDULE DEBUG - Period ${se} has co-teaching, preserving structure`),j[se]={teacherId:ce.teacherId,coTeaching:{caseManagerId:ce.coTeaching.caseManagerId,subject:ce.coTeaching.subject||""}}):(console.log(` SCHEDULE DEBUG - Period ${se} converting to simple format`),j[se]=ce.teacherId||String(ce)||ce))}}),console.log(" Schedule Composition Debug:"),console.log("Form schedule before:",JSON.stringify(v.schedule,null,2)),console.log("Composed schedule after:",JSON.stringify(j,null,2)),console.log("Composed data:",{classServices:z,schedule:j});let H=v.bipPdfUrl||null,G=v.ataglancePdfUrl||null;if(console.log(" Form submission - PDF URLs:",{bipPdfUrl:H,ataglancePdfUrl:G,formBipPdfUrl:v.bipPdfUrl,formAtaglancePdfUrl:v.ataglancePdfUrl,bipFileName:v.bipFileName,ataglanceFileName:v.ataglanceFileName,bipFile:v.bipFile,ataglanceFile:v.ataglanceFile}),v.removeBipFile&&(console.log("Removing BIP file..."),H)){try{const se=ae(Cc,`students/${t.student.id||"temp"}/${H}`);await Dv(se),await deleteDoc(Ze(qe,"pdfMetadata",H)),console.log("Secure BIP file deleted:",H)}catch(se){console.warn("Error deleting secure BIP file:",se)}H=null}if(v.removeAtaglanceFile&&(console.log("Removing At-A-Glance file..."),G)){try{const se=ae(Cc,`students/${t.student.id||"temp"}/${G}`);await Dv(se),await deleteDoc(Ze(qe,"pdfMetadata",G)),console.log("Secure At-A-Glance file deleted:",G)}catch(se){console.warn("Error deleting secure At-A-Glance file:",se)}G=null}const W={studentData:{firstName:v.firstName,lastName:v.lastName,grade:v.grade,plan:v.plan,caseManagerId:v.caseManagerId},dates:{reviewDate:v.reviewDate,reevalDate:v.reevalDate,meetingDate:v.meetingDate},schedule:{periods:j,classServices:z},providers:{speechId:v.speechId,otId:v.otId,mhId:v.mhId,ptId:v.ptId,scId:v.scId,trId:v.trId,audId:v.audId,viId:v.viId,atId:v.atId,dhhId:v.dhhId,omId:v.omId,bisId:v.bisId,hnId:v.hnId,swId:v.swId},accommodations:{instruction:v.instruction,assessment:v.assessment},flags:{flag1:v.flag1,flag2:v.flag2},documents:{ataglancePdfUrl:G,bipPdfUrl:H,bipFileName:v.bipFileName||null,ataglanceFileName:v.ataglanceFileName||null,additionalDocuments:v.additionalDocuments.filter(se=>!se.toRemove&&se.pdfUrl).map(se=>({id:se.id,title:se.title,pdfUrl:se.pdfUrl,fileName:se.fileName,uploadDate:se.uploadDate||new Date().toISOString()}))}};console.log(" Documents being saved:",{ataglancePdfUrl:G,bipPdfUrl:H,bipFileName:v.bipFileName||null,ataglanceFileName:v.ataglanceFileName||null}),console.log("Saving payload:",W);const ne={app:W,updatedAt:In(),updatedBy:((L=a.currentUser)==null?void 0:L.uid)||null};console.log("Saving payload:",ne);let de=null;if(t.mode==="edit"&&t.student.id)console.log("Updating existing student:",t.student.id),await jt(Ze(qe,"students",t.student.id),ne,{merge:!0}),de=t.student.id,console.log("Student updated successfully"),await rn.logStudentAccess(t.student.id,"edit",{fields:Object.keys(W.studentData||{}),hasDocuments:!!(G||H),formMode:"edit"});else{if(console.log("Adding new student"),!v.ssid||v.ssid.trim()===""){alert("SSID is required for new students");return}const se=v.ssid.trim();ne.app.studentData.ssid=se;const ce=Ze(At(qe,"students"));ne.createdAt=In(),await jt(ce,ne),de=ce.id,ne.id=de,console.log("Student added successfully with ID:",de,"SSID:",se),await rn.logStudentAccess(de,"create",{ssid:se,fields:Object.keys(W.studentData||{}),hasDocuments:!!(G||H),formMode:"create"})}e("saved",ne),e("close")}catch(z){console.error("Error saving student:",z),console.error("Error details:",{code:z.code,message:z.message,stack:z.stack}),alert(`Error saving student: ${z.message||z}. Please try again.`)}finally{o.value=!1}},validateForm:C}}const oV={class:"form-col"},lV={class:"inner-grid-3"},cV={key:0,class:"ssid-field"},uV=["value"],dV=["value"],fV={__name:"StudentBasicInfo",props:{form:{type:Object,required:!0},mode:{type:String,default:"new"},gradeOptions:{type:Array,required:!0},userRoles:{type:Object,required:!0}},setup(t){return(e,r)=>(B(),U("fieldset",oV,[r[21]||(r[21]=d("legend",null,"Student Info",-1)),d("div",lV,[t.mode==="new"?(B(),U("label",cV,[r[9]||(r[9]=d("span",{class:"field-label"},"SSID (State Student ID) *",-1)),Be(d("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.ssid=n),type:"text",required:"",placeholder:"Enter student SSID",class:"ssid-input"},null,512),[[gt,t.form.ssid]]),r[10]||(r[10]=d("div",{class:"field-help"},[d("strong",null,"Required:"),we(" This can be found in your Student Information System (SIS) such as Aeries, or in SEIS. The SSID is used to link student data across different systems. ")],-1))])):xe("",!0),d("label",null,[r[11]||(r[11]=we(" First Name: ")),Be(d("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.firstName=n),type:"text",required:""},null,512),[[gt,t.form.firstName]])]),d("label",null,[r[12]||(r[12]=we(" Last Name: ")),Be(d("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>t.form.lastName=n),type:"text",required:""},null,512),[[gt,t.form.lastName]])]),d("label",null,[r[13]||(r[13]=we(" Grade: ")),Be(d("select",{"onUpdate:modelValue":r[3]||(r[3]=n=>t.form.grade=n)},[(B(!0),U(Pe,null,je(t.gradeOptions,n=>(B(),U("option",{key:n,value:n},Y(n),9,uV))),128))],512),[[cr,t.form.grade]])]),d("label",null,[r[15]||(r[15]=we(" Plan Type: ")),Be(d("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>t.form.plan=n)},r[14]||(r[14]=[d("option",{value:"IEP"},"IEP",-1),d("option",{value:"504"},"504",-1)]),512),[[cr,t.form.plan]])]),d("label",null,[r[16]||(r[16]=we(" Review Date: ")),Be(d("input",{"onUpdate:modelValue":r[5]||(r[5]=n=>t.form.reviewDate=n),type:"date"},null,512),[[gt,t.form.reviewDate]])]),d("label",null,[r[17]||(r[17]=we(" Reevaluation Date: ")),Be(d("input",{"onUpdate:modelValue":r[6]||(r[6]=n=>t.form.reevalDate=n),type:"date"},null,512),[[gt,t.form.reevalDate]])]),d("label",null,[r[18]||(r[18]=we(" Meeting Date: ")),Be(d("input",{"onUpdate:modelValue":r[7]||(r[7]=n=>t.form.meetingDate=n),type:"date"},null,512),[[gt,t.form.meetingDate]])]),d("label",null,[r[20]||(r[20]=we(" Case Manager: ")),Be(d("select",{"onUpdate:modelValue":r[8]||(r[8]=n=>t.form.caseManagerId=n)},[r[19]||(r[19]=d("option",{value:""},"-- Select Case Manager --",-1)),(B(!0),U(Pe,null,je(t.userRoles.caseManagers,n=>(B(),U("option",{key:n.id,value:n.id},Y(n.name||n.email||n.id),9,dV))),128))],512),[[cr,t.form.caseManagerId]])])])]))}},hV=xt(fV,[["__scopeId","data-v-5eadce29"]]),pV={class:"form-col"},mV={class:"periods-container"},gV={class:"period-main"},vV={class:"period-label"},yV=["value","onChange"],xV=["value"],EV=["disabled","onClick"],_V={key:0,class:"coteaching-config"},bV={class:"coteaching-info"},SV={class:"classroom-teacher"},AV={class:"case-manager-name"},TV={class:"config-row"},wV=["value","onChange"],CV=["value"],IV={class:"config-row"},kV=["value","onChange"],DV=["value"],PV={__name:"StudentSchedule",props:{form:{type:Object,required:!0},periods:{type:Array,required:!0},userRoles:{type:Object,required:!0},appSettings:{type:Object,default:()=>({})}},setup(t){const e=t,{getLabel:r}=yo(),n=be(()=>(e.userRoles.caseManagers||[]).filter(b=>b.id&&(b.role==="case_manager"||b.role==="admin_504"||b.role==="administrator_504_CM"||b.role==="sped_chair"||b.roles&&b.roles.includes("case_manager")))),s=be(()=>{var y;if((y=e.appSettings)!=null&&y.classServices){const b=e.appSettings.classServices.find(E=>E.name==="Co-teach"&&E.enabledSubcategories);if(b)return b.enabledSubcategories.sort()}return["English","Math","History","Science"]}),i=y=>{const b=e.form.schedule[y];return typeof b=="string"?b:typeof b=="object"&&b!==null&&b.teacherId||""},a=(y,b)=>{if(h("SET_TEACHER_START",{period:y,teacherId:b,isCoTeachingActive:c(y),currentValue:e.form.schedule[y]}),c(y)){const E=u(y),x=f(y);e.form.schedule[y]={teacherId:b,coTeaching:{caseManagerId:E,subject:x}},h("SET_TEACHER_COTEACHING",{period:y,newValue:e.form.schedule[y]})}else e.form.schedule[y]=b,h("SET_TEACHER_SIMPLE",{period:y,newValue:e.form.schedule[y]})},o=y=>{if(!y)return"Unknown";const b=(e.userRoles.teachers||[]).find(E=>E.id===y);return b&&(b.name||b.email)||y},l=y=>{if(!y)return"Select Case Manager";const b=n.value.find(E=>E.id===y);return b&&(b.name||b.email)||y},c=y=>{var E;const b=e.form.schedule[y];return typeof b=="object"&&b!==null?!!((E=b.coTeaching)!=null&&E.caseManagerId):!1},u=y=>{var E;const b=e.form.schedule[y];return typeof b=="object"&&b!==null&&((E=b.coTeaching)==null?void 0:E.caseManagerId)||""},f=y=>{var E;const b=e.form.schedule[y];return typeof b=="object"&&b!==null&&((E=b.coTeaching)==null?void 0:E.subject)||""},h=(y,b)=>{const E=new Date().toISOString();console.log(` [${E}] Schedule Process: ${y}`,b)},p=(y,b)=>{h("UPDATE_CM_START",{period:y,caseManagerId:b,currentValue:e.form.schedule[y]});const E=i(y),x=f(y);E?(e.form.schedule[y]={teacherId:E,coTeaching:{caseManagerId:b,subject:x}},h("UPDATE_CM_COMPLETE",{period:y,newValue:e.form.schedule[y]}),console.log(" CO-TEACHING DEBUG - Case Manager Updated:",{period:y,periodType:typeof y,caseManagerId:b,teacherId:E,subject:x,finalValue:e.form.schedule[y],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):h("UPDATE_CM_BLOCKED",{reason:"No teacher ID",period:y})},g=(y,b)=>{h("UPDATE_SUBJECT_START",{period:y,subject:b,currentValue:e.form.schedule[y]});const E=i(y),x=u(y);E?(e.form.schedule[y]={teacherId:E,coTeaching:{caseManagerId:x,subject:b}},h("UPDATE_SUBJECT_COMPLETE",{period:y,newValue:e.form.schedule[y]}),console.log(" CO-TEACHING DEBUG - Subject Updated:",{period:y,periodType:typeof y,subject:b,teacherId:E,caseManagerId:x,finalValue:e.form.schedule[y],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):h("UPDATE_SUBJECT_BLOCKED",{reason:"No teacher ID",period:y})},v=y=>{var x;h("TOGGLE_START",{period:y,currentValue:e.form.schedule[y],formVersion:e.formVersion});const b=i(y);if(!b){h("TOGGLE_BLOCKED",{reason:"No teacher selected",period:y});return}const E=c(y);if(h("TOGGLE_STATE",{period:y,isActive:E,teacherId:b,beforeValue:e.form.schedule[y]}),E)e.form.schedule[y]=b;else{const w={teacherId:b,coTeaching:{caseManagerId:((x=n.value[0])==null?void 0:x.id)||"",subject:s.value[0]||""}};e.form.schedule[y]=w,setTimeout(()=>{var P;console.log(" CO-TEACHING PERSISTENCE CHECK - 100ms later:",{period:y,stillExists:!!e.form.schedule[y],currentValue:e.form.schedule[y],isObject:typeof e.form.schedule[y]=="object",hasCoTeaching:!!((P=e.form.schedule[y])!=null&&P.coTeaching)})},100),setTimeout(()=>{var P;console.log(" CO-TEACHING PERSISTENCE CHECK - 1000ms later:",{period:y,stillExists:!!e.form.schedule[y],currentValue:e.form.schedule[y],isObject:typeof e.form.schedule[y]=="object",hasCoTeaching:!!((P=e.form.schedule[y])!=null&&P.coTeaching)})},1e3)}h("TOGGLE_COMPLETE",{period:y,afterValue:e.form.schedule[y],formVersion:e.formVersion}),console.log(" CO-TEACHING DEBUG - Toggle Complete:",{period:y,periodType:typeof y,isActive:!E,finalValue:e.form.schedule[y],entireSchedule:JSON.stringify(e.form.schedule,null,2),availableCaseManagers:n.value.length,availableSubjects:s.value.length})};return Vt(()=>e.form.schedule,(y,b)=>{console.log(" SCHEDULE WATCHER - Schedule changed:",{timestamp:new Date().toISOString(),newSchedule:JSON.stringify(y,null,2),oldSchedule:JSON.stringify(b,null,2),periodsWithObjects:Object.keys(y).filter(E=>typeof y[E]=="object"),periodsWithCoTeaching:Object.keys(y).filter(E=>{var x;return(x=y[E])==null?void 0:x.coTeaching})})},{deep:!0}),(y,b)=>(B(),U("fieldset",pV,[b[7]||(b[7]=d("legend",null,"Schedule",-1)),d("div",mV,[(B(!0),U(Pe,null,je(t.periods,E=>(B(),U("div",{key:E,class:"period-row"},[d("div",gV,[d("label",vV,Y(q(r)(E))+":",1),d("select",{value:i(E),onChange:x=>a(E,x.target.value),class:"teacher-select"},[b[0]||(b[0]=d("option",{value:""},"--",-1)),(B(!0),U(Pe,null,je(t.userRoles.teachers,x=>(B(),U("option",{key:x.id,value:x.id},Y(x.name||x.email||x.id),9,xV))),128))],40,yV),d("button",{type:"button",class:Qe(["coteaching-toggle",{active:c(E)}]),disabled:!i(E),onClick:x=>v(E),title:"Co-Teaching"}," C ",10,EV)]),c(E)?(B(),U("div",_V,[d("div",bV,[b[1]||(b[1]=d("span",{class:"coteaching-label"},"Co-Teaching:",-1)),d("span",SV,Y(o(i(E))),1),b[2]||(b[2]=d("span",{class:"plus-sign"},"+",-1)),d("span",AV,Y(l(u(E))),1)]),d("div",TV,[b[4]||(b[4]=d("label",{class:"config-label"},"Subject:",-1)),d("select",{value:f(E),onChange:x=>g(E,x.target.value),class:"subject-select",required:""},[b[3]||(b[3]=d("option",{value:""},"-- Select Subject --",-1)),(B(!0),U(Pe,null,je(s.value,x=>(B(),U("option",{key:x,value:x},Y(x),9,CV))),128))],40,wV)]),d("div",IV,[b[6]||(b[6]=d("label",{class:"config-label"},"Case Manager:",-1)),d("select",{value:u(E),onChange:x=>p(E,x.target.value),class:"cm-select",required:""},[b[5]||(b[5]=d("option",{value:""},"-- Select Case Manager --",-1)),(B(!0),U(Pe,null,je(n.value,x=>(B(),U("option",{key:x.id,value:x.id},Y(x.name||x.email||x.id),9,DV))),128))],40,kV)])])):xe("",!0)]))),128))])]))}},RV=xt(PV,[["__scopeId","data-v-4aeb2d99"]]),FV={class:"checkbox-inline-group"},NV=["value","checked","onChange"],Pb={__name:"ServiceCheckboxGroup",props:["label","items","modelValue"],emits:["update:modelValue"],setup(t,{emit:e}){const r=t,n=e;function s(i){const a=r.label+": "+i,o=r.modelValue?[...r.modelValue]:[],l=o.indexOf(a);l===-1?o.push(a):o.splice(l,1),n("update:modelValue",o)}return(i,a)=>(B(),U("fieldset",null,[d("legend",null,Y(t.label),1),d("div",FV,[(B(!0),U(Pe,null,je(t.items,o=>(B(),U("label",{key:o},[d("input",{type:"checkbox",value:t.label+": "+o,checked:t.modelValue&&t.modelValue.includes(t.label+": "+o),onChange:l=>s(o)},null,40,NV),we(" "+Y(o),1)]))),128))])]))}},OV={class:"form-col"},MV={class:"inner-grid-3"},LV={key:0,class:"loading-message"},BV={key:1,class:"error-message"},UV={style:{display:"none"}},$V={key:3,class:"no-services-message"},VV={__name:"StudentClassServices",props:{form:{type:Object,required:!0},availableClassServices:{type:Array,required:!0},appSettingsLoading:{type:Boolean,default:!1},appSettingsError:{type:String,default:null}},setup(t){const e=t,r=be(()=>e.availableClassServices.filter(s=>s.name!=="Co-teach")),n=be(()=>e.availableClassServices.filter(s=>s.name==="Co-teach"));return(s,i)=>(B(),U("fieldset",OV,[i[5]||(i[5]=d("legend",null,"Services: classes",-1)),d("div",MV,[t.appSettingsLoading?(B(),U("div",LV,i[2]||(i[2]=[d("span",{class:"loading-spinner"},"",-1),we(" Loading app settings... ")]))):t.appSettingsError?(B(),U("div",BV,[i[3]||(i[3]=d("span",{class:"error-icon"},"",-1)),we(" Error loading app settings: "+Y(t.appSettingsError),1)])):t.availableClassServices.length>0?(B(),U(Pe,{key:2},[(B(!0),U(Pe,null,je(r.value,a=>(B(),Qt(Pb,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[0]||(i[0]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128)),d("div",UV,[(B(!0),U(Pe,null,je(n.value,a=>(B(),Qt(Pb,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[1]||(i[1]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128))])],64)):(B(),U("div",$V,i[4]||(i[4]=[d("span",{class:"info-icon"},"",-1),we(" No class services configured. "),d("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},HV=xt(VV,[["__scopeId","data-v-d750acb2"]]),jV=["id","value"],GV=["value"],Rb={__name:"ServiceSelect",props:["id","label","list","modelValue"],emits:["update:modelValue"],setup(t){return(e,r)=>(B(),U("label",null,[we(Y(t.label)+": ",1),d("select",{id:t.id,value:t.modelValue,onChange:r[0]||(r[0]=n=>e.$emit("update:modelValue",n.target.value))},[r[1]||(r[1]=d("option",{value:""},"--",-1)),(B(!0),U(Pe,null,je(t.list,n=>(B(),U("option",{key:n.id,value:n.id},Y(n.name),9,GV))),128))],40,jV)]))}},WV={class:"inner-grid-3"},zV={key:1,class:"no-services-message"},KV={__name:"StudentProviders",props:{form:{type:Object,required:!0},serviceProviders:{type:Array,required:!0},customServiceProviders:{type:Array,required:!0},providerFieldMap:{type:Object,required:!0},getProviderLabel:{type:Function,required:!0},getProviderUsers:{type:Function,required:!0}},setup(t){return(e,r)=>(B(),U("fieldset",null,[r[1]||(r[1]=d("legend",null,"Services: providers",-1)),d("div",WV,[t.serviceProviders.length>0?(B(),U(Pe,{key:0},[(B(!0),U(Pe,null,je(t.serviceProviders,n=>(B(),Qt(Rb,{key:n,id:n,label:t.getProviderLabel(n),list:t.getProviderUsers(n),modelValue:t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`]=s},null,8,["id","label","list","modelValue","onUpdate:modelValue"]))),128)),(B(!0),U(Pe,null,je(t.customServiceProviders,n=>(B(),Qt(Rb,{key:n,id:n,label:n,list:[],modelValue:t.form[`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[`${n.toLowerCase()}Id`]=s},null,8,["id","label","modelValue","onUpdate:modelValue"]))),128))],64)):(B(),U("div",zV,r[0]||(r[0]=[d("span",{class:"info-icon"},"",-1),we(" No service providers configured. "),d("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},qV=xt(KV,[["__scopeId","data-v-faa02238"]]),XV={class:"form-col"},YV={class:"document-section"},QV={key:0,class:"current-file"},JV={key:1,class:"removed-file"},ZV={key:2,class:"upload-status loading-pulse"},eH={key:3,class:"error-message"},tH={class:"document-section"},rH={key:0,class:"current-file"},nH={key:1,class:"removed-file"},sH={key:2,class:"upload-status loading-pulse"},aH={class:"additional-documents-section"},iH={class:"additional-docs-header"},oH={class:"doc-counter"},lH={class:"additional-doc-header"},cH={class:"doc-title"},uH={key:0,class:"doc-upload-area"},dH=["onChange"],fH={key:1,class:"current-file"},hH=["onClick"],pH=["onClick"],mH={key:2,class:"removed-file"},gH=["onClick"],vH={key:3,class:"upload-status loading-pulse"},yH={key:0,class:"add-document-section"},xH={key:0,class:"add-document-button-container"},EH={key:1,class:"add-document-form"},_H={class:"title-input-container"},bH={class:"char-counter"},SH={class:"add-form-buttons"},AH=["disabled"],TH={key:1,class:"max-documents-message"},wH={__name:"StudentDocuments",props:{form:{type:Object,required:!0},student:{type:Object,default:()=>({})},mode:{type:String,default:"new"},onFileChange:{type:Function,required:!0},removeBipFile:{type:Function,required:!0},removeAtaglanceFile:{type:Function,required:!0},addAdditionalDocument:{type:Function,required:!0},removeAdditionalDocument:{type:Function,required:!0},undoRemoveAdditionalDocument:{type:Function,required:!0},deleteAdditionalDocument:{type:Function,required:!0}},emits:["loading-change"],setup(t,{emit:e}){const r=t,n=e,{uploadPdf:s,downloadPdf:i,isUploading:a,error:o}=nx(),l=ae(null),c=be(()=>a.value||l.value!==null);Vt(c,R=>{n("loading-change",R)},{immediate:!0});const u=be(()=>{var A,_,m,S;const R=((A=r.student)==null?void 0:A.id)||((_=r.form)==null?void 0:_.id);return console.log(" StudentDocuments - studentId computed:",{studentId:(m=r.student)==null?void 0:m.id,formId:(S=r.form)==null?void 0:S.id,finalId:R}),R}),f=async(R,A)=>{const _=R.target.files[0]||null;if(_){const m=sl(_,{allowedTypes:["pdf"],maxSize:10485760,fieldName:A==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!m.isValid){alert(m.error),R.target.value="";return}const S=Hr(_.name);if(!S.isSafe){alert(`File name contains potentially dangerous content: ${S.threats.join(", ")}`),R.target.value="";return}try{if(l.value=A==="bipFile"?"bip":"ataglance",!u.value)throw new Error("Student ID is required for secure file upload");const I=A==="bipFile"?r.form.bipPdfUrl:r.form.ataglancePdfUrl;if(I){console.log(` Cleaning up old ${A} file:`,I);try{const{ref:C,deleteObject:O}=await Hs(async()=>{const{ref:z,deleteObject:j}=await Promise.resolve().then(()=>VM);return{ref:z,deleteObject:j}},void 0),{doc:D,deleteDoc:F}=await Hs(async()=>{const{doc:z,deleteDoc:j}=await Promise.resolve().then(()=>T9);return{doc:z,deleteDoc:j}},void 0),{storage:N,db:M}=await Hs(async()=>{const{storage:z,db:j}=await Promise.resolve().then(()=>Ky);return{storage:z,db:j}},void 0),L=C(N,`students/${u.value}/${I}`);await O(L),await F(D(M,"pdfMetadata",I)),console.log(` Old ${A} file cleaned up:`,I)}catch(C){console.warn(`Failed to clean up old ${A} file:`,C.message)}}const k=await s(_,u.value);A==="bipFile"?(Object.assign(r.form,{bipPdfUrl:k,bipFileName:_.name}),console.log(" BIP file updated in form:",{bipPdfUrl:r.form.bipPdfUrl,bipFileName:r.form.bipFileName})):(Object.assign(r.form,{ataglancePdfUrl:k,ataglanceFileName:_.name}),console.log(" At-A-Glance file updated in form:",{ataglancePdfUrl:r.form.ataglancePdfUrl,ataglanceFileName:r.form.ataglanceFileName})),console.log(` Secure PDF uploaded: ${k}`),console.log(" Current form state:",{bipPdfUrl:r.form.bipPdfUrl,bipFileName:r.form.bipFileName,ataglancePdfUrl:r.form.ataglancePdfUrl,ataglanceFileName:r.form.ataglanceFileName})}catch(I){console.error("Secure PDF upload failed:",I),alert(`Failed to upload PDF: ${I.message}`)}finally{l.value=null,R.target.value=""}}r.onFileChange(R,A)},h=async R=>{try{const A=R==="bip"?r.form.bipPdfUrl:r.form.ataglancePdfUrl,_=R==="bip"?r.form.bipFileName:r.form.ataglanceFileName;if(!A||!u.value)throw new Error("File not found or student ID missing");await i(A,u.value,_)}catch(A){console.error("Secure PDF download failed:",A),alert(`Failed to download PDF: ${A.message}`)}},p=ae(!1),g=ae(""),v=be(()=>r.form.additionalDocuments||[]),y=be(()=>2+v.value.length<10),b=()=>{p.value=!0,g.value=""},E=()=>{p.value=!1,g.value=""},x=async()=>{try{if(!g.value.trim()){alert("Please enter a document title");return}const R=r.addAdditionalDocument(g.value.trim());p.value=!1,g.value=""}catch(R){alert(R.message)}},w=async(R,A)=>{const _=R.target.files[0]||null;if(_){const m=sl(_,{allowedTypes:["pdf"],maxSize:10485760,fieldName:"Additional Document"});if(!m.isValid){alert(m.error),R.target.value="";return}const S=Hr(_.name);if(!S.isSafe){alert(`File name contains potentially dangerous content: ${S.threats.join(", ")}`),R.target.value="";return}try{if(l.value=A,!u.value)throw new Error("Student ID is required for secure file upload");const I=await s(_,u.value),k=r.form.additionalDocuments.find(C=>C.id===A);k&&Object.assign(k,{pdfUrl:I,fileName:_.name,uploadDate:new Date().toISOString()}),console.log(` Additional document uploaded: ${I}`)}catch(I){console.error("Additional document upload failed:",I),alert(`Failed to upload PDF: ${I.message}`)}finally{l.value=null,R.target.value=""}}},P=async R=>{try{if(!R.pdfUrl||!u.value)throw new Error("File not found or student ID missing");await i(R.pdfUrl,u.value,R.fileName)}catch(A){console.error("Additional document download failed:",A),alert(`Failed to download PDF: ${A.message}`)}};return(R,A)=>(B(),U("fieldset",XV,[A[29]||(A[29]=d("legend",null,"Documents",-1)),d("div",YV,[d("label",null,[A[14]||(A[14]=we(" BIP: ")),d("input",{type:"file",accept:"application/pdf",onChange:A[0]||(A[0]=_=>f(_,"bipFile"))},null,32),t.form.bipPdfUrl&&!t.form.removeBipFile?(B(),U("span",QV,[A[10]||(A[10]=we(" Current: ")),d("a",{href:"#",onClick:A[1]||(A[1]=Xr(_=>h("bip"),["prevent"])),target:"_blank"},"View BIP"),d("button",{type:"button",onClick:A[2]||(A[2]=(..._)=>t.removeBipFile&&t.removeBipFile(..._)),class:"btn-remove"},[Oe(q(wm),{size:16}),A[9]||(A[9]=we(" Remove "))])])):xe("",!0),t.form.removeBipFile?(B(),U("span",JV,[A[12]||(A[12]=we(" BIP file will be removed ")),d("button",{type:"button",onClick:A[3]||(A[3]=_=>t.form.removeBipFile=!1),class:"btn-undo"},[Oe(q(w0),{size:16}),A[11]||(A[11]=we(" Undo "))])])):xe("",!0),q(a)&&l.value==="bip"?(B(),U("div",ZV,[Oe(q(dc),{size:16,class:"loading-spinner"}),A[13]||(A[13]=d("strong",null,"Loading... Uploading BIP document...",-1))])):xe("",!0),q(o)?(B(),U("div",eH,Y(q(o)),1)):xe("",!0)])]),d("div",tH,[d("label",null,[A[20]||(A[20]=we(" At-A-Glance PDF: ")),d("input",{type:"file",accept:"application/pdf",onChange:A[4]||(A[4]=_=>f(_,"ataglanceFile"))},null,32),t.form.ataglancePdfUrl&&!t.form.removeAtaglanceFile?(B(),U("span",rH,[A[16]||(A[16]=we(" Current: ")),d("a",{href:"#",onClick:A[5]||(A[5]=Xr(_=>h("ataglance"),["prevent"])),target:"_blank"},"View At-A-Glance"),d("button",{type:"button",onClick:A[6]||(A[6]=(..._)=>t.removeAtaglanceFile&&t.removeAtaglanceFile(..._)),class:"btn-remove"},[Oe(q(wm),{size:16}),A[15]||(A[15]=we(" Remove "))])])):xe("",!0),t.form.removeAtaglanceFile?(B(),U("span",nH,[A[18]||(A[18]=we(" At-A-Glance file will be removed ")),d("button",{type:"button",onClick:A[7]||(A[7]=_=>t.form.removeAtaglanceFile=!1),class:"btn-undo"},[Oe(q(w0),{size:16}),A[17]||(A[17]=we(" Undo "))])])):xe("",!0),q(a)&&l.value==="ataglance"?(B(),U("div",sH,[Oe(q(dc),{size:16,class:"loading-spinner"}),A[19]||(A[19]=d("strong",null,"Loading... Uploading At-A-Glance document...",-1))])):xe("",!0)])]),d("div",aH,[d("div",iH,[A[21]||(A[21]=d("h4",null,"Additional Documents",-1)),d("span",oH,Y(v.value.length)+"/8 max",1)]),(B(!0),U(Pe,null,je(v.value,_=>(B(),U("div",{key:_.id,class:"document-section additional-doc"},[d("div",lH,[Oe(q(Wu),{size:16,class:"doc-icon"}),d("span",cH,Y(_.title),1)]),!_.pdfUrl&&!_.toRemove?(B(),U("div",uH,[d("input",{type:"file",accept:"application/pdf",onChange:m=>w(m,_.id),class:"additional-doc-input"},null,40,dH)])):xe("",!0),_.pdfUrl&&!_.toRemove?(B(),U("span",fH,[A[23]||(A[23]=we(" Current: ")),d("a",{href:"#",onClick:Xr(m=>P(_),["prevent"]),target:"_blank"},"View "+Y(_.title),9,hH),d("button",{type:"button",onClick:m=>t.removeAdditionalDocument(_.id),class:"btn-remove"},[Oe(q(wm),{size:16}),A[22]||(A[22]=we(" Remove "))],8,pH)])):xe("",!0),_.toRemove?(B(),U("span",mH,[we(Y(_.title)+" will be removed ",1),d("button",{type:"button",onClick:m=>t.undoRemoveAdditionalDocument(_.id),class:"btn-undo"},[Oe(q(w0),{size:16}),A[24]||(A[24]=we(" Undo "))],8,gH)])):xe("",!0),q(a)&&l.value===_.id?(B(),U("div",vH,[Oe(q(dc),{size:16,class:"loading-spinner"}),d("strong",null,"Loading... Uploading "+Y(_.title)+"...",1)])):xe("",!0)]))),128)),y.value?(B(),U("div",yH,[p.value?xe("",!0):(B(),U("div",xH,[d("button",{type:"button",onClick:b,class:"btn-add-document"},[Oe(q(j_),{size:16}),A[25]||(A[25]=we(" Add Document "))])])),p.value?(B(),U("div",EH,[d("div",_H,[A[26]||(A[26]=d("label",{for:"newDocTitle"},"Document Title (max 24 characters):",-1)),Be(d("input",{id:"newDocTitle",type:"text","onUpdate:modelValue":A[8]||(A[8]=_=>g.value=_),maxlength:"24",placeholder:"Enter document title...",class:"title-input",onKeyup:P1(x,["enter"])},null,544),[[gt,g.value]]),d("span",bH,Y(g.value.length)+"/24",1)]),d("div",SH,[d("button",{type:"button",onClick:x,disabled:!g.value.trim(),class:"btn-confirm"},[Oe(q(j_),{size:16}),A[27]||(A[27]=we(" Add "))],8,AH),d("button",{type:"button",onClick:E,class:"btn-cancel"}," Cancel ")])])):xe("",!0)])):xe("",!0),y.value?xe("",!0):(B(),U("div",TH,A[28]||(A[28]=[d("span",null,"Maximum of 10 documents reached (including BIP and At-A-Glance)",-1)])))])]))}},CH=xt(wH,[["__scopeId","data-v-039d1d4d"]]),IH={class:"form-col"},kH={class:"inner-grid-2"},DH={__name:"StudentAccommodations",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(B(),U("fieldset",IH,[r[4]||(r[4]=d("legend",null,"Accommodations",-1)),d("div",kH,[d("label",null,[r[2]||(r[2]=we(" Instruction: ")),Be(d("textarea",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.instruction=n),placeholder:"Enter instructional accommodations..."},null,512),[[gt,t.form.instruction]])]),d("label",null,[r[3]||(r[3]=we(" Assessment: ")),Be(d("textarea",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.assessment=n),placeholder:"Enter assessment accommodations..."},null,512),[[gt,t.form.assessment]])])])]))}},PH=xt(DH,[["__scopeId","data-v-4ce4f379"]]),RH={class:"flags-container"},FH={class:"checkbox-label"},NH={class:"checkbox-label"},OH={__name:"StudentFlags",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(B(),U("fieldset",null,[r[4]||(r[4]=d("legend",null,"Flags",-1)),d("div",RH,[d("label",FH,[Be(d("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=n=>t.form.flag1=n)},null,512),[[Et,t.form.flag1]]),r[2]||(r[2]=we(" Preferential seating "))]),d("label",NH,[Be(d("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=n=>t.form.flag2=n)},null,512),[[Et,t.form.flag2]]),r[3]||(r[3]=we(" Separate setting "))])])]))}},MH=xt(OH,[["__scopeId","data-v-e7295a7a"]]),LH={class:"dialog-backdrop"},BH={class:"dialog"},UH=["disabled"],$H={__name:"StudentForm",props:{student:{type:Object,default:()=>({})},users:{type:Object,required:!0},mode:{type:String,default:"new"}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{form:s,isSaving:i,appSettings:a,appSettingsLoading:o,appSettingsError:l,periods:c,gradeOptions:u,availableClassServices:f,serviceProviders:h,customServiceProviders:p,userRoles:g,onFileChange:v,removeBipFile:y,removeAtaglanceFile:b,addAdditionalDocument:E,removeAdditionalDocument:x,undoRemoveAdditionalDocument:w,deleteAdditionalDocument:P,providerFieldMap:R,getProviderLabel:A,getProviderUsers:_,handleSubmit:m}=iV(r,n),S=ae(!1),I=be(()=>i.value||S.value),k=be(()=>S.value?"Loading files...":i.value?"Saving...":r.mode==="edit"?"Save":"Add Student"),C=O=>{S.value=O};return(O,D)=>(B(),U("div",LH,[d("div",BH,[d("header",null,[d("h2",null,Y(t.mode==="edit"?"Edit Student":"Add Student"),1),d("button",{onClick:D[0]||(D[0]=F=>O.$emit("close")),class:"close-btn"},"")]),d("form",{onSubmit:D[2]||(D[2]=Xr((...F)=>q(m)&&q(m)(...F),["prevent"])),id:"student-form"},[Oe(hV,{form:q(s),mode:t.mode,"grade-options":q(u),"user-roles":q(g)},null,8,["form","mode","grade-options","user-roles"]),Oe(RV,{form:q(s),periods:q(c),"user-roles":q(g),"app-settings":q(a)},null,8,["form","periods","user-roles","app-settings"]),Oe(HV,{form:q(s),"available-class-services":q(f),"app-settings-loading":q(o),"app-settings-error":q(l)},null,8,["form","available-class-services","app-settings-loading","app-settings-error"]),Oe(qV,{form:q(s),"service-providers":q(h),"custom-service-providers":q(p),"provider-field-map":q(R),"get-provider-label":q(A),"get-provider-users":q(_)},null,8,["form","service-providers","custom-service-providers","provider-field-map","get-provider-label","get-provider-users"]),Oe(CH,{form:q(s),student:t.student,mode:t.mode,"on-file-change":q(v),"remove-bip-file":q(y),"remove-ataglance-file":q(b),"add-additional-document":q(E),"remove-additional-document":q(x),"undo-remove-additional-document":q(w),"delete-additional-document":q(P),onLoadingChange:C},null,8,["form","student","mode","on-file-change","remove-bip-file","remove-ataglance-file","add-additional-document","remove-additional-document","undo-remove-additional-document","delete-additional-document"]),Oe(PH,{form:q(s)},null,8,["form"]),Oe(MH,{form:q(s)},null,8,["form"]),d("footer",null,[d("button",{type:"button",onClick:D[1]||(D[1]=F=>O.$emit("close")),class:"btn btn-secondary"}," Cancel "),d("button",{type:"submit",class:"btn btn-primary",disabled:I.value},Y(k.value),9,UH)])],32)])]))}},sx=xt($H,[["__scopeId","data-v-f69b1564"]]),VH={key:0},HH={key:1,class:"loading-dialog"},jH={__name:"StudentEditDialog",props:{studentId:{type:String,required:!0},users:{type:Object,required:!0}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{students:s}=Ii(),i=be(()=>{const o=s.value.find(l=>l.id===r.studentId);return console.log("StudentEditDialog - studentId:",r.studentId),console.log("StudentEditDialog - found student:",o),console.log("StudentEditDialog - students count:",s.value.length),o||{}});function a(o){console.log("StudentEditDialog - student saved:",o),n("saved",o)}return(o,l)=>i.value&&Object.keys(i.value).length>0?(B(),U("div",VH,[Oe(sx,{student:i.value,users:t.users,mode:"edit",onClose:l[0]||(l[0]=c=>o.$emit("close")),onSaved:a},null,8,["student","users"])])):(B(),U("div",HH,l[1]||(l[1]=[d("div",{class:"dialog"},[d("header",null,[d("h2",null,"Loading Student Data...")]),d("div",{class:"content"},[d("p",null,"Please wait while we load the student information.")])],-1)])))}},GH=xt(jH,[["__scopeId","data-v-dea0919d"]]),WH={class:"dialog-backdrop"},zH={class:"dialog"},KH={class:"button-group"},qH={key:0,class:"selected-recipients"},XH={class:"recipients-header"},YH={class:"recipients-list"},QH={key:0,class:"recipients-note"},JH={key:1,class:"members-list"},ZH={key:0,class:"email"},ej=["value"],tj={key:2,class:"update-categories"},rj={class:"checkbox-group"},nj={class:"checkbox-item"},sj={class:"checkbox-item"},aj={class:"checkbox-item"},ij={class:"checkbox-item"},oj={class:"checkbox-item"},lj={class:"checkbox-item"},cj={class:"checkbox-item"},uj=["disabled"],dj={key:0,class:"no-docs"},fj=["disabled"],hj=["disabled"],pj={__name:"StudentsEmailDialog",props:{student:{type:Object,required:!0},userMap:{type:Object,required:!0},currentUser:{type:Object,required:!1}},emits:["close"],setup(t,{emit:e}){const r=t,{student:n,userMap:s}=r,i=e,{appSettings:a}=Ns(),o=be(()=>{var O;return((O=a.value.gmailApi)==null?void 0:O.enabled)??!1}),l=async O=>{try{await navigator.clipboard.writeText(O),u()}catch(D){console.error("Failed to copy:",D),alert("Failed to copy to clipboard. Please copy the email addresses manually.")}},c=ae(!1),u=()=>{c.value=!0,setTimeout(()=>{c.value=!1},2e3)},f=ae(""),h=ae([]),p=ae({studentInfo:!1,meetingDates:!1,services:!1,schedule:!1,instructionAccommodations:!1,assessmentAccommodations:!1,documents:!1}),g=be(()=>{var D,F;if((F=(D=n.app)==null?void 0:D.schedule)!=null&&F.periods){const N=[];return Object.values(n.app.schedule.periods).forEach(M=>{var z;const L=typeof M=="string"?M:M==null?void 0:M.teacherId;L&&N.push(L),(z=M==null?void 0:M.coTeaching)!=null&&z.caseManagerId&&N.push(M.coTeaching.caseManagerId)}),N}const O=n.schedule||{};return Object.values(O).filter(Boolean)}),v=be(()=>[...new Set(g.value)]),y=be(()=>{var D;const O=[];(D=n.app)!=null&&D.providers&&Object.entries(n.app.providers).forEach(([F,N])=>{N&&!["caseManagerId"].includes(F)&&O.push(N)});for(const F in n)F.endsWith("_id")&&!["casemanager_id","caseManagerId"].includes(F)&&n[F]&&O.push(n[F]);return[...new Set(O)].filter(F=>!v.value.includes(F))}),b=be(()=>v.value.map(O=>({id:O,...s[O]||{}})).filter(O=>O&&O.email)),E=be(()=>y.value.map(O=>({id:O,...s[O]||{}})).filter(O=>O&&O.email)),x=be(()=>{var F,N,M,L;const O=((N=(F=n.app)==null?void 0:F.studentData)==null?void 0:N.caseManagerId)||((L=(M=n.app)==null?void 0:M.providers)==null?void 0:L.caseManagerId)||n.caseManagerId||n.casemanager_id;if(!O)return null;const D=s[O];return D&&D.email?{id:O,...D}:null}),w=be(()=>{const O=[...b.value,...E.value];return x.value&&(O.map(F=>F.id).includes(x.value.id)||O.push(x.value)),O}),P=be(()=>{var O;return(O=r.currentUser)==null?void 0:O.uid});be(()=>{var D;const O=(D=r.currentUser)==null?void 0:D.role;return["paraeducator","staff_view","teacher"].includes(O)});const R=be(()=>{var F,N,M,L,z;const O=(F=r.currentUser)==null?void 0:F.uid,D=((M=(N=n.app)==null?void 0:N.studentData)==null?void 0:M.caseManagerId)||((z=(L=n.app)==null?void 0:L.providers)==null?void 0:z.caseManagerId)||n.caseManagerId||n.casemanager_id;return O&&D&&O===D}),A=be(()=>b.value.filter(O=>O.id!==P.value)),_=be(()=>E.value.filter(O=>O.id!==P.value)),m=be(()=>w.value.filter(O=>O.id!==P.value)),S=be(()=>{var O,D,F,N;return!!((D=(O=n.app)==null?void 0:O.documents)!=null&&D.ataglancePdfUrl||(N=(F=n.app)==null?void 0:F.documents)!=null&&N.bipPdfUrl||n.ataglancePdfUrl||n.ataglance_pdf_url||n.bipPdfUrl||n.bip_pdf_url)}),I=be(()=>f.value?f.value==="Individual"?h.value.length>0:!0:!1),k=be(()=>{let O=[];return f.value==="Teachers"?O=A.value:f.value==="TeachersAndService"?O=[...A.value,..._.value]:f.value==="CaseManager"?O=x.value?[x.value]:[]:f.value==="Individual"&&(O=m.value.filter(D=>h.value.includes(D.id))),O.map(D=>D.email).filter(Boolean).join(",")});async function C(){var W,ne,de,se,ce,te,Z,ye;if(!o.value){alert('Gmail API features are disabled. Please use the "Copy Email Addresses" button instead.');return}if(!k.value){alert("No email addresses found for the selected recipients.");return}console.log(" Student data for email:",{student:n,firstName:n.firstName,first_name:n.first_name,lastName:n.lastName,last_name:n.last_name,appStudentData:(W=n.app)==null?void 0:W.studentData});const O=n.firstName||n.first_name||((de=(ne=n.app)==null?void 0:ne.studentData)==null?void 0:de.firstName)||((se=n.app)==null?void 0:se.firstName)||"",D=n.lastName||n.last_name||((te=(ce=n.app)==null?void 0:ce.studentData)==null?void 0:te.lastName)||((Z=n.app)==null?void 0:Z.lastName)||"";console.log(" Extracted names:",{firstName:O,lastName:D});const F=`${O} ${D}`.trim()||"Student",N=(((O==null?void 0:O[0])||"")+((D==null?void 0:D[0])||"")).toUpperCase()||"ST";console.log(" Final values:",{fullName:F,initials:N});const M=Object.values(p.value).some(J=>J),L=M?`${N} - Student Update`:`${N} - Student Inquiry`;let z="";if(M){z+=`Hi team,

`,z+=`${F}'s student profile has been updated in the CaseManage app.

`,z+=`Update Summary:
`,p.value.studentInfo&&(z+=` Student data has been updated
`),p.value.documents&&(z+=` Documents have been updated and are available
`),p.value.schedule&&(z+=` Schedule details have been updated
`),p.value.instructionAccommodations&&(z+=` Instruction accommodations have been updated
`),p.value.assessmentAccommodations&&(z+=` Assessment accommodations have been updated
`),p.value.services&&(z+=` Services have been updated
`),p.value.meetingDates&&(z+=` Meeting dates have been updated
`),z+=`
`,z+=`Please reach out if you have any questions.

`,z+=`To access the updated confidential information and documents:
`,z+=`Log into the CaseManage app: ${window.location.origin}
`,z+=`Navigate to the student's record to view the updates. Authentication is required.

`;const J=x.value&&(`${x.value.firstName||""} ${x.value.lastName||""}`.trim()||x.value.displayName||x.value.email)||"Case Manager";J&&J!=="Case Manager"?z+=`For questions please contact the Case Manager (${J}) directly.
`:z+=`For questions please contact the Case Manager directly.
`}else z=`Hi team,

I have a question regarding ${F}.

Please reach out if you need any additional information.

Thank you!`;console.log(" Email composition:",{subject:L,body:z});const j=(ye=r.currentUser)==null?void 0:ye.email;if(!j){console.error(" No user email found in props.currentUser:",r.currentUser),alert("Unable to send email: User email not found. Please contact your administrator.");return}console.log(" User work email:",j);const H=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(k.value)}&su=${encodeURIComponent(L)}&body=${encodeURIComponent(z)}`;if(!confirm(`IMPORTANT: Security Check

This email MUST be sent from your school account: ${j}

Please confirm:
1. You are signed into Gmail with ${j}
2. You are NOT signed into any other Gmail accounts

Click OK only if you are using your school account.
Click Cancel to open Gmail and switch accounts.`)){window.open("https://mail.google.com","_blank","noopener");return}window.open(H,"_blank","noopener"),console.log(" Gmail compose window opened"),i("close")}return(O,D)=>(B(),U("div",WH,[d("div",zH,[d("header",null,[d("h2",null,"Email about "+Y(q(n).firstName||q(n).first_name)+" "+Y(q(n).lastName||q(n).last_name),1),d("button",{onClick:D[0]||(D[0]=F=>O.$emit("close")),title:"Close"},"")]),d("main",null,[d("form",{onSubmit:D[14]||(D[14]=Xr(()=>{},["prevent"]))},[d("div",KH,[x.value?(B(),U("button",{key:0,type:"button",class:Qe(["option-button",{active:f.value==="CaseManager"}]),onClick:D[1]||(D[1]=F=>f.value="CaseManager")}," Case Manager ",2)):xe("",!0),d("button",{type:"button",class:Qe(["option-button",{active:f.value==="Teachers"}]),onClick:D[2]||(D[2]=F=>f.value="Teachers")}," Teachers ",2),d("button",{type:"button",class:Qe(["option-button",{active:f.value==="TeachersAndService"}]),onClick:D[3]||(D[3]=F=>f.value="TeachersAndService")}," Teachers and service providers ",2),d("button",{type:"button",class:Qe(["option-button",{active:f.value==="Individual"}]),onClick:D[4]||(D[4]=F=>f.value="Individual")}," Individual member of the IEP team ",2)]),k.value?(B(),U("div",qH,[d("div",XH,[D[17]||(D[17]=d("h4",null,"Selected Recipients:",-1)),o.value?xe("",!0):(B(),U("button",{key:0,type:"button",class:Qe(["copy-button",{copied:c.value}]),onClick:D[5]||(D[5]=F=>l(k.value))},Y(c.value?"Copied!":"Copy All"),3))]),d("div",YH,Y(k.value),1),o.value?xe("",!0):(B(),U("div",QH,D[18]||(D[18]=[d("p",null,"Note: Gmail API features are not enabled. You can copy these email addresses to use in your email client.",-1)])))])):xe("",!0),f.value==="Individual"?(B(),U("div",JH,[D[19]||(D[19]=d("div",null,"Select members:",-1)),(B(!0),U(Pe,null,je(m.value,F=>(B(),U("div",{key:F.id},[d("label",null,[d("span",null,[we(Y(F.name||F.displayName||F.email||F.id)+" ",1),F.email?(B(),U("span",ZH,"("+Y(F.email)+")",1)):xe("",!0)]),Be(d("input",{type:"checkbox",value:F.id,"onUpdate:modelValue":D[6]||(D[6]=N=>h.value=N)},null,8,ej),[[Et,h.value]])])]))),128))])):xe("",!0),R.value?(B(),U("div",tj,[D[27]||(D[27]=d("h4",null,"Select what has been updated:",-1)),d("div",rj,[d("div",nj,[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[7]||(D[7]=F=>p.value.studentInfo=F)},null,512),[[Et,p.value.studentInfo]]),D[20]||(D[20]=d("label",null,"Student information",-1))]),d("div",sj,[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[8]||(D[8]=F=>p.value.meetingDates=F)},null,512),[[Et,p.value.meetingDates]]),D[21]||(D[21]=d("label",null,"Meeting dates",-1))]),d("div",aj,[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[9]||(D[9]=F=>p.value.services=F)},null,512),[[Et,p.value.services]]),D[22]||(D[22]=d("label",null,"Services",-1))]),d("div",ij,[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[10]||(D[10]=F=>p.value.schedule=F)},null,512),[[Et,p.value.schedule]]),D[23]||(D[23]=d("label",null,"Schedule",-1))]),d("div",oj,[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[11]||(D[11]=F=>p.value.instructionAccommodations=F)},null,512),[[Et,p.value.instructionAccommodations]]),D[24]||(D[24]=d("label",null,"Instruction accommodations",-1))]),d("div",lj,[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[12]||(D[12]=F=>p.value.assessmentAccommodations=F)},null,512),[[Et,p.value.assessmentAccommodations]]),D[25]||(D[25]=d("label",null,"Assessment accommodations",-1))]),d("div",cj,[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[13]||(D[13]=F=>p.value.documents=F),disabled:!S.value},null,8,uj),[[Et,p.value.documents]]),d("label",null,[D[26]||(D[26]=we(" Documents ")),S.value?xe("",!0):(B(),U("span",dj,"(No docs available)"))])])])])):xe("",!0)],32)]),d("footer",null,[d("button",{onClick:D[15]||(D[15]=F=>O.$emit("close"))},"Cancel"),o.value?(B(),U("button",{key:0,disabled:!I.value,onClick:C},"Send Email",8,fj)):(B(),U("button",{key:1,disabled:!I.value,onClick:D[16]||(D[16]=F=>l(k.value))},Y(c.value?"Copied!":"Copy Email Addresses"),9,hj))])])]))}},mj=xt(pj,[["__scopeId","data-v-d498c3e5"]]),gj={class:"dialog-backdrop"},vj={class:"dialog"},yj={class:"field-groups"},xj={class:"field-group"},Ej={class:"field-group"},_j={class:"field-group"},bj={class:"field-group"},Sj={class:"field-group"},Aj={class:"field-group"},Tj=["disabled"],wj={__name:"ExportDialog",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})}},emits:["close"],setup(t,{emit:e}){const r=t,n=e,s=xn(),i=Yy(),a=ae({studentData:{firstName:!0,lastName:!0,grade:!0,plan:!0,caseManagerId:!0},dates:{reviewDate:!0,reevalDate:!0,meetingDate:!0},providers:{all:!0},accommodations:{instruction:!0,assessment:!0},schedule:{periods:!0,classServices:!0},documents:{ataglancePdfUrl:!0,bipPdfUrl:!0}}),o=["speechId","otId","mhId","ptId","scId","trId","audId","viId","atId","dhhId","omId","bisId","hnId","swId"],l=be(()=>Object.values(a.value).some(y=>Object.values(y).some(b=>b)));function c(y){if(!y||!r.userMap[y])return"";const b=r.userMap[y];return b.name||b.email||""}function u(y){const b=i.userPermissions||[];return Array.isArray(b)&&b.includes(y)}function f(){Object.keys(a.value).forEach(y=>{Object.keys(a.value[y]).forEach(b=>{a.value[y][b]=!0})})}function h(){Object.keys(a.value).forEach(y=>{Object.keys(a.value[y]).forEach(b=>{a.value[y][b]=!1})})}function p(y){var w,P,R,A,_,m,S,I,k,C,O,D,F,N,M,L,z,j,H,G,W,ne,de,se,ce,te,Z,ye,J,X,Q,fe;const b=s.currentUser;if((b==null?void 0:b.role)==="admin"||(b==null?void 0:b.role)==="administrator"||(b==null?void 0:b.role)==="staff_view"||(b==null?void 0:b.role)==="sped_chair"||(b==null?void 0:b.role)==="administrator_504_CM"||(b==null?void 0:b.role)==="admin_504")return g(y);const x={};return a.value.studentData.firstName&&(x.firstName=(P=(w=y.app)==null?void 0:w.studentData)==null?void 0:P.firstName),a.value.studentData.lastName&&(x.lastName=(A=(R=y.app)==null?void 0:R.studentData)==null?void 0:A.lastName),a.value.studentData.grade&&(x.grade=(m=(_=y.app)==null?void 0:_.studentData)==null?void 0:m.grade),a.value.studentData.plan&&(x.plan=(I=(S=y.app)==null?void 0:S.studentData)==null?void 0:I.plan),a.value.studentData.caseManagerId&&(x.caseManagerId=(C=(k=y.app)==null?void 0:k.studentData)==null?void 0:C.caseManagerId),u("view_student_dates")&&(a.value.dates.reviewDate&&(x.reviewDate=(D=(O=y.app)==null?void 0:O.dates)==null?void 0:D.reviewDate),a.value.dates.reevalDate&&(x.reevalDate=(N=(F=y.app)==null?void 0:F.dates)==null?void 0:N.reevalDate),a.value.dates.meetingDate&&(x.meetingDate=(L=(M=y.app)==null?void 0:M.dates)==null?void 0:L.meetingDate)),(u("view_service_providers")||((j=(z=y.app)==null?void 0:z.studentData)==null?void 0:j.caseManagerId)===(b==null?void 0:b.uid)||o.some(ve=>{var ie,ee;return((ee=(ie=y.app)==null?void 0:ie.providers)==null?void 0:ee[ve])===(b==null?void 0:b.uid)}))&&a.value.providers.all&&o.forEach(ve=>{var ie,ee;x[ve]=(ee=(ie=y.app)==null?void 0:ie.providers)==null?void 0:ee[ve]}),u("view_accommodations")&&(a.value.accommodations.instruction&&(x.instruction=(G=(H=y.app)==null?void 0:H.accommodations)==null?void 0:G.instruction),a.value.accommodations.assessment&&(x.assessment=(ne=(W=y.app)==null?void 0:W.accommodations)==null?void 0:ne.assessment)),(u("view_schedule")||Object.values(((se=(de=y.app)==null?void 0:de.schedule)==null?void 0:se.periods)||{}).includes(b==null?void 0:b.uid))&&(a.value.schedule.periods&&(x.schedule=(te=(ce=y.app)==null?void 0:ce.schedule)==null?void 0:te.periods),a.value.schedule.classServices&&(x.classServices=(ye=(Z=y.app)==null?void 0:Z.schedule)==null?void 0:ye.classServices)),u("view_documents")&&(a.value.documents.ataglancePdfUrl&&(x.ataglancePdfUrl=(X=(J=y.app)==null?void 0:J.documents)==null?void 0:X.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(x.bipPdfUrl=(fe=(Q=y.app)==null?void 0:Q.documents)==null?void 0:fe.bipPdfUrl)),x}function g(y){var E,x,w,P,R,A,_,m,S,I,k,C,O,D,F,N,M,L,z,j,H,G,W,ne,de,se,ce,te;const b={};return a.value.studentData.firstName&&(b.firstName=(x=(E=y.app)==null?void 0:E.studentData)==null?void 0:x.firstName),a.value.studentData.lastName&&(b.lastName=(P=(w=y.app)==null?void 0:w.studentData)==null?void 0:P.lastName),a.value.studentData.grade&&(b.grade=(A=(R=y.app)==null?void 0:R.studentData)==null?void 0:A.grade),a.value.studentData.plan&&(b.plan=(m=(_=y.app)==null?void 0:_.studentData)==null?void 0:m.plan),a.value.studentData.caseManagerId&&(b.caseManagerId=(I=(S=y.app)==null?void 0:S.studentData)==null?void 0:I.caseManagerId),a.value.dates.reviewDate&&(b.reviewDate=(C=(k=y.app)==null?void 0:k.dates)==null?void 0:C.reviewDate),a.value.dates.reevalDate&&(b.reevalDate=(D=(O=y.app)==null?void 0:O.dates)==null?void 0:D.reevalDate),a.value.dates.meetingDate&&(b.meetingDate=(N=(F=y.app)==null?void 0:F.dates)==null?void 0:N.meetingDate),a.value.providers.all&&o.forEach(Z=>{var ye,J;b[Z]=(J=(ye=y.app)==null?void 0:ye.providers)==null?void 0:J[Z]}),a.value.accommodations.instruction&&(b.instruction=(L=(M=y.app)==null?void 0:M.accommodations)==null?void 0:L.instruction),a.value.accommodations.assessment&&(b.assessment=(j=(z=y.app)==null?void 0:z.accommodations)==null?void 0:j.assessment),a.value.schedule.periods&&(b.schedule=(G=(H=y.app)==null?void 0:H.schedule)==null?void 0:G.periods),a.value.schedule.classServices&&(b.classServices=(ne=(W=y.app)==null?void 0:W.schedule)==null?void 0:ne.classServices),a.value.documents.ataglancePdfUrl&&(b.ataglancePdfUrl=(se=(de=y.app)==null?void 0:de.documents)==null?void 0:se.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(b.bipPdfUrl=(te=(ce=y.app)==null?void 0:ce.documents)==null?void 0:te.bipPdfUrl),b}function v(){const y=r.students.map(_=>p(_)),b=[],E=[],x={firstName:"First Name",lastName:"Last Name",grade:"Grade",plan:"Plan Type",caseManagerId:"Case Manager",reviewDate:"Plan Review",reevalDate:"Reevaluation",meetingDate:"Meeting Date",speechId:"Speech",otId:"OT",mhId:"Mental Health",ptId:"PT",scId:"SC",trId:"TR",audId:"Audiology",viId:"Vision",atId:"AT",dhhId:"DHH",omId:"O&M",bisId:"BIS",hnId:"HN",swId:"SW",instruction:"Instructional Accommodation",assessment:"Assessment Accommodations",schedule:"Schedule",classServices:"Class Services",ataglancePdfUrl:"At-A-Glance",bipPdfUrl:"BIP"};Object.entries(a.value).forEach(([_,m])=>{Object.entries(m).forEach(([S,I])=>{I&&(S==="all"?o.forEach(k=>{b.push(x[k])}):b.push(x[S]))})}),y.forEach(_=>{const m=[];Object.entries(a.value).forEach(([S,I])=>{Object.entries(I).forEach(([k,C])=>{if(C)if(k==="all")o.forEach(O=>{const D=_[O]||"";m.push(D?c(D):"")});else{let O=_[k]||"";k.endsWith("Id")?O=O?c(O):"":k==="classServices"?O=Array.isArray(_.classServices)?_.classServices.join(", "):"":k==="schedule"&&(O=_.schedule?Object.entries(_.schedule).map(([D,F])=>`${D}: ${c(F)}`).join("; "):""),m.push(O)}})}),E.push(m)});const w=[b.join(","),...E.map(_=>_.map(m=>`"${String(m).replace(/"/g,'""')}"`).join(","))].join(`
`),P=new Blob([w],{type:"text/csv"}),R=window.URL.createObjectURL(P),A=document.createElement("a");A.href=R,A.download="students-export.csv",A.click(),window.URL.revokeObjectURL(R),n("close")}return(y,b)=>(B(),U("div",gj,[d("div",vj,[d("header",null,[b[17]||(b[17]=d("h2",null,"Export Students",-1)),d("button",{onClick:b[0]||(b[0]=E=>y.$emit("close")),class:"close-btn"},"")]),d("main",null,[d("p",null,"Export "+Y(t.students.length)+" students",1),d("div",yj,[d("div",xj,[b[23]||(b[23]=d("h4",null,"Student Info",-1)),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[1]||(b[1]=E=>a.value.studentData.firstName=E)},null,512),[[Et,a.value.studentData.firstName]]),b[18]||(b[18]=we(" First Name "))]),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[2]||(b[2]=E=>a.value.studentData.lastName=E)},null,512),[[Et,a.value.studentData.lastName]]),b[19]||(b[19]=we(" Last Name "))]),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[3]||(b[3]=E=>a.value.studentData.grade=E)},null,512),[[Et,a.value.studentData.grade]]),b[20]||(b[20]=we(" Grade "))]),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[4]||(b[4]=E=>a.value.studentData.plan=E)},null,512),[[Et,a.value.studentData.plan]]),b[21]||(b[21]=we(" Plan Type "))]),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[5]||(b[5]=E=>a.value.studentData.caseManagerId=E)},null,512),[[Et,a.value.studentData.caseManagerId]]),b[22]||(b[22]=we(" Case Manager "))])]),d("div",Ej,[b[27]||(b[27]=d("h4",null,"Important Dates",-1)),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[6]||(b[6]=E=>a.value.dates.reviewDate=E)},null,512),[[Et,a.value.dates.reviewDate]]),b[24]||(b[24]=we(" Plan Review "))]),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[7]||(b[7]=E=>a.value.dates.reevalDate=E)},null,512),[[Et,a.value.dates.reevalDate]]),b[25]||(b[25]=we(" Reevaluation "))]),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[8]||(b[8]=E=>a.value.dates.meetingDate=E)},null,512),[[Et,a.value.dates.meetingDate]]),b[26]||(b[26]=we(" Meeting Date "))])]),d("div",_j,[b[29]||(b[29]=d("h4",null,"Related Services",-1)),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[9]||(b[9]=E=>a.value.providers.all=E)},null,512),[[Et,a.value.providers.all]]),b[28]||(b[28]=we(" All Service Providers "))])]),d("div",bj,[b[32]||(b[32]=d("h4",null,"Accommodations",-1)),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[10]||(b[10]=E=>a.value.accommodations.instruction=E)},null,512),[[Et,a.value.accommodations.instruction]]),b[30]||(b[30]=we(" Instructional "))]),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[11]||(b[11]=E=>a.value.accommodations.assessment=E)},null,512),[[Et,a.value.accommodations.assessment]]),b[31]||(b[31]=we(" Assessment "))])]),d("div",Sj,[b[35]||(b[35]=d("h4",null,"Schedule & Services",-1)),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[12]||(b[12]=E=>a.value.schedule.periods=E)},null,512),[[Et,a.value.schedule.periods]]),b[33]||(b[33]=we(" Class Schedule "))]),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[13]||(b[13]=E=>a.value.schedule.classServices=E)},null,512),[[Et,a.value.schedule.classServices]]),b[34]||(b[34]=we(" Class Services "))])]),d("div",Aj,[b[38]||(b[38]=d("h4",null,"Documents",-1)),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[14]||(b[14]=E=>a.value.documents.ataglancePdfUrl=E)},null,512),[[Et,a.value.documents.ataglancePdfUrl]]),b[36]||(b[36]=we(" At-A-Glance "))]),d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":b[15]||(b[15]=E=>a.value.documents.bipPdfUrl=E)},null,512),[[Et,a.value.documents.bipPdfUrl]]),b[37]||(b[37]=we(" BIP "))])])]),d("div",{class:"quick-select"},[d("button",{onClick:f},"Select All"),d("button",{onClick:h},"Deselect All")])]),d("footer",null,[d("button",{onClick:b[16]||(b[16]=E=>y.$emit("close")),class:"btn-secondary"},"Cancel"),d("button",{onClick:v,class:"btn-primary",disabled:!l.value},"Export",8,Tj)])])]))}},Cj=xt(wj,[["__scopeId","data-v-08e1f384"]]),Ij={class:"modal-body"},kj={class:"student-info"},Dj={class:"case-manager-info"},Pj={class:"form-group"},Rj={key:0,class:"no-forms-message"},Fj={key:1,class:"form-selection"},Nj=["id","value"],Oj=["for"],Mj={class:"form-title"},Lj={class:"form-details"},Bj={key:0,class:"form-description"},Uj={class:"form-date"},$j={key:0,class:"form-group"},Vj={class:"teacher-selection-header"},Hj={class:"teacher-actions"},jj=["title"],Gj={class:"teacher-selection"},Wj={key:0,class:"no-teachers-message"},zj={key:1,class:"teacher-checkboxes"},Kj=["id","value"],qj=["for"],Xj={class:"teacher-email"},Yj={key:0,class:"selected-emails-preview"},Qj={class:"email-preview"},Jj={key:1,class:"form-group"},Zj={class:"duplication-options"},eG={class:"option-item"},tG={key:2,class:"form-group"},rG={class:"send-history"},nG={class:"history-info"},sG={class:"history-date"},aG={class:"history-teachers"},iG={key:0,class:"history-success"},oG={key:1,class:"history-failed"},lG={key:0,class:"history-links"},cG=["href"],uG=["href"],dG={key:0,class:"resource-links"},fG={class:"resource-section"},hG={class:"resource-note"},pG={class:"success-details"},mG={key:0,class:"student-info"},gG={class:"form-link"},vG=["href"],yG={class:"modal-footer"},xG=["disabled"],EG={key:0},_G={key:1},bG={__name:"TeacherFeedbackDialog",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!0}},emits:["close","form-sent"],setup(t,{emit:e}){const r=t,n=e,{activeForms:s}=Zy(),{userList:i,fetchUsers:a}=Ea(),o=ae(!1),l=ae(""),c=ae(""),u=ae(null),f=ae(!1),h=ae("Copy teacher emails to clipboard"),p=ae(""),g=ae([]),v=be(()=>s.value||[]),y=be(()=>{var I;return p.value&&((I=v.value)==null?void 0:I.find(k=>k.id===p.value))||null}),b=be(()=>{if(!p.value||!r.student)return[];try{return JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]").filter(k=>k&&k.studentId===r.student.id&&k.formId===p.value).sort((k,C)=>new Date(C.sentAt)-new Date(k.sentAt))||[]}catch(I){return console.warn("Error parsing send history:",I),[]}}),E=be(()=>{var k,C,O;if(!r.student||!i.value)return[];const I=new Set;if((C=(k=r.student.app)==null?void 0:k.schedule)!=null&&C.periods)Object.values(r.student.app.schedule.periods).forEach(D=>{var N;const F=typeof D=="string"?D:D==null?void 0:D.teacherId;F&&I.add(F),(N=D==null?void 0:D.coTeaching)!=null&&N.caseManagerId&&I.add(D.coTeaching.caseManagerId)});else{const D=r.student.schedule||{};Object.values(D).forEach(F=>{F&&I.add(F)})}return(O=r.student.aeries)!=null&&O.schedule&&Object.values(r.student.aeries.schedule).forEach(D=>{D!=null&&D.teacherId&&I.add(D.teacherId)}),Array.from(I).map(D=>(i.value||[]).find(F=>F&&F.id===D)).filter(Boolean).filter(D=>D&&D.role==="teacher")}),x=be(()=>p.value&&(g.value||[]).length>0),w=I=>I?(I.seconds?new Date(I.seconds*1e3):new Date(I)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",P=I=>I?(I.seconds?new Date(I.seconds*1e3):new Date(I)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):"",R=()=>{g.value=[...E.value]},A=async()=>{const I=g.value.map(k=>k.email).join(", ");try{await navigator.clipboard.writeText(I),h.value=" Copied!",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}catch(k){console.error("Failed to copy emails:",k);const C=document.createElement("textarea");C.value=I,document.body.appendChild(C),C.select();try{document.execCommand("copy"),h.value=" Copied!",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}catch{h.value=" Copy failed",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}document.body.removeChild(C)}},_=async()=>{var I,k,C,O;if(x.value)try{o.value=!0,l.value="",u.value=null;const D=y.value,F=g.value.map(de=>de.email),N=g.value.map(de=>de.name||de.email).join(", "),M=r.student.firstName||r.student.first_name||((k=(I=r.student.app)==null?void 0:I.studentData)==null?void 0:k.firstName)||"",L=r.student.lastName||r.student.last_name||((O=(C=r.student.app)==null?void 0:C.studentData)==null?void 0:O.lastName)||"",z=`${M} ${L}`.trim(),j=(((M==null?void 0:M[0])||"")+((L==null?void 0:L[0])||"")).toUpperCase()||"ST";let H=D.formUrl;H.includes("/edit")&&(H=H.replace("/edit","/copy"));const G=new URLSearchParams;j&&j!=="ST"&&G.append("title",`${j} - ${D.title}`),z&&G.append("student",z),F.length>0&&G.append("responders",F.join(", "));const W=H.includes("?")?"&":"?",ne=G.toString()?`${H}${W}${G.toString()}`:H;window.open(ne,"_blank","noopener"),l.value=`Form opened for ${N}. Student: ${j} - ${z}`,c.value="success",u.value={message:`Form opened successfully for ${j} - ${z}`,sent:F.length,failed:0,formUrl:ne,studentInitials:j,studentName:z},m(D,g.value,ne)}catch(D){console.error("Error opening form:",D),l.value="Failed to open form. Please try again.",c.value="error"}finally{o.value=!1}},m=(I,k,C=null)=>{const O=JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]"),D={id:`${I.id}_${r.student.id}_${Date.now()}`,formId:I.id,formTitle:I.title,formUrl:C||I.formUrl,sheetUrl:null,studentId:r.student.id,studentName:`${r.student.firstName} ${r.student.lastName}`,caseManagerId:r.currentUser.uid,caseManagerName:r.currentUser.name||r.currentUser.email,teachers:k.map(N=>({id:N.id,name:N.name,email:N.email})),sentAt:new Date().toISOString(),method:"gmail"},F=O.findIndex(N=>N.id===D.id);F!==-1?O[F]=D:O.push(D),localStorage.setItem("casemanage_sent_forms",JSON.stringify(O))},S=()=>{n("close")};return Wt(()=>{p.value="",g.value=[],l.value="",a()}),Vt(E,I=>{I&&I.length>0&&g.value.length===0&&(g.value=[...I])},{immediate:!0}),(I,k)=>{var C,O,D,F;return B(),U("div",{class:"modal-overlay",onClick:S},[d("div",{class:"modal-content",onClick:k[3]||(k[3]=Xr(()=>{},["stop"]))},[d("div",{class:"modal-header"},[k[4]||(k[4]=d("h3",null,"Send Teacher Feedback Form",-1)),d("button",{onClick:S,class:"close-btn"},"")]),d("div",Ij,[d("div",kj,[d("h4",null,Y(t.student.firstName)+" "+Y(t.student.lastName)+" (Grade "+Y(t.student.grade)+")",1),d("p",Dj,"Case Manager: "+Y(((C=t.currentUser)==null?void 0:C.name)||((O=t.currentUser)==null?void 0:O.email)),1)]),d("div",Pj,[k[6]||(k[6]=d("label",null,"Select Feedback Form to Send:",-1)),v.value.length===0?(B(),U("div",Rj,k[5]||(k[5]=[d("p",null,"No feedback forms available. Forms must be created in the Admin Panel first.",-1),d("p",null,[d("em",null,"Contact your administrator to create feedback forms.")],-1)]))):(B(),U("div",Fj,[(B(!0),U(Pe,null,je(v.value,N=>(B(),U("div",{key:N.id,class:"form-option"},[Be(d("input",{type:"radio",id:N.id,value:N.id,"onUpdate:modelValue":k[0]||(k[0]=M=>p.value=M)},null,8,Nj),[[pa,p.value]]),d("label",{for:N.id,class:"form-option-label"},[d("div",Mj,Y(N.title),1),d("div",Lj,[N.description?(B(),U("span",Bj,Y(N.description),1)):xe("",!0),d("span",Uj,"Created: "+Y(w(N.createdAt)),1)])],8,Oj)]))),128))]))]),p.value?(B(),U("div",$j,[d("div",Vj,[k[7]||(k[7]=d("label",null,"Select Teachers to Send Form To:",-1)),d("div",Hj,[E.value.length>0?(B(),U("button",{key:0,onClick:R,type:"button",class:"btn-select-all"}," Select All ")):xe("",!0),g.value.length>0?(B(),U("button",{key:1,onClick:A,type:"button",class:"btn-copy-emails",title:h.value},"  Copy Emails ",8,jj)):xe("",!0)])]),d("div",Gj,[E.value.length===0?(B(),U("div",Wj,k[8]||(k[8]=[d("p",null,"No teachers found for this student's schedule.",-1)]))):(B(),U("div",zj,[(B(!0),U(Pe,null,je(E.value,N=>(B(),U("div",{key:N.id,class:"checkbox-item"},[Be(d("input",{type:"checkbox",id:`teacher-${N.id}`,value:N,"onUpdate:modelValue":k[1]||(k[1]=M=>g.value=M)},null,8,Kj),[[Et,g.value]]),d("label",{for:`teacher-${N.id}`},[we(Y(N.name||N.email)+" ",1),d("span",Xj,"("+Y(N.email)+")",1)],8,qj)]))),128))]))]),g.value.length>0?(B(),U("div",Yj,[k[9]||(k[9]=d("p",null,[d("strong",null,"Selected teacher emails:")],-1)),d("div",Qj,Y(g.value.map(N=>N.email).join(", ")),1)])):xe("",!0)])):xe("",!0),p.value&&g.value.length>0&&((D=y.value)!=null&&D.sheetTemplateUrl)?(B(),U("div",Jj,[k[11]||(k[11]=d("label",null,"Response Collection:",-1)),d("div",Zj,[d("div",eG,[Be(d("input",{type:"checkbox",id:"duplicate-sheet","onUpdate:modelValue":k[2]||(k[2]=N=>f.value=N)},null,512),[[Et,f.value]]),k[10]||(k[10]=d("label",{for:"duplicate-sheet"},[d("strong",null,"Duplicate custom sheet"),d("span",{class:"option-description"},"Create a copy of the response template sheet in your Google Drive")],-1))])])])):xe("",!0),p.value&&b.value.length>0?(B(),U("div",tG,[k[12]||(k[12]=d("label",null,"Previous Sends for this Student:",-1)),d("div",rG,[(B(!0),U(Pe,null,je(b.value,N=>(B(),U("div",{key:N.id,class:"history-item"},[d("div",nG,[d("span",sG,Y(P(N.sentAt)),1),d("span",aG,Y((N.teacherEmails||[]).length)+" teacher"+Y((N.teacherEmails||[]).length===1?"":"s"),1),N.successful>0?(B(),U("span",iG," "+Y(N.successful)+" sent",1)):xe("",!0),N.failed>0?(B(),U("span",oG," "+Y(N.failed)+" failed",1)):xe("",!0)]),N.formUrl||N.sheetUrl?(B(),U("div",lG,[N.formUrl?(B(),U("a",{key:0,href:N.formUrl,target:"_blank",class:"history-link"}," Form",8,cG)):xe("",!0),N.sheetUrl?(B(),U("a",{key:1,href:N.sheetUrl,target:"_blank",class:"history-link"}," Sheet",8,uG)):xe("",!0)])):xe("",!0)]))),128))])])):xe("",!0),l.value?(B(),U("div",{key:3,class:Qe(`status-message ${c.value}`)},[we(Y(l.value)+" ",1),c.value==="success"&&u.value?(B(),U("div",dG,[d("div",fG,[k[16]||(k[16]=d("h5",null," Form Opened Successfully!",-1)),d("p",hG,[d("strong",null,Y(u.value.message),1)]),d("div",pG,[d("p",null,[k[13]||(k[13]=we("  Form opened for ")),d("strong",null,Y(u.value.sent),1),we(" teacher"+Y(u.value.sent===1?"":"s"),1)]),u.value.studentInitials?(B(),U("p",mG,[k[14]||(k[14]=we("  Student: ")),d("strong",null,Y(u.value.studentInitials),1),we(" - "+Y(u.value.studentName),1)])):xe("",!0),d("p",gG,[k[15]||(k[15]=we("  Form Link: ")),d("a",{href:u.value.formUrl,target:"_blank"},Y((F=y.value)==null?void 0:F.title),9,vG)])])])])):xe("",!0)],2)):xe("",!0)]),d("div",yG,[d("button",{onClick:S,class:"secondary-btn"},"Cancel"),d("button",{onClick:_,class:"primary-btn",disabled:!x.value||o.value},[o.value?(B(),U("span",EG,"Creating Form...")):(B(),U("span",_G," Create New Form"))],8,xG)])])])}}},SG=xt(bG,[["__scopeId","data-v-f8c1ccfe"]]),AG={class:"students-view"},TG={class:"page-header"},wG={class:"header-left"},CG={class:"search-container"},IG={class:"header-controls"},kG={class:"filter-group sort-group"},DG={key:0,class:"filter-group"},PG={class:"radio-group"},RG=["title"],FG=["value"],NG={class:"filter-group"},OG={class:"radio-group"},MG=["checked"],LG=["checked","disabled"],BG={key:0,class:"disabled-icon"},UG=["checked"],$G={key:0,class:"selected-radio-display"},VG={key:1,class:"filters-panel"},HG={class:"filters-content"},jG={class:"filter-group"},GG=["value"],WG={class:"filter-group"},zG=["value"],KG={class:"filter-group"},qG=["value"],XG={class:"filter-group"},YG={class:"content"},QG={class:"print-user-name"},JG={key:0},ZG={key:1,class:"view-container"},eW={key:0,class:"group-section"},tW={class:"group-header"},rW={key:2,class:"view-section"},nW={__name:"StudentsView",setup(t){var ve;const e=xn(),r=z7(),n=q7(r),s=nU(r,n);console.log(" STUDENTS VIEW DEBUG: Setting up watcher, currentRole:",(ve=s.currentRole)==null?void 0:ve.value),Vt(()=>{var ie;return(ie=s.currentRole)==null?void 0:ie.value},ie=>{console.log(" STUDENTS VIEW DEBUG: Role changed to:",ie),ie==="paraeducator"&&(console.log(" STUDENTS VIEW DEBUG: Paraeducator role detected, setting up visibleStudents watcher"),Vt(()=>{var ee;return(ee=s.visibleStudents)==null?void 0:ee.value},ee=>{console.log(" STUDENTS VIEW: Paraeducator visibleStudents changed:",{count:(ee==null?void 0:ee.length)||0,studentNames:(ee==null?void 0:ee.map(ge=>{var Te,Ie,Ae,We;return`${((Ie=(Te=ge.app)==null?void 0:Te.studentData)==null?void 0:Ie.firstName)||"Unknown"} ${((We=(Ae=ge.app)==null?void 0:Ae.studentData)==null?void 0:We.lastName)||"Unknown"}`}))||[]})},{immediate:!0}))},{immediate:!0});const i=iU(r),{students:a,userMapObj:o,caseManagers:l,teacherList:c,userRoles:u,aideAssignment:f,paraeducators:h,currentUser:p,isAdmin:g,showProviderView:v,getStudentById:y}=r,{showFilters:b,currentFilters:E,toggleFilters:x,applyFilters:w,debouncedApplyFilters:P}=n,{visibleStudents:R,canEditAllStudents:A,canEditOwnStudents:_,canViewAllStudents:m,canAccessTesting:S,canAccessTestingPartial:I,canAccessFilters:k,isClassViewDisabled:C,setViewMode:O,providerViewOptions:D}=s,F=aU(r,n,be(()=>s.visibleStudents.value)),{currentViewMode:N,studentsByClass:M,directAssignmentStudents:L,testingViewStudents:z}=F,{editingStudentId:j,emailingStudentId:H,showExport:G,showAddStudent:W,showFeedbackDialog:ne,feedbackStudentId:de,editStudent:se,emailStudent:ce,handleTeacherFeedback:te,handleFormSent:Z,handleStudentAdded:ye,handleStudentSaved:J,handleNavAction:X}=i,Q=ie=>{var ge;const ee=(ge=p.value)==null?void 0:ge.role;switch(ie){case"all_iep":return"CM+SP";case"case_manager":return"Case Manager";case"service_provider":return"Service Provider";case"teacher":return"Service Provider";case"iep_504_all":return"All IEP/504 students";case"all":return ee==="sped_chair"?"All students (with IEPs)":"All students";default:return"All students"}};be(()=>{var ee;return D!=null&&D.value?D.value:((ee=p.value)==null?void 0:ee.role)==="case_manager"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]});const fe=be(()=>{var ee;const ie=[];if(E.providerView&&((ee=D==null?void 0:D.value)!=null&&ee.length)){const ge=Q(E.providerView);ge&&ie.push(ge)}if(E.viewMode){let ge="";switch(E.viewMode){case"list":ge="List view";break;case"class":ge="Class-period view";break;case"testing":ge="Separate Setting For Testing";break}ge&&ie.push(ge)}return ie.length>0?ie.join(" | "):""});return(ie,ee)=>{var ge,Te,Ie,Ae,We,De,He,$e;return B(),U("div",AG,[Oe(_U,{"current-user":q(p),"is-admin":q(g),onAction:q(X)},null,8,["current-user","is-admin","onAction"]),d("div",TG,[d("div",wG,[ee[23]||(ee[23]=d("h1",null,"Student Management",-1)),d("div",CG,[Be(d("input",{type:"text","onUpdate:modelValue":ee[0]||(ee[0]=ke=>q(E).search=ke),onInput:ee[1]||(ee[1]=(...ke)=>q(P)&&q(P)(...ke)),placeholder:"Search students...",class:"search-input"},null,544),[[gt,q(E).search]])])]),d("div",IG,[d("div",kG,[Oe(q(UB),{size:16,class:"sort-icon"}),Be(d("select",{"onUpdate:modelValue":ee[2]||(ee[2]=ke=>q(E).sortBy=ke),onChange:ee[3]||(ee[3]=ke=>q(w)()),class:"sort-select"},ee[24]||(ee[24]=[Dn('<option value="firstName" data-v-37eb092e>First Names</option><option value="lastName" data-v-37eb092e>Last Name</option><option value="grade" data-v-37eb092e>Grade</option><option value="reviewDate" data-v-37eb092e>Plan Review Date</option><option value="reevalDate" data-v-37eb092e>Re-evaluation Date</option><option value="meetingDate" data-v-37eb092e>Meeting Date</option>',6)]),544),[[cr,q(E).sortBy]])]),q(D)&&q(D).length?(B(),U("div",DG,[d("div",PG,[(B(!0),U(Pe,null,je(q(D),ke=>(B(),U("label",{key:ke.value,class:Qe(["radio-btn icon-btn",{active:q(E).providerView===ke.value}]),title:Q(ke.value)},[Be(d("input",{type:"radio","onUpdate:modelValue":ee[4]||(ee[4]=Ke=>q(E).providerView=Ke),value:ke.value,onChange:ee[5]||(ee[5]=(...Ke)=>q(w)&&q(w)(...Ke))},null,40,FG),[[pa,q(E).providerView]]),ke.value==="all_iep"?(B(),Qt(q(jl),{key:0,size:16})):ke.value==="case_manager"?(B(),Qt(q(Uv),{key:1,size:16})):ke.value==="service_provider"||ke.value==="teacher"?(B(),Qt(q(s7),{key:2,size:16})):ke.value==="all"||ke.value==="iep_504_all"?(B(),Qt(q(qB),{key:3,size:16})):xe("",!0)],10,RG))),128))])])):xe("",!0),d("div",NG,[d("div",OG,[d("label",{class:Qe(["radio-btn icon-btn",{active:q(E).viewMode==="list"}]),title:"List view"},[d("input",{type:"radio",value:"list",checked:q(E).viewMode==="list",onChange:ee[6]||(ee[6]=ke=>q(O)("list"))},null,40,MG),Oe(q(ZB),{size:16})],2),d("label",{class:Qe(["radio-btn icon-btn",{active:q(E).viewMode==="class",disabled:q(C)}]),title:"Class-period view"},[d("input",{type:"radio",value:"class",checked:q(E).viewMode==="class",onChange:ee[7]||(ee[7]=ke=>q(O)("class")),disabled:q(C)},null,40,LG),Oe(q(WB),{size:16,class:Qe({strikethrough:q(C)})},null,8,["class"]),q(C)?(B(),U("span",BG,"")):xe("",!0)],2),q(S)?(B(),U("label",{key:0,class:Qe(["radio-btn icon-btn",{active:q(E).viewMode==="testing"}]),title:"Separate Setting For Testing"},[d("input",{type:"radio",value:"testing",checked:q(E).viewMode==="testing",onChange:ee[8]||(ee[8]=ke=>q(O)("testing"))},null,40,UG),Oe(q(Mv),{size:16})],2)):xe("",!0)])]),q(k)?(B(),U("button",{key:1,onClick:ee[9]||(ee[9]=(...ke)=>q(x)&&q(x)(...ke)),class:Qe(["radio-btn icon-btn filter-toggle-btn",{active:q(b)}]),title:"Toggle filters"},[Oe(q(KB),{size:16})],2)):xe("",!0)])]),fe.value?(B(),U("div",$G,Y(fe.value),1)):xe("",!0),q(b)?(B(),U("div",VG,[d("div",HG,[d("div",jG,[ee[26]||(ee[26]=d("label",null,"Case Manager",-1)),Be(d("select",{"onUpdate:modelValue":ee[10]||(ee[10]=ke=>q(E).cm=ke),onChange:ee[11]||(ee[11]=ke=>q(w)()),class:"filter-select"},[ee[25]||(ee[25]=d("option",{value:"all"},"All Case Managers",-1)),(B(!0),U(Pe,null,je(q(l),ke=>(B(),U("option",{key:ke.id,value:ke.id},Y(ke.name||ke.email||ke.id),9,GG))),128))],544),[[cr,q(E).cm]])]),d("div",WG,[ee[28]||(ee[28]=d("label",null,"Teacher",-1)),Be(d("select",{"onUpdate:modelValue":ee[12]||(ee[12]=ke=>q(E).teacher=ke),onChange:ee[13]||(ee[13]=ke=>q(w)()),class:"filter-select"},[ee[27]||(ee[27]=d("option",{value:"all"},"All Teachers",-1)),(B(!0),U(Pe,null,je(q(c),ke=>(B(),U("option",{key:ke.id,value:ke.id},Y(ke.name||ke.email||ke.id),9,zG))),128))],544),[[cr,q(E).teacher]])]),d("div",KG,[ee[30]||(ee[30]=d("label",null,"Paraeducator",-1)),Be(d("select",{"onUpdate:modelValue":ee[14]||(ee[14]=ke=>q(E).paraeducator=ke),onChange:ee[15]||(ee[15]=ke=>q(w)()),class:"filter-select"},[ee[29]||(ee[29]=d("option",{value:"all"},"All Paraeducators",-1)),(B(!0),U(Pe,null,je(q(h),ke=>(B(),U("option",{key:ke.id,value:ke.id},Y(ke.name||ke.email||ke.id),9,qG))),128))],544),[[cr,q(E).paraeducator]])]),d("div",XG,[ee[32]||(ee[32]=d("label",null,"Plan Type",-1)),Be(d("select",{"onUpdate:modelValue":ee[16]||(ee[16]=ke=>q(E).plan=ke),onChange:ee[17]||(ee[17]=ke=>q(w)()),class:"filter-select"},ee[31]||(ee[31]=[d("option",{value:"all"},"All Plans",-1),d("option",{value:"IEP"},"IEP",-1),d("option",{value:"504"},"504",-1)]),544),[[cr,q(E).plan]])])])])):xe("",!0),d("div",YG,[d("div",QG,Y(((ge=q(e).currentUser)==null?void 0:ge.name)||((Te=q(e).currentUser)==null?void 0:Te.email)||((Ie=q(e).currentUser)==null?void 0:Ie.displayName)||((Ae=q(p))==null?void 0:Ae.name)||((We=q(p))==null?void 0:We.email)||"System User"),1),q(N)==="list"?(B(),U("div",JG,[Oe(zf,{students:q(R),"user-map":q(o),"current-user":q(p),"student-data":q(r),"can-edit-all":q(A),"can-edit-own":q(_),"can-view-all":q(m),"can-access-testing":q(S),"can-access-testing-partial":q(I),"aide-schedule":((De=q(p))==null?void 0:De.role)==="paraeducator"?q(f):{},onEdit:q(se),onEmail:q(ce),onTeacherFeedback:q(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):q(N)==="class"?(B(),U("div",ZG,[q(L).length>0?(B(),U("div",eW,[ee[33]||(ee[33]=d("h3",{class:"group-header direct-assignment-header"},"Direct Assignment",-1)),Oe(zf,{students:q(L),"user-map":q(o),"current-user":q(p),"student-data":q(r),"can-edit-all":q(A),"can-edit-own":q(_),"can-view-all":q(m),"can-access-testing":q(S),"can-access-testing-partial":q(I),"aide-schedule":((He=q(p))==null?void 0:He.role)==="paraeducator"?q(f):{},onEdit:q(se),onEmail:q(ce),onTeacherFeedback:q(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):xe("",!0),(B(!0),U(Pe,null,je(q(M),(ke,Ke)=>{var _e;return B(),U("div",{key:Ke,class:"group-section"},[d("h3",tW,"Period "+Y(Ke),1),Oe(zf,{students:ke,"user-map":q(o),"current-user":q(p),"student-data":q(r),"can-edit-all":q(A),"can-edit-own":q(_),"can-view-all":q(m),"can-access-testing":q(S),"can-access-testing-partial":q(I),"aide-schedule":((_e=q(p))==null?void 0:_e.role)==="paraeducator"?q(f):{},onEdit:q(se),onEmail:q(ce),onTeacherFeedback:q(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])}),128))])):q(N)==="testing"?(B(),U("div",rW,[Oe(zf,{students:q(z),"user-map":q(o),"current-user":q(p),"student-data":q(r),"can-edit-all":q(A),"can-edit-own":q(_),"can-view-all":q(m),"can-access-testing":q(S),"can-access-testing-partial":q(I),"testing-view":!0,"aide-schedule":(($e=q(p))==null?void 0:$e.role)==="paraeducator"?q(f):{},onEdit:q(se),onEmail:q(ce),onTeacherFeedback:q(te)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):xe("",!0)]),q(j)?(B(),Qt(GH,{key:2,"student-id":q(j),users:{userRoles:q(u)},onClose:ee[18]||(ee[18]=ke=>j.value=null),onSaved:q(J)},null,8,["student-id","users","onSaved"])):xe("",!0),q(H)?(B(),Qt(mj,{key:3,student:q(y)(q(H)),"user-map":q(o),"current-user":q(p),onClose:ee[19]||(ee[19]=ke=>H.value=null)},null,8,["student","user-map","current-user"])):xe("",!0),q(G)?(B(),Qt(Cj,{key:4,students:q(a),"user-map":q(o),onClose:ee[20]||(ee[20]=ke=>G.value=!1)},null,8,["students","user-map"])):xe("",!0),q(W)?(B(),Qt(sx,{key:5,users:{userRoles:q(u)},onClose:ee[21]||(ee[21]=ke=>W.value=!1),onSaved:q(ye)},null,8,["users","onSaved"])):xe("",!0),q(ne)?(B(),Qt(SG,{key:6,student:q(y)(q(de)),"current-user":q(p),"user-map":q(o),onClose:ee[22]||(ee[22]=ke=>ne.value=!1),onFormSent:q(Z)},null,8,["student","current-user","user-map","onFormSent"])):xe("",!0)])}}},sW=xt(nW,[["__scopeId","data-v-37eb092e"]]),aW={class:"login-container"},iW={__name:"LoginView",setup(t){const e=Ci(),r=async()=>{try{const{user:n}=await Y1(_t,zy),s=Ze(qe,"users",n.uid);(await sr(s)).exists()||await jt(s,{name:n.displayName||"",email:n.email,role:"admin"}),e.push({name:"Home"})}catch(n){console.error("Login failed:",n),alert("Login failed: "+n.message)}};return(n,s)=>(B(),U("div",aW,[s[0]||(s[0]=d("h1",null,"Case Manager Portal",-1)),s[1]||(s[1]=d("p",null,"Please sign in with your Google account:",-1)),d("button",{onClick:r,class:"primary-btn"}," Sign in with Google ")]))}},oW=xt(iW,[["__scopeId","data-v-d9b5a53b"]]),lW={name:"TabBar",props:{tabs:{type:Array,required:!0,default:()=>[]},activeTab:{type:String,required:!0}},emits:["tab-change"],methods:{getStatusIcon(t){switch(t){case"not-active":return"";case"not-working":return"";default:return""}},getStatusTooltip(t){switch(t){case"not-active":return" = Not active";case"not-working":return" = Not working";default:return""}}}},cW={class:"admin-tab-bar"},uW=["onClick","title"];function dW(t,e,r,n,s,i){return B(),U("div",cW,[(B(!0),U(Pe,null,je(r.tabs,a=>(B(),U("button",{key:a.key,class:Qe({active:r.activeTab===a.key}),onClick:o=>t.$emit("tab-change",a.key),title:i.getStatusTooltip(a.status)},[we(Y(a.label)+" ",1),a.status?(B(),U("span",{key:0,class:Qe(["status-indicator",a.status])},Y(i.getStatusIcon(a.status)),3)):xe("",!0)],10,uW))),128))])}const fW=xt(lW,[["render",dW],["__scopeId","data-v-5be36c07"]]),hW={name:"UserAddForm",setup(){const t=Da(U4,"addUserWithRole"),e=vo(),r=Fs({name:"",email:"",role:"",provider:"",aeriesId:""}),n=ae(null),s=ae(""),i=ae(!1),a=ae(null),o=uc,{appSettings:l,loadAppSettings:c}=Ns(),u=be(()=>{if(l&&l.value&&l.value.serviceProviders){const x=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}];return l.value.serviceProviders.map(w=>x.find(P=>P.abbreviation===w)||{name:w,abbreviation:w})}return[]}),f=(x,w=!1)=>{s.value=x,i.value=w,setTimeout(()=>{s.value="",i.value=!1},5e3)},h=async(x,w,P,R,A)=>{try{const _={name:x,email:w,role:P,provider:R,aeriesId:A,createdAt:new Date,status:"active"},m=await p4(At(e,"users"),_);return await rn.logUserManagement(m.id,"create",{userData:{name:x,email:w,role:P,provider:R,aeriesId:A},method:"firestore_direct"}),{success:!0,userId:m.id}}catch(_){throw await rn.logUserManagement("unknown","create_failed",{error:_.message,attemptedData:{name:x,email:w,role:P,provider:R,aeriesId:A},method:"firestore_direct"}),_}},p=async(x,w,P,R,A)=>{var _,m;try{try{return await t({name:x,email:w,role:P,provider:R,aeriesId:A}),await rn.logUserManagement("cloud_function_user","create",{userData:{name:x,email:w,role:P,provider:R,aeriesId:A},method:"cloud_function"}),{success:!0,method:"cloud-function"}}catch(S){return S.code==="functions/already-exists"||(_=S.message)!=null&&_.includes("409")||(m=S.message)!=null&&m.includes("already exists")?(console.log(`User ${w} already exists in Firebase Auth, skipping...`),await rn.logUserManagement("existing_user","create_skipped",{userData:{name:x,email:w,role:P,provider:R,aeriesId:A},reason:"user_already_exists",method:"cloud_function"}),{success:!0,method:"already-exists",message:"User already exists"}):(await h(x,w,P,R,A),{success:!0,method:"firestore"})}}catch(S){return await rn.logUserManagement("unknown","create_failed",{error:S.message,attemptedData:{name:x,email:w,role:P,provider:R,aeriesId:A},method:"addUserToFirestore"}),{success:!1,error:S.message}}},g=async()=>{if(!ks("addUser",5,6e4).allowed){f("Too many requests. Please wait before adding another user.",!0);return}const w=M7(r),P=O7(w);if(!P.isValid){f(`Please fix the following errors:
${P.errors.join(`
`)}`,!0);return}const R=["name","email","aeriesId"];for(const _ of R)if(w[_]){const m=Hr(w[_]);if(!m.isSafe){f(`Security threat detected in ${_}: ${m.threats.join(", ")}`,!0);return}}Object.assign(r,w);const A=await p(r.name,r.email,r.role,r.provider,r.aeriesId);A.success?(f(`User ${r.name} added successfully!`),r.name="",r.email="",r.role="",r.provider="",r.aeriesId=""):f(`Error adding user: ${A.error}`,!0)},v=x=>{const w=x.target.files[0];if(w){const P=sl(w,{allowedTypes:["csv","excel"],maxSize:5242880,fieldName:"User Import File"});if(!P.isValid){f(P.error,!0),x.target.value="";return}const R=Hr(w.name);if(!R.isSafe){f(`File name contains potentially dangerous content: ${R.threats.join(", ")}`,!0),x.target.value="";return}n.value=w}},y=async()=>{if(!n.value){f("Please select a file first",!0);return}const x=n.value.name.toLowerCase();if(!(x.endsWith(".csv")||x.endsWith(".xls")||x.endsWith(".xlsx"))){f("Unsupported file type. Please upload a .csv, .xls, or .xlsx file.",!0);return}f("Processing file...");try{x.endsWith(".csv")?await b(n.value):await E(n.value)}catch(w){f(`Error processing file: ${w.message}`,!0),console.error("Bulk upload error:",w)}},b=async x=>new Promise((w,P)=>{const R=new FileReader;R.onload=async A=>{try{const m=A.target.result.trim().split(/\r?\n/);if(m.length===0){P(new Error("The CSV file is empty."));return}const S=M=>{const L=[];let z="",j=!1;for(let H=0;H<M.length;H++){const G=M[H];G==='"'?j=!j:G===","&&!j?(L.push(z.trim()),z=""):z+=G}return L.push(z.trim()),L};let I=0;const k={name:0,email:1,role:2,provider:3,aeriesId:4},C=S(m[0]);C.map(M=>M.toLowerCase()).some(M=>M.includes("name")||M.includes("email")||M.includes("role"))&&(C.forEach((M,L)=>{const z=M.trim().toLowerCase();(z==="name"||z==="displayname")&&(k.name=L),z==="email"&&(k.email=L),z==="role"&&(k.role=L),(z==="provider"||z==="providertype")&&(k.provider=L),(z==="aeriesid"||z==="aeries_id"||z==="teacherid")&&(k.aeriesId=L)}),I=1);let D=0;const F=[];for(let M=I;M<m.length;M++){const L=m[M].trim();if(!L)continue;const z=S(L),j=(z[k.name]||"").trim(),H=(z[k.email]||"").trim(),G=(z[k.role]||"").trim(),W=(z[k.provider]||"").trim(),ne=(z[k.aeriesId]||"").trim(),de=j.replace(/^"|"$/g,""),se=H.replace(/^"|"$/g,""),ce=G.replace(/^"|"$/g,""),te=W.replace(/^"|"$/g,""),Z=ne.replace(/^"|"$/g,"");if(!de||!se||!ce){F.push(`Line ${M+1}: Missing name, email, or role.`);continue}if(!$_(ce)){F.push(`Line ${M+1}: Invalid role "${ce}".`);continue}const ye=await p(de,se,ce,te,Z);ye.success?(D++,ye.method==="already-exists"&&console.log(`Line ${M+1}: User ${se} already exists, skipped`)):F.push(`Line ${M+1}: ${ye.error}`)}let N=`${D} users added successfully.`;F.length>0&&(N+=`
${F.length} errors:
`+F.join(`
`)),f(N,F.length>0),n.value=null,a.value&&(a.value.value=""),w()}catch(_){P(new Error(`Error processing CSV file: ${_.message}`))}},R.onerror=()=>P(new Error("Failed to read the CSV file.")),R.readAsText(x)}),E=async x=>new Promise((w,P)=>{const R=new FileReader;R.onload=async A=>{try{if(typeof XLSX>"u"){P(new Error("Excel upload requires SheetJS (XLSX) library. Please include it in your page."));return}const _=new Uint8Array(A.target.result),m=XLSX.read(_,{type:"array"}),S=m.SheetNames[0],I=m.Sheets[S],k=XLSX.utils.sheet_to_json(I,{defval:""});if(k.length===0){P(new Error("The Excel file is empty or unrecognized."));return}let C=0;const O=[];for(let F=0;F<k.length;F++){const N=k[F];let M="",L="",z="",j="",H="";for(const ne in N){const de=ne.toLowerCase(),se=(""+N[ne]).trim();(de==="name"||de==="displayname")&&!M?M=se:de==="email"&&!L?L=se:de==="role"&&!z?z=se:(de==="provider"||de==="providertype")&&!j?j=se:(de==="aeriesid"||de==="aeries_id"||de==="teacherid")&&!H&&(H=se)}const G=Object.values(N).map(ne=>(""+ne).trim());if(!M&&G[0]&&(M=G[0]),!L&&G[1]&&(L=G[1]),!z&&G[2]&&(z=G[2]),!j&&G[3]&&(j=G[3]),!H&&G[4]&&(H=G[4]),!M||!L||!z){O.push(`Row ${F+1}: Missing name, email, or role.`);continue}if(!$_(z)){O.push(`Row ${F+1}: Invalid role "${z}".`);continue}const W=await p(M,L,z,j,H);W.success?(C++,W.method==="already-exists"&&console.log(`Row ${F+1}: User ${L} already exists, skipped`)):O.push(`Row ${F+1}: ${W.error}`)}let D=`${C} users added successfully.`;O.length>0&&(D+=`
${O.length} errors:
`+O.join(`
`)),f(D,O.length>0),n.value=null,a.value&&(a.value.value=""),w()}catch(_){P(new Error(`Error processing Excel file: ${_.message}`))}},R.onerror=()=>P(new Error("Failed to read the Excel file.")),R.readAsArrayBuffer(x)});return Wt(async()=>{await c()}),{singleUser:r,validRoles:o,providerOptions:u,addSingleUser:g,selectedFile:n,statusMessage:s,isError:i,bulkFileInput:a,handleFileSelect:v,uploadBulkUsers:y,appSettings:l}}},pW={class:"add-user-wrapper"},mW={class:"add-single"},gW=["value"],vW={key:0},yW=["value"],xW={class:"add-bulk"},EW=["disabled"];function _W(t,e,r,n,s,i){return B(),U("div",pW,[d("div",mW,[e[16]||(e[16]=d("h3",null,"Add Single User",-1)),d("form",{onSubmit:e[5]||(e[5]=Xr((...a)=>n.addSingleUser&&n.addSingleUser(...a),["prevent"])),class:"form-grid"},[d("div",null,[d("label",null,[e[8]||(e[8]=we(" Name: ")),Be(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.singleUser.name=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[gt,n.singleUser.name]])])]),d("div",null,[d("label",null,[e[9]||(e[9]=we(" Email: ")),Be(d("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>n.singleUser.email=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[gt,n.singleUser.email]])])]),d("div",null,[d("label",null,[e[11]||(e[11]=we(" Role: ")),Be(d("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.singleUser.role=a),required:""},[e[10]||(e[10]=d("option",{value:"",disabled:""},"Select role...",-1)),(B(!0),U(Pe,null,je(n.validRoles,a=>(B(),U("option",{key:a,value:a},Y(a),9,gW))),128))],512),[[cr,n.singleUser.role]])])]),n.providerOptions.length>0?(B(),U("div",vW,[d("label",null,[e[13]||(e[13]=we(" Provider Type: ")),Be(d("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.singleUser.provider=a)},[e[12]||(e[12]=d("option",{value:""},"None",-1)),(B(!0),U(Pe,null,je(n.providerOptions,a=>(B(),U("option",{key:a.abbreviation,value:a.abbreviation},Y(a.name)+" ("+Y(a.abbreviation)+") ",9,yW))),128))],512),[[cr,n.singleUser.provider]])])])):xe("",!0),d("div",null,[d("label",null,[e[14]||(e[14]=we(" Aeries ID: ")),Be(d("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>n.singleUser.aeriesId=a),placeholder:"Optional Aeries Teacher ID"},null,512),[[gt,n.singleUser.aeriesId]])])]),e[15]||(e[15]=d("button",{type:"submit"},"Add User",-1))],32)]),d("div",xW,[e[17]||(e[17]=d("h3",null,"Bulk Upload Users",-1)),d("div",null,[d("input",{type:"file",ref:"bulkFileInput",accept:".csv, .xls, .xlsx",onChange:e[6]||(e[6]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),d("button",{onClick:e[7]||(e[7]=(...a)=>n.uploadBulkUsers&&n.uploadBulkUsers(...a)),disabled:!n.selectedFile}," Upload Users ",8,EW)]),e[18]||(e[18]=Dn(`<h4 data-v-9f1e8c9c>Example Formatting</h4><div data-v-9f1e8c9c>File needs to be in .csv, .xls, .xlsx format, like an Excel spreadsheet.</div><div class="example-format" data-v-9f1e8c9c><p data-v-9f1e8c9c><strong data-v-9f1e8c9c>CSV Format:</strong></p><pre data-v-9f1e8c9c>Name,Email,Role,Provider,AeriesID
&quot;John Smith&quot;,&quot;john.smith@school.org&quot;,&quot;teacher&quot;,&quot;&quot;,&quot;123456&quot;
&quot;Jane Doe&quot;,&quot;jane.doe@school.org&quot;,&quot;service_provider&quot;,&quot;SLP&quot;,&quot;789012&quot;
&quot;Bob Johnson&quot;,&quot;bob.johnson@school.org&quot;,&quot;case_manager&quot;,&quot;&quot;,&quot;&quot;</pre><p data-v-9f1e8c9c><strong data-v-9f1e8c9c>Supported Roles:</strong> admin, teacher, case_manager, sped_chair, service_provider</p><p data-v-9f1e8c9c><strong data-v-9f1e8c9c>Provider Types:</strong> SLP, OT, PT, SC, MH, TR, AUD, VI, AT, DHH, O&amp;M, BIS, HN, SW</p><p data-v-9f1e8c9c><strong data-v-9f1e8c9c>Aeries ID:</strong> Optional 6-digit teacher ID from Aeries system</p></div>`,3))]),n.statusMessage?(B(),U("div",{key:0,class:Qe(["status-msg",{error:n.isError}])},Y(n.statusMessage),3)):xe("",!0)])}const bW=xt(hW,[["render",_W],["__scopeId","data-v-9f1e8c9c"]]),Ya=ae({}),Kf=ae(!1),cg=ae(!1);function gI(){const t=xn(),e=be(()=>t.currentUser),r=async()=>{if(Kf.value||cg.value)return Ya.value;Kf.value=!0;try{const o=Ze(qe,"app_settings","admin_panel_permissions"),l=await sr(o);return l.exists()?Ya.value=l.data():Ya.value={},cg.value=!0,Ya.value}catch(o){return console.error("Error loading admin panel permissions:",o),Ya.value={},Ya.value}finally{Kf.value=!1}},n=be(()=>o=>{var c,u;if(!((c=e.value)!=null&&c.role)||!Ya.value[o])return!1;const l=e.value.role;return l==="admin"?!0:((u=Ya.value[o])==null?void 0:u[l])===!0}),s=be(()=>n.value("delete-all-users")),i=be(()=>n.value("delete-all-students"));return{permissions:Ya,isLoading:Kf,hasPermission:n,canDeleteAllUsers:s,canDeleteAllStudents:i,loadPermissions:r,initializeIfNeeded:async()=>{cg.value||await r()}}}const cu=20,SW={name:"UserTable",setup(){const t=vo(),e=ae([]),r=ae(1),n=ae("name"),s=ae(""),i=ae(null),a=ae(""),o=ae(!1),l=ae(!1),c=ae([]),u=ae(null),f=uc,h=Ns(),p=h.appSettings,g=h.loadAppSettings,{canDeleteAllUsers:v,initializeIfNeeded:y}=gI();let b=null;const E=()=>{b&&clearTimeout(b),b=setTimeout(()=>{R()},300)},x=be(()=>{var N;return Array.isArray((N=p.value)==null?void 0:N.serviceProviders)&&p.value.serviceProviders.length>0}),w=be(()=>{var N;return((N=p.value)==null?void 0:N.serviceProviders)||[]}),P=(N,M=!1)=>{a.value=N,o.value=M,N&&setTimeout(()=>{a.value="",o.value=!1},5e3)},R=()=>{r.value=1,A()},A=async(N="first")=>{const M=At(t,"users");let L;if(s.value&&n.value==="name"){const H=(await Gt(or(M,hn("name"),ia(1e3)))).docs.map(G=>({id:G.id,...G.data()})).filter(G=>(G.name||"").toLowerCase().includes(s.value.toLowerCase()));i.value=null,e.value=H,l.value=!1;return}s.value&&n.value==="email"?L=or(M,hn("email"),Ur("email",">=",s.value),Ur("email","<=",s.value+""),ia(cu)):s.value?L=or(M,hn("name"),Ur("name",">=",s.value),Ur("name","<=",s.value+""),ia(cu)):L=or(M,hn("name"),ia(cu)),N==="next"&&c.value.length&&(L=or(M,hn(n.value),ph(c.value[c.value.length-1]),ia(cu)));const z=await Gt(L);c.value=z.docs,i.value=null,e.value=c.value.map(j=>({id:j.id,...j.data()})),l.value=z.size===cu},_=N=>{i.value||(i.value=N,u.value={...e.value.find(M=>M.id===N)})},m=()=>{i.value=null,u.value=null,A()},S=(N,M,L)=>{u.value&&u.value.id===N&&(u.value[M]=L)},I=async N=>{var M,L;if(!(!u.value||u.value.id!==N))try{const z=e.value.find(H=>H.id===N),j={};u.value.name!==void 0&&(j.name=((M=u.value.name)==null?void 0:M.trim())||null),u.value.title!==void 0&&(j.title=((L=u.value.title)==null?void 0:L.trim())||null),u.value.role!==void 0&&(j.role=u.value.role),u.value.provider!==void 0&&(j.provider=u.value.provider||null),await Pp(Ze(t,"users",N),j),await rn.logUserManagement(N,"update",{originalData:{name:z==null?void 0:z.name,title:z==null?void 0:z.title,role:z==null?void 0:z.role,provider:z==null?void 0:z.provider},updatedData:j,changedFields:Object.keys(j)}),P(" User updated."),i.value=null,u.value=null,A()}catch(z){console.error("Error updating user:",z),P(` Error updating user: ${z.message}`,!0),await rn.logUserManagement(N,"update_failed",{error:z.message,attemptedData:updateData})}},k=async N=>{if(confirm("Are you sure you want to delete this user?"))try{const M=e.value.find(L=>L.id===N);await ho(Ze(t,"users",N)),await rn.logUserManagement(N,"delete",{deletedUser:{name:M==null?void 0:M.name,email:M==null?void 0:M.email,role:M==null?void 0:M.role,provider:M==null?void 0:M.provider}}),P(" User deleted."),i.value=null,u.value=null,A()}catch(M){console.error("Error deleting user:",M),P(` Error deleting user: ${M.message}`,!0),await rn.logUserManagement(N,"delete_failed",{error:M.message})}},C=async()=>{if(prompt("Type DELETE ALL USERS to confirm:")==="DELETE ALL USERS")try{const M=await Gt(At(t,"users"));await Promise.all(M.docs.map(L=>ho(Ze(t,"users",L.id)))),P(" All users deleted."),r.value=1,A()}catch(M){console.error("Error deleting all users:",M),P(` Error deleting all users: ${M.message}`,!0)}},O=()=>{r.value++,A("next")},D=()=>{r.value>1&&(r.value--,A())},F=N=>{var H;if(!N)return"";const L=(((H=p.value)==null?void 0:H.customServiceProviders)||[]).find(G=>G.abbreviation===N);if(L)return`${L.name} (${L.abbreviation})`;const j=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}].find(G=>G.abbreviation===N);return j?`${j.name} (${j.abbreviation})`:N};return Wt(async()=>{await g(),await y(),A()}),Va(()=>{b&&clearTimeout(b)}),{users:e,currentPage:r,searchType:n,searchTerm:s,activeRowId:i,statusMessage:a,isError:o,hasNextPage:l,validRoles:f,handleSearch:R,debouncedHandleSearch:E,startEdit:_,cancelEdit:m,updateUserField:S,saveUser:I,deleteUser:k,deleteAllUsers:C,loadNextPage:O,loadPreviousPage:D,getProviderLabel:F,appSettings:p,editingUser:u,providersLoaded:x,serviceProviders:w,canDeleteAllUsers:v}}},AW={class:"admin-form-row"},TW={class:"search-type-radios"},wW={class:"user-admin-table striped"},CW={key:0},IW=["data-userid"],kW=["value","disabled","onInput"],DW=["value","disabled","onInput"],PW=["disabled","value","onChange"],RW=["value"],FW={key:0},NW={key:0},OW={key:1},MW=["value","onChange"],LW=["value"],BW={key:1},UW={class:"admin-action-btns"},$W=["onClick"],VW=["onClick"],HW=["onClick"],jW={class:"admin-pagination"},GW=["disabled"],WW=["disabled"];function zW(t,e,r,n,s,i){const a=fr("Edit"),o=fr("Save"),l=fr("X"),c=fr("Trash2");return B(),U("div",null,[e[16]||(e[16]=d("h2",null,"Edit Users",-1)),d("div",AW,[Be(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=u=>n.searchTerm=u),placeholder:"Search by name or email",class:"admin-search-input",onInput:e[1]||(e[1]=(...u)=>n.debouncedHandleSearch&&n.debouncedHandleSearch(...u))},null,544),[[gt,n.searchTerm]]),d("div",TW,[d("label",null,[Be(d("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=u=>n.searchType=u),value:"name",onChange:e[3]||(e[3]=(...u)=>n.handleSearch&&n.handleSearch(...u))},null,544),[[pa,n.searchType]]),e[10]||(e[10]=we(" Name "))]),d("label",null,[Be(d("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=u=>n.searchType=u),value:"email",onChange:e[5]||(e[5]=(...u)=>n.handleSearch&&n.handleSearch(...u))},null,544),[[pa,n.searchType]]),e[11]||(e[11]=we(" Email "))])]),n.canDeleteAllUsers?(B(),U("button",{key:0,onClick:e[6]||(e[6]=(...u)=>n.deleteAllUsers&&n.deleteAllUsers(...u)),class:"delete-all-btn"}," Delete All Users ")):xe("",!0)]),n.statusMessage?(B(),U("div",{key:0,class:Qe(["admin-status-msg",{error:n.isError}])},Y(n.statusMessage),3)):xe("",!0),d("div",null,[d("table",wW,[e[15]||(e[15]=d("thead",null,[d("tr",null,[d("th",null,"Name"),d("th",null,"Title"),d("th",null,"Email"),d("th",null,"Role"),d("th",null,"Provider Type"),d("th",{style:{"text-align":"center"}},"Actions")])],-1)),d("tbody",null,[n.users.length===0?(B(),U("tr",CW,e[12]||(e[12]=[d("td",{colspan:"5"},"No users found.",-1)]))):xe("",!0),(B(!0),U(Pe,null,je(n.users,u=>(B(),U("tr",{key:u.id,class:Qe({"active-row":n.activeRowId===u.id}),"data-userid":u.id},[d("td",null,[d("input",{type:"text",value:u.name||"",class:"editable-input",disabled:n.activeRowId!==u.id,onInput:f=>n.updateUserField(u.id,"name",f.target.value)},null,40,kW)]),d("td",null,[d("input",{type:"text",value:u.title||"",class:"editable-input",disabled:n.activeRowId!==u.id,onInput:f=>n.updateUserField(u.id,"title",f.target.value)},null,40,DW)]),d("td",null,Y(u.email),1),d("td",null,[d("select",{class:"editable-select",disabled:n.activeRowId!==u.id,value:n.activeRowId===u.id?n.editingUser.role:u.role,onChange:f=>n.updateUserField(u.id,"role",f.target.value)},[(B(!0),U(Pe,null,je(n.validRoles,f=>(B(),U("option",{key:f,value:f},Y(f.replace(/_/g," ")),9,RW))),128))],40,PW)]),n.providersLoaded?(B(),U("td",FW,[n.activeRowId!==u.id?(B(),U("span",NW,Y(n.getProviderLabel(u.provider)||""),1)):(B(),U("span",OW,[d("select",{value:n.editingUser.provider||"",onChange:f=>n.updateUserField(u.id,"provider",f.target.value)},[e[13]||(e[13]=d("option",{value:""},"None",-1)),(B(!0),U(Pe,null,je(n.serviceProviders,f=>(B(),U("option",{key:f,value:f},Y(n.getProviderLabel(f)),9,LW))),128))],40,MW)]))])):(B(),U("td",BW,e[14]||(e[14]=[d("span",null,"Loading...",-1)]))),d("td",UW,[n.activeRowId!==u.id?(B(),U("button",{key:0,onClick:f=>n.startEdit(u.id),class:"admin-action-btn edit",title:"Edit"},[Oe(a,{size:16})],8,$W)):(B(),U(Pe,{key:1},[d("button",{onClick:f=>n.saveUser(u.id),class:"admin-action-btn save",title:"Save"},[Oe(o,{size:16})],8,VW),d("button",{onClick:e[7]||(e[7]=(...f)=>n.cancelEdit&&n.cancelEdit(...f)),class:"admin-action-btn cancel",title:"Cancel"},[Oe(l,{size:16})]),d("button",{onClick:f=>n.deleteUser(u.id),class:"admin-action-btn delete red",title:"Delete User"},[Oe(c,{size:16})],8,HW)],64))])],10,IW))),128))])])]),d("div",jW,[d("button",{onClick:e[8]||(e[8]=(...u)=>n.loadPreviousPage&&n.loadPreviousPage(...u)),disabled:n.currentPage===1,class:"admin-btn"}," Previous ",8,GW),d("span",null,"Page "+Y(n.currentPage),1),d("button",{onClick:e[9]||(e[9]=(...u)=>n.loadNextPage&&n.loadNextPage(...u)),disabled:!n.hasNextPage,class:"admin-btn"}," Next ",8,WW)])])}const KW=xt(SW,[["render",zW],["__scopeId","data-v-5a6d438d"]]),qW={class:"admin-students"},XW={class:"admin-form-row"},YW={class:"student-admin-table striped"},QW={key:0},JW=["data-id"],ZW={style:{display:"none"}},ez=["value","disabled","onInput"],tz=["value","disabled","onInput"],rz=["value","disabled","onInput"],nz=["value","disabled","onChange"],sz=["value","disabled","onChange"],az=["value"],iz=["title"],oz={class:"admin-action-btns"},lz=["onClick"],cz=["onClick"],uz=["onClick"],dz={class:"admin-pagination"},fz=["disabled"],hz=["disabled"],ug=50,pz={__name:"AdminStudents",setup(t){const e=vo(),{students:r,fetchStudents:n,deleteStudent:s}=Ii(),{caseManagers:i,fetchUsers:a}=Ea(),{canDeleteAllStudents:o,initializeIfNeeded:l}=gI(),c=ae(""),u=ae([]),f=ae(1),h=ae(null),p=ae({}),g=ae(""),v=ae(!1);let y=null;const b=()=>{y&&clearTimeout(y),y=setTimeout(()=>{P()},300)},E=be(()=>{const N=(f.value-1)*ug,M=N+ug;return u.value.slice(N,M)}),x=be(()=>Math.ceil(u.value.length/ug)),w=(N,M=!1)=>{g.value=N,v.value=M,setTimeout(()=>{g.value="",v.value=!1},5e3)},P=()=>{if(!ks("studentSearch",20,6e4).allowed){w("Too many search requests. Please wait before searching again.",!0);return}const M=mn(c.value,100),L=Hr(M);if(!L.isSafe){w(`Security threat detected in search: ${L.threats.join(", ")}`,!0),c.value=M;return}M!==c.value&&(c.value=M);const z=M.toLowerCase();z?u.value=r.value.filter(j=>{const H=it(j,"firstName")||"",G=it(j,"lastName")||"";return`${H} ${G}`.toLowerCase().includes(z)}):u.value=r.value,f.value=1},R=N=>{var L;if(console.log(" ADMIN EDIT DEBUG - Starting edit:",{studentId:N,activeEditId:h.value,studentExists:!!r.value.find(z=>z.id===N)}),h.value)return;const M=r.value.find(z=>z.id===N);M?(console.log(" ADMIN EDIT DEBUG - Student found:",{id:M.id,hasApp:!!M.app,appStudentData:(L=M.app)==null?void 0:L.studentData,keys:Object.keys(M)}),h.value=N,p.value=JSON.parse(JSON.stringify(M)),console.log(" ADMIN EDIT DEBUG - Edit state set:",{activeEditId:h.value,editingStudentId:p.value.id})):console.error(" ADMIN EDIT DEBUG - Student not found!")},A=()=>{h.value=null,p.value={}},_=(N,M,L)=>{if(p.value.id===N){console.log(" ADMIN UPDATE DEBUG - Updating field:",{studentId:N,field:M,value:L,currentValue:it(p.value,M)});let z=L;if(M==="caseManagerId")z=L;else if(typeof L=="string"){z=mn(L,M==="grade"?10:100);const j=Hr(z);if(!j.isSafe){w(`Security threat detected in ${M}: ${j.threats.join(", ")}`,!0);return}const H=Td(z,M,0,M==="grade"?10:100);if(!H.isValid){w(H.error,!0);return}}["firstName","lastName","grade","plan","ssid","caseManagerId"].includes(M)?(p.value.app||(p.value.app={}),p.value.app.studentData||(p.value.app.studentData={}),p.value.app.studentData[M]=z):p.value[M]=z,console.log(" ADMIN UPDATE DEBUG - Updated field:",{field:M,newValue:z,updatedPath:["firstName","lastName","grade","plan","ssid","caseManagerId"].includes(M)?`app.studentData.${M}`:M})}},m=async N=>{var M,L,z,j,H;try{console.log(" ADMIN SAVE DEBUG - Starting saveStudent:",{studentId:N,editingStudentId:p.value.id,editingStudentKeys:Object.keys(p.value),hasStudentInList:!!r.value.find(Q=>Q.id===N)});const G=xn(),W=be(()=>G.currentUser);if(console.log(" PERMISSION DEBUG:",{currentUser:W.value,userRole:(M=W.value)==null?void 0:M.role,userEmail:(L=W.value)==null?void 0:L.email,userId:(z=W.value)==null?void 0:z.uid}),!ks("saveStudent",10,6e4).allowed){w("Too many save requests. Please wait before saving again.",!0);return}const de={},se=r.value.find(Q=>Q.id===N),ce=["firstName","lastName","grade","plan","ssid","caseManagerId"];let te={},Z=!1;if(ce.forEach(Q=>{const fe=it(p.value,Q),ve=it(se,Q);fe!==ve&&(te[Q]=fe,Z=!0,console.log(` CHANGE DETECTED - ${Q}: "${ve}"  "${fe}"`))}),Z&&(de.app={studentData:{...(j=se.app)==null?void 0:j.studentData,...te}}),Object.keys(p.value).forEach(Q=>{Q!=="id"&&Q!=="app"&&p.value[Q]!==se[Q]&&(de[Q]=p.value[Q])}),console.log(" ADMIN SAVE DEBUG - Updates prepared:",de),Object.keys(de).length===0){A();return}const ye=lI(de),J=oI(ye,{isNew:!1});if(!J.isValid){w(`Validation failed: ${J.errors.join(", ")}`,!0);return}ye.updatedAt=In(),ye.updatedBy=((H=W.value)==null?void 0:H.uid)||null,Object.assign(p.value,ye),console.log(" ADMIN SAVE DEBUG - Calling setDoc with merge:",{studentId:N,sanitizedUpdates:ye}),await jt(Ze(e,"students",N),ye,{merge:!0}),console.log(" ADMIN SAVE DEBUG - updateStudent completed successfully");const X=r.value.findIndex(Q=>Q.id===N);if(X!==-1){const Q={...r.value[X]};Object.keys(ye).forEach(fe=>{fe==="app.studentData"?(Q.app||(Q.app={}),Q.app.studentData={...Q.app.studentData,...ye[fe]}):Q[fe]=ye[fe]}),r.value[X]=Q}console.log(" ADMIN SAVE DEBUG - Local state updated"),w(" Student updated.")}catch(G){console.error(" ADMIN SAVE DEBUG - Save failed:",G),w(" Update failed.",!0),console.error("Update error:",G)}finally{A()}},S=async N=>{if(!ks("deleteStudent",5,3e5).allowed){w("Too many delete requests. Please wait before deleting again.",!0);return}if(confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await s(N),w(" Student deleted.");const L=r.value.findIndex(z=>z.id===N);L!==-1&&r.value.splice(L,1),P()}catch(L){w(" Delete failed.",!0),console.error("Delete error:",L)}},I=async()=>{if(!ks("deleteAllStudents",1,36e5).allowed){w("Delete all operation rate limited. Please wait before trying again.",!0);return}const M=`Are you sure you want to delete ALL ${r.value.length} students? 

This action cannot be undone and will permanently remove all student data.

Type "DELETE ALL STUDENTS" to confirm:`;if(prompt(M)!=="DELETE ALL STUDENTS"){w("Delete all operation cancelled.",!1);return}try{w("Deleting all students...");const z=Oy(e);let j=0;for(const H of r.value)z.delete(Ze(e,"students",H.id)),j++,j>=500&&(await z.commit(),j=0);j>0&&await z.commit(),r.value=[],u.value=[],w(" All students deleted.")}catch(z){w(" Failed to delete all students.",!0),console.error("Delete all error:",z)}},k=N=>{if(!N)return"N/A";try{if(N&&typeof N.toDate=="function")return N.toDate().toLocaleDateString();const M=new Date(N);return isNaN(M.getTime())?"Invalid Date":M.toLocaleDateString()}catch{return"Invalid Date"}},C=N=>{var M;return((M=N.app)==null?void 0:M.staffIds)&&Array.isArray(N.app.staffIds)&&N.app.staffIds.length>0},O=N=>C(N)?`Staff ID Array present (${N.app.staffIds.length} staff members)`:"Staff ID Array missing or empty",D=()=>{f.value<x.value&&f.value++},F=()=>{f.value>1&&f.value--};return Wt(async()=>{try{await Promise.all([n(),a(),l()]),u.value=r.value,console.log(" ADMIN DEBUG - Case managers loaded:",i.value.length)}catch(N){w("Failed to load data.",!0),console.error("Load data error:",N)}}),Va(()=>{y&&clearTimeout(y)}),(N,M)=>(B(),U("div",qW,[M[5]||(M[5]=d("h2",null,"Edit Students",-1)),d("div",XW,[Be(d("input",{type:"text","onUpdate:modelValue":M[0]||(M[0]=L=>c.value=L),onInput:b,placeholder:"Search by name",class:"admin-search-input"},null,544),[[gt,c.value]]),q(o)?(B(),U("button",{key:0,onClick:I,class:"delete-all-btn"}," Delete All Students ")):xe("",!0)]),g.value?(B(),U("div",{key:0,class:Qe(["admin-status-msg",{error:v.value}])},Y(g.value),3)):xe("",!0),d("table",YW,[M[4]||(M[4]=d("thead",null,[d("tr",null,[d("th",null,"SSID"),d("th",{style:{display:"none"}},"Student ID"),d("th",null,"First Name"),d("th",null,"Last Name"),d("th",null,"Grade"),d("th",null,"Plan"),d("th",null,"Case Manager"),d("th",{title:"Staff ID Array present"},"staffIdArr"),d("th",null,"Date Added"),d("th",{style:{"text-align":"center"}},"Actions")])],-1)),d("tbody",null,[E.value.length?xe("",!0):(B(),U("tr",QW,M[1]||(M[1]=[d("td",{colspan:"10"},"No students found.",-1)]))),(B(!0),U(Pe,null,je(E.value,L=>(B(),U("tr",{key:L.id,class:Qe({"active-row":h.value===L.id}),"data-id":L.id},[d("td",null,Y(q(it)(L,"ssid")||L.id),1),d("td",ZW,Y(L.id),1),d("td",null,[d("input",{class:"editable-input","data-field":"firstName",value:q(it)(L,"firstName")||"",disabled:h.value!==L.id,onInput:z=>_(L.id,"firstName",z.target.value)},null,40,ez)]),d("td",null,[d("input",{class:"editable-input","data-field":"lastName",value:q(it)(L,"lastName")||"",disabled:h.value!==L.id,onInput:z=>_(L.id,"lastName",z.target.value)},null,40,tz)]),d("td",null,[d("input",{class:"editable-input","data-field":"grade",value:q(it)(L,"grade")||"",disabled:h.value!==L.id,onInput:z=>_(L.id,"grade",z.target.value)},null,40,rz)]),d("td",null,[d("select",{class:"editable-select","data-field":"plan",value:q(it)(L,"plan")||"",disabled:h.value!==L.id,onChange:z=>_(L.id,"plan",z.target.value)},M[2]||(M[2]=[d("option",{value:""},"Select Plan",-1),d("option",{value:"IEP"},"IEP",-1),d("option",{value:"504"},"504",-1)]),40,nz)]),d("td",null,[d("select",{class:"editable-select","data-field":"caseManagerId",value:q(it)(L,"caseManagerId")||"",disabled:h.value!==L.id,onChange:z=>_(L.id,"caseManagerId",z.target.value)},[M[3]||(M[3]=d("option",{value:""},"-- Select Case Manager --",-1)),(B(!0),U(Pe,null,je(q(i),z=>(B(),U("option",{key:z.id,value:z.id},Y(z.name||z.email||z.id),9,az))),128))],40,sz)]),d("td",{class:"staff-id-status",title:O(L)},[d("span",{class:Qe(["status-icon",C(L)?"present":"missing"])},Y(C(L)?"":""),3)],8,iz),d("td",null,Y(k(L.created_at)),1),d("td",oz,[h.value===L.id?(B(),U(Pe,{key:0},[d("button",{onClick:z=>m(L.id),class:"admin-action-btn save",title:"Save"},"",8,lz),d("button",{onClick:A,class:"admin-action-btn cancel",title:"Cancel"},""),d("button",{onClick:z=>S(L.id),class:"admin-action-btn delete red",title:"Delete Student"},"",8,cz)],64)):(B(),U("button",{key:1,onClick:z=>R(L.id),class:"admin-action-btn edit",title:"Edit"},"",8,uz))])],10,JW))),128))])]),d("div",dz,[d("button",{onClick:F,disabled:f.value===1,class:"admin-btn"}," Prev ",8,fz),d("span",null,"Page "+Y(f.value)+" of "+Y(x.value),1),d("button",{onClick:D,disabled:f.value===x.value,class:"admin-btn"}," Next ",8,hz)])]))}},mz=xt(pz,[["__scopeId","data-v-aeb78952"]]),gz={class:"bulk-importer"},vz={key:0,class:"step-container"},yz={class:"file-upload-section"},xz={class:"file-input-wrapper"},Ez={for:"csv-file",class:"file-label"},_z={class:"file-text"},bz={key:0,class:"error-message"},Sz={key:1,class:"file-info"},Az={key:0},Tz={class:"step-actions"},wz=["disabled"],Cz={key:1,class:"step-container"},Iz={class:"field-mapping-section"},kz={class:"mapping-grid"},Dz={class:"csv-column"},Pz={class:"app-field"},Rz=["onUpdate:modelValue"],Fz={class:"sample-data"},Nz={key:0,class:"validation-errors"},Oz={class:"step-actions"},Mz=["disabled"],Lz={key:2,class:"step-container"},Bz={class:"preview-section"},Uz={class:"preview-stats"},$z={class:"stat-item"},Vz={class:"stat-value"},Hz={class:"stat-item"},jz={class:"stat-value valid"},Gz={class:"stat-item"},Wz={class:"stat-value invalid"},zz={class:"preview-table-container"},Kz={class:"preview-table"},qz={key:0,class:"error-list"},Xz={key:1,class:"no-errors"},Yz={class:"import-options"},Qz={class:"options-grid"},Jz={class:"option-item"},Zz={class:"option-item"},eK={class:"option-item"},tK={class:"step-actions"},rK=["disabled"],nK={key:3,class:"step-container"},sK={class:"results-section"},aK={class:"results-stats"},iK={class:"stat-item success"},oK={class:"stat-value"},lK={class:"stat-item error"},cK={class:"stat-value"},uK={class:"stat-item"},dK={class:"stat-value"},fK={key:0,class:"import-errors"},hK={class:"results-actions"},pK={key:4,class:"loading-overlay"},mK={class:"loading-content"},gK={class:"progress-bar"},vK={__name:"StudentBulkImporter",emits:["close","imported"],setup(t,{emit:e}){const r=e,{users:n,fetchUsers:s}=Ea(),i=ae(1),a=ae(""),o=ae(""),l=ae([]),c=ae([]),u=ae({}),f=ae(""),h=ae([]),p=ae([]),g=ae("valid-only"),v=ae(!1),y=ae(!1),b=ae(0),E=ae({successful:0,failed:0,errors:[],processingTime:0}),x=ae(null),w=be(()=>{const te=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Z=Object.values(u.value).filter(J=>J),ye=Z.includes("app.studentData.ssid");return te.every(J=>Z.includes(J))&&ye}),P=be(()=>p.value.filter(te=>te.errors.length===0)),R=be(()=>p.value.filter(te=>te.errors.length>0));Wt(async()=>{console.log(" StudentBulkImporter component mounted!");try{await s(),console.log(" Users loaded successfully:",Object.keys(n.value).length,"users"),console.log("First few users:",Object.values(n.value).slice(0,3).map(te=>({id:te.id,name:te.name,role:te.role})))}catch(te){console.error(" Failed to load users:",te)}});const A=async te=>{const Z=te.target.files[0];if(Z){if(!Z.name.toLowerCase().endsWith(".csv")&&Z.type!=="text/csv"){f.value="File must be a CSV file (.csv extension)";return}if(Z.size>10*1024*1024){f.value="File must be smaller than 10MB";return}f.value="",a.value=Z.name,o.value=z(Z.size);try{const ye=await Z.text();_(ye)}catch(ye){f.value="Failed to read CSV file: "+ye.message}}},_=te=>{try{const Z=te.trim().split(`
`);if(Z.length<2)throw new Error("CSV must have at least a header row and one data row");const ye=Z[0].split(",").map(X=>X.trim().replace(/"/g,""));c.value=ye;const J=[];for(let X=1;X<Z.length;X++){const Q={};let fe="",ve=!1,ie=0;for(let ee=0;ee<Z[X].length;ee++){const ge=Z[X][ee];ge==='"'?ve=!ve:ge===","&&!ve?(Q[ye[ie]]=fe.trim().replace(/^"|"$/g,""),fe="",ie++):fe+=ge}ie<ye.length&&(Q[ye[ie]]=fe.trim().replace(/^"|"$/g,"")),J.push(Q)}l.value=J,console.log("Parsed CSV data:",J.length,"records")}catch(Z){f.value="Failed to parse CSV: "+Z.message}},m=()=>{const te={SSID:"app.studentData.ssid",FirstName:"app.studentData.firstName",LastName:"app.studentData.lastName",Grade:"app.studentData.grade",Plan:"app.studentData.plan",CaseManagerId:"app.studentData.caseManagerId",ReviewDate:"app.dates.reviewDate",ReevalDate:"app.dates.reevalDate",MeetingDate:"app.dates.meetingDate",Period1Teacher:"app.schedule.periods.1",Period2Teacher:"app.schedule.periods.2",Period3Teacher:"app.schedule.periods.3",Period4Teacher:"app.schedule.periods.4",Period5Teacher:"app.schedule.periods.5",Period6Teacher:"app.schedule.periods.6",PeriodSHTeacher:"app.schedule.periods.SH",ClassServices:"app.schedule.classServices",SpeechProvider:"app.providers.speechId",OTProvider:"app.providers.otId",PTProvider:"app.providers.ptId",ATProvider:"app.providers.atId",Audiologist:"app.providers.audId",BISProvider:"app.providers.bisId",DHHProvider:"app.providers.dhhId",HNProvider:"app.providers.hnId",MHProvider:"app.providers.mhId",OMProvider:"app.providers.omId",SCProvider:"app.providers.scId",SWProvider:"app.providers.swId",TRProvider:"app.providers.trId",VIProvider:"app.providers.viId",Flag1:"app.flags.flag1",Flag2:"app.flags.flag2",BIPPdfUrl:"app.documents.bipPdfUrl",AtAGlancePdfUrl:"app.documents.ataglancePdfUrl",Assessment:"app.accommodations.assessment",Instruction:"app.accommodations.instruction"};c.value.forEach(Z=>{te[Z]&&(u.value[Z]=te[Z])})},S=()=>{u.value={}},I=te=>{const Z=l.value[0];if(!Z)return"";const ye=Z[te];return ye?te==="ClassServices"&&ye.includes(",")?`"${ye}"`:ye:""},k=()=>{h.value=[];const te=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Z=Object.values(u.value).filter(X=>X),ye=Z.includes("app.studentData.ssid");te.forEach(X=>{if(!Z.includes(X)){const Q=X.split(".").pop();h.value.push(`Required field "${Q}" is not mapped`)}}),ye||h.value.push("SSID (State Student ID) must be mapped to app.studentData.ssid");const J=Z.filter((X,Q)=>Z.indexOf(X)!==Q);J.length>0&&h.value.push(`Duplicate field mappings: ${J.join(", ")}`)},C=()=>{p.value=l.value.map(te=>{const Z=O(te),ye=F(Z);return console.log("Row mapping:",{original:te,mapped:Z,errors:ye}),{data:Z,errors:ye}})},O=te=>{const Z={app:{studentData:{},dates:{},providers:{},accommodations:{},flags:{},schedule:{periods:{},classServices:[]},documents:{}}};return Object.entries(u.value).forEach(([ye,J])=>{if(!J||!te[ye])return;let X=te[ye].trim();if(!X)return;if(J==="app.schedule.classServices"){X.startsWith('"')&&X.endsWith('"')&&(X=X.slice(1,-1)),Z.app.schedule.classServices=X.split(",").map(ve=>ve.trim()).filter(Boolean);return}if(J.startsWith("app.schedule.periods.")){const ve=J.split(".").pop(),ie=X.trim();if(ie){const ee=W(ie);console.log(`Mapping Period ${ve} teacher:`,ie,"",ee),Z.app.schedule.periods[ve]=ee}return}if(J.startsWith("app.providers.")){const ve=J.split(".").pop(),ie=X.trim();if(ie){const ee=ne(ie);console.log(`Mapping ${ve} provider:`,ie,"",ee),Z.app.providers[ve]=ee}return}if(J==="app.accommodations.assessment"||J==="app.accommodations.instruction"){const ve=J.split(".").pop();Z.app.accommodations[ve]=X;return}if(J.startsWith("app.flags.")){const ve=J.split(".").pop();Z.app.flags[ve]=["true","1","yes","y"].includes(X.toLowerCase());return}if(J.includes("Date")){const[ve,ie,ee]=J.split(".");Z[ve][ie]||(Z[ve][ie]={}),Z[ve][ie][ee]=M(X);return}const Q=J.split(".");let fe=Z;for(let ve=0;ve<Q.length-1;ve++){const ie=Q[ve];fe[ie]||(fe[ie]={}),fe=fe[ie]}fe[Q[Q.length-1]]=X}),Z},D=te=>{const Z=Object.values(n.value).find(ye=>ye.id===te||ye.name===te||ye.email===te||ye.aeriesId===te);return console.log("Mapping case manager:",te,"to Firebase ID:",Z==null?void 0:Z.id),Z?Z.id:te},F=te=>{var J,X,Q,fe,ve,ie,ee,ge,Te,Ie,Ae,We,De,He,$e,ke,Ke,_e;const Z=[],ye=te.ssid||((X=(J=te.app)==null?void 0:J.studentData)==null?void 0:X.ssid);return ye||Z.push("SSID is required (either top-level or in app.studentData)"),(fe=(Q=te.app)==null?void 0:Q.studentData)!=null&&fe.firstName||Z.push("First name is required"),(ie=(ve=te.app)==null?void 0:ve.studentData)!=null&&ie.lastName||Z.push("Last name is required"),(ge=(ee=te.app)==null?void 0:ee.studentData)!=null&&ge.grade||Z.push("Grade is required"),ye&&!/^\d{9,10}$/.test(ye)&&Z.push("SSID must be 9-10 digits"),(Ie=(Te=te.app)==null?void 0:Te.studentData)!=null&&Ie.grade&&!["K","1","2","3","4","5","6","7","8","9","10","11","12"].includes(te.app.studentData.grade)&&Z.push("Grade must be K-12"),(We=(Ae=te.app)==null?void 0:Ae.studentData)!=null&&We.plan&&!["IEP","504"].includes(te.app.studentData.plan)&&Z.push("Plan must be IEP or 504"),(He=(De=te.app)==null?void 0:De.dates)!=null&&He.reviewDate&&!N(te.app.dates.reviewDate)&&Z.push("Invalid review date format (use YYYY-MM-DD)"),(ke=($e=te.app)==null?void 0:$e.dates)!=null&&ke.reevalDate&&!N(te.app.dates.reevalDate)&&Z.push("Invalid reevaluation date format (use YYYY-MM-DD)"),(_e=(Ke=te.app)==null?void 0:Ke.dates)!=null&&_e.meetingDate&&!N(te.app.dates.meetingDate)&&Z.push("Invalid meeting date format (use YYYY-MM-DD)"),Z},N=te=>{if(!te)return!0;const Z=new Date(te);return!isNaN(Z.getTime())&&te.match(/^\d{4}-\d{2}-\d{2}$/)},M=te=>{if(!te)return"";try{const Z=new Date(te);return isNaN(Z.getTime())?"":Z.toISOString().split("T")[0]}catch{return""}},L=te=>{var J,X,Q,fe;const Z=((X=(J=te.app)==null?void 0:J.studentData)==null?void 0:X.firstName)||"",ye=((fe=(Q=te.app)==null?void 0:Q.studentData)==null?void 0:fe.lastName)||"";return`${Z} ${ye}`.trim()||"Missing Name"},z=te=>{if(te===0)return"0 Bytes";const Z=1024,ye=["Bytes","KB","MB","GB"],J=Math.floor(Math.log(te)/Math.log(Z));return parseFloat((te/Math.pow(Z,J)).toFixed(2))+" "+ye[J]},j=()=>{if(i.value===2){if(k(),h.value.length>0)return;C()}i.value++},H=()=>{i.value--},G=async()=>{y.value=!0,b.value=0;const te=Date.now(),Z=g.value==="valid-only"?P.value:p.value;let ye=0,J=0;const X=[];try{for(let Q=0;Q<Z.length;Q++){const fe=Z[Q];try{await se(fe.data),ye++}catch(ve){J++,X.push(`Row ${Q+1}: ${ve.message}`)}b.value=Math.round((Q+1)/Z.length*100)}E.value={successful:ye,failed:J,errors:X,processingTime:Date.now()-te},i.value=4,r("imported",{successful:ye,failed:J})}catch(Q){console.error("Import failed:",Q),X.push("Import process failed: "+Q.message),E.value={successful:ye,failed:J,errors:X,processingTime:Date.now()-te},i.value=4}finally{y.value=!1}},W=te=>{if(!te)return"";console.log(" Mapping teacher ID:",te),console.log(" Available users:",Object.values(n.value).map(J=>({name:J.name,aeriesId:J.aeriesId,id:J.id})));const Z=Object.values(n.value).find(J=>{const X=String(J.aeriesId)===String(te);return X&&console.log(" Found exact Aeries ID match:",{teacherId:te,user:{name:J.name,aeriesId:J.aeriesId,id:J.id}}),X});if(Z)return console.log(" Using Aeries ID match:",te,"",Z.id,"(",Z.name,")"),Z.id;const ye=Object.values(n.value).find(J=>J.id===te);return ye?(console.log(" Using Firebase ID match:",te,"",ye.id,"(",ye.name,")"),ye.id):(console.warn(" No user found for teacher ID:",te),te)},ne=te=>{if(!te)return"";console.log(" Mapping provider ID:",te),console.log(" Available users:",Object.values(n.value).map(J=>({name:J.name,aeriesId:J.aeriesId,id:J.id})));const Z=Object.values(n.value).find(J=>{const X=String(J.aeriesId)===String(te);return X&&console.log(" Found exact Aeries ID match:",{providerId:te,user:{name:J.name,aeriesId:J.aeriesId,id:J.id}}),X});if(Z)return console.log(" Using Aeries ID match:",te,"",Z.id,"(",Z.name,")"),Z.id;const ye=Object.values(n.value).find(J=>J.id===te);return ye?(console.log(" Using Firebase ID match:",te,"",ye.id,"(",ye.name,")"),ye.id):(console.warn(" No user found for provider ID:",te),te)},de=te=>{try{return te.app&&te.app.studentData&&te.app.studentData.ssid&&te.app.studentData.firstName&&te.app.studentData.lastName&&te.app.studentData.grade&&te.app.schedule&&Array.isArray(te.app.schedule.classServices)}catch{return!1}},se=async te=>{try{const Z=te.app.studentData.ssid,ye=At(qe,"students"),J=or(ye,Ur("app.studentData.ssid","==",Z)),X=await Gt(J);if(!X.empty&&!v.value)throw new Error(`Student with SSID ${Z} already exists`);const Q={createdAt:In(),updatedAt:In(),app:{studentData:{firstName:te.app.studentData.firstName||"",lastName:te.app.studentData.lastName||"",grade:te.app.studentData.grade||"",plan:te.app.studentData.plan||"",caseManagerId:D(te.app.studentData.caseManagerId)||"",ssid:Z},dates:{reviewDate:te.app.dates.reviewDate||"",reevalDate:te.app.dates.reevalDate||"",meetingDate:te.app.dates.meetingDate||""},schedule:{periods:te.app.schedule.periods||{1:"",2:"",3:"",4:"",5:"",6:"",SH:""},classServices:Array.isArray(te.app.schedule.classServices)?te.app.schedule.classServices:[]},providers:te.app.providers||{speechId:"",otId:"",ptId:"",atId:"",audId:"",bisId:"",dhhId:"",hnId:"",mhId:"",omId:"",scId:"",swId:"",trId:"",viId:""},accommodations:{assessment:te.app.accommodations.assessment||"",instruction:te.app.accommodations.instruction||""},flags:{flag1:!!te.app.flags.flag1,flag2:!!te.app.flags.flag2},documents:{bipPdfUrl:te.app.documents.bipPdfUrl||null,ataglancePdfUrl:te.app.documents.ataglancePdfUrl||null}}};if(console.log("Saving student data:",{ssid:Q.app.studentData.ssid,schedule:Q.app.schedule.periods,providers:Q.app.providers}),!de(Q))throw new Error("Invalid student data structure");if(!X.empty&&v.value){const fe=X.docs[0];await jt(Ze(qe,"students",fe.id),Q,{merge:!0})}else{const fe=Ze(At(qe,"students"));await jt(fe,Q)}}catch(Z){throw console.error("Error importing student:",Z),Z}},ce=()=>{i.value=1,a.value="",o.value="",l.value=[],c.value=[],u.value={},f.value="",h.value=[],p.value=[],E.value={successful:0,failed:0,errors:[],processingTime:0},x.value&&(x.value.value="")};return(te,Z)=>(B(),U("div",gz,[Z[30]||(Z[30]=d("div",{style:{background:"#e8f5e8",border:"2px solid #4caf50",padding:"10px","margin-bottom":"20px","border-radius":"4px","text-align":"center"}},[d("strong",null," StudentBulkImporter Component Loaded Successfully")],-1)),Z[31]||(Z[31]=d("div",{class:"importer-header"},[d("h2",null,"Add Students - Bulk Import"),d("p",{class:"description"}," Import multiple students from a CSV file. The system will map CSV fields to the app's database structure and allow you to preview and validate the data before importing. ")],-1)),i.value===1?(B(),U("div",vz,[Z[8]||(Z[8]=d("div",{class:"step-header"},[d("h3",null,"Step 1: Upload CSV File"),d("p",null,"Select a CSV file containing student data. The first row should contain column headers.")],-1)),d("div",yz,[d("div",xz,[d("input",{type:"file",ref_key:"fileInput",ref:x,onChange:A,accept:".csv",class:"file-input",id:"csv-file"},null,544),d("label",Ez,[Z[4]||(Z[4]=d("span",{class:"file-icon"},"",-1)),d("span",_z,Y(a.value||"Choose CSV File"),1)])]),f.value?(B(),U("div",bz,Y(f.value),1)):xe("",!0),a.value?(B(),U("div",Sz,[d("p",null,[Z[5]||(Z[5]=d("strong",null,"File:",-1)),we(" "+Y(a.value),1)]),d("p",null,[Z[6]||(Z[6]=d("strong",null,"Size:",-1)),we(" "+Y(o.value),1)]),l.value.length>0?(B(),U("p",Az,[Z[7]||(Z[7]=d("strong",null,"Records:",-1)),we(" "+Y(l.value.length),1)])):xe("",!0)])):xe("",!0)]),Z[9]||(Z[9]=Dn('<div class="sample-format" data-v-494a4282><h4 data-v-494a4282>Expected CSV Format:</h4><div class="format-example" data-v-494a4282><code data-v-494a4282> SSID,FirstName,LastName,Grade,Plan,CaseManagerId,ReviewDate,ReevalDate,MeetingDate,Period1Teacher,Period2Teacher,Period3Teacher,Period4Teacher,Period5Teacher,Period6Teacher,SHTeacher,ClassServices,SpeechProvider,OTProvider,PTProvider,ATProvider,Audiologist,BISProvider,DHHProvider,HNProvider,MHProvider,OMProvider,SCProvider,SWProvider,TRProvider,VIProvider,Flag1,Flag2,BIPPdfUrl,AtAGlancePdfUrl,Assessment,Instruction<br data-v-494a4282> 123456789,John,Doe,9,IEP,user003,2025-07-15,2025-12-15,2025-07-10,user007,user008,user009,user010,user011,user012,user013,&quot;SDC: English,RSP: Math&quot;,user020,user021,user022,user023,user024,user025,user026,user027,user028,user029,user030,user031,user032,user033,true,false,https://example.com/bip.pdf,https://example.com/ataglance.pdf,&quot;Allow for test re-takes if the score is below average...&quot;,Divide larger projects or assignments into manageable parts... </code></div><p class="format-note" data-v-494a4282><strong data-v-494a4282>Required fields:</strong> SSID, FirstName, LastName, Grade<br data-v-494a4282><strong data-v-494a4282>App Structure:</strong> All fields map to the app data structure in your database<br data-v-494a4282><strong data-v-494a4282>Schedule fields:</strong> Period1Teacher through Period6Teacher and SHTeacher (Firebase user IDs like user001, user002, etc.)<br data-v-494a4282><strong data-v-494a4282>Provider fields:</strong> All service provider fields (Firebase user IDs like user020, user021, etc.)<br data-v-494a4282><strong data-v-494a4282>Class Services:</strong> Comma-separated list (e.g., &quot;SDC: English,RSP: Math,Co-teach: Science&quot;)<br data-v-494a4282><strong data-v-494a4282>Dates:</strong> Use YYYY-MM-DD format (e.g., 2025-07-15)<br data-v-494a4282><strong data-v-494a4282>Flags:</strong> Use true/false or 1/0<br data-v-494a4282><strong data-v-494a4282>Accommodations:</strong> Text fields for assessment and instruction<br data-v-494a4282><strong data-v-494a4282>Note:</strong> Teacher and provider IDs will be automatically mapped from names, emails, or Aeries IDs if user lookup is available </p></div>',1)),d("div",Tz,[d("button",{onClick:j,disabled:!l.value.length,class:"btn btn-primary"}," Next: Map Fields ",8,wz)])])):xe("",!0),i.value===2?(B(),U("div",Cz,[Z[15]||(Z[15]=d("div",{class:"step-header"},[d("h3",null,"Step 2: Map CSV Fields"),d("p",null,"Map your CSV columns to the app's database fields. Required fields are marked with *")],-1)),d("div",Iz,[d("div",kz,[Z[12]||(Z[12]=Dn('<div class="mapping-header" data-v-494a4282><div class="csv-column" data-v-494a4282>CSV Column</div><div class="arrow" data-v-494a4282></div><div class="app-field" data-v-494a4282>App Database Field</div><div class="sample-data" data-v-494a4282>Sample Data</div></div>',1)),(B(!0),U(Pe,null,je(c.value,(ye,J)=>(B(),U("div",{key:J,class:"mapping-row"},[d("div",Dz,[d("strong",null,Y(ye),1)]),Z[11]||(Z[11]=d("div",{class:"arrow"},"",-1)),d("div",Pz,[Be(d("select",{"onUpdate:modelValue":X=>u.value[ye]=X,class:"field-select"},Z[10]||(Z[10]=[Dn('<option value="" data-v-494a4282>-- Skip this field --</option><optgroup label="Required Fields" data-v-494a4282><option value="app.studentData.ssid" data-v-494a4282>SSID (State Student ID) *</option><option value="app.studentData.firstName" data-v-494a4282>First Name *</option><option value="app.studentData.lastName" data-v-494a4282>Last Name *</option><option value="app.studentData.grade" data-v-494a4282>Grade *</option></optgroup><optgroup label="Student Information" data-v-494a4282><option value="app.studentData.plan" data-v-494a4282>Plan Type (IEP/504/RTI/None)</option><option value="app.studentData.caseManagerId" data-v-494a4282>Case Manager ID</option></optgroup><optgroup label="Important Dates" data-v-494a4282><option value="app.dates.reviewDate" data-v-494a4282>Review Date</option><option value="app.dates.reevalDate" data-v-494a4282>Reevaluation Date</option><option value="app.dates.meetingDate" data-v-494a4282>Meeting Date</option></optgroup><optgroup label="Class Schedule" data-v-494a4282><option value="app.schedule.periods.1" data-v-494a4282>Period 1 Teacher ID</option><option value="app.schedule.periods.2" data-v-494a4282>Period 2 Teacher ID</option><option value="app.schedule.periods.3" data-v-494a4282>Period 3 Teacher ID</option><option value="app.schedule.periods.4" data-v-494a4282>Period 4 Teacher ID</option><option value="app.schedule.periods.5" data-v-494a4282>Period 5 Teacher ID</option><option value="app.schedule.periods.6" data-v-494a4282>Period 6 Teacher ID</option><option value="app.schedule.periods.SH" data-v-494a4282>Study Hall Teacher ID</option><option value="app.schedule.classServices" data-v-494a4282>Class Services (Comma-separated)</option></optgroup><optgroup label="Service Providers" data-v-494a4282><option value="app.providers.speechId" data-v-494a4282>Speech Provider ID</option><option value="app.providers.otId" data-v-494a4282>OT Provider ID</option><option value="app.providers.ptId" data-v-494a4282>PT Provider ID</option><option value="app.providers.atId" data-v-494a4282>AT Provider ID</option><option value="app.providers.audId" data-v-494a4282>Audiologist ID</option><option value="app.providers.bisId" data-v-494a4282>BIS Provider ID</option><option value="app.providers.dhhId" data-v-494a4282>DHH Provider ID</option><option value="app.providers.hnId" data-v-494a4282>HN Provider ID</option><option value="app.providers.mhId" data-v-494a4282>MH Provider ID</option><option value="app.providers.omId" data-v-494a4282>OM Provider ID</option><option value="app.providers.scId" data-v-494a4282>SC Provider ID</option><option value="app.providers.swId" data-v-494a4282>SW Provider ID</option><option value="app.providers.trId" data-v-494a4282>TR Provider ID</option><option value="app.providers.viId" data-v-494a4282>VI Provider ID</option></optgroup><optgroup label="Flags" data-v-494a4282><option value="app.flags.flag1" data-v-494a4282>Flag 1 (Boolean)</option><option value="app.flags.flag2" data-v-494a4282>Flag 2 (Boolean)</option></optgroup><optgroup label="Documents" data-v-494a4282><option value="app.documents.bipPdfUrl" data-v-494a4282>BIP PDF URL</option><option value="app.documents.ataglancePdfUrl" data-v-494a4282>At-A-Glance PDF URL</option></optgroup><optgroup label="Accommodations" data-v-494a4282><option value="app.accommodations.assessment" data-v-494a4282>Assessment Accommodations</option><option value="app.accommodations.instruction" data-v-494a4282>Instructional Accommodations</option></optgroup>',9)]),8,Rz),[[cr,u.value[ye]]])]),d("div",Fz,[d("code",null,Y(I(ye)),1)])]))),128))]),d("div",{class:"auto-mapping-section"},[Z[13]||(Z[13]=d("h4",null,"Quick Mapping Options:",-1)),d("div",{class:"quick-actions"},[d("button",{onClick:m,class:"btn btn-secondary"}," Auto-map Common Fields "),d("button",{onClick:S,class:"btn btn-secondary"}," Clear All Mappings ")])]),h.value.length>0?(B(),U("div",Nz,[Z[14]||(Z[14]=d("h4",null,"Mapping Issues:",-1)),d("ul",null,[(B(!0),U(Pe,null,je(h.value,ye=>(B(),U("li",{key:ye,class:"error-item"},Y(ye),1))),128))])])):xe("",!0)]),d("div",Oz,[d("button",{onClick:H,class:"btn btn-secondary"}," Back "),d("button",{onClick:j,disabled:!w.value,class:"btn btn-primary"}," Next: Preview Data ",8,Mz)])])):xe("",!0),i.value===3?(B(),U("div",Lz,[Z[23]||(Z[23]=d("div",{class:"step-header"},[d("h3",null,"Step 3: Preview and Validate"),d("p",null,"Review the mapped data before importing. Check for any validation errors.")],-1)),d("div",Bz,[d("div",Uz,[d("div",$z,[Z[16]||(Z[16]=d("span",{class:"stat-label"},"Total Records:",-1)),d("span",Vz,Y(l.value.length),1)]),d("div",Hz,[Z[17]||(Z[17]=d("span",{class:"stat-label"},"Valid Records:",-1)),d("span",jz,Y(P.value.length),1)]),d("div",Gz,[Z[18]||(Z[18]=d("span",{class:"stat-label"},"Invalid Records:",-1)),d("span",Wz,Y(R.value.length),1)])]),d("div",zz,[d("table",Kz,[Z[19]||(Z[19]=d("thead",null,[d("tr",null,[d("th",null,"Status"),d("th",null,"SSID"),d("th",null,"Name"),d("th",null,"Grade"),d("th",null,"Plan"),d("th",null,"Case Manager"),d("th",null,"Issues")])],-1)),d("tbody",null,[(B(!0),U(Pe,null,je(p.value,(ye,J)=>{var X,Q,fe,ve,ie,ee,ge,Te;return B(),U("tr",{key:J,class:Qe({"invalid-row":ye.errors.length>0})},[d("td",null,[d("span",{class:Qe(["status-badge",ye.errors.length>0?"error":"valid"])},Y(ye.errors.length>0?"Error":"Valid"),3)]),d("td",null,Y(ye.data.ssid||((Q=(X=ye.data.app)==null?void 0:X.studentData)==null?void 0:Q.ssid)||"Missing"),1),d("td",null,Y(L(ye.data)),1),d("td",null,Y(((ve=(fe=ye.data.app)==null?void 0:fe.studentData)==null?void 0:ve.grade)||"Missing"),1),d("td",null,Y(((ee=(ie=ye.data.app)==null?void 0:ie.studentData)==null?void 0:ee.plan)||"Not set"),1),d("td",null,Y(((Te=(ge=ye.data.app)==null?void 0:ge.studentData)==null?void 0:Te.caseManagerId)||"Not set"),1),d("td",null,[ye.errors.length>0?(B(),U("ul",qz,[(B(!0),U(Pe,null,je(ye.errors,Ie=>(B(),U("li",{key:Ie,class:"error-item"},Y(Ie),1))),128))])):(B(),U("span",Xz,"No issues"))])],2)}),128))])])]),d("div",Yz,[Z[22]||(Z[22]=d("h4",null,"Import Options:",-1)),d("div",Qz,[d("label",Jz,[Be(d("input",{type:"radio","onUpdate:modelValue":Z[0]||(Z[0]=ye=>g.value=ye),value:"valid-only"},null,512),[[pa,g.value]]),d("span",null,"Import only valid records ("+Y(P.value.length)+" records)",1)]),d("label",Zz,[Be(d("input",{type:"radio","onUpdate:modelValue":Z[1]||(Z[1]=ye=>g.value=ye),value:"all"},null,512),[[pa,g.value]]),Z[20]||(Z[20]=d("span",null,"Import all records (may cause errors for invalid data)",-1))]),d("label",eK,[Be(d("input",{type:"checkbox","onUpdate:modelValue":Z[2]||(Z[2]=ye=>v.value=ye)},null,512),[[Et,v.value]]),Z[21]||(Z[21]=d("span",null,"Update existing students if SSID already exists",-1))])])])]),d("div",tK,[d("button",{onClick:H,class:"btn btn-secondary"}," Back "),d("button",{onClick:G,disabled:y.value||g.value==="valid-only"&&P.value.length===0,class:"btn btn-primary"},Y(y.value?"Importing...":`Import ${g.value==="valid-only"?P.value.length:l.value.length} Students`),9,rK)])])):xe("",!0),i.value===4?(B(),U("div",nK,[Z[28]||(Z[28]=d("div",{class:"step-header"},[d("h3",null,"Step 4: Import Complete"),d("p",null,"Your bulk import has been completed. Review the results below.")],-1)),d("div",sK,[d("div",aK,[d("div",iK,[Z[24]||(Z[24]=d("span",{class:"stat-label"},"Successfully Imported:",-1)),d("span",oK,Y(E.value.successful),1)]),d("div",lK,[Z[25]||(Z[25]=d("span",{class:"stat-label"},"Failed to Import:",-1)),d("span",cK,Y(E.value.failed),1)]),d("div",uK,[Z[26]||(Z[26]=d("span",{class:"stat-label"},"Total Processing Time:",-1)),d("span",dK,Y(E.value.processingTime)+"ms",1)])]),E.value.errors.length>0?(B(),U("div",fK,[Z[27]||(Z[27]=d("h4",null,"Import Errors:",-1)),d("ul",null,[(B(!0),U(Pe,null,je(E.value.errors,ye=>(B(),U("li",{key:ye,class:"error-item"},Y(ye),1))),128))])])):xe("",!0),d("div",hK,[d("button",{onClick:ce,class:"btn btn-secondary"}," Import More Students "),d("button",{onClick:Z[3]||(Z[3]=ye=>te.$emit("close")),class:"btn btn-primary"}," Close ")])])])):xe("",!0),y.value?(B(),U("div",pK,[d("div",mK,[Z[29]||(Z[29]=d("div",{class:"loading-spinner"},null,-1)),d("p",null,"Importing students... "+Y(b.value)+"%",1),d("div",gK,[d("div",{class:"progress-fill",style:Nr({width:b.value+"%"})},null,4)])])])):xe("",!0)]))}},yK=xt(vK,[["__scopeId","data-v-494a4282"]]),xK={class:"permissions-overview"},EK={class:"roles-summary"},_K={class:"role-icon"},bK={class:"role-info"},SK={class:"role-stats"},AK={class:"stat"},TK={class:"stat-number"},wK={class:"stat"},CK={class:"stat-number"},IK={class:"stat"},kK={class:"stat-number"},DK={class:"permissions-matrix"},PK={class:"matrix-table-container"},RK={class:"matrix-table"},FK=["data-role"],NK={class:"permission-info"},OK={class:"permission-name"},MK={class:"permission-description"},LK={class:"permission-firebase"},BK={class:"admin-panel-access"},UK={class:"access-grid"},$K={class:"access-header"},VK={class:"access-icon"},HK={class:"role-name"},jK={key:0,class:"access-details"},GK={class:"access-level"},WK={class:"access-description"},zK={key:1,class:"no-access"},KK={__name:"PermissionsOverview",setup(t){const e=Z4,r=be(()=>uc.slice().sort((l,c)=>{var h,p;const u=((h=e[l])==null?void 0:h.length)||0;return(((p=e[c])==null?void 0:p.length)||0)-u})),n={admin:o7,school_admin:sI,staff_view:f7,staff_edit:Bv,admin_504:rI,sped_chair:C0,case_manager:aI,teacher:Uv,paraeducator:jB,service_provider:nI},s=be(()=>r.value.map(l=>{const c=e[l]||[],u=c.some(v=>v.includes("admin_panel"));let f="No Access",h="No admin panel access";c.includes("admin_panel_full")?(f="Full Access",h="All admin panel features including permissions management"):c.includes("admin_panel_school")?(f="School Access",h="School operations, users, aides, and students"):c.includes("admin_panel_limited")?(f="Limited Access",h="Student management, aide management, and 504-related functions"):c.includes("admin_panel_sped")&&(f="SPED Access",h="SPED program management and aide oversight");let p="Viewer";c.includes(at.EDIT_STUDENT_ALL)?l==="admin"||l==="school_admin"?p="Admin":l==="staff_edit"?p="Editor":(l==="sped_chair"||l==="admin_504")&&(p="Admin/CM"):c.includes(at.EDIT_STUDENT_CM)&&(l==="admin_504"?p="Admin/CM":p="CM");const g=l==="admin_504"?"504 Coordinator":l==="sped_chair"?"SPED Chair":l==="school_admin"?"School Administrator":l==="staff_view"?"Staff Viewer":l==="staff_edit"?"Staff Editor":l==="case_manager"?"Case Manager":l==="service_provider"?"Service Provider":l.charAt(0).toUpperCase()+l.slice(1);return{key:l,name:g,icon:n[l]||Uv,description:dB[l]||`${g} role`,adminAccess:u,adminLevel:f,adminDescription:h,studentAccessLevel:p,permissions:c}})),i=be(()=>[{key:at.VIEW_USERS,name:"View Users",description:"Can view user accounts and basic information",firebaseRule:"All authenticated users"},{key:at.EDIT_USER,name:"Edit Users",description:"Can modify user accounts and profiles",firebaseRule:"Admin, School Admin, 504 Coordinator, SPED Chair"},{key:at.DELETE_USER,name:"Delete Users",description:"Can remove user accounts",firebaseRule:"Admin, School Admin, 504 Coordinator, SPED Chair"},{key:at.MANAGE_TEACHER_FEEDBACK,name:"Manage Teacher Feedback",description:"Can create and manage teacher feedback forms",firebaseRule:"Admin, School Admin, SPED Chair, 504 Coordinator, Case Manager"},{key:at.MANAGE_IMPORTS,name:"Manage Data Imports",description:"Can import data from SEIS, Aeries, and other sources",firebaseRule:"Admin, School Admin"},{key:at.MANAGE_BACKUPS,name:"Manage Backups",description:"Can create, restore, and manage database backups",firebaseRule:"Admin, School Admin"},{key:at.VIEW_STUDENTS,name:"View Students",description:"Can view student records (role-filtered)",firebaseRule:"All authenticated users"},{key:at.EDIT_STUDENT_CM,name:"Edit Own Caseload",description:"Can modify students on own caseload",firebaseRule:"Case Manager, Service Provider"},{key:at.EDIT_STUDENT_ALL,name:"Edit All Students",description:"Can modify any student record",firebaseRule:"Admin, School Admin, Staff Edit, 504 Coordinator, SPED Chair"},{key:at.ACCESS_ADMIN_PANEL,name:"Admin Panel Access",description:"Can access administrative functions",firebaseRule:"Admin, School Admin, SPED Chair, 504 Coordinator"},{key:at.MANAGE_AIDES,name:"Aide Management",description:"Can manage aide assignments and schedules",firebaseRule:"Admin, School Admin, SPED Chair, 504 Coordinator"},{key:at.MANAGE_SYSTEM_SETTINGS,name:"System Settings",description:"Can modify system-level configuration",firebaseRule:"Admin only"}].sort((c,u)=>{const f=uc.filter(p=>{var g;return(g=e[p])==null?void 0:g.includes(c.key)}).length;return uc.filter(p=>{var g;return(g=e[p])==null?void 0:g.includes(u.key)}).length-f})),a=(l,c)=>{var u;return((u=e[l])==null?void 0:u.includes(c))||!1},o=l=>({admin:"Admin",school_admin:"School Admin",staff_view:"Staff View",staff_edit:"Staff Edit",admin_504:"504 Coord",sped_chair:"SPED Chair",case_manager:"Case Mgr",teacher:"Teacher",service_provider:"Service",paraeducator:"Para"})[l]||l;return(l,c)=>(B(),U("div",xK,[c[7]||(c[7]=d("div",{class:"overview-header"},[d("h2",null," Permissions Overview"),d("p",{class:"overview-description"}," This a summary of the role-based permissions These permissions are hard-coded for consistency and security. ")],-1)),d("div",EK,[(B(!0),U(Pe,null,je(s.value,u=>(B(),U("div",{class:"summary-card",key:u.key},[d("div",{class:Qe(["role-header",u.key])},[d("div",_K,[(B(),Qt(S1(u.icon),{class:"w-6 h-6"}))]),d("div",bK,[d("h3",null,Y(u.name),1),d("p",null,Y(u.description),1)])],2),d("div",SK,[d("div",AK,[d("span",TK,Y(u.permissions.length),1),c[0]||(c[0]=d("span",{class:"stat-label"},"Permissions",-1))]),d("div",wK,[d("span",CK,Y(u.adminAccess?"Yes":"No"),1),c[1]||(c[1]=d("span",{class:"stat-label"},"Admin Panel",-1))]),d("div",IK,[d("span",kK,Y(u.studentAccessLevel),1),c[2]||(c[2]=d("span",{class:"stat-label"},"Student Access",-1))])])]))),128))]),d("div",DK,[c[4]||(c[4]=d("h3",null," Detailed Permissions Matrix",-1)),c[5]||(c[5]=d("div",{class:"matrix-note"},[d("strong",null,"Note:"),we(" These permissions are synchronized with Firebase security rules and cannot be modified. They ensure consistent security across your application. ")],-1)),d("div",PK,[d("table",RK,[d("thead",null,[d("tr",null,[c[3]||(c[3]=d("th",{class:"permission-column"},"Permission",-1)),(B(!0),U(Pe,null,je(r.value,u=>(B(),U("th",{key:u,class:Qe(`role-header ${u}`),"data-role":o(u)},null,10,FK))),128))])]),d("tbody",null,[(B(!0),U(Pe,null,je(i.value,u=>(B(),U("tr",{key:u.key,class:"permission-row"},[d("td",NK,[d("div",OK,Y(u.name),1),d("div",MK,Y(u.description),1),d("div",LK,Y(u.firebaseRule),1)]),(B(!0),U(Pe,null,je(r.value,f=>(B(),U("td",{key:f,class:"permission-cell"},[d("span",{class:Qe(["permission-indicator",{granted:a(f,u.key)}])},Y(a(f,u.key)?"":""),3)]))),128))]))),128))])])])]),d("div",BK,[c[6]||(c[6]=d("h3",null," Admin Panel Access",-1)),d("div",UK,[(B(!0),U(Pe,null,je(s.value,u=>(B(),U("div",{key:u.key,class:Qe(["access-card",{"has-access":u.adminAccess}])},[d("div",$K,[d("span",VK,Y(u.adminAccess?"":""),1),d("span",HK,Y(u.name),1)]),u.adminAccess?(B(),U("div",jK,[d("div",GK,Y(u.adminLevel),1),d("div",WK,Y(u.adminDescription),1)])):(B(),U("div",zK," No admin panel access "))],2))),128))])]),c[8]||(c[8]=Dn('<div class="firebase-rules" data-v-88586d63><h3 data-v-88586d63> Firebase Security Rules Summary</h3><div class="rules-grid" data-v-88586d63><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> Users Collection</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read:</strong> All authenticated users</li><li data-v-88586d63><strong data-v-88586d63>Write:</strong> Admin, School Admin, 504 Coordinator, SPED Chair</li><li data-v-88586d63><strong data-v-88586d63>Delete:</strong> Admin, School Admin, 504 Coordinator, SPED Chair</li></ul></div><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> Students Collection</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read:</strong> All authenticated users (role-filtered)</li><li data-v-88586d63><strong data-v-88586d63>Write (All):</strong> Admin, School Admin, Staff Edit, 504 Coordinator, SPED Chair</li><li data-v-88586d63><strong data-v-88586d63>Write (Own Caseload):</strong> Case Manager, Service Provider</li><li data-v-88586d63><strong data-v-88586d63>Delete:</strong> Admin, School Admin, SPED Chair, 504 Coordinator</li></ul></div><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> App Settings</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read:</strong> All authenticated users</li><li data-v-88586d63><strong data-v-88586d63>Write:</strong> Admin, School Admin</li></ul></div><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> Audit Logs</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read:</strong> Admin, School Admin</li><li data-v-88586d63><strong data-v-88586d63>Write:</strong> All authenticated users (own actions)</li></ul></div><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> Feedback Forms</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read:</strong> Admin, School Admin, SPED Chair, 504 Coordinator, Case Manager</li><li data-v-88586d63><strong data-v-88586d63>Write:</strong> Admin, School Admin, SPED Chair, 504 Coordinator, Case Manager</li><li data-v-88586d63><strong data-v-88586d63>Delete:</strong> Admin, School Admin, SPED Chair, 504 Coordinator</li></ul></div><div class="rule-card" data-v-88586d63><h4 data-v-88586d63> Backups</h4><ul data-v-88586d63><li data-v-88586d63><strong data-v-88586d63>Read/Write:</strong> Admin, School Admin</li><li data-v-88586d63><strong data-v-88586d63>Delete:</strong> Admin, School Admin</li></ul></div></div></div>',1))]))}},qK=xt(KK,[["__scopeId","data-v-88586d63"]]),XK={class:"admin-permissions"},YK={__name:"AdminPermissions",setup(t){return(e,r)=>(B(),U("div",XK,[Oe(qK)]))}},QK=xt(YK,[["__scopeId","data-v-699444ca"]]);var vI={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(Ht,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(m){var S=P(m);S.chunkSize=parseInt(S.chunkSize),m.step||m.chunk||(S.chunkSize=null),this._handle=new v(S),(this._handle.streamer=this)._config=S}).call(this,_),this.parseChunk=function(m,S){var I=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<I){let C=this._config.newline;C||(k=this._config.quoteChar||'"',C=this._handle.guessLineEndings(m,k)),m=[...m.split(C).slice(I)].join(C)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(k=this._config.beforeFirstChunk(m))!==void 0&&(m=k),this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+m,k=(this._partialLine="",this._handle.parse(I,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(m=k.meta.cursor,I=(this._finished||(this._partialLine=I.substring(m-this._baseIndex),this._baseIndex=m),k&&k.data&&(this._rowCount+=k.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:k,workerId:c.WORKER_ID,finished:I});else if(A(this._config.chunk)&&!S){if(this._config.chunk(k,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=k=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(k.data),this._completeResults.errors=this._completeResults.errors.concat(k.errors),this._completeResults.meta=k.meta),this._completed||!I||!A(this._config.complete)||k&&k.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),I||k&&k.meta.paused||this._nextChunk(),k}this._halted=!0},this._sendError=function(m){A(this._config.error)?this._config.error(m):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:m,finished:!1})}}function f(_){var m;(_=_||{}).chunkSize||(_.chunkSize=c.RemoteChunkSize),u.call(this,_),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(S){this._input=S,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(m=new XMLHttpRequest,this._config.withCredentials&&(m.withCredentials=this._config.withCredentials),i||(m.onload=R(this._chunkLoaded,this),m.onerror=R(this._chunkError,this)),m.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var S,I=this._config.downloadRequestHeaders;for(S in I)m.setRequestHeader(S,I[S])}var k;this._config.chunkSize&&(k=this._start+this._config.chunkSize-1,m.setRequestHeader("Range","bytes="+this._start+"-"+k));try{m.send(this._config.downloadRequestBody)}catch(C){this._chunkError(C.message)}i&&m.status===0&&this._chunkError()}},this._chunkLoaded=function(){m.readyState===4&&(m.status<200||400<=m.status?this._chunkError():(this._start+=this._config.chunkSize||m.responseText.length,this._finished=!this._config.chunkSize||this._start>=(S=>(S=S.getResponseHeader("Content-Range"))!==null?parseInt(S.substring(S.lastIndexOf("/")+1)):-1)(m),this.parseChunk(m.responseText)))},this._chunkError=function(S){S=m.statusText||S,this._sendError(new Error(S))}}function h(_){(_=_||{}).chunkSize||(_.chunkSize=c.LocalChunkSize),u.call(this,_);var m,S,I=typeof FileReader<"u";this.stream=function(k){this._input=k,S=k.slice||k.webkitSlice||k.mozSlice,I?((m=new FileReader).onload=R(this._chunkLoaded,this),m.onerror=R(this._chunkError,this)):m=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var k=this._input,C=(this._config.chunkSize&&(C=Math.min(this._start+this._config.chunkSize,this._input.size),k=S.call(k,this._start,C)),m.readAsText(k,this._config.encoding));I||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(k){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(k.target.result)},this._chunkError=function(){this._sendError(m.error)}}function p(_){var m;u.call(this,_=_||{}),this.stream=function(S){return m=S,this._nextChunk()},this._nextChunk=function(){var S,I;if(!this._finished)return S=this._config.chunkSize,m=S?(I=m.substring(0,S),m.substring(S)):(I=m,""),this._finished=!m,this.parseChunk(I)}}function g(_){u.call(this,_=_||{});var m=[],S=!0,I=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(k){this._input=k,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&m.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),m.length?this.parseChunk(m.shift()):S=!0},this._streamData=R(function(k){try{m.push(typeof k=="string"?k:k.toString(this._config.encoding)),S&&(S=!1,this._checkIsFinished(),this.parseChunk(m.shift()))}catch(C){this._streamError(C)}},this),this._streamError=R(function(k){this._streamCleanUp(),this._sendError(k)},this),this._streamEnd=R(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=R(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(_){var m,S,I,k,C=Math.pow(2,53),O=-C,D=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,F=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,N=this,M=0,L=0,z=!1,j=!1,H=[],G={data:[],errors:[],meta:{}};function W(ce){return _.skipEmptyLines==="greedy"?ce.join("").trim()==="":ce.length===1&&ce[0].length===0}function ne(){if(G&&I&&(se("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),I=!1),_.skipEmptyLines&&(G.data=G.data.filter(function(J){return!W(J)})),de()){let J=function(X,Q){A(_.transformHeader)&&(X=_.transformHeader(X,Q)),H.push(X)};var ye=J;if(G)if(Array.isArray(G.data[0])){for(var ce=0;de()&&ce<G.data.length;ce++)G.data[ce].forEach(J);G.data.splice(0,1)}else G.data.forEach(J)}function te(J,X){for(var Q=_.header?{}:[],fe=0;fe<J.length;fe++){var ve=fe,ie=J[fe],ie=((ee,ge)=>(Te=>(_.dynamicTypingFunction&&_.dynamicTyping[Te]===void 0&&(_.dynamicTyping[Te]=_.dynamicTypingFunction(Te)),(_.dynamicTyping[Te]||_.dynamicTyping)===!0))(ee)?ge==="true"||ge==="TRUE"||ge!=="false"&&ge!=="FALSE"&&((Te=>{if(D.test(Te)&&(Te=parseFloat(Te),O<Te&&Te<C))return 1})(ge)?parseFloat(ge):F.test(ge)?new Date(ge):ge===""?null:ge):ge)(ve=_.header?fe>=H.length?"__parsed_extra":H[fe]:ve,ie=_.transform?_.transform(ie,ve):ie);ve==="__parsed_extra"?(Q[ve]=Q[ve]||[],Q[ve].push(ie)):Q[ve]=ie}return _.header&&(fe>H.length?se("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+fe,L+X):fe<H.length&&se("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+fe,L+X)),Q}var Z;G&&(_.header||_.dynamicTyping||_.transform)&&(Z=1,!G.data.length||Array.isArray(G.data[0])?(G.data=G.data.map(te),Z=G.data.length):G.data=te(G.data,0),_.header&&G.meta&&(G.meta.fields=H),L+=Z)}function de(){return _.header&&H.length===0}function se(ce,te,Z,ye){ce={type:ce,code:te,message:Z},ye!==void 0&&(ce.row=ye),G.errors.push(ce)}A(_.step)&&(k=_.step,_.step=function(ce){G=ce,de()?ne():(ne(),G.data.length!==0&&(M+=ce.data.length,_.preview&&M>_.preview?S.abort():(G.data=G.data[0],k(G,N))))}),this.parse=function(ce,te,Z){var ye=_.quoteChar||'"',ye=(_.newline||(_.newline=this.guessLineEndings(ce,ye)),I=!1,_.delimiter?A(_.delimiter)&&(_.delimiter=_.delimiter(ce),G.meta.delimiter=_.delimiter):((ye=((J,X,Q,fe,ve)=>{var ie,ee,ge,Te;ve=ve||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ie=0;Ie<ve.length;Ie++){for(var Ae,We=ve[Ie],De=0,He=0,$e=0,ke=(ge=void 0,new b({comments:fe,delimiter:We,newline:X,preview:10}).parse(J)),Ke=0;Ke<ke.data.length;Ke++)Q&&W(ke.data[Ke])?$e++:(Ae=ke.data[Ke].length,He+=Ae,ge===void 0?ge=Ae:0<Ae&&(De+=Math.abs(Ae-ge),ge=Ae));0<ke.data.length&&(He/=ke.data.length-$e),(ee===void 0||De<=ee)&&(Te===void 0||Te<He)&&1.99<He&&(ee=De,ie=We,Te=He)}return{successful:!!(_.delimiter=ie),bestDelimiter:ie}})(ce,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=ye.bestDelimiter:(I=!0,_.delimiter=c.DefaultDelimiter),G.meta.delimiter=_.delimiter),P(_));return _.preview&&_.header&&ye.preview++,m=ce,S=new b(ye),G=S.parse(m,te,Z),ne(),z?{meta:{paused:!0}}:G||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,S.abort(),m=A(_.chunk)?"":m.substring(S.getCharIndex())},this.resume=function(){N.streamer._halted?(z=!1,N.streamer.parseChunk(m,!0)):setTimeout(N.resume,3)},this.aborted=function(){return j},this.abort=function(){j=!0,S.abort(),G.meta.aborted=!0,A(_.complete)&&_.complete(G),m=""},this.guessLineEndings=function(J,ye){J=J.substring(0,1048576);var ye=new RegExp(y(ye)+"([^]*?)"+y(ye),"gm"),Z=(J=J.replace(ye,"")).split("\r"),ye=J.split(`
`),J=1<ye.length&&ye[0].length<Z[0].length;if(Z.length===1||J)return`
`;for(var X=0,Q=0;Q<Z.length;Q++)Z[Q][0]===`
`&&X++;return X>=Z.length/2?`\r
`:"\r"}}function y(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(_){var m=(_=_||{}).delimiter,S=_.newline,I=_.comments,k=_.step,C=_.preview,O=_.fastMode,D=null,F=!1,N=_.quoteChar==null?'"':_.quoteChar,M=N;if(_.escapeChar!==void 0&&(M=_.escapeChar),(typeof m!="string"||-1<c.BAD_DELIMITERS.indexOf(m))&&(m=","),I===m)throw new Error("Comment character same as delimiter");I===!0?I="#":(typeof I!="string"||-1<c.BAD_DELIMITERS.indexOf(I))&&(I=!1),S!==`
`&&S!=="\r"&&S!==`\r
`&&(S=`
`);var L=0,z=!1;this.parse=function(j,H,G){if(typeof j!="string")throw new Error("Input must be a string");var W=j.length,ne=m.length,de=S.length,se=I.length,ce=A(k),te=[],Z=[],ye=[],J=L=0;if(!j)return De();if(O||O!==!1&&j.indexOf(N)===-1){for(var X=j.split(S),Q=0;Q<X.length;Q++){if(ye=X[Q],L+=ye.length,Q!==X.length-1)L+=S.length;else if(G)return De();if(!I||ye.substring(0,se)!==I){if(ce){if(te=[],Te(ye.split(m)),He(),z)return De()}else Te(ye.split(m));if(C&&C<=Q)return te=te.slice(0,C),De(!0)}}return De()}for(var fe=j.indexOf(m,L),ve=j.indexOf(S,L),ie=new RegExp(y(M)+y(N),"g"),ee=j.indexOf(N,L);;)if(j[L]===N)for(ee=L,L++;;){if((ee=j.indexOf(N,ee+1))===-1)return G||Z.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:te.length,index:L}),Ae();if(ee===W-1)return Ae(j.substring(L,ee).replace(ie,N));if(N===M&&j[ee+1]===M)ee++;else if(N===M||ee===0||j[ee-1]!==M){fe!==-1&&fe<ee+1&&(fe=j.indexOf(m,ee+1));var ge=Ie((ve=ve!==-1&&ve<ee+1?j.indexOf(S,ee+1):ve)===-1?fe:Math.min(fe,ve));if(j.substr(ee+1+ge,ne)===m){ye.push(j.substring(L,ee).replace(ie,N)),j[L=ee+1+ge+ne]!==N&&(ee=j.indexOf(N,L)),fe=j.indexOf(m,L),ve=j.indexOf(S,L);break}if(ge=Ie(ve),j.substring(ee+1+ge,ee+1+ge+de)===S){if(ye.push(j.substring(L,ee).replace(ie,N)),We(ee+1+ge+de),fe=j.indexOf(m,L),ee=j.indexOf(N,L),ce&&(He(),z))return De();if(C&&te.length>=C)return De(!0);break}Z.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:te.length,index:L}),ee++}}else if(I&&ye.length===0&&j.substring(L,L+se)===I){if(ve===-1)return De();L=ve+de,ve=j.indexOf(S,L),fe=j.indexOf(m,L)}else if(fe!==-1&&(fe<ve||ve===-1))ye.push(j.substring(L,fe)),L=fe+ne,fe=j.indexOf(m,L);else{if(ve===-1)break;if(ye.push(j.substring(L,ve)),We(ve+de),ce&&(He(),z))return De();if(C&&te.length>=C)return De(!0)}return Ae();function Te($e){te.push($e),J=L}function Ie($e){var ke=0;return ke=$e!==-1&&($e=j.substring(ee+1,$e))&&$e.trim()===""?$e.length:ke}function Ae($e){return G||($e===void 0&&($e=j.substring(L)),ye.push($e),L=W,Te(ye),ce&&He()),De()}function We($e){L=$e,Te(ye),ye=[],ve=j.indexOf(S,L)}function De($e){if(_.header&&!H&&te.length&&!F){var ke=te[0],Ke=Object.create(null),_e=new Set(ke);let Ee=!1;for(let Se=0;Se<ke.length;Se++){let Me=ke[Se];if(Ke[Me=A(_.transformHeader)?_.transformHeader(Me,Se):Me]){let ze,lt=Ke[Me];for(;ze=Me+"_"+lt,lt++,_e.has(ze););_e.add(ze),ke[Se]=ze,Ke[Me]++,Ee=!0,(D=D===null?{}:D)[ze]=Me}else Ke[Me]=1,ke[Se]=Me;_e.add(Me)}Ee&&console.warn("Duplicate headers found and renamed."),F=!0}return{data:te,errors:Z,meta:{delimiter:m,linebreak:S,aborted:z,truncated:!!$e,cursor:J+(H||0),renamedHeaders:D}}}function He(){k(De()),te=[],Z=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return L}}function E(_){var m=_.data,S=o[m.workerId],I=!1;if(m.error)S.userError(m.error,m.file);else if(m.results&&m.results.data){var k={abort:function(){I=!0,x(m.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if(A(S.userStep)){for(var C=0;C<m.results.data.length&&(S.userStep({data:m.results.data[C],errors:m.results.errors,meta:m.results.meta},k),!I);C++);delete m.results}else A(S.userChunk)&&(S.userChunk(m.results,k,m.file),delete m.results)}m.finished&&!I&&x(m.workerId,m.results)}function x(_,m){var S=o[_];A(S.userComplete)&&S.userComplete(m),S.terminate(),delete o[_]}function w(){throw new Error("Not implemented.")}function P(_){if(typeof _!="object"||_===null)return _;var m,S=Array.isArray(_)?[]:{};for(m in _)S[m]=P(_[m]);return S}function R(_,m){return function(){_.apply(m,arguments)}}function A(_){return typeof _=="function"}return c.parse=function(_,m){var S=(m=m||{}).dynamicTyping||!1;if(A(S)&&(m.dynamicTypingFunction=S,S={}),m.dynamicTyping=S,m.transform=!!A(m.transform)&&m.transform,!m.worker||!c.WORKERS_SUPPORTED)return S=null,c.NODE_STREAM_INPUT,typeof _=="string"?(_=(I=>I.charCodeAt(0)!==65279?I:I.slice(1))(_),S=new(m.download?f:p)(m)):_.readable===!0&&A(_.read)&&A(_.on)?S=new g(m):(n.File&&_ instanceof File||_ instanceof Object)&&(S=new h(m)),S.stream(_);(S=(()=>{var I;return!!c.WORKERS_SUPPORTED&&(I=(()=>{var k=n.URL||n.webkitURL||null,C=r.toString();return c.BLOB_URL||(c.BLOB_URL=k.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))})(),(I=new n.Worker(I)).onmessage=E,I.id=l++,o[I.id]=I)})()).userStep=m.step,S.userChunk=m.chunk,S.userComplete=m.complete,S.userError=m.error,m.step=A(m.step),m.chunk=A(m.chunk),m.complete=A(m.complete),m.error=A(m.error),delete m.worker,S.postMessage({input:_,config:m,workerId:S.id})},c.unparse=function(_,m){var S=!1,I=!0,k=",",C=`\r
`,O='"',D=O+O,F=!1,N=null,M=!1,L=((()=>{if(typeof m=="object"){if(typeof m.delimiter!="string"||c.BAD_DELIMITERS.filter(function(H){return m.delimiter.indexOf(H)!==-1}).length||(k=m.delimiter),typeof m.quotes!="boolean"&&typeof m.quotes!="function"&&!Array.isArray(m.quotes)||(S=m.quotes),typeof m.skipEmptyLines!="boolean"&&typeof m.skipEmptyLines!="string"||(F=m.skipEmptyLines),typeof m.newline=="string"&&(C=m.newline),typeof m.quoteChar=="string"&&(O=m.quoteChar),typeof m.header=="boolean"&&(I=m.header),Array.isArray(m.columns)){if(m.columns.length===0)throw new Error("Option columns is empty");N=m.columns}m.escapeChar!==void 0&&(D=m.escapeChar+O),m.escapeFormulae instanceof RegExp?M=m.escapeFormulae:typeof m.escapeFormulae=="boolean"&&m.escapeFormulae&&(M=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(O),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return z(null,_,F);if(typeof _[0]=="object")return z(N||Object.keys(_[0]),_,F)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||N),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),z(_.fields||[],_.data||[],F);throw new Error("Unable to serialize unrecognized input");function z(H,G,W){var ne="",de=(typeof H=="string"&&(H=JSON.parse(H)),typeof G=="string"&&(G=JSON.parse(G)),Array.isArray(H)&&0<H.length),se=!Array.isArray(G[0]);if(de&&I){for(var ce=0;ce<H.length;ce++)0<ce&&(ne+=k),ne+=j(H[ce],ce);0<G.length&&(ne+=C)}for(var te=0;te<G.length;te++){var Z=(de?H:G[te]).length,ye=!1,J=de?Object.keys(G[te]).length===0:G[te].length===0;if(W&&!de&&(ye=W==="greedy"?G[te].join("").trim()==="":G[te].length===1&&G[te][0].length===0),W==="greedy"&&de){for(var X=[],Q=0;Q<Z;Q++){var fe=se?H[Q]:Q;X.push(G[te][fe])}ye=X.join("").trim()===""}if(!ye){for(var ve=0;ve<Z;ve++){0<ve&&!J&&(ne+=k);var ie=de&&se?H[ve]:ve;ne+=j(G[te][ie],ve)}te<G.length-1&&(!W||0<Z&&!J)&&(ne+=C)}}return ne}function j(H,G){var W,ne;return H==null?"":H.constructor===Date?JSON.stringify(H).slice(1,25):(ne=!1,M&&typeof H=="string"&&M.test(H)&&(H="'"+H,ne=!0),W=H.toString().replace(L,D),(ne=ne||S===!0||typeof S=="function"&&S(H,G)||Array.isArray(S)&&S[G]||((de,se)=>{for(var ce=0;ce<se.length;ce++)if(-1<de.indexOf(se[ce]))return!0;return!1})(W,c.BAD_DELIMITERS)||-1<W.indexOf(k)||W.charAt(0)===" "||W.charAt(W.length-1)===" ")?O+W+O:W)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=b,c.ParserHandle=v,c.NetworkStreamer=f,c.FileStreamer=h,c.StringStreamer=p,c.ReadableStreamStreamer=g,n.jQuery&&((s=n.jQuery).fn.parse=function(_){var m=_.config||{},S=[];return this.each(function(C){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var O=0;O<this.files.length;O++)S.push({file:this.files[O],inputElem:this,instanceConfig:s.extend({},m)})}),I(),this;function I(){if(S.length===0)A(_.complete)&&_.complete();else{var C,O,D,F,N=S[0];if(A(_.before)){var M=_.before(N.file,N.inputElem);if(typeof M=="object"){if(M.action==="abort")return C="AbortError",O=N.file,D=N.inputElem,F=M.reason,void(A(_.error)&&_.error({name:C},O,D,F));if(M.action==="skip")return void k();typeof M.config=="object"&&(N.instanceConfig=s.extend(N.instanceConfig,M.config))}else if(M==="skip")return void k()}var L=N.instanceConfig.complete;N.instanceConfig.complete=function(z){A(L)&&L(z,N.file,N.inputElem),k()},c.parse(N.file,N.instanceConfig)}}function k(){S.splice(0,1),I()}}),a&&(n.onmessage=function(_){_=_.data,c.WORKER_ID===void 0&&_&&(c.WORKER_ID=_.workerId),typeof _.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(_.input,_.config),finished:!0}):(n.File&&_.input instanceof File||_.input instanceof Object)&&(_=c.parse(_.input,_.config))&&n.postMessage({workerId:c.WORKER_ID,results:_,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(h.prototype=Object.create(u.prototype)).constructor=h,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(u.prototype)).constructor=g,c})})(vI);var JK=vI.exports;const yI=fI(JK),Lo=vo();function xI(t){return t.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,r)=>r.toUpperCase()).replace(/^[A-Z]/,e=>e.toLowerCase())}async function ZK(t,e){if(!t)return null;const r=Object.values(e).find(n=>{var s;return n.aeriesId===t||n.aeriesId===parseInt(t)||((s=n.aeriesId)==null?void 0:s.toString())===(t==null?void 0:t.toString())});return r?r.id:(console.warn(`No Firebase user found for Aeries teacher ID: ${t}`),null)}function $v(t){return{sourcedId:"stateId",SSID:"stateId",StateStudentID:"stateId",StudentNumber:"localId",givenName:"firstName",FirstName:"firstName",familyName:"lastName",LastName:"lastName",middleName:"middleName",MiddleName:"middleName",email:"email",Email:"email",phone:"phone",Phone:"phone",dateOfBirth:"birthDate",DOB:"birthDate",sex:"gender",Gender:"gender",grade:"grade",Grade:"grade",Address:"address",City:"city",State:"state",ZipCode:"zipCode",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",AttendanceRate:"attendanceRate",attendanceRate:"attendanceRate",Period1TeacherId:"schedule.periods.1",period1TeacherId:"schedule.periods.1",Period2TeacherId:"schedule.periods.2",period2TeacherId:"schedule.periods.2",Period3TeacherId:"schedule.periods.3",period3TeacherId:"schedule.periods.3",Period4TeacherId:"schedule.periods.4",period4TeacherId:"schedule.periods.4",Period5TeacherId:"schedule.periods.5",period5TeacherId:"schedule.periods.5",Period6TeacherId:"schedule.periods.6",period6TeacherId:"schedule.periods.6",Period7TeacherId:"schedule.periods.7",period7TeacherId:"schedule.periods.7",SHTeacherId:"schedule.periods.SH",shTeacherId:"schedule.periods.SH"}[t]||xI(t)}function Vv(t){return{SSID:"ssid",FirstName:"firstName",LastName:"lastName",MiddleName:"middleName",Grade:"grade",DOB:"dob",Gender:"gender",Ethnicity:"ethnicity",School:"school",Address:"address",City:"city",State:"state",ZipCode:"zipCode",Phone:"phone",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",ELL:"ell",504:"504",IEP:"iep",CaseManager:"caseManager",Disability:"disability",ServiceMinutes:"serviceMinutes",Goals:"goals",Notes:"notes",Plan:"plan",ReviewDate:"reviewDate",ReevalDate:"reevalDate",MeetingDate:"meetingDate",SpeechProvider:"speechProvider",MHProvider:"mhProvider",OTProvider:"otProvider",ProgramAccommodations:"programAccommodations",Accommodations:"programAccommodations",IEP_Services:"iepServices"}[t]||xI(t)}async function eq(t){return new Promise((e,r)=>{yI.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));const i=Object.keys(s[0]).map(o=>o.trim().toLowerCase());if(!(i.includes("sourcedid")||i.includes("ssid")||i.includes("statestudentid")))return r(new Error("Missing required 'sourcedId' or 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function tq(t,e){var a;let r=0;const n=At(Lo,"users"),s=await Gt(n),i={};s.forEach(o=>{i[o.id]={id:o.id,...o.data()}}),console.log(`Loaded ${Object.keys(i).length} users for teacher ID mapping`);for(const o of t){const l=(a=o.sourcedId||o.SSID||o.ssid||o.StateStudentID||o.stateStudentId)==null?void 0:a.trim();if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={firstName:"",lastName:"",grade:"",birthDate:"",gender:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",parentName:"",parentPhone:"",parentEmail:"",attendanceRate:"",schedule:{periods:{}}};for(const u of e){const f=$v(u),h=o[u],p=h!=null&&typeof h=="string"?h.trim():h!=null?String(h):null;if(f.startsWith("schedule.periods.")){const g=f.split(".")[2];if(p){const v=await ZK(p,i);v?(c.schedule.periods[g]=v,console.log(`Mapped Aeries teacher ID ${p} to Firebase user ID ${v} for period ${g}`)):console.warn(`Could not map Aeries teacher ID ${p} for period ${g}`)}}else c[f]=p}c.lastAeriesImport=new Date().toISOString(),console.log("Final aeriesData.schedule structure:",JSON.stringify(c.schedule,null,2));try{const u=At(Lo,"students"),f=or(u,Ur("app.studentData.ssid","==",l)),h=await Gt(f);if(h.empty){const p=Ze(At(Lo,"students")),g={app:{studentData:{ssid:l}},aeries:c,createdAt:In()};await jt(p,g),console.log(`Created new student ${p.id} with Aeries data for SSID ${l}`)}else{const p=h.docs[0];await jt(Ze(Lo,"students",p.id),{aeries:c},{merge:!0}),console.log(`Updated existing student ${p.id} with Aeries data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import Aeries data for SSID ${l}:`,u)}}return r}async function rq(t){return new Promise((e,r)=>{yI.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));if(!Object.keys(s[0]).some(a=>a.trim().toLowerCase()==="ssid"))return r(new Error("Missing required 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function nq(t,e){var n,s,i,a;let r=0;for(const o of t){const l=((n=o.SSID)==null?void 0:n.trim())||((s=o.ssid)==null?void 0:s.trim());if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={};for(const u of e){const f=Vv(u);u==="IEP_Services"||u==="iep_services"?c[f]=((i=o[u])==null?void 0:i.split(";").map(h=>h.trim()))||[]:u==="ProgramAccommodations"||u==="Accommodations"?c[f]=((a=o[u])==null?void 0:a.split(";").map(h=>h.trim()))||[]:c[f]=o[u]}c.lastSeisImport=new Date().toISOString();try{const u=At(Lo,"students"),f=or(u,Ur("app.studentData.ssid","==",l)),h=await Gt(f);if(h.empty){const p=Ze(At(Lo,"students")),g={app:{studentData:{ssid:l}},seis:c,createdAt:In()};await jt(p,g),console.log(`Created new student ${p.id} with SEIS data for SSID ${l}`)}else{const p=h.docs[0];await jt(Ze(Lo,"students",p.id),{seis:c},{merge:!0}),console.log(`Updated existing student ${p.id} with SEIS data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import SEIS data for SSID ${l}:`,u)}}return r}const sq={name:"SeisImport",setup(){const t=ae(null),e=ae(null),r=ae([]),n=ae([]),s=ae([]),i=ae([]),a=ae(""),o=ae(!1),l=be(()=>r.value.length>0&&s.value.length>0),c=(p,g=!1)=>{a.value=p,o.value=g,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:p=>{const g=p.target.files[0];if(g){const v=sl(g,{allowedTypes:["csv"],maxSize:10485760,fieldName:"SEIS Import File"});if(!v.isValid){c(v.error,!0),p.target.value="";return}const y=Hr(g.name);if(!y.isSafe){c(`File name contains potentially dangerous content: ${y.threats.join(", ")}`,!0),p.target.value="";return}e.value=g}},previewFile:async()=>{const p=e.value;if(!p){c(" Please select a CSV file.",!0);return}if(!ks("seisPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const y=(await rq(p)).map(E=>{const x={};return Object.entries(E).forEach(([w,P])=>{const R=mn(w,{trim:!0,maxLength:100,removeDangerous:!0});let A=P;if(typeof P=="string"){A=mn(P,{trim:!0,maxLength:500,removeDangerous:!0});const _=Hr(A);_.isSafe||(console.warn(`Security threat detected in SEIS data: ${_.threats.join(", ")}`),A="")}x[R]=A}),x});r.value=y,c(` Loaded ${r.value.length} rows.`);const b=Object.keys(r.value[0]||{}).filter(E=>E.length>0);n.value=b,s.value=[...b],i.value=r.value.slice(0,5)}catch(v){c(` Error: ${v.message}`,!0),console.error("SEIS Parse Error:",v)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!ks("seisImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} SEIS records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const g=r.value.map(y=>{const b={};return s.value.forEach(E=>{y[E]!==void 0&&(b[E]=y[E])}),b}),v=g.filter(y=>Object.values(y).some(E=>E&&typeof E=="string"&&E.trim().length>0));if(v.length===0){c(" No valid records found to import.",!0);return}if(v.length!==g.length){const y=g.length-v.length;c(` Skipping ${y} invalid records. Importing ${v.length} valid records.`)}await nq(v,s.value),c(` Successfully imported ${v.length} SEIS records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(g){c(` Import failed: ${g.message}`,!0),console.error("SEIS Import Error:",g)}}}}}},aq={class:"seis-import"},iq=["disabled"],oq={key:0,id:"seis-field-options"},lq=["value"],cq={key:1,id:"seis-preview-container",style:{"margin-top":"1rem"}},uq={border:"1",cellpadding:"4"},dq=["disabled"];function fq(t,e,r,n,s,i){return B(),U("div",aq,[e[5]||(e[5]=d("h3",null,"Upload SEIS CSV",-1)),d("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),d("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,iq),n.fieldOptions.length>0?(B(),U("div",oq,[e[4]||(e[4]=d("h4",null,"Select fields to import:",-1)),(B(!0),U(Pe,null,je(n.fieldOptions,a=>(B(),U("label",{key:a},[Be(d("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,lq),[[Et,n.selectedFields]]),we(" "+Y(a),1)]))),128))])):xe("",!0),n.previewData.length>0?(B(),U("div",cq,[d("table",uq,[d("thead",null,[d("tr",null,[(B(!0),U(Pe,null,je(n.fieldOptions,a=>(B(),U("th",{key:a},Y(a),1))),128))])]),d("tbody",null,[(B(!0),U(Pe,null,je(n.previewData,(a,o)=>(B(),U("tr",{key:o},[(B(!0),U(Pe,null,je(n.fieldOptions,l=>(B(),U("td",{key:l},Y(a[l]||""),1))),128))]))),128))])]),d("p",null,"Showing first "+Y(n.previewData.length)+" of "+Y(n.parsedData.length)+" rows.",1)])):xe("",!0),d("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,dq),d("p",{class:Qe(["status-msg",{error:n.isError}])},Y(n.statusMessage),3)])}const hq=xt(sq,[["render",fq],["__scopeId","data-v-b942d3b4"]]),pq={name:"AeriesImport",setup(){const t=ae(null),e=ae(null),r=ae([]),n=ae([]),s=ae([]),i=ae([]),a=ae(""),o=ae(!1),l=be(()=>r.value.length>0&&s.value.length>0),c=(p,g=!1)=>{a.value=p,o.value=g,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:p=>{const g=p.target.files[0];if(g){const v=sl(g,{allowedTypes:["csv"],maxSize:10485760,fieldName:"Aeries Import File"});if(!v.isValid){c(v.error,!0),p.target.value="";return}const y=Hr(g.name);if(!y.isSafe){c(`File name contains potentially dangerous content: ${y.threats.join(", ")}`,!0),p.target.value="";return}e.value=g}},previewFile:async()=>{const p=e.value;if(!p){c(" Please select a CSV file.",!0);return}if(!ks("aeriesPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const y=(await eq(p)).map(E=>{const x={};return Object.entries(E).forEach(([w,P])=>{const R=mn(w,{trim:!0,maxLength:100,removeDangerous:!0});let A=P;if(typeof P=="string"){A=mn(P,{trim:!0,maxLength:500,removeDangerous:!0});const _=Hr(A);_.isSafe||(console.warn(`Security threat detected in Aeries data: ${_.threats.join(", ")}`),A="")}x[R]=A}),x});r.value=y,c(` Loaded ${r.value.length} rows.`);const b=Object.keys(r.value[0]||{}).filter(E=>E.length>0);n.value=b,s.value=[...b],i.value=r.value.slice(0,5)}catch(v){c(` Error: ${v.message}`,!0),console.error("Aeries Parse Error:",v)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!ks("aeriesImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} Aeries records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const g=r.value.map(y=>{const b={};return s.value.forEach(E=>{y[E]!==void 0&&(b[E]=y[E])}),b}),v=g.filter(y=>Object.values(y).some(E=>E&&typeof E=="string"&&E.trim().length>0));if(v.length===0){c(" No valid records found to import.",!0);return}if(v.length!==g.length){const y=g.length-v.length;c(` Skipping ${y} invalid records. Importing ${v.length} valid records.`)}await tq(v,s.value),c(` Successfully imported ${v.length} Aeries records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(g){c(` Import failed: ${g.message}`,!0),console.error("Aeries Import Error:",g)}}}}}},mq={class:"aeries-import"},gq=["disabled"],vq={key:0,id:"aeries-field-options"},yq=["value"],xq={key:1,id:"aeries-preview-container",style:{"margin-top":"1rem"}},Eq={border:"1",cellpadding:"4"},_q=["disabled"];function bq(t,e,r,n,s,i){return B(),U("div",mq,[e[5]||(e[5]=d("h3",null,"Upload Aeries CSV",-1)),d("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),d("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,gq),n.fieldOptions.length>0?(B(),U("div",vq,[e[4]||(e[4]=d("h4",null,"Select fields to import:",-1)),(B(!0),U(Pe,null,je(n.fieldOptions,a=>(B(),U("label",{key:a},[Be(d("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,yq),[[Et,n.selectedFields]]),we(" "+Y(a),1)]))),128))])):xe("",!0),n.previewData.length>0?(B(),U("div",xq,[d("table",Eq,[d("thead",null,[d("tr",null,[(B(!0),U(Pe,null,je(n.fieldOptions,a=>(B(),U("th",{key:a},Y(a),1))),128))])]),d("tbody",null,[(B(!0),U(Pe,null,je(n.previewData,(a,o)=>(B(),U("tr",{key:o},[(B(!0),U(Pe,null,je(n.fieldOptions,l=>(B(),U("td",{key:l},Y(a[l]||""),1))),128))]))),128))])]),d("p",null,"Showing first "+Y(n.previewData.length)+" of "+Y(n.parsedData.length)+" rows.",1)])):xe("",!0),d("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,_q),d("p",{class:Qe(["status-msg",{error:n.isError}])},Y(n.statusMessage),3)])}const Sq=xt(pq,[["render",bq],["__scopeId","data-v-b40a9547"]]);function Aq(){const t=cc(Gd()),e=ae(!1),r=ae(!1),n=ae(""),s=ae(""),i=ae(!1),a=Fs({baseUrl:"encrypted",clientId:"encrypted",clientSecret:"encrypted",selectedSchoolId:"school123",selectedClassIds:["class1","class2"],selectedApiTypes:{oneroster:!0,nativeAeries:!0},selectedEndpoints:["/schools","/students","/api/special-education/students"]}),o=ae([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"},{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),l=(I,k=!1)=>{s.value=I,i.value=k,setTimeout(()=>{s.value="",i.value=!1},5e3)},c=()=>{a.baseUrl="https://demo.aeries.net/aeries",a.clientId="1279e5c6b747b6d62b7c76db3a205d40eb7458e678a90493d537d5af6b953550",a.clientSecret="68019dbf8d8ba82980dd148eecc3977ac0d7f1f040d444225874c88eb80b9c1a",l("Demo credentials loaded. Click Connect to test.")},u=async()=>{if(!a.baseUrl||!a.clientId||!a.clientSecret)return l("Please fill in all connection fields.",!0),!1;r.value=!0,l("Connecting to Aeries API...");try{const C=(await Da(t,"getAeriesToken")({baseUrl:a.baseUrl,clientId:a.clientId,clientSecret:a.clientSecret})).data;if(C.success&&C.access_token)return n.value=C.access_token,e.value=!0,l(" Successfully connected to Aeries API!"),!0;throw new Error("No access token received")}catch(I){const k=I.message||"Connection failed";return l(` Connection failed: ${k}`,!0),console.error("Aeries API Connection Error:",I),!1}finally{r.value=!1}},f=()=>{e.value=!1,n.value="",l("Disconnected from Aeries API.")},h=async I=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const O=(await Da(t,"testAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:I,accessToken:n.value})).data;if(O.success)return l(` Successfully fetched data from ${I}`),{data:O.data,responseTime:O.responseTime};throw new Error(O.error||"API call failed")}catch(k){const C=k.message||"API call failed";return l(` API call failed: ${C}`,!0),console.error("Aeries API Test Error:",k),{error:C}}},p=async I=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const O=(await Da(t,"testCustomAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:I,accessToken:n.value})).data;return O.success?(l(` Successfully fetched data from ${I}`),{data:O.data,responseTime:O.responseTime}):{error:O.error||"API call failed"}}catch(k){const C=k.message||"API call failed";return l(` API call failed: ${C}`,!0),console.error("Custom Aeries API Test Error:",k),{error:C}}},g=async()=>await h("/students"),v=async()=>await h("/teachers"),y=async()=>{const I=["/api/special-education/students","/api/students/special-education","/api/iep/students","/api/504/students"];for(const k of I){const C=await p(k);if(C&&!C.error)return C}return{error:"No special education endpoints found"}},b=async()=>await p("/api/special-education/ieps"),E=async()=>await p("/api/special-education/504-plans"),x=async()=>await p("/api/special-education/accommodations"),w=async()=>await p("/api/special-education/services"),P=async()=>await p("/api/special-education/case-managers"),R=async()=>{const I={},k=o.value.filter(C=>C.path.includes("special-education")||C.path.includes("iep")||C.path.includes("504"));for(const C of k)I[C.path]=await p(C.path);return I},A=async()=>{var k;const I=await h("/students");if(I&&!I.error&&I.data){const C=((k=I.data.students)==null?void 0:k[0])||I.data[0],O=C&&(C.specialEducation||C.iep||C.plan504||C.disabilities||C.accommodations);return{success:!0,hasSpecialEdFields:O,sampleStudent:C,message:O?"OneRoster includes special education data!":"OneRoster does not include special education data"}}return I},_=async()=>{const I=["?filter=specialEducation=true","?filter=iep=true","?filter=plan504=true","?filter=disabilities=*","?filter=accommodations=*"],k={};for(const C of I)k[C]=await h(`/students${C}`);return k};async function m({baseUrl:I,accessToken:k}){const C=cc(),F=await Da(C,"testAeriesEndpoint")({baseUrl:I,endpoint:"/schools",accessToken:k});return F.data.data.orgs||F.data.data.schools||F.data.data||[]}async function S({baseUrl:I,accessToken:k,schoolId:C}){const O=cc(),D=Da(O,"testAeriesEndpoint"),F=`/classes?filter=school.sourcedId='${C}'`,N=await D({baseUrl:I,endpoint:F,accessToken:k});return N.data.data.classes||N.data.data||[]}return{isConnected:e,isConnecting:r,accessToken:n,connectionStatus:s,isError:i,connectionConfig:a,availableEndpoints:o,showStatus:l,loadDemoCredentials:c,connect:u,disconnect:f,testEndpoint:h,testCustomEndpoint:p,fetchStudents:g,fetchTeachers:v,fetchSpecialEducationStudents:y,fetchIEPRecords:b,fetch504Plans:E,fetchAccommodations:x,fetchServices:w,fetchCaseManagers:P,testAllSpecialEducationEndpoints:R,testOneRosterForSpecialEd:A,testStudentsWithSpecialEd:_,fetchSchools:m,fetchClasses:S}}const dg=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t.charCodeAt(n)^e.charCodeAt(n%e.length));return btoa(r)},fg=(t,e)=>{const r=atob(t);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r.charCodeAt(s)^e.charCodeAt(s%e.length));return n};function Tq(){const t=vo(),e=Qo(),r=ae(!1),n=ae(null),s=()=>{const c=e.currentUser;if(!c)throw new Error("User not authenticated");return c.uid+"_aeries_config_key"};return{isLoading:r,error:n,saveAeriesConfig:async c=>{if(!e.currentUser)throw new Error("User must be authenticated to save configuration");r.value=!0,n.value=null;try{const u=e.currentUser,f=s(),h={baseUrl:dg(c.baseUrl,f),clientId:dg(c.clientId,f),clientSecret:dg(c.clientSecret,f),selectedSchoolId:c.selectedSchoolId||"",selectedClassIds:c.selectedClassIds||[],manualClassInput:c.manualClassInput||"",savedAt:new Date().toISOString(),userId:u.uid},p=Ze(t,"users",u.uid,"aeries_config","current");return await jt(p,h),{success:!0,message:"Configuration saved securely"}}catch(u){throw n.value=u.message,console.error("Failed to save Aeries configuration:",u),u}finally{r.value=!1}},loadAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to load configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=s(),f=Ze(t,"users",c.uid,"aeries_config","current"),h=await sr(f);if(!h.exists())return null;const p=h.data();if(p.userId!==c.uid)throw new Error("Configuration security check failed");return{baseUrl:fg(p.baseUrl,u),clientId:fg(p.clientId,u),clientSecret:fg(p.clientSecret,u),selectedSchoolId:p.selectedSchoolId||"",selectedClassIds:p.selectedClassIds||[],manualClassInput:p.manualClassInput||"",savedAt:p.savedAt}}catch(c){throw n.value=c.message,console.error("Failed to load Aeries configuration:",c),c}finally{r.value=!1}},deleteAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to delete configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=Ze(t,"users",c.uid,"aeries_config","current");return await ho(u),{success:!0,message:"Configuration deleted securely"}}catch(c){throw n.value=c.message,console.error("Failed to delete Aeries configuration:",c),c}finally{r.value=!1}},hasSavedConfig:async()=>{if(!e.currentUser)return!1;try{const c=e.currentUser,u=Ze(t,"users",c.uid,"aeries_config","current");return(await sr(u)).exists()}catch(c){return console.error("Failed to check for saved configuration:",c),!1}}}}const wq={name:"AeriesAPIConnector",setup(){const{isConnected:t,isConnecting:e,accessToken:r,connectionStatus:n,isError:s,connectionConfig:i,availableEndpoints:a,showStatus:o,loadDemoCredentials:l,connect:c,disconnect:u,testEndpoint:f,testAllSpecialEducationEndpoints:h,testOneRosterForSpecialEd:p,testStudentsWithSpecialEd:g,fetchSchools:v,fetchClasses:y}=Aq(),{isLoading:b,error:E,saveAeriesConfig:x,loadAeriesConfig:w,deleteAeriesConfig:P,hasSavedConfig:R}=Tq(),A=ae(!1),_=ae(null),m=ae(""),S=ae(null),I=ae([]),k=ae(""),C=ae([]),O=ae([]),D=ae(!1),F=ae(""),N=ae(""),M=ae(!1),L=ae({oneroster:!1,nativeAeries:!1}),z=ae([]),j=ae([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"}]),H=ae([{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),G=be(()=>i.baseUrl&&i.clientId&&i.clientSecret),W=async()=>{if(await c())try{A.value=!0;const ee=await v({baseUrl:i.baseUrl,accessToken:r.value});I.value=ee||[],k.value=""}catch(ee){console.error("Failed to fetch schools:",ee),o("Failed to fetch schools",!0),I.value=[]}finally{A.value=!1}},ne=async ie=>{A.value=!0,m.value=ie,_.value=null,S.value=null;const ee=await f(ie);ee&&!ee.error?(_.value=ee.data,S.value=ee.responseTime):ee&&ee.error&&(_.value={error:ee.error}),A.value=!1},de=async()=>{A.value=!0,await h(),A.value=!1},se=async()=>{A.value=!0,m.value="/students (SPED check)",_.value=null,S.value=null;const ie=await p();ie&&!ie.error?(_.value=ie,o(ie.message)):ie&&ie.error&&(_.value={error:ie.error},o(` OneRoster test failed: ${ie.error}`,!0)),A.value=!1},ce=async()=>{A.value=!0,m.value="/students (SPED filters)",_.value=null,S.value=null;const ie=await g();ie&&(_.value=ie,o("OneRoster SPED filter tests completed")),A.value=!1};Vt(k,async ie=>{if(!ie){C.value=[],O.value=[];return}D.value=!1,F.value="",A.value=!0;try{C.value=await y({baseUrl:i.baseUrl,accessToken:r.value,schoolId:ie}),O.value=[]}catch{D.value=!0,C.value=[],O.value=[]}finally{A.value=!1}});const te=be(()=>t.value&&I.value.length>0),Z=be(()=>te.value&&k.value),ye=be(()=>L.value.oneroster||L.value.nativeAeries),J=()=>{const ie=[];L.value.oneroster&&ie.push(...j.value),L.value.nativeAeries&&ie.push(...H.value),a.value=ie},X=(ie,ee=!1)=>{N.value=ie,M.value=ee,setTimeout(()=>{N.value="",M.value=!1},5e3)},Q=async()=>{try{const ie={baseUrl:i.baseUrl,clientId:i.clientId,clientSecret:i.clientSecret,selectedSchoolId:k.value,selectedClassIds:O.value,manualClassInput:F.value,selectedApiTypes:L.value,selectedEndpoints:z.value};await x(ie),X(" Configuration saved securely to Firebase!")}catch(ie){console.error("Failed to save configuration:",ie),X(` Failed to save configuration: ${ie.message}`,!0)}},fe=async()=>{try{const ie=await w();if(!ie){X(" No saved configuration found",!0);return}i.baseUrl=ie.baseUrl||"",i.clientId=ie.clientId||"",i.clientSecret=ie.clientSecret||"",k.value=ie.selectedSchoolId||"",O.value=ie.selectedClassIds||[],F.value=ie.manualClassInput||"",ie.selectedApiTypes&&(L.value=ie.selectedApiTypes),ie.selectedEndpoints&&(z.value=ie.selectedEndpoints),J();const ee=ie.savedAt?new Date(ie.savedAt).toLocaleString():"Unknown";X(` Configuration loaded securely (saved: ${ee})`)}catch(ie){console.error("Failed to load configuration:",ie),X(` Failed to load configuration: ${ie.message}`,!0)}},ve=async()=>{if(confirm("Are you sure you want to permanently delete the saved configuration? This action cannot be undone."))try{await P(),X(" Configuration permanently deleted from Firebase!")}catch(ie){console.error("Failed to clear configuration:",ie),X(` Failed to clear configuration: ${ie.message}`,!0)}};return Wt(async()=>{try{if(await R()){const ee=await w();ee&&(i.baseUrl=ee.baseUrl||"",i.clientId=ee.clientId||"",i.clientSecret=ee.clientSecret||"",ee.selectedApiTypes&&(L.value=ee.selectedApiTypes),ee.selectedEndpoints&&(z.value=ee.selectedEndpoints),J(),X(" Configuration auto-loaded securely from Firebase"))}}catch(ie){console.error("Failed to auto-load configuration:",ie)}}),{connectionConfig:i,isConnected:t,isConnecting:e,isLoading:A,connectionStatus:n,isError:s,apiResults:_,currentEndpoint:m,responseTime:S,availableEndpoints:a,canConnect:G,loadDemoCredentials:l,connect:W,disconnect:u,testEndpoint:ne,handleTestSpecialEd:de,handleTestOneRosterSpecialEd:se,handleTestStudentsWithSpecialEd:ce,schools:I,selectedSchoolId:k,classes:C,selectedClassIds:O,classesFetchError:D,manualClassInput:F,canShowSchoolDropdown:te,canShowClasses:Z,configStatus:N,configError:M,storageLoading:b,storageError:E,saveConfiguration:Q,loadConfiguration:fe,clearConfiguration:ve,selectedApiTypes:L,selectedEndpoints:z,onerosterEndpoints:j,nativeAeriesEndpoints:H,hasSelectedApiTypes:ye,updateAvailableEndpoints:J}}},Cq={class:"aeries-api-connector"},Iq={class:"connection-form"},kq={class:"form-group"},Dq=["disabled"],Pq={class:"form-group"},Rq=["disabled"],Fq={class:"form-group"},Nq=["disabled"],Oq={class:"button-group"},Mq=["disabled"],Lq=["disabled"],Bq={class:"api-type-selection"},Uq={class:"api-type-options"},$q={class:"api-type-option"},Vq={class:"checkbox-label"},Hq={class:"api-type-option"},jq={class:"checkbox-label"},Gq={key:0,class:"endpoint-selection"},Wq={class:"endpoint-categories"},zq={key:0,class:"endpoint-category"},Kq={class:"endpoint-checkboxes"},qq=["value"],Xq={class:"endpoint-name"},Yq={class:"endpoint-path-small"},Qq={key:1,class:"endpoint-category"},Jq={class:"endpoint-checkboxes"},Zq=["value"],eX={class:"endpoint-name"},tX={class:"endpoint-path-small"},rX={class:"config-management"},nX={class:"config-buttons"},sX=["disabled"],aX=["disabled"],iX=["disabled"],oX={key:1,class:"api-testing"},lX={class:"special-ed-section"},cX={class:"quick-test-buttons"},uX=["disabled"],dX=["disabled"],fX=["disabled"],hX=["disabled"],pX=["disabled"],mX=["disabled"],gX={class:"endpoint-grid"},vX={class:"endpoint-path"},yX={class:"endpoint-description"},xX=["onClick","disabled"],EX={key:0,class:"api-results"},_X={class:"results-header"},bX={class:"endpoint-tested"},SX={key:0,class:"response-time"},AX={class:"results-content"},TX={key:2,class:"form-group"},wX=["value"],CX={key:3,class:"form-group"},IX={key:0},kX=["value"],DX={key:1};function PX(t,e,r,n,s,i){return B(),U("div",Cq,[e[48]||(e[48]=Dn('<h3 data-v-0f37c4fc>Aeries API Connection</h3><div class="api-info-section" data-v-0f37c4fc><h4 data-v-0f37c4fc>Getting Students with IEP/504 Plans</h4><div class="info-grid" data-v-0f37c4fc><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> OneRoster API (Limited)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> All students, basic info</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Cannot filter:</strong> Students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> You&#39;d get ALL students, not just SPED</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> Custom Aeries API (Recommended)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Only students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Includes:</strong> Accommodations, services, case managers</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Perfect for your use case</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> CSV Import (Fallback)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Filtered data from Aeries export</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Process:</strong> Export SPED students  Import CSV</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Works but requires manual steps</p></div></div><div class="testing-note" data-v-0f37c4fc><p data-v-0f37c4fc><strong data-v-0f37c4fc>Test the buttons below to see what your Aeries instance supports!</strong></p></div></div>',2)),d("div",Iq,[d("div",kq,[e[24]||(e[24]=d("label",{for:"baseUrl"},"Base URL:",-1)),Be(d("input",{id:"baseUrl","onUpdate:modelValue":e[0]||(e[0]=a=>n.connectionConfig.baseUrl=a),type:"url",placeholder:"https://demo.aeries.net/aeries",disabled:n.isConnected},null,8,Dq),[[gt,n.connectionConfig.baseUrl]])]),d("div",Pq,[e[25]||(e[25]=d("label",{for:"clientId"},"Client ID:",-1)),Be(d("input",{id:"clientId","onUpdate:modelValue":e[1]||(e[1]=a=>n.connectionConfig.clientId=a),type:"text",placeholder:"Enter your Client ID",disabled:n.isConnected},null,8,Rq),[[gt,n.connectionConfig.clientId]])]),d("div",Fq,[e[26]||(e[26]=d("label",{for:"clientSecret"},"Client Secret:",-1)),Be(d("input",{id:"clientSecret","onUpdate:modelValue":e[2]||(e[2]=a=>n.connectionConfig.clientSecret=a),type:"password",placeholder:"Enter your Client Secret",disabled:n.isConnected},null,8,Nq),[[gt,n.connectionConfig.clientSecret]])]),d("div",Oq,[d("button",{onClick:e[3]||(e[3]=(...a)=>n.connect&&n.connect(...a)),disabled:!n.canConnect||n.isConnecting,class:"btn-primary"},Y(n.isConnecting?"Connecting...":"Connect"),9,Mq),n.isConnected?(B(),U("button",{key:0,onClick:e[4]||(e[4]=(...a)=>n.disconnect&&n.disconnect(...a)),class:"btn-secondary"}," Disconnect ")):xe("",!0),d("button",{onClick:e[5]||(e[5]=(...a)=>n.loadDemoCredentials&&n.loadDemoCredentials(...a)),disabled:n.isConnected,class:"btn-demo"}," Load Demo Credentials ",8,Lq)]),d("div",Bq,[e[37]||(e[37]=d("h4",null,"Select API Types",-1)),e[38]||(e[38]=d("p",{class:"api-type-description"},"Choose which Aeries API types you want to use. This determines which endpoints will be available for testing and data import.",-1)),d("div",Uq,[d("div",$q,[d("label",Vq,[Be(d("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>n.selectedApiTypes.oneroster=a),onChange:e[7]||(e[7]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[Et,n.selectedApiTypes.oneroster]]),e[27]||(e[27]=d("span",{class:"checkmark"},null,-1)),e[28]||(e[28]=d("strong",null,"OneRoster API",-1))]),e[29]||(e[29]=d("p",{class:"api-type-desc"},"Standard OneRoster endpoints for basic student, teacher, and class data",-1))]),d("div",Hq,[d("label",jq,[Be(d("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>n.selectedApiTypes.nativeAeries=a),onChange:e[9]||(e[9]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[Et,n.selectedApiTypes.nativeAeries]]),e[30]||(e[30]=d("span",{class:"checkmark"},null,-1)),e[31]||(e[31]=d("strong",null,"Native Aeries v5 API",-1))]),e[32]||(e[32]=d("p",{class:"api-type-desc"},"Aeries-specific endpoints for special education, IEP, and 504 plan data",-1))])]),n.hasSelectedApiTypes?(B(),U("div",Gq,[e[35]||(e[35]=d("h5",null,"Select Endpoints to Use",-1)),e[36]||(e[36]=d("p",{class:"endpoint-description"},"Check the endpoints you want to enable for data import and testing.",-1)),d("div",Wq,[n.selectedApiTypes.oneroster?(B(),U("div",zq,[e[33]||(e[33]=d("h6",null,"OneRoster Endpoints",-1)),d("div",Kq,[(B(!0),U(Pe,null,je(n.onerosterEndpoints,a=>(B(),U("label",{key:a.path,class:"endpoint-checkbox"},[Be(d("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>n.selectedEndpoints=o),value:a.path},null,8,qq),[[Et,n.selectedEndpoints]]),d("span",Xq,Y(a.name),1),d("span",Yq,Y(a.path),1)]))),128))])])):xe("",!0),n.selectedApiTypes.nativeAeries?(B(),U("div",Qq,[e[34]||(e[34]=d("h6",null,"Native Aeries v5 Endpoints",-1)),d("div",Jq,[(B(!0),U(Pe,null,je(n.nativeAeriesEndpoints,a=>(B(),U("label",{key:a.path,class:"endpoint-checkbox"},[Be(d("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=o=>n.selectedEndpoints=o),value:a.path},null,8,Zq),[[Et,n.selectedEndpoints]]),d("span",eX,Y(a.name),1),d("span",tX,Y(a.path),1)]))),128))])])):xe("",!0)])])):xe("",!0)]),d("div",rX,[e[39]||(e[39]=d("h4",null,"Save/Load Configuration",-1)),e[40]||(e[40]=d("div",{class:"security-note"},[d("p",null,[d("strong",null," Security:"),we(" Your API credentials are encrypted and stored securely in Firebase. Only you can access your saved configuration.")])],-1)),d("div",nX,[d("button",{onClick:e[12]||(e[12]=(...a)=>n.saveConfiguration&&n.saveConfiguration(...a)),disabled:!n.canConnect||n.storageLoading,class:"btn-save"},Y(n.storageLoading?" Saving...":" Save Configuration"),9,sX),d("button",{onClick:e[13]||(e[13]=(...a)=>n.loadConfiguration&&n.loadConfiguration(...a)),disabled:n.storageLoading,class:"btn-load"},Y(n.storageLoading?" Loading...":" Load Saved Configuration"),9,aX),d("button",{onClick:e[14]||(e[14]=(...a)=>n.clearConfiguration&&n.clearConfiguration(...a)),disabled:n.storageLoading,class:"btn-clear"},Y(n.storageLoading?" Deleting...":" Clear Saved Configuration"),9,iX)]),n.configStatus?(B(),U("div",{key:0,class:Qe(["config-status",{error:n.configError}])},Y(n.configStatus),3)):xe("",!0)])]),n.connectionStatus?(B(),U("div",{key:0,class:Qe(["status-message",{error:n.isError}])},Y(n.connectionStatus),3)):xe("",!0),n.isConnected?(B(),U("div",oX,[e[43]||(e[43]=d("h4",null,"Test API Endpoints",-1)),d("div",lX,[e[41]||(e[41]=d("h5",null,"Special Education Data (IEP/504)",-1)),d("div",cX,[d("button",{onClick:e[15]||(e[15]=(...a)=>n.handleTestSpecialEd&&n.handleTestSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-special"},Y(n.isLoading?"Testing...":"Test All SPED Endpoints"),9,uX),d("button",{onClick:e[16]||(e[16]=(...a)=>n.handleTestOneRosterSpecialEd&&n.handleTestOneRosterSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster for SPED Data ",8,dX),d("button",{onClick:e[17]||(e[17]=(...a)=>n.handleTestStudentsWithSpecialEd&&n.handleTestStudentsWithSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster SPED Filters ",8,fX),d("button",{onClick:e[18]||(e[18]=a=>t.handleTestEndpoint("/api/special-education/students")),disabled:n.isLoading,class:"btn-test-special"}," SPED Students ",8,hX),d("button",{onClick:e[19]||(e[19]=a=>t.handleTestEndpoint("/api/special-education/ieps")),disabled:n.isLoading,class:"btn-test-special"}," IEP Records ",8,pX),d("button",{onClick:e[20]||(e[20]=a=>t.handleTestEndpoint("/api/special-education/504-plans")),disabled:n.isLoading,class:"btn-test-special"}," 504 Plans ",8,mX)])]),d("div",gX,[(B(!0),U(Pe,null,je(n.availableEndpoints,a=>(B(),U("div",{key:a.path,class:"endpoint-card"},[d("h5",null,Y(a.name),1),d("p",vX,Y(a.path),1),d("p",yX,Y(a.description),1),d("button",{onClick:o=>n.testEndpoint(a.path),disabled:n.isLoading,class:"btn-test"},Y(n.isLoading&&n.currentEndpoint===a.path?"Testing...":"Test"),9,xX)]))),128))]),n.apiResults?(B(),U("div",EX,[e[42]||(e[42]=d("h4",null,"API Response",-1)),d("div",_X,[d("span",bX,"Endpoint: "+Y(n.currentEndpoint),1),n.responseTime?(B(),U("span",SX,"Response time: "+Y(n.responseTime)+"ms",1)):xe("",!0)]),d("div",AX,[d("pre",null,Y(JSON.stringify(n.apiResults,null,2)),1)])])):xe("",!0)])):xe("",!0),n.canShowSchoolDropdown?(B(),U("div",TX,[e[45]||(e[45]=d("label",null,"School",-1)),Be(d("select",{"onUpdate:modelValue":e[21]||(e[21]=a=>n.selectedSchoolId=a)},[e[44]||(e[44]=d("option",{value:"",disabled:""},"Select a school",-1)),(B(!0),U(Pe,null,je(n.schools,a=>(B(),U("option",{key:a.sourcedId||a.id||a.schoolId,value:a.sourcedId||a.id||a.schoolId},Y(a.name||a.title||a.schoolName),9,wX))),128))],512),[[cr,n.selectedSchoolId]])])):xe("",!0),n.canShowClasses?(B(),U("div",CX,[e[47]||(e[47]=d("label",null,"Case Manager Classes",-1)),n.classesFetchError?(B(),U("div",DX,[e[46]||(e[46]=d("p",{class:"error"},"Could not fetch classes. Enter class names manually (comma separated):",-1)),Be(d("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>n.manualClassInput=a),type:"text",placeholder:"Class1, Class2, ..."},null,512),[[gt,n.manualClassInput]])])):(B(),U("div",IX,[Be(d("select",{"onUpdate:modelValue":e[22]||(e[22]=a=>n.selectedClassIds=a),multiple:""},[(B(!0),U(Pe,null,je(n.classes,a=>(B(),U("option",{key:a.sourcedId||a.id||a.classId,value:a.sourcedId||a.id||a.classId},Y(a.title||a.name||a.className),9,kX))),128))],512),[[cr,n.selectedClassIds]])]))])):xe("",!0)])}const RX=xt(wq,[["render",PX],["__scopeId","data-v-0f37c4fc"]]),FX={key:0,class:"app-settings-panel"},NX={class:"settings-section"},OX={class:"grades-checkboxes"},MX=["checked"],LX=["value"],BX={class:"settings-section"},UX={key:0,class:"class-service-fieldset"},$X={class:"checkbox-inline-group"},VX=["value"],HX={key:1,class:"class-service-fieldset"},jX={class:"checkbox-inline-group"},GX=["value"],WX={key:2,class:"class-service-fieldset"},zX={class:"checkbox-inline-group"},KX=["value"],qX={key:3,class:"class-service-fieldset"},XX={class:"checkbox-inline-group"},YX={key:4,class:"class-service-fieldset"},QX={class:"checkbox-inline-group"},JX=["onClick"],ZX={class:"checkbox-inline-group"},eY=["onClick"],tY=["onClick"],rY={class:"add-class-service"},nY={class:"custom-chips"},sY=["onClick"],aY={class:"settings-section"},iY={class:"service-providers-defaults"},oY=["value"],lY={class:"service-providers-custom"},cY={class:"custom-provider-inputs"},uY={class:"custom-chips"},dY=["onClick"],fY={class:"settings-section"},hY={class:"periods-controls"},pY={class:"period-number-control"},mY={key:0,class:"period-labels"},gY={class:"period-labels-grid"},vY=["onUpdate:modelValue","placeholder"],yY={key:1,class:"period-preview"},xY={class:"settings-section"},EY={class:"gmail-api-settings"},_Y={class:"gmail-api-status"},bY={class:"status-indicators"},SY={class:"status-item"},AY={class:"status-item"},TY={class:"status-item"},wY={key:0,class:"status-message"},CY={key:1,class:"last-check"},IY={class:"gmail-api-actions"},kY=["disabled"],DY={class:"settings-section"},PY={class:"admin-action-btns"},RY=["disabled"],FY=["disabled"],NY=["disabled"],OY={key:1,class:"not-admin"},MY={__name:"AppSettings",setup(t){const{loadAppSettings:e,saveAppSettings:r,checkGmailApiStatus:n}=Ns(),s=xn(),i=be(()=>s.currentUser),a=be(()=>{var O;return((O=i.value)==null?void 0:O.role)||null}),o=be(()=>["admin","school_admin","admin_504","sped_chair"].includes(a.value)),l=[{value:"K",label:"K"},...Array.from({length:12},(O,D)=>({value:(D+1).toString(),label:(D+1).toString()}))],c=["English","Math","History","Science"],u=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],f=ae(!1),h=ae(!1),p=ae(!1),g=ae(""),v=ae(!1),y=ae(""),b=ae(""),E=ae({grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...c]},{name:"Co-teach",enabledSubcategories:[...c]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:u,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]}),x=O=>{const D=z_(O.numPeriods,{min:1,max:15,decimals:0});if(D===null)return m("Invalid number of periods. Must be between 1 and 15.",!0),!1;O.numPeriods=D;for(let F=0;F<O.numPeriods;F++){O.periodLabels[F]||(O.periodLabels[F]=`Per${F+1}`);const N=mn(O.periodLabels[F],{trim:!0,maxLength:3,removeDangerous:!0}),M=Hr(N);if(!M.isSafe)return m(`Security threat detected in period ${F+1} label: ${M.threats.join(", ")}`,!0),!1;const L=Td(N,{max:3,fieldName:`Period ${F+1} label`});if(!L.isValid)return m(L.error,!0),!1;O.periodLabels[F]=N}if(O.customServiceProviders)for(let F=0;F<O.customServiceProviders.length;F++){const N=O.customServiceProviders[F];if(N.name){const M=mn(N.name,{trim:!0,maxLength:100,removeDangerous:!0}),L=Hr(M);if(!L.isSafe)return m(`Security threat detected in custom provider ${F+1}: ${L.threats.join(", ")}`,!0),!1;N.name=M}if(N.abbreviation){const M=mn(N.abbreviation,{trim:!0,maxLength:10,removeDangerous:!0}),L=Hr(M);if(!L.isSafe)return m(`Security threat detected in custom provider abbreviation ${F+1}: ${L.threats.join(", ")}`,!0),!1;N.abbreviation=M}}return!0},w=be(()=>u),P=be(()=>l.every(O=>E.value.grades.includes(O.value))),R=O=>{O.target.checked?E.value.grades=l.map(D=>D.value):E.value.grades=[]},A=()=>{if(!y.value.trim()||!b.value.trim()){m("Both name and abbreviation are required for custom service providers",!0);return}if(E.value.customServiceProviders.some(D=>D.abbreviation.toLowerCase()===b.value.toLowerCase())){m("A service provider with this abbreviation already exists",!0);return}E.value.customServiceProviders.push({name:y.value.trim(),abbreviation:b.value.trim()}),y.value="",b.value="",m("Custom service provider added successfully")},_=O=>{E.value.customServiceProviders.splice(O,1)};Vt(()=>E.value.numPeriods,(O,D)=>{if(h.value||p.value)return;const F=z_(O,{min:1,max:15,decimals:0});if(F!==null&&F!==O&&(E.value.numPeriods=F),E.value.periodLabels.length<E.value.numPeriods)for(let N=E.value.periodLabels.length;N<E.value.numPeriods;N++)E.value.periodLabels.push(`Per${N+1}`)}),Vt(()=>E.value.periodLabels,(O,D)=>{h.value||p.value||O.forEach((F,N)=>{F&&F.length>3&&(E.value.periodLabels[N]=F.substring(0,3))})},{deep:!0});const m=(O,D=!1)=>{g.value=O,v.value=D,setTimeout(()=>{g.value="",v.value=!1},5e3)},S=async(O=!1)=>{f.value=!0;try{const D=await e();if(D){if(E.value={...E.value,...D},!E.value.periodLabels||E.value.periodLabels.length<E.value.numPeriods){E.value.periodLabels=[];for(let F=0;F<E.value.numPeriods;F++)E.value.periodLabels[F]=E.value.periodLabels[F]||`Per${F+1}`}O&&m("Settings loaded successfully")}}catch(D){m("Error loading settings",!0),console.error("Load settings error:",D)}finally{f.value=!1}},I=async()=>{if(console.log(" STEP 1: Starting save operation..."),!ks("saveAppSettings",10,6e4).allowed){console.log(" STEP 1 FAILED: Rate limit exceeded"),m("Too many save requests. Please wait before saving again.",!0);return}console.log(" STEP 1 COMPLETE: Rate limit check passed"),console.log(" STEP 2: Preventing watchers and preparing settings..."),p.value=!0,h.value=!0;try{console.log(" STEP 3: Creating non-reactive copy for validation...");const D=JSON.parse(JSON.stringify(E.value));if(console.log(" STEP 4: Validating settings copy..."),!x(D)){console.log(" STEP 4 FAILED: Validation failed"),p.value=!1,h.value=!1;return}console.log(" STEP 4 COMPLETE: Validation passed"),console.log(" STEP 5: Calling saveAppSettings..."),await r(D),console.log(" STEP 5 COMPLETE: saveAppSettings returned successfully"),m("Settings saved successfully"),console.log(" SAVE OPERATION COMPLETED SUCCESSFULLY")}catch(D){console.error(" SAVE OPERATION FAILED at some step"),console.error(" Error:",D),console.error(" Error message:",D.message),console.error(" Error stack:",D.stack),D.message==="Save operation timed out"?m("Save operation timed out. Please try again.",!0):D.message&&D.message.includes("quota")?m("Storage quota exceeded. Please contact administrator.",!0):D.message&&D.message.includes("permission")?m("Permission denied. Please check your access rights.",!0):m("Error saving settings: "+(D.message||"Unknown error"),!0)}finally{console.log(" saveSettings: before cleanup"),console.log(" STEP 7: Cleaning up - setting saveLoading to false"),h.value=!1,setTimeout(()=>{p.value=!1},100),console.log(" saveSettings: after cleanup"),console.log(" STEP 7 COMPLETE: Cleanup finished")}},k=()=>{confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(E.value={grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...c]},{name:"Co-teach",enabledSubcategories:[...c]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:u,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]},m("Settings reset to defaults"))},C=async()=>{f.value=!0;try{const O=await n();O.enabled?m("Gmail API is enabled and ready to use!"):m(`Gmail API status: Workspace: ${O.isWorkspace?"Yes":"No"}, Internal OAuth: ${O.isInternalOAuth?"Yes":"No"}`,!0)}catch(O){m("Failed to check Gmail API status: "+O.message,!0)}finally{f.value=!1}};return Wt(()=>{S()}),(O,D)=>{var F,N,M,L,z,j,H,G;return o.value?(B(),U("div",FX,[D[39]||(D[39]=d("h2",null,"App Settings",-1)),d("form",{onSubmit:Xr(I,["prevent"])},[d("section",NX,[d("fieldset",null,[D[17]||(D[17]=d("legend",null,"Grades",-1)),d("div",OX,[d("label",null,[d("input",{type:"checkbox",checked:P.value,onChange:R},null,40,MX),D[16]||(D[16]=d("span",null,"Select All",-1))]),(B(),U(Pe,null,je(l,W=>d("label",{key:W.value},[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[0]||(D[0]=ne=>E.value.grades=ne),value:W.value},null,8,LX),[[Et,E.value.grades]]),d("span",null,Y(W.label),1)])),64))])])]),d("section",BX,[D[26]||(D[26]=d("h3",null,"Class Services",-1)),E.value.classServices[0]&&E.value.classServices[0].enabledSubcategories?(B(),U("div",UX,[d("fieldset",null,[D[18]||(D[18]=d("legend",null,"SDC",-1)),d("div",$X,[(B(),U(Pe,null,je(c,W=>d("label",{key:W},[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[1]||(D[1]=ne=>E.value.classServices[0].enabledSubcategories=ne),value:W},null,8,VX),[[Et,E.value.classServices[0].enabledSubcategories]]),we(" "+Y(W),1)])),64))])])])):xe("",!0),E.value.classServices[1]&&E.value.classServices[1].enabledSubcategories?(B(),U("div",HX,[d("fieldset",null,[D[19]||(D[19]=d("legend",null,"Co-teach",-1)),d("div",jX,[(B(),U(Pe,null,je(c,W=>d("label",{key:W},[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[2]||(D[2]=ne=>E.value.classServices[1].enabledSubcategories=ne),value:W},null,8,GX),[[Et,E.value.classServices[1].enabledSubcategories]]),we(" "+Y(W),1)])),64))])])])):xe("",!0),E.value.classServices[2]&&E.value.classServices[2].enabledSubcategories?(B(),U("div",WX,[d("fieldset",null,[D[20]||(D[20]=d("legend",null,"RSP",-1)),d("div",zX,[(B(),U(Pe,null,je(c,W=>d("label",{key:W},[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[3]||(D[3]=ne=>E.value.classServices[2].enabledSubcategories=ne),value:W},null,8,KX),[[Et,E.value.classServices[2].enabledSubcategories]]),we(" "+Y(W),1)])),64))])])])):xe("",!0),E.value.classServices[3]&&E.value.classServices[3].enabledSubcategories?(B(),U("div",qX,[d("fieldset",null,[D[22]||(D[22]=d("legend",null,"Directed Studies",-1)),d("div",XX,[d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[4]||(D[4]=W=>E.value.classServices[3].enabledSubcategories=W),value:"Directed Studies"},null,512),[[Et,E.value.classServices[3].enabledSubcategories]]),D[21]||(D[21]=we(" Directed Studies "))])])])])):xe("",!0),E.value.classServices[4]&&E.value.classServices[4].enabledSubcategories?(B(),U("div",YX,[d("fieldset",null,[D[24]||(D[24]=d("legend",null,"FA",-1)),d("div",QX,[d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[5]||(D[5]=W=>E.value.classServices[4].enabledSubcategories=W),value:"FA"},null,512),[[Et,E.value.classServices[4].enabledSubcategories]]),D[23]||(D[23]=we(" FA "))])])])])):xe("",!0),(B(!0),U(Pe,null,je(E.value.classServices.slice(5),(W,ne)=>(B(),U("div",{key:W.name,class:"class-service-fieldset"},[d("fieldset",null,[d("legend",null,[we(Y(W.name)+" ",1),d("button",{type:"button",onClick:de=>O.removeClassService(ne+5),title:"Remove Service"},"",8,JX)]),d("div",ZX,[(B(!0),U(Pe,null,je(W.subcategories,(de,se)=>(B(),U("label",{key:de},[D[25]||(D[25]=d("input",{type:"checkbox",checked:!0,disabled:""},null,-1)),we(" "+Y(de)+" ",1),d("button",{type:"button",onClick:ce=>O.removeSubcategory(ne+5,se),title:"Remove Subcategory"},"",8,eY)]))),128)),d("button",{type:"button",onClick:de=>O.addSubcategory(ne+5)},"+ Add Subcategory",8,tY)])])]))),128)),d("div",rY,[Be(d("input",{type:"text","onUpdate:modelValue":D[6]||(D[6]=W=>O.newServiceName=W),placeholder:"New Service Name",maxlength:"18"},null,512),[[gt,O.newServiceName]]),Be(d("input",{type:"text","onUpdate:modelValue":D[7]||(D[7]=W=>O.newServiceSubcat=W),placeholder:"Add Subcategory",maxlength:"18",onKeyup:D[8]||(D[8]=P1((...W)=>O.addNewServiceSubcat&&O.addNewServiceSubcat(...W),["enter"]))},null,544),[[gt,O.newServiceSubcat]]),d("button",{type:"button",onClick:D[9]||(D[9]=(...W)=>O.addNewServiceSubcat&&O.addNewServiceSubcat(...W))},"+ Add Subcategory"),d("div",nY,[(B(!0),U(Pe,null,je(O.newServiceSubcats,(W,ne)=>(B(),U("span",{key:W,class:"chip"},[we(Y(W)+" ",1),d("button",{type:"button",onClick:de=>O.removeNewServiceSubcat(ne)},"",8,sY)]))),128))]),d("button",{type:"button",onClick:D[10]||(D[10]=(...W)=>O.addClassService&&O.addClassService(...W))},"+ Add Class Service")])]),d("section",aY,[d("fieldset",null,[D[28]||(D[28]=d("legend",null,"Service Providers",-1)),d("div",iY,[(B(!0),U(Pe,null,je(w.value,W=>(B(),U("label",{key:W.abbreviation},[Be(d("input",{type:"checkbox","onUpdate:modelValue":D[11]||(D[11]=ne=>E.value.serviceProviders=ne),value:W.abbreviation},null,8,oY),[[Et,E.value.serviceProviders]]),d("span",null,Y(W.name)+" ("+Y(W.abbreviation)+")",1)]))),128))]),d("div",lY,[D[27]||(D[27]=d("label",null,"Add Custom Service Provider:",-1)),d("div",cY,[Be(d("input",{type:"text","onUpdate:modelValue":D[12]||(D[12]=W=>y.value=W),placeholder:"Full Name",maxlength:"100"},null,512),[[gt,y.value]]),Be(d("input",{type:"text","onUpdate:modelValue":D[13]||(D[13]=W=>b.value=W),placeholder:"Abbreviation",maxlength:"10"},null,512),[[gt,b.value]]),d("button",{type:"button",onClick:A},"Add")]),d("div",uY,[(B(!0),U(Pe,null,je(E.value.customServiceProviders,(W,ne)=>(B(),U("span",{key:ne,class:"chip"},[we(Y(W.name)+" ("+Y(W.abbreviation)+") ",1),d("button",{type:"button",onClick:de=>_(ne)},"",8,dY)]))),128))])])])]),d("section",fY,[d("fieldset",null,[D[32]||(D[32]=d("legend",null,"Periods",-1)),d("div",hY,[d("div",pY,[d("label",null,[D[29]||(D[29]=we(" Number of Periods (max 15): ")),Be(d("input",{type:"number","onUpdate:modelValue":D[14]||(D[14]=W=>E.value.numPeriods=W),min:"1",max:"15",class:"period-number-input"},null,512),[[gt,E.value.numPeriods]])])]),E.value.numPeriods>0?(B(),U("div",mY,[D[30]||(D[30]=d("h4",null,"Period Labels (3 chars max each):",-1)),d("div",gY,[(B(!0),U(Pe,null,je(E.value.numPeriods,W=>(B(),U("div",{key:W,class:"period-label-item"},[d("label",null,[we(" Period "+Y(W)+": ",1),Be(d("input",{type:"text","onUpdate:modelValue":ne=>E.value.periodLabels[W-1]=ne,maxlength:"3",placeholder:`Per${W}`,class:"period-label-input"},null,8,vY),[[gt,E.value.periodLabels[W-1]]])])]))),128))])])):xe("",!0),E.value.numPeriods>0?(B(),U("div",yY,[D[31]||(D[31]=d("strong",null,"Preview:",-1)),(B(!0),U(Pe,null,je(E.value.numPeriods,W=>(B(),U("span",{key:W,class:"period-preview-item"},Y(E.value.periodLabels[W-1]||`Per${W}`),1))),128))])):xe("",!0)])])]),d("section",xY,[d("fieldset",null,[D[38]||(D[38]=d("legend",null,"Gmail API Settings",-1)),d("div",EY,[d("div",_Y,[D[37]||(D[37]=d("h4",null,"Status:",-1)),d("div",bY,[d("div",SY,[D[33]||(D[33]=d("span",{class:"status-label"},"Google Workspace:",-1)),d("span",{class:Qe(["status-value",(F=E.value.gmailApi)!=null&&F.isWorkspace?"enabled":"disabled"])},Y((N=E.value.gmailApi)!=null&&N.isWorkspace?"Yes":"No"),3)]),d("div",AY,[D[34]||(D[34]=d("span",{class:"status-label"},"Internal OAuth:",-1)),d("span",{class:Qe(["status-value",(M=E.value.gmailApi)!=null&&M.isInternalOAuth?"enabled":"disabled"])},Y((L=E.value.gmailApi)!=null&&L.isInternalOAuth?"Yes":"No"),3)]),d("div",TY,[D[35]||(D[35]=d("span",{class:"status-label"},"Gmail API:",-1)),d("span",{class:Qe(["status-value",(z=E.value.gmailApi)!=null&&z.enabled?"enabled":"disabled"])},Y((j=E.value.gmailApi)!=null&&j.enabled?"Enabled":"Disabled"),3)])]),(H=E.value.gmailApi)!=null&&H.enabled?xe("",!0):(B(),U("div",wY,D[36]||(D[36]=[d("p",null,"Gmail API features are currently disabled. To enable them, you need:",-1),d("ul",null,[d("li",null,"A Google Workspace organization (not a personal Gmail account)"),d("li",null,'OAuth consent screen set to "Internal" in Google Cloud Console')],-1),d("p",null,"Contact your Google Workspace administrator to configure these settings.",-1)]))),(G=E.value.gmailApi)!=null&&G.lastCheck?(B(),U("div",CY," Last checked: "+Y(new Date(E.value.gmailApi.lastCheck).toLocaleString()),1)):xe("",!0)]),d("div",IY,[d("button",{type:"button",onClick:C,disabled:f.value}," Check Gmail API Status ",8,kY)])])])]),d("section",DY,[d("div",PY,[d("button",{type:"submit",disabled:h.value||f.value,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}}," Save Settings",8,RY),d("button",{type:"button",onClick:D[15]||(D[15]=()=>S(!0)),disabled:f.value,class:"admin-action-btn info",style:{"min-width":"100px","max-width":"100px"}}," Load",8,FY),d("button",{type:"button",onClick:k,disabled:f.value,class:"admin-action-btn warning",style:{"min-width":"100px","max-width":"100px"}}," Reset",8,NY)]),g.value?(B(),U("div",{key:0,class:Qe(["status-message",{error:v.value,success:!v.value}])},Y(g.value),3)):xe("",!0)])],32)])):(B(),U("div",OY,D[40]||(D[40]=[d("h2",null,"App Settings",-1),d("p",null,"Access denied. You must be an admin to view this page.",-1)])))}}},LY=xt(MY,[["__scopeId","data-v-c29c490d"]]),BY={class:"admin-aide-assignment"},UY={class:"header"},$Y={class:"header-actions"},VY=["disabled"],HY={key:0},jY={key:1},GY={class:"content"},WY={key:0,class:"error-message"},zY={key:1,class:"error-message"},KY={key:2,class:"loading"},qY={key:3,class:"schedule-container"},XY={class:"aide-schedule-table"},YY={class:"aide-name"},QY=["value","onChange"],JY=["value"],ZY={class:"assignment-buttons"},eQ=["onClick"],tQ=["onClick"],rQ={class:"direct-assignment-cell"},nQ=["value","onChange"],sQ=["value"],aQ={class:"assignment-buttons"},iQ=["onClick"],oQ=["onClick"],lQ={__name:"AdminAideAssignment",setup(t){const e=Ci(),{userList:r,fetchUsers:n}=Ea(),{students:s,fetchStudents:i}=Ii(),a=xn(),{aideAssignment:o,loadAideAssignments:l,saveAllAideAssignments:c}=Jy(),{appSettings:u,loadAppSettings:f}=Ns(),h=ae(!0),p=ae(!1),g=be(()=>{var F;const D=(F=a.currentUser)==null?void 0:F.role;return["admin","school_admin","admin_504","sped_chair"].includes(D)}),v=be(()=>{var D;return((D=r.value)==null?void 0:D.filter(F=>F.role==="paraeducator"))||[]}),y=be(()=>{var D;return((D=r.value)==null?void 0:D.filter(F=>F.role==="teacher"))||[]}),b=be(()=>{var F;const D=((F=u.value)==null?void 0:F.numPeriods)||7;return Array.from({length:D},(N,M)=>M+1)});function E(D){return D.id}function x(D){return D.id}function w(D,F){if(!o.value[D])return[""];o.value[D].classAssignment||(o.value[D].classAssignment={});let N=o.value[D].classAssignment[F];return Array.isArray(N)?N.length?N:[""]:typeof N=="string"&&N!==""?[N]:[""]}function P(D){if(!o.value[D])return[""];let F=o.value[D].directAssignment;return Array.isArray(F)?F.length?F:[""]:typeof F=="string"&&F!==""?[F]:[""]}function R(D,F,N,M){o.value[D]||(o.value[D]={classAssignment:{},directAssignment:[]}),o.value[D].classAssignment||(o.value[D].classAssignment={});let L=w(D,F);for(L[N]=M;L.length>1&&L[L.length-1]==="";)L.pop();o.value[D].classAssignment[F]=[...L]}function A(D,F,N){o.value[D]||(o.value[D]={classAssignment:{},directAssignment:[]});let M=P(D);for(M[F]=N;M.length>1&&M[M.length-1]==="";)M.pop();o.value[D].directAssignment=[...M]}function _(D,F){o.value[D]||(o.value[D]={classAssignment:{},directAssignment:[]}),o.value[D].classAssignment||(o.value[D].classAssignment={});let N=w(D,F);N.push(""),o.value[D].classAssignment[F]=[...N]}function m(D,F,N){if(!o.value[D]||!o.value[D].classAssignment)return;let M=w(D,F);M.length<=1||(M.splice(N,1),o.value[D].classAssignment[F]=[...M])}function S(D){o.value[D]||(o.value[D]={classAssignment:{},directAssignment:[]});let F=P(D);F.push(""),o.value[D].directAssignment=[...F]}function I(D,F){if(!o.value[D])return;let N=P(D);N.length<=1||(N.splice(F,1),o.value[D].directAssignment=[...N])}async function k(){try{h.value=!0,await Promise.all([n(),i(),l(),f()]),h.value=!1}catch(D){console.error("Error loading data:",D),h.value=!1}}async function C(){try{p.value=!0,await c(),p.value=!1}catch(D){console.error("Error saving aide assignments:",D),p.value=!1}}function O(){e.push("/admin")}return Wt(k),(D,F)=>(B(),U("div",BY,[d("div",UY,[F[3]||(F[3]=d("h1",null,"Aide Assignment Management",-1)),d("div",$Y,[d("button",{onClick:C,class:"btn btn-primary",disabled:p.value},[p.value?(B(),U("span",HY,"")):(B(),U("span",jY,"")),we(" "+Y(p.value?"Saving...":"Save Assignments"),1)],8,VY),d("button",{onClick:O,class:"btn btn-secondary"},F[2]||(F[2]=[d("span",null,"",-1),we(" Back ")]))])]),d("div",GY,[q(a).currentUser?g.value?h.value?(B(),U("div",KY," Loading aide assignments... ")):(B(),U("div",qY,[d("table",XY,[d("thead",null,[d("tr",null,[F[8]||(F[8]=d("th",null,"Aide Name",-1)),(B(!0),U(Pe,null,je(b.value,N=>(B(),U("th",{key:N,class:"period-header"}," Period "+Y(N),1))),128)),F[9]||(F[9]=d("th",null,"Direct Assignment",-1))])]),d("tbody",null,[(B(!0),U(Pe,null,je(v.value,N=>(B(),U("tr",{key:N.id,class:"aide-row"},[d("td",YY,Y(N.name||N.email),1),(B(!0),U(Pe,null,je(b.value,M=>(B(),U("td",{key:M,class:"period-cell"},[(B(!0),U(Pe,null,je(w(E(N),M),(L,z)=>(B(),U("div",{key:"t-"+z,class:"assignment-row"},[d("select",{value:L,onChange:j=>R(E(N),M,z,j.target.value),class:"teacher-select"},[F[10]||(F[10]=d("option",{value:""},"No Assignment",-1)),(B(!0),U(Pe,null,je(y.value,j=>(B(),U("option",{key:x(j),value:x(j)},Y(j.name||j.email),9,JY))),128))],40,QY),d("div",ZY,[w(E(N),M).length>1?(B(),U("button",{key:0,onClick:j=>m(E(N),M,z),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,eQ)):xe("",!0),z===w(E(N),M).length-1?(B(),U("button",{key:1,onClick:j=>_(E(N),M),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,tQ)):xe("",!0)])]))),128))]))),128)),d("td",rQ,[(B(!0),U(Pe,null,je(P(E(N)),(M,L)=>(B(),U("div",{key:"d-"+L,class:"assignment-row"},[d("select",{value:M,onChange:z=>A(E(N),L,z.target.value),class:"student-select"},[F[11]||(F[11]=d("option",{value:""},"No Assignment",-1)),(B(!0),U(Pe,null,je(q(s),z=>(B(),U("option",{key:z.id,value:z.id},Y(q(it)(z,"firstName"))+" "+Y(q(it)(z,"lastName")),9,sQ))),128))],40,nQ),d("div",aQ,[P(E(N)).length>1?(B(),U("button",{key:0,onClick:z=>I(E(N),L),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,iQ)):xe("",!0),L===P(E(N)).length-1?(B(),U("button",{key:1,onClick:z=>S(E(N)),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,oQ)):xe("",!0)])]))),128))])]))),128))])])])):(B(),U("div",zY,[F[6]||(F[6]=d("h2",null,"Access Denied",-1)),F[7]||(F[7]=d("p",null,"You do not have permission to access this page.",-1)),d("button",{onClick:F[1]||(F[1]=N=>q(e).push("/")),class:"btn btn-primary"},"Go Home")])):(B(),U("div",WY,[F[4]||(F[4]=d("h2",null,"Authentication Required",-1)),F[5]||(F[5]=d("p",null,"Please log in to access this page.",-1)),d("button",{onClick:F[0]||(F[0]=N=>q(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},EI=xt(lQ,[["__scopeId","data-v-bd60dfde"]]);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var _I=1252,cQ=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ax={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},ix=function(t){cQ.indexOf(t)!=-1&&(_I=ax[0]=t)};function uQ(){ix(1252)}var la=function(t){ix(t)};function bI(){la(1200),uQ()}function Fb(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function dQ(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function SI(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Eu=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?dQ(t.slice(2)):e==254&&r==255?SI(t.slice(2)):e==65279?t.slice(1):t},qf=function(e){return String.fromCharCode(e)},Nb=function(e){return String.fromCharCode(e)},wd,Qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ob(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Qi.charAt(i)+Qi.charAt(a)+Qi.charAt(o)+Qi.charAt(l);return e}function Rs(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=Qi.indexOf(t.charAt(c++)),a=Qi.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=Qi.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Qi.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var Zt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),vl=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function po(t){return Zt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Mb(t){return Zt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var oa=function(e){return Zt?vl(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function yl(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function ox(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return ox(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var qi=Zt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:vl(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function fQ(t){for(var e=[],r=0,n=t.length+250,s=po(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=po(65535),n=65530)}return e.push(s.slice(0,r)),qi(e)}var fs=/\u0000/g,_u=/[\u0001-\u0006]/g;function fc(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ca(t,e){var r=""+t;return r.length>=e?r:Vr("0",e-r.length)+r}function lx(t,e){var r=""+t;return r.length>=e?r:Vr(" ",e-r.length)+r}function Eh(t,e){var r=""+t;return r.length>=e?r:r+Vr(" ",e-r.length)}function hQ(t,e){var r=""+Math.round(t);return r.length>=e?r:Vr("0",e-r.length)+r}function pQ(t,e){var r=""+t;return r.length>=e?r:Vr("0",e-r.length)+r}var Lb=Math.pow(2,32);function Fl(t,e){if(t>Lb||t<-Lb)return hQ(t,e);var r=Math.round(t);return pQ(r,e)}function _h(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var Bb=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],hg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function mQ(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Ut={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Ub={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},gQ={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function bh(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,u=0,f=Math.floor(s);c<e&&(f=Math.floor(s),o=f*a+i,u=f*c+l,!(s-f<5e-8));)s=1/(s-f),i=a,a=o,l=c,c=u;if(u>e&&(c>e?(u=l,o=i):(u=c,o=a)),!r)return[0,n*o,u];var h=Math.floor(n*o/u);return[h,n*o-h*u,u]}function Bo(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=bQ(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var AI=new Date(1899,11,31,0,0,0),vQ=AI.getTime(),yQ=new Date(1900,2,1,0,0,0);function TI(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=yQ&&(r+=24*60*60*1e3),(r-(vQ+(t.getTimezoneOffset()-AI.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function cx(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function xQ(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function EQ(t){var e=t<0?12:11,r=cx(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function _Q(t){var e=cx(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Cd(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=EQ(t):e===10?r=t.toFixed(10).substr(0,12):r=_Q(t),cx(xQ(r.toUpperCase()))}function al(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Cd(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Ks(14,TI(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function bQ(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function SQ(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return hg[r.m-1][1];case 5:return hg[r.m-1][0];default:return hg[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return Bb[r.q][0];default:return Bb[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ca(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=ca(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?ca(l,c):"";return u}function Ji(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var wI=/%/g;function AQ(t,e,r){var n=e.replace(wI,""),s=e.length-n.length;return fi(t,n,r*Math.pow(10,2*s))+Vr("%",s)}function TQ(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return fi(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function CI(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+CI(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var II=/# (\?+)( ?)\/( ?)(\d+)/;function wQ(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?Vr(" ",t[1].length+1+t[4].length):lx(a,t[1].length)+t[2]+"/"+t[3]+ca(o,t[4].length))}function CQ(t,e,r){return r+(e===0?"":""+e)+Vr(" ",t[1].length+2+t[4].length)}var kI=/^#*0*\.([0#]+)/,DI=/\).*[0#]/,PI=/\(###\) ###\\?-####/;function is(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function $b(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function Vb(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function IQ(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function kQ(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Us(t,e,r){if(t.charCodeAt(0)===40&&!e.match(DI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Us("n",n,r):"("+Us("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return TQ(t,e,r);if(e.indexOf("%")!==-1)return AQ(t,e,r);if(e.indexOf("E")!==-1)return CI(e,r);if(e.charCodeAt(0)===36)return"$"+Us(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Fl(l,e.length);if(e.match(/^[#?]+$/))return s=Fl(r,0),s==="0"&&(s=""),s.length>e.length?s:is(e.substr(0,e.length-s.length))+s;if(i=e.match(II))return wQ(i,l,c);if(e.match(/^#+0+$/))return c+Fl(l,e.length-e.indexOf("0"));if(i=e.match(kI))return s=$b(r,i[1].length).replace(/^([^\.]+)$/,"$1."+is(i[1])).replace(/\.$/,"."+is(i[1])).replace(/\.(\d*)$/,function(g,v){return"."+v+Vr("0",is(i[1]).length-v.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+$b(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Ji(Fl(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Us(t,e,-r):Ji(""+(Math.floor(r)+IQ(r,i[1].length)))+"."+ca(Vb(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return Us(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=fc(Us(t,e.replace(/[\\-]/g,""),r)),a=0,fc(fc(e.replace(/\\/g,"")).replace(/[0#]/g,function(g){return a<s.length?s.charAt(a++):g==="0"?"0":""}));if(e.match(PI))return s=Us(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=bh(l,Math.pow(10,a)-1,!1),s=""+c,u=fi("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=Eh(o[2],a),u.length<i[4].length&&(u=is(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=bh(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?lx(o[1],a)+i[2]+"/"+i[3]+Eh(o[2],a):Vr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=Fl(r,0),e.length<=s.length?s:is(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var f=e.indexOf(".")-a,h=e.length-s.length-f;return is(e.substr(0,f)+s+e.substr(e.length-h))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=Vb(r,i[1].length),r<0?"-"+Us(t,e,-r):Ji(kQ(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?ca(0,3-g.length):"")+g})+"."+ca(a,i[1].length);switch(e){case"###,##0.00":return Us(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Ji(Fl(l,0));return p!=="0"?c+p:"";case"###,###.00":return Us(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Us(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function DQ(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return fi(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function PQ(t,e,r){var n=e.replace(wI,""),s=e.length-n.length;return fi(t,n,r*Math.pow(10,2*s))+Vr("%",s)}function RI(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+RI(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function wa(t,e,r){if(t.charCodeAt(0)===40&&!e.match(DI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?wa("n",n,r):"("+wa("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return DQ(t,e,r);if(e.indexOf("%")!==-1)return PQ(t,e,r);if(e.indexOf("E")!==-1)return RI(e,r);if(e.charCodeAt(0)===36)return"$"+wa(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+ca(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:is(e.substr(0,e.length-s.length))+s;if(i=e.match(II))return CQ(i,l,c);if(e.match(/^#+0+$/))return c+ca(l,e.length-e.indexOf("0"));if(i=e.match(kI))return s=(""+r).replace(/^([^\.]+)$/,"$1."+is(i[1])).replace(/\.$/,"."+is(i[1])),s=s.replace(/\.(\d*)$/,function(g,v){return"."+v+Vr("0",is(i[1]).length-v.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Ji(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+wa(t,e,-r):Ji(""+r)+"."+Vr("0",i[1].length);if(i=e.match(/^#,#*,#0/))return wa(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=fc(wa(t,e.replace(/[\\-]/g,""),r)),a=0,fc(fc(e.replace(/\\/g,"")).replace(/[0#]/g,function(g){return a<s.length?s.charAt(a++):g==="0"?"0":""}));if(e.match(PI))return s=wa(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=bh(l,Math.pow(10,a)-1,!1),s=""+c,u=fi("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=Eh(o[2],a),u.length<i[4].length&&(u=is(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=bh(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?lx(o[1],a)+i[2]+"/"+i[3]+Eh(o[2],a):Vr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:is(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var f=e.indexOf(".")-a,h=e.length-s.length-f;return is(e.substr(0,f)+s+e.substr(e.length-h))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+wa(t,e,-r):Ji(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?ca(0,3-g.length):"")+g})+"."+ca(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Ji(""+l);return p!=="0"?c+p:"";default:if(e.match(/\.[0#?]*$/))return wa(t,e.slice(0,e.lastIndexOf(".")),r)+is(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function fi(t,e,r){return(r|0)===r?wa(t,e,r):Us(t,e,r)}function RQ(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var FI=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function jc(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":_h(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(FI))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function FQ(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,u,f,h="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!_h(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(f=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(f);s[s.length]={t:"t",v:i},++a;break;case"\\":var p=t.charAt(++a),g=p==="("||p===")"?p:"t";s[s.length]={t:g,v:p},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=Bo(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Bo(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var v={t:o,v:o};if(c==null&&(c=Bo(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(v.v=c.H>=12?"P":"A"),v.t="T",h="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(v.v=c.H>=12?"PM":"AM"),v.t="T",a+=5,h="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(v.v=c.H>=12?"":""),v.t="T",a+=5,h="h"):(v.t="t",++a),c==null&&v.t==="T")return"";s[s.length]=v,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(FI)){if(c==null&&(c=Bo(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",jc(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var y=0,b=0,E;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=h,l="h",y<1&&(y=1);break;case"s":(E=s[a].v.match(/\.0+$/))&&(b=Math.max(b,E[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&s[a].v.match(/[Hh]/)&&(y=1),y<2&&s[a].v.match(/[Mm]/)&&(y=2),y<3&&s[a].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var x="",w;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=SQ(s[a].t.charCodeAt(0),s[a].v,c,b),s[a].t="t";break;case"n":case"?":for(w=a+1;s[w]!=null&&((o=s[w].t)==="?"||o==="D"||(o===" "||o==="t")&&s[w+1]!=null&&(s[w+1].t==="?"||s[w+1].t==="t"&&s[w+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[w].v==="/"||s[w].v===" "&&s[w+1]!=null&&s[w+1].t=="?"));)s[a].v+=s[w].v,s[w]={v:"",t:";"},++w;x+=s[a].v,a=w-1;break;case"G":s[a].t="t",s[a].v=al(e,r);break}var P="",R,A;if(x.length>0){x.charCodeAt(0)==40?(R=e<0&&x.charCodeAt(0)===45?-e:e,A=fi("n",x,R)):(R=e<0&&n>1?-e:e,A=fi("n",x,R),R<0&&s[0]&&s[0].t=="t"&&(A=A.substr(1),s[0].v="-"+s[0].v)),w=A.length-1;var _=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){_=a;break}var m=s.length;if(_===s.length&&A.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(w>=s[a].v.length-1?(w-=s[a].v.length,s[a].v=A.substr(w+1,s[a].v.length)):w<0?s[a].v="":(s[a].v=A.substr(0,w+1),w=-1),s[a].t="t",m=a);w>=0&&m<s.length&&(s[m].v=A.substr(0,w+1)+s[m].v)}else if(_!==s.length&&A.indexOf("E")===-1){for(w=A.indexOf(".")-1,a=_;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(u=s[a].v.indexOf(".")>-1&&a===_?s[a].v.indexOf(".")-1:s[a].v.length-1,P=s[a].v.substr(u+1);u>=0;--u)w>=0&&(s[a].v.charAt(u)==="0"||s[a].v.charAt(u)==="#")&&(P=A.charAt(w--)+P);s[a].v=P,s[a].t="t",m=a}for(w>=0&&m<s.length&&(s[m].v=A.substr(0,w+1)+s[m].v),w=A.indexOf(".")+1,a=_;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==_)){for(u=s[a].v.indexOf(".")>-1&&a===_?s[a].v.indexOf(".")+1:0,P=s[a].v.substr(0,u);u<s[a].v.length;++u)w<A.length&&(P+=A.charAt(w++));s[a].v=P,s[a].t="t",m=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(R=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=fi(s[a].t,s[a].v,R),s[a].t="t");var S="";for(a=0;a!==s.length;++a)s[a]!=null&&(S+=s[a].v);return S}var Hb=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function jb(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function NQ(t,e){var r=RQ(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(Hb),o=r[1].match(Hb);return jb(e,a)?[n,r[0]]:jb(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function Ks(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ut)[t],n==null&&(n=r.table&&r.table[Ub[t]]||Ut[Ub[t]]),n==null&&(n=gQ[t]||"General");break}if(_h(n,0))return al(e,r);e instanceof Date&&(e=TI(e,r.date1904));var s=NQ(n,e);if(_h(s[1]))return al(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return FQ(s[1],e,r,s[0])}function Wo(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Ut[r]==null){e<0&&(e=r);continue}if(Ut[r]==t){e=r;break}}e<0&&(e=391)}return Ut[e]=t,e}function NI(){Ut=mQ()}var OQ={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},OI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function MQ(t){var e=typeof t=="number"?Ut[t]:t;return e=e.replace(OI,"(\\d+)"),new RegExp("^"+e+"$")}function LQ(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(OI)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:s=p;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?u:c+"T"+u}var BQ=function(){var t={};t.version="1.2.0";function e(){for(var A=0,_=new Array(256),m=0;m!=256;++m)A=m,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,_[m]=A;return typeof Int32Array<"u"?new Int32Array(_):_}var r=e();function n(A){var _=0,m=0,S=0,I=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(S=0;S!=256;++S)I[S]=A[S];for(S=0;S!=256;++S)for(m=A[S],_=256+S;_<4096;_+=256)m=I[_]=m>>>8^A[m&255];var k=[];for(S=1;S!=16;++S)k[S-1]=typeof Int32Array<"u"?I.subarray(S*256,S*256+256):I.slice(S*256,S*256+256);return k}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],f=s[6],h=s[7],p=s[8],g=s[9],v=s[10],y=s[11],b=s[12],E=s[13],x=s[14];function w(A,_){for(var m=_^-1,S=0,I=A.length;S<I;)m=m>>>8^r[(m^A.charCodeAt(S++))&255];return~m}function P(A,_){for(var m=_^-1,S=A.length-15,I=0;I<S;)m=x[A[I++]^m&255]^E[A[I++]^m>>8&255]^b[A[I++]^m>>16&255]^y[A[I++]^m>>>24]^v[A[I++]]^g[A[I++]]^p[A[I++]]^h[A[I++]]^f[A[I++]]^u[A[I++]]^c[A[I++]]^l[A[I++]]^o[A[I++]]^a[A[I++]]^i[A[I++]]^r[A[I++]];for(S+=15;I<S;)m=m>>>8^r[(m^A[I++])&255];return~m}function R(A,_){for(var m=_^-1,S=0,I=A.length,k=0,C=0;S<I;)k=A.charCodeAt(S++),k<128?m=m>>>8^r[(m^k)&255]:k<2048?(m=m>>>8^r[(m^(192|k>>6&31))&255],m=m>>>8^r[(m^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,C=A.charCodeAt(S++)&1023,m=m>>>8^r[(m^(240|k>>8&7))&255],m=m>>>8^r[(m^(128|k>>2&63))&255],m=m>>>8^r[(m^(128|C>>6&15|(k&3)<<4))&255],m=m>>>8^r[(m^(128|C&63))&255]):(m=m>>>8^r[(m^(224|k>>12&15))&255],m=m>>>8^r[(m^(128|k>>6&63))&255],m=m>>>8^r[(m^(128|k&63))&255]);return~m}return t.table=r,t.bstr=w,t.buf=P,t.str=R,t}(),rr=function(){var e={};e.version="1.2.1";function r(re,he){for(var le=re.split("/"),ue=he.split("/"),pe=0,me=0,Re=Math.min(le.length,ue.length);pe<Re;++pe){if(me=le[pe].length-ue[pe].length)return me;if(le[pe]!=ue[pe])return le[pe]<ue[pe]?-1:1}return le.length-ue.length}function n(re){if(re.charAt(re.length-1)=="/")return re.slice(0,-1).indexOf("/")===-1?re:n(re.slice(0,-1));var he=re.lastIndexOf("/");return he===-1?re:re.slice(0,he+1)}function s(re){if(re.charAt(re.length-1)=="/")return s(re.slice(0,-1));var he=re.lastIndexOf("/");return he===-1?re:re.slice(he+1)}function i(re,he){typeof he=="string"&&(he=new Date(he));var le=he.getHours();le=le<<6|he.getMinutes(),le=le<<5|he.getSeconds()>>>1,re.write_shift(2,le);var ue=he.getFullYear()-1980;ue=ue<<4|he.getMonth()+1,ue=ue<<5|he.getDate(),re.write_shift(2,ue)}function a(re){var he=re.read_shift(2)&65535,le=re.read_shift(2)&65535,ue=new Date,pe=le&31;le>>>=5;var me=le&15;le>>>=4,ue.setMilliseconds(0),ue.setFullYear(le+1980),ue.setMonth(me-1),ue.setDate(pe);var Re=he&31;he>>>=5;var Ve=he&63;return he>>>=6,ue.setHours(he),ue.setMinutes(Ve),ue.setSeconds(Re<<1),ue}function o(re){wn(re,0);for(var he={},le=0;re.l<=re.length-4;){var ue=re.read_shift(2),pe=re.read_shift(2),me=re.l+pe,Re={};switch(ue){case 21589:le=re.read_shift(1),le&1&&(Re.mtime=re.read_shift(4)),pe>5&&(le&2&&(Re.atime=re.read_shift(4)),le&4&&(Re.ctime=re.read_shift(4))),Re.mtime&&(Re.mt=new Date(Re.mtime*1e3));break}re.l=me,he[ue]=Re}return he}var l;function c(){return l||(l={})}function u(re,he){if(re[0]==80&&re[1]==75)return ht(re,he);if((re[0]|32)==109&&(re[1]|32)==105)return _o(re,he);if(re.length<512)throw new Error("CFB file size "+re.length+" < 512");var le=3,ue=512,pe=0,me=0,Re=0,Ve=0,Fe=0,Ne=[],Le=re.slice(0,512);wn(Le,0);var Ye=f(Le);switch(le=Ye[0],le){case 3:ue=512;break;case 4:ue=4096;break;case 0:if(Ye[1]==0)return ht(re,he);default:throw new Error("Major Version: Expected 3 or 4 saw "+le)}ue!==512&&(Le=re.slice(0,ue),wn(Le,28));var et=re.slice(0,ue);h(Le,le);var ut=Le.read_shift(4,"i");if(le===3&&ut!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ut);Le.l+=4,Re=Le.read_shift(4,"i"),Le.l+=4,Le.chk("00100000","Mini Stream Cutoff Size: "),Ve=Le.read_shift(4,"i"),pe=Le.read_shift(4,"i"),Fe=Le.read_shift(4,"i"),me=Le.read_shift(4,"i");for(var Je=-1,st=0;st<109&&(Je=Le.read_shift(4,"i"),!(Je<0));++st)Ne[st]=Je;var kt=p(re,ue);y(Fe,me,kt,ue,Ne);var yr=E(kt,Re,Ne,ue);yr[Re].name="!Directory",pe>0&&Ve!==C&&(yr[Ve].name="!MiniFAT"),yr[Ne[0]].name="!FAT",yr.fat_addrs=Ne,yr.ssz=ue;var pr={},Ir=[],Wa=[],So=[];x(Re,yr,kt,Ir,pe,pr,Wa,Ve),g(Wa,So,Ir),Ir.shift();var Ri={FileIndex:Wa,FullPaths:So};return he&&he.raw&&(Ri.raw={header:et,sectors:kt}),Ri}function f(re){if(re[re.l]==80&&re[re.l+1]==75)return[0,0];re.chk(O,"Header Signature: "),re.l+=16;var he=re.read_shift(2,"u");return[re.read_shift(2,"u"),he]}function h(re,he){var le=9;switch(re.l+=2,le=re.read_shift(2)){case 9:if(he!=3)throw new Error("Sector Shift: Expected 9 saw "+le);break;case 12:if(he!=4)throw new Error("Sector Shift: Expected 12 saw "+le);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+le)}re.chk("0600","Mini Sector Shift: "),re.chk("000000000000","Reserved: ")}function p(re,he){for(var le=Math.ceil(re.length/he)-1,ue=[],pe=1;pe<le;++pe)ue[pe-1]=re.slice(pe*he,(pe+1)*he);return ue[le-1]=re.slice(le*he),ue}function g(re,he,le){for(var ue=0,pe=0,me=0,Re=0,Ve=0,Fe=le.length,Ne=[],Le=[];ue<Fe;++ue)Ne[ue]=Le[ue]=ue,he[ue]=le[ue];for(;Ve<Le.length;++Ve)ue=Le[Ve],pe=re[ue].L,me=re[ue].R,Re=re[ue].C,Ne[ue]===ue&&(pe!==-1&&Ne[pe]!==pe&&(Ne[ue]=Ne[pe]),me!==-1&&Ne[me]!==me&&(Ne[ue]=Ne[me])),Re!==-1&&(Ne[Re]=ue),pe!==-1&&ue!=Ne[ue]&&(Ne[pe]=Ne[ue],Le.lastIndexOf(pe)<Ve&&Le.push(pe)),me!==-1&&ue!=Ne[ue]&&(Ne[me]=Ne[ue],Le.lastIndexOf(me)<Ve&&Le.push(me));for(ue=1;ue<Fe;++ue)Ne[ue]===ue&&(me!==-1&&Ne[me]!==me?Ne[ue]=Ne[me]:pe!==-1&&Ne[pe]!==pe&&(Ne[ue]=Ne[pe]));for(ue=1;ue<Fe;++ue)if(re[ue].type!==0){if(Ve=ue,Ve!=Ne[Ve])do Ve=Ne[Ve],he[ue]=he[Ve]+"/"+he[ue];while(Ve!==0&&Ne[Ve]!==-1&&Ve!=Ne[Ve]);Ne[ue]=-1}for(he[0]+="/",ue=1;ue<Fe;++ue)re[ue].type!==2&&(he[ue]+="/")}function v(re,he,le){for(var ue=re.start,pe=re.size,me=[],Re=ue;le&&pe>0&&Re>=0;)me.push(he.slice(Re*k,Re*k+k)),pe-=k,Re=No(le,Re*4);return me.length===0?on(0):qi(me).slice(0,re.size)}function y(re,he,le,ue,pe){var me=C;if(re===C){if(he!==0)throw new Error("DIFAT chain shorter than expected")}else if(re!==-1){var Re=le[re],Ve=(ue>>>2)-1;if(!Re)return;for(var Fe=0;Fe<Ve&&(me=No(Re,Fe*4))!==C;++Fe)pe.push(me);y(No(Re,ue-4),he-1,le,ue,pe)}}function b(re,he,le,ue,pe){var me=[],Re=[];pe||(pe=[]);var Ve=ue-1,Fe=0,Ne=0;for(Fe=he;Fe>=0;){pe[Fe]=!0,me[me.length]=Fe,Re.push(re[Fe]);var Le=le[Math.floor(Fe*4/ue)];if(Ne=Fe*4&Ve,ue<4+Ne)throw new Error("FAT boundary crossed: "+Fe+" 4 "+ue);if(!re[Le])break;Fe=No(re[Le],Ne)}return{nodes:me,data:Zb([Re])}}function E(re,he,le,ue){var pe=re.length,me=[],Re=[],Ve=[],Fe=[],Ne=ue-1,Le=0,Ye=0,et=0,ut=0;for(Le=0;Le<pe;++Le)if(Ve=[],et=Le+he,et>=pe&&(et-=pe),!Re[et]){Fe=[];var Je=[];for(Ye=et;Ye>=0;){Je[Ye]=!0,Re[Ye]=!0,Ve[Ve.length]=Ye,Fe.push(re[Ye]);var st=le[Math.floor(Ye*4/ue)];if(ut=Ye*4&Ne,ue<4+ut)throw new Error("FAT boundary crossed: "+Ye+" 4 "+ue);if(!re[st]||(Ye=No(re[st],ut),Je[Ye]))break}me[et]={nodes:Ve,data:Zb([Fe])}}return me}function x(re,he,le,ue,pe,me,Re,Ve){for(var Fe=0,Ne=ue.length?2:0,Le=he[re].data,Ye=0,et=0,ut;Ye<Le.length;Ye+=128){var Je=Le.slice(Ye,Ye+128);wn(Je,64),et=Je.read_shift(2),ut=px(Je,0,et-Ne),ue.push(ut);var st={name:ut,type:Je.read_shift(1),color:Je.read_shift(1),L:Je.read_shift(4,"i"),R:Je.read_shift(4,"i"),C:Je.read_shift(4,"i"),clsid:Je.read_shift(16),state:Je.read_shift(4,"i"),start:0,size:0},kt=Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2);kt!==0&&(st.ct=w(Je,Je.l-8));var yr=Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2);yr!==0&&(st.mt=w(Je,Je.l-8)),st.start=Je.read_shift(4,"i"),st.size=Je.read_shift(4,"i"),st.size<0&&st.start<0&&(st.size=st.type=0,st.start=C,st.name=""),st.type===5?(Fe=st.start,pe>0&&Fe!==C&&(he[Fe].name="!StreamData")):st.size>=4096?(st.storage="fat",he[st.start]===void 0&&(he[st.start]=b(le,st.start,he.fat_addrs,he.ssz)),he[st.start].name=st.name,st.content=he[st.start].data.slice(0,st.size)):(st.storage="minifat",st.size<0?st.size=0:Fe!==C&&st.start!==C&&he[Fe]&&(st.content=v(st,he[Fe].data,(he[Ve]||{}).data))),st.content&&wn(st.content,0),me[ut]=st,Re.push(st)}}function w(re,he){return new Date((ws(re,he+4)/1e7*Math.pow(2,32)+ws(re,he)/1e7-11644473600)*1e3)}function P(re,he){return c(),u(l.readFileSync(re),he)}function R(re,he){var le=he&&he.type;switch(le||Zt&&Buffer.isBuffer(re)&&(le="buffer"),le||"base64"){case"file":return P(re,he);case"base64":return u(oa(Rs(re)),he);case"binary":return u(oa(re),he)}return u(re,he)}function A(re,he){var le=he||{},ue=le.root||"Root Entry";if(re.FullPaths||(re.FullPaths=[]),re.FileIndex||(re.FileIndex=[]),re.FullPaths.length!==re.FileIndex.length)throw new Error("inconsistent CFB structure");re.FullPaths.length===0&&(re.FullPaths[0]=ue+"/",re.FileIndex[0]={name:ue,type:5}),le.CLSID&&(re.FileIndex[0].clsid=le.CLSID),_(re)}function _(re){var he="Sh33tJ5";if(!rr.find(re,"/"+he)){var le=on(4);le[0]=55,le[1]=le[3]=50,le[2]=54,re.FileIndex.push({name:he,type:2,content:le,size:4,L:69,R:69,C:69}),re.FullPaths.push(re.FullPaths[0]+he),m(re)}}function m(re,he){A(re);for(var le=!1,ue=!1,pe=re.FullPaths.length-1;pe>=0;--pe){var me=re.FileIndex[pe];switch(me.type){case 0:ue?le=!0:(re.FileIndex.pop(),re.FullPaths.pop());break;case 1:case 2:case 5:ue=!0,isNaN(me.R*me.L*me.C)&&(le=!0),me.R>-1&&me.L>-1&&me.R==me.L&&(le=!0);break;default:le=!0;break}}if(!(!le&&!he)){var Re=new Date(1987,1,19),Ve=0,Fe=Object.create?Object.create(null):{},Ne=[];for(pe=0;pe<re.FullPaths.length;++pe)Fe[re.FullPaths[pe]]=!0,re.FileIndex[pe].type!==0&&Ne.push([re.FullPaths[pe],re.FileIndex[pe]]);for(pe=0;pe<Ne.length;++pe){var Le=n(Ne[pe][0]);ue=Fe[Le],ue||(Ne.push([Le,{name:s(Le).replace("/",""),type:1,clsid:F,ct:Re,mt:Re,content:null}]),Fe[Le]=!0)}for(Ne.sort(function(ut,Je){return r(ut[0],Je[0])}),re.FullPaths=[],re.FileIndex=[],pe=0;pe<Ne.length;++pe)re.FullPaths[pe]=Ne[pe][0],re.FileIndex[pe]=Ne[pe][1];for(pe=0;pe<Ne.length;++pe){var Ye=re.FileIndex[pe],et=re.FullPaths[pe];if(Ye.name=s(et).replace("/",""),Ye.L=Ye.R=Ye.C=-(Ye.color=1),Ye.size=Ye.content?Ye.content.length:0,Ye.start=0,Ye.clsid=Ye.clsid||F,pe===0)Ye.C=Ne.length>1?1:-1,Ye.size=0,Ye.type=5;else if(et.slice(-1)=="/"){for(Ve=pe+1;Ve<Ne.length&&n(re.FullPaths[Ve])!=et;++Ve);for(Ye.C=Ve>=Ne.length?-1:Ve,Ve=pe+1;Ve<Ne.length&&n(re.FullPaths[Ve])!=n(et);++Ve);Ye.R=Ve>=Ne.length?-1:Ve,Ye.type=1}else n(re.FullPaths[pe+1]||"")==n(et)&&(Ye.R=pe+1),Ye.type=2}}}function S(re,he){var le=he||{};if(le.fileType=="mad")return sn(re,le);switch(m(re),le.fileType){case"zip":return Rt(re,le)}var ue=function(ut){for(var Je=0,st=0,kt=0;kt<ut.FileIndex.length;++kt){var yr=ut.FileIndex[kt];if(yr.content){var pr=yr.content.length;pr>0&&(pr<4096?Je+=pr+63>>6:st+=pr+511>>9)}}for(var Ir=ut.FullPaths.length+3>>2,Wa=Je+7>>3,So=Je+127>>7,Ri=Wa+st+Ir+So,_a=Ri+127>>7,Tl=_a<=109?0:Math.ceil((_a-109)/127);Ri+_a+Tl+127>>7>_a;)Tl=++_a<=109?0:Math.ceil((_a-109)/127);var bs=[1,Tl,_a,So,Ir,st,Je,0];return ut.FileIndex[0].size=Je<<6,bs[7]=(ut.FileIndex[0].start=bs[0]+bs[1]+bs[2]+bs[3]+bs[4]+bs[5])+(bs[6]+7>>3),bs}(re),pe=on(ue[7]<<9),me=0,Re=0;{for(me=0;me<8;++me)pe.write_shift(1,D[me]);for(me=0;me<8;++me)pe.write_shift(2,0);for(pe.write_shift(2,62),pe.write_shift(2,3),pe.write_shift(2,65534),pe.write_shift(2,9),pe.write_shift(2,6),me=0;me<3;++me)pe.write_shift(2,0);for(pe.write_shift(4,0),pe.write_shift(4,ue[2]),pe.write_shift(4,ue[0]+ue[1]+ue[2]+ue[3]-1),pe.write_shift(4,0),pe.write_shift(4,4096),pe.write_shift(4,ue[3]?ue[0]+ue[1]+ue[2]-1:C),pe.write_shift(4,ue[3]),pe.write_shift(-4,ue[1]?ue[0]-1:C),pe.write_shift(4,ue[1]),me=0;me<109;++me)pe.write_shift(-4,me<ue[2]?ue[1]+me:-1)}if(ue[1])for(Re=0;Re<ue[1];++Re){for(;me<236+Re*127;++me)pe.write_shift(-4,me<ue[2]?ue[1]+me:-1);pe.write_shift(-4,Re===ue[1]-1?C:Re+1)}var Ve=function(ut){for(Re+=ut;me<Re-1;++me)pe.write_shift(-4,me+1);ut&&(++me,pe.write_shift(-4,C))};for(Re=me=0,Re+=ue[1];me<Re;++me)pe.write_shift(-4,N.DIFSECT);for(Re+=ue[2];me<Re;++me)pe.write_shift(-4,N.FATSECT);Ve(ue[3]),Ve(ue[4]);for(var Fe=0,Ne=0,Le=re.FileIndex[0];Fe<re.FileIndex.length;++Fe)Le=re.FileIndex[Fe],Le.content&&(Ne=Le.content.length,!(Ne<4096)&&(Le.start=Re,Ve(Ne+511>>9)));for(Ve(ue[6]+7>>3);pe.l&511;)pe.write_shift(-4,N.ENDOFCHAIN);for(Re=me=0,Fe=0;Fe<re.FileIndex.length;++Fe)Le=re.FileIndex[Fe],Le.content&&(Ne=Le.content.length,!(!Ne||Ne>=4096)&&(Le.start=Re,Ve(Ne+63>>6)));for(;pe.l&511;)pe.write_shift(-4,N.ENDOFCHAIN);for(me=0;me<ue[4]<<2;++me){var Ye=re.FullPaths[me];if(!Ye||Ye.length===0){for(Fe=0;Fe<17;++Fe)pe.write_shift(4,0);for(Fe=0;Fe<3;++Fe)pe.write_shift(4,-1);for(Fe=0;Fe<12;++Fe)pe.write_shift(4,0);continue}Le=re.FileIndex[me],me===0&&(Le.start=Le.size?Le.start-1:C);var et=me===0&&le.root||Le.name;if(Ne=2*(et.length+1),pe.write_shift(64,et,"utf16le"),pe.write_shift(2,Ne),pe.write_shift(1,Le.type),pe.write_shift(1,Le.color),pe.write_shift(-4,Le.L),pe.write_shift(-4,Le.R),pe.write_shift(-4,Le.C),Le.clsid)pe.write_shift(16,Le.clsid,"hex");else for(Fe=0;Fe<4;++Fe)pe.write_shift(4,0);pe.write_shift(4,Le.state||0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,Le.start),pe.write_shift(4,Le.size),pe.write_shift(4,0)}for(me=1;me<re.FileIndex.length;++me)if(Le=re.FileIndex[me],Le.size>=4096)if(pe.l=Le.start+1<<9,Zt&&Buffer.isBuffer(Le.content))Le.content.copy(pe,pe.l,0,Le.size),pe.l+=Le.size+511&-512;else{for(Fe=0;Fe<Le.size;++Fe)pe.write_shift(1,Le.content[Fe]);for(;Fe&511;++Fe)pe.write_shift(1,0)}for(me=1;me<re.FileIndex.length;++me)if(Le=re.FileIndex[me],Le.size>0&&Le.size<4096)if(Zt&&Buffer.isBuffer(Le.content))Le.content.copy(pe,pe.l,0,Le.size),pe.l+=Le.size+63&-64;else{for(Fe=0;Fe<Le.size;++Fe)pe.write_shift(1,Le.content[Fe]);for(;Fe&63;++Fe)pe.write_shift(1,0)}if(Zt)pe.l=pe.length;else for(;pe.l<pe.length;)pe.write_shift(1,0);return pe}function I(re,he){var le=re.FullPaths.map(function(Fe){return Fe.toUpperCase()}),ue=le.map(function(Fe){var Ne=Fe.split("/");return Ne[Ne.length-(Fe.slice(-1)=="/"?2:1)]}),pe=!1;he.charCodeAt(0)===47?(pe=!0,he=le[0].slice(0,-1)+he):pe=he.indexOf("/")!==-1;var me=he.toUpperCase(),Re=pe===!0?le.indexOf(me):ue.indexOf(me);if(Re!==-1)return re.FileIndex[Re];var Ve=!me.match(_u);for(me=me.replace(fs,""),Ve&&(me=me.replace(_u,"!")),Re=0;Re<le.length;++Re)if((Ve?le[Re].replace(_u,"!"):le[Re]).replace(fs,"")==me||(Ve?ue[Re].replace(_u,"!"):ue[Re]).replace(fs,"")==me)return re.FileIndex[Re];return null}var k=64,C=-2,O="d0cf11e0a1b11ae1",D=[208,207,17,224,161,177,26,225],F="00000000000000000000000000000000",N={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:C,FREESECT:-1,HEADER_SIGNATURE:O,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:F,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function M(re,he,le){c();var ue=S(re,le);l.writeFileSync(he,ue)}function L(re){for(var he=new Array(re.length),le=0;le<re.length;++le)he[le]=String.fromCharCode(re[le]);return he.join("")}function z(re,he){var le=S(re,he);switch(he&&he.type||"buffer"){case"file":return c(),l.writeFileSync(he.filename,le),le;case"binary":return typeof le=="string"?le:L(le);case"base64":return Ob(typeof le=="string"?le:L(le));case"buffer":if(Zt)return Buffer.isBuffer(le)?le:vl(le);case"array":return typeof le=="string"?oa(le):le}return le}var j;function H(re){try{var he=re.InflateRaw,le=new he;if(le._processChunk(new Uint8Array([3,0]),le._finishFlushFlag),le.bytesRead)j=re;else throw new Error("zlib does not expose bytesRead")}catch(ue){console.error("cannot use native zlib: "+(ue.message||ue))}}function G(re,he){if(!j)return ft(re,he);var le=j.InflateRaw,ue=new le,pe=ue._processChunk(re.slice(re.l),ue._finishFlushFlag);return re.l+=ue.bytesRead,pe}function W(re){return j?j.deflateRawSync(re):Ee(re)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ce(re){var he=(re<<1|re<<11)&139536|(re<<5|re<<15)&558144;return(he>>16|he>>8|he)&255}for(var te=typeof Uint8Array<"u",Z=te?new Uint8Array(256):[],ye=0;ye<256;++ye)Z[ye]=ce(ye);function J(re,he){var le=Z[re&255];return he<=8?le>>>8-he:(le=le<<8|Z[re>>8&255],he<=16?le>>>16-he:(le=le<<8|Z[re>>16&255],le>>>24-he))}function X(re,he){var le=he&7,ue=he>>>3;return(re[ue]|(le<=6?0:re[ue+1]<<8))>>>le&3}function Q(re,he){var le=he&7,ue=he>>>3;return(re[ue]|(le<=5?0:re[ue+1]<<8))>>>le&7}function fe(re,he){var le=he&7,ue=he>>>3;return(re[ue]|(le<=4?0:re[ue+1]<<8))>>>le&15}function ve(re,he){var le=he&7,ue=he>>>3;return(re[ue]|(le<=3?0:re[ue+1]<<8))>>>le&31}function ie(re,he){var le=he&7,ue=he>>>3;return(re[ue]|(le<=1?0:re[ue+1]<<8))>>>le&127}function ee(re,he,le){var ue=he&7,pe=he>>>3,me=(1<<le)-1,Re=re[pe]>>>ue;return le<8-ue||(Re|=re[pe+1]<<8-ue,le<16-ue)||(Re|=re[pe+2]<<16-ue,le<24-ue)||(Re|=re[pe+3]<<24-ue),Re&me}function ge(re,he,le){var ue=he&7,pe=he>>>3;return ue<=5?re[pe]|=(le&7)<<ue:(re[pe]|=le<<ue&255,re[pe+1]=(le&7)>>8-ue),he+3}function Te(re,he,le){var ue=he&7,pe=he>>>3;return le=(le&1)<<ue,re[pe]|=le,he+1}function Ie(re,he,le){var ue=he&7,pe=he>>>3;return le<<=ue,re[pe]|=le&255,le>>>=8,re[pe+1]=le,he+8}function Ae(re,he,le){var ue=he&7,pe=he>>>3;return le<<=ue,re[pe]|=le&255,le>>>=8,re[pe+1]=le&255,re[pe+2]=le>>>8,he+16}function We(re,he){var le=re.length,ue=2*le>he?2*le:he+5,pe=0;if(le>=he)return re;if(Zt){var me=Mb(ue);if(re.copy)re.copy(me);else for(;pe<re.length;++pe)me[pe]=re[pe];return me}else if(te){var Re=new Uint8Array(ue);if(Re.set)Re.set(re);else for(;pe<le;++pe)Re[pe]=re[pe];return Re}return re.length=ue,re}function De(re){for(var he=new Array(re),le=0;le<re;++le)he[le]=0;return he}function He(re,he,le){var ue=1,pe=0,me=0,Re=0,Ve=0,Fe=re.length,Ne=te?new Uint16Array(32):De(32);for(me=0;me<32;++me)Ne[me]=0;for(me=Fe;me<le;++me)re[me]=0;Fe=re.length;var Le=te?new Uint16Array(Fe):De(Fe);for(me=0;me<Fe;++me)Ne[pe=re[me]]++,ue<pe&&(ue=pe),Le[me]=0;for(Ne[0]=0,me=1;me<=ue;++me)Ne[me+16]=Ve=Ve+Ne[me-1]<<1;for(me=0;me<Fe;++me)Ve=re[me],Ve!=0&&(Le[me]=Ne[Ve+16]++);var Ye=0;for(me=0;me<Fe;++me)if(Ye=re[me],Ye!=0)for(Ve=J(Le[me],ue)>>ue-Ye,Re=(1<<ue+4-Ye)-1;Re>=0;--Re)he[Ve|Re<<Ye]=Ye&15|me<<4;return ue}var $e=te?new Uint16Array(512):De(512),ke=te?new Uint16Array(32):De(32);if(!te){for(var Ke=0;Ke<512;++Ke)$e[Ke]=0;for(Ke=0;Ke<32;++Ke)ke[Ke]=0}(function(){for(var re=[],he=0;he<32;he++)re.push(5);He(re,ke,32);var le=[];for(he=0;he<=143;he++)le.push(8);for(;he<=255;he++)le.push(9);for(;he<=279;he++)le.push(7);for(;he<=287;he++)le.push(8);He(le,$e,288)})();var _e=function(){for(var he=te?new Uint8Array(32768):[],le=0,ue=0;le<se.length-1;++le)for(;ue<se[le+1];++ue)he[ue]=le;for(;ue<32768;++ue)he[ue]=29;var pe=te?new Uint8Array(259):[];for(le=0,ue=0;le<de.length-1;++le)for(;ue<de[le+1];++ue)pe[ue]=le;function me(Ve,Fe){for(var Ne=0;Ne<Ve.length;){var Le=Math.min(65535,Ve.length-Ne),Ye=Ne+Le==Ve.length;for(Fe.write_shift(1,+Ye),Fe.write_shift(2,Le),Fe.write_shift(2,~Le&65535);Le-- >0;)Fe[Fe.l++]=Ve[Ne++]}return Fe.l}function Re(Ve,Fe){for(var Ne=0,Le=0,Ye=te?new Uint16Array(32768):[];Le<Ve.length;){var et=Math.min(65535,Ve.length-Le);if(et<10){for(Ne=ge(Fe,Ne,+(Le+et==Ve.length)),Ne&7&&(Ne+=8-(Ne&7)),Fe.l=Ne/8|0,Fe.write_shift(2,et),Fe.write_shift(2,~et&65535);et-- >0;)Fe[Fe.l++]=Ve[Le++];Ne=Fe.l*8;continue}Ne=ge(Fe,Ne,+(Le+et==Ve.length)+2);for(var ut=0;et-- >0;){var Je=Ve[Le];ut=(ut<<5^Je)&32767;var st=-1,kt=0;if((st=Ye[ut])&&(st|=Le&-32768,st>Le&&(st-=32768),st<Le))for(;Ve[st+kt]==Ve[Le+kt]&&kt<250;)++kt;if(kt>2){Je=pe[kt],Je<=22?Ne=Ie(Fe,Ne,Z[Je+1]>>1)-1:(Ie(Fe,Ne,3),Ne+=5,Ie(Fe,Ne,Z[Je-23]>>5),Ne+=3);var yr=Je<8?0:Je-4>>2;yr>0&&(Ae(Fe,Ne,kt-de[Je]),Ne+=yr),Je=he[Le-st],Ne=Ie(Fe,Ne,Z[Je]>>3),Ne-=3;var pr=Je<4?0:Je-2>>1;pr>0&&(Ae(Fe,Ne,Le-st-se[Je]),Ne+=pr);for(var Ir=0;Ir<kt;++Ir)Ye[ut]=Le&32767,ut=(ut<<5^Ve[Le])&32767,++Le;et-=kt-1}else Je<=143?Je=Je+48:Ne=Te(Fe,Ne,1),Ne=Ie(Fe,Ne,Z[Je]),Ye[ut]=Le&32767,++Le}Ne=Ie(Fe,Ne,0)-1}return Fe.l=(Ne+7)/8|0,Fe.l}return function(Fe,Ne){return Fe.length<8?me(Fe,Ne):Re(Fe,Ne)}}();function Ee(re){var he=on(50+Math.floor(re.length*1.1)),le=_e(re,he);return he.slice(0,le)}var Se=te?new Uint16Array(32768):De(32768),Me=te?new Uint16Array(32768):De(32768),ze=te?new Uint16Array(128):De(128),lt=1,vt=1;function bt(re,he){var le=ve(re,he)+257;he+=5;var ue=ve(re,he)+1;he+=5;var pe=fe(re,he)+4;he+=4;for(var me=0,Re=te?new Uint8Array(19):De(19),Ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Fe=1,Ne=te?new Uint8Array(8):De(8),Le=te?new Uint8Array(8):De(8),Ye=Re.length,et=0;et<pe;++et)Re[ne[et]]=me=Q(re,he),Fe<me&&(Fe=me),Ne[me]++,he+=3;var ut=0;for(Ne[0]=0,et=1;et<=Fe;++et)Le[et]=ut=ut+Ne[et-1]<<1;for(et=0;et<Ye;++et)(ut=Re[et])!=0&&(Ve[et]=Le[ut]++);var Je=0;for(et=0;et<Ye;++et)if(Je=Re[et],Je!=0){ut=Z[Ve[et]]>>8-Je;for(var st=(1<<7-Je)-1;st>=0;--st)ze[ut|st<<Je]=Je&7|et<<3}var kt=[];for(Fe=1;kt.length<le+ue;)switch(ut=ze[ie(re,he)],he+=ut&7,ut>>>=3){case 16:for(me=3+X(re,he),he+=2,ut=kt[kt.length-1];me-- >0;)kt.push(ut);break;case 17:for(me=3+Q(re,he),he+=3;me-- >0;)kt.push(0);break;case 18:for(me=11+ie(re,he),he+=7;me-- >0;)kt.push(0);break;default:kt.push(ut),Fe<ut&&(Fe=ut);break}var yr=kt.slice(0,le),pr=kt.slice(le);for(et=le;et<286;++et)yr[et]=0;for(et=ue;et<30;++et)pr[et]=0;return lt=He(yr,Se,286),vt=He(pr,Me,30),he}function $t(re,he){if(re[0]==3&&!(re[1]&3))return[po(he),2];for(var le=0,ue=0,pe=Mb(he||1<<18),me=0,Re=pe.length>>>0,Ve=0,Fe=0;!(ue&1);){if(ue=Q(re,le),le+=3,ue>>>1)ue>>1==1?(Ve=9,Fe=5):(le=bt(re,le),Ve=lt,Fe=vt);else{le&7&&(le+=8-(le&7));var Ne=re[le>>>3]|re[(le>>>3)+1]<<8;if(le+=32,Ne>0)for(!he&&Re<me+Ne&&(pe=We(pe,me+Ne),Re=pe.length);Ne-- >0;)pe[me++]=re[le>>>3],le+=8;continue}for(;;){!he&&Re<me+32767&&(pe=We(pe,me+32767),Re=pe.length);var Le=ee(re,le,Ve),Ye=ue>>>1==1?$e[Le]:Se[Le];if(le+=Ye&15,Ye>>>=4,!(Ye>>>8&255))pe[me++]=Ye;else{if(Ye==256)break;Ye-=257;var et=Ye<8?0:Ye-4>>2;et>5&&(et=0);var ut=me+de[Ye];et>0&&(ut+=ee(re,le,et),le+=et),Le=ee(re,le,Fe),Ye=ue>>>1==1?ke[Le]:Me[Le],le+=Ye&15,Ye>>>=4;var Je=Ye<4?0:Ye-2>>1,st=se[Ye];for(Je>0&&(st+=ee(re,le,Je),le+=Je),!he&&Re<ut&&(pe=We(pe,ut+100),Re=pe.length);me<ut;)pe[me]=pe[me-st],++me}}}return he?[pe,le+7>>>3]:[pe.slice(0,me),le+7>>>3]}function ft(re,he){var le=re.slice(re.l||0),ue=$t(le,he);return re.l+=ue[1],ue[0]}function ct(re,he){if(re)typeof console<"u"&&console.error(he);else throw new Error(he)}function ht(re,he){var le=re;wn(le,0);var ue=[],pe=[],me={FileIndex:ue,FullPaths:pe};A(me,{root:he.root});for(var Re=le.length-4;(le[Re]!=80||le[Re+1]!=75||le[Re+2]!=5||le[Re+3]!=6)&&Re>=0;)--Re;le.l=Re+4,le.l+=4;var Ve=le.read_shift(2);le.l+=6;var Fe=le.read_shift(4);for(le.l=Fe,Re=0;Re<Ve;++Re){le.l+=20;var Ne=le.read_shift(4),Le=le.read_shift(4),Ye=le.read_shift(2),et=le.read_shift(2),ut=le.read_shift(2);le.l+=8;var Je=le.read_shift(4),st=o(le.slice(le.l+Ye,le.l+Ye+et));le.l+=Ye+et+ut;var kt=le.l;le.l=Je+4,Ct(le,Ne,Le,me,st),le.l=kt}return me}function Ct(re,he,le,ue,pe){re.l+=2;var me=re.read_shift(2),Re=re.read_shift(2),Ve=a(re);if(me&8257)throw new Error("Unsupported ZIP encryption");for(var Fe=re.read_shift(4),Ne=re.read_shift(4),Le=re.read_shift(4),Ye=re.read_shift(2),et=re.read_shift(2),ut="",Je=0;Je<Ye;++Je)ut+=String.fromCharCode(re[re.l++]);if(et){var st=o(re.slice(re.l,re.l+et));(st[21589]||{}).mt&&(Ve=st[21589].mt),((pe||{})[21589]||{}).mt&&(Ve=pe[21589].mt)}re.l+=et;var kt=re.slice(re.l,re.l+Ne);switch(Re){case 8:kt=G(re,Le);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Re)}var yr=!1;me&8&&(Fe=re.read_shift(4),Fe==134695760&&(Fe=re.read_shift(4),yr=!0),Ne=re.read_shift(4),Le=re.read_shift(4)),Ne!=he&&ct(yr,"Bad compressed size: "+he+" != "+Ne),Le!=le&&ct(yr,"Bad uncompressed size: "+le+" != "+Le),Rr(ue,ut,kt,{unsafe:!0,mt:Ve})}function Rt(re,he){var le=he||{},ue=[],pe=[],me=on(1),Re=le.compression?8:0,Ve=0,Fe=0,Ne=0,Le=0,Ye=0,et=re.FullPaths[0],ut=et,Je=re.FileIndex[0],st=[],kt=0;for(Fe=1;Fe<re.FullPaths.length;++Fe)if(ut=re.FullPaths[Fe].slice(et.length),Je=re.FileIndex[Fe],!(!Je.size||!Je.content||ut=="Sh33tJ5")){var yr=Le,pr=on(ut.length);for(Ne=0;Ne<ut.length;++Ne)pr.write_shift(1,ut.charCodeAt(Ne)&127);pr=pr.slice(0,pr.l),st[Ye]=BQ.buf(Je.content,0);var Ir=Je.content;Re==8&&(Ir=W(Ir)),me=on(30),me.write_shift(4,67324752),me.write_shift(2,20),me.write_shift(2,Ve),me.write_shift(2,Re),Je.mt?i(me,Je.mt):me.write_shift(4,0),me.write_shift(-4,st[Ye]),me.write_shift(4,Ir.length),me.write_shift(4,Je.content.length),me.write_shift(2,pr.length),me.write_shift(2,0),Le+=me.length,ue.push(me),Le+=pr.length,ue.push(pr),Le+=Ir.length,ue.push(Ir),me=on(46),me.write_shift(4,33639248),me.write_shift(2,0),me.write_shift(2,20),me.write_shift(2,Ve),me.write_shift(2,Re),me.write_shift(4,0),me.write_shift(-4,st[Ye]),me.write_shift(4,Ir.length),me.write_shift(4,Je.content.length),me.write_shift(2,pr.length),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(4,0),me.write_shift(4,yr),kt+=me.l,pe.push(me),kt+=pr.length,pe.push(pr),++Ye}return me=on(22),me.write_shift(4,101010256),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,Ye),me.write_shift(2,Ye),me.write_shift(4,kt),me.write_shift(4,Le),me.write_shift(2,0),qi([qi(ue),qi(pe),me])}var gr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function rs(re,he){if(re.ctype)return re.ctype;var le=re.name||"",ue=le.match(/\.([^\.]+)$/);return ue&&gr[ue[1]]||he&&(ue=(le=he).match(/[\.\\]([^\.\\])+$/),ue&&gr[ue[1]])?gr[ue[1]]:"application/octet-stream"}function Pi(re){for(var he=Ob(re),le=[],ue=0;ue<he.length;ue+=76)le.push(he.slice(ue,ue+76));return le.join(`\r
`)+`\r
`}function ps(re){var he=re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ne){var Le=Ne.charCodeAt(0).toString(16).toUpperCase();return"="+(Le.length==1?"0"+Le:Le)});he=he.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),he.charAt(0)==`
`&&(he="=0D"+he.slice(1)),he=he.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var le=[],ue=he.split(`\r
`),pe=0;pe<ue.length;++pe){var me=ue[pe];if(me.length==0){le.push("");continue}for(var Re=0;Re<me.length;){var Ve=76,Fe=me.slice(Re,Re+Ve);Fe.charAt(Ve-1)=="="?Ve--:Fe.charAt(Ve-2)=="="?Ve-=2:Fe.charAt(Ve-3)=="="&&(Ve-=3),Fe=me.slice(Re,Re+Ve),Re+=Ve,Re<me.length&&(Fe+="="),le.push(Fe)}}return le.join(`\r
`)}function Sl(re){for(var he=[],le=0;le<re.length;++le){for(var ue=re[le];le<=re.length&&ue.charAt(ue.length-1)=="=";)ue=ue.slice(0,ue.length-1)+re[++le];he.push(ue)}for(var pe=0;pe<he.length;++pe)he[pe]=he[pe].replace(/[=][0-9A-Fa-f]{2}/g,function(me){return String.fromCharCode(parseInt(me.slice(1),16))});return oa(he.join(`\r
`))}function Ga(re,he,le){for(var ue="",pe="",me="",Re,Ve=0;Ve<10;++Ve){var Fe=he[Ve];if(!Fe||Fe.match(/^\s*$/))break;var Ne=Fe.match(/^(.*?):\s*([^\s].*)$/);if(Ne)switch(Ne[1].toLowerCase()){case"content-location":ue=Ne[2].trim();break;case"content-type":me=Ne[2].trim();break;case"content-transfer-encoding":pe=Ne[2].trim();break}}switch(++Ve,pe.toLowerCase()){case"base64":Re=oa(Rs(he.slice(Ve).join("")));break;case"quoted-printable":Re=Sl(he.slice(Ve));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+pe)}var Le=Rr(re,ue.slice(le.length),Re,{unsafe:!0});me&&(Le.ctype=me)}function _o(re,he){if(L(re.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var le=he&&he.root||"",ue=(Zt&&Buffer.isBuffer(re)?re.toString("binary"):L(re)).split(`\r
`),pe=0,me="";for(pe=0;pe<ue.length;++pe)if(me=ue[pe],!!/^Content-Location:/i.test(me)&&(me=me.slice(me.indexOf("file")),le||(le=me.slice(0,me.lastIndexOf("/")+1)),me.slice(0,le.length)!=le))for(;le.length>0&&(le=le.slice(0,le.length-1),le=le.slice(0,le.lastIndexOf("/")+1),me.slice(0,le.length)!=le););var Re=(ue[1]||"").match(/boundary="(.*?)"/);if(!Re)throw new Error("MAD cannot find boundary");var Ve="--"+(Re[1]||""),Fe=[],Ne=[],Le={FileIndex:Fe,FullPaths:Ne};A(Le);var Ye,et=0;for(pe=0;pe<ue.length;++pe){var ut=ue[pe];ut!==Ve&&ut!==Ve+"--"||(et++&&Ga(Le,ue.slice(Ye,pe),le),Ye=pe)}return Le}function sn(re,he){var le=he||{},ue=le.boundary||"SheetJS";ue="------="+ue;for(var pe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ue.slice(2)+'"',"","",""],me=re.FullPaths[0],Re=me,Ve=re.FileIndex[0],Fe=1;Fe<re.FullPaths.length;++Fe)if(Re=re.FullPaths[Fe].slice(me.length),Ve=re.FileIndex[Fe],!(!Ve.size||!Ve.content||Re=="Sh33tJ5")){Re=Re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(kt){return"_x"+kt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(kt){return"_u"+kt.charCodeAt(0).toString(16)+"_"});for(var Ne=Ve.content,Le=Zt&&Buffer.isBuffer(Ne)?Ne.toString("binary"):L(Ne),Ye=0,et=Math.min(1024,Le.length),ut=0,Je=0;Je<=et;++Je)(ut=Le.charCodeAt(Je))>=32&&ut<128&&++Ye;var st=Ye>=et*4/5;pe.push(ue),pe.push("Content-Location: "+(le.root||"file:///C:/SheetJS/")+Re),pe.push("Content-Transfer-Encoding: "+(st?"quoted-printable":"base64")),pe.push("Content-Type: "+rs(Ve,Re)),pe.push(""),pe.push(st?ps(Le):Pi(Le))}return pe.push(ue+`--\r
`),pe.join(`\r
`)}function bo(re){var he={};return A(he,re),he}function Rr(re,he,le,ue){var pe=ue&&ue.unsafe;pe||A(re);var me=!pe&&rr.find(re,he);if(!me){var Re=re.FullPaths[0];he.slice(0,Re.length)==Re?Re=he:(Re.slice(-1)!="/"&&(Re+="/"),Re=(Re+he).replace("//","/")),me={name:s(he),type:2},re.FileIndex.push(me),re.FullPaths.push(Re),pe||rr.utils.cfb_gc(re)}return me.content=le,me.size=le?le.length:0,ue&&(ue.CLSID&&(me.clsid=ue.CLSID),ue.mt&&(me.mt=ue.mt),ue.ct&&(me.ct=ue.ct)),me}function On(re,he){A(re);var le=rr.find(re,he);if(le){for(var ue=0;ue<re.FileIndex.length;++ue)if(re.FileIndex[ue]==le)return re.FileIndex.splice(ue,1),re.FullPaths.splice(ue,1),!0}return!1}function Al(re,he,le){A(re);var ue=rr.find(re,he);if(ue){for(var pe=0;pe<re.FileIndex.length;++pe)if(re.FileIndex[pe]==ue)return re.FileIndex[pe].name=s(le),re.FullPaths[pe]=le,!0}return!1}function zc(re){m(re,!0)}return e.find=I,e.read=R,e.parse=u,e.write=z,e.writeFile=M,e.utils={cfb_new:bo,cfb_add:Rr,cfb_del:On,cfb_mov:Al,cfb_gc:zc,ReadShift:zu,CheckField:nk,prep_blob:wn,bconcat:qi,use_zlib:H,_deflateRaw:Ee,_inflateRaw:ft,consts:N},e}();function UQ(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Ua(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function ux(t){for(var e=[],r=Ua(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}var Sh=new Date(1899,11,30,0,0,0);function hs(t,e){var r=t.getTime(),n=Sh.getTime()+(t.getTimezoneOffset()-Sh.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var MI=new Date,$Q=Sh.getTime()+(MI.getTimezoneOffset()-Sh.getTimezoneOffset())*6e4,Gb=MI.getTimezoneOffset();function Lp(t){var e=new Date;return e.setTime(t*24*60*60*1e3+$Q),e.getTimezoneOffset()!==Gb&&e.setTime(e.getTime()+(e.getTimezoneOffset()-Gb)*6e4),e}function VQ(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var Wb=new Date("2017-02-19T19:06:09.000Z"),LI=isNaN(Wb.getFullYear())?new Date("2/19/17"):Wb,HQ=LI.getFullYear()==2017;function vn(t,e){var r=new Date(t);if(HQ)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(LI.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function il(t,e){if(Zt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Su(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Su(SI(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Su(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Su(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function Fn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Fn(t[r]));return e}function Vr(t,e){for(var r="";r.length<e;)r+=t;return r}function fa(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var jQ=["january","february","march","april","may","june","july","august","september","october","november","december"];function Dc(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&jQ.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var GQ=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),a=[i[0]],o=1;o<i.length;++o)a.push(s),a.push(i[o]);return a}}();function BI(t){return t?t.content&&t.type?il(t.content,!0):t.data?Eu(t.data):t.asNodeBuffer&&Zt?Eu(t.asNodeBuffer().toString("binary")):t.asBinary?Eu(t.asBinary()):t._data&&t._data.getContent?Eu(il(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function UI(t){if(!t)return null;if(t.data)return Fb(t.data);if(t.asNodeBuffer&&Zt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?Fb(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function WQ(t){return t&&t.name.slice(-4)===".bin"?UI(t):BI(t)}function $s(t,e){for(var r=t.FullPaths||Ua(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var a=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||s==a)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function dx(t,e){var r=$s(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Zr(t,e,r){if(!r)return WQ(dx(t,e));if(!e)return null;try{return Zr(t,e)}catch{return null}}function Cs(t,e,r){if(!r)return BI(dx(t,e));if(!e)return null;try{return Cs(t,e)}catch{return null}}function zQ(t,e,r){return UI(dx(t,e))}function zb(t){for(var e=t.FullPaths||Ua(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function KQ(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Zt?n=vl(r):n=fQ(r),rr.utils.cfb_add(t,e,n)}rr.utils.cfb_add(t,e,r)}else t.file(e,r)}function $I(t,e){switch(e.type){case"base64":return rr.read(t,{type:"base64"});case"binary":return rr.read(t,{type:"binary"});case"buffer":case"array":return rr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function bu(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var VI=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,qQ=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Kb=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,XQ=/<[^>]*>/g,ts=VI.match(Kb)?Kb:XQ,YQ=/<\w*:/,QQ=/<(\/?)\w+:/;function It(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var a=t.match(qQ),o=0,l="",c=0,u="",f="",h=1;if(a)for(c=0;c!=a.length;++c){for(f=a[c],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(u=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(h=(s=f.charCodeAt(i+1))==34||s==39?1:0,l=f.slice(i+1+h,f.length-h),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,n[u.toLowerCase()]=l;else{var p=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[p]&&u.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function Ha(t){return t.replace(QQ,"<$1")}var HI={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},JQ=ux(HI),ar=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(o,l){return HI[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,a)+r(s.slice(a+3))}}(),ZQ=/[&<>'"]/g,eJ=/[\u0000-\u001f]/g;function fx(t){var e=t+"";return e.replace(ZQ,function(r){return JQ[r]}).replace(/\n/g,"<br/>").replace(eJ,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var qb=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Dr(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function pg(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function Xb(t){var e=po(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function Yb(t){return vl(t,"binary").toString("utf8")}var Xf="foo bar baz",Ar=Zt&&(Yb(Xf)==pg(Xf)&&Yb||Xb(Xf)==pg(Xf)&&Xb)||pg,Su=Zt?function(t){return vl(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Id=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),jI=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),tJ=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),rJ=/<\/?(?:vt:)?variant>/g,nJ=/<(?:vt:)([^>]*)>([\s\S]*)</;function Qb(t,e){var r=It(t),n=t.match(tJ(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var a=i.replace(rJ,"").match(nJ);a&&s.push({v:Ar(a[2]),t:a[1]})}),s}var sJ=/(^\s|\s$|\n)/;function aJ(t){return Ua(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function iJ(t,e,r){return"<"+t+(r!=null?aJ(r):"")+(e!=null?(e.match(sJ)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function hx(t){if(Zt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Ar(yl(ox(t)));throw new Error("Bad input format: expected Buffer or string")}var kd=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,oJ={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},lJ=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function cJ(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function uJ(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var Jb=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},Zb=Zt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:vl(e)})):Jb(t)}:Jb,eS=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(ci(t,s)));return n.join("").replace(fs,"")},px=Zt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(fs,""):eS(t,e,r)}:eS,tS=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},GI=Zt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):tS(t,e,r)}:tS,rS=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Gl(t,s)));return n.join("")},af=Zt?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):rS(e,r,n)}:rS,WI=function(t,e){var r=ws(t,e);return r>0?af(t,e+4,e+4+r-1):""},zI=WI,KI=function(t,e){var r=ws(t,e);return r>0?af(t,e+4,e+4+r-1):""},qI=KI,XI=function(t,e){var r=2*ws(t,e);return r>0?af(t,e+4,e+4+r-1):""},YI=XI,QI=function(e,r){var n=ws(e,r);return n>0?px(e,r+4,r+4+n):""},JI=QI,ZI=function(t,e){var r=ws(t,e);return r>0?af(t,e+4,e+4+r):""},ek=ZI,tk=function(t,e){return cJ(t,e)},Ah=tk,rk=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Zt&&(zI=function(e,r){if(!Buffer.isBuffer(e))return WI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},qI=function(e,r){if(!Buffer.isBuffer(e))return KI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},YI=function(e,r){if(!Buffer.isBuffer(e))return XI(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},JI=function(e,r){if(!Buffer.isBuffer(e))return QI(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},ek=function(e,r){if(!Buffer.isBuffer(e))return ZI(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},Ah=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):tk(e,r)},rk=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Gl=function(t,e){return t[e]},ci=function(t,e){return t[e+1]*256+t[e]},dJ=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},ws=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},No=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},fJ=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function zu(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,Zt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(ci(this,c)),c+=2;t*=2;break;case"utf8":r=af(this,this.l,this.l+t);break;case"utf16le":t*=2,r=px(this,this.l,this.l+t);break;case"wstr":return zu.call(this,t,"dbcs");case"lpstr-ansi":r=zI(this,this.l),t=4+ws(this,this.l);break;case"lpstr-cp":r=qI(this,this.l),t=4+ws(this,this.l);break;case"lpwstr":r=YI(this,this.l),t=4+2*ws(this,this.l);break;case"lpp4":t=4+ws(this,this.l),r=JI(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+ws(this,this.l),r=ek(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Gl(this,this.l+t++))!==0;)i.push(qf(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=ci(this,this.l+t))!==0;)i.push(qf(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Gl(this,c),this.l=c+1,o=zu.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(qf(ci(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Gl(this,c),this.l=c+1,o=zu.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(qf(Gl(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=Gl(this,this.l),this.l++,n;case 2:return n=(e==="i"?dJ:ci)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?No:fJ)(this,this.l),this.l+=4,n):(s=ws(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=Ah(this,this.l):s=Ah([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=GI(this,this.l,t);break}}return this.l+=t,r}var hJ=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},pJ=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},mJ=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function gJ(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)mJ(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,hJ(this,e,this.l);break;case 8:if(n=8,r==="f"){uJ(this,e,this.l);break}case 16:break;case-4:n=4,pJ(this,e,this.l);break}return this.l+=n,this}function nk(t,e){var r=GI(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function wn(t,e){t.l=e,t.read_shift=zu,t.chk=nk,t.write_shift=gJ}function es(t,e){t.l+=e}function on(t){var e=po(t);return wn(e,0),e}function ki(t,e,r){if(t){var n,s,i;wn(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=Dh[o]||Dh[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;l=t.l+i;var u=c.f&&c.f(t,i,r);if(t.l=l,e(u,c,o))return}}}function Hv(){var t=[],e=Zt?256:2048,r=function(c){var u=on(c);return wn(u,0),u},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),qi(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function Ku(t,e,r){var n=Fn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function nS(t,e,r){var n=Fn(t);return n.s=Ku(n.s,e.s,r),n.e=Ku(n.e,e.s,r),n}function qu(t,e){if(t.cRel&&t.c<0)for(t=Fn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Fn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Mt(t);return!t.cRel&&t.cRel!=null&&(r=xJ(r)),!t.rRel&&t.rRel!=null&&(r=vJ(r)),r}function mg(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+un(t.s.c)+":"+(t.e.cRel?"":"$")+un(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Nn(t.s.r)+":"+(t.e.rRel?"":"$")+Nn(t.e.r):qu(t.s,e.biff)+":"+qu(t.e,e.biff)}function mx(t){return parseInt(yJ(t),10)-1}function Nn(t){return""+(t+1)}function vJ(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function yJ(t){return t.replace(/\$(\d+)$/,"$1")}function gx(t){for(var e=EJ(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function un(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function xJ(t){return t.replace(/^([A-Z])/,"$$$1")}function EJ(t){return t.replace(/^\$([A-Z])/,"$1")}function _J(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function us(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Mt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Gc(t){var e=t.indexOf(":");return e==-1?{s:us(t),e:us(t)}:{s:us(t.slice(0,e)),e:us(t.slice(e+1))}}function nr(t,e){return typeof e>"u"||typeof e=="number"?nr(t.s,t.e):(typeof t!="string"&&(t=Mt(t)),typeof e!="string"&&(e=Mt(e)),t==e?t:t+":"+e)}function Gr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function sS(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Ks(t.z,r?hs(e):e)}catch{}try{return t.w=Ks((t.XF||{}).numFmtId||(r?14:0),r?hs(e):e)}catch{return""+e}}function Ti(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?_l[t.v]||t.v:e==null?sS(t,t.v):sS(t,e))}function Eo(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function sk(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?us(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Gr(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=u.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[f].length;++h)if(!(typeof e[f][h]>"u")){var p={v:e[f][h]},g=a+f,v=o+h;if(c.s.r>g&&(c.s.r=g),c.s.c>v&&(c.s.c=v),c.e.r<g&&(c.e.r=g),c.e.c<v&&(c.e.c=v),e[f][h]&&typeof e[f][h]=="object"&&!Array.isArray(e[f][h])&&!(e[f][h]instanceof Date))p=e[f][h];else if(Array.isArray(p.v)&&(p.f=e[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Ut[14],n.cellDates?(p.t="d",p.w=Ks(p.z,hs(p.v))):(p.t="n",p.v=hs(p.v),p.w=Ks(p.z,p.v))):p.t="s";if(s)i[g]||(i[g]=[]),i[g][v]&&i[g][v].z&&(p.z=i[g][v].z),i[g][v]=p;else{var y=Mt({c:v,r:g});i[y]&&i[y].z&&(p.z=i[y].z),i[y]=p}}}return c.s.c<1e7&&(i["!ref"]=nr(c)),i}function Wc(t,e){return sk(null,t,e)}function bJ(t){return t.read_shift(4,"i")}function Jn(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function SJ(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function vx(t,e){var r=t.l,n=t.read_shift(1),s=Jn(t),i=[],a={t:s,h:s};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(SJ(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}var AJ=vx;function Ys(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function xl(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var TJ=Jn;function yx(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var wJ=Jn,jv=yx;function xx(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?Ah([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):No(e,0)>>2;return r?s/100:s}function ak(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var El=ak;function zn(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function CJ(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=zo[s];c&&(e.rgb=Pd(c));break;case 2:e.rgb=Pd([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function IJ(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function ik(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function kJ(t){return ik(t,1)}function DJ(t){return ik(t,2)}var Ex=2,ys=3,Yf=11,aS=12,Th=19,Qf=64,PJ=65,RJ=71,FJ=4108,NJ=4126,pn=80,ok=81,OJ=[pn,ok],MJ={1:{n:"CodePage",t:Ex},2:{n:"Category",t:pn},3:{n:"PresentationFormat",t:pn},4:{n:"ByteCount",t:ys},5:{n:"LineCount",t:ys},6:{n:"ParagraphCount",t:ys},7:{n:"SlideCount",t:ys},8:{n:"NoteCount",t:ys},9:{n:"HiddenCount",t:ys},10:{n:"MultimediaClipCount",t:ys},11:{n:"ScaleCrop",t:Yf},12:{n:"HeadingPairs",t:FJ},13:{n:"TitlesOfParts",t:NJ},14:{n:"Manager",t:pn},15:{n:"Company",t:pn},16:{n:"LinksUpToDate",t:Yf},17:{n:"CharacterCount",t:ys},19:{n:"SharedDoc",t:Yf},22:{n:"HyperlinksChanged",t:Yf},23:{n:"AppVersion",t:ys,p:"version"},24:{n:"DigSig",t:PJ},26:{n:"ContentType",t:pn},27:{n:"ContentStatus",t:pn},28:{n:"Language",t:pn},29:{n:"Version",t:pn},255:{},2147483648:{n:"Locale",t:Th},2147483651:{n:"Behavior",t:Th},1919054434:{}},LJ={1:{n:"CodePage",t:Ex},2:{n:"Title",t:pn},3:{n:"Subject",t:pn},4:{n:"Author",t:pn},5:{n:"Keywords",t:pn},6:{n:"Comments",t:pn},7:{n:"Template",t:pn},8:{n:"LastAuthor",t:pn},9:{n:"RevNumber",t:pn},10:{n:"EditTime",t:Qf},11:{n:"LastPrinted",t:Qf},12:{n:"CreatedDate",t:Qf},13:{n:"ModifiedDate",t:Qf},14:{n:"PageCount",t:ys},15:{n:"WordCount",t:ys},16:{n:"CharCount",t:ys},17:{n:"Thumbnail",t:RJ},18:{n:"Application",t:pn},19:{n:"DocSecurity",t:ys},255:{},2147483648:{n:"Locale",t:Th},2147483651:{n:"Behavior",t:Th},1919054434:{}},iS={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},BJ=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function UJ(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var $J=UJ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),zo=Fn($J),_l={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},lk={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},oS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function VJ(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function HJ(t){var e=VJ();if(!t||!t.match)return e;var r={};if((t.match(ts)||[]).forEach(function(n){var s=It(n);switch(s[0].replace(YQ,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[oS[s.ContentType]]!==void 0&&e[oS[s.ContentType]].push(s.PartName);break}}),e.xmlns!==oJ.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}var ql={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Gv(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Xu(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(ts)||[]).forEach(function(s){var i=It(s);if(i[0]==="<Relationship"){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:bu(i.Target,e);r[o]=a,n[i.Id]=a}}),r["!id"]=n,r}var jJ="application/vnd.oasis.opendocument.spreadsheet";function GJ(t,e){for(var r=hx(t),n,s;n=kd.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=It(n[0],!1),s.path=="/"&&s.type!==jJ)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var Yu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],WJ=function(){for(var t=new Array(Yu.length),e=0;e<Yu.length;++e){var r=Yu[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function ck(t){var e={};t=Ar(t);for(var r=0;r<Yu.length;++r){var n=Yu[r],s=t.match(WJ[r]);s!=null&&s.length>0&&(e[n[1]]=ar(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=vn(e[n[1]]))}return e}var zJ=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function uk(t,e,r,n){var s=[];if(typeof t=="string")s=Qb(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(u){return{v:u}}));var a=typeof e=="string"?Qb(e,n).map(function(u){return u.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function KJ(t,e,r){var n={};return e||(e={}),t=Ar(t),zJ.forEach(function(s){var i=(t.match(Id(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=ar(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var a=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));a&&a.length>0&&(n[s[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&uk(n.HeadingPairs,n.TitlesOfParts,e,r),e}var qJ=/<[^>]+>[^<]*/g;function XJ(t,e){var r={},n="",s=t.match(qJ);if(s)for(var i=0;i!=s.length;++i){var a=s[i],o=It(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=ar(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=ar(u);break;case"bool":r[n]=Dr(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=vn(u);break;case"cy":case"error":r[n]=ar(u);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}var YJ={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},gg;function QJ(t,e,r){gg||(gg=ux(YJ)),e=gg[e]||e,t[e]=r}function _x(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function dk(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function fk(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function hk(t,e,r){return e===31?fk(t):dk(t,e,r)}function Wv(t,e,r){return hk(t,e,r===!1?0:4)}function JJ(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return hk(t,e,0)}function ZJ(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(fs,""),t.l-s&2&&(t.l+=2)}return r}function eZ(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(fs,"");return r}function tZ(t){var e=t.l,r=wh(t,ok);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=wh(t,ys);return[r,n]}function rZ(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(tZ(t));return r}function lS(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),a=t.read_shift(4);n[i]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(fs,"").replace(_u,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function pk(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function nZ(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function wh(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==aS&&n!==e&&OJ.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===aS?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return dk(t,n,4).replace(fs,"");case 31:return fk(t);case 64:return _x(t);case 65:return pk(t);case 71:return nZ(t);case 80:return Wv(t,n,!i.raw).replace(fs,"");case 81:return JJ(t,n).replace(fs,"");case 4108:return rZ(t);case 4126:case 4127:return n==4127?ZJ(t):eZ(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function cS(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0,o=0,l=-1,c={};for(a=0;a!=s;++a){var u=t.read_shift(4),f=t.read_shift(4);i[a]=[u,f+r]}i.sort(function(E,x){return E[1]-x[1]});var h={};for(a=0;a!=s;++a){if(t.l!==i[a][1]){var p=!0;if(a>0&&e)switch(e[i[a-1][0]].t){case 2:t.l+2===i[a][1]&&(t.l+=2,p=!1);break;case 80:t.l<=i[a][1]&&(t.l=i[a][1],p=!1);break;case 4108:t.l<=i[a][1]&&(t.l=i[a][1],p=!1);break}if((!e||a==0)&&t.l<=i[a][1]&&(p=!1,t.l=i[a][1]),p)throw new Error("Read Error: Expected address "+i[a][1]+" at "+t.l+" :"+a)}if(e){var g=e[i[a][0]];if(h[g.n]=wh(t,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:la(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(i[a][0]===1){if(o=h.CodePage=wh(t,Ex),la(o),l!==-1){var v=t.l;t.l=i[l][1],c=lS(t,o),t.l=v}}else if(i[a][0]===0){if(o===0){l=a,t.l=i[a+1][1];continue}c=lS(t,o)}else{var y=c[i[a][0]],b;switch(t[t.l]){case 65:t.l+=4,b=pk(t);break;case 30:t.l+=4,b=Wv(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,b=Wv(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,b=t.read_shift(4,"i");break;case 19:t.l+=4,b=t.read_shift(4);break;case 5:t.l+=4,b=t.read_shift(8,"f");break;case 11:t.l+=4,b=zr(t,4);break;case 64:t.l+=4,b=vn(_x(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[y]=b}}return t.l=r+n,h}function uS(t,e,r){var n=t.content;if(!n)return{};wn(n,0);var s,i,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==rr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(a=n.read_shift(16),l=n.read_shift(4));var f=cS(n,e),h={SystemIdentifier:c};for(var p in f)h[p]=f[p];if(h.FMTID=i,s===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var g;try{g=cS(n,null)}catch{}for(p in g)h[p]=g[p];return h.FMTID=[i,a],h}function Bi(t,e){return t.read_shift(e),null}function sZ(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function zr(t,e){return t.read_shift(e)===1}function en(t){return t.read_shift(2,"u")}function mk(t,e){return sZ(t,e,en)}function aZ(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function of(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function iZ(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),a=0,o,l={};s&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",u=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*a),n&&(t.l+=o),l.t=u,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function ol(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function lf(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):ol(t,n,r)}function bl(t,e,r){if(r.biff>5)return lf(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function oZ(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function lZ(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(fs,"");return n&&(t.l+=24),s}function cZ(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(i>>1,"utf16le").replace(fs,"");return r+a}function uZ(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return lZ(t);case"0303000000000000c000000000000046":return cZ(t);default:throw new Error("Unsupported Moniker "+r)}}function Jf(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(fs,""):"";return r}function dZ(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,a,o,l,c="",u,f;s&16&&(i=Jf(t,r-t.l)),s&128&&(a=Jf(t,r-t.l)),(s&257)===257&&(o=Jf(t,r-t.l)),(s&257)===1&&(l=uZ(t,r-t.l)),s&8&&(c=Jf(t,r-t.l)),s&32&&(u=t.read_shift(16)),s&64&&(f=_x(t)),t.l=r;var h=a||o||l||"";h&&c&&(h+="#"+c),h||(h="#"+c),s&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return u&&(p.guid=u),f&&(p.time=f),i&&(p.Tooltip=i),p}function gk(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function vk(t,e){var r=gk(t);return r[3]=0,r}function ja(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function fZ(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function hZ(t,e,r){return e===0?"":bl(t,e,r)}function pZ(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function yk(t){var e=t.read_shift(2),r=xx(t);return[e,r]}function mZ(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=of(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function Bp(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function xk(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var gZ=xk;function Ek(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function vZ(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function yZ(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Un(t){t.l+=2,t.l+=t.read_shift(2)}var xZ={0:Un,4:Un,5:Un,6:Un,7:yZ,8:Un,9:Un,10:Un,11:Un,12:Un,13:vZ,14:Un,15:Un,16:Un,17:Un,18:Un,19:Un,20:Un,21:Ek};function EZ(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(xZ[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Zf(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function _Z(t,e){return e===0||t.read_shift(2),1200}function bZ(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=bl(t,0,r);return t.read_shift(e+n-t.l),s}function SZ(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function AZ(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var a=of(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:s,dt:i,name:a}}function TZ(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0;a!=s&&t.l<r;++a)i.push(iZ(t));return i.Count=n,i.Unique=s,i}function wZ(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function CZ(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function IZ(t){var e=fZ(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function kZ(t){return t.read_shift(2),t.read_shift(4)}function dS(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function DZ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function PZ(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function RZ(){}function FZ(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=of(t,0,r),n}function NZ(t){var e=ja(t);return e.isst=t.read_shift(4),e}function OZ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=ja(t);r.biff==2&&t.l++;var i=lf(t,n-t.l,r);return s.val=i,s}function MZ(t,e,r){var n=t.read_shift(2),s=bl(t,0,r);return[n,s]}var LZ=bl;function fS(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),a=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:i,c:o},e:{r:a,c:l}}}function BZ(t){var e=t.read_shift(2),r=t.read_shift(2),n=yk(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function UZ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(yk(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:a,rkrec:i}}function $Z(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:a,ixfe:i}}function VZ(t,e,r,n){var s={},i=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=BJ[o>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=a&15,s.dgRight=a>>4&15,s.dgTop=a>>8&15,s.dgBottom=a>>12&15,s.icvLeft=a>>16&127,s.icvRight=a>>23&127,s.grbitDiag=a>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function HZ(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=VZ(t,e,n.fStyle,r),n}function jZ(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function hS(t,e,r){var n=ja(t);(r.biff==2||e==9)&&++t.l;var s=aZ(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function GZ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=ja(t),s=zn(t);return n.val=s,n}var pS=hZ;function WZ(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var a=ol(t,i),o=[];n>t.l;)o.push(lf(t));return[i,s,a,o]}function mS(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=mZ(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var zZ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function gS(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=ol(t,a,r);s&32&&(c=zZ[c.charCodeAt(0)]);var u=n-t.l;r&&r.biff==2&&--u;var f=n==t.l||o===0||!(u>0)?[]:Cne(t,u,r,o);return{chKey:i,Name:c,itab:l,rgce:f}}function _k(t,e,r){if(r.biff<8)return KZ(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(pZ(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function KZ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=of(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function qZ(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=ol(t,n,r),a=ol(t,s,r);return[i,a]}function XZ(t,e,r){var n=xk(t);t.l++;var s=t.read_shift(1);return e-=8,[Ine(t,e,r),s,n]}function vS(t,e,r){var n=gZ(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,Tne(t,e,r)]}function YZ(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function QZ(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=bl(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,a,i]}}function JZ(t,e,r){return QZ(t,e,r)}function ZZ(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(Bp(t));return r}function eee(t,e,r){if(r&&r.biff<8)return ree(t,e,r);var n=Ek(t),s=EZ(t,e-22,n[1]);return{cmo:n,ft:s}}var tee={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function ree(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((tee[n]||es)(t,e,r)),{cmo:[s,n,i],ft:a}}function nee(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:a=oZ(t,6,r);var o=t.read_shift(2);t.read_shift(2),en(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var u=t[t.l],f=ol(t,t.lens[c+1]-t.lens[c]-1);if(s+=f,s.length>=(u?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function see(t,e){var r=Bp(t);t.l+=16;var n=dZ(t,e-24);return[r,n]}function aee(t,e){t.read_shift(2);var r=Bp(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(fs,""),[r,n]}function iee(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=iS[r]||r,r=t.read_shift(2),e[1]=iS[r]||r,e}function oee(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(vk(t));return r}function lee(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(vk(t));return r}function cee(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function bk(t,e,r){if(!r.cellStyles)return es(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function uee(t,e){var r={};return e<32||(t.l+=16,r.header=zn(t),r.footer=zn(t),t.l+=2),r}function dee(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}var fee=ja,hee=mk,pee=lf;function mee(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function gee(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=ja(t);++t.l;var s=bl(t,e-7,r);return n.t="str",n.val=s,n}function vee(t){var e=ja(t);++t.l;var r=zn(t);return e.t="n",e.val=r,e}function yee(t){var e=ja(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function xee(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Eee(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function _ee(t,e,r){var n=t.l+e,s=ja(t),i=t.read_shift(2),a=ol(t,i,r);return t.l=n,s.t="str",s.val=a,s}var bee=[2,3,48,49,131,139,140,245],yS=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=ux({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],u=po(1);switch(l.type){case"base64":u=oa(Rs(o));break;case"binary":u=oa(o);break;case"buffer":case"array":u=o;break}wn(u,0);var f=u.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,y=521;f==2&&(v=u.read_shift(2)),u.l+=3,f!=2&&(v=u.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(y=u.read_shift(2));var b=u.read_shift(2),E=l.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(E=t[u[u.l]]),u.l+=1,u.l+=2),g&&(u.l+=36);for(var x=[],w={},P=Math.min(u.length,f==2?521:y-10-(p?264:0)),R=g?32:11;u.l<P&&u[u.l]!=13;)switch(w={},w.name=wd.utils.decode(E,u.slice(u.l,u.l+R)).replace(/[\u0000\r\n].*$/g,""),u.l+=R,w.type=String.fromCharCode(u.read_shift(1)),f!=2&&!g&&(w.offset=u.read_shift(4)),w.len=u.read_shift(1),f==2&&(w.offset=u.read_shift(2)),w.dec=u.read_shift(1),w.name.length&&x.push(w),f!=2&&(u.l+=g?13:14),w.type){case"B":(!p||w.len!=8)&&l.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(u[u.l]!==13&&(u.l=y-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=y;var A=0,_=0;for(c[0]=[],_=0;_!=x.length;++_)c[0][_]=x[_].name;for(;v-- >0;){if(u[u.l]===42){u.l+=b;continue}for(++u.l,c[++A]=[],_=0,_=0;_!=x.length;++_){var m=u.slice(u.l,u.l+x[_].len);u.l+=x[_].len,wn(m,0);var S=wd.utils.decode(E,m);switch(x[_].type){case"C":S.trim().length&&(c[A][_]=S.replace(/\s+$/,""));break;case"D":S.length===8?c[A][_]=new Date(+S.slice(0,4),+S.slice(4,6)-1,+S.slice(6,8)):c[A][_]=S;break;case"F":c[A][_]=parseFloat(S.trim());break;case"+":case"I":c[A][_]=g?m.read_shift(-4,"i")^2147483648:m.read_shift(4,"i");break;case"L":switch(S.trim().toUpperCase()){case"Y":case"T":c[A][_]=!0;break;case"N":case"F":c[A][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+S+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));c[A][_]="##MEMO##"+(g?parseInt(S.trim(),10):m.read_shift(4));break;case"N":S=S.replace(/\u0000/g,"").trim(),S&&S!="."&&(c[A][_]=+S||0);break;case"@":c[A][_]=new Date(m.read_shift(-8,"f")-621356832e5);break;case"T":c[A][_]=new Date((m.read_shift(4)-2440588)*864e5+m.read_shift(4));break;case"Y":c[A][_]=m.read_shift(4,"i")/1e4+m.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[A][_]=-m.read_shift(-8,"f");break;case"B":if(p&&x[_].len==8){c[A][_]=m.read_shift(8,"f");break}case"G":case"P":m.l+=x[_].len;break;case"0":if(x[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+x[_].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=x,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=Wc(r(o,c),c);return u["!cols"]=c.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete c.DBF,u}function s(o,l){try{return Eo(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&la(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Hv(),f=Qv(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=o["!cols"]||[],v=0,y=0,b=0,E=1;for(v=0;v<h.length;++v){if(((g[v]||{}).DBF||{}).name){h[v]=g[v].DBF.name,++b;continue}if(h[v]!=null){if(++b,typeof h[v]=="number"&&(h[v]=h[v].toString(10)),typeof h[v]!="string")throw new Error("DBF Invalid column name "+h[v]+" |"+typeof h[v]+"|");if(h.indexOf(h[v])!==v){for(y=0;y<1024;++y)if(h.indexOf(h[v]+"_"+y)==-1){h[v]+="_"+y;break}}}}var x=Gr(o["!ref"]),w=[],P=[],R=[];for(v=0;v<=x.e.c-x.s.c;++v){var A="",_="",m=0,S=[];for(y=0;y<p.length;++y)p[y][v]!=null&&S.push(p[y][v]);if(S.length==0||h[v]==null){w[v]="?";continue}for(y=0;y<S.length;++y){switch(typeof S[y]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=S[y]instanceof Date?"D":"C";break;default:_="C"}m=Math.max(m,String(S[y]).length),A=A&&A!=_?"C":_}m>250&&(m=250),_=((g[v]||{}).DBF||{}).type,_=="C"&&g[v].DBF.len>m&&(m=g[v].DBF.len),A=="B"&&_=="N"&&(A="N",R[v]=g[v].DBF.dec,m=g[v].DBF.len),P[v]=A=="C"||_=="N"?m:i[A]||0,E+=P[v],w[v]=A}var I=u.next(32);for(I.write_shift(4,318902576),I.write_shift(4,p.length),I.write_shift(2,296+32*b),I.write_shift(2,E),v=0;v<4;++v)I.write_shift(4,0);for(I.write_shift(4,0|(+e[_I]||3)<<8),v=0,y=0;v<h.length;++v)if(h[v]!=null){var k=u.next(32),C=(h[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,C,"sbcs"),k.write_shift(1,w[v]=="?"?"C":w[v],"sbcs"),k.write_shift(4,y),k.write_shift(1,P[v]||i[w[v]]||0),k.write_shift(1,R[v]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),y+=P[v]||i[w[v]]||0}var O=u.next(264);for(O.write_shift(4,13),v=0;v<65;++v)O.write_shift(4,0);for(v=0;v<p.length;++v){var D=u.next(E);for(D.write_shift(1,0),y=0;y<h.length;++y)if(h[y]!=null)switch(w[y]){case"L":D.write_shift(1,p[v][y]==null?63:p[v][y]?84:70);break;case"B":D.write_shift(8,p[v][y]||0,"f");break;case"N":var F="0";for(typeof p[v][y]=="number"&&(F=p[v][y].toFixed(R[y]||0)),b=0;b<P[y]-F.length;++b)D.write_shift(1,32);D.write_shift(1,F,"sbcs");break;case"D":p[v][y]?(D.write_shift(4,("0000"+p[v][y].getFullYear()).slice(-4),"sbcs"),D.write_shift(2,("00"+(p[v][y].getMonth()+1)).slice(-2),"sbcs"),D.write_shift(2,("00"+p[v][y].getDate()).slice(-2),"sbcs")):D.write_shift(8,"00000000","sbcs");break;case"C":var N=String(p[v][y]!=null?p[v][y]:"").slice(0,P[y]);for(D.write_shift(1,N,"sbcs"),b=0;b<P[y]-N.length;++b)D.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}}(),See=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ua(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=t[p];return typeof g=="number"?Nb(g):g},n=function(h,p,g){var v=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return v==59?h:Nb(v)};t["|"]=254;function s(h,p){switch(p.type){case"base64":return i(Rs(h),p);case"binary":return i(h,p);case"buffer":return i(Zt&&Buffer.isBuffer(h)?h.toString("binary"):yl(h),p);case"array":return i(il(h),p)}throw new Error("Unrecognized type "+p.type)}function i(h,p){var g=h.split(/[\n\r]+/),v=-1,y=-1,b=0,E=0,x=[],w=[],P=null,R={},A=[],_=[],m=[],S=0,I;for(+p.codepage>=0&&la(+p.codepage);b!==g.length;++b){S=0;var k=g[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),C=k.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),O=C[0],D;if(k.length>0)switch(O){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":C[1].charAt(0)=="P"&&w.push(k.slice(3).replace(/;;/g,";"));break;case"C":var F=!1,N=!1,M=!1,L=!1,z=-1,j=-1;for(E=1;E<C.length;++E)switch(C[E].charAt(0)){case"A":break;case"X":y=parseInt(C[E].slice(1))-1,N=!0;break;case"Y":for(v=parseInt(C[E].slice(1))-1,N||(y=0),I=x.length;I<=v;++I)x[I]=[];break;case"K":D=C[E].slice(1),D.charAt(0)==='"'?D=D.slice(1,D.length-1):D==="TRUE"?D=!0:D==="FALSE"?D=!1:isNaN(fa(D))?isNaN(Dc(D).getDate())||(D=vn(D)):(D=fa(D),P!==null&&jc(P)&&(D=Lp(D))),F=!0;break;case"E":L=!0;var H=hc(C[E].slice(1),{r:v,c:y});x[v][y]=[x[v][y],H];break;case"S":M=!0,x[v][y]=[x[v][y],"S5S"];break;case"G":break;case"R":z=parseInt(C[E].slice(1))-1;break;case"C":j=parseInt(C[E].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}if(F&&(x[v][y]&&x[v][y].length==2?x[v][y][0]=D:x[v][y]=D,P=null),M){if(L)throw new Error("SYLK shared formula cannot have own formula");var G=z>-1&&x[z][j];if(!G||!G[1])throw new Error("SYLK shared formula cannot find base");x[v][y][1]=Rk(G[1],{r:v-z,c:y-j})}break;case"F":var W=0;for(E=1;E<C.length;++E)switch(C[E].charAt(0)){case"X":y=parseInt(C[E].slice(1))-1,++W;break;case"Y":for(v=parseInt(C[E].slice(1))-1,I=x.length;I<=v;++I)x[I]=[];break;case"M":S=parseInt(C[E].slice(1))/20;break;case"F":break;case"G":break;case"P":P=w[parseInt(C[E].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(m=C[E].slice(1).split(" "),I=parseInt(m[0],10);I<=parseInt(m[1],10);++I)S=parseInt(m[2],10),_[I-1]=S===0?{hidden:!0}:{wch:S},Pc(_[I-1]);break;case"C":y=parseInt(C[E].slice(1))-1,_[y]||(_[y]={});break;case"R":v=parseInt(C[E].slice(1))-1,A[v]||(A[v]={}),S>0?(A[v].hpt=S,A[v].hpx=Rd(S)):S===0&&(A[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}W<1&&(P=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}}return A.length>0&&(R["!rows"]=A),_.length>0&&(R["!cols"]=_),p&&p.sheetRows&&(x=x.slice(0,p.sheetRows)),[x,R]}function a(h,p){var g=s(h,p),v=g[0],y=g[1],b=Wc(v,p);return Ua(y).forEach(function(E){b[E]=y[E]}),b}function o(h,p){return Eo(a(h,p),p)}function l(h,p,g,v){var y="C;Y"+(g+1)+";X"+(v+1)+";K";switch(h.t){case"n":y+=h.v||0,h.f&&!h.F&&(y+=";E"+cre(h.f,{r:g,c:v}));break;case"b":y+=h.v?"TRUE":"FALSE";break;case"e":y+=h.w||h.v;break;case"d":y+='"'+(h.w||h.v)+'"';break;case"s":y+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function c(h,p){p.forEach(function(g,v){var y="F;W"+(v+1)+" "+(v+1)+" ";g.hidden?y+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Ih(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=kh(g.wpx)),typeof g.wch=="number"&&(y+=Math.round(g.wch))),y.charAt(y.length-1)!=" "&&h.push(y)})}function u(h,p){p.forEach(function(g,v){var y="F;";g.hidden?y+="M0;":g.hpt?y+="M"+20*g.hpt+";":g.hpx&&(y+="M"+20*kk(g.hpx)+";"),y.length>2&&h.push(y+"R"+(v+1))})}function f(h,p){var g=["ID;PWXL;N;E"],v=[],y=Gr(h["!ref"]),b,E=Array.isArray(h),x=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&c(g,h["!cols"]),h["!rows"]&&u(g,h["!rows"]),g.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var w=y.s.r;w<=y.e.r;++w)for(var P=y.s.c;P<=y.e.c;++P){var R=Mt({r:w,c:P});b=E?(h[w]||[])[P]:h[R],!(!b||b.v==null&&(!b.f||b.F))&&v.push(l(b,h,w,P))}return g.join(x)+x+v.join(x)+x+"E"+x}return{to_workbook:o,to_sheet:a,from_sheet:f}}(),Aee=function(){function t(i,a){switch(a.type){case"base64":return e(Rs(i),a);case"binary":return e(i,a);case"buffer":return e(Zt&&Buffer.isBuffer(i)?i.toString("binary"):yl(i),a);case"array":return e(il(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,u=0,f=[];u!==o.length;++u){if(o[u].trim()==="BOT"){f[++l]=[],c=0;continue}if(!(l<0)){var h=o[u].trim().split(","),p=h[0],g=h[1];++u;for(var v=o[u]||"";(v.match(/["]/g)||[]).length&1&&u<o.length-1;)v+=`
`+o[++u];switch(v=v.trim(),+p){case-1:if(v==="BOT"){f[++l]=[],c=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[l][c]=!0:v==="FALSE"?f[l][c]=!1:isNaN(fa(g))?isNaN(Dc(g).getDate())?f[l][c]=g:f[l][c]=vn(g):f[l][c]=fa(g),++c;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[l][c++]=v!==""?v:null;break}if(v==="EOD")break}}return a&&a.sheetRows&&(f=f.slice(0,a.sheetRows)),f}function r(i,a){return Wc(t(i,a),a)}function n(i,a){return Eo(r(i,a),a)}var s=function(){var i=function(l,c,u,f,h){l.push(c),l.push(u+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},a=function(l,c,u,f){l.push(c+","+u),l.push(c==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var c=[],u=Gr(l["!ref"]),f,h=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,u.e.r-u.s.r+1,""),i(c,"TUPLES",0,u.e.c-u.s.c+1,""),i(c,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){a(c,-1,0,"BOT");for(var g=u.s.c;g<=u.e.c;++g){var v=Mt({r:p,c:g});if(f=h?(l[p]||[])[g]:l[v],!f){a(c,1,0,"");continue}switch(f.t){case"n":var y=f.w;!y&&f.v!=null&&(y=f.v),y==null?f.f&&!f.F?a(c,1,0,"="+f.f):a(c,1,0,""):a(c,0,y,"V");break;case"b":a(c,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Ks(f.z||Ut[14],hs(vn(f.v)))),a(c,0,f.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var b=`\r
`,E=c.join(b);return E}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),Tee=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,v=-1,y=0,b=[];y!==p.length;++y){var E=p[y].trim().split(":");if(E[0]==="cell"){var x=us(E[1]);if(b.length<=x.r)for(g=b.length;g<=x.r;++g)b[g]||(b[g]=[]);switch(g=x.r,v=x.c,E[2]){case"t":b[g][v]=t(E[3]);break;case"v":b[g][v]=+E[3];break;case"vtf":var w=E[E.length-1];case"vtc":switch(E[3]){case"nl":b[g][v]=!!+E[4];break;default:b[g][v]=+E[4];break}E[2]=="vtf"&&(b[g][v]=[b[g][v],w])}}}return h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),b}function n(f,h){return Wc(r(f,h),h)}function s(f,h){return Eo(n(f,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,v="",y=Gc(f["!ref"]),b=Array.isArray(f),E=y.s.r;E<=y.e.r;++E)for(var x=y.s.c;x<=y.e.c;++x)if(v=Mt({r:E,c:x}),g=b?(f[E]||[])[x]:f[v],!(!g||g.v==null||g.t==="z")){switch(p=["cell",v,"t"],g.t){case"s":case"str":p.push(e(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=e(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=e(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var w=hs(vn(g.v));p[2]="vtc",p[3]="nd",p[4]=""+w,p[5]=g.w||Ks(g.z||Ut[14],w);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(f){return[i,a,o,a,c(f),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),Dd=function(){function t(u,f,h,p,g){g.raw?f[h][p]=u:u===""||(u==="TRUE"?f[h][p]=!0:u==="FALSE"?f[h][p]=!1:isNaN(fa(u))?isNaN(Dc(u).getDate())?f[h][p]=u:f[h][p]=vn(u):f[h][p]=fa(u))}function e(u,f){var h=f||{},p=[];if(!u||u.length===0)return p;for(var g=u.split(/[\r\n]/),v=g.length-1;v>=0&&g[v].length===0;)--v;for(var y=10,b=0,E=0;E<=v;++E)b=g[E].indexOf(" "),b==-1?b=g[E].length:b++,y=Math.max(y,b);for(E=0;E<=v;++E){p[E]=[];var x=0;for(t(g[E].slice(0,y).trim(),p,E,x,h),x=1;x<=(g[E].length-y)/10+1;++x)t(g[E].slice(y+(x-1)*10,y+x*10).trim(),p,E,x,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var f={},h=!1,p=0,g=0;p<u.length;++p)(g=u.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(v,y){return v[0]-y[0]||n[v[1]]-n[y[1]]}),r[g.pop()[1]]||44}function i(u,f){var h=f||{},p="",g=h.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):h&&h.FS?p=h.FS:p=s(u.slice(0,1024));var y=0,b=0,E=0,x=0,w=0,P=p.charCodeAt(0),R=!1,A=0,_=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var m=h.dateNF!=null?MQ(h.dateNF):null;function S(){var I=u.slice(x,w),k={};if(I.charAt(0)=='"'&&I.charAt(I.length-1)=='"'&&(I=I.slice(1,-1).replace(/""/g,'"')),I.length===0)k.t="z";else if(h.raw)k.t="s",k.v=I;else if(I.trim().length===0)k.t="s",k.v=I;else if(I.charCodeAt(0)==61)I.charCodeAt(1)==34&&I.charCodeAt(I.length-1)==34?(k.t="s",k.v=I.slice(2,-1).replace(/""/g,'"')):dre(I)?(k.t="n",k.f=I.slice(1)):(k.t="s",k.v=I);else if(I=="TRUE")k.t="b",k.v=!0;else if(I=="FALSE")k.t="b",k.v=!1;else if(!isNaN(E=fa(I)))k.t="n",h.cellText!==!1&&(k.w=I),k.v=E;else if(!isNaN(Dc(I).getDate())||m&&I.match(m)){k.z=h.dateNF||Ut[14];var C=0;m&&I.match(m)&&(I=LQ(I,h.dateNF,I.match(m)||[]),C=1),h.cellDates?(k.t="d",k.v=vn(I,C)):(k.t="n",k.v=hs(vn(I,C))),h.cellText!==!1&&(k.w=Ks(k.z,k.v instanceof Date?hs(k.v):k.v)),h.cellNF||delete k.z}else k.t="s",k.v=I;if(k.t=="z"||(h.dense?(g[y]||(g[y]=[]),g[y][b]=k):g[Mt({c:b,r:y})]=k),x=w+1,_=u.charCodeAt(x),v.e.c<b&&(v.e.c=b),v.e.r<y&&(v.e.r=y),A==P)++b;else if(b=0,++y,h.sheetRows&&h.sheetRows<=y)return!0}e:for(;w<u.length;++w)switch(A=u.charCodeAt(w)){case 34:_===34&&(R=!R);break;case P:case 10:case 13:if(!R&&S())break e;break}return w-x>0&&S(),g["!ref"]=nr(v),g}function a(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,f):Wc(e(u,f),f)}function o(u,f){var h="",p=f.type=="string"?[0,0,0,0]:kx(u,f);switch(f.type){case"base64":h=Rs(u);break;case"binary":h=u;break;case"buffer":f.codepage==65001?h=u.toString("utf8"):f.codepage&&typeof wd<"u"||(h=Zt&&Buffer.isBuffer(u)?u.toString("binary"):yl(u));break;case"array":h=il(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Ar(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ar(h):f.type=="binary"&&typeof wd<"u",h.slice(0,19)=="socialcalc:version:"?Tee.to_sheet(f.type=="string"?h:Ar(h),f):a(h,f)}function l(u,f){return Eo(o(u,f),f)}function c(u){for(var f=[],h=Gr(u["!ref"]),p,g=Array.isArray(u),v=h.s.r;v<=h.e.r;++v){for(var y=[],b=h.s.c;b<=h.e.c;++b){var E=Mt({r:v,c:b});if(p=g?(u[v]||[])[b]:u[E],!p||p.v==null){y.push("          ");continue}for(var x=(p.w||(Ti(p),p.w)||"").slice(0,10);x.length<10;)x+=" ";y.push(x+(b===0?" ":""))}f.push(y.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function wee(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=See.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Dd.to_workbook(t,e)}}var Qu=function(){function t(H,G,W){if(H){wn(H,H.l||0);for(var ne=W.Enum||z;H.l<H.length;){var de=H.read_shift(2),se=ne[de]||ne[65535],ce=H.read_shift(2),te=H.l+ce,Z=se.f&&se.f(H,ce,W);if(H.l=te,G(Z,se,de))return}}}function e(H,G){switch(G.type){case"base64":return r(oa(Rs(H)),G);case"binary":return r(oa(H),G);case"buffer":case"array":return r(H,G)}throw"Unsupported type "+G.type}function r(H,G){if(!H)return H;var W=G||{},ne=W.dense?[]:{},de="Sheet1",se="",ce=0,te={},Z=[],ye=[],J={s:{r:0,c:0},e:{r:0,c:0}},X=W.sheetRows||0;if(H[2]==0&&(H[3]==8||H[3]==9)&&H.length>=16&&H[14]==5&&H[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(H[2]==2)W.Enum=z,t(H,function(ie,ee,ge){switch(ge){case 0:W.vers=ie,ie>=4096&&(W.qpro=!0);break;case 6:J=ie;break;case 204:ie&&(se=ie);break;case 222:se=ie;break;case 15:case 51:W.qpro||(ie[1].v=ie[1].v.slice(1));case 13:case 14:case 16:ge==14&&(ie[2]&112)==112&&(ie[2]&15)>1&&(ie[2]&15)<15&&(ie[1].z=W.dateNF||Ut[14],W.cellDates&&(ie[1].t="d",ie[1].v=Lp(ie[1].v))),W.qpro&&ie[3]>ce&&(ne["!ref"]=nr(J),te[de]=ne,Z.push(de),ne=W.dense?[]:{},J={s:{r:0,c:0},e:{r:0,c:0}},ce=ie[3],de=se||"Sheet"+(ce+1),se="");var Te=W.dense?(ne[ie[0].r]||[])[ie[0].c]:ne[Mt(ie[0])];if(Te){Te.t=ie[1].t,Te.v=ie[1].v,ie[1].z!=null&&(Te.z=ie[1].z),ie[1].f!=null&&(Te.f=ie[1].f);break}W.dense?(ne[ie[0].r]||(ne[ie[0].r]=[]),ne[ie[0].r][ie[0].c]=ie[1]):ne[Mt(ie[0])]=ie[1];break}},W);else if(H[2]==26||H[2]==14)W.Enum=j,H[2]==14&&(W.qpro=!0,H.l=0),t(H,function(ie,ee,ge){switch(ge){case 204:de=ie;break;case 22:ie[1].v=ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ie[3]>ce&&(ne["!ref"]=nr(J),te[de]=ne,Z.push(de),ne=W.dense?[]:{},J={s:{r:0,c:0},e:{r:0,c:0}},ce=ie[3],de="Sheet"+(ce+1)),X>0&&ie[0].r>=X)break;W.dense?(ne[ie[0].r]||(ne[ie[0].r]=[]),ne[ie[0].r][ie[0].c]=ie[1]):ne[Mt(ie[0])]=ie[1],J.e.c<ie[0].c&&(J.e.c=ie[0].c),J.e.r<ie[0].r&&(J.e.r=ie[0].r);break;case 27:ie[14e3]&&(ye[ie[14e3][0]]=ie[14e3][1]);break;case 1537:ye[ie[0]]=ie[1],ie[0]==ce&&(de=ie[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+H[2]);if(ne["!ref"]=nr(J),te[se||de]=ne,Z.push(se||de),!ye.length)return{SheetNames:Z,Sheets:te};for(var Q={},fe=[],ve=0;ve<ye.length;++ve)te[Z[ve]]?(fe.push(ye[ve]||Z[ve]),Q[ye[ve]]=te[ye[ve]]||te[Z[ve]]):(fe.push(ye[ve]),Q[ye[ve]]={"!ref":"A1"});return{SheetNames:fe,Sheets:Q}}function n(H,G){var W=G||{};if(+W.codepage>=0&&la(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=Hv(),de=Gr(H["!ref"]),se=Array.isArray(H),ce=[];ea(ne,0,i(1030)),ea(ne,6,l(de));for(var te=Math.min(de.e.r,8191),Z=de.s.r;Z<=te;++Z)for(var ye=Nn(Z),J=de.s.c;J<=de.e.c;++J){Z===de.s.r&&(ce[J]=un(J));var X=ce[J]+ye,Q=se?(H[Z]||[])[J]:H[X];if(!(!Q||Q.t=="z"))if(Q.t=="n")(Q.v|0)==Q.v&&Q.v>=-32768&&Q.v<=32767?ea(ne,13,p(Z,J,Q.v)):ea(ne,14,v(Z,J,Q.v));else{var fe=Ti(Q);ea(ne,15,f(Z,J,fe.slice(0,239)))}}return ea(ne,1),ne.end()}function s(H,G){var W=G||{};if(+W.codepage>=0&&la(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=Hv();ea(ne,0,a(H));for(var de=0,se=0;de<H.SheetNames.length;++de)(H.Sheets[H.SheetNames[de]]||{})["!ref"]&&ea(ne,27,L(H.SheetNames[de],se++));var ce=0;for(de=0;de<H.SheetNames.length;++de){var te=H.Sheets[H.SheetNames[de]];if(!(!te||!te["!ref"])){for(var Z=Gr(te["!ref"]),ye=Array.isArray(te),J=[],X=Math.min(Z.e.r,8191),Q=Z.s.r;Q<=X;++Q)for(var fe=Nn(Q),ve=Z.s.c;ve<=Z.e.c;++ve){Q===Z.s.r&&(J[ve]=un(ve));var ie=J[ve]+fe,ee=ye?(te[Q]||[])[ve]:te[ie];if(!(!ee||ee.t=="z"))if(ee.t=="n")ea(ne,23,S(Q,ve,ce,ee.v));else{var ge=Ti(ee);ea(ne,22,A(Q,ve,ce,ge.slice(0,239)))}}++ce}}return ea(ne,1),ne.end()}function i(H){var G=on(2);return G.write_shift(2,H),G}function a(H){var G=on(26);G.write_shift(2,4096),G.write_shift(2,4),G.write_shift(4,0);for(var W=0,ne=0,de=0,se=0;se<H.SheetNames.length;++se){var ce=H.SheetNames[se],te=H.Sheets[ce];if(!(!te||!te["!ref"])){++de;var Z=Gc(te["!ref"]);W<Z.e.r&&(W=Z.e.r),ne<Z.e.c&&(ne=Z.e.c)}}return W>8191&&(W=8191),G.write_shift(2,W),G.write_shift(1,de),G.write_shift(1,ne),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(1,1),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(4,0),G}function o(H,G,W){var ne={s:{c:0,r:0},e:{c:0,r:0}};return G==8&&W.qpro?(ne.s.c=H.read_shift(1),H.l++,ne.s.r=H.read_shift(2),ne.e.c=H.read_shift(1),H.l++,ne.e.r=H.read_shift(2),ne):(ne.s.c=H.read_shift(2),ne.s.r=H.read_shift(2),G==12&&W.qpro&&(H.l+=2),ne.e.c=H.read_shift(2),ne.e.r=H.read_shift(2),G==12&&W.qpro&&(H.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function l(H){var G=on(8);return G.write_shift(2,H.s.c),G.write_shift(2,H.s.r),G.write_shift(2,H.e.c),G.write_shift(2,H.e.r),G}function c(H,G,W){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(ne[0].c=H.read_shift(1),ne[3]=H.read_shift(1),ne[0].r=H.read_shift(2),H.l+=2):(ne[2]=H.read_shift(1),ne[0].c=H.read_shift(2),ne[0].r=H.read_shift(2)),ne}function u(H,G,W){var ne=H.l+G,de=c(H,G,W);if(de[1].t="s",W.vers==20768){H.l++;var se=H.read_shift(1);return de[1].v=H.read_shift(se,"utf8"),de}return W.qpro&&H.l++,de[1].v=H.read_shift(ne-H.l,"cstr"),de}function f(H,G,W){var ne=on(7+W.length);ne.write_shift(1,255),ne.write_shift(2,G),ne.write_shift(2,H),ne.write_shift(1,39);for(var de=0;de<ne.length;++de){var se=W.charCodeAt(de);ne.write_shift(1,se>=128?95:se)}return ne.write_shift(1,0),ne}function h(H,G,W){var ne=c(H,G,W);return ne[1].v=H.read_shift(2,"i"),ne}function p(H,G,W){var ne=on(7);return ne.write_shift(1,255),ne.write_shift(2,G),ne.write_shift(2,H),ne.write_shift(2,W,"i"),ne}function g(H,G,W){var ne=c(H,G,W);return ne[1].v=H.read_shift(8,"f"),ne}function v(H,G,W){var ne=on(13);return ne.write_shift(1,255),ne.write_shift(2,G),ne.write_shift(2,H),ne.write_shift(8,W,"f"),ne}function y(H,G,W){var ne=H.l+G,de=c(H,G,W);if(de[1].v=H.read_shift(8,"f"),W.qpro)H.l=ne;else{var se=H.read_shift(2);w(H.slice(H.l,H.l+se),de),H.l+=se}return de}function b(H,G,W){var ne=G&32768;return G&=-32769,G=(ne?H:0)+(G>=8192?G-16384:G),(ne?"":"$")+(W?un(G):Nn(G))}var E={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},x=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(H,G){wn(H,0);for(var W=[],ne=0,de="",se="",ce="",te="";H.l<H.length;){var Z=H[H.l++];switch(Z){case 0:W.push(H.read_shift(8,"f"));break;case 1:se=b(G[0].c,H.read_shift(2),!0),de=b(G[0].r,H.read_shift(2),!1),W.push(se+de);break;case 2:{var ye=b(G[0].c,H.read_shift(2),!0),J=b(G[0].r,H.read_shift(2),!1);se=b(G[0].c,H.read_shift(2),!0),de=b(G[0].r,H.read_shift(2),!1),W.push(ye+J+":"+se+de)}break;case 3:if(H.l<H.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(H.read_shift(2));break;case 6:{for(var X="";Z=H[H.l++];)X+=String.fromCharCode(Z);W.push('"'+X.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:te=W.pop(),ce=W.pop(),W.push(["AND","OR"][Z-20]+"("+ce+","+te+")");break;default:if(Z<32&&x[Z])te=W.pop(),ce=W.pop(),W.push(ce+x[Z]+te);else if(E[Z]){if(ne=E[Z][1],ne==69&&(ne=H[H.l++]),ne>W.length){console.error("WK1 bad formula parse 0x"+Z.toString(16)+":|"+W.join("|")+"|");return}var Q=W.slice(-ne);W.length-=ne,W.push(E[Z][0]+"("+Q.join(",")+")")}else return Z<=7?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=24?console.error("WK1 unsupported op "+Z.toString(16)):Z<=30?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=115?console.error("WK1 unsupported function opcode "+Z.toString(16)):console.error("WK1 unrecognized opcode "+Z.toString(16))}}W.length==1?G[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function P(H){var G=[{c:0,r:0},{t:"n",v:0},0];return G[0].r=H.read_shift(2),G[3]=H[H.l++],G[0].c=H[H.l++],G}function R(H,G){var W=P(H);return W[1].t="s",W[1].v=H.read_shift(G-4,"cstr"),W}function A(H,G,W,ne){var de=on(6+ne.length);de.write_shift(2,H),de.write_shift(1,W),de.write_shift(1,G),de.write_shift(1,39);for(var se=0;se<ne.length;++se){var ce=ne.charCodeAt(se);de.write_shift(1,ce>=128?95:ce)}return de.write_shift(1,0),de}function _(H,G){var W=P(H);W[1].v=H.read_shift(2);var ne=W[1].v>>1;if(W[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return W[1].v=ne,W}function m(H,G){var W=P(H),ne=H.read_shift(4),de=H.read_shift(4),se=H.read_shift(2);if(se==65535)return ne===0&&de===3221225472?(W[1].t="e",W[1].v=15):ne===0&&de===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var ce=se&32768;return se=(se&32767)-16446,W[1].v=(1-ce*2)*(de*Math.pow(2,se+32)+ne*Math.pow(2,se)),W}function S(H,G,W,ne){var de=on(14);if(de.write_shift(2,H),de.write_shift(1,W),de.write_shift(1,G),ne==0)return de.write_shift(4,0),de.write_shift(4,0),de.write_shift(2,65535),de;var se=0,ce=0,te=0,Z=0;return ne<0&&(se=1,ne=-ne),ce=Math.log2(ne)|0,ne/=Math.pow(2,ce-31),Z=ne>>>0,Z&2147483648||(ne/=2,++ce,Z=ne>>>0),ne-=Z,Z|=2147483648,Z>>>=0,ne*=Math.pow(2,32),te=ne>>>0,de.write_shift(4,te),de.write_shift(4,Z),ce+=16383+(se?32768:0),de.write_shift(2,ce),de}function I(H,G){var W=m(H);return H.l+=G-14,W}function k(H,G){var W=P(H),ne=H.read_shift(4);return W[1].v=ne>>6,W}function C(H,G){var W=P(H),ne=H.read_shift(8,"f");return W[1].v=ne,W}function O(H,G){var W=C(H);return H.l+=G-10,W}function D(H,G){return H[H.l+G-1]==0?H.read_shift(G,"cstr"):""}function F(H,G){var W=H[H.l++];W>G-1&&(W=G-1);for(var ne="";ne.length<W;)ne+=String.fromCharCode(H[H.l++]);return ne}function N(H,G,W){if(!(!W.qpro||G<21)){var ne=H.read_shift(1);H.l+=17,H.l+=1,H.l+=2;var de=H.read_shift(G-21,"cstr");return[ne,de]}}function M(H,G){for(var W={},ne=H.l+G;H.l<ne;){var de=H.read_shift(2);if(de==14e3){for(W[de]=[0,""],W[de][0]=H.read_shift(2);H[H.l];)W[de][1]+=String.fromCharCode(H[H.l]),H.l++;H.l++}}return W}function L(H,G){var W=on(5+H.length);W.write_shift(2,14e3),W.write_shift(2,G);for(var ne=0;ne<H.length;++ne){var de=H.charCodeAt(ne);W[W.l++]=de>127?95:de}return W[W.l++]=0,W}var z={0:{n:"BOF",f:en},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:D},222:{n:"SHEETNAMELP",f:F},65535:{n:""}},j={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:R},23:{n:"NUMBER17",f:m},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:I},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:M},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:C},40:{n:"FORMULA28",f:O},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:D},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:N},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function Cee(t){var e={},r=t.match(ts),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=It(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=ax[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var Iee=function(){var t=Id("t"),e=Id("rPr");function r(i){var a=i.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:ar(a[1])},l=i.match(e);return l&&(o.s=Cee(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),kee=function(){var e=/(\r\n|\n)/g;function r(s,i,a){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),a.push("</b>")),s.i&&(i.push("<i>"),a.push("</i>")),s.strike&&(i.push("<s>"),a.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),Dee=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Pee=/<(?:\w+:)?r>/,Ree=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function bx(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=ar(Ar(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ar(t),r&&(n.h=fx(n.t))):t.match(Pee)&&(n.r=Ar(t),n.t=ar(Ar((t.replace(Ree,"").match(Dee)||[]).join("").replace(ts,""))),r&&(n.h=kee(Iee(n.r)))),n):{t:""}}var Fee=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Nee=/<(?:\w+:)?(?:si|sstItem)>/g,Oee=/<\/(?:\w+:)?(?:si|sstItem)>/;function Mee(t,e){var r=[],n="";if(!t)return r;var s=t.match(Fee);if(s){n=s[2].replace(Nee,"").split(Oee);for(var i=0;i!=n.length;++i){var a=bx(n[i].trim(),e);a!=null&&(r[r.length]=a)}s=It(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function Lee(t){return[t.read_shift(4),t.read_shift(4)]}function Bee(t,e){var r=[],n=!1;return ki(t,function(i,a,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Sk(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function hi(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function Uee(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=hi(t,4),e.U=hi(t,4),e.W=hi(t,4),e}function $ee(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function Vee(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push($ee(t));return e}function Hee(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function jee(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=hi(t,4),e.U=hi(t,4),e.W=hi(t,4),e}function Gee(t){var e=jee(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function Ak(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Tk(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function Wee(t){var e=hi(t);switch(e.Minor){case 2:return[e.Minor,zee(t)];case 3:return[e.Minor,Kee()];case 4:return[e.Minor,qee(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function zee(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=Ak(t,r),s=Tk(t,t.length-t.l);return{t:"Std",h:n,v:s}}function Kee(){throw new Error("File is password-protected: ECMA-376 Extensible")}function qee(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(ts,function(i){var a=It(i);switch(Ha(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function Xee(t,e){var r={},n=r.EncryptionVersionInfo=hi(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=Ak(t,s),e-=s,r.EncryptionVerifier=Tk(t,e),r}function Yee(t){var e={},r=e.EncryptionVersionInfo=hi(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function Qee(t){var e=0,r,n=Sk(t),s=n.length+1,i,a,o,l,c;for(r=po(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var wk=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},s=function(a,o){return n(a^o)},i=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],f=0;f!=7;++f)u&64&&(o^=r[l]),u*=2,--l;return o};return function(a){for(var o=Sk(a),l=i(o),c=o.length,u=po(16),f=0;f!=16;++f)u[f]=0;var h,p,g;for((c&1)===1&&(h=l>>8,u[c]=s(t[0],h),--c,h=l&255,p=o[o.length-1],u[c]=s(p,h));c>0;)--c,h=l>>8,u[c]=s(o[c],h),--c,h=l&255,u[c]=s(o[c],h);for(c=15,g=15-o.length;g>0;)h=l>>8,u[c]=s(t[g],h),--c,--g,h=l&255,u[c]=s(o[c],h),--c,--g;return u}}(),Jee=function(t,e,r,n,s){s||(s=e),n||(n=wk(t));var i,a;for(i=0;i!=e.length;++i)a=e[i],a^=n[r],a=(a>>5|a<<3)&255,s[i]=a,++r;return[s,r,n]},Zee=function(t){var e=0,r=wk(t);return function(n){var s=Jee("",n,e,r);return e=s[1],s[0]}};function ete(t,e,r,n){var s={key:en(t),verificationBytes:en(t)};return r.password&&(s.verifier=Qee(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=Zee(r.password)),s}function tte(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=Yee(t):n.Data=Xee(t,e),n}function rte(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?tte(t,e-2,n):ete(t,r.biff>=8?e:e-2,r,n),n}var nte=function(){function t(s,i){switch(i.type){case"base64":return e(Rs(s),i);case"binary":return e(s,i);case"buffer":return e(Zt&&Buffer.isBuffer(s)?s.toString("binary"):yl(s),i);case"array":return e(il(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,g,v=-1;g=h.exec(u);){switch(g[0]){case"\\cell":var y=u.slice(p,h.lastIndex-g[0].length);if(y[0]==" "&&(y=y.slice(1)),++v,y.length){var b={v:y,t:"s"};Array.isArray(o)?o[f][v]=b:o[Mt({r:f,c:v})]=b}break}p=h.lastIndex}v>c.e.c&&(c.e.c=v)}),o["!ref"]=nr(c),o}function r(s,i){return Eo(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Gr(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var u=a.s.c;u<=a.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=a.s.c;u<=a.e.c;++u){var f=Mt({r:c,c:u});o=l?(s[c]||[])[u]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Ti(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function ste(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Pd(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function ate(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),a=s-i;if(a===0)return[0,0,e];var o=0,l=0,c=s+i;switch(l=a/(c>1?2-c:c),s){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function ite(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,a=[i,i,i],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,a[0]+=s,a[1]+=l;break;case 1:l=s*(2-o),a[0]+=l,a[1]+=s;break;case 2:l=s*(o-2),a[1]+=s,a[2]+=l;break;case 3:l=s*(4-o),a[1]+=l,a[2]+=s;break;case 4:l=s*(o-4),a[2]+=s,a[0]+=l;break;case 5:l=s*(6-o),a[2]+=l,a[0]+=s;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function Ch(t,e){if(e===0)return t;var r=ate(ste(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),Pd(ite(r))}var Ck=6,ote=15,lte=1,cs=Ck;function Ih(t){return Math.floor((t+Math.round(128/cs)/256)*cs)}function kh(t){return Math.floor((t-5)/cs*100+.5)/100}function zv(t){return Math.round((t*cs+5)/cs*256)/256}function vg(t){return zv(kh(Ih(t)))}function Sx(t){var e=Math.abs(t-vg(t)),r=cs;if(e>.005)for(cs=lte;cs<ote;++cs)Math.abs(t-vg(t))<=e&&(e=Math.abs(t-vg(t)),r=cs);cs=r}function Pc(t){t.width?(t.wpx=Ih(t.width),t.wch=kh(t.wpx),t.MDW=cs):t.wpx?(t.wch=kh(t.wpx),t.width=zv(t.wch),t.MDW=cs):typeof t.wch=="number"&&(t.width=zv(t.wch),t.wpx=Ih(t.width),t.MDW=cs),t.customWidth&&delete t.customWidth}var cte=96,Ik=cte;function kk(t){return t*96/Ik}function Rd(t){return t*Ik/96}var ute={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function dte(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(ts)||[]).forEach(function(a){var o=It(a);switch(Ha(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Dr(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Dr(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function fte(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(ts)||[]).forEach(function(a){var o=It(a);switch(Ha(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function hte(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(ts)||[]).forEach(function(a){var o=It(a);switch(Ha(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=Ar(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Dr(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Dr(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Dr(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Dr(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Dr(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Dr(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Dr(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=ax[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Dr(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=zo[s.color.index];s.color.index==81&&(l=zo[1]),l||(l=zo[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Ch(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function pte(t,e,r){e.NumberFmt=[];for(var n=Ua(Ut),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Ut[n[s]];var i=t[0].match(ts);if(i)for(s=0;s<i.length;++s){var a=It(i[s]);switch(Ha(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=ar(Ar(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Wo(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var e0=["numFmtId","fillId","fontId","borderId","xfId"],t0=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function mte(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(ts)||[]).forEach(function(i){var a=It(i),o=0;switch(Ha(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<e0.length;++o)n[e0[o]]&&(n[e0[o]]=parseInt(n[e0[o]],10));for(o=0;o<t0.length;++o)n[t0[o]]&&(n[t0[o]]=Dr(n[t0[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=Dr(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var gte=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(e))&&pte(f,u,c),(f=o.match(s))&&hte(f,u,l,c),(f=o.match(n))&&fte(f,u,l,c),(f=o.match(i))&&dte(f,u,l,c),(f=o.match(r))&&mte(f,u,c),u}}();function vte(t,e){var r=t.read_shift(2),n=Jn(t);return[r,n]}function yte(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=IJ(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=CJ(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Jn(t),n}var xte=es;function Ete(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}var _te=es;function bte(t,e,r){var n={};n.NumberFmt=[];for(var s in Ut)n.NumberFmt[s]=Ut[s];n.CellXf=[],n.Fonts=[];var i=[],a=!1;return ki(t,function(l,c,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],Wo(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=Ch(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:i.push(u),a=!0;break;case 38:i.pop(),a=!1;break;default:if(c.T>0)i.push(u);else if(c.T<0)i.pop();else if(!a||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}var Ste=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Ate(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(ts)||[]).forEach(function(s){var i=It(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[Ste.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function Tte(){}function wte(){}var Cte=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Ite=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,kte=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Dte(t,e,r){e.themeElements={};var n;[["clrScheme",Cte,Ate],["fontScheme",Ite,Tte],["fmtScheme",kte,wte]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var Pte=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Dk(t,e){(!t||t.length===0)&&(t=Rte());var r,n={};if(!(r=t.match(Pte)))throw new Error("themeElements not found in theme");return Dte(r[0],n,e),n.raw=t,n}function Rte(t,e){var r=[VI];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Fte(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var a;try{a=$I(i,{type:"array"})}catch{return}var o=Cs(a,"theme/theme/theme1.xml",!0);if(o)return Dk(o,r)}}function Nte(t){return t.read_shift(4)}function Ote(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Mte(t,4);break;case 2:e.xclrValue=gk(t);break;case 3:e.xclrValue=Nte(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Mte(t,e){return es(t,e)}function Lte(t,e){return es(t,e)}function Bte(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Ote(t);break;case 6:n[1]=Lte(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function Ute(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(Bte(t,r-t.l));return{ixfe:n,ext:i}}function $te(t,e){e.forEach(function(r){switch(r[0]){}})}function Vte(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Jn(t)}}function Hte(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function jte(t){return t.l+=4,t.read_shift(4)!=0}function Gte(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],a=!1,o=2;return ki(t,function(l,c,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:i.push(u),a=!0;break;case 36:i.pop(),a=!1;break;default:if(!c.T){if(!a||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function Wte(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,a;return t.replace(ts,function(o){var l=It(o);switch(Ha(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function zte(t){var e=[];if(!t)return e;var r=1;return(t.match(ts)||[]).forEach(function(n){var s=It(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function Kte(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Mt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function qte(t,e,r){var n=[];return ki(t,function(i,a,o){switch(o){case 63:n.push(i);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Xte(t,e,r,n){if(!t)return t;var s=n||{},i=!1;ki(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function Yte(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function xS(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(a){var o=us(a.ref);if(s?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[a.ref],!i){i={t:"z"},s?t[o.r][o.c]=i:t[a.ref]=i;var l=Gr(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=nr(l);c!==t["!ref"]&&(t["!ref"]=c)}i.c||(i.c=[]);var u={a:a.author,t:a.t,r:a.r,T:r};a.h&&(u.h=a.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(u.a==n[f].id){u.a=n[f].name||u.a;break}}i.c.push(u)})}function Qte(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=It(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=us(l.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var f=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&bx(f[1])||{r:"",t:"",h:""};c.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),c.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=h.h),n.push(c)}}}}),n}function Jte(t,e){var r=[],n=!1,s={},i=0;return t.replace(ts,function(o,l){var c=It(o);switch(Ha(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=l+o.length;break;case"</text>":s.t=t.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function Zte(t,e){var r=[],n=!1;return t.replace(ts,function(i){var a=It(i);switch(Ha(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return i}),r}function ere(t){var e={};e.iauthor=t.read_shift(4);var r=El(t);return e.rfx=r.s,e.ref=Mt(r.s),t.l+=16,e}var tre=Jn;function rre(t,e){var r=[],n=[],s={},i=!1;return ki(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}var nre="application/vnd.ms-office.vbaProject";function sre(t){var e=rr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");rr.utils.cfb_add(e,s,t.FileIndex[n].content)}}),rr.write(e)}function are(){return{"!type":"dialog"}}function ire(){return{"!type":"dialog"}}function ore(){return{"!type":"macro"}}function lre(){return{"!type":"macro"}}var hc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=e.c:--u,l?c+=e.r:--c,s+(o?"":"$")+un(u)+(l?"":"$")+Nn(c)}return function(s,i){return e=i,s.replace(t,r)}}(),Pk=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,cre=function(){return function(e,r){return e.replace(Pk,function(n,s,i,a,o,l){var c=gx(a)-(i?0:r.c),u=mx(l)-(o?0:r.r),f=u==0?"":o?u+1:"["+u+"]",h=c==0?"":i?c+1:"["+c+"]";return s+"R"+f+"C"+h})}}();function Rk(t,e){return t.replace(Pk,function(r,n,s,i,a,o){return n+(s=="$"?s+i:un(gx(i)+e.c))+(a=="$"?a+o:Nn(mx(o)+e.r))})}function ure(t,e,r){var n=Gc(e),s=n.s,i=us(r),a={r:i.r-s.r,c:i.c-s.c};return Rk(t,a)}function dre(t){return t.length!=1}function ES(t){return t.replace(/_xlfn\./g,"")}function Yr(t){t.l+=1}function mo(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Fk(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Nk(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=mo(t),o=mo(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function Nk(t){var e=mo(t),r=mo(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function fre(t,e,r){if(r.biff<8)return Nk(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=mo(t),a=mo(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function Ok(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return hre(t);var n=t.read_shift(r&&r.biff==12?4:2),s=mo(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function hre(t){var e=mo(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function pre(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function mre(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return gre(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function gre(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function vre(t,e,r){var n=(t[t.l++]&96)>>5,s=Fk(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function yre(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=Fk(t,i,r);return[n,s,a]}function xre(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Ere(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function _re(t,e,r){var n=(t[t.l++]&96)>>5,s=fre(t,e-1,r);return[n,s]}function bre(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function _S(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function Sre(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function Are(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Tre(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function wre(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Cre(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Mk(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function Ire(t){return t.read_shift(2),Mk(t)}function kre(t){return t.read_shift(2),Mk(t)}function Dre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=Ok(t,0,r);return[n,s]}function Pre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=mre(t,0,r);return[n,s]}function Rre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=Ok(t,0,r);return[n,s,i]}function Fre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[Nne[s],Uk[s],n]}function Nre(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:Ore(t);return[s,(i[0]===0?Uk:Fne)[i[1]]]}function Ore(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Mre(t,e,r){t.l+=r&&r.biff==2?3:4}function Lre(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Bre(t){return t.l++,_l[t.read_shift(1)]}function Ure(t){return t.l++,t.read_shift(2)}function $re(t){return t.l++,t.read_shift(1)!==0}function Vre(t){return t.l++,zn(t)}function Hre(t,e,r){return t.l++,of(t,e-1,r)}function jre(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=zr(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=_l[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=zn(t);break;case 2:r[1]=bl(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Gre(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?El:Bp)(t));return s}function Wre(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=jre(t,r.biff);return a}function zre(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function Kre(t,e,r){if(r.biff==5)return qre(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function qre(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Xre(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Yre(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Qre(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Jre(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var Zre=es,ene=es,tne=es;function cf(t,e,r){return t.l+=2,[pre(t)]}function Ax(t){return t.l+=6,[]}var rne=cf,nne=Ax,sne=Ax,ane=cf;function Lk(t){return t.l+=2,[en(t),t.read_shift(2)&1]}var ine=cf,one=Lk,lne=Ax,cne=cf,une=cf,dne=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function fne(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=dne[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function hne(t){return t.l+=2,[t.read_shift(4)]}function pne(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function mne(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function gne(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function vne(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function yne(t){return t.l+=4,[0,0]}var bS={1:{n:"PtgExp",f:Lre},2:{n:"PtgTbl",f:tne},3:{n:"PtgAdd",f:Yr},4:{n:"PtgSub",f:Yr},5:{n:"PtgMul",f:Yr},6:{n:"PtgDiv",f:Yr},7:{n:"PtgPower",f:Yr},8:{n:"PtgConcat",f:Yr},9:{n:"PtgLt",f:Yr},10:{n:"PtgLe",f:Yr},11:{n:"PtgEq",f:Yr},12:{n:"PtgGe",f:Yr},13:{n:"PtgGt",f:Yr},14:{n:"PtgNe",f:Yr},15:{n:"PtgIsect",f:Yr},16:{n:"PtgUnion",f:Yr},17:{n:"PtgRange",f:Yr},18:{n:"PtgUplus",f:Yr},19:{n:"PtgUminus",f:Yr},20:{n:"PtgPercent",f:Yr},21:{n:"PtgParen",f:Yr},22:{n:"PtgMissArg",f:Yr},23:{n:"PtgStr",f:Hre},26:{n:"PtgSheet",f:pne},27:{n:"PtgEndSheet",f:mne},28:{n:"PtgErr",f:Bre},29:{n:"PtgBool",f:$re},30:{n:"PtgInt",f:Ure},31:{n:"PtgNum",f:Vre},32:{n:"PtgArray",f:bre},33:{n:"PtgFunc",f:Fre},34:{n:"PtgFuncVar",f:Nre},35:{n:"PtgName",f:zre},36:{n:"PtgRef",f:Dre},37:{n:"PtgArea",f:vre},38:{n:"PtgMemArea",f:Xre},39:{n:"PtgMemErr",f:Zre},40:{n:"PtgMemNoMem",f:ene},41:{n:"PtgMemFunc",f:Yre},42:{n:"PtgRefErr",f:Qre},43:{n:"PtgAreaErr",f:xre},44:{n:"PtgRefN",f:Pre},45:{n:"PtgAreaN",f:_re},46:{n:"PtgMemAreaN",f:gne},47:{n:"PtgMemNoMemN",f:vne},57:{n:"PtgNameX",f:Kre},58:{n:"PtgRef3d",f:Rre},59:{n:"PtgArea3d",f:yre},60:{n:"PtgRefErr3d",f:Jre},61:{n:"PtgAreaErr3d",f:Ere},255:{}},xne={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ene={1:{n:"PtgElfLel",f:Lk},2:{n:"PtgElfRw",f:cne},3:{n:"PtgElfCol",f:rne},6:{n:"PtgElfRwV",f:une},7:{n:"PtgElfColV",f:ane},10:{n:"PtgElfRadical",f:ine},11:{n:"PtgElfRadicalS",f:lne},13:{n:"PtgElfColS",f:nne},15:{n:"PtgElfColSV",f:sne},16:{n:"PtgElfRadicalLel",f:one},25:{n:"PtgList",f:fne},29:{n:"PtgSxName",f:hne},255:{}},_ne={0:{n:"PtgAttrNoop",f:yne},1:{n:"PtgAttrSemi",f:Cre},2:{n:"PtgAttrIf",f:Tre},4:{n:"PtgAttrChoose",f:Sre},8:{n:"PtgAttrGoto",f:Are},16:{n:"PtgAttrSum",f:Mre},32:{n:"PtgAttrBaxcel",f:_S},33:{n:"PtgAttrBaxcel",f:_S},64:{n:"PtgAttrSpace",f:Ire},65:{n:"PtgAttrSpaceSemi",f:kre},128:{n:"PtgAttrIfError",f:wre},255:{}};function uf(t,e,r,n){if(n.biff<8)return es(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=Wre(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=Gre(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(es(t,e)),i}function df(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=bS[i]||bS[xne[i]],(i===24||i===25)&&(s=(i===24?Ene:_ne)[t[t.l+1]]),!s||!s.f?es(t,e):a.push([s.n,s.f(t,e,r)]);return a}function bne(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var Sne={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Ane(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Bk(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function SS(t,e,r){var n=Bk(t,e,r);return n=="#REF"?n:Ane(n,r)}function jn(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,u,f=0,h=0,p,g="";if(!t[0]||!t[0][0])return"";for(var v=-1,y="",b=0,E=t[0].length;b<E;++b){var x=t[0][b];switch(x[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),v>=0){switch(t[0][v][1][0]){case 0:y=Vr(" ",t[0][v][1][1]);break;case 1:y=Vr("\r",t[0][v][1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][v][1][0])}c=c+y,v=-1}o.push(c+Sne[x[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Ku(x[1][1],a,s),o.push(qu(u,i));break;case"PtgRefN":u=r?Ku(x[1][1],r,s):x[1][1],o.push(qu(u,i));break;case"PtgRef3d":f=x[1][1],u=Ku(x[1][2],a,s),g=SS(n,f,s),o.push(g+"!"+qu(u,i));break;case"PtgFunc":case"PtgFuncVar":var w=x[1][0],P=x[1][1];w||(w=0),w&=127;var R=w==0?[]:o.slice(-w);o.length-=w,P==="User"&&(P=R.shift()),o.push(P+"("+R.join(",")+")");break;case"PtgBool":o.push(x[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(x[1]);break;case"PtgNum":o.push(String(x[1]));break;case"PtgStr":o.push('"'+x[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(x[1]);break;case"PtgAreaN":p=nS(x[1][1],r?{s:r}:a,s),o.push(mg(p,s));break;case"PtgArea":p=nS(x[1][1],a,s),o.push(mg(p,s));break;case"PtgArea3d":f=x[1][1],p=x[1][2],g=SS(n,f,s),o.push(g+"!"+mg(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=x[1][2];var A=(n.names||[])[h-1]||(n[0]||[])[h],_=A?A.Name:"SH33TJSNAME"+String(h);_&&_.slice(0,6)=="_xlfn."&&!s.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var m=x[1][1];h=x[1][2];var S;if(s.biff<=5)m<0&&(m=-m),n[m]&&(S=n[m][h]);else{var I="";if(((n[m]||[])[0]||[])[0]==14849||(((n[m]||[])[0]||[])[0]==1025?n[m][h]&&n[m][h].itab>0&&(I=n.SheetNames[n[m][h].itab-1]+"!"):I=n.SheetNames[h-1]+"!"),n[m]&&n[m][h])I+=n[m][h].Name;else if(n[0]&&n[0][h])I+=n[0][h].Name;else{var k=(Bk(n,m,s)||"").split(";;");k[h-1]?I=k[h-1]:I+="SH33TJSERRX"}o.push(I);break}S||(S={Name:"SH33TJSERRY"}),o.push(S.Name);break;case"PtgParen":var C="(",O=")";if(v>=0){switch(y="",t[0][v][1][0]){case 2:C=Vr(" ",t[0][v][1][1])+C;break;case 3:C=Vr("\r",t[0][v][1][1])+C;break;case 4:O=Vr(" ",t[0][v][1][1])+O;break;case 5:O=Vr("\r",t[0][v][1][1])+O;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][v][1][0])}v=-1}o.push(C+o.pop()+O);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:x[1][1],r:x[1][0]};var D={c:r.c,r:r.r};if(n.sharedf[Mt(u)]){var F=n.sharedf[Mt(u)];o.push(jn(F,a,D,n,s))}else{var N=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(jn(c[1],a,D,n,s)),N=!0;break}N||o.push(x[1])}break;case"PtgArray":o.push("{"+bne(x[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+x[1].idx+"[#"+x[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(x));default:throw new Error("Unrecognized Formula Token: "+String(x))}var M=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&M.indexOf(t[0][b][0])==-1){x=t[0][v];var L=!0;switch(x[1][0]){case 4:L=!1;case 0:y=Vr(" ",x[1][1]);break;case 5:L=!1;case 1:y=Vr("\r",x[1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+x[1][0])}o.push((L?y:"")+o.pop()+(L?"":y)),v=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function Tne(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],es(t,e-2)];var o=df(t,a,r);return e!==a+s&&(i=uf(t,e-a-s,o,r)),t.l=n,[o,i]}function wne(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],es(t,e-2)];var o=df(t,a,r);return e!==a+s&&(i=uf(t,e-a-s,o,r)),t.l=n,[o,i]}function Cne(t,e,r,n){var s=t.l+e,i=df(t,n,r),a;return s!==t.l&&(a=uf(t,s-t.l,i,r)),[i,a]}function Ine(t,e,r){var n=t.l+e,s,i=t.read_shift(2),a=df(t,i,r);return i==65535?[[],es(t,e-2)]:(e!==i+2&&(s=uf(t,n-i-2,a,r)),[a,s])}function kne(t){var e;if(ci(t,t.l+6)!==65535)return[zn(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function yg(t,e,r){var n=t.l+e,s=ja(t);r.biff==2&&++t.l;var i=kne(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=wne(t,n-t.l,r);return{cell:s,val:i[0],formula:o,shared:a>>3&1,tt:i[1]}}function Up(t,e,r){var n=t.read_shift(4),s=df(t,n,r),i=t.read_shift(4),a=i>0?uf(t,i,s,r):null;return[s,a]}var Dne=Up,$p=Up,Pne=Up,Rne=Up,Fne={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Uk={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Nne={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function AS(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function xg(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var Ju={},pc={};function Zu(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function $k(t,e,r,n,s,i){try{n.cellNF&&(t.z=Ut[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=vn(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Ut[e]==null&&Wo(OQ[e]||"General",e),t.t==="e")t.w=t.w||_l[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Cd(t.v);else if(t.t==="d"){var a=hs(t.v);(a|0)===a?t.w=a.toString(10):t.w=Cd(a)}else{if(t.v===void 0)return"";t.w=al(t.v,pc)}else t.t==="d"?t.w=Ks(e,hs(t.v),pc):t.w=Ks(e,t.v,pc)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Ch(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Ch(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function One(t,e){var r=Gr(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=nr(r))}var Mne=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Lne=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Bne=/<(?:\w:)?hyperlink [^>]*>/mg,Une=/"(\w*:\w*)"/,$ne=/<(?:\w:)?col\b[^>]*[\/]?>/g,Vne=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Hne=/<(?:\w:)?pageMargins[^>]*\/>/g,Vk=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,jne=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Gne=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Wne(t,e,r,n,s,i,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",f=t.match(Lne);f?(c=t.slice(0,f.index),u=t.slice(f.index+f[0].length)):c=u=t;var h=c.match(Vk);h?Tx(h[0],o,s,r):(h=c.match(jne))&&zne(h[0],h[1]||"",o,s,r);var p=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=c.slice(p,p+50).match(Une);g&&One(o,g[1])}var v=c.match(Gne);v&&v[1]&&Jne(v[1],s);var y=[];if(e.cellStyles){var b=c.match($ne);b&&Xne(y,b)}f&&Zne(f[1],o,e,l,i,a);var E=u.match(Vne);E&&(o["!autofilter"]=Yne(E[0]));var x=[],w=u.match(Mne);if(w)for(p=0;p!=w.length;++p)x[p]=Gr(w[p].slice(w[p].indexOf('"')+1));var P=u.match(Bne);P&&Kne(o,P,n);var R=u.match(Hne);if(R&&(o["!margins"]=qne(It(R[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=nr(l)),e.sheetRows>0&&o["!ref"]){var A=Gr(o["!ref"]);e.sheetRows<=+A.e.r&&(A.e.r=e.sheetRows-1,A.e.r>l.e.r&&(A.e.r=l.e.r),A.e.r<A.s.r&&(A.s.r=A.e.r),A.e.c>l.e.c&&(A.e.c=l.e.c),A.e.c<A.s.c&&(A.s.c=A.e.c),o["!fullref"]=o["!ref"],o["!ref"]=nr(A))}return y.length>0&&(o["!cols"]=y),x.length>0&&(o["!merges"]=x),o}function Tx(t,e,r,n){var s=It(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=ar(Ar(s.codeName)))}function zne(t,e,r,n,s){Tx(t.slice(0,t.indexOf(">")),r,n,s)}function Kne(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=It(Ar(e[s]),!0);if(!i.ref)return;var a=((r||{})["!id"]||[])[i.id];a?(i.Target=a.Target,i.location&&(i.Target+="#"+ar(i.location))):(i.Target="#"+ar(i.location),a={Target:i.Target,TargetMode:"Internal"}),i.Rel=a,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Gr(i.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Mt({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function qne(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Xne(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=It(e[n],!0);s.hidden&&(s.hidden=Dr(s.hidden));var i=parseInt(s.min,10)-1,a=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,Sx(s.width)),Pc(s);i<=a;)t[i++]=Fn(s)}}function Yne(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var Qne=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Jne(t,e){e.Views||(e.Views=[{}]),(t.match(Qne)||[]).forEach(function(r,n){var s=It(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),Dr(s.rightToLeft)&&(e.Views[n].RTL=!0)})}var Zne=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=Id("v"),a=Id("f");return function(l,c,u,f,h,p){for(var g=0,v="",y=[],b=[],E=0,x=0,w=0,P="",R,A,_=0,m=0,S,I,k=0,C=0,O=Array.isArray(p.CellXf),D,F=[],N=[],M=Array.isArray(c),L=[],z={},j=!1,H=!!u.sheetStubs,G=l.split(e),W=0,ne=G.length;W!=ne;++W){v=G[W].trim();var de=v.length;if(de!==0){var se=0;e:for(g=0;g<de;++g)switch(v[g]){case">":if(v[g-1]!="/"){++g;break e}if(u&&u.cellStyles){if(A=It(v.slice(se,g),!0),_=A.r!=null?parseInt(A.r,10):_+1,m=-1,u.sheetRows&&u.sheetRows<_)continue;z={},j=!1,A.ht&&(j=!0,z.hpt=parseFloat(A.ht),z.hpx=Rd(z.hpt)),A.hidden=="1"&&(j=!0,z.hidden=!0),A.outlineLevel!=null&&(j=!0,z.level=+A.outlineLevel),j&&(L[_-1]=z)}break;case"<":se=g;break}if(se>=g)break;if(A=It(v.slice(se,g),!0),_=A.r!=null?parseInt(A.r,10):_+1,m=-1,!(u.sheetRows&&u.sheetRows<_)){f.s.r>_-1&&(f.s.r=_-1),f.e.r<_-1&&(f.e.r=_-1),u&&u.cellStyles&&(z={},j=!1,A.ht&&(j=!0,z.hpt=parseFloat(A.ht),z.hpx=Rd(z.hpt)),A.hidden=="1"&&(j=!0,z.hidden=!0),A.outlineLevel!=null&&(j=!0,z.level=+A.outlineLevel),j&&(L[_-1]=z)),y=v.slice(g).split(t);for(var ce=0;ce!=y.length&&y[ce].trim().charAt(0)=="<";++ce);for(y=y.slice(ce),g=0;g!=y.length;++g)if(v=y[g].trim(),v.length!==0){if(b=v.match(r),E=g,x=0,w=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,b!=null&&b.length===2){for(E=0,P=b[1],x=0;x!=P.length&&!((w=P.charCodeAt(x)-64)<1||w>26);++x)E=26*E+w;--E,m=E}else++m;for(x=0;x!=v.length&&v.charCodeAt(x)!==62;++x);if(++x,A=It(v.slice(0,x),!0),A.r||(A.r=Mt({r:_-1,c:m})),P=v.slice(x),R={t:""},(b=P.match(i))!=null&&b[1]!==""&&(R.v=ar(b[1])),u.cellFormula){if((b=P.match(a))!=null&&b[1]!==""){if(R.f=ar(Ar(b[1])).replace(/\r\n/g,`
`),u.xlfn||(R.f=ES(R.f)),b[0].indexOf('t="array"')>-1)R.F=(P.match(s)||[])[1],R.F.indexOf(":")>-1&&F.push([Gr(R.F),R.F]);else if(b[0].indexOf('t="shared"')>-1){I=It(b[0]);var te=ar(Ar(b[1]));u.xlfn||(te=ES(te)),N[parseInt(I.si,10)]=[I,te,A.r]}}else(b=P.match(/<f[^>]*\/>/))&&(I=It(b[0]),N[I.si]&&(R.f=ure(N[I.si][1],N[I.si][2],A.r)));var Z=us(A.r);for(x=0;x<F.length;++x)Z.r>=F[x][0].s.r&&Z.r<=F[x][0].e.r&&Z.c>=F[x][0].s.c&&Z.c<=F[x][0].e.c&&(R.F=F[x][1])}if(A.t==null&&R.v===void 0)if(R.f||R.F)R.v=0,R.t="n";else if(H)R.t="z";else continue;else R.t=A.t||"n";switch(f.s.c>m&&(f.s.c=m),f.e.c<m&&(f.e.c=m),R.t){case"n":if(R.v==""||R.v==null){if(!H)continue;R.t="z"}else R.v=parseFloat(R.v);break;case"s":if(typeof R.v>"u"){if(!H)continue;R.t="z"}else S=Ju[parseInt(R.v,10)],R.v=S.t,R.r=S.r,u.cellHTML&&(R.h=S.h);break;case"str":R.t="s",R.v=R.v!=null?Ar(R.v):"",u.cellHTML&&(R.h=fx(R.v));break;case"inlineStr":b=P.match(n),R.t="s",b!=null&&(S=bx(b[1]))?(R.v=S.t,u.cellHTML&&(R.h=S.h)):R.v="";break;case"b":R.v=Dr(R.v);break;case"d":u.cellDates?R.v=vn(R.v,1):(R.v=hs(vn(R.v,1)),R.t="n");break;case"e":(!u||u.cellText!==!1)&&(R.w=R.v),R.v=lk[R.v];break}if(k=C=0,D=null,O&&A.s!==void 0&&(D=p.CellXf[A.s],D!=null&&(D.numFmtId!=null&&(k=D.numFmtId),u.cellStyles&&D.fillId!=null&&(C=D.fillId))),$k(R,k,C,u,h,p),u.cellDates&&O&&R.t=="n"&&jc(Ut[k])&&(R.t="d",R.v=Lp(R.v)),A.cm&&u.xlmeta){var ye=(u.xlmeta.Cell||[])[+A.cm-1];ye&&ye.type=="XLDAPR"&&(R.D=!0)}if(M){var J=us(A.r);c[J.r]||(c[J.r]=[]),c[J.r][J.c]=R}else c[A.r]=R}}}}L.length>0&&(c["!rows"]=L)}}();function ese(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var tse=El;function rse(){}function nse(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=TJ(t),r}function sse(t){var e=Ys(t);return[e]}function ase(t){var e=xl(t);return[e]}function ise(t){var e=Ys(t),r=t.read_shift(1);return[e,r,"b"]}function ose(t){var e=xl(t),r=t.read_shift(1);return[e,r,"b"]}function lse(t){var e=Ys(t),r=t.read_shift(1);return[e,r,"e"]}function cse(t){var e=xl(t),r=t.read_shift(1);return[e,r,"e"]}function use(t){var e=Ys(t),r=t.read_shift(4);return[e,r,"s"]}function dse(t){var e=xl(t),r=t.read_shift(4);return[e,r,"s"]}function fse(t){var e=Ys(t),r=zn(t);return[e,r,"n"]}function Hk(t){var e=xl(t),r=zn(t);return[e,r,"n"]}function hse(t){var e=Ys(t),r=xx(t);return[e,r,"n"]}function pse(t){var e=xl(t),r=xx(t);return[e,r,"n"]}function mse(t){var e=Ys(t),r=vx(t);return[e,r,"is"]}function gse(t){var e=Ys(t),r=Jn(t);return[e,r,"str"]}function vse(t){var e=xl(t),r=Jn(t);return[e,r,"str"]}function yse(t,e,r){var n=t.l+e,s=Ys(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=$p(t,n-t.l,r);a[3]=jn(o,null,s,r.supbooks,r)}else t.l=n;return a}function xse(t,e,r){var n=t.l+e,s=Ys(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=$p(t,n-t.l,r);a[3]=jn(o,null,s,r.supbooks,r)}else t.l=n;return a}function Ese(t,e,r){var n=t.l+e,s=Ys(t);s.r=r["!row"];var i=zn(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=$p(t,n-t.l,r);a[3]=jn(o,null,s,r.supbooks,r)}else t.l=n;return a}function _se(t,e,r){var n=t.l+e,s=Ys(t);s.r=r["!row"];var i=Jn(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=$p(t,n-t.l,r);a[3]=jn(o,null,s,r.supbooks,r)}else t.l=n;return a}var bse=El;function Sse(t,e){var r=t.l+e,n=El(t),s=yx(t),i=Jn(t),a=Jn(t),o=Jn(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function Ase(){}function Tse(t,e,r){var n=t.l+e,s=ak(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=Dne(t,n-t.l,r);a[1]=o}else t.l=n;return a}function wse(t,e,r){var n=t.l+e,s=El(t),i=[s];if(r.cellFormula){var a=Rne(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}var Cse=["left","right","top","bottom","header","footer"];function Ise(t){var e={};return Cse.forEach(function(r){e[r]=zn(t)}),e}function kse(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Dse(){}function Pse(){}function Rse(t,e,r,n,s,i,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,g,v,y,b,E,x,w,P,R=[];o.biff=12,o["!row"]=0;var A=0,_=!1,m=[],S={},I=o.supbooks||s.supbooks||[[]];if(I.sharedf=S,I.arrayf=m,I.SheetNames=s.SheetNames||s.Sheets.map(function(M){return M.name}),!o.supbooks&&(o.supbooks=I,s.Names))for(var k=0;k<s.Names.length;++k)I[0][k+1]=s.Names[k];var C=[],O=[],D=!1;Dh[16]={n:"BrtShortReal",f:Hk};var F;if(ki(t,function(L,z,j){if(!h)switch(j){case 148:c=L;break;case 0:p=L,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),w=Nn(y=p.r),o["!row"]=p.r,(L.hidden||L.hpt||L.level!=null)&&(L.hpt&&(L.hpx=Rd(L.hpt)),O[L.r]=L);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:L[2]},L[2]){case"n":g.v=L[1];break;case"s":x=Ju[L[1]],g.v=x.t,g.r=x.r;break;case"b":g.v=!!L[1];break;case"e":g.v=L[1],o.cellText!==!1&&(g.w=_l[g.v]);break;case"str":g.t="s",g.v=L[1];break;case"is":g.t="s",g.v=L[1].t;break}if((v=a.CellXf[L[0].iStyleRef])&&$k(g,v.numFmtId,null,o,i,a),b=L[0].c==-1?b+1:L[0].c,o.dense?(l[y]||(l[y]=[]),l[y][b]=g):l[un(b)+w]=g,o.cellFormula){for(_=!1,A=0;A<m.length;++A){var H=m[A];p.r>=H[0].s.r&&p.r<=H[0].e.r&&b>=H[0].s.c&&b<=H[0].e.c&&(g.F=nr(H[0]),_=!0)}!_&&L.length>3&&(g.f=L[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>b&&(u.s.c=b),u.e.r<p.r&&(u.e.r=p.r),u.e.c<b&&(u.e.c=b),o.cellDates&&v&&g.t=="n"&&jc(Ut[v.numFmtId])){var G=Bo(g.v);G&&(g.t="d",g.v=new Date(G.y,G.m-1,G.d,G.H,G.M,G.S,G.u))}F&&(F.type=="XLDAPR"&&(g.D=!0),F=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},b=L[0].c==-1?b+1:L[0].c,o.dense?(l[y]||(l[y]=[]),l[y][b]=g):l[un(b)+w]=g,u.s.r>p.r&&(u.s.r=p.r),u.s.c>b&&(u.s.c=b),u.e.r<p.r&&(u.e.r=p.r),u.e.c<b&&(u.e.c=b),F&&(F.type=="XLDAPR"&&(g.D=!0),F=void 0);break;case 176:R.push(L);break;case 49:F=((o.xlmeta||{}).Cell||[])[L-1];break;case 494:var W=n["!id"][L.relId];for(W?(L.Target=W.Target,L.loc&&(L.Target+="#"+L.loc),L.Rel=W):L.relId==""&&(L.Target="#"+L.loc),y=L.rfx.s.r;y<=L.rfx.e.r;++y)for(b=L.rfx.s.c;b<=L.rfx.e.c;++b)o.dense?(l[y]||(l[y]=[]),l[y][b]||(l[y][b]={t:"z",v:void 0}),l[y][b].l=L):(E=Mt({c:b,r:y}),l[E]||(l[E]={t:"z",v:void 0}),l[E].l=L);break;case 426:if(!o.cellFormula)break;m.push(L),P=o.dense?l[y][b]:l[un(b)+w],P.f=jn(L[1],u,{r:p.r,c:b},I,o),P.F=nr(L[0]);break;case 427:if(!o.cellFormula)break;S[Mt(L[0].s)]=L[1],P=o.dense?l[y][b]:l[un(b)+w],P.f=jn(L[1],u,{r:p.r,c:b},I,o);break;case 60:if(!o.cellStyles)break;for(;L.e>=L.s;)C[L.e--]={width:L.w/256,hidden:!!(L.flags&1),level:L.level},D||(D=!0,Sx(L.w/256)),Pc(C[L.e+1]);break;case 161:l["!autofilter"]={ref:nr(L)};break;case 476:l["!margins"]=L;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),L.name&&(s.Sheets[r].CodeName=L.name),(L.above||L.left)&&(l["!outline"]={above:L.above,left:L.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),L.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!z.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+j.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=nr(c||u)),o.sheetRows&&l["!ref"]){var N=Gr(l["!ref"]);o.sheetRows<=+N.e.r&&(N.e.r=o.sheetRows-1,N.e.r>u.e.r&&(N.e.r=u.e.r),N.e.r<N.s.r&&(N.s.r=N.e.r),N.e.c>u.e.c&&(N.e.c=u.e.c),N.e.c<N.s.c&&(N.s.c=N.e.c),l["!fullref"]=l["!ref"],l["!ref"]=nr(N))}return R.length>0&&(l["!merges"]=R),C.length>0&&(l["!cols"]=C),O.length>0&&(l["!rows"]=O),l}function Fse(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var a=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var s=ar((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function Nse(t,e,r,n,s,i){var a=i||{"!type":"chart"};if(!t)return i;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=Fse(f);u.s.r=u.s.c=0,u.e.c=o,c=un(o),h[0].forEach(function(p,g){a[c+Nn(g)]={t:"n",v:p,z:h[1]},l=g}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=nr(u)),a}function Ose(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(Vk);return o&&Tx(o[0],i,s,r),(a=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function Mse(t,e){t.l+=10;var r=Jn(t);return{name:r}}function Lse(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a=!1;return ki(t,function(l,c,u){switch(u){case 550:i["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var jk=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Bse=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Use=[],$se=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function TS(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Dr(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function wS(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Dr(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Gk(t){wS(t.WBProps,jk),wS(t.CalcPr,$se),TS(t.WBView,Bse),TS(t.Sheets,Use),pc.date1904=Dr(t.WBProps.date1904)}var Vse="][*?/\\".split("");function Hse(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Vse.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var jse=/<\w+:workbook/;function Gse(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},a=0;if(t.replace(ts,function(l,c){var u=It(l);switch(Ha(u[0])){case"<?xml":break;case"<workbook":l.match(jse)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":jk.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Dr(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=Ar(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=ar(Ar(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Ar(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Dr(u.hidden||"0")&&(i.Hidden=!0),a=c+l.length;break;case"</definedName>":i.Ref=ar(Ar(t.slice(a,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),lJ.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Gk(r),r}function Wse(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=jv(t),r.name=Jn(t),r}function zse(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?Jn(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Kse(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function qse(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=wJ(t),a=Pne(t,0,r),o=yx(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function Xse(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],a=[[]];return a.SheetNames=[],a.XTI=[],Dh[16]={n:"BrtFRTArchID$",f:Kse},ki(t,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=jn(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),Gk(r),r.Names=i,r.supbooks=a,r}function Yse(t,e,r){return e.slice(-4)===".bin"?Xse(t,r):Gse(t,r)}function Qse(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Rse(t,n,r,s,i,a,o):Wne(t,n,r,s,i,a,o)}function Jse(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Lse(t,n,r,s,i):Ose(t,n,r,s,i)}function Zse(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?ore():lre()}function eae(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?are():ire()}function tae(t,e,r,n){return e.slice(-4)===".bin"?bte(t,r,n):gte(t,r,n)}function rae(t,e,r){return Dk(t,r)}function nae(t,e,r){return e.slice(-4)===".bin"?Bee(t,r):Mee(t,r)}function sae(t,e,r){return e.slice(-4)===".bin"?rre(t,r):Qte(t,r)}function aae(t,e,r){return e.slice(-4)===".bin"?qte(t):zte(t)}function iae(t,e,r,n){return r.slice(-4)===".bin"?Xte(t,e,r,n):void 0}function oae(t,e,r){return e.slice(-4)===".bin"?Gte(t,e,r):Wte(t,e,r)}var Wk=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,zk=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Zs(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(Wk),i,a,o,l;if(s)for(l=0;l!=s.length;++l)i=s[l].match(zk),(a=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(a+1),n[o]=i[2].slice(1,i[2].length-1));return n}function lae(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(Wk),s,i,a,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(zk),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?a="xmlns"+s[1].slice(6):a=s[1].slice(i+1),r[a]=s[2].slice(1,s[2].length-1));return r}var ed;function cae(t,e){var r=ed[t]||ar(t);return r==="General"?al(e):Ks(r,e)}function uae(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Dr(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=vn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[ar(e)]=s}function dae(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||_l[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Cd(t.v):t.w=al(t.v):t.w=cae(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=ed[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&jc(n)){var s=Bo(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function fae(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=ute[n.Pattern]||n.Pattern)}t[e.ID]=e}function hae(t,e,r,n,s,i,a,o,l,c){var u="General",f=n.StyleID,h={};c=c||{};var p=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&a&&(f=a.StyleID);i[f]!==void 0&&(i[f].nf&&(u=i[f].nf),i[f].Interior&&p.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Dr(t);break;case"String":n.t="s",n.r=qb(ar(t)),n.v=t.indexOf("<")>-1?ar(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(vn(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=ar(t):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=lk[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=qb(e||t));break}if(dae(n,u,c),c.cellFormula!==!1)if(n.Formula){var v=ar(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=hc(v,s),delete n.Formula,n.ArrayRange=="RC"?n.F=hc("RC:RC",s):n.ArrayRange&&(n.F=hc(n.ArrayRange,s),l.push([Gr(n.F),n.F]))}else for(g=0;g<l.length;++g)s.r>=l[g][0].s.r&&s.r<=l[g][0].e.r&&s.c>=l[g][0].s.c&&s.c<=l[g][0].e.c&&(n.F=l[g][1]);c.cellStyles&&(p.forEach(function(y){!h.patternType&&y.patternType&&(h.patternType=y.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function pae(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function Eg(t,e){var r=e||{};NI();var n=Eu(hx(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ar(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var a=Fn(r);return a.type="string",Dd.to_workbook(n,a)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ee){s.indexOf("<"+ee)>=0&&(i=!0)}),i)return Sae(n,r);ed={"General Number":"General","General Date":Ut[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ut[15],"Short Date":Ut[14],"Long Time":Ut[19],"Medium Time":Ut[18],"Short Time":Ut[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ut[2],Standard:Ut[4],Percent:Ut[10],Scientific:Ut[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},f=[],h=r.dense?[]:{},p="",g={},v={},y=Zs('<Data ss:Type="String">'),b=0,E=0,x=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},P={},R={},A="",_=0,m=[],S={},I={},k=0,C=[],O=[],D={},F=[],N,M=!1,L=[],z=[],j={},H=0,G=0,W={Sheets:[],WBProps:{date1904:!1}},ne={};kd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var de="";o=kd.exec(n);)switch(o[3]=(de=o[3]).toLowerCase()){case"data":if(de=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?hae(n.slice(b,o.index),A,y,l[l.length-1][0]=="comment"?D:g,{c:E,r:x},P,F[E],v,L,r):(A="",y=Zs(o[0]),b=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(O.length>0&&(g.c=O),(!r.sheetRows||r.sheetRows>x)&&g.v!==void 0&&(r.dense?(h[x]||(h[x]=[]),h[x][E]=g):h[un(E)+Nn(x)]=g),g.HRef&&(g.l={Target:ar(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(H=E+(parseInt(g.MergeAcross,10)|0),G=x+(parseInt(g.MergeDown,10)|0),m.push({s:{c:E,r:x},e:{c:H,r:G}})),!r.sheetStubs)g.MergeAcross?E=H+1:++E;else if(g.MergeAcross||g.MergeDown){for(var se=E;se<=H;++se)for(var ce=x;ce<=G;++ce)(se>E||ce>x)&&(r.dense?(h[ce]||(h[ce]=[]),h[ce][se]={t:"z"}):h[un(se)+Nn(ce)]={t:"z"});E=H+1}else++E;else g=lae(o[0]),g.Index&&(E=+g.Index-1),E<w.s.c&&(w.s.c=E),E>w.e.c&&(w.e.c=E),o[0].slice(-2)==="/>"&&++E,O=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(x<w.s.r&&(w.s.r=x),x>w.e.r&&(w.e.r=x),o[0].slice(-2)==="/>"&&(v=Zs(o[0]),v.Index&&(x=+v.Index-1)),E=0,++x):(v=Zs(o[0]),v.Index&&(x=+v.Index-1),j={},(v.AutoFitHeight=="0"||v.Height)&&(j.hpx=parseInt(v.Height,10),j.hpt=kk(j.hpx),z[x]=j),v.Hidden=="1"&&(j.hidden=!0,z[x]=j));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));f.push(p),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(h["!ref"]=nr(w),r.sheetRows&&r.sheetRows<=w.e.r&&(h["!fullref"]=h["!ref"],w.e.r=r.sheetRows-1,h["!ref"]=nr(w))),m.length&&(h["!merges"]=m),F.length>0&&(h["!cols"]=F),z.length>0&&(h["!rows"]=z),u[p]=h}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=E=0,l.push([o[3],!1]),c=Zs(o[0]),p=ar(c.Name),h=r.dense?[]:{},m=[],L=[],z=[],ne={name:p,Hidden:0},W.Sheets.push(ne);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),F=[],M=!1}break;case"style":o[1]==="/"?fae(P,R,r):R=Zs(o[0]);break;case"numberformat":R.nf=ar(Zs(o[0]).Format||"General"),ed[R.nf]&&(R.nf=ed[R.nf]);for(var te=0;te!=392&&Ut[te]!=R.nf;++te);if(te==392){for(te=57;te!=392;++te)if(Ut[te]==null){Wo(R.nf,te);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(N=Zs(o[0]),N.Hidden&&(N.hidden=!0,delete N.Hidden),N.Width&&(N.wpx=parseInt(N.Width,10)),!M&&N.wpx>10){M=!0,cs=Ck;for(var Z=0;Z<F.length;++Z)F[Z]&&Pc(F[Z])}M&&Pc(N),F[N.Index-1||F.length]=N;for(var ye=0;ye<+N.Span;++ye)F[F.length]=Fn(N);break;case"namedrange":if(o[1]==="/")break;W.Names||(W.Names=[]);var J=It(o[0]),X={Name:J.Name,Ref:hc(J.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(X.Sheet=W.Sheets.length-1),W.Names.push(X);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?A+=n.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;R.Interior=Zs(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?QJ(S,de,n.slice(k,o.index)):k=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));pae(D),O.push(D)}else l.push([o[3],!1]),c=Zs(o[0]),D={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Q=Zs(o[0]);h["!autofilter"]={ref:hc(Q.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return RS(n,r);var fe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:fe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:fe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:fe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:fe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(k,o.index)){case"SheetHidden":ne.Hidden=1;break;case"SheetVeryHidden":ne.Hidden=2;break}else k=o.index+o[0].length;break;case"header":h["!margins"]||Zu(h["!margins"]={},"xlml"),isNaN(+It(o[0]).Margin)||(h["!margins"].header=+It(o[0]).Margin);break;case"footer":h["!margins"]||Zu(h["!margins"]={},"xlml"),isNaN(+It(o[0]).Margin)||(h["!margins"].footer=+It(o[0]).Margin);break;case"pagemargins":var ve=It(o[0]);h["!margins"]||Zu(h["!margins"]={},"xlml"),isNaN(+ve.Top)||(h["!margins"].top=+ve.Top),isNaN(+ve.Left)||(h["!margins"].left=+ve.Left),isNaN(+ve.Right)||(h["!margins"].right=+ve.Right),isNaN(+ve.Bottom)||(h["!margins"].bottom=+ve.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:fe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:fe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:fe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:fe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:fe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:fe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:fe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:fe=!1}break;case"smarttags":break;default:fe=!1;break}if(fe||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?uae(I,de,C,n.slice(k,o.index)):(C=o,k=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var ie={};return!r.bookSheets&&!r.bookProps&&(ie.Sheets=u),ie.SheetNames=f,ie.Workbook=W,ie.SSF=Fn(Ut),ie.Props=S,ie.Custprops=I,ie}function Kv(t,e){switch(Ix(e=e||{}),e.type||"base64"){case"base64":return Eg(Rs(t),e);case"binary":case"buffer":case"file":return Eg(t,e);case"array":return Eg(yl(t),e)}}function mae(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=kJ(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=DJ(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var gae=[60,1084,2066,2165,2175];function vae(t,e,r,n,s){var i=n,a=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}a.push(o),r.l+=i;for(var l=ci(r,r.l),c=qv[l],u=0;c!=null&&gae.indexOf(l)>-1;)i=ci(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+i),a.push(o),r.l+=4+i,c=qv[l=ci(r,r.l)];var f=qi(a);wn(f,0);var h=0;f.lens=[];for(var p=0;p<a.length;++p)f.lens.push(h),h+=a[p].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,s)}function Aa(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Ut[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||_l[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Cd(t.v):t.w=al(t.v):t.w=Ks(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&jc(Ut[n]||String(n))){var s=Bo(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function r0(t,e,r){return{v:t,ixfe:e,t:r}}function yae(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},a={},o=null,l=[],c="",u={},f,h="",p,g,v,y,b={},E=[],x,w,P=[],R=[],A={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},m=function(Ee){return Ee<8?zo[Ee]:Ee<64&&R[Ee-8]||zo[Ee]},S=function(Ee,Se,Me){var ze=Se.XF.data;if(!(!ze||!ze.patternType||!Me||!Me.cellStyles)){Se.s={},Se.s.patternType=ze.patternType;var lt;(lt=Pd(m(ze.icvFore)))&&(Se.s.fgColor={rgb:lt}),(lt=Pd(m(ze.icvBack)))&&(Se.s.bgColor={rgb:lt})}},I=function(Ee,Se,Me){if(!(j>1)&&!(Me.sheetRows&&Ee.r>=Me.sheetRows)){if(Me.cellStyles&&Se.XF&&Se.XF.data&&S(Ee,Se,Me),delete Se.ixfe,delete Se.XF,f=Ee,h=Mt(Ee),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),Ee.r<a.s.r&&(a.s.r=Ee.r),Ee.c<a.s.c&&(a.s.c=Ee.c),Ee.r+1>a.e.r&&(a.e.r=Ee.r+1),Ee.c+1>a.e.c&&(a.e.c=Ee.c+1),Me.cellFormula&&Se.f){for(var ze=0;ze<E.length;++ze)if(!(E[ze][0].s.c>Ee.c||E[ze][0].s.r>Ee.r)&&!(E[ze][0].e.c<Ee.c||E[ze][0].e.r<Ee.r)){Se.F=nr(E[ze][0]),(E[ze][0].s.c!=Ee.c||E[ze][0].s.r!=Ee.r)&&delete Se.f,Se.f&&(Se.f=""+jn(E[ze][1],a,Ee,L,k));break}}Me.dense?(s[Ee.r]||(s[Ee.r]=[]),s[Ee.r][Ee.c]=Se):s[h]=Se}},k={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:E,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(k.password=e.password);var C,O=[],D=[],F=[],N=[],M=!1,L=[];L.SheetNames=k.snames,L.sharedf=k.sharedf,L.arrayf=k.arrayf,L.names=[],L.XTI=[];var z=0,j=0,H=0,G=[],W=[],ne;k.codepage=1200,la(1200);for(var de=!1;t.l<t.length-1;){var se=t.l,ce=t.read_shift(2);if(ce===0&&z===10)break;var te=t.l===t.length?0:t.read_shift(2),Z=qv[ce];if(Z&&Z.f){if(e.bookSheets&&z===133&&ce!==133)break;if(z=ce,Z.r===2||Z.r==12){var ye=t.read_shift(2);if(te-=2,!k.enc&&ye!==ce&&((ye&255)<<8|ye>>8)!==ce)throw new Error("rt mismatch: "+ye+"!="+ce);Z.r==12&&(t.l+=10,te-=10)}var J={};if(ce===10?J=Z.f(t,te,k):J=vae(ce,Z,t,te,k),j==0&&[9,521,1033,2057].indexOf(z)===-1)continue;switch(ce){case 34:r.opts.Date1904=A.WBProps.date1904=J;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(t.l=0),k.enc=J,!e.password)throw new Error("File is password-protected");if(J.valid==null)throw new Error("Encryption scheme unsupported");if(!J.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=J;break;case 66:var X=Number(J);switch(X){case 21010:X=1200;break;case 32768:X=1e4;break;case 32769:X=1252;break}la(k.codepage=X),de=!0;break;case 317:k.rrtabid=J;break;case 25:k.winlocked=J;break;case 439:r.opts.RefreshAll=J;break;case 12:r.opts.CalcCount=J;break;case 16:r.opts.CalcDelta=J;break;case 17:r.opts.CalcIter=J;break;case 13:r.opts.CalcMode=J;break;case 14:r.opts.CalcPrecision=J;break;case 95:r.opts.CalcSaveRecalc=J;break;case 15:k.CalcRefMode=J;break;case 2211:r.opts.FullCalc=J;break;case 129:J.fDialog&&(s["!type"]="dialog"),J.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),J.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:P.push(J);break;case 430:L.push([J]),L[L.length-1].XTI=[];break;case 35:case 547:L[L.length-1].push(J);break;case 24:case 536:ne={Name:J.Name,Ref:jn(J.rgce,a,null,L,k)},J.itab>0&&(ne.Sheet=J.itab-1),L.names.push(ne),L[0]||(L[0]=[],L[0].XTI=[]),L[L.length-1].push(J),J.Name=="_xlnm._FilterDatabase"&&J.itab>0&&J.rgce&&J.rgce[0]&&J.rgce[0][0]&&J.rgce[0][0][0]=="PtgArea3d"&&(W[J.itab-1]={ref:nr(J.rgce[0][0][1][2])});break;case 22:k.ExternCount=J;break;case 23:L.length==0&&(L[0]=[],L[0].XTI=[]),L[L.length-1].XTI=L[L.length-1].XTI.concat(J),L.XTI=L.XTI.concat(J);break;case 2196:if(k.biff<8)break;ne!=null&&(ne.Comment=J[1]);break;case 18:s["!protect"]=J;break;case 19:J!==0&&k.WTF&&console.error("Password verifier: "+J);break;case 133:i[J.pos]=J,k.snames.push(J.name);break;case 10:{if(--j)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,s["!ref"]=nr(a),e.sheetRows&&e.sheetRows<=a.e.r){var Q=a.e.r;a.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=nr(a),a.e.r=Q}a.e.r++,a.e.c++}O.length>0&&(s["!merges"]=O),D.length>0&&(s["!objects"]=D),F.length>0&&(s["!cols"]=F),N.length>0&&(s["!rows"]=N),A.Sheets.push(_)}c===""?u=s:n[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[ce]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[J.BIFFVer]||8),k.biffguess=J.BIFFVer==0,J.BIFFVer==0&&J.dt==4096&&(k.biff=5,de=!0,la(k.codepage=28591)),k.biff==8&&J.BIFFVer==0&&J.dt==16&&(k.biff=2),j++)break;if(s=e.dense?[]:{},k.biff<8&&!de&&(de=!0,la(k.codepage=e.codepage||1252)),k.biff<5||J.BIFFVer==0&&J.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var fe={pos:t.l-te,name:c};i[fe.pos]=fe,k.snames.push(c)}else c=(i[se]||{name:""}).name;J.dt==32&&(s["!type"]="chart"),J.dt==64&&(s["!type"]="macro"),O=[],D=[],k.arrayf=E=[],F=[],N=[],M=!1,_={Hidden:(i[se]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[J.r]||[])[J.c]:s[Mt({c:J.c,r:J.r})])&&++J.c,x={ixfe:J.ixfe,XF:P[J.ixfe]||{},v:J.val,t:"n"},H>0&&(x.z=G[x.ixfe>>8&63]),Aa(x,e,r.opts.Date1904),I({c:J.c,r:J.r},x,e);break;case 5:case 517:x={ixfe:J.ixfe,XF:P[J.ixfe],v:J.val,t:J.t},H>0&&(x.z=G[x.ixfe>>8&63]),Aa(x,e,r.opts.Date1904),I({c:J.c,r:J.r},x,e);break;case 638:x={ixfe:J.ixfe,XF:P[J.ixfe],v:J.rknum,t:"n"},H>0&&(x.z=G[x.ixfe>>8&63]),Aa(x,e,r.opts.Date1904),I({c:J.c,r:J.r},x,e);break;case 189:for(var ve=J.c;ve<=J.C;++ve){var ie=J.rkrec[ve-J.c][0];x={ixfe:ie,XF:P[ie],v:J.rkrec[ve-J.c][1],t:"n"},H>0&&(x.z=G[x.ixfe>>8&63]),Aa(x,e,r.opts.Date1904),I({c:ve,r:J.r},x,e)}break;case 6:case 518:case 1030:{if(J.val=="String"){o=J;break}if(x=r0(J.val,J.cell.ixfe,J.tt),x.XF=P[x.ixfe],e.cellFormula){var ee=J.formula;if(ee&&ee[0]&&ee[0][0]&&ee[0][0][0]=="PtgExp"){var ge=ee[0][0][1][0],Te=ee[0][0][1][1],Ie=Mt({r:ge,c:Te});b[Ie]?x.f=""+jn(J.formula,a,J.cell,L,k):x.F=((e.dense?(s[ge]||[])[Te]:s[Ie])||{}).F}else x.f=""+jn(J.formula,a,J.cell,L,k)}H>0&&(x.z=G[x.ixfe>>8&63]),Aa(x,e,r.opts.Date1904),I(J.cell,x,e),o=J}break;case 7:case 519:if(o)o.val=J,x=r0(J,o.cell.ixfe,"s"),x.XF=P[x.ixfe],e.cellFormula&&(x.f=""+jn(o.formula,a,o.cell,L,k)),H>0&&(x.z=G[x.ixfe>>8&63]),Aa(x,e,r.opts.Date1904),I(o.cell,x,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{E.push(J);var Ae=Mt(J[0].s);if(p=e.dense?(s[J[0].s.r]||[])[J[0].s.c]:s[Ae],e.cellFormula&&p){if(!o||!Ae||!p)break;p.f=""+jn(J[1],a,J[0],L,k),p.F=nr(J[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!o)break;b[Mt(o.cell)]=J[0],p=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Mt(o.cell)],(p||{}).f=""+jn(J[0],a,f,L,k)}}break;case 253:x=r0(l[J.isst].t,J.ixfe,"s"),l[J.isst].h&&(x.h=l[J.isst].h),x.XF=P[x.ixfe],H>0&&(x.z=G[x.ixfe>>8&63]),Aa(x,e,r.opts.Date1904),I({c:J.c,r:J.r},x,e);break;case 513:e.sheetStubs&&(x={ixfe:J.ixfe,XF:P[J.ixfe],t:"z"},H>0&&(x.z=G[x.ixfe>>8&63]),Aa(x,e,r.opts.Date1904),I({c:J.c,r:J.r},x,e));break;case 190:if(e.sheetStubs)for(var We=J.c;We<=J.C;++We){var De=J.ixfe[We-J.c];x={ixfe:De,XF:P[De],t:"z"},H>0&&(x.z=G[x.ixfe>>8&63]),Aa(x,e,r.opts.Date1904),I({c:We,r:J.r},x,e)}break;case 214:case 516:case 4:x=r0(J.val,J.ixfe,"s"),x.XF=P[x.ixfe],H>0&&(x.z=G[x.ixfe>>8&63]),Aa(x,e,r.opts.Date1904),I({c:J.c,r:J.r},x,e);break;case 0:case 512:j===1&&(a=J);break;case 252:l=J;break;case 1054:if(k.biff==4){G[H++]=J[1];for(var He=0;He<H+163&&Ut[He]!=J[1];++He);He>=163&&Wo(J[1],H+163)}else Wo(J[1],J[0]);break;case 30:{G[H++]=J;for(var $e=0;$e<H+163&&Ut[$e]!=J;++$e);$e>=163&&Wo(J,H+163)}break;case 229:O=O.concat(J);break;case 93:D[J.cmo[0]]=k.lastobj=J;break;case 438:k.lastobj.TxO=J;break;case 127:k.lastobj.ImData=J;break;case 440:for(y=J[0].s.r;y<=J[0].e.r;++y)for(v=J[0].s.c;v<=J[0].e.c;++v)p=e.dense?(s[y]||[])[v]:s[Mt({c:v,r:y})],p&&(p.l=J[1]);break;case 2048:for(y=J[0].s.r;y<=J[0].e.r;++y)for(v=J[0].s.c;v<=J[0].e.c;++v)p=e.dense?(s[y]||[])[v]:s[Mt({c:v,r:y})],p&&p.l&&(p.l.Tooltip=J[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;p=e.dense?(s[J[0].r]||[])[J[0].c]:s[Mt(J[0])];var ke=D[J[2]];p||(e.dense?(s[J[0].r]||(s[J[0].r]=[]),p=s[J[0].r][J[0].c]={t:"z"}):p=s[Mt(J[0])]={t:"z"},a.e.r=Math.max(a.e.r,J[0].r),a.s.r=Math.min(a.s.r,J[0].r),a.e.c=Math.max(a.e.c,J[0].c),a.s.c=Math.min(a.s.c,J[0].c)),p.c||(p.c=[]),g={a:J[1],t:ke.TxO.t},p.c.push(g)}break;case 2173:$te(P[J.ixfe],J.ext);break;case 125:{if(!k.cellStyles)break;for(;J.e>=J.s;)F[J.e--]={width:J.w/256,level:J.level||0,hidden:!!(J.flags&1)},M||(M=!0,Sx(J.w/256)),Pc(F[J.e+1])}break;case 520:{var Ke={};J.level!=null&&(N[J.r]=Ke,Ke.level=J.level),J.hidden&&(N[J.r]=Ke,Ke.hidden=!0),J.hpt&&(N[J.r]=Ke,Ke.hpt=J.hpt,Ke.hpx=Rd(J.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Zu(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ce]]=J;break;case 161:s["!margins"]||Zu(s["!margins"]={}),s["!margins"].header=J.header,s["!margins"].footer=J.footer;break;case 574:J.RTL&&(A.Views[0].RTL=!0);break;case 146:R=J;break;case 2198:C=J;break;case 140:w=J;break;case 442:c?_.CodeName=J||_.name:A.WBProps.CodeName=J||"ThisWorkbook";break}}else Z||console.error("Missing Info for XLS Record 0x"+ce.toString(16)),t.l+=te}return r.SheetNames=Ua(i).sort(function(_e,Ee){return Number(_e)-Number(Ee)}).map(function(_e){return i[_e].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&W.forEach(function(_e,Ee){r.Sheets[r.SheetNames[Ee]]["!autofilter"]=_e}),r.Strings=l,r.SSF=Fn(Ut),k.enc&&(r.Encryption=k.enc),C&&(r.Themes=C),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),L.names.length>0&&(A.Names=L.names),r.Workbook=A,r}var CS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function xae(t,e,r){var n=rr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=uS(n,MJ,CS.DSI);for(var i in s)e[i]=s[i]}catch(c){if(r.WTF)throw c}var a=rr.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=uS(a,LJ,CS.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(uk(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function Kk(t,e){e||(e={}),Ix(e),bI(),e.codepage&&ix(e.codepage);var r,n;if(t.FullPaths){if(rr.find(t,"/encryption"))throw new Error("File is password-protected");r=rr.find(t,"!CompObj"),n=rr.find(t,"/Workbook")||rr.find(t,"/Book")}else{switch(e.type){case"base64":t=oa(Rs(t));break;case"binary":t=oa(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}wn(t,0),n={content:t}}var s,i;if(r&&mae(r),e.bookProps&&!e.bookSheets)s={};else{var a=Zt?"buffer":"array";if(n&&n.content)s=yae(n.content,e);else if((i=rr.find(t,"PerfectOffice_MAIN"))&&i.content)s=Qu.to_workbook(i.content,(e.type=a,e));else if((i=rr.find(t,"NativeContent_MAIN"))&&i.content)s=Qu.to_workbook(i.content,(e.type=a,e));else throw(i=rr.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&rr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=sre(t))}var o={};return t.FullPaths&&xae(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}var Dh={0:{f:ese},1:{f:sse},2:{f:hse},3:{f:lse},4:{f:ise},5:{f:fse},6:{f:gse},7:{f:use},8:{f:_se},9:{f:Ese},10:{f:yse},11:{f:xse},12:{f:ase},13:{f:pse},14:{f:cse},15:{f:ose},16:{f:Hk},17:{f:vse},18:{f:dse},19:{f:vx},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:qse},40:{},42:{},43:{f:yte},44:{f:vte},45:{f:xte},46:{f:_te},47:{f:Ete},48:{},49:{f:bJ},50:{},51:{f:Hte},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:bk},62:{f:mse},63:{f:Kte},64:{f:Dse},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:es,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:kse},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:nse},148:{f:tse,p:16},151:{f:Ase},152:{},153:{f:zse},154:{},155:{},156:{f:Wse},157:{},158:{},159:{T:1,f:Lee},160:{T:-1},161:{T:1,f:El},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:bse},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Vte},336:{T:-1},337:{f:jte,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:jv},357:{},358:{},359:{},360:{T:1},361:{},362:{f:_k},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Tse},427:{f:wse},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Ise},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:rse},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Sse},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:jv},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:tre},633:{T:1},634:{T:-1},635:{T:1,f:ere},636:{T:-1},637:{f:AJ},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Mse},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Pse},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},qv={6:{f:yg},10:{f:Bi},12:{f:en},13:{f:en},14:{f:zr},15:{f:zr},16:{f:zn},17:{f:zr},18:{f:zr},19:{f:en},20:{f:pS},21:{f:pS},23:{f:_k},24:{f:gS},25:{f:zr},26:{},27:{},28:{f:JZ},29:{},34:{f:zr},35:{f:mS},38:{f:zn},39:{f:zn},40:{f:zn},41:{f:zn},42:{f:zr},43:{f:zr},47:{f:rte},49:{f:FZ},51:{f:en},60:{},61:{f:DZ},64:{f:zr},65:{f:RZ},66:{f:en},77:{},80:{},81:{},82:{},85:{f:en},89:{},90:{},91:{},92:{f:bZ},93:{f:eee},94:{},95:{f:zr},96:{},97:{},99:{f:zr},125:{f:bk},128:{f:jZ},129:{f:SZ},130:{f:en},131:{f:zr},132:{f:zr},133:{f:AZ},134:{},140:{f:iee},141:{f:en},144:{},146:{f:lee},151:{},152:{},153:{},154:{},155:{},156:{f:en},157:{},158:{},160:{f:hee},161:{f:uee},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:UZ},190:{f:$Z},193:{f:Bi},197:{},198:{},199:{},200:{},201:{},202:{f:zr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:en},220:{},221:{f:zr},222:{},224:{f:HZ},225:{f:_Z},226:{f:Bi},227:{},229:{f:ZZ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:TZ},253:{f:NZ},255:{f:wZ},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:mk},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:zr},353:{f:Bi},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:WZ},431:{f:zr},432:{},433:{},434:{},437:{},438:{f:nee},439:{f:zr},440:{f:see},441:{},442:{f:lf},443:{},444:{f:en},445:{},446:{},448:{f:Bi},449:{f:kZ,r:2},450:{f:Bi},512:{f:fS},513:{f:fee},515:{f:GZ},516:{f:OZ},517:{f:hS},519:{f:pee},520:{f:CZ},523:{},545:{f:vS},549:{f:dS},566:{},574:{f:PZ},638:{f:BZ},659:{},1048:{},1054:{f:MZ},1084:{},1212:{f:XZ},2048:{f:aee},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Zf},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Bi},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:cee,r:12},2173:{f:Ute,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:zr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:qZ,r:12},2197:{},2198:{f:Fte,r:12},2199:{},2200:{},2201:{},2202:{f:YZ,r:12},2203:{f:Bi},2204:{},2205:{},2206:{},2207:{},2211:{f:IZ},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:en},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:dee},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:oee},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:fS},1:{},2:{f:yee},3:{f:vee},4:{f:gee},5:{f:hS},7:{f:xee},8:{},9:{f:Zf},11:{},22:{f:en},30:{f:LZ},31:{},32:{},33:{f:vS},36:{},37:{f:dS},50:{f:Eee},62:{},52:{},67:{},68:{f:en},69:{},86:{},126:{},127:{f:mee},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:_ee},223:{},234:{},354:{},421:{},518:{f:yg},521:{f:Zf},536:{f:gS},547:{f:mS},561:{},579:{},1030:{f:yg},1033:{f:Zf},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function ea(t,e,r,n){var s=e;if(!isNaN(s)){var i=(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&rk(r)&&t.push(r)}}function IS(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),a=s.index,o=i&&i.index||t.length,l=GQ(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(a=0;a<l.length;++a){var v=l[a].trim(),y=v.slice(0,3).toLowerCase();if(y=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(y!="<td"&&y!="<th")){var b=v.split(/<\/t[dh]>/i);for(o=0;o<b.length;++o){var E=b[o].trim();if(E.match(/<t[dh]/i)){for(var x=E,w=0;x.charAt(0)=="<"&&(w=x.indexOf(">"))>-1;)x=x.slice(w+1);for(var P=0;P<g.length;++P){var R=g[P];R.s.c==u&&R.s.r<c&&c<=R.e.r&&(u=R.e.c+1,P=-1)}var A=It(E.slice(0,E.indexOf(">")));h=A.colspan?+A.colspan:1,((f=+A.rowspan)>1||h>1)&&g.push({s:{r:c,c:u},e:{r:c+(f||1)-1,c:u+h-1}});var _=A.t||A["data-t"]||"";if(!x.length){u+=h;continue}if(x=jI(x),p.s.r>c&&(p.s.r=c),p.e.r<c&&(p.e.r=c),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!x.length){u+=h;continue}var m={t:"s",v:x};r.raw||!x.trim().length||_=="s"||(x==="TRUE"?m={t:"b",v:!0}:x==="FALSE"?m={t:"b",v:!1}:isNaN(fa(x))?isNaN(Dc(x).getDate())||(m={t:"d",v:vn(x)},r.cellDates||(m={t:"n",v:hs(m.v)}),m.z=r.dateNF||Ut[14]):m={t:"n",v:fa(x)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=m):n[Mt({r:c,c:u})]=m,u+=h}}}}return n["!ref"]=nr(p),g.length&&(n["!merges"]=g),n}function Eae(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var u=Mt({r,c:a}),f=n.dense?(t[r]||[])[a]:t[u],h=f&&f.v!=null&&(f.h||fx(f.w||(Ti(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+u,i.push(iJ("td",h,p))}}var g="<tr>";return g+i.join("")+"</tr>"}var _ae='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',bae="</body></html>";function Sae(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Eo(IS(r[0],e),e);var n=Dx();return r.forEach(function(s,i){Px(n,IS(s,e),"Sheet"+(i+1))}),n}function Aae(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Tae(t,e){var r=e||{},n=r.header!=null?r.header:_ae,s=r.footer!=null?r.footer:bae,i=[n],a=Gc(t["!ref"]);r.dense=Array.isArray(t),i.push(Aae(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(Eae(t,a,o,r));return i.push("</table>"+s),i.join("")}function qk(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?us(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var u=Gc(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),s==-1&&(c.e.r=s=u.e.r+1)}var f=[],h=0,p=t["!rows"]||(t["!rows"]=[]),g=0,v=0,y=0,b=0,E=0,x=0;for(t["!cols"]||(t["!cols"]=[]);g<o.length&&v<l;++g){var w=o[g];if(kS(w)){if(n.display)continue;p[v]={hidden:!0}}var P=w.children;for(y=b=0;y<P.length;++y){var R=P[y];if(!(n.display&&kS(R))){var A=R.hasAttribute("data-v")?R.getAttribute("data-v"):R.hasAttribute("v")?R.getAttribute("v"):jI(R.innerHTML),_=R.getAttribute("data-z")||R.getAttribute("z");for(h=0;h<f.length;++h){var m=f[h];m.s.c==b+i&&m.s.r<v+s&&v+s<=m.e.r&&(b=m.e.c+1-i,h=-1)}x=+R.getAttribute("colspan")||1,((E=+R.getAttribute("rowspan")||1)>1||x>1)&&f.push({s:{r:v+s,c:b+i},e:{r:v+s+(E||1)-1,c:b+i+(x||1)-1}});var S={t:"s",v:A},I=R.getAttribute("data-t")||R.getAttribute("t")||"";A!=null&&(A.length==0?S.t=I||"z":n.raw||A.trim().length==0||I=="s"||(A==="TRUE"?S={t:"b",v:!0}:A==="FALSE"?S={t:"b",v:!1}:isNaN(fa(A))?isNaN(Dc(A).getDate())||(S={t:"d",v:vn(A)},n.cellDates||(S={t:"n",v:hs(S.v)}),S.z=n.dateNF||Ut[14]):S={t:"n",v:fa(A)})),S.z===void 0&&_!=null&&(S.z=_);var k="",C=R.getElementsByTagName("A");if(C&&C.length)for(var O=0;O<C.length&&!(C[O].hasAttribute("href")&&(k=C[O].getAttribute("href"),k.charAt(0)!="#"));++O);k&&k.charAt(0)!="#"&&(S.l={Target:k}),n.dense?(t[v+s]||(t[v+s]=[]),t[v+s][b+i]=S):t[Mt({c:b+i,r:v+s})]=S,c.e.c<b+i&&(c.e.c=b+i),b+=x}}++v}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),c.e.r=Math.max(c.e.r,v-1+s),t["!ref"]=nr(c),v>=l&&(t["!fullref"]=nr((c.e.r=o.length-g+v-1+s,c))),t}function Xk(t,e){var r=e||{},n=r.dense?[]:{};return qk(n,t,e)}function wae(t,e){return Eo(Xk(t,e),e)}function kS(t){var e="",r=Cae(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Cae(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Iae(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=ar(e.replace(/<[^>]*>/g,""));return[r]}var DS={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Yk(t,e){var r=e||{},n=hx(t),s=[],i,a,o={name:""},l="",c=0,u,f,h={},p=[],g=r.dense?[]:{},v,y,b={value:""},E="",x=0,w=[],P=-1,R=-1,A={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,m={},S=[],I={},k=0,C=0,O=[],D=1,F=1,N=[],M={Names:[]},L={},z=["",""],j=[],H={},G="",W=0,ne=!1,de=!1,se=0;for(kd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=kd.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(A.e.c>=A.s.c&&A.e.r>=A.s.r?g["!ref"]=nr(A):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=A.e.r&&(g["!fullref"]=g["!ref"],A.e.r=r.sheetRows-1,g["!ref"]=nr(A)),S.length&&(g["!merges"]=S),O.length&&(g["!rows"]=O),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),h[u.name]=g,de=!1):v[0].charAt(v[0].length-2)!=="/"&&(u=It(v[0],!1),P=R=-1,A.s.r=A.s.c=1e7,A.e.r=A.e.c=0,g=r.dense?[]:{},S=[],O=[],de=!0);break;case"table-row-group":v[1]==="/"?--_:++_;break;case"table-row":case"":if(v[1]==="/"){P+=D,D=1;break}if(f=It(v[0],!1),f.?P=f.-1:P==-1&&(P=0),D=+f["number-rows-repeated"]||1,D<10)for(se=0;se<D;++se)_>0&&(O[P+se]={level:_});R=-1;break;case"covered-table-cell":v[1]!=="/"&&++R,r.sheetStubs&&(r.dense?(g[P]||(g[P]=[]),g[P][R]={t:"z"}):g[Mt({r:P,c:R})]={t:"z"}),E="",w=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++R,b=It(v[0],!1),F=parseInt(b["number-columns-repeated"]||"1",10),y={t:"z",v:null},b.formula&&r.cellFormula!=!1&&(y.f=AS(ar(b.formula))),(b.||b["value-type"])=="string"&&(y.t="s",y.v=ar(b["string-value"]||""),r.dense?(g[P]||(g[P]=[]),g[P][R]=y):g[Mt({r:P,c:R})]=y),R+=F-1;else if(v[1]!=="/"){++R,E="",x=0,w=[],F=1;var ce=D?P+D-1:P;if(R>A.e.c&&(A.e.c=R),R<A.s.c&&(A.s.c=R),P<A.s.r&&(A.s.r=P),ce>A.e.r&&(A.e.r=ce),b=It(v[0],!1),j=[],H={},y={t:b.||b["value-type"],v:null},r.cellFormula)if(b.formula&&(b.formula=ar(b.formula)),b["number-matrix-columns-spanned"]&&b["number-matrix-rows-spanned"]&&(k=parseInt(b["number-matrix-rows-spanned"],10)||0,C=parseInt(b["number-matrix-columns-spanned"],10)||0,I={s:{r:P,c:R},e:{r:P+k-1,c:R+C-1}},y.F=nr(I),N.push([I,y.F])),b.formula)y.f=AS(b.formula);else for(se=0;se<N.length;++se)P>=N[se][0].s.r&&P<=N[se][0].e.r&&R>=N[se][0].s.c&&R<=N[se][0].e.c&&(y.F=N[se][1]);switch((b["number-columns-spanned"]||b["number-rows-spanned"])&&(k=parseInt(b["number-rows-spanned"],10)||0,C=parseInt(b["number-columns-spanned"],10)||0,I={s:{r:P,c:R},e:{r:P+k-1,c:R+C-1}},S.push(I)),b["number-columns-repeated"]&&(F=parseInt(b["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=Dr(b["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(b.value);break;case"percentage":y.t="n",y.v=parseFloat(b.value);break;case"currency":y.t="n",y.v=parseFloat(b.value);break;case"date":y.t="d",y.v=vn(b["date-value"]),r.cellDates||(y.t="n",y.v=hs(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=VQ(b["time-value"])/86400,r.cellDates&&(y.t="d",y.v=Lp(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(b.);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",b["string-value"]!=null&&(E=ar(b["string-value"]),w=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(ne=!1,y.t==="s"&&(y.v=E||"",w.length&&(y.R=w),ne=x==0),L.Target&&(y.l=L),j.length>0&&(y.c=j,j=[]),E&&r.cellText!==!1&&(y.w=E),ne&&(y.t="z",delete y.v),(!ne||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=P))for(var te=0;te<D;++te){if(F=parseInt(b["number-columns-repeated"]||"1",10),r.dense)for(g[P+te]||(g[P+te]=[]),g[P+te][R]=te==0?y:Fn(y);--F>0;)g[P+te][R+F]=Fn(y);else for(g[Mt({r:P+te,c:R})]=y;--F>0;)g[Mt({r:P+te,c:R+F})]=Fn(y);A.e.c<=R&&(A.e.c=R)}F=parseInt(b["number-columns-repeated"]||"1",10),R+=F-1,F=0,y={},E="",w=[]}L={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i;H.t=E,w.length&&(H.R=w),H.a=G,j.push(H)}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);G="",W=0,E="",x=0,w=[];break;case"creator":v[1]==="/"?G=n.slice(W,v.index):W=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);E="",x=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(m[o.name]=l,(i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&(l="",o=It(v[0],!1),s.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":a=It(v[0],!1),l+=DS[v[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":a=It(v[0],!1),l+=DS[v[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,v.index);break}else c=v.index+v[0].length;break;case"named-range":a=It(v[0],!1),z=xg(a["cell-range-address"]);var Z={Name:a.name,Ref:z[0]+"!"+z[1]};de&&(Z.Sheet=p.length),M.Names.push(Z);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(v[1]==="/"&&(!b||!b["string-value"])){var ye=Iae(n.slice(x,v.index));E=(E.length>0?E+`
`:"")+ye[0]}else It(v[0],!1),x=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{z=xg(It(v[0])["target-range-address"]),h[z[0]]["!autofilter"]={ref:z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(L=It(v[0],!1),!L.href)break;L.Target=ar(L.href),delete L.href,L.Target.charAt(0)=="#"&&L.Target.indexOf(".")>-1?(z=xg(L.Target.slice(1)),L.Target="#"+z[0]+"!"+z[1]):L.Target.match(/^\.\.[\\\/]/)&&(L.Target=L.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var J={Sheets:h,SheetNames:p,Workbook:M};return r.bookSheets&&delete J.Sheets,J}function PS(t,e){e=e||{},$s(t,"META-INF/manifest.xml")&&GJ(Zr(t,"META-INF/manifest.xml"),e);var r=Cs(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Yk(Ar(r),e);return $s(t,"meta.xml")&&(n.Props=ck(Zr(t,"meta.xml"))),n}function RS(t,e){return Yk(t,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function wx(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Xv(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Ar(yl(t))}function Yv(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function FS(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function kae(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function Fd(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function dn(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Yn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=Fd(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=Fd(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function Cx(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Dae(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=Fd(t,n),i=Yn(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:dn(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=Yn(o.data),c=dn(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=dn(i[3][0].data)>>>0>0),r.push(a)}return r}function Pae(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Fd(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Yv(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var u=Yv(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function Rae(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(Pae(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Yv(e)}function Fae(t,e,r,n){var s=wx(t),i=s.getUint32(4,!0),a=(n>1?12:8)+FS(i&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);i&512&&(o=s.getUint32(a,!0),a+=4),a+=FS(i&(n>1?12288:4096))*4,i&16&&(l=s.getUint32(a,!0),a+=4),i&32&&(c=s.getFloat64(a,!0),a+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(a,!0)*1e3),a+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:e[l]};else if(!isNaN(c))f={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function Nae(t,e,r){var n=wx(t),s=n.getUint32(8,!0),i=12,a=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);s&1&&(l=kae(t,i),i+=16),s&2&&(c=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=n.getUint32(i,!0),i+=4),s&16&&(a=n.getUint32(i,!0),i+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:e[o]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(a>-1)f={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return f}function Oae(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return Fae(t,e,r,t[0]);case 5:return Nae(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function so(t){var e=Yn(t);return Fd(e[1][0].data)}function NS(t,e){var r=Yn(e.data),n=dn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(a){var o=Yn(a.data),l=dn(o[1][0].data)>>>0;switch(n){case 1:i[l]=Xv(o[3][0].data);break;case 8:{var c=t[so(o[9][0].data)][0],u=Yn(c.data),f=t[so(u[1][0].data)][0],h=dn(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=Yn(f.data);i[l]=p[3].map(function(g){return Xv(g.data)}).join("")}break}}),i}function Mae(t,e){var r,n,s,i,a,o,l,c,u,f,h,p,g,v,y=Yn(t),b=dn(y[1][0].data)>>>0,E=dn(y[2][0].data)>>>0,x=((n=(r=y[8])==null?void 0:r[0])==null?void 0:n.data)&&dn(y[8][0].data)>0||!1,w,P;if((i=(s=y[7])==null?void 0:s[0])!=null&&i.data&&e!=0)w=(o=(a=y[7])==null?void 0:a[0])==null?void 0:o.data,P=(c=(l=y[6])==null?void 0:l[0])==null?void 0:c.data;else if((f=(u=y[4])==null?void 0:u[0])!=null&&f.data&&e!=1)w=(p=(h=y[4])==null?void 0:h[0])==null?void 0:p.data,P=(v=(g=y[3])==null?void 0:g[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var R=x?4:1,A=wx(w),_=[],m=0;m<w.length/2;++m){var S=A.getUint16(m*2,!0);S<65535&&_.push([m,S])}if(_.length!=E)throw"Expected ".concat(E," cells, found ").concat(_.length);var I=[];for(m=0;m<_.length-1;++m)I[_[m][0]]=P.subarray(_[m][1]*R,_[m+1][1]*R);return _.length>=1&&(I[_[_.length-1][0]]=P.subarray(_[_.length-1][1]*R)),{R:b,cells:I}}function Lae(t,e){var r,n=Yn(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?dn(n[7][0].data)>>>0>0?1:0:-1,i=Cx(n[5],function(a){return Mae(a,s)});return{nrows:dn(n[4][0].data)>>>0,data:i.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function Bae(t,e,r){var n,s=Yn(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(dn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(dn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=nr(i);var a=Yn(s[4][0].data),o=NS(t,t[so(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?NS(t,t[so(a[17][0].data)][0]):[],c=Yn(a[3][0].data),u=0;c[1].forEach(function(f){var h=Yn(f.data),p=t[so(h[2][0].data)][0],g=dn(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var v=Lae(t,p);v.data.forEach(function(y,b){y.forEach(function(E,x){var w=Mt({r:u+b,c:x}),P=Oae(E,o,l);P&&(r[w]=P)})}),u+=v.nrows})}function Uae(t,e){var r=Yn(e.data),n={"!ref":"A1"},s=t[so(r[2][0].data)],i=dn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Bae(t,s[0],n),n}function $ae(t,e){var r,n=Yn(e.data),s={name:(r=n[1])!=null&&r[0]?Xv(n[1][0].data):"",sheets:[]},i=Cx(n[2],so);return i.forEach(function(a){t[a].forEach(function(o){var l=dn(o.meta[1][0].data);l==6e3&&s.sheets.push(Uae(t,o))})}),s}function Vae(t,e){var r=Dx(),n=Yn(e.data),s=Cx(n[1],so);if(s.forEach(function(i){t[i].forEach(function(a){var o=dn(a.meta[1][0].data);if(o==2){var l=$ae(t,a);l.sheets.forEach(function(c,u){Px(r,c,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function _g(t){var e,r,n,s,i={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Rae(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var u;try{u=Dae(c)}catch(f){return console.log("## "+(f.message||f))}u.forEach(function(f){i[f.id]=f.messages,a.push(f.id)})}}),!a.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&dn(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||a.forEach(function(l){i[l].forEach(function(c){var u=dn(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Vae(i,o)}function Hae(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function Ix(t){Hae([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function jae(t){return ql.WS.indexOf(t)>-1?"sheet":t==ql.CS?"chart":t==ql.DS?"dialog":t==ql.MS?"macro":t&&t.length?t:"sheet"}function Gae(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,jae(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Wae(t,e,r,n,s,i,a,o,l,c,u,f){try{i[n]=Xu(Cs(t,r,!0),e);var h=Zr(t,e),p;switch(o){case"sheet":p=Qse(h,e,s,l,i[n],c,u,f);break;case"chart":if(p=Jse(h,e,s,l,i[n],c,u,f),!p||!p["!drawel"])break;var g=bu(p["!drawel"].Target,e),v=Gv(g),y=Yte(Cs(t,g,!0),Xu(Cs(t,v,!0),g)),b=bu(y,g),E=Gv(b);p=Nse(Cs(t,b,!0),b,l,Xu(Cs(t,E,!0),b),c,p);break;case"macro":p=Zse(h,e,s,l,i[n],c,u,f);break;case"dialog":p=eae(h,e,s,l,i[n],c,u,f);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=p;var x=[];i&&i[n]&&Ua(i[n]).forEach(function(w){var P="";if(i[n][w].Type==ql.CMNT){P=bu(i[n][w].Target,e);var R=sae(Zr(t,P,!0),P,l);if(!R||!R.length)return;xS(p,R,!1)}i[n][w].Type==ql.TCMNT&&(P=bu(i[n][w].Target,e),x=x.concat(Jte(Zr(t,P,!0),l)))}),x&&x.length&&xS(p,x,!0,l.people||[])}catch(w){if(l.WTF)throw w}}function Ls(t){return t.charAt(0)=="/"?t.slice(1):t}function zae(t,e){if(NI(),e=e||{},Ix(e),$s(t,"META-INF/manifest.xml")||$s(t,"objectdata.xml"))return PS(t,e);if($s(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof _g<"u"){if(t.FileIndex)return _g(t);var r=rr.utils.cfb_new();return zb(t).forEach(function(O){KQ(r,O,zQ(t,O))}),_g(r)}throw new Error("Unsupported NUMBERS file")}if(!$s(t,"[Content_Types].xml"))throw $s(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):$s(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=zb(t),s=HJ(Cs(t,"[Content_Types].xml")),i=!1,a,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Zr(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Zr(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(Ju=[],s.sst)try{Ju=nae(Zr(t,Ls(s.sst)),s.sst,e)}catch(O){if(e.WTF)throw O}e.cellStyles&&s.themes.length&&(l=rae(Cs(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=tae(Zr(t,Ls(s.style)),s.style,l,e))}s.links.map(function(O){try{var D=Xu(Cs(t,Gv(Ls(O))),O);return iae(Zr(t,Ls(O)),D,O,e)}catch{}});var u=Yse(Zr(t,Ls(s.workbooks[0])),s.workbooks[0],e),f={},h="";s.coreprops.length&&(h=Zr(t,Ls(s.coreprops[0]),!0),h&&(f=ck(h)),s.extprops.length!==0&&(h=Zr(t,Ls(s.extprops[0]),!0),h&&KJ(h,f,e)));var p={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(h=Cs(t,Ls(s.custprops[0]),!0),h&&(p=XJ(h,e)));var g={};if((e.bookSheets||e.bookProps)&&(u.Sheets?a=u.Sheets.map(function(D){return D.name}):f.Worksheets&&f.SheetNames.length>0&&(a=f.SheetNames),e.bookProps&&(g.Props=f,g.Custprops=p),e.bookSheets&&typeof a<"u"&&(g.SheetNames=a),e.bookSheets?g.SheetNames:e.bookProps))return g;a={};var v={};e.bookDeps&&s.calcchain&&(v=aae(Zr(t,Ls(s.calcchain)),s.calcchain));var y=0,b={},E,x;{var w=u.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var P=0;P!=w.length;++P)f.SheetNames[P]=w[P].name}var R=i?"bin":"xml",A=s.workbooks[0].lastIndexOf("/"),_=(s.workbooks[0].slice(0,A+1)+"_rels/"+s.workbooks[0].slice(A+1)+".rels").replace(/^\//,"");$s(t,_)||(_="xl/_rels/workbook."+R+".rels");var m=Xu(Cs(t,_,!0),_.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=oae(Zr(t,Ls(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=Zte(Zr(t,Ls(s.people[0])),e)),m&&(m=Gae(m,u.Sheets));var S=Zr(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=f.Worksheets;++y){var I="sheet";if(m&&m[y]?(E="xl/"+m[y][1].replace(/[\/]?xl\//,""),$s(t,E)||(E=m[y][1]),$s(t,E)||(E=_.replace(/_rels\/.*$/,"")+m[y][1]),I=m[y][2]):(E="xl/worksheets/sheet"+(y+1-S)+"."+R,E=E.replace(/sheet0\./,"sheet.")),x=E.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(y!=e.sheets)continue e;break;case"string":if(f.SheetNames[y].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var k=!1,C=0;C!=e.sheets.length;++C)typeof e.sheets[C]=="number"&&e.sheets[C]==y&&(k=1),typeof e.sheets[C]=="string"&&e.sheets[C].toLowerCase()==f.SheetNames[y].toLowerCase()&&(k=1);if(!k)continue e}}Wae(t,E,x,f.SheetNames[y],y,b,a,I,e,u,l,c)}return g={Directory:s,Workbook:u,Props:f,Custprops:p,Deps:v,Sheets:a,SheetNames:f.SheetNames,Strings:Ju,Styles:c,Themes:l,SSF:Fn(Ut)},e&&e.bookFiles&&(t.files?(g.keys=n,g.files=t.files):(g.keys=[],g.files={},t.FullPaths.forEach(function(O,D){O=O.replace(/^Root Entry[\/]/,""),g.keys.push(O),g.files[O]=t.FileIndex[D]}))),e&&e.bookVBA&&(s.vba.length>0?g.vbaraw=Zr(t,Ls(s.vba[0]),!0):s.defaults&&s.defaults.bin===nre&&(g.vbaraw=Zr(t,"xl/vbaProject.bin",!0))),g}function Kae(t,e){var r=e||{},n="Workbook",s=rr.find(t,n);try{if(n="/!DataSpaces/Version",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Uee(s.content),n="/!DataSpaces/DataSpaceMap",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Vee(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=Hee(s.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Gee(s.content)}catch{}if(n="/EncryptionInfo",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Wee(s.content);if(n="/EncryptedPackage",s=rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function kx(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Rs(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function qae(t,e){return rr.find(t,"EncryptedPackage")?Kae(t,e):Kk(t,e)}function Xae(t,e){var r,n=t,s=e||{};return s.type||(s.type=Zt&&Buffer.isBuffer(t)?"buffer":"base64"),r=$I(n,s),zae(r,s)}function Qk(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Kv(t.slice(r),e);default:break e}return Dd.to_workbook(t,e)}function Yae(t,e){var r="",n=kx(t,e);switch(e.type){case"base64":r=Rs(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=il(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ar(r)),e.type="binary",Qk(r,e)}function Qae(t,e){var r=t;return e.type=="base64"&&(r=Rs(r)),r=wd.utils.decode(1200,r.slice(2),"str"),e.type="binary",Qk(r,e)}function Jae(t){return t.match(/[^\x00-\x7F]/)?Su(t):t}function bg(t,e,r,n){return n?(r.type="string",Dd.to_workbook(t,r)):Dd.to_workbook(e,r)}function Ph(t,e){bI();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Ph(new Uint8Array(t),(r=Fn(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),pc={},r.dateNF&&(pc.dateNF=r.dateNF),r.type||(r.type=Zt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Zt?"buffer":"binary",n=UQ(t),typeof Uint8Array<"u"&&!Zt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=Jae(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=Fn(r),r.type="array",Ph(ox(n),r)}switch((s=kx(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return qae(rr.read(n,r),r);break;case 9:if(s[1]<=8)return Kk(n,r);break;case 60:return Kv(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return wee(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return Aee.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Xae(n,r):bg(t,n,r,i);case 239:return s[3]===60?Kv(n,r):bg(t,n,r,i);case 255:if(s[1]===254)return Qae(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Qu.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Qu.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return yS.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return nte.to_workbook(n,r);break;case 10:case 13:case 32:return Yae(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return bee.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?yS.to_workbook(n,r):bg(t,n,r,i)}function Zae(t,e,r,n,s,i,a,o){var l=Nn(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!a||t[r])for(var p=e.s.c;p<=e.e.c;++p){var g=a?t[r][p]:t[n[p]+l];if(g===void 0||g.t===void 0){if(c===void 0)continue;i[p]!=null&&(h[i[p]]=c);continue}var v=g.v;switch(g.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[p]!=null){if(v==null)if(g.t=="e"&&v===null)h[i[p]]=null;else if(c!==void 0)h[i[p]]=c;else if(u&&v===null)h[i[p]]=null;else continue;else h[i[p]]=u&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?v:Ti(g,v,o);v!=null&&(f=!1)}}return{row:h,isempty:f}}function Qv(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=Gr(u);break;case"number":l=Gr(t["!ref"]),l.s.r=u;break;default:l=u}n>0&&(s=0);var f=Nn(l.s.r),h=[],p=[],g=0,v=0,y=Array.isArray(t),b=l.s.r,E=0,x={};y&&!t[b]&&(t[b]=[]);var w=c.skipHidden&&t["!cols"]||[],P=c.skipHidden&&t["!rows"]||[];for(E=l.s.c;E<=l.e.c;++E)if(!(w[E]||{}).hidden)switch(h[E]=un(E),r=y?t[b][E]:t[h[E]+f],n){case 1:i[E]=E-l.s.c;break;case 2:i[E]=h[E];break;case 3:i[E]=c.header[E-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=Ti(r,null,c),v=x[a]||0,!v)x[a]=1;else{do o=a+"_"+v++;while(x[o]);x[a]=v,x[o]=1}i[E]=o}for(b=l.s.r+s;b<=l.e.r;++b)if(!(P[b]||{}).hidden){var R=Zae(t,l,b,h,n,i,y,c);(R.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(p[g++]=R.row)}return p.length=g,p}var OS=/"/g;function eie(t,e,r,n,s,i,a,o){for(var l=!0,c=[],u="",f=Nn(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var p=o.dense?(t[r]||[])[h]:t[n[h]+f];if(p==null)u="";else if(p.v!=null){l=!1,u=""+(o.rawNumbers&&p.t=="n"?p.v:Ti(p,null,o));for(var g=0,v=0;g!==u.length;++g)if((v=u.charCodeAt(g))===s||v===i||v===34||o.forceQuotes){u='"'+u.replace(OS,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(l=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(OS,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(a)}function Jk(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Gr(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),u="",f=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],p=n.skipHidden&&t["!rows"]||[],g=s.s.c;g<=s.e.c;++g)(h[g]||{}).hidden||(f[g]=un(g));for(var v=0,y=s.s.r;y<=s.e.r;++y)(p[y]||{}).hidden||(u=eie(t,s,y,f,a,l,i,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((v++?o:"")+u)));return delete n.dense,r.join("")}function tie(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=Jk(t,e);return r}function rie(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Gr(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=un(o);for(var u=s.s.r;u<=s.e.r;++u)for(i=Nn(u),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[u]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function Zk(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?us(n.origin):n.origin;a=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var f=Gr(i["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),a==-1&&(a=f.e.r+1,u.e.r=a+e.length-1+s)}else a==-1&&(a=0,u.e.r=e.length-1+s);var h=n.header||[],p=0;e.forEach(function(v,y){Ua(v).forEach(function(b){(p=h.indexOf(b))==-1&&(h[p=h.length]=b);var E=v[b],x="z",w="",P=Mt({c:o+p,r:a+y+s});c=Nd(i,P),E&&typeof E=="object"&&!(E instanceof Date)?i[P]=E:(typeof E=="number"?x="n":typeof E=="boolean"?x="b":typeof E=="string"?x="s":E instanceof Date?(x="d",n.cellDates||(x="n",E=hs(E)),w=n.dateNF||Ut[14]):E===null&&n.nullError&&(x="e",E=0),c?(c.t=x,c.v=E,delete c.w,delete c.R,w&&(c.z=w)):i[P]=c={t:x,v:E},w&&(c.z=w))})}),u.e.c=Math.max(u.e.c,o+h.length-1);var g=Nn(a);if(s)for(p=0;p<h.length;++p)i[un(p+o)+g]={t:"s",v:h[p]};return i["!ref"]=nr(u),i}function nie(t,e){return Zk(null,t,e)}function Nd(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=us(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Nd(t,Mt(e)):Nd(t,Mt({r:e,c:r||0}))}function sie(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Dx(){return{SheetNames:[],Sheets:{}}}function Px(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(Hse(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function aie(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=sie(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function iie(t,e){return t.z=e,t}function eD(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function oie(t,e,r){return eD(t,"#"+e,r)}function lie(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function cie(t,e,r,n){for(var s=typeof e!="string"?e:Gr(e),i=typeof e=="string"?e:nr(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=Nd(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var uie={encode_col:un,encode_row:Nn,encode_cell:Mt,encode_range:nr,decode_col:gx,decode_row:mx,split_cell:_J,decode_cell:us,decode_range:Gc,format_cell:Ti,sheet_add_aoa:sk,sheet_add_json:Zk,sheet_add_dom:qk,aoa_to_sheet:Wc,json_to_sheet:nie,table_to_sheet:Xk,table_to_book:wae,sheet_to_csv:Jk,sheet_to_txt:tie,sheet_to_json:Qv,sheet_to_html:Tae,sheet_to_formulae:rie,sheet_to_row_object_array:Qv,sheet_get_cell:Nd,book_new:Dx,book_append_sheet:Px,book_set_sheet_visibility:aie,cell_set_number_format:iie,cell_set_hyperlink:eD,cell_set_internal_link:oie,cell_add_comment:lie,sheet_set_array_formula:cie,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const die={class:"admin-time-table"},fie={class:"header"},hie={class:"admin-action-btns"},pie=["disabled"],mie={class:"import-section"},gie={key:0,class:"import-preview"},vie={class:"import-options"},yie={class:"import-option-group"},xie=["disabled"],Eie=["value"],_ie={class:"import-option-group"},bie=["disabled"],Sie={class:"import-actions"},Aie=["disabled"],Tie={class:"content"},wie={key:0,class:"loading"},Cie={key:1,class:"time-tables-container"},Iie={key:0,class:"empty-state"},kie={key:1,class:"time-tables-list"},Die={class:"time-table-header"},Pie={class:"time-table-info"},Rie={class:"time-table-days"},Fie={class:"admin-action-btns"},Nie=["onClick"],Oie=["onClick"],Mie={class:"time-table-schedule"},Lie={class:"schedule-item-info"},Bie={class:"item-name"},Uie={class:"item-time"},$ie={class:"schedule-item-type"},Vie={class:"dialog-header"},Hie={class:"dialog-content"},jie={class:"form-group"},Gie={class:"form-group"},Wie={class:"days-checkboxes"},zie=["value"],Kie={class:"form-group"},qie={class:"schedule-items"},Xie={class:"item-row"},Yie=["onUpdate:modelValue"],Qie=["onUpdate:modelValue"],Jie=["onUpdate:modelValue"],Zie=["onUpdate:modelValue"],eoe=["onClick"],toe={__name:"AdminTimeTable",setup(t){const{saveAppSettings:e}=Ns(),r=ae(!0),n=ae(!1),s=ae([]),i=ae(!1),a=ae(-1),o=ae({name:"",days:[],schedule:[]}),l=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],c=ae(null),u=ae([]),f=ae([]),h=ae("overwrite"),p=ae(""),g=ae(""),v=be(()=>h.value==="overwrite"?p.value!=="":g.value.trim()!==""),y=()=>{const N=mn(o.value.name,{trim:!0,maxLength:100,removeDangerous:!0}),M=Hr(N);if(!M.isSafe)return alert(`Security threat detected in time table name: ${M.threats.join(", ")}`),!1;if(o.value.name=N,!o.value.name.trim())return alert("Please enter a time table name"),!1;if(o.value.days.length===0)return alert("Please select at least one day"),!1;if(o.value.schedule.length===0)return alert("Please add at least one schedule item"),!1;for(let L=0;L<o.value.schedule.length;L++){const z=o.value.schedule[L],j=mn(z.name,{trim:!0,maxLength:50,removeDangerous:!0}),H=Hr(j);if(!H.isSafe)return alert(`Security threat detected in schedule item ${L+1}: ${H.threats.join(", ")}`),!1;if(z.name=j,!z.name.trim())return alert(`Please enter a name for schedule item ${L+1}`),!1;if(!z.startTime||!z.endTime)return alert(`Please enter start and end times for ${z.name}`),!1;if(z.startTime>=z.endTime)return alert(`${z.name}: Start time must be before end time`),!1}return!0},b=N=>{const M=mn(N,{trim:!0,maxLength:100,removeDangerous:!0}),L=Hr(M);return L.isSafe?M:(alert(`Security threat detected in import name: ${L.threats.join(", ")}`),null)};async function E(){try{console.log("Loading time tables..."),r.value=!0;const N=await sr(Ze(qe,"app_settings","global"));if(N.exists()){const M=N.data();s.value=M.timeTables||[],console.log("Loaded time tables:",s.value)}else s.value=[],console.log("No time tables found, starting with empty array");r.value=!1}catch(N){console.error("Error loading time tables:",N),r.value=!1}}function x(){a.value=-1,o.value={name:"",days:[],schedule:[]},i.value=!0}function w(N){a.value=N,o.value=JSON.parse(JSON.stringify(s.value[N])),i.value=!0}function P(N){confirm("Are you sure you want to delete this time table?")&&s.value.splice(N,1)}function R(){o.value.schedule.push({name:"",type:"period",startTime:"",endTime:""})}function A(N){o.value.schedule.splice(N,1)}function _(){if(!y())return;if(!ks("saveTimeTable",10,6e4).allowed){alert("Too many save requests. Please wait before saving again.");return}a.value===-1?s.value.push(JSON.parse(JSON.stringify(o.value))):s.value[a.value]=JSON.parse(JSON.stringify(o.value)),m()}function m(){i.value=!1,a.value=-1,o.value={name:"",days:[],schedule:[]}}async function S(){try{if(!ks("saveAllTimeTables",5,3e5).allowed){alert("Too many save all requests. Please wait before saving again.");return}n.value=!0,console.log("Saving time tables:",s.value);const M=await sr(Ze(qe,"app_settings","global")),z={...M.exists()?M.data():{},timeTables:s.value};await e(z),n.value=!1,console.log("Time tables saved successfully")}catch(N){console.error("Error saving time tables:",N),n.value=!1}}function I(N){return N.length===0?"No days selected":N.length===7?"Every day":N.length===5&&N.includes("monday")&&N.includes("friday")?"Weekdays":N.map(M=>{const L=l.find(z=>z.value===M);return L?L.label:M}).join(", ")}function k(N){if(!N)return"";const[M,L]=N.split(":"),z=parseInt(M),j=z>=12?"PM":"AM";return`${z===0?12:z>12?z-12:z}:${L} ${j}`}function C(){c.value&&c.value.click()}function O(N){const M=N.target.files[0];if(!M)return;const L=sl(M,{allowedTypes:["csv","excel"],maxSize:5*1024*1024,fieldName:"Time Table Import File"});if(!L.isValid){alert(L.error),N.target.value="";return}const z=Hr(M.name);if(!z.isSafe){alert(`File name contains potentially dangerous content: ${z.threats.join(", ")}`),N.target.value="";return}const j=new FileReader;j.onload=H=>{try{let G=H.target.result,W;M.name.endsWith(".csv")?W=Ph(G,{type:"binary"}):W=Ph(G,{type:"binary"});const ne=W.SheetNames[0],de=W.Sheets[ne],ce=uie.sheet_to_json(de,{defval:""}).map(te=>{const Z={};return Object.entries(te).forEach(([ye,J])=>{const X=mn(ye,{trim:!0,maxLength:50,removeDangerous:!0}),Q=mn(String(J),{trim:!0,maxLength:100,removeDangerous:!0});Z[X]=Q}),Z});u.value=ce,f.value=ce.length?Object.keys(ce[0]):[]}catch(G){alert("Error parsing file. Please check the file format and try again."),console.error("File parsing error:",G)}},j.readAsBinaryString(M)}function D(){try{if(!ks("importTimeTable",3,3e5).allowed){alert("Too many import requests. Please wait before importing again.");return}const M=u.value.map(L=>{const z=L.name||L.Name||L.period||L.Period||L.item||L.Item||"Unknown",j=L.startTime||L["Start Time"]||L.start||L.Start||"08:00",H=L.endTime||L["End Time"]||L.end||L.End||"08:55",G=mn(z,{trim:!0,maxLength:50,removeDangerous:!0}),W=Hr(G);if(!W.isSafe)return console.warn(`Security threat detected in imported item: ${W.threats.join(", ")}`),null;let ne="period";const de=L.type||L.Type||"",se=G.toLowerCase();return de.toLowerCase().includes("lunch")||se.includes("lunch")?ne="lunch":de.toLowerCase().includes("break")||se.includes("break")?ne="break":(de.toLowerCase().includes("other")||se.includes("other"))&&(ne="other"),{name:G,type:ne,startTime:j,endTime:H}}).filter(L=>L&&L.name&&L.name!=="Unknown");if(M.length===0){alert("No valid schedule items found in the imported data. Please check your file format.");return}if(h.value==="overwrite"){if(p.value===""){alert("Please select a time table to overwrite");return}const L=parseInt(p.value);s.value[L]={...s.value[L],schedule:M}}else{const L=b(g.value);if(!L)return;const z={name:L,days:["monday","tuesday","wednesday","thursday","friday"],schedule:M};s.value.push(z)}u.value=[],f.value=[],h.value="overwrite",p.value="",g.value="",alert("Time table imported successfully!")}catch(N){console.error("Error importing time table:",N),alert("Error importing time table. Please check your file format and try again.")}}function F(){u.value=[],f.value=[],h.value="overwrite",p.value="",g.value=""}return Wt(E),(N,M)=>(B(),U("div",die,[d("div",fie,[M[7]||(M[7]=d("h1",null,"Time Table Management",-1)),d("div",hie,[d("button",{onClick:S,class:"admin-action-btn primary",disabled:n.value,style:{"min-width":"160px","max-width":"160px"}},Y(n.value?"Saving...":"Save Time Tables"),9,pie),d("button",{onClick:x,class:"admin-action-btn secondary",style:{"min-width":"140px","max-width":"140px"}}," Add Time Table ")])]),d("div",mie,[d("button",{onClick:C,class:"admin-action-btn info",style:{"min-width":"150px","max-width":"150px"}},"Import CSV/XLSX"),d("input",{ref_key:"fileInput",ref:c,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:O},null,544),M[8]||(M[8]=d("div",{class:"import-note"}," You can export from Google Sheets or Excel as CSV, or upload your Excel file directly. ",-1))]),u.value.length?(B(),U("div",gie,[M[13]||(M[13]=d("h3",null,"Preview Imported Time Table",-1)),d("table",null,[d("thead",null,[d("tr",null,[(B(!0),U(Pe,null,je(f.value,L=>(B(),U("th",{key:L},Y(L),1))),128))])]),d("tbody",null,[(B(!0),U(Pe,null,je(u.value,(L,z)=>(B(),U("tr",{key:z},[(B(!0),U(Pe,null,je(f.value,j=>(B(),U("td",{key:j},Y(L[j]),1))),128))]))),128))])]),d("div",vie,[M[12]||(M[12]=d("h4",null,"Import Options",-1)),d("div",yie,[d("label",null,[Be(d("input",{type:"radio","onUpdate:modelValue":M[0]||(M[0]=L=>h.value=L),value:"overwrite"},null,512),[[pa,h.value]]),M[9]||(M[9]=we(" Overwrite existing time table: "))]),Be(d("select",{"onUpdate:modelValue":M[1]||(M[1]=L=>p.value=L),disabled:h.value!=="overwrite",class:"form-select"},[M[10]||(M[10]=d("option",{value:""},"Select a time table...",-1)),(B(!0),U(Pe,null,je(s.value,(L,z)=>(B(),U("option",{key:z,value:z},Y(L.name),9,Eie))),128))],8,xie),[[cr,p.value]])]),d("div",_ie,[d("label",null,[Be(d("input",{type:"radio","onUpdate:modelValue":M[2]||(M[2]=L=>h.value=L),value:"create"},null,512),[[pa,h.value]]),M[11]||(M[11]=we(" Create new time table: "))]),Be(d("input",{"onUpdate:modelValue":M[3]||(M[3]=L=>g.value=L),type:"text",placeholder:"Enter time table name...",disabled:h.value!=="create",class:"form-input"},null,8,bie),[[gt,g.value]])])]),d("div",Sie,[d("button",{onClick:D,class:"btn btn-primary",disabled:!v.value},Y(h.value==="overwrite"?"Overwrite Time Table":"Create New Time Table"),9,Aie),d("button",{onClick:F,class:"btn btn-secondary"},"Cancel")])])):xe("",!0),d("div",Tie,[r.value?(B(),U("div",wie," Loading time tables... ")):(B(),U("div",Cie,[s.value.length===0?(B(),U("div",Iie,[M[14]||(M[14]=d("h3",null,"No Time Tables Created",-1)),M[15]||(M[15]=d("p",null,"Create your first time table to get started.",-1)),d("button",{onClick:x,class:"btn btn-primary"},"Create Time Table")])):(B(),U("div",kie,[(B(!0),U(Pe,null,je(s.value,(L,z)=>(B(),U("div",{key:z,class:"time-table-card"},[d("div",Die,[d("div",Pie,[d("h3",null,Y(L.name),1),d("p",Rie,Y(I(L.days)),1)]),d("div",Fie,[d("button",{onClick:j=>w(z),class:"admin-action-btn edit"}," Edit ",8,Nie),d("button",{onClick:j=>P(z),class:"admin-action-btn delete"}," Delete ",8,Oie)])]),d("div",Mie,[(B(!0),U(Pe,null,je(L.schedule,(j,H)=>(B(),U("div",{key:H,class:"schedule-item"},[d("div",Lie,[d("span",Bie,Y(j.name),1),d("span",Uie,Y(k(j.startTime))+" - "+Y(k(j.endTime)),1)]),d("div",$ie,[d("span",{class:Qe(["type-badge",j.type])},Y(j.type),3)])]))),128))])]))),128))]))]))]),i.value?(B(),U("div",{key:1,class:"edit-dialog-overlay",onClick:m},[d("div",{class:"edit-dialog",onClick:M[6]||(M[6]=Xr(()=>{},["stop"]))},[d("div",Vie,[d("h2",null,Y(a.value===-1?"Create Time Table":"Edit Time Table"),1),d("button",{onClick:m,class:"btn-close"},"")]),d("div",Hie,[d("div",jie,[M[16]||(M[16]=d("label",{for:"timeTableName"},"Time Table Name",-1)),Be(d("input",{id:"timeTableName","onUpdate:modelValue":M[4]||(M[4]=L=>o.value.name=L),type:"text",placeholder:"e.g., Regular Schedule, Rally Day, Minimum Day",class:"form-input"},null,512),[[gt,o.value.name]])]),d("div",Gie,[M[17]||(M[17]=d("label",null,"Days This Schedule Applies",-1)),d("div",Wie,[(B(),U(Pe,null,je(l,L=>d("label",{key:L.value,class:"day-checkbox"},[Be(d("input",{type:"checkbox",value:L.value,"onUpdate:modelValue":M[5]||(M[5]=z=>o.value.days=z)},null,8,zie),[[Et,o.value.days]]),we(" "+Y(L.label),1)])),64))])]),d("div",Kie,[M[20]||(M[20]=d("label",null,"Schedule Items",-1)),d("div",qie,[(B(!0),U(Pe,null,je(o.value.schedule,(L,z)=>(B(),U("div",{key:z,class:"schedule-item-edit"},[d("div",Xie,[Be(d("input",{"onUpdate:modelValue":j=>L.name=j,type:"text",placeholder:"Period 1, Lunch, Break, etc.",class:"form-input item-name-input"},null,8,Yie),[[gt,L.name]]),Be(d("select",{"onUpdate:modelValue":j=>L.type=j,class:"form-select item-type-select"},M[18]||(M[18]=[d("option",{value:"period"},"Period",-1),d("option",{value:"break"},"Break",-1),d("option",{value:"lunch"},"Lunch",-1),d("option",{value:"other"},"Other",-1)]),8,Qie),[[cr,L.type]]),Be(d("input",{"onUpdate:modelValue":j=>L.startTime=j,type:"time",class:"form-input time-input"},null,8,Jie),[[gt,L.startTime]]),M[19]||(M[19]=d("span",{class:"time-separator"},"to",-1)),Be(d("input",{"onUpdate:modelValue":j=>L.endTime=j,type:"time",class:"form-input time-input"},null,8,Zie),[[gt,L.endTime]]),d("button",{onClick:j=>A(z),class:"admin-action-btn delete"}," Delete ",8,eoe)])]))),128)),d("button",{onClick:R,class:"admin-action-btn secondary",style:{"min-width":"150px","max-width":"150px"}}," Add Schedule Item ")])])]),d("div",{class:"admin-action-btns"},[d("button",{onClick:m,class:"admin-action-btn cancel",style:{"min-width":"100px","max-width":"100px"}},"Cancel"),d("button",{onClick:_,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},"Save Time Table")])])])):xe("",!0)]))}},tD=xt(toe,[["__scopeId","data-v-428c8e72"]]);function roe(){const t=ae({}),e=ae(!1);async function r(){e.value=!0;try{const f=await Gt(At(qe,"aideSchedules")),h={};f.forEach(p=>{h[p.id]=p.data()}),t.value=h}catch(f){console.error("Error loading aide schedules:",f),t.value={}}finally{e.value=!1}}async function n(f){e.value=!0;try{const h=await sr(Ze(qe,"aideSchedules",f));h.exists()?t.value[f]=h.data():t.value[f]={schedule:{},directAssignment:[]}}catch(h){console.error("Error loading aide schedule:",h),t.value[f]={schedule:{},directAssignment:[]}}finally{e.value=!1}}async function s(f,h,p=!0){try{const g=JSON.parse(JSON.stringify(h));p?await jt(Ze(qe,"aideSchedules",f),g,{merge:!0}):await jt(Ze(qe,"aideSchedules",f),g),t.value[f]=g}catch(g){throw console.error("Error saving aide schedule:",g),g}}async function i(){try{const f=Object.entries(t.value);for(const[h,p]of f){const g=JSON.parse(JSON.stringify(p));await jt(Ze(qe,"aideSchedules",h),g,{merge:!0})}}catch(f){throw console.error("Error saving all aide schedules:",f),f}}function a(f,h){const p=[];return Object.entries(t.value).forEach(([g,v])=>{v.schedule&&v.schedule[h]&&(Array.isArray(v.schedule[h])?v.schedule[h]:[v.schedule[h]]).includes(f)&&p.push(g)}),p}function o(f){var p;const h=(p=t.value[f])==null?void 0:p.directAssignment;return Array.isArray(h)?h.length>0?h[0]:null:h||null}function l(f){return Object.keys(t.value).find(p=>{var v;const g=(v=t.value[p])==null?void 0:v.directAssignment;return Array.isArray(g)?g.includes(f):g===f})||null}function c(f,h,p){const g=[],v=t.value[f];return v&&((Array.isArray(v.directAssignment)?v.directAssignment:v.directAssignment?[v.directAssignment]:[]).forEach(b=>{if(b){const E=h.find(x=>x.id===b);E&&g.push({...E,assignmentType:"direct"})}}),Object.entries(v.schedule||{}).forEach(([b,E])=>{E&&(Array.isArray(E)?E:[E]).forEach(w=>{w&&h.forEach(P=>{if(P.schedule&&P.schedule[b]===w){const R=g.findIndex(A=>A.id===P.id);R===-1?g.push({...P,assignmentType:"class",period:b,teacherId:w}):(g[R].assignmentType="both",g[R].period=b,g[R].teacherId=w)}})})})),g}function u(f,h,p,g){if(!f||!h||!p||!g)return!1;const v=p.find(w=>w.id===h);if(!v)return!1;const y=t.value[f];if(!y)return!1;if((Array.isArray(y.directAssignment)?y.directAssignment:y.directAssignment?[y.directAssignment]:[]).includes(h))return!0;if(!v.schedule)return!1;const E=y.schedule||{};return Object.entries(v.schedule).some(([w,P])=>{const R=E[w];return R?(Array.isArray(R)?R:[R]).includes(P):!1})}return{aideSchedule:be(()=>t.value),loading:be(()=>e.value),loadAideSchedules:r,loadAideSchedule:n,saveAideSchedule:s,saveAllAideSchedules:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}var noe={exports:{}};const soe=ex(c8);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function MS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function $a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MS(Object(r),!0).forEach(function(n){aoe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D0=function(e){return typeof e}:D0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D0(t)}function aoe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qs(){return qs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qs.apply(this,arguments)}function ioe(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function ooe(t,e){if(t==null)return{};var r=ioe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function loe(t){return coe(t)||uoe(t)||doe(t)||foe()}function coe(t){if(Array.isArray(t))return Jv(t)}function uoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function doe(t,e){if(t){if(typeof t=="string")return Jv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jv(t,e)}}function Jv(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function foe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hoe="1.14.0";function pi(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Di=pi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ff=pi(/Edge/i),LS=pi(/firefox/i),td=pi(/safari/i)&&!pi(/chrome/i)&&!pi(/android/i),rD=pi(/iP(ad|od|hone)/i),poe=pi(/chrome/i)&&pi(/android/i),nD={capture:!1,passive:!1};function Kt(t,e,r){t.addEventListener(e,r,!Di&&nD)}function zt(t,e,r){t.removeEventListener(e,r,!Di&&nD)}function Rh(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function moe(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function na(t,e,r,n){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&Rh(t,e):Rh(t,e))||n&&t===r)return t;if(t===r)break}while(t=moe(t))}return null}var BS=/\s+/g;function Fr(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(BS," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(BS," ")}}function mt(t,e,r){var n=t&&t.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=r+(typeof r=="string"?"":"px")}}function Ko(t,e){var r="";if(typeof t=="string")r=t;else do{var n=mt(t,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function sD(t,e,r){if(t){var n=t.getElementsByTagName(e),s=0,i=n.length;if(r)for(;s<i;s++)r(n[s],s);return n}return[]}function Oa(){var t=document.scrollingElement;return t||document.documentElement}function Pr(t,e,r,n,s){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,o,l,c,u,f;if(t!==window&&t.parentNode&&t!==Oa()?(i=t.getBoundingClientRect(),a=i.top,o=i.left,l=i.bottom,c=i.right,u=i.height,f=i.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,f=window.innerWidth),(e||r)&&t!==window&&(s=s||t.parentNode,!Di))do if(s&&s.getBoundingClientRect&&(mt(s,"transform")!=="none"||r&&mt(s,"position")!=="static")){var h=s.getBoundingClientRect();a-=h.top+parseInt(mt(s,"border-top-width")),o-=h.left+parseInt(mt(s,"border-left-width")),l=a+i.height,c=o+i.width;break}while(s=s.parentNode);if(n&&t!==window){var p=Ko(s||t),g=p&&p.a,v=p&&p.d;p&&(a/=v,o/=g,f/=g,u/=v,l=a+u,c=o+f)}return{top:a,left:o,bottom:l,right:c,width:f,height:u}}}function US(t,e,r){for(var n=Zi(t,!0),s=Pr(t)[e];n;){var i=Pr(n)[r],a=void 0;if(a=s>=i,!a)return n;if(n===Oa())break;n=Zi(n,!1)}return!1}function Rc(t,e,r,n){for(var s=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==wt.ghost&&(n||a[i]!==wt.dragged)&&na(a[i],r.draggable,t,!1)){if(s===e)return a[i];s++}i++}return null}function Rx(t,e){for(var r=t.lastElementChild;r&&(r===wt.ghost||mt(r,"display")==="none"||e&&!Rh(r,e));)r=r.previousElementSibling;return r||null}function $r(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==wt.clone&&(!e||Rh(t,e))&&r++;return r}function $S(t){var e=0,r=0,n=Oa();if(t)do{var s=Ko(t),i=s.a,a=s.d;e+=t.scrollLeft*i,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function goe(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r)}return-1}function Zi(t,e){if(!t||!t.getBoundingClientRect)return Oa();var r=t,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=mt(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return Oa();if(n||e)return r;n=!0}}while(r=r.parentNode);return Oa()}function voe(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function Sg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var rd;function aD(t,e){return function(){if(!rd){var r=arguments,n=this;r.length===1?t.call(n,r[0]):t.apply(n,r),rd=setTimeout(function(){rd=void 0},e)}}}function yoe(){clearTimeout(rd),rd=void 0}function iD(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function Fx(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function VS(t,e){mt(t,"position","absolute"),mt(t,"top",e.top),mt(t,"left",e.left),mt(t,"width",e.width),mt(t,"height",e.height)}function Ag(t){mt(t,"position",""),mt(t,"top",""),mt(t,"left",""),mt(t,"width",""),mt(t,"height","")}var Kn="Sortable"+new Date().getTime();function xoe(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(mt(s,"display")==="none"||s===wt.ghost)){t.push({target:s,rect:Pr(s)});var i=$a({},t[t.length-1].rect);if(s.thisAnimationDuration){var a=Ko(s,!0);a&&(i.top-=a.f,i.left-=a.e)}s.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(goe(t,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,a=0;t.forEach(function(o){var l=0,c=o.target,u=c.fromRect,f=Pr(c),h=c.prevFromRect,p=c.prevToRect,g=o.rect,v=Ko(c,!0);v&&(f.top-=v.f,f.left-=v.e),c.toRect=f,c.thisAnimationDuration&&Sg(h,f)&&!Sg(u,f)&&(g.top-f.top)/(g.left-f.left)===(u.top-f.top)/(u.left-f.left)&&(l=_oe(g,h,p,s.options)),Sg(f,u)||(c.prevFromRect=u,c.prevToRect=f,l||(l=s.options.animation),s.animate(c,g,f,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,s,i,a){if(a){mt(n,"transition",""),mt(n,"transform","");var o=Ko(this.el),l=o&&o.a,c=o&&o.d,u=(s.left-i.left)/(l||1),f=(s.top-i.top)/(c||1);n.animatingX=!!u,n.animatingY=!!f,mt(n,"transform","translate3d("+u+"px,"+f+"px,0)"),this.forRepaintDummy=Eoe(n),mt(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),mt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){mt(n,"transition",""),mt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function Eoe(t){return t.offsetWidth}function _oe(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}var Nl=[],Tg={initializeByDefault:!0},hf={mount:function(e){for(var r in Tg)Tg.hasOwnProperty(r)&&!(r in e)&&(e[r]=Tg[r]);Nl.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Nl.push(e)},pluginEvent:function(e,r,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var i=e+"Global";Nl.forEach(function(a){r[a.pluginName]&&(r[a.pluginName][i]&&r[a.pluginName][i]($a({sortable:r},n)),r.options[a.pluginName]&&r[a.pluginName][e]&&r[a.pluginName][e]($a({sortable:r},n)))})},initializePlugins:function(e,r,n,s){Nl.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,r,e.options);c.sortable=e,c.options=e.options,e[l]=c,qs(n,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,r){var n={};return Nl.forEach(function(s){typeof s.eventProperties=="function"&&qs(n,s.eventProperties.call(r[s.pluginName],e))}),n},modifyOption:function(e,r,n){var s;return Nl.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(s=i.optionListeners[r].call(e[i.pluginName],n))}),s}};function Au(t){var e=t.sortable,r=t.rootEl,n=t.name,s=t.targetEl,i=t.cloneEl,a=t.toEl,o=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,f=t.newDraggableIndex,h=t.originalEvent,p=t.putSortable,g=t.extraEventProperties;if(e=e||r&&r[Kn],!!e){var v,y=e.options,b="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Di&&!ff?v=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(n,!0,!0)),v.to=a||r,v.from=o||r,v.item=s||r,v.clone=i,v.oldIndex=l,v.newIndex=c,v.oldDraggableIndex=u,v.newDraggableIndex=f,v.originalEvent=h,v.pullMode=p?p.lastPutMode:void 0;var E=$a($a({},g),hf.getEventProperties(n,e));for(var x in E)v[x]=E[x];r&&r.dispatchEvent(v),y[b]&&y[b].call(e,v)}}var boe=["evt"],ms=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,i=ooe(n,boe);hf.pluginEvent.bind(wt)(e,r,$a({dragEl:rt,parentEl:Lr,ghostEl:Bt,rootEl:kr,nextEl:Fo,lastDownEl:P0,cloneEl:Br,cloneHidden:Xi,dragStarted:Tu,putSortable:Sn,activeSortable:wt.active,originalEvent:s,oldIndex:Xl,oldDraggableIndex:nd,newIndex:Ts,newDraggableIndex:zi,hideGhostForTarget:uD,unhideGhostForTarget:dD,cloneNowHidden:function(){Xi=!0},cloneNowShown:function(){Xi=!1},dispatchSortableEvent:function(o){as({sortable:r,name:o,originalEvent:s})}},i))};function as(t){Au($a({putSortable:Sn,cloneEl:Br,targetEl:rt,rootEl:kr,oldIndex:Xl,oldDraggableIndex:nd,newIndex:Ts,newDraggableIndex:zi},t))}var rt,Lr,Bt,kr,Fo,P0,Br,Xi,Xl,Ts,nd,zi,n0,Sn,Wl=!1,Fh=!1,Nh=[],ko,ta,wg,Cg,HS,jS,Tu,Ol,sd,ad=!1,s0=!1,R0,$n,Ig=[],Zv=!1,Oh=[],Vp=typeof document<"u",a0=rD,GS=ff||Di?"cssFloat":"float",Soe=Vp&&!poe&&!rD&&"draggable"in document.createElement("div"),oD=function(){if(Vp){if(Di)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),lD=function(e,r){var n=mt(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Rc(e,0,r),a=Rc(e,1,r),o=i&&mt(i),l=a&&mt(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+Pr(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Pr(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&o.float!=="none"){var f=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return i&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=s&&n[GS]==="none"||a&&n[GS]==="none"&&c+u>s)?"vertical":"horizontal"},Aoe=function(e,r,n){var s=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?r.left:r.top,l=n?r.right:r.bottom,c=n?r.width:r.height;return s===o||i===l||s+a/2===o+c/2},Toe=function(e,r){var n;return Nh.some(function(s){var i=s[Kn].options.emptyInsertThreshold;if(!(!i||Rx(s))){var a=Pr(s),o=e>=a.left-i&&e<=a.right+i,l=r>=a.top-i&&r<=a.bottom+i;if(o&&l)return n=s}}),n},cD=function(e){function r(i,a){return function(o,l,c,u){var f=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(i==null&&(a||f))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return r(i(o,l,c,u),a)(o,l,c,u);var h=(a?o:l).options.group.name;return i===!0||typeof i=="string"&&i===h||i.join&&i.indexOf(h)>-1}}var n={},s=e.group;(!s||D0(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=r(s.pull,!0),n.checkPut=r(s.put),n.revertClone=s.revertClone,e.group=n},uD=function(){!oD&&Bt&&mt(Bt,"display","none")},dD=function(){!oD&&Bt&&mt(Bt,"display","")};Vp&&document.addEventListener("click",function(t){if(Fh)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Fh=!1,!1},!0);var Do=function(e){if(rt){e=e.touches?e.touches[0]:e;var r=Toe(e.clientX,e.clientY);if(r){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[Kn]._onDragOver(n)}}},woe=function(e){rt&&rt.parentNode[Kn]._isOutsideThisEl(e.target)};function wt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=qs({},e),t[Kn]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return lD(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:wt.supportPointer!==!1&&"PointerEvent"in window&&!td,emptyInsertThreshold:5};hf.initializePlugins(this,t,r);for(var n in r)!(n in e)&&(e[n]=r[n]);cD(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:Soe,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Kt(t,"pointerdown",this._onTapStart):(Kt(t,"mousedown",this._onTapStart),Kt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Kt(t,"dragover",this),Kt(t,"dragenter",this)),Nh.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),qs(this,xoe())}wt.prototype={constructor:wt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ol=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,rt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,s=this.options,i=s.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=s.filter;if(Noe(n),!rt&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&td&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=na(l,s.draggable,n,!1),!(l&&l.animated)&&P0!==l)){if(Xl=$r(l),nd=$r(l,s.draggable),typeof u=="function"){if(u.call(this,e,l,this)){as({sortable:r,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),ms("filter",r,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(f){if(f=na(c,f.trim(),n,!1),f)return as({sortable:r,rootEl:f,name:"filter",targetEl:l,fromEl:n,toEl:n}),ms("filter",r,{evt:e}),!0}),u)){i&&e.cancelable&&e.preventDefault();return}s.handle&&!na(c,s.handle,n,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,r,n){var s=this,i=s.el,a=s.options,o=i.ownerDocument,l;if(n&&!rt&&n.parentNode===i){var c=Pr(n);if(kr=i,rt=n,Lr=rt.parentNode,Fo=rt.nextSibling,P0=n,n0=a.group,wt.dragged=rt,ko={target:rt,clientX:(r||e).clientX,clientY:(r||e).clientY},HS=ko.clientX-c.left,jS=ko.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,rt.style["will-change"]="all",l=function(){if(ms("delayEnded",s,{evt:e}),wt.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!LS&&s.nativeDraggable&&(rt.draggable=!0),s._triggerDragStart(e,r),as({sortable:s,name:"choose",originalEvent:e}),Fr(rt,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){sD(rt,u.trim(),kg)}),Kt(o,"dragover",Do),Kt(o,"mousemove",Do),Kt(o,"touchmove",Do),Kt(o,"mouseup",s._onDrop),Kt(o,"touchend",s._onDrop),Kt(o,"touchcancel",s._onDrop),LS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,rt.draggable=!0),ms("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(ff||Di))){if(wt.eventCanceled){this._onDrop();return}Kt(o,"mouseup",s._disableDelayedDrag),Kt(o,"touchend",s._disableDelayedDrag),Kt(o,"touchcancel",s._disableDelayedDrag),Kt(o,"mousemove",s._delayedDragTouchMoveHandler),Kt(o,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&Kt(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){rt&&kg(rt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;zt(e,"mouseup",this._disableDelayedDrag),zt(e,"touchend",this._disableDelayedDrag),zt(e,"touchcancel",this._disableDelayedDrag),zt(e,"mousemove",this._delayedDragTouchMoveHandler),zt(e,"touchmove",this._delayedDragTouchMoveHandler),zt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?Kt(document,"pointermove",this._onTouchMove):r?Kt(document,"touchmove",this._onTouchMove):Kt(document,"mousemove",this._onTouchMove):(Kt(rt,"dragend",this),Kt(kr,"dragstart",this._onDragStart));try{document.selection?F0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Wl=!1,kr&&rt){ms("dragStarted",this,{evt:r}),this.nativeDraggable&&Kt(document,"dragover",woe);var n=this.options;!e&&Fr(rt,n.dragClass,!1),Fr(rt,n.ghostClass,!0),wt.active=this,e&&this._appendGhost(),as({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(ta){this._lastX=ta.clientX,this._lastY=ta.clientY,uD();for(var e=document.elementFromPoint(ta.clientX,ta.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ta.clientX,ta.clientY),e!==r);)r=e;if(rt.parentNode[Kn]._isOutsideThisEl(e),r)do{if(r[Kn]){var n=void 0;if(n=r[Kn]._onDragOver({clientX:ta.clientX,clientY:ta.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=r.parentNode);dD()}},_onTouchMove:function(e){if(ko){var r=this.options,n=r.fallbackTolerance,s=r.fallbackOffset,i=e.touches?e.touches[0]:e,a=Bt&&Ko(Bt,!0),o=Bt&&a&&a.a,l=Bt&&a&&a.d,c=a0&&$n&&$S($n),u=(i.clientX-ko.clientX+s.x)/(o||1)+(c?c[0]-Ig[0]:0)/(o||1),f=(i.clientY-ko.clientY+s.y)/(l||1)+(c?c[1]-Ig[1]:0)/(l||1);if(!wt.active&&!Wl){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Bt){a?(a.e+=u-(wg||0),a.f+=f-(Cg||0)):a={a:1,b:0,c:0,d:1,e:u,f};var h="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");mt(Bt,"webkitTransform",h),mt(Bt,"mozTransform",h),mt(Bt,"msTransform",h),mt(Bt,"transform",h),wg=u,Cg=f,ta=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Bt){var e=this.options.fallbackOnBody?document.body:kr,r=Pr(rt,!0,a0,!0,e),n=this.options;if(a0){for($n=e;mt($n,"position")==="static"&&mt($n,"transform")==="none"&&$n!==document;)$n=$n.parentNode;$n!==document.body&&$n!==document.documentElement?($n===document&&($n=Oa()),r.top+=$n.scrollTop,r.left+=$n.scrollLeft):$n=Oa(),Ig=$S($n)}Bt=rt.cloneNode(!0),Fr(Bt,n.ghostClass,!1),Fr(Bt,n.fallbackClass,!0),Fr(Bt,n.dragClass,!0),mt(Bt,"transition",""),mt(Bt,"transform",""),mt(Bt,"box-sizing","border-box"),mt(Bt,"margin",0),mt(Bt,"top",r.top),mt(Bt,"left",r.left),mt(Bt,"width",r.width),mt(Bt,"height",r.height),mt(Bt,"opacity","0.8"),mt(Bt,"position",a0?"absolute":"fixed"),mt(Bt,"zIndex","100000"),mt(Bt,"pointerEvents","none"),wt.ghost=Bt,e.appendChild(Bt),mt(Bt,"transform-origin",HS/parseInt(Bt.style.width)*100+"% "+jS/parseInt(Bt.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,s=e.dataTransfer,i=n.options;if(ms("dragStart",this,{evt:e}),wt.eventCanceled){this._onDrop();return}ms("setupClone",this),wt.eventCanceled||(Br=Fx(rt),Br.draggable=!1,Br.style["will-change"]="",this._hideClone(),Fr(Br,this.options.chosenClass,!1),wt.clone=Br),n.cloneId=F0(function(){ms("clone",n),!wt.eventCanceled&&(n.options.removeCloneOnHide||kr.insertBefore(Br,rt),n._hideClone(),as({sortable:n,name:"clone"}))}),!r&&Fr(rt,i.dragClass,!0),r?(Fh=!0,n._loopId=setInterval(n._emulateDragOver,50)):(zt(document,"mouseup",n._onDrop),zt(document,"touchend",n._onDrop),zt(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,rt)),Kt(document,"drop",n),mt(rt,"transform","translateZ(0)")),Wl=!0,n._dragStartId=F0(n._dragStarted.bind(n,r,e)),Kt(document,"selectstart",n),Tu=!0,td&&mt(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,s,i,a,o=this.options,l=o.group,c=wt.active,u=n0===l,f=o.sort,h=Sn||c,p,g=this,v=!1;if(Zv)return;function y(M,L){ms(M,g,$a({evt:e,isOwner:u,axis:p?"vertical":"horizontal",revert:a,dragRect:s,targetRect:i,canSort:f,fromSortable:h,target:n,completed:E,onMove:function(j,H){return i0(kr,r,rt,s,j,Pr(j),e,H)},changed:x},L))}function b(){y("dragOverAnimationCapture"),g.captureAnimationState(),g!==h&&h.captureAnimationState()}function E(M){return y("dragOverCompleted",{insertion:M}),M&&(u?c._hideClone():c._showClone(g),g!==h&&(Fr(rt,Sn?Sn.options.ghostClass:c.options.ghostClass,!1),Fr(rt,o.ghostClass,!0)),Sn!==g&&g!==wt.active?Sn=g:g===wt.active&&Sn&&(Sn=null),h===g&&(g._ignoreWhileAnimating=n),g.animateAll(function(){y("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(n===rt&&!rt.animated||n===r&&!n.animated)&&(Ol=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(rt.parentNode[Kn]._isOutsideThisEl(e.target),!M&&Do(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function x(){Ts=$r(rt),zi=$r(rt,o.draggable),as({sortable:g,name:"change",toEl:r,newIndex:Ts,newDraggableIndex:zi,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=na(n,o.draggable,r,!0),y("dragOver"),wt.eventCanceled)return v;if(rt.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||g._ignoreWhileAnimating===n)return E(!1);if(Fh=!1,c&&!o.disabled&&(u?f||(a=Lr!==kr):Sn===this||(this.lastPutMode=n0.checkPull(this,c,rt,e))&&l.checkPut(this,c,rt,e))){if(p=this._getDirection(e,n)==="vertical",s=Pr(rt),y("dragOverValid"),wt.eventCanceled)return v;if(a)return Lr=kr,b(),this._hideClone(),y("revert"),wt.eventCanceled||(Fo?kr.insertBefore(rt,Fo):kr.appendChild(rt)),E(!0);var w=Rx(r,o.draggable);if(!w||Doe(e,p,this)&&!w.animated){if(w===rt)return E(!1);if(w&&r===e.target&&(n=w),n&&(i=Pr(n)),i0(kr,r,rt,s,n,i,e,!!n)!==!1)return b(),r.appendChild(rt),Lr=r,x(),E(!0)}else if(w&&koe(e,p,this)){var P=Rc(r,0,o,!0);if(P===rt)return E(!1);if(n=P,i=Pr(n),i0(kr,r,rt,s,n,i,e,!1)!==!1)return b(),r.insertBefore(rt,P),Lr=r,x(),E(!0)}else if(n.parentNode===r){i=Pr(n);var R=0,A,_=rt.parentNode!==r,m=!Aoe(rt.animated&&rt.toRect||s,n.animated&&n.toRect||i,p),S=p?"top":"left",I=US(n,"top","top")||US(rt,"top","top"),k=I?I.scrollTop:void 0;Ol!==n&&(A=i[S],ad=!1,s0=!m&&o.invertSwap||_),R=Poe(e,n,i,p,m?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,s0,Ol===n);var C;if(R!==0){var O=$r(rt);do O-=R,C=Lr.children[O];while(C&&(mt(C,"display")==="none"||C===Bt))}if(R===0||C===n)return E(!1);Ol=n,sd=R;var D=n.nextElementSibling,F=!1;F=R===1;var N=i0(kr,r,rt,s,n,i,e,F);if(N!==!1)return(N===1||N===-1)&&(F=N===1),Zv=!0,setTimeout(Ioe,30),b(),F&&!D?r.appendChild(rt):n.parentNode.insertBefore(rt,F?D:n),I&&iD(I,0,k-I.scrollTop),Lr=rt.parentNode,A!==void 0&&!s0&&(R0=Math.abs(A-Pr(n)[S])),x(),E(!0)}if(r.contains(rt))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){zt(document,"mousemove",this._onTouchMove),zt(document,"touchmove",this._onTouchMove),zt(document,"pointermove",this._onTouchMove),zt(document,"dragover",Do),zt(document,"mousemove",Do),zt(document,"touchmove",Do)},_offUpEvents:function(){var e=this.el.ownerDocument;zt(e,"mouseup",this._onDrop),zt(e,"touchend",this._onDrop),zt(e,"pointerup",this._onDrop),zt(e,"touchcancel",this._onDrop),zt(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(Ts=$r(rt),zi=$r(rt,n.draggable),ms("drop",this,{evt:e}),Lr=rt&&rt.parentNode,Ts=$r(rt),zi=$r(rt,n.draggable),wt.eventCanceled){this._nulling();return}Wl=!1,s0=!1,ad=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),e1(this.cloneId),e1(this._dragStartId),this.nativeDraggable&&(zt(document,"drop",this),zt(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),td&&mt(document.body,"user-select",""),mt(rt,"transform",""),e&&(Tu&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Bt&&Bt.parentNode&&Bt.parentNode.removeChild(Bt),(kr===Lr||Sn&&Sn.lastPutMode!=="clone")&&Br&&Br.parentNode&&Br.parentNode.removeChild(Br),rt&&(this.nativeDraggable&&zt(rt,"dragend",this),kg(rt),rt.style["will-change"]="",Tu&&!Wl&&Fr(rt,Sn?Sn.options.ghostClass:this.options.ghostClass,!1),Fr(rt,this.options.chosenClass,!1),as({sortable:this,name:"unchoose",toEl:Lr,newIndex:null,newDraggableIndex:null,originalEvent:e}),kr!==Lr?(Ts>=0&&(as({rootEl:Lr,name:"add",toEl:Lr,fromEl:kr,originalEvent:e}),as({sortable:this,name:"remove",toEl:Lr,originalEvent:e}),as({rootEl:Lr,name:"sort",toEl:Lr,fromEl:kr,originalEvent:e}),as({sortable:this,name:"sort",toEl:Lr,originalEvent:e})),Sn&&Sn.save()):Ts!==Xl&&Ts>=0&&(as({sortable:this,name:"update",toEl:Lr,originalEvent:e}),as({sortable:this,name:"sort",toEl:Lr,originalEvent:e})),wt.active&&((Ts==null||Ts===-1)&&(Ts=Xl,zi=nd),as({sortable:this,name:"end",toEl:Lr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ms("nulling",this),kr=rt=Lr=Bt=Fo=Br=P0=Xi=ko=ta=Tu=Ts=zi=Xl=nd=Ol=sd=Sn=n0=wt.dragged=wt.ghost=wt.clone=wt.active=null,Oh.forEach(function(e){e.checked=!0}),Oh.length=wg=Cg=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":rt&&(this._onDragOver(e),Coe(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,s=0,i=n.length,a=this.options;s<i;s++)r=n[s],na(r,a.draggable,this.el,!1)&&e.push(r.getAttribute(a.dataIdAttr)||Foe(r));return e},sort:function(e,r){var n={},s=this.el;this.toArray().forEach(function(i,a){var o=s.children[a];na(o,this.options.draggable,s,!1)&&(n[i]=o)},this),r&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(s.removeChild(n[i]),s.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return na(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var s=hf.modifyOption(this,e,r);typeof s<"u"?n[e]=s:n[e]=r,e==="group"&&cD(n)},destroy:function(){ms("destroy",this);var e=this.el;e[Kn]=null,zt(e,"mousedown",this._onTapStart),zt(e,"touchstart",this._onTapStart),zt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(zt(e,"dragover",this),zt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Nh.splice(Nh.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Xi){if(ms("hideClone",this),wt.eventCanceled)return;mt(Br,"display","none"),this.options.removeCloneOnHide&&Br.parentNode&&Br.parentNode.removeChild(Br),Xi=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Xi){if(ms("showClone",this),wt.eventCanceled)return;rt.parentNode==kr&&!this.options.group.revertClone?kr.insertBefore(Br,rt):Fo?kr.insertBefore(Br,Fo):kr.appendChild(Br),this.options.group.revertClone&&this.animate(rt,Br),mt(Br,"display",""),Xi=!1}}};function Coe(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function i0(t,e,r,n,s,i,a,o){var l,c=t[Kn],u=c.options.onMove,f;return window.CustomEvent&&!Di&&!ff?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=r,l.draggedRect=n,l.related=s||e,l.relatedRect=i||Pr(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),u&&(f=u.call(c,l,a)),f}function kg(t){t.draggable=!1}function Ioe(){Zv=!1}function koe(t,e,r){var n=Pr(Rc(r.el,0,r.options,!0)),s=10;return e?t.clientX<n.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-s||t.clientY<n.bottom&&t.clientX<n.left}function Doe(t,e,r){var n=Pr(Rx(r.el,r.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}function Poe(t,e,r,n,s,i,a,o){var l=n?t.clientY:t.clientX,c=n?r.height:r.width,u=n?r.top:r.left,f=n?r.bottom:r.right,h=!1;if(!a){if(o&&R0<c*s){if(!ad&&(sd===1?l>u+c*i/2:l<f-c*i/2)&&(ad=!0),ad)h=!0;else if(sd===1?l<u+R0:l>f-R0)return-sd}else if(l>u+c*(1-s)/2&&l<f-c*(1-s)/2)return Roe(e)}return h=h||a,h&&(l<u+c*i/2||l>f-c*i/2)?l>u+c/2?1:-1:0}function Roe(t){return $r(rt)<$r(t)?1:-1}function Foe(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function Noe(t){Oh.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&Oh.push(n)}}function F0(t){return setTimeout(t,0)}function e1(t){return clearTimeout(t)}Vp&&Kt(document,"touchmove",function(t){(wt.active||Wl)&&t.cancelable&&t.preventDefault()});wt.utils={on:Kt,off:zt,css:mt,find:sD,is:function(e,r){return!!na(e,r,e,!1)},extend:voe,throttle:aD,closest:na,toggleClass:Fr,clone:Fx,index:$r,nextTick:F0,cancelNextTick:e1,detectDirection:lD,getChild:Rc};wt.get=function(t){return t[Kn]};wt.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(wt.utils=$a($a({},wt.utils),n.utils)),hf.mount(n)})};wt.create=function(t,e){return new wt(t,e)};wt.version=hoe;var Jr=[],wu,t1,r1=!1,Dg,Pg,Mh,Cu;function Ooe(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?Kt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Kt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Kt(document,"touchmove",this._handleFallbackAutoScroll):Kt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?zt(document,"dragover",this._handleAutoScroll):(zt(document,"pointermove",this._handleFallbackAutoScroll),zt(document,"touchmove",this._handleFallbackAutoScroll),zt(document,"mousemove",this._handleFallbackAutoScroll)),WS(),N0(),yoe()},nulling:function(){Mh=t1=wu=r1=Cu=Dg=Pg=null,Jr.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var s=this,i=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,o=document.elementFromPoint(i,a);if(Mh=r,n||this.options.forceAutoScrollFallback||ff||Di||td){Rg(r,this.options,o,n);var l=Zi(o,!0);r1&&(!Cu||i!==Dg||a!==Pg)&&(Cu&&WS(),Cu=setInterval(function(){var c=Zi(document.elementFromPoint(i,a),!0);c!==l&&(l=c,N0()),Rg(r,s.options,c,n)},10),Dg=i,Pg=a)}else{if(!this.options.bubbleScroll||Zi(o,!0)===Oa()){N0();return}Rg(r,this.options,Zi(o,!1),!1)}}},qs(t,{pluginName:"scroll",initializeByDefault:!0})}function N0(){Jr.forEach(function(t){clearInterval(t.pid)}),Jr=[]}function WS(){clearInterval(Cu)}var Rg=aD(function(t,e,r,n){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=Oa(),c=!1,u;t1!==r&&(t1=r,N0(),wu=e.scroll,u=e.scrollFn,wu===!0&&(wu=Zi(r,!0)));var f=0,h=wu;do{var p=h,g=Pr(p),v=g.top,y=g.bottom,b=g.left,E=g.right,x=g.width,w=g.height,P=void 0,R=void 0,A=p.scrollWidth,_=p.scrollHeight,m=mt(p),S=p.scrollLeft,I=p.scrollTop;p===l?(P=x<A&&(m.overflowX==="auto"||m.overflowX==="scroll"||m.overflowX==="visible"),R=w<_&&(m.overflowY==="auto"||m.overflowY==="scroll"||m.overflowY==="visible")):(P=x<A&&(m.overflowX==="auto"||m.overflowX==="scroll"),R=w<_&&(m.overflowY==="auto"||m.overflowY==="scroll"));var k=P&&(Math.abs(E-s)<=a&&S+x<A)-(Math.abs(b-s)<=a&&!!S),C=R&&(Math.abs(y-i)<=a&&I+w<_)-(Math.abs(v-i)<=a&&!!I);if(!Jr[f])for(var O=0;O<=f;O++)Jr[O]||(Jr[O]={});(Jr[f].vx!=k||Jr[f].vy!=C||Jr[f].el!==p)&&(Jr[f].el=p,Jr[f].vx=k,Jr[f].vy=C,clearInterval(Jr[f].pid),(k!=0||C!=0)&&(c=!0,Jr[f].pid=setInterval((function(){n&&this.layer===0&&wt.active._onTouchMove(Mh);var D=Jr[this.layer].vy?Jr[this.layer].vy*o:0,F=Jr[this.layer].vx?Jr[this.layer].vx*o:0;typeof u=="function"&&u.call(wt.dragged.parentNode[Kn],F,D,t,Mh,Jr[this.layer].el)!=="continue"||iD(Jr[this.layer].el,F,D)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&h!==l&&(h=Zi(h,!1)));r1=c}},30),fD=function(e){var r=e.originalEvent,n=e.putSortable,s=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(r){var c=n||i;o();var u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,f=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(f)&&(a("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function Nx(){}Nx.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=Rc(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:fD};qs(Nx,{pluginName:"revertOnSpill"});function Ox(){}Ox.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,s=n||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop:fD};qs(Ox,{pluginName:"removeOnSpill"});var Bs;function Moe(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(r){var n=r.dragEl;Bs=n},dragOverValid:function(r){var n=r.completed,s=r.target,i=r.onMove,a=r.activeSortable,o=r.changed,l=r.cancel;if(a.options.swap){var c=this.sortable.el,u=this.options;if(s&&s!==c){var f=Bs;i(s)!==!1?(Fr(s,u.swapClass,!0),Bs=s):Bs=null,f&&f!==Bs&&Fr(f,u.swapClass,!1)}o(),n(!0),l()}},drop:function(r){var n=r.activeSortable,s=r.putSortable,i=r.dragEl,a=s||this.sortable,o=this.options;Bs&&Fr(Bs,o.swapClass,!1),Bs&&(o.swap||s&&s.options.swap)&&i!==Bs&&(a.captureAnimationState(),a!==n&&n.captureAnimationState(),Loe(i,Bs),a.animateAll(),a!==n&&n.animateAll())},nulling:function(){Bs=null}},qs(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Bs}}})}function Loe(t,e){var r=t.parentNode,n=e.parentNode,s,i;!r||!n||r.isEqualNode(e)||n.isEqualNode(t)||(s=$r(t),i=$r(e),r.isEqualNode(n)&&s<i&&i++,r.insertBefore(e,r.children[s]),n.insertBefore(t,n.children[i]))}var Nt=[],As=[],uu,ra,du=!1,gs=!1,Ml=!1,_r,fu,o0;function Boe(){function t(e){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));e.options.supportPointer?Kt(document,"pointerup",this._deselectMultiDrag):(Kt(document,"mouseup",this._deselectMultiDrag),Kt(document,"touchend",this._deselectMultiDrag)),Kt(document,"keydown",this._checkKeyDown),Kt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,i){var a="";Nt.length&&ra===e?Nt.forEach(function(o,l){a+=(l?", ":"")+o.textContent}):a=i.textContent,s.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var n=r.dragEl;_r=n},delayEnded:function(){this.isMultiDrag=~Nt.indexOf(_r)},setupClone:function(r){var n=r.sortable,s=r.cancel;if(this.isMultiDrag){for(var i=0;i<Nt.length;i++)As.push(Fx(Nt[i])),As[i].sortableIndex=Nt[i].sortableIndex,As[i].draggable=!1,As[i].style["will-change"]="",Fr(As[i],this.options.selectedClass,!1),Nt[i]===_r&&Fr(As[i],this.options.chosenClass,!1);n._hideClone(),s()}},clone:function(r){var n=r.sortable,s=r.rootEl,i=r.dispatchSortableEvent,a=r.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Nt.length&&ra===n&&(zS(!0,s),i("clone"),a()))},showClone:function(r){var n=r.cloneNowShown,s=r.rootEl,i=r.cancel;this.isMultiDrag&&(zS(!1,s),As.forEach(function(a){mt(a,"display","")}),n(),o0=!1,i())},hideClone:function(r){var n=this;r.sortable;var s=r.cloneNowHidden,i=r.cancel;this.isMultiDrag&&(As.forEach(function(a){mt(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),s(),o0=!0,i())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&ra&&ra.multiDrag._deselectMultiDrag(),Nt.forEach(function(n){n.sortableIndex=$r(n)}),Nt=Nt.sort(function(n,s){return n.sortableIndex-s.sortableIndex}),Ml=!0},dragStarted:function(r){var n=this,s=r.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){Nt.forEach(function(a){a!==_r&&mt(a,"position","absolute")});var i=Pr(_r,!1,!0,!0);Nt.forEach(function(a){a!==_r&&VS(a,i)}),gs=!0,du=!0}s.animateAll(function(){gs=!1,du=!1,n.options.animation&&Nt.forEach(function(a){Ag(a)}),n.options.sort&&l0()})}},dragOver:function(r){var n=r.target,s=r.completed,i=r.cancel;gs&&~Nt.indexOf(n)&&(s(!1),i())},revert:function(r){var n=r.fromSortable,s=r.rootEl,i=r.sortable,a=r.dragRect;Nt.length>1&&(Nt.forEach(function(o){i.addAnimationState({target:o,rect:gs?Pr(o):a}),Ag(o),o.fromRect=a,n.removeAnimationState(o)}),gs=!1,Uoe(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(r){var n=r.sortable,s=r.isOwner,i=r.insertion,a=r.activeSortable,o=r.parentEl,l=r.putSortable,c=this.options;if(i){if(s&&a._hideClone(),du=!1,c.animation&&Nt.length>1&&(gs||!s&&!a.options.sort&&!l)){var u=Pr(_r,!1,!0,!0);Nt.forEach(function(h){h!==_r&&(VS(h,u),o.appendChild(h))}),gs=!0}if(!s)if(gs||l0(),Nt.length>1){var f=o0;a._showClone(n),a.options.animation&&!o0&&f&&As.forEach(function(h){a.addAnimationState({target:h,rect:fu}),h.fromRect=fu,h.thisAnimationDuration=null})}else a._showClone(n)}},dragOverAnimationCapture:function(r){var n=r.dragRect,s=r.isOwner,i=r.activeSortable;if(Nt.forEach(function(o){o.thisAnimationDuration=null}),i.options.animation&&!s&&i.multiDrag.isMultiDrag){fu=qs({},n);var a=Ko(_r,!0);fu.top-=a.f,fu.left-=a.e}},dragOverAnimationComplete:function(){gs&&(gs=!1,l0())},drop:function(r){var n=r.originalEvent,s=r.rootEl,i=r.parentEl,a=r.sortable,o=r.dispatchSortableEvent,l=r.oldIndex,c=r.putSortable,u=c||this.sortable;if(n){var f=this.options,h=i.children;if(!Ml)if(f.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Fr(_r,f.selectedClass,!~Nt.indexOf(_r)),~Nt.indexOf(_r))Nt.splice(Nt.indexOf(_r),1),uu=null,Au({sortable:a,rootEl:s,name:"deselect",targetEl:_r});else{if(Nt.push(_r),Au({sortable:a,rootEl:s,name:"select",targetEl:_r}),n.shiftKey&&uu&&a.el.contains(uu)){var p=$r(uu),g=$r(_r);if(~p&&~g&&p!==g){var v,y;for(g>p?(y=p,v=g):(y=g,v=p+1);y<v;y++)~Nt.indexOf(h[y])||(Fr(h[y],f.selectedClass,!0),Nt.push(h[y]),Au({sortable:a,rootEl:s,name:"select",targetEl:h[y]}))}}else uu=_r;ra=u}if(Ml&&this.isMultiDrag){if(gs=!1,(i[Kn].options.sort||i!==s)&&Nt.length>1){var b=Pr(_r),E=$r(_r,":not(."+this.options.selectedClass+")");if(!du&&f.animation&&(_r.thisAnimationDuration=null),u.captureAnimationState(),!du&&(f.animation&&(_r.fromRect=b,Nt.forEach(function(w){if(w.thisAnimationDuration=null,w!==_r){var P=gs?Pr(w):b;w.fromRect=P,u.addAnimationState({target:w,rect:P})}})),l0(),Nt.forEach(function(w){h[E]?i.insertBefore(w,h[E]):i.appendChild(w),E++}),l===$r(_r))){var x=!1;Nt.forEach(function(w){if(w.sortableIndex!==$r(w)){x=!0;return}}),x&&o("update")}Nt.forEach(function(w){Ag(w)}),u.animateAll()}ra=u}(s===i||c&&c.lastPutMode!=="clone")&&As.forEach(function(w){w.parentNode&&w.parentNode.removeChild(w)})}},nullingGlobal:function(){this.isMultiDrag=Ml=!1,As.length=0},destroyGlobal:function(){this._deselectMultiDrag(),zt(document,"pointerup",this._deselectMultiDrag),zt(document,"mouseup",this._deselectMultiDrag),zt(document,"touchend",this._deselectMultiDrag),zt(document,"keydown",this._checkKeyDown),zt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof Ml<"u"&&Ml)&&ra===this.sortable&&!(r&&na(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;Nt.length;){var n=Nt[0];Fr(n,this.options.selectedClass,!1),Nt.shift(),Au({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},qs(t,{pluginName:"multiDrag",utils:{select:function(r){var n=r.parentNode[Kn];!n||!n.options.multiDrag||~Nt.indexOf(r)||(ra&&ra!==n&&(ra.multiDrag._deselectMultiDrag(),ra=n),Fr(r,n.options.selectedClass,!0),Nt.push(r))},deselect:function(r){var n=r.parentNode[Kn],s=Nt.indexOf(r);!n||!n.options.multiDrag||!~s||(Fr(r,n.options.selectedClass,!1),Nt.splice(s,1))}},eventProperties:function(){var r=this,n=[],s=[];return Nt.forEach(function(i){n.push({multiDragElement:i,index:i.sortableIndex});var a;gs&&i!==_r?a=-1:gs?a=$r(i,":not(."+r.options.selectedClass+")"):a=$r(i),s.push({multiDragElement:i,index:a})}),{items:loe(Nt),clones:[].concat(As),oldIndicies:n,newIndicies:s}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function Uoe(t,e){Nt.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function zS(t,e){As.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function l0(){Nt.forEach(function(t){t!==_r&&t.parentNode&&t.parentNode.removeChild(t)})}wt.mount(new Ooe);wt.mount(Ox,Nx);const $oe=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Boe,Sortable:wt,Swap:Moe,default:wt},Symbol.toStringTag,{value:"Module"})),Voe=ex($oe);(function(t,e){(function(n,s){t.exports=s(soe,Voe)})(typeof self<"u"?self:Ht,function(r,n){return function(s){var i={};function a(o){if(i[o])return i[o].exports;var l=i[o]={i:o,l:!1,exports:{}};return s[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=s,a.c=i,a.d=function(o,l,c){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:c})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var u in o)a.d(c,u,(function(f){return o[f]}).bind(null,u));return c},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s="fb15")}({"00ee":function(s,i,a){var o=a("b622"),l=o("toStringTag"),c={};c[l]="z",s.exports=String(c)==="[object z]"},"0366":function(s,i,a){var o=a("1c0b");s.exports=function(l,c,u){if(o(l),c===void 0)return l;switch(u){case 0:return function(){return l.call(c)};case 1:return function(f){return l.call(c,f)};case 2:return function(f,h){return l.call(c,f,h)};case 3:return function(f,h,p){return l.call(c,f,h,p)}}return function(){return l.apply(c,arguments)}}},"057f":function(s,i,a){var o=a("fc6a"),l=a("241c").f,c={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(h){try{return l(h)}catch{return u.slice()}};s.exports.f=function(p){return u&&c.call(p)=="[object Window]"?f(p):l(o(p))}},"06cf":function(s,i,a){var o=a("83ab"),l=a("d1e7"),c=a("5c6c"),u=a("fc6a"),f=a("c04e"),h=a("5135"),p=a("0cfb"),g=Object.getOwnPropertyDescriptor;i.f=o?g:function(y,b){if(y=u(y),b=f(b,!0),p)try{return g(y,b)}catch{}if(h(y,b))return c(!l.f.call(y,b),y[b])}},"0cfb":function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("cc12");s.exports=!o&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,i,a){var o=a("23e7"),l=a("d58f").left,c=a("a640"),u=a("ae40"),f=c("reduce"),h=u("reduce",{1:0});o({target:"Array",proto:!0,forced:!f||!h},{reduce:function(g){return l(this,g,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,i,a){var o=a("c6b6"),l=a("9263");s.exports=function(c,u){var f=c.exec;if(typeof f=="function"){var h=f.call(c,u);if(typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(o(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,u)}},"159b":function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("17c2"),u=a("9112");for(var f in l){var h=o[f],p=h&&h.prototype;if(p&&p.forEach!==c)try{u(p,"forEach",c)}catch{p.forEach=c}}},"17c2":function(s,i,a){var o=a("b727").forEach,l=a("a640"),c=a("ae40"),u=l("forEach"),f=c("forEach");s.exports=!u||!f?function(p){return o(this,p,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,i,a){var o=a("d066");s.exports=o("document","documentElement")},"1c0b":function(s,i){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},"1c7e":function(s,i,a){var o=a("b622"),l=o("iterator"),c=!1;try{var u=0,f={next:function(){return{done:!!u++}},return:function(){c=!0}};f[l]=function(){return this},Array.from(f,function(){throw 2})}catch{}s.exports=function(h,p){if(!p&&!c)return!1;var g=!1;try{var v={};v[l]=function(){return{next:function(){return{done:g=!0}}}},h(v)}catch{}return g}},"1d80":function(s,i){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},"1dde":function(s,i,a){var o=a("d039"),l=a("b622"),c=a("2d00"),u=l("species");s.exports=function(f){return c>=51||!o(function(){var h=[],p=h.constructor={};return p[u]=function(){return{foo:1}},h[f](Boolean).foo!==1})}},"23cb":function(s,i,a){var o=a("a691"),l=Math.max,c=Math.min;s.exports=function(u,f){var h=o(u);return h<0?l(h+f,0):c(h,f)}},"23e7":function(s,i,a){var o=a("da84"),l=a("06cf").f,c=a("9112"),u=a("6eeb"),f=a("ce4e"),h=a("e893"),p=a("94ca");s.exports=function(g,v){var y=g.target,b=g.global,E=g.stat,x,w,P,R,A,_;if(b?w=o:E?w=o[y]||f(y,{}):w=(o[y]||{}).prototype,w)for(P in v){if(A=v[P],g.noTargetGet?(_=l(w,P),R=_&&_.value):R=w[P],x=p(b?P:y+(E?".":"#")+P,g.forced),!x&&R!==void 0){if(typeof A==typeof R)continue;h(A,R)}(g.sham||R&&R.sham)&&c(A,"sham",!0),u(w,P,A,g)}}},"241c":function(s,i,a){var o=a("ca84"),l=a("7839"),c=l.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(f){return o(f,c)}},"25f0":function(s,i,a){var o=a("6eeb"),l=a("825a"),c=a("d039"),u=a("ad6d"),f="toString",h=RegExp.prototype,p=h[f],g=c(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),v=p.name!=f;(g||v)&&o(RegExp.prototype,f,function(){var b=l(this),E=String(b.source),x=b.flags,w=String(x===void 0&&b instanceof RegExp&&!("flags"in h)?u.call(b):x);return"/"+E+"/"+w},{unsafe:!0})},"2ca0":function(s,i,a){var o=a("23e7"),l=a("06cf").f,c=a("50c4"),u=a("5a34"),f=a("1d80"),h=a("ab13"),p=a("c430"),g="".startsWith,v=Math.min,y=h("startsWith"),b=!p&&!y&&!!function(){var E=l(String.prototype,"startsWith");return E&&!E.writable}();o({target:"String",proto:!0,forced:!b&&!y},{startsWith:function(x){var w=String(f(this));u(x);var P=c(v(arguments.length>1?arguments[1]:void 0,w.length)),R=String(x);return g?g.call(w,R,P):w.slice(P,P+R.length)===R}})},"2d00":function(s,i,a){var o=a("da84"),l=a("342f"),c=o.process,u=c&&c.versions,f=u&&u.v8,h,p;f?(h=f.split("."),p=h[0]+h[1]):l&&(h=l.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=l.match(/Chrome\/(\d+)/),h&&(p=h[1]))),s.exports=p&&+p},"342f":function(s,i,a){var o=a("d066");s.exports=o("navigator","userAgent")||""},"35a1":function(s,i,a){var o=a("f5df"),l=a("3f8c"),c=a("b622"),u=c("iterator");s.exports=function(f){if(f!=null)return f[u]||f["@@iterator"]||l[o(f)]}},"37e8":function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("825a"),u=a("df75");s.exports=o?Object.defineProperties:function(h,p){c(h);for(var g=u(p),v=g.length,y=0,b;v>y;)l.f(h,b=g[y++],p[b]);return h}},"3bbe":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(s,i,a){var o=a("6547").charAt,l=a("69f3"),c=a("7dd0"),u="String Iterator",f=l.set,h=l.getterFor(u);c(String,"String",function(p){f(this,{type:u,string:String(p),index:0})},function(){var g=h(this),v=g.string,y=g.index,b;return y>=v.length?{value:void 0,done:!0}:(b=o(v,y),g.index+=b.length,{value:b,done:!1})})},"3f8c":function(s,i){s.exports={}},4160:function(s,i,a){var o=a("23e7"),l=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(s,i,a){var o=a("da84");s.exports=o},"44ad":function(s,i,a){var o=a("d039"),l=a("c6b6"),c="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return l(u)=="String"?c.call(u,""):Object(u)}:Object},"44d2":function(s,i,a){var o=a("b622"),l=a("7c73"),c=a("9bf2"),u=o("unscopables"),f=Array.prototype;f[u]==null&&c.f(f,u,{configurable:!0,value:l(null)}),s.exports=function(h){f[u][h]=!0}},"44e7":function(s,i,a){var o=a("861d"),l=a("c6b6"),c=a("b622"),u=c("match");s.exports=function(f){var h;return o(f)&&((h=f[u])!==void 0?!!h:l(f)=="RegExp")}},4930:function(s,i,a){var o=a("d039");s.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(s,i,a){var o=a("fc6a"),l=a("50c4"),c=a("23cb"),u=function(f){return function(h,p,g){var v=o(h),y=l(v.length),b=c(g,y),E;if(f&&p!=p){for(;y>b;)if(E=v[b++],E!=E)return!0}else for(;y>b;b++)if((f||b in v)&&v[b]===p)return f||b||0;return!f&&-1}};s.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(s,i,a){var o=a("23e7"),l=a("b727").filter,c=a("1dde"),u=a("ae40"),f=c("filter"),h=u("filter");o({target:"Array",proto:!0,forced:!f||!h},{filter:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,i,a){var o=a("0366"),l=a("7b0b"),c=a("9bdd"),u=a("e95a"),f=a("50c4"),h=a("8418"),p=a("35a1");s.exports=function(v){var y=l(v),b=typeof this=="function"?this:Array,E=arguments.length,x=E>1?arguments[1]:void 0,w=x!==void 0,P=p(y),R=0,A,_,m,S,I,k;if(w&&(x=o(x,E>2?arguments[2]:void 0,2)),P!=null&&!(b==Array&&u(P)))for(S=P.call(y),I=S.next,_=new b;!(m=I.call(S)).done;R++)k=w?c(S,x,[m.value,R],!0):m.value,h(_,R,k);else for(A=f(y.length),_=new b(A);A>R;R++)k=w?x(y[R],R):y[R],h(_,R,k);return _.length=R,_}},"4fad":function(s,i,a){var o=a("23e7"),l=a("6f53").entries;o({target:"Object",stat:!0},{entries:function(u){return l(u)}})},"50c4":function(s,i,a){var o=a("a691"),l=Math.min;s.exports=function(c){return c>0?l(o(c),9007199254740991):0}},5135:function(s,i){var a={}.hasOwnProperty;s.exports=function(o,l){return a.call(o,l)}},5319:function(s,i,a){var o=a("d784"),l=a("825a"),c=a("7b0b"),u=a("50c4"),f=a("a691"),h=a("1d80"),p=a("8aa5"),g=a("14c3"),v=Math.max,y=Math.min,b=Math.floor,E=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g,w=function(P){return P===void 0?P:String(P)};o("replace",2,function(P,R,A,_){var m=_.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,S=_.REPLACE_KEEPS_$0,I=m?"$":"$0";return[function(O,D){var F=h(this),N=O==null?void 0:O[P];return N!==void 0?N.call(O,F,D):R.call(String(F),O,D)},function(C,O){if(!m&&S||typeof O=="string"&&O.indexOf(I)===-1){var D=A(R,C,this,O);if(D.done)return D.value}var F=l(C),N=String(this),M=typeof O=="function";M||(O=String(O));var L=F.global;if(L){var z=F.unicode;F.lastIndex=0}for(var j=[];;){var H=g(F,N);if(H===null||(j.push(H),!L))break;var G=String(H[0]);G===""&&(F.lastIndex=p(N,u(F.lastIndex),z))}for(var W="",ne=0,de=0;de<j.length;de++){H=j[de];for(var se=String(H[0]),ce=v(y(f(H.index),N.length),0),te=[],Z=1;Z<H.length;Z++)te.push(w(H[Z]));var ye=H.groups;if(M){var J=[se].concat(te,ce,N);ye!==void 0&&J.push(ye);var X=String(O.apply(void 0,J))}else X=k(se,N,ce,te,ye,O);ce>=ne&&(W+=N.slice(ne,ce)+X,ne=ce+se.length)}return W+N.slice(ne)}];function k(C,O,D,F,N,M){var L=D+C.length,z=F.length,j=x;return N!==void 0&&(N=c(N),j=E),R.call(M,j,function(H,G){var W;switch(G.charAt(0)){case"$":return"$";case"&":return C;case"`":return O.slice(0,D);case"'":return O.slice(L);case"<":W=N[G.slice(1,-1)];break;default:var ne=+G;if(ne===0)return H;if(ne>z){var de=b(ne/10);return de===0?H:de<=z?F[de-1]===void 0?G.charAt(1):F[de-1]+G.charAt(1):H}W=F[ne-1]}return W===void 0?"":W})}})},5692:function(s,i,a){var o=a("c430"),l=a("c6cd");(s.exports=function(c,u){return l[c]||(l[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,i,a){var o=a("d066"),l=a("241c"),c=a("7418"),u=a("825a");s.exports=o("Reflect","ownKeys")||function(h){var p=l.f(u(h)),g=c.f;return g?p.concat(g(h)):p}},"5a34":function(s,i,a){var o=a("44e7");s.exports=function(l){if(o(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(s,i){s.exports=function(a,o){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:o}}},"5db7":function(s,i,a){var o=a("23e7"),l=a("a2bf"),c=a("7b0b"),u=a("50c4"),f=a("1c0b"),h=a("65f0");o({target:"Array",proto:!0},{flatMap:function(g){var v=c(this),y=u(v.length),b;return f(g),b=h(v,0),b.length=l(b,v,v,y,0,1,g,arguments.length>1?arguments[1]:void 0),b}})},6547:function(s,i,a){var o=a("a691"),l=a("1d80"),c=function(u){return function(f,h){var p=String(l(f)),g=o(h),v=p.length,y,b;return g<0||g>=v?u?"":void 0:(y=p.charCodeAt(g),y<55296||y>56319||g+1===v||(b=p.charCodeAt(g+1))<56320||b>57343?u?p.charAt(g):y:u?p.slice(g,g+2):(y-55296<<10)+(b-56320)+65536)}};s.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(s,i,a){var o=a("861d"),l=a("e8b5"),c=a("b622"),u=c("species");s.exports=function(f,h){var p;return l(f)&&(p=f.constructor,typeof p=="function"&&(p===Array||l(p.prototype))?p=void 0:o(p)&&(p=p[u],p===null&&(p=void 0))),new(p===void 0?Array:p)(h===0?0:h)}},"69f3":function(s,i,a){var o=a("7f9a"),l=a("da84"),c=a("861d"),u=a("9112"),f=a("5135"),h=a("f772"),p=a("d012"),g=l.WeakMap,v,y,b,E=function(m){return b(m)?y(m):v(m,{})},x=function(m){return function(S){var I;if(!c(S)||(I=y(S)).type!==m)throw TypeError("Incompatible receiver, "+m+" required");return I}};if(o){var w=new g,P=w.get,R=w.has,A=w.set;v=function(m,S){return A.call(w,m,S),S},y=function(m){return P.call(w,m)||{}},b=function(m){return R.call(w,m)}}else{var _=h("state");p[_]=!0,v=function(m,S){return u(m,_,S),S},y=function(m){return f(m,_)?m[_]:{}},b=function(m){return f(m,_)}}s.exports={set:v,get:y,has:b,enforce:E,getterFor:x}},"6eeb":function(s,i,a){var o=a("da84"),l=a("9112"),c=a("5135"),u=a("ce4e"),f=a("8925"),h=a("69f3"),p=h.get,g=h.enforce,v=String(String).split("String");(s.exports=function(y,b,E,x){var w=x?!!x.unsafe:!1,P=x?!!x.enumerable:!1,R=x?!!x.noTargetGet:!1;if(typeof E=="function"&&(typeof b=="string"&&!c(E,"name")&&l(E,"name",b),g(E).source=v.join(typeof b=="string"?b:"")),y===o){P?y[b]=E:u(b,E);return}else w?!R&&y[b]&&(P=!0):delete y[b];P?y[b]=E:l(y,b,E)})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||f(this)})},"6f53":function(s,i,a){var o=a("83ab"),l=a("df75"),c=a("fc6a"),u=a("d1e7").f,f=function(h){return function(p){for(var g=c(p),v=l(g),y=v.length,b=0,E=[],x;y>b;)x=v[b++],(!o||u.call(g,x))&&E.push(h?[x,g[x]]:g[x]);return E}};s.exports={entries:f(!0),values:f(!1)}},"73d9":function(s,i,a){var o=a("44d2");o("flatMap")},7418:function(s,i){i.f=Object.getOwnPropertySymbols},"746f":function(s,i,a){var o=a("428f"),l=a("5135"),c=a("e538"),u=a("9bf2").f;s.exports=function(f){var h=o.Symbol||(o.Symbol={});l(h,f)||u(h,f,{value:c.f(f)})}},7839:function(s,i){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,i,a){var o=a("1d80");s.exports=function(l){return Object(o(l))}},"7c73":function(s,i,a){var o=a("825a"),l=a("37e8"),c=a("7839"),u=a("d012"),f=a("1be4"),h=a("cc12"),p=a("f772"),g=">",v="<",y="prototype",b="script",E=p("IE_PROTO"),x=function(){},w=function(m){return v+b+g+m+v+"/"+b+g},P=function(m){m.write(w("")),m.close();var S=m.parentWindow.Object;return m=null,S},R=function(){var m=h("iframe"),S="java"+b+":",I;return m.style.display="none",f.appendChild(m),m.src=String(S),I=m.contentWindow.document,I.open(),I.write(w("document.F=Object")),I.close(),I.F},A,_=function(){try{A=document.domain&&new ActiveXObject("htmlfile")}catch{}_=A?P(A):R();for(var m=c.length;m--;)delete _[y][c[m]];return _()};u[E]=!0,s.exports=Object.create||function(S,I){var k;return S!==null?(x[y]=o(S),k=new x,x[y]=null,k[E]=S):k=_(),I===void 0?k:l(k,I)}},"7dd0":function(s,i,a){var o=a("23e7"),l=a("9ed3"),c=a("e163"),u=a("d2bb"),f=a("d44e"),h=a("9112"),p=a("6eeb"),g=a("b622"),v=a("c430"),y=a("3f8c"),b=a("ae93"),E=b.IteratorPrototype,x=b.BUGGY_SAFARI_ITERATORS,w=g("iterator"),P="keys",R="values",A="entries",_=function(){return this};s.exports=function(m,S,I,k,C,O,D){l(I,S,k);var F=function(de){if(de===C&&j)return j;if(!x&&de in L)return L[de];switch(de){case P:return function(){return new I(this,de)};case R:return function(){return new I(this,de)};case A:return function(){return new I(this,de)}}return function(){return new I(this)}},N=S+" Iterator",M=!1,L=m.prototype,z=L[w]||L["@@iterator"]||C&&L[C],j=!x&&z||F(C),H=S=="Array"&&L.entries||z,G,W,ne;if(H&&(G=c(H.call(new m)),E!==Object.prototype&&G.next&&(!v&&c(G)!==E&&(u?u(G,E):typeof G[w]!="function"&&h(G,w,_)),f(G,N,!0,!0),v&&(y[N]=_))),C==R&&z&&z.name!==R&&(M=!0,j=function(){return z.call(this)}),(!v||D)&&L[w]!==j&&h(L,w,j),y[S]=j,C)if(W={values:F(R),keys:O?j:F(P),entries:F(A)},D)for(ne in W)(x||M||!(ne in L))&&p(L,ne,W[ne]);else o({target:S,proto:!0,forced:x||M},W);return W}},"7f9a":function(s,i,a){var o=a("da84"),l=a("8925"),c=o.WeakMap;s.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(s,i,a){var o=a("d039");s.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,i,a){var o=a("c04e"),l=a("9bf2"),c=a("5c6c");s.exports=function(u,f,h){var p=o(f);p in u?l.f(u,p,c(0,h)):u[p]=h}},"861d":function(s,i){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},8875:function(s,i,a){var o,l,c;(function(u,f){l=[],o=f,c=typeof o=="function"?o.apply(i,l):o,c!==void 0&&(s.exports=c)})(typeof self<"u"?self:this,function(){function u(){var f=Object.getOwnPropertyDescriptor(document,"currentScript");if(!f&&"currentScript"in document&&document.currentScript||f&&f.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(A){var h=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,p=/@([^@]*):(\d+):(\d+)\s*$/ig,g=h.exec(A.stack)||p.exec(A.stack),v=g&&g[1]||!1,y=g&&g[2]||!1,b=document.location.href.replace(document.location.hash,""),E,x,w,P=document.getElementsByTagName("script");v===b&&(E=document.documentElement.outerHTML,x=new RegExp("(?:[^\\n]+?\\n){0,"+(y-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),w=E.replace(x,"$1").trim());for(var R=0;R<P.length;R++)if(P[R].readyState==="interactive"||P[R].src===v||v===b&&P[R].innerHTML&&P[R].innerHTML.trim()===w)return P[R];return null}}return u})},8925:function(s,i,a){var o=a("c6cd"),l=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(c){return l.call(c)}),s.exports=o.inspectSource},"8aa5":function(s,i,a){var o=a("6547").charAt;s.exports=function(l,c,u){return c+(u?o(l,c).length:1)}},"8bbf":function(s,i){s.exports=r},"90e3":function(s,i){var a=0,o=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+o).toString(36)}},9112:function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("5c6c");s.exports=o?function(u,f,h){return l.f(u,f,c(1,h))}:function(u,f,h){return u[f]=h,u}},9263:function(s,i,a){var o=a("ad6d"),l=a("9f7f"),c=RegExp.prototype.exec,u=String.prototype.replace,f=c,h=function(){var y=/a/,b=/b*/g;return c.call(y,"a"),c.call(b,"a"),y.lastIndex!==0||b.lastIndex!==0}(),p=l.UNSUPPORTED_Y||l.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0,v=h||g||p;v&&(f=function(b){var E=this,x,w,P,R,A=p&&E.sticky,_=o.call(E),m=E.source,S=0,I=b;return A&&(_=_.replace("y",""),_.indexOf("g")===-1&&(_+="g"),I=String(b).slice(E.lastIndex),E.lastIndex>0&&(!E.multiline||E.multiline&&b[E.lastIndex-1]!==`
`)&&(m="(?: "+m+")",I=" "+I,S++),w=new RegExp("^(?:"+m+")",_)),g&&(w=new RegExp("^"+m+"$(?!\\s)",_)),h&&(x=E.lastIndex),P=c.call(A?w:E,I),A?P?(P.input=P.input.slice(S),P[0]=P[0].slice(S),P.index=E.lastIndex,E.lastIndex+=P[0].length):E.lastIndex=0:h&&P&&(E.lastIndex=E.global?P.index+P[0].length:x),g&&P&&P.length>1&&u.call(P[0],w,function(){for(R=1;R<arguments.length-2;R++)arguments[R]===void 0&&(P[R]=void 0)}),P}),s.exports=f},"94ca":function(s,i,a){var o=a("d039"),l=/#|\.prototype\./,c=function(g,v){var y=f[u(g)];return y==p?!0:y==h?!1:typeof v=="function"?o(v):!!v},u=c.normalize=function(g){return String(g).replace(l,".").toLowerCase()},f=c.data={},h=c.NATIVE="N",p=c.POLYFILL="P";s.exports=c},"99af":function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("e8b5"),u=a("861d"),f=a("7b0b"),h=a("50c4"),p=a("8418"),g=a("65f0"),v=a("1dde"),y=a("b622"),b=a("2d00"),E=y("isConcatSpreadable"),x=9007199254740991,w="Maximum allowed index exceeded",P=b>=51||!l(function(){var m=[];return m[E]=!1,m.concat()[0]!==m}),R=v("concat"),A=function(m){if(!u(m))return!1;var S=m[E];return S!==void 0?!!S:c(m)},_=!P||!R;o({target:"Array",proto:!0,forced:_},{concat:function(S){var I=f(this),k=g(I,0),C=0,O,D,F,N,M;for(O=-1,F=arguments.length;O<F;O++)if(M=O===-1?I:arguments[O],A(M)){if(N=h(M.length),C+N>x)throw TypeError(w);for(D=0;D<N;D++,C++)D in M&&p(k,C,M[D])}else{if(C>=x)throw TypeError(w);p(k,C++,M)}return k.length=C,k}})},"9bdd":function(s,i,a){var o=a("825a");s.exports=function(l,c,u,f){try{return f?c(o(u)[0],u[1]):c(u)}catch(p){var h=l.return;throw h!==void 0&&o(h.call(l)),p}}},"9bf2":function(s,i,a){var o=a("83ab"),l=a("0cfb"),c=a("825a"),u=a("c04e"),f=Object.defineProperty;i.f=o?f:function(p,g,v){if(c(p),g=u(g,!0),c(v),l)try{return f(p,g,v)}catch{}if("get"in v||"set"in v)throw TypeError("Accessors not supported");return"value"in v&&(p[g]=v.value),p}},"9ed3":function(s,i,a){var o=a("ae93").IteratorPrototype,l=a("7c73"),c=a("5c6c"),u=a("d44e"),f=a("3f8c"),h=function(){return this};s.exports=function(p,g,v){var y=g+" Iterator";return p.prototype=l(o,{next:c(1,v)}),u(p,y,!1,!0),f[y]=h,p}},"9f7f":function(s,i,a){var o=a("d039");function l(c,u){return RegExp(c,u)}i.UNSUPPORTED_Y=o(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),i.BROKEN_CARET=o(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(s,i,a){var o=a("e8b5"),l=a("50c4"),c=a("0366"),u=function(f,h,p,g,v,y,b,E){for(var x=v,w=0,P=b?c(b,E,3):!1,R;w<g;){if(w in p){if(R=P?P(p[w],w,h):p[w],y>0&&o(R))x=u(f,h,R,l(R.length),x,y-1)-1;else{if(x>=9007199254740991)throw TypeError("Exceed the acceptable array length");f[x]=R}x++}w++}return x};s.exports=u},a352:function(s,i){s.exports=n},a434:function(s,i,a){var o=a("23e7"),l=a("23cb"),c=a("a691"),u=a("50c4"),f=a("7b0b"),h=a("65f0"),p=a("8418"),g=a("1dde"),v=a("ae40"),y=g("splice"),b=v("splice",{ACCESSORS:!0,0:0,1:2}),E=Math.max,x=Math.min,w=9007199254740991,P="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!y||!b},{splice:function(A,_){var m=f(this),S=u(m.length),I=l(A,S),k=arguments.length,C,O,D,F,N,M;if(k===0?C=O=0:k===1?(C=0,O=S-I):(C=k-2,O=x(E(c(_),0),S-I)),S+C-O>w)throw TypeError(P);for(D=h(m,O),F=0;F<O;F++)N=I+F,N in m&&p(D,F,m[N]);if(D.length=O,C<O){for(F=I;F<S-O;F++)N=F+O,M=F+C,N in m?m[M]=m[N]:delete m[M];for(F=S;F>S-O+C;F--)delete m[F-1]}else if(C>O)for(F=S-O;F>I;F--)N=F+O-1,M=F+C-1,N in m?m[M]=m[N]:delete m[M];for(F=0;F<C;F++)m[F+I]=arguments[F+2];return m.length=S-O+C,D}})},a4d3:function(s,i,a){var o=a("23e7"),l=a("da84"),c=a("d066"),u=a("c430"),f=a("83ab"),h=a("4930"),p=a("fdbf"),g=a("d039"),v=a("5135"),y=a("e8b5"),b=a("861d"),E=a("825a"),x=a("7b0b"),w=a("fc6a"),P=a("c04e"),R=a("5c6c"),A=a("7c73"),_=a("df75"),m=a("241c"),S=a("057f"),I=a("7418"),k=a("06cf"),C=a("9bf2"),O=a("d1e7"),D=a("9112"),F=a("6eeb"),N=a("5692"),M=a("f772"),L=a("d012"),z=a("90e3"),j=a("b622"),H=a("e538"),G=a("746f"),W=a("d44e"),ne=a("69f3"),de=a("b727").forEach,se=M("hidden"),ce="Symbol",te="prototype",Z=j("toPrimitive"),ye=ne.set,J=ne.getterFor(ce),X=Object[te],Q=l.Symbol,fe=c("JSON","stringify"),ve=k.f,ie=C.f,ee=S.f,ge=O.f,Te=N("symbols"),Ie=N("op-symbols"),Ae=N("string-to-symbol-registry"),We=N("symbol-to-string-registry"),De=N("wks"),He=l.QObject,$e=!He||!He[te]||!He[te].findChild,ke=f&&g(function(){return A(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a!=7})?function(ft,ct,ht){var Ct=ve(X,ct);Ct&&delete X[ct],ie(ft,ct,ht),Ct&&ft!==X&&ie(X,ct,Ct)}:ie,Ke=function(ft,ct){var ht=Te[ft]=A(Q[te]);return ye(ht,{type:ce,tag:ft,description:ct}),f||(ht.description=ct),ht},_e=p?function(ft){return typeof ft=="symbol"}:function(ft){return Object(ft)instanceof Q},Ee=function(ct,ht,Ct){ct===X&&Ee(Ie,ht,Ct),E(ct);var Rt=P(ht,!0);return E(Ct),v(Te,Rt)?(Ct.enumerable?(v(ct,se)&&ct[se][Rt]&&(ct[se][Rt]=!1),Ct=A(Ct,{enumerable:R(0,!1)})):(v(ct,se)||ie(ct,se,R(1,{})),ct[se][Rt]=!0),ke(ct,Rt,Ct)):ie(ct,Rt,Ct)},Se=function(ct,ht){E(ct);var Ct=w(ht),Rt=_(Ct).concat(bt(Ct));return de(Rt,function(gr){(!f||ze.call(Ct,gr))&&Ee(ct,gr,Ct[gr])}),ct},Me=function(ct,ht){return ht===void 0?A(ct):Se(A(ct),ht)},ze=function(ct){var ht=P(ct,!0),Ct=ge.call(this,ht);return this===X&&v(Te,ht)&&!v(Ie,ht)?!1:Ct||!v(this,ht)||!v(Te,ht)||v(this,se)&&this[se][ht]?Ct:!0},lt=function(ct,ht){var Ct=w(ct),Rt=P(ht,!0);if(!(Ct===X&&v(Te,Rt)&&!v(Ie,Rt))){var gr=ve(Ct,Rt);return gr&&v(Te,Rt)&&!(v(Ct,se)&&Ct[se][Rt])&&(gr.enumerable=!0),gr}},vt=function(ct){var ht=ee(w(ct)),Ct=[];return de(ht,function(Rt){!v(Te,Rt)&&!v(L,Rt)&&Ct.push(Rt)}),Ct},bt=function(ct){var ht=ct===X,Ct=ee(ht?Ie:w(ct)),Rt=[];return de(Ct,function(gr){v(Te,gr)&&(!ht||v(X,gr))&&Rt.push(Te[gr])}),Rt};if(h||(Q=function(){if(this instanceof Q)throw TypeError("Symbol is not a constructor");var ct=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ht=z(ct),Ct=function(Rt){this===X&&Ct.call(Ie,Rt),v(this,se)&&v(this[se],ht)&&(this[se][ht]=!1),ke(this,ht,R(1,Rt))};return f&&$e&&ke(X,ht,{configurable:!0,set:Ct}),Ke(ht,ct)},F(Q[te],"toString",function(){return J(this).tag}),F(Q,"withoutSetter",function(ft){return Ke(z(ft),ft)}),O.f=ze,C.f=Ee,k.f=lt,m.f=S.f=vt,I.f=bt,H.f=function(ft){return Ke(j(ft),ft)},f&&(ie(Q[te],"description",{configurable:!0,get:function(){return J(this).description}}),u||F(X,"propertyIsEnumerable",ze,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:Q}),de(_(De),function(ft){G(ft)}),o({target:ce,stat:!0,forced:!h},{for:function(ft){var ct=String(ft);if(v(Ae,ct))return Ae[ct];var ht=Q(ct);return Ae[ct]=ht,We[ht]=ct,ht},keyFor:function(ct){if(!_e(ct))throw TypeError(ct+" is not a symbol");if(v(We,ct))return We[ct]},useSetter:function(){$e=!0},useSimple:function(){$e=!1}}),o({target:"Object",stat:!0,forced:!h,sham:!f},{create:Me,defineProperty:Ee,defineProperties:Se,getOwnPropertyDescriptor:lt}),o({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:vt,getOwnPropertySymbols:bt}),o({target:"Object",stat:!0,forced:g(function(){I.f(1)})},{getOwnPropertySymbols:function(ct){return I.f(x(ct))}}),fe){var $t=!h||g(function(){var ft=Q();return fe([ft])!="[null]"||fe({a:ft})!="{}"||fe(Object(ft))!="{}"});o({target:"JSON",stat:!0,forced:$t},{stringify:function(ct,ht,Ct){for(var Rt=[ct],gr=1,rs;arguments.length>gr;)Rt.push(arguments[gr++]);if(rs=ht,!(!b(ht)&&ct===void 0||_e(ct)))return y(ht)||(ht=function(Pi,ps){if(typeof rs=="function"&&(ps=rs.call(this,Pi,ps)),!_e(ps))return ps}),Rt[1]=ht,fe.apply(null,Rt)}})}Q[te][Z]||D(Q[te],Z,Q[te].valueOf),W(Q,ce),L[se]=!0},a630:function(s,i,a){var o=a("23e7"),l=a("4df4"),c=a("1c7e"),u=!c(function(f){Array.from(f)});o({target:"Array",stat:!0,forced:u},{from:l})},a640:function(s,i,a){var o=a("d039");s.exports=function(l,c){var u=[][l];return!!u&&o(function(){u.call(null,c||function(){throw 1},1)})}},a691:function(s,i){var a=Math.ceil,o=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(l>0?o:a)(l)}},ab13:function(s,i,a){var o=a("b622"),l=o("match");s.exports=function(c){var u=/./;try{"/./"[c](u)}catch{try{return u[l]=!1,"/./"[c](u)}catch{}}return!1}},ac1f:function(s,i,a){var o=a("23e7"),l=a("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(s,i,a){var o=a("825a");s.exports=function(){var l=o(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("5135"),u=Object.defineProperty,f={},h=function(p){throw p};s.exports=function(p,g){if(c(f,p))return f[p];g||(g={});var v=[][p],y=c(g,"ACCESSORS")?g.ACCESSORS:!1,b=c(g,0)?g[0]:h,E=c(g,1)?g[1]:void 0;return f[p]=!!v&&!l(function(){if(y&&!o)return!0;var x={length:-1};y?u(x,1,{enumerable:!0,get:h}):x[1]=1,v.call(x,b,E)})}},ae93:function(s,i,a){var o=a("e163"),l=a("9112"),c=a("5135"),u=a("b622"),f=a("c430"),h=u("iterator"),p=!1,g=function(){return this},v,y,b;[].keys&&(b=[].keys(),"next"in b?(y=o(o(b)),y!==Object.prototype&&(v=y)):p=!0),v==null&&(v={}),!f&&!c(v,h)&&l(v,h,g),s.exports={IteratorPrototype:v,BUGGY_SAFARI_ITERATORS:p}},b041:function(s,i,a){var o=a("00ee"),l=a("f5df");s.exports=o?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(s,i,a){var o=a("83ab"),l=a("9bf2").f,c=Function.prototype,u=c.toString,f=/^\s*function ([^ (]*)/,h="name";o&&!(h in c)&&l(c,h,{configurable:!0,get:function(){try{return u.call(this).match(f)[1]}catch{return""}}})},b622:function(s,i,a){var o=a("da84"),l=a("5692"),c=a("5135"),u=a("90e3"),f=a("4930"),h=a("fdbf"),p=l("wks"),g=o.Symbol,v=h?g:g&&g.withoutSetter||u;s.exports=function(y){return c(p,y)||(f&&c(g,y)?p[y]=g[y]:p[y]=v("Symbol."+y)),p[y]}},b64b:function(s,i,a){var o=a("23e7"),l=a("7b0b"),c=a("df75"),u=a("d039"),f=u(function(){c(1)});o({target:"Object",stat:!0,forced:f},{keys:function(p){return c(l(p))}})},b727:function(s,i,a){var o=a("0366"),l=a("44ad"),c=a("7b0b"),u=a("50c4"),f=a("65f0"),h=[].push,p=function(g){var v=g==1,y=g==2,b=g==3,E=g==4,x=g==6,w=g==5||x;return function(P,R,A,_){for(var m=c(P),S=l(m),I=o(R,A,3),k=u(S.length),C=0,O=_||f,D=v?O(P,k):y?O(P,0):void 0,F,N;k>C;C++)if((w||C in S)&&(F=S[C],N=I(F,C,m),g)){if(v)D[C]=N;else if(N)switch(g){case 3:return!0;case 5:return F;case 6:return C;case 2:h.call(D,F)}else if(E)return!1}return x?-1:b||E?E:D}};s.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6)}},c04e:function(s,i,a){var o=a("861d");s.exports=function(l,c){if(!o(l))return l;var u,f;if(c&&typeof(u=l.toString)=="function"&&!o(f=u.call(l))||typeof(u=l.valueOf)=="function"&&!o(f=u.call(l))||!c&&typeof(u=l.toString)=="function"&&!o(f=u.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},c430:function(s,i){s.exports=!1},c6b6:function(s,i){var a={}.toString;s.exports=function(o){return a.call(o).slice(8,-1)}},c6cd:function(s,i,a){var o=a("da84"),l=a("ce4e"),c="__core-js_shared__",u=o[c]||l(c,{});s.exports=u},c740:function(s,i,a){var o=a("23e7"),l=a("b727").findIndex,c=a("44d2"),u=a("ae40"),f="findIndex",h=!0,p=u(f);f in[]&&Array(1)[f](function(){h=!1}),o({target:"Array",proto:!0,forced:h||!p},{findIndex:function(v){return l(this,v,arguments.length>1?arguments[1]:void 0)}}),c(f)},c8ba:function(s,i){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}s.exports=a},c975:function(s,i,a){var o=a("23e7"),l=a("4d64").indexOf,c=a("a640"),u=a("ae40"),f=[].indexOf,h=!!f&&1/[1].indexOf(1,-0)<0,p=c("indexOf"),g=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:h||!p||!g},{indexOf:function(y){return h?f.apply(this,arguments)||0:l(this,y,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,i,a){var o=a("5135"),l=a("fc6a"),c=a("4d64").indexOf,u=a("d012");s.exports=function(f,h){var p=l(f),g=0,v=[],y;for(y in p)!o(u,y)&&o(p,y)&&v.push(y);for(;h.length>g;)o(p,y=h[g++])&&(~c(v,y)||v.push(y));return v}},caad:function(s,i,a){var o=a("23e7"),l=a("4d64").includes,c=a("44d2"),u=a("ae40"),f=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!f},{includes:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(s,i,a){var o=a("da84"),l=a("861d"),c=o.document,u=l(c)&&l(c.createElement);s.exports=function(f){return u?c.createElement(f):{}}},ce4e:function(s,i,a){var o=a("da84"),l=a("9112");s.exports=function(c,u){try{l(o,c,u)}catch{o[c]=u}return u}},d012:function(s,i){s.exports={}},d039:function(s,i){s.exports=function(a){try{return!!a()}catch{return!0}}},d066:function(s,i,a){var o=a("428f"),l=a("da84"),c=function(u){return typeof u=="function"?u:void 0};s.exports=function(u,f){return arguments.length<2?c(o[u])||c(l[u]):o[u]&&o[u][f]||l[u]&&l[u][f]}},d1e7:function(s,i,a){var o={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!o.call({1:2},1);i.f=c?function(f){var h=l(this,f);return!!h&&h.enumerable}:o},d28b:function(s,i,a){var o=a("746f");o("iterator")},d2bb:function(s,i,a){var o=a("825a"),l=a("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,u={},f;try{f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,f.call(u,[]),c=u instanceof Array}catch{}return function(p,g){return o(p),l(g),c?f.call(p,g):p.__proto__=g,p}}():void 0)},d3b7:function(s,i,a){var o=a("00ee"),l=a("6eeb"),c=a("b041");o||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(s,i,a){var o=a("9bf2").f,l=a("5135"),c=a("b622"),u=c("toStringTag");s.exports=function(f,h,p){f&&!l(f=p?f:f.prototype,u)&&o(f,u,{configurable:!0,value:h})}},d58f:function(s,i,a){var o=a("1c0b"),l=a("7b0b"),c=a("44ad"),u=a("50c4"),f=function(h){return function(p,g,v,y){o(g);var b=l(p),E=c(b),x=u(b.length),w=h?x-1:0,P=h?-1:1;if(v<2)for(;;){if(w in E){y=E[w],w+=P;break}if(w+=P,h?w<0:x<=w)throw TypeError("Reduce of empty array with no initial value")}for(;h?w>=0:x>w;w+=P)w in E&&(y=g(y,E[w],w,b));return y}};s.exports={left:f(!1),right:f(!0)}},d784:function(s,i,a){a("ac1f");var o=a("6eeb"),l=a("d039"),c=a("b622"),u=a("9263"),f=a("9112"),h=c("species"),p=!l(function(){var E=/./;return E.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(E,"$<a>")!=="7"}),g=function(){return"a".replace(/./,"$0")==="$0"}(),v=c("replace"),y=function(){return/./[v]?/./[v]("a","$0")==="":!1}(),b=!l(function(){var E=/(?:)/,x=E.exec;E.exec=function(){return x.apply(this,arguments)};var w="ab".split(E);return w.length!==2||w[0]!=="a"||w[1]!=="b"});s.exports=function(E,x,w,P){var R=c(E),A=!l(function(){var C={};return C[R]=function(){return 7},""[E](C)!=7}),_=A&&!l(function(){var C=!1,O=/a/;return E==="split"&&(O={},O.constructor={},O.constructor[h]=function(){return O},O.flags="",O[R]=/./[R]),O.exec=function(){return C=!0,null},O[R](""),!C});if(!A||!_||E==="replace"&&!(p&&g&&!y)||E==="split"&&!b){var m=/./[R],S=w(R,""[E],function(C,O,D,F,N){return O.exec===u?A&&!N?{done:!0,value:m.call(O,D,F)}:{done:!0,value:C.call(D,O,F)}:{done:!1}},{REPLACE_KEEPS_$0:g,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}),I=S[0],k=S[1];o(String.prototype,E,I),o(RegExp.prototype,R,x==2?function(C,O){return k.call(C,this,O)}:function(C){return k.call(C,this)})}P&&f(RegExp.prototype[R],"sham",!0)}},d81d:function(s,i,a){var o=a("23e7"),l=a("b727").map,c=a("1dde"),u=a("ae40"),f=c("map"),h=u("map");o({target:"Array",proto:!0,forced:!f||!h},{map:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,i,a){(function(o){var l=function(c){return c&&c.Math==Math&&c};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof o=="object"&&o)||Function("return this")()}).call(this,a("c8ba"))},dbb4:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("56ef"),u=a("fc6a"),f=a("06cf"),h=a("8418");o({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(g){for(var v=u(g),y=f.f,b=c(v),E={},x=0,w,P;b.length>x;)P=y(v,w=b[x++]),P!==void 0&&h(E,w,P);return E}})},dbf1:function(s,i,a){(function(o){a.d(i,"a",function(){return c});function l(){return typeof window<"u"?window.console:o.console}var c=l()}).call(this,a("c8ba"))},ddb0:function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("e260"),u=a("9112"),f=a("b622"),h=f("iterator"),p=f("toStringTag"),g=c.values;for(var v in l){var y=o[v],b=y&&y.prototype;if(b){if(b[h]!==g)try{u(b,h,g)}catch{b[h]=g}if(b[p]||u(b,p,v),l[v]){for(var E in c)if(b[E]!==c[E])try{u(b,E,c[E])}catch{b[E]=c[E]}}}}},df75:function(s,i,a){var o=a("ca84"),l=a("7839");s.exports=Object.keys||function(u){return o(u,l)}},e01a:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("da84"),u=a("5135"),f=a("861d"),h=a("9bf2").f,p=a("e893"),g=c.Symbol;if(l&&typeof g=="function"&&(!("description"in g.prototype)||g().description!==void 0)){var v={},y=function(){var R=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),A=this instanceof y?new g(R):R===void 0?g():g(R);return R===""&&(v[A]=!0),A};p(y,g);var b=y.prototype=g.prototype;b.constructor=y;var E=b.toString,x=String(g("test"))=="Symbol(test)",w=/^Symbol\((.*)\)[^)]+$/;h(b,"description",{configurable:!0,get:function(){var R=f(this)?this.valueOf():this,A=E.call(R);if(u(v,R))return"";var _=x?A.slice(7,-1):A.replace(w,"$1");return _===""?void 0:_}}),o({global:!0,forced:!0},{Symbol:y})}},e163:function(s,i,a){var o=a("5135"),l=a("7b0b"),c=a("f772"),u=a("e177"),f=c("IE_PROTO"),h=Object.prototype;s.exports=u?Object.getPrototypeOf:function(p){return p=l(p),o(p,f)?p[f]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?h:null}},e177:function(s,i,a){var o=a("d039");s.exports=!o(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(s,i,a){var o=a("fc6a"),l=a("44d2"),c=a("3f8c"),u=a("69f3"),f=a("7dd0"),h="Array Iterator",p=u.set,g=u.getterFor(h);s.exports=f(Array,"Array",function(v,y){p(this,{type:h,target:o(v),index:0,kind:y})},function(){var v=g(this),y=v.target,b=v.kind,E=v.index++;return!y||E>=y.length?(v.target=void 0,{value:void 0,done:!0}):b=="keys"?{value:E,done:!1}:b=="values"?{value:y[E],done:!1}:{value:[E,y[E]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("fc6a"),u=a("06cf").f,f=a("83ab"),h=l(function(){u(1)}),p=!f||h;o({target:"Object",stat:!0,forced:p,sham:!f},{getOwnPropertyDescriptor:function(v,y){return u(c(v),y)}})},e538:function(s,i,a){var o=a("b622");i.f=o},e893:function(s,i,a){var o=a("5135"),l=a("56ef"),c=a("06cf"),u=a("9bf2");s.exports=function(f,h){for(var p=l(h),g=u.f,v=c.f,y=0;y<p.length;y++){var b=p[y];o(f,b)||g(f,b,v(h,b))}}},e8b5:function(s,i,a){var o=a("c6b6");s.exports=Array.isArray||function(c){return o(c)=="Array"}},e95a:function(s,i,a){var o=a("b622"),l=a("3f8c"),c=o("iterator"),u=Array.prototype;s.exports=function(f){return f!==void 0&&(l.Array===f||u[c]===f)}},f5df:function(s,i,a){var o=a("00ee"),l=a("c6b6"),c=a("b622"),u=c("toStringTag"),f=l(function(){return arguments}())=="Arguments",h=function(p,g){try{return p[g]}catch{}};s.exports=o?l:function(p){var g,v,y;return p===void 0?"Undefined":p===null?"Null":typeof(v=h(g=Object(p),u))=="string"?v:f?l(g):(y=l(g))=="Object"&&typeof g.callee=="function"?"Arguments":y}},f772:function(s,i,a){var o=a("5692"),l=a("90e3"),c=o("keys");s.exports=function(u){return c[u]||(c[u]=l(u))}},fb15:function(s,i,a){if(a.r(i),typeof window<"u"){var o=window.document.currentScript;{var l=a("8875");o=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(a.p=c[1])}a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("159b"),a("a4d3"),a("e439"),a("dbb4"),a("b64b");function u(_e,Ee,Se){return Ee in _e?Object.defineProperty(_e,Ee,{value:Se,enumerable:!0,configurable:!0,writable:!0}):_e[Ee]=Se,_e}function f(_e,Ee){var Se=Object.keys(_e);if(Object.getOwnPropertySymbols){var Me=Object.getOwnPropertySymbols(_e);Ee&&(Me=Me.filter(function(ze){return Object.getOwnPropertyDescriptor(_e,ze).enumerable})),Se.push.apply(Se,Me)}return Se}function h(_e){for(var Ee=1;Ee<arguments.length;Ee++){var Se=arguments[Ee]!=null?arguments[Ee]:{};Ee%2?f(Object(Se),!0).forEach(function(Me){u(_e,Me,Se[Me])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(Se)):f(Object(Se)).forEach(function(Me){Object.defineProperty(_e,Me,Object.getOwnPropertyDescriptor(Se,Me))})}return _e}function p(_e){if(Array.isArray(_e))return _e}a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function g(_e,Ee){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_e)))){var Se=[],Me=!0,ze=!1,lt=void 0;try{for(var vt=_e[Symbol.iterator](),bt;!(Me=(bt=vt.next()).done)&&(Se.push(bt.value),!(Ee&&Se.length===Ee));Me=!0);}catch($t){ze=!0,lt=$t}finally{try{!Me&&vt.return!=null&&vt.return()}finally{if(ze)throw lt}}return Se}}a("a630"),a("fb6a"),a("b0c0"),a("25f0");function v(_e,Ee){(Ee==null||Ee>_e.length)&&(Ee=_e.length);for(var Se=0,Me=new Array(Ee);Se<Ee;Se++)Me[Se]=_e[Se];return Me}function y(_e,Ee){if(_e){if(typeof _e=="string")return v(_e,Ee);var Se=Object.prototype.toString.call(_e).slice(8,-1);if(Se==="Object"&&_e.constructor&&(Se=_e.constructor.name),Se==="Map"||Se==="Set")return Array.from(_e);if(Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se))return v(_e,Ee)}}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(_e,Ee){return p(_e)||g(_e,Ee)||y(_e,Ee)||b()}function x(_e){if(Array.isArray(_e))return v(_e)}function w(_e){if(typeof Symbol<"u"&&Symbol.iterator in Object(_e))return Array.from(_e)}function P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R(_e){return x(_e)||w(_e)||y(_e)||P()}var A=a("a352"),_=a.n(A);function m(_e){_e.parentElement!==null&&_e.parentElement.removeChild(_e)}function S(_e,Ee,Se){var Me=Se===0?_e.children[0]:_e.children[Se-1].nextSibling;_e.insertBefore(Ee,Me)}var I=a("dbf1");a("13d5"),a("4fad"),a("ac1f"),a("5319");function k(_e){var Ee=Object.create(null);return function(Me){var ze=Ee[Me];return ze||(Ee[Me]=_e(Me))}}var C=/-(\w)/g,O=k(function(_e){return _e.replace(C,function(Ee,Se){return Se.toUpperCase()})});a("5db7"),a("73d9");var D=["Start","Add","Remove","Update","End"],F=["Choose","Unchoose","Sort","Filter","Clone"],N=["Move"],M=[N,D,F].flatMap(function(_e){return _e}).map(function(_e){return"on".concat(_e)}),L={manage:N,manageAndEmit:D,emit:F};function z(_e){return M.indexOf(_e)!==-1}a("caad"),a("2ca0");var j=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function H(_e){return j.includes(_e)}function G(_e){return["transition-group","TransitionGroup"].includes(_e)}function W(_e){return["id","class","role","style"].includes(_e)||_e.startsWith("data-")||_e.startsWith("aria-")||_e.startsWith("on")}function ne(_e){return _e.reduce(function(Ee,Se){var Me=E(Se,2),ze=Me[0],lt=Me[1];return Ee[ze]=lt,Ee},{})}function de(_e){var Ee=_e.$attrs,Se=_e.componentData,Me=Se===void 0?{}:Se,ze=ne(Object.entries(Ee).filter(function(lt){var vt=E(lt,2),bt=vt[0];return vt[1],W(bt)}));return h(h({},ze),Me)}function se(_e){var Ee=_e.$attrs,Se=_e.callBackBuilder,Me=ne(ce(Ee));Object.entries(Se).forEach(function(lt){var vt=E(lt,2),bt=vt[0],$t=vt[1];L[bt].forEach(function(ft){Me["on".concat(ft)]=$t(ft)})});var ze="[data-draggable]".concat(Me.draggable||"");return h(h({},Me),{},{draggable:ze})}function ce(_e){return Object.entries(_e).filter(function(Ee){var Se=E(Ee,2),Me=Se[0];return Se[1],!W(Me)}).map(function(Ee){var Se=E(Ee,2),Me=Se[0],ze=Se[1];return[O(Me),ze]}).filter(function(Ee){var Se=E(Ee,2),Me=Se[0];return Se[1],!z(Me)})}a("c740");function te(_e,Ee){if(!(_e instanceof Ee))throw new TypeError("Cannot call a class as a function")}function Z(_e,Ee){for(var Se=0;Se<Ee.length;Se++){var Me=Ee[Se];Me.enumerable=Me.enumerable||!1,Me.configurable=!0,"value"in Me&&(Me.writable=!0),Object.defineProperty(_e,Me.key,Me)}}function ye(_e,Ee,Se){return Ee&&Z(_e.prototype,Ee),_e}var J=function(Ee){var Se=Ee.el;return Se},X=function(Ee,Se){return Ee.__draggable_context=Se},Q=function(Ee){return Ee.__draggable_context},fe=function(){function _e(Ee){var Se=Ee.nodes,Me=Se.header,ze=Se.default,lt=Se.footer,vt=Ee.root,bt=Ee.realList;te(this,_e),this.defaultNodes=ze,this.children=[].concat(R(Me),R(ze),R(lt)),this.externalComponent=vt.externalComponent,this.rootTransition=vt.transition,this.tag=vt.tag,this.realList=bt}return ye(_e,[{key:"render",value:function(Se,Me){var ze=this.tag,lt=this.children,vt=this._isRootComponent,bt=vt?{default:function(){return lt}}:lt;return Se(ze,Me,bt)}},{key:"updated",value:function(){var Se=this.defaultNodes,Me=this.realList;Se.forEach(function(ze,lt){X(J(ze),{element:Me[lt],index:lt})})}},{key:"getUnderlyingVm",value:function(Se){return Q(Se)}},{key:"getVmIndexFromDomIndex",value:function(Se,Me){var ze=this.defaultNodes,lt=ze.length,vt=Me.children,bt=vt.item(Se);if(bt===null)return lt;var $t=Q(bt);if($t)return $t.index;if(lt===0)return 0;var ft=J(ze[0]),ct=R(vt).findIndex(function(ht){return ht===ft});return Se<ct?0:lt}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),_e}(),ve=a("8bbf");function ie(_e,Ee){var Se=_e[Ee];return Se?Se():[]}function ee(_e){var Ee=_e.$slots,Se=_e.realList,Me=_e.getKey,ze=Se||[],lt=["header","footer"].map(function(ht){return ie(Ee,ht)}),vt=E(lt,2),bt=vt[0],$t=vt[1],ft=Ee.item;if(!ft)throw new Error("draggable element must have an item slot");var ct=ze.flatMap(function(ht,Ct){return ft({element:ht,index:Ct}).map(function(Rt){return Rt.key=Me(ht),Rt.props=h(h({},Rt.props||{}),{},{"data-draggable":!0}),Rt})});if(ct.length!==ze.length)throw new Error("Item slot must have only one child");return{header:bt,footer:$t,default:ct}}function ge(_e){var Ee=G(_e),Se=!H(_e)&&!Ee;return{transition:Ee,externalComponent:Se,tag:Se?Object(ve.resolveComponent)(_e):Ee?ve.TransitionGroup:_e}}function Te(_e){var Ee=_e.$slots,Se=_e.tag,Me=_e.realList,ze=_e.getKey,lt=ee({$slots:Ee,realList:Me,getKey:ze}),vt=ge(Se);return new fe({nodes:lt,root:vt,realList:Me})}function Ie(_e,Ee){var Se=this;Object(ve.nextTick)(function(){return Se.$emit(_e.toLowerCase(),Ee)})}function Ae(_e){var Ee=this;return function(Se,Me){if(Ee.realList!==null)return Ee["onDrag".concat(_e)](Se,Me)}}function We(_e){var Ee=this,Se=Ae.call(this,_e);return function(Me,ze){Se.call(Ee,Me,ze),Ie.call(Ee,_e,Me)}}var De=null,He={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(Ee){return Ee}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},$e=["update:modelValue","change"].concat(R([].concat(R(L.manageAndEmit),R(L.emit)).map(function(_e){return _e.toLowerCase()}))),ke=Object(ve.defineComponent)({name:"draggable",inheritAttrs:!1,props:He,emits:$e,data:function(){return{error:!1}},render:function(){try{this.error=!1;var Ee=this.$slots,Se=this.$attrs,Me=this.tag,ze=this.componentData,lt=this.realList,vt=this.getKey,bt=Te({$slots:Ee,tag:Me,realList:lt,getKey:vt});this.componentStructure=bt;var $t=de({$attrs:Se,componentData:ze});return bt.render(ve.h,$t)}catch(ft){return this.error=!0,Object(ve.h)("pre",{style:{color:"red"}},ft.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&I.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var Ee=this;if(!this.error){var Se=this.$attrs,Me=this.$el,ze=this.componentStructure;ze.updated();var lt=se({$attrs:Se,callBackBuilder:{manageAndEmit:function($t){return We.call(Ee,$t)},emit:function($t){return Ie.bind(Ee,$t)},manage:function($t){return Ae.call(Ee,$t)}}}),vt=Me.nodeType===1?Me:Me.parentElement;this._sortable=new _.a(vt,lt),this.targetDomElement=vt,vt.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var Ee=this.list;return Ee||this.modelValue},getKey:function(){var Ee=this.itemKey;return typeof Ee=="function"?Ee:function(Se){return Se[Ee]}}},watch:{$attrs:{handler:function(Ee){var Se=this._sortable;Se&&ce(Ee).forEach(function(Me){var ze=E(Me,2),lt=ze[0],vt=ze[1];Se.option(lt,vt)})},deep:!0}},methods:{getUnderlyingVm:function(Ee){return this.componentStructure.getUnderlyingVm(Ee)||null},getUnderlyingPotencialDraggableComponent:function(Ee){return Ee.__draggable_component__},emitChanges:function(Ee){var Se=this;Object(ve.nextTick)(function(){return Se.$emit("change",Ee)})},alterList:function(Ee){if(this.list){Ee(this.list);return}var Se=R(this.modelValue);Ee(Se),this.$emit("update:modelValue",Se)},spliceList:function(){var Ee=arguments,Se=function(ze){return ze.splice.apply(ze,R(Ee))};this.alterList(Se)},updatePosition:function(Ee,Se){var Me=function(lt){return lt.splice(Se,0,lt.splice(Ee,1)[0])};this.alterList(Me)},getRelatedContextFromMoveEvent:function(Ee){var Se=Ee.to,Me=Ee.related,ze=this.getUnderlyingPotencialDraggableComponent(Se);if(!ze)return{component:ze};var lt=ze.realList,vt={list:lt,component:ze};if(Se!==Me&&lt){var bt=ze.getUnderlyingVm(Me)||{};return h(h({},bt),vt)}return vt},getVmIndexFromDomIndex:function(Ee){return this.componentStructure.getVmIndexFromDomIndex(Ee,this.targetDomElement)},onDragStart:function(Ee){this.context=this.getUnderlyingVm(Ee.item),Ee.item._underlying_vm_=this.clone(this.context.element),De=Ee.item},onDragAdd:function(Ee){var Se=Ee.item._underlying_vm_;if(Se!==void 0){m(Ee.item);var Me=this.getVmIndexFromDomIndex(Ee.newIndex);this.spliceList(Me,0,Se);var ze={element:Se,newIndex:Me};this.emitChanges({added:ze})}},onDragRemove:function(Ee){if(S(this.$el,Ee.item,Ee.oldIndex),Ee.pullMode==="clone"){m(Ee.clone);return}var Se=this.context,Me=Se.index,ze=Se.element;this.spliceList(Me,1);var lt={element:ze,oldIndex:Me};this.emitChanges({removed:lt})},onDragUpdate:function(Ee){m(Ee.item),S(Ee.from,Ee.item,Ee.oldIndex);var Se=this.context.index,Me=this.getVmIndexFromDomIndex(Ee.newIndex);this.updatePosition(Se,Me);var ze={element:this.context.element,oldIndex:Se,newIndex:Me};this.emitChanges({moved:ze})},computeFutureIndex:function(Ee,Se){if(!Ee.element)return 0;var Me=R(Se.to.children).filter(function(bt){return bt.style.display!=="none"}),ze=Me.indexOf(Se.related),lt=Ee.component.getVmIndexFromDomIndex(ze),vt=Me.indexOf(De)!==-1;return vt||!Se.willInsertAfter?lt:lt+1},onDragMove:function(Ee,Se){var Me=this.move,ze=this.realList;if(!Me||!ze)return!0;var lt=this.getRelatedContextFromMoveEvent(Ee),vt=this.computeFutureIndex(lt,Ee),bt=h(h({},this.context),{},{futureIndex:vt}),$t=h(h({},Ee),{},{relatedContext:lt,draggedContext:bt});return Me($t,Se)},onDragEnd:function(){De=null}}}),Ke=ke;i.default=Ke},fb6a:function(s,i,a){var o=a("23e7"),l=a("861d"),c=a("e8b5"),u=a("23cb"),f=a("50c4"),h=a("fc6a"),p=a("8418"),g=a("b622"),v=a("1dde"),y=a("ae40"),b=v("slice"),E=y("slice",{ACCESSORS:!0,0:0,1:2}),x=g("species"),w=[].slice,P=Math.max;o({target:"Array",proto:!0,forced:!b||!E},{slice:function(A,_){var m=h(this),S=f(m.length),I=u(A,S),k=u(_===void 0?S:_,S),C,O,D;if(c(m)&&(C=m.constructor,typeof C=="function"&&(C===Array||c(C.prototype))?C=void 0:l(C)&&(C=C[x],C===null&&(C=void 0)),C===Array||C===void 0))return w.call(m,I,k);for(O=new(C===void 0?Array:C)(P(k-I,0)),D=0;I<k;I++,D++)I in m&&p(O,D,m[I]);return O.length=D,O}})},fc6a:function(s,i,a){var o=a("44ad"),l=a("1d80");s.exports=function(c){return o(l(c))}},fdbc:function(s,i){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,i,a){var o=a("4930");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(noe);const Hoe={class:"assignment-dialog-modal"},joe={class:"form-row"},Goe={key:0,class:"form-row"},Woe=["value"],zoe={key:1,class:"form-row"},Koe=["value"],qoe={key:2,class:"form-row"},Xoe={class:"form-row"},Yoe={class:"form-row"},Qoe={class:"form-row"},Joe={class:"dialog-actions"},Zoe={__name:"AssignmentDialog",props:{teachers:Array,students:Array,assignment:Object},emits:["save","close"],setup(t,{emit:e}){const r=t,n=e,s=ae("lunch"),i=ae(""),a=ae(""),o=ae(""),l=ae("12:00"),c=ae("12:30"),u=ae(""),f=ae(""),h=ae("");Vt(()=>r.assignment,v=>{v?(f.value=v.id||Date.now().toString(),h.value=v.blockId||f.value||`block-${Date.now()}`,s.value=v.type||"lunch",i.value=v.teacherId||"",a.value=v.studentId||"",o.value=v.type==="other"?v.label:"",l.value=v.start||"12:00",c.value=v.end||"12:30",u.value=v.note||""):(f.value=Date.now().toString(),h.value=`block-${f.value}`,s.value="lunch",i.value="",a.value="",o.value="",l.value="12:00",c.value="12:30",u.value="")},{immediate:!0});const p=be(()=>{if(s.value==="lunch")return"Lunch";if(s.value==="break")return"Break";if(s.value==="class"){const v=r.teachers.find(y=>y.id===i.value);return v?v.name||v.email||v.id:""}if(s.value==="student"){const v=r.students.find(y=>y.id===a.value);return v?`${v.firstName} ${v.lastName}`:""}return s.value==="other"?o.value:""});function g(){!l.value||!c.value||s.value==="class"&&!i.value||s.value==="student"&&!a.value||s.value==="other"&&!o.value||n("save",{id:f.value,blockId:h.value,type:s.value,label:p.value,start:l.value,end:c.value,note:u.value,teacherId:i.value,studentId:a.value})}return(v,y)=>(B(),U("div",{class:"assignment-dialog-overlay",onClick:y[8]||(y[8]=Xr(b=>v.$emit("close"),["self"]))},[d("div",Hoe,[y[20]||(y[20]=d("h2",null,"Add Assignment",-1)),d("form",{onSubmit:Xr(g,["prevent"])},[d("div",joe,[y[10]||(y[10]=d("label",null,"Type:",-1)),Be(d("select",{"onUpdate:modelValue":y[0]||(y[0]=b=>s.value=b)},y[9]||(y[9]=[Dn('<option value="lunch" data-v-f2af98a0>Lunch</option><option value="break" data-v-f2af98a0>Break</option><option value="class" data-v-f2af98a0>Class</option><option value="student" data-v-f2af98a0>Student</option><option value="other" data-v-f2af98a0>Other</option>',5)]),512),[[cr,s.value]])]),s.value==="class"?(B(),U("div",Goe,[y[12]||(y[12]=d("label",null,"Teacher:",-1)),Be(d("select",{"onUpdate:modelValue":y[1]||(y[1]=b=>i.value=b)},[y[11]||(y[11]=d("option",{value:""},"Select teacher...",-1)),(B(!0),U(Pe,null,je(t.teachers,b=>(B(),U("option",{key:b.id,value:b.id},Y(b.name||b.email||b.id),9,Woe))),128))],512),[[cr,i.value]])])):xe("",!0),s.value==="student"?(B(),U("div",zoe,[y[14]||(y[14]=d("label",null,"Student:",-1)),Be(d("select",{"onUpdate:modelValue":y[2]||(y[2]=b=>a.value=b)},[y[13]||(y[13]=d("option",{value:""},"Select student...",-1)),(B(!0),U(Pe,null,je(t.students,b=>(B(),U("option",{key:b.id,value:b.id},Y(b.firstName)+" "+Y(b.lastName),9,Koe))),128))],512),[[cr,a.value]])])):xe("",!0),s.value==="other"?(B(),U("div",qoe,[y[15]||(y[15]=d("label",null,"Label:",-1)),Be(d("input",{"onUpdate:modelValue":y[3]||(y[3]=b=>o.value=b),placeholder:"Custom label"},null,512),[[gt,o.value]])])):xe("",!0),d("div",Xoe,[y[16]||(y[16]=d("label",null,"Start Time:",-1)),Be(d("input",{"onUpdate:modelValue":y[4]||(y[4]=b=>l.value=b),type:"time",required:""},null,512),[[gt,l.value]])]),d("div",Yoe,[y[17]||(y[17]=d("label",null,"End Time:",-1)),Be(d("input",{"onUpdate:modelValue":y[5]||(y[5]=b=>c.value=b),type:"time",required:""},null,512),[[gt,c.value]])]),d("div",Qoe,[y[18]||(y[18]=d("label",null,"Note:",-1)),Be(d("input",{"onUpdate:modelValue":y[6]||(y[6]=b=>u.value=b),placeholder:"Optional note"},null,512),[[gt,u.value]])]),d("div",Joe,[y[19]||(y[19]=d("button",{type:"submit",class:"btn btn-primary"},"Add",-1)),d("button",{type:"button",class:"btn btn-secondary",onClick:y[7]||(y[7]=b=>v.$emit("close"))},"Cancel")])],32)])]))}},ele=xt(Zoe,[["__scopeId","data-v-f2af98a0"]]),tle={class:"vertical-time-grid-wrapper"},rle={class:"grid-block-label-time"},nle=["title"],sle=["title"],ale=["onDragstart","onDrag","onDragend"],ile={class:"assignment-content"},ole={class:"assignment-label-time"},lle={class:"assignment-time-label"},cle={class:"assignment-actions"},ule=["onClick"],dle=["onClick"],fle=["onMousedown"],KS=24,hle={__name:"VerticalTimeGrid",props:{assignments:Array,teachers:Array,students:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,blocks:Array},emits:["update:assignments","edit-assignment"],setup(t,{emit:e}){const r=t,n=e,s=ae(null);ae(!1);const i=ae(r.assignments?r.assignments.map(F=>({...F})):[]);Vt(()=>r.assignments,F=>{i.value=F?F.map(N=>({...N})):[]},{immediate:!0});function a(F){const[N,M]=F.split(":").map(Number);return N*60+M}function o(F){const N=Math.floor(F/60),M=F%60;return`${N<10?"0":""}${N}:${M<10?"0":""}${M}`}const l=be(()=>!r.blocks||r.blocks.length===0?"08:00":r.blocks.reduce((F,N)=>N.startTime<F?N.startTime:F,r.blocks[0].startTime)),c=be(()=>!r.blocks||r.blocks.length===0?"16:00":r.blocks.reduce((F,N)=>N.endTime>F?N.endTime:F,r.blocks[0].endTime)),u=be(()=>a(l.value)),f=be(()=>a(c.value)),h=be(()=>f.value-u.value),p=be(()=>h.value*2.5+KS*2);be(()=>{if(!r.blocks)return[];const F=[];return r.blocks.forEach(N=>{F.includes(N.startTime)||F.push(N.startTime),F.includes(N.endTime)||F.push(N.endTime)}),F.sort((N,M)=>a(N)-a(M))});function g(F){return(a(F)-u.value)*2.5+KS-10}function v(F,N){if(!F||!N)return!1;const M=a(F.startTime),L=a(F.endTime),z=a(N.startTime),j=a(N.endTime);return M<j&&L>z}function y(F){const N=[];for(let L=0;L<F.length;L++){const z=F[L];let j=null;for(let H=0;H<N.length;H++)if(N[H].ids.some(G=>v(z,F.find(W=>W.id===G)))){j=N[H];break}j?(j.ids.push(z.id),j.blocks.push(z)):N.push({ids:[z.id],blocks:[z]})}let M=!0;for(;M;){M=!1;for(let L=0;L<N.length;L++){for(let z=L+1;z<N.length;z++)if(N[L].ids.some(j=>N[z].ids.some(H=>v(F.find(G=>G.id===j),F.find(G=>G.id===H))))){N[L].ids=Array.from(new Set([...N[L].ids,...N[z].ids])),N[L].blocks=Array.from(new Set([...N[L].blocks,...N[z].blocks])),N.splice(z,1),M=!0;break}if(M)break}}return N.map(L=>{const z=L.blocks.sort((G,W)=>G.startTime.localeCompare(W.startTime)||G.id.localeCompare(W.id)),j=z.reduce((G,W)=>W.startTime<G?W.startTime:G,z[0].startTime),H=z.reduce((G,W)=>W.endTime>G?W.endTime:G,z[0].endTime);return{ids:L.ids,startTime:j,endTime:H}})}be(()=>y(b.value));const b=be(()=>(r.blocks||[]).map((F,N)=>({...F,id:F.id||`block-${N}`})));function E(F){const N=[];for(let z=0;z<F.length;z++){const j=F[z];let H=null;for(let G=0;G<N.length;G++)if(N[G].some(W=>v(j,F.find(ne=>ne.id===W)))){H=N[G];break}H?H.push(j.id):N.push([j.id])}let M=!0;for(;M;){M=!1;for(let z=0;z<N.length;z++){for(let j=z+1;j<N.length;j++)if(N[z].some(H=>N[j].some(G=>v(F.find(W=>W.id===H),F.find(W=>W.id===G))))){N[z]=Array.from(new Set([...N[z],...N[j]])),N.splice(j,1),M=!0;break}if(M)break}}const L={};for(const z of N){const j=z.map(H=>F.find(G=>G.id===H)).sort((H,G)=>H.startTime.localeCompare(G.startTime)||H.id.localeCompare(G.id));j.forEach((H,G)=>{L[H.id]={groupSize:j.length,colIndex:G}})}return L}function x(F,N){const M=E(b.value)[F.id]||{groupSize:1,colIndex:0},L=g(F.startTime),z=(a(F.endTime)-a(F.startTime))*2.5,j=100/M.groupSize;return{position:"absolute",left:j*M.colIndex+"%",width:j+"%",top:L+"px",height:z+"px",zIndex:1,opacity:.38,boxSizing:"border-box",overflow:"hidden"}}function w(F,N){const M=i.value.filter((te,Z)=>{if(te.id===F.id)return!1;const ye=a(te.start),J=a(te.end),X=a(F.start),Q=a(F.end);return ye<Q&&J>X}),L=M.length+1,j=[F,...M].sort((te,Z)=>te.start.localeCompare(Z.start)||te.id.localeCompare(Z.id)).findIndex(te=>te.id===F.id),H=g(F.start),G=(a(F.end)-a(F.start))*2.5,W=Math.max(G,2.5),ne=73,de=27,se=ne/L;return{position:"absolute",left:de+se*j+"%",width:se+"%",top:H+"px",height:W+"px",zIndex:2,minWidth:"80px",boxSizing:"border-box",padding:"4px",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",cursor:"grab",transition:"top 0.2s, height 0.2s"}}const P=ae(null),R=ae(0),A=ae(0),_=ae(null);function m(F,N){P.value=N,R.value=F.clientY,A.value=a(N.start),_.value="move",N.isDragging=!0,F.target.classList.add("background-dragging-div");const L=document.createElement("div");L.className="drag-preview-div",L.style.width="160px",L.style.height="40px",L.style.background="transparent",L.style.border="2px solid #007bff",L.style.position="absolute",L.style.top="-9999px",L.style.left="-9999px",document.body.appendChild(L),F.dataTransfer.setDragImage(L,80,20),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",N.id)}function S(F,N){if(!P.value||F.clientY===0)return;const M=F.clientY-R.value,L=Math.round(M/2.5);if(_.value==="move"){let z=A.value+L,j=z+(a(N.end)-a(N.start));z=Math.max(u.value,Math.min(z,f.value-1)),j=Math.max(z+1,Math.min(j,f.value)),N.start=o(z),N.end=o(j)}}function I(F,N){P.value=null,_.value=null,N.isDragging=!1,n("update:assignments",i.value)}function k(F,N){P.value=N,R.value=F.clientY,A.value=a(N.end),_.value="resize",window.addEventListener("mousemove",C),window.addEventListener("mouseup",O)}function C(F){if(!P.value)return;const N=F.clientY-R.value;let M=A.value+Math.round(N/2.5);const L=a(P.value.start);M=Math.max(L+1,Math.min(M,f.value)),P.value.end=o(M)}function O(F){P.value=null,_.value=null,window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",O)}function D(F){const N=i.value.findIndex(M=>M.id===F);N!==-1&&(i.value.splice(N,1),n("update:assignments",i.value))}return(F,N)=>(B(),U("div",tle,[d("div",{class:"vertical-time-grid",ref_key:"timeGridRef",ref:s,style:Nr({position:"relative",height:p.value+"px"})},[(B(!0),U(Pe,null,je(b.value,(M,L)=>(B(),U("div",{key:M.id,class:Qe(["grid-block-bg",M.type==="period"?"blocktype-period":"blocktype-"+(M.type||"period")]),style:Nr(x(M))},[d("div",rle,[d("span",{class:"grid-block-label",title:M.name||(M.type==="period"?M.label||M.periodName||M.periodNumber||"Period":M.type?M.type.charAt(0).toUpperCase()+M.type.slice(1):"")},Y(M.name||(M.type==="period"?M.label||M.periodName||M.periodNumber||"Period":M.type?M.type.charAt(0).toUpperCase()+M.type.slice(1):"")),9,nle),d("span",{class:"grid-block-time",title:M.startTime},Y(M.startTime),9,sle)])],6))),128)),(B(!0),U(Pe,null,je(i.value,(M,L)=>(B(),U("div",{key:M.id,class:Qe(["dialog-assignment-box",["type-"+(M.type||"other"),{dragging:M.isDragging}]]),style:Nr(w(M)),draggable:"true",onDragstart:z=>m(z,M),onDrag:z=>S(z,M),onDragend:z=>I(z,M)},[d("div",ile,[d("div",ole,[d("span",lle,Y(M.start)+""+Y(M.end)+" "+Y(M.label),1)])]),d("div",cle,[d("button",{class:"edit-btn",onClick:z=>F.$emit("edit-assignment",M)},"",8,ule),d("button",{class:"delete-btn",onClick:z=>D(M.id)},"",8,dle)]),d("div",{class:"resize-handle",onMousedown:Xr(z=>k(z,M),["stop"]),title:"Drag to resize block"},null,40,fle)],46,ale))),128))],4)]))}},ple=xt(hle,[["__scopeId","data-v-8f5880e4"]]),mle={class:"dialog-header"},gle={class:"dialog-header-actions"},vle={class:"dialog-content"},yle={style:{display:"flex","align-items":"flex-start"}},xle={class:"dialog-actions"},Ele=["disabled"],_le={key:0},ble={key:1},Sle={__name:"AideScheduleEditDialog",props:{aideName:String,timeTicks:Array,isTickInAnyBlock:Function,aideAssignments:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,showAddAssignment:Boolean,addAssignment:Function,onImportAssignments:Function,onSave:Function,onClose:Function,saving:Boolean,blocks:Array,teachers:Array,students:Array},setup(t){const e=t,r=ae([]),n=ae(!1),s=ae(null);Wt(()=>{console.log("DEBUG: AideScheduleEditDialog mounted, blocks:",e.blocks)}),Vt(()=>e.blocks,f=>{console.log("DEBUG: props.blocks in AideScheduleEditDialog",f)});function i(){e.onSave(r.value)}function a(){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],n.value=!0}function o(f){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],s.value={...f},n.value=!0}function l(f){if(s.value){const h=r.value.findIndex(p=>p.id===f.id);h!==-1&&(r.value[h]={...f}),s.value=null}else r.value=[...r.value,f];n.value=!1}function c(){s.value=null,n.value=!1}function u(f){console.log("handleUpdateAssignments called with:",f),r.value=f}return(f,h)=>(B(),U("div",{class:"dialog-overlay",onClick:h[4]||(h[4]=(...p)=>t.onClose&&t.onClose(...p))},[d("div",{class:"edit-dialog",onClick:h[3]||(h[3]=Xr(()=>{},["stop"]))},[d("div",mle,[d("h2",null,"Edit Schedule: "+Y(t.aideName),1),d("div",gle,[d("button",{onClick:h[0]||(h[0]=(...p)=>t.onImportAssignments&&t.onImportAssignments(...p)),class:"btn btn-secondary btn-import-assignments"},"Import Aide Assignments"),d("button",{onClick:a,class:"btn btn-primary btn-add-assignment"},"Add Assignment"),d("button",{onClick:h[1]||(h[1]=(...p)=>t.onClose&&t.onClose(...p)),class:"btn btn-secondary close-btn"},"")])]),d("div",vle,[d("div",yle,[Oe(ple,{timeTicks:t.timeTicks,isTickInAnyBlock:t.isTickInAnyBlock,assignments:r.value,getAssignmentBoxStyle:t.getAssignmentBoxStyle,onAssignmentDragStart:t.onAssignmentDragStart,onAssignmentDrag:t.onAssignmentDrag,onAssignmentDragEnd:t.onAssignmentDragEnd,onResizeStart:t.onResizeStart,blocks:t.blocks,onEditAssignment:o,"onUpdate:assignments":u},null,8,["timeTicks","isTickInAnyBlock","assignments","getAssignmentBoxStyle","onAssignmentDragStart","onAssignmentDrag","onAssignmentDragEnd","onResizeStart","blocks"])]),n.value?(B(),Qt(ele,{key:0,teachers:t.teachers,students:t.students,assignment:s.value,onSave:l,onClose:c},null,8,["teachers","students","assignment"])):xe("",!0)]),d("div",xle,[d("button",{onClick:i,class:"btn btn-primary",disabled:t.saving},[t.saving?(B(),U("span",_le,"")):(B(),U("span",ble,"")),we(" "+Y(t.saving?"Saving...":"Save Schedule"),1)],8,Ele),d("button",{onClick:h[2]||(h[2]=(...p)=>t.onClose&&t.onClose(...p)),class:"btn btn-secondary"},"Cancel")])])]))}},Ale={class:"master-schedule"},Tle={key:0,class:"no-time-table"},wle={class:"no-data-message"},Cle={key:1,class:"schedule-graph-container"},Ile={class:"timeline-header"},kle={class:"block-time"},Dle={class:"block-name"},Ple={class:"block-time"},Rle={class:"aide-header"},Fle={class:"aide-name"},Nle=["onClick"],Ole={class:"time-line-container"},Mle={class:"time-blocks-background"},Lle={class:"assignment-bars"},Ble={class:"assignment-label"},Fg=30,Ule={__name:"AideScheduleMasterTable",props:{paraeducators:Array,blocks:Array,getAideTimeBlocks:Function,getAideName:Function,currentTimeTable:Object},emits:["editAideAssignment","gotoTimeTableConfig"],setup(t,{emit:e}){const r=t,n=ae([]);function s(b){const E=r.getAideTimeBlocks(b).filter(x=>x.assignment).map(x=>({id:x.id,label:x.assignment,type:x.assignmentType,start:x.start||x.displayTime.split(" - ")[0],end:x.end||x.displayTime.split(" - ")[1]}));return i(E)}function i(b){if(b.length===0)return[];const E=[...b].sort((R,A)=>f(R.start)-f(A.start)),x=[];let w=[];for(const R of E)w.length===0?w=[R]:w.some(_=>f(R.start)<f(_.end)&&f(R.end)>f(_.start))?w.push(R):(x.push(w),w=[R]);w.length>0&&x.push(w);const P=[];for(const R of x)R.forEach((A,_)=>{A.overlapIndex=_,A.overlapCount=R.length,P.push(A)});return P}function a(b){if(!b.overlapCount||b.overlapCount<=1)return 10;const E=40;return(60-(b.overlapCount*E+(b.overlapCount-1)*2))/2+b.overlapIndex*(E+2)}function o(b){if(!r.blocks||r.blocks.length===0)return 0;const E=r.blocks[0],x=r.blocks[r.blocks.length-1],w=f(E.startTime),R=f(x.endTime)-w,_=(f(b)-w)/R*100;return Math.max(0,Math.min(95,_))}function l(b,E){if(!r.blocks||r.blocks.length===0)return 10;const x=r.blocks[0],w=r.blocks[r.blocks.length-1],P=f(x.startTime),A=f(w.endTime)-P,_=f(b),S=(f(E)-_)/A*100;return Math.max(5,Math.min(95,S))}function c(b){if(!r.blocks||r.blocks.length===0)return 0;const E=r.blocks[0],x=r.blocks[r.blocks.length-1],w=f(E.startTime),R=f(x.endTime)-w,_=(f(b)-w)/R*100;return Math.max(0,Math.min(95,_))}function u(b,E){if(!r.blocks||r.blocks.length===0)return 10;const x=r.blocks[0],w=r.blocks[r.blocks.length-1],P=f(x.startTime),A=f(w.endTime)-P,_=f(b),S=(f(E)-_)/A*100;return Math.max(5,Math.min(95,S))}function f(b){const[E,x]=b.split(":").map(Number);return E*60+x}function h(b){var x;const E=((x=b.name)==null?void 0:x.toLowerCase())||"";return E.includes("lunch")?"lunch":E.includes("break")||E.includes("recess")?"break":E.includes("period")||E.includes("class")?"period":"other"}function p(b){const E=[...b].sort((P,R)=>f(P.startTime)-f(R.startTime)),x=[];for(const P of E){let R=!1;for(let A=0;A<x.length;A++){const _=x[A];if(!_.some(S=>f(P.startTime)<f(S.endTime)&&f(P.endTime)>f(S.startTime))){_.push(P),P.overlapIndex=A,R=!0;break}}R||(P.overlapIndex=x.length,x.push([P]))}const w=x.length;return E.map(P=>({...P,overlapIndex:P.overlapIndex,overlapCount:w}))}const g=be(()=>p(r.blocks||[])),v=be(()=>Math.max(...g.value.map(b=>b.overlapCount||1),1)),y=be(()=>v.value*Fg);return Vt(()=>r.aideAssignments,b=>{n.value=b?JSON.parse(JSON.stringify(b)):[]},{immediate:!0}),(b,E)=>(B(),U("div",Ale,[E[4]||(E[4]=d("h2",null,"Master Schedule View",-1)),HA(b.$slots,"tab-bar",{},void 0,!0),!t.currentTimeTable||!t.currentTimeTable.schedule||t.currentTimeTable.schedule.length===0?(B(),U("div",Tle,[d("div",wle,[E[1]||(E[1]=d("h3",null,"No Time Table Configured",-1)),E[2]||(E[2]=d("p",null,"You need to configure a time table first before you can create aide assignments.",-1)),d("button",{onClick:E[0]||(E[0]=x=>b.$emit("gotoTimeTableConfig")),class:"btn btn-primary"}," Go to Time Table Configuration ")])])):(B(),U("div",Cle,[d("div",Ile,[E[3]||(E[3]=d("div",{class:"aide-name-header"},"Aide Name",-1)),d("div",{class:"timeline-container",style:Nr({height:y.value+"px"})},[d("div",{class:"time-blocks-header",style:Nr({height:y.value+"px"})},[(B(!0),U(Pe,null,je(g.value,x=>(B(),U("div",{key:x.id+"-"+x.overlapIndex,class:Qe(["time-block-header",h(x)]),style:Nr({left:o(x.startTime)+"%",width:l(x.startTime,x.endTime)+"%",top:x.overlapIndex*Fg+"px",height:Fg+"px",zIndex:10})},[d("div",kle,Y(x.startTime),1),d("div",Dle,Y(x.name||x.type),1),d("div",Ple,Y(x.endTime),1)],6))),128))],4)],4)]),(B(!0),U(Pe,null,je(t.paraeducators,x=>(B(),U("div",{key:x.id,class:"aide-row"},[d("div",Rle,[d("span",Fle,Y(t.getAideName(x.id)),1),d("button",{onClick:w=>b.$emit("editAideAssignment",x.id),class:"btn btn-small btn-primary edit-btn"}," Edit ",8,Nle)]),d("div",Ole,[d("div",Mle,[(B(!0),U(Pe,null,je(t.blocks,w=>(B(),U("div",{key:w.id,class:Qe(["time-block-bg",h(w)]),style:Nr({left:o(w.startTime)+"%",width:l(w.startTime,w.endTime)+"%"})},null,6))),128)),(B(!0),U(Pe,null,je(t.blocks.slice(0,-1),(w,P)=>(B(),U("div",{key:`bg-gap-${w.id}`,class:"time-block-bg-gap",style:Nr({left:o(w.endTime)-.5+"%",width:"1%"})},null,4))),128))]),d("div",Lle,[(B(!0),U(Pe,null,je(s(x.id),w=>(B(),U("div",{key:w.id,class:Qe(["master-assignment-bar",w.type]),style:Nr({left:c(w.start)+"%",width:u(w.start,w.end)+"%",top:a(w)+"px"})},[d("span",Ble,Y(w.label),1)],6))),128))])])]))),128))]))]))}},$le=xt(Ule,[["__scopeId","data-v-40c5158e"]]);function c0(t){return(t==null?void 0:t.schedule)||[]}function Vle(t){let e="23:59",r="00:00";for(const n of t)n.startTime&&n.startTime<e&&(e=n.startTime),n.endTime&&n.endTime>r&&(r=n.endTime);return{min:e,max:r}}function Hle(t){return be(()=>{const{min:e,max:r}=Vle(t.value||t),[n,s]=e.split(":").map(Number),[i,a]=r.split(":").map(Number);let o=[],l=n,c=s;for(;l<i||l===i&&c<=a;){const f=l<10?`0${l}`:`${l}`,h=c<10?`0${c}`:`${c}`;o.push({time:`${f}:${h}`}),c+=5,c>=60&&(c=0,l++)}const u=(t.value||t).map(f=>f.startTime);for(const f of u)o.find(h=>h.time===f)||o.push({time:f});return o=Array.from(new Set(o.map(f=>f.time))).sort().map(f=>({time:f})),o})}function jle(t,e){return e.some(r=>r.startTime<=t&&r.endTime>=t)}const Gle={class:"admin-aide-schedule-detailed"},Wle={class:"header"},zle={class:"header-actions"},Kle=["disabled"],qle={key:0},Xle={key:1},Yle={class:"content"},Qle={key:0,class:"error-message"},Jle={key:1,class:"error-message"},Zle={key:2,class:"loading"},ece={key:3,class:"schedule-container"},tce={key:0,class:"time-table-tab-bar"},rce=["onClick"],hD={__name:"AdminAideSchedule",setup(t){const e=Ci(),r=xn(),{userList:n,fetchUsers:s}=Ea(),{students:i,fetchStudents:a}=Ii(),{appSettings:o,loadAppSettings:l,saveAppSettings:c}=Ns(),{labels:u}=yo(),{aideSchedule:f,loadAideSchedules:h,saveAideSchedule:p}=roe(),{aideAssignment:g}=Jy(),v=ae(!0),y=ae(!1),b=ae(null),E=ae({}),x=ae({}),w=ae(null);ae([]);const P=ae({}),R=be(()=>E.value&&Array.isArray(E.value.timeTables)&&E.value.timeTables.length>0?E.value.timeTables.map((ee,ge)=>({id:ee.name?ee.name.toLowerCase().replace(/\s+/g,"-"):`tt-${ge}`,label:ee.name||`Time Table ${ge+1}`,...ee})):E.value&&E.value.schedule?[{id:"default",label:E.value.label||"Default Schedule",schedule:E.value.schedule}]:[]);Wt(async()=>{console.log("Loaded timeTableData:",E.value),console.log("Computed allTimeTables:",R.value),R.value.length>0&&!w.value&&(w.value=R.value[0].id,console.log("Set selectedTimeTable:",w.value)),await l(),o.value.timeTables&&Array.isArray(o.value.timeTables)?(E.value={timeTables:o.value.timeTables},console.log("Set timeTableData to timeTables array:",E.value)):o.value.schedule&&(E.value={schedule:o.value.schedule},console.log("Set timeTableData to single schedule:",E.value))}),Vt(R,ee=>{console.log("allTimeTables changed:",ee)}),Vt(w,ee=>{console.log("selectedTimeTable changed:",ee)});const A=be(()=>{const ee=R.value.find(ge=>ge.id===w.value)||R.value[0];return console.log("currentTimeTable:",ee),ee}),_=be(()=>c0(A.value)),m=Hle(_);function S(ee){return jle(ee,_.value)}const I=be(()=>{var ge;const ee=(ge=r.currentUser)==null?void 0:ge.role;return["admin","school_admin","admin_504","sped_chair"].includes(ee)}),k=be(()=>{var ee;return((ee=n.value)==null?void 0:ee.filter(ge=>ge.role==="paraeducator"))||[]}),C=be(()=>{var ee;return((ee=n.value)==null?void 0:ee.filter(ge=>ge.role==="teacher"))||[]});be(()=>u.value);function O(ee){if(!_.value)return[];console.log("DEBUG: getAideTimeBlocks called for aide:",ee),console.log("DEBUG: aideSchedule.value:",f.value),console.log("DEBUG: aideAssignment.value:",g.value);const Te=(f.value[ee]||{}).schedule||{};console.log("DEBUG: aideScheduleData:",Te);const Ie=Object.values(Te).filter(Ae=>Ae.start&&Ae.end&&Ae.label).map(Ae=>({id:Ae.id||Ae.blockId||`assignment-${Date.now()}`,assignment:Ae.label,assignmentType:Ae.type||"custom",displayTime:`${Ae.start} - ${Ae.end}`,start:Ae.start,end:Ae.end}));return console.log("DEBUG: individualAssignments:",Ie),Ie.length>0?Ie:(console.log("DEBUG: No individual assignments found, adding test data"),[{id:"test-1",assignment:"Test Class Assignment",assignmentType:"class",displayTime:"08:00 - 09:00",start:"08:00",end:"09:00"},{id:"test-2",assignment:"Test Student Assignment",assignmentType:"student",displayTime:"10:00 - 11:00",start:"10:00",end:"11:00"}])}function D(ee){const ge=k.value.find(Te=>Te.id===ee);return ge?ge.name||ge.email:"Unknown Aide"}function F(ee){b.value=ee,te.value=!0}function N(){b.value=null}async function M(){try{y.value=!0;const ge={...await l(),detailedAideSchedule:x.value};await c(ge),console.log("Detailed aide schedule saved successfully")}catch(ee){console.error("Error saving detailed aide schedule:",ee)}finally{y.value=!1}}function L(){e.push("/admin")}async function z(){try{v.value=!0,await Promise.all([s(),a(),l()]);const ee=await sr(Ze(qe,"app_settings","global"));if(ee.exists()){const ge=ee.data();x.value=ge.detailedAideSchedule||{}}v.value=!1}catch(ee){console.error("Error loading aide schedule data:",ee),v.value=!1}}Wt(z);function j(ee,ge){return ee.assignments&&ee.assignments[ge]||""}function H(){var Ae,We;if(console.log("DEBUG: handleImportAssignments called"),console.log("DEBUG: editingAideId.value:",b.value),console.log("DEBUG: aideAssignment.value:",g.value),console.log("DEBUG: All aide IDs:",Object.keys(g.value)),console.log("DEBUG: All aide data:",Object.entries(g.value).map(([De,He])=>({id:De,keys:Object.keys(He)}))),!b.value||!g.value[b.value]){console.log("DEBUG: No aide data found"),alert("No aide assignment data found for this aide.");return}const ee=Q.value.length;if(ee>0&&!confirm(`WARNING: This will remove ${ee} current assignments and replace them with imported assignments.

Do you want to continue?`))return;const ge=g.value[b.value];console.log("DEBUG: aideData:",ge),console.log("DEBUG: aideData.classAssignment:",ge.classAssignment),console.log("DEBUG: aideData.directAssignment:",ge.directAssignment),console.log("DEBUG: Object.keys(aideData):",Object.keys(ge)),console.log("DEBUG: aideData.schedule:",ge.schedule),console.log("DEBUG: typeof aideData.schedule:",typeof ge.schedule),console.log("DEBUG: Array.isArray(aideData.schedule):",Array.isArray(ge.schedule));let Te=0;Q.value=[];const Ie=c0(A.value);console.log("DEBUG: timeTableBlocks:",Ie),console.log("DEBUG: timeTableBlocks with period numbers:",Ie.map(De=>({name:De.name,periodNumber:De.periodNumber,type:De.type})));for(const De of Ie){console.log("DEBUG: Processing block:",De),console.log("DEBUG: Block periodNumber:",De.periodNumber),console.log("DEBUG: Block name:",De.name),console.log("DEBUG: Available classAssignment keys:",Object.keys(ge.classAssignment||{}));let He=De.periodNumber;if(!He&&De.name){const Ke=De.name.match(/Period\s*(\d+)/i);Ke&&(He=Ke[1],console.log("DEBUG: Extracted periodNumber from name:",He))}let $e="",ke=[];if(He&&ge.classAssignment&&ge.classAssignment[He]){console.log("DEBUG: Found class assignment for periodNumber:",He);const Ke=Array.isArray(ge.classAssignment[He])?ge.classAssignment[He]:[ge.classAssignment[He]];ke=Ke.filter(Boolean).map(_e=>{const Ee=C.value.find(Se=>Se.id===_e);return Ee?Ee.name||Ee.email:"Unknown Teacher"}),$e=Ke.filter(Boolean).map(_e=>`teacher:${_e}`).join(","),console.log("DEBUG: Created assignment for periodNumber:",$e)}if(!$e&&De.name&&ge.classAssignment){console.log("DEBUG: Trying to match by block name:",De.name);const Ke=Object.keys(ge.classAssignment).find(_e=>_e.toLowerCase().trim()===De.name.toLowerCase().trim());if(Ke){console.log("DEBUG: Found match by block name:",Ke);const _e=Array.isArray(ge.classAssignment[Ke])?ge.classAssignment[Ke]:[ge.classAssignment[Ke]];ke=_e.filter(Boolean).map(Ee=>{const Se=C.value.find(Me=>Me.id===Ee);return Se?Se.name||Se.email:"Unknown Teacher"}),$e=_e.filter(Boolean).map(Ee=>`teacher:${Ee}`).join(","),console.log("DEBUG: Created assignment for block name:",$e)}}if($e){const Ke=De.startTime,_e=G(De.startTime,30),Ee=$e.split(",").map(Me=>Me.replace("teacher:","")).filter(Boolean),Se={id:`imported-class-${Date.now()}-${Te}`,label:ke.join(", "),start:Ke,end:_e,type:"class",blockId:`imported-block-${Te}`,teacherId:Ee[0]||"",note:Ee.length>1?`Multiple teachers: ${ke.join(", ")}`:""};console.log("DEBUG: Adding new assignment:",Se),Q.value.push(Se),Te++}}if(console.log("DEBUG: Checking direct assignments..."),console.log("DEBUG: aideData.directAssignment:",ge.directAssignment),console.log("DEBUG: typeof aideData.directAssignment:",typeof ge.directAssignment),console.log("DEBUG: Array.isArray(aideData.directAssignment):",Array.isArray(ge.directAssignment)),ge.directAssignment){console.log("DEBUG: Found directAssignment:",ge.directAssignment);const De=Array.isArray(ge.directAssignment)?ge.directAssignment:[ge.directAssignment];console.log("DEBUG: directStudentIds:",De),console.log("DEBUG: students.value length:",(Ae=i.value)==null?void 0:Ae.length),console.log("DEBUG: students.value sample:",(We=i.value)==null?void 0:We.slice(0,3));for(const He of De)if(console.log("DEBUG: Processing studentId:",He),He&&He!==""){const $e=i.value.find(ke=>ke.id===He);if(console.log("DEBUG: Found student:",$e),$e){const ke=`${it($e,"firstName")} ${it($e,"lastName")}`;console.log("DEBUG: Student name:",ke);const Ke=c0(A.value).find(_e=>_e.type==="period");if(console.log("DEBUG: First period block:",Ke),Ke){const _e=Ke.startTime,Ee=G(Ke.startTime,30),Se={id:`imported-direct-${Date.now()}-${Te}`,label:ke,start:_e,end:Ee,type:"student",blockId:`imported-direct-block-${Te}`,studentId:He};console.log("DEBUG: Adding direct assignment:",Se),Q.value.push(Se),Te++}}}}else console.log("DEBUG: No directAssignment found");if(console.log("DEBUG: Final importedCount:",Te),console.log("DEBUG: Final localAideAssignments:",Q.value),Te>0){alert(`Successfully imported ${Te} assignments with 30-minute time spans.

Types: Class assignments set to 'class', Direct assignments set to 'student'
Labels: Teacher names for class assignments, Student names for direct assignments
Duration: 30 minutes each`);const De=b.value,He=f.value[De]||{},$e={};Q.value.forEach(Ke=>{const _e=Ke.blockId||Ke.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;$e[_e]={id:Ke.id,blockId:_e,type:Ke.type,label:Ke.label,start:Ke.start,end:Ke.end,note:Ke.note,teacherId:Ke.teacherId,studentId:Ke.studentId}});const ke={...He,schedule:$e};p(De,ke).then(()=>{h().then(()=>{N(),ul(()=>{F(De)})})})}else alert("No matching assignments found in the Aide Assignment data for this schedule.")}function G(ee,ge){const[Te,Ie]=ee.split(":").map(Number),Ae=Te*60+Ie+ge,We=Math.floor(Ae/60),De=Ae%60;return`${We.toString().padStart(2,"0")}:${De.toString().padStart(2,"0")}`}Vt(()=>c0(A.value),ee=>{const ge={};for(const Te of ee){const Ie=j(Te,b.value);ge[Te.id]=Ie?[{id:Ie,value:Ie}]:[]}P.value=ge},{immediate:!0});function W(ee,ge){Z.value=ge,ye.value=ee.clientY,J.value=m.value.findIndex(Te=>Te.time===ge.start),X.value=0,ee.dataTransfer.effectAllowed="move",ee.dataTransfer.setData("text/plain",ge.id)}function ne(ee,ge){if(!Z.value||ee.clientY===0)return;const Te=ee.clientY-ye.value;X.value=Te,ge._dragOffset=Te}function de(ee,ge){if(!Z.value)return;const Te=24,Ie=m.value.length;let Ae=J.value+Math.round(X.value/Te);Ae=Math.max(0,Math.min(Ie-2,Ae));const We=m.value[Ae].time,De=m.value.findIndex(ke=>ke.time===ge.end)-J.value;let He=Ae+De;He=Math.max(Ae+1,Math.min(Ie-1,He));const $e=m.value[He].time;ge.start=We,ge.end=$e,ge._dragOffset=0,Z.value=null,X.value=0}function se(ee){const ge=m.value.findIndex($e=>$e.time===ee.start),Te=m.value.findIndex($e=>$e.time===ee.end),Ie=24;if(ge===-1||Te===-1)return{display:"none"};const Ae=ge*Ie+(ee._dragOffset||0),We=Math.max((Te-ge)*Ie,Ie);let De,He;return ee.type==="class"?(De="#e8f4fd",He="#4a90e2"):ee.type==="student"?(De="#f0f8e8",He="#7cb342"):(De="#f5f5f5",He="#9e9e9e"),{position:"absolute",left:"20px",top:`${Ae}px`,height:`${We}px`,width:"200px",minHeight:"24px",background:De,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"#333",border:`2px solid ${He}`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"grab",zIndex:2,transition:Z.value===ee?"none":"top 0.2s"}}function ce(){const ee=_.value&&_.value.length>0?_.value[0].startTime:"08:00",ge=_.value&&_.value.length>0?_.value[0].endTime:"08:30";Q.value.push({id:`custom:${Date.now()}`,label:"",start:ee,end:ge,blockId:`block-${Date.now()}`})}const te=ae(!1);ae(null);const Z=ae(null),ye=ae(0),J=ae(0),X=ae(0),Q=ae([]);Vt(b,ee=>{if(!ee){Q.value=[];return}const Te=(f.value[ee]||{}).schedule||{};Q.value=Object.entries(Te).map(([Ie,Ae])=>({id:Ie+"-"+(ee||""),label:Ae.label||"",start:Ae.start,end:Ae.end,blockId:Ie,type:Ae.type||"lunch",teacherId:Ae.teacherId||"",studentId:Ae.studentId||"",note:Ae.note||""}))},{immediate:!0});async function fe(ee){if(b.value)try{y.value=!0;const ge=f.value[b.value]||{},Te={};ee.forEach(Ae=>{const We=Ae.blockId||Ae.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;Te[We]={id:Ae.id,blockId:We,type:Ae.type,label:Ae.label,start:Ae.start,end:Ae.end,note:Ae.note,teacherId:Ae.teacherId,studentId:Ae.studentId}});const Ie={...ge,schedule:Te};await p(b.value,Ie),await h(),N(),alert("Schedule saved!")}catch(ge){alert("Failed to save schedule: "+ge.message)}finally{y.value=!1}}Vt(()=>_,ee=>{console.log("DEBUG: blocks",ee)},{immediate:!0}),Vt(b,ee=>{ee&&(console.log("DEBUG: Opening edit dialog for aide",ee),console.log("DEBUG: blocks passed to dialog",_.value))});function ve(ee,ge){console.log("Resize start:",ge)}function ie(){ce()}return(ee,ge)=>(B(),U("div",Gle,[d("div",Wle,[ge[4]||(ge[4]=d("h1",null,"Aide Schedule Management",-1)),d("div",zle,[d("button",{onClick:M,class:"btn btn-primary",disabled:y.value},[y.value?(B(),U("span",qle,"")):(B(),U("span",Xle,"")),we(" "+Y(y.value?"Saving...":"Save Schedule"),1)],8,Kle),d("button",{onClick:L,class:"btn btn-secondary"},ge[3]||(ge[3]=[d("span",null,"",-1),we(" Back ")]))])]),d("div",Yle,[q(r).currentUser?I.value?v.value?(B(),U("div",Zle," Loading aide schedules... ")):(B(),U("div",ece,[Oe($le,{paraeducators:k.value,blocks:_.value,getAideTimeBlocks:O,getAideName:D,currentTimeTable:A.value,onEditAideAssignment:F,onGotoTimeTableConfig:ge[2]||(ge[2]=()=>q(e).push("/admin?tab=time-table"))},{"tab-bar":Xh(()=>[R.value.length>1?(B(),U("div",tce,[(B(!0),U(Pe,null,je(R.value,Te=>(B(),U("div",{key:Te.id,class:Qe(["tab-btn",{active:w.value===Te.id}]),onClick:Ie=>w.value=Te.id},Y(Te.label),11,rce))),128))])):xe("",!0)]),_:1},8,["paraeducators","blocks","currentTimeTable"]),b.value?(B(),Qt(Sle,{key:0,aideName:D(b.value),timeTicks:q(m),isTickInAnyBlock:S,aideAssignments:Q.value,getAssignmentBoxStyle:se,onAssignmentDragStart:W,onAssignmentDrag:ne,onAssignmentDragEnd:de,onResizeStart:ve,showAddAssignment:te.value,addAssignment:ie,onImportAssignments:H,onSave:fe,onClose:N,saving:y.value,blocks:_.value,teachers:C.value,students:q(i)},null,8,["aideName","timeTicks","aideAssignments","showAddAssignment","saving","blocks","teachers","students"])):xe("",!0)])):(B(),U("div",Jle,[ge[7]||(ge[7]=d("h2",null,"Access Denied",-1)),ge[8]||(ge[8]=d("p",null,"You do not have permission to access this page.",-1)),d("button",{onClick:ge[1]||(ge[1]=Te=>q(e).push("/")),class:"btn btn-primary"},"Go Home")])):(B(),U("div",Qle,[ge[5]||(ge[5]=d("h2",null,"Authentication Required",-1)),ge[6]||(ge[6]=d("p",null,"Please log in to access this page.",-1)),d("button",{onClick:ge[0]||(ge[0]=Te=>q(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},nce={name:"AdminBackupRestore",setup(){const t=ae([{id:"users",name:"Users"},{id:"students",name:"Students"},{id:"app_settings",name:"App Settings"},{id:"aideSchedules",name:"Aide Schedules"},{id:"aideAssignments",name:"Aide Assignments"},{id:"feedbackForms",name:"Teacher Feedback Forms"},{id:"config",name:"Configuration"},{id:"backups",name:"Backups Metadata"}]),e=ae(["users","students","app_settings"]),r=ae(""),n=ae(!1),s=ae(!1),i=ae(null),a=ae(null),o=ae([]),l=ae(""),c=ae("info"),u=Fs({overwrite:!1,validate:!0}),f=ae(null),h=async()=>{var P,R,A;try{console.log(" DEBUG: Current user role:",(P=currentUser.value)==null?void 0:P.role),console.log(" DEBUG: Current user:",currentUser.value);const _=At(qe,"backups"),m=or(_,hn("createdAt","desc"),ia(20)),S=await Gt(m);o.value=S.docs.map(I=>({id:I.id,...I.data()})),console.log(" DEBUG: Successfully loaded",o.value.length,"backups")}catch(_){console.error(" DEBUG: Error loading backups:",_),console.error(" DEBUG: Error details:",{code:_.code,message:_.message,userRole:(R=currentUser.value)==null?void 0:R.role,userId:(A=currentUser.value)==null?void 0:A.uid}),w("Error loading backups","error")}},p=async()=>{if(e.value.length===0){w("Please select at least one collection","error");return}n.value=!0,w("Creating backup...","info");try{const P={metadata:{version:"1.0",createdAt:new Date().toISOString(),createdBy:"admin",description:r.value||"Manual backup"},collections:{}};for(const _ of e.value)if(_==="app_settings"){const m=Ze(qe,"app_settings","global"),S=await sr(m);P.collections[_]=S.exists()?S.data():{}}else{const m=At(qe,_),S=await Gt(m);P.collections[_]=S.docs.map(I=>({id:I.id,...I.data()}))}const R=`backup_${Date.now()}`,A=Ze(qe,"backups",R);await jt(A,{name:r.value||`Backup ${new Date().toLocaleDateString()}`,createdAt:new Date().toISOString(),collections:e.value,size:JSON.stringify(P).length,data:P}),r.value="",await h(),w("Backup created successfully!","success")}catch(P){console.error("Error creating backup:",P),w("Error creating backup: "+P.message,"error")}finally{n.value=!1}},g=P=>{const R=P.target.files[0];if(!R)return;i.value=R,a.value=null;const A=new FileReader;A.onload=_=>{try{const m=JSON.parse(_.target.result);m.metadata&&m.collections?(a.value=m,w("Backup file loaded successfully","success")):w("Invalid backup file format","error")}catch{w("Error parsing JSON file","error")}},A.readAsText(R)},v=async()=>{if(!i.value||!a.value){w("Please select a valid backup file","error");return}if(u.overwrite){if(!confirm("This will overwrite existing data. This action cannot be undone. Continue?"))return}else if(!confirm("This will add new data without overwriting existing records. Continue?"))return;s.value=!0,w("Restoring backup...","info");try{for(const[P,R]of Object.entries(a.value.collections))if(P==="app_settings"||P==="appSettings"){const A=Ze(qe,"app_settings","global");await jt(A,R,{merge:!u.overwrite})}else{const A=At(qe,P);if(Array.isArray(R))for(const _ of R){const m=Ze(A,_.id);u.overwrite?await jt(m,_):await jt(m,_,{merge:!0})}}w("Backup restored successfully!","success"),i.value=null,a.value=null,f.value&&(f.value.value="")}catch(P){console.error("Error restoring backup:",P),w("Error restoring backup: "+P.message,"error")}finally{s.value=!1}},y=P=>{const R=JSON.stringify(P.data,null,2),A=new Blob([R],{type:"application/json"}),_=URL.createObjectURL(A),m=document.createElement("a");m.href=_,m.download=`${P.name||"backup"}.json`,m.target="_blank",m.rel="noopener noreferrer",document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(_)},b=async P=>{if(confirm("Are you sure you want to delete this backup?"))try{await ho(Ze(qe,"backups",P)),await h(),w("Backup deleted successfully","success")}catch(A){console.error("Error deleting backup:",A),w("Error deleting backup","error")}},E=P=>{if(P===0)return"0 Bytes";const R=1024,A=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(P)/Math.log(R));return parseFloat((P/Math.pow(R,_)).toFixed(2))+" "+A[_]},x=P=>new Date(P).toLocaleString(),w=(P,R="info")=>{l.value=P,c.value=R,setTimeout(()=>{l.value=""},5e3)};return Wt(()=>{h()}),{collections:t,selectedCollections:e,backupName:r,isBackingUp:n,isRestoring:s,selectedFile:i,backupData:a,backups:o,statusMessage:l,statusType:c,restoreOptions:u,fileInput:f,createBackup:p,handleFileSelect:g,restoreBackup:v,downloadBackup:y,deleteBackup:b,formatFileSize:E,formatDate:x}}},sce={class:"admin-backup-restore"},ace={class:"content"},ice={class:"section"},oce={class:"backup-options"},lce={class:"option-group"},cce={class:"checkbox-group"},uce=["value","disabled"],dce={class:"option-group"},fce=["disabled"],hce=["disabled"],pce={key:0},mce={key:1},gce={class:"section"},vce={class:"restore-options"},yce={class:"file-upload"},xce=["disabled"],Ece={key:0,class:"file-info"},_ce={key:0,class:"option-group"},bce={class:"backup-info"},Sce={class:"collection-name"},Ace={class:"collection-count"},Tce={key:1,class:"option-group"},wce={class:"checkbox-group"},Cce={class:"checkbox"},Ice=["disabled"],kce={class:"checkbox"},Dce=["disabled"],Pce=["disabled"],Rce={key:0},Fce={key:1},Nce={class:"section"},Oce={key:0,class:"backup-list"},Mce={class:"backup-info"},Lce={class:"admin-action-btns"},Bce=["onClick"],Uce=["onClick"],$ce={key:1,class:"no-backups"};function Vce(t,e,r,n,s,i){return B(),U("div",sce,[e[17]||(e[17]=d("h1",null," Admin Tools",-1)),e[18]||(e[18]=d("div",{class:"header"},[d("h1",null,"Backup & Restore"),d("p",null,"Manage database backups and restore data from JSON files")],-1)),d("div",ace,[d("div",ice,[e[9]||(e[9]=d("h2",null,"Create Backup",-1)),d("div",oce,[d("div",lce,[e[7]||(e[7]=d("label",null,"Collections to backup:",-1)),d("div",cce,[(B(!0),U(Pe,null,je(n.collections,a=>(B(),U("label",{key:a.id,class:"checkbox"},[Be(d("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>n.selectedCollections=o),value:a.id,disabled:n.isBackingUp},null,8,uce),[[Et,n.selectedCollections]]),we(" "+Y(a.name),1)]))),128))])]),d("div",dce,[e[8]||(e[8]=d("label",null,"Backup name (optional):",-1)),Be(d("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.backupName=a),placeholder:"e.g., backup-2024-01-15",disabled:n.isBackingUp},null,8,fce),[[gt,n.backupName]])]),d("button",{onClick:e[2]||(e[2]=(...a)=>n.createBackup&&n.createBackup(...a)),disabled:n.isBackingUp||n.selectedCollections.length===0,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},[n.isBackingUp?(B(),U("span",pce,"Creating Backup...")):(B(),U("span",mce,"Create Backup"))],8,hce)])]),d("div",gce,[e[15]||(e[15]=d("h2",null,"Restore from Backup",-1)),d("div",vce,[d("div",yce,[e[10]||(e[10]=d("label",null,"Select JSON backup file:",-1)),d("input",{type:"file",onChange:e[3]||(e[3]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a)),accept:".json",disabled:n.isRestoring,ref:"fileInput"},null,40,xce),n.selectedFile?(B(),U("p",Ece," Selected: "+Y(n.selectedFile.name)+" ("+Y(n.formatFileSize(n.selectedFile.size))+") ",1)):xe("",!0)]),n.backupData?(B(),U("div",_ce,[e[11]||(e[11]=d("label",null,"Collections in backup:",-1)),d("div",bce,[(B(!0),U(Pe,null,je(n.backupData.collections,(a,o)=>(B(),U("div",{key:o,class:"collection-info"},[d("span",Sce,Y(o)+":",1),d("span",Ace,Y(Array.isArray(a)?a.length:"1")+" items",1)]))),128))])])):xe("",!0),n.backupData?(B(),U("div",Tce,[e[14]||(e[14]=d("label",null,"Restore options:",-1)),d("div",wce,[d("label",Cce,[Be(d("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>n.restoreOptions.overwrite=a),disabled:n.isRestoring},null,8,Ice),[[Et,n.restoreOptions.overwrite]]),e[12]||(e[12]=we(" Overwrite existing data "))]),d("label",kce,[Be(d("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=a=>n.restoreOptions.validate=a),disabled:n.isRestoring},null,8,Dce),[[Et,n.restoreOptions.validate]]),e[13]||(e[13]=we(" Validate data before restore "))])])])):xe("",!0),d("button",{onClick:e[6]||(e[6]=(...a)=>n.restoreBackup&&n.restoreBackup(...a)),disabled:n.isRestoring||!n.selectedFile||!n.backupData,class:"admin-action-btn warning",style:{"min-width":"140px","max-width":"140px"}},[n.isRestoring?(B(),U("span",Rce,"Restoring...")):(B(),U("span",Fce,"Restore Backup"))],8,Pce)])]),d("div",Nce,[e[16]||(e[16]=d("h2",null,"Backup History",-1)),n.backups.length>0?(B(),U("div",Oce,[(B(!0),U(Pe,null,je(n.backups,a=>(B(),U("div",{key:a.id,class:"backup-item"},[d("div",Mce,[d("h3",null,Y(a.name||"Unnamed Backup"),1),d("p",null,"Created: "+Y(n.formatDate(a.createdAt)),1),d("p",null,"Size: "+Y(n.formatFileSize(a.size)),1),d("p",null,"Collections: "+Y(a.collections.join(", ")),1)]),d("div",Lce,[d("button",{onClick:o=>n.downloadBackup(a),class:"admin-action-btn secondary"},"Download",8,Bce),d("button",{onClick:o=>n.deleteBackup(a.id),class:"admin-action-btn delete"},"Delete",8,Uce)])]))),128))])):(B(),U("p",$ce,"No backups found"))])]),n.statusMessage?(B(),U("div",{key:0,class:Qe(["status-message",n.statusType])},Y(n.statusMessage),3)):xe("",!0)])}const pD=xt(nce,[["render",Vce],["__scopeId","data-v-bc031c32"]]),Hce={class:"admin-audit-logs"},jce={class:"log-controls"},Gce={class:"log-filters"},Wce=["disabled"],zce=["disabled"],Kce={class:"logs-container"},qce={key:0,class:"loading-state"},Xce={key:1,class:"logs-table"},Yce={class:"timestamp"},Qce={class:"log-type"},Jce={class:"user-info"},Zce={class:"user-email"},eue={class:"user-id"},tue={class:"action"},rue={class:"details"},nue={class:"details-preview"},sue={class:"actions"},aue=["onClick"],iue={key:2,class:"no-logs"},oue={key:1,class:"pagination"},lue=["disabled"],cue={class:"page-info"},uue=["disabled"],due={class:"dialog-content"},fue={class:"log-detail-section"},hue={class:"detail-grid"},pue={class:"detail-item"},mue={class:"detail-item"},gue={class:"detail-item"},vue={class:"detail-item"},yue={class:"detail-item"},xue={class:"detail-item"},Eue={class:"detail-item"},_ue={key:0,class:"log-detail-section"},bue={class:"detail-grid"},Sue={key:0,class:"detail-item"},Aue={key:1,class:"detail-item"},Tue={key:2,class:"detail-item"},wue={key:1,class:"log-detail-section"},Cue={class:"details-content"},Iue={key:2,class:"log-detail-section"},kue={class:"detail-grid"},Due={key:0,class:"detail-item"},Pue={key:1,class:"detail-item"},u0=25,Rue={__name:"AdminAuditLogs",setup(t){const e=vo(),r=ae([]),n=ae(!1),s=ae(""),i=ae(!1),a=ae(null),o=ae("7"),l=ae(""),c=ae(""),u=ae(""),f=ae(1),h=be(()=>{let I=r.value;if(l.value&&(I=I.filter(k=>k.type===l.value)),c.value&&(I=I.filter(k=>k.action===c.value)),u.value){const k=u.value.toLowerCase();I=I.filter(C=>C.userEmail&&C.userEmail.toLowerCase().includes(k)||C.action&&C.action.toLowerCase().includes(k)||C.details&&JSON.stringify(C.details).toLowerCase().includes(k)||C.studentId&&C.studentId.toLowerCase().includes(k))}return I}),p=be(()=>{const I=(f.value-1)*u0,k=I+u0;return h.value.slice(I,k)}),g=be(()=>Math.ceil(h.value.length/u0)),v=async()=>{n.value=!0,s.value="";try{const I=new Date;I.setDate(I.getDate()-parseInt(o.value));const k=or(At(e,"auditLogs"),Ur("timestamp",">=",I),hn("timestamp","desc"),ia(500)),C=await Gt(k);r.value=C.docs.map(O=>({id:O.id,...O.data()})),f.value=1,_(`Loaded ${r.value.length} audit logs`,!1)}catch(I){console.error("Error loading audit logs:",I),_("Error loading audit logs: "+I.message,!0)}finally{n.value=!1}},y=async()=>{try{const I=b(h.value),k=new Blob([I],{type:"text/csv"}),C=window.URL.createObjectURL(k),O=document.createElement("a");O.href=C,O.download=`audit-logs-${new Date().toISOString().split("T")[0]}.csv`,O.click(),window.URL.revokeObjectURL(C),_("Audit logs exported successfully",!1)}catch(I){console.error("Error exporting logs:",I),_("Error exporting logs: "+I.message,!0)}},b=I=>{const C=[["Timestamp","Type","User Email","User ID","Action","Details","Student ID","Session ID","IP Address"].join(",")];return I.forEach(O=>{const D=[w(O.timestamp),O.type||"",O.userEmail||O.performedByEmail||"",O.userId||O.performedBy||"",O.action||"",JSON.stringify(O.details||"").replace(/"/g,'""'),O.studentId||O.targetUserId||"",O.sessionId||"",O.ipAddress||""];C.push(D.map(F=>`"${F}"`).join(","))}),C.join(`
`)},E=I=>{a.value=I},x=()=>{a.value=null},w=I=>{if(!I)return"N/A";let k;return I.toDate?k=I.toDate():I instanceof Date?k=I:k=new Date(I),k.toLocaleString()},P=I=>({student_access:"Student Access",user_management:"User Management",system_access:"System Access",data_export:"Data Export",session_timeout:"Session Timeout"})[I]||I,R=I=>{if(I.details){const C=typeof I.details=="string"?I.details:JSON.stringify(I.details);return C.length>50?C.substring(0,50)+"...":C}const k=[];return I.studentId&&k.push(`Student: ${I.studentId}`),I.targetUserId&&k.push(`Target: ${I.targetUserId}`),I.exportType&&k.push(`Export: ${I.exportType}`),I.studentCount&&k.push(`Count: ${I.studentCount}`),k.join(", ")||"No additional details"},A=I=>{if(!I)return"No details available";if(typeof I=="string")try{const k=JSON.parse(I);return JSON.stringify(k,null,2)}catch{return I}return JSON.stringify(I,null,2)},_=(I,k=!1)=>{s.value=I,i.value=k,setTimeout(()=>{s.value="",i.value=!1},5e3)};let m=null;const S=()=>{m&&clearTimeout(m),m=setTimeout(()=>{f.value=1},300)};return Wt(()=>{v()}),(I,k)=>(B(),U("div",Hce,[k[29]||(k[29]=d("div",{class:"logs-header"},[d("h2",null," System Audit Logs"),d("p",{class:"logs-description"}," View and search system audit logs for security monitoring and compliance. ")],-1)),d("div",jce,[d("div",Gce,[Be(d("select",{"onUpdate:modelValue":k[0]||(k[0]=C=>o.value=C),onChange:v,class:"form-select"},k[7]||(k[7]=[d("option",{value:"1"},"Last 24 hours",-1),d("option",{value:"7"},"Last 7 days",-1),d("option",{value:"30"},"Last 30 days",-1),d("option",{value:"90"},"Last 90 days",-1)]),544),[[cr,o.value]]),Be(d("select",{"onUpdate:modelValue":k[1]||(k[1]=C=>l.value=C),onChange:v,class:"form-select"},k[8]||(k[8]=[Dn('<option value="" data-v-aacc574e>All Log Types</option><option value="student_access" data-v-aacc574e>Student Access</option><option value="user_management" data-v-aacc574e>User Management</option><option value="system_access" data-v-aacc574e>System Access</option><option value="data_export" data-v-aacc574e>Data Export</option><option value="session_timeout" data-v-aacc574e>Session Timeout</option>',6)]),544),[[cr,l.value]]),Be(d("select",{"onUpdate:modelValue":k[2]||(k[2]=C=>c.value=C),onChange:v,class:"form-select"},k[9]||(k[9]=[Dn('<option value="" data-v-aacc574e>All Actions</option><option value="login" data-v-aacc574e>Login</option><option value="logout" data-v-aacc574e>Logout</option><option value="create" data-v-aacc574e>Create</option><option value="edit" data-v-aacc574e>Edit</option><option value="delete" data-v-aacc574e>Delete</option><option value="view" data-v-aacc574e>View</option><option value="admin_panel_access" data-v-aacc574e>Admin Access</option>',8)]),544),[[cr,c.value]]),Be(d("input",{"onUpdate:modelValue":k[3]||(k[3]=C=>u.value=C),onInput:S,type:"text",placeholder:"Search logs...",class:"form-input"},null,544),[[gt,u.value]]),d("button",{onClick:v,class:"btn btn-secondary",disabled:n.value},"  "+Y(n.value?"Loading...":"Refresh"),9,Wce),d("button",{onClick:y,class:"btn btn-primary",disabled:n.value},"  Export Logs ",8,zce)])]),s.value?(B(),U("div",{key:0,class:Qe(["status-message",{error:i.value}])},Y(s.value),3)):xe("",!0),d("div",Kce,[n.value?(B(),U("div",qce," Loading audit logs... ")):h.value.length>0?(B(),U("table",Xce,[k[10]||(k[10]=d("thead",null,[d("tr",null,[d("th",null,"Timestamp"),d("th",null,"Type"),d("th",null,"User"),d("th",null,"Action"),d("th",null,"Details"),d("th",null,"Actions")])],-1)),d("tbody",null,[(B(!0),U(Pe,null,je(p.value,C=>(B(),U("tr",{key:C.id,class:"log-row"},[d("td",Yce,Y(w(C.timestamp)),1),d("td",Qce,[d("span",{class:Qe(["type-badge",C.type])},Y(P(C.type)),3)]),d("td",Jce,[d("div",Zce,Y(C.userEmail||"Unknown"),1),d("div",eue,Y(C.userId||C.performedBy||"N/A"),1)]),d("td",tue,Y(C.action||"N/A"),1),d("td",rue,[d("div",nue,Y(R(C)),1)]),d("td",sue,[d("button",{onClick:O=>E(C),class:"btn btn-sm btn-info",title:"View Details"},"  View ",8,aue)])]))),128))])])):(B(),U("div",iue,k[11]||(k[11]=[d("p",null,"No audit logs found for the selected criteria.",-1)])))]),h.value.length>u0?(B(),U("div",oue,[d("button",{onClick:k[4]||(k[4]=C=>f.value--),disabled:f.value===1,class:"btn btn-secondary"}," Previous ",8,lue),d("span",cue," Page "+Y(f.value)+" of "+Y(g.value)+" ("+Y(h.value.length)+" logs) ",1),d("button",{onClick:k[5]||(k[5]=C=>f.value++),disabled:f.value===g.value,class:"btn btn-secondary"}," Next ",8,uue)])):xe("",!0),a.value?(B(),U("div",{key:2,class:"log-dialog-overlay",onClick:x},[d("div",{class:"log-dialog",onClick:k[6]||(k[6]=Xr(()=>{},["stop"]))},[d("div",{class:"dialog-header"},[k[12]||(k[12]=d("h3",null," Audit Log Details",-1)),d("button",{onClick:x,class:"close-btn"},"")]),d("div",due,[d("div",fue,[k[20]||(k[20]=d("h4",null,"Basic Information",-1)),d("div",hue,[d("div",pue,[k[13]||(k[13]=d("label",null,"Timestamp:",-1)),d("span",null,Y(w(a.value.timestamp)),1)]),d("div",mue,[k[14]||(k[14]=d("label",null,"Log Type:",-1)),d("span",{class:Qe(["type-badge",a.value.type])},Y(P(a.value.type)),3)]),d("div",gue,[k[15]||(k[15]=d("label",null,"Action:",-1)),d("span",null,Y(a.value.action||"N/A"),1)]),d("div",vue,[k[16]||(k[16]=d("label",null,"User Email:",-1)),d("span",null,Y(a.value.userEmail||a.value.performedByEmail||"Unknown"),1)]),d("div",yue,[k[17]||(k[17]=d("label",null,"User ID:",-1)),d("span",null,Y(a.value.userId||a.value.performedBy||"N/A"),1)]),d("div",xue,[k[18]||(k[18]=d("label",null,"Session ID:",-1)),d("span",null,Y(a.value.sessionId||"N/A"),1)]),d("div",Eue,[k[19]||(k[19]=d("label",null,"IP Address:",-1)),d("span",null,Y(a.value.ipAddress||"N/A"),1)])])]),a.value.studentId||a.value.targetUserId?(B(),U("div",_ue,[k[24]||(k[24]=d("h4",null,"Target Information",-1)),d("div",bue,[a.value.studentId?(B(),U("div",Sue,[k[21]||(k[21]=d("label",null,"Student ID:",-1)),d("span",null,Y(a.value.studentId),1)])):xe("",!0),a.value.targetUserId?(B(),U("div",Aue,[k[22]||(k[22]=d("label",null,"Target User ID:",-1)),d("span",null,Y(a.value.targetUserId),1)])):xe("",!0),a.value.studentIds?(B(),U("div",Tue,[k[23]||(k[23]=d("label",null,"Student IDs:",-1)),d("span",null,Y(Array.isArray(a.value.studentIds)?a.value.studentIds.join(", "):a.value.studentIds),1)])):xe("",!0)])])):xe("",!0),a.value.details?(B(),U("div",wue,[k[25]||(k[25]=d("h4",null,"Additional Details",-1)),d("div",Cue,[d("pre",null,Y(A(a.value.details)),1)])])):xe("",!0),a.value.exportType||a.value.studentCount?(B(),U("div",Iue,[k[28]||(k[28]=d("h4",null,"Export Information",-1)),d("div",kue,[a.value.exportType?(B(),U("div",Due,[k[26]||(k[26]=d("label",null,"Export Type:",-1)),d("span",null,Y(a.value.exportType),1)])):xe("",!0),a.value.studentCount?(B(),U("div",Pue,[k[27]||(k[27]=d("label",null,"Student Count:",-1)),d("span",null,Y(a.value.studentCount),1)])):xe("",!0)])])):xe("",!0)]),d("div",{class:"dialog-actions"},[d("button",{onClick:x,class:"btn btn-secondary"},"Close")])])])):xe("",!0)]))}},Fue=xt(Rue,[["__scopeId","data-v-aacc574e"]]),Nue={class:"teacher-feedback-admin"},Oue={key:0,class:"status-message loading"},Mue={key:1,class:"status-message success"},Lue={key:2,class:"status-message error"},Bue={class:"quick-actions"},Uue=["disabled"],$ue={class:"modal-body"},Vue={class:"form-group"},Hue={class:"form-group"},jue={class:"form-group"},Gue={class:"form-group"},Wue={class:"modal-footer"},zue=["disabled"],Kue={key:0},que={key:1},Xue={class:"setup-section"},Yue={key:0,class:"loading-state"},Que={key:1,class:"status-card"},Jue={class:"status-header"},Zue={class:"status-indicator"},ede={key:0,class:"status-badge success"},tde={key:1,class:"status-badge info"},rde={class:"status-details"},nde={key:0},sde={key:1},ade={key:0},ide={key:1,class:"info-note"},ode={key:0,class:"drive-actions"},lde=["href"],cde={key:2,class:"setup-options"},ude={class:"setup-card"},dde={class:"workspace-setup"},fde={class:"form-group"},hde=["disabled"],pde=["disabled"],mde={key:0},gde={key:1},vde={class:"forms-list"},yde={key:0,class:"loading"},xde={key:1,class:"empty-state"},Ede={key:2,class:"forms-grid"},_de={class:"form-header"},bde={class:"admin-action-btns"},Sde=["onClick"],Ade=["onClick"],Tde=["onClick"],wde={class:"form-meta"},Cde={key:0},Ide=["href"],kde={key:1},Dde=["href"],Pde={key:2,class:"sheet-status pending"},Rde={__name:"AdminTeacherFeedback",setup(t){const{isLoading:e,error:r,successMessage:n,formsLoading:s,activeForms:i,createFeedbackFormWithUserAuth:a,deleteFeedbackForm:o,clearMessages:l}=Zy();Ea();const c=xn(),u=ae(!1),f=ae(""),h=ae(""),p=ae(""),g=ae(""),v=ae(null),y=ae(!0),b=ae(""),E=ae("info"),x=ae(""),w=ae(!1),P=be(()=>f.value.trim()&&p.value.trim()),R=async()=>{if(P.value)try{l();const{GoogleAuthProvider:D,signInWithPopup:F,getAuth:N}=await Hs(async()=>{const{GoogleAuthProvider:W,signInWithPopup:ne,getAuth:de}=await Promise.resolve().then(()=>F5);return{GoogleAuthProvider:W,signInWithPopup:ne,getAuth:de}},void 0),M=N(),L=new D;L.addScope("https://www.googleapis.com/auth/drive.file"),L.addScope("https://www.googleapis.com/auth/spreadsheets");let z;try{z=await F(M,L)}catch(W){throw W.code==="auth/popup-closed-by-user"||W.message.includes("Cross-Origin-Opener-Policy")?new Error(" Authentication popup was blocked or closed. Please allow popups for this site and try again."):W}const H=D.credentialFromResult(z).accessToken;if(!H)throw new Error("Failed to get Google access token. Please try again.");console.log(" Got Google access token for feedback form creation");const G={title:f.value.trim(),description:h.value.trim(),formUrl:p.value.trim(),sheetTemplateUrl:g.value.trim(),createdBy:c.user.uid};await a(G,H),A()}catch(D){console.error("Error adding form:",D),D.code==="auth/popup-closed-by-user"?D.value=" Authentication cancelled. Please try again and allow Google Drive access.":D.code==="auth/popup-blocked"?D.value=" Popup blocked. Please allow popups for this site and try again.":D.message&&D.message.includes("Cross-Origin-Opener-Policy")?D.value=" Browser security policy blocked the authentication popup. Please try again or contact support.":D.value=D.message||"Failed to create feedback form"}},A=()=>{u.value=!1,f.value="",h.value="",p.value="",g.value="",l()},_=D=>{window.open(D.formUrl,"_blank","noopener,noreferrer")},m=async D=>{window.open(D.formUrl,"_blank","noopener,noreferrer")},S=async D=>{if(confirm(`Are you sure you want to delete "${D.title}"?`))try{await o(D.id)}catch(F){console.error("Error deleting form:",F)}},I=D=>D?(D.seconds?new Date(D.seconds*1e3):new Date(D)).toLocaleDateString():"N/A",k=async()=>{try{y.value=!0;const{getFunctions:D,httpsCallable:F}=await Hs(async()=>{const{getFunctions:z,httpsCallable:j}=await Promise.resolve().then(()=>T0);return{getFunctions:z,httpsCallable:j}},void 0),N=D(),L=await F(N,"getUserSchool")();L.data.success&&L.data.school?v.value=L.data.school:await C()}catch(D){console.error("Error loading school info:",D),b.value="Error loading Google Drive settings",E.value="error"}finally{y.value=!1}},C=async()=>{try{const{getFunctions:D,httpsCallable:F}=await Hs(async()=>{const{getFunctions:z,httpsCallable:j}=await Promise.resolve().then(()=>T0);return{getFunctions:z,httpsCallable:j}},void 0),N=D(),L=await F(N,"getOrCreateSchool")();L.data.success&&(v.value=L.data.school,L.data.school.isNew&&(b.value="Google Drive settings initialized! You can now create feedback forms.",E.value="success"))}catch(D){console.error("Error creating school:",D),b.value="Error initializing Google Drive settings: "+D.message,E.value="error"}},O=async()=>{if(x.value.trim()){w.value=!0,b.value="";try{const{getFunctions:D,httpsCallable:F}=await Hs(async()=>{const{getFunctions:z,httpsCallable:j}=await Promise.resolve().then(()=>T0);return{getFunctions:z,httpsCallable:j}},void 0),N=D(),L=await F(N,"createSharedDrive")({schoolId:v.value.schoolId,driveName:x.value.trim()});if(L.data.requiresManualCreation){const z=L.data.instructions,j=L.data.serviceAccountEmail;b.value=`Google Workspace setup requires manual configuration:

1. ${z.join(`
2. `)}

Service Account Email: ${j}`,E.value="info"}else L.data.success?(b.value="Google Workspace setup completed successfully!",E.value="success",await k(),x.value=""):(b.value="Error setting up Google Workspace: "+L.data.error,E.value="error")}catch(D){console.error("Error setting up workspace:",D),b.value="Error setting up Google Workspace: "+D.message,E.value="error"}finally{w.value=!1}}};return Wt(async()=>{await k()}),(D,F)=>{var N;return B(),U("div",Nue,[F[35]||(F[35]=d("div",{class:"admin-header"},[d("h2",null,"Teacher Feedback Forms"),d("p",{class:"admin-description"}," Create and manage Google Forms for collecting teacher feedback on students. Each case manager will have their own response sheet automatically created when they first use the form. ")],-1)),q(e)?(B(),U("div",Oue," Processing... ")):xe("",!0),q(n)?(B(),U("div",Mue,Y(q(n)),1)):xe("",!0),q(r)?(B(),U("div",Lue,Y(q(r)),1)):xe("",!0),d("div",Bue,[d("button",{onClick:F[0]||(F[0]=M=>u.value=!0),class:"primary-btn",disabled:q(e)},F[7]||(F[7]=[d("span",null,"",-1),we(" Add Form ")]),8,Uue)]),u.value?(B(),U("div",{key:3,class:"modal-overlay",onClick:A},[d("div",{class:"modal-content",onClick:F[5]||(F[5]=Xr(()=>{},["stop"]))},[d("div",{class:"modal-header"},[F[8]||(F[8]=d("h3",null,"Add Teacher Feedback Form",-1)),d("button",{onClick:A,class:"close-btn"},"")]),d("div",$ue,[d("div",Vue,[F[9]||(F[9]=d("label",null,"Form Title:",-1)),Be(d("input",{type:"text","onUpdate:modelValue":F[1]||(F[1]=M=>f.value=M),placeholder:"Enter a descriptive title for this form",class:"form-input",required:""},null,512),[[gt,f.value]])]),d("div",Hue,[F[10]||(F[10]=d("label",null,"Form Description (optional):",-1)),Be(d("textarea",{"onUpdate:modelValue":F[2]||(F[2]=M=>h.value=M),placeholder:"Brief description of what this form is for",class:"form-textarea",rows:"3"},null,512),[[gt,h.value]])]),d("div",jue,[F[11]||(F[11]=d("label",null,"Google Form URL:",-1)),Be(d("input",{type:"url","onUpdate:modelValue":F[3]||(F[3]=M=>p.value=M),placeholder:"https://docs.google.com/forms/d/your-form-id/viewform",class:"form-input",required:""},null,512),[[gt,p.value]]),F[12]||(F[12]=d("small",{class:"form-help"},"Paste the Google Form URL here (viewform link)",-1))]),d("div",Gue,[F[13]||(F[13]=d("label",null,"Google Sheet Template URL (optional):",-1)),Be(d("input",{type:"url","onUpdate:modelValue":F[4]||(F[4]=M=>g.value=M),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id/edit",class:"form-input"},null,512),[[gt,g.value]]),F[14]||(F[14]=d("small",{class:"form-help"},"Optional: Provide a Google Sheet template that case managers can duplicate for collecting responses",-1))]),F[15]||(F[15]=d("div",{class:"form-info"},[d("h4",null," Setup Instructions:"),d("ol",null,[d("li",null,"Create your Google Form manually with the questions you want"),d("li",null,'Make sure to enable "Collect email addresses" in form settings'),d("li",null,"Copy the form's view URL and paste it above"),d("li",null,'Click "Add Form" - a Google Sheet will be automatically created for responses')]),d("p",{class:"info-note"},[d("strong",null," Automatic:"),we(" A Google Sheet will be created immediately when you add the form. Each case manager will get their own copy of this sheet when they use the form. ")])],-1))]),d("div",Wue,[d("button",{onClick:A,class:"secondary-btn"},"Cancel"),d("button",{onClick:R,class:"primary-btn",disabled:!P.value||q(e)},[q(e)?(B(),U("span",Kue,"Adding Form...")):(B(),U("span",que,"Add Form"))],8,zue)])])])):xe("",!0),d("div",Xue,[F[25]||(F[25]=d("h3",null,"Google Drive Setup",-1)),F[26]||(F[26]=d("p",{class:"section-description"}," Configure how the system accesses Google Drive for creating feedback forms and response sheets. ",-1)),y.value?(B(),U("div",Yue,F[16]||(F[16]=[d("p",null,"Loading Google Drive settings...",-1)]))):v.value?(B(),U("div",Que,[d("div",Jue,[d("h4",null,Y(v.value.name||"Your School"),1),d("div",Zue,[v.value.sharedDriveId?(B(),U("span",ede,"  Google Workspace Mode ")):(B(),U("span",tde,"  Personal Google Drive Mode "))])]),d("div",rde,[d("p",null,[F[17]||(F[17]=d("strong",null,"Current Mode:",-1)),v.value.sharedDriveId?(B(),U("span",nde,"Google Workspace Shared Drive")):(B(),U("span",sde,"Personal Google Drive"))]),v.value.sharedDriveId?(B(),U("p",ade,[F[18]||(F[18]=d("strong",null,"Shared Drive:",-1)),we(" "+Y(v.value.sharedDriveName||"CaseManageVue Templates"),1)])):xe("",!0),v.value.sharedDriveId?xe("",!0):(B(),U("p",ide,F[19]||(F[19]=[d("strong",null,"Note:",-1),we(" Files will be created in your personal Google Drive when you create forms. ")])))]),v.value.sharedDriveId?(B(),U("div",ode,[d("a",{href:`https://drive.google.com/drive/folders/${v.value.sharedDriveId}`,target:"_blank",class:"secondary-btn"},"  Open Shared Drive ",8,lde)])):xe("",!0)])):xe("",!0),!y.value&&!((N=v.value)!=null&&N.sharedDriveId)?(B(),U("div",cde,[F[24]||(F[24]=d("div",{class:"setup-card"},[d("h4",null," Personal Google Drive (Recommended for Testing)"),d("p",{class:"setup-description"}," Use your personal Google account to create forms and sheets. Files will be created in your personal Drive. "),d("div",{class:"setup-note"},[d("strong",null," Ready to use:"),we(" No additional setup required. When you create forms, you'll be prompted to sign in with your Google account. ")])],-1)),d("div",ude,[F[22]||(F[22]=d("h4",null," Google Workspace (For Organizations)",-1)),F[23]||(F[23]=d("p",{class:"setup-description"}," Use a Google Workspace Shared Drive for organization-wide access and management. ",-1)),d("div",dde,[d("div",fde,[F[20]||(F[20]=d("label",{for:"workspaceDriveName"},"Shared Drive Name:",-1)),Be(d("input",{id:"workspaceDriveName","onUpdate:modelValue":F[6]||(F[6]=M=>x.value=M),type:"text",class:"form-input",placeholder:"e.g., CaseManageVue - School Name",disabled:w.value},null,8,hde),[[gt,x.value]])]),d("button",{onClick:O,class:"primary-btn",disabled:w.value||!x.value.trim()},[w.value?(B(),U("span",mde," Setting up...")):(B(),U("span",gde,"Setup Google Workspace"))],8,pde),F[21]||(F[21]=d("div",{class:"workspace-note"},[d("strong",null,"Note:"),we(" This requires Google Workspace admin permissions and manual configuration. ")],-1))])])])):xe("",!0),b.value?(B(),U("div",{key:3,class:Qe(["alert",E.value])},Y(b.value),3)):xe("",!0)]),d("div",vde,[F[34]||(F[34]=d("h3",null,"Feedback Forms",-1)),q(s)?(B(),U("div",yde,"Loading forms...")):q(i).length===0?(B(),U("div",xde,F[27]||(F[27]=[d("p",null,"No feedback forms added yet.",-1),d("p",null,'Click "Add Form" to get started.',-1)]))):(B(),U("div",Ede,[(B(!0),U(Pe,null,je(q(i),M=>(B(),U("div",{key:M.id,class:"form-card"},[d("div",_de,[d("h4",null,Y(M.title||"Untitled Form"),1),d("div",bde,[d("button",{onClick:L=>_(M),class:"admin-action-btn info",title:"View Form"},"  ",8,Sde),d("button",{onClick:L=>m(M),class:"admin-action-btn edit",title:"Edit Form"},"  ",8,Ade),d("button",{onClick:L=>S(M),class:"admin-action-btn delete",title:"Delete Form"},"  ",8,Tde)])]),d("div",wde,[d("p",null,[F[28]||(F[28]=d("strong",null,"Created:",-1)),we(" "+Y(I(M.createdAt)),1)]),M.description?(B(),U("p",Cde,[F[29]||(F[29]=d("strong",null,"Description:",-1)),we(" "+Y(M.description),1)])):xe("",!0),d("p",null,[F[30]||(F[30]=d("strong",null,"Form URL:",-1)),F[31]||(F[31]=we()),d("a",{href:M.formUrl,target:"_blank",class:"form-link"},"Open Form",8,Ide)]),M.spreadsheetUrl?(B(),U("p",kde,[F[32]||(F[32]=d("strong",null,"Response Sheet:",-1)),d("a",{href:M.spreadsheetUrl,target:"_blank",class:"form-link"},"View Responses",8,Dde),F[33]||(F[33]=d("span",{class:"sheet-status"}," Auto-created",-1))])):(B(),U("p",Pde," Sheet will be created when form is first used"))])]))),128))]))])])}}},Fde=xt(Rde,[["__scopeId","data-v-31360789"]]);function Nde(t,e,r){const{getLabel:n}=yo(),s=be(()=>{var h;const f=((h=r.value)==null?void 0:h.numPeriods)||7;return Array.from({length:f},(p,g)=>({value:g.toString(),label:n(g+1),periodIndex:g}))}),i=be(()=>{const f=new Set;return console.log(" Finding teachers from students:",t.value.length),t.value.forEach(h=>{var p,g,v,y,b;(p=h.aeries)!=null&&p.schedule&&Object.values(h.aeries.schedule).forEach(E=>{E&&E.teacherId&&(console.log(" Found teacher ID in aeries.schedule:",E.teacherId),f.add(String(E.teacherId)))}),(v=(g=h.app)==null?void 0:g.schedule)!=null&&v.periods&&Object.values(h.app.schedule.periods).forEach(E=>{E&&(console.log(" Found teacher ID in app.schedule.periods:",E),f.add(String(E)))});for(let E=1;E<=7;E++){const x=`period${E}TeacherId`,w=h[x]||((y=h.aeries)==null?void 0:y[x])||((b=h.app)==null?void 0:b[x]);w&&(console.log(" Found teacher ID in",x,":",w),f.add(String(w)))}}),console.log(" Unique teacher IDs found:",Array.from(f)),console.log(" Users available:",e.value.length),Array.from(f).map(h=>{let p=e.value.find(g=>g.id===h);return!p&&/^\d+$/.test(h)&&(p=e.value.find(g=>g.aeriesId===h)),{id:h,name:p?p.name||`${p.firstName} ${p.lastName}`:`Teacher ${h}`,actualUserId:p?p.id:null}}).sort((h,p)=>h.name.localeCompare(p.name))}),a=(f,h=[])=>{let p=-1;if(/^\d+$/.test(f))p=parseInt(f)-1;else if(f==="SH")p=6;else if(f.startsWith("Per")){const g=f.replace("Per","");/^\d+$/.test(g)&&(p=parseInt(g)-1)}return h.includes(p.toString())};return{availablePeriods:s,availableTeachers:i,getStudentsForTeachers:(f,h=[])=>t.value.filter(p=>{var v,y,b,E,x,w,P;if(!(((y=(v=p.app)==null?void 0:v.flags)==null?void 0:y.flag1)||p.flag1||!1))return!1;if((b=p.aeries)!=null&&b.schedule){const R=Object.entries(p.aeries.schedule);for(let A=0;A<R.length;A++){const[_,m]=R[A];if(m&&m.teacherId&&f.includes(String(m.teacherId))&&!a(_,h))return!0}}if((x=(E=p.app)==null?void 0:E.schedule)!=null&&x.periods){const R=Object.entries(p.app.schedule.periods);for(let A=0;A<R.length;A++){const[_,m]=R[A];if(m&&f.includes(String(m))&&!a(_,h))return!0}}for(let R=0;R<7;R++){const A=`period${R+1}TeacherId`,_=p[A]||((w=p.aeries)==null?void 0:w[A])||((P=p.app)==null?void 0:P[A]);if(_&&f.includes(String(_))&&!h.includes(R.toString()))return!0}return!1}),getStudentTeacherPeriods:(f,h,p=[])=>{var v,y,b,E,x;const g=[];if((v=f.aeries)!=null&&v.schedule){const w=Object.entries(f.aeries.schedule);for(let P=0;P<w.length;P++){const[R,A]=w[P];if(A&&A.teacherId&&h.includes(String(A.teacherId))&&!a(R,p)){let _=e.value.find(S=>S.id===String(A.teacherId));!_&&/^\d+$/.test(A.teacherId)&&(_=e.value.find(S=>S.aeriesId===String(A.teacherId)));const m=n(P+1);g.push({period:m,teacherName:_?_.name||`${_.firstName} ${_.lastName}`:`Teacher ${A.teacherId}`})}}}if((b=(y=f.app)==null?void 0:y.schedule)!=null&&b.periods){const w=Object.entries(f.app.schedule.periods);for(let P=0;P<w.length;P++){const[R,A]=w[P];if(A&&h.includes(String(A))&&!a(R,p)){const _=e.value.find(S=>S.id===String(A)),m=n(parseInt(R));g.push({period:m,teacherName:_?_.name||`${_.firstName} ${_.lastName}`:`Teacher ${A}`})}}}for(let w=0;w<7;w++){const P=`period${w+1}TeacherId`,R=f[P]||((E=f.aeries)==null?void 0:E[P])||((x=f.app)==null?void 0:x[P]);if(R&&h.includes(String(R))&&!p.includes(w.toString())){let A=e.value.find(m=>m.id===String(R));!A&&/^\d+$/.test(R)&&(A=e.value.find(m=>m.aeriesId===String(R)));const _=n(w+1);g.push({period:_,teacherName:A?A.name||`${A.firstName} ${A.lastName}`:`Teacher ${R}`})}}return g},generateCSV:()=>{const f=["Student ID","First Name","Last Name","Grade","Case Manager","Assessment Accommodations","Services"],h=t.value.map(g=>{var P,R,A,_,m;const v=it(g,"firstName")||"",y=it(g,"lastName")||"",b=it(g,"grade")||"",E=g.caseManagerId||((R=(P=g.app)==null?void 0:P.studentData)==null?void 0:R.caseManagerId)||"",x=((_=(A=g.app)==null?void 0:A.accommodations)==null?void 0:_.assessment)||[],w=((m=g.app)==null?void 0:m.classServices)||[];return[g.id||"",v,y,b,E,Array.isArray(x)?x.join("; "):x,Array.isArray(w)?w.map(S=>S.name||S).join("; "):w]});return[f,...h].map(g=>g.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(",")).join(`
`)},downloadCSV:(f,h)=>{const p=new Blob([f],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a");g.href=URL.createObjectURL(p),g.download=h,g.click(),URL.revokeObjectURL(g.href)},isPeriodExcluded:a}}const Ng="casemanage_linked_sheet_id",d0="Student Data";function Mx(){const t=ae(!1),e=ae(localStorage.getItem(Ng)||""),r=ae(""),n=ae(null),s=ae("idle"),i=ae(""),a=ae(null),o=ae("");let l=null;const c=()=>new Promise((A,_)=>{var S,I,k;if((I=(S=window.google)==null?void 0:S.accounts)!=null&&I.oauth2&&((k=window.gapi)!=null&&k.client)){A();return}const m=document.createElement("script");m.src="https://accounts.google.com/gsi/client",m.onload=()=>{a.value=window.google.accounts.oauth2.initTokenClient({client_id:"756483333257-kh1cv865e0buv0cv9g0v1h7ghq7s0e70.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",callback:O=>{O.access_token?(o.value=O.access_token,t.value=!0,window.gapi.client.setToken({access_token:O.access_token}),l&&(l(O),l=null)):(console.error("Failed to get access token"),l&&(l(null),l=null))}});const C=document.createElement("script");C.src="https://apis.google.com/js/api.js",C.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]}),A()})},document.head.appendChild(C)},m.onerror=()=>_(new Error("Failed to load Google Identity Services")),document.head.appendChild(m)}),u=async()=>{if(!a.value)throw new Error("Google auth not initialized");if(o.value)try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:"1BxiMVs0XRA5nFMRigcZ_6g3D6P6dNTMhvBSm1x7kFNg"}),{access_token:o.value}}catch{console.log("Token expired, requesting new one"),o.value=""}return new Promise((A,_)=>{l=A;const m=setTimeout(()=>{l=null,_(new Error("Token request timed out"))},3e4),S=a.value.callback;a.value.callback=I=>{clearTimeout(m),a.value.callback=S,I.access_token?(o.value=I.access_token,t.value=!0,window.gapi.client.setToken({access_token:I.access_token}),l&&(l(I),l=null)):(console.error("Failed to get access token:",I),l&&(l(null),l=null))};try{a.value.requestAccessToken()}catch(I){clearTimeout(m),a.value.callback=S,_(I)}})},f=async(A,_=[])=>{var m;try{s.value="syncing",i.value="Creating new Google Sheet...",o.value||await u();const I=((m=Qo().currentUser)==null?void 0:m.email)||"",k=await window.gapi.client.sheets.spreadsheets.create({properties:{title:`CaseManage Student Data - ${new Date().toLocaleDateString()}`,locale:"en_US",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},sheets:[{properties:{title:d0,gridProperties:{rowCount:1e3,columnCount:9,frozenRowCount:1}}}]}),C=k.result.spreadsheetId;e.value=C,r.value=`https://docs.google.com/spreadsheets/d/${C}`,localStorage.setItem(Ng,C),await h(A,_);const O=k.result.sheets[0].properties.sheetId;return await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:C,resource:{requests:[{repeatCell:{range:{sheetId:O,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:O,dimension:"COLUMNS",startIndex:0,endIndex:9}}},{addProtectedRange:{protectedRange:{range:{sheetId:O},description:`Read-only protection for ${d0}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),s.value="success",i.value="Sheet created and linked successfully!",n.value=new Date,window.open(r.value,"_blank"),{spreadsheetId:C,url:r.value}}catch(S){throw console.error("Error creating sheet:",S),s.value="error",i.value=`Failed to create sheet: ${S.message}`,S}},h=async(A,_=[])=>{if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{s.value="syncing",i.value="Updating Google Sheet...",o.value||await u();const m=A.filter(O=>{var F,N;return((N=(F=O.app)==null?void 0:F.flags)==null?void 0:N.flag1)||O.flag1||!1});console.log(" Google Sheets - Original students:",A.length),console.log(" Google Sheets - Filtered students (separate setting only):",m.length),console.log(" Google Sheets - Students data:",m),m&&m.length>0&&console.log(" Google Sheets - First student:",m[0]);const S=["Student ID","First Name","Last Name","Grade","Case Manager","Separate Setting","Assessment Accommodations","Services","Last Updated"],I=m.map(O=>{var D,F,N,M,L,z,j,H,G,W,ne,de;return console.log(" Processing student:",O.id,{firstName:O.firstName||((F=(D=O.app)==null?void 0:D.studentData)==null?void 0:F.firstName),lastName:O.lastName||((M=(N=O.app)==null?void 0:N.studentData)==null?void 0:M.lastName),grade:O.grade||((z=(L=O.app)==null?void 0:L.studentData)==null?void 0:z.grade)}),[O.id||"",O.firstName||((H=(j=O.app)==null?void 0:j.studentData)==null?void 0:H.firstName)||"",O.lastName||((W=(G=O.app)==null?void 0:G.studentData)==null?void 0:W.lastName)||"",O.grade||((de=(ne=O.app)==null?void 0:ne.studentData)==null?void 0:de.grade)||"",g(O,_)||"",b(O)||"",v(O,"assessment")||"",y(O)||"",new Date().toLocaleString()]}),k=[S,...I];console.log(" Google Sheets - Data to write:",k),await window.gapi.client.sheets.spreadsheets.values.clear({spreadsheetId:e.value,range:`${d0}!A:Z`});const C=await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${d0}!A1`,valueInputOption:"RAW",resource:{values:k}});console.log(" Google Sheets - Update response:",C),s.value="success",i.value=`Updated ${I.length} students (separate setting only)`,n.value=new Date}catch(m){throw console.error("Error updating sheet:",m),s.value="error",i.value=`Failed to update: ${m.message}`,m.status===401&&(o.value="",await u()),m}},p=()=>{e.value="",r.value="",localStorage.removeItem(Ng),s.value="idle",i.value="",n.value=null},g=(A,_=[])=>{var I,k;const m=A.caseManagerId||((k=(I=A.app)==null?void 0:I.studentData)==null?void 0:k.caseManagerId)||A.casemanager_id;if(!m)return"Not Assigned";const S=_.find(C=>C.id===m);return S&&(S.name||`${S.firstName} ${S.lastName}`||S.email)||m},v=(A,_)=>{var S,I,k;const m=((I=(S=A.app)==null?void 0:S.accommodations)==null?void 0:I[_])||((k=A.accommodations)==null?void 0:k[_])||[];return Array.isArray(m)?m.join(", "):m},y=A=>{var m;const _=((m=A.app)==null?void 0:m.classServices)||A.classServices||[];return Array.isArray(_)?_.map(S=>S.name||S).join(", "):_},b=A=>{var m,S;return((S=(m=A.app)==null?void 0:m.flags)==null?void 0:S.flag1)||A.flag1||!1?"True":"False"},E=async()=>{if(!e.value)return!1;try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:e.value}),!0}catch(A){return A.status===404&&p(),!1}},x=async(A,_,m,S=[],I=[])=>{var k;if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{o.value||await u();const O=((k=Qo().currentUser)==null?void 0:k.email)||"";console.log(" Creating custom tab:",A,"for teachers:",m,"excluding periods:",I);const F=(await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{addSheet:{properties:{title:A,gridProperties:{rowCount:1e3,columnCount:12,frozenRowCount:1}}}}]}})).result.replies[0].addSheet.properties.sheetId;console.log(" Created sheet with ID:",F);const N=_.filter(j=>{var G,W;return((W=(G=j.app)==null?void 0:G.flags)==null?void 0:W.flag1)||j.flag1||!1});console.log(" Custom tab - Original students:",_.length),console.log(" Custom tab - Filtered students (separate setting only):",N.length);const M=["Student ID","First Name","Last Name","Grade","Case Manager","Period","Teacher","Subject","Separate Setting","Assessment Accommodations","Services","Last Updated"],L=[];N.forEach(j=>{const H=w(j,m,S,I);console.log(" Student:",j.id,"Periods found:",H.length,"Excluded periods:",I),H.forEach(G=>{console.log(" Adding row for period:",G.period,"teacher:",G.teacherName,"source:",G.source||"unknown")}),H.forEach(G=>{var W,ne,de,se,ce,te;L.push([j.id||"",j.firstName||((ne=(W=j.app)==null?void 0:W.studentData)==null?void 0:ne.firstName)||"",j.lastName||((se=(de=j.app)==null?void 0:de.studentData)==null?void 0:se.lastName)||"",j.grade||((te=(ce=j.app)==null?void 0:ce.studentData)==null?void 0:te.grade)||"",g(j,S)||"",G.period||"",G.teacherName||"",G.subject||"",b(j)||"",v(j,"assessment")||"",y(j)||"",new Date().toLocaleString()])})});const z=[M,...L];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${A}!A1`,valueInputOption:"RAW",resource:{values:z}}),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{repeatCell:{range:{sheetId:F,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:F,dimension:"COLUMNS",startIndex:0,endIndex:12}}},{addProtectedRange:{protectedRange:{range:{sheetId:F},description:`Read-only protection for ${A}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),console.log(" Custom tab created successfully with",L.length,"rows and read-only protection"),{sheetId:F,rowCount:L.length}}catch(C){throw console.error("Error creating custom tab:",C),C}},w=(A,_,m=[],S=[])=>{var C,O,D,F,N;const I=[];console.log(" getStudentPeriodsForTeachers for student:",A.id,"teacherIds:",_,"excludedPeriods:",S,"excludedPeriods array:",JSON.stringify(S));const k=M=>{let L=-1;if(/^\d+$/.test(M))L=parseInt(M)-1;else if(M==="SH")L=6;else if(M.startsWith("Per")){const z=M.replace("Per","");/^\d+$/.test(z)&&(L=parseInt(z)-1)}return console.log(" Period",M,"maps to index",L,"excluded?",S.includes(L.toString())),S.includes(L.toString())};if((C=A.aeries)!=null&&C.schedule){const M=Object.entries(A.aeries.schedule);console.log(" Aeries schedule entries:",M.length);for(let L=0;L<M.length;L++){const[z,j]=M[L],H=k(z);console.log(" Checking aeries period key:",z,"teacherId:",j==null?void 0:j.teacherId,"excluded?",H),j&&j.teacherId&&_.includes(String(j.teacherId))&&(H?console.log(" Excluding aeries period",z):(console.log(" Including aeries period",z),I.push({period:z.replace("period",""),teacherId:j.teacherId,teacherName:P(j.teacherId,m),subject:j.subject||"",source:"aeries"})))}}if((D=(O=A.app)==null?void 0:O.schedule)!=null&&D.periods){const M=Object.entries(A.app.schedule.periods);console.log(" App schedule entries:",M.length);for(let L=0;L<M.length;L++){const[z,j]=M[L],H=k(z);console.log(" Checking app period key:",z,"teacherId:",j,"excluded?",H),j&&_.includes(String(j))&&(H?console.log(" Excluding app period",z):(console.log(" Including app period",z),I.push({period:z,teacherId:j,teacherName:P(j,m),subject:"",source:"app"})))}}for(let M=0;M<7;M++){const L=`period${M+1}TeacherId`,z=A[L]||((F=A.aeries)==null?void 0:F[L])||((N=A.app)==null?void 0:N[L]);if(z&&_.includes(String(z))){const j=S.includes(M.toString());console.log(" Checking CSV period index",M,"field:",L,"teacherId:",z,"excluded?",j),j?console.log(" Excluding CSV period",M):(console.log(" Including CSV period",M),I.push({period:(M+1).toString(),teacherId:z,teacherName:P(z,m),subject:"",source:"csv"}))}}return console.log(" Final periods for student",A.id,":",I.length,I),I},P=(A,_=[])=>{let m=_.find(S=>S.id===A);return!m&&/^\d+$/.test(A)&&(m=_.find(S=>S.aeriesId===A)),m?m.name||`${m.firstName} ${m.lastName}`||`Teacher ${A}`:`Teacher ${A}`};return{isInitialized:t,linkedSheetId:e,linkedSheetUrl:r,lastSyncTime:n,syncStatus:s,syncMessage:i,initializeGoogleAuth:c,requestAccessToken:u,createLinkedSheet:f,updateSheetData:h,createCustomTab:x,deleteCustomTab:async A=>{if(!e.value)throw new Error("No linked sheet.");try{o.value||await u(),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{deleteSheet:{sheetId:A}}]}}),console.log(" Deleted custom tab with sheet ID:",A)}catch(_){throw console.error("Error deleting custom tab:",_),_}},unlinkSheet:p,checkSheetConnection:E}}const Ode=Object.freeze(Object.defineProperty({__proto__:null,useGoogleSheetsRealtime:Mx},Symbol.toStringTag,{value:"Module"}));function Mde(t,e,r){const{generateCSV:n,downloadCSV:s}=r,{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeGoogleAuth:u,createLinkedSheet:f,updateSheetData:h,createCustomTab:p,deleteCustomTab:g,unlinkSheet:v,checkSheetConnection:y}=Mx();let b=null,E=!1;const x=async()=>{try{const C=localStorage.getItem("casemanage_linked_sheet_id");C&&C.startsWith("1XSL0Sl7")&&(console.log("Clearing old sheet ID that was causing 403 errors"),localStorage.removeItem("casemanage_linked_sheet_id")),await u(),i.value&&await y()&&(await A(),w())}catch(C){console.error("Failed to initialize Google Auth:",C)}};Vt(()=>t.value,(C,O)=>{C&&O&&C!==O&&(E=!0,console.log(" Student data changed, will sync on next interval")),C!=null&&C.length},{deep:!0});const w=()=>{b&&clearInterval(b),b=setInterval(async()=>{if(i.value&&E&&l.value!=="syncing")try{console.log(" Hourly auto-sync starting..."),await A(),E=!1,console.log(" Hourly auto-sync completed")}catch(C){console.error(" Hourly auto-sync failed:",C)}},36e5)},P=()=>{b&&clearInterval(b)},R=async()=>{try{await f(t.value,e.value),w()}catch(C){console.error("Failed to create linked sheet:",C),alert("Failed to create Google Sheet. Please make sure you are signed in to Google.")}},A=async()=>{if(!(!i.value||l.value==="syncing"))try{await h(t.value,e.value)}catch(C){console.error("Failed to sync sheet:",C),alert("Failed to sync sheet. Please try again.")}};return{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeIntegration:x,createLinkedGoogleSheet:R,syncNow:A,openGoogleSheet:()=>{a.value&&(window.open(a.value,"_blank","noopener,noreferrer")||(window.location.href=a.value))},unlinkSheet:v,createCustomTab:p,deleteCustomTab:g,createGoogleSheetWithData:()=>{const C=n();s(C,"student_data.csv"),window.open("https://sheets.new","_blank")},createBlankGoogleSheet:()=>{window.open("https://sheets.new","_blank")},exportToCSV:()=>{const C=n();s(C,"student_data_export.csv")},formatTime:C=>new Date(C).toLocaleString(),setupAutoSync:w,cleanupAutoSync:P}}function Lde(t,e){const{getStudentsForTeachers:r}=t,{createCustomTab:n,deleteCustomTab:s}=e,i=ae([]),a=ae(!1),o=ae(""),l=ae([]),c=ae([]),u=5,f=be(()=>l.value.length===0?[]:r(l.value,c.value)),h=async y=>{if(!o.value.trim()||l.value.length===0){alert("Please enter a tab name and select at least one teacher");return}if(i.value.length>=u){alert(`Maximum of ${u} custom tabs allowed`);return}try{const b=r(l.value,c.value),E=await n(o.value.trim(),b,l.value,y,c.value),x={id:Date.now().toString(),name:o.value.trim(),teachers:[...l.value],studentCount:E.rowCount,sheetId:E.sheetId};i.value.push(x),g(),console.log("Custom tab added:",x),alert(`Custom tab "${x.name}" created successfully with ${E.rowCount} student entries!`)}catch(b){console.error("Failed to create custom tab:",b),alert("Failed to create custom tab in Google Sheet. Please try again.")}},p=async y=>{const b=i.value.find(E=>E.id===y);if(b&&confirm(`Are you sure you want to remove the "${b.name}" tab?`))try{b.sheetId&&await s(b.sheetId),i.value=i.value.filter(E=>E.id!==y),console.log("Custom tab removed:",y),alert(`Tab "${b.name}" removed successfully.`)}catch(E){console.error("Failed to delete custom tab:",E),alert("Failed to delete tab from Google Sheet. You may need to delete it manually."),i.value=i.value.filter(x=>x.id!==y)}},g=()=>{o.value="",l.value=[],c.value=[],a.value=!1};return{customTabs:i,showAddTabForm:a,newTabName:o,selectedTeachers:l,selectedExcludedPeriods:c,maxCustomTabs:u,filteredStudentsPreview:f,addCustomTab:h,removeCustomTab:p,resetForm:g,toggleAddTabForm:()=>{a.value=!a.value,a.value||g()}}}const Bde={class:"sheets-section"},Ude={key:0,class:"linked-sheet-status"},$de={class:"status-card success"},Vde={class:"sync-info"},Hde={key:0},jde={key:1,class:"syncing"},Gde={key:2,class:"success"},Wde={key:3,class:"error"},zde={class:"sheet-actions"},Kde=["disabled"],qde={key:1,class:"create-sheet-section"},Xde={class:"alternative-options"},Yde={class:"button-group"},Qde={__name:"GoogleSheetsConnector",props:{linkedSheetId:String,lastSyncTime:[String,Date],syncStatus:String,syncMessage:String},emits:["openGoogleSheet","syncNow","unlinkSheet","createLinkedGoogleSheet","createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){const e=r=>new Date(r).toLocaleString();return(r,n)=>(B(),U("div",Bde,[n[12]||(n[12]=d("h4",null,"Google Sheets Integration",-1)),t.linkedSheetId?(B(),U("div",Ude,[d("div",$de,[n[7]||(n[7]=d("h5",null," Linked Google Sheet",-1)),n[8]||(n[8]=d("p",null,"Your student data is synced to Google Sheets",-1)),d("button",{onClick:n[0]||(n[0]=s=>r.$emit("openGoogleSheet")),class:"sheet-link"}," Open Google Sheet  "),d("div",Vde,[t.lastSyncTime?(B(),U("span",Hde,"Last synced: "+Y(e(t.lastSyncTime)),1)):xe("",!0),t.syncStatus==="syncing"?(B(),U("span",jde," Syncing...")):t.syncStatus==="success"?(B(),U("span",Gde," Synced")):t.syncStatus==="error"?(B(),U("span",Wde," "+Y(t.syncMessage),1)):xe("",!0)]),n[9]||(n[9]=d("div",{class:"auto-sync-info"},[d("span",{class:"auto-sync-badge"},[d("span",{class:"pulse"}),we(" Auto-sync enabled ")]),d("p",{class:"auto-sync-description"}," Changes to student data, accommodations, and services are automatically synced to your Google Sheet. ")],-1)),d("div",zde,[d("button",{onClick:n[1]||(n[1]=s=>r.$emit("syncNow")),disabled:t.syncStatus==="syncing",class:"btn-sync"}," Sync Now ",8,Kde),d("button",{onClick:n[2]||(n[2]=s=>r.$emit("unlinkSheet")),class:"btn-unlink"}," Unlink Sheet ")])])])):(B(),U("div",qde,[n[10]||(n[10]=Dn('<h5 data-v-ec72cef0>Create a Linked Google Sheet</h5><p data-v-ec72cef0>Link your student data to a Google Sheet that automatically updates when changes are made.</p><div class="features-list" data-v-ec72cef0><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Auto-syncs when students are added or updated</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Updates accommodations and services in real-time</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Maintains a live connection to your data</span></div></div>',3)),d("button",{onClick:n[3]||(n[3]=s=>r.$emit("createLinkedGoogleSheet")),class:"btn-primary"},"  Create & Link Google Sheet ")])),d("div",Xde,[n[11]||(n[11]=d("h5",null,"Other Export Options",-1)),d("div",Yde,[d("button",{onClick:n[4]||(n[4]=s=>r.$emit("createGoogleSheetWithData")),class:"btn-secondary"},"  Create Google Sheet with Data (One-time) "),d("button",{onClick:n[5]||(n[5]=s=>r.$emit("createBlankGoogleSheet")),class:"btn-secondary"},"  Create Blank Google Sheet "),d("button",{onClick:n[6]||(n[6]=s=>r.$emit("exportToCSV")),class:"btn-secondary"},"  Export to CSV Only ")])])]))}},Jde=xt(Qde,[["__scopeId","data-v-ec72cef0"]]),Zde={class:"preview-section"},efe={class:"preview-table"},tfe={key:0},rfe={key:0},nfe={key:0,class:"preview-note"},Og=5,sfe={__name:"StudentPreview",props:{filteredStudents:{type:Array,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},setup(t){const e=t,r=be(()=>e.filteredStudents.slice(0,Og)),n=a=>{const o=it(a,"firstName")||"",l=it(a,"lastName")||"";return`${o} ${l}`.trim()},s=a=>it(a,"grade")||"",i=a=>e.getStudentTeacherPeriods(a,e.selectedTeachers,e.selectedExcludedPeriods);return(a,o)=>(B(),U("div",Zde,[d("h6",null,"Preview ("+Y(t.filteredStudents.length)+" students)",1),d("div",efe,[d("table",null,[o[0]||(o[0]=d("thead",null,[d("tr",null,[d("th",null,"Name"),d("th",null,"Grade"),d("th",null,"Period"),d("th",null,"Teacher")])],-1)),d("tbody",null,[(B(!0),U(Pe,null,je(r.value,l=>(B(),U("tr",{key:l.id},[d("td",null,Y(n(l)),1),d("td",null,Y(s(l)),1),d("td",null,[(B(!0),U(Pe,null,je(i(l),(c,u)=>(B(),U("span",{key:u},[we(Y(c.period),1),u<i(l).length-1?(B(),U("span",tfe,", ")):xe("",!0)]))),128))]),d("td",null,[(B(!0),U(Pe,null,je(i(l),(c,u)=>(B(),U("span",{key:u},[we(Y(c.teacherName),1),u<i(l).length-1?(B(),U("span",rfe,", ")):xe("",!0)]))),128))])]))),128))])]),t.filteredStudents.length>Og?(B(),U("p",nfe," ... and "+Y(t.filteredStudents.length-Og)+" more students ",1)):xe("",!0)])]))}},afe=xt(sfe,[["__scopeId","data-v-936b1ce9"]]),ife={class:"custom-tabs-config"},ofe={class:"add-tab-controls"},lfe=["disabled"],cfe={key:0,class:"max-tabs-warning"},ufe={key:0,class:"add-tab-form"},dfe={class:"form-group"},ffe=["value"],hfe={class:"form-group"},pfe={class:"teacher-checkboxes"},mfe=["value","checked","onChange"],gfe={class:"form-group"},vfe={class:"period-checkboxes"},yfe=["value","checked","onChange"],xfe={class:"form-actions"},Efe={key:1,class:"existing-tabs"},_fe={class:"tab-teachers"},bfe=["onClick"],Sfe={__name:"CustomTabManager",props:{customTabs:{type:Array,required:!0},showAddTabForm:{type:Boolean,required:!0},newTabName:{type:String,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},maxCustomTabs:{type:Number,required:!0},availableTeachers:{type:Array,required:!0},availablePeriods:{type:Array,required:!0},filteredStudentsPreview:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},emits:["toggleAddTabForm","update:newTabName","updateSelectedTeachers","updateSelectedExcludedPeriods","addCustomTab","removeCustomTab","resetForm"],setup(t){return(e,r)=>(B(),U("div",ife,[r[8]||(r[8]=d("h5",null,"Custom Teacher Tabs",-1)),r[9]||(r[9]=d("p",null,"Create custom tabs with data filtered by specific teachers",-1)),d("div",ofe,[d("button",{onClick:r[0]||(r[0]=n=>e.$emit("toggleAddTabForm")),disabled:t.customTabs.length>=t.maxCustomTabs,class:"btn-primary"}," + Add Custom Tab ",8,lfe),t.customTabs.length>=t.maxCustomTabs?(B(),U("span",cfe," Maximum of "+Y(t.maxCustomTabs)+" custom tabs allowed ",1)):xe("",!0)]),t.showAddTabForm?(B(),U("div",ufe,[d("div",dfe,[r[4]||(r[4]=d("label",null,"Tab Name",-1)),d("input",{value:t.newTabName,onInput:r[1]||(r[1]=n=>e.$emit("update:newTabName",n.target.value)),type:"text",class:"form-input",placeholder:"e.g., Math Teachers",maxlength:"30"},null,40,ffe)]),d("div",hfe,[r[5]||(r[5]=d("label",null,"Select Teachers",-1)),d("div",pfe,[(B(!0),U(Pe,null,je(t.availableTeachers,n=>(B(),U("label",{key:n.id,class:"checkbox-label"},[d("input",{type:"checkbox",value:n.id,checked:t.selectedTeachers.includes(n.id),onChange:s=>e.$emit("updateSelectedTeachers",n.id,s.target.checked)},null,40,mfe),we(" "+Y(n.name),1)]))),128))])]),d("div",gfe,[r[6]||(r[6]=d("label",null,"Exclude Periods (Optional)",-1)),d("div",vfe,[(B(!0),U(Pe,null,je(t.availablePeriods,n=>(B(),U("label",{key:n.value,class:"checkbox-label"},[d("input",{type:"checkbox",value:n.value,checked:t.selectedExcludedPeriods.includes(n.value),onChange:s=>e.$emit("updateSelectedExcludedPeriods",n.value,s.target.checked)},null,40,yfe),we(" "+Y(n.label),1)]))),128))])]),t.selectedTeachers.length>0?(B(),Qt(afe,{key:0,"filtered-students":t.filteredStudentsPreview,"selected-teachers":t.selectedTeachers,"selected-excluded-periods":t.selectedExcludedPeriods,"get-student-teacher-periods":t.getStudentTeacherPeriods},null,8,["filtered-students","selected-teachers","selected-excluded-periods","get-student-teacher-periods"])):xe("",!0),d("div",xfe,[d("button",{onClick:r[2]||(r[2]=n=>e.$emit("addCustomTab")),class:"btn-primary"}," Create Tab "),d("button",{onClick:r[3]||(r[3]=n=>e.$emit("resetForm")),class:"btn-secondary"}," Cancel ")])])):xe("",!0),t.customTabs.length>0?(B(),U("div",Efe,[r[7]||(r[7]=d("h6",null,"Current Custom Tabs",-1)),(B(!0),U(Pe,null,je(t.customTabs,n=>(B(),U("div",{key:n.id,class:"tab-item"},[d("div",null,[d("strong",null,Y(n.name),1),d("span",_fe,Y(n.teachers.length)+" teacher(s), "+Y(n.studentCount)+" students ",1)]),d("button",{onClick:s=>e.$emit("removeCustomTab",n.id),class:"btn-danger btn-small"}," Remove ",8,bfe)]))),128))])):xe("",!0)]))}},Afe=xt(Sfe,[["__scopeId","data-v-236484db"]]),Tfe={class:"export-options-section"},wfe={class:"export-grid"},Cfe={class:"export-card"},Ife={class:"export-card"},kfe={class:"export-card"},Dfe={__name:"TestingExportOptions",emits:["createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){return(e,r)=>(B(),U("div",Tfe,[r[12]||(r[12]=d("h4",null,"Export Options",-1)),r[13]||(r[13]=d("p",null,"Additional ways to export and work with your student data",-1)),d("div",wfe,[d("div",Cfe,[r[3]||(r[3]=d("div",{class:"export-icon"},"",-1)),r[4]||(r[4]=d("h5",null,"Google Sheets with Data",-1)),r[5]||(r[5]=d("p",null,"Create a new Google Sheet and populate it with current student data (one-time export)",-1)),d("button",{onClick:r[0]||(r[0]=n=>e.$emit("createGoogleSheetWithData")),class:"btn-primary"}," Create Sheet with Data ")]),d("div",Ife,[r[6]||(r[6]=d("div",{class:"export-icon"},"",-1)),r[7]||(r[7]=d("h5",null,"Blank Google Sheet",-1)),r[8]||(r[8]=d("p",null,"Create a new blank Google Sheet that you can customize yourself",-1)),d("button",{onClick:r[1]||(r[1]=n=>e.$emit("createBlankGoogleSheet")),class:"btn-primary"}," Create Blank Sheet ")]),d("div",kfe,[r[9]||(r[9]=d("div",{class:"export-icon"},"",-1)),r[10]||(r[10]=d("h5",null,"CSV Export",-1)),r[11]||(r[11]=d("p",null,"Download student data as a CSV file for use in Excel or other applications",-1)),d("button",{onClick:r[2]||(r[2]=n=>e.$emit("exportToCSV")),class:"btn-primary"}," Download CSV ")])]),r[14]||(r[14]=d("div",{class:"export-info"},[d("h5",null,"Export Information"),d("ul",null,[d("li",null,[d("strong",null,"Linked Sheets:"),we(" Automatically sync when data changes")]),d("li",null,[d("strong",null,"One-time Exports:"),we(" Snapshot of data at export time")]),d("li",null,[d("strong",null,"CSV Files:"),we(" Compatible with Excel, Numbers, and other spreadsheet apps")])])],-1))]))}},Pfe=xt(Dfe,[["__scopeId","data-v-3bc6896f"]]),Rfe={class:"testing-links-container"},Ffe={__name:"TestingLinks",setup(t){const{students:e,fetchStudents:r}=Ii(),{userList:n,fetchUsers:s}=Ea(),{appSettings:i,loadAppSettings:a}=Ns(),o=Nde(e,n,i),{availablePeriods:l,availableTeachers:c,getStudentTeacherPeriods:u}=o,f=Mde(e,n,o),{linkedSheetId:h,lastSyncTime:p,syncStatus:g,syncMessage:v,initializeIntegration:y,createLinkedGoogleSheet:b,syncNow:E,openGoogleSheet:x,unlinkSheet:w,createGoogleSheetWithData:P,createBlankGoogleSheet:R,exportToCSV:A,cleanupAutoSync:_}=f,m=Lde(o,f),{customTabs:S,showAddTabForm:I,newTabName:k,selectedTeachers:C,selectedExcludedPeriods:O,maxCustomTabs:D,filteredStudentsPreview:F,addCustomTab:N,removeCustomTab:M,resetForm:L,toggleAddTabForm:z}=m,j=(W,ne)=>{if(ne)C.value.includes(W)||C.value.push(W);else{const de=C.value.indexOf(W);de>-1&&C.value.splice(de,1)}},H=(W,ne)=>{if(ne)O.value.includes(W)||O.value.push(W);else{const de=O.value.indexOf(W);de>-1&&O.value.splice(de,1)}},G=async()=>{await N(n.value)};return Wt(async()=>{try{await Promise.all([r(),s(),a()]),console.log("Students loaded:",e.value.length),console.log("Users loaded:",n.value.length),console.log("App settings loaded:",i.value),await y()}catch(W){console.error("Failed to initialize TestingLinks:",W)}}),Va(()=>{_()}),(W,ne)=>(B(),U("div",Rfe,[ne[1]||(ne[1]=d("h3",null,"Testing Links & Google Sheets Integration",-1)),Oe(Jde,{"linked-sheet-id":q(h),"last-sync-time":q(p),"sync-status":q(g),"sync-message":q(v),onOpenGoogleSheet:q(x),onSyncNow:q(E),onUnlinkSheet:q(w),onCreateLinkedGoogleSheet:q(b),onCreateGoogleSheetWithData:q(P),onCreateBlankGoogleSheet:q(R),onExportToCsv:q(A)},null,8,["linked-sheet-id","last-sync-time","sync-status","sync-message","onOpenGoogleSheet","onSyncNow","onUnlinkSheet","onCreateLinkedGoogleSheet","onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"]),q(h)?(B(),Qt(Afe,{key:0,"custom-tabs":q(S),"show-add-tab-form":q(I),"new-tab-name":q(k),"selected-teachers":q(C),"selected-excluded-periods":q(O),"max-custom-tabs":q(D),"available-teachers":q(c),"available-periods":q(l),"filtered-students-preview":q(F),"get-student-teacher-periods":q(u),onToggleAddTabForm:q(z),"onUpdate:newTabName":ne[0]||(ne[0]=de=>k.value=de),onUpdateSelectedTeachers:j,onUpdateSelectedExcludedPeriods:H,onAddCustomTab:G,onRemoveCustomTab:q(M),onResetForm:q(L)},null,8,["custom-tabs","show-add-tab-form","new-tab-name","selected-teachers","selected-excluded-periods","max-custom-tabs","available-teachers","available-periods","filtered-students-preview","get-student-teacher-periods","onToggleAddTabForm","onRemoveCustomTab","onResetForm"])):xe("",!0),Oe(Pfe,{onCreateGoogleSheetWithData:q(P),onCreateBlankGoogleSheet:q(R),onExportToCsv:q(A)},null,8,["onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"])]))}},Nfe=xt(Ffe,[["__scopeId","data-v-8d441fb1"]]),Ofe={class:"admin-dashboard"},Mfe={class:"stats-grid"},Lfe={class:"stat-card primary"},Bfe={class:"stat-icon"},Ufe={class:"stat-content"},$fe={class:"stat-card iep"},Vfe={class:"stat-icon"},Hfe={class:"stat-content"},jfe={class:"stat-card plan-504"},Gfe={class:"stat-icon"},Wfe={class:"stat-content"},zfe={class:"stat-card users"},Kfe={class:"stat-icon"},qfe={class:"stat-content"},Xfe={class:"role-breakdown"},Yfe={class:"role-stats-grid"},Qfe={class:"role-icon"},Jfe={class:"role-info"},Zfe={class:"role-count"},e0e={class:"role-name"},t0e={class:"categories-grid"},r0e={class:"category-card"},n0e={class:"category-header"},s0e={class:"category-content"},a0e={class:"feature-list"},i0e={class:"feature-item"},o0e={class:"feature-icon"},l0e={class:"feature-item"},c0e={class:"feature-icon"},u0e={class:"feature-item"},d0e={class:"feature-icon"},f0e={class:"category-card"},h0e={class:"category-header"},p0e={class:"category-content"},m0e={class:"feature-list"},g0e={class:"feature-item"},v0e={class:"feature-icon"},y0e={class:"feature-item"},x0e={class:"feature-icon"},E0e={class:"feature-item"},_0e={class:"feature-icon"},b0e={class:"category-card"},S0e={class:"category-header"},A0e={class:"category-content"},T0e={class:"feature-list"},w0e={class:"feature-item"},C0e={class:"feature-icon"},I0e={class:"feature-item"},k0e={class:"feature-icon"},D0e={class:"feature-item"},P0e={class:"feature-icon"},R0e={class:"feature-item"},F0e={class:"feature-icon"},N0e={class:"feature-item"},O0e={class:"feature-icon"},M0e={class:"category-card"},L0e={class:"category-header"},B0e={class:"category-content"},U0e={class:"feature-list"},$0e={class:"feature-item"},V0e={class:"feature-icon"},H0e={class:"feature-item"},j0e={class:"feature-icon"},G0e={class:"feature-item"},W0e={class:"feature-icon"},z0e={class:"system-status"},K0e={class:"status-grid"},q0e={class:"status-card"},X0e={class:"sync-status"},Y0e={class:"sync-item"},Q0e={key:0,class:"sync-time"},J0e={class:"sync-item"},Z0e={class:"sync-time"},ehe={class:"status-card"},the={class:"user-activity"},rhe={class:"activity-item"},nhe={class:"activity-count"},she={class:"activity-item"},ahe={class:"activity-count"},ihe={class:"status-card"},ohe={class:"health-indicators"},lhe={class:"health-item"},che={class:"health-status healthy"},uhe={class:"health-item"},dhe={class:"health-status healthy"},fhe={class:"quick-actions"},hhe={class:"actions-grid"},phe={__name:"AdminDashboard",emits:["goToCategory","goToStudents"],setup(t){const{students:e,fetchStudents:r}=Ii(),{userList:n,fetchUsers:s}=Ea(),{linkedSheetId:i,lastSyncTime:a}=Mx(),o=ae(12),l=ae(8),c=ae(!0),u=ae("Connected"),f=be(()=>{var E;return((E=e.value)==null?void 0:E.length)||0}),h=be(()=>{var E;return((E=n.value)==null?void 0:E.length)||0}),p=be(()=>{var E;return((E=e.value)==null?void 0:E.filter(x=>{var P,R;return(((R=(P=x.app)==null?void 0:P.studentData)==null?void 0:R.plan)||x.plan||"").toLowerCase()==="iep"}).length)||0}),g=be(()=>{var E;return((E=e.value)==null?void 0:E.filter(x=>{var P,R;return(((R=(P=x.app)==null?void 0:P.studentData)==null?void 0:R.plan)||x.plan||"")==="504"}).length)||0}),v=be(()=>{var w;const E={};(w=n.value)==null||w.forEach(P=>{const R=P.role||"unknown";E[R]||(E[R]=0),E[R]++});const x={admin:{name:"Administrators",icon:Lv},school_admin:{name:"School Admins",icon:i7},teacher:{name:"Teachers",icon:$B},case_manager:{name:"Case Managers",icon:C0},paraeducator:{name:"Paraeducators",icon:Tm},service_provider:{name:"Service Providers",icon:nI},sped_chair:{name:"SPED Chairs",icon:VB},admin_504:{name:"504 Admins",icon:Mv},staff_view:{name:"Staff (View)",icon:jl},staff_edit:{name:"Staff (Edit)",icon:Bv}};return Object.entries(E).map(([P,R])=>{var A,_;return{name:((A=x[P])==null?void 0:A.name)||P.replace("_"," ").toUpperCase(),count:R,icon:((_=x[P])==null?void 0:_.icon)||jl}}).sort((P,R)=>R.count-P.count).slice(0,8)});be(()=>i.value?1:0);const y=be(()=>!!i.value),b=E=>E?new Date(E).toLocaleString():"Never";return Wt(async()=>{try{await Promise.all([r(),s()])}catch(E){console.error("Error loading dashboard data:",E)}}),(E,x)=>(B(),U("div",Ofe,[d("div",Mfe,[d("div",Lfe,[d("div",Bfe,[Oe(q(jl),{size:32})]),d("div",Ufe,[d("h3",null,Y(f.value),1),x[8]||(x[8]=d("p",null,"Total Students",-1))])]),d("div",$fe,[d("div",Vfe,[Oe(q(Wu),{size:32})]),d("div",Hfe,[d("h3",null,Y(p.value),1),x[9]||(x[9]=d("p",null,"IEP Students",-1))])]),d("div",jfe,[d("div",Gfe,[Oe(q(Mv),{size:32})]),d("div",Wfe,[d("h3",null,Y(g.value),1),x[10]||(x[10]=d("p",null,"504 Plan Students",-1))])]),d("div",zfe,[d("div",Kfe,[Oe(q(C0),{size:32})]),d("div",qfe,[d("h3",null,Y(h.value),1),x[11]||(x[11]=d("p",null,"System Users",-1))])])]),d("div",Xfe,[d("h2",null,[Oe(q(sI),{size:20}),x[12]||(x[12]=we(" Staff Role Distribution"))]),d("div",Yfe,[(B(!0),U(Pe,null,je(v.value,w=>(B(),U("div",{class:"role-stat",key:w.name},[d("div",Qfe,[(B(),Qt(S1(w.icon),{size:24}))]),d("div",Jfe,[d("span",Zfe,Y(w.count),1),d("span",e0e,Y(w.name),1)])]))),128))])]),d("div",t0e,[d("div",r0e,[d("div",n0e,[d("h2",null,[Oe(q(jl),{size:18}),x[13]||(x[13]=we(" User & Student Management"))]),d("button",{onClick:x[0]||(x[0]=w=>E.$emit("goToCategory","users-students")),class:"category-btn"},[Oe(q(jf),{size:16}),x[14]||(x[14]=we(" Manage "))])]),d("div",s0e,[d("div",a0e,[d("div",i0e,[d("div",o0e,[Oe(q(aI),{size:18})]),x[15]||(x[15]=d("div",null,[d("h4",null,"Add Users"),d("p",null,"Create new user accounts with role assignments")],-1))]),d("div",l0e,[d("div",c0e,[Oe(q(Bv),{size:18})]),x[16]||(x[16]=d("div",null,[d("h4",null,"Manage Users"),d("p",null,"Edit existing users, roles, and permissions")],-1))]),d("div",u0e,[d("div",d0e,[Oe(q(XB),{size:18})]),x[17]||(x[17]=d("div",null,[d("h4",null,"Student Administration"),d("p",null,"Comprehensive student data management")],-1))])])])]),d("div",f0e,[d("div",h0e,[d("h2",null,[Oe(q(Tm),{size:18}),x[18]||(x[18]=we(" Paraeducator Management"))]),d("button",{onClick:x[1]||(x[1]=w=>E.$emit("goToCategory","aide-management")),class:"category-btn"},[Oe(q(jf),{size:16}),x[19]||(x[19]=we(" Manage "))])]),d("div",p0e,[d("div",m0e,[d("div",g0e,[d("div",v0e,[Oe(q(GB),{size:18})]),x[20]||(x[20]=d("div",null,[d("h4",null,"Aide Assignment"),d("p",null,"Assign paraeducators to students and periods")],-1))]),d("div",y0e,[d("div",x0e,[Oe(q(HB),{size:18})]),x[21]||(x[21]=d("div",null,[d("h4",null,"Aide Schedule"),d("p",null,"Manage paraeducator schedules and assignments")],-1))]),d("div",E0e,[d("div",_0e,[Oe(q(eI),{size:18})]),x[22]||(x[22]=d("div",null,[d("h4",null,"Time Table"),d("p",null,"Configure school periods and time slots")],-1))])])])]),d("div",b0e,[d("div",S0e,[d("h2",null,[Oe(q(H_),{size:18}),x[23]||(x[23]=we(" Data & Integration"))]),d("button",{onClick:x[2]||(x[2]=w=>E.$emit("goToCategory","data-integration")),class:"category-btn"},[Oe(q(jf),{size:16}),x[24]||(x[24]=we(" Manage "))])]),d("div",A0e,[d("div",T0e,[d("div",w0e,[d("div",C0e,[Oe(q(zB),{size:18})]),x[25]||(x[25]=d("div",null,[d("h4",null,"SEIS Import"),d("p",null,"Import student data from SEIS system")],-1))]),d("div",I0e,[d("div",k0e,[Oe(q(JB),{size:18})]),x[26]||(x[26]=d("div",null,[d("h4",null,"Aeries API & Import"),d("p",null,"Connect to Aeries SIS for data synchronization")],-1))]),d("div",D0e,[d("div",P0e,[Oe(q(c7),{size:18})]),x[27]||(x[27]=d("div",null,[d("h4",null,"Testing Links"),d("p",null,"Google Sheets integration and export tools")],-1))]),d("div",R0e,[d("div",F0e,[Oe(q(tI),{size:18})]),x[28]||(x[28]=d("div",null,[d("h4",null,"Teacher Feedback"),d("p",null,"Manage teacher feedback forms and responses")],-1))]),d("div",N0e,[d("div",O0e,[Oe(q(YB),{size:18})]),x[29]||(x[29]=d("div",null,[d("h4",null,"Backup & Restore"),d("p",null,"System backup and data restoration tools")],-1))])])])]),d("div",M0e,[d("div",L0e,[d("h2",null,[Oe(q(rI),{size:18}),x[30]||(x[30]=we(" System Configuration"))]),d("button",{onClick:x[3]||(x[3]=w=>E.$emit("goToCategory","system-config")),class:"category-btn"},[Oe(q(jf),{size:16}),x[31]||(x[31]=we(" Manage "))])]),d("div",B0e,[d("div",U0e,[d("div",$0e,[d("div",V0e,[Oe(q(Lv),{size:18})]),x[32]||(x[32]=d("div",null,[d("h4",null,"Permissions"),d("p",null,"Role-based access control and permissions matrix")],-1))]),d("div",H0e,[d("div",j0e,[Oe(q(h7),{size:18})]),x[33]||(x[33]=d("div",null,[d("h4",null,"App Settings"),d("p",null,"Configure application settings and preferences")],-1))]),d("div",G0e,[d("div",W0e,[Oe(q(n7),{size:18})]),x[34]||(x[34]=d("div",null,[d("h4",null,"Theme Customization"),d("p",null,"Customize student page appearance and colors")],-1))])])])])]),d("div",z0e,[d("h2",null,[Oe(q(u7),{size:20}),x[35]||(x[35]=we(" System Status"))]),d("div",K0e,[d("div",q0e,[d("h3",null,[Oe(q(a7),{size:18}),x[36]||(x[36]=we(" Data Sync Status"))]),d("div",X0e,[d("div",Y0e,[d("span",{class:Qe(["sync-indicator",{active:y.value}])},null,2),x[37]||(x[37]=d("span",null,"Google Sheets",-1)),q(a)?(B(),U("span",Q0e,Y(b(q(a))),1)):xe("",!0)]),d("div",J0e,[d("span",{class:Qe(["sync-indicator",{active:c.value}])},null,2),x[38]||(x[38]=d("span",null,"Aeries SIS",-1)),d("span",Z0e,Y(u.value),1)])])]),d("div",ehe,[d("h3",null,[Oe(q(BB),{size:18}),x[39]||(x[39]=we(" User Activity"))]),d("div",the,[d("div",rhe,[x[40]||(x[40]=d("span",null,"Active Users Today",-1)),d("span",nhe,Y(o.value),1)]),d("div",she,[x[41]||(x[41]=d("span",null,"Recent Logins",-1)),d("span",ahe,Y(l.value),1)])])]),d("div",ihe,[d("h3",null,[Oe(q(r7),{size:18}),x[42]||(x[42]=we(" System Health"))]),d("div",ohe,[d("div",lhe,[x[44]||(x[44]=d("span",null,"Database",-1)),d("span",che,[Oe(q(yh),{size:16}),x[43]||(x[43]=we(" Healthy "))])]),d("div",uhe,[x[46]||(x[46]=d("span",null,"Functions",-1)),d("span",dhe,[Oe(q(yh),{size:16}),x[45]||(x[45]=we(" Operational "))])])])])])]),d("div",fhe,[d("h2",null,[Oe(q(p7),{size:20}),x[47]||(x[47]=we(" Quick Actions"))]),d("div",hhe,[d("button",{onClick:x[4]||(x[4]=w=>E.$emit("goToStudents")),class:"admin-action-btn primary"},[Oe(q(jl),{size:20}),x[48]||(x[48]=d("span",null,"View Students",-1))]),d("button",{onClick:x[5]||(x[5]=w=>E.$emit("goToCategory","users-students")),class:"admin-action-btn success"},[Oe(q(C0),{size:20}),x[49]||(x[49]=d("span",null,"Manage Users",-1))]),d("button",{onClick:x[6]||(x[6]=w=>E.$emit("goToCategory","aide-management")),class:"admin-action-btn warning"},[Oe(q(Tm),{size:20}),x[50]||(x[50]=d("span",null,"Paraeducators",-1))]),d("button",{onClick:x[7]||(x[7]=w=>E.$emit("goToCategory","data-integration")),class:"admin-action-btn info"},[Oe(q(H_),{size:20}),x[51]||(x[51]=d("span",null,"Data & Integration",-1))])])])]))}},mhe=xt(phe,[["__scopeId","data-v-b32b4e32"]]);var ghe={};class vhe{constructor(){this.encryptionKey="default-dev-key-replace-in-production",this.encryptionEnabled=!0,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled")}setEncryptionEnabled(e){this.encryptionEnabled=e,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled"),e||console.warn(" Warning: Encryption disabled in production environment")}encryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.encryptField(i);this.setNestedValue(n,s,a)}}),n}decryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.decryptField(i);this.setNestedValue(n,s,a)}}),n}encryptField(e){if(!this.encryptionEnabled)return e;try{const r=typeof e=="object"?JSON.stringify(e):String(e);return Ki.AES.encrypt(r,this.encryptionKey).toString()}catch(r){return console.error("Encryption failed:",r),e}}decryptField(e){if(!this.encryptionEnabled)return e;try{const n=Ki.AES.decrypt(e,this.encryptionKey).toString(Ki.enc.Utf8);try{return JSON.parse(n)}catch{return n}}catch(r){return console.error("Decryption failed:",r),e}}getNestedValue(e,r){return r.split(".").reduce((n,s)=>n&&n[s],e)}setNestedValue(e,r,n){const s=r.split("."),i=s.pop(),a=s.reduce((o,l)=>o[l]=o[l]||{},e);return a[i]=n,e}async logAccess(e,r,n){var s,i;try{const a=Ze(At(qe,"iepAccessLogs"));await jt(a,{studentId:e,userId:(s=_t.currentUser)==null?void 0:s.uid,userEmail:(i=_t.currentUser)==null?void 0:i.email,action:r,fields:n,timestamp:In(),userAgent:navigator.userAgent,encryptionEnabled:this.encryptionEnabled})}catch(a){console.error("Failed to log access:",a)}}async verifyAccess(e,r="read"){var n,s,i,a,o,l;if(!_t.currentUser)return!1;try{const u=(await sr(Ze(qe,"users",_t.currentUser.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager"){const h=((i=(s=(n=(await sr(Ze(qe,"students",e))).data())==null?void 0:n.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===_t.currentUser.uid;return await this.logAccess(e,`access_attempt_${r}`,{success:h,role:"case_manager"}),h}if(u.role==="teacher"&&r==="read"){const h=((l=(o=(a=(await sr(Ze(qe,"students",e))).data())==null?void 0:a.app)==null?void 0:o.schedule)==null?void 0:l.periods)||{},p=Object.values(h).includes(_t.currentUser.uid);return await this.logAccess(e,`access_attempt_${r}`,{success:p,role:"teacher"}),p}return!1}catch(c){return console.error("Access verification failed:",c),!1}}async getAccessHistory(e){try{const r=or(At(qe,"iepAccessLogs"),Ur("studentId","==",e),Ur("timestamp",">=",new Date(Date.now()-2592e6)));return(await Gt(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Failed to fetch access history:",r),[]}}maskSensitiveData(e){var n,s,i;const r=JSON.parse(JSON.stringify(e));return(n=r.app)!=null&&n.accommodations&&(r.app.accommodations={assessment:"[RESTRICTED]",instruction:"[RESTRICTED]"}),(i=(s=r.app)==null?void 0:s.schedule)!=null&&i.classServices&&(r.app.schedule.classServices=["[RESTRICTED]"]),r}isEncryptionEnabled(){return this.encryptionEnabled}isValueEncrypted(e){try{return typeof e!="string"?!1:(Ki.AES.decrypt(e,this.encryptionKey).toString(Ki.enc.Utf8),!0)}catch{return!1}}encryptGmailPassword(e){return this.encryptionEnabled?this.encryptField(e):(console.warn(" Warning: Encryption is disabled"),e)}decryptGmailPassword(e){return this.encryptionEnabled?this.decryptField(e):e}getEncryptionStatus(){const e="true",r=e!==void 0;return{enabled:this.encryptionEnabled,environment:"production",keyAvailable:!!this.encryptionKey,environmentVariable:ghe.VUE_APP_ENABLE_ENCRYPTION,viteEncryptionValue:r?e:null,isViteSet:r,viteEncryptionEnabled:this.encryptionEnabled}}}const f0=new vhe,yhe={class:"debug-encryption"},xhe={class:"debug-header"},Ehe={class:"encryption-status"},_he={class:"status-row"},bhe={class:"encryption-toggle"},She=["checked"],Ahe={key:0,class:"warning"},The={class:"status-details"},whe={class:"status-row"},Che={class:"status-value"},Ihe={class:"status-row"},khe={class:"status-value"},Dhe={class:"status-row"},Phe={class:"status-value"},Rhe={key:0,class:"env-value-set"},Fhe={class:"env-guidance"},Nhe={key:0,class:"dev-guidance"},Ohe={key:1,class:"prod-guidance"},Mhe={key:1,class:"env-value-not-set"},Lhe={class:"status-row"},Bhe={class:"status-value"},Uhe={key:0,class:"debug-info"},$he={class:"field-name"},Vhe={class:"field-value"},Hhe={class:"value-preview"},jhe={__name:"DebugEncryption",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=t,r=be(()=>f0.getEncryptionStatus()),n=be(()=>f0.isEncryptionEnabled()),s=be(()=>r.value.environment),i=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],a=()=>{f0.setEncryptionEnabled(!n.value)},o=(u,f)=>f.split(".").reduce((h,p)=>h&&h[p],u),l=u=>{if(!e.selectedStudent)return!1;const f=o(e.selectedStudent,u);return f?f0.isValueEncrypted(f):!1},c=u=>{if(!e.selectedStudent)return"No data";const f=o(e.selectedStudent,u);if(!f)return"Empty";if(l(u))return f.substring(0,20)+"...";const h=typeof f=="object"?JSON.stringify(f):String(f);return h.length>40?h.substring(0,40)+"...":h};return(u,f)=>(B(),U("div",yhe,[d("div",xhe,[f[0]||(f[0]=d("h3",null," IEP Encryption Control",-1)),d("div",{class:Qe(["environment-badge",s.value])},Y(s.value.toUpperCase()),3)]),d("div",Ehe,[d("div",_he,[f[1]||(f[1]=d("div",{class:"status-label"},"Status:",-1)),d("div",{class:Qe(["status-value",{enabled:n.value}])},Y(n.value?" Enabled":" Disabled"),3)]),d("div",bhe,[d("label",null,[d("input",{type:"checkbox",checked:n.value,onChange:a},null,40,She),f[2]||(f[2]=we(" Toggle Encryption "))]),s.value==="production"&&!n.value?(B(),U("div",Ahe,"  Warning: Encryption disabled in production ")):xe("",!0)]),d("div",The,[d("div",whe,[f[3]||(f[3]=d("div",{class:"status-label"},"Environment:",-1)),d("div",Che,Y(s.value),1)]),d("div",Ihe,[f[4]||(f[4]=d("div",{class:"status-label"},"Encryption Key:",-1)),d("div",khe,Y(r.value.keyAvailable?" Available":" Missing"),1)]),d("div",Dhe,[f[6]||(f[6]=d("div",{class:"status-label"},"VITE_ENABLE_ENCRYPTION:",-1)),d("div",Phe,[r.value.isViteSet?(B(),U("div",Rhe,[d("span",{class:Qe(["env-value",{"true-value":r.value.viteEncryptionValue==="true","false-value":r.value.viteEncryptionValue==="false"}])},Y(r.value.viteEncryptionValue),3),d("div",Fhe,[r.value.viteEncryptionValue==="true"?(B(),U("span",Nhe," Development mode")):r.value.viteEncryptionValue==="false"?(B(),U("span",Ohe," Production mode")):xe("",!0)])])):(B(),U("div",Mhe,f[5]||(f[5]=[d("span",{class:"not-set"},"Not set",-1),d("div",{class:"env-guidance"},[d("span",{class:"default-guidance"},"Defaults to enabled (secure)")],-1)])))])]),d("div",Lhe,[f[7]||(f[7]=d("div",{class:"status-label"},"Legacy ENV:",-1)),d("div",Bhe,Y(r.value.environmentVariable||"Not set"),1)])])]),t.selectedStudent?(B(),U("div",Uhe,[f[8]||(f[8]=d("h4",null,"Selected Student Data:",-1)),(B(),U(Pe,null,je(i,h=>d("div",{class:"field-status",key:h},[d("div",$he,Y(h)+":",1),d("div",Vhe,[d("div",{class:Qe(["encryption-status",{encrypted:l(h)}])},Y(l(h)?" Encrypted":" Plain Text"),3),d("div",Hhe,Y(c(h)),1)])])),64))])):xe("",!0)]))}},mD=xt(jhe,[["__scopeId","data-v-7902f511"]]),Ghe={class:"session-debug"},Whe={class:"debug-info"},zhe={class:"info-row"},Khe={class:"info-row"},qhe={class:"info-row"},Xhe={class:"info-row"},Yhe={key:0,class:"info-row"},Qhe={class:"countdown"},Jhe={class:"debug-actions"},Zhe={class:"timeout-setter"},epe={__name:"SessionTimeoutDebug",setup(t){const{isEnabled:e,timeoutMinutes:r,showWarning:n,warningCountdown:s,updateSettings:i,resetTimeout:a}=Qy(),o=xn(),l=be(()=>o.currentUser),c=ae(!1),u=ae(30),f=ae(.17);Wt(()=>{c.value=e.value,u.value=r.value});const h=async()=>{!c.value&&!u.value&&(c.value=e.value,u.value=r.value),await i(!0,f.value),setTimeout(()=>{a()},100)},p=async()=>{await i(c.value,u.value),setTimeout(()=>{a()},100)},g=()=>{document.dispatchEvent(new Event("click"))},v=()=>{console.log(" Session Timeout Debug Info:"),console.log("- Enabled:",e.value),console.log("- Timeout Minutes:",r.value),console.log("- Warning Showing:",n.value),console.log("- Warning Countdown:",s.value),console.log("- User Logged In:",!!l.value),console.log("- Current User:",l.value)};return(y,b)=>(B(),U("div",Ghe,[d("h4",null,[Oe(q(Lv),{size:16}),b[1]||(b[1]=we(" Session Timeout Debug"))]),d("div",Whe,[d("div",zhe,[b[2]||(b[2]=d("strong",null,"Timeout Enabled:",-1)),d("span",{class:Qe({"status-active":q(e),"status-inactive":!q(e)})},[q(e)?(B(),Qt(q(yh),{key:0,size:14})):(B(),Qt(q(Am),{key:1,size:14})),we(" "+Y(q(e)?"YES":"NO"),1)],2)]),d("div",Khe,[b[3]||(b[3]=d("strong",null,"Timeout Minutes:",-1)),d("span",null,Y(q(r))+" minutes",1)]),d("div",qhe,[b[4]||(b[4]=d("strong",null,"User Logged In:",-1)),d("span",{class:Qe({"status-active":!!l.value,"status-inactive":!l.value})},[l.value?(B(),Qt(q(yh),{key:0,size:14})):(B(),Qt(q(Am),{key:1,size:14})),we(" "+Y(l.value?"YES":"NO"),1)],2)]),d("div",Xhe,[b[5]||(b[5]=d("strong",null,"Warning Showing:",-1)),d("span",{class:Qe({"status-warning":q(n),"status-inactive":!q(n)})},[q(n)?(B(),Qt(q(d7),{key:0,size:14})):(B(),Qt(q(Am),{key:1,size:14})),we(" "+Y(q(n)?"YES":"NO"),1)],2)]),q(n)?(B(),U("div",Yhe,[b[6]||(b[6]=d("strong",null,"Countdown:",-1)),d("span",Qhe,Y(q(s))+"s",1)])):xe("",!0)]),d("div",Jhe,[d("div",Zhe,[d("label",null,[b[8]||(b[8]=we(" Set Test Timeout: ")),Be(d("select",{"onUpdate:modelValue":b[0]||(b[0]=E=>f.value=E),class:"timeout-select"},b[7]||(b[7]=[Dn('<option value="0.05" data-v-76f71c90>3 seconds</option><option value="0.17" data-v-76f71c90>10 seconds</option><option value="0.5" data-v-76f71c90>30 seconds</option><option value="1" data-v-76f71c90>1 minute</option><option value="2" data-v-76f71c90>2 minutes</option><option value="5" data-v-76f71c90>5 minutes</option>',6)]),512),[[cr,f.value]])]),d("button",{onClick:h,class:"btn btn-warning"}," Apply Test Timeout ")]),d("div",{class:"admin-action-btns"},[d("button",{onClick:g,class:"admin-action-btn",style:{"min-width":"120px","max-width":"120px"}}," Trigger Activity "),d("button",{onClick:v,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Show Console Info "),d("button",{onClick:p,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Reset to Original ")])])]))}},tpe=xt(epe,[["__scopeId","data-v-76f71c90"]]),rpe={class:"security-control-center"},npe={class:"security-section"},spe={class:"security-section"},ape={class:"setting-group"},ipe={key:0,class:"setting-group"},ope={class:"setting-group"},lpe={class:"setting-group"},cpe={class:"security-section"},upe={class:"setting-group"},dpe={class:"setting-group"},fpe={class:"security-section"},hpe={class:"ip-list"},ppe={class:"ip-input"},mpe={key:0,class:"ip-table"},gpe=["onClick"],vpe={key:1,class:"no-ips"},ype={class:"security-section"},xpe={class:"alert-settings"},Epe={class:"setting-group"},_pe={class:"setting-group"},bpe={class:"alert-emails"},Spe={class:"email-input"},Ape={key:0,class:"email-list"},Tpe=["onClick"],wpe={__name:"SecurityControlCenter",props:{selectedStudent:{type:Object,default:null}},setup(t){const{isEnabled:e,timeoutMinutes:r,updateSettings:n}=Qy(),s=ae(!1),i=ae(!1),a=ae(!0),o=ae(!0),l=ae([]),c=ae(""),u=ae({unusualAccess:!0,bulkExport:!0}),f=ae([]),h=ae(""),p=async()=>{try{await n(e.value,r.value)}catch(_){console.error("Failed to toggle session timeout:",_)}},g=async()=>{try{await n(e.value,r.value)}catch(_){console.error("Failed to update session timeout:",_)}},v=()=>{console.log("Password policy updated:",s.value)},y=()=>{console.log("MFA policy updated:",i.value)},b=()=>{console.log("Export policy updated:",a.value)},E=()=>{console.log("PDF policy updated:",o.value)},x=()=>{c.value&&!l.value.includes(c.value)&&(l.value.push(c.value),c.value="")},w=_=>{l.value=l.value.filter(m=>m!==_)},P=()=>{console.log("Alert settings updated:",u.value)},R=()=>{h.value&&!f.value.includes(h.value)&&(f.value.push(h.value),h.value="")},A=_=>{f.value=f.value.filter(m=>m!==_)};return(_,m)=>(B(),U("div",rpe,[d("div",npe,[m[10]||(m[10]=d("h3",null," IEP Data Encryption",-1)),Oe(mD,{"selected-student":t.selectedStudent},null,8,["selected-student"])]),d("div",spe,[m[17]||(m[17]=d("h3",null," Session Security",-1)),Oe(tpe),d("div",ape,[d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":m[0]||(m[0]=S=>Cr(e)?e.value=S:null),onChange:p},null,544),[[Et,q(e)]]),m[11]||(m[11]=we(" Enable Auto Logout Timer "))]),m[12]||(m[12]=d("div",{class:"setting-description"}," Automatically log out users after a period of inactivity ",-1))]),q(e)?(B(),U("div",ipe,[d("label",null,[m[13]||(m[13]=we(" Auto Logout Timer (minutes): ")),Be(d("input",{type:"number","onUpdate:modelValue":m[1]||(m[1]=S=>Cr(r)?r.value=S:null),min:"5",max:"120",onChange:g},null,544),[[gt,q(r)]])]),m[14]||(m[14]=d("div",{class:"setting-description"}," Users will be automatically logged out after this period of inactivity ",-1))])):xe("",!0),d("div",ope,[d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":m[2]||(m[2]=S=>s.value=S),onChange:v},null,544),[[Et,s.value]]),m[15]||(m[15]=we(" Enforce Password Change Every 90 Days "))])]),d("div",lpe,[d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":m[3]||(m[3]=S=>i.value=S),onChange:y},null,544),[[Et,i.value]]),m[16]||(m[16]=we(" Require Two-Factor Authentication for Admin Access "))])])]),d("div",cpe,[m[20]||(m[20]=d("h3",null," Data Access Controls",-1)),d("div",upe,[d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":m[4]||(m[4]=S=>a.value=S),onChange:b},null,544),[[Et,a.value]]),m[18]||(m[18]=we(" Restrict Data Export to Admins Only "))])]),d("div",dpe,[d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":m[5]||(m[5]=S=>o.value=S),onChange:E},null,544),[[Et,o.value]]),m[19]||(m[19]=we(" Add Watermark to Exported PDFs "))])])]),d("div",fpe,[m[21]||(m[21]=d("h3",null," IP Access Control",-1)),d("div",hpe,[d("div",ppe,[Be(d("input",{type:"text","onUpdate:modelValue":m[6]||(m[6]=S=>c.value=S),placeholder:"Enter IP address or range"},null,512),[[gt,c.value]]),d("button",{onClick:x,class:"btn btn-primary"}," Add IP ")]),l.value.length?(B(),U("div",mpe,[(B(!0),U(Pe,null,je(l.value,S=>(B(),U("div",{key:S,class:"ip-row"},[d("span",null,Y(S),1),d("button",{onClick:I=>w(S),class:"btn btn-danger btn-sm"}," Remove ",8,gpe)]))),128))])):(B(),U("div",vpe," No IP restrictions configured "))])]),d("div",ype,[m[25]||(m[25]=d("h3",null," Security Alerts",-1)),d("div",xpe,[d("div",Epe,[d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":m[7]||(m[7]=S=>u.value.unusualAccess=S),onChange:P},null,544),[[Et,u.value.unusualAccess]]),m[22]||(m[22]=we(" Alert on Unusual Access Patterns "))])]),d("div",_pe,[d("label",null,[Be(d("input",{type:"checkbox","onUpdate:modelValue":m[8]||(m[8]=S=>u.value.bulkExport=S),onChange:P},null,544),[[Et,u.value.bulkExport]]),m[23]||(m[23]=we(" Alert on Bulk Data Exports "))])]),d("div",bpe,[m[24]||(m[24]=d("h4",null,"Alert Recipients:",-1)),d("div",Spe,[Be(d("input",{type:"email","onUpdate:modelValue":m[9]||(m[9]=S=>h.value=S),placeholder:"Enter email address"},null,512),[[gt,h.value]]),d("button",{onClick:R,class:"btn btn-primary"}," Add ")]),f.value.length?(B(),U("div",Ape,[(B(!0),U(Pe,null,je(f.value,S=>(B(),U("div",{key:S,class:"email-row"},[d("span",null,Y(S),1),d("button",{onClick:I=>A(S),class:"btn btn-danger btn-sm"}," Remove ",8,Tpe)]))),128))])):xe("",!0)])])])]))}},Cpe=xt(wpe,[["__scopeId","data-v-1ecfe656"]]),Ipe={class:"card-header"},kpe={class:"component-info"},Dpe={class:"component-name"},Ppe={class:"component-description"},Rpe={class:"card-body"},Fpe={class:"status-details"},Npe={class:"detail-row"},Ope={key:0,class:"detail-row"},Mpe={key:1,class:"detail-row"},Lpe={class:"detail-value"},Bpe={key:0,class:"errors-section"},Upe={class:"errors-list"},$pe={class:"card-actions"},Vpe=["disabled"],Hpe={key:1,class:"details-section"},jpe={class:"details-content"},Gpe={class:"detail-item"},Wpe={class:"detail-item"},zpe={key:0,class:"detail-item"},Kpe={class:"detail-item"},qpe={key:0,class:"loading-overlay"},Xpe={__name:"ComponentHealthCard",props:{component:{type:Object,required:!0}},emits:["test","toggle"],setup(t){const e=t,r=ae(!1),n=ae(!1);Vt(()=>e.component.status,(u,f)=>{f==="checking"&&u!=="checking"?n.value=!1:u==="checking"&&(n.value=!0)},{immediate:!0});const s=u=>{switch(u){case"operational":return"";case"degraded":return"";case"down":return"";case"disabled":return"";case"checking":return"";default:return""}},i=u=>{switch(u){case"operational":return"Healthy";case"degraded":return"Issues";case"down":return"Failed";case"disabled":return"Disabled";case"checking":return"Testing...";default:return"Unknown"}},a=u=>u<100?"latency-good":u<500?"latency-ok":"latency-poor",o=u=>u?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(u):"Never",l=u=>u?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(u):"Never",c=u=>u.toLowerCase().replace(/\s+/g,"-");return(u,f)=>(B(),U("div",{class:Qe(["health-card",[t.component.status,{disabled:!t.component.enabled}]])},[d("div",Ipe,[d("div",kpe,[d("h4",Dpe,Y(t.component.name),1),d("p",Ppe,Y(t.component.description),1)]),d("div",{class:Qe(["status-indicator",t.component.status])},Y(s(t.component.status)),3)]),d("div",Rpe,[d("div",Fpe,[d("div",Npe,[f[3]||(f[3]=d("span",{class:"detail-label"},"Status:",-1)),d("span",{class:Qe(["detail-value",t.component.status])},Y(i(t.component.status)),3)]),t.component.latency!==null?(B(),U("div",Ope,[f[4]||(f[4]=d("span",{class:"detail-label"},"Latency:",-1)),d("span",{class:Qe(["detail-value",a(t.component.latency)])},Y(t.component.latency)+"ms ",3)])):xe("",!0),t.component.lastCheck?(B(),U("div",Mpe,[f[5]||(f[5]=d("span",{class:"detail-label"},"Last Check:",-1)),d("span",Lpe,Y(o(t.component.lastCheck)),1)])):xe("",!0)]),t.component.errors&&t.component.errors.length?(B(),U("div",Bpe,[f[6]||(f[6]=d("div",{class:"errors-header"}," Issues:",-1)),d("ul",Upe,[(B(!0),U(Pe,null,je(t.component.errors,h=>(B(),U("li",{key:h,class:"error-item"},Y(h),1))),128))])])):xe("",!0),d("div",$pe,[d("button",{onClick:f[0]||(f[0]=h=>u.$emit("test",t.component)),disabled:n.value,class:"btn btn-primary btn-sm"},Y(n.value?"":"")+" Test ",9,Vpe),d("button",{onClick:f[1]||(f[1]=h=>u.$emit("toggle",t.component)),class:Qe(["btn btn-sm",t.component.enabled?"btn-warning":"btn-success"])},Y(t.component.enabled?" Disable":" Enable"),3),d("button",{onClick:f[2]||(f[2]=h=>r.value=!r.value),class:"btn btn-secondary btn-sm"},Y(r.value?" Less":" More"),1)]),r.value?(B(),U("div",Hpe,[d("div",jpe,[d("div",Gpe,[f[7]||(f[7]=d("strong",null,"Test Function:",-1)),we(" "+Y(t.component.testFunction||"N/A"),1)]),d("div",Wpe,[f[8]||(f[8]=d("strong",null,"Enabled:",-1)),we(" "+Y(t.component.enabled?"Yes":"No"),1)]),t.component.lastCheck?(B(),U("div",zpe,[f[9]||(f[9]=d("strong",null,"Last Test:",-1)),we(" "+Y(l(t.component.lastCheck)),1)])):xe("",!0),d("div",Kpe,[f[10]||(f[10]=d("strong",null,"Component ID:",-1)),we(" "+Y(c(t.component.name)),1)])])])):xe("",!0)]),n.value?(B(),U("div",qpe,f[11]||(f[11]=[d("div",{class:"loading-spinner"},"",-1),d("div",{class:"loading-text"},"Testing component...",-1)]))):xe("",!0)],2))}},qS=xt(Xpe,[["__scopeId","data-v-18cc0437"]]),Ype={class:"health-dashboard"},Qpe={class:"dashboard-header"},Jpe={class:"header-controls"},Zpe=["disabled"],eme={key:0,class:"last-update"},tme={class:"status-overview"},rme={class:"status-icon"},nme={class:"status-info"},sme={class:"status-details"},ame={class:"component-categories"},ime={class:"category-section"},ome={class:"components-grid"},lme={class:"category-section"},cme={class:"components-grid"},ume={class:"quick-actions"},dme={class:"admin-action-btns"},fme=["disabled"],hme={class:"logs-section"},pme={class:"logs-container"},mme={class:"log-time"},gme={class:"log-component"},vme={class:"log-message"},yme={key:0,class:"no-logs"},xme={class:"modal-header"},Eme={class:"modal-content"},_me={__name:"ComponentHealthDashboard",setup(t){const e=ae(!1),r=ae(null),n=ae(!1),s=ae({}),i=ae([]),a=ae(!1),o=ae([{name:"Firebase Auth",status:"operational",description:"User authentication service",lastCheck:new Date,enabled:!0,latency:150,errors:[]},{name:"Firestore Database",status:"operational",description:"Main database service",lastCheck:new Date,enabled:!0,latency:200,errors:[]},{name:"Firebase Storage",status:"operational",description:"File storage service",lastCheck:new Date,enabled:!0,latency:180,errors:[]},{name:"Cloud Functions",status:"operational",description:"Server-side functions",lastCheck:new Date,enabled:!0,latency:300,errors:[]}]),l=ae([{name:"Session Timeout",status:"operational",description:"Automatic user logout system",lastCheck:new Date,enabled:!0,latency:50,errors:[]},{name:"IEP Encryption",status:"operational",description:"Sensitive data encryption",lastCheck:new Date,enabled:!0,latency:80,errors:[]},{name:"Access Control",status:"operational",description:"Role-based permissions",lastCheck:new Date,enabled:!0,latency:120,errors:[]},{name:"Audit Logging",status:"operational",description:"Activity tracking system",lastCheck:new Date,enabled:!0,latency:90,errors:[]}]),c=be(()=>[...o.value,...l.value]),u=be(()=>c.value.length),f=be(()=>c.value.filter(_=>_.status==="operational").length),h=be(()=>{const _=c.value.map(m=>m.status);return _.every(m=>m==="operational"||m==="disabled")?"operational":_.some(m=>m==="down"||m==="error")?"down":"degraded"}),p=_=>{switch(_){case"operational":return"";case"degraded":return"";case"down":return"";case"disabled":return"";default:return""}},g=_=>{switch(_){case"operational":return"All systems operational";case"degraded":return"Some issues detected";case"down":return"Critical issues found";case"checking":return"Running diagnostics...";default:return"Unknown status"}},v=_=>_?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(_):"",y=(_,m,S="info")=>{i.value.unshift({id:Date.now()+Math.random(),timestamp:new Date,component:_,message:m,type:S}),i.value.length>20&&(i.value=i.value.slice(0,20))},b=async _=>{y(_.name,"Starting component test...","info");try{const m=performance.now();await new Promise(k=>setTimeout(k,Math.random()*1e3+500));const S=Math.round(performance.now()-m),I=c.value.find(k=>k.name===_.name);I&&(I.status=Math.random()>.1?"operational":"degraded",I.latency=S,I.lastCheck=new Date,I.errors=I.status==="degraded"?["Minor performance issue detected"]:[]),y(_.name,`Test completed - ${I.status} (${S}ms)`,I.status==="operational"?"success":"warning"),s.value={component:_.name,data:{status:I.status,latency:`${S}ms`,timestamp:new Date().toISOString(),details:I.status==="operational"?"All checks passed successfully":"Minor performance issues detected"}},n.value=!0}catch(m){y(_.name,`Test failed: ${m.message}`,"error")}},E=_=>{const m=c.value.find(S=>S.name===_.name);m&&(m.enabled=!m.enabled,m.status=m.enabled?"operational":"disabled",y(_.name,`Component ${m.enabled?"enabled":"disabled"}`,"info"))},x=async()=>{if(!e.value){e.value=!0,r.value=new Date,y("System","Starting full system refresh...","info");try{const _=c.value.filter(m=>m.enabled).map(m=>b(m));await Promise.all(_),y("System","Full system refresh completed","success")}catch(_){y("System",`Refresh failed: ${_.message}`,"error")}finally{e.value=!1}}},w=async()=>{a.value=!0,y("System","Starting comprehensive system test...","info");try{await x(),y("System","Comprehensive system test completed","success")}catch(_){y("System",`System test failed: ${_.message}`,"error")}finally{a.value=!1}},P=()=>{const _={timestamp:new Date().toISOString(),overallStatus:h.value,components:c.value.map(k=>({name:k.name,status:k.status,enabled:k.enabled,latency:k.latency,lastCheck:k.lastCheck,errors:k.errors})),logs:i.value.slice(0,10)},m=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),S=URL.createObjectURL(m),I=document.createElement("a");I.href=S,I.download=`health-report-${Date.now()}.json`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(S),y("System","Health report exported","info")},R=()=>{i.value=[]},A=()=>{n.value=!1,s.value={}};return Wt(()=>{y("System","Component Health Dashboard initialized","success")}),(_,m)=>(B(),U("div",Ype,[d("div",Qpe,[m[1]||(m[1]=d("h2",null," Component Health Dashboard",-1)),d("div",Jpe,[d("button",{onClick:x,disabled:e.value,class:"btn btn-primary"},Y(e.value?" Refreshing...":" Refresh All"),9,Zpe),r.value?(B(),U("span",eme," Last update: "+Y(v(r.value)),1)):xe("",!0)])]),d("div",tme,[d("div",{class:Qe(["status-card overall",h.value])},[d("div",rme,Y(p(h.value)),1),d("div",nme,[m[2]||(m[2]=d("h3",null,"System Status",-1)),d("p",null,Y(g(h.value)),1),d("div",sme,Y(f.value)+"/"+Y(u.value)+" components healthy ",1)])],2)]),d("div",ame,[d("div",ime,[m[3]||(m[3]=d("h3",null," Core Services",-1)),d("div",ome,[(B(!0),U(Pe,null,je(o.value,S=>(B(),Qt(qS,{key:S.name,component:S,onTest:b,onToggle:E},null,8,["component"]))),128))])]),d("div",lme,[m[4]||(m[4]=d("h3",null," Authentication & Security",-1)),d("div",cme,[(B(!0),U(Pe,null,je(l.value,S=>(B(),Qt(qS,{key:S.name,component:S,onTest:b,onToggle:E},null,8,["component"]))),128))])])]),d("div",ume,[m[5]||(m[5]=d("h3",null," Quick Tests",-1)),d("div",dme,[d("button",{onClick:w,disabled:a.value,class:"admin-action-btn",style:{"min-width":"160px","max-width":"160px"}},Y(a.value?" Testing...":" Full System Test"),9,fme),d("button",{onClick:P,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},"  Export Report ")])]),d("div",hme,[d("div",{class:"logs-header"},[m[6]||(m[6]=d("h3",null," Component Activity Logs",-1)),d("div",{class:"log-controls"},[d("button",{onClick:R,class:"btn btn-sm btn-secondary"},"Clear")])]),d("div",pme,[(B(!0),U(Pe,null,je(i.value,S=>(B(),U("div",{key:S.id,class:Qe(["log-entry",S.type])},[d("span",mme,Y(v(S.timestamp)),1),d("span",gme,Y(S.component),1),d("span",vme,Y(S.message),1)],2))),128)),i.value.length===0?(B(),U("div",yme,' No activity logs yet. Click "Refresh All" to start monitoring. ')):xe("",!0)])]),n.value?(B(),U("div",{key:0,class:"test-modal-overlay",onClick:A},[d("div",{class:"test-modal",onClick:m[0]||(m[0]=Xr(()=>{},["stop"]))},[d("div",xme,[d("h3",null,Y(s.value.component)+" Test Results",1),d("button",{onClick:A,class:"btn btn-sm btn-secondary"},"")]),d("div",Eme,[d("pre",null,Y(JSON.stringify(s.value.data,null,2)),1)])])])):xe("",!0)]))}},bme=xt(_me,[["__scopeId","data-v-106cd980"]]),Sme={class:"admin-permissions-matrix"},Ame={class:"matrix-container"},Tme={key:0,class:"loading-state"},wme={key:1,class:"permissions-table"},Cme={key:0},Ime={key:0,class:"permission-row"},kme={class:"page-info"},Dme={class:"page-name"},Pme={class:"page-category"},Rme={class:"page-description"},Fme={class:"permission-cell"},Nme=["checked","disabled","onChange"],Ome={class:"permission-cell"},Mme=["checked","disabled","onChange"],Lme={class:"permission-cell"},Bme=["checked","disabled","onChange"],Ume={class:"matrix-actions"},$me={class:"bulk-actions"},Vme={class:"bulk-buttons"},Hme={key:0,class:"save-status"},jme={__name:"AdminPermissionsMatrix",setup(t){const e=ae(null),r=ae(!0),n=be(()=>!r.value&&s.value.length>0&&Object.keys(i).length>0),s=ae([{key:"dashboard",label:"Dashboard",category:"Dashboard",description:"Main admin overview and statistics"},{key:"usersAdd",label:"Add Users",category:"User Management",description:"Create new user accounts"},{key:"usersEdit",label:"Manage Users",category:"User Management",description:"Edit existing user accounts"},{key:"students",label:"Students",category:"Student Management",description:"View and manage student records"},{key:"addStudents",label:"Add Students",category:"Student Management",description:"Bulk import student data"},{key:"aide-assignment",label:"Aide Assignment",category:"Aide Management",description:"Assign aides to students"},{key:"aide-schedule",label:"Aide Schedule",category:"Aide Management",description:"Manage aide schedules"},{key:"time-table",label:"Time Table",category:"Aide Management",description:"Configure school time periods"},{key:"seis",label:"SEIS Import",category:"Data Integration",description:"Import SEIS student data"},{key:"aeries",label:"Aeries API & Import",category:"Data Integration",description:"Connect to Aeries SIS"},{key:"testing-links",label:"Testing Links",category:"Data Integration",description:"Google Sheets integration for testing"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"Data Integration",description:"Manage teacher feedback system"},{key:"backup-restore",label:"Backup & Restore",category:"Data Integration",description:"Database backup and restore"},{key:"settings",label:"App Settings",category:"Settings",description:"Global application settings"},{key:"delete-all-users",label:"Delete All Users",category:"Bulk Actions",description:"Mass deletion of user accounts (dangerous operation)"},{key:"delete-all-students",label:"Delete All Students",category:"Bulk Actions",description:"Mass deletion of student records (dangerous operation)"},{key:"permissions",label:"Admin Panel Permissions",category:"System",description:"User role and permission management"},{key:"audit-logs",label:"Audit Logs",category:"System",description:"View and search system audit logs"},{key:"iep-security",label:"IEP Security",category:"System",description:"IEP data encryption and security"},{key:"security",label:"Security Controls",category:"System",description:"Security monitoring and controls"},{key:"component-health",label:"Component Debug",category:"System",description:"Component health and debugging"},{key:"app-settings-testing",label:"App Settings Testing",category:"System",description:"App settings testing and debugging tools"}]),i=Fs({}),a={school_admin:{dashboard:!0,usersAdd:!0,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!1,aeries:!1,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!0,settings:!0,"delete-all-users":!0,"delete-all-students":!0,permissions:!1,"audit-logs":!1,"iep-security":!1,security:!1,"component-health":!1,"app-settings-testing":!0},admin_504:{dashboard:!0,usersAdd:!0,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!1,aeries:!1,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!1,settings:!1,"delete-all-users":!1,"delete-all-students":!1,permissions:!1,"audit-logs":!1,"iep-security":!1,security:!1,"component-health":!1,"app-settings-testing":!0},sped_chair:{dashboard:!0,usersAdd:!0,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!1,aeries:!1,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!1,settings:!1,"delete-all-users":!1,"delete-all-students":!1,permissions:!1,"audit-logs":!1,"iep-security":!1,security:!1,"component-health":!1,"app-settings-testing":!0}},o=()=>{if(!s.value||s.value.length===0){console.warn("adminPages not initialized yet");return}s.value.forEach(y=>{y&&y.key&&(i[y.key]={school_admin:a.school_admin[y.key]||!1,admin_504:a.admin_504[y.key]||!1,sped_chair:a.sped_chair[y.key]||!1})})},l=async()=>{try{const y=Ze(qe,"app_settings","admin_panel_permissions"),b=await sr(y);if(b.exists()){const E=b.data();s.value.forEach(x=>{x&&x.key&&E[x.key]&&(i[x.key]={school_admin:E[x.key].school_admin??a.school_admin[x.key],admin_504:E[x.key].admin_504??a.admin_504[x.key],sped_chair:E[x.key].sped_chair??a.sped_chair[x.key]})}),v("Permissions loaded successfully","success")}else o(),v("Using default permissions","info")}catch(y){console.error("Error loading permissions:",y),v("Error loading permissions","error"),o()}finally{r.value=!1}},c=async()=>{try{const y=Ze(qe,"app_settings","admin_panel_permissions");await jt(y,i),v("Permissions saved successfully","success")}catch(y){console.error("Error saving permissions:",y),v("Error saving permissions","error")}},u=async(y,b,E)=>{i[y]&&(i[y][b]=E,await c())},f=async y=>{s.value.forEach(b=>{b&&b.key&&i[b.key]&&(i[b.key][y]=!0)}),await c(),v(`All permissions granted to ${y}`,"success")},h=async()=>{s.value.forEach(y=>{y&&y.key&&i[y.key]&&(i[y.key].school_admin=!1,i[y.key].admin_504=!1,i[y.key].sped_chair=!1)}),await c(),v("All permissions revoked","warning")},p=async()=>{o(),await c(),v("Permissions reset to defaults","info")},g=(y,b)=>["permissions","iep-security","security","component-health"].includes(y)?!0:["delete-all-users","delete-all-students"].includes(y)?b!=="school_admin":b==="admin_504"?["settings"].includes(y):b==="sped_chair"?["settings"].includes(y):!1,v=(y,b)=>{e.value={message:y,type:b},setTimeout(()=>{e.value=null},3e3)};return Wt(async()=>{await l()}),(y,b)=>(B(),U("div",Sme,[b[9]||(b[9]=d("div",{class:"matrix-header"},[d("h2",null," Admin Panel Permissions Matrix"),d("p",{class:"matrix-description"}," Control which admin panel pages different admin roles can access. Changes are saved automatically. ")],-1)),d("div",Ame,[r.value?(B(),U("div",Tme,b[3]||(b[3]=[d("p",null,"Loading permissions...",-1)]))):(B(),U("table",wme,[b[7]||(b[7]=d("thead",null,[d("tr",null,[d("th",{class:"page-column"},"Admin Panel Page"),d("th",{class:"role-column"},"School Admin"),d("th",{class:"role-column"},"504 Coordinator"),d("th",{class:"role-column"},"SPED Chair")])],-1)),n.value?(B(),U("tbody",Cme,[(B(!0),U(Pe,null,je(s.value,E=>(B(),U(Pe,{key:(E==null?void 0:E.key)||"unknown"},[E&&E.key&&i[E.key]?(B(),U("tr",Ime,[d("td",kme,[d("div",Dme,Y(E.label),1),d("div",Pme,Y(E.category),1),d("div",Rme,Y(E.description),1)]),d("td",Fme,[d("label",{class:Qe(["permission-toggle",{disabled:g(E.key,"school_admin")}])},[d("input",{type:"checkbox",checked:i[E.key]&&i[E.key].school_admin,disabled:g(E.key,"school_admin"),onChange:x=>u(E.key,"school_admin",x.target.checked)},null,40,Nme),b[4]||(b[4]=d("span",{class:"toggle-slider"},null,-1))],2)]),d("td",Ome,[d("label",{class:Qe(["permission-toggle",{disabled:g(E.key,"admin_504")}])},[d("input",{type:"checkbox",checked:i[E.key]&&i[E.key].admin_504,disabled:g(E.key,"admin_504"),onChange:x=>u(E.key,"admin_504",x.target.checked)},null,40,Mme),b[5]||(b[5]=d("span",{class:"toggle-slider"},null,-1))],2)]),d("td",Lme,[d("label",{class:Qe(["permission-toggle",{disabled:g(E.key,"sped_chair")}])},[d("input",{type:"checkbox",checked:i[E.key]&&i[E.key].sped_chair,disabled:g(E.key,"sped_chair"),onChange:x=>u(E.key,"sped_chair",x.target.checked)},null,40,Bme),b[6]||(b[6]=d("span",{class:"toggle-slider"},null,-1))],2)])])):xe("",!0)],64))),128))])):xe("",!0)]))]),d("div",Ume,[d("div",$me,[b[8]||(b[8]=d("h3",null,"Bulk Actions",-1)),d("div",Vme,[d("button",{onClick:b[0]||(b[0]=E=>f("school_admin")),class:"btn btn-success"}," Grant All to School Admin "),d("button",{onClick:b[1]||(b[1]=E=>f("admin_504")),class:"btn btn-success"}," Grant All to 504 Coordinator "),d("button",{onClick:b[2]||(b[2]=E=>f("sped_chair")),class:"btn btn-success"}," Grant All to SPED Chair "),d("button",{onClick:h,class:"btn btn-warning"}," Revoke All Permissions "),d("button",{onClick:p,class:"btn btn-secondary"}," Reset to Defaults ")])])]),e.value?(B(),U("div",Hme,[d("div",{class:Qe(["status-message",e.value.type])},Y(e.value.message),3)])):xe("",!0)]))}},Gme=xt(jme,[["__scopeId","data-v-be29f1ae"]]),Wme={class:"theme-manager"},zme={key:0,class:"loading-state"},Kme={key:1,class:"error-state"},qme={class:"error-message"},Xme={key:2,class:"theme-editor"},Yme={class:"default-themes"},Qme={class:"theme-presets"},Jme=["onClick"],Zme={class:"theme-preview-colors"},ege={class:"theme-info"},tge={class:"theme-actions"},rge=["disabled"],nge=["disabled"],sge={class:"theme-sections"},age={class:"theme-section"},ige={class:"enhanced-color-grid"},oge={class:"color-input"},lge={class:"color-picker-wrapper"},cge={class:"color-input"},uge={class:"color-picker-wrapper"},dge={class:"color-input"},fge={class:"color-picker-wrapper"},hge={class:"color-input"},pge={class:"color-picker-wrapper"},mge={class:"color-input"},gge={class:"color-picker-wrapper"},vge={class:"color-input"},yge={class:"color-picker-wrapper"},xge={class:"theme-section"},Ege={class:"typography-grid"},_ge={class:"option-group"},bge={class:"option-group"},Sge={class:"option-group"},Age={class:"theme-section"},Tge={class:"style-options-grid"},wge={class:"option-group"},Cge={class:"option-group"},Ige={class:"option-group"},kge={class:"theme-section"},Dge={class:"student-preview-container"},Pge={class:"mockup-header"},Rge={class:"mockup-table"},Fge={class:"mockup-table-row"},Nge={class:"mockup-cell"},Oge={class:"mockup-table-row"},Mge={class:"mockup-cell"},Lge={__name:"ThemeManager",setup(t){const{currentTheme:e,loading:r,error:n,loadTheme:s,saveTheme:i,resetTheme:a,updateThemeProperty:o,DEFAULT_THEME:l}=iI(),c=[{name:"Professional Blue",description:"Clean, accessible blue theme for professional use",primaryColor:"#1976d2",primaryHover:"#1565c0",primaryLight:"#e3f2fd",primaryDark:"#0d47a1",bgPrimary:"#f8f9fa",bgSecondary:"#ffffff",bgTertiary:"#f1f3f4",textPrimary:"#212529",textSecondary:"#495057",textMuted:"#6c757d",textInverse:"#ffffff",headerTextColor:"#1a202c",accentColor:"#e3f2fd",secondaryColor:"#6c757d",secondaryHover:"#545b62",successColor:"#28a745",warningColor:"#ffc107",errorColor:"#dc3545",infoColor:"#17a2b8",borderColor:"#dee2e6",borderStyle:"rounded",shadowStyle:"subtle",contrastLevel:"standard",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",fontFamilyBase:"'Inter', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1rem",lineHeight:"1.5"},{name:"Educational Orange",description:"Warm, professional orange theme optimized for readability",primaryColor:"#e65100",primaryHover:"#bf360c",primaryLight:"#fff3e0",primaryDark:"#bf360c",bgPrimary:"#fafafa",bgSecondary:"#ffffff",bgTertiary:"#f5f5f5",textPrimary:"#212121",textSecondary:"#424242",textMuted:"#757575",textInverse:"#ffffff",headerTextColor:"#bf360c",accentColor:"#ffcc80",secondaryColor:"#424242",secondaryHover:"#212121",successColor:"#2e7d32",warningColor:"#f57c00",errorColor:"#d32f2f",infoColor:"#1976d2",borderColor:"#e0e0e0",borderStyle:"rounded",shadowStyle:"subtle",contrastLevel:"high",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",fontFamilyBase:"'Source Sans Pro', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1rem",lineHeight:"1.6"},{name:"Accessible Green",description:"Professional green theme with excellent readability",primaryColor:"#2e7d32",primaryHover:"#1b5e20",primaryLight:"#e8f5e8",primaryDark:"#1b5e20",bgPrimary:"#f8f9fa",bgSecondary:"#ffffff",bgTertiary:"#f1f3f4",textPrimary:"#1b5e20",textSecondary:"#2e7d32",textMuted:"#558b2f",textInverse:"#ffffff",headerTextColor:"#1b5e20",accentColor:"#a5d6a7",secondaryColor:"#424242",secondaryHover:"#212121",successColor:"#4caf50",warningColor:"#f57c00",errorColor:"#d32f2f",infoColor:"#1976d2",borderColor:"#c8e6c9",borderStyle:"rounded",shadowStyle:"subtle",contrastLevel:"high",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",fontFamilyBase:"'Open Sans', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1rem",lineHeight:"1.6"},{name:"Professional Dark",description:"High-contrast dark theme for reduced eye strain",primaryColor:"#bb86fc",primaryHover:"#9c27b0",primaryLight:"#f3e5f5",primaryDark:"#6a1b9a",bgPrimary:"#121212",bgSecondary:"#1e1e1e",bgTertiary:"#2d2d2d",textPrimary:"#ffffff",textSecondary:"#e0e0e0",textMuted:"#bdbdbd",textInverse:"#000000",headerTextColor:"#bb86fc",accentColor:"#424242",secondaryColor:"#616161",secondaryHover:"#424242",successColor:"#4caf50",warningColor:"#ff9800",errorColor:"#f44336",infoColor:"#2196f3",borderColor:"#424242",borderStyle:"rounded",shadowStyle:"medium",contrastLevel:"maximum",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",fontFamilyBase:"'Roboto', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1rem",lineHeight:"1.6"},{name:"Corporate Navy",description:"Professional navy blue theme for corporate environments",primaryColor:"#1565c0",primaryHover:"#0d47a1",primaryLight:"#e3f2fd",primaryDark:"#0d47a1",bgPrimary:"#f8f9fa",bgSecondary:"#ffffff",bgTertiary:"#f1f3f4",textPrimary:"#0d47a1",textSecondary:"#1565c0",textMuted:"#1976d2",textInverse:"#ffffff",headerTextColor:"#0d47a1",accentColor:"#bbdefb",secondaryColor:"#424242",secondaryHover:"#212121",successColor:"#2e7d32",warningColor:"#f57c00",errorColor:"#d32f2f",infoColor:"#1976d2",borderColor:"#e1f5fe",borderStyle:"sharp",shadowStyle:"subtle",contrastLevel:"high",borderRadiusSm:"2px",borderRadiusMd:"4px",borderRadiusLg:"6px",borderRadiusXl:"8px",fontFamilyBase:"'Source Sans Pro', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1rem",lineHeight:"1.5"},{name:"High Contrast",description:"Maximum accessibility theme with high contrast ratios",primaryColor:"#000000",primaryHover:"#212121",primaryLight:"#f5f5f5",primaryDark:"#000000",bgPrimary:"#ffffff",bgSecondary:"#ffffff",bgTertiary:"#f8f9fa",textPrimary:"#000000",textSecondary:"#212121",textMuted:"#424242",textInverse:"#ffffff",headerTextColor:"#000000",accentColor:"#e0e0e0",secondaryColor:"#424242",secondaryHover:"#212121",successColor:"#1b5e20",warningColor:"#e65100",errorColor:"#b71c1c",infoColor:"#0d47a1",borderColor:"#000000",borderStyle:"sharp",shadowStyle:"bold",contrastLevel:"maximum",borderRadiusSm:"0px",borderRadiusMd:"2px",borderRadiusLg:"4px",borderRadiusXl:"6px",fontFamilyBase:"'Roboto', 'Segoe UI', 'Arial', sans-serif",fontSizeBase:"1.125rem",lineHeight:"1.7"}],u=Fs({...l}),f=ae(!1),h=ae(""),p=ae(!1),g=ae(null);Vt(e,_=>{Object.assign(u,_)},{deep:!0});const v=(_,m=!1)=>{h.value=_,p.value=m,setTimeout(()=>{h.value="",p.value=!1},5e3)},y=async()=>{f.value=!0;try{await i(u),v("Theme saved successfully!")}catch(_){v("Error saving theme: "+_.message,!0)}finally{f.value=!1}},b=async()=>{if(confirm("Are you sure you want to reset the theme to defaults? This cannot be undone."))try{await a(),v("Theme reset to defaults")}catch(_){v("Error resetting theme: "+_.message,!0)}},E=_=>{Object.assign(u,_),Object.keys(_).forEach(m=>{m!=="name"&&m!=="description"&&o(m,_[m])}),v(`Applied ${_.name} theme`)},x=_=>_.primaryColor===u.primaryColor&&_.bgPrimary===u.bgPrimary&&_.textPrimary===u.textPrimary,w=_=>{const S={rounded:{sm:"4px",md:"6px",lg:"8px",xl:"12px"},sharp:{sm:"2px",md:"4px",lg:"6px",xl:"8px"},"extra-rounded":{sm:"8px",md:"12px",lg:"16px",xl:"20px"}}[_];S&&(o("borderRadiusSm",S.sm),o("borderRadiusMd",S.md),o("borderRadiusLg",S.lg),o("borderRadiusXl",S.xl))},P=_=>{const S={none:{sm:"none",md:"none",lg:"none",xl:"none"},subtle:{sm:"0 1px 2px rgba(0, 0, 0, 0.05)",md:"0 2px 4px rgba(0, 0, 0, 0.1)",lg:"0 4px 6px rgba(0, 0, 0, 0.1)",xl:"0 4px 20px rgba(0, 0, 0, 0.15)"},medium:{sm:"0 2px 4px rgba(0, 0, 0, 0.1)",md:"0 4px 8px rgba(0, 0, 0, 0.15)",lg:"0 6px 12px rgba(0, 0, 0, 0.2)",xl:"0 8px 24px rgba(0, 0, 0, 0.25)"},bold:{sm:"0 4px 8px rgba(0, 0, 0, 0.15)",md:"0 8px 16px rgba(0, 0, 0, 0.2)",lg:"0 12px 24px rgba(0, 0, 0, 0.25)",xl:"0 16px 32px rgba(0, 0, 0, 0.3)"}}[_];S&&(o("shadowSm",S.sm),o("shadowMd",S.md),o("shadowLg",S.lg),o("shadowXl",S.xl))},R=_=>{o("fontSizeBase",_);const m=parseFloat(_),S=_.replace(/[\d.]/g,"");o("fontSizeXs",`${(m*.75).toFixed(3)}${S}`),o("fontSizeSm",`${(m*.875).toFixed(3)}${S}`),o("fontSizeLg",`${(m*1.125).toFixed(3)}${S}`),o("fontSizeXl",`${(m*1.25).toFixed(3)}${S}`),o("fontSizeXxl",`${(m*1.5).toFixed(3)}${S}`)},A=_=>{o("contrastLevel",_),_==="high"?u.textPrimary.includes("#")&&(o("textPrimary","#000000"),o("textSecondary","#212121")):_==="maximum"&&(o("textPrimary","#000000"),o("textSecondary","#000000"),o("bgPrimary","#ffffff"),o("bgSecondary","#ffffff"))};return Wt(async()=>{try{await s()}catch(_){console.error("Error loading theme:",_)}}),(_,m)=>(B(),U("div",Wme,[m[72]||(m[72]=d("div",{class:"theme-header"},[d("h2",null," Student Page Theme Customization"),d("p",{class:"theme-description"}," Customize the visual appearance of the student page. Changes are applied in real-time and saved to the database. ")],-1)),q(r)?(B(),U("div",zme,m[38]||(m[38]=[d("div",{class:"spinner"},null,-1),d("p",null,"Loading theme settings...",-1)]))):q(n)?(B(),U("div",Kme,[d("p",qme,Y(q(n)),1),d("button",{onClick:m[0]||(m[0]=(...S)=>q(s)&&q(s)(...S)),class:"btn btn-primary"},"Retry")])):(B(),U("div",Xme,[d("div",Yme,[m[39]||(m[39]=d("h3",null," Quick Theme Selection",-1)),d("div",Qme,[(B(),U(Pe,null,je(c,S=>d("div",{key:S.name,onClick:I=>E(S),class:Qe(["theme-preset",{active:x(S)}])},[d("div",Zme,[d("div",{class:"color-dot",style:Nr({backgroundColor:S.primaryColor})},null,4),d("div",{class:"color-dot",style:Nr({backgroundColor:S.bgPrimary})},null,4),d("div",{class:"color-dot",style:Nr({backgroundColor:S.textPrimary})},null,4)]),d("div",ege,[d("h4",null,Y(S.name),1),d("p",null,Y(S.description),1)])],10,Jme)),64))])]),d("div",tge,[d("button",{onClick:y,disabled:f.value,class:"btn btn-primary"},Y(f.value?" Saving...":" Save Theme"),9,rge),d("button",{onClick:b,disabled:f.value,class:"btn btn-warning"},"  Reset to Default ",8,nge)]),h.value?(B(),U("div",{key:0,class:Qe(["status-message",{error:p.value,success:!p.value}])},Y(h.value),3)):xe("",!0),d("div",sge,[d("section",age,[m[46]||(m[46]=d("h3",null," Essential Student Page Colors",-1)),d("div",ige,[d("div",oge,[m[40]||(m[40]=d("label",null,"Primary Color (Buttons & Links)",-1)),d("div",lge,[Be(d("input",{type:"color","onUpdate:modelValue":m[1]||(m[1]=S=>u.primaryColor=S),onInput:m[2]||(m[2]=S=>q(o)("primaryColor",S.target.value)),class:"color-picker"},null,544),[[gt,u.primaryColor]]),Be(d("input",{type:"text","onUpdate:modelValue":m[3]||(m[3]=S=>u.primaryColor=S),onInput:m[4]||(m[4]=S=>q(o)("primaryColor",S.target.value)),class:"color-text",placeholder:"#1976d2"},null,544),[[gt,u.primaryColor]])])]),d("div",cge,[m[41]||(m[41]=d("label",null,"Header Text Color",-1)),d("div",uge,[Be(d("input",{type:"color","onUpdate:modelValue":m[5]||(m[5]=S=>u.headerTextColor=S),onInput:m[6]||(m[6]=S=>q(o)("headerTextColor",S.target.value)),class:"color-picker"},null,544),[[gt,u.headerTextColor]]),Be(d("input",{type:"text","onUpdate:modelValue":m[7]||(m[7]=S=>u.headerTextColor=S),onInput:m[8]||(m[8]=S=>q(o)("headerTextColor",S.target.value)),class:"color-text",placeholder:"#1a1a1a"},null,544),[[gt,u.headerTextColor]])])]),d("div",dge,[m[42]||(m[42]=d("label",null,"Background Color",-1)),d("div",fge,[Be(d("input",{type:"color","onUpdate:modelValue":m[9]||(m[9]=S=>u.bgPrimary=S),onInput:m[10]||(m[10]=S=>q(o)("bgPrimary",S.target.value)),class:"color-picker"},null,544),[[gt,u.bgPrimary]]),Be(d("input",{type:"text","onUpdate:modelValue":m[11]||(m[11]=S=>u.bgPrimary=S),onInput:m[12]||(m[12]=S=>q(o)("bgPrimary",S.target.value)),class:"color-text",placeholder:"#f4f6f9"},null,544),[[gt,u.bgPrimary]])])]),d("div",hge,[m[43]||(m[43]=d("label",null,"Text Color",-1)),d("div",pge,[Be(d("input",{type:"color","onUpdate:modelValue":m[13]||(m[13]=S=>u.textPrimary=S),onInput:m[14]||(m[14]=S=>q(o)("textPrimary",S.target.value)),class:"color-picker"},null,544),[[gt,u.textPrimary]]),Be(d("input",{type:"text","onUpdate:modelValue":m[15]||(m[15]=S=>u.textPrimary=S),onInput:m[16]||(m[16]=S=>q(o)("textPrimary",S.target.value)),class:"color-text",placeholder:"#333333"},null,544),[[gt,u.textPrimary]])])]),d("div",mge,[m[44]||(m[44]=d("label",null,"Accent Color (Service Pills)",-1)),d("div",gge,[Be(d("input",{type:"color","onUpdate:modelValue":m[17]||(m[17]=S=>u.accentColor=S),onInput:m[18]||(m[18]=S=>q(o)("accentColor",S.target.value)),class:"color-picker"},null,544),[[gt,u.accentColor]]),Be(d("input",{type:"text","onUpdate:modelValue":m[19]||(m[19]=S=>u.accentColor=S),onInput:m[20]||(m[20]=S=>q(o)("accentColor",S.target.value)),class:"color-text",placeholder:"#e3f2fd"},null,544),[[gt,u.accentColor]])])]),d("div",vge,[m[45]||(m[45]=d("label",null,"Card Background",-1)),d("div",yge,[Be(d("input",{type:"color","onUpdate:modelValue":m[21]||(m[21]=S=>u.bgSecondary=S),onInput:m[22]||(m[22]=S=>q(o)("bgSecondary",S.target.value)),class:"color-picker"},null,544),[[gt,u.bgSecondary]]),Be(d("input",{type:"text","onUpdate:modelValue":m[23]||(m[23]=S=>u.bgSecondary=S),onInput:m[24]||(m[24]=S=>q(o)("bgSecondary",S.target.value)),class:"color-text",placeholder:"#ffffff"},null,544),[[gt,u.bgSecondary]])])])])]),d("section",xge,[m[53]||(m[53]=d("h3",null," Typography & Readability",-1)),d("div",Ege,[d("div",_ge,[m[48]||(m[48]=d("label",null,"Font Family",-1)),Be(d("select",{"onUpdate:modelValue":m[25]||(m[25]=S=>u.fontFamilyBase=S),onChange:m[26]||(m[26]=S=>q(o)("fontFamilyBase",S.target.value)),class:"style-select"},m[47]||(m[47]=[Dn('<option value="&#39;Inter&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Inter (Modern &amp; Clean)</option><option value="&#39;Roboto&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Roboto (Google Standard)</option><option value="&#39;Open Sans&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Open Sans (Friendly)</option><option value="&#39;Source Sans Pro&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Source Sans Pro (Professional)</option><option value="&#39;Lato&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Lato (Humanist)</option><option value="&#39;Nunito Sans&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-5e89749a>Nunito Sans (Rounded)</option><option value="&#39;System UI&#39;, -apple-system, sans-serif" data-v-5e89749a>System Default</option>',7)]),544),[[cr,u.fontFamilyBase]])]),d("div",bge,[m[50]||(m[50]=d("label",null,"Base Font Size",-1)),Be(d("select",{"onUpdate:modelValue":m[27]||(m[27]=S=>u.fontSizeBase=S),onChange:m[28]||(m[28]=S=>R(S.target.value)),class:"style-select"},m[49]||(m[49]=[d("option",{value:"0.875rem"},"Small (14px) - Compact",-1),d("option",{value:"1rem"},"Medium (16px) - Standard",-1),d("option",{value:"1.125rem"},"Large (18px) - Comfortable",-1),d("option",{value:"1.25rem"},"Extra Large (20px) - Accessible",-1)]),544),[[cr,u.fontSizeBase]])]),d("div",Sge,[m[52]||(m[52]=d("label",null,"Line Height",-1)),Be(d("select",{"onUpdate:modelValue":m[29]||(m[29]=S=>u.lineHeight=S),onChange:m[30]||(m[30]=S=>q(o)("lineHeight",S.target.value)),class:"style-select"},m[51]||(m[51]=[d("option",{value:"1.4"},"Compact (1.4)",-1),d("option",{value:"1.5"},"Standard (1.5)",-1),d("option",{value:"1.6"},"Comfortable (1.6)",-1),d("option",{value:"1.7"},"Spacious (1.7)",-1)]),544),[[cr,u.lineHeight]])])])]),d("section",Age,[m[60]||(m[60]=d("h3",null," Visual Style",-1)),d("div",Tge,[d("div",wge,[m[55]||(m[55]=d("label",null,"Border Radius Style",-1)),Be(d("select",{"onUpdate:modelValue":m[31]||(m[31]=S=>u.borderStyle=S),onChange:m[32]||(m[32]=S=>w(S.target.value)),class:"style-select"},m[54]||(m[54]=[d("option",{value:"rounded"},"Rounded (Modern)",-1),d("option",{value:"sharp"},"Sharp (Professional)",-1),d("option",{value:"extra-rounded"},"Extra Rounded (Friendly)",-1)]),544),[[cr,u.borderStyle]])]),d("div",Cge,[m[57]||(m[57]=d("label",null,"Shadow Style",-1)),Be(d("select",{"onUpdate:modelValue":m[33]||(m[33]=S=>u.shadowStyle=S),onChange:m[34]||(m[34]=S=>P(S.target.value)),class:"style-select"},m[56]||(m[56]=[d("option",{value:"subtle"},"Subtle",-1),d("option",{value:"medium"},"Medium",-1),d("option",{value:"bold"},"Bold",-1),d("option",{value:"none"},"No Shadows",-1)]),544),[[cr,u.shadowStyle]])]),d("div",Ige,[m[59]||(m[59]=d("label",null,"Contrast Level",-1)),Be(d("select",{"onUpdate:modelValue":m[35]||(m[35]=S=>u.contrastLevel=S),onChange:m[36]||(m[36]=S=>A(S.target.value)),class:"style-select"},m[58]||(m[58]=[d("option",{value:"standard"},"Standard Contrast",-1),d("option",{value:"high"},"High Contrast (Accessible)",-1),d("option",{value:"maximum"},"Maximum Contrast",-1)]),544),[[cr,u.contrastLevel]])])])]),d("section",kge,[m[71]||(m[71]=d("h3",null," Student Page Preview",-1)),d("div",Dge,[d("div",{class:"student-page-mockup",style:Nr({fontFamily:u.fontFamilyBase,fontSize:u.fontSizeBase,lineHeight:u.lineHeight})},[d("div",Pge,[d("h2",{style:Nr({color:u.headerTextColor||u.textPrimary,fontFamily:u.fontFamilyBase})},"Student Management",4),m[61]||(m[61]=Dn('<div class="mockup-search" data-v-5e89749a><input type="text" placeholder="Search students..." readonly data-v-5e89749a></div><div class="mockup-controls" data-v-5e89749a><button class="mockup-btn primary" data-v-5e89749a> Filters</button><select class="mockup-select" data-v-5e89749a><option data-v-5e89749a>First Name</option></select><div class="mockup-radio-group" data-v-5e89749a><label class="active" data-v-5e89749a>List</label><label data-v-5e89749a>Class</label></div></div>',2))]),d("div",Rge,[m[70]||(m[70]=Dn('<div class="mockup-table-header" data-v-5e89749a><div class="mockup-cell" data-v-5e89749a>Student Name</div><div class="mockup-cell" data-v-5e89749a>Grade</div><div class="mockup-cell" data-v-5e89749a>Case Manager</div><div class="mockup-cell" data-v-5e89749a>Services</div><div class="mockup-cell" data-v-5e89749a>Actions</div></div>',1)),d("div",Fge,[m[62]||(m[62]=d("div",{class:"mockup-cell"},"John Smith",-1)),m[63]||(m[63]=d("div",{class:"mockup-cell"},"9th",-1)),m[64]||(m[64]=d("div",{class:"mockup-cell"},"Ms. Johnson",-1)),d("div",Nge,[d("span",{class:"mockup-service-pill",style:Nr({backgroundColor:u.accentColor||u.primaryLight})},"Speech",4),d("span",{class:"mockup-service-pill",style:Nr({backgroundColor:u.accentColor||u.primaryLight})},"OT",4)]),m[65]||(m[65]=d("div",{class:"mockup-cell"},[d("button",{class:"mockup-btn primary small"},"Edit")],-1))]),d("div",Oge,[m[66]||(m[66]=d("div",{class:"mockup-cell"},"Jane Doe",-1)),m[67]||(m[67]=d("div",{class:"mockup-cell"},"10th",-1)),m[68]||(m[68]=d("div",{class:"mockup-cell"},"Mr. Wilson",-1)),d("div",Mge,[d("span",{class:"mockup-service-pill",style:Nr({backgroundColor:u.accentColor||u.primaryLight})},"Resource",4)]),m[69]||(m[69]=d("div",{class:"mockup-cell"},[d("button",{class:"mockup-btn primary small"},"Edit")],-1))])])],4)])])])])),d("input",{ref_key:"fileInput",ref:g,type:"file",accept:".json",style:{display:"none"},onChange:m[37]||(m[37]=(...S)=>_.handleFileImport&&_.handleFileImport(...S))},null,544)]))}},Bge=xt(Lge,[["__scopeId","data-v-5e89749a"]]),Uge={class:"secure-pdf-test"},$ge={class:"test-section"},Vge={class:"status-grid"},Hge={class:"status-item"},jge={class:"status-value"},Gge={class:"status-item"},Wge={class:"status-value"},zge={class:"status-item"},Kge={class:"status-value"},qge={class:"status-item"},Xge={class:"status-value"},Yge={class:"test-section"},Qge=["disabled"],Jge=["disabled"],Zge={class:"test-section"},eve=["disabled"],tve={key:0,class:"error-message"},rve={key:1,class:"success-message"},nve={key:0,class:"test-section"},sve=["disabled"],ave={key:0,class:"error-message"},ive={key:1,class:"success-message"},ove={class:"test-section"},lve=["disabled"],cve={key:0,class:"error-message"},uve={key:1,class:"success-message"},dve={class:"test-section"},fve=["disabled"],hve={key:0,class:"error-message"},pve={key:1,class:"success-message"},mve={__name:"SecurePdfTest",setup(t){const e=ae(null),r=ae("test-student-123"),n=ae(null),s=ae(!1),i=ae(!1),a=ae(!1),o=ae(null),l=ae(null),c=ae(!1),u=ae(null),f=ae(null),h=ae("Checking..."),p=ae("Checking..."),g=ae("Checking..."),v=ae("Checking..."),y=ae(null),b=ae(null),E=ae(null),x=ae(null),{uploadPdf:w,downloadPdf:P,isUploading:R,isDownloading:A}=nx();be(()=>{var F,N,M;return((F=_t.currentUser)==null?void 0:F.role)||((M=(N=_t.currentUser)==null?void 0:N.claims)==null?void 0:M.role)||"unknown"});const _=F=>{const N=F.target.files[0];if(N){if(N.type!=="application/pdf"){alert("Please select a PDF file"),F.target.value="";return}e.value=N,b.value=null,y.value=null,o.value=null,l.value=null}},m=async()=>{var F,N;if(!r.value){alert("Please enter a student ID");return}try{s.value=!0;const M=_t.currentUser;if(M){const j=await M.getIdTokenResult();console.log(" User token result:",j),console.log(" User role from token:",j.claims.role)}const L=Ze(qe,"students",r.value);(await sr(L)).exists()?alert(" Test student already exists"):(await jt(L,{app:{studentData:{firstName:"Test",lastName:"Student",grade:"7",plan:"IEP",caseManagerId:((F=_t.currentUser)==null?void 0:F.uid)||"test-case-manager"},staffIds:[((N=_t.currentUser)==null?void 0:N.uid)||"test-user"],schedule:{periods:{},classServices:[]},providers:{},accommodations:{instruction:"",assessment:""},flags:{flag1:!1,flag2:!1}},createdAt:In()}),alert(" Test student created successfully!"))}catch(M){alert(` Error creating test student: ${M.message}`),console.error("Error creating test student:",M),M.message.includes("permissions")&&alert(" Admin permissions required. Try using an existing student ID instead.")}finally{s.value=!1}},S=async()=>{var F,N,M,L;try{i.value=!0;const z=At(qe,"students"),j=or(z,ia(5)),H=await Gt(j);if(H.empty)alert(" No students found in database");else{const G=H.docs.map(ne=>({id:ne.id,...ne.data()}));console.log(" Available students:",G);const W=G[0];r.value=W.id,alert(` Found student: ${((N=(F=W.app)==null?void 0:F.studentData)==null?void 0:N.firstName)||"Unknown"} ${((L=(M=W.app)==null?void 0:M.studentData)==null?void 0:L.lastName)||"Student"} (ID: ${W.id})`)}}catch(z){alert(` Error finding student: ${z.message}`),console.error("Error finding student:",z)}finally{i.value=!1}},I=async()=>{if(!e.value||!r.value){alert("Please select a file and enter a student ID");return}try{b.value=null,y.value=null;const F=await w(e.value,r.value);y.value=F,console.log(" Test PDF uploaded successfully:",F)}catch(F){b.value=F.message,console.error(" Test PDF upload failed:",F)}},k=async()=>{if(!y.value||!r.value){alert("Please upload a PDF first");return}try{E.value=null,x.value=null,await P(y.value,r.value,"test-document.pdf"),x.value=!0,console.log(" Test PDF downloaded successfully")}catch(F){E.value=F.message,console.error(" Test PDF download failed:",F)}},C=async()=>{if(!e.value){alert("Please select a file first");return}try{a.value=!0,o.value=null,l.value=null;const F=gh(Cc,`public/test-${Date.now()}.pdf`);await R4(F,e.value),l.value=!0,console.log(" Direct upload successful")}catch(F){o.value=F.message,console.error(" Direct upload failed:",F)}finally{a.value=!1}},O=async()=>{if(!r.value){alert("Please enter a student ID first");return}try{c.value=!0,u.value=null,f.value=null;const{getFunctions:F,httpsCallable:N}=await Hs(async()=>{const{getFunctions:G,httpsCallable:W}=await Promise.resolve().then(()=>T0);return{getFunctions:G,httpsCallable:W}},void 0),M=F(),L=N(M,"getStudentFileUrl"),z="test-document.pdf";console.log(` Testing cloud function with studentId: ${r.value}, fileName: ${z}`);const j=await L({studentId:r.value,fileName:z});console.log(" Cloud function result:",j.data),f.value=!0;const H=j.data.url;H&&!H.includes("token=")?console.log(" URL is private (no download token)"):console.warn(" URL may not be private")}catch(F){u.value=F.message,console.error(" Cloud function test failed:",F)}finally{c.value=!1}},D=async()=>{try{const F=k0.encryptionKey;h.value=F&&F!=="your-dev-key-here"?" Configured":" Using default key";try{const N=gh(Cc,"public/test-access");await N4(N),p.value=" Accessible"}catch(N){N.code==="storage/unauthorized"?p.value=" Limited access (expected)":p.value=" Access denied"}try{const N=Ze(qe,"test","test");await sr(N),g.value=" Accessible"}catch{g.value=" Access denied"}try{const N=_t.currentUser;if(N){const M=await N.getIdTokenResult();v.value=M.claims.role||"unknown",console.log(" User role detected:",v.value)}else v.value="not authenticated"}catch(N){v.value="error reading role",console.error("Error reading user role:",N)}}catch(F){console.error("Error checking system status:",F)}};return Wt(()=>{D()}),(F,N)=>(B(),U("div",Uge,[N[16]||(N[16]=d("h2",null," Secure PDF System Test",-1)),d("div",$ge,[N[5]||(N[5]=d("h3",null,"System Status",-1)),d("div",Vge,[d("div",Hge,[N[1]||(N[1]=d("span",{class:"status-label"},"Encryption Key:",-1)),d("span",jge,Y(h.value),1)]),d("div",Gge,[N[2]||(N[2]=d("span",{class:"status-label"},"Storage Access:",-1)),d("span",Wge,Y(p.value),1)]),d("div",zge,[N[3]||(N[3]=d("span",{class:"status-label"},"Firestore Access:",-1)),d("span",Kge,Y(g.value),1)]),d("div",qge,[N[4]||(N[4]=d("span",{class:"status-label"},"User Role:",-1)),d("span",Xge,Y(v.value),1)])])]),d("div",Yge,[N[6]||(N[6]=d("h3",null,"Test Student ID",-1)),Be(d("input",{"onUpdate:modelValue":N[0]||(N[0]=M=>r.value=M),placeholder:"Enter test student ID",class:"student-id-input"},null,512),[[gt,r.value]]),N[7]||(N[7]=d("p",{class:"help-text"},"Enter a student ID to test with. You can:",-1)),N[8]||(N[8]=d("ul",{class:"help-text"},[d("li",null,"Use an existing student ID from your database"),d("li",null,"Create a new test student (requires admin permissions)"),d("li",null,'Use "test-student-123" for testing')],-1)),d("button",{onClick:m,disabled:s.value,class:"btn btn-secondary"},Y(s.value?"Creating...":"Create Test Student"),9,Qge),d("button",{onClick:S,disabled:i.value,class:"btn btn-secondary"},Y(i.value?"Finding...":"Find Existing Student"),9,Jge)]),d("div",Zge,[N[9]||(N[9]=d("h3",null,"Upload Test PDF",-1)),d("input",{type:"file",accept:"application/pdf",onChange:_,ref_key:"fileInput",ref:n},null,544),d("button",{onClick:I,disabled:!e.value||q(R)},Y(q(R)?" Uploading...":" Upload PDF"),9,eve),b.value?(B(),U("div",tve,Y(b.value),1)):xe("",!0),y.value?(B(),U("div",rve,"  PDF uploaded successfully! Secure filename: "+Y(y.value),1)):xe("",!0)]),y.value?(B(),U("div",nve,[N[10]||(N[10]=d("h3",null,"Download Test PDF",-1)),d("button",{onClick:k,disabled:q(A)},Y(q(A)?" Downloading...":" Download PDF"),9,sve),E.value?(B(),U("div",ave,Y(E.value),1)):xe("",!0),x.value?(B(),U("div",ive,"  PDF downloaded successfully! ")):xe("",!0)])):xe("",!0),d("div",ove,[N[11]||(N[11]=d("h3",null,"Alternative Test: Direct Storage Upload",-1)),N[12]||(N[12]=d("p",{class:"help-text"},"This test bypasses the secure PDF system and uploads directly to storage for comparison.",-1)),d("button",{onClick:C,disabled:!e.value||a.value},Y(a.value?" Uploading...":" Test Direct Upload"),9,lve),o.value?(B(),U("div",cve,Y(o.value),1)):xe("",!0),l.value?(B(),U("div",uve,"  Direct upload successful! This confirms storage permissions are working. ")):xe("",!0)]),d("div",dve,[N[14]||(N[14]=d("h3",null,"Test Cloud Function: Private URL Generation",-1)),N[15]||(N[15]=d("p",{class:"help-text"},"Test if the cloud function can generate private URLs for existing files.",-1)),d("button",{onClick:O,disabled:c.value},Y(c.value?" Testing...":" Test Cloud Function"),9,fve),u.value?(B(),U("div",hve,Y(u.value),1)):xe("",!0),f.value?(B(),U("div",pve,N[13]||(N[13]=[we("  Cloud function working! Private URL generated successfully. "),d("br",null,null,-1),d("small",null,"URL expires in 5 minutes",-1)]))):xe("",!0)])]))}},gve=xt(mve,[["__scopeId","data-v-4c041459"]]);async function vve(){var t;console.log("Starting student ID migration...");try{const e=At(qe,"students"),r=await Gt(e);console.log(`Found ${r.size} students to migrate`);let n=0,s=0;for(const i of r.docs){const a=i.data(),o=i.id;if(!/^\d+$/.test(o)){console.log(`Student ${o} already uses auto-generated ID, skipping`);continue}const l=o;try{const c=Ze(At(qe,"students")),u={...a,app:{...a.app,studentData:{...(t=a.app)==null?void 0:t.studentData,ssid:l}},migratedFrom:o,migratedAt:new Date().toISOString()};await jt(c,u),await ho(Ze(qe,"students",o)),console.log(` Migrated student ${o}  ${c.id}`),n++}catch(c){console.error(` Failed to migrate student ${o}:`,c),s++}}return console.log(`Migration complete: ${n} migrated, ${s} errors`),{migratedCount:n,errorCount:s}}catch(e){throw console.error("Migration failed:",e),e}}async function yve(){var t,e;console.log("Verifying migration...");try{const r=At(qe,"students"),n=await Gt(r);let s=0,i=0;for(const a of n.docs){const o=a.data(),l=a.id,c=(e=(t=o.app)==null?void 0:t.studentData)==null?void 0:e.ssid;c?(console.log(` Student ${l} has SSID: ${c}`),s++):(console.warn(` Student ${l} missing SSID in app data`),i++)}return console.log(`Verification complete: ${s} verified, ${i} issues`),{verifiedCount:s,issuesCount:i}}catch(r){throw console.error("Verification failed:",r),r}}async function xve(){var s,i,a,o;console.log(" Starting period label migration...");const{getNumber:t}=yo();let e=0,r=0,n=[];try{const l=At(qe,"students"),c=await Gt(l);e=c.size,console.log(` Found ${e} students to check`);for(const u of c.docs)try{const f=u.data();let h=!1,p={};const g=((i=(s=f.app)==null?void 0:s.schedule)==null?void 0:i.periods)||f.schedule||{};if(Object.entries(g).forEach(([v,y])=>{if(isNaN(parseInt(v))){const b=t(v);if(b)p[b]=y,h=!0,console.log(` Converting "${v}"  ${b} for student ${u.id}`);else{const E=v.match(/^(?:period|per)(\d+)$/i);E?(p[parseInt(E[1])]=y,h=!0,console.log(` Converting "${v}"  ${E[1]} for student ${u.id}`)):(console.warn(` Could not convert period key "${v}" for student ${u.id}`),p[v]=y)}}else p[v]=y}),h){const v={};(o=(a=f.app)==null?void 0:a.schedule)!=null&&o.periods?v["app.schedule.periods"]=p:f.schedule&&(v.schedule=p),Object.keys(v).length>0&&(await Pp(Ze(qe,"students",u.id),v),r++,console.log(` Updated student ${u.id}`))}}catch(f){console.error(` Error processing student ${u.id}:`,f),n.push({studentId:u.id,error:f.message})}return console.log(" Migration completed!"),console.log(" Results:"),console.log(`   - Total students checked: ${e}`),console.log(`   - Students migrated: ${r}`),console.log(`   - Errors: ${n.length}`),n.length>0&&(console.warn(" Errors encountered:"),n.forEach(({studentId:u,error:f})=>{console.warn(`   - ${u}: ${f}`)})),{success:!0,totalStudents:e,migratedStudents:r,errors:n}}catch(l){return console.error(" Migration failed:",l),{success:!1,error:l.message,totalStudents:e,migratedStudents:r,errors:n}}}async function Eve(){var n,s;console.log(" Starting migration preview...");const{getNumber:t}=yo();let e=0,r=[];try{const i=At(qe,"students"),a=await Gt(i);e=a.size;for(const o of a.docs){const l=o.data(),c=((s=(n=l.app)==null?void 0:n.schedule)==null?void 0:s.periods)||l.schedule||{};let u=[];Object.keys(c).forEach(f=>{if(isNaN(parseInt(f))){const h=t(f);if(h)u.push({from:f,to:h});else{const p=f.match(/^(?:period|per)(\d+)$/i);p&&u.push({from:f,to:parseInt(p[1])})}}}),u.length>0&&r.push({id:o.id,name:`${l.firstName||""} ${l.lastName||""}`.trim(),changes:u})}return console.log(" Migration Preview Results:"),console.log(`   - Total students: ${e}`),console.log(`   - Students needing migration: ${r.length}`),r.length>0&&(console.log("   - Changes needed:"),r.forEach(o=>{console.log(`      ${o.name} (${o.id}):`),o.changes.forEach(l=>{console.log(`        "${l.from}"  ${l.to}`)})})),{totalStudents:e,studentsNeedingMigration:r,changesNeeded:r.length>0}}catch(i){return console.error(" Preview failed:",i),{error:i.message,totalStudents:0,studentsNeedingMigration:[],changesNeeded:!1}}}const _ve={class:"testing-view"},bve={class:"test-section"},Sve={class:"status-grid"},Ave={class:"status-item"},Tve={class:"status-item"},wve={class:"status-item"},Cve={key:0,class:"test-section"},Ive={class:"settings-display"},kve={class:"setting-group"},Dve={class:"setting-values"},Pve={class:"setting-group"},Rve={class:"setting-values"},Fve={class:"setting-group"},Nve={class:"setting-values"},Ove={class:"setting-group"},Mve={class:"setting-values"},Lve={class:"test-section"},Bve={class:"admin-action-btns"},Uve=["disabled"],$ve=["disabled"],Vve={class:"test-section"},Hve={class:"integration-test"},jve={key:0,class:"test-form-container"},Gve={class:"test-section"},Wve={class:"admin-action-btns"},zve=["disabled"],Kve=["disabled"],qve={key:0,class:"migration-result"},Xve={class:"test-section"},Yve={class:"period-migration-controls"},Qve=["disabled"],Jve=["disabled"],Zve={key:0,class:"migration-result"},e1e={class:"test-section"},t1e={class:"ssid-test-controls"},r1e=["disabled"],n1e={key:0,class:"ssid-test-result"},s1e={class:"test-section"},a1e={__name:"TestingView",setup(t){const{appSettings:e,loadAppSettings:r,resetAppSettings:n,loading:s,error:i}=Ns(),{labels:a}=yo(),o=ae(!1),l=ae(!1),c=ae(!1),u=ae(null),f=ae(!1),h=ae(null),p=ae(!1),g=ae(null);Wt(async()=>{console.log("TestingView: Component mounted, checking app settings...")});const v=async()=>{try{await r(),console.log("TestingView: Settings reloaded successfully")}catch(_){console.error("TestingView: Error reloading settings:",_)}},y=async()=>{try{await n(),console.log("TestingView: Settings reset successfully")}catch(_){console.error("TestingView: Error resetting settings:",_)}},b=_=>{console.log("TestingView: Test student saved:",_),o.value=!1},E=async()=>{l.value=!0,u.value=null;try{const _=await vve();u.value=_,console.log("Migration completed:",_)}catch(_){u.value={error:_.message},console.error("Migration failed:",_)}finally{l.value=!1}},x=async()=>{c.value=!0,u.value=null;try{const _=await yve();u.value=_,console.log("Verification completed:",_)}catch(_){u.value={error:_.message},console.error("Verification failed:",_)}finally{c.value=!1}},w=async()=>{f.value=!0,h.value=null;try{const _=[{sourcedId:"123456789",givenName:"John",familyName:"Doe",specialEducation:"true"},{SSID:"987654321",FirstName:"Jane",LastName:"Smith",IEP:"Yes"},{ssid:"555666777",FirstName:"Bob",LastName:"Johnson",iep:"1"},{StateStudentID:"111222333",FirstName:"Alice",LastName:"Brown",504:"true"}],m={aeriesMapping:{},seisMapping:{},ssidExtraction:{},fieldMapping:{}};_.forEach((I,k)=>{const C={};Object.keys(I).forEach(O=>{C[O]=$v(O)}),m.aeriesMapping[`row_${k}`]=C}),_.forEach((I,k)=>{const C={};Object.keys(I).forEach(O=>{C[O]=Vv(O)}),m.seisMapping[`row_${k}`]=C}),_.forEach((I,k)=>{var O;const C=(O=I.sourcedId||I.SSID||I.ssid||I.StateStudentID||I.stateStudentId)==null?void 0:O.trim();m.ssidExtraction[`row_${k}`]={original:I,extractedSSID:C,success:!!C}});const S=["specialEducation","iep","IEP","plan504","504","disabilities","accommodations"];m.fieldMapping={aeries:S.map(I=>({field:I,mapped:$v(I)})),seis:S.map(I=>({field:I,mapped:Vv(I)}))},h.value={success:!0,message:"SSID resolution test completed successfully",results:m},console.log("SSID resolution test completed:",m)}catch(_){h.value={success:!1,error:_.message,message:"SSID resolution test failed"},console.error("SSID resolution test failed:",_)}finally{f.value=!1}},P=()=>{h.value=null},R=async()=>{p.value=!0,g.value=null;try{console.log("Starting period label migration preview...");const _=await Eve();_.error?g.value=`Preview failed: ${_.error}`:_.changesNeeded?g.value=`Preview completed: ${_.studentsNeedingMigration.length} students need migration (see console for details)`:g.value="No migration needed - all students already use numeric period keys"}catch(_){console.error("Period migration preview failed:",_),g.value=`Preview error: ${_.message}`}finally{p.value=!1}},A=async()=>{if(confirm("This will update period keys from labels to numbers for all students. Continue?")){p.value=!0,g.value=null;try{console.log("Starting period label migration...");const _=await xve();_.success?(g.value=`Migration completed: ${_.migratedStudents}/${_.totalStudents} students updated`,_.errors.length>0&&(g.value+=` (${_.errors.length} errors - see console)`)):g.value=`Migration failed: ${_.error}`}catch(_){console.error("Period migration failed:",_),g.value=`Migration error: ${_.message}`}finally{p.value=!1}}};return(_,m)=>{var S,I,k,C,O,D;return B(),U("div",_ve,[m[21]||(m[21]=d("h2",null,"App Settings Testing",-1)),d("div",bve,[m[5]||(m[5]=d("h3",null,"App Settings Status",-1)),d("div",Sve,[d("div",Ave,[m[2]||(m[2]=d("strong",null,"Loading:",-1)),we(" "+Y(q(s)?"Yes":"No"),1)]),d("div",Tve,[m[3]||(m[3]=d("strong",null,"Error:",-1)),we(" "+Y(q(i)||"None"),1)]),d("div",wve,[m[4]||(m[4]=d("strong",null,"Loaded:",-1)),we(" "+Y(q(e)&&Object.keys(q(e)).length>0?"Yes":"No"),1)])])]),q(e)?(B(),U("div",Cve,[m[10]||(m[10]=d("h3",null,"Current Settings",-1)),d("div",Ive,[d("div",kve,[d("h4",null,"Grades ("+Y(((S=q(e).grades)==null?void 0:S.length)||0)+")",1),d("div",Dve,Y(((I=q(e).grades)==null?void 0:I.join(", "))||"None configured"),1)]),d("div",Pve,[d("h4",null,"Class Services ("+Y(((k=q(e).classServices)==null?void 0:k.length)||0)+")",1),d("div",Rve,[(B(!0),U(Pe,null,je(q(e).classServices,F=>{var N;return B(),U("div",{key:F.name,class:"service-item"},[d("strong",null,Y(F.name)+":",1),we(" "+Y(((N=F.enabledSubcategories)==null?void 0:N.join(", "))||"None enabled"),1)])}),128))])]),d("div",Fve,[d("h4",null,"Service Providers ("+Y(((C=q(e).serviceProviders)==null?void 0:C.length)||0)+")",1),d("div",Nve,Y(((O=q(e).serviceProviders)==null?void 0:O.join(", "))||"None configured"),1)]),d("div",Ove,[m[9]||(m[9]=d("h4",null,"Periods",-1)),d("div",Mve,[m[6]||(m[6]=d("strong",null,"Number:",-1)),we(" "+Y(q(e).numPeriods||0),1),m[7]||(m[7]=d("br",null,null,-1)),m[8]||(m[8]=d("strong",null,"Labels:",-1)),we(" "+Y(((D=q(a))==null?void 0:D.join(", "))||"None"),1)])])])])):xe("",!0),d("div",Lve,[m[11]||(m[11]=d("h3",null,"Test Actions",-1)),d("div",Bve,[d("button",{onClick:v,disabled:q(s),class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},Y(q(s)?"Loading...":"Reload Settings"),9,Uve),d("button",{onClick:y,disabled:q(s),class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Reset to Defaults ",8,$ve)])]),d("div",Vve,[m[13]||(m[13]=d("h3",null,"Component Integration Test",-1)),d("div",Hve,[m[12]||(m[12]=d("p",null,"This section tests if the StudentForm can access app settings:",-1)),d("button",{onClick:m[0]||(m[0]=F=>o.value=!o.value),class:"btn btn-primary"},Y(o.value?"Hide":"Show")+" Test Student Form ",1),o.value?(B(),U("div",jve,[Oe(sx,{users:{userRoles:{}},mode:"new",onClose:m[1]||(m[1]=F=>o.value=!1),onSaved:b})])):xe("",!0)])]),d("div",Gve,[m[15]||(m[15]=d("h3",null,"Migration Tools",-1)),d("div",Wve,[d("button",{onClick:E,disabled:l.value,class:"admin-action-btn",style:{"min-width":"160px","max-width":"160px"}},Y(l.value?"Migrating...":"Migrate Student IDs"),9,zve),d("button",{onClick:x,disabled:c.value,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},Y(c.value?"Verifying...":"Verify Migration"),9,Kve)]),u.value?(B(),U("div",qve,[m[14]||(m[14]=d("h4",null,"Migration Result:",-1)),d("pre",null,Y(JSON.stringify(u.value,null,2)),1)])):xe("",!0)]),d("div",Xve,[m[17]||(m[17]=d("h3",null,"Period Label Migration",-1)),d("div",Yve,[d("button",{onClick:R,disabled:p.value,class:"btn btn-secondary"},Y(p.value?"Previewing...":"Preview Period Migration"),9,Qve),d("button",{onClick:A,disabled:p.value,class:"btn btn-warning"},Y(p.value?"Migrating...":"Run Period Migration"),9,Jve)]),g.value?(B(),U("div",Zve,[m[16]||(m[16]=d("h4",null,"Period Migration Result:",-1)),d("p",null,Y(g.value),1)])):xe("",!0)]),d("div",e1e,[m[19]||(m[19]=d("h3",null,"SSID Resolution Test",-1)),d("div",t1e,[d("button",{onClick:w,disabled:f.value,class:"btn btn-primary"},Y(f.value?"Testing...":"Test SSID Resolution"),9,r1e),d("button",{onClick:P,class:"btn btn-secondary"}," Clear Results ")]),h.value?(B(),U("div",n1e,[m[18]||(m[18]=d("h4",null,"SSID Resolution Test Result:",-1)),d("pre",null,Y(JSON.stringify(h.value,null,2)),1)])):xe("",!0)]),d("div",s1e,[m[20]||(m[20]=d("h3",null," Secure PDF System Test",-1)),Oe(gve)])])}}},i1e=xt(a1e,[["__scopeId","data-v-16ace2fd"]]),Po=ae({}),hu=ae(!1);function o1e(){const t=async()=>{try{const s=Ze(qe,"app_settings","admin_panel_permissions"),i=await sr(s);i.exists()?Po.value=i.data():Po.value=n(),hu.value=!0,console.log("Admin permissions loaded:",Po.value)}catch(s){console.error("Error loading admin permissions:",s),Po.value=n(),hu.value=!0}},e=(s,i)=>!hu.value||!Po.value[s]?!1:i==="admin"?!0:Po.value[s][i]===!0,r=(s,i)=>hu.value?s.filter(a=>i==="admin"?!0:e(a.key,i)):[],n=()=>({dashboard:{school_admin:!0,admin_504:!0,sped_chair:!0},usersAdd:{school_admin:!0,admin_504:!0,sped_chair:!1},usersEdit:{school_admin:!0,admin_504:!0,sped_chair:!0},students:{school_admin:!0,admin_504:!0,sped_chair:!0},addStudents:{school_admin:!0,admin_504:!0,sped_chair:!0},"aide-assignment":{school_admin:!0,admin_504:!0,sped_chair:!0},"aide-schedule":{school_admin:!0,admin_504:!0,sped_chair:!0},"time-table":{school_admin:!0,admin_504:!1,sped_chair:!0},seis:{school_admin:!0,admin_504:!0,sped_chair:!0},aeries:{school_admin:!0,admin_504:!0,sped_chair:!0},"testing-links":{school_admin:!0,admin_504:!1,sped_chair:!0},"teacher-feedback":{school_admin:!0,admin_504:!0,sped_chair:!0},"backup-restore":{school_admin:!0,admin_504:!1,sped_chair:!0},settings:{school_admin:!0,admin_504:!0,sped_chair:!0},permissions:{school_admin:!1,admin_504:!1,sped_chair:!1},"iep-security":{school_admin:!1,admin_504:!1,sped_chair:!1},security:{school_admin:!1,admin_504:!1,sped_chair:!1},"component-health":{school_admin:!1,admin_504:!1,sped_chair:!1}});return{adminPermissions:be(()=>Po.value),permissionsLoaded:be(()=>hu.value),loadPermissions:t,hasPermission:e,getPermittedTabs:r}}const l1e={name:"AdminView",components:{TabBar:fW,UserAddForm:bW,UserTable:KW,AdminStudents:mz,StudentBulkImporter:yK,AdminPermissions:QK,SeisImport:hq,AeriesImport:Sq,AeriesAPIConnector:RX,AppSettings:LY,AdminAideAssignment:EI,AdminTimeTable:tD,AdminAideSchedule:hD,AdminBackupRestore:pD,AdminAuditLogs:Fue,AdminTeacherFeedback:Fde,TestingLinks:Nfe,AdminDashboard:mhe,DebugEncryption:mD,SecurityControlCenter:Cpe,ComponentHealthDashboard:bme,AdminPermissionsMatrix:Gme,ThemeManager:Bge,TestingView:i1e},setup(){const t=Ci(),e=oB(),r=ae("dashboard"),n=ae("dashboard"),{students:s,fetchStudents:i}=Ii(),{users:a,fetchUsers:o}=Ea(),l=xn(),c=be(()=>l.currentUser),{loadPermissions:u,getPermittedTabs:f,permissionsLoaded:h}=o1e();Wt(async()=>{try{await Promise.all([i(),o(),u()]),c.value&&await rn.logSystemAccess("admin_panel_access",{userRole:c.value.role,accessTime:new Date().toISOString(),initialCategory:e.query.category||"dashboard"});const _=e.query.category;_&&E(_)}catch(_){console.error("Error loading data:",_)}});const p=[{key:"dashboard",label:"Dashboard",category:"dashboard"},{key:"usersAdd",label:"Add Users",category:"users-students"},{key:"usersEdit",label:"Manage Users",category:"users-students"},{key:"students",label:"Students",category:"users-students"},{key:"addStudents",label:"Add Students",category:"users-students"},{key:"aide-assignment",label:"Aide Assignment",category:"aide-management"},{key:"aide-schedule",label:"Aide Schedule",category:"aide-management",status:"not-working"},{key:"time-table",label:"Time Table",category:"aide-management"},{key:"seis",label:"SEIS Import",category:"data-integration",status:"not-active"},{key:"aeries",label:"Aeries API & Import",category:"data-integration",status:"not-active"},{key:"testing-links",label:"Testing Links",category:"data-integration"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"data-integration"},{key:"backup-restore",label:"Backup & Restore",category:"data-integration"},{key:"permissions",label:"Permissions",category:"system-config"},{key:"settings",label:"App Settings",category:"system-config"},{key:"theme",label:"Theme Customization",category:"system-config"},{key:"audit-logs",label:"Audit Logs",category:"monitoring"},{key:"security",label:"Security Controls",category:"monitoring"},{key:"component-health",label:"Component Debug",category:"monitoring"},{key:"app-settings-testing",label:"App Settings Testing",category:"monitoring"}],g=[{key:"admin-permissions",label:"Admin Panel Permissions",category:"monitoring"}],v=be(()=>{var S;const _=(S=c.value)==null?void 0:S.role;if(!h.value)return[];let m=[...p];return _==="admin"&&(m=[...m,...g]),f(m,_)}),y=_=>v.value.filter(m=>m.category===_),b=_=>y(_).length>0,E=async _=>{n.value=_;const m=y(_);m.length>0&&(r.value=m[0].key),c.value&&await rn.logSystemAccess("admin_category_access",{category:_,userRole:c.value.role,availableTabs:m.map(S=>S.key)})};return{activeTab:r,activeCategory:n,getTabsForCategory:y,categoryHasTabs:b,setActiveCategory:E,handleTabChange:async _=>{r.value=_,c.value&&await rn.logSystemAccess("admin_tab_access",{tab:_,category:n.value,userRole:c.value.role})},goToStudents:()=>{t.push("/students")},goToDashboard:()=>{t.push("/admin/dashboard")},handleGoToCategory:_=>{E(_)},handleBulkImporterClose:()=>{r.value="students"},students:s,userMap:a,currentUser:c,permissionsLoaded:h}}},c1e={class:"admin-header"},u1e={class:"admin-nav"},d1e={class:"admin-actions"},f1e={key:0,class:"sub-tab-container"},h1e={class:"admin-section"},p1e={key:0,class:"admin-section"},m1e={key:1,class:"admin-section"},g1e={key:2,class:"admin-section"},v1e={key:3,class:"admin-section"},y1e={key:4,class:"admin-section"},x1e={key:5,class:"admin-section"},E1e={key:6,class:"admin-section"},_1e={key:7,class:"admin-section"},b1e={key:8,class:"admin-section"},S1e={key:9,class:"admin-section"},A1e={key:10,class:"admin-section"},T1e={key:11,class:"admin-section"},w1e={key:12,class:"admin-section"},C1e={key:13,class:"admin-section"},I1e={key:14,class:"admin-section"},k1e={key:15,class:"admin-section"},D1e={key:16,class:"admin-section"},P1e={key:17,class:"admin-section"},R1e={key:18,class:"admin-section"},F1e={key:19,class:"admin-section"},N1e={key:20,class:"admin-section"},O1e={key:21,class:"admin-section"};function M1e(t,e,r,n,s,i){const a=fr("TabBar"),o=fr("AdminDashboard"),l=fr("UserAddForm"),c=fr("UserTable"),u=fr("AdminStudents"),f=fr("StudentBulkImporter"),h=fr("AdminPermissions"),p=fr("AdminAideAssignment"),g=fr("AdminAideSchedule"),v=fr("AdminTimeTable"),y=fr("SeisImport"),b=fr("AeriesAPIConnector"),E=fr("AeriesImport"),x=fr("AppSettings"),w=fr("ThemeManager"),P=fr("TestingLinks"),R=fr("AdminTeacherFeedback"),A=fr("AdminBackupRestore"),_=fr("AdminAuditLogs"),m=fr("DebugEncryption"),S=fr("SecurityControlCenter"),I=fr("ComponentHealthDashboard"),k=fr("AdminPermissionsMatrix"),C=fr("TestingView");return B(),U("div",null,[d("div",c1e,[e[8]||(e[8]=d("h1",null,"Admin Panel",-1)),d("div",u1e,[n.categoryHasTabs("dashboard")?(B(),U("button",{key:0,onClick:e[0]||(e[0]=O=>n.setActiveCategory("dashboard")),class:Qe([{active:n.activeCategory==="dashboard"},"category-btn"])}," Dashboard ",2)):xe("",!0),n.categoryHasTabs("users-students")?(B(),U("button",{key:1,onClick:e[1]||(e[1]=O=>n.setActiveCategory("users-students")),class:Qe([{active:n.activeCategory==="users-students"},"category-btn"])}," User & Student ",2)):xe("",!0),n.categoryHasTabs("aide-management")?(B(),U("button",{key:2,onClick:e[2]||(e[2]=O=>n.setActiveCategory("aide-management")),class:Qe([{active:n.activeCategory==="aide-management"},"category-btn"])}," Paraprofessionals ",2)):xe("",!0),n.categoryHasTabs("data-integration")?(B(),U("button",{key:3,onClick:e[3]||(e[3]=O=>n.setActiveCategory("data-integration")),class:Qe([{active:n.activeCategory==="data-integration"},"category-btn"])}," Data & Integration ",2)):xe("",!0),n.categoryHasTabs("system-config")?(B(),U("button",{key:4,onClick:e[4]||(e[4]=O=>n.setActiveCategory("system-config")),class:Qe([{active:n.activeCategory==="system-config"},"category-btn"])}," Configuration ",2)):xe("",!0),n.categoryHasTabs("monitoring")?(B(),U("button",{key:5,onClick:e[5]||(e[5]=O=>n.setActiveCategory("monitoring")),class:Qe([{active:n.activeCategory==="monitoring"},"category-btn"])}," System ",2)):xe("",!0)]),d("div",d1e,[d("button",{onClick:e[6]||(e[6]=(...O)=>n.goToStudents&&n.goToStudents(...O)),class:"return-btn"},e[7]||(e[7]=[d("span",null,"",-1)]))])]),n.activeCategory?(B(),U("div",f1e,[Oe(a,{tabs:n.getTabsForCategory(n.activeCategory),"active-tab":n.activeTab,onTabChange:n.handleTabChange},null,8,["tabs","active-tab","onTabChange"])])):xe("",!0),d("div",h1e,[n.activeTab==="dashboard"?(B(),U("div",p1e,[Oe(o,{onGoToCategory:n.handleGoToCategory,onGoToStudents:n.goToStudents},null,8,["onGoToCategory","onGoToStudents"])])):xe("",!0),n.activeTab==="usersAdd"?(B(),U("div",m1e,[Oe(l)])):xe("",!0),n.activeTab==="usersEdit"?(B(),U("div",g1e,[Oe(c)])):xe("",!0),n.activeTab==="students"?(B(),U("div",v1e,[Oe(u)])):xe("",!0),n.activeTab==="addStudents"?(B(),U("div",y1e,[Oe(f,{onClose:n.handleBulkImporterClose,onImported:t.handleStudentsImported},null,8,["onClose","onImported"])])):xe("",!0),n.activeTab==="permissions"?(B(),U("div",x1e,[Oe(h)])):xe("",!0),n.activeTab==="aide-assignment"?(B(),U("div",E1e,[Oe(p)])):xe("",!0),n.activeTab==="aide-schedule"?(B(),U("div",_1e,[Oe(g)])):xe("",!0),n.activeTab==="time-table"?(B(),U("div",b1e,[Oe(v)])):xe("",!0),n.activeTab==="seis"?(B(),U("div",S1e,[Oe(y)])):xe("",!0),n.activeTab==="aeries"?(B(),U("div",A1e,[Oe(b),e[9]||(e[9]=d("hr",{style:{margin:"2rem 0",border:"1px solid #ddd"}},null,-1)),Oe(E)])):xe("",!0),n.activeTab==="settings"?(B(),U("div",T1e,[Oe(x)])):xe("",!0),n.activeTab==="theme"?(B(),U("div",w1e,[Oe(w)])):xe("",!0),n.activeTab==="testing-links"?(B(),U("div",C1e,[Oe(P,{students:n.students,userMap:n.userMap},null,8,["students","userMap"])])):xe("",!0),n.activeTab==="teacher-feedback"?(B(),U("div",I1e,[Oe(R)])):xe("",!0),n.activeTab==="backup-restore"?(B(),U("div",k1e,[Oe(A)])):xe("",!0),n.activeTab==="audit-logs"?(B(),U("div",D1e,[Oe(_)])):xe("",!0),n.activeTab==="iep-security"?(B(),U("div",P1e,[e[10]||(e[10]=d("h2",null,"IEP Data Security",-1)),Oe(m,{"selected-student":t.currentStudent},null,8,["selected-student"])])):xe("",!0),n.activeTab==="security"?(B(),U("div",R1e,[Oe(S,{"selected-student":t.currentStudent},null,8,["selected-student"])])):xe("",!0),n.activeTab==="component-health"?(B(),U("div",F1e,[Oe(I)])):xe("",!0),n.activeTab==="admin-permissions"?(B(),U("div",N1e,[Oe(k)])):xe("",!0),n.activeTab==="app-settings-testing"?(B(),U("div",O1e,[Oe(C)])):xe("",!0)])])}const L1e=xt(l1e,[["render",M1e],["__scopeId","data-v-12c6e659"]]),B1e={class:"aide-schedule-view"},U1e={class:"header"},$1e={class:"user-info"},V1e={class:"content"},H1e={key:0,class:"error-message"},j1e={key:1,class:"error-message"},G1e={key:2,class:"loading"},W1e={key:3,class:"schedule-container"},z1e={class:"schedule-display"},K1e={class:"schedule-timeline"},q1e={class:"time-info"},X1e={class:"time"},Y1e={class:"type-badge"},Q1e={class:"assignment-info"},J1e={key:0},Z1e={key:1,class:"no-assignment"},eye={class:"schedule-editor"},tye={class:"editor-content"},rye={class:"time-block-header"},nye={class:"time"},sye={class:"type-badge"},aye={class:"assignment-editor"},iye=["onUpdate:modelValue"],oye=["value"],lye=["value"],cye={class:"editor-actions"},uye=["disabled"],dye={key:0},fye={key:1},hye={__name:"AideScheduleView",setup(t){const e=Ci(),r=xn(),{userList:n,fetchUsers:s}=Ea(),{students:i,fetchStudents:a}=Ii(),{loadAppSettings:o,saveAppSettings:l}=Ns(),c=ae(!0),u=ae(!1),f=ae({}),h=ae({}),p=be(()=>{var R;return((R=r.currentUser)==null?void 0:R.role)==="paraeducator"}),g=be(()=>{var R;return(R=r.currentUser)==null?void 0:R.uid}),v=be(()=>{var R;return((R=n.value)==null?void 0:R.filter(A=>A.role==="teacher"))||[]});async function y(){var R;try{const A=await sr(Ze(qe,"app_settings","global"));if(A.exists()){const _=A.data();f.value=((R=_.timeTables)==null?void 0:R[0])||_.timeTable||{}}}catch(A){console.error("Error loading time table:",A)}}function b(){return f.value.schedule?f.value.schedule.map((R,A)=>({...R,id:R.id||`block-${A}`,assignments:h.value[R.id||`block-${A}`]||{}})):[]}function E(){return b().map(A=>{const _=A.assignments[g.value];let m="";if(_){if(_.startsWith("teacher:")){const S=_.replace("teacher:",""),I=v.value.find(k=>k.id===S);m=I?I.name||I.email:"Unknown Teacher"}else if(_.startsWith("student:")){const S=_.replace("student:",""),I=i.value.find(k=>k.id===S);m=I?`${it(I,"firstName")} ${it(I,"lastName")}`:"Unknown Student"}}return{...A,assignment:m}})}async function x(){try{u.value=!0;const R=await o(),A={...R.detailedAideSchedule};b().forEach(m=>{A[m.id]||(A[m.id]={}),A[m.id][g.value]=m.assignments[g.value]});const _={...R,detailedAideSchedule:A};await l(_),console.log("My schedule saved successfully")}catch(R){console.error("Error saving my schedule:",R)}finally{u.value=!1}}function w(){r.logout(),e.push("/login")}async function P(){try{c.value=!0,await Promise.all([s(),a(),o(),y()]);const R=await sr(Ze(qe,"app_settings","global"));if(R.exists()){const A=R.data();h.value=A.detailedAideSchedule||{}}c.value=!1}catch(R){console.error("Error loading aide schedule data:",R),c.value=!1}}return Wt(P),(R,A)=>{var _,m;return B(),U("div",B1e,[d("div",U1e,[A[2]||(A[2]=d("h1",null,"My Schedule",-1)),d("div",$1e,[d("span",null,Y(((_=q(r).currentUser)==null?void 0:_.name)||((m=q(r).currentUser)==null?void 0:m.email)),1),d("button",{onClick:w,class:"btn btn-secondary"}," Logout ")])]),d("div",V1e,[q(r).currentUser?p.value?c.value?(B(),U("div",G1e," Loading your schedule... ")):(B(),U("div",W1e,[d("div",z1e,[A[7]||(A[7]=d("h2",null,"My Daily Schedule",-1)),d("div",K1e,[(B(!0),U(Pe,null,je(E(),S=>(B(),U("div",{key:S.id,class:Qe(["time-block",S.type])},[d("div",q1e,[d("span",X1e,Y(S.startTime)+" - "+Y(S.endTime),1),d("span",Y1e,Y(S.type),1)]),d("div",Q1e,[S.assignment?(B(),U("span",J1e,Y(S.assignment),1)):(B(),U("span",Z1e,"No Assignment"))])],2))),128))])]),d("div",eye,[A[9]||(A[9]=d("h2",null,"Edit My Schedule",-1)),d("div",tye,[(B(!0),U(Pe,null,je(b(),S=>(B(),U("div",{key:S.id,class:"time-block-editor"},[d("div",rye,[d("span",nye,Y(S.startTime)+" - "+Y(S.endTime),1),d("span",sye,Y(S.type),1)]),d("div",aye,[Be(d("select",{"onUpdate:modelValue":I=>S.assignments[g.value]=I,class:"assignment-select"},[A[8]||(A[8]=d("option",{value:""},"No Assignment",-1)),(B(!0),U(Pe,null,je(v.value,I=>(B(),U("option",{key:I.id,value:`teacher:${I.id}`},Y(I.name||I.email),9,oye))),128)),(B(!0),U(Pe,null,je(q(i),I=>(B(),U("option",{key:I.id,value:`student:${I.id}`},Y(q(it)(I,"firstName"))+" "+Y(q(it)(I,"lastName")),9,lye))),128))],8,iye),[[cr,S.assignments[g.value]]])])]))),128))]),d("div",cye,[d("button",{onClick:x,class:"btn btn-primary",disabled:u.value},[u.value?(B(),U("span",dye,"")):(B(),U("span",fye,"")),we(" "+Y(u.value?"Saving...":"Save My Schedule"),1)],8,uye)])])])):(B(),U("div",j1e,[A[5]||(A[5]=d("h2",null,"Access Denied",-1)),A[6]||(A[6]=d("p",null,"This page is only available to paraeducators.",-1)),d("button",{onClick:A[1]||(A[1]=S=>q(e).push("/")),class:"btn btn-primary"},"Go Home")])):(B(),U("div",H1e,[A[3]||(A[3]=d("h2",null,"Authentication Required",-1)),A[4]||(A[4]=d("p",null,"Please log in to access this page.",-1)),d("button",{onClick:A[0]||(A[0]=S=>q(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])])}}},pye=xt(hye,[["__scopeId","data-v-f2c7a0cd"]]),mye=t=>{console.log("Router guards setup completed")},gye=[{path:"/login",name:"Login",component:oW},{path:"/",name:"Home",redirect:"/students"},{path:"/students",name:"Students",component:sW,meta:{requiresAuth:!0,allowedRoles:uB}},{path:"/admin",name:"Admin",component:L1e,meta:{requiresAuth:!0,allowedRoles:iu}},{path:"/admin/aide-assignment",name:"AdminAideAssignment",component:EI,meta:{requiresAuth:!0,allowedRoles:iu}},{path:"/admin/time-table",name:"AdminTimeTable",component:tD,meta:{requiresAuth:!0,allowedRoles:iu}},{path:"/admin/aide-schedule",name:"AdminAideSchedule",component:hD,meta:{requiresAuth:!0,allowedRoles:iu}},{path:"/admin/backup-restore",name:"AdminBackupRestore",component:pD,meta:{requiresAuth:!0,allowedRoles:iu}},{path:"/aide-schedule",name:"AideSchedule",component:pye,meta:{requiresAuth:!0,allowedRoles:["paraeducator"]}}],vye=aB({history:NL("/"),routes:gye});mye();const Lx=Y0(I7),yye=u8();Lx.use(vye);Lx.use(yye);Lx.mount("#app");
//# sourceMappingURL=index-Dr1nwP-U.js.map
