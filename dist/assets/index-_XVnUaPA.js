const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TestingView-C6U8Lauv.js","assets/TestingView-n3T5wFkl.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function nh(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Ht={},Dl=[],ks=()=>{},hk=()=>!1,hd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),hg=t=>t.startsWith("onUpdate:"),lr=Object.assign,pg=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},pk=Object.prototype.hasOwnProperty,Zt=(t,e)=>pk.call(t,e),lt=Array.isArray,Rl=t=>dc(t)==="[object Map]",Ho=t=>dc(t)==="[object Set]",fy=t=>dc(t)==="[object Date]",mk=t=>dc(t)==="[object RegExp]",xt=t=>typeof t=="function",mr=t=>typeof t=="string",ea=t=>typeof t=="symbol",ar=t=>t!==null&&typeof t=="object",mg=t=>(ar(t)||xt(t))&&xt(t.then)&&xt(t.catch),Kb=Object.prototype.toString,dc=t=>Kb.call(t),vk=t=>dc(t).slice(8,-1),sh=t=>dc(t)==="[object Object]",vg=t=>mr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Fl=nh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ah=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},gk=/-(\w)/g,pn=ah(t=>t.replace(gk,(e,r)=>r?r.toUpperCase():"")),xk=/\B([A-Z])/g,os=ah(t=>t.replace(xk,"-$1").toLowerCase()),pd=ah(t=>t.charAt(0).toUpperCase()+t.slice(1)),iu=ah(t=>t?`on${pd(t)}`:""),zn=(t,e)=>!Object.is(t,e),Pl=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},Jm=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},a0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},i0=t=>{const e=mr(t)?Number(t):NaN;return isNaN(e)?t:e};let hy;const ih=()=>hy||(hy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),yk="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",Ek=nh(yk);function In(t){if(lt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=mr(n)?Tk(n):In(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(mr(t)||ar(t))return t}const _k=/;(?![^(]*\))/g,bk=/:([^]+)/,Sk=/\/\*[^]*?\*\//g;function Tk(t){const e={};return t.replace(Sk,"").split(_k).forEach(r=>{if(r){const n=r.split(bk);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function ot(t){let e="";if(mr(t))e=t;else if(lt(t))for(let r=0;r<t.length;r++){const n=ot(t[r]);n&&(e+=n+" ")}else if(ar(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function Ak(t){if(!t)return null;let{class:e,style:r}=t;return e&&!mr(e)&&(t.class=ot(e)),r&&(t.style=In(r)),t}const wk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ck=nh(wk);function qb(t){return!!t||t===""}function Ik(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=zi(t[n],e[n]);return r}function zi(t,e){if(t===e)return!0;let r=fy(t),n=fy(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=ea(t),n=ea(e),r||n)return t===e;if(r=lt(t),n=lt(e),r||n)return r&&n?Ik(t,e):!1;if(r=ar(t),n=ar(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!zi(t[a],e[a]))return!1}}return String(t)===String(e)}function oh(t,e){return t.findIndex(r=>zi(r,e))}const Xb=t=>!!(t&&t.__v_isRef===!0),le=t=>mr(t)?t:t==null?"":lt(t)||ar(t)&&(t.toString===Kb||!xt(t.toString))?Xb(t)?le(t.value):JSON.stringify(t,Yb,2):String(t),Yb=(t,e)=>Xb(e)?Yb(t,e.value):Rl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],i)=>(r[fp(n,i)+" =>"]=s,r),{})}:Ho(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>fp(r))}:ea(e)?fp(e):ar(e)&&!lt(e)&&!sh(e)?String(e):e,fp=(t,e="")=>{var r;return ea(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let An;class gg{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=An,!e&&An&&(this.index=(An.scopes||(An.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=An;try{return An=this,e()}finally{An=r}}}on(){++this._on===1&&(this.prevScope=An,An=this)}off(){this._on>0&&--this._on===0&&(An=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function xg(t){return new gg(t)}function yg(){return An}function Qb(t,e=!1){An&&An.cleanups.push(t)}let ur;const hp=new WeakSet;class Mu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,An&&An.active&&An.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,hp.has(this)&&(hp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Zb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,py(this),eS(this);const e=ur,r=Qs;ur=this,Qs=!0;try{return this.fn()}finally{tS(this),ur=e,Qs=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bg(e);this.deps=this.depsTail=void 0,py(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?hp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Zm(this)&&this.run()}get dirty(){return Zm(this)}}let Jb=0,ou,lu;function Zb(t,e=!1){if(t.flags|=8,e){t.next=lu,lu=t;return}t.next=ou,ou=t}function Eg(){Jb++}function _g(){if(--Jb>0)return;if(lu){let e=lu;for(lu=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;ou;){let e=ou;for(ou=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function eS(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function tS(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),bg(n),kk(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function Zm(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(rS(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function rS(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Bu)||(t.globalVersion=Bu,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Zm(t))))return;t.flags|=2;const e=t.dep,r=ur,n=Qs;ur=t,Qs=!0;try{eS(t);const s=t.fn(t._value);(e.version===0||zn(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{ur=r,Qs=n,tS(t),t.flags&=-3}}function bg(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)bg(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function kk(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}function Dk(t,e){t.effect instanceof Mu&&(t=t.effect.fn);const r=new Mu(t);e&&lr(r,e);try{r.run()}catch(s){throw r.stop(),s}const n=r.run.bind(r);return n.effect=r,n}function Rk(t){t.effect.stop()}let Qs=!0;const nS=[];function Ya(){nS.push(Qs),Qs=!1}function Qa(){const t=nS.pop();Qs=t===void 0?!0:t}function py(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=ur;ur=void 0;try{e()}finally{ur=r}}}let Bu=0;class Fk{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class lh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ur||!Qs||ur===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==ur)r=this.activeLink=new Fk(ur,this),ur.deps?(r.prevDep=ur.depsTail,ur.depsTail.nextDep=r,ur.depsTail=r):ur.deps=ur.depsTail=r,sS(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=ur.depsTail,r.nextDep=void 0,ur.depsTail.nextDep=r,ur.depsTail=r,ur.deps===r&&(ur.deps=n)}return r}trigger(e){this.version++,Bu++,this.notify(e)}notify(e){Eg();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{_g()}}}function sS(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)sS(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const o0=new WeakMap,So=Symbol(""),ev=Symbol(""),Uu=Symbol("");function kn(t,e,r){if(Qs&&ur){let n=o0.get(t);n||o0.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new lh),s.map=n,s.key=r),s.track()}}function Ua(t,e,r,n,s,i){const a=o0.get(t);if(!a){Bu++;return}const o=l=>{l&&l.trigger()};if(Eg(),e==="clear")a.forEach(o);else{const l=lt(t),c=l&&vg(r);if(l&&r==="length"){const u=Number(n);a.forEach((d,f)=>{(f==="length"||f===Uu||!ea(f)&&f>=u)&&o(d)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),c&&o(a.get(Uu)),e){case"add":l?c&&o(a.get("length")):(o(a.get(So)),Rl(t)&&o(a.get(ev)));break;case"delete":l||(o(a.get(So)),Rl(t)&&o(a.get(ev)));break;case"set":Rl(t)&&o(a.get(So));break}}_g()}function Pk(t,e){const r=o0.get(t);return r&&r.get(e)}function ul(t){const e=Vt(t);return e===t?e:(kn(e,"iterate",Uu),Es(t)?e:e.map(fn))}function ch(t){return kn(t=Vt(t),"iterate",Uu),t}const Ok={__proto__:null,[Symbol.iterator](){return pp(this,Symbol.iterator,fn)},concat(...t){return ul(this).concat(...t.map(e=>lt(e)?ul(e):e))},entries(){return pp(this,"entries",t=>(t[1]=fn(t[1]),t))},every(t,e){return La(this,"every",t,e,void 0,arguments)},filter(t,e){return La(this,"filter",t,e,r=>r.map(fn),arguments)},find(t,e){return La(this,"find",t,e,fn,arguments)},findIndex(t,e){return La(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return La(this,"findLast",t,e,fn,arguments)},findLastIndex(t,e){return La(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return La(this,"forEach",t,e,void 0,arguments)},includes(...t){return mp(this,"includes",t)},indexOf(...t){return mp(this,"indexOf",t)},join(t){return ul(this).join(t)},lastIndexOf(...t){return mp(this,"lastIndexOf",t)},map(t,e){return La(this,"map",t,e,void 0,arguments)},pop(){return Rc(this,"pop")},push(...t){return Rc(this,"push",t)},reduce(t,...e){return my(this,"reduce",t,e)},reduceRight(t,...e){return my(this,"reduceRight",t,e)},shift(){return Rc(this,"shift")},some(t,e){return La(this,"some",t,e,void 0,arguments)},splice(...t){return Rc(this,"splice",t)},toReversed(){return ul(this).toReversed()},toSorted(t){return ul(this).toSorted(t)},toSpliced(...t){return ul(this).toSpliced(...t)},unshift(...t){return Rc(this,"unshift",t)},values(){return pp(this,"values",fn)}};function pp(t,e,r){const n=ch(t),s=n[e]();return n!==t&&!Es(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const Nk=Array.prototype;function La(t,e,r,n,s,i){const a=ch(t),o=a!==t&&!Es(t),l=a[e];if(l!==Nk[e]){const d=l.apply(t,i);return o?fn(d):d}let c=r;a!==t&&(o?c=function(d,f){return r.call(this,fn(d),f,t)}:r.length>2&&(c=function(d,f){return r.call(this,d,f,t)}));const u=l.call(a,c,n);return o&&s?s(u):u}function my(t,e,r,n){const s=ch(t);let i=r;return s!==t&&(Es(t)?r.length>3&&(i=function(a,o,l){return r.call(this,a,o,l,t)}):i=function(a,o,l){return r.call(this,a,fn(o),l,t)}),s[e](i,...n)}function mp(t,e,r){const n=Vt(t);kn(n,"iterate",Uu);const s=n[e](...r);return(s===-1||s===!1)&&fh(r[0])?(r[0]=Vt(r[0]),n[e](...r)):s}function Rc(t,e,r=[]){Ya(),Eg();const n=Vt(t)[e].apply(t,r);return _g(),Qa(),n}const Lk=nh("__proto__,__v_isRef,__isVue"),aS=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ea));function Mk(t){ea(t)||(t=String(t));const e=Vt(this);return kn(e,"has",t),e.hasOwnProperty(t)}class iS{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?fS:dS:i?uS:cS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=lt(e);if(!s){let l;if(a&&(l=Ok[r]))return l;if(r==="hasOwnProperty")return Mk}const o=Reflect.get(e,r,wr(e)?e:n);return(ea(r)?aS.has(r):Lk(r))||(s||kn(e,"get",r),i)?o:wr(o)?a&&vg(r)?o:o.value:ar(o)?s?Tg(o):Ns(o):o}}class oS extends iS{constructor(e=!1){super(!1,e)}set(e,r,n,s){let i=e[r];if(!this._isShallow){const l=Ja(i);if(!Es(n)&&!Ja(n)&&(i=Vt(i),n=Vt(n)),!lt(e)&&wr(i)&&!wr(n))return l?!1:(i.value=n,!0)}const a=lt(e)&&vg(r)?Number(r)<e.length:Zt(e,r),o=Reflect.set(e,r,n,wr(e)?e:s);return e===Vt(s)&&(a?zn(n,i)&&Ua(e,"set",r,n):Ua(e,"add",r,n)),o}deleteProperty(e,r){const n=Zt(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&Ua(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!ea(r)||!aS.has(r))&&kn(e,"has",r),n}ownKeys(e){return kn(e,"iterate",lt(e)?"length":So),Reflect.ownKeys(e)}}class lS extends iS{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const Bk=new oS,Uk=new lS,Vk=new oS(!0),$k=new lS(!0),tv=t=>t,rf=t=>Reflect.getPrototypeOf(t);function Hk(t,e,r){return function(...n){const s=this.__v_raw,i=Vt(s),a=Rl(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=s[t](...n),u=r?tv:e?l0:fn;return!e&&kn(i,"iterate",l?ev:So),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:o?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function nf(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function jk(t,e){const r={get(s){const i=this.__v_raw,a=Vt(i),o=Vt(s);t||(zn(s,o)&&kn(a,"get",s),kn(a,"get",o));const{has:l}=rf(a),c=e?tv:t?l0:fn;if(l.call(a,s))return c(i.get(s));if(l.call(a,o))return c(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&kn(Vt(s),"iterate",So),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=Vt(i),o=Vt(s);return t||(zn(s,o)&&kn(a,"has",s),kn(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=Vt(o),c=e?tv:t?l0:fn;return!t&&kn(l,"iterate",So),o.forEach((u,d)=>s.call(i,c(u),c(d),a))}};return lr(r,t?{add:nf("add"),set:nf("set"),delete:nf("delete"),clear:nf("clear")}:{add(s){!e&&!Es(s)&&!Ja(s)&&(s=Vt(s));const i=Vt(this);return rf(i).has.call(i,s)||(i.add(s),Ua(i,"add",s,s)),this},set(s,i){!e&&!Es(i)&&!Ja(i)&&(i=Vt(i));const a=Vt(this),{has:o,get:l}=rf(a);let c=o.call(a,s);c||(s=Vt(s),c=o.call(a,s));const u=l.call(a,s);return a.set(s,i),c?zn(i,u)&&Ua(a,"set",s,i):Ua(a,"add",s,i),this},delete(s){const i=Vt(this),{has:a,get:o}=rf(i);let l=a.call(i,s);l||(s=Vt(s),l=a.call(i,s)),o&&o.call(i,s);const c=i.delete(s);return l&&Ua(i,"delete",s,void 0),c},clear(){const s=Vt(this),i=s.size!==0,a=s.clear();return i&&Ua(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=Hk(s,t,e)}),r}function uh(t,e){const r=jk(t,e);return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(Zt(r,s)&&s in n?r:n,s,i)}const Gk={get:uh(!1,!1)},Wk={get:uh(!1,!0)},zk={get:uh(!0,!1)},Kk={get:uh(!0,!0)},cS=new WeakMap,uS=new WeakMap,dS=new WeakMap,fS=new WeakMap;function qk(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Xk(t){return t.__v_skip||!Object.isExtensible(t)?0:qk(vk(t))}function Ns(t){return Ja(t)?t:dh(t,!1,Bk,Gk,cS)}function Sg(t){return dh(t,!1,Vk,Wk,uS)}function Tg(t){return dh(t,!0,Uk,zk,dS)}function Yk(t){return dh(t,!0,$k,Kk,fS)}function dh(t,e,r,n,s){if(!ar(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Xk(t);if(i===0)return t;const a=s.get(t);if(a)return a;const o=new Proxy(t,i===2?n:r);return s.set(t,o),o}function ma(t){return Ja(t)?ma(t.__v_raw):!!(t&&t.__v_isReactive)}function Ja(t){return!!(t&&t.__v_isReadonly)}function Es(t){return!!(t&&t.__v_isShallow)}function fh(t){return t?!!t.__v_raw:!1}function Vt(t){const e=t&&t.__v_raw;return e?Vt(e):t}function hh(t){return!Zt(t,"__v_skip")&&Object.isExtensible(t)&&Jm(t,"__v_skip",!0),t}const fn=t=>ar(t)?Ns(t):t,l0=t=>ar(t)?Tg(t):t;function wr(t){return t?t.__v_isRef===!0:!1}function pe(t){return hS(t,!1)}function Ag(t){return hS(t,!0)}function hS(t,e){return wr(t)?t:new Qk(t,e)}class Qk{constructor(e,r){this.dep=new lh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Vt(e),this._value=r?e:fn(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Es(e)||Ja(e);e=n?e:Vt(e),zn(e,r)&&(this._rawValue=e,this._value=n?e:fn(e),this.dep.trigger())}}function Jk(t){t.dep&&t.dep.trigger()}function me(t){return wr(t)?t.value:t}function Zk(t){return xt(t)?t():me(t)}const eD={get:(t,e,r)=>e==="__v_raw"?t:me(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return wr(s)&&!wr(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function wg(t){return ma(t)?t:new Proxy(t,eD)}class tD{constructor(e){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new lh,{get:n,set:s}=e(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function pS(t){return new tD(t)}function mS(t){const e=lt(t)?new Array(t.length):{};for(const r in t)e[r]=vS(t,r);return e}class rD{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Pk(Vt(this._object),this._key)}}class nD{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function sD(t,e,r){return wr(t)?t:xt(t)?new nD(t):ar(t)&&arguments.length>1?vS(t,e,r):pe(t)}function vS(t,e,r){const n=t[e];return wr(n)?n:new rD(t,e,r)}class aD{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new lh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ur!==this)return Zb(this,!0),!0}get value(){const e=this.dep.track();return rS(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function iD(t,e,r=!1){let n,s;return xt(t)?n=t:(n=t.get,s=t.set),new aD(n,s,r)}const oD={GET:"get",HAS:"has",ITERATE:"iterate"},lD={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},sf={},c0=new WeakMap;let bi;function cD(){return bi}function gS(t,e=!1,r=bi){if(r){let n=c0.get(r);n||c0.set(r,n=[]),n.push(t)}}function uD(t,e,r=Ht){const{immediate:n,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=r,c=I=>s?I:Es(I)||s===!1||s===0?Va(I,1):Va(I);let u,d,f,h,v=!1,p=!1;if(wr(t)?(d=()=>t.value,v=Es(t)):ma(t)?(d=()=>c(t),v=!0):lt(t)?(p=!0,v=t.some(I=>ma(I)||Es(I)),d=()=>t.map(I=>{if(wr(I))return I.value;if(ma(I))return c(I);if(xt(I))return l?l(I,2):I()})):xt(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){Ya();try{f()}finally{Qa()}}const I=bi;bi=u;try{return l?l(t,3,[h]):t(h)}finally{bi=I}}:d=ks,e&&s){const I=d,R=s===!0?1/0:s;d=()=>Va(I(),R)}const g=yg(),y=()=>{u.stop(),g&&g.active&&pg(g.effects,u)};if(i&&e){const I=e;e=(...R)=>{I(...R),y()}}let E=p?new Array(t.length).fill(sf):sf;const S=I=>{if(!(!(u.flags&1)||!u.dirty&&!I))if(e){const R=u.run();if(s||v||(p?R.some((D,C)=>zn(D,E[C])):zn(R,E))){f&&f();const D=bi;bi=u;try{const C=[R,E===sf?void 0:p&&E[0]===sf?[]:E,h];E=R,l?l(e,3,C):e(...C)}finally{bi=D}}}else u.run()};return o&&o(S),u=new Mu(d),u.scheduler=a?()=>a(S,!1):S,h=I=>gS(I,!1,u),f=u.onStop=()=>{const I=c0.get(u);if(I){if(l)l(I,4);else for(const R of I)R();c0.delete(u)}},e?n?S(!0):E=u.run():a?a(S.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function Va(t,e=1/0,r){if(e<=0||!ar(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,wr(t))Va(t.value,e,r);else if(lt(t))for(let n=0;n<t.length;n++)Va(t[n],e,r);else if(Ho(t)||Rl(t))t.forEach(n=>{Va(n,e,r)});else if(sh(t)){for(const n in t)Va(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Va(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const xS=[];function dD(t){xS.push(t)}function fD(){xS.pop()}function hD(t,e){}const pD={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},mD={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function fc(t,e,r,n){try{return n?t(...n):t()}catch(s){jo(s,e,r)}}function Fs(t,e,r,n){if(xt(t)){const s=fc(t,e,r,n);return s&&mg(s)&&s.catch(i=>{jo(i,e,r)}),s}if(lt(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Fs(t[i],e,r,n));return s}}function jo(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Ht;if(e){let o=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}o=o.parent}if(i){Ya(),fc(i,null,10,[t,l,c]),Qa();return}}vD(t,r,s,n,a)}function vD(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const Kn=[];let ca=-1;const Ol=[];let Si=null,xl=0;const yS=Promise.resolve();let u0=null;function Go(t){const e=u0||yS;return t?e.then(this?t.bind(this):t):e}function gD(t){let e=ca+1,r=Kn.length;for(;e<r;){const n=e+r>>>1,s=Kn[n],i=$u(s);i<t||i===t&&s.flags&2?e=n+1:r=n}return e}function Cg(t){if(!(t.flags&1)){const e=$u(t),r=Kn[Kn.length-1];!r||!(t.flags&2)&&e>=$u(r)?Kn.push(t):Kn.splice(gD(e),0,t),t.flags|=1,ES()}}function ES(){u0||(u0=yS.then(_S))}function Vu(t){lt(t)?Ol.push(...t):Si&&t.id===-1?Si.splice(xl+1,0,t):t.flags&1||(Ol.push(t),t.flags|=1),ES()}function vy(t,e,r=ca+1){for(;r<Kn.length;r++){const n=Kn[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Kn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function d0(t){if(Ol.length){const e=[...new Set(Ol)].sort((r,n)=>$u(r)-$u(n));if(Ol.length=0,Si){Si.push(...e);return}for(Si=e,xl=0;xl<Si.length;xl++){const r=Si[xl];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Si=null,xl=0}}const $u=t=>t.id==null?t.flags&2?-1:1/0:t.id;function _S(t){try{for(ca=0;ca<Kn.length;ca++){const e=Kn[ca];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ca<Kn.length;ca++){const e=Kn[ca];e&&(e.flags&=-2)}ca=-1,Kn.length=0,d0(),u0=null,(Kn.length||Ol.length)&&_S()}}let yl,af=[];function bS(t,e){var r,n;yl=t,yl?(yl.enabled=!0,af.forEach(({event:s,args:i})=>yl.emit(s,...i)),af=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{bS(i,e)}),setTimeout(()=>{yl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,af=[])},3e3)):af=[]}let Jr=null,ph=null;function Hu(t){const e=Jr;return Jr=t,ph=t&&t.type.__scopeId||null,e}function xD(t){ph=t}function yD(){ph=null}const ED=t=>mh;function mh(t,e=Jr,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&cv(-1);const i=Hu(e);let a;try{a=t(...s)}finally{Hu(i),n._d&&cv(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Ve(t,e){if(Jr===null)return t;const r=xd(Jr),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,o,l=Ht]=e[s];i&&(xt(i)&&(i={mounted:i,updated:i}),i.deep&&Va(a),n.push({dir:i,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function ua(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(Ya(),Fs(l,r,8,[t.el,o,t,e]),Qa())}}const SS=Symbol("_vte"),TS=t=>t.__isTeleport,cu=t=>t&&(t.disabled||t.disabled===""),gy=t=>t&&(t.defer||t.defer===""),xy=t=>typeof SVGElement<"u"&&t instanceof SVGElement,yy=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,rv=(t,e)=>{const r=t&&t.to;return mr(r)?e?e(r):null:r},AS={name:"Teleport",__isTeleport:!0,process(t,e,r,n,s,i,a,o,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:v,createText:p,createComment:g}}=c,y=cu(e.props);let{shapeFlag:E,children:S,dynamicChildren:I}=e;if(t==null){const R=e.el=p(""),D=e.anchor=p("");h(R,r,n),h(D,r,n);const C=(b,x)=>{E&16&&(s&&s.isCE&&(s.ce._teleportTarget=b),u(S,b,x,s,i,a,o,l))},_=()=>{const b=e.target=rv(e.props,v),x=wS(b,e,p,h);b&&(a!=="svg"&&xy(b)?a="svg":a!=="mathml"&&yy(b)&&(a="mathml"),y||(C(b,x),Uf(e,!1)))};y&&(C(r,D),Uf(e,!0)),gy(e.props)?(e.el.__isMounted=!1,Xr(()=>{_(),delete e.el.__isMounted},i)):_()}else{if(gy(e.props)&&t.el.__isMounted===!1){Xr(()=>{AS.process(t,e,r,n,s,i,a,o,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const R=e.anchor=t.anchor,D=e.target=t.target,C=e.targetAnchor=t.targetAnchor,_=cu(t.props),b=_?r:D,x=_?R:C;if(a==="svg"||xy(D)?a="svg":(a==="mathml"||yy(D))&&(a="mathml"),I?(f(t.dynamicChildren,I,b,s,i,a,o),Bg(t,e,!0)):l||d(t,e,b,x,s,i,a,o,!1),y)_?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):of(e,r,R,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const w=e.target=rv(e.props,v);w&&of(e,w,null,c,0)}else _&&of(e,D,C,c,1);Uf(e,y)}},remove(t,e,r,{um:n,o:{remove:s}},i){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=t;if(d&&(s(c),s(u)),i&&s(l),a&16){const h=i||!cu(f);for(let v=0;v<o.length;v++){const p=o[v];n(p,e,r,h,!!p.dynamicChildren)}}},move:of,hydrate:_D};function of(t,e,r,{o:{insert:n},m:s},i=2){i===0&&n(t.targetAnchor,e,r);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=t,d=i===2;if(d&&n(a,e,r),(!d||cu(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],e,r,2);d&&n(o,e,r)}function _D(t,e,r,n,s,i,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},d){const f=e.target=rv(e.props,l);if(f){const h=cu(e.props),v=f._lpa||f.firstChild;if(e.shapeFlag&16)if(h)e.anchor=d(a(t),e,o(t),r,n,s,i),e.targetStart=v,e.targetAnchor=v&&a(v);else{e.anchor=a(t);let p=v;for(;p;){if(p&&p.nodeType===8){if(p.data==="teleport start anchor")e.targetStart=p;else if(p.data==="teleport anchor"){e.targetAnchor=p,f._lpa=e.targetAnchor&&a(e.targetAnchor);break}}p=a(p)}e.targetAnchor||wS(f,e,u,c),d(v&&a(v),e,f,r,n,s,i)}Uf(e,h)}return e.anchor&&a(e.anchor)}const bD=AS;function Uf(t,e){const r=t.ctx;if(r&&r.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function wS(t,e,r,n){const s=e.targetStart=r(""),i=e.targetAnchor=r("");return s[SS]=i,t&&(n(s,t),n(i,t)),i}const Ti=Symbol("_leaveCb"),lf=Symbol("_enterCb");function Ig(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jt(()=>{t.isMounted=!0}),yh(()=>{t.isUnmounting=!0}),t}const Ts=[Function,Array],kg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ts,onEnter:Ts,onAfterEnter:Ts,onEnterCancelled:Ts,onBeforeLeave:Ts,onLeave:Ts,onAfterLeave:Ts,onLeaveCancelled:Ts,onBeforeAppear:Ts,onAppear:Ts,onAfterAppear:Ts,onAppearCancelled:Ts},CS=t=>{const e=t.subTree;return e.component?CS(e.component):e},SD={name:"BaseTransition",props:kg,setup(t,{slots:e}){const r=Ls(),n=Ig();return()=>{const s=e.default&&vh(e.default(),!0);if(!s||!s.length)return;const i=IS(s),a=Vt(t),{mode:o}=a;if(n.isLeaving)return vp(i);const l=Ey(i);if(!l)return vp(i);let c=Kl(l,a,n,r,d=>c=d);l.type!==Ur&&Za(l,c);let u=r.subTree&&Ey(r.subTree);if(u&&u.type!==Ur&&!zs(l,u)&&CS(r).type!==Ur){let d=Kl(u,a,n,r);if(Za(u,d),o==="out-in"&&l.type!==Ur)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete d.afterLeave,u=void 0},vp(i);o==="in-out"&&l.type!==Ur?d.delayLeave=(f,h,v)=>{const p=DS(n,u);p[String(u.key)]=u,f[Ti]=()=>{h(),f[Ti]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{v(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function IS(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==Ur){e=r;break}}return e}const kS=SD;function DS(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function Kl(t,e,r,n,s){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:v,onLeaveCancelled:p,onBeforeAppear:g,onAppear:y,onAfterAppear:E,onAppearCancelled:S}=e,I=String(t.key),R=DS(r,t),D=(b,x)=>{b&&Fs(b,n,9,x)},C=(b,x)=>{const w=x[1];D(b,x),lt(b)?b.every(A=>A.length<=1)&&w():b.length<=1&&w()},_={mode:a,persisted:o,beforeEnter(b){let x=l;if(!r.isMounted)if(i)x=g||l;else return;b[Ti]&&b[Ti](!0);const w=R[I];w&&zs(t,w)&&w.el[Ti]&&w.el[Ti](),D(x,[b])},enter(b){let x=c,w=u,A=d;if(!r.isMounted)if(i)x=y||c,w=E||u,A=S||d;else return;let k=!1;const L=b[lf]=G=>{k||(k=!0,G?D(A,[b]):D(w,[b]),_.delayedLeave&&_.delayedLeave(),b[lf]=void 0)};x?C(x,[b,L]):L()},leave(b,x){const w=String(t.key);if(b[lf]&&b[lf](!0),r.isUnmounting)return x();D(f,[b]);let A=!1;const k=b[Ti]=L=>{A||(A=!0,x(),L?D(p,[b]):D(v,[b]),b[Ti]=void 0,R[w]===t&&delete R[w])};R[w]=t,h?C(h,[b,k]):k()},clone(b){const x=Kl(b,e,r,n,s);return s&&s(x),x}};return _}function vp(t){if(vd(t))return t=Ea(t),t.children=null,t}function Ey(t){if(!vd(t))return TS(t.type)&&t.children?IS(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&xt(r.default))return r.default()}}function Za(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Za(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function vh(t,e=!1,r){let n=[],s=0;for(let i=0;i<t.length;i++){let a=t[i];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:i);a.type===Oe?(a.patchFlag&128&&s++,n=n.concat(vh(a.children,e,o))):(e||a.type!==Ur)&&n.push(o!=null?Ea(a,{key:o}):a)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function md(t,e){return xt(t)?lr({name:t.name},e,{setup:t}):t}function TD(){const t=Ls();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Dg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function AD(t){const e=Ls(),r=Ag(null);if(e){const s=e.refs===Ht?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>r.value,set:i=>r.value=i})}return r}function Nl(t,e,r,n,s=!1){if(lt(t)){t.forEach((v,p)=>Nl(v,e&&(lt(e)?e[p]:e),r,n,s));return}if(Ui(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Nl(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?xd(n.component):n.el,a=s?null:i,{i:o,r:l}=t,c=e&&e.r,u=o.refs===Ht?o.refs={}:o.refs,d=o.setupState,f=Vt(d),h=d===Ht?()=>!1:v=>Zt(f,v);if(c!=null&&c!==l&&(mr(c)?(u[c]=null,h(c)&&(d[c]=null)):wr(c)&&(c.value=null)),xt(l))fc(l,o,12,[a,u]);else{const v=mr(l),p=wr(l);if(v||p){const g=()=>{if(t.f){const y=v?h(l)?d[l]:u[l]:l.value;s?lt(y)&&pg(y,i):lt(y)?y.includes(i)||y.push(i):v?(u[l]=[i],h(l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else v?(u[l]=a,h(l)&&(d[l]=a)):p&&(l.value=a,t.k&&(u[t.k]=a))};a?(g.id=-1,Xr(g,r)):g()}}}let _y=!1;const dl=()=>{_y||(console.error("Hydration completed but contains mismatches."),_y=!0)},wD=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",CD=t=>t.namespaceURI.includes("MathML"),cf=t=>{if(t.nodeType===1){if(wD(t))return"svg";if(CD(t))return"mathml"}},wl=t=>t.nodeType===8;function ID(t){const{mt:e,p:r,o:{patchProp:n,createText:s,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=t,u=(S,I)=>{if(!I.hasChildNodes()){r(null,S,I),d0(),I._vnode=S;return}d(I.firstChild,S,null,null,null),d0(),I._vnode=S},d=(S,I,R,D,C,_=!1)=>{_=_||!!I.dynamicChildren;const b=wl(S)&&S.data==="[",x=()=>p(S,I,R,D,C,b),{type:w,ref:A,shapeFlag:k,patchFlag:L}=I;let G=S.nodeType;I.el=S,L===-2&&(_=!1,I.dynamicChildren=null);let P=null;switch(w){case Vi:G!==3?I.children===""?(l(I.el=s(""),a(S),S),P=S):P=x():(S.data!==I.children&&(dl(),S.data=I.children),P=i(S));break;case Ur:E(S)?(P=i(S),y(I.el=S.content.firstChild,S,R)):G!==8||b?P=x():P=i(S);break;case Ao:if(b&&(S=i(S),G=S.nodeType),G===1||G===3){P=S;const M=!I.children.length;for(let H=0;H<I.staticCount;H++)M&&(I.children+=P.nodeType===1?P.outerHTML:P.data),H===I.staticCount-1&&(I.anchor=P),P=i(P);return b?i(P):P}else x();break;case Oe:b?P=v(S,I,R,D,C,_):P=x();break;default:if(k&1)(G!==1||I.type.toLowerCase()!==S.tagName.toLowerCase())&&!E(S)?P=x():P=f(S,I,R,D,C,_);else if(k&6){I.slotScopeIds=C;const M=a(S);if(b?P=g(S):wl(S)&&S.data==="teleport start"?P=g(S,S.data,"teleport end"):P=i(S),e(I,M,null,R,D,cf(M),_),Ui(I)&&!I.type.__asyncResolved){let H;b?(H=nt(Oe),H.anchor=P?P.previousSibling:M.lastChild):H=S.nodeType===3?Me(""):nt("div"),H.el=S,I.component.subTree=H}}else k&64?G!==8?P=x():P=I.type.hydrate(S,I,R,D,C,_,t,h):k&128&&(P=I.type.hydrate(S,I,R,D,cf(a(S)),C,_,t,d))}return A!=null&&Nl(A,null,D,I),P},f=(S,I,R,D,C,_)=>{_=_||!!I.dynamicChildren;const{type:b,props:x,patchFlag:w,shapeFlag:A,dirs:k,transition:L}=I,G=b==="input"||b==="option";if(G||w!==-1){k&&ua(I,null,R,"created");let P=!1;if(E(S)){P=rT(null,L)&&R&&R.vnode.props&&R.vnode.props.appear;const H=S.content.firstChild;if(P){const B=H.getAttribute("class");B&&(H.$cls=B),L.beforeEnter(H)}y(H,S,R),I.el=S=H}if(A&16&&!(x&&(x.innerHTML||x.textContent))){let H=h(S.firstChild,I,S,R,D,C,_);for(;H;){uf(S,1)||dl();const B=H;H=H.nextSibling,o(B)}}else if(A&8){let H=I.children;H[0]===`
`&&(S.tagName==="PRE"||S.tagName==="TEXTAREA")&&(H=H.slice(1)),S.textContent!==H&&(uf(S,0)||dl(),S.textContent=I.children)}if(x){if(G||!_||w&48){const H=S.tagName.includes("-");for(const B in x)(G&&(B.endsWith("value")||B==="indeterminate")||hd(B)&&!Fl(B)||B[0]==="."||H)&&n(S,B,null,x[B],void 0,R)}else if(x.onClick)n(S,"onClick",null,x.onClick,void 0,R);else if(w&4&&ma(x.style))for(const H in x.style)x.style[H]}let M;(M=x&&x.onVnodeBeforeMount)&&ss(M,R,I),k&&ua(I,null,R,"beforeMount"),((M=x&&x.onVnodeMounted)||k||P)&&dT(()=>{M&&ss(M,R,I),P&&L.enter(S),k&&ua(I,null,R,"mounted")},D)}return S.nextSibling},h=(S,I,R,D,C,_,b)=>{b=b||!!I.dynamicChildren;const x=I.children,w=x.length;for(let A=0;A<w;A++){const k=b?x[A]:x[A]=is(x[A]),L=k.type===Vi;S?(L&&!b&&A+1<w&&is(x[A+1]).type===Vi&&(l(s(S.data.slice(k.children.length)),R,i(S)),S.data=k.children),S=d(S,k,D,C,_,b)):L&&!k.children?l(k.el=s(""),R):(uf(R,1)||dl(),r(null,k,R,null,D,C,cf(R),_))}return S},v=(S,I,R,D,C,_)=>{const{slotScopeIds:b}=I;b&&(C=C?C.concat(b):b);const x=a(S),w=h(i(S),I,x,R,D,C,_);return w&&wl(w)&&w.data==="]"?i(I.anchor=w):(dl(),l(I.anchor=c("]"),x,w),w)},p=(S,I,R,D,C,_)=>{if(uf(S.parentElement,1)||dl(),I.el=null,_){const w=g(S);for(;;){const A=i(S);if(A&&A!==w)o(A);else break}}const b=i(S),x=a(S);return o(S),r(null,I,x,b,R,D,cf(x),C),R&&(R.vnode.el=I.el,_h(R,I.el)),b},g=(S,I="[",R="]")=>{let D=0;for(;S;)if(S=i(S),S&&wl(S)&&(S.data===I&&D++,S.data===R)){if(D===0)return i(S);D--}return S},y=(S,I,R)=>{const D=I.parentNode;D&&D.replaceChild(S,I);let C=R;for(;C;)C.vnode.el===I&&(C.vnode.el=C.subTree.el=S),C=C.parent},E=S=>S.nodeType===1&&S.tagName==="TEMPLATE";return[u,d]}const by="data-allow-mismatch",kD={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function uf(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(by);)t=t.parentElement;const r=t&&t.getAttribute(by);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return e===0&&n.includes("children")?!0:n.includes(kD[e])}}const DD=ih().requestIdleCallback||(t=>setTimeout(t,1)),RD=ih().cancelIdleCallback||(t=>clearTimeout(t)),FD=(t=1e4)=>e=>{const r=DD(e,{timeout:t});return()=>RD(r)};function PD(t){const{top:e,left:r,bottom:n,right:s}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:a}=window;return(e>0&&e<i||n>0&&n<i)&&(r>0&&r<a||s>0&&s<a)}const OD=t=>(e,r)=>{const n=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){n.disconnect(),e();break}},t);return r(s=>{if(s instanceof Element){if(PD(s))return e(),n.disconnect(),!1;n.observe(s)}}),()=>n.disconnect()},ND=t=>e=>{if(t){const r=matchMedia(t);if(r.matches)e();else return r.addEventListener("change",e,{once:!0}),()=>r.removeEventListener("change",e)}},LD=(t=[])=>(e,r)=>{mr(t)&&(t=[t]);let n=!1;const s=a=>{n||(n=!0,i(),e(),a.target.dispatchEvent(new a.constructor(a.type,a)))},i=()=>{r(a=>{for(const o of t)a.removeEventListener(o,s)})};return r(a=>{for(const o of t)a.addEventListener(o,s,{once:!0})}),i};function MD(t,e){if(wl(t)&&t.data==="["){let r=1,n=t.nextSibling;for(;n;){if(n.nodeType===1){if(e(n)===!1)break}else if(wl(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else e(t)}const Ui=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function BD(t){xt(t)&&(t={loader:t});const{loader:e,loadingComponent:r,errorComponent:n,delay:s=200,hydrate:i,timeout:a,suspensible:o=!0,onError:l}=t;let c=null,u,d=0;const f=()=>(d++,c=null,h()),h=()=>{let v;return c||(v=c=e().catch(p=>{if(p=p instanceof Error?p:new Error(String(p)),l)return new Promise((g,y)=>{l(p,()=>g(f()),()=>y(p),d+1)});throw p}).then(p=>v!==c&&c?c:(p&&(p.__esModule||p[Symbol.toStringTag]==="Module")&&(p=p.default),u=p,p)))};return md({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(v,p,g){const y=i?()=>{const S=i(()=>{g()},I=>MD(v,I));S&&(p.bum||(p.bum=[])).push(S),(p.u||(p.u=[])).push(()=>!0)}:g;u?y():h().then(()=>!p.isUnmounted&&y())},get __asyncResolved(){return u},setup(){const v=Qr;if(Dg(v),u)return()=>gp(u,v);const p=S=>{c=null,jo(S,v,13,!n)};if(o&&v.suspense||ql)return h().then(S=>()=>gp(S,v)).catch(S=>(p(S),()=>n?nt(n,{error:S}):null));const g=pe(!1),y=pe(),E=pe(!!s);return s&&setTimeout(()=>{E.value=!1},s),a!=null&&setTimeout(()=>{if(!g.value&&!y.value){const S=new Error(`Async component timed out after ${a}ms.`);p(S),y.value=S}},a),h().then(()=>{g.value=!0,v.parent&&vd(v.parent.vnode)&&v.parent.update()}).catch(S=>{p(S),y.value=S}),()=>{if(g.value&&u)return gp(u,v);if(y.value&&n)return nt(n,{error:y.value});if(r&&!E.value)return nt(r)}}})}function gp(t,e){const{ref:r,props:n,children:s,ce:i}=e.vnode,a=nt(t,n,s);return a.ref=r,a.ce=i,delete e.vnode.ce,a}const vd=t=>t.type.__isKeepAlive,UD={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const r=Ls(),n=r.ctx;if(!n.renderer)return()=>{const E=e.default&&e.default();return E&&E.length===1?E[0]:E};const s=new Map,i=new Set;let a=null;const o=r.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=n,f=d("div");n.activate=(E,S,I,R,D)=>{const C=E.component;c(E,S,I,0,o),l(C.vnode,E,S,I,C,o,R,E.slotScopeIds,D),Xr(()=>{C.isDeactivated=!1,C.a&&Pl(C.a);const _=E.props&&E.props.onVnodeMounted;_&&ss(_,C.parent,E)},o)},n.deactivate=E=>{const S=E.component;h0(S.m),h0(S.a),c(E,f,null,1,o),Xr(()=>{S.da&&Pl(S.da);const I=E.props&&E.props.onVnodeUnmounted;I&&ss(I,S.parent,E),S.isDeactivated=!0},o)};function h(E){xp(E),u(E,r,o,!0)}function v(E){s.forEach((S,I)=>{const R=pv(S.type);R&&!E(R)&&p(I)})}function p(E){const S=s.get(E);S&&(!a||!zs(S,a))?h(S):a&&xp(a),s.delete(E),i.delete(E)}er(()=>[t.include,t.exclude],([E,S])=>{E&&v(I=>zc(E,I)),S&&v(I=>!zc(S,I))},{flush:"post",deep:!0});let g=null;const y=()=>{g!=null&&(p0(r.subTree.type)?Xr(()=>{s.set(g,df(r.subTree))},r.subTree.suspense):s.set(g,df(r.subTree)))};return Jt(y),xh(y),yh(()=>{s.forEach(E=>{const{subTree:S,suspense:I}=r,R=df(S);if(E.type===R.type&&E.key===R.key){xp(R);const D=R.component.da;D&&Xr(D,I);return}h(E)})}),()=>{if(g=null,!e.default)return a=null;const E=e.default(),S=E[0];if(E.length>1)return a=null,E;if(!ei(S)||!(S.shapeFlag&4)&&!(S.shapeFlag&128))return a=null,S;let I=df(S);if(I.type===Ur)return a=null,I;const R=I.type,D=pv(Ui(I)?I.type.__asyncResolved||{}:R),{include:C,exclude:_,max:b}=t;if(C&&(!D||!zc(C,D))||_&&D&&zc(_,D))return I.shapeFlag&=-257,a=I,S;const x=I.key==null?R:I.key,w=s.get(x);return I.el&&(I=Ea(I),S.shapeFlag&128&&(S.ssContent=I)),g=x,w?(I.el=w.el,I.component=w.component,I.transition&&Za(I,I.transition),I.shapeFlag|=512,i.delete(x),i.add(x)):(i.add(x),b&&i.size>parseInt(b,10)&&p(i.values().next().value)),I.shapeFlag|=256,a=I,p0(S.type)?S:I}}},VD=UD;function zc(t,e){return lt(t)?t.some(r=>zc(r,e)):mr(t)?t.split(",").includes(e):mk(t)?(t.lastIndex=0,t.test(e)):!1}function RS(t,e){PS(t,"a",e)}function FS(t,e){PS(t,"da",e)}function PS(t,e,r=Qr){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(gh(e,n,r),r){let s=r.parent;for(;s&&s.parent;)vd(s.parent.vnode)&&$D(n,e,r,s),s=s.parent}}function $D(t,e,r,n){const s=gh(e,t,n,!0);to(()=>{pg(n[e],s)},r)}function xp(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function df(t){return t.shapeFlag&128?t.ssContent:t}function gh(t,e,r=Qr,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...a)=>{Ya();const o=Fo(r),l=Fs(e,r,t,a);return o(),Qa(),l});return n?s.unshift(i):s.push(i),i}}const oi=t=>(e,r=Qr)=>{(!ql||t==="sp")&&gh(t,(...n)=>e(...n),r)},OS=oi("bm"),Jt=oi("m"),Rg=oi("bu"),xh=oi("u"),yh=oi("bum"),to=oi("um"),NS=oi("sp"),LS=oi("rtg"),MS=oi("rtc");function BS(t,e=Qr){gh("ec",t,e)}const Fg="components",HD="directives";function Dr(t,e){return Pg(Fg,t,!0,e)||t}const US=Symbol.for("v-ndc");function jD(t){return mr(t)?Pg(Fg,t,!1)||t:t||US}function GD(t){return Pg(HD,t)}function Pg(t,e,r=!0,n=!1){const s=Jr||Qr;if(s){const i=s.type;if(t===Fg){const o=pv(i,!1);if(o&&(o===e||o===pn(e)||o===pd(pn(e))))return i}const a=Sy(s[t]||i[t],e)||Sy(s.appContext[t],e);return!a&&n?i:a}}function Sy(t,e){return t&&(t[e]||t[pn(e)]||t[pd(pn(e))])}function Ge(t,e,r,n){let s;const i=r&&r[n],a=lt(t);if(a||mr(t)){const o=a&&ma(t);let l=!1,c=!1;o&&(l=!Es(t),c=Ja(t),t=ch(t)),s=new Array(t.length);for(let u=0,d=t.length;u<d;u++)s[u]=e(l?c?l0(fn(t[u])):fn(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(ar(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,i&&i[l]));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];s[l]=e(t[u],u,l,i&&i[l])}}else s=[];return r&&(r[n]=s),s}function WD(t,e){for(let r=0;r<e.length;r++){const n=e[r];if(lt(n))for(let s=0;s<n.length;s++)t[n[s].name]=n[s].fn;else n&&(t[n.name]=n.key?(...s)=>{const i=n.fn(...s);return i&&(i.key=n.key),i}:n.fn)}return t}function VS(t,e,r={},n,s){if(Jr.ce||Jr.parent&&Ui(Jr.parent)&&Jr.parent.ce)return e!=="default"&&(r.name=e),N(),Rn(Oe,null,[nt("slot",r,n&&n())],64);let i=t[e];i&&i._c&&(i._d=!1),N();const a=i&&Og(i(r)),o=r.key||a&&a.key,l=Rn(Oe,{key:(o&&!ea(o)?o:`_${e}`)+(!a&&n?"_fb":"")},a||(n?n():[]),a&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Og(t){return t.some(e=>ei(e)?!(e.type===Ur||e.type===Oe&&!Og(e.children)):!0)?t:null}function zD(t,e){const r={};for(const n in t)r[e&&/[A-Z]/.test(n)?`on:${n}`:iu(n)]=t[n];return r}const nv=t=>t?xT(t)?xd(t):nv(t.parent):null,uu=lr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nv(t.parent),$root:t=>nv(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ng(t),$forceUpdate:t=>t.f||(t.f=()=>{Cg(t.update)}),$nextTick:t=>t.n||(t.n=Go.bind(t.proxy)),$watch:t=>S3.bind(t)}),yp=(t,e)=>t!==Ht&&!t.__isScriptSetup&&Zt(t,e),sv={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:a,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(yp(n,e))return a[e]=1,n[e];if(s!==Ht&&Zt(s,e))return a[e]=2,s[e];if((c=t.propsOptions[0])&&Zt(c,e))return a[e]=3,i[e];if(r!==Ht&&Zt(r,e))return a[e]=4,r[e];av&&(a[e]=0)}}const u=uu[e];let d,f;if(u)return e==="$attrs"&&kn(t.attrs,"get",""),u(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(r!==Ht&&Zt(r,e))return a[e]=4,r[e];if(f=l.config.globalProperties,Zt(f,e))return f[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return yp(s,e)?(s[e]=r,!0):n!==Ht&&Zt(n,e)?(n[e]=r,!0):Zt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},a){let o;return!!r[a]||t!==Ht&&Zt(t,a)||yp(e,a)||(o=i[0])&&Zt(o,a)||Zt(n,a)||Zt(uu,a)||Zt(s.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Zt(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}},KD=lr({},sv,{get(t,e){if(e!==Symbol.unscopables)return sv.get(t,e,t)},has(t,e){return e[0]!=="_"&&!Ek(e)}});function qD(){return null}function XD(){return null}function YD(t){}function QD(t){}function JD(){return null}function ZD(){}function e3(t,e){return null}function t3(){return $S().slots}function r3(){return $S().attrs}function $S(){const t=Ls();return t.setupContext||(t.setupContext=_T(t))}function ju(t){return lt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}function n3(t,e){const r=ju(t);for(const n in e){if(n.startsWith("__skip"))continue;let s=r[n];s?lt(s)||xt(s)?s=r[n]={type:s,default:e[n]}:s.default=e[n]:s===null&&(s=r[n]={default:e[n]}),s&&e[`__skip_${n}`]&&(s.skipFactory=!0)}return r}function s3(t,e){return!t||!e?t||e:lt(t)&&lt(e)?t.concat(e):lr({},ju(t),ju(e))}function a3(t,e){const r={};for(const n in t)e.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>t[n]});return r}function i3(t){const e=Ls();let r=t();return dv(),mg(r)&&(r=r.catch(n=>{throw Fo(e),n})),[r,()=>Fo(e)]}let av=!0;function o3(t){const e=Ng(t),r=t.proxy,n=t.ctx;av=!1,e.beforeCreate&&Ty(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:v,activated:p,deactivated:g,beforeDestroy:y,beforeUnmount:E,destroyed:S,unmounted:I,render:R,renderTracked:D,renderTriggered:C,errorCaptured:_,serverPrefetch:b,expose:x,inheritAttrs:w,components:A,directives:k,filters:L}=e;if(c&&l3(c,n,null),a)for(const M in a){const H=a[M];xt(H)&&(n[M]=H.bind(r))}if(s){const M=s.call(r,r);ar(M)&&(t.data=Ns(M))}if(av=!0,i)for(const M in i){const H=i[M],B=xt(H)?H.bind(r,r):xt(H.get)?H.get.bind(r,r):ks,Q=!xt(H)&&xt(H.set)?H.set.bind(r):ks,j=Ae({get:B,set:Q});Object.defineProperty(n,M,{enumerable:!0,configurable:!0,get:()=>j.value,set:O=>j.value=O})}if(o)for(const M in o)HS(o[M],n,r,M);if(l){const M=xt(l)?l.call(r):l;Reflect.ownKeys(M).forEach(H=>{du(H,M[H])})}u&&Ty(u,t,"c");function P(M,H){lt(H)?H.forEach(B=>M(B.bind(r))):H&&M(H.bind(r))}if(P(OS,d),P(Jt,f),P(Rg,h),P(xh,v),P(RS,p),P(FS,g),P(BS,_),P(MS,D),P(LS,C),P(yh,E),P(to,I),P(NS,b),lt(x))if(x.length){const M=t.exposed||(t.exposed={});x.forEach(H=>{Object.defineProperty(M,H,{get:()=>r[H],set:B=>r[H]=B})})}else t.exposed||(t.exposed={});R&&t.render===ks&&(t.render=R),w!=null&&(t.inheritAttrs=w),A&&(t.components=A),k&&(t.directives=k),b&&Dg(t)}function l3(t,e,r=ks){lt(t)&&(t=iv(t));for(const n in t){const s=t[n];let i;ar(s)?"default"in s?i=_s(s.from||n,s.default,!0):i=_s(s.from||n):i=_s(s),wr(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function Ty(t,e,r){Fs(lt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function HS(t,e,r,n){let s=n.includes(".")?oT(r,n):()=>r[n];if(mr(t)){const i=e[t];xt(i)&&er(s,i)}else if(xt(t))er(s,t.bind(r));else if(ar(t))if(lt(t))t.forEach(i=>HS(i,e,r,n));else{const i=xt(t.handler)?t.handler.bind(r):e[t.handler];xt(i)&&er(s,i,t)}}function Ng(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let l;return o?l=o:!s.length&&!r&&!n?l=e:(l={},s.length&&s.forEach(c=>f0(l,c,a,!0)),f0(l,e,a)),ar(e)&&i.set(e,l),l}function f0(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&f0(t,i,r,!0),s&&s.forEach(a=>f0(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=c3[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const c3={data:Ay,props:wy,emits:wy,methods:Kc,computed:Kc,beforeCreate:jn,created:jn,beforeMount:jn,mounted:jn,beforeUpdate:jn,updated:jn,beforeDestroy:jn,beforeUnmount:jn,destroyed:jn,unmounted:jn,activated:jn,deactivated:jn,errorCaptured:jn,serverPrefetch:jn,components:Kc,directives:Kc,watch:d3,provide:Ay,inject:u3};function Ay(t,e){return e?t?function(){return lr(xt(t)?t.call(this,this):t,xt(e)?e.call(this,this):e)}:e:t}function u3(t,e){return Kc(iv(t),iv(e))}function iv(t){if(lt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function jn(t,e){return t?[...new Set([].concat(t,e))]:e}function Kc(t,e){return t?lr(Object.create(null),t,e):e}function wy(t,e){return t?lt(t)&&lt(e)?[...new Set([...t,...e])]:lr(Object.create(null),ju(t),ju(e??{})):e}function d3(t,e){if(!t)return e;if(!e)return t;const r=lr(Object.create(null),t);for(const n in e)r[n]=jn(t[n],e[n]);return r}function jS(){return{app:null,config:{isNativeTag:hk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let f3=0;function h3(t,e){return function(n,s=null){xt(n)||(n=lr({},n)),s!=null&&!ar(s)&&(s=null);const i=jS(),a=new WeakSet,o=[];let l=!1;const c=i.app={_uid:f3++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:ST,get config(){return i.config},set config(u){},use(u,...d){return a.has(u)||(u&&xt(u.install)?(a.add(u),u.install(c,...d)):xt(u)&&(a.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const h=c._ceVNode||nt(n,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(h,u):t(h,u,f),l=!0,c._container=u,u.__vue_app__=c,xd(h.component)}},onUnmount(u){o.push(u)},unmount(){l&&(Fs(o,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=To;To=c;try{return u()}finally{To=d}}};return c}}let To=null;function du(t,e){if(Qr){let r=Qr.provides;const n=Qr.parent&&Qr.parent.provides;n===r&&(r=Qr.provides=Object.create(n)),r[t]=e}}function _s(t,e,r=!1){const n=Qr||Jr;if(n||To){let s=To?To._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&xt(e)?e.call(n&&n.proxy):e}}function GS(){return!!(Qr||Jr||To)}const WS={},zS=()=>Object.create(WS),KS=t=>Object.getPrototypeOf(t)===WS;function p3(t,e,r,n=!1){const s={},i=zS();t.propsDefaults=Object.create(null),qS(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);r?t.props=n?s:Sg(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function m3(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,o=Vt(s),[l]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Eh(t.emitsOptions,f))continue;const h=e[f];if(l)if(Zt(i,f))h!==i[f]&&(i[f]=h,c=!0);else{const v=pn(f);s[v]=ov(l,o,v,h,t,!1)}else h!==i[f]&&(i[f]=h,c=!0)}}}else{qS(t,e,s,i)&&(c=!0);let u;for(const d in o)(!e||!Zt(e,d)&&((u=os(d))===d||!Zt(e,u)))&&(l?r&&(r[d]!==void 0||r[u]!==void 0)&&(s[d]=ov(l,o,d,void 0,t,!0)):delete s[d]);if(i!==o)for(const d in i)(!e||!Zt(e,d))&&(delete i[d],c=!0)}c&&Ua(t.attrs,"set","")}function qS(t,e,r,n){const[s,i]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Fl(l))continue;const c=e[l];let u;s&&Zt(s,u=pn(l))?!i||!i.includes(u)?r[u]=c:(o||(o={}))[u]=c:Eh(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=Vt(r),c=o||Ht;for(let u=0;u<i.length;u++){const d=i[u];r[d]=ov(s,l,d,c[d],t,!Zt(c,d))}}return a}function ov(t,e,r,n,s,i){const a=t[r];if(a!=null){const o=Zt(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&xt(l)){const{propsDefaults:c}=s;if(r in c)n=c[r];else{const u=Fo(s);n=c[r]=l.call(null,e),u()}}else n=l;s.ce&&s.ce._setProp(r,n)}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===os(r))&&(n=!0))}return n}const v3=new WeakMap;function XS(t,e,r=!1){const n=r?v3:e.propsCache,s=n.get(t);if(s)return s;const i=t.props,a={},o=[];let l=!1;if(!xt(t)){const u=d=>{l=!0;const[f,h]=XS(d,e,!0);lr(a,f),h&&o.push(...h)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ar(t)&&n.set(t,Dl),Dl;if(lt(i))for(let u=0;u<i.length;u++){const d=pn(i[u]);Cy(d)&&(a[d]=Ht)}else if(i)for(const u in i){const d=pn(u);if(Cy(d)){const f=i[u],h=a[d]=lt(f)||xt(f)?{type:f}:lr({},f),v=h.type;let p=!1,g=!0;if(lt(v))for(let y=0;y<v.length;++y){const E=v[y],S=xt(E)&&E.name;if(S==="Boolean"){p=!0;break}else S==="String"&&(g=!1)}else p=xt(v)&&v.name==="Boolean";h[0]=p,h[1]=g,(p||Zt(h,"default"))&&o.push(d)}}const c=[a,o];return ar(t)&&n.set(t,c),c}function Cy(t){return t[0]!=="$"&&!Fl(t)}const Lg=t=>t[0]==="_"||t==="$stable",Mg=t=>lt(t)?t.map(is):[is(t)],g3=(t,e,r)=>{if(e._n)return e;const n=mh((...s)=>Mg(e(...s)),r);return n._c=!1,n},YS=(t,e,r)=>{const n=t._ctx;for(const s in t){if(Lg(s))continue;const i=t[s];if(xt(i))e[s]=g3(s,i,n);else if(i!=null){const a=Mg(i);e[s]=()=>a}}},QS=(t,e)=>{const r=Mg(e);t.slots.default=()=>r},JS=(t,e,r)=>{for(const n in e)(r||!Lg(n))&&(t[n]=e[n])},x3=(t,e,r)=>{const n=t.slots=zS();if(t.vnode.shapeFlag&32){const s=e.__;s&&Jm(n,"__",s,!0);const i=e._;i?(JS(n,e,r),r&&Jm(n,"_",i,!0)):YS(e,n)}else e&&QS(t,e)},y3=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,a=Ht;if(n.shapeFlag&32){const o=e._;o?r&&o===1?i=!1:JS(s,e,r):(i=!e.$stable,YS(e,s)),a=e}else e&&(QS(t,e),a={default:1});if(i)for(const o in s)!Lg(o)&&a[o]==null&&delete s[o]},Xr=dT;function ZS(t){return tT(t)}function eT(t){return tT(t,ID)}function tT(t,e){const r=ih();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=ks,insertStaticContent:v}=t,p=(z,J,he,re=null,X=null,te=null,Se=void 0,Ee=null,be=!!J.dynamicChildren)=>{if(z===J)return;z&&!zs(z,J)&&(re=ie(z),O(z,X,te,!0),z=null),J.patchFlag===-2&&(be=!1,J.dynamicChildren=null);const{type:ke,ref:Be,shapeFlag:Ie}=J;switch(ke){case Vi:g(z,J,he,re);break;case Ur:y(z,J,he,re);break;case Ao:z==null&&E(J,he,re,Se);break;case Oe:A(z,J,he,re,X,te,Se,Ee,be);break;default:Ie&1?R(z,J,he,re,X,te,Se,Ee,be):Ie&6?k(z,J,he,re,X,te,Se,Ee,be):(Ie&64||Ie&128)&&ke.process(z,J,he,re,X,te,Se,Ee,be,Y)}Be!=null&&X?Nl(Be,z&&z.ref,te,J||z,!J):Be==null&&z&&z.ref!=null&&Nl(z.ref,null,te,z,!0)},g=(z,J,he,re)=>{if(z==null)n(J.el=o(J.children),he,re);else{const X=J.el=z.el;J.children!==z.children&&c(X,J.children)}},y=(z,J,he,re)=>{z==null?n(J.el=l(J.children||""),he,re):J.el=z.el},E=(z,J,he,re)=>{[z.el,z.anchor]=v(z.children,J,he,re,z.el,z.anchor)},S=({el:z,anchor:J},he,re)=>{let X;for(;z&&z!==J;)X=f(z),n(z,he,re),z=X;n(J,he,re)},I=({el:z,anchor:J})=>{let he;for(;z&&z!==J;)he=f(z),s(z),z=he;s(J)},R=(z,J,he,re,X,te,Se,Ee,be)=>{J.type==="svg"?Se="svg":J.type==="math"&&(Se="mathml"),z==null?D(J,he,re,X,te,Se,Ee,be):b(z,J,X,te,Se,Ee,be)},D=(z,J,he,re,X,te,Se,Ee)=>{let be,ke;const{props:Be,shapeFlag:Ie,transition:je,dirs:Ue}=z;if(be=z.el=a(z.type,te,Be&&Be.is,Be),Ie&8?u(be,z.children):Ie&16&&_(z.children,be,null,re,X,Ep(z,te),Se,Ee),Ue&&ua(z,null,re,"created"),C(be,z,z.scopeId,Se,re),Be){for(const qe in Be)qe!=="value"&&!Fl(qe)&&i(be,qe,null,Be[qe],te,re);"value"in Be&&i(be,"value",null,Be.value,te),(ke=Be.onVnodeBeforeMount)&&ss(ke,re,z)}Ue&&ua(z,null,re,"beforeMount");const He=rT(X,je);He&&je.beforeEnter(be),n(be,J,he),((ke=Be&&Be.onVnodeMounted)||He||Ue)&&Xr(()=>{ke&&ss(ke,re,z),He&&je.enter(be),Ue&&ua(z,null,re,"mounted")},X)},C=(z,J,he,re,X)=>{if(he&&h(z,he),re)for(let te=0;te<re.length;te++)h(z,re[te]);if(X){let te=X.subTree;if(J===te||p0(te.type)&&(te.ssContent===J||te.ssFallback===J)){const Se=X.vnode;C(z,Se,Se.scopeId,Se.slotScopeIds,X.parent)}}},_=(z,J,he,re,X,te,Se,Ee,be=0)=>{for(let ke=be;ke<z.length;ke++){const Be=z[ke]=Ee?Ai(z[ke]):is(z[ke]);p(null,Be,J,he,re,X,te,Se,Ee)}},b=(z,J,he,re,X,te,Se)=>{const Ee=J.el=z.el;let{patchFlag:be,dynamicChildren:ke,dirs:Be}=J;be|=z.patchFlag&16;const Ie=z.props||Ht,je=J.props||Ht;let Ue;if(he&&fo(he,!1),(Ue=je.onVnodeBeforeUpdate)&&ss(Ue,he,J,z),Be&&ua(J,z,he,"beforeUpdate"),he&&fo(he,!0),(Ie.innerHTML&&je.innerHTML==null||Ie.textContent&&je.textContent==null)&&u(Ee,""),ke?x(z.dynamicChildren,ke,Ee,he,re,Ep(J,X),te):Se||H(z,J,Ee,null,he,re,Ep(J,X),te,!1),be>0){if(be&16)w(Ee,Ie,je,he,X);else if(be&2&&Ie.class!==je.class&&i(Ee,"class",null,je.class,X),be&4&&i(Ee,"style",Ie.style,je.style,X),be&8){const He=J.dynamicProps;for(let qe=0;qe<He.length;qe++){const ye=He[qe],xe=Ie[ye],_e=je[ye];(_e!==xe||ye==="value")&&i(Ee,ye,xe,_e,X,he)}}be&1&&z.children!==J.children&&u(Ee,J.children)}else!Se&&ke==null&&w(Ee,Ie,je,he,X);((Ue=je.onVnodeUpdated)||Be)&&Xr(()=>{Ue&&ss(Ue,he,J,z),Be&&ua(J,z,he,"updated")},re)},x=(z,J,he,re,X,te,Se)=>{for(let Ee=0;Ee<J.length;Ee++){const be=z[Ee],ke=J[Ee],Be=be.el&&(be.type===Oe||!zs(be,ke)||be.shapeFlag&198)?d(be.el):he;p(be,ke,Be,null,re,X,te,Se,!0)}},w=(z,J,he,re,X)=>{if(J!==he){if(J!==Ht)for(const te in J)!Fl(te)&&!(te in he)&&i(z,te,J[te],null,X,re);for(const te in he){if(Fl(te))continue;const Se=he[te],Ee=J[te];Se!==Ee&&te!=="value"&&i(z,te,Ee,Se,X,re)}"value"in he&&i(z,"value",J.value,he.value,X)}},A=(z,J,he,re,X,te,Se,Ee,be)=>{const ke=J.el=z?z.el:o(""),Be=J.anchor=z?z.anchor:o("");let{patchFlag:Ie,dynamicChildren:je,slotScopeIds:Ue}=J;Ue&&(Ee=Ee?Ee.concat(Ue):Ue),z==null?(n(ke,he,re),n(Be,he,re),_(J.children||[],he,Be,X,te,Se,Ee,be)):Ie>0&&Ie&64&&je&&z.dynamicChildren?(x(z.dynamicChildren,je,he,X,te,Se,Ee),(J.key!=null||X&&J===X.subTree)&&Bg(z,J,!0)):H(z,J,he,Be,X,te,Se,Ee,be)},k=(z,J,he,re,X,te,Se,Ee,be)=>{J.slotScopeIds=Ee,z==null?J.shapeFlag&512?X.ctx.activate(J,he,re,Se,be):L(J,he,re,X,te,Se,be):G(z,J,be)},L=(z,J,he,re,X,te,Se)=>{const Ee=z.component=gT(z,re,X);if(vd(z)&&(Ee.ctx.renderer=Y),yT(Ee,!1,Se),Ee.asyncDep){if(X&&X.registerDep(Ee,P,Se),!z.el){const be=Ee.subTree=nt(Ur);y(null,be,J,he)}}else P(Ee,z,J,he,X,te,Se)},G=(z,J,he)=>{const re=J.component=z.component;if(k3(z,J,he))if(re.asyncDep&&!re.asyncResolved){M(re,J,he);return}else re.next=J,re.update();else J.el=z.el,re.vnode=J},P=(z,J,he,re,X,te,Se)=>{const Ee=()=>{if(z.isMounted){let{next:Ie,bu:je,u:Ue,parent:He,vnode:qe}=z;{const We=nT(z);if(We){Ie&&(Ie.el=qe.el,M(z,Ie,Se)),We.asyncDep.then(()=>{z.isUnmounted||Ee()});return}}let ye=Ie,xe;fo(z,!1),Ie?(Ie.el=qe.el,M(z,Ie,Se)):Ie=qe,je&&Pl(je),(xe=Ie.props&&Ie.props.onVnodeBeforeUpdate)&&ss(xe,He,Ie,qe),fo(z,!0);const _e=Vf(z),Pe=z.subTree;z.subTree=_e,p(Pe,_e,d(Pe.el),ie(Pe),z,X,te),Ie.el=_e.el,ye===null&&_h(z,_e.el),Ue&&Xr(Ue,X),(xe=Ie.props&&Ie.props.onVnodeUpdated)&&Xr(()=>ss(xe,He,Ie,qe),X)}else{let Ie;const{el:je,props:Ue}=J,{bm:He,m:qe,parent:ye,root:xe,type:_e}=z,Pe=Ui(J);if(fo(z,!1),He&&Pl(He),!Pe&&(Ie=Ue&&Ue.onVnodeBeforeMount)&&ss(Ie,ye,J),fo(z,!0),je&&q){const We=()=>{z.subTree=Vf(z),q(je,z.subTree,z,X,null)};Pe&&_e.__asyncHydrate?_e.__asyncHydrate(je,z,We):We()}else{xe.ce&&xe.ce._def.shadowRoot!==!1&&xe.ce._injectChildStyle(_e);const We=z.subTree=Vf(z);p(null,We,he,re,z,X,te),J.el=We.el}if(qe&&Xr(qe,X),!Pe&&(Ie=Ue&&Ue.onVnodeMounted)){const We=J;Xr(()=>ss(Ie,ye,We),X)}(J.shapeFlag&256||ye&&Ui(ye.vnode)&&ye.vnode.shapeFlag&256)&&z.a&&Xr(z.a,X),z.isMounted=!0,J=he=re=null}};z.scope.on();const be=z.effect=new Mu(Ee);z.scope.off();const ke=z.update=be.run.bind(be),Be=z.job=be.runIfDirty.bind(be);Be.i=z,Be.id=z.uid,be.scheduler=()=>Cg(Be),fo(z,!0),ke()},M=(z,J,he)=>{J.component=z;const re=z.vnode.props;z.vnode=J,z.next=null,m3(z,J.props,re,he),y3(z,J.children,he),Ya(),vy(z),Qa()},H=(z,J,he,re,X,te,Se,Ee,be=!1)=>{const ke=z&&z.children,Be=z?z.shapeFlag:0,Ie=J.children,{patchFlag:je,shapeFlag:Ue}=J;if(je>0){if(je&128){Q(ke,Ie,he,re,X,te,Se,Ee,be);return}else if(je&256){B(ke,Ie,he,re,X,te,Se,Ee,be);return}}Ue&8?(Be&16&&ve(ke,X,te),Ie!==ke&&u(he,Ie)):Be&16?Ue&16?Q(ke,Ie,he,re,X,te,Se,Ee,be):ve(ke,X,te,!0):(Be&8&&u(he,""),Ue&16&&_(Ie,he,re,X,te,Se,Ee,be))},B=(z,J,he,re,X,te,Se,Ee,be)=>{z=z||Dl,J=J||Dl;const ke=z.length,Be=J.length,Ie=Math.min(ke,Be);let je;for(je=0;je<Ie;je++){const Ue=J[je]=be?Ai(J[je]):is(J[je]);p(z[je],Ue,he,null,X,te,Se,Ee,be)}ke>Be?ve(z,X,te,!0,!1,Ie):_(J,he,re,X,te,Se,Ee,be,Ie)},Q=(z,J,he,re,X,te,Se,Ee,be)=>{let ke=0;const Be=J.length;let Ie=z.length-1,je=Be-1;for(;ke<=Ie&&ke<=je;){const Ue=z[ke],He=J[ke]=be?Ai(J[ke]):is(J[ke]);if(zs(Ue,He))p(Ue,He,he,null,X,te,Se,Ee,be);else break;ke++}for(;ke<=Ie&&ke<=je;){const Ue=z[Ie],He=J[je]=be?Ai(J[je]):is(J[je]);if(zs(Ue,He))p(Ue,He,he,null,X,te,Se,Ee,be);else break;Ie--,je--}if(ke>Ie){if(ke<=je){const Ue=je+1,He=Ue<Be?J[Ue].el:re;for(;ke<=je;)p(null,J[ke]=be?Ai(J[ke]):is(J[ke]),he,He,X,te,Se,Ee,be),ke++}}else if(ke>je)for(;ke<=Ie;)O(z[ke],X,te,!0),ke++;else{const Ue=ke,He=ke,qe=new Map;for(ke=He;ke<=je;ke++){const gt=J[ke]=be?Ai(J[ke]):is(J[ke]);gt.key!=null&&qe.set(gt.key,ke)}let ye,xe=0;const _e=je-He+1;let Pe=!1,We=0;const rt=new Array(_e);for(ke=0;ke<_e;ke++)rt[ke]=0;for(ke=Ue;ke<=Ie;ke++){const gt=z[ke];if(xe>=_e){O(gt,X,te,!0);continue}let Lt;if(gt.key!=null)Lt=qe.get(gt.key);else for(ye=He;ye<=je;ye++)if(rt[ye-He]===0&&zs(gt,J[ye])){Lt=ye;break}Lt===void 0?O(gt,X,te,!0):(rt[Lt-He]=ke+1,Lt>=We?We=Lt:Pe=!0,p(gt,J[Lt],he,null,X,te,Se,Ee,be),xe++)}const mt=Pe?E3(rt):Dl;for(ye=mt.length-1,ke=_e-1;ke>=0;ke--){const gt=He+ke,Lt=J[gt],dt=gt+1<Be?J[gt+1].el:re;rt[ke]===0?p(null,Lt,he,dt,X,te,Se,Ee,be):Pe&&(ye<0||ke!==mt[ye]?j(Lt,he,dt,2):ye--)}}},j=(z,J,he,re,X=null)=>{const{el:te,type:Se,transition:Ee,children:be,shapeFlag:ke}=z;if(ke&6){j(z.component.subTree,J,he,re);return}if(ke&128){z.suspense.move(J,he,re);return}if(ke&64){Se.move(z,J,he,Y);return}if(Se===Oe){n(te,J,he);for(let Ie=0;Ie<be.length;Ie++)j(be[Ie],J,he,re);n(z.anchor,J,he);return}if(Se===Ao){S(z,J,he);return}if(re!==2&&ke&1&&Ee)if(re===0)Ee.beforeEnter(te),n(te,J,he),Xr(()=>Ee.enter(te),X);else{const{leave:Ie,delayLeave:je,afterLeave:Ue}=Ee,He=()=>{z.ctx.isUnmounted?s(te):n(te,J,he)},qe=()=>{Ie(te,()=>{He(),Ue&&Ue()})};je?je(te,He,qe):qe()}else n(te,J,he)},O=(z,J,he,re=!1,X=!1)=>{const{type:te,props:Se,ref:Ee,children:be,dynamicChildren:ke,shapeFlag:Be,patchFlag:Ie,dirs:je,cacheIndex:Ue}=z;if(Ie===-2&&(X=!1),Ee!=null&&(Ya(),Nl(Ee,null,he,z,!0),Qa()),Ue!=null&&(J.renderCache[Ue]=void 0),Be&256){J.ctx.deactivate(z);return}const He=Be&1&&je,qe=!Ui(z);let ye;if(qe&&(ye=Se&&Se.onVnodeBeforeUnmount)&&ss(ye,J,z),Be&6)se(z.component,he,re);else{if(Be&128){z.suspense.unmount(he,re);return}He&&ua(z,null,J,"beforeUnmount"),Be&64?z.type.remove(z,J,he,Y,re):ke&&!ke.hasOnce&&(te!==Oe||Ie>0&&Ie&64)?ve(ke,J,he,!1,!0):(te===Oe&&Ie&384||!X&&Be&16)&&ve(be,J,he),re&&W(z)}(qe&&(ye=Se&&Se.onVnodeUnmounted)||He)&&Xr(()=>{ye&&ss(ye,J,z),He&&ua(z,null,J,"unmounted")},he)},W=z=>{const{type:J,el:he,anchor:re,transition:X}=z;if(J===Oe){K(he,re);return}if(J===Ao){I(z);return}const te=()=>{s(he),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(z.shapeFlag&1&&X&&!X.persisted){const{leave:Se,delayLeave:Ee}=X,be=()=>Se(he,te);Ee?Ee(z.el,te,be):be()}else te()},K=(z,J)=>{let he;for(;z!==J;)he=f(z),s(z),z=he;s(J)},se=(z,J,he)=>{const{bum:re,scope:X,job:te,subTree:Se,um:Ee,m:be,a:ke,parent:Be,slots:{__:Ie}}=z;h0(be),h0(ke),re&&Pl(re),Be&&lt(Ie)&&Ie.forEach(je=>{Be.renderCache[je]=void 0}),X.stop(),te&&(te.flags|=8,O(Se,z,J,he)),Ee&&Xr(Ee,J),Xr(()=>{z.isUnmounted=!0},J),J&&J.pendingBranch&&!J.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===J.pendingId&&(J.deps--,J.deps===0&&J.resolve())},ve=(z,J,he,re=!1,X=!1,te=0)=>{for(let Se=te;Se<z.length;Se++)O(z[Se],J,he,re,X)},ie=z=>{if(z.shapeFlag&6)return ie(z.component.subTree);if(z.shapeFlag&128)return z.suspense.next();const J=f(z.anchor||z.el),he=J&&J[SS];return he?f(he):J};let de=!1;const ee=(z,J,he)=>{z==null?J._vnode&&O(J._vnode,null,null,!0):p(J._vnode||null,z,J,null,null,null,he),J._vnode=z,de||(de=!0,vy(),d0(),de=!1)},Y={p,um:O,m:j,r:W,mt:L,mc:_,pc:H,pbc:x,n:ie,o:t};let ge,q;return e&&([ge,q]=e(Y)),{render:ee,hydrate:ge,createApp:h3(ee,ge)}}function Ep({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function fo({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function rT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Bg(t,e,r=!1){const n=t.children,s=e.children;if(lt(n)&&lt(s))for(let i=0;i<n.length;i++){const a=n[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=Ai(s[i]),o.el=a.el),!r&&o.patchFlag!==-2&&Bg(a,o)),o.type===Vi&&(o.el=a.el),o.type===Ur&&!o.el&&(o.el=a.el)}}function E3(t){const e=t.slice(),r=[0];let n,s,i,a,o;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=r[r.length-1],t[s]<c){e[n]=s,r.push(n);continue}for(i=0,a=r.length-1;i<a;)o=i+a>>1,t[r[o]]<c?i=o+1:a=o;c<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,a=r[i-1];i-- >0;)r[i]=a,a=e[a];return r}function nT(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:nT(e)}function h0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const sT=Symbol.for("v-scx"),aT=()=>_s(sT);function _3(t,e){return gd(t,null,e)}function b3(t,e){return gd(t,null,{flush:"post"})}function iT(t,e){return gd(t,null,{flush:"sync"})}function er(t,e,r){return gd(t,e,r)}function gd(t,e,r=Ht){const{immediate:n,deep:s,flush:i,once:a}=r,o=lr({},r),l=e&&n||!e&&i!=="post";let c;if(ql){if(i==="sync"){const h=aT();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=ks,h.resume=ks,h.pause=ks,h}}const u=Qr;o.call=(h,v,p)=>Fs(h,u,v,p);let d=!1;i==="post"?o.scheduler=h=>{Xr(h,u&&u.suspense)}:i!=="sync"&&(d=!0,o.scheduler=(h,v)=>{v?h():Cg(h)}),o.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=uD(t,e,o);return ql&&(c?c.push(f):l&&f()),f}function S3(t,e,r){const n=this.proxy,s=mr(t)?t.includes(".")?oT(n,t):()=>n[t]:t.bind(n,n);let i;xt(e)?i=e:(i=e.handler,r=e);const a=Fo(this),o=gd(s,i.bind(n),r);return a(),o}function oT(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}function T3(t,e,r=Ht){const n=Ls(),s=pn(e),i=os(e),a=lT(t,s),o=pS((l,c)=>{let u,d=Ht,f;return iT(()=>{const h=t[s];zn(u,h)&&(u=h,c())}),{get(){return l(),r.get?r.get(u):u},set(h){const v=r.set?r.set(h):h;if(!zn(v,u)&&!(d!==Ht&&zn(h,d)))return;const p=n.vnode.props;p&&(e in p||s in p||i in p)&&(`onUpdate:${e}`in p||`onUpdate:${s}`in p||`onUpdate:${i}`in p)||(u=h,c()),n.emit(`update:${e}`,v),zn(h,v)&&zn(h,d)&&!zn(v,f)&&c(),d=h,f=v}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||Ht:o,done:!1}:{done:!0}}}},o}const lT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${pn(e)}Modifiers`]||t[`${os(e)}Modifiers`];function A3(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Ht;let s=r;const i=e.startsWith("update:"),a=i&&lT(n,e.slice(7));a&&(a.trim&&(s=r.map(u=>mr(u)?u.trim():u)),a.number&&(s=r.map(a0)));let o,l=n[o=iu(e)]||n[o=iu(pn(e))];!l&&i&&(l=n[o=iu(os(e))]),l&&Fs(l,t,6,s);const c=n[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Fs(c,t,6,s)}}function cT(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let a={},o=!1;if(!xt(t)){const l=c=>{const u=cT(c,e,!0);u&&(o=!0,lr(a,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!o?(ar(t)&&n.set(t,null),null):(lt(i)?i.forEach(l=>a[l]=null):lr(a,i),ar(t)&&n.set(t,a),a)}function Eh(t,e){return!t||!hd(e)?!1:(e=e.slice(2).replace(/Once$/,""),Zt(t,e[0].toLowerCase()+e.slice(1))||Zt(t,os(e))||Zt(t,e))}function Vf(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:v,inheritAttrs:p}=t,g=Hu(t);let y,E;try{if(r.shapeFlag&4){const I=s||n,R=I;y=is(c.call(R,I,u,d,h,f,v)),E=o}else{const I=e;y=is(I.length>1?I(d,{attrs:o,slots:a,emit:l}):I(d,null)),E=e.props?o:C3(o)}}catch(I){fu.length=0,jo(I,t,1),y=nt(Ur)}let S=y;if(E&&p!==!1){const I=Object.keys(E),{shapeFlag:R}=S;I.length&&R&7&&(i&&I.some(hg)&&(E=I3(E,i)),S=Ea(S,E,!1,!0))}return r.dirs&&(S=Ea(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(r.dirs):r.dirs),r.transition&&Za(S,r.transition),y=S,Hu(g),y}function w3(t,e=!0){let r;for(let n=0;n<t.length;n++){const s=t[n];if(ei(s)){if(s.type!==Ur||s.children==="v-if"){if(r)return;r=s}}else return}return r}const C3=t=>{let e;for(const r in t)(r==="class"||r==="style"||hd(r))&&((e||(e={}))[r]=t[r]);return e},I3=(t,e)=>{const r={};for(const n in t)(!hg(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function k3(t,e,r){const{props:n,children:s,component:i}=t,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Iy(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(a[f]!==n[f]&&!Eh(c,f))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?Iy(n,a,c):!0:!!a;return!1}function Iy(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!Eh(r,i))return!0}return!1}function _h({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const p0=t=>t.__isSuspense;let lv=0;const D3={name:"Suspense",__isSuspense:!0,process(t,e,r,n,s,i,a,o,l,c){if(t==null)F3(e,r,n,s,i,a,o,l,c);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}P3(t,e,r,n,s,a,o,l,c)}},hydrate:O3,normalize:N3},R3=D3;function Gu(t,e){const r=t.props&&t.props[e];xt(r)&&r()}function F3(t,e,r,n,s,i,a,o,l){const{p:c,o:{createElement:u}}=l,d=u("div"),f=t.suspense=uT(t,s,n,e,d,r,i,a,o,l);c(null,f.pendingBranch=t.ssContent,d,null,n,f,i,a),f.deps>0?(Gu(t,"onPending"),Gu(t,"onFallback"),c(null,t.ssFallback,e,r,n,null,i,a),Ll(f,t.ssFallback)):f.resolve(!1,!0)}function P3(t,e,r,n,s,i,a,o,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,h=e.ssFallback,{activeBranch:v,pendingBranch:p,isInFallback:g,isHydrating:y}=d;if(p)d.pendingBranch=f,zs(f,p)?(l(p,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0?d.resolve():g&&(y||(l(v,h,r,n,s,null,i,a,o),Ll(d,h)))):(d.pendingId=lv++,y?(d.isHydrating=!1,d.activeBranch=p):c(p,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),g?(l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0?d.resolve():(l(v,h,r,n,s,null,i,a,o),Ll(d,h))):v&&zs(f,v)?(l(v,f,r,n,s,d,i,a,o),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0&&d.resolve()));else if(v&&zs(f,v))l(v,f,r,n,s,d,i,a,o),Ll(d,f);else if(Gu(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=lv++,l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0)d.resolve();else{const{timeout:E,pendingId:S}=d;E>0?setTimeout(()=>{d.pendingId===S&&d.fallback(h)},E):E===0&&d.fallback(h)}}function uT(t,e,r,n,s,i,a,o,l,c,u=!1){const{p:d,m:f,um:h,n:v,o:{parentNode:p,remove:g}}=c;let y;const E=L3(t);E&&e&&e.pendingBranch&&(y=e.pendingId,e.deps++);const S=t.props?i0(t.props.timeout):void 0,I=i,R={vnode:t,parent:e,parentComponent:r,namespace:a,container:n,hiddenContainer:s,deps:0,pendingId:lv++,timeout:typeof S=="number"?S:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(D=!1,C=!1){const{vnode:_,activeBranch:b,pendingBranch:x,pendingId:w,effects:A,parentComponent:k,container:L}=R;let G=!1;R.isHydrating?R.isHydrating=!1:D||(G=b&&x.transition&&x.transition.mode==="out-in",G&&(b.transition.afterLeave=()=>{w===R.pendingId&&(f(x,L,i===I?v(b):i,0),Vu(A))}),b&&(p(b.el)===L&&(i=v(b)),h(b,k,R,!0)),G||f(x,L,i,0)),Ll(R,x),R.pendingBranch=null,R.isInFallback=!1;let P=R.parent,M=!1;for(;P;){if(P.pendingBranch){P.effects.push(...A),M=!0;break}P=P.parent}!M&&!G&&Vu(A),R.effects=[],E&&e&&e.pendingBranch&&y===e.pendingId&&(e.deps--,e.deps===0&&!C&&e.resolve()),Gu(_,"onResolve")},fallback(D){if(!R.pendingBranch)return;const{vnode:C,activeBranch:_,parentComponent:b,container:x,namespace:w}=R;Gu(C,"onFallback");const A=v(_),k=()=>{R.isInFallback&&(d(null,D,x,A,b,null,w,o,l),Ll(R,D))},L=D.transition&&D.transition.mode==="out-in";L&&(_.transition.afterLeave=k),R.isInFallback=!0,h(_,b,null,!0),L||k()},move(D,C,_){R.activeBranch&&f(R.activeBranch,D,C,_),R.container=D},next(){return R.activeBranch&&v(R.activeBranch)},registerDep(D,C,_){const b=!!R.pendingBranch;b&&R.deps++;const x=D.vnode.el;D.asyncDep.catch(w=>{jo(w,D,0)}).then(w=>{if(D.isUnmounted||R.isUnmounted||R.pendingId!==D.suspenseId)return;D.asyncResolved=!0;const{vnode:A}=D;fv(D,w,!1),x&&(A.el=x);const k=!x&&D.subTree.el;C(D,A,p(x||D.subTree.el),x?null:v(D.subTree),R,a,_),k&&g(k),_h(D,A.el),b&&--R.deps===0&&R.resolve()})},unmount(D,C){R.isUnmounted=!0,R.activeBranch&&h(R.activeBranch,r,D,C),R.pendingBranch&&h(R.pendingBranch,r,D,C)}};return R}function O3(t,e,r,n,s,i,a,o,l){const c=e.suspense=uT(e,n,r,t.parentNode,document.createElement("div"),null,s,i,a,o,!0),u=l(t,c.pendingBranch=e.ssContent,r,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function N3(t){const{shapeFlag:e,children:r}=t,n=e&32;t.ssContent=ky(n?r.default:r),t.ssFallback=n?ky(r.fallback):nt(Ur)}function ky(t){let e;if(xt(t)){const r=Ro&&t._c;r&&(t._d=!1,N()),t=t(),r&&(t._d=!0,e=On,fT())}return lt(t)&&(t=w3(t)),t=is(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(r=>r!==t)),t}function dT(t,e){e&&e.pendingBranch?lt(t)?e.effects.push(...t):e.effects.push(t):Vu(t)}function Ll(t,e){t.activeBranch=e;const{vnode:r,parentComponent:n}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;r.el=s,n&&n.subTree===r&&(n.vnode.el=s,_h(n,s))}function L3(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Oe=Symbol.for("v-fgt"),Vi=Symbol.for("v-txt"),Ur=Symbol.for("v-cmt"),Ao=Symbol.for("v-stc"),fu=[];let On=null;function N(t=!1){fu.push(On=t?null:[])}function fT(){fu.pop(),On=fu[fu.length-1]||null}let Ro=1;function cv(t,e=!1){Ro+=t,t<0&&On&&e&&(On.hasOnce=!0)}function hT(t){return t.dynamicChildren=Ro>0?On||Dl:null,fT(),Ro>0&&On&&On.push(t),t}function U(t,e,r,n,s,i){return hT(m(t,e,r,n,s,i,!0))}function Rn(t,e,r,n,s){return hT(nt(t,e,r,n,s,!0))}function ei(t){return t?t.__v_isVNode===!0:!1}function zs(t,e){return t.type===e.type&&t.key===e.key}function M3(t){}const pT=({key:t})=>t??null,$f=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?mr(t)||wr(t)||xt(t)?{i:Jr,r:t,k:e,f:!!r}:t:null);function m(t,e=null,r=null,n=0,s=null,i=t===Oe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&pT(e),ref:e&&$f(e),scopeId:ph,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Jr};return o?(Ug(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=mr(r)?8:16),Ro>0&&!a&&On&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&On.push(l),l}const nt=B3;function B3(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===US)&&(t=Ur),ei(t)){const o=Ea(t,e,!0);return r&&Ug(o,r),Ro>0&&!i&&On&&(o.shapeFlag&6?On[On.indexOf(t)]=o:On.push(o)),o.patchFlag=-2,o}if(W3(t)&&(t=t.__vccOpts),e){e=mT(e);let{class:o,style:l}=e;o&&!mr(o)&&(e.class=ot(o)),ar(l)&&(fh(l)&&!lt(l)&&(l=lr({},l)),e.style=In(l))}const a=mr(t)?1:p0(t)?128:TS(t)?64:ar(t)?4:xt(t)?2:0;return m(t,e,r,n,s,a,i,!0)}function mT(t){return t?fh(t)||KS(t)?lr({},t):t:null}function Ea(t,e,r=!1,n=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=t,c=e?vT(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&pT(c),ref:e&&e.ref?r&&i?lt(i)?i.concat($f(e)):[i,$f(e)]:$f(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Oe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ea(t.ssContent),ssFallback:t.ssFallback&&Ea(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&Za(u,l.clone(u)),u}function Me(t=" ",e=0){return nt(Vi,null,t,e)}function Xn(t,e){const r=nt(Ao,null,t);return r.staticCount=e,r}function Fe(t="",e=!1){return e?(N(),Rn(Ur,null,t)):nt(Ur,null,t)}function is(t){return t==null||typeof t=="boolean"?nt(Ur):lt(t)?nt(Oe,null,t.slice()):ei(t)?Ai(t):nt(Vi,null,String(t))}function Ai(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ea(t)}function Ug(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(lt(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Ug(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!KS(e)?e._ctx=Jr:s===3&&Jr&&(Jr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else xt(e)?(e={default:e,_ctx:Jr},r=32):(e=String(e),n&64?(r=16,e=[Me(e)]):r=8);t.children=e,t.shapeFlag|=r}function vT(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=ot([e.class,n.class]));else if(s==="style")e.style=In([e.style,n.style]);else if(hd(s)){const i=e[s],a=n[s];a&&i!==a&&!(lt(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=n[s])}return e}function ss(t,e,r,n=null){Fs(t,e,7,[r,n])}const U3=jS();let V3=0;function gT(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||U3,i={uid:V3++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new gg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:XS(n,s),emitsOptions:cT(n,s),emit:null,emitted:null,propsDefaults:Ht,inheritAttrs:n.inheritAttrs,ctx:Ht,data:Ht,props:Ht,attrs:Ht,slots:Ht,refs:Ht,setupState:Ht,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=A3.bind(null,i),t.ce&&t.ce(i),i}let Qr=null;const Ls=()=>Qr||Jr;let m0,uv;{const t=ih(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};m0=e("__VUE_INSTANCE_SETTERS__",r=>Qr=r),uv=e("__VUE_SSR_SETTERS__",r=>ql=r)}const Fo=t=>{const e=Qr;return m0(t),t.scope.on(),()=>{t.scope.off(),m0(e)}},dv=()=>{Qr&&Qr.scope.off(),m0(null)};function xT(t){return t.vnode.shapeFlag&4}let ql=!1;function yT(t,e=!1,r=!1){e&&uv(e);const{props:n,children:s}=t.vnode,i=xT(t);p3(t,n,i,e),x3(t,s,r||e);const a=i?$3(t,e):void 0;return e&&uv(!1),a}function $3(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,sv);const{setup:n}=r;if(n){Ya();const s=t.setupContext=n.length>1?_T(t):null,i=Fo(t),a=fc(n,t,0,[t.props,s]),o=mg(a);if(Qa(),i(),(o||t.sp)&&!Ui(t)&&Dg(t),o){if(a.then(dv,dv),e)return a.then(l=>{fv(t,l,e)}).catch(l=>{jo(l,t,0)});t.asyncDep=a}else fv(t,a,e)}else ET(t,e)}function fv(t,e,r){xt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ar(e)&&(t.setupState=wg(e)),ET(t,r)}let v0,hv;function H3(t){v0=t,hv=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,KD))}}const j3=()=>!v0;function ET(t,e,r){const n=t.type;if(!t.render){if(!e&&v0&&!n.render){const s=n.template||Ng(t).template;if(s){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,c=lr(lr({isCustomElement:i,delimiters:o},a),l);n.render=v0(s,c)}}t.render=n.render||ks,hv&&hv(t)}{const s=Fo(t);Ya();try{o3(t)}finally{Qa(),s()}}}const G3={get(t,e){return kn(t,"get",""),t[e]}};function _T(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,G3),slots:t.slots,emit:t.emit,expose:e}}function xd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(wg(hh(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in uu)return uu[r](t)},has(e,r){return r in e||r in uu}})):t.proxy}function pv(t,e=!0){return xt(t)?t.displayName||t.name:t.name||e&&t.__name}function W3(t){return xt(t)&&"__vccOpts"in t}const Ae=(t,e)=>iD(t,e,ql);function bh(t,e,r){const n=arguments.length;return n===2?ar(e)&&!lt(e)?ei(e)?nt(t,null,[e]):nt(t,e):nt(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&ei(r)&&(r=[r]),nt(t,e,r))}function z3(){}function K3(t,e,r,n){const s=r[n];if(s&&bT(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=n,r[n]=i}function bT(t,e){const r=t.memo;if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(zn(r[n],e[n]))return!1;return Ro>0&&On&&On.push(t),!0}const ST="3.5.17",q3=ks,X3=mD,Y3=yl,Q3=bS,J3={createComponentInstance:gT,setupComponent:yT,renderComponentRoot:Vf,setCurrentRenderingInstance:Hu,isVNode:ei,normalizeVNode:is,getComponentPublicInstance:xd,ensureValidVNode:Og,pushWarningContext:dD,popWarningContext:fD},Z3=J3,eR=null,tR=null,rR=null;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mv;const Dy=typeof window<"u"&&window.trustedTypes;if(Dy)try{mv=Dy.createPolicy("vue",{createHTML:t=>t})}catch{}const TT=mv?t=>mv.createHTML(t):t=>t,nR="http://www.w3.org/2000/svg",sR="http://www.w3.org/1998/Math/MathML",Ba=typeof document<"u"?document:null,Ry=Ba&&Ba.createElement("template"),aR={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?Ba.createElementNS(nR,t):e==="mathml"?Ba.createElementNS(sR,t):r?Ba.createElement(t,{is:r}):Ba.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>Ba.createTextNode(t),createComment:t=>Ba.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ba.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const a=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{Ry.innerHTML=TT(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=Ry.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},mi="transition",Fc="animation",Xl=Symbol("_vtc"),AT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},wT=lr({},kg,AT),iR=t=>(t.displayName="Transition",t.props=wT,t),oR=iR((t,{slots:e})=>bh(kS,CT(t),e)),ho=(t,e=[])=>{lt(t)?t.forEach(r=>r(...e)):t&&t(...e)},Fy=t=>t?lt(t)?t.some(e=>e.length>1):t.length>1:!1;function CT(t){const e={};for(const A in t)A in AT||(e[A]=t[A]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=i,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:h=`${r}-leave-to`}=t,v=lR(s),p=v&&v[0],g=v&&v[1],{onBeforeEnter:y,onEnter:E,onEnterCancelled:S,onLeave:I,onLeaveCancelled:R,onBeforeAppear:D=y,onAppear:C=E,onAppearCancelled:_=S}=e,b=(A,k,L,G)=>{A._enterCancelled=G,Ei(A,k?u:o),Ei(A,k?c:a),L&&L()},x=(A,k)=>{A._isLeaving=!1,Ei(A,d),Ei(A,h),Ei(A,f),k&&k()},w=A=>(k,L)=>{const G=A?C:E,P=()=>b(k,A,L);ho(G,[k,P]),Py(()=>{Ei(k,A?l:i),oa(k,A?u:o),Fy(G)||Oy(k,n,p,P)})};return lr(e,{onBeforeEnter(A){ho(y,[A]),oa(A,i),oa(A,a)},onBeforeAppear(A){ho(D,[A]),oa(A,l),oa(A,c)},onEnter:w(!1),onAppear:w(!0),onLeave(A,k){A._isLeaving=!0;const L=()=>x(A,k);oa(A,d),A._enterCancelled?(oa(A,f),vv()):(vv(),oa(A,f)),Py(()=>{A._isLeaving&&(Ei(A,d),oa(A,h),Fy(I)||Oy(A,n,g,L))}),ho(I,[A,L])},onEnterCancelled(A){b(A,!1,void 0,!0),ho(S,[A])},onAppearCancelled(A){b(A,!0,void 0,!0),ho(_,[A])},onLeaveCancelled(A){x(A),ho(R,[A])}})}function lR(t){if(t==null)return null;if(ar(t))return[_p(t.enter),_p(t.leave)];{const e=_p(t);return[e,e]}}function _p(t){return i0(t)}function oa(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[Xl]||(t[Xl]=new Set)).add(e)}function Ei(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[Xl];r&&(r.delete(e),r.size||(t[Xl]=void 0))}function Py(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let cR=0;function Oy(t,e,r,n){const s=t._endId=++cR,i=()=>{s===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:a,timeout:o,propCount:l}=IT(t,e);if(!a)return n();const c=a+"end";let u=0;const d=()=>{t.removeEventListener(c,f),i()},f=h=>{h.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),t.addEventListener(c,f)}function IT(t,e){const r=window.getComputedStyle(t),n=v=>(r[v]||"").split(", "),s=n(`${mi}Delay`),i=n(`${mi}Duration`),a=Ny(s,i),o=n(`${Fc}Delay`),l=n(`${Fc}Duration`),c=Ny(o,l);let u=null,d=0,f=0;e===mi?a>0&&(u=mi,d=a,f=i.length):e===Fc?c>0&&(u=Fc,d=c,f=l.length):(d=Math.max(a,c),u=d>0?a>c?mi:Fc:null,f=u?u===mi?i.length:l.length:0);const h=u===mi&&/\b(transform|all)(,|$)/.test(n(`${mi}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function Ny(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>Ly(r)+Ly(t[n])))}function Ly(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function vv(){return document.body.offsetHeight}function uR(t,e,r){const n=t[Xl];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const g0=Symbol("_vod"),kT=Symbol("_vsh"),DT={beforeMount(t,{value:e},{transition:r}){t[g0]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):Pc(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),Pc(t,!0),n.enter(t)):n.leave(t,()=>{Pc(t,!1)}):Pc(t,e))},beforeUnmount(t,{value:e}){Pc(t,e)}};function Pc(t,e){t.style.display=e?t[g0]:"none",t[kT]=!e}function dR(){DT.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const RT=Symbol("");function fR(t){const e=Ls();if(!e)return;const r=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>x0(i,s))},n=()=>{const s=t(e.proxy);e.ce?x0(e.ce,s):gv(e.subTree,s),r(s)};Rg(()=>{Vu(n)}),Jt(()=>{er(n,ks,{flush:"post"});const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),to(()=>s.disconnect())})}function gv(t,e){if(t.shapeFlag&128){const r=t.suspense;t=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{gv(r.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)x0(t.el,e);else if(t.type===Oe)t.children.forEach(r=>gv(r,e));else if(t.type===Ao){let{el:r,anchor:n}=t;for(;r&&(x0(r,e),r!==n);)r=r.nextSibling}}function x0(t,e){if(t.nodeType===1){const r=t.style;let n="";for(const s in e)r.setProperty(`--${s}`,e[s]),n+=`--${s}: ${e[s]};`;r[RT]=n}}const hR=/(^|;)\s*display\s*:/;function pR(t,e,r){const n=t.style,s=mr(r);let i=!1;if(r&&!s){if(e)if(mr(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&Hf(n,o,"")}else for(const a in e)r[a]==null&&Hf(n,a,"");for(const a in r)a==="display"&&(i=!0),Hf(n,a,r[a])}else if(s){if(e!==r){const a=n[RT];a&&(r+=";"+a),n.cssText=r,i=hR.test(r)}}else e&&t.removeAttribute("style");g0 in t&&(t[g0]=i?n.display:"",t[kT]&&(n.display="none"))}const My=/\s*!important$/;function Hf(t,e,r){if(lt(r))r.forEach(n=>Hf(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=mR(t,e);My.test(r)?t.setProperty(os(n),r.replace(My,""),"important"):t[n]=r}}const By=["Webkit","Moz","ms"],bp={};function mR(t,e){const r=bp[e];if(r)return r;let n=pn(e);if(n!=="filter"&&n in t)return bp[e]=n;n=pd(n);for(let s=0;s<By.length;s++){const i=By[s]+n;if(i in t)return bp[e]=i}return e}const Uy="http://www.w3.org/1999/xlink";function Vy(t,e,r,n,s,i=Ck(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(Uy,e.slice(6,e.length)):t.setAttributeNS(Uy,e,r):r==null||i&&!qb(r)?t.removeAttribute(e):t.setAttribute(e,i?"":ea(r)?String(r):r)}function $y(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?TT(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=qb(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(s||e)}function $a(t,e,r,n){t.addEventListener(e,r,n)}function vR(t,e,r,n){t.removeEventListener(e,r,n)}const Hy=Symbol("_vei");function gR(t,e,r,n,s=null){const i=t[Hy]||(t[Hy]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=xR(e);if(n){const c=i[e]=_R(n,s);$a(t,o,c,l)}else a&&(vR(t,o,a,l),i[e]=void 0)}}const jy=/(?:Once|Passive|Capture)$/;function xR(t){let e;if(jy.test(t)){e={};let n;for(;n=t.match(jy);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):os(t.slice(2)),e]}let Sp=0;const yR=Promise.resolve(),ER=()=>Sp||(yR.then(()=>Sp=0),Sp=Date.now());function _R(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Fs(bR(n,r.value),e,5,[n])};return r.value=t,r.attached=ER(),r}function bR(t,e){if(lt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Gy=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,SR=(t,e,r,n,s,i)=>{const a=s==="svg";e==="class"?uR(t,n,a):e==="style"?pR(t,r,n):hd(e)?hg(e)||gR(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):TR(t,e,n,a))?($y(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Vy(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!mr(n))?$y(t,pn(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Vy(t,e,n,a))};function TR(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Gy(e)&&xt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Gy(e)&&mr(r)?!1:e in t}const Wy={};/*! #__NO_SIDE_EFFECTS__ */function FT(t,e,r){const n=md(t,e);sh(n)&&lr(n,e);class s extends Sh{constructor(a){super(n,a,r)}}return s.def=n,s}/*! #__NO_SIDE_EFFECTS__ */const AR=(t,e)=>FT(t,e,GT),wR=typeof HTMLElement<"u"?HTMLElement:class{};class Sh extends wR{constructor(e,r={},n=E0){super(),this._def=e,this._props=r,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==E0?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Sh){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,Go(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:a}=n;let o;if(i&&!lt(i))for(const l in i){const c=i[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=i0(this._props[l])),(o||(o=Object.create(null)))[pn(l)]=!0)}this._numberProps=o,this._resolveProps(n),this.shadowRoot&&this._applyStyles(a),this._mount(n)},r=this._def.__asyncLoader;r?this._pendingResolve=r().then(n=>{n.configureApp=this._def.configureApp,e(this._def=n,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const r=this._instance&&this._instance.exposed;if(r)for(const n in r)Zt(this,n)||Object.defineProperty(this,n,{get:()=>me(r[n])})}_resolveProps(e){const{props:r}=e,n=lt(r)?r:Object.keys(r||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s]);for(const s of n.map(pn))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const r=this.hasAttribute(e);let n=r?this.getAttribute(e):Wy;const s=pn(e);r&&this._numberProps&&this._numberProps[s]&&(n=i0(n)),this._setProp(s,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,r,n=!0,s=!1){if(r!==this._props[e]&&(r===Wy?delete this._props[e]:(this._props[e]=r,e==="key"&&this._app&&(this._app._ceVNode.key=r)),s&&this._instance&&this._update(),n)){const i=this._ob;i&&i.disconnect(),r===!0?this.setAttribute(os(e),""):typeof r=="string"||typeof r=="number"?this.setAttribute(os(e),r+""):r||this.removeAttribute(os(e)),i&&i.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),jT(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const r=nt(this._def,lr(e,this._props));return this._instance||(r.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const s=(i,a)=>{this.dispatchEvent(new CustomEvent(i,sh(a[0])?lr({detail:a},a[0]):{detail:a}))};n.emit=(i,...a)=>{s(i,a),os(i)!==i&&s(os(i),a)},this._setParent()}),r}_applyStyles(e,r){if(!e)return;if(r){if(r===this._def||this._styleChildren.has(r))return;this._styleChildren.add(r)}const n=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");n&&i.setAttribute("nonce",n),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let r;for(;r=this.firstChild;){const n=r.nodeType===1&&r.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(r),this.removeChild(r)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),r=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const s=e[n],i=s.getAttribute("name")||"default",a=this._slots[i],o=s.parentNode;if(a)for(const l of a){if(r&&l.nodeType===1){const c=r+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let d;for(;d=u.nextNode();)d.setAttribute(c,"")}o.insertBefore(l,s)}else for(;s.firstChild;)o.insertBefore(s.firstChild,s);o.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function PT(t){const e=Ls(),r=e&&e.ce;return r||null}function CR(){const t=PT();return t&&t.shadowRoot}function IR(t="$style"){{const e=Ls();if(!e)return Ht;const r=e.type.__cssModules;if(!r)return Ht;const n=r[t];return n||Ht}}const OT=new WeakMap,NT=new WeakMap,y0=Symbol("_moveCb"),zy=Symbol("_enterCb"),kR=t=>(delete t.props.mode,t),DR=kR({name:"TransitionGroup",props:lr({},wT,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=Ls(),n=Ig();let s,i;return xh(()=>{if(!s.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!NR(s[0].el,r.vnode.el,a)){s=[];return}s.forEach(FR),s.forEach(PR);const o=s.filter(OR);vv(),o.forEach(l=>{const c=l.el,u=c.style;oa(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[y0]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c[y0]=null,Ei(c,a))};c.addEventListener("transitionend",d)}),s=[]}),()=>{const a=Vt(t),o=CT(a);let l=a.tag||Oe;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),Za(u,Kl(u,o,n,r)),OT.set(u,u.el.getBoundingClientRect()))}i=e.default?vh(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&Za(u,Kl(u,o,n,r))}return nt(l,null,i)}}}),RR=DR;function FR(t){const e=t.el;e[y0]&&e[y0](),e[zy]&&e[zy]()}function PR(t){NT.set(t,t.el.getBoundingClientRect())}function OR(t){const e=OT.get(t),r=NT.get(t),n=e.left-r.left,s=e.top-r.top;if(n||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${s}px)`,i.transitionDuration="0s",t}}function NR(t,e,r){const n=t.cloneNode(),s=t[Xl];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(n);const{hasTransform:a}=IT(n);return i.removeChild(n),a}const Ki=t=>{const e=t.props["onUpdate:modelValue"]||!1;return lt(e)?r=>Pl(e,r):e};function LR(t){t.target.composing=!0}function Ky(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ds=Symbol("_assign"),At={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[Ds]=Ki(s);const i=n||s.props&&s.props.type==="number";$a(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;r&&(o=o.trim()),i&&(o=a0(o)),t[Ds](o)}),r&&$a(t,"change",()=>{t.value=t.value.trim()}),e||($a(t,"compositionstart",LR),$a(t,"compositionend",Ky),$a(t,"change",Ky))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:i}},a){if(t[Ds]=Ki(a),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?a0(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===l)||(t.value=l))}},Et={deep:!0,created(t,e,r){t[Ds]=Ki(r),$a(t,"change",()=>{const n=t._modelValue,s=Yl(t),i=t.checked,a=t[Ds];if(lt(n)){const o=oh(n,s),l=o!==-1;if(i&&!l)a(n.concat(s));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(Ho(n)){const o=new Set(n);i?o.add(s):o.delete(s),a(o)}else a(LT(t,i))})},mounted:qy,beforeUpdate(t,e,r){t[Ds]=Ki(r),qy(t,e,r)}};function qy(t,{value:e,oldValue:r},n){t._modelValue=e;let s;if(lt(e))s=oh(e,n.props.value)>-1;else if(Ho(e))s=e.has(n.props.value);else{if(e===r)return;s=zi(e,LT(t,!0))}t.checked!==s&&(t.checked=s)}const cs={created(t,{value:e},r){t.checked=zi(e,r.props.value),t[Ds]=Ki(r),$a(t,"change",()=>{t[Ds](Yl(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[Ds]=Ki(n),e!==r&&(t.checked=zi(e,n.props.value))}},hr={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=Ho(e);$a(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>r?a0(Yl(a)):Yl(a));t[Ds](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Go(()=>{t._assigning=!1})}),t[Ds]=Ki(n)},mounted(t,{value:e}){Xy(t,e)},beforeUpdate(t,e,r){t[Ds]=Ki(r)},updated(t,{value:e}){t._assigning||Xy(t,e)}};function Xy(t,e){const r=t.multiple,n=lt(e);if(!(r&&!n&&!Ho(e))){for(let s=0,i=t.options.length;s<i;s++){const a=t.options[s],o=Yl(a);if(r)if(n){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(c=>String(c)===String(o)):a.selected=oh(e,o)>-1}else a.selected=e.has(o);else if(zi(Yl(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Yl(t){return"_value"in t?t._value:t.value}function LT(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const MT={created(t,e,r){ff(t,e,r,null,"created")},mounted(t,e,r){ff(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){ff(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){ff(t,e,r,n,"updated")}};function BT(t,e){switch(t){case"SELECT":return hr;case"TEXTAREA":return At;default:switch(e){case"checkbox":return Et;case"radio":return cs;default:return At}}}function ff(t,e,r,n,s){const a=BT(t.tagName,r.props&&r.props.type)[s];a&&a(t,e,r,n)}function MR(){At.getSSRProps=({value:t})=>({value:t}),cs.getSSRProps=({value:t},e)=>{if(e.props&&zi(e.props.value,t))return{checked:!0}},Et.getSSRProps=({value:t},e)=>{if(lt(t)){if(e.props&&oh(t,e.props.value)>-1)return{checked:!0}}else if(Ho(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},MT.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const r=BT(e.type.toUpperCase(),e.props&&e.props.type);if(r.getSSRProps)return r.getSSRProps(t,e)}}const BR=["ctrl","shift","alt","meta"],UR={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>BR.some(r=>t[`${r}Key`]&&!e.includes(r))},bs=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...i)=>{for(let a=0;a<e.length;a++){const o=UR[e[a]];if(o&&o(s,e))return}return t(s,...i)})},VR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},UT=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=s=>{if(!("key"in s))return;const i=os(s.key);if(e.some(a=>a===i||VR[a]===i))return t(s)})},VT=lr({patchProp:SR},aR);let hu,Yy=!1;function $T(){return hu||(hu=ZS(VT))}function HT(){return hu=Yy?hu:eT(VT),Yy=!0,hu}const jT=(...t)=>{$T().render(...t)},$R=(...t)=>{HT().hydrate(...t)},E0=(...t)=>{const e=$T().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=zT(n);if(!s)return;const i=e._component;!xt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=r(s,!1,WT(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e},GT=(...t)=>{const e=HT().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=zT(n);if(s)return r(s,!0,WT(s))},e};function WT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function zT(t){return mr(t)?document.querySelector(t):t}let Qy=!1;const HR=()=>{Qy||(Qy=!0,MR(),dR())};/**
* vue v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const jR=()=>{},GR=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:kS,BaseTransitionPropsValidators:kg,Comment:Ur,DeprecationTypes:rR,EffectScope:gg,ErrorCodes:pD,ErrorTypeStrings:X3,Fragment:Oe,KeepAlive:VD,ReactiveEffect:Mu,Static:Ao,Suspense:R3,Teleport:bD,Text:Vi,TrackOpTypes:oD,Transition:oR,TransitionGroup:RR,TriggerOpTypes:lD,VueElement:Sh,assertNumber:hD,callWithAsyncErrorHandling:Fs,callWithErrorHandling:fc,camelize:pn,capitalize:pd,cloneVNode:Ea,compatUtils:tR,compile:jR,computed:Ae,createApp:E0,createBlock:Rn,createCommentVNode:Fe,createElementBlock:U,createElementVNode:m,createHydrationRenderer:eT,createPropsRestProxy:a3,createRenderer:ZS,createSSRApp:GT,createSlots:WD,createStaticVNode:Xn,createTextVNode:Me,createVNode:nt,customRef:pS,defineAsyncComponent:BD,defineComponent:md,defineCustomElement:FT,defineEmits:XD,defineExpose:YD,defineModel:ZD,defineOptions:QD,defineProps:qD,defineSSRCustomElement:AR,defineSlots:JD,devtools:Y3,effect:Dk,effectScope:xg,getCurrentInstance:Ls,getCurrentScope:yg,getCurrentWatcher:cD,getTransitionRawChildren:vh,guardReactiveProps:mT,h:bh,handleError:jo,hasInjectionContext:GS,hydrate:$R,hydrateOnIdle:FD,hydrateOnInteraction:LD,hydrateOnMediaQuery:ND,hydrateOnVisible:OD,initCustomFormatter:z3,initDirectivesForSSR:HR,inject:_s,isMemoSame:bT,isProxy:fh,isReactive:ma,isReadonly:Ja,isRef:wr,isRuntimeOnly:j3,isShallow:Es,isVNode:ei,markRaw:hh,mergeDefaults:n3,mergeModels:s3,mergeProps:vT,nextTick:Go,normalizeClass:ot,normalizeProps:Ak,normalizeStyle:In,onActivated:RS,onBeforeMount:OS,onBeforeUnmount:yh,onBeforeUpdate:Rg,onDeactivated:FS,onErrorCaptured:BS,onMounted:Jt,onRenderTracked:MS,onRenderTriggered:LS,onScopeDispose:Qb,onServerPrefetch:NS,onUnmounted:to,onUpdated:xh,onWatcherCleanup:gS,openBlock:N,popScopeId:yD,provide:du,proxyRefs:wg,pushScopeId:xD,queuePostFlushCb:Vu,reactive:Ns,readonly:Tg,ref:pe,registerRuntimeCompiler:H3,render:jT,renderList:Ge,renderSlot:VS,resolveComponent:Dr,resolveDirective:GD,resolveDynamicComponent:jD,resolveFilter:eR,resolveTransitionHooks:Kl,setBlockTracking:cv,setDevtoolsHook:Q3,setTransitionHooks:Za,shallowReactive:Sg,shallowReadonly:Yk,shallowRef:Ag,ssrContextKey:sT,ssrUtils:Z3,stop:Rk,toDisplayString:le,toHandlerKey:iu,toHandlers:zD,toRaw:Vt,toRef:sD,toRefs:mS,toValue:Zk,transformVNodeArgs:M3,triggerRef:Jk,unref:me,useAttrs:r3,useCssModule:IR,useCssVars:fR,useHost:PT,useId:TD,useModel:T3,useSSRContext:aT,useShadowRoot:CR,useSlots:t3,useTemplateRef:AD,useTransitionState:Ig,vModelCheckbox:Et,vModelDynamic:MT,vModelRadio:cs,vModelSelect:hr,vModelText:At,vShow:DT,version:ST,warn:q3,watch:er,watchEffect:_3,watchPostEffect:b3,watchSyncEffect:iT,withAsyncContext:i3,withCtx:mh,withDefaults:e3,withDirectives:Ve,withKeys:UT,withMemo:K3,withModifiers:bs,withScopeId:ED},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let KT;const Th=t=>KT=t,qT=Symbol();function xv(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var pu;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(pu||(pu={}));function WR(){const t=xg(!0),e=t.run(()=>pe({}));let r=[],n=[];const s=hh({install(i){Th(s),s._a=i,i.provide(qT,s),i.config.globalProperties.$pinia=s,n.forEach(a=>r.push(a)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const XT=()=>{};function Jy(t,e,r,n=XT){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&yg()&&Qb(s),s}function fl(t,...e){t.slice().forEach(r=>{r(...e)})}const zR=t=>t(),Zy=Symbol(),Tp=Symbol();function yv(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];xv(s)&&xv(n)&&t.hasOwnProperty(r)&&!wr(n)&&!ma(n)?t[r]=yv(s,n):t[r]=n}return t}const KR=Symbol();function qR(t){return!xv(t)||!t.hasOwnProperty(KR)}const{assign:_i}=Object;function XR(t){return!!(wr(t)&&t.effect)}function YR(t,e,r,n){const{state:s,actions:i,getters:a}=e,o=r.state.value[t];let l;function c(){o||(r.state.value[t]=s?s():{});const u=mS(r.state.value[t]);return _i(u,i,Object.keys(a||{}).reduce((d,f)=>(d[f]=hh(Ae(()=>{Th(r);const h=r._s.get(t);return a[f].call(h,h)})),d),{}))}return l=YT(t,c,e,r,n,!0),l}function YT(t,e,r={},n,s,i){let a;const o=_i({actions:{}},r),l={deep:!0};let c,u,d=[],f=[],h;const v=n.state.value[t];!i&&!v&&(n.state.value[t]={}),pe({});let p;function g(_){let b;c=u=!1,typeof _=="function"?(_(n.state.value[t]),b={type:pu.patchFunction,storeId:t,events:h}):(yv(n.state.value[t],_),b={type:pu.patchObject,payload:_,storeId:t,events:h});const x=p=Symbol();Go().then(()=>{p===x&&(c=!0)}),u=!0,fl(d,b,n.state.value[t])}const y=i?function(){const{state:b}=r,x=b?b():{};this.$patch(w=>{_i(w,x)})}:XT;function E(){a.stop(),d=[],f=[],n._s.delete(t)}const S=(_,b="")=>{if(Zy in _)return _[Tp]=b,_;const x=function(){Th(n);const w=Array.from(arguments),A=[],k=[];function L(M){A.push(M)}function G(M){k.push(M)}fl(f,{args:w,name:x[Tp],store:R,after:L,onError:G});let P;try{P=_.apply(this&&this.$id===t?this:R,w)}catch(M){throw fl(k,M),M}return P instanceof Promise?P.then(M=>(fl(A,M),M)).catch(M=>(fl(k,M),Promise.reject(M))):(fl(A,P),P)};return x[Zy]=!0,x[Tp]=b,x},I={_p:n,$id:t,$onAction:Jy.bind(null,f),$patch:g,$reset:y,$subscribe(_,b={}){const x=Jy(d,_,b.detached,()=>w()),w=a.run(()=>er(()=>n.state.value[t],A=>{(b.flush==="sync"?u:c)&&_({storeId:t,type:pu.direct,events:h},A)},_i({},l,b)));return x},$dispose:E},R=Ns(I);n._s.set(t,R);const C=(n._a&&n._a.runWithContext||zR)(()=>n._e.run(()=>(a=xg()).run(()=>e({action:S}))));for(const _ in C){const b=C[_];if(wr(b)&&!XR(b)||ma(b))i||(v&&qR(b)&&(wr(b)?b.value=v[_]:yv(b,v[_])),n.state.value[t][_]=b);else if(typeof b=="function"){const x=S(b,_);C[_]=x,o.actions[_]=b}}return _i(R,C),_i(Vt(R),C),Object.defineProperty(R,"$state",{get:()=>n.state.value[t],set:_=>{g(b=>{_i(b,_)})}}),n._p.forEach(_=>{_i(R,a.run(()=>_({store:R,app:n._a,pinia:n,options:o})))}),v&&i&&r.hydrate&&r.hydrate(R.$state,v),c=!0,u=!0,R}/*! #__NO_SIDE_EFFECTS__ */function QT(t,e,r){let n,s;const i=typeof e=="function";typeof t=="string"?(n=t,s=i?r:e):(s=t,n=t.id);function a(o,l){const c=GS();return o=o||(c?_s(qT,null):null),o&&Th(o),o=KT,o._s.has(n)||(i?YT(n,e,s,o):YR(n,s,o)),o._s.get(n)}return a.$id=n,a}var eE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},QR=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},ZT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|o>>4;let f=(o&15)<<2|c>>6,h=c&63;l||(h=64,a||(f=64)),n.push(r[u],r[d],r[f],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const d=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||d==null)throw new JR;const f=i<<2|o>>4;if(n.push(f),c!==64){const h=o<<4&240|c>>2;if(n.push(h),d!==64){const v=c<<6&192|d;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZR=function(t){const e=JT(t);return ZT.encodeByteArray(e,!0)},_0=function(t){return ZR(t).replace(/\./g,"")},eA=function(t){try{return ZT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=()=>eF().__FIREBASE_DEFAULTS__,rF=()=>{if(typeof process>"u"||typeof eE>"u")return;const t=eE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eA(t[1]);return e&&JSON.parse(e)},Ah=()=>{try{return tF()||rF()||nF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tA=t=>{var e,r;return(r=(e=Ah())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Vg=t=>{const e=tA(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},rA=()=>{var t;return(t=Ah())===null||t===void 0?void 0:t.config},nA=t=>{var e;return(e=Ah())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_0(JSON.stringify(r)),_0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function iF(){var t;const e=(t=Ah())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uF(){const t=Bn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dF(){return!iF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fF(){try{return typeof indexedDB=="object"}catch{return!1}}function hF(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="FirebaseError";class na extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=pF,Object.setPrototypeOf(this,na.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yd.prototype.create)}}class yd{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?mF(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new na(s,o,n)}}function mF(t,e){return t.replace(vF,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const vF=/\{\$([^}]+)}/g;function gF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function b0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(tE(i)&&tE(a)){if(!b0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function tE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function xF(t,e){const r=new yF(t,e);return r.subscribe.bind(r)}class yF{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");EF(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Ap),s.error===void 0&&(s.error=Ap),s.complete===void 0&&(s.complete=Ap);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EF(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Ap(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t){return t&&t._delegate?t._delegate:t}class ti{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new sF;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SF(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:bF(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bF(t){return t===vo?void 0:t}function SF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new _F(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($t||($t={}));const AF={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},wF=$t.INFO,CF={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},IF=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=CF[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $g{constructor(e){this.name=e,this._logLevel=wF,this._logHandler=IF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...e),this._logHandler(this,$t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...e),this._logHandler(this,$t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...e),this._logHandler(this,$t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...e),this._logHandler(this,$t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...e),this._logHandler(this,$t.ERROR,...e)}}const kF=(t,e)=>e.some(r=>t instanceof r);let rE,nE;function DF(){return rE||(rE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RF(){return nE||(nE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aA=new WeakMap,Ev=new WeakMap,iA=new WeakMap,wp=new WeakMap,Hg=new WeakMap;function FF(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r($i(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&aA.set(r,t)}).catch(()=>{}),Hg.set(e,t),e}function PF(t){if(Ev.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Ev.set(t,e)}let _v={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Ev.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iA.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return $i(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OF(t){_v=t(_v)}function NF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Cp(this),e,...r);return iA.set(n,e.sort?e.sort():[e]),$i(n)}:RF().includes(t)?function(...e){return t.apply(Cp(this),e),$i(aA.get(this))}:function(...e){return $i(t.apply(Cp(this),e))}}function LF(t){return typeof t=="function"?NF(t):(t instanceof IDBTransaction&&PF(t),kF(t,DF())?new Proxy(t,_v):t)}function $i(t){if(t instanceof IDBRequest)return FF(t);if(wp.has(t))return wp.get(t);const e=LF(t);return e!==t&&(wp.set(t,e),Hg.set(e,t)),e}const Cp=t=>Hg.get(t);function MF(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=$i(a);return n&&a.addEventListener("upgradeneeded",l=>{n($i(a.result),l.oldVersion,l.newVersion,$i(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const BF=["get","getKey","getAll","getAllKeys","count"],UF=["put","add","delete","clear"],Ip=new Map;function sE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ip.get(e))return Ip.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=UF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||BF.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return Ip.set(e,i),i}OF(t=>({...t,get:(e,r,n)=>sE(e,r)||t.get(e,r,n),has:(e,r)=>!!sE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if($F(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function $F(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bv="@firebase/app",aE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new $g("@firebase/app"),HF="@firebase/app-compat",jF="@firebase/analytics-compat",GF="@firebase/analytics",WF="@firebase/app-check-compat",zF="@firebase/app-check",KF="@firebase/auth",qF="@firebase/auth-compat",XF="@firebase/database",YF="@firebase/data-connect",QF="@firebase/database-compat",JF="@firebase/functions",ZF="@firebase/functions-compat",eP="@firebase/installations",tP="@firebase/installations-compat",rP="@firebase/messaging",nP="@firebase/messaging-compat",sP="@firebase/performance",aP="@firebase/performance-compat",iP="@firebase/remote-config",oP="@firebase/remote-config-compat",lP="@firebase/storage",cP="@firebase/storage-compat",uP="@firebase/firestore",dP="@firebase/vertexai-preview",fP="@firebase/firestore-compat",hP="firebase",pP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="[DEFAULT]",mP={[bv]:"fire-core",[HF]:"fire-core-compat",[GF]:"fire-analytics",[jF]:"fire-analytics-compat",[zF]:"fire-app-check",[WF]:"fire-app-check-compat",[KF]:"fire-auth",[qF]:"fire-auth-compat",[XF]:"fire-rtdb",[YF]:"fire-data-connect",[QF]:"fire-rtdb-compat",[JF]:"fire-fn",[ZF]:"fire-fn-compat",[eP]:"fire-iid",[tP]:"fire-iid-compat",[rP]:"fire-fcm",[nP]:"fire-fcm-compat",[sP]:"fire-perf",[aP]:"fire-perf-compat",[iP]:"fire-rc",[oP]:"fire-rc-compat",[lP]:"fire-gcs",[cP]:"fire-gcs-compat",[uP]:"fire-fst",[fP]:"fire-fst-compat",[dP]:"fire-vertex","fire-js":"fire-js",[hP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Map,vP=new Map,Tv=new Map;function iE(t,e){try{t.container.addComponent(e)}catch(r){ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function qi(t){const e=t.name;if(Tv.has(e))return ri.debug(`There were multiple attempts to register component ${e}.`),!1;Tv.set(e,t);for(const r of S0.values())iE(r,t);for(const r of vP.values())iE(r,t);return!0}function _d(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ha(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hi=new yd("app","Firebase",gP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ti("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=pP;function oA(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Sv,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Hi.create("bad-app-name",{appName:String(s)});if(r||(r=rA()),!r)throw Hi.create("no-options");const i=S0.get(s);if(i){if(b0(r,i.options)&&b0(n,i.config))return i;throw Hi.create("duplicate-app",{appName:s})}const a=new TF(s);for(const l of Tv.values())a.addComponent(l);const o=new xP(r,n,a);return S0.set(s,o),o}function bd(t=Sv){const e=S0.get(t);if(!e&&t===Sv&&rA())return oA();if(!e)throw Hi.create("no-app",{appName:t});return e}function Rs(t,e,r){var n;let s=(n=mP[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ri.warn(o.join(" "));return}qi(new ti(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="firebase-heartbeat-database",EP=1,Wu="firebase-heartbeat-store";let kp=null;function lA(){return kp||(kp=MF(yP,EP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wu)}catch(r){console.warn(r)}}}}).catch(t=>{throw Hi.create("idb-open",{originalErrorMessage:t.message})})),kp}async function _P(t){try{const r=(await lA()).transaction(Wu),n=await r.objectStore(Wu).get(cA(t));return await r.done,n}catch(e){if(e instanceof na)ri.warn(e.message);else{const r=Hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ri.warn(r.message)}}}async function oE(t,e){try{const n=(await lA()).transaction(Wu,"readwrite");await n.objectStore(Wu).put(e,cA(t)),await n.done}catch(r){if(r instanceof na)ri.warn(r.message);else{const n=Hi.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ri.warn(n.message)}}}function cA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=1024,SP=30*24*60*60*1e3;class TP{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new wP(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=lE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=SP}),this._storage.overwrite(this._heartbeatsCache))}catch(n){ri.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=lE(),{heartbeatsToSend:n,unsentEntries:s}=AP(this._heartbeatsCache.heartbeats),i=_0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return ri.warn(r),""}}}function lE(){return new Date().toISOString().substring(0,10)}function AP(t,e=bP){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),cE(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),cE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class wP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fF()?hF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await _P(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return oE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return oE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cE(t){return _0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t){qi(new ti("platform-logger",e=>new VF(e),"PRIVATE")),qi(new ti("heartbeat",e=>new TP(e),"PRIVATE")),Rs(bv,aE,t),Rs(bv,aE,"esm2017"),Rs("fire-js","")}CP("");function jg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function uA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IP=uA,dA=new yd("auth","Firebase",uA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new $g("@firebase/auth");function kP(t,...e){T0.logLevel<=$t.WARN&&T0.warn(`Auth (${Wo}): ${t}`,...e)}function jf(t,...e){T0.logLevel<=$t.ERROR&&T0.error(`Auth (${Wo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t,...e){throw Wg(t,...e)}function Js(t,...e){return Wg(t,...e)}function Gg(t,e,r){const n=Object.assign(Object.assign({},IP()),{[e]:r});return new yd("auth","Firebase",n).create(e,{appName:t.name})}function ji(t){return Gg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function DP(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&_a(t,"argument-error"),Gg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wg(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return dA.create(t,...e)}function Tt(t,e,...r){if(!t)throw Wg(e,...r)}function Ha(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jf(e),new Error(e)}function ni(t,e){t||Ha(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function RP(){return uE()==="http:"||uE()==="https:"}function uE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RP()||lF()||"connection"in navigator)?navigator.onLine:!0}function PP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,r){this.shortDelay=e,this.longDelay=r,ni(r>e,"Short delay should be less than long delay!"),this.isMobile=aF()||cF()}get(){return FP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t,e){ni(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ha("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ha("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ha("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=new Sd(3e4,6e4);function wh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hc(t,e,r,n,s={}){return hA(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Ed(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return oF()||(c.referrerPolicy="no-referrer"),fA.fetch()(mA(t,t.config.apiHost,r,o),c)})}async function hA(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},OP),e);try{const s=new LP(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw hf(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hf(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw hf(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw hf(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Gg(t,u,c);_a(t,u)}}catch(s){if(s instanceof na)throw s;_a(t,"network-request-failed",{message:String(s)})}}async function pA(t,e,r,n,s={}){const i=await hc(t,e,r,n,s);return"mfaPendingCredential"in i&&_a(t,"multi-factor-auth-required",{_serverResponse:i}),i}function mA(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?zg(t.config,s):`${t.config.apiScheme}://${s}`}class LP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Js(this.auth,"network-request-failed")),NP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hf(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Js(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(t,e){return hc(t,"POST","/v1/accounts:delete",e)}async function vA(t,e){return hc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BP(t,e=!1){const r=sr(t),n=await r.getIdToken(e),s=Kg(n);Tt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:mu(Dp(s.auth_time)),issuedAtTime:mu(Dp(s.iat)),expirationTime:mu(Dp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Dp(t){return Number(t)*1e3}function Kg(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return jf("JWT malformed, contained fewer than 3 sections"),null;try{const s=eA(r);return s?JSON.parse(s):(jf("Failed to decode base64 JWT payload"),null)}catch(s){return jf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function dE(t){const e=Kg(t);return Tt(e,"internal-error"),Tt(typeof e.exp<"u","internal-error"),Tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof na&&UP(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function UP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await zu(t,vA(r,{idToken:n}));Tt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?gA(i.providerUserInfo):[],o=HP(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new wv(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function $P(t){const e=sr(t);await A0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HP(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function gA(t){return t.map(e=>{var{providerId:r}=e,n=jg(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(t,e){const r=await hA(t,{},async()=>{const n=Ed({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=mA(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",fA.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function GP(t,e){return hc(t,"POST","/v2/accounts:revokeToken",wh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt(typeof e.idToken<"u","internal-error"),Tt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Tt(e.length!==0,"internal-error");const r=dE(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await jP(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new Ml;return n&&(Tt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Tt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Tt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return Ha("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,e){Tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ja{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=jg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await zu(this,this.stsTokenManager.getToken(this.auth,e));return Tt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return BP(this,e)}reload(){return $P(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ja(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await A0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ha(this.auth.app))return Promise.reject(ji(this.auth));const e=await this.getIdToken();return await zu(this,MP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,u;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,h=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,v=(a=r.photoURL)!==null&&a!==void 0?a:void 0,p=(o=r.tenantId)!==null&&o!==void 0?o:void 0,g=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=r.createdAt)!==null&&c!==void 0?c:void 0,E=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:I,isAnonymous:R,providerData:D,stsTokenManager:C}=r;Tt(S&&C,e,"internal-error");const _=Ml.fromJSON(this.name,C);Tt(typeof S=="string",e,"internal-error"),vi(d,e.name),vi(f,e.name),Tt(typeof I=="boolean",e,"internal-error"),Tt(typeof R=="boolean",e,"internal-error"),vi(h,e.name),vi(v,e.name),vi(p,e.name),vi(g,e.name),vi(y,e.name),vi(E,e.name);const b=new ja({uid:S,auth:e,email:f,emailVerified:I,displayName:d,isAnonymous:R,photoURL:v,phoneNumber:h,tenantId:p,stsTokenManager:_,createdAt:y,lastLoginAt:E});return D&&Array.isArray(D)&&(b.providerData=D.map(x=>Object.assign({},x))),g&&(b._redirectEventId=g),b}static async _fromIdTokenResponse(e,r,n=!1){const s=new Ml;s.updateFromServerResponse(r);const i=new ja({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await A0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Tt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?gA(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new Ml;o.updateFromIdToken(n);const l=new ja({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new wv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Map;function Ga(t){ni(t instanceof Function,"Expected a class definition");let e=fE.get(t);return e?(ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}xA.type="NONE";const hE=xA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t,e,r){return`firebase:${t}:${e}:${r}`}class Bl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Gf(this.userKey,s.apiKey,i),this.fullPersistenceKey=Gf("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ja._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Bl(Ga(hE),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ga(hE);const a=Gf(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const d=ja._fromJSON(e,u);c!==i&&(o=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Bl(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new Bl(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TA(e))return"Blackberry";if(AA(e))return"Webos";if(EA(e))return"Safari";if((e.includes("chrome/")||_A(e))&&!e.includes("edge/"))return"Chrome";if(SA(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function yA(t=Bn()){return/firefox\//i.test(t)}function EA(t=Bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _A(t=Bn()){return/crios\//i.test(t)}function bA(t=Bn()){return/iemobile/i.test(t)}function SA(t=Bn()){return/android/i.test(t)}function TA(t=Bn()){return/blackberry/i.test(t)}function AA(t=Bn()){return/webos/i.test(t)}function qg(t=Bn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WP(t=Bn()){var e;return qg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zP(){return uF()&&document.documentMode===10}function wA(t=Bn()){return qg(t)||SA(t)||AA(t)||TA(t)||/windows phone/i.test(t)||bA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t,e=[]){let r;switch(t){case"Browser":r=pE(Bn());break;case"Worker":r=`${pE(Bn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Wo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(t,e={}){return hc(t,"GET","/v2/passwordPolicy",wh(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=6;class YP{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:XP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mE(this),this.idTokenSubscription=new mE(this),this.beforeStateQueue=new KP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ga(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Bl.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await vA(this,{idToken:e}),n=await ja._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ha(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await A0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ha(this.app))return Promise.reject(ji(this));const r=e?sr(e):null;return r&&Tt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ha(this.app)?Promise.reject(ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ha(this.app)?Promise.reject(ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ga(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qP(this),r=new YP(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yd("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await GP(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ga(e)||this._popupRedirectResolver;Tt(r,this,"argument-error"),this.redirectPersistenceManager=await Bl.create(this,[Ga(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&kP(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Td(t){return sr(t)}class mE{constructor(e){this.auth=e,this.observer=null,this.addObserver=xF(r=>this.observer=r)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JP(t){Xg=t}function ZP(t){return Xg.loadJS(t)}function e8(){return Xg.gapiScript}function t8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t,e){const r=_d(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(b0(i,e??{}))return s;_a(s,"already-initialized")}return r.initialize({options:e})}function n8(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ga);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function s8(t,e,r){const n=Td(t);Tt(n._canInitEmulator,n,"emulator-config-failed"),Tt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=IA(e),{host:a,port:o}=a8(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),i8()}function IA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function a8(t){const e=IA(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:vE(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:vE(a)}}}function vE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function i8(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ha("not implemented")}_getIdTokenResponse(e){return Ha("not implemented")}_linkToIdToken(e,r){return Ha("not implemented")}_getReauthenticationResolver(e){return Ha("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(t,e){return pA(t,"POST","/v1/accounts:signInWithIdp",wh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8="http://localhost";class Po extends kA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):_a("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=jg(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Po(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Ul(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ul(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ul(e,r)}buildRequest(){const e={requestUri:o8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ed(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends Yg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Ad{constructor(){super("facebook.com")}static credential(e){return Po._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Ad{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Po._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return da.credential(r,n)}catch{return null}}}da.GOOGLE_SIGN_IN_METHOD="google.com";da.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Ad{constructor(){super("github.com")}static credential(e){return Po._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends Ad{constructor(){super("twitter.com")}static credential(e,r){return Po._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Di.credential(r,n)}catch{return null}}}Di.TWITTER_SIGN_IN_METHOD="twitter.com";Di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l8(t,e){return pA(t,"POST","/v1/accounts:signUp",wh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await ja._fromIdTokenResponse(e,n,s),a=gE(n);return new Xi({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=gE(n);return new Xi({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function gE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c8(t){var e;if(ha(t.app))return Promise.reject(ji(t));const r=Td(t);if(await r._initializationPromise,!((e=r.currentUser)===null||e===void 0)&&e.isAnonymous)return new Xi({user:r.currentUser,providerId:null,operationType:"signIn"});const n=await l8(r,{returnSecureToken:!0}),s=await Xi._fromIdTokenResponse(r,"signIn",n,!0);return await r._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends na{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,w0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new w0(e,r,n,s)}}function DA(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?w0._fromErrorAndOperation(t,i,e,n):i})}async function u8(t,e,r=!1){const n=await zu(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Xi._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(t,e,r=!1){const{auth:n}=t;if(ha(n.app))return Promise.reject(ji(n));const s="reauthenticate";try{const i=await zu(t,DA(n,s,e,t),r);Tt(i.idToken,n,"internal-error");const a=Kg(i.idToken);Tt(a,n,"internal-error");const{sub:o}=a;return Tt(t.uid===o,n,"user-mismatch"),Xi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_a(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f8(t,e,r=!1){if(ha(t.app))return Promise.reject(ji(t));const n="signIn",s=await DA(t,n,e),i=await Xi._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function h8(t,e,r,n){return sr(t).onIdTokenChanged(e,r,n)}function p8(t,e,r){return sr(t).beforeAuthStateChanged(e,r)}function RA(t,e,r,n){return sr(t).onAuthStateChanged(e,r,n)}function m8(t){return sr(t).signOut()}const C0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(C0,"1"),this.storage.removeItem(C0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8=1e3,g8=10;class PA extends FA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);zP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,g8):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},v8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}PA.type="LOCAL";const x8=PA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA extends FA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}OA.type="SESSION";const NA=OA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Ch(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await y8(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=Qg("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(){return window}function _8(t){va().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){return typeof va().WorkerGlobalScope<"u"&&typeof va().importScripts=="function"}async function b8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function T8(){return LA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="firebaseLocalStorageDb",A8=1,I0="firebaseLocalStorage",BA="fbase_key";class wd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Ih(t,e){return t.transaction([I0],e?"readwrite":"readonly").objectStore(I0)}function w8(){const t=indexedDB.deleteDatabase(MA);return new wd(t).toPromise()}function Cv(){const t=indexedDB.open(MA,A8);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(I0,{keyPath:BA})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(I0)?e(n):(n.close(),await w8(),e(await Cv()))})})}async function xE(t,e,r){const n=Ih(t,!0).put({[BA]:e,value:r});return new wd(n).toPromise()}async function C8(t,e){const r=Ih(t,!1).get(e),n=await new wd(r).toPromise();return n===void 0?null:n.value}function yE(t,e){const r=Ih(t,!0).delete(e);return new wd(r).toPromise()}const I8=800,k8=3;class UA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>k8)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ch._getInstance(T8()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await b8(),!this.activeServiceWorker)return;this.sender=new E8(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||S8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cv();return await xE(e,C0,"1"),await yE(e,C0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>xE(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>C8(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>yE(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ih(s,!1).getAll();return new wd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),I8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UA.type="LOCAL";const D8=UA;new Sd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t,e){return e?Ga(e):(Tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends kA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ul(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ul(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function R8(t){return f8(t.auth,new Jg(t),t.bypassAuthState)}function F8(t){const{auth:e,user:r}=t;return Tt(r,e,"internal-error"),d8(r,new Jg(t),t.bypassAuthState)}async function P8(t){const{auth:e,user:r}=t;return Tt(r,e,"internal-error"),u8(r,new Jg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R8;case"linkViaPopup":case"linkViaRedirect":return P8;case"reauthViaPopup":case"reauthViaRedirect":return F8;default:_a(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8=new Sd(2e3,1e4);async function HA(t,e,r){if(ha(t.app))return Promise.reject(Js(t,"operation-not-supported-in-this-environment"));const n=Td(t);DP(t,e,Yg);const s=VA(n,r);return new yo(n,"signInViaPopup",e,s).executeNotNull()}class yo extends $A{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,yo.currentPopupAction&&yo.currentPopupAction.cancel(),yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tt(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=Qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Js(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Js(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Js(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O8.get())};e()}}yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8="pendingRedirect",Wf=new Map;class L8 extends $A{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Wf.get(this.auth._key());if(!e){try{const n=await M8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Wf.set(this.auth._key(),e)}return this.bypassAuthState||Wf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function M8(t,e){const r=V8(e),n=U8(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function B8(t,e){Wf.set(t._key(),e)}function U8(t){return Ga(t._redirectPersistence)}function V8(t){return Gf(N8,t.config.apiKey,t.name)}async function $8(t,e,r=!1){if(ha(t.app))return Promise.reject(ji(t));const n=Td(t),s=VA(n,e),a=await new L8(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=10*60*1e3;class j8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G8(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!jA(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Js(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H8&&this.cachedEventUids.clear(),this.cachedEventUids.has(EE(e))}saveEventToCache(e){this.cachedEventUids.add(EE(e)),this.lastProcessedEventTime=Date.now()}}function EE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function G8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W8(t,e={}){return hc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K8=/^https?/;async function q8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await W8(t);for(const r of e)try{if(X8(r))return}catch{}_a(t,"unauthorized-domain")}function X8(t){const e=Av(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!K8.test(r))return!1;if(z8.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=new Sd(3e4,6e4);function _E(){const t=va().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Q8(t){return new Promise((e,r)=>{var n,s,i;function a(){_E(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_E(),r(Js(t,"network-request-failed"))},timeout:Y8.get()})}if(!((s=(n=va().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=va().gapi)===null||i===void 0)&&i.load)a();else{const o=t8("iframefcb");return va()[o]=()=>{gapi.load?a():r(Js(t,"network-request-failed"))},ZP(`${e8()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw zf=null,e})}let zf=null;function J8(t){return zf=zf||Q8(t),zf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=new Sd(5e3,15e3),e6="__/auth/iframe",t6="emulator/auth/iframe",r6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s6(t){const e=t.config;Tt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?zg(e,t6):`https://${t.config.authDomain}/${e6}`,n={apiKey:e.apiKey,appName:t.name,v:Wo},s=n6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Ed(n).slice(1)}`}async function a6(t){const e=await J8(t),r=va().gapi;return Tt(r,t,"internal-error"),e.open({where:document.body,url:s6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r6,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=Js(t,"network-request-failed"),o=va().setTimeout(()=>{i(a)},Z8.get());function l(){va().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o6=500,l6=600,c6="_blank",u6="http://localhost";class bE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d6(t,e,r,n=o6,s=l6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},i6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Bn().toLowerCase();r&&(o=_A(c)?c6:r),yA(c)&&(e=e||u6,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[h,v])=>`${f}${h}=${v},`,"");if(WP(c)&&o!=="_self")return f6(e||"",o),new bE(null);const d=window.open(e||"",o,u);Tt(d,t,"popup-blocked");try{d.focus()}catch{}return new bE(d)}function f6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6="__/auth/handler",p6="emulator/auth/handler",m6=encodeURIComponent("fac");async function SE(t,e,r,n,s,i){Tt(t.config.authDomain,t,"auth-domain-config-required"),Tt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Wo,eventId:s};if(e instanceof Yg){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",gF(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))a[u]=d}if(e instanceof Ad){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${m6}=${encodeURIComponent(l)}`:"";return`${v6(t)}?${Ed(o).slice(1)}${c}`}function v6({config:t}){return t.emulator?zg(t,p6):`https://${t.authDomain}/${h6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="webStorageSupport";class g6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NA,this._completeRedirectFn=$8,this._overrideRedirectResult=B8}async _openPopup(e,r,n,s){var i;ni((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await SE(e,r,n,Av(),s);return d6(e,a,Qg())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await SE(e,r,n,Av(),s);return _8(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(ni(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await a6(e),n=new j8(e);return r.register("authEvent",s=>(Tt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Rp,{type:Rp},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Rp];a!==void 0&&r(!!a),_a(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=q8(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return wA()||EA()||qg()}}const x6=g6;var TE="@firebase/auth",AE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _6(t){qi(new ti("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Tt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CA(t)},c=new QP(n,s,i,l);return n8(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),qi(new ti("auth-internal",e=>{const r=Td(e.getProvider("auth").getImmediate());return(n=>new y6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rs(TE,AE,E6(t)),Rs(TE,AE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=5*60,S6=nA("authIdTokenMaxAge")||b6;let wE=null;const T6=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>S6)return;const s=r==null?void 0:r.token;wE!==s&&(wE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ku(t=bd()){const e=_d(t,"auth");if(e.isInitialized())return e.getImmediate();const r=r8(t,{popupRedirectResolver:x6,persistence:[D8,x8,NA]}),n=nA("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=T6(i.toString());p8(r,a,()=>a(r.currentUser)),h8(r,o=>a(o))}}const s=tA("auth");return s&&s8(r,`http://${s}`),r}function A6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}JP({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Js("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",A6().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_6("Browser");var CE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wo,GA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,_){function b(){}b.prototype=_.prototype,C.D=_.prototype,C.prototype=new b,C.prototype.constructor=C,C.C=function(x,w,A){for(var k=Array(arguments.length-2),L=2;L<arguments.length;L++)k[L-2]=arguments[L];return _.prototype[w].apply(x,k)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,_,b){b||(b=0);var x=Array(16);if(typeof _=="string")for(var w=0;16>w;++w)x[w]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(w=0;16>w;++w)x[w]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=C.g[0],b=C.g[1],w=C.g[2];var A=C.g[3],k=_+(A^b&(w^A))+x[0]+3614090360&4294967295;_=b+(k<<7&4294967295|k>>>25),k=A+(w^_&(b^w))+x[1]+3905402710&4294967295,A=_+(k<<12&4294967295|k>>>20),k=w+(b^A&(_^b))+x[2]+606105819&4294967295,w=A+(k<<17&4294967295|k>>>15),k=b+(_^w&(A^_))+x[3]+3250441966&4294967295,b=w+(k<<22&4294967295|k>>>10),k=_+(A^b&(w^A))+x[4]+4118548399&4294967295,_=b+(k<<7&4294967295|k>>>25),k=A+(w^_&(b^w))+x[5]+1200080426&4294967295,A=_+(k<<12&4294967295|k>>>20),k=w+(b^A&(_^b))+x[6]+2821735955&4294967295,w=A+(k<<17&4294967295|k>>>15),k=b+(_^w&(A^_))+x[7]+4249261313&4294967295,b=w+(k<<22&4294967295|k>>>10),k=_+(A^b&(w^A))+x[8]+1770035416&4294967295,_=b+(k<<7&4294967295|k>>>25),k=A+(w^_&(b^w))+x[9]+2336552879&4294967295,A=_+(k<<12&4294967295|k>>>20),k=w+(b^A&(_^b))+x[10]+4294925233&4294967295,w=A+(k<<17&4294967295|k>>>15),k=b+(_^w&(A^_))+x[11]+2304563134&4294967295,b=w+(k<<22&4294967295|k>>>10),k=_+(A^b&(w^A))+x[12]+1804603682&4294967295,_=b+(k<<7&4294967295|k>>>25),k=A+(w^_&(b^w))+x[13]+4254626195&4294967295,A=_+(k<<12&4294967295|k>>>20),k=w+(b^A&(_^b))+x[14]+2792965006&4294967295,w=A+(k<<17&4294967295|k>>>15),k=b+(_^w&(A^_))+x[15]+1236535329&4294967295,b=w+(k<<22&4294967295|k>>>10),k=_+(w^A&(b^w))+x[1]+4129170786&4294967295,_=b+(k<<5&4294967295|k>>>27),k=A+(b^w&(_^b))+x[6]+3225465664&4294967295,A=_+(k<<9&4294967295|k>>>23),k=w+(_^b&(A^_))+x[11]+643717713&4294967295,w=A+(k<<14&4294967295|k>>>18),k=b+(A^_&(w^A))+x[0]+3921069994&4294967295,b=w+(k<<20&4294967295|k>>>12),k=_+(w^A&(b^w))+x[5]+3593408605&4294967295,_=b+(k<<5&4294967295|k>>>27),k=A+(b^w&(_^b))+x[10]+38016083&4294967295,A=_+(k<<9&4294967295|k>>>23),k=w+(_^b&(A^_))+x[15]+3634488961&4294967295,w=A+(k<<14&4294967295|k>>>18),k=b+(A^_&(w^A))+x[4]+3889429448&4294967295,b=w+(k<<20&4294967295|k>>>12),k=_+(w^A&(b^w))+x[9]+568446438&4294967295,_=b+(k<<5&4294967295|k>>>27),k=A+(b^w&(_^b))+x[14]+3275163606&4294967295,A=_+(k<<9&4294967295|k>>>23),k=w+(_^b&(A^_))+x[3]+4107603335&4294967295,w=A+(k<<14&4294967295|k>>>18),k=b+(A^_&(w^A))+x[8]+1163531501&4294967295,b=w+(k<<20&4294967295|k>>>12),k=_+(w^A&(b^w))+x[13]+2850285829&4294967295,_=b+(k<<5&4294967295|k>>>27),k=A+(b^w&(_^b))+x[2]+4243563512&4294967295,A=_+(k<<9&4294967295|k>>>23),k=w+(_^b&(A^_))+x[7]+1735328473&4294967295,w=A+(k<<14&4294967295|k>>>18),k=b+(A^_&(w^A))+x[12]+2368359562&4294967295,b=w+(k<<20&4294967295|k>>>12),k=_+(b^w^A)+x[5]+4294588738&4294967295,_=b+(k<<4&4294967295|k>>>28),k=A+(_^b^w)+x[8]+2272392833&4294967295,A=_+(k<<11&4294967295|k>>>21),k=w+(A^_^b)+x[11]+1839030562&4294967295,w=A+(k<<16&4294967295|k>>>16),k=b+(w^A^_)+x[14]+4259657740&4294967295,b=w+(k<<23&4294967295|k>>>9),k=_+(b^w^A)+x[1]+2763975236&4294967295,_=b+(k<<4&4294967295|k>>>28),k=A+(_^b^w)+x[4]+1272893353&4294967295,A=_+(k<<11&4294967295|k>>>21),k=w+(A^_^b)+x[7]+4139469664&4294967295,w=A+(k<<16&4294967295|k>>>16),k=b+(w^A^_)+x[10]+3200236656&4294967295,b=w+(k<<23&4294967295|k>>>9),k=_+(b^w^A)+x[13]+681279174&4294967295,_=b+(k<<4&4294967295|k>>>28),k=A+(_^b^w)+x[0]+3936430074&4294967295,A=_+(k<<11&4294967295|k>>>21),k=w+(A^_^b)+x[3]+3572445317&4294967295,w=A+(k<<16&4294967295|k>>>16),k=b+(w^A^_)+x[6]+76029189&4294967295,b=w+(k<<23&4294967295|k>>>9),k=_+(b^w^A)+x[9]+3654602809&4294967295,_=b+(k<<4&4294967295|k>>>28),k=A+(_^b^w)+x[12]+3873151461&4294967295,A=_+(k<<11&4294967295|k>>>21),k=w+(A^_^b)+x[15]+530742520&4294967295,w=A+(k<<16&4294967295|k>>>16),k=b+(w^A^_)+x[2]+3299628645&4294967295,b=w+(k<<23&4294967295|k>>>9),k=_+(w^(b|~A))+x[0]+4096336452&4294967295,_=b+(k<<6&4294967295|k>>>26),k=A+(b^(_|~w))+x[7]+1126891415&4294967295,A=_+(k<<10&4294967295|k>>>22),k=w+(_^(A|~b))+x[14]+2878612391&4294967295,w=A+(k<<15&4294967295|k>>>17),k=b+(A^(w|~_))+x[5]+4237533241&4294967295,b=w+(k<<21&4294967295|k>>>11),k=_+(w^(b|~A))+x[12]+1700485571&4294967295,_=b+(k<<6&4294967295|k>>>26),k=A+(b^(_|~w))+x[3]+2399980690&4294967295,A=_+(k<<10&4294967295|k>>>22),k=w+(_^(A|~b))+x[10]+4293915773&4294967295,w=A+(k<<15&4294967295|k>>>17),k=b+(A^(w|~_))+x[1]+2240044497&4294967295,b=w+(k<<21&4294967295|k>>>11),k=_+(w^(b|~A))+x[8]+1873313359&4294967295,_=b+(k<<6&4294967295|k>>>26),k=A+(b^(_|~w))+x[15]+4264355552&4294967295,A=_+(k<<10&4294967295|k>>>22),k=w+(_^(A|~b))+x[6]+2734768916&4294967295,w=A+(k<<15&4294967295|k>>>17),k=b+(A^(w|~_))+x[13]+1309151649&4294967295,b=w+(k<<21&4294967295|k>>>11),k=_+(w^(b|~A))+x[4]+4149444226&4294967295,_=b+(k<<6&4294967295|k>>>26),k=A+(b^(_|~w))+x[11]+3174756917&4294967295,A=_+(k<<10&4294967295|k>>>22),k=w+(_^(A|~b))+x[2]+718787259&4294967295,w=A+(k<<15&4294967295|k>>>17),k=b+(A^(w|~_))+x[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(w+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+w&4294967295,C.g[3]=C.g[3]+A&4294967295}n.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var b=_-this.blockSize,x=this.B,w=this.h,A=0;A<_;){if(w==0)for(;A<=b;)s(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<_;)if(x[w++]=C.charCodeAt(A++),w==this.blockSize){s(this,x),w=0;break}}else for(;A<_;)if(x[w++]=C[A++],w==this.blockSize){s(this,x),w=0;break}}this.h=w,this.o+=_},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var b=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=b&255,b/=256;for(this.u(C),C=Array(16),_=b=0;4>_;++_)for(var x=0;32>x;x+=8)C[b++]=this.g[_]>>>x&255;return C};function i(C,_){var b=o;return Object.prototype.hasOwnProperty.call(b,C)?b[C]:b[C]=_(C)}function a(C,_){this.h=_;for(var b=[],x=!0,w=C.length-1;0<=w;w--){var A=C[w]|0;x&&A==_||(b[w]=A,x=!1)}this.g=b}var o={};function l(C){return-128<=C&&128>C?i(C,function(_){return new a([_|0],0>_?-1:0)}):new a([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return d;if(0>C)return g(c(-C));for(var _=[],b=1,x=0;C>=b;x++)_[x]=C/b|0,b*=4294967296;return new a(_,0)}function u(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return g(u(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(_,8)),x=d,w=0;w<C.length;w+=8){var A=Math.min(8,C.length-w),k=parseInt(C.substring(w,w+A),_);8>A?(A=c(Math.pow(_,A)),x=x.j(A).add(c(k))):(x=x.j(b),x=x.add(c(k)))}return x}var d=l(0),f=l(1),h=l(16777216);t=a.prototype,t.m=function(){if(p(this))return-g(this).m();for(var C=0,_=1,b=0;b<this.g.length;b++){var x=this.i(b);C+=(0<=x?x:4294967296+x)*_,_*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(v(this))return"0";if(p(this))return"-"+g(this).toString(C);for(var _=c(Math.pow(C,6)),b=this,x="";;){var w=I(b,_).g;b=y(b,w.j(_));var A=((0<b.g.length?b.g[0]:b.h)>>>0).toString(C);if(b=w,v(b))return A+x;for(;6>A.length;)A="0"+A;x=A+x}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function v(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function p(C){return C.h==-1}t.l=function(C){return C=y(this,C),p(C)?-1:v(C)?0:1};function g(C){for(var _=C.g.length,b=[],x=0;x<_;x++)b[x]=~C.g[x];return new a(b,~C.h).add(f)}t.abs=function(){return p(this)?g(this):this},t.add=function(C){for(var _=Math.max(this.g.length,C.g.length),b=[],x=0,w=0;w<=_;w++){var A=x+(this.i(w)&65535)+(C.i(w)&65535),k=(A>>>16)+(this.i(w)>>>16)+(C.i(w)>>>16);x=k>>>16,A&=65535,k&=65535,b[w]=k<<16|A}return new a(b,b[b.length-1]&-2147483648?-1:0)};function y(C,_){return C.add(g(_))}t.j=function(C){if(v(this)||v(C))return d;if(p(this))return p(C)?g(this).j(g(C)):g(g(this).j(C));if(p(C))return g(this.j(g(C)));if(0>this.l(h)&&0>C.l(h))return c(this.m()*C.m());for(var _=this.g.length+C.g.length,b=[],x=0;x<2*_;x++)b[x]=0;for(x=0;x<this.g.length;x++)for(var w=0;w<C.g.length;w++){var A=this.i(x)>>>16,k=this.i(x)&65535,L=C.i(w)>>>16,G=C.i(w)&65535;b[2*x+2*w]+=k*G,E(b,2*x+2*w),b[2*x+2*w+1]+=A*G,E(b,2*x+2*w+1),b[2*x+2*w+1]+=k*L,E(b,2*x+2*w+1),b[2*x+2*w+2]+=A*L,E(b,2*x+2*w+2)}for(x=0;x<_;x++)b[x]=b[2*x+1]<<16|b[2*x];for(x=_;x<2*_;x++)b[x]=0;return new a(b,0)};function E(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function S(C,_){this.g=C,this.h=_}function I(C,_){if(v(_))throw Error("division by zero");if(v(C))return new S(d,d);if(p(C))return _=I(g(C),_),new S(g(_.g),g(_.h));if(p(_))return _=I(C,g(_)),new S(g(_.g),_.h);if(30<C.g.length){if(p(C)||p(_))throw Error("slowDivide_ only works with positive integers.");for(var b=f,x=_;0>=x.l(C);)b=R(b),x=R(x);var w=D(b,1),A=D(x,1);for(x=D(x,2),b=D(b,2);!v(x);){var k=A.add(x);0>=k.l(C)&&(w=w.add(b),A=k),x=D(x,1),b=D(b,1)}return _=y(C,w.j(_)),new S(w,_)}for(w=d;0<=C.l(_);){for(b=Math.max(1,Math.floor(C.m()/_.m())),x=Math.ceil(Math.log(b)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),A=c(b),k=A.j(_);p(k)||0<k.l(C);)b-=x,A=c(b),k=A.j(_);v(A)&&(A=f),w=w.add(A),C=y(C,k)}return new S(w,C)}t.A=function(C){return I(this,C).h},t.and=function(C){for(var _=Math.max(this.g.length,C.g.length),b=[],x=0;x<_;x++)b[x]=this.i(x)&C.i(x);return new a(b,this.h&C.h)},t.or=function(C){for(var _=Math.max(this.g.length,C.g.length),b=[],x=0;x<_;x++)b[x]=this.i(x)|C.i(x);return new a(b,this.h|C.h)},t.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),b=[],x=0;x<_;x++)b[x]=this.i(x)^C.i(x);return new a(b,this.h^C.h)};function R(C){for(var _=C.g.length+1,b=[],x=0;x<_;x++)b[x]=C.i(x)<<1|C.i(x-1)>>>31;return new a(b,C.h)}function D(C,_){var b=_>>5;_%=32;for(var x=C.g.length-b,w=[],A=0;A<x;A++)w[A]=0<_?C.i(A+b)>>>_|C.i(A+b+1)<<32-_:C.i(A+b);return new a(w,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,GA=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,wo=a}).apply(typeof CE<"u"?CE:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WA,qc,zA,Kf,Iv,KA,qA,XA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,F,V){return T==Array.prototype||T==Object.prototype||(T[F]=V.value),T};function r(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var F=0;F<T.length;++F){var V=T[F];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=r(this);function s(T,F){if(F)e:{var V=n;T=T.split(".");for(var ne=0;ne<T.length-1;ne++){var Te=T[ne];if(!(Te in V))break e;V=V[Te]}T=T[T.length-1],ne=V[T],F=F(ne),F!=ne&&F!=null&&e(V,T,{configurable:!0,writable:!0,value:F})}}function i(T,F){T instanceof String&&(T+="");var V=0,ne=!1,Te={next:function(){if(!ne&&V<T.length){var Ne=V++;return{value:F(Ne,T[Ne]),done:!1}}return ne=!0,{done:!0,value:void 0}}};return Te[Symbol.iterator]=function(){return Te},Te}s("Array.prototype.values",function(T){return T||function(){return i(this,function(F,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(T){var F=typeof T;return F=F!="object"?F:T?Array.isArray(T)?"array":F:"null",F=="array"||F=="object"&&typeof T.length=="number"}function c(T){var F=typeof T;return F=="object"&&T!=null||F=="function"}function u(T,F,V){return T.call.apply(T.bind,arguments)}function d(T,F,V){if(!T)throw Error();if(2<arguments.length){var ne=Array.prototype.slice.call(arguments,2);return function(){var Te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Te,ne),T.apply(F,Te)}}return function(){return T.apply(F,arguments)}}function f(T,F,V){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(T,F){var V=Array.prototype.slice.call(arguments,1);return function(){var ne=V.slice();return ne.push.apply(ne,arguments),T.apply(this,ne)}}function v(T,F){function V(){}V.prototype=F.prototype,T.aa=F.prototype,T.prototype=new V,T.prototype.constructor=T,T.Qb=function(ne,Te,Ne){for(var Qe=Array(arguments.length-2),or=2;or<arguments.length;or++)Qe[or-2]=arguments[or];return F.prototype[Te].apply(ne,Qe)}}function p(T){const F=T.length;if(0<F){const V=Array(F);for(let ne=0;ne<F;ne++)V[ne]=T[ne];return V}return[]}function g(T,F){for(let V=1;V<arguments.length;V++){const ne=arguments[V];if(l(ne)){const Te=T.length||0,Ne=ne.length||0;T.length=Te+Ne;for(let Qe=0;Qe<Ne;Qe++)T[Te+Qe]=ne[Qe]}else T.push(ne)}}class y{constructor(F,V){this.i=F,this.j=V,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function E(T){return/^[\s\xa0]*$/.test(T)}function S(){var T=o.navigator;return T&&(T=T.userAgent)?T:""}function I(T){return I[" "](T),T}I[" "]=function(){};var R=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function D(T,F,V){for(const ne in T)F.call(V,T[ne],ne,T)}function C(T,F){for(const V in T)F.call(void 0,T[V],V,T)}function _(T){const F={};for(const V in T)F[V]=T[V];return F}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(T,F){let V,ne;for(let Te=1;Te<arguments.length;Te++){ne=arguments[Te];for(V in ne)T[V]=ne[V];for(let Ne=0;Ne<b.length;Ne++)V=b[Ne],Object.prototype.hasOwnProperty.call(ne,V)&&(T[V]=ne[V])}}function w(T){var F=1;T=T.split(":");const V=[];for(;0<F&&T.length;)V.push(T.shift()),F--;return T.length&&V.push(T.join(":")),V}function A(T){o.setTimeout(()=>{throw T},0)}function k(){var T=B;let F=null;return T.g&&(F=T.g,T.g=T.g.next,T.g||(T.h=null),F.next=null),F}class L{constructor(){this.h=this.g=null}add(F,V){const ne=G.get();ne.set(F,V),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var G=new y(()=>new P,T=>T.reset());class P{constructor(){this.next=this.g=this.h=null}set(F,V){this.h=F,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let M,H=!1,B=new L,Q=()=>{const T=o.Promise.resolve(void 0);M=()=>{T.then(j)}};var j=()=>{for(var T;T=k();){try{T.h.call(T.g)}catch(V){A(V)}var F=G;F.j(T),100>F.h&&(F.h++,T.next=F.g,F.g=T)}H=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(T,F){this.type=T,this.g=this.target=F,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var T=!1,F=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const V=()=>{};o.addEventListener("test",V,F),o.removeEventListener("test",V,F)}catch{}return T}();function se(T,F){if(W.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var V=this.type=T.type,ne=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=F,F=T.relatedTarget){if(R){e:{try{I(F.nodeName);var Te=!0;break e}catch{}Te=!1}Te||(F=null)}}else V=="mouseover"?F=T.fromElement:V=="mouseout"&&(F=T.toElement);this.relatedTarget=F,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:ve[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&se.aa.h.call(this)}}v(se,W);var ve={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),de=0;function ee(T,F,V,ne,Te){this.listener=T,this.proxy=null,this.src=F,this.type=V,this.capture=!!ne,this.ha=Te,this.key=++de,this.da=this.fa=!1}function Y(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function ge(T){this.src=T,this.g={},this.h=0}ge.prototype.add=function(T,F,V,ne,Te){var Ne=T.toString();T=this.g[Ne],T||(T=this.g[Ne]=[],this.h++);var Qe=z(T,F,ne,Te);return-1<Qe?(F=T[Qe],V||(F.fa=!1)):(F=new ee(F,this.src,Ne,!!ne,Te),F.fa=V,T.push(F)),F};function q(T,F){var V=F.type;if(V in T.g){var ne=T.g[V],Te=Array.prototype.indexOf.call(ne,F,void 0),Ne;(Ne=0<=Te)&&Array.prototype.splice.call(ne,Te,1),Ne&&(Y(F),T.g[V].length==0&&(delete T.g[V],T.h--))}}function z(T,F,V,ne){for(var Te=0;Te<T.length;++Te){var Ne=T[Te];if(!Ne.da&&Ne.listener==F&&Ne.capture==!!V&&Ne.ha==ne)return Te}return-1}var J="closure_lm_"+(1e6*Math.random()|0),he={};function re(T,F,V,ne,Te){if(Array.isArray(F)){for(var Ne=0;Ne<F.length;Ne++)re(T,F[Ne],V,ne,Te);return null}return V=je(V),T&&T[ie]?T.K(F,V,c(ne)?!!ne.capture:!1,Te):X(T,F,V,!1,ne,Te)}function X(T,F,V,ne,Te,Ne){if(!F)throw Error("Invalid event type");var Qe=c(Te)?!!Te.capture:!!Te,or=Be(T);if(or||(T[J]=or=new ge(T)),V=or.add(F,V,ne,Qe,Ne),V.proxy)return V;if(ne=te(),V.proxy=ne,ne.src=T,ne.listener=V,T.addEventListener)K||(Te=Qe),Te===void 0&&(Te=!1),T.addEventListener(F.toString(),ne,Te);else if(T.attachEvent)T.attachEvent(be(F.toString()),ne);else if(T.addListener&&T.removeListener)T.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return V}function te(){function T(V){return F.call(T.src,T.listener,V)}const F=ke;return T}function Se(T,F,V,ne,Te){if(Array.isArray(F))for(var Ne=0;Ne<F.length;Ne++)Se(T,F[Ne],V,ne,Te);else ne=c(ne)?!!ne.capture:!!ne,V=je(V),T&&T[ie]?(T=T.i,F=String(F).toString(),F in T.g&&(Ne=T.g[F],V=z(Ne,V,ne,Te),-1<V&&(Y(Ne[V]),Array.prototype.splice.call(Ne,V,1),Ne.length==0&&(delete T.g[F],T.h--)))):T&&(T=Be(T))&&(F=T.g[F.toString()],T=-1,F&&(T=z(F,V,ne,Te)),(V=-1<T?F[T]:null)&&Ee(V))}function Ee(T){if(typeof T!="number"&&T&&!T.da){var F=T.src;if(F&&F[ie])q(F.i,T);else{var V=T.type,ne=T.proxy;F.removeEventListener?F.removeEventListener(V,ne,T.capture):F.detachEvent?F.detachEvent(be(V),ne):F.addListener&&F.removeListener&&F.removeListener(ne),(V=Be(F))?(q(V,T),V.h==0&&(V.src=null,F[J]=null)):Y(T)}}}function be(T){return T in he?he[T]:he[T]="on"+T}function ke(T,F){if(T.da)T=!0;else{F=new se(F,this);var V=T.listener,ne=T.ha||T.src;T.fa&&Ee(T),T=V.call(ne,F)}return T}function Be(T){return T=T[J],T instanceof ge?T:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function je(T){return typeof T=="function"?T:(T[Ie]||(T[Ie]=function(F){return T.handleEvent(F)}),T[Ie])}function Ue(){O.call(this),this.i=new ge(this),this.M=this,this.F=null}v(Ue,O),Ue.prototype[ie]=!0,Ue.prototype.removeEventListener=function(T,F,V,ne){Se(this,T,F,V,ne)};function He(T,F){var V,ne=T.F;if(ne)for(V=[];ne;ne=ne.F)V.push(ne);if(T=T.M,ne=F.type||F,typeof F=="string")F=new W(F,T);else if(F instanceof W)F.target=F.target||T;else{var Te=F;F=new W(ne,T),x(F,Te)}if(Te=!0,V)for(var Ne=V.length-1;0<=Ne;Ne--){var Qe=F.g=V[Ne];Te=qe(Qe,ne,!0,F)&&Te}if(Qe=F.g=T,Te=qe(Qe,ne,!0,F)&&Te,Te=qe(Qe,ne,!1,F)&&Te,V)for(Ne=0;Ne<V.length;Ne++)Qe=F.g=V[Ne],Te=qe(Qe,ne,!1,F)&&Te}Ue.prototype.N=function(){if(Ue.aa.N.call(this),this.i){var T=this.i,F;for(F in T.g){for(var V=T.g[F],ne=0;ne<V.length;ne++)Y(V[ne]);delete T.g[F],T.h--}}this.F=null},Ue.prototype.K=function(T,F,V,ne){return this.i.add(String(T),F,!1,V,ne)},Ue.prototype.L=function(T,F,V,ne){return this.i.add(String(T),F,!0,V,ne)};function qe(T,F,V,ne){if(F=T.i.g[String(F)],!F)return!0;F=F.concat();for(var Te=!0,Ne=0;Ne<F.length;++Ne){var Qe=F[Ne];if(Qe&&!Qe.da&&Qe.capture==V){var or=Qe.listener,ln=Qe.ha||Qe.src;Qe.fa&&q(T.i,Qe),Te=or.call(ln,ne)!==!1&&Te}}return Te&&!ne.defaultPrevented}function ye(T,F,V){if(typeof T=="function")V&&(T=f(T,V));else if(T&&typeof T.handleEvent=="function")T=f(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:o.setTimeout(T,F||0)}function xe(T){T.g=ye(()=>{T.g=null,T.i&&(T.i=!1,xe(T))},T.l);const F=T.h;T.h=null,T.m.apply(null,F)}class _e extends O{constructor(F,V){super(),this.m=F,this.l=V,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(T){O.call(this),this.h=T,this.g={}}v(Pe,O);var We=[];function rt(T){D(T.g,function(F,V){this.g.hasOwnProperty(V)&&Ee(F)},T),T.g={}}Pe.prototype.N=function(){Pe.aa.N.call(this),rt(this)},Pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mt=o.JSON.stringify,gt=o.JSON.parse,Lt=class{stringify(T){return o.JSON.stringify(T,void 0)}parse(T){return o.JSON.parse(T,void 0)}};function dt(){}dt.prototype.h=null;function at(T){return T.h||(T.h=T.i())}function ft(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ft(){W.call(this,"d")}v(Ft,W);function vr(){W.call(this,"c")}v(vr,W);var $n={},di=null;function ts(){return di=di||new Ue}$n.La="serverreachability";function sl(T){W.call(this,$n.La,T)}v(sl,W);function Fa(T){const F=ts();He(F,new sl(F))}$n.STAT_EVENT="statevent";function io(T,F){W.call(this,$n.STAT_EVENT,T),this.stat=F}v(io,W);function qr(T){const F=ts();He(F,new io(F,T))}$n.Ma="timingevent";function oo(T,F){W.call(this,$n.Ma,T),this.size=F}v(oo,W);function Sr(T,F){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){T()},F)}function yn(){this.g=!0}yn.prototype.xa=function(){this.g=!1};function al(T,F,V,ne,Te,Ne){T.info(function(){if(T.g)if(Ne)for(var Qe="",or=Ne.split("&"),ln=0;ln<or.length;ln++){var Yt=or[ln].split("=");if(1<Yt.length){var En=Yt[0];Yt=Yt[1];var _n=En.split("_");Qe=2<=_n.length&&_n[1]=="type"?Qe+(En+"="+Yt+"&"):Qe+(En+"=redacted&")}}else Qe=null;else Qe=Ne;return"XMLHTTP REQ ("+ne+") [attempt "+Te+"]: "+F+`
`+V+`
`+Qe})}function Sc(T,F,V,ne,Te,Ne,Qe){T.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+Te+"]: "+F+`
`+V+`
`+Ne+" "+Qe})}function Z(T,F,V,ne){T.info(function(){return"XMLHTTP TEXT ("+F+"): "+ae(T,V)+(ne?" "+ne:"")})}function ce(T,F){T.info(function(){return"TIMEOUT: "+F})}yn.prototype.info=function(){};function ae(T,F){if(!T.g)return F;if(!F)return null;try{var V=JSON.parse(F);if(V){for(T=0;T<V.length;T++)if(Array.isArray(V[T])){var ne=V[T];if(!(2>ne.length)){var Te=ne[1];if(Array.isArray(Te)&&!(1>Te.length)){var Ne=Te[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var Qe=1;Qe<Te.length;Qe++)Te[Qe]=""}}}}return mt(V)}catch{return F}}var oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ue={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fe;function we(){}v(we,dt),we.prototype.g=function(){return new XMLHttpRequest},we.prototype.i=function(){return{}},fe=new we;function Le(T,F,V,ne){this.j=T,this.i=F,this.l=V,this.R=ne||1,this.U=new Pe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ce}function Ce(){this.i=null,this.g="",this.h=!1}var De={},Re={};function Ke(T,F,V){T.L=1,T.v=Kd(Oa(F)),T.m=V,T.P=!0,Ye(T,null)}function Ye(T,F){T.F=Date.now(),tt(T),T.A=Oa(T.v);var V=T.A,ne=T.R;Array.isArray(ne)||(ne=[String(ne)]),Gx(V.i,"t",ne),T.C=0,V=T.j.J,T.h=new Ce,T.g=ly(T.j,V?F:null,!T.m),0<T.O&&(T.M=new _e(f(T.Y,T,T.g),T.O)),F=T.U,V=T.g,ne=T.ca;var Te="readystatechange";Array.isArray(Te)||(Te&&(We[0]=Te.toString()),Te=We);for(var Ne=0;Ne<Te.length;Ne++){var Qe=re(V,Te[Ne],ne||F.handleEvent,!1,F.h||F);if(!Qe)break;F.g[Qe.key]=Qe}F=T.H?_(T.H):{},T.m?(T.u||(T.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,F)):(T.u="GET",T.g.ea(T.A,T.u,null,F)),Fa(),al(T.i,T.u,T.A,T.l,T.R,T.m)}Le.prototype.ca=function(T){T=T.target;const F=this.M;F&&Na(T)==3?F.j():this.Y(T)},Le.prototype.Y=function(T){try{if(T==this.g)e:{const _n=Na(this.g);var F=this.g.Ba();const cl=this.g.Z();if(!(3>_n)&&(_n!=3||this.g&&(this.h.h||this.g.oa()||Qx(this.g)))){this.J||_n!=4||F==7||(F==8||0>=cl?Fa(3):Fa(2)),ir(this);var V=this.g.Z();this.X=V;t:if(st(this)){var ne=Qx(this.g);T="";var Te=ne.length,Ne=Na(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yr(this),rr(this);var Qe="";break t}this.h.i=new o.TextDecoder}for(F=0;F<Te;F++)this.h.h=!0,T+=this.h.i.decode(ne[F],{stream:!(Ne&&F==Te-1)});ne.length=0,this.h.g+=T,this.C=0,Qe=this.h.g}else Qe=this.g.oa();if(this.o=V==200,Sc(this.i,this.u,this.A,this.l,this.R,_n,V),this.o){if(this.T&&!this.K){t:{if(this.g){var or,ln=this.g;if((or=ln.g?ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(or)){var Yt=or;break t}}Yt=null}if(V=Yt)Z(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pa(this,V);else{this.o=!1,this.s=3,qr(12),yr(this),rr(this);break e}}if(this.P){V=!0;let Bs;for(;!this.J&&this.C<Qe.length;)if(Bs=Xe(this,Qe),Bs==Re){_n==4&&(this.s=4,qr(14),V=!1),Z(this.i,this.l,null,"[Incomplete Response]");break}else if(Bs==De){this.s=4,qr(15),Z(this.i,this.l,Qe,"[Invalid Chunk]"),V=!1;break}else Z(this.i,this.l,Bs,null),Pa(this,Bs);if(st(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||Qe.length!=0||this.h.h||(this.s=1,qr(16),V=!1),this.o=this.o&&V,!V)Z(this.i,this.l,Qe,"[Invalid Chunked Response]"),yr(this),rr(this);else if(0<Qe.length&&!this.W){this.W=!0;var En=this.j;En.g==this&&En.ba&&!En.M&&(En.j.info("Great, no buffering proxy detected. Bytes received: "+Qe.length),up(En),En.M=!0,qr(11))}}else Z(this.i,this.l,Qe,null),Pa(this,Qe);_n==4&&yr(this),this.o&&!this.J&&(_n==4?sy(this.j,this):(this.o=!1,tt(this)))}else dk(this.g),V==400&&0<Qe.indexOf("Unknown SID")?(this.s=3,qr(12)):(this.s=0,qr(13)),yr(this),rr(this)}}}catch{}finally{}};function st(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function Xe(T,F){var V=T.C,ne=F.indexOf(`
`,V);return ne==-1?Re:(V=Number(F.substring(V,ne)),isNaN(V)?De:(ne+=1,ne+V>F.length?Re:(F=F.slice(ne,ne+V),T.C=ne+V,F)))}Le.prototype.cancel=function(){this.J=!0,yr(this)};function tt(T){T.S=Date.now()+T.I,St(T,T.I)}function St(T,F){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Sr(f(T.ba,T),F)}function ir(T){T.B&&(o.clearTimeout(T.B),T.B=null)}Le.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(ce(this.i,this.A),this.L!=2&&(Fa(),qr(17)),yr(this),this.s=2,rr(this)):St(this,this.S-T)};function rr(T){T.j.G==0||T.J||sy(T.j,T)}function yr(T){ir(T);var F=T.M;F&&typeof F.ma=="function"&&F.ma(),T.M=null,rt(T.U),T.g&&(F=T.g,T.g=null,F.abort(),F.ma())}function Pa(T,F){try{var V=T.j;if(V.G!=0&&(V.g==T||us(V.h,T))){if(!T.K&&us(V.h,T)&&V.G==3){try{var ne=V.Da.g.parse(F)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var Te=ne;if(Te[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<T.F)Zd(V),Qd(V);else break e;cp(V),qr(18)}}else V.za=Te[1],0<V.za-V.T&&37500>Te[2]&&V.F&&V.v==0&&!V.C&&(V.C=Sr(f(V.Za,V),6e3));if(1>=il(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else uo(V,11)}else if((T.K||V.g==T)&&Zd(V),!E(F))for(Te=V.Da.g.parse(F),F=0;F<Te.length;F++){let Yt=Te[F];if(V.T=Yt[0],Yt=Yt[1],V.G==2)if(Yt[0]=="c"){V.K=Yt[1],V.ia=Yt[2];const En=Yt[3];En!=null&&(V.la=En,V.j.info("VER="+V.la));const _n=Yt[4];_n!=null&&(V.Aa=_n,V.j.info("SVER="+V.Aa));const cl=Yt[5];cl!=null&&typeof cl=="number"&&0<cl&&(ne=1.5*cl,V.L=ne,V.j.info("backChannelRequestTimeoutMs_="+ne)),ne=V;const Bs=T.g;if(Bs){const tf=Bs.g?Bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tf){var Ne=ne.h;Ne.g||tf.indexOf("spdy")==-1&&tf.indexOf("quic")==-1&&tf.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(ip(Ne,Ne.h),Ne.h=null))}if(ne.D){const dp=Bs.g?Bs.g.getResponseHeader("X-HTTP-Session-Id"):null;dp&&(ne.ya=dp,gr(ne.I,ne.D,dp))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-T.F,V.j.info("Handshake RTT: "+V.R+"ms")),ne=V;var Qe=T;if(ne.qa=oy(ne,ne.J?ne.ia:null,ne.W),Qe.K){Lx(ne.h,Qe);var or=Qe,ln=ne.L;ln&&(or.I=ln),or.B&&(ir(or),tt(or)),ne.g=Qe}else ry(ne);0<V.i.length&&Jd(V)}else Yt[0]!="stop"&&Yt[0]!="close"||uo(V,7);else V.G==3&&(Yt[0]=="stop"||Yt[0]=="close"?Yt[0]=="stop"?uo(V,7):lp(V):Yt[0]!="noop"&&V.l&&V.l.ta(Yt),V.v=0)}}Fa(4)}catch{}}var lo=class{constructor(T,F){this.g=T,this.map=F}};function fi(T){this.l=T||10,o.PerformanceNavigationTiming?(T=o.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sa(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function il(T){return T.h?1:T.g?T.g.size:0}function us(T,F){return T.h?T.h==F:T.g?T.g.has(F):!1}function ip(T,F){T.g?T.g.add(F):T.h=F}function Lx(T,F){T.h&&T.h==F?T.h=null:T.g&&T.g.has(F)&&T.g.delete(F)}fi.prototype.cancel=function(){if(this.i=Mx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function Mx(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let F=T.i;for(const V of T.g.values())F=F.concat(V.D);return F}return p(T.i)}function Y4(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(l(T)){for(var F=[],V=T.length,ne=0;ne<V;ne++)F.push(T[ne]);return F}F=[],V=0;for(ne in T)F[V++]=T[ne];return F}function Q4(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(l(T)||typeof T=="string"){var F=[];T=T.length;for(var V=0;V<T;V++)F.push(V);return F}F=[],V=0;for(const ne in T)F[V++]=ne;return F}}}function Bx(T,F){if(T.forEach&&typeof T.forEach=="function")T.forEach(F,void 0);else if(l(T)||typeof T=="string")Array.prototype.forEach.call(T,F,void 0);else for(var V=Q4(T),ne=Y4(T),Te=ne.length,Ne=0;Ne<Te;Ne++)F.call(void 0,ne[Ne],V&&V[Ne],T)}var Ux=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J4(T,F){if(T){T=T.split("&");for(var V=0;V<T.length;V++){var ne=T[V].indexOf("="),Te=null;if(0<=ne){var Ne=T[V].substring(0,ne);Te=T[V].substring(ne+1)}else Ne=T[V];F(Ne,Te?decodeURIComponent(Te.replace(/\+/g," ")):"")}}}function co(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof co){this.h=T.h,Wd(this,T.j),this.o=T.o,this.g=T.g,zd(this,T.s),this.l=T.l;var F=T.i,V=new wc;V.i=F.i,F.g&&(V.g=new Map(F.g),V.h=F.h),Vx(this,V),this.m=T.m}else T&&(F=String(T).match(Ux))?(this.h=!1,Wd(this,F[1]||"",!0),this.o=Tc(F[2]||""),this.g=Tc(F[3]||"",!0),zd(this,F[4]),this.l=Tc(F[5]||"",!0),Vx(this,F[6]||"",!0),this.m=Tc(F[7]||"")):(this.h=!1,this.i=new wc(null,this.h))}co.prototype.toString=function(){var T=[],F=this.j;F&&T.push(Ac(F,$x,!0),":");var V=this.g;return(V||F=="file")&&(T.push("//"),(F=this.o)&&T.push(Ac(F,$x,!0),"@"),T.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&T.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&T.push("/"),T.push(Ac(V,V.charAt(0)=="/"?tk:ek,!0))),(V=this.i.toString())&&T.push("?",V),(V=this.m)&&T.push("#",Ac(V,nk)),T.join("")};function Oa(T){return new co(T)}function Wd(T,F,V){T.j=V?Tc(F,!0):F,T.j&&(T.j=T.j.replace(/:$/,""))}function zd(T,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);T.s=F}else T.s=null}function Vx(T,F,V){F instanceof wc?(T.i=F,sk(T.i,T.h)):(V||(F=Ac(F,rk)),T.i=new wc(F,T.h))}function gr(T,F,V){T.i.set(F,V)}function Kd(T){return gr(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function Tc(T,F){return T?F?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Ac(T,F,V){return typeof T=="string"?(T=encodeURI(T).replace(F,Z4),V&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function Z4(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var $x=/[#\/\?@]/g,ek=/[#\?:]/g,tk=/[#\?]/g,rk=/[#\?@]/g,nk=/#/g;function wc(T,F){this.h=this.g=null,this.i=T||null,this.j=!!F}function hi(T){T.g||(T.g=new Map,T.h=0,T.i&&J4(T.i,function(F,V){T.add(decodeURIComponent(F.replace(/\+/g," ")),V)}))}t=wc.prototype,t.add=function(T,F){hi(this),this.i=null,T=ol(this,T);var V=this.g.get(T);return V||this.g.set(T,V=[]),V.push(F),this.h+=1,this};function Hx(T,F){hi(T),F=ol(T,F),T.g.has(F)&&(T.i=null,T.h-=T.g.get(F).length,T.g.delete(F))}function jx(T,F){return hi(T),F=ol(T,F),T.g.has(F)}t.forEach=function(T,F){hi(this),this.g.forEach(function(V,ne){V.forEach(function(Te){T.call(F,Te,ne,this)},this)},this)},t.na=function(){hi(this);const T=Array.from(this.g.values()),F=Array.from(this.g.keys()),V=[];for(let ne=0;ne<F.length;ne++){const Te=T[ne];for(let Ne=0;Ne<Te.length;Ne++)V.push(F[ne])}return V},t.V=function(T){hi(this);let F=[];if(typeof T=="string")jx(this,T)&&(F=F.concat(this.g.get(ol(this,T))));else{T=Array.from(this.g.values());for(let V=0;V<T.length;V++)F=F.concat(T[V])}return F},t.set=function(T,F){return hi(this),this.i=null,T=ol(this,T),jx(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[F]),this.h+=1,this},t.get=function(T,F){return T?(T=this.V(T),0<T.length?String(T[0]):F):F};function Gx(T,F,V){Hx(T,F),0<V.length&&(T.i=null,T.g.set(ol(T,F),p(V)),T.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],F=Array.from(this.g.keys());for(var V=0;V<F.length;V++){var ne=F[V];const Ne=encodeURIComponent(String(ne)),Qe=this.V(ne);for(ne=0;ne<Qe.length;ne++){var Te=Ne;Qe[ne]!==""&&(Te+="="+encodeURIComponent(String(Qe[ne]))),T.push(Te)}}return this.i=T.join("&")};function ol(T,F){return F=String(F),T.j&&(F=F.toLowerCase()),F}function sk(T,F){F&&!T.j&&(hi(T),T.i=null,T.g.forEach(function(V,ne){var Te=ne.toLowerCase();ne!=Te&&(Hx(this,ne),Gx(this,Te,V))},T)),T.j=F}function ak(T,F){const V=new yn;if(o.Image){const ne=new Image;ne.onload=h(pi,V,"TestLoadImage: loaded",!0,F,ne),ne.onerror=h(pi,V,"TestLoadImage: error",!1,F,ne),ne.onabort=h(pi,V,"TestLoadImage: abort",!1,F,ne),ne.ontimeout=h(pi,V,"TestLoadImage: timeout",!1,F,ne),o.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=T}else F(!1)}function ik(T,F){const V=new yn,ne=new AbortController,Te=setTimeout(()=>{ne.abort(),pi(V,"TestPingServer: timeout",!1,F)},1e4);fetch(T,{signal:ne.signal}).then(Ne=>{clearTimeout(Te),Ne.ok?pi(V,"TestPingServer: ok",!0,F):pi(V,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(Te),pi(V,"TestPingServer: error",!1,F)})}function pi(T,F,V,ne,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),ne(V)}catch{}}function ok(){this.g=new Lt}function lk(T,F,V){const ne=V||"";try{Bx(T,function(Te,Ne){let Qe=Te;c(Te)&&(Qe=mt(Te)),F.push(ne+Ne+"="+encodeURIComponent(Qe))})}catch(Te){throw F.push(ne+"type="+encodeURIComponent("_badmap")),Te}}function qd(T){this.l=T.Ub||null,this.j=T.eb||!1}v(qd,dt),qd.prototype.g=function(){return new Xd(this.l,this.j)},qd.prototype.i=function(T){return function(){return T}}({});function Xd(T,F){Ue.call(this),this.D=T,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Xd,Ue),t=Xd.prototype,t.open=function(T,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=F,this.readyState=1,Ic(this)},t.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(F.body=T),(this.D||o).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cc(this)),this.readyState=0},t.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Ic(this)),this.g&&(this.readyState=3,Ic(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wx(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wx(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}t.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var F=T.value?T.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!T.done}))&&(this.response=this.responseText+=F)}T.done?Cc(this):Ic(this),this.readyState==3&&Wx(this)}},t.Ra=function(T){this.g&&(this.response=this.responseText=T,Cc(this))},t.Qa=function(T){this.g&&(this.response=T,Cc(this))},t.ga=function(){this.g&&Cc(this)};function Cc(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Ic(T)}t.setRequestHeader=function(T,F){this.u.append(T,F)},t.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],F=this.h.entries();for(var V=F.next();!V.done;)V=V.value,T.push(V[0]+": "+V[1]),V=F.next();return T.join(`\r
`)};function Ic(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(Xd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function zx(T){let F="";return D(T,function(V,ne){F+=ne,F+=":",F+=V,F+=`\r
`}),F}function op(T,F,V){e:{for(ne in V){var ne=!1;break e}ne=!0}ne||(V=zx(V),typeof T=="string"?V!=null&&encodeURIComponent(String(V)):gr(T,F,V))}function Ir(T){Ue.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ir,Ue);var ck=/^https?$/i,uk=["POST","PUT"];t=Ir.prototype,t.Ha=function(T){this.J=T},t.ea=function(T,F,V,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);F=F?F.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fe.g(),this.v=this.o?at(this.o):at(fe),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(F,String(T),!0),this.B=!1}catch(Ne){Kx(this,Ne);return}if(T=V||"",V=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var Te in ne)V.set(Te,ne[Te]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const Ne of ne.keys())V.set(Ne,ne.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from(V.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),Te=o.FormData&&T instanceof o.FormData,!(0<=Array.prototype.indexOf.call(uk,F,void 0))||ne||Te||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,Qe]of V)this.g.setRequestHeader(Ne,Qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yx(this),this.u=!0,this.g.send(T),this.u=!1}catch(Ne){Kx(this,Ne)}};function Kx(T,F){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=F,T.m=5,qx(T),Yd(T)}function qx(T){T.A||(T.A=!0,He(T,"complete"),He(T,"error"))}t.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,He(this,"complete"),He(this,"abort"),Yd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yd(this,!0)),Ir.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xx(this):this.bb())},t.bb=function(){Xx(this)};function Xx(T){if(T.h&&typeof a<"u"&&(!T.v[1]||Na(T)!=4||T.Z()!=2)){if(T.u&&Na(T)==4)ye(T.Ea,0,T);else if(He(T,"readystatechange"),Na(T)==4){T.h=!1;try{const Qe=T.Z();e:switch(Qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var V;if(!(V=F)){var ne;if(ne=Qe===0){var Te=String(T.D).match(Ux)[1]||null;!Te&&o.self&&o.self.location&&(Te=o.self.location.protocol.slice(0,-1)),ne=!ck.test(Te?Te.toLowerCase():"")}V=ne}if(V)He(T,"complete"),He(T,"success");else{T.m=6;try{var Ne=2<Na(T)?T.g.statusText:""}catch{Ne=""}T.l=Ne+" ["+T.Z()+"]",qx(T)}}finally{Yd(T)}}}}function Yd(T,F){if(T.g){Yx(T);const V=T.g,ne=T.v[0]?()=>{}:null;T.g=null,T.v=null,F||He(T,"ready");try{V.onreadystatechange=ne}catch{}}}function Yx(T){T.I&&(o.clearTimeout(T.I),T.I=null)}t.isActive=function(){return!!this.g};function Na(T){return T.g?T.g.readyState:0}t.Z=function(){try{return 2<Na(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(T){if(this.g){var F=this.g.responseText;return T&&F.indexOf(T)==0&&(F=F.substring(T.length)),gt(F)}};function Qx(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function dk(T){const F={};T=(T.g&&2<=Na(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<T.length;ne++){if(E(T[ne]))continue;var V=w(T[ne]);const Te=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Ne=F[Te]||[];F[Te]=Ne,Ne.push(V)}C(F,function(ne){return ne.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kc(T,F,V){return V&&V.internalChannelParams&&V.internalChannelParams[T]||F}function Jx(T){this.Aa=0,this.i=[],this.j=new yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kc("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kc("baseRetryDelayMs",5e3,T),this.cb=kc("retryDelaySeedMs",1e4,T),this.Wa=kc("forwardChannelMaxRetries",2,T),this.wa=kc("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new fi(T&&T.concurrentRequestLimit),this.Da=new ok,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Jx.prototype,t.la=8,t.G=1,t.connect=function(T,F,V,ne){qr(0),this.W=T,this.H=F||{},V&&ne!==void 0&&(this.H.OSID=V,this.H.OAID=ne),this.F=this.X,this.I=oy(this,null,this.W),Jd(this)};function lp(T){if(Zx(T),T.G==3){var F=T.U++,V=Oa(T.I);if(gr(V,"SID",T.K),gr(V,"RID",F),gr(V,"TYPE","terminate"),Dc(T,V),F=new Le(T,T.j,F),F.L=2,F.v=Kd(Oa(V)),V=!1,o.navigator&&o.navigator.sendBeacon)try{V=o.navigator.sendBeacon(F.v.toString(),"")}catch{}!V&&o.Image&&(new Image().src=F.v,V=!0),V||(F.g=ly(F.j,null),F.g.ea(F.v)),F.F=Date.now(),tt(F)}iy(T)}function Qd(T){T.g&&(up(T),T.g.cancel(),T.g=null)}function Zx(T){Qd(T),T.u&&(o.clearTimeout(T.u),T.u=null),Zd(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&o.clearTimeout(T.s),T.s=null)}function Jd(T){if(!sa(T.h)&&!T.s){T.s=!0;var F=T.Ga;M||Q(),H||(M(),H=!0),B.add(F,T),T.B=0}}function fk(T,F){return il(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=F.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Sr(f(T.Ga,T,F),ay(T,T.B)),T.B++,!0)}t.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const Te=new Le(this,this.j,T);let Ne=this.o;if(this.S&&(Ne?(Ne=_(Ne),x(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(Te.H=Ne,Ne=null),this.P)e:{for(var F=0,V=0;V<this.i.length;V++){t:{var ne=this.i[V];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(F+=ne,4096<F){F=V;break e}if(F===4096||V===this.i.length-1){F=V+1;break e}}F=1e3}else F=1e3;F=ty(this,Te,F),V=Oa(this.I),gr(V,"RID",T),gr(V,"CVER",22),this.D&&gr(V,"X-HTTP-Session-Id",this.D),Dc(this,V),Ne&&(this.O?F="headers="+encodeURIComponent(String(zx(Ne)))+"&"+F:this.m&&op(V,this.m,Ne)),ip(this.h,Te),this.Ua&&gr(V,"TYPE","init"),this.P?(gr(V,"$req",F),gr(V,"SID","null"),Te.T=!0,Ke(Te,V,null)):Ke(Te,V,F),this.G=2}}else this.G==3&&(T?ey(this,T):this.i.length==0||sa(this.h)||ey(this))};function ey(T,F){var V;F?V=F.l:V=T.U++;const ne=Oa(T.I);gr(ne,"SID",T.K),gr(ne,"RID",V),gr(ne,"AID",T.T),Dc(T,ne),T.m&&T.o&&op(ne,T.m,T.o),V=new Le(T,T.j,V,T.B+1),T.m===null&&(V.H=T.o),F&&(T.i=F.D.concat(T.i)),F=ty(T,V,1e3),V.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),ip(T.h,V),Ke(V,ne,F)}function Dc(T,F){T.H&&D(T.H,function(V,ne){gr(F,ne,V)}),T.l&&Bx({},function(V,ne){gr(F,ne,V)})}function ty(T,F,V){V=Math.min(T.i.length,V);var ne=T.l?f(T.l.Na,T.l,T):null;e:{var Te=T.i;let Ne=-1;for(;;){const Qe=["count="+V];Ne==-1?0<V?(Ne=Te[0].g,Qe.push("ofs="+Ne)):Ne=0:Qe.push("ofs="+Ne);let or=!0;for(let ln=0;ln<V;ln++){let Yt=Te[ln].g;const En=Te[ln].map;if(Yt-=Ne,0>Yt)Ne=Math.max(0,Te[ln].g-100),or=!1;else try{lk(En,Qe,"req"+Yt+"_")}catch{ne&&ne(En)}}if(or){ne=Qe.join("&");break e}}}return T=T.i.splice(0,V),F.D=T,ne}function ry(T){if(!T.g&&!T.u){T.Y=1;var F=T.Fa;M||Q(),H||(M(),H=!0),B.add(F,T),T.v=0}}function cp(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Sr(f(T.Fa,T),ay(T,T.v)),T.v++,!0)}t.Fa=function(){if(this.u=null,ny(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Sr(f(this.ab,this),T)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qr(10),Qd(this),ny(this))};function up(T){T.A!=null&&(o.clearTimeout(T.A),T.A=null)}function ny(T){T.g=new Le(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var F=Oa(T.qa);gr(F,"RID","rpc"),gr(F,"SID",T.K),gr(F,"AID",T.T),gr(F,"CI",T.F?"0":"1"),!T.F&&T.ja&&gr(F,"TO",T.ja),gr(F,"TYPE","xmlhttp"),Dc(T,F),T.m&&T.o&&op(F,T.m,T.o),T.L&&(T.g.I=T.L);var V=T.g;T=T.ia,V.L=1,V.v=Kd(Oa(F)),V.m=null,V.P=!0,Ye(V,T)}t.Za=function(){this.C!=null&&(this.C=null,Qd(this),cp(this),qr(19))};function Zd(T){T.C!=null&&(o.clearTimeout(T.C),T.C=null)}function sy(T,F){var V=null;if(T.g==F){Zd(T),up(T),T.g=null;var ne=2}else if(us(T.h,F))V=F.D,Lx(T.h,F),ne=1;else return;if(T.G!=0){if(F.o)if(ne==1){V=F.m?F.m.length:0,F=Date.now()-F.F;var Te=T.B;ne=ts(),He(ne,new oo(ne,V)),Jd(T)}else ry(T);else if(Te=F.s,Te==3||Te==0&&0<F.X||!(ne==1&&fk(T,F)||ne==2&&cp(T)))switch(V&&0<V.length&&(F=T.h,F.i=F.i.concat(V)),Te){case 1:uo(T,5);break;case 4:uo(T,10);break;case 3:uo(T,6);break;default:uo(T,2)}}}function ay(T,F){let V=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(V*=2),V*F}function uo(T,F){if(T.j.info("Error code "+F),F==2){var V=f(T.fb,T),ne=T.Xa;const Te=!ne;ne=new co(ne||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Wd(ne,"https"),Kd(ne),Te?ak(ne.toString(),V):ik(ne.toString(),V)}else qr(2);T.G=0,T.l&&T.l.sa(F),iy(T),Zx(T)}t.fb=function(T){T?(this.j.info("Successfully pinged google.com"),qr(2)):(this.j.info("Failed to ping google.com"),qr(1))};function iy(T){if(T.G=0,T.ka=[],T.l){const F=Mx(T.h);(F.length!=0||T.i.length!=0)&&(g(T.ka,F),g(T.ka,T.i),T.h.i.length=0,p(T.i),T.i.length=0),T.l.ra()}}function oy(T,F,V){var ne=V instanceof co?Oa(V):new co(V);if(ne.g!="")F&&(ne.g=F+"."+ne.g),zd(ne,ne.s);else{var Te=o.location;ne=Te.protocol,F=F?F+"."+Te.hostname:Te.hostname,Te=+Te.port;var Ne=new co(null);ne&&Wd(Ne,ne),F&&(Ne.g=F),Te&&zd(Ne,Te),V&&(Ne.l=V),ne=Ne}return V=T.D,F=T.ya,V&&F&&gr(ne,V,F),gr(ne,"VER",T.la),Dc(T,ne),ne}function ly(T,F,V){if(F&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=T.Ca&&!T.pa?new Ir(new qd({eb:V})):new Ir(T.pa),F.Ha(T.J),F}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cy(){}t=cy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ef(){}ef.prototype.g=function(T,F){return new ds(T,F)};function ds(T,F){Ue.call(this),this.g=new Jx(F),this.l=T,this.h=F&&F.messageUrlParams||null,T=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(T?T["X-WebChannel-Content-Type"]=F.messageContentType:T={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(T?T["X-WebChannel-Client-Profile"]=F.va:T={"X-WebChannel-Client-Profile":F.va}),this.g.S=T,(T=F&&F.Sb)&&!E(T)&&(this.g.m=T),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!E(F)&&(this.g.D=F,T=this.h,T!==null&&F in T&&(T=this.h,F in T&&delete T[F])),this.j=new ll(this)}v(ds,Ue),ds.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ds.prototype.close=function(){lp(this.g)},ds.prototype.o=function(T){var F=this.g;if(typeof T=="string"){var V={};V.__data__=T,T=V}else this.u&&(V={},V.__data__=mt(T),T=V);F.i.push(new lo(F.Ya++,T)),F.G==3&&Jd(F)},ds.prototype.N=function(){this.g.l=null,delete this.j,lp(this.g),delete this.g,ds.aa.N.call(this)};function uy(T){Ft.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var F=T.__sm__;if(F){e:{for(const V in F){T=V;break e}T=void 0}(this.i=T)&&(T=this.i,F=F!==null&&T in F?F[T]:void 0),this.data=F}else this.data=T}v(uy,Ft);function dy(){vr.call(this),this.status=1}v(dy,vr);function ll(T){this.g=T}v(ll,cy),ll.prototype.ua=function(){He(this.g,"a")},ll.prototype.ta=function(T){He(this.g,new uy(T))},ll.prototype.sa=function(T){He(this.g,new dy)},ll.prototype.ra=function(){He(this.g,"b")},ef.prototype.createWebChannel=ef.prototype.g,ds.prototype.send=ds.prototype.o,ds.prototype.open=ds.prototype.m,ds.prototype.close=ds.prototype.close,XA=function(){return new ef},qA=function(){return ts()},KA=$n,Iv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oe.NO_ERROR=0,oe.TIMEOUT=8,oe.HTTP_ERROR=6,Kf=oe,ue.COMPLETE="complete",zA=ue,ft.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",Ue.prototype.listen=Ue.prototype.K,qc=ft,Ir.prototype.listenOnce=Ir.prototype.L,Ir.prototype.getLastError=Ir.prototype.Ka,Ir.prototype.getLastErrorCode=Ir.prototype.Ba,Ir.prototype.getStatus=Ir.prototype.Z,Ir.prototype.getResponseJson=Ir.prototype.Oa,Ir.prototype.getResponseText=Ir.prototype.oa,Ir.prototype.send=Ir.prototype.ea,Ir.prototype.setWithCredentials=Ir.prototype.Ha,WA=Ir}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const IE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new $g("@firebase/firestore");function Oc(){return Oo.logLevel}function ct(t,...e){if(Oo.logLevel<=$t.DEBUG){const r=e.map(Zg);Oo.debug(`Firestore (${pc}): ${t}`,...r)}}function si(t,...e){if(Oo.logLevel<=$t.ERROR){const r=e.map(Zg);Oo.error(`Firestore (${pc}): ${t}`,...r)}}function Ql(t,...e){if(Oo.logLevel<=$t.WARN){const r=e.map(Zg);Oo.warn(`Firestore (${pc}): ${t}`,...r)}}function Zg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t="Unexpected state"){const e=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: `+t;throw si(e),new Error(e)}function nr(t,e){t||wt()}function Rt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends na{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(wn.UNAUTHENTICATED))}shutdown(){}}class C6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class I6{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){nr(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new za;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new za,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new za)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(nr(typeof n.accessToken=="string"),new YA(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nr(e===null||typeof e=="string"),new wn(e)}}class k6{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class D6{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new k6(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class R6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){nr(this.o===void 0);const n=i=>{i.error!=null&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,ct("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(nr(typeof r.token=="string"),this.R=r.token,new R6(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=P6(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function Qt(t,e){return t<e?-1:t>e?1:0}function Jl(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new et($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new et($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new et($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return en.fromMillis(Date.now())}static fromDate(e){return en.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new en(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new en(0,0))}static max(){return new kt(new en(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,r,n){r===void 0?r=0:r>e.length&&wt(),n===void 0?n=e.length-r:n>e.length-r&&wt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return qu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof qu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class fr extends qu{construct(e,r,n){return new fr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new et($e.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new fr(r)}static emptyPath(){return new fr([])}}const O6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends qu{construct(e,r,n){return new hn(e,r,n)}static isValidIdentifier(e){return O6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new hn(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new et($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new et($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new et($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(r)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.path=e}static fromPath(e){return new pt(fr.fromString(e))}static fromName(e){return new pt(fr.fromString(e).popFirst(5))}static empty(){return new pt(fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return fr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pt(new fr(e.slice()))}}function N6(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=kt.fromTimestamp(n===1e9?new en(r+1,0):new en(r,n));return new Yi(s,pt.empty(),e)}function L6(t){return new Yi(t.readTime,t.key,-1)}class Yi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Yi(kt.min(),pt.empty(),-1)}static max(){return new Yi(kt.max(),pt.empty(),-1)}}function M6(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=pt.comparator(t.documentKey,e.documentKey),r!==0?r:Qt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(t){if(t.code!==$e.FAILED_PRECONDITION||t.message!==B6)throw t;ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ze((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ze?r:ze.resolve(r)}catch(r){return ze.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ze.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ze.reject(r)}static resolve(e){return new ze((r,n)=>{r(e)})}static reject(e){return new ze((r,n)=>{n(e)})}static waitFor(e){return new ze((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=ze.resolve(!1);for(const n of e)r=r.next(s=>s?ze.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new ze((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new ze((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function V6(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Id(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}e1.oe=-1;function kh(t){return t==null}function k0(t){return t===0&&1/t==-1/0}function $6(t){return typeof t=="number"&&Number.isInteger(t)&&!k0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function zo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function JA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,r){this.comparator=e,this.root=r||un.EMPTY}insert(e,r){return new Cr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mf(this.root,e,this.comparator,!0)}}class mf{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??un.RED,this.left=s??un.EMPTY,this.right=i??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new un(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return un.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new un(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new DE(this.data.getIterator())}getIteratorFrom(e){return new DE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new mn(this.comparator);return r.data=e,r}}class DE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new vs([])}unionWith(e){let r=new mn(hn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new vs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ZA("Invalid base64 string: "+i):i}}(e);return new xn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new xn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const H6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(t){if(nr(!!t),typeof t=="string"){let e=0;const r=H6.exec(t);if(nr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Br(t.seconds),nanos:Br(t.nanos)}}function Br(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function No(t){return typeof t=="string"?xn.fromBase64String(t):xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function t1(t){const e=t.mapValue.fields.__previous_value__;return Dh(e)?t1(e):e}function Xu(t){const e=Qi(t.mapValue.fields.__local_write_time__.timestampValue);return new en(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class Yu{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Yu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf={mapValue:{}};function Lo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dh(t)?4:W6(t)?9007199254740991:G6(t)?10:11:wt()}function ba(t,e){if(t===e)return!0;const r=Lo(t);if(r!==Lo(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xu(t).isEqual(Xu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Qi(s.timestampValue),o=Qi(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return No(s.bytesValue).isEqual(No(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Br(s.geoPointValue.latitude)===Br(i.geoPointValue.latitude)&&Br(s.geoPointValue.longitude)===Br(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Br(s.integerValue)===Br(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Br(s.doubleValue),o=Br(i.doubleValue);return a===o?k0(a)===k0(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],ba);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(kE(a)!==kE(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!ba(a[l],o[l])))return!1;return!0}(t,e);default:return wt()}}function Qu(t,e){return(t.values||[]).find(r=>ba(r,e))!==void 0}function Zl(t,e){if(t===e)return 0;const r=Lo(t),n=Lo(e);if(r!==n)return Qt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Qt(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Br(i.integerValue||i.doubleValue),l=Br(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return RE(t.timestampValue,e.timestampValue);case 4:return RE(Xu(t),Xu(e));case 5:return Qt(t.stringValue,e.stringValue);case 6:return function(i,a){const o=No(i),l=No(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=Qt(o[c],l[c]);if(u!==0)return u}return Qt(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=Qt(Br(i.latitude),Br(a.latitude));return o!==0?o:Qt(Br(i.longitude),Br(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return FE(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,u;const d=i.fields||{},f=a.fields||{},h=(o=d.value)===null||o===void 0?void 0:o.arrayValue,v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,p=Qt(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return p!==0?p:FE(h,v)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===vf.mapValue&&a===vf.mapValue)return 0;if(i===vf.mapValue)return 1;if(a===vf.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=Qt(l[d],u[d]);if(f!==0)return f;const h=Zl(o[l[d]],c[u[d]]);if(h!==0)return h}return Qt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw wt()}}function RE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qt(t,e);const r=Qi(t),n=Qi(e),s=Qt(r.seconds,n.seconds);return s!==0?s:Qt(r.nanos,n.nanos)}function FE(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Zl(r[s],n[s]);if(i)return i}return Qt(r.length,n.length)}function ec(t){return kv(t)}function kv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Qi(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return No(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return pt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=kv(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${kv(r.fields[a])}`;return s+"}"}(t.mapValue):wt()}function D0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dv(t){return!!t&&"integerValue"in t}function r1(t){return!!t&&"arrayValue"in t}function PE(t){return!!t&&"nullValue"in t}function OE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qf(t){return!!t&&"mapValue"in t}function G6(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function vu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zo(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=vu(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=vu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function W6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.value=e}static empty(){return new ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!qf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(r)}setAll(e){let r=hn.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=vu(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());qf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ba(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];qf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){zo(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new ls(vu(this.value))}}function ew(t){const e=[];return zo(t.fields,(r,n)=>{const s=new hn([r]);if(qf(n)){const i=ew(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new vs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Dn(e,0,kt.min(),kt.min(),kt.min(),ls.empty(),0)}static newFoundDocument(e,r,n,s){return new Dn(e,1,r,kt.min(),n,s,0)}static newNoDocument(e,r){return new Dn(e,2,r,kt.min(),kt.min(),ls.empty(),0)}static newUnknownDocument(e,r){return new Dn(e,3,r,kt.min(),kt.min(),ls.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,r){this.position=e,this.inclusive=r}}function NE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=pt.comparator(pt.fromName(a.referenceValue),r.key):n=Zl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function LE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ba(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,r="asc"){this.field=e,this.dir=r}}function z6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{}class Kr extends tw{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new q6(e,r,n):r==="array-contains"?new Q6(e,n):r==="in"?new J6(e,n):r==="not-in"?new Z6(e,n):r==="array-contains-any"?new eO(e,n):new Kr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new X6(e,n):new Y6(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Zl(r,this.value)):r!==null&&Lo(this.value)===Lo(r)&&this.matchesComparison(Zl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ta extends tw{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ta(e,r)}matches(e){return rw(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rw(t){return t.op==="and"}function nw(t){return K6(t)&&rw(t)}function K6(t){for(const e of t.filters)if(e instanceof ta)return!1;return!0}function Rv(t){if(t instanceof Kr)return t.field.canonicalString()+t.op.toString()+ec(t.value);if(nw(t))return t.filters.map(e=>Rv(e)).join(",");{const e=t.filters.map(r=>Rv(r)).join(",");return`${t.op}(${e})`}}function sw(t,e){return t instanceof Kr?function(n,s){return s instanceof Kr&&n.op===s.op&&n.field.isEqual(s.field)&&ba(n.value,s.value)}(t,e):t instanceof ta?function(n,s){return s instanceof ta&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&sw(a,s.filters[o]),!0):!1}(t,e):void wt()}function aw(t){return t instanceof Kr?function(r){return`${r.field.canonicalString()} ${r.op} ${ec(r.value)}`}(t):t instanceof ta?function(r){return r.op.toString()+" {"+r.getFilters().map(aw).join(" ,")+"}"}(t):"Filter"}class q6 extends Kr{constructor(e,r,n){super(e,r,n),this.key=pt.fromName(n.referenceValue)}matches(e){const r=pt.comparator(e.key,this.key);return this.matchesComparison(r)}}class X6 extends Kr{constructor(e,r){super(e,"in",r),this.keys=iw("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Y6 extends Kr{constructor(e,r){super(e,"not-in",r),this.keys=iw("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function iw(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>pt.fromName(n.referenceValue))}class Q6 extends Kr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return r1(r)&&Qu(r.arrayValue,this.value)}}class J6 extends Kr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Qu(this.value.arrayValue,r)}}class Z6 extends Kr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Qu(this.value.arrayValue,r)}}class eO extends Kr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!r1(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Qu(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function ME(t,e=null,r=[],n=[],s=null,i=null,a=null){return new tO(t,e,r,n,s,i,a)}function n1(t){const e=Rt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Rv(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),kh(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>ec(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>ec(n)).join(",")),e.ue=r}return e.ue}function s1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!z6(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!sw(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!LE(t.startAt,e.startAt)&&LE(t.endAt,e.endAt)}function Fv(t){return pt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rO(t,e,r,n,s,i,a,o){return new Ko(t,e,r,n,s,i,a,o)}function Rh(t){return new Ko(t)}function BE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function a1(t){return t.collectionGroup!==null}function Vl(t){const e=Rt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new mn(hn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ju(i,n))}),r.has(hn.keyField().canonicalString())||e.ce.push(new Ju(hn.keyField(),n))}return e.ce}function ga(t){const e=Rt(t);return e.le||(e.le=nO(e,Vl(t))),e.le}function nO(t,e){if(t.limitType==="F")return ME(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ju(s.field,i)});const r=t.endAt?new tc(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new tc(t.startAt.position,t.startAt.inclusive):null;return ME(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Pv(t,e){const r=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function R0(t,e,r){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Fh(t,e){return s1(ga(t),ga(e))&&t.limitType===e.limitType}function ow(t){return`${n1(ga(t))}|lt:${t.limitType}`}function El(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>aw(s)).join(", ")}]`),kh(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>ec(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>ec(s)).join(",")),`Target(${n})`}(ga(t))}; limitType=${t.limitType})`}function Ph(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):pt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Vl(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=NE(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,Vl(n),s)||n.endAt&&!function(a,o,l){const c=NE(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,Vl(n),s))}(t,e)}function sO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lw(t){return(e,r)=>{let n=!1;for(const s of Vl(t)){const i=aO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function aO(t,e,r){const n=t.field.isKeyField()?pt.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?Zl(l,c):wt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zo(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return JA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=new Cr(pt.comparator);function ai(){return iO}const cw=new Cr(pt.comparator);function Xc(...t){let e=cw;for(const r of t)e=e.insert(r.key,r);return e}function uw(t){let e=cw;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Eo(){return gu()}function dw(){return gu()}function gu(){return new mc(t=>t.toString(),(t,e)=>t.isEqual(e))}const oO=new Cr(pt.comparator),lO=new mn(pt.comparator);function Ut(...t){let e=lO;for(const r of t)e=e.add(r);return e}const cO=new mn(Qt);function uO(){return cO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:k0(e)?"-0":e}}function fw(t){return{integerValue:""+t}}function dO(t,e){return $6(e)?fw(e):i1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this._=void 0}}function fO(t,e,r){return t instanceof Zu?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Dh(i)&&(i=t1(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof ed?pw(t,e):t instanceof td?mw(t,e):function(s,i){const a=hw(s,i),o=UE(a)+UE(s.Pe);return Dv(a)&&Dv(s.Pe)?fw(o):i1(s.serializer,o)}(t,e)}function hO(t,e,r){return t instanceof ed?pw(t,e):t instanceof td?mw(t,e):r}function hw(t,e){return t instanceof F0?function(n){return Dv(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Zu extends Oh{}class ed extends Oh{constructor(e){super(),this.elements=e}}function pw(t,e){const r=vw(e);for(const n of t.elements)r.some(s=>ba(s,n))||r.push(n);return{arrayValue:{values:r}}}class td extends Oh{constructor(e){super(),this.elements=e}}function mw(t,e){let r=vw(e);for(const n of t.elements)r=r.filter(s=>!ba(s,n));return{arrayValue:{values:r}}}class F0 extends Oh{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function UE(t){return Br(t.integerValue||t.doubleValue)}function vw(t){return r1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,r){this.field=e,this.transform=r}}function mO(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof ed&&s instanceof ed||n instanceof td&&s instanceof td?Jl(n.elements,s.elements,ba):n instanceof F0&&s instanceof F0?ba(n.Pe,s.Pe):n instanceof Zu&&s instanceof Zu}(t.transform,e.transform)}class vO{constructor(e,r){this.version=e,this.transformResults=r}}class Qn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nh{}function gw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lh(t.key,Qn.none()):new kd(t.key,t.data,Qn.none());{const r=t.data,n=ls.empty();let s=new mn(hn.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new ro(t.key,n,new vs(s.toArray()),Qn.none())}}function gO(t,e,r){t instanceof kd?function(s,i,a){const o=s.value.clone(),l=$E(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof ro?function(s,i,a){if(!Xf(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=$E(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(xw(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function xu(t,e,r,n){return t instanceof kd?function(i,a,o,l){if(!Xf(i.precondition,a))return o;const c=i.value.clone(),u=HE(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof ro?function(i,a,o,l){if(!Xf(i.precondition,a))return o;const c=HE(i.fieldTransforms,l,a),u=a.data;return u.setAll(xw(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,a,o){return Xf(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function xO(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=hw(n.transform,s||null);i!=null&&(r===null&&(r=ls.empty()),r.set(n.field,i))}return r||null}function VE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Jl(n,s,(i,a)=>mO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kd extends Nh{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ro extends Nh{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xw(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function $E(t,e,r){const n=new Map;nr(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,hO(a,o,r[s]))}return n}function HE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,fO(i,a,e))}return n}class Lh extends Nh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yO extends Nh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&gO(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=xu(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=xu(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=dw();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=gw(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(kt.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ut())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(r,n)=>VE(r,n))&&Jl(this.baseMutations,e.baseMutations,(r,n)=>VE(r,n))}}class o1{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){nr(e.mutations.length===n.length);let s=function(){return oO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new o1(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hr,zt;function SO(t){switch(t){default:return wt();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function yw(t){if(t===void 0)return si("GRPC error has no .code"),$e.UNKNOWN;switch(t){case Hr.OK:return $e.OK;case Hr.CANCELLED:return $e.CANCELLED;case Hr.UNKNOWN:return $e.UNKNOWN;case Hr.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Hr.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Hr.INTERNAL:return $e.INTERNAL;case Hr.UNAVAILABLE:return $e.UNAVAILABLE;case Hr.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Hr.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Hr.NOT_FOUND:return $e.NOT_FOUND;case Hr.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Hr.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Hr.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Hr.ABORTED:return $e.ABORTED;case Hr.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Hr.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Hr.DATA_LOSS:return $e.DATA_LOSS;default:return wt()}}(zt=Hr||(Hr={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new wo([4294967295,4294967295],0);function jE(t){const e=TO().encode(t),r=new GA;return r.update(e),new Uint8Array(r.digest())}function GE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wo([r,n],0),new wo([s,i],0)]}class l1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Yc(`Invalid padding: ${r}`);if(n<0)throw new Yc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Yc(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Yc(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=wo.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(wo.fromNumber(n)));return s.compare(AO)===1&&(s=new wo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=jE(e),[n,s]=GE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new l1(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=jE(e),[n,s]=GE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Dd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Mh(kt.min(),s,new Cr(Qt),ai(),Ut())}}class Dd{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Dd(n,r,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class Ew{constructor(e,r){this.targetId=e,this.me=r}}class _w{constructor(e,r,n=xn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class WE{constructor(){this.fe=0,this.ge=KE(),this.pe=xn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ut(),r=Ut(),n=Ut();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:wt()}}),new Dd(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=KE()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class wO{constructor(e){this.Le=e,this.Be=new Map,this.ke=ai(),this.qe=zE(),this.Qe=new Cr(Qt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:wt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Fv(i))if(n===0){const a=new pt(i.path);this.Ue(r,a,Dn.newNoDocument(a,kt.min()))}else nr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=No(n).toUint8Array()}catch(l){if(l instanceof ZA)return Ql("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new l1(a,s,i)}catch(l){return Ql(l instanceof Yc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Fv(o.target)){const l=new pt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Dn.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=Ut();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Mh(e,r,this.Qe,this.ke,n);return this.ke=ai(),this.qe=zE(),this.Qe=new Cr(Qt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new WE,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new mn(Qt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ct("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new WE),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function zE(){return new Cr(pt.comparator)}function KE(){return new Cr(pt.comparator)}const CO={asc:"ASCENDING",desc:"DESCENDING"},IO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kO={and:"AND",or:"OR"};class DO{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Ov(t,e){return t.useProto3Json||kh(e)?e:{value:e}}function P0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RO(t,e){return P0(t,e.toTimestamp())}function xa(t){return nr(!!t),kt.fromTimestamp(function(r){const n=Qi(r);return new en(n.seconds,n.nanos)}(t))}function c1(t,e){return Nv(t,e).canonicalString()}function Nv(t,e){const r=function(s){return new fr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Sw(t){const e=fr.fromString(t);return nr(Iw(e)),e}function Lv(t,e){return c1(t.databaseId,e.path)}function Fp(t,e){const r=Sw(e);if(r.get(1)!==t.databaseId.projectId)throw new et($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new et($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new pt(Aw(r))}function Tw(t,e){return c1(t.databaseId,e)}function FO(t){const e=Sw(t);return e.length===4?fr.emptyPath():Aw(e)}function Mv(t){return new fr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Aw(t){return nr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qE(t,e,r){return{name:Lv(t,e),fields:r.value.mapValue.fields}}function PO(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:wt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(nr(u===void 0||typeof u=="string"),xn.fromBase64String(u||"")):(nr(u===void 0||u instanceof Buffer||u instanceof Uint8Array),xn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?$e.UNKNOWN:yw(c.code);return new et(u,c.message||"")}(a);r=new _w(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Fp(t,n.document.name),i=xa(n.document.updateTime),a=n.document.createTime?xa(n.document.createTime):kt.min(),o=new ls({mapValue:{fields:n.document.fields}}),l=Dn.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new Yf(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Fp(t,n.document),i=n.readTime?xa(n.readTime):kt.min(),a=Dn.newNoDocument(s,i),o=n.removedTargetIds||[];r=new Yf([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Fp(t,n.document),i=n.removedTargetIds||[];r=new Yf([],i,s,null)}else{if(!("filter"in e))return wt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new bO(s,i),o=n.targetId;r=new Ew(o,a)}}return r}function OO(t,e){let r;if(e instanceof kd)r={update:qE(t,e.key,e.value)};else if(e instanceof Lh)r={delete:Lv(t,e.key)};else if(e instanceof ro)r={update:qE(t,e.key,e.data),updateMask:jO(e.fieldMask)};else{if(!(e instanceof yO))return wt();r={verify:Lv(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof Zu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ed)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof td)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof F0)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw wt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:RO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:wt()}(t,e.precondition)),r}function NO(t,e){return t&&t.length>0?(nr(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?xa(s.updateTime):xa(i);return a.isEqual(kt.min())&&(a=xa(i)),new vO(a,s.transformResults||[])}(r,e))):[]}function LO(t,e){return{documents:[Tw(t,e.path)]}}function MO(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Tw(t,s);const i=function(c){if(c.length!==0)return Cw(ta.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:_l(f.field),direction:VO(f.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=Ov(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function BO(t){let e=FO(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){nr(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(d){const f=ww(d);return f instanceof ta&&nw(f)?f.getFilters():[f]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(f=>function(v){return new Ju(bl(v.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(r.orderBy));let o=null;r.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,kh(f)?null:f}(r.limit));let l=null;r.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new tc(h,f)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new tc(h,f)}(r.endAt)),rO(e,s,a,i,o,"F",l,c)}function UO(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function ww(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=bl(r.unaryFilter.field);return Kr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=bl(r.unaryFilter.field);return Kr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bl(r.unaryFilter.field);return Kr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=bl(r.unaryFilter.field);return Kr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(t):t.fieldFilter!==void 0?function(r){return Kr.create(bl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ta.create(r.compositeFilter.filters.map(n=>ww(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return wt()}}(r.compositeFilter.op))}(t):wt()}function VO(t){return CO[t]}function $O(t){return IO[t]}function HO(t){return kO[t]}function _l(t){return{fieldPath:t.canonicalString()}}function bl(t){return hn.fromServerFormat(t.fieldPath)}function Cw(t){return t instanceof Kr?function(r){if(r.op==="=="){if(OE(r.value))return{unaryFilter:{field:_l(r.field),op:"IS_NAN"}};if(PE(r.value))return{unaryFilter:{field:_l(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(OE(r.value))return{unaryFilter:{field:_l(r.field),op:"IS_NOT_NAN"}};if(PE(r.value))return{unaryFilter:{field:_l(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(r.field),op:$O(r.op),value:r.value}}}(t):t instanceof ta?function(r){const n=r.getFilters().map(s=>Cw(s));return n.length===1?n[0]:{compositeFilter:{op:HO(r.op),filters:n}}}(t):wt()}function jO(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Iw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,r,n,s,i=kt.min(),a=kt.min(),o=xn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.ct=e}}function WO(t){const e=BO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?R0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.un=new KO}addToCollectionParentIndex(e,r){return this.un.add(r),ze.resolve()}getCollectionParents(e,r){return ze.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ze.resolve()}deleteFieldIndex(e,r){return ze.resolve()}deleteAllFieldIndexes(e){return ze.resolve()}createTargetIndexes(e,r){return ze.resolve()}getDocumentsMatchingTarget(e,r){return ze.resolve(null)}getIndexType(e,r){return ze.resolve(0)}getFieldIndexes(e,r){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,r){return ze.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,r){return ze.resolve(Yi.min())}updateCollectionGroup(e,r,n){return ze.resolve()}updateIndexEntries(e,r){return ze.resolve()}}class KO{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new mn(fr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new mn(fr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new rc(0)}static kn(){return new rc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.changes=new mc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ze.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&xu(n.mutation,s,vs.empty(),en.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ut()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ut()){const s=Eo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=Xc();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Eo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ut()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=ai();const a=gu(),o=function(){return gu()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof ro)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),xu(u.mutation,c,u.mutation.getFieldMask(),en.now())):a.set(c.key,vs.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var d;return o.set(c,new XO(u,(d=a.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,r){const n=gu();let s=new Cr((a,o)=>a-o),i=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||vs.empty();u=o.applyToLocalView(c,u),n.set(l,u);const d=(s.get(o.batchId)||Ut()).add(l);s=s.insert(o.batchId,d)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,d=dw();u.forEach(f=>{if(!i.has(f)){const h=gw(r.get(f),n.get(f));h!==null&&d.set(f,h),i=i.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return ze.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return pt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):a1(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):ze.resolve(Eo());let o=-1,l=i;return a.next(c=>ze.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),i.get(u)?ze.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ut())).next(u=>({batchId:o,changes:uw(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new pt(r)).next(n=>{let s=Xc();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=Xc();return this.indexManager.getCollectionParents(e,i).next(o=>ze.forEach(o,l=>{const c=function(d,f){return new Ko(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Dn.newInvalidDocument(u)))});let o=Xc();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&xu(u.mutation,c,vs.empty(),en.now()),Ph(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ze.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:xa(s.createTime)}}(r)),ze.resolve()}getNamedQuery(e,r){return ze.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:WO(s.bundledQuery),readTime:xa(s.readTime)}}(r)),ze.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.overlays=new Cr(pt.comparator),this.Ir=new Map}getOverlay(e,r){return ze.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Eo();return ze.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),ze.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),ze.resolve()}getOverlaysForCollection(e,r,n){const s=Eo(),i=r.length+1,a=new pt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return ze.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Cr((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=Eo(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Eo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return ze.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new _O(r,n));let i=this.Ir.get(r);i===void 0&&(i=Ut(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return ze.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ze.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.Tr=new mn(rn.Er),this.dr=new mn(rn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new rn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new rn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new pt(new fr([])),n=new rn(r,e),s=new rn(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new pt(new fr([])),n=new rn(r,e),s=new rn(r,e+1);let i=Ut();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new rn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class rn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return pt.comparator(e.key,r.key)||Qt(e.wr,r.wr)}static Ar(e,r){return Qt(e.wr,r.wr)||pt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new mn(rn.Er)}checkEmpty(e){return ze.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new EO(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new rn(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ze.resolve(a)}lookupMutationBatch(e,r){return ze.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return ze.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new rn(r,0),s=new rn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),ze.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new mn(Qt);return r.forEach(s=>{const i=new rn(s,0),a=new rn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),ze.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;pt.isDocumentKey(i)||(i=i.child(""));const a=new rn(new pt(i),0);let o=new mn(Qt);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),ze.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){nr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ze.forEach(r.mutations,s=>{const i=new rn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new rn(r,0),s=this.br.firstAfterOrEqual(n);return ze.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ze.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.Mr=e,this.docs=function(){return new Cr(pt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ze.resolve(n?n.document.mutableCopy():Dn.newInvalidDocument(r))}getEntries(e,r){let n=ai();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Dn.newInvalidDocument(s))}),ze.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=ai();const a=r.path,o=new pt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||M6(L6(u),n)<=0||(s.has(u.key)||Ph(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return ze.resolve(i)}getAllFromCollectionGroup(e,r,n,s){wt()}Or(e,r){return ze.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new rN(this)}getSize(e){return ze.resolve(this.size)}}class rN extends qO{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),ze.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.persistence=e,this.Nr=new mc(r=>n1(r),s1),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new u1,this.targetCount=0,this.kr=rc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ze.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new rc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ze.resolve()}updateTargetData(e,r){return this.Kn(r),ze.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),ze.waitFor(i).next(()=>s)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return ze.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),ze.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),ze.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ze.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return ze.resolve(n)}containsKey(e,r){return ze.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,r){this.qr={},this.overlays={},this.Qr=new e1(0),this.Kr=!1,this.Kr=!0,this.$r=new ZO,this.referenceDelegate=e(this),this.Ur=new nN(this),this.indexManager=new zO,this.remoteDocumentCache=function(s){return new tN(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new GO(r),this.Gr=new QO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new JO,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new eN(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ct("MemoryPersistence","Starting transaction:",e);const s=new aN(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return ze.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class aN extends U6{constructor(e){super(),this.currentSequenceNumber=e}}class d1{constructor(e){this.persistence=e,this.Jr=new u1,this.Yr=null}static Zr(e){return new d1(e)}get Xr(){if(this.Yr)return this.Yr;throw wt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ze.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ze.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ze.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.Xr,n=>{const s=pt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,kt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return ze.or([()=>ze.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Ut(),s=Ut();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new f1(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return dF()?8:V6(Bn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new iN;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Oc()<=$t.DEBUG&&ct("QueryEngine","SDK will not create cache indexes for query:",El(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ze.resolve()):(Oc()<=$t.DEBUG&&ct("QueryEngine","Query:",El(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Oc()<=$t.DEBUG&&ct("QueryEngine","The SDK decides to create cache indexes for query:",El(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ga(r))):ze.resolve())}Yi(e,r){if(BE(r))return ze.resolve(null);let n=ga(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=R0(r,null,"F"),n=ga(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Ut(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,R0(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return BE(r)||s.isEqual(kt.min())?ze.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?ze.resolve(null):(Oc()<=$t.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),El(r)),this.rs(e,a,r,N6(s,-1)).next(o=>o))})}ts(e,r){let n=new mn(lw(e));return r.forEach((s,i)=>{Ph(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Oc()<=$t.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",El(r)),this.Ji.getDocumentsMatchingQuery(e,r,Yi.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Cr(Qt),this._s=new mc(i=>n1(i),s1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function cN(t,e,r,n){return new lN(t,e,r,n)}async function kw(t,e){const r=Rt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=Ut();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function uN(t,e){const r=Rt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const d=c.batch,f=d.keys();let h=ze.resolve();return f.forEach(v=>{h=h.next(()=>u.getEntry(l,v)).next(p=>{const g=c.docVersions.get(v);nr(g!==null),p.version.compareTo(g)<0&&(d.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),u.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Ut();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function Dw(t){const e=Rt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function dN(t,e){const r=Rt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,d)=>{const f=s.get(d);if(!f)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,d).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,d)));let h=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?h=h.withResumeToken(xn.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,n)),s=s.insert(d,h),function(p,g,y){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,h,u)&&o.push(r.Ur.updateTargetData(i,h))});let l=ai(),c=Ut();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(fN(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(kt.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(d=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return ze.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function fN(t,e,r){let n=Ut(),s=Ut();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=ai();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(kt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):ct("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function hN(t,e){const r=Rt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function pN(t,e){const r=Rt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,ze.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Ni(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Bv(t,e,r){const n=Rt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Id(a))throw a;ct("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function XE(t,e,r){const n=Rt(t);let s=kt.min(),i=Ut();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const d=Rt(l),f=d._s.get(u);return f!==void 0?ze.resolve(d.os.get(f)):d.Ur.getTargetData(c,u)}(n,a,ga(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:kt.min(),r?i:Ut())).next(o=>(mN(n,sO(e),o),{documents:o,Ts:i})))}function mN(t,e,r){let n=t.us.get(e)||kt.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class YE{constructor(){this.activeTargetIds=uO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vN{constructor(){this.so=new YE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new YE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf=null;function Pp(){return gf===null?gf=function(){return 268435456+Math.round(2147483648*Math.random())}():gf++,"0x"+gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class EN extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=Pp(),l=this.xo(r,n.toUriEncodedString());ct("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(ct("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw Ql("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pc}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=xN[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=Pp();return new Promise((a,o)=>{const l=new WA;l.setWithCredentials(!0),l.listenOnce(zA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Kf.NO_ERROR:const u=l.getResponseJson();ct(bn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case Kf.TIMEOUT:ct(bn,`RPC '${e}' ${i} timed out`),o(new et($e.DEADLINE_EXCEEDED,"Request time out"));break;case Kf.HTTP_ERROR:const d=l.getStatus();if(ct(bn,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const v=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(y)>=0?y:$e.UNKNOWN}(h.status);o(new et(v,h.message))}else o(new et($e.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new et($e.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{ct(bn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ct(bn,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=Pp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=XA(),o=qA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");ct(bn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=a.createWebChannel(u,l);let f=!1,h=!1;const v=new yN({Io:g=>{h?ct(bn,`Not sending because RPC '${e}' stream ${s} is closed:`,g):(f||(ct(bn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),ct(bn,`RPC '${e}' stream ${s} sending:`,g),d.send(g))},To:()=>d.close()}),p=(g,y,E)=>{g.listen(y,S=>{try{E(S)}catch(I){setTimeout(()=>{throw I},0)}})};return p(d,qc.EventType.OPEN,()=>{h||(ct(bn,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),p(d,qc.EventType.CLOSE,()=>{h||(h=!0,ct(bn,`RPC '${e}' stream ${s} transport closed`),v.So())}),p(d,qc.EventType.ERROR,g=>{h||(h=!0,Ql(bn,`RPC '${e}' stream ${s} transport errored:`,g),v.So(new et($e.UNAVAILABLE,"The operation could not be completed")))}),p(d,qc.EventType.MESSAGE,g=>{var y;if(!h){const E=g.data[0];nr(!!E);const S=E,I=S.error||((y=S[0])===null||y===void 0?void 0:y.error);if(I){ct(bn,`RPC '${e}' stream ${s} received error:`,I);const R=I.status;let D=function(b){const x=Hr[b];if(x!==void 0)return yw(x)}(R),C=I.message;D===void 0&&(D=$e.INTERNAL,C="Unknown error status: "+R+" with message "+I.message),h=!0,v.So(new et(D,C)),d.close()}else ct(bn,`RPC '${e}' stream ${s} received:`,E),v.bo(E)}}),p(o,KA.STAT_EVENT,g=>{g.stat===Iv.PROXY?ct(bn,`RPC '${e}' stream ${s} detected buffering proxy`):g.stat===Iv.NOPROXY&&ct(bn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function Op(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(t){return new DO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ct("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Rw(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===$e.RESOURCE_EXHAUSTED?(si(r.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new et($e.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ct("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _N extends Fw{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=PO(this.serializer,e),n=function(i){if(!("targetChange"in i))return kt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?kt.min():a.readTime?xa(a.readTime):kt.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Mv(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=Fv(l)?{documents:LO(i,l)}:{query:MO(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=bw(i,a.resumeToken);const c=Ov(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(kt.min())>0){o.readTime=P0(i,a.snapshotVersion.toTimestamp());const c=Ov(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=UO(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Mv(this.serializer),r.removeTarget=e,this.a_(r)}}class bN extends Fw{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return nr(!!e.streamToken),this.lastStreamToken=e.streamToken,nr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){nr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=NO(e.writeResults,e.commitTime),n=xa(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Mv(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>OO(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new et($e.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Nv(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new et($e.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,Nv(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new et($e.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class TN{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(si(r),this.D_=!1):ct("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{qo(this)&&(ct("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Rt(l);c.L_.add(4),await Rd(c),c.q_.set("Unknown"),c.L_.delete(4),await Uh(c)}(this))})}),this.q_=new TN(n,s)}}async function Uh(t){if(qo(t))for(const e of t.B_)await e(!0)}async function Rd(t){for(const e of t.B_)await e(!1)}function Pw(t,e){const r=Rt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),v1(r)?m1(r):vc(r).r_()&&p1(r,e))}function h1(t,e){const r=Rt(t),n=vc(r);r.N_.delete(e),n.r_()&&Ow(r,e),r.N_.size===0&&(n.r_()?n.o_():qo(r)&&r.q_.set("Unknown"))}function p1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}vc(t).A_(e)}function Ow(t,e){t.Q_.xe(e),vc(t).R_(e)}function m1(t){t.Q_=new wO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),vc(t).start(),t.q_.v_()}function v1(t){return qo(t)&&!vc(t).n_()&&t.N_.size>0}function qo(t){return Rt(t).L_.size===0}function Nw(t){t.Q_=void 0}async function wN(t){t.q_.set("Online")}async function CN(t){t.N_.forEach((e,r)=>{p1(t,e)})}async function IN(t,e){Nw(t),v1(t)?(t.q_.M_(e),m1(t)):t.q_.set("Unknown")}async function kN(t,e,r){if(t.q_.set("Online"),e instanceof _w&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){ct("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await O0(t,n)}else if(e instanceof Yf?t.Q_.Ke(e):e instanceof Ew?t.Q_.He(e):t.Q_.We(e),!r.isEqual(kt.min()))try{const n=await Dw(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(xn.EMPTY_BYTE_STRING,u.snapshotVersion)),Ow(i,l);const d=new Ni(u.target,l,c,u.sequenceNumber);p1(i,d)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){ct("RemoteStore","Failed to raise snapshot:",n),await O0(t,n)}}async function O0(t,e,r){if(!Id(e))throw e;t.L_.add(1),await Rd(t),t.q_.set("Offline"),r||(r=()=>Dw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ct("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Uh(t)})}function Lw(t,e){return e().catch(r=>O0(t,r,e))}async function Vh(t){const e=Rt(t),r=Ji(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;DN(e);)try{const s=await hN(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,RN(e,s)}catch(s){await O0(e,s)}Mw(e)&&Bw(e)}function DN(t){return qo(t)&&t.O_.length<10}function RN(t,e){t.O_.push(e);const r=Ji(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Mw(t){return qo(t)&&!Ji(t).n_()&&t.O_.length>0}function Bw(t){Ji(t).start()}async function FN(t){Ji(t).p_()}async function PN(t){const e=Ji(t);for(const r of t.O_)e.m_(r.mutations)}async function ON(t,e,r){const n=t.O_.shift(),s=o1.from(n,e,r);await Lw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Vh(t)}async function NN(t,e){e&&Ji(t).V_&&await async function(n,s){if(function(a){return SO(a)&&a!==$e.ABORTED}(s.code)){const i=n.O_.shift();Ji(n).s_(),await Lw(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Vh(n)}}(t,e),Mw(t)&&Bw(t)}async function JE(t,e){const r=Rt(t);r.asyncQueue.verifyOperationInProgress(),ct("RemoteStore","RemoteStore received new credentials");const n=qo(r);r.L_.add(3),await Rd(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Uh(r)}async function LN(t,e){const r=Rt(t);e?(r.L_.delete(2),await Uh(r)):e||(r.L_.add(2),await Rd(r),r.q_.set("Unknown"))}function vc(t){return t.K_||(t.K_=function(r,n,s){const i=Rt(r);return i.w_(),new _N(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:wN.bind(null,t),Ro:CN.bind(null,t),mo:IN.bind(null,t),d_:kN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),v1(t)?m1(t):t.q_.set("Unknown")):(await t.K_.stop(),Nw(t))})),t.K_}function Ji(t){return t.U_||(t.U_=function(r,n,s){const i=Rt(r);return i.w_(),new bN(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:FN.bind(null,t),mo:NN.bind(null,t),f_:PN.bind(null,t),g_:ON.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Vh(t)):(await t.U_.stop(),t.O_.length>0&&(ct("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new za,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new g1(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x1(t,e){if(si("AsyncQueue",`${e}: ${t}`),Id(t))return new et($e.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this.comparator=e?(r,n)=>e(r,n)||pt.comparator(r.key,n.key):(r,n)=>pt.comparator(r.key,n.key),this.keyedMap=Xc(),this.sortedSet=new Cr(this.comparator)}static emptySet(e){return new $l(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof $l)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new $l;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.W_=new Cr(pt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):wt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class nc{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new nc(e,r,$l.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class BN{constructor(){this.queries=e_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Rt(r),i=s.queries;s.queries=e_(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new et($e.ABORTED,"Firestore shutting down"))}}function e_(){return new mc(t=>ow(t),Fh)}async function y1(t,e){const r=Rt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new MN,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=x1(a,`Initialization of query '${El(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&_1(r)}async function E1(t,e){const r=Rt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function UN(t,e){const r=Rt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&_1(r)}function VN(t,e,r){const n=Rt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function _1(t){t.Y_.forEach(e=>{e.next()})}var Uv,t_;(t_=Uv||(Uv={})).ea="default",t_.Cache="cache";class b1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new nc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Uv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.key=e}}class Vw{constructor(e){this.key=e}}class $N{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ut(),this.mutatedKeys=Ut(),this.Aa=lw(e),this.Ra=new $l(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new ZE,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const f=s.get(u),h=Ph(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;f&&h?f.data.isEqual(h.data)?v!==p&&(n.track({type:3,doc:h}),g=!0):this.ga(f,h)||(n.track({type:2,doc:h}),g=!0,(l&&this.Aa(h,l)>0||c&&this.Aa(h,c)<0)&&(o=!0)):!f&&h?(n.track({type:0,doc:h}),g=!0):f&&!h&&(n.track({type:1,doc:f}),g=!0,(l||c)&&(o=!0)),g&&(h?(a=a.add(h),i=p?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,d)=>function(h,v){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return p(h)-p(v)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new nc(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ZE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ut(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new Vw(n))}),this.da.forEach(n=>{e.has(n)||r.push(new Uw(n))}),r}ba(e){this.Ta=e.Ts,this.da=Ut();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return nc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class HN{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class jN{constructor(e){this.key=e,this.va=!1}}class GN{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new mc(o=>ow(o),Fh),this.Ma=new Map,this.xa=new Set,this.Oa=new Cr(pt.comparator),this.Na=new Map,this.La=new u1,this.Ba={},this.ka=new Map,this.qa=rc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WN(t,e,r=!0){const n=zw(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await $w(n,e,r,!0),s}async function zN(t,e){const r=zw(t);await $w(r,e,!0,!1)}async function $w(t,e,r,n){const s=await pN(t.localStore,ga(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await KN(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&Pw(t.remoteStore,s),o}async function KN(t,e,r,n,s){t.Ka=(d,f,h)=>async function(p,g,y,E){let S=g.view.ma(y);S.ns&&(S=await XE(p.localStore,g.query,!1).then(({documents:C})=>g.view.ma(C,S)));const I=E&&E.targetChanges.get(g.targetId),R=E&&E.targetMismatches.get(g.targetId)!=null,D=g.view.applyChanges(S,p.isPrimaryClient,I,R);return n_(p,g.targetId,D.wa),D.snapshot}(t,d,f,h);const i=await XE(t.localStore,e,!0),a=new $N(e,i.Ts),o=a.ma(i.documents),l=Dd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);n_(t,r,c.wa);const u=new HN(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function qN(t,e,r){const n=Rt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Fh(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Bv(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&h1(n.remoteStore,s.targetId),Vv(n,s.targetId)}).catch(Cd)):(Vv(n,s.targetId),await Bv(n.localStore,s.targetId,!0))}async function XN(t,e){const r=Rt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),h1(r.remoteStore,n.targetId))}async function YN(t,e,r){const n=n5(t);try{const s=await function(a,o){const l=Rt(a),c=en.now(),u=o.reduce((h,v)=>h.add(v.key),Ut());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let v=ai(),p=Ut();return l.cs.getEntries(h,u).next(g=>{v=g,v.forEach((y,E)=>{E.isValidDocument()||(p=p.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,v)).next(g=>{d=g;const y=[];for(const E of o){const S=xO(E,d.get(E.key).overlayedDocument);S!=null&&y.push(new ro(E.key,S,ew(S.value.mapValue),Qn.exists(!0)))}return l.mutationQueue.addMutationBatch(h,c,y,o)}).next(g=>{f=g;const y=g.applyToLocalDocumentSet(d,p);return l.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:f.batchId,changes:uw(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new Cr(Qt)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await Fd(n,s.changes),await Vh(n.remoteStore)}catch(s){const i=x1(s,"Failed to persist write");r.reject(i)}}async function Hw(t,e){const r=Rt(t);try{const n=await dN(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(nr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?nr(a.va):s.removedDocuments.size>0&&(nr(a.va),a.va=!1))}),await Fd(r,n,e)}catch(n){await Cd(n)}}function r_(t,e,r){const n=Rt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Rt(a);l.onlineState=o;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.j_)f.Z_(o)&&(c=!0)}),c&&_1(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function QN(t,e,r){const n=Rt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Cr(pt.comparator);a=a.insert(i,Dn.newNoDocument(i,kt.min()));const o=Ut().add(i),l=new Mh(kt.min(),new Map,new Cr(Qt),a,o);await Hw(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),S1(n)}else await Bv(n.localStore,e,!1).then(()=>Vv(n,e,r)).catch(Cd)}async function JN(t,e){const r=Rt(t),n=e.batch.batchId;try{const s=await uN(r.localStore,e);Gw(r,n,null),jw(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Fd(r,s)}catch(s){await Cd(s)}}async function ZN(t,e,r){const n=Rt(t);try{const s=await function(a,o){const l=Rt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(nr(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);Gw(n,e,r),jw(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Fd(n,s)}catch(s){await Cd(s)}}function jw(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function Gw(t,e,r){const n=Rt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Vv(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||Ww(t,n)})}function Ww(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(h1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),S1(t))}function n_(t,e,r){for(const n of r)n instanceof Uw?(t.La.addReference(n.key,e),e5(t,n)):n instanceof Vw?(ct("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||Ww(t,n.key)):wt()}function e5(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ct("SyncEngine","New document in limbo: "+r),t.xa.add(n),S1(t))}function S1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new pt(fr.fromString(e)),n=t.qa.next();t.Na.set(n,new jN(r)),t.Oa=t.Oa.insert(r,n),Pw(t.remoteStore,new Ni(ga(Rh(r.path)),n,"TargetPurposeLimboResolution",e1.oe))}}async function Fd(t,e,r){const n=Rt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=f1.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=Rt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ze.forEach(c,f=>ze.forEach(f.$i,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>ze.forEach(f.Ui,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!Id(d))throw d;ct("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.os.get(f),v=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(v);u.os=u.os.insert(f,p)}}}(n.localStore,i))}async function t5(t,e){const r=Rt(t);if(!r.currentUser.isEqual(e)){ct("SyncEngine","User change. New user:",e.toKey());const n=await kw(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new et($e.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Fd(r,n.hs)}}function r5(t,e){const r=Rt(t),n=r.Na.get(e);if(n&&n.va)return Ut().add(n.key);{let s=Ut();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function zw(t){const e=Rt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QN.bind(null,e),e.Ca.d_=UN.bind(null,e.eventManager),e.Ca.$a=VN.bind(null,e.eventManager),e}function n5(t){const e=Rt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZN.bind(null,e),e}class N0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return cN(this.persistence,new oN,e.initialUser,this.serializer)}Ga(e){return new sN(d1.Zr,this.serializer)}Wa(e){return new vN}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}N0.provider={build:()=>new N0};class $v{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>r_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=t5.bind(null,this.syncEngine),await LN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new BN}()}createDatastore(e){const r=Bh(e.databaseInfo.databaseId),n=function(i){return new EN(i)}(e.databaseInfo);return function(i,a,o,l){return new SN(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new AN(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>r_(this.syncEngine,r,0),function(){return QE.D()?new QE:new gN}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,u){const d=new GN(s,i,a,o,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Rt(s);ct("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Rd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}$v.provider={build:()=>new $v};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=wn.UNAUTHENTICATED,this.clientId=QA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{ct("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(ct("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new za;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=x1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Np(t,e){t.asyncQueue.verifyOperationInProgress(),ct("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await kw(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function s_(t,e){t.asyncQueue.verifyOperationInProgress();const r=await a5(t);ct("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>JE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>JE(e.remoteStore,s)),t._onlineComponents=e}async function a5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ct("FirestoreClient","Using user provided OfflineComponentProvider");try{await Np(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===$e.FAILED_PRECONDITION||s.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Ql("Error using user provided cache. Falling back to memory cache: "+r),await Np(t,new N0)}}else ct("FirestoreClient","Using default OfflineComponentProvider"),await Np(t,new N0);return t._offlineComponents}async function Kw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ct("FirestoreClient","Using user provided OnlineComponentProvider"),await s_(t,t._uninitializedComponentsProvider._online)):(ct("FirestoreClient","Using default OnlineComponentProvider"),await s_(t,new $v))),t._onlineComponents}function i5(t){return Kw(t).then(e=>e.syncEngine)}async function L0(t){const e=await Kw(t),r=e.eventManager;return r.onListen=WN.bind(null,e.syncEngine),r.onUnlisten=qN.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=zN.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=XN.bind(null,e.syncEngine),r}function o5(t,e,r={}){const n=new za;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new T1({next:f=>{u.Za(),a.enqueueAndForget(()=>E1(i,d));const h=f.docs.has(o);!h&&f.fromCache?c.reject(new et($e.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new et($e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new b1(Rh(o.path),u,{includeMetadataChanges:!0,_a:!0});return y1(i,d)}(await L0(t),t.asyncQueue,e,r,n)),n.promise}function l5(t,e,r={}){const n=new za;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new T1({next:f=>{u.Za(),a.enqueueAndForget(()=>E1(i,d)),f.fromCache&&l.source==="server"?c.reject(new et($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new b1(o,u,{includeMetadataChanges:!0,_a:!0});return y1(i,d)}(await L0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t,e,r){if(!r)throw new et($e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function c5(t,e,r,n){if(e===!0&&n===!0)throw new et($e.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function i_(t){if(!pt.isDocumentKey(t))throw new et($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function o_(t){if(pt.isDocumentKey(t))throw new et($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $h(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":wt()}function Jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new et($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=$h(t);throw new et($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function u5(t,e){if(e<=0)throw new et($e.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new et($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new et($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qw((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new et($e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new et($e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new et($e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new w6;switch(n.type){case"firstParty":return new D6(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new et($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=a_.get(r);n&&(ct("ComponentProvider","Removing Datastore"),a_.delete(r),n.terminate())}(this),Promise.resolve()}}function d5(t,e,r,n={}){var s;const i=(t=Jn(t,Hh))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=wn.MOCK_USER;else{o=sA(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new et($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new wn(c)}t._authCredentials=new C6(new YA(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wa(this.firestore,e,this._query)}}class Ln{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class Gi extends wa{constructor(e,r,n){super(e,r,Rh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new pt(e))}withConverter(e){return new Gi(this.firestore,e,this._path)}}function Gt(t,e,...r){if(t=sr(t),Xw("collection","path",e),t instanceof Hh){const n=fr.fromString(e,...r);return o_(n),new Gi(t,null,n)}{if(!(t instanceof Ln||t instanceof Gi))throw new et($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(fr.fromString(e,...r));return o_(n),new Gi(t.firestore,null,n)}}function vt(t,e,...r){if(t=sr(t),arguments.length===1&&(e=QA.newId()),Xw("doc","path",e),t instanceof Hh){const n=fr.fromString(e,...r);return i_(n),new Ln(t,null,new pt(n))}{if(!(t instanceof Ln||t instanceof Gi))throw new et($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(fr.fromString(e,...r));return i_(n),new Ln(t.firestore,t instanceof Gi?t.converter:null,new pt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Rw(this,"async_queue_retry"),this.Vu=()=>{const n=Op();n&&ct("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Op();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Op();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new za;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Id(e))throw e;ct("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw si("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=g1.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&wt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function u_(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Sa extends Hh{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new c_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c_(e),this._firestoreClient=void 0,await e}}}function no(t,e){const r=typeof t=="object"?t:bd(),n=typeof t=="string"?t:"(default)",s=_d(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=Vg("firestore");i&&d5(s,...i)}return s}function Pd(t){if(t._terminated)throw new et($e.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||f5(t),t._firestoreClient}function f5(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,u){return new j6(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,qw(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new s5(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sc(xn.fromBase64String(e))}catch(r){throw new et($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new sc(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new et($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function h5(){return new gc("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new et($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new et($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=/^__.*__$/;class m5{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,r,this.fieldTransforms):new kd(e,this.data,r,this.fieldTransforms)}}class Yw{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ro(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Qw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class C1{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new C1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return M0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Qw(this.Cu)&&p5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class v5{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Bh(e)}Qu(e,r,n,s=!1){return new C1({Cu:e,methodName:r,qu:n,path:hn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xc(t){const e=t._freezeSettings(),r=Bh(t._databaseId);return new v5(t._databaseId,!!e.ignoreUndefinedProperties,r)}function I1(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);D1("Data must be an object, but it was:",a,n);const o=tC(n,a);let l,c;if(i.merge)l=new vs(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const f=Hv(e,d,r);if(!a.contains(f))throw new et($e.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);nC(u,f)||u.push(f)}l=new vs(u),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new m5(new ls(o),l,c)}class Gh extends jh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gh}}class k1 extends jh{_toFieldTransform(e){return new pO(e.path,new Zu)}isEqual(e){return e instanceof k1}}function Jw(t,e,r,n){const s=t.Qu(1,e,r);D1("Data must be an object, but it was:",s,n);const i=[],a=ls.empty();zo(n,(l,c)=>{const u=R1(e,l,r);c=sr(c);const d=s.Nu(u);if(c instanceof Gh)i.push(u);else{const f=Od(c,d);f!=null&&(i.push(u),a.set(u,f))}});const o=new vs(i);return new Yw(a,o,s.fieldTransforms)}function Zw(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[Hv(e,n,r)],l=[s];if(i.length%2!=0)throw new et($e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)o.push(Hv(e,i[f])),l.push(i[f+1]);const c=[],u=ls.empty();for(let f=o.length-1;f>=0;--f)if(!nC(c,o[f])){const h=o[f];let v=l[f];v=sr(v);const p=a.Nu(h);if(v instanceof Gh)c.push(h);else{const g=Od(v,p);g!=null&&(c.push(h),u.set(h,g))}}const d=new vs(c);return new Yw(u,d,a.fieldTransforms)}function eC(t,e,r,n=!1){return Od(r,t.Qu(n?4:3,e))}function Od(t,e){if(rC(t=sr(t)))return D1("Unsupported field value:",e,t),tC(t,e);if(t instanceof jh)return function(n,s){if(!Qw(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=Od(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=sr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dO(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=en.fromDate(n);return{timestampValue:P0(s.serializer,i)}}if(n instanceof en){const i=new en(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:P0(s.serializer,i)}}if(n instanceof A1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof sc)return{bytesValue:bw(s.serializer,n._byteString)};if(n instanceof Ln){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:c1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof w1)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return i1(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${$h(n)}`)}(t,e)}function tC(t,e){const r={};return JA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zo(t,(n,s)=>{const i=Od(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function rC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof en||t instanceof A1||t instanceof sc||t instanceof Ln||t instanceof jh||t instanceof w1)}function D1(t,e,r){if(!rC(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=$h(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Hv(t,e,r){if((e=sr(e))instanceof gc)return e._internalPath;if(typeof e=="string")return R1(t,e);throw M0("Field path arguments must be of type string or ",t,!1,void 0,r)}const g5=new RegExp("[~\\*/\\[\\]]");function R1(t,e,r){if(e.search(g5)>=0)throw M0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new gc(...e.split("."))._internalPath}catch{throw M0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function M0(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new et($e.INVALID_ARGUMENT,o+t+l)}function nC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Wh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class x5 extends F1{data(){return super.data()}}function Wh(t,e){return typeof e=="string"?R1(t,e):e instanceof gc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new et($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P1{}class zh extends P1{}function zr(t,e,...r){let n=[];e instanceof P1&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof O1).length,o=i.filter(l=>l instanceof Kh).length;if(a>1||a>0&&o>0)throw new et($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Kh extends zh{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Kh(e,r,n)}_apply(e){const r=this._parse(e);return aC(e._query,r),new wa(e.firestore,e.converter,Pv(e._query,r))}_parse(e){const r=xc(e.firestore);return function(i,a,o,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new et($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){f_(d,u);const h=[];for(const v of d)h.push(d_(l,i,v));f={arrayValue:{values:h}}}else f=d_(l,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||f_(d,u),f=eC(o,a,d,u==="in"||u==="not-in");return Kr.create(c,u,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function gs(t,e,r){const n=e,s=Wh("where",t);return Kh._create(s,n,r)}class O1 extends P1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new O1(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:ta.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)aC(a,l),a=Pv(a,l)}(e._query,r),new wa(e.firestore,e.converter,Pv(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class N1 extends zh{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new N1(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new et($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new et($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ju(i,a)}(e._query,this._field,this._direction);return new wa(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Ko(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Ks(t,e="asc"){const r=e,n=Wh("orderBy",t);return N1._create(n,r)}class L1 extends zh{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new L1(e,r,n)}_apply(e){return new wa(e.firestore,e.converter,R0(e._query,this._limit,this._limitType))}}function Ri(t){return u5("limit",t),L1._create("limit",t,"F")}class M1 extends zh{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new M1(e,r,n)}_apply(e){const r=E5(e,this.type,this._docOrFields,this._inclusive);return new wa(e.firestore,e.converter,function(s,i){return new Ko(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function y5(...t){return M1._create("startAfter",t,!1)}function E5(t,e,r,n){if(r[0]=sr(r[0]),r[0]instanceof F1)return function(i,a,o,l,c){if(!l)throw new et($e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const d of Vl(i))if(d.field.isKeyField())u.push(D0(a,l.key));else{const f=l.data.field(d.field);if(Dh(f))throw new et($e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const h=d.field.canonicalString();throw new et($e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}u.push(f)}return new tc(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=xc(t.firestore);return function(a,o,l,c,u,d){const f=a.explicitOrderBy;if(u.length>f.length)throw new et($e.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let v=0;v<u.length;v++){const p=u[v];if(f[v].field.isKeyField()){if(typeof p!="string")throw new et($e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof p}`);if(!a1(a)&&p.indexOf("/")!==-1)throw new et($e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${p}' contains a slash.`);const g=a.path.child(fr.fromString(p));if(!pt.isDocumentKey(g))throw new et($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const y=new pt(g);h.push(D0(o,y))}else{const g=eC(l,c,p);h.push(g)}}return new tc(h,d)}(t._query,t.firestore._databaseId,s,e,r,n)}}function d_(t,e,r){if(typeof(r=sr(r))=="string"){if(r==="")throw new et($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!a1(e)&&r.indexOf("/")!==-1)throw new et($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(fr.fromString(r));if(!pt.isDocumentKey(n))throw new et($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return D0(t,new pt(n))}if(r instanceof Ln)return D0(t,r._key);throw new et($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$h(r)}.`)}function f_(t,e){if(!Array.isArray(t)||t.length===0)throw new et($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aC(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new et($e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et($e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class _5{convertValue(e,r="none"){switch(Lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw wt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return zo(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Br(a.doubleValue));return new w1(i)}convertGeoPoint(e){return new A1(Br(e.latitude),Br(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=t1(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){const r=Qi(e);return new en(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=fr.fromString(e);nr(Iw(n));const s=new Yu(n.get(1),n.get(3)),i=new pt(n.popFirst(5));return s.isEqual(r)||si(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iC extends F1{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Wh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Qf extends iC{data(e={}){return super.data(e)}}class oC{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Qc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Qf(this._firestore,this._userDataWriter,n.key,n,new Qc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new et($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new Qf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Qc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new Qf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Qc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:b5(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function b5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t){t=Jn(t,Ln);const e=Jn(t.firestore,Sa);return o5(Pd(e),t._key).then(r=>cC(e,t,r))}class U1 extends _5{constructor(e){super(),this.firestore=e}convertBytes(e){return new sc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,r)}}function dr(t){t=Jn(t,wa);const e=Jn(t.firestore,Sa),r=Pd(e),n=new U1(e);return sC(t._query),l5(r,t._query).then(s=>new oC(e,n,t,s))}function xr(t,e,r){t=Jn(t,Ln);const n=Jn(t.firestore,Sa),s=B1(t.converter,e,r);return Nd(n,[I1(xc(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Qn.none())])}function lC(t,e,r,...n){t=Jn(t,Ln);const s=Jn(t.firestore,Sa),i=xc(s);let a;return a=typeof(e=sr(e))=="string"||e instanceof gc?Zw(i,"updateDoc",t._key,e,r,n):Jw(i,"updateDoc",t._key,e),Nd(s,[a.toMutation(t._key,Qn.exists(!0))])}function ac(t){return Nd(Jn(t.firestore,Sa),[new Lh(t._key,Qn.none())])}function S5(t,e){const r=Jn(t.firestore,Sa),n=vt(t),s=B1(t.converter,e);return Nd(r,[I1(xc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Qn.exists(!1))]).then(()=>n)}function yu(t,...e){var r,n,s;t=sr(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||u_(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(u_(e[a])){const d=e[a];e[a]=(r=d.next)===null||r===void 0?void 0:r.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,u;if(t instanceof Ln)c=Jn(t.firestore,Sa),u=Rh(t._key.path),l={next:d=>{e[a]&&e[a](cC(c,t,d))},error:e[a+1],complete:e[a+2]};else{const d=Jn(t,wa);c=Jn(d.firestore,Sa),u=d._query;const f=new U1(c);l={next:h=>{e[a]&&e[a](new oC(c,f,d,h))},error:e[a+1],complete:e[a+2]},sC(t._query)}return function(f,h,v,p){const g=new T1(p),y=new b1(h,g,v);return f.asyncQueue.enqueueAndForget(async()=>y1(await L0(f),y)),()=>{g.Za(),f.asyncQueue.enqueueAndForget(async()=>E1(await L0(f),y))}}(Pd(c),u,o,l)}function Nd(t,e){return function(n,s){const i=new za;return n.asyncQueue.enqueueAndForget(async()=>YN(await i5(n),s,i)),i.promise}(Pd(t),e)}function cC(t,e,r){const n=r.docs.get(e._key),s=new U1(t);return new iC(t,s,e._key,n,new Qc(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=xc(e)}set(e,r,n){this._verifyNotCommitted();const s=Lp(e,this._firestore),i=B1(s.converter,r,n),a=I1(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,Qn.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=Lp(e,this._firestore);let a;return a=typeof(r=sr(r))=="string"||r instanceof gc?Zw(this._dataReader,"WriteBatch.update",i._key,r,n,s):Jw(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Lp(e,this._firestore);return this._mutations=this._mutations.concat(new Lh(r._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new et($e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lp(t,e){if((t=sr(t)).firestore!==e)throw new et($e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Mo(){return new k1("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){return Pd(t=Jn(t,Sa)),new T5(t,e=>Nd(t,e))}(function(e,r=!0){(function(s){pc=s})(Wo),qi(new ti("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new Sa(new I6(n.getProvider("auth-internal")),new F6(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new et($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yu(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Rs(IE,"4.7.3",e),Rs(IE,"4.7.3","esm2017")})();var A5="firebase",w5="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs(A5,w5,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="firebasestorage.googleapis.com",fC="storageBucket",C5=2*60*1e3,I5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends na{constructor(e,r,n=0){super(Mp(e),`Firebase Storage: ${r} (${Mp(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Or;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Or||(Or={}));function Mp(t){return"storage/"+t}function V1(){const t="An unknown error occurred, please check the error payload for server response.";return new Lr(Or.UNKNOWN,t)}function k5(t){return new Lr(Or.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function D5(t){return new Lr(Or.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function R5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Lr(Or.UNAUTHENTICATED,t)}function F5(){return new Lr(Or.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function P5(t){return new Lr(Or.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function O5(){return new Lr(Or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function N5(){return new Lr(Or.CANCELED,"User canceled the upload/download.")}function L5(t){return new Lr(Or.INVALID_URL,"Invalid URL '"+t+"'.")}function M5(t){return new Lr(Or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function B5(){return new Lr(Or.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fC+"' property when initializing the app?")}function U5(){return new Lr(Or.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function V5(){return new Lr(Or.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $5(t){return new Lr(Or.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jv(t){return new Lr(Or.INVALID_ARGUMENT,t)}function hC(){return new Lr(Or.APP_DELETED,"The Firebase app was deleted.")}function H5(t){return new Lr(Or.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Eu(t,e){return new Lr(Or.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Nc(t){throw new Lr(Or.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=xs.makeFromUrl(e,r)}catch{return new xs(e,"")}if(n.path==="")return n;throw M5(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},p=r===dC?"(?:storage.googleapis.com|storage.cloud.google.com)":r,g="([^?#]*)",y=new RegExp(`^https?://${p}/${s}/${g}`,"i"),S=[{regex:o,indices:l,postModify:i},{regex:h,indices:v,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<S.length;I++){const R=S[I],D=R.regex.exec(e);if(D){const C=D[R.indices.bucket];let _=D[R.indices.path];_||(_=""),n=new xs(C,_),R.postModify(n);break}}if(n==null)throw L5(e);return n}}class j5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(t,e,r){let n=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function d(g){s=setTimeout(()=>{s=null,t(h,l())},g)}function f(){i&&clearTimeout(i)}function h(g,...y){if(c){f();return}if(g){f(),u.call(null,g,...y);return}if(l()||a){f(),u.call(null,g,...y);return}n<64&&(n*=2);let S;o===1?(o=2,S=0):S=(n+Math.random())*1e3,d(S)}let v=!1;function p(g){v||(v=!0,f(),!c&&(s!==null?(g||(o=2),clearTimeout(s),d(0)):g||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,p(!0)},r),p}function W5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t){return t!==void 0}function K5(t){return typeof t=="object"&&!Array.isArray(t)}function $1(t){return typeof t=="string"||t instanceof String}function h_(t){return H1()&&t instanceof Blob}function H1(){return typeof Blob<"u"}function p_(t,e,r,n){if(n<e)throw jv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw jv(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function pC(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Co;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Co||(Co={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,r,n,s,i,a,o,l,c,u,d,f=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,v)=>{this.resolve_=h,this.reject_=v,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new xf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===Co.NO_ERROR,l=i.getStatus();if(!o||q5(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Co.ABORT;n(!1,new xf(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new xf(c,i))})},r=(n,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());z5(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=V1();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?hC():N5();a(l)}else{const l=O5();a(l)}};this.canceled_?r(!1,new xf(!1,null,!0)):this.backoffId_=G5(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&W5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xf{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Y5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Q5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function J5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Z5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function eL(t,e,r,n,s,i,a=!0){const o=pC(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return J5(c,e),Y5(c,r),Q5(c,i),Z5(c,n),new X5(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rL(...t){const e=tL();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(H1())return new Blob(t);throw new Lr(Or.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nL(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t){if(typeof atob>"u")throw $5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bp{constructor(e,r){this.data=e,this.contentType=r||null}}function aL(t,e){switch(t){case pa.RAW:return new Bp(mC(e));case pa.BASE64:case pa.BASE64URL:return new Bp(vC(t,e));case pa.DATA_URL:return new Bp(oL(e),lL(e))}throw V1()}function mC(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=t.charCodeAt(++r);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function iL(t){let e;try{e=decodeURIComponent(t)}catch{throw Eu(pa.DATA_URL,"Malformed data URL.")}return mC(e)}function vC(t,e){switch(t){case pa.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Eu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case pa.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Eu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=sL(e)}catch(s){throw s.message.includes("polyfill")?s:Eu(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class gC{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Eu(pa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=cL(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function oL(t){const e=new gC(t);return e.base64?vC(pa.BASE64,e.rest):iL(e.rest)}function lL(t){return new gC(t).contentType}function cL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,r){let n=0,s="";h_(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(h_(this.data_)){const n=this.data_,s=nL(n,e,r);return s===null?null:new Fi(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Fi(n,!0)}}static getBlob(...e){if(H1()){const r=e.map(n=>n instanceof Fi?n.data_:n);return new Fi(rL.apply(null,r))}else{const r=e.map(a=>$1(a)?aL(pa.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new Fi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t){let e;try{e=JSON.parse(t)}catch{return null}return K5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function dL(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function yC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t,e){return e}class Hn{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||fL}}let yf=null;function hL(t){return!$1(t)||t.length<2?t:yC(t)}function EC(){if(yf)return yf;const t=[];t.push(new Hn("bucket")),t.push(new Hn("generation")),t.push(new Hn("metageneration")),t.push(new Hn("name","fullPath",!0));function e(i,a){return hL(a)}const r=new Hn("name");r.xform=e,t.push(r);function n(i,a){return a!==void 0?Number(a):a}const s=new Hn("size");return s.xform=n,t.push(s),t.push(new Hn("timeCreated")),t.push(new Hn("updated")),t.push(new Hn("md5Hash",null,!0)),t.push(new Hn("cacheControl",null,!0)),t.push(new Hn("contentDisposition",null,!0)),t.push(new Hn("contentEncoding",null,!0)),t.push(new Hn("contentLanguage",null,!0)),t.push(new Hn("contentType",null,!0)),t.push(new Hn("metadata","customMetadata",!0)),yf=t,yf}function pL(t,e){function r(){const n=t.bucket,s=t.fullPath,i=new xs(n,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function mL(t,e,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const a=r[i];n[a.local]=a.xform(n,e[a.server])}return pL(n,t),n}function _C(t,e,r){const n=xC(e);return n===null?null:mL(t,n,r)}function vL(t,e,r,n){const s=xC(e);if(s===null||!$1(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+a(u)+"/o/"+a(d),h=qh(f,r,n),v=pC({alt:"media",token:c});return h+v})[0]}function gL(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class j1{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){if(!t)throw V1()}function xL(t,e){function r(n,s){const i=_C(t,s,e);return bC(i!==null),i}return r}function yL(t,e){function r(n,s){const i=_C(t,s,e);return bC(i!==null),vL(i,s,t.host,t._protocol)}return r}function SC(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=F5():s=R5():r.getStatus()===402?s=D5(t.bucket):r.getStatus()===403?s=P5(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function TC(t){const e=SC(t);function r(n,s){let i=e(n,s);return n.getStatus()===404&&(i=k5(t.path)),i.serverResponse=s.serverResponse,i}return r}function EL(t,e,r){const n=e.fullServerUrl(),s=qh(n,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new j1(s,i,yL(t,r),a);return o.errorHandler=TC(e),o}function _L(t,e){const r=e.fullServerUrl(),n=qh(r,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function a(l,c){}const o=new j1(n,s,a,i);return o.successCodes=[200,204],o.errorHandler=TC(e),o}function bL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function SL(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=bL(null,e)),n}function TL(t,e,r,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let S="";for(let I=0;I<2;I++)S=S+Math.random().toString().slice(2);return S}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=SL(e,n,s),u=gL(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Fi.getBlob(d,n,f);if(h===null)throw U5();const v={name:c.fullPath},p=qh(i,t.host,t._protocol),g="POST",y=t.maxUploadRetryTime,E=new j1(p,g,xL(t,r),y);return E.urlParams=v,E.headers=a,E.body=h.uploadData(),E.errorHandler=SC(e),E}class AL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Co.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Co.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Co.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw Nc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class wL extends AL{initXhr(){this.xhr_.responseType="text"}}function G1(){return new wL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,r){this._service=e,r instanceof xs?this._location=r:this._location=xs.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Bo(e,r)}get root(){const e=new xs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yC(this._location.path)}get storage(){return this._service}get parent(){const e=uL(this._location.path);if(e===null)return null;const r=new xs(this._location.bucket,e);return new Bo(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw H5(e)}}function CL(t,e,r){t._throwIfRoot("uploadBytes");const n=TL(t.storage,t._location,EC(),new Fi(e,!0),r);return t.storage.makeRequestWithTokens(n,G1).then(s=>({metadata:s,ref:t}))}function IL(t){t._throwIfRoot("getDownloadURL");const e=EL(t.storage,t._location,EC());return t.storage.makeRequestWithTokens(e,G1).then(r=>{if(r===null)throw V5();return r})}function kL(t){t._throwIfRoot("deleteObject");const e=_L(t.storage,t._location);return t.storage.makeRequestWithTokens(e,G1)}function DL(t,e){const r=dL(t._location.path,e),n=new xs(t._location.bucket,r);return new Bo(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){return/^[A-Za-z]+:\/\//.test(t)}function FL(t,e){return new Bo(t,e)}function AC(t,e){if(t instanceof W1){const r=t;if(r._bucket==null)throw B5();const n=new Bo(r,r._bucket);return e!=null?AC(n,e):n}else return e!==void 0?DL(t,e):t}function PL(t,e){if(e&&RL(e)){if(t instanceof W1)return FL(t,e);throw jv("To use ref(service, url), the first argument must be a Storage instance.")}else return AC(t,e)}function m_(t,e){const r=e==null?void 0:e[fC];return r==null?null:xs.makeFromBucketSpec(r,t)}function OL(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:sA(s,t.app.options.projectId))}class W1{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=dC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=C5,this._maxUploadRetryTime=I5,this._requests=new Set,s!=null?this._bucket=xs.makeFromBucketSpec(s,this._host):this._bucket=m_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xs.makeFromBucketSpec(this._url,e):this._bucket=m_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){p_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){p_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bo(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new j5(hC());{const a=eL(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const v_="@firebase/storage",g_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="storage";function NL(t,e,r){return t=sr(t),CL(t,e,r)}function LL(t){return t=sr(t),IL(t)}function ML(t){return t=sr(t),kL(t)}function Gv(t,e){return t=sr(t),PL(t,e)}function CC(t=bd(),e){t=sr(t);const n=_d(t,wC).getImmediate({identifier:e}),s=Vg("storage");return s&&BL(n,...s),n}function BL(t,e,r,n={}){OL(t,e,r,n)}function UL(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new W1(r,n,s,e,Wo)}function VL(){qi(new ti(wC,UL,"PUBLIC").setMultipleInstances(!0)),Rs(v_,g_,""),Rs(v_,g_,"esm2017")}VL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L="type.googleapis.com/google.protobuf.Int64Value",HL="type.googleapis.com/google.protobuf.UInt64Value";function IC(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function Wv(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Wv(e));if(typeof t=="function"||typeof t=="object")return IC(t,e=>Wv(e));throw new Error("Data cannot be encoded in JSON: "+t)}function B0(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case $L:case HL:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>B0(e)):typeof t=="function"||typeof t=="object"?IC(t,e=>B0(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Hl extends na{constructor(e,r,n){super(`${z1}/${e}`,r||""),this.details=n}}function jL(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function GL(t,e){let r=jL(t),n=r,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!x_[a])return new Hl("internal","internal");r=x_[a],n=a}const o=i.message;typeof o=="string"&&(n=o),s=i.details,s!==void 0&&(s=B0(s))}}catch{}return r==="ok"?null:new Hl(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="us-central1";function zL(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Hl("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class KL{constructor(e,r,n,s,i=zv,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new WL(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=zv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function qL(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function XL(t,e,r){return n=>QL(t,e,n,{})}async function YL(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function QL(t,e,r,n){const s=t._url(e);return JL(t,s,r,n)}async function JL(t,e,r,n){r=Wv(r);const s={data:r},i={},a=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,l=zL(o),c=await Promise.race([YL(e,s,i,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new Hl("cancelled","Firebase Functions instance was deleted.");const u=GL(c.status,c.json);if(u)throw u;if(!c.json)throw new Hl("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Hl("internal","Response is missing data field.");return{data:B0(d)}}const y_="@firebase/functions",E_="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL="auth-internal",eM="app-check-internal",tM="messaging-internal";function rM(t,e){const r=(n,{instanceIdentifier:s})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(ZL),o=n.getProvider(tM),l=n.getProvider(eM);return new KL(i,a,o,l,s,t)};qi(new ti(z1,r,"PUBLIC").setMultipleInstances(!0)),Rs(y_,E_,e),Rs(y_,E_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t=bd(),e=zv){const n=_d(sr(t),z1).getImmediate({identifier:e}),s=Vg("functions");return s&&nM(n,...s),n}function nM(t,e,r){qL(sr(t),e,r)}function fa(t,e,r){return XL(sr(t),e)}rM(fetch.bind(self));const kC={apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",authDomain:"casemangervue.firebaseapp.com",projectId:"casemangervue",storageBucket:"casemangervue.firebasestorage.app",messagingSenderId:"756483333257",appId:"1:756483333257:web:694e2ad2415b7886563a58",measurementId:"G-YBRDQX9NFR"},Xh=oA(kC),Ws=Ku(Xh),ht=no(Xh),__=CC(Xh),sM=jl(Xh),aM=new da;console.log(" Connected to Firebase project:",kC.projectId);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Sl=typeof document<"u";function DC(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function iM(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&DC(t.default)}const tr=Object.assign;function Up(t,e){const r={};for(const n in e){const s=e[n];r[n]=ra(s)?s.map(t):t(s)}return r}const _u=()=>{},ra=Array.isArray,RC=/#/g,oM=/&/g,lM=/\//g,cM=/=/g,uM=/\?/g,FC=/\+/g,dM=/%5B/g,fM=/%5D/g,PC=/%5E/g,hM=/%60/g,OC=/%7B/g,pM=/%7C/g,NC=/%7D/g,mM=/%20/g;function K1(t){return encodeURI(""+t).replace(pM,"|").replace(dM,"[").replace(fM,"]")}function vM(t){return K1(t).replace(OC,"{").replace(NC,"}").replace(PC,"^")}function Kv(t){return K1(t).replace(FC,"%2B").replace(mM,"+").replace(RC,"%23").replace(oM,"%26").replace(hM,"`").replace(OC,"{").replace(NC,"}").replace(PC,"^")}function gM(t){return Kv(t).replace(cM,"%3D")}function xM(t){return K1(t).replace(RC,"%23").replace(uM,"%3F")}function yM(t){return t==null?"":xM(t).replace(lM,"%2F")}function rd(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const EM=/\/$/,_M=t=>t.replace(EM,"");function Vp(t,e,r="/"){let n,s={},i="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=e.slice(0,l),i=e.slice(l+1,o>-1?o:e.length),s=t(i)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=AM(n??e,r),{fullPath:n+(i&&"?")+i+a,path:n,query:s,hash:rd(a)}}function bM(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function b_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function SM(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&ic(e.matched[n],r.matched[s])&&LC(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function ic(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function LC(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!TM(t[r],e[r]))return!1;return!0}function TM(t,e){return ra(t)?S_(t,e):ra(e)?S_(e,t):t===e}function S_(t,e){return ra(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function AM(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const gi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var nd;(function(t){t.pop="pop",t.push="push"})(nd||(nd={}));var bu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(bu||(bu={}));function wM(t){if(!t)if(Sl){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),_M(t)}const CM=/^[^#]+#/;function IM(t,e){return t.replace(CM,"#")+e}function kM(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const Yh=()=>({left:window.scrollX,top:window.scrollY});function DM(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=kM(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function T_(t,e){return(history.state?history.state.position-e:-1)+t}const qv=new Map;function RM(t,e){qv.set(t,e)}function FM(t){const e=qv.get(t);return qv.delete(t),e}let PM=()=>location.protocol+"//"+location.host;function MC(t,e){const{pathname:r,search:n,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),b_(l,"")}return b_(r,t)+n+s}function OM(t,e,r,n){let s=[],i=[],a=null;const o=({state:f})=>{const h=MC(t,location),v=r.value,p=e.value;let g=0;if(f){if(r.value=h,e.value=f,a&&a===v){a=null;return}g=p?f.position-p.position:0}else n(h);s.forEach(y=>{y(r.value,v,{delta:g,type:nd.pop,direction:g?g>0?bu.forward:bu.back:bu.unknown})})};function l(){a=r.value}function c(f){s.push(f);const h=()=>{const v=s.indexOf(f);v>-1&&s.splice(v,1)};return i.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(tr({},f.state,{scroll:Yh()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function A_(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?Yh():null}}function NM(t){const{history:e,location:r}=window,n={value:MC(t,r)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(r.host&&document.querySelector("base")?t:t.slice(d))+l:PM()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(h){console.error(h),r[u?"replace":"assign"](f)}}function a(l,c){const u=tr({},e.state,A_(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),n.value=l}function o(l,c){const u=tr({},s.value,e.state,{forward:l,scroll:Yh()});i(u.current,u,!0);const d=tr({},A_(n.value,l,null),{position:u.position+1},c);i(l,d,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function LM(t){t=wM(t);const e=NM(t),r=OM(t,e.state,e.location,e.replace);function n(i,a=!0){a||r.pauseListeners(),history.go(i)}const s=tr({location:"",base:t,go:n,createHref:IM.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function MM(t){return typeof t=="string"||t&&typeof t=="object"}function BC(t){return typeof t=="string"||typeof t=="symbol"}const UC=Symbol("");var w_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(w_||(w_={}));function oc(t,e){return tr(new Error,{type:t,[UC]:!0},e)}function Ma(t,e){return t instanceof Error&&UC in t&&(e==null||!!(t.type&e))}const C_="[^/]+?",BM={sensitive:!1,strict:!1,start:!0,end:!0},UM=/[.+*?^${}()[\]/\\]/g;function VM(t,e){const r=tr({},BM,e),n=[];let s=r.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(r.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(UM,"\\$&"),h+=40;else if(f.type===1){const{value:v,repeatable:p,optional:g,regexp:y}=f;i.push({name:v,repeatable:p,optional:g});const E=y||C_;if(E!==C_){h+=10;try{new RegExp(`(${E})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${v}" (${E}): `+I.message)}}let S=p?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;d||(S=g&&c.length<2?`(?:/${S})`:"/"+S),g&&(S+="?"),s+=S,h+=20,g&&(h+=-8),p&&(h+=-20),E===".*"&&(h+=-50)}u.push(h)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,r.sensitive?"":"i");function o(c){const u=c.match(a),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",v=i[f-1];d[v.name]=h&&v.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:v,repeatable:p,optional:g}=h,y=v in c?c[v]:"";if(ra(y)&&!p)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const E=ra(y)?y.join("/"):y;if(!E)if(g)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);u+=E}}return u||"/"}return{re:a,score:n,keys:i,parse:o,stringify:l}}function $M(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function VC(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const i=$M(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(I_(n))return 1;if(I_(s))return-1}return s.length-n.length}function I_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const HM={type:0,value:""},jM=/[a-zA-Z0-9_]/;function GM(t){if(!t)return[[]];if(t==="/")return[[HM]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${r})/"${c}": ${h}`)}let r=0,n=r;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,c="",u="";function d(){c&&(r===0?i.push({type:0,value:c}):r===1||r===2||r===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&d(),a()):l===":"?(d(),r=1):f();break;case 4:f(),r=n;break;case 1:l==="("?r=2:jM.test(l)?f():(d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),a(),s}function WM(t,e,r){const n=VM(GM(t.path),r),s=tr(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function zM(t,e){const r=[],n=new Map;e=F_({strict:!1,end:!0,sensitive:!1},e);function s(d){return n.get(d)}function i(d,f,h){const v=!h,p=D_(d);p.aliasOf=h&&h.record;const g=F_(e,d),y=[p];if("alias"in d){const I=typeof d.alias=="string"?[d.alias]:d.alias;for(const R of I)y.push(D_(tr({},p,{components:h?h.record.components:p.components,path:R,aliasOf:h?h.record:p})))}let E,S;for(const I of y){const{path:R}=I;if(f&&R[0]!=="/"){const D=f.record.path,C=D[D.length-1]==="/"?"":"/";I.path=f.record.path+(R&&C+R)}if(E=WM(I,f,g),h?h.alias.push(E):(S=S||E,S!==E&&S.alias.push(E),v&&d.name&&!R_(E)&&a(d.name)),$C(E)&&l(E),p.children){const D=p.children;for(let C=0;C<D.length;C++)i(D[C],E,h&&h.children[C])}h=h||E}return S?()=>{a(S)}:_u}function a(d){if(BC(d)){const f=n.get(d);f&&(n.delete(d),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(d);f>-1&&(r.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return r}function l(d){const f=XM(d,r);r.splice(f,0,d),d.record.name&&!R_(d)&&n.set(d.record.name,d)}function c(d,f){let h,v={},p,g;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw oc(1,{location:d});g=h.record.name,v=tr(k_(f.params,h.keys.filter(S=>!S.optional).concat(h.parent?h.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),d.params&&k_(d.params,h.keys.map(S=>S.name))),p=h.stringify(v)}else if(d.path!=null)p=d.path,h=r.find(S=>S.re.test(p)),h&&(v=h.parse(p),g=h.record.name);else{if(h=f.name?n.get(f.name):r.find(S=>S.re.test(f.path)),!h)throw oc(1,{location:d,currentLocation:f});g=h.record.name,v=tr({},f.params,d.params),p=h.stringify(v)}const y=[];let E=h;for(;E;)y.unshift(E.record),E=E.parent;return{name:g,path:p,params:v,matched:y,meta:qM(y)}}t.forEach(d=>i(d));function u(){r.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:a,clearRoutes:u,getRoutes:o,getRecordMatcher:s}}function k_(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function D_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:KM(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function KM(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function R_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function qM(t){return t.reduce((e,r)=>tr(e,r.meta),{})}function F_(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function XM(t,e){let r=0,n=e.length;for(;r!==n;){const i=r+n>>1;VC(t,e[i])<0?n=i:r=i+1}const s=YM(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function YM(t){let e=t;for(;e=e.parent;)if($C(e)&&VC(t,e)===0)return e}function $C({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function QM(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(FC," "),a=i.indexOf("="),o=rd(a<0?i:i.slice(0,a)),l=a<0?null:rd(i.slice(a+1));if(o in e){let c=e[o];ra(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function P_(t){let e="";for(let r in t){const n=t[r];if(r=gM(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(ra(n)?n.map(i=>i&&Kv(i)):[n&&Kv(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function JM(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=ra(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const ZM=Symbol(""),O_=Symbol(""),Qh=Symbol(""),q1=Symbol(""),Xv=Symbol("");function Lc(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function wi(t,e,r,n,s,i=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const c=f=>{f===!1?l(oc(4,{from:r,to:e})):f instanceof Error?l(f):MM(f)?l(oc(2,{from:e,to:f})):(a&&n.enterCallbacks[s]===a&&typeof f=="function"&&a.push(f),o())},u=i(()=>t.call(n&&n.instances[s],e,r,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function $p(t,e,r,n,s=i=>i()){const i=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(DC(l)){const u=(l.__vccOpts||l)[e];u&&i.push(wi(u,r,n,a,o,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const d=iM(u)?u.default:u;a.mods[o]=u,a.components[o]=d;const h=(d.__vccOpts||d)[e];return h&&wi(h,r,n,a,o,s)()}))}}return i}function N_(t){const e=_s(Qh),r=_s(q1),n=Ae(()=>{const l=me(t.to);return e.resolve(l)}),s=Ae(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=r.matched;if(!u||!d.length)return-1;const f=d.findIndex(ic.bind(null,u));if(f>-1)return f;const h=L_(l[c-2]);return c>1&&L_(u)===h&&d[d.length-1].path!==h?d.findIndex(ic.bind(null,l[c-2])):f}),i=Ae(()=>s.value>-1&&s9(r.params,n.value.params)),a=Ae(()=>s.value>-1&&s.value===r.matched.length-1&&LC(r.params,n.value.params));function o(l={}){if(n9(l)){const c=e[me(t.replace)?"replace":"push"](me(t.to)).catch(_u);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:Ae(()=>n.value.href),isActive:i,isExactActive:a,navigate:o}}function e9(t){return t.length===1?t[0]:t}const t9=md({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:N_,setup(t,{slots:e}){const r=Ns(N_(t)),{options:n}=_s(Qh),s=Ae(()=>({[M_(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[M_(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&e9(e.default(r));return t.custom?i:bh("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),r9=t9;function n9(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function s9(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!ra(s)||s.length!==n.length||n.some((i,a)=>i!==s[a]))return!1}return!0}function L_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const M_=(t,e,r)=>t??e??r,a9=md({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=_s(Xv),s=Ae(()=>t.route||n.value),i=_s(O_,0),a=Ae(()=>{let c=me(i);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),o=Ae(()=>s.value.matched[a.value]);du(O_,Ae(()=>a.value+1)),du(ZM,o),du(Xv,s);const l=pe();return er(()=>[l.value,o.value,t.name],([c,u,d],[f,h,v])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!ic(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,d=o.value,f=d&&d.components[u];if(!f)return B_(r.default,{Component:f,route:c});const h=d.props[u],v=h?h===!0?c.params:typeof h=="function"?h(c):h:null,g=bh(f,tr({},v,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return B_(r.default,{Component:g,route:c})||g}}});function B_(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const i9=a9;function o9(t){const e=zM(t.routes,t),r=t.parseQuery||QM,n=t.stringifyQuery||P_,s=t.history,i=Lc(),a=Lc(),o=Lc(),l=Ag(gi);let c=gi;Sl&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Up.bind(null,ie=>""+ie),d=Up.bind(null,yM),f=Up.bind(null,rd);function h(ie,de){let ee,Y;return BC(ie)?(ee=e.getRecordMatcher(ie),Y=de):Y=ie,e.addRoute(Y,ee)}function v(ie){const de=e.getRecordMatcher(ie);de&&e.removeRoute(de)}function p(){return e.getRoutes().map(ie=>ie.record)}function g(ie){return!!e.getRecordMatcher(ie)}function y(ie,de){if(de=tr({},de||l.value),typeof ie=="string"){const J=Vp(r,ie,de.path),he=e.resolve({path:J.path},de),re=s.createHref(J.fullPath);return tr(J,he,{params:f(he.params),hash:rd(J.hash),redirectedFrom:void 0,href:re})}let ee;if(ie.path!=null)ee=tr({},ie,{path:Vp(r,ie.path,de.path).path});else{const J=tr({},ie.params);for(const he in J)J[he]==null&&delete J[he];ee=tr({},ie,{params:d(J)}),de.params=d(de.params)}const Y=e.resolve(ee,de),ge=ie.hash||"";Y.params=u(f(Y.params));const q=bM(n,tr({},ie,{hash:vM(ge),path:Y.path})),z=s.createHref(q);return tr({fullPath:q,hash:ge,query:n===P_?JM(ie.query):ie.query||{}},Y,{redirectedFrom:void 0,href:z})}function E(ie){return typeof ie=="string"?Vp(r,ie,l.value.path):tr({},ie)}function S(ie,de){if(c!==ie)return oc(8,{from:de,to:ie})}function I(ie){return C(ie)}function R(ie){return I(tr(E(ie),{replace:!0}))}function D(ie){const de=ie.matched[ie.matched.length-1];if(de&&de.redirect){const{redirect:ee}=de;let Y=typeof ee=="function"?ee(ie):ee;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=E(Y):{path:Y},Y.params={}),tr({query:ie.query,hash:ie.hash,params:Y.path!=null?{}:ie.params},Y)}}function C(ie,de){const ee=c=y(ie),Y=l.value,ge=ie.state,q=ie.force,z=ie.replace===!0,J=D(ee);if(J)return C(tr(E(J),{state:typeof J=="object"?tr({},ge,J.state):ge,force:q,replace:z}),de||ee);const he=ee;he.redirectedFrom=de;let re;return!q&&SM(n,Y,ee)&&(re=oc(16,{to:he,from:Y}),j(Y,Y,!0,!1)),(re?Promise.resolve(re):x(he,Y)).catch(X=>Ma(X)?Ma(X,2)?X:Q(X):H(X,he,Y)).then(X=>{if(X){if(Ma(X,2))return C(tr({replace:z},E(X.to),{state:typeof X.to=="object"?tr({},ge,X.to.state):ge,force:q}),de||he)}else X=A(he,Y,!0,z,ge);return w(he,Y,X),X})}function _(ie,de){const ee=S(ie,de);return ee?Promise.reject(ee):Promise.resolve()}function b(ie){const de=K.values().next().value;return de&&typeof de.runWithContext=="function"?de.runWithContext(ie):ie()}function x(ie,de){let ee;const[Y,ge,q]=l9(ie,de);ee=$p(Y.reverse(),"beforeRouteLeave",ie,de);for(const J of Y)J.leaveGuards.forEach(he=>{ee.push(wi(he,ie,de))});const z=_.bind(null,ie,de);return ee.push(z),ve(ee).then(()=>{ee=[];for(const J of i.list())ee.push(wi(J,ie,de));return ee.push(z),ve(ee)}).then(()=>{ee=$p(ge,"beforeRouteUpdate",ie,de);for(const J of ge)J.updateGuards.forEach(he=>{ee.push(wi(he,ie,de))});return ee.push(z),ve(ee)}).then(()=>{ee=[];for(const J of q)if(J.beforeEnter)if(ra(J.beforeEnter))for(const he of J.beforeEnter)ee.push(wi(he,ie,de));else ee.push(wi(J.beforeEnter,ie,de));return ee.push(z),ve(ee)}).then(()=>(ie.matched.forEach(J=>J.enterCallbacks={}),ee=$p(q,"beforeRouteEnter",ie,de,b),ee.push(z),ve(ee))).then(()=>{ee=[];for(const J of a.list())ee.push(wi(J,ie,de));return ee.push(z),ve(ee)}).catch(J=>Ma(J,8)?J:Promise.reject(J))}function w(ie,de,ee){o.list().forEach(Y=>b(()=>Y(ie,de,ee)))}function A(ie,de,ee,Y,ge){const q=S(ie,de);if(q)return q;const z=de===gi,J=Sl?history.state:{};ee&&(Y||z?s.replace(ie.fullPath,tr({scroll:z&&J&&J.scroll},ge)):s.push(ie.fullPath,ge)),l.value=ie,j(ie,de,ee,z),Q()}let k;function L(){k||(k=s.listen((ie,de,ee)=>{if(!se.listening)return;const Y=y(ie),ge=D(Y);if(ge){C(tr(ge,{replace:!0,force:!0}),Y).catch(_u);return}c=Y;const q=l.value;Sl&&RM(T_(q.fullPath,ee.delta),Yh()),x(Y,q).catch(z=>Ma(z,12)?z:Ma(z,2)?(C(tr(E(z.to),{force:!0}),Y).then(J=>{Ma(J,20)&&!ee.delta&&ee.type===nd.pop&&s.go(-1,!1)}).catch(_u),Promise.reject()):(ee.delta&&s.go(-ee.delta,!1),H(z,Y,q))).then(z=>{z=z||A(Y,q,!1),z&&(ee.delta&&!Ma(z,8)?s.go(-ee.delta,!1):ee.type===nd.pop&&Ma(z,20)&&s.go(-1,!1)),w(Y,q,z)}).catch(_u)}))}let G=Lc(),P=Lc(),M;function H(ie,de,ee){Q(ie);const Y=P.list();return Y.length?Y.forEach(ge=>ge(ie,de,ee)):console.error(ie),Promise.reject(ie)}function B(){return M&&l.value!==gi?Promise.resolve():new Promise((ie,de)=>{G.add([ie,de])})}function Q(ie){return M||(M=!ie,L(),G.list().forEach(([de,ee])=>ie?ee(ie):de()),G.reset()),ie}function j(ie,de,ee,Y){const{scrollBehavior:ge}=t;if(!Sl||!ge)return Promise.resolve();const q=!ee&&FM(T_(ie.fullPath,0))||(Y||!ee)&&history.state&&history.state.scroll||null;return Go().then(()=>ge(ie,de,q)).then(z=>z&&DM(z)).catch(z=>H(z,ie,de))}const O=ie=>s.go(ie);let W;const K=new Set,se={currentRoute:l,listening:!0,addRoute:h,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:g,getRoutes:p,resolve:y,options:t,push:I,replace:R,go:O,back:()=>O(-1),forward:()=>O(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:P.add,isReady:B,install(ie){const de=this;ie.component("RouterLink",r9),ie.component("RouterView",i9),ie.config.globalProperties.$router=de,Object.defineProperty(ie.config.globalProperties,"$route",{enumerable:!0,get:()=>me(l)}),Sl&&!W&&l.value===gi&&(W=!0,I(s.location).catch(ge=>{}));const ee={};for(const ge in gi)Object.defineProperty(ee,ge,{get:()=>l.value[ge],enumerable:!0});ie.provide(Qh,de),ie.provide(q1,Sg(ee)),ie.provide(Xv,l);const Y=ie.unmount;K.add(ie),ie.unmount=function(){K.delete(ie),K.size<1&&(c=gi,k&&k(),k=null,l.value=gi,W=!1,M=!1),Y()}}};function ve(ie){return ie.reduce((de,ee)=>de.then(()=>b(ee)),Promise.resolve())}return se}function l9(t,e){const r=[],n=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(t.matched.find(c=>ic(c,o))?n.push(o):r.push(o));const l=t.matched[a];l&&(e.matched.find(c=>ic(c,l))||s.push(l))}return[r,n,s]}function Xo(){return _s(Qh)}function c9(t){return _s(q1)}const li=QT("auth",()=>{const t=pe(null),e=pe(""),r=pe(!0),n=Xo(),s=()=>{RA(Ws,async c=>{if(r.value=!0,c)try{const u=await Vr(vt(ht,"users",c.uid));u.exists()?(t.value={uid:c.uid,email:c.email,name:c.displayName,...u.data()},console.log(" User authenticated:",t.value)):(console.log(" User not found in Firestore"),t.value=null)}catch(u){console.error(" Error fetching user data:",u),t.value=null}else t.value=null,console.log(" No user authenticated");r.value=!1})},i=async()=>{e.value="";try{const c=new da,d=(await HA(Ws,c)).user,f=await Vr(vt(ht,"users",d.uid));if(!f.exists()){e.value=" User not found in system.";return}t.value={uid:d.uid,email:d.email,name:d.displayName,...f.data()},n.push("/")}catch(c){console.error(" Login error:",c),e.value=c.message||"Authentication failed."}},a=async()=>{try{await m8(Ws),t.value=null,n.push("/login")}catch(c){console.error(" Logout error:",c)}},o=c=>{t.value=c},l=Ae(()=>t.value);return s(),{currentUser:t,user:l,errorMsg:e,isLoading:r,loginWithGoogle:i,logout:a,setUser:o}}),u9=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:li},Symbol.toStringTag,{value:"Module"})),Jh=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],U_=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],Mc=["admin","administrator","administrator_504_CM","sped_chair"],Ze={VIEW_USERS:"view_users",EDIT_USER:"edit_user",DELETE_USER:"delete_user",MANAGE_SUBJECTS:"manage_subjects",MANAGE_ROLES:"manage_roles",VIEW_STUDENTS:"view_students",EDIT_STUDENT_CM:"edit_student_CM",EDIT_STUDENT_ALL:"edit_student_All",TESTING:"testing",TESTING_ALL:"testing_all",TESTING_PARTIAL:"testing_partial"},Cl={admin:[Ze.VIEW_USERS,Ze.EDIT_USER,Ze.DELETE_USER,Ze.MANAGE_SUBJECTS,Ze.MANAGE_ROLES,Ze.VIEW_STUDENTS,Ze.EDIT_STUDENT_ALL,Ze.TESTING_ALL],administrator:[Ze.VIEW_USERS,Ze.EDIT_USER,Ze.DELETE_USER,Ze.MANAGE_SUBJECTS,Ze.MANAGE_ROLES,Ze.VIEW_STUDENTS,Ze.EDIT_STUDENT_ALL,Ze.TESTING_ALL],administrator_504_CM:[Ze.VIEW_USERS,Ze.EDIT_USER,Ze.DELETE_USER,Ze.MANAGE_SUBJECTS,Ze.MANAGE_ROLES,Ze.VIEW_STUDENTS,Ze.EDIT_STUDENT_ALL],sped_chair:[Ze.VIEW_USERS,Ze.VIEW_STUDENTS,Ze.EDIT_STUDENT_ALL],case_manager:[Ze.VIEW_USERS,Ze.VIEW_STUDENTS,Ze.EDIT_STUDENT_CM,Ze.TESTING_PARTIAL],teacher:[Ze.VIEW_USERS,Ze.VIEW_STUDENTS,Ze.TESTING_PARTIAL],service_provider:[Ze.VIEW_USERS,Ze.VIEW_STUDENTS,Ze.TESTING_PARTIAL],paraeducator:[Ze.VIEW_USERS,Ze.VIEW_STUDENTS]};function V_(t){return Jh.includes(t)}const X1=QT("permission",()=>{const t=li(),e=pe([]),r=pe({}),n=pe({}),s=pe(!1),i=async()=>{try{const d=vt(ht,"config/permissions_matrix"),f=await Vr(d);f.exists()?(n.value=f.data(),console.log("Loaded permissions matrix from database:",n.value)):(n.value=Cl,console.log("Using default permissions matrix:",n.value)),s.value=!0,e.value.length>0&&(r.value=l(e.value))}catch(d){console.error("Error loading permissions matrix:",d),n.value=Cl,s.value=!0}};let a=null;const o=()=>{a&&a();const d=vt(ht,"config/permissions_matrix");a=yu(d,f=>{console.log("Permissions matrix updated:",f.exists(),f.data()),f.exists()?n.value=f.data():n.value=Cl,s.value=!0,e.value.length>0&&(r.value=l(e.value),console.log("User permissions recalculated:",r.value))},f=>{console.error("Error watching permissions matrix:",f),n.value=Cl,s.value=!0})};function l(d){const f={};return console.log("Deriving permissions for roles:",d),console.log("Current permissions matrix:",n.value),console.log("Matrix loaded:",s.value),d.forEach(h=>{const v=n.value[h]||[];console.log(`Role ${h} has permissions:`,v),v.forEach(p=>f[p]=!0)}),console.log("Final derived permissions:",f),f}let c=null;return er(()=>{var d;return(d=t.currentUser)==null?void 0:d.uid},()=>{var d;if(c&&c(),(d=t.currentUser)!=null&&d.uid){const f=vt(ht,"users",t.currentUser.uid);c=yu(f,h=>{const v=h.data()||{};e.value=v.role?[v.role]:[],console.log("User roles updated:",e.value),s.value&&(r.value=l(e.value))})}else e.value=[],r.value={}},{immediate:!0}),o(),i(),{userRoles:e,userPermissions:r,permissionsMatrix:n,matrixLoaded:s,hasRole:d=>e.value.includes(d),can:d=>r.value[d]===!0,loadPermissionsMatrix:i}});function d9(){const t=X1(),e=Ae(()=>t.hasRole("admin")),r=Ae(()=>t.can("manage_users")),n=s=>t.can(s);return{isAdmin:e,canManageUsers:r,hasRole:t.hasRole,can:t.can,hasPermission:n}}const f9=()=>!1,h9=()=>!0,Bc=pe(!1);function Y1(){const t=Ae(()=>f9()),e=Ae(()=>h9());return{isDebugMenuVisible:Bc,isDevelopment:t,canShowDebugMenu:e,toggleDebugMenu:()=>{e.value&&(Bc.value=!Bc.value)},showDebugMenu:()=>{e.value&&(Bc.value=!0)},hideDebugMenu:()=>{Bc.value=!1}}}const bt=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},p9={name:"UserRoleSwitcher",setup(){const t=li();d9();const{isDebugMenuVisible:e,canShowDebugMenu:r,hideDebugMenu:n}=Y1(),s=pe(!1),i=pe(""),a=pe({}),o=pe(!1),l=Ae(()=>t.user),c=[{value:"admin",label:"Admin"},{value:"administrator",label:"Administrator"},{value:"administrator_504_CM",label:"Administrator 504/CM"},{value:"sped_chair",label:"SPED Chair"},{value:"case_manager",label:"Case Manager"},{value:"paraeducator",label:"Paraeducator"},{value:"teacher",label:"Teacher"},{value:"service_provider",label:"Service Provider"}],u=[{uid:"test-admin",name:"Test Admin",email:"admin@test.com",role:"admin"},{uid:"test-administrator",name:"Test Administrator",email:"administrator@test.com",role:"administrator"},{uid:"test-administrator-504-cm",name:"Test Admin 504/CM",email:"admin504@test.com",role:"administrator_504_CM"},{uid:"test-sped-chair",name:"Test SPED Chair",email:"spedchair@test.com",role:"sped_chair"},{uid:"test-case-manager",name:"Test Case Manager",email:"cm@test.com",role:"case_manager"},{uid:"test-paraeducator",name:"Test Paraeducator",email:"para@test.com",role:"paraeducator"},{uid:"test-teacher",name:"Test Teacher",email:"teacher@test.com",role:"teacher"},{uid:"test-service-provider",name:"Test Service Provider",email:"service@test.com",role:"service_provider"}],d=async()=>{o.value=!0;try{const E=vt(ht,"config","permissions_matrix"),S=await Vr(E);S.exists()?a.value=S.data():(console.warn("Permissions matrix not found in database"),a.value={})}catch(E){console.error("Error loading permissions matrix:",E),a.value={}}finally{o.value=!1}},f=Ae(()=>{var R;const E=[{action:Ze.VIEW_USERS,label:"View Users"},{action:Ze.EDIT_USER,label:"Edit User"},{action:Ze.DELETE_USER,label:"Delete User"},{action:Ze.MANAGE_SUBJECTS,label:"Manage Subjects"},{action:Ze.MANAGE_ROLES,label:"Manage Roles"},{action:Ze.VIEW_STUDENTS,label:"View Students"},{action:Ze.EDIT_STUDENT_CM,label:"Edit Students (Own Caseload)"},{action:Ze.EDIT_STUDENT_ALL,label:"Edit All Students"},{action:Ze.TESTING,label:"Testing"}],S=(R=l.value)==null?void 0:R.role,I=a.value[S]||[];return E.map(D=>({...D,granted:I.includes(D.action)}))}),h=()=>{s.value=!s.value},v=()=>{if(!i.value)return;const E={uid:`test-${i.value}-${Date.now()}`,email:`${i.value}@test.com`,name:`Test ${i.value.charAt(0).toUpperCase()+i.value.slice(1)}`,role:i.value,lastSyncTrigger:new Date().toISOString()};t.setUser(E),localStorage.setItem("debug-user",JSON.stringify(E)),i.value=""},p=E=>{t.setUser(E),localStorage.setItem("debug-user",JSON.stringify(E))},g=()=>{localStorage.removeItem("debug-user"),window.location.reload()},y=()=>{window.location.reload()};return Jt(async()=>{await d();const E=localStorage.getItem("debug-user");if(E)try{const I=JSON.parse(E);t.setUser(I)}catch(I){console.error("Error parsing debug user:",I),localStorage.removeItem("debug-user")}const S=I=>{I.ctrlKey&&I.shiftKey&&I.key==="D"&&(I.preventDefault(),r.value&&(e.value?h():(e.value=!0,s.value=!0)))};return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}}),{isDebugMenuVisible:e,canShowDebugMenu:r,hideDebugMenu:n,isExpanded:s,selectedRole:i,currentUser:l,availableRoles:c,testUsers:u,currentPermissions:f,loadingPermissions:o,toggleExpanded:h,switchRole:v,switchToUser:p,resetToRealUser:g,refreshPage:y}}},m9=["title"],v9={key:0,class:"debug-label"},g9={key:0,class:"switcher-content"},x9={class:"current-user-info"},y9={class:"role-selector"},E9=["value"],_9={class:"test-users"},b9={class:"test-user-buttons"},S9=["onClick"],T9={class:"permission-info"},A9={key:0,class:"loading-permissions"},w9={key:1,class:"permission-list"},C9={class:"permission-icon"},I9={class:"actions"};function k9(t,e,r,n,s,i){var a,o,l,c,u;return n.canShowDebugMenu&&n.isDebugMenuVisible?(N(),U("div",{key:0,class:ot(["user-role-switcher",{collapsed:!n.isExpanded}])},[m("div",{class:"switcher-header",onClick:e[1]||(e[1]=(...d)=>n.toggleExpanded&&n.toggleExpanded(...d)),title:n.isExpanded?"Collapse Debug Panel":"Expand Debug Panel"},[e[6]||(e[6]=m("span",{class:"debug-icon"},"",-1)),n.isExpanded?(N(),U("span",v9,"Debug")):Fe("",!0),m("button",{onClick:e[0]||(e[0]=bs((...d)=>n.hideDebugMenu&&n.hideDebugMenu(...d),["stop"])),class:"close-debug-btn",title:"Close Debug Menu"},"")],8,m9),n.isExpanded?(N(),U("div",g9,[m("div",x9,[e[7]||(e[7]=m("strong",null,"Current User:",-1)),Me(" "+le(((a=n.currentUser)==null?void 0:a.name)||((o=n.currentUser)==null?void 0:o.email)||"Unknown")+" ",1),e[8]||(e[8]=m("br",null,null,-1)),e[9]||(e[9]=m("strong",null,"Role:",-1)),e[10]||(e[10]=Me()),m("span",{class:ot("role-"+((l=n.currentUser)==null?void 0:l.role))},le(((c=n.currentUser)==null?void 0:c.role)||"None"),3),e[11]||(e[11]=m("br",null,null,-1)),e[12]||(e[12]=m("strong",null,"UID:",-1)),Me(" "+le(((u=n.currentUser)==null?void 0:u.uid)||"None"),1)]),m("div",y9,[e[14]||(e[14]=m("label",{for:"role-select"},"Switch to Role:",-1)),Ve(m("select",{id:"role-select","onUpdate:modelValue":e[2]||(e[2]=d=>n.selectedRole=d),onChange:e[3]||(e[3]=(...d)=>n.switchRole&&n.switchRole(...d))},[e[13]||(e[13]=m("option",{value:""},"-- Select Role --",-1)),(N(!0),U(Oe,null,Ge(n.availableRoles,d=>(N(),U("option",{key:d.value,value:d.value},le(d.label),9,E9))),128))],544),[[hr,n.selectedRole]])]),m("div",_9,[e[15]||(e[15]=m("h5",null,"Quick Test Users:",-1)),m("div",b9,[(N(!0),U(Oe,null,Ge(n.testUsers,d=>{var f;return N(),U("button",{key:d.uid,onClick:h=>n.switchToUser(d),class:ot(["test-user-btn",{active:((f=n.currentUser)==null?void 0:f.uid)===d.uid}])},[Me(le(d.name)+" ",1),m("small",null,"("+le(d.role)+")",1)],10,S9)}),128))])]),m("div",T9,[e[16]||(e[16]=m("h5",null,"Current Permissions:",-1)),n.loadingPermissions?(N(),U("div",A9," Loading permissions... ")):(N(),U("div",w9,[(N(!0),U(Oe,null,Ge(n.currentPermissions,d=>(N(),U("div",{key:d.action,class:ot(["permission-item",{granted:d.granted}])},[m("span",C9,le(d.granted?"":""),1),Me(" "+le(d.label),1)],2))),128))]))]),e[17]||(e[17]=Xn('<div class="testing-scenarios" data-v-706a7ac7><h5 data-v-706a7ac7> Testing Scenarios:</h5><div class="scenario-list" data-v-706a7ac7><div class="scenario-item" data-v-706a7ac7><strong data-v-706a7ac7>Students Page:</strong><ul data-v-706a7ac7><li data-v-706a7ac7> Can view students</li><li data-v-706a7ac7> Can edit own caseload (CM)</li><li data-v-706a7ac7> Can edit all students (Admin)</li><li data-v-706a7ac7> Paraeducator filter works</li></ul></div><div class="scenario-item" data-v-706a7ac7><strong data-v-706a7ac7>Admin Panel:</strong><ul data-v-706a7ac7><li data-v-706a7ac7> Users management</li><li data-v-706a7ac7> Permissions matrix</li><li data-v-706a7ac7> Aide assignments</li><li data-v-706a7ac7> App settings</li></ul></div><div class="scenario-item" data-v-706a7ac7><strong data-v-706a7ac7>Navigation:</strong><ul data-v-706a7ac7><li data-v-706a7ac7> Admin button visibility</li><li data-v-706a7ac7> My Schedule button (Para)</li><li data-v-706a7ac7> Role-based menu items</li></ul></div></div></div>',1)),m("div",I9,[m("button",{onClick:e[4]||(e[4]=(...d)=>n.resetToRealUser&&n.resetToRealUser(...d)),class:"reset-btn"},"  Reset to Real User "),m("button",{onClick:e[5]||(e[5]=(...d)=>n.refreshPage&&n.refreshPage(...d)),class:"refresh-btn"},"  Refresh Page ")])])):Fe("",!0)],2)):Fe("",!0)}const D9=bt(p9,[["render",k9],["__scopeId","data-v-706a7ac7"]]),R9={id:"app"},F9={id:"main-content"},P9={__name:"App",setup(t){return(e,r)=>{const n=Dr("router-view");return N(),U("div",R9,[m("div",F9,[nt(n)]),nt(D9)])}}},O9="modulepreload",N9=function(t){return"/"+t},$_={},Q1=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=N9(l),l in $_)return;$_[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":O9,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},H_=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],j_=["K","1","2","3","4","5","6","7","8","9","10","11","12","TK","Pre-K","Ungraded"],G_=["IEP","504"],W_=["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],L9={pdf:["application/pdf"],csv:["text/csv","application/csv"],excel:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]};function Ar(t,e={}){if(typeof t!="string")return"";let r=t;return r=r.replace(/\0/g,""),e.trim!==!1&&(r=r.trim()),e.stripHtml&&(r=r.replace(/<[^>]*>/g,"")),e.escapeHtml&&(r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")),e.removeDangerous&&(r=r.replace(/[<>'"&]/g,"")),e.maxLength&&r.length>e.maxLength&&(r=r.substring(0,e.maxLength)),r}function M9(t){return typeof t!="string"?"":t.toLowerCase().trim()}function z_(t,e={}){const r=parseFloat(t);return isNaN(r)?null:e.min!==void 0&&r<e.min?e.min:e.max!==void 0&&r>e.max?e.max:e.decimals!==void 0?Math.round(r*Math.pow(10,e.decimals))/Math.pow(10,e.decimals):r}function Jf(t){if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e.toISOString().split("T")[0]}function Yv(t,e){const r=t==null||typeof t=="string"&&t.trim()===""||Array.isArray(t)&&t.length===0;return{isValid:!r,error:r?`${e} is required`:null}}function B9(t){if(!t)return{isValid:!1,error:"Email is required"};const r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t);return{isValid:r,error:r?null:"Invalid email format"}}function Zh(t,e={}){if(typeof t!="string")return{isValid:!1,error:"Value must be a string"};const{min:r=0,max:n=1/0,fieldName:s="Field"}=e,i=t.length;return i<r?{isValid:!1,error:`${s} must be at least ${r} characters`}:i>n?{isValid:!1,error:`${s} must be no more than ${n} characters`}:{isValid:!0,error:null}}function U9(t){const e=H_.includes(t);return{isValid:e,error:e?null:`Invalid role. Valid roles: ${H_.join(", ")}`}}function V9(t){const e=j_.includes(t);return{isValid:e,error:e?null:`Invalid grade. Valid grades: ${j_.join(", ")}`}}function $9(t){const e=G_.includes(t);return{isValid:e,error:e?null:`Invalid plan type. Valid types: ${G_.join(", ")}`}}function H9(t){if(!t)return{isValid:!0,error:null};const e=W_.includes(t);return{isValid:e,error:e?null:`Invalid provider type. Valid types: ${W_.join(", ")}`}}function j9(t){if(!t)return{isValid:!1,error:"SSID is required"};const r=/^\d{10}$/.test(t);return{isValid:r,error:r?null:"SSID must be exactly 10 digits"}}function Ld(t,e={}){if(!t)return{isValid:!0,error:null};const{allowedTypes:r=["pdf"],maxSize:n=10*1024*1024,fieldName:s="File"}=e;if(!r.flatMap(a=>L9[a]||[]).includes(t.type))return{isValid:!1,error:`${s} must be of type: ${r.join(", ")}`};if(t.size>n){const a=Math.round(n/1048576);return{isValid:!1,error:`${s} must be smaller than ${a}MB`}}return{isValid:!0,error:null}}function HC(t,e={}){const r=[],{isNew:n=!1}=e;if(n){const l=j9(t.ssid);l.isValid||r.push(l.error)}const s=Yv(t.firstName,"First Name");s.isValid||r.push(s.error);const i=Yv(t.lastName,"Last Name");i.isValid||r.push(i.error);const a=V9(t.grade);if(a.isValid||r.push(a.error),t.plan){const l=$9(t.plan);l.isValid||r.push(l.error)}return t.reviewDate&&(Jf(t.reviewDate)||r.push("Invalid review date format")),t.reevalDate&&(Jf(t.reevalDate)||r.push("Invalid reevaluation date format")),t.meetingDate&&(Jf(t.meetingDate)||r.push("Invalid meeting date format")),[{field:"firstName",max:50},{field:"lastName",max:50},{field:"instruction",max:2e3},{field:"assessment",max:2e3}].forEach(({field:l,max:c})=>{if(t[l]){const u=Zh(t[l],{max:c,fieldName:l});u.isValid||r.push(u.error)}}),{isValid:r.length===0,errors:r}}function G9(t){const e=[],r=Yv(t.name,"Name");r.isValid||e.push(r.error);const n=B9(t.email);n.isValid||e.push(n.error);const s=U9(t.role);if(s.isValid||e.push(s.error),t.provider){const a=H9(t.provider);a.isValid||e.push(a.error)}const i=Zh(t.name,{min:2,max:100,fieldName:"Name"});return i.isValid||e.push(i.error),{isValid:e.length===0,errors:e}}function jC(t){const e={};return["firstName","lastName","grade","plan","instruction","assessment"].forEach(i=>{t[i]&&(e[i]=Ar(t[i],{trim:!0,maxLength:i.includes("instruction")||i.includes("assessment")?2e3:100,removeDangerous:!0}))}),t.ssid&&(e.ssid=Ar(t.ssid,{trim:!0,maxLength:10})),["reviewDate","reevalDate","meetingDate"].forEach(i=>{t[i]&&(e[i]=Jf(t[i]))}),["flag1","flag2"].forEach(i=>{t[i]!==void 0&&(e[i]=!!t[i])}),Array.isArray(t.services)&&(e.services=t.services.filter(i=>typeof i=="string").map(i=>Ar(i,{trim:!0,maxLength:200})).filter(i=>i.length>0)),t.schedule&&typeof t.schedule=="object"&&(e.schedule={},Object.entries(t.schedule).forEach(([i,a])=>{a&&typeof a=="string"&&(e.schedule[i]=Ar(a,{trim:!0,maxLength:50}))})),e}function W9(t){const e={};return t.name&&(e.name=Ar(t.name,{trim:!0,maxLength:100,removeDangerous:!0})),t.email&&(e.email=M9(t.email)),t.role&&(e.role=Ar(t.role,{trim:!0,maxLength:50})),t.provider&&(e.provider=Ar(t.provider,{trim:!0,maxLength:10})),t.aeriesId&&(e.aeriesId=Ar(t.aeriesId,{trim:!0,maxLength:20})),e}function sn(t){if(typeof t!="string")return{isSafe:!0,threats:[]};const e=[];return/<script|javascript:|vbscript:|onload=|onerror=/i.test(t)&&e.push("Script injection attempt detected"),/(\bunion\b|\bselect\b|\binsert\b|\bupdate\b|\bdelete\b|\bdrop\b).*(\bfrom\b|\binto\b|\bwhere\b)/i.test(t)&&e.push("SQL injection pattern detected"),/\.\.\/|\.\.\\|%2e%2e%2f|%2e%2e%5c/i.test(t)&&e.push("Path traversal attempt detected"),t.includes("\0")&&e.push("Null byte injection detected"),{isSafe:e.length===0,threats:e}}function ys(t,e=10,r=6e4){if(typeof window>"u")return{allowed:!0,remaining:e};const n=Date.now(),s=`rateLimit_${t}`;let i=JSON.parse(localStorage.getItem(s)||"[]");return i=i.filter(a=>n-a<r),i.length>=e?{allowed:!1,remaining:0}:(i.push(n),localStorage.setItem(s,JSON.stringify(i)),{allowed:!0,remaining:e-i.length})}const z9=async(t,e,r=100,n=1e3)=>{const s=[];for(let a=0;a<t.length;a+=r)s.push(t.slice(a,a+r));const i=[];for(let a=0;a<s.length;a++)try{const o=await e(s[a]);i.push(o),a<s.length-1&&await new Promise(l=>setTimeout(l,n))}catch(o){throw console.error(`Error in batch ${a+1}:`,o),o}return i};function U0(t){if(!t||typeof t!="object")return t;if(t.toJSON&&typeof t.toJSON=="function")return t.toJSON();if(Array.isArray(t))return t.map(U0);const e={};for(const[r,n]of Object.entries(t)){if(r.toLowerCase().includes("schedule")&&typeof n=="object"&&n!==null)for(const[s,i]of Object.entries(n))i&&typeof i=="object"&&i.teacherId!==void 0&&(n[s].teacherId=String(i.teacherId));e[r]=U0(n)}return e}function Ca(){const t=pe([]);let e=null;async function r(){if(!e)try{const{useGoogleSheetsRealtime:c}=await Q1(async()=>{const{useGoogleSheetsRealtime:u}=await Promise.resolve().then(()=>Lae);return{useGoogleSheetsRealtime:u}},void 0);e=c()}catch(c){console.error("Failed to load Google Sheets sync:",c)}return e}async function n(){var d,f,h;const c=await dr(Gt(ht,"students"));t.value=c.docs.map(v=>{const p=v.data(),g=U0(p);return{id:v.id,...g}});const u=t.value.find(v=>v.aeries);u&&(console.log(" useStudents DEBUG - Student with aeries:",u),console.log(" useStudents DEBUG - aeries.schedule:",(d=u.aeries)==null?void 0:d.schedule),console.log(" useStudents DEBUG - aeries.schedule type:",typeof((f=u.aeries)==null?void 0:f.schedule)),(h=u.aeries)!=null&&h.schedule&&console.log(" useStudents DEBUG - schedule keys:",Object.keys(u.aeries.schedule)))}function s(c){t.value=c.map(u=>{const d=U0(u);return{id:u.id,...d}})}async function i(){return(await dr(Gt(ht,"students"))).docs.map(u=>({id:u.id,...u.data()}))}async function a(c,u){await lC(vt(ht,"students",c),u);try{const d=await r();if(d&&d.linkedSheetId.value){const f=t.value.findIndex(h=>h.id===c);f!==-1&&(t.value[f]={...t.value[f],...u}),console.log("Syncing student update to Google Sheets..."),await d.updateSheetData(t.value)}}catch(d){console.error("Failed to sync to Google Sheets:",d)}}async function o(c){await ac(vt(ht,"students",c));try{const u=await r();u&&u.linkedSheetId.value&&(t.value=t.value.filter(d=>d.id!==c),console.log("Syncing student deletion to Google Sheets..."),await u.updateSheetData(t.value))}catch(u){console.error("Failed to sync to Google Sheets:",u)}}return{students:t,fetchStudents:n,setStudents:s,fetchAllStudents:i,updateStudent:a,deleteStudent:o,deleteAllStudents:async()=>{try{const u=(await dr(Gt(ht,"students"))).docs;return await z9(u,async d=>{const f=uC(ht);d.forEach(h=>{f.delete(h.ref)}),await f.commit()},50,2e3),{success:!0}}catch(c){throw console.error("Error deleting all students:",c),c}}}}function Ia(){const t=pe({}),e=pe([]);async function r(){const a=await dr(Gt(ht,"users")),o={},l=[];a.forEach(c=>{const u=c.data();o[c.id]={id:c.id,...u},l.push({id:c.id,...u}),u.aeriesId&&console.log(" Loaded user with Aeries ID:",{name:u.name,email:u.email,aeriesId:u.aeriesId,id:c.id})}),t.value=o,e.value=l,console.log(" Total users loaded:",l.length),console.log(" Users with Aeries IDs:",l.filter(c=>c.aeriesId).length)}const n=Ae(()=>({teachers:e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)),caseManagers:e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role)),speech:e.value.filter(a=>a.provider==="SLP"),ot:e.value.filter(a=>a.provider==="OT"),mh:e.value.filter(a=>a.provider==="MH"),pt:e.value.filter(a=>a.provider==="PT"),sc:e.value.filter(a=>a.provider==="SC"),tr:e.value.filter(a=>a.provider==="TR"),aud:e.value.filter(a=>a.provider==="AUD"),vi:e.value.filter(a=>a.provider==="VI"),at:e.value.filter(a=>a.provider==="AT"),dhh:e.value.filter(a=>a.provider==="DHH"),om:e.value.filter(a=>a.provider==="O&M"),bis:e.value.filter(a=>a.provider==="BIS"),hn:e.value.filter(a=>a.provider==="HN"),sw:e.value.filter(a=>a.provider==="SW")})),s=Ae(()=>e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role))),i=Ae(()=>e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)));return{users:t,userList:e,fetchUsers:r,caseManagers:s,teacherList:i,userRoles:n}}function J1(){const t=pe({}),e=pe(!1);async function r(){e.value=!0;try{const d=await dr(Gt(ht,"aideSchedules")),f={};d.forEach(h=>{f[h.id]=h.data()}),t.value=f}catch(d){console.error("Error loading aide assignments:",d),t.value={}}finally{e.value=!1}}async function n(d){if(!d){console.warn("loadAideAssignment called without aideId");return}e.value=!0;try{const f=await Vr(vt(ht,"aideSchedules",d));f.exists()?t.value[d]=f.data():t.value[d]={classAssignment:{},directAssignment:[]}}catch(f){console.error("Error loading aide assignment:",f),t.value[d]={classAssignment:{},directAssignment:[]}}finally{e.value=!1}}async function s(d,f){try{const h=JSON.parse(JSON.stringify(f));await xr(vt(ht,"aideSchedules",d),h,{merge:!0}),t.value[d]=h}catch(h){throw console.error("Error saving aide assignment:",h),h}}async function i(){try{const d=Object.entries(t.value);for(const[f,h]of d){const v=JSON.parse(JSON.stringify(h));await xr(vt(ht,"aideSchedules",f),v,{merge:!0})}}catch(d){throw console.error("Error saving all aide assignments:",d),d}}function a(d,f){const h=[];return Object.entries(t.value).forEach(([v,p])=>{p.classAssignment&&p.classAssignment[f]&&(Array.isArray(p.classAssignment[f])?p.classAssignment[f]:[p.classAssignment[f]]).includes(d)&&h.push(v)}),h}function o(d){var h;const f=(h=t.value[d])==null?void 0:h.directAssignment;return Array.isArray(f)?f.length>0?f[0]:null:f||null}function l(d){return Object.keys(t.value).find(h=>{var p;const v=(p=t.value[h])==null?void 0:p.directAssignment;return Array.isArray(v)?v.includes(d):v===d})||null}function c(d,f,h){const v=[],p=t.value[d];return p&&((Array.isArray(p.directAssignment)?p.directAssignment:p.directAssignment?[p.directAssignment]:[]).forEach(y=>{if(y){const E=f.find(S=>S.id===y);E&&v.push({...E,assignmentType:"direct"})}}),Object.entries(p.classAssignment||{}).forEach(([y,E])=>{E&&(Array.isArray(E)?E:[E]).forEach(I=>{I&&f.forEach(R=>{if(R.schedule&&R.schedule[y]===I){const D=v.findIndex(C=>C.id===R.id);D===-1?v.push({...R,assignmentType:"class",period:y,teacherId:I}):(v[D].assignmentType="both",v[D].period=y,v[D].teacherId=I)}})})})),v}function u(d,f,h,v){if(!d||!f||!h||!v)return!1;const p=h.find(I=>I.id===f);if(!p)return!1;const g=t.value[d];if(!g)return!1;if((Array.isArray(g.directAssignment)?g.directAssignment:g.directAssignment?[g.directAssignment]:[]).includes(f))return!0;if(!p.schedule)return!1;const E=g.classAssignment||{};return Object.entries(p.schedule).some(([I,R])=>{const D=E[I];return D?(Array.isArray(D)?D:[D]).includes(R):!1})}return{aideAssignment:Ae(()=>t.value),loading:Ae(()=>e.value),loadAideAssignments:r,loadAideAssignment:n,saveAideAssignment:s,saveAllAideAssignments:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}function Z1(){const t=pe(!1),e=pe(""),r=pe("");let n,s,i,a;try{n=jl(),s=fa(n,"sendTeacherFeedbackForm"),i=fa(n,"syncFormResponses"),a=fa(n,"getStudentFeedback")}catch(Q){console.warn("Firebase Functions not available:",Q),s=()=>Promise.reject(new Error("Functions not available")),i=()=>Promise.reject(new Error("Functions not available")),a=()=>Promise.reject(new Error("Functions not available"))}const o=Gt(ht,"feedbackForms"),l=Gt(ht,"feedbackResponses"),c=Gt(ht,"feedbackSendLog"),u=pe([]),d=pe(!0),f=pe([]),h=pe(!0),v=pe([]),p=pe(!0);let g,y,E;const S=Ae(()=>{var j;return(((j=u.value)==null?void 0:j.filter(O=>O.active!==!1))||[]).sort((O,W)=>{var ve,ie;const K=(ve=O.createdAt)!=null&&ve.seconds?new Date(O.createdAt.seconds*1e3):new Date(O.createdAt);return((ie=W.createdAt)!=null&&ie.seconds?new Date(W.createdAt.seconds*1e3):new Date(W.createdAt))-K})}),I=Ae(()=>{var Q;return((Q=f.value)==null?void 0:Q.length)||0}),R=async Q=>{try{t.value=!0,e.value="";const j={title:Q.title,description:Q.description,formUrl:Q.formUrl,responseSpreadsheetId:Q.responseSpreadsheetId,active:!0,createdAt:new Date,createdBy:Q.createdBy},O=vt(o);return await xr(O,j),r.value="Feedback form created successfully!",{id:O.id,...j}}catch(j){throw console.error("Error creating feedback form:",j),e.value=j.message,j}finally{t.value=!1}},D=async(Q,j)=>{try{t.value=!0,e.value="";const O=vt(o,Q);await xr(O,{...j,updatedAt:new Date},{merge:!0}),r.value="Feedback form updated successfully!"}catch(O){throw console.error("Error updating feedback form:",O),e.value=O.message,O}finally{t.value=!1}},C=async Q=>{try{t.value=!0,e.value="";const j=vt(o,Q);await ac(j),r.value="Feedback form deleted successfully!"}catch(j){throw console.error("Error deleting feedback form:",j),e.value=j.message,j}finally{t.value=!1}},_=async Q=>{try{t.value=!0,e.value="";const j=await s(Q);if(j.data.success)return r.value=j.data.message,j.data;throw new Error(j.data.message||"Failed to send feedback form")}catch(j){throw console.error("Error sending feedback form:",j),e.value=j.message,j}finally{t.value=!1}},b=async(Q,j="Form Responses 1")=>{try{t.value=!0,e.value="";const O=await i({spreadsheetId:Q,sheetName:j});if(O.data.success)return r.value=O.data.message,O.data;throw new Error(O.data.message||"Failed to sync responses")}catch(O){throw console.error("Error syncing responses:",O),e.value=O.message,O}finally{t.value=!1}},x=async Q=>{try{t.value=!0,e.value="";const j=await a({studentId:Q});if(j.data.success)return j.data.responses;throw new Error(j.data.message||"Failed to get student feedback")}catch(j){throw console.error("Error getting student feedback:",j),e.value=j.message,j}finally{t.value=!1}},w=Q=>Ae(()=>{var j;return((j=f.value)==null?void 0:j.filter(O=>O.formId===Q))||[]}),A=Q=>Ae(()=>{var j;return((j=f.value)==null?void 0:j.filter(O=>O.spreadsheetId===Q))||[]}),k=Q=>Ae(()=>{var j;return((j=v.value)==null?void 0:j.filter(O=>O.studentId===Q))||[]}),L=()=>{e.value="",r.value=""},G=Q=>{const j=Q.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return j?j[1]:null},P=Q=>{const j=Q.match(/\/forms\/d\/([a-zA-Z0-9-_]+)/);return j?j[1]:null},M=()=>{try{g=yu(o,Q=>{u.value=Q.docs.map(j=>({id:j.id,...j.data()})),d.value=!1},Q=>{console.warn("Error listening to feedback forms:",Q),d.value=!1}),y=yu(l,Q=>{f.value=Q.docs.map(j=>({id:j.id,...j.data()})),h.value=!1},Q=>{console.warn("Error listening to feedback responses:",Q),h.value=!1}),E=yu(c,Q=>{v.value=Q.docs.map(j=>({id:j.id,...j.data()})),p.value=!1},Q=>{console.warn("Error listening to send log:",Q),p.value=!1})}catch(Q){console.warn("Error initializing Firestore listeners:",Q),d.value=!1,h.value=!1,p.value=!1}},H=()=>{g&&g(),y&&y(),E&&E()};return Jt(()=>{M()}),to(()=>{H()}),{isLoading:t,error:e,successMessage:r,formsLoading:d,responsesLoading:h,sendLogLoading:p,feedbackForms:u,feedbackResponses:f,sendLog:v,activeForms:S,totalResponses:I,createFeedbackForm:R,updateFeedbackForm:D,deleteFeedbackForm:C,sendFeedbackForm:_,syncResponses:b,getResponsesForStudent:x,getResponsesForForm:w,getResponsesForSpreadsheet:A,getSendLogForStudent:k,getTeacherEmails:async()=>{try{const Q=Gt(ht,"users"),j=zr(Q,gs("role","==","teacher"));return(await dr(j)).docs.map(W=>{const K=W.data();return{id:W.id,name:K.name,email:K.email}})}catch(Q){throw console.error("Error getting teacher emails:",Q),Q}},clearMessages:L,extractSpreadsheetId:G,extractFormId:P}}function K9(){const t=async()=>{console.log(" Security: Loading ALL students for admin user");const a=zr(Gt(ht,"students"),Ks("app.studentData.lastName","asc"));return(await dr(a)).docs.map(l=>({id:l.id,...l.data()}))},e=async a=>{console.log(" Security: Loading students for case manager:",a);try{console.log(" Security: DEBUG - Checking all case manager IDs in database...");const o=zr(Gt(ht,"students")),u=(await dr(o)).docs.map(v=>({id:v.id,...v.data()})).map(v=>{var p,g;return(g=(p=v.app)==null?void 0:p.studentData)==null?void 0:g.caseManagerId}).filter(Boolean);console.log(" Security: DEBUG - Found case manager IDs:",[...new Set(u)]),console.log(" Security: DEBUG - Looking for userId:",a);const d=zr(Gt(ht,"students"),gs("app.studentData.caseManagerId","==",a),Ks("app.studentData.lastName","asc")),h=(await dr(d)).docs.map(v=>({id:v.id,...v.data()}));return console.log(" Security: Case manager has access to",h.length,"students"),h.length>0&&console.log(" Security: DEBUG - First student structure:",h[0]),h}catch(o){throw console.error(" Security: Query failed:",o),console.error(" Security: Query details:",{collection:"students",where:"app.studentData.caseManagerId",operator:"==",value:a}),o}},r=async a=>{console.log(" Security: Loading students for teacher:",a);const o=zr(Gt(ht,"students"),Ks("app.studentData.lastName","asc")),c=(await dr(o)).docs.map(d=>({id:d.id,...d.data()})),u=c.filter(d=>{var h,v;const f=((v=(h=d.app)==null?void 0:h.schedule)==null?void 0:v.periods)||{};return Object.values(f).includes(a)});return console.log(" Security: Teacher has access to",u.length,"students out of",c.length,"total"),u},n=async a=>{console.log(" Security: Loading students for service provider:",a);const o=zr(Gt(ht,"students"),Ks("app.studentData.lastName","asc")),c=(await dr(o)).docs.map(d=>({id:d.id,...d.data()})),u=c.filter(d=>{var g,y,E;const f=((g=d.app)==null?void 0:g.providers)||{},h=((E=(y=d.app)==null?void 0:y.schedule)==null?void 0:E.periods)||{},v=Object.values(f).includes(a),p=Object.values(h).includes(a);return v||p});return console.log(" Security: Service provider has access to",u.length,"students out of",c.length,"total"),u},s=async a=>{console.log(" Security: Loading students for paraeducator:",a);try{const o=await Vr(vt(ht,"aideSchedules",a));if(!o.exists())return console.log(" Security: No aide schedule found for:",a),[];const l=o.data(),c=new Set;if(l.directAssignment&&(Array.isArray(l.directAssignment)?l.directAssignment:[l.directAssignment]).forEach(v=>c.add(v)),l.classAssignment){const h=zr(Gt(ht,"students"));(await dr(h)).docs.forEach(p=>{var S,I,R,D;const g={id:p.id,...p.data()},y=((I=(S=g.app)==null?void 0:S.studentData)==null?void 0:I.plan)||g.plan;if(y!=="IEP"&&y!=="504")return;const E=((D=(R=g.app)==null?void 0:R.schedule)==null?void 0:D.periods)||g.schedule||{};Object.entries(E).forEach(([C,_])=>{let b;if(typeof _=="string")b=_;else if(_&&typeof _=="object")b=_.teacherId;else return;const x=l.classAssignment[C];x&&(Array.isArray(x)?x:[x]).includes(b)&&c.add(g.id)})})}const u=Array.from(c);if(u.length===0)return console.log(" Security: No students found for paraeducator:",a),[];const d=[],f=10;for(let h=0;h<u.length;h+=f){const v=u.slice(h,h+f),p=zr(Gt(ht,"students"),gs(h5(),"in",v));(await dr(p)).docs.forEach(y=>{d.push({id:y.id,...y.data()})})}return console.log(" Security: Paraeducator has access to",d.length,"students"),d}catch(o){return console.error(" Security: Error loading paraeducator students:",o),[]}};return{getStudentsByRole:async a=>{if(!a||!a.role)return console.log(" Security: No user or role provided - returning empty array"),[];const{role:o,uid:l}=a;try{switch(o){case"admin":case"administrator":case"administrator_504_CM":case"sped_chair":return await t();case"case_manager":return await e(l);case"teacher":return await r(l);case"service_provider":return await n(l);case"paraeducator":return await s(l);default:return console.log(" Security: Unknown role:",o,"- returning empty array"),[]}}catch(c){return console.error(" Security: Error loading students for role:",o,c),[]}},getAdminStudents:t,getCaseManagerStudents:e,getTeacherStudents:r,getServiceProviderStudents:n,getParaeducatorStudents:s}}function q9(t,e){const r={isSecure:!0,violations:[],summary:"",studentCount:t.length,authorizedCount:0,unauthorizedCount:0};return!e||!e.role?(r.isSecure=!1,r.violations.push("No user or role provided"),r):(t.forEach((n,s)=>{var a,o,l,c;X9(n,e)?r.authorizedCount++:(r.unauthorizedCount++,r.isSecure=!1,r.violations.push({studentIndex:s,studentName:`${(o=(a=n.app)==null?void 0:a.studentData)==null?void 0:o.firstName} ${(c=(l=n.app)==null?void 0:l.studentData)==null?void 0:c.lastName}`,studentId:n.id,reason:Y9(n,e)}))}),r.summary=`User ${e.role} (${e.uid}) has access to ${r.authorizedCount}/${r.studentCount} students`,r.isSecure||(r.summary+=`. SECURITY VIOLATION: ${r.unauthorizedCount} unauthorized students accessible!`),r)}function X9(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"admin":case"administrator":case"administrator_504_CM":case"sped_chair":return!0;case"case_manager":return((i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===n;case"teacher":const d=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(d).includes(n);case"service_provider":const f=((l=t.app)==null?void 0:l.providers)||{},h=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},v=Object.values(f).includes(n),p=Object.values(h).includes(n);return v||p;case"paraeducator":return!0;default:return!1}}function Y9(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"case_manager":const d=(i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId;return`Case manager ${n} is not assigned to student (assigned to: ${d})`;case"teacher":const f=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{},h=Object.values(f);return`Teacher ${n} does not teach this student (teachers: ${h.join(", ")})`;case"service_provider":const v=((l=t.app)==null?void 0:l.providers)||{},p=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},g=Object.values(v).filter(E=>E),y=Object.values(p);return`Service provider ${n} is not assigned to student (providers: ${g.join(", ")}, teachers: ${y.join(", ")})`;case"paraeducator":return null;default:return`Unknown role: ${r}`}}function Q9(t){t.isSecure?console.log(" SECURITY TEST PASSED:",t.summary):(console.error(" SECURITY TEST FAILED:",t.summary),console.error("Violations:",t.violations))}function K_(t,e){const r=q9(t,e);return Q9(r),r}function J9(){const t=Xo(),e=li(),{students:r,setStudents:n}=Ca(),{users:s,userList:i,fetchUsers:a,caseManagers:o,teacherList:l,userRoles:c}=Ia(),{loadAideAssignments:u,shouldAideSeeStudent:d,aideAssignment:f}=J1(),{feedbackForms:h,formsLoading:v}=Z1(),{getStudentsByRole:p}=K9(),g=pe(!1),y=pe(null),E=Ae(()=>e.currentUser),S=Ae(()=>{var L;const k=(L=E.value)==null?void 0:L.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(k)}),I=Ae(()=>{var k;return["case_manager","administrator_504_CM","sped_chair"].includes((k=E.value)==null?void 0:k.role)}),R=Ae(()=>s.value||{}),D=Ae(()=>{var k;return((k=i.value)==null?void 0:k.filter(L=>L.role==="paraeducator"))||[]}),C=async()=>{var k,L;g.value=!0,y.value=null;try{await a();const G=E.value;if(G){console.log(" Security: Fetching students for user role:",G.role);const M=await p(G);n(M);const H=K_(M,G);H.isSecure||console.error(" SECURITY VIOLATION DETECTED:",H.violations)}else console.log(" Security: No user found - setting empty student array"),n([]);const P=(k=E.value)==null?void 0:k.role;["admin","administrator","administrator_504_CM","sped_chair"].includes(P)&&await u(),console.log(" Security: Loaded",r.value.length,"students for",(L=E.value)==null?void 0:L.role),console.log("StudentsView - loaded users:",Object.keys(s.value||{}).length,"users")}catch(G){console.error("Error fetching data:",G),y.value=G.message||"Failed to load data"}finally{g.value=!1}},_=k=>r.value.find(L=>L.id===k)||{},b=k=>{const L=s.value[k];return L&&(L.name||L.email)||k},x=k=>{if(!k)return"N/A";const L=s.value[k];return L&&(L.name||L.email)||k},w=k=>{var L,G;return((G=(L=k.app)==null?void 0:L.studentData)==null?void 0:G.caseManagerId)||k.caseManagerId||k.casemanager_id},A=k=>{var L,G,P,M,H;return k.schedule?k.schedule:(G=(L=k.app)==null?void 0:L.schedule)!=null&&G.periods?k.app.schedule.periods:(M=(P=k.aeries)==null?void 0:P.schedule)!=null&&M.periods?k.aeries.schedule.periods:(H=k.aeries)!=null&&H.schedule?k.aeries.schedule:null};return Jt(C),er(()=>{var k;return(k=E.value)==null?void 0:k.role},async(k,L)=>{if(k&&k!==L){console.log(" Security: User role changed from",L,"to",k,"- reloading students");const G=E.value;if(G){const P=await p(G);n(P);const M=K_(P,G);M.isSecure||console.error(" SECURITY VIOLATION DETECTED:",M.violations),console.log(" Security: Reloaded",P.length,"students for role",k)}}},{immediate:!1}),{isLoading:g,error:y,students:r,userMap:s,userList:i,userMapObj:R,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:f,feedbackForms:h,formsLoading:v,paraeducators:D,currentUser:E,isAdmin:S,showProviderView:I,fetchData:C,getStudentById:_,getUserName:b,getCaseManagerName:x,getCaseManagerId:w,getSchedule:A,shouldAideSeeStudent:d,router:t}}function it(t,e,r=""){const n=(l,c)=>c.split(".").reduce((u,d)=>u&&u[d]!==void 0?u[d]:null,l),s=n(t.overrides,e);if(t.overrides&&s!=null&&s!=="")return s;if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const c=n(t.app,`studentData.${e}`);if(c!=null&&c!=="")return c}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const c=n(t.app,`dates.${e}`);if(c!=null&&c!=="")return c}if(["instruction","assessment"].includes(e)){const c=n(t.app,`accommodations.${e}`);if(c!=null&&c!=="")return c}const l=n(t.app,e);if(l!=null&&l!=="")return l}const i=n(t.aeries,e);if(t.aeries&&i!=null&&i!=="")return i;const a=n(t.seis,e);if(t.seis&&a!=null&&a!=="")return a;const o=n(t,e);return o!=null&&o!==""?o:r}function Uc(t,e){const r=(o,l)=>l.split(".").reduce((c,u)=>c&&c[u]!==void 0?c[u]:null,o),n=r(t.overrides,e);if(t.overrides&&n!=null&&n!=="")return"Override";if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const l=r(t.app,`studentData.${e}`);if(l!=null&&l!=="")return"App"}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const l=r(t.app,`dates.${e}`);if(l!=null&&l!=="")return"App"}if(["instruction","assessment"].includes(e)){const l=r(t.app,`accommodations.${e}`);if(l!=null&&l!=="")return"App"}const o=r(t.app,e);if(o!=null&&o!=="")return"App"}const s=r(t.aeries,e);if(t.aeries&&s!=null&&s!=="")return"Aeries";const i=r(t.seis,e);if(t.seis&&i!=null&&i!=="")return"SEIS";const a=r(t,e);return a!=null&&a!==""?"Top-level":""}function Hp(t){return t?`<ul class="bullet-list">${t.split(/\n|\r|\d+\.\s+|\-\s+/).map(r=>r.trim()).filter(Boolean).map(r=>`<li>${r}</li>`).join("")}</ul>`:"<div></div>"}function Z9(t){const{students:e,currentUser:r,shouldAideSeeStudent:n,userMap:s,getCaseManagerId:i,getSchedule:a}=t,o=pe(!1),l=pe([]),c=Ns({sortBy:"firstName",cm:"all",teacher:"all",paraeducator:"all",plan:"all",search:"",providerView:"all",viewMode:"list"});let u=null;const d=()=>{u&&clearTimeout(u),u=setTimeout(()=>{p()},300)},f=()=>{o.value=!o.value},h=()=>{c.sortBy="firstName",c.cm="all",c.teacher="all",c.paraeducator="all",c.plan="all",c.search="",c.providerView="all",c.viewMode="list",p()},v=()=>({paraeducator:c.paraeducator}),p=(g=c)=>{var E;let y=e.value;if(g.providerView==="case_manager"?y=y.filter(S=>{var I;return i(S)===((I=r.value)==null?void 0:I.uid)}):g.providerView==="service_provider"&&(y=y.filter(S=>{var _;const I=a(S),R=I?Object.entries(I).some(([b,x])=>{var w,A;return typeof x=="string"?x===((w=r.value)==null?void 0:w.uid):x&&typeof x=="object"?x.teacherId===((A=r.value)==null?void 0:A.uid):!1}):!1,D=(S.services||[]).some(b=>{var x;return b.includes((x=r.value)==null?void 0:x.uid)}),C=i(S)!==((_=r.value)==null?void 0:_.uid);return(R||D)&&C})),((E=r.value)==null?void 0:E.role)==="paraeducator"&&(y=y.filter(S=>{try{return n(r.value.uid,S.id,e.value,s.value)}catch(I){return console.error("Error filtering student for aide:",I),!1}})),g.search){const S=g.search.toLowerCase();y=y.filter(I=>{const R=it(I,"firstName")||"",D=it(I,"lastName")||"";return`${R} ${D}`.toLowerCase().includes(S)})}g.cm&&g.cm!=="all"&&(y=y.filter(S=>i(S)===g.cm)),g.teacher&&g.teacher!=="all"&&(y=y.filter(S=>{const I=a(S);return I?Object.entries(I).some(([R,D])=>typeof D=="string"?D===g.teacher:D&&typeof D=="object"?D.teacherId===g.teacher:!1):!1})),g.paraeducator&&g.paraeducator!=="all"&&(y=y.filter(S=>{try{return n(g.paraeducator,S.id,e.value,s.value)}catch(I){return console.error("Error filtering student for paraeducator:",I),!1}})),g.plan&&g.plan!=="all"&&(y=y.filter(S=>it(S,"plan")===g.plan)),g.sortBy&&y.sort((S,I)=>{const R=it(S,g.sortBy)||"",D=it(I,g.sortBy)||"";if(["reviewDate","reevalDate","meetingDate"].includes(g.sortBy)){const C=R?new Date(R).getTime():0,_=D?new Date(D).getTime():0;return C-_}return R.toString().toLowerCase().localeCompare(D.toString().toLowerCase())}),l.value=y};return er(()=>[e.value,r.value],()=>{e.value.length>0&&p()},{deep:!0}),{showFilters:o,filteredStudents:l,currentFilters:c,toggleFilters:f,clearFilters:h,applyFilters:p,debouncedApplyFilters:d,getCurrentFilters:v}}function yc(t,e){const{students:r,userMapObj:n,currentUser:s,getCaseManagerId:i,getSchedule:a,getUserName:o,formatDate:l}=t,{filteredStudents:c,currentFilters:u,applyFilters:d}=e,f=Ae(()=>c.value),h=x=>{const w=it(x,"firstName"),A=it(x,"lastName");return`${w} ${A}`},v=x=>({name:h(x),grade:it(x,"grade"),plan:it(x,"plan"),caseManager:o(i(x))}),p=x=>({reviewDate:l(it(x,"reviewDate")),reevalDate:l(it(x,"reevalDate")),meetingDate:l(it(x,"meetingDate"))}),g=x=>{const w=a(x);return w?Object.entries(w).reduce((A,[k,L])=>(A[k]={teacherId:L,teacherName:o(L)},A),{}):{}},y=x=>{u.search=x,d()},E=x=>{u.cm=x,d()},S=x=>{u.teacher=x,d()},I=x=>{u.viewMode=x,d()},R=Ae(()=>{const x={};return f.value.forEach(w=>{const A=it(w,"grade");x[A]||(x[A]=[]),x[A].push(w)}),x}),D=Ae(()=>{const x={};return f.value.forEach(w=>{const A=it(w,"plan");x[A]||(x[A]=[]),x[A].push(w)}),x}),C=Ae(()=>{var w;const x=(w=s.value)==null?void 0:w.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(x)}),_=Ae(()=>{var w;const x=(w=s.value)==null?void 0:w.role;if(x==="case_manager")return u.providerView!=="service_provider";if(x==="admin")return u.teacher==="all"&&u.paraeducator==="all";if(x==="administrator_504_CM"||x==="sped_chair"){if(u.providerView==="iep_all"||u.providerView==="iep_504_all")return!0;const A=u.teacher!=="all"||u.paraeducator!=="all",k=u.providerView==="service_provider";return!A&&!k}return!1}),b=Ae(()=>{var w;const x=(w=s.value)==null?void 0:w.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(x)});return{visibleStudents:f,currentUser:s,userMapObj:n,groupStudentsByGrade:R,groupStudentsByPlan:D,canAccessFilters:C,isClassViewDisabled:_,isAdminRole:b,formatStudentName:h,formatStudentInfo:v,formatDates:p,getStudentSchedule:g,filterByName:y,filterByCaseManager:E,filterByTeacher:S,setViewMode:I,currentFilters:u,showProviderView:!1,providerViewOptions:Ae(()=>[])}}function jp(t,e){const r=yc(t,e),n=Ae(()=>t.students.value||[]);return Ae(()=>{const s={};return n.value.forEach(i=>{const a=t.getCaseManagerId(i);s[a]||(s[a]={caseManager:t.getUserName(a),students:[]}),s[a].students.push(i)}),s}),Ae(()=>{const s={};return n.value.forEach(i=>{var o;const a=((o=i.app)==null?void 0:o.providers)||{};Object.entries(a).forEach(([l,c])=>{c&&(s[c]||(s[c]={provider:t.getUserName(c),providerType:l,students:[]}),s[c].students.push(i))})}),s}),Ae(()=>{const s={instruction:[],assessment:[]};return n.value.forEach(i=>{var a,o,l,c;(o=(a=i.app)==null?void 0:a.accommodations)!=null&&o.instruction&&s.instruction.push(i),(c=(l=i.app)==null?void 0:l.accommodations)!=null&&c.assessment&&s.assessment.push(i)}),s}),{...r,visibleStudents:n,showProviderView:!1,providerViewOptions:Ae(()=>[])}}function eB(t,e){const r=yc(t,e),n=Ae(()=>{const s=r.visibleStudents.value.filter(l=>{var g,y;const c=t.getCaseManagerId(l),u=(g=r.currentUser.value)==null?void 0:g.uid,d=t.getSchedule(l),f=c===u,h=d?Object.values(d).includes(u):!1,v=((y=l.app)==null?void 0:y.providers)||{},p=Object.values(v).includes(u);return f||h||p}),i=e.currentFilters.providerView,a=e.currentFilters.viewMode;if(a==="class"){const l=s.filter(c=>{var p,g;const u=(p=r.currentUser.value)==null?void 0:p.uid,d=t.getSchedule(c),f=d?Object.values(d).includes(u):!1,h=((g=c.app)==null?void 0:g.providers)||{},v=Object.values(h).includes(u);return f||v});return i!=="service_provider"&&(e.currentFilters.providerView="service_provider"),console.log(" Case Manager Class View Results:",{providerView:"service_provider (auto-set)",viewMode:a,totalAccessible:s.length,finalVisible:l.length,studentNames:l.map(c=>{var u,d,f,h;return`${(d=(u=c.app)==null?void 0:u.studentData)==null?void 0:d.firstName} ${(h=(f=c.app)==null?void 0:f.studentData)==null?void 0:h.lastName}`})}),l}(i==="all"||i==="case_manager")&&a==="class"&&(e.currentFilters.viewMode="list");let o;return i==="case_manager"?o=s.filter(l=>{var u;return t.getCaseManagerId(l)===((u=r.currentUser.value)==null?void 0:u.uid)}):i==="service_provider"?o=s.filter(l=>{var v,p;const c=(v=r.currentUser.value)==null?void 0:v.uid,u=t.getSchedule(l),d=u?Object.values(u).includes(c):!1,f=((p=l.app)==null?void 0:p.providers)||{},h=Object.values(f).includes(c);return d||h}):o=s,console.log(" Case Manager Final Results:",{providerView:i,viewMode:a,totalAccessible:s.length,finalVisible:o.length,studentNames:o.map(l=>{var c,u,d,f;return`${(u=(c=l.app)==null?void 0:c.studentData)==null?void 0:u.firstName} ${(f=(d=l.app)==null?void 0:d.studentData)==null?void 0:f.lastName}`})}),o});return pe("all"),Ae(()=>n.value.filter(s=>{var a;return t.getCaseManagerId(s)===((a=r.currentUser.value)==null?void 0:a.uid)})),Ae(()=>n.value.filter(s=>{var d,f;const i=t.getCaseManagerId(s),a=(d=r.currentUser.value)==null?void 0:d.uid,o=t.getSchedule(s),l=o?Object.values(o).includes(a):!1,c=((f=s.app)==null?void 0:f.providers)||{},u=Object.values(c).includes(a);return(l||u)&&i!==a})),Ae(()=>{const s={instruction:[],assessment:[],speech:[],ot:[],mh:[]};return n.value.forEach(i=>{var o,l,c,u,d;(l=(o=i.app)==null?void 0:o.accommodations)!=null&&l.instruction&&s.instruction.push(i),(u=(c=i.app)==null?void 0:c.accommodations)!=null&&u.assessment&&s.assessment.push(i);const a=((d=i.app)==null?void 0:d.providers)||{};a.speechId&&s.speech.push(i),a.otId&&s.ot.push(i),a.mhId&&s.mh.push(i)}),s}),Ae(()=>{const s=new Date,i=30*24*60*60*1e3,a={reviewDue:[],reevalDue:[],meetingScheduled:[]};return n.value.forEach(o=>{var d,f,h,v,p,g;const l=new Date((f=(d=o.app)==null?void 0:d.dates)==null?void 0:f.reviewDate),c=new Date((v=(h=o.app)==null?void 0:h.dates)==null?void 0:v.reevalDate),u=new Date((g=(p=o.app)==null?void 0:p.dates)==null?void 0:g.meetingDate);l&&l-s<i&&a.reviewDue.push(o),c&&c-s<i&&a.reevalDue.push(o),u&&u-s<i&&a.meetingScheduled.push(o)}),a}),{...r,visibleStudents:n,showProviderView:!0,providerViewOptions:Ae(()=>[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}])}}function tB(t,e){const r=yc(t,e),{students:n,currentUser:s,getCaseManagerId:i,getSchedule:a}=t,{currentFilters:o}=e,l=Ae(()=>{var f;const d=(f=s.value)==null?void 0:f.role;return d==="sped_chair"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"},{value:"iep_all",label:"*"}]:d==="administrator_504_CM"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"},{value:"iep_504_all",label:"*"}]:[]}),c=Ae(()=>{var g,y;const d=n.value,f=(g=s.value)==null?void 0:g.uid,h=o.providerView,v=(y=s.value)==null?void 0:y.role;if(!f||!d)return[];let p=d;return h==="case_manager"?p=d.filter(E=>i(E)===f):h==="service_provider"?p=d.filter(E=>{const S=a(E);return S?Object.values(S).includes(f):!1}):h==="all"?p=d.filter(E=>{const S=i(E),I=a(E),R=S===f,D=I?Object.values(I).includes(f):!1;return R||D}):h==="iep_all"&&v==="sped_chair"?p=d.filter(E=>it(E,"plan")==="IEP"):h==="iep_504_all"&&v==="administrator_504_CM"&&(p=d.filter(E=>{const S=it(E,"plan");return S==="IEP"||S==="504"})),p});return{...r,visibleStudents:c,setViewMode:d=>{if(d==="class"&&r.isClassViewDisabled.value){o.viewMode="list";return}o.viewMode=d},providerViewOptions:l,showProviderView:!0}}function rB(t,e){const r=yc(t,e),n=Ae(()=>r.visibleStudents.value.filter(p=>{var y;const g=t.getSchedule(p);return g?Object.values(g).includes((y=r.currentUser.value)==null?void 0:y.uid):!1})),s=Ae(()=>{const p={};return n.value.forEach(g=>{const y=t.getSchedule(g);y&&Object.entries(y).forEach(([E,S])=>{var I;S===((I=r.currentUser.value)==null?void 0:I.uid)&&(p[E]||(p[E]=[]),p[E].push(g))})}),p}),i=Ae(()=>{const p={instruction:[],assessment:[]};return n.value.forEach(g=>{var y,E,S,I;(E=(y=g.app)==null?void 0:y.accommodations)!=null&&E.instruction&&p.instruction.push(g),(I=(S=g.app)==null?void 0:S.accommodations)!=null&&I.assessment&&p.assessment.push(g)}),p}),a=Ae(()=>{const p={};return n.value.forEach(g=>{var E;const y=((E=g.app)==null?void 0:E.providers)||{};Object.entries(y).forEach(([S,I])=>{I&&(p[I]||(p[I]={provider:t.getUserName(I),providerType:S,students:[]}),p[I].students.push(g))})}),p});return{...r,visibleStudents:n,studentsByPeriod:s,studentsByAccommodation:i,studentsByServiceProvider:a,filterByPeriod:p=>{e.currentFilters.period=p,e.applyFilters()},filterByAccommodation:p=>{e.currentFilters.accommodationType=p,e.applyFilters()},filterByProvider:p=>{e.currentFilters.serviceProvider=p,e.applyFilters()},canViewAccommodations:!0,canViewBasicInfo:!0,canViewServiceProviders:!0,canViewDates:!1,canEditStudents:!1}}function nB(t,e){const r=yc(t,e),n=Ae(()=>{var i;const s=(i=r.currentUser.value)==null?void 0:i.uid;return s?r.visibleStudents.value.filter(a=>{const o=t.getSchedule(a);return o?Object.values(o).includes(s):!1}):[]});return{...r,visibleStudents:n,showProviderView:!1,providerViewOptions:Ae(()=>[])}}function sB(t,e){const r=yc(t,e),n=Ae(()=>t.students.value||[]),s=Ae(()=>{var y;const p=t.aideAssignment.value[(y=r.currentUser.value)==null?void 0:y.uid];if(!p||!p.directAssignment)return[];const g=Array.isArray(p.directAssignment)?p.directAssignment:[p.directAssignment];return n.value.filter(E=>g.includes(E.id))}),i=Ae(()=>{var y;const p={},g=t.aideAssignment.value[(y=r.currentUser.value)==null?void 0:y.uid];return!g||!g.classAssignment||n.value.forEach(E=>{const S=t.getSchedule(E);S&&Object.entries(S).forEach(([I,R])=>{let D;if(typeof R=="string")D=R;else if(R&&typeof R=="object")D=R.teacherId;else return;const C=g.classAssignment[I];C&&(Array.isArray(C)?C:[C]).includes(D)&&(p[I]||(p[I]={teacher:t.getUserName(D),students:[]}),p[I].students.push(E))})}),p}),a=Ae(()=>{const p={instruction:[],assessment:[]};return n.value.forEach(g=>{var y,E,S,I;(E=(y=g.app)==null?void 0:y.accommodations)!=null&&E.instruction&&p.instruction.push(g),(I=(S=g.app)==null?void 0:S.accommodations)!=null&&I.assessment&&p.assessment.push(g)}),p});return{...r,visibleStudents:n,directAssignments:s,classAssignments:i,studentsByAccommodation:a,filterByAssignmentType:p=>{e.currentFilters.assignmentType=p,e.applyFilters()},filterByPeriod:p=>{e.currentFilters.period=p,e.applyFilters()},filterByTeacher:p=>{e.currentFilters.teacher=p,e.applyFilters()},canViewAccommodations:!0,canViewBasicInfo:!0,canViewServiceProviders:!1,canViewDates:!1,canEditStudents:!1}}function aB(t,e){const{currentUser:r}=t,n=X1(),s=Ae(()=>{var v;return((v=r.value)==null?void 0:v.role)||"guest"}),i=Ae(()=>{switch(s.value){case"admin":return jp(t,e);case"case_manager":return eB(t,e);case"sped_chair":case"administrator_504_CM":return tB(t,e);case"teacher":return rB(t,e);case"service_provider":return nB(t,e);case"paraeducator":return sB(t,e);case"administrator":return jp(t,e);default:return jp(t,e)}}),a=Ae(()=>{var p;const v=(p=r.value)==null?void 0:p.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(v)}),o=Ae(()=>{var p;const v=(p=r.value)==null?void 0:p.role;return["case_manager"].includes(v)}),l=Ae(()=>{var p;const v=(p=r.value)==null?void 0:p.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(v)}),c=Ae(()=>{var p;const v=(p=r.value)==null?void 0:p.role;return["admin","administrator","administrator_504_CM"].includes(v)}),u=Ae(()=>{var p;const v=(p=r.value)==null?void 0:p.role;return["admin","administrator","sped_chair"].includes(v)}),d=Ae(()=>n.can(Ze.TESTING_ALL)),f=Ae(()=>n.can(Ze.TESTING_PARTIAL)),h=Ae(()=>d.value||f.value);return{...i.value,currentRole:s,canEditAllStudents:a,canEditOwnStudents:o,canViewAllStudents:l,canManageUsers:c,canManageAides:u,canAccessTesting:d,canAccessTestingPartial:f,hasAnyTestingAccess:h}}function iB(t,e,r=null){const{aideAssignment:n,getCaseManagerId:s,getSchedule:i}=t,{filteredStudents:a,currentFilters:o,getCurrentFilters:l}=e,c=r||a,u=pe("list");er(()=>o.viewMode,g=>{u.value=g||"list"});const d=Ae(()=>c.value.filter(g=>{var y,E;return((E=(y=g.app)==null?void 0:y.flags)==null?void 0:E.flag2)||g.flag2||!1})),f=Ae(()=>{const g={},y=l(),E=y.paraeducator&&y.paraeducator!=="all";return c.value.forEach(S=>{const I=i(S);I?Object.entries(I).forEach(([R,D])=>{g[R]||(g[R]=[]);let C;if(typeof D=="string")C=D;else if(D&&typeof D=="object")C=D.teacherId;else return;if(E){const _=n.value[y.paraeducator];_&&_.classAssignment&&_.classAssignment[R]&&(Array.isArray(_.classAssignment[R])?_.classAssignment[R]:[_.classAssignment[R]]).includes(C)&&g[R].push(S)}else g[R].push(S)}):E||(g["No Schedule"]||(g["No Schedule"]=[]),g["No Schedule"].push(S))}),Object.keys(g).forEach(S=>{g[S].length===0&&delete g[S]}),g}),h=Ae(()=>{const g=l();if(!(g.paraeducator&&g.paraeducator!=="all"))return[];const E=n.value[g.paraeducator];if(!E||!E.directAssignment)return[];const S=Array.isArray(E.directAssignment)?E.directAssignment:[E.directAssignment];return c.value.filter(I=>S.includes(I.id))}),v=Ae(()=>{const g={};return c.value.forEach(y=>{const E=s(y);E&&(g[E]||(g[E]=[]),g[E].push(y))}),g});return{currentViewMode:u,studentsByClass:f,directAssignmentStudents:h,studentsByCaseManager:v,testingViewStudents:d,setViewMode:g=>{u.value=g,o.viewMode=g}}}function oB(t){const{router:e,fetchData:r}=t,n=pe(null),s=pe(null),i=pe(!1),a=pe(!1),o=pe(!1),l=pe(null),c=I=>{n.value=I},u=I=>{s.value=I},d=I=>{l.value=I,o.value=!0},f=()=>{console.log("Teacher feedback form sent successfully")},h=()=>{a.value=!1,r()},v=()=>{console.log("Student saved"),r()},p=()=>{e.push("/admin")},g=()=>{e.push("/testing")},y=()=>{e.push("/aide-schedule")},E=async I=>{switch(I){case"add-student":a.value=!0;break;case"export":i.value=!0;break;case"print":window.print();break;case"admin":p();break;case"testing":g();break;case"aide-schedule":y();break;case"logout":await S();break}},S=async()=>{try{const{useAuthStore:I}=await Q1(async()=>{const{useAuthStore:D}=await Promise.resolve().then(()=>u9);return{useAuthStore:D}},void 0);await I().logout(),e.push("/login")}catch(I){console.error("Logout failed:",I)}};return{editingStudentId:n,emailingStudentId:s,showExport:i,showAddStudent:a,showFeedbackDialog:o,feedbackStudentId:l,editStudent:c,emailStudent:u,handleTeacherFeedback:d,handleFormSent:f,handleStudentAdded:h,handleStudentSaved:v,navigateToAdmin:p,navigateToTesting:g,navigateToAideSchedule:y,handleNavAction:E,handleLogout:S}}const lB={class:"student-nav-menu"},cB=["title"],uB={class:"nav-content"},dB={class:"nav-section"},fB={class:"nav-buttons"},hB={key:0,class:"nav-section"},pB={class:"nav-buttons"},mB={key:1,class:"nav-section"},vB={class:"nav-buttons"},gB={key:2,class:"nav-section"},xB={class:"nav-buttons"},yB={class:"nav-section"},EB={class:"user-info"},_B={class:"user-details"},bB={key:0,class:"user-role"},SB={__name:"StudentNavMenu",props:{currentUser:{type:Object,default:null},isAdmin:{type:Boolean,default:!1}},emits:["action"],setup(t,{emit:e}){const r=e,{isDebugMenuVisible:n,canShowDebugMenu:s,toggleDebugMenu:i}=Y1(),a=pe(!1);function o(){a.value=!a.value}function l(){a.value=!1}function c(u){r("action",u),l()}return(u,d)=>{var f,h,v,p;return N(),U("div",lB,[m("button",{onClick:o,class:ot(["hamburger-btn",{active:a.value}]),title:a.value?"Close Menu":"Open Menu"},d[8]||(d[8]=[m("span",{class:"hamburger-line"},null,-1),m("span",{class:"hamburger-line"},null,-1),m("span",{class:"hamburger-line"},null,-1)]),10,cB),a.value?(N(),U("div",{key:0,class:"nav-overlay",onClick:l})):Fe("",!0),m("div",{class:ot(["nav-panel",{open:a.value}])},[m("div",{class:"nav-header"},[d[9]||(d[9]=m("h3",null,"Student Management",-1)),m("button",{onClick:l,class:"close-btn"},"")]),m("div",uB,[m("div",dB,[d[13]||(d[13]=m("h4",null,"Actions",-1)),m("div",fB,[m("button",{onClick:d[0]||(d[0]=g=>c("add-student")),class:"nav-btn primary"},d[10]||(d[10]=[m("span",null,"",-1),Me(" Add Student ")])),m("button",{onClick:d[1]||(d[1]=g=>c("export")),class:"nav-btn"},d[11]||(d[11]=[m("span",null,"",-1),Me(" Export ")])),m("button",{onClick:d[2]||(d[2]=g=>c("print")),class:"nav-btn print-btn"},d[12]||(d[12]=[m("span",null,"",-1),Me(" Print ")]))])]),t.isAdmin?(N(),U("div",hB,[d[16]||(d[16]=m("h4",null,"Admin",-1)),m("div",pB,[m("button",{onClick:d[3]||(d[3]=g=>c("admin")),class:"nav-btn"},d[14]||(d[14]=[m("span",null,"",-1),Me(" Admin Panel ")])),m("button",{onClick:d[4]||(d[4]=g=>c("testing")),class:"nav-btn"},d[15]||(d[15]=[m("span",null,"",-1),Me(" Testing ")]))])])):Fe("",!0),me(s)?(N(),U("div",mB,[d[18]||(d[18]=m("h4",null,"Debug",-1)),m("div",vB,[m("button",{onClick:d[5]||(d[5]=(...g)=>me(i)&&me(i)(...g)),class:"nav-btn secondary"},[d[17]||(d[17]=m("span",null,"",-1)),Me(" "+le(me(n)?"Hide":"Show")+" Debug Menu ",1)])])])):Fe("",!0),((f=t.currentUser)==null?void 0:f.role)==="paraeducator"?(N(),U("div",gB,[d[20]||(d[20]=m("h4",null,"Schedule",-1)),m("div",xB,[m("button",{onClick:d[6]||(d[6]=g=>c("aide-schedule")),class:"nav-btn"},d[19]||(d[19]=[m("span",null,"",-1),Me(" My Schedule ")]))])])):Fe("",!0),m("div",yB,[d[22]||(d[22]=m("h4",null,"User",-1)),m("div",EB,[m("div",_B,[m("strong",null,le(((h=t.currentUser)==null?void 0:h.name)||((v=t.currentUser)==null?void 0:v.email)||"User"),1),(p=t.currentUser)!=null&&p.role?(N(),U("span",bB,"("+le(t.currentUser.role)+")",1)):Fe("",!0)]),m("button",{onClick:d[7]||(d[7]=g=>c("logout")),class:"nav-btn danger"},d[21]||(d[21]=[m("span",null,"",-1),Me(" Logout ")]))])])])],2)])}}},TB=bt(SB,[["__scopeId","data-v-53a7f24c"]]),Zf={grades:[],classServices:[{name:"SDC",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Co-teach",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"RSP",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Directed Studies",subcategories:["Directed Studies"],enabledSubcategories:["Directed Studies"]},{name:"FA",subcategories:["FA"],enabledSubcategories:["FA"]}],sdcSubcategories:[],customClassServices:[],serviceProviders:["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],customServiceProviders:[],numPeriods:7,periodLabels:["1","2","3","4","5","6","sh"]},Us=pe({...Zf}),aa=pe(!1),xi=pe(null);let Vc=!1;function ka(){const t=vt(ht,"app_settings","global"),e=async()=>{if(aa.value)return new Promise(s=>{const i=er(aa,a=>{a||(i(),s(Us.value))})});if(Vc&&!xi.value)return Us.value;aa.value=!0,xi.value=null;try{const s=await Vr(t);return s.exists()?(Us.value=s.data(),console.log("useAppSettings: Loaded existing settings:",Us.value)):(Us.value={...Zf},console.log("useAppSettings: No existing settings, using defaults:",Us.value)),Vc=!0,Us.value}catch(s){throw xi.value=s.message,console.error("useAppSettings: Error loading settings:",s),s}finally{aa.value=!1}},r=async s=>{aa.value=!0,xi.value=null;try{console.log("useAppSettings: Saving settings:",s),await xr(t,s),console.log("useAppSettings: Settings saved successfully"),Us.value={...s},Vc=!0}catch(i){throw xi.value=i.message,console.error("useAppSettings: Error saving settings:",i),i}finally{aa.value=!1}},n=async()=>{aa.value=!0,xi.value=null;try{await xr(t,{...Zf}),Us.value={...Zf},Vc=!0}catch(s){throw xi.value=s.message,s}finally{aa.value=!1}};return!Vc&&!aa.value&&e(),er(Us,s=>{console.log("appSettings changed:",s)},{deep:!0}),{appSettings:Us,loadAppSettings:e,saveAppSettings:r,resetAppSettings:n,loading:aa,error:xi}}const AB={class:"docs-item"},wB=["href"],CB=["href"],IB={__name:"StudentDocsCell",props:{student:{type:Object,required:!0},getDocumentUrl:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),U("td",null,[m("div",AB,[t.getDocumentUrl(t.student,"ataglancePdfUrl")?(N(),U("a",{key:0,href:t.getDocumentUrl(t.student,"ataglancePdfUrl"),target:"_blank"},"At-A-Glance",8,wB)):Fe("",!0),t.getDocumentUrl(t.student,"bipPdfUrl")?(N(),U("a",{key:1,href:t.getDocumentUrl(t.student,"bipPdfUrl"),target:"_blank"},"BIP",8,CB)):Fe("",!0),!t.getDocumentUrl(t.student,"ataglancePdfUrl")&&!t.getDocumentUrl(t.student,"bipPdfUrl")?(N(),U(Oe,{key:2},[Me("")],64)):Fe("",!0)])]))}},kB={class:"action-buttons"},DB=["title"],RB={__name:"StudentActionsCell",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!1}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){function r(n,s=!1){if(!(n!=null&&n.seconds))return"";const i=new Date(n.seconds*1e3);return s?i.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}):i.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})+" at "+i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"})}return(n,s)=>{var i,a,o;return N(),U("td",null,[m("div",kB,[m("button",{class:"edit-btn",onClick:s[0]||(s[0]=l=>n.$emit("edit",t.student.id)),title:"Edit Student"},""),m("button",{class:"email-btn",onClick:s[1]||(s[1]=l=>n.$emit("email",t.student.id)),title:"Email Student"},""),((i=t.currentUser)==null?void 0:i.role)==="case_manager"?(N(),U("button",{key:0,class:"teacher-feedback-btn",onClick:s[2]||(s[2]=l=>n.$emit("teacher-feedback",t.student.id)),title:"Send Teacher Feedback Form"},"")):Fe("",!0)]),(o=(a=t.student)==null?void 0:a.updatedAt)!=null&&o.seconds?(N(),U("div",{key:0,class:"updated-date",title:"Last Updated: "+r(t.student.updatedAt)},le(r(t.student.updatedAt,!0)),9,DB)):Fe("",!0)])}}},FB=bt(RB,[["__scopeId","data-v-deb3b3aa"]]),PB={key:0,class:"schedule-list"},OB={class:"service-pill"},NB={key:1},LB={__name:"StudentScheduleCell",props:{student:{type:Object,required:!0},getSchedule:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),U("td",null,[t.getSchedule(t.student)?(N(),U("div",PB,[m("ul",null,[(N(!0),U(Oe,null,Ge(t.getSchedule(t.student),(n,s)=>(N(),U("li",{key:s},[m("span",OB,le(s)+":",1),Me(" "+le(t.getUserInitialLastName(n)),1)]))),128))])])):(N(),U("div",NB,""))]))}},MB={key:0},BB={key:1},UB={key:0,class:"service-pill"},VB={key:1,class:"service-pill"},$B={key:2,class:"service-pill"},HB={key:3,class:"service-pill"},jB={key:4,class:"service-pill"},GB={key:5,class:"service-pill"},WB={__name:"StudentServicesCell",props:{student:{type:Object,required:!0},appSettings:{type:Object,required:!1},getClassServices:{type:Function,required:!0},getOtherServices:{type:Function,required:!0},hasServiceProviders:{type:Function,required:!0},getServiceProviderId:{type:Function,required:!0},getProviderFieldName:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),U("td",null,[t.getClassServices(t.student).length>0||t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(N(),U(Oe,{key:0},[t.getClassServices(t.student).length>0?(N(),U("div",MB,[r[0]||(r[0]=m("strong",null,"Class Services:",-1)),(N(!0),U(Oe,null,Ge(t.getClassServices(t.student),n=>(N(),U("span",{key:n,class:"service-pill"},le(n),1))),128))])):Fe("",!0),t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(N(),U("div",BB,[r[1]||(r[1]=m("strong",null,"Related Services:",-1)),(N(!0),U(Oe,null,Ge(t.getOtherServices(t.student),n=>(N(),U("span",{key:n,class:"service-pill"},le(n),1))),128)),t.appSettings&&t.appSettings.value&&t.appSettings.value.serviceProviders?(N(),U(Oe,{key:0},[t.getServiceProviderId(t.student,t.getProviderFieldName(e.abbr))?(N(!0),U(Oe,{key:0},Ge(t.appSettings.value.serviceProviders,n=>(N(),U("span",{key:n,class:"service-pill"},le(n)+" ("+le(t.getUserInitialLastName(t.getServiceProviderId(t.student,t.getProviderFieldName(n))))+") ",1))),128)):Fe("",!0)],64)):(N(),U(Oe,{key:1},[t.getServiceProviderId(t.student,"speechId")?(N(),U("span",UB,"SP ("+le(t.getUserInitialLastName(t.getServiceProviderId(t.student,"speechId")))+")",1)):Fe("",!0),t.getServiceProviderId(t.student,"mhId")?(N(),U("span",VB,"MH ("+le(t.getUserInitialLastName(t.getServiceProviderId(t.student,"mhId")))+")",1)):Fe("",!0),t.getServiceProviderId(t.student,"otId")?(N(),U("span",$B,"OT ("+le(t.getUserInitialLastName(t.getServiceProviderId(t.student,"otId")))+")",1)):Fe("",!0),t.getServiceProviderId(t.student,"ptId")?(N(),U("span",HB,"PT ("+le(t.getUserInitialLastName(t.getServiceProviderId(t.student,"ptId")))+")",1)):Fe("",!0),t.getServiceProviderId(t.student,"scId")?(N(),U("span",jB,"SC ("+le(t.getUserInitialLastName(t.getServiceProviderId(t.student,"scId")))+")",1)):Fe("",!0),t.getServiceProviderId(t.student,"trId")?(N(),U("span",GB,"TR ("+le(t.getUserInitialLastName(t.getServiceProviderId(t.student,"trId")))+")",1)):Fe("",!0)],64))])):Fe("",!0)],64)):(N(),U(Oe,{key:1},[Me("  ")],64))]))}},zB={key:0,class:"flag-overlay flag-preferential-seating"},KB={key:1,class:"bullet-list"},qB=["innerHTML"],XB={key:2},YB={__name:"StudentInstructionAccomCell",props:{student:{type:Object,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),U("td",{class:ot(["instruction-cell",{"with-flag":t.getFlagValue(t.student,"flag1")}])},[t.getFlagValue(t.student,"flag1")?(N(),U("div",zB,"Preferential Seating")):Fe("",!0),t.student&&t.formatListFromText(me(it)(t.student,"instruction"))!=="<div></div>"?(N(),U("div",KB,[m("div",{innerHTML:t.formatListFromText(me(it)(t.student,"instruction"))},null,8,qB)])):(N(),U("div",XB,""))],2))}},QB={key:0,class:"flag-overlay flag-separate-setting"},JB={key:1,class:"bullet-list"},ZB=["innerHTML"],e7={key:2},t7={__name:"StudentAssessmentAccomCell",props:{student:{type:Object,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),U("td",{class:ot(["instruction-cell",{"with-flag":t.getFlagValue(t.student,"flag2")}])},[t.getFlagValue(t.student,"flag2")?(N(),U("div",QB,"Separate setting")):Fe("",!0),t.student&&t.formatListFromText(me(it)(t.student,"assessment"))!=="<div></div>"?(N(),U("div",JB,[m("div",{innerHTML:t.formatListFromText(me(it)(t.student,"assessment"))},null,8,ZB)])):(N(),U("div",e7,""))],2))}},r7={class:"student-name"},n7={class:"std-info-subheading"},s7={key:0,class:"schedule-list"},a7={class:"service-pill"},i7={key:1},o7={key:0,class:"flag-overlay flag-separate-setting"},l7={key:1,class:"bullet-list"},c7=["innerHTML"],u7={key:2},d7={class:"student-name"},f7=["title"],h7={class:"std-info-subheading"},p7={class:"student-dates print"},m7={key:0,class:"direct-assignment-badge"},v7={__name:"StudentTable",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})},currentUser:{type:Object,default:null},testingView:{type:Boolean,default:!1},aideSchedule:{type:Object,default:()=>({})}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,{appSettings:n,loadAppSettings:s,loading:i,error:a}=ka();Jt(async()=>{try{console.log("StudentTable: Loading app settings..."),await s(),console.log("StudentTable: App settings loaded successfully")}catch(_){console.error("StudentTable: Error loading app settings:",_)}});function o(_){const b=r.userMap[_];return b&&(b.name||b.email)||_}function l(_){return _?new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function c(_){if(!_)return"";const b=new Date,x=new Date(_),w=Math.ceil((x-b)/(1e3*60*60*24));return w<=0?"flag-critical":w<=7?"flag-high":w<=14?"flag-medium":w<=21?"flag-mid":w<=28?"flag-low":w<=35?"flag-prep":w<=60?"flag-prep-reeval":""}function u(_){return c(it(_,"meetingDate"))}function d(_){return c(it(_,"reviewDate"))}function f(_){return c(it(_,"reevalDate"))}function h(_){const b=r.userMap[_];if(!b)return _;if(b.name){const x=b.name.trim().split(" ");return x.length===1?x[0]:`${x[0][0]}. ${x.slice(1).join(" ")}`}return b.email?b.email[0].toUpperCase():_}function v(_){var b,x;return((x=(b=_.app)==null?void 0:b.studentData)==null?void 0:x.caseManagerId)||_.caseManagerId||_.casemanager_id}function p(_,b){var x,w;return((w=(x=_.app)==null?void 0:x.flags)==null?void 0:w[b])||_[b]||!1}function g(_,b){var x,w;return((w=(x=_.app)==null?void 0:x.documents)==null?void 0:w[b])||_[`${b}Url`]||_[`${b}_url`]||null}function y(_){var b,x,w,A,k;if(_.schedule)return _.schedule;if((x=(b=_.app)==null?void 0:b.schedule)!=null&&x.periods)return _.app.schedule.periods;if((A=(w=_.aeries)==null?void 0:w.schedule)!=null&&A.periods)return _.aeries.schedule.periods;if((k=_.aeries)!=null&&k.schedule){const L={};return Object.entries(_.aeries.schedule).forEach(([G,P])=>{if(P&&P.teacherId){let M=G;if(n.value&&n.value.periodLabels){const B=parseInt(G.replace("period",""))-1;B>=0&&B<n.value.periodLabels.length&&(M=n.value.periodLabels[B])}let H=P.teacherId;if(r.userMap){let B=Object.values(r.userMap).find(Q=>Q.aeriesId===P.teacherId||Q.aeriesId===parseInt(P.teacherId)||Q.id===P.teacherId);if(B||(B=Object.values(r.userMap).find(Q=>{var j,O,W,K;return((j=Q.aeriesId)==null?void 0:j.toString())===((O=P.teacherId)==null?void 0:O.toString())||((W=Q.id)==null?void 0:W.toString())===((K=P.teacherId)==null?void 0:K.toString())})),B&&B.name){const Q=B.name.split(" ");if(Q.length>=2){const j=Q[0],O=Q[Q.length-1];H=`${j.charAt(0)}. ${O}`}else H=B.name}else console.warn(`Teacher not found for ID: ${P.teacherId}`)}L[M]=H}}),Object.keys(L).length>0?L:null}return null}function E(_){var x,w;const b=((w=(x=_.app)==null?void 0:x.schedule)==null?void 0:w.classServices)||_.services||[];if(i.value)return Array.isArray(b)?b.filter(A=>typeof A=="string"&&A.includes(":")):[];if(a.value)return Array.isArray(b)?b.filter(A=>typeof A=="string"&&A.includes(":")):[];if(n.value&&n.value.classServices){const A=n.value.classServices.filter(k=>k.enabledSubcategories&&k.enabledSubcategories.length>0).map(k=>k.name);return Array.isArray(b)?b.filter(k=>{if(typeof k!="string"||!k.includes(":"))return!1;const L=k.split(":")[0];return A.includes(L)}):[]}return Array.isArray(b)?b.filter(A=>typeof A=="string"&&A.includes(":")):[]}function S(_){var x,w;const b=((w=(x=_.app)==null?void 0:x.schedule)==null?void 0:w.otherServices)||_.other_services||[];return Array.isArray(b)?b.filter(A=>!!A):[]}function I(_){var A;const b=((A=_.app)==null?void 0:A.providers)||{},x=Object.values(b).some(Boolean);if(i.value||a.value){const k=_.speechId||_.speech_id||_.mhId||_.mh_id||_.otId||_.ot_id||_.ptId||_.pt_id||_.scId||_.sc_id||_.trId||_.tr_id||_.audId||_.aud_id||_.viId||_.vi_id||_.atId||_.at_id||_.dhhId||_.dhh_id||_.omId||_.om_id||_.bisId||_.bis_id||_.hnId||_.hn_id||_.swId||_.sw_id;return x||k}let w=!1;if(n.value&&n.value.serviceProviders){const k=n.value.serviceProviders,L={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"};w=k.some(G=>{const P=L[G];return _[P]||_[P.replace("Id","_id")]})}else w=_.speechId||_.speech_id||_.mhId||_.mh_id||_.otId||_.ot_id||_.ptId||_.pt_id||_.scId||_.sc_id||_.trId||_.tr_id||_.audId||_.aud_id||_.viId||_.vi_id||_.atId||_.at_id||_.dhhId||_.dhh_id||_.omId||_.om_id||_.bisId||_.bis_id||_.hnId||_.hn_id||_.swId||_.sw_id;return x||w}function R(_,b){var w,A;return((A=(w=_.app)==null?void 0:w.providers)==null?void 0:A[b])||_[b]||_[b.replace("Id","_id")]||null}function D(_){return{SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"}[_]||`${_.toLowerCase()}Id`}function C(_){if(!r.currentUser||r.currentUser.role!=="paraeducator")return!1;const b=r.currentUser.uid;let x=r.aideSchedule[b];if(!x){const w=Object.entries(r.userMap).find(([A,k])=>k.uid===b||k.email===r.currentUser.email);if(w){const[A]=w;x=r.aideSchedule[A]}}return(x==null?void 0:x.directAssignment)===_}return er(()=>r.student,_=>{var b,x,w,A,k,L,G;_&&Object.keys(_).length>0&&(form.schedule=((x=(b=_.app)==null?void 0:b.schedule)==null?void 0:x.periods)||_.schedule||((A=(w=_.aeries)==null?void 0:w.schedule)==null?void 0:A.periods)||{},console.log("StudentForm DEBUG - form.schedule:",form.schedule),console.log("StudentForm DEBUG - aeries.schedule:",(k=r.student.aeries)==null?void 0:k.schedule),console.log("StudentForm DEBUG - app.schedule.periods:",(G=(L=r.student.app)==null?void 0:L.schedule)==null?void 0:G.periods))},{immediate:!0,deep:!0}),(_,b)=>(N(),U("table",{class:ot(["students-table",{"testing-view":t.testingView}])},[m("thead",null,[m("tr",null,[t.testingView?(N(),U(Oe,{key:0},[b[0]||(b[0]=m("th",{class:"print"},"Student Info",-1)),b[1]||(b[1]=m("th",{class:"print"},"Schedule",-1)),b[2]||(b[2]=m("th",{class:"print"},"Assessment Accom.",-1))],64)):(N(),U(Oe,{key:1},[b[3]||(b[3]=m("th",{class:"print"},"Student Info",-1)),b[4]||(b[4]=m("th",{class:"print"},"Services",-1)),b[5]||(b[5]=m("th",{class:"print"},"Schedule",-1)),b[6]||(b[6]=m("th",{class:"print"},"Instruction Accom.",-1)),b[7]||(b[7]=m("th",{class:"print"},"Assessment Accom.",-1)),b[8]||(b[8]=m("th",{class:"print"},"Docs",-1)),b[9]||(b[9]=m("th",{class:"print"},"Actions",-1))],64))])]),m("tbody",null,[(N(!0),U(Oe,null,Ge(t.students,x=>{var w;return N(),U("tr",{key:x.id},[t.testingView?(N(),U(Oe,{key:0},[m("td",null,[m("div",r7,[m("strong",null,le(me(it)(x,"firstName"))+" "+le(me(it)(x,"lastName")),1)]),m("div",n7,[m("div",null,"Grd: "+le(me(it)(x,"grade"))+" | Prg: "+le(me(it)(x,"plan")),1),m("div",null,"CM: "+le(o(v(x))),1)])]),m("td",null,[y(x)?(N(),U("div",s7,[m("ul",null,[(N(!0),U(Oe,null,Ge(y(x),(A,k)=>(N(),U("li",{key:k},[m("span",a7,le(k)+":",1),Me(" "+le(h(A)),1)]))),128))])])):y(x)?Fe("",!0):(N(),U("div",i7,""))]),m("td",{class:ot(["instruction-cell",{"with-flag":p(x,"flag2")}])},[p(x,"flag2")?(N(),U("div",o7,"Separate setting")):Fe("",!0),me(it)(x,"assessment")?(N(),U("div",l7,[m("div",{innerHTML:me(Hp)(me(it)(x,"assessment"))},null,8,c7)])):(N(),U("div",u7,""))],2)],64)):(N(),U(Oe,{key:1},[m("td",null,[m("div",d7,[m("strong",null,le(me(it)(x,"firstName"))+" "+le(me(it)(x,"lastName")),1),m("span",{class:"data-source",title:`Data source: ${me(Uc)(x,"firstName")}`},le(me(Uc)(x,"firstName")==="Override"?"":me(Uc)(x,"firstName")==="App"?"":me(Uc)(x,"firstName")==="Aeries"?"":me(Uc)(x,"firstName")==="SEIS"?"":""),9,f7)]),m("div",h7,[m("div",null,"Grd: "+le(me(it)(x,"grade"))+" | Prg: "+le(me(it)(x,"plan")),1),m("div",null,"CM: "+le(o(v(x))),1)]),m("div",p7,[m("span",{class:ot(["badge badge-review plan-review",d(x)])},"PR: "+le(l(me(it)(x,"reviewDate"))),3),m("span",{class:ot(["badge badge-reeval reeval-due",f(x)])},"RE: "+le(l(me(it)(x,"reevalDate"))),3),m("span",{class:ot(["badge badge-meeting meeting-date",[u(x),me(it)(x,"meetingDate")?"date-set":""]])},"  "+le(l(me(it)(x,"meetingDate"))||"Not set"),3)]),((w=t.currentUser)==null?void 0:w.role)==="paraeducator"&&C(x.id)?(N(),U("div",m7,b[10]||(b[10]=[m("span",{class:"badge badge-direct"},"Direct Assignment",-1)]))):Fe("",!0)]),nt(WB,{student:x,"app-settings":me(n),"get-class-services":E,"get-other-services":S,"has-service-providers":I,"get-service-provider-id":R,"get-provider-field-name":D,"get-user-initial-last-name":h},null,8,["student","app-settings"]),nt(LB,{student:x,"get-schedule":y,"get-user-initial-last-name":h},null,8,["student"]),nt(YB,{student:x,"get-flag-value":p,"format-list-from-text":me(Hp)},null,8,["student","format-list-from-text"]),nt(t7,{student:x,"get-flag-value":p,"format-list-from-text":me(Hp)},null,8,["student","format-list-from-text"]),nt(IB,{student:x,"get-document-url":g},null,8,["student"]),nt(FB,{student:x,"current-user":t.currentUser,onEdit:A=>_.$emit("edit",x.id),onEmail:A=>_.$emit("email",x.id),onTeacherFeedback:A=>_.$emit("teacher-feedback",x.id)},null,8,["student","current-user","onEdit","onEmail","onTeacherFeedback"])],64))])}),128))])],2))}},Ef=bt(v7,[["__scopeId","data-v-1cf5959a"]]);function g7(t,e){const{appSettings:r,loadAppSettings:n,loading:s,error:i}=ka(),a=pe(!1);Jt(async()=>{try{console.log("useStudentForm: Starting to load app settings..."),await n(),console.log("useStudentForm: App settings loaded successfully:",r.value)}catch(x){console.error("useStudentForm: Error loading app settings:",x)}});const o=Ae(()=>{var x,w;return(x=r.value)!=null&&x.numPeriods&&((w=r.value)!=null&&w.periodLabels)?r.value.periodLabels.slice(0,r.value.numPeriods):["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]}),l=Ae(()=>{var x;return(x=r.value)!=null&&x.grades&&r.value.grades.length>0?(console.log("useStudentForm: Using app settings grades:",r.value.grades),r.value.grades):(console.log("useStudentForm: Using fallback grades: [7, 8]"),["7","8"])}),c=Ae(()=>{var x;if((x=r.value)!=null&&x.classServices&&r.value.classServices.length>0){const w=r.value.classServices.filter(A=>A.enabledSubcategories&&A.enabledSubcategories.length>0);return console.log("useStudentForm: Available class services:",w.length,"services"),w}return console.log("useStudentForm: No class services available"),[]}),u=Ae(()=>{var x;return(x=r.value)!=null&&x.serviceProviders&&r.value.serviceProviders.length>0?(console.log("useStudentForm: Using app settings service providers:",r.value.serviceProviders.length,"providers"),r.value.serviceProviders):(console.log("useStudentForm: No service providers configured in app settings"),[])}),d=Ae(()=>{var x;return(x=r.value)!=null&&x.customServiceProviders?r.value.customServiceProviders:[]}),f=Ae(()=>{let x=t.users.userRoles?t.users.userRoles:{teachers:t.users.teachers||[],caseManagers:t.users.caseManagers||[],speech:t.users.speech||[],ot:t.users.ot||[],mh:t.users.mh||[]};return x.teachers&&(x={...x,teachers:x.teachers.map(w=>({...w,id:String(w.id)}))}),x}),h=x=>{var w,A,k,L,G,P,M,H,B,Q,j,O,W,K,se,ve,ie,de,ee,Y,ge,q,z,J,he,re,X,te,Se,Ee,be,ke,Be,Ie,je,Ue,He,qe,ye,xe,_e,Pe,We,rt;return{ssid:x.id||"",firstName:it(x,"firstName")||"",lastName:it(x,"lastName")||"",grade:it(x,"grade")||"7",plan:it(x,"plan")||"IEP",reviewDate:it(x,"reviewDate")||"",reevalDate:it(x,"reevalDate")||"",meetingDate:it(x,"meetingDate")||"",caseManagerId:((A=(w=x.app)==null?void 0:w.studentData)==null?void 0:A.caseManagerId)||x.caseManagerId||x.casemanager_id||"",schedule:((L=(k=x.app)==null?void 0:k.schedule)==null?void 0:L.periods)||((P=(G=x.aeries)==null?void 0:G.schedule)==null?void 0:P.periods)||x.schedule||{},services:((H=(M=x.app)==null?void 0:M.schedule)==null?void 0:H.classServices)||x.services||[],speechId:((Q=(B=x.app)==null?void 0:B.providers)==null?void 0:Q.speechId)||x.speechId||x.speech_id||"",otId:((O=(j=x.app)==null?void 0:j.providers)==null?void 0:O.otId)||x.otId||x.ot_id||"",mhId:((K=(W=x.app)==null?void 0:W.providers)==null?void 0:K.mhId)||x.mhId||x.mh_id||"",ptId:((ve=(se=x.app)==null?void 0:se.providers)==null?void 0:ve.ptId)||x.ptId||x.pt_id||"",scId:((de=(ie=x.app)==null?void 0:ie.providers)==null?void 0:de.scId)||x.scId||x.sc_id||"",trId:((Y=(ee=x.app)==null?void 0:ee.providers)==null?void 0:Y.trId)||x.trId||x.tr_id||"",audId:((q=(ge=x.app)==null?void 0:ge.providers)==null?void 0:q.audId)||x.audId||x.aud_id||"",viId:((J=(z=x.app)==null?void 0:z.providers)==null?void 0:J.viId)||x.viId||x.vi_id||"",atId:((re=(he=x.app)==null?void 0:he.providers)==null?void 0:re.atId)||x.atId||x.at_id||"",dhhId:((te=(X=x.app)==null?void 0:X.providers)==null?void 0:te.dhhId)||x.dhhId||x.dhh_id||"",omId:((Ee=(Se=x.app)==null?void 0:Se.providers)==null?void 0:Ee.omId)||x.omId||x.om_id||"",bisId:((ke=(be=x.app)==null?void 0:be.providers)==null?void 0:ke.bisId)||x.bisId||x.bis_id||"",hnId:((Ie=(Be=x.app)==null?void 0:Be.providers)==null?void 0:Ie.hnId)||x.hnId||x.hn_id||"",swId:((Ue=(je=x.app)==null?void 0:je.providers)==null?void 0:Ue.swId)||x.swId||x.sw_id||"",instruction:it(x,"instruction")||"",assessment:it(x,"assessment")||"",flag1:((qe=(He=x.app)==null?void 0:He.flags)==null?void 0:qe.flag1)||x.flag1||!1,flag2:((xe=(ye=x.app)==null?void 0:ye.flags)==null?void 0:xe.flag2)||x.flag2||!1,ataglancePdfUrl:((Pe=(_e=x.app)==null?void 0:_e.documents)==null?void 0:Pe.ataglancePdfUrl)||x.ataglancePdfUrl||x.ataglance_pdf_url||"",bipPdfUrl:((rt=(We=x.app)==null?void 0:We.documents)==null?void 0:rt.bipPdfUrl)||x.bipPdfUrl||x.bip_pdf_url||"",bipFile:null,ataglanceFile:null,removeBipFile:!1,removeAtaglanceFile:!1}},v=Ns(h(t.student||{}));er(()=>t.student,x=>{var w,A,k,L;if(x&&Object.keys(x).length>0){console.log(" useStudentForm DEBUG - newStudent.app?.schedule?.periods:",JSON.stringify((A=(w=x==null?void 0:x.app)==null?void 0:w.schedule)==null?void 0:A.periods,null,2)),console.log(" useStudentForm DEBUG - newStudent.aeries?.schedule?.periods:",JSON.stringify((L=(k=x==null?void 0:x.aeries)==null?void 0:k.schedule)==null?void 0:L.periods,null,2)),console.log(" useStudentForm DEBUG - newStudent.schedule:",JSON.stringify(x==null?void 0:x.schedule,null,2));const G=h(x);Object.assign(v,G),console.log(" useStudentForm DEBUG - Processed form.schedule:",v.schedule)}},{immediate:!0,deep:!0}),er(()=>r.value,x=>{console.log("useStudentForm: App settings watcher triggered:",x),x!=null&&x.grades&&x.grades.length>0&&(x.grades.includes(v.grade)||(v.grade=x.grades[0]||"7"))},{immediate:!0,deep:!0});const p=(x,w)=>{const A=x.target.files[0]||null;if(A){const k=Ld(A,{allowedTypes:["pdf"],maxSize:10485760,fieldName:w==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!k.isValid){alert(k.error),x.target.value="";return}const L=sn(A.name);if(!L.isSafe){alert(`File name contains potentially dangerous content: ${L.threats.join(", ")}`),x.target.value="";return}}v[w]=A},g=x=>{x.preventDefault(),x.stopPropagation(),v.removeBipFile=!0,v.bipFile=null},y=x=>{x.preventDefault(),x.stopPropagation(),v.removeAtaglanceFile=!0,v.ataglanceFile=null},E=async(x,w)=>{if(!x)return null;const A=Gv(__,w),k=await NL(A,x);return await LL(k.ref)},S=async x=>{if(x)try{const A=new URL(x).pathname.split("/"),k=A.slice(A.indexOf("o")+1).join("/"),L=decodeURIComponent(k),G=Gv(__,L);await ML(G),console.log("File deleted successfully:",L)}catch(w){throw console.error("Error deleting file:",w),w}},I={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"},R=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],D=x=>{var A;if((A=r.value)!=null&&A.serviceProviders&&Array.isArray(r.value.serviceProviders)){const k=(r.value.serviceProvidersDetails||R).find(L=>L.abbreviation===x);if(k)return k.name+" ("+x+")"}const w=R.find(k=>k.abbreviation===x);return w?w.name+" ("+x+")":x},C=x=>{const A={SLP:"speech",OT:"ot",MH:"mh",PT:"pt",SC:"sc",TR:"tr",AUD:"aud",VI:"vi",AT:"at",DHH:"dhh","O&M":"om",BIS:"bis",HN:"hn",SW:"sw"}[x]||x.toLowerCase();return f.value[A]||[]},_=()=>{const x=jC(v),w=HC(x,{isNew:t.mode==="new"});if(!w.isValid)return alert(`Please fix the following errors:

${w.errors.join(`
`)}`),!1;const A=["firstName","lastName","instruction","assessment"];for(const k of A)if(v[k]){const L=sn(v[k]);if(!L.isSafe)return alert(`Security threat detected in ${k}: ${L.threats.join(", ")}`),!1}return Object.assign(v,x),!0};return{form:v,isSaving:a,appSettings:r,appSettingsLoading:s,appSettingsError:i,periods:o,gradeOptions:l,availableClassServices:c,serviceProviders:u,customServiceProviders:d,userRoles:f,onFileChange:p,removeBipFile:g,removeAtaglanceFile:y,providerFieldMap:I,getProviderLabel:D,getProviderUsers:C,handleSubmit:async()=>{try{if(console.log("Form submitted:",v),a.value=!0,!_()){a.value=!1;return}const x=v.services.filter(P=>P&&P.includes(":")),w={};o.value.forEach(P=>{v.schedule[P]&&(w[P]=v.schedule[P])}),console.log("Composed data:",{classServices:x,schedule:w});let A=v.bipPdfUrl||null,k=v.ataglancePdfUrl||null;if(v.removeBipFile)console.log("Removing BIP file..."),A&&(await S(A),A=null);else if(v.bipFile){console.log("Uploading BIP file...");const P=t.mode==="edit"&&t.student.id?t.student.id:"temp";A=await E(v.bipFile,`students/${P}/bip.pdf`),console.log("BIP uploaded:",A)}if(v.removeAtaglanceFile)console.log("Removing At-A-Glance file..."),k&&(await S(k),k=null);else if(v.ataglanceFile){console.log("Uploading At-A-Glance file...");const P=t.mode==="edit"&&t.student.id?t.student.id:"temp";k=await E(v.ataglanceFile,`students/${P}/ataglance.pdf`),console.log("At-A-Glance uploaded:",k)}const L={studentData:{firstName:v.firstName,lastName:v.lastName,grade:v.grade,plan:v.plan,caseManagerId:v.caseManagerId},dates:{reviewDate:v.reviewDate,reevalDate:v.reevalDate,meetingDate:v.meetingDate},schedule:{periods:w,classServices:x},providers:{speechId:v.speechId,otId:v.otId,mhId:v.mhId,ptId:v.ptId,scId:v.scId,trId:v.trId,audId:v.audId,viId:v.viId,atId:v.atId,dhhId:v.dhhId,omId:v.omId,bisId:v.bisId,hnId:v.hnId,swId:v.swId},accommodations:{instruction:v.instruction,assessment:v.assessment},flags:{flag1:v.flag1,flag2:v.flag2},documents:{ataglancePdfUrl:k,bipPdfUrl:A}};console.log("Saving payload:",L);const G={app:L,updatedAt:Mo()};if(console.log("Saving payload:",G),t.mode==="edit"&&t.student.id)console.log("Updating existing student:",t.student.id),await xr(vt(ht,"students",t.student.id),G,{merge:!0}),console.log("Student updated successfully");else{if(console.log("Adding new student"),!v.ssid||v.ssid.trim()===""){alert("SSID is required for new students");return}const P=v.ssid.trim();G.app.studentData.ssid=P;const M=vt(Gt(ht,"students"));G.createdAt=Mo(),await xr(M,G),G.id=M.id,console.log("Student added successfully with ID:",M.id,"SSID:",P)}e("saved",G),e("close")}catch(x){console.error("Error saving student:",x),alert("Error saving student. Please try again.")}finally{a.value=!1}},validateForm:_}}const x7={class:"form-col"},y7={class:"inner-grid-3"},E7={key:0,class:"ssid-field"},_7=["value"],b7=["value"],S7={__name:"StudentBasicInfo",props:{form:{type:Object,required:!0},mode:{type:String,default:"new"},gradeOptions:{type:Array,required:!0},userRoles:{type:Object,required:!0}},setup(t){return(e,r)=>(N(),U("fieldset",x7,[r[21]||(r[21]=m("legend",null,"Student Info",-1)),m("div",y7,[t.mode==="new"?(N(),U("label",E7,[r[9]||(r[9]=m("span",{class:"field-label"},"SSID (State Student ID) *",-1)),Ve(m("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.ssid=n),type:"text",required:"",placeholder:"Enter student SSID",class:"ssid-input"},null,512),[[At,t.form.ssid]]),r[10]||(r[10]=m("div",{class:"field-help"},[m("strong",null,"Required:"),Me(" This can be found in your Student Information System (SIS) such as Aeries, or in SEIS. The SSID is used to link student data across different systems. ")],-1))])):Fe("",!0),m("label",null,[r[11]||(r[11]=Me(" First Name: ")),Ve(m("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.firstName=n),type:"text",required:""},null,512),[[At,t.form.firstName]])]),m("label",null,[r[12]||(r[12]=Me(" Last Name: ")),Ve(m("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>t.form.lastName=n),type:"text",required:""},null,512),[[At,t.form.lastName]])]),m("label",null,[r[13]||(r[13]=Me(" Grade: ")),Ve(m("select",{"onUpdate:modelValue":r[3]||(r[3]=n=>t.form.grade=n)},[(N(!0),U(Oe,null,Ge(t.gradeOptions,n=>(N(),U("option",{key:n,value:n},le(n),9,_7))),128))],512),[[hr,t.form.grade]])]),m("label",null,[r[15]||(r[15]=Me(" Plan Type: ")),Ve(m("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>t.form.plan=n)},r[14]||(r[14]=[m("option",{value:"IEP"},"IEP",-1),m("option",{value:"504"},"504",-1)]),512),[[hr,t.form.plan]])]),m("label",null,[r[16]||(r[16]=Me(" Review Date: ")),Ve(m("input",{"onUpdate:modelValue":r[5]||(r[5]=n=>t.form.reviewDate=n),type:"date"},null,512),[[At,t.form.reviewDate]])]),m("label",null,[r[17]||(r[17]=Me(" Reevaluation Date: ")),Ve(m("input",{"onUpdate:modelValue":r[6]||(r[6]=n=>t.form.reevalDate=n),type:"date"},null,512),[[At,t.form.reevalDate]])]),m("label",null,[r[18]||(r[18]=Me(" Meeting Date: ")),Ve(m("input",{"onUpdate:modelValue":r[7]||(r[7]=n=>t.form.meetingDate=n),type:"date"},null,512),[[At,t.form.meetingDate]])]),m("label",null,[r[20]||(r[20]=Me(" Case Manager: ")),Ve(m("select",{"onUpdate:modelValue":r[8]||(r[8]=n=>t.form.caseManagerId=n)},[r[19]||(r[19]=m("option",{value:""},"-- Select Case Manager --",-1)),(N(!0),U(Oe,null,Ge(t.userRoles.caseManagers,n=>(N(),U("option",{key:n.id,value:n.id},le(n.name||n.email||n.id),9,b7))),128))],512),[[hr,t.form.caseManagerId]])])])]))}},T7=bt(S7,[["__scopeId","data-v-5eadce29"]]),A7={class:"form-col"},w7={class:"inner-grid-3"},C7=["onUpdate:modelValue"],I7=["value"],k7={__name:"StudentSchedule",props:{form:{type:Object,required:!0},periods:{type:Array,required:!0},userRoles:{type:Object,required:!0}},setup(t){return(e,r)=>(N(),U("fieldset",A7,[r[1]||(r[1]=m("legend",null,"Schedule",-1)),m("div",w7,[(N(!0),U(Oe,null,Ge(t.periods,n=>(N(),U("label",{key:n},[Me(le(n)+": ",1),Ve(m("select",{"onUpdate:modelValue":s=>t.form.schedule[n]=s,class:"sched"},[r[0]||(r[0]=m("option",{value:""},"--",-1)),(N(!0),U(Oe,null,Ge(t.userRoles.teachers,s=>(N(),U("option",{key:s.id,value:s.id},le(s.name||s.email||s.id),9,I7))),128))],8,C7),[[hr,t.form.schedule[n]]])]))),128))])]))}},D7=bt(k7,[["__scopeId","data-v-8be54276"]]),R7={class:"checkbox-inline-group"},F7=["value","checked","onChange"],P7={__name:"ServiceCheckboxGroup",props:["label","items","modelValue"],emits:["update:modelValue"],setup(t,{emit:e}){const r=t,n=e;function s(i){const a=r.label+": "+i,o=r.modelValue?[...r.modelValue]:[],l=o.indexOf(a);l===-1?o.push(a):o.splice(l,1),n("update:modelValue",o)}return(i,a)=>(N(),U("fieldset",null,[m("legend",null,le(t.label),1),m("div",R7,[(N(!0),U(Oe,null,Ge(t.items,o=>(N(),U("label",{key:o},[m("input",{type:"checkbox",value:t.label+": "+o,checked:t.modelValue&&t.modelValue.includes(t.label+": "+o),onChange:l=>s(o)},null,40,F7),Me(" "+le(o),1)]))),128))])]))}},O7={class:"form-col"},N7={class:"inner-grid-3"},L7={key:0,class:"loading-message"},M7={key:1,class:"error-message"},B7={key:3,class:"no-services-message"},U7={__name:"StudentClassServices",props:{form:{type:Object,required:!0},availableClassServices:{type:Array,required:!0},appSettingsLoading:{type:Boolean,default:!1},appSettingsError:{type:String,default:null}},setup(t){return(e,r)=>(N(),U("fieldset",O7,[r[4]||(r[4]=m("legend",null,"Services: classes",-1)),m("div",N7,[t.appSettingsLoading?(N(),U("div",L7,r[1]||(r[1]=[m("span",{class:"loading-spinner"},"",-1),Me(" Loading app settings... ")]))):t.appSettingsError?(N(),U("div",M7,[r[2]||(r[2]=m("span",{class:"error-icon"},"",-1)),Me(" Error loading app settings: "+le(t.appSettingsError),1)])):t.availableClassServices.length>0?(N(!0),U(Oe,{key:2},Ge(t.availableClassServices,n=>(N(),Rn(P7,{key:n.name,label:n.name,items:n.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":r[0]||(r[0]=s=>t.form.services=s)},null,8,["label","items","modelValue"]))),128)):(N(),U("div",B7,r[3]||(r[3]=[m("span",{class:"info-icon"},"",-1),Me(" No class services configured. "),m("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},V7=bt(U7,[["__scopeId","data-v-ee338537"]]),$7=["id","value"],H7=["value"],q_={__name:"ServiceSelect",props:["id","label","list","modelValue"],emits:["update:modelValue"],setup(t){return(e,r)=>(N(),U("label",null,[Me(le(t.label)+": ",1),m("select",{id:t.id,value:t.modelValue,onChange:r[0]||(r[0]=n=>e.$emit("update:modelValue",n.target.value))},[r[1]||(r[1]=m("option",{value:""},"--",-1)),(N(!0),U(Oe,null,Ge(t.list,n=>(N(),U("option",{key:n.id,value:n.id},le(n.name),9,H7))),128))],40,$7)]))}},j7={class:"inner-grid-3"},G7={key:1,class:"no-services-message"},W7={__name:"StudentProviders",props:{form:{type:Object,required:!0},serviceProviders:{type:Array,required:!0},customServiceProviders:{type:Array,required:!0},providerFieldMap:{type:Object,required:!0},getProviderLabel:{type:Function,required:!0},getProviderUsers:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),U("fieldset",null,[r[1]||(r[1]=m("legend",null,"Services: providers",-1)),m("div",j7,[t.serviceProviders.length>0?(N(),U(Oe,{key:0},[(N(!0),U(Oe,null,Ge(t.serviceProviders,n=>(N(),Rn(q_,{key:n,id:n,label:t.getProviderLabel(n),list:t.getProviderUsers(n),modelValue:t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`]=s},null,8,["id","label","list","modelValue","onUpdate:modelValue"]))),128)),(N(!0),U(Oe,null,Ge(t.customServiceProviders,n=>(N(),Rn(q_,{key:n,id:n,label:n,list:[],modelValue:t.form[`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[`${n.toLowerCase()}Id`]=s},null,8,["id","label","modelValue","onUpdate:modelValue"]))),128))],64)):(N(),U("div",G7,r[0]||(r[0]=[m("span",{class:"info-icon"},"",-1),Me(" No service providers configured. "),m("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},z7=bt(W7,[["__scopeId","data-v-faa02238"]]),K7={class:"form-col"},q7={class:"document-section"},X7={key:0,class:"current-file"},Y7=["href"],Q7={key:1,class:"removed-file"},J7={class:"document-section"},Z7={key:0,class:"current-file"},eU=["href"],tU={key:1,class:"removed-file"},rU={__name:"StudentDocuments",props:{form:{type:Object,required:!0},student:{type:Object,default:()=>({})},mode:{type:String,default:"new"},onFileChange:{type:Function,required:!0},removeBipFile:{type:Function,required:!0},removeAtaglanceFile:{type:Function,required:!0}},setup(t){return(e,r)=>(N(),U("fieldset",K7,[r[12]||(r[12]=m("legend",null,"Documents",-1)),m("div",q7,[m("label",null,[r[8]||(r[8]=Me(" BIP: ")),m("input",{type:"file",accept:"application/pdf",onChange:r[0]||(r[0]=n=>t.onFileChange(n,"bipFile"))},null,32),t.form.bipPdfUrl&&!t.form.removeBipFile?(N(),U("span",X7,[r[6]||(r[6]=Me(" Current: ")),m("a",{href:t.form.bipPdfUrl,target:"_blank"},"View BIP",8,Y7),m("button",{type:"button",onClick:r[1]||(r[1]=(...n)=>t.removeBipFile&&t.removeBipFile(...n)),class:"btn-remove"},"  Remove ")])):Fe("",!0),t.form.removeBipFile?(N(),U("span",Q7,[r[7]||(r[7]=Me(" BIP file will be removed ")),m("button",{type:"button",onClick:r[2]||(r[2]=n=>t.form.removeBipFile=!1),class:"btn-undo"},"  Undo ")])):Fe("",!0)])]),m("div",J7,[m("label",null,[r[11]||(r[11]=Me(" At-A-Glance PDF: ")),m("input",{type:"file",accept:"application/pdf",onChange:r[3]||(r[3]=n=>t.onFileChange(n,"ataglanceFile"))},null,32),t.form.ataglancePdfUrl&&!t.form.removeAtaglanceFile?(N(),U("span",Z7,[r[9]||(r[9]=Me(" Current: ")),m("a",{href:t.form.ataglancePdfUrl,target:"_blank"},"View At-A-Glance",8,eU),m("button",{type:"button",onClick:r[4]||(r[4]=(...n)=>t.removeAtaglanceFile&&t.removeAtaglanceFile(...n)),class:"btn-remove"},"  Remove ")])):Fe("",!0),t.form.removeAtaglanceFile?(N(),U("span",tU,[r[10]||(r[10]=Me(" At-A-Glance file will be removed ")),m("button",{type:"button",onClick:r[5]||(r[5]=n=>t.form.removeAtaglanceFile=!1),class:"btn-undo"},"  Undo ")])):Fe("",!0)])])]))}},nU=bt(rU,[["__scopeId","data-v-908ab954"]]),sU={class:"form-col"},aU={class:"inner-grid-2"},iU={__name:"StudentAccommodations",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(N(),U("fieldset",sU,[r[4]||(r[4]=m("legend",null,"Accommodations",-1)),m("div",aU,[m("label",null,[r[2]||(r[2]=Me(" Instruction: ")),Ve(m("textarea",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.instruction=n),placeholder:"Enter instructional accommodations..."},null,512),[[At,t.form.instruction]])]),m("label",null,[r[3]||(r[3]=Me(" Assessment: ")),Ve(m("textarea",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.assessment=n),placeholder:"Enter assessment accommodations..."},null,512),[[At,t.form.assessment]])])])]))}},oU=bt(iU,[["__scopeId","data-v-4ce4f379"]]),lU={class:"flags-container"},cU={class:"checkbox-label"},uU={class:"checkbox-label"},dU={__name:"StudentFlags",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(N(),U("fieldset",null,[r[4]||(r[4]=m("legend",null,"Flags",-1)),m("div",lU,[m("label",cU,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=n=>t.form.flag1=n)},null,512),[[Et,t.form.flag1]]),r[2]||(r[2]=Me(" Preferential seating "))]),m("label",uU,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=n=>t.form.flag2=n)},null,512),[[Et,t.form.flag2]]),r[3]||(r[3]=Me(" Separate setting "))])])]))}},fU=bt(dU,[["__scopeId","data-v-e7295a7a"]]),hU={class:"dialog-backdrop"},pU={class:"dialog"},mU=["disabled"],vU={__name:"StudentForm",props:{student:{type:Object,default:()=>({})},users:{type:Object,required:!0},mode:{type:String,default:"new"}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{form:s,isSaving:i,appSettingsLoading:a,appSettingsError:o,periods:l,gradeOptions:c,availableClassServices:u,serviceProviders:d,customServiceProviders:f,userRoles:h,onFileChange:v,removeBipFile:p,removeAtaglanceFile:g,providerFieldMap:y,getProviderLabel:E,getProviderUsers:S,handleSubmit:I}=g7(r,n);return(R,D)=>(N(),U("div",hU,[m("div",pU,[m("header",null,[m("h2",null,le(t.mode==="edit"?"Edit Student":"Add Student"),1),m("button",{onClick:D[0]||(D[0]=C=>R.$emit("close")),class:"close-btn"},"")]),m("form",{onSubmit:D[2]||(D[2]=bs((...C)=>me(I)&&me(I)(...C),["prevent"])),id:"student-form"},[nt(T7,{form:me(s),mode:t.mode,"grade-options":me(c),"user-roles":me(h)},null,8,["form","mode","grade-options","user-roles"]),nt(D7,{form:me(s),periods:me(l),"user-roles":me(h)},null,8,["form","periods","user-roles"]),nt(V7,{form:me(s),"available-class-services":me(u),"app-settings-loading":me(a),"app-settings-error":me(o)},null,8,["form","available-class-services","app-settings-loading","app-settings-error"]),nt(z7,{form:me(s),"service-providers":me(d),"custom-service-providers":me(f),"provider-field-map":me(y),"get-provider-label":me(E),"get-provider-users":me(S)},null,8,["form","service-providers","custom-service-providers","provider-field-map","get-provider-label","get-provider-users"]),nt(nU,{form:me(s),student:t.student,mode:t.mode,"on-file-change":me(v),"remove-bip-file":me(p),"remove-ataglance-file":me(g)},null,8,["form","student","mode","on-file-change","remove-bip-file","remove-ataglance-file"]),nt(oU,{form:me(s)},null,8,["form"]),nt(fU,{form:me(s)},null,8,["form"]),m("footer",null,[m("button",{type:"button",onClick:D[1]||(D[1]=C=>R.$emit("close")),class:"btn btn-secondary"}," Cancel "),m("button",{type:"submit",class:"btn btn-primary",disabled:me(i)},le(me(i)?"Saving...":t.mode==="edit"?"Save":"Add Student"),9,mU)])],32)])]))}},GC=bt(vU,[["__scopeId","data-v-91d73a2e"]]),gU={key:0},xU={key:1,class:"loading-dialog"},yU={__name:"StudentEditDialog",props:{studentId:{type:String,required:!0},users:{type:Object,required:!0}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{students:s,fetchStudents:i}=Ca(),a=Ae(()=>{const l=s.value.find(c=>c.id===r.studentId);return console.log("StudentEditDialog - studentId:",r.studentId),console.log("StudentEditDialog - all students:",s.value),console.log("StudentEditDialog - found student:",l),l||{}});Jt(async()=>{s.value.length===0&&(console.log("StudentEditDialog - fetching students..."),await i())});function o(l){console.log("StudentEditDialog - student saved:",l),n("saved",l)}return(l,c)=>a.value&&Object.keys(a.value).length>0?(N(),U("div",gU,[nt(GC,{student:a.value,users:t.users,mode:"edit",onClose:c[0]||(c[0]=u=>l.$emit("close")),onSaved:o},null,8,["student","users"])])):(N(),U("div",xU,c[1]||(c[1]=[m("div",{class:"dialog"},[m("header",null,[m("h2",null,"Loading Student Data...")]),m("div",{class:"content"},[m("p",null,"Please wait while we load the student information.")])],-1)])))}},EU=bt(yU,[["__scopeId","data-v-0410ea60"]]),_U={class:"dialog-backdrop"},bU={class:"dialog"},SU={class:"button-group"},TU={key:0,class:"members-list"},AU={key:0,class:"email"},wU=["value"],CU={class:"docs-option"},IU={key:0,class:"no-docs"},kU=["disabled"],DU=["disabled"],RU={__name:"StudentsEmailDialog",props:{student:{type:Object,required:!0},userMap:{type:Object,required:!0}},emits:["close"],setup(t){const e=t,{student:r,userMap:n}=e,s=pe(""),i=pe([]),a=pe(!1),o=Ae(()=>{var y,E;if((E=(y=r.app)==null?void 0:y.schedule)!=null&&E.periods)return Object.values(r.app.schedule.periods).filter(Boolean);const g=r.schedule||{};return Object.values(g).filter(Boolean)}),l=Ae(()=>[...new Set(o.value)]),c=Ae(()=>{var y;const g=[];(y=r.app)!=null&&y.providers&&Object.entries(r.app.providers).forEach(([E,S])=>{S&&!["caseManagerId"].includes(E)&&g.push(S)});for(const E in r)E.endsWith("_id")&&!["casemanager_id","caseManagerId"].includes(E)&&r[E]&&g.push(r[E]);return[...new Set(g)].filter(E=>!l.value.includes(E))}),u=Ae(()=>l.value.map(g=>({id:g,...n[g]||{}})).filter(g=>g&&g.email)),d=Ae(()=>c.value.map(g=>({id:g,...n[g]||{}})).filter(g=>g&&g.email)),f=Ae(()=>[...u.value,...d.value]),h=Ae(()=>{var g,y,E,S;return!!((y=(g=r.app)==null?void 0:g.documents)!=null&&y.ataglancePdfUrl||(S=(E=r.app)==null?void 0:E.documents)!=null&&S.bipPdfUrl||r.ataglancePdfUrl||r.ataglance_pdf_url||r.bipPdfUrl||r.bip_pdf_url)}),v=Ae(()=>s.value?s.value==="Individual"?i.value.length>0:!0:!1);function p(){var D,C,_,b,x,w,A,k;let g=[];s.value==="Teachers"?g=u.value:s.value==="TeachersAndService"?g=[...u.value,...d.value]:s.value==="Individual"&&(g=f.value.filter(L=>i.value.includes(L.id)));const y=g.map(L=>L.email).filter(Boolean).join(",");if(!y){alert("No email addresses found for the selected recipients.");return}const S=`${((((D=r.firstName)==null?void 0:D[0])||((C=r.first_name)==null?void 0:C[0])||"")+(((_=r.lastName)==null?void 0:_[0])||((b=r.last_name)==null?void 0:b[0])||"")).toUpperCase()} - Student Update`;let I="";if(a.value){I+=`Hi team!

Below are links to ${r.firstName||r.first_name||""} ${r.lastName||r.last_name||""}'s updated documents:

`;const L=((w=(x=r.app)==null?void 0:x.documents)==null?void 0:w.ataglancePdfUrl)||r.ataglancePdfUrl||r.ataglance_pdf_url,G=((k=(A=r.app)==null?void 0:A.documents)==null?void 0:k.bipPdfUrl)||r.bipPdfUrl||r.bip_pdf_url;L&&(I+=`At-A-Glance: ${L}
`),G&&(I+=`BIP:         ${G}
`)}else I="See attached.";const R=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(y)}&su=${encodeURIComponent(S)}&body=${encodeURIComponent(I)}`;window.open(R,"_blank","noopener")}return(g,y)=>(N(),U("div",_U,[m("div",bU,[m("header",null,[m("h2",null,"Email about "+le(me(r).firstName||me(r).first_name)+" "+le(me(r).lastName||me(r).last_name),1),m("button",{onClick:y[0]||(y[0]=E=>g.$emit("close")),title:"Close"},"")]),m("main",null,[m("form",{onSubmit:y[6]||(y[6]=bs(()=>{},["prevent"]))},[m("div",SU,[m("button",{type:"button",class:ot(["option-button",{active:s.value==="Teachers"}]),onClick:y[1]||(y[1]=E=>s.value="Teachers")}," Teachers ",2),m("button",{type:"button",class:ot(["option-button",{active:s.value==="TeachersAndService"}]),onClick:y[2]||(y[2]=E=>s.value="TeachersAndService")}," Teachers and service providers ",2),m("button",{type:"button",class:ot(["option-button",{active:s.value==="Individual"}]),onClick:y[3]||(y[3]=E=>s.value="Individual")}," Individual member of the IEP team ",2)]),s.value==="Individual"?(N(),U("div",TU,[y[8]||(y[8]=m("div",null,"Select members:",-1)),(N(!0),U(Oe,null,Ge(f.value,E=>(N(),U("div",{key:E.id},[m("label",null,[m("span",null,[Me(le(E.name||E.displayName||E.email||E.id)+" ",1),E.email?(N(),U("span",AU,"("+le(E.email)+")",1)):Fe("",!0)]),Ve(m("input",{type:"checkbox",value:E.id,"onUpdate:modelValue":y[4]||(y[4]=S=>i.value=S)},null,8,wU),[[Et,i.value]])])]))),128))])):Fe("",!0),m("div",CU,[m("label",null,[m("span",null,[y[9]||(y[9]=Me(" Include documents ")),h.value?Fe("",!0):(N(),U("span",IU,"(No docs available)"))]),Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[5]||(y[5]=E=>a.value=E),disabled:!h.value},null,8,kU),[[Et,a.value]])])])],32)]),m("footer",null,[m("button",{onClick:y[7]||(y[7]=E=>g.$emit("close"))},"Cancel"),m("button",{disabled:!v.value,onClick:p},"Send",8,DU)])])]))}},FU=bt(RU,[["__scopeId","data-v-51cfe126"]]),PU={class:"dialog-backdrop"},OU={class:"dialog"},NU={class:"field-groups"},LU={class:"field-group"},MU={class:"field-group"},BU={class:"field-group"},UU={class:"field-group"},VU={class:"field-group"},$U={class:"field-group"},HU=["disabled"],jU={__name:"ExportDialog",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})}},emits:["close"],setup(t,{emit:e}){const r=t,n=e,s=li(),i=X1(),a=pe({studentData:{firstName:!0,lastName:!0,grade:!0,plan:!0,caseManagerId:!0},dates:{reviewDate:!0,reevalDate:!0,meetingDate:!0},providers:{all:!0},accommodations:{instruction:!0,assessment:!0},schedule:{periods:!0,classServices:!0},documents:{ataglancePdfUrl:!0,bipPdfUrl:!0}}),o=["speechId","otId","mhId","ptId","scId","trId","audId","viId","atId","dhhId","omId","bisId","hnId","swId"],l=Ae(()=>Object.values(a.value).some(g=>Object.values(g).some(y=>y)));function c(g){if(!g||!r.userMap[g])return"";const y=r.userMap[g];return y.name||y.email||""}function u(g){const y=i.userPermissions||[];return Array.isArray(y)&&y.includes(g)}function d(){Object.keys(a.value).forEach(g=>{Object.keys(a.value[g]).forEach(y=>{a.value[g][y]=!0})})}function f(){Object.keys(a.value).forEach(g=>{Object.keys(a.value[g]).forEach(y=>{a.value[g][y]=!1})})}function h(g){var I,R,D,C,_,b,x,w,A,k,L,G,P,M,H,B,Q,j,O,W,K,se,ve,ie,de,ee,Y,ge,q,z,J,he;const y=s.currentUser;if((y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="administrator"||(y==null?void 0:y.role)==="sped_chair"||(y==null?void 0:y.role)==="administrator_504_CM")return v(g);const S={};return a.value.studentData.firstName&&(S.firstName=(R=(I=g.app)==null?void 0:I.studentData)==null?void 0:R.firstName),a.value.studentData.lastName&&(S.lastName=(C=(D=g.app)==null?void 0:D.studentData)==null?void 0:C.lastName),a.value.studentData.grade&&(S.grade=(b=(_=g.app)==null?void 0:_.studentData)==null?void 0:b.grade),a.value.studentData.plan&&(S.plan=(w=(x=g.app)==null?void 0:x.studentData)==null?void 0:w.plan),a.value.studentData.caseManagerId&&(S.caseManagerId=(k=(A=g.app)==null?void 0:A.studentData)==null?void 0:k.caseManagerId),u("view_student_dates")&&(a.value.dates.reviewDate&&(S.reviewDate=(G=(L=g.app)==null?void 0:L.dates)==null?void 0:G.reviewDate),a.value.dates.reevalDate&&(S.reevalDate=(M=(P=g.app)==null?void 0:P.dates)==null?void 0:M.reevalDate),a.value.dates.meetingDate&&(S.meetingDate=(B=(H=g.app)==null?void 0:H.dates)==null?void 0:B.meetingDate)),(u("view_service_providers")||((j=(Q=g.app)==null?void 0:Q.studentData)==null?void 0:j.caseManagerId)===(y==null?void 0:y.uid)||o.some(re=>{var X,te;return((te=(X=g.app)==null?void 0:X.providers)==null?void 0:te[re])===(y==null?void 0:y.uid)}))&&a.value.providers.all&&o.forEach(re=>{var X,te;S[re]=(te=(X=g.app)==null?void 0:X.providers)==null?void 0:te[re]}),u("view_accommodations")&&(a.value.accommodations.instruction&&(S.instruction=(W=(O=g.app)==null?void 0:O.accommodations)==null?void 0:W.instruction),a.value.accommodations.assessment&&(S.assessment=(se=(K=g.app)==null?void 0:K.accommodations)==null?void 0:se.assessment)),(u("view_schedule")||Object.values(((ie=(ve=g.app)==null?void 0:ve.schedule)==null?void 0:ie.periods)||{}).includes(y==null?void 0:y.uid))&&(a.value.schedule.periods&&(S.schedule=(ee=(de=g.app)==null?void 0:de.schedule)==null?void 0:ee.periods),a.value.schedule.classServices&&(S.classServices=(ge=(Y=g.app)==null?void 0:Y.schedule)==null?void 0:ge.classServices)),u("view_documents")&&(a.value.documents.ataglancePdfUrl&&(S.ataglancePdfUrl=(z=(q=g.app)==null?void 0:q.documents)==null?void 0:z.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(S.bipPdfUrl=(he=(J=g.app)==null?void 0:J.documents)==null?void 0:he.bipPdfUrl)),S}function v(g){var E,S,I,R,D,C,_,b,x,w,A,k,L,G,P,M,H,B,Q,j,O,W,K,se,ve,ie,de,ee;const y={};return a.value.studentData.firstName&&(y.firstName=(S=(E=g.app)==null?void 0:E.studentData)==null?void 0:S.firstName),a.value.studentData.lastName&&(y.lastName=(R=(I=g.app)==null?void 0:I.studentData)==null?void 0:R.lastName),a.value.studentData.grade&&(y.grade=(C=(D=g.app)==null?void 0:D.studentData)==null?void 0:C.grade),a.value.studentData.plan&&(y.plan=(b=(_=g.app)==null?void 0:_.studentData)==null?void 0:b.plan),a.value.studentData.caseManagerId&&(y.caseManagerId=(w=(x=g.app)==null?void 0:x.studentData)==null?void 0:w.caseManagerId),a.value.dates.reviewDate&&(y.reviewDate=(k=(A=g.app)==null?void 0:A.dates)==null?void 0:k.reviewDate),a.value.dates.reevalDate&&(y.reevalDate=(G=(L=g.app)==null?void 0:L.dates)==null?void 0:G.reevalDate),a.value.dates.meetingDate&&(y.meetingDate=(M=(P=g.app)==null?void 0:P.dates)==null?void 0:M.meetingDate),a.value.providers.all&&o.forEach(Y=>{var ge,q;y[Y]=(q=(ge=g.app)==null?void 0:ge.providers)==null?void 0:q[Y]}),a.value.accommodations.instruction&&(y.instruction=(B=(H=g.app)==null?void 0:H.accommodations)==null?void 0:B.instruction),a.value.accommodations.assessment&&(y.assessment=(j=(Q=g.app)==null?void 0:Q.accommodations)==null?void 0:j.assessment),a.value.schedule.periods&&(y.schedule=(W=(O=g.app)==null?void 0:O.schedule)==null?void 0:W.periods),a.value.schedule.classServices&&(y.classServices=(se=(K=g.app)==null?void 0:K.schedule)==null?void 0:se.classServices),a.value.documents.ataglancePdfUrl&&(y.ataglancePdfUrl=(ie=(ve=g.app)==null?void 0:ve.documents)==null?void 0:ie.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(y.bipPdfUrl=(ee=(de=g.app)==null?void 0:de.documents)==null?void 0:ee.bipPdfUrl),y}function p(){const g=r.students.map(_=>h(_)),y=[],E=[],S={firstName:"First Name",lastName:"Last Name",grade:"Grade",plan:"Plan Type",caseManagerId:"Case Manager",reviewDate:"Plan Review",reevalDate:"Reevaluation",meetingDate:"Meeting Date",speechId:"Speech",otId:"OT",mhId:"Mental Health",ptId:"PT",scId:"SC",trId:"TR",audId:"Audiology",viId:"Vision",atId:"AT",dhhId:"DHH",omId:"O&M",bisId:"BIS",hnId:"HN",swId:"SW",instruction:"Instructional Accommodation",assessment:"Assessment Accommodations",schedule:"Schedule",classServices:"Class Services",ataglancePdfUrl:"At-A-Glance",bipPdfUrl:"BIP"};Object.entries(a.value).forEach(([_,b])=>{Object.entries(b).forEach(([x,w])=>{w&&(x==="all"?o.forEach(A=>{y.push(S[A])}):y.push(S[x]))})}),g.forEach(_=>{const b=[];Object.entries(a.value).forEach(([x,w])=>{Object.entries(w).forEach(([A,k])=>{if(k)if(A==="all")o.forEach(L=>{const G=_[L]||"";b.push(G?c(G):"")});else{let L=_[A]||"";A.endsWith("Id")?L=L?c(L):"":A==="classServices"?L=Array.isArray(_.classServices)?_.classServices.join(", "):"":A==="schedule"&&(L=_.schedule?Object.entries(_.schedule).map(([G,P])=>`${G}: ${c(P)}`).join("; "):""),b.push(L)}})}),E.push(b)});const I=[y.join(","),...E.map(_=>_.map(b=>`"${String(b).replace(/"/g,'""')}"`).join(","))].join(`
`),R=new Blob([I],{type:"text/csv"}),D=window.URL.createObjectURL(R),C=document.createElement("a");C.href=D,C.download="students-export.csv",C.click(),window.URL.revokeObjectURL(D),n("close")}return(g,y)=>(N(),U("div",PU,[m("div",OU,[m("header",null,[y[17]||(y[17]=m("h2",null,"Export Students",-1)),m("button",{onClick:y[0]||(y[0]=E=>g.$emit("close")),class:"close-btn"},"")]),m("main",null,[m("p",null,"Export "+le(t.students.length)+" students",1),m("div",NU,[m("div",LU,[y[23]||(y[23]=m("h4",null,"Student Info",-1)),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[1]||(y[1]=E=>a.value.studentData.firstName=E)},null,512),[[Et,a.value.studentData.firstName]]),y[18]||(y[18]=Me(" First Name "))]),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[2]||(y[2]=E=>a.value.studentData.lastName=E)},null,512),[[Et,a.value.studentData.lastName]]),y[19]||(y[19]=Me(" Last Name "))]),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[3]||(y[3]=E=>a.value.studentData.grade=E)},null,512),[[Et,a.value.studentData.grade]]),y[20]||(y[20]=Me(" Grade "))]),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[4]||(y[4]=E=>a.value.studentData.plan=E)},null,512),[[Et,a.value.studentData.plan]]),y[21]||(y[21]=Me(" Plan Type "))]),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[5]||(y[5]=E=>a.value.studentData.caseManagerId=E)},null,512),[[Et,a.value.studentData.caseManagerId]]),y[22]||(y[22]=Me(" Case Manager "))])]),m("div",MU,[y[27]||(y[27]=m("h4",null,"Important Dates",-1)),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[6]||(y[6]=E=>a.value.dates.reviewDate=E)},null,512),[[Et,a.value.dates.reviewDate]]),y[24]||(y[24]=Me(" Plan Review "))]),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[7]||(y[7]=E=>a.value.dates.reevalDate=E)},null,512),[[Et,a.value.dates.reevalDate]]),y[25]||(y[25]=Me(" Reevaluation "))]),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[8]||(y[8]=E=>a.value.dates.meetingDate=E)},null,512),[[Et,a.value.dates.meetingDate]]),y[26]||(y[26]=Me(" Meeting Date "))])]),m("div",BU,[y[29]||(y[29]=m("h4",null,"Related Services",-1)),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[9]||(y[9]=E=>a.value.providers.all=E)},null,512),[[Et,a.value.providers.all]]),y[28]||(y[28]=Me(" All Service Providers "))])]),m("div",UU,[y[32]||(y[32]=m("h4",null,"Accommodations",-1)),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[10]||(y[10]=E=>a.value.accommodations.instruction=E)},null,512),[[Et,a.value.accommodations.instruction]]),y[30]||(y[30]=Me(" Instructional "))]),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[11]||(y[11]=E=>a.value.accommodations.assessment=E)},null,512),[[Et,a.value.accommodations.assessment]]),y[31]||(y[31]=Me(" Assessment "))])]),m("div",VU,[y[35]||(y[35]=m("h4",null,"Schedule & Services",-1)),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[12]||(y[12]=E=>a.value.schedule.periods=E)},null,512),[[Et,a.value.schedule.periods]]),y[33]||(y[33]=Me(" Class Schedule "))]),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[13]||(y[13]=E=>a.value.schedule.classServices=E)},null,512),[[Et,a.value.schedule.classServices]]),y[34]||(y[34]=Me(" Class Services "))])]),m("div",$U,[y[38]||(y[38]=m("h4",null,"Documents",-1)),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[14]||(y[14]=E=>a.value.documents.ataglancePdfUrl=E)},null,512),[[Et,a.value.documents.ataglancePdfUrl]]),y[36]||(y[36]=Me(" At-A-Glance "))]),m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":y[15]||(y[15]=E=>a.value.documents.bipPdfUrl=E)},null,512),[[Et,a.value.documents.bipPdfUrl]]),y[37]||(y[37]=Me(" BIP "))])])]),m("div",{class:"quick-select"},[m("button",{onClick:d},"Select All"),m("button",{onClick:f},"Deselect All")])]),m("footer",null,[m("button",{onClick:y[16]||(y[16]=E=>g.$emit("close")),class:"btn-secondary"},"Cancel"),m("button",{onClick:p,class:"btn-primary",disabled:!l.value},"Export",8,HU)])])]))}},GU=bt(jU,[["__scopeId","data-v-9cb02217"]]),WU={class:"modal-body"},zU={class:"student-info"},KU={class:"case-manager-info"},qU={class:"form-group"},XU={key:0,class:"no-forms-message"},YU={key:1,class:"form-selection"},QU=["id","value"],JU=["for"],ZU={class:"form-title"},eV={class:"form-details"},tV={key:0,class:"form-description"},rV={class:"form-date"},nV={key:0,class:"form-group"},sV={class:"teacher-selection"},aV={key:0,class:"no-teachers-message"},iV={key:1,class:"teacher-checkboxes"},oV=["id","value"],lV=["for"],cV={class:"teacher-email"},uV={key:1,class:"form-group"},dV={class:"send-options"},fV={class:"option-item"},hV={class:"option-item"},pV={class:"modal-footer"},mV=["disabled"],vV={key:0},gV={key:1},xV={__name:"TeacherFeedbackDialog",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!0}},emits:["close","form-sent"],setup(t,{emit:e}){const r=t,n=e,{activeForms:s,sendFeedbackForm:i}=Z1(),{users:a}=Ia(),o=pe(""),l=pe([]),c=pe("copy"),u=pe(""),d=pe("success"),f=pe(!1),h=Ae(()=>s.value||[]),v=Ae(()=>{var D,C,_;if(!r.student||!a.value)return[];const R=new Set;return(C=(D=r.student.app)==null?void 0:D.schedule)!=null&&C.periods&&Object.values(r.student.app.schedule.periods).forEach(b=>{b&&R.add(b)}),(_=r.student.aeries)!=null&&_.schedule&&Object.values(r.student.aeries.schedule).forEach(b=>{b!=null&&b.teacherId&&R.add(b.teacherId)}),Array.from(R).map(b=>a.value.find(x=>x.id===b)).filter(Boolean).filter(b=>b.role==="teacher")}),p=Ae(()=>h.value.find(R=>R.id===o.value)),g=Ae(()=>o.value&&l.value.length>0&&c.value),y=R=>R?(R.seconds?new Date(R.seconds*1e3):new Date(R)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",E=async()=>{if(g.value)try{f.value=!0,u.value="";const R=p.value,D=l.value.map(_=>_.email),C=l.value.map(_=>_.name||_.email).join(", ");if(c.value==="copy")await navigator.clipboard.writeText(R.formUrl),u.value=`Form link copied to clipboard! Send to: ${C}`,d.value="success",S(R,l.value);else if(c.value==="email"){try{const _=await i({formUrl:R.formUrl,studentId:r.student.id,teacherEmails:D,formTitle:R.title,customMessage:null});if(_.success)u.value=`Successfully sent to ${_.sent} teachers`,_.failed>0&&(u.value+=` (${_.failed} failed)`),d.value="success";else throw new Error("Failed to send emails")}catch(_){console.error("Email sending failed:",_),u.value="Failed to send emails. Generating mailto link instead.",d.value="error";const b=`Teacher Feedback Request - ${r.student.firstName} ${r.student.lastName}`,x=`Dear Teachers,

I am requesting your feedback for ${r.student.firstName} ${r.student.lastName} (Grade ${r.student.grade}).

Please complete the following feedback form:
${R.formUrl}

Form: ${R.title}

Thank you for your time and feedback.

Best regards,
${r.currentUser.name||r.currentUser.email}
Case Manager`,w=`mailto:${D.join(",")}?subject=${encodeURIComponent(b)}&body=${encodeURIComponent(x)}`;window.open(w,"_blank"),u.value=`Email client opened for: ${C}`,d.value="success"}S(R,l.value)}n("form-sent",{form:R,student:r.student,teachers:l.value,method:c.value})}catch(R){console.error("Error sending form:",R),u.value="Failed to send form. Please try again.",d.value="error"}finally{f.value=!1}},S=(R,D)=>{const C=JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]"),_={id:`${R.id}_${r.student.id}_${Date.now()}`,formId:R.id,formTitle:R.title,formUrl:R.formUrl,studentId:r.student.id,studentName:`${r.student.firstName} ${r.student.lastName}`,caseManagerId:r.currentUser.uid,caseManagerName:r.currentUser.name||r.currentUser.email,teachers:D.map(b=>({id:b.id,name:b.name,email:b.email})),sentAt:new Date().toISOString(),method:c.value};C.push(_),localStorage.setItem("casemanage_sent_forms",JSON.stringify(C))},I=()=>{n("close")};return Jt(()=>{o.value="",l.value=[],c.value="copy",u.value=""}),(R,D)=>{var C,_;return N(),U("div",{class:"modal-overlay",onClick:I},[m("div",{class:"modal-content",onClick:D[4]||(D[4]=bs(()=>{},["stop"]))},[m("div",{class:"modal-header"},[D[5]||(D[5]=m("h3",null,"Send Teacher Feedback Form",-1)),m("button",{onClick:I,class:"close-btn"},"")]),m("div",WU,[m("div",zU,[m("h4",null,le(t.student.firstName)+" "+le(t.student.lastName)+" (Grade "+le(t.student.grade)+")",1),m("p",KU,"Case Manager: "+le(((C=t.currentUser)==null?void 0:C.name)||((_=t.currentUser)==null?void 0:_.email)),1)]),m("div",qU,[D[7]||(D[7]=m("label",null,"Select Feedback Form to Send:",-1)),h.value.length===0?(N(),U("div",XU,D[6]||(D[6]=[m("p",null,"No feedback forms available. Forms must be created in the Admin Panel first.",-1),m("p",null,[m("em",null,"Contact your administrator to create feedback forms.")],-1)]))):(N(),U("div",YU,[(N(!0),U(Oe,null,Ge(h.value,b=>(N(),U("div",{key:b.id,class:"form-option"},[Ve(m("input",{type:"radio",id:b.id,value:b.id,"onUpdate:modelValue":D[0]||(D[0]=x=>o.value=x)},null,8,QU),[[cs,o.value]]),m("label",{for:b.id,class:"form-option-label"},[m("div",ZU,le(b.title),1),m("div",eV,[b.description?(N(),U("span",tV,le(b.description),1)):Fe("",!0),m("span",rV,"Created: "+le(y(b.createdAt)),1)])],8,JU)]))),128))]))]),o.value?(N(),U("div",nV,[D[9]||(D[9]=m("label",null,"Select Teachers to Send Form To:",-1)),m("div",sV,[v.value.length===0?(N(),U("div",aV,D[8]||(D[8]=[m("p",null,"No teachers found for this student's schedule.",-1)]))):(N(),U("div",iV,[(N(!0),U(Oe,null,Ge(v.value,b=>(N(),U("div",{key:b.id,class:"checkbox-item"},[Ve(m("input",{type:"checkbox",id:`teacher-${b.id}`,value:b,"onUpdate:modelValue":D[1]||(D[1]=x=>l.value=x)},null,8,oV),[[Et,l.value]]),m("label",{for:`teacher-${b.id}`},[Me(le(b.name||b.email)+" ",1),m("span",cV,"("+le(b.email)+")",1)],8,lV)]))),128))]))])])):Fe("",!0),o.value&&l.value.length>0?(N(),U("div",uV,[D[12]||(D[12]=m("label",null,"Send Method:",-1)),m("div",dV,[m("div",fV,[Ve(m("input",{type:"radio",id:"copy-link",value:"copy","onUpdate:modelValue":D[2]||(D[2]=b=>c.value=b)},null,512),[[cs,c.value]]),D[10]||(D[10]=m("label",{for:"copy-link"},"Copy form link to clipboard",-1))]),m("div",hV,[Ve(m("input",{type:"radio",id:"email-link",value:"email","onUpdate:modelValue":D[3]||(D[3]=b=>c.value=b)},null,512),[[cs,c.value]]),D[11]||(D[11]=m("label",{for:"email-link"},"Generate email with form link",-1))])])])):Fe("",!0),u.value?(N(),U("div",{key:2,class:ot(["status-message",d.value])},le(u.value),3)):Fe("",!0)]),m("div",pV,[m("button",{onClick:I,class:"secondary-btn"},"Cancel"),m("button",{onClick:E,class:"primary-btn",disabled:!g.value||f.value},[f.value?(N(),U("span",vV,"Sending...")):(N(),U("span",gV,le(c.value==="copy"?"Copy Link":"Generate Email"),1))],8,mV)])])])}}},yV=bt(xV,[["__scopeId","data-v-bf0569a5"]]),EV={class:"students-view"},_V={class:"page-header"},bV={class:"header-left"},SV={class:"search-container"},TV={class:"header-controls"},AV={class:"filter-group"},wV={key:1,class:"filter-group"},CV={class:"radio-group"},IV=["value"],kV={class:"filter-group"},DV={class:"radio-group"},RV=["disabled"],FV={key:0,class:"filters-panel"},PV={class:"filters-content"},OV={class:"filter-group"},NV=["value"],LV={class:"filter-group"},MV=["value"],BV={class:"filter-group"},UV=["value"],VV={class:"filter-group"},$V={class:"content"},HV={key:0},jV={key:1,class:"view-container"},GV={key:0,class:"group-section"},WV={class:"group-header"},zV={key:2,class:"view-section"},KV={__name:"StudentsView",setup(t){const e=J9(),r=Z9(e),n=aB(e,r),s=oB(e),{students:i,userMapObj:a,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:u,paraeducators:d,currentUser:f,isAdmin:h,showProviderView:v,getStudentById:p}=e,{showFilters:g,filteredStudents:y,currentFilters:E,toggleFilters:S,clearFilters:I,applyFilters:R,debouncedApplyFilters:D}=r,{visibleStudents:C,canEditAllStudents:_,canEditOwnStudents:b,canViewAllStudents:x,canAccessTesting:w,canAccessTestingPartial:A,canAccessFilters:k,isClassViewDisabled:L,providerViewOptions:G}=n,P=iB(e,r,Ae(()=>n.visibleStudents.value)),{currentViewMode:M,studentsByClass:H,directAssignmentStudents:B,testingViewStudents:Q}=P,{editingStudentId:j,emailingStudentId:O,showExport:W,showAddStudent:K,showFeedbackDialog:se,feedbackStudentId:ve,editStudent:ie,emailStudent:de,handleTeacherFeedback:ee,handleFormSent:Y,handleStudentAdded:ge,handleStudentSaved:q,handleNavAction:z}=s,J=Ae(()=>{var re;return G!=null&&G.value?G.value:((re=f.value)==null?void 0:re.role)==="case_manager"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]});return(he,re)=>{var X,te,Se;return N(),U("div",EV,[nt(TB,{"current-user":me(f),"is-admin":me(h),onAction:me(z)},null,8,["current-user","is-admin","onAction"]),m("div",_V,[m("div",bV,[re[27]||(re[27]=m("h1",null,"Student Management",-1)),m("div",SV,[Ve(m("input",{type:"text","onUpdate:modelValue":re[0]||(re[0]=Ee=>me(E).search=Ee),onInput:re[1]||(re[1]=(...Ee)=>me(D)&&me(D)(...Ee)),placeholder:"Search students...",class:"search-input"},null,544),[[At,me(E).search]])])]),m("div",TV,[me(k)?(N(),U("button",{key:0,onClick:re[2]||(re[2]=(...Ee)=>me(S)&&me(S)(...Ee)),class:ot(["filter-toggle-btn",{active:me(g)}])},re[28]||(re[28]=[m("span",null,"",-1),Me(" Filters ")]),2)):Fe("",!0),m("div",AV,[Ve(m("select",{"onUpdate:modelValue":re[3]||(re[3]=Ee=>me(E).sortBy=Ee),onChange:re[4]||(re[4]=Ee=>me(R)()),class:"sort-select"},re[29]||(re[29]=[Xn('<option value="firstName" data-v-714377c8>First Name</option><option value="lastName" data-v-714377c8>Last Name</option><option value="grade" data-v-714377c8>Grade</option><option value="reviewDate" data-v-714377c8>Review Date</option><option value="reevalDate" data-v-714377c8>Re-evaluation Date</option><option value="meetingDate" data-v-714377c8>Meeting Date</option>',6)]),544),[[hr,me(E).sortBy]])]),me(v)?(N(),U("div",wV,[m("div",CV,[(N(!0),U(Oe,null,Ge(J.value,Ee=>(N(),U("label",{key:Ee.value,class:ot(["radio-btn",{active:me(E).providerView===Ee.value}])},[Ve(m("input",{type:"radio","onUpdate:modelValue":re[5]||(re[5]=be=>me(E).providerView=be),value:Ee.value,onChange:re[6]||(re[6]=(...be)=>me(R)&&me(R)(...be))},null,40,IV),[[cs,me(E).providerView]]),Me(" "+le(Ee.label),1)],2))),128))])])):Fe("",!0),m("div",kV,[m("div",DV,[m("label",{class:ot(["radio-btn",{active:me(E).viewMode==="list"}])},[Ve(m("input",{type:"radio","onUpdate:modelValue":re[7]||(re[7]=Ee=>me(E).viewMode=Ee),value:"list",onChange:re[8]||(re[8]=Ee=>me(R)())},null,544),[[cs,me(E).viewMode]]),re[30]||(re[30]=Me(" List "))],2),m("label",{class:ot(["radio-btn",{active:me(E).viewMode==="class",disabled:me(L)}])},[Ve(m("input",{type:"radio","onUpdate:modelValue":re[9]||(re[9]=Ee=>me(E).viewMode=Ee),value:"class",onChange:re[10]||(re[10]=Ee=>me(R)()),disabled:me(L)},null,40,RV),[[cs,me(E).viewMode]]),m("span",{class:ot({strikethrough:me(L)})},"Class",2)],2),me(w)?(N(),U("label",{key:0,class:ot(["radio-btn",{active:me(E).viewMode==="testing"}])},[Ve(m("input",{type:"radio","onUpdate:modelValue":re[11]||(re[11]=Ee=>me(E).viewMode=Ee),value:"testing",onChange:re[12]||(re[12]=Ee=>me(R)())},null,544),[[cs,me(E).viewMode]]),re[31]||(re[31]=Me(" Test "))],2)):Fe("",!0)])]),m("button",{onClick:re[13]||(re[13]=(...Ee)=>me(I)&&me(I)(...Ee)),class:"reset-btn",title:"Reset all filters"},"  ")])]),me(g)?(N(),U("div",FV,[m("div",PV,[m("div",OV,[re[33]||(re[33]=m("label",null,"Case Manager",-1)),Ve(m("select",{"onUpdate:modelValue":re[14]||(re[14]=Ee=>me(E).cm=Ee),onChange:re[15]||(re[15]=Ee=>me(R)()),class:"filter-select"},[re[32]||(re[32]=m("option",{value:"all"},"All Case Managers",-1)),(N(!0),U(Oe,null,Ge(me(o),Ee=>(N(),U("option",{key:Ee.id,value:Ee.id},le(Ee.name||Ee.email||Ee.id),9,NV))),128))],544),[[hr,me(E).cm]])]),m("div",LV,[re[35]||(re[35]=m("label",null,"Teacher",-1)),Ve(m("select",{"onUpdate:modelValue":re[16]||(re[16]=Ee=>me(E).teacher=Ee),onChange:re[17]||(re[17]=Ee=>me(R)()),class:"filter-select"},[re[34]||(re[34]=m("option",{value:"all"},"All Teachers",-1)),(N(!0),U(Oe,null,Ge(me(l),Ee=>(N(),U("option",{key:Ee.id,value:Ee.id},le(Ee.name||Ee.email||Ee.id),9,MV))),128))],544),[[hr,me(E).teacher]])]),m("div",BV,[re[37]||(re[37]=m("label",null,"Paraeducator",-1)),Ve(m("select",{"onUpdate:modelValue":re[18]||(re[18]=Ee=>me(E).paraeducator=Ee),onChange:re[19]||(re[19]=Ee=>me(R)()),class:"filter-select"},[re[36]||(re[36]=m("option",{value:"all"},"All Paraeducators",-1)),(N(!0),U(Oe,null,Ge(me(d),Ee=>(N(),U("option",{key:Ee.id,value:Ee.id},le(Ee.name||Ee.email||Ee.id),9,UV))),128))],544),[[hr,me(E).paraeducator]])]),m("div",VV,[re[39]||(re[39]=m("label",null,"Plan Type",-1)),Ve(m("select",{"onUpdate:modelValue":re[20]||(re[20]=Ee=>me(E).plan=Ee),onChange:re[21]||(re[21]=Ee=>me(R)()),class:"filter-select"},re[38]||(re[38]=[m("option",{value:"all"},"All Plans",-1),m("option",{value:"IEP"},"IEP",-1),m("option",{value:"504"},"504",-1)]),544),[[hr,me(E).plan]])])])])):Fe("",!0),m("div",$V,[me(M)==="list"?(N(),U("div",HV,[nt(Ef,{students:me(C),"user-map":me(a),"current-user":me(f),"can-edit-all":me(_),"can-edit-own":me(b),"can-view-all":me(x),"can-access-testing":me(w),"can-access-testing-partial":me(A),"aide-schedule":((X=me(f))==null?void 0:X.role)==="paraeducator"?me(u):{},onEdit:me(ie),onEmail:me(de),onTeacherFeedback:me(ee)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):me(M)==="class"?(N(),U("div",jV,[me(B).length>0?(N(),U("div",GV,[re[40]||(re[40]=m("h3",{class:"group-header direct-assignment-header"},"Direct Assignment",-1)),nt(Ef,{students:me(B),"user-map":me(a),"current-user":me(f),"can-edit-all":me(_),"can-edit-own":me(b),"can-view-all":me(x),"can-access-testing":me(w),"can-access-testing-partial":me(A),"aide-schedule":((te=me(f))==null?void 0:te.role)==="paraeducator"?me(u):{},onEdit:me(ie),onEmail:me(de),onTeacherFeedback:me(ee)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Fe("",!0),(N(!0),U(Oe,null,Ge(me(H),(Ee,be)=>{var ke;return N(),U("div",{key:be,class:"group-section"},[m("h3",WV,"Period "+le(be),1),nt(Ef,{students:Ee,"user-map":me(a),"current-user":me(f),"can-edit-all":me(_),"can-edit-own":me(b),"can-view-all":me(x),"can-access-testing":me(w),"can-access-testing-partial":me(A),"aide-schedule":((ke=me(f))==null?void 0:ke.role)==="paraeducator"?me(u):{},onEdit:me(ie),onEmail:me(de),onTeacherFeedback:me(ee)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])}),128))])):me(M)==="testing"?(N(),U("div",zV,[nt(Ef,{students:me(Q),"user-map":me(a),"current-user":me(f),"can-edit-all":me(_),"can-edit-own":me(b),"can-view-all":me(x),"can-access-testing":me(w),"can-access-testing-partial":me(A),"testing-view":!0,"aide-schedule":((Se=me(f))==null?void 0:Se.role)==="paraeducator"?me(u):{},onEdit:me(ie),onEmail:me(de),onTeacherFeedback:me(ee)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Fe("",!0)]),me(j)?(N(),Rn(EU,{key:1,"student-id":me(j),users:{userRoles:me(c)},onClose:re[22]||(re[22]=Ee=>j.value=null),onSaved:me(q)},null,8,["student-id","users","onSaved"])):Fe("",!0),me(O)?(N(),Rn(FU,{key:2,student:me(p)(me(O)),"user-map":me(a),onClose:re[23]||(re[23]=Ee=>O.value=null)},null,8,["student","user-map"])):Fe("",!0),me(W)?(N(),Rn(GU,{key:3,students:me(i),"user-map":me(a),onClose:re[24]||(re[24]=Ee=>W.value=!1)},null,8,["students","user-map"])):Fe("",!0),me(K)?(N(),Rn(GC,{key:4,users:{userRoles:me(c)},onClose:re[25]||(re[25]=Ee=>K.value=!1),onSaved:me(ge)},null,8,["users","onSaved"])):Fe("",!0),me(se)?(N(),Rn(yV,{key:5,student:me(p)(me(ve)),"current-user":me(f),onClose:re[26]||(re[26]=Ee=>se.value=!1),onFormSent:me(Y)},null,8,["student","current-user","onFormSent"])):Fe("",!0)])}}},X_=bt(KV,[["__scopeId","data-v-714377c8"]]),qV={class:"login-container"},XV={__name:"LoginView",setup(t){const e=Xo(),r=async()=>{try{const{user:n}=await HA(Ws,aM),s=vt(ht,"users",n.uid);(await Vr(s)).exists()||await xr(s,{name:n.displayName||"",email:n.email,role:"admin"}),e.push({name:"Home"})}catch(n){console.error("Login failed:",n),alert("Login failed: "+n.message)}};return(n,s)=>(N(),U("div",qV,[s[0]||(s[0]=m("h1",null,"Case Manager Portal",-1)),s[1]||(s[1]=m("p",null,"Please sign in with your Google account:",-1)),m("button",{onClick:r,class:"primary-btn"}," Sign in with Google ")]))}},YV=bt(XV,[["__scopeId","data-v-d9b5a53b"]]),QV={name:"TabBar",props:{tabs:{type:Array,required:!0,default:()=>[]},activeTab:{type:String,required:!0}},emits:["tab-change"]},JV={class:"admin-tab-bar"},ZV=["onClick"];function e$(t,e,r,n,s,i){return N(),U("div",JV,[(N(!0),U(Oe,null,Ge(r.tabs,a=>(N(),U("button",{key:a.key,class:ot({active:r.activeTab===a.key}),onClick:o=>t.$emit("tab-change",a.key)},le(a.label),11,ZV))),128))])}const t$=bt(QV,[["render",e$],["__scopeId","data-v-78ba99cd"]]),r$={name:"UserAddForm",setup(){const t=fa(sM,"addUserWithRole"),e=no(),r=Ns({name:"",email:"",role:"",provider:"",aeriesId:""}),n=pe(null),s=pe(""),i=pe(!1),a=pe(null),o=Jh,{appSettings:l,loadAppSettings:c}=ka(),u=Ae(()=>{if(l&&l.value&&l.value.serviceProviders){const S=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}];return l.value.serviceProviders.map(I=>S.find(R=>R.abbreviation===I)||{name:I,abbreviation:I})}return[]}),d=(S,I=!1)=>{s.value=S,i.value=I,setTimeout(()=>{s.value="",i.value=!1},5e3)},f=async(S,I,R,D,C)=>{try{const _={name:S,email:I,role:R,provider:D,aeriesId:C,createdAt:new Date,status:"active"};return{success:!0,userId:(await S5(Gt(e,"users"),_)).id}}catch(_){throw _}},h=async(S,I,R,D,C)=>{var _,b;try{try{return await t({name:S,email:I,role:R,provider:D,aeriesId:C}),{success:!0,method:"cloud-function"}}catch(x){return x.code==="functions/already-exists"||(_=x.message)!=null&&_.includes("409")||(b=x.message)!=null&&b.includes("already exists")?(console.log(`User ${I} already exists in Firebase Auth, skipping...`),{success:!0,method:"already-exists",message:"User already exists"}):(await f(S,I,R,D,C),{success:!0,method:"firestore"})}}catch(x){return{success:!1,error:x.message}}},v=async()=>{if(!ys("addUser",5,6e4).allowed){d("Too many requests. Please wait before adding another user.",!0);return}const I=W9(r),R=G9(I);if(!R.isValid){d(`Please fix the following errors:
${R.errors.join(`
`)}`,!0);return}const D=["name","email","aeriesId"];for(const _ of D)if(I[_]){const b=sn(I[_]);if(!b.isSafe){d(`Security threat detected in ${_}: ${b.threats.join(", ")}`,!0);return}}Object.assign(r,I);const C=await h(r.name,r.email,r.role,r.provider,r.aeriesId);C.success?(d(`User ${r.name} added successfully!`),r.name="",r.email="",r.role="",r.provider="",r.aeriesId=""):d(`Error adding user: ${C.error}`,!0)},p=S=>{const I=S.target.files[0];if(I){const R=Ld(I,{allowedTypes:["csv","excel"],maxSize:5242880,fieldName:"User Import File"});if(!R.isValid){d(R.error,!0),S.target.value="";return}const D=sn(I.name);if(!D.isSafe){d(`File name contains potentially dangerous content: ${D.threats.join(", ")}`,!0),S.target.value="";return}n.value=I}},g=async()=>{if(!n.value){d("Please select a file first",!0);return}const S=n.value.name.toLowerCase();if(!(S.endsWith(".csv")||S.endsWith(".xls")||S.endsWith(".xlsx"))){d("Unsupported file type. Please upload a .csv, .xls, or .xlsx file.",!0);return}d("Processing file...");try{S.endsWith(".csv")?await y(n.value):await E(n.value)}catch(I){d(`Error processing file: ${I.message}`,!0),console.error("Bulk upload error:",I)}},y=async S=>new Promise((I,R)=>{const D=new FileReader;D.onload=async C=>{try{const b=C.target.result.trim().split(/\r?\n/);if(b.length===0){R(new Error("The CSV file is empty."));return}const x=H=>{const B=[];let Q="",j=!1;for(let O=0;O<H.length;O++){const W=H[O];W==='"'?j=!j:W===","&&!j?(B.push(Q.trim()),Q=""):Q+=W}return B.push(Q.trim()),B};let w=0;const A={name:0,email:1,role:2,provider:3,aeriesId:4},k=x(b[0]);k.map(H=>H.toLowerCase()).some(H=>H.includes("name")||H.includes("email")||H.includes("role"))&&(k.forEach((H,B)=>{const Q=H.trim().toLowerCase();(Q==="name"||Q==="displayname")&&(A.name=B),Q==="email"&&(A.email=B),Q==="role"&&(A.role=B),(Q==="provider"||Q==="providertype")&&(A.provider=B),(Q==="aeriesid"||Q==="aeries_id"||Q==="teacherid")&&(A.aeriesId=B)}),w=1);let G=0;const P=[];for(let H=w;H<b.length;H++){const B=b[H].trim();if(!B)continue;const Q=x(B),j=(Q[A.name]||"").trim(),O=(Q[A.email]||"").trim(),W=(Q[A.role]||"").trim(),K=(Q[A.provider]||"").trim(),se=(Q[A.aeriesId]||"").trim(),ve=j.replace(/^"|"$/g,""),ie=O.replace(/^"|"$/g,""),de=W.replace(/^"|"$/g,""),ee=K.replace(/^"|"$/g,""),Y=se.replace(/^"|"$/g,"");if(!ve||!ie||!de){P.push(`Line ${H+1}: Missing name, email, or role.`);continue}if(!V_(de)){P.push(`Line ${H+1}: Invalid role "${de}".`);continue}const ge=await h(ve,ie,de,ee,Y);ge.success?(G++,ge.method==="already-exists"&&console.log(`Line ${H+1}: User ${ie} already exists, skipped`)):P.push(`Line ${H+1}: ${ge.error}`)}let M=`${G} users added successfully.`;P.length>0&&(M+=`
${P.length} errors:
`+P.join(`
`)),d(M,P.length>0),n.value=null,a.value&&(a.value.value=""),I()}catch(_){R(new Error(`Error processing CSV file: ${_.message}`))}},D.onerror=()=>R(new Error("Failed to read the CSV file.")),D.readAsText(S)}),E=async S=>new Promise((I,R)=>{const D=new FileReader;D.onload=async C=>{try{if(typeof XLSX>"u"){R(new Error("Excel upload requires SheetJS (XLSX) library. Please include it in your page."));return}const _=new Uint8Array(C.target.result),b=XLSX.read(_,{type:"array"}),x=b.SheetNames[0],w=b.Sheets[x],A=XLSX.utils.sheet_to_json(w,{defval:""});if(A.length===0){R(new Error("The Excel file is empty or unrecognized."));return}let k=0;const L=[];for(let P=0;P<A.length;P++){const M=A[P];let H="",B="",Q="",j="",O="";for(const se in M){const ve=se.toLowerCase(),ie=(""+M[se]).trim();(ve==="name"||ve==="displayname")&&!H?H=ie:ve==="email"&&!B?B=ie:ve==="role"&&!Q?Q=ie:(ve==="provider"||ve==="providertype")&&!j?j=ie:(ve==="aeriesid"||ve==="aeries_id"||ve==="teacherid")&&!O&&(O=ie)}const W=Object.values(M).map(se=>(""+se).trim());if(!H&&W[0]&&(H=W[0]),!B&&W[1]&&(B=W[1]),!Q&&W[2]&&(Q=W[2]),!j&&W[3]&&(j=W[3]),!O&&W[4]&&(O=W[4]),!H||!B||!Q){L.push(`Row ${P+1}: Missing name, email, or role.`);continue}if(!V_(Q)){L.push(`Row ${P+1}: Invalid role "${Q}".`);continue}const K=await h(H,B,Q,j,O);K.success?(k++,K.method==="already-exists"&&console.log(`Row ${P+1}: User ${B} already exists, skipped`)):L.push(`Row ${P+1}: ${K.error}`)}let G=`${k} users added successfully.`;L.length>0&&(G+=`
${L.length} errors:
`+L.join(`
`)),d(G,L.length>0),n.value=null,a.value&&(a.value.value=""),I()}catch(_){R(new Error(`Error processing Excel file: ${_.message}`))}},D.onerror=()=>R(new Error("Failed to read the Excel file.")),D.readAsArrayBuffer(S)});return Jt(async()=>{await c()}),{singleUser:r,validRoles:o,providerOptions:u,addSingleUser:v,selectedFile:n,statusMessage:s,isError:i,bulkFileInput:a,handleFileSelect:p,uploadBulkUsers:g,appSettings:l}}},n$={class:"add-user-wrapper"},s$={class:"add-single"},a$=["value"],i$={key:0},o$=["value"],l$={class:"add-bulk"},c$=["disabled"];function u$(t,e,r,n,s,i){return N(),U("div",n$,[m("div",s$,[e[16]||(e[16]=m("h3",null,"Add Single User",-1)),m("form",{onSubmit:e[5]||(e[5]=bs((...a)=>n.addSingleUser&&n.addSingleUser(...a),["prevent"])),class:"form-grid"},[m("div",null,[m("label",null,[e[8]||(e[8]=Me(" Name: ")),Ve(m("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.singleUser.name=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[At,n.singleUser.name]])])]),m("div",null,[m("label",null,[e[9]||(e[9]=Me(" Email: ")),Ve(m("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>n.singleUser.email=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[At,n.singleUser.email]])])]),m("div",null,[m("label",null,[e[11]||(e[11]=Me(" Role: ")),Ve(m("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.singleUser.role=a),required:""},[e[10]||(e[10]=m("option",{value:"",disabled:""},"Select role...",-1)),(N(!0),U(Oe,null,Ge(n.validRoles,a=>(N(),U("option",{key:a,value:a},le(a),9,a$))),128))],512),[[hr,n.singleUser.role]])])]),n.providerOptions.length>0?(N(),U("div",i$,[m("label",null,[e[13]||(e[13]=Me(" Provider Type: ")),Ve(m("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.singleUser.provider=a)},[e[12]||(e[12]=m("option",{value:""},"None",-1)),(N(!0),U(Oe,null,Ge(n.providerOptions,a=>(N(),U("option",{key:a.abbreviation,value:a.abbreviation},le(a.name)+" ("+le(a.abbreviation)+") ",9,o$))),128))],512),[[hr,n.singleUser.provider]])])])):Fe("",!0),m("div",null,[m("label",null,[e[14]||(e[14]=Me(" Aeries ID: ")),Ve(m("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>n.singleUser.aeriesId=a),placeholder:"Optional Aeries Teacher ID"},null,512),[[At,n.singleUser.aeriesId]])])]),e[15]||(e[15]=m("button",{type:"submit"},"Add User",-1))],32)]),m("div",l$,[e[17]||(e[17]=m("h3",null,"Bulk Upload Users",-1)),m("div",null,[m("input",{type:"file",ref:"bulkFileInput",accept:".csv, .xls, .xlsx",onChange:e[6]||(e[6]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),m("button",{onClick:e[7]||(e[7]=(...a)=>n.uploadBulkUsers&&n.uploadBulkUsers(...a)),disabled:!n.selectedFile}," Upload Users ",8,c$)]),e[18]||(e[18]=Xn(`<h4 data-v-4932f701>Example Formatting</h4><div data-v-4932f701>File needs to be in .csv, .xls, .xlsx format, like an Excel spreadsheet.</div><div class="example-format" data-v-4932f701><p data-v-4932f701><strong data-v-4932f701>CSV Format:</strong></p><pre data-v-4932f701>Name,Email,Role,Provider,AeriesID
&quot;John Smith&quot;,&quot;john.smith@school.org&quot;,&quot;teacher&quot;,&quot;&quot;,&quot;123456&quot;
&quot;Jane Doe&quot;,&quot;jane.doe@school.org&quot;,&quot;service_provider&quot;,&quot;SLP&quot;,&quot;789012&quot;
&quot;Bob Johnson&quot;,&quot;bob.johnson@school.org&quot;,&quot;case_manager&quot;,&quot;&quot;,&quot;&quot;</pre><p data-v-4932f701><strong data-v-4932f701>Supported Roles:</strong> admin, teacher, case_manager, sped_chair, service_provider</p><p data-v-4932f701><strong data-v-4932f701>Provider Types:</strong> SLP, OT, PT, SC, MH, TR, AUD, VI, AT, DHH, O&amp;M, BIS, HN, SW</p><p data-v-4932f701><strong data-v-4932f701>Aeries ID:</strong> Optional 6-digit teacher ID from Aeries system</p></div>`,3))]),n.statusMessage?(N(),U("div",{key:0,class:ot(["status-msg",{error:n.isError}])},le(n.statusMessage),3)):Fe("",!0)])}const d$=bt(r$,[["render",u$],["__scopeId","data-v-4932f701"]]),$c=20,f$={name:"UserTable",setup(){const t=no(),e=pe([]),r=pe(1),n=pe("name"),s=pe(""),i=pe(null),a=pe(""),o=pe(!1),l=pe(!1),c=pe([]),u=pe(null),d=Jh,f=ka(),h=f.appSettings,v=f.loadAppSettings;let p=null;const g=()=>{p&&clearTimeout(p),p=setTimeout(()=>{I()},300)},y=Ae(()=>{var G;return Array.isArray((G=h.value)==null?void 0:G.serviceProviders)&&h.value.serviceProviders.length>0}),E=Ae(()=>{var G;return((G=h.value)==null?void 0:G.serviceProviders)||[]}),S=(G,P=!1)=>{a.value=G,o.value=P,setTimeout(()=>{a.value="",o.value=!1},3e3)},I=()=>{r.value=1,R()},R=async(G="first")=>{S("");const P=Gt(t,"users");let M;if(s.value&&n.value==="name"){const Q=(await dr(zr(P,Ks("name"),Ri(1e3)))).docs.map(j=>({id:j.id,...j.data()})).filter(j=>(j.name||"").toLowerCase().includes(s.value.toLowerCase()));i.value=null,e.value=Q,l.value=!1;return}s.value&&n.value==="email"?M=zr(P,Ks("email"),gs("email",">=",s.value),gs("email","<=",s.value+""),Ri($c)):s.value?M=zr(P,Ks("name"),gs("name",">=",s.value),gs("name","<=",s.value+""),Ri($c)):M=zr(P,Ks("name"),Ri($c)),G==="next"&&c.value.length&&(M=zr(P,Ks(n.value),y5(c.value[c.value.length-1]),Ri($c)));const H=await dr(M);c.value=H.docs,i.value=null,e.value=c.value.map(B=>({id:B.id,...B.data()})),l.value=H.size===$c},D=G=>{i.value||(i.value=G,u.value={...e.value.find(P=>P.id===G)})},C=()=>{i.value=null,u.value=null,R()},_=(G,P,M)=>{u.value&&u.value.id===G&&(u.value[P]=M)},b=async G=>{var P,M;if(!(!u.value||u.value.id!==G))try{const H={};u.value.name!==void 0&&(H.name=((P=u.value.name)==null?void 0:P.trim())||null),u.value.title!==void 0&&(H.title=((M=u.value.title)==null?void 0:M.trim())||null),u.value.role!==void 0&&(H.role=u.value.role),u.value.provider!==void 0&&(H.provider=u.value.provider||null),await lC(vt(t,"users",G),H),S(" User updated."),i.value=null,u.value=null,R()}catch(H){console.error("Error updating user:",H),S(` Error updating user: ${H.message}`,!0)}},x=async G=>{if(confirm("Are you sure you want to delete this user?"))try{await ac(vt(t,"users",G)),S(" User deleted."),i.value=null,u.value=null,R()}catch(P){console.error("Error deleting user:",P),S(` Error deleting user: ${P.message}`,!0)}},w=async()=>{if(prompt("Type DELETE ALL USERS to confirm:")==="DELETE ALL USERS")try{const P=await dr(Gt(t,"users"));await Promise.all(P.docs.map(M=>ac(vt(t,"users",M.id)))),S(" All users deleted."),r.value=1,R()}catch(P){console.error("Error deleting all users:",P),S(` Error deleting all users: ${P.message}`,!0)}},A=()=>{r.value++,R("next")},k=()=>{r.value>1&&(r.value--,R())},L=G=>{var Q,j;if(!G)return"";const P=((Q=h.value)==null?void 0:Q.serviceProviders)||[],M=((j=h.value)==null?void 0:j.customServiceProviders)||[];[...P,...M];const B=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Adapted PE",abbreviation:"APE"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf/Hard of Hearing",abbreviation:"DHH"},{name:"Vision Services",abbreviation:"VI"},{name:"Orientation & Mobility",abbreviation:"OM"},{name:"Other",abbreviation:"OTHER"}].find(O=>O.abbreviation===G);return B?`${B.name} (${B.abbreviation})`:G};return Jt(async()=>{await v(),R()}),to(()=>{p&&clearTimeout(p)}),{users:e,currentPage:r,searchType:n,searchTerm:s,activeRowId:i,statusMessage:a,isError:o,hasNextPage:l,validRoles:d,handleSearch:I,debouncedHandleSearch:g,startEdit:D,cancelEdit:C,updateUserField:_,saveUser:b,deleteUser:x,deleteAllUsers:w,loadNextPage:A,loadPreviousPage:k,getProviderLabel:L,appSettings:h,editingUser:u,providersLoaded:y,serviceProviders:E}}},h$={class:"admin-form-row"},p$={class:"user-admin-table users-table striped"},m$={key:0},v$=["data-userid"],g$=["value","disabled","onInput"],x$=["value","disabled","onInput"],y$=["disabled","value","onChange"],E$=["value"],_$={key:0},b$={key:0},S$={key:1},T$=["value"],A$={key:1},w$={class:"action-btns"},C$=["onClick"],I$=["onClick"],k$=["onClick"],D$={class:"admin-pagination"},R$=["disabled"],F$=["disabled"];function P$(t,e,r,n,s,i){return N(),U("div",null,[e[14]||(e[14]=m("h2",null,"Edit Users",-1)),m("div",h$,[Ve(m("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.searchTerm=a),placeholder:"Search by name or email",onInput:e[1]||(e[1]=(...a)=>n.debouncedHandleSearch&&n.debouncedHandleSearch(...a))},null,544),[[At,n.searchTerm]]),Ve(m("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.searchType=a),onChange:e[3]||(e[3]=(...a)=>n.handleSearch&&n.handleSearch(...a))},e[9]||(e[9]=[m("option",{value:"name"},"Name",-1),m("option",{value:"email"},"Email",-1)]),544),[[hr,n.searchType]]),m("button",{onClick:e[4]||(e[4]=(...a)=>n.deleteAllUsers&&n.deleteAllUsers(...a)),style:{"margin-left":"auto",background:"#f44336",color:"#fff",padding:"0.3rem 0.8rem",border:"none","border-radius":"4px",cursor:"pointer"}}," Delete All Users ")]),m("div",{class:ot(["admin-status-msg",{error:n.isError}])},le(n.statusMessage),3),m("div",null,[m("table",p$,[e[13]||(e[13]=m("thead",null,[m("tr",null,[m("th",null,"Name"),m("th",null,"Title"),m("th",null,"Email"),m("th",null,"Role"),m("th",null,"Provider Type"),m("th",{style:{"text-align":"center"}},"Actions")])],-1)),m("tbody",null,[n.users.length===0?(N(),U("tr",m$,e[10]||(e[10]=[m("td",{colspan:"5"},"No users found.",-1)]))):Fe("",!0),(N(!0),U(Oe,null,Ge(n.users,a=>(N(),U("tr",{key:a.id,class:ot({"active-row":n.activeRowId===a.id}),"data-userid":a.id},[m("td",null,[m("input",{type:"text",value:a.name||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"name",o.target.value)},null,40,g$)]),m("td",null,[m("input",{type:"text",value:a.title||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"title",o.target.value)},null,40,x$)]),m("td",null,le(a.email),1),m("td",null,[m("select",{class:"editable-select",disabled:n.activeRowId!==a.id,value:a.role,onChange:o=>n.updateUserField(a.id,"role",o.target.value)},[(N(!0),U(Oe,null,Ge(n.validRoles,o=>(N(),U("option",{key:o,value:o},le(o.replace(/_/g," ")),9,E$))),128))],40,y$)]),n.providersLoaded?(N(),U("td",_$,[n.activeRowId!==a.id?(N(),U("span",b$,le(a.provider||""),1)):(N(),U("span",S$,[Ve(m("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>n.editingUser.provider=o)},[e[11]||(e[11]=m("option",{value:""},"None",-1)),(N(!0),U(Oe,null,Ge(n.serviceProviders,o=>(N(),U("option",{key:o,value:o},le(o),9,T$))),128))],512),[[hr,n.editingUser.provider]])]))])):(N(),U("td",A$,e[12]||(e[12]=[m("span",null,"Loading...",-1)]))),m("td",w$,[n.activeRowId!==a.id?(N(),U("button",{key:0,class:"edit-btn",onClick:o=>n.startEdit(a.id)},"  ",8,C$)):(N(),U(Oe,{key:1},[m("button",{class:"save-btn",onClick:o=>n.saveUser(a.id)},"",8,I$),m("button",{class:"cancel-btn",onClick:e[6]||(e[6]=(...o)=>n.cancelEdit&&n.cancelEdit(...o))},""),m("button",{class:"delete-btn",onClick:o=>n.deleteUser(a.id)},"",8,k$)],64))])],10,v$))),128))])])]),m("div",D$,[m("button",{onClick:e[7]||(e[7]=(...a)=>n.loadPreviousPage&&n.loadPreviousPage(...a)),disabled:n.currentPage===1}," Previous ",8,R$),m("span",null,"Page "+le(n.currentPage),1),m("button",{onClick:e[8]||(e[8]=(...a)=>n.loadNextPage&&n.loadNextPage(...a)),disabled:!n.hasNextPage}," Next ",8,F$)])])}const O$=bt(f$,[["render",P$],["__scopeId","data-v-496615f3"]]),N$=[Ze.VIEW_USERS,Ze.EDIT_USER,Ze.DELETE_USER,Ze.MANAGE_SUBJECTS,Ze.MANAGE_ROLES,Ze.VIEW_STUDENTS,Ze.EDIT_STUDENT_CM,Ze.EDIT_STUDENT_ALL],Y_=[Ze.EDIT_USER,Ze.DELETE_USER,Ze.MANAGE_SUBJECTS,Ze.MANAGE_ROLES,Ze.EDIT_STUDENT_CM,Ze.EDIT_STUDENT_ALL],L$={[Ze.VIEW_USERS]:"View Users",[Ze.EDIT_USER]:"Edit User",[Ze.DELETE_USER]:"Delete User",[Ze.MANAGE_SUBJECTS]:"Manage Subjects",[Ze.MANAGE_ROLES]:"Manage Roles",[Ze.VIEW_STUDENTS]:"View Students",[Ze.EDIT_STUDENT_CM]:"Edit Students (Own Caseload)",[Ze.EDIT_STUDENT_ALL]:"Edit All Students"},M$={name:"PermissionsMatrix",setup(){const t=no(),e="config/permissions_matrix",r=Ns({}),n=pe(""),s=pe(!1),i=Jh,a=N$,o=L$,l=(p,g=!1)=>{n.value=p,s.value=g,setTimeout(()=>{n.value="",s.value=!1},3e3)},c=async()=>{try{const p=vt(t,e),g=await Vr(p);if(g.exists()){const y=g.data();Object.assign(r,y)}else Object.assign(r,Cl)}catch(p){console.error("Error loading permissions matrix:",p),Object.assign(r,Cl)}},u=(p,g,y)=>{if(Y_.includes(g)){console.log(`Permission ${g} is read-only and cannot be changed`);return}if(r[p]||(r[p]=[]),y)r[p].includes(g)||r[p].push(g);else{const E=r[p].indexOf(g);E>-1&&r[p].splice(E,1)}},d=p=>Y_.includes(p),f=p=>r[p]?r[p].includes(Ze.TESTING_ALL)?"all":r[p].includes(Ze.TESTING_PARTIAL)?"partial":"none":"none",h=(p,g)=>{r[p]||(r[p]=[]),[Ze.TESTING,Ze.TESTING_ALL,Ze.TESTING_PARTIAL].forEach(E=>{const S=r[p].indexOf(E);S>-1&&r[p].splice(S,1)}),g==="all"?r[p].push(Ze.TESTING_ALL):g==="partial"&&r[p].push(Ze.TESTING_PARTIAL)},v=async()=>{try{await xr(vt(t,e),r),l(" Permissions updated.",!1)}catch(p){console.error("Error saving permissions:",p),l(` Error saving: ${p.message}`,!0)}};return Jt(()=>{c()}),{matrix:r,statusMessage:n,isError:s,validRoles:i,actionList:a,actionLabels:o,updatePermission:u,isReadOnlyPermission:d,getTestingLevel:f,updateTestingPermission:h,savePermissions:v}}},B$={class:"permissions-table-admin"},U$={style:{"font-weight":"bold"}},V$=["data-role","data-action","checked","disabled","onChange"],$$={key:0,class:"read-only-indicator",title:"This permission matches Firebase security rules and cannot be changed"},H$={style:{"text-align":"center"}},j$=["value","onChange"];function G$(t,e,r,n,s,i){return N(),U("div",null,[e[4]||(e[4]=m("h3",null,"Role Permissions Matrix",-1)),e[5]||(e[5]=m("div",{class:"permissions-note"},[m("p",null,[m("strong",null,"Note:"),Me(" Permissions marked with  are read-only and match Firebase security rules. These cannot be changed to ensure database security consistency. Only view permissions and testing access can be modified.")])],-1)),m("table",B$,[m("thead",null,[m("tr",null,[e[1]||(e[1]=m("th",{style:{"min-width":"120px"}},"Role",-1)),(N(!0),U(Oe,null,Ge(n.actionList,a=>(N(),U("th",{key:a,style:{"min-width":"110px"}},le(n.actionLabels[a]),1))),128)),e[2]||(e[2]=m("th",{style:{"min-width":"120px"}},"Testing Access",-1))])]),m("tbody",null,[(N(!0),U(Oe,null,Ge(n.validRoles,a=>(N(),U("tr",{key:a},[m("td",U$,le(a),1),(N(!0),U(Oe,null,Ge(n.actionList,o=>{var l;return N(),U("td",{key:o,style:{"text-align":"center"}},[m("input",{type:"checkbox","data-role":a,"data-action":o,checked:(l=n.matrix[a])==null?void 0:l.includes(o),disabled:n.isReadOnlyPermission(o),class:ot({"read-only":n.isReadOnlyPermission(o)}),onChange:c=>n.updatePermission(a,o,c.target.checked)},null,42,V$),n.isReadOnlyPermission(o)?(N(),U("span",$$,"")):Fe("",!0)])}),128)),m("td",H$,[m("select",{value:n.getTestingLevel(a),onChange:o=>n.updateTestingPermission(a,o.target.value),style:{width:"100px",padding:"2px"}},e[3]||(e[3]=[m("option",{value:"none"},"None",-1),m("option",{value:"partial"},"Partial",-1),m("option",{value:"all"},"All",-1)]),40,j$)])]))),128))])]),m("button",{onClick:e[0]||(e[0]=(...a)=>n.savePermissions&&n.savePermissions(...a)),style:{padding:"0.5em 1.4em","font-size":"1.08em"}}," Save "),m("span",{style:In({marginLeft:"1em",fontSize:"1em",color:n.isError?"#b42c2c":"#267838"})},le(n.statusMessage),5)])}const WC=bt(M$,[["render",G$],["__scopeId","data-v-0d793d95"]]),W$={class:"admin-students"},z$={class:"admin-form-row"},K$={class:"search-container"},q$={class:"user-admin-table students-table striped"},X$={key:0},Y$=["data-id"],Q$=["value","disabled","onInput"],J$=["value","disabled","onInput"],Z$=["value","disabled","onInput"],eH=["value","disabled","onInput"],tH={class:"action-btns"},rH=["onClick"],nH=["onClick"],sH=["onClick"],aH={class:"admin-pagination"},iH=["disabled"],oH=["disabled"],Gp=50,lH={__name:"AdminStudents",setup(t){const e=no(),{students:r,fetchStudents:n,updateStudent:s,deleteStudent:i}=Ca(),a=pe(""),o=pe([]),l=pe(1),c=pe(null),u=pe({}),d=pe(""),f=pe(!1);let h=null;const v=()=>{h&&clearTimeout(h),h=setTimeout(()=>{E()},300)},p=Ae(()=>{const A=(l.value-1)*Gp,k=A+Gp;return o.value.slice(A,k)}),g=Ae(()=>Math.ceil(o.value.length/Gp)),y=(A,k=!1)=>{d.value=A,f.value=k,setTimeout(()=>{d.value="",f.value=!1},5e3)},E=()=>{if(!ys("studentSearch",20,6e4).allowed){y("Too many search requests. Please wait before searching again.",!0);return}const k=Ar(a.value,{trim:!0,maxLength:100,removeDangerous:!0}),L=sn(k);if(!L.isSafe){y(`Security threat detected in search: ${L.threats.join(", ")}`,!0),a.value=k;return}k!==a.value&&(a.value=k);const G=k.toLowerCase();G?o.value=r.value.filter(P=>{const M=it(P,"firstName")||"",H=it(P,"lastName")||"";return`${M} ${H}`.toLowerCase().includes(G)}):o.value=r.value,l.value=1},S=A=>{if(c.value)return;const k=r.value.find(L=>L.id===A);k&&(c.value=A,u.value={...k})},I=()=>{c.value=null,u.value={}},R=(A,k,L)=>{if(u.value.id===A){let G=L;if(typeof L=="string"){G=Ar(L,{trim:!0,maxLength:k==="caseManagerId"?50:100,removeDangerous:!0});const P=sn(G);if(!P.isSafe){y(`Security threat detected in ${k}: ${P.threats.join(", ")}`,!0);return}const M=Zh(G,{max:k==="caseManagerId"?50:100,fieldName:k});if(!M.isValid){y(M.error,!0);return}}u.value[k]=G}},D=async A=>{try{if(!ys("saveStudent",10,6e4).allowed){y("Too many save requests. Please wait before saving again.",!0);return}const L={};if(Object.keys(u.value).forEach(H=>{H!=="id"&&u.value[H]!==r.value.find(B=>B.id===A)[H]&&(L[H]=u.value[H])}),Object.keys(L).length===0){I();return}const G=jC(L),P=HC(G,{isNew:!1});if(!P.isValid){y(`Validation failed: ${P.errors.join(", ")}`,!0);return}Object.assign(u.value,G),await s(A,G);const M=r.value.findIndex(H=>H.id===A);M!==-1&&(r.value[M]={...r.value[M],...G}),y(" Student updated.")}catch(k){y(" Update failed.",!0),console.error("Update error:",k)}finally{I()}},C=async A=>{if(!ys("deleteStudent",5,3e5).allowed){y("Too many delete requests. Please wait before deleting again.",!0);return}if(confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await i(A),y(" Student deleted.");const L=r.value.findIndex(G=>G.id===A);L!==-1&&r.value.splice(L,1),E()}catch(L){y(" Delete failed.",!0),console.error("Delete error:",L)}},_=async()=>{if(!ys("deleteAllStudents",1,36e5).allowed){y("Delete all operation rate limited. Please wait before trying again.",!0);return}const k=`Are you sure you want to delete ALL ${r.value.length} students? 

This action cannot be undone and will permanently remove all student data.

Type "DELETE ALL STUDENTS" to confirm:`;if(prompt(k)!=="DELETE ALL STUDENTS"){y("Delete all operation cancelled.",!1);return}try{y("Deleting all students...");const G=uC(e);let P=0;for(const M of r.value)G.delete(vt(e,"students",M.id)),P++,P>=500&&(await G.commit(),P=0);P>0&&await G.commit(),r.value=[],o.value=[],y(" All students deleted.")}catch(G){y(" Failed to delete all students.",!0),console.error("Delete all error:",G)}},b=A=>{if(!A)return"N/A";try{if(A&&typeof A.toDate=="function")return A.toDate().toLocaleDateString();const k=new Date(A);return isNaN(k.getTime())?"Invalid Date":k.toLocaleDateString()}catch{return"Invalid Date"}},x=()=>{l.value<g.value&&l.value++},w=()=>{l.value>1&&l.value--};return Jt(async()=>{try{await n(),o.value=r.value}catch(A){y("Failed to load students.",!0),console.error("Load students error:",A)}}),to(()=>{h&&clearTimeout(h)}),(A,k)=>(N(),U("div",W$,[k[3]||(k[3]=m("h2",null,"Edit Students",-1)),m("div",z$,[m("div",K$,[Ve(m("input",{type:"text","onUpdate:modelValue":k[0]||(k[0]=L=>a.value=L),onInput:v,placeholder:"Search by name",class:"search-input"},null,544),[[At,a.value]]),m("button",{onClick:_,class:"delete-all-btn"},"Delete All Students")])]),d.value?(N(),U("div",{key:0,class:ot(["admin-status-msg",{error:f.value}])},le(d.value),3)):Fe("",!0),m("table",q$,[k[2]||(k[2]=m("thead",null,[m("tr",null,[m("th",null,"ID"),m("th",null,"First Name"),m("th",null,"Last Name"),m("th",null,"Grade"),m("th",null,"Case Manager"),m("th",null,"Date Added"),m("th",null,"Actions")])],-1)),m("tbody",null,[p.value.length?Fe("",!0):(N(),U("tr",X$,k[1]||(k[1]=[m("td",{colspan:"7"},"No students found.",-1)]))),(N(!0),U(Oe,null,Ge(p.value,L=>(N(),U("tr",{key:L.id,class:ot({"active-row":c.value===L.id}),"data-id":L.id},[m("td",null,le(L.id),1),m("td",null,[m("input",{class:"editable-input","data-field":"first_name",value:me(it)(L,"firstName")||"",disabled:c.value!==L.id,onInput:G=>R(L.id,"first_name",G.target.value)},null,40,Q$)]),m("td",null,[m("input",{class:"editable-input","data-field":"last_name",value:me(it)(L,"lastName")||"",disabled:c.value!==L.id,onInput:G=>R(L.id,"last_name",G.target.value)},null,40,J$)]),m("td",null,[m("input",{class:"editable-input","data-field":"grade",value:me(it)(L,"grade")||"",disabled:c.value!==L.id,onInput:G=>R(L.id,"grade",G.target.value)},null,40,Z$)]),m("td",null,[m("input",{class:"editable-input","data-field":"caseManagerId",value:L.caseManagerId||"",disabled:c.value!==L.id,onInput:G=>R(L.id,"caseManagerId",G.target.value)},null,40,eH)]),m("td",null,le(b(L.created_at)),1),m("td",tH,[c.value===L.id?(N(),U(Oe,{key:0},[m("button",{onClick:G=>D(L.id),class:"btn-save",title:"Save"},"",8,rH),m("button",{onClick:I,class:"btn-cancel",title:"Cancel"},""),m("button",{onClick:G=>C(L.id),class:"btn-delete",title:"Delete"},"",8,nH)],64)):(N(),U("button",{key:1,onClick:G=>S(L.id),class:"btn-edit",title:"Edit"},"",8,sH))])],10,Y$))),128))])]),m("div",aH,[m("button",{onClick:w,disabled:l.value===1,class:"admin-btn"}," Prev ",8,iH),m("span",null,"Page "+le(l.value)+" of "+le(g.value),1),m("button",{onClick:x,disabled:l.value===g.value,class:"admin-btn"}," Next ",8,oH)])]))}},cH=bt(lH,[["__scopeId","data-v-d19751dc"]]),uH={class:"bulk-importer"},dH={key:0,class:"step-container"},fH={class:"file-upload-section"},hH={class:"file-input-wrapper"},pH={for:"csv-file",class:"file-label"},mH={class:"file-text"},vH={key:0,class:"error-message"},gH={key:1,class:"file-info"},xH={key:0},yH={class:"step-actions"},EH=["disabled"],_H={key:1,class:"step-container"},bH={class:"field-mapping-section"},SH={class:"mapping-grid"},TH={class:"csv-column"},AH={class:"app-field"},wH=["onUpdate:modelValue"],CH={class:"sample-data"},IH={key:0,class:"validation-errors"},kH={class:"step-actions"},DH=["disabled"],RH={key:2,class:"step-container"},FH={class:"preview-section"},PH={class:"preview-stats"},OH={class:"stat-item"},NH={class:"stat-value"},LH={class:"stat-item"},MH={class:"stat-value valid"},BH={class:"stat-item"},UH={class:"stat-value invalid"},VH={class:"preview-table-container"},$H={class:"preview-table"},HH={key:0,class:"error-list"},jH={key:1,class:"no-errors"},GH={class:"import-options"},WH={class:"options-grid"},zH={class:"option-item"},KH={class:"option-item"},qH={class:"option-item"},XH={class:"step-actions"},YH=["disabled"],QH={key:3,class:"step-container"},JH={class:"results-section"},ZH={class:"results-stats"},ej={class:"stat-item success"},tj={class:"stat-value"},rj={class:"stat-item error"},nj={class:"stat-value"},sj={class:"stat-item"},aj={class:"stat-value"},ij={key:0,class:"import-errors"},oj={class:"results-actions"},lj={key:4,class:"loading-overlay"},cj={class:"loading-content"},uj={class:"progress-bar"},dj={__name:"StudentBulkImporter",emits:["close","imported"],setup(t,{emit:e}){const r=e,{users:n,fetchUsers:s}=Ia(),i=pe(1),a=pe(""),o=pe(""),l=pe([]),c=pe([]),u=pe({}),d=pe(""),f=pe([]),h=pe([]),v=pe("valid-only"),p=pe(!1),g=pe(!1),y=pe(0),E=pe({successful:0,failed:0,errors:[],processingTime:0}),S=pe(null),I=Ae(()=>{const ee=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Y=Object.values(u.value).filter(q=>q),ge=Y.includes("app.studentData.ssid");return ee.every(q=>Y.includes(q))&&ge}),R=Ae(()=>h.value.filter(ee=>ee.errors.length===0)),D=Ae(()=>h.value.filter(ee=>ee.errors.length>0));Jt(async()=>{console.log(" StudentBulkImporter component mounted!");try{await s(),console.log(" Users loaded successfully:",Object.keys(n.value).length,"users"),console.log("First few users:",Object.values(n.value).slice(0,3).map(ee=>({id:ee.id,name:ee.name,role:ee.role})))}catch(ee){console.error(" Failed to load users:",ee)}});const C=async ee=>{const Y=ee.target.files[0];if(Y){if(!Y.name.toLowerCase().endsWith(".csv")&&Y.type!=="text/csv"){d.value="File must be a CSV file (.csv extension)";return}if(Y.size>10*1024*1024){d.value="File must be smaller than 10MB";return}d.value="",a.value=Y.name,o.value=Q(Y.size);try{const ge=await Y.text();_(ge)}catch(ge){d.value="Failed to read CSV file: "+ge.message}}},_=ee=>{try{const Y=ee.trim().split(`
`);if(Y.length<2)throw new Error("CSV must have at least a header row and one data row");const ge=Y[0].split(",").map(z=>z.trim().replace(/"/g,""));c.value=ge;const q=[];for(let z=1;z<Y.length;z++){const J={};let he="",re=!1,X=0;for(let te=0;te<Y[z].length;te++){const Se=Y[z][te];Se==='"'?re=!re:Se===","&&!re?(J[ge[X]]=he.trim().replace(/^"|"$/g,""),he="",X++):he+=Se}X<ge.length&&(J[ge[X]]=he.trim().replace(/^"|"$/g,"")),q.push(J)}l.value=q,console.log("Parsed CSV data:",q.length,"records")}catch(Y){d.value="Failed to parse CSV: "+Y.message}},b=()=>{const ee={SSID:"app.studentData.ssid",FirstName:"app.studentData.firstName",LastName:"app.studentData.lastName",Grade:"app.studentData.grade",Plan:"app.studentData.plan",CaseManagerId:"app.studentData.caseManagerId",ReviewDate:"app.dates.reviewDate",ReevalDate:"app.dates.reevalDate",MeetingDate:"app.dates.meetingDate",Period1Teacher:"app.schedule.periods.1",Period2Teacher:"app.schedule.periods.2",Period3Teacher:"app.schedule.periods.3",Period4Teacher:"app.schedule.periods.4",Period5Teacher:"app.schedule.periods.5",Period6Teacher:"app.schedule.periods.6",PeriodSHTeacher:"app.schedule.periods.SH",ClassServices:"app.schedule.classServices",SpeechProvider:"app.providers.speechId",OTProvider:"app.providers.otId",PTProvider:"app.providers.ptId",ATProvider:"app.providers.atId",Audiologist:"app.providers.audId",BISProvider:"app.providers.bisId",DHHProvider:"app.providers.dhhId",HNProvider:"app.providers.hnId",MHProvider:"app.providers.mhId",OMProvider:"app.providers.omId",SCProvider:"app.providers.scId",SWProvider:"app.providers.swId",TRProvider:"app.providers.trId",VIProvider:"app.providers.viId",Flag1:"app.flags.flag1",Flag2:"app.flags.flag2",BIPPdfUrl:"app.documents.bipPdfUrl",AtAGlancePdfUrl:"app.documents.ataglancePdfUrl",Assessment:"app.accommodations.assessment",Instruction:"app.accommodations.instruction"};c.value.forEach(Y=>{ee[Y]&&(u.value[Y]=ee[Y])})},x=()=>{u.value={}},w=ee=>{const Y=l.value[0];if(!Y)return"";const ge=Y[ee];return ge?ee==="ClassServices"&&ge.includes(",")?`"${ge}"`:ge:""},A=()=>{f.value=[];const ee=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Y=Object.values(u.value).filter(z=>z),ge=Y.includes("app.studentData.ssid");ee.forEach(z=>{if(!Y.includes(z)){const J=z.split(".").pop();f.value.push(`Required field "${J}" is not mapped`)}}),ge||f.value.push("SSID (State Student ID) must be mapped to app.studentData.ssid");const q=Y.filter((z,J)=>Y.indexOf(z)!==J);q.length>0&&f.value.push(`Duplicate field mappings: ${q.join(", ")}`)},k=()=>{h.value=l.value.map(ee=>{const Y=L(ee),ge=P(Y);return console.log("Row mapping:",{original:ee,mapped:Y,errors:ge}),{data:Y,errors:ge}})},L=ee=>{const Y={app:{studentData:{},dates:{},providers:{},accommodations:{},flags:{},schedule:{periods:{},classServices:[]},documents:{}}};return Object.entries(u.value).forEach(([ge,q])=>{if(!q||!ee[ge])return;let z=ee[ge].trim();if(!z)return;if(q==="app.schedule.classServices"){z.startsWith('"')&&z.endsWith('"')&&(z=z.slice(1,-1)),Y.app.schedule.classServices=z.split(",").map(re=>re.trim()).filter(Boolean);return}if(q.startsWith("app.schedule.periods.")){const re=q.split(".").pop(),X=z.trim();if(X){const te=K(X);console.log(`Mapping Period ${re} teacher:`,X,"",te),Y.app.schedule.periods[re]=te}return}if(q.startsWith("app.providers.")){const re=q.split(".").pop(),X=z.trim();if(X){const te=se(X);console.log(`Mapping ${re} provider:`,X,"",te),Y.app.providers[re]=te}return}if(q==="app.accommodations.assessment"||q==="app.accommodations.instruction"){const re=q.split(".").pop();Y.app.accommodations[re]=z;return}if(q.startsWith("app.flags.")){const re=q.split(".").pop();Y.app.flags[re]=["true","1","yes","y"].includes(z.toLowerCase());return}if(q.includes("Date")){const[re,X,te]=q.split(".");Y[re][X]||(Y[re][X]={}),Y[re][X][te]=H(z);return}const J=q.split(".");let he=Y;for(let re=0;re<J.length-1;re++){const X=J[re];he[X]||(he[X]={}),he=he[X]}he[J[J.length-1]]=z}),Y},G=ee=>{const Y=Object.values(n.value).find(ge=>ge.id===ee||ge.name===ee||ge.email===ee||ge.aeriesId===ee);return console.log("Mapping case manager:",ee,"to Firebase ID:",Y==null?void 0:Y.id),Y?Y.id:ee},P=ee=>{var q,z,J,he,re,X,te,Se,Ee,be,ke,Be,Ie,je,Ue,He,qe,ye;const Y=[],ge=ee.ssid||((z=(q=ee.app)==null?void 0:q.studentData)==null?void 0:z.ssid);return ge||Y.push("SSID is required (either top-level or in app.studentData)"),(he=(J=ee.app)==null?void 0:J.studentData)!=null&&he.firstName||Y.push("First name is required"),(X=(re=ee.app)==null?void 0:re.studentData)!=null&&X.lastName||Y.push("Last name is required"),(Se=(te=ee.app)==null?void 0:te.studentData)!=null&&Se.grade||Y.push("Grade is required"),ge&&!/^\d{9,10}$/.test(ge)&&Y.push("SSID must be 9-10 digits"),(be=(Ee=ee.app)==null?void 0:Ee.studentData)!=null&&be.grade&&!["K","1","2","3","4","5","6","7","8","9","10","11","12"].includes(ee.app.studentData.grade)&&Y.push("Grade must be K-12"),(Be=(ke=ee.app)==null?void 0:ke.studentData)!=null&&Be.plan&&!["IEP","504"].includes(ee.app.studentData.plan)&&Y.push("Plan must be IEP or 504"),(je=(Ie=ee.app)==null?void 0:Ie.dates)!=null&&je.reviewDate&&!M(ee.app.dates.reviewDate)&&Y.push("Invalid review date format (use YYYY-MM-DD)"),(He=(Ue=ee.app)==null?void 0:Ue.dates)!=null&&He.reevalDate&&!M(ee.app.dates.reevalDate)&&Y.push("Invalid reevaluation date format (use YYYY-MM-DD)"),(ye=(qe=ee.app)==null?void 0:qe.dates)!=null&&ye.meetingDate&&!M(ee.app.dates.meetingDate)&&Y.push("Invalid meeting date format (use YYYY-MM-DD)"),Y},M=ee=>{if(!ee)return!0;const Y=new Date(ee);return!isNaN(Y.getTime())&&ee.match(/^\d{4}-\d{2}-\d{2}$/)},H=ee=>{if(!ee)return"";try{const Y=new Date(ee);return isNaN(Y.getTime())?"":Y.toISOString().split("T")[0]}catch{return""}},B=ee=>{var q,z,J,he;const Y=((z=(q=ee.app)==null?void 0:q.studentData)==null?void 0:z.firstName)||"",ge=((he=(J=ee.app)==null?void 0:J.studentData)==null?void 0:he.lastName)||"";return`${Y} ${ge}`.trim()||"Missing Name"},Q=ee=>{if(ee===0)return"0 Bytes";const Y=1024,ge=["Bytes","KB","MB","GB"],q=Math.floor(Math.log(ee)/Math.log(Y));return parseFloat((ee/Math.pow(Y,q)).toFixed(2))+" "+ge[q]},j=()=>{if(i.value===2){if(A(),f.value.length>0)return;k()}i.value++},O=()=>{i.value--},W=async()=>{g.value=!0,y.value=0;const ee=Date.now(),Y=v.value==="valid-only"?R.value:h.value;let ge=0,q=0;const z=[];try{for(let J=0;J<Y.length;J++){const he=Y[J];try{await ie(he.data),ge++}catch(re){q++,z.push(`Row ${J+1}: ${re.message}`)}y.value=Math.round((J+1)/Y.length*100)}E.value={successful:ge,failed:q,errors:z,processingTime:Date.now()-ee},i.value=4,r("imported",{successful:ge,failed:q})}catch(J){console.error("Import failed:",J),z.push("Import process failed: "+J.message),E.value={successful:ge,failed:q,errors:z,processingTime:Date.now()-ee},i.value=4}finally{g.value=!1}},K=ee=>{if(!ee)return"";console.log(" Mapping teacher ID:",ee),console.log(" Available users:",Object.values(n.value).map(q=>({name:q.name,aeriesId:q.aeriesId,id:q.id})));const Y=Object.values(n.value).find(q=>{const z=String(q.aeriesId)===String(ee);return z&&console.log(" Found exact Aeries ID match:",{teacherId:ee,user:{name:q.name,aeriesId:q.aeriesId,id:q.id}}),z});if(Y)return console.log(" Using Aeries ID match:",ee,"",Y.id,"(",Y.name,")"),Y.id;const ge=Object.values(n.value).find(q=>q.id===ee);return ge?(console.log(" Using Firebase ID match:",ee,"",ge.id,"(",ge.name,")"),ge.id):(console.warn(" No user found for teacher ID:",ee),ee)},se=ee=>{if(!ee)return"";console.log(" Mapping provider ID:",ee),console.log(" Available users:",Object.values(n.value).map(q=>({name:q.name,aeriesId:q.aeriesId,id:q.id})));const Y=Object.values(n.value).find(q=>{const z=String(q.aeriesId)===String(ee);return z&&console.log(" Found exact Aeries ID match:",{providerId:ee,user:{name:q.name,aeriesId:q.aeriesId,id:q.id}}),z});if(Y)return console.log(" Using Aeries ID match:",ee,"",Y.id,"(",Y.name,")"),Y.id;const ge=Object.values(n.value).find(q=>q.id===ee);return ge?(console.log(" Using Firebase ID match:",ee,"",ge.id,"(",ge.name,")"),ge.id):(console.warn(" No user found for provider ID:",ee),ee)},ve=ee=>{try{return ee.app&&ee.app.studentData&&ee.app.studentData.ssid&&ee.app.studentData.firstName&&ee.app.studentData.lastName&&ee.app.studentData.grade&&ee.app.schedule&&Array.isArray(ee.app.schedule.classServices)}catch{return!1}},ie=async ee=>{try{const Y=ee.app.studentData.ssid,ge=Gt(ht,"students"),q=zr(ge,gs("app.studentData.ssid","==",Y)),z=await dr(q);if(!z.empty&&!p.value)throw new Error(`Student with SSID ${Y} already exists`);const J={createdAt:Mo(),updatedAt:Mo(),app:{studentData:{firstName:ee.app.studentData.firstName||"",lastName:ee.app.studentData.lastName||"",grade:ee.app.studentData.grade||"",plan:ee.app.studentData.plan||"",caseManagerId:G(ee.app.studentData.caseManagerId)||"",ssid:Y},dates:{reviewDate:ee.app.dates.reviewDate||"",reevalDate:ee.app.dates.reevalDate||"",meetingDate:ee.app.dates.meetingDate||""},schedule:{periods:ee.app.schedule.periods||{1:"",2:"",3:"",4:"",5:"",6:"",SH:""},classServices:Array.isArray(ee.app.schedule.classServices)?ee.app.schedule.classServices:[]},providers:ee.app.providers||{speechId:"",otId:"",ptId:"",atId:"",audId:"",bisId:"",dhhId:"",hnId:"",mhId:"",omId:"",scId:"",swId:"",trId:"",viId:""},accommodations:{assessment:ee.app.accommodations.assessment||"",instruction:ee.app.accommodations.instruction||""},flags:{flag1:!!ee.app.flags.flag1,flag2:!!ee.app.flags.flag2},documents:{bipPdfUrl:ee.app.documents.bipPdfUrl||null,ataglancePdfUrl:ee.app.documents.ataglancePdfUrl||null}}};if(console.log("Saving student data:",{ssid:J.app.studentData.ssid,schedule:J.app.schedule.periods,providers:J.app.providers}),!ve(J))throw new Error("Invalid student data structure");if(!z.empty&&p.value){const he=z.docs[0];await xr(vt(ht,"students",he.id),J,{merge:!0})}else{const he=vt(Gt(ht,"students"));await xr(he,J)}}catch(Y){throw console.error("Error importing student:",Y),Y}},de=()=>{i.value=1,a.value="",o.value="",l.value=[],c.value=[],u.value={},d.value="",f.value=[],h.value=[],E.value={successful:0,failed:0,errors:[],processingTime:0},S.value&&(S.value.value="")};return(ee,Y)=>(N(),U("div",uH,[Y[30]||(Y[30]=m("div",{style:{background:"#e8f5e8",border:"2px solid #4caf50",padding:"10px","margin-bottom":"20px","border-radius":"4px","text-align":"center"}},[m("strong",null," StudentBulkImporter Component Loaded Successfully")],-1)),Y[31]||(Y[31]=m("div",{class:"importer-header"},[m("h2",null,"Add Students - Bulk Import"),m("p",{class:"description"}," Import multiple students from a CSV file. The system will map CSV fields to the app's database structure and allow you to preview and validate the data before importing. ")],-1)),i.value===1?(N(),U("div",dH,[Y[8]||(Y[8]=m("div",{class:"step-header"},[m("h3",null,"Step 1: Upload CSV File"),m("p",null,"Select a CSV file containing student data. The first row should contain column headers.")],-1)),m("div",fH,[m("div",hH,[m("input",{type:"file",ref_key:"fileInput",ref:S,onChange:C,accept:".csv",class:"file-input",id:"csv-file"},null,544),m("label",pH,[Y[4]||(Y[4]=m("span",{class:"file-icon"},"",-1)),m("span",mH,le(a.value||"Choose CSV File"),1)])]),d.value?(N(),U("div",vH,le(d.value),1)):Fe("",!0),a.value?(N(),U("div",gH,[m("p",null,[Y[5]||(Y[5]=m("strong",null,"File:",-1)),Me(" "+le(a.value),1)]),m("p",null,[Y[6]||(Y[6]=m("strong",null,"Size:",-1)),Me(" "+le(o.value),1)]),l.value.length>0?(N(),U("p",xH,[Y[7]||(Y[7]=m("strong",null,"Records:",-1)),Me(" "+le(l.value.length),1)])):Fe("",!0)])):Fe("",!0)]),Y[9]||(Y[9]=Xn('<div class="sample-format" data-v-494a4282><h4 data-v-494a4282>Expected CSV Format:</h4><div class="format-example" data-v-494a4282><code data-v-494a4282> SSID,FirstName,LastName,Grade,Plan,CaseManagerId,ReviewDate,ReevalDate,MeetingDate,Period1Teacher,Period2Teacher,Period3Teacher,Period4Teacher,Period5Teacher,Period6Teacher,SHTeacher,ClassServices,SpeechProvider,OTProvider,PTProvider,ATProvider,Audiologist,BISProvider,DHHProvider,HNProvider,MHProvider,OMProvider,SCProvider,SWProvider,TRProvider,VIProvider,Flag1,Flag2,BIPPdfUrl,AtAGlancePdfUrl,Assessment,Instruction<br data-v-494a4282> 123456789,John,Doe,9,IEP,user003,2025-07-15,2025-12-15,2025-07-10,user007,user008,user009,user010,user011,user012,user013,&quot;SDC: English,RSP: Math&quot;,user020,user021,user022,user023,user024,user025,user026,user027,user028,user029,user030,user031,user032,user033,true,false,https://example.com/bip.pdf,https://example.com/ataglance.pdf,&quot;Allow for test re-takes if the score is below average...&quot;,Divide larger projects or assignments into manageable parts... </code></div><p class="format-note" data-v-494a4282><strong data-v-494a4282>Required fields:</strong> SSID, FirstName, LastName, Grade<br data-v-494a4282><strong data-v-494a4282>App Structure:</strong> All fields map to the app data structure in your database<br data-v-494a4282><strong data-v-494a4282>Schedule fields:</strong> Period1Teacher through Period6Teacher and SHTeacher (Firebase user IDs like user001, user002, etc.)<br data-v-494a4282><strong data-v-494a4282>Provider fields:</strong> All service provider fields (Firebase user IDs like user020, user021, etc.)<br data-v-494a4282><strong data-v-494a4282>Class Services:</strong> Comma-separated list (e.g., &quot;SDC: English,RSP: Math,Co-teach: Science&quot;)<br data-v-494a4282><strong data-v-494a4282>Dates:</strong> Use YYYY-MM-DD format (e.g., 2025-07-15)<br data-v-494a4282><strong data-v-494a4282>Flags:</strong> Use true/false or 1/0<br data-v-494a4282><strong data-v-494a4282>Accommodations:</strong> Text fields for assessment and instruction<br data-v-494a4282><strong data-v-494a4282>Note:</strong> Teacher and provider IDs will be automatically mapped from names, emails, or Aeries IDs if user lookup is available </p></div>',1)),m("div",yH,[m("button",{onClick:j,disabled:!l.value.length,class:"btn btn-primary"}," Next: Map Fields ",8,EH)])])):Fe("",!0),i.value===2?(N(),U("div",_H,[Y[15]||(Y[15]=m("div",{class:"step-header"},[m("h3",null,"Step 2: Map CSV Fields"),m("p",null,"Map your CSV columns to the app's database fields. Required fields are marked with *")],-1)),m("div",bH,[m("div",SH,[Y[12]||(Y[12]=Xn('<div class="mapping-header" data-v-494a4282><div class="csv-column" data-v-494a4282>CSV Column</div><div class="arrow" data-v-494a4282></div><div class="app-field" data-v-494a4282>App Database Field</div><div class="sample-data" data-v-494a4282>Sample Data</div></div>',1)),(N(!0),U(Oe,null,Ge(c.value,(ge,q)=>(N(),U("div",{key:q,class:"mapping-row"},[m("div",TH,[m("strong",null,le(ge),1)]),Y[11]||(Y[11]=m("div",{class:"arrow"},"",-1)),m("div",AH,[Ve(m("select",{"onUpdate:modelValue":z=>u.value[ge]=z,class:"field-select"},Y[10]||(Y[10]=[Xn('<option value="" data-v-494a4282>-- Skip this field --</option><optgroup label="Required Fields" data-v-494a4282><option value="app.studentData.ssid" data-v-494a4282>SSID (State Student ID) *</option><option value="app.studentData.firstName" data-v-494a4282>First Name *</option><option value="app.studentData.lastName" data-v-494a4282>Last Name *</option><option value="app.studentData.grade" data-v-494a4282>Grade *</option></optgroup><optgroup label="Student Information" data-v-494a4282><option value="app.studentData.plan" data-v-494a4282>Plan Type (IEP/504/RTI/None)</option><option value="app.studentData.caseManagerId" data-v-494a4282>Case Manager ID</option></optgroup><optgroup label="Important Dates" data-v-494a4282><option value="app.dates.reviewDate" data-v-494a4282>Review Date</option><option value="app.dates.reevalDate" data-v-494a4282>Reevaluation Date</option><option value="app.dates.meetingDate" data-v-494a4282>Meeting Date</option></optgroup><optgroup label="Class Schedule" data-v-494a4282><option value="app.schedule.periods.1" data-v-494a4282>Period 1 Teacher ID</option><option value="app.schedule.periods.2" data-v-494a4282>Period 2 Teacher ID</option><option value="app.schedule.periods.3" data-v-494a4282>Period 3 Teacher ID</option><option value="app.schedule.periods.4" data-v-494a4282>Period 4 Teacher ID</option><option value="app.schedule.periods.5" data-v-494a4282>Period 5 Teacher ID</option><option value="app.schedule.periods.6" data-v-494a4282>Period 6 Teacher ID</option><option value="app.schedule.periods.SH" data-v-494a4282>Study Hall Teacher ID</option><option value="app.schedule.classServices" data-v-494a4282>Class Services (Comma-separated)</option></optgroup><optgroup label="Service Providers" data-v-494a4282><option value="app.providers.speechId" data-v-494a4282>Speech Provider ID</option><option value="app.providers.otId" data-v-494a4282>OT Provider ID</option><option value="app.providers.ptId" data-v-494a4282>PT Provider ID</option><option value="app.providers.atId" data-v-494a4282>AT Provider ID</option><option value="app.providers.audId" data-v-494a4282>Audiologist ID</option><option value="app.providers.bisId" data-v-494a4282>BIS Provider ID</option><option value="app.providers.dhhId" data-v-494a4282>DHH Provider ID</option><option value="app.providers.hnId" data-v-494a4282>HN Provider ID</option><option value="app.providers.mhId" data-v-494a4282>MH Provider ID</option><option value="app.providers.omId" data-v-494a4282>OM Provider ID</option><option value="app.providers.scId" data-v-494a4282>SC Provider ID</option><option value="app.providers.swId" data-v-494a4282>SW Provider ID</option><option value="app.providers.trId" data-v-494a4282>TR Provider ID</option><option value="app.providers.viId" data-v-494a4282>VI Provider ID</option></optgroup><optgroup label="Flags" data-v-494a4282><option value="app.flags.flag1" data-v-494a4282>Flag 1 (Boolean)</option><option value="app.flags.flag2" data-v-494a4282>Flag 2 (Boolean)</option></optgroup><optgroup label="Documents" data-v-494a4282><option value="app.documents.bipPdfUrl" data-v-494a4282>BIP PDF URL</option><option value="app.documents.ataglancePdfUrl" data-v-494a4282>At-A-Glance PDF URL</option></optgroup><optgroup label="Accommodations" data-v-494a4282><option value="app.accommodations.assessment" data-v-494a4282>Assessment Accommodations</option><option value="app.accommodations.instruction" data-v-494a4282>Instructional Accommodations</option></optgroup>',9)]),8,wH),[[hr,u.value[ge]]])]),m("div",CH,[m("code",null,le(w(ge)),1)])]))),128))]),m("div",{class:"auto-mapping-section"},[Y[13]||(Y[13]=m("h4",null,"Quick Mapping Options:",-1)),m("div",{class:"quick-actions"},[m("button",{onClick:b,class:"btn btn-secondary"}," Auto-map Common Fields "),m("button",{onClick:x,class:"btn btn-secondary"}," Clear All Mappings ")])]),f.value.length>0?(N(),U("div",IH,[Y[14]||(Y[14]=m("h4",null,"Mapping Issues:",-1)),m("ul",null,[(N(!0),U(Oe,null,Ge(f.value,ge=>(N(),U("li",{key:ge,class:"error-item"},le(ge),1))),128))])])):Fe("",!0)]),m("div",kH,[m("button",{onClick:O,class:"btn btn-secondary"}," Back "),m("button",{onClick:j,disabled:!I.value,class:"btn btn-primary"}," Next: Preview Data ",8,DH)])])):Fe("",!0),i.value===3?(N(),U("div",RH,[Y[23]||(Y[23]=m("div",{class:"step-header"},[m("h3",null,"Step 3: Preview and Validate"),m("p",null,"Review the mapped data before importing. Check for any validation errors.")],-1)),m("div",FH,[m("div",PH,[m("div",OH,[Y[16]||(Y[16]=m("span",{class:"stat-label"},"Total Records:",-1)),m("span",NH,le(l.value.length),1)]),m("div",LH,[Y[17]||(Y[17]=m("span",{class:"stat-label"},"Valid Records:",-1)),m("span",MH,le(R.value.length),1)]),m("div",BH,[Y[18]||(Y[18]=m("span",{class:"stat-label"},"Invalid Records:",-1)),m("span",UH,le(D.value.length),1)])]),m("div",VH,[m("table",$H,[Y[19]||(Y[19]=m("thead",null,[m("tr",null,[m("th",null,"Status"),m("th",null,"SSID"),m("th",null,"Name"),m("th",null,"Grade"),m("th",null,"Plan"),m("th",null,"Case Manager"),m("th",null,"Issues")])],-1)),m("tbody",null,[(N(!0),U(Oe,null,Ge(h.value,(ge,q)=>{var z,J,he,re,X,te,Se,Ee;return N(),U("tr",{key:q,class:ot({"invalid-row":ge.errors.length>0})},[m("td",null,[m("span",{class:ot(["status-badge",ge.errors.length>0?"error":"valid"])},le(ge.errors.length>0?"Error":"Valid"),3)]),m("td",null,le(ge.data.ssid||((J=(z=ge.data.app)==null?void 0:z.studentData)==null?void 0:J.ssid)||"Missing"),1),m("td",null,le(B(ge.data)),1),m("td",null,le(((re=(he=ge.data.app)==null?void 0:he.studentData)==null?void 0:re.grade)||"Missing"),1),m("td",null,le(((te=(X=ge.data.app)==null?void 0:X.studentData)==null?void 0:te.plan)||"Not set"),1),m("td",null,le(((Ee=(Se=ge.data.app)==null?void 0:Se.studentData)==null?void 0:Ee.caseManagerId)||"Not set"),1),m("td",null,[ge.errors.length>0?(N(),U("ul",HH,[(N(!0),U(Oe,null,Ge(ge.errors,be=>(N(),U("li",{key:be,class:"error-item"},le(be),1))),128))])):(N(),U("span",jH,"No issues"))])],2)}),128))])])]),m("div",GH,[Y[22]||(Y[22]=m("h4",null,"Import Options:",-1)),m("div",WH,[m("label",zH,[Ve(m("input",{type:"radio","onUpdate:modelValue":Y[0]||(Y[0]=ge=>v.value=ge),value:"valid-only"},null,512),[[cs,v.value]]),m("span",null,"Import only valid records ("+le(R.value.length)+" records)",1)]),m("label",KH,[Ve(m("input",{type:"radio","onUpdate:modelValue":Y[1]||(Y[1]=ge=>v.value=ge),value:"all"},null,512),[[cs,v.value]]),Y[20]||(Y[20]=m("span",null,"Import all records (may cause errors for invalid data)",-1))]),m("label",qH,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":Y[2]||(Y[2]=ge=>p.value=ge)},null,512),[[Et,p.value]]),Y[21]||(Y[21]=m("span",null,"Update existing students if SSID already exists",-1))])])])]),m("div",XH,[m("button",{onClick:O,class:"btn btn-secondary"}," Back "),m("button",{onClick:W,disabled:g.value||v.value==="valid-only"&&R.value.length===0,class:"btn btn-primary"},le(g.value?"Importing...":`Import ${v.value==="valid-only"?R.value.length:l.value.length} Students`),9,YH)])])):Fe("",!0),i.value===4?(N(),U("div",QH,[Y[28]||(Y[28]=m("div",{class:"step-header"},[m("h3",null,"Step 4: Import Complete"),m("p",null,"Your bulk import has been completed. Review the results below.")],-1)),m("div",JH,[m("div",ZH,[m("div",ej,[Y[24]||(Y[24]=m("span",{class:"stat-label"},"Successfully Imported:",-1)),m("span",tj,le(E.value.successful),1)]),m("div",rj,[Y[25]||(Y[25]=m("span",{class:"stat-label"},"Failed to Import:",-1)),m("span",nj,le(E.value.failed),1)]),m("div",sj,[Y[26]||(Y[26]=m("span",{class:"stat-label"},"Total Processing Time:",-1)),m("span",aj,le(E.value.processingTime)+"ms",1)])]),E.value.errors.length>0?(N(),U("div",ij,[Y[27]||(Y[27]=m("h4",null,"Import Errors:",-1)),m("ul",null,[(N(!0),U(Oe,null,Ge(E.value.errors,ge=>(N(),U("li",{key:ge,class:"error-item"},le(ge),1))),128))])])):Fe("",!0),m("div",oj,[m("button",{onClick:de,class:"btn btn-secondary"}," Import More Students "),m("button",{onClick:Y[3]||(Y[3]=ge=>ee.$emit("close")),class:"btn btn-primary"}," Close ")])])])):Fe("",!0),g.value?(N(),U("div",lj,[m("div",cj,[Y[29]||(Y[29]=m("div",{class:"loading-spinner"},null,-1)),m("p",null,"Importing students... "+le(y.value)+"%",1),m("div",uj,[m("div",{class:"progress-fill",style:In({width:y.value+"%"})},null,4)])])])):Fe("",!0)]))}},fj=bt(dj,[["__scopeId","data-v-494a4282"]]),hj={class:"admin-permissions"},pj={__name:"AdminPermissions",setup(t){return(e,r)=>(N(),U("div",hj,[r[0]||(r[0]=m("h2",null,"Role Permissions Matrix",-1)),nt(WC)]))}},mj=bt(pj,[["__scopeId","data-v-3b26c12f"]]);var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ex(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var KC={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(Nt,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var x=R(b);x.chunkSize=parseInt(x.chunkSize),b.step||b.chunk||(x.chunkSize=null),this._handle=new p(x),(this._handle.streamer=this)._config=x}).call(this,_),this.parseChunk=function(b,x){var w=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<w){let k=this._config.newline;k||(A=this._config.quoteChar||'"',k=this._handle.guessLineEndings(b,A)),b=[...b.split(k).slice(w)].join(k)}this.isFirstChunk&&C(this._config.beforeFirstChunk)&&(A=this._config.beforeFirstChunk(b))!==void 0&&(b=A),this.isFirstChunk=!1,this._halted=!1;var w=this._partialLine+b,A=(this._partialLine="",this._handle.parse(w,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(b=A.meta.cursor,w=(this._finished||(this._partialLine=w.substring(b-this._baseIndex),this._baseIndex=b),A&&A.data&&(this._rowCount+=A.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:A,workerId:c.WORKER_ID,finished:w});else if(C(this._config.chunk)&&!x){if(this._config.chunk(A,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=A=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(A.data),this._completeResults.errors=this._completeResults.errors.concat(A.errors),this._completeResults.meta=A.meta),this._completed||!w||!C(this._config.complete)||A&&A.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),w||A&&A.meta.paused||this._nextChunk(),A}this._halted=!0},this._sendError=function(b){C(this._config.error)?this._config.error(b):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:b,finished:!1})}}function d(_){var b;(_=_||{}).chunkSize||(_.chunkSize=c.RemoteChunkSize),u.call(this,_),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),i||(b.onload=D(this._chunkLoaded,this),b.onerror=D(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var x,w=this._config.downloadRequestHeaders;for(x in w)b.setRequestHeader(x,w[x])}var A;this._config.chunkSize&&(A=this._start+this._config.chunkSize-1,b.setRequestHeader("Range","bytes="+this._start+"-"+A));try{b.send(this._config.downloadRequestBody)}catch(k){this._chunkError(k.message)}i&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize||b.responseText.length,this._finished=!this._config.chunkSize||this._start>=(x=>(x=x.getResponseHeader("Content-Range"))!==null?parseInt(x.substring(x.lastIndexOf("/")+1)):-1)(b),this.parseChunk(b.responseText)))},this._chunkError=function(x){x=b.statusText||x,this._sendError(new Error(x))}}function f(_){(_=_||{}).chunkSize||(_.chunkSize=c.LocalChunkSize),u.call(this,_);var b,x,w=typeof FileReader<"u";this.stream=function(A){this._input=A,x=A.slice||A.webkitSlice||A.mozSlice,w?((b=new FileReader).onload=D(this._chunkLoaded,this),b.onerror=D(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input,k=(this._config.chunkSize&&(k=Math.min(this._start+this._config.chunkSize,this._input.size),A=x.call(A,this._start,k)),b.readAsText(A,this._config.encoding));w||this._chunkLoaded({target:{result:k}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(b.error)}}function h(_){var b;u.call(this,_=_||{}),this.stream=function(x){return b=x,this._nextChunk()},this._nextChunk=function(){var x,w;if(!this._finished)return x=this._config.chunkSize,b=x?(w=b.substring(0,x),b.substring(x)):(w=b,""),this._finished=!b,this.parseChunk(w)}}function v(_){u.call(this,_=_||{});var b=[],x=!0,w=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){w&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):x=!0},this._streamData=D(function(A){try{b.push(typeof A=="string"?A:A.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(k){this._streamError(k)}},this),this._streamError=D(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=D(function(){this._streamCleanUp(),w=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(_){var b,x,w,A,k=Math.pow(2,53),L=-k,G=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,P=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,M=this,H=0,B=0,Q=!1,j=!1,O=[],W={data:[],errors:[],meta:{}};function K(de){return _.skipEmptyLines==="greedy"?de.join("").trim()==="":de.length===1&&de[0].length===0}function se(){if(W&&w&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),w=!1),_.skipEmptyLines&&(W.data=W.data.filter(function(ge){return!K(ge)})),ve()){let ge=function(q,z){C(_.transformHeader)&&(q=_.transformHeader(q,z)),O.push(q)};if(W)if(Array.isArray(W.data[0])){for(var de=0;ve()&&de<W.data.length;de++)W.data[de].forEach(ge);W.data.splice(0,1)}else W.data.forEach(ge)}function ee(ge,q){for(var z=_.header?{}:[],J=0;J<ge.length;J++){var he=J,re=ge[J],re=((X,te)=>(Se=>(_.dynamicTypingFunction&&_.dynamicTyping[Se]===void 0&&(_.dynamicTyping[Se]=_.dynamicTypingFunction(Se)),(_.dynamicTyping[Se]||_.dynamicTyping)===!0))(X)?te==="true"||te==="TRUE"||te!=="false"&&te!=="FALSE"&&((Se=>{if(G.test(Se)&&(Se=parseFloat(Se),L<Se&&Se<k))return 1})(te)?parseFloat(te):P.test(te)?new Date(te):te===""?null:te):te)(he=_.header?J>=O.length?"__parsed_extra":O[J]:he,re=_.transform?_.transform(re,he):re);he==="__parsed_extra"?(z[he]=z[he]||[],z[he].push(re)):z[he]=re}return _.header&&(J>O.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+O.length+" fields but parsed "+J,B+q):J<O.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+O.length+" fields but parsed "+J,B+q)),z}var Y;W&&(_.header||_.dynamicTyping||_.transform)&&(Y=1,!W.data.length||Array.isArray(W.data[0])?(W.data=W.data.map(ee),Y=W.data.length):W.data=ee(W.data,0),_.header&&W.meta&&(W.meta.fields=O),B+=Y)}function ve(){return _.header&&O.length===0}function ie(de,ee,Y,ge){de={type:de,code:ee,message:Y},ge!==void 0&&(de.row=ge),W.errors.push(de)}C(_.step)&&(A=_.step,_.step=function(de){W=de,ve()?se():(se(),W.data.length!==0&&(H+=de.data.length,_.preview&&H>_.preview?x.abort():(W.data=W.data[0],A(W,M))))}),this.parse=function(de,ee,Y){var ge=_.quoteChar||'"',ge=(_.newline||(_.newline=this.guessLineEndings(de,ge)),w=!1,_.delimiter?C(_.delimiter)&&(_.delimiter=_.delimiter(de),W.meta.delimiter=_.delimiter):((ge=((q,z,J,he,re)=>{var X,te,Se,Ee;re=re||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var be=0;be<re.length;be++){for(var ke,Be=re[be],Ie=0,je=0,Ue=0,He=(Se=void 0,new y({comments:he,delimiter:Be,newline:z,preview:10}).parse(q)),qe=0;qe<He.data.length;qe++)J&&K(He.data[qe])?Ue++:(ke=He.data[qe].length,je+=ke,Se===void 0?Se=ke:0<ke&&(Ie+=Math.abs(ke-Se),Se=ke));0<He.data.length&&(je/=He.data.length-Ue),(te===void 0||Ie<=te)&&(Ee===void 0||Ee<je)&&1.99<je&&(te=Ie,X=Be,Ee=je)}return{successful:!!(_.delimiter=X),bestDelimiter:X}})(de,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=ge.bestDelimiter:(w=!0,_.delimiter=c.DefaultDelimiter),W.meta.delimiter=_.delimiter),R(_));return _.preview&&_.header&&ge.preview++,b=de,x=new y(ge),W=x.parse(b,ee,Y),se(),Q?{meta:{paused:!0}}:W||{meta:{paused:!1}}},this.paused=function(){return Q},this.pause=function(){Q=!0,x.abort(),b=C(_.chunk)?"":b.substring(x.getCharIndex())},this.resume=function(){M.streamer._halted?(Q=!1,M.streamer.parseChunk(b,!0)):setTimeout(M.resume,3)},this.aborted=function(){return j},this.abort=function(){j=!0,x.abort(),W.meta.aborted=!0,C(_.complete)&&_.complete(W),b=""},this.guessLineEndings=function(q,ge){q=q.substring(0,1048576);var ge=new RegExp(g(ge)+"([^]*?)"+g(ge),"gm"),Y=(q=q.replace(ge,"")).split("\r"),ge=q.split(`
`),q=1<ge.length&&ge[0].length<Y[0].length;if(Y.length===1||q)return`
`;for(var z=0,J=0;J<Y.length;J++)Y[J][0]===`
`&&z++;return z>=Y.length/2?`\r
`:"\r"}}function g(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(_){var b=(_=_||{}).delimiter,x=_.newline,w=_.comments,A=_.step,k=_.preview,L=_.fastMode,G=null,P=!1,M=_.quoteChar==null?'"':_.quoteChar,H=M;if(_.escapeChar!==void 0&&(H=_.escapeChar),(typeof b!="string"||-1<c.BAD_DELIMITERS.indexOf(b))&&(b=","),w===b)throw new Error("Comment character same as delimiter");w===!0?w="#":(typeof w!="string"||-1<c.BAD_DELIMITERS.indexOf(w))&&(w=!1),x!==`
`&&x!=="\r"&&x!==`\r
`&&(x=`
`);var B=0,Q=!1;this.parse=function(j,O,W){if(typeof j!="string")throw new Error("Input must be a string");var K=j.length,se=b.length,ve=x.length,ie=w.length,de=C(A),ee=[],Y=[],ge=[],q=B=0;if(!j)return Ie();if(L||L!==!1&&j.indexOf(M)===-1){for(var z=j.split(x),J=0;J<z.length;J++){if(ge=z[J],B+=ge.length,J!==z.length-1)B+=x.length;else if(W)return Ie();if(!w||ge.substring(0,ie)!==w){if(de){if(ee=[],Ee(ge.split(b)),je(),Q)return Ie()}else Ee(ge.split(b));if(k&&k<=J)return ee=ee.slice(0,k),Ie(!0)}}return Ie()}for(var he=j.indexOf(b,B),re=j.indexOf(x,B),X=new RegExp(g(H)+g(M),"g"),te=j.indexOf(M,B);;)if(j[B]===M)for(te=B,B++;;){if((te=j.indexOf(M,te+1))===-1)return W||Y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ee.length,index:B}),ke();if(te===K-1)return ke(j.substring(B,te).replace(X,M));if(M===H&&j[te+1]===H)te++;else if(M===H||te===0||j[te-1]!==H){he!==-1&&he<te+1&&(he=j.indexOf(b,te+1));var Se=be((re=re!==-1&&re<te+1?j.indexOf(x,te+1):re)===-1?he:Math.min(he,re));if(j.substr(te+1+Se,se)===b){ge.push(j.substring(B,te).replace(X,M)),j[B=te+1+Se+se]!==M&&(te=j.indexOf(M,B)),he=j.indexOf(b,B),re=j.indexOf(x,B);break}if(Se=be(re),j.substring(te+1+Se,te+1+Se+ve)===x){if(ge.push(j.substring(B,te).replace(X,M)),Be(te+1+Se+ve),he=j.indexOf(b,B),te=j.indexOf(M,B),de&&(je(),Q))return Ie();if(k&&ee.length>=k)return Ie(!0);break}Y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ee.length,index:B}),te++}}else if(w&&ge.length===0&&j.substring(B,B+ie)===w){if(re===-1)return Ie();B=re+ve,re=j.indexOf(x,B),he=j.indexOf(b,B)}else if(he!==-1&&(he<re||re===-1))ge.push(j.substring(B,he)),B=he+se,he=j.indexOf(b,B);else{if(re===-1)break;if(ge.push(j.substring(B,re)),Be(re+ve),de&&(je(),Q))return Ie();if(k&&ee.length>=k)return Ie(!0)}return ke();function Ee(Ue){ee.push(Ue),q=B}function be(Ue){var He=0;return He=Ue!==-1&&(Ue=j.substring(te+1,Ue))&&Ue.trim()===""?Ue.length:He}function ke(Ue){return W||(Ue===void 0&&(Ue=j.substring(B)),ge.push(Ue),B=K,Ee(ge),de&&je()),Ie()}function Be(Ue){B=Ue,Ee(ge),ge=[],re=j.indexOf(x,B)}function Ie(Ue){if(_.header&&!O&&ee.length&&!P){var He=ee[0],qe=Object.create(null),ye=new Set(He);let xe=!1;for(let _e=0;_e<He.length;_e++){let Pe=He[_e];if(qe[Pe=C(_.transformHeader)?_.transformHeader(Pe,_e):Pe]){let We,rt=qe[Pe];for(;We=Pe+"_"+rt,rt++,ye.has(We););ye.add(We),He[_e]=We,qe[Pe]++,xe=!0,(G=G===null?{}:G)[We]=Pe}else qe[Pe]=1,He[_e]=Pe;ye.add(Pe)}xe&&console.warn("Duplicate headers found and renamed."),P=!0}return{data:ee,errors:Y,meta:{delimiter:b,linebreak:x,aborted:Q,truncated:!!Ue,cursor:q+(O||0),renamedHeaders:G}}}function je(){A(Ie()),ee=[],Y=[]}},this.abort=function(){Q=!0},this.getCharIndex=function(){return B}}function E(_){var b=_.data,x=o[b.workerId],w=!1;if(b.error)x.userError(b.error,b.file);else if(b.results&&b.results.data){var A={abort:function(){w=!0,S(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(C(x.userStep)){for(var k=0;k<b.results.data.length&&(x.userStep({data:b.results.data[k],errors:b.results.errors,meta:b.results.meta},A),!w);k++);delete b.results}else C(x.userChunk)&&(x.userChunk(b.results,A,b.file),delete b.results)}b.finished&&!w&&S(b.workerId,b.results)}function S(_,b){var x=o[_];C(x.userComplete)&&x.userComplete(b),x.terminate(),delete o[_]}function I(){throw new Error("Not implemented.")}function R(_){if(typeof _!="object"||_===null)return _;var b,x=Array.isArray(_)?[]:{};for(b in _)x[b]=R(_[b]);return x}function D(_,b){return function(){_.apply(b,arguments)}}function C(_){return typeof _=="function"}return c.parse=function(_,b){var x=(b=b||{}).dynamicTyping||!1;if(C(x)&&(b.dynamicTypingFunction=x,x={}),b.dynamicTyping=x,b.transform=!!C(b.transform)&&b.transform,!b.worker||!c.WORKERS_SUPPORTED)return x=null,c.NODE_STREAM_INPUT,typeof _=="string"?(_=(w=>w.charCodeAt(0)!==65279?w:w.slice(1))(_),x=new(b.download?d:h)(b)):_.readable===!0&&C(_.read)&&C(_.on)?x=new v(b):(n.File&&_ instanceof File||_ instanceof Object)&&(x=new f(b)),x.stream(_);(x=(()=>{var w;return!!c.WORKERS_SUPPORTED&&(w=(()=>{var A=n.URL||n.webkitURL||null,k=r.toString();return c.BLOB_URL||(c.BLOB_URL=A.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",k,")();"],{type:"text/javascript"})))})(),(w=new n.Worker(w)).onmessage=E,w.id=l++,o[w.id]=w)})()).userStep=b.step,x.userChunk=b.chunk,x.userComplete=b.complete,x.userError=b.error,b.step=C(b.step),b.chunk=C(b.chunk),b.complete=C(b.complete),b.error=C(b.error),delete b.worker,x.postMessage({input:_,config:b,workerId:x.id})},c.unparse=function(_,b){var x=!1,w=!0,A=",",k=`\r
`,L='"',G=L+L,P=!1,M=null,H=!1,B=((()=>{if(typeof b=="object"){if(typeof b.delimiter!="string"||c.BAD_DELIMITERS.filter(function(O){return b.delimiter.indexOf(O)!==-1}).length||(A=b.delimiter),typeof b.quotes!="boolean"&&typeof b.quotes!="function"&&!Array.isArray(b.quotes)||(x=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||(P=b.skipEmptyLines),typeof b.newline=="string"&&(k=b.newline),typeof b.quoteChar=="string"&&(L=b.quoteChar),typeof b.header=="boolean"&&(w=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");M=b.columns}b.escapeChar!==void 0&&(G=b.escapeChar+L),b.escapeFormulae instanceof RegExp?H=b.escapeFormulae:typeof b.escapeFormulae=="boolean"&&b.escapeFormulae&&(H=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(L),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return Q(null,_,P);if(typeof _[0]=="object")return Q(M||Object.keys(_[0]),_,P)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||M),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),Q(_.fields||[],_.data||[],P);throw new Error("Unable to serialize unrecognized input");function Q(O,W,K){var se="",ve=(typeof O=="string"&&(O=JSON.parse(O)),typeof W=="string"&&(W=JSON.parse(W)),Array.isArray(O)&&0<O.length),ie=!Array.isArray(W[0]);if(ve&&w){for(var de=0;de<O.length;de++)0<de&&(se+=A),se+=j(O[de],de);0<W.length&&(se+=k)}for(var ee=0;ee<W.length;ee++){var Y=(ve?O:W[ee]).length,ge=!1,q=ve?Object.keys(W[ee]).length===0:W[ee].length===0;if(K&&!ve&&(ge=K==="greedy"?W[ee].join("").trim()==="":W[ee].length===1&&W[ee][0].length===0),K==="greedy"&&ve){for(var z=[],J=0;J<Y;J++){var he=ie?O[J]:J;z.push(W[ee][he])}ge=z.join("").trim()===""}if(!ge){for(var re=0;re<Y;re++){0<re&&!q&&(se+=A);var X=ve&&ie?O[re]:re;se+=j(W[ee][X],re)}ee<W.length-1&&(!K||0<Y&&!q)&&(se+=k)}}return se}function j(O,W){var K,se;return O==null?"":O.constructor===Date?JSON.stringify(O).slice(1,25):(se=!1,H&&typeof O=="string"&&H.test(O)&&(O="'"+O,se=!0),K=O.toString().replace(B,G),(se=se||x===!0||typeof x=="function"&&x(O,W)||Array.isArray(x)&&x[W]||((ve,ie)=>{for(var de=0;de<ie.length;de++)if(-1<ve.indexOf(ie[de]))return!0;return!1})(K,c.BAD_DELIMITERS)||-1<K.indexOf(A)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?L+K+L:K)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=y,c.ParserHandle=p,c.NetworkStreamer=d,c.FileStreamer=f,c.StringStreamer=h,c.ReadableStreamStreamer=v,n.jQuery&&((s=n.jQuery).fn.parse=function(_){var b=_.config||{},x=[];return this.each(function(k){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)x.push({file:this.files[L],inputElem:this,instanceConfig:s.extend({},b)})}),w(),this;function w(){if(x.length===0)C(_.complete)&&_.complete();else{var k,L,G,P,M=x[0];if(C(_.before)){var H=_.before(M.file,M.inputElem);if(typeof H=="object"){if(H.action==="abort")return k="AbortError",L=M.file,G=M.inputElem,P=H.reason,void(C(_.error)&&_.error({name:k},L,G,P));if(H.action==="skip")return void A();typeof H.config=="object"&&(M.instanceConfig=s.extend(M.instanceConfig,H.config))}else if(H==="skip")return void A()}var B=M.instanceConfig.complete;M.instanceConfig.complete=function(Q){C(B)&&B(Q,M.file,M.inputElem),A()},c.parse(M.file,M.instanceConfig)}}function A(){x.splice(0,1),w()}}),a&&(n.onmessage=function(_){_=_.data,c.WORKER_ID===void 0&&_&&(c.WORKER_ID=_.workerId),typeof _.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(_.input,_.config),finished:!0}):(n.File&&_.input instanceof File||_.input instanceof Object)&&(_=c.parse(_.input,_.config))&&n.postMessage({workerId:c.WORKER_ID,results:_,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(f.prototype=Object.create(u.prototype)).constructor=f,(h.prototype=Object.create(h.prototype)).constructor=h,(v.prototype=Object.create(u.prototype)).constructor=v,c})})(KC);var vj=KC.exports;const qC=zC(vj),_o=no();function XC(t){return t.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,r)=>r.toUpperCase()).replace(/^[A-Z]/,e=>e.toLowerCase())}async function gj(t,e){if(!t)return null;const r=Object.values(e).find(n=>{var s;return n.aeriesId===t||n.aeriesId===parseInt(t)||((s=n.aeriesId)==null?void 0:s.toString())===(t==null?void 0:t.toString())});return r?r.id:(console.warn(`No Firebase user found for Aeries teacher ID: ${t}`),null)}function xj(t){return{sourcedId:"stateId",SSID:"stateId",StateStudentID:"stateId",StudentNumber:"localId",givenName:"firstName",FirstName:"firstName",familyName:"lastName",LastName:"lastName",middleName:"middleName",MiddleName:"middleName",email:"email",Email:"email",phone:"phone",Phone:"phone",dateOfBirth:"birthDate",DOB:"birthDate",sex:"gender",Gender:"gender",grade:"grade",Grade:"grade",Address:"address",City:"city",State:"state",ZipCode:"zipCode",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",AttendanceRate:"attendanceRate",attendanceRate:"attendanceRate",Period1TeacherId:"schedule.periods.1",period1TeacherId:"schedule.periods.1",Period2TeacherId:"schedule.periods.2",period2TeacherId:"schedule.periods.2",Period3TeacherId:"schedule.periods.3",period3TeacherId:"schedule.periods.3",Period4TeacherId:"schedule.periods.4",period4TeacherId:"schedule.periods.4",Period5TeacherId:"schedule.periods.5",period5TeacherId:"schedule.periods.5",Period6TeacherId:"schedule.periods.6",period6TeacherId:"schedule.periods.6",Period7TeacherId:"schedule.periods.7",period7TeacherId:"schedule.periods.7",SHTeacherId:"schedule.periods.SH",shTeacherId:"schedule.periods.SH"}[t]||XC(t)}function yj(t){return{SSID:"ssid",FirstName:"firstName",LastName:"lastName",MiddleName:"middleName",Grade:"grade",DOB:"dob",Gender:"gender",Ethnicity:"ethnicity",School:"school",Address:"address",City:"city",State:"state",ZipCode:"zipCode",Phone:"phone",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",ELL:"ell",504:"504",IEP:"iep",CaseManager:"caseManager",Disability:"disability",ServiceMinutes:"serviceMinutes",Goals:"goals",Notes:"notes",Plan:"plan",ReviewDate:"reviewDate",ReevalDate:"reevalDate",MeetingDate:"meetingDate",SpeechProvider:"speechProvider",MHProvider:"mhProvider",OTProvider:"otProvider",ProgramAccommodations:"programAccommodations",Accommodations:"programAccommodations",IEP_Services:"iepServices"}[t]||XC(t)}async function Ej(t){return new Promise((e,r)=>{qC.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));const i=Object.keys(s[0]).map(o=>o.trim().toLowerCase());if(!(i.includes("sourcedid")||i.includes("ssid")||i.includes("statestudentid")))return r(new Error("Missing required 'sourcedId' or 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function _j(t,e){var a;let r=0;const n=Gt(_o,"users"),s=await dr(n),i={};s.forEach(o=>{i[o.id]={id:o.id,...o.data()}}),console.log(`Loaded ${Object.keys(i).length} users for teacher ID mapping`);for(const o of t){const l=(a=o.sourcedId||o.SSID||o.ssid||o.StateStudentID||o.stateStudentId)==null?void 0:a.trim();if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={firstName:"",lastName:"",grade:"",birthDate:"",gender:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",parentName:"",parentPhone:"",parentEmail:"",attendanceRate:"",schedule:{periods:{}}};for(const u of e){const d=xj(u),f=o[u],h=f!=null&&typeof f=="string"?f.trim():f!=null?String(f):null;if(d.startsWith("schedule.periods.")){const v=d.split(".")[2];if(h){const p=await gj(h,i);p?(c.schedule.periods[v]=p,console.log(`Mapped Aeries teacher ID ${h} to Firebase user ID ${p} for period ${v}`)):console.warn(`Could not map Aeries teacher ID ${h} for period ${v}`)}}else c[d]=h}c.lastAeriesImport=new Date().toISOString(),console.log("Final aeriesData.schedule structure:",JSON.stringify(c.schedule,null,2));try{const u=Gt(_o,"students"),d=zr(u,gs("app.studentData.ssid","==",l)),f=await dr(d);if(f.empty){const h=vt(Gt(_o,"students")),v={app:{studentData:{ssid:l}},aeries:c,createdAt:Mo()};await xr(h,v),console.log(`Created new student ${h.id} with Aeries data for SSID ${l}`)}else{const h=f.docs[0];await xr(vt(_o,"students",h.id),{aeries:c},{merge:!0}),console.log(`Updated existing student ${h.id} with Aeries data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import Aeries data for SSID ${l}:`,u)}}return r}async function bj(t){return new Promise((e,r)=>{qC.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));if(!Object.keys(s[0]).some(a=>a.trim().toLowerCase()==="ssid"))return r(new Error("Missing required 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function Sj(t,e){var n,s,i,a;let r=0;for(const o of t){const l=((n=o.SSID)==null?void 0:n.trim())||((s=o.ssid)==null?void 0:s.trim());if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={};for(const u of e){const d=yj(u);u==="IEP_Services"||u==="iep_services"?c[d]=((i=o[u])==null?void 0:i.split(";").map(f=>f.trim()))||[]:u==="ProgramAccommodations"||u==="Accommodations"?c[d]=((a=o[u])==null?void 0:a.split(";").map(f=>f.trim()))||[]:c[d]=o[u]}c.lastSeisImport=new Date().toISOString();try{const u=Gt(_o,"students"),d=zr(u,gs("app.studentData.ssid","==",l)),f=await dr(d);if(f.empty){const h=vt(Gt(_o,"students")),v={app:{studentData:{ssid:l}},seis:c,createdAt:Mo()};await xr(h,v),console.log(`Created new student ${h.id} with SEIS data for SSID ${l}`)}else{const h=f.docs[0];await xr(vt(_o,"students",h.id),{seis:c},{merge:!0}),console.log(`Updated existing student ${h.id} with SEIS data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import SEIS data for SSID ${l}:`,u)}}return r}const Tj={name:"SeisImport",setup(){const t=pe(null),e=pe(null),r=pe([]),n=pe([]),s=pe([]),i=pe([]),a=pe(""),o=pe(!1),l=Ae(()=>r.value.length>0&&s.value.length>0),c=(h,v=!1)=>{a.value=h,o.value=v,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:h=>{const v=h.target.files[0];if(v){const p=Ld(v,{allowedTypes:["csv"],maxSize:10485760,fieldName:"SEIS Import File"});if(!p.isValid){c(p.error,!0),h.target.value="";return}const g=sn(v.name);if(!g.isSafe){c(`File name contains potentially dangerous content: ${g.threats.join(", ")}`,!0),h.target.value="";return}e.value=v}},previewFile:async()=>{const h=e.value;if(!h){c(" Please select a CSV file.",!0);return}if(!ys("seisPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const g=(await bj(h)).map(E=>{const S={};return Object.entries(E).forEach(([I,R])=>{const D=Ar(I,{trim:!0,maxLength:100,removeDangerous:!0});let C=R;if(typeof R=="string"){C=Ar(R,{trim:!0,maxLength:500,removeDangerous:!0});const _=sn(C);_.isSafe||(console.warn(`Security threat detected in SEIS data: ${_.threats.join(", ")}`),C="")}S[D]=C}),S});r.value=g,c(` Loaded ${r.value.length} rows.`);const y=Object.keys(r.value[0]||{}).filter(E=>E.length>0);n.value=y,s.value=[...y],i.value=r.value.slice(0,5)}catch(p){c(` Error: ${p.message}`,!0),console.error("SEIS Parse Error:",p)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!ys("seisImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} SEIS records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const v=r.value.map(g=>{const y={};return s.value.forEach(E=>{g[E]!==void 0&&(y[E]=g[E])}),y}),p=v.filter(g=>Object.values(g).some(E=>E&&typeof E=="string"&&E.trim().length>0));if(p.length===0){c(" No valid records found to import.",!0);return}if(p.length!==v.length){const g=v.length-p.length;c(` Skipping ${g} invalid records. Importing ${p.length} valid records.`)}await Sj(p,s.value),c(` Successfully imported ${p.length} SEIS records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(v){c(` Import failed: ${v.message}`,!0),console.error("SEIS Import Error:",v)}}}}}},Aj={class:"seis-import"},wj=["disabled"],Cj={key:0,id:"seis-field-options"},Ij=["value"],kj={key:1,id:"seis-preview-container",style:{"margin-top":"1rem"}},Dj={border:"1",cellpadding:"4"},Rj=["disabled"];function Fj(t,e,r,n,s,i){return N(),U("div",Aj,[e[5]||(e[5]=m("h3",null,"Upload SEIS CSV",-1)),m("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),m("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,wj),n.fieldOptions.length>0?(N(),U("div",Cj,[e[4]||(e[4]=m("h4",null,"Select fields to import:",-1)),(N(!0),U(Oe,null,Ge(n.fieldOptions,a=>(N(),U("label",{key:a},[Ve(m("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,Ij),[[Et,n.selectedFields]]),Me(" "+le(a),1)]))),128))])):Fe("",!0),n.previewData.length>0?(N(),U("div",kj,[m("table",Dj,[m("thead",null,[m("tr",null,[(N(!0),U(Oe,null,Ge(n.fieldOptions,a=>(N(),U("th",{key:a},le(a),1))),128))])]),m("tbody",null,[(N(!0),U(Oe,null,Ge(n.previewData,(a,o)=>(N(),U("tr",{key:o},[(N(!0),U(Oe,null,Ge(n.fieldOptions,l=>(N(),U("td",{key:l},le(a[l]||""),1))),128))]))),128))])]),m("p",null,"Showing first "+le(n.previewData.length)+" of "+le(n.parsedData.length)+" rows.",1)])):Fe("",!0),m("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,Rj),m("p",{class:ot(["status-msg",{error:n.isError}])},le(n.statusMessage),3)])}const Pj=bt(Tj,[["render",Fj],["__scopeId","data-v-b942d3b4"]]),Oj={name:"AeriesImport",setup(){const t=pe(null),e=pe(null),r=pe([]),n=pe([]),s=pe([]),i=pe([]),a=pe(""),o=pe(!1),l=Ae(()=>r.value.length>0&&s.value.length>0),c=(h,v=!1)=>{a.value=h,o.value=v,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:h=>{const v=h.target.files[0];if(v){const p=Ld(v,{allowedTypes:["csv"],maxSize:10485760,fieldName:"Aeries Import File"});if(!p.isValid){c(p.error,!0),h.target.value="";return}const g=sn(v.name);if(!g.isSafe){c(`File name contains potentially dangerous content: ${g.threats.join(", ")}`,!0),h.target.value="";return}e.value=v}},previewFile:async()=>{const h=e.value;if(!h){c(" Please select a CSV file.",!0);return}if(!ys("aeriesPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const g=(await Ej(h)).map(E=>{const S={};return Object.entries(E).forEach(([I,R])=>{const D=Ar(I,{trim:!0,maxLength:100,removeDangerous:!0});let C=R;if(typeof R=="string"){C=Ar(R,{trim:!0,maxLength:500,removeDangerous:!0});const _=sn(C);_.isSafe||(console.warn(`Security threat detected in Aeries data: ${_.threats.join(", ")}`),C="")}S[D]=C}),S});r.value=g,c(` Loaded ${r.value.length} rows.`);const y=Object.keys(r.value[0]||{}).filter(E=>E.length>0);n.value=y,s.value=[...y],i.value=r.value.slice(0,5)}catch(p){c(` Error: ${p.message}`,!0),console.error("Aeries Parse Error:",p)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!ys("aeriesImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} Aeries records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const v=r.value.map(g=>{const y={};return s.value.forEach(E=>{g[E]!==void 0&&(y[E]=g[E])}),y}),p=v.filter(g=>Object.values(g).some(E=>E&&typeof E=="string"&&E.trim().length>0));if(p.length===0){c(" No valid records found to import.",!0);return}if(p.length!==v.length){const g=v.length-p.length;c(` Skipping ${g} invalid records. Importing ${p.length} valid records.`)}await _j(p,s.value),c(` Successfully imported ${p.length} Aeries records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(v){c(` Import failed: ${v.message}`,!0),console.error("Aeries Import Error:",v)}}}}}},Nj={class:"aeries-import"},Lj=["disabled"],Mj={key:0,id:"aeries-field-options"},Bj=["value"],Uj={key:1,id:"aeries-preview-container",style:{"margin-top":"1rem"}},Vj={border:"1",cellpadding:"4"},$j=["disabled"];function Hj(t,e,r,n,s,i){return N(),U("div",Nj,[e[5]||(e[5]=m("h3",null,"Upload Aeries CSV",-1)),m("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),m("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,Lj),n.fieldOptions.length>0?(N(),U("div",Mj,[e[4]||(e[4]=m("h4",null,"Select fields to import:",-1)),(N(!0),U(Oe,null,Ge(n.fieldOptions,a=>(N(),U("label",{key:a},[Ve(m("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,Bj),[[Et,n.selectedFields]]),Me(" "+le(a),1)]))),128))])):Fe("",!0),n.previewData.length>0?(N(),U("div",Uj,[m("table",Vj,[m("thead",null,[m("tr",null,[(N(!0),U(Oe,null,Ge(n.fieldOptions,a=>(N(),U("th",{key:a},le(a),1))),128))])]),m("tbody",null,[(N(!0),U(Oe,null,Ge(n.previewData,(a,o)=>(N(),U("tr",{key:o},[(N(!0),U(Oe,null,Ge(n.fieldOptions,l=>(N(),U("td",{key:l},le(a[l]||""),1))),128))]))),128))])]),m("p",null,"Showing first "+le(n.previewData.length)+" of "+le(n.parsedData.length)+" rows.",1)])):Fe("",!0),m("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,$j),m("p",{class:ot(["status-msg",{error:n.isError}])},le(n.statusMessage),3)])}const jj=bt(Oj,[["render",Hj],["__scopeId","data-v-b40a9547"]]);function Gj(){const t=jl(bd()),e=pe(!1),r=pe(!1),n=pe(""),s=pe(""),i=pe(!1),a=Ns({baseUrl:"encrypted",clientId:"encrypted",clientSecret:"encrypted",selectedSchoolId:"school123",selectedClassIds:["class1","class2"],selectedApiTypes:{oneroster:!0,nativeAeries:!0},selectedEndpoints:["/schools","/students","/api/special-education/students"]}),o=pe([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"},{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),l=(w,A=!1)=>{s.value=w,i.value=A,setTimeout(()=>{s.value="",i.value=!1},5e3)},c=()=>{a.baseUrl="https://demo.aeries.net/aeries",a.clientId="1279e5c6b747b6d62b7c76db3a205d40eb7458e678a90493d537d5af6b953550",a.clientSecret="68019dbf8d8ba82980dd148eecc3977ac0d7f1f040d444225874c88eb80b9c1a",l("Demo credentials loaded. Click Connect to test.")},u=async()=>{if(!a.baseUrl||!a.clientId||!a.clientSecret)return l("Please fill in all connection fields.",!0),!1;r.value=!0,l("Connecting to Aeries API...");try{const k=(await fa(t,"getAeriesToken")({baseUrl:a.baseUrl,clientId:a.clientId,clientSecret:a.clientSecret})).data;if(k.success&&k.access_token)return n.value=k.access_token,e.value=!0,l(" Successfully connected to Aeries API!"),!0;throw new Error("No access token received")}catch(w){const A=w.message||"Connection failed";return l(` Connection failed: ${A}`,!0),console.error("Aeries API Connection Error:",w),!1}finally{r.value=!1}},d=()=>{e.value=!1,n.value="",l("Disconnected from Aeries API.")},f=async w=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const L=(await fa(t,"testAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:w,accessToken:n.value})).data;if(L.success)return l(` Successfully fetched data from ${w}`),{data:L.data,responseTime:L.responseTime};throw new Error(L.error||"API call failed")}catch(A){const k=A.message||"API call failed";return l(` API call failed: ${k}`,!0),console.error("Aeries API Test Error:",A),{error:k}}},h=async w=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const L=(await fa(t,"testCustomAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:w,accessToken:n.value})).data;return L.success?(l(` Successfully fetched data from ${w}`),{data:L.data,responseTime:L.responseTime}):{error:L.error||"API call failed"}}catch(A){const k=A.message||"API call failed";return l(` API call failed: ${k}`,!0),console.error("Custom Aeries API Test Error:",A),{error:k}}},v=async()=>await f("/students"),p=async()=>await f("/teachers"),g=async()=>{const w=["/api/special-education/students","/api/students/special-education","/api/iep/students","/api/504/students"];for(const A of w){const k=await h(A);if(k&&!k.error)return k}return{error:"No special education endpoints found"}},y=async()=>await h("/api/special-education/ieps"),E=async()=>await h("/api/special-education/504-plans"),S=async()=>await h("/api/special-education/accommodations"),I=async()=>await h("/api/special-education/services"),R=async()=>await h("/api/special-education/case-managers"),D=async()=>{const w={},A=o.value.filter(k=>k.path.includes("special-education")||k.path.includes("iep")||k.path.includes("504"));for(const k of A)w[k.path]=await h(k.path);return w},C=async()=>{var A;const w=await f("/students");if(w&&!w.error&&w.data){const k=((A=w.data.students)==null?void 0:A[0])||w.data[0],L=k&&(k.specialEducation||k.iep||k.plan504||k.disabilities||k.accommodations);return{success:!0,hasSpecialEdFields:L,sampleStudent:k,message:L?"OneRoster includes special education data!":"OneRoster does not include special education data"}}return w},_=async()=>{const w=["?filter=specialEducation=true","?filter=iep=true","?filter=plan504=true","?filter=disabilities=*","?filter=accommodations=*"],A={};for(const k of w)A[k]=await f(`/students${k}`);return A};async function b({baseUrl:w,accessToken:A}){const k=jl(),P=await fa(k,"testAeriesEndpoint")({baseUrl:w,endpoint:"/schools",accessToken:A});return P.data.data.orgs||P.data.data.schools||P.data.data||[]}async function x({baseUrl:w,accessToken:A,schoolId:k}){const L=jl(),G=fa(L,"testAeriesEndpoint"),P=`/classes?filter=school.sourcedId='${k}'`,M=await G({baseUrl:w,endpoint:P,accessToken:A});return M.data.data.classes||M.data.data||[]}return{isConnected:e,isConnecting:r,accessToken:n,connectionStatus:s,isError:i,connectionConfig:a,availableEndpoints:o,showStatus:l,loadDemoCredentials:c,connect:u,disconnect:d,testEndpoint:f,testCustomEndpoint:h,fetchStudents:v,fetchTeachers:p,fetchSpecialEducationStudents:g,fetchIEPRecords:y,fetch504Plans:E,fetchAccommodations:S,fetchServices:I,fetchCaseManagers:R,testAllSpecialEducationEndpoints:D,testOneRosterForSpecialEd:C,testStudentsWithSpecialEd:_,fetchSchools:b,fetchClasses:x}}const Wp=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t.charCodeAt(n)^e.charCodeAt(n%e.length));return btoa(r)},zp=(t,e)=>{const r=atob(t);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r.charCodeAt(s)^e.charCodeAt(s%e.length));return n};function Wj(){const t=no(),e=Ku(),r=pe(!1),n=pe(null),s=()=>{const c=e.currentUser;if(!c)throw new Error("User not authenticated");return c.uid+"_aeries_config_key"};return{isLoading:r,error:n,saveAeriesConfig:async c=>{if(!e.currentUser)throw new Error("User must be authenticated to save configuration");r.value=!0,n.value=null;try{const u=e.currentUser,d=s(),f={baseUrl:Wp(c.baseUrl,d),clientId:Wp(c.clientId,d),clientSecret:Wp(c.clientSecret,d),selectedSchoolId:c.selectedSchoolId||"",selectedClassIds:c.selectedClassIds||[],manualClassInput:c.manualClassInput||"",savedAt:new Date().toISOString(),userId:u.uid},h=vt(t,"users",u.uid,"aeries_config","current");return await xr(h,f),{success:!0,message:"Configuration saved securely"}}catch(u){throw n.value=u.message,console.error("Failed to save Aeries configuration:",u),u}finally{r.value=!1}},loadAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to load configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=s(),d=vt(t,"users",c.uid,"aeries_config","current"),f=await Vr(d);if(!f.exists())return null;const h=f.data();if(h.userId!==c.uid)throw new Error("Configuration security check failed");return{baseUrl:zp(h.baseUrl,u),clientId:zp(h.clientId,u),clientSecret:zp(h.clientSecret,u),selectedSchoolId:h.selectedSchoolId||"",selectedClassIds:h.selectedClassIds||[],manualClassInput:h.manualClassInput||"",savedAt:h.savedAt}}catch(c){throw n.value=c.message,console.error("Failed to load Aeries configuration:",c),c}finally{r.value=!1}},deleteAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to delete configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=vt(t,"users",c.uid,"aeries_config","current");return await ac(u),{success:!0,message:"Configuration deleted securely"}}catch(c){throw n.value=c.message,console.error("Failed to delete Aeries configuration:",c),c}finally{r.value=!1}},hasSavedConfig:async()=>{if(!e.currentUser)return!1;try{const c=e.currentUser,u=vt(t,"users",c.uid,"aeries_config","current");return(await Vr(u)).exists()}catch(c){return console.error("Failed to check for saved configuration:",c),!1}}}}const zj={name:"AeriesAPIConnector",setup(){const{isConnected:t,isConnecting:e,accessToken:r,connectionStatus:n,isError:s,connectionConfig:i,availableEndpoints:a,showStatus:o,loadDemoCredentials:l,connect:c,disconnect:u,testEndpoint:d,testAllSpecialEducationEndpoints:f,testOneRosterForSpecialEd:h,testStudentsWithSpecialEd:v,fetchSchools:p,fetchClasses:g}=Gj(),{isLoading:y,error:E,saveAeriesConfig:S,loadAeriesConfig:I,deleteAeriesConfig:R,hasSavedConfig:D}=Wj(),C=pe(!1),_=pe(null),b=pe(""),x=pe(null),w=pe([]),A=pe(""),k=pe([]),L=pe([]),G=pe(!1),P=pe(""),M=pe(""),H=pe(!1),B=pe({oneroster:!1,nativeAeries:!1}),Q=pe([]),j=pe([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"}]),O=pe([{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),W=Ae(()=>i.baseUrl&&i.clientId&&i.clientSecret),K=async()=>{if(await c())try{C.value=!0;const te=await p({baseUrl:i.baseUrl,accessToken:r.value});w.value=te||[],A.value=""}catch(te){console.error("Failed to fetch schools:",te),o("Failed to fetch schools",!0),w.value=[]}finally{C.value=!1}},se=async X=>{C.value=!0,b.value=X,_.value=null,x.value=null;const te=await d(X);te&&!te.error?(_.value=te.data,x.value=te.responseTime):te&&te.error&&(_.value={error:te.error}),C.value=!1},ve=async()=>{C.value=!0,await f(),C.value=!1},ie=async()=>{C.value=!0,b.value="/students (SPED check)",_.value=null,x.value=null;const X=await h();X&&!X.error?(_.value=X,o(X.message)):X&&X.error&&(_.value={error:X.error},o(` OneRoster test failed: ${X.error}`,!0)),C.value=!1},de=async()=>{C.value=!0,b.value="/students (SPED filters)",_.value=null,x.value=null;const X=await v();X&&(_.value=X,o("OneRoster SPED filter tests completed")),C.value=!1};er(A,async X=>{if(!X){k.value=[],L.value=[];return}G.value=!1,P.value="",C.value=!0;try{k.value=await g({baseUrl:i.baseUrl,accessToken:r.value,schoolId:X}),L.value=[]}catch{G.value=!0,k.value=[],L.value=[]}finally{C.value=!1}});const ee=Ae(()=>t.value&&w.value.length>0),Y=Ae(()=>ee.value&&A.value),ge=Ae(()=>B.value.oneroster||B.value.nativeAeries),q=()=>{const X=[];B.value.oneroster&&X.push(...j.value),B.value.nativeAeries&&X.push(...O.value),a.value=X},z=(X,te=!1)=>{M.value=X,H.value=te,setTimeout(()=>{M.value="",H.value=!1},5e3)},J=async()=>{try{const X={baseUrl:i.baseUrl,clientId:i.clientId,clientSecret:i.clientSecret,selectedSchoolId:A.value,selectedClassIds:L.value,manualClassInput:P.value,selectedApiTypes:B.value,selectedEndpoints:Q.value};await S(X),z(" Configuration saved securely to Firebase!")}catch(X){console.error("Failed to save configuration:",X),z(` Failed to save configuration: ${X.message}`,!0)}},he=async()=>{try{const X=await I();if(!X){z(" No saved configuration found",!0);return}i.baseUrl=X.baseUrl||"",i.clientId=X.clientId||"",i.clientSecret=X.clientSecret||"",A.value=X.selectedSchoolId||"",L.value=X.selectedClassIds||[],P.value=X.manualClassInput||"",X.selectedApiTypes&&(B.value=X.selectedApiTypes),X.selectedEndpoints&&(Q.value=X.selectedEndpoints),q();const te=X.savedAt?new Date(X.savedAt).toLocaleString():"Unknown";z(` Configuration loaded securely (saved: ${te})`)}catch(X){console.error("Failed to load configuration:",X),z(` Failed to load configuration: ${X.message}`,!0)}},re=async()=>{if(confirm("Are you sure you want to permanently delete the saved configuration? This action cannot be undone."))try{await R(),z(" Configuration permanently deleted from Firebase!")}catch(X){console.error("Failed to clear configuration:",X),z(` Failed to clear configuration: ${X.message}`,!0)}};return Jt(async()=>{try{if(await D()){const te=await I();te&&(i.baseUrl=te.baseUrl||"",i.clientId=te.clientId||"",i.clientSecret=te.clientSecret||"",te.selectedApiTypes&&(B.value=te.selectedApiTypes),te.selectedEndpoints&&(Q.value=te.selectedEndpoints),q(),z(" Configuration auto-loaded securely from Firebase"))}}catch(X){console.error("Failed to auto-load configuration:",X)}}),{connectionConfig:i,isConnected:t,isConnecting:e,isLoading:C,connectionStatus:n,isError:s,apiResults:_,currentEndpoint:b,responseTime:x,availableEndpoints:a,canConnect:W,loadDemoCredentials:l,connect:K,disconnect:u,testEndpoint:se,handleTestSpecialEd:ve,handleTestOneRosterSpecialEd:ie,handleTestStudentsWithSpecialEd:de,schools:w,selectedSchoolId:A,classes:k,selectedClassIds:L,classesFetchError:G,manualClassInput:P,canShowSchoolDropdown:ee,canShowClasses:Y,configStatus:M,configError:H,storageLoading:y,storageError:E,saveConfiguration:J,loadConfiguration:he,clearConfiguration:re,selectedApiTypes:B,selectedEndpoints:Q,onerosterEndpoints:j,nativeAeriesEndpoints:O,hasSelectedApiTypes:ge,updateAvailableEndpoints:q}}},Kj={class:"aeries-api-connector"},qj={class:"connection-form"},Xj={class:"form-group"},Yj=["disabled"],Qj={class:"form-group"},Jj=["disabled"],Zj={class:"form-group"},eG=["disabled"],tG={class:"button-group"},rG=["disabled"],nG=["disabled"],sG={class:"api-type-selection"},aG={class:"api-type-options"},iG={class:"api-type-option"},oG={class:"checkbox-label"},lG={class:"api-type-option"},cG={class:"checkbox-label"},uG={key:0,class:"endpoint-selection"},dG={class:"endpoint-categories"},fG={key:0,class:"endpoint-category"},hG={class:"endpoint-checkboxes"},pG=["value"],mG={class:"endpoint-name"},vG={class:"endpoint-path-small"},gG={key:1,class:"endpoint-category"},xG={class:"endpoint-checkboxes"},yG=["value"],EG={class:"endpoint-name"},_G={class:"endpoint-path-small"},bG={class:"config-management"},SG={class:"config-buttons"},TG=["disabled"],AG=["disabled"],wG=["disabled"],CG={key:1,class:"api-testing"},IG={class:"special-ed-section"},kG={class:"quick-test-buttons"},DG=["disabled"],RG=["disabled"],FG=["disabled"],PG=["disabled"],OG=["disabled"],NG=["disabled"],LG={class:"endpoint-grid"},MG={class:"endpoint-path"},BG={class:"endpoint-description"},UG=["onClick","disabled"],VG={key:0,class:"api-results"},$G={class:"results-header"},HG={class:"endpoint-tested"},jG={key:0,class:"response-time"},GG={class:"results-content"},WG={key:2,class:"form-group"},zG=["value"],KG={key:3,class:"form-group"},qG={key:0},XG=["value"],YG={key:1};function QG(t,e,r,n,s,i){return N(),U("div",Kj,[e[48]||(e[48]=Xn('<h3 data-v-0f37c4fc>Aeries API Connection</h3><div class="api-info-section" data-v-0f37c4fc><h4 data-v-0f37c4fc>Getting Students with IEP/504 Plans</h4><div class="info-grid" data-v-0f37c4fc><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> OneRoster API (Limited)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> All students, basic info</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Cannot filter:</strong> Students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> You&#39;d get ALL students, not just SPED</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> Custom Aeries API (Recommended)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Only students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Includes:</strong> Accommodations, services, case managers</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Perfect for your use case</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> CSV Import (Fallback)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Filtered data from Aeries export</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Process:</strong> Export SPED students  Import CSV</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Works but requires manual steps</p></div></div><div class="testing-note" data-v-0f37c4fc><p data-v-0f37c4fc><strong data-v-0f37c4fc>Test the buttons below to see what your Aeries instance supports!</strong></p></div></div>',2)),m("div",qj,[m("div",Xj,[e[24]||(e[24]=m("label",{for:"baseUrl"},"Base URL:",-1)),Ve(m("input",{id:"baseUrl","onUpdate:modelValue":e[0]||(e[0]=a=>n.connectionConfig.baseUrl=a),type:"url",placeholder:"https://demo.aeries.net/aeries",disabled:n.isConnected},null,8,Yj),[[At,n.connectionConfig.baseUrl]])]),m("div",Qj,[e[25]||(e[25]=m("label",{for:"clientId"},"Client ID:",-1)),Ve(m("input",{id:"clientId","onUpdate:modelValue":e[1]||(e[1]=a=>n.connectionConfig.clientId=a),type:"text",placeholder:"Enter your Client ID",disabled:n.isConnected},null,8,Jj),[[At,n.connectionConfig.clientId]])]),m("div",Zj,[e[26]||(e[26]=m("label",{for:"clientSecret"},"Client Secret:",-1)),Ve(m("input",{id:"clientSecret","onUpdate:modelValue":e[2]||(e[2]=a=>n.connectionConfig.clientSecret=a),type:"password",placeholder:"Enter your Client Secret",disabled:n.isConnected},null,8,eG),[[At,n.connectionConfig.clientSecret]])]),m("div",tG,[m("button",{onClick:e[3]||(e[3]=(...a)=>n.connect&&n.connect(...a)),disabled:!n.canConnect||n.isConnecting,class:"btn-primary"},le(n.isConnecting?"Connecting...":"Connect"),9,rG),n.isConnected?(N(),U("button",{key:0,onClick:e[4]||(e[4]=(...a)=>n.disconnect&&n.disconnect(...a)),class:"btn-secondary"}," Disconnect ")):Fe("",!0),m("button",{onClick:e[5]||(e[5]=(...a)=>n.loadDemoCredentials&&n.loadDemoCredentials(...a)),disabled:n.isConnected,class:"btn-demo"}," Load Demo Credentials ",8,nG)]),m("div",sG,[e[37]||(e[37]=m("h4",null,"Select API Types",-1)),e[38]||(e[38]=m("p",{class:"api-type-description"},"Choose which Aeries API types you want to use. This determines which endpoints will be available for testing and data import.",-1)),m("div",aG,[m("div",iG,[m("label",oG,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>n.selectedApiTypes.oneroster=a),onChange:e[7]||(e[7]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[Et,n.selectedApiTypes.oneroster]]),e[27]||(e[27]=m("span",{class:"checkmark"},null,-1)),e[28]||(e[28]=m("strong",null,"OneRoster API",-1))]),e[29]||(e[29]=m("p",{class:"api-type-desc"},"Standard OneRoster endpoints for basic student, teacher, and class data",-1))]),m("div",lG,[m("label",cG,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>n.selectedApiTypes.nativeAeries=a),onChange:e[9]||(e[9]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[Et,n.selectedApiTypes.nativeAeries]]),e[30]||(e[30]=m("span",{class:"checkmark"},null,-1)),e[31]||(e[31]=m("strong",null,"Native Aeries v5 API",-1))]),e[32]||(e[32]=m("p",{class:"api-type-desc"},"Aeries-specific endpoints for special education, IEP, and 504 plan data",-1))])]),n.hasSelectedApiTypes?(N(),U("div",uG,[e[35]||(e[35]=m("h5",null,"Select Endpoints to Use",-1)),e[36]||(e[36]=m("p",{class:"endpoint-description"},"Check the endpoints you want to enable for data import and testing.",-1)),m("div",dG,[n.selectedApiTypes.oneroster?(N(),U("div",fG,[e[33]||(e[33]=m("h6",null,"OneRoster Endpoints",-1)),m("div",hG,[(N(!0),U(Oe,null,Ge(n.onerosterEndpoints,a=>(N(),U("label",{key:a.path,class:"endpoint-checkbox"},[Ve(m("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>n.selectedEndpoints=o),value:a.path},null,8,pG),[[Et,n.selectedEndpoints]]),m("span",mG,le(a.name),1),m("span",vG,le(a.path),1)]))),128))])])):Fe("",!0),n.selectedApiTypes.nativeAeries?(N(),U("div",gG,[e[34]||(e[34]=m("h6",null,"Native Aeries v5 Endpoints",-1)),m("div",xG,[(N(!0),U(Oe,null,Ge(n.nativeAeriesEndpoints,a=>(N(),U("label",{key:a.path,class:"endpoint-checkbox"},[Ve(m("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=o=>n.selectedEndpoints=o),value:a.path},null,8,yG),[[Et,n.selectedEndpoints]]),m("span",EG,le(a.name),1),m("span",_G,le(a.path),1)]))),128))])])):Fe("",!0)])])):Fe("",!0)]),m("div",bG,[e[39]||(e[39]=m("h4",null,"Save/Load Configuration",-1)),e[40]||(e[40]=m("div",{class:"security-note"},[m("p",null,[m("strong",null," Security:"),Me(" Your API credentials are encrypted and stored securely in Firebase. Only you can access your saved configuration.")])],-1)),m("div",SG,[m("button",{onClick:e[12]||(e[12]=(...a)=>n.saveConfiguration&&n.saveConfiguration(...a)),disabled:!n.canConnect||n.storageLoading,class:"btn-save"},le(n.storageLoading?" Saving...":" Save Configuration"),9,TG),m("button",{onClick:e[13]||(e[13]=(...a)=>n.loadConfiguration&&n.loadConfiguration(...a)),disabled:n.storageLoading,class:"btn-load"},le(n.storageLoading?" Loading...":" Load Saved Configuration"),9,AG),m("button",{onClick:e[14]||(e[14]=(...a)=>n.clearConfiguration&&n.clearConfiguration(...a)),disabled:n.storageLoading,class:"btn-clear"},le(n.storageLoading?" Deleting...":" Clear Saved Configuration"),9,wG)]),n.configStatus?(N(),U("div",{key:0,class:ot(["config-status",{error:n.configError}])},le(n.configStatus),3)):Fe("",!0)])]),n.connectionStatus?(N(),U("div",{key:0,class:ot(["status-message",{error:n.isError}])},le(n.connectionStatus),3)):Fe("",!0),n.isConnected?(N(),U("div",CG,[e[43]||(e[43]=m("h4",null,"Test API Endpoints",-1)),m("div",IG,[e[41]||(e[41]=m("h5",null,"Special Education Data (IEP/504)",-1)),m("div",kG,[m("button",{onClick:e[15]||(e[15]=(...a)=>n.handleTestSpecialEd&&n.handleTestSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-special"},le(n.isLoading?"Testing...":"Test All SPED Endpoints"),9,DG),m("button",{onClick:e[16]||(e[16]=(...a)=>n.handleTestOneRosterSpecialEd&&n.handleTestOneRosterSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster for SPED Data ",8,RG),m("button",{onClick:e[17]||(e[17]=(...a)=>n.handleTestStudentsWithSpecialEd&&n.handleTestStudentsWithSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster SPED Filters ",8,FG),m("button",{onClick:e[18]||(e[18]=a=>t.handleTestEndpoint("/api/special-education/students")),disabled:n.isLoading,class:"btn-test-special"}," SPED Students ",8,PG),m("button",{onClick:e[19]||(e[19]=a=>t.handleTestEndpoint("/api/special-education/ieps")),disabled:n.isLoading,class:"btn-test-special"}," IEP Records ",8,OG),m("button",{onClick:e[20]||(e[20]=a=>t.handleTestEndpoint("/api/special-education/504-plans")),disabled:n.isLoading,class:"btn-test-special"}," 504 Plans ",8,NG)])]),m("div",LG,[(N(!0),U(Oe,null,Ge(n.availableEndpoints,a=>(N(),U("div",{key:a.path,class:"endpoint-card"},[m("h5",null,le(a.name),1),m("p",MG,le(a.path),1),m("p",BG,le(a.description),1),m("button",{onClick:o=>n.testEndpoint(a.path),disabled:n.isLoading,class:"btn-test"},le(n.isLoading&&n.currentEndpoint===a.path?"Testing...":"Test"),9,UG)]))),128))]),n.apiResults?(N(),U("div",VG,[e[42]||(e[42]=m("h4",null,"API Response",-1)),m("div",$G,[m("span",HG,"Endpoint: "+le(n.currentEndpoint),1),n.responseTime?(N(),U("span",jG,"Response time: "+le(n.responseTime)+"ms",1)):Fe("",!0)]),m("div",GG,[m("pre",null,le(JSON.stringify(n.apiResults,null,2)),1)])])):Fe("",!0)])):Fe("",!0),n.canShowSchoolDropdown?(N(),U("div",WG,[e[45]||(e[45]=m("label",null,"School",-1)),Ve(m("select",{"onUpdate:modelValue":e[21]||(e[21]=a=>n.selectedSchoolId=a)},[e[44]||(e[44]=m("option",{value:"",disabled:""},"Select a school",-1)),(N(!0),U(Oe,null,Ge(n.schools,a=>(N(),U("option",{key:a.sourcedId||a.id||a.schoolId,value:a.sourcedId||a.id||a.schoolId},le(a.name||a.title||a.schoolName),9,zG))),128))],512),[[hr,n.selectedSchoolId]])])):Fe("",!0),n.canShowClasses?(N(),U("div",KG,[e[47]||(e[47]=m("label",null,"Case Manager Classes",-1)),n.classesFetchError?(N(),U("div",YG,[e[46]||(e[46]=m("p",{class:"error"},"Could not fetch classes. Enter class names manually (comma separated):",-1)),Ve(m("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>n.manualClassInput=a),type:"text",placeholder:"Class1, Class2, ..."},null,512),[[At,n.manualClassInput]])])):(N(),U("div",qG,[Ve(m("select",{"onUpdate:modelValue":e[22]||(e[22]=a=>n.selectedClassIds=a),multiple:""},[(N(!0),U(Oe,null,Ge(n.classes,a=>(N(),U("option",{key:a.sourcedId||a.id||a.classId,value:a.sourcedId||a.id||a.classId},le(a.title||a.name||a.className),9,XG))),128))],512),[[hr,n.selectedClassIds]])]))])):Fe("",!0)])}const JG=bt(zj,[["render",QG],["__scopeId","data-v-0f37c4fc"]]),hl=pe(null);function Qv(){const t=new Promise(e=>{const r=RA(Ws,async n=>{if(n)try{const s=vt(ht,"users",n.uid),i=await Vr(s);i.exists()?hl.value={uid:n.uid,email:n.email,displayName:n.displayName,...i.data()}:(console.warn(`User ${n.uid} exists in Auth but not in users collection`),hl.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null})}catch(s){console.error("Error fetching user document:",s),hl.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null}}else hl.value=null;e(hl.value),r()})});return{currentUser:hl,waitForAuthInit:t}}const ZG={key:0,class:"app-settings-panel"},eW={class:"settings-section"},tW={class:"grades-checkboxes"},rW=["checked"],nW=["value"],sW={class:"settings-section"},aW={key:0,class:"class-service-fieldset"},iW={class:"checkbox-inline-group"},oW=["value"],lW={key:1,class:"class-service-fieldset"},cW={class:"checkbox-inline-group"},uW=["value"],dW={key:2,class:"class-service-fieldset"},fW={class:"checkbox-inline-group"},hW=["value"],pW={key:3,class:"class-service-fieldset"},mW={class:"checkbox-inline-group"},vW={key:4,class:"class-service-fieldset"},gW={class:"checkbox-inline-group"},xW=["onClick"],yW={class:"checkbox-inline-group"},EW=["onClick"],_W=["onClick"],bW={class:"add-class-service"},SW={class:"custom-chips"},TW=["onClick"],AW={class:"settings-section"},wW={class:"service-providers-defaults"},CW=["value"],IW={class:"service-providers-custom"},kW={class:"custom-provider-inputs"},DW={class:"custom-chips"},RW=["onClick"],FW={class:"settings-section"},PW={class:"periods-controls"},OW={class:"period-number-control"},NW={key:0,class:"period-labels"},LW={class:"period-labels-grid"},MW=["onUpdate:modelValue","placeholder"],BW={key:1,class:"period-preview"},UW={class:"settings-section"},VW={class:"action-buttons"},$W=["disabled"],HW=["disabled"],jW=["disabled"],GW={key:1,class:"not-admin"},WW={__name:"AppSettings",setup(t){const{currentUser:e}=Qv(),r=Ae(()=>{var x;return((x=e.value)==null?void 0:x.role)||null}),n=Ae(()=>["admin","administrator","administrator_504_CM","sped_chair"].includes(r.value)),s=[{value:"K",label:"K"},...Array.from({length:12},(x,w)=>({value:(w+1).toString(),label:(w+1).toString()}))],i=["English","Math","History","Science"],a=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],{loadAppSettings:o,saveAppSettings:l}=ka(),c=pe(!1),u=pe(!1),d=pe(""),f=pe(!1),h=pe(""),v=pe(""),p=pe({grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]}),g=()=>{const x=z_(p.value.numPeriods,{min:1,max:15,decimals:0});if(x===null)return D("Invalid number of periods. Must be between 1 and 15.",!0),!1;p.value.numPeriods=x;for(let w=0;w<p.value.numPeriods;w++){p.value.periodLabels[w]||(p.value.periodLabels[w]=`Per${w+1}`);const A=Ar(p.value.periodLabels[w],{trim:!0,maxLength:3,removeDangerous:!0}),k=sn(A);if(!k.isSafe)return D(`Security threat detected in period ${w+1} label: ${k.threats.join(", ")}`,!0),!1;const L=Zh(A,{max:3,fieldName:`Period ${w+1} label`});if(!L.isValid)return D(L.error,!0),!1;p.value.periodLabels[w]=A}if(p.value.customServiceProviders)for(let w=0;w<p.value.customServiceProviders.length;w++){const A=p.value.customServiceProviders[w];if(A.name){const k=Ar(A.name,{trim:!0,maxLength:100,removeDangerous:!0}),L=sn(k);if(!L.isSafe)return D(`Security threat detected in custom provider ${w+1}: ${L.threats.join(", ")}`,!0),!1;A.name=k}if(A.abbreviation){const k=Ar(A.abbreviation,{trim:!0,maxLength:10,removeDangerous:!0}),L=sn(k);if(!L.isSafe)return D(`Security threat detected in custom provider abbreviation ${w+1}: ${L.threats.join(", ")}`,!0),!1;A.abbreviation=k}}return!0},y=Ae(()=>a),E=Ae(()=>s.every(x=>p.value.grades.includes(x.value))),S=x=>{x.target.checked?p.value.grades=s.map(w=>w.value):p.value.grades=[]},I=()=>{if(!h.value.trim()||!v.value.trim()){D("Both name and abbreviation are required for custom service providers",!0);return}if(p.value.customServiceProviders.some(w=>w.abbreviation.toLowerCase()===v.value.toLowerCase())){D("A service provider with this abbreviation already exists",!0);return}p.value.customServiceProviders.push({name:h.value.trim(),abbreviation:v.value.trim()}),h.value="",v.value="",D("Custom service provider added successfully")},R=x=>{p.value.customServiceProviders.splice(x,1)};er(()=>p.value.numPeriods,x=>{const w=z_(x,{min:1,max:15,decimals:0});if(w!==null&&w!==x&&(p.value.numPeriods=w),p.value.periodLabels.length<p.value.numPeriods)for(let A=p.value.periodLabels.length;A<p.value.numPeriods;A++)p.value.periodLabels.push(`Per${A+1}`)}),er(()=>p.value.periodLabels,x=>{x.forEach((w,A)=>{w&&w.length>3&&(p.value.periodLabels[A]=w.substring(0,3))})},{deep:!0});const D=(x,w=!1)=>{d.value=x,f.value=w,setTimeout(()=>{d.value="",f.value=!1},5e3)},C=async(x=!1)=>{c.value=!0;try{const w=await o();if(w){if(p.value={...p.value,...w},!p.value.periodLabels||p.value.periodLabels.length<p.value.numPeriods){p.value.periodLabels=[];for(let A=0;A<p.value.numPeriods;A++)p.value.periodLabels[A]=p.value.periodLabels[A]||`Per${A+1}`}x&&D("Settings loaded successfully")}}catch(w){D("Error loading settings",!0),console.error("Load settings error:",w)}finally{c.value=!1}},_=async()=>{if(!ys("saveAppSettings",10,6e4).allowed){D("Too many save requests. Please wait before saving again.",!0);return}if(g()){u.value=!0;try{await l(p.value),D("Settings saved successfully")}catch(w){D("Error saving settings",!0),console.error("Save settings error:",w)}finally{u.value=!1}}},b=()=>{confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(p.value={grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]},D("Settings reset to defaults"))};return Jt(()=>{C()}),(x,w)=>n.value?(N(),U("div",ZG,[w[33]||(w[33]=m("h2",null,"App Settings",-1)),m("form",{onSubmit:bs(_,["prevent"])},[m("section",eW,[m("fieldset",null,[w[17]||(w[17]=m("legend",null,"Grades",-1)),m("div",tW,[m("label",null,[m("input",{type:"checkbox",checked:E.value,onChange:S},null,40,rW),w[16]||(w[16]=m("span",null,"Select All",-1))]),(N(),U(Oe,null,Ge(s,A=>m("label",{key:A.value},[Ve(m("input",{type:"checkbox","onUpdate:modelValue":w[0]||(w[0]=k=>p.value.grades=k),value:A.value},null,8,nW),[[Et,p.value.grades]]),m("span",null,le(A.label),1)])),64))])])]),m("section",sW,[w[26]||(w[26]=m("h3",null,"Class Services",-1)),p.value.classServices[0]&&p.value.classServices[0].enabledSubcategories?(N(),U("div",aW,[m("fieldset",null,[w[18]||(w[18]=m("legend",null,"SDC",-1)),m("div",iW,[(N(),U(Oe,null,Ge(i,A=>m("label",{key:A},[Ve(m("input",{type:"checkbox","onUpdate:modelValue":w[1]||(w[1]=k=>p.value.classServices[0].enabledSubcategories=k),value:A},null,8,oW),[[Et,p.value.classServices[0].enabledSubcategories]]),Me(" "+le(A),1)])),64))])])])):Fe("",!0),p.value.classServices[1]&&p.value.classServices[1].enabledSubcategories?(N(),U("div",lW,[m("fieldset",null,[w[19]||(w[19]=m("legend",null,"Co-teach",-1)),m("div",cW,[(N(),U(Oe,null,Ge(i,A=>m("label",{key:A},[Ve(m("input",{type:"checkbox","onUpdate:modelValue":w[2]||(w[2]=k=>p.value.classServices[1].enabledSubcategories=k),value:A},null,8,uW),[[Et,p.value.classServices[1].enabledSubcategories]]),Me(" "+le(A),1)])),64))])])])):Fe("",!0),p.value.classServices[2]&&p.value.classServices[2].enabledSubcategories?(N(),U("div",dW,[m("fieldset",null,[w[20]||(w[20]=m("legend",null,"RSP",-1)),m("div",fW,[(N(),U(Oe,null,Ge(i,A=>m("label",{key:A},[Ve(m("input",{type:"checkbox","onUpdate:modelValue":w[3]||(w[3]=k=>p.value.classServices[2].enabledSubcategories=k),value:A},null,8,hW),[[Et,p.value.classServices[2].enabledSubcategories]]),Me(" "+le(A),1)])),64))])])])):Fe("",!0),p.value.classServices[3]&&p.value.classServices[3].enabledSubcategories?(N(),U("div",pW,[m("fieldset",null,[w[22]||(w[22]=m("legend",null,"Directed Studies",-1)),m("div",mW,[m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":w[4]||(w[4]=A=>p.value.classServices[3].enabledSubcategories=A),value:"Directed Studies"},null,512),[[Et,p.value.classServices[3].enabledSubcategories]]),w[21]||(w[21]=Me(" Directed Studies "))])])])])):Fe("",!0),p.value.classServices[4]&&p.value.classServices[4].enabledSubcategories?(N(),U("div",vW,[m("fieldset",null,[w[24]||(w[24]=m("legend",null,"FA",-1)),m("div",gW,[m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":w[5]||(w[5]=A=>p.value.classServices[4].enabledSubcategories=A),value:"FA"},null,512),[[Et,p.value.classServices[4].enabledSubcategories]]),w[23]||(w[23]=Me(" FA "))])])])])):Fe("",!0),(N(!0),U(Oe,null,Ge(p.value.classServices.slice(5),(A,k)=>(N(),U("div",{key:A.name,class:"class-service-fieldset"},[m("fieldset",null,[m("legend",null,[Me(le(A.name)+" ",1),m("button",{type:"button",onClick:L=>x.removeClassService(k+5),title:"Remove Service"},"",8,xW)]),m("div",yW,[(N(!0),U(Oe,null,Ge(A.subcategories,(L,G)=>(N(),U("label",{key:L},[w[25]||(w[25]=m("input",{type:"checkbox",checked:!0,disabled:""},null,-1)),Me(" "+le(L)+" ",1),m("button",{type:"button",onClick:P=>x.removeSubcategory(k+5,G),title:"Remove Subcategory"},"",8,EW)]))),128)),m("button",{type:"button",onClick:L=>x.addSubcategory(k+5)},"+ Add Subcategory",8,_W)])])]))),128)),m("div",bW,[Ve(m("input",{type:"text","onUpdate:modelValue":w[6]||(w[6]=A=>x.newServiceName=A),placeholder:"New Service Name",maxlength:"18"},null,512),[[At,x.newServiceName]]),Ve(m("input",{type:"text","onUpdate:modelValue":w[7]||(w[7]=A=>x.newServiceSubcat=A),placeholder:"Add Subcategory",maxlength:"18",onKeyup:w[8]||(w[8]=UT((...A)=>x.addNewServiceSubcat&&x.addNewServiceSubcat(...A),["enter"]))},null,544),[[At,x.newServiceSubcat]]),m("button",{type:"button",onClick:w[9]||(w[9]=(...A)=>x.addNewServiceSubcat&&x.addNewServiceSubcat(...A))},"+ Add Subcategory"),m("div",SW,[(N(!0),U(Oe,null,Ge(x.newServiceSubcats,(A,k)=>(N(),U("span",{key:A,class:"chip"},[Me(le(A)+" ",1),m("button",{type:"button",onClick:L=>x.removeNewServiceSubcat(k)},"",8,TW)]))),128))]),m("button",{type:"button",onClick:w[10]||(w[10]=(...A)=>x.addClassService&&x.addClassService(...A))},"+ Add Class Service")])]),m("section",AW,[m("fieldset",null,[w[28]||(w[28]=m("legend",null,"Service Providers",-1)),m("div",wW,[(N(!0),U(Oe,null,Ge(y.value,A=>(N(),U("label",{key:A.abbreviation},[Ve(m("input",{type:"checkbox","onUpdate:modelValue":w[11]||(w[11]=k=>p.value.serviceProviders=k),value:A.abbreviation},null,8,CW),[[Et,p.value.serviceProviders]]),m("span",null,le(A.name)+" ("+le(A.abbreviation)+")",1)]))),128))]),m("div",IW,[w[27]||(w[27]=m("label",null,"Add Custom Service Provider:",-1)),m("div",kW,[Ve(m("input",{type:"text","onUpdate:modelValue":w[12]||(w[12]=A=>h.value=A),placeholder:"Full Name",maxlength:"100"},null,512),[[At,h.value]]),Ve(m("input",{type:"text","onUpdate:modelValue":w[13]||(w[13]=A=>v.value=A),placeholder:"Abbreviation",maxlength:"10"},null,512),[[At,v.value]]),m("button",{type:"button",onClick:I},"Add")]),m("div",DW,[(N(!0),U(Oe,null,Ge(p.value.customServiceProviders,(A,k)=>(N(),U("span",{key:k,class:"chip"},[Me(le(A.name)+" ("+le(A.abbreviation)+") ",1),m("button",{type:"button",onClick:L=>R(k)},"",8,RW)]))),128))])])])]),m("section",FW,[m("fieldset",null,[w[32]||(w[32]=m("legend",null,"Periods",-1)),m("div",PW,[m("div",OW,[m("label",null,[w[29]||(w[29]=Me(" Number of Periods (max 15): ")),Ve(m("input",{type:"number","onUpdate:modelValue":w[14]||(w[14]=A=>p.value.numPeriods=A),min:"1",max:"15",class:"period-number-input"},null,512),[[At,p.value.numPeriods]])])]),p.value.numPeriods>0?(N(),U("div",NW,[w[30]||(w[30]=m("h4",null,"Period Labels (3 chars max each):",-1)),m("div",LW,[(N(!0),U(Oe,null,Ge(p.value.numPeriods,A=>(N(),U("div",{key:A,class:"period-label-item"},[m("label",null,[Me(" Period "+le(A)+": ",1),Ve(m("input",{type:"text","onUpdate:modelValue":k=>p.value.periodLabels[A-1]=k,maxlength:"3",placeholder:`Per${A}`,class:"period-label-input"},null,8,MW),[[At,p.value.periodLabels[A-1]]])])]))),128))])])):Fe("",!0),p.value.numPeriods>0?(N(),U("div",BW,[w[31]||(w[31]=m("strong",null,"Preview:",-1)),(N(!0),U(Oe,null,Ge(p.value.numPeriods,A=>(N(),U("span",{key:A,class:"period-preview-item"},le(p.value.periodLabels[A-1]||`Per${A}`),1))),128))])):Fe("",!0)])])]),m("section",UW,[m("div",VW,[m("button",{type:"submit",disabled:u.value||c.value}," Save Settings",8,$W),m("button",{type:"button",onClick:w[15]||(w[15]=()=>C(!0)),disabled:c.value}," Load",8,HW),m("button",{type:"button",onClick:b,disabled:c.value}," Reset",8,jW)]),d.value?(N(),U("div",{key:0,class:ot(["status-message",{error:f.value,success:!f.value}])},le(d.value),3)):Fe("",!0)])],32)])):(N(),U("div",GW,w[34]||(w[34]=[m("h2",null,"App Settings",-1),m("p",null,"Access denied. You must be an admin to view this page.",-1)])))}},zW=bt(WW,[["__scopeId","data-v-f311a398"]]),KW={class:"admin-aide-assignment"},qW={class:"header"},XW={class:"header-actions"},YW=["disabled"],QW={key:0},JW={key:1},ZW={class:"content"},ez={key:0,class:"error-message"},tz={key:1,class:"error-message"},rz={key:2,class:"loading"},nz={key:3,class:"schedule-container"},sz={class:"aide-schedule-table"},az={class:"aide-name"},iz=["value","onChange"],oz=["value"],lz={class:"assignment-buttons"},cz=["onClick"],uz=["onClick"],dz={class:"direct-assignment-cell"},fz=["value","onChange"],hz=["value"],pz={class:"assignment-buttons"},mz=["onClick"],vz=["onClick"],gz={__name:"AdminAideAssignment",setup(t){const e=Xo(),{userList:r,fetchUsers:n}=Ia(),{students:s,fetchStudents:i}=Ca(),a=li(),{aideAssignment:o,loadAideAssignments:l,saveAllAideAssignments:c}=J1(),{appSettings:u,loadAppSettings:d}=ka(),f=pe(!0),h=pe(!1),v=Ae(()=>{var P;const G=(P=a.currentUser)==null?void 0:P.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(G)}),p=Ae(()=>{var G;return((G=r.value)==null?void 0:G.filter(P=>P.role==="paraeducator"))||[]}),g=Ae(()=>{var G;return((G=r.value)==null?void 0:G.filter(P=>P.role==="teacher"))||[]}),y=Ae(()=>{var G,P;return(G=u.value)!=null&&G.numPeriods&&((P=u.value)!=null&&P.periodLabels)?u.value.periodLabels.slice(0,u.value.numPeriods):["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]});function E(G){return G.id}function S(G){return G.id}function I(G,P){if(!o.value[G])return[""];o.value[G].classAssignment||(o.value[G].classAssignment={});let M=o.value[G].classAssignment[P];return Array.isArray(M)?M.length?M:[""]:typeof M=="string"&&M!==""?[M]:[""]}function R(G){if(!o.value[G])return[""];let P=o.value[G].directAssignment;return Array.isArray(P)?P.length?P:[""]:typeof P=="string"&&P!==""?[P]:[""]}function D(G,P,M,H){o.value[G]||(o.value[G]={classAssignment:{},directAssignment:[]}),o.value[G].classAssignment||(o.value[G].classAssignment={});let B=I(G,P);for(B[M]=H;B.length>1&&B[B.length-1]==="";)B.pop();o.value[G].classAssignment[P]=[...B]}function C(G,P,M){o.value[G]||(o.value[G]={classAssignment:{},directAssignment:[]});let H=R(G);for(H[P]=M;H.length>1&&H[H.length-1]==="";)H.pop();o.value[G].directAssignment=[...H]}function _(G,P){o.value[G]||(o.value[G]={classAssignment:{},directAssignment:[]}),o.value[G].classAssignment||(o.value[G].classAssignment={});let M=I(G,P);M.push(""),o.value[G].classAssignment[P]=[...M]}function b(G,P,M){if(!o.value[G]||!o.value[G].classAssignment)return;let H=I(G,P);H.length<=1||(H.splice(M,1),o.value[G].classAssignment[P]=[...H])}function x(G){o.value[G]||(o.value[G]={classAssignment:{},directAssignment:[]});let P=R(G);P.push(""),o.value[G].directAssignment=[...P]}function w(G,P){if(!o.value[G])return;let M=R(G);M.length<=1||(M.splice(P,1),o.value[G].directAssignment=[...M])}async function A(){try{f.value=!0,await Promise.all([n(),i(),l(),d()]),f.value=!1}catch(G){console.error("Error loading data:",G),f.value=!1}}async function k(){try{h.value=!0,await c(),h.value=!1}catch(G){console.error("Error saving aide assignments:",G),h.value=!1}}function L(){e.push("/admin")}return Jt(A),(G,P)=>(N(),U("div",KW,[m("div",qW,[P[3]||(P[3]=m("h1",null,"Aide Assignment Management",-1)),m("div",XW,[m("button",{onClick:k,class:"btn btn-primary",disabled:h.value},[h.value?(N(),U("span",QW,"")):(N(),U("span",JW,"")),Me(" "+le(h.value?"Saving...":"Save Assignments"),1)],8,YW),m("button",{onClick:L,class:"btn btn-secondary"},P[2]||(P[2]=[m("span",null,"",-1),Me(" Back ")]))])]),m("div",ZW,[me(a).currentUser?v.value?f.value?(N(),U("div",rz," Loading aide assignments... ")):(N(),U("div",nz,[m("table",sz,[m("thead",null,[m("tr",null,[P[8]||(P[8]=m("th",null,"Aide Name",-1)),(N(!0),U(Oe,null,Ge(y.value,M=>(N(),U("th",{key:M,class:"period-header"}," Period "+le(M),1))),128)),P[9]||(P[9]=m("th",null,"Direct Assignment",-1))])]),m("tbody",null,[(N(!0),U(Oe,null,Ge(p.value,M=>(N(),U("tr",{key:M.id,class:"aide-row"},[m("td",az,le(M.name||M.email),1),(N(!0),U(Oe,null,Ge(y.value,H=>(N(),U("td",{key:H,class:"period-cell"},[(N(!0),U(Oe,null,Ge(I(E(M),H),(B,Q)=>(N(),U("div",{key:"t-"+Q,class:"assignment-row"},[m("select",{value:B,onChange:j=>D(E(M),H,Q,j.target.value),class:"teacher-select"},[P[10]||(P[10]=m("option",{value:""},"No Assignment",-1)),(N(!0),U(Oe,null,Ge(g.value,j=>(N(),U("option",{key:S(j),value:S(j)},le(j.name||j.email),9,oz))),128))],40,iz),m("div",lz,[I(E(M),H).length>1?(N(),U("button",{key:0,onClick:j=>b(E(M),H,Q),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,cz)):Fe("",!0),Q===I(E(M),H).length-1?(N(),U("button",{key:1,onClick:j=>_(E(M),H),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,uz)):Fe("",!0)])]))),128))]))),128)),m("td",dz,[(N(!0),U(Oe,null,Ge(R(E(M)),(H,B)=>(N(),U("div",{key:"d-"+B,class:"assignment-row"},[m("select",{value:H,onChange:Q=>C(E(M),B,Q.target.value),class:"student-select"},[P[11]||(P[11]=m("option",{value:""},"No Assignment",-1)),(N(!0),U(Oe,null,Ge(me(s),Q=>(N(),U("option",{key:Q.id,value:Q.id},le(me(it)(Q,"firstName"))+" "+le(me(it)(Q,"lastName")),9,hz))),128))],40,fz),m("div",pz,[R(E(M)).length>1?(N(),U("button",{key:0,onClick:Q=>w(E(M),B),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,mz)):Fe("",!0),B===R(E(M)).length-1?(N(),U("button",{key:1,onClick:Q=>x(E(M)),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,vz)):Fe("",!0)])]))),128))])]))),128))])])])):(N(),U("div",tz,[P[6]||(P[6]=m("h2",null,"Access Denied",-1)),P[7]||(P[7]=m("p",null,"You do not have permission to access this page.",-1)),m("button",{onClick:P[1]||(P[1]=M=>me(e).push("/")),class:"btn btn-primary"},"Go Home")])):(N(),U("div",ez,[P[4]||(P[4]=m("h2",null,"Authentication Required",-1)),P[5]||(P[5]=m("p",null,"Please log in to access this page.",-1)),m("button",{onClick:P[0]||(P[0]=M=>me(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},YC=bt(gz,[["__scopeId","data-v-05c6a01a"]]);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var QC=1252,xz=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],tx={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},rx=function(t){xz.indexOf(t)!=-1&&(QC=tx[0]=t)};function yz(){rx(1252)}var Xs=function(t){rx(t)};function JC(){Xs(1200),yz()}function Q_(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Ez(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function ZC(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Jc=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Ez(t.slice(2)):e==254&&r==255?ZC(t.slice(2)):e==65279?t.slice(1):t},_f=function(e){return String.fromCharCode(e)},J_=function(e){return String.fromCharCode(e)},sd,Li="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Z_(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Li.charAt(i)+Li.charAt(a)+Li.charAt(o)+Li.charAt(l);return e}function Ss(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=Li.indexOf(t.charAt(c++)),a=Li.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=Li.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Li.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var jt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Yo=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Zi(t){return jt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function e2(t){return jt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var qs=function(e){return jt?Yo(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Qo(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function nx(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return nx(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Pi=jt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Yo(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function _z(t){for(var e=[],r=0,n=t.length+250,s=Zi(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=Zi(65535),n=65530)}return e.push(s.slice(0,r)),Pi(e)}var Zn=/\u0000/g,Zc=/[\u0001-\u0006]/g;function Gl(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Ys(t,e){var r=""+t;return r.length>=e?r:Pr("0",e-r.length)+r}function sx(t,e){var r=""+t;return r.length>=e?r:Pr(" ",e-r.length)+r}function V0(t,e){var r=""+t;return r.length>=e?r:r+Pr(" ",e-r.length)}function bz(t,e){var r=""+Math.round(t);return r.length>=e?r:Pr("0",e-r.length)+r}function Sz(t,e){var r=""+t;return r.length>=e?r:Pr("0",e-r.length)+r}var t2=Math.pow(2,32);function pl(t,e){if(t>t2||t<-t2)return bz(t,e);var r=Math.round(t);return Sz(r,e)}function $0(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var r2=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Kp=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Tz(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Ot={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},n2={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Az={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function H0(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,u=0,d=Math.floor(s);c<e&&(d=Math.floor(s),o=d*a+i,u=d*c+l,!(s-d<5e-8));)s=1/(s-d),i=a,a=o,l=c,c=u;if(u>e&&(c>e?(u=l,o=i):(u=c,o=a)),!r)return[0,n*o,u];var f=Math.floor(n*o/u);return[f,n*o-f*u,u]}function bo(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=Rz(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var eI=new Date(1899,11,31,0,0,0),wz=eI.getTime(),Cz=new Date(1900,2,1,0,0,0);function tI(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=Cz&&(r+=24*60*60*1e3),(r-(wz+(t.getTimezoneOffset()-eI.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function ax(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Iz(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function kz(t){var e=t<0?12:11,r=ax(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function Dz(t){var e=ax(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function ad(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=kz(t):e===10?r=t.toFixed(10).substr(0,12):r=Dz(t),ax(Iz(r.toUpperCase()))}function Uo(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):ad(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Ps(14,tI(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Rz(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function Fz(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return Kp[r.m-1][1];case 5:return Kp[r.m-1][0];default:return Kp[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return r2[r.q][0];default:return r2[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Ys(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=Ys(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?Ys(l,c):"";return u}function Mi(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var rI=/%/g;function Pz(t,e,r){var n=e.replace(rI,""),s=e.length-n.length;return Ka(t,n,r*Math.pow(10,2*s))+Pr("%",s)}function Oz(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ka(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function nI(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+nI(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var sI=/# (\?+)( ?)\/( ?)(\d+)/;function Nz(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?Pr(" ",t[1].length+1+t[4].length):sx(a,t[1].length)+t[2]+"/"+t[3]+Ys(o,t[4].length))}function Lz(t,e,r){return r+(e===0?"":""+e)+Pr(" ",t[1].length+2+t[4].length)}var aI=/^#*0*\.([0#]+)/,iI=/\).*[0#]/,oI=/\(###\) ###\\?-####/;function Wn(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function s2(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function a2(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Mz(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Bz(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Cs(t,e,r){if(t.charCodeAt(0)===40&&!e.match(iI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Cs("n",n,r):"("+Cs("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Oz(t,e,r);if(e.indexOf("%")!==-1)return Pz(t,e,r);if(e.indexOf("E")!==-1)return nI(e,r);if(e.charCodeAt(0)===36)return"$"+Cs(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+pl(l,e.length);if(e.match(/^[#?]+$/))return s=pl(r,0),s==="0"&&(s=""),s.length>e.length?s:Wn(e.substr(0,e.length-s.length))+s;if(i=e.match(sI))return Nz(i,l,c);if(e.match(/^#+0+$/))return c+pl(l,e.length-e.indexOf("0"));if(i=e.match(aI))return s=s2(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Wn(i[1])).replace(/\.$/,"."+Wn(i[1])).replace(/\.(\d*)$/,function(v,p){return"."+p+Pr("0",Wn(i[1]).length-p.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+s2(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Mi(pl(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Cs(t,e,-r):Mi(""+(Math.floor(r)+Mz(r,i[1].length)))+"."+Ys(a2(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return Cs(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Gl(Cs(t,e.replace(/[\\-]/g,""),r)),a=0,Gl(Gl(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<s.length?s.charAt(a++):v==="0"?"0":""}));if(e.match(oI))return s=Cs(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=H0(l,Math.pow(10,a)-1,!1),s=""+c,u=Ka("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=V0(o[2],a),u.length<i[4].length&&(u=Wn(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=H0(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?sx(o[1],a)+i[2]+"/"+i[3]+V0(o[2],a):Pr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=pl(r,0),e.length<=s.length?s:Wn(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,f=e.length-s.length-d;return Wn(e.substr(0,d)+s+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=a2(r,i[1].length),r<0?"-"+Cs(t,e,-r):Mi(Bz(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ys(0,3-v.length):"")+v})+"."+Ys(a,i[1].length);switch(e){case"###,##0.00":return Cs(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=Mi(pl(l,0));return h!=="0"?c+h:"";case"###,###.00":return Cs(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Cs(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Uz(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ka(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Vz(t,e,r){var n=e.replace(rI,""),s=e.length-n.length;return Ka(t,n,r*Math.pow(10,2*s))+Pr("%",s)}function lI(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+lI(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function la(t,e,r){if(t.charCodeAt(0)===40&&!e.match(iI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?la("n",n,r):"("+la("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Uz(t,e,r);if(e.indexOf("%")!==-1)return Vz(t,e,r);if(e.indexOf("E")!==-1)return lI(e,r);if(e.charCodeAt(0)===36)return"$"+la(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Ys(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:Wn(e.substr(0,e.length-s.length))+s;if(i=e.match(sI))return Lz(i,l,c);if(e.match(/^#+0+$/))return c+Ys(l,e.length-e.indexOf("0"));if(i=e.match(aI))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Wn(i[1])).replace(/\.$/,"."+Wn(i[1])),s=s.replace(/\.(\d*)$/,function(v,p){return"."+p+Pr("0",Wn(i[1]).length-p.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Mi(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+la(t,e,-r):Mi(""+r)+"."+Pr("0",i[1].length);if(i=e.match(/^#,#*,#0/))return la(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Gl(la(t,e.replace(/[\\-]/g,""),r)),a=0,Gl(Gl(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<s.length?s.charAt(a++):v==="0"?"0":""}));if(e.match(oI))return s=la(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=H0(l,Math.pow(10,a)-1,!1),s=""+c,u=Ka("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=V0(o[2],a),u.length<i[4].length&&(u=Wn(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=H0(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?sx(o[1],a)+i[2]+"/"+i[3]+V0(o[2],a):Pr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:Wn(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,f=e.length-s.length-d;return Wn(e.substr(0,d)+s+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+la(t,e,-r):Mi(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ys(0,3-v.length):"")+v})+"."+Ys(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var h=Mi(""+l);return h!=="0"?c+h:"";default:if(e.match(/\.[0#?]*$/))return la(t,e.slice(0,e.lastIndexOf(".")),r)+Wn(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ka(t,e,r){return(r|0)===r?la(t,e,r):Cs(t,e,r)}function $z(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var cI=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ec(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":$0(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(cI))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Hz(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,u,d,f="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!$0(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(d=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(d);s[s.length]={t:"t",v:i},++a;break;case"\\":var h=t.charAt(++a),v=h==="("||h===")"?h:"t";s[s.length]={t:v,v:h},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=bo(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=bo(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=f),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var p={t:o,v:o};if(c==null&&(c=bo(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(p.v=c.H>=12?"P":"A"),p.t="T",f="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(p.v=c.H>=12?"PM":"AM"),p.t="T",a+=5,f="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(p.v=c.H>=12?"":""),p.t="T",a+=5,f="h"):(p.t="t",++a),c==null&&p.t==="T")return"";s[s.length]=p,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(cI)){if(c==null&&(c=bo(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ec(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var g=0,y=0,E;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=f,l="h",g<1&&(g=1);break;case"s":(E=s[a].v.match(/\.0+$/))&&(y=Math.max(y,E[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[a].v.match(/[Hh]/)&&(g=1),g<2&&s[a].v.match(/[Mm]/)&&(g=2),g<3&&s[a].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var S="",I;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=Fz(s[a].t.charCodeAt(0),s[a].v,c,y),s[a].t="t";break;case"n":case"?":for(I=a+1;s[I]!=null&&((o=s[I].t)==="?"||o==="D"||(o===" "||o==="t")&&s[I+1]!=null&&(s[I+1].t==="?"||s[I+1].t==="t"&&s[I+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[I].v==="/"||s[I].v===" "&&s[I+1]!=null&&s[I+1].t=="?"));)s[a].v+=s[I].v,s[I]={v:"",t:";"},++I;S+=s[a].v,a=I-1;break;case"G":s[a].t="t",s[a].v=Uo(e,r);break}var R="",D,C;if(S.length>0){S.charCodeAt(0)==40?(D=e<0&&S.charCodeAt(0)===45?-e:e,C=Ka("n",S,D)):(D=e<0&&n>1?-e:e,C=Ka("n",S,D),D<0&&s[0]&&s[0].t=="t"&&(C=C.substr(1),s[0].v="-"+s[0].v)),I=C.length-1;var _=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){_=a;break}var b=s.length;if(_===s.length&&C.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(I>=s[a].v.length-1?(I-=s[a].v.length,s[a].v=C.substr(I+1,s[a].v.length)):I<0?s[a].v="":(s[a].v=C.substr(0,I+1),I=-1),s[a].t="t",b=a);I>=0&&b<s.length&&(s[b].v=C.substr(0,I+1)+s[b].v)}else if(_!==s.length&&C.indexOf("E")===-1){for(I=C.indexOf(".")-1,a=_;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(u=s[a].v.indexOf(".")>-1&&a===_?s[a].v.indexOf(".")-1:s[a].v.length-1,R=s[a].v.substr(u+1);u>=0;--u)I>=0&&(s[a].v.charAt(u)==="0"||s[a].v.charAt(u)==="#")&&(R=C.charAt(I--)+R);s[a].v=R,s[a].t="t",b=a}for(I>=0&&b<s.length&&(s[b].v=C.substr(0,I+1)+s[b].v),I=C.indexOf(".")+1,a=_;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==_)){for(u=s[a].v.indexOf(".")>-1&&a===_?s[a].v.indexOf(".")+1:0,R=s[a].v.substr(0,u);u<s[a].v.length;++u)I<C.length&&(R+=C.charAt(I++));s[a].v=R,s[a].t="t",b=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(D=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=Ka(s[a].t,s[a].v,D),s[a].t="t");var x="";for(a=0;a!==s.length;++a)s[a]!=null&&(x+=s[a].v);return x}var i2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function o2(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function jz(t,e){var r=$z(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(i2),o=r[1].match(i2);return o2(e,a)?[n,r[0]]:o2(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function Ps(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ot)[t],n==null&&(n=r.table&&r.table[n2[t]]||Ot[n2[t]]),n==null&&(n=Az[t]||"General");break}if($0(n,0))return Uo(e,r);e instanceof Date&&(e=tI(e,r.date1904));var s=jz(n,e);if($0(s[1]))return Uo(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Hz(s[1],e,r,s[0])}function Io(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Ot[r]==null){e<0&&(e=r);continue}if(Ot[r]==t){e=r;break}}e<0&&(e=391)}return Ot[e]=t,e}function uI(){Ot=Tz()}var Gz={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},dI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Wz(t){var e=typeof t=="number"?Ot[t]:t;return e=e.replace(dI,"(\\d+)"),new RegExp("^"+e+"$")}function zz(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(dI)||[]).forEach(function(d,f){var h=parseInt(r[f+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=h;break;case"d":i=h;break;case"h":a=h;break;case"s":l=h;break;case"m":a>=0?o=h:s=h;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?u:c+"T"+u}var Kz=function(){var t={};t.version="1.2.0";function e(){for(var C=0,_=new Array(256),b=0;b!=256;++b)C=b,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,_[b]=C;return typeof Int32Array<"u"?new Int32Array(_):_}var r=e();function n(C){var _=0,b=0,x=0,w=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(x=0;x!=256;++x)w[x]=C[x];for(x=0;x!=256;++x)for(b=C[x],_=256+x;_<4096;_+=256)b=w[_]=b>>>8^C[b&255];var A=[];for(x=1;x!=16;++x)A[x-1]=typeof Int32Array<"u"?w.subarray(x*256,x*256+256):w.slice(x*256,x*256+256);return A}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],d=s[6],f=s[7],h=s[8],v=s[9],p=s[10],g=s[11],y=s[12],E=s[13],S=s[14];function I(C,_){for(var b=_^-1,x=0,w=C.length;x<w;)b=b>>>8^r[(b^C.charCodeAt(x++))&255];return~b}function R(C,_){for(var b=_^-1,x=C.length-15,w=0;w<x;)b=S[C[w++]^b&255]^E[C[w++]^b>>8&255]^y[C[w++]^b>>16&255]^g[C[w++]^b>>>24]^p[C[w++]]^v[C[w++]]^h[C[w++]]^f[C[w++]]^d[C[w++]]^u[C[w++]]^c[C[w++]]^l[C[w++]]^o[C[w++]]^a[C[w++]]^i[C[w++]]^r[C[w++]];for(x+=15;w<x;)b=b>>>8^r[(b^C[w++])&255];return~b}function D(C,_){for(var b=_^-1,x=0,w=C.length,A=0,k=0;x<w;)A=C.charCodeAt(x++),A<128?b=b>>>8^r[(b^A)&255]:A<2048?(b=b>>>8^r[(b^(192|A>>6&31))&255],b=b>>>8^r[(b^(128|A&63))&255]):A>=55296&&A<57344?(A=(A&1023)+64,k=C.charCodeAt(x++)&1023,b=b>>>8^r[(b^(240|A>>8&7))&255],b=b>>>8^r[(b^(128|A>>2&63))&255],b=b>>>8^r[(b^(128|k>>6&15|(A&3)<<4))&255],b=b>>>8^r[(b^(128|k&63))&255]):(b=b>>>8^r[(b^(224|A>>12&15))&255],b=b>>>8^r[(b^(128|A>>6&63))&255],b=b>>>8^r[(b^(128|A&63))&255]);return~b}return t.table=r,t.bstr=I,t.buf=R,t.str=D,t}(),Kt=function(){var e={};e.version="1.2.1";function r(Z,ce){for(var ae=Z.split("/"),oe=ce.split("/"),ue=0,fe=0,we=Math.min(ae.length,oe.length);ue<we;++ue){if(fe=ae[ue].length-oe[ue].length)return fe;if(ae[ue]!=oe[ue])return ae[ue]<oe[ue]?-1:1}return ae.length-oe.length}function n(Z){if(Z.charAt(Z.length-1)=="/")return Z.slice(0,-1).indexOf("/")===-1?Z:n(Z.slice(0,-1));var ce=Z.lastIndexOf("/");return ce===-1?Z:Z.slice(0,ce+1)}function s(Z){if(Z.charAt(Z.length-1)=="/")return s(Z.slice(0,-1));var ce=Z.lastIndexOf("/");return ce===-1?Z:Z.slice(ce+1)}function i(Z,ce){typeof ce=="string"&&(ce=new Date(ce));var ae=ce.getHours();ae=ae<<6|ce.getMinutes(),ae=ae<<5|ce.getSeconds()>>>1,Z.write_shift(2,ae);var oe=ce.getFullYear()-1980;oe=oe<<4|ce.getMonth()+1,oe=oe<<5|ce.getDate(),Z.write_shift(2,oe)}function a(Z){var ce=Z.read_shift(2)&65535,ae=Z.read_shift(2)&65535,oe=new Date,ue=ae&31;ae>>>=5;var fe=ae&15;ae>>>=4,oe.setMilliseconds(0),oe.setFullYear(ae+1980),oe.setMonth(fe-1),oe.setDate(ue);var we=ce&31;ce>>>=5;var Le=ce&63;return ce>>>=6,oe.setHours(ce),oe.setMinutes(Le),oe.setSeconds(we<<1),oe}function o(Z){dn(Z,0);for(var ce={},ae=0;Z.l<=Z.length-4;){var oe=Z.read_shift(2),ue=Z.read_shift(2),fe=Z.l+ue,we={};switch(oe){case 21589:ae=Z.read_shift(1),ae&1&&(we.mtime=Z.read_shift(4)),ue>5&&(ae&2&&(we.atime=Z.read_shift(4)),ae&4&&(we.ctime=Z.read_shift(4))),we.mtime&&(we.mt=new Date(we.mtime*1e3));break}Z.l=fe,ce[oe]=we}return ce}var l;function c(){return l||(l={})}function u(Z,ce){if(Z[0]==80&&Z[1]==75)return ft(Z,ce);if((Z[0]|32)==109&&(Z[1]|32)==105)return io(Z,ce);if(Z.length<512)throw new Error("CFB file size "+Z.length+" < 512");var ae=3,oe=512,ue=0,fe=0,we=0,Le=0,Ce=0,De=[],Re=Z.slice(0,512);dn(Re,0);var Ke=d(Re);switch(ae=Ke[0],ae){case 3:oe=512;break;case 4:oe=4096;break;case 0:if(Ke[1]==0)return ft(Z,ce);default:throw new Error("Major Version: Expected 3 or 4 saw "+ae)}oe!==512&&(Re=Z.slice(0,oe),dn(Re,28));var Ye=Z.slice(0,oe);f(Re,ae);var st=Re.read_shift(4,"i");if(ae===3&&st!==0)throw new Error("# Directory Sectors: Expected 0 saw "+st);Re.l+=4,we=Re.read_shift(4,"i"),Re.l+=4,Re.chk("00100000","Mini Stream Cutoff Size: "),Le=Re.read_shift(4,"i"),ue=Re.read_shift(4,"i"),Ce=Re.read_shift(4,"i"),fe=Re.read_shift(4,"i");for(var Xe=-1,tt=0;tt<109&&(Xe=Re.read_shift(4,"i"),!(Xe<0));++tt)De[tt]=Xe;var St=h(Z,oe);g(Ce,fe,St,oe,De);var ir=E(St,we,De,oe);ir[we].name="!Directory",ue>0&&Le!==k&&(ir[Le].name="!MiniFAT"),ir[De[0]].name="!FAT",ir.fat_addrs=De,ir.ssz=oe;var rr={},yr=[],Pa=[],lo=[];S(we,ir,St,yr,ue,rr,Pa,Le),v(Pa,lo,yr),yr.shift();var fi={FileIndex:Pa,FullPaths:lo};return ce&&ce.raw&&(fi.raw={header:Ye,sectors:St}),fi}function d(Z){if(Z[Z.l]==80&&Z[Z.l+1]==75)return[0,0];Z.chk(L,"Header Signature: "),Z.l+=16;var ce=Z.read_shift(2,"u");return[Z.read_shift(2,"u"),ce]}function f(Z,ce){var ae=9;switch(Z.l+=2,ae=Z.read_shift(2)){case 9:if(ce!=3)throw new Error("Sector Shift: Expected 9 saw "+ae);break;case 12:if(ce!=4)throw new Error("Sector Shift: Expected 12 saw "+ae);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ae)}Z.chk("0600","Mini Sector Shift: "),Z.chk("000000000000","Reserved: ")}function h(Z,ce){for(var ae=Math.ceil(Z.length/ce)-1,oe=[],ue=1;ue<ae;++ue)oe[ue-1]=Z.slice(ue*ce,(ue+1)*ce);return oe[ae-1]=Z.slice(ae*ce),oe}function v(Z,ce,ae){for(var oe=0,ue=0,fe=0,we=0,Le=0,Ce=ae.length,De=[],Re=[];oe<Ce;++oe)De[oe]=Re[oe]=oe,ce[oe]=ae[oe];for(;Le<Re.length;++Le)oe=Re[Le],ue=Z[oe].L,fe=Z[oe].R,we=Z[oe].C,De[oe]===oe&&(ue!==-1&&De[ue]!==ue&&(De[oe]=De[ue]),fe!==-1&&De[fe]!==fe&&(De[oe]=De[fe])),we!==-1&&(De[we]=oe),ue!==-1&&oe!=De[oe]&&(De[ue]=De[oe],Re.lastIndexOf(ue)<Le&&Re.push(ue)),fe!==-1&&oe!=De[oe]&&(De[fe]=De[oe],Re.lastIndexOf(fe)<Le&&Re.push(fe));for(oe=1;oe<Ce;++oe)De[oe]===oe&&(fe!==-1&&De[fe]!==fe?De[oe]=De[fe]:ue!==-1&&De[ue]!==ue&&(De[oe]=De[ue]));for(oe=1;oe<Ce;++oe)if(Z[oe].type!==0){if(Le=oe,Le!=De[Le])do Le=De[Le],ce[oe]=ce[Le]+"/"+ce[oe];while(Le!==0&&De[Le]!==-1&&Le!=De[Le]);De[oe]=-1}for(ce[0]+="/",oe=1;oe<Ce;++oe)Z[oe].type!==2&&(ce[oe]+="/")}function p(Z,ce,ae){for(var oe=Z.start,ue=Z.size,fe=[],we=oe;ae&&ue>0&&we>=0;)fe.push(ce.slice(we*A,we*A+A)),ue-=A,we=xo(ae,we*4);return fe.length===0?Yr(0):Pi(fe).slice(0,Z.size)}function g(Z,ce,ae,oe,ue){var fe=k;if(Z===k){if(ce!==0)throw new Error("DIFAT chain shorter than expected")}else if(Z!==-1){var we=ae[Z],Le=(oe>>>2)-1;if(!we)return;for(var Ce=0;Ce<Le&&(fe=xo(we,Ce*4))!==k;++Ce)ue.push(fe);g(xo(we,oe-4),ce-1,ae,oe,ue)}}function y(Z,ce,ae,oe,ue){var fe=[],we=[];ue||(ue=[]);var Le=oe-1,Ce=0,De=0;for(Ce=ce;Ce>=0;){ue[Ce]=!0,fe[fe.length]=Ce,we.push(Z[Ce]);var Re=ae[Math.floor(Ce*4/oe)];if(De=Ce*4&Le,oe<4+De)throw new Error("FAT boundary crossed: "+Ce+" 4 "+oe);if(!Z[Re])break;Ce=xo(Z[Re],De)}return{nodes:fe,data:g2([we])}}function E(Z,ce,ae,oe){var ue=Z.length,fe=[],we=[],Le=[],Ce=[],De=oe-1,Re=0,Ke=0,Ye=0,st=0;for(Re=0;Re<ue;++Re)if(Le=[],Ye=Re+ce,Ye>=ue&&(Ye-=ue),!we[Ye]){Ce=[];var Xe=[];for(Ke=Ye;Ke>=0;){Xe[Ke]=!0,we[Ke]=!0,Le[Le.length]=Ke,Ce.push(Z[Ke]);var tt=ae[Math.floor(Ke*4/oe)];if(st=Ke*4&De,oe<4+st)throw new Error("FAT boundary crossed: "+Ke+" 4 "+oe);if(!Z[tt]||(Ke=xo(Z[tt],st),Xe[Ke]))break}fe[Ye]={nodes:Le,data:g2([Ce])}}return fe}function S(Z,ce,ae,oe,ue,fe,we,Le){for(var Ce=0,De=oe.length?2:0,Re=ce[Z].data,Ke=0,Ye=0,st;Ke<Re.length;Ke+=128){var Xe=Re.slice(Ke,Ke+128);dn(Xe,64),Ye=Xe.read_shift(2),st=ux(Xe,0,Ye-De),oe.push(st);var tt={name:st,type:Xe.read_shift(1),color:Xe.read_shift(1),L:Xe.read_shift(4,"i"),R:Xe.read_shift(4,"i"),C:Xe.read_shift(4,"i"),clsid:Xe.read_shift(16),state:Xe.read_shift(4,"i"),start:0,size:0},St=Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2);St!==0&&(tt.ct=I(Xe,Xe.l-8));var ir=Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2);ir!==0&&(tt.mt=I(Xe,Xe.l-8)),tt.start=Xe.read_shift(4,"i"),tt.size=Xe.read_shift(4,"i"),tt.size<0&&tt.start<0&&(tt.size=tt.type=0,tt.start=k,tt.name=""),tt.type===5?(Ce=tt.start,ue>0&&Ce!==k&&(ce[Ce].name="!StreamData")):tt.size>=4096?(tt.storage="fat",ce[tt.start]===void 0&&(ce[tt.start]=y(ae,tt.start,ce.fat_addrs,ce.ssz)),ce[tt.start].name=tt.name,tt.content=ce[tt.start].data.slice(0,tt.size)):(tt.storage="minifat",tt.size<0?tt.size=0:Ce!==k&&tt.start!==k&&ce[Ce]&&(tt.content=p(tt,ce[Ce].data,(ce[Le]||{}).data))),tt.content&&dn(tt.content,0),fe[st]=tt,we.push(tt)}}function I(Z,ce){return new Date((ps(Z,ce+4)/1e7*Math.pow(2,32)+ps(Z,ce)/1e7-11644473600)*1e3)}function R(Z,ce){return c(),u(l.readFileSync(Z),ce)}function D(Z,ce){var ae=ce&&ce.type;switch(ae||jt&&Buffer.isBuffer(Z)&&(ae="buffer"),ae||"base64"){case"file":return R(Z,ce);case"base64":return u(qs(Ss(Z)),ce);case"binary":return u(qs(Z),ce)}return u(Z,ce)}function C(Z,ce){var ae=ce||{},oe=ae.root||"Root Entry";if(Z.FullPaths||(Z.FullPaths=[]),Z.FileIndex||(Z.FileIndex=[]),Z.FullPaths.length!==Z.FileIndex.length)throw new Error("inconsistent CFB structure");Z.FullPaths.length===0&&(Z.FullPaths[0]=oe+"/",Z.FileIndex[0]={name:oe,type:5}),ae.CLSID&&(Z.FileIndex[0].clsid=ae.CLSID),_(Z)}function _(Z){var ce="Sh33tJ5";if(!Kt.find(Z,"/"+ce)){var ae=Yr(4);ae[0]=55,ae[1]=ae[3]=50,ae[2]=54,Z.FileIndex.push({name:ce,type:2,content:ae,size:4,L:69,R:69,C:69}),Z.FullPaths.push(Z.FullPaths[0]+ce),b(Z)}}function b(Z,ce){C(Z);for(var ae=!1,oe=!1,ue=Z.FullPaths.length-1;ue>=0;--ue){var fe=Z.FileIndex[ue];switch(fe.type){case 0:oe?ae=!0:(Z.FileIndex.pop(),Z.FullPaths.pop());break;case 1:case 2:case 5:oe=!0,isNaN(fe.R*fe.L*fe.C)&&(ae=!0),fe.R>-1&&fe.L>-1&&fe.R==fe.L&&(ae=!0);break;default:ae=!0;break}}if(!(!ae&&!ce)){var we=new Date(1987,1,19),Le=0,Ce=Object.create?Object.create(null):{},De=[];for(ue=0;ue<Z.FullPaths.length;++ue)Ce[Z.FullPaths[ue]]=!0,Z.FileIndex[ue].type!==0&&De.push([Z.FullPaths[ue],Z.FileIndex[ue]]);for(ue=0;ue<De.length;++ue){var Re=n(De[ue][0]);oe=Ce[Re],oe||(De.push([Re,{name:s(Re).replace("/",""),type:1,clsid:P,ct:we,mt:we,content:null}]),Ce[Re]=!0)}for(De.sort(function(st,Xe){return r(st[0],Xe[0])}),Z.FullPaths=[],Z.FileIndex=[],ue=0;ue<De.length;++ue)Z.FullPaths[ue]=De[ue][0],Z.FileIndex[ue]=De[ue][1];for(ue=0;ue<De.length;++ue){var Ke=Z.FileIndex[ue],Ye=Z.FullPaths[ue];if(Ke.name=s(Ye).replace("/",""),Ke.L=Ke.R=Ke.C=-(Ke.color=1),Ke.size=Ke.content?Ke.content.length:0,Ke.start=0,Ke.clsid=Ke.clsid||P,ue===0)Ke.C=De.length>1?1:-1,Ke.size=0,Ke.type=5;else if(Ye.slice(-1)=="/"){for(Le=ue+1;Le<De.length&&n(Z.FullPaths[Le])!=Ye;++Le);for(Ke.C=Le>=De.length?-1:Le,Le=ue+1;Le<De.length&&n(Z.FullPaths[Le])!=n(Ye);++Le);Ke.R=Le>=De.length?-1:Le,Ke.type=1}else n(Z.FullPaths[ue+1]||"")==n(Ye)&&(Ke.R=ue+1),Ke.type=2}}}function x(Z,ce){var ae=ce||{};if(ae.fileType=="mad")return qr(Z,ae);switch(b(Z),ae.fileType){case"zip":return Ft(Z,ae)}var oe=function(st){for(var Xe=0,tt=0,St=0;St<st.FileIndex.length;++St){var ir=st.FileIndex[St];if(ir.content){var rr=ir.content.length;rr>0&&(rr<4096?Xe+=rr+63>>6:tt+=rr+511>>9)}}for(var yr=st.FullPaths.length+3>>2,Pa=Xe+7>>3,lo=Xe+127>>7,fi=Pa+tt+yr+lo,sa=fi+127>>7,il=sa<=109?0:Math.ceil((sa-109)/127);fi+sa+il+127>>7>sa;)il=++sa<=109?0:Math.ceil((sa-109)/127);var us=[1,il,sa,lo,yr,tt,Xe,0];return st.FileIndex[0].size=Xe<<6,us[7]=(st.FileIndex[0].start=us[0]+us[1]+us[2]+us[3]+us[4]+us[5])+(us[6]+7>>3),us}(Z),ue=Yr(oe[7]<<9),fe=0,we=0;{for(fe=0;fe<8;++fe)ue.write_shift(1,G[fe]);for(fe=0;fe<8;++fe)ue.write_shift(2,0);for(ue.write_shift(2,62),ue.write_shift(2,3),ue.write_shift(2,65534),ue.write_shift(2,9),ue.write_shift(2,6),fe=0;fe<3;++fe)ue.write_shift(2,0);for(ue.write_shift(4,0),ue.write_shift(4,oe[2]),ue.write_shift(4,oe[0]+oe[1]+oe[2]+oe[3]-1),ue.write_shift(4,0),ue.write_shift(4,4096),ue.write_shift(4,oe[3]?oe[0]+oe[1]+oe[2]-1:k),ue.write_shift(4,oe[3]),ue.write_shift(-4,oe[1]?oe[0]-1:k),ue.write_shift(4,oe[1]),fe=0;fe<109;++fe)ue.write_shift(-4,fe<oe[2]?oe[1]+fe:-1)}if(oe[1])for(we=0;we<oe[1];++we){for(;fe<236+we*127;++fe)ue.write_shift(-4,fe<oe[2]?oe[1]+fe:-1);ue.write_shift(-4,we===oe[1]-1?k:we+1)}var Le=function(st){for(we+=st;fe<we-1;++fe)ue.write_shift(-4,fe+1);st&&(++fe,ue.write_shift(-4,k))};for(we=fe=0,we+=oe[1];fe<we;++fe)ue.write_shift(-4,M.DIFSECT);for(we+=oe[2];fe<we;++fe)ue.write_shift(-4,M.FATSECT);Le(oe[3]),Le(oe[4]);for(var Ce=0,De=0,Re=Z.FileIndex[0];Ce<Z.FileIndex.length;++Ce)Re=Z.FileIndex[Ce],Re.content&&(De=Re.content.length,!(De<4096)&&(Re.start=we,Le(De+511>>9)));for(Le(oe[6]+7>>3);ue.l&511;)ue.write_shift(-4,M.ENDOFCHAIN);for(we=fe=0,Ce=0;Ce<Z.FileIndex.length;++Ce)Re=Z.FileIndex[Ce],Re.content&&(De=Re.content.length,!(!De||De>=4096)&&(Re.start=we,Le(De+63>>6)));for(;ue.l&511;)ue.write_shift(-4,M.ENDOFCHAIN);for(fe=0;fe<oe[4]<<2;++fe){var Ke=Z.FullPaths[fe];if(!Ke||Ke.length===0){for(Ce=0;Ce<17;++Ce)ue.write_shift(4,0);for(Ce=0;Ce<3;++Ce)ue.write_shift(4,-1);for(Ce=0;Ce<12;++Ce)ue.write_shift(4,0);continue}Re=Z.FileIndex[fe],fe===0&&(Re.start=Re.size?Re.start-1:k);var Ye=fe===0&&ae.root||Re.name;if(De=2*(Ye.length+1),ue.write_shift(64,Ye,"utf16le"),ue.write_shift(2,De),ue.write_shift(1,Re.type),ue.write_shift(1,Re.color),ue.write_shift(-4,Re.L),ue.write_shift(-4,Re.R),ue.write_shift(-4,Re.C),Re.clsid)ue.write_shift(16,Re.clsid,"hex");else for(Ce=0;Ce<4;++Ce)ue.write_shift(4,0);ue.write_shift(4,Re.state||0),ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(4,Re.start),ue.write_shift(4,Re.size),ue.write_shift(4,0)}for(fe=1;fe<Z.FileIndex.length;++fe)if(Re=Z.FileIndex[fe],Re.size>=4096)if(ue.l=Re.start+1<<9,jt&&Buffer.isBuffer(Re.content))Re.content.copy(ue,ue.l,0,Re.size),ue.l+=Re.size+511&-512;else{for(Ce=0;Ce<Re.size;++Ce)ue.write_shift(1,Re.content[Ce]);for(;Ce&511;++Ce)ue.write_shift(1,0)}for(fe=1;fe<Z.FileIndex.length;++fe)if(Re=Z.FileIndex[fe],Re.size>0&&Re.size<4096)if(jt&&Buffer.isBuffer(Re.content))Re.content.copy(ue,ue.l,0,Re.size),ue.l+=Re.size+63&-64;else{for(Ce=0;Ce<Re.size;++Ce)ue.write_shift(1,Re.content[Ce]);for(;Ce&63;++Ce)ue.write_shift(1,0)}if(jt)ue.l=ue.length;else for(;ue.l<ue.length;)ue.write_shift(1,0);return ue}function w(Z,ce){var ae=Z.FullPaths.map(function(Ce){return Ce.toUpperCase()}),oe=ae.map(function(Ce){var De=Ce.split("/");return De[De.length-(Ce.slice(-1)=="/"?2:1)]}),ue=!1;ce.charCodeAt(0)===47?(ue=!0,ce=ae[0].slice(0,-1)+ce):ue=ce.indexOf("/")!==-1;var fe=ce.toUpperCase(),we=ue===!0?ae.indexOf(fe):oe.indexOf(fe);if(we!==-1)return Z.FileIndex[we];var Le=!fe.match(Zc);for(fe=fe.replace(Zn,""),Le&&(fe=fe.replace(Zc,"!")),we=0;we<ae.length;++we)if((Le?ae[we].replace(Zc,"!"):ae[we]).replace(Zn,"")==fe||(Le?oe[we].replace(Zc,"!"):oe[we]).replace(Zn,"")==fe)return Z.FileIndex[we];return null}var A=64,k=-2,L="d0cf11e0a1b11ae1",G=[208,207,17,224,161,177,26,225],P="00000000000000000000000000000000",M={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:k,FREESECT:-1,HEADER_SIGNATURE:L,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:P,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(Z,ce,ae){c();var oe=x(Z,ae);l.writeFileSync(ce,oe)}function B(Z){for(var ce=new Array(Z.length),ae=0;ae<Z.length;++ae)ce[ae]=String.fromCharCode(Z[ae]);return ce.join("")}function Q(Z,ce){var ae=x(Z,ce);switch(ce&&ce.type||"buffer"){case"file":return c(),l.writeFileSync(ce.filename,ae),ae;case"binary":return typeof ae=="string"?ae:B(ae);case"base64":return Z_(typeof ae=="string"?ae:B(ae));case"buffer":if(jt)return Buffer.isBuffer(ae)?ae:Yo(ae);case"array":return typeof ae=="string"?qs(ae):ae}return ae}var j;function O(Z){try{var ce=Z.InflateRaw,ae=new ce;if(ae._processChunk(new Uint8Array([3,0]),ae._finishFlushFlag),ae.bytesRead)j=Z;else throw new Error("zlib does not expose bytesRead")}catch(oe){console.error("cannot use native zlib: "+(oe.message||oe))}}function W(Z,ce){if(!j)return dt(Z,ce);var ae=j.InflateRaw,oe=new ae,ue=oe._processChunk(Z.slice(Z.l),oe._finishFlushFlag);return Z.l+=oe.bytesRead,ue}function K(Z){return j?j.deflateRawSync(Z):xe(Z)}var se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ve=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ie=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function de(Z){var ce=(Z<<1|Z<<11)&139536|(Z<<5|Z<<15)&558144;return(ce>>16|ce>>8|ce)&255}for(var ee=typeof Uint8Array<"u",Y=ee?new Uint8Array(256):[],ge=0;ge<256;++ge)Y[ge]=de(ge);function q(Z,ce){var ae=Y[Z&255];return ce<=8?ae>>>8-ce:(ae=ae<<8|Y[Z>>8&255],ce<=16?ae>>>16-ce:(ae=ae<<8|Y[Z>>16&255],ae>>>24-ce))}function z(Z,ce){var ae=ce&7,oe=ce>>>3;return(Z[oe]|(ae<=6?0:Z[oe+1]<<8))>>>ae&3}function J(Z,ce){var ae=ce&7,oe=ce>>>3;return(Z[oe]|(ae<=5?0:Z[oe+1]<<8))>>>ae&7}function he(Z,ce){var ae=ce&7,oe=ce>>>3;return(Z[oe]|(ae<=4?0:Z[oe+1]<<8))>>>ae&15}function re(Z,ce){var ae=ce&7,oe=ce>>>3;return(Z[oe]|(ae<=3?0:Z[oe+1]<<8))>>>ae&31}function X(Z,ce){var ae=ce&7,oe=ce>>>3;return(Z[oe]|(ae<=1?0:Z[oe+1]<<8))>>>ae&127}function te(Z,ce,ae){var oe=ce&7,ue=ce>>>3,fe=(1<<ae)-1,we=Z[ue]>>>oe;return ae<8-oe||(we|=Z[ue+1]<<8-oe,ae<16-oe)||(we|=Z[ue+2]<<16-oe,ae<24-oe)||(we|=Z[ue+3]<<24-oe),we&fe}function Se(Z,ce,ae){var oe=ce&7,ue=ce>>>3;return oe<=5?Z[ue]|=(ae&7)<<oe:(Z[ue]|=ae<<oe&255,Z[ue+1]=(ae&7)>>8-oe),ce+3}function Ee(Z,ce,ae){var oe=ce&7,ue=ce>>>3;return ae=(ae&1)<<oe,Z[ue]|=ae,ce+1}function be(Z,ce,ae){var oe=ce&7,ue=ce>>>3;return ae<<=oe,Z[ue]|=ae&255,ae>>>=8,Z[ue+1]=ae,ce+8}function ke(Z,ce,ae){var oe=ce&7,ue=ce>>>3;return ae<<=oe,Z[ue]|=ae&255,ae>>>=8,Z[ue+1]=ae&255,Z[ue+2]=ae>>>8,ce+16}function Be(Z,ce){var ae=Z.length,oe=2*ae>ce?2*ae:ce+5,ue=0;if(ae>=ce)return Z;if(jt){var fe=e2(oe);if(Z.copy)Z.copy(fe);else for(;ue<Z.length;++ue)fe[ue]=Z[ue];return fe}else if(ee){var we=new Uint8Array(oe);if(we.set)we.set(Z);else for(;ue<ae;++ue)we[ue]=Z[ue];return we}return Z.length=oe,Z}function Ie(Z){for(var ce=new Array(Z),ae=0;ae<Z;++ae)ce[ae]=0;return ce}function je(Z,ce,ae){var oe=1,ue=0,fe=0,we=0,Le=0,Ce=Z.length,De=ee?new Uint16Array(32):Ie(32);for(fe=0;fe<32;++fe)De[fe]=0;for(fe=Ce;fe<ae;++fe)Z[fe]=0;Ce=Z.length;var Re=ee?new Uint16Array(Ce):Ie(Ce);for(fe=0;fe<Ce;++fe)De[ue=Z[fe]]++,oe<ue&&(oe=ue),Re[fe]=0;for(De[0]=0,fe=1;fe<=oe;++fe)De[fe+16]=Le=Le+De[fe-1]<<1;for(fe=0;fe<Ce;++fe)Le=Z[fe],Le!=0&&(Re[fe]=De[Le+16]++);var Ke=0;for(fe=0;fe<Ce;++fe)if(Ke=Z[fe],Ke!=0)for(Le=q(Re[fe],oe)>>oe-Ke,we=(1<<oe+4-Ke)-1;we>=0;--we)ce[Le|we<<Ke]=Ke&15|fe<<4;return oe}var Ue=ee?new Uint16Array(512):Ie(512),He=ee?new Uint16Array(32):Ie(32);if(!ee){for(var qe=0;qe<512;++qe)Ue[qe]=0;for(qe=0;qe<32;++qe)He[qe]=0}(function(){for(var Z=[],ce=0;ce<32;ce++)Z.push(5);je(Z,He,32);var ae=[];for(ce=0;ce<=143;ce++)ae.push(8);for(;ce<=255;ce++)ae.push(9);for(;ce<=279;ce++)ae.push(7);for(;ce<=287;ce++)ae.push(8);je(ae,Ue,288)})();var ye=function(){for(var ce=ee?new Uint8Array(32768):[],ae=0,oe=0;ae<ie.length-1;++ae)for(;oe<ie[ae+1];++oe)ce[oe]=ae;for(;oe<32768;++oe)ce[oe]=29;var ue=ee?new Uint8Array(259):[];for(ae=0,oe=0;ae<ve.length-1;++ae)for(;oe<ve[ae+1];++oe)ue[oe]=ae;function fe(Le,Ce){for(var De=0;De<Le.length;){var Re=Math.min(65535,Le.length-De),Ke=De+Re==Le.length;for(Ce.write_shift(1,+Ke),Ce.write_shift(2,Re),Ce.write_shift(2,~Re&65535);Re-- >0;)Ce[Ce.l++]=Le[De++]}return Ce.l}function we(Le,Ce){for(var De=0,Re=0,Ke=ee?new Uint16Array(32768):[];Re<Le.length;){var Ye=Math.min(65535,Le.length-Re);if(Ye<10){for(De=Se(Ce,De,+(Re+Ye==Le.length)),De&7&&(De+=8-(De&7)),Ce.l=De/8|0,Ce.write_shift(2,Ye),Ce.write_shift(2,~Ye&65535);Ye-- >0;)Ce[Ce.l++]=Le[Re++];De=Ce.l*8;continue}De=Se(Ce,De,+(Re+Ye==Le.length)+2);for(var st=0;Ye-- >0;){var Xe=Le[Re];st=(st<<5^Xe)&32767;var tt=-1,St=0;if((tt=Ke[st])&&(tt|=Re&-32768,tt>Re&&(tt-=32768),tt<Re))for(;Le[tt+St]==Le[Re+St]&&St<250;)++St;if(St>2){Xe=ue[St],Xe<=22?De=be(Ce,De,Y[Xe+1]>>1)-1:(be(Ce,De,3),De+=5,be(Ce,De,Y[Xe-23]>>5),De+=3);var ir=Xe<8?0:Xe-4>>2;ir>0&&(ke(Ce,De,St-ve[Xe]),De+=ir),Xe=ce[Re-tt],De=be(Ce,De,Y[Xe]>>3),De-=3;var rr=Xe<4?0:Xe-2>>1;rr>0&&(ke(Ce,De,Re-tt-ie[Xe]),De+=rr);for(var yr=0;yr<St;++yr)Ke[st]=Re&32767,st=(st<<5^Le[Re])&32767,++Re;Ye-=St-1}else Xe<=143?Xe=Xe+48:De=Ee(Ce,De,1),De=be(Ce,De,Y[Xe]),Ke[st]=Re&32767,++Re}De=be(Ce,De,0)-1}return Ce.l=(De+7)/8|0,Ce.l}return function(Ce,De){return Ce.length<8?fe(Ce,De):we(Ce,De)}}();function xe(Z){var ce=Yr(50+Math.floor(Z.length*1.1)),ae=ye(Z,ce);return ce.slice(0,ae)}var _e=ee?new Uint16Array(32768):Ie(32768),Pe=ee?new Uint16Array(32768):Ie(32768),We=ee?new Uint16Array(128):Ie(128),rt=1,mt=1;function gt(Z,ce){var ae=re(Z,ce)+257;ce+=5;var oe=re(Z,ce)+1;ce+=5;var ue=he(Z,ce)+4;ce+=4;for(var fe=0,we=ee?new Uint8Array(19):Ie(19),Le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ce=1,De=ee?new Uint8Array(8):Ie(8),Re=ee?new Uint8Array(8):Ie(8),Ke=we.length,Ye=0;Ye<ue;++Ye)we[se[Ye]]=fe=J(Z,ce),Ce<fe&&(Ce=fe),De[fe]++,ce+=3;var st=0;for(De[0]=0,Ye=1;Ye<=Ce;++Ye)Re[Ye]=st=st+De[Ye-1]<<1;for(Ye=0;Ye<Ke;++Ye)(st=we[Ye])!=0&&(Le[Ye]=Re[st]++);var Xe=0;for(Ye=0;Ye<Ke;++Ye)if(Xe=we[Ye],Xe!=0){st=Y[Le[Ye]]>>8-Xe;for(var tt=(1<<7-Xe)-1;tt>=0;--tt)We[st|tt<<Xe]=Xe&7|Ye<<3}var St=[];for(Ce=1;St.length<ae+oe;)switch(st=We[X(Z,ce)],ce+=st&7,st>>>=3){case 16:for(fe=3+z(Z,ce),ce+=2,st=St[St.length-1];fe-- >0;)St.push(st);break;case 17:for(fe=3+J(Z,ce),ce+=3;fe-- >0;)St.push(0);break;case 18:for(fe=11+X(Z,ce),ce+=7;fe-- >0;)St.push(0);break;default:St.push(st),Ce<st&&(Ce=st);break}var ir=St.slice(0,ae),rr=St.slice(ae);for(Ye=ae;Ye<286;++Ye)ir[Ye]=0;for(Ye=oe;Ye<30;++Ye)rr[Ye]=0;return rt=je(ir,_e,286),mt=je(rr,Pe,30),ce}function Lt(Z,ce){if(Z[0]==3&&!(Z[1]&3))return[Zi(ce),2];for(var ae=0,oe=0,ue=e2(ce||1<<18),fe=0,we=ue.length>>>0,Le=0,Ce=0;!(oe&1);){if(oe=J(Z,ae),ae+=3,oe>>>1)oe>>1==1?(Le=9,Ce=5):(ae=gt(Z,ae),Le=rt,Ce=mt);else{ae&7&&(ae+=8-(ae&7));var De=Z[ae>>>3]|Z[(ae>>>3)+1]<<8;if(ae+=32,De>0)for(!ce&&we<fe+De&&(ue=Be(ue,fe+De),we=ue.length);De-- >0;)ue[fe++]=Z[ae>>>3],ae+=8;continue}for(;;){!ce&&we<fe+32767&&(ue=Be(ue,fe+32767),we=ue.length);var Re=te(Z,ae,Le),Ke=oe>>>1==1?Ue[Re]:_e[Re];if(ae+=Ke&15,Ke>>>=4,!(Ke>>>8&255))ue[fe++]=Ke;else{if(Ke==256)break;Ke-=257;var Ye=Ke<8?0:Ke-4>>2;Ye>5&&(Ye=0);var st=fe+ve[Ke];Ye>0&&(st+=te(Z,ae,Ye),ae+=Ye),Re=te(Z,ae,Ce),Ke=oe>>>1==1?He[Re]:Pe[Re],ae+=Ke&15,Ke>>>=4;var Xe=Ke<4?0:Ke-2>>1,tt=ie[Ke];for(Xe>0&&(tt+=te(Z,ae,Xe),ae+=Xe),!ce&&we<st&&(ue=Be(ue,st+100),we=ue.length);fe<st;)ue[fe]=ue[fe-tt],++fe}}}return ce?[ue,ae+7>>>3]:[ue.slice(0,fe),ae+7>>>3]}function dt(Z,ce){var ae=Z.slice(Z.l||0),oe=Lt(ae,ce);return Z.l+=oe[1],oe[0]}function at(Z,ce){if(Z)typeof console<"u"&&console.error(ce);else throw new Error(ce)}function ft(Z,ce){var ae=Z;dn(ae,0);var oe=[],ue=[],fe={FileIndex:oe,FullPaths:ue};C(fe,{root:ce.root});for(var we=ae.length-4;(ae[we]!=80||ae[we+1]!=75||ae[we+2]!=5||ae[we+3]!=6)&&we>=0;)--we;ae.l=we+4,ae.l+=4;var Le=ae.read_shift(2);ae.l+=6;var Ce=ae.read_shift(4);for(ae.l=Ce,we=0;we<Le;++we){ae.l+=20;var De=ae.read_shift(4),Re=ae.read_shift(4),Ke=ae.read_shift(2),Ye=ae.read_shift(2),st=ae.read_shift(2);ae.l+=8;var Xe=ae.read_shift(4),tt=o(ae.slice(ae.l+Ke,ae.l+Ke+Ye));ae.l+=Ke+Ye+st;var St=ae.l;ae.l=Xe+4,Ct(ae,De,Re,fe,tt),ae.l=St}return fe}function Ct(Z,ce,ae,oe,ue){Z.l+=2;var fe=Z.read_shift(2),we=Z.read_shift(2),Le=a(Z);if(fe&8257)throw new Error("Unsupported ZIP encryption");for(var Ce=Z.read_shift(4),De=Z.read_shift(4),Re=Z.read_shift(4),Ke=Z.read_shift(2),Ye=Z.read_shift(2),st="",Xe=0;Xe<Ke;++Xe)st+=String.fromCharCode(Z[Z.l++]);if(Ye){var tt=o(Z.slice(Z.l,Z.l+Ye));(tt[21589]||{}).mt&&(Le=tt[21589].mt),((ue||{})[21589]||{}).mt&&(Le=ue[21589].mt)}Z.l+=Ye;var St=Z.slice(Z.l,Z.l+De);switch(we){case 8:St=W(Z,Re);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+we)}var ir=!1;fe&8&&(Ce=Z.read_shift(4),Ce==134695760&&(Ce=Z.read_shift(4),ir=!0),De=Z.read_shift(4),Re=Z.read_shift(4)),De!=ce&&at(ir,"Bad compressed size: "+ce+" != "+De),Re!=ae&&at(ir,"Bad uncompressed size: "+ae+" != "+Re),Sr(oe,st,St,{unsafe:!0,mt:Le})}function Ft(Z,ce){var ae=ce||{},oe=[],ue=[],fe=Yr(1),we=ae.compression?8:0,Le=0,Ce=0,De=0,Re=0,Ke=0,Ye=Z.FullPaths[0],st=Ye,Xe=Z.FileIndex[0],tt=[],St=0;for(Ce=1;Ce<Z.FullPaths.length;++Ce)if(st=Z.FullPaths[Ce].slice(Ye.length),Xe=Z.FileIndex[Ce],!(!Xe.size||!Xe.content||st=="Sh33tJ5")){var ir=Re,rr=Yr(st.length);for(De=0;De<st.length;++De)rr.write_shift(1,st.charCodeAt(De)&127);rr=rr.slice(0,rr.l),tt[Ke]=Kz.buf(Xe.content,0);var yr=Xe.content;we==8&&(yr=K(yr)),fe=Yr(30),fe.write_shift(4,67324752),fe.write_shift(2,20),fe.write_shift(2,Le),fe.write_shift(2,we),Xe.mt?i(fe,Xe.mt):fe.write_shift(4,0),fe.write_shift(-4,tt[Ke]),fe.write_shift(4,yr.length),fe.write_shift(4,Xe.content.length),fe.write_shift(2,rr.length),fe.write_shift(2,0),Re+=fe.length,oe.push(fe),Re+=rr.length,oe.push(rr),Re+=yr.length,oe.push(yr),fe=Yr(46),fe.write_shift(4,33639248),fe.write_shift(2,0),fe.write_shift(2,20),fe.write_shift(2,Le),fe.write_shift(2,we),fe.write_shift(4,0),fe.write_shift(-4,tt[Ke]),fe.write_shift(4,yr.length),fe.write_shift(4,Xe.content.length),fe.write_shift(2,rr.length),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(4,0),fe.write_shift(4,ir),St+=fe.l,ue.push(fe),St+=rr.length,ue.push(rr),++Ke}return fe=Yr(22),fe.write_shift(4,101010256),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,Ke),fe.write_shift(2,Ke),fe.write_shift(4,St),fe.write_shift(4,Re),fe.write_shift(2,0),Pi([Pi(oe),Pi(ue),fe])}var vr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function $n(Z,ce){if(Z.ctype)return Z.ctype;var ae=Z.name||"",oe=ae.match(/\.([^\.]+)$/);return oe&&vr[oe[1]]||ce&&(oe=(ae=ce).match(/[\.\\]([^\.\\])+$/),oe&&vr[oe[1]])?vr[oe[1]]:"application/octet-stream"}function di(Z){for(var ce=Z_(Z),ae=[],oe=0;oe<ce.length;oe+=76)ae.push(ce.slice(oe,oe+76));return ae.join(`\r
`)+`\r
`}function ts(Z){var ce=Z.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(De){var Re=De.charCodeAt(0).toString(16).toUpperCase();return"="+(Re.length==1?"0"+Re:Re)});ce=ce.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ce.charAt(0)==`
`&&(ce="=0D"+ce.slice(1)),ce=ce.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ae=[],oe=ce.split(`\r
`),ue=0;ue<oe.length;++ue){var fe=oe[ue];if(fe.length==0){ae.push("");continue}for(var we=0;we<fe.length;){var Le=76,Ce=fe.slice(we,we+Le);Ce.charAt(Le-1)=="="?Le--:Ce.charAt(Le-2)=="="?Le-=2:Ce.charAt(Le-3)=="="&&(Le-=3),Ce=fe.slice(we,we+Le),we+=Le,we<fe.length&&(Ce+="="),ae.push(Ce)}}return ae.join(`\r
`)}function sl(Z){for(var ce=[],ae=0;ae<Z.length;++ae){for(var oe=Z[ae];ae<=Z.length&&oe.charAt(oe.length-1)=="=";)oe=oe.slice(0,oe.length-1)+Z[++ae];ce.push(oe)}for(var ue=0;ue<ce.length;++ue)ce[ue]=ce[ue].replace(/[=][0-9A-Fa-f]{2}/g,function(fe){return String.fromCharCode(parseInt(fe.slice(1),16))});return qs(ce.join(`\r
`))}function Fa(Z,ce,ae){for(var oe="",ue="",fe="",we,Le=0;Le<10;++Le){var Ce=ce[Le];if(!Ce||Ce.match(/^\s*$/))break;var De=Ce.match(/^(.*?):\s*([^\s].*)$/);if(De)switch(De[1].toLowerCase()){case"content-location":oe=De[2].trim();break;case"content-type":fe=De[2].trim();break;case"content-transfer-encoding":ue=De[2].trim();break}}switch(++Le,ue.toLowerCase()){case"base64":we=qs(Ss(ce.slice(Le).join("")));break;case"quoted-printable":we=sl(ce.slice(Le));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ue)}var Re=Sr(Z,oe.slice(ae.length),we,{unsafe:!0});fe&&(Re.ctype=fe)}function io(Z,ce){if(B(Z.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ae=ce&&ce.root||"",oe=(jt&&Buffer.isBuffer(Z)?Z.toString("binary"):B(Z)).split(`\r
`),ue=0,fe="";for(ue=0;ue<oe.length;++ue)if(fe=oe[ue],!!/^Content-Location:/i.test(fe)&&(fe=fe.slice(fe.indexOf("file")),ae||(ae=fe.slice(0,fe.lastIndexOf("/")+1)),fe.slice(0,ae.length)!=ae))for(;ae.length>0&&(ae=ae.slice(0,ae.length-1),ae=ae.slice(0,ae.lastIndexOf("/")+1),fe.slice(0,ae.length)!=ae););var we=(oe[1]||"").match(/boundary="(.*?)"/);if(!we)throw new Error("MAD cannot find boundary");var Le="--"+(we[1]||""),Ce=[],De=[],Re={FileIndex:Ce,FullPaths:De};C(Re);var Ke,Ye=0;for(ue=0;ue<oe.length;++ue){var st=oe[ue];st!==Le&&st!==Le+"--"||(Ye++&&Fa(Re,oe.slice(Ke,ue),ae),Ke=ue)}return Re}function qr(Z,ce){var ae=ce||{},oe=ae.boundary||"SheetJS";oe="------="+oe;for(var ue=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+oe.slice(2)+'"',"","",""],fe=Z.FullPaths[0],we=fe,Le=Z.FileIndex[0],Ce=1;Ce<Z.FullPaths.length;++Ce)if(we=Z.FullPaths[Ce].slice(fe.length),Le=Z.FileIndex[Ce],!(!Le.size||!Le.content||we=="Sh33tJ5")){we=we.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(St){return"_x"+St.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(St){return"_u"+St.charCodeAt(0).toString(16)+"_"});for(var De=Le.content,Re=jt&&Buffer.isBuffer(De)?De.toString("binary"):B(De),Ke=0,Ye=Math.min(1024,Re.length),st=0,Xe=0;Xe<=Ye;++Xe)(st=Re.charCodeAt(Xe))>=32&&st<128&&++Ke;var tt=Ke>=Ye*4/5;ue.push(oe),ue.push("Content-Location: "+(ae.root||"file:///C:/SheetJS/")+we),ue.push("Content-Transfer-Encoding: "+(tt?"quoted-printable":"base64")),ue.push("Content-Type: "+$n(Le,we)),ue.push(""),ue.push(tt?ts(Re):di(Re))}return ue.push(oe+`--\r
`),ue.join(`\r
`)}function oo(Z){var ce={};return C(ce,Z),ce}function Sr(Z,ce,ae,oe){var ue=oe&&oe.unsafe;ue||C(Z);var fe=!ue&&Kt.find(Z,ce);if(!fe){var we=Z.FullPaths[0];ce.slice(0,we.length)==we?we=ce:(we.slice(-1)!="/"&&(we+="/"),we=(we+ce).replace("//","/")),fe={name:s(ce),type:2},Z.FileIndex.push(fe),Z.FullPaths.push(we),ue||Kt.utils.cfb_gc(Z)}return fe.content=ae,fe.size=ae?ae.length:0,oe&&(oe.CLSID&&(fe.clsid=oe.CLSID),oe.mt&&(fe.mt=oe.mt),oe.ct&&(fe.ct=oe.ct)),fe}function yn(Z,ce){C(Z);var ae=Kt.find(Z,ce);if(ae){for(var oe=0;oe<Z.FileIndex.length;++oe)if(Z.FileIndex[oe]==ae)return Z.FileIndex.splice(oe,1),Z.FullPaths.splice(oe,1),!0}return!1}function al(Z,ce,ae){C(Z);var oe=Kt.find(Z,ce);if(oe){for(var ue=0;ue<Z.FileIndex.length;++ue)if(Z.FileIndex[ue]==oe)return Z.FileIndex[ue].name=s(ae),Z.FullPaths[ue]=ae,!0}return!1}function Sc(Z){b(Z,!0)}return e.find=w,e.read=D,e.parse=u,e.write=Q,e.writeFile=H,e.utils={cfb_new:oo,cfb_add:Sr,cfb_del:yn,cfb_mov:al,cfb_gc:Sc,ReadShift:Su,CheckField:PI,prep_blob:dn,bconcat:Pi,use_zlib:O,_deflateRaw:xe,_inflateRaw:dt,consts:M},e}();function qz(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Ta(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function ix(t){for(var e=[],r=Ta(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}var j0=new Date(1899,11,30,0,0,0);function es(t,e){var r=t.getTime(),n=j0.getTime()+(t.getTimezoneOffset()-j0.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var fI=new Date,Xz=j0.getTime()+(fI.getTimezoneOffset()-j0.getTimezoneOffset())*6e4,l2=fI.getTimezoneOffset();function ep(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Xz),e.getTimezoneOffset()!==l2&&e.setTime(e.getTime()+(e.getTimezoneOffset()-l2)*6e4),e}function Yz(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var c2=new Date("2017-02-19T19:06:09.000Z"),hI=isNaN(c2.getFullYear())?new Date("2/19/17"):c2,Qz=hI.getFullYear()==2017;function an(t,e){var r=new Date(t);if(Qz)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(hI.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Vo(t,e){if(jt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return tu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return tu(ZC(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return tu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return tu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function vn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=vn(t[r]));return e}function Pr(t,e){for(var r="";r.length<e;)r+=t;return r}function Zs(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var Jz=["january","february","march","april","may","june","july","august","september","october","november","december"];function lc(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&Jz.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var Zz=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),a=[i[0]],o=1;o<i.length;++o)a.push(s),a.push(i[o]);return a}}();function pI(t){return t?t.content&&t.type?Vo(t.content,!0):t.data?Jc(t.data):t.asNodeBuffer&&jt?Jc(t.asNodeBuffer().toString("binary")):t.asBinary?Jc(t.asBinary()):t._data&&t._data.getContent?Jc(Vo(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function mI(t){if(!t)return null;if(t.data)return Q_(t.data);if(t.asNodeBuffer&&jt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?Q_(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function eK(t){return t&&t.name.slice(-4)===".bin"?mI(t):pI(t)}function Is(t,e){for(var r=t.FullPaths||Ta(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var a=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||s==a)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function ox(t,e){var r=Is(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Gr(t,e,r){if(!r)return eK(ox(t,e));if(!e)return null;try{return Gr(t,e)}catch{return null}}function ms(t,e,r){if(!r)return pI(ox(t,e));if(!e)return null;try{return ms(t,e)}catch{return null}}function tK(t,e,r){return mI(ox(t,e))}function u2(t){for(var e=t.FullPaths||Ta(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function rK(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return jt?n=Yo(r):n=_z(r),Kt.utils.cfb_add(t,e,n)}Kt.utils.cfb_add(t,e,r)}else t.file(e,r)}function vI(t,e){switch(e.type){case"base64":return Kt.read(t,{type:"base64"});case"binary":return Kt.read(t,{type:"binary"});case"buffer":case"array":return Kt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function eu(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var gI=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,nK=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,d2=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,sK=/<[^>]*>/g,Vn=gI.match(d2)?d2:sK,aK=/<\w*:/,iK=/<(\/?)\w+:/;function _t(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var a=t.match(nK),o=0,l="",c=0,u="",d="",f=1;if(a)for(c=0;c!=a.length;++c){for(d=a[c],i=0;i!=d.length&&d.charCodeAt(i)!==61;++i);for(u=d.slice(0,i).trim();d.charCodeAt(i+1)==32;)++i;for(f=(s=d.charCodeAt(i+1))==34||s==39?1:0,l=d.slice(i+1+f,d.length-f),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,n[u.toLowerCase()]=l;else{var h=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[h]&&u.slice(o-3,o)=="ext")continue;n[h]=l,n[h.toLowerCase()]=l}}return n}function Da(t){return t.replace(iK,"<$1")}var xI={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},oK=ix(xI),Xt=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(o,l){return xI[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,a)+r(s.slice(a+3))}}(),lK=/[&<>'"]/g,cK=/[\u0000-\u001f]/g;function lx(t){var e=t+"";return e.replace(lK,function(r){return oK[r]}).replace(/\n/g,"<br/>").replace(cK,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var f2=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function _r(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function qp(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function h2(t){var e=Zi(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function p2(t){return Yo(t,"binary").toString("utf8")}var bf="foo bar baz",pr=jt&&(p2(bf)==qp(bf)&&p2||h2(bf)==qp(bf)&&h2)||qp,tu=jt?function(t){return Yo(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},id=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),yI=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),uK=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),dK=/<\/?(?:vt:)?variant>/g,fK=/<(?:vt:)([^>]*)>([\s\S]*)</;function m2(t,e){var r=_t(t),n=t.match(uK(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var a=i.replace(dK,"").match(fK);a&&s.push({v:pr(a[2]),t:a[1]})}),s}var hK=/(^\s|\s$|\n)/;function pK(t){return Ta(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function mK(t,e,r){return"<"+t+(r!=null?pK(r):"")+(e!=null?(e.match(hK)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function cx(t){if(jt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return pr(Qo(nx(t)));throw new Error("Bad input format: expected Buffer or string")}var od=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,vK={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},gK=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function xK(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function yK(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var v2=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},g2=jt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Yo(e)})):v2(t)}:v2,x2=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(Wa(t,s)));return n.join("").replace(Zn,"")},ux=jt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Zn,""):x2(t,e,r)}:x2,y2=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},EI=jt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):y2(t,e,r)}:y2,E2=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Tl(t,s)));return n.join("")},Md=jt?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):E2(e,r,n)}:E2,_I=function(t,e){var r=ps(t,e);return r>0?Md(t,e+4,e+4+r-1):""},bI=_I,SI=function(t,e){var r=ps(t,e);return r>0?Md(t,e+4,e+4+r-1):""},TI=SI,AI=function(t,e){var r=2*ps(t,e);return r>0?Md(t,e+4,e+4+r-1):""},wI=AI,CI=function(e,r){var n=ps(e,r);return n>0?ux(e,r+4,r+4+n):""},II=CI,kI=function(t,e){var r=ps(t,e);return r>0?Md(t,e+4,e+4+r):""},DI=kI,RI=function(t,e){return xK(t,e)},G0=RI,FI=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};jt&&(bI=function(e,r){if(!Buffer.isBuffer(e))return _I(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},TI=function(e,r){if(!Buffer.isBuffer(e))return SI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},wI=function(e,r){if(!Buffer.isBuffer(e))return AI(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},II=function(e,r){if(!Buffer.isBuffer(e))return CI(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},DI=function(e,r){if(!Buffer.isBuffer(e))return kI(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},G0=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):RI(e,r)},FI=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Tl=function(t,e){return t[e]},Wa=function(t,e){return t[e+1]*256+t[e]},EK=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},ps=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},xo=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},_K=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Su(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,jt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(Wa(this,c)),c+=2;t*=2;break;case"utf8":r=Md(this,this.l,this.l+t);break;case"utf16le":t*=2,r=ux(this,this.l,this.l+t);break;case"wstr":return Su.call(this,t,"dbcs");case"lpstr-ansi":r=bI(this,this.l),t=4+ps(this,this.l);break;case"lpstr-cp":r=TI(this,this.l),t=4+ps(this,this.l);break;case"lpwstr":r=wI(this,this.l),t=4+2*ps(this,this.l);break;case"lpp4":t=4+ps(this,this.l),r=II(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+ps(this,this.l),r=DI(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Tl(this,this.l+t++))!==0;)i.push(_f(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=Wa(this,this.l+t))!==0;)i.push(_f(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Tl(this,c),this.l=c+1,o=Su.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(_f(Wa(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Tl(this,c),this.l=c+1,o=Su.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(_f(Tl(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=Tl(this,this.l),this.l++,n;case 2:return n=(e==="i"?EK:Wa)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?xo:_K)(this,this.l),this.l+=4,n):(s=ps(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=G0(this,this.l):s=G0([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=EI(this,this.l,t);break}}return this.l+=t,r}var bK=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},SK=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},TK=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function AK(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)TK(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,bK(this,e,this.l);break;case 8:if(n=8,r==="f"){yK(this,e,this.l);break}case 16:break;case-4:n=4,SK(this,e,this.l);break}return this.l+=n,this}function PI(t,e){var r=EI(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function dn(t,e){t.l=e,t.read_shift=Su,t.chk=PI,t.write_shift=AK}function Un(t,e){t.l+=e}function Yr(t){var e=Zi(t);return dn(e,0),e}function ci(t,e,r){if(t){var n,s,i;dn(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=Y0[o]||Y0[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;l=t.l+i;var u=c.f&&c.f(t,i,r);if(t.l=l,e(u,c,o))return}}}function Jv(){var t=[],e=jt?256:2048,r=function(c){var u=Yr(c);return dn(u,0),u},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),Pi(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function Tu(t,e,r){var n=vn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function _2(t,e,r){var n=vn(t);return n.s=Tu(n.s,e.s,r),n.e=Tu(n.e,e.s,r),n}function Au(t,e){if(t.cRel&&t.c<0)for(t=vn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=vn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Dt(t);return!t.cRel&&t.cRel!=null&&(r=IK(r)),!t.rRel&&t.rRel!=null&&(r=wK(r)),r}function Xp(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Zr(t.s.c)+":"+(t.e.cRel?"":"$")+Zr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+gn(t.s.r)+":"+(t.e.rRel?"":"$")+gn(t.e.r):Au(t.s,e.biff)+":"+Au(t.e,e.biff)}function dx(t){return parseInt(CK(t),10)-1}function gn(t){return""+(t+1)}function wK(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function CK(t){return t.replace(/\$(\d+)$/,"$1")}function fx(t){for(var e=kK(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Zr(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function IK(t){return t.replace(/^([A-Z])/,"$$$1")}function kK(t){return t.replace(/^\$([A-Z])/,"$1")}function DK(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Yn(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Dt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function _c(t){var e=t.indexOf(":");return e==-1?{s:Yn(t),e:Yn(t)}:{s:Yn(t.slice(0,e)),e:Yn(t.slice(e+1))}}function qt(t,e){return typeof e>"u"||typeof e=="number"?qt(t.s,t.e):(typeof t!="string"&&(t=Dt(t)),typeof e!="string"&&(e=Dt(e)),t==e?t:t+":"+e)}function Nr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function b2(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Ps(t.z,r?es(e):e)}catch{}try{return t.w=Ps((t.XF||{}).numFmtId||(r?14:0),r?es(e):e)}catch{return""+e}}function ii(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?el[t.v]||t.v:e==null?b2(t,t.v):b2(t,e))}function so(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function OI(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Yn(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Nr(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=u.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[d].length;++f)if(!(typeof e[d][f]>"u")){var h={v:e[d][f]},v=a+d,p=o+f;if(c.s.r>v&&(c.s.r=v),c.s.c>p&&(c.s.c=p),c.e.r<v&&(c.e.r=v),c.e.c<p&&(c.e.c=p),e[d][f]&&typeof e[d][f]=="object"&&!Array.isArray(e[d][f])&&!(e[d][f]instanceof Date))h=e[d][f];else if(Array.isArray(h.v)&&(h.f=e[d][f][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||Ot[14],n.cellDates?(h.t="d",h.w=Ps(h.z,es(h.v))):(h.t="n",h.v=es(h.v),h.w=Ps(h.z,h.v))):h.t="s";if(s)i[v]||(i[v]=[]),i[v][p]&&i[v][p].z&&(h.z=i[v][p].z),i[v][p]=h;else{var g=Dt({c:p,r:v});i[g]&&i[g].z&&(h.z=i[g].z),i[g]=h}}}return c.s.c<1e7&&(i["!ref"]=qt(c)),i}function bc(t,e){return OI(null,t,e)}function RK(t){return t.read_shift(4,"i")}function Mn(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function FK(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function hx(t,e){var r=t.l,n=t.read_shift(1),s=Mn(t),i=[],a={t:s,h:s};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(FK(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}var PK=hx;function Ms(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Jo(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var OK=Mn;function px(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var NK=Mn,Zv=px;function mx(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?G0([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):xo(e,0)>>2;return r?s/100:s}function NI(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var Zo=NI;function Fn(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function LK(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=ko[s];c&&(e.rgb=cd(c));break;case 2:e.rgb=cd([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function MK(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function LI(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function BK(t){return LI(t,1)}function UK(t){return LI(t,2)}var vx=2,as=3,Sf=11,S2=12,W0=19,Tf=64,VK=65,$K=71,HK=4108,jK=4126,nn=80,MI=81,GK=[nn,MI],WK={1:{n:"CodePage",t:vx},2:{n:"Category",t:nn},3:{n:"PresentationFormat",t:nn},4:{n:"ByteCount",t:as},5:{n:"LineCount",t:as},6:{n:"ParagraphCount",t:as},7:{n:"SlideCount",t:as},8:{n:"NoteCount",t:as},9:{n:"HiddenCount",t:as},10:{n:"MultimediaClipCount",t:as},11:{n:"ScaleCrop",t:Sf},12:{n:"HeadingPairs",t:HK},13:{n:"TitlesOfParts",t:jK},14:{n:"Manager",t:nn},15:{n:"Company",t:nn},16:{n:"LinksUpToDate",t:Sf},17:{n:"CharacterCount",t:as},19:{n:"SharedDoc",t:Sf},22:{n:"HyperlinksChanged",t:Sf},23:{n:"AppVersion",t:as,p:"version"},24:{n:"DigSig",t:VK},26:{n:"ContentType",t:nn},27:{n:"ContentStatus",t:nn},28:{n:"Language",t:nn},29:{n:"Version",t:nn},255:{},2147483648:{n:"Locale",t:W0},2147483651:{n:"Behavior",t:W0},1919054434:{}},zK={1:{n:"CodePage",t:vx},2:{n:"Title",t:nn},3:{n:"Subject",t:nn},4:{n:"Author",t:nn},5:{n:"Keywords",t:nn},6:{n:"Comments",t:nn},7:{n:"Template",t:nn},8:{n:"LastAuthor",t:nn},9:{n:"RevNumber",t:nn},10:{n:"EditTime",t:Tf},11:{n:"LastPrinted",t:Tf},12:{n:"CreatedDate",t:Tf},13:{n:"ModifiedDate",t:Tf},14:{n:"PageCount",t:as},15:{n:"WordCount",t:as},16:{n:"CharCount",t:as},17:{n:"Thumbnail",t:$K},18:{n:"Application",t:nn},19:{n:"DocSecurity",t:as},255:{},2147483648:{n:"Locale",t:W0},2147483651:{n:"Behavior",t:W0},1919054434:{}},T2={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},KK=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function qK(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var XK=qK([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ko=vn(XK),el={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},BI={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},A2={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function YK(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function QK(t){var e=YK();if(!t||!t.match)return e;var r={};if((t.match(Vn)||[]).forEach(function(n){var s=_t(n);switch(s[0].replace(aK,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[A2[s.ContentType]]!==void 0&&e[A2[s.ContentType]].push(s.PartName);break}}),e.xmlns!==vK.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}var Il={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function eg(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function wu(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Vn)||[]).forEach(function(s){var i=_t(s);if(i[0]==="<Relationship"){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:eu(i.Target,e);r[o]=a,n[i.Id]=a}}),r["!id"]=n,r}var JK="application/vnd.oasis.opendocument.spreadsheet";function ZK(t,e){for(var r=cx(t),n,s;n=od.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=_t(n[0],!1),s.path=="/"&&s.type!==JK)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var Cu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],eq=function(){for(var t=new Array(Cu.length),e=0;e<Cu.length;++e){var r=Cu[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function UI(t){var e={};t=pr(t);for(var r=0;r<Cu.length;++r){var n=Cu[r],s=t.match(eq[r]);s!=null&&s.length>0&&(e[n[1]]=Xt(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=an(e[n[1]]))}return e}var tq=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function VI(t,e,r,n){var s=[];if(typeof t=="string")s=m2(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(u){return{v:u}}));var a=typeof e=="string"?m2(e,n).map(function(u){return u.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function rq(t,e,r){var n={};return e||(e={}),t=pr(t),tq.forEach(function(s){var i=(t.match(id(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=Xt(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var a=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));a&&a.length>0&&(n[s[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&VI(n.HeadingPairs,n.TitlesOfParts,e,r),e}var nq=/<[^>]+>[^<]*/g;function sq(t,e){var r={},n="",s=t.match(nq);if(s)for(var i=0;i!=s.length;++i){var a=s[i],o=_t(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Xt(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=Xt(u);break;case"bool":r[n]=_r(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=an(u);break;case"cy":case"error":r[n]=Xt(u);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}var aq={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Yp;function iq(t,e,r){Yp||(Yp=ix(aq)),e=Yp[e]||e,t[e]=r}function gx(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function $I(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function HI(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function jI(t,e,r){return e===31?HI(t):$I(t,e,r)}function tg(t,e,r){return jI(t,e,r===!1?0:4)}function oq(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return jI(t,e,0)}function lq(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Zn,""),t.l-s&2&&(t.l+=2)}return r}function cq(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Zn,"");return r}function uq(t){var e=t.l,r=z0(t,MI);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=z0(t,as);return[r,n]}function dq(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(uq(t));return r}function w2(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),a=t.read_shift(4);n[i]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(Zn,"").replace(Zc,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function GI(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function fq(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function z0(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==S2&&n!==e&&GK.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===S2?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return $I(t,n,4).replace(Zn,"");case 31:return HI(t);case 64:return gx(t);case 65:return GI(t);case 71:return fq(t);case 80:return tg(t,n,!i.raw).replace(Zn,"");case 81:return oq(t,n).replace(Zn,"");case 4108:return dq(t);case 4126:case 4127:return n==4127?lq(t):cq(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function C2(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0,o=0,l=-1,c={};for(a=0;a!=s;++a){var u=t.read_shift(4),d=t.read_shift(4);i[a]=[u,d+r]}i.sort(function(E,S){return E[1]-S[1]});var f={};for(a=0;a!=s;++a){if(t.l!==i[a][1]){var h=!0;if(a>0&&e)switch(e[i[a-1][0]].t){case 2:t.l+2===i[a][1]&&(t.l+=2,h=!1);break;case 80:t.l<=i[a][1]&&(t.l=i[a][1],h=!1);break;case 4108:t.l<=i[a][1]&&(t.l=i[a][1],h=!1);break}if((!e||a==0)&&t.l<=i[a][1]&&(h=!1,t.l=i[a][1]),h)throw new Error("Read Error: Expected address "+i[a][1]+" at "+t.l+" :"+a)}if(e){var v=e[i[a][0]];if(f[v.n]=z0(t,v.t,{raw:!0}),v.p==="version"&&(f[v.n]=String(f[v.n]>>16)+"."+("0000"+String(f[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(f[v.n]){case 0:f[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Xs(o=f[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[v.n])}}else if(i[a][0]===1){if(o=f.CodePage=z0(t,vx),Xs(o),l!==-1){var p=t.l;t.l=i[l][1],c=w2(t,o),t.l=p}}else if(i[a][0]===0){if(o===0){l=a,t.l=i[a+1][1];continue}c=w2(t,o)}else{var g=c[i[a][0]],y;switch(t[t.l]){case 65:t.l+=4,y=GI(t);break;case 30:t.l+=4,y=tg(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,y=tg(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,y=t.read_shift(4,"i");break;case 19:t.l+=4,y=t.read_shift(4);break;case 5:t.l+=4,y=t.read_shift(8,"f");break;case 11:t.l+=4,y=Mr(t,4);break;case 64:t.l+=4,y=an(gx(t));break;default:throw new Error("unparsed value: "+t[t.l])}f[g]=y}}return t.l=r+n,f}function I2(t,e,r){var n=t.content;if(!n)return{};dn(n,0);var s,i,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==Kt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(a=n.read_shift(16),l=n.read_shift(4));var d=C2(n,e),f={SystemIdentifier:c};for(var h in d)f[h]=d[h];if(f.FMTID=i,s===1)return f;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var v;try{v=C2(n,null)}catch{}for(h in v)f[h]=v[h];return f.FMTID=[i,a],f}function yi(t,e){return t.read_shift(e),null}function hq(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function Mr(t,e){return t.read_shift(e)===1}function Wr(t){return t.read_shift(2,"u")}function WI(t,e){return hq(t,e,Wr)}function pq(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function Bd(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function mq(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),a=0,o,l={};s&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",u=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*a),n&&(t.l+=o),l.t=u,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function $o(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Ud(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):$o(t,n,r)}function tl(t,e,r){if(r.biff>5)return Ud(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function vq(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function gq(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Zn,"");return n&&(t.l+=24),s}function xq(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(i>>1,"utf16le").replace(Zn,"");return r+a}function yq(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return gq(t);case"0303000000000000c000000000000046":return xq(t);default:throw new Error("Unsupported Moniker "+r)}}function Af(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Zn,""):"";return r}function Eq(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,a,o,l,c="",u,d;s&16&&(i=Af(t,r-t.l)),s&128&&(a=Af(t,r-t.l)),(s&257)===257&&(o=Af(t,r-t.l)),(s&257)===1&&(l=yq(t,r-t.l)),s&8&&(c=Af(t,r-t.l)),s&32&&(u=t.read_shift(16)),s&64&&(d=gx(t)),t.l=r;var f=a||o||l||"";f&&c&&(f+="#"+c),f||(f="#"+c),s&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var h={Target:f};return u&&(h.guid=u),d&&(h.time=d),i&&(h.Tooltip=i),h}function zI(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function KI(t,e){var r=zI(t);return r[3]=0,r}function Ra(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function _q(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function bq(t,e,r){return e===0?"":tl(t,e,r)}function Sq(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function qI(t){var e=t.read_shift(2),r=mx(t);return[e,r]}function Tq(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=Bd(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function tp(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function XI(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var Aq=XI;function YI(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function wq(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function Cq(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Sn(t){t.l+=2,t.l+=t.read_shift(2)}var Iq={0:Sn,4:Sn,5:Sn,6:Sn,7:Cq,8:Sn,9:Sn,10:Sn,11:Sn,12:Sn,13:wq,14:Sn,15:Sn,16:Sn,17:Sn,18:Sn,19:Sn,20:Sn,21:YI};function kq(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(Iq[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function wf(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function Dq(t,e){return e===0||t.read_shift(2),1200}function Rq(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=tl(t,0,r);return t.read_shift(e+n-t.l),s}function Fq(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Pq(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var a=Bd(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:s,dt:i,name:a}}function Oq(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0;a!=s&&t.l<r;++a)i.push(mq(t));return i.Count=n,i.Unique=s,i}function Nq(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function Lq(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function Mq(t){var e=_q(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function Bq(t){return t.read_shift(2),t.read_shift(4)}function k2(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function Uq(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function Vq(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function $q(){}function Hq(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Bd(t,0,r),n}function jq(t){var e=Ra(t);return e.isst=t.read_shift(4),e}function Gq(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=Ra(t);r.biff==2&&t.l++;var i=Ud(t,n-t.l,r);return s.val=i,s}function Wq(t,e,r){var n=t.read_shift(2),s=tl(t,0,r);return[n,s]}var zq=tl;function D2(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),a=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:i,c:o},e:{r:a,c:l}}}function Kq(t){var e=t.read_shift(2),r=t.read_shift(2),n=qI(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function qq(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(qI(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:a,rkrec:i}}function Xq(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:a,ixfe:i}}function Yq(t,e,r,n){var s={},i=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=KK[o>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=a&15,s.dgRight=a>>4&15,s.dgTop=a>>8&15,s.dgBottom=a>>12&15,s.icvLeft=a>>16&127,s.icvRight=a>>23&127,s.grbitDiag=a>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function Qq(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=Yq(t,e,n.fStyle,r),n}function Jq(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function R2(t,e,r){var n=Ra(t);(r.biff==2||e==9)&&++t.l;var s=pq(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Zq(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ra(t),s=Fn(t);return n.val=s,n}var F2=bq;function eX(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var a=$o(t,i),o=[];n>t.l;)o.push(Ud(t));return[i,s,a,o]}function P2(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=Tq(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var tX=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function O2(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=$o(t,a,r);s&32&&(c=tX[c.charCodeAt(0)]);var u=n-t.l;r&&r.biff==2&&--u;var d=n==t.l||o===0||!(u>0)?[]:LJ(t,u,r,o);return{chKey:i,Name:c,itab:l,rgce:d}}function QI(t,e,r){if(r.biff<8)return rX(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(Sq(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function rX(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Bd(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function nX(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=$o(t,n,r),a=$o(t,s,r);return[i,a]}function sX(t,e,r){var n=XI(t);t.l++;var s=t.read_shift(1);return e-=8,[MJ(t,e,r),s,n]}function N2(t,e,r){var n=Aq(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,OJ(t,e,r)]}function aX(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function iX(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=tl(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,a,i]}}function oX(t,e,r){return iX(t,e,r)}function lX(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(tp(t));return r}function cX(t,e,r){if(r&&r.biff<8)return dX(t,e,r);var n=YI(t),s=kq(t,e-22,n[1]);return{cmo:n,ft:s}}var uX={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function dX(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((uX[n]||Un)(t,e,r)),{cmo:[s,n,i],ft:a}}function fX(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:a=vq(t,6,r);var o=t.read_shift(2);t.read_shift(2),Wr(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var u=t[t.l],d=$o(t,t.lens[c+1]-t.lens[c]-1);if(s+=d,s.length>=(u?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function hX(t,e){var r=tp(t);t.l+=16;var n=Eq(t,e-24);return[r,n]}function pX(t,e){t.read_shift(2);var r=tp(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Zn,""),[r,n]}function mX(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=T2[r]||r,r=t.read_shift(2),e[1]=T2[r]||r,e}function vX(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(KI(t));return r}function gX(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(KI(t));return r}function xX(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function JI(t,e,r){if(!r.cellStyles)return Un(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function yX(t,e){var r={};return e<32||(t.l+=16,r.header=Fn(t),r.footer=Fn(t),t.l+=2),r}function EX(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}var _X=Ra,bX=WI,SX=Ud;function TX(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function AX(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ra(t);++t.l;var s=tl(t,e-7,r);return n.t="str",n.val=s,n}function wX(t){var e=Ra(t);++t.l;var r=Fn(t);return e.t="n",e.val=r,e}function CX(t){var e=Ra(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function IX(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function kX(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function DX(t,e,r){var n=t.l+e,s=Ra(t),i=t.read_shift(2),a=$o(t,i,r);return t.l=n,s.t="str",s.val=a,s}var RX=[2,3,48,49,131,139,140,245],L2=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=ix({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],u=Zi(1);switch(l.type){case"base64":u=qs(Ss(o));break;case"binary":u=qs(o);break;case"buffer":case"array":u=o;break}dn(u,0);var d=u.read_shift(1),f=!!(d&136),h=!1,v=!1;switch(d){case 2:break;case 3:break;case 48:h=!0,f=!0;break;case 49:h=!0,f=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var p=0,g=521;d==2&&(p=u.read_shift(2)),u.l+=3,d!=2&&(p=u.read_shift(4)),p>1048576&&(p=1e6),d!=2&&(g=u.read_shift(2));var y=u.read_shift(2),E=l.codepage||1252;d!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(E=t[u[u.l]]),u.l+=1,u.l+=2),v&&(u.l+=36);for(var S=[],I={},R=Math.min(u.length,d==2?521:g-10-(h?264:0)),D=v?32:11;u.l<R&&u[u.l]!=13;)switch(I={},I.name=sd.utils.decode(E,u.slice(u.l,u.l+D)).replace(/[\u0000\r\n].*$/g,""),u.l+=D,I.type=String.fromCharCode(u.read_shift(1)),d!=2&&!v&&(I.offset=u.read_shift(4)),I.len=u.read_shift(1),d==2&&(I.offset=u.read_shift(2)),I.dec=u.read_shift(1),I.name.length&&S.push(I),d!=2&&(u.l+=v?13:14),I.type){case"B":(!h||I.len!=8)&&l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+I.type)}if(u[u.l]!==13&&(u.l=g-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=g;var C=0,_=0;for(c[0]=[],_=0;_!=S.length;++_)c[0][_]=S[_].name;for(;p-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,c[++C]=[],_=0,_=0;_!=S.length;++_){var b=u.slice(u.l,u.l+S[_].len);u.l+=S[_].len,dn(b,0);var x=sd.utils.decode(E,b);switch(S[_].type){case"C":x.trim().length&&(c[C][_]=x.replace(/\s+$/,""));break;case"D":x.length===8?c[C][_]=new Date(+x.slice(0,4),+x.slice(4,6)-1,+x.slice(6,8)):c[C][_]=x;break;case"F":c[C][_]=parseFloat(x.trim());break;case"+":case"I":c[C][_]=v?b.read_shift(-4,"i")^2147483648:b.read_shift(4,"i");break;case"L":switch(x.trim().toUpperCase()){case"Y":case"T":c[C][_]=!0;break;case"N":case"F":c[C][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+x+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[C][_]="##MEMO##"+(v?parseInt(x.trim(),10):b.read_shift(4));break;case"N":x=x.replace(/\u0000/g,"").trim(),x&&x!="."&&(c[C][_]=+x||0);break;case"@":c[C][_]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":c[C][_]=new Date((b.read_shift(4)-2440588)*864e5+b.read_shift(4));break;case"Y":c[C][_]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[C][_]=-b.read_shift(-8,"f");break;case"B":if(h&&S[_].len==8){c[C][_]=b.read_shift(8,"f");break}case"G":case"P":b.l+=S[_].len;break;case"0":if(S[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+S[_].type)}}}if(d!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=S,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=bc(r(o,c),c);return u["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,u}function s(o,l){try{return so(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&Xs(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Jv(),d=og(o,{header:1,raw:!0,cellDates:!0}),f=d[0],h=d.slice(1),v=o["!cols"]||[],p=0,g=0,y=0,E=1;for(p=0;p<f.length;++p){if(((v[p]||{}).DBF||{}).name){f[p]=v[p].DBF.name,++y;continue}if(f[p]!=null){if(++y,typeof f[p]=="number"&&(f[p]=f[p].toString(10)),typeof f[p]!="string")throw new Error("DBF Invalid column name "+f[p]+" |"+typeof f[p]+"|");if(f.indexOf(f[p])!==p){for(g=0;g<1024;++g)if(f.indexOf(f[p]+"_"+g)==-1){f[p]+="_"+g;break}}}}var S=Nr(o["!ref"]),I=[],R=[],D=[];for(p=0;p<=S.e.c-S.s.c;++p){var C="",_="",b=0,x=[];for(g=0;g<h.length;++g)h[g][p]!=null&&x.push(h[g][p]);if(x.length==0||f[p]==null){I[p]="?";continue}for(g=0;g<x.length;++g){switch(typeof x[g]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=x[g]instanceof Date?"D":"C";break;default:_="C"}b=Math.max(b,String(x[g]).length),C=C&&C!=_?"C":_}b>250&&(b=250),_=((v[p]||{}).DBF||{}).type,_=="C"&&v[p].DBF.len>b&&(b=v[p].DBF.len),C=="B"&&_=="N"&&(C="N",D[p]=v[p].DBF.dec,b=v[p].DBF.len),R[p]=C=="C"||_=="N"?b:i[C]||0,E+=R[p],I[p]=C}var w=u.next(32);for(w.write_shift(4,318902576),w.write_shift(4,h.length),w.write_shift(2,296+32*y),w.write_shift(2,E),p=0;p<4;++p)w.write_shift(4,0);for(w.write_shift(4,0|(+e[QC]||3)<<8),p=0,g=0;p<f.length;++p)if(f[p]!=null){var A=u.next(32),k=(f[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);A.write_shift(1,k,"sbcs"),A.write_shift(1,I[p]=="?"?"C":I[p],"sbcs"),A.write_shift(4,g),A.write_shift(1,R[p]||i[I[p]]||0),A.write_shift(1,D[p]||0),A.write_shift(1,2),A.write_shift(4,0),A.write_shift(1,0),A.write_shift(4,0),A.write_shift(4,0),g+=R[p]||i[I[p]]||0}var L=u.next(264);for(L.write_shift(4,13),p=0;p<65;++p)L.write_shift(4,0);for(p=0;p<h.length;++p){var G=u.next(E);for(G.write_shift(1,0),g=0;g<f.length;++g)if(f[g]!=null)switch(I[g]){case"L":G.write_shift(1,h[p][g]==null?63:h[p][g]?84:70);break;case"B":G.write_shift(8,h[p][g]||0,"f");break;case"N":var P="0";for(typeof h[p][g]=="number"&&(P=h[p][g].toFixed(D[g]||0)),y=0;y<R[g]-P.length;++y)G.write_shift(1,32);G.write_shift(1,P,"sbcs");break;case"D":h[p][g]?(G.write_shift(4,("0000"+h[p][g].getFullYear()).slice(-4),"sbcs"),G.write_shift(2,("00"+(h[p][g].getMonth()+1)).slice(-2),"sbcs"),G.write_shift(2,("00"+h[p][g].getDate()).slice(-2),"sbcs")):G.write_shift(8,"00000000","sbcs");break;case"C":var M=String(h[p][g]!=null?h[p][g]:"").slice(0,R[g]);for(G.write_shift(1,M,"sbcs"),y=0;y<R[g]-M.length;++y)G.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}}(),FX=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ta(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,h){var v=t[h];return typeof v=="number"?J_(v):v},n=function(f,h,v){var p=h.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return p==59?f:J_(p)};t["|"]=254;function s(f,h){switch(h.type){case"base64":return i(Ss(f),h);case"binary":return i(f,h);case"buffer":return i(jt&&Buffer.isBuffer(f)?f.toString("binary"):Qo(f),h);case"array":return i(Vo(f),h)}throw new Error("Unrecognized type "+h.type)}function i(f,h){var v=f.split(/[\n\r]+/),p=-1,g=-1,y=0,E=0,S=[],I=[],R=null,D={},C=[],_=[],b=[],x=0,w;for(+h.codepage>=0&&Xs(+h.codepage);y!==v.length;++y){x=0;var A=v[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),k=A.replace(/;;/g,"\0").split(";").map(function(se){return se.replace(/\u0000/g,";")}),L=k[0],G;if(A.length>0)switch(L){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":k[1].charAt(0)=="P"&&I.push(A.slice(3).replace(/;;/g,";"));break;case"C":var P=!1,M=!1,H=!1,B=!1,Q=-1,j=-1;for(E=1;E<k.length;++E)switch(k[E].charAt(0)){case"A":break;case"X":g=parseInt(k[E].slice(1))-1,M=!0;break;case"Y":for(p=parseInt(k[E].slice(1))-1,M||(g=0),w=S.length;w<=p;++w)S[w]=[];break;case"K":G=k[E].slice(1),G.charAt(0)==='"'?G=G.slice(1,G.length-1):G==="TRUE"?G=!0:G==="FALSE"?G=!1:isNaN(Zs(G))?isNaN(lc(G).getDate())||(G=an(G)):(G=Zs(G),R!==null&&Ec(R)&&(G=ep(G))),P=!0;break;case"E":B=!0;var O=Wl(k[E].slice(1),{r:p,c:g});S[p][g]=[S[p][g],O];break;case"S":H=!0,S[p][g]=[S[p][g],"S5S"];break;case"G":break;case"R":Q=parseInt(k[E].slice(1))-1;break;case"C":j=parseInt(k[E].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}if(P&&(S[p][g]&&S[p][g].length==2?S[p][g][0]=G:S[p][g]=G,R=null),H){if(B)throw new Error("SYLK shared formula cannot have own formula");var W=Q>-1&&S[Q][j];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");S[p][g][1]=l4(W[1],{r:p-Q,c:g-j})}break;case"F":var K=0;for(E=1;E<k.length;++E)switch(k[E].charAt(0)){case"X":g=parseInt(k[E].slice(1))-1,++K;break;case"Y":for(p=parseInt(k[E].slice(1))-1,w=S.length;w<=p;++w)S[w]=[];break;case"M":x=parseInt(k[E].slice(1))/20;break;case"F":break;case"G":break;case"P":R=I[parseInt(k[E].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(b=k[E].slice(1).split(" "),w=parseInt(b[0],10);w<=parseInt(b[1],10);++w)x=parseInt(b[2],10),_[w-1]=x===0?{hidden:!0}:{wch:x},cc(_[w-1]);break;case"C":g=parseInt(k[E].slice(1))-1,_[g]||(_[g]={});break;case"R":p=parseInt(k[E].slice(1))-1,C[p]||(C[p]={}),x>0?(C[p].hpt=x,C[p].hpx=ud(x)):x===0&&(C[p].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}K<1&&(R=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}}return C.length>0&&(D["!rows"]=C),_.length>0&&(D["!cols"]=_),h&&h.sheetRows&&(S=S.slice(0,h.sheetRows)),[S,D]}function a(f,h){var v=s(f,h),p=v[0],g=v[1],y=bc(p,h);return Ta(g).forEach(function(E){y[E]=g[E]}),y}function o(f,h){return so(a(f,h),h)}function l(f,h,v,p){var g="C;Y"+(v+1)+";X"+(p+1)+";K";switch(f.t){case"n":g+=f.v||0,f.f&&!f.F&&(g+=";E"+xQ(f.f,{r:v,c:p}));break;case"b":g+=f.v?"TRUE":"FALSE";break;case"e":g+=f.w||f.v;break;case"d":g+='"'+(f.w||f.v)+'"';break;case"s":g+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function c(f,h){h.forEach(function(v,p){var g="F;W"+(p+1)+" "+(p+1)+" ";v.hidden?g+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=q0(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=X0(v.wpx)),typeof v.wch=="number"&&(g+=Math.round(v.wch))),g.charAt(g.length-1)!=" "&&f.push(g)})}function u(f,h){h.forEach(function(v,p){var g="F;";v.hidden?g+="M0;":v.hpt?g+="M"+20*v.hpt+";":v.hpx&&(g+="M"+20*a4(v.hpx)+";"),g.length>2&&f.push(g+"R"+(p+1))})}function d(f,h){var v=["ID;PWXL;N;E"],p=[],g=Nr(f["!ref"]),y,E=Array.isArray(f),S=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),f["!cols"]&&c(v,f["!cols"]),f["!rows"]&&u(v,f["!rows"]),v.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var I=g.s.r;I<=g.e.r;++I)for(var R=g.s.c;R<=g.e.c;++R){var D=Dt({r:I,c:R});y=E?(f[I]||[])[R]:f[D],!(!y||y.v==null&&(!y.f||y.F))&&p.push(l(y,f,I,R))}return v.join(S)+S+p.join(S)+S+"E"+S}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),PX=function(){function t(i,a){switch(a.type){case"base64":return e(Ss(i),a);case"binary":return e(i,a);case"buffer":return e(jt&&Buffer.isBuffer(i)?i.toString("binary"):Qo(i),a);case"array":return e(Vo(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,u=0,d=[];u!==o.length;++u){if(o[u].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var f=o[u].trim().split(","),h=f[0],v=f[1];++u;for(var p=o[u]||"";(p.match(/["]/g)||[]).length&1&&u<o.length-1;)p+=`
`+o[++u];switch(p=p.trim(),+h){case-1:if(p==="BOT"){d[++l]=[],c=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?d[l][c]=!0:p==="FALSE"?d[l][c]=!1:isNaN(Zs(v))?isNaN(lc(v).getDate())?d[l][c]=v:d[l][c]=an(v):d[l][c]=Zs(v),++c;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),d[l][c++]=p!==""?p:null;break}if(p==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function r(i,a){return bc(t(i,a),a)}function n(i,a){return so(r(i,a),a)}var s=function(){var i=function(l,c,u,d,f){l.push(c),l.push(u+","+d),l.push('"'+f.replace(/"/g,'""')+'"')},a=function(l,c,u,d){l.push(c+","+u),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],u=Nr(l["!ref"]),d,f=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,u.e.r-u.s.r+1,""),i(c,"TUPLES",0,u.e.c-u.s.c+1,""),i(c,"DATA",0,0,"");for(var h=u.s.r;h<=u.e.r;++h){a(c,-1,0,"BOT");for(var v=u.s.c;v<=u.e.c;++v){var p=Dt({r:h,c:v});if(d=f?(l[h]||[])[v]:l[p],!d){a(c,1,0,"");continue}switch(d.t){case"n":var g=d.w;!g&&d.v!=null&&(g=d.v),g==null?d.f&&!d.F?a(c,1,0,"="+d.f):a(c,1,0,""):a(c,0,g,"V");break;case"b":a(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Ps(d.z||Ot[14],es(an(d.v)))),a(c,0,d.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var y=`\r
`,E=c.join(y);return E}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),OX=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,f){for(var h=d.split(`
`),v=-1,p=-1,g=0,y=[];g!==h.length;++g){var E=h[g].trim().split(":");if(E[0]==="cell"){var S=Yn(E[1]);if(y.length<=S.r)for(v=y.length;v<=S.r;++v)y[v]||(y[v]=[]);switch(v=S.r,p=S.c,E[2]){case"t":y[v][p]=t(E[3]);break;case"v":y[v][p]=+E[3];break;case"vtf":var I=E[E.length-1];case"vtc":switch(E[3]){case"nl":y[v][p]=!!+E[4];break;default:y[v][p]=+E[4];break}E[2]=="vtf"&&(y[v][p]=[y[v][p],I])}}}return f&&f.sheetRows&&(y=y.slice(0,f.sheetRows)),y}function n(d,f){return bc(r(d,f),f)}function s(d,f){return so(n(d,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var f=[],h=[],v,p="",g=_c(d["!ref"]),y=Array.isArray(d),E=g.s.r;E<=g.e.r;++E)for(var S=g.s.c;S<=g.e.c;++S)if(p=Dt({r:E,c:S}),v=y?(d[E]||[])[S]:d[p],!(!v||v.v==null||v.t==="z")){switch(h=["cell",p,"t"],v.t){case"s":case"str":h.push(e(v.v));break;case"n":v.f?(h[2]="vtf",h[3]="n",h[4]=v.v,h[5]=e(v.f)):(h[2]="v",h[3]=v.v);break;case"b":h[2]="vt"+(v.f?"f":"c"),h[3]="nl",h[4]=v.v?"1":"0",h[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var I=es(an(v.v));h[2]="vtc",h[3]="nd",h[4]=""+I,h[5]=v.w||Ps(v.z||Ot[14],I);break;case"e":continue}f.push(h.join(":"))}return f.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(d){return[i,a,o,a,c(d),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),ld=function(){function t(u,d,f,h,v){v.raw?d[f][h]=u:u===""||(u==="TRUE"?d[f][h]=!0:u==="FALSE"?d[f][h]=!1:isNaN(Zs(u))?isNaN(lc(u).getDate())?d[f][h]=u:d[f][h]=an(u):d[f][h]=Zs(u))}function e(u,d){var f=d||{},h=[];if(!u||u.length===0)return h;for(var v=u.split(/[\r\n]/),p=v.length-1;p>=0&&v[p].length===0;)--p;for(var g=10,y=0,E=0;E<=p;++E)y=v[E].indexOf(" "),y==-1?y=v[E].length:y++,g=Math.max(g,y);for(E=0;E<=p;++E){h[E]=[];var S=0;for(t(v[E].slice(0,g).trim(),h,E,S,f),S=1;S<=(v[E].length-g)/10+1;++S)t(v[E].slice(g+(S-1)*10,g+S*10).trim(),h,E,S,f)}return f.sheetRows&&(h=h.slice(0,f.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var d={},f=!1,h=0,v=0;h<u.length;++h)(v=u.charCodeAt(h))==34?f=!f:!f&&v in r&&(d[v]=(d[v]||0)+1);v=[];for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&v.push([d[h],h]);if(!v.length){d=n;for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&v.push([d[h],h])}return v.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[v.pop()[1]]||44}function i(u,d){var f=d||{},h="",v=f.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(h=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(h=u.charAt(4),u=u.slice(6)):h=s(u.slice(0,1024)):f&&f.FS?h=f.FS:h=s(u.slice(0,1024));var g=0,y=0,E=0,S=0,I=0,R=h.charCodeAt(0),D=!1,C=0,_=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var b=f.dateNF!=null?Wz(f.dateNF):null;function x(){var w=u.slice(S,I),A={};if(w.charAt(0)=='"'&&w.charAt(w.length-1)=='"'&&(w=w.slice(1,-1).replace(/""/g,'"')),w.length===0)A.t="z";else if(f.raw)A.t="s",A.v=w;else if(w.trim().length===0)A.t="s",A.v=w;else if(w.charCodeAt(0)==61)w.charCodeAt(1)==34&&w.charCodeAt(w.length-1)==34?(A.t="s",A.v=w.slice(2,-1).replace(/""/g,'"')):EQ(w)?(A.t="n",A.f=w.slice(1)):(A.t="s",A.v=w);else if(w=="TRUE")A.t="b",A.v=!0;else if(w=="FALSE")A.t="b",A.v=!1;else if(!isNaN(E=Zs(w)))A.t="n",f.cellText!==!1&&(A.w=w),A.v=E;else if(!isNaN(lc(w).getDate())||b&&w.match(b)){A.z=f.dateNF||Ot[14];var k=0;b&&w.match(b)&&(w=zz(w,f.dateNF,w.match(b)||[]),k=1),f.cellDates?(A.t="d",A.v=an(w,k)):(A.t="n",A.v=es(an(w,k))),f.cellText!==!1&&(A.w=Ps(A.z,A.v instanceof Date?es(A.v):A.v)),f.cellNF||delete A.z}else A.t="s",A.v=w;if(A.t=="z"||(f.dense?(v[g]||(v[g]=[]),v[g][y]=A):v[Dt({c:y,r:g})]=A),S=I+1,_=u.charCodeAt(S),p.e.c<y&&(p.e.c=y),p.e.r<g&&(p.e.r=g),C==R)++y;else if(y=0,++g,f.sheetRows&&f.sheetRows<=g)return!0}e:for(;I<u.length;++I)switch(C=u.charCodeAt(I)){case 34:_===34&&(D=!D);break;case R:case 10:case 13:if(!D&&x())break e;break}return I-S>0&&x(),v["!ref"]=qt(p),v}function a(u,d){return!(d&&d.PRN)||d.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,d):bc(e(u,d),d)}function o(u,d){var f="",h=d.type=="string"?[0,0,0,0]:Ax(u,d);switch(d.type){case"base64":f=Ss(u);break;case"binary":f=u;break;case"buffer":d.codepage==65001?f=u.toString("utf8"):d.codepage&&typeof sd<"u"||(f=jt&&Buffer.isBuffer(u)?u.toString("binary"):Qo(u));break;case"array":f=Vo(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+d.type)}return h[0]==239&&h[1]==187&&h[2]==191?f=pr(f.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?f=pr(f):d.type=="binary"&&typeof sd<"u",f.slice(0,19)=="socialcalc:version:"?OX.to_sheet(d.type=="string"?f:pr(f),d):a(f,d)}function l(u,d){return so(o(u,d),d)}function c(u){for(var d=[],f=Nr(u["!ref"]),h,v=Array.isArray(u),p=f.s.r;p<=f.e.r;++p){for(var g=[],y=f.s.c;y<=f.e.c;++y){var E=Dt({r:p,c:y});if(h=v?(u[p]||[])[y]:u[E],!h||h.v==null){g.push("          ");continue}for(var S=(h.w||(ii(h),h.w)||"").slice(0,10);S.length<10;)S+=" ";g.push(S+(y===0?" ":""))}d.push(g.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function NX(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=FX.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return ld.to_workbook(t,e)}}var Iu=function(){function t(O,W,K){if(O){dn(O,O.l||0);for(var se=K.Enum||Q;O.l<O.length;){var ve=O.read_shift(2),ie=se[ve]||se[65535],de=O.read_shift(2),ee=O.l+de,Y=ie.f&&ie.f(O,de,K);if(O.l=ee,W(Y,ie,ve))return}}}function e(O,W){switch(W.type){case"base64":return r(qs(Ss(O)),W);case"binary":return r(qs(O),W);case"buffer":case"array":return r(O,W)}throw"Unsupported type "+W.type}function r(O,W){if(!O)return O;var K=W||{},se=K.dense?[]:{},ve="Sheet1",ie="",de=0,ee={},Y=[],ge=[],q={s:{r:0,c:0},e:{r:0,c:0}},z=K.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)K.Enum=Q,t(O,function(X,te,Se){switch(Se){case 0:K.vers=X,X>=4096&&(K.qpro=!0);break;case 6:q=X;break;case 204:X&&(ie=X);break;case 222:ie=X;break;case 15:case 51:K.qpro||(X[1].v=X[1].v.slice(1));case 13:case 14:case 16:Se==14&&(X[2]&112)==112&&(X[2]&15)>1&&(X[2]&15)<15&&(X[1].z=K.dateNF||Ot[14],K.cellDates&&(X[1].t="d",X[1].v=ep(X[1].v))),K.qpro&&X[3]>de&&(se["!ref"]=qt(q),ee[ve]=se,Y.push(ve),se=K.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},de=X[3],ve=ie||"Sheet"+(de+1),ie="");var Ee=K.dense?(se[X[0].r]||[])[X[0].c]:se[Dt(X[0])];if(Ee){Ee.t=X[1].t,Ee.v=X[1].v,X[1].z!=null&&(Ee.z=X[1].z),X[1].f!=null&&(Ee.f=X[1].f);break}K.dense?(se[X[0].r]||(se[X[0].r]=[]),se[X[0].r][X[0].c]=X[1]):se[Dt(X[0])]=X[1];break}},K);else if(O[2]==26||O[2]==14)K.Enum=j,O[2]==14&&(K.qpro=!0,O.l=0),t(O,function(X,te,Se){switch(Se){case 204:ve=X;break;case 22:X[1].v=X[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(X[3]>de&&(se["!ref"]=qt(q),ee[ve]=se,Y.push(ve),se=K.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},de=X[3],ve="Sheet"+(de+1)),z>0&&X[0].r>=z)break;K.dense?(se[X[0].r]||(se[X[0].r]=[]),se[X[0].r][X[0].c]=X[1]):se[Dt(X[0])]=X[1],q.e.c<X[0].c&&(q.e.c=X[0].c),q.e.r<X[0].r&&(q.e.r=X[0].r);break;case 27:X[14e3]&&(ge[X[14e3][0]]=X[14e3][1]);break;case 1537:ge[X[0]]=X[1],X[0]==de&&(ve=X[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(se["!ref"]=qt(q),ee[ie||ve]=se,Y.push(ie||ve),!ge.length)return{SheetNames:Y,Sheets:ee};for(var J={},he=[],re=0;re<ge.length;++re)ee[Y[re]]?(he.push(ge[re]||Y[re]),J[ge[re]]=ee[ge[re]]||ee[Y[re]]):(he.push(ge[re]),J[ge[re]]={"!ref":"A1"});return{SheetNames:he,Sheets:J}}function n(O,W){var K=W||{};if(+K.codepage>=0&&Xs(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var se=Jv(),ve=Nr(O["!ref"]),ie=Array.isArray(O),de=[];$s(se,0,i(1030)),$s(se,6,l(ve));for(var ee=Math.min(ve.e.r,8191),Y=ve.s.r;Y<=ee;++Y)for(var ge=gn(Y),q=ve.s.c;q<=ve.e.c;++q){Y===ve.s.r&&(de[q]=Zr(q));var z=de[q]+ge,J=ie?(O[Y]||[])[q]:O[z];if(!(!J||J.t=="z"))if(J.t=="n")(J.v|0)==J.v&&J.v>=-32768&&J.v<=32767?$s(se,13,h(Y,q,J.v)):$s(se,14,p(Y,q,J.v));else{var he=ii(J);$s(se,15,d(Y,q,he.slice(0,239)))}}return $s(se,1),se.end()}function s(O,W){var K=W||{};if(+K.codepage>=0&&Xs(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var se=Jv();$s(se,0,a(O));for(var ve=0,ie=0;ve<O.SheetNames.length;++ve)(O.Sheets[O.SheetNames[ve]]||{})["!ref"]&&$s(se,27,B(O.SheetNames[ve],ie++));var de=0;for(ve=0;ve<O.SheetNames.length;++ve){var ee=O.Sheets[O.SheetNames[ve]];if(!(!ee||!ee["!ref"])){for(var Y=Nr(ee["!ref"]),ge=Array.isArray(ee),q=[],z=Math.min(Y.e.r,8191),J=Y.s.r;J<=z;++J)for(var he=gn(J),re=Y.s.c;re<=Y.e.c;++re){J===Y.s.r&&(q[re]=Zr(re));var X=q[re]+he,te=ge?(ee[J]||[])[re]:ee[X];if(!(!te||te.t=="z"))if(te.t=="n")$s(se,23,x(J,re,de,te.v));else{var Se=ii(te);$s(se,22,C(J,re,de,Se.slice(0,239)))}}++de}}return $s(se,1),se.end()}function i(O){var W=Yr(2);return W.write_shift(2,O),W}function a(O){var W=Yr(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var K=0,se=0,ve=0,ie=0;ie<O.SheetNames.length;++ie){var de=O.SheetNames[ie],ee=O.Sheets[de];if(!(!ee||!ee["!ref"])){++ve;var Y=_c(ee["!ref"]);K<Y.e.r&&(K=Y.e.r),se<Y.e.c&&(se=Y.e.c)}}return K>8191&&(K=8191),W.write_shift(2,K),W.write_shift(1,ve),W.write_shift(1,se),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(O,W,K){var se={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&K.qpro?(se.s.c=O.read_shift(1),O.l++,se.s.r=O.read_shift(2),se.e.c=O.read_shift(1),O.l++,se.e.r=O.read_shift(2),se):(se.s.c=O.read_shift(2),se.s.r=O.read_shift(2),W==12&&K.qpro&&(O.l+=2),se.e.c=O.read_shift(2),se.e.r=O.read_shift(2),W==12&&K.qpro&&(O.l+=2),se.s.c==65535&&(se.s.c=se.e.c=se.s.r=se.e.r=0),se)}function l(O){var W=Yr(8);return W.write_shift(2,O.s.c),W.write_shift(2,O.s.r),W.write_shift(2,O.e.c),W.write_shift(2,O.e.r),W}function c(O,W,K){var se=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(se[0].c=O.read_shift(1),se[3]=O.read_shift(1),se[0].r=O.read_shift(2),O.l+=2):(se[2]=O.read_shift(1),se[0].c=O.read_shift(2),se[0].r=O.read_shift(2)),se}function u(O,W,K){var se=O.l+W,ve=c(O,W,K);if(ve[1].t="s",K.vers==20768){O.l++;var ie=O.read_shift(1);return ve[1].v=O.read_shift(ie,"utf8"),ve}return K.qpro&&O.l++,ve[1].v=O.read_shift(se-O.l,"cstr"),ve}function d(O,W,K){var se=Yr(7+K.length);se.write_shift(1,255),se.write_shift(2,W),se.write_shift(2,O),se.write_shift(1,39);for(var ve=0;ve<se.length;++ve){var ie=K.charCodeAt(ve);se.write_shift(1,ie>=128?95:ie)}return se.write_shift(1,0),se}function f(O,W,K){var se=c(O,W,K);return se[1].v=O.read_shift(2,"i"),se}function h(O,W,K){var se=Yr(7);return se.write_shift(1,255),se.write_shift(2,W),se.write_shift(2,O),se.write_shift(2,K,"i"),se}function v(O,W,K){var se=c(O,W,K);return se[1].v=O.read_shift(8,"f"),se}function p(O,W,K){var se=Yr(13);return se.write_shift(1,255),se.write_shift(2,W),se.write_shift(2,O),se.write_shift(8,K,"f"),se}function g(O,W,K){var se=O.l+W,ve=c(O,W,K);if(ve[1].v=O.read_shift(8,"f"),K.qpro)O.l=se;else{var ie=O.read_shift(2);I(O.slice(O.l,O.l+ie),ve),O.l+=ie}return ve}function y(O,W,K){var se=W&32768;return W&=-32769,W=(se?O:0)+(W>=8192?W-16384:W),(se?"":"$")+(K?Zr(W):gn(W))}var E={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},S=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function I(O,W){dn(O,0);for(var K=[],se=0,ve="",ie="",de="",ee="";O.l<O.length;){var Y=O[O.l++];switch(Y){case 0:K.push(O.read_shift(8,"f"));break;case 1:ie=y(W[0].c,O.read_shift(2),!0),ve=y(W[0].r,O.read_shift(2),!1),K.push(ie+ve);break;case 2:{var ge=y(W[0].c,O.read_shift(2),!0),q=y(W[0].r,O.read_shift(2),!1);ie=y(W[0].c,O.read_shift(2),!0),ve=y(W[0].r,O.read_shift(2),!1),K.push(ge+q+":"+ie+ve)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(O.read_shift(2));break;case 6:{for(var z="";Y=O[O.l++];)z+=String.fromCharCode(Y);K.push('"'+z.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:ee=K.pop(),de=K.pop(),K.push(["AND","OR"][Y-20]+"("+de+","+ee+")");break;default:if(Y<32&&S[Y])ee=K.pop(),de=K.pop(),K.push(de+S[Y]+ee);else if(E[Y]){if(se=E[Y][1],se==69&&(se=O[O.l++]),se>K.length){console.error("WK1 bad formula parse 0x"+Y.toString(16)+":|"+K.join("|")+"|");return}var J=K.slice(-se);K.length-=se,K.push(E[Y][0]+"("+J.join(",")+")")}else return Y<=7?console.error("WK1 invalid opcode "+Y.toString(16)):Y<=24?console.error("WK1 unsupported op "+Y.toString(16)):Y<=30?console.error("WK1 invalid opcode "+Y.toString(16)):Y<=115?console.error("WK1 unsupported function opcode "+Y.toString(16)):console.error("WK1 unrecognized opcode "+Y.toString(16))}}K.length==1?W[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function R(O){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=O.read_shift(2),W[3]=O[O.l++],W[0].c=O[O.l++],W}function D(O,W){var K=R(O);return K[1].t="s",K[1].v=O.read_shift(W-4,"cstr"),K}function C(O,W,K,se){var ve=Yr(6+se.length);ve.write_shift(2,O),ve.write_shift(1,K),ve.write_shift(1,W),ve.write_shift(1,39);for(var ie=0;ie<se.length;++ie){var de=se.charCodeAt(ie);ve.write_shift(1,de>=128?95:de)}return ve.write_shift(1,0),ve}function _(O,W){var K=R(O);K[1].v=O.read_shift(2);var se=K[1].v>>1;if(K[1].v&1)switch(se&7){case 0:se=(se>>3)*5e3;break;case 1:se=(se>>3)*500;break;case 2:se=(se>>3)/20;break;case 3:se=(se>>3)/200;break;case 4:se=(se>>3)/2e3;break;case 5:se=(se>>3)/2e4;break;case 6:se=(se>>3)/16;break;case 7:se=(se>>3)/64;break}return K[1].v=se,K}function b(O,W){var K=R(O),se=O.read_shift(4),ve=O.read_shift(4),ie=O.read_shift(2);if(ie==65535)return se===0&&ve===3221225472?(K[1].t="e",K[1].v=15):se===0&&ve===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var de=ie&32768;return ie=(ie&32767)-16446,K[1].v=(1-de*2)*(ve*Math.pow(2,ie+32)+se*Math.pow(2,ie)),K}function x(O,W,K,se){var ve=Yr(14);if(ve.write_shift(2,O),ve.write_shift(1,K),ve.write_shift(1,W),se==0)return ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(2,65535),ve;var ie=0,de=0,ee=0,Y=0;return se<0&&(ie=1,se=-se),de=Math.log2(se)|0,se/=Math.pow(2,de-31),Y=se>>>0,Y&2147483648||(se/=2,++de,Y=se>>>0),se-=Y,Y|=2147483648,Y>>>=0,se*=Math.pow(2,32),ee=se>>>0,ve.write_shift(4,ee),ve.write_shift(4,Y),de+=16383+(ie?32768:0),ve.write_shift(2,de),ve}function w(O,W){var K=b(O);return O.l+=W-14,K}function A(O,W){var K=R(O),se=O.read_shift(4);return K[1].v=se>>6,K}function k(O,W){var K=R(O),se=O.read_shift(8,"f");return K[1].v=se,K}function L(O,W){var K=k(O);return O.l+=W-10,K}function G(O,W){return O[O.l+W-1]==0?O.read_shift(W,"cstr"):""}function P(O,W){var K=O[O.l++];K>W-1&&(K=W-1);for(var se="";se.length<K;)se+=String.fromCharCode(O[O.l++]);return se}function M(O,W,K){if(!(!K.qpro||W<21)){var se=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var ve=O.read_shift(W-21,"cstr");return[se,ve]}}function H(O,W){for(var K={},se=O.l+W;O.l<se;){var ve=O.read_shift(2);if(ve==14e3){for(K[ve]=[0,""],K[ve][0]=O.read_shift(2);O[O.l];)K[ve][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return K}function B(O,W){var K=Yr(5+O.length);K.write_shift(2,14e3),K.write_shift(2,W);for(var se=0;se<O.length;++se){var ve=O.charCodeAt(se);K[K.l++]=ve>127?95:ve}return K[K.l++]=0,K}var Q={0:{n:"BOF",f:Wr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:G},222:{n:"SHEETNAMELP",f:P},65535:{n:""}},j={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:b},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:w},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:A},38:{n:"??"},39:{n:"NUMBER27",f:k},40:{n:"FORMULA28",f:L},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:G},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:M},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function LX(t){var e={},r=t.match(Vn),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=_t(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=tx[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var MX=function(){var t=id("t"),e=id("rPr");function r(i){var a=i.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:Xt(a[1])},l=i.match(e);return l&&(o.s=LX(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),BX=function(){var e=/(\r\n|\n)/g;function r(s,i,a){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),a.push("</b>")),s.i&&(i.push("<i>"),a.push("</i>")),s.strike&&(i.push("<s>"),a.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),UX=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,VX=/<(?:\w+:)?r>/,$X=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function xx(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Xt(pr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=pr(t),r&&(n.h=lx(n.t))):t.match(VX)&&(n.r=pr(t),n.t=Xt(pr((t.replace($X,"").match(UX)||[]).join("").replace(Vn,""))),r&&(n.h=BX(MX(n.r)))),n):{t:""}}var HX=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,jX=/<(?:\w+:)?(?:si|sstItem)>/g,GX=/<\/(?:\w+:)?(?:si|sstItem)>/;function WX(t,e){var r=[],n="";if(!t)return r;var s=t.match(HX);if(s){n=s[2].replace(jX,"").split(GX);for(var i=0;i!=n.length;++i){var a=xx(n[i].trim(),e);a!=null&&(r[r.length]=a)}s=_t(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function zX(t){return[t.read_shift(4),t.read_shift(4)]}function KX(t,e){var r=[],n=!1;return ci(t,function(i,a,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function ZI(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function qa(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function qX(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=qa(t,4),e.U=qa(t,4),e.W=qa(t,4),e}function XX(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function YX(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(XX(t));return e}function QX(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function JX(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=qa(t,4),e.U=qa(t,4),e.W=qa(t,4),e}function ZX(t){var e=JX(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function e4(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function t4(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function eY(t){var e=qa(t);switch(e.Minor){case 2:return[e.Minor,tY(t)];case 3:return[e.Minor,rY()];case 4:return[e.Minor,nY(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function tY(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=e4(t,r),s=t4(t,t.length-t.l);return{t:"Std",h:n,v:s}}function rY(){throw new Error("File is password-protected: ECMA-376 Extensible")}function nY(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Vn,function(i){var a=_t(i);switch(Da(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function sY(t,e){var r={},n=r.EncryptionVersionInfo=qa(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=e4(t,s),e-=s,r.EncryptionVerifier=t4(t,e),r}function aY(t){var e={},r=e.EncryptionVersionInfo=qa(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function iY(t){var e=0,r,n=ZI(t),s=n.length+1,i,a,o,l,c;for(r=Zi(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var r4=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},s=function(a,o){return n(a^o)},i=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],d=0;d!=7;++d)u&64&&(o^=r[l]),u*=2,--l;return o};return function(a){for(var o=ZI(a),l=i(o),c=o.length,u=Zi(16),d=0;d!=16;++d)u[d]=0;var f,h,v;for((c&1)===1&&(f=l>>8,u[c]=s(t[0],f),--c,f=l&255,h=o[o.length-1],u[c]=s(h,f));c>0;)--c,f=l>>8,u[c]=s(o[c],f),--c,f=l&255,u[c]=s(o[c],f);for(c=15,v=15-o.length;v>0;)f=l>>8,u[c]=s(t[v],f),--c,--v,f=l&255,u[c]=s(o[c],f),--c,--v;return u}}(),oY=function(t,e,r,n,s){s||(s=e),n||(n=r4(t));var i,a;for(i=0;i!=e.length;++i)a=e[i],a^=n[r],a=(a>>5|a<<3)&255,s[i]=a,++r;return[s,r,n]},lY=function(t){var e=0,r=r4(t);return function(n){var s=oY("",n,e,r);return e=s[1],s[0]}};function cY(t,e,r,n){var s={key:Wr(t),verificationBytes:Wr(t)};return r.password&&(s.verifier=iY(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=lY(r.password)),s}function uY(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=aY(t):n.Data=sY(t,e),n}function dY(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?uY(t,e-2,n):cY(t,r.biff>=8?e:e-2,r,n),n}var fY=function(){function t(s,i){switch(i.type){case"base64":return e(Ss(s),i);case"binary":return e(s,i);case"buffer":return e(jt&&Buffer.isBuffer(s)?s.toString("binary"):Qo(s),i);case"array":return e(Vo(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,d){Array.isArray(o)&&(o[d]=[]);for(var f=/\\\w+\b/g,h=0,v,p=-1;v=f.exec(u);){switch(v[0]){case"\\cell":var g=u.slice(h,f.lastIndex-v[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var y={v:g,t:"s"};Array.isArray(o)?o[d][p]=y:o[Dt({r:d,c:p})]=y}break}h=f.lastIndex}p>c.e.c&&(c.e.c=p)}),o["!ref"]=qt(c),o}function r(s,i){return so(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Nr(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var u=a.s.c;u<=a.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=a.s.c;u<=a.e.c;++u){var d=Dt({r:c,c:u});o=l?(s[c]||[])[u]:s[d],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(ii(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function hY(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function cd(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function pY(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),a=s-i;if(a===0)return[0,0,e];var o=0,l=0,c=s+i;switch(l=a/(c>1?2-c:c),s){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function mY(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,a=[i,i,i],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,a[0]+=s,a[1]+=l;break;case 1:l=s*(2-o),a[0]+=l,a[1]+=s;break;case 2:l=s*(o-2),a[1]+=s,a[2]+=l;break;case 3:l=s*(4-o),a[1]+=l,a[2]+=s;break;case 4:l=s*(o-4),a[2]+=s,a[0]+=l;break;case 5:l=s*(6-o),a[2]+=l,a[0]+=s;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function K0(t,e){if(e===0)return t;var r=pY(hY(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),cd(mY(r))}var n4=6,vY=15,gY=1,qn=n4;function q0(t){return Math.floor((t+Math.round(128/qn)/256)*qn)}function X0(t){return Math.floor((t-5)/qn*100+.5)/100}function rg(t){return Math.round((t*qn+5)/qn*256)/256}function Qp(t){return rg(X0(q0(t)))}function yx(t){var e=Math.abs(t-Qp(t)),r=qn;if(e>.005)for(qn=gY;qn<vY;++qn)Math.abs(t-Qp(t))<=e&&(e=Math.abs(t-Qp(t)),r=qn);qn=r}function cc(t){t.width?(t.wpx=q0(t.width),t.wch=X0(t.wpx),t.MDW=qn):t.wpx?(t.wch=X0(t.wpx),t.width=rg(t.wch),t.MDW=qn):typeof t.wch=="number"&&(t.width=rg(t.wch),t.wpx=q0(t.width),t.MDW=qn),t.customWidth&&delete t.customWidth}var xY=96,s4=xY;function a4(t){return t*96/s4}function ud(t){return t*s4/96}var yY={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function EY(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(Vn)||[]).forEach(function(a){var o=_t(a);switch(Da(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=_r(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=_r(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function _Y(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(Vn)||[]).forEach(function(a){var o=_t(a);switch(Da(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function bY(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(Vn)||[]).forEach(function(a){var o=_t(a);switch(Da(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=pr(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?_r(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?_r(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?_r(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?_r(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?_r(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?_r(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?_r(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=tx[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=_r(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=ko[s.color.index];s.color.index==81&&(l=ko[1]),l||(l=ko[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=K0(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function SY(t,e,r){e.NumberFmt=[];for(var n=Ta(Ot),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Ot[n[s]];var i=t[0].match(Vn);if(i)for(s=0;s<i.length;++s){var a=_t(i[s]);switch(Da(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Xt(pr(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Io(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var Cf=["numFmtId","fillId","fontId","borderId","xfId"],If=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function TY(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Vn)||[]).forEach(function(i){var a=_t(i),o=0;switch(Da(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<Cf.length;++o)n[Cf[o]]&&(n[Cf[o]]=parseInt(n[Cf[o]],10));for(o=0;o<If.length;++o)n[If[o]]&&(n[If[o]]=_r(n[If[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=_r(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var AY=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=o.match(e))&&SY(d,u,c),(d=o.match(s))&&bY(d,u,l,c),(d=o.match(n))&&_Y(d,u,l,c),(d=o.match(i))&&EY(d,u,l,c),(d=o.match(r))&&TY(d,u,c),u}}();function wY(t,e){var r=t.read_shift(2),n=Mn(t);return[r,n]}function CY(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=MK(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=LK(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Mn(t),n}var IY=Un;function kY(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}var DY=Un;function RY(t,e,r){var n={};n.NumberFmt=[];for(var s in Ot)n.NumberFmt[s]=Ot[s];n.CellXf=[],n.Fonts=[];var i=[],a=!1;return ci(t,function(l,c,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],Io(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=K0(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:i.push(u),a=!0;break;case 38:i.pop(),a=!1;break;default:if(c.T>0)i.push(u);else if(c.T<0)i.pop();else if(!a||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}var FY=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function PY(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Vn)||[]).forEach(function(s){var i=_t(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[FY.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function OY(){}function NY(){}var LY=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,MY=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,BY=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function UY(t,e,r){e.themeElements={};var n;[["clrScheme",LY,PY],["fontScheme",MY,OY],["fmtScheme",BY,NY]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var VY=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function i4(t,e){(!t||t.length===0)&&(t=$Y());var r,n={};if(!(r=t.match(VY)))throw new Error("themeElements not found in theme");return UY(r[0],n,e),n.raw=t,n}function $Y(t,e){var r=[gI];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function HY(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var a;try{a=vI(i,{type:"array"})}catch{return}var o=ms(a,"theme/theme/theme1.xml",!0);if(o)return i4(o,r)}}function jY(t){return t.read_shift(4)}function GY(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=WY(t,4);break;case 2:e.xclrValue=zI(t);break;case 3:e.xclrValue=jY(t);break;case 4:t.l+=4;break}return t.l+=8,e}function WY(t,e){return Un(t,e)}function zY(t,e){return Un(t,e)}function KY(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=GY(t);break;case 6:n[1]=zY(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function qY(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(KY(t,r-t.l));return{ixfe:n,ext:i}}function XY(t,e){e.forEach(function(r){switch(r[0]){}})}function YY(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Mn(t)}}function QY(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function JY(t){return t.l+=4,t.read_shift(4)!=0}function ZY(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],a=!1,o=2;return ci(t,function(l,c,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(d){o==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):o==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:i.push(u),a=!0;break;case 36:i.pop(),a=!1;break;default:if(!c.T){if(!a||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function eQ(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,a;return t.replace(Vn,function(o){var l=_t(o);switch(Da(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function tQ(t){var e=[];if(!t)return e;var r=1;return(t.match(Vn)||[]).forEach(function(n){var s=_t(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function rQ(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Dt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function nQ(t,e,r){var n=[];return ci(t,function(i,a,o){switch(o){case 63:n.push(i);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function sQ(t,e,r,n){if(!t)return t;var s=n||{},i=!1;ci(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function aQ(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function M2(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(a){var o=Yn(a.ref);if(s?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[a.ref],!i){i={t:"z"},s?t[o.r][o.c]=i:t[a.ref]=i;var l=Nr(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=qt(l);c!==t["!ref"]&&(t["!ref"]=c)}i.c||(i.c=[]);var u={a:a.author,t:a.t,r:a.r,T:r};a.h&&(u.h=a.h);for(var d=i.c.length-1;d>=0;--d){if(!r&&i.c[d].T)return;r&&!i.c[d].T&&i.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(u.a==n[d].id){u.a=n[d].name||u.a;break}}i.c.push(u)})}function iQ(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=_t(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=Yn(l.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var d=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!d&&!!d[1]&&xx(d[1])||{r:"",t:"",h:""};c.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),c.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=f.h),n.push(c)}}}}),n}function oQ(t,e){var r=[],n=!1,s={},i=0;return t.replace(Vn,function(o,l){var c=_t(o);switch(Da(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=l+o.length;break;case"</text>":s.t=t.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function lQ(t,e){var r=[],n=!1;return t.replace(Vn,function(i){var a=_t(i);switch(Da(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return i}),r}function cQ(t){var e={};e.iauthor=t.read_shift(4);var r=Zo(t);return e.rfx=r.s,e.ref=Dt(r.s),t.l+=16,e}var uQ=Mn;function dQ(t,e){var r=[],n=[],s={},i=!1;return ci(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}var fQ="application/vnd.ms-office.vbaProject";function hQ(t){var e=Kt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Kt.utils.cfb_add(e,s,t.FileIndex[n].content)}}),Kt.write(e)}function pQ(){return{"!type":"dialog"}}function mQ(){return{"!type":"dialog"}}function vQ(){return{"!type":"macro"}}function gQ(){return{"!type":"macro"}}var Wl=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=e.c:--u,l?c+=e.r:--c,s+(o?"":"$")+Zr(u)+(l?"":"$")+gn(c)}return function(s,i){return e=i,s.replace(t,r)}}(),o4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,xQ=function(){return function(e,r){return e.replace(o4,function(n,s,i,a,o,l){var c=fx(a)-(i?0:r.c),u=dx(l)-(o?0:r.r),d=u==0?"":o?u+1:"["+u+"]",f=c==0?"":i?c+1:"["+c+"]";return s+"R"+d+"C"+f})}}();function l4(t,e){return t.replace(o4,function(r,n,s,i,a,o){return n+(s=="$"?s+i:Zr(fx(i)+e.c))+(a=="$"?a+o:gn(dx(o)+e.r))})}function yQ(t,e,r){var n=_c(e),s=n.s,i=Yn(r),a={r:i.r-s.r,c:i.c-s.c};return l4(t,a)}function EQ(t){return t.length!=1}function B2(t){return t.replace(/_xlfn\./g,"")}function $r(t){t.l+=1}function eo(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function c4(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return u4(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=eo(t),o=eo(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function u4(t){var e=eo(t),r=eo(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function _Q(t,e,r){if(r.biff<8)return u4(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=eo(t),a=eo(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function d4(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return bQ(t);var n=t.read_shift(r&&r.biff==12?4:2),s=eo(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function bQ(t){var e=eo(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function SQ(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function TQ(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return AQ(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function AQ(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function wQ(t,e,r){var n=(t[t.l++]&96)>>5,s=c4(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function CQ(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=c4(t,i,r);return[n,s,a]}function IQ(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function kQ(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function DQ(t,e,r){var n=(t[t.l++]&96)>>5,s=_Q(t,e-1,r);return[n,s]}function RQ(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function U2(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function FQ(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function PQ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function OQ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function NQ(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function LQ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function f4(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function MQ(t){return t.read_shift(2),f4(t)}function BQ(t){return t.read_shift(2),f4(t)}function UQ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=d4(t,0,r);return[n,s]}function VQ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=TQ(t,0,r);return[n,s]}function $Q(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=d4(t,0,r);return[n,s,i]}function HQ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[jJ[s],m4[s],n]}function jQ(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:GQ(t);return[s,(i[0]===0?m4:HJ)[i[1]]]}function GQ(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function WQ(t,e,r){t.l+=r&&r.biff==2?3:4}function zQ(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function KQ(t){return t.l++,el[t.read_shift(1)]}function qQ(t){return t.l++,t.read_shift(2)}function XQ(t){return t.l++,t.read_shift(1)!==0}function YQ(t){return t.l++,Fn(t)}function QQ(t,e,r){return t.l++,Bd(t,e-1,r)}function JQ(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Mr(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=el[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Fn(t);break;case 2:r[1]=tl(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function ZQ(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?Zo:tp)(t));return s}function eJ(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=JQ(t,r.biff);return a}function tJ(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function rJ(t,e,r){if(r.biff==5)return nJ(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function nJ(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function sJ(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function aJ(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function iJ(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function oJ(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var lJ=Un,cJ=Un,uJ=Un;function Vd(t,e,r){return t.l+=2,[SQ(t)]}function Ex(t){return t.l+=6,[]}var dJ=Vd,fJ=Ex,hJ=Ex,pJ=Vd;function h4(t){return t.l+=2,[Wr(t),t.read_shift(2)&1]}var mJ=Vd,vJ=h4,gJ=Ex,xJ=Vd,yJ=Vd,EJ=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function _J(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=EJ[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function bJ(t){return t.l+=2,[t.read_shift(4)]}function SJ(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function TJ(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function AJ(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function wJ(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function CJ(t){return t.l+=4,[0,0]}var V2={1:{n:"PtgExp",f:zQ},2:{n:"PtgTbl",f:uJ},3:{n:"PtgAdd",f:$r},4:{n:"PtgSub",f:$r},5:{n:"PtgMul",f:$r},6:{n:"PtgDiv",f:$r},7:{n:"PtgPower",f:$r},8:{n:"PtgConcat",f:$r},9:{n:"PtgLt",f:$r},10:{n:"PtgLe",f:$r},11:{n:"PtgEq",f:$r},12:{n:"PtgGe",f:$r},13:{n:"PtgGt",f:$r},14:{n:"PtgNe",f:$r},15:{n:"PtgIsect",f:$r},16:{n:"PtgUnion",f:$r},17:{n:"PtgRange",f:$r},18:{n:"PtgUplus",f:$r},19:{n:"PtgUminus",f:$r},20:{n:"PtgPercent",f:$r},21:{n:"PtgParen",f:$r},22:{n:"PtgMissArg",f:$r},23:{n:"PtgStr",f:QQ},26:{n:"PtgSheet",f:SJ},27:{n:"PtgEndSheet",f:TJ},28:{n:"PtgErr",f:KQ},29:{n:"PtgBool",f:XQ},30:{n:"PtgInt",f:qQ},31:{n:"PtgNum",f:YQ},32:{n:"PtgArray",f:RQ},33:{n:"PtgFunc",f:HQ},34:{n:"PtgFuncVar",f:jQ},35:{n:"PtgName",f:tJ},36:{n:"PtgRef",f:UQ},37:{n:"PtgArea",f:wQ},38:{n:"PtgMemArea",f:sJ},39:{n:"PtgMemErr",f:lJ},40:{n:"PtgMemNoMem",f:cJ},41:{n:"PtgMemFunc",f:aJ},42:{n:"PtgRefErr",f:iJ},43:{n:"PtgAreaErr",f:IQ},44:{n:"PtgRefN",f:VQ},45:{n:"PtgAreaN",f:DQ},46:{n:"PtgMemAreaN",f:AJ},47:{n:"PtgMemNoMemN",f:wJ},57:{n:"PtgNameX",f:rJ},58:{n:"PtgRef3d",f:$Q},59:{n:"PtgArea3d",f:CQ},60:{n:"PtgRefErr3d",f:oJ},61:{n:"PtgAreaErr3d",f:kQ},255:{}},IJ={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},kJ={1:{n:"PtgElfLel",f:h4},2:{n:"PtgElfRw",f:xJ},3:{n:"PtgElfCol",f:dJ},6:{n:"PtgElfRwV",f:yJ},7:{n:"PtgElfColV",f:pJ},10:{n:"PtgElfRadical",f:mJ},11:{n:"PtgElfRadicalS",f:gJ},13:{n:"PtgElfColS",f:fJ},15:{n:"PtgElfColSV",f:hJ},16:{n:"PtgElfRadicalLel",f:vJ},25:{n:"PtgList",f:_J},29:{n:"PtgSxName",f:bJ},255:{}},DJ={0:{n:"PtgAttrNoop",f:CJ},1:{n:"PtgAttrSemi",f:LQ},2:{n:"PtgAttrIf",f:OQ},4:{n:"PtgAttrChoose",f:FQ},8:{n:"PtgAttrGoto",f:PQ},16:{n:"PtgAttrSum",f:WQ},32:{n:"PtgAttrBaxcel",f:U2},33:{n:"PtgAttrBaxcel",f:U2},64:{n:"PtgAttrSpace",f:MQ},65:{n:"PtgAttrSpaceSemi",f:BQ},128:{n:"PtgAttrIfError",f:NQ},255:{}};function $d(t,e,r,n){if(n.biff<8)return Un(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=eJ(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=ZQ(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(Un(t,e)),i}function Hd(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=V2[i]||V2[IJ[i]],(i===24||i===25)&&(s=(i===24?kJ:DJ)[t[t.l+1]]),!s||!s.f?Un(t,e):a.push([s.n,s.f(t,e,r)]);return a}function RJ(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var FJ={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function PJ(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function p4(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function $2(t,e,r){var n=p4(t,e,r);return n=="#REF"?n:PJ(n,r)}function Cn(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,u,d=0,f=0,h,v="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",y=0,E=t[0].length;y<E;++y){var S=t[0][y];switch(S[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=Pr(" ",t[0][p][1][1]);break;case 1:g=Pr("\r",t[0][p][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}c=c+g,p=-1}o.push(c+FJ[S[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Tu(S[1][1],a,s),o.push(Au(u,i));break;case"PtgRefN":u=r?Tu(S[1][1],r,s):S[1][1],o.push(Au(u,i));break;case"PtgRef3d":d=S[1][1],u=Tu(S[1][2],a,s),v=$2(n,d,s),o.push(v+"!"+Au(u,i));break;case"PtgFunc":case"PtgFuncVar":var I=S[1][0],R=S[1][1];I||(I=0),I&=127;var D=I==0?[]:o.slice(-I);o.length-=I,R==="User"&&(R=D.shift()),o.push(R+"("+D.join(",")+")");break;case"PtgBool":o.push(S[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(S[1]);break;case"PtgNum":o.push(String(S[1]));break;case"PtgStr":o.push('"'+S[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(S[1]);break;case"PtgAreaN":h=_2(S[1][1],r?{s:r}:a,s),o.push(Xp(h,s));break;case"PtgArea":h=_2(S[1][1],a,s),o.push(Xp(h,s));break;case"PtgArea3d":d=S[1][1],h=S[1][2],v=$2(n,d,s),o.push(v+"!"+Xp(h,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=S[1][2];var C=(n.names||[])[f-1]||(n[0]||[])[f],_=C?C.Name:"SH33TJSNAME"+String(f);_&&_.slice(0,6)=="_xlfn."&&!s.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var b=S[1][1];f=S[1][2];var x;if(s.biff<=5)b<0&&(b=-b),n[b]&&(x=n[b][f]);else{var w="";if(((n[b]||[])[0]||[])[0]==14849||(((n[b]||[])[0]||[])[0]==1025?n[b][f]&&n[b][f].itab>0&&(w=n.SheetNames[n[b][f].itab-1]+"!"):w=n.SheetNames[f-1]+"!"),n[b]&&n[b][f])w+=n[b][f].Name;else if(n[0]&&n[0][f])w+=n[0][f].Name;else{var A=(p4(n,b,s)||"").split(";;");A[f-1]?w=A[f-1]:w+="SH33TJSERRX"}o.push(w);break}x||(x={Name:"SH33TJSERRY"}),o.push(x.Name);break;case"PtgParen":var k="(",L=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:k=Pr(" ",t[0][p][1][1])+k;break;case 3:k=Pr("\r",t[0][p][1][1])+k;break;case 4:L=Pr(" ",t[0][p][1][1])+L;break;case 5:L=Pr("\r",t[0][p][1][1])+L;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}o.push(k+o.pop()+L);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:S[1][1],r:S[1][0]};var G={c:r.c,r:r.r};if(n.sharedf[Dt(u)]){var P=n.sharedf[Dt(u)];o.push(Cn(P,a,G,n,s))}else{var M=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(Cn(c[1],a,G,n,s)),M=!0;break}M||o.push(S[1])}break;case"PtgArray":o.push("{"+RJ(S[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+S[1].idx+"[#"+S[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(S));default:throw new Error("Unrecognized Formula Token: "+String(S))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&p>=0&&H.indexOf(t[0][y][0])==-1){S=t[0][p];var B=!0;switch(S[1][0]){case 4:B=!1;case 0:g=Pr(" ",S[1][1]);break;case 5:B=!1;case 1:g=Pr("\r",S[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+S[1][0])}o.push((B?g:"")+o.pop()+(B?"":g)),p=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function OJ(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],Un(t,e-2)];var o=Hd(t,a,r);return e!==a+s&&(i=$d(t,e-a-s,o,r)),t.l=n,[o,i]}function NJ(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],Un(t,e-2)];var o=Hd(t,a,r);return e!==a+s&&(i=$d(t,e-a-s,o,r)),t.l=n,[o,i]}function LJ(t,e,r,n){var s=t.l+e,i=Hd(t,n,r),a;return s!==t.l&&(a=$d(t,s-t.l,i,r)),[i,a]}function MJ(t,e,r){var n=t.l+e,s,i=t.read_shift(2),a=Hd(t,i,r);return i==65535?[[],Un(t,e-2)]:(e!==i+2&&(s=$d(t,n-i-2,a,r)),[a,s])}function BJ(t){var e;if(Wa(t,t.l+6)!==65535)return[Fn(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Jp(t,e,r){var n=t.l+e,s=Ra(t);r.biff==2&&++t.l;var i=BJ(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=NJ(t,n-t.l,r);return{cell:s,val:i[0],formula:o,shared:a>>3&1,tt:i[1]}}function rp(t,e,r){var n=t.read_shift(4),s=Hd(t,n,r),i=t.read_shift(4),a=i>0?$d(t,i,s,r):null;return[s,a]}var UJ=rp,np=rp,VJ=rp,$J=rp,HJ={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},m4={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},jJ={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function H2(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Zp(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var ku={},zl={};function Du(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function v4(t,e,r,n,s,i){try{n.cellNF&&(t.z=Ot[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=an(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Ot[e]==null&&Io(Gz[e]||"General",e),t.t==="e")t.w=t.w||el[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ad(t.v);else if(t.t==="d"){var a=es(t.v);(a|0)===a?t.w=a.toString(10):t.w=ad(a)}else{if(t.v===void 0)return"";t.w=Uo(t.v,zl)}else t.t==="d"?t.w=Ps(e,es(t.v),zl):t.w=Ps(e,t.v,zl)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=K0(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=K0(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function GJ(t,e){var r=Nr(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=qt(r))}var WJ=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,zJ=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,KJ=/<(?:\w:)?hyperlink [^>]*>/mg,qJ=/"(\w*:\w*)"/,XJ=/<(?:\w:)?col\b[^>]*[\/]?>/g,YJ=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,QJ=/<(?:\w:)?pageMargins[^>]*\/>/g,g4=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,JJ=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ZJ=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function eZ(t,e,r,n,s,i,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",d=t.match(zJ);d?(c=t.slice(0,d.index),u=t.slice(d.index+d[0].length)):c=u=t;var f=c.match(g4);f?_x(f[0],o,s,r):(f=c.match(JJ))&&tZ(f[0],f[1]||"",o,s,r);var h=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var v=c.slice(h,h+50).match(qJ);v&&GJ(o,v[1])}var p=c.match(ZJ);p&&p[1]&&oZ(p[1],s);var g=[];if(e.cellStyles){var y=c.match(XJ);y&&sZ(g,y)}d&&lZ(d[1],o,e,l,i,a);var E=u.match(YJ);E&&(o["!autofilter"]=aZ(E[0]));var S=[],I=u.match(WJ);if(I)for(h=0;h!=I.length;++h)S[h]=Nr(I[h].slice(I[h].indexOf('"')+1));var R=u.match(KJ);R&&rZ(o,R,n);var D=u.match(QJ);if(D&&(o["!margins"]=nZ(_t(D[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=qt(l)),e.sheetRows>0&&o["!ref"]){var C=Nr(o["!ref"]);e.sheetRows<=+C.e.r&&(C.e.r=e.sheetRows-1,C.e.r>l.e.r&&(C.e.r=l.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>l.e.c&&(C.e.c=l.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),o["!fullref"]=o["!ref"],o["!ref"]=qt(C))}return g.length>0&&(o["!cols"]=g),S.length>0&&(o["!merges"]=S),o}function _x(t,e,r,n){var s=_t(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Xt(pr(s.codeName)))}function tZ(t,e,r,n,s){_x(t.slice(0,t.indexOf(">")),r,n,s)}function rZ(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=_t(pr(e[s]),!0);if(!i.ref)return;var a=((r||{})["!id"]||[])[i.id];a?(i.Target=a.Target,i.location&&(i.Target+="#"+Xt(i.location))):(i.Target="#"+Xt(i.location),a={Target:i.Target,TargetMode:"Internal"}),i.Rel=a,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Nr(i.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Dt({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function nZ(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function sZ(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=_t(e[n],!0);s.hidden&&(s.hidden=_r(s.hidden));var i=parseInt(s.min,10)-1,a=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,yx(s.width)),cc(s);i<=a;)t[i++]=vn(s)}}function aZ(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var iZ=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function oZ(t,e){e.Views||(e.Views=[{}]),(t.match(iZ)||[]).forEach(function(r,n){var s=_t(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),_r(s.rightToLeft)&&(e.Views[n].RTL=!0)})}var lZ=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=id("v"),a=id("f");return function(l,c,u,d,f,h){for(var v=0,p="",g=[],y=[],E=0,S=0,I=0,R="",D,C,_=0,b=0,x,w,A=0,k=0,L=Array.isArray(h.CellXf),G,P=[],M=[],H=Array.isArray(c),B=[],Q={},j=!1,O=!!u.sheetStubs,W=l.split(e),K=0,se=W.length;K!=se;++K){p=W[K].trim();var ve=p.length;if(ve!==0){var ie=0;e:for(v=0;v<ve;++v)switch(p[v]){case">":if(p[v-1]!="/"){++v;break e}if(u&&u.cellStyles){if(C=_t(p.slice(ie,v),!0),_=C.r!=null?parseInt(C.r,10):_+1,b=-1,u.sheetRows&&u.sheetRows<_)continue;Q={},j=!1,C.ht&&(j=!0,Q.hpt=parseFloat(C.ht),Q.hpx=ud(Q.hpt)),C.hidden=="1"&&(j=!0,Q.hidden=!0),C.outlineLevel!=null&&(j=!0,Q.level=+C.outlineLevel),j&&(B[_-1]=Q)}break;case"<":ie=v;break}if(ie>=v)break;if(C=_t(p.slice(ie,v),!0),_=C.r!=null?parseInt(C.r,10):_+1,b=-1,!(u.sheetRows&&u.sheetRows<_)){d.s.r>_-1&&(d.s.r=_-1),d.e.r<_-1&&(d.e.r=_-1),u&&u.cellStyles&&(Q={},j=!1,C.ht&&(j=!0,Q.hpt=parseFloat(C.ht),Q.hpx=ud(Q.hpt)),C.hidden=="1"&&(j=!0,Q.hidden=!0),C.outlineLevel!=null&&(j=!0,Q.level=+C.outlineLevel),j&&(B[_-1]=Q)),g=p.slice(v).split(t);for(var de=0;de!=g.length&&g[de].trim().charAt(0)=="<";++de);for(g=g.slice(de),v=0;v!=g.length;++v)if(p=g[v].trim(),p.length!==0){if(y=p.match(r),E=v,S=0,I=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,y!=null&&y.length===2){for(E=0,R=y[1],S=0;S!=R.length&&!((I=R.charCodeAt(S)-64)<1||I>26);++S)E=26*E+I;--E,b=E}else++b;for(S=0;S!=p.length&&p.charCodeAt(S)!==62;++S);if(++S,C=_t(p.slice(0,S),!0),C.r||(C.r=Dt({r:_-1,c:b})),R=p.slice(S),D={t:""},(y=R.match(i))!=null&&y[1]!==""&&(D.v=Xt(y[1])),u.cellFormula){if((y=R.match(a))!=null&&y[1]!==""){if(D.f=Xt(pr(y[1])).replace(/\r\n/g,`
`),u.xlfn||(D.f=B2(D.f)),y[0].indexOf('t="array"')>-1)D.F=(R.match(s)||[])[1],D.F.indexOf(":")>-1&&P.push([Nr(D.F),D.F]);else if(y[0].indexOf('t="shared"')>-1){w=_t(y[0]);var ee=Xt(pr(y[1]));u.xlfn||(ee=B2(ee)),M[parseInt(w.si,10)]=[w,ee,C.r]}}else(y=R.match(/<f[^>]*\/>/))&&(w=_t(y[0]),M[w.si]&&(D.f=yQ(M[w.si][1],M[w.si][2],C.r)));var Y=Yn(C.r);for(S=0;S<P.length;++S)Y.r>=P[S][0].s.r&&Y.r<=P[S][0].e.r&&Y.c>=P[S][0].s.c&&Y.c<=P[S][0].e.c&&(D.F=P[S][1])}if(C.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(O)D.t="z";else continue;else D.t=C.t||"n";switch(d.s.c>b&&(d.s.c=b),d.e.c<b&&(d.e.c=b),D.t){case"n":if(D.v==""||D.v==null){if(!O)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!O)continue;D.t="z"}else x=ku[parseInt(D.v,10)],D.v=x.t,D.r=x.r,u.cellHTML&&(D.h=x.h);break;case"str":D.t="s",D.v=D.v!=null?pr(D.v):"",u.cellHTML&&(D.h=lx(D.v));break;case"inlineStr":y=R.match(n),D.t="s",y!=null&&(x=xx(y[1]))?(D.v=x.t,u.cellHTML&&(D.h=x.h)):D.v="";break;case"b":D.v=_r(D.v);break;case"d":u.cellDates?D.v=an(D.v,1):(D.v=es(an(D.v,1)),D.t="n");break;case"e":(!u||u.cellText!==!1)&&(D.w=D.v),D.v=BI[D.v];break}if(A=k=0,G=null,L&&C.s!==void 0&&(G=h.CellXf[C.s],G!=null&&(G.numFmtId!=null&&(A=G.numFmtId),u.cellStyles&&G.fillId!=null&&(k=G.fillId))),v4(D,A,k,u,f,h),u.cellDates&&L&&D.t=="n"&&Ec(Ot[A])&&(D.t="d",D.v=ep(D.v)),C.cm&&u.xlmeta){var ge=(u.xlmeta.Cell||[])[+C.cm-1];ge&&ge.type=="XLDAPR"&&(D.D=!0)}if(H){var q=Yn(C.r);c[q.r]||(c[q.r]=[]),c[q.r][q.c]=D}else c[C.r]=D}}}}B.length>0&&(c["!rows"]=B)}}();function cZ(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var uZ=Zo;function dZ(){}function fZ(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=OK(t),r}function hZ(t){var e=Ms(t);return[e]}function pZ(t){var e=Jo(t);return[e]}function mZ(t){var e=Ms(t),r=t.read_shift(1);return[e,r,"b"]}function vZ(t){var e=Jo(t),r=t.read_shift(1);return[e,r,"b"]}function gZ(t){var e=Ms(t),r=t.read_shift(1);return[e,r,"e"]}function xZ(t){var e=Jo(t),r=t.read_shift(1);return[e,r,"e"]}function yZ(t){var e=Ms(t),r=t.read_shift(4);return[e,r,"s"]}function EZ(t){var e=Jo(t),r=t.read_shift(4);return[e,r,"s"]}function _Z(t){var e=Ms(t),r=Fn(t);return[e,r,"n"]}function x4(t){var e=Jo(t),r=Fn(t);return[e,r,"n"]}function bZ(t){var e=Ms(t),r=mx(t);return[e,r,"n"]}function SZ(t){var e=Jo(t),r=mx(t);return[e,r,"n"]}function TZ(t){var e=Ms(t),r=hx(t);return[e,r,"is"]}function AZ(t){var e=Ms(t),r=Mn(t);return[e,r,"str"]}function wZ(t){var e=Jo(t),r=Mn(t);return[e,r,"str"]}function CZ(t,e,r){var n=t.l+e,s=Ms(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=np(t,n-t.l,r);a[3]=Cn(o,null,s,r.supbooks,r)}else t.l=n;return a}function IZ(t,e,r){var n=t.l+e,s=Ms(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=np(t,n-t.l,r);a[3]=Cn(o,null,s,r.supbooks,r)}else t.l=n;return a}function kZ(t,e,r){var n=t.l+e,s=Ms(t);s.r=r["!row"];var i=Fn(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=np(t,n-t.l,r);a[3]=Cn(o,null,s,r.supbooks,r)}else t.l=n;return a}function DZ(t,e,r){var n=t.l+e,s=Ms(t);s.r=r["!row"];var i=Mn(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=np(t,n-t.l,r);a[3]=Cn(o,null,s,r.supbooks,r)}else t.l=n;return a}var RZ=Zo;function FZ(t,e){var r=t.l+e,n=Zo(t),s=px(t),i=Mn(t),a=Mn(t),o=Mn(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function PZ(){}function OZ(t,e,r){var n=t.l+e,s=NI(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=UJ(t,n-t.l,r);a[1]=o}else t.l=n;return a}function NZ(t,e,r){var n=t.l+e,s=Zo(t),i=[s];if(r.cellFormula){var a=$J(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}var LZ=["left","right","top","bottom","header","footer"];function MZ(t){var e={};return LZ.forEach(function(r){e[r]=Fn(t)}),e}function BZ(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function UZ(){}function VZ(){}function $Z(t,e,r,n,s,i,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,f=!1,h,v,p,g,y,E,S,I,R,D=[];o.biff=12,o["!row"]=0;var C=0,_=!1,b=[],x={},w=o.supbooks||s.supbooks||[[]];if(w.sharedf=x,w.arrayf=b,w.SheetNames=s.SheetNames||s.Sheets.map(function(H){return H.name}),!o.supbooks&&(o.supbooks=w,s.Names))for(var A=0;A<s.Names.length;++A)w[0][A+1]=s.Names[A];var k=[],L=[],G=!1;Y0[16]={n:"BrtShortReal",f:x4};var P;if(ci(t,function(B,Q,j){if(!f)switch(j){case 148:c=B;break;case 0:h=B,o.sheetRows&&o.sheetRows<=h.r&&(f=!0),I=gn(g=h.r),o["!row"]=h.r,(B.hidden||B.hpt||B.level!=null)&&(B.hpt&&(B.hpx=ud(B.hpt)),L[B.r]=B);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:B[2]},B[2]){case"n":v.v=B[1];break;case"s":S=ku[B[1]],v.v=S.t,v.r=S.r;break;case"b":v.v=!!B[1];break;case"e":v.v=B[1],o.cellText!==!1&&(v.w=el[v.v]);break;case"str":v.t="s",v.v=B[1];break;case"is":v.t="s",v.v=B[1].t;break}if((p=a.CellXf[B[0].iStyleRef])&&v4(v,p.numFmtId,null,o,i,a),y=B[0].c==-1?y+1:B[0].c,o.dense?(l[g]||(l[g]=[]),l[g][y]=v):l[Zr(y)+I]=v,o.cellFormula){for(_=!1,C=0;C<b.length;++C){var O=b[C];h.r>=O[0].s.r&&h.r<=O[0].e.r&&y>=O[0].s.c&&y<=O[0].e.c&&(v.F=qt(O[0]),_=!0)}!_&&B.length>3&&(v.f=B[3])}if(u.s.r>h.r&&(u.s.r=h.r),u.s.c>y&&(u.s.c=y),u.e.r<h.r&&(u.e.r=h.r),u.e.c<y&&(u.e.c=y),o.cellDates&&p&&v.t=="n"&&Ec(Ot[p.numFmtId])){var W=bo(v.v);W&&(v.t="d",v.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}P&&(P.type=="XLDAPR"&&(v.D=!0),P=void 0);break;case 1:case 12:if(!o.sheetStubs||d)break;v={t:"z",v:void 0},y=B[0].c==-1?y+1:B[0].c,o.dense?(l[g]||(l[g]=[]),l[g][y]=v):l[Zr(y)+I]=v,u.s.r>h.r&&(u.s.r=h.r),u.s.c>y&&(u.s.c=y),u.e.r<h.r&&(u.e.r=h.r),u.e.c<y&&(u.e.c=y),P&&(P.type=="XLDAPR"&&(v.D=!0),P=void 0);break;case 176:D.push(B);break;case 49:P=((o.xlmeta||{}).Cell||[])[B-1];break;case 494:var K=n["!id"][B.relId];for(K?(B.Target=K.Target,B.loc&&(B.Target+="#"+B.loc),B.Rel=K):B.relId==""&&(B.Target="#"+B.loc),g=B.rfx.s.r;g<=B.rfx.e.r;++g)for(y=B.rfx.s.c;y<=B.rfx.e.c;++y)o.dense?(l[g]||(l[g]=[]),l[g][y]||(l[g][y]={t:"z",v:void 0}),l[g][y].l=B):(E=Dt({c:y,r:g}),l[E]||(l[E]={t:"z",v:void 0}),l[E].l=B);break;case 426:if(!o.cellFormula)break;b.push(B),R=o.dense?l[g][y]:l[Zr(y)+I],R.f=Cn(B[1],u,{r:h.r,c:y},w,o),R.F=qt(B[0]);break;case 427:if(!o.cellFormula)break;x[Dt(B[0].s)]=B[1],R=o.dense?l[g][y]:l[Zr(y)+I],R.f=Cn(B[1],u,{r:h.r,c:y},w,o);break;case 60:if(!o.cellStyles)break;for(;B.e>=B.s;)k[B.e--]={width:B.w/256,hidden:!!(B.flags&1),level:B.level},G||(G=!0,yx(B.w/256)),cc(k[B.e+1]);break;case 161:l["!autofilter"]={ref:qt(B)};break;case 476:l["!margins"]=B;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),B.name&&(s.Sheets[r].CodeName=B.name),(B.above||B.left)&&(l["!outline"]={above:B.above,left:B.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),B.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!Q.T){if(!d||o.WTF)throw new Error("Unexpected record 0x"+j.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=qt(c||u)),o.sheetRows&&l["!ref"]){var M=Nr(l["!ref"]);o.sheetRows<=+M.e.r&&(M.e.r=o.sheetRows-1,M.e.r>u.e.r&&(M.e.r=u.e.r),M.e.r<M.s.r&&(M.s.r=M.e.r),M.e.c>u.e.c&&(M.e.c=u.e.c),M.e.c<M.s.c&&(M.s.c=M.e.c),l["!fullref"]=l["!ref"],l["!ref"]=qt(M))}return D.length>0&&(l["!merges"]=D),k.length>0&&(l["!cols"]=k),L.length>0&&(l["!rows"]=L),l}function HZ(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var a=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var s=Xt((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function jZ(t,e,r,n,s,i){var a=i||{"!type":"chart"};if(!t)return i;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var f=HZ(d);u.s.r=u.s.c=0,u.e.c=o,c=Zr(o),f[0].forEach(function(h,v){a[c+gn(v)]={t:"n",v:h,z:f[1]},l=v}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=qt(u)),a}function GZ(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(g4);return o&&_x(o[0],i,s,r),(a=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function WZ(t,e){t.l+=10;var r=Mn(t);return{name:r}}function zZ(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a=!1;return ci(t,function(l,c,u){switch(u){case 550:i["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var y4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],KZ=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],qZ=[],XZ=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function j2(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=_r(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function G2(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=_r(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function E4(t){G2(t.WBProps,y4),G2(t.CalcPr,XZ),j2(t.WBView,KZ),j2(t.Sheets,qZ),zl.date1904=_r(t.WBProps.date1904)}var YZ="][*?/\\".split("");function QZ(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return YZ.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var JZ=/<\w+:workbook/;function ZZ(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},a=0;if(t.replace(Vn,function(l,c){var u=_t(l);switch(Da(u[0])){case"<?xml":break;case"<workbook":l.match(JZ)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":y4.forEach(function(d){if(u[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=_r(u[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(u[d[0]],10);break;default:r.WBProps[d[0]]=u[d[0]]}}),u.codeName&&(r.WBProps.CodeName=pr(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Xt(pr(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=pr(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),_r(u.hidden||"0")&&(i.Hidden=!0),a=c+l.length;break;case"</definedName>":i.Ref=Xt(pr(t.slice(a,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),gK.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return E4(r),r}function eee(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Zv(t),r.name=Mn(t),r}function tee(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?Mn(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function ree(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function nee(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=NK(t),a=VJ(t,0,r),o=px(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function see(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],a=[[]];return a.SheetNames=[],a.XTI=[],Y0[16]={n:"BrtFRTArchID$",f:ree},ci(t,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Cn(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),E4(r),r.Names=i,r.supbooks=a,r}function aee(t,e,r){return e.slice(-4)===".bin"?see(t,r):ZZ(t,r)}function iee(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?$Z(t,n,r,s,i,a,o):eZ(t,n,r,s,i,a,o)}function oee(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?zZ(t,n,r,s,i):GZ(t,n,r,s,i)}function lee(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?vQ():gQ()}function cee(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?pQ():mQ()}function uee(t,e,r,n){return e.slice(-4)===".bin"?RY(t,r,n):AY(t,r,n)}function dee(t,e,r){return i4(t,r)}function fee(t,e,r){return e.slice(-4)===".bin"?KX(t,r):WX(t,r)}function hee(t,e,r){return e.slice(-4)===".bin"?dQ(t,r):iQ(t,r)}function pee(t,e,r){return e.slice(-4)===".bin"?nQ(t):tQ(t)}function mee(t,e,r,n){return r.slice(-4)===".bin"?sQ(t,e,r,n):void 0}function vee(t,e,r){return e.slice(-4)===".bin"?ZY(t,e,r):eQ(t,e,r)}var _4=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,b4=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Vs(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(_4),i,a,o,l;if(s)for(l=0;l!=s.length;++l)i=s[l].match(b4),(a=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(a+1),n[o]=i[2].slice(1,i[2].length-1));return n}function gee(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(_4),s,i,a,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(b4),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?a="xmlns"+s[1].slice(6):a=s[1].slice(i+1),r[a]=s[2].slice(1,s[2].length-1));return r}var Ru;function xee(t,e){var r=Ru[t]||Xt(t);return r==="General"?Uo(e):Ps(r,e)}function yee(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=_r(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=an(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Xt(e)]=s}function Eee(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||el[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ad(t.v):t.w=Uo(t.v):t.w=xee(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=Ru[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Ec(n)){var s=bo(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function _ee(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=yY[n.Pattern]||n.Pattern)}t[e.ID]=e}function bee(t,e,r,n,s,i,a,o,l,c){var u="General",d=n.StyleID,f={};c=c||{};var h=[],v=0;for(d===void 0&&o&&(d=o.StyleID),d===void 0&&a&&(d=a.StyleID);i[d]!==void 0&&(i[d].nf&&(u=i[d].nf),i[d].Interior&&h.push(i[d].Interior),!!i[d].Parent);)d=i[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=_r(t);break;case"String":n.t="s",n.r=f2(Xt(t)),n.v=t.indexOf("<")>-1?Xt(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(an(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Xt(t):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=BI[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=f2(e||t));break}if(Eee(n,u,c),c.cellFormula!==!1)if(n.Formula){var p=Xt(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=Wl(p,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Wl("RC:RC",s):n.ArrayRange&&(n.F=Wl(n.ArrayRange,s),l.push([Nr(n.F),n.F]))}else for(v=0;v<l.length;++v)s.r>=l[v][0].s.r&&s.r<=l[v][0].e.r&&s.c>=l[v][0].s.c&&s.c<=l[v][0].e.c&&(n.F=l[v][1]);c.cellStyles&&(h.forEach(function(g){!f.patternType&&g.patternType&&(f.patternType=g.patternType)}),n.s=f),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function See(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function em(t,e){var r=e||{};uI();var n=Jc(cx(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=pr(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var a=vn(r);return a.type="string",ld.to_workbook(n,a)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(te){s.indexOf("<"+te)>=0&&(i=!0)}),i)return Fee(n,r);Ru={"General Number":"General","General Date":Ot[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ot[15],"Short Date":Ot[14],"Long Time":Ot[19],"Medium Time":Ot[18],"Short Time":Ot[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ot[2],Standard:Ot[4],Percent:Ot[10],Scientific:Ot[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},d=[],f=r.dense?[]:{},h="",v={},p={},g=Vs('<Data ss:Type="String">'),y=0,E=0,S=0,I={s:{r:2e6,c:2e6},e:{r:0,c:0}},R={},D={},C="",_=0,b=[],x={},w={},A=0,k=[],L=[],G={},P=[],M,H=!1,B=[],Q=[],j={},O=0,W=0,K={Sheets:[],WBProps:{date1904:!1}},se={};od.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ve="";o=od.exec(n);)switch(o[3]=(ve=o[3]).toLowerCase()){case"data":if(ve=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?bee(n.slice(y,o.index),C,g,l[l.length-1][0]=="comment"?G:v,{c:E,r:S},R,P[E],p,B,r):(C="",g=Vs(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(L.length>0&&(v.c=L),(!r.sheetRows||r.sheetRows>S)&&v.v!==void 0&&(r.dense?(f[S]||(f[S]=[]),f[S][E]=v):f[Zr(E)+gn(S)]=v),v.HRef&&(v.l={Target:Xt(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(O=E+(parseInt(v.MergeAcross,10)|0),W=S+(parseInt(v.MergeDown,10)|0),b.push({s:{c:E,r:S},e:{c:O,r:W}})),!r.sheetStubs)v.MergeAcross?E=O+1:++E;else if(v.MergeAcross||v.MergeDown){for(var ie=E;ie<=O;++ie)for(var de=S;de<=W;++de)(ie>E||de>S)&&(r.dense?(f[de]||(f[de]=[]),f[de][ie]={t:"z"}):f[Zr(ie)+gn(de)]={t:"z"});E=O+1}else++E;else v=gee(o[0]),v.Index&&(E=+v.Index-1),E<I.s.c&&(I.s.c=E),E>I.e.c&&(I.e.c=E),o[0].slice(-2)==="/>"&&++E,L=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(S<I.s.r&&(I.s.r=S),S>I.e.r&&(I.e.r=S),o[0].slice(-2)==="/>"&&(p=Vs(o[0]),p.Index&&(S=+p.Index-1)),E=0,++S):(p=Vs(o[0]),p.Index&&(S=+p.Index-1),j={},(p.AutoFitHeight=="0"||p.Height)&&(j.hpx=parseInt(p.Height,10),j.hpt=a4(j.hpx),Q[S]=j),p.Hidden=="1"&&(j.hidden=!0,Q[S]=j));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));d.push(h),I.s.r<=I.e.r&&I.s.c<=I.e.c&&(f["!ref"]=qt(I),r.sheetRows&&r.sheetRows<=I.e.r&&(f["!fullref"]=f["!ref"],I.e.r=r.sheetRows-1,f["!ref"]=qt(I))),b.length&&(f["!merges"]=b),P.length>0&&(f["!cols"]=P),Q.length>0&&(f["!rows"]=Q),u[h]=f}else I={s:{r:2e6,c:2e6},e:{r:0,c:0}},S=E=0,l.push([o[3],!1]),c=Vs(o[0]),h=Xt(c.Name),f=r.dense?[]:{},b=[],B=[],Q=[],se={name:h,Hidden:0},K.Sheets.push(se);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),P=[],H=!1}break;case"style":o[1]==="/"?_ee(R,D,r):D=Vs(o[0]);break;case"numberformat":D.nf=Xt(Vs(o[0]).Format||"General"),Ru[D.nf]&&(D.nf=Ru[D.nf]);for(var ee=0;ee!=392&&Ot[ee]!=D.nf;++ee);if(ee==392){for(ee=57;ee!=392;++ee)if(Ot[ee]==null){Io(D.nf,ee);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(M=Vs(o[0]),M.Hidden&&(M.hidden=!0,delete M.Hidden),M.Width&&(M.wpx=parseInt(M.Width,10)),!H&&M.wpx>10){H=!0,qn=n4;for(var Y=0;Y<P.length;++Y)P[Y]&&cc(P[Y])}H&&cc(M),P[M.Index-1||P.length]=M;for(var ge=0;ge<+M.Span;++ge)P[P.length]=vn(M);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var q=_t(o[0]),z={Name:q.Name,Ref:Wl(q.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(z.Sheet=K.Sheets.length-1),K.Names.push(z);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?C+=n.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=Vs(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?iq(x,ve,n.slice(A,o.index)):A=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));See(G),L.push(G)}else l.push([o[3],!1]),c=Vs(o[0]),G={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var J=Vs(o[0]);f["!autofilter"]={ref:Wl(J.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return Y2(n,r);var he=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:he=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:he=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:he=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:he=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(A,o.index)){case"SheetHidden":se.Hidden=1;break;case"SheetVeryHidden":se.Hidden=2;break}else A=o.index+o[0].length;break;case"header":f["!margins"]||Du(f["!margins"]={},"xlml"),isNaN(+_t(o[0]).Margin)||(f["!margins"].header=+_t(o[0]).Margin);break;case"footer":f["!margins"]||Du(f["!margins"]={},"xlml"),isNaN(+_t(o[0]).Margin)||(f["!margins"].footer=+_t(o[0]).Margin);break;case"pagemargins":var re=_t(o[0]);f["!margins"]||Du(f["!margins"]={},"xlml"),isNaN(+re.Top)||(f["!margins"].top=+re.Top),isNaN(+re.Left)||(f["!margins"].left=+re.Left),isNaN(+re.Right)||(f["!margins"].right=+re.Right),isNaN(+re.Bottom)||(f["!margins"].bottom=+re.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:he=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:he=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:he=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:he=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:he=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:he=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:he=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:he=!1}break;case"smarttags":break;default:he=!1;break}if(he||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?yee(w,ve,k,n.slice(A,o.index)):(k=o,A=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var X={};return!r.bookSheets&&!r.bookProps&&(X.Sheets=u),X.SheetNames=d,X.Workbook=K,X.SSF=vn(Ot),X.Props=x,X.Custprops=w,X}function ng(t,e){switch(Tx(e=e||{}),e.type||"base64"){case"base64":return em(Ss(t),e);case"binary":case"buffer":case"file":return em(t,e);case"array":return em(Qo(t),e)}}function Tee(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=BK(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=UK(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Aee=[60,1084,2066,2165,2175];function wee(t,e,r,n,s){var i=n,a=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}a.push(o),r.l+=i;for(var l=Wa(r,r.l),c=sg[l],u=0;c!=null&&Aee.indexOf(l)>-1;)i=Wa(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+i),a.push(o),r.l+=4+i,c=sg[l=Wa(r,r.l)];var d=Pi(a);dn(d,0);var f=0;d.lens=[];for(var h=0;h<a.length;++h)d.lens.push(f),f+=a[h].length;if(d.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+d.length+" < "+n;return e.f(d,d.length,s)}function ia(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Ot[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||el[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ad(t.v):t.w=Uo(t.v):t.w=Ps(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&Ec(Ot[n]||String(n))){var s=bo(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function kf(t,e,r){return{v:t,ixfe:e,t:r}}function Cee(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},a={},o=null,l=[],c="",u={},d,f="",h,v,p,g,y={},E=[],S,I,R=[],D=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},b=function(xe){return xe<8?ko[xe]:xe<64&&D[xe-8]||ko[xe]},x=function(xe,_e,Pe){var We=_e.XF.data;if(!(!We||!We.patternType||!Pe||!Pe.cellStyles)){_e.s={},_e.s.patternType=We.patternType;var rt;(rt=cd(b(We.icvFore)))&&(_e.s.fgColor={rgb:rt}),(rt=cd(b(We.icvBack)))&&(_e.s.bgColor={rgb:rt})}},w=function(xe,_e,Pe){if(!(j>1)&&!(Pe.sheetRows&&xe.r>=Pe.sheetRows)){if(Pe.cellStyles&&_e.XF&&_e.XF.data&&x(xe,_e,Pe),delete _e.ixfe,delete _e.XF,d=xe,f=Dt(xe),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),xe.r<a.s.r&&(a.s.r=xe.r),xe.c<a.s.c&&(a.s.c=xe.c),xe.r+1>a.e.r&&(a.e.r=xe.r+1),xe.c+1>a.e.c&&(a.e.c=xe.c+1),Pe.cellFormula&&_e.f){for(var We=0;We<E.length;++We)if(!(E[We][0].s.c>xe.c||E[We][0].s.r>xe.r)&&!(E[We][0].e.c<xe.c||E[We][0].e.r<xe.r)){_e.F=qt(E[We][0]),(E[We][0].s.c!=xe.c||E[We][0].s.r!=xe.r)&&delete _e.f,_e.f&&(_e.f=""+Cn(E[We][1],a,xe,B,A));break}}Pe.dense?(s[xe.r]||(s[xe.r]=[]),s[xe.r][xe.c]=_e):s[f]=_e}},A={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:E,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(A.password=e.password);var k,L=[],G=[],P=[],M=[],H=!1,B=[];B.SheetNames=A.snames,B.sharedf=A.sharedf,B.arrayf=A.arrayf,B.names=[],B.XTI=[];var Q=0,j=0,O=0,W=[],K=[],se;A.codepage=1200,Xs(1200);for(var ve=!1;t.l<t.length-1;){var ie=t.l,de=t.read_shift(2);if(de===0&&Q===10)break;var ee=t.l===t.length?0:t.read_shift(2),Y=sg[de];if(Y&&Y.f){if(e.bookSheets&&Q===133&&de!==133)break;if(Q=de,Y.r===2||Y.r==12){var ge=t.read_shift(2);if(ee-=2,!A.enc&&ge!==de&&((ge&255)<<8|ge>>8)!==de)throw new Error("rt mismatch: "+ge+"!="+de);Y.r==12&&(t.l+=10,ee-=10)}var q={};if(de===10?q=Y.f(t,ee,A):q=wee(de,Y,t,ee,A),j==0&&[9,521,1033,2057].indexOf(Q)===-1)continue;switch(de){case 34:r.opts.Date1904=C.WBProps.date1904=q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(A.enc||(t.l=0),A.enc=q,!e.password)throw new Error("File is password-protected");if(q.valid==null)throw new Error("Encryption scheme unsupported");if(!q.valid)throw new Error("Password is incorrect");break;case 92:A.lastuser=q;break;case 66:var z=Number(q);switch(z){case 21010:z=1200;break;case 32768:z=1e4;break;case 32769:z=1252;break}Xs(A.codepage=z),ve=!0;break;case 317:A.rrtabid=q;break;case 25:A.winlocked=q;break;case 439:r.opts.RefreshAll=q;break;case 12:r.opts.CalcCount=q;break;case 16:r.opts.CalcDelta=q;break;case 17:r.opts.CalcIter=q;break;case 13:r.opts.CalcMode=q;break;case 14:r.opts.CalcPrecision=q;break;case 95:r.opts.CalcSaveRecalc=q;break;case 15:A.CalcRefMode=q;break;case 2211:r.opts.FullCalc=q;break;case 129:q.fDialog&&(s["!type"]="dialog"),q.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),q.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:R.push(q);break;case 430:B.push([q]),B[B.length-1].XTI=[];break;case 35:case 547:B[B.length-1].push(q);break;case 24:case 536:se={Name:q.Name,Ref:Cn(q.rgce,a,null,B,A)},q.itab>0&&(se.Sheet=q.itab-1),B.names.push(se),B[0]||(B[0]=[],B[0].XTI=[]),B[B.length-1].push(q),q.Name=="_xlnm._FilterDatabase"&&q.itab>0&&q.rgce&&q.rgce[0]&&q.rgce[0][0]&&q.rgce[0][0][0]=="PtgArea3d"&&(K[q.itab-1]={ref:qt(q.rgce[0][0][1][2])});break;case 22:A.ExternCount=q;break;case 23:B.length==0&&(B[0]=[],B[0].XTI=[]),B[B.length-1].XTI=B[B.length-1].XTI.concat(q),B.XTI=B.XTI.concat(q);break;case 2196:if(A.biff<8)break;se!=null&&(se.Comment=q[1]);break;case 18:s["!protect"]=q;break;case 19:q!==0&&A.WTF&&console.error("Password verifier: "+q);break;case 133:i[q.pos]=q,A.snames.push(q.name);break;case 10:{if(--j)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,s["!ref"]=qt(a),e.sheetRows&&e.sheetRows<=a.e.r){var J=a.e.r;a.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=qt(a),a.e.r=J}a.e.r++,a.e.c++}L.length>0&&(s["!merges"]=L),G.length>0&&(s["!objects"]=G),P.length>0&&(s["!cols"]=P),M.length>0&&(s["!rows"]=M),C.Sheets.push(_)}c===""?u=s:n[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(A.biff===8&&(A.biff={9:2,521:3,1033:4}[de]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[q.BIFFVer]||8),A.biffguess=q.BIFFVer==0,q.BIFFVer==0&&q.dt==4096&&(A.biff=5,ve=!0,Xs(A.codepage=28591)),A.biff==8&&q.BIFFVer==0&&q.dt==16&&(A.biff=2),j++)break;if(s=e.dense?[]:{},A.biff<8&&!ve&&(ve=!0,Xs(A.codepage=e.codepage||1252)),A.biff<5||q.BIFFVer==0&&q.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var he={pos:t.l-ee,name:c};i[he.pos]=he,A.snames.push(c)}else c=(i[ie]||{name:""}).name;q.dt==32&&(s["!type"]="chart"),q.dt==64&&(s["!type"]="macro"),L=[],G=[],A.arrayf=E=[],P=[],M=[],H=!1,_={Hidden:(i[ie]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[q.r]||[])[q.c]:s[Dt({c:q.c,r:q.r})])&&++q.c,S={ixfe:q.ixfe,XF:R[q.ixfe]||{},v:q.val,t:"n"},O>0&&(S.z=W[S.ixfe>>8&63]),ia(S,e,r.opts.Date1904),w({c:q.c,r:q.r},S,e);break;case 5:case 517:S={ixfe:q.ixfe,XF:R[q.ixfe],v:q.val,t:q.t},O>0&&(S.z=W[S.ixfe>>8&63]),ia(S,e,r.opts.Date1904),w({c:q.c,r:q.r},S,e);break;case 638:S={ixfe:q.ixfe,XF:R[q.ixfe],v:q.rknum,t:"n"},O>0&&(S.z=W[S.ixfe>>8&63]),ia(S,e,r.opts.Date1904),w({c:q.c,r:q.r},S,e);break;case 189:for(var re=q.c;re<=q.C;++re){var X=q.rkrec[re-q.c][0];S={ixfe:X,XF:R[X],v:q.rkrec[re-q.c][1],t:"n"},O>0&&(S.z=W[S.ixfe>>8&63]),ia(S,e,r.opts.Date1904),w({c:re,r:q.r},S,e)}break;case 6:case 518:case 1030:{if(q.val=="String"){o=q;break}if(S=kf(q.val,q.cell.ixfe,q.tt),S.XF=R[S.ixfe],e.cellFormula){var te=q.formula;if(te&&te[0]&&te[0][0]&&te[0][0][0]=="PtgExp"){var Se=te[0][0][1][0],Ee=te[0][0][1][1],be=Dt({r:Se,c:Ee});y[be]?S.f=""+Cn(q.formula,a,q.cell,B,A):S.F=((e.dense?(s[Se]||[])[Ee]:s[be])||{}).F}else S.f=""+Cn(q.formula,a,q.cell,B,A)}O>0&&(S.z=W[S.ixfe>>8&63]),ia(S,e,r.opts.Date1904),w(q.cell,S,e),o=q}break;case 7:case 519:if(o)o.val=q,S=kf(q,o.cell.ixfe,"s"),S.XF=R[S.ixfe],e.cellFormula&&(S.f=""+Cn(o.formula,a,o.cell,B,A)),O>0&&(S.z=W[S.ixfe>>8&63]),ia(S,e,r.opts.Date1904),w(o.cell,S,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{E.push(q);var ke=Dt(q[0].s);if(h=e.dense?(s[q[0].s.r]||[])[q[0].s.c]:s[ke],e.cellFormula&&h){if(!o||!ke||!h)break;h.f=""+Cn(q[1],a,q[0],B,A),h.F=qt(q[0])}}break;case 1212:{if(!e.cellFormula)break;if(f){if(!o)break;y[Dt(o.cell)]=q[0],h=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Dt(o.cell)],(h||{}).f=""+Cn(q[0],a,d,B,A)}}break;case 253:S=kf(l[q.isst].t,q.ixfe,"s"),l[q.isst].h&&(S.h=l[q.isst].h),S.XF=R[S.ixfe],O>0&&(S.z=W[S.ixfe>>8&63]),ia(S,e,r.opts.Date1904),w({c:q.c,r:q.r},S,e);break;case 513:e.sheetStubs&&(S={ixfe:q.ixfe,XF:R[q.ixfe],t:"z"},O>0&&(S.z=W[S.ixfe>>8&63]),ia(S,e,r.opts.Date1904),w({c:q.c,r:q.r},S,e));break;case 190:if(e.sheetStubs)for(var Be=q.c;Be<=q.C;++Be){var Ie=q.ixfe[Be-q.c];S={ixfe:Ie,XF:R[Ie],t:"z"},O>0&&(S.z=W[S.ixfe>>8&63]),ia(S,e,r.opts.Date1904),w({c:Be,r:q.r},S,e)}break;case 214:case 516:case 4:S=kf(q.val,q.ixfe,"s"),S.XF=R[S.ixfe],O>0&&(S.z=W[S.ixfe>>8&63]),ia(S,e,r.opts.Date1904),w({c:q.c,r:q.r},S,e);break;case 0:case 512:j===1&&(a=q);break;case 252:l=q;break;case 1054:if(A.biff==4){W[O++]=q[1];for(var je=0;je<O+163&&Ot[je]!=q[1];++je);je>=163&&Io(q[1],O+163)}else Io(q[1],q[0]);break;case 30:{W[O++]=q;for(var Ue=0;Ue<O+163&&Ot[Ue]!=q;++Ue);Ue>=163&&Io(q,O+163)}break;case 229:L=L.concat(q);break;case 93:G[q.cmo[0]]=A.lastobj=q;break;case 438:A.lastobj.TxO=q;break;case 127:A.lastobj.ImData=q;break;case 440:for(g=q[0].s.r;g<=q[0].e.r;++g)for(p=q[0].s.c;p<=q[0].e.c;++p)h=e.dense?(s[g]||[])[p]:s[Dt({c:p,r:g})],h&&(h.l=q[1]);break;case 2048:for(g=q[0].s.r;g<=q[0].e.r;++g)for(p=q[0].s.c;p<=q[0].e.c;++p)h=e.dense?(s[g]||[])[p]:s[Dt({c:p,r:g})],h&&h.l&&(h.l.Tooltip=q[1]);break;case 28:{if(A.biff<=5&&A.biff>=2)break;h=e.dense?(s[q[0].r]||[])[q[0].c]:s[Dt(q[0])];var He=G[q[2]];h||(e.dense?(s[q[0].r]||(s[q[0].r]=[]),h=s[q[0].r][q[0].c]={t:"z"}):h=s[Dt(q[0])]={t:"z"},a.e.r=Math.max(a.e.r,q[0].r),a.s.r=Math.min(a.s.r,q[0].r),a.e.c=Math.max(a.e.c,q[0].c),a.s.c=Math.min(a.s.c,q[0].c)),h.c||(h.c=[]),v={a:q[1],t:He.TxO.t},h.c.push(v)}break;case 2173:XY(R[q.ixfe],q.ext);break;case 125:{if(!A.cellStyles)break;for(;q.e>=q.s;)P[q.e--]={width:q.w/256,level:q.level||0,hidden:!!(q.flags&1)},H||(H=!0,yx(q.w/256)),cc(P[q.e+1])}break;case 520:{var qe={};q.level!=null&&(M[q.r]=qe,qe.level=q.level),q.hidden&&(M[q.r]=qe,qe.hidden=!0),q.hpt&&(M[q.r]=qe,qe.hpt=q.hpt,qe.hpx=ud(q.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Du(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[de]]=q;break;case 161:s["!margins"]||Du(s["!margins"]={}),s["!margins"].header=q.header,s["!margins"].footer=q.footer;break;case 574:q.RTL&&(C.Views[0].RTL=!0);break;case 146:D=q;break;case 2198:k=q;break;case 140:I=q;break;case 442:c?_.CodeName=q||_.name:C.WBProps.CodeName=q||"ThisWorkbook";break}}else Y||console.error("Missing Info for XLS Record 0x"+de.toString(16)),t.l+=ee}return r.SheetNames=Ta(i).sort(function(ye,xe){return Number(ye)-Number(xe)}).map(function(ye){return i[ye].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&K.forEach(function(ye,xe){r.Sheets[r.SheetNames[xe]]["!autofilter"]=ye}),r.Strings=l,r.SSF=vn(Ot),A.enc&&(r.Encryption=A.enc),k&&(r.Themes=k),r.Metadata={},I!==void 0&&(r.Metadata.Country=I),B.names.length>0&&(C.Names=B.names),r.Workbook=C,r}var W2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Iee(t,e,r){var n=Kt.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=I2(n,WK,W2.DSI);for(var i in s)e[i]=s[i]}catch(c){if(r.WTF)throw c}var a=Kt.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=I2(a,zK,W2.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(VI(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function S4(t,e){e||(e={}),Tx(e),JC(),e.codepage&&rx(e.codepage);var r,n;if(t.FullPaths){if(Kt.find(t,"/encryption"))throw new Error("File is password-protected");r=Kt.find(t,"!CompObj"),n=Kt.find(t,"/Workbook")||Kt.find(t,"/Book")}else{switch(e.type){case"base64":t=qs(Ss(t));break;case"binary":t=qs(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}dn(t,0),n={content:t}}var s,i;if(r&&Tee(r),e.bookProps&&!e.bookSheets)s={};else{var a=jt?"buffer":"array";if(n&&n.content)s=Cee(n.content,e);else if((i=Kt.find(t,"PerfectOffice_MAIN"))&&i.content)s=Iu.to_workbook(i.content,(e.type=a,e));else if((i=Kt.find(t,"NativeContent_MAIN"))&&i.content)s=Iu.to_workbook(i.content,(e.type=a,e));else throw(i=Kt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Kt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=hQ(t))}var o={};return t.FullPaths&&Iee(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}var Y0={0:{f:cZ},1:{f:hZ},2:{f:bZ},3:{f:gZ},4:{f:mZ},5:{f:_Z},6:{f:AZ},7:{f:yZ},8:{f:DZ},9:{f:kZ},10:{f:CZ},11:{f:IZ},12:{f:pZ},13:{f:SZ},14:{f:xZ},15:{f:vZ},16:{f:x4},17:{f:wZ},18:{f:EZ},19:{f:hx},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:nee},40:{},42:{},43:{f:CY},44:{f:wY},45:{f:IY},46:{f:DY},47:{f:kY},48:{},49:{f:RK},50:{},51:{f:QY},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:JI},62:{f:TZ},63:{f:rQ},64:{f:UZ},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Un,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:BZ},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:fZ},148:{f:uZ,p:16},151:{f:PZ},152:{},153:{f:tee},154:{},155:{},156:{f:eee},157:{},158:{},159:{T:1,f:zX},160:{T:-1},161:{T:1,f:Zo},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:RZ},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:YY},336:{T:-1},337:{f:JY,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Zv},357:{},358:{},359:{},360:{T:1},361:{},362:{f:QI},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:OZ},427:{f:NZ},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:MZ},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:dZ},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:FZ},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Zv},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:uQ},633:{T:1},634:{T:-1},635:{T:1,f:cQ},636:{T:-1},637:{f:PK},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:WZ},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:VZ},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},sg={6:{f:Jp},10:{f:yi},12:{f:Wr},13:{f:Wr},14:{f:Mr},15:{f:Mr},16:{f:Fn},17:{f:Mr},18:{f:Mr},19:{f:Wr},20:{f:F2},21:{f:F2},23:{f:QI},24:{f:O2},25:{f:Mr},26:{},27:{},28:{f:oX},29:{},34:{f:Mr},35:{f:P2},38:{f:Fn},39:{f:Fn},40:{f:Fn},41:{f:Fn},42:{f:Mr},43:{f:Mr},47:{f:dY},49:{f:Hq},51:{f:Wr},60:{},61:{f:Uq},64:{f:Mr},65:{f:$q},66:{f:Wr},77:{},80:{},81:{},82:{},85:{f:Wr},89:{},90:{},91:{},92:{f:Rq},93:{f:cX},94:{},95:{f:Mr},96:{},97:{},99:{f:Mr},125:{f:JI},128:{f:Jq},129:{f:Fq},130:{f:Wr},131:{f:Mr},132:{f:Mr},133:{f:Pq},134:{},140:{f:mX},141:{f:Wr},144:{},146:{f:gX},151:{},152:{},153:{},154:{},155:{},156:{f:Wr},157:{},158:{},160:{f:bX},161:{f:yX},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:qq},190:{f:Xq},193:{f:yi},197:{},198:{},199:{},200:{},201:{},202:{f:Mr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Wr},220:{},221:{f:Mr},222:{},224:{f:Qq},225:{f:Dq},226:{f:yi},227:{},229:{f:lX},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Oq},253:{f:jq},255:{f:Nq},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:WI},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Mr},353:{f:yi},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:eX},431:{f:Mr},432:{},433:{},434:{},437:{},438:{f:fX},439:{f:Mr},440:{f:hX},441:{},442:{f:Ud},443:{},444:{f:Wr},445:{},446:{},448:{f:yi},449:{f:Bq,r:2},450:{f:yi},512:{f:D2},513:{f:_X},515:{f:Zq},516:{f:Gq},517:{f:R2},519:{f:SX},520:{f:Lq},523:{},545:{f:N2},549:{f:k2},566:{},574:{f:Vq},638:{f:Kq},659:{},1048:{},1054:{f:Wq},1084:{},1212:{f:sX},2048:{f:pX},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:wf},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:yi},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:xX,r:12},2173:{f:qY,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Mr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:nX,r:12},2197:{},2198:{f:HY,r:12},2199:{},2200:{},2201:{},2202:{f:aX,r:12},2203:{f:yi},2204:{},2205:{},2206:{},2207:{},2211:{f:Mq},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Wr},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:EX},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:vX},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:D2},1:{},2:{f:CX},3:{f:wX},4:{f:AX},5:{f:R2},7:{f:IX},8:{},9:{f:wf},11:{},22:{f:Wr},30:{f:zq},31:{},32:{},33:{f:N2},36:{},37:{f:k2},50:{f:kX},62:{},52:{},67:{},68:{f:Wr},69:{},86:{},126:{},127:{f:TX},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:DX},223:{},234:{},354:{},421:{},518:{f:Jp},521:{f:wf},536:{f:O2},547:{f:P2},561:{},579:{},1030:{f:Jp},1033:{f:wf},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function $s(t,e,r,n){var s=e;if(!isNaN(s)){var i=(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&FI(r)&&t.push(r)}}function z2(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),a=s.index,o=i&&i.index||t.length,l=Zz(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,d=0,f=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(a=0;a<l.length;++a){var p=l[a].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(g!="<td"&&g!="<th")){var y=p.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var E=y[o].trim();if(E.match(/<t[dh]/i)){for(var S=E,I=0;S.charAt(0)=="<"&&(I=S.indexOf(">"))>-1;)S=S.slice(I+1);for(var R=0;R<v.length;++R){var D=v[R];D.s.c==u&&D.s.r<c&&c<=D.e.r&&(u=D.e.c+1,R=-1)}var C=_t(E.slice(0,E.indexOf(">")));f=C.colspan?+C.colspan:1,((d=+C.rowspan)>1||f>1)&&v.push({s:{r:c,c:u},e:{r:c+(d||1)-1,c:u+f-1}});var _=C.t||C["data-t"]||"";if(!S.length){u+=f;continue}if(S=yI(S),h.s.r>c&&(h.s.r=c),h.e.r<c&&(h.e.r=c),h.s.c>u&&(h.s.c=u),h.e.c<u&&(h.e.c=u),!S.length){u+=f;continue}var b={t:"s",v:S};r.raw||!S.trim().length||_=="s"||(S==="TRUE"?b={t:"b",v:!0}:S==="FALSE"?b={t:"b",v:!1}:isNaN(Zs(S))?isNaN(lc(S).getDate())||(b={t:"d",v:an(S)},r.cellDates||(b={t:"n",v:es(b.v)}),b.z=r.dateNF||Ot[14]):b={t:"n",v:Zs(S)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=b):n[Dt({r:c,c:u})]=b,u+=f}}}}return n["!ref"]=qt(h),v.length&&(n["!merges"]=v),n}function kee(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var u=Dt({r,c:a}),d=n.dense?(t[r]||[])[a]:t[u],f=d&&d.v!=null&&(d.h||lx(d.w||(ii(d),d.w)||""))||"",h={};o>1&&(h.rowspan=o),l>1&&(h.colspan=l),n.editable?f='<span contenteditable="true">'+f+"</span>":d&&(h["data-t"]=d&&d.t||"z",d.v!=null&&(h["data-v"]=d.v),d.z!=null&&(h["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+d.l.Target+'">'+f+"</a>")),h.id=(n.id||"sjs")+"-"+u,i.push(mK("td",f,h))}}var v="<tr>";return v+i.join("")+"</tr>"}var Dee='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Ree="</body></html>";function Fee(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return so(z2(r[0],e),e);var n=wx();return r.forEach(function(s,i){Cx(n,z2(s,e),"Sheet"+(i+1))}),n}function Pee(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Oee(t,e){var r=e||{},n=r.header!=null?r.header:Dee,s=r.footer!=null?r.footer:Ree,i=[n],a=_c(t["!ref"]);r.dense=Array.isArray(t),i.push(Pee(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(kee(t,a,o,r));return i.push("</table>"+s),i.join("")}function T4(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?Yn(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var u=_c(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),s==-1&&(c.e.r=s=u.e.r+1)}var d=[],f=0,h=t["!rows"]||(t["!rows"]=[]),v=0,p=0,g=0,y=0,E=0,S=0;for(t["!cols"]||(t["!cols"]=[]);v<o.length&&p<l;++v){var I=o[v];if(K2(I)){if(n.display)continue;h[p]={hidden:!0}}var R=I.children;for(g=y=0;g<R.length;++g){var D=R[g];if(!(n.display&&K2(D))){var C=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):yI(D.innerHTML),_=D.getAttribute("data-z")||D.getAttribute("z");for(f=0;f<d.length;++f){var b=d[f];b.s.c==y+i&&b.s.r<p+s&&p+s<=b.e.r&&(y=b.e.c+1-i,f=-1)}S=+D.getAttribute("colspan")||1,((E=+D.getAttribute("rowspan")||1)>1||S>1)&&d.push({s:{r:p+s,c:y+i},e:{r:p+s+(E||1)-1,c:y+i+(S||1)-1}});var x={t:"s",v:C},w=D.getAttribute("data-t")||D.getAttribute("t")||"";C!=null&&(C.length==0?x.t=w||"z":n.raw||C.trim().length==0||w=="s"||(C==="TRUE"?x={t:"b",v:!0}:C==="FALSE"?x={t:"b",v:!1}:isNaN(Zs(C))?isNaN(lc(C).getDate())||(x={t:"d",v:an(C)},n.cellDates||(x={t:"n",v:es(x.v)}),x.z=n.dateNF||Ot[14]):x={t:"n",v:Zs(C)})),x.z===void 0&&_!=null&&(x.z=_);var A="",k=D.getElementsByTagName("A");if(k&&k.length)for(var L=0;L<k.length&&!(k[L].hasAttribute("href")&&(A=k[L].getAttribute("href"),A.charAt(0)!="#"));++L);A&&A.charAt(0)!="#"&&(x.l={Target:A}),n.dense?(t[p+s]||(t[p+s]=[]),t[p+s][y+i]=x):t[Dt({c:y+i,r:p+s})]=x,c.e.c<y+i&&(c.e.c=y+i),y+=S}}++p}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,p-1+s),t["!ref"]=qt(c),p>=l&&(t["!fullref"]=qt((c.e.r=o.length-v+p-1+s,c))),t}function A4(t,e){var r=e||{},n=r.dense?[]:{};return T4(n,t,e)}function Nee(t,e){return so(A4(t,e),e)}function K2(t){var e="",r=Lee(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Lee(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Mee(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Xt(e.replace(/<[^>]*>/g,""));return[r]}var q2={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function w4(t,e){var r=e||{},n=cx(t),s=[],i,a,o={name:""},l="",c=0,u,d,f={},h=[],v=r.dense?[]:{},p,g,y={value:""},E="",S=0,I=[],R=-1,D=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,b={},x=[],w={},A=0,k=0,L=[],G=1,P=1,M=[],H={Names:[]},B={},Q=["",""],j=[],O={},W="",K=0,se=!1,ve=!1,ie=0;for(od.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=od.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?v["!ref"]=qt(C):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(v["!fullref"]=v["!ref"],C.e.r=r.sheetRows-1,v["!ref"]=qt(C)),x.length&&(v["!merges"]=x),L.length&&(v["!rows"]=L),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),h.push(u.name),f[u.name]=v,ve=!1):p[0].charAt(p[0].length-2)!=="/"&&(u=_t(p[0],!1),R=D=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,v=r.dense?[]:{},x=[],L=[],ve=!0);break;case"table-row-group":p[1]==="/"?--_:++_;break;case"table-row":case"":if(p[1]==="/"){R+=G,G=1;break}if(d=_t(p[0],!1),d.?R=d.-1:R==-1&&(R=0),G=+d["number-rows-repeated"]||1,G<10)for(ie=0;ie<G;++ie)_>0&&(L[R+ie]={level:_});D=-1;break;case"covered-table-cell":p[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(v[R]||(v[R]=[]),v[R][D]={t:"z"}):v[Dt({r:R,c:D})]={t:"z"}),E="",I=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++D,y=_t(p[0],!1),P=parseInt(y["number-columns-repeated"]||"1",10),g={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(g.f=H2(Xt(y.formula))),(y.||y["value-type"])=="string"&&(g.t="s",g.v=Xt(y["string-value"]||""),r.dense?(v[R]||(v[R]=[]),v[R][D]=g):v[Dt({r:R,c:D})]=g),D+=P-1;else if(p[1]!=="/"){++D,E="",S=0,I=[],P=1;var de=G?R+G-1:R;if(D>C.e.c&&(C.e.c=D),D<C.s.c&&(C.s.c=D),R<C.s.r&&(C.s.r=R),de>C.e.r&&(C.e.r=de),y=_t(p[0],!1),j=[],O={},g={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Xt(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(A=parseInt(y["number-matrix-rows-spanned"],10)||0,k=parseInt(y["number-matrix-columns-spanned"],10)||0,w={s:{r:R,c:D},e:{r:R+A-1,c:D+k-1}},g.F=qt(w),M.push([w,g.F])),y.formula)g.f=H2(y.formula);else for(ie=0;ie<M.length;++ie)R>=M[ie][0].s.r&&R<=M[ie][0].e.r&&D>=M[ie][0].s.c&&D<=M[ie][0].e.c&&(g.F=M[ie][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(A=parseInt(y["number-rows-spanned"],10)||0,k=parseInt(y["number-columns-spanned"],10)||0,w={s:{r:R,c:D},e:{r:R+A-1,c:D+k-1}},x.push(w)),y["number-columns-repeated"]&&(P=parseInt(y["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=_r(y["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(y.value);break;case"percentage":g.t="n",g.v=parseFloat(y.value);break;case"currency":g.t="n",g.v=parseFloat(y.value);break;case"date":g.t="d",g.v=an(y["date-value"]),r.cellDates||(g.t="n",g.v=es(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=Yz(y["time-value"])/86400,r.cellDates&&(g.t="d",g.v=ep(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(y.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",y["string-value"]!=null&&(E=Xt(y["string-value"]),I=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(se=!1,g.t==="s"&&(g.v=E||"",I.length&&(g.R=I),se=S==0),B.Target&&(g.l=B),j.length>0&&(g.c=j,j=[]),E&&r.cellText!==!1&&(g.w=E),se&&(g.t="z",delete g.v),(!se||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=R))for(var ee=0;ee<G;++ee){if(P=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(v[R+ee]||(v[R+ee]=[]),v[R+ee][D]=ee==0?g:vn(g);--P>0;)v[R+ee][D+P]=vn(g);else for(v[Dt({r:R+ee,c:D})]=g;--P>0;)v[Dt({r:R+ee,c:D+P})]=vn(g);C.e.c<=D&&(C.e.c=D)}P=parseInt(y["number-columns-repeated"]||"1",10),D+=P-1,P=0,g={},E="",I=[]}B={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((i=s.pop())[0]!==p[3])throw"Bad state: "+i}else p[0].charAt(p[0].length-2)!=="/"&&s.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((i=s.pop())[0]!==p[3])throw"Bad state: "+i;O.t=E,I.length&&(O.R=I),O.a=W,j.push(O)}else p[0].charAt(p[0].length-2)!=="/"&&s.push([p[3],!1]);W="",K=0,E="",S=0,I=[];break;case"creator":p[1]==="/"?W=n.slice(K,p.index):K=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((i=s.pop())[0]!==p[3])throw"Bad state: "+i}else p[0].charAt(p[0].length-2)!=="/"&&s.push([p[3],!1]);E="",S=0,I=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(b[o.name]=l,(i=s.pop())[0]!==p[3])throw"Bad state: "+i}else p[0].charAt(p[0].length-2)!=="/"&&(l="",o=_t(p[0],!1),s.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":a=_t(p[0],!1),l+=q2[p[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":a=_t(p[0],!1),l+=q2[p[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,p.index);break}else c=p.index+p[0].length;break;case"named-range":a=_t(p[0],!1),Q=Zp(a["cell-range-address"]);var Y={Name:a.name,Ref:Q[0]+"!"+Q[1]};ve&&(Y.Sheet=h.length),H.Names.push(Y);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(p[1]==="/"&&(!y||!y["string-value"])){var ge=Mee(n.slice(S,p.index));E=(E.length>0?E+`
`:"")+ge[0]}else _t(p[0],!1),S=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{Q=Zp(_t(p[0])["target-range-address"]),f[Q[0]]["!autofilter"]={ref:Q[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(B=_t(p[0],!1),!B.href)break;B.Target=Xt(B.href),delete B.href,B.Target.charAt(0)=="#"&&B.Target.indexOf(".")>-1?(Q=Zp(B.Target.slice(1)),B.Target="#"+Q[0]+"!"+Q[1]):B.Target.match(/^\.\.[\\\/]/)&&(B.Target=B.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var q={Sheets:f,SheetNames:h,Workbook:H};return r.bookSheets&&delete q.Sheets,q}function X2(t,e){e=e||{},Is(t,"META-INF/manifest.xml")&&ZK(Gr(t,"META-INF/manifest.xml"),e);var r=ms(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=w4(pr(r),e);return Is(t,"meta.xml")&&(n.Props=UI(Gr(t,"meta.xml"))),n}function Y2(t,e){return w4(t,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function bx(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ag(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):pr(Qo(t))}function ig(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function Q2(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Bee(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function dd(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function tn(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Nn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=dd(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=dd(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function Sx(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Uee(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=dd(t,n),i=Nn(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:tn(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=Nn(o.data),c=tn(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=tn(i[3][0].data)>>>0>0),r.push(a)}return r}function Vee(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=dd(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[ig(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var u=ig(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function $ee(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(Vee(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return ig(e)}function Hee(t,e,r,n){var s=bx(t),i=s.getUint32(4,!0),a=(n>1?12:8)+Q2(i&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);i&512&&(o=s.getUint32(a,!0),a+=4),a+=Q2(i&(n>1?12288:4096))*4,i&16&&(l=s.getUint32(a,!0),a+=4),i&32&&(c=s.getFloat64(a,!0),a+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(a,!0)*1e3),a+=8);var d;switch(t[2]){case 0:break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:e[l]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else if(l>-1)d={t:"s",v:e[l]};else if(!isNaN(c))d={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return d}function jee(t,e,r){var n=bx(t),s=n.getUint32(8,!0),i=12,a=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);s&1&&(l=Bee(t,i),i+=16),s&2&&(c=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=n.getUint32(i,!0),i+=4),s&16&&(a=n.getUint32(i,!0),i+=4);var d;switch(t[1]){case 0:break;case 2:d={t:"n",v:l};break;case 3:d={t:"s",v:e[o]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(a>-1)d={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:d={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return d}function Gee(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return Hee(t,e,r,t[0]);case 5:return jee(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Wi(t){var e=Nn(t);return dd(e[1][0].data)}function J2(t,e){var r=Nn(e.data),n=tn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(a){var o=Nn(a.data),l=tn(o[1][0].data)>>>0;switch(n){case 1:i[l]=ag(o[3][0].data);break;case 8:{var c=t[Wi(o[9][0].data)][0],u=Nn(c.data),d=t[Wi(u[1][0].data)][0],f=tn(d.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var h=Nn(d.data);i[l]=h[3].map(function(v){return ag(v.data)}).join("")}break}}),i}function Wee(t,e){var r,n,s,i,a,o,l,c,u,d,f,h,v,p,g=Nn(t),y=tn(g[1][0].data)>>>0,E=tn(g[2][0].data)>>>0,S=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&tn(g[8][0].data)>0||!1,I,R;if((i=(s=g[7])==null?void 0:s[0])!=null&&i.data&&e!=0)I=(o=(a=g[7])==null?void 0:a[0])==null?void 0:o.data,R=(c=(l=g[6])==null?void 0:l[0])==null?void 0:c.data;else if((d=(u=g[4])==null?void 0:u[0])!=null&&d.data&&e!=1)I=(h=(f=g[4])==null?void 0:f[0])==null?void 0:h.data,R=(p=(v=g[3])==null?void 0:v[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var D=S?4:1,C=bx(I),_=[],b=0;b<I.length/2;++b){var x=C.getUint16(b*2,!0);x<65535&&_.push([b,x])}if(_.length!=E)throw"Expected ".concat(E," cells, found ").concat(_.length);var w=[];for(b=0;b<_.length-1;++b)w[_[b][0]]=R.subarray(_[b][1]*D,_[b+1][1]*D);return _.length>=1&&(w[_[_.length-1][0]]=R.subarray(_[_.length-1][1]*D)),{R:y,cells:w}}function zee(t,e){var r,n=Nn(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?tn(n[7][0].data)>>>0>0?1:0:-1,i=Sx(n[5],function(a){return Wee(a,s)});return{nrows:tn(n[4][0].data)>>>0,data:i.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function Kee(t,e,r){var n,s=Nn(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(tn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(tn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=qt(i);var a=Nn(s[4][0].data),o=J2(t,t[Wi(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?J2(t,t[Wi(a[17][0].data)][0]):[],c=Nn(a[3][0].data),u=0;c[1].forEach(function(d){var f=Nn(d.data),h=t[Wi(f[2][0].data)][0],v=tn(h.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var p=zee(t,h);p.data.forEach(function(g,y){g.forEach(function(E,S){var I=Dt({r:u+y,c:S}),R=Gee(E,o,l);R&&(r[I]=R)})}),u+=p.nrows})}function qee(t,e){var r=Nn(e.data),n={"!ref":"A1"},s=t[Wi(r[2][0].data)],i=tn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Kee(t,s[0],n),n}function Xee(t,e){var r,n=Nn(e.data),s={name:(r=n[1])!=null&&r[0]?ag(n[1][0].data):"",sheets:[]},i=Sx(n[2],Wi);return i.forEach(function(a){t[a].forEach(function(o){var l=tn(o.meta[1][0].data);l==6e3&&s.sheets.push(qee(t,o))})}),s}function Yee(t,e){var r=wx(),n=Nn(e.data),s=Sx(n[1],Wi);if(s.forEach(function(i){t[i].forEach(function(a){var o=tn(a.meta[1][0].data);if(o==2){var l=Xee(t,a);l.sheets.forEach(function(c,u){Cx(r,c,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function tm(t){var e,r,n,s,i={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=$ee(l.content)}catch(d){return console.log("?? "+l.content.length+" "+(d.message||d))}var u;try{u=Uee(c)}catch(d){return console.log("## "+(d.message||d))}u.forEach(function(d){i[d.id]=d.messages,a.push(d.id)})}}),!a.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&tn(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||a.forEach(function(l){i[l].forEach(function(c){var u=tn(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Yee(i,o)}function Qee(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function Tx(t){Qee([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function Jee(t){return Il.WS.indexOf(t)>-1?"sheet":t==Il.CS?"chart":t==Il.DS?"dialog":t==Il.MS?"macro":t&&t.length?t:"sheet"}function Zee(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,Jee(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function ete(t,e,r,n,s,i,a,o,l,c,u,d){try{i[n]=wu(ms(t,r,!0),e);var f=Gr(t,e),h;switch(o){case"sheet":h=iee(f,e,s,l,i[n],c,u,d);break;case"chart":if(h=oee(f,e,s,l,i[n],c,u,d),!h||!h["!drawel"])break;var v=eu(h["!drawel"].Target,e),p=eg(v),g=aQ(ms(t,v,!0),wu(ms(t,p,!0),v)),y=eu(g,v),E=eg(y);h=jZ(ms(t,y,!0),y,l,wu(ms(t,E,!0),y),c,h);break;case"macro":h=lee(f,e,s,l,i[n],c,u,d);break;case"dialog":h=cee(f,e,s,l,i[n],c,u,d);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=h;var S=[];i&&i[n]&&Ta(i[n]).forEach(function(I){var R="";if(i[n][I].Type==Il.CMNT){R=eu(i[n][I].Target,e);var D=hee(Gr(t,R,!0),R,l);if(!D||!D.length)return;M2(h,D,!1)}i[n][I].Type==Il.TCMNT&&(R=eu(i[n][I].Target,e),S=S.concat(oQ(Gr(t,R,!0),l)))}),S&&S.length&&M2(h,S,!0,l.people||[])}catch(I){if(l.WTF)throw I}}function As(t){return t.charAt(0)=="/"?t.slice(1):t}function tte(t,e){if(uI(),e=e||{},Tx(e),Is(t,"META-INF/manifest.xml")||Is(t,"objectdata.xml"))return X2(t,e);if(Is(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof tm<"u"){if(t.FileIndex)return tm(t);var r=Kt.utils.cfb_new();return u2(t).forEach(function(L){rK(r,L,tK(t,L))}),tm(r)}throw new Error("Unsupported NUMBERS file")}if(!Is(t,"[Content_Types].xml"))throw Is(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Is(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=u2(t),s=QK(ms(t,"[Content_Types].xml")),i=!1,a,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Gr(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Gr(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(ku=[],s.sst)try{ku=fee(Gr(t,As(s.sst)),s.sst,e)}catch(L){if(e.WTF)throw L}e.cellStyles&&s.themes.length&&(l=dee(ms(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=uee(Gr(t,As(s.style)),s.style,l,e))}s.links.map(function(L){try{var G=wu(ms(t,eg(As(L))),L);return mee(Gr(t,As(L)),G,L,e)}catch{}});var u=aee(Gr(t,As(s.workbooks[0])),s.workbooks[0],e),d={},f="";s.coreprops.length&&(f=Gr(t,As(s.coreprops[0]),!0),f&&(d=UI(f)),s.extprops.length!==0&&(f=Gr(t,As(s.extprops[0]),!0),f&&rq(f,d,e)));var h={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(f=ms(t,As(s.custprops[0]),!0),f&&(h=sq(f,e)));var v={};if((e.bookSheets||e.bookProps)&&(u.Sheets?a=u.Sheets.map(function(G){return G.name}):d.Worksheets&&d.SheetNames.length>0&&(a=d.SheetNames),e.bookProps&&(v.Props=d,v.Custprops=h),e.bookSheets&&typeof a<"u"&&(v.SheetNames=a),e.bookSheets?v.SheetNames:e.bookProps))return v;a={};var p={};e.bookDeps&&s.calcchain&&(p=pee(Gr(t,As(s.calcchain)),s.calcchain));var g=0,y={},E,S;{var I=u.Sheets;d.Worksheets=I.length,d.SheetNames=[];for(var R=0;R!=I.length;++R)d.SheetNames[R]=I[R].name}var D=i?"bin":"xml",C=s.workbooks[0].lastIndexOf("/"),_=(s.workbooks[0].slice(0,C+1)+"_rels/"+s.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");Is(t,_)||(_="xl/_rels/workbook."+D+".rels");var b=wu(ms(t,_,!0),_.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=vee(Gr(t,As(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=lQ(Gr(t,As(s.people[0])),e)),b&&(b=Zee(b,u.Sheets));var x=Gr(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=d.Worksheets;++g){var w="sheet";if(b&&b[g]?(E="xl/"+b[g][1].replace(/[\/]?xl\//,""),Is(t,E)||(E=b[g][1]),Is(t,E)||(E=_.replace(/_rels\/.*$/,"")+b[g][1]),w=b[g][2]):(E="xl/worksheets/sheet"+(g+1-x)+"."+D,E=E.replace(/sheet0\./,"sheet.")),S=E.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(d.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var A=!1,k=0;k!=e.sheets.length;++k)typeof e.sheets[k]=="number"&&e.sheets[k]==g&&(A=1),typeof e.sheets[k]=="string"&&e.sheets[k].toLowerCase()==d.SheetNames[g].toLowerCase()&&(A=1);if(!A)continue e}}ete(t,E,S,d.SheetNames[g],g,y,a,w,e,u,l,c)}return v={Directory:s,Workbook:u,Props:d,Custprops:h,Deps:p,Sheets:a,SheetNames:d.SheetNames,Strings:ku,Styles:c,Themes:l,SSF:vn(Ot)},e&&e.bookFiles&&(t.files?(v.keys=n,v.files=t.files):(v.keys=[],v.files={},t.FullPaths.forEach(function(L,G){L=L.replace(/^Root Entry[\/]/,""),v.keys.push(L),v.files[L]=t.FileIndex[G]}))),e&&e.bookVBA&&(s.vba.length>0?v.vbaraw=Gr(t,As(s.vba[0]),!0):s.defaults&&s.defaults.bin===fQ&&(v.vbaraw=Gr(t,"xl/vbaProject.bin",!0))),v}function rte(t,e){var r=e||{},n="Workbook",s=Kt.find(t,n);try{if(n="/!DataSpaces/Version",s=Kt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(qX(s.content),n="/!DataSpaces/DataSpaceMap",s=Kt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=YX(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Kt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=QX(s.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Kt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);ZX(s.content)}catch{}if(n="/EncryptionInfo",s=Kt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=eY(s.content);if(n="/EncryptedPackage",s=Kt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Ax(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Ss(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function nte(t,e){return Kt.find(t,"EncryptedPackage")?rte(t,e):S4(t,e)}function ste(t,e){var r,n=t,s=e||{};return s.type||(s.type=jt&&Buffer.isBuffer(t)?"buffer":"base64"),r=vI(n,s),tte(r,s)}function C4(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return ng(t.slice(r),e);default:break e}return ld.to_workbook(t,e)}function ate(t,e){var r="",n=Ax(t,e);switch(e.type){case"base64":r=Ss(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Vo(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=pr(r)),e.type="binary",C4(r,e)}function ite(t,e){var r=t;return e.type=="base64"&&(r=Ss(r)),r=sd.utils.decode(1200,r.slice(2),"str"),e.type="binary",C4(r,e)}function ote(t){return t.match(/[^\x00-\x7F]/)?tu(t):t}function rm(t,e,r,n){return n?(r.type="string",ld.to_workbook(t,r)):ld.to_workbook(e,r)}function Q0(t,e){JC();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Q0(new Uint8Array(t),(r=vn(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),zl={},r.dateNF&&(zl.dateNF=r.dateNF),r.type||(r.type=jt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=jt?"buffer":"binary",n=qz(t),typeof Uint8Array<"u"&&!jt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=ote(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=vn(r),r.type="array",Q0(nx(n),r)}switch((s=Ax(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return nte(Kt.read(n,r),r);break;case 9:if(s[1]<=8)return S4(n,r);break;case 60:return ng(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return NX(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return PX.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?ste(n,r):rm(t,n,r,i);case 239:return s[3]===60?ng(n,r):rm(t,n,r,i);case 255:if(s[1]===254)return ite(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Iu.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Iu.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return L2.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return fY.to_workbook(n,r);break;case 10:case 13:case 32:return ate(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return RX.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?L2.to_workbook(n,r):rm(t,n,r,i)}function lte(t,e,r,n,s,i,a,o){var l=gn(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,f=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!a||t[r])for(var h=e.s.c;h<=e.e.c;++h){var v=a?t[r][h]:t[n[h]+l];if(v===void 0||v.t===void 0){if(c===void 0)continue;i[h]!=null&&(f[i[h]]=c);continue}var p=v.v;switch(v.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[h]!=null){if(p==null)if(v.t=="e"&&p===null)f[i[h]]=null;else if(c!==void 0)f[i[h]]=c;else if(u&&p===null)f[i[h]]=null;else continue;else f[i[h]]=u&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?p:ii(v,p,o);p!=null&&(d=!1)}}return{row:f,isempty:d}}function og(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=Nr(u);break;case"number":l=Nr(t["!ref"]),l.s.r=u;break;default:l=u}n>0&&(s=0);var d=gn(l.s.r),f=[],h=[],v=0,p=0,g=Array.isArray(t),y=l.s.r,E=0,S={};g&&!t[y]&&(t[y]=[]);var I=c.skipHidden&&t["!cols"]||[],R=c.skipHidden&&t["!rows"]||[];for(E=l.s.c;E<=l.e.c;++E)if(!(I[E]||{}).hidden)switch(f[E]=Zr(E),r=g?t[y][E]:t[f[E]+d],n){case 1:i[E]=E-l.s.c;break;case 2:i[E]=f[E];break;case 3:i[E]=c.header[E-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=ii(r,null,c),p=S[a]||0,!p)S[a]=1;else{do o=a+"_"+p++;while(S[o]);S[a]=p,S[o]=1}i[E]=o}for(y=l.s.r+s;y<=l.e.r;++y)if(!(R[y]||{}).hidden){var D=lte(t,l,y,f,n,i,g,c);(D.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(h[v++]=D.row)}return h.length=v,h}var Z2=/"/g;function cte(t,e,r,n,s,i,a,o){for(var l=!0,c=[],u="",d=gn(r),f=e.s.c;f<=e.e.c;++f)if(n[f]){var h=o.dense?(t[r]||[])[f]:t[n[f]+d];if(h==null)u="";else if(h.v!=null){l=!1,u=""+(o.rawNumbers&&h.t=="n"?h.v:ii(h,null,o));for(var v=0,p=0;v!==u.length;++v)if((p=u.charCodeAt(v))===s||p===i||p===34||o.forceQuotes){u='"'+u.replace(Z2,'""')+'"';break}u=="ID"&&(u='"ID"')}else h.f!=null&&!h.F?(l=!1,u="="+h.f,u.indexOf(",")>=0&&(u='"'+u.replace(Z2,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(a)}function I4(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Nr(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),u="",d=[];n.dense=Array.isArray(t);for(var f=n.skipHidden&&t["!cols"]||[],h=n.skipHidden&&t["!rows"]||[],v=s.s.c;v<=s.e.c;++v)(f[v]||{}).hidden||(d[v]=Zr(v));for(var p=0,g=s.s.r;g<=s.e.r;++g)(h[g]||{}).hidden||(u=cte(t,s,g,d,a,l,i,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((p++?o:"")+u)));return delete n.dense,r.join("")}function ute(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=I4(t,e);return r}function dte(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Nr(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=Zr(o);for(var u=s.s.r;u<=s.e.r;++u)for(i=gn(u),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[u]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function k4(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Yn(n.origin):n.origin;a=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var d=Nr(i["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),a==-1&&(a=d.e.r+1,u.e.r=a+e.length-1+s)}else a==-1&&(a=0,u.e.r=e.length-1+s);var f=n.header||[],h=0;e.forEach(function(p,g){Ta(p).forEach(function(y){(h=f.indexOf(y))==-1&&(f[h=f.length]=y);var E=p[y],S="z",I="",R=Dt({c:o+h,r:a+g+s});c=fd(i,R),E&&typeof E=="object"&&!(E instanceof Date)?i[R]=E:(typeof E=="number"?S="n":typeof E=="boolean"?S="b":typeof E=="string"?S="s":E instanceof Date?(S="d",n.cellDates||(S="n",E=es(E)),I=n.dateNF||Ot[14]):E===null&&n.nullError&&(S="e",E=0),c?(c.t=S,c.v=E,delete c.w,delete c.R,I&&(c.z=I)):i[R]=c={t:S,v:E},I&&(c.z=I))})}),u.e.c=Math.max(u.e.c,o+f.length-1);var v=gn(a);if(s)for(h=0;h<f.length;++h)i[Zr(h+o)+v]={t:"s",v:f[h]};return i["!ref"]=qt(u),i}function fte(t,e){return k4(null,t,e)}function fd(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Yn(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?fd(t,Dt(e)):fd(t,Dt({r:e,c:r||0}))}function hte(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function wx(){return{SheetNames:[],Sheets:{}}}function Cx(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(QZ(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function pte(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=hte(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function mte(t,e){return t.z=e,t}function D4(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function vte(t,e,r){return D4(t,"#"+e,r)}function gte(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function xte(t,e,r,n){for(var s=typeof e!="string"?e:Nr(e),i=typeof e=="string"?e:qt(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=fd(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var yte={encode_col:Zr,encode_row:gn,encode_cell:Dt,encode_range:qt,decode_col:fx,decode_row:dx,split_cell:DK,decode_cell:Yn,decode_range:_c,format_cell:ii,sheet_add_aoa:OI,sheet_add_json:k4,sheet_add_dom:T4,aoa_to_sheet:bc,json_to_sheet:fte,table_to_sheet:A4,table_to_book:Nee,sheet_to_csv:I4,sheet_to_txt:ute,sheet_to_json:og,sheet_to_html:Oee,sheet_to_formulae:dte,sheet_to_row_object_array:og,sheet_get_cell:fd,book_new:wx,book_append_sheet:Cx,book_set_sheet_visibility:pte,cell_set_number_format:mte,cell_set_hyperlink:D4,cell_set_internal_link:vte,cell_add_comment:gte,sheet_set_array_formula:xte,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Ete={class:"admin-time-table"},_te={class:"header"},bte={class:"header-actions"},Ste=["disabled"],Tte={class:"import-section"},Ate={key:0,class:"import-preview"},wte={class:"import-options"},Cte={class:"import-option-group"},Ite=["disabled"],kte=["value"],Dte={class:"import-option-group"},Rte=["disabled"],Fte={class:"import-actions"},Pte=["disabled"],Ote={class:"content"},Nte={key:0,class:"loading"},Lte={key:1,class:"time-tables-container"},Mte={key:0,class:"empty-state"},Bte={key:1,class:"time-tables-list"},Ute={class:"time-table-header"},Vte={class:"time-table-info"},$te={class:"time-table-days"},Hte={class:"time-table-actions"},jte=["onClick"],Gte=["onClick"],Wte={class:"time-table-schedule"},zte={class:"schedule-item-info"},Kte={class:"item-name"},qte={class:"item-time"},Xte={class:"schedule-item-type"},Yte={class:"dialog-header"},Qte={class:"dialog-content"},Jte={class:"form-group"},Zte={class:"form-group"},ere={class:"days-checkboxes"},tre=["value"],rre={class:"form-group"},nre={class:"schedule-items"},sre={class:"item-row"},are=["onUpdate:modelValue"],ire=["onUpdate:modelValue"],ore=["onUpdate:modelValue"],lre=["onUpdate:modelValue"],cre=["onClick"],ure={__name:"AdminTimeTable",setup(t){const{saveAppSettings:e}=ka(),r=pe(!0),n=pe(!1),s=pe([]),i=pe(!1),a=pe(-1),o=pe({name:"",days:[],schedule:[]}),l=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],c=pe(null),u=pe([]),d=pe([]),f=pe("overwrite"),h=pe(""),v=pe(""),p=Ae(()=>f.value==="overwrite"?h.value!=="":v.value.trim()!==""),g=()=>{const M=Ar(o.value.name,{trim:!0,maxLength:100,removeDangerous:!0}),H=sn(M);if(!H.isSafe)return alert(`Security threat detected in time table name: ${H.threats.join(", ")}`),!1;if(o.value.name=M,!o.value.name.trim())return alert("Please enter a time table name"),!1;if(o.value.days.length===0)return alert("Please select at least one day"),!1;if(o.value.schedule.length===0)return alert("Please add at least one schedule item"),!1;for(let B=0;B<o.value.schedule.length;B++){const Q=o.value.schedule[B],j=Ar(Q.name,{trim:!0,maxLength:50,removeDangerous:!0}),O=sn(j);if(!O.isSafe)return alert(`Security threat detected in schedule item ${B+1}: ${O.threats.join(", ")}`),!1;if(Q.name=j,!Q.name.trim())return alert(`Please enter a name for schedule item ${B+1}`),!1;if(!Q.startTime||!Q.endTime)return alert(`Please enter start and end times for ${Q.name}`),!1;if(Q.startTime>=Q.endTime)return alert(`${Q.name}: Start time must be before end time`),!1}return!0},y=M=>{const H=Ar(M,{trim:!0,maxLength:100,removeDangerous:!0}),B=sn(H);return B.isSafe?H:(alert(`Security threat detected in import name: ${B.threats.join(", ")}`),null)};async function E(){try{console.log("Loading time tables..."),r.value=!0;const M=await Vr(vt(ht,"app_settings","global"));if(M.exists()){const H=M.data();s.value=H.timeTables||[],console.log("Loaded time tables:",s.value)}else s.value=[],console.log("No time tables found, starting with empty array");r.value=!1}catch(M){console.error("Error loading time tables:",M),r.value=!1}}function S(){a.value=-1,o.value={name:"",days:[],schedule:[]},i.value=!0}function I(M){a.value=M,o.value=JSON.parse(JSON.stringify(s.value[M])),i.value=!0}function R(M){confirm("Are you sure you want to delete this time table?")&&s.value.splice(M,1)}function D(){o.value.schedule.push({name:"",type:"period",startTime:"",endTime:""})}function C(M){o.value.schedule.splice(M,1)}function _(){if(!g())return;if(!ys("saveTimeTable",10,6e4).allowed){alert("Too many save requests. Please wait before saving again.");return}a.value===-1?s.value.push(JSON.parse(JSON.stringify(o.value))):s.value[a.value]=JSON.parse(JSON.stringify(o.value)),b()}function b(){i.value=!1,a.value=-1,o.value={name:"",days:[],schedule:[]}}async function x(){try{if(!ys("saveAllTimeTables",5,3e5).allowed){alert("Too many save all requests. Please wait before saving again.");return}n.value=!0,console.log("Saving time tables:",s.value);const H=await Vr(vt(ht,"app_settings","global")),Q={...H.exists()?H.data():{},timeTables:s.value};await e(Q),n.value=!1,console.log("Time tables saved successfully")}catch(M){console.error("Error saving time tables:",M),n.value=!1}}function w(M){return M.length===0?"No days selected":M.length===7?"Every day":M.length===5&&M.includes("monday")&&M.includes("friday")?"Weekdays":M.map(H=>{const B=l.find(Q=>Q.value===H);return B?B.label:H}).join(", ")}function A(M){if(!M)return"";const[H,B]=M.split(":"),Q=parseInt(H),j=Q>=12?"PM":"AM";return`${Q===0?12:Q>12?Q-12:Q}:${B} ${j}`}function k(){c.value&&c.value.click()}function L(M){const H=M.target.files[0];if(!H)return;const B=Ld(H,{allowedTypes:["csv","excel"],maxSize:5*1024*1024,fieldName:"Time Table Import File"});if(!B.isValid){alert(B.error),M.target.value="";return}const Q=sn(H.name);if(!Q.isSafe){alert(`File name contains potentially dangerous content: ${Q.threats.join(", ")}`),M.target.value="";return}const j=new FileReader;j.onload=O=>{try{let W=O.target.result,K;H.name.endsWith(".csv")?K=Q0(W,{type:"binary"}):K=Q0(W,{type:"binary"});const se=K.SheetNames[0],ve=K.Sheets[se],de=yte.sheet_to_json(ve,{defval:""}).map(ee=>{const Y={};return Object.entries(ee).forEach(([ge,q])=>{const z=Ar(ge,{trim:!0,maxLength:50,removeDangerous:!0}),J=Ar(String(q),{trim:!0,maxLength:100,removeDangerous:!0});Y[z]=J}),Y});u.value=de,d.value=de.length?Object.keys(de[0]):[]}catch(W){alert("Error parsing file. Please check the file format and try again."),console.error("File parsing error:",W)}},j.readAsBinaryString(H)}function G(){try{if(!ys("importTimeTable",3,3e5).allowed){alert("Too many import requests. Please wait before importing again.");return}const H=u.value.map(B=>{const Q=B.name||B.Name||B.period||B.Period||B.item||B.Item||"Unknown",j=B.startTime||B["Start Time"]||B.start||B.Start||"08:00",O=B.endTime||B["End Time"]||B.end||B.End||"08:55",W=Ar(Q,{trim:!0,maxLength:50,removeDangerous:!0}),K=sn(W);if(!K.isSafe)return console.warn(`Security threat detected in imported item: ${K.threats.join(", ")}`),null;let se="period";const ve=B.type||B.Type||"",ie=W.toLowerCase();return ve.toLowerCase().includes("lunch")||ie.includes("lunch")?se="lunch":ve.toLowerCase().includes("break")||ie.includes("break")?se="break":(ve.toLowerCase().includes("other")||ie.includes("other"))&&(se="other"),{name:W,type:se,startTime:j,endTime:O}}).filter(B=>B&&B.name&&B.name!=="Unknown");if(H.length===0){alert("No valid schedule items found in the imported data. Please check your file format.");return}if(f.value==="overwrite"){if(h.value===""){alert("Please select a time table to overwrite");return}const B=parseInt(h.value);s.value[B]={...s.value[B],schedule:H}}else{const B=y(v.value);if(!B)return;const Q={name:B,days:["monday","tuesday","wednesday","thursday","friday"],schedule:H};s.value.push(Q)}u.value=[],d.value=[],f.value="overwrite",h.value="",v.value="",alert("Time table imported successfully!")}catch(M){console.error("Error importing time table:",M),alert("Error importing time table. Please check your file format and try again.")}}function P(){u.value=[],d.value=[],f.value="overwrite",h.value="",v.value=""}return Jt(E),(M,H)=>(N(),U("div",Ete,[m("div",_te,[H[7]||(H[7]=m("h1",null,"Time Table Management",-1)),m("div",bte,[m("button",{onClick:x,class:"btn btn-primary",disabled:n.value},le(n.value?"Saving...":"Save Time Tables"),9,Ste),m("button",{onClick:S,class:"btn btn-secondary"}," Add Time Table ")])]),m("div",Tte,[m("button",{onClick:k,class:"btn btn-secondary"},"Import CSV/XLSX"),m("input",{ref_key:"fileInput",ref:c,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:L},null,544),H[8]||(H[8]=m("div",{class:"import-note"}," You can export from Google Sheets or Excel as CSV, or upload your Excel file directly. ",-1))]),u.value.length?(N(),U("div",Ate,[H[13]||(H[13]=m("h3",null,"Preview Imported Time Table",-1)),m("table",null,[m("thead",null,[m("tr",null,[(N(!0),U(Oe,null,Ge(d.value,B=>(N(),U("th",{key:B},le(B),1))),128))])]),m("tbody",null,[(N(!0),U(Oe,null,Ge(u.value,(B,Q)=>(N(),U("tr",{key:Q},[(N(!0),U(Oe,null,Ge(d.value,j=>(N(),U("td",{key:j},le(B[j]),1))),128))]))),128))])]),m("div",wte,[H[12]||(H[12]=m("h4",null,"Import Options",-1)),m("div",Cte,[m("label",null,[Ve(m("input",{type:"radio","onUpdate:modelValue":H[0]||(H[0]=B=>f.value=B),value:"overwrite"},null,512),[[cs,f.value]]),H[9]||(H[9]=Me(" Overwrite existing time table: "))]),Ve(m("select",{"onUpdate:modelValue":H[1]||(H[1]=B=>h.value=B),disabled:f.value!=="overwrite",class:"form-select"},[H[10]||(H[10]=m("option",{value:""},"Select a time table...",-1)),(N(!0),U(Oe,null,Ge(s.value,(B,Q)=>(N(),U("option",{key:Q,value:Q},le(B.name),9,kte))),128))],8,Ite),[[hr,h.value]])]),m("div",Dte,[m("label",null,[Ve(m("input",{type:"radio","onUpdate:modelValue":H[2]||(H[2]=B=>f.value=B),value:"create"},null,512),[[cs,f.value]]),H[11]||(H[11]=Me(" Create new time table: "))]),Ve(m("input",{"onUpdate:modelValue":H[3]||(H[3]=B=>v.value=B),type:"text",placeholder:"Enter time table name...",disabled:f.value!=="create",class:"form-input"},null,8,Rte),[[At,v.value]])])]),m("div",Fte,[m("button",{onClick:G,class:"btn btn-primary",disabled:!p.value},le(f.value==="overwrite"?"Overwrite Time Table":"Create New Time Table"),9,Pte),m("button",{onClick:P,class:"btn btn-secondary"},"Cancel")])])):Fe("",!0),m("div",Ote,[r.value?(N(),U("div",Nte," Loading time tables... ")):(N(),U("div",Lte,[s.value.length===0?(N(),U("div",Mte,[H[14]||(H[14]=m("h3",null,"No Time Tables Created",-1)),H[15]||(H[15]=m("p",null,"Create your first time table to get started.",-1)),m("button",{onClick:S,class:"btn btn-primary"},"Create Time Table")])):(N(),U("div",Bte,[(N(!0),U(Oe,null,Ge(s.value,(B,Q)=>(N(),U("div",{key:Q,class:"time-table-card"},[m("div",Ute,[m("div",Vte,[m("h3",null,le(B.name),1),m("p",$te,le(w(B.days)),1)]),m("div",Hte,[m("button",{onClick:j=>I(Q),class:"btn btn-small btn-secondary"}," Edit ",8,jte),m("button",{onClick:j=>R(Q),class:"btn btn-small btn-danger"}," Delete ",8,Gte)])]),m("div",Wte,[(N(!0),U(Oe,null,Ge(B.schedule,(j,O)=>(N(),U("div",{key:O,class:"schedule-item"},[m("div",zte,[m("span",Kte,le(j.name),1),m("span",qte,le(A(j.startTime))+" - "+le(A(j.endTime)),1)]),m("div",Xte,[m("span",{class:ot(["type-badge",j.type])},le(j.type),3)])]))),128))])]))),128))]))]))]),i.value?(N(),U("div",{key:1,class:"edit-dialog-overlay",onClick:b},[m("div",{class:"edit-dialog",onClick:H[6]||(H[6]=bs(()=>{},["stop"]))},[m("div",Yte,[m("h2",null,le(a.value===-1?"Create Time Table":"Edit Time Table"),1),m("button",{onClick:b,class:"btn-close"},"")]),m("div",Qte,[m("div",Jte,[H[16]||(H[16]=m("label",{for:"timeTableName"},"Time Table Name",-1)),Ve(m("input",{id:"timeTableName","onUpdate:modelValue":H[4]||(H[4]=B=>o.value.name=B),type:"text",placeholder:"e.g., Regular Schedule, Rally Day, Minimum Day",class:"form-input"},null,512),[[At,o.value.name]])]),m("div",Zte,[H[17]||(H[17]=m("label",null,"Days This Schedule Applies",-1)),m("div",ere,[(N(),U(Oe,null,Ge(l,B=>m("label",{key:B.value,class:"day-checkbox"},[Ve(m("input",{type:"checkbox",value:B.value,"onUpdate:modelValue":H[5]||(H[5]=Q=>o.value.days=Q)},null,8,tre),[[Et,o.value.days]]),Me(" "+le(B.label),1)])),64))])]),m("div",rre,[H[20]||(H[20]=m("label",null,"Schedule Items",-1)),m("div",nre,[(N(!0),U(Oe,null,Ge(o.value.schedule,(B,Q)=>(N(),U("div",{key:Q,class:"schedule-item-edit"},[m("div",sre,[Ve(m("input",{"onUpdate:modelValue":j=>B.name=j,type:"text",placeholder:"Period 1, Lunch, Break, etc.",class:"form-input item-name-input"},null,8,are),[[At,B.name]]),Ve(m("select",{"onUpdate:modelValue":j=>B.type=j,class:"form-select item-type-select"},H[18]||(H[18]=[m("option",{value:"period"},"Period",-1),m("option",{value:"break"},"Break",-1),m("option",{value:"lunch"},"Lunch",-1),m("option",{value:"other"},"Other",-1)]),8,ire),[[hr,B.type]]),Ve(m("input",{"onUpdate:modelValue":j=>B.startTime=j,type:"time",class:"form-input time-input"},null,8,ore),[[At,B.startTime]]),H[19]||(H[19]=m("span",{class:"time-separator"},"to",-1)),Ve(m("input",{"onUpdate:modelValue":j=>B.endTime=j,type:"time",class:"form-input time-input"},null,8,lre),[[At,B.endTime]]),m("button",{onClick:j=>C(Q),class:"btn btn-small btn-danger"}," Delete ",8,cre)])]))),128)),m("button",{onClick:D,class:"btn btn-secondary btn-add-item"}," Add Schedule Item ")])])]),m("div",{class:"dialog-actions"},[m("button",{onClick:b,class:"btn btn-secondary"},"Cancel"),m("button",{onClick:_,class:"btn btn-primary"},"Save Time Table")])])])):Fe("",!0)]))}},R4=bt(ure,[["__scopeId","data-v-168ca22a"]]);function dre(){const t=pe({}),e=pe(!1);async function r(){e.value=!0;try{const d=await dr(Gt(ht,"aideSchedules")),f={};d.forEach(h=>{f[h.id]=h.data()}),t.value=f}catch(d){console.error("Error loading aide schedules:",d),t.value={}}finally{e.value=!1}}async function n(d){e.value=!0;try{const f=await Vr(vt(ht,"aideSchedules",d));f.exists()?t.value[d]=f.data():t.value[d]={schedule:{},directAssignment:[]}}catch(f){console.error("Error loading aide schedule:",f),t.value[d]={schedule:{},directAssignment:[]}}finally{e.value=!1}}async function s(d,f,h=!0){try{const v=JSON.parse(JSON.stringify(f));h?await xr(vt(ht,"aideSchedules",d),v,{merge:!0}):await xr(vt(ht,"aideSchedules",d),v),t.value[d]=v}catch(v){throw console.error("Error saving aide schedule:",v),v}}async function i(){try{const d=Object.entries(t.value);for(const[f,h]of d){const v=JSON.parse(JSON.stringify(h));await xr(vt(ht,"aideSchedules",f),v,{merge:!0})}}catch(d){throw console.error("Error saving all aide schedules:",d),d}}function a(d,f){const h=[];return Object.entries(t.value).forEach(([v,p])=>{p.schedule&&p.schedule[f]&&(Array.isArray(p.schedule[f])?p.schedule[f]:[p.schedule[f]]).includes(d)&&h.push(v)}),h}function o(d){var h;const f=(h=t.value[d])==null?void 0:h.directAssignment;return Array.isArray(f)?f.length>0?f[0]:null:f||null}function l(d){return Object.keys(t.value).find(h=>{var p;const v=(p=t.value[h])==null?void 0:p.directAssignment;return Array.isArray(v)?v.includes(d):v===d})||null}function c(d,f,h){const v=[],p=t.value[d];return p&&((Array.isArray(p.directAssignment)?p.directAssignment:p.directAssignment?[p.directAssignment]:[]).forEach(y=>{if(y){const E=f.find(S=>S.id===y);E&&v.push({...E,assignmentType:"direct"})}}),Object.entries(p.schedule||{}).forEach(([y,E])=>{E&&(Array.isArray(E)?E:[E]).forEach(I=>{I&&f.forEach(R=>{if(R.schedule&&R.schedule[y]===I){const D=v.findIndex(C=>C.id===R.id);D===-1?v.push({...R,assignmentType:"class",period:y,teacherId:I}):(v[D].assignmentType="both",v[D].period=y,v[D].teacherId=I)}})})})),v}function u(d,f,h,v){if(!d||!f||!h||!v)return!1;const p=h.find(I=>I.id===f);if(!p)return!1;const g=t.value[d];if(!g)return!1;if((Array.isArray(g.directAssignment)?g.directAssignment:g.directAssignment?[g.directAssignment]:[]).includes(f))return!0;if(!p.schedule)return!1;const E=g.schedule||{};return Object.entries(p.schedule).some(([I,R])=>{const D=E[I];return D?(Array.isArray(D)?D:[D]).includes(R):!1})}return{aideSchedule:Ae(()=>t.value),loading:Ae(()=>e.value),loadAideSchedules:r,loadAideSchedule:n,saveAideSchedule:s,saveAllAideSchedules:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}var fre={exports:{}};const hre=ex(GR);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function eb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Aa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eb(Object(r),!0).forEach(function(n){pre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eb(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function e0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e0=function(e){return typeof e}:e0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e0(t)}function pre(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Os(){return Os=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Os.apply(this,arguments)}function mre(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function vre(t,e){if(t==null)return{};var r=mre(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gre(t){return xre(t)||yre(t)||Ere(t)||_re()}function xre(t){if(Array.isArray(t))return lg(t)}function yre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ere(t,e){if(t){if(typeof t=="string")return lg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lg(t,e)}}function lg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bre="1.14.0";function Xa(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ui=Xa(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),jd=Xa(/Edge/i),tb=Xa(/firefox/i),Fu=Xa(/safari/i)&&!Xa(/chrome/i)&&!Xa(/android/i),F4=Xa(/iP(ad|od|hone)/i),Sre=Xa(/chrome/i)&&Xa(/android/i),P4={capture:!1,passive:!1};function Bt(t,e,r){t.addEventListener(e,r,!ui&&P4)}function Mt(t,e,r){t.removeEventListener(e,r,!ui&&P4)}function J0(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Tre(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Gs(t,e,r,n){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&J0(t,e):J0(t,e))||n&&t===r)return t;if(t===r)break}while(t=Tre(t))}return null}var rb=/\s+/g;function Tr(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(rb," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(rb," ")}}function ut(t,e,r){var n=t&&t.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=r+(typeof r=="string"?"":"px")}}function Do(t,e){var r="";if(typeof t=="string")r=t;else do{var n=ut(t,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function O4(t,e,r){if(t){var n=t.getElementsByTagName(e),s=0,i=n.length;if(r)for(;s<i;s++)r(n[s],s);return n}return[]}function ya(){var t=document.scrollingElement;return t||document.documentElement}function br(t,e,r,n,s){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,o,l,c,u,d;if(t!==window&&t.parentNode&&t!==ya()?(i=t.getBoundingClientRect(),a=i.top,o=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||r)&&t!==window&&(s=s||t.parentNode,!ui))do if(s&&s.getBoundingClientRect&&(ut(s,"transform")!=="none"||r&&ut(s,"position")!=="static")){var f=s.getBoundingClientRect();a-=f.top+parseInt(ut(s,"border-top-width")),o-=f.left+parseInt(ut(s,"border-left-width")),l=a+i.height,c=o+i.width;break}while(s=s.parentNode);if(n&&t!==window){var h=Do(s||t),v=h&&h.a,p=h&&h.d;h&&(a/=p,o/=v,d/=v,u/=p,l=a+u,c=o+d)}return{top:a,left:o,bottom:l,right:c,width:d,height:u}}}function nb(t,e,r){for(var n=Bi(t,!0),s=br(t)[e];n;){var i=br(n)[r],a=void 0;if(a=s>=i,!a)return n;if(n===ya())break;n=Bi(n,!1)}return!1}function uc(t,e,r,n){for(var s=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==yt.ghost&&(n||a[i]!==yt.dragged)&&Gs(a[i],r.draggable,t,!1)){if(s===e)return a[i];s++}i++}return null}function Ix(t,e){for(var r=t.lastElementChild;r&&(r===yt.ghost||ut(r,"display")==="none"||e&&!J0(r,e));)r=r.previousElementSibling;return r||null}function Fr(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==yt.clone&&(!e||J0(t,e))&&r++;return r}function sb(t){var e=0,r=0,n=ya();if(t)do{var s=Do(t),i=s.a,a=s.d;e+=t.scrollLeft*i,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function Are(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r)}return-1}function Bi(t,e){if(!t||!t.getBoundingClientRect)return ya();var r=t,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=ut(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return ya();if(n||e)return r;n=!0}}while(r=r.parentNode);return ya()}function wre(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function nm(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Pu;function N4(t,e){return function(){if(!Pu){var r=arguments,n=this;r.length===1?t.call(n,r[0]):t.apply(n,r),Pu=setTimeout(function(){Pu=void 0},e)}}}function Cre(){clearTimeout(Pu),Pu=void 0}function L4(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function kx(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function ab(t,e){ut(t,"position","absolute"),ut(t,"top",e.top),ut(t,"left",e.left),ut(t,"width",e.width),ut(t,"height",e.height)}function sm(t){ut(t,"position",""),ut(t,"top",""),ut(t,"left",""),ut(t,"width",""),ut(t,"height","")}var Pn="Sortable"+new Date().getTime();function Ire(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(ut(s,"display")==="none"||s===yt.ghost)){t.push({target:s,rect:br(s)});var i=Aa({},t[t.length-1].rect);if(s.thisAnimationDuration){var a=Do(s,!0);a&&(i.top-=a.f,i.left-=a.e)}s.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(Are(t,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,a=0;t.forEach(function(o){var l=0,c=o.target,u=c.fromRect,d=br(c),f=c.prevFromRect,h=c.prevToRect,v=o.rect,p=Do(c,!0);p&&(d.top-=p.f,d.left-=p.e),c.toRect=d,c.thisAnimationDuration&&nm(f,d)&&!nm(u,d)&&(v.top-d.top)/(v.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=Dre(v,f,h,s.options)),nm(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=s.options.animation),s.animate(c,v,d,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,s,i,a){if(a){ut(n,"transition",""),ut(n,"transform","");var o=Do(this.el),l=o&&o.a,c=o&&o.d,u=(s.left-i.left)/(l||1),d=(s.top-i.top)/(c||1);n.animatingX=!!u,n.animatingY=!!d,ut(n,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=kre(n),ut(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),ut(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){ut(n,"transition",""),ut(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function kre(t){return t.offsetWidth}function Dre(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}var ml=[],am={initializeByDefault:!0},Gd={mount:function(e){for(var r in am)am.hasOwnProperty(r)&&!(r in e)&&(e[r]=am[r]);ml.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ml.push(e)},pluginEvent:function(e,r,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var i=e+"Global";ml.forEach(function(a){r[a.pluginName]&&(r[a.pluginName][i]&&r[a.pluginName][i](Aa({sortable:r},n)),r.options[a.pluginName]&&r[a.pluginName][e]&&r[a.pluginName][e](Aa({sortable:r},n)))})},initializePlugins:function(e,r,n,s){ml.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,r,e.options);c.sortable=e,c.options=e.options,e[l]=c,Os(n,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,r){var n={};return ml.forEach(function(s){typeof s.eventProperties=="function"&&Os(n,s.eventProperties.call(r[s.pluginName],e))}),n},modifyOption:function(e,r,n){var s;return ml.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(s=i.optionListeners[r].call(e[i.pluginName],n))}),s}};function ru(t){var e=t.sortable,r=t.rootEl,n=t.name,s=t.targetEl,i=t.cloneEl,a=t.toEl,o=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,v=t.extraEventProperties;if(e=e||r&&r[Pn],!!e){var p,g=e.options,y="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!ui&&!jd?p=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(n,!0,!0)),p.to=a||r,p.from=o||r,p.item=s||r,p.clone=i,p.oldIndex=l,p.newIndex=c,p.oldDraggableIndex=u,p.newDraggableIndex=d,p.originalEvent=f,p.pullMode=h?h.lastPutMode:void 0;var E=Aa(Aa({},v),Gd.getEventProperties(n,e));for(var S in E)p[S]=E[S];r&&r.dispatchEvent(p),g[y]&&g[y].call(e,p)}}var Rre=["evt"],rs=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,i=vre(n,Rre);Gd.pluginEvent.bind(yt)(e,r,Aa({dragEl:Je,parentEl:kr,ghostEl:Pt,rootEl:Er,nextEl:go,lastDownEl:t0,cloneEl:Rr,cloneHidden:Oi,dragStarted:nu,putSortable:cn,activeSortable:yt.active,originalEvent:s,oldIndex:kl,oldDraggableIndex:Ou,newIndex:hs,newDraggableIndex:Ci,hideGhostForTarget:V4,unhideGhostForTarget:$4,cloneNowHidden:function(){Oi=!0},cloneNowShown:function(){Oi=!1},dispatchSortableEvent:function(o){Gn({sortable:r,name:o,originalEvent:s})}},i))};function Gn(t){ru(Aa({putSortable:cn,cloneEl:Rr,targetEl:Je,rootEl:Er,oldIndex:kl,oldDraggableIndex:Ou,newIndex:hs,newDraggableIndex:Ci},t))}var Je,kr,Pt,Er,go,t0,Rr,Oi,kl,hs,Ou,Ci,Df,cn,Al=!1,Z0=!1,eh=[],po,Hs,im,om,ib,ob,nu,vl,Nu,Lu=!1,Rf=!1,r0,Tn,lm=[],cg=!1,th=[],sp=typeof document<"u",Ff=F4,lb=jd||ui?"cssFloat":"float",Fre=sp&&!Sre&&!F4&&"draggable"in document.createElement("div"),M4=function(){if(sp){if(ui)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),B4=function(e,r){var n=ut(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=uc(e,0,r),a=uc(e,1,r),o=i&&ut(i),l=a&&ut(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+br(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+br(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&o.float!=="none"){var d=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=s&&n[lb]==="none"||a&&n[lb]==="none"&&c+u>s)?"vertical":"horizontal"},Pre=function(e,r,n){var s=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?r.left:r.top,l=n?r.right:r.bottom,c=n?r.width:r.height;return s===o||i===l||s+a/2===o+c/2},Ore=function(e,r){var n;return eh.some(function(s){var i=s[Pn].options.emptyInsertThreshold;if(!(!i||Ix(s))){var a=br(s),o=e>=a.left-i&&e<=a.right+i,l=r>=a.top-i&&r<=a.bottom+i;if(o&&l)return n=s}}),n},U4=function(e){function r(i,a){return function(o,l,c,u){var d=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(i==null&&(a||d))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return r(i(o,l,c,u),a)(o,l,c,u);var f=(a?o:l).options.group.name;return i===!0||typeof i=="string"&&i===f||i.join&&i.indexOf(f)>-1}}var n={},s=e.group;(!s||e0(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=r(s.pull,!0),n.checkPut=r(s.put),n.revertClone=s.revertClone,e.group=n},V4=function(){!M4&&Pt&&ut(Pt,"display","none")},$4=function(){!M4&&Pt&&ut(Pt,"display","")};sp&&document.addEventListener("click",function(t){if(Z0)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Z0=!1,!1},!0);var mo=function(e){if(Je){e=e.touches?e.touches[0]:e;var r=Ore(e.clientX,e.clientY);if(r){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[Pn]._onDragOver(n)}}},Nre=function(e){Je&&Je.parentNode[Pn]._isOutsideThisEl(e.target)};function yt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Os({},e),t[Pn]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return B4(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:yt.supportPointer!==!1&&"PointerEvent"in window&&!Fu,emptyInsertThreshold:5};Gd.initializePlugins(this,t,r);for(var n in r)!(n in e)&&(e[n]=r[n]);U4(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:Fre,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Bt(t,"pointerdown",this._onTapStart):(Bt(t,"mousedown",this._onTapStart),Bt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Bt(t,"dragover",this),Bt(t,"dragenter",this)),eh.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Os(this,Ire())}yt.prototype={constructor:yt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(vl=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,Je):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,s=this.options,i=s.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=s.filter;if(jre(n),!Je&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Fu&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Gs(l,s.draggable,n,!1),!(l&&l.animated)&&t0!==l)){if(kl=Fr(l),Ou=Fr(l,s.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Gn({sortable:r,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),rs("filter",r,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=Gs(c,d.trim(),n,!1),d)return Gn({sortable:r,rootEl:d,name:"filter",targetEl:l,fromEl:n,toEl:n}),rs("filter",r,{evt:e}),!0}),u)){i&&e.cancelable&&e.preventDefault();return}s.handle&&!Gs(c,s.handle,n,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,r,n){var s=this,i=s.el,a=s.options,o=i.ownerDocument,l;if(n&&!Je&&n.parentNode===i){var c=br(n);if(Er=i,Je=n,kr=Je.parentNode,go=Je.nextSibling,t0=n,Df=a.group,yt.dragged=Je,po={target:Je,clientX:(r||e).clientX,clientY:(r||e).clientY},ib=po.clientX-c.left,ob=po.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,Je.style["will-change"]="all",l=function(){if(rs("delayEnded",s,{evt:e}),yt.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!tb&&s.nativeDraggable&&(Je.draggable=!0),s._triggerDragStart(e,r),Gn({sortable:s,name:"choose",originalEvent:e}),Tr(Je,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){O4(Je,u.trim(),cm)}),Bt(o,"dragover",mo),Bt(o,"mousemove",mo),Bt(o,"touchmove",mo),Bt(o,"mouseup",s._onDrop),Bt(o,"touchend",s._onDrop),Bt(o,"touchcancel",s._onDrop),tb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Je.draggable=!0),rs("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(jd||ui))){if(yt.eventCanceled){this._onDrop();return}Bt(o,"mouseup",s._disableDelayedDrag),Bt(o,"touchend",s._disableDelayedDrag),Bt(o,"touchcancel",s._disableDelayedDrag),Bt(o,"mousemove",s._delayedDragTouchMoveHandler),Bt(o,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&Bt(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Je&&cm(Je),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Mt(e,"mouseup",this._disableDelayedDrag),Mt(e,"touchend",this._disableDelayedDrag),Mt(e,"touchcancel",this._disableDelayedDrag),Mt(e,"mousemove",this._delayedDragTouchMoveHandler),Mt(e,"touchmove",this._delayedDragTouchMoveHandler),Mt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?Bt(document,"pointermove",this._onTouchMove):r?Bt(document,"touchmove",this._onTouchMove):Bt(document,"mousemove",this._onTouchMove):(Bt(Je,"dragend",this),Bt(Er,"dragstart",this._onDragStart));try{document.selection?n0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Al=!1,Er&&Je){rs("dragStarted",this,{evt:r}),this.nativeDraggable&&Bt(document,"dragover",Nre);var n=this.options;!e&&Tr(Je,n.dragClass,!1),Tr(Je,n.ghostClass,!0),yt.active=this,e&&this._appendGhost(),Gn({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(Hs){this._lastX=Hs.clientX,this._lastY=Hs.clientY,V4();for(var e=document.elementFromPoint(Hs.clientX,Hs.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Hs.clientX,Hs.clientY),e!==r);)r=e;if(Je.parentNode[Pn]._isOutsideThisEl(e),r)do{if(r[Pn]){var n=void 0;if(n=r[Pn]._onDragOver({clientX:Hs.clientX,clientY:Hs.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=r.parentNode);$4()}},_onTouchMove:function(e){if(po){var r=this.options,n=r.fallbackTolerance,s=r.fallbackOffset,i=e.touches?e.touches[0]:e,a=Pt&&Do(Pt,!0),o=Pt&&a&&a.a,l=Pt&&a&&a.d,c=Ff&&Tn&&sb(Tn),u=(i.clientX-po.clientX+s.x)/(o||1)+(c?c[0]-lm[0]:0)/(o||1),d=(i.clientY-po.clientY+s.y)/(l||1)+(c?c[1]-lm[1]:0)/(l||1);if(!yt.active&&!Al){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Pt){a?(a.e+=u-(im||0),a.f+=d-(om||0)):a={a:1,b:0,c:0,d:1,e:u,f:d};var f="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");ut(Pt,"webkitTransform",f),ut(Pt,"mozTransform",f),ut(Pt,"msTransform",f),ut(Pt,"transform",f),im=u,om=d,Hs=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Pt){var e=this.options.fallbackOnBody?document.body:Er,r=br(Je,!0,Ff,!0,e),n=this.options;if(Ff){for(Tn=e;ut(Tn,"position")==="static"&&ut(Tn,"transform")==="none"&&Tn!==document;)Tn=Tn.parentNode;Tn!==document.body&&Tn!==document.documentElement?(Tn===document&&(Tn=ya()),r.top+=Tn.scrollTop,r.left+=Tn.scrollLeft):Tn=ya(),lm=sb(Tn)}Pt=Je.cloneNode(!0),Tr(Pt,n.ghostClass,!1),Tr(Pt,n.fallbackClass,!0),Tr(Pt,n.dragClass,!0),ut(Pt,"transition",""),ut(Pt,"transform",""),ut(Pt,"box-sizing","border-box"),ut(Pt,"margin",0),ut(Pt,"top",r.top),ut(Pt,"left",r.left),ut(Pt,"width",r.width),ut(Pt,"height",r.height),ut(Pt,"opacity","0.8"),ut(Pt,"position",Ff?"absolute":"fixed"),ut(Pt,"zIndex","100000"),ut(Pt,"pointerEvents","none"),yt.ghost=Pt,e.appendChild(Pt),ut(Pt,"transform-origin",ib/parseInt(Pt.style.width)*100+"% "+ob/parseInt(Pt.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,s=e.dataTransfer,i=n.options;if(rs("dragStart",this,{evt:e}),yt.eventCanceled){this._onDrop();return}rs("setupClone",this),yt.eventCanceled||(Rr=kx(Je),Rr.draggable=!1,Rr.style["will-change"]="",this._hideClone(),Tr(Rr,this.options.chosenClass,!1),yt.clone=Rr),n.cloneId=n0(function(){rs("clone",n),!yt.eventCanceled&&(n.options.removeCloneOnHide||Er.insertBefore(Rr,Je),n._hideClone(),Gn({sortable:n,name:"clone"}))}),!r&&Tr(Je,i.dragClass,!0),r?(Z0=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Mt(document,"mouseup",n._onDrop),Mt(document,"touchend",n._onDrop),Mt(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,Je)),Bt(document,"drop",n),ut(Je,"transform","translateZ(0)")),Al=!0,n._dragStartId=n0(n._dragStarted.bind(n,r,e)),Bt(document,"selectstart",n),nu=!0,Fu&&ut(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,s,i,a,o=this.options,l=o.group,c=yt.active,u=Df===l,d=o.sort,f=cn||c,h,v=this,p=!1;if(cg)return;function g(H,B){rs(H,v,Aa({evt:e,isOwner:u,axis:h?"vertical":"horizontal",revert:a,dragRect:s,targetRect:i,canSort:d,fromSortable:f,target:n,completed:E,onMove:function(j,O){return Pf(Er,r,Je,s,j,br(j),e,O)},changed:S},B))}function y(){g("dragOverAnimationCapture"),v.captureAnimationState(),v!==f&&f.captureAnimationState()}function E(H){return g("dragOverCompleted",{insertion:H}),H&&(u?c._hideClone():c._showClone(v),v!==f&&(Tr(Je,cn?cn.options.ghostClass:c.options.ghostClass,!1),Tr(Je,o.ghostClass,!0)),cn!==v&&v!==yt.active?cn=v:v===yt.active&&cn&&(cn=null),f===v&&(v._ignoreWhileAnimating=n),v.animateAll(function(){g("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===Je&&!Je.animated||n===r&&!n.animated)&&(vl=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(Je.parentNode[Pn]._isOutsideThisEl(e.target),!H&&mo(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function S(){hs=Fr(Je),Ci=Fr(Je,o.draggable),Gn({sortable:v,name:"change",toEl:r,newIndex:hs,newDraggableIndex:Ci,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Gs(n,o.draggable,r,!0),g("dragOver"),yt.eventCanceled)return p;if(Je.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||v._ignoreWhileAnimating===n)return E(!1);if(Z0=!1,c&&!o.disabled&&(u?d||(a=kr!==Er):cn===this||(this.lastPutMode=Df.checkPull(this,c,Je,e))&&l.checkPut(this,c,Je,e))){if(h=this._getDirection(e,n)==="vertical",s=br(Je),g("dragOverValid"),yt.eventCanceled)return p;if(a)return kr=Er,y(),this._hideClone(),g("revert"),yt.eventCanceled||(go?Er.insertBefore(Je,go):Er.appendChild(Je)),E(!0);var I=Ix(r,o.draggable);if(!I||Ure(e,h,this)&&!I.animated){if(I===Je)return E(!1);if(I&&r===e.target&&(n=I),n&&(i=br(n)),Pf(Er,r,Je,s,n,i,e,!!n)!==!1)return y(),r.appendChild(Je),kr=r,S(),E(!0)}else if(I&&Bre(e,h,this)){var R=uc(r,0,o,!0);if(R===Je)return E(!1);if(n=R,i=br(n),Pf(Er,r,Je,s,n,i,e,!1)!==!1)return y(),r.insertBefore(Je,R),kr=r,S(),E(!0)}else if(n.parentNode===r){i=br(n);var D=0,C,_=Je.parentNode!==r,b=!Pre(Je.animated&&Je.toRect||s,n.animated&&n.toRect||i,h),x=h?"top":"left",w=nb(n,"top","top")||nb(Je,"top","top"),A=w?w.scrollTop:void 0;vl!==n&&(C=i[x],Lu=!1,Rf=!b&&o.invertSwap||_),D=Vre(e,n,i,h,b?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,Rf,vl===n);var k;if(D!==0){var L=Fr(Je);do L-=D,k=kr.children[L];while(k&&(ut(k,"display")==="none"||k===Pt))}if(D===0||k===n)return E(!1);vl=n,Nu=D;var G=n.nextElementSibling,P=!1;P=D===1;var M=Pf(Er,r,Je,s,n,i,e,P);if(M!==!1)return(M===1||M===-1)&&(P=M===1),cg=!0,setTimeout(Mre,30),y(),P&&!G?r.appendChild(Je):n.parentNode.insertBefore(Je,P?G:n),w&&L4(w,0,A-w.scrollTop),kr=Je.parentNode,C!==void 0&&!Rf&&(r0=Math.abs(C-br(n)[x])),S(),E(!0)}if(r.contains(Je))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Mt(document,"mousemove",this._onTouchMove),Mt(document,"touchmove",this._onTouchMove),Mt(document,"pointermove",this._onTouchMove),Mt(document,"dragover",mo),Mt(document,"mousemove",mo),Mt(document,"touchmove",mo)},_offUpEvents:function(){var e=this.el.ownerDocument;Mt(e,"mouseup",this._onDrop),Mt(e,"touchend",this._onDrop),Mt(e,"pointerup",this._onDrop),Mt(e,"touchcancel",this._onDrop),Mt(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(hs=Fr(Je),Ci=Fr(Je,n.draggable),rs("drop",this,{evt:e}),kr=Je&&Je.parentNode,hs=Fr(Je),Ci=Fr(Je,n.draggable),yt.eventCanceled){this._nulling();return}Al=!1,Rf=!1,Lu=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ug(this.cloneId),ug(this._dragStartId),this.nativeDraggable&&(Mt(document,"drop",this),Mt(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Fu&&ut(document.body,"user-select",""),ut(Je,"transform",""),e&&(nu&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Pt&&Pt.parentNode&&Pt.parentNode.removeChild(Pt),(Er===kr||cn&&cn.lastPutMode!=="clone")&&Rr&&Rr.parentNode&&Rr.parentNode.removeChild(Rr),Je&&(this.nativeDraggable&&Mt(Je,"dragend",this),cm(Je),Je.style["will-change"]="",nu&&!Al&&Tr(Je,cn?cn.options.ghostClass:this.options.ghostClass,!1),Tr(Je,this.options.chosenClass,!1),Gn({sortable:this,name:"unchoose",toEl:kr,newIndex:null,newDraggableIndex:null,originalEvent:e}),Er!==kr?(hs>=0&&(Gn({rootEl:kr,name:"add",toEl:kr,fromEl:Er,originalEvent:e}),Gn({sortable:this,name:"remove",toEl:kr,originalEvent:e}),Gn({rootEl:kr,name:"sort",toEl:kr,fromEl:Er,originalEvent:e}),Gn({sortable:this,name:"sort",toEl:kr,originalEvent:e})),cn&&cn.save()):hs!==kl&&hs>=0&&(Gn({sortable:this,name:"update",toEl:kr,originalEvent:e}),Gn({sortable:this,name:"sort",toEl:kr,originalEvent:e})),yt.active&&((hs==null||hs===-1)&&(hs=kl,Ci=Ou),Gn({sortable:this,name:"end",toEl:kr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){rs("nulling",this),Er=Je=kr=Pt=go=Rr=t0=Oi=po=Hs=nu=hs=Ci=kl=Ou=vl=Nu=cn=Df=yt.dragged=yt.ghost=yt.clone=yt.active=null,th.forEach(function(e){e.checked=!0}),th.length=im=om=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Je&&(this._onDragOver(e),Lre(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,s=0,i=n.length,a=this.options;s<i;s++)r=n[s],Gs(r,a.draggable,this.el,!1)&&e.push(r.getAttribute(a.dataIdAttr)||Hre(r));return e},sort:function(e,r){var n={},s=this.el;this.toArray().forEach(function(i,a){var o=s.children[a];Gs(o,this.options.draggable,s,!1)&&(n[i]=o)},this),r&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(s.removeChild(n[i]),s.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return Gs(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var s=Gd.modifyOption(this,e,r);typeof s<"u"?n[e]=s:n[e]=r,e==="group"&&U4(n)},destroy:function(){rs("destroy",this);var e=this.el;e[Pn]=null,Mt(e,"mousedown",this._onTapStart),Mt(e,"touchstart",this._onTapStart),Mt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Mt(e,"dragover",this),Mt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),eh.splice(eh.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Oi){if(rs("hideClone",this),yt.eventCanceled)return;ut(Rr,"display","none"),this.options.removeCloneOnHide&&Rr.parentNode&&Rr.parentNode.removeChild(Rr),Oi=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Oi){if(rs("showClone",this),yt.eventCanceled)return;Je.parentNode==Er&&!this.options.group.revertClone?Er.insertBefore(Rr,Je):go?Er.insertBefore(Rr,go):Er.appendChild(Rr),this.options.group.revertClone&&this.animate(Je,Rr),ut(Rr,"display",""),Oi=!1}}};function Lre(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Pf(t,e,r,n,s,i,a,o){var l,c=t[Pn],u=c.options.onMove,d;return window.CustomEvent&&!ui&&!jd?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=r,l.draggedRect=n,l.related=s||e,l.relatedRect=i||br(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),u&&(d=u.call(c,l,a)),d}function cm(t){t.draggable=!1}function Mre(){cg=!1}function Bre(t,e,r){var n=br(uc(r.el,0,r.options,!0)),s=10;return e?t.clientX<n.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-s||t.clientY<n.bottom&&t.clientX<n.left}function Ure(t,e,r){var n=br(Ix(r.el,r.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}function Vre(t,e,r,n,s,i,a,o){var l=n?t.clientY:t.clientX,c=n?r.height:r.width,u=n?r.top:r.left,d=n?r.bottom:r.right,f=!1;if(!a){if(o&&r0<c*s){if(!Lu&&(Nu===1?l>u+c*i/2:l<d-c*i/2)&&(Lu=!0),Lu)f=!0;else if(Nu===1?l<u+r0:l>d-r0)return-Nu}else if(l>u+c*(1-s)/2&&l<d-c*(1-s)/2)return $re(e)}return f=f||a,f&&(l<u+c*i/2||l>d-c*i/2)?l>u+c/2?1:-1:0}function $re(t){return Fr(Je)<Fr(t)?1:-1}function Hre(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function jre(t){th.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&th.push(n)}}function n0(t){return setTimeout(t,0)}function ug(t){return clearTimeout(t)}sp&&Bt(document,"touchmove",function(t){(yt.active||Al)&&t.cancelable&&t.preventDefault()});yt.utils={on:Bt,off:Mt,css:ut,find:O4,is:function(e,r){return!!Gs(e,r,e,!1)},extend:wre,throttle:N4,closest:Gs,toggleClass:Tr,clone:kx,index:Fr,nextTick:n0,cancelNextTick:ug,detectDirection:B4,getChild:uc};yt.get=function(t){return t[Pn]};yt.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(yt.utils=Aa(Aa({},yt.utils),n.utils)),Gd.mount(n)})};yt.create=function(t,e){return new yt(t,e)};yt.version=bre;var jr=[],su,dg,fg=!1,um,dm,rh,au;function Gre(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?Bt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Bt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Bt(document,"touchmove",this._handleFallbackAutoScroll):Bt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Mt(document,"dragover",this._handleAutoScroll):(Mt(document,"pointermove",this._handleFallbackAutoScroll),Mt(document,"touchmove",this._handleFallbackAutoScroll),Mt(document,"mousemove",this._handleFallbackAutoScroll)),cb(),s0(),Cre()},nulling:function(){rh=dg=su=fg=au=um=dm=null,jr.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var s=this,i=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,o=document.elementFromPoint(i,a);if(rh=r,n||this.options.forceAutoScrollFallback||jd||ui||Fu){fm(r,this.options,o,n);var l=Bi(o,!0);fg&&(!au||i!==um||a!==dm)&&(au&&cb(),au=setInterval(function(){var c=Bi(document.elementFromPoint(i,a),!0);c!==l&&(l=c,s0()),fm(r,s.options,c,n)},10),um=i,dm=a)}else{if(!this.options.bubbleScroll||Bi(o,!0)===ya()){s0();return}fm(r,this.options,Bi(o,!1),!1)}}},Os(t,{pluginName:"scroll",initializeByDefault:!0})}function s0(){jr.forEach(function(t){clearInterval(t.pid)}),jr=[]}function cb(){clearInterval(au)}var fm=N4(function(t,e,r,n){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=ya(),c=!1,u;dg!==r&&(dg=r,s0(),su=e.scroll,u=e.scrollFn,su===!0&&(su=Bi(r,!0)));var d=0,f=su;do{var h=f,v=br(h),p=v.top,g=v.bottom,y=v.left,E=v.right,S=v.width,I=v.height,R=void 0,D=void 0,C=h.scrollWidth,_=h.scrollHeight,b=ut(h),x=h.scrollLeft,w=h.scrollTop;h===l?(R=S<C&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),D=I<_&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(R=S<C&&(b.overflowX==="auto"||b.overflowX==="scroll"),D=I<_&&(b.overflowY==="auto"||b.overflowY==="scroll"));var A=R&&(Math.abs(E-s)<=a&&x+S<C)-(Math.abs(y-s)<=a&&!!x),k=D&&(Math.abs(g-i)<=a&&w+I<_)-(Math.abs(p-i)<=a&&!!w);if(!jr[d])for(var L=0;L<=d;L++)jr[L]||(jr[L]={});(jr[d].vx!=A||jr[d].vy!=k||jr[d].el!==h)&&(jr[d].el=h,jr[d].vx=A,jr[d].vy=k,clearInterval(jr[d].pid),(A!=0||k!=0)&&(c=!0,jr[d].pid=setInterval((function(){n&&this.layer===0&&yt.active._onTouchMove(rh);var G=jr[this.layer].vy?jr[this.layer].vy*o:0,P=jr[this.layer].vx?jr[this.layer].vx*o:0;typeof u=="function"&&u.call(yt.dragged.parentNode[Pn],P,G,t,rh,jr[this.layer].el)!=="continue"||L4(jr[this.layer].el,P,G)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==l&&(f=Bi(f,!1)));fg=c}},30),H4=function(e){var r=e.originalEvent,n=e.putSortable,s=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(r){var c=n||i;o();var u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(a("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function Dx(){}Dx.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=uc(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:H4};Os(Dx,{pluginName:"revertOnSpill"});function Rx(){}Rx.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,s=n||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop:H4};Os(Rx,{pluginName:"removeOnSpill"});var ws;function Wre(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(r){var n=r.dragEl;ws=n},dragOverValid:function(r){var n=r.completed,s=r.target,i=r.onMove,a=r.activeSortable,o=r.changed,l=r.cancel;if(a.options.swap){var c=this.sortable.el,u=this.options;if(s&&s!==c){var d=ws;i(s)!==!1?(Tr(s,u.swapClass,!0),ws=s):ws=null,d&&d!==ws&&Tr(d,u.swapClass,!1)}o(),n(!0),l()}},drop:function(r){var n=r.activeSortable,s=r.putSortable,i=r.dragEl,a=s||this.sortable,o=this.options;ws&&Tr(ws,o.swapClass,!1),ws&&(o.swap||s&&s.options.swap)&&i!==ws&&(a.captureAnimationState(),a!==n&&n.captureAnimationState(),zre(i,ws),a.animateAll(),a!==n&&n.animateAll())},nulling:function(){ws=null}},Os(t,{pluginName:"swap",eventProperties:function(){return{swapItem:ws}}})}function zre(t,e){var r=t.parentNode,n=e.parentNode,s,i;!r||!n||r.isEqualNode(e)||n.isEqualNode(t)||(s=Fr(t),i=Fr(e),r.isEqualNode(n)&&s<i&&i++,r.insertBefore(e,r.children[s]),n.insertBefore(t,n.children[i]))}var It=[],fs=[],Hc,js,jc=!1,ns=!1,gl=!1,cr,Gc,Of;function Kre(){function t(e){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));e.options.supportPointer?Bt(document,"pointerup",this._deselectMultiDrag):(Bt(document,"mouseup",this._deselectMultiDrag),Bt(document,"touchend",this._deselectMultiDrag)),Bt(document,"keydown",this._checkKeyDown),Bt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,i){var a="";It.length&&js===e?It.forEach(function(o,l){a+=(l?", ":"")+o.textContent}):a=i.textContent,s.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var n=r.dragEl;cr=n},delayEnded:function(){this.isMultiDrag=~It.indexOf(cr)},setupClone:function(r){var n=r.sortable,s=r.cancel;if(this.isMultiDrag){for(var i=0;i<It.length;i++)fs.push(kx(It[i])),fs[i].sortableIndex=It[i].sortableIndex,fs[i].draggable=!1,fs[i].style["will-change"]="",Tr(fs[i],this.options.selectedClass,!1),It[i]===cr&&Tr(fs[i],this.options.chosenClass,!1);n._hideClone(),s()}},clone:function(r){var n=r.sortable,s=r.rootEl,i=r.dispatchSortableEvent,a=r.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||It.length&&js===n&&(ub(!0,s),i("clone"),a()))},showClone:function(r){var n=r.cloneNowShown,s=r.rootEl,i=r.cancel;this.isMultiDrag&&(ub(!1,s),fs.forEach(function(a){ut(a,"display","")}),n(),Of=!1,i())},hideClone:function(r){var n=this;r.sortable;var s=r.cloneNowHidden,i=r.cancel;this.isMultiDrag&&(fs.forEach(function(a){ut(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),s(),Of=!0,i())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&js&&js.multiDrag._deselectMultiDrag(),It.forEach(function(n){n.sortableIndex=Fr(n)}),It=It.sort(function(n,s){return n.sortableIndex-s.sortableIndex}),gl=!0},dragStarted:function(r){var n=this,s=r.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){It.forEach(function(a){a!==cr&&ut(a,"position","absolute")});var i=br(cr,!1,!0,!0);It.forEach(function(a){a!==cr&&ab(a,i)}),ns=!0,jc=!0}s.animateAll(function(){ns=!1,jc=!1,n.options.animation&&It.forEach(function(a){sm(a)}),n.options.sort&&Nf()})}},dragOver:function(r){var n=r.target,s=r.completed,i=r.cancel;ns&&~It.indexOf(n)&&(s(!1),i())},revert:function(r){var n=r.fromSortable,s=r.rootEl,i=r.sortable,a=r.dragRect;It.length>1&&(It.forEach(function(o){i.addAnimationState({target:o,rect:ns?br(o):a}),sm(o),o.fromRect=a,n.removeAnimationState(o)}),ns=!1,qre(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(r){var n=r.sortable,s=r.isOwner,i=r.insertion,a=r.activeSortable,o=r.parentEl,l=r.putSortable,c=this.options;if(i){if(s&&a._hideClone(),jc=!1,c.animation&&It.length>1&&(ns||!s&&!a.options.sort&&!l)){var u=br(cr,!1,!0,!0);It.forEach(function(f){f!==cr&&(ab(f,u),o.appendChild(f))}),ns=!0}if(!s)if(ns||Nf(),It.length>1){var d=Of;a._showClone(n),a.options.animation&&!Of&&d&&fs.forEach(function(f){a.addAnimationState({target:f,rect:Gc}),f.fromRect=Gc,f.thisAnimationDuration=null})}else a._showClone(n)}},dragOverAnimationCapture:function(r){var n=r.dragRect,s=r.isOwner,i=r.activeSortable;if(It.forEach(function(o){o.thisAnimationDuration=null}),i.options.animation&&!s&&i.multiDrag.isMultiDrag){Gc=Os({},n);var a=Do(cr,!0);Gc.top-=a.f,Gc.left-=a.e}},dragOverAnimationComplete:function(){ns&&(ns=!1,Nf())},drop:function(r){var n=r.originalEvent,s=r.rootEl,i=r.parentEl,a=r.sortable,o=r.dispatchSortableEvent,l=r.oldIndex,c=r.putSortable,u=c||this.sortable;if(n){var d=this.options,f=i.children;if(!gl)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Tr(cr,d.selectedClass,!~It.indexOf(cr)),~It.indexOf(cr))It.splice(It.indexOf(cr),1),Hc=null,ru({sortable:a,rootEl:s,name:"deselect",targetEl:cr});else{if(It.push(cr),ru({sortable:a,rootEl:s,name:"select",targetEl:cr}),n.shiftKey&&Hc&&a.el.contains(Hc)){var h=Fr(Hc),v=Fr(cr);if(~h&&~v&&h!==v){var p,g;for(v>h?(g=h,p=v):(g=v,p=h+1);g<p;g++)~It.indexOf(f[g])||(Tr(f[g],d.selectedClass,!0),It.push(f[g]),ru({sortable:a,rootEl:s,name:"select",targetEl:f[g]}))}}else Hc=cr;js=u}if(gl&&this.isMultiDrag){if(ns=!1,(i[Pn].options.sort||i!==s)&&It.length>1){var y=br(cr),E=Fr(cr,":not(."+this.options.selectedClass+")");if(!jc&&d.animation&&(cr.thisAnimationDuration=null),u.captureAnimationState(),!jc&&(d.animation&&(cr.fromRect=y,It.forEach(function(I){if(I.thisAnimationDuration=null,I!==cr){var R=ns?br(I):y;I.fromRect=R,u.addAnimationState({target:I,rect:R})}})),Nf(),It.forEach(function(I){f[E]?i.insertBefore(I,f[E]):i.appendChild(I),E++}),l===Fr(cr))){var S=!1;It.forEach(function(I){if(I.sortableIndex!==Fr(I)){S=!0;return}}),S&&o("update")}It.forEach(function(I){sm(I)}),u.animateAll()}js=u}(s===i||c&&c.lastPutMode!=="clone")&&fs.forEach(function(I){I.parentNode&&I.parentNode.removeChild(I)})}},nullingGlobal:function(){this.isMultiDrag=gl=!1,fs.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Mt(document,"pointerup",this._deselectMultiDrag),Mt(document,"mouseup",this._deselectMultiDrag),Mt(document,"touchend",this._deselectMultiDrag),Mt(document,"keydown",this._checkKeyDown),Mt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof gl<"u"&&gl)&&js===this.sortable&&!(r&&Gs(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;It.length;){var n=It[0];Tr(n,this.options.selectedClass,!1),It.shift(),ru({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Os(t,{pluginName:"multiDrag",utils:{select:function(r){var n=r.parentNode[Pn];!n||!n.options.multiDrag||~It.indexOf(r)||(js&&js!==n&&(js.multiDrag._deselectMultiDrag(),js=n),Tr(r,n.options.selectedClass,!0),It.push(r))},deselect:function(r){var n=r.parentNode[Pn],s=It.indexOf(r);!n||!n.options.multiDrag||!~s||(Tr(r,n.options.selectedClass,!1),It.splice(s,1))}},eventProperties:function(){var r=this,n=[],s=[];return It.forEach(function(i){n.push({multiDragElement:i,index:i.sortableIndex});var a;ns&&i!==cr?a=-1:ns?a=Fr(i,":not(."+r.options.selectedClass+")"):a=Fr(i),s.push({multiDragElement:i,index:a})}),{items:gre(It),clones:[].concat(fs),oldIndicies:n,newIndicies:s}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function qre(t,e){It.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function ub(t,e){fs.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function Nf(){It.forEach(function(t){t!==cr&&t.parentNode&&t.parentNode.removeChild(t)})}yt.mount(new Gre);yt.mount(Rx,Dx);const Xre=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Kre,Sortable:yt,Swap:Wre,default:yt},Symbol.toStringTag,{value:"Module"})),Yre=ex(Xre);(function(t,e){(function(n,s){t.exports=s(hre,Yre)})(typeof self<"u"?self:Nt,function(r,n){return function(s){var i={};function a(o){if(i[o])return i[o].exports;var l=i[o]={i:o,l:!1,exports:{}};return s[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=s,a.c=i,a.d=function(o,l,c){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:c})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var u in o)a.d(c,u,(function(d){return o[d]}).bind(null,u));return c},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s="fb15")}({"00ee":function(s,i,a){var o=a("b622"),l=o("toStringTag"),c={};c[l]="z",s.exports=String(c)==="[object z]"},"0366":function(s,i,a){var o=a("1c0b");s.exports=function(l,c,u){if(o(l),c===void 0)return l;switch(u){case 0:return function(){return l.call(c)};case 1:return function(d){return l.call(c,d)};case 2:return function(d,f){return l.call(c,d,f)};case 3:return function(d,f,h){return l.call(c,d,f,h)}}return function(){return l.apply(c,arguments)}}},"057f":function(s,i,a){var o=a("fc6a"),l=a("241c").f,c={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(f){try{return l(f)}catch{return u.slice()}};s.exports.f=function(h){return u&&c.call(h)=="[object Window]"?d(h):l(o(h))}},"06cf":function(s,i,a){var o=a("83ab"),l=a("d1e7"),c=a("5c6c"),u=a("fc6a"),d=a("c04e"),f=a("5135"),h=a("0cfb"),v=Object.getOwnPropertyDescriptor;i.f=o?v:function(g,y){if(g=u(g),y=d(y,!0),h)try{return v(g,y)}catch{}if(f(g,y))return c(!l.f.call(g,y),g[y])}},"0cfb":function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("cc12");s.exports=!o&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,i,a){var o=a("23e7"),l=a("d58f").left,c=a("a640"),u=a("ae40"),d=c("reduce"),f=u("reduce",{1:0});o({target:"Array",proto:!0,forced:!d||!f},{reduce:function(v){return l(this,v,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,i,a){var o=a("c6b6"),l=a("9263");s.exports=function(c,u){var d=c.exec;if(typeof d=="function"){var f=d.call(c,u);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(o(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,u)}},"159b":function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("17c2"),u=a("9112");for(var d in l){var f=o[d],h=f&&f.prototype;if(h&&h.forEach!==c)try{u(h,"forEach",c)}catch{h.forEach=c}}},"17c2":function(s,i,a){var o=a("b727").forEach,l=a("a640"),c=a("ae40"),u=l("forEach"),d=c("forEach");s.exports=!u||!d?function(h){return o(this,h,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,i,a){var o=a("d066");s.exports=o("document","documentElement")},"1c0b":function(s,i){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},"1c7e":function(s,i,a){var o=a("b622"),l=o("iterator"),c=!1;try{var u=0,d={next:function(){return{done:!!u++}},return:function(){c=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}s.exports=function(f,h){if(!h&&!c)return!1;var v=!1;try{var p={};p[l]=function(){return{next:function(){return{done:v=!0}}}},f(p)}catch{}return v}},"1d80":function(s,i){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},"1dde":function(s,i,a){var o=a("d039"),l=a("b622"),c=a("2d00"),u=l("species");s.exports=function(d){return c>=51||!o(function(){var f=[],h=f.constructor={};return h[u]=function(){return{foo:1}},f[d](Boolean).foo!==1})}},"23cb":function(s,i,a){var o=a("a691"),l=Math.max,c=Math.min;s.exports=function(u,d){var f=o(u);return f<0?l(f+d,0):c(f,d)}},"23e7":function(s,i,a){var o=a("da84"),l=a("06cf").f,c=a("9112"),u=a("6eeb"),d=a("ce4e"),f=a("e893"),h=a("94ca");s.exports=function(v,p){var g=v.target,y=v.global,E=v.stat,S,I,R,D,C,_;if(y?I=o:E?I=o[g]||d(g,{}):I=(o[g]||{}).prototype,I)for(R in p){if(C=p[R],v.noTargetGet?(_=l(I,R),D=_&&_.value):D=I[R],S=h(y?R:g+(E?".":"#")+R,v.forced),!S&&D!==void 0){if(typeof C==typeof D)continue;f(C,D)}(v.sham||D&&D.sham)&&c(C,"sham",!0),u(I,R,C,v)}}},"241c":function(s,i,a){var o=a("ca84"),l=a("7839"),c=l.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(d){return o(d,c)}},"25f0":function(s,i,a){var o=a("6eeb"),l=a("825a"),c=a("d039"),u=a("ad6d"),d="toString",f=RegExp.prototype,h=f[d],v=c(function(){return h.call({source:"a",flags:"b"})!="/a/b"}),p=h.name!=d;(v||p)&&o(RegExp.prototype,d,function(){var y=l(this),E=String(y.source),S=y.flags,I=String(S===void 0&&y instanceof RegExp&&!("flags"in f)?u.call(y):S);return"/"+E+"/"+I},{unsafe:!0})},"2ca0":function(s,i,a){var o=a("23e7"),l=a("06cf").f,c=a("50c4"),u=a("5a34"),d=a("1d80"),f=a("ab13"),h=a("c430"),v="".startsWith,p=Math.min,g=f("startsWith"),y=!h&&!g&&!!function(){var E=l(String.prototype,"startsWith");return E&&!E.writable}();o({target:"String",proto:!0,forced:!y&&!g},{startsWith:function(S){var I=String(d(this));u(S);var R=c(p(arguments.length>1?arguments[1]:void 0,I.length)),D=String(S);return v?v.call(I,D,R):I.slice(R,R+D.length)===D}})},"2d00":function(s,i,a){var o=a("da84"),l=a("342f"),c=o.process,u=c&&c.versions,d=u&&u.v8,f,h;d?(f=d.split("."),h=f[0]+f[1]):l&&(f=l.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=l.match(/Chrome\/(\d+)/),f&&(h=f[1]))),s.exports=h&&+h},"342f":function(s,i,a){var o=a("d066");s.exports=o("navigator","userAgent")||""},"35a1":function(s,i,a){var o=a("f5df"),l=a("3f8c"),c=a("b622"),u=c("iterator");s.exports=function(d){if(d!=null)return d[u]||d["@@iterator"]||l[o(d)]}},"37e8":function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("825a"),u=a("df75");s.exports=o?Object.defineProperties:function(f,h){c(f);for(var v=u(h),p=v.length,g=0,y;p>g;)l.f(f,y=v[g++],h[y]);return f}},"3bbe":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(s,i,a){var o=a("6547").charAt,l=a("69f3"),c=a("7dd0"),u="String Iterator",d=l.set,f=l.getterFor(u);c(String,"String",function(h){d(this,{type:u,string:String(h),index:0})},function(){var v=f(this),p=v.string,g=v.index,y;return g>=p.length?{value:void 0,done:!0}:(y=o(p,g),v.index+=y.length,{value:y,done:!1})})},"3f8c":function(s,i){s.exports={}},4160:function(s,i,a){var o=a("23e7"),l=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(s,i,a){var o=a("da84");s.exports=o},"44ad":function(s,i,a){var o=a("d039"),l=a("c6b6"),c="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return l(u)=="String"?c.call(u,""):Object(u)}:Object},"44d2":function(s,i,a){var o=a("b622"),l=a("7c73"),c=a("9bf2"),u=o("unscopables"),d=Array.prototype;d[u]==null&&c.f(d,u,{configurable:!0,value:l(null)}),s.exports=function(f){d[u][f]=!0}},"44e7":function(s,i,a){var o=a("861d"),l=a("c6b6"),c=a("b622"),u=c("match");s.exports=function(d){var f;return o(d)&&((f=d[u])!==void 0?!!f:l(d)=="RegExp")}},4930:function(s,i,a){var o=a("d039");s.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(s,i,a){var o=a("fc6a"),l=a("50c4"),c=a("23cb"),u=function(d){return function(f,h,v){var p=o(f),g=l(p.length),y=c(v,g),E;if(d&&h!=h){for(;g>y;)if(E=p[y++],E!=E)return!0}else for(;g>y;y++)if((d||y in p)&&p[y]===h)return d||y||0;return!d&&-1}};s.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(s,i,a){var o=a("23e7"),l=a("b727").filter,c=a("1dde"),u=a("ae40"),d=c("filter"),f=u("filter");o({target:"Array",proto:!0,forced:!d||!f},{filter:function(v){return l(this,v,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,i,a){var o=a("0366"),l=a("7b0b"),c=a("9bdd"),u=a("e95a"),d=a("50c4"),f=a("8418"),h=a("35a1");s.exports=function(p){var g=l(p),y=typeof this=="function"?this:Array,E=arguments.length,S=E>1?arguments[1]:void 0,I=S!==void 0,R=h(g),D=0,C,_,b,x,w,A;if(I&&(S=o(S,E>2?arguments[2]:void 0,2)),R!=null&&!(y==Array&&u(R)))for(x=R.call(g),w=x.next,_=new y;!(b=w.call(x)).done;D++)A=I?c(x,S,[b.value,D],!0):b.value,f(_,D,A);else for(C=d(g.length),_=new y(C);C>D;D++)A=I?S(g[D],D):g[D],f(_,D,A);return _.length=D,_}},"4fad":function(s,i,a){var o=a("23e7"),l=a("6f53").entries;o({target:"Object",stat:!0},{entries:function(u){return l(u)}})},"50c4":function(s,i,a){var o=a("a691"),l=Math.min;s.exports=function(c){return c>0?l(o(c),9007199254740991):0}},5135:function(s,i){var a={}.hasOwnProperty;s.exports=function(o,l){return a.call(o,l)}},5319:function(s,i,a){var o=a("d784"),l=a("825a"),c=a("7b0b"),u=a("50c4"),d=a("a691"),f=a("1d80"),h=a("8aa5"),v=a("14c3"),p=Math.max,g=Math.min,y=Math.floor,E=/\$([$&'`]|\d\d?|<[^>]*>)/g,S=/\$([$&'`]|\d\d?)/g,I=function(R){return R===void 0?R:String(R)};o("replace",2,function(R,D,C,_){var b=_.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,x=_.REPLACE_KEEPS_$0,w=b?"$":"$0";return[function(L,G){var P=f(this),M=L==null?void 0:L[R];return M!==void 0?M.call(L,P,G):D.call(String(P),L,G)},function(k,L){if(!b&&x||typeof L=="string"&&L.indexOf(w)===-1){var G=C(D,k,this,L);if(G.done)return G.value}var P=l(k),M=String(this),H=typeof L=="function";H||(L=String(L));var B=P.global;if(B){var Q=P.unicode;P.lastIndex=0}for(var j=[];;){var O=v(P,M);if(O===null||(j.push(O),!B))break;var W=String(O[0]);W===""&&(P.lastIndex=h(M,u(P.lastIndex),Q))}for(var K="",se=0,ve=0;ve<j.length;ve++){O=j[ve];for(var ie=String(O[0]),de=p(g(d(O.index),M.length),0),ee=[],Y=1;Y<O.length;Y++)ee.push(I(O[Y]));var ge=O.groups;if(H){var q=[ie].concat(ee,de,M);ge!==void 0&&q.push(ge);var z=String(L.apply(void 0,q))}else z=A(ie,M,de,ee,ge,L);de>=se&&(K+=M.slice(se,de)+z,se=de+ie.length)}return K+M.slice(se)}];function A(k,L,G,P,M,H){var B=G+k.length,Q=P.length,j=S;return M!==void 0&&(M=c(M),j=E),D.call(H,j,function(O,W){var K;switch(W.charAt(0)){case"$":return"$";case"&":return k;case"`":return L.slice(0,G);case"'":return L.slice(B);case"<":K=M[W.slice(1,-1)];break;default:var se=+W;if(se===0)return O;if(se>Q){var ve=y(se/10);return ve===0?O:ve<=Q?P[ve-1]===void 0?W.charAt(1):P[ve-1]+W.charAt(1):O}K=P[se-1]}return K===void 0?"":K})}})},5692:function(s,i,a){var o=a("c430"),l=a("c6cd");(s.exports=function(c,u){return l[c]||(l[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,i,a){var o=a("d066"),l=a("241c"),c=a("7418"),u=a("825a");s.exports=o("Reflect","ownKeys")||function(f){var h=l.f(u(f)),v=c.f;return v?h.concat(v(f)):h}},"5a34":function(s,i,a){var o=a("44e7");s.exports=function(l){if(o(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(s,i){s.exports=function(a,o){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:o}}},"5db7":function(s,i,a){var o=a("23e7"),l=a("a2bf"),c=a("7b0b"),u=a("50c4"),d=a("1c0b"),f=a("65f0");o({target:"Array",proto:!0},{flatMap:function(v){var p=c(this),g=u(p.length),y;return d(v),y=f(p,0),y.length=l(y,p,p,g,0,1,v,arguments.length>1?arguments[1]:void 0),y}})},6547:function(s,i,a){var o=a("a691"),l=a("1d80"),c=function(u){return function(d,f){var h=String(l(d)),v=o(f),p=h.length,g,y;return v<0||v>=p?u?"":void 0:(g=h.charCodeAt(v),g<55296||g>56319||v+1===p||(y=h.charCodeAt(v+1))<56320||y>57343?u?h.charAt(v):g:u?h.slice(v,v+2):(g-55296<<10)+(y-56320)+65536)}};s.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(s,i,a){var o=a("861d"),l=a("e8b5"),c=a("b622"),u=c("species");s.exports=function(d,f){var h;return l(d)&&(h=d.constructor,typeof h=="function"&&(h===Array||l(h.prototype))?h=void 0:o(h)&&(h=h[u],h===null&&(h=void 0))),new(h===void 0?Array:h)(f===0?0:f)}},"69f3":function(s,i,a){var o=a("7f9a"),l=a("da84"),c=a("861d"),u=a("9112"),d=a("5135"),f=a("f772"),h=a("d012"),v=l.WeakMap,p,g,y,E=function(b){return y(b)?g(b):p(b,{})},S=function(b){return function(x){var w;if(!c(x)||(w=g(x)).type!==b)throw TypeError("Incompatible receiver, "+b+" required");return w}};if(o){var I=new v,R=I.get,D=I.has,C=I.set;p=function(b,x){return C.call(I,b,x),x},g=function(b){return R.call(I,b)||{}},y=function(b){return D.call(I,b)}}else{var _=f("state");h[_]=!0,p=function(b,x){return u(b,_,x),x},g=function(b){return d(b,_)?b[_]:{}},y=function(b){return d(b,_)}}s.exports={set:p,get:g,has:y,enforce:E,getterFor:S}},"6eeb":function(s,i,a){var o=a("da84"),l=a("9112"),c=a("5135"),u=a("ce4e"),d=a("8925"),f=a("69f3"),h=f.get,v=f.enforce,p=String(String).split("String");(s.exports=function(g,y,E,S){var I=S?!!S.unsafe:!1,R=S?!!S.enumerable:!1,D=S?!!S.noTargetGet:!1;if(typeof E=="function"&&(typeof y=="string"&&!c(E,"name")&&l(E,"name",y),v(E).source=p.join(typeof y=="string"?y:"")),g===o){R?g[y]=E:u(y,E);return}else I?!D&&g[y]&&(R=!0):delete g[y];R?g[y]=E:l(g,y,E)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||d(this)})},"6f53":function(s,i,a){var o=a("83ab"),l=a("df75"),c=a("fc6a"),u=a("d1e7").f,d=function(f){return function(h){for(var v=c(h),p=l(v),g=p.length,y=0,E=[],S;g>y;)S=p[y++],(!o||u.call(v,S))&&E.push(f?[S,v[S]]:v[S]);return E}};s.exports={entries:d(!0),values:d(!1)}},"73d9":function(s,i,a){var o=a("44d2");o("flatMap")},7418:function(s,i){i.f=Object.getOwnPropertySymbols},"746f":function(s,i,a){var o=a("428f"),l=a("5135"),c=a("e538"),u=a("9bf2").f;s.exports=function(d){var f=o.Symbol||(o.Symbol={});l(f,d)||u(f,d,{value:c.f(d)})}},7839:function(s,i){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,i,a){var o=a("1d80");s.exports=function(l){return Object(o(l))}},"7c73":function(s,i,a){var o=a("825a"),l=a("37e8"),c=a("7839"),u=a("d012"),d=a("1be4"),f=a("cc12"),h=a("f772"),v=">",p="<",g="prototype",y="script",E=h("IE_PROTO"),S=function(){},I=function(b){return p+y+v+b+p+"/"+y+v},R=function(b){b.write(I("")),b.close();var x=b.parentWindow.Object;return b=null,x},D=function(){var b=f("iframe"),x="java"+y+":",w;return b.style.display="none",d.appendChild(b),b.src=String(x),w=b.contentWindow.document,w.open(),w.write(I("document.F=Object")),w.close(),w.F},C,_=function(){try{C=document.domain&&new ActiveXObject("htmlfile")}catch{}_=C?R(C):D();for(var b=c.length;b--;)delete _[g][c[b]];return _()};u[E]=!0,s.exports=Object.create||function(x,w){var A;return x!==null?(S[g]=o(x),A=new S,S[g]=null,A[E]=x):A=_(),w===void 0?A:l(A,w)}},"7dd0":function(s,i,a){var o=a("23e7"),l=a("9ed3"),c=a("e163"),u=a("d2bb"),d=a("d44e"),f=a("9112"),h=a("6eeb"),v=a("b622"),p=a("c430"),g=a("3f8c"),y=a("ae93"),E=y.IteratorPrototype,S=y.BUGGY_SAFARI_ITERATORS,I=v("iterator"),R="keys",D="values",C="entries",_=function(){return this};s.exports=function(b,x,w,A,k,L,G){l(w,x,A);var P=function(ve){if(ve===k&&j)return j;if(!S&&ve in B)return B[ve];switch(ve){case R:return function(){return new w(this,ve)};case D:return function(){return new w(this,ve)};case C:return function(){return new w(this,ve)}}return function(){return new w(this)}},M=x+" Iterator",H=!1,B=b.prototype,Q=B[I]||B["@@iterator"]||k&&B[k],j=!S&&Q||P(k),O=x=="Array"&&B.entries||Q,W,K,se;if(O&&(W=c(O.call(new b)),E!==Object.prototype&&W.next&&(!p&&c(W)!==E&&(u?u(W,E):typeof W[I]!="function"&&f(W,I,_)),d(W,M,!0,!0),p&&(g[M]=_))),k==D&&Q&&Q.name!==D&&(H=!0,j=function(){return Q.call(this)}),(!p||G)&&B[I]!==j&&f(B,I,j),g[x]=j,k)if(K={values:P(D),keys:L?j:P(R),entries:P(C)},G)for(se in K)(S||H||!(se in B))&&h(B,se,K[se]);else o({target:x,proto:!0,forced:S||H},K);return K}},"7f9a":function(s,i,a){var o=a("da84"),l=a("8925"),c=o.WeakMap;s.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(s,i,a){var o=a("d039");s.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,i,a){var o=a("c04e"),l=a("9bf2"),c=a("5c6c");s.exports=function(u,d,f){var h=o(d);h in u?l.f(u,h,c(0,f)):u[h]=f}},"861d":function(s,i){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},8875:function(s,i,a){var o,l,c;(function(u,d){l=[],o=d,c=typeof o=="function"?o.apply(i,l):o,c!==void 0&&(s.exports=c)})(typeof self<"u"?self:this,function(){function u(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(C){var f=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,h=/@([^@]*):(\d+):(\d+)\s*$/ig,v=f.exec(C.stack)||h.exec(C.stack),p=v&&v[1]||!1,g=v&&v[2]||!1,y=document.location.href.replace(document.location.hash,""),E,S,I,R=document.getElementsByTagName("script");p===y&&(E=document.documentElement.outerHTML,S=new RegExp("(?:[^\\n]+?\\n){0,"+(g-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),I=E.replace(S,"$1").trim());for(var D=0;D<R.length;D++)if(R[D].readyState==="interactive"||R[D].src===p||p===y&&R[D].innerHTML&&R[D].innerHTML.trim()===I)return R[D];return null}}return u})},8925:function(s,i,a){var o=a("c6cd"),l=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(c){return l.call(c)}),s.exports=o.inspectSource},"8aa5":function(s,i,a){var o=a("6547").charAt;s.exports=function(l,c,u){return c+(u?o(l,c).length:1)}},"8bbf":function(s,i){s.exports=r},"90e3":function(s,i){var a=0,o=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+o).toString(36)}},9112:function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("5c6c");s.exports=o?function(u,d,f){return l.f(u,d,c(1,f))}:function(u,d,f){return u[d]=f,u}},9263:function(s,i,a){var o=a("ad6d"),l=a("9f7f"),c=RegExp.prototype.exec,u=String.prototype.replace,d=c,f=function(){var g=/a/,y=/b*/g;return c.call(g,"a"),c.call(y,"a"),g.lastIndex!==0||y.lastIndex!==0}(),h=l.UNSUPPORTED_Y||l.BROKEN_CARET,v=/()??/.exec("")[1]!==void 0,p=f||v||h;p&&(d=function(y){var E=this,S,I,R,D,C=h&&E.sticky,_=o.call(E),b=E.source,x=0,w=y;return C&&(_=_.replace("y",""),_.indexOf("g")===-1&&(_+="g"),w=String(y).slice(E.lastIndex),E.lastIndex>0&&(!E.multiline||E.multiline&&y[E.lastIndex-1]!==`
`)&&(b="(?: "+b+")",w=" "+w,x++),I=new RegExp("^(?:"+b+")",_)),v&&(I=new RegExp("^"+b+"$(?!\\s)",_)),f&&(S=E.lastIndex),R=c.call(C?I:E,w),C?R?(R.input=R.input.slice(x),R[0]=R[0].slice(x),R.index=E.lastIndex,E.lastIndex+=R[0].length):E.lastIndex=0:f&&R&&(E.lastIndex=E.global?R.index+R[0].length:S),v&&R&&R.length>1&&u.call(R[0],I,function(){for(D=1;D<arguments.length-2;D++)arguments[D]===void 0&&(R[D]=void 0)}),R}),s.exports=d},"94ca":function(s,i,a){var o=a("d039"),l=/#|\.prototype\./,c=function(v,p){var g=d[u(v)];return g==h?!0:g==f?!1:typeof p=="function"?o(p):!!p},u=c.normalize=function(v){return String(v).replace(l,".").toLowerCase()},d=c.data={},f=c.NATIVE="N",h=c.POLYFILL="P";s.exports=c},"99af":function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("e8b5"),u=a("861d"),d=a("7b0b"),f=a("50c4"),h=a("8418"),v=a("65f0"),p=a("1dde"),g=a("b622"),y=a("2d00"),E=g("isConcatSpreadable"),S=9007199254740991,I="Maximum allowed index exceeded",R=y>=51||!l(function(){var b=[];return b[E]=!1,b.concat()[0]!==b}),D=p("concat"),C=function(b){if(!u(b))return!1;var x=b[E];return x!==void 0?!!x:c(b)},_=!R||!D;o({target:"Array",proto:!0,forced:_},{concat:function(x){var w=d(this),A=v(w,0),k=0,L,G,P,M,H;for(L=-1,P=arguments.length;L<P;L++)if(H=L===-1?w:arguments[L],C(H)){if(M=f(H.length),k+M>S)throw TypeError(I);for(G=0;G<M;G++,k++)G in H&&h(A,k,H[G])}else{if(k>=S)throw TypeError(I);h(A,k++,H)}return A.length=k,A}})},"9bdd":function(s,i,a){var o=a("825a");s.exports=function(l,c,u,d){try{return d?c(o(u)[0],u[1]):c(u)}catch(h){var f=l.return;throw f!==void 0&&o(f.call(l)),h}}},"9bf2":function(s,i,a){var o=a("83ab"),l=a("0cfb"),c=a("825a"),u=a("c04e"),d=Object.defineProperty;i.f=o?d:function(h,v,p){if(c(h),v=u(v,!0),c(p),l)try{return d(h,v,p)}catch{}if("get"in p||"set"in p)throw TypeError("Accessors not supported");return"value"in p&&(h[v]=p.value),h}},"9ed3":function(s,i,a){var o=a("ae93").IteratorPrototype,l=a("7c73"),c=a("5c6c"),u=a("d44e"),d=a("3f8c"),f=function(){return this};s.exports=function(h,v,p){var g=v+" Iterator";return h.prototype=l(o,{next:c(1,p)}),u(h,g,!1,!0),d[g]=f,h}},"9f7f":function(s,i,a){var o=a("d039");function l(c,u){return RegExp(c,u)}i.UNSUPPORTED_Y=o(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),i.BROKEN_CARET=o(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(s,i,a){var o=a("e8b5"),l=a("50c4"),c=a("0366"),u=function(d,f,h,v,p,g,y,E){for(var S=p,I=0,R=y?c(y,E,3):!1,D;I<v;){if(I in h){if(D=R?R(h[I],I,f):h[I],g>0&&o(D))S=u(d,f,D,l(D.length),S,g-1)-1;else{if(S>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[S]=D}S++}I++}return S};s.exports=u},a352:function(s,i){s.exports=n},a434:function(s,i,a){var o=a("23e7"),l=a("23cb"),c=a("a691"),u=a("50c4"),d=a("7b0b"),f=a("65f0"),h=a("8418"),v=a("1dde"),p=a("ae40"),g=v("splice"),y=p("splice",{ACCESSORS:!0,0:0,1:2}),E=Math.max,S=Math.min,I=9007199254740991,R="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!g||!y},{splice:function(C,_){var b=d(this),x=u(b.length),w=l(C,x),A=arguments.length,k,L,G,P,M,H;if(A===0?k=L=0:A===1?(k=0,L=x-w):(k=A-2,L=S(E(c(_),0),x-w)),x+k-L>I)throw TypeError(R);for(G=f(b,L),P=0;P<L;P++)M=w+P,M in b&&h(G,P,b[M]);if(G.length=L,k<L){for(P=w;P<x-L;P++)M=P+L,H=P+k,M in b?b[H]=b[M]:delete b[H];for(P=x;P>x-L+k;P--)delete b[P-1]}else if(k>L)for(P=x-L;P>w;P--)M=P+L-1,H=P+k-1,M in b?b[H]=b[M]:delete b[H];for(P=0;P<k;P++)b[P+w]=arguments[P+2];return b.length=x-L+k,G}})},a4d3:function(s,i,a){var o=a("23e7"),l=a("da84"),c=a("d066"),u=a("c430"),d=a("83ab"),f=a("4930"),h=a("fdbf"),v=a("d039"),p=a("5135"),g=a("e8b5"),y=a("861d"),E=a("825a"),S=a("7b0b"),I=a("fc6a"),R=a("c04e"),D=a("5c6c"),C=a("7c73"),_=a("df75"),b=a("241c"),x=a("057f"),w=a("7418"),A=a("06cf"),k=a("9bf2"),L=a("d1e7"),G=a("9112"),P=a("6eeb"),M=a("5692"),H=a("f772"),B=a("d012"),Q=a("90e3"),j=a("b622"),O=a("e538"),W=a("746f"),K=a("d44e"),se=a("69f3"),ve=a("b727").forEach,ie=H("hidden"),de="Symbol",ee="prototype",Y=j("toPrimitive"),ge=se.set,q=se.getterFor(de),z=Object[ee],J=l.Symbol,he=c("JSON","stringify"),re=A.f,X=k.f,te=x.f,Se=L.f,Ee=M("symbols"),be=M("op-symbols"),ke=M("string-to-symbol-registry"),Be=M("symbol-to-string-registry"),Ie=M("wks"),je=l.QObject,Ue=!je||!je[ee]||!je[ee].findChild,He=d&&v(function(){return C(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a!=7})?function(dt,at,ft){var Ct=re(z,at);Ct&&delete z[at],X(dt,at,ft),Ct&&dt!==z&&X(z,at,Ct)}:X,qe=function(dt,at){var ft=Ee[dt]=C(J[ee]);return ge(ft,{type:de,tag:dt,description:at}),d||(ft.description=at),ft},ye=h?function(dt){return typeof dt=="symbol"}:function(dt){return Object(dt)instanceof J},xe=function(at,ft,Ct){at===z&&xe(be,ft,Ct),E(at);var Ft=R(ft,!0);return E(Ct),p(Ee,Ft)?(Ct.enumerable?(p(at,ie)&&at[ie][Ft]&&(at[ie][Ft]=!1),Ct=C(Ct,{enumerable:D(0,!1)})):(p(at,ie)||X(at,ie,D(1,{})),at[ie][Ft]=!0),He(at,Ft,Ct)):X(at,Ft,Ct)},_e=function(at,ft){E(at);var Ct=I(ft),Ft=_(Ct).concat(gt(Ct));return ve(Ft,function(vr){(!d||We.call(Ct,vr))&&xe(at,vr,Ct[vr])}),at},Pe=function(at,ft){return ft===void 0?C(at):_e(C(at),ft)},We=function(at){var ft=R(at,!0),Ct=Se.call(this,ft);return this===z&&p(Ee,ft)&&!p(be,ft)?!1:Ct||!p(this,ft)||!p(Ee,ft)||p(this,ie)&&this[ie][ft]?Ct:!0},rt=function(at,ft){var Ct=I(at),Ft=R(ft,!0);if(!(Ct===z&&p(Ee,Ft)&&!p(be,Ft))){var vr=re(Ct,Ft);return vr&&p(Ee,Ft)&&!(p(Ct,ie)&&Ct[ie][Ft])&&(vr.enumerable=!0),vr}},mt=function(at){var ft=te(I(at)),Ct=[];return ve(ft,function(Ft){!p(Ee,Ft)&&!p(B,Ft)&&Ct.push(Ft)}),Ct},gt=function(at){var ft=at===z,Ct=te(ft?be:I(at)),Ft=[];return ve(Ct,function(vr){p(Ee,vr)&&(!ft||p(z,vr))&&Ft.push(Ee[vr])}),Ft};if(f||(J=function(){if(this instanceof J)throw TypeError("Symbol is not a constructor");var at=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ft=Q(at),Ct=function(Ft){this===z&&Ct.call(be,Ft),p(this,ie)&&p(this[ie],ft)&&(this[ie][ft]=!1),He(this,ft,D(1,Ft))};return d&&Ue&&He(z,ft,{configurable:!0,set:Ct}),qe(ft,at)},P(J[ee],"toString",function(){return q(this).tag}),P(J,"withoutSetter",function(dt){return qe(Q(dt),dt)}),L.f=We,k.f=xe,A.f=rt,b.f=x.f=mt,w.f=gt,O.f=function(dt){return qe(j(dt),dt)},d&&(X(J[ee],"description",{configurable:!0,get:function(){return q(this).description}}),u||P(z,"propertyIsEnumerable",We,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:J}),ve(_(Ie),function(dt){W(dt)}),o({target:de,stat:!0,forced:!f},{for:function(dt){var at=String(dt);if(p(ke,at))return ke[at];var ft=J(at);return ke[at]=ft,Be[ft]=at,ft},keyFor:function(at){if(!ye(at))throw TypeError(at+" is not a symbol");if(p(Be,at))return Be[at]},useSetter:function(){Ue=!0},useSimple:function(){Ue=!1}}),o({target:"Object",stat:!0,forced:!f,sham:!d},{create:Pe,defineProperty:xe,defineProperties:_e,getOwnPropertyDescriptor:rt}),o({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:mt,getOwnPropertySymbols:gt}),o({target:"Object",stat:!0,forced:v(function(){w.f(1)})},{getOwnPropertySymbols:function(at){return w.f(S(at))}}),he){var Lt=!f||v(function(){var dt=J();return he([dt])!="[null]"||he({a:dt})!="{}"||he(Object(dt))!="{}"});o({target:"JSON",stat:!0,forced:Lt},{stringify:function(at,ft,Ct){for(var Ft=[at],vr=1,$n;arguments.length>vr;)Ft.push(arguments[vr++]);if($n=ft,!(!y(ft)&&at===void 0||ye(at)))return g(ft)||(ft=function(di,ts){if(typeof $n=="function"&&(ts=$n.call(this,di,ts)),!ye(ts))return ts}),Ft[1]=ft,he.apply(null,Ft)}})}J[ee][Y]||G(J[ee],Y,J[ee].valueOf),K(J,de),B[ie]=!0},a630:function(s,i,a){var o=a("23e7"),l=a("4df4"),c=a("1c7e"),u=!c(function(d){Array.from(d)});o({target:"Array",stat:!0,forced:u},{from:l})},a640:function(s,i,a){var o=a("d039");s.exports=function(l,c){var u=[][l];return!!u&&o(function(){u.call(null,c||function(){throw 1},1)})}},a691:function(s,i){var a=Math.ceil,o=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(l>0?o:a)(l)}},ab13:function(s,i,a){var o=a("b622"),l=o("match");s.exports=function(c){var u=/./;try{"/./"[c](u)}catch{try{return u[l]=!1,"/./"[c](u)}catch{}}return!1}},ac1f:function(s,i,a){var o=a("23e7"),l=a("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(s,i,a){var o=a("825a");s.exports=function(){var l=o(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("5135"),u=Object.defineProperty,d={},f=function(h){throw h};s.exports=function(h,v){if(c(d,h))return d[h];v||(v={});var p=[][h],g=c(v,"ACCESSORS")?v.ACCESSORS:!1,y=c(v,0)?v[0]:f,E=c(v,1)?v[1]:void 0;return d[h]=!!p&&!l(function(){if(g&&!o)return!0;var S={length:-1};g?u(S,1,{enumerable:!0,get:f}):S[1]=1,p.call(S,y,E)})}},ae93:function(s,i,a){var o=a("e163"),l=a("9112"),c=a("5135"),u=a("b622"),d=a("c430"),f=u("iterator"),h=!1,v=function(){return this},p,g,y;[].keys&&(y=[].keys(),"next"in y?(g=o(o(y)),g!==Object.prototype&&(p=g)):h=!0),p==null&&(p={}),!d&&!c(p,f)&&l(p,f,v),s.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:h}},b041:function(s,i,a){var o=a("00ee"),l=a("f5df");s.exports=o?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(s,i,a){var o=a("83ab"),l=a("9bf2").f,c=Function.prototype,u=c.toString,d=/^\s*function ([^ (]*)/,f="name";o&&!(f in c)&&l(c,f,{configurable:!0,get:function(){try{return u.call(this).match(d)[1]}catch{return""}}})},b622:function(s,i,a){var o=a("da84"),l=a("5692"),c=a("5135"),u=a("90e3"),d=a("4930"),f=a("fdbf"),h=l("wks"),v=o.Symbol,p=f?v:v&&v.withoutSetter||u;s.exports=function(g){return c(h,g)||(d&&c(v,g)?h[g]=v[g]:h[g]=p("Symbol."+g)),h[g]}},b64b:function(s,i,a){var o=a("23e7"),l=a("7b0b"),c=a("df75"),u=a("d039"),d=u(function(){c(1)});o({target:"Object",stat:!0,forced:d},{keys:function(h){return c(l(h))}})},b727:function(s,i,a){var o=a("0366"),l=a("44ad"),c=a("7b0b"),u=a("50c4"),d=a("65f0"),f=[].push,h=function(v){var p=v==1,g=v==2,y=v==3,E=v==4,S=v==6,I=v==5||S;return function(R,D,C,_){for(var b=c(R),x=l(b),w=o(D,C,3),A=u(x.length),k=0,L=_||d,G=p?L(R,A):g?L(R,0):void 0,P,M;A>k;k++)if((I||k in x)&&(P=x[k],M=w(P,k,b),v)){if(p)G[k]=M;else if(M)switch(v){case 3:return!0;case 5:return P;case 6:return k;case 2:f.call(G,P)}else if(E)return!1}return S?-1:y||E?E:G}};s.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},c04e:function(s,i,a){var o=a("861d");s.exports=function(l,c){if(!o(l))return l;var u,d;if(c&&typeof(u=l.toString)=="function"&&!o(d=u.call(l))||typeof(u=l.valueOf)=="function"&&!o(d=u.call(l))||!c&&typeof(u=l.toString)=="function"&&!o(d=u.call(l)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(s,i){s.exports=!1},c6b6:function(s,i){var a={}.toString;s.exports=function(o){return a.call(o).slice(8,-1)}},c6cd:function(s,i,a){var o=a("da84"),l=a("ce4e"),c="__core-js_shared__",u=o[c]||l(c,{});s.exports=u},c740:function(s,i,a){var o=a("23e7"),l=a("b727").findIndex,c=a("44d2"),u=a("ae40"),d="findIndex",f=!0,h=u(d);d in[]&&Array(1)[d](function(){f=!1}),o({target:"Array",proto:!0,forced:f||!h},{findIndex:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}}),c(d)},c8ba:function(s,i){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}s.exports=a},c975:function(s,i,a){var o=a("23e7"),l=a("4d64").indexOf,c=a("a640"),u=a("ae40"),d=[].indexOf,f=!!d&&1/[1].indexOf(1,-0)<0,h=c("indexOf"),v=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:f||!h||!v},{indexOf:function(g){return f?d.apply(this,arguments)||0:l(this,g,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,i,a){var o=a("5135"),l=a("fc6a"),c=a("4d64").indexOf,u=a("d012");s.exports=function(d,f){var h=l(d),v=0,p=[],g;for(g in h)!o(u,g)&&o(h,g)&&p.push(g);for(;f.length>v;)o(h,g=f[v++])&&(~c(p,g)||p.push(g));return p}},caad:function(s,i,a){var o=a("23e7"),l=a("4d64").includes,c=a("44d2"),u=a("ae40"),d=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!d},{includes:function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(s,i,a){var o=a("da84"),l=a("861d"),c=o.document,u=l(c)&&l(c.createElement);s.exports=function(d){return u?c.createElement(d):{}}},ce4e:function(s,i,a){var o=a("da84"),l=a("9112");s.exports=function(c,u){try{l(o,c,u)}catch{o[c]=u}return u}},d012:function(s,i){s.exports={}},d039:function(s,i){s.exports=function(a){try{return!!a()}catch{return!0}}},d066:function(s,i,a){var o=a("428f"),l=a("da84"),c=function(u){return typeof u=="function"?u:void 0};s.exports=function(u,d){return arguments.length<2?c(o[u])||c(l[u]):o[u]&&o[u][d]||l[u]&&l[u][d]}},d1e7:function(s,i,a){var o={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!o.call({1:2},1);i.f=c?function(d){var f=l(this,d);return!!f&&f.enumerable}:o},d28b:function(s,i,a){var o=a("746f");o("iterator")},d2bb:function(s,i,a){var o=a("825a"),l=a("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,u={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(u,[]),c=u instanceof Array}catch{}return function(h,v){return o(h),l(v),c?d.call(h,v):h.__proto__=v,h}}():void 0)},d3b7:function(s,i,a){var o=a("00ee"),l=a("6eeb"),c=a("b041");o||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(s,i,a){var o=a("9bf2").f,l=a("5135"),c=a("b622"),u=c("toStringTag");s.exports=function(d,f,h){d&&!l(d=h?d:d.prototype,u)&&o(d,u,{configurable:!0,value:f})}},d58f:function(s,i,a){var o=a("1c0b"),l=a("7b0b"),c=a("44ad"),u=a("50c4"),d=function(f){return function(h,v,p,g){o(v);var y=l(h),E=c(y),S=u(y.length),I=f?S-1:0,R=f?-1:1;if(p<2)for(;;){if(I in E){g=E[I],I+=R;break}if(I+=R,f?I<0:S<=I)throw TypeError("Reduce of empty array with no initial value")}for(;f?I>=0:S>I;I+=R)I in E&&(g=v(g,E[I],I,y));return g}};s.exports={left:d(!1),right:d(!0)}},d784:function(s,i,a){a("ac1f");var o=a("6eeb"),l=a("d039"),c=a("b622"),u=a("9263"),d=a("9112"),f=c("species"),h=!l(function(){var E=/./;return E.exec=function(){var S=[];return S.groups={a:"7"},S},"".replace(E,"$<a>")!=="7"}),v=function(){return"a".replace(/./,"$0")==="$0"}(),p=c("replace"),g=function(){return/./[p]?/./[p]("a","$0")==="":!1}(),y=!l(function(){var E=/(?:)/,S=E.exec;E.exec=function(){return S.apply(this,arguments)};var I="ab".split(E);return I.length!==2||I[0]!=="a"||I[1]!=="b"});s.exports=function(E,S,I,R){var D=c(E),C=!l(function(){var k={};return k[D]=function(){return 7},""[E](k)!=7}),_=C&&!l(function(){var k=!1,L=/a/;return E==="split"&&(L={},L.constructor={},L.constructor[f]=function(){return L},L.flags="",L[D]=/./[D]),L.exec=function(){return k=!0,null},L[D](""),!k});if(!C||!_||E==="replace"&&!(h&&v&&!g)||E==="split"&&!y){var b=/./[D],x=I(D,""[E],function(k,L,G,P,M){return L.exec===u?C&&!M?{done:!0,value:b.call(L,G,P)}:{done:!0,value:k.call(G,L,P)}:{done:!1}},{REPLACE_KEEPS_$0:v,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}),w=x[0],A=x[1];o(String.prototype,E,w),o(RegExp.prototype,D,S==2?function(k,L){return A.call(k,this,L)}:function(k){return A.call(k,this)})}R&&d(RegExp.prototype[D],"sham",!0)}},d81d:function(s,i,a){var o=a("23e7"),l=a("b727").map,c=a("1dde"),u=a("ae40"),d=c("map"),f=u("map");o({target:"Array",proto:!0,forced:!d||!f},{map:function(v){return l(this,v,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,i,a){(function(o){var l=function(c){return c&&c.Math==Math&&c};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof o=="object"&&o)||Function("return this")()}).call(this,a("c8ba"))},dbb4:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("56ef"),u=a("fc6a"),d=a("06cf"),f=a("8418");o({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(v){for(var p=u(v),g=d.f,y=c(p),E={},S=0,I,R;y.length>S;)R=g(p,I=y[S++]),R!==void 0&&f(E,I,R);return E}})},dbf1:function(s,i,a){(function(o){a.d(i,"a",function(){return c});function l(){return typeof window<"u"?window.console:o.console}var c=l()}).call(this,a("c8ba"))},ddb0:function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("e260"),u=a("9112"),d=a("b622"),f=d("iterator"),h=d("toStringTag"),v=c.values;for(var p in l){var g=o[p],y=g&&g.prototype;if(y){if(y[f]!==v)try{u(y,f,v)}catch{y[f]=v}if(y[h]||u(y,h,p),l[p]){for(var E in c)if(y[E]!==c[E])try{u(y,E,c[E])}catch{y[E]=c[E]}}}}},df75:function(s,i,a){var o=a("ca84"),l=a("7839");s.exports=Object.keys||function(u){return o(u,l)}},e01a:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("da84"),u=a("5135"),d=a("861d"),f=a("9bf2").f,h=a("e893"),v=c.Symbol;if(l&&typeof v=="function"&&(!("description"in v.prototype)||v().description!==void 0)){var p={},g=function(){var D=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),C=this instanceof g?new v(D):D===void 0?v():v(D);return D===""&&(p[C]=!0),C};h(g,v);var y=g.prototype=v.prototype;y.constructor=g;var E=y.toString,S=String(v("test"))=="Symbol(test)",I=/^Symbol\((.*)\)[^)]+$/;f(y,"description",{configurable:!0,get:function(){var D=d(this)?this.valueOf():this,C=E.call(D);if(u(p,D))return"";var _=S?C.slice(7,-1):C.replace(I,"$1");return _===""?void 0:_}}),o({global:!0,forced:!0},{Symbol:g})}},e163:function(s,i,a){var o=a("5135"),l=a("7b0b"),c=a("f772"),u=a("e177"),d=c("IE_PROTO"),f=Object.prototype;s.exports=u?Object.getPrototypeOf:function(h){return h=l(h),o(h,d)?h[d]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?f:null}},e177:function(s,i,a){var o=a("d039");s.exports=!o(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(s,i,a){var o=a("fc6a"),l=a("44d2"),c=a("3f8c"),u=a("69f3"),d=a("7dd0"),f="Array Iterator",h=u.set,v=u.getterFor(f);s.exports=d(Array,"Array",function(p,g){h(this,{type:f,target:o(p),index:0,kind:g})},function(){var p=v(this),g=p.target,y=p.kind,E=p.index++;return!g||E>=g.length?(p.target=void 0,{value:void 0,done:!0}):y=="keys"?{value:E,done:!1}:y=="values"?{value:g[E],done:!1}:{value:[E,g[E]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("fc6a"),u=a("06cf").f,d=a("83ab"),f=l(function(){u(1)}),h=!d||f;o({target:"Object",stat:!0,forced:h,sham:!d},{getOwnPropertyDescriptor:function(p,g){return u(c(p),g)}})},e538:function(s,i,a){var o=a("b622");i.f=o},e893:function(s,i,a){var o=a("5135"),l=a("56ef"),c=a("06cf"),u=a("9bf2");s.exports=function(d,f){for(var h=l(f),v=u.f,p=c.f,g=0;g<h.length;g++){var y=h[g];o(d,y)||v(d,y,p(f,y))}}},e8b5:function(s,i,a){var o=a("c6b6");s.exports=Array.isArray||function(c){return o(c)=="Array"}},e95a:function(s,i,a){var o=a("b622"),l=a("3f8c"),c=o("iterator"),u=Array.prototype;s.exports=function(d){return d!==void 0&&(l.Array===d||u[c]===d)}},f5df:function(s,i,a){var o=a("00ee"),l=a("c6b6"),c=a("b622"),u=c("toStringTag"),d=l(function(){return arguments}())=="Arguments",f=function(h,v){try{return h[v]}catch{}};s.exports=o?l:function(h){var v,p,g;return h===void 0?"Undefined":h===null?"Null":typeof(p=f(v=Object(h),u))=="string"?p:d?l(v):(g=l(v))=="Object"&&typeof v.callee=="function"?"Arguments":g}},f772:function(s,i,a){var o=a("5692"),l=a("90e3"),c=o("keys");s.exports=function(u){return c[u]||(c[u]=l(u))}},fb15:function(s,i,a){if(a.r(i),typeof window<"u"){var o=window.document.currentScript;{var l=a("8875");o=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(a.p=c[1])}a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("159b"),a("a4d3"),a("e439"),a("dbb4"),a("b64b");function u(ye,xe,_e){return xe in ye?Object.defineProperty(ye,xe,{value:_e,enumerable:!0,configurable:!0,writable:!0}):ye[xe]=_e,ye}function d(ye,xe){var _e=Object.keys(ye);if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(ye);xe&&(Pe=Pe.filter(function(We){return Object.getOwnPropertyDescriptor(ye,We).enumerable})),_e.push.apply(_e,Pe)}return _e}function f(ye){for(var xe=1;xe<arguments.length;xe++){var _e=arguments[xe]!=null?arguments[xe]:{};xe%2?d(Object(_e),!0).forEach(function(Pe){u(ye,Pe,_e[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(_e)):d(Object(_e)).forEach(function(Pe){Object.defineProperty(ye,Pe,Object.getOwnPropertyDescriptor(_e,Pe))})}return ye}function h(ye){if(Array.isArray(ye))return ye}a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function v(ye,xe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ye)))){var _e=[],Pe=!0,We=!1,rt=void 0;try{for(var mt=ye[Symbol.iterator](),gt;!(Pe=(gt=mt.next()).done)&&(_e.push(gt.value),!(xe&&_e.length===xe));Pe=!0);}catch(Lt){We=!0,rt=Lt}finally{try{!Pe&&mt.return!=null&&mt.return()}finally{if(We)throw rt}}return _e}}a("a630"),a("fb6a"),a("b0c0"),a("25f0");function p(ye,xe){(xe==null||xe>ye.length)&&(xe=ye.length);for(var _e=0,Pe=new Array(xe);_e<xe;_e++)Pe[_e]=ye[_e];return Pe}function g(ye,xe){if(ye){if(typeof ye=="string")return p(ye,xe);var _e=Object.prototype.toString.call(ye).slice(8,-1);if(_e==="Object"&&ye.constructor&&(_e=ye.constructor.name),_e==="Map"||_e==="Set")return Array.from(ye);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return p(ye,xe)}}function y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(ye,xe){return h(ye)||v(ye,xe)||g(ye,xe)||y()}function S(ye){if(Array.isArray(ye))return p(ye)}function I(ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(ye))return Array.from(ye)}function R(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(ye){return S(ye)||I(ye)||g(ye)||R()}var C=a("a352"),_=a.n(C);function b(ye){ye.parentElement!==null&&ye.parentElement.removeChild(ye)}function x(ye,xe,_e){var Pe=_e===0?ye.children[0]:ye.children[_e-1].nextSibling;ye.insertBefore(xe,Pe)}var w=a("dbf1");a("13d5"),a("4fad"),a("ac1f"),a("5319");function A(ye){var xe=Object.create(null);return function(Pe){var We=xe[Pe];return We||(xe[Pe]=ye(Pe))}}var k=/-(\w)/g,L=A(function(ye){return ye.replace(k,function(xe,_e){return _e.toUpperCase()})});a("5db7"),a("73d9");var G=["Start","Add","Remove","Update","End"],P=["Choose","Unchoose","Sort","Filter","Clone"],M=["Move"],H=[M,G,P].flatMap(function(ye){return ye}).map(function(ye){return"on".concat(ye)}),B={manage:M,manageAndEmit:G,emit:P};function Q(ye){return H.indexOf(ye)!==-1}a("caad"),a("2ca0");var j=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function O(ye){return j.includes(ye)}function W(ye){return["transition-group","TransitionGroup"].includes(ye)}function K(ye){return["id","class","role","style"].includes(ye)||ye.startsWith("data-")||ye.startsWith("aria-")||ye.startsWith("on")}function se(ye){return ye.reduce(function(xe,_e){var Pe=E(_e,2),We=Pe[0],rt=Pe[1];return xe[We]=rt,xe},{})}function ve(ye){var xe=ye.$attrs,_e=ye.componentData,Pe=_e===void 0?{}:_e,We=se(Object.entries(xe).filter(function(rt){var mt=E(rt,2),gt=mt[0];return mt[1],K(gt)}));return f(f({},We),Pe)}function ie(ye){var xe=ye.$attrs,_e=ye.callBackBuilder,Pe=se(de(xe));Object.entries(_e).forEach(function(rt){var mt=E(rt,2),gt=mt[0],Lt=mt[1];B[gt].forEach(function(dt){Pe["on".concat(dt)]=Lt(dt)})});var We="[data-draggable]".concat(Pe.draggable||"");return f(f({},Pe),{},{draggable:We})}function de(ye){return Object.entries(ye).filter(function(xe){var _e=E(xe,2),Pe=_e[0];return _e[1],!K(Pe)}).map(function(xe){var _e=E(xe,2),Pe=_e[0],We=_e[1];return[L(Pe),We]}).filter(function(xe){var _e=E(xe,2),Pe=_e[0];return _e[1],!Q(Pe)})}a("c740");function ee(ye,xe){if(!(ye instanceof xe))throw new TypeError("Cannot call a class as a function")}function Y(ye,xe){for(var _e=0;_e<xe.length;_e++){var Pe=xe[_e];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(ye,Pe.key,Pe)}}function ge(ye,xe,_e){return xe&&Y(ye.prototype,xe),ye}var q=function(xe){var _e=xe.el;return _e},z=function(xe,_e){return xe.__draggable_context=_e},J=function(xe){return xe.__draggable_context},he=function(){function ye(xe){var _e=xe.nodes,Pe=_e.header,We=_e.default,rt=_e.footer,mt=xe.root,gt=xe.realList;ee(this,ye),this.defaultNodes=We,this.children=[].concat(D(Pe),D(We),D(rt)),this.externalComponent=mt.externalComponent,this.rootTransition=mt.transition,this.tag=mt.tag,this.realList=gt}return ge(ye,[{key:"render",value:function(_e,Pe){var We=this.tag,rt=this.children,mt=this._isRootComponent,gt=mt?{default:function(){return rt}}:rt;return _e(We,Pe,gt)}},{key:"updated",value:function(){var _e=this.defaultNodes,Pe=this.realList;_e.forEach(function(We,rt){z(q(We),{element:Pe[rt],index:rt})})}},{key:"getUnderlyingVm",value:function(_e){return J(_e)}},{key:"getVmIndexFromDomIndex",value:function(_e,Pe){var We=this.defaultNodes,rt=We.length,mt=Pe.children,gt=mt.item(_e);if(gt===null)return rt;var Lt=J(gt);if(Lt)return Lt.index;if(rt===0)return 0;var dt=q(We[0]),at=D(mt).findIndex(function(ft){return ft===dt});return _e<at?0:rt}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),ye}(),re=a("8bbf");function X(ye,xe){var _e=ye[xe];return _e?_e():[]}function te(ye){var xe=ye.$slots,_e=ye.realList,Pe=ye.getKey,We=_e||[],rt=["header","footer"].map(function(ft){return X(xe,ft)}),mt=E(rt,2),gt=mt[0],Lt=mt[1],dt=xe.item;if(!dt)throw new Error("draggable element must have an item slot");var at=We.flatMap(function(ft,Ct){return dt({element:ft,index:Ct}).map(function(Ft){return Ft.key=Pe(ft),Ft.props=f(f({},Ft.props||{}),{},{"data-draggable":!0}),Ft})});if(at.length!==We.length)throw new Error("Item slot must have only one child");return{header:gt,footer:Lt,default:at}}function Se(ye){var xe=W(ye),_e=!O(ye)&&!xe;return{transition:xe,externalComponent:_e,tag:_e?Object(re.resolveComponent)(ye):xe?re.TransitionGroup:ye}}function Ee(ye){var xe=ye.$slots,_e=ye.tag,Pe=ye.realList,We=ye.getKey,rt=te({$slots:xe,realList:Pe,getKey:We}),mt=Se(_e);return new he({nodes:rt,root:mt,realList:Pe})}function be(ye,xe){var _e=this;Object(re.nextTick)(function(){return _e.$emit(ye.toLowerCase(),xe)})}function ke(ye){var xe=this;return function(_e,Pe){if(xe.realList!==null)return xe["onDrag".concat(ye)](_e,Pe)}}function Be(ye){var xe=this,_e=ke.call(this,ye);return function(Pe,We){_e.call(xe,Pe,We),be.call(xe,ye,Pe)}}var Ie=null,je={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(xe){return xe}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Ue=["update:modelValue","change"].concat(D([].concat(D(B.manageAndEmit),D(B.emit)).map(function(ye){return ye.toLowerCase()}))),He=Object(re.defineComponent)({name:"draggable",inheritAttrs:!1,props:je,emits:Ue,data:function(){return{error:!1}},render:function(){try{this.error=!1;var xe=this.$slots,_e=this.$attrs,Pe=this.tag,We=this.componentData,rt=this.realList,mt=this.getKey,gt=Ee({$slots:xe,tag:Pe,realList:rt,getKey:mt});this.componentStructure=gt;var Lt=ve({$attrs:_e,componentData:We});return gt.render(re.h,Lt)}catch(dt){return this.error=!0,Object(re.h)("pre",{style:{color:"red"}},dt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&w.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var xe=this;if(!this.error){var _e=this.$attrs,Pe=this.$el,We=this.componentStructure;We.updated();var rt=ie({$attrs:_e,callBackBuilder:{manageAndEmit:function(Lt){return Be.call(xe,Lt)},emit:function(Lt){return be.bind(xe,Lt)},manage:function(Lt){return ke.call(xe,Lt)}}}),mt=Pe.nodeType===1?Pe:Pe.parentElement;this._sortable=new _.a(mt,rt),this.targetDomElement=mt,mt.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var xe=this.list;return xe||this.modelValue},getKey:function(){var xe=this.itemKey;return typeof xe=="function"?xe:function(_e){return _e[xe]}}},watch:{$attrs:{handler:function(xe){var _e=this._sortable;_e&&de(xe).forEach(function(Pe){var We=E(Pe,2),rt=We[0],mt=We[1];_e.option(rt,mt)})},deep:!0}},methods:{getUnderlyingVm:function(xe){return this.componentStructure.getUnderlyingVm(xe)||null},getUnderlyingPotencialDraggableComponent:function(xe){return xe.__draggable_component__},emitChanges:function(xe){var _e=this;Object(re.nextTick)(function(){return _e.$emit("change",xe)})},alterList:function(xe){if(this.list){xe(this.list);return}var _e=D(this.modelValue);xe(_e),this.$emit("update:modelValue",_e)},spliceList:function(){var xe=arguments,_e=function(We){return We.splice.apply(We,D(xe))};this.alterList(_e)},updatePosition:function(xe,_e){var Pe=function(rt){return rt.splice(_e,0,rt.splice(xe,1)[0])};this.alterList(Pe)},getRelatedContextFromMoveEvent:function(xe){var _e=xe.to,Pe=xe.related,We=this.getUnderlyingPotencialDraggableComponent(_e);if(!We)return{component:We};var rt=We.realList,mt={list:rt,component:We};if(_e!==Pe&&rt){var gt=We.getUnderlyingVm(Pe)||{};return f(f({},gt),mt)}return mt},getVmIndexFromDomIndex:function(xe){return this.componentStructure.getVmIndexFromDomIndex(xe,this.targetDomElement)},onDragStart:function(xe){this.context=this.getUnderlyingVm(xe.item),xe.item._underlying_vm_=this.clone(this.context.element),Ie=xe.item},onDragAdd:function(xe){var _e=xe.item._underlying_vm_;if(_e!==void 0){b(xe.item);var Pe=this.getVmIndexFromDomIndex(xe.newIndex);this.spliceList(Pe,0,_e);var We={element:_e,newIndex:Pe};this.emitChanges({added:We})}},onDragRemove:function(xe){if(x(this.$el,xe.item,xe.oldIndex),xe.pullMode==="clone"){b(xe.clone);return}var _e=this.context,Pe=_e.index,We=_e.element;this.spliceList(Pe,1);var rt={element:We,oldIndex:Pe};this.emitChanges({removed:rt})},onDragUpdate:function(xe){b(xe.item),x(xe.from,xe.item,xe.oldIndex);var _e=this.context.index,Pe=this.getVmIndexFromDomIndex(xe.newIndex);this.updatePosition(_e,Pe);var We={element:this.context.element,oldIndex:_e,newIndex:Pe};this.emitChanges({moved:We})},computeFutureIndex:function(xe,_e){if(!xe.element)return 0;var Pe=D(_e.to.children).filter(function(gt){return gt.style.display!=="none"}),We=Pe.indexOf(_e.related),rt=xe.component.getVmIndexFromDomIndex(We),mt=Pe.indexOf(Ie)!==-1;return mt||!_e.willInsertAfter?rt:rt+1},onDragMove:function(xe,_e){var Pe=this.move,We=this.realList;if(!Pe||!We)return!0;var rt=this.getRelatedContextFromMoveEvent(xe),mt=this.computeFutureIndex(rt,xe),gt=f(f({},this.context),{},{futureIndex:mt}),Lt=f(f({},xe),{},{relatedContext:rt,draggedContext:gt});return Pe(Lt,_e)},onDragEnd:function(){Ie=null}}}),qe=He;i.default=qe},fb6a:function(s,i,a){var o=a("23e7"),l=a("861d"),c=a("e8b5"),u=a("23cb"),d=a("50c4"),f=a("fc6a"),h=a("8418"),v=a("b622"),p=a("1dde"),g=a("ae40"),y=p("slice"),E=g("slice",{ACCESSORS:!0,0:0,1:2}),S=v("species"),I=[].slice,R=Math.max;o({target:"Array",proto:!0,forced:!y||!E},{slice:function(C,_){var b=f(this),x=d(b.length),w=u(C,x),A=u(_===void 0?x:_,x),k,L,G;if(c(b)&&(k=b.constructor,typeof k=="function"&&(k===Array||c(k.prototype))?k=void 0:l(k)&&(k=k[S],k===null&&(k=void 0)),k===Array||k===void 0))return I.call(b,w,A);for(L=new(k===void 0?Array:k)(R(A-w,0)),G=0;w<A;w++,G++)w in b&&h(L,G,b[w]);return L.length=G,L}})},fc6a:function(s,i,a){var o=a("44ad"),l=a("1d80");s.exports=function(c){return o(l(c))}},fdbc:function(s,i){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,i,a){var o=a("4930");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(fre);const Qre={class:"assignment-dialog-modal"},Jre={class:"form-row"},Zre={key:0,class:"form-row"},ene=["value"],tne={key:1,class:"form-row"},rne=["value"],nne={key:2,class:"form-row"},sne={class:"form-row"},ane={class:"form-row"},ine={class:"form-row"},one={class:"dialog-actions"},lne={__name:"AssignmentDialog",props:{teachers:Array,students:Array,assignment:Object},emits:["save","close"],setup(t,{emit:e}){const r=t,n=e,s=pe("lunch"),i=pe(""),a=pe(""),o=pe(""),l=pe("12:00"),c=pe("12:30"),u=pe(""),d=pe(""),f=pe("");er(()=>r.assignment,p=>{p?(d.value=p.id||Date.now().toString(),f.value=p.blockId||d.value||`block-${Date.now()}`,s.value=p.type||"lunch",i.value=p.teacherId||"",a.value=p.studentId||"",o.value=p.type==="other"?p.label:"",l.value=p.start||"12:00",c.value=p.end||"12:30",u.value=p.note||""):(d.value=Date.now().toString(),f.value=`block-${d.value}`,s.value="lunch",i.value="",a.value="",o.value="",l.value="12:00",c.value="12:30",u.value="")},{immediate:!0});const h=Ae(()=>{if(s.value==="lunch")return"Lunch";if(s.value==="break")return"Break";if(s.value==="class"){const p=r.teachers.find(g=>g.id===i.value);return p?p.name||p.email||p.id:""}if(s.value==="student"){const p=r.students.find(g=>g.id===a.value);return p?`${p.firstName} ${p.lastName}`:""}return s.value==="other"?o.value:""});function v(){!l.value||!c.value||s.value==="class"&&!i.value||s.value==="student"&&!a.value||s.value==="other"&&!o.value||n("save",{id:d.value,blockId:f.value,type:s.value,label:h.value,start:l.value,end:c.value,note:u.value,teacherId:i.value,studentId:a.value})}return(p,g)=>(N(),U("div",{class:"assignment-dialog-overlay",onClick:g[8]||(g[8]=bs(y=>p.$emit("close"),["self"]))},[m("div",Qre,[g[20]||(g[20]=m("h2",null,"Add Assignment",-1)),m("form",{onSubmit:bs(v,["prevent"])},[m("div",Jre,[g[10]||(g[10]=m("label",null,"Type:",-1)),Ve(m("select",{"onUpdate:modelValue":g[0]||(g[0]=y=>s.value=y)},g[9]||(g[9]=[Xn('<option value="lunch" data-v-f2af98a0>Lunch</option><option value="break" data-v-f2af98a0>Break</option><option value="class" data-v-f2af98a0>Class</option><option value="student" data-v-f2af98a0>Student</option><option value="other" data-v-f2af98a0>Other</option>',5)]),512),[[hr,s.value]])]),s.value==="class"?(N(),U("div",Zre,[g[12]||(g[12]=m("label",null,"Teacher:",-1)),Ve(m("select",{"onUpdate:modelValue":g[1]||(g[1]=y=>i.value=y)},[g[11]||(g[11]=m("option",{value:""},"Select teacher...",-1)),(N(!0),U(Oe,null,Ge(t.teachers,y=>(N(),U("option",{key:y.id,value:y.id},le(y.name||y.email||y.id),9,ene))),128))],512),[[hr,i.value]])])):Fe("",!0),s.value==="student"?(N(),U("div",tne,[g[14]||(g[14]=m("label",null,"Student:",-1)),Ve(m("select",{"onUpdate:modelValue":g[2]||(g[2]=y=>a.value=y)},[g[13]||(g[13]=m("option",{value:""},"Select student...",-1)),(N(!0),U(Oe,null,Ge(t.students,y=>(N(),U("option",{key:y.id,value:y.id},le(y.firstName)+" "+le(y.lastName),9,rne))),128))],512),[[hr,a.value]])])):Fe("",!0),s.value==="other"?(N(),U("div",nne,[g[15]||(g[15]=m("label",null,"Label:",-1)),Ve(m("input",{"onUpdate:modelValue":g[3]||(g[3]=y=>o.value=y),placeholder:"Custom label"},null,512),[[At,o.value]])])):Fe("",!0),m("div",sne,[g[16]||(g[16]=m("label",null,"Start Time:",-1)),Ve(m("input",{"onUpdate:modelValue":g[4]||(g[4]=y=>l.value=y),type:"time",required:""},null,512),[[At,l.value]])]),m("div",ane,[g[17]||(g[17]=m("label",null,"End Time:",-1)),Ve(m("input",{"onUpdate:modelValue":g[5]||(g[5]=y=>c.value=y),type:"time",required:""},null,512),[[At,c.value]])]),m("div",ine,[g[18]||(g[18]=m("label",null,"Note:",-1)),Ve(m("input",{"onUpdate:modelValue":g[6]||(g[6]=y=>u.value=y),placeholder:"Optional note"},null,512),[[At,u.value]])]),m("div",one,[g[19]||(g[19]=m("button",{type:"submit",class:"btn btn-primary"},"Add",-1)),m("button",{type:"button",class:"btn btn-secondary",onClick:g[7]||(g[7]=y=>p.$emit("close"))},"Cancel")])],32)])]))}},cne=bt(lne,[["__scopeId","data-v-f2af98a0"]]),une={class:"vertical-time-grid-wrapper"},dne={class:"grid-block-label-time"},fne=["title"],hne=["title"],pne=["onDragstart","onDrag","onDragend"],mne={class:"assignment-content"},vne={class:"assignment-label-time"},gne={class:"assignment-time-label"},xne={class:"assignment-actions"},yne=["onClick"],Ene=["onClick"],_ne=["onMousedown"],db=24,bne={__name:"VerticalTimeGrid",props:{assignments:Array,teachers:Array,students:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,blocks:Array},emits:["update:assignments","edit-assignment"],setup(t,{emit:e}){const r=t,n=e,s=pe(null);pe(!1);const i=pe(r.assignments?r.assignments.map(P=>({...P})):[]);er(()=>r.assignments,P=>{i.value=P?P.map(M=>({...M})):[]},{immediate:!0});function a(P){const[M,H]=P.split(":").map(Number);return M*60+H}function o(P){const M=Math.floor(P/60),H=P%60;return`${M<10?"0":""}${M}:${H<10?"0":""}${H}`}const l=Ae(()=>!r.blocks||r.blocks.length===0?"08:00":r.blocks.reduce((P,M)=>M.startTime<P?M.startTime:P,r.blocks[0].startTime)),c=Ae(()=>!r.blocks||r.blocks.length===0?"16:00":r.blocks.reduce((P,M)=>M.endTime>P?M.endTime:P,r.blocks[0].endTime)),u=Ae(()=>a(l.value)),d=Ae(()=>a(c.value)),f=Ae(()=>d.value-u.value),h=Ae(()=>f.value*2.5+db*2);Ae(()=>{if(!r.blocks)return[];const P=[];return r.blocks.forEach(M=>{P.includes(M.startTime)||P.push(M.startTime),P.includes(M.endTime)||P.push(M.endTime)}),P.sort((M,H)=>a(M)-a(H))});function v(P){return(a(P)-u.value)*2.5+db-10}function p(P,M){if(!P||!M)return!1;const H=a(P.startTime),B=a(P.endTime),Q=a(M.startTime),j=a(M.endTime);return H<j&&B>Q}function g(P){const M=[];for(let B=0;B<P.length;B++){const Q=P[B];let j=null;for(let O=0;O<M.length;O++)if(M[O].ids.some(W=>p(Q,P.find(K=>K.id===W)))){j=M[O];break}j?(j.ids.push(Q.id),j.blocks.push(Q)):M.push({ids:[Q.id],blocks:[Q]})}let H=!0;for(;H;){H=!1;for(let B=0;B<M.length;B++){for(let Q=B+1;Q<M.length;Q++)if(M[B].ids.some(j=>M[Q].ids.some(O=>p(P.find(W=>W.id===j),P.find(W=>W.id===O))))){M[B].ids=Array.from(new Set([...M[B].ids,...M[Q].ids])),M[B].blocks=Array.from(new Set([...M[B].blocks,...M[Q].blocks])),M.splice(Q,1),H=!0;break}if(H)break}}return M.map(B=>{const Q=B.blocks.sort((W,K)=>W.startTime.localeCompare(K.startTime)||W.id.localeCompare(K.id)),j=Q.reduce((W,K)=>K.startTime<W?K.startTime:W,Q[0].startTime),O=Q.reduce((W,K)=>K.endTime>W?K.endTime:W,Q[0].endTime);return{ids:B.ids,startTime:j,endTime:O}})}Ae(()=>g(y.value));const y=Ae(()=>(r.blocks||[]).map((P,M)=>({...P,id:P.id||`block-${M}`})));function E(P){const M=[];for(let Q=0;Q<P.length;Q++){const j=P[Q];let O=null;for(let W=0;W<M.length;W++)if(M[W].some(K=>p(j,P.find(se=>se.id===K)))){O=M[W];break}O?O.push(j.id):M.push([j.id])}let H=!0;for(;H;){H=!1;for(let Q=0;Q<M.length;Q++){for(let j=Q+1;j<M.length;j++)if(M[Q].some(O=>M[j].some(W=>p(P.find(K=>K.id===O),P.find(K=>K.id===W))))){M[Q]=Array.from(new Set([...M[Q],...M[j]])),M.splice(j,1),H=!0;break}if(H)break}}const B={};for(const Q of M){const j=Q.map(O=>P.find(W=>W.id===O)).sort((O,W)=>O.startTime.localeCompare(W.startTime)||O.id.localeCompare(W.id));j.forEach((O,W)=>{B[O.id]={groupSize:j.length,colIndex:W}})}return B}function S(P,M){const H=E(y.value)[P.id]||{groupSize:1,colIndex:0},B=v(P.startTime),Q=(a(P.endTime)-a(P.startTime))*2.5,j=100/H.groupSize;return{position:"absolute",left:j*H.colIndex+"%",width:j+"%",top:B+"px",height:Q+"px",zIndex:1,opacity:.38,boxSizing:"border-box",overflow:"hidden"}}function I(P,M){const H=i.value.filter((ee,Y)=>{if(ee.id===P.id)return!1;const ge=a(ee.start),q=a(ee.end),z=a(P.start),J=a(P.end);return ge<J&&q>z}),B=H.length+1,j=[P,...H].sort((ee,Y)=>ee.start.localeCompare(Y.start)||ee.id.localeCompare(Y.id)).findIndex(ee=>ee.id===P.id),O=v(P.start),W=(a(P.end)-a(P.start))*2.5,K=Math.max(W,2.5),se=73,ve=27,ie=se/B;return{position:"absolute",left:ve+ie*j+"%",width:ie+"%",top:O+"px",height:K+"px",zIndex:2,minWidth:"80px",boxSizing:"border-box",padding:"4px",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",cursor:"grab",transition:"top 0.2s, height 0.2s"}}const R=pe(null),D=pe(0),C=pe(0),_=pe(null);function b(P,M){R.value=M,D.value=P.clientY,C.value=a(M.start),_.value="move",M.isDragging=!0,P.target.classList.add("background-dragging-div");const B=document.createElement("div");B.className="drag-preview-div",B.style.width="160px",B.style.height="40px",B.style.background="transparent",B.style.border="2px solid #007bff",B.style.position="absolute",B.style.top="-9999px",B.style.left="-9999px",document.body.appendChild(B),P.dataTransfer.setDragImage(B,80,20),P.dataTransfer.effectAllowed="move",P.dataTransfer.setData("text/plain",M.id)}function x(P,M){if(!R.value||P.clientY===0)return;const H=P.clientY-D.value,B=Math.round(H/2.5);if(_.value==="move"){let Q=C.value+B,j=Q+(a(M.end)-a(M.start));Q=Math.max(u.value,Math.min(Q,d.value-1)),j=Math.max(Q+1,Math.min(j,d.value)),M.start=o(Q),M.end=o(j)}}function w(P,M){R.value=null,_.value=null,M.isDragging=!1,n("update:assignments",i.value)}function A(P,M){R.value=M,D.value=P.clientY,C.value=a(M.end),_.value="resize",window.addEventListener("mousemove",k),window.addEventListener("mouseup",L)}function k(P){if(!R.value)return;const M=P.clientY-D.value;let H=C.value+Math.round(M/2.5);const B=a(R.value.start);H=Math.max(B+1,Math.min(H,d.value)),R.value.end=o(H)}function L(P){R.value=null,_.value=null,window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",L)}function G(P){const M=i.value.findIndex(H=>H.id===P);M!==-1&&(i.value.splice(M,1),n("update:assignments",i.value))}return(P,M)=>(N(),U("div",une,[m("div",{class:"vertical-time-grid",ref_key:"timeGridRef",ref:s,style:In({position:"relative",height:h.value+"px"})},[(N(!0),U(Oe,null,Ge(y.value,(H,B)=>(N(),U("div",{key:H.id,class:ot(["grid-block-bg",H.type==="period"?"blocktype-period":"blocktype-"+(H.type||"period")]),style:In(S(H))},[m("div",dne,[m("span",{class:"grid-block-label",title:H.name||(H.type==="period"?H.label||H.periodName||H.periodNumber||"Period":H.type?H.type.charAt(0).toUpperCase()+H.type.slice(1):"")},le(H.name||(H.type==="period"?H.label||H.periodName||H.periodNumber||"Period":H.type?H.type.charAt(0).toUpperCase()+H.type.slice(1):"")),9,fne),m("span",{class:"grid-block-time",title:H.startTime},le(H.startTime),9,hne)])],6))),128)),(N(!0),U(Oe,null,Ge(i.value,(H,B)=>(N(),U("div",{key:H.id,class:ot(["dialog-assignment-box",["type-"+(H.type||"other"),{dragging:H.isDragging}]]),style:In(I(H)),draggable:"true",onDragstart:Q=>b(Q,H),onDrag:Q=>x(Q,H),onDragend:Q=>w(Q,H)},[m("div",mne,[m("div",vne,[m("span",gne,le(H.start)+""+le(H.end)+" "+le(H.label),1)])]),m("div",xne,[m("button",{class:"edit-btn",onClick:Q=>P.$emit("edit-assignment",H)},"",8,yne),m("button",{class:"delete-btn",onClick:Q=>G(H.id)},"",8,Ene)]),m("div",{class:"resize-handle",onMousedown:bs(Q=>A(Q,H),["stop"]),title:"Drag to resize block"},null,40,_ne)],46,pne))),128))],4)]))}},Sne=bt(bne,[["__scopeId","data-v-8f5880e4"]]),Tne={class:"dialog-header"},Ane={class:"dialog-header-actions"},wne={class:"dialog-content"},Cne={style:{display:"flex","align-items":"flex-start"}},Ine={class:"dialog-actions"},kne=["disabled"],Dne={key:0},Rne={key:1},Fne={__name:"AideScheduleEditDialog",props:{aideName:String,timeTicks:Array,isTickInAnyBlock:Function,aideAssignments:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,showAddAssignment:Boolean,addAssignment:Function,onImportAssignments:Function,onSave:Function,onClose:Function,saving:Boolean,blocks:Array,teachers:Array,students:Array},setup(t){const e=t,r=pe([]),n=pe(!1),s=pe(null);Jt(()=>{console.log("DEBUG: AideScheduleEditDialog mounted, blocks:",e.blocks)}),er(()=>e.blocks,d=>{console.log("DEBUG: props.blocks in AideScheduleEditDialog",d)});function i(){e.onSave(r.value)}function a(){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],n.value=!0}function o(d){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],s.value={...d},n.value=!0}function l(d){if(s.value){const f=r.value.findIndex(h=>h.id===d.id);f!==-1&&(r.value[f]={...d}),s.value=null}else r.value=[...r.value,d];n.value=!1}function c(){s.value=null,n.value=!1}function u(d){console.log("handleUpdateAssignments called with:",d),r.value=d}return(d,f)=>(N(),U("div",{class:"dialog-overlay",onClick:f[4]||(f[4]=(...h)=>t.onClose&&t.onClose(...h))},[m("div",{class:"edit-dialog",onClick:f[3]||(f[3]=bs(()=>{},["stop"]))},[m("div",Tne,[m("h2",null,"Edit Schedule: "+le(t.aideName),1),m("div",Ane,[m("button",{onClick:f[0]||(f[0]=(...h)=>t.onImportAssignments&&t.onImportAssignments(...h)),class:"btn btn-secondary btn-import-assignments"},"Import Aide Assignments"),m("button",{onClick:a,class:"btn btn-primary btn-add-assignment"},"Add Assignment"),m("button",{onClick:f[1]||(f[1]=(...h)=>t.onClose&&t.onClose(...h)),class:"btn btn-secondary close-btn"},"")])]),m("div",wne,[m("div",Cne,[nt(Sne,{timeTicks:t.timeTicks,isTickInAnyBlock:t.isTickInAnyBlock,assignments:r.value,getAssignmentBoxStyle:t.getAssignmentBoxStyle,onAssignmentDragStart:t.onAssignmentDragStart,onAssignmentDrag:t.onAssignmentDrag,onAssignmentDragEnd:t.onAssignmentDragEnd,onResizeStart:t.onResizeStart,blocks:t.blocks,onEditAssignment:o,"onUpdate:assignments":u},null,8,["timeTicks","isTickInAnyBlock","assignments","getAssignmentBoxStyle","onAssignmentDragStart","onAssignmentDrag","onAssignmentDragEnd","onResizeStart","blocks"])]),n.value?(N(),Rn(cne,{key:0,teachers:t.teachers,students:t.students,assignment:s.value,onSave:l,onClose:c},null,8,["teachers","students","assignment"])):Fe("",!0)]),m("div",Ine,[m("button",{onClick:i,class:"btn btn-primary",disabled:t.saving},[t.saving?(N(),U("span",Dne,"")):(N(),U("span",Rne,"")),Me(" "+le(t.saving?"Saving...":"Save Schedule"),1)],8,kne),m("button",{onClick:f[2]||(f[2]=(...h)=>t.onClose&&t.onClose(...h)),class:"btn btn-secondary"},"Cancel")])])]))}},Pne={class:"master-schedule"},One={key:0,class:"no-time-table"},Nne={class:"no-data-message"},Lne={key:1,class:"schedule-graph-container"},Mne={class:"timeline-header"},Bne={class:"block-time"},Une={class:"block-name"},Vne={class:"block-time"},$ne={class:"aide-header"},Hne={class:"aide-name"},jne=["onClick"],Gne={class:"time-line-container"},Wne={class:"time-blocks-background"},zne={class:"assignment-bars"},Kne={class:"assignment-label"},hm=30,qne={__name:"AideScheduleMasterTable",props:{paraeducators:Array,blocks:Array,getAideTimeBlocks:Function,getAideName:Function,currentTimeTable:Object},emits:["editAideAssignment","gotoTimeTableConfig"],setup(t,{emit:e}){const r=t,n=pe([]);function s(y){const E=r.getAideTimeBlocks(y).filter(S=>S.assignment).map(S=>({id:S.id,label:S.assignment,type:S.assignmentType,start:S.start||S.displayTime.split(" - ")[0],end:S.end||S.displayTime.split(" - ")[1]}));return i(E)}function i(y){if(y.length===0)return[];const E=[...y].sort((D,C)=>d(D.start)-d(C.start)),S=[];let I=[];for(const D of E)I.length===0?I=[D]:I.some(_=>d(D.start)<d(_.end)&&d(D.end)>d(_.start))?I.push(D):(S.push(I),I=[D]);I.length>0&&S.push(I);const R=[];for(const D of S)D.forEach((C,_)=>{C.overlapIndex=_,C.overlapCount=D.length,R.push(C)});return R}function a(y){if(!y.overlapCount||y.overlapCount<=1)return 10;const E=40;return(60-(y.overlapCount*E+(y.overlapCount-1)*2))/2+y.overlapIndex*(E+2)}function o(y){if(!r.blocks||r.blocks.length===0)return 0;const E=r.blocks[0],S=r.blocks[r.blocks.length-1],I=d(E.startTime),D=d(S.endTime)-I,_=(d(y)-I)/D*100;return Math.max(0,Math.min(95,_))}function l(y,E){if(!r.blocks||r.blocks.length===0)return 10;const S=r.blocks[0],I=r.blocks[r.blocks.length-1],R=d(S.startTime),C=d(I.endTime)-R,_=d(y),x=(d(E)-_)/C*100;return Math.max(5,Math.min(95,x))}function c(y){if(!r.blocks||r.blocks.length===0)return 0;const E=r.blocks[0],S=r.blocks[r.blocks.length-1],I=d(E.startTime),D=d(S.endTime)-I,_=(d(y)-I)/D*100;return Math.max(0,Math.min(95,_))}function u(y,E){if(!r.blocks||r.blocks.length===0)return 10;const S=r.blocks[0],I=r.blocks[r.blocks.length-1],R=d(S.startTime),C=d(I.endTime)-R,_=d(y),x=(d(E)-_)/C*100;return Math.max(5,Math.min(95,x))}function d(y){const[E,S]=y.split(":").map(Number);return E*60+S}function f(y){var S;const E=((S=y.name)==null?void 0:S.toLowerCase())||"";return E.includes("lunch")?"lunch":E.includes("break")||E.includes("recess")?"break":E.includes("period")||E.includes("class")?"period":"other"}function h(y){const E=[...y].sort((R,D)=>d(R.startTime)-d(D.startTime)),S=[];for(const R of E){let D=!1;for(let C=0;C<S.length;C++){const _=S[C];if(!_.some(x=>d(R.startTime)<d(x.endTime)&&d(R.endTime)>d(x.startTime))){_.push(R),R.overlapIndex=C,D=!0;break}}D||(R.overlapIndex=S.length,S.push([R]))}const I=S.length;return E.map(R=>({...R,overlapIndex:R.overlapIndex,overlapCount:I}))}const v=Ae(()=>h(r.blocks||[])),p=Ae(()=>Math.max(...v.value.map(y=>y.overlapCount||1),1)),g=Ae(()=>p.value*hm);return er(()=>r.aideAssignments,y=>{n.value=y?JSON.parse(JSON.stringify(y)):[]},{immediate:!0}),(y,E)=>(N(),U("div",Pne,[E[4]||(E[4]=m("h2",null,"Master Schedule View",-1)),VS(y.$slots,"tab-bar",{},void 0,!0),!t.currentTimeTable||!t.currentTimeTable.schedule||t.currentTimeTable.schedule.length===0?(N(),U("div",One,[m("div",Nne,[E[1]||(E[1]=m("h3",null,"No Time Table Configured",-1)),E[2]||(E[2]=m("p",null,"You need to configure a time table first before you can create aide assignments.",-1)),m("button",{onClick:E[0]||(E[0]=S=>y.$emit("gotoTimeTableConfig")),class:"btn btn-primary"}," Go to Time Table Configuration ")])])):(N(),U("div",Lne,[m("div",Mne,[E[3]||(E[3]=m("div",{class:"aide-name-header"},"Aide Name",-1)),m("div",{class:"timeline-container",style:In({height:g.value+"px"})},[m("div",{class:"time-blocks-header",style:In({height:g.value+"px"})},[(N(!0),U(Oe,null,Ge(v.value,S=>(N(),U("div",{key:S.id+"-"+S.overlapIndex,class:ot(["time-block-header",f(S)]),style:In({left:o(S.startTime)+"%",width:l(S.startTime,S.endTime)+"%",top:S.overlapIndex*hm+"px",height:hm+"px",zIndex:10})},[m("div",Bne,le(S.startTime),1),m("div",Une,le(S.name||S.type),1),m("div",Vne,le(S.endTime),1)],6))),128))],4)],4)]),(N(!0),U(Oe,null,Ge(t.paraeducators,S=>(N(),U("div",{key:S.id,class:"aide-row"},[m("div",$ne,[m("span",Hne,le(t.getAideName(S.id)),1),m("button",{onClick:I=>y.$emit("editAideAssignment",S.id),class:"btn btn-small btn-primary edit-btn"}," Edit ",8,jne)]),m("div",Gne,[m("div",Wne,[(N(!0),U(Oe,null,Ge(t.blocks,I=>(N(),U("div",{key:I.id,class:ot(["time-block-bg",f(I)]),style:In({left:o(I.startTime)+"%",width:l(I.startTime,I.endTime)+"%"})},null,6))),128)),(N(!0),U(Oe,null,Ge(t.blocks.slice(0,-1),(I,R)=>(N(),U("div",{key:`bg-gap-${I.id}`,class:"time-block-bg-gap",style:In({left:o(I.endTime)-.5+"%",width:"1%"})},null,4))),128))]),m("div",zne,[(N(!0),U(Oe,null,Ge(s(S.id),I=>(N(),U("div",{key:I.id,class:ot(["master-assignment-bar",I.type]),style:In({left:c(I.start)+"%",width:u(I.start,I.end)+"%",top:a(I)+"px"})},[m("span",Kne,le(I.label),1)],6))),128))])])]))),128))]))]))}},Xne=bt(qne,[["__scopeId","data-v-40c5158e"]]);function Lf(t){return(t==null?void 0:t.schedule)||[]}function Yne(t){let e="23:59",r="00:00";for(const n of t)n.startTime&&n.startTime<e&&(e=n.startTime),n.endTime&&n.endTime>r&&(r=n.endTime);return{min:e,max:r}}function Qne(t){return Ae(()=>{const{min:e,max:r}=Yne(t.value||t),[n,s]=e.split(":").map(Number),[i,a]=r.split(":").map(Number);let o=[],l=n,c=s;for(;l<i||l===i&&c<=a;){const d=l<10?`0${l}`:`${l}`,f=c<10?`0${c}`:`${c}`;o.push({time:`${d}:${f}`}),c+=5,c>=60&&(c=0,l++)}const u=(t.value||t).map(d=>d.startTime);for(const d of u)o.find(f=>f.time===d)||o.push({time:d});return o=Array.from(new Set(o.map(d=>d.time))).sort().map(d=>({time:d})),o})}function Jne(t,e){return e.some(r=>r.startTime<=t&&r.endTime>=t)}const Zne={class:"admin-aide-schedule-detailed"},ese={class:"header"},tse={class:"header-actions"},rse=["disabled"],nse={key:0},sse={key:1},ase={class:"content"},ise={key:0,class:"error-message"},ose={key:1,class:"error-message"},lse={key:2,class:"loading"},cse={key:3,class:"schedule-container"},use={key:0,class:"time-table-tab-bar"},dse=["onClick"],j4={__name:"AdminAideSchedule",setup(t){const e=Xo(),r=li(),{userList:n,fetchUsers:s}=Ia(),{students:i,fetchStudents:a}=Ca(),{appSettings:o,loadAppSettings:l,saveAppSettings:c}=ka(),{aideSchedule:u,loadAideSchedules:d,saveAideSchedule:f}=dre(),{aideAssignment:h}=J1(),v=pe(!0),p=pe(!1),g=pe(null),y=pe({}),E=pe({}),S=pe(null);pe([]);const I=pe({}),R=Ae(()=>y.value&&Array.isArray(y.value.timeTables)&&y.value.timeTables.length>0?y.value.timeTables.map((X,te)=>({id:X.name?X.name.toLowerCase().replace(/\s+/g,"-"):`tt-${te}`,label:X.name||`Time Table ${te+1}`,...X})):y.value&&y.value.schedule?[{id:"default",label:y.value.label||"Default Schedule",schedule:y.value.schedule}]:[]);Jt(async()=>{console.log("Loaded timeTableData:",y.value),console.log("Computed allTimeTables:",R.value),R.value.length>0&&!S.value&&(S.value=R.value[0].id,console.log("Set selectedTimeTable:",S.value)),await l(),o.value.timeTables&&Array.isArray(o.value.timeTables)?(y.value={timeTables:o.value.timeTables},console.log("Set timeTableData to timeTables array:",y.value)):o.value.schedule&&(y.value={schedule:o.value.schedule},console.log("Set timeTableData to single schedule:",y.value))}),er(R,X=>{console.log("allTimeTables changed:",X)}),er(S,X=>{console.log("selectedTimeTable changed:",X)});const D=Ae(()=>{const X=R.value.find(te=>te.id===S.value)||R.value[0];return console.log("currentTimeTable:",X),X}),C=Ae(()=>Lf(D.value)),_=Qne(C);function b(X){return Jne(X,C.value)}const x=Ae(()=>{var te;const X=(te=r.currentUser)==null?void 0:te.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(X)}),w=Ae(()=>{var X;return((X=n.value)==null?void 0:X.filter(te=>te.role==="paraeducator"))||[]}),A=Ae(()=>{var X;return((X=n.value)==null?void 0:X.filter(te=>te.role==="teacher"))||[]});Ae(()=>{var X,te;return(X=o.value)!=null&&X.numPeriods&&((te=o.value)!=null&&te.periodLabels)?o.value.periodLabels.slice(0,o.value.numPeriods):["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]});function k(X){if(!C.value)return[];console.log("DEBUG: getAideTimeBlocks called for aide:",X),console.log("DEBUG: aideSchedule.value:",u.value),console.log("DEBUG: aideAssignment.value:",h.value);const Se=(u.value[X]||{}).schedule||{};console.log("DEBUG: aideScheduleData:",Se);const Ee=Object.values(Se).filter(be=>be.start&&be.end&&be.label).map(be=>({id:be.id||be.blockId||`assignment-${Date.now()}`,assignment:be.label,assignmentType:be.type||"custom",displayTime:`${be.start} - ${be.end}`,start:be.start,end:be.end}));return console.log("DEBUG: individualAssignments:",Ee),Ee.length>0?Ee:(console.log("DEBUG: No individual assignments found, adding test data"),[{id:"test-1",assignment:"Test Class Assignment",assignmentType:"class",displayTime:"08:00 - 09:00",start:"08:00",end:"09:00"},{id:"test-2",assignment:"Test Student Assignment",assignmentType:"student",displayTime:"10:00 - 11:00",start:"10:00",end:"11:00"}])}function L(X){const te=w.value.find(Se=>Se.id===X);return te?te.name||te.email:"Unknown Aide"}function G(X){g.value=X,de.value=!0}function P(){g.value=null}async function M(){try{p.value=!0;const te={...await l(),detailedAideSchedule:E.value};await c(te),console.log("Detailed aide schedule saved successfully")}catch(X){console.error("Error saving detailed aide schedule:",X)}finally{p.value=!1}}function H(){e.push("/admin")}async function B(){try{v.value=!0,await Promise.all([s(),a(),l()]);const X=await Vr(vt(ht,"app_settings","global"));if(X.exists()){const te=X.data();E.value=te.detailedAideSchedule||{}}v.value=!1}catch(X){console.error("Error loading aide schedule data:",X),v.value=!1}}Jt(B);function Q(X,te){return X.assignments&&X.assignments[te]||""}function j(){var be,ke;if(console.log("DEBUG: handleImportAssignments called"),console.log("DEBUG: editingAideId.value:",g.value),console.log("DEBUG: aideAssignment.value:",h.value),console.log("DEBUG: All aide IDs:",Object.keys(h.value)),console.log("DEBUG: All aide data:",Object.entries(h.value).map(([Be,Ie])=>({id:Be,keys:Object.keys(Ie)}))),!g.value||!h.value[g.value]){console.log("DEBUG: No aide data found"),alert("No aide assignment data found for this aide.");return}const X=z.value.length;if(X>0&&!confirm(`WARNING: This will remove ${X} current assignments and replace them with imported assignments.

Do you want to continue?`))return;const te=h.value[g.value];console.log("DEBUG: aideData:",te),console.log("DEBUG: aideData.classAssignment:",te.classAssignment),console.log("DEBUG: aideData.directAssignment:",te.directAssignment),console.log("DEBUG: Object.keys(aideData):",Object.keys(te)),console.log("DEBUG: aideData.schedule:",te.schedule),console.log("DEBUG: typeof aideData.schedule:",typeof te.schedule),console.log("DEBUG: Array.isArray(aideData.schedule):",Array.isArray(te.schedule));let Se=0;z.value=[];const Ee=Lf(D.value);console.log("DEBUG: timeTableBlocks:",Ee),console.log("DEBUG: timeTableBlocks with period numbers:",Ee.map(Be=>({name:Be.name,periodNumber:Be.periodNumber,type:Be.type})));for(const Be of Ee){console.log("DEBUG: Processing block:",Be),console.log("DEBUG: Block periodNumber:",Be.periodNumber),console.log("DEBUG: Block name:",Be.name),console.log("DEBUG: Available classAssignment keys:",Object.keys(te.classAssignment||{}));let Ie=Be.periodNumber;if(!Ie&&Be.name){const He=Be.name.match(/Period\s*(\d+)/i);He&&(Ie=He[1],console.log("DEBUG: Extracted periodNumber from name:",Ie))}let je="",Ue=[];if(Ie&&te.classAssignment&&te.classAssignment[Ie]){console.log("DEBUG: Found class assignment for periodNumber:",Ie);const He=Array.isArray(te.classAssignment[Ie])?te.classAssignment[Ie]:[te.classAssignment[Ie]];Ue=He.filter(Boolean).map(qe=>{const ye=A.value.find(xe=>xe.id===qe);return ye?ye.name||ye.email:"Unknown Teacher"}),je=He.filter(Boolean).map(qe=>`teacher:${qe}`).join(","),console.log("DEBUG: Created assignment for periodNumber:",je)}if(!je&&Be.name&&te.classAssignment){console.log("DEBUG: Trying to match by block name:",Be.name);const He=Object.keys(te.classAssignment).find(qe=>qe.toLowerCase().trim()===Be.name.toLowerCase().trim());if(He){console.log("DEBUG: Found match by block name:",He);const qe=Array.isArray(te.classAssignment[He])?te.classAssignment[He]:[te.classAssignment[He]];Ue=qe.filter(Boolean).map(ye=>{const xe=A.value.find(_e=>_e.id===ye);return xe?xe.name||xe.email:"Unknown Teacher"}),je=qe.filter(Boolean).map(ye=>`teacher:${ye}`).join(","),console.log("DEBUG: Created assignment for block name:",je)}}if(je){const He=Be.startTime,qe=O(Be.startTime,30),ye=je.split(",").map(_e=>_e.replace("teacher:","")).filter(Boolean),xe={id:`imported-class-${Date.now()}-${Se}`,label:Ue.join(", "),start:He,end:qe,type:"class",blockId:`imported-block-${Se}`,teacherId:ye[0]||"",note:ye.length>1?`Multiple teachers: ${Ue.join(", ")}`:""};console.log("DEBUG: Adding new assignment:",xe),z.value.push(xe),Se++}}if(console.log("DEBUG: Checking direct assignments..."),console.log("DEBUG: aideData.directAssignment:",te.directAssignment),console.log("DEBUG: typeof aideData.directAssignment:",typeof te.directAssignment),console.log("DEBUG: Array.isArray(aideData.directAssignment):",Array.isArray(te.directAssignment)),te.directAssignment){console.log("DEBUG: Found directAssignment:",te.directAssignment);const Be=Array.isArray(te.directAssignment)?te.directAssignment:[te.directAssignment];console.log("DEBUG: directStudentIds:",Be),console.log("DEBUG: students.value length:",(be=i.value)==null?void 0:be.length),console.log("DEBUG: students.value sample:",(ke=i.value)==null?void 0:ke.slice(0,3));for(const Ie of Be)if(console.log("DEBUG: Processing studentId:",Ie),Ie&&Ie!==""){const je=i.value.find(Ue=>Ue.id===Ie);if(console.log("DEBUG: Found student:",je),je){const Ue=`${it(je,"firstName")} ${it(je,"lastName")}`;console.log("DEBUG: Student name:",Ue);const He=Lf(D.value).find(qe=>qe.type==="period");if(console.log("DEBUG: First period block:",He),He){const qe=He.startTime,ye=O(He.startTime,30),xe={id:`imported-direct-${Date.now()}-${Se}`,label:Ue,start:qe,end:ye,type:"student",blockId:`imported-direct-block-${Se}`,studentId:Ie};console.log("DEBUG: Adding direct assignment:",xe),z.value.push(xe),Se++}}}}else console.log("DEBUG: No directAssignment found");if(console.log("DEBUG: Final importedCount:",Se),console.log("DEBUG: Final localAideAssignments:",z.value),Se>0){alert(`Successfully imported ${Se} assignments with 30-minute time spans.

Types: Class assignments set to 'class', Direct assignments set to 'student'
Labels: Teacher names for class assignments, Student names for direct assignments
Duration: 30 minutes each`);const Be=g.value,Ie=u.value[Be]||{},je={};z.value.forEach(He=>{const qe=He.blockId||He.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;je[qe]={id:He.id,blockId:qe,type:He.type,label:He.label,start:He.start,end:He.end,note:He.note,teacherId:He.teacherId,studentId:He.studentId}});const Ue={...Ie,schedule:je};f(Be,Ue).then(()=>{d().then(()=>{P(),Go(()=>{G(Be)})})})}else alert("No matching assignments found in the Aide Assignment data for this schedule.")}function O(X,te){const[Se,Ee]=X.split(":").map(Number),be=Se*60+Ee+te,ke=Math.floor(be/60),Be=be%60;return`${ke.toString().padStart(2,"0")}:${Be.toString().padStart(2,"0")}`}er(()=>Lf(D.value),X=>{const te={};for(const Se of X){const Ee=Q(Se,g.value);te[Se.id]=Ee?[{id:Ee,value:Ee}]:[]}I.value=te},{immediate:!0});function W(X,te){ee.value=te,Y.value=X.clientY,ge.value=_.value.findIndex(Se=>Se.time===te.start),q.value=0,X.dataTransfer.effectAllowed="move",X.dataTransfer.setData("text/plain",te.id)}function K(X,te){if(!ee.value||X.clientY===0)return;const Se=X.clientY-Y.value;q.value=Se,te._dragOffset=Se}function se(X,te){if(!ee.value)return;const Se=24,Ee=_.value.length;let be=ge.value+Math.round(q.value/Se);be=Math.max(0,Math.min(Ee-2,be));const ke=_.value[be].time,Be=_.value.findIndex(Ue=>Ue.time===te.end)-ge.value;let Ie=be+Be;Ie=Math.max(be+1,Math.min(Ee-1,Ie));const je=_.value[Ie].time;te.start=ke,te.end=je,te._dragOffset=0,ee.value=null,q.value=0}function ve(X){const te=_.value.findIndex(je=>je.time===X.start),Se=_.value.findIndex(je=>je.time===X.end),Ee=24;if(te===-1||Se===-1)return{display:"none"};const be=te*Ee+(X._dragOffset||0),ke=Math.max((Se-te)*Ee,Ee);let Be,Ie;return X.type==="class"?(Be="#e8f4fd",Ie="#4a90e2"):X.type==="student"?(Be="#f0f8e8",Ie="#7cb342"):(Be="#f5f5f5",Ie="#9e9e9e"),{position:"absolute",left:"20px",top:`${be}px`,height:`${ke}px`,width:"200px",minHeight:"24px",background:Be,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"#333",border:`2px solid ${Ie}`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"grab",zIndex:2,transition:ee.value===X?"none":"top 0.2s"}}function ie(){const X=C.value&&C.value.length>0?C.value[0].startTime:"08:00",te=C.value&&C.value.length>0?C.value[0].endTime:"08:30";z.value.push({id:`custom:${Date.now()}`,label:"",start:X,end:te,blockId:`block-${Date.now()}`})}const de=pe(!1);pe(null);const ee=pe(null),Y=pe(0),ge=pe(0),q=pe(0),z=pe([]);er(g,X=>{if(!X){z.value=[];return}const Se=(u.value[X]||{}).schedule||{};z.value=Object.entries(Se).map(([Ee,be])=>({id:Ee+"-"+(X||""),label:be.label||"",start:be.start,end:be.end,blockId:Ee,type:be.type||"lunch",teacherId:be.teacherId||"",studentId:be.studentId||"",note:be.note||""}))},{immediate:!0});async function J(X){if(g.value)try{p.value=!0;const te=u.value[g.value]||{},Se={};X.forEach(be=>{const ke=be.blockId||be.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;Se[ke]={id:be.id,blockId:ke,type:be.type,label:be.label,start:be.start,end:be.end,note:be.note,teacherId:be.teacherId,studentId:be.studentId}});const Ee={...te,schedule:Se};await f(g.value,Ee),await d(),P(),alert("Schedule saved!")}catch(te){alert("Failed to save schedule: "+te.message)}finally{p.value=!1}}er(()=>C,X=>{console.log("DEBUG: blocks",X)},{immediate:!0}),er(g,X=>{X&&(console.log("DEBUG: Opening edit dialog for aide",X),console.log("DEBUG: blocks passed to dialog",C.value))});function he(X,te){console.log("Resize start:",te)}function re(){ie()}return(X,te)=>(N(),U("div",Zne,[m("div",ese,[te[4]||(te[4]=m("h1",null,"Aide Schedule Management",-1)),m("div",tse,[m("button",{onClick:M,class:"btn btn-primary",disabled:p.value},[p.value?(N(),U("span",nse,"")):(N(),U("span",sse,"")),Me(" "+le(p.value?"Saving...":"Save Schedule"),1)],8,rse),m("button",{onClick:H,class:"btn btn-secondary"},te[3]||(te[3]=[m("span",null,"",-1),Me(" Back ")]))])]),m("div",ase,[me(r).currentUser?x.value?v.value?(N(),U("div",lse," Loading aide schedules... ")):(N(),U("div",cse,[nt(Xne,{paraeducators:w.value,blocks:C.value,getAideTimeBlocks:k,getAideName:L,currentTimeTable:D.value,onEditAideAssignment:G,onGotoTimeTableConfig:te[2]||(te[2]=()=>me(e).push("/admin?tab=time-table"))},{"tab-bar":mh(()=>[R.value.length>1?(N(),U("div",use,[(N(!0),U(Oe,null,Ge(R.value,Se=>(N(),U("div",{key:Se.id,class:ot(["tab-btn",{active:S.value===Se.id}]),onClick:Ee=>S.value=Se.id},le(Se.label),11,dse))),128))])):Fe("",!0)]),_:1},8,["paraeducators","blocks","currentTimeTable"]),g.value?(N(),Rn(Fne,{key:0,aideName:L(g.value),timeTicks:me(_),isTickInAnyBlock:b,aideAssignments:z.value,getAssignmentBoxStyle:ve,onAssignmentDragStart:W,onAssignmentDrag:K,onAssignmentDragEnd:se,onResizeStart:he,showAddAssignment:de.value,addAssignment:re,onImportAssignments:j,onSave:J,onClose:P,saving:p.value,blocks:C.value,teachers:A.value,students:me(i)},null,8,["aideName","timeTicks","aideAssignments","showAddAssignment","saving","blocks","teachers","students"])):Fe("",!0)])):(N(),U("div",ose,[te[7]||(te[7]=m("h2",null,"Access Denied",-1)),te[8]||(te[8]=m("p",null,"You do not have permission to access this page.",-1)),m("button",{onClick:te[1]||(te[1]=Se=>me(e).push("/")),class:"btn btn-primary"},"Go Home")])):(N(),U("div",ise,[te[5]||(te[5]=m("h2",null,"Authentication Required",-1)),te[6]||(te[6]=m("p",null,"Please log in to access this page.",-1)),m("button",{onClick:te[0]||(te[0]=Se=>me(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},fse={name:"AdminBackupRestore",setup(){const t=pe([{id:"users",name:"Users"},{id:"students",name:"Students"},{id:"appSettings",name:"App Settings"},{id:"aideSchedules",name:"Aide Schedules"},{id:"aideAssignments",name:"Aide Assignments"}]),e=pe(["users","students","appSettings"]),r=pe(""),n=pe(!1),s=pe(!1),i=pe(null),a=pe(null),o=pe([]),l=pe(""),c=pe("info"),u=Ns({overwrite:!1,validate:!0}),d=pe(null),f=async()=>{try{const R=Gt(ht,"backups"),D=zr(R,Ks("createdAt","desc"),Ri(20)),C=await dr(D);o.value=C.docs.map(_=>({id:_.id,..._.data()}))}catch(R){console.error("Error loading backups:",R),I("Error loading backups","error")}},h=async()=>{var R;if(e.value.length===0){I("Please select at least one collection","error");return}n.value=!0,I("Creating backup...","info");try{const D={metadata:{version:"1.0",createdAt:new Date().toISOString(),createdBy:"admin",description:r.value||"Manual backup"},collections:{}};for(const b of e.value){const x=Gt(ht,b),w=await dr(x);b==="appSettings"?D.collections[b]=((R=w.docs[0])==null?void 0:R.data())||{}:D.collections[b]=w.docs.map(A=>({id:A.id,...A.data()}))}const C=`backup_${Date.now()}`,_=vt(ht,"backups",C);await xr(_,{name:r.value||`Backup ${new Date().toLocaleDateString()}`,createdAt:new Date().toISOString(),collections:e.value,size:JSON.stringify(D).length,data:D}),r.value="",await f(),I("Backup created successfully!","success")}catch(D){console.error("Error creating backup:",D),I("Error creating backup: "+D.message,"error")}finally{n.value=!1}},v=R=>{const D=R.target.files[0];if(!D)return;i.value=D,a.value=null;const C=new FileReader;C.onload=_=>{try{const b=JSON.parse(_.target.result);b.metadata&&b.collections?(a.value=b,I("Backup file loaded successfully","success")):I("Invalid backup file format","error")}catch{I("Error parsing JSON file","error")}},C.readAsText(D)},p=async()=>{if(!i.value||!a.value){I("Please select a valid backup file","error");return}if(u.overwrite){if(!confirm("This will overwrite existing data. This action cannot be undone. Continue?"))return}else if(!confirm("This will add new data without overwriting existing records. Continue?"))return;s.value=!0,I("Restoring backup...","info");try{for(const[R,D]of Object.entries(a.value.collections))if(R==="appSettings"){const C=vt(ht,"appSettings","default");await xr(C,D,{merge:!u.overwrite})}else{const C=Gt(ht,R);if(Array.isArray(D))for(const _ of D){const b=vt(C,_.id);u.overwrite?await xr(b,_):await xr(b,_,{merge:!0})}}I("Backup restored successfully!","success"),i.value=null,a.value=null,d.value&&(d.value.value="")}catch(R){console.error("Error restoring backup:",R),I("Error restoring backup: "+R.message,"error")}finally{s.value=!1}},g=R=>{const D=JSON.stringify(R.data,null,2),C=new Blob([D],{type:"application/json"}),_=URL.createObjectURL(C),b=document.createElement("a");b.href=_,b.download=`${R.name||"backup"}.json`,b.click(),URL.revokeObjectURL(_)},y=async R=>{if(confirm("Are you sure you want to delete this backup?"))try{await ac(vt(ht,"backups",R)),await f(),I("Backup deleted successfully","success")}catch(C){console.error("Error deleting backup:",C),I("Error deleting backup","error")}},E=R=>{if(R===0)return"0 Bytes";const D=1024,C=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(R)/Math.log(D));return parseFloat((R/Math.pow(D,_)).toFixed(2))+" "+C[_]},S=R=>new Date(R).toLocaleString(),I=(R,D="info")=>{l.value=R,c.value=D,setTimeout(()=>{l.value=""},5e3)};return Jt(()=>{f()}),{collections:t,selectedCollections:e,backupName:r,isBackingUp:n,isRestoring:s,selectedFile:i,backupData:a,backups:o,statusMessage:l,statusType:c,restoreOptions:u,fileInput:d,createBackup:h,handleFileSelect:v,restoreBackup:p,downloadBackup:g,deleteBackup:y,formatFileSize:E,formatDate:S}}},hse={class:"admin-backup-restore"},pse={class:"content"},mse={class:"section"},vse={class:"backup-options"},gse={class:"option-group"},xse={class:"checkbox-group"},yse=["value","disabled"],Ese={class:"option-group"},_se=["disabled"],bse=["disabled"],Sse={key:0},Tse={key:1},Ase={class:"section"},wse={class:"restore-options"},Cse={class:"file-upload"},Ise=["disabled"],kse={key:0,class:"file-info"},Dse={key:0,class:"option-group"},Rse={class:"backup-info"},Fse={class:"collection-name"},Pse={class:"collection-count"},Ose={key:1,class:"option-group"},Nse={class:"checkbox-group"},Lse={class:"checkbox"},Mse=["disabled"],Bse={class:"checkbox"},Use=["disabled"],Vse=["disabled"],$se={key:0},Hse={key:1},jse={class:"section"},Gse={key:0,class:"backup-list"},Wse={class:"backup-info"},zse={class:"backup-actions"},Kse=["onClick"],qse=["onClick"],Xse={key:1,class:"no-backups"};function Yse(t,e,r,n,s,i){return N(),U("div",hse,[e[17]||(e[17]=m("div",{class:"header"},[m("h1",null,"Backup & Restore"),m("p",null,"Manage database backups and restore data from JSON files")],-1)),m("div",pse,[m("div",mse,[e[9]||(e[9]=m("h2",null,"Create Backup",-1)),m("div",vse,[m("div",gse,[e[7]||(e[7]=m("label",null,"Collections to backup:",-1)),m("div",xse,[(N(!0),U(Oe,null,Ge(n.collections,a=>(N(),U("label",{key:a.id,class:"checkbox"},[Ve(m("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>n.selectedCollections=o),value:a.id,disabled:n.isBackingUp},null,8,yse),[[Et,n.selectedCollections]]),Me(" "+le(a.name),1)]))),128))])]),m("div",Ese,[e[8]||(e[8]=m("label",null,"Backup name (optional):",-1)),Ve(m("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.backupName=a),placeholder:"e.g., backup-2024-01-15",disabled:n.isBackingUp},null,8,_se),[[At,n.backupName]])]),m("button",{onClick:e[2]||(e[2]=(...a)=>n.createBackup&&n.createBackup(...a)),disabled:n.isBackingUp||n.selectedCollections.length===0,class:"btn btn-primary"},[n.isBackingUp?(N(),U("span",Sse,"Creating Backup...")):(N(),U("span",Tse,"Create Backup"))],8,bse)])]),m("div",Ase,[e[15]||(e[15]=m("h2",null,"Restore from Backup",-1)),m("div",wse,[m("div",Cse,[e[10]||(e[10]=m("label",null,"Select JSON backup file:",-1)),m("input",{type:"file",onChange:e[3]||(e[3]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a)),accept:".json",disabled:n.isRestoring,ref:"fileInput"},null,40,Ise),n.selectedFile?(N(),U("p",kse," Selected: "+le(n.selectedFile.name)+" ("+le(n.formatFileSize(n.selectedFile.size))+") ",1)):Fe("",!0)]),n.backupData?(N(),U("div",Dse,[e[11]||(e[11]=m("label",null,"Collections in backup:",-1)),m("div",Rse,[(N(!0),U(Oe,null,Ge(n.backupData.collections,(a,o)=>(N(),U("div",{key:o,class:"collection-info"},[m("span",Fse,le(o)+":",1),m("span",Pse,le(Array.isArray(a)?a.length:"1")+" items",1)]))),128))])])):Fe("",!0),n.backupData?(N(),U("div",Ose,[e[14]||(e[14]=m("label",null,"Restore options:",-1)),m("div",Nse,[m("label",Lse,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>n.restoreOptions.overwrite=a),disabled:n.isRestoring},null,8,Mse),[[Et,n.restoreOptions.overwrite]]),e[12]||(e[12]=Me(" Overwrite existing data "))]),m("label",Bse,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=a=>n.restoreOptions.validate=a),disabled:n.isRestoring},null,8,Use),[[Et,n.restoreOptions.validate]]),e[13]||(e[13]=Me(" Validate data before restore "))])])])):Fe("",!0),m("button",{onClick:e[6]||(e[6]=(...a)=>n.restoreBackup&&n.restoreBackup(...a)),disabled:n.isRestoring||!n.selectedFile||!n.backupData,class:"btn btn-warning"},[n.isRestoring?(N(),U("span",$se,"Restoring...")):(N(),U("span",Hse,"Restore Backup"))],8,Vse)])]),m("div",jse,[e[16]||(e[16]=m("h2",null,"Backup History",-1)),n.backups.length>0?(N(),U("div",Gse,[(N(!0),U(Oe,null,Ge(n.backups,a=>(N(),U("div",{key:a.id,class:"backup-item"},[m("div",Wse,[m("h3",null,le(a.name||"Unnamed Backup"),1),m("p",null,"Created: "+le(n.formatDate(a.createdAt)),1),m("p",null,"Size: "+le(n.formatFileSize(a.size)),1),m("p",null,"Collections: "+le(a.collections.join(", ")),1)]),m("div",zse,[m("button",{onClick:o=>n.downloadBackup(a),class:"btn btn-secondary"},"Download",8,Kse),m("button",{onClick:o=>n.deleteBackup(a.id),class:"btn btn-danger"},"Delete",8,qse)])]))),128))])):(N(),U("p",Xse,"No backups found"))])]),n.statusMessage?(N(),U("div",{key:0,class:ot(["status-message",n.statusType])},le(n.statusMessage),3)):Fe("",!0)])}const G4=bt(fse,[["render",Yse],["__scopeId","data-v-8e587f9a"]]),Qse={name:"AdminTeacherFeedback",setup(){const{isLoading:t,error:e,successMessage:r,formsLoading:n,feedbackForms:s,activeForms:i,totalResponses:a,createFeedbackForm:o,deleteFeedbackForm:l,syncResponses:c,getResponsesForSpreadsheet:u,clearMessages:d,extractSpreadsheetId:f}=Z1(),{fetchStudents:h}=Ca(),{fetchUsers:v}=Ia(),p=li(),g=pe(!1),y=pe(""),E=pe(""),S=pe(""),I=pe(""),R=Ae(()=>y.value.trim()&&S.value.trim()&&I.value.trim()),D=async()=>{if(R.value)try{d();const P={title:y.value.trim(),description:E.value.trim(),formUrl:S.value.trim(),responseSpreadsheetId:f(I.value),createdBy:p.user.uid};await o(P),C()}catch(P){console.error("Error adding form:",P)}},C=()=>{g.value=!1,y.value="",E.value="",S.value="",I.value="",d()},_=P=>{window.open(P.formUrl,"_blank")},b=async P=>{try{await c(P.responseSpreadsheetId)}catch(M){console.error("Error syncing responses:",M)}},x=async P=>{window.open(P.formUrl,"_blank")},w=async P=>{if(confirm(`Are you sure you want to delete "${P.title}"?`))try{await l(P.id)}catch(M){console.error("Error deleting form:",M)}},A=P=>u(P).value.length,k=P=>{var B,Q;const M=u(P);if(M.value.length===0)return"Never";const H=((B=M.value[0])==null?void 0:B.syncedAt)||((Q=M.value[0])==null?void 0:Q.autoSyncedAt);return H?new Date(H.seconds*1e3).toLocaleDateString():"Never"},L=P=>`https://docs.google.com/spreadsheets/d/${P}`,G=P=>P?(P.seconds?new Date(P.seconds*1e3):new Date(P)).toLocaleDateString():"N/A";return Jt(async()=>{try{await Promise.all([h(),v()])}catch(P){console.error("Error initializing teacher feedback:",P)}}),{isLoading:t,error:e,successMessage:r,showCreateModal:g,formTitle:y,formDescription:E,formUrl:S,responseSpreadsheetUrl:I,formsLoading:n,feedbackForms:s,activeForms:i,totalResponses:a,canAddForm:R,addForm:D,closeCreateForm:C,openForm:_,syncFormResponses:b,editForm:x,deleteForm:w,getResponseCount:A,getLastSyncDate:k,getSpreadsheetUrl:L,formatDate:G}}},Jse={class:"teacher-feedback-admin"},Zse={key:0,class:"status-message loading"},eae={key:1,class:"status-message success"},tae={key:2,class:"status-message error"},rae={class:"quick-actions"},nae=["disabled"],sae={class:"modal-header"},aae={class:"modal-body"},iae={class:"form-group"},oae={class:"form-group"},lae={class:"form-group"},cae={class:"form-group"},uae={class:"modal-footer"},dae=["disabled"],fae={key:0},hae={key:1},pae={class:"forms-list"},mae={key:0,class:"loading"},vae={key:1,class:"empty-state"},gae={key:2,class:"forms-grid"},xae={class:"form-header"},yae={class:"form-actions"},Eae=["onClick"],_ae=["onClick"],bae=["onClick"],Sae=["onClick"],Tae={class:"form-meta"},Aae={key:0},wae=["href"],Cae=["href"],Iae={class:"form-stats"},kae={class:"stat"},Dae={class:"stat-value"},Rae={class:"stat"},Fae={class:"stat-value"};function Pae(t,e,r,n,s,i){return N(),U("div",Jse,[e[29]||(e[29]=m("div",{class:"admin-header"},[m("h2",null,"Teacher Feedback Forms"),m("p",{class:"admin-description"}," Create and manage Google Forms for collecting teacher feedback on students. Forms can be customized with different question templates and sent to specific teachers. ")],-1)),n.isLoading?(N(),U("div",Zse," Processing... ")):Fe("",!0),n.successMessage?(N(),U("div",eae,le(n.successMessage),1)):Fe("",!0),n.error?(N(),U("div",tae,le(n.error),1)):Fe("",!0),m("div",rae,[m("button",{onClick:e[0]||(e[0]=a=>n.showCreateModal=!0),class:"primary-btn",disabled:n.isLoading},e[10]||(e[10]=[m("span",null,"",-1),Me(" Add Form ")]),8,nae)]),n.showCreateModal?(N(),U("div",{key:3,class:"modal-overlay",onClick:e[9]||(e[9]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a))},[m("div",{class:"modal-content",onClick:e[8]||(e[8]=bs(()=>{},["stop"]))},[m("div",sae,[e[11]||(e[11]=m("h3",null,"Add Teacher Feedback Form",-1)),m("button",{onClick:e[1]||(e[1]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a)),class:"close-btn"},"")]),m("div",aae,[m("div",iae,[e[12]||(e[12]=m("label",null,"Form Title:",-1)),Ve(m("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>n.formTitle=a),placeholder:"Enter a descriptive title for this form",class:"form-input",required:""},null,512),[[At,n.formTitle]])]),m("div",oae,[e[13]||(e[13]=m("label",null,"Form Description (optional):",-1)),Ve(m("textarea",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.formDescription=a),placeholder:"Brief description of what this form is for",class:"form-textarea",rows:"3"},null,512),[[At,n.formDescription]])]),m("div",lae,[e[14]||(e[14]=m("label",null,"Google Form URL:",-1)),Ve(m("input",{type:"url","onUpdate:modelValue":e[4]||(e[4]=a=>n.formUrl=a),placeholder:"https://docs.google.com/forms/d/your-form-id/viewform",class:"form-input",required:""},null,512),[[At,n.formUrl]]),e[15]||(e[15]=m("small",{class:"form-help"},"Paste the Google Form URL here (viewform link)",-1))]),m("div",cae,[e[16]||(e[16]=m("label",null,"Response Spreadsheet URL:",-1)),Ve(m("input",{type:"url","onUpdate:modelValue":e[5]||(e[5]=a=>n.responseSpreadsheetUrl=a),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id",class:"form-input",required:""},null,512),[[At,n.responseSpreadsheetUrl]]),e[17]||(e[17]=m("small",{class:"form-help"},"Link to the Google Sheet where responses are collected",-1))]),e[18]||(e[18]=m("div",{class:"form-info"},[m("h4",null," Setup Instructions:"),m("ol",null,[m("li",null,"Create your Google Form manually with the questions you want"),m("li",null,[Me("Go to "),m("strong",null,"Responses"),Me(" tab in your form")]),m("li",null,[Me("Click "),m("strong",null,"Create Spreadsheet"),Me(" to link it to a Google Sheet")]),m("li",null,"Copy both URLs and paste them above")])],-1))]),m("div",uae,[m("button",{onClick:e[6]||(e[6]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a)),class:"secondary-btn"},"Cancel"),m("button",{onClick:e[7]||(e[7]=(...a)=>n.addForm&&n.addForm(...a)),class:"primary-btn",disabled:!n.canAddForm||n.isLoading},[n.isLoading?(N(),U("span",fae,"Adding Form...")):(N(),U("span",hae,"Add Form"))],8,dae)])])])):Fe("",!0),m("div",pae,[e[28]||(e[28]=m("h3",null,"Feedback Forms",-1)),n.formsLoading?(N(),U("div",mae,"Loading forms...")):n.activeForms.length===0?(N(),U("div",vae,e[19]||(e[19]=[m("p",null,"No feedback forms added yet.",-1),m("p",null,'Click "Add Form" to get started.',-1)]))):(N(),U("div",gae,[(N(!0),U(Oe,null,Ge(n.activeForms,a=>(N(),U("div",{key:a.id,class:"form-card"},[m("div",xae,[m("h4",null,le(a.title||"Untitled Form"),1),m("div",yae,[m("button",{onClick:o=>n.openForm(a),class:"action-btn view",title:"View Form"},"  ",8,Eae),m("button",{onClick:o=>n.syncFormResponses(a),class:"action-btn sync",title:"Sync Responses"},"  ",8,_ae),m("button",{onClick:o=>n.editForm(a),class:"action-btn edit",title:"Edit Form"},"  ",8,bae),m("button",{onClick:o=>n.deleteForm(a),class:"action-btn delete",title:"Delete Form"},"  ",8,Sae)])]),m("div",Tae,[m("p",null,[e[20]||(e[20]=m("strong",null,"Created:",-1)),Me(" "+le(n.formatDate(a.createdAt)),1)]),a.description?(N(),U("p",Aae,[e[21]||(e[21]=m("strong",null,"Description:",-1)),Me(" "+le(a.description),1)])):Fe("",!0),m("p",null,[e[22]||(e[22]=m("strong",null,"Form URL:",-1)),e[23]||(e[23]=Me()),m("a",{href:a.formUrl,target:"_blank",class:"form-link"},"Open Form",8,wae)]),m("p",null,[e[24]||(e[24]=m("strong",null,"Responses:",-1)),e[25]||(e[25]=Me()),m("a",{href:n.getSpreadsheetUrl(a.responseSpreadsheetId),target:"_blank",class:"form-link"},"View Sheet",8,Cae)])]),m("div",Iae,[m("div",kae,[e[26]||(e[26]=m("span",{class:"stat-label"},"Responses:",-1)),m("span",Dae,le(n.getResponseCount(a.responseSpreadsheetId)),1)]),m("div",Rae,[e[27]||(e[27]=m("span",{class:"stat-label"},"Last Sync:",-1)),m("span",Fae,le(n.getLastSyncDate(a.responseSpreadsheetId)),1)])])]))),128))]))])])}const Oae=bt(Qse,[["render",Pae],["__scopeId","data-v-ca33e38a"]]);function Nae(t,e,r){const n=Ae(()=>{var u,d;return(u=r.value)!=null&&u.numPeriods&&((d=r.value)!=null&&d.periodLabels)?r.value.periodLabels.slice(0,r.value.numPeriods).map((f,h)=>({value:h.toString(),label:f,periodIndex:h})):[{value:"0",label:"Per1",periodIndex:0},{value:"1",label:"Per2",periodIndex:1},{value:"2",label:"Per3",periodIndex:2},{value:"3",label:"Per4",periodIndex:3},{value:"4",label:"Per5",periodIndex:4},{value:"5",label:"Per6",periodIndex:5},{value:"6",label:"Per7",periodIndex:6}]}),s=Ae(()=>{const u=new Set;return console.log(" Finding teachers from students:",t.value.length),t.value.forEach(d=>{var f,h,v,p,g;(f=d.aeries)!=null&&f.schedule&&Object.values(d.aeries.schedule).forEach(y=>{y&&y.teacherId&&(console.log(" Found teacher ID in aeries.schedule:",y.teacherId),u.add(String(y.teacherId)))}),(v=(h=d.app)==null?void 0:h.schedule)!=null&&v.periods&&Object.values(d.app.schedule.periods).forEach(y=>{y&&(console.log(" Found teacher ID in app.schedule.periods:",y),u.add(String(y)))});for(let y=1;y<=7;y++){const E=`period${y}TeacherId`,S=d[E]||((p=d.aeries)==null?void 0:p[E])||((g=d.app)==null?void 0:g[E]);S&&(console.log(" Found teacher ID in",E,":",S),u.add(String(S)))}}),console.log(" Unique teacher IDs found:",Array.from(u)),console.log(" Users available:",e.value.length),Array.from(u).map(d=>{let f=e.value.find(h=>h.id===d);return!f&&/^\d+$/.test(d)&&(f=e.value.find(h=>h.aeriesId===d)),{id:d,name:f?f.name||`${f.firstName} ${f.lastName}`:`Teacher ${d}`,actualUserId:f?f.id:null}}).sort((d,f)=>d.name.localeCompare(f.name))}),i=(u,d=[])=>{let f=-1;if(/^\d+$/.test(u))f=parseInt(u)-1;else if(u==="SH")f=6;else if(u.startsWith("Per")){const h=u.replace("Per","");/^\d+$/.test(h)&&(f=parseInt(h)-1)}return d.includes(f.toString())};return{availablePeriods:n,availableTeachers:s,getStudentsForTeachers:(u,d=[])=>t.value.filter(f=>{var v,p,g,y,E,S,I;if(!(((p=(v=f.app)==null?void 0:v.flags)==null?void 0:p.flag1)||f.flag1||!1))return!1;if((g=f.aeries)!=null&&g.schedule){const R=Object.entries(f.aeries.schedule);for(let D=0;D<R.length;D++){const[C,_]=R[D];if(_&&_.teacherId&&u.includes(String(_.teacherId))&&!i(C,d))return!0}}if((E=(y=f.app)==null?void 0:y.schedule)!=null&&E.periods){const R=Object.entries(f.app.schedule.periods);for(let D=0;D<R.length;D++){const[C,_]=R[D];if(_&&u.includes(String(_))&&!i(C,d))return!0}}for(let R=0;R<7;R++){const D=`period${R+1}TeacherId`,C=f[D]||((S=f.aeries)==null?void 0:S[D])||((I=f.app)==null?void 0:I[D]);if(C&&u.includes(String(C))&&!d.includes(R.toString()))return!0}return!1}),getStudentTeacherPeriods:(u,d,f=[])=>{var v,p,g,y,E,S,I,R,D,C,_;const h=[];if((v=u.aeries)!=null&&v.schedule){const b=Object.entries(u.aeries.schedule);for(let x=0;x<b.length;x++){const[w,A]=b[x];if(A&&A.teacherId&&d.includes(String(A.teacherId))&&!i(w,f)){let k=e.value.find(G=>G.id===String(A.teacherId));!k&&/^\d+$/.test(A.teacherId)&&(k=e.value.find(G=>G.aeriesId===String(A.teacherId)));const L=((g=(p=r.value)==null?void 0:p.periodLabels)==null?void 0:g[x])||`Period ${x+1}`;h.push({period:L,teacherName:k?k.name||`${k.firstName} ${k.lastName}`:`Teacher ${A.teacherId}`})}}}if((E=(y=u.app)==null?void 0:y.schedule)!=null&&E.periods){const b=Object.entries(u.app.schedule.periods);for(let x=0;x<b.length;x++){const[w,A]=b[x];if(A&&d.includes(String(A))&&!i(w,f)){const k=e.value.find(G=>G.id===String(A)),L=((I=(S=r.value)==null?void 0:S.periodLabels)==null?void 0:I[x])||`Period ${x+1}`;h.push({period:L,teacherName:k?k.name||`${k.firstName} ${k.lastName}`:`Teacher ${A}`})}}}for(let b=0;b<7;b++){const x=`period${b+1}TeacherId`,w=u[x]||((R=u.aeries)==null?void 0:R[x])||((D=u.app)==null?void 0:D[x]);if(w&&d.includes(String(w))&&!f.includes(b.toString())){let A=e.value.find(L=>L.id===String(w));!A&&/^\d+$/.test(w)&&(A=e.value.find(L=>L.aeriesId===String(w)));const k=((_=(C=r.value)==null?void 0:C.periodLabels)==null?void 0:_[b])||`Period ${b+1}`;h.push({period:k,teacherName:A?A.name||`${A.firstName} ${A.lastName}`:`Teacher ${w}`})}}return h},generateCSV:()=>{const u=["Student ID","First Name","Last Name","Grade","Case Manager","Assessment Accommodations","Services"],d=t.value.map(h=>{var I,R,D,C,_;const v=it(h,"firstName")||"",p=it(h,"lastName")||"",g=it(h,"grade")||"",y=h.caseManagerId||((R=(I=h.app)==null?void 0:I.studentData)==null?void 0:R.caseManagerId)||"",E=((C=(D=h.app)==null?void 0:D.accommodations)==null?void 0:C.assessment)||[],S=((_=h.app)==null?void 0:_.classServices)||[];return[h.id||"",v,p,g,y,Array.isArray(E)?E.join("; "):E,Array.isArray(S)?S.map(b=>b.name||b).join("; "):S]});return[u,...d].map(h=>h.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(",")).join(`
`)},downloadCSV:(u,d)=>{const f=new Blob([u],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");h.href=URL.createObjectURL(f),h.download=d,h.click(),URL.revokeObjectURL(h.href)},isPeriodExcluded:i}}const pm="casemanage_linked_sheet_id",Mf="Student Data";function Fx(){const t=pe(!1),e=pe(localStorage.getItem(pm)||""),r=pe(""),n=pe(null),s=pe("idle"),i=pe(""),a=pe(null),o=pe("");let l=null;const c=()=>new Promise((C,_)=>{var x,w,A;if((w=(x=window.google)==null?void 0:x.accounts)!=null&&w.oauth2&&((A=window.gapi)!=null&&A.client)){C();return}const b=document.createElement("script");b.src="https://accounts.google.com/gsi/client",b.onload=()=>{a.value=window.google.accounts.oauth2.initTokenClient({client_id:"756483333257-kh1cv865e0buv0cv9g0v1h7ghq7s0e70.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",callback:L=>{L.access_token?(o.value=L.access_token,t.value=!0,window.gapi.client.setToken({access_token:L.access_token}),l&&(l(L),l=null)):(console.error("Failed to get access token"),l&&(l(null),l=null))}});const k=document.createElement("script");k.src="https://apis.google.com/js/api.js",k.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]}),C()})},document.head.appendChild(k)},b.onerror=()=>_(new Error("Failed to load Google Identity Services")),document.head.appendChild(b)}),u=async()=>{if(!a.value)throw new Error("Google auth not initialized");if(o.value)try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:"1BxiMVs0XRA5nFMRigcZ_6g3D6P6dNTMhvBSm1x7kFNg"}),{access_token:o.value}}catch{console.log("Token expired, requesting new one"),o.value=""}return new Promise((C,_)=>{l=C;const b=setTimeout(()=>{l=null,_(new Error("Token request timed out"))},3e4),x=a.value.callback;a.value.callback=w=>{clearTimeout(b),a.value.callback=x,w.access_token?(o.value=w.access_token,t.value=!0,window.gapi.client.setToken({access_token:w.access_token}),l&&(l(w),l=null)):(console.error("Failed to get access token:",w),l&&(l(null),l=null))};try{a.value.requestAccessToken()}catch(w){clearTimeout(b),a.value.callback=x,_(w)}})},d=async(C,_=[])=>{var b;try{s.value="syncing",i.value="Creating new Google Sheet...",o.value||await u();const w=((b=Ku().currentUser)==null?void 0:b.email)||"",A=await window.gapi.client.sheets.spreadsheets.create({properties:{title:`CaseManage Student Data - ${new Date().toLocaleDateString()}`,locale:"en_US",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},sheets:[{properties:{title:Mf,gridProperties:{rowCount:1e3,columnCount:9,frozenRowCount:1}}}]}),k=A.result.spreadsheetId;e.value=k,r.value=`https://docs.google.com/spreadsheets/d/${k}`,localStorage.setItem(pm,k),await f(C,_);const L=A.result.sheets[0].properties.sheetId;return await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:k,resource:{requests:[{repeatCell:{range:{sheetId:L,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:L,dimension:"COLUMNS",startIndex:0,endIndex:9}}},{addProtectedRange:{protectedRange:{range:{sheetId:L},description:`Read-only protection for ${Mf}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),s.value="success",i.value="Sheet created and linked successfully!",n.value=new Date,window.open(r.value,"_blank"),{spreadsheetId:k,url:r.value}}catch(x){throw console.error("Error creating sheet:",x),s.value="error",i.value=`Failed to create sheet: ${x.message}`,x}},f=async(C,_=[])=>{if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{s.value="syncing",i.value="Updating Google Sheet...",o.value||await u();const b=C.filter(L=>{var P,M;return((M=(P=L.app)==null?void 0:P.flags)==null?void 0:M.flag1)||L.flag1||!1});console.log(" Google Sheets - Original students:",C.length),console.log(" Google Sheets - Filtered students (separate setting only):",b.length),console.log(" Google Sheets - Students data:",b),b&&b.length>0&&console.log(" Google Sheets - First student:",b[0]);const x=["Student ID","First Name","Last Name","Grade","Case Manager","Separate Setting","Assessment Accommodations","Services","Last Updated"],w=b.map(L=>{var G,P,M,H,B,Q,j,O,W,K,se,ve;return console.log(" Processing student:",L.id,{firstName:L.firstName||((P=(G=L.app)==null?void 0:G.studentData)==null?void 0:P.firstName),lastName:L.lastName||((H=(M=L.app)==null?void 0:M.studentData)==null?void 0:H.lastName),grade:L.grade||((Q=(B=L.app)==null?void 0:B.studentData)==null?void 0:Q.grade)}),[L.id||"",L.firstName||((O=(j=L.app)==null?void 0:j.studentData)==null?void 0:O.firstName)||"",L.lastName||((K=(W=L.app)==null?void 0:W.studentData)==null?void 0:K.lastName)||"",L.grade||((ve=(se=L.app)==null?void 0:se.studentData)==null?void 0:ve.grade)||"",v(L,_)||"",y(L)||"",p(L,"assessment")||"",g(L)||"",new Date().toLocaleString()]}),A=[x,...w];console.log(" Google Sheets - Data to write:",A),await window.gapi.client.sheets.spreadsheets.values.clear({spreadsheetId:e.value,range:`${Mf}!A:Z`});const k=await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${Mf}!A1`,valueInputOption:"RAW",resource:{values:A}});console.log(" Google Sheets - Update response:",k),s.value="success",i.value=`Updated ${w.length} students (separate setting only)`,n.value=new Date}catch(b){throw console.error("Error updating sheet:",b),s.value="error",i.value=`Failed to update: ${b.message}`,b.status===401&&(o.value="",await u()),b}},h=()=>{e.value="",r.value="",localStorage.removeItem(pm),s.value="idle",i.value="",n.value=null},v=(C,_=[])=>{var w,A;const b=C.caseManagerId||((A=(w=C.app)==null?void 0:w.studentData)==null?void 0:A.caseManagerId)||C.casemanager_id;if(!b)return"Not Assigned";const x=_.find(k=>k.id===b);return x&&(x.name||`${x.firstName} ${x.lastName}`||x.email)||b},p=(C,_)=>{var x,w,A;const b=((w=(x=C.app)==null?void 0:x.accommodations)==null?void 0:w[_])||((A=C.accommodations)==null?void 0:A[_])||[];return Array.isArray(b)?b.join(", "):b},g=C=>{var b;const _=((b=C.app)==null?void 0:b.classServices)||C.classServices||[];return Array.isArray(_)?_.map(x=>x.name||x).join(", "):_},y=C=>{var b,x;return((x=(b=C.app)==null?void 0:b.flags)==null?void 0:x.flag1)||C.flag1||!1?"True":"False"},E=async()=>{if(!e.value)return!1;try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:e.value}),!0}catch(C){return C.status===404&&h(),!1}},S=async(C,_,b,x=[],w=[])=>{var A;if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{o.value||await u();const L=((A=Ku().currentUser)==null?void 0:A.email)||"";console.log(" Creating custom tab:",C,"for teachers:",b,"excluding periods:",w);const P=(await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{addSheet:{properties:{title:C,gridProperties:{rowCount:1e3,columnCount:12,frozenRowCount:1}}}}]}})).result.replies[0].addSheet.properties.sheetId;console.log(" Created sheet with ID:",P);const M=_.filter(j=>{var W,K;return((K=(W=j.app)==null?void 0:W.flags)==null?void 0:K.flag1)||j.flag1||!1});console.log(" Custom tab - Original students:",_.length),console.log(" Custom tab - Filtered students (separate setting only):",M.length);const H=["Student ID","First Name","Last Name","Grade","Case Manager","Period","Teacher","Subject","Separate Setting","Assessment Accommodations","Services","Last Updated"],B=[];M.forEach(j=>{const O=I(j,b,x,w);console.log(" Student:",j.id,"Periods found:",O.length,"Excluded periods:",w),O.forEach(W=>{console.log(" Adding row for period:",W.period,"teacher:",W.teacherName,"source:",W.source||"unknown")}),O.forEach(W=>{var K,se,ve,ie,de,ee;B.push([j.id||"",j.firstName||((se=(K=j.app)==null?void 0:K.studentData)==null?void 0:se.firstName)||"",j.lastName||((ie=(ve=j.app)==null?void 0:ve.studentData)==null?void 0:ie.lastName)||"",j.grade||((ee=(de=j.app)==null?void 0:de.studentData)==null?void 0:ee.grade)||"",v(j,x)||"",W.period||"",W.teacherName||"",W.subject||"",y(j)||"",p(j,"assessment")||"",g(j)||"",new Date().toLocaleString()])})});const Q=[H,...B];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${C}!A1`,valueInputOption:"RAW",resource:{values:Q}}),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{repeatCell:{range:{sheetId:P,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:P,dimension:"COLUMNS",startIndex:0,endIndex:12}}},{addProtectedRange:{protectedRange:{range:{sheetId:P},description:`Read-only protection for ${C}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),console.log(" Custom tab created successfully with",B.length,"rows and read-only protection"),{sheetId:P,rowCount:B.length}}catch(k){throw console.error("Error creating custom tab:",k),k}},I=(C,_,b=[],x=[])=>{var k,L,G,P,M;const w=[];console.log(" getStudentPeriodsForTeachers for student:",C.id,"teacherIds:",_,"excludedPeriods:",x,"excludedPeriods array:",JSON.stringify(x));const A=H=>{let B=-1;if(/^\d+$/.test(H))B=parseInt(H)-1;else if(H==="SH")B=6;else if(H.startsWith("Per")){const Q=H.replace("Per","");/^\d+$/.test(Q)&&(B=parseInt(Q)-1)}return console.log(" Period",H,"maps to index",B,"excluded?",x.includes(B.toString())),x.includes(B.toString())};if((k=C.aeries)!=null&&k.schedule){const H=Object.entries(C.aeries.schedule);console.log(" Aeries schedule entries:",H.length);for(let B=0;B<H.length;B++){const[Q,j]=H[B],O=A(Q);console.log(" Checking aeries period key:",Q,"teacherId:",j==null?void 0:j.teacherId,"excluded?",O),j&&j.teacherId&&_.includes(String(j.teacherId))&&(O?console.log(" Excluding aeries period",Q):(console.log(" Including aeries period",Q),w.push({period:Q.replace("period",""),teacherId:j.teacherId,teacherName:R(j.teacherId,b),subject:j.subject||"",source:"aeries"})))}}if((G=(L=C.app)==null?void 0:L.schedule)!=null&&G.periods){const H=Object.entries(C.app.schedule.periods);console.log(" App schedule entries:",H.length);for(let B=0;B<H.length;B++){const[Q,j]=H[B],O=A(Q);console.log(" Checking app period key:",Q,"teacherId:",j,"excluded?",O),j&&_.includes(String(j))&&(O?console.log(" Excluding app period",Q):(console.log(" Including app period",Q),w.push({period:Q,teacherId:j,teacherName:R(j,b),subject:"",source:"app"})))}}for(let H=0;H<7;H++){const B=`period${H+1}TeacherId`,Q=C[B]||((P=C.aeries)==null?void 0:P[B])||((M=C.app)==null?void 0:M[B]);if(Q&&_.includes(String(Q))){const j=x.includes(H.toString());console.log(" Checking CSV period index",H,"field:",B,"teacherId:",Q,"excluded?",j),j?console.log(" Excluding CSV period",H):(console.log(" Including CSV period",H),w.push({period:(H+1).toString(),teacherId:Q,teacherName:R(Q,b),subject:"",source:"csv"}))}}return console.log(" Final periods for student",C.id,":",w.length,w),w},R=(C,_=[])=>{let b=_.find(x=>x.id===C);return!b&&/^\d+$/.test(C)&&(b=_.find(x=>x.aeriesId===C)),b?b.name||`${b.firstName} ${b.lastName}`||`Teacher ${C}`:`Teacher ${C}`};return{isInitialized:t,linkedSheetId:e,linkedSheetUrl:r,lastSyncTime:n,syncStatus:s,syncMessage:i,initializeGoogleAuth:c,requestAccessToken:u,createLinkedSheet:d,updateSheetData:f,createCustomTab:S,deleteCustomTab:async C=>{if(!e.value)throw new Error("No linked sheet.");try{o.value||await u(),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{deleteSheet:{sheetId:C}}]}}),console.log(" Deleted custom tab with sheet ID:",C)}catch(_){throw console.error("Error deleting custom tab:",_),_}},unlinkSheet:h,checkSheetConnection:E}}const Lae=Object.freeze(Object.defineProperty({__proto__:null,useGoogleSheetsRealtime:Fx},Symbol.toStringTag,{value:"Module"}));function Mae(t,e,r){const{generateCSV:n,downloadCSV:s}=r,{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeGoogleAuth:u,createLinkedSheet:d,updateSheetData:f,createCustomTab:h,deleteCustomTab:v,unlinkSheet:p,checkSheetConnection:g}=Fx();let y=null,E=!1;const S=async()=>{try{const k=localStorage.getItem("casemanage_linked_sheet_id");k&&k.startsWith("1XSL0Sl7")&&(console.log("Clearing old sheet ID that was causing 403 errors"),localStorage.removeItem("casemanage_linked_sheet_id")),await u(),i.value&&await g()&&(await C(),I())}catch(k){console.error("Failed to initialize Google Auth:",k)}};er(()=>t.value,(k,L)=>{k&&L&&k!==L&&(E=!0,console.log(" Student data changed, will sync on next interval")),k!=null&&k.length},{deep:!0});const I=()=>{y&&clearInterval(y),y=setInterval(async()=>{if(i.value&&E&&l.value!=="syncing")try{console.log(" Hourly auto-sync starting..."),await C(),E=!1,console.log(" Hourly auto-sync completed")}catch(k){console.error(" Hourly auto-sync failed:",k)}},36e5)},R=()=>{y&&clearInterval(y)},D=async()=>{try{await d(t.value,e.value),I()}catch(k){console.error("Failed to create linked sheet:",k),alert("Failed to create Google Sheet. Please make sure you are signed in to Google.")}},C=async()=>{if(!(!i.value||l.value==="syncing"))try{await f(t.value,e.value)}catch(k){console.error("Failed to sync sheet:",k),alert("Failed to sync sheet. Please try again.")}};return{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeIntegration:S,createLinkedGoogleSheet:D,syncNow:C,openGoogleSheet:()=>{a.value&&(window.open(a.value,"_blank","noopener,noreferrer")||(window.location.href=a.value))},unlinkSheet:p,createCustomTab:h,deleteCustomTab:v,createGoogleSheetWithData:()=>{const k=n();s(k,"student_data.csv"),window.open("https://sheets.new","_blank")},createBlankGoogleSheet:()=>{window.open("https://sheets.new","_blank")},exportToCSV:()=>{const k=n();s(k,"student_data_export.csv")},formatTime:k=>new Date(k).toLocaleString(),setupAutoSync:I,cleanupAutoSync:R}}function Bae(t,e){const{getStudentsForTeachers:r}=t,{createCustomTab:n,deleteCustomTab:s}=e,i=pe([]),a=pe(!1),o=pe(""),l=pe([]),c=pe([]),u=5,d=Ae(()=>l.value.length===0?[]:r(l.value,c.value)),f=async g=>{if(!o.value.trim()||l.value.length===0){alert("Please enter a tab name and select at least one teacher");return}if(i.value.length>=u){alert(`Maximum of ${u} custom tabs allowed`);return}try{const y=r(l.value,c.value),E=await n(o.value.trim(),y,l.value,g,c.value),S={id:Date.now().toString(),name:o.value.trim(),teachers:[...l.value],studentCount:E.rowCount,sheetId:E.sheetId};i.value.push(S),v(),console.log("Custom tab added:",S),alert(`Custom tab "${S.name}" created successfully with ${E.rowCount} student entries!`)}catch(y){console.error("Failed to create custom tab:",y),alert("Failed to create custom tab in Google Sheet. Please try again.")}},h=async g=>{const y=i.value.find(E=>E.id===g);if(y&&confirm(`Are you sure you want to remove the "${y.name}" tab?`))try{y.sheetId&&await s(y.sheetId),i.value=i.value.filter(E=>E.id!==g),console.log("Custom tab removed:",g),alert(`Tab "${y.name}" removed successfully.`)}catch(E){console.error("Failed to delete custom tab:",E),alert("Failed to delete tab from Google Sheet. You may need to delete it manually."),i.value=i.value.filter(S=>S.id!==g)}},v=()=>{o.value="",l.value=[],c.value=[],a.value=!1};return{customTabs:i,showAddTabForm:a,newTabName:o,selectedTeachers:l,selectedExcludedPeriods:c,maxCustomTabs:u,filteredStudentsPreview:d,addCustomTab:f,removeCustomTab:h,resetForm:v,toggleAddTabForm:()=>{a.value=!a.value,a.value||v()}}}const Uae={class:"sheets-section"},Vae={key:0,class:"linked-sheet-status"},$ae={class:"status-card success"},Hae={class:"sync-info"},jae={key:0},Gae={key:1,class:"syncing"},Wae={key:2,class:"success"},zae={key:3,class:"error"},Kae={class:"sheet-actions"},qae=["disabled"],Xae={key:1,class:"create-sheet-section"},Yae={class:"alternative-options"},Qae={class:"button-group"},Jae={__name:"GoogleSheetsConnector",props:{linkedSheetId:String,lastSyncTime:[String,Date],syncStatus:String,syncMessage:String},emits:["openGoogleSheet","syncNow","unlinkSheet","createLinkedGoogleSheet","createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){const e=r=>new Date(r).toLocaleString();return(r,n)=>(N(),U("div",Uae,[n[12]||(n[12]=m("h4",null,"Google Sheets Integration",-1)),t.linkedSheetId?(N(),U("div",Vae,[m("div",$ae,[n[7]||(n[7]=m("h5",null," Linked Google Sheet",-1)),n[8]||(n[8]=m("p",null,"Your student data is synced to Google Sheets",-1)),m("button",{onClick:n[0]||(n[0]=s=>r.$emit("openGoogleSheet")),class:"sheet-link"}," Open Google Sheet  "),m("div",Hae,[t.lastSyncTime?(N(),U("span",jae,"Last synced: "+le(e(t.lastSyncTime)),1)):Fe("",!0),t.syncStatus==="syncing"?(N(),U("span",Gae," Syncing...")):t.syncStatus==="success"?(N(),U("span",Wae," Synced")):t.syncStatus==="error"?(N(),U("span",zae," "+le(t.syncMessage),1)):Fe("",!0)]),n[9]||(n[9]=m("div",{class:"auto-sync-info"},[m("span",{class:"auto-sync-badge"},[m("span",{class:"pulse"}),Me(" Auto-sync enabled ")]),m("p",{class:"auto-sync-description"}," Changes to student data, accommodations, and services are automatically synced to your Google Sheet. ")],-1)),m("div",Kae,[m("button",{onClick:n[1]||(n[1]=s=>r.$emit("syncNow")),disabled:t.syncStatus==="syncing",class:"btn-sync"}," Sync Now ",8,qae),m("button",{onClick:n[2]||(n[2]=s=>r.$emit("unlinkSheet")),class:"btn-unlink"}," Unlink Sheet ")])])])):(N(),U("div",Xae,[n[10]||(n[10]=Xn('<h5 data-v-ec72cef0>Create a Linked Google Sheet</h5><p data-v-ec72cef0>Link your student data to a Google Sheet that automatically updates when changes are made.</p><div class="features-list" data-v-ec72cef0><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Auto-syncs when students are added or updated</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Updates accommodations and services in real-time</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Maintains a live connection to your data</span></div></div>',3)),m("button",{onClick:n[3]||(n[3]=s=>r.$emit("createLinkedGoogleSheet")),class:"btn-primary"},"  Create & Link Google Sheet ")])),m("div",Yae,[n[11]||(n[11]=m("h5",null,"Other Export Options",-1)),m("div",Qae,[m("button",{onClick:n[4]||(n[4]=s=>r.$emit("createGoogleSheetWithData")),class:"btn-secondary"},"  Create Google Sheet with Data (One-time) "),m("button",{onClick:n[5]||(n[5]=s=>r.$emit("createBlankGoogleSheet")),class:"btn-secondary"},"  Create Blank Google Sheet "),m("button",{onClick:n[6]||(n[6]=s=>r.$emit("exportToCSV")),class:"btn-secondary"},"  Export to CSV Only ")])])]))}},Zae=bt(Jae,[["__scopeId","data-v-ec72cef0"]]),eie={class:"preview-section"},tie={class:"preview-table"},rie={key:0},nie={key:0},sie={key:0,class:"preview-note"},mm=5,aie={__name:"StudentPreview",props:{filteredStudents:{type:Array,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},setup(t){const e=t,r=Ae(()=>e.filteredStudents.slice(0,mm)),n=a=>{const o=it(a,"firstName")||"",l=it(a,"lastName")||"";return`${o} ${l}`.trim()},s=a=>it(a,"grade")||"",i=a=>e.getStudentTeacherPeriods(a,e.selectedTeachers,e.selectedExcludedPeriods);return(a,o)=>(N(),U("div",eie,[m("h6",null,"Preview ("+le(t.filteredStudents.length)+" students)",1),m("div",tie,[m("table",null,[o[0]||(o[0]=m("thead",null,[m("tr",null,[m("th",null,"Name"),m("th",null,"Grade"),m("th",null,"Period"),m("th",null,"Teacher")])],-1)),m("tbody",null,[(N(!0),U(Oe,null,Ge(r.value,l=>(N(),U("tr",{key:l.id},[m("td",null,le(n(l)),1),m("td",null,le(s(l)),1),m("td",null,[(N(!0),U(Oe,null,Ge(i(l),(c,u)=>(N(),U("span",{key:u},[Me(le(c.period),1),u<i(l).length-1?(N(),U("span",rie,", ")):Fe("",!0)]))),128))]),m("td",null,[(N(!0),U(Oe,null,Ge(i(l),(c,u)=>(N(),U("span",{key:u},[Me(le(c.teacherName),1),u<i(l).length-1?(N(),U("span",nie,", ")):Fe("",!0)]))),128))])]))),128))])]),t.filteredStudents.length>mm?(N(),U("p",sie," ... and "+le(t.filteredStudents.length-mm)+" more students ",1)):Fe("",!0)])]))}},iie=bt(aie,[["__scopeId","data-v-936b1ce9"]]),oie={class:"custom-tabs-config"},lie={class:"add-tab-controls"},cie=["disabled"],uie={key:0,class:"max-tabs-warning"},die={key:0,class:"add-tab-form"},fie={class:"form-group"},hie=["value"],pie={class:"form-group"},mie={class:"teacher-checkboxes"},vie=["value","checked","onChange"],gie={class:"form-group"},xie={class:"period-checkboxes"},yie=["value","checked","onChange"],Eie={class:"form-actions"},_ie={key:1,class:"existing-tabs"},bie={class:"tab-teachers"},Sie=["onClick"],Tie={__name:"CustomTabManager",props:{customTabs:{type:Array,required:!0},showAddTabForm:{type:Boolean,required:!0},newTabName:{type:String,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},maxCustomTabs:{type:Number,required:!0},availableTeachers:{type:Array,required:!0},availablePeriods:{type:Array,required:!0},filteredStudentsPreview:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},emits:["toggleAddTabForm","update:newTabName","updateSelectedTeachers","updateSelectedExcludedPeriods","addCustomTab","removeCustomTab","resetForm"],setup(t){return(e,r)=>(N(),U("div",oie,[r[8]||(r[8]=m("h5",null,"Custom Teacher Tabs",-1)),r[9]||(r[9]=m("p",null,"Create custom tabs with data filtered by specific teachers",-1)),m("div",lie,[m("button",{onClick:r[0]||(r[0]=n=>e.$emit("toggleAddTabForm")),disabled:t.customTabs.length>=t.maxCustomTabs,class:"btn-primary"}," + Add Custom Tab ",8,cie),t.customTabs.length>=t.maxCustomTabs?(N(),U("span",uie," Maximum of "+le(t.maxCustomTabs)+" custom tabs allowed ",1)):Fe("",!0)]),t.showAddTabForm?(N(),U("div",die,[m("div",fie,[r[4]||(r[4]=m("label",null,"Tab Name",-1)),m("input",{value:t.newTabName,onInput:r[1]||(r[1]=n=>e.$emit("update:newTabName",n.target.value)),type:"text",class:"form-input",placeholder:"e.g., Math Teachers",maxlength:"30"},null,40,hie)]),m("div",pie,[r[5]||(r[5]=m("label",null,"Select Teachers",-1)),m("div",mie,[(N(!0),U(Oe,null,Ge(t.availableTeachers,n=>(N(),U("label",{key:n.id,class:"checkbox-label"},[m("input",{type:"checkbox",value:n.id,checked:t.selectedTeachers.includes(n.id),onChange:s=>e.$emit("updateSelectedTeachers",n.id,s.target.checked)},null,40,vie),Me(" "+le(n.name),1)]))),128))])]),m("div",gie,[r[6]||(r[6]=m("label",null,"Exclude Periods (Optional)",-1)),m("div",xie,[(N(!0),U(Oe,null,Ge(t.availablePeriods,n=>(N(),U("label",{key:n.value,class:"checkbox-label"},[m("input",{type:"checkbox",value:n.value,checked:t.selectedExcludedPeriods.includes(n.value),onChange:s=>e.$emit("updateSelectedExcludedPeriods",n.value,s.target.checked)},null,40,yie),Me(" "+le(n.label),1)]))),128))])]),t.selectedTeachers.length>0?(N(),Rn(iie,{key:0,"filtered-students":t.filteredStudentsPreview,"selected-teachers":t.selectedTeachers,"selected-excluded-periods":t.selectedExcludedPeriods,"get-student-teacher-periods":t.getStudentTeacherPeriods},null,8,["filtered-students","selected-teachers","selected-excluded-periods","get-student-teacher-periods"])):Fe("",!0),m("div",Eie,[m("button",{onClick:r[2]||(r[2]=n=>e.$emit("addCustomTab")),class:"btn-primary"}," Create Tab "),m("button",{onClick:r[3]||(r[3]=n=>e.$emit("resetForm")),class:"btn-secondary"}," Cancel ")])])):Fe("",!0),t.customTabs.length>0?(N(),U("div",_ie,[r[7]||(r[7]=m("h6",null,"Current Custom Tabs",-1)),(N(!0),U(Oe,null,Ge(t.customTabs,n=>(N(),U("div",{key:n.id,class:"tab-item"},[m("div",null,[m("strong",null,le(n.name),1),m("span",bie,le(n.teachers.length)+" teacher(s), "+le(n.studentCount)+" students ",1)]),m("button",{onClick:s=>e.$emit("removeCustomTab",n.id),class:"btn-danger btn-small"}," Remove ",8,Sie)]))),128))])):Fe("",!0)]))}},Aie=bt(Tie,[["__scopeId","data-v-236484db"]]),wie={class:"export-options-section"},Cie={class:"export-grid"},Iie={class:"export-card"},kie={class:"export-card"},Die={class:"export-card"},Rie={__name:"TestingExportOptions",emits:["createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){return(e,r)=>(N(),U("div",wie,[r[12]||(r[12]=m("h4",null,"Export Options",-1)),r[13]||(r[13]=m("p",null,"Additional ways to export and work with your student data",-1)),m("div",Cie,[m("div",Iie,[r[3]||(r[3]=m("div",{class:"export-icon"},"",-1)),r[4]||(r[4]=m("h5",null,"Google Sheets with Data",-1)),r[5]||(r[5]=m("p",null,"Create a new Google Sheet and populate it with current student data (one-time export)",-1)),m("button",{onClick:r[0]||(r[0]=n=>e.$emit("createGoogleSheetWithData")),class:"btn-primary"}," Create Sheet with Data ")]),m("div",kie,[r[6]||(r[6]=m("div",{class:"export-icon"},"",-1)),r[7]||(r[7]=m("h5",null,"Blank Google Sheet",-1)),r[8]||(r[8]=m("p",null,"Create a new blank Google Sheet that you can customize yourself",-1)),m("button",{onClick:r[1]||(r[1]=n=>e.$emit("createBlankGoogleSheet")),class:"btn-primary"}," Create Blank Sheet ")]),m("div",Die,[r[9]||(r[9]=m("div",{class:"export-icon"},"",-1)),r[10]||(r[10]=m("h5",null,"CSV Export",-1)),r[11]||(r[11]=m("p",null,"Download student data as a CSV file for use in Excel or other applications",-1)),m("button",{onClick:r[2]||(r[2]=n=>e.$emit("exportToCSV")),class:"btn-primary"}," Download CSV ")])]),r[14]||(r[14]=m("div",{class:"export-info"},[m("h5",null,"Export Information"),m("ul",null,[m("li",null,[m("strong",null,"Linked Sheets:"),Me(" Automatically sync when data changes")]),m("li",null,[m("strong",null,"One-time Exports:"),Me(" Snapshot of data at export time")]),m("li",null,[m("strong",null,"CSV Files:"),Me(" Compatible with Excel, Numbers, and other spreadsheet apps")])])],-1))]))}},Fie=bt(Rie,[["__scopeId","data-v-3bc6896f"]]),Pie={class:"testing-links-container"},Oie={__name:"TestingLinks",setup(t){const{students:e,fetchStudents:r}=Ca(),{userList:n,fetchUsers:s}=Ia(),{appSettings:i,loadAppSettings:a}=ka(),o=Nae(e,n,i),{availablePeriods:l,availableTeachers:c,getStudentTeacherPeriods:u}=o,d=Mae(e,n,o),{linkedSheetId:f,lastSyncTime:h,syncStatus:v,syncMessage:p,initializeIntegration:g,createLinkedGoogleSheet:y,syncNow:E,openGoogleSheet:S,unlinkSheet:I,createGoogleSheetWithData:R,createBlankGoogleSheet:D,exportToCSV:C,cleanupAutoSync:_}=d,b=Bae(o,d),{customTabs:x,showAddTabForm:w,newTabName:A,selectedTeachers:k,selectedExcludedPeriods:L,maxCustomTabs:G,filteredStudentsPreview:P,addCustomTab:M,removeCustomTab:H,resetForm:B,toggleAddTabForm:Q}=b,j=(K,se)=>{if(se)k.value.includes(K)||k.value.push(K);else{const ve=k.value.indexOf(K);ve>-1&&k.value.splice(ve,1)}},O=(K,se)=>{if(se)L.value.includes(K)||L.value.push(K);else{const ve=L.value.indexOf(K);ve>-1&&L.value.splice(ve,1)}},W=async()=>{await M(n.value)};return Jt(async()=>{try{await Promise.all([r(),s(),a()]),console.log("Students loaded:",e.value.length),console.log("Users loaded:",n.value.length),console.log("App settings loaded:",i.value),await g()}catch(K){console.error("Failed to initialize TestingLinks:",K)}}),to(()=>{_()}),(K,se)=>(N(),U("div",Pie,[se[1]||(se[1]=m("h3",null,"Testing Links & Google Sheets Integration",-1)),nt(Zae,{"linked-sheet-id":me(f),"last-sync-time":me(h),"sync-status":me(v),"sync-message":me(p),onOpenGoogleSheet:me(S),onSyncNow:me(E),onUnlinkSheet:me(I),onCreateLinkedGoogleSheet:me(y),onCreateGoogleSheetWithData:me(R),onCreateBlankGoogleSheet:me(D),onExportToCsv:me(C)},null,8,["linked-sheet-id","last-sync-time","sync-status","sync-message","onOpenGoogleSheet","onSyncNow","onUnlinkSheet","onCreateLinkedGoogleSheet","onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"]),me(f)?(N(),Rn(Aie,{key:0,"custom-tabs":me(x),"show-add-tab-form":me(w),"new-tab-name":me(A),"selected-teachers":me(k),"selected-excluded-periods":me(L),"max-custom-tabs":me(G),"available-teachers":me(c),"available-periods":me(l),"filtered-students-preview":me(P),"get-student-teacher-periods":me(u),onToggleAddTabForm:me(Q),"onUpdate:newTabName":se[0]||(se[0]=ve=>A.value=ve),onUpdateSelectedTeachers:j,onUpdateSelectedExcludedPeriods:O,onAddCustomTab:W,onRemoveCustomTab:me(H),onResetForm:me(B)},null,8,["custom-tabs","show-add-tab-form","new-tab-name","selected-teachers","selected-excluded-periods","max-custom-tabs","available-teachers","available-periods","filtered-students-preview","get-student-teacher-periods","onToggleAddTabForm","onRemoveCustomTab","onResetForm"])):Fe("",!0),nt(Fie,{onCreateGoogleSheetWithData:me(R),onCreateBlankGoogleSheet:me(D),onExportToCsv:me(C)},null,8,["onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"])]))}},Nie=bt(Oie,[["__scopeId","data-v-8d441fb1"]]),Lie={class:"admin-dashboard"},Mie={class:"stats-grid"},Bie={class:"stat-card"},Uie={class:"stat-content"},Vie={class:"stat-card"},$ie={class:"stat-content"},Hie={class:"stat-card"},jie={class:"stat-content"},Gie={class:"stat-card"},Wie={class:"stat-content"},zie={class:"categories-grid"},Kie={class:"category-card"},qie={class:"category-header"},Xie={class:"category-card"},Yie={class:"category-header"},Qie={class:"category-card"},Jie={class:"category-header"},Zie={class:"category-card"},eoe={class:"category-header"},toe={class:"system-status"},roe={class:"status-grid"},noe={class:"status-card"},soe={class:"sync-status"},aoe={class:"sync-item"},ioe={key:0,class:"sync-time"},ooe={class:"sync-item"},loe={class:"sync-time"},coe={class:"status-card"},uoe={class:"user-activity"},doe={class:"activity-item"},foe={class:"activity-count"},hoe={class:"activity-item"},poe={class:"activity-count"},moe={class:"quick-actions"},voe={class:"actions-grid"},goe={__name:"AdminDashboard",emits:["goToCategory","goToStudents"],setup(t){const{students:e,fetchStudents:r}=Ca(),{userList:n,fetchUsers:s}=Ia(),{linkedSheetId:i,lastSyncTime:a}=Fx(),o=pe(12),l=pe(8),c=pe(!0),u=pe("Connected"),d=Ae(()=>{var y;return((y=e.value)==null?void 0:y.length)||0}),f=Ae(()=>{var y;return((y=n.value)==null?void 0:y.length)||0}),h=Ae(()=>{var y;return((y=n.value)==null?void 0:y.filter(E=>E.role==="paraeducator").length)||0}),v=Ae(()=>i.value?1:0),p=Ae(()=>!!i.value),g=y=>y?new Date(y).toLocaleString():"Never";return Jt(async()=>{try{await Promise.all([r(),s()])}catch(y){console.error("Error loading dashboard data:",y)}}),(y,E)=>(N(),U("div",Lie,[m("div",Mie,[m("div",Bie,[E[9]||(E[9]=m("div",{class:"stat-icon"},"",-1)),m("div",Uie,[m("h3",null,le(d.value),1),E[8]||(E[8]=m("p",null,"Total Students",-1))])]),m("div",Vie,[E[11]||(E[11]=m("div",{class:"stat-icon"},"",-1)),m("div",$ie,[m("h3",null,le(f.value),1),E[10]||(E[10]=m("p",null,"System Users",-1))])]),m("div",Hie,[E[13]||(E[13]=m("div",{class:"stat-icon"},"",-1)),m("div",jie,[m("h3",null,le(h.value),1),E[12]||(E[12]=m("p",null,"Paraeducators",-1))])]),m("div",Gie,[E[15]||(E[15]=m("div",{class:"stat-icon"},"",-1)),m("div",Wie,[m("h3",null,le(v.value),1),E[14]||(E[14]=m("p",null,"Linked Sheets",-1))])])]),m("div",zie,[m("div",Kie,[m("div",qie,[E[16]||(E[16]=m("h2",null," User & Student Management",-1)),m("button",{onClick:E[0]||(E[0]=S=>y.$emit("goToCategory","users-students")),class:"category-btn"}," Manage  ")]),E[17]||(E[17]=Xn('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Add Users</h4><p data-v-71bf3b1b>Create new user accounts with role assignments</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Manage Users</h4><p data-v-71bf3b1b>Edit existing users, roles, and permissions</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Student Administration</h4><p data-v-71bf3b1b>Comprehensive student data management</p></div></div></div></div>',1))]),m("div",Xie,[m("div",Yie,[E[18]||(E[18]=m("h2",null," Aide Management",-1)),m("button",{onClick:E[1]||(E[1]=S=>y.$emit("goToCategory","aide-management")),class:"category-btn"}," Manage  ")]),E[19]||(E[19]=Xn('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Aide Assignment</h4><p data-v-71bf3b1b>Assign paraeducators to students and periods</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Aide Schedule</h4><p data-v-71bf3b1b>Manage paraeducator schedules and assignments</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Time Table</h4><p data-v-71bf3b1b>Configure school periods and time slots</p></div></div></div></div>',1))]),m("div",Qie,[m("div",Jie,[E[20]||(E[20]=m("h2",null," Data & Integration",-1)),m("button",{onClick:E[2]||(E[2]=S=>y.$emit("goToCategory","data-integration")),class:"category-btn"}," Manage  ")]),E[21]||(E[21]=Xn('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>SEIS Import</h4><p data-v-71bf3b1b>Import student data from SEIS system</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Aeries API &amp; Import</h4><p data-v-71bf3b1b>Connect to Aeries SIS for data synchronization</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Testing Links</h4><p data-v-71bf3b1b>Google Sheets integration and export tools</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Teacher Feedback</h4><p data-v-71bf3b1b>Manage teacher feedback forms and responses</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Backup &amp; Restore</h4><p data-v-71bf3b1b>System backup and data restoration tools</p></div></div></div></div>',1))]),m("div",Zie,[m("div",eoe,[E[22]||(E[22]=m("h2",null," System Configuration",-1)),m("button",{onClick:E[3]||(E[3]=S=>y.$emit("goToCategory","system-config")),class:"category-btn"}," Manage  ")]),E[23]||(E[23]=Xn('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Permissions</h4><p data-v-71bf3b1b>Role-based access control and permissions matrix</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>App Settings</h4><p data-v-71bf3b1b>Configure application settings and preferences</p></div></div></div></div>',1))])]),m("div",toe,[E[31]||(E[31]=m("h2",null," System Status",-1)),m("div",roe,[m("div",noe,[E[26]||(E[26]=m("h3",null," Data Sync Status",-1)),m("div",soe,[m("div",aoe,[m("span",{class:ot(["sync-indicator",{active:p.value}])},null,2),E[24]||(E[24]=m("span",null,"Google Sheets",-1)),me(a)?(N(),U("span",ioe,le(g(me(a))),1)):Fe("",!0)]),m("div",ooe,[m("span",{class:ot(["sync-indicator",{active:c.value}])},null,2),E[25]||(E[25]=m("span",null,"Aeries SIS",-1)),m("span",loe,le(u.value),1)])])]),m("div",coe,[E[29]||(E[29]=m("h3",null," User Activity",-1)),m("div",uoe,[m("div",doe,[E[27]||(E[27]=m("span",null,"Active Users Today",-1)),m("span",foe,le(o.value),1)]),m("div",hoe,[E[28]||(E[28]=m("span",null,"Recent Logins",-1)),m("span",poe,le(l.value),1)])])]),E[30]||(E[30]=Xn('<div class="status-card" data-v-71bf3b1b><h3 data-v-71bf3b1b> System Health</h3><div class="health-indicators" data-v-71bf3b1b><div class="health-item" data-v-71bf3b1b><span data-v-71bf3b1b>Database</span><span class="health-status healthy" data-v-71bf3b1b> Healthy</span></div><div class="health-item" data-v-71bf3b1b><span data-v-71bf3b1b>Functions</span><span class="health-status healthy" data-v-71bf3b1b> Operational</span></div></div></div>',1))])]),m("div",moe,[E[36]||(E[36]=m("h2",null," Quick Actions",-1)),m("div",voe,[m("button",{onClick:E[4]||(E[4]=S=>y.$emit("goToStudents")),class:"action-btn students"},E[32]||(E[32]=[m("span",{class:"action-icon"},"",-1),m("span",null,"View Students",-1)])),m("button",{onClick:E[5]||(E[5]=S=>y.$emit("goToCategory","users-students")),class:"action-btn users"},E[33]||(E[33]=[m("span",{class:"action-icon"},"",-1),m("span",null,"Manage Users",-1)])),m("button",{onClick:E[6]||(E[6]=S=>y.$emit("goToCategory","aide-management")),class:"action-btn aide"},E[34]||(E[34]=[m("span",{class:"action-icon"},"",-1),m("span",null,"Aide Management",-1)])),m("button",{onClick:E[7]||(E[7]=S=>y.$emit("goToCategory","data-integration")),class:"action-btn data"},E[35]||(E[35]=[m("span",{class:"action-icon"},"",-1),m("span",null,"Data & Integration",-1)]))])])]))}},xoe=bt(goe,[["__scopeId","data-v-71bf3b1b"]]);var W4={exports:{}};function yoe(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vm={exports:{}};const Eoe={},_oe=Object.freeze(Object.defineProperty({__proto__:null,default:Eoe},Symbol.toStringTag,{value:"Module"})),boe=ex(_oe);var fb;function Wt(){return fb||(fb=1,function(t,e){(function(r,n){t.exports=n()})(Nt,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof Nt<"u"&&Nt.crypto&&(i=Nt.crypto),!i&&typeof yoe=="function")try{i=boe}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function E(){}return function(S){var I;return E.prototype=S,I=new E,E.prototype=null,I}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(E){var S=o(this);return E&&S.mixIn(E),(!S.hasOwnProperty("init")||this.init===S.init)&&(S.init=function(){S.$super.init.apply(this,arguments)}),S.init.prototype=S,S.$super=this,S},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var S in E)E.hasOwnProperty(S)&&(this[S]=E[S]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=c.WordArray=u.extend({init:function(E,S){E=this.words=E||[],S!=s?this.sigBytes=S:this.sigBytes=E.length*4},toString:function(E){return(E||h).stringify(this)},concat:function(E){var S=this.words,I=E.words,R=this.sigBytes,D=E.sigBytes;if(this.clamp(),R%4)for(var C=0;C<D;C++){var _=I[C>>>2]>>>24-C%4*8&255;S[R+C>>>2]|=_<<24-(R+C)%4*8}else for(var b=0;b<D;b+=4)S[R+b>>>2]=I[b>>>2];return this.sigBytes+=D,this},clamp:function(){var E=this.words,S=this.sigBytes;E[S>>>2]&=4294967295<<32-S%4*8,E.length=n.ceil(S/4)},clone:function(){var E=u.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var S=[],I=0;I<E;I+=4)S.push(a());return new d.init(S,E)}}),f=l.enc={},h=f.Hex={stringify:function(E){for(var S=E.words,I=E.sigBytes,R=[],D=0;D<I;D++){var C=S[D>>>2]>>>24-D%4*8&255;R.push((C>>>4).toString(16)),R.push((C&15).toString(16))}return R.join("")},parse:function(E){for(var S=E.length,I=[],R=0;R<S;R+=2)I[R>>>3]|=parseInt(E.substr(R,2),16)<<24-R%8*4;return new d.init(I,S/2)}},v=f.Latin1={stringify:function(E){for(var S=E.words,I=E.sigBytes,R=[],D=0;D<I;D++){var C=S[D>>>2]>>>24-D%4*8&255;R.push(String.fromCharCode(C))}return R.join("")},parse:function(E){for(var S=E.length,I=[],R=0;R<S;R++)I[R>>>2]|=(E.charCodeAt(R)&255)<<24-R%4*8;return new d.init(I,S)}},p=f.Utf8={stringify:function(E){try{return decodeURIComponent(escape(v.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return v.parse(unescape(encodeURIComponent(E)))}},g=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=p.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var S,I=this._data,R=I.words,D=I.sigBytes,C=this.blockSize,_=C*4,b=D/_;E?b=n.ceil(b):b=n.max((b|0)-this._minBufferSize,0);var x=b*C,w=n.min(x*4,D);if(x){for(var A=0;A<x;A+=C)this._doProcessBlock(R,A);S=R.splice(0,x),I.sigBytes-=w}return new d.init(S,w)},clone:function(){var E=u.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});c.Hasher=g.extend({cfg:u.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var S=this._doFinalize();return S},blockSize:16,_createHelper:function(E){return function(S,I){return new E.init(I).finalize(S)}},_createHmacHelper:function(E){return function(S,I){return new y.HMAC.init(E,I).finalize(S)}}});var y=l.algo={};return l}(Math);return r})}(vm)),vm.exports}var gm={exports:{}},hb;function ap(){return hb||(hb=1,function(t,e){(function(r,n){t.exports=n(Wt())})(Nt,function(r){return function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=s.x64={};l.Word=a.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=a.extend({init:function(c,u){c=this.words=c||[],u!=n?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,d=[],f=0;f<u;f++){var h=c[f];d.push(h.high),d.push(h.low)}return o.create(d,this.sigBytes)},clone:function(){for(var c=a.clone.call(this),u=c.words=this.words.slice(0),d=u.length,f=0;f<d;f++)u[f]=u[f].clone();return c}})}(),r})}(gm)),gm.exports}var xm={exports:{}},pb;function Soe(){return pb||(pb=1,function(t,e){(function(r,n){t.exports=n(Wt())})(Nt,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,o=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],d=0;d<c;d++)u[d>>>2]|=l[d]<<24-d%4*8;a.call(this,u,c)}else a.apply(this,arguments)};o.prototype=i}}(),r.lib.WordArray})}(xm)),xm.exports}var ym={exports:{}},mb;function Toe(){return mb||(mb=1,function(t,e){(function(r,n){t.exports=n(Wt())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var h=c[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return i.create(u,c*2)}},a.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var h=o(c[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=o(l.charCodeAt(d)<<16-d%2*16);return i.create(u,c*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}}(),r.enc.Utf16})}(ym)),ym.exports}var Em={exports:{}},vb;function rl(){return vb||(vb=1,function(t,e){(function(r,n){t.exports=n(Wt())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var f=[],h=0;h<u;h+=3)for(var v=c[h>>>2]>>>24-h%4*8&255,p=c[h+1>>>2]>>>24-(h+1)%4*8&255,g=c[h+2>>>2]>>>24-(h+2)%4*8&255,y=v<<16|p<<8|g,E=0;E<4&&h+E*.75<u;E++)f.push(d.charAt(y>>>6*(3-E)&63));var S=d.charAt(64);if(S)for(;f.length%4;)f.push(S);return f.join("")},parse:function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<u.length;f++)d[u.charCodeAt(f)]=f}var h=u.charAt(64);if(h){var v=l.indexOf(h);v!==-1&&(c=v)}return o(l,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,c,u){for(var d=[],f=0,h=0;h<c;h++)if(h%4){var v=u[l.charCodeAt(h-1)]<<h%4*2,p=u[l.charCodeAt(h)]>>>6-h%4*2,g=v|p;d[f>>>2]|=g<<24-f%4*8,f++}return i.create(d,f)}}(),r.enc.Base64})}(Em)),Em.exports}var _m={exports:{}},gb;function Aoe(){return gb||(gb=1,function(t,e){(function(r,n){t.exports=n(Wt())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,f=c?this._safe_map:this._map;l.clamp();for(var h=[],v=0;v<d;v+=3)for(var p=u[v>>>2]>>>24-v%4*8&255,g=u[v+1>>>2]>>>24-(v+1)%4*8&255,y=u[v+2>>>2]>>>24-(v+2)%4*8&255,E=p<<16|g<<8|y,S=0;S<4&&v+S*.75<d;S++)h.push(f.charAt(E>>>6*(3-S)&63));var I=f.charAt(64);if(I)for(;h.length%4;)h.push(I);return h.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<d.length;h++)f[d.charCodeAt(h)]=h}var v=d.charAt(64);if(v){var p=l.indexOf(v);p!==-1&&(u=p)}return o(l,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,c,u){for(var d=[],f=0,h=0;h<c;h++)if(h%4){var v=u[l.charCodeAt(h-1)]<<h%4*2,p=u[l.charCodeAt(h)]>>>6-h%4*2,g=v|p;d[f>>>2]|=g<<24-f%4*8,f++}return i.create(d,f)}}(),r.enc.Base64url})}(_m)),_m.exports}var bm={exports:{}},xb;function nl(){return xb||(xb=1,function(t,e){(function(r,n){t.exports=n(Wt())})(Nt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[];(function(){for(var p=0;p<64;p++)c[p]=n.abs(n.sin(p+1))*4294967296|0})();var u=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,g){for(var y=0;y<16;y++){var E=g+y,S=p[E];p[E]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var I=this._hash.words,R=p[g+0],D=p[g+1],C=p[g+2],_=p[g+3],b=p[g+4],x=p[g+5],w=p[g+6],A=p[g+7],k=p[g+8],L=p[g+9],G=p[g+10],P=p[g+11],M=p[g+12],H=p[g+13],B=p[g+14],Q=p[g+15],j=I[0],O=I[1],W=I[2],K=I[3];j=d(j,O,W,K,R,7,c[0]),K=d(K,j,O,W,D,12,c[1]),W=d(W,K,j,O,C,17,c[2]),O=d(O,W,K,j,_,22,c[3]),j=d(j,O,W,K,b,7,c[4]),K=d(K,j,O,W,x,12,c[5]),W=d(W,K,j,O,w,17,c[6]),O=d(O,W,K,j,A,22,c[7]),j=d(j,O,W,K,k,7,c[8]),K=d(K,j,O,W,L,12,c[9]),W=d(W,K,j,O,G,17,c[10]),O=d(O,W,K,j,P,22,c[11]),j=d(j,O,W,K,M,7,c[12]),K=d(K,j,O,W,H,12,c[13]),W=d(W,K,j,O,B,17,c[14]),O=d(O,W,K,j,Q,22,c[15]),j=f(j,O,W,K,D,5,c[16]),K=f(K,j,O,W,w,9,c[17]),W=f(W,K,j,O,P,14,c[18]),O=f(O,W,K,j,R,20,c[19]),j=f(j,O,W,K,x,5,c[20]),K=f(K,j,O,W,G,9,c[21]),W=f(W,K,j,O,Q,14,c[22]),O=f(O,W,K,j,b,20,c[23]),j=f(j,O,W,K,L,5,c[24]),K=f(K,j,O,W,B,9,c[25]),W=f(W,K,j,O,_,14,c[26]),O=f(O,W,K,j,k,20,c[27]),j=f(j,O,W,K,H,5,c[28]),K=f(K,j,O,W,C,9,c[29]),W=f(W,K,j,O,A,14,c[30]),O=f(O,W,K,j,M,20,c[31]),j=h(j,O,W,K,x,4,c[32]),K=h(K,j,O,W,k,11,c[33]),W=h(W,K,j,O,P,16,c[34]),O=h(O,W,K,j,B,23,c[35]),j=h(j,O,W,K,D,4,c[36]),K=h(K,j,O,W,b,11,c[37]),W=h(W,K,j,O,A,16,c[38]),O=h(O,W,K,j,G,23,c[39]),j=h(j,O,W,K,H,4,c[40]),K=h(K,j,O,W,R,11,c[41]),W=h(W,K,j,O,_,16,c[42]),O=h(O,W,K,j,w,23,c[43]),j=h(j,O,W,K,L,4,c[44]),K=h(K,j,O,W,M,11,c[45]),W=h(W,K,j,O,Q,16,c[46]),O=h(O,W,K,j,C,23,c[47]),j=v(j,O,W,K,R,6,c[48]),K=v(K,j,O,W,A,10,c[49]),W=v(W,K,j,O,B,15,c[50]),O=v(O,W,K,j,x,21,c[51]),j=v(j,O,W,K,M,6,c[52]),K=v(K,j,O,W,_,10,c[53]),W=v(W,K,j,O,G,15,c[54]),O=v(O,W,K,j,D,21,c[55]),j=v(j,O,W,K,k,6,c[56]),K=v(K,j,O,W,Q,10,c[57]),W=v(W,K,j,O,w,15,c[58]),O=v(O,W,K,j,H,21,c[59]),j=v(j,O,W,K,b,6,c[60]),K=v(K,j,O,W,P,10,c[61]),W=v(W,K,j,O,C,15,c[62]),O=v(O,W,K,j,L,21,c[63]),I[0]=I[0]+j|0,I[1]=I[1]+O|0,I[2]=I[2]+W|0,I[3]=I[3]+K|0},_doFinalize:function(){var p=this._data,g=p.words,y=this._nDataBytes*8,E=p.sigBytes*8;g[E>>>5]|=128<<24-E%32;var S=n.floor(y/4294967296),I=y;g[(E+64>>>9<<4)+15]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,g[(E+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,p.sigBytes=(g.length+1)*4,this._process();for(var R=this._hash,D=R.words,C=0;C<4;C++){var _=D[C];D[C]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return R},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});function d(p,g,y,E,S,I,R){var D=p+(g&y|~g&E)+S+R;return(D<<I|D>>>32-I)+g}function f(p,g,y,E,S,I,R){var D=p+(g&E|y&~E)+S+R;return(D<<I|D>>>32-I)+g}function h(p,g,y,E,S,I,R){var D=p+(g^y^E)+S+R;return(D<<I|D>>>32-I)+g}function v(p,g,y,E,S,I,R){var D=p+(y^(g|~E))+S+R;return(D<<I|D>>>32-I)+g}s.MD5=o._createHelper(u),s.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5})}(bm)),bm.exports}var Sm={exports:{}},yb;function z4(){return yb||(yb=1,function(t,e){(function(r,n){t.exports=n(Wt())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,o=n.algo,l=[],c=o.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var f=this._hash.words,h=f[0],v=f[1],p=f[2],g=f[3],y=f[4],E=0;E<80;E++){if(E<16)l[E]=u[d+E]|0;else{var S=l[E-3]^l[E-8]^l[E-14]^l[E-16];l[E]=S<<1|S>>>31}var I=(h<<5|h>>>27)+y+l[E];E<20?I+=(v&p|~v&g)+1518500249:E<40?I+=(v^p^g)+1859775393:E<60?I+=(v&p|v&g|p&g)-1894007588:I+=(v^p^g)-899497514,y=g,g=p,p=v<<30|v>>>2,v=h,h=I}f[0]=f[0]+h|0,f[1]=f[1]+v|0,f[2]=f[2]+p|0,f[3]=f[3]+g|0,f[4]=f[4]+y|0},_doFinalize:function(){var u=this._data,d=u.words,f=this._nDataBytes*8,h=u.sigBytes*8;return d[h>>>5]|=128<<24-h%32,d[(h+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(h+64>>>9<<4)+15]=f,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=a.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c)}(),r.SHA1})}(Sm)),Sm.exports}var Tm={exports:{}},Eb;function Px(){return Eb||(Eb=1,function(t,e){(function(r,n){t.exports=n(Wt())})(Nt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[],u=[];(function(){function h(y){for(var E=n.sqrt(y),S=2;S<=E;S++)if(!(y%S))return!1;return!0}function v(y){return(y-(y|0))*4294967296|0}for(var p=2,g=0;g<64;)h(p)&&(g<8&&(c[g]=v(n.pow(p,1/2))),u[g]=v(n.pow(p,1/3)),g++),p++})();var d=[],f=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(h,v){for(var p=this._hash.words,g=p[0],y=p[1],E=p[2],S=p[3],I=p[4],R=p[5],D=p[6],C=p[7],_=0;_<64;_++){if(_<16)d[_]=h[v+_]|0;else{var b=d[_-15],x=(b<<25|b>>>7)^(b<<14|b>>>18)^b>>>3,w=d[_-2],A=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;d[_]=x+d[_-7]+A+d[_-16]}var k=I&R^~I&D,L=g&y^g&E^y&E,G=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),P=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),M=C+P+k+u[_]+d[_],H=G+L;C=D,D=R,R=I,I=S+M|0,S=E,E=y,y=g,g=M+H|0}p[0]=p[0]+g|0,p[1]=p[1]+y|0,p[2]=p[2]+E|0,p[3]=p[3]+S|0,p[4]=p[4]+I|0,p[5]=p[5]+R|0,p[6]=p[6]+D|0,p[7]=p[7]+C|0},_doFinalize:function(){var h=this._data,v=h.words,p=this._nDataBytes*8,g=h.sigBytes*8;return v[g>>>5]|=128<<24-g%32,v[(g+64>>>9<<4)+14]=n.floor(p/4294967296),v[(g+64>>>9<<4)+15]=p,h.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h}});s.SHA256=o._createHelper(f),s.HmacSHA256=o._createHmacHelper(f)}(Math),r.SHA256})}(Tm)),Tm.exports}var Am={exports:{}},_b;function woe(){return _b||(_b=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),Px())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)}(),r.SHA224})}(Am)),Am.exports}var wm={exports:{}},bb;function K4(){return bb||(bb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),ap())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,o=a.Word,l=a.WordArray,c=n.algo;function u(){return o.create.apply(o,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],f=[];(function(){for(var v=0;v<80;v++)f[v]=u()})();var h=c.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(v,p){for(var g=this._hash.words,y=g[0],E=g[1],S=g[2],I=g[3],R=g[4],D=g[5],C=g[6],_=g[7],b=y.high,x=y.low,w=E.high,A=E.low,k=S.high,L=S.low,G=I.high,P=I.low,M=R.high,H=R.low,B=D.high,Q=D.low,j=C.high,O=C.low,W=_.high,K=_.low,se=b,ve=x,ie=w,de=A,ee=k,Y=L,ge=G,q=P,z=M,J=H,he=B,re=Q,X=j,te=O,Se=W,Ee=K,be=0;be<80;be++){var ke,Be,Ie=f[be];if(be<16)Be=Ie.high=v[p+be*2]|0,ke=Ie.low=v[p+be*2+1]|0;else{var je=f[be-15],Ue=je.high,He=je.low,qe=(Ue>>>1|He<<31)^(Ue>>>8|He<<24)^Ue>>>7,ye=(He>>>1|Ue<<31)^(He>>>8|Ue<<24)^(He>>>7|Ue<<25),xe=f[be-2],_e=xe.high,Pe=xe.low,We=(_e>>>19|Pe<<13)^(_e<<3|Pe>>>29)^_e>>>6,rt=(Pe>>>19|_e<<13)^(Pe<<3|_e>>>29)^(Pe>>>6|_e<<26),mt=f[be-7],gt=mt.high,Lt=mt.low,dt=f[be-16],at=dt.high,ft=dt.low;ke=ye+Lt,Be=qe+gt+(ke>>>0<ye>>>0?1:0),ke=ke+rt,Be=Be+We+(ke>>>0<rt>>>0?1:0),ke=ke+ft,Be=Be+at+(ke>>>0<ft>>>0?1:0),Ie.high=Be,Ie.low=ke}var Ct=z&he^~z&X,Ft=J&re^~J&te,vr=se&ie^se&ee^ie&ee,$n=ve&de^ve&Y^de&Y,di=(se>>>28|ve<<4)^(se<<30|ve>>>2)^(se<<25|ve>>>7),ts=(ve>>>28|se<<4)^(ve<<30|se>>>2)^(ve<<25|se>>>7),sl=(z>>>14|J<<18)^(z>>>18|J<<14)^(z<<23|J>>>9),Fa=(J>>>14|z<<18)^(J>>>18|z<<14)^(J<<23|z>>>9),io=d[be],qr=io.high,oo=io.low,Sr=Ee+Fa,yn=Se+sl+(Sr>>>0<Ee>>>0?1:0),Sr=Sr+Ft,yn=yn+Ct+(Sr>>>0<Ft>>>0?1:0),Sr=Sr+oo,yn=yn+qr+(Sr>>>0<oo>>>0?1:0),Sr=Sr+ke,yn=yn+Be+(Sr>>>0<ke>>>0?1:0),al=ts+$n,Sc=di+vr+(al>>>0<ts>>>0?1:0);Se=X,Ee=te,X=he,te=re,he=z,re=J,J=q+Sr|0,z=ge+yn+(J>>>0<q>>>0?1:0)|0,ge=ee,q=Y,ee=ie,Y=de,ie=se,de=ve,ve=Sr+al|0,se=yn+Sc+(ve>>>0<Sr>>>0?1:0)|0}x=y.low=x+ve,y.high=b+se+(x>>>0<ve>>>0?1:0),A=E.low=A+de,E.high=w+ie+(A>>>0<de>>>0?1:0),L=S.low=L+Y,S.high=k+ee+(L>>>0<Y>>>0?1:0),P=I.low=P+q,I.high=G+ge+(P>>>0<q>>>0?1:0),H=R.low=H+J,R.high=M+z+(H>>>0<J>>>0?1:0),Q=D.low=Q+re,D.high=B+he+(Q>>>0<re>>>0?1:0),O=C.low=O+te,C.high=j+X+(O>>>0<te>>>0?1:0),K=_.low=K+Ee,_.high=W+Se+(K>>>0<Ee>>>0?1:0)},_doFinalize:function(){var v=this._data,p=v.words,g=this._nDataBytes*8,y=v.sigBytes*8;p[y>>>5]|=128<<24-y%32,p[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),p[(y+128>>>10<<5)+31]=g,v.sigBytes=p.length*4,this._process();var E=this._hash.toX32();return E},clone:function(){var v=i.clone.call(this);return v._hash=this._hash.clone(),v},blockSize:1024/32});n.SHA512=i._createHelper(h),n.HmacSHA512=i._createHmacHelper(h)}(),r.SHA512})}(wm)),wm.exports}var Cm={exports:{}},Sb;function Coe(){return Sb||(Sb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),ap(),K4())})(Nt,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,o=n.algo,l=o.SHA512,c=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=l._createHelper(c),n.HmacSHA384=l._createHmacHelper(c)}(),r.SHA384})}(Cm)),Cm.exports}var Im={exports:{}},Tb;function Ioe(){return Tb||(Tb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),ap())})(Nt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.x64,c=l.Word,u=s.algo,d=[],f=[],h=[];(function(){for(var g=1,y=0,E=0;E<24;E++){d[g+5*y]=(E+1)*(E+2)/2%64;var S=y%5,I=(2*g+3*y)%5;g=S,y=I}for(var g=0;g<5;g++)for(var y=0;y<5;y++)f[g+5*y]=y+(2*g+3*y)%5*5;for(var R=1,D=0;D<24;D++){for(var C=0,_=0,b=0;b<7;b++){if(R&1){var x=(1<<b)-1;x<32?_^=1<<x:C^=1<<x-32}R&128?R=R<<1^113:R<<=1}h[D]=c.create(C,_)}})();var v=[];(function(){for(var g=0;g<25;g++)v[g]=c.create()})();var p=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,y){for(var E=this._state,S=this.blockSize/2,I=0;I<S;I++){var R=g[y+2*I],D=g[y+2*I+1];R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var C=E[I];C.high^=D,C.low^=R}for(var _=0;_<24;_++){for(var b=0;b<5;b++){for(var x=0,w=0,A=0;A<5;A++){var C=E[b+5*A];x^=C.high,w^=C.low}var k=v[b];k.high=x,k.low=w}for(var b=0;b<5;b++)for(var L=v[(b+4)%5],G=v[(b+1)%5],P=G.high,M=G.low,x=L.high^(P<<1|M>>>31),w=L.low^(M<<1|P>>>31),A=0;A<5;A++){var C=E[b+5*A];C.high^=x,C.low^=w}for(var H=1;H<25;H++){var x,w,C=E[H],B=C.high,Q=C.low,j=d[H];j<32?(x=B<<j|Q>>>32-j,w=Q<<j|B>>>32-j):(x=Q<<j-32|B>>>64-j,w=B<<j-32|Q>>>64-j);var O=v[f[H]];O.high=x,O.low=w}var W=v[0],K=E[0];W.high=K.high,W.low=K.low;for(var b=0;b<5;b++)for(var A=0;A<5;A++){var H=b+5*A,C=E[H],se=v[H],ve=v[(b+1)%5+5*A],ie=v[(b+2)%5+5*A];C.high=se.high^~ve.high&ie.high,C.low=se.low^~ve.low&ie.low}var C=E[0],de=h[_];C.high^=de.high,C.low^=de.low}},_doFinalize:function(){var g=this._data,y=g.words;this._nDataBytes*8;var E=g.sigBytes*8,S=this.blockSize*32;y[E>>>5]|=1<<24-E%32,y[(n.ceil((E+1)/S)*S>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var I=this._state,R=this.cfg.outputLength/8,D=R/8,C=[],_=0;_<D;_++){var b=I[_],x=b.high,w=b.low;x=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C.push(w),C.push(x)}return new a.init(C,R)},clone:function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),E=0;E<25;E++)y[E]=y[E].clone();return g}});s.SHA3=o._createHelper(p),s.HmacSHA3=o._createHmacHelper(p)}(Math),r.SHA3})}(Im)),Im.exports}var km={exports:{}},Ab;function koe(){return Ab||(Ab=1,function(t,e){(function(r,n){t.exports=n(Wt())})(Nt,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=a.create([0,1518500249,1859775393,2400959708,2840853838]),v=a.create([1352829926,1548603684,1836072691,2053994217,0]),p=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,C){for(var _=0;_<16;_++){var b=C+_,x=D[b];D[b]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var w=this._hash.words,A=h.words,k=v.words,L=c.words,G=u.words,P=d.words,M=f.words,H,B,Q,j,O,W,K,se,ve,ie;W=H=w[0],K=B=w[1],se=Q=w[2],ve=j=w[3],ie=O=w[4];for(var de,_=0;_<80;_+=1)de=H+D[C+L[_]]|0,_<16?de+=g(B,Q,j)+A[0]:_<32?de+=y(B,Q,j)+A[1]:_<48?de+=E(B,Q,j)+A[2]:_<64?de+=S(B,Q,j)+A[3]:de+=I(B,Q,j)+A[4],de=de|0,de=R(de,P[_]),de=de+O|0,H=O,O=j,j=R(Q,10),Q=B,B=de,de=W+D[C+G[_]]|0,_<16?de+=I(K,se,ve)+k[0]:_<32?de+=S(K,se,ve)+k[1]:_<48?de+=E(K,se,ve)+k[2]:_<64?de+=y(K,se,ve)+k[3]:de+=g(K,se,ve)+k[4],de=de|0,de=R(de,M[_]),de=de+ie|0,W=ie,ie=ve,ve=R(se,10),se=K,K=de;de=w[1]+Q+ve|0,w[1]=w[2]+j+ie|0,w[2]=w[3]+O+W|0,w[3]=w[4]+H+K|0,w[4]=w[0]+B+se|0,w[0]=de},_doFinalize:function(){var D=this._data,C=D.words,_=this._nDataBytes*8,b=D.sigBytes*8;C[b>>>5]|=128<<24-b%32,C[(b+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,D.sigBytes=(C.length+1)*4,this._process();for(var x=this._hash,w=x.words,A=0;A<5;A++){var k=w[A];w[A]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return x},clone:function(){var D=o.clone.call(this);return D._hash=this._hash.clone(),D}});function g(D,C,_){return D^C^_}function y(D,C,_){return D&C|~D&_}function E(D,C,_){return(D|~C)^_}function S(D,C,_){return D&_|C&~_}function I(D,C,_){return D^(C|~_)}function R(D,C){return D<<C|D>>>32-C}s.RIPEMD160=o._createHelper(p),s.HmacRIPEMD160=o._createHmacHelper(p)}(),r.RIPEMD160})}(km)),km.exports}var Dm={exports:{}},wb;function Ox(){return wb||(wb=1,function(t,e){(function(r,n){t.exports=n(Wt())})(Nt,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,o=a.Utf8,l=n.algo;l.HMAC=i.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,f=d*4;u.sigBytes>f&&(u=c.finalize(u)),u.clamp();for(var h=this._oKey=u.clone(),v=this._iKey=u.clone(),p=h.words,g=v.words,y=0;y<d;y++)p[y]^=1549556828,g[y]^=909522486;h.sigBytes=v.sigBytes=f,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,d=u.finalize(c);u.reset();var f=u.finalize(this._oKey.clone().concat(d));return f}})})()})}(Dm)),Dm.exports}var Rm={exports:{}},Cb;function Doe(){return Cb||(Cb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),Px(),Ox())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.SHA256,c=o.HMAC,u=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var h=this.cfg,v=c.create(h.hasher,d),p=a.create(),g=a.create([1]),y=p.words,E=g.words,S=h.keySize,I=h.iterations;y.length<S;){var R=v.update(f).finalize(g);v.reset();for(var D=R.words,C=D.length,_=R,b=1;b<I;b++){_=v.finalize(_),v.reset();for(var x=_.words,w=0;w<C;w++)D[w]^=x[w]}p.concat(R),E[0]++}return p.sigBytes=S*4,p}});n.PBKDF2=function(d,f,h){return u.create(h).compute(d,f)}}(),r.PBKDF2})}(Rm)),Rm.exports}var Fm={exports:{}},Ib;function ao(){return Ib||(Ib=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),z4(),Ox())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.MD5,c=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var f,h=this.cfg,v=h.hasher.create(),p=a.create(),g=p.words,y=h.keySize,E=h.iterations;g.length<y;){f&&v.update(f),f=v.update(u).finalize(d),v.reset();for(var S=1;S<E;S++)f=v.finalize(f),v.reset();p.concat(f)}return p.sigBytes=y*4,p}});n.EvpKDF=function(u,d,f){return c.create(f).compute(u,d)}}(),r.EvpKDF})}(Fm)),Fm.exports}var Pm={exports:{}},kb;function on(){return kb||(kb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),ao())})(Nt,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=i.BufferedBlockAlgorithm,c=s.enc;c.Utf8;var u=c.Base64,d=s.algo,f=d.EvpKDF,h=i.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(x,w){return this.create(this._ENC_XFORM_MODE,x,w)},createDecryptor:function(x,w){return this.create(this._DEC_XFORM_MODE,x,w)},init:function(x,w,A){this.cfg=this.cfg.extend(A),this._xformMode=x,this._key=w,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(x){return this._append(x),this._process()},finalize:function(x){x&&this._append(x);var w=this._doFinalize();return w},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function x(w){return typeof w=="string"?b:D}return function(w){return{encrypt:function(A,k,L){return x(k).encrypt(w,A,k,L)},decrypt:function(A,k,L){return x(k).decrypt(w,A,k,L)}}}}()});i.StreamCipher=h.extend({_doFinalize:function(){var x=this._process(!0);return x},blockSize:1});var v=s.mode={},p=i.BlockCipherMode=a.extend({createEncryptor:function(x,w){return this.Encryptor.create(x,w)},createDecryptor:function(x,w){return this.Decryptor.create(x,w)},init:function(x,w){this._cipher=x,this._iv=w}}),g=v.CBC=function(){var x=p.extend();x.Encryptor=x.extend({processBlock:function(A,k){var L=this._cipher,G=L.blockSize;w.call(this,A,k,G),L.encryptBlock(A,k),this._prevBlock=A.slice(k,k+G)}}),x.Decryptor=x.extend({processBlock:function(A,k){var L=this._cipher,G=L.blockSize,P=A.slice(k,k+G);L.decryptBlock(A,k),w.call(this,A,k,G),this._prevBlock=P}});function w(A,k,L){var G,P=this._iv;P?(G=P,this._iv=n):G=this._prevBlock;for(var M=0;M<L;M++)A[k+M]^=G[M]}return x}(),y=s.pad={},E=y.Pkcs7={pad:function(x,w){for(var A=w*4,k=A-x.sigBytes%A,L=k<<24|k<<16|k<<8|k,G=[],P=0;P<k;P+=4)G.push(L);var M=o.create(G,k);x.concat(M)},unpad:function(x){var w=x.words[x.sigBytes-1>>>2]&255;x.sigBytes-=w}};i.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:E}),reset:function(){var x;h.reset.call(this);var w=this.cfg,A=w.iv,k=w.mode;this._xformMode==this._ENC_XFORM_MODE?x=k.createEncryptor:(x=k.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==x?this._mode.init(this,A&&A.words):(this._mode=x.call(k,this,A&&A.words),this._mode.__creator=x)},_doProcessBlock:function(x,w){this._mode.processBlock(x,w)},_doFinalize:function(){var x,w=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(w.pad(this._data,this.blockSize),x=this._process(!0)):(x=this._process(!0),w.unpad(x)),x},blockSize:128/32});var S=i.CipherParams=a.extend({init:function(x){this.mixIn(x)},toString:function(x){return(x||this.formatter).stringify(this)}}),I=s.format={},R=I.OpenSSL={stringify:function(x){var w,A=x.ciphertext,k=x.salt;return k?w=o.create([1398893684,1701076831]).concat(k).concat(A):w=A,w.toString(u)},parse:function(x){var w,A=u.parse(x),k=A.words;return k[0]==1398893684&&k[1]==1701076831&&(w=o.create(k.slice(2,4)),k.splice(0,4),A.sigBytes-=16),S.create({ciphertext:A,salt:w})}},D=i.SerializableCipher=a.extend({cfg:a.extend({format:R}),encrypt:function(x,w,A,k){k=this.cfg.extend(k);var L=x.createEncryptor(A,k),G=L.finalize(w),P=L.cfg;return S.create({ciphertext:G,key:A,iv:P.iv,algorithm:x,mode:P.mode,padding:P.padding,blockSize:x.blockSize,formatter:k.format})},decrypt:function(x,w,A,k){k=this.cfg.extend(k),w=this._parse(w,k.format);var L=x.createDecryptor(A,k).finalize(w.ciphertext);return L},_parse:function(x,w){return typeof x=="string"?w.parse(x,this):x}}),C=s.kdf={},_=C.OpenSSL={execute:function(x,w,A,k,L){if(k||(k=o.random(64/8)),L)var G=f.create({keySize:w+A,hasher:L}).compute(x,k);else var G=f.create({keySize:w+A}).compute(x,k);var P=o.create(G.words.slice(w),A*4);return G.sigBytes=w*4,S.create({key:G,iv:P,salt:k})}},b=i.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:_}),encrypt:function(x,w,A,k){k=this.cfg.extend(k);var L=k.kdf.execute(A,x.keySize,x.ivSize,k.salt,k.hasher);k.iv=L.iv;var G=D.encrypt.call(this,x,w,L.key,k);return G.mixIn(L),G},decrypt:function(x,w,A,k){k=this.cfg.extend(k),w=this._parse(w,k.format);var L=k.kdf.execute(A,x.keySize,x.ivSize,w.salt,k.hasher);k.iv=L.iv;var G=D.decrypt.call(this,x,w,L.key,k);return G}})}()})}(Pm)),Pm.exports}var Om={exports:{}},Db;function Roe(){return Db||(Db=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize;s.call(this,i,a,l,o),this._prevBlock=i.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=i.slice(a,a+l);s.call(this,i,a,l,o),this._prevBlock=c}});function s(i,a,o,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var d=0;d<o;d++)i[a+d]^=c[d]}return n}(),r.mode.CFB})}(Om)),Om.exports}var Nm={exports:{}},Rb;function Foe(){return Rb||(Rb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var d=u.slice(0);o.encryptBlock(d,0),u[l-1]=u[l-1]+1|0;for(var f=0;f<l;f++)i[a+f]^=d[f]}});return n.Decryptor=s,n}(),r.mode.CTR})}(Nm)),Nm.exports}var Lm={exports:{}},Fb;function Poe(){return Fb||(Fb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(o){if((o>>24&255)===255){var l=o>>16&255,c=o>>8&255,u=o&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,o=0,o+=l<<16,o+=c<<8,o+=u}else o+=1<<24;return o}function i(o){return(o[0]=s(o[0]))===0&&(o[1]=s(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),i(f);var h=f.slice(0);c.encryptBlock(h,0);for(var v=0;v<u;v++)o[l+v]^=h[v]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(Lm)),Lm.exports}var Mm={exports:{}},Pb;function Ooe(){return Pb||(Pb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(u,0);for(var d=0;d<l;d++)i[a+d]^=u[d]}});return n.Decryptor=s,n}(),r.mode.OFB})}(Mm)),Mm.exports}var Bm={exports:{}},Ob;function Noe(){return Ob||(Ob=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(Bm)),Bm.exports}var Um={exports:{}},Nb;function Loe(){return Nb||(Nb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,o=a-i%a,l=i+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(Um)),Um.exports}var Vm={exports:{}},Lb;function Moe(){return Lb||(Lb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(Vm)),Vm.exports}var $m={exports:{}},Mb;function Boe(){return Mb||(Mb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}($m)),$m.exports}var Hm={exports:{}},Bb;function Uoe(){return Bb||(Bb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(Hm)),Hm.exports}var jm={exports:{}},Ub;function Voe(){return Ub||(Ub=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(jm)),jm.exports}var Gm={exports:{}},Vb;function $oe(){return Vb||(Vb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),on())})(Nt,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,o=s.enc,l=o.Hex,c=s.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var d=l.parse(u);return a.create({ciphertext:d})}}}(),r.format.Hex})}(Gm)),Gm.exports}var Wm={exports:{}},$b;function Hoe(){return $b||($b=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),rl(),nl(),ao(),on())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,o=[],l=[],c=[],u=[],d=[],f=[],h=[],v=[],p=[],g=[];(function(){for(var S=[],I=0;I<256;I++)I<128?S[I]=I<<1:S[I]=I<<1^283;for(var R=0,D=0,I=0;I<256;I++){var C=D^D<<1^D<<2^D<<3^D<<4;C=C>>>8^C&255^99,o[R]=C,l[C]=R;var _=S[R],b=S[_],x=S[b],w=S[C]*257^C*16843008;c[R]=w<<24|w>>>8,u[R]=w<<16|w>>>16,d[R]=w<<8|w>>>24,f[R]=w;var w=x*16843009^b*65537^_*257^R*16843008;h[C]=w<<24|w>>>8,v[C]=w<<16|w>>>16,p[C]=w<<8|w>>>24,g[C]=w,R?(R=_^S[S[S[x^_]]],D^=S[S[D]]):R=D=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],E=a.AES=i.extend({_doReset:function(){var S;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,R=I.words,D=I.sigBytes/4,C=this._nRounds=D+6,_=(C+1)*4,b=this._keySchedule=[],x=0;x<_;x++)x<D?b[x]=R[x]:(S=b[x-1],x%D?D>6&&x%D==4&&(S=o[S>>>24]<<24|o[S>>>16&255]<<16|o[S>>>8&255]<<8|o[S&255]):(S=S<<8|S>>>24,S=o[S>>>24]<<24|o[S>>>16&255]<<16|o[S>>>8&255]<<8|o[S&255],S^=y[x/D|0]<<24),b[x]=b[x-D]^S);for(var w=this._invKeySchedule=[],A=0;A<_;A++){var x=_-A;if(A%4)var S=b[x];else var S=b[x-4];A<4||x<=4?w[A]=S:w[A]=h[o[S>>>24]]^v[o[S>>>16&255]]^p[o[S>>>8&255]]^g[o[S&255]]}}},encryptBlock:function(S,I){this._doCryptBlock(S,I,this._keySchedule,c,u,d,f,o)},decryptBlock:function(S,I){var R=S[I+1];S[I+1]=S[I+3],S[I+3]=R,this._doCryptBlock(S,I,this._invKeySchedule,h,v,p,g,l);var R=S[I+1];S[I+1]=S[I+3],S[I+3]=R},_doCryptBlock:function(S,I,R,D,C,_,b,x){for(var w=this._nRounds,A=S[I]^R[0],k=S[I+1]^R[1],L=S[I+2]^R[2],G=S[I+3]^R[3],P=4,M=1;M<w;M++){var H=D[A>>>24]^C[k>>>16&255]^_[L>>>8&255]^b[G&255]^R[P++],B=D[k>>>24]^C[L>>>16&255]^_[G>>>8&255]^b[A&255]^R[P++],Q=D[L>>>24]^C[G>>>16&255]^_[A>>>8&255]^b[k&255]^R[P++],j=D[G>>>24]^C[A>>>16&255]^_[k>>>8&255]^b[L&255]^R[P++];A=H,k=B,L=Q,G=j}var H=(x[A>>>24]<<24|x[k>>>16&255]<<16|x[L>>>8&255]<<8|x[G&255])^R[P++],B=(x[k>>>24]<<24|x[L>>>16&255]<<16|x[G>>>8&255]<<8|x[A&255])^R[P++],Q=(x[L>>>24]<<24|x[G>>>16&255]<<16|x[A>>>8&255]<<8|x[k&255])^R[P++],j=(x[G>>>24]<<24|x[A>>>16&255]<<16|x[k>>>8&255]<<8|x[L&255])^R[P++];S[I]=H,S[I+1]=B,S[I+2]=Q,S[I+3]=j},keySize:256/32});n.AES=i._createHelper(E)}(),r.AES})}(Wm)),Wm.exports}var zm={exports:{}},Hb;function joe(){return Hb||(Hb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),rl(),nl(),ao(),on())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=a.extend({_doReset:function(){for(var y=this._key,E=y.words,S=[],I=0;I<56;I++){var R=l[I]-1;S[I]=E[R>>>5]>>>31-R%32&1}for(var D=this._subKeys=[],C=0;C<16;C++){for(var _=D[C]=[],b=u[C],I=0;I<24;I++)_[I/6|0]|=S[(c[I]-1+b)%28]<<31-I%6,_[4+(I/6|0)]|=S[28+(c[I+24]-1+b)%28]<<31-I%6;_[0]=_[0]<<1|_[0]>>>31;for(var I=1;I<7;I++)_[I]=_[I]>>>(I-1)*4+3;_[7]=_[7]<<5|_[7]>>>27}for(var x=this._invSubKeys=[],I=0;I<16;I++)x[I]=D[15-I]},encryptBlock:function(y,E){this._doCryptBlock(y,E,this._subKeys)},decryptBlock:function(y,E){this._doCryptBlock(y,E,this._invSubKeys)},_doCryptBlock:function(y,E,S){this._lBlock=y[E],this._rBlock=y[E+1],v.call(this,4,252645135),v.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),v.call(this,1,1431655765);for(var I=0;I<16;I++){for(var R=S[I],D=this._lBlock,C=this._rBlock,_=0,b=0;b<8;b++)_|=d[b][((C^R[b])&f[b])>>>0];this._lBlock=C,this._rBlock=D^_}var x=this._lBlock;this._lBlock=this._rBlock,this._rBlock=x,v.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),v.call(this,16,65535),v.call(this,4,252645135),y[E]=this._lBlock,y[E+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function v(y,E){var S=(this._lBlock>>>y^this._rBlock)&E;this._rBlock^=S,this._lBlock^=S<<y}function p(y,E){var S=(this._rBlock>>>y^this._lBlock)&E;this._lBlock^=S,this._rBlock^=S<<y}n.DES=a._createHelper(h);var g=o.TripleDES=a.extend({_doReset:function(){var y=this._key,E=y.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var S=E.slice(0,2),I=E.length<4?E.slice(0,2):E.slice(2,4),R=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=h.createEncryptor(i.create(S)),this._des2=h.createEncryptor(i.create(I)),this._des3=h.createEncryptor(i.create(R))},encryptBlock:function(y,E){this._des1.encryptBlock(y,E),this._des2.decryptBlock(y,E),this._des3.encryptBlock(y,E)},decryptBlock:function(y,E){this._des3.decryptBlock(y,E),this._des2.encryptBlock(y,E),this._des1.decryptBlock(y,E)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(g)}(),r.TripleDES})}(zm)),zm.exports}var Km={exports:{}},jb;function Goe(){return jb||(jb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),rl(),nl(),ao(),on())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=a.RC4=i.extend({_doReset:function(){for(var u=this._key,d=u.words,f=u.sigBytes,h=this._S=[],v=0;v<256;v++)h[v]=v;for(var v=0,p=0;v<256;v++){var g=v%f,y=d[g>>>2]>>>24-g%4*8&255;p=(p+h[v]+y)%256;var E=h[v];h[v]=h[p],h[p]=E}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,d=this._i,f=this._j,h=0,v=0;v<4;v++){d=(d+1)%256,f=(f+u[d])%256;var p=u[d];u[d]=u[f],u[f]=p,h|=u[(u[d]+u[f])%256]<<24-v*8}return this._i=d,this._j=f,h}n.RC4=i._createHelper(o);var c=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});n.RC4Drop=i._createHelper(c)}(),r.RC4})}(Km)),Km.exports}var qm={exports:{}},Gb;function Woe(){return Gb||(Gb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),rl(),nl(),ao(),on())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.Rabbit=i.extend({_doReset:function(){for(var f=this._key.words,h=this.cfg.iv,v=0;v<4;v++)f[v]=(f[v]<<8|f[v]>>>24)&16711935|(f[v]<<24|f[v]>>>8)&4278255360;var p=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var v=0;v<4;v++)d.call(this);for(var v=0;v<8;v++)g[v]^=p[v+4&7];if(h){var y=h.words,E=y[0],S=y[1],I=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,D=I>>>16|R&4294901760,C=R<<16|I&65535;g[0]^=I,g[1]^=D,g[2]^=R,g[3]^=C,g[4]^=I,g[5]^=D,g[6]^=R,g[7]^=C;for(var v=0;v<4;v++)d.call(this)}},_doProcessBlock:function(f,h){var v=this._X;d.call(this),o[0]=v[0]^v[5]>>>16^v[3]<<16,o[1]=v[2]^v[7]>>>16^v[5]<<16,o[2]=v[4]^v[1]>>>16^v[7]<<16,o[3]=v[6]^v[3]>>>16^v[1]<<16;for(var p=0;p<4;p++)o[p]=(o[p]<<8|o[p]>>>24)&16711935|(o[p]<<24|o[p]>>>8)&4278255360,f[h+p]^=o[p]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,v=0;v<8;v++)l[v]=h[v];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var v=0;v<8;v++){var p=f[v]+h[v],g=p&65535,y=p>>>16,E=((g*g>>>17)+g*y>>>15)+y*y,S=((p&4294901760)*p|0)+((p&65535)*p|0);c[v]=E^S}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=i._createHelper(u)}(),r.Rabbit})}(qm)),qm.exports}var Xm={exports:{}},Wb;function zoe(){return Wb||(Wb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),rl(),nl(),ao(),on())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.RabbitLegacy=i.extend({_doReset:function(){var f=this._key.words,h=this.cfg.iv,v=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],p=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)d.call(this);for(var g=0;g<8;g++)p[g]^=v[g+4&7];if(h){var y=h.words,E=y[0],S=y[1],I=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,D=I>>>16|R&4294901760,C=R<<16|I&65535;p[0]^=I,p[1]^=D,p[2]^=R,p[3]^=C,p[4]^=I,p[5]^=D,p[6]^=R,p[7]^=C;for(var g=0;g<4;g++)d.call(this)}},_doProcessBlock:function(f,h){var v=this._X;d.call(this),o[0]=v[0]^v[5]>>>16^v[3]<<16,o[1]=v[2]^v[7]>>>16^v[5]<<16,o[2]=v[4]^v[1]>>>16^v[7]<<16,o[3]=v[6]^v[3]>>>16^v[1]<<16;for(var p=0;p<4;p++)o[p]=(o[p]<<8|o[p]>>>24)&16711935|(o[p]<<24|o[p]>>>8)&4278255360,f[h+p]^=o[p]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,v=0;v<8;v++)l[v]=h[v];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var v=0;v<8;v++){var p=f[v]+h[v],g=p&65535,y=p>>>16,E=((g*g>>>17)+g*y>>>15)+y*y,S=((p&4294901760)*p|0)+((p&65535)*p|0);c[v]=E^S}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=i._createHelper(u)}(),r.RabbitLegacy})}(Xm)),Xm.exports}var Ym={exports:{}},zb;function Koe(){return zb||(zb=1,function(t,e){(function(r,n,s){t.exports=n(Wt(),rl(),nl(),ao(),on())})(Nt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(g,y){let E=y>>24&255,S=y>>16&255,I=y>>8&255,R=y&255,D=g.sbox[0][E]+g.sbox[1][S];return D=D^g.sbox[2][I],D=D+g.sbox[3][R],D}function f(g,y,E){let S=y,I=E,R;for(let D=0;D<o;++D)S=S^g.pbox[D],I=d(g,S)^I,R=S,S=I,I=R;return R=S,S=I,I=R,I=I^g.pbox[o],S=S^g.pbox[o+1],{left:S,right:I}}function h(g,y,E){let S=y,I=E,R;for(let D=o+1;D>1;--D)S=S^g.pbox[D],I=d(g,S)^I,R=S,S=I,I=R;return R=S,S=I,I=R,I=I^g.pbox[1],S=S^g.pbox[0],{left:S,right:I}}function v(g,y,E){for(let C=0;C<4;C++){g.sbox[C]=[];for(let _=0;_<256;_++)g.sbox[C][_]=c[C][_]}let S=0;for(let C=0;C<o+2;C++)g.pbox[C]=l[C]^y[S],S++,S>=E&&(S=0);let I=0,R=0,D=0;for(let C=0;C<o+2;C+=2)D=f(g,I,R),I=D.left,R=D.right,g.pbox[C]=I,g.pbox[C+1]=R;for(let C=0;C<4;C++)for(let _=0;_<256;_+=2)D=f(g,I,R),I=D.left,R=D.right,g.sbox[C][_]=I,g.sbox[C][_+1]=R;return!0}var p=a.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,E=g.sigBytes/4;v(u,y,E)}},encryptBlock:function(g,y){var E=f(u,g[y],g[y+1]);g[y]=E.left,g[y+1]=E.right},decryptBlock:function(g,y){var E=h(u,g[y],g[y+1]);g[y]=E.left,g[y+1]=E.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(p)}(),r.Blowfish})}(Ym)),Ym.exports}(function(t,e){(function(r,n,s){t.exports=n(Wt(),ap(),Soe(),Toe(),rl(),Aoe(),nl(),z4(),Px(),woe(),K4(),Coe(),Ioe(),koe(),Ox(),Doe(),ao(),on(),Roe(),Foe(),Poe(),Ooe(),Noe(),Loe(),Moe(),Boe(),Uoe(),Voe(),$oe(),Hoe(),joe(),Goe(),Woe(),zoe(),Koe())})(Nt,function(r){return r})})(W4);var qoe=W4.exports;const Wc=zC(qoe);var Qm={};class Xoe{constructor(){this.encryptionKey=Qm.VUE_APP_PDF_ENCRYPTION_KEY||"default-dev-key-replace-in-production",this.encryptionEnabled=Qm.VUE_APP_ENABLE_ENCRYPTION!=="false",console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled")}setEncryptionEnabled(e){this.encryptionEnabled=e,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled"),e||console.warn(" Warning: Encryption disabled in production environment")}encryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.encryptField(i);this.setNestedValue(n,s,a)}}),n}decryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.decryptField(i);this.setNestedValue(n,s,a)}}),n}encryptField(e){if(!this.encryptionEnabled)return e;try{const r=typeof e=="object"?JSON.stringify(e):String(e);return Wc.AES.encrypt(r,this.encryptionKey).toString()}catch(r){return console.error("Encryption failed:",r),e}}decryptField(e){if(!this.encryptionEnabled)return e;try{const n=Wc.AES.decrypt(e,this.encryptionKey).toString(Wc.enc.Utf8);try{return JSON.parse(n)}catch{return n}}catch(r){return console.error("Decryption failed:",r),e}}getNestedValue(e,r){return r.split(".").reduce((n,s)=>n&&n[s],e)}setNestedValue(e,r,n){const s=r.split("."),i=s.pop(),a=s.reduce((o,l)=>o[l]=o[l]||{},e);return a[i]=n,e}async logAccess(e,r,n){var s,i;try{const a=vt(Gt(ht,"iepAccessLogs"));await xr(a,{studentId:e,userId:(s=Ws.currentUser)==null?void 0:s.uid,userEmail:(i=Ws.currentUser)==null?void 0:i.email,action:r,fields:n,timestamp:Mo(),userAgent:navigator.userAgent,encryptionEnabled:this.encryptionEnabled})}catch(a){console.error("Failed to log access:",a)}}async verifyAccess(e,r="read"){var n,s,i,a,o,l;if(!Ws.currentUser)return!1;try{const u=(await Vr(vt(ht,"users",Ws.currentUser.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager"){const f=((i=(s=(n=(await Vr(vt(ht,"students",e))).data())==null?void 0:n.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===Ws.currentUser.uid;return await this.logAccess(e,`access_attempt_${r}`,{success:f,role:"case_manager"}),f}if(u.role==="teacher"&&r==="read"){const f=((l=(o=(a=(await Vr(vt(ht,"students",e))).data())==null?void 0:a.app)==null?void 0:o.schedule)==null?void 0:l.periods)||{},h=Object.values(f).includes(Ws.currentUser.uid);return await this.logAccess(e,`access_attempt_${r}`,{success:h,role:"teacher"}),h}return!1}catch(c){return console.error("Access verification failed:",c),!1}}async getAccessHistory(e){try{const r=zr(Gt(ht,"iepAccessLogs"),gs("studentId","==",e),gs("timestamp",">=",new Date(Date.now()-2592e6)));return(await dr(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Failed to fetch access history:",r),[]}}maskSensitiveData(e){var n,s,i;const r=JSON.parse(JSON.stringify(e));return(n=r.app)!=null&&n.accommodations&&(r.app.accommodations={assessment:"[RESTRICTED]",instruction:"[RESTRICTED]"}),(i=(s=r.app)==null?void 0:s.schedule)!=null&&i.classServices&&(r.app.schedule.classServices=["[RESTRICTED]"]),r}isEncryptionEnabled(){return this.encryptionEnabled}isValueEncrypted(e){try{return typeof e!="string"?!1:(Wc.AES.decrypt(e,this.encryptionKey).toString(Wc.enc.Utf8),!0)}catch{return!1}}getEncryptionStatus(){return{enabled:this.encryptionEnabled,environment:"production",keyAvailable:!!this.encryptionKey,environmentVariable:Qm.VUE_APP_ENABLE_ENCRYPTION}}}const Bf=new Xoe,Yoe={class:"debug-encryption"},Qoe={class:"debug-header"},Joe={class:"encryption-status"},Zoe={class:"status-row"},ele={class:"encryption-toggle"},tle=["checked"],rle={key:0,class:"warning"},nle={class:"status-details"},sle={class:"status-row"},ale={class:"status-value"},ile={class:"status-row"},ole={class:"status-value"},lle={class:"status-row"},cle={class:"status-value"},ule={key:0,class:"debug-info"},dle={class:"field-name"},fle={class:"field-value"},hle={class:"value-preview"},ple={__name:"DebugEncryption",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=t,r=Ae(()=>Bf.getEncryptionStatus()),n=Ae(()=>Bf.isEncryptionEnabled()),s=Ae(()=>r.value.environment),i=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],a=()=>{Bf.setEncryptionEnabled(!n.value)},o=(u,d)=>d.split(".").reduce((f,h)=>f&&f[h],u),l=u=>{if(!e.selectedStudent)return!1;const d=o(e.selectedStudent,u);return d?Bf.isValueEncrypted(d):!1},c=u=>{if(!e.selectedStudent)return"No data";const d=o(e.selectedStudent,u);if(!d)return"Empty";if(l(u))return d.substring(0,20)+"...";const f=typeof d=="object"?JSON.stringify(d):String(d);return f.length>40?f.substring(0,40)+"...":f};return(u,d)=>(N(),U("div",Yoe,[m("div",Qoe,[d[0]||(d[0]=m("h3",null," IEP Encryption Control",-1)),m("div",{class:ot(["environment-badge",s.value])},le(s.value.toUpperCase()),3)]),m("div",Joe,[m("div",Zoe,[d[1]||(d[1]=m("div",{class:"status-label"},"Status:",-1)),m("div",{class:ot(["status-value",{enabled:n.value}])},le(n.value?" Enabled":" Disabled"),3)]),m("div",ele,[m("label",null,[m("input",{type:"checkbox",checked:n.value,onChange:a},null,40,tle),d[2]||(d[2]=Me(" Toggle Encryption "))]),s.value==="production"&&!n.value?(N(),U("div",rle,"  Warning: Encryption disabled in production ")):Fe("",!0)]),m("div",nle,[m("div",sle,[d[3]||(d[3]=m("div",{class:"status-label"},"Environment:",-1)),m("div",ale,le(s.value),1)]),m("div",ile,[d[4]||(d[4]=m("div",{class:"status-label"},"Encryption Key:",-1)),m("div",ole,le(r.value.keyAvailable?" Available":" Missing"),1)]),m("div",lle,[d[5]||(d[5]=m("div",{class:"status-label"},"ENV Variable:",-1)),m("div",cle,le(r.value.environmentVariable||"Not set"),1)])])]),t.selectedStudent?(N(),U("div",ule,[d[6]||(d[6]=m("h4",null,"Selected Student Data:",-1)),(N(),U(Oe,null,Ge(i,f=>m("div",{class:"field-status",key:f},[m("div",dle,le(f)+":",1),m("div",fle,[m("div",{class:ot(["encryption-status",{encrypted:l(f)}])},le(l(f)?" Encrypted":" Plain Text"),3),m("div",hle,le(c(f)),1)])])),64))])):Fe("",!0)]))}},q4=bt(ple,[["__scopeId","data-v-94726d44"]]),mle={class:"security-control-center"},vle={class:"security-section"},gle={class:"security-section"},xle={class:"log-filters"},yle={key:0,class:"log-table"},Ele={key:1,class:"no-logs"},_le={class:"security-section"},ble={class:"setting-group"},Sle={class:"setting-group"},Tle={class:"setting-group"},Ale={class:"security-section"},wle={class:"setting-group"},Cle={class:"setting-group"},Ile={class:"setting-group"},kle={class:"security-section"},Dle={class:"ip-list"},Rle={class:"ip-input"},Fle={key:0,class:"ip-table"},Ple=["onClick"],Ole={key:1,class:"no-ips"},Nle={class:"security-section"},Lle={class:"alert-settings"},Mle={class:"setting-group"},Ble={class:"setting-group"},Ule={class:"setting-group"},Vle={class:"alert-emails"},$le={class:"email-input"},Hle={key:0,class:"email-list"},jle=["onClick"],Gle={__name:"SecurityControlCenter",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=pe([]),r=pe(1),n=pe(30),s=pe(!1),i=pe(!1),a=pe(!0),o=pe(!0),l=pe(5),c=pe([]),u=pe(""),d=pe({failedLogins:!0,unusualAccess:!0,bulkExport:!0}),f=pe([]),h=pe(""),v=async()=>{try{const w=new Date;w.setDate(w.getDate()-r.value);const A=zr(Gt(ht,"iepAccessLogs"),gs("timestamp",">=",w),Ks("timestamp","desc"),Ri(100)),k=await dr(A);e.value=k.docs.map(L=>({id:L.id,...L.data()}))}catch(w){console.error("Failed to fetch logs:",w)}},p=w=>{if(!w)return"";const A=w.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(A)},g=()=>{console.log("Session timeout updated:",n.value)},y=()=>{console.log("Password policy updated:",s.value)},E=()=>{console.log("MFA policy updated:",i.value)},S=()=>{console.log("Export policy updated:",a.value)},I=()=>{console.log("PDF policy updated:",o.value)},R=()=>{console.log("Login policy updated:",l.value)},D=()=>{u.value&&!c.value.includes(u.value)&&(c.value.push(u.value),u.value="")},C=w=>{c.value=c.value.filter(A=>A!==w)},_=()=>{console.log("Alert settings updated:",d.value)},b=()=>{h.value&&!f.value.includes(h.value)&&(f.value.push(h.value),h.value="")},x=w=>{f.value=f.value.filter(A=>A!==w)};return Jt(()=>{v()}),(w,A)=>(N(),U("div",mle,[m("div",vle,[A[12]||(A[12]=m("h3",null," IEP Data Encryption",-1)),nt(q4,{"selected-student":t.selectedStudent},null,8,["selected-student"])]),m("div",gle,[A[15]||(A[15]=m("h3",null," Access Logs",-1)),m("div",xle,[Ve(m("select",{"onUpdate:modelValue":A[0]||(A[0]=k=>r.value=k),class:"form-select"},A[13]||(A[13]=[m("option",{value:"1"},"Last 24 hours",-1),m("option",{value:"7"},"Last 7 days",-1),m("option",{value:"30"},"Last 30 days",-1)]),512),[[hr,r.value]]),m("button",{onClick:v,class:"btn btn-secondary"}," Refresh ")]),e.value.length?(N(),U("div",yle,[m("table",null,[A[14]||(A[14]=m("thead",null,[m("tr",null,[m("th",null,"Time"),m("th",null,"User"),m("th",null,"Action"),m("th",null,"Student"),m("th",null,"Status")])],-1)),m("tbody",null,[(N(!0),U(Oe,null,Ge(e.value,k=>(N(),U("tr",{key:k.id},[m("td",null,le(p(k.timestamp)),1),m("td",null,le(k.userEmail),1),m("td",null,le(k.action),1),m("td",null,le(k.studentId),1),m("td",{class:ot(k.success?"success":"error")},le(k.success?"":""),3)]))),128))])])])):(N(),U("div",Ele," No access logs found for selected period "))]),m("div",_le,[A[20]||(A[20]=m("h3",null," Session Security",-1)),m("div",ble,[m("label",null,[A[16]||(A[16]=Me(" Auto Logout Timer (minutes): ")),Ve(m("input",{type:"number","onUpdate:modelValue":A[1]||(A[1]=k=>n.value=k),min:"5",max:"120",onChange:g},null,544),[[At,n.value]])]),A[17]||(A[17]=m("div",{class:"setting-description"}," Users will be automatically logged out after this period of inactivity ",-1))]),m("div",Sle,[m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":A[2]||(A[2]=k=>s.value=k),onChange:y},null,544),[[Et,s.value]]),A[18]||(A[18]=Me(" Enforce Password Change Every 90 Days "))])]),m("div",Tle,[m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":A[3]||(A[3]=k=>i.value=k),onChange:E},null,544),[[Et,i.value]]),A[19]||(A[19]=Me(" Require Two-Factor Authentication for Admin Access "))])])]),m("div",Ale,[A[24]||(A[24]=m("h3",null," Data Access Controls",-1)),m("div",wle,[m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":A[4]||(A[4]=k=>a.value=k),onChange:S},null,544),[[Et,a.value]]),A[21]||(A[21]=Me(" Restrict Data Export to Admins Only "))])]),m("div",Cle,[m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":A[5]||(A[5]=k=>o.value=k),onChange:I},null,544),[[Et,o.value]]),A[22]||(A[22]=Me(" Add Watermark to Exported PDFs "))])]),m("div",Ile,[m("label",null,[A[23]||(A[23]=Me(" Maximum Failed Login Attempts: ")),Ve(m("input",{type:"number","onUpdate:modelValue":A[6]||(A[6]=k=>l.value=k),min:"3",max:"10",onChange:R},null,544),[[At,l.value]])])])]),m("div",kle,[A[25]||(A[25]=m("h3",null," IP Access Control",-1)),m("div",Dle,[m("div",Rle,[Ve(m("input",{type:"text","onUpdate:modelValue":A[7]||(A[7]=k=>u.value=k),placeholder:"Enter IP address or range"},null,512),[[At,u.value]]),m("button",{onClick:D,class:"btn btn-primary"}," Add IP ")]),c.value.length?(N(),U("div",Fle,[(N(!0),U(Oe,null,Ge(c.value,k=>(N(),U("div",{key:k,class:"ip-row"},[m("span",null,le(k),1),m("button",{onClick:L=>C(k),class:"btn btn-danger btn-sm"}," Remove ",8,Ple)]))),128))])):(N(),U("div",Ole," No IP restrictions configured "))])]),m("div",Nle,[A[30]||(A[30]=m("h3",null," Security Alerts",-1)),m("div",Lle,[m("div",Mle,[m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":A[8]||(A[8]=k=>d.value.failedLogins=k),onChange:_},null,544),[[Et,d.value.failedLogins]]),A[26]||(A[26]=Me(" Alert on Multiple Failed Login Attempts "))])]),m("div",Ble,[m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":A[9]||(A[9]=k=>d.value.unusualAccess=k),onChange:_},null,544),[[Et,d.value.unusualAccess]]),A[27]||(A[27]=Me(" Alert on Unusual Access Patterns "))])]),m("div",Ule,[m("label",null,[Ve(m("input",{type:"checkbox","onUpdate:modelValue":A[10]||(A[10]=k=>d.value.bulkExport=k),onChange:_},null,544),[[Et,d.value.bulkExport]]),A[28]||(A[28]=Me(" Alert on Bulk Data Exports "))])]),m("div",Vle,[A[29]||(A[29]=m("h4",null,"Alert Recipients:",-1)),m("div",$le,[Ve(m("input",{type:"email","onUpdate:modelValue":A[11]||(A[11]=k=>h.value=k),placeholder:"Enter email address"},null,512),[[At,h.value]]),m("button",{onClick:b,class:"btn btn-primary"}," Add ")]),f.value.length?(N(),U("div",Hle,[(N(!0),U(Oe,null,Ge(f.value,k=>(N(),U("div",{key:k,class:"email-row"},[m("span",null,le(k),1),m("button",{onClick:L=>x(k),class:"btn btn-danger btn-sm"}," Remove ",8,jle)]))),128))])):Fe("",!0)])])])]))}},Wle=bt(Gle,[["__scopeId","data-v-cabb716e"]]),zle={class:"health-check"},Kle={class:"status-header"},qle={class:"refresh-button"},Xle=["disabled"],Yle={key:0,class:"last-check"},Qle={class:"status-icon"},Jle={class:"status-info"},Zle={class:"services-grid"},ece={class:"service-header"},tce={class:"service-icon"},rce={class:"service-name"},nce={class:"service-status"},sce={key:0,class:"service-latency"},ace={key:1,class:"service-message"},ice={key:0,class:"recent-issues"},oce={class:"issue-list"},lce={class:"issue-time"},cce={class:"issue-service"},uce={class:"issue-description"},dce={__name:"SystemHealthCheck",setup(t){const e=pe(!1),r=pe(null),n=pe("checking"),s=pe([{name:"Authentication",icon:"",status:"checking",latency:null},{name:"Database",icon:"",status:"checking",latency:null},{name:"Storage",icon:"",status:"checking",latency:null},{name:"Functions",icon:"",status:"checking",latency:null}]),i=pe([]),a=p=>{switch(p){case"operational":return"Fully Operational";case"degraded":return"Performance Issues";case"down":return"Service Unavailable";case"checking":return"Checking Status...";default:return"Unknown Status"}},o=p=>{if(!p)return"";const g=p instanceof Date?p:p.toDate();return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(g)},l=async()=>{const p=Ku(),g=performance.now();try{return await c8(p),{status:"operational",latency:Math.round(performance.now()-g)}}catch(y){return console.error("Auth check failed:",y),{status:"down",message:"Authentication service is not responding"}}},c=async()=>{const p=no(),g=performance.now();try{const y=zr(Gt(p,"health_checks"),Ri(1));return await dr(y),{status:"operational",latency:Math.round(performance.now()-g)}}catch(y){return console.error("Database check failed:",y),{status:"down",message:"Database service is not responding"}}},u=async()=>{const p=CC(),g=performance.now();try{return await Gv(p,"health_check.txt").toString(),{status:"operational",latency:Math.round(performance.now()-g)}}catch(y){return console.error("Storage check failed:",y),{status:"down",message:"Storage service is not responding"}}},d=async()=>{const p=jl(),g=performance.now();try{return await fa(p,"healthCheck")(),{status:"operational",latency:Math.round(performance.now()-g)}}catch(y){return console.error("Functions check failed:",y),{status:"down",message:"Cloud Functions service is not responding"}}},f=(p,g)=>{const y=s.value.find(E=>E.name===p);y&&(y.status=g.status,y.latency=g.latency,y.message=g.message)},h=()=>{const p=s.value.map(g=>g.status);return p.every(g=>g==="operational")?"operational":p.some(g=>g==="down")?"down":"degraded"},v=async()=>{if(!e.value){e.value=!0,r.value=new Date;try{s.value.forEach(I=>{I.status="checking",I.latency=null,I.message=null});const[p,g,y,E]=await Promise.all([l(),c(),u(),d()]);f("Authentication",p),f("Database",g),f("Storage",y),f("Functions",E),n.value=h();const S=s.value.filter(I=>I.status!=="operational").map(I=>({id:Date.now()+Math.random(),service:I.name,timestamp:new Date,description:I.message||`Service is ${I.status}`}));S.length&&(i.value=[...S,...i.value].slice(0,5))}catch(p){console.error("Health check failed:",p),n.value="down"}finally{e.value=!1}}};return Jt(()=>{v(),setInterval(v,5*60*1e3)}),(p,g)=>(N(),U("div",zle,[m("div",Kle,[g[0]||(g[0]=m("h3",null,"System Health Status",-1)),m("div",qle,[m("button",{onClick:v,disabled:e.value,class:"btn btn-primary"},le(e.value?"Checking...":"Check Now"),9,Xle),r.value?(N(),U("span",Yle," Last check: "+le(o(r.value)),1)):Fe("",!0)])]),m("div",{class:ot(["status-card overall",n.value])},[m("div",Qle,le(n.value==="operational"?"":n.value==="degraded"?"":""),1),m("div",Jle,[g[1]||(g[1]=m("h4",null,"Overall System Status",-1)),m("p",null,le(a(n.value)),1)])],2),m("div",Zle,[(N(!0),U(Oe,null,Ge(s.value,y=>(N(),U("div",{key:y.name,class:ot(["service-card",y.status])},[m("div",ece,[m("span",tce,le(y.icon),1),m("span",rce,le(y.name),1)]),m("div",nce,le(y.status==="operational"?"":y.status==="degraded"?"":"")+" "+le(a(y.status)),1),y.latency!==void 0?(N(),U("div",sce," Latency: "+le(y.latency)+"ms ",1)):Fe("",!0),y.message?(N(),U("div",ace,le(y.message),1)):Fe("",!0)],2))),128))]),i.value.length?(N(),U("div",ice,[g[2]||(g[2]=m("h4",null,"Recent Issues",-1)),m("div",oce,[(N(!0),U(Oe,null,Ge(i.value,y=>(N(),U("div",{key:y.id,class:"issue-item"},[m("div",lce,le(o(y.timestamp)),1),m("div",cce,le(y.service),1),m("div",uce,le(y.description),1)]))),128))])])):Fe("",!0)]))}},fce=bt(dce,[["__scopeId","data-v-9610f287"]]),hce={name:"AdminView",components:{TabBar:t$,UserAddForm:d$,UserTable:O$,PermissionsMatrix:WC,AdminStudents:cH,StudentBulkImporter:fj,AdminPermissions:mj,SeisImport:Pj,AeriesImport:jj,AeriesAPIConnector:JG,AppSettings:zW,AdminAideAssignment:YC,AdminTimeTable:R4,AdminAideSchedule:j4,AdminBackupRestore:G4,AdminTeacherFeedback:Oae,TestingLinks:Nie,AdminDashboard:xoe,DebugEncryption:q4,SecurityControlCenter:Wle,SystemHealthCheck:fce},setup(){const t=Xo(),e=c9(),r=pe("dashboard"),n=pe("dashboard"),{students:s,fetchStudents:i}=Ca(),{users:a,fetchUsers:o}=Ia();Jt(async()=>{try{await Promise.all([i(),o()]);const I=e.query.category;I&&u(I)}catch(I){console.error("Error loading data:",I)}});const l=[{key:"dashboard",label:"Dashboard",category:"dashboard"},{key:"usersAdd",label:"Add Users",category:"users-students"},{key:"usersEdit",label:"Manage Users",category:"users-students"},{key:"students",label:"Students",category:"users-students"},{key:"addStudents",label:"Add Students",category:"users-students"},{key:"aide-assignment",label:"Aide Assignment",category:"aide-management"},{key:"aide-schedule",label:"Aide Schedule",category:"aide-management"},{key:"time-table",label:"Time Table",category:"aide-management"},{key:"seis",label:"SEIS Import",category:"data-integration"},{key:"aeries",label:"Aeries API & Import",category:"data-integration"},{key:"testing-links",label:"Testing Links",category:"data-integration"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"data-integration"},{key:"backup-restore",label:"Backup & Restore",category:"data-integration"},{key:"permissions",label:"Permissions",category:"system-config"},{key:"settings",label:"App Settings",category:"system-config"},{key:"iep-security",label:"IEP Security",category:"system-config"},{key:"security",label:"Security Controls",category:"system-config"},{key:"system-health",label:"System Health",category:"monitoring"}],c=I=>l.filter(R=>R.category===I),u=I=>{n.value=I;const R=c(I);R.length>0&&(r.value=R[0].key)},d=I=>{r.value=I},f=()=>{t.push("/students")},h=()=>{t.push("/admin/dashboard")},v=I=>{u(I)},p=()=>{r.value="students"},g=async I=>{console.log("Students imported:",I);try{await i()}catch(R){console.error("Failed to refresh students after import:",R)}},{isDebugMenuVisible:y,canShowDebugMenu:E,toggleDebugMenu:S}=Y1();return{activeTab:r,activeCategory:n,tabs:l,students:s,userMap:a,getTabsForCategory:c,setActiveCategory:u,handleTabChange:d,goToStudents:f,goToDashboard:h,handleGoToCategory:v,handleBulkImporterClose:p,handleStudentsImported:g,isDebugMenuVisible:y,canShowDebugMenu:E,toggleDebugMenu:S}}},pce={class:"admin-header"},mce={class:"admin-nav"},vce={class:"admin-actions"},gce={key:0,class:"sub-tab-container"},xce={class:"admin-section"},yce={key:0,class:"admin-section"},Ece={key:1,class:"admin-section"},_ce={key:2,class:"admin-section"},bce={key:3,class:"admin-section"},Sce={key:4,class:"admin-section"},Tce={key:5,class:"admin-section"},Ace={key:6,class:"admin-section"},wce={key:7,class:"admin-section"},Cce={key:8,class:"admin-section"},Ice={key:9,class:"admin-section"},kce={key:10,class:"admin-section"},Dce={key:11,class:"admin-section"},Rce={key:12,class:"admin-section"},Fce={key:13,class:"admin-section"},Pce={key:14,class:"admin-section"},Oce={key:15,class:"admin-section"},Nce={key:16,class:"admin-section"},Lce={key:17,class:"admin-section"};function Mce(t,e,r,n,s,i){const a=Dr("TabBar"),o=Dr("AdminDashboard"),l=Dr("UserAddForm"),c=Dr("UserTable"),u=Dr("AdminStudents"),d=Dr("StudentBulkImporter"),f=Dr("AdminPermissions"),h=Dr("AdminAideAssignment"),v=Dr("AdminAideSchedule"),p=Dr("AdminTimeTable"),g=Dr("SeisImport"),y=Dr("AeriesAPIConnector"),E=Dr("AeriesImport"),S=Dr("AppSettings"),I=Dr("TestingLinks"),R=Dr("AdminTeacherFeedback"),D=Dr("AdminBackupRestore"),C=Dr("DebugEncryption"),_=Dr("SecurityControlCenter"),b=Dr("SystemHealthCheck");return N(),U("div",null,[m("div",pce,[e[8]||(e[8]=m("h1",null,"Admin Panel",-1)),m("div",mce,[m("button",{onClick:e[0]||(e[0]=x=>n.setActiveCategory("dashboard")),class:ot([{active:n.activeCategory==="dashboard"},"category-btn"])}," Dashboard ",2),m("button",{onClick:e[1]||(e[1]=x=>n.setActiveCategory("users-students")),class:ot([{active:n.activeCategory==="users-students"},"category-btn"])}," User & Student Management ",2),m("button",{onClick:e[2]||(e[2]=x=>n.setActiveCategory("aide-management")),class:ot([{active:n.activeCategory==="aide-management"},"category-btn"])}," Aide Management ",2),m("button",{onClick:e[3]||(e[3]=x=>n.setActiveCategory("data-integration")),class:ot([{active:n.activeCategory==="data-integration"},"category-btn"])}," Data & Integration ",2),m("button",{onClick:e[4]||(e[4]=x=>n.setActiveCategory("system-config")),class:ot([{active:n.activeCategory==="system-config"},"category-btn"])}," System Configuration ",2)]),m("div",vce,[n.canShowDebugMenu?(N(),U("button",{key:0,onClick:e[5]||(e[5]=(...x)=>n.toggleDebugMenu&&n.toggleDebugMenu(...x)),class:"debug-btn"},"  "+le(n.isDebugMenuVisible?"Hide":"Show")+" Debug ",1)):Fe("",!0),m("button",{onClick:e[6]||(e[6]=(...x)=>n.goToStudents&&n.goToStudents(...x)),class:"return-btn"},e[7]||(e[7]=[m("span",null,"",-1),Me(" Return to Students ")]))])]),n.activeCategory?(N(),U("div",gce,[nt(a,{tabs:n.getTabsForCategory(n.activeCategory),"active-tab":n.activeTab,onTabChange:n.handleTabChange},null,8,["tabs","active-tab","onTabChange"])])):Fe("",!0),m("div",xce,[n.activeTab==="dashboard"?(N(),U("div",yce,[nt(o,{onGoToCategory:n.handleGoToCategory,onGoToStudents:n.goToStudents},null,8,["onGoToCategory","onGoToStudents"])])):Fe("",!0),n.activeTab==="usersAdd"?(N(),U("div",Ece,[nt(l)])):Fe("",!0),n.activeTab==="usersEdit"?(N(),U("div",_ce,[nt(c)])):Fe("",!0),n.activeTab==="students"?(N(),U("div",bce,[nt(u)])):Fe("",!0),n.activeTab==="addStudents"?(N(),U("div",Sce,[nt(d,{onClose:n.handleBulkImporterClose,onImported:n.handleStudentsImported},null,8,["onClose","onImported"])])):Fe("",!0),n.activeTab==="permissions"?(N(),U("div",Tce,[nt(f)])):Fe("",!0),n.activeTab==="aide-assignment"?(N(),U("div",Ace,[nt(h)])):Fe("",!0),n.activeTab==="aide-schedule"?(N(),U("div",wce,[nt(v)])):Fe("",!0),n.activeTab==="time-table"?(N(),U("div",Cce,[nt(p)])):Fe("",!0),n.activeTab==="seis"?(N(),U("div",Ice,[nt(g)])):Fe("",!0),n.activeTab==="aeries"?(N(),U("div",kce,[nt(y),e[9]||(e[9]=m("hr",{style:{margin:"2rem 0",border:"1px solid #ddd"}},null,-1)),nt(E)])):Fe("",!0),n.activeTab==="settings"?(N(),U("div",Dce,[nt(S)])):Fe("",!0),n.activeTab==="testing-links"?(N(),U("div",Rce,[nt(I,{students:n.students,userMap:n.userMap},null,8,["students","userMap"])])):Fe("",!0),n.activeTab==="teacher-feedback"?(N(),U("div",Fce,[nt(R)])):Fe("",!0),n.activeTab==="backup-restore"?(N(),U("div",Pce,[nt(D)])):Fe("",!0),n.activeTab==="iep-security"?(N(),U("div",Oce,[e[10]||(e[10]=m("h2",null,"IEP Data Security",-1)),nt(C,{"selected-student":t.currentStudent},null,8,["selected-student"])])):Fe("",!0),n.activeTab==="security"?(N(),U("div",Nce,[nt(_,{"selected-student":t.currentStudent},null,8,["selected-student"])])):Fe("",!0),n.activeTab==="system-health"?(N(),U("div",Lce,[nt(b)])):Fe("",!0)])])}const Bce=bt(hce,[["render",Mce],["__scopeId","data-v-4bebdd05"]]),Uce={class:"aide-schedule-view"},Vce={class:"header"},$ce={class:"user-info"},Hce={class:"content"},jce={key:0,class:"error-message"},Gce={key:1,class:"error-message"},Wce={key:2,class:"loading"},zce={key:3,class:"schedule-container"},Kce={class:"schedule-display"},qce={class:"schedule-timeline"},Xce={class:"time-info"},Yce={class:"time"},Qce={class:"type-badge"},Jce={class:"assignment-info"},Zce={key:0},eue={key:1,class:"no-assignment"},tue={class:"schedule-editor"},rue={class:"editor-content"},nue={class:"time-block-header"},sue={class:"time"},aue={class:"type-badge"},iue={class:"assignment-editor"},oue=["onUpdate:modelValue"],lue=["value"],cue=["value"],uue={class:"editor-actions"},due=["disabled"],fue={key:0},hue={key:1},pue={__name:"AideScheduleView",setup(t){const e=Xo(),r=li(),{userList:n,fetchUsers:s}=Ia(),{students:i,fetchStudents:a}=Ca(),{loadAppSettings:o,saveAppSettings:l}=ka(),c=pe(!0),u=pe(!1),d=pe({}),f=pe({}),h=Ae(()=>{var D;return((D=r.currentUser)==null?void 0:D.role)==="paraeducator"}),v=Ae(()=>{var D;return(D=r.currentUser)==null?void 0:D.uid}),p=Ae(()=>{var D;return((D=n.value)==null?void 0:D.filter(C=>C.role==="teacher"))||[]});async function g(){var D;try{const C=await Vr(vt(ht,"app_settings","global"));if(C.exists()){const _=C.data();d.value=((D=_.timeTables)==null?void 0:D[0])||_.timeTable||{}}}catch(C){console.error("Error loading time table:",C)}}function y(){return d.value.schedule?d.value.schedule.map((D,C)=>({...D,id:D.id||`block-${C}`,assignments:f.value[D.id||`block-${C}`]||{}})):[]}function E(){return y().map(C=>{const _=C.assignments[v.value];let b="";if(_){if(_.startsWith("teacher:")){const x=_.replace("teacher:",""),w=p.value.find(A=>A.id===x);b=w?w.name||w.email:"Unknown Teacher"}else if(_.startsWith("student:")){const x=_.replace("student:",""),w=i.value.find(A=>A.id===x);b=w?`${it(w,"firstName")} ${it(w,"lastName")}`:"Unknown Student"}}return{...C,assignment:b}})}async function S(){try{u.value=!0;const D=await o(),C={...D.detailedAideSchedule};y().forEach(b=>{C[b.id]||(C[b.id]={}),C[b.id][v.value]=b.assignments[v.value]});const _={...D,detailedAideSchedule:C};await l(_),console.log("My schedule saved successfully")}catch(D){console.error("Error saving my schedule:",D)}finally{u.value=!1}}function I(){r.logout(),e.push("/login")}async function R(){try{c.value=!0,await Promise.all([s(),a(),o(),g()]);const D=await Vr(vt(ht,"app_settings","global"));if(D.exists()){const C=D.data();f.value=C.detailedAideSchedule||{}}c.value=!1}catch(D){console.error("Error loading aide schedule data:",D),c.value=!1}}return Jt(R),(D,C)=>{var _,b;return N(),U("div",Uce,[m("div",Vce,[C[2]||(C[2]=m("h1",null,"My Schedule",-1)),m("div",$ce,[m("span",null,le(((_=me(r).currentUser)==null?void 0:_.name)||((b=me(r).currentUser)==null?void 0:b.email)),1),m("button",{onClick:I,class:"btn btn-secondary"}," Logout ")])]),m("div",Hce,[me(r).currentUser?h.value?c.value?(N(),U("div",Wce," Loading your schedule... ")):(N(),U("div",zce,[m("div",Kce,[C[7]||(C[7]=m("h2",null,"My Daily Schedule",-1)),m("div",qce,[(N(!0),U(Oe,null,Ge(E(),x=>(N(),U("div",{key:x.id,class:ot(["time-block",x.type])},[m("div",Xce,[m("span",Yce,le(x.startTime)+" - "+le(x.endTime),1),m("span",Qce,le(x.type),1)]),m("div",Jce,[x.assignment?(N(),U("span",Zce,le(x.assignment),1)):(N(),U("span",eue,"No Assignment"))])],2))),128))])]),m("div",tue,[C[9]||(C[9]=m("h2",null,"Edit My Schedule",-1)),m("div",rue,[(N(!0),U(Oe,null,Ge(y(),x=>(N(),U("div",{key:x.id,class:"time-block-editor"},[m("div",nue,[m("span",sue,le(x.startTime)+" - "+le(x.endTime),1),m("span",aue,le(x.type),1)]),m("div",iue,[Ve(m("select",{"onUpdate:modelValue":w=>x.assignments[v.value]=w,class:"assignment-select"},[C[8]||(C[8]=m("option",{value:""},"No Assignment",-1)),(N(!0),U(Oe,null,Ge(p.value,w=>(N(),U("option",{key:w.id,value:`teacher:${w.id}`},le(w.name||w.email),9,lue))),128)),(N(!0),U(Oe,null,Ge(me(i),w=>(N(),U("option",{key:w.id,value:`student:${w.id}`},le(me(it)(w,"firstName"))+" "+le(me(it)(w,"lastName")),9,cue))),128))],8,oue),[[hr,x.assignments[v.value]]])])]))),128))]),m("div",uue,[m("button",{onClick:S,class:"btn btn-primary",disabled:u.value},[u.value?(N(),U("span",fue,"")):(N(),U("span",hue,"")),Me(" "+le(u.value?"Saving...":"Save My Schedule"),1)],8,due)])])])):(N(),U("div",Gce,[C[5]||(C[5]=m("h2",null,"Access Denied",-1)),C[6]||(C[6]=m("p",null,"This page is only available to paraeducators.",-1)),m("button",{onClick:C[1]||(C[1]=x=>me(e).push("/")),class:"btn btn-primary"},"Go Home")])):(N(),U("div",jce,[C[3]||(C[3]=m("h2",null,"Authentication Required",-1)),C[4]||(C[4]=m("p",null,"Please log in to access this page.",-1)),m("button",{onClick:C[0]||(C[0]=x=>me(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])])}}},mue=bt(pue,[["__scopeId","data-v-f2c7a0cd"]]);function vue(t){const{waitForAuthInit:e}=Qv();e.then(()=>{t.beforeEach((r,n,s)=>{const{currentUser:i}=Qv(),a=r.meta.requiresAuth,o=r.meta.allowedRoles;a&&!i.value?s({name:"Login"}):a&&i.value&&!i.value.role?(console.log(`User ${i.value.uid} exists in Auth but has no role - redirecting to login for role assignment`),s({name:"Login"})):a&&o&&i.value&&!o.includes(i.value.role)?(console.warn(`User with role '${i.value.role}' tried to access restricted route: ${r.path}`),s({name:"Home"})):s()})})}const gue=[{path:"/login",name:"Login",component:YV},{path:"/",name:"Home",component:X_,meta:{requiresAuth:!0,allowedRoles:U_}},{path:"/students",name:"Students",component:X_,meta:{requiresAuth:!0,allowedRoles:U_}},{path:"/admin",name:"Admin",component:Bce,meta:{requiresAuth:!0,allowedRoles:Mc}},{path:"/admin/aide-assignment",name:"AdminAideAssignment",component:YC,meta:{requiresAuth:!0,allowedRoles:Mc}},{path:"/admin/time-table",name:"AdminTimeTable",component:R4,meta:{requiresAuth:!0,allowedRoles:Mc}},{path:"/admin/aide-schedule",name:"AdminAideSchedule",component:j4,meta:{requiresAuth:!0,allowedRoles:Mc}},{path:"/admin/backup-restore",name:"AdminBackupRestore",component:G4,meta:{requiresAuth:!0,allowedRoles:Mc}},{path:"/aide-schedule",name:"AideSchedule",component:mue,meta:{requiresAuth:!0,allowedRoles:["paraeducator"]}},{path:"/testing",name:"Testing",component:()=>Q1(()=>import("./TestingView-C6U8Lauv.js"),__vite__mapDeps([0,1])),meta:{requiresAuth:!0,allowedRoles:["admin","administrator","sped_chair","administrator_504_CM"]}}],X4=o9({history:LM("/"),routes:gue});vue(X4);const Nx=E0(P9),xue=WR();Nx.use(X4);Nx.use(xue);Nx.mount("#app");export{Oe as F,GC as S,bt as _,vt as a,ac as b,Gt as c,ht as d,U as e,m as f,dr as g,Fe as h,Me as i,me as j,Ge as k,nt as l,xj as m,yj as n,Jt as o,N as p,pe as r,xr as s,le as t,ka as u};
