(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function bh(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const qt={},jl=[],Ns=()=>{},eD=()=>!1,Ad=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ov=t=>t.startsWith("onUpdate:"),pr=Object.assign,Nv=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},tD=Object.prototype.hasOwnProperty,sr=(t,e)=>tD.call(t,e),dt=Array.isArray,Hl=t=>Tc(t)==="[object Map]",Qo=t=>Tc(t)==="[object Set]",By=t=>Tc(t)==="[object Date]",rD=t=>Tc(t)==="[object RegExp]",bt=t=>typeof t=="function",yr=t=>typeof t=="string",la=t=>typeof t=="symbol",ur=t=>t!==null&&typeof t=="object",Mv=t=>(ur(t)||bt(t))&&bt(t.then)&&bt(t.catch),yS=Object.prototype.toString,Tc=t=>yS.call(t),nD=t=>Tc(t).slice(8,-1),_h=t=>Tc(t)==="[object Object]",Lv=t=>yr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Gl=bh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sh=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},sD=/-(\w)/g,Tn=Sh(t=>t.replace(sD,(e,r)=>r?r.toUpperCase():"")),aD=/\B([A-Z])/g,ps=Sh(t=>t.replace(aD,"-$1").toLowerCase()),Cd=Sh(t=>t.charAt(0).toUpperCase()+t.slice(1)),yu=Sh(t=>t?`on${Cd(t)}`:""),ts=(t,e)=>!Object.is(t,e),Wl=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},vg=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},E0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},b0=t=>{const e=yr(t)?Number(t):NaN;return isNaN(e)?t:e};let Uy;const Th=()=>Uy||(Uy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),iD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",oD=bh(iD);function _n(t){if(dt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=yr(n)?dD(n):_n(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(yr(t)||ur(t))return t}const lD=/;(?![^(]*\))/g,cD=/:([^]+)/,uD=/\/\*[^]*?\*\//g;function dD(t){const e={};return t.replace(uD,"").split(lD).forEach(r=>{if(r){const n=r.split(cD);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ze(t){let e="";if(yr(t))e=t;else if(dt(t))for(let r=0;r<t.length;r++){const n=Ze(t[r]);n&&(e+=n+" ")}else if(ur(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function fD(t){if(!t)return null;let{class:e,style:r}=t;return e&&!yr(e)&&(t.class=Ze(e)),r&&(t.style=_n(r)),t}const hD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pD=bh(hD);function ES(t){return!!t||t===""}function mD(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=Zi(t[n],e[n]);return r}function Zi(t,e){if(t===e)return!0;let r=By(t),n=By(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=la(t),n=la(e),r||n)return t===e;if(r=dt(t),n=dt(e),r||n)return r&&n?mD(t,e):!1;if(r=ur(t),n=ur(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!Zi(t[a],e[a]))return!1}}return String(t)===String(e)}function wh(t,e){return t.findIndex(r=>Zi(r,e))}const bS=t=>!!(t&&t.__v_isRef===!0),Q=t=>yr(t)?t:t==null?"":dt(t)||ur(t)&&(t.toString===yS||!bt(t.toString))?bS(t)?Q(t.value):JSON.stringify(t,_S,2):String(t),_S=(t,e)=>bS(e)?_S(t,e.value):Hl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],i)=>(r[Op(n,i)+" =>"]=s,r),{})}:Qo(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Op(r))}:la(e)?Op(e):ur(e)&&!dt(e)&&!_h(e)?String(e):e,Op=(t,e="")=>{var r;return la(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nn;class Bv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Nn,!e&&Nn&&(this.index=(Nn.scopes||(Nn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Nn;try{return Nn=this,e()}finally{Nn=r}}}on(){++this._on===1&&(this.prevScope=Nn,Nn=this)}off(){this._on>0&&--this._on===0&&(Nn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Uv(t){return new Bv(t)}function $v(){return Nn}function SS(t,e=!1){Nn&&Nn.cleanups.push(t)}let gr;const Np=new WeakSet;class Yu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Nn&&Nn.active&&Nn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Np.has(this)&&(Np.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wS(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,$y(this),AS(this);const e=gr,r=aa;gr=this,aa=!0;try{return this.fn()}finally{CS(this),gr=e,aa=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Hv(e);this.deps=this.depsTail=void 0,$y(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Np.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){xg(this)&&this.run()}get dirty(){return xg(this)}}let TS=0,Eu,bu;function wS(t,e=!1){if(t.flags|=8,e){t.next=bu,bu=t;return}t.next=Eu,Eu=t}function Vv(){TS++}function jv(){if(--TS>0)return;if(bu){let e=bu;for(bu=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;Eu;){let e=Eu;for(Eu=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function AS(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function CS(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),Hv(n),gD(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function xg(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(IS(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function IS(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ju)||(t.globalVersion=Ju,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!xg(t))))return;t.flags|=2;const e=t.dep,r=gr,n=aa;gr=t,aa=!0;try{AS(t);const s=t.fn(t._value);(e.version===0||ts(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{gr=r,aa=n,CS(t),t.flags&=-3}}function Hv(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)Hv(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function gD(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}function vD(t,e){t.effect instanceof Yu&&(t=t.effect.fn);const r=new Yu(t);e&&pr(r,e);try{r.run()}catch(s){throw r.stop(),s}const n=r.run.bind(r);return n.effect=r,n}function xD(t){t.effect.stop()}let aa=!0;const kS=[];function li(){kS.push(aa),aa=!1}function ci(){const t=kS.pop();aa=t===void 0?!0:t}function $y(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=gr;gr=void 0;try{e()}finally{gr=r}}}let Ju=0;class yD{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ah{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!gr||!aa||gr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==gr)r=this.activeLink=new yD(gr,this),gr.deps?(r.prevDep=gr.depsTail,gr.depsTail.nextDep=r,gr.depsTail=r):gr.deps=gr.depsTail=r,DS(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=gr.depsTail,r.nextDep=void 0,gr.depsTail.nextDep=r,gr.depsTail=r,gr.deps===r&&(gr.deps=n)}return r}trigger(e){this.version++,Ju++,this.notify(e)}notify(e){Vv();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{jv()}}}function DS(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)DS(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const _0=new WeakMap,Po=Symbol(""),yg=Symbol(""),Qu=Symbol("");function Bn(t,e,r){if(aa&&gr){let n=_0.get(t);n||_0.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new Ah),s.map=n,s.key=r),s.track()}}function Wa(t,e,r,n,s,i){const a=_0.get(t);if(!a){Ju++;return}const o=l=>{l&&l.trigger()};if(Vv(),e==="clear")a.forEach(o);else{const l=dt(t),c=l&&Lv(r);if(l&&r==="length"){const u=Number(n);a.forEach((d,h)=>{(h==="length"||h===Qu||!la(h)&&h>=u)&&o(d)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),c&&o(a.get(Qu)),e){case"add":l?c&&o(a.get("length")):(o(a.get(Po)),Hl(t)&&o(a.get(yg)));break;case"delete":l||(o(a.get(Po)),Hl(t)&&o(a.get(yg)));break;case"set":Hl(t)&&o(a.get(Po));break}}jv()}function ED(t,e){const r=_0.get(t);return r&&r.get(e)}function El(t){const e=zt(t);return e===t?e:(Bn(e,"iterate",Qu),ws(t)?e:e.map(Sn))}function Ch(t){return Bn(t=zt(t),"iterate",Qu),t}const bD={__proto__:null,[Symbol.iterator](){return Mp(this,Symbol.iterator,Sn)},concat(...t){return El(this).concat(...t.map(e=>dt(e)?El(e):e))},entries(){return Mp(this,"entries",t=>(t[1]=Sn(t[1]),t))},every(t,e){return ja(this,"every",t,e,void 0,arguments)},filter(t,e){return ja(this,"filter",t,e,r=>r.map(Sn),arguments)},find(t,e){return ja(this,"find",t,e,Sn,arguments)},findIndex(t,e){return ja(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ja(this,"findLast",t,e,Sn,arguments)},findLastIndex(t,e){return ja(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ja(this,"forEach",t,e,void 0,arguments)},includes(...t){return Lp(this,"includes",t)},indexOf(...t){return Lp(this,"indexOf",t)},join(t){return El(this).join(t)},lastIndexOf(...t){return Lp(this,"lastIndexOf",t)},map(t,e){return ja(this,"map",t,e,void 0,arguments)},pop(){return zc(this,"pop")},push(...t){return zc(this,"push",t)},reduce(t,...e){return Vy(this,"reduce",t,e)},reduceRight(t,...e){return Vy(this,"reduceRight",t,e)},shift(){return zc(this,"shift")},some(t,e){return ja(this,"some",t,e,void 0,arguments)},splice(...t){return zc(this,"splice",t)},toReversed(){return El(this).toReversed()},toSorted(t){return El(this).toSorted(t)},toSpliced(...t){return El(this).toSpliced(...t)},unshift(...t){return zc(this,"unshift",t)},values(){return Mp(this,"values",Sn)}};function Mp(t,e,r){const n=Ch(t),s=n[e]();return n!==t&&!ws(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const _D=Array.prototype;function ja(t,e,r,n,s,i){const a=Ch(t),o=a!==t&&!ws(t),l=a[e];if(l!==_D[e]){const d=l.apply(t,i);return o?Sn(d):d}let c=r;a!==t&&(o?c=function(d,h){return r.call(this,Sn(d),h,t)}:r.length>2&&(c=function(d,h){return r.call(this,d,h,t)}));const u=l.call(a,c,n);return o&&s?s(u):u}function Vy(t,e,r,n){const s=Ch(t);let i=r;return s!==t&&(ws(t)?r.length>3&&(i=function(a,o,l){return r.call(this,a,o,l,t)}):i=function(a,o,l){return r.call(this,a,Sn(o),l,t)}),s[e](i,...n)}function Lp(t,e,r){const n=zt(t);Bn(n,"iterate",Qu);const s=n[e](...r);return(s===-1||s===!1)&&Dh(r[0])?(r[0]=zt(r[0]),n[e](...r)):s}function zc(t,e,r=[]){li(),Vv();const n=zt(t)[e].apply(t,r);return jv(),ci(),n}const SD=bh("__proto__,__v_isRef,__isVue"),PS=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(la));function TD(t){la(t)||(t=String(t));const e=zt(this);return Bn(e,"has",t),e.hasOwnProperty(t)}class FS{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?BS:LS:i?MS:NS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=dt(e);if(!s){let l;if(a&&(l=bD[r]))return l;if(r==="hasOwnProperty")return TD}const o=Reflect.get(e,r,_r(e)?e:n);return(la(r)?PS.has(r):SD(r))||(s||Bn(e,"get",r),i)?o:_r(o)?a&&Lv(r)?o:o.value:ur(o)?s?Wv(o):gs(o):o}}class RS extends FS{constructor(e=!1){super(!1,e)}set(e,r,n,s){let i=e[r];if(!this._isShallow){const l=ui(i);if(!ws(n)&&!ui(n)&&(i=zt(i),n=zt(n)),!dt(e)&&_r(i)&&!_r(n))return l?!1:(i.value=n,!0)}const a=dt(e)&&Lv(r)?Number(r)<e.length:sr(e,r),o=Reflect.set(e,r,n,_r(e)?e:s);return e===zt(s)&&(a?ts(n,i)&&Wa(e,"set",r,n):Wa(e,"add",r,n)),o}deleteProperty(e,r){const n=sr(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&Wa(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!la(r)||!PS.has(r))&&Bn(e,"has",r),n}ownKeys(e){return Bn(e,"iterate",dt(e)?"length":Po),Reflect.ownKeys(e)}}class OS extends FS{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const wD=new RS,AD=new OS,CD=new RS(!0),ID=new OS(!0),Eg=t=>t,gf=t=>Reflect.getPrototypeOf(t);function kD(t,e,r){return function(...n){const s=this.__v_raw,i=zt(s),a=Hl(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=s[t](...n),u=r?Eg:e?S0:Sn;return!e&&Bn(i,"iterate",l?yg:Po),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:o?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function vf(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function DD(t,e){const r={get(s){const i=this.__v_raw,a=zt(i),o=zt(s);t||(ts(s,o)&&Bn(a,"get",s),Bn(a,"get",o));const{has:l}=gf(a),c=e?Eg:t?S0:Sn;if(l.call(a,s))return c(i.get(s));if(l.call(a,o))return c(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Bn(zt(s),"iterate",Po),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=zt(i),o=zt(s);return t||(ts(s,o)&&Bn(a,"has",s),Bn(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=zt(o),c=e?Eg:t?S0:Sn;return!t&&Bn(l,"iterate",Po),o.forEach((u,d)=>s.call(i,c(u),c(d),a))}};return pr(r,t?{add:vf("add"),set:vf("set"),delete:vf("delete"),clear:vf("clear")}:{add(s){!e&&!ws(s)&&!ui(s)&&(s=zt(s));const i=zt(this);return gf(i).has.call(i,s)||(i.add(s),Wa(i,"add",s,s)),this},set(s,i){!e&&!ws(i)&&!ui(i)&&(i=zt(i));const a=zt(this),{has:o,get:l}=gf(a);let c=o.call(a,s);c||(s=zt(s),c=o.call(a,s));const u=l.call(a,s);return a.set(s,i),c?ts(i,u)&&Wa(a,"set",s,i):Wa(a,"add",s,i),this},delete(s){const i=zt(this),{has:a,get:o}=gf(i);let l=a.call(i,s);l||(s=zt(s),l=a.call(i,s)),o&&o.call(i,s);const c=i.delete(s);return l&&Wa(i,"delete",s,void 0),c},clear(){const s=zt(this),i=s.size!==0,a=s.clear();return i&&Wa(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=kD(s,t,e)}),r}function Ih(t,e){const r=DD(t,e);return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(sr(r,s)&&s in n?r:n,s,i)}const PD={get:Ih(!1,!1)},FD={get:Ih(!1,!0)},RD={get:Ih(!0,!1)},OD={get:Ih(!0,!0)},NS=new WeakMap,MS=new WeakMap,LS=new WeakMap,BS=new WeakMap;function ND(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function MD(t){return t.__v_skip||!Object.isExtensible(t)?0:ND(nD(t))}function gs(t){return ui(t)?t:kh(t,!1,wD,PD,NS)}function Gv(t){return kh(t,!1,CD,FD,MS)}function Wv(t){return kh(t,!0,AD,RD,LS)}function LD(t){return kh(t,!0,ID,OD,BS)}function kh(t,e,r,n,s){if(!ur(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=MD(t);if(i===0)return t;const a=s.get(t);if(a)return a;const o=new Proxy(t,i===2?n:r);return s.set(t,o),o}function Sa(t){return ui(t)?Sa(t.__v_raw):!!(t&&t.__v_isReactive)}function ui(t){return!!(t&&t.__v_isReadonly)}function ws(t){return!!(t&&t.__v_isShallow)}function Dh(t){return t?!!t.__v_raw:!1}function zt(t){const e=t&&t.__v_raw;return e?zt(e):t}function Ph(t){return!sr(t,"__v_skip")&&Object.isExtensible(t)&&vg(t,"__v_skip",!0),t}const Sn=t=>ur(t)?gs(t):t,S0=t=>ur(t)?Wv(t):t;function _r(t){return t?t.__v_isRef===!0:!1}function ne(t){return US(t,!1)}function zv(t){return US(t,!0)}function US(t,e){return _r(t)?t:new BD(t,e)}class BD{constructor(e,r){this.dep=new Ah,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:zt(e),this._value=r?e:Sn(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||ws(e)||ui(e);e=n?e:zt(e),ts(e,r)&&(this._rawValue=e,this._value=n?e:Sn(e),this.dep.trigger())}}function UD(t){t.dep&&t.dep.trigger()}function Z(t){return _r(t)?t.value:t}function $D(t){return bt(t)?t():Z(t)}const VD={get:(t,e,r)=>e==="__v_raw"?t:Z(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return _r(s)&&!_r(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function Kv(t){return Sa(t)?t:new Proxy(t,VD)}class jD{constructor(e){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new Ah,{get:n,set:s}=e(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function $S(t){return new jD(t)}function VS(t){const e=dt(t)?new Array(t.length):{};for(const r in t)e[r]=jS(t,r);return e}class HD{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ED(zt(this._object),this._key)}}class GD{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function WD(t,e,r){return _r(t)?t:bt(t)?new GD(t):ur(t)&&arguments.length>1?jS(t,e,r):ne(t)}function jS(t,e,r){const n=t[e];return _r(n)?n:new HD(t,e,r)}class zD{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Ah(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ju-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&gr!==this)return wS(this,!0),!0}get value(){const e=this.dep.track();return IS(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function KD(t,e,r=!1){let n,s;return bt(t)?n=t:(n=t.get,s=t.set),new zD(n,s,r)}const qD={GET:"get",HAS:"has",ITERATE:"iterate"},XD={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},xf={},T0=new WeakMap;let Ni;function YD(){return Ni}function HS(t,e=!1,r=Ni){if(r){let n=T0.get(r);n||T0.set(r,n=[]),n.push(t)}}function JD(t,e,r=qt){const{immediate:n,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=r,c=I=>s?I:ws(I)||s===!1||s===0?za(I,1):za(I);let u,d,h,p,m=!1,g=!1;if(_r(t)?(d=()=>t.value,m=ws(t)):Sa(t)?(d=()=>c(t),m=!0):dt(t)?(g=!0,m=t.some(I=>Sa(I)||ws(I)),d=()=>t.map(I=>{if(_r(I))return I.value;if(Sa(I))return c(I);if(bt(I))return l?l(I,2):I()})):bt(t)?e?d=l?()=>l(t,2):t:d=()=>{if(h){li();try{h()}finally{ci()}}const I=Ni;Ni=u;try{return l?l(t,3,[p]):t(p)}finally{Ni=I}}:d=Ns,e&&s){const I=d,P=s===!0?1/0:s;d=()=>za(I(),P)}const v=$v(),y=()=>{u.stop(),v&&v.active&&Nv(v.effects,u)};if(i&&e){const I=e;e=(...P)=>{I(...P),y()}}let x=g?new Array(t.length).fill(xf):xf;const E=I=>{if(!(!(u.flags&1)||!u.dirty&&!I))if(e){const P=u.run();if(s||m||(g?P.some((w,b)=>ts(w,x[b])):ts(P,x))){h&&h();const w=Ni;Ni=u;try{const b=[P,x===xf?void 0:g&&x[0]===xf?[]:x,p];x=P,l?l(e,3,b):e(...b)}finally{Ni=w}}}else u.run()};return o&&o(E),u=new Yu(d),u.scheduler=a?()=>a(E,!1):E,p=I=>HS(I,!1,u),h=u.onStop=()=>{const I=T0.get(u);if(I){if(l)l(I,4);else for(const P of I)P();T0.delete(u)}},e?n?E(!0):x=u.run():a?a(E.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function za(t,e=1/0,r){if(e<=0||!ur(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,_r(t))za(t.value,e,r);else if(dt(t))for(let n=0;n<t.length;n++)za(t[n],e,r);else if(Qo(t)||Hl(t))t.forEach(n=>{za(n,e,r)});else if(_h(t)){for(const n in t)za(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&za(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const GS=[];function QD(t){GS.push(t)}function ZD(){GS.pop()}function e3(t,e){}const t3={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},r3={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function wc(t,e,r,n){try{return n?t(...n):t()}catch(s){Zo(s,e,r)}}function Us(t,e,r,n){if(bt(t)){const s=wc(t,e,r,n);return s&&Mv(s)&&s.catch(i=>{Zo(i,e,r)}),s}if(dt(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Us(t[i],e,r,n));return s}}function Zo(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||qt;if(e){let o=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}o=o.parent}if(i){li(),wc(i,null,10,[t,l,c]),ci();return}}n3(t,r,s,n,a)}function n3(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const rs=[];let Ea=-1;const zl=[];let Mi=null,kl=0;const WS=Promise.resolve();let w0=null;function el(t){const e=w0||WS;return t?e.then(this?t.bind(this):t):e}function s3(t){let e=Ea+1,r=rs.length;for(;e<r;){const n=e+r>>>1,s=rs[n],i=ed(s);i<t||i===t&&s.flags&2?e=n+1:r=n}return e}function qv(t){if(!(t.flags&1)){const e=ed(t),r=rs[rs.length-1];!r||!(t.flags&2)&&e>=ed(r)?rs.push(t):rs.splice(s3(e),0,t),t.flags|=1,zS()}}function zS(){w0||(w0=WS.then(KS))}function Zu(t){dt(t)?zl.push(...t):Mi&&t.id===-1?Mi.splice(kl+1,0,t):t.flags&1||(zl.push(t),t.flags|=1),zS()}function jy(t,e,r=Ea+1){for(;r<rs.length;r++){const n=rs[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;rs.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function A0(t){if(zl.length){const e=[...new Set(zl)].sort((r,n)=>ed(r)-ed(n));if(zl.length=0,Mi){Mi.push(...e);return}for(Mi=e,kl=0;kl<Mi.length;kl++){const r=Mi[kl];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Mi=null,kl=0}}const ed=t=>t.id==null?t.flags&2?-1:1/0:t.id;function KS(t){try{for(Ea=0;Ea<rs.length;Ea++){const e=rs[Ea];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),wc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ea<rs.length;Ea++){const e=rs[Ea];e&&(e.flags&=-2)}Ea=-1,rs.length=0,A0(),w0=null,(rs.length||zl.length)&&KS()}}let Dl,yf=[];function qS(t,e){var r,n;Dl=t,Dl?(Dl.enabled=!0,yf.forEach(({event:s,args:i})=>Dl.emit(s,...i)),yf=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{qS(i,e)}),setTimeout(()=>{Dl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,yf=[])},3e3)):yf=[]}let nn=null,Fh=null;function td(t){const e=nn;return nn=t,Fh=t&&t.type.__scopeId||null,e}function a3(t){Fh=t}function i3(){Fh=null}const o3=t=>Rh;function Rh(t,e=nn,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&Ig(-1);const i=td(e);let a;try{a=t(...s)}finally{td(i),n._d&&Ig(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Ae(t,e){if(nn===null)return t;const r=Pd(nn),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,o,l=qt]=e[s];i&&(bt(i)&&(i={mounted:i,updated:i}),i.deep&&za(a),n.push({dir:i,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function ba(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(li(),Us(l,r,8,[t.el,o,t,e]),ci())}}const XS=Symbol("_vte"),YS=t=>t.__isTeleport,_u=t=>t&&(t.disabled||t.disabled===""),Hy=t=>t&&(t.defer||t.defer===""),Gy=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Wy=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,bg=(t,e)=>{const r=t&&t.to;return yr(r)?e?e(r):null:r},JS={name:"Teleport",__isTeleport:!0,process(t,e,r,n,s,i,a,o,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:m,createText:g,createComment:v}}=c,y=_u(e.props);let{shapeFlag:x,children:E,dynamicChildren:I}=e;if(t==null){const P=e.el=g(""),w=e.anchor=g("");p(P,r,n),p(w,r,n);const b=(_,S)=>{x&16&&(s&&s.isCE&&(s.ce._teleportTarget=_),u(E,_,S,s,i,a,o,l))},T=()=>{const _=e.target=bg(e.props,m),S=QS(_,e,g,p);_&&(a!=="svg"&&Gy(_)?a="svg":a!=="mathml"&&Wy(_)&&(a="mathml"),y||(b(_,S),Zf(e,!1)))};y&&(b(r,w),Zf(e,!0)),Hy(e.props)?(e.el.__isMounted=!1,Zr(()=>{T(),delete e.el.__isMounted},i)):T()}else{if(Hy(e.props)&&t.el.__isMounted===!1){Zr(()=>{JS.process(t,e,r,n,s,i,a,o,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const P=e.anchor=t.anchor,w=e.target=t.target,b=e.targetAnchor=t.targetAnchor,T=_u(t.props),_=T?r:w,S=T?P:b;if(a==="svg"||Gy(w)?a="svg":(a==="mathml"||Wy(w))&&(a="mathml"),I?(h(t.dynamicChildren,I,_,s,i,a,o),a1(t,e,!0)):l||d(t,e,_,S,s,i,a,o,!1),y)T?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Ef(e,r,P,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const k=e.target=bg(e.props,m);k&&Ef(e,k,null,c,0)}else T&&Ef(e,w,b,c,1);Zf(e,y)}},remove(t,e,r,{um:n,o:{remove:s}},i){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=t;if(d&&(s(c),s(u)),i&&s(l),a&16){const p=i||!_u(h);for(let m=0;m<o.length;m++){const g=o[m];n(g,e,r,p,!!g.dynamicChildren)}}},move:Ef,hydrate:l3};function Ef(t,e,r,{o:{insert:n},m:s},i=2){i===0&&n(t.targetAnchor,e,r);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=t,d=i===2;if(d&&n(a,e,r),(!d||_u(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,r,2);d&&n(o,e,r)}function l3(t,e,r,n,s,i,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},d){const h=e.target=bg(e.props,l);if(h){const p=_u(e.props),m=h._lpa||h.firstChild;if(e.shapeFlag&16)if(p)e.anchor=d(a(t),e,o(t),r,n,s,i),e.targetStart=m,e.targetAnchor=m&&a(m);else{e.anchor=a(t);let g=m;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,h._lpa=e.targetAnchor&&a(e.targetAnchor);break}}g=a(g)}e.targetAnchor||QS(h,e,u,c),d(m&&a(m),e,h,r,n,s,i)}Zf(e,p)}return e.anchor&&a(e.anchor)}const c3=JS;function Zf(t,e){const r=t.ctx;if(r&&r.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function QS(t,e,r,n){const s=e.targetStart=r(""),i=e.targetAnchor=r("");return s[XS]=i,t&&(n(s,t),n(i,t)),i}const Li=Symbol("_leaveCb"),bf=Symbol("_enterCb");function Xv(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Bt(()=>{t.isMounted=!0}),Lh(()=>{t.isUnmounting=!0}),t}const Is=[Function,Array],Yv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Is,onEnter:Is,onAfterEnter:Is,onEnterCancelled:Is,onBeforeLeave:Is,onLeave:Is,onAfterLeave:Is,onLeaveCancelled:Is,onBeforeAppear:Is,onAppear:Is,onAfterAppear:Is,onAppearCancelled:Is},ZS=t=>{const e=t.subTree;return e.component?ZS(e.component):e},u3={name:"BaseTransition",props:Yv,setup(t,{slots:e}){const r=js(),n=Xv();return()=>{const s=e.default&&Oh(e.default(),!0);if(!s||!s.length)return;const i=eT(s),a=zt(t),{mode:o}=a;if(n.isLeaving)return Bp(i);const l=zy(i);if(!l)return Bp(i);let c=ac(l,a,n,r,d=>c=d);l.type!==jr&&di(l,c);let u=r.subTree&&zy(r.subTree);if(u&&u.type!==jr&&!Zs(l,u)&&ZS(r).type!==jr){let d=ac(u,a,n,r);if(di(u,d),o==="out-in"&&l.type!==jr)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete d.afterLeave,u=void 0},Bp(i);o==="in-out"&&l.type!==jr?d.delayLeave=(h,p,m)=>{const g=rT(n,u);g[String(u.key)]=u,h[Li]=()=>{p(),h[Li]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function eT(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==jr){e=r;break}}return e}const tT=u3;function rT(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function ac(t,e,r,n,s){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:p,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:y,onAfterAppear:x,onAppearCancelled:E}=e,I=String(t.key),P=rT(r,t),w=(_,S)=>{_&&Us(_,n,9,S)},b=(_,S)=>{const k=S[1];w(_,S),dt(_)?_.every(A=>A.length<=1)&&k():_.length<=1&&k()},T={mode:a,persisted:o,beforeEnter(_){let S=l;if(!r.isMounted)if(i)S=v||l;else return;_[Li]&&_[Li](!0);const k=P[I];k&&Zs(t,k)&&k.el[Li]&&k.el[Li](),w(S,[_])},enter(_){let S=c,k=u,A=d;if(!r.isMounted)if(i)S=y||c,k=x||u,A=E||d;else return;let D=!1;const N=_[bf]=R=>{D||(D=!0,R?w(A,[_]):w(k,[_]),T.delayedLeave&&T.delayedLeave(),_[bf]=void 0)};S?b(S,[_,N]):N()},leave(_,S){const k=String(t.key);if(_[bf]&&_[bf](!0),r.isUnmounting)return S();w(h,[_]);let A=!1;const D=_[Li]=N=>{A||(A=!0,S(),N?w(g,[_]):w(m,[_]),_[Li]=void 0,P[k]===t&&delete P[k])};P[k]=t,p?b(p,[_,D]):D()},clone(_){const S=ac(_,e,r,n,s);return s&&s(S),S}};return T}function Bp(t){if(kd(t))return t=Ia(t),t.children=null,t}function zy(t){if(!kd(t))return YS(t.type)&&t.children?eT(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&bt(r.default))return r.default()}}function di(t,e){t.shapeFlag&6&&t.component?(t.transition=e,di(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Oh(t,e=!1,r){let n=[],s=0;for(let i=0;i<t.length;i++){let a=t[i];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:i);a.type===Fe?(a.patchFlag&128&&s++,n=n.concat(Oh(a.children,e,o))):(e||a.type!==jr)&&n.push(o!=null?Ia(a,{key:o}):a)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Id(t,e){return bt(t)?pr({name:t.name},e,{setup:t}):t}function d3(){const t=js();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Jv(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function f3(t){const e=js(),r=zv(null);if(e){const s=e.refs===qt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>r.value,set:i=>r.value=i})}return r}function Kl(t,e,r,n,s=!1){if(dt(t)){t.forEach((m,g)=>Kl(m,e&&(dt(e)?e[g]:e),r,n,s));return}if(qi(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Kl(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?Pd(n.component):n.el,a=s?null:i,{i:o,r:l}=t,c=e&&e.r,u=o.refs===qt?o.refs={}:o.refs,d=o.setupState,h=zt(d),p=d===qt?()=>!1:m=>sr(h,m);if(c!=null&&c!==l&&(yr(c)?(u[c]=null,p(c)&&(d[c]=null)):_r(c)&&(c.value=null)),bt(l))wc(l,o,12,[a,u]);else{const m=yr(l),g=_r(l);if(m||g){const v=()=>{if(t.f){const y=m?p(l)?d[l]:u[l]:l.value;s?dt(y)&&Nv(y,i):dt(y)?y.includes(i)||y.push(i):m?(u[l]=[i],p(l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else m?(u[l]=a,p(l)&&(d[l]=a)):g&&(l.value=a,t.k&&(u[t.k]=a))};a?(v.id=-1,Zr(v,r)):v()}}}let Ky=!1;const bl=()=>{Ky||(console.error("Hydration completed but contains mismatches."),Ky=!0)},h3=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",p3=t=>t.namespaceURI.includes("MathML"),_f=t=>{if(t.nodeType===1){if(h3(t))return"svg";if(p3(t))return"mathml"}},Ll=t=>t.nodeType===8;function m3(t){const{mt:e,p:r,o:{patchProp:n,createText:s,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=t,u=(E,I)=>{if(!I.hasChildNodes()){r(null,E,I),A0(),I._vnode=E;return}d(I.firstChild,E,null,null,null),A0(),I._vnode=E},d=(E,I,P,w,b,T=!1)=>{T=T||!!I.dynamicChildren;const _=Ll(E)&&E.data==="[",S=()=>g(E,I,P,w,b,_),{type:k,ref:A,shapeFlag:D,patchFlag:N}=I;let R=E.nodeType;I.el=E,N===-2&&(T=!1,I.dynamicChildren=null);let F=null;switch(k){case Xi:R!==3?I.children===""?(l(I.el=s(""),a(E),E),F=E):F=S():(E.data!==I.children&&(bl(),E.data=I.children),F=i(E));break;case jr:x(E)?(F=i(E),y(I.el=E.content.firstChild,E,P)):R!==8||_?F=S():F=i(E);break;case Ro:if(_&&(E=i(E),R=E.nodeType),R===1||R===3){F=E;const O=!I.children.length;for(let B=0;B<I.staticCount;B++)O&&(I.children+=F.nodeType===1?F.outerHTML:F.data),B===I.staticCount-1&&(I.anchor=F),F=i(F);return _?i(F):F}else S();break;case Fe:_?F=m(E,I,P,w,b,T):F=S();break;default:if(D&1)(R!==1||I.type.toLowerCase()!==E.tagName.toLowerCase())&&!x(E)?F=S():F=h(E,I,P,w,b,T);else if(D&6){I.slotScopeIds=b;const O=a(E);if(_?F=v(E):Ll(E)&&E.data==="teleport start"?F=v(E,E.data,"teleport end"):F=i(E),e(I,O,null,P,w,_f(O),T),qi(I)&&!I.type.__asyncResolved){let B;_?(B=st(Fe),B.anchor=F?F.previousSibling:O.lastChild):B=E.nodeType===3?Oe(""):st("div"),B.el=E,I.component.subTree=B}}else D&64?R!==8?F=S():F=I.type.hydrate(E,I,P,w,b,T,t,p):D&128&&(F=I.type.hydrate(E,I,P,w,_f(a(E)),b,T,t,d))}return A!=null&&Kl(A,null,w,I),F},h=(E,I,P,w,b,T)=>{T=T||!!I.dynamicChildren;const{type:_,props:S,patchFlag:k,shapeFlag:A,dirs:D,transition:N}=I,R=_==="input"||_==="option";if(R||k!==-1){D&&ba(I,null,P,"created");let F=!1;if(x(E)){F=IT(null,N)&&P&&P.vnode.props&&P.vnode.props.appear;const B=E.content.firstChild;if(F){const V=B.getAttribute("class");V&&(B.$cls=V),N.beforeEnter(B)}y(B,E,P),I.el=E=B}if(A&16&&!(S&&(S.innerHTML||S.textContent))){let B=p(E.firstChild,I,E,P,w,b,T);for(;B;){Sf(E,1)||bl();const V=B;B=B.nextSibling,o(V)}}else if(A&8){let B=I.children;B[0]===`
`&&(E.tagName==="PRE"||E.tagName==="TEXTAREA")&&(B=B.slice(1)),E.textContent!==B&&(Sf(E,0)||bl(),E.textContent=I.children)}if(S){if(R||!T||k&48){const B=E.tagName.includes("-");for(const V in S)(R&&(V.endsWith("value")||V==="indeterminate")||Ad(V)&&!Gl(V)||V[0]==="."||B)&&n(E,V,null,S[V],void 0,P)}else if(S.onClick)n(E,"onClick",null,S.onClick,void 0,P);else if(k&4&&Sa(S.style))for(const B in S.style)S.style[B]}let O;(O=S&&S.onVnodeBeforeMount)&&ds(O,P,I),D&&ba(I,null,P,"beforeMount"),((O=S&&S.onVnodeMounted)||D||F)&&LT(()=>{O&&ds(O,P,I),F&&N.enter(E),D&&ba(I,null,P,"mounted")},w)}return E.nextSibling},p=(E,I,P,w,b,T,_)=>{_=_||!!I.dynamicChildren;const S=I.children,k=S.length;for(let A=0;A<k;A++){const D=_?S[A]:S[A]=hs(S[A]),N=D.type===Xi;E?(N&&!_&&A+1<k&&hs(S[A+1]).type===Xi&&(l(s(E.data.slice(D.children.length)),P,i(E)),E.data=D.children),E=d(E,D,w,b,T,_)):N&&!D.children?l(D.el=s(""),P):(Sf(P,1)||bl(),r(null,D,P,null,w,b,_f(P),T))}return E},m=(E,I,P,w,b,T)=>{const{slotScopeIds:_}=I;_&&(b=b?b.concat(_):_);const S=a(E),k=p(i(E),I,S,P,w,b,T);return k&&Ll(k)&&k.data==="]"?i(I.anchor=k):(bl(),l(I.anchor=c("]"),S,k),k)},g=(E,I,P,w,b,T)=>{if(Sf(E.parentElement,1)||bl(),I.el=null,T){const k=v(E);for(;;){const A=i(E);if(A&&A!==k)o(A);else break}}const _=i(E),S=a(E);return o(E),r(null,I,S,_,P,w,_f(S),b),P&&(P.vnode.el=I.el,Uh(P,I.el)),_},v=(E,I="[",P="]")=>{let w=0;for(;E;)if(E=i(E),E&&Ll(E)&&(E.data===I&&w++,E.data===P)){if(w===0)return i(E);w--}return E},y=(E,I,P)=>{const w=I.parentNode;w&&w.replaceChild(E,I);let b=P;for(;b;)b.vnode.el===I&&(b.vnode.el=b.subTree.el=E),b=b.parent},x=E=>E.nodeType===1&&E.tagName==="TEMPLATE";return[u,d]}const qy="data-allow-mismatch",g3={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Sf(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(qy);)t=t.parentElement;const r=t&&t.getAttribute(qy);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return e===0&&n.includes("children")?!0:n.includes(g3[e])}}const v3=Th().requestIdleCallback||(t=>setTimeout(t,1)),x3=Th().cancelIdleCallback||(t=>clearTimeout(t)),y3=(t=1e4)=>e=>{const r=v3(e,{timeout:t});return()=>x3(r)};function E3(t){const{top:e,left:r,bottom:n,right:s}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:a}=window;return(e>0&&e<i||n>0&&n<i)&&(r>0&&r<a||s>0&&s<a)}const b3=t=>(e,r)=>{const n=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){n.disconnect(),e();break}},t);return r(s=>{if(s instanceof Element){if(E3(s))return e(),n.disconnect(),!1;n.observe(s)}}),()=>n.disconnect()},_3=t=>e=>{if(t){const r=matchMedia(t);if(r.matches)e();else return r.addEventListener("change",e,{once:!0}),()=>r.removeEventListener("change",e)}},S3=(t=[])=>(e,r)=>{yr(t)&&(t=[t]);let n=!1;const s=a=>{n||(n=!0,i(),e(),a.target.dispatchEvent(new a.constructor(a.type,a)))},i=()=>{r(a=>{for(const o of t)a.removeEventListener(o,s)})};return r(a=>{for(const o of t)a.addEventListener(o,s,{once:!0})}),i};function T3(t,e){if(Ll(t)&&t.data==="["){let r=1,n=t.nextSibling;for(;n;){if(n.nodeType===1){if(e(n)===!1)break}else if(Ll(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else e(t)}const qi=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function w3(t){bt(t)&&(t={loader:t});const{loader:e,loadingComponent:r,errorComponent:n,delay:s=200,hydrate:i,timeout:a,suspensible:o=!0,onError:l}=t;let c=null,u,d=0;const h=()=>(d++,c=null,p()),p=()=>{let m;return c||(m=c=e().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),l)return new Promise((v,y)=>{l(g,()=>v(h()),()=>y(g),d+1)});throw g}).then(g=>m!==c&&c?c:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),u=g,g)))};return Id({name:"AsyncComponentWrapper",__asyncLoader:p,__asyncHydrate(m,g,v){const y=i?()=>{const E=i(()=>{v()},I=>T3(m,I));E&&(g.bum||(g.bum=[])).push(E),(g.u||(g.u=[])).push(()=>!0)}:v;u?y():p().then(()=>!g.isUnmounted&&y())},get __asyncResolved(){return u},setup(){const m=rn;if(Jv(m),u)return()=>Up(u,m);const g=E=>{c=null,Zo(E,m,13,!n)};if(o&&m.suspense||ic)return p().then(E=>()=>Up(E,m)).catch(E=>(g(E),()=>n?st(n,{error:E}):null));const v=ne(!1),y=ne(),x=ne(!!s);return s&&setTimeout(()=>{x.value=!1},s),a!=null&&setTimeout(()=>{if(!v.value&&!y.value){const E=new Error(`Async component timed out after ${a}ms.`);g(E),y.value=E}},a),p().then(()=>{v.value=!0,m.parent&&kd(m.parent.vnode)&&m.parent.update()}).catch(E=>{g(E),y.value=E}),()=>{if(v.value&&u)return Up(u,m);if(y.value&&n)return st(n,{error:y.value});if(r&&!x.value)return st(r)}}})}function Up(t,e){const{ref:r,props:n,children:s,ce:i}=e.vnode,a=st(t,n,s);return a.ref=r,a.ce=i,delete e.vnode.ce,a}const kd=t=>t.type.__isKeepAlive,A3={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const r=js(),n=r.ctx;if(!n.renderer)return()=>{const x=e.default&&e.default();return x&&x.length===1?x[0]:x};const s=new Map,i=new Set;let a=null;const o=r.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=n,h=d("div");n.activate=(x,E,I,P,w)=>{const b=x.component;c(x,E,I,0,o),l(b.vnode,x,E,I,b,o,P,x.slotScopeIds,w),Zr(()=>{b.isDeactivated=!1,b.a&&Wl(b.a);const T=x.props&&x.props.onVnodeMounted;T&&ds(T,b.parent,x)},o)},n.deactivate=x=>{const E=x.component;I0(E.m),I0(E.a),c(x,h,null,1,o),Zr(()=>{E.da&&Wl(E.da);const I=x.props&&x.props.onVnodeUnmounted;I&&ds(I,E.parent,x),E.isDeactivated=!0},o)};function p(x){$p(x),u(x,r,o,!0)}function m(x){s.forEach((E,I)=>{const P=Rg(E.type);P&&!x(P)&&g(I)})}function g(x){const E=s.get(x);E&&(!a||!Zs(E,a))?p(E):a&&$p(a),s.delete(x),i.delete(x)}Ut(()=>[t.include,t.exclude],([x,E])=>{x&&m(I=>iu(x,I)),E&&m(I=>!iu(E,I))},{flush:"post",deep:!0});let v=null;const y=()=>{v!=null&&(k0(r.subTree.type)?Zr(()=>{s.set(v,Tf(r.subTree))},r.subTree.suspense):s.set(v,Tf(r.subTree)))};return Bt(y),Mh(y),Lh(()=>{s.forEach(x=>{const{subTree:E,suspense:I}=r,P=Tf(E);if(x.type===P.type&&x.key===P.key){$p(P);const w=P.component.da;w&&Zr(w,I);return}p(x)})}),()=>{if(v=null,!e.default)return a=null;const x=e.default(),E=x[0];if(x.length>1)return a=null,x;if(!fi(E)||!(E.shapeFlag&4)&&!(E.shapeFlag&128))return a=null,E;let I=Tf(E);if(I.type===jr)return a=null,I;const P=I.type,w=Rg(qi(I)?I.type.__asyncResolved||{}:P),{include:b,exclude:T,max:_}=t;if(b&&(!w||!iu(b,w))||T&&w&&iu(T,w))return I.shapeFlag&=-257,a=I,E;const S=I.key==null?P:I.key,k=s.get(S);return I.el&&(I=Ia(I),E.shapeFlag&128&&(E.ssContent=I)),v=S,k?(I.el=k.el,I.component=k.component,I.transition&&di(I,I.transition),I.shapeFlag|=512,i.delete(S),i.add(S)):(i.add(S),_&&i.size>parseInt(_,10)&&g(i.values().next().value)),I.shapeFlag|=256,a=I,k0(E.type)?E:I}}},C3=A3;function iu(t,e){return dt(t)?t.some(r=>iu(r,e)):yr(t)?t.split(",").includes(e):rD(t)?(t.lastIndex=0,t.test(e)):!1}function nT(t,e){aT(t,"a",e)}function sT(t,e){aT(t,"da",e)}function aT(t,e,r=rn){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Nh(e,n,r),r){let s=r.parent;for(;s&&s.parent;)kd(s.parent.vnode)&&I3(n,e,r,s),s=s.parent}}function I3(t,e,r,n){const s=Nh(e,t,n,!0);Ra(()=>{Nv(n[e],s)},r)}function $p(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Tf(t){return t.shapeFlag&128?t.ssContent:t}function Nh(t,e,r=rn,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...a)=>{li();const o=Vo(r),l=Us(e,r,t,a);return o(),ci(),l});return n?s.unshift(i):s.push(i),i}}const Ei=t=>(e,r=rn)=>{(!ic||t==="sp")&&Nh(t,(...n)=>e(...n),r)},iT=Ei("bm"),Bt=Ei("m"),Qv=Ei("bu"),Mh=Ei("u"),Lh=Ei("bum"),Ra=Ei("um"),oT=Ei("sp"),lT=Ei("rtg"),cT=Ei("rtc");function uT(t,e=rn){Nh("ec",t,e)}const Zv="components",k3="directives";function Tr(t,e){return e1(Zv,t,!0,e)||t}const dT=Symbol.for("v-ndc");function D3(t){return yr(t)?e1(Zv,t,!1)||t:t||dT}function P3(t){return e1(k3,t)}function e1(t,e,r=!0,n=!1){const s=nn||rn;if(s){const i=s.type;if(t===Zv){const o=Rg(i,!1);if(o&&(o===e||o===Tn(e)||o===Cd(Tn(e))))return i}const a=Xy(s[t]||i[t],e)||Xy(s.appContext[t],e);return!a&&n?i:a}}function Xy(t,e){return t&&(t[e]||t[Tn(e)]||t[Cd(Tn(e))])}function Ve(t,e,r,n){let s;const i=r&&r[n],a=dt(t);if(a||yr(t)){const o=a&&Sa(t);let l=!1,c=!1;o&&(l=!ws(t),c=ui(t),t=Ch(t)),s=new Array(t.length);for(let u=0,d=t.length;u<d;u++)s[u]=e(l?c?S0(Sn(t[u])):Sn(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(ur(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,i&&i[l]));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];s[l]=e(t[u],u,l,i&&i[l])}}else s=[];return r&&(r[n]=s),s}function F3(t,e){for(let r=0;r<e.length;r++){const n=e[r];if(dt(n))for(let s=0;s<n.length;s++)t[n[s].name]=n[s].fn;else n&&(t[n.name]=n.key?(...s)=>{const i=n.fn(...s);return i&&(i.key=n.key),i}:n.fn)}return t}function fT(t,e,r={},n,s){if(nn.ce||nn.parent&&qi(nn.parent)&&nn.parent.ce)return e!=="default"&&(r.name=e),L(),Xr(Fe,null,[st("slot",r,n&&n())],64);let i=t[e];i&&i._c&&(i._d=!1),L();const a=i&&t1(i(r)),o=r.key||a&&a.key,l=Xr(Fe,{key:(o&&!la(o)?o:`_${e}`)+(!a&&n?"_fb":"")},a||(n?n():[]),a&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function t1(t){return t.some(e=>fi(e)?!(e.type===jr||e.type===Fe&&!t1(e.children)):!0)?t:null}function R3(t,e){const r={};for(const n in t)r[e&&/[A-Z]/.test(n)?`on:${n}`:yu(n)]=t[n];return r}const _g=t=>t?GT(t)?Pd(t):_g(t.parent):null,Su=pr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_g(t.parent),$root:t=>_g(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>r1(t),$forceUpdate:t=>t.f||(t.f=()=>{qv(t.update)}),$nextTick:t=>t.n||(t.n=el.bind(t.proxy)),$watch:t=>uP.bind(t)}),Vp=(t,e)=>t!==qt&&!t.__isScriptSetup&&sr(t,e),Sg={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:a,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(Vp(n,e))return a[e]=1,n[e];if(s!==qt&&sr(s,e))return a[e]=2,s[e];if((c=t.propsOptions[0])&&sr(c,e))return a[e]=3,i[e];if(r!==qt&&sr(r,e))return a[e]=4,r[e];Tg&&(a[e]=0)}}const u=Su[e];let d,h;if(u)return e==="$attrs"&&Bn(t.attrs,"get",""),u(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(r!==qt&&sr(r,e))return a[e]=4,r[e];if(h=l.config.globalProperties,sr(h,e))return h[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return Vp(s,e)?(s[e]=r,!0):n!==qt&&sr(n,e)?(n[e]=r,!0):sr(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},a){let o;return!!r[a]||t!==qt&&sr(t,a)||Vp(e,a)||(o=i[0])&&sr(o,a)||sr(n,a)||sr(Su,a)||sr(s.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:sr(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}},O3=pr({},Sg,{get(t,e){if(e!==Symbol.unscopables)return Sg.get(t,e,t)},has(t,e){return e[0]!=="_"&&!oD(e)}});function N3(){return null}function M3(){return null}function L3(t){}function B3(t){}function U3(){return null}function $3(){}function V3(t,e){return null}function j3(){return hT().slots}function H3(){return hT().attrs}function hT(){const t=js();return t.setupContext||(t.setupContext=KT(t))}function rd(t){return dt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}function G3(t,e){const r=rd(t);for(const n in e){if(n.startsWith("__skip"))continue;let s=r[n];s?dt(s)||bt(s)?s=r[n]={type:s,default:e[n]}:s.default=e[n]:s===null&&(s=r[n]={default:e[n]}),s&&e[`__skip_${n}`]&&(s.skipFactory=!0)}return r}function W3(t,e){return!t||!e?t||e:dt(t)&&dt(e)?t.concat(e):pr({},rd(t),rd(e))}function z3(t,e){const r={};for(const n in t)e.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>t[n]});return r}function K3(t){const e=js();let r=t();return Dg(),Mv(r)&&(r=r.catch(n=>{throw Vo(e),n})),[r,()=>Vo(e)]}let Tg=!0;function q3(t){const e=r1(t),r=t.proxy,n=t.ctx;Tg=!1,e.beforeCreate&&Yy(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:m,activated:g,deactivated:v,beforeDestroy:y,beforeUnmount:x,destroyed:E,unmounted:I,render:P,renderTracked:w,renderTriggered:b,errorCaptured:T,serverPrefetch:_,expose:S,inheritAttrs:k,components:A,directives:D,filters:N}=e;if(c&&X3(c,n,null),a)for(const O in a){const B=a[O];bt(B)&&(n[O]=B.bind(r))}if(s){const O=s.call(r,r);ur(O)&&(t.data=gs(O))}if(Tg=!0,i)for(const O in i){const B=i[O],V=bt(B)?B.bind(r,r):bt(B.get)?B.get.bind(r,r):Ns,z=!bt(B)&&bt(B.set)?B.set.bind(r):Ns,H=_e({get:V,set:z});Object.defineProperty(n,O,{enumerable:!0,configurable:!0,get:()=>H.value,set:j=>H.value=j})}if(o)for(const O in o)pT(o[O],n,r,O);if(l){const O=bt(l)?l.call(r):l;Reflect.ownKeys(O).forEach(B=>{Tu(B,O[B])})}u&&Yy(u,t,"c");function F(O,B){dt(B)?B.forEach(V=>O(V.bind(r))):B&&O(B.bind(r))}if(F(iT,d),F(Bt,h),F(Qv,p),F(Mh,m),F(nT,g),F(sT,v),F(uT,T),F(cT,w),F(lT,b),F(Lh,x),F(Ra,I),F(oT,_),dt(S))if(S.length){const O=t.exposed||(t.exposed={});S.forEach(B=>{Object.defineProperty(O,B,{get:()=>r[B],set:V=>r[B]=V})})}else t.exposed||(t.exposed={});P&&t.render===Ns&&(t.render=P),k!=null&&(t.inheritAttrs=k),A&&(t.components=A),D&&(t.directives=D),_&&Jv(t)}function X3(t,e,r=Ns){dt(t)&&(t=wg(t));for(const n in t){const s=t[n];let i;ur(s)?"default"in s?i=As(s.from||n,s.default,!0):i=As(s.from||n):i=As(s),_r(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function Yy(t,e,r){Us(dt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function pT(t,e,r,n){let s=n.includes(".")?RT(r,n):()=>r[n];if(yr(t)){const i=e[t];bt(i)&&Ut(s,i)}else if(bt(t))Ut(s,t.bind(r));else if(ur(t))if(dt(t))t.forEach(i=>pT(i,e,r,n));else{const i=bt(t.handler)?t.handler.bind(r):e[t.handler];bt(i)&&Ut(s,i,t)}}function r1(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let l;return o?l=o:!s.length&&!r&&!n?l=e:(l={},s.length&&s.forEach(c=>C0(l,c,a,!0)),C0(l,e,a)),ur(e)&&i.set(e,l),l}function C0(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&C0(t,i,r,!0),s&&s.forEach(a=>C0(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=Y3[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Y3={data:Jy,props:Qy,emits:Qy,methods:ou,computed:ou,beforeCreate:Qn,created:Qn,beforeMount:Qn,mounted:Qn,beforeUpdate:Qn,updated:Qn,beforeDestroy:Qn,beforeUnmount:Qn,destroyed:Qn,unmounted:Qn,activated:Qn,deactivated:Qn,errorCaptured:Qn,serverPrefetch:Qn,components:ou,directives:ou,watch:Q3,provide:Jy,inject:J3};function Jy(t,e){return e?t?function(){return pr(bt(t)?t.call(this,this):t,bt(e)?e.call(this,this):e)}:e:t}function J3(t,e){return ou(wg(t),wg(e))}function wg(t){if(dt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Qn(t,e){return t?[...new Set([].concat(t,e))]:e}function ou(t,e){return t?pr(Object.create(null),t,e):e}function Qy(t,e){return t?dt(t)&&dt(e)?[...new Set([...t,...e])]:pr(Object.create(null),rd(t),rd(e??{})):e}function Q3(t,e){if(!t)return e;if(!e)return t;const r=pr(Object.create(null),t);for(const n in e)r[n]=Qn(t[n],e[n]);return r}function mT(){return{app:null,config:{isNativeTag:eD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Z3=0;function eP(t,e){return function(n,s=null){bt(n)||(n=pr({},n)),s!=null&&!ur(s)&&(s=null);const i=mT(),a=new WeakSet,o=[];let l=!1;const c=i.app={_uid:Z3++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:XT,get config(){return i.config},set config(u){},use(u,...d){return a.has(u)||(u&&bt(u.install)?(a.add(u),u.install(c,...d)):bt(u)&&(a.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,h){if(!l){const p=c._ceVNode||st(n,s);return p.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),d&&e?e(p,u):t(p,u,h),l=!0,c._container=u,u.__vue_app__=c,Pd(p.component)}},onUnmount(u){o.push(u)},unmount(){l&&(Us(o,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=Fo;Fo=c;try{return u()}finally{Fo=d}}};return c}}let Fo=null;function Tu(t,e){if(rn){let r=rn.provides;const n=rn.parent&&rn.parent.provides;n===r&&(r=rn.provides=Object.create(n)),r[t]=e}}function As(t,e,r=!1){const n=rn||nn;if(n||Fo){let s=Fo?Fo._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&bt(e)?e.call(n&&n.proxy):e}}function gT(){return!!(rn||nn||Fo)}const vT={},xT=()=>Object.create(vT),yT=t=>Object.getPrototypeOf(t)===vT;function tP(t,e,r,n=!1){const s={},i=xT();t.propsDefaults=Object.create(null),ET(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);r?t.props=n?s:Gv(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function rP(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,o=zt(s),[l]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Bh(t.emitsOptions,h))continue;const p=e[h];if(l)if(sr(i,h))p!==i[h]&&(i[h]=p,c=!0);else{const m=Tn(h);s[m]=Ag(l,o,m,p,t,!1)}else p!==i[h]&&(i[h]=p,c=!0)}}}else{ET(t,e,s,i)&&(c=!0);let u;for(const d in o)(!e||!sr(e,d)&&((u=ps(d))===d||!sr(e,u)))&&(l?r&&(r[d]!==void 0||r[u]!==void 0)&&(s[d]=Ag(l,o,d,void 0,t,!0)):delete s[d]);if(i!==o)for(const d in i)(!e||!sr(e,d))&&(delete i[d],c=!0)}c&&Wa(t.attrs,"set","")}function ET(t,e,r,n){const[s,i]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Gl(l))continue;const c=e[l];let u;s&&sr(s,u=Tn(l))?!i||!i.includes(u)?r[u]=c:(o||(o={}))[u]=c:Bh(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=zt(r),c=o||qt;for(let u=0;u<i.length;u++){const d=i[u];r[d]=Ag(s,l,d,c[d],t,!sr(c,d))}}return a}function Ag(t,e,r,n,s,i){const a=t[r];if(a!=null){const o=sr(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&bt(l)){const{propsDefaults:c}=s;if(r in c)n=c[r];else{const u=Vo(s);n=c[r]=l.call(null,e),u()}}else n=l;s.ce&&s.ce._setProp(r,n)}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===ps(r))&&(n=!0))}return n}const nP=new WeakMap;function bT(t,e,r=!1){const n=r?nP:e.propsCache,s=n.get(t);if(s)return s;const i=t.props,a={},o=[];let l=!1;if(!bt(t)){const u=d=>{l=!0;const[h,p]=bT(d,e,!0);pr(a,h),p&&o.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ur(t)&&n.set(t,jl),jl;if(dt(i))for(let u=0;u<i.length;u++){const d=Tn(i[u]);Zy(d)&&(a[d]=qt)}else if(i)for(const u in i){const d=Tn(u);if(Zy(d)){const h=i[u],p=a[d]=dt(h)||bt(h)?{type:h}:pr({},h),m=p.type;let g=!1,v=!0;if(dt(m))for(let y=0;y<m.length;++y){const x=m[y],E=bt(x)&&x.name;if(E==="Boolean"){g=!0;break}else E==="String"&&(v=!1)}else g=bt(m)&&m.name==="Boolean";p[0]=g,p[1]=v,(g||sr(p,"default"))&&o.push(d)}}const c=[a,o];return ur(t)&&n.set(t,c),c}function Zy(t){return t[0]!=="$"&&!Gl(t)}const n1=t=>t[0]==="_"||t==="$stable",s1=t=>dt(t)?t.map(hs):[hs(t)],sP=(t,e,r)=>{if(e._n)return e;const n=Rh((...s)=>s1(e(...s)),r);return n._c=!1,n},_T=(t,e,r)=>{const n=t._ctx;for(const s in t){if(n1(s))continue;const i=t[s];if(bt(i))e[s]=sP(s,i,n);else if(i!=null){const a=s1(i);e[s]=()=>a}}},ST=(t,e)=>{const r=s1(e);t.slots.default=()=>r},TT=(t,e,r)=>{for(const n in e)(r||!n1(n))&&(t[n]=e[n])},aP=(t,e,r)=>{const n=t.slots=xT();if(t.vnode.shapeFlag&32){const s=e.__;s&&vg(n,"__",s,!0);const i=e._;i?(TT(n,e,r),r&&vg(n,"_",i,!0)):_T(e,n)}else e&&ST(t,e)},iP=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,a=qt;if(n.shapeFlag&32){const o=e._;o?r&&o===1?i=!1:TT(s,e,r):(i=!e.$stable,_T(e,s)),a=e}else e&&(ST(t,e),a={default:1});if(i)for(const o in s)!n1(o)&&a[o]==null&&delete s[o]},Zr=LT;function wT(t){return CT(t)}function AT(t){return CT(t,m3)}function CT(t,e){const r=Th();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=Ns,insertStaticContent:m}=t,g=(q,J,ge,ae=null,se=null,le=null,xe=void 0,ve=null,Ce=!!J.dynamicChildren)=>{if(q===J)return;q&&!Zs(q,J)&&(ae=ue(q),j(q,se,le,!0),q=null),J.patchFlag===-2&&(Ce=!1,J.dynamicChildren=null);const{type:we,ref:Ge,shapeFlag:ke}=J;switch(we){case Xi:v(q,J,ge,ae);break;case jr:y(q,J,ge,ae);break;case Ro:q==null&&x(J,ge,ae,xe);break;case Fe:A(q,J,ge,ae,se,le,xe,ve,Ce);break;default:ke&1?P(q,J,ge,ae,se,le,xe,ve,Ce):ke&6?D(q,J,ge,ae,se,le,xe,ve,Ce):(ke&64||ke&128)&&we.process(q,J,ge,ae,se,le,xe,ve,Ce,Y)}Ge!=null&&se?Kl(Ge,q&&q.ref,le,J||q,!J):Ge==null&&q&&q.ref!=null&&Kl(q.ref,null,le,q,!0)},v=(q,J,ge,ae)=>{if(q==null)n(J.el=o(J.children),ge,ae);else{const se=J.el=q.el;J.children!==q.children&&c(se,J.children)}},y=(q,J,ge,ae)=>{q==null?n(J.el=l(J.children||""),ge,ae):J.el=q.el},x=(q,J,ge,ae)=>{[q.el,q.anchor]=m(q.children,J,ge,ae,q.el,q.anchor)},E=({el:q,anchor:J},ge,ae)=>{let se;for(;q&&q!==J;)se=h(q),n(q,ge,ae),q=se;n(J,ge,ae)},I=({el:q,anchor:J})=>{let ge;for(;q&&q!==J;)ge=h(q),s(q),q=ge;s(J)},P=(q,J,ge,ae,se,le,xe,ve,Ce)=>{J.type==="svg"?xe="svg":J.type==="math"&&(xe="mathml"),q==null?w(J,ge,ae,se,le,xe,ve,Ce):_(q,J,se,le,xe,ve,Ce)},w=(q,J,ge,ae,se,le,xe,ve)=>{let Ce,we;const{props:Ge,shapeFlag:ke,transition:$e,dirs:Be}=q;if(Ce=q.el=a(q.type,le,Ge&&Ge.is,Ge),ke&8?u(Ce,q.children):ke&16&&T(q.children,Ce,null,ae,se,jp(q,le),xe,ve),Be&&ba(q,null,ae,"created"),b(Ce,q,q.scopeId,xe,ae),Ge){for(const ze in Ge)ze!=="value"&&!Gl(ze)&&i(Ce,ze,null,Ge[ze],le,ae);"value"in Ge&&i(Ce,"value",null,Ge.value,le),(we=Ge.onVnodeBeforeMount)&&ds(we,ae,q)}Be&&ba(q,null,ae,"beforeMount");const We=IT(se,$e);We&&$e.beforeEnter(Ce),n(Ce,J,ge),((we=Ge&&Ge.onVnodeMounted)||We||Be)&&Zr(()=>{we&&ds(we,ae,q),We&&$e.enter(Ce),Be&&ba(q,null,ae,"mounted")},se)},b=(q,J,ge,ae,se)=>{if(ge&&p(q,ge),ae)for(let le=0;le<ae.length;le++)p(q,ae[le]);if(se){let le=se.subTree;if(J===le||k0(le.type)&&(le.ssContent===J||le.ssFallback===J)){const xe=se.vnode;b(q,xe,xe.scopeId,xe.slotScopeIds,se.parent)}}},T=(q,J,ge,ae,se,le,xe,ve,Ce=0)=>{for(let we=Ce;we<q.length;we++){const Ge=q[we]=ve?Bi(q[we]):hs(q[we]);g(null,Ge,J,ge,ae,se,le,xe,ve)}},_=(q,J,ge,ae,se,le,xe)=>{const ve=J.el=q.el;let{patchFlag:Ce,dynamicChildren:we,dirs:Ge}=J;Ce|=q.patchFlag&16;const ke=q.props||qt,$e=J.props||qt;let Be;if(ge&&Eo(ge,!1),(Be=$e.onVnodeBeforeUpdate)&&ds(Be,ge,J,q),Ge&&ba(J,q,ge,"beforeUpdate"),ge&&Eo(ge,!0),(ke.innerHTML&&$e.innerHTML==null||ke.textContent&&$e.textContent==null)&&u(ve,""),we?S(q.dynamicChildren,we,ve,ge,ae,jp(J,se),le):xe||B(q,J,ve,null,ge,ae,jp(J,se),le,!1),Ce>0){if(Ce&16)k(ve,ke,$e,ge,se);else if(Ce&2&&ke.class!==$e.class&&i(ve,"class",null,$e.class,se),Ce&4&&i(ve,"style",ke.style,$e.style,se),Ce&8){const We=J.dynamicProps;for(let ze=0;ze<We.length;ze++){const be=We[ze],ye=ke[be],Te=$e[be];(Te!==ye||be==="value")&&i(ve,be,ye,Te,se,ge)}}Ce&1&&q.children!==J.children&&u(ve,J.children)}else!xe&&we==null&&k(ve,ke,$e,ge,se);((Be=$e.onVnodeUpdated)||Ge)&&Zr(()=>{Be&&ds(Be,ge,J,q),Ge&&ba(J,q,ge,"updated")},ae)},S=(q,J,ge,ae,se,le,xe)=>{for(let ve=0;ve<J.length;ve++){const Ce=q[ve],we=J[ve],Ge=Ce.el&&(Ce.type===Fe||!Zs(Ce,we)||Ce.shapeFlag&198)?d(Ce.el):ge;g(Ce,we,Ge,null,ae,se,le,xe,!0)}},k=(q,J,ge,ae,se)=>{if(J!==ge){if(J!==qt)for(const le in J)!Gl(le)&&!(le in ge)&&i(q,le,J[le],null,se,ae);for(const le in ge){if(Gl(le))continue;const xe=ge[le],ve=J[le];xe!==ve&&le!=="value"&&i(q,le,ve,xe,se,ae)}"value"in ge&&i(q,"value",J.value,ge.value,se)}},A=(q,J,ge,ae,se,le,xe,ve,Ce)=>{const we=J.el=q?q.el:o(""),Ge=J.anchor=q?q.anchor:o("");let{patchFlag:ke,dynamicChildren:$e,slotScopeIds:Be}=J;Be&&(ve=ve?ve.concat(Be):Be),q==null?(n(we,ge,ae),n(Ge,ge,ae),T(J.children||[],ge,Ge,se,le,xe,ve,Ce)):ke>0&&ke&64&&$e&&q.dynamicChildren?(S(q.dynamicChildren,$e,ge,se,le,xe,ve),(J.key!=null||se&&J===se.subTree)&&a1(q,J,!0)):B(q,J,ge,Ge,se,le,xe,ve,Ce)},D=(q,J,ge,ae,se,le,xe,ve,Ce)=>{J.slotScopeIds=ve,q==null?J.shapeFlag&512?se.ctx.activate(J,ge,ae,xe,Ce):N(J,ge,ae,se,le,xe,Ce):R(q,J,Ce)},N=(q,J,ge,ae,se,le,xe)=>{const ve=q.component=HT(q,ae,se);if(kd(q)&&(ve.ctx.renderer=Y),WT(ve,!1,xe),ve.asyncDep){if(se&&se.registerDep(ve,F,xe),!q.el){const Ce=ve.subTree=st(jr);y(null,Ce,J,ge)}}else F(ve,q,J,ge,se,le,xe)},R=(q,J,ge)=>{const ae=J.component=q.component;if(gP(q,J,ge))if(ae.asyncDep&&!ae.asyncResolved){O(ae,J,ge);return}else ae.next=J,ae.update();else J.el=q.el,ae.vnode=J},F=(q,J,ge,ae,se,le,xe)=>{const ve=()=>{if(q.isMounted){let{next:ke,bu:$e,u:Be,parent:We,vnode:ze}=q;{const He=kT(q);if(He){ke&&(ke.el=ze.el,O(q,ke,xe)),He.asyncDep.then(()=>{q.isUnmounted||ve()});return}}let be=ke,ye;Eo(q,!1),ke?(ke.el=ze.el,O(q,ke,xe)):ke=ze,$e&&Wl($e),(ye=ke.props&&ke.props.onVnodeBeforeUpdate)&&ds(ye,We,ke,ze),Eo(q,!0);const Te=e0(q),Ne=q.subTree;q.subTree=Te,g(Ne,Te,d(Ne.el),ue(Ne),q,se,le),ke.el=Te.el,be===null&&Uh(q,Te.el),Be&&Zr(Be,se),(ye=ke.props&&ke.props.onVnodeUpdated)&&Zr(()=>ds(ye,We,ke,ze),se)}else{let ke;const{el:$e,props:Be}=J,{bm:We,m:ze,parent:be,root:ye,type:Te}=q,Ne=qi(J);if(Eo(q,!1),We&&Wl(We),!Ne&&(ke=Be&&Be.onVnodeBeforeMount)&&ds(ke,be,J),Eo(q,!0),$e&&X){const He=()=>{q.subTree=e0(q),X($e,q.subTree,q,se,null)};Ne&&Te.__asyncHydrate?Te.__asyncHydrate($e,q,He):He()}else{ye.ce&&ye.ce._def.shadowRoot!==!1&&ye.ce._injectChildStyle(Te);const He=q.subTree=e0(q);g(null,He,ge,ae,q,se,le),J.el=He.el}if(ze&&Zr(ze,se),!Ne&&(ke=Be&&Be.onVnodeMounted)){const He=J;Zr(()=>ds(ke,be,He),se)}(J.shapeFlag&256||be&&qi(be.vnode)&&be.vnode.shapeFlag&256)&&q.a&&Zr(q.a,se),q.isMounted=!0,J=ge=ae=null}};q.scope.on();const Ce=q.effect=new Yu(ve);q.scope.off();const we=q.update=Ce.run.bind(Ce),Ge=q.job=Ce.runIfDirty.bind(Ce);Ge.i=q,Ge.id=q.uid,Ce.scheduler=()=>qv(Ge),Eo(q,!0),we()},O=(q,J,ge)=>{J.component=q;const ae=q.vnode.props;q.vnode=J,q.next=null,rP(q,J.props,ae,ge),iP(q,J.children,ge),li(),jy(q),ci()},B=(q,J,ge,ae,se,le,xe,ve,Ce=!1)=>{const we=q&&q.children,Ge=q?q.shapeFlag:0,ke=J.children,{patchFlag:$e,shapeFlag:Be}=J;if($e>0){if($e&128){z(we,ke,ge,ae,se,le,xe,ve,Ce);return}else if($e&256){V(we,ke,ge,ae,se,le,xe,ve,Ce);return}}Be&8?(Ge&16&&he(we,se,le),ke!==we&&u(ge,ke)):Ge&16?Be&16?z(we,ke,ge,ae,se,le,xe,ve,Ce):he(we,se,le,!0):(Ge&8&&u(ge,""),Be&16&&T(ke,ge,ae,se,le,xe,ve,Ce))},V=(q,J,ge,ae,se,le,xe,ve,Ce)=>{q=q||jl,J=J||jl;const we=q.length,Ge=J.length,ke=Math.min(we,Ge);let $e;for($e=0;$e<ke;$e++){const Be=J[$e]=Ce?Bi(J[$e]):hs(J[$e]);g(q[$e],Be,ge,null,se,le,xe,ve,Ce)}we>Ge?he(q,se,le,!0,!1,ke):T(J,ge,ae,se,le,xe,ve,Ce,ke)},z=(q,J,ge,ae,se,le,xe,ve,Ce)=>{let we=0;const Ge=J.length;let ke=q.length-1,$e=Ge-1;for(;we<=ke&&we<=$e;){const Be=q[we],We=J[we]=Ce?Bi(J[we]):hs(J[we]);if(Zs(Be,We))g(Be,We,ge,null,se,le,xe,ve,Ce);else break;we++}for(;we<=ke&&we<=$e;){const Be=q[ke],We=J[$e]=Ce?Bi(J[$e]):hs(J[$e]);if(Zs(Be,We))g(Be,We,ge,null,se,le,xe,ve,Ce);else break;ke--,$e--}if(we>ke){if(we<=$e){const Be=$e+1,We=Be<Ge?J[Be].el:ae;for(;we<=$e;)g(null,J[we]=Ce?Bi(J[we]):hs(J[we]),ge,We,se,le,xe,ve,Ce),we++}}else if(we>$e)for(;we<=ke;)j(q[we],se,le,!0),we++;else{const Be=we,We=we,ze=new Map;for(we=We;we<=$e;we++){const yt=J[we]=Ce?Bi(J[we]):hs(J[we]);yt.key!=null&&ze.set(yt.key,we)}let be,ye=0;const Te=$e-We+1;let Ne=!1,He=0;const ot=new Array(Te);for(we=0;we<Te;we++)ot[we]=0;for(we=Be;we<=ke;we++){const yt=q[we];if(ye>=Te){j(yt,se,le,!0);continue}let Mt;if(yt.key!=null)Mt=ze.get(yt.key);else for(be=We;be<=$e;be++)if(ot[be-We]===0&&Zs(yt,J[be])){Mt=be;break}Mt===void 0?j(yt,se,le,!0):(ot[Mt-We]=we+1,Mt>=He?He=Mt:Ne=!0,g(yt,J[Mt],ge,null,se,le,xe,ve,Ce),ye++)}const gt=Ne?oP(ot):jl;for(be=gt.length-1,we=Te-1;we>=0;we--){const yt=We+we,Mt=J[yt],ft=yt+1<Ge?J[yt+1].el:ae;ot[we]===0?g(null,Mt,ge,ft,se,le,xe,ve,Ce):Ne&&(be<0||we!==gt[be]?H(Mt,ge,ft,2):be--)}}},H=(q,J,ge,ae,se=null)=>{const{el:le,type:xe,transition:ve,children:Ce,shapeFlag:we}=q;if(we&6){H(q.component.subTree,J,ge,ae);return}if(we&128){q.suspense.move(J,ge,ae);return}if(we&64){xe.move(q,J,ge,Y);return}if(xe===Fe){n(le,J,ge);for(let ke=0;ke<Ce.length;ke++)H(Ce[ke],J,ge,ae);n(q.anchor,J,ge);return}if(xe===Ro){E(q,J,ge);return}if(ae!==2&&we&1&&ve)if(ae===0)ve.beforeEnter(le),n(le,J,ge),Zr(()=>ve.enter(le),se);else{const{leave:ke,delayLeave:$e,afterLeave:Be}=ve,We=()=>{q.ctx.isUnmounted?s(le):n(le,J,ge)},ze=()=>{ke(le,()=>{We(),Be&&Be()})};$e?$e(le,We,ze):ze()}else n(le,J,ge)},j=(q,J,ge,ae=!1,se=!1)=>{const{type:le,props:xe,ref:ve,children:Ce,dynamicChildren:we,shapeFlag:Ge,patchFlag:ke,dirs:$e,cacheIndex:Be}=q;if(ke===-2&&(se=!1),ve!=null&&(li(),Kl(ve,null,ge,q,!0),ci()),Be!=null&&(J.renderCache[Be]=void 0),Ge&256){J.ctx.deactivate(q);return}const We=Ge&1&&$e,ze=!qi(q);let be;if(ze&&(be=xe&&xe.onVnodeBeforeUnmount)&&ds(be,J,q),Ge&6)re(q.component,ge,ae);else{if(Ge&128){q.suspense.unmount(ge,ae);return}We&&ba(q,null,J,"beforeUnmount"),Ge&64?q.type.remove(q,J,ge,Y,ae):we&&!we.hasOnce&&(le!==Fe||ke>0&&ke&64)?he(we,J,ge,!1,!0):(le===Fe&&ke&384||!se&&Ge&16)&&he(Ce,J,ge),ae&&W(q)}(ze&&(be=xe&&xe.onVnodeUnmounted)||We)&&Zr(()=>{be&&ds(be,J,q),We&&ba(q,null,J,"unmounted")},ge)},W=q=>{const{type:J,el:ge,anchor:ae,transition:se}=q;if(J===Fe){K(ge,ae);return}if(J===Ro){I(q);return}const le=()=>{s(ge),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(q.shapeFlag&1&&se&&!se.persisted){const{leave:xe,delayLeave:ve}=se,Ce=()=>xe(ge,le);ve?ve(q.el,le,Ce):Ce()}else le()},K=(q,J)=>{let ge;for(;q!==J;)ge=h(q),s(q),q=ge;s(J)},re=(q,J,ge)=>{const{bum:ae,scope:se,job:le,subTree:xe,um:ve,m:Ce,a:we,parent:Ge,slots:{__:ke}}=q;I0(Ce),I0(we),ae&&Wl(ae),Ge&&dt(ke)&&ke.forEach($e=>{Ge.renderCache[$e]=void 0}),se.stop(),le&&(le.flags|=8,j(xe,q,J,ge)),ve&&Zr(ve,J),Zr(()=>{q.isUnmounted=!0},J),J&&J.pendingBranch&&!J.isUnmounted&&q.asyncDep&&!q.asyncResolved&&q.suspenseId===J.pendingId&&(J.deps--,J.deps===0&&J.resolve())},he=(q,J,ge,ae=!1,se=!1,le=0)=>{for(let xe=le;xe<q.length;xe++)j(q[xe],J,ge,ae,se)},ue=q=>{if(q.shapeFlag&6)return ue(q.component.subTree);if(q.shapeFlag&128)return q.suspense.next();const J=h(q.anchor||q.el),ge=J&&J[XS];return ge?h(ge):J};let pe=!1;const te=(q,J,ge)=>{q==null?J._vnode&&j(J._vnode,null,null,!0):g(J._vnode||null,q,J,null,null,null,ge),J._vnode=q,pe||(pe=!0,jy(),A0(),pe=!1)},Y={p:g,um:j,m:H,r:W,mt:N,mc:T,pc:B,pbc:S,n:ue,o:t};let Ee,X;return e&&([Ee,X]=e(Y)),{render:te,hydrate:Ee,createApp:eP(te,Ee)}}function jp({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Eo({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function IT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function a1(t,e,r=!1){const n=t.children,s=e.children;if(dt(n)&&dt(s))for(let i=0;i<n.length;i++){const a=n[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=Bi(s[i]),o.el=a.el),!r&&o.patchFlag!==-2&&a1(a,o)),o.type===Xi&&(o.el=a.el),o.type===jr&&!o.el&&(o.el=a.el)}}function oP(t){const e=t.slice(),r=[0];let n,s,i,a,o;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=r[r.length-1],t[s]<c){e[n]=s,r.push(n);continue}for(i=0,a=r.length-1;i<a;)o=i+a>>1,t[r[o]]<c?i=o+1:a=o;c<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,a=r[i-1];i-- >0;)r[i]=a,a=e[a];return r}function kT(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:kT(e)}function I0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const DT=Symbol.for("v-scx"),PT=()=>As(DT);function lP(t,e){return Dd(t,null,e)}function cP(t,e){return Dd(t,null,{flush:"post"})}function FT(t,e){return Dd(t,null,{flush:"sync"})}function Ut(t,e,r){return Dd(t,e,r)}function Dd(t,e,r=qt){const{immediate:n,deep:s,flush:i,once:a}=r,o=pr({},r),l=e&&n||!e&&i!=="post";let c;if(ic){if(i==="sync"){const p=PT();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Ns,p.resume=Ns,p.pause=Ns,p}}const u=rn;o.call=(p,m,g)=>Us(p,u,m,g);let d=!1;i==="post"?o.scheduler=p=>{Zr(p,u&&u.suspense)}:i!=="sync"&&(d=!0,o.scheduler=(p,m)=>{m?p():qv(p)}),o.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=JD(t,e,o);return ic&&(c?c.push(h):l&&h()),h}function uP(t,e,r){const n=this.proxy,s=yr(t)?t.includes(".")?RT(n,t):()=>n[t]:t.bind(n,n);let i;bt(e)?i=e:(i=e.handler,r=e);const a=Vo(this),o=Dd(s,i.bind(n),r);return a(),o}function RT(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}function dP(t,e,r=qt){const n=js(),s=Tn(e),i=ps(e),a=OT(t,s),o=$S((l,c)=>{let u,d=qt,h;return FT(()=>{const p=t[s];ts(u,p)&&(u=p,c())}),{get(){return l(),r.get?r.get(u):u},set(p){const m=r.set?r.set(p):p;if(!ts(m,u)&&!(d!==qt&&ts(p,d)))return;const g=n.vnode.props;g&&(e in g||s in g||i in g)&&(`onUpdate:${e}`in g||`onUpdate:${s}`in g||`onUpdate:${i}`in g)||(u=p,c()),n.emit(`update:${e}`,m),ts(p,m)&&ts(p,d)&&!ts(m,h)&&c(),d=p,h=m}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||qt:o,done:!1}:{done:!0}}}},o}const OT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Tn(e)}Modifiers`]||t[`${ps(e)}Modifiers`];function fP(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||qt;let s=r;const i=e.startsWith("update:"),a=i&&OT(n,e.slice(7));a&&(a.trim&&(s=r.map(u=>yr(u)?u.trim():u)),a.number&&(s=r.map(E0)));let o,l=n[o=yu(e)]||n[o=yu(Tn(e))];!l&&i&&(l=n[o=yu(ps(e))]),l&&Us(l,t,6,s);const c=n[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Us(c,t,6,s)}}function NT(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let a={},o=!1;if(!bt(t)){const l=c=>{const u=NT(c,e,!0);u&&(o=!0,pr(a,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!o?(ur(t)&&n.set(t,null),null):(dt(i)?i.forEach(l=>a[l]=null):pr(a,i),ur(t)&&n.set(t,a),a)}function Bh(t,e){return!t||!Ad(e)?!1:(e=e.slice(2).replace(/Once$/,""),sr(t,e[0].toLowerCase()+e.slice(1))||sr(t,ps(e))||sr(t,e))}function e0(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:d,data:h,setupState:p,ctx:m,inheritAttrs:g}=t,v=td(t);let y,x;try{if(r.shapeFlag&4){const I=s||n,P=I;y=hs(c.call(P,I,u,d,p,h,m)),x=o}else{const I=e;y=hs(I.length>1?I(d,{attrs:o,slots:a,emit:l}):I(d,null)),x=e.props?o:pP(o)}}catch(I){wu.length=0,Zo(I,t,1),y=st(jr)}let E=y;if(x&&g!==!1){const I=Object.keys(x),{shapeFlag:P}=E;I.length&&P&7&&(i&&I.some(Ov)&&(x=mP(x,i)),E=Ia(E,x,!1,!0))}return r.dirs&&(E=Ia(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(r.dirs):r.dirs),r.transition&&di(E,r.transition),y=E,td(v),y}function hP(t,e=!0){let r;for(let n=0;n<t.length;n++){const s=t[n];if(fi(s)){if(s.type!==jr||s.children==="v-if"){if(r)return;r=s}}else return}return r}const pP=t=>{let e;for(const r in t)(r==="class"||r==="style"||Ad(r))&&((e||(e={}))[r]=t[r]);return e},mP=(t,e)=>{const r={};for(const n in t)(!Ov(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function gP(t,e,r){const{props:n,children:s,component:i}=t,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?eE(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(a[h]!==n[h]&&!Bh(c,h))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?eE(n,a,c):!0:!!a;return!1}function eE(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!Bh(r,i))return!0}return!1}function Uh({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const k0=t=>t.__isSuspense;let Cg=0;const vP={name:"Suspense",__isSuspense:!0,process(t,e,r,n,s,i,a,o,l,c){if(t==null)yP(e,r,n,s,i,a,o,l,c);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}EP(t,e,r,n,s,a,o,l,c)}},hydrate:bP,normalize:_P},xP=vP;function nd(t,e){const r=t.props&&t.props[e];bt(r)&&r()}function yP(t,e,r,n,s,i,a,o,l){const{p:c,o:{createElement:u}}=l,d=u("div"),h=t.suspense=MT(t,s,n,e,d,r,i,a,o,l);c(null,h.pendingBranch=t.ssContent,d,null,n,h,i,a),h.deps>0?(nd(t,"onPending"),nd(t,"onFallback"),c(null,t.ssFallback,e,r,n,null,i,a),ql(h,t.ssFallback)):h.resolve(!1,!0)}function EP(t,e,r,n,s,i,a,o,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const h=e.ssContent,p=e.ssFallback,{activeBranch:m,pendingBranch:g,isInFallback:v,isHydrating:y}=d;if(g)d.pendingBranch=h,Zs(h,g)?(l(g,h,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0?d.resolve():v&&(y||(l(m,p,r,n,s,null,i,a,o),ql(d,p)))):(d.pendingId=Cg++,y?(d.isHydrating=!1,d.activeBranch=g):c(g,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),v?(l(null,h,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0?d.resolve():(l(m,p,r,n,s,null,i,a,o),ql(d,p))):m&&Zs(h,m)?(l(m,h,r,n,s,d,i,a,o),d.resolve(!0)):(l(null,h,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0&&d.resolve()));else if(m&&Zs(h,m))l(m,h,r,n,s,d,i,a,o),ql(d,h);else if(nd(e,"onPending"),d.pendingBranch=h,h.shapeFlag&512?d.pendingId=h.component.suspenseId:d.pendingId=Cg++,l(null,h,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0)d.resolve();else{const{timeout:x,pendingId:E}=d;x>0?setTimeout(()=>{d.pendingId===E&&d.fallback(p)},x):x===0&&d.fallback(p)}}function MT(t,e,r,n,s,i,a,o,l,c,u=!1){const{p:d,m:h,um:p,n:m,o:{parentNode:g,remove:v}}=c;let y;const x=SP(t);x&&e&&e.pendingBranch&&(y=e.pendingId,e.deps++);const E=t.props?b0(t.props.timeout):void 0,I=i,P={vnode:t,parent:e,parentComponent:r,namespace:a,container:n,hiddenContainer:s,deps:0,pendingId:Cg++,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(w=!1,b=!1){const{vnode:T,activeBranch:_,pendingBranch:S,pendingId:k,effects:A,parentComponent:D,container:N}=P;let R=!1;P.isHydrating?P.isHydrating=!1:w||(R=_&&S.transition&&S.transition.mode==="out-in",R&&(_.transition.afterLeave=()=>{k===P.pendingId&&(h(S,N,i===I?m(_):i,0),Zu(A))}),_&&(g(_.el)===N&&(i=m(_)),p(_,D,P,!0)),R||h(S,N,i,0)),ql(P,S),P.pendingBranch=null,P.isInFallback=!1;let F=P.parent,O=!1;for(;F;){if(F.pendingBranch){F.effects.push(...A),O=!0;break}F=F.parent}!O&&!R&&Zu(A),P.effects=[],x&&e&&e.pendingBranch&&y===e.pendingId&&(e.deps--,e.deps===0&&!b&&e.resolve()),nd(T,"onResolve")},fallback(w){if(!P.pendingBranch)return;const{vnode:b,activeBranch:T,parentComponent:_,container:S,namespace:k}=P;nd(b,"onFallback");const A=m(T),D=()=>{P.isInFallback&&(d(null,w,S,A,_,null,k,o,l),ql(P,w))},N=w.transition&&w.transition.mode==="out-in";N&&(T.transition.afterLeave=D),P.isInFallback=!0,p(T,_,null,!0),N||D()},move(w,b,T){P.activeBranch&&h(P.activeBranch,w,b,T),P.container=w},next(){return P.activeBranch&&m(P.activeBranch)},registerDep(w,b,T){const _=!!P.pendingBranch;_&&P.deps++;const S=w.vnode.el;w.asyncDep.catch(k=>{Zo(k,w,0)}).then(k=>{if(w.isUnmounted||P.isUnmounted||P.pendingId!==w.suspenseId)return;w.asyncResolved=!0;const{vnode:A}=w;Pg(w,k,!1),S&&(A.el=S);const D=!S&&w.subTree.el;b(w,A,g(S||w.subTree.el),S?null:m(w.subTree),P,a,T),D&&v(D),Uh(w,A.el),_&&--P.deps===0&&P.resolve()})},unmount(w,b){P.isUnmounted=!0,P.activeBranch&&p(P.activeBranch,r,w,b),P.pendingBranch&&p(P.pendingBranch,r,w,b)}};return P}function bP(t,e,r,n,s,i,a,o,l){const c=e.suspense=MT(e,n,r,t.parentNode,document.createElement("div"),null,s,i,a,o,!0),u=l(t,c.pendingBranch=e.ssContent,r,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function _P(t){const{shapeFlag:e,children:r}=t,n=e&32;t.ssContent=tE(n?r.default:r),t.ssFallback=n?tE(r.fallback):st(jr)}function tE(t){let e;if(bt(t)){const r=$o&&t._c;r&&(t._d=!1,L()),t=t(),r&&(t._d=!0,e=jn,BT())}return dt(t)&&(t=hP(t)),t=hs(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(r=>r!==t)),t}function LT(t,e){e&&e.pendingBranch?dt(t)?e.effects.push(...t):e.effects.push(t):Zu(t)}function ql(t,e){t.activeBranch=e;const{vnode:r,parentComponent:n}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;r.el=s,n&&n.subTree===r&&(n.vnode.el=s,Uh(n,s))}function SP(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Fe=Symbol.for("v-fgt"),Xi=Symbol.for("v-txt"),jr=Symbol.for("v-cmt"),Ro=Symbol.for("v-stc"),wu=[];let jn=null;function L(t=!1){wu.push(jn=t?null:[])}function BT(){wu.pop(),jn=wu[wu.length-1]||null}let $o=1;function Ig(t,e=!1){$o+=t,t<0&&jn&&e&&(jn.hasOnce=!0)}function UT(t){return t.dynamicChildren=$o>0?jn||jl:null,BT(),$o>0&&jn&&jn.push(t),t}function U(t,e,r,n,s,i){return UT(f(t,e,r,n,s,i,!0))}function Xr(t,e,r,n,s){return UT(st(t,e,r,n,s,!0))}function fi(t){return t?t.__v_isVNode===!0:!1}function Zs(t,e){return t.type===e.type&&t.key===e.key}function TP(t){}const $T=({key:t})=>t??null,t0=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?yr(t)||_r(t)||bt(t)?{i:nn,r:t,k:e,f:!!r}:t:null);function f(t,e=null,r=null,n=0,s=null,i=t===Fe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$T(e),ref:e&&t0(e),scopeId:Fh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:nn};return o?(i1(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=yr(r)?8:16),$o>0&&!a&&jn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&jn.push(l),l}const st=wP;function wP(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===dT)&&(t=jr),fi(t)){const o=Ia(t,e,!0);return r&&i1(o,r),$o>0&&!i&&jn&&(o.shapeFlag&6?jn[jn.indexOf(t)]=o:jn.push(o)),o.patchFlag=-2,o}if(FP(t)&&(t=t.__vccOpts),e){e=VT(e);let{class:o,style:l}=e;o&&!yr(o)&&(e.class=Ze(o)),ur(l)&&(Dh(l)&&!dt(l)&&(l=pr({},l)),e.style=_n(l))}const a=yr(t)?1:k0(t)?128:YS(t)?64:ur(t)?4:bt(t)?2:0;return f(t,e,r,n,s,a,i,!0)}function VT(t){return t?Dh(t)||yT(t)?pr({},t):t:null}function Ia(t,e,r=!1,n=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=t,c=e?jT(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&$T(c),ref:e&&e.ref?r&&i?dt(i)?i.concat(t0(e)):[i,t0(e)]:t0(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ia(t.ssContent),ssFallback:t.ssFallback&&Ia(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&di(u,l.clone(u)),u}function Oe(t=" ",e=0){return st(Xi,null,t,e)}function tn(t,e){const r=st(Ro,null,t);return r.staticCount=e,r}function Se(t="",e=!1){return e?(L(),Xr(jr,null,t)):st(jr,null,t)}function hs(t){return t==null||typeof t=="boolean"?st(jr):dt(t)?st(Fe,null,t.slice()):fi(t)?Bi(t):st(Xi,null,String(t))}function Bi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ia(t)}function i1(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(dt(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),i1(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!yT(e)?e._ctx=nn:s===3&&nn&&(nn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else bt(e)?(e={default:e,_ctx:nn},r=32):(e=String(e),n&64?(r=16,e=[Oe(e)]):r=8);t.children=e,t.shapeFlag|=r}function jT(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Ze([e.class,n.class]));else if(s==="style")e.style=_n([e.style,n.style]);else if(Ad(s)){const i=e[s],a=n[s];a&&i!==a&&!(dt(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=n[s])}return e}function ds(t,e,r,n=null){Us(t,e,7,[r,n])}const AP=mT();let CP=0;function HT(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||AP,i={uid:CP++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Bv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bT(n,s),emitsOptions:NT(n,s),emit:null,emitted:null,propsDefaults:qt,inheritAttrs:n.inheritAttrs,ctx:qt,data:qt,props:qt,attrs:qt,slots:qt,refs:qt,setupState:qt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=fP.bind(null,i),t.ce&&t.ce(i),i}let rn=null;const js=()=>rn||nn;let D0,kg;{const t=Th(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};D0=e("__VUE_INSTANCE_SETTERS__",r=>rn=r),kg=e("__VUE_SSR_SETTERS__",r=>ic=r)}const Vo=t=>{const e=rn;return D0(t),t.scope.on(),()=>{t.scope.off(),D0(e)}},Dg=()=>{rn&&rn.scope.off(),D0(null)};function GT(t){return t.vnode.shapeFlag&4}let ic=!1;function WT(t,e=!1,r=!1){e&&kg(e);const{props:n,children:s}=t.vnode,i=GT(t);tP(t,n,i,e),aP(t,s,r||e);const a=i?IP(t,e):void 0;return e&&kg(!1),a}function IP(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Sg);const{setup:n}=r;if(n){li();const s=t.setupContext=n.length>1?KT(t):null,i=Vo(t),a=wc(n,t,0,[t.props,s]),o=Mv(a);if(ci(),i(),(o||t.sp)&&!qi(t)&&Jv(t),o){if(a.then(Dg,Dg),e)return a.then(l=>{Pg(t,l,e)}).catch(l=>{Zo(l,t,0)});t.asyncDep=a}else Pg(t,a,e)}else zT(t,e)}function Pg(t,e,r){bt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ur(e)&&(t.setupState=Kv(e)),zT(t,r)}let P0,Fg;function kP(t){P0=t,Fg=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,O3))}}const DP=()=>!P0;function zT(t,e,r){const n=t.type;if(!t.render){if(!e&&P0&&!n.render){const s=n.template||r1(t).template;if(s){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,c=pr(pr({isCustomElement:i,delimiters:o},a),l);n.render=P0(s,c)}}t.render=n.render||Ns,Fg&&Fg(t)}{const s=Vo(t);li();try{q3(t)}finally{ci(),s()}}}const PP={get(t,e){return Bn(t,"get",""),t[e]}};function KT(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,PP),slots:t.slots,emit:t.emit,expose:e}}function Pd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Kv(Ph(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Su)return Su[r](t)},has(e,r){return r in e||r in Su}})):t.proxy}function Rg(t,e=!0){return bt(t)?t.displayName||t.name:t.name||e&&t.__name}function FP(t){return bt(t)&&"__vccOpts"in t}const _e=(t,e)=>KD(t,e,ic);function $h(t,e,r){const n=arguments.length;return n===2?ur(e)&&!dt(e)?fi(e)?st(t,null,[e]):st(t,e):st(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&fi(r)&&(r=[r]),st(t,e,r))}function RP(){}function OP(t,e,r,n){const s=r[n];if(s&&qT(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=n,r[n]=i}function qT(t,e){const r=t.memo;if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(ts(r[n],e[n]))return!1;return $o>0&&jn&&jn.push(t),!0}const XT="3.5.17",NP=Ns,MP=r3,LP=Dl,BP=qS,UP={createComponentInstance:HT,setupComponent:WT,renderComponentRoot:e0,setCurrentRenderingInstance:td,isVNode:fi,normalizeVNode:hs,getComponentPublicInstance:Pd,ensureValidVNode:t1,pushWarningContext:QD,popWarningContext:ZD},$P=UP,VP=null,jP=null,HP=null;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Og;const rE=typeof window<"u"&&window.trustedTypes;if(rE)try{Og=rE.createPolicy("vue",{createHTML:t=>t})}catch{}const YT=Og?t=>Og.createHTML(t):t=>t,GP="http://www.w3.org/2000/svg",WP="http://www.w3.org/1998/Math/MathML",Ga=typeof document<"u"?document:null,nE=Ga&&Ga.createElement("template"),zP={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?Ga.createElementNS(GP,t):e==="mathml"?Ga.createElementNS(WP,t):r?Ga.createElement(t,{is:r}):Ga.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>Ga.createTextNode(t),createComment:t=>Ga.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ga.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const a=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{nE.innerHTML=YT(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=nE.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Ii="transition",Kc="animation",oc=Symbol("_vtc"),JT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},QT=pr({},Yv,JT),KP=t=>(t.displayName="Transition",t.props=QT,t),qP=KP((t,{slots:e})=>$h(tT,ZT(t),e)),bo=(t,e=[])=>{dt(t)?t.forEach(r=>r(...e)):t&&t(...e)},sE=t=>t?dt(t)?t.some(e=>e.length>1):t.length>1:!1;function ZT(t){const e={};for(const A in t)A in JT||(e[A]=t[A]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=i,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,m=XP(s),g=m&&m[0],v=m&&m[1],{onBeforeEnter:y,onEnter:x,onEnterCancelled:E,onLeave:I,onLeaveCancelled:P,onBeforeAppear:w=y,onAppear:b=x,onAppearCancelled:T=E}=e,_=(A,D,N,R)=>{A._enterCancelled=R,Ri(A,D?u:o),Ri(A,D?c:a),N&&N()},S=(A,D)=>{A._isLeaving=!1,Ri(A,d),Ri(A,p),Ri(A,h),D&&D()},k=A=>(D,N)=>{const R=A?b:x,F=()=>_(D,A,N);bo(R,[D,F]),aE(()=>{Ri(D,A?l:i),xa(D,A?u:o),sE(R)||iE(D,n,g,F)})};return pr(e,{onBeforeEnter(A){bo(y,[A]),xa(A,i),xa(A,a)},onBeforeAppear(A){bo(w,[A]),xa(A,l),xa(A,c)},onEnter:k(!1),onAppear:k(!0),onLeave(A,D){A._isLeaving=!0;const N=()=>S(A,D);xa(A,d),A._enterCancelled?(xa(A,h),Ng()):(Ng(),xa(A,h)),aE(()=>{A._isLeaving&&(Ri(A,d),xa(A,p),sE(I)||iE(A,n,v,N))}),bo(I,[A,N])},onEnterCancelled(A){_(A,!1,void 0,!0),bo(E,[A])},onAppearCancelled(A){_(A,!0,void 0,!0),bo(T,[A])},onLeaveCancelled(A){S(A),bo(P,[A])}})}function XP(t){if(t==null)return null;if(ur(t))return[Hp(t.enter),Hp(t.leave)];{const e=Hp(t);return[e,e]}}function Hp(t){return b0(t)}function xa(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[oc]||(t[oc]=new Set)).add(e)}function Ri(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[oc];r&&(r.delete(e),r.size||(t[oc]=void 0))}function aE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let YP=0;function iE(t,e,r,n){const s=t._endId=++YP,i=()=>{s===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:a,timeout:o,propCount:l}=ew(t,e);if(!a)return n();const c=a+"end";let u=0;const d=()=>{t.removeEventListener(c,h),i()},h=p=>{p.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),t.addEventListener(c,h)}function ew(t,e){const r=window.getComputedStyle(t),n=m=>(r[m]||"").split(", "),s=n(`${Ii}Delay`),i=n(`${Ii}Duration`),a=oE(s,i),o=n(`${Kc}Delay`),l=n(`${Kc}Duration`),c=oE(o,l);let u=null,d=0,h=0;e===Ii?a>0&&(u=Ii,d=a,h=i.length):e===Kc?c>0&&(u=Kc,d=c,h=l.length):(d=Math.max(a,c),u=d>0?a>c?Ii:Kc:null,h=u?u===Ii?i.length:l.length:0);const p=u===Ii&&/\b(transform|all)(,|$)/.test(n(`${Ii}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:p}}function oE(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>lE(r)+lE(t[n])))}function lE(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Ng(){return document.body.offsetHeight}function JP(t,e,r){const n=t[oc];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const F0=Symbol("_vod"),tw=Symbol("_vsh"),rw={beforeMount(t,{value:e},{transition:r}){t[F0]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):qc(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),qc(t,!0),n.enter(t)):n.leave(t,()=>{qc(t,!1)}):qc(t,e))},beforeUnmount(t,{value:e}){qc(t,e)}};function qc(t,e){t.style.display=e?t[F0]:"none",t[tw]=!e}function QP(){rw.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const nw=Symbol("");function ZP(t){const e=js();if(!e)return;const r=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>R0(i,s))},n=()=>{const s=t(e.proxy);e.ce?R0(e.ce,s):Mg(e.subTree,s),r(s)};Qv(()=>{Zu(n)}),Bt(()=>{Ut(n,Ns,{flush:"post"});const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),Ra(()=>s.disconnect())})}function Mg(t,e){if(t.shapeFlag&128){const r=t.suspense;t=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{Mg(r.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)R0(t.el,e);else if(t.type===Fe)t.children.forEach(r=>Mg(r,e));else if(t.type===Ro){let{el:r,anchor:n}=t;for(;r&&(R0(r,e),r!==n);)r=r.nextSibling}}function R0(t,e){if(t.nodeType===1){const r=t.style;let n="";for(const s in e)r.setProperty(`--${s}`,e[s]),n+=`--${s}: ${e[s]};`;r[nw]=n}}const eF=/(^|;)\s*display\s*:/;function tF(t,e,r){const n=t.style,s=yr(r);let i=!1;if(r&&!s){if(e)if(yr(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&r0(n,o,"")}else for(const a in e)r[a]==null&&r0(n,a,"");for(const a in r)a==="display"&&(i=!0),r0(n,a,r[a])}else if(s){if(e!==r){const a=n[nw];a&&(r+=";"+a),n.cssText=r,i=eF.test(r)}}else e&&t.removeAttribute("style");F0 in t&&(t[F0]=i?n.display:"",t[tw]&&(n.display="none"))}const cE=/\s*!important$/;function r0(t,e,r){if(dt(r))r.forEach(n=>r0(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=rF(t,e);cE.test(r)?t.setProperty(ps(n),r.replace(cE,""),"important"):t[n]=r}}const uE=["Webkit","Moz","ms"],Gp={};function rF(t,e){const r=Gp[e];if(r)return r;let n=Tn(e);if(n!=="filter"&&n in t)return Gp[e]=n;n=Cd(n);for(let s=0;s<uE.length;s++){const i=uE[s]+n;if(i in t)return Gp[e]=i}return e}const dE="http://www.w3.org/1999/xlink";function fE(t,e,r,n,s,i=pD(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(dE,e.slice(6,e.length)):t.setAttributeNS(dE,e,r):r==null||i&&!ES(r)?t.removeAttribute(e):t.setAttribute(e,i?"":la(r)?String(r):r)}function hE(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?YT(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=ES(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(s||e)}function Ka(t,e,r,n){t.addEventListener(e,r,n)}function nF(t,e,r,n){t.removeEventListener(e,r,n)}const pE=Symbol("_vei");function sF(t,e,r,n,s=null){const i=t[pE]||(t[pE]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=aF(e);if(n){const c=i[e]=lF(n,s);Ka(t,o,c,l)}else a&&(nF(t,o,a,l),i[e]=void 0)}}const mE=/(?:Once|Passive|Capture)$/;function aF(t){let e;if(mE.test(t)){e={};let n;for(;n=t.match(mE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ps(t.slice(2)),e]}let Wp=0;const iF=Promise.resolve(),oF=()=>Wp||(iF.then(()=>Wp=0),Wp=Date.now());function lF(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Us(cF(n,r.value),e,5,[n])};return r.value=t,r.attached=oF(),r}function cF(t,e){if(dt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const gE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,uF=(t,e,r,n,s,i)=>{const a=s==="svg";e==="class"?JP(t,n,a):e==="style"?tF(t,r,n):Ad(e)?Ov(e)||sF(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):dF(t,e,n,a))?(hE(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&fE(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!yr(n))?hE(t,Tn(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),fE(t,e,n,a))};function dF(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&gE(e)&&bt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return gE(e)&&yr(r)?!1:e in t}const vE={};/*! #__NO_SIDE_EFFECTS__ */function sw(t,e,r){const n=Id(t,e);_h(n)&&pr(n,e);class s extends Vh{constructor(a){super(n,a,r)}}return s.def=n,s}/*! #__NO_SIDE_EFFECTS__ */const fF=(t,e)=>sw(t,e,gw),hF=typeof HTMLElement<"u"?HTMLElement:class{};class Vh extends hF{constructor(e,r={},n=N0){super(),this._def=e,this._props=r,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==N0?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Vh){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,el(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:a}=n;let o;if(i&&!dt(i))for(const l in i){const c=i[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=b0(this._props[l])),(o||(o=Object.create(null)))[Tn(l)]=!0)}this._numberProps=o,this._resolveProps(n),this.shadowRoot&&this._applyStyles(a),this._mount(n)},r=this._def.__asyncLoader;r?this._pendingResolve=r().then(n=>{n.configureApp=this._def.configureApp,e(this._def=n,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const r=this._instance&&this._instance.exposed;if(r)for(const n in r)sr(this,n)||Object.defineProperty(this,n,{get:()=>Z(r[n])})}_resolveProps(e){const{props:r}=e,n=dt(r)?r:Object.keys(r||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s]);for(const s of n.map(Tn))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const r=this.hasAttribute(e);let n=r?this.getAttribute(e):vE;const s=Tn(e);r&&this._numberProps&&this._numberProps[s]&&(n=b0(n)),this._setProp(s,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,r,n=!0,s=!1){if(r!==this._props[e]&&(r===vE?delete this._props[e]:(this._props[e]=r,e==="key"&&this._app&&(this._app._ceVNode.key=r)),s&&this._instance&&this._update(),n)){const i=this._ob;i&&i.disconnect(),r===!0?this.setAttribute(ps(e),""):typeof r=="string"||typeof r=="number"?this.setAttribute(ps(e),r+""):r||this.removeAttribute(ps(e)),i&&i.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),mw(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const r=st(this._def,pr(e,this._props));return this._instance||(r.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const s=(i,a)=>{this.dispatchEvent(new CustomEvent(i,_h(a[0])?pr({detail:a},a[0]):{detail:a}))};n.emit=(i,...a)=>{s(i,a),ps(i)!==i&&s(ps(i),a)},this._setParent()}),r}_applyStyles(e,r){if(!e)return;if(r){if(r===this._def||this._styleChildren.has(r))return;this._styleChildren.add(r)}const n=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");n&&i.setAttribute("nonce",n),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let r;for(;r=this.firstChild;){const n=r.nodeType===1&&r.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(r),this.removeChild(r)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),r=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const s=e[n],i=s.getAttribute("name")||"default",a=this._slots[i],o=s.parentNode;if(a)for(const l of a){if(r&&l.nodeType===1){const c=r+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let d;for(;d=u.nextNode();)d.setAttribute(c,"")}o.insertBefore(l,s)}else for(;s.firstChild;)o.insertBefore(s.firstChild,s);o.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function aw(t){const e=js(),r=e&&e.ce;return r||null}function pF(){const t=aw();return t&&t.shadowRoot}function mF(t="$style"){{const e=js();if(!e)return qt;const r=e.type.__cssModules;if(!r)return qt;const n=r[t];return n||qt}}const iw=new WeakMap,ow=new WeakMap,O0=Symbol("_moveCb"),xE=Symbol("_enterCb"),gF=t=>(delete t.props.mode,t),vF=gF({name:"TransitionGroup",props:pr({},QT,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=js(),n=Xv();let s,i;return Mh(()=>{if(!s.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!_F(s[0].el,r.vnode.el,a)){s=[];return}s.forEach(yF),s.forEach(EF);const o=s.filter(bF);Ng(),o.forEach(l=>{const c=l.el,u=c.style;xa(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[O0]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c[O0]=null,Ri(c,a))};c.addEventListener("transitionend",d)}),s=[]}),()=>{const a=zt(t),o=ZT(a);let l=a.tag||Fe;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),di(u,ac(u,o,n,r)),iw.set(u,u.el.getBoundingClientRect()))}i=e.default?Oh(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&di(u,ac(u,o,n,r))}return st(l,null,i)}}}),xF=vF;function yF(t){const e=t.el;e[O0]&&e[O0](),e[xE]&&e[xE]()}function EF(t){ow.set(t,t.el.getBoundingClientRect())}function bF(t){const e=iw.get(t),r=ow.get(t),n=e.left-r.left,s=e.top-r.top;if(n||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${s}px)`,i.transitionDuration="0s",t}}function _F(t,e,r){const n=t.cloneNode(),s=t[oc];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(n);const{hasTransform:a}=ew(n);return i.removeChild(n),a}const eo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return dt(e)?r=>Wl(e,r):e};function SF(t){t.target.composing=!0}function yE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ms=Symbol("_assign"),Je={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[Ms]=eo(s);const i=n||s.props&&s.props.type==="number";Ka(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;r&&(o=o.trim()),i&&(o=E0(o)),t[Ms](o)}),r&&Ka(t,"change",()=>{t.value=t.value.trim()}),e||(Ka(t,"compositionstart",SF),Ka(t,"compositionend",yE),Ka(t,"change",yE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:i}},a){if(t[Ms]=eo(a),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?E0(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===l)||(t.value=l))}},Et={deep:!0,created(t,e,r){t[Ms]=eo(r),Ka(t,"change",()=>{const n=t._modelValue,s=lc(t),i=t.checked,a=t[Ms];if(dt(n)){const o=wh(n,s),l=o!==-1;if(i&&!l)a(n.concat(s));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(Qo(n)){const o=new Set(n);i?o.add(s):o.delete(s),a(o)}else a(lw(t,i))})},mounted:EE,beforeUpdate(t,e,r){t[Ms]=eo(r),EE(t,e,r)}};function EE(t,{value:e,oldValue:r},n){t._modelValue=e;let s;if(dt(e))s=wh(e,n.props.value)>-1;else if(Qo(e))s=e.has(n.props.value);else{if(e===r)return;s=Zi(e,lw(t,!0))}t.checked!==s&&(t.checked=s)}const hi={created(t,{value:e},r){t.checked=Zi(e,r.props.value),t[Ms]=eo(r),Ka(t,"change",()=>{t[Ms](lc(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[Ms]=eo(n),e!==r&&(t.checked=Zi(e,n.props.value))}},hr={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=Qo(e);Ka(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>r?E0(lc(a)):lc(a));t[Ms](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,el(()=>{t._assigning=!1})}),t[Ms]=eo(n)},mounted(t,{value:e}){bE(t,e)},beforeUpdate(t,e,r){t[Ms]=eo(r)},updated(t,{value:e}){t._assigning||bE(t,e)}};function bE(t,e){const r=t.multiple,n=dt(e);if(!(r&&!n&&!Qo(e))){for(let s=0,i=t.options.length;s<i;s++){const a=t.options[s],o=lc(a);if(r)if(n){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(c=>String(c)===String(o)):a.selected=wh(e,o)>-1}else a.selected=e.has(o);else if(Zi(lc(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function lc(t){return"_value"in t?t._value:t.value}function lw(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const cw={created(t,e,r){wf(t,e,r,null,"created")},mounted(t,e,r){wf(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){wf(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){wf(t,e,r,n,"updated")}};function uw(t,e){switch(t){case"SELECT":return hr;case"TEXTAREA":return Je;default:switch(e){case"checkbox":return Et;case"radio":return hi;default:return Je}}}function wf(t,e,r,n,s){const a=uw(t.tagName,r.props&&r.props.type)[s];a&&a(t,e,r,n)}function TF(){Je.getSSRProps=({value:t})=>({value:t}),hi.getSSRProps=({value:t},e)=>{if(e.props&&Zi(e.props.value,t))return{checked:!0}},Et.getSSRProps=({value:t},e)=>{if(dt(t)){if(e.props&&wh(t,e.props.value)>-1)return{checked:!0}}else if(Qo(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},cw.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const r=uw(e.type.toUpperCase(),e.props&&e.props.type);if(r.getSSRProps)return r.getSSRProps(t,e)}}const wF=["ctrl","shift","alt","meta"],AF={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>wF.some(r=>t[`${r}Key`]&&!e.includes(r))},hn=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...i)=>{for(let a=0;a<e.length;a++){const o=AF[e[a]];if(o&&o(s,e))return}return t(s,...i)})},CF={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},dw=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=s=>{if(!("key"in s))return;const i=ps(s.key);if(e.some(a=>a===i||CF[a]===i))return t(s)})},fw=pr({patchProp:uF},zP);let Au,_E=!1;function hw(){return Au||(Au=wT(fw))}function pw(){return Au=_E?Au:AT(fw),_E=!0,Au}const mw=(...t)=>{hw().render(...t)},IF=(...t)=>{pw().hydrate(...t)},N0=(...t)=>{const e=hw().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=xw(n);if(!s)return;const i=e._component;!bt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=r(s,!1,vw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e},gw=(...t)=>{const e=pw().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=xw(n);if(s)return r(s,!0,vw(s))},e};function vw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xw(t){return yr(t)?document.querySelector(t):t}let SE=!1;const kF=()=>{SE||(SE=!0,TF(),QP())};/**
* vue v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const DF=()=>{},PF=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:tT,BaseTransitionPropsValidators:Yv,Comment:jr,DeprecationTypes:HP,EffectScope:Bv,ErrorCodes:t3,ErrorTypeStrings:MP,Fragment:Fe,KeepAlive:C3,ReactiveEffect:Yu,Static:Ro,Suspense:xP,Teleport:c3,Text:Xi,TrackOpTypes:qD,Transition:qP,TransitionGroup:xF,TriggerOpTypes:XD,VueElement:Vh,assertNumber:e3,callWithAsyncErrorHandling:Us,callWithErrorHandling:wc,camelize:Tn,capitalize:Cd,cloneVNode:Ia,compatUtils:jP,compile:DF,computed:_e,createApp:N0,createBlock:Xr,createCommentVNode:Se,createElementBlock:U,createElementVNode:f,createHydrationRenderer:AT,createPropsRestProxy:z3,createRenderer:wT,createSSRApp:gw,createSlots:F3,createStaticVNode:tn,createTextVNode:Oe,createVNode:st,customRef:$S,defineAsyncComponent:w3,defineComponent:Id,defineCustomElement:sw,defineEmits:M3,defineExpose:L3,defineModel:$3,defineOptions:B3,defineProps:N3,defineSSRCustomElement:fF,defineSlots:U3,devtools:LP,effect:vD,effectScope:Uv,getCurrentInstance:js,getCurrentScope:$v,getCurrentWatcher:YD,getTransitionRawChildren:Oh,guardReactiveProps:VT,h:$h,handleError:Zo,hasInjectionContext:gT,hydrate:IF,hydrateOnIdle:y3,hydrateOnInteraction:S3,hydrateOnMediaQuery:_3,hydrateOnVisible:b3,initCustomFormatter:RP,initDirectivesForSSR:kF,inject:As,isMemoSame:qT,isProxy:Dh,isReactive:Sa,isReadonly:ui,isRef:_r,isRuntimeOnly:DP,isShallow:ws,isVNode:fi,markRaw:Ph,mergeDefaults:G3,mergeModels:W3,mergeProps:jT,nextTick:el,normalizeClass:Ze,normalizeProps:fD,normalizeStyle:_n,onActivated:nT,onBeforeMount:iT,onBeforeUnmount:Lh,onBeforeUpdate:Qv,onDeactivated:sT,onErrorCaptured:uT,onMounted:Bt,onRenderTracked:cT,onRenderTriggered:lT,onScopeDispose:SS,onServerPrefetch:oT,onUnmounted:Ra,onUpdated:Mh,onWatcherCleanup:HS,openBlock:L,popScopeId:i3,provide:Tu,proxyRefs:Kv,pushScopeId:a3,queuePostFlushCb:Zu,reactive:gs,readonly:Wv,ref:ne,registerRuntimeCompiler:kP,render:mw,renderList:Ve,renderSlot:fT,resolveComponent:Tr,resolveDirective:P3,resolveDynamicComponent:D3,resolveFilter:VP,resolveTransitionHooks:ac,setBlockTracking:Ig,setDevtoolsHook:BP,setTransitionHooks:di,shallowReactive:Gv,shallowReadonly:LD,shallowRef:zv,ssrContextKey:DT,ssrUtils:$P,stop:xD,toDisplayString:Q,toHandlerKey:yu,toHandlers:R3,toRaw:zt,toRef:WD,toRefs:VS,toValue:$D,transformVNodeArgs:TP,triggerRef:UD,unref:Z,useAttrs:H3,useCssModule:mF,useCssVars:ZP,useHost:aw,useId:d3,useModel:dP,useSSRContext:PT,useShadowRoot:pF,useSlots:j3,useTemplateRef:f3,useTransitionState:Xv,vModelCheckbox:Et,vModelDynamic:cw,vModelRadio:hi,vModelSelect:hr,vModelText:Je,vShow:rw,version:XT,warn:NP,watch:Ut,watchEffect:lP,watchPostEffect:cP,watchSyncEffect:FT,withAsyncContext:K3,withCtx:Rh,withDefaults:V3,withDirectives:Ae,withKeys:dw,withMemo:OP,withModifiers:hn,withScopeId:o3},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let yw;const jh=t=>yw=t,Ew=Symbol();function Lg(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Cu;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Cu||(Cu={}));function FF(){const t=Uv(!0),e=t.run(()=>ne({}));let r=[],n=[];const s=Ph({install(i){jh(s),s._a=i,i.provide(Ew,s),i.config.globalProperties.$pinia=s,n.forEach(a=>r.push(a)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const bw=()=>{};function TE(t,e,r,n=bw){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&$v()&&SS(s),s}function _l(t,...e){t.slice().forEach(r=>{r(...e)})}const RF=t=>t(),wE=Symbol(),zp=Symbol();function Bg(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];Lg(s)&&Lg(n)&&t.hasOwnProperty(r)&&!_r(n)&&!Sa(n)?t[r]=Bg(s,n):t[r]=n}return t}const OF=Symbol();function NF(t){return!Lg(t)||!t.hasOwnProperty(OF)}const{assign:Oi}=Object;function MF(t){return!!(_r(t)&&t.effect)}function LF(t,e,r,n){const{state:s,actions:i,getters:a}=e,o=r.state.value[t];let l;function c(){o||(r.state.value[t]=s?s():{});const u=VS(r.state.value[t]);return Oi(u,i,Object.keys(a||{}).reduce((d,h)=>(d[h]=Ph(_e(()=>{jh(r);const p=r._s.get(t);return a[h].call(p,p)})),d),{}))}return l=_w(t,c,e,r,n,!0),l}function _w(t,e,r={},n,s,i){let a;const o=Oi({actions:{}},r),l={deep:!0};let c,u,d=[],h=[],p;const m=n.state.value[t];!i&&!m&&(n.state.value[t]={}),ne({});let g;function v(T){let _;c=u=!1,typeof T=="function"?(T(n.state.value[t]),_={type:Cu.patchFunction,storeId:t,events:p}):(Bg(n.state.value[t],T),_={type:Cu.patchObject,payload:T,storeId:t,events:p});const S=g=Symbol();el().then(()=>{g===S&&(c=!0)}),u=!0,_l(d,_,n.state.value[t])}const y=i?function(){const{state:_}=r,S=_?_():{};this.$patch(k=>{Oi(k,S)})}:bw;function x(){a.stop(),d=[],h=[],n._s.delete(t)}const E=(T,_="")=>{if(wE in T)return T[zp]=_,T;const S=function(){jh(n);const k=Array.from(arguments),A=[],D=[];function N(O){A.push(O)}function R(O){D.push(O)}_l(h,{args:k,name:S[zp],store:P,after:N,onError:R});let F;try{F=T.apply(this&&this.$id===t?this:P,k)}catch(O){throw _l(D,O),O}return F instanceof Promise?F.then(O=>(_l(A,O),O)).catch(O=>(_l(D,O),Promise.reject(O))):(_l(A,F),F)};return S[wE]=!0,S[zp]=_,S},I={_p:n,$id:t,$onAction:TE.bind(null,h),$patch:v,$reset:y,$subscribe(T,_={}){const S=TE(d,T,_.detached,()=>k()),k=a.run(()=>Ut(()=>n.state.value[t],A=>{(_.flush==="sync"?u:c)&&T({storeId:t,type:Cu.direct,events:p},A)},Oi({},l,_)));return S},$dispose:x},P=gs(I);n._s.set(t,P);const b=(n._a&&n._a.runWithContext||RF)(()=>n._e.run(()=>(a=Uv()).run(()=>e({action:E}))));for(const T in b){const _=b[T];if(_r(_)&&!MF(_)||Sa(_))i||(m&&NF(_)&&(_r(_)?_.value=m[T]:Bg(_,m[T])),n.state.value[t][T]=_);else if(typeof _=="function"){const S=E(_,T);b[T]=S,o.actions[T]=_}}return Oi(P,b),Oi(zt(P),b),Object.defineProperty(P,"$state",{get:()=>n.state.value[t],set:T=>{v(_=>{Oi(_,T)})}}),n._p.forEach(T=>{Oi(P,a.run(()=>T({store:P,app:n._a,pinia:n,options:o})))}),m&&i&&r.hydrate&&r.hydrate(P.$state,m),c=!0,u=!0,P}/*! #__NO_SIDE_EFFECTS__ */function Sw(t,e,r){let n,s;const i=typeof e=="function";typeof t=="string"?(n=t,s=i?r:e):(s=t,n=t.id);function a(o,l){const c=gT();return o=o||(c?As(Ew,null):null),o&&jh(o),o=yw,o._s.has(n)||(i?_w(n,e,s,o):LF(n,s,o)),o._s.get(n)}return a.$id=n,a}var AE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},BF=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},ww={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|o>>4;let h=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(h=64)),n.push(r[u],r[d],r[h],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Tw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const d=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||d==null)throw new UF;const h=i<<2|o>>4;if(n.push(h),c!==64){const p=o<<4&240|c>>2;if(n.push(p),d!==64){const m=c<<6&192|d;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $F=function(t){const e=Tw(t);return ww.encodeByteArray(e,!0)},M0=function(t){return $F(t).replace(/\./g,"")},Aw=function(t){try{return ww.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=()=>VF().__FIREBASE_DEFAULTS__,HF=()=>{if(typeof process>"u"||typeof AE>"u")return;const t=AE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Aw(t[1]);return e&&JSON.parse(e)},Hh=()=>{try{return jF()||HF()||GF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Cw=t=>{var e,r;return(r=(e=Hh())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},o1=t=>{const e=Cw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Iw=()=>{var t;return(t=Hh())===null||t===void 0?void 0:t.config},kw=t=>{var e;return(e=Hh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[M0(JSON.stringify(r)),M0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function KF(){var t;const e=(t=Hh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JF(){const t=Kn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QF(){return!KF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZF(){try{return typeof indexedDB=="object"}catch{return!1}}function eR(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="FirebaseError";class fa extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=tR,Object.setPrototypeOf(this,fa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fd.prototype.create)}}class Fd{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?rR(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new fa(s,o,n)}}function rR(t,e){return t.replace(nR,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const nR=/\{\$([^}]+)}/g;function sR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function L0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(CE(i)&&CE(a)){if(!L0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function CE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function aR(t,e){const r=new iR(t,e);return r.subscribe.bind(r)}class iR{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");oR(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Kp),s.error===void 0&&(s.error=Kp),s.complete===void 0&&(s.complete=Kp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oR(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t){return t&&t._delegate?t._delegate:t}class pi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new WF;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uR(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:cR(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cR(t){return t===To?void 0:t}function uR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new lR(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Kt||(Kt={}));const fR={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},hR=Kt.INFO,pR={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},mR=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=pR[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class l1{constructor(e){this.name=e,this._logLevel=hR,this._logHandler=mR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const gR=(t,e)=>e.some(r=>t instanceof r);let IE,kE;function vR(){return IE||(IE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xR(){return kE||(kE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pw=new WeakMap,Ug=new WeakMap,Fw=new WeakMap,qp=new WeakMap,c1=new WeakMap;function yR(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(Yi(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&Pw.set(r,t)}).catch(()=>{}),c1.set(e,t),e}function ER(t){if(Ug.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Ug.set(t,e)}let $g={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Ug.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fw.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Yi(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bR(t){$g=t($g)}function _R(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Xp(this),e,...r);return Fw.set(n,e.sort?e.sort():[e]),Yi(n)}:xR().includes(t)?function(...e){return t.apply(Xp(this),e),Yi(Pw.get(this))}:function(...e){return Yi(t.apply(Xp(this),e))}}function SR(t){return typeof t=="function"?_R(t):(t instanceof IDBTransaction&&ER(t),gR(t,vR())?new Proxy(t,$g):t)}function Yi(t){if(t instanceof IDBRequest)return yR(t);if(qp.has(t))return qp.get(t);const e=SR(t);return e!==t&&(qp.set(t,e),c1.set(e,t)),e}const Xp=t=>c1.get(t);function TR(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=Yi(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Yi(a.result),l.oldVersion,l.newVersion,Yi(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const wR=["get","getKey","getAll","getAllKeys","count"],AR=["put","add","delete","clear"],Yp=new Map;function DE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yp.get(e))return Yp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=AR.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||wR.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return Yp.set(e,i),i}bR(t=>({...t,get:(e,r,n)=>DE(e,r)||t.get(e,r,n),has:(e,r)=>!!DE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(IR(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function IR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vg="@firebase/app",PE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new l1("@firebase/app"),kR="@firebase/app-compat",DR="@firebase/analytics-compat",PR="@firebase/analytics",FR="@firebase/app-check-compat",RR="@firebase/app-check",OR="@firebase/auth",NR="@firebase/auth-compat",MR="@firebase/database",LR="@firebase/data-connect",BR="@firebase/database-compat",UR="@firebase/functions",$R="@firebase/functions-compat",VR="@firebase/installations",jR="@firebase/installations-compat",HR="@firebase/messaging",GR="@firebase/messaging-compat",WR="@firebase/performance",zR="@firebase/performance-compat",KR="@firebase/remote-config",qR="@firebase/remote-config-compat",XR="@firebase/storage",YR="@firebase/storage-compat",JR="@firebase/firestore",QR="@firebase/vertexai-preview",ZR="@firebase/firestore-compat",e8="firebase",t8="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="[DEFAULT]",r8={[Vg]:"fire-core",[kR]:"fire-core-compat",[PR]:"fire-analytics",[DR]:"fire-analytics-compat",[RR]:"fire-app-check",[FR]:"fire-app-check-compat",[OR]:"fire-auth",[NR]:"fire-auth-compat",[MR]:"fire-rtdb",[LR]:"fire-data-connect",[BR]:"fire-rtdb-compat",[UR]:"fire-fn",[$R]:"fire-fn-compat",[VR]:"fire-iid",[jR]:"fire-iid-compat",[HR]:"fire-fcm",[GR]:"fire-fcm-compat",[WR]:"fire-perf",[zR]:"fire-perf-compat",[KR]:"fire-rc",[qR]:"fire-rc-compat",[XR]:"fire-gcs",[YR]:"fire-gcs-compat",[JR]:"fire-fst",[ZR]:"fire-fst-compat",[QR]:"fire-vertex","fire-js":"fire-js",[e8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=new Map,n8=new Map,Hg=new Map;function FE(t,e){try{t.container.addComponent(e)}catch(r){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function to(t){const e=t.name;if(Hg.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;Hg.set(e,t);for(const r of B0.values())FE(r,t);for(const r of n8.values())FE(r,t);return!0}function Od(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Qa(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new Fd("app","Firebase",s8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=t8;function Rw(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:jg,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Ji.create("bad-app-name",{appName:String(s)});if(r||(r=Iw()),!r)throw Ji.create("no-options");const i=B0.get(s);if(i){if(L0(r,i.options)&&L0(n,i.config))return i;throw Ji.create("duplicate-app",{appName:s})}const a=new dR(s);for(const l of Hg.values())a.addComponent(l);const o=new a8(r,n,a);return B0.set(s,o),o}function Nd(t=jg){const e=B0.get(t);if(!e&&t===jg&&Iw())return Rw();if(!e)throw Ji.create("no-app",{appName:t});return e}function Ls(t,e,r){var n;let s=(n=r8[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(o.join(" "));return}to(new pi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8="firebase-heartbeat-database",o8=1,sd="firebase-heartbeat-store";let Jp=null;function Ow(){return Jp||(Jp=TR(i8,o8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sd)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ji.create("idb-open",{originalErrorMessage:t.message})})),Jp}async function l8(t){try{const r=(await Ow()).transaction(sd),n=await r.objectStore(sd).get(Nw(t));return await r.done,n}catch(e){if(e instanceof fa)mi.warn(e.message);else{const r=Ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mi.warn(r.message)}}}async function RE(t,e){try{const n=(await Ow()).transaction(sd,"readwrite");await n.objectStore(sd).put(e,Nw(t)),await n.done}catch(r){if(r instanceof fa)mi.warn(r.message);else{const n=Ji.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});mi.warn(n.message)}}}function Nw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=1024,u8=30*24*60*60*1e3;class d8{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new h8(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=OE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=u8}),this._storage.overwrite(this._heartbeatsCache))}catch(n){mi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=OE(),{heartbeatsToSend:n,unsentEntries:s}=f8(this._heartbeatsCache.heartbeats),i=M0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return mi.warn(r),""}}}function OE(){return new Date().toISOString().substring(0,10)}function f8(t,e=c8){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),NE(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),NE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class h8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZF()?eR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await l8(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return RE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return RE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function NE(t){return M0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t){to(new pi("platform-logger",e=>new CR(e),"PRIVATE")),to(new pi("heartbeat",e=>new d8(e),"PRIVATE")),Ls(Vg,PE,t),Ls(Vg,PE,"esm2017"),Ls("fire-js","")}p8("");function u1(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Mw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lw=Mw,Bw=new Fd("auth","Firebase",Mw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new l1("@firebase/auth");function m8(t,...e){U0.logLevel<=Kt.WARN&&U0.warn(`Auth (${tl}): ${t}`,...e)}function n0(t,...e){U0.logLevel<=Kt.ERROR&&U0.error(`Auth (${tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t,...e){throw f1(t,...e)}function ia(t,...e){return f1(t,...e)}function d1(t,e,r){const n=Object.assign(Object.assign({},Lw()),{[e]:r});return new Fd("auth","Firebase",n).create(e,{appName:t.name})}function Oo(t){return d1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g8(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&ka(t,"argument-error"),d1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function f1(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Bw.create(t,...e)}function At(t,e,...r){if(!t)throw f1(e,...r)}function Za(t){const e="INTERNAL ASSERTION FAILED: "+t;throw n0(e),new Error(e)}function gi(t,e){t||Za(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function v8(){return ME()==="http:"||ME()==="https:"}function ME(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v8()||XF()||"connection"in navigator)?navigator.onLine:!0}function y8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,r){this.shortDelay=e,this.longDelay=r,gi(r>e,"Short delay should be less than long delay!"),this.isMobile=zF()||YF()}get(){return x8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t,e){gi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Za("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Za("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Za("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=new Md(3e4,6e4);function p1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ac(t,e,r,n,s={}){return $w(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Rd(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return qF()||(c.referrerPolicy="no-referrer"),Uw.fetch()(Vw(t,t.config.apiHost,r,o),c)})}async function $w(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},E8),e);try{const s=new S8(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Af(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Af(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Af(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Af(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw d1(t,u,c);ka(t,u)}}catch(s){if(s instanceof fa)throw s;ka(t,"network-request-failed",{message:String(s)})}}async function _8(t,e,r,n,s={}){const i=await Ac(t,e,r,n,s);return"mfaPendingCredential"in i&&ka(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Vw(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?h1(t.config,s):`${t.config.apiScheme}://${s}`}class S8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ia(this.auth,"network-request-failed")),b8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Af(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=ia(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T8(t,e){return Ac(t,"POST","/v1/accounts:delete",e)}async function jw(t,e){return Ac(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t,e=!1){return ar(t).getIdToken(e)}async function Gw(t,e=!1){const r=ar(t),n=await r.getIdToken(e),s=m1(n);At(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Iu(Qp(s.auth_time)),issuedAtTime:Iu(Qp(s.iat)),expirationTime:Iu(Qp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Qp(t){return Number(t)*1e3}function m1(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return n0("JWT malformed, contained fewer than 3 sections"),null;try{const s=Aw(r);return s?JSON.parse(s):(n0("Failed to decode base64 JWT payload"),null)}catch(s){return n0("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function LE(t){const e=m1(t);return At(e,"internal-error"),At(typeof e.exp<"u","internal-error"),At(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof fa&&w8(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function w8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await ad(t,jw(r,{idToken:n}));At(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?zw(i.providerUserInfo):[],o=C8(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Wg(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function Ww(t){const e=ar(t);await $0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C8(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function zw(t){return t.map(e=>{var{providerId:r}=e,n=u1(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I8(t,e){const r=await $w(t,{},async()=>{const n=Rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=Vw(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Uw.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function k8(t,e){return Ac(t,"POST","/v2/accounts:revokeToken",p1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){At(e.idToken,"internal-error"),At(typeof e.idToken<"u","internal-error"),At(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){At(e.length!==0,"internal-error");const r=LE(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await I8(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new Xl;return n&&(At(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(At(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(At(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return Za("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t,e){At(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ei{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=u1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new A8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Wg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await ad(this,this.stsTokenManager.getToken(this.auth,e));return At(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Gw(this,e)}reload(){return Ww(this)}_assign(e){this!==e&&(At(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await $0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qa(this.auth.app))return Promise.reject(Oo(this.auth));const e=await this.getIdToken();return await ad(this,T8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,u;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(s=r.email)!==null&&s!==void 0?s:void 0,p=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,m=(a=r.photoURL)!==null&&a!==void 0?a:void 0,g=(o=r.tenantId)!==null&&o!==void 0?o:void 0,v=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=r.createdAt)!==null&&c!==void 0?c:void 0,x=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:I,isAnonymous:P,providerData:w,stsTokenManager:b}=r;At(E&&b,e,"internal-error");const T=Xl.fromJSON(this.name,b);At(typeof E=="string",e,"internal-error"),ki(d,e.name),ki(h,e.name),At(typeof I=="boolean",e,"internal-error"),At(typeof P=="boolean",e,"internal-error"),ki(p,e.name),ki(m,e.name),ki(g,e.name),ki(v,e.name),ki(y,e.name),ki(x,e.name);const _=new ei({uid:E,auth:e,email:h,emailVerified:I,displayName:d,isAnonymous:P,photoURL:m,phoneNumber:p,tenantId:g,stsTokenManager:T,createdAt:y,lastLoginAt:x});return w&&Array.isArray(w)&&(_.providerData=w.map(S=>Object.assign({},S))),v&&(_._redirectEventId=v),_}static async _fromIdTokenResponse(e,r,n=!1){const s=new Xl;s.updateFromServerResponse(r);const i=new ei({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await $0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];At(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?zw(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new Xl;o.updateFromIdToken(n);const l=new ei({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Wg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new Map;function ti(t){gi(t instanceof Function,"Expected a class definition");let e=BE.get(t);return e?(gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Kw.type="NONE";const zg=Kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t,e,r){return`firebase:${t}:${e}:${r}`}class Yl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=s0(this.userKey,s.apiKey,i),this.fullPersistenceKey=s0("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ei._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Yl(ti(zg),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ti(zg);const a=s0(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const d=ei._fromJSON(e,u);c!==i&&(o=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Yl(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new Yl(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zw(e))return"Blackberry";if(eA(e))return"Webos";if(Xw(e))return"Safari";if((e.includes("chrome/")||Yw(e))&&!e.includes("edge/"))return"Chrome";if(Qw(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function qw(t=Kn()){return/firefox\//i.test(t)}function Xw(t=Kn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yw(t=Kn()){return/crios\//i.test(t)}function Jw(t=Kn()){return/iemobile/i.test(t)}function Qw(t=Kn()){return/android/i.test(t)}function Zw(t=Kn()){return/blackberry/i.test(t)}function eA(t=Kn()){return/webos/i.test(t)}function g1(t=Kn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D8(t=Kn()){var e;return g1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function P8(){return JF()&&document.documentMode===10}function tA(t=Kn()){return g1(t)||Qw(t)||eA(t)||Zw(t)||/windows phone/i.test(t)||Jw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t,e=[]){let r;switch(t){case"Browser":r=UE(Kn());break;case"Worker":r=`${UE(Kn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${tl}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(t,e={}){return Ac(t,"GET","/v2/passwordPolicy",p1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8=6;class N8{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:O8,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $E(this),this.idTokenSubscription=new $E(this),this.beforeStateQueue=new F8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ti(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Yl.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await jw(this,{idToken:e}),n=await ei._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Qa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await $0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=y8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qa(this.app))return Promise.reject(Oo(this));const r=e?ar(e):null;return r&&At(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&At(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qa(this.app)?Promise.reject(Oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qa(this.app)?Promise.reject(Oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await R8(this),r=new N8(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fd("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await k8(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ti(e)||this._popupRedirectResolver;At(r,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[ti(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&m8(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Gh(t){return ar(t)}class $E{constructor(e){this.auth=e,this.observer=null,this.addObserver=aR(r=>this.observer=r)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L8(t){v1=t}function B8(t){return v1.loadJS(t)}function U8(){return v1.gapiScript}function $8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t,e){const r=Od(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(L0(i,e??{}))return s;ka(s,"already-initialized")}return r.initialize({options:e})}function V8(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ti);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function sA(t,e,r){const n=Gh(t);At(n._canInitEmulator,n,"emulator-config-failed"),At(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=aA(e),{host:a,port:o}=j8(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),H8()}function aA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function j8(t){const e=aA(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:VE(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:VE(a)}}}function VE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function H8(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Za("not implemented")}_getIdTokenResponse(e){return Za("not implemented")}_linkToIdToken(e,r){return Za("not implemented")}_getReauthenticationResolver(e){return Za("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t,e){return _8(t,"POST","/v1/accounts:signInWithIdp",p1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8="http://localhost";class ro extends x1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ka("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=u1(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new ro(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Jl(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Jl(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Jl(e,r)}buildRequest(){const e={requestUri:G8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Rd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends y1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends Ld{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qa.credential(e.oauthAccessToken)}catch{return null}}}qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";qa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Ld{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ro._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ea.credential(r,n)}catch{return null}}}ea.GOOGLE_SIGN_IN_METHOD="google.com";ea.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends Ld{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.GITHUB_SIGN_IN_METHOD="github.com";Xa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Ld{constructor(){super("twitter.com")}static credential(e,r){return ro._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ya.credential(r,n)}catch{return null}}}Ya.TWITTER_SIGN_IN_METHOD="twitter.com";Ya.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await ei._fromIdTokenResponse(e,n,s),a=jE(n);return new cc({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=jE(n);return new cc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function jE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0 extends fa{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,V0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new V0(e,r,n,s)}}function iA(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?V0._fromErrorAndOperation(t,i,e,n):i})}async function W8(t,e,r=!1){const n=await ad(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return cc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z8(t,e,r=!1){const{auth:n}=t;if(Qa(n.app))return Promise.reject(Oo(n));const s="reauthenticate";try{const i=await ad(t,iA(n,s,e,t),r);At(i.idToken,n,"internal-error");const a=m1(i.idToken);At(a,n,"internal-error");const{sub:o}=a;return At(t.uid===o,n,"user-mismatch"),cc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ka(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K8(t,e,r=!1){if(Qa(t.app))return Promise.reject(Oo(t));const n="signIn",s=await iA(t,n,e),i=await cc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function oA(t,e,r,n){return ar(t).onIdTokenChanged(e,r,n)}function lA(t,e,r){return ar(t).beforeAuthStateChanged(e,r)}function Wh(t,e,r,n){return ar(t).onAuthStateChanged(e,r,n)}function zh(t){return ar(t).signOut()}const j0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(j0,"1"),this.storage.removeItem(j0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=1e3,X8=10;class uA extends cA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);P8()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,X8):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},q8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}uA.type="LOCAL";const dA=uA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA extends cA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}fA.type="SESSION";const E1=fA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Kh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await Y8(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=b1("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(h.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(){return window}function Q8(t){Ta().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){return typeof Ta().WorkerGlobalScope<"u"&&typeof Ta().importScripts=="function"}async function Z8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function e6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function t6(){return hA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="firebaseLocalStorageDb",r6=1,H0="firebaseLocalStorage",mA="fbase_key";class Bd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function qh(t,e){return t.transaction([H0],e?"readwrite":"readonly").objectStore(H0)}function n6(){const t=indexedDB.deleteDatabase(pA);return new Bd(t).toPromise()}function Kg(){const t=indexedDB.open(pA,r6);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(H0,{keyPath:mA})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(H0)?e(n):(n.close(),await n6(),e(await Kg()))})})}async function HE(t,e,r){const n=qh(t,!0).put({[mA]:e,value:r});return new Bd(n).toPromise()}async function s6(t,e){const r=qh(t,!1).get(e),n=await new Bd(r).toPromise();return n===void 0?null:n.value}function GE(t,e){const r=qh(t,!0).delete(e);return new Bd(r).toPromise()}const a6=800,i6=3;class gA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>i6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kh._getInstance(t6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Z8(),!this.activeServiceWorker)return;this.sender=new J8(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||e6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kg();return await HE(e,j0,"1"),await GE(e,j0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>HE(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>s6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>GE(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qh(s,!1).getAll();return new Bd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),a6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gA.type="LOCAL";const vA=gA;new Md(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t,e){return e?ti(e):(At(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1 extends x1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Jl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function o6(t){return K8(t.auth,new _1(t),t.bypassAuthState)}function l6(t){const{auth:e,user:r}=t;return At(r,e,"internal-error"),z8(r,new _1(t),t.bypassAuthState)}async function c6(t){const{auth:e,user:r}=t;return At(r,e,"internal-error"),W8(r,new _1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o6;case"linkViaPopup":case"linkViaRedirect":return c6;case"reauthViaPopup":case"reauthViaRedirect":return l6;default:ka(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=new Md(2e3,1e4);async function S1(t,e,r){if(Qa(t.app))return Promise.reject(ia(t,"operation-not-supported-in-this-environment"));const n=Gh(t);g8(t,e,y1);const s=xA(n,r);return new Co(n,"signInViaPopup",e,s).executeNotNull()}class Co extends yA{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return At(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=b1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ia(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ia(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ia(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,u6.get())};e()}}Co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6="pendingRedirect",a0=new Map;class f6 extends yA{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=a0.get(this.auth._key());if(!e){try{const n=await h6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}a0.set(this.auth._key(),e)}return this.bypassAuthState||a0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h6(t,e){const r=g6(e),n=m6(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function p6(t,e){a0.set(t._key(),e)}function m6(t){return ti(t._redirectPersistence)}function g6(t){return s0(d6,t.config.apiKey,t.name)}async function v6(t,e,r=!1){if(Qa(t.app))return Promise.reject(Oo(t));const n=Gh(t),s=xA(n,e),a=await new f6(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=10*60*1e3;class y6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!EA(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(ia(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x6&&this.cachedEventUids.clear(),this.cachedEventUids.has(WE(e))}saveEventToCache(e){this.cachedEventUids.add(WE(e)),this.lastProcessedEventTime=Date.now()}}function WE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(t,e={}){return Ac(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S6=/^https?/;async function T6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await b6(t);for(const r of e)try{if(w6(r))return}catch{}ka(t,"unauthorized-domain")}function w6(t){const e=Gg(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!S6.test(r))return!1;if(_6.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=new Md(3e4,6e4);function zE(){const t=Ta().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function C6(t){return new Promise((e,r)=>{var n,s,i;function a(){zE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zE(),r(ia(t,"network-request-failed"))},timeout:A6.get()})}if(!((s=(n=Ta().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ta().gapi)===null||i===void 0)&&i.load)a();else{const o=$8("iframefcb");return Ta()[o]=()=>{gapi.load?a():r(ia(t,"network-request-failed"))},B8(`${U8()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw i0=null,e})}let i0=null;function I6(t){return i0=i0||C6(t),i0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=new Md(5e3,15e3),D6="__/auth/iframe",P6="emulator/auth/iframe",F6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function O6(t){const e=t.config;At(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?h1(e,P6):`https://${t.config.authDomain}/${D6}`,n={apiKey:e.apiKey,appName:t.name,v:tl},s=R6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Rd(n).slice(1)}`}async function N6(t){const e=await I6(t),r=Ta().gapi;return At(r,t,"internal-error"),e.open({where:document.body,url:O6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F6,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=ia(t,"network-request-failed"),o=Ta().setTimeout(()=>{i(a)},k6.get());function l(){Ta().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L6=500,B6=600,U6="_blank",$6="http://localhost";class KE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function V6(t,e,r,n=L6,s=B6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},M6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Kn().toLowerCase();r&&(o=Yw(c)?U6:r),qw(c)&&(e=e||$6,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(D8(c)&&o!=="_self")return j6(e||"",o),new KE(null);const d=window.open(e||"",o,u);At(d,t,"popup-blocked");try{d.focus()}catch{}return new KE(d)}function j6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="__/auth/handler",G6="emulator/auth/handler",W6=encodeURIComponent("fac");async function qE(t,e,r,n,s,i){At(t.config.authDomain,t,"auth-domain-config-required"),At(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:tl,eventId:s};if(e instanceof y1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",sR(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))a[u]=d}if(e instanceof Ld){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${W6}=${encodeURIComponent(l)}`:"";return`${z6(t)}?${Rd(o).slice(1)}${c}`}function z6({config:t}){return t.emulator?h1(t,G6):`https://${t.authDomain}/${H6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="webStorageSupport";class K6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E1,this._completeRedirectFn=v6,this._overrideRedirectResult=p6}async _openPopup(e,r,n,s){var i;gi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await qE(e,r,n,Gg(),s);return V6(e,a,b1())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await qE(e,r,n,Gg(),s);return Q8(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(gi(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await N6(e),n=new y6(e);return r.register("authEvent",s=>(At(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Zp,{type:Zp},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Zp];a!==void 0&&r(!!a),ka(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=T6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return tA()||Xw()||g1()}}const bA=K6;var XE="@firebase/auth",YE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Y6(t){to(new pi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;At(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rA(t)},c=new M8(n,s,i,l);return V8(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),to(new pi("auth-internal",e=>{const r=Gh(e.getProvider("auth").getImmediate());return(n=>new q6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(XE,YE,X6(t)),Ls(XE,YE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=5*60,Q6=kw("authIdTokenMaxAge")||J6;let JE=null;const Z6=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Q6)return;const s=r==null?void 0:r.token;JE!==s&&(JE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function jo(t=Nd()){const e=Od(t,"auth");if(e.isInitialized())return e.getImmediate();const r=nA(t,{popupRedirectResolver:bA,persistence:[vA,dA,E1]}),n=kw("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=Z6(i.toString());lA(r,a,()=>a(r.currentUser)),oA(r,o=>a(o))}}const s=Cw("auth");return s&&sA(r,`http://${s}`),r}function eO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}L8({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=ia("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",eO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Y6("Browser");const tO=Object.freeze(Object.defineProperty({__proto__:null,AuthCredential:x1,FacebookAuthProvider:qa,GithubAuthProvider:Xa,GoogleAuthProvider:ea,OAuthCredential:ro,TwitterAuthProvider:Ya,beforeAuthStateChanged:lA,browserLocalPersistence:dA,browserPopupRedirectResolver:bA,browserSessionPersistence:E1,connectAuthEmulator:sA,getAuth:jo,getIdToken:Hw,getIdTokenResult:Gw,inMemoryPersistence:zg,indexedDBLocalPersistence:vA,initializeAuth:nA,onAuthStateChanged:Wh,onIdTokenChanged:oA,prodErrorMap:Lw,reload:Ww,signInWithPopup:S1,signOut:zh},Symbol.toStringTag,{value:"Module"}));var QE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var No,_A;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,T){function _(){}_.prototype=T.prototype,b.D=T.prototype,b.prototype=new _,b.prototype.constructor=b,b.C=function(S,k,A){for(var D=Array(arguments.length-2),N=2;N<arguments.length;N++)D[N-2]=arguments[N];return T.prototype[k].apply(S,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,T,_){_||(_=0);var S=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)S[k]=T.charCodeAt(_++)|T.charCodeAt(_++)<<8|T.charCodeAt(_++)<<16|T.charCodeAt(_++)<<24;else for(k=0;16>k;++k)S[k]=T[_++]|T[_++]<<8|T[_++]<<16|T[_++]<<24;T=b.g[0],_=b.g[1],k=b.g[2];var A=b.g[3],D=T+(A^_&(k^A))+S[0]+3614090360&4294967295;T=_+(D<<7&4294967295|D>>>25),D=A+(k^T&(_^k))+S[1]+3905402710&4294967295,A=T+(D<<12&4294967295|D>>>20),D=k+(_^A&(T^_))+S[2]+606105819&4294967295,k=A+(D<<17&4294967295|D>>>15),D=_+(T^k&(A^T))+S[3]+3250441966&4294967295,_=k+(D<<22&4294967295|D>>>10),D=T+(A^_&(k^A))+S[4]+4118548399&4294967295,T=_+(D<<7&4294967295|D>>>25),D=A+(k^T&(_^k))+S[5]+1200080426&4294967295,A=T+(D<<12&4294967295|D>>>20),D=k+(_^A&(T^_))+S[6]+2821735955&4294967295,k=A+(D<<17&4294967295|D>>>15),D=_+(T^k&(A^T))+S[7]+4249261313&4294967295,_=k+(D<<22&4294967295|D>>>10),D=T+(A^_&(k^A))+S[8]+1770035416&4294967295,T=_+(D<<7&4294967295|D>>>25),D=A+(k^T&(_^k))+S[9]+2336552879&4294967295,A=T+(D<<12&4294967295|D>>>20),D=k+(_^A&(T^_))+S[10]+4294925233&4294967295,k=A+(D<<17&4294967295|D>>>15),D=_+(T^k&(A^T))+S[11]+2304563134&4294967295,_=k+(D<<22&4294967295|D>>>10),D=T+(A^_&(k^A))+S[12]+1804603682&4294967295,T=_+(D<<7&4294967295|D>>>25),D=A+(k^T&(_^k))+S[13]+4254626195&4294967295,A=T+(D<<12&4294967295|D>>>20),D=k+(_^A&(T^_))+S[14]+2792965006&4294967295,k=A+(D<<17&4294967295|D>>>15),D=_+(T^k&(A^T))+S[15]+1236535329&4294967295,_=k+(D<<22&4294967295|D>>>10),D=T+(k^A&(_^k))+S[1]+4129170786&4294967295,T=_+(D<<5&4294967295|D>>>27),D=A+(_^k&(T^_))+S[6]+3225465664&4294967295,A=T+(D<<9&4294967295|D>>>23),D=k+(T^_&(A^T))+S[11]+643717713&4294967295,k=A+(D<<14&4294967295|D>>>18),D=_+(A^T&(k^A))+S[0]+3921069994&4294967295,_=k+(D<<20&4294967295|D>>>12),D=T+(k^A&(_^k))+S[5]+3593408605&4294967295,T=_+(D<<5&4294967295|D>>>27),D=A+(_^k&(T^_))+S[10]+38016083&4294967295,A=T+(D<<9&4294967295|D>>>23),D=k+(T^_&(A^T))+S[15]+3634488961&4294967295,k=A+(D<<14&4294967295|D>>>18),D=_+(A^T&(k^A))+S[4]+3889429448&4294967295,_=k+(D<<20&4294967295|D>>>12),D=T+(k^A&(_^k))+S[9]+568446438&4294967295,T=_+(D<<5&4294967295|D>>>27),D=A+(_^k&(T^_))+S[14]+3275163606&4294967295,A=T+(D<<9&4294967295|D>>>23),D=k+(T^_&(A^T))+S[3]+4107603335&4294967295,k=A+(D<<14&4294967295|D>>>18),D=_+(A^T&(k^A))+S[8]+1163531501&4294967295,_=k+(D<<20&4294967295|D>>>12),D=T+(k^A&(_^k))+S[13]+2850285829&4294967295,T=_+(D<<5&4294967295|D>>>27),D=A+(_^k&(T^_))+S[2]+4243563512&4294967295,A=T+(D<<9&4294967295|D>>>23),D=k+(T^_&(A^T))+S[7]+1735328473&4294967295,k=A+(D<<14&4294967295|D>>>18),D=_+(A^T&(k^A))+S[12]+2368359562&4294967295,_=k+(D<<20&4294967295|D>>>12),D=T+(_^k^A)+S[5]+4294588738&4294967295,T=_+(D<<4&4294967295|D>>>28),D=A+(T^_^k)+S[8]+2272392833&4294967295,A=T+(D<<11&4294967295|D>>>21),D=k+(A^T^_)+S[11]+1839030562&4294967295,k=A+(D<<16&4294967295|D>>>16),D=_+(k^A^T)+S[14]+4259657740&4294967295,_=k+(D<<23&4294967295|D>>>9),D=T+(_^k^A)+S[1]+2763975236&4294967295,T=_+(D<<4&4294967295|D>>>28),D=A+(T^_^k)+S[4]+1272893353&4294967295,A=T+(D<<11&4294967295|D>>>21),D=k+(A^T^_)+S[7]+4139469664&4294967295,k=A+(D<<16&4294967295|D>>>16),D=_+(k^A^T)+S[10]+3200236656&4294967295,_=k+(D<<23&4294967295|D>>>9),D=T+(_^k^A)+S[13]+681279174&4294967295,T=_+(D<<4&4294967295|D>>>28),D=A+(T^_^k)+S[0]+3936430074&4294967295,A=T+(D<<11&4294967295|D>>>21),D=k+(A^T^_)+S[3]+3572445317&4294967295,k=A+(D<<16&4294967295|D>>>16),D=_+(k^A^T)+S[6]+76029189&4294967295,_=k+(D<<23&4294967295|D>>>9),D=T+(_^k^A)+S[9]+3654602809&4294967295,T=_+(D<<4&4294967295|D>>>28),D=A+(T^_^k)+S[12]+3873151461&4294967295,A=T+(D<<11&4294967295|D>>>21),D=k+(A^T^_)+S[15]+530742520&4294967295,k=A+(D<<16&4294967295|D>>>16),D=_+(k^A^T)+S[2]+3299628645&4294967295,_=k+(D<<23&4294967295|D>>>9),D=T+(k^(_|~A))+S[0]+4096336452&4294967295,T=_+(D<<6&4294967295|D>>>26),D=A+(_^(T|~k))+S[7]+1126891415&4294967295,A=T+(D<<10&4294967295|D>>>22),D=k+(T^(A|~_))+S[14]+2878612391&4294967295,k=A+(D<<15&4294967295|D>>>17),D=_+(A^(k|~T))+S[5]+4237533241&4294967295,_=k+(D<<21&4294967295|D>>>11),D=T+(k^(_|~A))+S[12]+1700485571&4294967295,T=_+(D<<6&4294967295|D>>>26),D=A+(_^(T|~k))+S[3]+2399980690&4294967295,A=T+(D<<10&4294967295|D>>>22),D=k+(T^(A|~_))+S[10]+4293915773&4294967295,k=A+(D<<15&4294967295|D>>>17),D=_+(A^(k|~T))+S[1]+2240044497&4294967295,_=k+(D<<21&4294967295|D>>>11),D=T+(k^(_|~A))+S[8]+1873313359&4294967295,T=_+(D<<6&4294967295|D>>>26),D=A+(_^(T|~k))+S[15]+4264355552&4294967295,A=T+(D<<10&4294967295|D>>>22),D=k+(T^(A|~_))+S[6]+2734768916&4294967295,k=A+(D<<15&4294967295|D>>>17),D=_+(A^(k|~T))+S[13]+1309151649&4294967295,_=k+(D<<21&4294967295|D>>>11),D=T+(k^(_|~A))+S[4]+4149444226&4294967295,T=_+(D<<6&4294967295|D>>>26),D=A+(_^(T|~k))+S[11]+3174756917&4294967295,A=T+(D<<10&4294967295|D>>>22),D=k+(T^(A|~_))+S[2]+718787259&4294967295,k=A+(D<<15&4294967295|D>>>17),D=_+(A^(k|~T))+S[9]+3951481745&4294967295,b.g[0]=b.g[0]+T&4294967295,b.g[1]=b.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+A&4294967295}n.prototype.u=function(b,T){T===void 0&&(T=b.length);for(var _=T-this.blockSize,S=this.B,k=this.h,A=0;A<T;){if(k==0)for(;A<=_;)s(this,b,A),A+=this.blockSize;if(typeof b=="string"){for(;A<T;)if(S[k++]=b.charCodeAt(A++),k==this.blockSize){s(this,S),k=0;break}}else for(;A<T;)if(S[k++]=b[A++],k==this.blockSize){s(this,S),k=0;break}}this.h=k,this.o+=T},n.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var T=1;T<b.length-8;++T)b[T]=0;var _=8*this.o;for(T=b.length-8;T<b.length;++T)b[T]=_&255,_/=256;for(this.u(b),b=Array(16),T=_=0;4>T;++T)for(var S=0;32>S;S+=8)b[_++]=this.g[T]>>>S&255;return b};function i(b,T){var _=o;return Object.prototype.hasOwnProperty.call(_,b)?_[b]:_[b]=T(b)}function a(b,T){this.h=T;for(var _=[],S=!0,k=b.length-1;0<=k;k--){var A=b[k]|0;S&&A==T||(_[k]=A,S=!1)}this.g=_}var o={};function l(b){return-128<=b&&128>b?i(b,function(T){return new a([T|0],0>T?-1:0)}):new a([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return d;if(0>b)return v(c(-b));for(var T=[],_=1,S=0;b>=_;S++)T[S]=b/_|0,_*=4294967296;return new a(T,0)}function u(b,T){if(b.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b.charAt(0)=="-")return v(u(b.substring(1),T));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(T,8)),S=d,k=0;k<b.length;k+=8){var A=Math.min(8,b.length-k),D=parseInt(b.substring(k,k+A),T);8>A?(A=c(Math.pow(T,A)),S=S.j(A).add(c(D))):(S=S.j(_),S=S.add(c(D)))}return S}var d=l(0),h=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(g(this))return-v(this).m();for(var b=0,T=1,_=0;_<this.g.length;_++){var S=this.i(_);b+=(0<=S?S:4294967296+S)*T,T*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(m(this))return"0";if(g(this))return"-"+v(this).toString(b);for(var T=c(Math.pow(b,6)),_=this,S="";;){var k=I(_,T).g;_=y(_,k.j(T));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(b);if(_=k,m(_))return A+S;for(;6>A.length;)A="0"+A;S=A+S}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function m(b){if(b.h!=0)return!1;for(var T=0;T<b.g.length;T++)if(b.g[T]!=0)return!1;return!0}function g(b){return b.h==-1}t.l=function(b){return b=y(this,b),g(b)?-1:m(b)?0:1};function v(b){for(var T=b.g.length,_=[],S=0;S<T;S++)_[S]=~b.g[S];return new a(_,~b.h).add(h)}t.abs=function(){return g(this)?v(this):this},t.add=function(b){for(var T=Math.max(this.g.length,b.g.length),_=[],S=0,k=0;k<=T;k++){var A=S+(this.i(k)&65535)+(b.i(k)&65535),D=(A>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);S=D>>>16,A&=65535,D&=65535,_[k]=D<<16|A}return new a(_,_[_.length-1]&-2147483648?-1:0)};function y(b,T){return b.add(v(T))}t.j=function(b){if(m(this)||m(b))return d;if(g(this))return g(b)?v(this).j(v(b)):v(v(this).j(b));if(g(b))return v(this.j(v(b)));if(0>this.l(p)&&0>b.l(p))return c(this.m()*b.m());for(var T=this.g.length+b.g.length,_=[],S=0;S<2*T;S++)_[S]=0;for(S=0;S<this.g.length;S++)for(var k=0;k<b.g.length;k++){var A=this.i(S)>>>16,D=this.i(S)&65535,N=b.i(k)>>>16,R=b.i(k)&65535;_[2*S+2*k]+=D*R,x(_,2*S+2*k),_[2*S+2*k+1]+=A*R,x(_,2*S+2*k+1),_[2*S+2*k+1]+=D*N,x(_,2*S+2*k+1),_[2*S+2*k+2]+=A*N,x(_,2*S+2*k+2)}for(S=0;S<T;S++)_[S]=_[2*S+1]<<16|_[2*S];for(S=T;S<2*T;S++)_[S]=0;return new a(_,0)};function x(b,T){for(;(b[T]&65535)!=b[T];)b[T+1]+=b[T]>>>16,b[T]&=65535,T++}function E(b,T){this.g=b,this.h=T}function I(b,T){if(m(T))throw Error("division by zero");if(m(b))return new E(d,d);if(g(b))return T=I(v(b),T),new E(v(T.g),v(T.h));if(g(T))return T=I(b,v(T)),new E(v(T.g),T.h);if(30<b.g.length){if(g(b)||g(T))throw Error("slowDivide_ only works with positive integers.");for(var _=h,S=T;0>=S.l(b);)_=P(_),S=P(S);var k=w(_,1),A=w(S,1);for(S=w(S,2),_=w(_,2);!m(S);){var D=A.add(S);0>=D.l(b)&&(k=k.add(_),A=D),S=w(S,1),_=w(_,1)}return T=y(b,k.j(T)),new E(k,T)}for(k=d;0<=b.l(T);){for(_=Math.max(1,Math.floor(b.m()/T.m())),S=Math.ceil(Math.log(_)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),A=c(_),D=A.j(T);g(D)||0<D.l(b);)_-=S,A=c(_),D=A.j(T);m(A)&&(A=h),k=k.add(A),b=y(b,D)}return new E(k,b)}t.A=function(b){return I(this,b).h},t.and=function(b){for(var T=Math.max(this.g.length,b.g.length),_=[],S=0;S<T;S++)_[S]=this.i(S)&b.i(S);return new a(_,this.h&b.h)},t.or=function(b){for(var T=Math.max(this.g.length,b.g.length),_=[],S=0;S<T;S++)_[S]=this.i(S)|b.i(S);return new a(_,this.h|b.h)},t.xor=function(b){for(var T=Math.max(this.g.length,b.g.length),_=[],S=0;S<T;S++)_[S]=this.i(S)^b.i(S);return new a(_,this.h^b.h)};function P(b){for(var T=b.g.length+1,_=[],S=0;S<T;S++)_[S]=b.i(S)<<1|b.i(S-1)>>>31;return new a(_,b.h)}function w(b,T){var _=T>>5;T%=32;for(var S=b.g.length-_,k=[],A=0;A<S;A++)k[A]=0<T?b.i(A+_)>>>T|b.i(A+_+1)<<32-T:b.i(A+_);return new a(k,b.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,_A=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,No=a}).apply(typeof QE<"u"?QE:typeof self<"u"?self:typeof window<"u"?window:{});var Cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var SA,lu,TA,o0,qg,wA,AA,CA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,M,G){return C==Array.prototype||C==Object.prototype||(C[M]=G.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cf=="object"&&Cf];for(var M=0;M<C.length;++M){var G=C[M];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var n=r(this);function s(C,M){if(M)e:{var G=n;C=C.split(".");for(var ie=0;ie<C.length-1;ie++){var Ie=C[ie];if(!(Ie in G))break e;G=G[Ie]}C=C[C.length-1],ie=G[C],M=M(ie),M!=ie&&M!=null&&e(G,C,{configurable:!0,writable:!0,value:M})}}function i(C,M){C instanceof String&&(C+="");var G=0,ie=!1,Ie={next:function(){if(!ie&&G<C.length){var Le=G++;return{value:M(Le,C[Le]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return Ie[Symbol.iterator]=function(){return Ie},Ie}s("Array.prototype.values",function(C){return C||function(){return i(this,function(M,G){return G})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(C){var M=typeof C;return M=M!="object"?M:C?Array.isArray(C)?"array":M:"null",M=="array"||M=="object"&&typeof C.length=="number"}function c(C){var M=typeof C;return M=="object"&&C!=null||M=="function"}function u(C,M,G){return C.call.apply(C.bind,arguments)}function d(C,M,G){if(!C)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var Ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ie,ie),C.apply(M,Ie)}}return function(){return C.apply(M,arguments)}}function h(C,M,G){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function p(C,M){var G=Array.prototype.slice.call(arguments,1);return function(){var ie=G.slice();return ie.push.apply(ie,arguments),C.apply(this,ie)}}function m(C,M){function G(){}G.prototype=M.prototype,C.aa=M.prototype,C.prototype=new G,C.prototype.constructor=C,C.Qb=function(ie,Ie,Le){for(var tt=Array(arguments.length-2),fr=2;fr<arguments.length;fr++)tt[fr-2]=arguments[fr];return M.prototype[Ie].apply(ie,tt)}}function g(C){const M=C.length;if(0<M){const G=Array(M);for(let ie=0;ie<M;ie++)G[ie]=C[ie];return G}return[]}function v(C,M){for(let G=1;G<arguments.length;G++){const ie=arguments[G];if(l(ie)){const Ie=C.length||0,Le=ie.length||0;C.length=Ie+Le;for(let tt=0;tt<Le;tt++)C[Ie+tt]=ie[tt]}else C.push(ie)}}class y{constructor(M,G){this.i=M,this.j=G,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function x(C){return/^[\s\xa0]*$/.test(C)}function E(){var C=o.navigator;return C&&(C=C.userAgent)?C:""}function I(C){return I[" "](C),C}I[" "]=function(){};var P=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function w(C,M,G){for(const ie in C)M.call(G,C[ie],ie,C)}function b(C,M){for(const G in C)M.call(void 0,C[G],G,C)}function T(C){const M={};for(const G in C)M[G]=C[G];return M}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(C,M){let G,ie;for(let Ie=1;Ie<arguments.length;Ie++){ie=arguments[Ie];for(G in ie)C[G]=ie[G];for(let Le=0;Le<_.length;Le++)G=_[Le],Object.prototype.hasOwnProperty.call(ie,G)&&(C[G]=ie[G])}}function k(C){var M=1;C=C.split(":");const G=[];for(;0<M&&C.length;)G.push(C.shift()),M--;return C.length&&G.push(C.join(":")),G}function A(C){o.setTimeout(()=>{throw C},0)}function D(){var C=V;let M=null;return C.g&&(M=C.g,C.g=C.g.next,C.g||(C.h=null),M.next=null),M}class N{constructor(){this.h=this.g=null}add(M,G){const ie=R.get();ie.set(M,G),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var R=new y(()=>new F,C=>C.reset());class F{constructor(){this.next=this.g=this.h=null}set(M,G){this.h=M,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let O,B=!1,V=new N,z=()=>{const C=o.Promise.resolve(void 0);O=()=>{C.then(H)}};var H=()=>{for(var C;C=D();){try{C.h.call(C.g)}catch(G){A(G)}var M=R;M.j(C),100>M.h&&(M.h++,C.next=M.g,M.g=C)}B=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(C,M){this.type=C,this.g=this.target=M,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var C=!1,M=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const G=()=>{};o.addEventListener("test",G,M),o.removeEventListener("test",G,M)}catch{}return C}();function re(C,M){if(W.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var G=this.type=C.type,ie=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=M,M=C.relatedTarget){if(P){e:{try{I(M.nodeName);var Ie=!0;break e}catch{}Ie=!1}Ie||(M=null)}}else G=="mouseover"?M=C.fromElement:G=="mouseout"&&(M=C.toElement);this.relatedTarget=M,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:he[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&re.aa.h.call(this)}}m(re,W);var he={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),pe=0;function te(C,M,G,ie,Ie){this.listener=C,this.proxy=null,this.src=M,this.type=G,this.capture=!!ie,this.ha=Ie,this.key=++pe,this.da=this.fa=!1}function Y(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function Ee(C){this.src=C,this.g={},this.h=0}Ee.prototype.add=function(C,M,G,ie,Ie){var Le=C.toString();C=this.g[Le],C||(C=this.g[Le]=[],this.h++);var tt=q(C,M,ie,Ie);return-1<tt?(M=C[tt],G||(M.fa=!1)):(M=new te(M,this.src,Le,!!ie,Ie),M.fa=G,C.push(M)),M};function X(C,M){var G=M.type;if(G in C.g){var ie=C.g[G],Ie=Array.prototype.indexOf.call(ie,M,void 0),Le;(Le=0<=Ie)&&Array.prototype.splice.call(ie,Ie,1),Le&&(Y(M),C.g[G].length==0&&(delete C.g[G],C.h--))}}function q(C,M,G,ie){for(var Ie=0;Ie<C.length;++Ie){var Le=C[Ie];if(!Le.da&&Le.listener==M&&Le.capture==!!G&&Le.ha==ie)return Ie}return-1}var J="closure_lm_"+(1e6*Math.random()|0),ge={};function ae(C,M,G,ie,Ie){if(Array.isArray(M)){for(var Le=0;Le<M.length;Le++)ae(C,M[Le],G,ie,Ie);return null}return G=$e(G),C&&C[ue]?C.K(M,G,c(ie)?!!ie.capture:!1,Ie):se(C,M,G,!1,ie,Ie)}function se(C,M,G,ie,Ie,Le){if(!M)throw Error("Invalid event type");var tt=c(Ie)?!!Ie.capture:!!Ie,fr=Ge(C);if(fr||(C[J]=fr=new Ee(C)),G=fr.add(M,G,ie,tt,Le),G.proxy)return G;if(ie=le(),G.proxy=ie,ie.src=C,ie.listener=G,C.addEventListener)K||(Ie=tt),Ie===void 0&&(Ie=!1),C.addEventListener(M.toString(),ie,Ie);else if(C.attachEvent)C.attachEvent(Ce(M.toString()),ie);else if(C.addListener&&C.removeListener)C.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return G}function le(){function C(G){return M.call(C.src,C.listener,G)}const M=we;return C}function xe(C,M,G,ie,Ie){if(Array.isArray(M))for(var Le=0;Le<M.length;Le++)xe(C,M[Le],G,ie,Ie);else ie=c(ie)?!!ie.capture:!!ie,G=$e(G),C&&C[ue]?(C=C.i,M=String(M).toString(),M in C.g&&(Le=C.g[M],G=q(Le,G,ie,Ie),-1<G&&(Y(Le[G]),Array.prototype.splice.call(Le,G,1),Le.length==0&&(delete C.g[M],C.h--)))):C&&(C=Ge(C))&&(M=C.g[M.toString()],C=-1,M&&(C=q(M,G,ie,Ie)),(G=-1<C?M[C]:null)&&ve(G))}function ve(C){if(typeof C!="number"&&C&&!C.da){var M=C.src;if(M&&M[ue])X(M.i,C);else{var G=C.type,ie=C.proxy;M.removeEventListener?M.removeEventListener(G,ie,C.capture):M.detachEvent?M.detachEvent(Ce(G),ie):M.addListener&&M.removeListener&&M.removeListener(ie),(G=Ge(M))?(X(G,C),G.h==0&&(G.src=null,M[J]=null)):Y(C)}}}function Ce(C){return C in ge?ge[C]:ge[C]="on"+C}function we(C,M){if(C.da)C=!0;else{M=new re(M,this);var G=C.listener,ie=C.ha||C.src;C.fa&&ve(C),C=G.call(ie,M)}return C}function Ge(C){return C=C[J],C instanceof Ee?C:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(C){return typeof C=="function"?C:(C[ke]||(C[ke]=function(M){return C.handleEvent(M)}),C[ke])}function Be(){j.call(this),this.i=new Ee(this),this.M=this,this.F=null}m(Be,j),Be.prototype[ue]=!0,Be.prototype.removeEventListener=function(C,M,G,ie){xe(this,C,M,G,ie)};function We(C,M){var G,ie=C.F;if(ie)for(G=[];ie;ie=ie.F)G.push(ie);if(C=C.M,ie=M.type||M,typeof M=="string")M=new W(M,C);else if(M instanceof W)M.target=M.target||C;else{var Ie=M;M=new W(ie,C),S(M,Ie)}if(Ie=!0,G)for(var Le=G.length-1;0<=Le;Le--){var tt=M.g=G[Le];Ie=ze(tt,ie,!0,M)&&Ie}if(tt=M.g=C,Ie=ze(tt,ie,!0,M)&&Ie,Ie=ze(tt,ie,!1,M)&&Ie,G)for(Le=0;Le<G.length;Le++)tt=M.g=G[Le],Ie=ze(tt,ie,!1,M)&&Ie}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var C=this.i,M;for(M in C.g){for(var G=C.g[M],ie=0;ie<G.length;ie++)Y(G[ie]);delete C.g[M],C.h--}}this.F=null},Be.prototype.K=function(C,M,G,ie){return this.i.add(String(C),M,!1,G,ie)},Be.prototype.L=function(C,M,G,ie){return this.i.add(String(C),M,!0,G,ie)};function ze(C,M,G,ie){if(M=C.i.g[String(M)],!M)return!0;M=M.concat();for(var Ie=!0,Le=0;Le<M.length;++Le){var tt=M[Le];if(tt&&!tt.da&&tt.capture==G){var fr=tt.listener,gn=tt.ha||tt.src;tt.fa&&X(C.i,tt),Ie=fr.call(gn,ie)!==!1&&Ie}}return Ie&&!ie.defaultPrevented}function be(C,M,G){if(typeof C=="function")G&&(C=h(C,G));else if(C&&typeof C.handleEvent=="function")C=h(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:o.setTimeout(C,M||0)}function ye(C){C.g=be(()=>{C.g=null,C.i&&(C.i=!1,ye(C))},C.l);const M=C.h;C.h=null,C.m.apply(null,M)}class Te extends j{constructor(M,G){super(),this.m=M,this.l=G,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:ye(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(C){j.call(this),this.h=C,this.g={}}m(Ne,j);var He=[];function ot(C){w(C.g,function(M,G){this.g.hasOwnProperty(G)&&ve(M)},C),C.g={}}Ne.prototype.N=function(){Ne.aa.N.call(this),ot(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=o.JSON.stringify,yt=o.JSON.parse,Mt=class{stringify(C){return o.JSON.stringify(C,void 0)}parse(C){return o.JSON.parse(C,void 0)}};function ft(){}ft.prototype.h=null;function ct(C){return C.h||(C.h=C.i())}function mt(){}var It={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rt(){W.call(this,"d")}m(Rt,W);function Er(){W.call(this,"c")}m(Er,W);var Yn={},Ti=null;function ls(){return Ti=Ti||new Be}Yn.La="serverreachability";function pl(C){W.call(this,Yn.La,C)}m(pl,W);function Ba(C){const M=ls();We(M,new pl(M))}Yn.STAT_EVENT="statevent";function mo(C,M){W.call(this,Yn.STAT_EVENT,C),this.stat=M}m(mo,W);function Qr(C){const M=ls();We(M,new mo(M,C))}Yn.Ma="timingevent";function go(C,M){W.call(this,Yn.Ma,C),this.size=M}m(go,W);function Ir(C,M){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){C()},M)}function kn(){this.g=!0}kn.prototype.xa=function(){this.g=!1};function ml(C,M,G,ie,Ie,Le){C.info(function(){if(C.g)if(Le)for(var tt="",fr=Le.split("&"),gn=0;gn<fr.length;gn++){var rr=fr[gn].split("=");if(1<rr.length){var Dn=rr[0];rr=rr[1];var Pn=Dn.split("_");tt=2<=Pn.length&&Pn[1]=="type"?tt+(Dn+"="+rr+"&"):tt+(Dn+"=redacted&")}}else tt=null;else tt=Le;return"XMLHTTP REQ ("+ie+") [attempt "+Ie+"]: "+M+`
`+G+`
`+tt})}function Bc(C,M,G,ie,Ie,Le,tt){C.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Ie+"]: "+M+`
`+G+`
`+Le+" "+tt})}function ee(C,M,G,ie){C.info(function(){return"XMLHTTP TEXT ("+M+"): "+oe(C,G)+(ie?" "+ie:"")})}function de(C,M){C.info(function(){return"TIMEOUT: "+M})}kn.prototype.info=function(){};function oe(C,M){if(!C.g)return M;if(!M)return null;try{var G=JSON.parse(M);if(G){for(C=0;C<G.length;C++)if(Array.isArray(G[C])){var ie=G[C];if(!(2>ie.length)){var Ie=ie[1];if(Array.isArray(Ie)&&!(1>Ie.length)){var Le=Ie[0];if(Le!="noop"&&Le!="stop"&&Le!="close")for(var tt=1;tt<Ie.length;tt++)Ie[tt]=""}}}}return gt(G)}catch{return M}}var ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},me;function De(){}m(De,ft),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},me=new De;function Ue(C,M,G,ie){this.j=C,this.i=M,this.l=G,this.R=ie||1,this.U=new Ne(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}var Re={},Me={};function qe(C,M,G){C.L=1,C.v=of($a(M)),C.m=G,C.P=!0,et(C,null)}function et(C,M){C.F=Date.now(),at(C),C.A=$a(C.v);var G=C.A,ie=C.R;Array.isArray(ie)||(ie=[String(ie)]),gy(G.i,"t",ie),C.C=0,G=C.j.J,C.h=new Pe,C.g=Oy(C.j,G?M:null,!C.m),0<C.O&&(C.M=new Te(h(C.Y,C,C.g),C.O)),M=C.U,G=C.g,ie=C.ca;var Ie="readystatechange";Array.isArray(Ie)||(Ie&&(He[0]=Ie.toString()),Ie=He);for(var Le=0;Le<Ie.length;Le++){var tt=ae(G,Ie[Le],ie||M.handleEvent,!1,M.h||M);if(!tt)break;M.g[tt.key]=tt}M=C.H?T(C.H):{},C.m?(C.u||(C.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,M)):(C.u="GET",C.g.ea(C.A,C.u,null,M)),Ba(),ml(C.i,C.u,C.A,C.l,C.R,C.m)}Ue.prototype.ca=function(C){C=C.target;const M=this.M;M&&Va(C)==3?M.j():this.Y(C)},Ue.prototype.Y=function(C){try{if(C==this.g)e:{const Pn=Va(this.g);var M=this.g.Ba();const yl=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||Sy(this.g)))){this.J||Pn!=4||M==7||(M==8||0>=yl?Ba(3):Ba(2)),dr(this);var G=this.g.Z();this.X=G;t:if(lt(this)){var ie=Sy(this.g);C="";var Ie=ie.length,Le=Va(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),or(this);var tt="";break t}this.h.i=new o.TextDecoder}for(M=0;M<Ie;M++)this.h.h=!0,C+=this.h.i.decode(ie[M],{stream:!(Le&&M==Ie-1)});ie.length=0,this.h.g+=C,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=G==200,Bc(this.i,this.u,this.A,this.l,this.R,Pn,G),this.o){if(this.T&&!this.K){t:{if(this.g){var fr,gn=this.g;if((fr=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(fr)){var rr=fr;break t}}rr=null}if(G=rr)ee(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ua(this,G);else{this.o=!1,this.s=3,Qr(12),Sr(this),or(this);break e}}if(this.P){G=!0;let Ws;for(;!this.J&&this.C<tt.length;)if(Ws=Ye(this,tt),Ws==Me){Pn==4&&(this.s=4,Qr(14),G=!1),ee(this.i,this.l,null,"[Incomplete Response]");break}else if(Ws==Re){this.s=4,Qr(15),ee(this.i,this.l,tt,"[Invalid Chunk]"),G=!1;break}else ee(this.i,this.l,Ws,null),Ua(this,Ws);if(lt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||tt.length!=0||this.h.h||(this.s=1,Qr(16),G=!1),this.o=this.o&&G,!G)ee(this.i,this.l,tt,"[Invalid Chunked Response]"),Sr(this),or(this);else if(0<tt.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),Fp(Dn),Dn.M=!0,Qr(11))}}else ee(this.i,this.l,tt,null),Ua(this,tt);Pn==4&&Sr(this),this.o&&!this.J&&(Pn==4?Dy(this.j,this):(this.o=!1,at(this)))}else Qk(this.g),G==400&&0<tt.indexOf("Unknown SID")?(this.s=3,Qr(12)):(this.s=0,Qr(13)),Sr(this),or(this)}}}catch{}finally{}};function lt(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function Ye(C,M){var G=C.C,ie=M.indexOf(`
`,G);return ie==-1?Me:(G=Number(M.substring(G,ie)),isNaN(G)?Re:(ie+=1,ie+G>M.length?Me:(M=M.slice(ie,ie+G),C.C=ie+G,M)))}Ue.prototype.cancel=function(){this.J=!0,Sr(this)};function at(C){C.S=Date.now()+C.I,Tt(C,C.I)}function Tt(C,M){if(C.B!=null)throw Error("WatchDog timer not null");C.B=Ir(h(C.ba,C),M)}function dr(C){C.B&&(o.clearTimeout(C.B),C.B=null)}Ue.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(de(this.i,this.A),this.L!=2&&(Ba(),Qr(17)),Sr(this),this.s=2,or(this)):Tt(this,this.S-C)};function or(C){C.j.G==0||C.J||Dy(C.j,C)}function Sr(C){dr(C);var M=C.M;M&&typeof M.ma=="function"&&M.ma(),C.M=null,ot(C.U),C.g&&(M=C.g,C.g=null,M.abort(),M.ma())}function Ua(C,M){try{var G=C.j;if(G.G!=0&&(G.g==C||vs(G.h,C))){if(!C.K&&vs(G.h,C)&&G.G==3){try{var ie=G.Da.g.parse(M)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Ie=ie;if(Ie[0]==0){e:if(!G.u){if(G.g)if(G.g.F+3e3<C.F)hf(G),df(G);else break e;Pp(G),Qr(18)}}else G.za=Ie[1],0<G.za-G.T&&37500>Ie[2]&&G.F&&G.v==0&&!G.C&&(G.C=Ir(h(G.Za,G),6e3));if(1>=gl(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else yo(G,11)}else if((C.K||G.g==C)&&hf(G),!x(M))for(Ie=G.Da.g.parse(M),M=0;M<Ie.length;M++){let rr=Ie[M];if(G.T=rr[0],rr=rr[1],G.G==2)if(rr[0]=="c"){G.K=rr[1],G.ia=rr[2];const Dn=rr[3];Dn!=null&&(G.la=Dn,G.j.info("VER="+G.la));const Pn=rr[4];Pn!=null&&(G.Aa=Pn,G.j.info("SVER="+G.Aa));const yl=rr[5];yl!=null&&typeof yl=="number"&&0<yl&&(ie=1.5*yl,G.L=ie,G.j.info("backChannelRequestTimeoutMs_="+ie)),ie=G;const Ws=C.g;if(Ws){const mf=Ws.g?Ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mf){var Le=ie.h;Le.g||mf.indexOf("spdy")==-1&&mf.indexOf("quic")==-1&&mf.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(Ip(Le,Le.h),Le.h=null))}if(ie.D){const Rp=Ws.g?Ws.g.getResponseHeader("X-HTTP-Session-Id"):null;Rp&&(ie.ya=Rp,br(ie.I,ie.D,Rp))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-C.F,G.j.info("Handshake RTT: "+G.R+"ms")),ie=G;var tt=C;if(ie.qa=Ry(ie,ie.J?ie.ia:null,ie.W),tt.K){ly(ie.h,tt);var fr=tt,gn=ie.L;gn&&(fr.I=gn),fr.B&&(dr(fr),at(fr)),ie.g=tt}else Iy(ie);0<G.i.length&&ff(G)}else rr[0]!="stop"&&rr[0]!="close"||yo(G,7);else G.G==3&&(rr[0]=="stop"||rr[0]=="close"?rr[0]=="stop"?yo(G,7):Dp(G):rr[0]!="noop"&&G.l&&G.l.ta(rr),G.v=0)}}Ba(4)}catch{}}var vo=class{constructor(C,M){this.g=C,this.map=M}};function wi(C){this.l=C||10,o.PerformanceNavigationTiming?(C=o.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ma(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function gl(C){return C.h?1:C.g?C.g.size:0}function vs(C,M){return C.h?C.h==M:C.g?C.g.has(M):!1}function Ip(C,M){C.g?C.g.add(M):C.h=M}function ly(C,M){C.h&&C.h==M?C.h=null:C.g&&C.g.has(M)&&C.g.delete(M)}wi.prototype.cancel=function(){if(this.i=cy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function cy(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let M=C.i;for(const G of C.g.values())M=M.concat(G.D);return M}return g(C.i)}function Lk(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(l(C)){for(var M=[],G=C.length,ie=0;ie<G;ie++)M.push(C[ie]);return M}M=[],G=0;for(ie in C)M[G++]=C[ie];return M}function Bk(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(l(C)||typeof C=="string"){var M=[];C=C.length;for(var G=0;G<C;G++)M.push(G);return M}M=[],G=0;for(const ie in C)M[G++]=ie;return M}}}function uy(C,M){if(C.forEach&&typeof C.forEach=="function")C.forEach(M,void 0);else if(l(C)||typeof C=="string")Array.prototype.forEach.call(C,M,void 0);else for(var G=Bk(C),ie=Lk(C),Ie=ie.length,Le=0;Le<Ie;Le++)M.call(void 0,ie[Le],G&&G[Le],C)}var dy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uk(C,M){if(C){C=C.split("&");for(var G=0;G<C.length;G++){var ie=C[G].indexOf("="),Ie=null;if(0<=ie){var Le=C[G].substring(0,ie);Ie=C[G].substring(ie+1)}else Le=C[G];M(Le,Ie?decodeURIComponent(Ie.replace(/\+/g," ")):"")}}}function xo(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof xo){this.h=C.h,sf(this,C.j),this.o=C.o,this.g=C.g,af(this,C.s),this.l=C.l;var M=C.i,G=new Vc;G.i=M.i,M.g&&(G.g=new Map(M.g),G.h=M.h),fy(this,G),this.m=C.m}else C&&(M=String(C).match(dy))?(this.h=!1,sf(this,M[1]||"",!0),this.o=Uc(M[2]||""),this.g=Uc(M[3]||"",!0),af(this,M[4]),this.l=Uc(M[5]||"",!0),fy(this,M[6]||"",!0),this.m=Uc(M[7]||"")):(this.h=!1,this.i=new Vc(null,this.h))}xo.prototype.toString=function(){var C=[],M=this.j;M&&C.push($c(M,hy,!0),":");var G=this.g;return(G||M=="file")&&(C.push("//"),(M=this.o)&&C.push($c(M,hy,!0),"@"),C.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.s,G!=null&&C.push(":",String(G))),(G=this.l)&&(this.g&&G.charAt(0)!="/"&&C.push("/"),C.push($c(G,G.charAt(0)=="/"?jk:Vk,!0))),(G=this.i.toString())&&C.push("?",G),(G=this.m)&&C.push("#",$c(G,Gk)),C.join("")};function $a(C){return new xo(C)}function sf(C,M,G){C.j=G?Uc(M,!0):M,C.j&&(C.j=C.j.replace(/:$/,""))}function af(C,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);C.s=M}else C.s=null}function fy(C,M,G){M instanceof Vc?(C.i=M,Wk(C.i,C.h)):(G||(M=$c(M,Hk)),C.i=new Vc(M,C.h))}function br(C,M,G){C.i.set(M,G)}function of(C){return br(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Uc(C,M){return C?M?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function $c(C,M,G){return typeof C=="string"?(C=encodeURI(C).replace(M,$k),G&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function $k(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var hy=/[#\/\?@]/g,Vk=/[#\?:]/g,jk=/[#\?]/g,Hk=/[#\?@]/g,Gk=/#/g;function Vc(C,M){this.h=this.g=null,this.i=C||null,this.j=!!M}function Ai(C){C.g||(C.g=new Map,C.h=0,C.i&&Uk(C.i,function(M,G){C.add(decodeURIComponent(M.replace(/\+/g," ")),G)}))}t=Vc.prototype,t.add=function(C,M){Ai(this),this.i=null,C=vl(this,C);var G=this.g.get(C);return G||this.g.set(C,G=[]),G.push(M),this.h+=1,this};function py(C,M){Ai(C),M=vl(C,M),C.g.has(M)&&(C.i=null,C.h-=C.g.get(M).length,C.g.delete(M))}function my(C,M){return Ai(C),M=vl(C,M),C.g.has(M)}t.forEach=function(C,M){Ai(this),this.g.forEach(function(G,ie){G.forEach(function(Ie){C.call(M,Ie,ie,this)},this)},this)},t.na=function(){Ai(this);const C=Array.from(this.g.values()),M=Array.from(this.g.keys()),G=[];for(let ie=0;ie<M.length;ie++){const Ie=C[ie];for(let Le=0;Le<Ie.length;Le++)G.push(M[ie])}return G},t.V=function(C){Ai(this);let M=[];if(typeof C=="string")my(this,C)&&(M=M.concat(this.g.get(vl(this,C))));else{C=Array.from(this.g.values());for(let G=0;G<C.length;G++)M=M.concat(C[G])}return M},t.set=function(C,M){return Ai(this),this.i=null,C=vl(this,C),my(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[M]),this.h+=1,this},t.get=function(C,M){return C?(C=this.V(C),0<C.length?String(C[0]):M):M};function gy(C,M,G){py(C,M),0<G.length&&(C.i=null,C.g.set(vl(C,M),g(G)),C.h+=G.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],M=Array.from(this.g.keys());for(var G=0;G<M.length;G++){var ie=M[G];const Le=encodeURIComponent(String(ie)),tt=this.V(ie);for(ie=0;ie<tt.length;ie++){var Ie=Le;tt[ie]!==""&&(Ie+="="+encodeURIComponent(String(tt[ie]))),C.push(Ie)}}return this.i=C.join("&")};function vl(C,M){return M=String(M),C.j&&(M=M.toLowerCase()),M}function Wk(C,M){M&&!C.j&&(Ai(C),C.i=null,C.g.forEach(function(G,ie){var Ie=ie.toLowerCase();ie!=Ie&&(py(this,ie),gy(this,Ie,G))},C)),C.j=M}function zk(C,M){const G=new kn;if(o.Image){const ie=new Image;ie.onload=p(Ci,G,"TestLoadImage: loaded",!0,M,ie),ie.onerror=p(Ci,G,"TestLoadImage: error",!1,M,ie),ie.onabort=p(Ci,G,"TestLoadImage: abort",!1,M,ie),ie.ontimeout=p(Ci,G,"TestLoadImage: timeout",!1,M,ie),o.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=C}else M(!1)}function Kk(C,M){const G=new kn,ie=new AbortController,Ie=setTimeout(()=>{ie.abort(),Ci(G,"TestPingServer: timeout",!1,M)},1e4);fetch(C,{signal:ie.signal}).then(Le=>{clearTimeout(Ie),Le.ok?Ci(G,"TestPingServer: ok",!0,M):Ci(G,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(Ie),Ci(G,"TestPingServer: error",!1,M)})}function Ci(C,M,G,ie,Ie){try{Ie&&(Ie.onload=null,Ie.onerror=null,Ie.onabort=null,Ie.ontimeout=null),ie(G)}catch{}}function qk(){this.g=new Mt}function Xk(C,M,G){const ie=G||"";try{uy(C,function(Ie,Le){let tt=Ie;c(Ie)&&(tt=gt(Ie)),M.push(ie+Le+"="+encodeURIComponent(tt))})}catch(Ie){throw M.push(ie+"type="+encodeURIComponent("_badmap")),Ie}}function lf(C){this.l=C.Ub||null,this.j=C.eb||!1}m(lf,ft),lf.prototype.g=function(){return new cf(this.l,this.j)},lf.prototype.i=function(C){return function(){return C}}({});function cf(C,M){Be.call(this),this.D=C,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(cf,Be),t=cf.prototype,t.open=function(C,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=M,this.readyState=1,Hc(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(M.body=C),(this.D||o).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jc(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Hc(this)),this.g&&(this.readyState=3,Hc(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vy(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function vy(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var M=C.value?C.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!C.done}))&&(this.response=this.responseText+=M)}C.done?jc(this):Hc(this),this.readyState==3&&vy(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,jc(this))},t.Qa=function(C){this.g&&(this.response=C,jc(this))},t.ga=function(){this.g&&jc(this)};function jc(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Hc(C)}t.setRequestHeader=function(C,M){this.u.append(C,M)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],M=this.h.entries();for(var G=M.next();!G.done;)G=G.value,C.push(G[0]+": "+G[1]),G=M.next();return C.join(`\r
`)};function Hc(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(cf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function xy(C){let M="";return w(C,function(G,ie){M+=ie,M+=":",M+=G,M+=`\r
`}),M}function kp(C,M,G){e:{for(ie in G){var ie=!1;break e}ie=!0}ie||(G=xy(G),typeof C=="string"?G!=null&&encodeURIComponent(String(G)):br(C,M,G))}function Pr(C){Be.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Pr,Be);var Yk=/^https?$/i,Jk=["POST","PUT"];t=Pr.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,M,G,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);M=M?M.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():me.g(),this.v=this.o?ct(this.o):ct(me),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(M,String(C),!0),this.B=!1}catch(Le){yy(this,Le);return}if(C=G||"",G=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Ie in ie)G.set(Ie,ie[Ie]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Le of ie.keys())G.set(Le,ie.get(Le));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(G.keys()).find(Le=>Le.toLowerCase()=="content-type"),Ie=o.FormData&&C instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Jk,M,void 0))||ie||Ie||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,tt]of G)this.g.setRequestHeader(Le,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_y(this),this.u=!0,this.g.send(C),this.u=!1}catch(Le){yy(this,Le)}};function yy(C,M){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=M,C.m=5,Ey(C),uf(C)}function Ey(C){C.A||(C.A=!0,We(C,"complete"),We(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,We(this,"complete"),We(this,"abort"),uf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uf(this,!0)),Pr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?by(this):this.bb())},t.bb=function(){by(this)};function by(C){if(C.h&&typeof a<"u"&&(!C.v[1]||Va(C)!=4||C.Z()!=2)){if(C.u&&Va(C)==4)be(C.Ea,0,C);else if(We(C,"readystatechange"),Va(C)==4){C.h=!1;try{const tt=C.Z();e:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var G;if(!(G=M)){var ie;if(ie=tt===0){var Ie=String(C.D).match(dy)[1]||null;!Ie&&o.self&&o.self.location&&(Ie=o.self.location.protocol.slice(0,-1)),ie=!Yk.test(Ie?Ie.toLowerCase():"")}G=ie}if(G)We(C,"complete"),We(C,"success");else{C.m=6;try{var Le=2<Va(C)?C.g.statusText:""}catch{Le=""}C.l=Le+" ["+C.Z()+"]",Ey(C)}}finally{uf(C)}}}}function uf(C,M){if(C.g){_y(C);const G=C.g,ie=C.v[0]?()=>{}:null;C.g=null,C.v=null,M||We(C,"ready");try{G.onreadystatechange=ie}catch{}}}function _y(C){C.I&&(o.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function Va(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<Va(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var M=this.g.responseText;return C&&M.indexOf(C)==0&&(M=M.substring(C.length)),yt(M)}};function Sy(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function Qk(C){const M={};C=(C.g&&2<=Va(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<C.length;ie++){if(x(C[ie]))continue;var G=k(C[ie]);const Ie=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const Le=M[Ie]||[];M[Ie]=Le,Le.push(G)}b(M,function(ie){return ie.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gc(C,M,G){return G&&G.internalChannelParams&&G.internalChannelParams[C]||M}function Ty(C){this.Aa=0,this.i=[],this.j=new kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gc("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gc("baseRetryDelayMs",5e3,C),this.cb=Gc("retryDelaySeedMs",1e4,C),this.Wa=Gc("forwardChannelMaxRetries",2,C),this.wa=Gc("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new wi(C&&C.concurrentRequestLimit),this.Da=new qk,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ty.prototype,t.la=8,t.G=1,t.connect=function(C,M,G,ie){Qr(0),this.W=C,this.H=M||{},G&&ie!==void 0&&(this.H.OSID=G,this.H.OAID=ie),this.F=this.X,this.I=Ry(this,null,this.W),ff(this)};function Dp(C){if(wy(C),C.G==3){var M=C.U++,G=$a(C.I);if(br(G,"SID",C.K),br(G,"RID",M),br(G,"TYPE","terminate"),Wc(C,G),M=new Ue(C,C.j,M),M.L=2,M.v=of($a(G)),G=!1,o.navigator&&o.navigator.sendBeacon)try{G=o.navigator.sendBeacon(M.v.toString(),"")}catch{}!G&&o.Image&&(new Image().src=M.v,G=!0),G||(M.g=Oy(M.j,null),M.g.ea(M.v)),M.F=Date.now(),at(M)}Fy(C)}function df(C){C.g&&(Fp(C),C.g.cancel(),C.g=null)}function wy(C){df(C),C.u&&(o.clearTimeout(C.u),C.u=null),hf(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&o.clearTimeout(C.s),C.s=null)}function ff(C){if(!ma(C.h)&&!C.s){C.s=!0;var M=C.Ga;O||z(),B||(O(),B=!0),V.add(M,C),C.B=0}}function Zk(C,M){return gl(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=M.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=Ir(h(C.Ga,C,M),Py(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const Ie=new Ue(this,this.j,C);let Le=this.o;if(this.S&&(Le?(Le=T(Le),S(Le,this.S)):Le=this.S),this.m!==null||this.O||(Ie.H=Le,Le=null),this.P)e:{for(var M=0,G=0;G<this.i.length;G++){t:{var ie=this.i[G];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(M+=ie,4096<M){M=G;break e}if(M===4096||G===this.i.length-1){M=G+1;break e}}M=1e3}else M=1e3;M=Cy(this,Ie,M),G=$a(this.I),br(G,"RID",C),br(G,"CVER",22),this.D&&br(G,"X-HTTP-Session-Id",this.D),Wc(this,G),Le&&(this.O?M="headers="+encodeURIComponent(String(xy(Le)))+"&"+M:this.m&&kp(G,this.m,Le)),Ip(this.h,Ie),this.Ua&&br(G,"TYPE","init"),this.P?(br(G,"$req",M),br(G,"SID","null"),Ie.T=!0,qe(Ie,G,null)):qe(Ie,G,M),this.G=2}}else this.G==3&&(C?Ay(this,C):this.i.length==0||ma(this.h)||Ay(this))};function Ay(C,M){var G;M?G=M.l:G=C.U++;const ie=$a(C.I);br(ie,"SID",C.K),br(ie,"RID",G),br(ie,"AID",C.T),Wc(C,ie),C.m&&C.o&&kp(ie,C.m,C.o),G=new Ue(C,C.j,G,C.B+1),C.m===null&&(G.H=C.o),M&&(C.i=M.D.concat(C.i)),M=Cy(C,G,1e3),G.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Ip(C.h,G),qe(G,ie,M)}function Wc(C,M){C.H&&w(C.H,function(G,ie){br(M,ie,G)}),C.l&&uy({},function(G,ie){br(M,ie,G)})}function Cy(C,M,G){G=Math.min(C.i.length,G);var ie=C.l?h(C.l.Na,C.l,C):null;e:{var Ie=C.i;let Le=-1;for(;;){const tt=["count="+G];Le==-1?0<G?(Le=Ie[0].g,tt.push("ofs="+Le)):Le=0:tt.push("ofs="+Le);let fr=!0;for(let gn=0;gn<G;gn++){let rr=Ie[gn].g;const Dn=Ie[gn].map;if(rr-=Le,0>rr)Le=Math.max(0,Ie[gn].g-100),fr=!1;else try{Xk(Dn,tt,"req"+rr+"_")}catch{ie&&ie(Dn)}}if(fr){ie=tt.join("&");break e}}}return C=C.i.splice(0,G),M.D=C,ie}function Iy(C){if(!C.g&&!C.u){C.Y=1;var M=C.Fa;O||z(),B||(O(),B=!0),V.add(M,C),C.v=0}}function Pp(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=Ir(h(C.Fa,C),Py(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,ky(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=Ir(h(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qr(10),df(this),ky(this))};function Fp(C){C.A!=null&&(o.clearTimeout(C.A),C.A=null)}function ky(C){C.g=new Ue(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var M=$a(C.qa);br(M,"RID","rpc"),br(M,"SID",C.K),br(M,"AID",C.T),br(M,"CI",C.F?"0":"1"),!C.F&&C.ja&&br(M,"TO",C.ja),br(M,"TYPE","xmlhttp"),Wc(C,M),C.m&&C.o&&kp(M,C.m,C.o),C.L&&(C.g.I=C.L);var G=C.g;C=C.ia,G.L=1,G.v=of($a(M)),G.m=null,G.P=!0,et(G,C)}t.Za=function(){this.C!=null&&(this.C=null,df(this),Pp(this),Qr(19))};function hf(C){C.C!=null&&(o.clearTimeout(C.C),C.C=null)}function Dy(C,M){var G=null;if(C.g==M){hf(C),Fp(C),C.g=null;var ie=2}else if(vs(C.h,M))G=M.D,ly(C.h,M),ie=1;else return;if(C.G!=0){if(M.o)if(ie==1){G=M.m?M.m.length:0,M=Date.now()-M.F;var Ie=C.B;ie=ls(),We(ie,new go(ie,G)),ff(C)}else Iy(C);else if(Ie=M.s,Ie==3||Ie==0&&0<M.X||!(ie==1&&Zk(C,M)||ie==2&&Pp(C)))switch(G&&0<G.length&&(M=C.h,M.i=M.i.concat(G)),Ie){case 1:yo(C,5);break;case 4:yo(C,10);break;case 3:yo(C,6);break;default:yo(C,2)}}}function Py(C,M){let G=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(G*=2),G*M}function yo(C,M){if(C.j.info("Error code "+M),M==2){var G=h(C.fb,C),ie=C.Xa;const Ie=!ie;ie=new xo(ie||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||sf(ie,"https"),of(ie),Ie?zk(ie.toString(),G):Kk(ie.toString(),G)}else Qr(2);C.G=0,C.l&&C.l.sa(M),Fy(C),wy(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),Qr(2)):(this.j.info("Failed to ping google.com"),Qr(1))};function Fy(C){if(C.G=0,C.ka=[],C.l){const M=cy(C.h);(M.length!=0||C.i.length!=0)&&(v(C.ka,M),v(C.ka,C.i),C.h.i.length=0,g(C.i),C.i.length=0),C.l.ra()}}function Ry(C,M,G){var ie=G instanceof xo?$a(G):new xo(G);if(ie.g!="")M&&(ie.g=M+"."+ie.g),af(ie,ie.s);else{var Ie=o.location;ie=Ie.protocol,M=M?M+"."+Ie.hostname:Ie.hostname,Ie=+Ie.port;var Le=new xo(null);ie&&sf(Le,ie),M&&(Le.g=M),Ie&&af(Le,Ie),G&&(Le.l=G),ie=Le}return G=C.D,M=C.ya,G&&M&&br(ie,G,M),br(ie,"VER",C.la),Wc(C,ie),ie}function Oy(C,M,G){if(M&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=C.Ca&&!C.pa?new Pr(new lf({eb:G})):new Pr(C.pa),M.Ha(C.J),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ny(){}t=Ny.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pf(){}pf.prototype.g=function(C,M){return new xs(C,M)};function xs(C,M){Be.call(this),this.g=new Ty(M),this.l=C,this.h=M&&M.messageUrlParams||null,C=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(C?C["X-WebChannel-Content-Type"]=M.messageContentType:C={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(C?C["X-WebChannel-Client-Profile"]=M.va:C={"X-WebChannel-Client-Profile":M.va}),this.g.S=C,(C=M&&M.Sb)&&!x(C)&&(this.g.m=C),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!x(M)&&(this.g.D=M,C=this.h,C!==null&&M in C&&(C=this.h,M in C&&delete C[M])),this.j=new xl(this)}m(xs,Be),xs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xs.prototype.close=function(){Dp(this.g)},xs.prototype.o=function(C){var M=this.g;if(typeof C=="string"){var G={};G.__data__=C,C=G}else this.u&&(G={},G.__data__=gt(C),C=G);M.i.push(new vo(M.Ya++,C)),M.G==3&&ff(M)},xs.prototype.N=function(){this.g.l=null,delete this.j,Dp(this.g),delete this.g,xs.aa.N.call(this)};function My(C){Rt.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var M=C.__sm__;if(M){e:{for(const G in M){C=G;break e}C=void 0}(this.i=C)&&(C=this.i,M=M!==null&&C in M?M[C]:void 0),this.data=M}else this.data=C}m(My,Rt);function Ly(){Er.call(this),this.status=1}m(Ly,Er);function xl(C){this.g=C}m(xl,Ny),xl.prototype.ua=function(){We(this.g,"a")},xl.prototype.ta=function(C){We(this.g,new My(C))},xl.prototype.sa=function(C){We(this.g,new Ly)},xl.prototype.ra=function(){We(this.g,"b")},pf.prototype.createWebChannel=pf.prototype.g,xs.prototype.send=xs.prototype.o,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,CA=function(){return new pf},AA=function(){return ls()},wA=Yn,qg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ce.NO_ERROR=0,ce.TIMEOUT=8,ce.HTTP_ERROR=6,o0=ce,fe.COMPLETE="complete",TA=fe,mt.EventType=It,It.OPEN="a",It.CLOSE="b",It.ERROR="c",It.MESSAGE="d",Be.prototype.listen=Be.prototype.K,lu=mt,Pr.prototype.listenOnce=Pr.prototype.L,Pr.prototype.getLastError=Pr.prototype.Ka,Pr.prototype.getLastErrorCode=Pr.prototype.Ba,Pr.prototype.getStatus=Pr.prototype.Z,Pr.prototype.getResponseJson=Pr.prototype.Oa,Pr.prototype.getResponseText=Pr.prototype.oa,Pr.prototype.send=Pr.prototype.ea,Pr.prototype.setWithCredentials=Pr.prototype.Ha,SA=Pr}).apply(typeof Cf<"u"?Cf:typeof self<"u"?self:typeof window<"u"?window:{});const ZE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new l1("@firebase/firestore");function Xc(){return Ho.logLevel}function ht(t,...e){if(Ho.logLevel<=Kt.DEBUG){const r=e.map(T1);Ho.debug(`Firestore (${Cc}): ${t}`,...r)}}function vi(t,...e){if(Ho.logLevel<=Kt.ERROR){const r=e.map(T1);Ho.error(`Firestore (${Cc}): ${t}`,...r)}}function Go(t,...e){if(Ho.logLevel<=Kt.WARN){const r=e.map(T1);Ho.warn(`Firestore (${Cc}): ${t}`,...r)}}function T1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t="Unexpected state"){const e=`FIRESTORE (${Cc}) INTERNAL ASSERTION FAILED: `+t;throw vi(e),new Error(e)}function cr(t,e){t||Ct()}function Ft(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends fa{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Mn.UNAUTHENTICATED))}shutdown(){}}class rO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class nO{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){cr(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ni,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ni)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(cr(typeof n.accessToken=="string"),new IA(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return cr(e===null||typeof e=="string"),new Mn(e)}}class sO{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class aO{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new sO(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){cr(this.o===void 0);const n=i=>{i.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,ht("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(cr(typeof r.token=="string"),this.R=r.token,new iO(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=lO(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function nr(t,e){return t<e?-1:t>e?1:0}function uc(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new nt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new nt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new nt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jr.fromMillis(Date.now())}static fromDate(e){return Jr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Jr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nr(this.nanoseconds,e.nanoseconds):nr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Jr(0,0))}static max(){return new Dt(new Jr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ct(),n===void 0?n=e.length-r:n>e.length-r&&Ct(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return id.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof id?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class vr extends id{construct(e,r,n){return new vr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new nt(je.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new vr(r)}static emptyPath(){return new vr([])}}const cO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends id{construct(e,r,n){return new dn(e,r,n)}static isValidIdentifier(e){return cO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dn(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new nt(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new nt(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new nt(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new nt(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(r)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.path=e}static fromPath(e){return new vt(vr.fromString(e))}static fromName(e){return new vt(vr.fromString(e).popFirst(5))}static empty(){return new vt(vr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return vr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vt(new vr(e.slice()))}}function uO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Dt.fromTimestamp(n===1e9?new Jr(r+1,0):new Jr(r,n));return new no(s,vt.empty(),e)}function dO(t){return new no(t.readTime,t.key,-1)}class no{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new no(Dt.min(),vt.empty(),-1)}static max(){return new no(Dt.max(),vt.empty(),-1)}}function fO(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=vt.comparator(t.documentKey,e.documentKey),r!==0?r:nr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(t){if(t.code!==je.FAILED_PRECONDITION||t.message!==hO)throw t;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ke((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ke?r:Ke.resolve(r)}catch(r){return Ke.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ke.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ke.reject(r)}static resolve(e){return new Ke((r,n)=>{r(e)})}static reject(e){return new Ke((r,n)=>{n(e)})}static waitFor(e){return new Ke((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=Ke.resolve(!1);for(const n of e)r=r.next(s=>s?Ke.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Ke((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Ke((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function mO(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function $d(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}A1.oe=-1;function Xh(t){return t==null}function G0(t){return t===0&&1/t==-1/0}function gO(t){return typeof t=="number"&&Number.isInteger(t)&&!G0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function rl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function DA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,r){this.comparator=e,this.root=r||En.EMPTY}insert(e,r){return new Dr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new If(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new If(this.root,e,this.comparator,!1)}getReverseIterator(){return new If(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new If(this.root,e,this.comparator,!0)}}class If{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??En.RED,this.left=s??En.EMPTY,this.right=i??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new En(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return En.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ct();const e=this.left.check();if(e!==this.right.check())throw Ct();return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct()}get value(){throw Ct()}get color(){throw Ct()}get left(){throw Ct()}get right(){throw Ct()}copy(e,r,n,s,i){return this}insert(e,r,n){return new En(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new Dr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new tb(this.data.getIterator())}getIteratorFrom(e){return new tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new wn(this.comparator);return r.data=e,r}}class tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new Ss([])}unionWith(e){let r=new wn(dn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Ss(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new PA("Invalid base64 string: "+i):i}}(e);return new pn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new pn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const vO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function so(t){if(cr(!!t),typeof t=="string"){let e=0;const r=vO.exec(t);if(cr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:$r(t.seconds),nanos:$r(t.nanos)}}function $r(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wo(t){return typeof t=="string"?pn.fromBase64String(t):pn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function C1(t){const e=t.mapValue.fields.__previous_value__;return Yh(e)?C1(e):e}function od(t){const e=so(t.mapValue.fields.__local_write_time__.timestampValue);return new Jr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class dc{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new dc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof dc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf={mapValue:{}};function zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yh(t)?4:EO(t)?9007199254740991:yO(t)?10:11:Ct()}function Da(t,e){if(t===e)return!0;const r=zo(t);if(r!==zo(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return od(t).isEqual(od(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=so(s.timestampValue),o=so(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Wo(s.bytesValue).isEqual(Wo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $r(s.geoPointValue.latitude)===$r(i.geoPointValue.latitude)&&$r(s.geoPointValue.longitude)===$r(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $r(s.integerValue)===$r(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=$r(s.doubleValue),o=$r(i.doubleValue);return a===o?G0(a)===G0(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return uc(t.arrayValue.values||[],e.arrayValue.values||[],Da);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(eb(a)!==eb(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Da(a[l],o[l])))return!1;return!0}(t,e);default:return Ct()}}function ld(t,e){return(t.values||[]).find(r=>Da(r,e))!==void 0}function fc(t,e){if(t===e)return 0;const r=zo(t),n=zo(e);if(r!==n)return nr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return nr(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=$r(i.integerValue||i.doubleValue),l=$r(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return rb(t.timestampValue,e.timestampValue);case 4:return rb(od(t),od(e));case 5:return nr(t.stringValue,e.stringValue);case 6:return function(i,a){const o=Wo(i),l=Wo(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=nr(o[c],l[c]);if(u!==0)return u}return nr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=nr($r(i.latitude),$r(a.latitude));return o!==0?o:nr($r(i.longitude),$r(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nb(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,u;const d=i.fields||{},h=a.fields||{},p=(o=d.value)===null||o===void 0?void 0:o.arrayValue,m=(l=h.value)===null||l===void 0?void 0:l.arrayValue,g=nr(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return g!==0?g:nb(p,m)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===kf.mapValue&&a===kf.mapValue)return 0;if(i===kf.mapValue)return 1;if(a===kf.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=nr(l[d],u[d]);if(h!==0)return h;const p=fc(o[l[d]],c[u[d]]);if(p!==0)return p}return nr(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Ct()}}function rb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nr(t,e);const r=so(t),n=so(e),s=nr(r.seconds,n.seconds);return s!==0?s:nr(r.nanos,n.nanos)}function nb(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=fc(r[s],n[s]);if(i)return i}return nr(r.length,n.length)}function hc(t){return Xg(t)}function Xg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=so(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Wo(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return vt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Xg(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Xg(r.fields[a])}`;return s+"}"}(t.mapValue):Ct()}function W0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yg(t){return!!t&&"integerValue"in t}function I1(t){return!!t&&"arrayValue"in t}function sb(t){return!!t&&"nullValue"in t}function ab(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function l0(t){return!!t&&"mapValue"in t}function yO(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ku(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return rl(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ku(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ku(t.arrayValue.values[r]);return e}return Object.assign({},t)}function EO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!l0(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(r)}setAll(e){let r=dn.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=ku(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());l0(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Da(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];l0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){rl(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new ms(ku(this.value))}}function FA(t){const e=[];return rl(t.fields,(r,n)=>{const s=new dn([r]);if(l0(n)){const i=FA(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Ss(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Un(e,0,Dt.min(),Dt.min(),Dt.min(),ms.empty(),0)}static newFoundDocument(e,r,n,s){return new Un(e,1,r,Dt.min(),n,s,0)}static newNoDocument(e,r){return new Un(e,2,r,Dt.min(),Dt.min(),ms.empty(),0)}static newUnknownDocument(e,r){return new Un(e,3,r,Dt.min(),Dt.min(),ms.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,r){this.position=e,this.inclusive=r}}function ib(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=vt.comparator(vt.fromName(a.referenceValue),r.key):n=fc(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function ob(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Da(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,r="asc"){this.field=e,this.dir=r}}function bO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{}class Yr extends RA{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new SO(e,r,n):r==="array-contains"?new AO(e,n):r==="in"?new CO(e,n):r==="not-in"?new IO(e,n):r==="array-contains-any"?new kO(e,n):new Yr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new TO(e,n):new wO(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(fc(r,this.value)):r!==null&&zo(this.value)===zo(r)&&this.matchesComparison(fc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ca extends RA{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ca(e,r)}matches(e){return OA(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function OA(t){return t.op==="and"}function NA(t){return _O(t)&&OA(t)}function _O(t){for(const e of t.filters)if(e instanceof ca)return!1;return!0}function Jg(t){if(t instanceof Yr)return t.field.canonicalString()+t.op.toString()+hc(t.value);if(NA(t))return t.filters.map(e=>Jg(e)).join(",");{const e=t.filters.map(r=>Jg(r)).join(",");return`${t.op}(${e})`}}function MA(t,e){return t instanceof Yr?function(n,s){return s instanceof Yr&&n.op===s.op&&n.field.isEqual(s.field)&&Da(n.value,s.value)}(t,e):t instanceof ca?function(n,s){return s instanceof ca&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&MA(a,s.filters[o]),!0):!1}(t,e):void Ct()}function LA(t){return t instanceof Yr?function(r){return`${r.field.canonicalString()} ${r.op} ${hc(r.value)}`}(t):t instanceof ca?function(r){return r.op.toString()+" {"+r.getFilters().map(LA).join(" ,")+"}"}(t):"Filter"}class SO extends Yr{constructor(e,r,n){super(e,r,n),this.key=vt.fromName(n.referenceValue)}matches(e){const r=vt.comparator(e.key,this.key);return this.matchesComparison(r)}}class TO extends Yr{constructor(e,r){super(e,"in",r),this.keys=BA("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class wO extends Yr{constructor(e,r){super(e,"not-in",r),this.keys=BA("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function BA(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>vt.fromName(n.referenceValue))}class AO extends Yr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return I1(r)&&ld(r.arrayValue,this.value)}}class CO extends Yr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ld(this.value.arrayValue,r)}}class IO extends Yr{constructor(e,r){super(e,"not-in",r)}matches(e){if(ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ld(this.value.arrayValue,r)}}class kO extends Yr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!I1(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ld(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function lb(t,e=null,r=[],n=[],s=null,i=null,a=null){return new DO(t,e,r,n,s,i,a)}function k1(t){const e=Ft(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Jg(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Xh(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>hc(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>hc(n)).join(",")),e.ue=r}return e.ue}function D1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!bO(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!MA(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ob(t.startAt,e.startAt)&&ob(t.endAt,e.endAt)}function Qg(t){return vt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PO(t,e,r,n,s,i,a,o){return new nl(t,e,r,n,s,i,a,o)}function Jh(t){return new nl(t)}function cb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function P1(t){return t.collectionGroup!==null}function Ql(t){const e=Ft(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new wn(dn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new cd(i,n))}),r.has(dn.keyField().canonicalString())||e.ce.push(new cd(dn.keyField(),n))}return e.ce}function wa(t){const e=Ft(t);return e.le||(e.le=FO(e,Ql(t))),e.le}function FO(t,e){if(t.limitType==="F")return lb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new cd(s.field,i)});const r=t.endAt?new pc(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new pc(t.startAt.position,t.startAt.inclusive):null;return lb(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Zg(t,e){const r=t.filters.concat([e]);return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function z0(t,e,r){return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Qh(t,e){return D1(wa(t),wa(e))&&t.limitType===e.limitType}function UA(t){return`${k1(wa(t))}|lt:${t.limitType}`}function Pl(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>LA(s)).join(", ")}]`),Xh(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>hc(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>hc(s)).join(",")),`Target(${n})`}(wa(t))}; limitType=${t.limitType})`}function Zh(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):vt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Ql(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=ib(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,Ql(n),s)||n.endAt&&!function(a,o,l){const c=ib(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,Ql(n),s))}(t,e)}function RO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $A(t){return(e,r)=>{let n=!1;for(const s of Ql(t)){const i=OO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function OO(t,e,r){const n=t.field.isKeyField()?vt.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?fc(l,c):Ct()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ct()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){rl(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return DA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new Dr(vt.comparator);function xi(){return NO}const VA=new Dr(vt.comparator);function cu(...t){let e=VA;for(const r of t)e=e.insert(r.key,r);return e}function jA(t){let e=VA;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Io(){return Du()}function HA(){return Du()}function Du(){return new Ic(t=>t.toString(),(t,e)=>t.isEqual(e))}const MO=new Dr(vt.comparator),LO=new wn(vt.comparator);function Gt(...t){let e=LO;for(const r of t)e=e.add(r);return e}const BO=new wn(nr);function UO(){return BO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:G0(e)?"-0":e}}function GA(t){return{integerValue:""+t}}function $O(t,e){return gO(e)?GA(e):F1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this._=void 0}}function VO(t,e,r){return t instanceof ud?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Yh(i)&&(i=C1(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof dd?zA(t,e):t instanceof fd?KA(t,e):function(s,i){const a=WA(s,i),o=ub(a)+ub(s.Pe);return Yg(a)&&Yg(s.Pe)?GA(o):F1(s.serializer,o)}(t,e)}function jO(t,e,r){return t instanceof dd?zA(t,e):t instanceof fd?KA(t,e):r}function WA(t,e){return t instanceof K0?function(n){return Yg(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class ud extends ep{}class dd extends ep{constructor(e){super(),this.elements=e}}function zA(t,e){const r=qA(e);for(const n of t.elements)r.some(s=>Da(s,n))||r.push(n);return{arrayValue:{values:r}}}class fd extends ep{constructor(e){super(),this.elements=e}}function KA(t,e){let r=qA(e);for(const n of t.elements)r=r.filter(s=>!Da(s,n));return{arrayValue:{values:r}}}class K0 extends ep{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function ub(t){return $r(t.integerValue||t.doubleValue)}function qA(t){return I1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,r){this.field=e,this.transform=r}}function GO(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof dd&&s instanceof dd||n instanceof fd&&s instanceof fd?uc(n.elements,s.elements,Da):n instanceof K0&&s instanceof K0?Da(n.Pe,s.Pe):n instanceof ud&&s instanceof ud}(t.transform,e.transform)}class WO{constructor(e,r){this.version=e,this.transformResults=r}}class as{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function c0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tp{}function XA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rp(t.key,as.none()):new Vd(t.key,t.data,as.none());{const r=t.data,n=ms.empty();let s=new wn(dn.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new co(t.key,n,new Ss(s.toArray()),as.none())}}function zO(t,e,r){t instanceof Vd?function(s,i,a){const o=s.value.clone(),l=fb(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof co?function(s,i,a){if(!c0(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=fb(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(YA(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Pu(t,e,r,n){return t instanceof Vd?function(i,a,o,l){if(!c0(i.precondition,a))return o;const c=i.value.clone(),u=hb(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof co?function(i,a,o,l){if(!c0(i.precondition,a))return o;const c=hb(i.fieldTransforms,l,a),u=a.data;return u.setAll(YA(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,a,o){return c0(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function KO(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=WA(n.transform,s||null);i!=null&&(r===null&&(r=ms.empty()),r.set(n.field,i))}return r||null}function db(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&uc(n,s,(i,a)=>GO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vd extends tp{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class co extends tp{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function YA(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function fb(t,e,r){const n=new Map;cr(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,jO(a,o,r[s]))}return n}function hb(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,VO(i,a,e))}return n}class rp extends tp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qO extends tp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&zO(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Pu(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Pu(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=HA();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=XA(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Dt.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Gt())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,(r,n)=>db(r,n))&&uc(this.baseMutations,e.baseMutations,(r,n)=>db(r,n))}}class R1{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){cr(e.mutations.length===n.length);let s=function(){return MO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new R1(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr,Jt;function QO(t){switch(t){default:return Ct();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function JA(t){if(t===void 0)return vi("GRPC error has no .code"),je.UNKNOWN;switch(t){case Wr.OK:return je.OK;case Wr.CANCELLED:return je.CANCELLED;case Wr.UNKNOWN:return je.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return je.INTERNAL;case Wr.UNAVAILABLE:return je.UNAVAILABLE;case Wr.UNAUTHENTICATED:return je.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case Wr.NOT_FOUND:return je.NOT_FOUND;case Wr.ALREADY_EXISTS:return je.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return je.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case Wr.ABORTED:return je.ABORTED;case Wr.OUT_OF_RANGE:return je.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return je.UNIMPLEMENTED;case Wr.DATA_LOSS:return je.DATA_LOSS;default:return Ct()}}(Jt=Wr||(Wr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=new No([4294967295,4294967295],0);function pb(t){const e=ZO().encode(t),r=new _A;return r.update(e),new Uint8Array(r.digest())}function mb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new No([r,n],0),new No([s,i],0)]}class O1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new uu(`Invalid padding: ${r}`);if(n<0)throw new uu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new uu(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=No.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(No.fromNumber(n)));return s.compare(e5)===1&&(s=new No([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=pb(e),[n,s]=mb(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new O1(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=pb(e),[n,s]=mb(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,jd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new np(Dt.min(),s,new Dr(nr),xi(),Gt())}}class jd{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new jd(n,r,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class QA{constructor(e,r){this.targetId=e,this.me=r}}class ZA{constructor(e,r,n=pn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class gb{constructor(){this.fe=0,this.ge=xb(),this.pe=pn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Gt(),r=Gt(),n=Gt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Ct()}}),new jd(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=xb()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,cr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class t5{constructor(e){this.Le=e,this.Be=new Map,this.ke=xi(),this.qe=vb(),this.Qe=new Dr(nr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Ct()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Qg(i))if(n===0){const a=new vt(i.path);this.Ue(r,a,Un.newNoDocument(a,Dt.min()))}else cr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=Wo(n).toUint8Array()}catch(l){if(l instanceof PA)return Go("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new O1(a,s,i)}catch(l){return Go(l instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Qg(o.target)){const l=new vt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Un.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=Gt();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new np(e,r,this.Qe,this.ke,n);return this.ke=xi(),this.qe=vb(),this.Qe=new Dr(nr),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new gb,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new wn(nr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ht("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gb),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function vb(){return new Dr(vt.comparator)}function xb(){return new Dr(vt.comparator)}const r5={asc:"ASCENDING",desc:"DESCENDING"},n5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s5={and:"AND",or:"OR"};class a5{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function ev(t,e){return t.useProto3Json||Xh(e)?e:{value:e}}function q0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function i5(t,e){return q0(t,e.toTimestamp())}function Aa(t){return cr(!!t),Dt.fromTimestamp(function(r){const n=so(r);return new Jr(n.seconds,n.nanos)}(t))}function N1(t,e){return tv(t,e).canonicalString()}function tv(t,e){const r=function(s){return new vr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function tC(t){const e=vr.fromString(t);return cr(iC(e)),e}function rv(t,e){return N1(t.databaseId,e.path)}function em(t,e){const r=tC(e);if(r.get(1)!==t.databaseId.projectId)throw new nt(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new nt(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new vt(nC(r))}function rC(t,e){return N1(t.databaseId,e)}function o5(t){const e=tC(t);return e.length===4?vr.emptyPath():nC(e)}function nv(t){return new vr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nC(t){return cr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yb(t,e,r){return{name:rv(t,e),fields:r.value.mapValue.fields}}function l5(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ct()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(cr(u===void 0||typeof u=="string"),pn.fromBase64String(u||"")):(cr(u===void 0||u instanceof Buffer||u instanceof Uint8Array),pn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?je.UNKNOWN:JA(c.code);return new nt(u,c.message||"")}(a);r=new ZA(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=em(t,n.document.name),i=Aa(n.document.updateTime),a=n.document.createTime?Aa(n.document.createTime):Dt.min(),o=new ms({mapValue:{fields:n.document.fields}}),l=Un.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new u0(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=em(t,n.document),i=n.readTime?Aa(n.readTime):Dt.min(),a=Un.newNoDocument(s,i),o=n.removedTargetIds||[];r=new u0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=em(t,n.document),i=n.removedTargetIds||[];r=new u0([],i,s,null)}else{if(!("filter"in e))return Ct();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new JO(s,i),o=n.targetId;r=new QA(o,a)}}return r}function c5(t,e){let r;if(e instanceof Vd)r={update:yb(t,e.key,e.value)};else if(e instanceof rp)r={delete:rv(t,e.key)};else if(e instanceof co)r={update:yb(t,e.key,e.data),updateMask:x5(e.fieldMask)};else{if(!(e instanceof qO))return Ct();r={verify:rv(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof ud)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof dd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof fd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof K0)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Ct()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:i5(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ct()}(t,e.precondition)),r}function u5(t,e){return t&&t.length>0?(cr(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?Aa(s.updateTime):Aa(i);return a.isEqual(Dt.min())&&(a=Aa(i)),new WO(a,s.transformResults||[])}(r,e))):[]}function d5(t,e){return{documents:[rC(t,e.path)]}}function f5(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=rC(t,s);const i=function(c){if(c.length!==0)return aC(ca.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:Fl(h.field),direction:m5(h.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=ev(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function h5(t){let e=o5(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){cr(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(d){const h=sC(d);return h instanceof ca&&NA(h)?h.getFilters():[h]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(h=>function(m){return new cd(Rl(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(d){let h;return h=typeof d=="object"?d.value:d,Xh(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(d){const h=!!d.before,p=d.values||[];return new pc(p,h)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const h=!d.before,p=d.values||[];return new pc(p,h)}(r.endAt)),PO(e,s,a,i,o,"F",l,c)}function p5(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function sC(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Rl(r.unaryFilter.field);return Yr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Rl(r.unaryFilter.field);return Yr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Rl(r.unaryFilter.field);return Yr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Rl(r.unaryFilter.field);return Yr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ct()}}(t):t.fieldFilter!==void 0?function(r){return Yr.create(Rl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ct()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ca.create(r.compositeFilter.filters.map(n=>sC(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ct()}}(r.compositeFilter.op))}(t):Ct()}function m5(t){return r5[t]}function g5(t){return n5[t]}function v5(t){return s5[t]}function Fl(t){return{fieldPath:t.canonicalString()}}function Rl(t){return dn.fromServerFormat(t.fieldPath)}function aC(t){return t instanceof Yr?function(r){if(r.op==="=="){if(ab(r.value))return{unaryFilter:{field:Fl(r.field),op:"IS_NAN"}};if(sb(r.value))return{unaryFilter:{field:Fl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(ab(r.value))return{unaryFilter:{field:Fl(r.field),op:"IS_NOT_NAN"}};if(sb(r.value))return{unaryFilter:{field:Fl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fl(r.field),op:g5(r.op),value:r.value}}}(t):t instanceof ca?function(r){const n=r.getFilters().map(s=>aC(s));return n.length===1?n[0]:{compositeFilter:{op:v5(r.op),filters:n}}}(t):Ct()}function x5(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function iC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,r,n,s,i=Dt.min(),a=Dt.min(),o=pn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e){this.ct=e}}function E5(t){const e=h5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?z0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.un=new _5}addToCollectionParentIndex(e,r){return this.un.add(r),Ke.resolve()}getCollectionParents(e,r){return Ke.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ke.resolve()}deleteFieldIndex(e,r){return Ke.resolve()}deleteAllFieldIndexes(e){return Ke.resolve()}createTargetIndexes(e,r){return Ke.resolve()}getDocumentsMatchingTarget(e,r){return Ke.resolve(null)}getIndexType(e,r){return Ke.resolve(0)}getFieldIndexes(e,r){return Ke.resolve([])}getNextCollectionGroupToUpdate(e){return Ke.resolve(null)}getMinOffset(e,r){return Ke.resolve(no.min())}getMinOffsetFromCollectionGroup(e,r){return Ke.resolve(no.min())}updateCollectionGroup(e,r,n){return Ke.resolve()}updateIndexEntries(e,r){return Ke.resolve()}}class _5{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new wn(vr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new wn(vr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new mc(0)}static kn(){return new mc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(){this.changes=new Ic(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ke.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Pu(n.mutation,s,Ss.empty(),Jr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Gt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Gt()){const s=Io();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=cu();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Io();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Gt()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=xi();const a=Du(),o=function(){return Du()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof co)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),Pu(u.mutation,c,u.mutation.getFieldMask(),Jr.now())):a.set(c.key,Ss.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var d;return o.set(c,new T5(u,(d=a.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Du();let s=new Dr((a,o)=>a-o),i=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||Ss.empty();u=o.applyToLocalView(c,u),n.set(l,u);const d=(s.get(o.batchId)||Gt()).add(l);s=s.insert(o.batchId,d)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,d=HA();u.forEach(h=>{if(!i.has(h)){const p=XA(r.get(h),n.get(h));p!==null&&d.set(h,p),i=i.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Ke.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return vt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):P1(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Ke.resolve(Io());let o=-1,l=i;return a.next(c=>Ke.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),i.get(u)?Ke.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Gt())).next(u=>({batchId:o,changes:jA(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new vt(r)).next(n=>{let s=cu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=cu();return this.indexManager.getCollectionParents(e,i).next(o=>Ke.forEach(o,l=>{const c=function(d,h){return new nl(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((d,h)=>{a=a.insert(d,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Un.newInvalidDocument(u)))});let o=cu();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Pu(u.mutation,c,Ss.empty(),Jr.now()),Zh(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ke.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Aa(s.createTime)}}(r)),Ke.resolve()}getNamedQuery(e,r){return Ke.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:E5(s.bundledQuery),readTime:Aa(s.readTime)}}(r)),Ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.overlays=new Dr(vt.comparator),this.Ir=new Map}getOverlay(e,r){return Ke.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Io();return Ke.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Ke.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Ke.resolve()}getOverlaysForCollection(e,r,n){const s=Io(),i=r.length+1,a=new vt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Ke.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Dr((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=Io(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Io(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Ke.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new YO(r,n));let i=this.Ir.get(r);i===void 0&&(i=Gt(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return Ke.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.Tr=new wn(on.Er),this.dr=new wn(on.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new on(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new on(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new vt(new vr([])),n=new on(r,e),s=new on(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new vt(new vr([])),n=new on(r,e),s=new on(r,e+1);let i=Gt();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new on(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class on{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return vt.comparator(e.key,r.key)||nr(e.wr,r.wr)}static Ar(e,r){return nr(e.wr,r.wr)||vt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new wn(on.Er)}checkEmpty(e){return Ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new XO(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new on(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ke.resolve(a)}lookupMutationBatch(e,r){return Ke.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Ke.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new on(r,0),s=new on(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Ke.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new wn(nr);return r.forEach(s=>{const i=new on(s,0),a=new on(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Ke.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;vt.isDocumentKey(i)||(i=i.child(""));const a=new on(new vt(i),0);let o=new wn(nr);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),Ke.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){cr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ke.forEach(r.mutations,s=>{const i=new on(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new on(r,0),s=this.br.firstAfterOrEqual(n);return Ke.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ke.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.Mr=e,this.docs=function(){return new Dr(vt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ke.resolve(n?n.document.mutableCopy():Un.newInvalidDocument(r))}getEntries(e,r){let n=xi();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Un.newInvalidDocument(s))}),Ke.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=xi();const a=r.path,o=new vt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||fO(dO(u),n)<=0||(s.has(u.key)||Zh(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Ke.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Ct()}Or(e,r){return Ke.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new P5(this)}getSize(e){return Ke.resolve(this.size)}}class P5 extends S5{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Ke.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e){this.persistence=e,this.Nr=new Ic(r=>k1(r),D1),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new M1,this.targetCount=0,this.kr=mc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Ke.resolve()}getLastRemoteSnapshotVersion(e){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ke.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ke.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new mc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ke.resolve()}updateTargetData(e,r){return this.Kn(r),Ke.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Ke.waitFor(i).next(()=>s)}getTargetCount(e){return Ke.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ke.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ke.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Ke.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ke.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ke.resolve(n)}containsKey(e,r){return Ke.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,r){this.qr={},this.overlays={},this.Qr=new A1(0),this.Kr=!1,this.Kr=!0,this.$r=new I5,this.referenceDelegate=e(this),this.Ur=new F5(this),this.indexManager=new b5,this.remoteDocumentCache=function(s){return new D5(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new y5(r),this.Gr=new A5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new C5,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new k5(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ht("MemoryPersistence","Starting transaction:",e);const s=new O5(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Ke.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class O5 extends pO{constructor(e){super(),this.currentSequenceNumber=e}}class L1{constructor(e){this.persistence=e,this.Jr=new M1,this.Yr=null}static Zr(e){return new L1(e)}get Xr(){if(this.Yr)return this.Yr;throw Ct()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ke.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ke.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ke.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.Xr,n=>{const s=vt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Dt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ke.or([()=>Ke.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Gt(),s=Gt();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new B1(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return QF()?8:mO(Kn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new N5;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Xc()<=Kt.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",Pl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ke.resolve()):(Xc()<=Kt.DEBUG&&ht("QueryEngine","Query:",Pl(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Xc()<=Kt.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",Pl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wa(r))):Ke.resolve())}Yi(e,r){if(cb(r))return Ke.resolve(null);let n=wa(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=z0(r,null,"F"),n=wa(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Gt(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,z0(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return cb(r)||s.isEqual(Dt.min())?Ke.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Ke.resolve(null):(Xc()<=Kt.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pl(r)),this.rs(e,a,r,uO(s,-1)).next(o=>o))})}ts(e,r){let n=new wn($A(e));return r.forEach((s,i)=>{Zh(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Xc()<=Kt.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",Pl(r)),this.Ji.getDocumentsMatchingQuery(e,r,no.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Dr(nr),this._s=new Ic(i=>k1(i),D1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w5(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function B5(t,e,r,n){return new L5(t,e,r,n)}async function oC(t,e){const r=Ft(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=Gt();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function U5(t,e){const r=Ft(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const d=c.batch,h=d.keys();let p=Ke.resolve();return h.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(g=>{const v=c.docVersions.get(m);cr(v!==null),g.version.compareTo(v)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Gt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function lC(t){const e=Ft(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function $5(t,e){const r=Ft(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,d)=>{const h=s.get(d);if(!h)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,d).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,d)));let p=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(pn.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),s=s.insert(d,p),function(g,v,y){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,p,u)&&o.push(r.Ur.updateTargetData(i,p))});let l=xi(),c=Gt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(V5(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(Dt.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(d=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Ke.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function V5(t,e,r){let n=Gt(),s=Gt();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=xi();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Dt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):ht("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function j5(t,e){const r=Ft(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function H5(t,e){const r=Ft(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Ke.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Gi(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function sv(t,e,r){const n=Ft(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!$d(a))throw a;ht("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Eb(t,e,r){const n=Ft(t);let s=Dt.min(),i=Gt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const d=Ft(l),h=d._s.get(u);return h!==void 0?Ke.resolve(d.os.get(h)):d.Ur.getTargetData(c,u)}(n,a,wa(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:Dt.min(),r?i:Gt())).next(o=>(G5(n,RO(e),o),{documents:o,Ts:i})))}function G5(t,e,r){let n=t.us.get(e)||Dt.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class bb{constructor(){this.activeTargetIds=UO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W5{constructor(){this.so=new bb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new bb,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ht("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ht("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df=null;function tm(){return Df===null?Df=function(){return 268435456+Math.round(2147483648*Math.random())}():Df++,"0x"+Df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class X5 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=tm(),l=this.xo(r,n.toUriEncodedString());ht("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(ht("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw Go("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cc}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=K5[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=tm();return new Promise((a,o)=>{const l=new SA;l.setWithCredentials(!0),l.listenOnce(TA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case o0.NO_ERROR:const u=l.getResponseJson();ht(Fn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case o0.TIMEOUT:ht(Fn,`RPC '${e}' ${i} timed out`),o(new nt(je.DEADLINE_EXCEEDED,"Request time out"));break;case o0.HTTP_ERROR:const d=l.getStatus();if(ht(Fn,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const m=function(v){const y=v.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(y)>=0?y:je.UNKNOWN}(p.status);o(new nt(m,p.message))}else o(new nt(je.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new nt(je.UNAVAILABLE,"Connection failed."));break;default:Ct()}}finally{ht(Fn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ht(Fn,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=tm(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=CA(),o=AA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");ht(Fn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=a.createWebChannel(u,l);let h=!1,p=!1;const m=new q5({Io:v=>{p?ht(Fn,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(h||(ht(Fn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),ht(Fn,`RPC '${e}' stream ${s} sending:`,v),d.send(v))},To:()=>d.close()}),g=(v,y,x)=>{v.listen(y,E=>{try{x(E)}catch(I){setTimeout(()=>{throw I},0)}})};return g(d,lu.EventType.OPEN,()=>{p||(ht(Fn,`RPC '${e}' stream ${s} transport opened.`),m.yo())}),g(d,lu.EventType.CLOSE,()=>{p||(p=!0,ht(Fn,`RPC '${e}' stream ${s} transport closed`),m.So())}),g(d,lu.EventType.ERROR,v=>{p||(p=!0,Go(Fn,`RPC '${e}' stream ${s} transport errored:`,v),m.So(new nt(je.UNAVAILABLE,"The operation could not be completed")))}),g(d,lu.EventType.MESSAGE,v=>{var y;if(!p){const x=v.data[0];cr(!!x);const E=x,I=E.error||((y=E[0])===null||y===void 0?void 0:y.error);if(I){ht(Fn,`RPC '${e}' stream ${s} received error:`,I);const P=I.status;let w=function(_){const S=Wr[_];if(S!==void 0)return JA(S)}(P),b=I.message;w===void 0&&(w=je.INTERNAL,b="Unknown error status: "+P+" with message "+I.message),p=!0,m.So(new nt(w,b)),d.close()}else ht(Fn,`RPC '${e}' stream ${s} received:`,x),m.bo(x)}}),g(o,wA.STAT_EVENT,v=>{v.stat===qg.PROXY?ht(Fn,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===qg.NOPROXY&&ht(Fn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){return new a5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ht("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cC(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===je.RESOURCE_EXHAUSTED?(vi(r.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new nt(je.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ht("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ht("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Y5 extends uC{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=l5(this.serializer,e),n=function(i){if(!("targetChange"in i))return Dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Dt.min():a.readTime?Aa(a.readTime):Dt.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=nv(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=Qg(l)?{documents:d5(i,l)}:{query:f5(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=eC(i,a.resumeToken);const c=ev(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Dt.min())>0){o.readTime=q0(i,a.snapshotVersion.toTimestamp());const c=ev(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=p5(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=nv(this.serializer),r.removeTarget=e,this.a_(r)}}class J5 extends uC{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return cr(!!e.streamToken),this.lastStreamToken=e.streamToken,cr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){cr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=u5(e.writeResults,e.commitTime),n=Aa(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=nv(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>c5(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new nt(je.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,tv(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new nt(je.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,tv(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new nt(je.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Z5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vi(r),this.D_=!1):ht("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{sl(this)&&(ht("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ft(l);c.L_.add(4),await Hd(c),c.q_.set("Unknown"),c.L_.delete(4),await ap(c)}(this))})}),this.q_=new Z5(n,s)}}async function ap(t){if(sl(t))for(const e of t.B_)await e(!0)}async function Hd(t){for(const e of t.B_)await e(!1)}function dC(t,e){const r=Ft(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),j1(r)?V1(r):kc(r).r_()&&$1(r,e))}function U1(t,e){const r=Ft(t),n=kc(r);r.N_.delete(e),n.r_()&&fC(r,e),r.N_.size===0&&(n.r_()?n.o_():sl(r)&&r.q_.set("Unknown"))}function $1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}kc(t).A_(e)}function fC(t,e){t.Q_.xe(e),kc(t).R_(e)}function V1(t){t.Q_=new t5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),kc(t).start(),t.q_.v_()}function j1(t){return sl(t)&&!kc(t).n_()&&t.N_.size>0}function sl(t){return Ft(t).L_.size===0}function hC(t){t.Q_=void 0}async function tN(t){t.q_.set("Online")}async function rN(t){t.N_.forEach((e,r)=>{$1(t,e)})}async function nN(t,e){hC(t),j1(t)?(t.q_.M_(e),V1(t)):t.q_.set("Unknown")}async function sN(t,e,r){if(t.q_.set("Online"),e instanceof ZA&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){ht("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await X0(t,n)}else if(e instanceof u0?t.Q_.Ke(e):e instanceof QA?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Dt.min()))try{const n=await lC(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(pn.EMPTY_BYTE_STRING,u.snapshotVersion)),fC(i,l);const d=new Gi(u.target,l,c,u.sequenceNumber);$1(i,d)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){ht("RemoteStore","Failed to raise snapshot:",n),await X0(t,n)}}async function X0(t,e,r){if(!$d(e))throw e;t.L_.add(1),await Hd(t),t.q_.set("Offline"),r||(r=()=>lC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ht("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await ap(t)})}function pC(t,e){return e().catch(r=>X0(t,r,e))}async function ip(t){const e=Ft(t),r=ao(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;aN(e);)try{const s=await j5(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,iN(e,s)}catch(s){await X0(e,s)}mC(e)&&gC(e)}function aN(t){return sl(t)&&t.O_.length<10}function iN(t,e){t.O_.push(e);const r=ao(t);r.r_()&&r.V_&&r.m_(e.mutations)}function mC(t){return sl(t)&&!ao(t).n_()&&t.O_.length>0}function gC(t){ao(t).start()}async function oN(t){ao(t).p_()}async function lN(t){const e=ao(t);for(const r of t.O_)e.m_(r.mutations)}async function cN(t,e,r){const n=t.O_.shift(),s=R1.from(n,e,r);await pC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ip(t)}async function uN(t,e){e&&ao(t).V_&&await async function(n,s){if(function(a){return QO(a)&&a!==je.ABORTED}(s.code)){const i=n.O_.shift();ao(n).s_(),await pC(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ip(n)}}(t,e),mC(t)&&gC(t)}async function Sb(t,e){const r=Ft(t);r.asyncQueue.verifyOperationInProgress(),ht("RemoteStore","RemoteStore received new credentials");const n=sl(r);r.L_.add(3),await Hd(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await ap(r)}async function dN(t,e){const r=Ft(t);e?(r.L_.delete(2),await ap(r)):e||(r.L_.add(2),await Hd(r),r.q_.set("Unknown"))}function kc(t){return t.K_||(t.K_=function(r,n,s){const i=Ft(r);return i.w_(),new Y5(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:tN.bind(null,t),Ro:rN.bind(null,t),mo:nN.bind(null,t),d_:sN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),j1(t)?V1(t):t.q_.set("Unknown")):(await t.K_.stop(),hC(t))})),t.K_}function ao(t){return t.U_||(t.U_=function(r,n,s){const i=Ft(r);return i.w_(),new J5(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oN.bind(null,t),mo:uN.bind(null,t),f_:lN.bind(null,t),g_:cN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ip(t)):(await t.U_.stop(),t.O_.length>0&&(ht("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new H1(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G1(t,e){if(vi("AsyncQueue",`${e}: ${t}`),$d(t))return new nt(je.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.comparator=e?(r,n)=>e(r,n)||vt.comparator(r.key,n.key):(r,n)=>vt.comparator(r.key,n.key),this.keyedMap=cu(),this.sortedSet=new Dr(this.comparator)}static emptySet(e){return new Zl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Zl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.W_=new Dr(vt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Ct():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class gc{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new gc(e,r,Zl.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hN{constructor(){this.queries=wb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Ft(r),i=s.queries;s.queries=wb(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new nt(je.ABORTED,"Firestore shutting down"))}}function wb(){return new Ic(t=>UA(t),Qh)}async function W1(t,e){const r=Ft(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new fN,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=G1(a,`Initialization of query '${Pl(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&K1(r)}async function z1(t,e){const r=Ft(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function pN(t,e){const r=Ft(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&K1(r)}function mN(t,e,r){const n=Ft(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function K1(t){t.Y_.forEach(e=>{e.next()})}var av,Ab;(Ab=av||(av={})).ea="default",Ab.Cache="cache";class q1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new gc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==av.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.key=e}}class xC{constructor(e){this.key=e}}class gN{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Gt(),this.mutatedKeys=Gt(),this.Aa=$A(e),this.Ra=new Zl(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new Tb,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const h=s.get(u),p=Zh(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;h&&p?h.data.isEqual(p.data)?m!==g&&(n.track({type:3,doc:p}),v=!0):this.ga(h,p)||(n.track({type:2,doc:p}),v=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),v=!0):h&&!p&&(n.track({type:1,doc:h}),v=!0,(l||c)&&(o=!0)),v&&(p?(a=a.add(p),i=g?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,d)=>function(p,m){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct()}};return g(p)-g(m)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new gc(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Tb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Gt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new xC(n))}),this.da.forEach(n=>{e.has(n)||r.push(new vC(n))}),r}ba(e){this.Ta=e.Ts,this.da=Gt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return gc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class vN{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class xN{constructor(e){this.key=e,this.va=!1}}class yN{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ic(o=>UA(o),Qh),this.Ma=new Map,this.xa=new Set,this.Oa=new Dr(vt.comparator),this.Na=new Map,this.La=new M1,this.Ba={},this.ka=new Map,this.qa=mc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function EN(t,e,r=!0){const n=TC(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await yC(n,e,r,!0),s}async function bN(t,e){const r=TC(t);await yC(r,e,!0,!1)}async function yC(t,e,r,n){const s=await H5(t.localStore,wa(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await _N(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&dC(t.remoteStore,s),o}async function _N(t,e,r,n,s){t.Ka=(d,h,p)=>async function(g,v,y,x){let E=v.view.ma(y);E.ns&&(E=await Eb(g.localStore,v.query,!1).then(({documents:b})=>v.view.ma(b,E)));const I=x&&x.targetChanges.get(v.targetId),P=x&&x.targetMismatches.get(v.targetId)!=null,w=v.view.applyChanges(E,g.isPrimaryClient,I,P);return Ib(g,v.targetId,w.wa),w.snapshot}(t,d,h,p);const i=await Eb(t.localStore,e,!0),a=new gN(e,i.Ts),o=a.ma(i.documents),l=jd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);Ib(t,r,c.wa);const u=new vN(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function SN(t,e,r){const n=Ft(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Qh(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await sv(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&U1(n.remoteStore,s.targetId),iv(n,s.targetId)}).catch(Ud)):(iv(n,s.targetId),await sv(n.localStore,s.targetId,!0))}async function TN(t,e){const r=Ft(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),U1(r.remoteStore,n.targetId))}async function wN(t,e,r){const n=FN(t);try{const s=await function(a,o){const l=Ft(a),c=Jr.now(),u=o.reduce((p,m)=>p.add(m.key),Gt());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=xi(),g=Gt();return l.cs.getEntries(p,u).next(v=>{m=v,m.forEach((y,x)=>{x.isValidDocument()||(g=g.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(v=>{d=v;const y=[];for(const x of o){const E=KO(x,d.get(x.key).overlayedDocument);E!=null&&y.push(new co(x.key,E,FA(E.value.mapValue),as.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,y,o)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(d,g);return l.documentOverlayCache.saveOverlays(p,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:jA(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new Dr(nr)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await Gd(n,s.changes),await ip(n.remoteStore)}catch(s){const i=G1(s,"Failed to persist write");r.reject(i)}}async function EC(t,e){const r=Ft(t);try{const n=await $5(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(cr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?cr(a.va):s.removedDocuments.size>0&&(cr(a.va),a.va=!1))}),await Gd(r,n,e)}catch(n){await Ud(n)}}function Cb(t,e,r){const n=Ft(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Ft(a);l.onlineState=o;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.j_)h.Z_(o)&&(c=!0)}),c&&K1(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function AN(t,e,r){const n=Ft(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Dr(vt.comparator);a=a.insert(i,Un.newNoDocument(i,Dt.min()));const o=Gt().add(i),l=new np(Dt.min(),new Map,new Dr(nr),a,o);await EC(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),X1(n)}else await sv(n.localStore,e,!1).then(()=>iv(n,e,r)).catch(Ud)}async function CN(t,e){const r=Ft(t),n=e.batch.batchId;try{const s=await U5(r.localStore,e);_C(r,n,null),bC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Gd(r,s)}catch(s){await Ud(s)}}async function IN(t,e,r){const n=Ft(t);try{const s=await function(a,o){const l=Ft(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(cr(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);_C(n,e,r),bC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Gd(n,s)}catch(s){await Ud(s)}}function bC(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function _C(t,e,r){const n=Ft(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function iv(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||SC(t,n)})}function SC(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(U1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),X1(t))}function Ib(t,e,r){for(const n of r)n instanceof vC?(t.La.addReference(n.key,e),kN(t,n)):n instanceof xC?(ht("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||SC(t,n.key)):Ct()}function kN(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ht("SyncEngine","New document in limbo: "+r),t.xa.add(n),X1(t))}function X1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new vt(vr.fromString(e)),n=t.qa.next();t.Na.set(n,new xN(r)),t.Oa=t.Oa.insert(r,n),dC(t.remoteStore,new Gi(wa(Jh(r.path)),n,"TargetPurposeLimboResolution",A1.oe))}}async function Gd(t,e,r){const n=Ft(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=B1.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=Ft(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ke.forEach(c,h=>Ke.forEach(h.$i,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>Ke.forEach(h.Ui,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!$d(d))throw d;ht("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const p=u.os.get(h),m=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(m);u.os=u.os.insert(h,g)}}}(n.localStore,i))}async function DN(t,e){const r=Ft(t);if(!r.currentUser.isEqual(e)){ht("SyncEngine","User change. New user:",e.toKey());const n=await oC(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new nt(je.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Gd(r,n.hs)}}function PN(t,e){const r=Ft(t),n=r.Na.get(e);if(n&&n.va)return Gt().add(n.key);{let s=Gt();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function TC(t){const e=Ft(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AN.bind(null,e),e.Ca.d_=pN.bind(null,e.eventManager),e.Ca.$a=mN.bind(null,e.eventManager),e}function FN(t){const e=Ft(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IN.bind(null,e),e}class Y0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return B5(this.persistence,new M5,e.initialUser,this.serializer)}Ga(e){return new R5(L1.Zr,this.serializer)}Wa(e){return new W5}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Y0.provider={build:()=>new Y0};class ov{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Cb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=DN.bind(null,this.syncEngine),await dN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hN}()}createDatastore(e){const r=sp(e.databaseInfo.databaseId),n=function(i){return new X5(i)}(e.databaseInfo);return function(i,a,o,l){return new Q5(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new eN(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>Cb(this.syncEngine,r,0),function(){return _b.D()?new _b:new z5}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,u){const d=new yN(s,i,a,o,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Ft(s);ht("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Hd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}ov.provider={build:()=>new ov};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Mn.UNAUTHENTICATED,this.clientId=w1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{ht("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(ht("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=G1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function nm(t,e){t.asyncQueue.verifyOperationInProgress(),ht("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await oC(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kb(t,e){t.asyncQueue.verifyOperationInProgress();const r=await ON(t);ht("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>Sb(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>Sb(e.remoteStore,s)),t._onlineComponents=e}async function ON(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ht("FirestoreClient","Using user provided OfflineComponentProvider");try{await nm(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===je.FAILED_PRECONDITION||s.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Go("Error using user provided cache. Falling back to memory cache: "+r),await nm(t,new Y0)}}else ht("FirestoreClient","Using default OfflineComponentProvider"),await nm(t,new Y0);return t._offlineComponents}async function wC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ht("FirestoreClient","Using user provided OnlineComponentProvider"),await kb(t,t._uninitializedComponentsProvider._online)):(ht("FirestoreClient","Using default OnlineComponentProvider"),await kb(t,new ov))),t._onlineComponents}function NN(t){return wC(t).then(e=>e.syncEngine)}async function J0(t){const e=await wC(t),r=e.eventManager;return r.onListen=EN.bind(null,e.syncEngine),r.onUnlisten=SN.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=bN.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=TN.bind(null,e.syncEngine),r}function MN(t,e,r={}){const n=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new Y1({next:h=>{u.Za(),a.enqueueAndForget(()=>z1(i,d));const p=h.docs.has(o);!p&&h.fromCache?c.reject(new nt(je.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?c.reject(new nt(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new q1(Jh(o.path),u,{includeMetadataChanges:!0,_a:!0});return W1(i,d)}(await J0(t),t.asyncQueue,e,r,n)),n.promise}function LN(t,e,r={}){const n=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new Y1({next:h=>{u.Za(),a.enqueueAndForget(()=>z1(i,d)),h.fromCache&&l.source==="server"?c.reject(new nt(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new q1(o,u,{includeMetadataChanges:!0,_a:!0});return W1(i,d)}(await J0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t,e,r){if(!r)throw new nt(je.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IC(t,e,r,n){if(e===!0&&n===!0)throw new nt(je.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Pb(t){if(!vt.isDocumentKey(t))throw new nt(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fb(t){if(vt.isDocumentKey(t))throw new nt(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function op(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ct()}function Wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new nt(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=op(t);throw new nt(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function BN(t,e){if(e<=0)throw new nt(je.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new nt(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new nt(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new nt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new nt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new nt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new nt(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new kA;switch(n.type){case"firstParty":return new aO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new nt(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Db.get(r);n&&(ht("ComponentProvider","Removing Datastore"),Db.delete(r),n.terminate())}(this),Promise.resolve()}}function kC(t,e,r,n={}){var s;const i=(t=Wn(t,lp))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=Mn.MOCK_USER;else{o=Dw(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new nt(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Mn(c)}t._authCredentials=new rO(new IA(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ha(this.firestore,e,this._query)}}class An{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class si extends ha{constructor(e,r,n){super(e,r,Jh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new vt(e))}withConverter(e){return new si(this.firestore,e,this._path)}}function wt(t,e,...r){if(t=ar(t),CC("collection","path",e),t instanceof lp){const n=vr.fromString(e,...r);return Fb(n),new si(t,null,n)}{if(!(t instanceof An||t instanceof si))throw new nt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(vr.fromString(e,...r));return Fb(n),new si(t.firestore,null,n)}}function Qe(t,e,...r){if(t=ar(t),arguments.length===1&&(e=w1.newId()),CC("doc","path",e),t instanceof lp){const n=vr.fromString(e,...r);return Pb(n),new An(t,null,new vt(n))}{if(!(t instanceof An||t instanceof si))throw new nt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(vr.fromString(e,...r));return Pb(n),new An(t.firestore,t instanceof si?t.converter:null,new vt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cC(this,"async_queue_retry"),this.Vu=()=>{const n=rm();n&&ht("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=rm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=rm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ni;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$d(e))throw e;ht("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw vi("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=H1.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Ct()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function Nb(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ua extends lp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new Ob,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ob(e),this._firestoreClient=void 0,await e}}}function uo(t,e){const r=typeof t=="object"?t:Nd(),n=typeof t=="string"?t:"(default)",s=Od(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=o1("firestore");i&&kC(s,...i)}return s}function Dc(t){if(t._terminated)throw new nt(je.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UN(t),t._firestoreClient}function UN(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,u){return new xO(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,AC(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new RN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(pn.fromBase64String(e))}catch(r){throw new nt(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ko(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new nt(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new nt(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new nt(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nr(this._lat,e._lat)||nr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=/^__.*__$/;class VN{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,r,this.fieldTransforms):new Vd(e,this.data,r,this.fieldTransforms)}}class DC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new co(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function PC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct()}}class J1{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new J1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Q0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(PC(this.Cu)&&$N.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class jN{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||sp(e)}Qu(e,r,n,s=!1){return new J1({Cu:e,methodName:r,qu:n,path:dn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fc(t){const e=t._freezeSettings(),r=sp(t._databaseId);return new jN(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Q1(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);ex("Data must be an object, but it was:",a,n);const o=NC(n,a);let l,c;if(i.merge)l=new Ss(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const h=lv(e,d,r);if(!a.contains(h))throw new nt(je.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);LC(u,h)||u.push(h)}l=new Ss(u),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new VN(new ms(o),l,c)}class dp extends Wd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dp}}class Z1 extends Wd{_toFieldTransform(e){return new HO(e.path,new ud)}isEqual(e){return e instanceof Z1}}function FC(t,e,r,n){const s=t.Qu(1,e,r);ex("Data must be an object, but it was:",s,n);const i=[],a=ms.empty();rl(n,(l,c)=>{const u=tx(e,l,r);c=ar(c);const d=s.Nu(u);if(c instanceof dp)i.push(u);else{const h=zd(c,d);h!=null&&(i.push(u),a.set(u,h))}});const o=new Ss(i);return new DC(a,o,s.fieldTransforms)}function RC(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[lv(e,n,r)],l=[s];if(i.length%2!=0)throw new nt(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(lv(e,i[h])),l.push(i[h+1]);const c=[],u=ms.empty();for(let h=o.length-1;h>=0;--h)if(!LC(c,o[h])){const p=o[h];let m=l[h];m=ar(m);const g=a.Nu(p);if(m instanceof dp)c.push(p);else{const v=zd(m,g);v!=null&&(c.push(p),u.set(p,v))}}const d=new Ss(c);return new DC(u,d,a.fieldTransforms)}function OC(t,e,r,n=!1){return zd(r,t.Qu(n?4:3,e))}function zd(t,e){if(MC(t=ar(t)))return ex("Unsupported field value:",e,t),NC(t,e);if(t instanceof Wd)return function(n,s){if(!PC(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=zd(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=ar(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return $O(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Jr.fromDate(n);return{timestampValue:q0(s.serializer,i)}}if(n instanceof Jr){const i=new Jr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:q0(s.serializer,i)}}if(n instanceof cp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ko)return{bytesValue:eC(s.serializer,n._byteString)};if(n instanceof An){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:N1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof up)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return F1(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${op(n)}`)}(t,e)}function NC(t,e){const r={};return DA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rl(t,(n,s)=>{const i=zd(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function MC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Jr||t instanceof cp||t instanceof Ko||t instanceof An||t instanceof Wd||t instanceof up)}function ex(t,e,r){if(!MC(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=op(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function lv(t,e,r){if((e=ar(e))instanceof Pc)return e._internalPath;if(typeof e=="string")return tx(t,e);throw Q0("Field path arguments must be of type string or ",t,!1,void 0,r)}const HN=new RegExp("[~\\*/\\[\\]]");function tx(t,e,r){if(e.search(HN)>=0)throw Q0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Pc(...e.split("."))._internalPath}catch{throw Q0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Q0(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new nt(je.INVALID_ARGUMENT,o+t+l)}function LC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(fp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class GN extends rx{data(){return super.data()}}function fp(t,e){return typeof e=="string"?tx(t,e):e instanceof Pc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new nt(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nx{}class Kd extends nx{}function lr(t,e,...r){let n=[];e instanceof nx&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof hp).length,o=i.filter(l=>l instanceof qd).length;if(a>1||a>0&&o>0)throw new nt(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class qd extends Kd{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new qd(e,r,n)}_apply(e){const r=this._parse(e);return UC(e._query,r),new ha(e.firestore,e.converter,Zg(e._query,r))}_parse(e){const r=Fc(e.firestore);return function(i,a,o,l,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new nt(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Lb(d,u);const p=[];for(const m of d)p.push(Mb(l,i,m));h={arrayValue:{values:p}}}else h=Mb(l,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Lb(d,u),h=OC(o,a,d,u==="in"||u==="not-in");return Yr.create(c,u,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Vr(t,e,r){const n=e,s=fp("where",t);return qd._create(s,n,r)}class hp extends nx{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new hp(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:ca.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)UC(a,l),a=Zg(a,l)}(e._query,r),new ha(e.firestore,e.converter,Zg(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pp extends Kd{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new pp(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new nt(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new nt(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cd(i,a)}(e._query,this._field,this._direction);return new ha(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new nl(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function cn(t,e="asc"){const r=e,n=fp("orderBy",t);return pp._create(n,r)}class mp extends Kd{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new mp(e,r,n)}_apply(e){return new ha(e.firestore,e.converter,z0(e._query,this._limit,this._limitType))}}function Rs(t){return BN("limit",t),mp._create("limit",t,"F")}class gp extends Kd{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new gp(e,r,n)}_apply(e){const r=WN(e,this.type,this._docOrFields,this._inclusive);return new ha(e.firestore,e.converter,function(s,i){return new nl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function Z0(...t){return gp._create("startAfter",t,!1)}function WN(t,e,r,n){if(r[0]=ar(r[0]),r[0]instanceof rx)return function(i,a,o,l,c){if(!l)throw new nt(je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const d of Ql(i))if(d.field.isKeyField())u.push(W0(a,l.key));else{const h=l.data.field(d.field);if(Yh(h))throw new nt(je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=d.field.canonicalString();throw new nt(je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(h)}return new pc(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Fc(t.firestore);return function(a,o,l,c,u,d){const h=a.explicitOrderBy;if(u.length>h.length)throw new nt(je.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let m=0;m<u.length;m++){const g=u[m];if(h[m].field.isKeyField()){if(typeof g!="string")throw new nt(je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof g}`);if(!P1(a)&&g.indexOf("/")!==-1)throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${g}' contains a slash.`);const v=a.path.child(vr.fromString(g));if(!vt.isDocumentKey(v))throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new vt(v);p.push(W0(o,y))}else{const v=OC(l,c,g);p.push(v)}}return new pc(p,d)}(t._query,t.firestore._databaseId,s,e,r,n)}}function Mb(t,e,r){if(typeof(r=ar(r))=="string"){if(r==="")throw new nt(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!P1(e)&&r.indexOf("/")!==-1)throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(vr.fromString(r));if(!vt.isDocumentKey(n))throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return W0(t,new vt(n))}if(r instanceof An)return W0(t,r._key);throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${op(r)}.`)}function Lb(t,e){if(!Array.isArray(t)||t.length===0)throw new nt(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UC(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new nt(je.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new nt(je.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class $C{convertValue(e,r="none"){switch(zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ct()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return rl(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>$r(a.doubleValue));return new up(i)}convertGeoPoint(e){return new cp($r(e.latitude),$r(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=C1(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(od(e));default:return null}}convertTimestamp(e){const r=so(e);return new Jr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=vr.fromString(e);cr(iC(n));const s=new dc(n.get(1),n.get(3)),i=new vt(n.popFirst(5));return s.isEqual(r)||vi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ax extends rx{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(fp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Fu extends ax{data(e={}){return super.data(e)}}class ix{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Bl(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Fu(this._firestore,this._userDataWriter,n.key,n,new Bl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new nt(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new Fu(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Bl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new Fu(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Bl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:zN(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function zN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t){t=Wn(t,An);const e=Wn(t.firestore,ua);return MN(Dc(e),t._key).then(r=>jC(e,t,r))}class ox extends $C{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,r)}}function jt(t){t=Wn(t,ha);const e=Wn(t.firestore,ua),r=Dc(e),n=new ox(e);return BC(t._query),LN(r,t._query).then(s=>new ix(e,n,t,s))}function Wt(t,e,r){t=Wn(t,An);const n=Wn(t.firestore,ua),s=sx(t.converter,e,r);return Rc(n,[Q1(Fc(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,as.none())])}function Xd(t,e,r,...n){t=Wn(t,An);const s=Wn(t.firestore,ua),i=Fc(s);let a;return a=typeof(e=ar(e))=="string"||e instanceof Pc?RC(i,"updateDoc",t._key,e,r,n):FC(i,"updateDoc",t._key,e),Rc(s,[a.toMutation(t._key,as.exists(!0))])}function io(t){return Rc(Wn(t.firestore,ua),[new rp(t._key,as.none())])}function VC(t,e){const r=Wn(t.firestore,ua),n=Qe(t),s=sx(t.converter,e);return Rc(r,[Q1(Fc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,as.exists(!1))]).then(()=>n)}function vc(t,...e){var r,n,s;t=ar(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Nb(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Nb(e[a])){const d=e[a];e[a]=(r=d.next)===null||r===void 0?void 0:r.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,u;if(t instanceof An)c=Wn(t.firestore,ua),u=Jh(t._key.path),l={next:d=>{e[a]&&e[a](jC(c,t,d))},error:e[a+1],complete:e[a+2]};else{const d=Wn(t,ha);c=Wn(d.firestore,ua),u=d._query;const h=new ox(c);l={next:p=>{e[a]&&e[a](new ix(c,h,d,p))},error:e[a+1],complete:e[a+2]},BC(t._query)}return function(h,p,m,g){const v=new Y1(g),y=new q1(p,v,m);return h.asyncQueue.enqueueAndForget(async()=>W1(await J0(h),y)),()=>{v.Za(),h.asyncQueue.enqueueAndForget(async()=>z1(await J0(h),y))}}(Dc(c),u,o,l)}function Rc(t,e){return function(n,s){const i=new ni;return n.asyncQueue.enqueueAndForget(async()=>wN(await NN(n),s,i)),i.promise}(Dc(t),e)}function jC(t,e,r){const n=r.docs.get(e._key),s=new ox(t);return new ax(t,s,e._key,n,new Bl(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Fc(e)}set(e,r,n){this._verifyNotCommitted();const s=sm(e,this._firestore),i=sx(s.converter,r,n),a=Q1(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,as.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=sm(e,this._firestore);let a;return a=typeof(r=ar(r))=="string"||r instanceof Pc?RC(this._dataReader,"WriteBatch.update",i._key,r,n,s):FC(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,as.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=sm(e,this._firestore);return this._mutations=this._mutations.concat(new rp(r._key,as.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sm(t,e){if((t=ar(t)).firestore!==e)throw new nt(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Bs(){return new Z1("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t){return Dc(t=Wn(t,ua)),new HC(t,e=>Rc(t,e))}(function(e,r=!0){(function(s){Cc=s})(tl),to(new pi("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new ua(new nO(n.getProvider("auth-internal")),new oO(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new nt(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dc(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ls(ZE,"4.7.3",e),Ls(ZE,"4.7.3","esm2017")})();const KN=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:$C,Bytes:Ko,CollectionReference:si,DocumentReference:An,DocumentSnapshot:ax,FieldPath:Pc,FieldValue:Wd,Firestore:ua,FirestoreError:nt,GeoPoint:cp,Query:ha,QueryCompositeFilterConstraint:hp,QueryConstraint:Kd,QueryDocumentSnapshot:Fu,QueryFieldFilterConstraint:qd,QueryLimitConstraint:mp,QueryOrderByConstraint:pp,QuerySnapshot:ix,QueryStartAtConstraint:gp,SnapshotMetadata:Bl,Timestamp:Jr,VectorValue:up,WriteBatch:HC,_AutoId:w1,_ByteString:pn,_DatabaseId:dc,_DocumentKey:vt,_EmptyAuthCredentialsProvider:kA,_FieldPath:dn,_cast:Wn,_logWarn:Go,_validateIsNotUsedTogether:IC,addDoc:VC,collection:wt,connectFirestoreEmulator:kC,deleteDoc:io,doc:Qe,ensureFirestoreConfigured:Dc,executeWrite:Rc,getDoc:Zt,getDocs:jt,getFirestore:uo,limit:Rs,onSnapshot:vc,orderBy:cn,query:lr,serverTimestamp:Bs,setDoc:Wt,startAfter:Z0,updateDoc:Xd,where:Vr,writeBatch:lx},Symbol.toStringTag,{value:"Module"}));var qN="firebase",XN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(qN,XN,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="firebasestorage.googleapis.com",WC="storageBucket",YN=2*60*1e3,JN=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends fa{constructor(e,r,n=0){super(am(e),`Firebase Storage: ${r} (${am(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return am(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mr||(Mr={}));function am(t){return"storage/"+t}function cx(){const t="An unknown error occurred, please check the error payload for server response.";return new Br(Mr.UNKNOWN,t)}function QN(t){return new Br(Mr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ZN(t){return new Br(Mr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function e9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Br(Mr.UNAUTHENTICATED,t)}function t9(){return new Br(Mr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function r9(t){return new Br(Mr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function n9(){return new Br(Mr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function s9(){return new Br(Mr.CANCELED,"User canceled the upload/download.")}function a9(t){return new Br(Mr.INVALID_URL,"Invalid URL '"+t+"'.")}function i9(t){return new Br(Mr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function o9(){return new Br(Mr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WC+"' property when initializing the app?")}function l9(){return new Br(Mr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function c9(t){return new Br(Mr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function eh(t){return new Br(Mr.INVALID_ARGUMENT,t)}function zC(){return new Br(Mr.APP_DELETED,"The Firebase app was deleted.")}function KC(t){return new Br(Mr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ru(t,e){return new Br(Mr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yc(t){throw new Br(Mr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Hn.makeFromUrl(e,r)}catch{return new Hn(e,"")}if(n.path==="")return n;throw i9(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${s}/o${h}`,"i"),m={bucket:1,path:3},g=r===GC?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${g}/${s}/${v}`,"i"),E=[{regex:o,indices:l,postModify:i},{regex:p,indices:m,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<E.length;I++){const P=E[I],w=P.regex.exec(e);if(w){const b=w[P.indices.bucket];let T=w[P.indices.path];T||(T=""),n=new Hn(b,T),P.postModify(n);break}}if(n==null)throw a9(e);return n}}class u9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(t,e,r){let n=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...v){c||(c=!0,e.apply(null,v))}function d(v){s=setTimeout(()=>{s=null,t(p,l())},v)}function h(){i&&clearTimeout(i)}function p(v,...y){if(c){h();return}if(v){h(),u.call(null,v,...y);return}if(l()||a){h(),u.call(null,v,...y);return}n<64&&(n*=2);let E;o===1?(o=2,E=0):E=(n+Math.random())*1e3,d(E)}let m=!1;function g(v){m||(m=!0,h(),!c&&(s!==null?(v||(o=2),clearTimeout(s),d(0)):v||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,g(!0)},r),g}function f9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(t){return t!==void 0}function p9(t){return typeof t=="object"&&!Array.isArray(t)}function qC(t){return typeof t=="string"||t instanceof String}function Bb(t){return ux()&&t instanceof Blob}function ux(){return typeof Blob<"u"}function cv(t,e,r,n){if(n<e)throw eh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw eh(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function m9(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Mo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Mo||(Mo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,r,n,s,i,a,o,l,c,u,d,h=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Pf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===Mo.NO_ERROR,l=i.getStatus();if(!o||g9(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Mo.ABORT;n(!1,new Pf(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Pf(c,i))})},r=(n,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());h9(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=cx();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?zC():s9();a(l)}else{const l=n9();a(l)}};this.canceled_?r(!1,new Pf(!1,null,!0)):this.backoffId_=d9(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&f9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pf{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function x9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function y9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function E9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function b9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _9(t,e,r,n,s,i,a=!0){const o=m9(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return E9(c,e),x9(c,r),y9(c,i),b9(c,n),new v9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function T9(...t){const e=S9();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(ux())return new Blob(t);throw new Br(Mr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function w9(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(t){if(typeof atob>"u")throw c9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class im{constructor(e,r){this.data=e,this.contentType=r||null}}function fx(t,e){switch(t){case Os.RAW:return new im(XC(e));case Os.BASE64:case Os.BASE64URL:return new im(YC(t,e));case Os.DATA_URL:return new im(I9(e),k9(e))}throw cx()}function XC(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=t.charCodeAt(++r);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function C9(t){let e;try{e=decodeURIComponent(t)}catch{throw Ru(Os.DATA_URL,"Malformed data URL.")}return XC(e)}function YC(t,e){switch(t){case Os.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ru(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Os.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ru(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=A9(e)}catch(s){throw s.message.includes("polyfill")?s:Ru(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class JC{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Ru(Os.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=D9(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function I9(t){const e=new JC(t);return e.base64?YC(Os.BASE64,e.rest):C9(e.rest)}function k9(t){return new JC(t).contentType}function D9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,r){let n=0,s="";Bb(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(Bb(this.data_)){const n=this.data_,s=w9(n,e,r);return s===null?null:new Ja(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Ja(n,!0)}}static getBlob(...e){if(ux()){const r=e.map(n=>n instanceof Ja?n.data_:n);return new Ja(T9.apply(null,r))}else{const r=e.map(a=>qC(a)?fx(Os.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new Ja(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){let e;try{e=JSON.parse(t)}catch{return null}return p9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function F9(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function ZC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t,e){return e}class Jn{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||R9}}let Ff=null;function O9(t){return!qC(t)||t.length<2?t:ZC(t)}function N9(){if(Ff)return Ff;const t=[];t.push(new Jn("bucket")),t.push(new Jn("generation")),t.push(new Jn("metageneration")),t.push(new Jn("name","fullPath",!0));function e(i,a){return O9(a)}const r=new Jn("name");r.xform=e,t.push(r);function n(i,a){return a!==void 0?Number(a):a}const s=new Jn("size");return s.xform=n,t.push(s),t.push(new Jn("timeCreated")),t.push(new Jn("updated")),t.push(new Jn("md5Hash",null,!0)),t.push(new Jn("cacheControl",null,!0)),t.push(new Jn("contentDisposition",null,!0)),t.push(new Jn("contentEncoding",null,!0)),t.push(new Jn("contentLanguage",null,!0)),t.push(new Jn("contentType",null,!0)),t.push(new Jn("metadata","customMetadata",!0)),Ff=t,Ff}function M9(t,e){function r(){const n=t.bucket,s=t.fullPath,i=new Hn(n,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function L9(t,e,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const a=r[i];n[a.local]=a.xform(n,e[a.server])}return M9(n,t),n}function B9(t,e,r){const n=QC(e);return n===null?null:L9(t,n,r)}function U9(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="prefixes",$b="items";function $9(t,e,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[Ub])for(const s of r[Ub]){const i=s.replace(/\/$/,""),a=t._makeStorageReference(new Hn(e,i));n.prefixes.push(a)}if(r[$b])for(const s of r[$b]){const i=t._makeStorageReference(new Hn(e,s.name));n.items.push(i)}return n}function V9(t,e,r){const n=QC(r);return n===null?null:$9(t,e,n)}class hx{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t){if(!t)throw cx()}function j9(t,e){function r(n,s){const i=B9(t,s,e);return e4(i!==null),i}return r}function H9(t,e){function r(n,s){const i=V9(t,e,s);return e4(i!==null),i}return r}function px(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=t9():s=e9():r.getStatus()===402?s=ZN(t.bucket):r.getStatus()===403?s=r9(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function G9(t){const e=px(t);function r(n,s){let i=e(n,s);return n.getStatus()===404&&(i=QN(t.path)),i.serverResponse=s.serverResponse,i}return r}function W9(t,e,r,n,s){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",r.length>0&&(i.delimiter=r),n&&(i.pageToken=n),s&&(i.maxResults=s);const a=e.bucketOnlyServerUrl(),o=dx(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new hx(o,l,H9(t,e.bucket),c);return u.urlParams=i,u.errorHandler=px(e),u}function z9(t,e){const r=e.fullServerUrl(),n=dx(r,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function a(l,c){}const o=new hx(n,s,a,i);return o.successCodes=[200,204],o.errorHandler=G9(e),o}function K9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function q9(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=K9(null,e)),n}function X9(t,e,r,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let E="";for(let I=0;I<2;I++)E=E+Math.random().toString().slice(2);return E}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=q9(e,n,s),u=U9(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=Ja.getBlob(d,n,h);if(p===null)throw l9();const m={name:c.fullPath},g=dx(i,t.host,t._protocol),v="POST",y=t.maxUploadRetryTime,x=new hx(g,v,j9(t,r),y);return x.urlParams=m,x.headers=a,x.body=p.uploadData(),x.errorHandler=px(e),x}class Y9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw Yc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class J9 extends Y9{initXhr(){this.xhr_.responseType="text"}}function mx(){return new J9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,r){this._service=e,r instanceof Hn?this._location=r:this._location=Hn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new qo(e,r)}get root(){const e=new Hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZC(this._location.path)}get storage(){return this._service}get parent(){const e=P9(this._location.path);if(e===null)return null;const r=new Hn(this._location.bucket,e);return new qo(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw KC(e)}}function t4(t,e,r){t._throwIfRoot("uploadBytes");const n=X9(t.storage,t._location,N9(),new Ja(e,!0),r);return t.storage.makeRequestWithTokens(n,mx).then(s=>({metadata:s,ref:t}))}function Q9(t,e,r=Os.RAW,n){t._throwIfRoot("uploadString");const s=fx(r,e),i=Object.assign({},n);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),t4(t,s.data,i)}function Z9(t){const e={prefixes:[],items:[]};return r4(t,e).then(()=>e)}async function r4(t,e,r){const s=await eM(t,{pageToken:r});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await r4(t,e,s.nextPageToken)}function eM(t,e){e!=null&&typeof e.maxResults=="number"&&cv("options.maxResults",1,1e3,e.maxResults);const r=e||{},n=W9(t.storage,t._location,"/",r.pageToken,r.maxResults);return t.storage.makeRequestWithTokens(n,mx)}function tM(t){t._throwIfRoot("deleteObject");const e=z9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,mx)}function rM(t,e){const r=F9(t._location.path,e),n=new Hn(t._location.bucket,r);return new qo(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t){return/^[A-Za-z]+:\/\//.test(t)}function sM(t,e){return new qo(t,e)}function n4(t,e){if(t instanceof gx){const r=t;if(r._bucket==null)throw o9();const n=new qo(r,r._bucket);return e!=null?n4(n,e):n}else return e!==void 0?rM(t,e):t}function aM(t,e){if(e&&nM(e)){if(t instanceof gx)return sM(t,e);throw eh("To use ref(service, url), the first argument must be a Storage instance.")}else return n4(t,e)}function Vb(t,e){const r=e==null?void 0:e[WC];return r==null?null:Hn.makeFromBucketSpec(r,t)}function iM(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:Dw(s,t.app.options.projectId))}class gx{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=GC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=YN,this._maxUploadRetryTime=JN,this._requests=new Set,s!=null?this._bucket=Hn.makeFromBucketSpec(s,this._host):this._bucket=Vb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hn.makeFromBucketSpec(this._url,e):this._bucket=Vb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qo(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new u9(zC());{const a=_9(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const jb="@firebase/storage",Hb="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="storage";function a4(t,e,r){return t=ar(t),t4(t,e,r)}function i4(t,e,r,n){return t=ar(t),Q9(t,e,r,n)}function o4(t){return t=ar(t),Z9(t)}function uv(t){return t=ar(t),tM(t)}function th(t,e){return t=ar(t),aM(t,e)}function l4(t=Nd(),e){t=ar(t);const n=Od(t,s4).getImmediate({identifier:e}),s=o1("storage");return s&&c4(n,...s),n}function c4(t,e,r,n={}){iM(t,e,r,n)}function oM(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new gx(r,n,s,e,tl)}function lM(){to(new pi(s4,oM,"PUBLIC").setMultipleInstances(!0)),Ls(jb,Hb,""),Ls(jb,Hb,"esm2017")}lM();const cM=Object.freeze(Object.defineProperty({__proto__:null,StorageError:Br,get StorageErrorCode(){return Mr},StringFormat:Os,_FbsBlob:Ja,_Location:Hn,_dataFromString:fx,_invalidArgument:eh,_invalidRootOperation:KC,connectStorageEmulator:c4,deleteObject:uv,getStorage:l4,listAll:o4,ref:th,uploadBytes:a4,uploadString:i4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="type.googleapis.com/google.protobuf.Int64Value",dM="type.googleapis.com/google.protobuf.UInt64Value";function u4(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function dv(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>dv(e));if(typeof t=="function"||typeof t=="object")return u4(t,e=>dv(e));throw new Error("Data cannot be encoded in JSON: "+t)}function rh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case uM:case dM:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>rh(e)):typeof t=="function"||typeof t=="object"?u4(t,e=>rh(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ec extends fa{constructor(e,r,n){super(`${vx}/${e}`,r||""),this.details=n}}function fM(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function hM(t,e){let r=fM(t),n=r,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!Gb[a])return new ec("internal","internal");r=Gb[a],n=a}const o=i.message;typeof o=="string"&&(n=o),s=i.details,s!==void 0&&(s=rh(s))}}catch{}return r==="ok"?null:new ec(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="us-central1";function mM(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new ec("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class gM{constructor(e,r,n,s,i=fv,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new pM(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=fv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function vM(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function xM(t,e,r){return n=>EM(t,e,n,r||{})}async function yM(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function EM(t,e,r,n){const s=t._url(e);return bM(t,s,r,n)}async function bM(t,e,r,n){r=dv(r);const s={data:r},i={},a=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,l=mM(o),c=await Promise.race([yM(e,s,i,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new ec("cancelled","Firebase Functions instance was deleted.");const u=hM(c.status,c.json);if(u)throw u;if(!c.json)throw new ec("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new ec("internal","Response is missing data field.");return{data:rh(d)}}const Wb="@firebase/functions",zb="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="auth-internal",SM="app-check-internal",TM="messaging-internal";function wM(t,e){const r=(n,{instanceIdentifier:s})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(_M),o=n.getProvider(TM),l=n.getProvider(SM);return new gM(i,a,o,l,s,t)};to(new pi(vx,r,"PUBLIC").setMultipleInstances(!0)),Ls(Wb,zb,e),Ls(Wb,zb,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t=Nd(),e=fv){const n=Od(ar(t),vx).getImmediate({identifier:e}),s=o1("functions");return s&&d4(n,...s),n}function d4(t,e,r){vM(ar(t),e,r)}function _a(t,e,r){return xM(ar(t),e,r)}wM(fetch.bind(self));const d0=Object.freeze(Object.defineProperty({__proto__:null,connectFunctionsEmulator:d4,getFunctions:tc,httpsCallable:_a},Symbol.toStringTag,{value:"Module"})),f4={apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",authDomain:"casemangervue.firebaseapp.com",projectId:"casemangervue",storageBucket:"casemangervue.firebasestorage.app",messagingSenderId:"756483333257",appId:"1:756483333257:web:694e2ad2415b7886563a58",measurementId:"G-YBRDQX9NFR"},vp=Rw(f4),$t=jo(vp),Xe=uo(vp),xc=l4(vp),h4=tc(vp),p4=new ea;console.log(" Connected to Firebase project:",f4.projectId);const m4=Object.freeze(Object.defineProperty({__proto__:null,auth:$t,db:Xe,functions:h4,googleProvider:p4,storage:xc},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ol=typeof document<"u";function g4(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function AM(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&g4(t.default)}const ir=Object.assign;function om(t,e){const r={};for(const n in e){const s=e[n];r[n]=da(s)?s.map(t):t(s)}return r}const Ou=()=>{},da=Array.isArray,v4=/#/g,CM=/&/g,IM=/\//g,kM=/=/g,DM=/\?/g,x4=/\+/g,PM=/%5B/g,FM=/%5D/g,y4=/%5E/g,RM=/%60/g,E4=/%7B/g,OM=/%7C/g,b4=/%7D/g,NM=/%20/g;function xx(t){return encodeURI(""+t).replace(OM,"|").replace(PM,"[").replace(FM,"]")}function MM(t){return xx(t).replace(E4,"{").replace(b4,"}").replace(y4,"^")}function hv(t){return xx(t).replace(x4,"%2B").replace(NM,"+").replace(v4,"%23").replace(CM,"%26").replace(RM,"`").replace(E4,"{").replace(b4,"}").replace(y4,"^")}function LM(t){return hv(t).replace(kM,"%3D")}function BM(t){return xx(t).replace(v4,"%23").replace(DM,"%3F")}function UM(t){return t==null?"":BM(t).replace(IM,"%2F")}function hd(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const $M=/\/$/,VM=t=>t.replace($M,"");function lm(t,e,r="/"){let n,s={},i="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=e.slice(0,l),i=e.slice(l+1,o>-1?o:e.length),s=t(i)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=WM(n??e,r),{fullPath:n+(i&&"?")+i+a,path:n,query:s,hash:hd(a)}}function jM(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function Kb(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function HM(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&yc(e.matched[n],r.matched[s])&&_4(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function yc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function _4(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!GM(t[r],e[r]))return!1;return!0}function GM(t,e){return da(t)?qb(t,e):da(e)?qb(e,t):t===e}function qb(t,e){return da(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function WM(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const Di={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var pd;(function(t){t.pop="pop",t.push="push"})(pd||(pd={}));var Nu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Nu||(Nu={}));function zM(t){if(!t)if(Ol){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),VM(t)}const KM=/^[^#]+#/;function qM(t,e){return t.replace(KM,"#")+e}function XM(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const xp=()=>({left:window.scrollX,top:window.scrollY});function YM(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=XM(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Xb(t,e){return(history.state?history.state.position-e:-1)+t}const pv=new Map;function JM(t,e){pv.set(t,e)}function QM(t){const e=pv.get(t);return pv.delete(t),e}let ZM=()=>location.protocol+"//"+location.host;function S4(t,e){const{pathname:r,search:n,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),Kb(l,"")}return Kb(r,t)+n+s}function eL(t,e,r,n){let s=[],i=[],a=null;const o=({state:h})=>{const p=S4(t,location),m=r.value,g=e.value;let v=0;if(h){if(r.value=p,e.value=h,a&&a===m){a=null;return}v=g?h.position-g.position:0}else n(p);s.forEach(y=>{y(r.value,m,{delta:v,type:pd.pop,direction:v?v>0?Nu.forward:Nu.back:Nu.unknown})})};function l(){a=r.value}function c(h){s.push(h);const p=()=>{const m=s.indexOf(h);m>-1&&s.splice(m,1)};return i.push(p),p}function u(){const{history:h}=window;h.state&&h.replaceState(ir({},h.state,{scroll:xp()}),"")}function d(){for(const h of i)h();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function Yb(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?xp():null}}function tL(t){const{history:e,location:r}=window,n={value:S4(t,r)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),h=d>-1?(r.host&&document.querySelector("base")?t:t.slice(d))+l:ZM()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),s.value=c}catch(p){console.error(p),r[u?"replace":"assign"](h)}}function a(l,c){const u=ir({},e.state,Yb(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),n.value=l}function o(l,c){const u=ir({},s.value,e.state,{forward:l,scroll:xp()});i(u.current,u,!0);const d=ir({},Yb(n.value,l,null),{position:u.position+1},c);i(l,d,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function rL(t){t=zM(t);const e=tL(t),r=eL(t,e.state,e.location,e.replace);function n(i,a=!0){a||r.pauseListeners(),history.go(i)}const s=ir({location:"",base:t,go:n,createHref:qM.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function nL(t){return typeof t=="string"||t&&typeof t=="object"}function T4(t){return typeof t=="string"||typeof t=="symbol"}const w4=Symbol("");var Jb;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Jb||(Jb={}));function Ec(t,e){return ir(new Error,{type:t,[w4]:!0},e)}function Ha(t,e){return t instanceof Error&&w4 in t&&(e==null||!!(t.type&e))}const Qb="[^/]+?",sL={sensitive:!1,strict:!1,start:!0,end:!0},aL=/[.+*?^${}()[\]/\\]/g;function iL(t,e){const r=ir({},sL,e),n=[];let s=r.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const h=c[d];let p=40+(r.sensitive?.25:0);if(h.type===0)d||(s+="/"),s+=h.value.replace(aL,"\\$&"),p+=40;else if(h.type===1){const{value:m,repeatable:g,optional:v,regexp:y}=h;i.push({name:m,repeatable:g,optional:v});const x=y||Qb;if(x!==Qb){p+=10;try{new RegExp(`(${x})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${m}" (${x}): `+I.message)}}let E=g?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;d||(E=v&&c.length<2?`(?:/${E})`:"/"+E),v&&(E+="?"),s+=E,p+=20,v&&(p+=-8),g&&(p+=-20),x===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,r.sensitive?"":"i");function o(c){const u=c.match(a),d={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",m=i[h-1];d[m.name]=p&&m.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const h of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:g,optional:v}=p,y=m in c?c[m]:"";if(da(y)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const x=da(y)?y.join("/"):y;if(!x)if(v)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=x}}return u||"/"}return{re:a,score:n,keys:i,parse:o,stringify:l}}function oL(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function A4(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const i=oL(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(Zb(n))return 1;if(Zb(s))return-1}return s.length-n.length}function Zb(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const lL={type:0,value:""},cL=/[a-zA-Z0-9_]/;function uL(t){if(!t)return[[]];if(t==="/")return[[lL]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=0,n=r;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,c="",u="";function d(){c&&(r===0?i.push({type:0,value:c}):r===1||r===2||r===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&d(),a()):l===":"?(d(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:cL.test(l)?h():(d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),a(),s}function dL(t,e,r){const n=iL(uL(t.path),r),s=ir(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function fL(t,e){const r=[],n=new Map;e=n_({strict:!1,end:!0,sensitive:!1},e);function s(d){return n.get(d)}function i(d,h,p){const m=!p,g=t_(d);g.aliasOf=p&&p.record;const v=n_(e,d),y=[g];if("alias"in d){const I=typeof d.alias=="string"?[d.alias]:d.alias;for(const P of I)y.push(t_(ir({},g,{components:p?p.record.components:g.components,path:P,aliasOf:p?p.record:g})))}let x,E;for(const I of y){const{path:P}=I;if(h&&P[0]!=="/"){const w=h.record.path,b=w[w.length-1]==="/"?"":"/";I.path=h.record.path+(P&&b+P)}if(x=dL(I,h,v),p?p.alias.push(x):(E=E||x,E!==x&&E.alias.push(x),m&&d.name&&!r_(x)&&a(d.name)),C4(x)&&l(x),g.children){const w=g.children;for(let b=0;b<w.length;b++)i(w[b],x,p&&p.children[b])}p=p||x}return E?()=>{a(E)}:Ou}function a(d){if(T4(d)){const h=n.get(d);h&&(n.delete(d),r.splice(r.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=r.indexOf(d);h>-1&&(r.splice(h,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return r}function l(d){const h=mL(d,r);r.splice(h,0,d),d.record.name&&!r_(d)&&n.set(d.record.name,d)}function c(d,h){let p,m={},g,v;if("name"in d&&d.name){if(p=n.get(d.name),!p)throw Ec(1,{location:d});v=p.record.name,m=ir(e_(h.params,p.keys.filter(E=>!E.optional).concat(p.parent?p.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),d.params&&e_(d.params,p.keys.map(E=>E.name))),g=p.stringify(m)}else if(d.path!=null)g=d.path,p=r.find(E=>E.re.test(g)),p&&(m=p.parse(g),v=p.record.name);else{if(p=h.name?n.get(h.name):r.find(E=>E.re.test(h.path)),!p)throw Ec(1,{location:d,currentLocation:h});v=p.record.name,m=ir({},h.params,d.params),g=p.stringify(m)}const y=[];let x=p;for(;x;)y.unshift(x.record),x=x.parent;return{name:v,path:g,params:m,matched:y,meta:pL(y)}}t.forEach(d=>i(d));function u(){r.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:a,clearRoutes:u,getRoutes:o,getRecordMatcher:s}}function e_(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function t_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:hL(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function hL(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function r_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function pL(t){return t.reduce((e,r)=>ir(e,r.meta),{})}function n_(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function mL(t,e){let r=0,n=e.length;for(;r!==n;){const i=r+n>>1;A4(t,e[i])<0?n=i:r=i+1}const s=gL(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function gL(t){let e=t;for(;e=e.parent;)if(C4(e)&&A4(t,e)===0)return e}function C4({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function vL(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(x4," "),a=i.indexOf("="),o=hd(a<0?i:i.slice(0,a)),l=a<0?null:hd(i.slice(a+1));if(o in e){let c=e[o];da(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function s_(t){let e="";for(let r in t){const n=t[r];if(r=LM(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(da(n)?n.map(i=>i&&hv(i)):[n&&hv(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function xL(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=da(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const yL=Symbol(""),a_=Symbol(""),yp=Symbol(""),yx=Symbol(""),mv=Symbol("");function Jc(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Ui(t,e,r,n,s,i=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const c=h=>{h===!1?l(Ec(4,{from:r,to:e})):h instanceof Error?l(h):nL(h)?l(Ec(2,{from:e,to:h})):(a&&n.enterCallbacks[s]===a&&typeof h=="function"&&a.push(h),o())},u=i(()=>t.call(n&&n.instances[s],e,r,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(h=>l(h))})}function cm(t,e,r,n,s=i=>i()){const i=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(g4(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ui(u,r,n,a,o,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const d=AM(u)?u.default:u;a.mods[o]=u,a.components[o]=d;const p=(d.__vccOpts||d)[e];return p&&Ui(p,r,n,a,o,s)()}))}}return i}function i_(t){const e=As(yp),r=As(yx),n=_e(()=>{const l=Z(t.to);return e.resolve(l)}),s=_e(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=r.matched;if(!u||!d.length)return-1;const h=d.findIndex(yc.bind(null,u));if(h>-1)return h;const p=o_(l[c-2]);return c>1&&o_(u)===p&&d[d.length-1].path!==p?d.findIndex(yc.bind(null,l[c-2])):h}),i=_e(()=>s.value>-1&&TL(r.params,n.value.params)),a=_e(()=>s.value>-1&&s.value===r.matched.length-1&&_4(r.params,n.value.params));function o(l={}){if(SL(l)){const c=e[Z(t.replace)?"replace":"push"](Z(t.to)).catch(Ou);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:_e(()=>n.value.href),isActive:i,isExactActive:a,navigate:o}}function EL(t){return t.length===1?t[0]:t}const bL=Id({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:i_,setup(t,{slots:e}){const r=gs(i_(t)),{options:n}=As(yp),s=_e(()=>({[l_(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[l_(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&EL(e.default(r));return t.custom?i:$h("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),_L=bL;function SL(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function TL(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!da(s)||s.length!==n.length||n.some((i,a)=>i!==s[a]))return!1}return!0}function o_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const l_=(t,e,r)=>t??e??r,wL=Id({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=As(mv),s=_e(()=>t.route||n.value),i=As(a_,0),a=_e(()=>{let c=Z(i);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),o=_e(()=>s.value.matched[a.value]);Tu(a_,_e(()=>a.value+1)),Tu(yL,o),Tu(mv,s);const l=ne();return Ut(()=>[l.value,o.value,t.name],([c,u,d],[h,p,m])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!yc(u,p)||!h)&&(u.enterCallbacks[d]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,d=o.value,h=d&&d.components[u];if(!h)return c_(r.default,{Component:h,route:c});const p=d.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,v=$h(h,ir({},m,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return c_(r.default,{Component:v,route:c})||v}}});function c_(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const AL=wL;function CL(t){const e=fL(t.routes,t),r=t.parseQuery||vL,n=t.stringifyQuery||s_,s=t.history,i=Jc(),a=Jc(),o=Jc(),l=zv(Di);let c=Di;Ol&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=om.bind(null,ue=>""+ue),d=om.bind(null,UM),h=om.bind(null,hd);function p(ue,pe){let te,Y;return T4(ue)?(te=e.getRecordMatcher(ue),Y=pe):Y=ue,e.addRoute(Y,te)}function m(ue){const pe=e.getRecordMatcher(ue);pe&&e.removeRoute(pe)}function g(){return e.getRoutes().map(ue=>ue.record)}function v(ue){return!!e.getRecordMatcher(ue)}function y(ue,pe){if(pe=ir({},pe||l.value),typeof ue=="string"){const J=lm(r,ue,pe.path),ge=e.resolve({path:J.path},pe),ae=s.createHref(J.fullPath);return ir(J,ge,{params:h(ge.params),hash:hd(J.hash),redirectedFrom:void 0,href:ae})}let te;if(ue.path!=null)te=ir({},ue,{path:lm(r,ue.path,pe.path).path});else{const J=ir({},ue.params);for(const ge in J)J[ge]==null&&delete J[ge];te=ir({},ue,{params:d(J)}),pe.params=d(pe.params)}const Y=e.resolve(te,pe),Ee=ue.hash||"";Y.params=u(h(Y.params));const X=jM(n,ir({},ue,{hash:MM(Ee),path:Y.path})),q=s.createHref(X);return ir({fullPath:X,hash:Ee,query:n===s_?xL(ue.query):ue.query||{}},Y,{redirectedFrom:void 0,href:q})}function x(ue){return typeof ue=="string"?lm(r,ue,l.value.path):ir({},ue)}function E(ue,pe){if(c!==ue)return Ec(8,{from:pe,to:ue})}function I(ue){return b(ue)}function P(ue){return I(ir(x(ue),{replace:!0}))}function w(ue){const pe=ue.matched[ue.matched.length-1];if(pe&&pe.redirect){const{redirect:te}=pe;let Y=typeof te=="function"?te(ue):te;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=x(Y):{path:Y},Y.params={}),ir({query:ue.query,hash:ue.hash,params:Y.path!=null?{}:ue.params},Y)}}function b(ue,pe){const te=c=y(ue),Y=l.value,Ee=ue.state,X=ue.force,q=ue.replace===!0,J=w(te);if(J)return b(ir(x(J),{state:typeof J=="object"?ir({},Ee,J.state):Ee,force:X,replace:q}),pe||te);const ge=te;ge.redirectedFrom=pe;let ae;return!X&&HM(n,Y,te)&&(ae=Ec(16,{to:ge,from:Y}),H(Y,Y,!0,!1)),(ae?Promise.resolve(ae):S(ge,Y)).catch(se=>Ha(se)?Ha(se,2)?se:z(se):B(se,ge,Y)).then(se=>{if(se){if(Ha(se,2))return b(ir({replace:q},x(se.to),{state:typeof se.to=="object"?ir({},Ee,se.to.state):Ee,force:X}),pe||ge)}else se=A(ge,Y,!0,q,Ee);return k(ge,Y,se),se})}function T(ue,pe){const te=E(ue,pe);return te?Promise.reject(te):Promise.resolve()}function _(ue){const pe=K.values().next().value;return pe&&typeof pe.runWithContext=="function"?pe.runWithContext(ue):ue()}function S(ue,pe){let te;const[Y,Ee,X]=IL(ue,pe);te=cm(Y.reverse(),"beforeRouteLeave",ue,pe);for(const J of Y)J.leaveGuards.forEach(ge=>{te.push(Ui(ge,ue,pe))});const q=T.bind(null,ue,pe);return te.push(q),he(te).then(()=>{te=[];for(const J of i.list())te.push(Ui(J,ue,pe));return te.push(q),he(te)}).then(()=>{te=cm(Ee,"beforeRouteUpdate",ue,pe);for(const J of Ee)J.updateGuards.forEach(ge=>{te.push(Ui(ge,ue,pe))});return te.push(q),he(te)}).then(()=>{te=[];for(const J of X)if(J.beforeEnter)if(da(J.beforeEnter))for(const ge of J.beforeEnter)te.push(Ui(ge,ue,pe));else te.push(Ui(J.beforeEnter,ue,pe));return te.push(q),he(te)}).then(()=>(ue.matched.forEach(J=>J.enterCallbacks={}),te=cm(X,"beforeRouteEnter",ue,pe,_),te.push(q),he(te))).then(()=>{te=[];for(const J of a.list())te.push(Ui(J,ue,pe));return te.push(q),he(te)}).catch(J=>Ha(J,8)?J:Promise.reject(J))}function k(ue,pe,te){o.list().forEach(Y=>_(()=>Y(ue,pe,te)))}function A(ue,pe,te,Y,Ee){const X=E(ue,pe);if(X)return X;const q=pe===Di,J=Ol?history.state:{};te&&(Y||q?s.replace(ue.fullPath,ir({scroll:q&&J&&J.scroll},Ee)):s.push(ue.fullPath,Ee)),l.value=ue,H(ue,pe,te,q),z()}let D;function N(){D||(D=s.listen((ue,pe,te)=>{if(!re.listening)return;const Y=y(ue),Ee=w(Y);if(Ee){b(ir(Ee,{replace:!0,force:!0}),Y).catch(Ou);return}c=Y;const X=l.value;Ol&&JM(Xb(X.fullPath,te.delta),xp()),S(Y,X).catch(q=>Ha(q,12)?q:Ha(q,2)?(b(ir(x(q.to),{force:!0}),Y).then(J=>{Ha(J,20)&&!te.delta&&te.type===pd.pop&&s.go(-1,!1)}).catch(Ou),Promise.reject()):(te.delta&&s.go(-te.delta,!1),B(q,Y,X))).then(q=>{q=q||A(Y,X,!1),q&&(te.delta&&!Ha(q,8)?s.go(-te.delta,!1):te.type===pd.pop&&Ha(q,20)&&s.go(-1,!1)),k(Y,X,q)}).catch(Ou)}))}let R=Jc(),F=Jc(),O;function B(ue,pe,te){z(ue);const Y=F.list();return Y.length?Y.forEach(Ee=>Ee(ue,pe,te)):console.error(ue),Promise.reject(ue)}function V(){return O&&l.value!==Di?Promise.resolve():new Promise((ue,pe)=>{R.add([ue,pe])})}function z(ue){return O||(O=!ue,N(),R.list().forEach(([pe,te])=>ue?te(ue):pe()),R.reset()),ue}function H(ue,pe,te,Y){const{scrollBehavior:Ee}=t;if(!Ol||!Ee)return Promise.resolve();const X=!te&&QM(Xb(ue.fullPath,0))||(Y||!te)&&history.state&&history.state.scroll||null;return el().then(()=>Ee(ue,pe,X)).then(q=>q&&YM(q)).catch(q=>B(q,ue,pe))}const j=ue=>s.go(ue);let W;const K=new Set,re={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:g,resolve:y,options:t,push:I,replace:P,go:j,back:()=>j(-1),forward:()=>j(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:F.add,isReady:V,install(ue){const pe=this;ue.component("RouterLink",_L),ue.component("RouterView",AL),ue.config.globalProperties.$router=pe,Object.defineProperty(ue.config.globalProperties,"$route",{enumerable:!0,get:()=>Z(l)}),Ol&&!W&&l.value===Di&&(W=!0,I(s.location).catch(Ee=>{}));const te={};for(const Ee in Di)Object.defineProperty(te,Ee,{get:()=>l.value[Ee],enumerable:!0});ue.provide(yp,pe),ue.provide(yx,Gv(te)),ue.provide(mv,l);const Y=ue.unmount;K.add(ue),ue.unmount=function(){K.delete(ue),K.size<1&&(c=Di,D&&D(),D=null,l.value=Di,W=!1,O=!1),Y()}}};function he(ue){return ue.reduce((pe,te)=>pe.then(()=>_(te)),Promise.resolve())}return re}function IL(t,e){const r=[],n=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(t.matched.find(c=>yc(c,o))?n.push(o):r.push(o));const l=t.matched[a];l&&(e.matched.find(c=>yc(c,l))||s.push(l))}return[r,n,s]}function bi(){return As(yp)}function kL(t){return As(yx)}const pa=Sw("auth",()=>{const t=ne(null),e=ne(""),r=ne(!0),n=bi(),s=()=>{Wh($t,async u=>{if(r.value=!0,u)try{const d=await Zt(Qe(Xe,"users",u.uid));d.exists()?(t.value={uid:u.uid,email:u.email,name:u.displayName,...d.data()},console.log(" User authenticated:",t.value)):(console.log(" User not found in Firestore"),t.value=null)}catch(d){console.error(" Error fetching user data:",d),t.value=null}else t.value=null,console.log(" No user authenticated");r.value=!1})},i=async()=>{e.value="";try{const u=new ea,h=(await S1($t,u)).user,p=await Zt(Qe(Xe,"users",h.uid));if(!p.exists()){e.value=" User not found in system.";return}t.value={uid:h.uid,email:h.email,name:h.displayName,...p.data()},n.push("/")}catch(u){console.error(" Login error:",u),e.value=u.message||"Authentication failed."}},a=async()=>{try{await zh($t),t.value=null,n.push("/login")}catch(u){console.error(" Logout error:",u)}},o=u=>{t.value=u},l=async()=>{if($t.currentUser)try{return await Hw($t.currentUser,!0),console.log(" Token refreshed successfully"),!0}catch(u){return console.error(" Error refreshing token:",u),!1}return!1},c=_e(()=>t.value);return s(),{currentUser:t,user:c,errorMsg:e,isLoading:r,loginWithGoogle:i,logout:a,setUser:o,refreshToken:l}}),DL=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:pa},Symbol.toStringTag,{value:"Module"})),Ep=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],u_=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],Qc=["admin","administrator","administrator_504_CM","sped_chair"],it={VIEW_USERS:"view_users",EDIT_USER:"edit_user",DELETE_USER:"delete_user",MANAGE_SUBJECTS:"manage_subjects",MANAGE_ROLES:"manage_roles",VIEW_STUDENTS:"view_students",EDIT_STUDENT_CM:"edit_student_CM",EDIT_STUDENT_ALL:"edit_student_All"},Ul={admin:[it.VIEW_USERS,it.EDIT_USER,it.DELETE_USER,it.MANAGE_SUBJECTS,it.MANAGE_ROLES,it.VIEW_STUDENTS,it.EDIT_STUDENT_ALL,it.TESTING_ALL],administrator:[it.VIEW_USERS,it.EDIT_USER,it.DELETE_USER,it.MANAGE_SUBJECTS,it.MANAGE_ROLES,it.VIEW_STUDENTS,it.EDIT_STUDENT_ALL,it.TESTING_ALL],administrator_504_CM:[it.VIEW_USERS,it.EDIT_USER,it.DELETE_USER,it.MANAGE_SUBJECTS,it.MANAGE_ROLES,it.VIEW_STUDENTS,it.EDIT_STUDENT_ALL],sped_chair:[it.VIEW_USERS,it.VIEW_STUDENTS,it.EDIT_STUDENT_ALL],case_manager:[it.VIEW_USERS,it.VIEW_STUDENTS,it.EDIT_STUDENT_CM,it.TESTING_PARTIAL],teacher:[it.VIEW_USERS,it.VIEW_STUDENTS,it.TESTING_PARTIAL],service_provider:[it.VIEW_USERS,it.VIEW_STUDENTS,it.TESTING_PARTIAL],paraeducator:[it.VIEW_USERS,it.VIEW_STUDENTS]};function d_(t){return Ep.includes(t)}const Ex=Sw("permission",()=>{const t=pa(),e=ne([]),r=ne({}),n=ne({}),s=ne(!1),i=async()=>{try{const d=Qe(Xe,"config/permissions_matrix"),h=await Zt(d);h.exists()?(n.value=h.data(),console.log("Loaded permissions matrix from database:",n.value)):(n.value=Ul,console.log("Using default permissions matrix:",n.value)),s.value=!0,e.value.length>0&&(r.value=l(e.value))}catch(d){console.error("Error loading permissions matrix:",d),n.value=Ul,s.value=!0}};let a=null;const o=()=>{a&&a();const d=Qe(Xe,"config/permissions_matrix");a=vc(d,h=>{console.log("Permissions matrix updated:",h.exists(),h.data()),h.exists()?n.value=h.data():n.value=Ul,s.value=!0,e.value.length>0&&(r.value=l(e.value),console.log("User permissions recalculated:",r.value))},h=>{console.error("Error watching permissions matrix:",h),n.value=Ul,s.value=!0})};function l(d){const h={};return console.log("Deriving permissions for roles:",d),console.log("Current permissions matrix:",n.value),console.log("Matrix loaded:",s.value),d.forEach(p=>{const m=n.value[p]||[];console.log(`Role ${p} has permissions:`,m),m.forEach(g=>h[g]=!0)}),console.log("Final derived permissions:",h),h}let c=null;return Ut(()=>{var d;return(d=t.currentUser)==null?void 0:d.uid},()=>{var d;if(c&&c(),(d=t.currentUser)!=null&&d.uid){const h=Qe(Xe,"users",t.currentUser.uid);c=vc(h,p=>{const m=p.data()||{};e.value=m.role?[m.role]:[],console.log("User roles updated:",e.value),t.currentUser&&(t.currentUser.value={...t.currentUser.value,...m},console.log(" Updated auth store user data:",t.currentUser.value)),s.value&&(r.value=l(e.value))})}else e.value=[],r.value={}},{immediate:!0}),o(),i(),{userRoles:e,userPermissions:r,permissionsMatrix:n,matrixLoaded:s,hasRole:d=>e.value.includes(d),can:d=>r.value[d]===!0,loadPermissionsMatrix:i}});function PL(){const t=Ex(),e=_e(()=>t.hasRole("admin")),r=_e(()=>t.can("manage_users")),n=s=>t.can(s);return{isAdmin:e,canManageUsers:r,hasRole:t.hasRole,can:t.can,hasPermission:n}}const xt=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},FL={name:"UserRoleSwitcher",setup(){const t=pa();PL();const e=ne(!1),r=ne(""),n=ne({}),s=ne(!1),i=_e(()=>t.user),a=[{value:"admin",label:"Admin"},{value:"administrator",label:"Administrator"},{value:"administrator_504_CM",label:"Administrator 504/CM"},{value:"sped_chair",label:"SPED Chair"},{value:"case_manager",label:"Case Manager"},{value:"paraeducator",label:"Paraeducator"},{value:"teacher",label:"Teacher"},{value:"service_provider",label:"Service Provider"}],o=[{uid:"test-admin",name:"Test Admin",email:"admin@test.com",role:"admin"},{uid:"test-administrator",name:"Test Administrator",email:"administrator@test.com",role:"administrator"},{uid:"test-administrator-504-cm",name:"Test Admin 504/CM",email:"admin504@test.com",role:"administrator_504_CM"},{uid:"test-sped-chair",name:"Test SPED Chair",email:"spedchair@test.com",role:"sped_chair"},{uid:"test-case-manager",name:"Test Case Manager",email:"cm@test.com",role:"case_manager"},{uid:"test-paraeducator",name:"Test Paraeducator",email:"para@test.com",role:"paraeducator"},{uid:"test-teacher",name:"Test Teacher",email:"teacher@test.com",role:"teacher"},{uid:"test-service-provider",name:"Test Service Provider",email:"service@test.com",role:"service_provider"}],l=async()=>{s.value=!0;try{const y=Qe(Xe,"config","permissions_matrix"),x=await Zt(y);x.exists()?n.value=x.data():(console.warn("Permissions matrix not found in database"),n.value={})}catch(y){console.error("Error loading permissions matrix:",y),n.value={}}finally{s.value=!1}},c=_e(()=>{var I;const y=[{action:it.VIEW_USERS,label:"View Users"},{action:it.EDIT_USER,label:"Edit User"},{action:it.DELETE_USER,label:"Delete User"},{action:it.MANAGE_SUBJECTS,label:"Manage Subjects"},{action:it.MANAGE_ROLES,label:"Manage Roles"},{action:it.VIEW_STUDENTS,label:"View Students"},{action:it.EDIT_STUDENT_CM,label:"Edit Students (Own Caseload)"},{action:it.EDIT_STUDENT_ALL,label:"Edit All Students"},{action:it.TESTING,label:"Testing"}],x=(I=i.value)==null?void 0:I.role,E=n.value[x]||[];return y.map(P=>({...P,granted:E.includes(P.action)}))}),u=()=>{e.value=!e.value},d=()=>{if(!r.value)return;const y={uid:`test-${r.value}-${Date.now()}`,email:`${r.value}@test.com`,name:`Test ${r.value.charAt(0).toUpperCase()+r.value.slice(1)}`,role:r.value,lastSyncTrigger:new Date().toISOString()};t.setUser(y),localStorage.setItem("debug-user",JSON.stringify(y)),r.value=""},h=y=>{t.setUser(y),localStorage.setItem("debug-user",JSON.stringify(y))},p=()=>{localStorage.removeItem("debug-user"),window.location.reload()},m=()=>{window.location.reload()};return Bt(async()=>{await l();const y=localStorage.getItem("debug-user");if(y)try{const x=JSON.parse(y);t.setUser(x)}catch(x){console.error("Error parsing debug user:",x),localStorage.removeItem("debug-user")}return()=>{}}),{canSwitchRoles:_e(()=>{var x;const y=(x=i.value)==null?void 0:x.role;return["admin","administrator"].includes(y)}),hideRoleSwitcher:()=>{console.log("Role switcher hidden")},isExpanded:e,selectedRole:r,currentUser:i,availableRoles:a,testUsers:o,currentPermissions:c,loadingPermissions:s,toggleExpanded:u,switchRole:d,switchToUser:h,resetToRealUser:p,refreshPage:m}}},RL=["title"],OL={key:0,class:"debug-label"},NL={key:0,class:"switcher-content"},ML={class:"current-user-info"},LL={class:"role-selector"},BL=["value"],UL={class:"test-users"},$L={class:"test-user-buttons"},VL=["onClick"],jL={class:"permission-info"},HL={key:0,class:"loading-permissions"},GL={key:1,class:"permission-list"},WL={class:"permission-icon"},zL={class:"actions"};function KL(t,e,r,n,s,i){var a,o,l,c,u;return n.canSwitchRoles?(L(),U("div",{key:0,class:Ze(["user-role-switcher",{collapsed:!n.isExpanded}])},[f("div",{class:"switcher-header",onClick:e[1]||(e[1]=(...d)=>n.toggleExpanded&&n.toggleExpanded(...d)),title:n.isExpanded?"Collapse Debug Panel":"Expand Debug Panel"},[e[6]||(e[6]=f("span",{class:"debug-icon"},"",-1)),n.isExpanded?(L(),U("span",OL,"Debug Role Switcher")):Se("",!0),e[7]||(e[7]=f("span",{class:"beta-label"},"BETA",-1)),f("button",{onClick:e[0]||(e[0]=hn((...d)=>n.hideRoleSwitcher&&n.hideRoleSwitcher(...d),["stop"])),class:"close-debug-btn",title:"Close Role Switcher"},"")],8,RL),n.isExpanded?(L(),U("div",NL,[e[18]||(e[18]=f("div",{class:"beta-warning"},[f("strong",null," BETA WARNING:"),Oe(" This debug tool is not working correctly and should be used with caution. It may not properly switch roles or could cause unexpected behavior. ")],-1)),f("div",ML,[e[8]||(e[8]=f("strong",null,"Current User:",-1)),Oe(" "+Q(((a=n.currentUser)==null?void 0:a.name)||((o=n.currentUser)==null?void 0:o.email)||"Unknown")+" ",1),e[9]||(e[9]=f("br",null,null,-1)),e[10]||(e[10]=f("strong",null,"Role:",-1)),e[11]||(e[11]=Oe()),f("span",{class:Ze("role-"+((l=n.currentUser)==null?void 0:l.role))},Q(((c=n.currentUser)==null?void 0:c.role)||"None"),3),e[12]||(e[12]=f("br",null,null,-1)),e[13]||(e[13]=f("strong",null,"UID:",-1)),Oe(" "+Q(((u=n.currentUser)==null?void 0:u.uid)||"None"),1)]),f("div",LL,[e[15]||(e[15]=f("label",{for:"role-select"},"Switch to Role:",-1)),Ae(f("select",{id:"role-select","onUpdate:modelValue":e[2]||(e[2]=d=>n.selectedRole=d),onChange:e[3]||(e[3]=(...d)=>n.switchRole&&n.switchRole(...d))},[e[14]||(e[14]=f("option",{value:""},"-- Select Role --",-1)),(L(!0),U(Fe,null,Ve(n.availableRoles,d=>(L(),U("option",{key:d.value,value:d.value},Q(d.label),9,BL))),128))],544),[[hr,n.selectedRole]])]),f("div",UL,[e[16]||(e[16]=f("h5",null,"Quick Test Users:",-1)),f("div",$L,[(L(!0),U(Fe,null,Ve(n.testUsers,d=>{var h;return L(),U("button",{key:d.uid,onClick:p=>n.switchToUser(d),class:Ze(["test-user-btn",{active:((h=n.currentUser)==null?void 0:h.uid)===d.uid}])},[Oe(Q(d.name)+" ",1),f("small",null,"("+Q(d.role)+")",1)],10,VL)}),128))])]),f("div",jL,[e[17]||(e[17]=f("h5",null,"Current Permissions:",-1)),n.loadingPermissions?(L(),U("div",HL," Loading permissions... ")):(L(),U("div",GL,[(L(!0),U(Fe,null,Ve(n.currentPermissions,d=>(L(),U("div",{key:d.action,class:Ze(["permission-item",{granted:d.granted}])},[f("span",WL,Q(d.granted?"":""),1),Oe(" "+Q(d.label),1)],2))),128))]))]),e[19]||(e[19]=tn('<div class="testing-scenarios" data-v-bae46714><h5 data-v-bae46714> Testing Scenarios:</h5><div class="scenario-list" data-v-bae46714><div class="scenario-item" data-v-bae46714><strong data-v-bae46714>Students Page:</strong><ul data-v-bae46714><li data-v-bae46714> Can view students</li><li data-v-bae46714> Can edit own caseload (CM)</li><li data-v-bae46714> Can edit all students (Admin)</li><li data-v-bae46714> Paraeducator filter works</li></ul></div><div class="scenario-item" data-v-bae46714><strong data-v-bae46714>Admin Panel:</strong><ul data-v-bae46714><li data-v-bae46714> Users management</li><li data-v-bae46714> Permissions matrix</li><li data-v-bae46714> Aide assignments</li><li data-v-bae46714> App settings</li></ul></div><div class="scenario-item" data-v-bae46714><strong data-v-bae46714>Navigation:</strong><ul data-v-bae46714><li data-v-bae46714> Admin button visibility</li><li data-v-bae46714> My Schedule button (Para)</li><li data-v-bae46714> Role-based menu items</li></ul></div></div></div>',1)),f("div",zL,[f("button",{onClick:e[4]||(e[4]=(...d)=>n.resetToRealUser&&n.resetToRealUser(...d)),class:"reset-btn"},"  Reset to Real User "),f("button",{onClick:e[5]||(e[5]=(...d)=>n.refreshPage&&n.refreshPage(...d)),class:"refresh-btn"},"  Refresh Page ")])])):Se("",!0)],2)):Se("",!0)}const qL=xt(FL,[["render",KL],["__scopeId","data-v-bae46714"]]),XL={key:0,class:"debug-access-info"},YL={__name:"DebugAccessInfo",setup(t){const e=pa(),r=ne(!1),n=_e(()=>e.currentUser),s=_e(()=>{var o;const a=(o=n.value)==null?void 0:o.role;return["admin","administrator"].includes(a)}),i=()=>{r.value=!1,localStorage.setItem("debug-info-hidden","true")};return Bt(()=>{const a=localStorage.getItem("debug-info-hidden");s.value&&!a&&setTimeout(()=>{r.value=!0},3e3)}),(a,o)=>r.value?(L(),U("div",XL,[f("div",{class:"debug-info-content"},[o[0]||(o[0]=f("span",{class:"debug-info-icon"},"",-1)),o[1]||(o[1]=f("span",{class:"debug-info-text"},[Oe("Debug tools available - Press "),f("kbd",null,"Ctrl+Shift+D")],-1)),f("button",{onClick:i,class:"debug-info-close"},"")])])):Se("",!0)}},JL=xt(YL,[["__scopeId","data-v-358a31dd"]]);class QL{constructor(){this.timeoutId=null,this.warningTimeoutId=null,this.isEnabled=ne(!1),this.timeoutMinutes=ne(30),this.showWarning=ne(!1),this.warningCountdown=ne(0),this.lastActivity=Date.now(),this.router=null,this.unsubscribeSettings=null,this.activityEvents=["mousedown","mousemove","keypress","scroll","touchstart","click","keydown"],this.init()}init(){this.loadSettings(),this.setupActivityListeners(),this.setupAuthWatcher()}setupAuthWatcher(){Wh($t,e=>{e?setTimeout(()=>{this.resetTimeout()},1e3):(this.clearTimeouts(),this.hideWarning())})}async loadSettings(){try{const e=Qe(Xe,"app_settings","security");this.unsubscribeSettings=vc(e,r=>{if(r.exists()){const n=r.data(),s=this.isEnabled.value;this.isEnabled.value=n.sessionTimeoutEnabled||!1,this.timeoutMinutes.value=n.sessionTimeoutMinutes||30,$t.currentUser&&this.resetTimeout()}else this.isEnabled.value=!1,this.timeoutMinutes.value=30})}catch(e){console.error("Failed to load session timeout settings:",e)}}async updateSettings(e,r){var n;try{const s=Qe(Xe,"app_settings","security");await Wt(s,{sessionTimeoutEnabled:e,sessionTimeoutMinutes:r,updatedAt:new Date().toISOString(),updatedBy:(n=$t.currentUser)==null?void 0:n.uid},{merge:!0})}catch(s){console.error("Failed to update session timeout settings:",s)}}setupActivityListeners(){this.activityEvents.forEach(e=>{document.addEventListener(e,this.handleActivity.bind(this),!0)})}handleActivity(){this.isEnabled.value&&(this.lastActivity=Date.now(),this.hideWarning(),this.resetTimeout())}resetTimeout(){if(!this.isEnabled.value||!$t.currentUser)return;this.clearTimeouts();const e=Math.round(this.timeoutMinutes.value*60*1e3),r=Math.max(0,e-2*60*1e3);r>0&&r<e&&(this.warningTimeoutId=setTimeout(()=>{this.showSessionWarning()},r)),this.timeoutId=setTimeout(()=>{this.handleSessionTimeout()},e)}showSessionWarning(){this.showWarning.value=!0,this.warningCountdown.value=120;const e=setInterval(()=>{this.warningCountdown.value--,this.warningCountdown.value<=0&&(clearInterval(e),this.handleSessionTimeout())},1e3);this.countdownInterval=e}hideWarning(){this.showWarning.value=!1,this.warningCountdown.value=0,this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null)}async handleSessionTimeout(){try{if($t.currentUser){const e=Qe(Xe,"auditLogs",`timeout_${Date.now()}_${$t.currentUser.uid}`);await Wt(e,{type:"session_timeout",userId:$t.currentUser.uid,userEmail:$t.currentUser.email,timeoutMinutes:this.timeoutMinutes.value,lastActivity:new Date(this.lastActivity),timestamp:new Date,userAgent:navigator.userAgent})}this.clearTimeouts(),this.hideWarning(),await zh($t),alert(`Your session has expired after ${this.timeoutMinutes.value} minutes of inactivity. Please log in again.`),this.router?this.router.push("/login"):window.location.href="/login"}catch(e){console.error("Error during session timeout:",e)}}extendSession(){this.hideWarning(),this.resetTimeout()}clearTimeouts(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.warningTimeoutId&&(clearTimeout(this.warningTimeoutId),this.warningTimeoutId=null)}setRouter(e){this.router=e}destroy(){this.clearTimeouts(),this.hideWarning(),this.activityEvents.forEach(e=>{document.removeEventListener(e,this.handleActivity.bind(this),!0)}),this.unsubscribeSettings&&this.unsubscribeSettings()}}const zs=new QL;function bx(){const t=bi();return zs.setRouter(t),{isEnabled:zs.isEnabled,timeoutMinutes:zs.timeoutMinutes,showWarning:zs.showWarning,warningCountdown:zs.warningCountdown,updateSettings:zs.updateSettings.bind(zs),extendSession:zs.extendSession.bind(zs),resetTimeout:zs.resetTimeout.bind(zs)}}const ZL={key:0,class:"session-timeout-overlay"},eB={class:"session-timeout-dialog"},tB={class:"dialog-content"},rB={class:"countdown"},nB={class:"countdown-time"},sB={class:"dialog-actions"},aB={__name:"SessionTimeoutDialog",setup(t){const e=bi(),{showWarning:r,warningCountdown:n,extendSession:s}=bx(),i=o=>{const l=Math.floor(o/60),c=o%60;return`${l}:${c.toString().padStart(2,"0")}`},a=async()=>{try{await zh($t),e.push("/login")}catch(o){console.error("Error signing out:",o)}};return(o,l)=>Z(r)?(L(),U("div",ZL,[f("div",eB,[l[3]||(l[3]=f("div",{class:"dialog-header"},[f("h3",null," Session Timeout Warning")],-1)),f("div",tB,[l[1]||(l[1]=f("p",null,"Your session will expire in:",-1)),f("div",rB,[f("span",nB,Q(i(Z(n))),1)]),l[2]||(l[2]=f("p",null,"You will be automatically logged out for security purposes.",-1))]),f("div",sB,[f("button",{onClick:l[0]||(l[0]=(...c)=>Z(s)&&Z(s)(...c)),class:"btn btn-primary"}," Stay Logged In "),f("button",{onClick:a,class:"btn btn-secondary"}," Logout Now ")])])])):Se("",!0)}},iB=xt(aB,[["__scopeId","data-v-db34d9f2"]]),Zc={primaryColor:"#1976d2",primaryHover:"#1565c0",primaryLight:"#e3f2fd",primaryDark:"#0d47a1",secondaryColor:"#6c757d",secondaryHover:"#545b62",secondaryLight:"#f8f9fa",secondaryDark:"#495057",bgPrimary:"#f4f6f9",bgSecondary:"#ffffff",bgTertiary:"#f8f9fa",bgMuted:"#e9ecef",textPrimary:"#333333",textSecondary:"#666666",textMuted:"#999999",textInverse:"#ffffff",borderColor:"#dee2e6",borderLight:"#e9ecef",borderDark:"#adb5bd",borderFocus:"#1976d2",successColor:"#28a745",successHover:"#218838",successLight:"#d4edda",warningColor:"#ffc107",warningHover:"#e0a800",warningLight:"#fff3cd",errorColor:"#dc3545",errorHover:"#c82333",errorLight:"#f8d7da",infoColor:"#17a2b8",infoHover:"#138496",infoLight:"#d1ecf1",adminTabBg:"#f8f9fa",adminTabActive:"#2a79c9",adminTabHover:"#e3eaf6",tableHeaderBg:"#dfe7f3",tableStripeBg:"#f8fafd",tableBorder:"#d1d1d1",tableHover:"#f0f0f0",borderRadiusSm:"4px",borderRadiusMd:"6px",borderRadiusLg:"8px",borderRadiusXl:"12px",shadowSm:"0 1px 2px rgba(0, 0, 0, 0.05)",shadowMd:"0 2px 4px rgba(0, 0, 0, 0.1)",shadowLg:"0 4px 6px rgba(0, 0, 0, 0.1)",shadowXl:"0 4px 20px rgba(0, 0, 0, 0.3)",fontFamilyBase:"'Inter', 'Segoe UI', 'Arial', sans-serif",fontSizeXs:"0.75rem",fontSizeSm:"0.875rem",fontSizeBase:"1rem",fontSizeLg:"1.125rem",fontSizeXl:"1.25rem",fontSizeXxl:"1.5rem"},f_={primaryColor:"--primary-color",primaryHover:"--primary-hover",primaryLight:"--primary-light",primaryDark:"--primary-dark",secondaryColor:"--secondary-color",secondaryHover:"--secondary-hover",secondaryLight:"--secondary-light",secondaryDark:"--secondary-dark",bgPrimary:"--bg-primary",bgSecondary:"--bg-secondary",bgTertiary:"--bg-tertiary",bgMuted:"--bg-muted",textPrimary:"--text-primary",textSecondary:"--text-secondary",textMuted:"--text-muted",textInverse:"--text-inverse",borderColor:"--border-color",borderLight:"--border-light",borderDark:"--border-dark",borderFocus:"--border-focus",successColor:"--success-color",successHover:"--success-hover",successLight:"--success-light",warningColor:"--warning-color",warningHover:"--warning-hover",warningLight:"--warning-light",errorColor:"--error-color",errorHover:"--error-hover",errorLight:"--error-light",infoColor:"--info-color",infoHover:"--info-hover",infoLight:"--info-light",adminTabBg:"--admin-tab-bg",adminTabActive:"--admin-tab-active",adminTabHover:"--admin-tab-hover",tableHeaderBg:"--table-header-bg",tableStripeBg:"--table-stripe-bg",tableBorder:"--table-border",tableHover:"--table-hover",borderRadiusSm:"--border-radius-sm",borderRadiusMd:"--border-radius-md",borderRadiusLg:"--border-radius-lg",borderRadiusXl:"--border-radius-xl",shadowSm:"--shadow-sm",shadowMd:"--shadow-md",shadowLg:"--shadow-lg",shadowXl:"--shadow-xl",fontFamilyBase:"--font-family-base",fontSizeXs:"--font-size-xs",fontSizeSm:"--font-size-sm",fontSizeBase:"--font-size-base",fontSizeLg:"--font-size-lg",fontSizeXl:"--font-size-xl",fontSizeXxl:"--font-size-xxl"};function I4(){const t=ne({...Zc}),e=ne(!1),r=ne(null),n=ne(!1),s=async()=>{if(e.value)return t.value;e.value=!0,r.value=null;try{const m=Qe(Xe,"app_settings","theme"),g=await Zt(m);if(g.exists()){const v=g.data();t.value={...Zc,...v},console.log("Theme loaded from database:",t.value)}else t.value={...Zc},console.log("No saved theme found, using defaults");return n.value=!0,a(t.value),t.value}catch(m){throw r.value=m.message,console.error("Error loading theme:",m),m}finally{e.value=!1}},i=async(m=t.value)=>{e.value=!0,r.value=null;try{const g=Qe(Xe,"app_settings","theme");return await Wt(g,{...m,lastUpdated:new Date().toISOString()}),t.value={...m},a(m),console.log("Theme saved successfully"),!0}catch(g){throw r.value=g.message,console.error("Error saving theme:",g),g}finally{e.value=!1}},a=m=>{const g=document.documentElement;Object.entries(f_).forEach(([v,y])=>{m[v]!==void 0&&g.style.setProperty(y,m[v])})},o=(m,g)=>{t.value[m]=g,a(t.value)},l=async()=>{t.value={...Zc},a(t.value),await i(t.value)},c=m=>{a(m)},u=()=>{a(t.value)},d=m=>getComputedStyle(document.documentElement).getPropertyValue(m),h=m=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$|^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$|^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d.]+\s*\)$/.test(m),p=m=>({light:m,dark:m,hover:m});return Bt(()=>{n.value||s()}),{currentTheme:t,loading:e,error:r,isInitialized:n,loadTheme:s,saveTheme:i,applyTheme:a,updateThemeProperty:o,resetTheme:l,previewTheme:c,revertTheme:u,getCssVariableValue:d,validateColor:h,generateColorVariations:p,CSS_VARIABLE_MAP:f_,DEFAULT_THEME:Zc}}function oB(){const{loadTheme:t,currentTheme:e,isInitialized:r}=I4();return Bt(async()=>{if(!r.value)try{await t(),console.log("Theme initialized successfully")}catch(n){console.error("Failed to initialize theme:",n)}}),{currentTheme:e,isInitialized:r}}const lB={id:"app"},cB={id:"main-content"},uB={__name:"App",setup(t){const e=ne(!1);oB();const r=n=>{n.ctrlKey&&n.shiftKey&&n.key==="D"&&(n.preventDefault(),e.value=!e.value,console.log("Debug Role Switcher:",e.value?"Shown":"Hidden"))};return Bt(()=>{document.addEventListener("keydown",r)}),Ra(()=>{document.removeEventListener("keydown",r)}),(n,s)=>{const i=Tr("router-view");return L(),U("div",lB,[f("div",cB,[st(i)]),e.value?(L(),Xr(qL,{key:0})):Se("",!0),st(JL),st(iB)])}}},dB="modulepreload",fB=function(t){return"/"+t},h_={},ra=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=fB(l),l in h_)return;h_[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":dB,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function un(t,e=255){return typeof t!="string"?"":t.trim().replace(/\0/g,"").replace(/[<>'"&]/g,"").substring(0,e)}function hB(t){return typeof t!="string"?"":t.trim().toLowerCase().substring(0,255)}function p_(t,e=0,r=999999){const n=parseFloat(t);return isNaN(n)?0:Math.max(e,Math.min(r,n))}function f0(t,e){return!t||typeof t=="string"&&t.trim()===""?{isValid:!1,error:`${e} is required`}:{isValid:!0}}function pB(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?{isValid:!0}:{isValid:!1,error:"Invalid email format"}}function md(t,e,r=0,n=255){return typeof t!="string"?{isValid:!1,error:`${e} must be a string`}:t.length<r?{isValid:!1,error:`${e} must be at least ${r} characters`}:t.length>n?{isValid:!1,error:`${e} must be no more than ${n} characters`}:{isValid:!0}}function mB(t){return["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"].includes(t)?{isValid:!0}:{isValid:!1,error:"Invalid role"}}function gB(t,e=[],r=10*1024*1024){return t?e.length>0&&!e.includes(t.type)?{isValid:!1,error:`Invalid file type. Allowed: ${e.join(", ")}`}:t.size>r?{isValid:!1,error:`File too large. Maximum size: ${r/(1024*1024)}MB`}:[/\.exe$/i,/\.bat$/i,/\.cmd$/i,/\.scr$/i,/\.vbs$/i,/\.js$/i,/\.jar$/i].some(s=>s.test(t.name))?{isValid:!1,error:"Suspicious file type detected"}:{isValid:!0}:{isValid:!1,error:"No file selected"}}function Hr(t){if(typeof t!="string")return{isSafe:!0,threats:[]};const e=[];return/<script|javascript:|vbscript:|onload=|onerror=/i.test(t)&&e.push("Script injection attempt"),/(\bunion\b|\bselect\b|\binsert\b|\bupdate\b|\bdelete\b|\bdrop\b).*(\bfrom\b|\binto\b|\bwhere\b)/i.test(t)&&e.push("SQL injection pattern"),/\.\.\/|\.\.\\|%2e%2e%2f|%2e%2e%5c/i.test(t)&&e.push("Path traversal attempt"),/<[^>]*>/i.test(t)&&e.push("HTML injection attempt"),/\0/.test(t)&&e.push("Null byte injection"),{isSafe:e.length===0,threats:e}}const Sl={};function Ts(t,e=10,r=6e4){const n=Date.now(),s=`${t}_${Math.floor(n/r)}`;return Sl[s]||(Sl[s]=0),Sl[s]++,Sl[s]>e?{allowed:!1,error:`Rate limit exceeded. Maximum ${e} requests per ${r/1e3} seconds.`}:(Object.keys(Sl).forEach(i=>{const a=parseInt(i.split("_").pop())*r;n-a>r*2&&delete Sl[i]}),{allowed:!0})}function k4(t,e={}){const r=[],{isNew:n=!1}=e;if(!t||typeof t!="object")return{isValid:!1,errors:["Invalid student data"]};if(!t.app||!t.app.studentData)return r.push("Student data structure is invalid"),{isValid:!1,errors:r};const s=t.app.studentData;return[{field:"firstName",name:"First Name"},{field:"lastName",name:"Last Name"},{field:"caseManagerId",name:"Case Manager"}].forEach(({field:l,name:c})=>{const u=f0(s[l],c);u.isValid||r.push(u.error)}),[{field:"firstName",name:"First Name",maxLength:100},{field:"lastName",name:"Last Name",maxLength:100},{field:"studentId",name:"Student ID",maxLength:50},{field:"grade",name:"Grade",maxLength:10}].forEach(({field:l,name:c,maxLength:u})=>{if(s[l]){const d=md(s[l],c,1,u);d.isValid||r.push(d.error)}}),["firstName","lastName","studentId","grade"].forEach(l=>{if(s[l]){const c=Hr(s[l]);c.isSafe||r.push(`Security threat detected in ${l}: ${c.threats.join(", ")}`)}}),t.app.accommodations&&typeof t.app.accommodations!="string"&&t.app.accommodations!==null&&r.push("Accommodations must be encrypted string or null"),t.app.classServices&&typeof t.app.classServices!="string"&&t.app.classServices!==null&&r.push("Class services must be encrypted string or null"),s.plan&&typeof s.plan!="string"&&s.plan!==null&&r.push("Student plan must be encrypted string or null"),{isValid:r.length===0,errors:r}}function vB(t){const e=[];if(!t||typeof t!="object")return{isValid:!1,errors:["Invalid user data"]};const r=f0(t.name,"Name");r.isValid||e.push(r.error);const n=f0(t.email,"Email");n.isValid||e.push(n.error);const s=f0(t.role,"Role");if(s.isValid||e.push(s.error),t.email){const a=pB(t.email);a.isValid||e.push(a.error)}if(t.role){const a=mB(t.role);a.isValid||e.push(a.error)}if(t.name){const a=md(t.name,"Name",1,100);a.isValid||e.push(a.error)}if(t.email){const a=md(t.email,"Email",1,255);a.isValid||e.push(a.error)}return["name","email"].forEach(a=>{if(t[a]){const o=Hr(t[a]);o.isSafe||e.push(`Security threat detected in ${a}: ${o.threats.join(", ")}`)}}),{isValid:e.length===0,errors:e}}function D4(t){const e={...t};if(e.app&&e.app.studentData){const r=e.app.studentData;["firstName","lastName","studentId","grade"].forEach(s=>{r[s]&&(r[s]=un(r[s],100))})}else["firstName","lastName","studentId","grade"].forEach(n=>{e[n]&&(e[n]=un(e[n],100))});return e}function xB(t){const e={...t};return e.name&&(e.name=un(e.name,100)),e.email&&(e.email=hB(e.email)),e}const yB=async(t,e,r=100,n=1e3)=>{const s=[];for(let a=0;a<t.length;a+=r)s.push(t.slice(a,a+r));const i=[];for(let a=0;a<s.length;a++)try{const o=await e(s[a]);i.push(o),a<s.length-1&&await new Promise(l=>setTimeout(l,n))}catch(o){throw console.error(`Error in batch ${a+1}:`,o),o}return i},Oc=gB;function nh(t){if(!t||typeof t!="object")return t;if(t.toJSON&&typeof t.toJSON=="function")return t.toJSON();if(Array.isArray(t))return t.map(nh);const e={};for(const[r,n]of Object.entries(t)){if(r.toLowerCase().includes("schedule")&&typeof n=="object"&&n!==null)for(const[s,i]of Object.entries(n))i&&typeof i=="object"&&i.teacherId!==void 0&&(n[s].teacherId=String(i.teacherId));e[r]=nh(n)}return e}function Oa(){const t=ne([]);let e=null;async function r(){if(!e)try{const{useGoogleSheetsRealtime:c}=await ra(async()=>{const{useGoogleSheetsRealtime:u}=await Promise.resolve().then(()=>Ble);return{useGoogleSheetsRealtime:u}},void 0);e=c()}catch(c){console.error("Failed to load Google Sheets sync:",c)}return e}async function n(){var d,h,p;const c=await jt(wt(Xe,"students"));t.value=c.docs.map(m=>{const g=m.data(),v=nh(g);return{id:m.id,...v}});const u=t.value.find(m=>m.aeries);u&&(console.log(" useStudents DEBUG - Student with aeries:",u),console.log(" useStudents DEBUG - aeries.schedule:",(d=u.aeries)==null?void 0:d.schedule),console.log(" useStudents DEBUG - aeries.schedule type:",typeof((h=u.aeries)==null?void 0:h.schedule)),(p=u.aeries)!=null&&p.schedule&&console.log(" useStudents DEBUG - schedule keys:",Object.keys(u.aeries.schedule)))}function s(c){t.value=c.map(u=>{const d=nh(u);return{id:u.id,...d}})}async function i(){return(await jt(wt(Xe,"students"))).docs.map(u=>({id:u.id,...u.data()}))}async function a(c,u){await Xd(Qe(Xe,"students",c),u);try{const d=await r();if(d&&d.linkedSheetId.value){const h=t.value.findIndex(p=>p.id===c);h!==-1&&(t.value[h]={...t.value[h],...u}),console.log("Syncing student update to Google Sheets..."),await d.updateSheetData(t.value)}}catch(d){console.error("Failed to sync to Google Sheets:",d)}}async function o(c){await io(Qe(Xe,"students",c));try{const u=await r();u&&u.linkedSheetId.value&&(t.value=t.value.filter(d=>d.id!==c),console.log("Syncing student deletion to Google Sheets..."),await u.updateSheetData(t.value))}catch(u){console.error("Failed to sync to Google Sheets:",u)}}return{students:t,fetchStudents:n,setStudents:s,fetchAllStudents:i,updateStudent:a,deleteStudent:o,deleteAllStudents:async()=>{try{const u=(await jt(wt(Xe,"students"))).docs;return await yB(u,async d=>{const h=lx(Xe);d.forEach(p=>{h.delete(p.ref)}),await h.commit()},50,2e3),{success:!0}}catch(c){throw console.error("Error deleting all students:",c),c}}}}function Na(){const t=ne({}),e=ne([]);async function r(){const a=await jt(wt(Xe,"users")),o={},l=[];a.forEach(c=>{const u=c.data();o[c.id]={id:c.id,...u},l.push({id:c.id,...u}),u.aeriesId&&console.log(" Loaded user with Aeries ID:",{name:u.name,email:u.email,aeriesId:u.aeriesId,id:c.id})}),t.value=o,e.value=l,console.log(" Total users loaded:",l.length),console.log(" Users with Aeries IDs:",l.filter(c=>c.aeriesId).length)}const n=_e(()=>({teachers:e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)),caseManagers:e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role)),speech:e.value.filter(a=>a.provider==="SLP"),ot:e.value.filter(a=>a.provider==="OT"),mh:e.value.filter(a=>a.provider==="MH"),pt:e.value.filter(a=>a.provider==="PT"),sc:e.value.filter(a=>a.provider==="SC"),tr:e.value.filter(a=>a.provider==="TR"),aud:e.value.filter(a=>a.provider==="AUD"),vi:e.value.filter(a=>a.provider==="VI"),at:e.value.filter(a=>a.provider==="AT"),dhh:e.value.filter(a=>a.provider==="DHH"),om:e.value.filter(a=>a.provider==="O&M"),bis:e.value.filter(a=>a.provider==="BIS"),hn:e.value.filter(a=>a.provider==="HN"),sw:e.value.filter(a=>a.provider==="SW")})),s=_e(()=>e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role))),i=_e(()=>e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)));return{users:t,userList:e,fetchUsers:r,caseManagers:s,teacherList:i,userRoles:n}}function _x(){const t=ne({}),e=ne(!1);async function r(){e.value=!0;try{const h=await jt(wt(Xe,"aideSchedules")),p={};h.forEach(m=>{p[m.id]=m.data()}),t.value=p}catch(h){console.error("Error loading aide assignments:",h),t.value={}}finally{e.value=!1}}async function n(h){if(!h){console.warn("loadAideAssignment called without aideId");return}e.value=!0;try{const p=await Zt(Qe(Xe,"aideSchedules",h));p.exists()?t.value[h]=p.data():t.value[h]={classAssignment:{},directAssignment:[]}}catch(p){console.error("Error loading aide assignment:",p),t.value[h]={classAssignment:{},directAssignment:[]}}finally{e.value=!1}}async function s(h,p){try{const m=JSON.parse(JSON.stringify(p));await Wt(Qe(Xe,"aideSchedules",h),m,{merge:!0}),t.value[h]=m}catch(m){throw console.error("Error saving aide assignment:",m),m}}async function i(){try{const h=Object.entries(t.value);for(const[p,m]of h){const g=JSON.parse(JSON.stringify(m));await Wt(Qe(Xe,"aideSchedules",p),g,{merge:!0})}}catch(h){throw console.error("Error saving all aide assignments:",h),h}}function a(h,p){const m=[];return Object.entries(t.value).forEach(([g,v])=>{v.classAssignment&&v.classAssignment[p]&&(Array.isArray(v.classAssignment[p])?v.classAssignment[p]:[v.classAssignment[p]]).includes(h)&&m.push(g)}),m}function o(h){var m;const p=(m=t.value[h])==null?void 0:m.directAssignment;return Array.isArray(p)?p.length>0?p[0]:null:p||null}function l(h){return Object.keys(t.value).find(m=>{var v;const g=(v=t.value[m])==null?void 0:v.directAssignment;return Array.isArray(g)?g.includes(h):g===h})||null}function c(h,p,m){const g=[],v=t.value[h];return v&&((Array.isArray(v.directAssignment)?v.directAssignment:v.directAssignment?[v.directAssignment]:[]).forEach(x=>{if(x){const E=p.find(I=>I.id===x);E&&g.push({...E,assignmentType:"direct"})}}),Object.entries(v.classAssignment||{}).forEach(([x,E])=>{E&&(Array.isArray(E)?E:[E]).forEach(P=>{P&&p.forEach(w=>{const b=d(w);if(b){const T=b[x];if((typeof T=="string"?T:T==null?void 0:T.teacherId)===P){const S=g.findIndex(k=>k.id===w.id);S===-1?g.push({...w,assignmentType:"class",period:x,teacherId:P}):(g[S].assignmentType="both",g[S].period=x,g[S].teacherId=P)}}})})})),g}function u(h,p,m,g){if(!h||!p||!m||!g)return!1;const v=m.find(w=>w.id===p);if(!v)return!1;const y=t.value[h];if(!y)return!1;if((Array.isArray(y.directAssignment)?y.directAssignment:y.directAssignment?[y.directAssignment]:[]).includes(p))return!0;const E=d(v);if(!E)return!1;const I=y.classAssignment||{};return Object.entries(E).some(([w,b])=>{const T=typeof b=="string"?b:b==null?void 0:b.teacherId,_=I[w];return!_||!T?!1:(Array.isArray(_)?_:[_]).includes(T)})}function d(h){var p,m,g,v,y;return h.schedule?h.schedule:(m=(p=h.app)==null?void 0:p.schedule)!=null&&m.periods?h.app.schedule.periods:(v=(g=h.aeries)==null?void 0:g.schedule)!=null&&v.periods?h.aeries.schedule.periods:(y=h.aeries)!=null&&y.schedule?h.aeries.schedule:null}return{aideAssignment:_e(()=>t.value),loading:_e(()=>e.value),loadAideAssignments:r,loadAideAssignment:n,saveAideAssignment:s,saveAllAideAssignments:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}function Sx(){const t=ne(!1),e=ne(""),r=ne("");let n,s,i,a;try{n=tc(),s=_a(n,"getStudentFeedback"),i=_a(n,"createFeedbackFormSheet"),a=_a(n,"createFeedbackFormSheetWithUserAuth")}catch(I){console.warn("Firebase Functions not available:",I),s=()=>Promise.reject(new Error("Functions not available")),i=()=>Promise.reject(new Error("Functions not available")),a=()=>Promise.reject(new Error("Functions not available"))}const o=wt(Xe,"feedbackForms"),l=ne(!1),c=ne([]);let u;const d=_e(()=>{var P;return(((P=c.value)==null?void 0:P.filter(w=>w.active!==!1))||[]).sort((w,b)=>{var S,k;const T=(S=w.createdAt)!=null&&S.seconds?new Date(w.createdAt.seconds*1e3):new Date(w.createdAt);return((k=b.createdAt)!=null&&k.seconds?new Date(b.createdAt.seconds*1e3):new Date(b.createdAt))-T})}),h=async I=>{try{t.value=!0,e.value="",console.log(" Creating Google Sheet with personal account for form:",I.title);const P=await i({title:I.title,description:I.description,formUrl:I.formUrl,studentId:I.studentId||null,studentName:I.studentName||null});if(!P.data.success)throw new Error("Failed to create Google Sheet: "+P.data.message);console.log(" Google Sheet created:",P.data.spreadsheetUrl);const w={title:I.title,description:I.description,formUrl:I.formUrl,spreadsheetId:P.data.spreadsheetId,spreadsheetUrl:P.data.spreadsheetUrl,userDriveId:P.data.userDriveId,parentFolderId:P.data.parentFolderId,active:!0,createdAt:new Date,createdBy:I.createdBy},b=Qe(o);return await Wt(b,w),r.value="Feedback form and Google Sheet created successfully!",{id:b.id,...w}}catch(P){throw console.error("Error creating feedback form:",P),P.message.includes("storage quota exceeded")||P.message.includes("Service account storage quota exceeded")?P.value=' Cannot create Google Sheet: Service account has no storage quota. Please use the "Test with Personal Account" button in Google Drive Setup to use your personal Google account instead.':P.message.includes("permission")||P.message.includes("access")?P.value=" Permission denied: Please ensure the folder is shared with the service account or use your personal Google account.":P.value=P.message,P}finally{t.value=!1}},p=async(I,P)=>{try{t.value=!0,e.value="";const w=Qe(o,I);await Wt(w,{...P,updatedAt:new Date},{merge:!0}),r.value="Feedback form updated successfully!"}catch(w){throw console.error("Error updating feedback form:",w),e.value=w.message,w}finally{t.value=!1}},m=async I=>{try{t.value=!0,e.value="";const P=Qe(o,I);await io(P),r.value="Feedback form deleted successfully!"}catch(P){throw console.error("Error deleting feedback form:",P),e.value=P.message,P}finally{t.value=!1}},g=()=>{e.value="",r.value=""},v=I=>{const P=I.match(/\/forms\/d\/([a-zA-Z0-9-_]+)/);return P?P[1]:null},y=()=>{try{u=vc(o,I=>{c.value=I.docs.map(P=>({id:P.id,...P.data()})),l.value=!1},I=>{console.warn("Error listening to feedback forms:",I),l.value=!1})}catch(I){console.warn("Error initializing Firestore listeners:",I),l.value=!1}},x=()=>{u&&u()};return Bt(()=>{y()}),Ra(()=>{x()}),{isLoading:t,error:e,successMessage:r,formsLoading:l,feedbackForms:c,activeForms:d,createFeedbackForm:h,updateFeedbackForm:p,deleteFeedbackForm:m,clearMessages:g,extractFormId:v,createFeedbackFormWithUserAuth:async(I,P)=>{try{t.value=!0,e.value="",console.log(" Creating Google Sheet with personal account for form:",I.title);const w=await a({title:I.title,description:I.description,formUrl:I.formUrl,studentId:I.studentId||null,studentName:I.studentName||null,accessToken:P});if(!w.data.success)throw new Error("Failed to create Google Sheet: "+w.data.message);console.log(" Google Sheet created with personal account:",w.data.spreadsheetUrl);const b={title:I.title,description:I.description,formUrl:I.formUrl,spreadsheetId:w.data.spreadsheetId,spreadsheetUrl:w.data.spreadsheetUrl,driveType:"personal",active:!0,createdAt:new Date,createdBy:I.createdBy},T=Qe(o);return await Wt(T,b),r.value="Feedback form and Google Sheet created successfully in your personal Google Drive!",{id:T.id,...b}}catch(w){throw console.error("Error creating feedback form with user auth:",w),w.value=w.message,w}finally{t.value=!1}}}}function EB(){const t=pa(),e=ne(!1),r=ne(null),n=ne([]),s=ne(0),i=_e(()=>t.user),a=_e(()=>{var E;return(E=t.user)==null?void 0:E.role}),o=_e(()=>{var E;return(E=t.user)==null?void 0:E.uid}),l=async()=>{console.log(" Admin query: Loading all students - START"),console.log(" Admin query: currentUser:",i.value),console.log(" Admin query: currentRole:",a.value),console.log(" Admin query: currentUserId:",o.value);try{const E=lr(wt(Xe,"students"),cn("app.studentData.lastName","asc"));console.log(" Admin query created:",E);const I=await jt(E);console.log(" Admin query snapshot:",I.size,"documents");const P=I.docs.map(w=>({id:w.id,...w.data()}));if(console.log(" Admin query result:",P.length,"students"),P.length>0)console.log(" First student structure:",P[0]);else{console.log(" Admin query: NO STUDENTS FOUND - checking collection directly");const w=lr(wt(Xe,"students")),b=await jt(w);console.log(" Simple query found:",b.size,"documents")}return P}catch(E){console.error(" Admin query error:",E),console.error(" Admin query error details:",E.message,E.code);try{console.log(" Trying fallback query without ordering...");const I=lr(wt(Xe,"students")),P=await jt(I);console.log(" Fallback query found:",P.size,"documents");const w=P.docs.map(b=>({id:b.id,...b.data()}));return console.log(" Fallback query returning:",w.length,"students"),w}catch(I){return console.error(" Fallback query also failed:",I),console.error(" Fallback query error details:",I.message,I.code),[]}}},c=async()=>{console.log(" 504 Admin query: Loading only IEP and 504 students");try{const E=lr(wt(Xe,"students"),Vr("app.studentData.plan","in",["IEP","504"]));return(await jt(E)).docs.map(P=>({id:P.id,...P.data()}))}catch(E){return console.error(" 504 Admin query error:",E),[]}},u=async E=>{console.log(" Security: Loading students for case manager using staffIds:",E);try{const I=lr(wt(Xe,"students"),Vr("app.staffIds","array-contains",E),cn("app.studentData.lastName","asc")),w=(await jt(I)).docs.map(b=>({id:b.id,...b.data()}));return console.log(" Security: Case manager has access to",w.length,"students via staffIds"),console.log(" Security: CM accessible students:",w.map(b=>{var T,_,S,k;return`${(_=(T=b.app)==null?void 0:T.studentData)==null?void 0:_.firstName} ${(k=(S=b.app)==null?void 0:S.studentData)==null?void 0:k.lastName}`}).slice(0,5)),w}catch(I){return console.error(" Security: Error loading case manager students:",I),[]}},d=async E=>{console.log(" Teacher query: Loading students for teacher",E);try{const I=lr(wt(Xe,"students"),Vr("app.staffIds","array-contains",E),cn("app.studentData.lastName","asc")),P=await jt(I);return console.log(" Teacher query: Found",P.size,"students with teacher in staffIds"),P.docs.map(w=>({id:w.id,...w.data()}))}catch(I){return console.error(" Security: Error loading teacher students:",I),[]}},h=async E=>{var I,P,w,b;console.log(" Service Provider query: Loading students for provider",E),console.log(" Service Provider query: userId type:",typeof E),console.log(" Service Provider query: userId value:",JSON.stringify(E));try{const T=lr(wt(Xe,"students"),Vr("app.staffIds","array-contains",E));console.log(" Service Provider query: Executing staffIds query...");const _=await jt(T);console.log(" Service Provider query: Success! Found",_.size,"students");const S=_.docs.map(k=>({id:k.id,...k.data()}));return S.sort((k,A)=>{var R,F,O,B;const D=((F=(R=k.app)==null?void 0:R.studentData)==null?void 0:F.lastName)||"",N=((B=(O=A.app)==null?void 0:O.studentData)==null?void 0:B.lastName)||"";return D.localeCompare(N)}),S}catch(T){console.error(" Service Provider query FAILED:",T),console.error(" Error code:",T.code),console.error(" Error message:",T.message),console.error(" Full error object:",T);const _=jo();return console.error(" Current auth state:",{uid:(I=_.currentUser)==null?void 0:I.uid,email:(P=_.currentUser)==null?void 0:P.email,customClaims:"Check in browser dev tools"}),console.error(" Auth mismatch check:",{queryUserId:E,authUid:(w=_.currentUser)==null?void 0:w.uid,match:E===((b=_.currentUser)==null?void 0:b.uid)}),[]}},p=async E=>{var I,P,w,b;console.log(" Paraeducator query: Loading students for aide",E),console.log(" Paraeducator query: userId type:",typeof E),console.log(" Paraeducator query: userId value:",JSON.stringify(E));try{console.log(" Paraeducator query: Trying staffIds approach first...");try{const N=lr(wt(Xe,"students"),Vr("app.staffIds","array-contains",E),cn("app.studentData.lastName","asc")),R=await jt(N);if(console.log(" Paraeducator query: staffIds approach found",R.size,"students"),R.size>0){const F=R.docs.map(O=>({id:O.id,...O.data()}));return console.log(" Paraeducator query: SUCCESS with staffIds approach"),F}}catch(N){console.log(" Paraeducator query: staffIds approach failed:",N.message)}console.log(" Paraeducator query: Using aideSchedules fallback...");const T=await Zt(Qe(Xe,"aideSchedules",E));if(!T.exists())return console.log(" Paraeducator query: No aide schedule document found for",E),[];const _=T.data();console.log(" Paraeducator query: Found aide data:",_);let S=[];if(_.studentIds&&Array.isArray(_.studentIds)?(S=_.studentIds,console.log(" Paraeducator query: Using studentIds array:",S)):_.directAssignment&&(S=Array.isArray(_.directAssignment)?_.directAssignment:[_.directAssignment],console.log(" Paraeducator query: Using directAssignment as fallback:",S)),S.length===0)return console.log(" Paraeducator query: No student assignments found for aide",E),[];console.log(" Paraeducator query: Fetching",S.length,"assigned students individually...");const k=S.map(async N=>{try{const R=await Zt(Qe(Xe,"students",N));return R.exists()?{id:R.id,...R.data()}:null}catch(R){return console.warn(" Paraeducator query: Failed to fetch student",N,":",R.message),null}}),D=(await Promise.all(k)).filter(N=>N!==null);return D.sort((N,R)=>{var B,V,z,H;const F=((V=(B=N.app)==null?void 0:B.studentData)==null?void 0:V.lastName)||"",O=((H=(z=R.app)==null?void 0:z.studentData)==null?void 0:H.lastName)||"";return F.localeCompare(O)}),console.log(" Paraeducator query: Successfully fetched",D.length,"students"),D}catch(T){console.error(" Paraeducator query FAILED:",T),console.error(" Error code:",T.code),console.error(" Error message:",T.message),console.error(" Full error object:",T);const _=jo();return console.error(" Current auth state:",{uid:(I=_.currentUser)==null?void 0:I.uid,email:(P=_.currentUser)==null?void 0:P.email,customClaims:"Check in browser dev tools"}),console.error(" Auth mismatch check:",{queryUserId:E,authUid:(w=_.currentUser)==null?void 0:w.uid,match:E===((b=_.currentUser)==null?void 0:b.uid)}),[]}},m=async()=>{console.log(" Testing query: Loading students with testing flags");const E=lr(wt(Xe,"students"),Vr("app.flags.flag2","==",!0),cn("app.studentData.lastName","asc")),I=lr(wt(Xe,"students"),Vr("app.flags.separateSetting","==",!0),cn("app.studentData.lastName","asc")),[P,w]=await Promise.all([jt(E),jt(I)]),b=P.docs.map(S=>({id:S.id,...S.data()})),T=w.docs.map(S=>({id:S.id,...S.data()})),_=[...b];return T.forEach(S=>{_.find(k=>k.id===S.id)||_.push(S)}),_.sort((S,k)=>{var N,R,F,O;const A=((R=(N=S.app)==null?void 0:N.studentData)==null?void 0:R.lastName)||"",D=((O=(F=k.app)==null?void 0:F.studentData)==null?void 0:O.lastName)||"";return A.localeCompare(D)})},g=async(E={})=>{var I,P;if(console.log(" loadStudents called - DEBUG AUTH STATE:"),console.log("  currentUserId.value:",o.value),console.log("  currentRole.value:",a.value),console.log("  authStore.user:",t.user),console.log("  authStore.user?.uid:",(I=t.user)==null?void 0:I.uid),console.log("  authStore.user?.role:",(P=t.user)==null?void 0:P.role),!o.value||!a.value)return console.error(" No authenticated user or role - FAILING AUTH CHECK"),console.error("  currentUserId.value is:",o.value),console.error("  currentRole.value is:",a.value),r.value="Authentication required",[];e.value=!0,r.value=null;try{let w=[];switch(console.log(" ROUTING to query based on role:",a.value),console.log(" Available role cases: admin, administrator, sped_chair, administrator_504_CM, case_manager, teacher, service_provider, paraeducator"),a.value){case"admin":case"administrator":case"sped_chair":w=await l();break;case"administrator_504_CM":w=await l();break;case"case_manager":console.log(" CALLING getCaseManagerStudents with userId:",o.value),w=await u(o.value),console.log(" getCaseManagerStudents COMPLETED, returned:",w.length,"students");break;case"teacher":w=await d(o.value);break;case"service_provider":w=await h(o.value);break;case"paraeducator":w=await p(o.value);break;default:return console.error(" Unknown role:",a.value),r.value="Invalid user role",[]}return E.testingOnly&&(w=await m()),n.value=w,s.value=w.length,console.log(` Loaded ${w.length} students for ${a.value}`),w}catch(w){return console.error(" Error loading students:",w),r.value=w.message||"Failed to load students",[]}finally{e.value=!1}},v=async E=>{if(!E)throw new Error("Student ID is required");if(!o.value||!a.value)throw new Error("Authentication required");e.value=!0,r.value=null;try{const I=await Zt(Qe(Xe,"students",E));if(!I.exists())throw new Error("Student not found");const P={id:I.id,...I.data()};if(!await y(P,o.value,a.value))throw new Error("Access denied to this student");return P}catch(I){throw console.error(" Error getting student:",I),r.value=I.message,I}finally{e.value=!1}},y=async(E,I,P)=>{var w,b,T,_,S,k,A;if(!E||!I||!P)return!1;if(["admin","administrator","administrator_504_CM","sped_chair"].includes(P))return!0;if(P==="case_manager")return((b=(w=E.app)==null?void 0:w.studentData)==null?void 0:b.caseManagerId)===I;if(P==="teacher"){if(!((_=(T=E.app)==null?void 0:T.schedule)!=null&&_.periods))return!1;const D=E.app.schedule.periods,N=Object.values(D);return N.includes(I)?!0:N.some(R=>{var F;return typeof R=="object"&&R!==null?R.teacherId===I||((F=R.coTeaching)==null?void 0:F.caseManagerId)===I:!1})}if(P==="service_provider"){if((S=E.app)!=null&&S.providers&&Object.values(E.app.providers).includes(I))return!0;if((A=(k=E.app)==null?void 0:k.schedule)!=null&&A.periods){const D=E.app.schedule.periods,N=Object.values(D);return N.includes(I)?!0:N.some(R=>{var F;return typeof R=="object"&&R!==null?R.teacherId===I||((F=R.coTeaching)==null?void 0:F.caseManagerId)===I:!1})}}return!1},x=async(E=50,I=null)=>{if(!o.value||!a.value)throw new Error("Authentication required");e.value=!0,r.value=null;try{let P=lr(wt(Xe,"students"),cn("app.studentData.lastName","asc"),Rs(E));I&&(P=lr(P,Z0(I))),a.value==="case_manager"&&(P=lr(wt(Xe,"students"),Vr("app.studentData.caseManagerId","==",o.value),cn("app.studentData.lastName","asc"),Rs(E)),I&&(P=lr(P,Z0(I))));const w=await jt(P);return{students:w.docs.map(T=>({id:T.id,...T.data()})),lastDoc:w.docs[w.docs.length-1],hasMore:w.docs.length===E}}catch(P){throw console.error(" Error loading paginated students:",P),r.value=P.message,P}finally{e.value=!1}};return{students:_e(()=>n.value),loading:_e(()=>e.value),error:_e(()=>r.value),totalCount:_e(()=>s.value),loadStudents:g,getStudent:v,verifyStudentAccess:y,loadStudentsPaginated:x,getAdminStudents:l,getAdmin504Students:c,getCaseManagerStudents:u,getTeacherStudents:d,getServiceProviderStudents:h,getParaeducatorStudents:p,getTestingStudents:m}}function bB(t,e){const r={isSecure:!0,violations:[],summary:"",studentCount:t.length,authorizedCount:0,unauthorizedCount:0};return!e||!e.role?(r.isSecure=!1,r.violations.push("No user or role provided"),r):(t.forEach((n,s)=>{var a,o,l,c;_B(n,e)?r.authorizedCount++:(r.unauthorizedCount++,r.isSecure=!1,r.violations.push({studentIndex:s,studentName:`${(o=(a=n.app)==null?void 0:a.studentData)==null?void 0:o.firstName} ${(c=(l=n.app)==null?void 0:l.studentData)==null?void 0:c.lastName}`,studentId:n.id,reason:SB(n,e)}))}),r.summary=`User ${e.role} (${e.uid}) has access to ${r.authorizedCount}/${r.studentCount} students`,r.isSecure||(r.summary+=`. SECURITY VIOLATION: ${r.unauthorizedCount} unauthorized students accessible!`),r)}function _B(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"admin":case"administrator":case"administrator_504_CM":case"sped_chair":return!0;case"case_manager":return((i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===n;case"teacher":const d=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(d).includes(n);case"service_provider":const h=((l=t.app)==null?void 0:l.providers)||{},p=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},m=Object.values(h).includes(n),g=Object.values(p).includes(n);return m||g;case"paraeducator":return!0;default:return!1}}function SB(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"case_manager":const d=(i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId;return`Case manager ${n} is not assigned to student (assigned to: ${d})`;case"teacher":const h=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{},p=Object.values(h);return`Teacher ${n} does not teach this student (teachers: ${p.join(", ")})`;case"service_provider":const m=((l=t.app)==null?void 0:l.providers)||{},g=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},v=Object.values(m).filter(x=>x),y=Object.values(g);return`Service provider ${n} is not assigned to student (providers: ${v.join(", ")}, teachers: ${y.join(", ")})`;case"paraeducator":return null;default:return`Unknown role: ${r}`}}function TB(t){t.isSecure?console.log(" SECURITY TEST PASSED:",t.summary):(console.error(" SECURITY TEST FAILED:",t.summary),console.error("Violations:",t.violations))}function m_(t,e){const r=bB(t,e);return TB(r),r}const P4=(t,e)=>{console.log(` DEBUG: Schedule Operation - ${t}:`,e)};function F4(t){return P4("getTeacherIdFromPeriod",{periodData:t,type:typeof t}),t?typeof t=="string"?t:t.teacherId||null:null}function bp(t){var e;return P4("getCoTeachingCaseManagerFromPeriod",{periodData:t}),!t||typeof t!="object"?null:((e=t.coTeaching)==null?void 0:e.caseManagerId)||null}function wB(t,e={}){if(!t||!t.periods)return[];const r=new Set;return Object.values(t.periods).forEach(n=>{const s=F4(n);s&&r.add(s);const i=bp(n);if(i){const a=e[i];a&&(a.role==="teacher"||a.roles&&a.roles.includes("teacher"))&&r.add(i)}}),Array.from(r)}function AB(t){if(!t||!t.periods)return[];const e=new Set;return Object.values(t.periods).forEach(r=>{const n=bp(r);n&&e.add(n)}),Array.from(e)}function CB(t,e){var r,n;return!((n=(r=t.app)==null?void 0:r.schedule)!=null&&n.periods)||!e?!1:Object.values(t.app.schedule.periods).some(s=>bp(s)===e)}function IB(){const t=bi(),e=pa(),{students:r,setStudents:n}=Oa(),{users:s,userList:i,fetchUsers:a,caseManagers:o,teacherList:l,userRoles:c}=Na(),{loadAideAssignment:u,loadAideAssignments:d,shouldAideSeeStudent:h,aideAssignment:p}=_x(),{feedbackForms:m,formsLoading:g}=Sx(),{loadStudents:v}=EB(),y=ne(!1),x=ne(null),E=_e(()=>e.currentUser),I=_e(()=>{var R;const N=(R=E.value)==null?void 0:R.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(N)}),P=_e(()=>{var N;return["case_manager","administrator_504_CM","sped_chair"].includes((N=E.value)==null?void 0:N.role)}),w=_e(()=>s.value||{}),b=_e(()=>{var N;return((N=i.value)==null?void 0:N.filter(R=>R.role==="paraeducator"))||[]}),T=async()=>{var N,R;console.log(" useStudentData: fetchData() called"),y.value=!0,x.value=null;try{console.log(" useStudentData: About to fetchUsers()..."),await a(),console.log(" useStudentData: fetchUsers() completed");const F=E.value;if(console.log(" useStudentData: Checking user for loadStudents call:",F),F){console.log(" Security: Fetching students for user role:",F.role),console.log(" useStudentData: About to call loadStudents()...");const B=await v();console.log(" useStudentData: loadStudents() returned:",B.length,"students"),n(B);const V=m_(B,F);V.isSecure||console.error(" SECURITY VIOLATION DETECTED:",V.violations)}else console.log(" Security: No user found - setting empty student array"),n([]);const O=(N=E.value)==null?void 0:N.role;if(["admin","administrator","administrator_504_CM","sped_chair"].includes(O))await d();else if(O==="paraeducator"&&E.value.uid){console.log(" useStudentData: Loading individual aide assignment for paraeducator:",E.value.uid),await u(E.value.uid);const B=Qe(Xe,"aideSchedules",E.value.uid),V=vc(B,async z=>{if(z.exists()){console.log(" useStudentData: Aide schedule updated, reloading students..."),await u(E.value.uid);const H=await v();n(H)}});Ra(()=>V())}console.log(" Security: Loaded",r.value.length,"students for",(R=E.value)==null?void 0:R.role),console.log("StudentsView - loaded users:",Object.keys(s.value||{}).length,"users")}catch(F){console.error("Error fetching data:",F),x.value=F.message||"Failed to load data"}finally{y.value=!1}},_=N=>r.value.find(R=>R.id===N)||{},S=N=>{const R=s.value[N];return R&&(R.name||R.email)||N},k=N=>{if(!N)return"N/A";const R=s.value[N];return R&&(R.name||R.email)||N},A=N=>{var R,F;return((F=(R=N.app)==null?void 0:R.studentData)==null?void 0:F.caseManagerId)||N.caseManagerId||N.casemanager_id},D=N=>{var R,F,O,B,V;return N.schedule?N.schedule:(F=(R=N.app)==null?void 0:R.schedule)!=null&&F.periods?N.app.schedule.periods:(B=(O=N.aeries)==null?void 0:O.schedule)!=null&&B.periods?N.aeries.schedule.periods:(V=N.aeries)!=null&&V.schedule?N.aeries.schedule:null};return Bt(()=>{console.log(" useStudentData: onMounted triggered, calling fetchData..."),T()}),Ut(()=>{var N;return(N=E.value)==null?void 0:N.role},async(N,R)=>{if(N&&N!==R){console.log(" Security: User role changed from",R,"to",N,"- reloading students");const F=E.value;if(console.log(" useStudentData: Role watcher - checking user:",F),F){console.log(" useStudentData: Role watcher - about to call loadStudents()...");const O=await v();console.log(" useStudentData: Role watcher - loadStudents() returned:",O.length,"students"),n(O);const B=m_(O,F);B.isSecure||console.error(" SECURITY VIOLATION DETECTED:",B.violations),console.log(" Security: Reloaded",O.length,"students for role",N)}}},{immediate:!1}),{isLoading:y,error:x,students:r,userMap:s,userList:i,userMapObj:w,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:p,feedbackForms:m,formsLoading:g,paraeducators:b,currentUser:E,isAdmin:I,showProviderView:P,fetchData:T,getStudentById:_,getUserName:S,getCaseManagerName:k,getCaseManagerId:A,getSchedule:D,shouldAideSeeStudent:h,getTeacherIdFromPeriod:F4,getCoTeachingCaseManagerFromPeriod:bp,getAllTeacherIdsFromSchedule:wB,getCoTeachingCaseManagersFromSchedule:AB,isCoTeachingCaseManager:CB,router:t}}function ut(t,e,r=""){const n=(l,c)=>c.split(".").reduce((u,d)=>u&&u[d]!==void 0?u[d]:null,l),s=n(t.overrides,e);if(t.overrides&&s!=null&&s!=="")return s;if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const c=n(t.app,`studentData.${e}`);if(c!=null&&c!=="")return c}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const c=n(t.app,`dates.${e}`);if(c!=null&&c!=="")return c}if(["instruction","assessment"].includes(e)){const c=n(t.app,`accommodations.${e}`);if(c!=null&&c!=="")return c}const l=n(t.app,e);if(l!=null&&l!=="")return l}const i=n(t.aeries,e);if(t.aeries&&i!=null&&i!=="")return i;const a=n(t.seis,e);if(t.seis&&a!=null&&a!=="")return a;const o=n(t,e);return o!=null&&o!==""?o:r}function eu(t,e){const r=(o,l)=>l.split(".").reduce((c,u)=>c&&c[u]!==void 0?c[u]:null,o),n=r(t.overrides,e);if(t.overrides&&n!=null&&n!=="")return"Override";if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const l=r(t.app,`studentData.${e}`);if(l!=null&&l!=="")return"App"}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const l=r(t.app,`dates.${e}`);if(l!=null&&l!=="")return"App"}if(["instruction","assessment"].includes(e)){const l=r(t.app,`accommodations.${e}`);if(l!=null&&l!=="")return"App"}const o=r(t.app,e);if(o!=null&&o!=="")return"App"}const s=r(t.aeries,e);if(t.aeries&&s!=null&&s!=="")return"Aeries";const i=r(t.seis,e);if(t.seis&&i!=null&&i!=="")return"SEIS";const a=r(t,e);return a!=null&&a!==""?"Top-level":""}function kB(t){return t?`<ul class="bullet-list">${t.split(/\n|\r|\d+\.\s+|\-\s+|;/).map(r=>r.trim()).filter(Boolean).map(r=>`<li>${r}</li>`).join("")}</ul>`:"<div></div>"}function DB(t){const{students:e,currentUser:r,shouldAideSeeStudent:n,userMap:s,getCaseManagerId:i,getSchedule:a,aideAssignment:o}=t,l=ne(!1),c=ne([]),u=gs({sortBy:"firstName",cm:"all",teacher:"all",paraeducator:"all",plan:"all",search:"",providerView:"all",viewMode:"list"});let d=null;const h=()=>{d&&clearTimeout(d),d=setTimeout(()=>{v()},300)},p=()=>{l.value=!l.value},m=()=>{u.sortBy="firstName",u.cm="all",u.teacher="all",u.paraeducator="all",u.plan="all",u.search="",u.providerView="all",u.viewMode="list",v()},g=()=>({paraeducator:u.paraeducator,teacher:u.teacher}),v=(y=u)=>{var P,w,b,T;console.log(" FILTER DEBUG: applyFilters called with students.value.length:",e.value.length),console.log(" FILTER DEBUG: currentUser:",(P=r.value)==null?void 0:P.role,(w=r.value)==null?void 0:w.uid);let x=e.value;const E=(b=r.value)==null?void 0:b.role,I=["admin","administrator"];if(console.log(" FILTER DEBUG: Provider view filtering check:",{userRole:E,providerView:y.providerView,shouldSkip:I.includes(E),resultLengthBefore:x.length}),!I.includes(E)&&y.providerView==="case_manager"?(console.log(" FILTER DEBUG: Applying case_manager filter"),x=x.filter(_=>{var S;return i(_)===((S=r.value)==null?void 0:S.uid)}),console.log(" FILTER DEBUG: After case_manager filter:",x.length)):!I.includes(E)&&y.providerView==="service_provider"?(console.log(" FILTER DEBUG: Applying service_provider filter"),x=x.filter(_=>{var N;const S=a(_),k=S?Object.entries(S).some(([R,F])=>{var O,B;return typeof F=="string"?F===((O=r.value)==null?void 0:O.uid):F&&typeof F=="object"?F.teacherId===((B=r.value)==null?void 0:B.uid):!1}):!1,A=(_.services||[]).some(R=>{var F;return R.includes((F=r.value)==null?void 0:F.uid)}),D=i(_)!==((N=r.value)==null?void 0:N.uid);return(k||A)&&D}),console.log(" FILTER DEBUG: After service_provider filter:",x.length)):console.log(" FILTER DEBUG: Skipping provider view filtering for role:",E),((T=r.value)==null?void 0:T.role)==="paraeducator"&&console.log(" FILTER DEBUG: Paraeducator - using database-filtered students, no additional filtering"),y.search){const _=y.search.toLowerCase();x=x.filter(S=>{const k=ut(S,"firstName")||"",A=ut(S,"lastName")||"";return`${k} ${A}`.toLowerCase().includes(_)})}if(y.cm&&y.cm!=="all"&&(x=x.filter(_=>i(_)===y.cm)),y.teacher&&y.teacher!=="all"&&(x=x.filter(_=>{const S=a(_);return S?Object.entries(S).some(([k,A])=>typeof A=="string"?A===y.teacher:A&&typeof A=="object"?A.teacherId===y.teacher:!1):!1})),y.paraeducator&&y.paraeducator!=="all"){console.log(" FILTER DEBUG: Applying paraeducator filter for:",y.paraeducator);const _=o.value[y.paraeducator];if(_){console.log(" FILTER DEBUG: Found aide data:",_);let S=[];_.studentIds&&Array.isArray(_.studentIds)?(S=_.studentIds,console.log(" FILTER DEBUG: Using studentIds array:",S)):_.directAssignment&&(S=Array.isArray(_.directAssignment)?_.directAssignment:[_.directAssignment],console.log(" FILTER DEBUG: Using directAssignment as fallback:",S)),x=x.filter(k=>S.includes(k.id)),console.log(" FILTER DEBUG: After paraeducator filter:",x.length,"students")}else console.log(" FILTER DEBUG: No aide data found for:",y.paraeducator),x=[]}y.plan&&y.plan!=="all"&&(x=x.filter(_=>ut(_,"plan")===y.plan)),y.sortBy&&x.sort((_,S)=>{const k=ut(_,y.sortBy)||"",A=ut(S,y.sortBy)||"";if(["reviewDate","reevalDate","meetingDate"].includes(y.sortBy)){const D=k?new Date(k).getTime():0,N=A?new Date(A).getTime():0;return D-N}return k.toString().toLowerCase().localeCompare(A.toString().toLowerCase())}),c.value=x,console.log(" FILTER DEBUG: applyFilters completed. filteredStudents.value.length:",c.value.length)};return Ut(()=>[e.value,r.value],()=>{console.log(" FILTER DEBUG: Watcher triggered. students.value.length:",e.value.length),e.value.length>0?(console.log(" FILTER DEBUG: Calling applyFilters from watcher"),v()):console.log(" FILTER DEBUG: No students to filter")},{deep:!0}),{showFilters:l,filteredStudents:c,currentFilters:u,toggleFilters:p,clearFilters:m,applyFilters:v,debouncedApplyFilters:h,getCurrentFilters:g}}const h0={grades:[],classServices:[{name:"SDC",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Co-teach",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"RSP",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Directed Studies",subcategories:["Directed Studies"],enabledSubcategories:["Directed Studies"]},{name:"FA",subcategories:["FA"],enabledSubcategories:["FA"]}],sdcSubcategories:[],customClassServices:[],serviceProviders:["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],customServiceProviders:[],numPeriods:7,periodLabels:["1","2","3","4","5","6","sh"]},Ks=ne({...h0}),ga=ne(!1),Pi=ne(null);let tu=!1;function Hs(){const t=Qe(Xe,"app_settings","global"),e=async()=>{if(ga.value)return new Promise(s=>{const i=Ut(ga,a=>{a||(i(),s(Ks.value))})});if(tu&&!Pi.value)return Ks.value;ga.value=!0,Pi.value=null;try{const s=await Zt(t);return s.exists()?(Ks.value=s.data(),console.log("useAppSettings: Loaded existing settings:",Ks.value)):(Ks.value={...h0},console.log("useAppSettings: No existing settings, using defaults:",Ks.value)),tu=!0,Ks.value}catch(s){throw Pi.value=s.message,console.error("useAppSettings: Error loading settings:",s),s}finally{ga.value=!1}},r=async s=>{ga.value=!0,Pi.value=null;try{console.log("useAppSettings: Saving settings:",s),await Wt(t,s),console.log("useAppSettings: Settings saved successfully"),Ks.value={...s},tu=!0}catch(i){throw Pi.value=i.message,console.error("useAppSettings: Error saving settings:",i),i}finally{ga.value=!1}},n=async()=>{ga.value=!0,Pi.value=null;try{await Wt(t,{...h0}),Ks.value={...h0},tu=!0}catch(s){throw Pi.value=s.message,s}finally{ga.value=!1}};return!tu&&!ga.value&&e(),Ut(Ks,s=>{console.log("appSettings changed:",s)},{deep:!0}),{appSettings:Ks,loadAppSettings:e,saveAppSettings:r,resetAppSettings:n,loading:ga,error:Pi}}function fo(){const{appSettings:t}=Hs(),e=_e(()=>{var l,c,u,d;if(console.log(" usePeriodLabels: appSettings.value:",t.value),console.log(" usePeriodLabels: periodLabels:",(l=t.value)==null?void 0:l.periodLabels),console.log(" usePeriodLabels: numPeriods:",(c=t.value)==null?void 0:c.numPeriods),(u=t.value)!=null&&u.periodLabels&&((d=t.value)!=null&&d.numPeriods)){const h=t.value.periodLabels.slice(0,t.value.numPeriods);return console.log(" usePeriodLabels: returning labels:",h),h}const o=["1","2","3","4","5","6","7"];return console.log(" usePeriodLabels: returning fallback labels:",o),o}),r=o=>{const l=parseInt(o);if(!l||l<1)return`Period ${o}`;const c=l-1,u=e.value[c]||`Period ${l}`;return console.log(` getLabel(${o}) -> "${u}" (index: ${c}, labels:`,e.value,")"),u},n=o=>{const l=e.value.findIndex(c=>c===o);return l!==-1?l+1:null},s=_e(()=>{var l;const o=((l=t.value)==null?void 0:l.numPeriods)||7;return Array.from({length:o},(c,u)=>u+1)}),i=_e(()=>{const o={};return e.value.forEach((l,c)=>{o[l]=c+1}),o}),a=_e(()=>{const o={};return e.value.forEach((l,c)=>{o[c+1]=l}),o});return{labels:e,getLabel:r,getNumber:n,numericPeriods:s,labelToNumberMap:i,numberToLabelMap:a}}function al(t,e){const{students:r,userMapObj:n,currentUser:s,getCaseManagerId:i,getSchedule:a,getUserName:o,formatDate:l}=t,{getLabel:c}=fo(),{filteredStudents:u,currentFilters:d,applyFilters:h}=e,p=(R,F)=>{if(!R)return{periods:{},isTeacher:!1,isCoTeacher:!1};let O=!1,B=!1;const V={};return Object.entries(R).forEach(([z,H])=>{const j=typeof H=="string"?H:H==null?void 0:H.teacherId,W=typeof H=="object"?H==null?void 0:H.coTeaching:null,K=W==null?void 0:W.caseManagerId;V[z]={teacherId:j,coTeaching:W,coTeachingCM:K,teacherName:o(j),coTeacherName:K?o(K):null,label:c(z)},j===F&&(O=!0),K===F&&(B=!0)}),{periods:V,isTeacher:O,isCoTeacher:B}},m=(R,F,O)=>{if(!R||!F)return[];switch(O){case"case_manager":return R.filter(B=>i(B)===F);case"service_provider":return R.filter(B=>{const V=a(B);return V?Object.values(V).some(H=>{var j;return typeof H=="string"?H===F:H&&typeof H=="object"?H.teacherId===F||((j=H.coTeaching)==null?void 0:j.caseManagerId)===F:!1}):!1});case"all":return R;default:return console.warn(`Unknown provider view: ${O}`),[]}},g=(R,F)=>!R||!F?[]:R.filter(O=>{const{isTeacher:B,isCoTeacher:V}=p(a(O),F);return B||V}),v=(R,F)=>{const O={};return R.forEach(B=>{const V=a(B);if(!V)return;const{periods:z}=p(V,F);Object.entries(z).forEach(([H,j])=>{(j.teacherId===F||j.coTeachingCM===F)&&(O[H]||(O[H]=[]),O[H].push(B))})}),O},y=_e(()=>u.value||[]),x=R=>{const F=ut(R,"firstName"),O=ut(R,"lastName");return`${F} ${O}`},E=R=>({name:x(R),grade:ut(R,"grade"),plan:ut(R,"plan"),caseManager:o(i(R))}),I=R=>({reviewDate:l(ut(R,"reviewDate")),reevalDate:l(ut(R,"reevalDate")),meetingDate:l(ut(R,"meetingDate"))}),P=R=>{const F=a(R);return F?Object.entries(F).reduce((O,[B,V])=>(O[B]={teacherId:V,teacherName:o(V)},O),{}):{}},w=R=>{d.search=R,h()},b=R=>{d.cm=R,h()},T=R=>{d.teacher=R,h()},_=R=>{d.viewMode=R,h()},S=_e(()=>{const R={};return y.value.forEach(F=>{const O=ut(F,"grade");R[O]||(R[O]=[]),R[O].push(F)}),R}),k=_e(()=>{const R={};return y.value.forEach(F=>{const O=ut(F,"plan");R[O]||(R[O]=[]),R[O].push(F)}),R}),A=_e(()=>{var O;const R=(O=s.value)==null?void 0:O.role,F=d;return["teacher","paraeducator"].includes(R)?!1:R==="case_manager"||["sped_chair","administrator_504_CM"].includes(R)?F.providerView!=="service_provider"&&F.teacher==="all":["admin","administrator"].includes(R)?F.teacher==="all"&&F.paraeducator==="all":R==="service_provider"?F.providerView!=="service_provider":!0}),D=_e(()=>{var F;const R=(F=s.value)==null?void 0:F.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(R)}),N=_e(()=>{var F;const R=(F=s.value)==null?void 0:F.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(R)});return Ut(()=>A.value,R=>{R&&d.viewMode==="class"&&(console.log(" Auto-switching from class view to list view because class view is now disabled"),d.viewMode="list",h())},{immediate:!1}),{visibleStudents:y,currentUser:s,userMapObj:n,standardizeScheduleAccess:p,getProviderViewStudents:m,getClassViewStudents:g,groupStudentsByPeriod:v,groupStudentsByGrade:S,groupStudentsByPlan:k,canAccessFilters:N,isClassViewDisabled:A,isAdminRole:D,formatStudentName:x,formatStudentInfo:E,formatDates:I,getStudentSchedule:P,filterByName:w,filterByCaseManager:b,filterByTeacher:T,setViewMode:_,currentFilters:d,showProviderView:!1,providerViewOptions:_e(()=>[])}}function gv(t,e){const r=al(t,e),n=_e(()=>r.visibleStudents.value||[]);return _e(()=>{const s={};return n.value.forEach(i=>{const a=t.getCaseManagerId(i);s[a]||(s[a]={caseManager:t.getUserName(a),students:[]}),s[a].students.push(i)}),s}),_e(()=>{const s={};return n.value.forEach(i=>{var o;const a=((o=i.app)==null?void 0:o.providers)||{};Object.entries(a).forEach(([l,c])=>{c&&(s[c]||(s[c]={provider:t.getUserName(c),providerType:l,students:[]}),s[c].students.push(i))})}),s}),_e(()=>{const s={instruction:[],assessment:[]};return n.value.forEach(i=>{var a,o,l,c;(o=(a=i.app)==null?void 0:a.accommodations)!=null&&o.instruction&&s.instruction.push(i),(c=(l=i.app)==null?void 0:l.accommodations)!=null&&c.assessment&&s.assessment.push(i)}),s}),{...r,visibleStudents:n,showProviderView:!1,providerViewOptions:_e(()=>[])}}let yn={};function PB(t,e){yn={userId:t,userRole:e,databaseStudents:0,accessibleStudents:0,providerView:"",providerViewStudents:0,classViewPeriods:{},timestamp:new Date().toISOString()}}function FB(t,e,r=[]){yn.providerView=t,yn.providerViewStudents=e,yn.providerViewNames=r.slice(0,5)}function RB(t){yn.classViewPeriods=Object.entries(t).reduce((e,[r,n])=>(e[r]=n.length,e),{})}function OB(){console.log(" === DEBUG SUMMARY ==="),console.log(`User: ${yn.userId} (${yn.userRole})`),console.log(`Database returned: ${yn.databaseStudents} students`),yn.databaseDetails&&(console.log(`  - Case managing: ${yn.databaseDetails.caseManaging||0}`),console.log(`  - Teaching: ${yn.databaseDetails.teaching||0}`)),console.log(`Accessible after role filter: ${yn.accessibleStudents} students`),console.log(`Provider view "${yn.providerView}": ${yn.providerViewStudents} students`),yn.classViewPeriods&&Object.keys(yn.classViewPeriods).length>0&&console.log("Class view periods:",yn.classViewPeriods),console.log(" === END SUMMARY ===")}function NB(t,e){const r=al(t,e),n=_e(()=>{var d;return(d=r.currentUser.value)==null?void 0:d.uid});n.value&&PB(n.value,"case_manager");const s=_e(()=>{if(!n.value)return[];const d=r.visibleStudents.value;console.log(" CM visibleStudents: Starting with",d.length,"base students");const h=e.currentFilters.providerView;console.log(" CM visibleStudents: Provider view:",h);let p;return h==="service_provider"?p=d.filter(m=>{var E,I,P,w,b,T,_,S;const g=t.getSchedule(m);if(console.log(` SP DEBUG: Checking student ${(I=(E=m.app)==null?void 0:E.studentData)==null?void 0:I.firstName}`),console.log(" SP DEBUG: Raw schedule:",g),console.log(" SP DEBUG: Looking for userId:",n.value),!g)return console.log(" SP DEBUG: No schedule found"),!1;let v=!1,y=!1;Object.entries(g).forEach(([k,A])=>{var D;console.log(` SP DEBUG: Period ${k}:`,A),typeof A=="string"?A===n.value&&(v=!0,console.log(` Found as teacher in ${k}`)):typeof A=="object"&&A!==null&&(A.teacherId===n.value&&(v=!0,console.log(` Found as teacherId in ${k}`)),(A.coTeachingCaseManager||((D=A.coTeaching)==null?void 0:D.caseManagerId))===n.value&&(y=!0,console.log(` Found as co-teaching CM in ${k}`)))});const x=v||y;return console.log(` SP DEBUG: Final result for ${(w=(P=m.app)==null?void 0:P.studentData)==null?void 0:w.firstName}:`,{isTeacher:v,isCoTeachingCM:y,hasAccess:x}),console.log(x?` SP mode: User has access to ${(T=(b=m.app)==null?void 0:b.studentData)==null?void 0:T.firstName} (teacher=${v}, coTeachingCM=${y})`:` SP mode: User does NOT have access to ${(S=(_=m.app)==null?void 0:_.studentData)==null?void 0:S.firstName}`),x}):h==="case_manager"?p=d.filter(m=>t.getCaseManagerId(m)===n.value):p=d.filter(m=>{var I,P;const g=t.getCaseManagerId(m)===n.value,v=t.getSchedule(m);let y=!1,x=!1;v&&Object.entries(v).forEach(([w,b])=>{var T;typeof b=="string"?b===n.value&&(y=!0):typeof b=="object"&&b!==null&&(b.teacherId===n.value&&(y=!0),(b.coTeachingCaseManager||((T=b.coTeaching)==null?void 0:T.caseManagerId))===n.value&&(x=!0))});const E=g||y||x;return E&&console.log(` All mode: User has access to ${(P=(I=m.app)==null?void 0:I.studentData)==null?void 0:P.firstName}: CM=${g}, Teacher=${y}, CoTeachingCM=${x}`),E}),console.log(" CM visibleStudents: Final count:",p.length),console.log(" CM visibleStudents: Student names:",p.map(m=>{var g,v,y,x;return`${(v=(g=m.app)==null?void 0:g.studentData)==null?void 0:v.firstName} ${(x=(y=m.app)==null?void 0:y.studentData)==null?void 0:x.lastName}`}).slice(0,5),"..."),FB(h,p.length,p.map(m=>{var g,v,y,x;return`${(v=(g=m.app)==null?void 0:g.studentData)==null?void 0:v.firstName} ${(x=(y=m.app)==null?void 0:y.studentData)==null?void 0:x.lastName}`})),OB(),p}),i=_e(()=>n.value?r.groupStudentsByPeriod(s.value,n.value):{}),a=_e(()=>n.value?r.getProviderViewStudents(s.value,n.value,"case_manager"):[]),o=_e(()=>n.value?r.getProviderViewStudents(s.value,n.value,"service_provider").filter(d=>t.getCaseManagerId(d)!==n.value):[]),l=_e(()=>{const d={instruction:[],assessment:[],speech:[],ot:[],mh:[]};return s.value.forEach(h=>{var m,g,v,y,x;(g=(m=h.app)==null?void 0:m.accommodations)!=null&&g.instruction&&d.instruction.push(h),(y=(v=h.app)==null?void 0:v.accommodations)!=null&&y.assessment&&d.assessment.push(h);const p=((x=h.app)==null?void 0:x.providers)||{};p.speechId&&d.speech.push(h),p.otId&&d.ot.push(h),p.mhId&&d.mh.push(h)}),d}),c=_e(()=>{const d=new Date,h=30*24*60*60*1e3,p={reviewDue:[],reevalDue:[],meetingScheduled:[]};return s.value.forEach(m=>{var x,E,I,P,w,b;const g=new Date((E=(x=m.app)==null?void 0:x.dates)==null?void 0:E.reviewDate),v=new Date((P=(I=m.app)==null?void 0:I.dates)==null?void 0:P.reevalDate),y=new Date((b=(w=m.app)==null?void 0:w.dates)==null?void 0:b.meetingDate);g&&g-d<h&&p.reviewDue.push(m),v&&v-d<h&&p.reevalDue.push(m),y&&y-d<h&&p.meetingScheduled.push(m)}),p});return{...r,visibleStudents:s,studentsByPeriod:i,managedStudents:a,serviceStudents:o,groupStudentsByService:l,groupStudentsByUpcomingDates:c,setViewMode:d=>{d==="class"&&(e.currentFilters.providerView="service_provider"),e.currentFilters.viewMode=d,e.applyFilters()},showProviderView:!0,providerViewOptions:_e(()=>[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}])}}function MB(t,e){const r=al(t,e),n=_e(()=>{var l;return(l=r.currentUser.value)==null?void 0:l.uid}),s=_e(()=>{var l;return(l=r.currentUser.value)==null?void 0:l.role}),i=_e(()=>{const l=s.value;return l==="sped_chair"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"},{value:"iep_all",label:"*"}]:l==="administrator_504_CM"?[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}]:[]});Ut(i,l=>{const c=s.value;let u="";c==="administrator_504_CM"?u="iep_504_all":c==="sped_chair"&&(u="all");const d=l.map(h=>h.value);!d.includes(e.currentFilters.providerView)&&d.includes(u)&&(e.currentFilters.providerView=u,e.applyFilters())},{immediate:!0});const a=_e(()=>{if(!n.value)return[];const l=r.visibleStudents.value,c=e.currentFilters.providerView,u=s.value;switch(c){case"case_manager":return r.getProviderViewStudents(l,n.value,"case_manager");case"service_provider":return r.getProviderViewStudents(l,n.value,"service_provider");case"all":return l.filter(d=>{const h=t.getCaseManagerId(d)===n.value,p=t.getSchedule(d),m=p?Object.values(p).some(g=>{var v;return typeof g=="string"?g===n.value:g&&typeof g=="object"?g.teacherId===n.value||((v=g.coTeaching)==null?void 0:v.caseManagerId)===n.value:!1}):!1;return h||m});case"iep_all":return u==="sped_chair"?l.filter(d=>ut(d,"plan")==="IEP"):[];case"iep_504_all":return u==="administrator_504_CM"?l.filter(d=>{const h=ut(d,"plan");return h==="IEP"||h==="504"}):[];default:return console.warn(`Unknown provider view: ${c}`),[]}}),o=_e(()=>n.value?r.groupStudentsByPeriod(a.value,n.value):{});return{...r,visibleStudents:a,studentsByPeriod:o,providerViewOptions:i,showProviderView:!0}}function LB(t,e){const r=al(t,e),n=_e(()=>{var p;return(p=r.currentUser.value)==null?void 0:p.uid}),s=_e(()=>n.value?t.students.value.filter(g=>{const v=t.getSchedule(g);return v?Object.values(v).some(x=>{var E;return typeof x=="string"?x===n.value:x&&typeof x=="object"?x.teacherId===n.value||((E=x.coTeaching)==null?void 0:E.caseManagerId)===n.value:!1}):!1}):[]),i=_e(()=>n.value?r.groupStudentsByPeriod(s.value,n.value):{}),a=_e(()=>{const p={instruction:[],assessment:[]};return s.value.forEach(m=>{var g,v,y,x;(v=(g=m.app)==null?void 0:g.accommodations)!=null&&v.instruction&&p.instruction.push(m),(x=(y=m.app)==null?void 0:y.accommodations)!=null&&x.assessment&&p.assessment.push(m)}),p}),o=_e(()=>{const p={};return s.value.forEach(m=>{var v;const g=((v=m.app)==null?void 0:v.providers)||{};Object.entries(g).forEach(([y,x])=>{x&&(p[x]||(p[x]={provider:t.getUserName(x),providerType:y,students:[]}),p[x].students.push(m))})}),p});return{...r,visibleStudents:s,studentsByPeriod:i,studentsByAccommodation:a,studentsByServiceProvider:o,canViewAccommodations:!0,canViewBasicInfo:!0,canViewServiceProviders:!0,canViewDates:!1,canEditStudents:!1,showProviderView:!1,providerViewOptions:_e(()=>[])}}function BB(t,e){const r=al(t,e),n=_e(()=>{var a;return(a=r.currentUser.value)==null?void 0:a.uid}),s=_e(()=>n.value?r.getProviderViewStudents(r.visibleStudents.value,n.value,"service_provider"):[]),i=_e(()=>n.value?r.groupStudentsByPeriod(s.value,n.value):{});return{...r,visibleStudents:s,studentsByPeriod:i,showProviderView:!1,providerViewOptions:_e(()=>[])}}function UB(t,e){const r=al(t,e),n=_e(()=>{var p;return(p=r.currentUser.value)==null?void 0:p.uid}),s=_e(()=>n.value?r.visibleStudents.value||[]:[]),i=_e(()=>{if(!n.value)return[];const p=t.aideAssignment.value[n.value];if(!(p!=null&&p.directAssignment))return[];const m=Array.isArray(p.directAssignment)?p.directAssignment:[p.directAssignment];return s.value.filter(g=>m.includes(g.id))}),a=_e(()=>{if(!n.value)return{};const p=t.aideAssignment.value[n.value];if(!(p!=null&&p.classAssignment))return{};const m={};return s.value.forEach(g=>{const{periods:v}=r.standardizeScheduleAccess(t.getSchedule(g),n.value);Object.entries(v).forEach(([y,x])=>{const E=p.classAssignment[y];if(!E)return;(Array.isArray(E)?E:[E]).includes(x.teacherId)&&(m[y]||(m[y]={teacher:x.teacherName,students:[]}),m[y].students.push(g))})}),m}),o=_e(()=>{const p={instruction:[],assessment:[]};return s.value.forEach(m=>{var g,v,y,x;(v=(g=m.app)==null?void 0:g.accommodations)!=null&&v.instruction&&p.instruction.push(m),(x=(y=m.app)==null?void 0:y.accommodations)!=null&&x.assessment&&p.assessment.push(m)}),p});return{...r,visibleStudents:s,directAssignments:i,classAssignments:a,studentsByAccommodation:o,canViewAccommodations:!0,canViewBasicInfo:!0,canViewServiceProviders:!1,canViewDates:!1,canEditStudents:!1,showProviderView:!1,providerViewOptions:_e(()=>[])}}function $B(t,e){return gv(t,e)}function VB(t,e){const r=al(t,e),n=_e(()=>{var o;return(o=r.currentUser.value)==null?void 0:o.uid}),s=_e(()=>[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}]);Ut(s,o=>{const l="case_manager";o.map(u=>u.value).includes(e.currentFilters.providerView)||(e.currentFilters.providerView=l,e.applyFilters())},{immediate:!0});const i=_e(()=>{if(!n.value)return[];const o=r.visibleStudents.value;switch(e.currentFilters.providerView){case"case_manager":return r.getProviderViewStudents(o,n.value,"case_manager");case"iep_504_all":return o.filter(c=>{const u=ut(c,"plan");return u==="IEP"||u==="504"});default:return[]}}),a=_e(()=>n.value?r.groupStudentsByPeriod(i.value,n.value):{});return{...r,visibleStudents:i,studentsByPeriod:a,providerViewOptions:s,showProviderView:!0}}function jB(t,e){const{currentUser:r}=t;Ex();const n=_e(()=>{var p;return((p=r.value)==null?void 0:p.role)||"guest"}),s=_e(()=>{switch(n.value){case"admin":return gv(t,e);case"case_manager":return NB(t,e);case"sped_chair":return MB(t,e);case"administrator_504_CM":return VB(t,e);case"teacher":return LB(t,e);case"service_provider":return BB(t,e);case"paraeducator":return UB(t,e);case"administrator":return $B(t,e);default:return gv(t,e)}}),i=_e(()=>{var m;const p=(m=r.value)==null?void 0:m.role;return["admin","sped_chair"].includes(p)}),a=_e(()=>{var m;const p=(m=r.value)==null?void 0:m.role;return["case_manager","administrator_504_CM"].includes(p)}),o=_e(()=>{var m;const p=(m=r.value)==null?void 0:m.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(p)}),l=_e(()=>{var m;const p=(m=r.value)==null?void 0:m.role;return["admin","administrator","administrator_504_CM"].includes(p)}),c=_e(()=>{var m;const p=(m=r.value)==null?void 0:m.role;return["admin","administrator","sped_chair"].includes(p)}),u=_e(()=>!0),d=_e(()=>!0),h=_e(()=>!0);return{...s.value,currentRole:n,canEditAllStudents:i,canEditOwnStudents:a,canViewAllStudents:o,canManageUsers:l,canManageAides:c,canAccessTesting:u,canAccessTestingPartial:d,hasAnyTestingAccess:h}}function HB(t,e,r=null){const{aideAssignment:n,getCaseManagerId:s,getSchedule:i,standardizeScheduleAccess:a,currentUser:o}=t,{filteredStudents:l,currentFilters:c,getCurrentFilters:u}=e,d=r||l,h=ne("list");Ut(()=>c.viewMode,x=>{h.value=x||"list"});const p=_e(()=>d.value.filter(x=>{var E,I,P,w;return((I=(E=x.app)==null?void 0:E.flags)==null?void 0:I.flag2)||((w=(P=x.app)==null?void 0:P.flags)==null?void 0:w.separateSetting)||x.separateSetting||x.flag2||!1})),m=_e(()=>{var b,T;const x={};if(h.value!=="class")return x;const E=(b=o.value)==null?void 0:b.uid;if(!E)return console.log(" studentsByClass: No current user ID"),x;console.log(" studentsByClass: Current user ID:",E);const I=(T=t.currentUser.value)==null?void 0:T.role;let P;I==="case_manager"?(P=t.students.value,console.log(" studentsByClass: Case manager - using raw database students:",P.length)):(P=d.value,console.log(" studentsByClass: Other role - using provider-filtered students:",P.length));const w=u();return w.paraeducator&&w.paraeducator,P.forEach(_=>{var k,A;const S=i(_)||{};console.log(` studentsByClass full schedule for ${(A=(k=_.app)==null?void 0:k.studentData)==null?void 0:A.firstName}:`,S),Object.entries(S).forEach(([D,N])=>{var j,W,K;let R,F;if(typeof N=="string")R=N;else if(N&&typeof N=="object")R=N.teacherId,F=(j=N.coTeaching)==null?void 0:j.caseManagerId,N.coTeaching&&console.log(` studentsByClass coTeaching data for ${(K=(W=_.app)==null?void 0:W.studentData)==null?void 0:K.firstName} in period ${D}:`,N.coTeaching);else return;let O=!1;const B=u(),V=B.teacher&&B.teacher!=="all",z=B.paraeducator&&B.paraeducator!=="all";if(I==="paraeducator"){const re=n.value[E];re!=null&&re.classAssignment&&re.classAssignment[D]&&(O=(Array.isArray(re.classAssignment[D])?re.classAssignment[D]:[re.classAssignment[D]]).includes(R))}else if(["admin","administrator"].includes(I))if(V)O=R===B.teacher||F===B.teacher;else if(z){const re=n.value[B.paraeducator];re!=null&&re.classAssignment&&re.classAssignment[D]&&(O=(Array.isArray(re.classAssignment[D])?re.classAssignment[D]:[re.classAssignment[D]]).includes(R))}else O=!0;else O=R===E||F===E;!O||(x[D]||(x[D]=[]),x[D].some(re=>re.id===_.id))||x[D].push(_)})}),console.log(" studentsByClass: Final groups:",Object.keys(x).map(_=>`Period ${_}: ${x[_].length} students`)),RB(x),Object.keys(x).forEach(_=>{x[_].length===0&&delete x[_]}),Object.keys(x).sort((_,S)=>{const k=parseInt(_.replace(/\D/g,"")),A=parseInt(S.replace(/\D/g,""));return k-A}).reduce((_,S)=>(_[S]=x[S],_),{})}),g=_e(()=>{var _,S;const x=u(),E=(_=t.currentUser.value)==null?void 0:_.role,I=(S=t.currentUser.value)==null?void 0:S.uid;let P=null;if(E==="paraeducator")P=I;else{if(!(x.paraeducator&&x.paraeducator!=="all"))return[];P=x.paraeducator}if(!P)return[];const w=n.value[P];if(!w||!w.directAssignment)return console.log(" directAssignmentStudents: No aide data or direct assignment for",P),[];const b=Array.isArray(w.directAssignment)?w.directAssignment:[w.directAssignment];console.log(" directAssignmentStudents: Direct student IDs:",b),console.log(" directAssignmentStudents: Available students:",d.value.length);const T=d.value.filter(k=>b.includes(k.id));return console.log(" directAssignmentStudents: Found direct assignment students:",T.length),T}),v=_e(()=>{const x={};return d.value.forEach(E=>{const I=s(E);I&&(x[I]||(x[I]=[]),x[I].push(E))}),x});return{currentViewMode:h,studentsByClass:m,directAssignmentStudents:g,studentsByCaseManager:v,testingViewStudents:p,setViewMode:x=>{h.value=x,c.viewMode=x}}}function GB(t){const{router:e,fetchData:r}=t,n=ne(null),s=ne(null),i=ne(!1),a=ne(!1),o=ne(!1),l=ne(null),c=I=>{n.value=I},u=I=>{s.value=I},d=I=>{l.value=I,o.value=!0},h=()=>{console.log("Teacher feedback form sent successfully")},p=()=>{a.value=!1,r()},m=()=>{console.log("Student saved"),r()},g=()=>{e.push("/admin")},v=()=>{e.push("/testing")},y=()=>{e.push("/aide-schedule")},x=async I=>{switch(I){case"add-student":a.value=!0;break;case"export":i.value=!0;break;case"print":window.print();break;case"admin":g();break;case"testing":v();break;case"aide-schedule":y();break;case"logout":await E();break}},E=async()=>{try{const{useAuthStore:I}=await ra(async()=>{const{useAuthStore:w}=await Promise.resolve().then(()=>DL);return{useAuthStore:w}},void 0);await I().logout(),e.push("/login")}catch(I){console.error("Logout failed:",I)}};return{editingStudentId:n,emailingStudentId:s,showExport:i,showAddStudent:a,showFeedbackDialog:o,feedbackStudentId:l,editStudent:c,emailStudent:u,handleTeacherFeedback:d,handleFormSent:h,handleStudentAdded:p,handleStudentSaved:m,navigateToAdmin:g,navigateToTesting:v,navigateToAideSchedule:y,handleNavAction:x,handleLogout:E}}const WB={class:"student-nav-menu"},zB=["title"],KB={class:"nav-content"},qB={class:"nav-section"},XB={class:"nav-buttons"},YB={key:0,class:"nav-section"},JB={class:"nav-buttons"},QB={key:1,class:"nav-section"},ZB={class:"nav-buttons"},e7={class:"nav-section"},t7={class:"user-info"},r7={class:"user-details"},n7={key:0,class:"user-role"},s7={__name:"StudentNavMenu",props:{currentUser:{type:Object,default:null},isAdmin:{type:Boolean,default:!1}},emits:["action"],setup(t,{emit:e}){const r=t,n=e,s=_e(()=>{var u;const c=(u=r.currentUser)==null?void 0:u.role;return c!=="paraeducator"&&c!=="teacher"}),i=ne(!1);function a(){i.value=!i.value}function o(){i.value=!1}function l(c){n("action",c),o()}return(c,u)=>{var d,h,p,m;return L(),U("div",WB,[f("button",{onClick:a,class:Ze(["hamburger-btn",{active:i.value}]),title:i.value?"Close Menu":"Open Menu"},u[7]||(u[7]=[f("span",{class:"hamburger-line"},null,-1),f("span",{class:"hamburger-line"},null,-1),f("span",{class:"hamburger-line"},null,-1)]),10,zB),i.value?(L(),U("div",{key:0,class:"nav-overlay",onClick:o})):Se("",!0),f("div",{class:Ze(["nav-panel",{open:i.value}])},[f("div",{class:"nav-header"},[u[8]||(u[8]=f("h3",null,"Student Management",-1)),f("button",{onClick:o,class:"close-btn"},"")]),f("div",KB,[f("div",qB,[u[12]||(u[12]=f("h4",null,"Actions",-1)),f("div",XB,[s.value?(L(),U("button",{key:0,onClick:u[0]||(u[0]=g=>l("add-student")),class:"nav-btn primary"},u[9]||(u[9]=[f("span",null,"",-1),Oe(" Add Student ")]))):Se("",!0),f("button",{onClick:u[1]||(u[1]=g=>l("export")),class:"nav-btn"},u[10]||(u[10]=[f("span",null,"",-1),Oe(" Export ")])),f("button",{onClick:u[2]||(u[2]=g=>l("print")),class:"nav-btn print-btn"},u[11]||(u[11]=[f("span",null,"",-1),Oe(" Print ")]))])]),t.isAdmin?(L(),U("div",YB,[u[15]||(u[15]=f("h4",null,"Admin",-1)),f("div",JB,[f("button",{onClick:u[3]||(u[3]=g=>l("admin")),class:"nav-btn"},u[13]||(u[13]=[f("span",null,"",-1),Oe(" Admin Panel ")])),f("button",{onClick:u[4]||(u[4]=g=>l("testing")),class:"nav-btn"},u[14]||(u[14]=[f("span",null,"",-1),Oe(" Testing ")]))])])):Se("",!0),((d=t.currentUser)==null?void 0:d.role)==="paraeducator"?(L(),U("div",QB,[u[17]||(u[17]=f("h4",null,"Schedule",-1)),f("div",ZB,[f("button",{onClick:u[5]||(u[5]=g=>l("aide-schedule")),class:"nav-btn"},u[16]||(u[16]=[f("span",null,"",-1),Oe(" My Schedule ")]))])])):Se("",!0),f("div",e7,[u[19]||(u[19]=f("h4",null,"User",-1)),f("div",t7,[f("div",r7,[f("strong",null,Q(((h=t.currentUser)==null?void 0:h.name)||((p=t.currentUser)==null?void 0:p.email)||"User"),1),(m=t.currentUser)!=null&&m.role?(L(),U("span",n7,"("+Q(t.currentUser.role)+")",1)):Se("",!0)]),f("button",{onClick:u[6]||(u[6]=g=>l("logout")),class:"nav-btn danger"},u[18]||(u[18]=[f("span",null,"",-1),Oe(" Logout ")]))])])])],2)])}}},a7=xt(s7,[["__scopeId","data-v-11a16ca2"]]);function i7(t){const{appSettings:e,loadAppSettings:r,loading:n,error:s}=Hs(),{getLabel:i}=fo();Bt(async()=>{try{console.log("StudentTable: Loading app settings..."),await r(),console.log("StudentTable: App settings loaded successfully")}catch(A){console.error("StudentTable: Error loading app settings:",A)}});const a=A=>{const D=t.userMap[A];return D&&(D.name||D.email)||A},o=A=>{const D=t.userMap[A];return D?D.initials?D.initials:D.name?D.name.split(" ").map(R=>R[0]).join("").toUpperCase():D.email?D.email[0].toUpperCase():"?":"?"},l=A=>{const D=t.userMap[A];if(!D)return A;if(D.name){const N=D.name.trim().split(" ");return N.length===1?N[0]:`${N[0][0]}. ${N.slice(1).join(" ")}`}return D.email?D.email[0].toUpperCase():A},c=A=>A?new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",u=A=>{if(!A)return"";const D=new Date,N=new Date(A),R=Math.ceil((N-D)/(1e3*60*60*24));return R<=0?"flag-critical":R<=7?"flag-high":R<=14?"flag-medium":R<=21?"flag-mid":R<=28?"flag-low":R<=35?"flag-prep":""},d=A=>{if(!A)return"";const D=new Date,N=new Date(A),R=Math.ceil((N-D)/(1e3*60*60*24));return R<=0?"flag-critical":R<=7?"flag-high":R<=14?"flag-medium":R<=21?"flag-mid":R<=28?"flag-low":R<=60?"flag-prep-reeval":""},h=A=>u(ut(A,"meetingDate")),p=A=>u(ut(A,"reviewDate")),m=A=>d(ut(A,"reevalDate")),g=A=>{var D,N;return((N=(D=A.app)==null?void 0:D.studentData)==null?void 0:N.caseManagerId)||A.caseManagerId||A.casemanager_id},v=(A,D)=>{var N,R;return((R=(N=A.app)==null?void 0:N.flags)==null?void 0:R[D])||A[D]||!1},y=A=>{var D;return((D=A.app)==null?void 0:D.flags)&&Object.values(A.app.flags).some(Boolean)||A.flag1||A.flag2},x=(A,D)=>{var R,F,O,B,V;console.log(" getDocumentUrl called with:",{studentId:A.id,type:D,appDocuments:(R=A.app)==null?void 0:R.documents,directUrl:A[`${D}Url`],underscoreUrl:A[`${D}_url`],appLevel:(F=A.app)==null?void 0:F[D]});const N=((B=(O=A.app)==null?void 0:O.documents)==null?void 0:B[D])||((V=A.app)==null?void 0:V[D])||A[D]||A[`${D}_url`]||null;return console.log(" getDocumentUrl result:",N),N&&N.includes(".enc")&&console.log(" Secure filename detected:",N),N},E=A=>{var D,N,R,F,O;if(A.schedule)return A.schedule;if((N=(D=A.app)==null?void 0:D.schedule)!=null&&N.periods)return A.app.schedule.periods;if((F=(R=A.aeries)==null?void 0:R.schedule)!=null&&F.periods)return A.aeries.schedule.periods;if((O=A.aeries)!=null&&O.schedule){const B={};return Object.entries(A.aeries.schedule).forEach(([V,z])=>{if(z&&z.teacherId){const H=parseInt(V.replace("period","")),j=i(H);let W=z.teacherId;if(t.userMap){let K=Object.values(t.userMap).find(re=>re.aeriesId===z.teacherId||re.aeriesId===parseInt(z.teacherId)||re.id===z.teacherId);if(K||(K=Object.values(t.userMap).find(re=>{var he,ue,pe,te;return((he=re.aeriesId)==null?void 0:he.toString())===((ue=z.teacherId)==null?void 0:ue.toString())||((pe=re.id)==null?void 0:pe.toString())===((te=z.teacherId)==null?void 0:te.toString())})),K&&K.name){const re=K.name.split(" ");if(re.length>=2){const he=re[0],ue=re[re.length-1];W=`${he.charAt(0)}. ${ue}`}else W=K.name}else console.warn(`Teacher not found for ID: ${z.teacherId}`)}B[j]=W}}),Object.keys(B).length>0?B:null}return null},I=A=>{const D=[],N=E(A);return N&&Object.entries(N).forEach(([R,F])=>{if(F&&typeof F=="object"&&F.coTeaching){const O=F.coTeaching.subject;O&&D.push(`Co-teach: ${O}`)}}),D};return{appSettings:e,appSettingsLoading:n,appSettingsError:s,getUserName:a,getUserInitials:o,getUserInitialLastName:l,formatDate:c,getMeetingUrgencyClass:h,getReviewUrgencyClass:p,getReevalUrgencyClass:m,getCaseManagerId:g,getFlagValue:v,hasFlags:y,getDocumentUrl:x,getSchedule:E,getClassServices:A=>{var B,V;const D=((V=(B=A.app)==null?void 0:B.schedule)==null?void 0:V.classServices)||A.services||[],N=I(A),R=D.filter(z=>z&&z.startsWith&&z.startsWith("Co-teach:")),F=N.filter(z=>!R.includes(z)),O=[...D,...F];if(n.value)return Array.isArray(O)?O.filter(z=>typeof z=="string"&&z.includes(":")):[];if(s.value)return Array.isArray(O)?O.filter(z=>typeof z=="string"&&z.includes(":")):[];if(e.value&&e.value.classServices){const z=e.value.classServices.filter(H=>H.enabledSubcategories&&H.enabledSubcategories.length>0).map(H=>H.name);return Array.isArray(O)?O.filter(H=>{if(typeof H!="string"||!H.includes(":"))return!1;const j=H.split(":")[0];return z.includes(j)}):[]}return Array.isArray(O)?O.filter(z=>typeof z=="string"&&z.includes(":")):[]},getOtherServices:A=>{var N,R;const D=((R=(N=A.app)==null?void 0:N.schedule)==null?void 0:R.otherServices)||A.other_services||[];return Array.isArray(D)?D.filter(F=>!!F):[]},getCoTeachingServices:I,hasServiceProviders:A=>{var F;const D=((F=A.app)==null?void 0:F.providers)||{},N=Object.values(D).some(Boolean);if(n.value||s.value){const O=A.speechId||A.speech_id||A.mhId||A.mh_id||A.otId||A.ot_id||A.ptId||A.pt_id||A.scId||A.sc_id||A.trId||A.tr_id||A.audId||A.aud_id||A.viId||A.vi_id||A.atId||A.at_id||A.dhhId||A.dhh_id||A.omId||A.om_id||A.bisId||A.bis_id||A.hnId||A.hn_id||A.swId||A.sw_id;return N||O}let R=!1;if(e.value&&e.value.serviceProviders){const O=e.value.serviceProviders,B={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"};R=O.some(V=>{const z=B[V];return A[z]||A[z.replace("Id","_id")]})}else R=A.speechId||A.speech_id||A.mhId||A.mh_id||A.otId||A.ot_id||A.ptId||A.pt_id||A.scId||A.sc_id||A.trId||A.tr_id||A.audId||A.aud_id||A.viId||A.vi_id||A.atId||A.at_id||A.dhhId||A.dhh_id||A.omId||A.om_id||A.bisId||A.bis_id||A.hnId||A.hn_id||A.swId||A.sw_id;return N||R},getServiceProviderId:(A,D)=>{var R,F;return((F=(R=A.app)==null?void 0:R.providers)==null?void 0:F[D])||A[D]||A[D.replace("Id","_id")]||null},getProviderFieldName:A=>({SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"})[A]||`${A.toLowerCase()}Id`,isDirectAssignment:A=>{if(!t.currentUser||t.currentUser.role!=="paraeducator")return!1;const D=t.currentUser.uid;let N=t.aideSchedule[D];if(!N){const R=Object.entries(t.userMap).find(([F,O])=>O.uid===D||O.email===t.currentUser.email);if(R){const[F]=R;N=t.aideSchedule[F]}}return(N==null?void 0:N.directAssignment)===A},formatListFromText:kB,getFlagClass:A=>{const D=A.toLowerCase();return D.includes("critical")?"flag-critical":D.includes("high")?"flag-high":D.includes("medium")?"flag-medium":D.includes("mid")?"flag-mid":D.includes("low")?"flag-low":D.includes("prep")?"flag-prep":"flag-low"}}}let Rf;const o7=new Uint8Array(16);function l7(){if(!Rf&&(Rf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Rf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rf(o7)}const vn=[];for(let t=0;t<256;++t)vn.push((t+256).toString(16).slice(1));function c7(t,e=0){return vn[t[e+0]]+vn[t[e+1]]+vn[t[e+2]]+vn[t[e+3]]+"-"+vn[t[e+4]]+vn[t[e+5]]+"-"+vn[t[e+6]]+vn[t[e+7]]+"-"+vn[t[e+8]]+vn[t[e+9]]+"-"+vn[t[e+10]]+vn[t[e+11]]+vn[t[e+12]]+vn[t[e+13]]+vn[t[e+14]]+vn[t[e+15]]}const u7=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),g_={randomUUID:u7};function d7(t,e,r){if(g_.randomUUID&&!t)return g_.randomUUID();t=t||{};const n=t.random||(t.rng||l7)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,c7(n)}var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function R4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Tx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var O4={exports:{}};function f7(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var um={exports:{}};const h7={},p7=Object.freeze(Object.defineProperty({__proto__:null,default:h7},Symbol.toStringTag,{value:"Module"})),m7=Tx(p7);var v_;function Yt(){return v_||(v_=1,function(t,e){(function(r,n){t.exports=n()})(Lt,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof Lt<"u"&&Lt.crypto&&(i=Lt.crypto),!i&&typeof f7=="function")try{i=m7}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function x(){}return function(E){var I;return x.prototype=E,I=new x,x.prototype=null,I}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(x){var E=o(this);return x&&E.mixIn(x),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var E in x)x.hasOwnProperty(E)&&(this[E]=x[E]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=c.WordArray=u.extend({init:function(x,E){x=this.words=x||[],E!=s?this.sigBytes=E:this.sigBytes=x.length*4},toString:function(x){return(x||p).stringify(this)},concat:function(x){var E=this.words,I=x.words,P=this.sigBytes,w=x.sigBytes;if(this.clamp(),P%4)for(var b=0;b<w;b++){var T=I[b>>>2]>>>24-b%4*8&255;E[P+b>>>2]|=T<<24-(P+b)%4*8}else for(var _=0;_<w;_+=4)E[P+_>>>2]=I[_>>>2];return this.sigBytes+=w,this},clamp:function(){var x=this.words,E=this.sigBytes;x[E>>>2]&=4294967295<<32-E%4*8,x.length=n.ceil(E/4)},clone:function(){var x=u.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var E=[],I=0;I<x;I+=4)E.push(a());return new d.init(E,x)}}),h=l.enc={},p=h.Hex={stringify:function(x){for(var E=x.words,I=x.sigBytes,P=[],w=0;w<I;w++){var b=E[w>>>2]>>>24-w%4*8&255;P.push((b>>>4).toString(16)),P.push((b&15).toString(16))}return P.join("")},parse:function(x){for(var E=x.length,I=[],P=0;P<E;P+=2)I[P>>>3]|=parseInt(x.substr(P,2),16)<<24-P%8*4;return new d.init(I,E/2)}},m=h.Latin1={stringify:function(x){for(var E=x.words,I=x.sigBytes,P=[],w=0;w<I;w++){var b=E[w>>>2]>>>24-w%4*8&255;P.push(String.fromCharCode(b))}return P.join("")},parse:function(x){for(var E=x.length,I=[],P=0;P<E;P++)I[P>>>2]|=(x.charCodeAt(P)&255)<<24-P%4*8;return new d.init(I,E)}},g=h.Utf8={stringify:function(x){try{return decodeURIComponent(escape(m.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return m.parse(unescape(encodeURIComponent(x)))}},v=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=g.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var E,I=this._data,P=I.words,w=I.sigBytes,b=this.blockSize,T=b*4,_=w/T;x?_=n.ceil(_):_=n.max((_|0)-this._minBufferSize,0);var S=_*b,k=n.min(S*4,w);if(S){for(var A=0;A<S;A+=b)this._doProcessBlock(P,A);E=P.splice(0,S),I.sigBytes-=k}return new d.init(E,k)},clone:function(){var x=u.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});c.Hasher=v.extend({cfg:u.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var E=this._doFinalize();return E},blockSize:16,_createHelper:function(x){return function(E,I){return new x.init(I).finalize(E)}},_createHmacHelper:function(x){return function(E,I){return new y.HMAC.init(x,I).finalize(E)}}});var y=l.algo={};return l}(Math);return r})}(um)),um.exports}var dm={exports:{}},x_;function _p(){return x_||(x_=1,function(t,e){(function(r,n){t.exports=n(Yt())})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=s.x64={};l.Word=a.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=a.extend({init:function(c,u){c=this.words=c||[],u!=n?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,d=[],h=0;h<u;h++){var p=c[h];d.push(p.high),d.push(p.low)}return o.create(d,this.sigBytes)},clone:function(){for(var c=a.clone.call(this),u=c.words=this.words.slice(0),d=u.length,h=0;h<d;h++)u[h]=u[h].clone();return c}})}(),r})}(dm)),dm.exports}var fm={exports:{}},y_;function g7(){return y_||(y_=1,function(t,e){(function(r,n){t.exports=n(Yt())})(Lt,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,o=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],d=0;d<c;d++)u[d>>>2]|=l[d]<<24-d%4*8;a.call(this,u,c)}else a.apply(this,arguments)};o.prototype=i}}(),r.lib.WordArray})}(fm)),fm.exports}var hm={exports:{}},E_;function v7(){return E_||(E_=1,function(t,e){(function(r,n){t.exports=n(Yt())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],h=0;h<u;h+=2){var p=c[h>>>2]>>>16-h%4*8&65535;d.push(String.fromCharCode(p))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return i.create(u,c*2)}},a.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],h=0;h<u;h+=2){var p=o(c[h>>>2]>>>16-h%4*8&65535);d.push(String.fromCharCode(p))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=o(l.charCodeAt(d)<<16-d%2*16);return i.create(u,c*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}}(),r.enc.Utf16})}(hm)),hm.exports}var pm={exports:{}},b_;function il(){return b_||(b_=1,function(t,e){(function(r,n){t.exports=n(Yt())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var h=[],p=0;p<u;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,v=c[p+2>>>2]>>>24-(p+2)%4*8&255,y=m<<16|g<<8|v,x=0;x<4&&p+x*.75<u;x++)h.push(d.charAt(y>>>6*(3-x)&63));var E=d.charAt(64);if(E)for(;h.length%4;)h.push(E);return h.join("")},parse:function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<u.length;h++)d[u.charCodeAt(h)]=h}var p=u.charAt(64);if(p){var m=l.indexOf(p);m!==-1&&(c=m)}return o(l,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,c,u){for(var d=[],h=0,p=0;p<c;p++)if(p%4){var m=u[l.charCodeAt(p-1)]<<p%4*2,g=u[l.charCodeAt(p)]>>>6-p%4*2,v=m|g;d[h>>>2]|=v<<24-h%4*8,h++}return i.create(d,h)}}(),r.enc.Base64})}(pm)),pm.exports}var mm={exports:{}},__;function x7(){return __||(__=1,function(t,e){(function(r,n){t.exports=n(Yt())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,h=c?this._safe_map:this._map;l.clamp();for(var p=[],m=0;m<d;m+=3)for(var g=u[m>>>2]>>>24-m%4*8&255,v=u[m+1>>>2]>>>24-(m+1)%4*8&255,y=u[m+2>>>2]>>>24-(m+2)%4*8&255,x=g<<16|v<<8|y,E=0;E<4&&m+E*.75<d;E++)p.push(h.charAt(x>>>6*(3-E)&63));var I=h.charAt(64);if(I)for(;p.length%4;)p.push(I);return p.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var p=0;p<d.length;p++)h[d.charCodeAt(p)]=p}var m=d.charAt(64);if(m){var g=l.indexOf(m);g!==-1&&(u=g)}return o(l,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,c,u){for(var d=[],h=0,p=0;p<c;p++)if(p%4){var m=u[l.charCodeAt(p-1)]<<p%4*2,g=u[l.charCodeAt(p)]>>>6-p%4*2,v=m|g;d[h>>>2]|=v<<24-h%4*8,h++}return i.create(d,h)}}(),r.enc.Base64url})}(mm)),mm.exports}var gm={exports:{}},S_;function ol(){return S_||(S_=1,function(t,e){(function(r,n){t.exports=n(Yt())})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[];(function(){for(var g=0;g<64;g++)c[g]=n.abs(n.sin(g+1))*4294967296|0})();var u=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,v){for(var y=0;y<16;y++){var x=v+y,E=g[x];g[x]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var I=this._hash.words,P=g[v+0],w=g[v+1],b=g[v+2],T=g[v+3],_=g[v+4],S=g[v+5],k=g[v+6],A=g[v+7],D=g[v+8],N=g[v+9],R=g[v+10],F=g[v+11],O=g[v+12],B=g[v+13],V=g[v+14],z=g[v+15],H=I[0],j=I[1],W=I[2],K=I[3];H=d(H,j,W,K,P,7,c[0]),K=d(K,H,j,W,w,12,c[1]),W=d(W,K,H,j,b,17,c[2]),j=d(j,W,K,H,T,22,c[3]),H=d(H,j,W,K,_,7,c[4]),K=d(K,H,j,W,S,12,c[5]),W=d(W,K,H,j,k,17,c[6]),j=d(j,W,K,H,A,22,c[7]),H=d(H,j,W,K,D,7,c[8]),K=d(K,H,j,W,N,12,c[9]),W=d(W,K,H,j,R,17,c[10]),j=d(j,W,K,H,F,22,c[11]),H=d(H,j,W,K,O,7,c[12]),K=d(K,H,j,W,B,12,c[13]),W=d(W,K,H,j,V,17,c[14]),j=d(j,W,K,H,z,22,c[15]),H=h(H,j,W,K,w,5,c[16]),K=h(K,H,j,W,k,9,c[17]),W=h(W,K,H,j,F,14,c[18]),j=h(j,W,K,H,P,20,c[19]),H=h(H,j,W,K,S,5,c[20]),K=h(K,H,j,W,R,9,c[21]),W=h(W,K,H,j,z,14,c[22]),j=h(j,W,K,H,_,20,c[23]),H=h(H,j,W,K,N,5,c[24]),K=h(K,H,j,W,V,9,c[25]),W=h(W,K,H,j,T,14,c[26]),j=h(j,W,K,H,D,20,c[27]),H=h(H,j,W,K,B,5,c[28]),K=h(K,H,j,W,b,9,c[29]),W=h(W,K,H,j,A,14,c[30]),j=h(j,W,K,H,O,20,c[31]),H=p(H,j,W,K,S,4,c[32]),K=p(K,H,j,W,D,11,c[33]),W=p(W,K,H,j,F,16,c[34]),j=p(j,W,K,H,V,23,c[35]),H=p(H,j,W,K,w,4,c[36]),K=p(K,H,j,W,_,11,c[37]),W=p(W,K,H,j,A,16,c[38]),j=p(j,W,K,H,R,23,c[39]),H=p(H,j,W,K,B,4,c[40]),K=p(K,H,j,W,P,11,c[41]),W=p(W,K,H,j,T,16,c[42]),j=p(j,W,K,H,k,23,c[43]),H=p(H,j,W,K,N,4,c[44]),K=p(K,H,j,W,O,11,c[45]),W=p(W,K,H,j,z,16,c[46]),j=p(j,W,K,H,b,23,c[47]),H=m(H,j,W,K,P,6,c[48]),K=m(K,H,j,W,A,10,c[49]),W=m(W,K,H,j,V,15,c[50]),j=m(j,W,K,H,S,21,c[51]),H=m(H,j,W,K,O,6,c[52]),K=m(K,H,j,W,T,10,c[53]),W=m(W,K,H,j,R,15,c[54]),j=m(j,W,K,H,w,21,c[55]),H=m(H,j,W,K,D,6,c[56]),K=m(K,H,j,W,z,10,c[57]),W=m(W,K,H,j,k,15,c[58]),j=m(j,W,K,H,B,21,c[59]),H=m(H,j,W,K,_,6,c[60]),K=m(K,H,j,W,F,10,c[61]),W=m(W,K,H,j,b,15,c[62]),j=m(j,W,K,H,N,21,c[63]),I[0]=I[0]+H|0,I[1]=I[1]+j|0,I[2]=I[2]+W|0,I[3]=I[3]+K|0},_doFinalize:function(){var g=this._data,v=g.words,y=this._nDataBytes*8,x=g.sigBytes*8;v[x>>>5]|=128<<24-x%32;var E=n.floor(y/4294967296),I=y;v[(x+64>>>9<<4)+15]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,v[(x+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,g.sigBytes=(v.length+1)*4,this._process();for(var P=this._hash,w=P.words,b=0;b<4;b++){var T=w[b];w[b]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}return P},clone:function(){var g=o.clone.call(this);return g._hash=this._hash.clone(),g}});function d(g,v,y,x,E,I,P){var w=g+(v&y|~v&x)+E+P;return(w<<I|w>>>32-I)+v}function h(g,v,y,x,E,I,P){var w=g+(v&x|y&~x)+E+P;return(w<<I|w>>>32-I)+v}function p(g,v,y,x,E,I,P){var w=g+(v^y^x)+E+P;return(w<<I|w>>>32-I)+v}function m(g,v,y,x,E,I,P){var w=g+(y^(v|~x))+E+P;return(w<<I|w>>>32-I)+v}s.MD5=o._createHelper(u),s.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5})}(gm)),gm.exports}var vm={exports:{}},T_;function N4(){return T_||(T_=1,function(t,e){(function(r,n){t.exports=n(Yt())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,o=n.algo,l=[],c=o.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var h=this._hash.words,p=h[0],m=h[1],g=h[2],v=h[3],y=h[4],x=0;x<80;x++){if(x<16)l[x]=u[d+x]|0;else{var E=l[x-3]^l[x-8]^l[x-14]^l[x-16];l[x]=E<<1|E>>>31}var I=(p<<5|p>>>27)+y+l[x];x<20?I+=(m&g|~m&v)+1518500249:x<40?I+=(m^g^v)+1859775393:x<60?I+=(m&g|m&v|g&v)-1894007588:I+=(m^g^v)-899497514,y=v,v=g,g=m<<30|m>>>2,m=p,p=I}h[0]=h[0]+p|0,h[1]=h[1]+m|0,h[2]=h[2]+g|0,h[3]=h[3]+v|0,h[4]=h[4]+y|0},_doFinalize:function(){var u=this._data,d=u.words,h=this._nDataBytes*8,p=u.sigBytes*8;return d[p>>>5]|=128<<24-p%32,d[(p+64>>>9<<4)+14]=Math.floor(h/4294967296),d[(p+64>>>9<<4)+15]=h,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=a.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c)}(),r.SHA1})}(vm)),vm.exports}var xm={exports:{}},w_;function wx(){return w_||(w_=1,function(t,e){(function(r,n){t.exports=n(Yt())})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[],u=[];(function(){function p(y){for(var x=n.sqrt(y),E=2;E<=x;E++)if(!(y%E))return!1;return!0}function m(y){return(y-(y|0))*4294967296|0}for(var g=2,v=0;v<64;)p(g)&&(v<8&&(c[v]=m(n.pow(g,1/2))),u[v]=m(n.pow(g,1/3)),v++),g++})();var d=[],h=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(p,m){for(var g=this._hash.words,v=g[0],y=g[1],x=g[2],E=g[3],I=g[4],P=g[5],w=g[6],b=g[7],T=0;T<64;T++){if(T<16)d[T]=p[m+T]|0;else{var _=d[T-15],S=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,k=d[T-2],A=(k<<15|k>>>17)^(k<<13|k>>>19)^k>>>10;d[T]=S+d[T-7]+A+d[T-16]}var D=I&P^~I&w,N=v&y^v&x^y&x,R=(v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22),F=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),O=b+F+D+u[T]+d[T],B=R+N;b=w,w=P,P=I,I=E+O|0,E=x,x=y,y=v,v=O+B|0}g[0]=g[0]+v|0,g[1]=g[1]+y|0,g[2]=g[2]+x|0,g[3]=g[3]+E|0,g[4]=g[4]+I|0,g[5]=g[5]+P|0,g[6]=g[6]+w|0,g[7]=g[7]+b|0},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,v=p.sigBytes*8;return m[v>>>5]|=128<<24-v%32,m[(v+64>>>9<<4)+14]=n.floor(g/4294967296),m[(v+64>>>9<<4)+15]=g,p.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=o._createHelper(h),s.HmacSHA256=o._createHmacHelper(h)}(Math),r.SHA256})}(xm)),xm.exports}var ym={exports:{}},A_;function y7(){return A_||(A_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),wx())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)}(),r.SHA224})}(ym)),ym.exports}var Em={exports:{}},C_;function M4(){return C_||(C_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),_p())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,o=a.Word,l=a.WordArray,c=n.algo;function u(){return o.create.apply(o,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var m=0;m<80;m++)h[m]=u()})();var p=c.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(m,g){for(var v=this._hash.words,y=v[0],x=v[1],E=v[2],I=v[3],P=v[4],w=v[5],b=v[6],T=v[7],_=y.high,S=y.low,k=x.high,A=x.low,D=E.high,N=E.low,R=I.high,F=I.low,O=P.high,B=P.low,V=w.high,z=w.low,H=b.high,j=b.low,W=T.high,K=T.low,re=_,he=S,ue=k,pe=A,te=D,Y=N,Ee=R,X=F,q=O,J=B,ge=V,ae=z,se=H,le=j,xe=W,ve=K,Ce=0;Ce<80;Ce++){var we,Ge,ke=h[Ce];if(Ce<16)Ge=ke.high=m[g+Ce*2]|0,we=ke.low=m[g+Ce*2+1]|0;else{var $e=h[Ce-15],Be=$e.high,We=$e.low,ze=(Be>>>1|We<<31)^(Be>>>8|We<<24)^Be>>>7,be=(We>>>1|Be<<31)^(We>>>8|Be<<24)^(We>>>7|Be<<25),ye=h[Ce-2],Te=ye.high,Ne=ye.low,He=(Te>>>19|Ne<<13)^(Te<<3|Ne>>>29)^Te>>>6,ot=(Ne>>>19|Te<<13)^(Ne<<3|Te>>>29)^(Ne>>>6|Te<<26),gt=h[Ce-7],yt=gt.high,Mt=gt.low,ft=h[Ce-16],ct=ft.high,mt=ft.low;we=be+Mt,Ge=ze+yt+(we>>>0<be>>>0?1:0),we=we+ot,Ge=Ge+He+(we>>>0<ot>>>0?1:0),we=we+mt,Ge=Ge+ct+(we>>>0<mt>>>0?1:0),ke.high=Ge,ke.low=we}var It=q&ge^~q&se,Rt=J&ae^~J&le,Er=re&ue^re&te^ue&te,Yn=he&pe^he&Y^pe&Y,Ti=(re>>>28|he<<4)^(re<<30|he>>>2)^(re<<25|he>>>7),ls=(he>>>28|re<<4)^(he<<30|re>>>2)^(he<<25|re>>>7),pl=(q>>>14|J<<18)^(q>>>18|J<<14)^(q<<23|J>>>9),Ba=(J>>>14|q<<18)^(J>>>18|q<<14)^(J<<23|q>>>9),mo=d[Ce],Qr=mo.high,go=mo.low,Ir=ve+Ba,kn=xe+pl+(Ir>>>0<ve>>>0?1:0),Ir=Ir+Rt,kn=kn+It+(Ir>>>0<Rt>>>0?1:0),Ir=Ir+go,kn=kn+Qr+(Ir>>>0<go>>>0?1:0),Ir=Ir+we,kn=kn+Ge+(Ir>>>0<we>>>0?1:0),ml=ls+Yn,Bc=Ti+Er+(ml>>>0<ls>>>0?1:0);xe=se,ve=le,se=ge,le=ae,ge=q,ae=J,J=X+Ir|0,q=Ee+kn+(J>>>0<X>>>0?1:0)|0,Ee=te,X=Y,te=ue,Y=pe,ue=re,pe=he,he=Ir+ml|0,re=kn+Bc+(he>>>0<Ir>>>0?1:0)|0}S=y.low=S+he,y.high=_+re+(S>>>0<he>>>0?1:0),A=x.low=A+pe,x.high=k+ue+(A>>>0<pe>>>0?1:0),N=E.low=N+Y,E.high=D+te+(N>>>0<Y>>>0?1:0),F=I.low=F+X,I.high=R+Ee+(F>>>0<X>>>0?1:0),B=P.low=B+J,P.high=O+q+(B>>>0<J>>>0?1:0),z=w.low=z+ae,w.high=V+ge+(z>>>0<ae>>>0?1:0),j=b.low=j+le,b.high=H+se+(j>>>0<le>>>0?1:0),K=T.low=K+ve,T.high=W+xe+(K>>>0<ve>>>0?1:0)},_doFinalize:function(){var m=this._data,g=m.words,v=this._nDataBytes*8,y=m.sigBytes*8;g[y>>>5]|=128<<24-y%32,g[(y+128>>>10<<5)+30]=Math.floor(v/4294967296),g[(y+128>>>10<<5)+31]=v,m.sigBytes=g.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var m=i.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:1024/32});n.SHA512=i._createHelper(p),n.HmacSHA512=i._createHmacHelper(p)}(),r.SHA512})}(Em)),Em.exports}var bm={exports:{}},I_;function E7(){return I_||(I_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),_p(),M4())})(Lt,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,o=n.algo,l=o.SHA512,c=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=l._createHelper(c),n.HmacSHA384=l._createHmacHelper(c)}(),r.SHA384})}(bm)),bm.exports}var _m={exports:{}},k_;function b7(){return k_||(k_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),_p())})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.x64,c=l.Word,u=s.algo,d=[],h=[],p=[];(function(){for(var v=1,y=0,x=0;x<24;x++){d[v+5*y]=(x+1)*(x+2)/2%64;var E=y%5,I=(2*v+3*y)%5;v=E,y=I}for(var v=0;v<5;v++)for(var y=0;y<5;y++)h[v+5*y]=y+(2*v+3*y)%5*5;for(var P=1,w=0;w<24;w++){for(var b=0,T=0,_=0;_<7;_++){if(P&1){var S=(1<<_)-1;S<32?T^=1<<S:b^=1<<S-32}P&128?P=P<<1^113:P<<=1}p[w]=c.create(b,T)}})();var m=[];(function(){for(var v=0;v<25;v++)m[v]=c.create()})();var g=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],y=0;y<25;y++)v[y]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,y){for(var x=this._state,E=this.blockSize/2,I=0;I<E;I++){var P=v[y+2*I],w=v[y+2*I+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360;var b=x[I];b.high^=w,b.low^=P}for(var T=0;T<24;T++){for(var _=0;_<5;_++){for(var S=0,k=0,A=0;A<5;A++){var b=x[_+5*A];S^=b.high,k^=b.low}var D=m[_];D.high=S,D.low=k}for(var _=0;_<5;_++)for(var N=m[(_+4)%5],R=m[(_+1)%5],F=R.high,O=R.low,S=N.high^(F<<1|O>>>31),k=N.low^(O<<1|F>>>31),A=0;A<5;A++){var b=x[_+5*A];b.high^=S,b.low^=k}for(var B=1;B<25;B++){var S,k,b=x[B],V=b.high,z=b.low,H=d[B];H<32?(S=V<<H|z>>>32-H,k=z<<H|V>>>32-H):(S=z<<H-32|V>>>64-H,k=V<<H-32|z>>>64-H);var j=m[h[B]];j.high=S,j.low=k}var W=m[0],K=x[0];W.high=K.high,W.low=K.low;for(var _=0;_<5;_++)for(var A=0;A<5;A++){var B=_+5*A,b=x[B],re=m[B],he=m[(_+1)%5+5*A],ue=m[(_+2)%5+5*A];b.high=re.high^~he.high&ue.high,b.low=re.low^~he.low&ue.low}var b=x[0],pe=p[T];b.high^=pe.high,b.low^=pe.low}},_doFinalize:function(){var v=this._data,y=v.words;this._nDataBytes*8;var x=v.sigBytes*8,E=this.blockSize*32;y[x>>>5]|=1<<24-x%32,y[(n.ceil((x+1)/E)*E>>>5)-1]|=128,v.sigBytes=y.length*4,this._process();for(var I=this._state,P=this.cfg.outputLength/8,w=P/8,b=[],T=0;T<w;T++){var _=I[T],S=_.high,k=_.low;S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,b.push(k),b.push(S)}return new a.init(b,P)},clone:function(){for(var v=o.clone.call(this),y=v._state=this._state.slice(0),x=0;x<25;x++)y[x]=y[x].clone();return v}});s.SHA3=o._createHelper(g),s.HmacSHA3=o._createHmacHelper(g)}(Math),r.SHA3})}(_m)),_m.exports}var Sm={exports:{}},D_;function _7(){return D_||(D_=1,function(t,e){(function(r,n){t.exports=n(Yt())})(Lt,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=a.create([0,1518500249,1859775393,2400959708,2840853838]),m=a.create([1352829926,1548603684,1836072691,2053994217,0]),g=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(w,b){for(var T=0;T<16;T++){var _=b+T,S=w[_];w[_]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var k=this._hash.words,A=p.words,D=m.words,N=c.words,R=u.words,F=d.words,O=h.words,B,V,z,H,j,W,K,re,he,ue;W=B=k[0],K=V=k[1],re=z=k[2],he=H=k[3],ue=j=k[4];for(var pe,T=0;T<80;T+=1)pe=B+w[b+N[T]]|0,T<16?pe+=v(V,z,H)+A[0]:T<32?pe+=y(V,z,H)+A[1]:T<48?pe+=x(V,z,H)+A[2]:T<64?pe+=E(V,z,H)+A[3]:pe+=I(V,z,H)+A[4],pe=pe|0,pe=P(pe,F[T]),pe=pe+j|0,B=j,j=H,H=P(z,10),z=V,V=pe,pe=W+w[b+R[T]]|0,T<16?pe+=I(K,re,he)+D[0]:T<32?pe+=E(K,re,he)+D[1]:T<48?pe+=x(K,re,he)+D[2]:T<64?pe+=y(K,re,he)+D[3]:pe+=v(K,re,he)+D[4],pe=pe|0,pe=P(pe,O[T]),pe=pe+ue|0,W=ue,ue=he,he=P(re,10),re=K,K=pe;pe=k[1]+z+he|0,k[1]=k[2]+H+ue|0,k[2]=k[3]+j+W|0,k[3]=k[4]+B+K|0,k[4]=k[0]+V+re|0,k[0]=pe},_doFinalize:function(){var w=this._data,b=w.words,T=this._nDataBytes*8,_=w.sigBytes*8;b[_>>>5]|=128<<24-_%32,b[(_+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,w.sigBytes=(b.length+1)*4,this._process();for(var S=this._hash,k=S.words,A=0;A<5;A++){var D=k[A];k[A]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return S},clone:function(){var w=o.clone.call(this);return w._hash=this._hash.clone(),w}});function v(w,b,T){return w^b^T}function y(w,b,T){return w&b|~w&T}function x(w,b,T){return(w|~b)^T}function E(w,b,T){return w&T|b&~T}function I(w,b,T){return w^(b|~T)}function P(w,b){return w<<b|w>>>32-b}s.RIPEMD160=o._createHelper(g),s.HmacRIPEMD160=o._createHmacHelper(g)}(),r.RIPEMD160})}(Sm)),Sm.exports}var Tm={exports:{}},P_;function Ax(){return P_||(P_=1,function(t,e){(function(r,n){t.exports=n(Yt())})(Lt,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,o=a.Utf8,l=n.algo;l.HMAC=i.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,h=d*4;u.sigBytes>h&&(u=c.finalize(u)),u.clamp();for(var p=this._oKey=u.clone(),m=this._iKey=u.clone(),g=p.words,v=m.words,y=0;y<d;y++)g[y]^=1549556828,v[y]^=909522486;p.sigBytes=m.sigBytes=h,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,d=u.finalize(c);u.reset();var h=u.finalize(this._oKey.clone().concat(d));return h}})})()})}(Tm)),Tm.exports}var wm={exports:{}},F_;function S7(){return F_||(F_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),wx(),Ax())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.SHA256,c=o.HMAC,u=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,h){for(var p=this.cfg,m=c.create(p.hasher,d),g=a.create(),v=a.create([1]),y=g.words,x=v.words,E=p.keySize,I=p.iterations;y.length<E;){var P=m.update(h).finalize(v);m.reset();for(var w=P.words,b=w.length,T=P,_=1;_<I;_++){T=m.finalize(T),m.reset();for(var S=T.words,k=0;k<b;k++)w[k]^=S[k]}g.concat(P),x[0]++}return g.sigBytes=E*4,g}});n.PBKDF2=function(d,h,p){return u.create(p).compute(d,h)}}(),r.PBKDF2})}(wm)),wm.exports}var Am={exports:{}},R_;function ho(){return R_||(R_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),N4(),Ax())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.MD5,c=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var h,p=this.cfg,m=p.hasher.create(),g=a.create(),v=g.words,y=p.keySize,x=p.iterations;v.length<y;){h&&m.update(h),h=m.update(u).finalize(d),m.reset();for(var E=1;E<x;E++)h=m.finalize(h),m.reset();g.concat(h)}return g.sigBytes=y*4,g}});n.EvpKDF=function(u,d,h){return c.create(h).compute(u,d)}}(),r.EvpKDF})}(Am)),Am.exports}var Cm={exports:{}},O_;function mn(){return O_||(O_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),ho())})(Lt,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=i.BufferedBlockAlgorithm,c=s.enc;c.Utf8;var u=c.Base64,d=s.algo,h=d.EvpKDF,p=i.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(S,k){return this.create(this._ENC_XFORM_MODE,S,k)},createDecryptor:function(S,k){return this.create(this._DEC_XFORM_MODE,S,k)},init:function(S,k,A){this.cfg=this.cfg.extend(A),this._xformMode=S,this._key=k,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){S&&this._append(S);var k=this._doFinalize();return k},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function S(k){return typeof k=="string"?_:w}return function(k){return{encrypt:function(A,D,N){return S(D).encrypt(k,A,D,N)},decrypt:function(A,D,N){return S(D).decrypt(k,A,D,N)}}}}()});i.StreamCipher=p.extend({_doFinalize:function(){var S=this._process(!0);return S},blockSize:1});var m=s.mode={},g=i.BlockCipherMode=a.extend({createEncryptor:function(S,k){return this.Encryptor.create(S,k)},createDecryptor:function(S,k){return this.Decryptor.create(S,k)},init:function(S,k){this._cipher=S,this._iv=k}}),v=m.CBC=function(){var S=g.extend();S.Encryptor=S.extend({processBlock:function(A,D){var N=this._cipher,R=N.blockSize;k.call(this,A,D,R),N.encryptBlock(A,D),this._prevBlock=A.slice(D,D+R)}}),S.Decryptor=S.extend({processBlock:function(A,D){var N=this._cipher,R=N.blockSize,F=A.slice(D,D+R);N.decryptBlock(A,D),k.call(this,A,D,R),this._prevBlock=F}});function k(A,D,N){var R,F=this._iv;F?(R=F,this._iv=n):R=this._prevBlock;for(var O=0;O<N;O++)A[D+O]^=R[O]}return S}(),y=s.pad={},x=y.Pkcs7={pad:function(S,k){for(var A=k*4,D=A-S.sigBytes%A,N=D<<24|D<<16|D<<8|D,R=[],F=0;F<D;F+=4)R.push(N);var O=o.create(R,D);S.concat(O)},unpad:function(S){var k=S.words[S.sigBytes-1>>>2]&255;S.sigBytes-=k}};i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:v,padding:x}),reset:function(){var S;p.reset.call(this);var k=this.cfg,A=k.iv,D=k.mode;this._xformMode==this._ENC_XFORM_MODE?S=D.createEncryptor:(S=D.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==S?this._mode.init(this,A&&A.words):(this._mode=S.call(D,this,A&&A.words),this._mode.__creator=S)},_doProcessBlock:function(S,k){this._mode.processBlock(S,k)},_doFinalize:function(){var S,k=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(k.pad(this._data,this.blockSize),S=this._process(!0)):(S=this._process(!0),k.unpad(S)),S},blockSize:128/32});var E=i.CipherParams=a.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),I=s.format={},P=I.OpenSSL={stringify:function(S){var k,A=S.ciphertext,D=S.salt;return D?k=o.create([1398893684,1701076831]).concat(D).concat(A):k=A,k.toString(u)},parse:function(S){var k,A=u.parse(S),D=A.words;return D[0]==1398893684&&D[1]==1701076831&&(k=o.create(D.slice(2,4)),D.splice(0,4),A.sigBytes-=16),E.create({ciphertext:A,salt:k})}},w=i.SerializableCipher=a.extend({cfg:a.extend({format:P}),encrypt:function(S,k,A,D){D=this.cfg.extend(D);var N=S.createEncryptor(A,D),R=N.finalize(k),F=N.cfg;return E.create({ciphertext:R,key:A,iv:F.iv,algorithm:S,mode:F.mode,padding:F.padding,blockSize:S.blockSize,formatter:D.format})},decrypt:function(S,k,A,D){D=this.cfg.extend(D),k=this._parse(k,D.format);var N=S.createDecryptor(A,D).finalize(k.ciphertext);return N},_parse:function(S,k){return typeof S=="string"?k.parse(S,this):S}}),b=s.kdf={},T=b.OpenSSL={execute:function(S,k,A,D,N){if(D||(D=o.random(64/8)),N)var R=h.create({keySize:k+A,hasher:N}).compute(S,D);else var R=h.create({keySize:k+A}).compute(S,D);var F=o.create(R.words.slice(k),A*4);return R.sigBytes=k*4,E.create({key:R,iv:F,salt:D})}},_=i.PasswordBasedCipher=w.extend({cfg:w.cfg.extend({kdf:T}),encrypt:function(S,k,A,D){D=this.cfg.extend(D);var N=D.kdf.execute(A,S.keySize,S.ivSize,D.salt,D.hasher);D.iv=N.iv;var R=w.encrypt.call(this,S,k,N.key,D);return R.mixIn(N),R},decrypt:function(S,k,A,D){D=this.cfg.extend(D),k=this._parse(k,D.format);var N=D.kdf.execute(A,S.keySize,S.ivSize,k.salt,D.hasher);D.iv=N.iv;var R=w.decrypt.call(this,S,k,N.key,D);return R}})}()})}(Cm)),Cm.exports}var Im={exports:{}},N_;function T7(){return N_||(N_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize;s.call(this,i,a,l,o),this._prevBlock=i.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=i.slice(a,a+l);s.call(this,i,a,l,o),this._prevBlock=c}});function s(i,a,o,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var d=0;d<o;d++)i[a+d]^=c[d]}return n}(),r.mode.CFB})}(Im)),Im.exports}var km={exports:{}},M_;function w7(){return M_||(M_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var d=u.slice(0);o.encryptBlock(d,0),u[l-1]=u[l-1]+1|0;for(var h=0;h<l;h++)i[a+h]^=d[h]}});return n.Decryptor=s,n}(),r.mode.CTR})}(km)),km.exports}var Dm={exports:{}},L_;function A7(){return L_||(L_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(o){if((o>>24&255)===255){var l=o>>16&255,c=o>>8&255,u=o&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,o=0,o+=l<<16,o+=c<<8,o+=u}else o+=1<<24;return o}function i(o){return(o[0]=s(o[0]))===0&&(o[1]=s(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,d=this._iv,h=this._counter;d&&(h=this._counter=d.slice(0),this._iv=void 0),i(h);var p=h.slice(0);c.encryptBlock(p,0);for(var m=0;m<u;m++)o[l+m]^=p[m]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(Dm)),Dm.exports}var Pm={exports:{}},B_;function C7(){return B_||(B_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(u,0);for(var d=0;d<l;d++)i[a+d]^=u[d]}});return n.Decryptor=s,n}(),r.mode.OFB})}(Pm)),Pm.exports}var Fm={exports:{}},U_;function I7(){return U_||(U_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(Fm)),Fm.exports}var Rm={exports:{}},$_;function k7(){return $_||($_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,o=a-i%a,l=i+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(Rm)),Rm.exports}var Om={exports:{}},V_;function D7(){return V_||(V_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(Om)),Om.exports}var Nm={exports:{}},j_;function P7(){return j_||(j_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Nm)),Nm.exports}var Mm={exports:{}},H_;function F7(){return H_||(H_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(Mm)),Mm.exports}var Lm={exports:{}},G_;function R7(){return G_||(G_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Lm)),Lm.exports}var Bm={exports:{}},W_;function O7(){return W_||(W_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),mn())})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,o=s.enc,l=o.Hex,c=s.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var d=l.parse(u);return a.create({ciphertext:d})}}}(),r.format.Hex})}(Bm)),Bm.exports}var Um={exports:{}},z_;function N7(){return z_||(z_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),il(),ol(),ho(),mn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,o=[],l=[],c=[],u=[],d=[],h=[],p=[],m=[],g=[],v=[];(function(){for(var E=[],I=0;I<256;I++)I<128?E[I]=I<<1:E[I]=I<<1^283;for(var P=0,w=0,I=0;I<256;I++){var b=w^w<<1^w<<2^w<<3^w<<4;b=b>>>8^b&255^99,o[P]=b,l[b]=P;var T=E[P],_=E[T],S=E[_],k=E[b]*257^b*16843008;c[P]=k<<24|k>>>8,u[P]=k<<16|k>>>16,d[P]=k<<8|k>>>24,h[P]=k;var k=S*16843009^_*65537^T*257^P*16843008;p[b]=k<<24|k>>>8,m[b]=k<<16|k>>>16,g[b]=k<<8|k>>>24,v[b]=k,P?(P=T^E[E[E[S^T]]],w^=E[E[w]]):P=w=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],x=a.AES=i.extend({_doReset:function(){var E;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,P=I.words,w=I.sigBytes/4,b=this._nRounds=w+6,T=(b+1)*4,_=this._keySchedule=[],S=0;S<T;S++)S<w?_[S]=P[S]:(E=_[S-1],S%w?w>6&&S%w==4&&(E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255]):(E=E<<8|E>>>24,E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255],E^=y[S/w|0]<<24),_[S]=_[S-w]^E);for(var k=this._invKeySchedule=[],A=0;A<T;A++){var S=T-A;if(A%4)var E=_[S];else var E=_[S-4];A<4||S<=4?k[A]=E:k[A]=p[o[E>>>24]]^m[o[E>>>16&255]]^g[o[E>>>8&255]]^v[o[E&255]]}}},encryptBlock:function(E,I){this._doCryptBlock(E,I,this._keySchedule,c,u,d,h,o)},decryptBlock:function(E,I){var P=E[I+1];E[I+1]=E[I+3],E[I+3]=P,this._doCryptBlock(E,I,this._invKeySchedule,p,m,g,v,l);var P=E[I+1];E[I+1]=E[I+3],E[I+3]=P},_doCryptBlock:function(E,I,P,w,b,T,_,S){for(var k=this._nRounds,A=E[I]^P[0],D=E[I+1]^P[1],N=E[I+2]^P[2],R=E[I+3]^P[3],F=4,O=1;O<k;O++){var B=w[A>>>24]^b[D>>>16&255]^T[N>>>8&255]^_[R&255]^P[F++],V=w[D>>>24]^b[N>>>16&255]^T[R>>>8&255]^_[A&255]^P[F++],z=w[N>>>24]^b[R>>>16&255]^T[A>>>8&255]^_[D&255]^P[F++],H=w[R>>>24]^b[A>>>16&255]^T[D>>>8&255]^_[N&255]^P[F++];A=B,D=V,N=z,R=H}var B=(S[A>>>24]<<24|S[D>>>16&255]<<16|S[N>>>8&255]<<8|S[R&255])^P[F++],V=(S[D>>>24]<<24|S[N>>>16&255]<<16|S[R>>>8&255]<<8|S[A&255])^P[F++],z=(S[N>>>24]<<24|S[R>>>16&255]<<16|S[A>>>8&255]<<8|S[D&255])^P[F++],H=(S[R>>>24]<<24|S[A>>>16&255]<<16|S[D>>>8&255]<<8|S[N&255])^P[F++];E[I]=B,E[I+1]=V,E[I+2]=z,E[I+3]=H},keySize:256/32});n.AES=i._createHelper(x)}(),r.AES})}(Um)),Um.exports}var $m={exports:{}},K_;function M7(){return K_||(K_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),il(),ol(),ho(),mn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=a.extend({_doReset:function(){for(var y=this._key,x=y.words,E=[],I=0;I<56;I++){var P=l[I]-1;E[I]=x[P>>>5]>>>31-P%32&1}for(var w=this._subKeys=[],b=0;b<16;b++){for(var T=w[b]=[],_=u[b],I=0;I<24;I++)T[I/6|0]|=E[(c[I]-1+_)%28]<<31-I%6,T[4+(I/6|0)]|=E[28+(c[I+24]-1+_)%28]<<31-I%6;T[0]=T[0]<<1|T[0]>>>31;for(var I=1;I<7;I++)T[I]=T[I]>>>(I-1)*4+3;T[7]=T[7]<<5|T[7]>>>27}for(var S=this._invSubKeys=[],I=0;I<16;I++)S[I]=w[15-I]},encryptBlock:function(y,x){this._doCryptBlock(y,x,this._subKeys)},decryptBlock:function(y,x){this._doCryptBlock(y,x,this._invSubKeys)},_doCryptBlock:function(y,x,E){this._lBlock=y[x],this._rBlock=y[x+1],m.call(this,4,252645135),m.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),m.call(this,1,1431655765);for(var I=0;I<16;I++){for(var P=E[I],w=this._lBlock,b=this._rBlock,T=0,_=0;_<8;_++)T|=d[_][((b^P[_])&h[_])>>>0];this._lBlock=b,this._rBlock=w^T}var S=this._lBlock;this._lBlock=this._rBlock,this._rBlock=S,m.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[x]=this._lBlock,y[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,x){var E=(this._lBlock>>>y^this._rBlock)&x;this._rBlock^=E,this._lBlock^=E<<y}function g(y,x){var E=(this._rBlock>>>y^this._lBlock)&x;this._lBlock^=E,this._rBlock^=E<<y}n.DES=a._createHelper(p);var v=o.TripleDES=a.extend({_doReset:function(){var y=this._key,x=y.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var E=x.slice(0,2),I=x.length<4?x.slice(0,2):x.slice(2,4),P=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=p.createEncryptor(i.create(E)),this._des2=p.createEncryptor(i.create(I)),this._des3=p.createEncryptor(i.create(P))},encryptBlock:function(y,x){this._des1.encryptBlock(y,x),this._des2.decryptBlock(y,x),this._des3.encryptBlock(y,x)},decryptBlock:function(y,x){this._des3.decryptBlock(y,x),this._des2.encryptBlock(y,x),this._des1.decryptBlock(y,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(v)}(),r.TripleDES})}($m)),$m.exports}var Vm={exports:{}},q_;function L7(){return q_||(q_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),il(),ol(),ho(),mn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=a.RC4=i.extend({_doReset:function(){for(var u=this._key,d=u.words,h=u.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,g=0;m<256;m++){var v=m%h,y=d[v>>>2]>>>24-v%4*8&255;g=(g+p[m]+y)%256;var x=p[m];p[m]=p[g],p[g]=x}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,d=this._i,h=this._j,p=0,m=0;m<4;m++){d=(d+1)%256,h=(h+u[d])%256;var g=u[d];u[d]=u[h],u[h]=g,p|=u[(u[d]+u[h])%256]<<24-m*8}return this._i=d,this._j=h,p}n.RC4=i._createHelper(o);var c=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});n.RC4Drop=i._createHelper(c)}(),r.RC4})}(Vm)),Vm.exports}var jm={exports:{}},X_;function B7(){return X_||(X_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),il(),ol(),ho(),mn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.Rabbit=i.extend({_doReset:function(){for(var h=this._key.words,p=this.cfg.iv,m=0;m<4;m++)h[m]=(h[m]<<8|h[m]>>>24)&16711935|(h[m]<<24|h[m]>>>8)&4278255360;var g=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],v=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var m=0;m<4;m++)d.call(this);for(var m=0;m<8;m++)v[m]^=g[m+4&7];if(p){var y=p.words,x=y[0],E=y[1],I=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,P=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,w=I>>>16|P&4294901760,b=P<<16|I&65535;v[0]^=I,v[1]^=w,v[2]^=P,v[3]^=b,v[4]^=I,v[5]^=w,v[6]^=P,v[7]^=b;for(var m=0;m<4;m++)d.call(this)}},_doProcessBlock:function(h,p){var m=this._X;d.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var g=0;g<4;g++)o[g]=(o[g]<<8|o[g]>>>24)&16711935|(o[g]<<24|o[g]>>>8)&4278255360,h[p+g]^=o[g]},blockSize:128/32,ivSize:64/32});function d(){for(var h=this._X,p=this._C,m=0;m<8;m++)l[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var m=0;m<8;m++){var g=h[m]+p[m],v=g&65535,y=g>>>16,x=((v*v>>>17)+v*y>>>15)+y*y,E=((g&4294901760)*g|0)+((g&65535)*g|0);c[m]=x^E}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=i._createHelper(u)}(),r.Rabbit})}(jm)),jm.exports}var Hm={exports:{}},Y_;function U7(){return Y_||(Y_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),il(),ol(),ho(),mn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.RabbitLegacy=i.extend({_doReset:function(){var h=this._key.words,p=this.cfg.iv,m=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],g=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var v=0;v<4;v++)d.call(this);for(var v=0;v<8;v++)g[v]^=m[v+4&7];if(p){var y=p.words,x=y[0],E=y[1],I=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,P=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,w=I>>>16|P&4294901760,b=P<<16|I&65535;g[0]^=I,g[1]^=w,g[2]^=P,g[3]^=b,g[4]^=I,g[5]^=w,g[6]^=P,g[7]^=b;for(var v=0;v<4;v++)d.call(this)}},_doProcessBlock:function(h,p){var m=this._X;d.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var g=0;g<4;g++)o[g]=(o[g]<<8|o[g]>>>24)&16711935|(o[g]<<24|o[g]>>>8)&4278255360,h[p+g]^=o[g]},blockSize:128/32,ivSize:64/32});function d(){for(var h=this._X,p=this._C,m=0;m<8;m++)l[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var m=0;m<8;m++){var g=h[m]+p[m],v=g&65535,y=g>>>16,x=((v*v>>>17)+v*y>>>15)+y*y,E=((g&4294901760)*g|0)+((g&65535)*g|0);c[m]=x^E}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=i._createHelper(u)}(),r.RabbitLegacy})}(Hm)),Hm.exports}var Gm={exports:{}},J_;function $7(){return J_||(J_=1,function(t,e){(function(r,n,s){t.exports=n(Yt(),il(),ol(),ho(),mn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(v,y){let x=y>>24&255,E=y>>16&255,I=y>>8&255,P=y&255,w=v.sbox[0][x]+v.sbox[1][E];return w=w^v.sbox[2][I],w=w+v.sbox[3][P],w}function h(v,y,x){let E=y,I=x,P;for(let w=0;w<o;++w)E=E^v.pbox[w],I=d(v,E)^I,P=E,E=I,I=P;return P=E,E=I,I=P,I=I^v.pbox[o],E=E^v.pbox[o+1],{left:E,right:I}}function p(v,y,x){let E=y,I=x,P;for(let w=o+1;w>1;--w)E=E^v.pbox[w],I=d(v,E)^I,P=E,E=I,I=P;return P=E,E=I,I=P,I=I^v.pbox[1],E=E^v.pbox[0],{left:E,right:I}}function m(v,y,x){for(let b=0;b<4;b++){v.sbox[b]=[];for(let T=0;T<256;T++)v.sbox[b][T]=c[b][T]}let E=0;for(let b=0;b<o+2;b++)v.pbox[b]=l[b]^y[E],E++,E>=x&&(E=0);let I=0,P=0,w=0;for(let b=0;b<o+2;b+=2)w=h(v,I,P),I=w.left,P=w.right,v.pbox[b]=I,v.pbox[b+1]=P;for(let b=0;b<4;b++)for(let T=0;T<256;T+=2)w=h(v,I,P),I=w.left,P=w.right,v.sbox[b][T]=I,v.sbox[b][T+1]=P;return!0}var g=a.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var v=this._keyPriorReset=this._key,y=v.words,x=v.sigBytes/4;m(u,y,x)}},encryptBlock:function(v,y){var x=h(u,v[y],v[y+1]);v[y]=x.left,v[y+1]=x.right},decryptBlock:function(v,y){var x=p(u,v[y],v[y+1]);v[y]=x.left,v[y+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(g)}(),r.Blowfish})}(Gm)),Gm.exports}(function(t,e){(function(r,n,s){t.exports=n(Yt(),_p(),g7(),v7(),il(),x7(),ol(),N4(),wx(),y7(),M4(),E7(),b7(),_7(),Ax(),S7(),ho(),mn(),T7(),w7(),A7(),C7(),I7(),k7(),D7(),P7(),F7(),R7(),O7(),N7(),M7(),L7(),B7(),U7(),$7())})(Lt,function(r){return r})})(O4);var V7=O4.exports;const Vi=R4(V7);class j7{constructor(){this.encryptionKey="your-dev-key-here"}async encryptAndUploadPdf(e,r){try{if(console.log(" Starting PDF encryption for student:",r),console.log(" File details:",{name:e.name,size:e.size,type:e.type}),(!this.encryptionKey||this.encryptionKey==="your-dev-key-here")&&console.warn(" Using default encryption key - set VITE_PDF_ENCRYPTION_KEY in production"),!$t.currentUser)throw new Error("User not authenticated");if(console.log(" Current user:",$t.currentUser.uid),r){console.log(" Checking student access for:",r);try{if(!(await Zt(Qe(Xe,"students",r))).exists())throw new Error(`Student ${r} not found`);console.log(" Student document exists")}catch(l){throw console.error(" Student access check failed:",l),new Error(`Student access check failed: ${l.message}`)}}console.log(" Reading file as ArrayBuffer...");const n=await e.arrayBuffer();console.log(" ArrayBuffer read, size:",n.byteLength),console.log(" Converting to Base64...");const s=btoa(new Uint8Array(n).reduce((l,c)=>l+String.fromCharCode(c),""));console.log(" Base64 conversion complete, length:",s.length),console.log(" Encrypting content...");const i=Vi.AES.encrypt(s,this.encryptionKey).toString();console.log(" Encryption complete, length:",i.length);const a=`${d7()}.enc`;console.log(" Generated filename:",a),console.log(" Uploading to storage...");const o=th(xc,`students/${r}/${a}`);return console.log(" Storage path:",`students/${r}/${a}`),await i4(o,i),console.log(" Upload to storage successful"),console.log(" Storing metadata in Firestore..."),await Wt(Qe(Xe,"pdfMetadata",a),{originalName:e.name,studentId:r,uploadedBy:$t.currentUser.uid,uploadedAt:Bs(),accessCount:0,lastAccessed:null,encryptionVersion:"1.0",fileSize:e.size,mimeType:e.type}),console.log(" Metadata stored successfully"),a}catch(n){throw console.error(" PDF encryption failed:",n),console.error(" Error details:",{message:n.message,code:n.code,stack:n.stack}),new Error(`Failed to securely store PDF: ${n.message}`)}}async downloadAndDecryptPdf(e,r){try{if(!await this.verifyAccess(r))throw new Error("Access denied");const{auth:s}=await ra(async()=>{const{auth:h}=await Promise.resolve().then(()=>m4);return{auth:h}},void 0),i=await s.currentUser.getIdToken(),a=`https://downloadstudentfile-zr6j2ycwuq-uc.a.run.app/downloadStudentFile?studentId=${r}&fileName=${e}`;console.log(" Using proxy URL for secure download");const o=await fetch(a,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Failed to fetch file: ${o.status} ${o.statusText}`);const l=await o.text();console.log(" Downloaded encrypted content via proxy");const c=Vi.AES.decrypt(l,this.encryptionKey).toString(Vi.enc.Utf8),u=atob(c),d=new Blob([new Uint8Array(u.split("").map(h=>h.charCodeAt(0)))],{type:"application/pdf"});return console.log(" PDF decrypted and blob created"),d}catch(n){throw console.error("PDF decryption failed:",n),new Error("Failed to retrieve PDF")}}async verifyAccess(e){var r,n,s,i,a,o;try{const l=$t.currentUser;if(!l)return!1;const u=(await Zt(Qe(Xe,"users",l.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager")return((s=(n=(r=(await Zt(Qe(Xe,"students",e))).data())==null?void 0:r.app)==null?void 0:n.studentData)==null?void 0:s.caseManagerId)===l.uid;if(u.role==="teacher"){const h=((o=(a=(i=(await Zt(Qe(Xe,"students",e))).data())==null?void 0:i.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(h).includes(l.uid)}return!1}catch(l){return console.error("Access verification failed:",l),!1}}async logAccess(e,r){try{await Wt(Qe(Xe,"pdfAccessLogs",`${e}_${Date.now()}`),{fileId:e,studentId:r,userId:$t.currentUser.uid,userEmail:$t.currentUser.email,accessTime:Bs(),userAgent:navigator.userAgent,accessType:"download"})}catch(n){console.error("Failed to log access:",n)}}async updateAccessMetadata(e){try{const r=Qe(Xe,"pdfMetadata",e),n=await Zt(r);n.exists()&&await Wt(r,{...n.data(),accessCount:(n.data().accessCount||0)+1,lastAccessed:Bs()},{merge:!0})}catch(r){console.error("Failed to update access metadata:",r)}}async getFileAccessHistory(e){try{const r=lr(wt(Xe,"pdfAccessLogs"),Vr("fileId","==",e),cn("accessTime","desc"));return(await jt(r)).docs.map(s=>s.data())}catch(r){return console.error("Failed to fetch access history:",r),[]}}}const p0=new j7;function Cx(){const t=ne(!1),e=ne(!1),r=ne(null);return{uploadPdf:async(a,o)=>{t.value=!0,r.value=null;try{if(a.type!=="application/pdf")throw new Error("Only PDF files are allowed");if(a.size>10*1024*1024)throw new Error("File size must be less than 10MB");return await p0.encryptAndUploadPdf(a,o)}catch(l){throw r.value=l.message,l}finally{t.value=!1}},downloadPdf:async(a,o,l)=>{e.value=!0,r.value=null;try{const c=await p0.downloadAndDecryptPdf(a,o),u=window.URL.createObjectURL(c),d=window.open(u,"_blank","noopener,noreferrer");setTimeout(()=>{window.URL.revokeObjectURL(u)},5e3)}catch(c){throw r.value=c.message,c}finally{e.value=!1}},getAccessHistory:async a=>{try{return await p0.getFileAccessHistory(a)}catch(o){return r.value=o.message,[]}},isUploading:t,isDownloading:e,error:r}}const H7={class:"docs-item"},G7={__name:"StudentDocsCell",props:{student:{type:Object,required:!0},getDocumentUrl:{type:Function,required:!0}},setup(t){const e=t,{downloadPdf:r}=Cx(),n=async s=>{var i,a,o,l;try{if(!s){alert("File not found.");return}const c=((a=(i=e.student.app)==null?void 0:i.documents)==null?void 0:a.bipFileName)||((l=(o=e.student.app)==null?void 0:o.documents)==null?void 0:l.ataglanceFileName)||"document.pdf";await r(s,e.student.id,c)}catch(c){console.error("Error opening secure file:",c),alert("Error opening file. Please try again.")}};return(s,i)=>(L(),U("td",null,[f("div",H7,[t.getDocumentUrl(t.student,"ataglancePdfUrl")?(L(),U("a",{key:0,href:"#",onClick:i[0]||(i[0]=hn(a=>n(t.getDocumentUrl(t.student,"ataglancePdfUrl")),["prevent"]))}," At-A-Glance ")):Se("",!0),t.getDocumentUrl(t.student,"bipPdfUrl")?(L(),U("a",{key:1,href:"#",onClick:i[1]||(i[1]=hn(a=>n(t.getDocumentUrl(t.student,"bipPdfUrl")),["prevent"]))}," BIP ")):Se("",!0),!t.getDocumentUrl(t.student,"ataglancePdfUrl")&&!t.getDocumentUrl(t.student,"bipPdfUrl")?(L(),U(Fe,{key:2},[Oe("")],64)):Se("",!0)])]))}},W7={class:"action-buttons"},z7=["title"],K7={__name:"StudentActionsCell",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!1},studentData:{type:Object,required:!1}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,n=_e(()=>{var u,d,h;if(!((u=r.currentUser)!=null&&u.role)||!r.student)return!1;const o=r.currentUser.role,l=r.currentUser.uid;return o==="paraeducator"||o==="teacher"?!1:o==="case_manager"?((h=(d=r.student.app)==null?void 0:d.studentData)==null?void 0:h.caseManagerId)===l:["admin","administrator","sped_chair","administrator_504_CM","service_provider"].includes(o)}),s=_e(()=>{var c,u,d,h,p;if(!((c=r.currentUser)!=null&&c.role)||!r.student||!r.studentData)return!1;const o=r.currentUser.uid,l=r.currentUser.role;if(l==="case_manager")return r.studentData.getCaseManagerId(r.student)===o;if(l==="sped_chair"){const m=r.studentData.getCaseManagerId(r.student)===o,g=i(o,r.student,r.studentData),v=((d=(u=r.student.app)==null?void 0:u.studentData)==null?void 0:d.plan)==="IEP"||r.student.plan==="IEP";return m||g||v}if(l==="administrator_504_CM"){const m=r.studentData.getCaseManagerId(r.student)===o,g=((p=(h=r.student.app)==null?void 0:h.studentData)==null?void 0:p.plan)||r.student.plan;return m||(g==="IEP"||g==="504")}return l==="admin"||l==="administrator"}),i=(o,l,c)=>{const u=c.getSchedule(l);return u?Object.values(u).some(d=>{var h;return typeof d=="string"?d===o:d&&typeof d=="object"?d.teacherId===o||((h=d.coTeaching)==null?void 0:h.caseManagerId)===o:!1}):!1};function a(o,l=!1){if(!(o!=null&&o.seconds))return"";const c=new Date(o.seconds*1e3);return l?c.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}):c.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})+" at "+c.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"})}return(o,l)=>{var c,u;return L(),U("td",null,[f("div",W7,[n.value?(L(),U("button",{key:0,class:"edit-btn",onClick:l[0]||(l[0]=d=>o.$emit("edit",t.student.id)),title:"Edit Student"},"")):Se("",!0),f("button",{class:"email-btn",onClick:l[1]||(l[1]=d=>o.$emit("email",t.student.id)),title:"Email Student"},""),s.value?(L(),U("button",{key:1,class:"teacher-feedback-btn",onClick:l[2]||(l[2]=d=>o.$emit("teacher-feedback",t.student.id)),title:"Send Teacher Feedback Form"},"")):Se("",!0)]),(u=(c=t.student)==null?void 0:c.updatedAt)!=null&&u.seconds?(L(),U("div",{key:0,class:"updated-date",title:"Last Updated: "+a(t.student.updatedAt)},Q(a(t.student.updatedAt,!0)),9,z7)):Se("",!0)])}}},q7=xt(K7,[["__scopeId","data-v-c5249c1a"]]),X7={key:0,class:"schedule-list"},Y7={class:"period-assignment"},J7={class:"primary-line"},Q7={class:"period-label"},Z7={class:"primary-teacher"},eU={key:0,class:"coteaching-info"},tU=["title"],rU={key:1,class:"no-schedule"},nU={__name:"StudentScheduleCell",props:{student:{type:Object,required:!0},getSchedule:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){const e=r=>r&&typeof r=="object"&&r.coTeaching&&r.teacherId;return(r,n)=>(L(),U("td",null,[t.getSchedule(t.student)?(L(),U("div",X7,[f("ul",null,[(L(!0),U(Fe,null,Ve(t.getSchedule(t.student),(s,i)=>(L(),U("li",{key:i,class:"schedule-period"},[f("div",Y7,[f("div",J7,[f("span",Q7,Q(i)+":",1),f("span",Z7,Q(t.getUserInitialLastName(s.teacherId||s)),1)]),e(s)?(L(),U("div",eU,[f("span",{class:"coteaching-indicator",title:`Co-teach ${s.coTeaching.subject}`},Q(t.getUserInitialLastName(s.coTeaching.caseManagerId))+" (C"+Q(s.coTeaching.subject.charAt(0))+") ",9,tU)])):Se("",!0)])]))),128))])])):(L(),U("div",rU,""))]))}},sU={key:0,class:"services-section"},aU={class:"services-container"},iU={key:1,class:"services-section"},oU={class:"services-container"},lU={key:0,class:"service-provider-item"},cU={key:0,class:"service-provider-item"},uU={key:1,class:"service-provider-item"},dU={key:2,class:"service-provider-item"},fU={key:3,class:"service-provider-item"},hU={key:4,class:"service-provider-item"},pU={key:5,class:"service-provider-item"},mU={__name:"StudentServicesCell",props:{student:{type:Object,required:!0},appSettings:{type:Object,required:!1},getClassServices:{type:Function,required:!0},getOtherServices:{type:Function,required:!0},hasServiceProviders:{type:Function,required:!0},getServiceProviderId:{type:Function,required:!0},getProviderFieldName:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){return(e,r)=>(L(),U("td",null,[t.getClassServices(t.student).length>0||t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(L(),U(Fe,{key:0},[t.getClassServices(t.student).length>0?(L(),U("div",sU,[r[0]||(r[0]=f("strong",null,"Class Services:",-1)),f("div",aU,[(L(!0),U(Fe,null,Ve(t.getClassServices(t.student),n=>(L(),U("span",{key:n,class:"service-item"},Q(n),1))),128))])])):Se("",!0),t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(L(),U("div",iU,[r[1]||(r[1]=f("strong",null,"Related Services:",-1)),f("div",oU,[(L(!0),U(Fe,null,Ve(t.getOtherServices(t.student),n=>(L(),U("span",{key:n,class:"service-item"},Q(n),1))),128)),t.appSettings&&t.appSettings.value&&t.appSettings.value.serviceProviders?(L(!0),U(Fe,{key:0},Ve(t.appSettings.value.serviceProviders,n=>(L(),U(Fe,{key:n},[t.getServiceProviderId(t.student,t.getProviderFieldName(n))?(L(),U("span",lU,Q(n)+" ("+Q(t.getUserInitialLastName(t.getServiceProviderId(t.student,t.getProviderFieldName(n))))+") ",1)):Se("",!0)],64))),128)):(L(),U(Fe,{key:1},[t.getServiceProviderId(t.student,"speechId")?(L(),U("span",cU,"SP ("+Q(t.getUserInitialLastName(t.getServiceProviderId(t.student,"speechId")))+")",1)):Se("",!0),t.getServiceProviderId(t.student,"mhId")?(L(),U("span",uU,"MH ("+Q(t.getUserInitialLastName(t.getServiceProviderId(t.student,"mhId")))+")",1)):Se("",!0),t.getServiceProviderId(t.student,"otId")?(L(),U("span",dU,"OT ("+Q(t.getUserInitialLastName(t.getServiceProviderId(t.student,"otId")))+")",1)):Se("",!0),t.getServiceProviderId(t.student,"ptId")?(L(),U("span",fU,"PT ("+Q(t.getUserInitialLastName(t.getServiceProviderId(t.student,"ptId")))+")",1)):Se("",!0),t.getServiceProviderId(t.student,"scId")?(L(),U("span",hU,"SC ("+Q(t.getUserInitialLastName(t.getServiceProviderId(t.student,"scId")))+")",1)):Se("",!0),t.getServiceProviderId(t.student,"trId")?(L(),U("span",pU,"TR ("+Q(t.getUserInitialLastName(t.getServiceProviderId(t.student,"trId")))+")",1)):Se("",!0)],64))])])):Se("",!0)],64)):(L(),U(Fe,{key:1},[Oe("  ")],64))]))}},gU={key:1,class:"pill-list"},vU=["innerHTML"],xU={key:2},Q_={__name:"AccommodationsCell",props:{student:{type:Object,required:!0},fieldName:{type:String,required:!0},flagType:{type:String,required:!0},flagText:{type:String,required:!0},flagClass:{type:String,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(L(),U("td",{class:Ze(["instruction-cell",{"with-flag":t.getFlagValue(t.student,t.flagType)}])},[t.getFlagValue(t.student,t.flagType)?(L(),U("div",{key:0,class:Ze(["flag-overlay",t.flagClass])},Q(t.flagText),3)):Se("",!0),Z(ut)(t.student,t.fieldName)?(L(),U("div",gU,[f("div",{innerHTML:t.formatListFromText(Z(ut)(t.student,t.fieldName))},null,8,vU)])):(L(),U("div",xU,""))],2))}},yU={class:"student-name"},EU={class:"std-info-subheading"},bU={key:0,class:"schedule-list"},_U={class:"period-assignment"},SU={class:"primary-line"},TU={class:"period-label"},wU={class:"primary-teacher"},AU={key:0,class:"coteaching-info"},CU=["title"],IU={key:1,class:"no-schedule"},kU={key:0,class:"flag-overlay flag-separate-setting"},DU={key:1,class:"bullet-list"},PU=["innerHTML"],FU={key:2},RU={class:"student-name"},OU=["title"],NU={class:"std-info-subheading"},MU={class:"student-dates print"},LU={key:0,class:"direct-assignment-badge"},Of={__name:"StudentTable",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})},currentUser:{type:Object,default:null},studentData:{type:Object,default:null},testingView:{type:Boolean,default:!1},aideSchedule:{type:Object,default:()=>({})}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,{appSettings:n,getUserName:s,getUserInitialLastName:i,formatDate:a,getMeetingUrgencyClass:o,getReviewUrgencyClass:l,getReevalUrgencyClass:c,getCaseManagerId:u,getFlagValue:d,getDocumentUrl:h,getSchedule:p,getClassServices:m,getOtherServices:g,hasServiceProviders:v,getServiceProviderId:y,getProviderFieldName:x,isDirectAssignment:E,formatListFromText:I}=i7(r),P=w=>w&&typeof w=="object"&&w.coTeaching&&w.teacherId;return Ut(()=>r.student,w=>{var b,T,_,S,k,A,D;w&&Object.keys(w).length>0&&(form.schedule=((T=(b=w.app)==null?void 0:b.schedule)==null?void 0:T.periods)||w.schedule||((S=(_=w.aeries)==null?void 0:_.schedule)==null?void 0:S.periods)||{},console.log("StudentForm DEBUG - form.schedule:",form.schedule),console.log("StudentForm DEBUG - aeries.schedule:",(k=r.student.aeries)==null?void 0:k.schedule),console.log("StudentForm DEBUG - app.schedule.periods:",(D=(A=r.student.app)==null?void 0:A.schedule)==null?void 0:D.periods))},{immediate:!0,deep:!0}),(w,b)=>(L(),U("table",{class:Ze(["students-table",{"testing-view":t.testingView}])},[f("thead",null,[f("tr",null,[t.testingView?(L(),U(Fe,{key:0},[b[0]||(b[0]=f("th",{class:"print"},"Student Info",-1)),b[1]||(b[1]=f("th",{class:"print"},"Schedule",-1)),b[2]||(b[2]=f("th",{class:"print"},"Assessment Accom.",-1))],64)):(L(),U(Fe,{key:1},[b[3]||(b[3]=f("th",{class:"print"},"Student Info",-1)),b[4]||(b[4]=f("th",{class:"print"},"Services",-1)),b[5]||(b[5]=f("th",{class:"print"},"Schedule",-1)),b[6]||(b[6]=f("th",{class:"print"},"Instruction Accom.",-1)),b[7]||(b[7]=f("th",{class:"print"},"Assessment Accom.",-1)),b[8]||(b[8]=f("th",{class:"print"},"Docs",-1)),b[9]||(b[9]=f("th",{class:"print"},"Actions",-1))],64))])]),f("tbody",null,[(L(!0),U(Fe,null,Ve(t.students,T=>{var _;return L(),U("tr",{key:T.id},[t.testingView?(L(),U(Fe,{key:0},[f("td",null,[f("div",yU,[f("strong",null,Q(Z(ut)(T,"firstName"))+" "+Q(Z(ut)(T,"lastName")),1)]),f("div",EU,[f("div",null,"Grd: "+Q(Z(ut)(T,"grade"))+" | Prg: "+Q(Z(ut)(T,"plan")),1),f("div",null,"CM: "+Q(Z(s)(Z(u)(T))),1)])]),f("td",null,[Z(p)(T)?(L(),U("div",bU,[f("ul",null,[(L(!0),U(Fe,null,Ve(Z(p)(T),(S,k)=>(L(),U("li",{key:k,class:"schedule-period"},[f("div",_U,[f("div",SU,[f("span",TU,Q(k)+":",1),f("span",wU,Q(Z(i)(S.teacherId||S)),1)]),P(S)?(L(),U("div",AU,[f("span",{class:"coteaching-indicator",title:`Co-teach ${S.coTeaching.subject}`},Q(Z(i)(S.coTeaching.caseManagerId))+" (C"+Q(S.coTeaching.subject.charAt(0))+") ",9,CU)])):Se("",!0)])]))),128))])])):(L(),U("div",IU,""))]),f("td",{class:Ze(["instruction-cell",{"with-flag":Z(d)(T,"flag2")}])},[Z(d)(T,"flag2")?(L(),U("div",kU,"Separate setting")):Se("",!0),Z(ut)(T,"assessment")?(L(),U("div",DU,[f("div",{innerHTML:Z(I)(Z(ut)(T,"assessment"))},null,8,PU)])):(L(),U("div",FU,""))],2)],64)):(L(),U(Fe,{key:1},[f("td",null,[f("div",RU,[f("strong",null,Q(Z(ut)(T,"firstName"))+" "+Q(Z(ut)(T,"lastName")),1),f("span",{class:"data-source",title:`Data source: ${Z(eu)(T,"firstName")}`},Q(Z(eu)(T,"firstName")==="Override"?"":Z(eu)(T,"firstName")==="App"?"":Z(eu)(T,"firstName")==="Aeries"?"":Z(eu)(T,"firstName")==="SEIS"?"":""),9,OU)]),f("div",NU,[f("div",null,"Grd: "+Q(Z(ut)(T,"grade"))+" | Prg: "+Q(Z(ut)(T,"plan")),1),f("div",null,"CM: "+Q(Z(s)(Z(u)(T))),1)]),f("div",MU,[f("span",{class:Ze(["badge badge-review plan-review",Z(l)(T)])},"PR: "+Q(Z(a)(Z(ut)(T,"reviewDate"))),3),f("span",{class:Ze(["badge badge-reeval reeval-due",Z(c)(T)])},"RE: "+Q(Z(a)(Z(ut)(T,"reevalDate"))),3),f("span",{class:Ze(["badge badge-meeting meeting-date",[Z(o)(T),Z(ut)(T,"meetingDate")?"date-set":""]])},"  "+Q(Z(a)(Z(ut)(T,"meetingDate"))||"Not set"),3)]),((_=t.currentUser)==null?void 0:_.role)==="paraeducator"&&Z(E)(T.id)?(L(),U("div",LU,b[10]||(b[10]=[f("span",{class:"badge badge-direct"},"Direct Assignment",-1)]))):Se("",!0)]),st(mU,{student:T,"app-settings":Z(n),"get-class-services":Z(m),"get-other-services":Z(g),"has-service-providers":Z(v),"get-service-provider-id":Z(y),"get-provider-field-name":Z(x),"get-user-initial-last-name":Z(i)},null,8,["student","app-settings","get-class-services","get-other-services","has-service-providers","get-service-provider-id","get-provider-field-name","get-user-initial-last-name"]),st(nU,{student:T,"get-schedule":Z(p),"get-user-initial-last-name":Z(i)},null,8,["student","get-schedule","get-user-initial-last-name"]),st(Q_,{student:T,"field-name":"instruction","flag-type":"flag1","flag-text":"Preferential Seating","flag-class":"flag-preferential-seating","get-flag-value":Z(d),"format-list-from-text":Z(I)},null,8,["student","get-flag-value","format-list-from-text"]),st(Q_,{student:T,"field-name":"assessment","flag-type":"flag2","flag-text":"Separate Setting","flag-class":"flag-separate-setting","get-flag-value":Z(d),"format-list-from-text":Z(I)},null,8,["student","get-flag-value","format-list-from-text"]),st(G7,{student:T,"get-document-url":Z(h)},null,8,["student","get-document-url"]),st(q7,{student:T,"current-user":t.currentUser,"student-data":t.studentData,onEdit:S=>w.$emit("edit",T.id),onEmail:S=>w.$emit("email",T.id),onTeacherFeedback:S=>w.$emit("teacher-feedback",T.id)},null,8,["student","current-user","student-data","onEdit","onEmail","onTeacherFeedback"])],64))])}),128))])],2))}};function BU(t,e){const{appSettings:r,loadAppSettings:n,loading:s,error:i}=Hs(),a=ne(!1);Bt(async()=>{try{console.log("useStudentForm: Starting to load app settings..."),await n(),console.log("useStudentForm: App settings loaded successfully:",r.value)}catch(S){console.error("useStudentForm: Error loading app settings:",S)}});const o=_e(()=>{var k;const S=((k=r.value)==null?void 0:k.numPeriods)||7;return Array.from({length:S},(A,D)=>D+1)}),l=_e(()=>{var S;return(S=r.value)!=null&&S.grades&&r.value.grades.length>0?(console.log("useStudentForm: Using app settings grades:",r.value.grades),r.value.grades):(console.log("useStudentForm: Using fallback grades: [7, 8]"),["7","8"])}),c=_e(()=>{var S;if((S=r.value)!=null&&S.classServices&&r.value.classServices.length>0){const k=r.value.classServices.filter(A=>A.enabledSubcategories&&A.enabledSubcategories.length>0);return console.log("useStudentForm: Available class services:",k.length,"services"),k}return console.log("useStudentForm: No class services available"),[]}),u=_e(()=>{var S;return(S=r.value)!=null&&S.serviceProviders&&r.value.serviceProviders.length>0?(console.log("useStudentForm: Using app settings service providers:",r.value.serviceProviders.length,"providers"),r.value.serviceProviders):(console.log("useStudentForm: No service providers configured in app settings"),[])}),d=_e(()=>{var S;return(S=r.value)!=null&&S.customServiceProviders?r.value.customServiceProviders:[]}),h=_e(()=>{let S=t.users.userRoles?t.users.userRoles:{teachers:t.users.teachers||[],caseManagers:t.users.caseManagers||[],speech:t.users.speech||[],ot:t.users.ot||[],mh:t.users.mh||[]};return S.teachers&&(S={...S,teachers:S.teachers.map(k=>({...k,id:String(k.id)}))}),S}),p=S=>{var k,A,D,N,R,F,O,B,V,z,H,j,W,K,re,he,ue,pe,te,Y,Ee,X,q,J,ge,ae,se,le,xe,ve,Ce,we,Ge,ke,$e,Be,We,ze,be,ye,Te,Ne,He,ot,gt,yt,Mt,ft;return{ssid:S.id||"",firstName:ut(S,"firstName")||"",lastName:ut(S,"lastName")||"",grade:ut(S,"grade")||"7",plan:ut(S,"plan")||"IEP",reviewDate:ut(S,"reviewDate")||"",reevalDate:ut(S,"reevalDate")||"",meetingDate:ut(S,"meetingDate")||"",caseManagerId:((A=(k=S.app)==null?void 0:k.studentData)==null?void 0:A.caseManagerId)||S.caseManagerId||S.casemanager_id||"",schedule:((N=(D=S.app)==null?void 0:D.schedule)==null?void 0:N.periods)||((F=(R=S.aeries)==null?void 0:R.schedule)==null?void 0:F.periods)||S.schedule||{},services:((B=(O=S.app)==null?void 0:O.schedule)==null?void 0:B.classServices)||S.services||[],speechId:((z=(V=S.app)==null?void 0:V.providers)==null?void 0:z.speechId)||S.speechId||S.speech_id||"",otId:((j=(H=S.app)==null?void 0:H.providers)==null?void 0:j.otId)||S.otId||S.ot_id||"",mhId:((K=(W=S.app)==null?void 0:W.providers)==null?void 0:K.mhId)||S.mhId||S.mh_id||"",ptId:((he=(re=S.app)==null?void 0:re.providers)==null?void 0:he.ptId)||S.ptId||S.pt_id||"",scId:((pe=(ue=S.app)==null?void 0:ue.providers)==null?void 0:pe.scId)||S.scId||S.sc_id||"",trId:((Y=(te=S.app)==null?void 0:te.providers)==null?void 0:Y.trId)||S.trId||S.tr_id||"",audId:((X=(Ee=S.app)==null?void 0:Ee.providers)==null?void 0:X.audId)||S.audId||S.aud_id||"",viId:((J=(q=S.app)==null?void 0:q.providers)==null?void 0:J.viId)||S.viId||S.vi_id||"",atId:((ae=(ge=S.app)==null?void 0:ge.providers)==null?void 0:ae.atId)||S.atId||S.at_id||"",dhhId:((le=(se=S.app)==null?void 0:se.providers)==null?void 0:le.dhhId)||S.dhhId||S.dhh_id||"",omId:((ve=(xe=S.app)==null?void 0:xe.providers)==null?void 0:ve.omId)||S.omId||S.om_id||"",bisId:((we=(Ce=S.app)==null?void 0:Ce.providers)==null?void 0:we.bisId)||S.bisId||S.bis_id||"",hnId:((ke=(Ge=S.app)==null?void 0:Ge.providers)==null?void 0:ke.hnId)||S.hnId||S.hn_id||"",swId:((Be=($e=S.app)==null?void 0:$e.providers)==null?void 0:Be.swId)||S.swId||S.sw_id||"",instruction:ut(S,"instruction")||"",assessment:ut(S,"assessment")||"",flag1:((ze=(We=S.app)==null?void 0:We.flags)==null?void 0:ze.flag1)||S.flag1||!1,flag2:((ye=(be=S.app)==null?void 0:be.flags)==null?void 0:ye.flag2)||S.flag2||!1,ataglancePdfUrl:((Ne=(Te=S.app)==null?void 0:Te.documents)==null?void 0:Ne.ataglancePdfUrl)||S.ataglancePdfUrl||S.ataglance_pdf_url||"",bipPdfUrl:((ot=(He=S.app)==null?void 0:He.documents)==null?void 0:ot.bipPdfUrl)||S.bipPdfUrl||S.bip_pdf_url||"",ataglanceFileName:((yt=(gt=S.app)==null?void 0:gt.documents)==null?void 0:yt.ataglanceFileName)||S.ataglanceFileName||"",bipFileName:((ft=(Mt=S.app)==null?void 0:Mt.documents)==null?void 0:ft.bipFileName)||S.bipFileName||"",bipFile:null,ataglanceFile:null,removeBipFile:!1,removeAtaglanceFile:!1}},m=gs(p(t.student||{})),g=S=>{const k=[];return S&&typeof S=="object"&&Object.entries(S).forEach(([A,D])=>{if(D&&typeof D=="object"&&D.coTeaching){const N=D.coTeaching.subject;N&&k.push(`Co-teach: ${N}`)}}),k},v=()=>{const S=g(m.schedule),k=m.services.filter(A=>!A.startsWith("Co-teach:"));m.services=[...k,...S]};Ut(()=>m.schedule,()=>{v()},{deep:!0}),Ut(()=>{var S;return(S=t.student)==null?void 0:S.id},(S,k)=>{var A,D,N,R,F,O,B;if(S&&S!==k){console.log(" useStudentForm DEBUG - Student ID changed, updating form:",S),console.log(" useStudentForm DEBUG - newStudent.app?.schedule?.periods:",JSON.stringify((N=(D=(A=t.student)==null?void 0:A.app)==null?void 0:D.schedule)==null?void 0:N.periods,null,2)),console.log(" useStudentForm DEBUG - newStudent.aeries?.schedule?.periods:",JSON.stringify((O=(F=(R=t.student)==null?void 0:R.aeries)==null?void 0:F.schedule)==null?void 0:O.periods,null,2)),console.log(" useStudentForm DEBUG - newStudent.schedule:",JSON.stringify((B=t.student)==null?void 0:B.schedule,null,2));const V=p(t.student);Object.assign(m,V),v(),console.log(" useStudentForm DEBUG - Processed form.schedule:",m.schedule)}},{immediate:!0}),Ut(()=>r.value,S=>{console.log("useStudentForm: App settings watcher triggered:",S),S!=null&&S.grades&&S.grades.length>0&&(S.grades.includes(m.grade)||(m.grade=S.grades[0]||"7"))},{immediate:!0,deep:!0});const y=(S,k)=>{const A=S.target.files[0]||null;if(A){const D=Oc(A,{allowedTypes:["pdf"],maxSize:10485760,fieldName:k==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!D.isValid){alert(D.error),S.target.value="";return}const N=Hr(A.name);if(!N.isSafe){alert(`File name contains potentially dangerous content: ${N.threats.join(", ")}`),S.target.value="";return}}m[k]=A},x=S=>{S.preventDefault(),S.stopPropagation(),m.removeBipFile=!0,m.bipFile=null},E=S=>{S.preventDefault(),S.stopPropagation(),m.removeAtaglanceFile=!0,m.ataglanceFile=null},I={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"},P=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],w=S=>{var A;if((A=r.value)!=null&&A.serviceProviders&&Array.isArray(r.value.serviceProviders)){const D=(r.value.serviceProvidersDetails||P).find(N=>N.abbreviation===S);if(D)return D.name+" ("+S+")"}const k=P.find(D=>D.abbreviation===S);return k?k.name+" ("+S+")":S},b=S=>{const A={SLP:"speech",OT:"ot",MH:"mh",PT:"pt",SC:"sc",TR:"tr",AUD:"aud",VI:"vi",AT:"at",DHH:"dhh","O&M":"om",BIS:"bis",HN:"hn",SW:"sw"}[S]||S.toLowerCase();return h.value[A]||[]},T=()=>{const S=D4(m),k={app:{studentData:{firstName:S.firstName,lastName:S.lastName,grade:S.grade,plan:S.plan,caseManagerId:S.caseManagerId}}},A=k4(k,{isNew:t.mode==="new"});if(!A.isValid)return alert(`Please fix the following errors:

${A.errors.join(`
`)}`),!1;const D=["firstName","lastName","instruction","assessment"];for(const N of D)if(m[N]){const R=Hr(m[N]);if(!R.isSafe)return alert(`Security threat detected in ${N}: ${R.threats.join(", ")}`),!1}return Object.assign(m,S),!0};return{form:m,isSaving:a,appSettings:r,appSettingsLoading:s,appSettingsError:i,periods:o,gradeOptions:l,availableClassServices:c,serviceProviders:u,customServiceProviders:d,userRoles:h,onFileChange:y,removeBipFile:x,removeAtaglanceFile:E,providerFieldMap:I,getProviderLabel:w,getProviderUsers:b,handleSubmit:async()=>{var S,k,A;try{if(a.value){console.log("Form submission already in progress, ignoring duplicate");return}if(console.log("Form submitted:",m),a.value=!0,console.log(" AUTH DEBUG - Current user:",{uid:(S=$t.currentUser)==null?void 0:S.uid,email:(k=$t.currentUser)==null?void 0:k.email,claims:await((A=$t.currentUser)==null?void 0:A.getIdTokenResult())}),!T()){a.value=!1;return}const D=m.services.filter(z=>z&&z.includes(":")),N={};console.log(" FORM SCHEDULE DEBUG - Complete form.schedule:",JSON.stringify(m.schedule,null,2)),console.log(" FORM SCHEDULE DEBUG - periods.value:",o.value),o.value.forEach(z=>{if(console.log(` FORM SCHEDULE DEBUG - Period ${z} exists:`,!!m.schedule[z],"Value:",m.schedule[z]),m.schedule[z]){const H=m.schedule[z];console.log(` SCHEDULE DEBUG - Period ${z}:`,{type:typeof H,data:H,hasCoTeaching:!!(H&&H.coTeaching),hasCaseManagerId:!!(H&&H.coTeaching&&H.coTeaching.caseManagerId)}),typeof H=="string"?N[z]=H:typeof H=="object"&&H!==null&&(H.coTeaching&&H.coTeaching.caseManagerId?(console.log(` SCHEDULE DEBUG - Period ${z} has co-teaching, preserving structure`),N[z]={teacherId:H.teacherId,coTeaching:{caseManagerId:H.coTeaching.caseManagerId,subject:H.coTeaching.subject||""}}):(console.log(` SCHEDULE DEBUG - Period ${z} converting to simple format`),N[z]=H.teacherId||String(H)||H))}}),console.log(" Schedule Composition Debug:"),console.log("Form schedule before:",JSON.stringify(m.schedule,null,2)),console.log("Composed schedule after:",JSON.stringify(N,null,2)),console.log("Composed data:",{classServices:D,schedule:N});let R=m.bipPdfUrl||null,F=m.ataglancePdfUrl||null;if(console.log(" Form submission - PDF URLs:",{bipPdfUrl:R,ataglancePdfUrl:F,formBipPdfUrl:m.bipPdfUrl,formAtaglancePdfUrl:m.ataglancePdfUrl,bipFileName:m.bipFileName,ataglanceFileName:m.ataglanceFileName,bipFile:m.bipFile,ataglanceFile:m.ataglanceFile}),m.removeBipFile&&(console.log("Removing BIP file..."),R)){try{const z=ne(xc,`students/${t.student.id||"temp"}/${R}`);await uv(z),await deleteDoc(Qe(Xe,"pdfMetadata",R)),console.log("Secure BIP file deleted:",R)}catch(z){console.warn("Error deleting secure BIP file:",z)}R=null}if(m.removeAtaglanceFile&&(console.log("Removing At-A-Glance file..."),F)){try{const z=ne(xc,`students/${t.student.id||"temp"}/${F}`);await uv(z),await deleteDoc(Qe(Xe,"pdfMetadata",F)),console.log("Secure At-A-Glance file deleted:",F)}catch(z){console.warn("Error deleting secure At-A-Glance file:",z)}F=null}const O={studentData:{firstName:m.firstName,lastName:m.lastName,grade:m.grade,plan:m.plan,caseManagerId:m.caseManagerId},dates:{reviewDate:m.reviewDate,reevalDate:m.reevalDate,meetingDate:m.meetingDate},schedule:{periods:N,classServices:D},providers:{speechId:m.speechId,otId:m.otId,mhId:m.mhId,ptId:m.ptId,scId:m.scId,trId:m.trId,audId:m.audId,viId:m.viId,atId:m.atId,dhhId:m.dhhId,omId:m.omId,bisId:m.bisId,hnId:m.hnId,swId:m.swId},accommodations:{instruction:m.instruction,assessment:m.assessment},flags:{flag1:m.flag1,flag2:m.flag2},documents:{ataglancePdfUrl:F,bipPdfUrl:R,bipFileName:m.bipFileName||null,ataglanceFileName:m.ataglanceFileName||null}};console.log(" Documents being saved:",{ataglancePdfUrl:F,bipPdfUrl:R,bipFileName:m.bipFileName||null,ataglanceFileName:m.ataglanceFileName||null}),console.log("Saving payload:",O);const B={app:O,updatedAt:Bs()};console.log("Saving payload:",B);let V=null;if(t.mode==="edit"&&t.student.id)console.log("Updating existing student:",t.student.id),await Wt(Qe(Xe,"students",t.student.id),B,{merge:!0}),V=t.student.id,console.log("Student updated successfully");else{if(console.log("Adding new student"),!m.ssid||m.ssid.trim()===""){alert("SSID is required for new students");return}const z=m.ssid.trim();B.app.studentData.ssid=z;const H=Qe(wt(Xe,"students"));B.createdAt=Bs(),await Wt(H,B),V=H.id,B.id=V,console.log("Student added successfully with ID:",V,"SSID:",z)}e("saved",B),e("close")}catch(D){console.error("Error saving student:",D),console.error("Error details:",{code:D.code,message:D.message,stack:D.stack}),alert(`Error saving student: ${D.message||D}. Please try again.`)}finally{a.value=!1}},validateForm:T}}const UU={class:"form-col"},$U={class:"inner-grid-3"},VU={key:0,class:"ssid-field"},jU=["value"],HU=["value"],GU={__name:"StudentBasicInfo",props:{form:{type:Object,required:!0},mode:{type:String,default:"new"},gradeOptions:{type:Array,required:!0},userRoles:{type:Object,required:!0}},setup(t){return(e,r)=>(L(),U("fieldset",UU,[r[21]||(r[21]=f("legend",null,"Student Info",-1)),f("div",$U,[t.mode==="new"?(L(),U("label",VU,[r[9]||(r[9]=f("span",{class:"field-label"},"SSID (State Student ID) *",-1)),Ae(f("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.ssid=n),type:"text",required:"",placeholder:"Enter student SSID",class:"ssid-input"},null,512),[[Je,t.form.ssid]]),r[10]||(r[10]=f("div",{class:"field-help"},[f("strong",null,"Required:"),Oe(" This can be found in your Student Information System (SIS) such as Aeries, or in SEIS. The SSID is used to link student data across different systems. ")],-1))])):Se("",!0),f("label",null,[r[11]||(r[11]=Oe(" First Name: ")),Ae(f("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.firstName=n),type:"text",required:""},null,512),[[Je,t.form.firstName]])]),f("label",null,[r[12]||(r[12]=Oe(" Last Name: ")),Ae(f("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>t.form.lastName=n),type:"text",required:""},null,512),[[Je,t.form.lastName]])]),f("label",null,[r[13]||(r[13]=Oe(" Grade: ")),Ae(f("select",{"onUpdate:modelValue":r[3]||(r[3]=n=>t.form.grade=n)},[(L(!0),U(Fe,null,Ve(t.gradeOptions,n=>(L(),U("option",{key:n,value:n},Q(n),9,jU))),128))],512),[[hr,t.form.grade]])]),f("label",null,[r[15]||(r[15]=Oe(" Plan Type: ")),Ae(f("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>t.form.plan=n)},r[14]||(r[14]=[f("option",{value:"IEP"},"IEP",-1),f("option",{value:"504"},"504",-1)]),512),[[hr,t.form.plan]])]),f("label",null,[r[16]||(r[16]=Oe(" Review Date: ")),Ae(f("input",{"onUpdate:modelValue":r[5]||(r[5]=n=>t.form.reviewDate=n),type:"date"},null,512),[[Je,t.form.reviewDate]])]),f("label",null,[r[17]||(r[17]=Oe(" Reevaluation Date: ")),Ae(f("input",{"onUpdate:modelValue":r[6]||(r[6]=n=>t.form.reevalDate=n),type:"date"},null,512),[[Je,t.form.reevalDate]])]),f("label",null,[r[18]||(r[18]=Oe(" Meeting Date: ")),Ae(f("input",{"onUpdate:modelValue":r[7]||(r[7]=n=>t.form.meetingDate=n),type:"date"},null,512),[[Je,t.form.meetingDate]])]),f("label",null,[r[20]||(r[20]=Oe(" Case Manager: ")),Ae(f("select",{"onUpdate:modelValue":r[8]||(r[8]=n=>t.form.caseManagerId=n)},[r[19]||(r[19]=f("option",{value:""},"-- Select Case Manager --",-1)),(L(!0),U(Fe,null,Ve(t.userRoles.caseManagers,n=>(L(),U("option",{key:n.id,value:n.id},Q(n.name||n.email||n.id),9,HU))),128))],512),[[hr,t.form.caseManagerId]])])])]))}},WU=xt(GU,[["__scopeId","data-v-5eadce29"]]),zU={class:"form-col"},KU={class:"periods-container"},qU={class:"period-main"},XU={class:"period-label"},YU=["value","onChange"],JU=["value"],QU=["disabled","onClick"],ZU={key:0,class:"coteaching-config"},e$={class:"coteaching-info"},t$={class:"classroom-teacher"},r$={class:"case-manager-name"},n$={class:"config-row"},s$=["value","onChange"],a$=["value"],i$={class:"config-row"},o$=["value","onChange"],l$=["value"],c$={__name:"StudentSchedule",props:{form:{type:Object,required:!0},periods:{type:Array,required:!0},userRoles:{type:Object,required:!0},appSettings:{type:Object,default:()=>({})}},setup(t){const e=t,{getLabel:r}=fo(),n=_e(()=>(e.userRoles.caseManagers||[]).filter(y=>y.id&&(y.role==="case_manager"||y.role==="administrator_504_CM"||y.role==="sped_chair"||y.roles&&y.roles.includes("case_manager")))),s=_e(()=>{var v;if((v=e.appSettings)!=null&&v.classServices){const y=e.appSettings.classServices.find(x=>x.name==="Co-teach"&&x.enabledSubcategories);if(y)return y.enabledSubcategories.sort()}return["English","Math","History","Science"]}),i=v=>{const y=e.form.schedule[v];return typeof y=="string"?y:typeof y=="object"&&y!==null&&y.teacherId||""},a=(v,y)=>{if(h("SET_TEACHER_START",{period:v,teacherId:y,isCoTeachingActive:c(v),currentValue:e.form.schedule[v]}),c(v)){const x=u(v),E=d(v);e.form.schedule[v]={teacherId:y,coTeaching:{caseManagerId:x,subject:E}},h("SET_TEACHER_COTEACHING",{period:v,newValue:e.form.schedule[v]})}else e.form.schedule[v]=y,h("SET_TEACHER_SIMPLE",{period:v,newValue:e.form.schedule[v]})},o=v=>{if(!v)return"Unknown";const y=(e.userRoles.teachers||[]).find(x=>x.id===v);return y&&(y.name||y.email)||v},l=v=>{if(!v)return"Select Case Manager";const y=n.value.find(x=>x.id===v);return y&&(y.name||y.email)||v},c=v=>{var x;const y=e.form.schedule[v];return typeof y=="object"&&y!==null?!!((x=y.coTeaching)!=null&&x.caseManagerId):!1},u=v=>{var x;const y=e.form.schedule[v];return typeof y=="object"&&y!==null&&((x=y.coTeaching)==null?void 0:x.caseManagerId)||""},d=v=>{var x;const y=e.form.schedule[v];return typeof y=="object"&&y!==null&&((x=y.coTeaching)==null?void 0:x.subject)||""},h=(v,y)=>{const x=new Date().toISOString();console.log(` [${x}] Schedule Process: ${v}`,y)},p=(v,y)=>{h("UPDATE_CM_START",{period:v,caseManagerId:y,currentValue:e.form.schedule[v]});const x=i(v),E=d(v);x?(e.form.schedule[v]={teacherId:x,coTeaching:{caseManagerId:y,subject:E}},h("UPDATE_CM_COMPLETE",{period:v,newValue:e.form.schedule[v]}),console.log(" CO-TEACHING DEBUG - Case Manager Updated:",{period:v,periodType:typeof v,caseManagerId:y,teacherId:x,subject:E,finalValue:e.form.schedule[v],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):h("UPDATE_CM_BLOCKED",{reason:"No teacher ID",period:v})},m=(v,y)=>{h("UPDATE_SUBJECT_START",{period:v,subject:y,currentValue:e.form.schedule[v]});const x=i(v),E=u(v);x?(e.form.schedule[v]={teacherId:x,coTeaching:{caseManagerId:E,subject:y}},h("UPDATE_SUBJECT_COMPLETE",{period:v,newValue:e.form.schedule[v]}),console.log(" CO-TEACHING DEBUG - Subject Updated:",{period:v,periodType:typeof v,subject:y,teacherId:x,caseManagerId:E,finalValue:e.form.schedule[v],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):h("UPDATE_SUBJECT_BLOCKED",{reason:"No teacher ID",period:v})},g=v=>{var E;h("TOGGLE_START",{period:v,currentValue:e.form.schedule[v],formVersion:e.formVersion});const y=i(v);if(!y){h("TOGGLE_BLOCKED",{reason:"No teacher selected",period:v});return}const x=c(v);if(h("TOGGLE_STATE",{period:v,isActive:x,teacherId:y,beforeValue:e.form.schedule[v]}),x)e.form.schedule[v]=y;else{const I={teacherId:y,coTeaching:{caseManagerId:((E=n.value[0])==null?void 0:E.id)||"",subject:s.value[0]||""}};e.form.schedule[v]=I,setTimeout(()=>{var P;console.log(" CO-TEACHING PERSISTENCE CHECK - 100ms later:",{period:v,stillExists:!!e.form.schedule[v],currentValue:e.form.schedule[v],isObject:typeof e.form.schedule[v]=="object",hasCoTeaching:!!((P=e.form.schedule[v])!=null&&P.coTeaching)})},100),setTimeout(()=>{var P;console.log(" CO-TEACHING PERSISTENCE CHECK - 1000ms later:",{period:v,stillExists:!!e.form.schedule[v],currentValue:e.form.schedule[v],isObject:typeof e.form.schedule[v]=="object",hasCoTeaching:!!((P=e.form.schedule[v])!=null&&P.coTeaching)})},1e3)}h("TOGGLE_COMPLETE",{period:v,afterValue:e.form.schedule[v],formVersion:e.formVersion}),console.log(" CO-TEACHING DEBUG - Toggle Complete:",{period:v,periodType:typeof v,isActive:!x,finalValue:e.form.schedule[v],entireSchedule:JSON.stringify(e.form.schedule,null,2),availableCaseManagers:n.value.length,availableSubjects:s.value.length})};return Ut(()=>e.form.schedule,(v,y)=>{console.log(" SCHEDULE WATCHER - Schedule changed:",{timestamp:new Date().toISOString(),newSchedule:JSON.stringify(v,null,2),oldSchedule:JSON.stringify(y,null,2),periodsWithObjects:Object.keys(v).filter(x=>typeof v[x]=="object"),periodsWithCoTeaching:Object.keys(v).filter(x=>{var E;return(E=v[x])==null?void 0:E.coTeaching})})},{deep:!0}),(v,y)=>(L(),U("fieldset",zU,[y[7]||(y[7]=f("legend",null,"Schedule",-1)),f("div",KU,[(L(!0),U(Fe,null,Ve(t.periods,x=>(L(),U("div",{key:x,class:"period-row"},[f("div",qU,[f("label",XU,Q(Z(r)(x))+":",1),f("select",{value:i(x),onChange:E=>a(x,E.target.value),class:"teacher-select"},[y[0]||(y[0]=f("option",{value:""},"--",-1)),(L(!0),U(Fe,null,Ve(t.userRoles.teachers,E=>(L(),U("option",{key:E.id,value:E.id},Q(E.name||E.email||E.id),9,JU))),128))],40,YU),f("button",{type:"button",class:Ze(["coteaching-toggle",{active:c(x)}]),disabled:!i(x),onClick:E=>g(x),title:"Co-Teaching"}," C ",10,QU)]),c(x)?(L(),U("div",ZU,[f("div",e$,[y[1]||(y[1]=f("span",{class:"coteaching-label"},"Co-Teaching:",-1)),f("span",t$,Q(o(i(x))),1),y[2]||(y[2]=f("span",{class:"plus-sign"},"+",-1)),f("span",r$,Q(l(u(x))),1)]),f("div",n$,[y[4]||(y[4]=f("label",{class:"config-label"},"Subject:",-1)),f("select",{value:d(x),onChange:E=>m(x,E.target.value),class:"subject-select",required:""},[y[3]||(y[3]=f("option",{value:""},"-- Select Subject --",-1)),(L(!0),U(Fe,null,Ve(s.value,E=>(L(),U("option",{key:E,value:E},Q(E),9,a$))),128))],40,s$)]),f("div",i$,[y[6]||(y[6]=f("label",{class:"config-label"},"Case Manager:",-1)),f("select",{value:u(x),onChange:E=>p(x,E.target.value),class:"cm-select",required:""},[y[5]||(y[5]=f("option",{value:""},"-- Select Case Manager --",-1)),(L(!0),U(Fe,null,Ve(n.value,E=>(L(),U("option",{key:E.id,value:E.id},Q(E.name||E.email||E.id),9,l$))),128))],40,o$)])])):Se("",!0)]))),128))])]))}},u$=xt(c$,[["__scopeId","data-v-eee60512"]]),d$={class:"checkbox-inline-group"},f$=["value","checked","onChange"],Z_={__name:"ServiceCheckboxGroup",props:["label","items","modelValue"],emits:["update:modelValue"],setup(t,{emit:e}){const r=t,n=e;function s(i){const a=r.label+": "+i,o=r.modelValue?[...r.modelValue]:[],l=o.indexOf(a);l===-1?o.push(a):o.splice(l,1),n("update:modelValue",o)}return(i,a)=>(L(),U("fieldset",null,[f("legend",null,Q(t.label),1),f("div",d$,[(L(!0),U(Fe,null,Ve(t.items,o=>(L(),U("label",{key:o},[f("input",{type:"checkbox",value:t.label+": "+o,checked:t.modelValue&&t.modelValue.includes(t.label+": "+o),onChange:l=>s(o)},null,40,f$),Oe(" "+Q(o),1)]))),128))])]))}},h$={class:"form-col"},p$={class:"inner-grid-3"},m$={key:0,class:"loading-message"},g$={key:1,class:"error-message"},v$={style:{display:"none"}},x$={key:3,class:"no-services-message"},y$={__name:"StudentClassServices",props:{form:{type:Object,required:!0},availableClassServices:{type:Array,required:!0},appSettingsLoading:{type:Boolean,default:!1},appSettingsError:{type:String,default:null}},setup(t){const e=t,r=_e(()=>e.availableClassServices.filter(s=>s.name!=="Co-teach")),n=_e(()=>e.availableClassServices.filter(s=>s.name==="Co-teach"));return(s,i)=>(L(),U("fieldset",h$,[i[5]||(i[5]=f("legend",null,"Services: classes",-1)),f("div",p$,[t.appSettingsLoading?(L(),U("div",m$,i[2]||(i[2]=[f("span",{class:"loading-spinner"},"",-1),Oe(" Loading app settings... ")]))):t.appSettingsError?(L(),U("div",g$,[i[3]||(i[3]=f("span",{class:"error-icon"},"",-1)),Oe(" Error loading app settings: "+Q(t.appSettingsError),1)])):t.availableClassServices.length>0?(L(),U(Fe,{key:2},[(L(!0),U(Fe,null,Ve(r.value,a=>(L(),Xr(Z_,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[0]||(i[0]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128)),f("div",v$,[(L(!0),U(Fe,null,Ve(n.value,a=>(L(),Xr(Z_,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[1]||(i[1]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128))])],64)):(L(),U("div",x$,i[4]||(i[4]=[f("span",{class:"info-icon"},"",-1),Oe(" No class services configured. "),f("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},E$=xt(y$,[["__scopeId","data-v-d750acb2"]]),b$=["id","value"],_$=["value"],e2={__name:"ServiceSelect",props:["id","label","list","modelValue"],emits:["update:modelValue"],setup(t){return(e,r)=>(L(),U("label",null,[Oe(Q(t.label)+": ",1),f("select",{id:t.id,value:t.modelValue,onChange:r[0]||(r[0]=n=>e.$emit("update:modelValue",n.target.value))},[r[1]||(r[1]=f("option",{value:""},"--",-1)),(L(!0),U(Fe,null,Ve(t.list,n=>(L(),U("option",{key:n.id,value:n.id},Q(n.name),9,_$))),128))],40,b$)]))}},S$={class:"inner-grid-3"},T$={key:1,class:"no-services-message"},w$={__name:"StudentProviders",props:{form:{type:Object,required:!0},serviceProviders:{type:Array,required:!0},customServiceProviders:{type:Array,required:!0},providerFieldMap:{type:Object,required:!0},getProviderLabel:{type:Function,required:!0},getProviderUsers:{type:Function,required:!0}},setup(t){return(e,r)=>(L(),U("fieldset",null,[r[1]||(r[1]=f("legend",null,"Services: providers",-1)),f("div",S$,[t.serviceProviders.length>0?(L(),U(Fe,{key:0},[(L(!0),U(Fe,null,Ve(t.serviceProviders,n=>(L(),Xr(e2,{key:n,id:n,label:t.getProviderLabel(n),list:t.getProviderUsers(n),modelValue:t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`]=s},null,8,["id","label","list","modelValue","onUpdate:modelValue"]))),128)),(L(!0),U(Fe,null,Ve(t.customServiceProviders,n=>(L(),Xr(e2,{key:n,id:n,label:n,list:[],modelValue:t.form[`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[`${n.toLowerCase()}Id`]=s},null,8,["id","label","modelValue","onUpdate:modelValue"]))),128))],64)):(L(),U("div",T$,r[0]||(r[0]=[f("span",{class:"info-icon"},"",-1),Oe(" No service providers configured. "),f("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},A$=xt(w$,[["__scopeId","data-v-faa02238"]]),C$={class:"form-col"},I$={class:"document-section"},k$={key:0,class:"current-file"},D$={key:1,class:"removed-file"},P$={key:2,class:"upload-status loading-pulse"},F$={key:3,class:"error-message"},R$={class:"document-section"},O$={key:0,class:"current-file"},N$={key:1,class:"removed-file"},M$={key:2,class:"upload-status loading-pulse"},L$={__name:"StudentDocuments",props:{form:{type:Object,required:!0},student:{type:Object,default:()=>({})},mode:{type:String,default:"new"},onFileChange:{type:Function,required:!0},removeBipFile:{type:Function,required:!0},removeAtaglanceFile:{type:Function,required:!0}},emits:["loading-change"],setup(t,{emit:e}){const r=t,n=e,{uploadPdf:s,downloadPdf:i,isUploading:a,error:o}=Cx(),l=ne(null),c=_e(()=>a.value||l.value!==null);Ut(c,p=>{n("loading-change",p)},{immediate:!0});const u=_e(()=>{var m,g,v,y;const p=((m=r.student)==null?void 0:m.id)||((g=r.form)==null?void 0:g.id);return console.log(" StudentDocuments - studentId computed:",{studentId:(v=r.student)==null?void 0:v.id,formId:(y=r.form)==null?void 0:y.id,finalId:p}),p}),d=async(p,m)=>{const g=p.target.files[0]||null;if(g){const v=Oc(g,{allowedTypes:["pdf"],maxSize:10485760,fieldName:m==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!v.isValid){alert(v.error),p.target.value="";return}const y=Hr(g.name);if(!y.isSafe){alert(`File name contains potentially dangerous content: ${y.threats.join(", ")}`),p.target.value="";return}try{if(l.value=m==="bipFile"?"bip":"ataglance",!u.value)throw new Error("Student ID is required for secure file upload");const x=m==="bipFile"?r.form.bipPdfUrl:r.form.ataglancePdfUrl;if(x){console.log(` Cleaning up old ${m} file:`,x);try{const{ref:I,deleteObject:P}=await ra(async()=>{const{ref:k,deleteObject:A}=await Promise.resolve().then(()=>cM);return{ref:k,deleteObject:A}},void 0),{doc:w,deleteDoc:b}=await ra(async()=>{const{doc:k,deleteDoc:A}=await Promise.resolve().then(()=>KN);return{doc:k,deleteDoc:A}},void 0),{storage:T,db:_}=await ra(async()=>{const{storage:k,db:A}=await Promise.resolve().then(()=>m4);return{storage:k,db:A}},void 0),S=I(T,`students/${u.value}/${x}`);await P(S),await b(w(_,"pdfMetadata",x)),console.log(` Old ${m} file cleaned up:`,x)}catch(I){console.warn(`Failed to clean up old ${m} file:`,I.message)}}const E=await s(g,u.value);m==="bipFile"?(Object.assign(r.form,{bipPdfUrl:E,bipFileName:g.name}),console.log(" BIP file updated in form:",{bipPdfUrl:r.form.bipPdfUrl,bipFileName:r.form.bipFileName})):(Object.assign(r.form,{ataglancePdfUrl:E,ataglanceFileName:g.name}),console.log(" At-A-Glance file updated in form:",{ataglancePdfUrl:r.form.ataglancePdfUrl,ataglanceFileName:r.form.ataglanceFileName})),console.log(` Secure PDF uploaded: ${E}`),console.log(" Current form state:",{bipPdfUrl:r.form.bipPdfUrl,bipFileName:r.form.bipFileName,ataglancePdfUrl:r.form.ataglancePdfUrl,ataglanceFileName:r.form.ataglanceFileName})}catch(x){console.error("Secure PDF upload failed:",x),alert(`Failed to upload PDF: ${x.message}`)}finally{l.value=null,p.target.value=""}}r.onFileChange(p,m)},h=async p=>{try{const m=p==="bip"?r.form.bipPdfUrl:r.form.ataglancePdfUrl,g=p==="bip"?r.form.bipFileName:r.form.ataglanceFileName;if(!m||!u.value)throw new Error("File not found or student ID missing");await i(m,u.value,g)}catch(m){console.error("Secure PDF download failed:",m),alert(`Failed to download PDF: ${m.message}`)}};return(p,m)=>(L(),U("fieldset",C$,[m[16]||(m[16]=f("legend",null,"Documents",-1)),f("div",I$,[f("label",null,[m[11]||(m[11]=Oe(" BIP: ")),f("input",{type:"file",accept:"application/pdf",onChange:m[0]||(m[0]=g=>d(g,"bipFile"))},null,32),t.form.bipPdfUrl&&!t.form.removeBipFile?(L(),U("span",k$,[m[8]||(m[8]=Oe(" Current: ")),f("a",{href:"#",onClick:m[1]||(m[1]=hn(g=>h("bip"),["prevent"])),target:"_blank"},"View BIP"),f("button",{type:"button",onClick:m[2]||(m[2]=(...g)=>t.removeBipFile&&t.removeBipFile(...g)),class:"btn-remove"},"  Remove ")])):Se("",!0),t.form.removeBipFile?(L(),U("span",D$,[m[9]||(m[9]=Oe(" BIP file will be removed ")),f("button",{type:"button",onClick:m[3]||(m[3]=g=>t.form.removeBipFile=!1),class:"btn-undo"},"  Undo ")])):Se("",!0),Z(a)&&l.value==="bip"?(L(),U("div",P$,m[10]||(m[10]=[f("span",{class:"loading-spinner"},"",-1),f("strong",null,"Loading... Uploading BIP document...",-1)]))):Se("",!0),Z(o)?(L(),U("div",F$,Q(Z(o)),1)):Se("",!0)])]),f("div",R$,[f("label",null,[m[15]||(m[15]=Oe(" At-A-Glance PDF: ")),f("input",{type:"file",accept:"application/pdf",onChange:m[4]||(m[4]=g=>d(g,"ataglanceFile"))},null,32),t.form.ataglancePdfUrl&&!t.form.removeAtaglanceFile?(L(),U("span",O$,[m[12]||(m[12]=Oe(" Current: ")),f("a",{href:"#",onClick:m[5]||(m[5]=hn(g=>h("ataglance"),["prevent"])),target:"_blank"},"View At-A-Glance"),f("button",{type:"button",onClick:m[6]||(m[6]=(...g)=>t.removeAtaglanceFile&&t.removeAtaglanceFile(...g)),class:"btn-remove"},"  Remove ")])):Se("",!0),t.form.removeAtaglanceFile?(L(),U("span",N$,[m[13]||(m[13]=Oe(" At-A-Glance file will be removed ")),f("button",{type:"button",onClick:m[7]||(m[7]=g=>t.form.removeAtaglanceFile=!1),class:"btn-undo"},"  Undo ")])):Se("",!0),Z(a)&&l.value==="ataglance"?(L(),U("div",M$,m[14]||(m[14]=[f("span",{class:"loading-spinner"},"",-1),f("strong",null,"Loading... Uploading At-A-Glance document...",-1)]))):Se("",!0)])])]))}},B$=xt(L$,[["__scopeId","data-v-078af5f3"]]),U$={class:"form-col"},$$={class:"inner-grid-2"},V$={__name:"StudentAccommodations",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(L(),U("fieldset",U$,[r[4]||(r[4]=f("legend",null,"Accommodations",-1)),f("div",$$,[f("label",null,[r[2]||(r[2]=Oe(" Instruction: ")),Ae(f("textarea",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.instruction=n),placeholder:"Enter instructional accommodations..."},null,512),[[Je,t.form.instruction]])]),f("label",null,[r[3]||(r[3]=Oe(" Assessment: ")),Ae(f("textarea",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.assessment=n),placeholder:"Enter assessment accommodations..."},null,512),[[Je,t.form.assessment]])])])]))}},j$=xt(V$,[["__scopeId","data-v-4ce4f379"]]),H$={class:"flags-container"},G$={class:"checkbox-label"},W$={class:"checkbox-label"},z$={__name:"StudentFlags",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(L(),U("fieldset",null,[r[4]||(r[4]=f("legend",null,"Flags",-1)),f("div",H$,[f("label",G$,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=n=>t.form.flag1=n)},null,512),[[Et,t.form.flag1]]),r[2]||(r[2]=Oe(" Preferential seating "))]),f("label",W$,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=n=>t.form.flag2=n)},null,512),[[Et,t.form.flag2]]),r[3]||(r[3]=Oe(" Separate setting "))])])]))}},K$=xt(z$,[["__scopeId","data-v-e7295a7a"]]),q$={class:"dialog-backdrop"},X$={class:"dialog"},Y$=["disabled"],J$={__name:"StudentForm",props:{student:{type:Object,default:()=>({})},users:{type:Object,required:!0},mode:{type:String,default:"new"}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{form:s,isSaving:i,appSettings:a,appSettingsLoading:o,appSettingsError:l,periods:c,gradeOptions:u,availableClassServices:d,serviceProviders:h,customServiceProviders:p,userRoles:m,onFileChange:g,removeBipFile:v,removeAtaglanceFile:y,providerFieldMap:x,getProviderLabel:E,getProviderUsers:I,handleSubmit:P}=BU(r,n),w=ne(!1),b=_e(()=>i.value||w.value),T=_e(()=>w.value?"Loading files...":i.value?"Saving...":r.mode==="edit"?"Save":"Add Student"),_=S=>{w.value=S};return(S,k)=>(L(),U("div",q$,[f("div",X$,[f("header",null,[f("h2",null,Q(t.mode==="edit"?"Edit Student":"Add Student"),1),f("button",{onClick:k[0]||(k[0]=A=>S.$emit("close")),class:"close-btn"},"")]),f("form",{onSubmit:k[2]||(k[2]=hn((...A)=>Z(P)&&Z(P)(...A),["prevent"])),id:"student-form"},[st(WU,{form:Z(s),mode:t.mode,"grade-options":Z(u),"user-roles":Z(m)},null,8,["form","mode","grade-options","user-roles"]),st(u$,{form:Z(s),periods:Z(c),"user-roles":Z(m),"app-settings":Z(a)},null,8,["form","periods","user-roles","app-settings"]),st(E$,{form:Z(s),"available-class-services":Z(d),"app-settings-loading":Z(o),"app-settings-error":Z(l)},null,8,["form","available-class-services","app-settings-loading","app-settings-error"]),st(A$,{form:Z(s),"service-providers":Z(h),"custom-service-providers":Z(p),"provider-field-map":Z(x),"get-provider-label":Z(E),"get-provider-users":Z(I)},null,8,["form","service-providers","custom-service-providers","provider-field-map","get-provider-label","get-provider-users"]),st(B$,{form:Z(s),student:t.student,mode:t.mode,"on-file-change":Z(g),"remove-bip-file":Z(v),"remove-ataglance-file":Z(y),onLoadingChange:_},null,8,["form","student","mode","on-file-change","remove-bip-file","remove-ataglance-file"]),st(j$,{form:Z(s)},null,8,["form"]),st(K$,{form:Z(s)},null,8,["form"]),f("footer",null,[f("button",{type:"button",onClick:k[1]||(k[1]=A=>S.$emit("close")),class:"btn btn-secondary"}," Cancel "),f("button",{type:"submit",class:"btn btn-primary",disabled:b.value},Q(T.value),9,Y$)])],32)])]))}},Ix=xt(J$,[["__scopeId","data-v-7363b0d2"]]),Q$={key:0},Z$={key:1,class:"loading-dialog"},eV={__name:"StudentEditDialog",props:{studentId:{type:String,required:!0},users:{type:Object,required:!0}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{students:s,fetchStudents:i}=Oa(),a=_e(()=>{const l=s.value.find(c=>c.id===r.studentId);return console.log("StudentEditDialog - studentId:",r.studentId),console.log("StudentEditDialog - all students:",s.value),console.log("StudentEditDialog - found student:",l),l||{}});Bt(async()=>{s.value.length===0&&(console.log("StudentEditDialog - fetching students..."),await i())});function o(l){console.log("StudentEditDialog - student saved:",l),n("saved",l)}return(l,c)=>a.value&&Object.keys(a.value).length>0?(L(),U("div",Q$,[st(Ix,{student:a.value,users:t.users,mode:"edit",onClose:c[0]||(c[0]=u=>l.$emit("close")),onSaved:o},null,8,["student","users"])])):(L(),U("div",Z$,c[1]||(c[1]=[f("div",{class:"dialog"},[f("header",null,[f("h2",null,"Loading Student Data...")]),f("div",{class:"content"},[f("p",null,"Please wait while we load the student information.")])],-1)])))}},tV=xt(eV,[["__scopeId","data-v-0410ea60"]]),rV={class:"dialog-backdrop"},nV={class:"dialog"},sV={class:"button-group"},aV={key:0,class:"members-list"},iV={key:0,class:"email"},oV=["value"],lV={class:"docs-option"},cV={key:0,class:"no-docs"},uV=["disabled"],dV=["disabled"],fV={__name:"StudentsEmailDialog",props:{student:{type:Object,required:!0},userMap:{type:Object,required:!0}},emits:["close"],setup(t){const e=t,{student:r,userMap:n}=e,s=ne(""),i=ne([]),a=ne(!1),o=_e(()=>{var y,x;if((x=(y=r.app)==null?void 0:y.schedule)!=null&&x.periods){const E=[];return Object.values(r.app.schedule.periods).forEach(I=>{var w;const P=typeof I=="string"?I:I==null?void 0:I.teacherId;P&&E.push(P),(w=I==null?void 0:I.coTeaching)!=null&&w.caseManagerId&&E.push(I.coTeaching.caseManagerId)}),E}const v=r.schedule||{};return Object.values(v).filter(Boolean)}),l=_e(()=>[...new Set(o.value)]),c=_e(()=>{var y;const v=[];(y=r.app)!=null&&y.providers&&Object.entries(r.app.providers).forEach(([x,E])=>{E&&!["caseManagerId"].includes(x)&&v.push(E)});for(const x in r)x.endsWith("_id")&&!["casemanager_id","caseManagerId"].includes(x)&&r[x]&&v.push(r[x]);return[...new Set(v)].filter(x=>!l.value.includes(x))}),u=_e(()=>l.value.map(v=>({id:v,...n[v]||{}})).filter(v=>v&&v.email)),d=_e(()=>c.value.map(v=>({id:v,...n[v]||{}})).filter(v=>v&&v.email)),h=_e(()=>[...u.value,...d.value]),p=_e(()=>{var v,y,x,E;return!!((y=(v=r.app)==null?void 0:v.documents)!=null&&y.ataglancePdfUrl||(E=(x=r.app)==null?void 0:x.documents)!=null&&E.bipPdfUrl||r.ataglancePdfUrl||r.ataglance_pdf_url||r.bipPdfUrl||r.bip_pdf_url)}),m=_e(()=>s.value?s.value==="Individual"?i.value.length>0:!0:!1);function g(){var _,S,k,A,D,N,R,F,O,B,V;let v=[];s.value==="Teachers"?v=u.value:s.value==="TeachersAndService"?v=[...u.value,...d.value]:s.value==="Individual"&&(v=h.value.filter(z=>i.value.includes(z.id)));const y=v.map(z=>z.email).filter(Boolean).join(",");if(!y){alert("No email addresses found for the selected recipients.");return}console.log(" Student data for email:",{student:r,firstName:r.firstName,first_name:r.first_name,lastName:r.lastName,last_name:r.last_name,appStudentData:(_=r.app)==null?void 0:_.studentData});const x=r.firstName||r.first_name||((k=(S=r.app)==null?void 0:S.studentData)==null?void 0:k.firstName)||((A=r.app)==null?void 0:A.firstName)||"",E=r.lastName||r.last_name||((N=(D=r.app)==null?void 0:D.studentData)==null?void 0:N.lastName)||((R=r.app)==null?void 0:R.lastName)||"";console.log(" Extracted names:",{firstName:x,lastName:E});const I=`${x} ${E}`.trim()||"Student",P=(((x==null?void 0:x[0])||"")+((E==null?void 0:E[0])||"")).toUpperCase()||"ST";console.log(" Final values:",{fullName:I,initials:P});const w=`${P} - Student Update`;let b="";if(a.value){b+=`Hi team!

${I}'s updated documents are available in the CaseManage app.

`;const z=((O=(F=r.app)==null?void 0:F.documents)==null?void 0:O.ataglancePdfUrl)||r.ataglancePdfUrl||r.ataglance_pdf_url,H=((V=(B=r.app)==null?void 0:B.documents)==null?void 0:V.bipPdfUrl)||r.bipPdfUrl||r.bip_pdf_url;z||H?(b+=`Available documents:
`,z&&(b+=` At-A-Glance
`),H&&(b+=` BIP (Behavior Intervention Plan)
`),b+=`
To access the documents:
`,b+=`Log into the CaseManage app: ${window.location.origin}
`,b+=`Navigate to the student's record to view their documents.

`,b+=`The documents require authentication to view for security purposes.
`):(b+=`No documents are currently available for ${I}.

`,b+=`If documents are added, you can access them by logging into:
`,b+=`${window.location.origin}
`)}else b="See attached.";console.log(" Email composition:",{subject:w,body:b});const T=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(y)}&su=${encodeURIComponent(w)}&body=${encodeURIComponent(b)}`;window.open(T,"_blank","noopener")}return(v,y)=>(L(),U("div",rV,[f("div",nV,[f("header",null,[f("h2",null,"Email about "+Q(Z(r).firstName||Z(r).first_name)+" "+Q(Z(r).lastName||Z(r).last_name),1),f("button",{onClick:y[0]||(y[0]=x=>v.$emit("close")),title:"Close"},"")]),f("main",null,[f("form",{onSubmit:y[6]||(y[6]=hn(()=>{},["prevent"]))},[f("div",sV,[f("button",{type:"button",class:Ze(["option-button",{active:s.value==="Teachers"}]),onClick:y[1]||(y[1]=x=>s.value="Teachers")}," Teachers ",2),f("button",{type:"button",class:Ze(["option-button",{active:s.value==="TeachersAndService"}]),onClick:y[2]||(y[2]=x=>s.value="TeachersAndService")}," Teachers and service providers ",2),f("button",{type:"button",class:Ze(["option-button",{active:s.value==="Individual"}]),onClick:y[3]||(y[3]=x=>s.value="Individual")}," Individual member of the IEP team ",2)]),s.value==="Individual"?(L(),U("div",aV,[y[8]||(y[8]=f("div",null,"Select members:",-1)),(L(!0),U(Fe,null,Ve(h.value,x=>(L(),U("div",{key:x.id},[f("label",null,[f("span",null,[Oe(Q(x.name||x.displayName||x.email||x.id)+" ",1),x.email?(L(),U("span",iV,"("+Q(x.email)+")",1)):Se("",!0)]),Ae(f("input",{type:"checkbox",value:x.id,"onUpdate:modelValue":y[4]||(y[4]=E=>i.value=E)},null,8,oV),[[Et,i.value]])])]))),128))])):Se("",!0),f("div",lV,[f("label",null,[f("span",null,[y[9]||(y[9]=Oe(" Include documents ")),p.value?Se("",!0):(L(),U("span",cV,"(No docs available)"))]),Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[5]||(y[5]=x=>a.value=x),disabled:!p.value},null,8,uV),[[Et,a.value]])])])],32)]),f("footer",null,[f("button",{onClick:y[7]||(y[7]=x=>v.$emit("close"))},"Cancel"),f("button",{disabled:!m.value,onClick:g},"Send",8,dV)])])]))}},hV=xt(fV,[["__scopeId","data-v-0e59eb1d"]]),pV={class:"dialog-backdrop"},mV={class:"dialog"},gV={class:"field-groups"},vV={class:"field-group"},xV={class:"field-group"},yV={class:"field-group"},EV={class:"field-group"},bV={class:"field-group"},_V={class:"field-group"},SV=["disabled"],TV={__name:"ExportDialog",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})}},emits:["close"],setup(t,{emit:e}){const r=t,n=e,s=pa(),i=Ex(),a=ne({studentData:{firstName:!0,lastName:!0,grade:!0,plan:!0,caseManagerId:!0},dates:{reviewDate:!0,reevalDate:!0,meetingDate:!0},providers:{all:!0},accommodations:{instruction:!0,assessment:!0},schedule:{periods:!0,classServices:!0},documents:{ataglancePdfUrl:!0,bipPdfUrl:!0}}),o=["speechId","otId","mhId","ptId","scId","trId","audId","viId","atId","dhhId","omId","bisId","hnId","swId"],l=_e(()=>Object.values(a.value).some(v=>Object.values(v).some(y=>y)));function c(v){if(!v||!r.userMap[v])return"";const y=r.userMap[v];return y.name||y.email||""}function u(v){const y=i.userPermissions||[];return Array.isArray(y)&&y.includes(v)}function d(){Object.keys(a.value).forEach(v=>{Object.keys(a.value[v]).forEach(y=>{a.value[v][y]=!0})})}function h(){Object.keys(a.value).forEach(v=>{Object.keys(a.value[v]).forEach(y=>{a.value[v][y]=!1})})}function p(v){var I,P,w,b,T,_,S,k,A,D,N,R,F,O,B,V,z,H,j,W,K,re,he,ue,pe,te,Y,Ee,X,q,J,ge;const y=s.currentUser;if((y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="administrator"||(y==null?void 0:y.role)==="sped_chair"||(y==null?void 0:y.role)==="administrator_504_CM")return m(v);const E={};return a.value.studentData.firstName&&(E.firstName=(P=(I=v.app)==null?void 0:I.studentData)==null?void 0:P.firstName),a.value.studentData.lastName&&(E.lastName=(b=(w=v.app)==null?void 0:w.studentData)==null?void 0:b.lastName),a.value.studentData.grade&&(E.grade=(_=(T=v.app)==null?void 0:T.studentData)==null?void 0:_.grade),a.value.studentData.plan&&(E.plan=(k=(S=v.app)==null?void 0:S.studentData)==null?void 0:k.plan),a.value.studentData.caseManagerId&&(E.caseManagerId=(D=(A=v.app)==null?void 0:A.studentData)==null?void 0:D.caseManagerId),u("view_student_dates")&&(a.value.dates.reviewDate&&(E.reviewDate=(R=(N=v.app)==null?void 0:N.dates)==null?void 0:R.reviewDate),a.value.dates.reevalDate&&(E.reevalDate=(O=(F=v.app)==null?void 0:F.dates)==null?void 0:O.reevalDate),a.value.dates.meetingDate&&(E.meetingDate=(V=(B=v.app)==null?void 0:B.dates)==null?void 0:V.meetingDate)),(u("view_service_providers")||((H=(z=v.app)==null?void 0:z.studentData)==null?void 0:H.caseManagerId)===(y==null?void 0:y.uid)||o.some(ae=>{var se,le;return((le=(se=v.app)==null?void 0:se.providers)==null?void 0:le[ae])===(y==null?void 0:y.uid)}))&&a.value.providers.all&&o.forEach(ae=>{var se,le;E[ae]=(le=(se=v.app)==null?void 0:se.providers)==null?void 0:le[ae]}),u("view_accommodations")&&(a.value.accommodations.instruction&&(E.instruction=(W=(j=v.app)==null?void 0:j.accommodations)==null?void 0:W.instruction),a.value.accommodations.assessment&&(E.assessment=(re=(K=v.app)==null?void 0:K.accommodations)==null?void 0:re.assessment)),(u("view_schedule")||Object.values(((ue=(he=v.app)==null?void 0:he.schedule)==null?void 0:ue.periods)||{}).includes(y==null?void 0:y.uid))&&(a.value.schedule.periods&&(E.schedule=(te=(pe=v.app)==null?void 0:pe.schedule)==null?void 0:te.periods),a.value.schedule.classServices&&(E.classServices=(Ee=(Y=v.app)==null?void 0:Y.schedule)==null?void 0:Ee.classServices)),u("view_documents")&&(a.value.documents.ataglancePdfUrl&&(E.ataglancePdfUrl=(q=(X=v.app)==null?void 0:X.documents)==null?void 0:q.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(E.bipPdfUrl=(ge=(J=v.app)==null?void 0:J.documents)==null?void 0:ge.bipPdfUrl)),E}function m(v){var x,E,I,P,w,b,T,_,S,k,A,D,N,R,F,O,B,V,z,H,j,W,K,re,he,ue,pe,te;const y={};return a.value.studentData.firstName&&(y.firstName=(E=(x=v.app)==null?void 0:x.studentData)==null?void 0:E.firstName),a.value.studentData.lastName&&(y.lastName=(P=(I=v.app)==null?void 0:I.studentData)==null?void 0:P.lastName),a.value.studentData.grade&&(y.grade=(b=(w=v.app)==null?void 0:w.studentData)==null?void 0:b.grade),a.value.studentData.plan&&(y.plan=(_=(T=v.app)==null?void 0:T.studentData)==null?void 0:_.plan),a.value.studentData.caseManagerId&&(y.caseManagerId=(k=(S=v.app)==null?void 0:S.studentData)==null?void 0:k.caseManagerId),a.value.dates.reviewDate&&(y.reviewDate=(D=(A=v.app)==null?void 0:A.dates)==null?void 0:D.reviewDate),a.value.dates.reevalDate&&(y.reevalDate=(R=(N=v.app)==null?void 0:N.dates)==null?void 0:R.reevalDate),a.value.dates.meetingDate&&(y.meetingDate=(O=(F=v.app)==null?void 0:F.dates)==null?void 0:O.meetingDate),a.value.providers.all&&o.forEach(Y=>{var Ee,X;y[Y]=(X=(Ee=v.app)==null?void 0:Ee.providers)==null?void 0:X[Y]}),a.value.accommodations.instruction&&(y.instruction=(V=(B=v.app)==null?void 0:B.accommodations)==null?void 0:V.instruction),a.value.accommodations.assessment&&(y.assessment=(H=(z=v.app)==null?void 0:z.accommodations)==null?void 0:H.assessment),a.value.schedule.periods&&(y.schedule=(W=(j=v.app)==null?void 0:j.schedule)==null?void 0:W.periods),a.value.schedule.classServices&&(y.classServices=(re=(K=v.app)==null?void 0:K.schedule)==null?void 0:re.classServices),a.value.documents.ataglancePdfUrl&&(y.ataglancePdfUrl=(ue=(he=v.app)==null?void 0:he.documents)==null?void 0:ue.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(y.bipPdfUrl=(te=(pe=v.app)==null?void 0:pe.documents)==null?void 0:te.bipPdfUrl),y}function g(){const v=r.students.map(T=>p(T)),y=[],x=[],E={firstName:"First Name",lastName:"Last Name",grade:"Grade",plan:"Plan Type",caseManagerId:"Case Manager",reviewDate:"Plan Review",reevalDate:"Reevaluation",meetingDate:"Meeting Date",speechId:"Speech",otId:"OT",mhId:"Mental Health",ptId:"PT",scId:"SC",trId:"TR",audId:"Audiology",viId:"Vision",atId:"AT",dhhId:"DHH",omId:"O&M",bisId:"BIS",hnId:"HN",swId:"SW",instruction:"Instructional Accommodation",assessment:"Assessment Accommodations",schedule:"Schedule",classServices:"Class Services",ataglancePdfUrl:"At-A-Glance",bipPdfUrl:"BIP"};Object.entries(a.value).forEach(([T,_])=>{Object.entries(_).forEach(([S,k])=>{k&&(S==="all"?o.forEach(A=>{y.push(E[A])}):y.push(E[S]))})}),v.forEach(T=>{const _=[];Object.entries(a.value).forEach(([S,k])=>{Object.entries(k).forEach(([A,D])=>{if(D)if(A==="all")o.forEach(N=>{const R=T[N]||"";_.push(R?c(R):"")});else{let N=T[A]||"";A.endsWith("Id")?N=N?c(N):"":A==="classServices"?N=Array.isArray(T.classServices)?T.classServices.join(", "):"":A==="schedule"&&(N=T.schedule?Object.entries(T.schedule).map(([R,F])=>`${R}: ${c(F)}`).join("; "):""),_.push(N)}})}),x.push(_)});const I=[y.join(","),...x.map(T=>T.map(_=>`"${String(_).replace(/"/g,'""')}"`).join(","))].join(`
`),P=new Blob([I],{type:"text/csv"}),w=window.URL.createObjectURL(P),b=document.createElement("a");b.href=w,b.download="students-export.csv",b.click(),window.URL.revokeObjectURL(w),n("close")}return(v,y)=>(L(),U("div",pV,[f("div",mV,[f("header",null,[y[17]||(y[17]=f("h2",null,"Export Students",-1)),f("button",{onClick:y[0]||(y[0]=x=>v.$emit("close")),class:"close-btn"},"")]),f("main",null,[f("p",null,"Export "+Q(t.students.length)+" students",1),f("div",gV,[f("div",vV,[y[23]||(y[23]=f("h4",null,"Student Info",-1)),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[1]||(y[1]=x=>a.value.studentData.firstName=x)},null,512),[[Et,a.value.studentData.firstName]]),y[18]||(y[18]=Oe(" First Name "))]),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[2]||(y[2]=x=>a.value.studentData.lastName=x)},null,512),[[Et,a.value.studentData.lastName]]),y[19]||(y[19]=Oe(" Last Name "))]),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[3]||(y[3]=x=>a.value.studentData.grade=x)},null,512),[[Et,a.value.studentData.grade]]),y[20]||(y[20]=Oe(" Grade "))]),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[4]||(y[4]=x=>a.value.studentData.plan=x)},null,512),[[Et,a.value.studentData.plan]]),y[21]||(y[21]=Oe(" Plan Type "))]),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[5]||(y[5]=x=>a.value.studentData.caseManagerId=x)},null,512),[[Et,a.value.studentData.caseManagerId]]),y[22]||(y[22]=Oe(" Case Manager "))])]),f("div",xV,[y[27]||(y[27]=f("h4",null,"Important Dates",-1)),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[6]||(y[6]=x=>a.value.dates.reviewDate=x)},null,512),[[Et,a.value.dates.reviewDate]]),y[24]||(y[24]=Oe(" Plan Review "))]),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[7]||(y[7]=x=>a.value.dates.reevalDate=x)},null,512),[[Et,a.value.dates.reevalDate]]),y[25]||(y[25]=Oe(" Reevaluation "))]),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[8]||(y[8]=x=>a.value.dates.meetingDate=x)},null,512),[[Et,a.value.dates.meetingDate]]),y[26]||(y[26]=Oe(" Meeting Date "))])]),f("div",yV,[y[29]||(y[29]=f("h4",null,"Related Services",-1)),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[9]||(y[9]=x=>a.value.providers.all=x)},null,512),[[Et,a.value.providers.all]]),y[28]||(y[28]=Oe(" All Service Providers "))])]),f("div",EV,[y[32]||(y[32]=f("h4",null,"Accommodations",-1)),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[10]||(y[10]=x=>a.value.accommodations.instruction=x)},null,512),[[Et,a.value.accommodations.instruction]]),y[30]||(y[30]=Oe(" Instructional "))]),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[11]||(y[11]=x=>a.value.accommodations.assessment=x)},null,512),[[Et,a.value.accommodations.assessment]]),y[31]||(y[31]=Oe(" Assessment "))])]),f("div",bV,[y[35]||(y[35]=f("h4",null,"Schedule & Services",-1)),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[12]||(y[12]=x=>a.value.schedule.periods=x)},null,512),[[Et,a.value.schedule.periods]]),y[33]||(y[33]=Oe(" Class Schedule "))]),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[13]||(y[13]=x=>a.value.schedule.classServices=x)},null,512),[[Et,a.value.schedule.classServices]]),y[34]||(y[34]=Oe(" Class Services "))])]),f("div",_V,[y[38]||(y[38]=f("h4",null,"Documents",-1)),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[14]||(y[14]=x=>a.value.documents.ataglancePdfUrl=x)},null,512),[[Et,a.value.documents.ataglancePdfUrl]]),y[36]||(y[36]=Oe(" At-A-Glance "))]),f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":y[15]||(y[15]=x=>a.value.documents.bipPdfUrl=x)},null,512),[[Et,a.value.documents.bipPdfUrl]]),y[37]||(y[37]=Oe(" BIP "))])])]),f("div",{class:"quick-select"},[f("button",{onClick:d},"Select All"),f("button",{onClick:h},"Deselect All")])]),f("footer",null,[f("button",{onClick:y[16]||(y[16]=x=>v.$emit("close")),class:"btn-secondary"},"Cancel"),f("button",{onClick:g,class:"btn-primary",disabled:!l.value},"Export",8,SV)])])]))}},wV=xt(TV,[["__scopeId","data-v-9cb02217"]]),AV={class:"modal-body"},CV={class:"student-info"},IV={class:"case-manager-info"},kV={class:"form-group"},DV={key:0,class:"no-forms-message"},PV={key:1,class:"form-selection"},FV=["id","value"],RV=["for"],OV={class:"form-title"},NV={class:"form-details"},MV={key:0,class:"form-description"},LV={class:"form-date"},BV={key:0,class:"form-group"},UV={class:"teacher-selection-header"},$V={class:"teacher-actions"},VV=["title"],jV={class:"teacher-selection"},HV={key:0,class:"no-teachers-message"},GV={key:1,class:"teacher-checkboxes"},WV=["id","value"],zV=["for"],KV={class:"teacher-email"},qV={key:0,class:"selected-emails-preview"},XV={class:"email-preview"},YV={key:1,class:"form-group"},JV={class:"duplication-options"},QV={class:"option-item"},ZV={key:2,class:"form-group"},ej={class:"send-history"},tj={class:"history-info"},rj={class:"history-date"},nj={class:"history-teachers"},sj={key:0,class:"history-success"},aj={key:1,class:"history-failed"},ij={key:0,class:"history-links"},oj=["href"],lj=["href"],cj={key:0,class:"resource-links"},uj={class:"resource-section"},dj={class:"resource-note"},fj={class:"success-details"},hj={key:0,class:"student-info"},pj={class:"form-link"},mj=["href"],gj={class:"modal-footer"},vj=["disabled"],xj={key:0},yj={key:1},Ej={__name:"TeacherFeedbackDialog",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!0}},emits:["close","form-sent"],setup(t,{emit:e}){const r=t,n=e,{activeForms:s}=Sx(),{userList:i,fetchUsers:a}=Na(),o=ne(!1),l=ne(""),c=ne(""),u=ne(null),d=ne(!1),h=ne("Copy teacher emails to clipboard"),p=ne(""),m=ne([]),g=_e(()=>s.value||[]),v=_e(()=>{var k;return p.value&&((k=g.value)==null?void 0:k.find(A=>A.id===p.value))||null}),y=_e(()=>{if(!p.value||!r.student)return[];try{return JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]").filter(A=>A&&A.studentId===r.student.id&&A.formId===p.value).sort((A,D)=>new Date(D.sentAt)-new Date(A.sentAt))||[]}catch(k){return console.warn("Error parsing send history:",k),[]}}),x=_e(()=>{var A,D,N;if(!r.student||!i.value)return[];const k=new Set;if((D=(A=r.student.app)==null?void 0:A.schedule)!=null&&D.periods)Object.values(r.student.app.schedule.periods).forEach(R=>{var O;const F=typeof R=="string"?R:R==null?void 0:R.teacherId;F&&k.add(F),(O=R==null?void 0:R.coTeaching)!=null&&O.caseManagerId&&k.add(R.coTeaching.caseManagerId)});else{const R=r.student.schedule||{};Object.values(R).forEach(F=>{F&&k.add(F)})}return(N=r.student.aeries)!=null&&N.schedule&&Object.values(r.student.aeries.schedule).forEach(R=>{R!=null&&R.teacherId&&k.add(R.teacherId)}),Array.from(k).map(R=>(i.value||[]).find(F=>F&&F.id===R)).filter(Boolean).filter(R=>R&&R.role==="teacher")}),E=_e(()=>p.value&&(m.value||[]).length>0),I=k=>k?(k.seconds?new Date(k.seconds*1e3):new Date(k)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",P=k=>k?(k.seconds?new Date(k.seconds*1e3):new Date(k)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):"",w=()=>{m.value=[...x.value]},b=async()=>{const k=m.value.map(A=>A.email).join(", ");try{await navigator.clipboard.writeText(k),h.value=" Copied!",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}catch(A){console.error("Failed to copy emails:",A);const D=document.createElement("textarea");D.value=k,document.body.appendChild(D),D.select();try{document.execCommand("copy"),h.value=" Copied!",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}catch{h.value=" Copy failed",setTimeout(()=>{h.value="Copy teacher emails to clipboard"},2e3)}document.body.removeChild(D)}},T=async()=>{var k,A,D,N;if(E.value)try{o.value=!0,l.value="",u.value=null;const R=v.value,F=m.value.map(he=>he.email),O=m.value.map(he=>he.name||he.email).join(", "),B=r.student.firstName||r.student.first_name||((A=(k=r.student.app)==null?void 0:k.studentData)==null?void 0:A.firstName)||"",V=r.student.lastName||r.student.last_name||((N=(D=r.student.app)==null?void 0:D.studentData)==null?void 0:N.lastName)||"",z=`${B} ${V}`.trim(),H=(((B==null?void 0:B[0])||"")+((V==null?void 0:V[0])||"")).toUpperCase()||"ST";let j=R.formUrl;j.includes("/edit")&&(j=j.replace("/edit","/copy"));const W=new URLSearchParams;H&&H!=="ST"&&W.append("title",`${H} - ${R.title}`),z&&W.append("student",z),F.length>0&&W.append("responders",F.join(", "));const K=j.includes("?")?"&":"?",re=W.toString()?`${j}${K}${W.toString()}`:j;window.open(re,"_blank","noopener"),l.value=`Form opened for ${O}. Student: ${H} - ${z}`,c.value="success",u.value={message:`Form opened successfully for ${H} - ${z}`,sent:F.length,failed:0,formUrl:re,studentInitials:H,studentName:z},_(R,m.value,re)}catch(R){console.error("Error opening form:",R),l.value="Failed to open form. Please try again.",c.value="error"}finally{o.value=!1}},_=(k,A,D=null)=>{const N=JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]"),R={id:`${k.id}_${r.student.id}_${Date.now()}`,formId:k.id,formTitle:k.title,formUrl:D||k.formUrl,sheetUrl:null,studentId:r.student.id,studentName:`${r.student.firstName} ${r.student.lastName}`,caseManagerId:r.currentUser.uid,caseManagerName:r.currentUser.name||r.currentUser.email,teachers:A.map(O=>({id:O.id,name:O.name,email:O.email})),sentAt:new Date().toISOString(),method:"gmail"},F=N.findIndex(O=>O.id===R.id);F!==-1?N[F]=R:N.push(R),localStorage.setItem("casemanage_sent_forms",JSON.stringify(N))},S=()=>{n("close")};return Bt(()=>{p.value="",m.value=[],l.value="",a()}),Ut(x,k=>{k&&k.length>0&&m.value.length===0&&(m.value=[...k])},{immediate:!0}),(k,A)=>{var D,N,R,F;return L(),U("div",{class:"modal-overlay",onClick:S},[f("div",{class:"modal-content",onClick:A[3]||(A[3]=hn(()=>{},["stop"]))},[f("div",{class:"modal-header"},[A[4]||(A[4]=f("h3",null,"Send Teacher Feedback Form",-1)),f("button",{onClick:S,class:"close-btn"},"")]),f("div",AV,[f("div",CV,[f("h4",null,Q(t.student.firstName)+" "+Q(t.student.lastName)+" (Grade "+Q(t.student.grade)+")",1),f("p",IV,"Case Manager: "+Q(((D=t.currentUser)==null?void 0:D.name)||((N=t.currentUser)==null?void 0:N.email)),1)]),f("div",kV,[A[6]||(A[6]=f("label",null,"Select Feedback Form to Send:",-1)),g.value.length===0?(L(),U("div",DV,A[5]||(A[5]=[f("p",null,"No feedback forms available. Forms must be created in the Admin Panel first.",-1),f("p",null,[f("em",null,"Contact your administrator to create feedback forms.")],-1)]))):(L(),U("div",PV,[(L(!0),U(Fe,null,Ve(g.value,O=>(L(),U("div",{key:O.id,class:"form-option"},[Ae(f("input",{type:"radio",id:O.id,value:O.id,"onUpdate:modelValue":A[0]||(A[0]=B=>p.value=B)},null,8,FV),[[hi,p.value]]),f("label",{for:O.id,class:"form-option-label"},[f("div",OV,Q(O.title),1),f("div",NV,[O.description?(L(),U("span",MV,Q(O.description),1)):Se("",!0),f("span",LV,"Created: "+Q(I(O.createdAt)),1)])],8,RV)]))),128))]))]),p.value?(L(),U("div",BV,[f("div",UV,[A[7]||(A[7]=f("label",null,"Select Teachers to Send Form To:",-1)),f("div",$V,[x.value.length>0?(L(),U("button",{key:0,onClick:w,type:"button",class:"btn-select-all"}," Select All ")):Se("",!0),m.value.length>0?(L(),U("button",{key:1,onClick:b,type:"button",class:"btn-copy-emails",title:h.value},"  Copy Emails ",8,VV)):Se("",!0)])]),f("div",jV,[x.value.length===0?(L(),U("div",HV,A[8]||(A[8]=[f("p",null,"No teachers found for this student's schedule.",-1)]))):(L(),U("div",GV,[(L(!0),U(Fe,null,Ve(x.value,O=>(L(),U("div",{key:O.id,class:"checkbox-item"},[Ae(f("input",{type:"checkbox",id:`teacher-${O.id}`,value:O,"onUpdate:modelValue":A[1]||(A[1]=B=>m.value=B)},null,8,WV),[[Et,m.value]]),f("label",{for:`teacher-${O.id}`},[Oe(Q(O.name||O.email)+" ",1),f("span",KV,"("+Q(O.email)+")",1)],8,zV)]))),128))]))]),m.value.length>0?(L(),U("div",qV,[A[9]||(A[9]=f("p",null,[f("strong",null,"Selected teacher emails:")],-1)),f("div",XV,Q(m.value.map(O=>O.email).join(", ")),1)])):Se("",!0)])):Se("",!0),p.value&&m.value.length>0&&((R=v.value)!=null&&R.sheetTemplateUrl)?(L(),U("div",YV,[A[11]||(A[11]=f("label",null,"Response Collection:",-1)),f("div",JV,[f("div",QV,[Ae(f("input",{type:"checkbox",id:"duplicate-sheet","onUpdate:modelValue":A[2]||(A[2]=O=>d.value=O)},null,512),[[Et,d.value]]),A[10]||(A[10]=f("label",{for:"duplicate-sheet"},[f("strong",null,"Duplicate custom sheet"),f("span",{class:"option-description"},"Create a copy of the response template sheet in your Google Drive")],-1))])])])):Se("",!0),p.value&&y.value.length>0?(L(),U("div",ZV,[A[12]||(A[12]=f("label",null,"Previous Sends for this Student:",-1)),f("div",ej,[(L(!0),U(Fe,null,Ve(y.value,O=>(L(),U("div",{key:O.id,class:"history-item"},[f("div",tj,[f("span",rj,Q(P(O.sentAt)),1),f("span",nj,Q((O.teacherEmails||[]).length)+" teacher"+Q((O.teacherEmails||[]).length===1?"":"s"),1),O.successful>0?(L(),U("span",sj," "+Q(O.successful)+" sent",1)):Se("",!0),O.failed>0?(L(),U("span",aj," "+Q(O.failed)+" failed",1)):Se("",!0)]),O.formUrl||O.sheetUrl?(L(),U("div",ij,[O.formUrl?(L(),U("a",{key:0,href:O.formUrl,target:"_blank",class:"history-link"}," Form",8,oj)):Se("",!0),O.sheetUrl?(L(),U("a",{key:1,href:O.sheetUrl,target:"_blank",class:"history-link"}," Sheet",8,lj)):Se("",!0)])):Se("",!0)]))),128))])])):Se("",!0),l.value?(L(),U("div",{key:3,class:Ze(`status-message ${c.value}`)},[Oe(Q(l.value)+" ",1),c.value==="success"&&u.value?(L(),U("div",cj,[f("div",uj,[A[16]||(A[16]=f("h5",null," Form Opened Successfully!",-1)),f("p",dj,[f("strong",null,Q(u.value.message),1)]),f("div",fj,[f("p",null,[A[13]||(A[13]=Oe("  Form opened for ")),f("strong",null,Q(u.value.sent),1),Oe(" teacher"+Q(u.value.sent===1?"":"s"),1)]),u.value.studentInitials?(L(),U("p",hj,[A[14]||(A[14]=Oe("  Student: ")),f("strong",null,Q(u.value.studentInitials),1),Oe(" - "+Q(u.value.studentName),1)])):Se("",!0),f("p",pj,[A[15]||(A[15]=Oe("  Form Link: ")),f("a",{href:u.value.formUrl,target:"_blank"},Q((F=v.value)==null?void 0:F.title),9,mj)])])])])):Se("",!0)],2)):Se("",!0)]),f("div",gj,[f("button",{onClick:S,class:"secondary-btn"},"Cancel"),f("button",{onClick:T,class:"primary-btn",disabled:!E.value||o.value},[o.value?(L(),U("span",xj,"Creating Form...")):(L(),U("span",yj," Create New Form"))],8,vj)])])])}}},bj=xt(Ej,[["__scopeId","data-v-f8c1ccfe"]]),_j={class:"students-view"},Sj={class:"page-header"},Tj={class:"header-left"},wj={class:"search-container"},Aj={class:"header-controls"},Cj={class:"filter-group"},Ij={key:1,class:"filter-group"},kj={class:"radio-group"},Dj=["value"],Pj={class:"filter-group"},Fj={class:"radio-group"},Rj=["checked"],Oj=["checked","disabled"],Nj=["checked"],Mj={key:0,class:"filters-panel"},Lj={class:"filters-content"},Bj={class:"filter-group"},Uj=["value"],$j={class:"filter-group"},Vj=["value"],jj={class:"filter-group"},Hj=["value"],Gj={class:"filter-group"},Wj={class:"content"},zj={key:0},Kj={key:1,class:"view-container"},qj={key:0,class:"group-section"},Xj={class:"group-header"},Yj={key:2,class:"view-section"},Jj={__name:"StudentsView",setup(t){const e=IB(),r=DB(e),n=jB(e,r),s=GB(e),{students:i,userMapObj:a,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:u,paraeducators:d,currentUser:h,isAdmin:p,showProviderView:m,getStudentById:g}=e,{showFilters:v,filteredStudents:y,currentFilters:x,toggleFilters:E,clearFilters:I,applyFilters:P,debouncedApplyFilters:w}=r,{visibleStudents:b,canEditAllStudents:T,canEditOwnStudents:_,canViewAllStudents:S,canAccessTesting:k,canAccessTestingPartial:A,canAccessFilters:D,isClassViewDisabled:N,setViewMode:R,providerViewOptions:F}=n,O=HB(e,r,_e(()=>n.visibleStudents.value)),{currentViewMode:B,studentsByClass:V,directAssignmentStudents:z,testingViewStudents:H}=O,{editingStudentId:j,emailingStudentId:W,showExport:K,showAddStudent:re,showFeedbackDialog:he,feedbackStudentId:ue,editStudent:pe,emailStudent:te,handleTeacherFeedback:Y,handleFormSent:Ee,handleStudentAdded:X,handleStudentSaved:q,handleNavAction:J}=s;return _e(()=>{var ae;return F!=null&&F.value?F.value:((ae=h.value)==null?void 0:ae.role)==="case_manager"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]}),(ge,ae)=>{var se,le,xe;return L(),U("div",_j,[st(a7,{"current-user":Z(h),"is-admin":Z(p),onAction:Z(J)},null,8,["current-user","is-admin","onAction"]),f("div",Sj,[f("div",Tj,[ae[24]||(ae[24]=f("h1",null,"Student Management",-1)),f("div",wj,[Ae(f("input",{type:"text","onUpdate:modelValue":ae[0]||(ae[0]=ve=>Z(x).search=ve),onInput:ae[1]||(ae[1]=(...ve)=>Z(w)&&Z(w)(...ve)),placeholder:"Search students...",class:"search-input"},null,544),[[Je,Z(x).search]])])]),f("div",Aj,[Z(D)?(L(),U("button",{key:0,onClick:ae[2]||(ae[2]=(...ve)=>Z(E)&&Z(E)(...ve)),class:Ze(["filter-toggle-btn",{active:Z(v)}])},ae[25]||(ae[25]=[f("span",null,"",-1),Oe(" Filters ")]),2)):Se("",!0),f("div",Cj,[Ae(f("select",{"onUpdate:modelValue":ae[3]||(ae[3]=ve=>Z(x).sortBy=ve),onChange:ae[4]||(ae[4]=ve=>Z(P)()),class:"sort-select"},ae[26]||(ae[26]=[tn('<option value="firstName" data-v-2755a4e7>First Name</option><option value="lastName" data-v-2755a4e7>Last Name</option><option value="grade" data-v-2755a4e7>Grade</option><option value="reviewDate" data-v-2755a4e7>Review Date</option><option value="reevalDate" data-v-2755a4e7>Re-evaluation Date</option><option value="meetingDate" data-v-2755a4e7>Meeting Date</option>',6)]),544),[[hr,Z(x).sortBy]])]),Z(F)&&Z(F).length?(L(),U("div",Ij,[f("div",kj,[(L(!0),U(Fe,null,Ve(Z(F),ve=>(L(),U("label",{key:ve.value,class:Ze(["radio-btn",{active:Z(x).providerView===ve.value}])},[Ae(f("input",{type:"radio","onUpdate:modelValue":ae[5]||(ae[5]=Ce=>Z(x).providerView=Ce),value:ve.value,onChange:ae[6]||(ae[6]=(...Ce)=>Z(P)&&Z(P)(...Ce))},null,40,Dj),[[hi,Z(x).providerView]]),Oe(" "+Q(ve.label),1)],2))),128))])])):Se("",!0),f("div",Pj,[f("div",Fj,[f("label",{class:Ze(["radio-btn",{active:Z(x).viewMode==="list"}])},[f("input",{type:"radio",value:"list",checked:Z(x).viewMode==="list",onChange:ae[7]||(ae[7]=ve=>Z(R)("list"))},null,40,Rj),ae[27]||(ae[27]=Oe(" List "))],2),f("label",{class:Ze(["radio-btn",{active:Z(x).viewMode==="class",disabled:Z(N)}])},[f("input",{type:"radio",value:"class",checked:Z(x).viewMode==="class",onChange:ae[8]||(ae[8]=ve=>Z(R)("class")),disabled:Z(N)},null,40,Oj),f("span",{class:Ze({strikethrough:Z(N)})},"Class",2)],2),Z(k)?(L(),U("label",{key:0,class:Ze(["radio-btn",{active:Z(x).viewMode==="testing"}])},[f("input",{type:"radio",value:"testing",checked:Z(x).viewMode==="testing",onChange:ae[9]||(ae[9]=ve=>Z(R)("testing"))},null,40,Nj),ae[28]||(ae[28]=Oe(" SS-Testing "))],2)):Se("",!0)])]),f("button",{onClick:ae[10]||(ae[10]=(...ve)=>Z(I)&&Z(I)(...ve)),class:"reset-btn",title:"Reset all filters"},"  ")])]),Z(v)?(L(),U("div",Mj,[f("div",Lj,[f("div",Bj,[ae[30]||(ae[30]=f("label",null,"Case Manager",-1)),Ae(f("select",{"onUpdate:modelValue":ae[11]||(ae[11]=ve=>Z(x).cm=ve),onChange:ae[12]||(ae[12]=ve=>Z(P)()),class:"filter-select"},[ae[29]||(ae[29]=f("option",{value:"all"},"All Case Managers",-1)),(L(!0),U(Fe,null,Ve(Z(o),ve=>(L(),U("option",{key:ve.id,value:ve.id},Q(ve.name||ve.email||ve.id),9,Uj))),128))],544),[[hr,Z(x).cm]])]),f("div",$j,[ae[32]||(ae[32]=f("label",null,"Teacher",-1)),Ae(f("select",{"onUpdate:modelValue":ae[13]||(ae[13]=ve=>Z(x).teacher=ve),onChange:ae[14]||(ae[14]=ve=>Z(P)()),class:"filter-select"},[ae[31]||(ae[31]=f("option",{value:"all"},"All Teachers",-1)),(L(!0),U(Fe,null,Ve(Z(l),ve=>(L(),U("option",{key:ve.id,value:ve.id},Q(ve.name||ve.email||ve.id),9,Vj))),128))],544),[[hr,Z(x).teacher]])]),f("div",jj,[ae[34]||(ae[34]=f("label",null,"Paraeducator",-1)),Ae(f("select",{"onUpdate:modelValue":ae[15]||(ae[15]=ve=>Z(x).paraeducator=ve),onChange:ae[16]||(ae[16]=ve=>Z(P)()),class:"filter-select"},[ae[33]||(ae[33]=f("option",{value:"all"},"All Paraeducators",-1)),(L(!0),U(Fe,null,Ve(Z(d),ve=>(L(),U("option",{key:ve.id,value:ve.id},Q(ve.name||ve.email||ve.id),9,Hj))),128))],544),[[hr,Z(x).paraeducator]])]),f("div",Gj,[ae[36]||(ae[36]=f("label",null,"Plan Type",-1)),Ae(f("select",{"onUpdate:modelValue":ae[17]||(ae[17]=ve=>Z(x).plan=ve),onChange:ae[18]||(ae[18]=ve=>Z(P)()),class:"filter-select"},ae[35]||(ae[35]=[f("option",{value:"all"},"All Plans",-1),f("option",{value:"IEP"},"IEP",-1),f("option",{value:"504"},"504",-1)]),544),[[hr,Z(x).plan]])])])])):Se("",!0),f("div",Wj,[Z(B)==="list"?(L(),U("div",zj,[st(Of,{students:Z(b),"user-map":Z(a),"current-user":Z(h),"student-data":Z(e),"can-edit-all":Z(T),"can-edit-own":Z(_),"can-view-all":Z(S),"can-access-testing":Z(k),"can-access-testing-partial":Z(A),"aide-schedule":((se=Z(h))==null?void 0:se.role)==="paraeducator"?Z(u):{},onEdit:Z(pe),onEmail:Z(te),onTeacherFeedback:Z(Y)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Z(B)==="class"?(L(),U("div",Kj,[Z(z).length>0?(L(),U("div",qj,[ae[37]||(ae[37]=f("h3",{class:"group-header direct-assignment-header"},"Direct Assignment",-1)),st(Of,{students:Z(z),"user-map":Z(a),"current-user":Z(h),"student-data":Z(e),"can-edit-all":Z(T),"can-edit-own":Z(_),"can-view-all":Z(S),"can-access-testing":Z(k),"can-access-testing-partial":Z(A),"aide-schedule":((le=Z(h))==null?void 0:le.role)==="paraeducator"?Z(u):{},onEdit:Z(pe),onEmail:Z(te),onTeacherFeedback:Z(Y)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Se("",!0),(L(!0),U(Fe,null,Ve(Z(V),(ve,Ce)=>{var we;return L(),U("div",{key:Ce,class:"group-section"},[f("h3",Xj,"Period "+Q(Ce),1),st(Of,{students:ve,"user-map":Z(a),"current-user":Z(h),"student-data":Z(e),"can-edit-all":Z(T),"can-edit-own":Z(_),"can-view-all":Z(S),"can-access-testing":Z(k),"can-access-testing-partial":Z(A),"aide-schedule":((we=Z(h))==null?void 0:we.role)==="paraeducator"?Z(u):{},onEdit:Z(pe),onEmail:Z(te),onTeacherFeedback:Z(Y)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])}),128))])):Z(B)==="testing"?(L(),U("div",Yj,[st(Of,{students:Z(H),"user-map":Z(a),"current-user":Z(h),"student-data":Z(e),"can-edit-all":Z(T),"can-edit-own":Z(_),"can-view-all":Z(S),"can-access-testing":Z(k),"can-access-testing-partial":Z(A),"testing-view":!0,"aide-schedule":((xe=Z(h))==null?void 0:xe.role)==="paraeducator"?Z(u):{},onEdit:Z(pe),onEmail:Z(te),onTeacherFeedback:Z(Y)},null,8,["students","user-map","current-user","student-data","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Se("",!0)]),Z(j)?(L(),Xr(tV,{key:1,"student-id":Z(j),users:{userRoles:Z(c)},onClose:ae[19]||(ae[19]=ve=>j.value=null),onSaved:Z(q)},null,8,["student-id","users","onSaved"])):Se("",!0),Z(W)?(L(),Xr(hV,{key:2,student:Z(g)(Z(W)),"user-map":Z(a),onClose:ae[20]||(ae[20]=ve=>W.value=null)},null,8,["student","user-map"])):Se("",!0),Z(K)?(L(),Xr(wV,{key:3,students:Z(i),"user-map":Z(a),onClose:ae[21]||(ae[21]=ve=>K.value=!1)},null,8,["students","user-map"])):Se("",!0),Z(re)?(L(),Xr(Ix,{key:4,users:{userRoles:Z(c)},onClose:ae[22]||(ae[22]=ve=>re.value=!1),onSaved:Z(X)},null,8,["users","onSaved"])):Se("",!0),Z(he)?(L(),Xr(bj,{key:5,student:Z(g)(Z(ue)),"current-user":Z(h),"user-map":Z(a),onClose:ae[23]||(ae[23]=ve=>he.value=!1),onFormSent:Z(Ee)},null,8,["student","current-user","user-map","onFormSent"])):Se("",!0)])}}},t2=xt(Jj,[["__scopeId","data-v-2755a4e7"]]),Qj={class:"login-container"},Zj={__name:"LoginView",setup(t){const e=bi(),r=async()=>{try{const{user:n}=await S1($t,p4),s=Qe(Xe,"users",n.uid);(await Zt(s)).exists()||await Wt(s,{name:n.displayName||"",email:n.email,role:"admin"}),e.push({name:"Home"})}catch(n){console.error("Login failed:",n),alert("Login failed: "+n.message)}};return(n,s)=>(L(),U("div",Qj,[s[0]||(s[0]=f("h1",null,"Case Manager Portal",-1)),s[1]||(s[1]=f("p",null,"Please sign in with your Google account:",-1)),f("button",{onClick:r,class:"primary-btn"}," Sign in with Google ")]))}},eH=xt(Zj,[["__scopeId","data-v-d9b5a53b"]]),tH={name:"TabBar",props:{tabs:{type:Array,required:!0,default:()=>[]},activeTab:{type:String,required:!0}},emits:["tab-change"],methods:{getStatusIcon(t){switch(t){case"not-active":return"";case"not-working":return"";default:return""}},getStatusTooltip(t){switch(t){case"not-active":return" = Not active";case"not-working":return" = Not working";default:return""}}}},rH={class:"admin-tab-bar"},nH=["onClick","title"];function sH(t,e,r,n,s,i){return L(),U("div",rH,[(L(!0),U(Fe,null,Ve(r.tabs,a=>(L(),U("button",{key:a.key,class:Ze({active:r.activeTab===a.key}),onClick:o=>t.$emit("tab-change",a.key),title:i.getStatusTooltip(a.status)},[Oe(Q(a.label)+" ",1),a.status?(L(),U("span",{key:0,class:Ze(["status-indicator",a.status])},Q(i.getStatusIcon(a.status)),3)):Se("",!0)],10,nH))),128))])}const aH=xt(tH,[["render",sH],["__scopeId","data-v-5be36c07"]]),iH={name:"UserAddForm",setup(){const t=_a(h4,"addUserWithRole"),e=uo(),r=gs({name:"",email:"",role:"",provider:"",aeriesId:""}),n=ne(null),s=ne(""),i=ne(!1),a=ne(null),o=Ep,{appSettings:l,loadAppSettings:c}=Hs(),u=_e(()=>{if(l&&l.value&&l.value.serviceProviders){const E=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}];return l.value.serviceProviders.map(I=>E.find(P=>P.abbreviation===I)||{name:I,abbreviation:I})}return[]}),d=(E,I=!1)=>{s.value=E,i.value=I,setTimeout(()=>{s.value="",i.value=!1},5e3)},h=async(E,I,P,w,b)=>{try{const T={name:E,email:I,role:P,provider:w,aeriesId:b,createdAt:new Date,status:"active"};return{success:!0,userId:(await VC(wt(e,"users"),T)).id}}catch(T){throw T}},p=async(E,I,P,w,b)=>{var T,_;try{try{return await t({name:E,email:I,role:P,provider:w,aeriesId:b}),{success:!0,method:"cloud-function"}}catch(S){return S.code==="functions/already-exists"||(T=S.message)!=null&&T.includes("409")||(_=S.message)!=null&&_.includes("already exists")?(console.log(`User ${I} already exists in Firebase Auth, skipping...`),{success:!0,method:"already-exists",message:"User already exists"}):(await h(E,I,P,w,b),{success:!0,method:"firestore"})}}catch(S){return{success:!1,error:S.message}}},m=async()=>{if(!Ts("addUser",5,6e4).allowed){d("Too many requests. Please wait before adding another user.",!0);return}const I=xB(r),P=vB(I);if(!P.isValid){d(`Please fix the following errors:
${P.errors.join(`
`)}`,!0);return}const w=["name","email","aeriesId"];for(const T of w)if(I[T]){const _=Hr(I[T]);if(!_.isSafe){d(`Security threat detected in ${T}: ${_.threats.join(", ")}`,!0);return}}Object.assign(r,I);const b=await p(r.name,r.email,r.role,r.provider,r.aeriesId);b.success?(d(`User ${r.name} added successfully!`),r.name="",r.email="",r.role="",r.provider="",r.aeriesId=""):d(`Error adding user: ${b.error}`,!0)},g=E=>{const I=E.target.files[0];if(I){const P=Oc(I,{allowedTypes:["csv","excel"],maxSize:5242880,fieldName:"User Import File"});if(!P.isValid){d(P.error,!0),E.target.value="";return}const w=Hr(I.name);if(!w.isSafe){d(`File name contains potentially dangerous content: ${w.threats.join(", ")}`,!0),E.target.value="";return}n.value=I}},v=async()=>{if(!n.value){d("Please select a file first",!0);return}const E=n.value.name.toLowerCase();if(!(E.endsWith(".csv")||E.endsWith(".xls")||E.endsWith(".xlsx"))){d("Unsupported file type. Please upload a .csv, .xls, or .xlsx file.",!0);return}d("Processing file...");try{E.endsWith(".csv")?await y(n.value):await x(n.value)}catch(I){d(`Error processing file: ${I.message}`,!0),console.error("Bulk upload error:",I)}},y=async E=>new Promise((I,P)=>{const w=new FileReader;w.onload=async b=>{try{const _=b.target.result.trim().split(/\r?\n/);if(_.length===0){P(new Error("The CSV file is empty."));return}const S=B=>{const V=[];let z="",H=!1;for(let j=0;j<B.length;j++){const W=B[j];W==='"'?H=!H:W===","&&!H?(V.push(z.trim()),z=""):z+=W}return V.push(z.trim()),V};let k=0;const A={name:0,email:1,role:2,provider:3,aeriesId:4},D=S(_[0]);D.map(B=>B.toLowerCase()).some(B=>B.includes("name")||B.includes("email")||B.includes("role"))&&(D.forEach((B,V)=>{const z=B.trim().toLowerCase();(z==="name"||z==="displayname")&&(A.name=V),z==="email"&&(A.email=V),z==="role"&&(A.role=V),(z==="provider"||z==="providertype")&&(A.provider=V),(z==="aeriesid"||z==="aeries_id"||z==="teacherid")&&(A.aeriesId=V)}),k=1);let R=0;const F=[];for(let B=k;B<_.length;B++){const V=_[B].trim();if(!V)continue;const z=S(V),H=(z[A.name]||"").trim(),j=(z[A.email]||"").trim(),W=(z[A.role]||"").trim(),K=(z[A.provider]||"").trim(),re=(z[A.aeriesId]||"").trim(),he=H.replace(/^"|"$/g,""),ue=j.replace(/^"|"$/g,""),pe=W.replace(/^"|"$/g,""),te=K.replace(/^"|"$/g,""),Y=re.replace(/^"|"$/g,"");if(!he||!ue||!pe){F.push(`Line ${B+1}: Missing name, email, or role.`);continue}if(!d_(pe)){F.push(`Line ${B+1}: Invalid role "${pe}".`);continue}const Ee=await p(he,ue,pe,te,Y);Ee.success?(R++,Ee.method==="already-exists"&&console.log(`Line ${B+1}: User ${ue} already exists, skipped`)):F.push(`Line ${B+1}: ${Ee.error}`)}let O=`${R} users added successfully.`;F.length>0&&(O+=`
${F.length} errors:
`+F.join(`
`)),d(O,F.length>0),n.value=null,a.value&&(a.value.value=""),I()}catch(T){P(new Error(`Error processing CSV file: ${T.message}`))}},w.onerror=()=>P(new Error("Failed to read the CSV file.")),w.readAsText(E)}),x=async E=>new Promise((I,P)=>{const w=new FileReader;w.onload=async b=>{try{if(typeof XLSX>"u"){P(new Error("Excel upload requires SheetJS (XLSX) library. Please include it in your page."));return}const T=new Uint8Array(b.target.result),_=XLSX.read(T,{type:"array"}),S=_.SheetNames[0],k=_.Sheets[S],A=XLSX.utils.sheet_to_json(k,{defval:""});if(A.length===0){P(new Error("The Excel file is empty or unrecognized."));return}let D=0;const N=[];for(let F=0;F<A.length;F++){const O=A[F];let B="",V="",z="",H="",j="";for(const re in O){const he=re.toLowerCase(),ue=(""+O[re]).trim();(he==="name"||he==="displayname")&&!B?B=ue:he==="email"&&!V?V=ue:he==="role"&&!z?z=ue:(he==="provider"||he==="providertype")&&!H?H=ue:(he==="aeriesid"||he==="aeries_id"||he==="teacherid")&&!j&&(j=ue)}const W=Object.values(O).map(re=>(""+re).trim());if(!B&&W[0]&&(B=W[0]),!V&&W[1]&&(V=W[1]),!z&&W[2]&&(z=W[2]),!H&&W[3]&&(H=W[3]),!j&&W[4]&&(j=W[4]),!B||!V||!z){N.push(`Row ${F+1}: Missing name, email, or role.`);continue}if(!d_(z)){N.push(`Row ${F+1}: Invalid role "${z}".`);continue}const K=await p(B,V,z,H,j);K.success?(D++,K.method==="already-exists"&&console.log(`Row ${F+1}: User ${V} already exists, skipped`)):N.push(`Row ${F+1}: ${K.error}`)}let R=`${D} users added successfully.`;N.length>0&&(R+=`
${N.length} errors:
`+N.join(`
`)),d(R,N.length>0),n.value=null,a.value&&(a.value.value=""),I()}catch(T){P(new Error(`Error processing Excel file: ${T.message}`))}},w.onerror=()=>P(new Error("Failed to read the Excel file.")),w.readAsArrayBuffer(E)});return Bt(async()=>{await c()}),{singleUser:r,validRoles:o,providerOptions:u,addSingleUser:m,selectedFile:n,statusMessage:s,isError:i,bulkFileInput:a,handleFileSelect:g,uploadBulkUsers:v,appSettings:l}}},oH={class:"add-user-wrapper"},lH={class:"add-single"},cH=["value"],uH={key:0},dH=["value"],fH={class:"add-bulk"},hH=["disabled"];function pH(t,e,r,n,s,i){return L(),U("div",oH,[f("div",lH,[e[16]||(e[16]=f("h3",null,"Add Single User",-1)),f("form",{onSubmit:e[5]||(e[5]=hn((...a)=>n.addSingleUser&&n.addSingleUser(...a),["prevent"])),class:"form-grid"},[f("div",null,[f("label",null,[e[8]||(e[8]=Oe(" Name: ")),Ae(f("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.singleUser.name=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[Je,n.singleUser.name]])])]),f("div",null,[f("label",null,[e[9]||(e[9]=Oe(" Email: ")),Ae(f("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>n.singleUser.email=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[Je,n.singleUser.email]])])]),f("div",null,[f("label",null,[e[11]||(e[11]=Oe(" Role: ")),Ae(f("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.singleUser.role=a),required:""},[e[10]||(e[10]=f("option",{value:"",disabled:""},"Select role...",-1)),(L(!0),U(Fe,null,Ve(n.validRoles,a=>(L(),U("option",{key:a,value:a},Q(a),9,cH))),128))],512),[[hr,n.singleUser.role]])])]),n.providerOptions.length>0?(L(),U("div",uH,[f("label",null,[e[13]||(e[13]=Oe(" Provider Type: ")),Ae(f("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.singleUser.provider=a)},[e[12]||(e[12]=f("option",{value:""},"None",-1)),(L(!0),U(Fe,null,Ve(n.providerOptions,a=>(L(),U("option",{key:a.abbreviation,value:a.abbreviation},Q(a.name)+" ("+Q(a.abbreviation)+") ",9,dH))),128))],512),[[hr,n.singleUser.provider]])])])):Se("",!0),f("div",null,[f("label",null,[e[14]||(e[14]=Oe(" Aeries ID: ")),Ae(f("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>n.singleUser.aeriesId=a),placeholder:"Optional Aeries Teacher ID"},null,512),[[Je,n.singleUser.aeriesId]])])]),e[15]||(e[15]=f("button",{type:"submit"},"Add User",-1))],32)]),f("div",fH,[e[17]||(e[17]=f("h3",null,"Bulk Upload Users",-1)),f("div",null,[f("input",{type:"file",ref:"bulkFileInput",accept:".csv, .xls, .xlsx",onChange:e[6]||(e[6]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),f("button",{onClick:e[7]||(e[7]=(...a)=>n.uploadBulkUsers&&n.uploadBulkUsers(...a)),disabled:!n.selectedFile}," Upload Users ",8,hH)]),e[18]||(e[18]=tn(`<h4 data-v-4932f701>Example Formatting</h4><div data-v-4932f701>File needs to be in .csv, .xls, .xlsx format, like an Excel spreadsheet.</div><div class="example-format" data-v-4932f701><p data-v-4932f701><strong data-v-4932f701>CSV Format:</strong></p><pre data-v-4932f701>Name,Email,Role,Provider,AeriesID
&quot;John Smith&quot;,&quot;john.smith@school.org&quot;,&quot;teacher&quot;,&quot;&quot;,&quot;123456&quot;
&quot;Jane Doe&quot;,&quot;jane.doe@school.org&quot;,&quot;service_provider&quot;,&quot;SLP&quot;,&quot;789012&quot;
&quot;Bob Johnson&quot;,&quot;bob.johnson@school.org&quot;,&quot;case_manager&quot;,&quot;&quot;,&quot;&quot;</pre><p data-v-4932f701><strong data-v-4932f701>Supported Roles:</strong> admin, teacher, case_manager, sped_chair, service_provider</p><p data-v-4932f701><strong data-v-4932f701>Provider Types:</strong> SLP, OT, PT, SC, MH, TR, AUD, VI, AT, DHH, O&amp;M, BIS, HN, SW</p><p data-v-4932f701><strong data-v-4932f701>Aeries ID:</strong> Optional 6-digit teacher ID from Aeries system</p></div>`,3))]),n.statusMessage?(L(),U("div",{key:0,class:Ze(["status-msg",{error:n.isError}])},Q(n.statusMessage),3)):Se("",!0)])}const mH=xt(iH,[["render",pH],["__scopeId","data-v-4932f701"]]),ru=20,gH={name:"UserTable",setup(){const t=uo(),e=ne([]),r=ne(1),n=ne("name"),s=ne(""),i=ne(null),a=ne(""),o=ne(!1),l=ne(!1),c=ne([]),u=ne(null),d=Ep,h=Hs(),p=h.appSettings,m=h.loadAppSettings;let g=null;const v=()=>{g&&clearTimeout(g),g=setTimeout(()=>{I()},300)},y=_e(()=>{var R;return Array.isArray((R=p.value)==null?void 0:R.serviceProviders)&&p.value.serviceProviders.length>0}),x=_e(()=>{var R;return((R=p.value)==null?void 0:R.serviceProviders)||[]}),E=(R,F=!1)=>{a.value=R,o.value=F,setTimeout(()=>{a.value="",o.value=!1},3e3)},I=()=>{r.value=1,P()},P=async(R="first")=>{E("");const F=wt(t,"users");let O;if(s.value&&n.value==="name"){const z=(await jt(lr(F,cn("name"),Rs(1e3)))).docs.map(H=>({id:H.id,...H.data()})).filter(H=>(H.name||"").toLowerCase().includes(s.value.toLowerCase()));i.value=null,e.value=z,l.value=!1;return}s.value&&n.value==="email"?O=lr(F,cn("email"),Vr("email",">=",s.value),Vr("email","<=",s.value+""),Rs(ru)):s.value?O=lr(F,cn("name"),Vr("name",">=",s.value),Vr("name","<=",s.value+""),Rs(ru)):O=lr(F,cn("name"),Rs(ru)),R==="next"&&c.value.length&&(O=lr(F,cn(n.value),Z0(c.value[c.value.length-1]),Rs(ru)));const B=await jt(O);c.value=B.docs,i.value=null,e.value=c.value.map(V=>({id:V.id,...V.data()})),l.value=B.size===ru},w=R=>{i.value||(i.value=R,u.value={...e.value.find(F=>F.id===R)})},b=()=>{i.value=null,u.value=null,P()},T=(R,F,O)=>{u.value&&u.value.id===R&&(u.value[F]=O)},_=async R=>{var F,O;if(!(!u.value||u.value.id!==R))try{const B={};u.value.name!==void 0&&(B.name=((F=u.value.name)==null?void 0:F.trim())||null),u.value.title!==void 0&&(B.title=((O=u.value.title)==null?void 0:O.trim())||null),u.value.role!==void 0&&(B.role=u.value.role),u.value.provider!==void 0&&(B.provider=u.value.provider||null),await Xd(Qe(t,"users",R),B),E(" User updated."),i.value=null,u.value=null,P()}catch(B){console.error("Error updating user:",B),E(` Error updating user: ${B.message}`,!0)}},S=async R=>{if(confirm("Are you sure you want to delete this user?"))try{await io(Qe(t,"users",R)),E(" User deleted."),i.value=null,u.value=null,P()}catch(F){console.error("Error deleting user:",F),E(` Error deleting user: ${F.message}`,!0)}},k=async()=>{if(prompt("Type DELETE ALL USERS to confirm:")==="DELETE ALL USERS")try{const F=await jt(wt(t,"users"));await Promise.all(F.docs.map(O=>io(Qe(t,"users",O.id)))),E(" All users deleted."),r.value=1,P()}catch(F){console.error("Error deleting all users:",F),E(` Error deleting all users: ${F.message}`,!0)}},A=()=>{r.value++,P("next")},D=()=>{r.value>1&&(r.value--,P())},N=R=>{var z,H;if(!R)return"";const F=((z=p.value)==null?void 0:z.serviceProviders)||[],O=((H=p.value)==null?void 0:H.customServiceProviders)||[];[...F,...O];const V=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Adapted PE",abbreviation:"APE"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf/Hard of Hearing",abbreviation:"DHH"},{name:"Vision Services",abbreviation:"VI"},{name:"Orientation & Mobility",abbreviation:"OM"},{name:"Other",abbreviation:"OTHER"}].find(j=>j.abbreviation===R);return V?`${V.name} (${V.abbreviation})`:R};return Bt(async()=>{await m(),P()}),Ra(()=>{g&&clearTimeout(g)}),{users:e,currentPage:r,searchType:n,searchTerm:s,activeRowId:i,statusMessage:a,isError:o,hasNextPage:l,validRoles:d,handleSearch:I,debouncedHandleSearch:v,startEdit:w,cancelEdit:b,updateUserField:T,saveUser:_,deleteUser:S,deleteAllUsers:k,loadNextPage:A,loadPreviousPage:D,getProviderLabel:N,appSettings:p,editingUser:u,providersLoaded:y,serviceProviders:x}}},vH={class:"admin-form-row"},xH={class:"user-admin-table users-table striped"},yH={key:0},EH=["data-userid"],bH=["value","disabled","onInput"],_H=["value","disabled","onInput"],SH=["disabled","value","onChange"],TH=["value"],wH={key:0},AH={key:0},CH={key:1},IH=["value"],kH={key:1},DH={class:"admin-action-btns"},PH=["onClick"],FH=["onClick"],RH=["onClick"],OH={class:"admin-pagination"},NH=["disabled"],MH=["disabled"];function LH(t,e,r,n,s,i){return L(),U("div",null,[e[14]||(e[14]=f("h2",null,"Edit Users",-1)),f("div",vH,[Ae(f("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.searchTerm=a),placeholder:"Search by name or email",onInput:e[1]||(e[1]=(...a)=>n.debouncedHandleSearch&&n.debouncedHandleSearch(...a))},null,544),[[Je,n.searchTerm]]),Ae(f("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.searchType=a),onChange:e[3]||(e[3]=(...a)=>n.handleSearch&&n.handleSearch(...a))},e[9]||(e[9]=[f("option",{value:"name"},"Name",-1),f("option",{value:"email"},"Email",-1)]),544),[[hr,n.searchType]]),f("button",{onClick:e[4]||(e[4]=(...a)=>n.deleteAllUsers&&n.deleteAllUsers(...a)),style:{"margin-left":"auto",background:"#f44336",color:"#fff",padding:"0.3rem 0.8rem",border:"none","border-radius":"4px",cursor:"pointer"}}," Delete All Users ")]),f("div",{class:Ze(["admin-status-msg",{error:n.isError}])},Q(n.statusMessage),3),f("div",null,[f("table",xH,[e[13]||(e[13]=f("thead",null,[f("tr",null,[f("th",null,"Name"),f("th",null,"Title"),f("th",null,"Email"),f("th",null,"Role"),f("th",null,"Provider Type"),f("th",{style:{"text-align":"center"}},"Actions")])],-1)),f("tbody",null,[n.users.length===0?(L(),U("tr",yH,e[10]||(e[10]=[f("td",{colspan:"5"},"No users found.",-1)]))):Se("",!0),(L(!0),U(Fe,null,Ve(n.users,a=>(L(),U("tr",{key:a.id,class:Ze({"active-row":n.activeRowId===a.id}),"data-userid":a.id},[f("td",null,[f("input",{type:"text",value:a.name||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"name",o.target.value)},null,40,bH)]),f("td",null,[f("input",{type:"text",value:a.title||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"title",o.target.value)},null,40,_H)]),f("td",null,Q(a.email),1),f("td",null,[f("select",{class:"editable-select",disabled:n.activeRowId!==a.id,value:a.role,onChange:o=>n.updateUserField(a.id,"role",o.target.value)},[(L(!0),U(Fe,null,Ve(n.validRoles,o=>(L(),U("option",{key:o,value:o},Q(o.replace(/_/g," ")),9,TH))),128))],40,SH)]),n.providersLoaded?(L(),U("td",wH,[n.activeRowId!==a.id?(L(),U("span",AH,Q(a.provider||""),1)):(L(),U("span",CH,[Ae(f("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>n.editingUser.provider=o)},[e[11]||(e[11]=f("option",{value:""},"None",-1)),(L(!0),U(Fe,null,Ve(n.serviceProviders,o=>(L(),U("option",{key:o,value:o},Q(o),9,IH))),128))],512),[[hr,n.editingUser.provider]])]))])):(L(),U("td",kH,e[12]||(e[12]=[f("span",null,"Loading...",-1)]))),f("td",DH,[n.activeRowId!==a.id?(L(),U("button",{key:0,class:"admin-action-btn edit",onClick:o=>n.startEdit(a.id)},"  ",8,PH)):(L(),U(Fe,{key:1},[f("button",{class:"admin-action-btn save",onClick:o=>n.saveUser(a.id)},"",8,FH),f("button",{class:"admin-action-btn cancel",onClick:e[6]||(e[6]=(...o)=>n.cancelEdit&&n.cancelEdit(...o))},""),f("button",{class:"admin-action-btn delete",onClick:o=>n.deleteUser(a.id)},"",8,RH)],64))])],10,EH))),128))])])]),f("div",OH,[f("button",{onClick:e[7]||(e[7]=(...a)=>n.loadPreviousPage&&n.loadPreviousPage(...a)),disabled:n.currentPage===1}," Previous ",8,NH),f("span",null,"Page "+Q(n.currentPage),1),f("button",{onClick:e[8]||(e[8]=(...a)=>n.loadNextPage&&n.loadNextPage(...a)),disabled:!n.hasNextPage}," Next ",8,MH)])])}const BH=xt(gH,[["render",LH],["__scopeId","data-v-025d820e"]]),UH=[it.VIEW_USERS,it.EDIT_USER,it.DELETE_USER,it.MANAGE_SUBJECTS,it.MANAGE_ROLES,it.VIEW_STUDENTS,it.EDIT_STUDENT_CM,it.EDIT_STUDENT_ALL],r2=[it.EDIT_USER,it.DELETE_USER,it.MANAGE_SUBJECTS,it.MANAGE_ROLES,it.EDIT_STUDENT_CM,it.EDIT_STUDENT_ALL],$H={[it.VIEW_USERS]:"View Users",[it.EDIT_USER]:"Edit User",[it.DELETE_USER]:"Delete User",[it.MANAGE_SUBJECTS]:"Manage Subjects",[it.MANAGE_ROLES]:"Manage Roles",[it.VIEW_STUDENTS]:"View Students",[it.EDIT_STUDENT_CM]:"Edit Students (Own Caseload)",[it.EDIT_STUDENT_ALL]:"Edit All Students"},VH={name:"PermissionsMatrix",setup(){const t=uo(),e="config/permissions_matrix",r=gs({}),n=ne(""),s=ne(!1),i=Ep,a=UH,o=$H,l=(g,v=!1)=>{n.value=g,s.value=v,setTimeout(()=>{n.value="",s.value=!1},3e3)},c=async()=>{try{const g=Qe(t,e),v=await Zt(g);if(v.exists()){const y=v.data();Object.assign(r,y)}else Object.assign(r,Ul)}catch(g){console.error("Error loading permissions matrix:",g),Object.assign(r,Ul)}},u=(g,v,y)=>{if(r2.includes(v)){console.log(`Permission ${v} is read-only and cannot be changed`);return}if(r[g]||(r[g]=[]),y)r[g].includes(v)||r[g].push(v);else{const x=r[g].indexOf(v);x>-1&&r[g].splice(x,1)}},d=g=>r2.includes(g),h=g=>r[g]?r[g].includes(it.TESTING_ALL)?"all":r[g].includes(it.TESTING_PARTIAL)?"partial":"none":"none",p=(g,v)=>{r[g]||(r[g]=[]),[it.TESTING,it.TESTING_ALL,it.TESTING_PARTIAL].forEach(x=>{const E=r[g].indexOf(x);E>-1&&r[g].splice(E,1)}),v==="all"?r[g].push(it.TESTING_ALL):v==="partial"&&r[g].push(it.TESTING_PARTIAL)},m=async()=>{try{await Wt(Qe(t,e),r),l(" Permissions updated.",!1)}catch(g){console.error("Error saving permissions:",g),l(` Error saving: ${g.message}`,!0)}};return Bt(()=>{c()}),{matrix:r,statusMessage:n,isError:s,validRoles:i,actionList:a,actionLabels:o,updatePermission:u,isReadOnlyPermission:d,getTestingLevel:h,updateTestingPermission:p,savePermissions:m}}},jH={class:"permissions-table-admin"},HH={style:{"font-weight":"bold"}},GH=["data-role","data-action","checked","disabled","onChange"],WH={key:0,class:"read-only-indicator",title:"This permission matches Firebase security rules and cannot be changed"},zH={style:{"text-align":"center"}},KH=["value","onChange"];function qH(t,e,r,n,s,i){return L(),U("div",null,[e[4]||(e[4]=f("h3",null,"Role Permissions Matrix",-1)),e[5]||(e[5]=f("div",{class:"permissions-note"},[f("p",null,[f("strong",null,"Note:"),Oe(" Permissions marked with  are read-only and match Firebase security rules. These cannot be changed to ensure database security consistency. Only view permissions and testing access can be modified.")])],-1)),f("table",jH,[f("thead",null,[f("tr",null,[e[1]||(e[1]=f("th",{style:{"min-width":"120px"}},"Role",-1)),(L(!0),U(Fe,null,Ve(n.actionList,a=>(L(),U("th",{key:a,style:{"min-width":"110px"}},Q(n.actionLabels[a]),1))),128)),e[2]||(e[2]=f("th",{style:{"min-width":"120px"}},"Testing Access",-1))])]),f("tbody",null,[(L(!0),U(Fe,null,Ve(n.validRoles,a=>(L(),U("tr",{key:a},[f("td",HH,Q(a),1),(L(!0),U(Fe,null,Ve(n.actionList,o=>{var l;return L(),U("td",{key:o,style:{"text-align":"center"}},[f("input",{type:"checkbox","data-role":a,"data-action":o,checked:(l=n.matrix[a])==null?void 0:l.includes(o),disabled:n.isReadOnlyPermission(o),class:Ze({"read-only":n.isReadOnlyPermission(o)}),onChange:c=>n.updatePermission(a,o,c.target.checked)},null,42,GH),n.isReadOnlyPermission(o)?(L(),U("span",WH,"")):Se("",!0)])}),128)),f("td",zH,[f("select",{value:n.getTestingLevel(a),onChange:o=>n.updateTestingPermission(a,o.target.value),style:{width:"100px",padding:"2px"}},e[3]||(e[3]=[f("option",{value:"none"},"None",-1),f("option",{value:"partial"},"Partial",-1),f("option",{value:"all"},"All",-1)]),40,KH)])]))),128))])]),f("button",{onClick:e[0]||(e[0]=(...a)=>n.savePermissions&&n.savePermissions(...a)),style:{padding:"0.5em 1.4em","font-size":"1.08em"}}," Save "),f("span",{style:_n({marginLeft:"1em",fontSize:"1em",color:n.isError?"#b42c2c":"#267838"})},Q(n.statusMessage),5)])}const XH=xt(VH,[["render",qH],["__scopeId","data-v-0d793d95"]]),YH={class:"admin-students"},JH={class:"admin-form-row"},QH={class:"search-container"},ZH={class:"user-admin-table students-table striped"},eG={key:0},tG=["data-id"],rG=["value","disabled","onInput"],nG=["value","disabled","onInput"],sG=["value","disabled","onInput"],aG=["value","disabled","onInput"],iG=["title"],oG={class:"admin-action-btns"},lG=["onClick"],cG=["onClick"],uG=["onClick"],dG={class:"admin-pagination"},fG=["disabled"],hG=["disabled"],Wm=50,pG={__name:"AdminStudents",setup(t){const e=uo(),{students:r,fetchStudents:n,updateStudent:s,deleteStudent:i}=Oa(),a=ne(""),o=ne([]),l=ne(1),c=ne(null),u=ne({}),d=ne(""),h=ne(!1);let p=null;const m=()=>{p&&clearTimeout(p),p=setTimeout(()=>{x()},300)},g=_e(()=>{const N=(l.value-1)*Wm,R=N+Wm;return o.value.slice(N,R)}),v=_e(()=>Math.ceil(o.value.length/Wm)),y=(N,R=!1)=>{d.value=N,h.value=R,setTimeout(()=>{d.value="",h.value=!1},5e3)},x=()=>{if(!Ts("studentSearch",20,6e4).allowed){y("Too many search requests. Please wait before searching again.",!0);return}const R=un(a.value,{trim:!0,maxLength:100,removeDangerous:!0}),F=Hr(R);if(!F.isSafe){y(`Security threat detected in search: ${F.threats.join(", ")}`,!0),a.value=R;return}R!==a.value&&(a.value=R);const O=R.toLowerCase();O?o.value=r.value.filter(B=>{const V=ut(B,"firstName")||"",z=ut(B,"lastName")||"";return`${V} ${z}`.toLowerCase().includes(O)}):o.value=r.value,l.value=1},E=N=>{if(c.value)return;const R=r.value.find(F=>F.id===N);R&&(c.value=N,u.value={...R})},I=()=>{c.value=null,u.value={}},P=(N,R,F)=>{if(u.value.id===N){let O=F;if(typeof F=="string"){O=un(F,{trim:!0,maxLength:R==="caseManagerId"?50:100,removeDangerous:!0});const B=Hr(O);if(!B.isSafe){y(`Security threat detected in ${R}: ${B.threats.join(", ")}`,!0);return}const V=md(O,{max:R==="caseManagerId"?50:100,fieldName:R});if(!V.isValid){y(V.error,!0);return}}u.value[R]=O}},w=async N=>{try{if(!Ts("saveStudent",10,6e4).allowed){y("Too many save requests. Please wait before saving again.",!0);return}const F={};if(Object.keys(u.value).forEach(z=>{z!=="id"&&u.value[z]!==r.value.find(H=>H.id===N)[z]&&(F[z]=u.value[z])}),Object.keys(F).length===0){I();return}const O=D4(F),B=k4(O,{isNew:!1});if(!B.isValid){y(`Validation failed: ${B.errors.join(", ")}`,!0);return}Object.assign(u.value,O),await s(N,O);const V=r.value.findIndex(z=>z.id===N);V!==-1&&(r.value[V]={...r.value[V],...O}),y(" Student updated.")}catch(R){y(" Update failed.",!0),console.error("Update error:",R)}finally{I()}},b=async N=>{if(!Ts("deleteStudent",5,3e5).allowed){y("Too many delete requests. Please wait before deleting again.",!0);return}if(confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await i(N),y(" Student deleted.");const F=r.value.findIndex(O=>O.id===N);F!==-1&&r.value.splice(F,1),x()}catch(F){y(" Delete failed.",!0),console.error("Delete error:",F)}},T=async()=>{if(!Ts("deleteAllStudents",1,36e5).allowed){y("Delete all operation rate limited. Please wait before trying again.",!0);return}const R=`Are you sure you want to delete ALL ${r.value.length} students? 

This action cannot be undone and will permanently remove all student data.

Type "DELETE ALL STUDENTS" to confirm:`;if(prompt(R)!=="DELETE ALL STUDENTS"){y("Delete all operation cancelled.",!1);return}try{y("Deleting all students...");const O=lx(e);let B=0;for(const V of r.value)O.delete(Qe(e,"students",V.id)),B++,B>=500&&(await O.commit(),B=0);B>0&&await O.commit(),r.value=[],o.value=[],y(" All students deleted.")}catch(O){y(" Failed to delete all students.",!0),console.error("Delete all error:",O)}},_=N=>{if(!N)return"N/A";try{if(N&&typeof N.toDate=="function")return N.toDate().toLocaleDateString();const R=new Date(N);return isNaN(R.getTime())?"Invalid Date":R.toLocaleDateString()}catch{return"Invalid Date"}},S=N=>{var R;return((R=N.app)==null?void 0:R.staffIds)&&Array.isArray(N.app.staffIds)&&N.app.staffIds.length>0},k=N=>S(N)?`Staff ID Array present (${N.app.staffIds.length} staff members)`:"Staff ID Array missing or empty",A=()=>{l.value<v.value&&l.value++},D=()=>{l.value>1&&l.value--};return Bt(async()=>{try{await n(),o.value=r.value}catch(N){y("Failed to load students.",!0),console.error("Load students error:",N)}}),Ra(()=>{p&&clearTimeout(p)}),(N,R)=>(L(),U("div",YH,[R[3]||(R[3]=f("h2",null,"Edit Students",-1)),f("div",JH,[f("div",QH,[Ae(f("input",{type:"text","onUpdate:modelValue":R[0]||(R[0]=F=>a.value=F),onInput:m,placeholder:"Search by name",class:"search-input"},null,544),[[Je,a.value]]),f("button",{onClick:T,class:"delete-all-btn"},"Delete All Students")])]),d.value?(L(),U("div",{key:0,class:Ze(["admin-status-msg",{error:h.value}])},Q(d.value),3)):Se("",!0),f("table",ZH,[R[2]||(R[2]=f("thead",null,[f("tr",null,[f("th",null,"ID"),f("th",null,"First Name"),f("th",null,"Last Name"),f("th",null,"Grade"),f("th",null,"Case Manager"),f("th",{title:"Staff ID Array present"},"staffIdArr"),f("th",null,"Date Added"),f("th",null,"Actions")])],-1)),f("tbody",null,[g.value.length?Se("",!0):(L(),U("tr",eG,R[1]||(R[1]=[f("td",{colspan:"8"},"No students found.",-1)]))),(L(!0),U(Fe,null,Ve(g.value,F=>(L(),U("tr",{key:F.id,class:Ze({"active-row":c.value===F.id}),"data-id":F.id},[f("td",null,Q(F.id),1),f("td",null,[f("input",{class:"editable-input","data-field":"first_name",value:Z(ut)(F,"firstName")||"",disabled:c.value!==F.id,onInput:O=>P(F.id,"first_name",O.target.value)},null,40,rG)]),f("td",null,[f("input",{class:"editable-input","data-field":"last_name",value:Z(ut)(F,"lastName")||"",disabled:c.value!==F.id,onInput:O=>P(F.id,"last_name",O.target.value)},null,40,nG)]),f("td",null,[f("input",{class:"editable-input","data-field":"grade",value:Z(ut)(F,"grade")||"",disabled:c.value!==F.id,onInput:O=>P(F.id,"grade",O.target.value)},null,40,sG)]),f("td",null,[f("input",{class:"editable-input","data-field":"caseManagerId",value:F.caseManagerId||"",disabled:c.value!==F.id,onInput:O=>P(F.id,"caseManagerId",O.target.value)},null,40,aG)]),f("td",{class:"staff-id-status",title:k(F)},[f("span",{class:Ze(["status-icon",S(F)?"present":"missing"])},Q(S(F)?"":""),3)],8,iG),f("td",null,Q(_(F.created_at)),1),f("td",oG,[c.value===F.id?(L(),U(Fe,{key:0},[f("button",{onClick:O=>w(F.id),class:"admin-action-btn save",title:"Save"},"",8,lG),f("button",{onClick:I,class:"admin-action-btn cancel",title:"Cancel"},""),f("button",{onClick:O=>b(F.id),class:"admin-action-btn delete",title:"Delete"},"",8,cG)],64)):(L(),U("button",{key:1,onClick:O=>E(F.id),class:"admin-action-btn edit",title:"Edit"},"",8,uG))])],10,tG))),128))])]),f("div",dG,[f("button",{onClick:D,disabled:l.value===1,class:"admin-btn"}," Prev ",8,fG),f("span",null,"Page "+Q(l.value)+" of "+Q(v.value),1),f("button",{onClick:A,disabled:l.value===v.value,class:"admin-btn"}," Next ",8,hG)])]))}},mG=xt(pG,[["__scopeId","data-v-ac89687e"]]),gG={class:"bulk-importer"},vG={key:0,class:"step-container"},xG={class:"file-upload-section"},yG={class:"file-input-wrapper"},EG={for:"csv-file",class:"file-label"},bG={class:"file-text"},_G={key:0,class:"error-message"},SG={key:1,class:"file-info"},TG={key:0},wG={class:"step-actions"},AG=["disabled"],CG={key:1,class:"step-container"},IG={class:"field-mapping-section"},kG={class:"mapping-grid"},DG={class:"csv-column"},PG={class:"app-field"},FG=["onUpdate:modelValue"],RG={class:"sample-data"},OG={key:0,class:"validation-errors"},NG={class:"step-actions"},MG=["disabled"],LG={key:2,class:"step-container"},BG={class:"preview-section"},UG={class:"preview-stats"},$G={class:"stat-item"},VG={class:"stat-value"},jG={class:"stat-item"},HG={class:"stat-value valid"},GG={class:"stat-item"},WG={class:"stat-value invalid"},zG={class:"preview-table-container"},KG={class:"preview-table"},qG={key:0,class:"error-list"},XG={key:1,class:"no-errors"},YG={class:"import-options"},JG={class:"options-grid"},QG={class:"option-item"},ZG={class:"option-item"},eW={class:"option-item"},tW={class:"step-actions"},rW=["disabled"],nW={key:3,class:"step-container"},sW={class:"results-section"},aW={class:"results-stats"},iW={class:"stat-item success"},oW={class:"stat-value"},lW={class:"stat-item error"},cW={class:"stat-value"},uW={class:"stat-item"},dW={class:"stat-value"},fW={key:0,class:"import-errors"},hW={class:"results-actions"},pW={key:4,class:"loading-overlay"},mW={class:"loading-content"},gW={class:"progress-bar"},vW={__name:"StudentBulkImporter",emits:["close","imported"],setup(t,{emit:e}){const r=e,{users:n,fetchUsers:s}=Na(),i=ne(1),a=ne(""),o=ne(""),l=ne([]),c=ne([]),u=ne({}),d=ne(""),h=ne([]),p=ne([]),m=ne("valid-only"),g=ne(!1),v=ne(!1),y=ne(0),x=ne({successful:0,failed:0,errors:[],processingTime:0}),E=ne(null),I=_e(()=>{const te=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Y=Object.values(u.value).filter(X=>X),Ee=Y.includes("app.studentData.ssid");return te.every(X=>Y.includes(X))&&Ee}),P=_e(()=>p.value.filter(te=>te.errors.length===0)),w=_e(()=>p.value.filter(te=>te.errors.length>0));Bt(async()=>{console.log(" StudentBulkImporter component mounted!");try{await s(),console.log(" Users loaded successfully:",Object.keys(n.value).length,"users"),console.log("First few users:",Object.values(n.value).slice(0,3).map(te=>({id:te.id,name:te.name,role:te.role})))}catch(te){console.error(" Failed to load users:",te)}});const b=async te=>{const Y=te.target.files[0];if(Y){if(!Y.name.toLowerCase().endsWith(".csv")&&Y.type!=="text/csv"){d.value="File must be a CSV file (.csv extension)";return}if(Y.size>10*1024*1024){d.value="File must be smaller than 10MB";return}d.value="",a.value=Y.name,o.value=z(Y.size);try{const Ee=await Y.text();T(Ee)}catch(Ee){d.value="Failed to read CSV file: "+Ee.message}}},T=te=>{try{const Y=te.trim().split(`
`);if(Y.length<2)throw new Error("CSV must have at least a header row and one data row");const Ee=Y[0].split(",").map(q=>q.trim().replace(/"/g,""));c.value=Ee;const X=[];for(let q=1;q<Y.length;q++){const J={};let ge="",ae=!1,se=0;for(let le=0;le<Y[q].length;le++){const xe=Y[q][le];xe==='"'?ae=!ae:xe===","&&!ae?(J[Ee[se]]=ge.trim().replace(/^"|"$/g,""),ge="",se++):ge+=xe}se<Ee.length&&(J[Ee[se]]=ge.trim().replace(/^"|"$/g,"")),X.push(J)}l.value=X,console.log("Parsed CSV data:",X.length,"records")}catch(Y){d.value="Failed to parse CSV: "+Y.message}},_=()=>{const te={SSID:"app.studentData.ssid",FirstName:"app.studentData.firstName",LastName:"app.studentData.lastName",Grade:"app.studentData.grade",Plan:"app.studentData.plan",CaseManagerId:"app.studentData.caseManagerId",ReviewDate:"app.dates.reviewDate",ReevalDate:"app.dates.reevalDate",MeetingDate:"app.dates.meetingDate",Period1Teacher:"app.schedule.periods.1",Period2Teacher:"app.schedule.periods.2",Period3Teacher:"app.schedule.periods.3",Period4Teacher:"app.schedule.periods.4",Period5Teacher:"app.schedule.periods.5",Period6Teacher:"app.schedule.periods.6",PeriodSHTeacher:"app.schedule.periods.SH",ClassServices:"app.schedule.classServices",SpeechProvider:"app.providers.speechId",OTProvider:"app.providers.otId",PTProvider:"app.providers.ptId",ATProvider:"app.providers.atId",Audiologist:"app.providers.audId",BISProvider:"app.providers.bisId",DHHProvider:"app.providers.dhhId",HNProvider:"app.providers.hnId",MHProvider:"app.providers.mhId",OMProvider:"app.providers.omId",SCProvider:"app.providers.scId",SWProvider:"app.providers.swId",TRProvider:"app.providers.trId",VIProvider:"app.providers.viId",Flag1:"app.flags.flag1",Flag2:"app.flags.flag2",BIPPdfUrl:"app.documents.bipPdfUrl",AtAGlancePdfUrl:"app.documents.ataglancePdfUrl",Assessment:"app.accommodations.assessment",Instruction:"app.accommodations.instruction"};c.value.forEach(Y=>{te[Y]&&(u.value[Y]=te[Y])})},S=()=>{u.value={}},k=te=>{const Y=l.value[0];if(!Y)return"";const Ee=Y[te];return Ee?te==="ClassServices"&&Ee.includes(",")?`"${Ee}"`:Ee:""},A=()=>{h.value=[];const te=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Y=Object.values(u.value).filter(q=>q),Ee=Y.includes("app.studentData.ssid");te.forEach(q=>{if(!Y.includes(q)){const J=q.split(".").pop();h.value.push(`Required field "${J}" is not mapped`)}}),Ee||h.value.push("SSID (State Student ID) must be mapped to app.studentData.ssid");const X=Y.filter((q,J)=>Y.indexOf(q)!==J);X.length>0&&h.value.push(`Duplicate field mappings: ${X.join(", ")}`)},D=()=>{p.value=l.value.map(te=>{const Y=N(te),Ee=F(Y);return console.log("Row mapping:",{original:te,mapped:Y,errors:Ee}),{data:Y,errors:Ee}})},N=te=>{const Y={app:{studentData:{},dates:{},providers:{},accommodations:{},flags:{},schedule:{periods:{},classServices:[]},documents:{}}};return Object.entries(u.value).forEach(([Ee,X])=>{if(!X||!te[Ee])return;let q=te[Ee].trim();if(!q)return;if(X==="app.schedule.classServices"){q.startsWith('"')&&q.endsWith('"')&&(q=q.slice(1,-1)),Y.app.schedule.classServices=q.split(",").map(ae=>ae.trim()).filter(Boolean);return}if(X.startsWith("app.schedule.periods.")){const ae=X.split(".").pop(),se=q.trim();if(se){const le=K(se);console.log(`Mapping Period ${ae} teacher:`,se,"",le),Y.app.schedule.periods[ae]=le}return}if(X.startsWith("app.providers.")){const ae=X.split(".").pop(),se=q.trim();if(se){const le=re(se);console.log(`Mapping ${ae} provider:`,se,"",le),Y.app.providers[ae]=le}return}if(X==="app.accommodations.assessment"||X==="app.accommodations.instruction"){const ae=X.split(".").pop();Y.app.accommodations[ae]=q;return}if(X.startsWith("app.flags.")){const ae=X.split(".").pop();Y.app.flags[ae]=["true","1","yes","y"].includes(q.toLowerCase());return}if(X.includes("Date")){const[ae,se,le]=X.split(".");Y[ae][se]||(Y[ae][se]={}),Y[ae][se][le]=B(q);return}const J=X.split(".");let ge=Y;for(let ae=0;ae<J.length-1;ae++){const se=J[ae];ge[se]||(ge[se]={}),ge=ge[se]}ge[J[J.length-1]]=q}),Y},R=te=>{const Y=Object.values(n.value).find(Ee=>Ee.id===te||Ee.name===te||Ee.email===te||Ee.aeriesId===te);return console.log("Mapping case manager:",te,"to Firebase ID:",Y==null?void 0:Y.id),Y?Y.id:te},F=te=>{var X,q,J,ge,ae,se,le,xe,ve,Ce,we,Ge,ke,$e,Be,We,ze,be;const Y=[],Ee=te.ssid||((q=(X=te.app)==null?void 0:X.studentData)==null?void 0:q.ssid);return Ee||Y.push("SSID is required (either top-level or in app.studentData)"),(ge=(J=te.app)==null?void 0:J.studentData)!=null&&ge.firstName||Y.push("First name is required"),(se=(ae=te.app)==null?void 0:ae.studentData)!=null&&se.lastName||Y.push("Last name is required"),(xe=(le=te.app)==null?void 0:le.studentData)!=null&&xe.grade||Y.push("Grade is required"),Ee&&!/^\d{9,10}$/.test(Ee)&&Y.push("SSID must be 9-10 digits"),(Ce=(ve=te.app)==null?void 0:ve.studentData)!=null&&Ce.grade&&!["K","1","2","3","4","5","6","7","8","9","10","11","12"].includes(te.app.studentData.grade)&&Y.push("Grade must be K-12"),(Ge=(we=te.app)==null?void 0:we.studentData)!=null&&Ge.plan&&!["IEP","504"].includes(te.app.studentData.plan)&&Y.push("Plan must be IEP or 504"),($e=(ke=te.app)==null?void 0:ke.dates)!=null&&$e.reviewDate&&!O(te.app.dates.reviewDate)&&Y.push("Invalid review date format (use YYYY-MM-DD)"),(We=(Be=te.app)==null?void 0:Be.dates)!=null&&We.reevalDate&&!O(te.app.dates.reevalDate)&&Y.push("Invalid reevaluation date format (use YYYY-MM-DD)"),(be=(ze=te.app)==null?void 0:ze.dates)!=null&&be.meetingDate&&!O(te.app.dates.meetingDate)&&Y.push("Invalid meeting date format (use YYYY-MM-DD)"),Y},O=te=>{if(!te)return!0;const Y=new Date(te);return!isNaN(Y.getTime())&&te.match(/^\d{4}-\d{2}-\d{2}$/)},B=te=>{if(!te)return"";try{const Y=new Date(te);return isNaN(Y.getTime())?"":Y.toISOString().split("T")[0]}catch{return""}},V=te=>{var X,q,J,ge;const Y=((q=(X=te.app)==null?void 0:X.studentData)==null?void 0:q.firstName)||"",Ee=((ge=(J=te.app)==null?void 0:J.studentData)==null?void 0:ge.lastName)||"";return`${Y} ${Ee}`.trim()||"Missing Name"},z=te=>{if(te===0)return"0 Bytes";const Y=1024,Ee=["Bytes","KB","MB","GB"],X=Math.floor(Math.log(te)/Math.log(Y));return parseFloat((te/Math.pow(Y,X)).toFixed(2))+" "+Ee[X]},H=()=>{if(i.value===2){if(A(),h.value.length>0)return;D()}i.value++},j=()=>{i.value--},W=async()=>{v.value=!0,y.value=0;const te=Date.now(),Y=m.value==="valid-only"?P.value:p.value;let Ee=0,X=0;const q=[];try{for(let J=0;J<Y.length;J++){const ge=Y[J];try{await ue(ge.data),Ee++}catch(ae){X++,q.push(`Row ${J+1}: ${ae.message}`)}y.value=Math.round((J+1)/Y.length*100)}x.value={successful:Ee,failed:X,errors:q,processingTime:Date.now()-te},i.value=4,r("imported",{successful:Ee,failed:X})}catch(J){console.error("Import failed:",J),q.push("Import process failed: "+J.message),x.value={successful:Ee,failed:X,errors:q,processingTime:Date.now()-te},i.value=4}finally{v.value=!1}},K=te=>{if(!te)return"";console.log(" Mapping teacher ID:",te),console.log(" Available users:",Object.values(n.value).map(X=>({name:X.name,aeriesId:X.aeriesId,id:X.id})));const Y=Object.values(n.value).find(X=>{const q=String(X.aeriesId)===String(te);return q&&console.log(" Found exact Aeries ID match:",{teacherId:te,user:{name:X.name,aeriesId:X.aeriesId,id:X.id}}),q});if(Y)return console.log(" Using Aeries ID match:",te,"",Y.id,"(",Y.name,")"),Y.id;const Ee=Object.values(n.value).find(X=>X.id===te);return Ee?(console.log(" Using Firebase ID match:",te,"",Ee.id,"(",Ee.name,")"),Ee.id):(console.warn(" No user found for teacher ID:",te),te)},re=te=>{if(!te)return"";console.log(" Mapping provider ID:",te),console.log(" Available users:",Object.values(n.value).map(X=>({name:X.name,aeriesId:X.aeriesId,id:X.id})));const Y=Object.values(n.value).find(X=>{const q=String(X.aeriesId)===String(te);return q&&console.log(" Found exact Aeries ID match:",{providerId:te,user:{name:X.name,aeriesId:X.aeriesId,id:X.id}}),q});if(Y)return console.log(" Using Aeries ID match:",te,"",Y.id,"(",Y.name,")"),Y.id;const Ee=Object.values(n.value).find(X=>X.id===te);return Ee?(console.log(" Using Firebase ID match:",te,"",Ee.id,"(",Ee.name,")"),Ee.id):(console.warn(" No user found for provider ID:",te),te)},he=te=>{try{return te.app&&te.app.studentData&&te.app.studentData.ssid&&te.app.studentData.firstName&&te.app.studentData.lastName&&te.app.studentData.grade&&te.app.schedule&&Array.isArray(te.app.schedule.classServices)}catch{return!1}},ue=async te=>{try{const Y=te.app.studentData.ssid,Ee=wt(Xe,"students"),X=lr(Ee,Vr("app.studentData.ssid","==",Y)),q=await jt(X);if(!q.empty&&!g.value)throw new Error(`Student with SSID ${Y} already exists`);const J={createdAt:Bs(),updatedAt:Bs(),app:{studentData:{firstName:te.app.studentData.firstName||"",lastName:te.app.studentData.lastName||"",grade:te.app.studentData.grade||"",plan:te.app.studentData.plan||"",caseManagerId:R(te.app.studentData.caseManagerId)||"",ssid:Y},dates:{reviewDate:te.app.dates.reviewDate||"",reevalDate:te.app.dates.reevalDate||"",meetingDate:te.app.dates.meetingDate||""},schedule:{periods:te.app.schedule.periods||{1:"",2:"",3:"",4:"",5:"",6:"",SH:""},classServices:Array.isArray(te.app.schedule.classServices)?te.app.schedule.classServices:[]},providers:te.app.providers||{speechId:"",otId:"",ptId:"",atId:"",audId:"",bisId:"",dhhId:"",hnId:"",mhId:"",omId:"",scId:"",swId:"",trId:"",viId:""},accommodations:{assessment:te.app.accommodations.assessment||"",instruction:te.app.accommodations.instruction||""},flags:{flag1:!!te.app.flags.flag1,flag2:!!te.app.flags.flag2},documents:{bipPdfUrl:te.app.documents.bipPdfUrl||null,ataglancePdfUrl:te.app.documents.ataglancePdfUrl||null}}};if(console.log("Saving student data:",{ssid:J.app.studentData.ssid,schedule:J.app.schedule.periods,providers:J.app.providers}),!he(J))throw new Error("Invalid student data structure");if(!q.empty&&g.value){const ge=q.docs[0];await Wt(Qe(Xe,"students",ge.id),J,{merge:!0})}else{const ge=Qe(wt(Xe,"students"));await Wt(ge,J)}}catch(Y){throw console.error("Error importing student:",Y),Y}},pe=()=>{i.value=1,a.value="",o.value="",l.value=[],c.value=[],u.value={},d.value="",h.value=[],p.value=[],x.value={successful:0,failed:0,errors:[],processingTime:0},E.value&&(E.value.value="")};return(te,Y)=>(L(),U("div",gG,[Y[30]||(Y[30]=f("div",{style:{background:"#e8f5e8",border:"2px solid #4caf50",padding:"10px","margin-bottom":"20px","border-radius":"4px","text-align":"center"}},[f("strong",null," StudentBulkImporter Component Loaded Successfully")],-1)),Y[31]||(Y[31]=f("div",{class:"importer-header"},[f("h2",null,"Add Students - Bulk Import"),f("p",{class:"description"}," Import multiple students from a CSV file. The system will map CSV fields to the app's database structure and allow you to preview and validate the data before importing. ")],-1)),i.value===1?(L(),U("div",vG,[Y[8]||(Y[8]=f("div",{class:"step-header"},[f("h3",null,"Step 1: Upload CSV File"),f("p",null,"Select a CSV file containing student data. The first row should contain column headers.")],-1)),f("div",xG,[f("div",yG,[f("input",{type:"file",ref_key:"fileInput",ref:E,onChange:b,accept:".csv",class:"file-input",id:"csv-file"},null,544),f("label",EG,[Y[4]||(Y[4]=f("span",{class:"file-icon"},"",-1)),f("span",bG,Q(a.value||"Choose CSV File"),1)])]),d.value?(L(),U("div",_G,Q(d.value),1)):Se("",!0),a.value?(L(),U("div",SG,[f("p",null,[Y[5]||(Y[5]=f("strong",null,"File:",-1)),Oe(" "+Q(a.value),1)]),f("p",null,[Y[6]||(Y[6]=f("strong",null,"Size:",-1)),Oe(" "+Q(o.value),1)]),l.value.length>0?(L(),U("p",TG,[Y[7]||(Y[7]=f("strong",null,"Records:",-1)),Oe(" "+Q(l.value.length),1)])):Se("",!0)])):Se("",!0)]),Y[9]||(Y[9]=tn('<div class="sample-format" data-v-494a4282><h4 data-v-494a4282>Expected CSV Format:</h4><div class="format-example" data-v-494a4282><code data-v-494a4282> SSID,FirstName,LastName,Grade,Plan,CaseManagerId,ReviewDate,ReevalDate,MeetingDate,Period1Teacher,Period2Teacher,Period3Teacher,Period4Teacher,Period5Teacher,Period6Teacher,SHTeacher,ClassServices,SpeechProvider,OTProvider,PTProvider,ATProvider,Audiologist,BISProvider,DHHProvider,HNProvider,MHProvider,OMProvider,SCProvider,SWProvider,TRProvider,VIProvider,Flag1,Flag2,BIPPdfUrl,AtAGlancePdfUrl,Assessment,Instruction<br data-v-494a4282> 123456789,John,Doe,9,IEP,user003,2025-07-15,2025-12-15,2025-07-10,user007,user008,user009,user010,user011,user012,user013,&quot;SDC: English,RSP: Math&quot;,user020,user021,user022,user023,user024,user025,user026,user027,user028,user029,user030,user031,user032,user033,true,false,https://example.com/bip.pdf,https://example.com/ataglance.pdf,&quot;Allow for test re-takes if the score is below average...&quot;,Divide larger projects or assignments into manageable parts... </code></div><p class="format-note" data-v-494a4282><strong data-v-494a4282>Required fields:</strong> SSID, FirstName, LastName, Grade<br data-v-494a4282><strong data-v-494a4282>App Structure:</strong> All fields map to the app data structure in your database<br data-v-494a4282><strong data-v-494a4282>Schedule fields:</strong> Period1Teacher through Period6Teacher and SHTeacher (Firebase user IDs like user001, user002, etc.)<br data-v-494a4282><strong data-v-494a4282>Provider fields:</strong> All service provider fields (Firebase user IDs like user020, user021, etc.)<br data-v-494a4282><strong data-v-494a4282>Class Services:</strong> Comma-separated list (e.g., &quot;SDC: English,RSP: Math,Co-teach: Science&quot;)<br data-v-494a4282><strong data-v-494a4282>Dates:</strong> Use YYYY-MM-DD format (e.g., 2025-07-15)<br data-v-494a4282><strong data-v-494a4282>Flags:</strong> Use true/false or 1/0<br data-v-494a4282><strong data-v-494a4282>Accommodations:</strong> Text fields for assessment and instruction<br data-v-494a4282><strong data-v-494a4282>Note:</strong> Teacher and provider IDs will be automatically mapped from names, emails, or Aeries IDs if user lookup is available </p></div>',1)),f("div",wG,[f("button",{onClick:H,disabled:!l.value.length,class:"btn btn-primary"}," Next: Map Fields ",8,AG)])])):Se("",!0),i.value===2?(L(),U("div",CG,[Y[15]||(Y[15]=f("div",{class:"step-header"},[f("h3",null,"Step 2: Map CSV Fields"),f("p",null,"Map your CSV columns to the app's database fields. Required fields are marked with *")],-1)),f("div",IG,[f("div",kG,[Y[12]||(Y[12]=tn('<div class="mapping-header" data-v-494a4282><div class="csv-column" data-v-494a4282>CSV Column</div><div class="arrow" data-v-494a4282></div><div class="app-field" data-v-494a4282>App Database Field</div><div class="sample-data" data-v-494a4282>Sample Data</div></div>',1)),(L(!0),U(Fe,null,Ve(c.value,(Ee,X)=>(L(),U("div",{key:X,class:"mapping-row"},[f("div",DG,[f("strong",null,Q(Ee),1)]),Y[11]||(Y[11]=f("div",{class:"arrow"},"",-1)),f("div",PG,[Ae(f("select",{"onUpdate:modelValue":q=>u.value[Ee]=q,class:"field-select"},Y[10]||(Y[10]=[tn('<option value="" data-v-494a4282>-- Skip this field --</option><optgroup label="Required Fields" data-v-494a4282><option value="app.studentData.ssid" data-v-494a4282>SSID (State Student ID) *</option><option value="app.studentData.firstName" data-v-494a4282>First Name *</option><option value="app.studentData.lastName" data-v-494a4282>Last Name *</option><option value="app.studentData.grade" data-v-494a4282>Grade *</option></optgroup><optgroup label="Student Information" data-v-494a4282><option value="app.studentData.plan" data-v-494a4282>Plan Type (IEP/504/RTI/None)</option><option value="app.studentData.caseManagerId" data-v-494a4282>Case Manager ID</option></optgroup><optgroup label="Important Dates" data-v-494a4282><option value="app.dates.reviewDate" data-v-494a4282>Review Date</option><option value="app.dates.reevalDate" data-v-494a4282>Reevaluation Date</option><option value="app.dates.meetingDate" data-v-494a4282>Meeting Date</option></optgroup><optgroup label="Class Schedule" data-v-494a4282><option value="app.schedule.periods.1" data-v-494a4282>Period 1 Teacher ID</option><option value="app.schedule.periods.2" data-v-494a4282>Period 2 Teacher ID</option><option value="app.schedule.periods.3" data-v-494a4282>Period 3 Teacher ID</option><option value="app.schedule.periods.4" data-v-494a4282>Period 4 Teacher ID</option><option value="app.schedule.periods.5" data-v-494a4282>Period 5 Teacher ID</option><option value="app.schedule.periods.6" data-v-494a4282>Period 6 Teacher ID</option><option value="app.schedule.periods.SH" data-v-494a4282>Study Hall Teacher ID</option><option value="app.schedule.classServices" data-v-494a4282>Class Services (Comma-separated)</option></optgroup><optgroup label="Service Providers" data-v-494a4282><option value="app.providers.speechId" data-v-494a4282>Speech Provider ID</option><option value="app.providers.otId" data-v-494a4282>OT Provider ID</option><option value="app.providers.ptId" data-v-494a4282>PT Provider ID</option><option value="app.providers.atId" data-v-494a4282>AT Provider ID</option><option value="app.providers.audId" data-v-494a4282>Audiologist ID</option><option value="app.providers.bisId" data-v-494a4282>BIS Provider ID</option><option value="app.providers.dhhId" data-v-494a4282>DHH Provider ID</option><option value="app.providers.hnId" data-v-494a4282>HN Provider ID</option><option value="app.providers.mhId" data-v-494a4282>MH Provider ID</option><option value="app.providers.omId" data-v-494a4282>OM Provider ID</option><option value="app.providers.scId" data-v-494a4282>SC Provider ID</option><option value="app.providers.swId" data-v-494a4282>SW Provider ID</option><option value="app.providers.trId" data-v-494a4282>TR Provider ID</option><option value="app.providers.viId" data-v-494a4282>VI Provider ID</option></optgroup><optgroup label="Flags" data-v-494a4282><option value="app.flags.flag1" data-v-494a4282>Flag 1 (Boolean)</option><option value="app.flags.flag2" data-v-494a4282>Flag 2 (Boolean)</option></optgroup><optgroup label="Documents" data-v-494a4282><option value="app.documents.bipPdfUrl" data-v-494a4282>BIP PDF URL</option><option value="app.documents.ataglancePdfUrl" data-v-494a4282>At-A-Glance PDF URL</option></optgroup><optgroup label="Accommodations" data-v-494a4282><option value="app.accommodations.assessment" data-v-494a4282>Assessment Accommodations</option><option value="app.accommodations.instruction" data-v-494a4282>Instructional Accommodations</option></optgroup>',9)]),8,FG),[[hr,u.value[Ee]]])]),f("div",RG,[f("code",null,Q(k(Ee)),1)])]))),128))]),f("div",{class:"auto-mapping-section"},[Y[13]||(Y[13]=f("h4",null,"Quick Mapping Options:",-1)),f("div",{class:"quick-actions"},[f("button",{onClick:_,class:"btn btn-secondary"}," Auto-map Common Fields "),f("button",{onClick:S,class:"btn btn-secondary"}," Clear All Mappings ")])]),h.value.length>0?(L(),U("div",OG,[Y[14]||(Y[14]=f("h4",null,"Mapping Issues:",-1)),f("ul",null,[(L(!0),U(Fe,null,Ve(h.value,Ee=>(L(),U("li",{key:Ee,class:"error-item"},Q(Ee),1))),128))])])):Se("",!0)]),f("div",NG,[f("button",{onClick:j,class:"btn btn-secondary"}," Back "),f("button",{onClick:H,disabled:!I.value,class:"btn btn-primary"}," Next: Preview Data ",8,MG)])])):Se("",!0),i.value===3?(L(),U("div",LG,[Y[23]||(Y[23]=f("div",{class:"step-header"},[f("h3",null,"Step 3: Preview and Validate"),f("p",null,"Review the mapped data before importing. Check for any validation errors.")],-1)),f("div",BG,[f("div",UG,[f("div",$G,[Y[16]||(Y[16]=f("span",{class:"stat-label"},"Total Records:",-1)),f("span",VG,Q(l.value.length),1)]),f("div",jG,[Y[17]||(Y[17]=f("span",{class:"stat-label"},"Valid Records:",-1)),f("span",HG,Q(P.value.length),1)]),f("div",GG,[Y[18]||(Y[18]=f("span",{class:"stat-label"},"Invalid Records:",-1)),f("span",WG,Q(w.value.length),1)])]),f("div",zG,[f("table",KG,[Y[19]||(Y[19]=f("thead",null,[f("tr",null,[f("th",null,"Status"),f("th",null,"SSID"),f("th",null,"Name"),f("th",null,"Grade"),f("th",null,"Plan"),f("th",null,"Case Manager"),f("th",null,"Issues")])],-1)),f("tbody",null,[(L(!0),U(Fe,null,Ve(p.value,(Ee,X)=>{var q,J,ge,ae,se,le,xe,ve;return L(),U("tr",{key:X,class:Ze({"invalid-row":Ee.errors.length>0})},[f("td",null,[f("span",{class:Ze(["status-badge",Ee.errors.length>0?"error":"valid"])},Q(Ee.errors.length>0?"Error":"Valid"),3)]),f("td",null,Q(Ee.data.ssid||((J=(q=Ee.data.app)==null?void 0:q.studentData)==null?void 0:J.ssid)||"Missing"),1),f("td",null,Q(V(Ee.data)),1),f("td",null,Q(((ae=(ge=Ee.data.app)==null?void 0:ge.studentData)==null?void 0:ae.grade)||"Missing"),1),f("td",null,Q(((le=(se=Ee.data.app)==null?void 0:se.studentData)==null?void 0:le.plan)||"Not set"),1),f("td",null,Q(((ve=(xe=Ee.data.app)==null?void 0:xe.studentData)==null?void 0:ve.caseManagerId)||"Not set"),1),f("td",null,[Ee.errors.length>0?(L(),U("ul",qG,[(L(!0),U(Fe,null,Ve(Ee.errors,Ce=>(L(),U("li",{key:Ce,class:"error-item"},Q(Ce),1))),128))])):(L(),U("span",XG,"No issues"))])],2)}),128))])])]),f("div",YG,[Y[22]||(Y[22]=f("h4",null,"Import Options:",-1)),f("div",JG,[f("label",QG,[Ae(f("input",{type:"radio","onUpdate:modelValue":Y[0]||(Y[0]=Ee=>m.value=Ee),value:"valid-only"},null,512),[[hi,m.value]]),f("span",null,"Import only valid records ("+Q(P.value.length)+" records)",1)]),f("label",ZG,[Ae(f("input",{type:"radio","onUpdate:modelValue":Y[1]||(Y[1]=Ee=>m.value=Ee),value:"all"},null,512),[[hi,m.value]]),Y[20]||(Y[20]=f("span",null,"Import all records (may cause errors for invalid data)",-1))]),f("label",eW,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":Y[2]||(Y[2]=Ee=>g.value=Ee)},null,512),[[Et,g.value]]),Y[21]||(Y[21]=f("span",null,"Update existing students if SSID already exists",-1))])])])]),f("div",tW,[f("button",{onClick:j,class:"btn btn-secondary"}," Back "),f("button",{onClick:W,disabled:v.value||m.value==="valid-only"&&P.value.length===0,class:"btn btn-primary"},Q(v.value?"Importing...":`Import ${m.value==="valid-only"?P.value.length:l.value.length} Students`),9,rW)])])):Se("",!0),i.value===4?(L(),U("div",nW,[Y[28]||(Y[28]=f("div",{class:"step-header"},[f("h3",null,"Step 4: Import Complete"),f("p",null,"Your bulk import has been completed. Review the results below.")],-1)),f("div",sW,[f("div",aW,[f("div",iW,[Y[24]||(Y[24]=f("span",{class:"stat-label"},"Successfully Imported:",-1)),f("span",oW,Q(x.value.successful),1)]),f("div",lW,[Y[25]||(Y[25]=f("span",{class:"stat-label"},"Failed to Import:",-1)),f("span",cW,Q(x.value.failed),1)]),f("div",uW,[Y[26]||(Y[26]=f("span",{class:"stat-label"},"Total Processing Time:",-1)),f("span",dW,Q(x.value.processingTime)+"ms",1)])]),x.value.errors.length>0?(L(),U("div",fW,[Y[27]||(Y[27]=f("h4",null,"Import Errors:",-1)),f("ul",null,[(L(!0),U(Fe,null,Ve(x.value.errors,Ee=>(L(),U("li",{key:Ee,class:"error-item"},Q(Ee),1))),128))])])):Se("",!0),f("div",hW,[f("button",{onClick:pe,class:"btn btn-secondary"}," Import More Students "),f("button",{onClick:Y[3]||(Y[3]=Ee=>te.$emit("close")),class:"btn btn-primary"}," Close ")])])])):Se("",!0),v.value?(L(),U("div",pW,[f("div",mW,[Y[29]||(Y[29]=f("div",{class:"loading-spinner"},null,-1)),f("p",null,"Importing students... "+Q(y.value)+"%",1),f("div",gW,[f("div",{class:"progress-fill",style:_n({width:y.value+"%"})},null,4)])])])):Se("",!0)]))}},xW=xt(vW,[["__scopeId","data-v-494a4282"]]),yW={class:"permissions-overview"},EW={class:"roles-summary"},bW={class:"role-icon"},_W={class:"role-info"},SW={class:"role-stats"},TW={class:"stat"},wW={class:"stat-number"},AW={class:"stat"},CW={class:"stat-number"},IW={class:"stat"},kW={class:"stat-number"},DW={class:"permissions-matrix"},PW={class:"matrix-table-container"},FW={class:"matrix-table"},RW={class:"permission-info"},OW={class:"permission-name"},NW={class:"permission-description"},MW={class:"permission-firebase"},LW={class:"admin-panel-access"},BW={class:"access-grid"},UW={class:"access-header"},$W={class:"access-icon"},VW={class:"role-name"},jW={key:0,class:"access-details"},HW={class:"access-level"},GW={class:"access-description"},WW={key:1,class:"no-access"},zW={__name:"PermissionsOverview",setup(t){const e={admin:["view_users","edit_user","delete_user","manage_subjects","manage_roles","view_students","edit_student_all","admin_panel_full","testing_all","security_controls","backup_restore","system_config"],administrator:["view_users","edit_user","delete_user","manage_subjects","manage_roles","view_students","edit_student_all","admin_panel_full","testing_all"],administrator_504_CM:["view_users","edit_user","delete_user","manage_subjects","manage_roles","view_students","edit_student_all","admin_panel_limited"],sped_chair:["view_users","view_students","edit_student_all","admin_panel_sped","security_monitoring","aide_management"],case_manager:["view_users","view_students","edit_student_cm","testing_partial"],teacher:["view_users","view_students","testing_partial"],paraeducator:["view_users","view_students","aide_schedule"],service_provider:["view_users","view_students"]},r=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","paraeducator","service_provider"],n=[{key:"admin",name:"Admin",icon:"",description:"Full system access and control",adminAccess:!0,adminLevel:"Full Access",adminDescription:"All admin panel features including permissions management",testingLevel:"All",permissions:e.admin},{key:"administrator",name:"Administrator",icon:"",description:"Administrative management without system permissions",adminAccess:!0,adminLevel:"Full Access",adminDescription:"All admin panel features except permissions management",testingLevel:"All",permissions:e.administrator},{key:"administrator_504_CM",name:"Administrator 504/CM",icon:"",description:"504 plan and case management administration",adminAccess:!0,adminLevel:"Limited Access",adminDescription:"Student management and 504-related functions",testingLevel:"None",permissions:e.administrator_504_CM},{key:"sped_chair",name:"SPED Chair",icon:"",description:"Special education program oversight",adminAccess:!0,adminLevel:"SPED Access",adminDescription:"SPED program management and aide oversight",testingLevel:"None",permissions:e.sped_chair},{key:"case_manager",name:"Case Manager",icon:"",description:"Individual student case management",adminAccess:!1,testingLevel:"Partial",permissions:e.case_manager},{key:"teacher",name:"Teacher",icon:"",description:"Classroom teacher with student access",adminAccess:!1,testingLevel:"Partial",permissions:e.teacher},{key:"paraeducator",name:"Paraeducator",icon:"",description:"Educational aide with schedule access",adminAccess:!1,testingLevel:"None",permissions:e.paraeducator},{key:"service_provider",name:"Service Provider",icon:"",description:"Related services provider",adminAccess:!1,testingLevel:"None",permissions:e.service_provider}],s=[{key:"view_users",name:"View Users",description:"Can view user accounts and basic information",firebaseRule:"Authenticated users only"},{key:"edit_user",name:"Edit Users",description:"Can modify user accounts and roles",firebaseRule:"Admin, Administrator, Administrator 504/CM"},{key:"delete_user",name:"Delete Users",description:"Can remove user accounts",firebaseRule:"Admin, Administrator only"},{key:"view_students",name:"View Students",description:"Can view student records (role-filtered)",firebaseRule:"All authenticated users"},{key:"edit_student_all",name:"Edit All Students",description:"Can modify any student record",firebaseRule:"Admin, Administrator, Administrator 504/CM, SPED Chair"},{key:"edit_student_cm",name:"Edit Own Caseload",description:"Can modify students on own caseload",firebaseRule:"Case Manager (caseload validation)"},{key:"admin_panel_full",name:"Full Admin Panel",description:"Access to all admin panel features",firebaseRule:"Admin, Administrator"},{key:"admin_panel_limited",name:"Limited Admin Panel",description:"Access to student management features",firebaseRule:"Administrator 504/CM"},{key:"admin_panel_sped",name:"SPED Admin Panel",description:"Access to SPED program management",firebaseRule:"SPED Chair"},{key:"testing_all",name:"Full Testing Access",description:"Can access all students in testing view",firebaseRule:"Admin, Administrator"},{key:"testing_partial",name:"Partial Testing Access",description:"Can access assigned students in testing view",firebaseRule:"Case Manager, Teacher"},{key:"security_controls",name:"Security Controls",description:"Access to security monitoring and controls",firebaseRule:"Admin only"},{key:"aide_management",name:"Aide Management",description:"Can manage aide assignments and schedules",firebaseRule:"Admin, Administrator, SPED Chair"},{key:"aide_schedule",name:"Aide Schedule Access",description:"Can view own aide schedule",firebaseRule:"Paraeducator"}],i=(a,o)=>{var l;return((l=e[a])==null?void 0:l.includes(o))||!1};return(a,o)=>(L(),U("div",yW,[o[7]||(o[7]=f("div",{class:"overview-header"},[f("h2",null," Permissions Overview"),f("p",{class:"overview-description"}," This is an informational view showing the current role-based permissions that match your Firebase security rules and role-based view settings. These permissions are hard-coded for consistency and security. ")],-1)),f("div",EW,[(L(),U(Fe,null,Ve(n,l=>f("div",{class:"summary-card",key:l.key},[f("div",{class:Ze(["role-header",l.key])},[f("div",bW,Q(l.icon),1),f("div",_W,[f("h3",null,Q(l.name),1),f("p",null,Q(l.description),1)])],2),f("div",SW,[f("div",TW,[f("span",wW,Q(l.permissions.length),1),o[0]||(o[0]=f("span",{class:"stat-label"},"Permissions",-1))]),f("div",AW,[f("span",CW,Q(l.adminAccess?"Yes":"No"),1),o[1]||(o[1]=f("span",{class:"stat-label"},"Admin Panel",-1))]),f("div",IW,[f("span",kW,Q(l.testingLevel),1),o[2]||(o[2]=f("span",{class:"stat-label"},"Testing Access",-1))])])])),64))]),f("div",DW,[o[4]||(o[4]=f("h3",null," Detailed Permissions Matrix",-1)),o[5]||(o[5]=f("div",{class:"matrix-note"},[f("strong",null,"Note:"),Oe(" These permissions are synchronized with Firebase security rules and cannot be modified. They ensure consistent security across your application. ")],-1)),f("div",PW,[f("table",FW,[o[3]||(o[3]=f("thead",null,[f("tr",null,[f("th",{class:"permission-column"},"Permission"),f("th",{class:"role-header admin"},"Admin"),f("th",{class:"role-header administrator"},"Administrator"),f("th",{class:"role-header administrator_504_CM"},"Admin 504/CM"),f("th",{class:"role-header sped_chair"},"SPED Chair"),f("th",{class:"role-header case_manager"},"Case Manager"),f("th",{class:"role-header teacher"},"Teacher"),f("th",{class:"role-header paraeducator"},"Paraeducator"),f("th",{class:"role-header service_provider"},"Service Provider")])],-1)),f("tbody",null,[(L(),U(Fe,null,Ve(s,l=>f("tr",{key:l.key,class:"permission-row"},[f("td",RW,[f("div",OW,Q(l.name),1),f("div",NW,Q(l.description),1),f("div",MW,Q(l.firebaseRule),1)]),(L(),U(Fe,null,Ve(r,c=>f("td",{key:c,class:"permission-cell"},[f("span",{class:Ze(["permission-indicator",{granted:i(c,l.key)}])},Q(i(c,l.key)?"":""),3)])),64))])),64))])])])]),f("div",LW,[o[6]||(o[6]=f("h3",null," Admin Panel Access",-1)),f("div",BW,[(L(),U(Fe,null,Ve(n,l=>f("div",{key:l.key,class:Ze(["access-card",{"has-access":l.adminAccess}])},[f("div",UW,[f("span",$W,Q(l.adminAccess?"":""),1),f("span",VW,Q(l.name),1)]),l.adminAccess?(L(),U("div",jW,[f("div",HW,Q(l.adminLevel),1),f("div",GW,Q(l.adminDescription),1)])):(L(),U("div",WW," No admin panel access "))],2)),64))])]),o[8]||(o[8]=tn('<div class="firebase-rules" data-v-d7ccf132><h3 data-v-d7ccf132> Firebase Security Rules Summary</h3><div class="rules-grid" data-v-d7ccf132><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132> Users Collection</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> All authenticated users</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write:</strong> Admin, Administrator, Administrator 504/CM only</li><li data-v-d7ccf132><strong data-v-d7ccf132>Delete:</strong> Admin, Administrator only</li></ul></div><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132> Students Collection</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> All authenticated users (role-filtered)</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write (All):</strong> Admin, Administrator, Administrator 504/CM, SPED Chair</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write (Own Caseload):</strong> Case Manager</li><li data-v-d7ccf132><strong data-v-d7ccf132>Read-only:</strong> Teacher, Paraeducator, Service Provider</li></ul></div><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132> App Settings</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> All authenticated users</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write:</strong> Admin, Administrator only</li></ul></div><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132> Audit Logs</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> Admin, Administrator, SPED Chair</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write:</strong> All authenticated users (own actions)</li></ul></div></div></div>',1))]))}},KW=xt(zW,[["__scopeId","data-v-d7ccf132"]]),qW={class:"admin-permissions"},XW={__name:"AdminPermissions",setup(t){return(e,r)=>(L(),U("div",qW,[st(KW)]))}},YW=xt(XW,[["__scopeId","data-v-699444ca"]]);var L4={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(Lt,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var S=P(_);S.chunkSize=parseInt(S.chunkSize),_.step||_.chunk||(S.chunkSize=null),this._handle=new g(S),(this._handle.streamer=this)._config=S}).call(this,T),this.parseChunk=function(_,S){var k=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<k){let D=this._config.newline;D||(A=this._config.quoteChar||'"',D=this._handle.guessLineEndings(_,A)),_=[..._.split(D).slice(k)].join(D)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(A=this._config.beforeFirstChunk(_))!==void 0&&(_=A),this.isFirstChunk=!1,this._halted=!1;var k=this._partialLine+_,A=(this._partialLine="",this._handle.parse(k,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=A.meta.cursor,k=(this._finished||(this._partialLine=k.substring(_-this._baseIndex),this._baseIndex=_),A&&A.data&&(this._rowCount+=A.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:A,workerId:c.WORKER_ID,finished:k});else if(b(this._config.chunk)&&!S){if(this._config.chunk(A,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=A=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(A.data),this._completeResults.errors=this._completeResults.errors.concat(A.errors),this._completeResults.meta=A.meta),this._completed||!k||!b(this._config.complete)||A&&A.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),k||A&&A.meta.paused||this._nextChunk(),A}this._halted=!0},this._sendError=function(_){b(this._config.error)?this._config.error(_):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:_,finished:!1})}}function d(T){var _;(T=T||{}).chunkSize||(T.chunkSize=c.RemoteChunkSize),u.call(this,T),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(S){this._input=S,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),i||(_.onload=w(this._chunkLoaded,this),_.onerror=w(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var S,k=this._config.downloadRequestHeaders;for(S in k)_.setRequestHeader(S,k[S])}var A;this._config.chunkSize&&(A=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+A));try{_.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}i&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(S=>(S=S.getResponseHeader("Content-Range"))!==null?parseInt(S.substring(S.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(S){S=_.statusText||S,this._sendError(new Error(S))}}function h(T){(T=T||{}).chunkSize||(T.chunkSize=c.LocalChunkSize),u.call(this,T);var _,S,k=typeof FileReader<"u";this.stream=function(A){this._input=A,S=A.slice||A.webkitSlice||A.mozSlice,k?((_=new FileReader).onload=w(this._chunkLoaded,this),_.onerror=w(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),A=S.call(A,this._start,D)),_.readAsText(A,this._config.encoding));k||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(_.error)}}function p(T){var _;u.call(this,T=T||{}),this.stream=function(S){return _=S,this._nextChunk()},this._nextChunk=function(){var S,k;if(!this._finished)return S=this._config.chunkSize,_=S?(k=_.substring(0,S),_.substring(S)):(k=_,""),this._finished=!_,this.parseChunk(k)}}function m(T){u.call(this,T=T||{});var _=[],S=!0,k=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):S=!0},this._streamData=w(function(A){try{_.push(typeof A=="string"?A:A.toString(this._config.encoding)),S&&(S=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(D){this._streamError(D)}},this),this._streamError=w(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=w(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(T){var _,S,k,A,D=Math.pow(2,53),N=-D,R=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,F=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,O=this,B=0,V=0,z=!1,H=!1,j=[],W={data:[],errors:[],meta:{}};function K(pe){return T.skipEmptyLines==="greedy"?pe.join("").trim()==="":pe.length===1&&pe[0].length===0}function re(){if(W&&k&&(ue("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),k=!1),T.skipEmptyLines&&(W.data=W.data.filter(function(X){return!K(X)})),he()){let X=function(q,J){b(T.transformHeader)&&(q=T.transformHeader(q,J)),j.push(q)};var Ee=X;if(W)if(Array.isArray(W.data[0])){for(var pe=0;he()&&pe<W.data.length;pe++)W.data[pe].forEach(X);W.data.splice(0,1)}else W.data.forEach(X)}function te(X,q){for(var J=T.header?{}:[],ge=0;ge<X.length;ge++){var ae=ge,se=X[ge],se=((le,xe)=>(ve=>(T.dynamicTypingFunction&&T.dynamicTyping[ve]===void 0&&(T.dynamicTyping[ve]=T.dynamicTypingFunction(ve)),(T.dynamicTyping[ve]||T.dynamicTyping)===!0))(le)?xe==="true"||xe==="TRUE"||xe!=="false"&&xe!=="FALSE"&&((ve=>{if(R.test(ve)&&(ve=parseFloat(ve),N<ve&&ve<D))return 1})(xe)?parseFloat(xe):F.test(xe)?new Date(xe):xe===""?null:xe):xe)(ae=T.header?ge>=j.length?"__parsed_extra":j[ge]:ae,se=T.transform?T.transform(se,ae):se);ae==="__parsed_extra"?(J[ae]=J[ae]||[],J[ae].push(se)):J[ae]=se}return T.header&&(ge>j.length?ue("FieldMismatch","TooManyFields","Too many fields: expected "+j.length+" fields but parsed "+ge,V+q):ge<j.length&&ue("FieldMismatch","TooFewFields","Too few fields: expected "+j.length+" fields but parsed "+ge,V+q)),J}var Y;W&&(T.header||T.dynamicTyping||T.transform)&&(Y=1,!W.data.length||Array.isArray(W.data[0])?(W.data=W.data.map(te),Y=W.data.length):W.data=te(W.data,0),T.header&&W.meta&&(W.meta.fields=j),V+=Y)}function he(){return T.header&&j.length===0}function ue(pe,te,Y,Ee){pe={type:pe,code:te,message:Y},Ee!==void 0&&(pe.row=Ee),W.errors.push(pe)}b(T.step)&&(A=T.step,T.step=function(pe){W=pe,he()?re():(re(),W.data.length!==0&&(B+=pe.data.length,T.preview&&B>T.preview?S.abort():(W.data=W.data[0],A(W,O))))}),this.parse=function(pe,te,Y){var Ee=T.quoteChar||'"',Ee=(T.newline||(T.newline=this.guessLineEndings(pe,Ee)),k=!1,T.delimiter?b(T.delimiter)&&(T.delimiter=T.delimiter(pe),W.meta.delimiter=T.delimiter):((Ee=((X,q,J,ge,ae)=>{var se,le,xe,ve;ae=ae||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ce=0;Ce<ae.length;Ce++){for(var we,Ge=ae[Ce],ke=0,$e=0,Be=0,We=(xe=void 0,new y({comments:ge,delimiter:Ge,newline:q,preview:10}).parse(X)),ze=0;ze<We.data.length;ze++)J&&K(We.data[ze])?Be++:(we=We.data[ze].length,$e+=we,xe===void 0?xe=we:0<we&&(ke+=Math.abs(we-xe),xe=we));0<We.data.length&&($e/=We.data.length-Be),(le===void 0||ke<=le)&&(ve===void 0||ve<$e)&&1.99<$e&&(le=ke,se=Ge,ve=$e)}return{successful:!!(T.delimiter=se),bestDelimiter:se}})(pe,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess)).successful?T.delimiter=Ee.bestDelimiter:(k=!0,T.delimiter=c.DefaultDelimiter),W.meta.delimiter=T.delimiter),P(T));return T.preview&&T.header&&Ee.preview++,_=pe,S=new y(Ee),W=S.parse(_,te,Y),re(),z?{meta:{paused:!0}}:W||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,S.abort(),_=b(T.chunk)?"":_.substring(S.getCharIndex())},this.resume=function(){O.streamer._halted?(z=!1,O.streamer.parseChunk(_,!0)):setTimeout(O.resume,3)},this.aborted=function(){return H},this.abort=function(){H=!0,S.abort(),W.meta.aborted=!0,b(T.complete)&&T.complete(W),_=""},this.guessLineEndings=function(X,Ee){X=X.substring(0,1048576);var Ee=new RegExp(v(Ee)+"([^]*?)"+v(Ee),"gm"),Y=(X=X.replace(Ee,"")).split("\r"),Ee=X.split(`
`),X=1<Ee.length&&Ee[0].length<Y[0].length;if(Y.length===1||X)return`
`;for(var q=0,J=0;J<Y.length;J++)Y[J][0]===`
`&&q++;return q>=Y.length/2?`\r
`:"\r"}}function v(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(T){var _=(T=T||{}).delimiter,S=T.newline,k=T.comments,A=T.step,D=T.preview,N=T.fastMode,R=null,F=!1,O=T.quoteChar==null?'"':T.quoteChar,B=O;if(T.escapeChar!==void 0&&(B=T.escapeChar),(typeof _!="string"||-1<c.BAD_DELIMITERS.indexOf(_))&&(_=","),k===_)throw new Error("Comment character same as delimiter");k===!0?k="#":(typeof k!="string"||-1<c.BAD_DELIMITERS.indexOf(k))&&(k=!1),S!==`
`&&S!=="\r"&&S!==`\r
`&&(S=`
`);var V=0,z=!1;this.parse=function(H,j,W){if(typeof H!="string")throw new Error("Input must be a string");var K=H.length,re=_.length,he=S.length,ue=k.length,pe=b(A),te=[],Y=[],Ee=[],X=V=0;if(!H)return ke();if(N||N!==!1&&H.indexOf(O)===-1){for(var q=H.split(S),J=0;J<q.length;J++){if(Ee=q[J],V+=Ee.length,J!==q.length-1)V+=S.length;else if(W)return ke();if(!k||Ee.substring(0,ue)!==k){if(pe){if(te=[],ve(Ee.split(_)),$e(),z)return ke()}else ve(Ee.split(_));if(D&&D<=J)return te=te.slice(0,D),ke(!0)}}return ke()}for(var ge=H.indexOf(_,V),ae=H.indexOf(S,V),se=new RegExp(v(B)+v(O),"g"),le=H.indexOf(O,V);;)if(H[V]===O)for(le=V,V++;;){if((le=H.indexOf(O,le+1))===-1)return W||Y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:te.length,index:V}),we();if(le===K-1)return we(H.substring(V,le).replace(se,O));if(O===B&&H[le+1]===B)le++;else if(O===B||le===0||H[le-1]!==B){ge!==-1&&ge<le+1&&(ge=H.indexOf(_,le+1));var xe=Ce((ae=ae!==-1&&ae<le+1?H.indexOf(S,le+1):ae)===-1?ge:Math.min(ge,ae));if(H.substr(le+1+xe,re)===_){Ee.push(H.substring(V,le).replace(se,O)),H[V=le+1+xe+re]!==O&&(le=H.indexOf(O,V)),ge=H.indexOf(_,V),ae=H.indexOf(S,V);break}if(xe=Ce(ae),H.substring(le+1+xe,le+1+xe+he)===S){if(Ee.push(H.substring(V,le).replace(se,O)),Ge(le+1+xe+he),ge=H.indexOf(_,V),le=H.indexOf(O,V),pe&&($e(),z))return ke();if(D&&te.length>=D)return ke(!0);break}Y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:te.length,index:V}),le++}}else if(k&&Ee.length===0&&H.substring(V,V+ue)===k){if(ae===-1)return ke();V=ae+he,ae=H.indexOf(S,V),ge=H.indexOf(_,V)}else if(ge!==-1&&(ge<ae||ae===-1))Ee.push(H.substring(V,ge)),V=ge+re,ge=H.indexOf(_,V);else{if(ae===-1)break;if(Ee.push(H.substring(V,ae)),Ge(ae+he),pe&&($e(),z))return ke();if(D&&te.length>=D)return ke(!0)}return we();function ve(Be){te.push(Be),X=V}function Ce(Be){var We=0;return We=Be!==-1&&(Be=H.substring(le+1,Be))&&Be.trim()===""?Be.length:We}function we(Be){return W||(Be===void 0&&(Be=H.substring(V)),Ee.push(Be),V=K,ve(Ee),pe&&$e()),ke()}function Ge(Be){V=Be,ve(Ee),Ee=[],ae=H.indexOf(S,V)}function ke(Be){if(T.header&&!j&&te.length&&!F){var We=te[0],ze=Object.create(null),be=new Set(We);let ye=!1;for(let Te=0;Te<We.length;Te++){let Ne=We[Te];if(ze[Ne=b(T.transformHeader)?T.transformHeader(Ne,Te):Ne]){let He,ot=ze[Ne];for(;He=Ne+"_"+ot,ot++,be.has(He););be.add(He),We[Te]=He,ze[Ne]++,ye=!0,(R=R===null?{}:R)[He]=Ne}else ze[Ne]=1,We[Te]=Ne;be.add(Ne)}ye&&console.warn("Duplicate headers found and renamed."),F=!0}return{data:te,errors:Y,meta:{delimiter:_,linebreak:S,aborted:z,truncated:!!Be,cursor:X+(j||0),renamedHeaders:R}}}function $e(){A(ke()),te=[],Y=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return V}}function x(T){var _=T.data,S=o[_.workerId],k=!1;if(_.error)S.userError(_.error,_.file);else if(_.results&&_.results.data){var A={abort:function(){k=!0,E(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(b(S.userStep)){for(var D=0;D<_.results.data.length&&(S.userStep({data:_.results.data[D],errors:_.results.errors,meta:_.results.meta},A),!k);D++);delete _.results}else b(S.userChunk)&&(S.userChunk(_.results,A,_.file),delete _.results)}_.finished&&!k&&E(_.workerId,_.results)}function E(T,_){var S=o[T];b(S.userComplete)&&S.userComplete(_),S.terminate(),delete o[T]}function I(){throw new Error("Not implemented.")}function P(T){if(typeof T!="object"||T===null)return T;var _,S=Array.isArray(T)?[]:{};for(_ in T)S[_]=P(T[_]);return S}function w(T,_){return function(){T.apply(_,arguments)}}function b(T){return typeof T=="function"}return c.parse=function(T,_){var S=(_=_||{}).dynamicTyping||!1;if(b(S)&&(_.dynamicTypingFunction=S,S={}),_.dynamicTyping=S,_.transform=!!b(_.transform)&&_.transform,!_.worker||!c.WORKERS_SUPPORTED)return S=null,c.NODE_STREAM_INPUT,typeof T=="string"?(T=(k=>k.charCodeAt(0)!==65279?k:k.slice(1))(T),S=new(_.download?d:p)(_)):T.readable===!0&&b(T.read)&&b(T.on)?S=new m(_):(n.File&&T instanceof File||T instanceof Object)&&(S=new h(_)),S.stream(T);(S=(()=>{var k;return!!c.WORKERS_SUPPORTED&&(k=(()=>{var A=n.URL||n.webkitURL||null,D=r.toString();return c.BLOB_URL||(c.BLOB_URL=A.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(k=new n.Worker(k)).onmessage=x,k.id=l++,o[k.id]=k)})()).userStep=_.step,S.userChunk=_.chunk,S.userComplete=_.complete,S.userError=_.error,_.step=b(_.step),_.chunk=b(_.chunk),_.complete=b(_.complete),_.error=b(_.error),delete _.worker,S.postMessage({input:T,config:_,workerId:S.id})},c.unparse=function(T,_){var S=!1,k=!0,A=",",D=`\r
`,N='"',R=N+N,F=!1,O=null,B=!1,V=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||c.BAD_DELIMITERS.filter(function(j){return _.delimiter.indexOf(j)!==-1}).length||(A=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(S=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(F=_.skipEmptyLines),typeof _.newline=="string"&&(D=_.newline),typeof _.quoteChar=="string"&&(N=_.quoteChar),typeof _.header=="boolean"&&(k=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");O=_.columns}_.escapeChar!==void 0&&(R=_.escapeChar+N),_.escapeFormulae instanceof RegExp?B=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(B=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(N),"g"));if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return z(null,T,F);if(typeof T[0]=="object")return z(O||Object.keys(T[0]),T,F)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||O),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),z(T.fields||[],T.data||[],F);throw new Error("Unable to serialize unrecognized input");function z(j,W,K){var re="",he=(typeof j=="string"&&(j=JSON.parse(j)),typeof W=="string"&&(W=JSON.parse(W)),Array.isArray(j)&&0<j.length),ue=!Array.isArray(W[0]);if(he&&k){for(var pe=0;pe<j.length;pe++)0<pe&&(re+=A),re+=H(j[pe],pe);0<W.length&&(re+=D)}for(var te=0;te<W.length;te++){var Y=(he?j:W[te]).length,Ee=!1,X=he?Object.keys(W[te]).length===0:W[te].length===0;if(K&&!he&&(Ee=K==="greedy"?W[te].join("").trim()==="":W[te].length===1&&W[te][0].length===0),K==="greedy"&&he){for(var q=[],J=0;J<Y;J++){var ge=ue?j[J]:J;q.push(W[te][ge])}Ee=q.join("").trim()===""}if(!Ee){for(var ae=0;ae<Y;ae++){0<ae&&!X&&(re+=A);var se=he&&ue?j[ae]:ae;re+=H(W[te][se],ae)}te<W.length-1&&(!K||0<Y&&!X)&&(re+=D)}}return re}function H(j,W){var K,re;return j==null?"":j.constructor===Date?JSON.stringify(j).slice(1,25):(re=!1,B&&typeof j=="string"&&B.test(j)&&(j="'"+j,re=!0),K=j.toString().replace(V,R),(re=re||S===!0||typeof S=="function"&&S(j,W)||Array.isArray(S)&&S[W]||((he,ue)=>{for(var pe=0;pe<ue.length;pe++)if(-1<he.indexOf(ue[pe]))return!0;return!1})(K,c.BAD_DELIMITERS)||-1<K.indexOf(A)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?N+K+N:K)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=y,c.ParserHandle=g,c.NetworkStreamer=d,c.FileStreamer=h,c.StringStreamer=p,c.ReadableStreamStreamer=m,n.jQuery&&((s=n.jQuery).fn.parse=function(T){var _=T.config||{},S=[];return this.each(function(D){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var N=0;N<this.files.length;N++)S.push({file:this.files[N],inputElem:this,instanceConfig:s.extend({},_)})}),k(),this;function k(){if(S.length===0)b(T.complete)&&T.complete();else{var D,N,R,F,O=S[0];if(b(T.before)){var B=T.before(O.file,O.inputElem);if(typeof B=="object"){if(B.action==="abort")return D="AbortError",N=O.file,R=O.inputElem,F=B.reason,void(b(T.error)&&T.error({name:D},N,R,F));if(B.action==="skip")return void A();typeof B.config=="object"&&(O.instanceConfig=s.extend(O.instanceConfig,B.config))}else if(B==="skip")return void A()}var V=O.instanceConfig.complete;O.instanceConfig.complete=function(z){b(V)&&V(z,O.file,O.inputElem),A()},c.parse(O.file,O.instanceConfig)}}function A(){S.splice(0,1),k()}}),a&&(n.onmessage=function(T){T=T.data,c.WORKER_ID===void 0&&T&&(c.WORKER_ID=T.workerId),typeof T.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(T.input,T.config),finished:!0}):(n.File&&T.input instanceof File||T.input instanceof Object)&&(T=c.parse(T.input,T.config))&&n.postMessage({workerId:c.WORKER_ID,results:T,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(h.prototype=Object.create(u.prototype)).constructor=h,(p.prototype=Object.create(p.prototype)).constructor=p,(m.prototype=Object.create(u.prototype)).constructor=m,c})})(L4);var JW=L4.exports;const B4=R4(JW),ko=uo();function U4(t){return t.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,r)=>r.toUpperCase()).replace(/^[A-Z]/,e=>e.toLowerCase())}async function QW(t,e){if(!t)return null;const r=Object.values(e).find(n=>{var s;return n.aeriesId===t||n.aeriesId===parseInt(t)||((s=n.aeriesId)==null?void 0:s.toString())===(t==null?void 0:t.toString())});return r?r.id:(console.warn(`No Firebase user found for Aeries teacher ID: ${t}`),null)}function vv(t){return{sourcedId:"stateId",SSID:"stateId",StateStudentID:"stateId",StudentNumber:"localId",givenName:"firstName",FirstName:"firstName",familyName:"lastName",LastName:"lastName",middleName:"middleName",MiddleName:"middleName",email:"email",Email:"email",phone:"phone",Phone:"phone",dateOfBirth:"birthDate",DOB:"birthDate",sex:"gender",Gender:"gender",grade:"grade",Grade:"grade",Address:"address",City:"city",State:"state",ZipCode:"zipCode",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",AttendanceRate:"attendanceRate",attendanceRate:"attendanceRate",Period1TeacherId:"schedule.periods.1",period1TeacherId:"schedule.periods.1",Period2TeacherId:"schedule.periods.2",period2TeacherId:"schedule.periods.2",Period3TeacherId:"schedule.periods.3",period3TeacherId:"schedule.periods.3",Period4TeacherId:"schedule.periods.4",period4TeacherId:"schedule.periods.4",Period5TeacherId:"schedule.periods.5",period5TeacherId:"schedule.periods.5",Period6TeacherId:"schedule.periods.6",period6TeacherId:"schedule.periods.6",Period7TeacherId:"schedule.periods.7",period7TeacherId:"schedule.periods.7",SHTeacherId:"schedule.periods.SH",shTeacherId:"schedule.periods.SH"}[t]||U4(t)}function xv(t){return{SSID:"ssid",FirstName:"firstName",LastName:"lastName",MiddleName:"middleName",Grade:"grade",DOB:"dob",Gender:"gender",Ethnicity:"ethnicity",School:"school",Address:"address",City:"city",State:"state",ZipCode:"zipCode",Phone:"phone",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",ELL:"ell",504:"504",IEP:"iep",CaseManager:"caseManager",Disability:"disability",ServiceMinutes:"serviceMinutes",Goals:"goals",Notes:"notes",Plan:"plan",ReviewDate:"reviewDate",ReevalDate:"reevalDate",MeetingDate:"meetingDate",SpeechProvider:"speechProvider",MHProvider:"mhProvider",OTProvider:"otProvider",ProgramAccommodations:"programAccommodations",Accommodations:"programAccommodations",IEP_Services:"iepServices"}[t]||U4(t)}async function ZW(t){return new Promise((e,r)=>{B4.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));const i=Object.keys(s[0]).map(o=>o.trim().toLowerCase());if(!(i.includes("sourcedid")||i.includes("ssid")||i.includes("statestudentid")))return r(new Error("Missing required 'sourcedId' or 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function ez(t,e){var a;let r=0;const n=wt(ko,"users"),s=await jt(n),i={};s.forEach(o=>{i[o.id]={id:o.id,...o.data()}}),console.log(`Loaded ${Object.keys(i).length} users for teacher ID mapping`);for(const o of t){const l=(a=o.sourcedId||o.SSID||o.ssid||o.StateStudentID||o.stateStudentId)==null?void 0:a.trim();if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={firstName:"",lastName:"",grade:"",birthDate:"",gender:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",parentName:"",parentPhone:"",parentEmail:"",attendanceRate:"",schedule:{periods:{}}};for(const u of e){const d=vv(u),h=o[u],p=h!=null&&typeof h=="string"?h.trim():h!=null?String(h):null;if(d.startsWith("schedule.periods.")){const m=d.split(".")[2];if(p){const g=await QW(p,i);g?(c.schedule.periods[m]=g,console.log(`Mapped Aeries teacher ID ${p} to Firebase user ID ${g} for period ${m}`)):console.warn(`Could not map Aeries teacher ID ${p} for period ${m}`)}}else c[d]=p}c.lastAeriesImport=new Date().toISOString(),console.log("Final aeriesData.schedule structure:",JSON.stringify(c.schedule,null,2));try{const u=wt(ko,"students"),d=lr(u,Vr("app.studentData.ssid","==",l)),h=await jt(d);if(h.empty){const p=Qe(wt(ko,"students")),m={app:{studentData:{ssid:l}},aeries:c,createdAt:Bs()};await Wt(p,m),console.log(`Created new student ${p.id} with Aeries data for SSID ${l}`)}else{const p=h.docs[0];await Wt(Qe(ko,"students",p.id),{aeries:c},{merge:!0}),console.log(`Updated existing student ${p.id} with Aeries data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import Aeries data for SSID ${l}:`,u)}}return r}async function tz(t){return new Promise((e,r)=>{B4.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));if(!Object.keys(s[0]).some(a=>a.trim().toLowerCase()==="ssid"))return r(new Error("Missing required 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function rz(t,e){var n,s,i,a;let r=0;for(const o of t){const l=((n=o.SSID)==null?void 0:n.trim())||((s=o.ssid)==null?void 0:s.trim());if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={};for(const u of e){const d=xv(u);u==="IEP_Services"||u==="iep_services"?c[d]=((i=o[u])==null?void 0:i.split(";").map(h=>h.trim()))||[]:u==="ProgramAccommodations"||u==="Accommodations"?c[d]=((a=o[u])==null?void 0:a.split(";").map(h=>h.trim()))||[]:c[d]=o[u]}c.lastSeisImport=new Date().toISOString();try{const u=wt(ko,"students"),d=lr(u,Vr("app.studentData.ssid","==",l)),h=await jt(d);if(h.empty){const p=Qe(wt(ko,"students")),m={app:{studentData:{ssid:l}},seis:c,createdAt:Bs()};await Wt(p,m),console.log(`Created new student ${p.id} with SEIS data for SSID ${l}`)}else{const p=h.docs[0];await Wt(Qe(ko,"students",p.id),{seis:c},{merge:!0}),console.log(`Updated existing student ${p.id} with SEIS data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import SEIS data for SSID ${l}:`,u)}}return r}const nz={name:"SeisImport",setup(){const t=ne(null),e=ne(null),r=ne([]),n=ne([]),s=ne([]),i=ne([]),a=ne(""),o=ne(!1),l=_e(()=>r.value.length>0&&s.value.length>0),c=(p,m=!1)=>{a.value=p,o.value=m,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:p=>{const m=p.target.files[0];if(m){const g=Oc(m,{allowedTypes:["csv"],maxSize:10485760,fieldName:"SEIS Import File"});if(!g.isValid){c(g.error,!0),p.target.value="";return}const v=Hr(m.name);if(!v.isSafe){c(`File name contains potentially dangerous content: ${v.threats.join(", ")}`,!0),p.target.value="";return}e.value=m}},previewFile:async()=>{const p=e.value;if(!p){c(" Please select a CSV file.",!0);return}if(!Ts("seisPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const v=(await tz(p)).map(x=>{const E={};return Object.entries(x).forEach(([I,P])=>{const w=un(I,{trim:!0,maxLength:100,removeDangerous:!0});let b=P;if(typeof P=="string"){b=un(P,{trim:!0,maxLength:500,removeDangerous:!0});const T=Hr(b);T.isSafe||(console.warn(`Security threat detected in SEIS data: ${T.threats.join(", ")}`),b="")}E[w]=b}),E});r.value=v,c(` Loaded ${r.value.length} rows.`);const y=Object.keys(r.value[0]||{}).filter(x=>x.length>0);n.value=y,s.value=[...y],i.value=r.value.slice(0,5)}catch(g){c(` Error: ${g.message}`,!0),console.error("SEIS Parse Error:",g)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!Ts("seisImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} SEIS records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const m=r.value.map(v=>{const y={};return s.value.forEach(x=>{v[x]!==void 0&&(y[x]=v[x])}),y}),g=m.filter(v=>Object.values(v).some(x=>x&&typeof x=="string"&&x.trim().length>0));if(g.length===0){c(" No valid records found to import.",!0);return}if(g.length!==m.length){const v=m.length-g.length;c(` Skipping ${v} invalid records. Importing ${g.length} valid records.`)}await rz(g,s.value),c(` Successfully imported ${g.length} SEIS records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(m){c(` Import failed: ${m.message}`,!0),console.error("SEIS Import Error:",m)}}}}}},sz={class:"seis-import"},az=["disabled"],iz={key:0,id:"seis-field-options"},oz=["value"],lz={key:1,id:"seis-preview-container",style:{"margin-top":"1rem"}},cz={border:"1",cellpadding:"4"},uz=["disabled"];function dz(t,e,r,n,s,i){return L(),U("div",sz,[e[5]||(e[5]=f("h3",null,"Upload SEIS CSV",-1)),f("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),f("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,az),n.fieldOptions.length>0?(L(),U("div",iz,[e[4]||(e[4]=f("h4",null,"Select fields to import:",-1)),(L(!0),U(Fe,null,Ve(n.fieldOptions,a=>(L(),U("label",{key:a},[Ae(f("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,oz),[[Et,n.selectedFields]]),Oe(" "+Q(a),1)]))),128))])):Se("",!0),n.previewData.length>0?(L(),U("div",lz,[f("table",cz,[f("thead",null,[f("tr",null,[(L(!0),U(Fe,null,Ve(n.fieldOptions,a=>(L(),U("th",{key:a},Q(a),1))),128))])]),f("tbody",null,[(L(!0),U(Fe,null,Ve(n.previewData,(a,o)=>(L(),U("tr",{key:o},[(L(!0),U(Fe,null,Ve(n.fieldOptions,l=>(L(),U("td",{key:l},Q(a[l]||""),1))),128))]))),128))])]),f("p",null,"Showing first "+Q(n.previewData.length)+" of "+Q(n.parsedData.length)+" rows.",1)])):Se("",!0),f("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,uz),f("p",{class:Ze(["status-msg",{error:n.isError}])},Q(n.statusMessage),3)])}const fz=xt(nz,[["render",dz],["__scopeId","data-v-b942d3b4"]]),hz={name:"AeriesImport",setup(){const t=ne(null),e=ne(null),r=ne([]),n=ne([]),s=ne([]),i=ne([]),a=ne(""),o=ne(!1),l=_e(()=>r.value.length>0&&s.value.length>0),c=(p,m=!1)=>{a.value=p,o.value=m,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:p=>{const m=p.target.files[0];if(m){const g=Oc(m,{allowedTypes:["csv"],maxSize:10485760,fieldName:"Aeries Import File"});if(!g.isValid){c(g.error,!0),p.target.value="";return}const v=Hr(m.name);if(!v.isSafe){c(`File name contains potentially dangerous content: ${v.threats.join(", ")}`,!0),p.target.value="";return}e.value=m}},previewFile:async()=>{const p=e.value;if(!p){c(" Please select a CSV file.",!0);return}if(!Ts("aeriesPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const v=(await ZW(p)).map(x=>{const E={};return Object.entries(x).forEach(([I,P])=>{const w=un(I,{trim:!0,maxLength:100,removeDangerous:!0});let b=P;if(typeof P=="string"){b=un(P,{trim:!0,maxLength:500,removeDangerous:!0});const T=Hr(b);T.isSafe||(console.warn(`Security threat detected in Aeries data: ${T.threats.join(", ")}`),b="")}E[w]=b}),E});r.value=v,c(` Loaded ${r.value.length} rows.`);const y=Object.keys(r.value[0]||{}).filter(x=>x.length>0);n.value=y,s.value=[...y],i.value=r.value.slice(0,5)}catch(g){c(` Error: ${g.message}`,!0),console.error("Aeries Parse Error:",g)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!Ts("aeriesImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} Aeries records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const m=r.value.map(v=>{const y={};return s.value.forEach(x=>{v[x]!==void 0&&(y[x]=v[x])}),y}),g=m.filter(v=>Object.values(v).some(x=>x&&typeof x=="string"&&x.trim().length>0));if(g.length===0){c(" No valid records found to import.",!0);return}if(g.length!==m.length){const v=m.length-g.length;c(` Skipping ${v} invalid records. Importing ${g.length} valid records.`)}await ez(g,s.value),c(` Successfully imported ${g.length} Aeries records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(m){c(` Import failed: ${m.message}`,!0),console.error("Aeries Import Error:",m)}}}}}},pz={class:"aeries-import"},mz=["disabled"],gz={key:0,id:"aeries-field-options"},vz=["value"],xz={key:1,id:"aeries-preview-container",style:{"margin-top":"1rem"}},yz={border:"1",cellpadding:"4"},Ez=["disabled"];function bz(t,e,r,n,s,i){return L(),U("div",pz,[e[5]||(e[5]=f("h3",null,"Upload Aeries CSV",-1)),f("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),f("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,mz),n.fieldOptions.length>0?(L(),U("div",gz,[e[4]||(e[4]=f("h4",null,"Select fields to import:",-1)),(L(!0),U(Fe,null,Ve(n.fieldOptions,a=>(L(),U("label",{key:a},[Ae(f("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,vz),[[Et,n.selectedFields]]),Oe(" "+Q(a),1)]))),128))])):Se("",!0),n.previewData.length>0?(L(),U("div",xz,[f("table",yz,[f("thead",null,[f("tr",null,[(L(!0),U(Fe,null,Ve(n.fieldOptions,a=>(L(),U("th",{key:a},Q(a),1))),128))])]),f("tbody",null,[(L(!0),U(Fe,null,Ve(n.previewData,(a,o)=>(L(),U("tr",{key:o},[(L(!0),U(Fe,null,Ve(n.fieldOptions,l=>(L(),U("td",{key:l},Q(a[l]||""),1))),128))]))),128))])]),f("p",null,"Showing first "+Q(n.previewData.length)+" of "+Q(n.parsedData.length)+" rows.",1)])):Se("",!0),f("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,Ez),f("p",{class:Ze(["status-msg",{error:n.isError}])},Q(n.statusMessage),3)])}const _z=xt(hz,[["render",bz],["__scopeId","data-v-b40a9547"]]);function Sz(){const t=tc(Nd()),e=ne(!1),r=ne(!1),n=ne(""),s=ne(""),i=ne(!1),a=gs({baseUrl:"encrypted",clientId:"encrypted",clientSecret:"encrypted",selectedSchoolId:"school123",selectedClassIds:["class1","class2"],selectedApiTypes:{oneroster:!0,nativeAeries:!0},selectedEndpoints:["/schools","/students","/api/special-education/students"]}),o=ne([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"},{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),l=(k,A=!1)=>{s.value=k,i.value=A,setTimeout(()=>{s.value="",i.value=!1},5e3)},c=()=>{a.baseUrl="https://demo.aeries.net/aeries",a.clientId="1279e5c6b747b6d62b7c76db3a205d40eb7458e678a90493d537d5af6b953550",a.clientSecret="68019dbf8d8ba82980dd148eecc3977ac0d7f1f040d444225874c88eb80b9c1a",l("Demo credentials loaded. Click Connect to test.")},u=async()=>{if(!a.baseUrl||!a.clientId||!a.clientSecret)return l("Please fill in all connection fields.",!0),!1;r.value=!0,l("Connecting to Aeries API...");try{const D=(await _a(t,"getAeriesToken")({baseUrl:a.baseUrl,clientId:a.clientId,clientSecret:a.clientSecret})).data;if(D.success&&D.access_token)return n.value=D.access_token,e.value=!0,l(" Successfully connected to Aeries API!"),!0;throw new Error("No access token received")}catch(k){const A=k.message||"Connection failed";return l(` Connection failed: ${A}`,!0),console.error("Aeries API Connection Error:",k),!1}finally{r.value=!1}},d=()=>{e.value=!1,n.value="",l("Disconnected from Aeries API.")},h=async k=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const N=(await _a(t,"testAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:k,accessToken:n.value})).data;if(N.success)return l(` Successfully fetched data from ${k}`),{data:N.data,responseTime:N.responseTime};throw new Error(N.error||"API call failed")}catch(A){const D=A.message||"API call failed";return l(` API call failed: ${D}`,!0),console.error("Aeries API Test Error:",A),{error:D}}},p=async k=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const N=(await _a(t,"testCustomAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:k,accessToken:n.value})).data;return N.success?(l(` Successfully fetched data from ${k}`),{data:N.data,responseTime:N.responseTime}):{error:N.error||"API call failed"}}catch(A){const D=A.message||"API call failed";return l(` API call failed: ${D}`,!0),console.error("Custom Aeries API Test Error:",A),{error:D}}},m=async()=>await h("/students"),g=async()=>await h("/teachers"),v=async()=>{const k=["/api/special-education/students","/api/students/special-education","/api/iep/students","/api/504/students"];for(const A of k){const D=await p(A);if(D&&!D.error)return D}return{error:"No special education endpoints found"}},y=async()=>await p("/api/special-education/ieps"),x=async()=>await p("/api/special-education/504-plans"),E=async()=>await p("/api/special-education/accommodations"),I=async()=>await p("/api/special-education/services"),P=async()=>await p("/api/special-education/case-managers"),w=async()=>{const k={},A=o.value.filter(D=>D.path.includes("special-education")||D.path.includes("iep")||D.path.includes("504"));for(const D of A)k[D.path]=await p(D.path);return k},b=async()=>{var A;const k=await h("/students");if(k&&!k.error&&k.data){const D=((A=k.data.students)==null?void 0:A[0])||k.data[0],N=D&&(D.specialEducation||D.iep||D.plan504||D.disabilities||D.accommodations);return{success:!0,hasSpecialEdFields:N,sampleStudent:D,message:N?"OneRoster includes special education data!":"OneRoster does not include special education data"}}return k},T=async()=>{const k=["?filter=specialEducation=true","?filter=iep=true","?filter=plan504=true","?filter=disabilities=*","?filter=accommodations=*"],A={};for(const D of k)A[D]=await h(`/students${D}`);return A};async function _({baseUrl:k,accessToken:A}){const D=tc(),F=await _a(D,"testAeriesEndpoint")({baseUrl:k,endpoint:"/schools",accessToken:A});return F.data.data.orgs||F.data.data.schools||F.data.data||[]}async function S({baseUrl:k,accessToken:A,schoolId:D}){const N=tc(),R=_a(N,"testAeriesEndpoint"),F=`/classes?filter=school.sourcedId='${D}'`,O=await R({baseUrl:k,endpoint:F,accessToken:A});return O.data.data.classes||O.data.data||[]}return{isConnected:e,isConnecting:r,accessToken:n,connectionStatus:s,isError:i,connectionConfig:a,availableEndpoints:o,showStatus:l,loadDemoCredentials:c,connect:u,disconnect:d,testEndpoint:h,testCustomEndpoint:p,fetchStudents:m,fetchTeachers:g,fetchSpecialEducationStudents:v,fetchIEPRecords:y,fetch504Plans:x,fetchAccommodations:E,fetchServices:I,fetchCaseManagers:P,testAllSpecialEducationEndpoints:w,testOneRosterForSpecialEd:b,testStudentsWithSpecialEd:T,fetchSchools:_,fetchClasses:S}}const zm=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t.charCodeAt(n)^e.charCodeAt(n%e.length));return btoa(r)},Km=(t,e)=>{const r=atob(t);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r.charCodeAt(s)^e.charCodeAt(s%e.length));return n};function Tz(){const t=uo(),e=jo(),r=ne(!1),n=ne(null),s=()=>{const c=e.currentUser;if(!c)throw new Error("User not authenticated");return c.uid+"_aeries_config_key"};return{isLoading:r,error:n,saveAeriesConfig:async c=>{if(!e.currentUser)throw new Error("User must be authenticated to save configuration");r.value=!0,n.value=null;try{const u=e.currentUser,d=s(),h={baseUrl:zm(c.baseUrl,d),clientId:zm(c.clientId,d),clientSecret:zm(c.clientSecret,d),selectedSchoolId:c.selectedSchoolId||"",selectedClassIds:c.selectedClassIds||[],manualClassInput:c.manualClassInput||"",savedAt:new Date().toISOString(),userId:u.uid},p=Qe(t,"users",u.uid,"aeries_config","current");return await Wt(p,h),{success:!0,message:"Configuration saved securely"}}catch(u){throw n.value=u.message,console.error("Failed to save Aeries configuration:",u),u}finally{r.value=!1}},loadAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to load configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=s(),d=Qe(t,"users",c.uid,"aeries_config","current"),h=await Zt(d);if(!h.exists())return null;const p=h.data();if(p.userId!==c.uid)throw new Error("Configuration security check failed");return{baseUrl:Km(p.baseUrl,u),clientId:Km(p.clientId,u),clientSecret:Km(p.clientSecret,u),selectedSchoolId:p.selectedSchoolId||"",selectedClassIds:p.selectedClassIds||[],manualClassInput:p.manualClassInput||"",savedAt:p.savedAt}}catch(c){throw n.value=c.message,console.error("Failed to load Aeries configuration:",c),c}finally{r.value=!1}},deleteAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to delete configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=Qe(t,"users",c.uid,"aeries_config","current");return await io(u),{success:!0,message:"Configuration deleted securely"}}catch(c){throw n.value=c.message,console.error("Failed to delete Aeries configuration:",c),c}finally{r.value=!1}},hasSavedConfig:async()=>{if(!e.currentUser)return!1;try{const c=e.currentUser,u=Qe(t,"users",c.uid,"aeries_config","current");return(await Zt(u)).exists()}catch(c){return console.error("Failed to check for saved configuration:",c),!1}}}}const wz={name:"AeriesAPIConnector",setup(){const{isConnected:t,isConnecting:e,accessToken:r,connectionStatus:n,isError:s,connectionConfig:i,availableEndpoints:a,showStatus:o,loadDemoCredentials:l,connect:c,disconnect:u,testEndpoint:d,testAllSpecialEducationEndpoints:h,testOneRosterForSpecialEd:p,testStudentsWithSpecialEd:m,fetchSchools:g,fetchClasses:v}=Sz(),{isLoading:y,error:x,saveAeriesConfig:E,loadAeriesConfig:I,deleteAeriesConfig:P,hasSavedConfig:w}=Tz(),b=ne(!1),T=ne(null),_=ne(""),S=ne(null),k=ne([]),A=ne(""),D=ne([]),N=ne([]),R=ne(!1),F=ne(""),O=ne(""),B=ne(!1),V=ne({oneroster:!1,nativeAeries:!1}),z=ne([]),H=ne([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"}]),j=ne([{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),W=_e(()=>i.baseUrl&&i.clientId&&i.clientSecret),K=async()=>{if(await c())try{b.value=!0;const le=await g({baseUrl:i.baseUrl,accessToken:r.value});k.value=le||[],A.value=""}catch(le){console.error("Failed to fetch schools:",le),o("Failed to fetch schools",!0),k.value=[]}finally{b.value=!1}},re=async se=>{b.value=!0,_.value=se,T.value=null,S.value=null;const le=await d(se);le&&!le.error?(T.value=le.data,S.value=le.responseTime):le&&le.error&&(T.value={error:le.error}),b.value=!1},he=async()=>{b.value=!0,await h(),b.value=!1},ue=async()=>{b.value=!0,_.value="/students (SPED check)",T.value=null,S.value=null;const se=await p();se&&!se.error?(T.value=se,o(se.message)):se&&se.error&&(T.value={error:se.error},o(` OneRoster test failed: ${se.error}`,!0)),b.value=!1},pe=async()=>{b.value=!0,_.value="/students (SPED filters)",T.value=null,S.value=null;const se=await m();se&&(T.value=se,o("OneRoster SPED filter tests completed")),b.value=!1};Ut(A,async se=>{if(!se){D.value=[],N.value=[];return}R.value=!1,F.value="",b.value=!0;try{D.value=await v({baseUrl:i.baseUrl,accessToken:r.value,schoolId:se}),N.value=[]}catch{R.value=!0,D.value=[],N.value=[]}finally{b.value=!1}});const te=_e(()=>t.value&&k.value.length>0),Y=_e(()=>te.value&&A.value),Ee=_e(()=>V.value.oneroster||V.value.nativeAeries),X=()=>{const se=[];V.value.oneroster&&se.push(...H.value),V.value.nativeAeries&&se.push(...j.value),a.value=se},q=(se,le=!1)=>{O.value=se,B.value=le,setTimeout(()=>{O.value="",B.value=!1},5e3)},J=async()=>{try{const se={baseUrl:i.baseUrl,clientId:i.clientId,clientSecret:i.clientSecret,selectedSchoolId:A.value,selectedClassIds:N.value,manualClassInput:F.value,selectedApiTypes:V.value,selectedEndpoints:z.value};await E(se),q(" Configuration saved securely to Firebase!")}catch(se){console.error("Failed to save configuration:",se),q(` Failed to save configuration: ${se.message}`,!0)}},ge=async()=>{try{const se=await I();if(!se){q(" No saved configuration found",!0);return}i.baseUrl=se.baseUrl||"",i.clientId=se.clientId||"",i.clientSecret=se.clientSecret||"",A.value=se.selectedSchoolId||"",N.value=se.selectedClassIds||[],F.value=se.manualClassInput||"",se.selectedApiTypes&&(V.value=se.selectedApiTypes),se.selectedEndpoints&&(z.value=se.selectedEndpoints),X();const le=se.savedAt?new Date(se.savedAt).toLocaleString():"Unknown";q(` Configuration loaded securely (saved: ${le})`)}catch(se){console.error("Failed to load configuration:",se),q(` Failed to load configuration: ${se.message}`,!0)}},ae=async()=>{if(confirm("Are you sure you want to permanently delete the saved configuration? This action cannot be undone."))try{await P(),q(" Configuration permanently deleted from Firebase!")}catch(se){console.error("Failed to clear configuration:",se),q(` Failed to clear configuration: ${se.message}`,!0)}};return Bt(async()=>{try{if(await w()){const le=await I();le&&(i.baseUrl=le.baseUrl||"",i.clientId=le.clientId||"",i.clientSecret=le.clientSecret||"",le.selectedApiTypes&&(V.value=le.selectedApiTypes),le.selectedEndpoints&&(z.value=le.selectedEndpoints),X(),q(" Configuration auto-loaded securely from Firebase"))}}catch(se){console.error("Failed to auto-load configuration:",se)}}),{connectionConfig:i,isConnected:t,isConnecting:e,isLoading:b,connectionStatus:n,isError:s,apiResults:T,currentEndpoint:_,responseTime:S,availableEndpoints:a,canConnect:W,loadDemoCredentials:l,connect:K,disconnect:u,testEndpoint:re,handleTestSpecialEd:he,handleTestOneRosterSpecialEd:ue,handleTestStudentsWithSpecialEd:pe,schools:k,selectedSchoolId:A,classes:D,selectedClassIds:N,classesFetchError:R,manualClassInput:F,canShowSchoolDropdown:te,canShowClasses:Y,configStatus:O,configError:B,storageLoading:y,storageError:x,saveConfiguration:J,loadConfiguration:ge,clearConfiguration:ae,selectedApiTypes:V,selectedEndpoints:z,onerosterEndpoints:H,nativeAeriesEndpoints:j,hasSelectedApiTypes:Ee,updateAvailableEndpoints:X}}},Az={class:"aeries-api-connector"},Cz={class:"connection-form"},Iz={class:"form-group"},kz=["disabled"],Dz={class:"form-group"},Pz=["disabled"],Fz={class:"form-group"},Rz=["disabled"],Oz={class:"button-group"},Nz=["disabled"],Mz=["disabled"],Lz={class:"api-type-selection"},Bz={class:"api-type-options"},Uz={class:"api-type-option"},$z={class:"checkbox-label"},Vz={class:"api-type-option"},jz={class:"checkbox-label"},Hz={key:0,class:"endpoint-selection"},Gz={class:"endpoint-categories"},Wz={key:0,class:"endpoint-category"},zz={class:"endpoint-checkboxes"},Kz=["value"],qz={class:"endpoint-name"},Xz={class:"endpoint-path-small"},Yz={key:1,class:"endpoint-category"},Jz={class:"endpoint-checkboxes"},Qz=["value"],Zz={class:"endpoint-name"},eK={class:"endpoint-path-small"},tK={class:"config-management"},rK={class:"config-buttons"},nK=["disabled"],sK=["disabled"],aK=["disabled"],iK={key:1,class:"api-testing"},oK={class:"special-ed-section"},lK={class:"quick-test-buttons"},cK=["disabled"],uK=["disabled"],dK=["disabled"],fK=["disabled"],hK=["disabled"],pK=["disabled"],mK={class:"endpoint-grid"},gK={class:"endpoint-path"},vK={class:"endpoint-description"},xK=["onClick","disabled"],yK={key:0,class:"api-results"},EK={class:"results-header"},bK={class:"endpoint-tested"},_K={key:0,class:"response-time"},SK={class:"results-content"},TK={key:2,class:"form-group"},wK=["value"],AK={key:3,class:"form-group"},CK={key:0},IK=["value"],kK={key:1};function DK(t,e,r,n,s,i){return L(),U("div",Az,[e[48]||(e[48]=tn('<h3 data-v-0f37c4fc>Aeries API Connection</h3><div class="api-info-section" data-v-0f37c4fc><h4 data-v-0f37c4fc>Getting Students with IEP/504 Plans</h4><div class="info-grid" data-v-0f37c4fc><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> OneRoster API (Limited)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> All students, basic info</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Cannot filter:</strong> Students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> You&#39;d get ALL students, not just SPED</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> Custom Aeries API (Recommended)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Only students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Includes:</strong> Accommodations, services, case managers</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Perfect for your use case</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> CSV Import (Fallback)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Filtered data from Aeries export</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Process:</strong> Export SPED students  Import CSV</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Works but requires manual steps</p></div></div><div class="testing-note" data-v-0f37c4fc><p data-v-0f37c4fc><strong data-v-0f37c4fc>Test the buttons below to see what your Aeries instance supports!</strong></p></div></div>',2)),f("div",Cz,[f("div",Iz,[e[24]||(e[24]=f("label",{for:"baseUrl"},"Base URL:",-1)),Ae(f("input",{id:"baseUrl","onUpdate:modelValue":e[0]||(e[0]=a=>n.connectionConfig.baseUrl=a),type:"url",placeholder:"https://demo.aeries.net/aeries",disabled:n.isConnected},null,8,kz),[[Je,n.connectionConfig.baseUrl]])]),f("div",Dz,[e[25]||(e[25]=f("label",{for:"clientId"},"Client ID:",-1)),Ae(f("input",{id:"clientId","onUpdate:modelValue":e[1]||(e[1]=a=>n.connectionConfig.clientId=a),type:"text",placeholder:"Enter your Client ID",disabled:n.isConnected},null,8,Pz),[[Je,n.connectionConfig.clientId]])]),f("div",Fz,[e[26]||(e[26]=f("label",{for:"clientSecret"},"Client Secret:",-1)),Ae(f("input",{id:"clientSecret","onUpdate:modelValue":e[2]||(e[2]=a=>n.connectionConfig.clientSecret=a),type:"password",placeholder:"Enter your Client Secret",disabled:n.isConnected},null,8,Rz),[[Je,n.connectionConfig.clientSecret]])]),f("div",Oz,[f("button",{onClick:e[3]||(e[3]=(...a)=>n.connect&&n.connect(...a)),disabled:!n.canConnect||n.isConnecting,class:"btn-primary"},Q(n.isConnecting?"Connecting...":"Connect"),9,Nz),n.isConnected?(L(),U("button",{key:0,onClick:e[4]||(e[4]=(...a)=>n.disconnect&&n.disconnect(...a)),class:"btn-secondary"}," Disconnect ")):Se("",!0),f("button",{onClick:e[5]||(e[5]=(...a)=>n.loadDemoCredentials&&n.loadDemoCredentials(...a)),disabled:n.isConnected,class:"btn-demo"}," Load Demo Credentials ",8,Mz)]),f("div",Lz,[e[37]||(e[37]=f("h4",null,"Select API Types",-1)),e[38]||(e[38]=f("p",{class:"api-type-description"},"Choose which Aeries API types you want to use. This determines which endpoints will be available for testing and data import.",-1)),f("div",Bz,[f("div",Uz,[f("label",$z,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>n.selectedApiTypes.oneroster=a),onChange:e[7]||(e[7]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[Et,n.selectedApiTypes.oneroster]]),e[27]||(e[27]=f("span",{class:"checkmark"},null,-1)),e[28]||(e[28]=f("strong",null,"OneRoster API",-1))]),e[29]||(e[29]=f("p",{class:"api-type-desc"},"Standard OneRoster endpoints for basic student, teacher, and class data",-1))]),f("div",Vz,[f("label",jz,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>n.selectedApiTypes.nativeAeries=a),onChange:e[9]||(e[9]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[Et,n.selectedApiTypes.nativeAeries]]),e[30]||(e[30]=f("span",{class:"checkmark"},null,-1)),e[31]||(e[31]=f("strong",null,"Native Aeries v5 API",-1))]),e[32]||(e[32]=f("p",{class:"api-type-desc"},"Aeries-specific endpoints for special education, IEP, and 504 plan data",-1))])]),n.hasSelectedApiTypes?(L(),U("div",Hz,[e[35]||(e[35]=f("h5",null,"Select Endpoints to Use",-1)),e[36]||(e[36]=f("p",{class:"endpoint-description"},"Check the endpoints you want to enable for data import and testing.",-1)),f("div",Gz,[n.selectedApiTypes.oneroster?(L(),U("div",Wz,[e[33]||(e[33]=f("h6",null,"OneRoster Endpoints",-1)),f("div",zz,[(L(!0),U(Fe,null,Ve(n.onerosterEndpoints,a=>(L(),U("label",{key:a.path,class:"endpoint-checkbox"},[Ae(f("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>n.selectedEndpoints=o),value:a.path},null,8,Kz),[[Et,n.selectedEndpoints]]),f("span",qz,Q(a.name),1),f("span",Xz,Q(a.path),1)]))),128))])])):Se("",!0),n.selectedApiTypes.nativeAeries?(L(),U("div",Yz,[e[34]||(e[34]=f("h6",null,"Native Aeries v5 Endpoints",-1)),f("div",Jz,[(L(!0),U(Fe,null,Ve(n.nativeAeriesEndpoints,a=>(L(),U("label",{key:a.path,class:"endpoint-checkbox"},[Ae(f("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=o=>n.selectedEndpoints=o),value:a.path},null,8,Qz),[[Et,n.selectedEndpoints]]),f("span",Zz,Q(a.name),1),f("span",eK,Q(a.path),1)]))),128))])])):Se("",!0)])])):Se("",!0)]),f("div",tK,[e[39]||(e[39]=f("h4",null,"Save/Load Configuration",-1)),e[40]||(e[40]=f("div",{class:"security-note"},[f("p",null,[f("strong",null," Security:"),Oe(" Your API credentials are encrypted and stored securely in Firebase. Only you can access your saved configuration.")])],-1)),f("div",rK,[f("button",{onClick:e[12]||(e[12]=(...a)=>n.saveConfiguration&&n.saveConfiguration(...a)),disabled:!n.canConnect||n.storageLoading,class:"btn-save"},Q(n.storageLoading?" Saving...":" Save Configuration"),9,nK),f("button",{onClick:e[13]||(e[13]=(...a)=>n.loadConfiguration&&n.loadConfiguration(...a)),disabled:n.storageLoading,class:"btn-load"},Q(n.storageLoading?" Loading...":" Load Saved Configuration"),9,sK),f("button",{onClick:e[14]||(e[14]=(...a)=>n.clearConfiguration&&n.clearConfiguration(...a)),disabled:n.storageLoading,class:"btn-clear"},Q(n.storageLoading?" Deleting...":" Clear Saved Configuration"),9,aK)]),n.configStatus?(L(),U("div",{key:0,class:Ze(["config-status",{error:n.configError}])},Q(n.configStatus),3)):Se("",!0)])]),n.connectionStatus?(L(),U("div",{key:0,class:Ze(["status-message",{error:n.isError}])},Q(n.connectionStatus),3)):Se("",!0),n.isConnected?(L(),U("div",iK,[e[43]||(e[43]=f("h4",null,"Test API Endpoints",-1)),f("div",oK,[e[41]||(e[41]=f("h5",null,"Special Education Data (IEP/504)",-1)),f("div",lK,[f("button",{onClick:e[15]||(e[15]=(...a)=>n.handleTestSpecialEd&&n.handleTestSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-special"},Q(n.isLoading?"Testing...":"Test All SPED Endpoints"),9,cK),f("button",{onClick:e[16]||(e[16]=(...a)=>n.handleTestOneRosterSpecialEd&&n.handleTestOneRosterSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster for SPED Data ",8,uK),f("button",{onClick:e[17]||(e[17]=(...a)=>n.handleTestStudentsWithSpecialEd&&n.handleTestStudentsWithSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster SPED Filters ",8,dK),f("button",{onClick:e[18]||(e[18]=a=>t.handleTestEndpoint("/api/special-education/students")),disabled:n.isLoading,class:"btn-test-special"}," SPED Students ",8,fK),f("button",{onClick:e[19]||(e[19]=a=>t.handleTestEndpoint("/api/special-education/ieps")),disabled:n.isLoading,class:"btn-test-special"}," IEP Records ",8,hK),f("button",{onClick:e[20]||(e[20]=a=>t.handleTestEndpoint("/api/special-education/504-plans")),disabled:n.isLoading,class:"btn-test-special"}," 504 Plans ",8,pK)])]),f("div",mK,[(L(!0),U(Fe,null,Ve(n.availableEndpoints,a=>(L(),U("div",{key:a.path,class:"endpoint-card"},[f("h5",null,Q(a.name),1),f("p",gK,Q(a.path),1),f("p",vK,Q(a.description),1),f("button",{onClick:o=>n.testEndpoint(a.path),disabled:n.isLoading,class:"btn-test"},Q(n.isLoading&&n.currentEndpoint===a.path?"Testing...":"Test"),9,xK)]))),128))]),n.apiResults?(L(),U("div",yK,[e[42]||(e[42]=f("h4",null,"API Response",-1)),f("div",EK,[f("span",bK,"Endpoint: "+Q(n.currentEndpoint),1),n.responseTime?(L(),U("span",_K,"Response time: "+Q(n.responseTime)+"ms",1)):Se("",!0)]),f("div",SK,[f("pre",null,Q(JSON.stringify(n.apiResults,null,2)),1)])])):Se("",!0)])):Se("",!0),n.canShowSchoolDropdown?(L(),U("div",TK,[e[45]||(e[45]=f("label",null,"School",-1)),Ae(f("select",{"onUpdate:modelValue":e[21]||(e[21]=a=>n.selectedSchoolId=a)},[e[44]||(e[44]=f("option",{value:"",disabled:""},"Select a school",-1)),(L(!0),U(Fe,null,Ve(n.schools,a=>(L(),U("option",{key:a.sourcedId||a.id||a.schoolId,value:a.sourcedId||a.id||a.schoolId},Q(a.name||a.title||a.schoolName),9,wK))),128))],512),[[hr,n.selectedSchoolId]])])):Se("",!0),n.canShowClasses?(L(),U("div",AK,[e[47]||(e[47]=f("label",null,"Case Manager Classes",-1)),n.classesFetchError?(L(),U("div",kK,[e[46]||(e[46]=f("p",{class:"error"},"Could not fetch classes. Enter class names manually (comma separated):",-1)),Ae(f("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>n.manualClassInput=a),type:"text",placeholder:"Class1, Class2, ..."},null,512),[[Je,n.manualClassInput]])])):(L(),U("div",CK,[Ae(f("select",{"onUpdate:modelValue":e[22]||(e[22]=a=>n.selectedClassIds=a),multiple:""},[(L(!0),U(Fe,null,Ve(n.classes,a=>(L(),U("option",{key:a.sourcedId||a.id||a.classId,value:a.sourcedId||a.id||a.classId},Q(a.title||a.name||a.className),9,IK))),128))],512),[[hr,n.selectedClassIds]])]))])):Se("",!0)])}const PK=xt(wz,[["render",DK],["__scopeId","data-v-0f37c4fc"]]),Tl=ne(null);function gd(){const t=new Promise(e=>{const r=Wh($t,async n=>{if(n)try{const s=Qe(Xe,"users",n.uid),i=await Zt(s);i.exists()?Tl.value={uid:n.uid,email:n.email,displayName:n.displayName,...i.data()}:(console.warn(`User ${n.uid} exists in Auth but not in users collection`),Tl.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null})}catch(s){console.error("Error fetching user document:",s),Tl.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null}}else Tl.value=null;e(Tl.value),r()})});return{currentUser:Tl,waitForAuthInit:t}}const FK={key:0,class:"app-settings-panel"},RK={class:"settings-section"},OK={class:"grades-checkboxes"},NK=["checked"],MK=["value"],LK={class:"settings-section"},BK={key:0,class:"class-service-fieldset"},UK={class:"checkbox-inline-group"},$K=["value"],VK={key:1,class:"class-service-fieldset"},jK={class:"checkbox-inline-group"},HK=["value"],GK={key:2,class:"class-service-fieldset"},WK={class:"checkbox-inline-group"},zK=["value"],KK={key:3,class:"class-service-fieldset"},qK={class:"checkbox-inline-group"},XK={key:4,class:"class-service-fieldset"},YK={class:"checkbox-inline-group"},JK=["onClick"],QK={class:"checkbox-inline-group"},ZK=["onClick"],eq=["onClick"],tq={class:"add-class-service"},rq={class:"custom-chips"},nq=["onClick"],sq={class:"settings-section"},aq={class:"service-providers-defaults"},iq=["value"],oq={class:"service-providers-custom"},lq={class:"custom-provider-inputs"},cq={class:"custom-chips"},uq=["onClick"],dq={class:"settings-section"},fq={class:"periods-controls"},hq={class:"period-number-control"},pq={key:0,class:"period-labels"},mq={class:"period-labels-grid"},gq=["onUpdate:modelValue","placeholder"],vq={key:1,class:"period-preview"},xq={class:"settings-section"},yq={class:"admin-action-btns"},Eq=["disabled"],bq=["disabled"],_q=["disabled"],Sq={key:1,class:"not-admin"},Tq={__name:"AppSettings",setup(t){const{currentUser:e}=gd(),r=_e(()=>{var S;return((S=e.value)==null?void 0:S.role)||null}),n=_e(()=>["admin","administrator","administrator_504_CM","sped_chair"].includes(r.value)),s=[{value:"K",label:"K"},...Array.from({length:12},(S,k)=>({value:(k+1).toString(),label:(k+1).toString()}))],i=["English","Math","History","Science"],a=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],{loadAppSettings:o,saveAppSettings:l}=Hs(),c=ne(!1),u=ne(!1),d=ne(""),h=ne(!1),p=ne(""),m=ne(""),g=ne({grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]}),v=()=>{const S=p_(g.value.numPeriods,{min:1,max:15,decimals:0});if(S===null)return w("Invalid number of periods. Must be between 1 and 15.",!0),!1;g.value.numPeriods=S;for(let k=0;k<g.value.numPeriods;k++){g.value.periodLabels[k]||(g.value.periodLabels[k]=`Per${k+1}`);const A=un(g.value.periodLabels[k],{trim:!0,maxLength:3,removeDangerous:!0}),D=Hr(A);if(!D.isSafe)return w(`Security threat detected in period ${k+1} label: ${D.threats.join(", ")}`,!0),!1;const N=md(A,{max:3,fieldName:`Period ${k+1} label`});if(!N.isValid)return w(N.error,!0),!1;g.value.periodLabels[k]=A}if(g.value.customServiceProviders)for(let k=0;k<g.value.customServiceProviders.length;k++){const A=g.value.customServiceProviders[k];if(A.name){const D=un(A.name,{trim:!0,maxLength:100,removeDangerous:!0}),N=Hr(D);if(!N.isSafe)return w(`Security threat detected in custom provider ${k+1}: ${N.threats.join(", ")}`,!0),!1;A.name=D}if(A.abbreviation){const D=un(A.abbreviation,{trim:!0,maxLength:10,removeDangerous:!0}),N=Hr(D);if(!N.isSafe)return w(`Security threat detected in custom provider abbreviation ${k+1}: ${N.threats.join(", ")}`,!0),!1;A.abbreviation=D}}return!0},y=_e(()=>a),x=_e(()=>s.every(S=>g.value.grades.includes(S.value))),E=S=>{S.target.checked?g.value.grades=s.map(k=>k.value):g.value.grades=[]},I=()=>{if(!p.value.trim()||!m.value.trim()){w("Both name and abbreviation are required for custom service providers",!0);return}if(g.value.customServiceProviders.some(k=>k.abbreviation.toLowerCase()===m.value.toLowerCase())){w("A service provider with this abbreviation already exists",!0);return}g.value.customServiceProviders.push({name:p.value.trim(),abbreviation:m.value.trim()}),p.value="",m.value="",w("Custom service provider added successfully")},P=S=>{g.value.customServiceProviders.splice(S,1)};Ut(()=>g.value.numPeriods,S=>{const k=p_(S,{min:1,max:15,decimals:0});if(k!==null&&k!==S&&(g.value.numPeriods=k),g.value.periodLabels.length<g.value.numPeriods)for(let A=g.value.periodLabels.length;A<g.value.numPeriods;A++)g.value.periodLabels.push(`Per${A+1}`)}),Ut(()=>g.value.periodLabels,S=>{S.forEach((k,A)=>{k&&k.length>3&&(g.value.periodLabels[A]=k.substring(0,3))})},{deep:!0});const w=(S,k=!1)=>{d.value=S,h.value=k,setTimeout(()=>{d.value="",h.value=!1},5e3)},b=async(S=!1)=>{c.value=!0;try{const k=await o();if(k){if(g.value={...g.value,...k},!g.value.periodLabels||g.value.periodLabels.length<g.value.numPeriods){g.value.periodLabels=[];for(let A=0;A<g.value.numPeriods;A++)g.value.periodLabels[A]=g.value.periodLabels[A]||`Per${A+1}`}S&&w("Settings loaded successfully")}}catch(k){w("Error loading settings",!0),console.error("Load settings error:",k)}finally{c.value=!1}},T=async()=>{if(!Ts("saveAppSettings",10,6e4).allowed){w("Too many save requests. Please wait before saving again.",!0);return}if(v()){u.value=!0;try{await l(g.value),w("Settings saved successfully")}catch(k){w("Error saving settings",!0),console.error("Save settings error:",k)}finally{u.value=!1}}},_=()=>{confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(g.value={grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]},w("Settings reset to defaults"))};return Bt(()=>{b()}),(S,k)=>n.value?(L(),U("div",FK,[k[33]||(k[33]=f("h2",null,"App Settings",-1)),f("form",{onSubmit:hn(T,["prevent"])},[f("section",RK,[f("fieldset",null,[k[17]||(k[17]=f("legend",null,"Grades",-1)),f("div",OK,[f("label",null,[f("input",{type:"checkbox",checked:x.value,onChange:E},null,40,NK),k[16]||(k[16]=f("span",null,"Select All",-1))]),(L(),U(Fe,null,Ve(s,A=>f("label",{key:A.value},[Ae(f("input",{type:"checkbox","onUpdate:modelValue":k[0]||(k[0]=D=>g.value.grades=D),value:A.value},null,8,MK),[[Et,g.value.grades]]),f("span",null,Q(A.label),1)])),64))])])]),f("section",LK,[k[26]||(k[26]=f("h3",null,"Class Services",-1)),g.value.classServices[0]&&g.value.classServices[0].enabledSubcategories?(L(),U("div",BK,[f("fieldset",null,[k[18]||(k[18]=f("legend",null,"SDC",-1)),f("div",UK,[(L(),U(Fe,null,Ve(i,A=>f("label",{key:A},[Ae(f("input",{type:"checkbox","onUpdate:modelValue":k[1]||(k[1]=D=>g.value.classServices[0].enabledSubcategories=D),value:A},null,8,$K),[[Et,g.value.classServices[0].enabledSubcategories]]),Oe(" "+Q(A),1)])),64))])])])):Se("",!0),g.value.classServices[1]&&g.value.classServices[1].enabledSubcategories?(L(),U("div",VK,[f("fieldset",null,[k[19]||(k[19]=f("legend",null,"Co-teach",-1)),f("div",jK,[(L(),U(Fe,null,Ve(i,A=>f("label",{key:A},[Ae(f("input",{type:"checkbox","onUpdate:modelValue":k[2]||(k[2]=D=>g.value.classServices[1].enabledSubcategories=D),value:A},null,8,HK),[[Et,g.value.classServices[1].enabledSubcategories]]),Oe(" "+Q(A),1)])),64))])])])):Se("",!0),g.value.classServices[2]&&g.value.classServices[2].enabledSubcategories?(L(),U("div",GK,[f("fieldset",null,[k[20]||(k[20]=f("legend",null,"RSP",-1)),f("div",WK,[(L(),U(Fe,null,Ve(i,A=>f("label",{key:A},[Ae(f("input",{type:"checkbox","onUpdate:modelValue":k[3]||(k[3]=D=>g.value.classServices[2].enabledSubcategories=D),value:A},null,8,zK),[[Et,g.value.classServices[2].enabledSubcategories]]),Oe(" "+Q(A),1)])),64))])])])):Se("",!0),g.value.classServices[3]&&g.value.classServices[3].enabledSubcategories?(L(),U("div",KK,[f("fieldset",null,[k[22]||(k[22]=f("legend",null,"Directed Studies",-1)),f("div",qK,[f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":k[4]||(k[4]=A=>g.value.classServices[3].enabledSubcategories=A),value:"Directed Studies"},null,512),[[Et,g.value.classServices[3].enabledSubcategories]]),k[21]||(k[21]=Oe(" Directed Studies "))])])])])):Se("",!0),g.value.classServices[4]&&g.value.classServices[4].enabledSubcategories?(L(),U("div",XK,[f("fieldset",null,[k[24]||(k[24]=f("legend",null,"FA",-1)),f("div",YK,[f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":k[5]||(k[5]=A=>g.value.classServices[4].enabledSubcategories=A),value:"FA"},null,512),[[Et,g.value.classServices[4].enabledSubcategories]]),k[23]||(k[23]=Oe(" FA "))])])])])):Se("",!0),(L(!0),U(Fe,null,Ve(g.value.classServices.slice(5),(A,D)=>(L(),U("div",{key:A.name,class:"class-service-fieldset"},[f("fieldset",null,[f("legend",null,[Oe(Q(A.name)+" ",1),f("button",{type:"button",onClick:N=>S.removeClassService(D+5),title:"Remove Service"},"",8,JK)]),f("div",QK,[(L(!0),U(Fe,null,Ve(A.subcategories,(N,R)=>(L(),U("label",{key:N},[k[25]||(k[25]=f("input",{type:"checkbox",checked:!0,disabled:""},null,-1)),Oe(" "+Q(N)+" ",1),f("button",{type:"button",onClick:F=>S.removeSubcategory(D+5,R),title:"Remove Subcategory"},"",8,ZK)]))),128)),f("button",{type:"button",onClick:N=>S.addSubcategory(D+5)},"+ Add Subcategory",8,eq)])])]))),128)),f("div",tq,[Ae(f("input",{type:"text","onUpdate:modelValue":k[6]||(k[6]=A=>S.newServiceName=A),placeholder:"New Service Name",maxlength:"18"},null,512),[[Je,S.newServiceName]]),Ae(f("input",{type:"text","onUpdate:modelValue":k[7]||(k[7]=A=>S.newServiceSubcat=A),placeholder:"Add Subcategory",maxlength:"18",onKeyup:k[8]||(k[8]=dw((...A)=>S.addNewServiceSubcat&&S.addNewServiceSubcat(...A),["enter"]))},null,544),[[Je,S.newServiceSubcat]]),f("button",{type:"button",onClick:k[9]||(k[9]=(...A)=>S.addNewServiceSubcat&&S.addNewServiceSubcat(...A))},"+ Add Subcategory"),f("div",rq,[(L(!0),U(Fe,null,Ve(S.newServiceSubcats,(A,D)=>(L(),U("span",{key:A,class:"chip"},[Oe(Q(A)+" ",1),f("button",{type:"button",onClick:N=>S.removeNewServiceSubcat(D)},"",8,nq)]))),128))]),f("button",{type:"button",onClick:k[10]||(k[10]=(...A)=>S.addClassService&&S.addClassService(...A))},"+ Add Class Service")])]),f("section",sq,[f("fieldset",null,[k[28]||(k[28]=f("legend",null,"Service Providers",-1)),f("div",aq,[(L(!0),U(Fe,null,Ve(y.value,A=>(L(),U("label",{key:A.abbreviation},[Ae(f("input",{type:"checkbox","onUpdate:modelValue":k[11]||(k[11]=D=>g.value.serviceProviders=D),value:A.abbreviation},null,8,iq),[[Et,g.value.serviceProviders]]),f("span",null,Q(A.name)+" ("+Q(A.abbreviation)+")",1)]))),128))]),f("div",oq,[k[27]||(k[27]=f("label",null,"Add Custom Service Provider:",-1)),f("div",lq,[Ae(f("input",{type:"text","onUpdate:modelValue":k[12]||(k[12]=A=>p.value=A),placeholder:"Full Name",maxlength:"100"},null,512),[[Je,p.value]]),Ae(f("input",{type:"text","onUpdate:modelValue":k[13]||(k[13]=A=>m.value=A),placeholder:"Abbreviation",maxlength:"10"},null,512),[[Je,m.value]]),f("button",{type:"button",onClick:I},"Add")]),f("div",cq,[(L(!0),U(Fe,null,Ve(g.value.customServiceProviders,(A,D)=>(L(),U("span",{key:D,class:"chip"},[Oe(Q(A.name)+" ("+Q(A.abbreviation)+") ",1),f("button",{type:"button",onClick:N=>P(D)},"",8,uq)]))),128))])])])]),f("section",dq,[f("fieldset",null,[k[32]||(k[32]=f("legend",null,"Periods",-1)),f("div",fq,[f("div",hq,[f("label",null,[k[29]||(k[29]=Oe(" Number of Periods (max 15): ")),Ae(f("input",{type:"number","onUpdate:modelValue":k[14]||(k[14]=A=>g.value.numPeriods=A),min:"1",max:"15",class:"period-number-input"},null,512),[[Je,g.value.numPeriods]])])]),g.value.numPeriods>0?(L(),U("div",pq,[k[30]||(k[30]=f("h4",null,"Period Labels (3 chars max each):",-1)),f("div",mq,[(L(!0),U(Fe,null,Ve(g.value.numPeriods,A=>(L(),U("div",{key:A,class:"period-label-item"},[f("label",null,[Oe(" Period "+Q(A)+": ",1),Ae(f("input",{type:"text","onUpdate:modelValue":D=>g.value.periodLabels[A-1]=D,maxlength:"3",placeholder:`Per${A}`,class:"period-label-input"},null,8,gq),[[Je,g.value.periodLabels[A-1]]])])]))),128))])])):Se("",!0),g.value.numPeriods>0?(L(),U("div",vq,[k[31]||(k[31]=f("strong",null,"Preview:",-1)),(L(!0),U(Fe,null,Ve(g.value.numPeriods,A=>(L(),U("span",{key:A,class:"period-preview-item"},Q(g.value.periodLabels[A-1]||`Per${A}`),1))),128))])):Se("",!0)])])]),f("section",xq,[f("div",yq,[f("button",{type:"submit",disabled:u.value||c.value,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}}," Save Settings",8,Eq),f("button",{type:"button",onClick:k[15]||(k[15]=()=>b(!0)),disabled:c.value,class:"admin-action-btn info",style:{"min-width":"100px","max-width":"100px"}}," Load",8,bq),f("button",{type:"button",onClick:_,disabled:c.value,class:"admin-action-btn warning",style:{"min-width":"100px","max-width":"100px"}}," Reset",8,_q)]),d.value?(L(),U("div",{key:0,class:Ze(["status-message",{error:h.value,success:!h.value}])},Q(d.value),3)):Se("",!0)])],32)])):(L(),U("div",Sq,k[34]||(k[34]=[f("h2",null,"App Settings",-1),f("p",null,"Access denied. You must be an admin to view this page.",-1)])))}},wq=xt(Tq,[["__scopeId","data-v-1689db17"]]),Aq={class:"admin-aide-assignment"},Cq={class:"header"},Iq={class:"header-actions"},kq=["disabled"],Dq={key:0},Pq={key:1},Fq={class:"content"},Rq={key:0,class:"error-message"},Oq={key:1,class:"error-message"},Nq={key:2,class:"loading"},Mq={key:3,class:"schedule-container"},Lq={class:"aide-schedule-table"},Bq={class:"aide-name"},Uq=["value","onChange"],$q=["value"],Vq={class:"assignment-buttons"},jq=["onClick"],Hq=["onClick"],Gq={class:"direct-assignment-cell"},Wq=["value","onChange"],zq=["value"],Kq={class:"assignment-buttons"},qq=["onClick"],Xq=["onClick"],Yq={__name:"AdminAideAssignment",setup(t){const e=bi(),{userList:r,fetchUsers:n}=Na(),{students:s,fetchStudents:i}=Oa(),a=pa(),{aideAssignment:o,loadAideAssignments:l,saveAllAideAssignments:c}=_x(),{appSettings:u,loadAppSettings:d}=Hs(),h=ne(!0),p=ne(!1),m=_e(()=>{var F;const R=(F=a.currentUser)==null?void 0:F.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(R)}),g=_e(()=>{var R;return((R=r.value)==null?void 0:R.filter(F=>F.role==="paraeducator"))||[]}),v=_e(()=>{var R;return((R=r.value)==null?void 0:R.filter(F=>F.role==="teacher"))||[]}),y=_e(()=>{var F;const R=((F=u.value)==null?void 0:F.numPeriods)||7;return Array.from({length:R},(O,B)=>B+1)});function x(R){return R.id}function E(R){return R.id}function I(R,F){if(!o.value[R])return[""];o.value[R].classAssignment||(o.value[R].classAssignment={});let O=o.value[R].classAssignment[F];return Array.isArray(O)?O.length?O:[""]:typeof O=="string"&&O!==""?[O]:[""]}function P(R){if(!o.value[R])return[""];let F=o.value[R].directAssignment;return Array.isArray(F)?F.length?F:[""]:typeof F=="string"&&F!==""?[F]:[""]}function w(R,F,O,B){o.value[R]||(o.value[R]={classAssignment:{},directAssignment:[]}),o.value[R].classAssignment||(o.value[R].classAssignment={});let V=I(R,F);for(V[O]=B;V.length>1&&V[V.length-1]==="";)V.pop();o.value[R].classAssignment[F]=[...V]}function b(R,F,O){o.value[R]||(o.value[R]={classAssignment:{},directAssignment:[]});let B=P(R);for(B[F]=O;B.length>1&&B[B.length-1]==="";)B.pop();o.value[R].directAssignment=[...B]}function T(R,F){o.value[R]||(o.value[R]={classAssignment:{},directAssignment:[]}),o.value[R].classAssignment||(o.value[R].classAssignment={});let O=I(R,F);O.push(""),o.value[R].classAssignment[F]=[...O]}function _(R,F,O){if(!o.value[R]||!o.value[R].classAssignment)return;let B=I(R,F);B.length<=1||(B.splice(O,1),o.value[R].classAssignment[F]=[...B])}function S(R){o.value[R]||(o.value[R]={classAssignment:{},directAssignment:[]});let F=P(R);F.push(""),o.value[R].directAssignment=[...F]}function k(R,F){if(!o.value[R])return;let O=P(R);O.length<=1||(O.splice(F,1),o.value[R].directAssignment=[...O])}async function A(){try{h.value=!0,await Promise.all([n(),i(),l(),d()]),h.value=!1}catch(R){console.error("Error loading data:",R),h.value=!1}}async function D(){try{p.value=!0,await c(),p.value=!1}catch(R){console.error("Error saving aide assignments:",R),p.value=!1}}function N(){e.push("/admin")}return Bt(A),(R,F)=>(L(),U("div",Aq,[f("div",Cq,[F[3]||(F[3]=f("h1",null,"Aide Assignment Management",-1)),f("div",Iq,[f("button",{onClick:D,class:"btn btn-primary",disabled:p.value},[p.value?(L(),U("span",Dq,"")):(L(),U("span",Pq,"")),Oe(" "+Q(p.value?"Saving...":"Save Assignments"),1)],8,kq),f("button",{onClick:N,class:"btn btn-secondary"},F[2]||(F[2]=[f("span",null,"",-1),Oe(" Back ")]))])]),f("div",Fq,[Z(a).currentUser?m.value?h.value?(L(),U("div",Nq," Loading aide assignments... ")):(L(),U("div",Mq,[f("table",Lq,[f("thead",null,[f("tr",null,[F[8]||(F[8]=f("th",null,"Aide Name",-1)),(L(!0),U(Fe,null,Ve(y.value,O=>(L(),U("th",{key:O,class:"period-header"}," Period "+Q(O),1))),128)),F[9]||(F[9]=f("th",null,"Direct Assignment",-1))])]),f("tbody",null,[(L(!0),U(Fe,null,Ve(g.value,O=>(L(),U("tr",{key:O.id,class:"aide-row"},[f("td",Bq,Q(O.name||O.email),1),(L(!0),U(Fe,null,Ve(y.value,B=>(L(),U("td",{key:B,class:"period-cell"},[(L(!0),U(Fe,null,Ve(I(x(O),B),(V,z)=>(L(),U("div",{key:"t-"+z,class:"assignment-row"},[f("select",{value:V,onChange:H=>w(x(O),B,z,H.target.value),class:"teacher-select"},[F[10]||(F[10]=f("option",{value:""},"No Assignment",-1)),(L(!0),U(Fe,null,Ve(v.value,H=>(L(),U("option",{key:E(H),value:E(H)},Q(H.name||H.email),9,$q))),128))],40,Uq),f("div",Vq,[I(x(O),B).length>1?(L(),U("button",{key:0,onClick:H=>_(x(O),B,z),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,jq)):Se("",!0),z===I(x(O),B).length-1?(L(),U("button",{key:1,onClick:H=>T(x(O),B),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,Hq)):Se("",!0)])]))),128))]))),128)),f("td",Gq,[(L(!0),U(Fe,null,Ve(P(x(O)),(B,V)=>(L(),U("div",{key:"d-"+V,class:"assignment-row"},[f("select",{value:B,onChange:z=>b(x(O),V,z.target.value),class:"student-select"},[F[11]||(F[11]=f("option",{value:""},"No Assignment",-1)),(L(!0),U(Fe,null,Ve(Z(s),z=>(L(),U("option",{key:z.id,value:z.id},Q(Z(ut)(z,"firstName"))+" "+Q(Z(ut)(z,"lastName")),9,zq))),128))],40,Wq),f("div",Kq,[P(x(O)).length>1?(L(),U("button",{key:0,onClick:z=>k(x(O),V),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,qq)):Se("",!0),V===P(x(O)).length-1?(L(),U("button",{key:1,onClick:z=>S(x(O)),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,Xq)):Se("",!0)])]))),128))])]))),128))])])])):(L(),U("div",Oq,[F[6]||(F[6]=f("h2",null,"Access Denied",-1)),F[7]||(F[7]=f("p",null,"You do not have permission to access this page.",-1)),f("button",{onClick:F[1]||(F[1]=O=>Z(e).push("/")),class:"btn btn-primary"},"Go Home")])):(L(),U("div",Rq,[F[4]||(F[4]=f("h2",null,"Authentication Required",-1)),F[5]||(F[5]=f("p",null,"Please log in to access this page.",-1)),f("button",{onClick:F[0]||(F[0]=O=>Z(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},$4=xt(Yq,[["__scopeId","data-v-3361cb08"]]);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var V4=1252,Jq=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],kx={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Dx=function(t){Jq.indexOf(t)!=-1&&(V4=kx[0]=t)};function Qq(){Dx(1252)}var na=function(t){Dx(t)};function j4(){na(1200),Qq()}function n2(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Zq(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function H4(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var du=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Zq(t.slice(2)):e==254&&r==255?H4(t.slice(2)):e==65279?t.slice(1):t},Nf=function(e){return String.fromCharCode(e)},s2=function(e){return String.fromCharCode(e)},vd,Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function a2(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Wi.charAt(i)+Wi.charAt(a)+Wi.charAt(o)+Wi.charAt(l);return e}function Cs(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=Wi.indexOf(t.charAt(c++)),a=Wi.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=Wi.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Wi.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var Xt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ll=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function oo(t){return Xt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function i2(t){return Xt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var ta=function(e){return Xt?ll(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function cl(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Px(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return Px(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var ji=Xt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:ll(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function eX(t){for(var e=[],r=0,n=t.length+250,s=oo(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=oo(65535),n=65530)}return e.push(s.slice(0,r)),ji(e)}var is=/\u0000/g,fu=/[\u0001-\u0006]/g;function rc(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function sa(t,e){var r=""+t;return r.length>=e?r:Nr("0",e-r.length)+r}function Fx(t,e){var r=""+t;return r.length>=e?r:Nr(" ",e-r.length)+r}function sh(t,e){var r=""+t;return r.length>=e?r:r+Nr(" ",e-r.length)}function tX(t,e){var r=""+Math.round(t);return r.length>=e?r:Nr("0",e-r.length)+r}function rX(t,e){var r=""+t;return r.length>=e?r:Nr("0",e-r.length)+r}var o2=Math.pow(2,32);function wl(t,e){if(t>o2||t<-o2)return tX(t,e);var r=Math.round(t);return rX(r,e)}function ah(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var l2=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],qm=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function nX(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Nt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},c2={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},sX={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ih(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,u=0,d=Math.floor(s);c<e&&(d=Math.floor(s),o=d*a+i,u=d*c+l,!(s-d<5e-8));)s=1/(s-d),i=a,a=o,l=c,c=u;if(u>e&&(c>e?(u=l,o=i):(u=c,o=a)),!r)return[0,n*o,u];var h=Math.floor(n*o/u);return[h,n*o-h*u,u]}function Do(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=uX(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var G4=new Date(1899,11,31,0,0,0),aX=G4.getTime(),iX=new Date(1900,2,1,0,0,0);function W4(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=iX&&(r+=24*60*60*1e3),(r-(aX+(t.getTimezoneOffset()-G4.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Rx(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function oX(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function lX(t){var e=t<0?12:11,r=Rx(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function cX(t){var e=Rx(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function xd(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=lX(t):e===10?r=t.toFixed(10).substr(0,12):r=cX(t),Rx(oX(r.toUpperCase()))}function Xo(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):xd(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return $s(14,W4(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function uX(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function dX(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return qm[r.m-1][1];case 5:return qm[r.m-1][0];default:return qm[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return l2[r.q][0];default:return l2[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?sa(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=sa(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?sa(l,c):"";return u}function zi(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var z4=/%/g;function fX(t,e,r){var n=e.replace(z4,""),s=e.length-n.length;return ai(t,n,r*Math.pow(10,2*s))+Nr("%",s)}function hX(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return ai(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function K4(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+K4(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var q4=/# (\?+)( ?)\/( ?)(\d+)/;function pX(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?Nr(" ",t[1].length+1+t[4].length):Fx(a,t[1].length)+t[2]+"/"+t[3]+sa(o,t[4].length))}function mX(t,e,r){return r+(e===0?"":""+e)+Nr(" ",t[1].length+2+t[4].length)}var X4=/^#*0*\.([0#]+)/,Y4=/\).*[0#]/,J4=/\(###\) ###\\?-####/;function es(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function u2(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function d2(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function gX(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function vX(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Ps(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Y4)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ps("n",n,r):"("+Ps("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return hX(t,e,r);if(e.indexOf("%")!==-1)return fX(t,e,r);if(e.indexOf("E")!==-1)return K4(e,r);if(e.charCodeAt(0)===36)return"$"+Ps(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+wl(l,e.length);if(e.match(/^[#?]+$/))return s=wl(r,0),s==="0"&&(s=""),s.length>e.length?s:es(e.substr(0,e.length-s.length))+s;if(i=e.match(q4))return pX(i,l,c);if(e.match(/^#+0+$/))return c+wl(l,e.length-e.indexOf("0"));if(i=e.match(X4))return s=u2(r,i[1].length).replace(/^([^\.]+)$/,"$1."+es(i[1])).replace(/\.$/,"."+es(i[1])).replace(/\.(\d*)$/,function(m,g){return"."+g+Nr("0",es(i[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+u2(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+zi(wl(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ps(t,e,-r):zi(""+(Math.floor(r)+gX(r,i[1].length)))+"."+sa(d2(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return Ps(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=rc(Ps(t,e.replace(/[\\-]/g,""),r)),a=0,rc(rc(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return a<s.length?s.charAt(a++):m==="0"?"0":""}));if(e.match(J4))return s=Ps(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=ih(l,Math.pow(10,a)-1,!1),s=""+c,u=ai("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=sh(o[2],a),u.length<i[4].length&&(u=es(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=ih(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Fx(o[1],a)+i[2]+"/"+i[3]+sh(o[2],a):Nr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=wl(r,0),e.length<=s.length?s:es(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,h=e.length-s.length-d;return es(e.substr(0,d)+s+e.substr(e.length-h))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=d2(r,i[1].length),r<0?"-"+Ps(t,e,-r):zi(vX(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?sa(0,3-m.length):"")+m})+"."+sa(a,i[1].length);switch(e){case"###,##0.00":return Ps(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=zi(wl(l,0));return p!=="0"?c+p:"";case"###,###.00":return Ps(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ps(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function xX(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return ai(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function yX(t,e,r){var n=e.replace(z4,""),s=e.length-n.length;return ai(t,n,r*Math.pow(10,2*s))+Nr("%",s)}function Q4(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Q4(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ya(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Y4)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ya("n",n,r):"("+ya("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return xX(t,e,r);if(e.indexOf("%")!==-1)return yX(t,e,r);if(e.indexOf("E")!==-1)return Q4(e,r);if(e.charCodeAt(0)===36)return"$"+ya(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+sa(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:es(e.substr(0,e.length-s.length))+s;if(i=e.match(q4))return mX(i,l,c);if(e.match(/^#+0+$/))return c+sa(l,e.length-e.indexOf("0"));if(i=e.match(X4))return s=(""+r).replace(/^([^\.]+)$/,"$1."+es(i[1])).replace(/\.$/,"."+es(i[1])),s=s.replace(/\.(\d*)$/,function(m,g){return"."+g+Nr("0",es(i[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+zi(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ya(t,e,-r):zi(""+r)+"."+Nr("0",i[1].length);if(i=e.match(/^#,#*,#0/))return ya(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=rc(ya(t,e.replace(/[\\-]/g,""),r)),a=0,rc(rc(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return a<s.length?s.charAt(a++):m==="0"?"0":""}));if(e.match(J4))return s=ya(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=ih(l,Math.pow(10,a)-1,!1),s=""+c,u=ai("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=sh(o[2],a),u.length<i[4].length&&(u=es(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=ih(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Fx(o[1],a)+i[2]+"/"+i[3]+sh(o[2],a):Nr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:es(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,h=e.length-s.length-d;return es(e.substr(0,d)+s+e.substr(e.length-h))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ya(t,e,-r):zi(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?sa(0,3-m.length):"")+m})+"."+sa(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=zi(""+l);return p!=="0"?c+p:"";default:if(e.match(/\.[0#?]*$/))return ya(t,e.slice(0,e.lastIndexOf(".")),r)+es(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function ai(t,e,r){return(r|0)===r?ya(t,e,r):Ps(t,e,r)}function EX(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Z4=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Nc(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":ah(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Z4))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function bX(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,u,d,h="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!ah(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(d=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(d);s[s.length]={t:"t",v:i},++a;break;case"\\":var p=t.charAt(++a),m=p==="("||p===")"?p:"t";s[s.length]={t:m,v:p},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=Do(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Do(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var g={t:o,v:o};if(c==null&&(c=Do(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(g.v=c.H>=12?"P":"A"),g.t="T",h="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(g.v=c.H>=12?"PM":"AM"),g.t="T",a+=5,h="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(g.v=c.H>=12?"":""),g.t="T",a+=5,h="h"):(g.t="t",++a),c==null&&g.t==="T")return"";s[s.length]=g,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(Z4)){if(c==null&&(c=Do(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Nc(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var v=0,y=0,x;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=h,l="h",v<1&&(v=1);break;case"s":(x=s[a].v.match(/\.0+$/))&&(y=Math.max(y,x[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[a].v.match(/[Hh]/)&&(v=1),v<2&&s[a].v.match(/[Mm]/)&&(v=2),v<3&&s[a].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var E="",I;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=dX(s[a].t.charCodeAt(0),s[a].v,c,y),s[a].t="t";break;case"n":case"?":for(I=a+1;s[I]!=null&&((o=s[I].t)==="?"||o==="D"||(o===" "||o==="t")&&s[I+1]!=null&&(s[I+1].t==="?"||s[I+1].t==="t"&&s[I+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[I].v==="/"||s[I].v===" "&&s[I+1]!=null&&s[I+1].t=="?"));)s[a].v+=s[I].v,s[I]={v:"",t:";"},++I;E+=s[a].v,a=I-1;break;case"G":s[a].t="t",s[a].v=Xo(e,r);break}var P="",w,b;if(E.length>0){E.charCodeAt(0)==40?(w=e<0&&E.charCodeAt(0)===45?-e:e,b=ai("n",E,w)):(w=e<0&&n>1?-e:e,b=ai("n",E,w),w<0&&s[0]&&s[0].t=="t"&&(b=b.substr(1),s[0].v="-"+s[0].v)),I=b.length-1;var T=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){T=a;break}var _=s.length;if(T===s.length&&b.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(I>=s[a].v.length-1?(I-=s[a].v.length,s[a].v=b.substr(I+1,s[a].v.length)):I<0?s[a].v="":(s[a].v=b.substr(0,I+1),I=-1),s[a].t="t",_=a);I>=0&&_<s.length&&(s[_].v=b.substr(0,I+1)+s[_].v)}else if(T!==s.length&&b.indexOf("E")===-1){for(I=b.indexOf(".")-1,a=T;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(u=s[a].v.indexOf(".")>-1&&a===T?s[a].v.indexOf(".")-1:s[a].v.length-1,P=s[a].v.substr(u+1);u>=0;--u)I>=0&&(s[a].v.charAt(u)==="0"||s[a].v.charAt(u)==="#")&&(P=b.charAt(I--)+P);s[a].v=P,s[a].t="t",_=a}for(I>=0&&_<s.length&&(s[_].v=b.substr(0,I+1)+s[_].v),I=b.indexOf(".")+1,a=T;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==T)){for(u=s[a].v.indexOf(".")>-1&&a===T?s[a].v.indexOf(".")+1:0,P=s[a].v.substr(0,u);u<s[a].v.length;++u)I<b.length&&(P+=b.charAt(I++));s[a].v=P,s[a].t="t",_=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(w=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=ai(s[a].t,s[a].v,w),s[a].t="t");var S="";for(a=0;a!==s.length;++a)s[a]!=null&&(S+=s[a].v);return S}var f2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function h2(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function _X(t,e){var r=EX(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(f2),o=r[1].match(f2);return h2(e,a)?[n,r[0]]:h2(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function $s(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Nt)[t],n==null&&(n=r.table&&r.table[c2[t]]||Nt[c2[t]]),n==null&&(n=sX[t]||"General");break}if(ah(n,0))return Xo(e,r);e instanceof Date&&(e=W4(e,r.date1904));var s=_X(n,e);if(ah(s[1]))return Xo(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return bX(s[1],e,r,s[0])}function Lo(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Nt[r]==null){e<0&&(e=r);continue}if(Nt[r]==t){e=r;break}}e<0&&(e=391)}return Nt[e]=t,e}function eI(){Nt=nX()}var SX={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},tI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function TX(t){var e=typeof t=="number"?Nt[t]:t;return e=e.replace(tI,"(\\d+)"),new RegExp("^"+e+"$")}function wX(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(tI)||[]).forEach(function(d,h){var p=parseInt(r[h+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:s=p;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?u:c+"T"+u}var AX=function(){var t={};t.version="1.2.0";function e(){for(var b=0,T=new Array(256),_=0;_!=256;++_)b=_,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,T[_]=b;return typeof Int32Array<"u"?new Int32Array(T):T}var r=e();function n(b){var T=0,_=0,S=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(S=0;S!=256;++S)k[S]=b[S];for(S=0;S!=256;++S)for(_=b[S],T=256+S;T<4096;T+=256)_=k[T]=_>>>8^b[_&255];var A=[];for(S=1;S!=16;++S)A[S-1]=typeof Int32Array<"u"?k.subarray(S*256,S*256+256):k.slice(S*256,S*256+256);return A}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],d=s[6],h=s[7],p=s[8],m=s[9],g=s[10],v=s[11],y=s[12],x=s[13],E=s[14];function I(b,T){for(var _=T^-1,S=0,k=b.length;S<k;)_=_>>>8^r[(_^b.charCodeAt(S++))&255];return~_}function P(b,T){for(var _=T^-1,S=b.length-15,k=0;k<S;)_=E[b[k++]^_&255]^x[b[k++]^_>>8&255]^y[b[k++]^_>>16&255]^v[b[k++]^_>>>24]^g[b[k++]]^m[b[k++]]^p[b[k++]]^h[b[k++]]^d[b[k++]]^u[b[k++]]^c[b[k++]]^l[b[k++]]^o[b[k++]]^a[b[k++]]^i[b[k++]]^r[b[k++]];for(S+=15;k<S;)_=_>>>8^r[(_^b[k++])&255];return~_}function w(b,T){for(var _=T^-1,S=0,k=b.length,A=0,D=0;S<k;)A=b.charCodeAt(S++),A<128?_=_>>>8^r[(_^A)&255]:A<2048?(_=_>>>8^r[(_^(192|A>>6&31))&255],_=_>>>8^r[(_^(128|A&63))&255]):A>=55296&&A<57344?(A=(A&1023)+64,D=b.charCodeAt(S++)&1023,_=_>>>8^r[(_^(240|A>>8&7))&255],_=_>>>8^r[(_^(128|A>>2&63))&255],_=_>>>8^r[(_^(128|D>>6&15|(A&3)<<4))&255],_=_>>>8^r[(_^(128|D&63))&255]):(_=_>>>8^r[(_^(224|A>>12&15))&255],_=_>>>8^r[(_^(128|A>>6&63))&255],_=_>>>8^r[(_^(128|A&63))&255]);return~_}return t.table=r,t.bstr=I,t.buf=P,t.str=w,t}(),Qt=function(){var e={};e.version="1.2.1";function r(ee,de){for(var oe=ee.split("/"),ce=de.split("/"),fe=0,me=0,De=Math.min(oe.length,ce.length);fe<De;++fe){if(me=oe[fe].length-ce[fe].length)return me;if(oe[fe]!=ce[fe])return oe[fe]<ce[fe]?-1:1}return oe.length-ce.length}function n(ee){if(ee.charAt(ee.length-1)=="/")return ee.slice(0,-1).indexOf("/")===-1?ee:n(ee.slice(0,-1));var de=ee.lastIndexOf("/");return de===-1?ee:ee.slice(0,de+1)}function s(ee){if(ee.charAt(ee.length-1)=="/")return s(ee.slice(0,-1));var de=ee.lastIndexOf("/");return de===-1?ee:ee.slice(de+1)}function i(ee,de){typeof de=="string"&&(de=new Date(de));var oe=de.getHours();oe=oe<<6|de.getMinutes(),oe=oe<<5|de.getSeconds()>>>1,ee.write_shift(2,oe);var ce=de.getFullYear()-1980;ce=ce<<4|de.getMonth()+1,ce=ce<<5|de.getDate(),ee.write_shift(2,ce)}function a(ee){var de=ee.read_shift(2)&65535,oe=ee.read_shift(2)&65535,ce=new Date,fe=oe&31;oe>>>=5;var me=oe&15;oe>>>=4,ce.setMilliseconds(0),ce.setFullYear(oe+1980),ce.setMonth(me-1),ce.setDate(fe);var De=de&31;de>>>=5;var Ue=de&63;return de>>>=6,ce.setHours(de),ce.setMinutes(Ue),ce.setSeconds(De<<1),ce}function o(ee){bn(ee,0);for(var de={},oe=0;ee.l<=ee.length-4;){var ce=ee.read_shift(2),fe=ee.read_shift(2),me=ee.l+fe,De={};switch(ce){case 21589:oe=ee.read_shift(1),oe&1&&(De.mtime=ee.read_shift(4)),fe>5&&(oe&2&&(De.atime=ee.read_shift(4)),oe&4&&(De.ctime=ee.read_shift(4))),De.mtime&&(De.mt=new Date(De.mtime*1e3));break}ee.l=me,de[ce]=De}return de}var l;function c(){return l||(l={})}function u(ee,de){if(ee[0]==80&&ee[1]==75)return mt(ee,de);if((ee[0]|32)==109&&(ee[1]|32)==105)return mo(ee,de);if(ee.length<512)throw new Error("CFB file size "+ee.length+" < 512");var oe=3,ce=512,fe=0,me=0,De=0,Ue=0,Pe=0,Re=[],Me=ee.slice(0,512);bn(Me,0);var qe=d(Me);switch(oe=qe[0],oe){case 3:ce=512;break;case 4:ce=4096;break;case 0:if(qe[1]==0)return mt(ee,de);default:throw new Error("Major Version: Expected 3 or 4 saw "+oe)}ce!==512&&(Me=ee.slice(0,ce),bn(Me,28));var et=ee.slice(0,ce);h(Me,oe);var lt=Me.read_shift(4,"i");if(oe===3&&lt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+lt);Me.l+=4,De=Me.read_shift(4,"i"),Me.l+=4,Me.chk("00100000","Mini Stream Cutoff Size: "),Ue=Me.read_shift(4,"i"),fe=Me.read_shift(4,"i"),Pe=Me.read_shift(4,"i"),me=Me.read_shift(4,"i");for(var Ye=-1,at=0;at<109&&(Ye=Me.read_shift(4,"i"),!(Ye<0));++at)Re[at]=Ye;var Tt=p(ee,ce);v(Pe,me,Tt,ce,Re);var dr=x(Tt,De,Re,ce);dr[De].name="!Directory",fe>0&&Ue!==D&&(dr[Ue].name="!MiniFAT"),dr[Re[0]].name="!FAT",dr.fat_addrs=Re,dr.ssz=ce;var or={},Sr=[],Ua=[],vo=[];E(De,dr,Tt,Sr,fe,or,Ua,Ue),m(Ua,vo,Sr),Sr.shift();var wi={FileIndex:Ua,FullPaths:vo};return de&&de.raw&&(wi.raw={header:et,sectors:Tt}),wi}function d(ee){if(ee[ee.l]==80&&ee[ee.l+1]==75)return[0,0];ee.chk(N,"Header Signature: "),ee.l+=16;var de=ee.read_shift(2,"u");return[ee.read_shift(2,"u"),de]}function h(ee,de){var oe=9;switch(ee.l+=2,oe=ee.read_shift(2)){case 9:if(de!=3)throw new Error("Sector Shift: Expected 9 saw "+oe);break;case 12:if(de!=4)throw new Error("Sector Shift: Expected 12 saw "+oe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+oe)}ee.chk("0600","Mini Sector Shift: "),ee.chk("000000000000","Reserved: ")}function p(ee,de){for(var oe=Math.ceil(ee.length/de)-1,ce=[],fe=1;fe<oe;++fe)ce[fe-1]=ee.slice(fe*de,(fe+1)*de);return ce[oe-1]=ee.slice(oe*de),ce}function m(ee,de,oe){for(var ce=0,fe=0,me=0,De=0,Ue=0,Pe=oe.length,Re=[],Me=[];ce<Pe;++ce)Re[ce]=Me[ce]=ce,de[ce]=oe[ce];for(;Ue<Me.length;++Ue)ce=Me[Ue],fe=ee[ce].L,me=ee[ce].R,De=ee[ce].C,Re[ce]===ce&&(fe!==-1&&Re[fe]!==fe&&(Re[ce]=Re[fe]),me!==-1&&Re[me]!==me&&(Re[ce]=Re[me])),De!==-1&&(Re[De]=ce),fe!==-1&&ce!=Re[ce]&&(Re[fe]=Re[ce],Me.lastIndexOf(fe)<Ue&&Me.push(fe)),me!==-1&&ce!=Re[ce]&&(Re[me]=Re[ce],Me.lastIndexOf(me)<Ue&&Me.push(me));for(ce=1;ce<Pe;++ce)Re[ce]===ce&&(me!==-1&&Re[me]!==me?Re[ce]=Re[me]:fe!==-1&&Re[fe]!==fe&&(Re[ce]=Re[fe]));for(ce=1;ce<Pe;++ce)if(ee[ce].type!==0){if(Ue=ce,Ue!=Re[Ue])do Ue=Re[Ue],de[ce]=de[Ue]+"/"+de[ce];while(Ue!==0&&Re[Ue]!==-1&&Ue!=Re[Ue]);Re[ce]=-1}for(de[0]+="/",ce=1;ce<Pe;++ce)ee[ce].type!==2&&(de[ce]+="/")}function g(ee,de,oe){for(var ce=ee.start,fe=ee.size,me=[],De=ce;oe&&fe>0&&De>=0;)me.push(de.slice(De*A,De*A+A)),fe-=A,De=Ao(oe,De*4);return me.length===0?en(0):ji(me).slice(0,ee.size)}function v(ee,de,oe,ce,fe){var me=D;if(ee===D){if(de!==0)throw new Error("DIFAT chain shorter than expected")}else if(ee!==-1){var De=oe[ee],Ue=(ce>>>2)-1;if(!De)return;for(var Pe=0;Pe<Ue&&(me=Ao(De,Pe*4))!==D;++Pe)fe.push(me);v(Ao(De,ce-4),de-1,oe,ce,fe)}}function y(ee,de,oe,ce,fe){var me=[],De=[];fe||(fe=[]);var Ue=ce-1,Pe=0,Re=0;for(Pe=de;Pe>=0;){fe[Pe]=!0,me[me.length]=Pe,De.push(ee[Pe]);var Me=oe[Math.floor(Pe*4/ce)];if(Re=Pe*4&Ue,ce<4+Re)throw new Error("FAT boundary crossed: "+Pe+" 4 "+ce);if(!ee[Me])break;Pe=Ao(ee[Me],Re)}return{nodes:me,data:S2([De])}}function x(ee,de,oe,ce){var fe=ee.length,me=[],De=[],Ue=[],Pe=[],Re=ce-1,Me=0,qe=0,et=0,lt=0;for(Me=0;Me<fe;++Me)if(Ue=[],et=Me+de,et>=fe&&(et-=fe),!De[et]){Pe=[];var Ye=[];for(qe=et;qe>=0;){Ye[qe]=!0,De[qe]=!0,Ue[Ue.length]=qe,Pe.push(ee[qe]);var at=oe[Math.floor(qe*4/ce)];if(lt=qe*4&Re,ce<4+lt)throw new Error("FAT boundary crossed: "+qe+" 4 "+ce);if(!ee[at]||(qe=Ao(ee[at],lt),Ye[qe]))break}me[et]={nodes:Ue,data:S2([Pe])}}return me}function E(ee,de,oe,ce,fe,me,De,Ue){for(var Pe=0,Re=ce.length?2:0,Me=de[ee].data,qe=0,et=0,lt;qe<Me.length;qe+=128){var Ye=Me.slice(qe,qe+128);bn(Ye,64),et=Ye.read_shift(2),lt=Bx(Ye,0,et-Re),ce.push(lt);var at={name:lt,type:Ye.read_shift(1),color:Ye.read_shift(1),L:Ye.read_shift(4,"i"),R:Ye.read_shift(4,"i"),C:Ye.read_shift(4,"i"),clsid:Ye.read_shift(16),state:Ye.read_shift(4,"i"),start:0,size:0},Tt=Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2);Tt!==0&&(at.ct=I(Ye,Ye.l-8));var dr=Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2);dr!==0&&(at.mt=I(Ye,Ye.l-8)),at.start=Ye.read_shift(4,"i"),at.size=Ye.read_shift(4,"i"),at.size<0&&at.start<0&&(at.size=at.type=0,at.start=D,at.name=""),at.type===5?(Pe=at.start,fe>0&&Pe!==D&&(de[Pe].name="!StreamData")):at.size>=4096?(at.storage="fat",de[at.start]===void 0&&(de[at.start]=y(oe,at.start,de.fat_addrs,de.ssz)),de[at.start].name=at.name,at.content=de[at.start].data.slice(0,at.size)):(at.storage="minifat",at.size<0?at.size=0:Pe!==D&&at.start!==D&&de[Pe]&&(at.content=g(at,de[Pe].data,(de[Ue]||{}).data))),at.content&&bn(at.content,0),me[lt]=at,De.push(at)}}function I(ee,de){return new Date((bs(ee,de+4)/1e7*Math.pow(2,32)+bs(ee,de)/1e7-11644473600)*1e3)}function P(ee,de){return c(),u(l.readFileSync(ee),de)}function w(ee,de){var oe=de&&de.type;switch(oe||Xt&&Buffer.isBuffer(ee)&&(oe="buffer"),oe||"base64"){case"file":return P(ee,de);case"base64":return u(ta(Cs(ee)),de);case"binary":return u(ta(ee),de)}return u(ee,de)}function b(ee,de){var oe=de||{},ce=oe.root||"Root Entry";if(ee.FullPaths||(ee.FullPaths=[]),ee.FileIndex||(ee.FileIndex=[]),ee.FullPaths.length!==ee.FileIndex.length)throw new Error("inconsistent CFB structure");ee.FullPaths.length===0&&(ee.FullPaths[0]=ce+"/",ee.FileIndex[0]={name:ce,type:5}),oe.CLSID&&(ee.FileIndex[0].clsid=oe.CLSID),T(ee)}function T(ee){var de="Sh33tJ5";if(!Qt.find(ee,"/"+de)){var oe=en(4);oe[0]=55,oe[1]=oe[3]=50,oe[2]=54,ee.FileIndex.push({name:de,type:2,content:oe,size:4,L:69,R:69,C:69}),ee.FullPaths.push(ee.FullPaths[0]+de),_(ee)}}function _(ee,de){b(ee);for(var oe=!1,ce=!1,fe=ee.FullPaths.length-1;fe>=0;--fe){var me=ee.FileIndex[fe];switch(me.type){case 0:ce?oe=!0:(ee.FileIndex.pop(),ee.FullPaths.pop());break;case 1:case 2:case 5:ce=!0,isNaN(me.R*me.L*me.C)&&(oe=!0),me.R>-1&&me.L>-1&&me.R==me.L&&(oe=!0);break;default:oe=!0;break}}if(!(!oe&&!de)){var De=new Date(1987,1,19),Ue=0,Pe=Object.create?Object.create(null):{},Re=[];for(fe=0;fe<ee.FullPaths.length;++fe)Pe[ee.FullPaths[fe]]=!0,ee.FileIndex[fe].type!==0&&Re.push([ee.FullPaths[fe],ee.FileIndex[fe]]);for(fe=0;fe<Re.length;++fe){var Me=n(Re[fe][0]);ce=Pe[Me],ce||(Re.push([Me,{name:s(Me).replace("/",""),type:1,clsid:F,ct:De,mt:De,content:null}]),Pe[Me]=!0)}for(Re.sort(function(lt,Ye){return r(lt[0],Ye[0])}),ee.FullPaths=[],ee.FileIndex=[],fe=0;fe<Re.length;++fe)ee.FullPaths[fe]=Re[fe][0],ee.FileIndex[fe]=Re[fe][1];for(fe=0;fe<Re.length;++fe){var qe=ee.FileIndex[fe],et=ee.FullPaths[fe];if(qe.name=s(et).replace("/",""),qe.L=qe.R=qe.C=-(qe.color=1),qe.size=qe.content?qe.content.length:0,qe.start=0,qe.clsid=qe.clsid||F,fe===0)qe.C=Re.length>1?1:-1,qe.size=0,qe.type=5;else if(et.slice(-1)=="/"){for(Ue=fe+1;Ue<Re.length&&n(ee.FullPaths[Ue])!=et;++Ue);for(qe.C=Ue>=Re.length?-1:Ue,Ue=fe+1;Ue<Re.length&&n(ee.FullPaths[Ue])!=n(et);++Ue);qe.R=Ue>=Re.length?-1:Ue,qe.type=1}else n(ee.FullPaths[fe+1]||"")==n(et)&&(qe.R=fe+1),qe.type=2}}}function S(ee,de){var oe=de||{};if(oe.fileType=="mad")return Qr(ee,oe);switch(_(ee),oe.fileType){case"zip":return Rt(ee,oe)}var ce=function(lt){for(var Ye=0,at=0,Tt=0;Tt<lt.FileIndex.length;++Tt){var dr=lt.FileIndex[Tt];if(dr.content){var or=dr.content.length;or>0&&(or<4096?Ye+=or+63>>6:at+=or+511>>9)}}for(var Sr=lt.FullPaths.length+3>>2,Ua=Ye+7>>3,vo=Ye+127>>7,wi=Ua+at+Sr+vo,ma=wi+127>>7,gl=ma<=109?0:Math.ceil((ma-109)/127);wi+ma+gl+127>>7>ma;)gl=++ma<=109?0:Math.ceil((ma-109)/127);var vs=[1,gl,ma,vo,Sr,at,Ye,0];return lt.FileIndex[0].size=Ye<<6,vs[7]=(lt.FileIndex[0].start=vs[0]+vs[1]+vs[2]+vs[3]+vs[4]+vs[5])+(vs[6]+7>>3),vs}(ee),fe=en(ce[7]<<9),me=0,De=0;{for(me=0;me<8;++me)fe.write_shift(1,R[me]);for(me=0;me<8;++me)fe.write_shift(2,0);for(fe.write_shift(2,62),fe.write_shift(2,3),fe.write_shift(2,65534),fe.write_shift(2,9),fe.write_shift(2,6),me=0;me<3;++me)fe.write_shift(2,0);for(fe.write_shift(4,0),fe.write_shift(4,ce[2]),fe.write_shift(4,ce[0]+ce[1]+ce[2]+ce[3]-1),fe.write_shift(4,0),fe.write_shift(4,4096),fe.write_shift(4,ce[3]?ce[0]+ce[1]+ce[2]-1:D),fe.write_shift(4,ce[3]),fe.write_shift(-4,ce[1]?ce[0]-1:D),fe.write_shift(4,ce[1]),me=0;me<109;++me)fe.write_shift(-4,me<ce[2]?ce[1]+me:-1)}if(ce[1])for(De=0;De<ce[1];++De){for(;me<236+De*127;++me)fe.write_shift(-4,me<ce[2]?ce[1]+me:-1);fe.write_shift(-4,De===ce[1]-1?D:De+1)}var Ue=function(lt){for(De+=lt;me<De-1;++me)fe.write_shift(-4,me+1);lt&&(++me,fe.write_shift(-4,D))};for(De=me=0,De+=ce[1];me<De;++me)fe.write_shift(-4,O.DIFSECT);for(De+=ce[2];me<De;++me)fe.write_shift(-4,O.FATSECT);Ue(ce[3]),Ue(ce[4]);for(var Pe=0,Re=0,Me=ee.FileIndex[0];Pe<ee.FileIndex.length;++Pe)Me=ee.FileIndex[Pe],Me.content&&(Re=Me.content.length,!(Re<4096)&&(Me.start=De,Ue(Re+511>>9)));for(Ue(ce[6]+7>>3);fe.l&511;)fe.write_shift(-4,O.ENDOFCHAIN);for(De=me=0,Pe=0;Pe<ee.FileIndex.length;++Pe)Me=ee.FileIndex[Pe],Me.content&&(Re=Me.content.length,!(!Re||Re>=4096)&&(Me.start=De,Ue(Re+63>>6)));for(;fe.l&511;)fe.write_shift(-4,O.ENDOFCHAIN);for(me=0;me<ce[4]<<2;++me){var qe=ee.FullPaths[me];if(!qe||qe.length===0){for(Pe=0;Pe<17;++Pe)fe.write_shift(4,0);for(Pe=0;Pe<3;++Pe)fe.write_shift(4,-1);for(Pe=0;Pe<12;++Pe)fe.write_shift(4,0);continue}Me=ee.FileIndex[me],me===0&&(Me.start=Me.size?Me.start-1:D);var et=me===0&&oe.root||Me.name;if(Re=2*(et.length+1),fe.write_shift(64,et,"utf16le"),fe.write_shift(2,Re),fe.write_shift(1,Me.type),fe.write_shift(1,Me.color),fe.write_shift(-4,Me.L),fe.write_shift(-4,Me.R),fe.write_shift(-4,Me.C),Me.clsid)fe.write_shift(16,Me.clsid,"hex");else for(Pe=0;Pe<4;++Pe)fe.write_shift(4,0);fe.write_shift(4,Me.state||0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,Me.start),fe.write_shift(4,Me.size),fe.write_shift(4,0)}for(me=1;me<ee.FileIndex.length;++me)if(Me=ee.FileIndex[me],Me.size>=4096)if(fe.l=Me.start+1<<9,Xt&&Buffer.isBuffer(Me.content))Me.content.copy(fe,fe.l,0,Me.size),fe.l+=Me.size+511&-512;else{for(Pe=0;Pe<Me.size;++Pe)fe.write_shift(1,Me.content[Pe]);for(;Pe&511;++Pe)fe.write_shift(1,0)}for(me=1;me<ee.FileIndex.length;++me)if(Me=ee.FileIndex[me],Me.size>0&&Me.size<4096)if(Xt&&Buffer.isBuffer(Me.content))Me.content.copy(fe,fe.l,0,Me.size),fe.l+=Me.size+63&-64;else{for(Pe=0;Pe<Me.size;++Pe)fe.write_shift(1,Me.content[Pe]);for(;Pe&63;++Pe)fe.write_shift(1,0)}if(Xt)fe.l=fe.length;else for(;fe.l<fe.length;)fe.write_shift(1,0);return fe}function k(ee,de){var oe=ee.FullPaths.map(function(Pe){return Pe.toUpperCase()}),ce=oe.map(function(Pe){var Re=Pe.split("/");return Re[Re.length-(Pe.slice(-1)=="/"?2:1)]}),fe=!1;de.charCodeAt(0)===47?(fe=!0,de=oe[0].slice(0,-1)+de):fe=de.indexOf("/")!==-1;var me=de.toUpperCase(),De=fe===!0?oe.indexOf(me):ce.indexOf(me);if(De!==-1)return ee.FileIndex[De];var Ue=!me.match(fu);for(me=me.replace(is,""),Ue&&(me=me.replace(fu,"!")),De=0;De<oe.length;++De)if((Ue?oe[De].replace(fu,"!"):oe[De]).replace(is,"")==me||(Ue?ce[De].replace(fu,"!"):ce[De]).replace(is,"")==me)return ee.FileIndex[De];return null}var A=64,D=-2,N="d0cf11e0a1b11ae1",R=[208,207,17,224,161,177,26,225],F="00000000000000000000000000000000",O={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:N,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:F,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function B(ee,de,oe){c();var ce=S(ee,oe);l.writeFileSync(de,ce)}function V(ee){for(var de=new Array(ee.length),oe=0;oe<ee.length;++oe)de[oe]=String.fromCharCode(ee[oe]);return de.join("")}function z(ee,de){var oe=S(ee,de);switch(de&&de.type||"buffer"){case"file":return c(),l.writeFileSync(de.filename,oe),oe;case"binary":return typeof oe=="string"?oe:V(oe);case"base64":return a2(typeof oe=="string"?oe:V(oe));case"buffer":if(Xt)return Buffer.isBuffer(oe)?oe:ll(oe);case"array":return typeof oe=="string"?ta(oe):oe}return oe}var H;function j(ee){try{var de=ee.InflateRaw,oe=new de;if(oe._processChunk(new Uint8Array([3,0]),oe._finishFlushFlag),oe.bytesRead)H=ee;else throw new Error("zlib does not expose bytesRead")}catch(ce){console.error("cannot use native zlib: "+(ce.message||ce))}}function W(ee,de){if(!H)return ft(ee,de);var oe=H.InflateRaw,ce=new oe,fe=ce._processChunk(ee.slice(ee.l),ce._finishFlushFlag);return ee.l+=ce.bytesRead,fe}function K(ee){return H?H.deflateRawSync(ee):ye(ee)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ue=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function pe(ee){var de=(ee<<1|ee<<11)&139536|(ee<<5|ee<<15)&558144;return(de>>16|de>>8|de)&255}for(var te=typeof Uint8Array<"u",Y=te?new Uint8Array(256):[],Ee=0;Ee<256;++Ee)Y[Ee]=pe(Ee);function X(ee,de){var oe=Y[ee&255];return de<=8?oe>>>8-de:(oe=oe<<8|Y[ee>>8&255],de<=16?oe>>>16-de:(oe=oe<<8|Y[ee>>16&255],oe>>>24-de))}function q(ee,de){var oe=de&7,ce=de>>>3;return(ee[ce]|(oe<=6?0:ee[ce+1]<<8))>>>oe&3}function J(ee,de){var oe=de&7,ce=de>>>3;return(ee[ce]|(oe<=5?0:ee[ce+1]<<8))>>>oe&7}function ge(ee,de){var oe=de&7,ce=de>>>3;return(ee[ce]|(oe<=4?0:ee[ce+1]<<8))>>>oe&15}function ae(ee,de){var oe=de&7,ce=de>>>3;return(ee[ce]|(oe<=3?0:ee[ce+1]<<8))>>>oe&31}function se(ee,de){var oe=de&7,ce=de>>>3;return(ee[ce]|(oe<=1?0:ee[ce+1]<<8))>>>oe&127}function le(ee,de,oe){var ce=de&7,fe=de>>>3,me=(1<<oe)-1,De=ee[fe]>>>ce;return oe<8-ce||(De|=ee[fe+1]<<8-ce,oe<16-ce)||(De|=ee[fe+2]<<16-ce,oe<24-ce)||(De|=ee[fe+3]<<24-ce),De&me}function xe(ee,de,oe){var ce=de&7,fe=de>>>3;return ce<=5?ee[fe]|=(oe&7)<<ce:(ee[fe]|=oe<<ce&255,ee[fe+1]=(oe&7)>>8-ce),de+3}function ve(ee,de,oe){var ce=de&7,fe=de>>>3;return oe=(oe&1)<<ce,ee[fe]|=oe,de+1}function Ce(ee,de,oe){var ce=de&7,fe=de>>>3;return oe<<=ce,ee[fe]|=oe&255,oe>>>=8,ee[fe+1]=oe,de+8}function we(ee,de,oe){var ce=de&7,fe=de>>>3;return oe<<=ce,ee[fe]|=oe&255,oe>>>=8,ee[fe+1]=oe&255,ee[fe+2]=oe>>>8,de+16}function Ge(ee,de){var oe=ee.length,ce=2*oe>de?2*oe:de+5,fe=0;if(oe>=de)return ee;if(Xt){var me=i2(ce);if(ee.copy)ee.copy(me);else for(;fe<ee.length;++fe)me[fe]=ee[fe];return me}else if(te){var De=new Uint8Array(ce);if(De.set)De.set(ee);else for(;fe<oe;++fe)De[fe]=ee[fe];return De}return ee.length=ce,ee}function ke(ee){for(var de=new Array(ee),oe=0;oe<ee;++oe)de[oe]=0;return de}function $e(ee,de,oe){var ce=1,fe=0,me=0,De=0,Ue=0,Pe=ee.length,Re=te?new Uint16Array(32):ke(32);for(me=0;me<32;++me)Re[me]=0;for(me=Pe;me<oe;++me)ee[me]=0;Pe=ee.length;var Me=te?new Uint16Array(Pe):ke(Pe);for(me=0;me<Pe;++me)Re[fe=ee[me]]++,ce<fe&&(ce=fe),Me[me]=0;for(Re[0]=0,me=1;me<=ce;++me)Re[me+16]=Ue=Ue+Re[me-1]<<1;for(me=0;me<Pe;++me)Ue=ee[me],Ue!=0&&(Me[me]=Re[Ue+16]++);var qe=0;for(me=0;me<Pe;++me)if(qe=ee[me],qe!=0)for(Ue=X(Me[me],ce)>>ce-qe,De=(1<<ce+4-qe)-1;De>=0;--De)de[Ue|De<<qe]=qe&15|me<<4;return ce}var Be=te?new Uint16Array(512):ke(512),We=te?new Uint16Array(32):ke(32);if(!te){for(var ze=0;ze<512;++ze)Be[ze]=0;for(ze=0;ze<32;++ze)We[ze]=0}(function(){for(var ee=[],de=0;de<32;de++)ee.push(5);$e(ee,We,32);var oe=[];for(de=0;de<=143;de++)oe.push(8);for(;de<=255;de++)oe.push(9);for(;de<=279;de++)oe.push(7);for(;de<=287;de++)oe.push(8);$e(oe,Be,288)})();var be=function(){for(var de=te?new Uint8Array(32768):[],oe=0,ce=0;oe<ue.length-1;++oe)for(;ce<ue[oe+1];++ce)de[ce]=oe;for(;ce<32768;++ce)de[ce]=29;var fe=te?new Uint8Array(259):[];for(oe=0,ce=0;oe<he.length-1;++oe)for(;ce<he[oe+1];++ce)fe[ce]=oe;function me(Ue,Pe){for(var Re=0;Re<Ue.length;){var Me=Math.min(65535,Ue.length-Re),qe=Re+Me==Ue.length;for(Pe.write_shift(1,+qe),Pe.write_shift(2,Me),Pe.write_shift(2,~Me&65535);Me-- >0;)Pe[Pe.l++]=Ue[Re++]}return Pe.l}function De(Ue,Pe){for(var Re=0,Me=0,qe=te?new Uint16Array(32768):[];Me<Ue.length;){var et=Math.min(65535,Ue.length-Me);if(et<10){for(Re=xe(Pe,Re,+(Me+et==Ue.length)),Re&7&&(Re+=8-(Re&7)),Pe.l=Re/8|0,Pe.write_shift(2,et),Pe.write_shift(2,~et&65535);et-- >0;)Pe[Pe.l++]=Ue[Me++];Re=Pe.l*8;continue}Re=xe(Pe,Re,+(Me+et==Ue.length)+2);for(var lt=0;et-- >0;){var Ye=Ue[Me];lt=(lt<<5^Ye)&32767;var at=-1,Tt=0;if((at=qe[lt])&&(at|=Me&-32768,at>Me&&(at-=32768),at<Me))for(;Ue[at+Tt]==Ue[Me+Tt]&&Tt<250;)++Tt;if(Tt>2){Ye=fe[Tt],Ye<=22?Re=Ce(Pe,Re,Y[Ye+1]>>1)-1:(Ce(Pe,Re,3),Re+=5,Ce(Pe,Re,Y[Ye-23]>>5),Re+=3);var dr=Ye<8?0:Ye-4>>2;dr>0&&(we(Pe,Re,Tt-he[Ye]),Re+=dr),Ye=de[Me-at],Re=Ce(Pe,Re,Y[Ye]>>3),Re-=3;var or=Ye<4?0:Ye-2>>1;or>0&&(we(Pe,Re,Me-at-ue[Ye]),Re+=or);for(var Sr=0;Sr<Tt;++Sr)qe[lt]=Me&32767,lt=(lt<<5^Ue[Me])&32767,++Me;et-=Tt-1}else Ye<=143?Ye=Ye+48:Re=ve(Pe,Re,1),Re=Ce(Pe,Re,Y[Ye]),qe[lt]=Me&32767,++Me}Re=Ce(Pe,Re,0)-1}return Pe.l=(Re+7)/8|0,Pe.l}return function(Pe,Re){return Pe.length<8?me(Pe,Re):De(Pe,Re)}}();function ye(ee){var de=en(50+Math.floor(ee.length*1.1)),oe=be(ee,de);return de.slice(0,oe)}var Te=te?new Uint16Array(32768):ke(32768),Ne=te?new Uint16Array(32768):ke(32768),He=te?new Uint16Array(128):ke(128),ot=1,gt=1;function yt(ee,de){var oe=ae(ee,de)+257;de+=5;var ce=ae(ee,de)+1;de+=5;var fe=ge(ee,de)+4;de+=4;for(var me=0,De=te?new Uint8Array(19):ke(19),Ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Pe=1,Re=te?new Uint8Array(8):ke(8),Me=te?new Uint8Array(8):ke(8),qe=De.length,et=0;et<fe;++et)De[re[et]]=me=J(ee,de),Pe<me&&(Pe=me),Re[me]++,de+=3;var lt=0;for(Re[0]=0,et=1;et<=Pe;++et)Me[et]=lt=lt+Re[et-1]<<1;for(et=0;et<qe;++et)(lt=De[et])!=0&&(Ue[et]=Me[lt]++);var Ye=0;for(et=0;et<qe;++et)if(Ye=De[et],Ye!=0){lt=Y[Ue[et]]>>8-Ye;for(var at=(1<<7-Ye)-1;at>=0;--at)He[lt|at<<Ye]=Ye&7|et<<3}var Tt=[];for(Pe=1;Tt.length<oe+ce;)switch(lt=He[se(ee,de)],de+=lt&7,lt>>>=3){case 16:for(me=3+q(ee,de),de+=2,lt=Tt[Tt.length-1];me-- >0;)Tt.push(lt);break;case 17:for(me=3+J(ee,de),de+=3;me-- >0;)Tt.push(0);break;case 18:for(me=11+se(ee,de),de+=7;me-- >0;)Tt.push(0);break;default:Tt.push(lt),Pe<lt&&(Pe=lt);break}var dr=Tt.slice(0,oe),or=Tt.slice(oe);for(et=oe;et<286;++et)dr[et]=0;for(et=ce;et<30;++et)or[et]=0;return ot=$e(dr,Te,286),gt=$e(or,Ne,30),de}function Mt(ee,de){if(ee[0]==3&&!(ee[1]&3))return[oo(de),2];for(var oe=0,ce=0,fe=i2(de||1<<18),me=0,De=fe.length>>>0,Ue=0,Pe=0;!(ce&1);){if(ce=J(ee,oe),oe+=3,ce>>>1)ce>>1==1?(Ue=9,Pe=5):(oe=yt(ee,oe),Ue=ot,Pe=gt);else{oe&7&&(oe+=8-(oe&7));var Re=ee[oe>>>3]|ee[(oe>>>3)+1]<<8;if(oe+=32,Re>0)for(!de&&De<me+Re&&(fe=Ge(fe,me+Re),De=fe.length);Re-- >0;)fe[me++]=ee[oe>>>3],oe+=8;continue}for(;;){!de&&De<me+32767&&(fe=Ge(fe,me+32767),De=fe.length);var Me=le(ee,oe,Ue),qe=ce>>>1==1?Be[Me]:Te[Me];if(oe+=qe&15,qe>>>=4,!(qe>>>8&255))fe[me++]=qe;else{if(qe==256)break;qe-=257;var et=qe<8?0:qe-4>>2;et>5&&(et=0);var lt=me+he[qe];et>0&&(lt+=le(ee,oe,et),oe+=et),Me=le(ee,oe,Pe),qe=ce>>>1==1?We[Me]:Ne[Me],oe+=qe&15,qe>>>=4;var Ye=qe<4?0:qe-2>>1,at=ue[qe];for(Ye>0&&(at+=le(ee,oe,Ye),oe+=Ye),!de&&De<lt&&(fe=Ge(fe,lt+100),De=fe.length);me<lt;)fe[me]=fe[me-at],++me}}}return de?[fe,oe+7>>>3]:[fe.slice(0,me),oe+7>>>3]}function ft(ee,de){var oe=ee.slice(ee.l||0),ce=Mt(oe,de);return ee.l+=ce[1],ce[0]}function ct(ee,de){if(ee)typeof console<"u"&&console.error(de);else throw new Error(de)}function mt(ee,de){var oe=ee;bn(oe,0);var ce=[],fe=[],me={FileIndex:ce,FullPaths:fe};b(me,{root:de.root});for(var De=oe.length-4;(oe[De]!=80||oe[De+1]!=75||oe[De+2]!=5||oe[De+3]!=6)&&De>=0;)--De;oe.l=De+4,oe.l+=4;var Ue=oe.read_shift(2);oe.l+=6;var Pe=oe.read_shift(4);for(oe.l=Pe,De=0;De<Ue;++De){oe.l+=20;var Re=oe.read_shift(4),Me=oe.read_shift(4),qe=oe.read_shift(2),et=oe.read_shift(2),lt=oe.read_shift(2);oe.l+=8;var Ye=oe.read_shift(4),at=o(oe.slice(oe.l+qe,oe.l+qe+et));oe.l+=qe+et+lt;var Tt=oe.l;oe.l=Ye+4,It(oe,Re,Me,me,at),oe.l=Tt}return me}function It(ee,de,oe,ce,fe){ee.l+=2;var me=ee.read_shift(2),De=ee.read_shift(2),Ue=a(ee);if(me&8257)throw new Error("Unsupported ZIP encryption");for(var Pe=ee.read_shift(4),Re=ee.read_shift(4),Me=ee.read_shift(4),qe=ee.read_shift(2),et=ee.read_shift(2),lt="",Ye=0;Ye<qe;++Ye)lt+=String.fromCharCode(ee[ee.l++]);if(et){var at=o(ee.slice(ee.l,ee.l+et));(at[21589]||{}).mt&&(Ue=at[21589].mt),((fe||{})[21589]||{}).mt&&(Ue=fe[21589].mt)}ee.l+=et;var Tt=ee.slice(ee.l,ee.l+Re);switch(De){case 8:Tt=W(ee,Me);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+De)}var dr=!1;me&8&&(Pe=ee.read_shift(4),Pe==134695760&&(Pe=ee.read_shift(4),dr=!0),Re=ee.read_shift(4),Me=ee.read_shift(4)),Re!=de&&ct(dr,"Bad compressed size: "+de+" != "+Re),Me!=oe&&ct(dr,"Bad uncompressed size: "+oe+" != "+Me),Ir(ce,lt,Tt,{unsafe:!0,mt:Ue})}function Rt(ee,de){var oe=de||{},ce=[],fe=[],me=en(1),De=oe.compression?8:0,Ue=0,Pe=0,Re=0,Me=0,qe=0,et=ee.FullPaths[0],lt=et,Ye=ee.FileIndex[0],at=[],Tt=0;for(Pe=1;Pe<ee.FullPaths.length;++Pe)if(lt=ee.FullPaths[Pe].slice(et.length),Ye=ee.FileIndex[Pe],!(!Ye.size||!Ye.content||lt=="Sh33tJ5")){var dr=Me,or=en(lt.length);for(Re=0;Re<lt.length;++Re)or.write_shift(1,lt.charCodeAt(Re)&127);or=or.slice(0,or.l),at[qe]=AX.buf(Ye.content,0);var Sr=Ye.content;De==8&&(Sr=K(Sr)),me=en(30),me.write_shift(4,67324752),me.write_shift(2,20),me.write_shift(2,Ue),me.write_shift(2,De),Ye.mt?i(me,Ye.mt):me.write_shift(4,0),me.write_shift(-4,at[qe]),me.write_shift(4,Sr.length),me.write_shift(4,Ye.content.length),me.write_shift(2,or.length),me.write_shift(2,0),Me+=me.length,ce.push(me),Me+=or.length,ce.push(or),Me+=Sr.length,ce.push(Sr),me=en(46),me.write_shift(4,33639248),me.write_shift(2,0),me.write_shift(2,20),me.write_shift(2,Ue),me.write_shift(2,De),me.write_shift(4,0),me.write_shift(-4,at[qe]),me.write_shift(4,Sr.length),me.write_shift(4,Ye.content.length),me.write_shift(2,or.length),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(4,0),me.write_shift(4,dr),Tt+=me.l,fe.push(me),Tt+=or.length,fe.push(or),++qe}return me=en(22),me.write_shift(4,101010256),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,qe),me.write_shift(2,qe),me.write_shift(4,Tt),me.write_shift(4,Me),me.write_shift(2,0),ji([ji(ce),ji(fe),me])}var Er={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Yn(ee,de){if(ee.ctype)return ee.ctype;var oe=ee.name||"",ce=oe.match(/\.([^\.]+)$/);return ce&&Er[ce[1]]||de&&(ce=(oe=de).match(/[\.\\]([^\.\\])+$/),ce&&Er[ce[1]])?Er[ce[1]]:"application/octet-stream"}function Ti(ee){for(var de=a2(ee),oe=[],ce=0;ce<de.length;ce+=76)oe.push(de.slice(ce,ce+76));return oe.join(`\r
`)+`\r
`}function ls(ee){var de=ee.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Re){var Me=Re.charCodeAt(0).toString(16).toUpperCase();return"="+(Me.length==1?"0"+Me:Me)});de=de.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),de.charAt(0)==`
`&&(de="=0D"+de.slice(1)),de=de.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var oe=[],ce=de.split(`\r
`),fe=0;fe<ce.length;++fe){var me=ce[fe];if(me.length==0){oe.push("");continue}for(var De=0;De<me.length;){var Ue=76,Pe=me.slice(De,De+Ue);Pe.charAt(Ue-1)=="="?Ue--:Pe.charAt(Ue-2)=="="?Ue-=2:Pe.charAt(Ue-3)=="="&&(Ue-=3),Pe=me.slice(De,De+Ue),De+=Ue,De<me.length&&(Pe+="="),oe.push(Pe)}}return oe.join(`\r
`)}function pl(ee){for(var de=[],oe=0;oe<ee.length;++oe){for(var ce=ee[oe];oe<=ee.length&&ce.charAt(ce.length-1)=="=";)ce=ce.slice(0,ce.length-1)+ee[++oe];de.push(ce)}for(var fe=0;fe<de.length;++fe)de[fe]=de[fe].replace(/[=][0-9A-Fa-f]{2}/g,function(me){return String.fromCharCode(parseInt(me.slice(1),16))});return ta(de.join(`\r
`))}function Ba(ee,de,oe){for(var ce="",fe="",me="",De,Ue=0;Ue<10;++Ue){var Pe=de[Ue];if(!Pe||Pe.match(/^\s*$/))break;var Re=Pe.match(/^(.*?):\s*([^\s].*)$/);if(Re)switch(Re[1].toLowerCase()){case"content-location":ce=Re[2].trim();break;case"content-type":me=Re[2].trim();break;case"content-transfer-encoding":fe=Re[2].trim();break}}switch(++Ue,fe.toLowerCase()){case"base64":De=ta(Cs(de.slice(Ue).join("")));break;case"quoted-printable":De=pl(de.slice(Ue));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+fe)}var Me=Ir(ee,ce.slice(oe.length),De,{unsafe:!0});me&&(Me.ctype=me)}function mo(ee,de){if(V(ee.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var oe=de&&de.root||"",ce=(Xt&&Buffer.isBuffer(ee)?ee.toString("binary"):V(ee)).split(`\r
`),fe=0,me="";for(fe=0;fe<ce.length;++fe)if(me=ce[fe],!!/^Content-Location:/i.test(me)&&(me=me.slice(me.indexOf("file")),oe||(oe=me.slice(0,me.lastIndexOf("/")+1)),me.slice(0,oe.length)!=oe))for(;oe.length>0&&(oe=oe.slice(0,oe.length-1),oe=oe.slice(0,oe.lastIndexOf("/")+1),me.slice(0,oe.length)!=oe););var De=(ce[1]||"").match(/boundary="(.*?)"/);if(!De)throw new Error("MAD cannot find boundary");var Ue="--"+(De[1]||""),Pe=[],Re=[],Me={FileIndex:Pe,FullPaths:Re};b(Me);var qe,et=0;for(fe=0;fe<ce.length;++fe){var lt=ce[fe];lt!==Ue&&lt!==Ue+"--"||(et++&&Ba(Me,ce.slice(qe,fe),oe),qe=fe)}return Me}function Qr(ee,de){var oe=de||{},ce=oe.boundary||"SheetJS";ce="------="+ce;for(var fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ce.slice(2)+'"',"","",""],me=ee.FullPaths[0],De=me,Ue=ee.FileIndex[0],Pe=1;Pe<ee.FullPaths.length;++Pe)if(De=ee.FullPaths[Pe].slice(me.length),Ue=ee.FileIndex[Pe],!(!Ue.size||!Ue.content||De=="Sh33tJ5")){De=De.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Tt){return"_x"+Tt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Tt){return"_u"+Tt.charCodeAt(0).toString(16)+"_"});for(var Re=Ue.content,Me=Xt&&Buffer.isBuffer(Re)?Re.toString("binary"):V(Re),qe=0,et=Math.min(1024,Me.length),lt=0,Ye=0;Ye<=et;++Ye)(lt=Me.charCodeAt(Ye))>=32&&lt<128&&++qe;var at=qe>=et*4/5;fe.push(ce),fe.push("Content-Location: "+(oe.root||"file:///C:/SheetJS/")+De),fe.push("Content-Transfer-Encoding: "+(at?"quoted-printable":"base64")),fe.push("Content-Type: "+Yn(Ue,De)),fe.push(""),fe.push(at?ls(Me):Ti(Me))}return fe.push(ce+`--\r
`),fe.join(`\r
`)}function go(ee){var de={};return b(de,ee),de}function Ir(ee,de,oe,ce){var fe=ce&&ce.unsafe;fe||b(ee);var me=!fe&&Qt.find(ee,de);if(!me){var De=ee.FullPaths[0];de.slice(0,De.length)==De?De=de:(De.slice(-1)!="/"&&(De+="/"),De=(De+de).replace("//","/")),me={name:s(de),type:2},ee.FileIndex.push(me),ee.FullPaths.push(De),fe||Qt.utils.cfb_gc(ee)}return me.content=oe,me.size=oe?oe.length:0,ce&&(ce.CLSID&&(me.clsid=ce.CLSID),ce.mt&&(me.mt=ce.mt),ce.ct&&(me.ct=ce.ct)),me}function kn(ee,de){b(ee);var oe=Qt.find(ee,de);if(oe){for(var ce=0;ce<ee.FileIndex.length;++ce)if(ee.FileIndex[ce]==oe)return ee.FileIndex.splice(ce,1),ee.FullPaths.splice(ce,1),!0}return!1}function ml(ee,de,oe){b(ee);var ce=Qt.find(ee,de);if(ce){for(var fe=0;fe<ee.FileIndex.length;++fe)if(ee.FileIndex[fe]==ce)return ee.FileIndex[fe].name=s(oe),ee.FullPaths[fe]=oe,!0}return!1}function Bc(ee){_(ee,!0)}return e.find=k,e.read=w,e.parse=u,e.write=z,e.writeFile=B,e.utils={cfb_new:go,cfb_add:Ir,cfb_del:kn,cfb_mov:ml,cfb_gc:Bc,ReadShift:Mu,CheckField:SI,prep_blob:bn,bconcat:ji,use_zlib:j,_deflateRaw:ye,_inflateRaw:ft,consts:O},e}();function CX(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Pa(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function Ox(t){for(var e=[],r=Pa(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}var oh=new Date(1899,11,30,0,0,0);function os(t,e){var r=t.getTime(),n=oh.getTime()+(t.getTimezoneOffset()-oh.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var rI=new Date,IX=oh.getTime()+(rI.getTimezoneOffset()-oh.getTimezoneOffset())*6e4,p2=rI.getTimezoneOffset();function Sp(t){var e=new Date;return e.setTime(t*24*60*60*1e3+IX),e.getTimezoneOffset()!==p2&&e.setTime(e.getTime()+(e.getTimezoneOffset()-p2)*6e4),e}function kX(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var m2=new Date("2017-02-19T19:06:09.000Z"),nI=isNaN(m2.getFullYear())?new Date("2/19/17"):m2,DX=nI.getFullYear()==2017;function fn(t,e){var r=new Date(t);if(DX)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(nI.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Yo(t,e){if(Xt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return pu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return pu(H4(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return pu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return pu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function Cn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Cn(t[r]));return e}function Nr(t,e){for(var r="";r.length<e;)r+=t;return r}function oa(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var PX=["january","february","march","april","may","june","july","august","september","october","november","december"];function bc(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&PX.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var FX=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),a=[i[0]],o=1;o<i.length;++o)a.push(s),a.push(i[o]);return a}}();function sI(t){return t?t.content&&t.type?Yo(t.content,!0):t.data?du(t.data):t.asNodeBuffer&&Xt?du(t.asNodeBuffer().toString("binary")):t.asBinary?du(t.asBinary()):t._data&&t._data.getContent?du(Yo(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function aI(t){if(!t)return null;if(t.data)return n2(t.data);if(t.asNodeBuffer&&Xt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?n2(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function RX(t){return t&&t.name.slice(-4)===".bin"?aI(t):sI(t)}function Fs(t,e){for(var r=t.FullPaths||Pa(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var a=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||s==a)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function Nx(t,e){var r=Fs(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Kr(t,e,r){if(!r)return RX(Nx(t,e));if(!e)return null;try{return Kr(t,e)}catch{return null}}function _s(t,e,r){if(!r)return sI(Nx(t,e));if(!e)return null;try{return _s(t,e)}catch{return null}}function OX(t,e,r){return aI(Nx(t,e))}function g2(t){for(var e=t.FullPaths||Pa(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function NX(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Xt?n=ll(r):n=eX(r),Qt.utils.cfb_add(t,e,n)}Qt.utils.cfb_add(t,e,r)}else t.file(e,r)}function iI(t,e){switch(e.type){case"base64":return Qt.read(t,{type:"base64"});case"binary":return Qt.read(t,{type:"binary"});case"buffer":case"array":return Qt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function hu(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var oI=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,MX=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,v2=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,LX=/<[^>]*>/g,Xn=oI.match(v2)?v2:LX,BX=/<\w*:/,UX=/<(\/?)\w+:/;function St(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var a=t.match(MX),o=0,l="",c=0,u="",d="",h=1;if(a)for(c=0;c!=a.length;++c){for(d=a[c],i=0;i!=d.length&&d.charCodeAt(i)!==61;++i);for(u=d.slice(0,i).trim();d.charCodeAt(i+1)==32;)++i;for(h=(s=d.charCodeAt(i+1))==34||s==39?1:0,l=d.slice(i+1+h,d.length-h),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,n[u.toLowerCase()]=l;else{var p=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[p]&&u.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function Ma(t){return t.replace(UX,"<$1")}var lI={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},$X=Ox(lI),tr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(o,l){return lI[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,a)+r(s.slice(a+3))}}(),VX=/[&<>'"]/g,jX=/[\u0000-\u001f]/g;function Mx(t){var e=t+"";return e.replace(VX,function(r){return $X[r]}).replace(/\n/g,"<br/>").replace(jX,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var x2=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Ar(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Xm(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function y2(t){var e=oo(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function E2(t){return ll(t,"binary").toString("utf8")}var Mf="foo bar baz",xr=Xt&&(E2(Mf)==Xm(Mf)&&E2||y2(Mf)==Xm(Mf)&&y2)||Xm,pu=Xt?function(t){return ll(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},yd=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),cI=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),HX=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),GX=/<\/?(?:vt:)?variant>/g,WX=/<(?:vt:)([^>]*)>([\s\S]*)</;function b2(t,e){var r=St(t),n=t.match(HX(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var a=i.replace(GX,"").match(WX);a&&s.push({v:xr(a[2]),t:a[1]})}),s}var zX=/(^\s|\s$|\n)/;function KX(t){return Pa(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function qX(t,e,r){return"<"+t+(r!=null?KX(r):"")+(e!=null?(e.match(zX)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Lx(t){if(Xt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return xr(cl(Px(t)));throw new Error("Bad input format: expected Buffer or string")}var Ed=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,XX={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},YX=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function JX(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function QX(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var _2=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},S2=Xt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:ll(e)})):_2(t)}:_2,T2=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(ri(t,s)));return n.join("").replace(is,"")},Bx=Xt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(is,""):T2(t,e,r)}:T2,w2=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},uI=Xt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):w2(t,e,r)}:w2,A2=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Nl(t,s)));return n.join("")},Yd=Xt?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):A2(e,r,n)}:A2,dI=function(t,e){var r=bs(t,e);return r>0?Yd(t,e+4,e+4+r-1):""},fI=dI,hI=function(t,e){var r=bs(t,e);return r>0?Yd(t,e+4,e+4+r-1):""},pI=hI,mI=function(t,e){var r=2*bs(t,e);return r>0?Yd(t,e+4,e+4+r-1):""},gI=mI,vI=function(e,r){var n=bs(e,r);return n>0?Bx(e,r+4,r+4+n):""},xI=vI,yI=function(t,e){var r=bs(t,e);return r>0?Yd(t,e+4,e+4+r):""},EI=yI,bI=function(t,e){return JX(t,e)},lh=bI,_I=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Xt&&(fI=function(e,r){if(!Buffer.isBuffer(e))return dI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},pI=function(e,r){if(!Buffer.isBuffer(e))return hI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},gI=function(e,r){if(!Buffer.isBuffer(e))return mI(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},xI=function(e,r){if(!Buffer.isBuffer(e))return vI(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},EI=function(e,r){if(!Buffer.isBuffer(e))return yI(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},lh=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):bI(e,r)},_I=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Nl=function(t,e){return t[e]},ri=function(t,e){return t[e+1]*256+t[e]},ZX=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},bs=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Ao=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},eY=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Mu(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,Xt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(ri(this,c)),c+=2;t*=2;break;case"utf8":r=Yd(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Bx(this,this.l,this.l+t);break;case"wstr":return Mu.call(this,t,"dbcs");case"lpstr-ansi":r=fI(this,this.l),t=4+bs(this,this.l);break;case"lpstr-cp":r=pI(this,this.l),t=4+bs(this,this.l);break;case"lpwstr":r=gI(this,this.l),t=4+2*bs(this,this.l);break;case"lpp4":t=4+bs(this,this.l),r=xI(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+bs(this,this.l),r=EI(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Nl(this,this.l+t++))!==0;)i.push(Nf(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=ri(this,this.l+t))!==0;)i.push(Nf(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Nl(this,c),this.l=c+1,o=Mu.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Nf(ri(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Nl(this,c),this.l=c+1,o=Mu.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Nf(Nl(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=Nl(this,this.l),this.l++,n;case 2:return n=(e==="i"?ZX:ri)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Ao:eY)(this,this.l),this.l+=4,n):(s=bs(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=lh(this,this.l):s=lh([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=uI(this,this.l,t);break}}return this.l+=t,r}var tY=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},rY=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},nY=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function sY(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)nY(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,tY(this,e,this.l);break;case 8:if(n=8,r==="f"){QX(this,e,this.l);break}case 16:break;case-4:n=4,rY(this,e,this.l);break}return this.l+=n,this}function SI(t,e){var r=uI(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function bn(t,e){t.l=e,t.read_shift=Mu,t.chk=SI,t.write_shift=sY}function qn(t,e){t.l+=e}function en(t){var e=oo(t);return bn(e,0),e}function _i(t,e,r){if(t){var n,s,i;bn(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=ph[o]||ph[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;l=t.l+i;var u=c.f&&c.f(t,i,r);if(t.l=l,e(u,c,o))return}}}function yv(){var t=[],e=Xt?256:2048,r=function(c){var u=en(c);return bn(u,0),u},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),ji(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function Lu(t,e,r){var n=Cn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function C2(t,e,r){var n=Cn(t);return n.s=Lu(n.s,e.s,r),n.e=Lu(n.e,e.s,r),n}function Bu(t,e){if(t.cRel&&t.c<0)for(t=Cn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Cn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Pt(t);return!t.cRel&&t.cRel!=null&&(r=oY(r)),!t.rRel&&t.rRel!=null&&(r=aY(r)),r}function Ym(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+sn(t.s.c)+":"+(t.e.cRel?"":"$")+sn(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+In(t.s.r)+":"+(t.e.rRel?"":"$")+In(t.e.r):Bu(t.s,e.biff)+":"+Bu(t.e,e.biff)}function Ux(t){return parseInt(iY(t),10)-1}function In(t){return""+(t+1)}function aY(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function iY(t){return t.replace(/\$(\d+)$/,"$1")}function $x(t){for(var e=lY(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function sn(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function oY(t){return t.replace(/^([A-Z])/,"$$$1")}function lY(t){return t.replace(/^\$([A-Z])/,"$1")}function cY(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ss(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Pt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Mc(t){var e=t.indexOf(":");return e==-1?{s:ss(t),e:ss(t)}:{s:ss(t.slice(0,e)),e:ss(t.slice(e+1))}}function er(t,e){return typeof e>"u"||typeof e=="number"?er(t.s,t.e):(typeof t!="string"&&(t=Pt(t)),typeof e!="string"&&(e=Pt(e)),t==e?t:t+":"+e)}function Lr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function I2(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=$s(t.z,r?os(e):e)}catch{}try{return t.w=$s((t.XF||{}).numFmtId||(r?14:0),r?os(e):e)}catch{return""+e}}function yi(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?fl[t.v]||t.v:e==null?I2(t,t.v):I2(t,e))}function po(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function TI(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?ss(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Lr(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=u.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[d].length;++h)if(!(typeof e[d][h]>"u")){var p={v:e[d][h]},m=a+d,g=o+h;if(c.s.r>m&&(c.s.r=m),c.s.c>g&&(c.s.c=g),c.e.r<m&&(c.e.r=m),c.e.c<g&&(c.e.c=g),e[d][h]&&typeof e[d][h]=="object"&&!Array.isArray(e[d][h])&&!(e[d][h]instanceof Date))p=e[d][h];else if(Array.isArray(p.v)&&(p.f=e[d][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Nt[14],n.cellDates?(p.t="d",p.w=$s(p.z,os(p.v))):(p.t="n",p.v=os(p.v),p.w=$s(p.z,p.v))):p.t="s";if(s)i[m]||(i[m]=[]),i[m][g]&&i[m][g].z&&(p.z=i[m][g].z),i[m][g]=p;else{var v=Pt({c:g,r:m});i[v]&&i[v].z&&(p.z=i[v].z),i[v]=p}}}return c.s.c<1e7&&(i["!ref"]=er(c)),i}function Lc(t,e){return TI(null,t,e)}function uY(t){return t.read_shift(4,"i")}function zn(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function dY(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Vx(t,e){var r=t.l,n=t.read_shift(1),s=zn(t),i=[],a={t:s,h:s};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(dY(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}var fY=Vx;function Gs(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function ul(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var hY=zn;function jx(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var pY=zn,Ev=jx;function Hx(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?lh([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Ao(e,0)>>2;return r?s/100:s}function wI(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var dl=wI;function $n(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function mY(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=Bo[s];c&&(e.rgb=_d(c));break;case 2:e.rgb=_d([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function gY(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function AI(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function vY(t){return AI(t,1)}function xY(t){return AI(t,2)}var Gx=2,fs=3,Lf=11,k2=12,ch=19,Bf=64,yY=65,EY=71,bY=4108,_Y=4126,ln=80,CI=81,SY=[ln,CI],TY={1:{n:"CodePage",t:Gx},2:{n:"Category",t:ln},3:{n:"PresentationFormat",t:ln},4:{n:"ByteCount",t:fs},5:{n:"LineCount",t:fs},6:{n:"ParagraphCount",t:fs},7:{n:"SlideCount",t:fs},8:{n:"NoteCount",t:fs},9:{n:"HiddenCount",t:fs},10:{n:"MultimediaClipCount",t:fs},11:{n:"ScaleCrop",t:Lf},12:{n:"HeadingPairs",t:bY},13:{n:"TitlesOfParts",t:_Y},14:{n:"Manager",t:ln},15:{n:"Company",t:ln},16:{n:"LinksUpToDate",t:Lf},17:{n:"CharacterCount",t:fs},19:{n:"SharedDoc",t:Lf},22:{n:"HyperlinksChanged",t:Lf},23:{n:"AppVersion",t:fs,p:"version"},24:{n:"DigSig",t:yY},26:{n:"ContentType",t:ln},27:{n:"ContentStatus",t:ln},28:{n:"Language",t:ln},29:{n:"Version",t:ln},255:{},2147483648:{n:"Locale",t:ch},2147483651:{n:"Behavior",t:ch},1919054434:{}},wY={1:{n:"CodePage",t:Gx},2:{n:"Title",t:ln},3:{n:"Subject",t:ln},4:{n:"Author",t:ln},5:{n:"Keywords",t:ln},6:{n:"Comments",t:ln},7:{n:"Template",t:ln},8:{n:"LastAuthor",t:ln},9:{n:"RevNumber",t:ln},10:{n:"EditTime",t:Bf},11:{n:"LastPrinted",t:Bf},12:{n:"CreatedDate",t:Bf},13:{n:"ModifiedDate",t:Bf},14:{n:"PageCount",t:fs},15:{n:"WordCount",t:fs},16:{n:"CharCount",t:fs},17:{n:"Thumbnail",t:EY},18:{n:"Application",t:ln},19:{n:"DocSecurity",t:fs},255:{},2147483648:{n:"Locale",t:ch},2147483651:{n:"Behavior",t:ch},1919054434:{}},D2={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},AY=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function CY(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var IY=CY([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Bo=Cn(IY),fl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},II={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},P2={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function kY(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function DY(t){var e=kY();if(!t||!t.match)return e;var r={};if((t.match(Xn)||[]).forEach(function(n){var s=St(n);switch(s[0].replace(BX,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[P2[s.ContentType]]!==void 0&&e[P2[s.ContentType]].push(s.PartName);break}}),e.xmlns!==XX.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}var $l={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function bv(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Uu(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Xn)||[]).forEach(function(s){var i=St(s);if(i[0]==="<Relationship"){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:hu(i.Target,e);r[o]=a,n[i.Id]=a}}),r["!id"]=n,r}var PY="application/vnd.oasis.opendocument.spreadsheet";function FY(t,e){for(var r=Lx(t),n,s;n=Ed.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=St(n[0],!1),s.path=="/"&&s.type!==PY)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var $u=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],RY=function(){for(var t=new Array($u.length),e=0;e<$u.length;++e){var r=$u[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function kI(t){var e={};t=xr(t);for(var r=0;r<$u.length;++r){var n=$u[r],s=t.match(RY[r]);s!=null&&s.length>0&&(e[n[1]]=tr(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=fn(e[n[1]]))}return e}var OY=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function DI(t,e,r,n){var s=[];if(typeof t=="string")s=b2(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(u){return{v:u}}));var a=typeof e=="string"?b2(e,n).map(function(u){return u.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function NY(t,e,r){var n={};return e||(e={}),t=xr(t),OY.forEach(function(s){var i=(t.match(yd(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=tr(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var a=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));a&&a.length>0&&(n[s[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&DI(n.HeadingPairs,n.TitlesOfParts,e,r),e}var MY=/<[^>]+>[^<]*/g;function LY(t,e){var r={},n="",s=t.match(MY);if(s)for(var i=0;i!=s.length;++i){var a=s[i],o=St(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=tr(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=tr(u);break;case"bool":r[n]=Ar(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=fn(u);break;case"cy":case"error":r[n]=tr(u);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}var BY={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Jm;function UY(t,e,r){Jm||(Jm=Ox(BY)),e=Jm[e]||e,t[e]=r}function Wx(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function PI(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function FI(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function RI(t,e,r){return e===31?FI(t):PI(t,e,r)}function _v(t,e,r){return RI(t,e,r===!1?0:4)}function $Y(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return RI(t,e,0)}function VY(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(is,""),t.l-s&2&&(t.l+=2)}return r}function jY(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(is,"");return r}function HY(t){var e=t.l,r=uh(t,CI);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=uh(t,fs);return[r,n]}function GY(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(HY(t));return r}function F2(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),a=t.read_shift(4);n[i]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(is,"").replace(fu,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function OI(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function WY(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function uh(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==k2&&n!==e&&SY.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===k2?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return PI(t,n,4).replace(is,"");case 31:return FI(t);case 64:return Wx(t);case 65:return OI(t);case 71:return WY(t);case 80:return _v(t,n,!i.raw).replace(is,"");case 81:return $Y(t,n).replace(is,"");case 4108:return GY(t);case 4126:case 4127:return n==4127?VY(t):jY(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function R2(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0,o=0,l=-1,c={};for(a=0;a!=s;++a){var u=t.read_shift(4),d=t.read_shift(4);i[a]=[u,d+r]}i.sort(function(x,E){return x[1]-E[1]});var h={};for(a=0;a!=s;++a){if(t.l!==i[a][1]){var p=!0;if(a>0&&e)switch(e[i[a-1][0]].t){case 2:t.l+2===i[a][1]&&(t.l+=2,p=!1);break;case 80:t.l<=i[a][1]&&(t.l=i[a][1],p=!1);break;case 4108:t.l<=i[a][1]&&(t.l=i[a][1],p=!1);break}if((!e||a==0)&&t.l<=i[a][1]&&(p=!1,t.l=i[a][1]),p)throw new Error("Read Error: Expected address "+i[a][1]+" at "+t.l+" :"+a)}if(e){var m=e[i[a][0]];if(h[m.n]=uh(t,m.t,{raw:!0}),m.p==="version"&&(h[m.n]=String(h[m.n]>>16)+"."+("0000"+String(h[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(h[m.n]){case 0:h[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:na(o=h[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[m.n])}}else if(i[a][0]===1){if(o=h.CodePage=uh(t,Gx),na(o),l!==-1){var g=t.l;t.l=i[l][1],c=F2(t,o),t.l=g}}else if(i[a][0]===0){if(o===0){l=a,t.l=i[a+1][1];continue}c=F2(t,o)}else{var v=c[i[a][0]],y;switch(t[t.l]){case 65:t.l+=4,y=OI(t);break;case 30:t.l+=4,y=_v(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,y=_v(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,y=t.read_shift(4,"i");break;case 19:t.l+=4,y=t.read_shift(4);break;case 5:t.l+=4,y=t.read_shift(8,"f");break;case 11:t.l+=4,y=Ur(t,4);break;case 64:t.l+=4,y=fn(Wx(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[v]=y}}return t.l=r+n,h}function O2(t,e,r){var n=t.content;if(!n)return{};bn(n,0);var s,i,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==Qt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(a=n.read_shift(16),l=n.read_shift(4));var d=R2(n,e),h={SystemIdentifier:c};for(var p in d)h[p]=d[p];if(h.FMTID=i,s===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var m;try{m=R2(n,null)}catch{}for(p in m)h[p]=m[p];return h.FMTID=[i,a],h}function Fi(t,e){return t.read_shift(e),null}function zY(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function Ur(t,e){return t.read_shift(e)===1}function qr(t){return t.read_shift(2,"u")}function NI(t,e){return zY(t,e,qr)}function KY(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function Jd(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function qY(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),a=0,o,l={};s&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",u=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*a),n&&(t.l+=o),l.t=u,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Jo(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Qd(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Jo(t,n,r)}function hl(t,e,r){if(r.biff>5)return Qd(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function XY(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function YY(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(is,"");return n&&(t.l+=24),s}function JY(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(i>>1,"utf16le").replace(is,"");return r+a}function QY(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return YY(t);case"0303000000000000c000000000000046":return JY(t);default:throw new Error("Unsupported Moniker "+r)}}function Uf(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(is,""):"";return r}function ZY(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,a,o,l,c="",u,d;s&16&&(i=Uf(t,r-t.l)),s&128&&(a=Uf(t,r-t.l)),(s&257)===257&&(o=Uf(t,r-t.l)),(s&257)===1&&(l=QY(t,r-t.l)),s&8&&(c=Uf(t,r-t.l)),s&32&&(u=t.read_shift(16)),s&64&&(d=Wx(t)),t.l=r;var h=a||o||l||"";h&&c&&(h+="#"+c),h||(h="#"+c),s&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return u&&(p.guid=u),d&&(p.time=d),i&&(p.Tooltip=i),p}function MI(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function LI(t,e){var r=MI(t);return r[3]=0,r}function La(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function eJ(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function tJ(t,e,r){return e===0?"":hl(t,e,r)}function rJ(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function BI(t){var e=t.read_shift(2),r=Hx(t);return[e,r]}function nJ(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=Jd(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function Tp(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function UI(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var sJ=UI;function $I(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function aJ(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function iJ(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Rn(t){t.l+=2,t.l+=t.read_shift(2)}var oJ={0:Rn,4:Rn,5:Rn,6:Rn,7:iJ,8:Rn,9:Rn,10:Rn,11:Rn,12:Rn,13:aJ,14:Rn,15:Rn,16:Rn,17:Rn,18:Rn,19:Rn,20:Rn,21:$I};function lJ(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(oJ[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function $f(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function cJ(t,e){return e===0||t.read_shift(2),1200}function uJ(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=hl(t,0,r);return t.read_shift(e+n-t.l),s}function dJ(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function fJ(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var a=Jd(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:s,dt:i,name:a}}function hJ(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0;a!=s&&t.l<r;++a)i.push(qY(t));return i.Count=n,i.Unique=s,i}function pJ(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function mJ(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function gJ(t){var e=eJ(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function vJ(t){return t.read_shift(2),t.read_shift(4)}function N2(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function xJ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function yJ(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function EJ(){}function bJ(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Jd(t,0,r),n}function _J(t){var e=La(t);return e.isst=t.read_shift(4),e}function SJ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=La(t);r.biff==2&&t.l++;var i=Qd(t,n-t.l,r);return s.val=i,s}function TJ(t,e,r){var n=t.read_shift(2),s=hl(t,0,r);return[n,s]}var wJ=hl;function M2(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),a=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:i,c:o},e:{r:a,c:l}}}function AJ(t){var e=t.read_shift(2),r=t.read_shift(2),n=BI(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function CJ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(BI(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:a,rkrec:i}}function IJ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:a,ixfe:i}}function kJ(t,e,r,n){var s={},i=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=AY[o>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=a&15,s.dgRight=a>>4&15,s.dgTop=a>>8&15,s.dgBottom=a>>12&15,s.icvLeft=a>>16&127,s.icvRight=a>>23&127,s.grbitDiag=a>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function DJ(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=kJ(t,e,n.fStyle,r),n}function PJ(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function L2(t,e,r){var n=La(t);(r.biff==2||e==9)&&++t.l;var s=KY(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function FJ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=La(t),s=$n(t);return n.val=s,n}var B2=tJ;function RJ(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var a=Jo(t,i),o=[];n>t.l;)o.push(Qd(t));return[i,s,a,o]}function U2(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=nJ(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var OJ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function $2(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=Jo(t,a,r);s&32&&(c=OJ[c.charCodeAt(0)]);var u=n-t.l;r&&r.biff==2&&--u;var d=n==t.l||o===0||!(u>0)?[]:mte(t,u,r,o);return{chKey:i,Name:c,itab:l,rgce:d}}function VI(t,e,r){if(r.biff<8)return NJ(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(rJ(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function NJ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Jd(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function MJ(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=Jo(t,n,r),a=Jo(t,s,r);return[i,a]}function LJ(t,e,r){var n=UI(t);t.l++;var s=t.read_shift(1);return e-=8,[gte(t,e,r),s,n]}function V2(t,e,r){var n=sJ(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,hte(t,e,r)]}function BJ(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function UJ(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=hl(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,a,i]}}function $J(t,e,r){return UJ(t,e,r)}function VJ(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(Tp(t));return r}function jJ(t,e,r){if(r&&r.biff<8)return GJ(t,e,r);var n=$I(t),s=lJ(t,e-22,n[1]);return{cmo:n,ft:s}}var HJ={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function GJ(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((HJ[n]||qn)(t,e,r)),{cmo:[s,n,i],ft:a}}function WJ(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:a=XY(t,6,r);var o=t.read_shift(2);t.read_shift(2),qr(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var u=t[t.l],d=Jo(t,t.lens[c+1]-t.lens[c]-1);if(s+=d,s.length>=(u?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function zJ(t,e){var r=Tp(t);t.l+=16;var n=ZY(t,e-24);return[r,n]}function KJ(t,e){t.read_shift(2);var r=Tp(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(is,""),[r,n]}function qJ(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=D2[r]||r,r=t.read_shift(2),e[1]=D2[r]||r,e}function XJ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(LI(t));return r}function YJ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(LI(t));return r}function JJ(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function jI(t,e,r){if(!r.cellStyles)return qn(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function QJ(t,e){var r={};return e<32||(t.l+=16,r.header=$n(t),r.footer=$n(t),t.l+=2),r}function ZJ(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}var eQ=La,tQ=NI,rQ=Qd;function nQ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function sQ(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=La(t);++t.l;var s=hl(t,e-7,r);return n.t="str",n.val=s,n}function aQ(t){var e=La(t);++t.l;var r=$n(t);return e.t="n",e.val=r,e}function iQ(t){var e=La(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function oQ(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function lQ(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function cQ(t,e,r){var n=t.l+e,s=La(t),i=t.read_shift(2),a=Jo(t,i,r);return t.l=n,s.t="str",s.val=a,s}var uQ=[2,3,48,49,131,139,140,245],j2=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Ox({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],u=oo(1);switch(l.type){case"base64":u=ta(Cs(o));break;case"binary":u=ta(o);break;case"buffer":case"array":u=o;break}bn(u,0);var d=u.read_shift(1),h=!!(d&136),p=!1,m=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var g=0,v=521;d==2&&(g=u.read_shift(2)),u.l+=3,d!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),d!=2&&(v=u.read_shift(2));var y=u.read_shift(2),x=l.codepage||1252;d!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(x=t[u[u.l]]),u.l+=1,u.l+=2),m&&(u.l+=36);for(var E=[],I={},P=Math.min(u.length,d==2?521:v-10-(p?264:0)),w=m?32:11;u.l<P&&u[u.l]!=13;)switch(I={},I.name=vd.utils.decode(x,u.slice(u.l,u.l+w)).replace(/[\u0000\r\n].*$/g,""),u.l+=w,I.type=String.fromCharCode(u.read_shift(1)),d!=2&&!m&&(I.offset=u.read_shift(4)),I.len=u.read_shift(1),d==2&&(I.offset=u.read_shift(2)),I.dec=u.read_shift(1),I.name.length&&E.push(I),d!=2&&(u.l+=m?13:14),I.type){case"B":(!p||I.len!=8)&&l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+I.type)}if(u[u.l]!==13&&(u.l=v-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=v;var b=0,T=0;for(c[0]=[],T=0;T!=E.length;++T)c[0][T]=E[T].name;for(;g-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,c[++b]=[],T=0,T=0;T!=E.length;++T){var _=u.slice(u.l,u.l+E[T].len);u.l+=E[T].len,bn(_,0);var S=vd.utils.decode(x,_);switch(E[T].type){case"C":S.trim().length&&(c[b][T]=S.replace(/\s+$/,""));break;case"D":S.length===8?c[b][T]=new Date(+S.slice(0,4),+S.slice(4,6)-1,+S.slice(6,8)):c[b][T]=S;break;case"F":c[b][T]=parseFloat(S.trim());break;case"+":case"I":c[b][T]=m?_.read_shift(-4,"i")^2147483648:_.read_shift(4,"i");break;case"L":switch(S.trim().toUpperCase()){case"Y":case"T":c[b][T]=!0;break;case"N":case"F":c[b][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+S+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[b][T]="##MEMO##"+(m?parseInt(S.trim(),10):_.read_shift(4));break;case"N":S=S.replace(/\u0000/g,"").trim(),S&&S!="."&&(c[b][T]=+S||0);break;case"@":c[b][T]=new Date(_.read_shift(-8,"f")-621356832e5);break;case"T":c[b][T]=new Date((_.read_shift(4)-2440588)*864e5+_.read_shift(4));break;case"Y":c[b][T]=_.read_shift(4,"i")/1e4+_.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[b][T]=-_.read_shift(-8,"f");break;case"B":if(p&&E[T].len==8){c[b][T]=_.read_shift(8,"f");break}case"G":case"P":_.l+=E[T].len;break;case"0":if(E[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+E[T].type)}}}if(d!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=E,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=Lc(r(o,c),c);return u["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,u}function s(o,l){try{return po(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&na(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=yv(),d=Iv(o,{header:1,raw:!0,cellDates:!0}),h=d[0],p=d.slice(1),m=o["!cols"]||[],g=0,v=0,y=0,x=1;for(g=0;g<h.length;++g){if(((m[g]||{}).DBF||{}).name){h[g]=m[g].DBF.name,++y;continue}if(h[g]!=null){if(++y,typeof h[g]=="number"&&(h[g]=h[g].toString(10)),typeof h[g]!="string")throw new Error("DBF Invalid column name "+h[g]+" |"+typeof h[g]+"|");if(h.indexOf(h[g])!==g){for(v=0;v<1024;++v)if(h.indexOf(h[g]+"_"+v)==-1){h[g]+="_"+v;break}}}}var E=Lr(o["!ref"]),I=[],P=[],w=[];for(g=0;g<=E.e.c-E.s.c;++g){var b="",T="",_=0,S=[];for(v=0;v<p.length;++v)p[v][g]!=null&&S.push(p[v][g]);if(S.length==0||h[g]==null){I[g]="?";continue}for(v=0;v<S.length;++v){switch(typeof S[v]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=S[v]instanceof Date?"D":"C";break;default:T="C"}_=Math.max(_,String(S[v]).length),b=b&&b!=T?"C":T}_>250&&(_=250),T=((m[g]||{}).DBF||{}).type,T=="C"&&m[g].DBF.len>_&&(_=m[g].DBF.len),b=="B"&&T=="N"&&(b="N",w[g]=m[g].DBF.dec,_=m[g].DBF.len),P[g]=b=="C"||T=="N"?_:i[b]||0,x+=P[g],I[g]=b}var k=u.next(32);for(k.write_shift(4,318902576),k.write_shift(4,p.length),k.write_shift(2,296+32*y),k.write_shift(2,x),g=0;g<4;++g)k.write_shift(4,0);for(k.write_shift(4,0|(+e[V4]||3)<<8),g=0,v=0;g<h.length;++g)if(h[g]!=null){var A=u.next(32),D=(h[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);A.write_shift(1,D,"sbcs"),A.write_shift(1,I[g]=="?"?"C":I[g],"sbcs"),A.write_shift(4,v),A.write_shift(1,P[g]||i[I[g]]||0),A.write_shift(1,w[g]||0),A.write_shift(1,2),A.write_shift(4,0),A.write_shift(1,0),A.write_shift(4,0),A.write_shift(4,0),v+=P[g]||i[I[g]]||0}var N=u.next(264);for(N.write_shift(4,13),g=0;g<65;++g)N.write_shift(4,0);for(g=0;g<p.length;++g){var R=u.next(x);for(R.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(I[v]){case"L":R.write_shift(1,p[g][v]==null?63:p[g][v]?84:70);break;case"B":R.write_shift(8,p[g][v]||0,"f");break;case"N":var F="0";for(typeof p[g][v]=="number"&&(F=p[g][v].toFixed(w[v]||0)),y=0;y<P[v]-F.length;++y)R.write_shift(1,32);R.write_shift(1,F,"sbcs");break;case"D":p[g][v]?(R.write_shift(4,("0000"+p[g][v].getFullYear()).slice(-4),"sbcs"),R.write_shift(2,("00"+(p[g][v].getMonth()+1)).slice(-2),"sbcs"),R.write_shift(2,("00"+p[g][v].getDate()).slice(-2),"sbcs")):R.write_shift(8,"00000000","sbcs");break;case"C":var O=String(p[g][v]!=null?p[g][v]:"").slice(0,P[v]);for(R.write_shift(1,O,"sbcs"),y=0;y<P[v]-O.length;++y)R.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}}(),dQ=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Pa(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var m=t[p];return typeof m=="number"?s2(m):m},n=function(h,p,m){var g=p.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return g==59?h:s2(g)};t["|"]=254;function s(h,p){switch(p.type){case"base64":return i(Cs(h),p);case"binary":return i(h,p);case"buffer":return i(Xt&&Buffer.isBuffer(h)?h.toString("binary"):cl(h),p);case"array":return i(Yo(h),p)}throw new Error("Unrecognized type "+p.type)}function i(h,p){var m=h.split(/[\n\r]+/),g=-1,v=-1,y=0,x=0,E=[],I=[],P=null,w={},b=[],T=[],_=[],S=0,k;for(+p.codepage>=0&&na(+p.codepage);y!==m.length;++y){S=0;var A=m[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=A.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),N=D[0],R;if(A.length>0)switch(N){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&I.push(A.slice(3).replace(/;;/g,";"));break;case"C":var F=!1,O=!1,B=!1,V=!1,z=-1,H=-1;for(x=1;x<D.length;++x)switch(D[x].charAt(0)){case"A":break;case"X":v=parseInt(D[x].slice(1))-1,O=!0;break;case"Y":for(g=parseInt(D[x].slice(1))-1,O||(v=0),k=E.length;k<=g;++k)E[k]=[];break;case"K":R=D[x].slice(1),R.charAt(0)==='"'?R=R.slice(1,R.length-1):R==="TRUE"?R=!0:R==="FALSE"?R=!1:isNaN(oa(R))?isNaN(bc(R).getDate())||(R=fn(R)):(R=oa(R),P!==null&&Nc(P)&&(R=Sp(R))),F=!0;break;case"E":V=!0;var j=nc(D[x].slice(1),{r:g,c:v});E[g][v]=[E[g][v],j];break;case"S":B=!0,E[g][v]=[E[g][v],"S5S"];break;case"G":break;case"R":z=parseInt(D[x].slice(1))-1;break;case"C":H=parseInt(D[x].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+A)}if(F&&(E[g][v]&&E[g][v].length==2?E[g][v][0]=R:E[g][v]=R,P=null),B){if(V)throw new Error("SYLK shared formula cannot have own formula");var W=z>-1&&E[z][H];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");E[g][v][1]=QI(W[1],{r:g-z,c:v-H})}break;case"F":var K=0;for(x=1;x<D.length;++x)switch(D[x].charAt(0)){case"X":v=parseInt(D[x].slice(1))-1,++K;break;case"Y":for(g=parseInt(D[x].slice(1))-1,k=E.length;k<=g;++k)E[k]=[];break;case"M":S=parseInt(D[x].slice(1))/20;break;case"F":break;case"G":break;case"P":P=I[parseInt(D[x].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(_=D[x].slice(1).split(" "),k=parseInt(_[0],10);k<=parseInt(_[1],10);++k)S=parseInt(_[2],10),T[k-1]=S===0?{hidden:!0}:{wch:S},_c(T[k-1]);break;case"C":v=parseInt(D[x].slice(1))-1,T[v]||(T[v]={});break;case"R":g=parseInt(D[x].slice(1))-1,b[g]||(b[g]={}),S>0?(b[g].hpt=S,b[g].hpx=Sd(S)):S===0&&(b[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+A)}K<1&&(P=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+A)}}return b.length>0&&(w["!rows"]=b),T.length>0&&(w["!cols"]=T),p&&p.sheetRows&&(E=E.slice(0,p.sheetRows)),[E,w]}function a(h,p){var m=s(h,p),g=m[0],v=m[1],y=Lc(g,p);return Pa(v).forEach(function(x){y[x]=v[x]}),y}function o(h,p){return po(a(h,p),p)}function l(h,p,m,g){var v="C;Y"+(m+1)+";X"+(g+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+JZ(h.f,{r:m,c:g}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function c(h,p){p.forEach(function(m,g){var v="F;W"+(g+1)+" "+(g+1)+" ";m.hidden?v+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=fh(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=hh(m.wpx)),typeof m.wch=="number"&&(v+=Math.round(m.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function u(h,p){p.forEach(function(m,g){var v="F;";m.hidden?v+="M0;":m.hpt?v+="M"+20*m.hpt+";":m.hpx&&(v+="M"+20*XI(m.hpx)+";"),v.length>2&&h.push(v+"R"+(g+1))})}function d(h,p){var m=["ID;PWXL;N;E"],g=[],v=Lr(h["!ref"]),y,x=Array.isArray(h),E=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),h["!cols"]&&c(m,h["!cols"]),h["!rows"]&&u(m,h["!rows"]),m.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var I=v.s.r;I<=v.e.r;++I)for(var P=v.s.c;P<=v.e.c;++P){var w=Pt({r:I,c:P});y=x?(h[I]||[])[P]:h[w],!(!y||y.v==null&&(!y.f||y.F))&&g.push(l(y,h,I,P))}return m.join(E)+E+g.join(E)+E+"E"+E}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),fQ=function(){function t(i,a){switch(a.type){case"base64":return e(Cs(i),a);case"binary":return e(i,a);case"buffer":return e(Xt&&Buffer.isBuffer(i)?i.toString("binary"):cl(i),a);case"array":return e(Yo(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,u=0,d=[];u!==o.length;++u){if(o[u].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var h=o[u].trim().split(","),p=h[0],m=h[1];++u;for(var g=o[u]||"";(g.match(/["]/g)||[]).length&1&&u<o.length-1;)g+=`
`+o[++u];switch(g=g.trim(),+p){case-1:if(g==="BOT"){d[++l]=[],c=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?d[l][c]=!0:g==="FALSE"?d[l][c]=!1:isNaN(oa(m))?isNaN(bc(m).getDate())?d[l][c]=m:d[l][c]=fn(m):d[l][c]=oa(m),++c;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),d[l][c++]=g!==""?g:null;break}if(g==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function r(i,a){return Lc(t(i,a),a)}function n(i,a){return po(r(i,a),a)}var s=function(){var i=function(l,c,u,d,h){l.push(c),l.push(u+","+d),l.push('"'+h.replace(/"/g,'""')+'"')},a=function(l,c,u,d){l.push(c+","+u),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],u=Lr(l["!ref"]),d,h=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,u.e.r-u.s.r+1,""),i(c,"TUPLES",0,u.e.c-u.s.c+1,""),i(c,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){a(c,-1,0,"BOT");for(var m=u.s.c;m<=u.e.c;++m){var g=Pt({r:p,c:m});if(d=h?(l[p]||[])[m]:l[g],!d){a(c,1,0,"");continue}switch(d.t){case"n":var v=d.w;!v&&d.v!=null&&(v=d.v),v==null?d.f&&!d.F?a(c,1,0,"="+d.f):a(c,1,0,""):a(c,0,v,"V");break;case"b":a(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=$s(d.z||Nt[14],os(fn(d.v)))),a(c,0,d.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var y=`\r
`,x=c.join(y);return x}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),hQ=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,h){for(var p=d.split(`
`),m=-1,g=-1,v=0,y=[];v!==p.length;++v){var x=p[v].trim().split(":");if(x[0]==="cell"){var E=ss(x[1]);if(y.length<=E.r)for(m=y.length;m<=E.r;++m)y[m]||(y[m]=[]);switch(m=E.r,g=E.c,x[2]){case"t":y[m][g]=t(x[3]);break;case"v":y[m][g]=+x[3];break;case"vtf":var I=x[x.length-1];case"vtc":switch(x[3]){case"nl":y[m][g]=!!+x[4];break;default:y[m][g]=+x[4];break}x[2]=="vtf"&&(y[m][g]=[y[m][g],I])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(d,h){return Lc(r(d,h),h)}function s(d,h){return po(n(d,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var h=[],p=[],m,g="",v=Mc(d["!ref"]),y=Array.isArray(d),x=v.s.r;x<=v.e.r;++x)for(var E=v.s.c;E<=v.e.c;++E)if(g=Pt({r:x,c:E}),m=y?(d[x]||[])[E]:d[g],!(!m||m.v==null||m.t==="z")){switch(p=["cell",g,"t"],m.t){case"s":case"str":p.push(e(m.v));break;case"n":m.f?(p[2]="vtf",p[3]="n",p[4]=m.v,p[5]=e(m.f)):(p[2]="v",p[3]=m.v);break;case"b":p[2]="vt"+(m.f?"f":"c"),p[3]="nl",p[4]=m.v?"1":"0",p[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var I=os(fn(m.v));p[2]="vtc",p[3]="nd",p[4]=""+I,p[5]=m.w||$s(m.z||Nt[14],I);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(d){return[i,a,o,a,c(d),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),bd=function(){function t(u,d,h,p,m){m.raw?d[h][p]=u:u===""||(u==="TRUE"?d[h][p]=!0:u==="FALSE"?d[h][p]=!1:isNaN(oa(u))?isNaN(bc(u).getDate())?d[h][p]=u:d[h][p]=fn(u):d[h][p]=oa(u))}function e(u,d){var h=d||{},p=[];if(!u||u.length===0)return p;for(var m=u.split(/[\r\n]/),g=m.length-1;g>=0&&m[g].length===0;)--g;for(var v=10,y=0,x=0;x<=g;++x)y=m[x].indexOf(" "),y==-1?y=m[x].length:y++,v=Math.max(v,y);for(x=0;x<=g;++x){p[x]=[];var E=0;for(t(m[x].slice(0,v).trim(),p,x,E,h),E=1;E<=(m[x].length-v)/10+1;++E)t(m[x].slice(v+(E-1)*10,v+E*10).trim(),p,x,E,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var d={},h=!1,p=0,m=0;p<u.length;++p)(m=u.charCodeAt(p))==34?h=!h:!h&&m in r&&(d[m]=(d[m]||0)+1);m=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&m.push([d[p],p]);if(!m.length){d=n;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&m.push([d[p],p])}return m.sort(function(g,v){return g[0]-v[0]||n[g[1]]-n[v[1]]}),r[m.pop()[1]]||44}function i(u,d){var h=d||{},p="",m=h.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):h&&h.FS?p=h.FS:p=s(u.slice(0,1024));var v=0,y=0,x=0,E=0,I=0,P=p.charCodeAt(0),w=!1,b=0,T=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var _=h.dateNF!=null?TX(h.dateNF):null;function S(){var k=u.slice(E,I),A={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)A.t="z";else if(h.raw)A.t="s",A.v=k;else if(k.trim().length===0)A.t="s",A.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(A.t="s",A.v=k.slice(2,-1).replace(/""/g,'"')):ZZ(k)?(A.t="n",A.f=k.slice(1)):(A.t="s",A.v=k);else if(k=="TRUE")A.t="b",A.v=!0;else if(k=="FALSE")A.t="b",A.v=!1;else if(!isNaN(x=oa(k)))A.t="n",h.cellText!==!1&&(A.w=k),A.v=x;else if(!isNaN(bc(k).getDate())||_&&k.match(_)){A.z=h.dateNF||Nt[14];var D=0;_&&k.match(_)&&(k=wX(k,h.dateNF,k.match(_)||[]),D=1),h.cellDates?(A.t="d",A.v=fn(k,D)):(A.t="n",A.v=os(fn(k,D))),h.cellText!==!1&&(A.w=$s(A.z,A.v instanceof Date?os(A.v):A.v)),h.cellNF||delete A.z}else A.t="s",A.v=k;if(A.t=="z"||(h.dense?(m[v]||(m[v]=[]),m[v][y]=A):m[Pt({c:y,r:v})]=A),E=I+1,T=u.charCodeAt(E),g.e.c<y&&(g.e.c=y),g.e.r<v&&(g.e.r=v),b==P)++y;else if(y=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;I<u.length;++I)switch(b=u.charCodeAt(I)){case 34:T===34&&(w=!w);break;case P:case 10:case 13:if(!w&&S())break e;break}return I-E>0&&S(),m["!ref"]=er(g),m}function a(u,d){return!(d&&d.PRN)||d.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,d):Lc(e(u,d),d)}function o(u,d){var h="",p=d.type=="string"?[0,0,0,0]:Zx(u,d);switch(d.type){case"base64":h=Cs(u);break;case"binary":h=u;break;case"buffer":d.codepage==65001?h=u.toString("utf8"):d.codepage&&typeof vd<"u"||(h=Xt&&Buffer.isBuffer(u)?u.toString("binary"):cl(u));break;case"array":h=Yo(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=xr(h.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?h=xr(h):d.type=="binary"&&typeof vd<"u",h.slice(0,19)=="socialcalc:version:"?hQ.to_sheet(d.type=="string"?h:xr(h),d):a(h,d)}function l(u,d){return po(o(u,d),d)}function c(u){for(var d=[],h=Lr(u["!ref"]),p,m=Array.isArray(u),g=h.s.r;g<=h.e.r;++g){for(var v=[],y=h.s.c;y<=h.e.c;++y){var x=Pt({r:g,c:y});if(p=m?(u[g]||[])[y]:u[x],!p||p.v==null){v.push("          ");continue}for(var E=(p.w||(yi(p),p.w)||"").slice(0,10);E.length<10;)E+=" ";v.push(E+(y===0?" ":""))}d.push(v.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function pQ(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=dQ.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return bd.to_workbook(t,e)}}var Vu=function(){function t(j,W,K){if(j){bn(j,j.l||0);for(var re=K.Enum||z;j.l<j.length;){var he=j.read_shift(2),ue=re[he]||re[65535],pe=j.read_shift(2),te=j.l+pe,Y=ue.f&&ue.f(j,pe,K);if(j.l=te,W(Y,ue,he))return}}}function e(j,W){switch(W.type){case"base64":return r(ta(Cs(j)),W);case"binary":return r(ta(j),W);case"buffer":case"array":return r(j,W)}throw"Unsupported type "+W.type}function r(j,W){if(!j)return j;var K=W||{},re=K.dense?[]:{},he="Sheet1",ue="",pe=0,te={},Y=[],Ee=[],X={s:{r:0,c:0},e:{r:0,c:0}},q=K.sheetRows||0;if(j[2]==0&&(j[3]==8||j[3]==9)&&j.length>=16&&j[14]==5&&j[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(j[2]==2)K.Enum=z,t(j,function(se,le,xe){switch(xe){case 0:K.vers=se,se>=4096&&(K.qpro=!0);break;case 6:X=se;break;case 204:se&&(ue=se);break;case 222:ue=se;break;case 15:case 51:K.qpro||(se[1].v=se[1].v.slice(1));case 13:case 14:case 16:xe==14&&(se[2]&112)==112&&(se[2]&15)>1&&(se[2]&15)<15&&(se[1].z=K.dateNF||Nt[14],K.cellDates&&(se[1].t="d",se[1].v=Sp(se[1].v))),K.qpro&&se[3]>pe&&(re["!ref"]=er(X),te[he]=re,Y.push(he),re=K.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},pe=se[3],he=ue||"Sheet"+(pe+1),ue="");var ve=K.dense?(re[se[0].r]||[])[se[0].c]:re[Pt(se[0])];if(ve){ve.t=se[1].t,ve.v=se[1].v,se[1].z!=null&&(ve.z=se[1].z),se[1].f!=null&&(ve.f=se[1].f);break}K.dense?(re[se[0].r]||(re[se[0].r]=[]),re[se[0].r][se[0].c]=se[1]):re[Pt(se[0])]=se[1];break}},K);else if(j[2]==26||j[2]==14)K.Enum=H,j[2]==14&&(K.qpro=!0,j.l=0),t(j,function(se,le,xe){switch(xe){case 204:he=se;break;case 22:se[1].v=se[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(se[3]>pe&&(re["!ref"]=er(X),te[he]=re,Y.push(he),re=K.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},pe=se[3],he="Sheet"+(pe+1)),q>0&&se[0].r>=q)break;K.dense?(re[se[0].r]||(re[se[0].r]=[]),re[se[0].r][se[0].c]=se[1]):re[Pt(se[0])]=se[1],X.e.c<se[0].c&&(X.e.c=se[0].c),X.e.r<se[0].r&&(X.e.r=se[0].r);break;case 27:se[14e3]&&(Ee[se[14e3][0]]=se[14e3][1]);break;case 1537:Ee[se[0]]=se[1],se[0]==pe&&(he=se[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+j[2]);if(re["!ref"]=er(X),te[ue||he]=re,Y.push(ue||he),!Ee.length)return{SheetNames:Y,Sheets:te};for(var J={},ge=[],ae=0;ae<Ee.length;++ae)te[Y[ae]]?(ge.push(Ee[ae]||Y[ae]),J[Ee[ae]]=te[Ee[ae]]||te[Y[ae]]):(ge.push(Ee[ae]),J[Ee[ae]]={"!ref":"A1"});return{SheetNames:ge,Sheets:J}}function n(j,W){var K=W||{};if(+K.codepage>=0&&na(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var re=yv(),he=Lr(j["!ref"]),ue=Array.isArray(j),pe=[];Xs(re,0,i(1030)),Xs(re,6,l(he));for(var te=Math.min(he.e.r,8191),Y=he.s.r;Y<=te;++Y)for(var Ee=In(Y),X=he.s.c;X<=he.e.c;++X){Y===he.s.r&&(pe[X]=sn(X));var q=pe[X]+Ee,J=ue?(j[Y]||[])[X]:j[q];if(!(!J||J.t=="z"))if(J.t=="n")(J.v|0)==J.v&&J.v>=-32768&&J.v<=32767?Xs(re,13,p(Y,X,J.v)):Xs(re,14,g(Y,X,J.v));else{var ge=yi(J);Xs(re,15,d(Y,X,ge.slice(0,239)))}}return Xs(re,1),re.end()}function s(j,W){var K=W||{};if(+K.codepage>=0&&na(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var re=yv();Xs(re,0,a(j));for(var he=0,ue=0;he<j.SheetNames.length;++he)(j.Sheets[j.SheetNames[he]]||{})["!ref"]&&Xs(re,27,V(j.SheetNames[he],ue++));var pe=0;for(he=0;he<j.SheetNames.length;++he){var te=j.Sheets[j.SheetNames[he]];if(!(!te||!te["!ref"])){for(var Y=Lr(te["!ref"]),Ee=Array.isArray(te),X=[],q=Math.min(Y.e.r,8191),J=Y.s.r;J<=q;++J)for(var ge=In(J),ae=Y.s.c;ae<=Y.e.c;++ae){J===Y.s.r&&(X[ae]=sn(ae));var se=X[ae]+ge,le=Ee?(te[J]||[])[ae]:te[se];if(!(!le||le.t=="z"))if(le.t=="n")Xs(re,23,S(J,ae,pe,le.v));else{var xe=yi(le);Xs(re,22,b(J,ae,pe,xe.slice(0,239)))}}++pe}}return Xs(re,1),re.end()}function i(j){var W=en(2);return W.write_shift(2,j),W}function a(j){var W=en(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var K=0,re=0,he=0,ue=0;ue<j.SheetNames.length;++ue){var pe=j.SheetNames[ue],te=j.Sheets[pe];if(!(!te||!te["!ref"])){++he;var Y=Mc(te["!ref"]);K<Y.e.r&&(K=Y.e.r),re<Y.e.c&&(re=Y.e.c)}}return K>8191&&(K=8191),W.write_shift(2,K),W.write_shift(1,he),W.write_shift(1,re),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(j,W,K){var re={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&K.qpro?(re.s.c=j.read_shift(1),j.l++,re.s.r=j.read_shift(2),re.e.c=j.read_shift(1),j.l++,re.e.r=j.read_shift(2),re):(re.s.c=j.read_shift(2),re.s.r=j.read_shift(2),W==12&&K.qpro&&(j.l+=2),re.e.c=j.read_shift(2),re.e.r=j.read_shift(2),W==12&&K.qpro&&(j.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function l(j){var W=en(8);return W.write_shift(2,j.s.c),W.write_shift(2,j.s.r),W.write_shift(2,j.e.c),W.write_shift(2,j.e.r),W}function c(j,W,K){var re=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(re[0].c=j.read_shift(1),re[3]=j.read_shift(1),re[0].r=j.read_shift(2),j.l+=2):(re[2]=j.read_shift(1),re[0].c=j.read_shift(2),re[0].r=j.read_shift(2)),re}function u(j,W,K){var re=j.l+W,he=c(j,W,K);if(he[1].t="s",K.vers==20768){j.l++;var ue=j.read_shift(1);return he[1].v=j.read_shift(ue,"utf8"),he}return K.qpro&&j.l++,he[1].v=j.read_shift(re-j.l,"cstr"),he}function d(j,W,K){var re=en(7+K.length);re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,j),re.write_shift(1,39);for(var he=0;he<re.length;++he){var ue=K.charCodeAt(he);re.write_shift(1,ue>=128?95:ue)}return re.write_shift(1,0),re}function h(j,W,K){var re=c(j,W,K);return re[1].v=j.read_shift(2,"i"),re}function p(j,W,K){var re=en(7);return re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,j),re.write_shift(2,K,"i"),re}function m(j,W,K){var re=c(j,W,K);return re[1].v=j.read_shift(8,"f"),re}function g(j,W,K){var re=en(13);return re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,j),re.write_shift(8,K,"f"),re}function v(j,W,K){var re=j.l+W,he=c(j,W,K);if(he[1].v=j.read_shift(8,"f"),K.qpro)j.l=re;else{var ue=j.read_shift(2);I(j.slice(j.l,j.l+ue),he),j.l+=ue}return he}function y(j,W,K){var re=W&32768;return W&=-32769,W=(re?j:0)+(W>=8192?W-16384:W),(re?"":"$")+(K?sn(W):In(W))}var x={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},E=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function I(j,W){bn(j,0);for(var K=[],re=0,he="",ue="",pe="",te="";j.l<j.length;){var Y=j[j.l++];switch(Y){case 0:K.push(j.read_shift(8,"f"));break;case 1:ue=y(W[0].c,j.read_shift(2),!0),he=y(W[0].r,j.read_shift(2),!1),K.push(ue+he);break;case 2:{var Ee=y(W[0].c,j.read_shift(2),!0),X=y(W[0].r,j.read_shift(2),!1);ue=y(W[0].c,j.read_shift(2),!0),he=y(W[0].r,j.read_shift(2),!1),K.push(Ee+X+":"+ue+he)}break;case 3:if(j.l<j.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(j.read_shift(2));break;case 6:{for(var q="";Y=j[j.l++];)q+=String.fromCharCode(Y);K.push('"'+q.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:te=K.pop(),pe=K.pop(),K.push(["AND","OR"][Y-20]+"("+pe+","+te+")");break;default:if(Y<32&&E[Y])te=K.pop(),pe=K.pop(),K.push(pe+E[Y]+te);else if(x[Y]){if(re=x[Y][1],re==69&&(re=j[j.l++]),re>K.length){console.error("WK1 bad formula parse 0x"+Y.toString(16)+":|"+K.join("|")+"|");return}var J=K.slice(-re);K.length-=re,K.push(x[Y][0]+"("+J.join(",")+")")}else return Y<=7?console.error("WK1 invalid opcode "+Y.toString(16)):Y<=24?console.error("WK1 unsupported op "+Y.toString(16)):Y<=30?console.error("WK1 invalid opcode "+Y.toString(16)):Y<=115?console.error("WK1 unsupported function opcode "+Y.toString(16)):console.error("WK1 unrecognized opcode "+Y.toString(16))}}K.length==1?W[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function P(j){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=j.read_shift(2),W[3]=j[j.l++],W[0].c=j[j.l++],W}function w(j,W){var K=P(j);return K[1].t="s",K[1].v=j.read_shift(W-4,"cstr"),K}function b(j,W,K,re){var he=en(6+re.length);he.write_shift(2,j),he.write_shift(1,K),he.write_shift(1,W),he.write_shift(1,39);for(var ue=0;ue<re.length;++ue){var pe=re.charCodeAt(ue);he.write_shift(1,pe>=128?95:pe)}return he.write_shift(1,0),he}function T(j,W){var K=P(j);K[1].v=j.read_shift(2);var re=K[1].v>>1;if(K[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return K[1].v=re,K}function _(j,W){var K=P(j),re=j.read_shift(4),he=j.read_shift(4),ue=j.read_shift(2);if(ue==65535)return re===0&&he===3221225472?(K[1].t="e",K[1].v=15):re===0&&he===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var pe=ue&32768;return ue=(ue&32767)-16446,K[1].v=(1-pe*2)*(he*Math.pow(2,ue+32)+re*Math.pow(2,ue)),K}function S(j,W,K,re){var he=en(14);if(he.write_shift(2,j),he.write_shift(1,K),he.write_shift(1,W),re==0)return he.write_shift(4,0),he.write_shift(4,0),he.write_shift(2,65535),he;var ue=0,pe=0,te=0,Y=0;return re<0&&(ue=1,re=-re),pe=Math.log2(re)|0,re/=Math.pow(2,pe-31),Y=re>>>0,Y&2147483648||(re/=2,++pe,Y=re>>>0),re-=Y,Y|=2147483648,Y>>>=0,re*=Math.pow(2,32),te=re>>>0,he.write_shift(4,te),he.write_shift(4,Y),pe+=16383+(ue?32768:0),he.write_shift(2,pe),he}function k(j,W){var K=_(j);return j.l+=W-14,K}function A(j,W){var K=P(j),re=j.read_shift(4);return K[1].v=re>>6,K}function D(j,W){var K=P(j),re=j.read_shift(8,"f");return K[1].v=re,K}function N(j,W){var K=D(j);return j.l+=W-10,K}function R(j,W){return j[j.l+W-1]==0?j.read_shift(W,"cstr"):""}function F(j,W){var K=j[j.l++];K>W-1&&(K=W-1);for(var re="";re.length<K;)re+=String.fromCharCode(j[j.l++]);return re}function O(j,W,K){if(!(!K.qpro||W<21)){var re=j.read_shift(1);j.l+=17,j.l+=1,j.l+=2;var he=j.read_shift(W-21,"cstr");return[re,he]}}function B(j,W){for(var K={},re=j.l+W;j.l<re;){var he=j.read_shift(2);if(he==14e3){for(K[he]=[0,""],K[he][0]=j.read_shift(2);j[j.l];)K[he][1]+=String.fromCharCode(j[j.l]),j.l++;j.l++}}return K}function V(j,W){var K=en(5+j.length);K.write_shift(2,14e3),K.write_shift(2,W);for(var re=0;re<j.length;++re){var he=j.charCodeAt(re);K[K.l++]=he>127?95:he}return K[K.l++]=0,K}var z={0:{n:"BOF",f:qr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:R},222:{n:"SHEETNAMELP",f:F},65535:{n:""}},H={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:w},23:{n:"NUMBER17",f:_},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:B},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:A},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:N},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:R},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:O},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function mQ(t){var e={},r=t.match(Xn),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=St(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=kx[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var gQ=function(){var t=yd("t"),e=yd("rPr");function r(i){var a=i.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:tr(a[1])},l=i.match(e);return l&&(o.s=mQ(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),vQ=function(){var e=/(\r\n|\n)/g;function r(s,i,a){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),a.push("</b>")),s.i&&(i.push("<i>"),a.push("</i>")),s.strike&&(i.push("<s>"),a.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),xQ=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,yQ=/<(?:\w+:)?r>/,EQ=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function zx(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=tr(xr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=xr(t),r&&(n.h=Mx(n.t))):t.match(yQ)&&(n.r=xr(t),n.t=tr(xr((t.replace(EQ,"").match(xQ)||[]).join("").replace(Xn,""))),r&&(n.h=vQ(gQ(n.r)))),n):{t:""}}var bQ=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,_Q=/<(?:\w+:)?(?:si|sstItem)>/g,SQ=/<\/(?:\w+:)?(?:si|sstItem)>/;function TQ(t,e){var r=[],n="";if(!t)return r;var s=t.match(bQ);if(s){n=s[2].replace(_Q,"").split(SQ);for(var i=0;i!=n.length;++i){var a=zx(n[i].trim(),e);a!=null&&(r[r.length]=a)}s=St(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function wQ(t){return[t.read_shift(4),t.read_shift(4)]}function AQ(t,e){var r=[],n=!1;return _i(t,function(i,a,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function HI(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function ii(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function CQ(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=ii(t,4),e.U=ii(t,4),e.W=ii(t,4),e}function IQ(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function kQ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(IQ(t));return e}function DQ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function PQ(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=ii(t,4),e.U=ii(t,4),e.W=ii(t,4),e}function FQ(t){var e=PQ(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function GI(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function WI(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function RQ(t){var e=ii(t);switch(e.Minor){case 2:return[e.Minor,OQ(t)];case 3:return[e.Minor,NQ()];case 4:return[e.Minor,MQ(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function OQ(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=GI(t,r),s=WI(t,t.length-t.l);return{t:"Std",h:n,v:s}}function NQ(){throw new Error("File is password-protected: ECMA-376 Extensible")}function MQ(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Xn,function(i){var a=St(i);switch(Ma(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function LQ(t,e){var r={},n=r.EncryptionVersionInfo=ii(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=GI(t,s),e-=s,r.EncryptionVerifier=WI(t,e),r}function BQ(t){var e={},r=e.EncryptionVersionInfo=ii(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function UQ(t){var e=0,r,n=HI(t),s=n.length+1,i,a,o,l,c;for(r=oo(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var zI=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},s=function(a,o){return n(a^o)},i=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],d=0;d!=7;++d)u&64&&(o^=r[l]),u*=2,--l;return o};return function(a){for(var o=HI(a),l=i(o),c=o.length,u=oo(16),d=0;d!=16;++d)u[d]=0;var h,p,m;for((c&1)===1&&(h=l>>8,u[c]=s(t[0],h),--c,h=l&255,p=o[o.length-1],u[c]=s(p,h));c>0;)--c,h=l>>8,u[c]=s(o[c],h),--c,h=l&255,u[c]=s(o[c],h);for(c=15,m=15-o.length;m>0;)h=l>>8,u[c]=s(t[m],h),--c,--m,h=l&255,u[c]=s(o[c],h),--c,--m;return u}}(),$Q=function(t,e,r,n,s){s||(s=e),n||(n=zI(t));var i,a;for(i=0;i!=e.length;++i)a=e[i],a^=n[r],a=(a>>5|a<<3)&255,s[i]=a,++r;return[s,r,n]},VQ=function(t){var e=0,r=zI(t);return function(n){var s=$Q("",n,e,r);return e=s[1],s[0]}};function jQ(t,e,r,n){var s={key:qr(t),verificationBytes:qr(t)};return r.password&&(s.verifier=UQ(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=VQ(r.password)),s}function HQ(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=BQ(t):n.Data=LQ(t,e),n}function GQ(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?HQ(t,e-2,n):jQ(t,r.biff>=8?e:e-2,r,n),n}var WQ=function(){function t(s,i){switch(i.type){case"base64":return e(Cs(s),i);case"binary":return e(s,i);case"buffer":return e(Xt&&Buffer.isBuffer(s)?s.toString("binary"):cl(s),i);case"array":return e(Yo(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,d){Array.isArray(o)&&(o[d]=[]);for(var h=/\\\w+\b/g,p=0,m,g=-1;m=h.exec(u);){switch(m[0]){case"\\cell":var v=u.slice(p,h.lastIndex-m[0].length);if(v[0]==" "&&(v=v.slice(1)),++g,v.length){var y={v,t:"s"};Array.isArray(o)?o[d][g]=y:o[Pt({r:d,c:g})]=y}break}p=h.lastIndex}g>c.e.c&&(c.e.c=g)}),o["!ref"]=er(c),o}function r(s,i){return po(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Lr(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var u=a.s.c;u<=a.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=a.s.c;u<=a.e.c;++u){var d=Pt({r:c,c:u});o=l?(s[c]||[])[u]:s[d],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(yi(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function zQ(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function _d(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function KQ(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),a=s-i;if(a===0)return[0,0,e];var o=0,l=0,c=s+i;switch(l=a/(c>1?2-c:c),s){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function qQ(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,a=[i,i,i],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,a[0]+=s,a[1]+=l;break;case 1:l=s*(2-o),a[0]+=l,a[1]+=s;break;case 2:l=s*(o-2),a[1]+=s,a[2]+=l;break;case 3:l=s*(4-o),a[1]+=l,a[2]+=s;break;case 4:l=s*(o-4),a[2]+=s,a[0]+=l;break;case 5:l=s*(6-o),a[2]+=l,a[0]+=s;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function dh(t,e){if(e===0)return t;var r=KQ(zQ(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),_d(qQ(r))}var KI=6,XQ=15,YQ=1,ns=KI;function fh(t){return Math.floor((t+Math.round(128/ns)/256)*ns)}function hh(t){return Math.floor((t-5)/ns*100+.5)/100}function Sv(t){return Math.round((t*ns+5)/ns*256)/256}function Qm(t){return Sv(hh(fh(t)))}function Kx(t){var e=Math.abs(t-Qm(t)),r=ns;if(e>.005)for(ns=YQ;ns<XQ;++ns)Math.abs(t-Qm(t))<=e&&(e=Math.abs(t-Qm(t)),r=ns);ns=r}function _c(t){t.width?(t.wpx=fh(t.width),t.wch=hh(t.wpx),t.MDW=ns):t.wpx?(t.wch=hh(t.wpx),t.width=Sv(t.wch),t.MDW=ns):typeof t.wch=="number"&&(t.width=Sv(t.wch),t.wpx=fh(t.width),t.MDW=ns),t.customWidth&&delete t.customWidth}var JQ=96,qI=JQ;function XI(t){return t*96/qI}function Sd(t){return t*qI/96}var QQ={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function ZQ(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(Xn)||[]).forEach(function(a){var o=St(a);switch(Ma(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Ar(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Ar(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function eZ(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(Xn)||[]).forEach(function(a){var o=St(a);switch(Ma(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function tZ(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(Xn)||[]).forEach(function(a){var o=St(a);switch(Ma(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=xr(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Ar(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Ar(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Ar(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Ar(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Ar(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Ar(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Ar(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=kx[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Ar(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=Bo[s.color.index];s.color.index==81&&(l=Bo[1]),l||(l=Bo[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=dh(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function rZ(t,e,r){e.NumberFmt=[];for(var n=Pa(Nt),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Nt[n[s]];var i=t[0].match(Xn);if(i)for(s=0;s<i.length;++s){var a=St(i[s]);switch(Ma(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=tr(xr(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Lo(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var Vf=["numFmtId","fillId","fontId","borderId","xfId"],jf=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function nZ(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Xn)||[]).forEach(function(i){var a=St(i),o=0;switch(Ma(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<Vf.length;++o)n[Vf[o]]&&(n[Vf[o]]=parseInt(n[Vf[o]],10));for(o=0;o<jf.length;++o)n[jf[o]]&&(n[jf[o]]=Ar(n[jf[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=Ar(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var sZ=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=o.match(e))&&rZ(d,u,c),(d=o.match(s))&&tZ(d,u,l,c),(d=o.match(n))&&eZ(d,u,l,c),(d=o.match(i))&&ZQ(d,u,l,c),(d=o.match(r))&&nZ(d,u,c),u}}();function aZ(t,e){var r=t.read_shift(2),n=zn(t);return[r,n]}function iZ(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=gY(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=mY(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=zn(t),n}var oZ=qn;function lZ(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}var cZ=qn;function uZ(t,e,r){var n={};n.NumberFmt=[];for(var s in Nt)n.NumberFmt[s]=Nt[s];n.CellXf=[],n.Fonts=[];var i=[],a=!1;return _i(t,function(l,c,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],Lo(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=dh(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:i.push(u),a=!0;break;case 38:i.pop(),a=!1;break;default:if(c.T>0)i.push(u);else if(c.T<0)i.pop();else if(!a||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}var dZ=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function fZ(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Xn)||[]).forEach(function(s){var i=St(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[dZ.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function hZ(){}function pZ(){}var mZ=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,gZ=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,vZ=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function xZ(t,e,r){e.themeElements={};var n;[["clrScheme",mZ,fZ],["fontScheme",gZ,hZ],["fmtScheme",vZ,pZ]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var yZ=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function YI(t,e){(!t||t.length===0)&&(t=EZ());var r,n={};if(!(r=t.match(yZ)))throw new Error("themeElements not found in theme");return xZ(r[0],n,e),n.raw=t,n}function EZ(t,e){var r=[oI];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function bZ(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var a;try{a=iI(i,{type:"array"})}catch{return}var o=_s(a,"theme/theme/theme1.xml",!0);if(o)return YI(o,r)}}function _Z(t){return t.read_shift(4)}function SZ(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=TZ(t,4);break;case 2:e.xclrValue=MI(t);break;case 3:e.xclrValue=_Z(t);break;case 4:t.l+=4;break}return t.l+=8,e}function TZ(t,e){return qn(t,e)}function wZ(t,e){return qn(t,e)}function AZ(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=SZ(t);break;case 6:n[1]=wZ(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function CZ(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(AZ(t,r-t.l));return{ixfe:n,ext:i}}function IZ(t,e){e.forEach(function(r){switch(r[0]){}})}function kZ(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:zn(t)}}function DZ(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function PZ(t){return t.l+=4,t.read_shift(4)!=0}function FZ(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],a=!1,o=2;return _i(t,function(l,c,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(d){o==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):o==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:i.push(u),a=!0;break;case 36:i.pop(),a=!1;break;default:if(!c.T){if(!a||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function RZ(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,a;return t.replace(Xn,function(o){var l=St(o);switch(Ma(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function OZ(t){var e=[];if(!t)return e;var r=1;return(t.match(Xn)||[]).forEach(function(n){var s=St(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function NZ(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Pt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function MZ(t,e,r){var n=[];return _i(t,function(i,a,o){switch(o){case 63:n.push(i);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function LZ(t,e,r,n){if(!t)return t;var s=n||{},i=!1;_i(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function BZ(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function H2(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(a){var o=ss(a.ref);if(s?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[a.ref],!i){i={t:"z"},s?t[o.r][o.c]=i:t[a.ref]=i;var l=Lr(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=er(l);c!==t["!ref"]&&(t["!ref"]=c)}i.c||(i.c=[]);var u={a:a.author,t:a.t,r:a.r,T:r};a.h&&(u.h=a.h);for(var d=i.c.length-1;d>=0;--d){if(!r&&i.c[d].T)return;r&&!i.c[d].T&&i.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(u.a==n[d].id){u.a=n[d].name||u.a;break}}i.c.push(u)})}function UZ(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=St(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=ss(l.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var d=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!d&&!!d[1]&&zx(d[1])||{r:"",t:"",h:""};c.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),c.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=h.h),n.push(c)}}}}),n}function $Z(t,e){var r=[],n=!1,s={},i=0;return t.replace(Xn,function(o,l){var c=St(o);switch(Ma(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=l+o.length;break;case"</text>":s.t=t.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function VZ(t,e){var r=[],n=!1;return t.replace(Xn,function(i){var a=St(i);switch(Ma(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return i}),r}function jZ(t){var e={};e.iauthor=t.read_shift(4);var r=dl(t);return e.rfx=r.s,e.ref=Pt(r.s),t.l+=16,e}var HZ=zn;function GZ(t,e){var r=[],n=[],s={},i=!1;return _i(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}var WZ="application/vnd.ms-office.vbaProject";function zZ(t){var e=Qt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Qt.utils.cfb_add(e,s,t.FileIndex[n].content)}}),Qt.write(e)}function KZ(){return{"!type":"dialog"}}function qZ(){return{"!type":"dialog"}}function XZ(){return{"!type":"macro"}}function YZ(){return{"!type":"macro"}}var nc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=e.c:--u,l?c+=e.r:--c,s+(o?"":"$")+sn(u)+(l?"":"$")+In(c)}return function(s,i){return e=i,s.replace(t,r)}}(),JI=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,JZ=function(){return function(e,r){return e.replace(JI,function(n,s,i,a,o,l){var c=$x(a)-(i?0:r.c),u=Ux(l)-(o?0:r.r),d=u==0?"":o?u+1:"["+u+"]",h=c==0?"":i?c+1:"["+c+"]";return s+"R"+d+"C"+h})}}();function QI(t,e){return t.replace(JI,function(r,n,s,i,a,o){return n+(s=="$"?s+i:sn($x(i)+e.c))+(a=="$"?a+o:In(Ux(o)+e.r))})}function QZ(t,e,r){var n=Mc(e),s=n.s,i=ss(r),a={r:i.r-s.r,c:i.c-s.c};return QI(t,a)}function ZZ(t){return t.length!=1}function G2(t){return t.replace(/_xlfn\./g,"")}function Gr(t){t.l+=1}function lo(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function ZI(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return ek(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=lo(t),o=lo(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function ek(t){var e=lo(t),r=lo(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function eee(t,e,r){if(r.biff<8)return ek(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=lo(t),a=lo(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function tk(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return tee(t);var n=t.read_shift(r&&r.biff==12?4:2),s=lo(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function tee(t){var e=lo(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function ree(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function nee(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return see(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function see(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function aee(t,e,r){var n=(t[t.l++]&96)>>5,s=ZI(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function iee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=ZI(t,i,r);return[n,s,a]}function oee(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function lee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function cee(t,e,r){var n=(t[t.l++]&96)>>5,s=eee(t,e-1,r);return[n,s]}function uee(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function W2(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function dee(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function fee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function hee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function pee(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function mee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function rk(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function gee(t){return t.read_shift(2),rk(t)}function vee(t){return t.read_shift(2),rk(t)}function xee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=tk(t,0,r);return[n,s]}function yee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=nee(t,0,r);return[n,s]}function Eee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=tk(t,0,r);return[n,s,i]}function bee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[_te[s],ak[s],n]}function _ee(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:See(t);return[s,(i[0]===0?ak:bte)[i[1]]]}function See(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Tee(t,e,r){t.l+=r&&r.biff==2?3:4}function wee(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Aee(t){return t.l++,fl[t.read_shift(1)]}function Cee(t){return t.l++,t.read_shift(2)}function Iee(t){return t.l++,t.read_shift(1)!==0}function kee(t){return t.l++,$n(t)}function Dee(t,e,r){return t.l++,Jd(t,e-1,r)}function Pee(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ur(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=fl[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=$n(t);break;case 2:r[1]=hl(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Fee(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?dl:Tp)(t));return s}function Ree(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=Pee(t,r.biff);return a}function Oee(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function Nee(t,e,r){if(r.biff==5)return Mee(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function Mee(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Lee(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Bee(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Uee(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function $ee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var Vee=qn,jee=qn,Hee=qn;function Zd(t,e,r){return t.l+=2,[ree(t)]}function qx(t){return t.l+=6,[]}var Gee=Zd,Wee=qx,zee=qx,Kee=Zd;function nk(t){return t.l+=2,[qr(t),t.read_shift(2)&1]}var qee=Zd,Xee=nk,Yee=qx,Jee=Zd,Qee=Zd,Zee=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ete(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=Zee[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function tte(t){return t.l+=2,[t.read_shift(4)]}function rte(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function nte(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function ste(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function ate(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function ite(t){return t.l+=4,[0,0]}var z2={1:{n:"PtgExp",f:wee},2:{n:"PtgTbl",f:Hee},3:{n:"PtgAdd",f:Gr},4:{n:"PtgSub",f:Gr},5:{n:"PtgMul",f:Gr},6:{n:"PtgDiv",f:Gr},7:{n:"PtgPower",f:Gr},8:{n:"PtgConcat",f:Gr},9:{n:"PtgLt",f:Gr},10:{n:"PtgLe",f:Gr},11:{n:"PtgEq",f:Gr},12:{n:"PtgGe",f:Gr},13:{n:"PtgGt",f:Gr},14:{n:"PtgNe",f:Gr},15:{n:"PtgIsect",f:Gr},16:{n:"PtgUnion",f:Gr},17:{n:"PtgRange",f:Gr},18:{n:"PtgUplus",f:Gr},19:{n:"PtgUminus",f:Gr},20:{n:"PtgPercent",f:Gr},21:{n:"PtgParen",f:Gr},22:{n:"PtgMissArg",f:Gr},23:{n:"PtgStr",f:Dee},26:{n:"PtgSheet",f:rte},27:{n:"PtgEndSheet",f:nte},28:{n:"PtgErr",f:Aee},29:{n:"PtgBool",f:Iee},30:{n:"PtgInt",f:Cee},31:{n:"PtgNum",f:kee},32:{n:"PtgArray",f:uee},33:{n:"PtgFunc",f:bee},34:{n:"PtgFuncVar",f:_ee},35:{n:"PtgName",f:Oee},36:{n:"PtgRef",f:xee},37:{n:"PtgArea",f:aee},38:{n:"PtgMemArea",f:Lee},39:{n:"PtgMemErr",f:Vee},40:{n:"PtgMemNoMem",f:jee},41:{n:"PtgMemFunc",f:Bee},42:{n:"PtgRefErr",f:Uee},43:{n:"PtgAreaErr",f:oee},44:{n:"PtgRefN",f:yee},45:{n:"PtgAreaN",f:cee},46:{n:"PtgMemAreaN",f:ste},47:{n:"PtgMemNoMemN",f:ate},57:{n:"PtgNameX",f:Nee},58:{n:"PtgRef3d",f:Eee},59:{n:"PtgArea3d",f:iee},60:{n:"PtgRefErr3d",f:$ee},61:{n:"PtgAreaErr3d",f:lee},255:{}},ote={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},lte={1:{n:"PtgElfLel",f:nk},2:{n:"PtgElfRw",f:Jee},3:{n:"PtgElfCol",f:Gee},6:{n:"PtgElfRwV",f:Qee},7:{n:"PtgElfColV",f:Kee},10:{n:"PtgElfRadical",f:qee},11:{n:"PtgElfRadicalS",f:Yee},13:{n:"PtgElfColS",f:Wee},15:{n:"PtgElfColSV",f:zee},16:{n:"PtgElfRadicalLel",f:Xee},25:{n:"PtgList",f:ete},29:{n:"PtgSxName",f:tte},255:{}},cte={0:{n:"PtgAttrNoop",f:ite},1:{n:"PtgAttrSemi",f:mee},2:{n:"PtgAttrIf",f:hee},4:{n:"PtgAttrChoose",f:dee},8:{n:"PtgAttrGoto",f:fee},16:{n:"PtgAttrSum",f:Tee},32:{n:"PtgAttrBaxcel",f:W2},33:{n:"PtgAttrBaxcel",f:W2},64:{n:"PtgAttrSpace",f:gee},65:{n:"PtgAttrSpaceSemi",f:vee},128:{n:"PtgAttrIfError",f:pee},255:{}};function ef(t,e,r,n){if(n.biff<8)return qn(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=Ree(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=Fee(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(qn(t,e)),i}function tf(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=z2[i]||z2[ote[i]],(i===24||i===25)&&(s=(i===24?lte:cte)[t[t.l+1]]),!s||!s.f?qn(t,e):a.push([s.n,s.f(t,e,r)]);return a}function ute(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var dte={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function fte(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function sk(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function K2(t,e,r){var n=sk(t,e,r);return n=="#REF"?n:fte(n,r)}function Ln(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,u,d=0,h=0,p,m="";if(!t[0]||!t[0][0])return"";for(var g=-1,v="",y=0,x=t[0].length;y<x;++y){var E=t[0][y];switch(E[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),g>=0){switch(t[0][g][1][0]){case 0:v=Nr(" ",t[0][g][1][1]);break;case 1:v=Nr("\r",t[0][g][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}c=c+v,g=-1}o.push(c+dte[E[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Lu(E[1][1],a,s),o.push(Bu(u,i));break;case"PtgRefN":u=r?Lu(E[1][1],r,s):E[1][1],o.push(Bu(u,i));break;case"PtgRef3d":d=E[1][1],u=Lu(E[1][2],a,s),m=K2(n,d,s),o.push(m+"!"+Bu(u,i));break;case"PtgFunc":case"PtgFuncVar":var I=E[1][0],P=E[1][1];I||(I=0),I&=127;var w=I==0?[]:o.slice(-I);o.length-=I,P==="User"&&(P=w.shift()),o.push(P+"("+w.join(",")+")");break;case"PtgBool":o.push(E[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(E[1]);break;case"PtgNum":o.push(String(E[1]));break;case"PtgStr":o.push('"'+E[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(E[1]);break;case"PtgAreaN":p=C2(E[1][1],r?{s:r}:a,s),o.push(Ym(p,s));break;case"PtgArea":p=C2(E[1][1],a,s),o.push(Ym(p,s));break;case"PtgArea3d":d=E[1][1],p=E[1][2],m=K2(n,d,s),o.push(m+"!"+Ym(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=E[1][2];var b=(n.names||[])[h-1]||(n[0]||[])[h],T=b?b.Name:"SH33TJSNAME"+String(h);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),o.push(T);break;case"PtgNameX":var _=E[1][1];h=E[1][2];var S;if(s.biff<=5)_<0&&(_=-_),n[_]&&(S=n[_][h]);else{var k="";if(((n[_]||[])[0]||[])[0]==14849||(((n[_]||[])[0]||[])[0]==1025?n[_][h]&&n[_][h].itab>0&&(k=n.SheetNames[n[_][h].itab-1]+"!"):k=n.SheetNames[h-1]+"!"),n[_]&&n[_][h])k+=n[_][h].Name;else if(n[0]&&n[0][h])k+=n[0][h].Name;else{var A=(sk(n,_,s)||"").split(";;");A[h-1]?k=A[h-1]:k+="SH33TJSERRX"}o.push(k);break}S||(S={Name:"SH33TJSERRY"}),o.push(S.Name);break;case"PtgParen":var D="(",N=")";if(g>=0){switch(v="",t[0][g][1][0]){case 2:D=Nr(" ",t[0][g][1][1])+D;break;case 3:D=Nr("\r",t[0][g][1][1])+D;break;case 4:N=Nr(" ",t[0][g][1][1])+N;break;case 5:N=Nr("\r",t[0][g][1][1])+N;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}g=-1}o.push(D+o.pop()+N);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:E[1][1],r:E[1][0]};var R={c:r.c,r:r.r};if(n.sharedf[Pt(u)]){var F=n.sharedf[Pt(u)];o.push(Ln(F,a,R,n,s))}else{var O=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(Ln(c[1],a,R,n,s)),O=!0;break}O||o.push(E[1])}break;case"PtgArray":o.push("{"+ute(E[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+E[1].idx+"[#"+E[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(E));default:throw new Error("Unrecognized Formula Token: "+String(E))}var B=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&B.indexOf(t[0][y][0])==-1){E=t[0][g];var V=!0;switch(E[1][0]){case 4:V=!1;case 0:v=Nr(" ",E[1][1]);break;case 5:V=!1;case 1:v=Nr("\r",E[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+E[1][0])}o.push((V?v:"")+o.pop()+(V?"":v)),g=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function hte(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],qn(t,e-2)];var o=tf(t,a,r);return e!==a+s&&(i=ef(t,e-a-s,o,r)),t.l=n,[o,i]}function pte(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],qn(t,e-2)];var o=tf(t,a,r);return e!==a+s&&(i=ef(t,e-a-s,o,r)),t.l=n,[o,i]}function mte(t,e,r,n){var s=t.l+e,i=tf(t,n,r),a;return s!==t.l&&(a=ef(t,s-t.l,i,r)),[i,a]}function gte(t,e,r){var n=t.l+e,s,i=t.read_shift(2),a=tf(t,i,r);return i==65535?[[],qn(t,e-2)]:(e!==i+2&&(s=ef(t,n-i-2,a,r)),[a,s])}function vte(t){var e;if(ri(t,t.l+6)!==65535)return[$n(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Zm(t,e,r){var n=t.l+e,s=La(t);r.biff==2&&++t.l;var i=vte(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=pte(t,n-t.l,r);return{cell:s,val:i[0],formula:o,shared:a>>3&1,tt:i[1]}}function wp(t,e,r){var n=t.read_shift(4),s=tf(t,n,r),i=t.read_shift(4),a=i>0?ef(t,i,s,r):null;return[s,a]}var xte=wp,Ap=wp,yte=wp,Ete=wp,bte={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},ak={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},_te={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function q2(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function eg(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var ju={},sc={};function Hu(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function ik(t,e,r,n,s,i){try{n.cellNF&&(t.z=Nt[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=fn(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Nt[e]==null&&Lo(SX[e]||"General",e),t.t==="e")t.w=t.w||fl[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=xd(t.v);else if(t.t==="d"){var a=os(t.v);(a|0)===a?t.w=a.toString(10):t.w=xd(a)}else{if(t.v===void 0)return"";t.w=Xo(t.v,sc)}else t.t==="d"?t.w=$s(e,os(t.v),sc):t.w=$s(e,t.v,sc)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=dh(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=dh(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function Ste(t,e){var r=Lr(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=er(r))}var Tte=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,wte=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Ate=/<(?:\w:)?hyperlink [^>]*>/mg,Cte=/"(\w*:\w*)"/,Ite=/<(?:\w:)?col\b[^>]*[\/]?>/g,kte=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Dte=/<(?:\w:)?pageMargins[^>]*\/>/g,ok=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Pte=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Fte=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Rte(t,e,r,n,s,i,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",d=t.match(wte);d?(c=t.slice(0,d.index),u=t.slice(d.index+d[0].length)):c=u=t;var h=c.match(ok);h?Xx(h[0],o,s,r):(h=c.match(Pte))&&Ote(h[0],h[1]||"",o,s,r);var p=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var m=c.slice(p,p+50).match(Cte);m&&Ste(o,m[1])}var g=c.match(Fte);g&&g[1]&&$te(g[1],s);var v=[];if(e.cellStyles){var y=c.match(Ite);y&&Lte(v,y)}d&&Vte(d[1],o,e,l,i,a);var x=u.match(kte);x&&(o["!autofilter"]=Bte(x[0]));var E=[],I=u.match(Tte);if(I)for(p=0;p!=I.length;++p)E[p]=Lr(I[p].slice(I[p].indexOf('"')+1));var P=u.match(Ate);P&&Nte(o,P,n);var w=u.match(Dte);if(w&&(o["!margins"]=Mte(St(w[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=er(l)),e.sheetRows>0&&o["!ref"]){var b=Lr(o["!ref"]);e.sheetRows<=+b.e.r&&(b.e.r=e.sheetRows-1,b.e.r>l.e.r&&(b.e.r=l.e.r),b.e.r<b.s.r&&(b.s.r=b.e.r),b.e.c>l.e.c&&(b.e.c=l.e.c),b.e.c<b.s.c&&(b.s.c=b.e.c),o["!fullref"]=o["!ref"],o["!ref"]=er(b))}return v.length>0&&(o["!cols"]=v),E.length>0&&(o["!merges"]=E),o}function Xx(t,e,r,n){var s=St(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=tr(xr(s.codeName)))}function Ote(t,e,r,n,s){Xx(t.slice(0,t.indexOf(">")),r,n,s)}function Nte(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=St(xr(e[s]),!0);if(!i.ref)return;var a=((r||{})["!id"]||[])[i.id];a?(i.Target=a.Target,i.location&&(i.Target+="#"+tr(i.location))):(i.Target="#"+tr(i.location),a={Target:i.Target,TargetMode:"Internal"}),i.Rel=a,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Lr(i.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Pt({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function Mte(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Lte(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=St(e[n],!0);s.hidden&&(s.hidden=Ar(s.hidden));var i=parseInt(s.min,10)-1,a=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,Kx(s.width)),_c(s);i<=a;)t[i++]=Cn(s)}}function Bte(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var Ute=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function $te(t,e){e.Views||(e.Views=[{}]),(t.match(Ute)||[]).forEach(function(r,n){var s=St(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),Ar(s.rightToLeft)&&(e.Views[n].RTL=!0)})}var Vte=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=yd("v"),a=yd("f");return function(l,c,u,d,h,p){for(var m=0,g="",v=[],y=[],x=0,E=0,I=0,P="",w,b,T=0,_=0,S,k,A=0,D=0,N=Array.isArray(p.CellXf),R,F=[],O=[],B=Array.isArray(c),V=[],z={},H=!1,j=!!u.sheetStubs,W=l.split(e),K=0,re=W.length;K!=re;++K){g=W[K].trim();var he=g.length;if(he!==0){var ue=0;e:for(m=0;m<he;++m)switch(g[m]){case">":if(g[m-1]!="/"){++m;break e}if(u&&u.cellStyles){if(b=St(g.slice(ue,m),!0),T=b.r!=null?parseInt(b.r,10):T+1,_=-1,u.sheetRows&&u.sheetRows<T)continue;z={},H=!1,b.ht&&(H=!0,z.hpt=parseFloat(b.ht),z.hpx=Sd(z.hpt)),b.hidden=="1"&&(H=!0,z.hidden=!0),b.outlineLevel!=null&&(H=!0,z.level=+b.outlineLevel),H&&(V[T-1]=z)}break;case"<":ue=m;break}if(ue>=m)break;if(b=St(g.slice(ue,m),!0),T=b.r!=null?parseInt(b.r,10):T+1,_=-1,!(u.sheetRows&&u.sheetRows<T)){d.s.r>T-1&&(d.s.r=T-1),d.e.r<T-1&&(d.e.r=T-1),u&&u.cellStyles&&(z={},H=!1,b.ht&&(H=!0,z.hpt=parseFloat(b.ht),z.hpx=Sd(z.hpt)),b.hidden=="1"&&(H=!0,z.hidden=!0),b.outlineLevel!=null&&(H=!0,z.level=+b.outlineLevel),H&&(V[T-1]=z)),v=g.slice(m).split(t);for(var pe=0;pe!=v.length&&v[pe].trim().charAt(0)=="<";++pe);for(v=v.slice(pe),m=0;m!=v.length;++m)if(g=v[m].trim(),g.length!==0){if(y=g.match(r),x=m,E=0,I=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,y!=null&&y.length===2){for(x=0,P=y[1],E=0;E!=P.length&&!((I=P.charCodeAt(E)-64)<1||I>26);++E)x=26*x+I;--x,_=x}else++_;for(E=0;E!=g.length&&g.charCodeAt(E)!==62;++E);if(++E,b=St(g.slice(0,E),!0),b.r||(b.r=Pt({r:T-1,c:_})),P=g.slice(E),w={t:""},(y=P.match(i))!=null&&y[1]!==""&&(w.v=tr(y[1])),u.cellFormula){if((y=P.match(a))!=null&&y[1]!==""){if(w.f=tr(xr(y[1])).replace(/\r\n/g,`
`),u.xlfn||(w.f=G2(w.f)),y[0].indexOf('t="array"')>-1)w.F=(P.match(s)||[])[1],w.F.indexOf(":")>-1&&F.push([Lr(w.F),w.F]);else if(y[0].indexOf('t="shared"')>-1){k=St(y[0]);var te=tr(xr(y[1]));u.xlfn||(te=G2(te)),O[parseInt(k.si,10)]=[k,te,b.r]}}else(y=P.match(/<f[^>]*\/>/))&&(k=St(y[0]),O[k.si]&&(w.f=QZ(O[k.si][1],O[k.si][2],b.r)));var Y=ss(b.r);for(E=0;E<F.length;++E)Y.r>=F[E][0].s.r&&Y.r<=F[E][0].e.r&&Y.c>=F[E][0].s.c&&Y.c<=F[E][0].e.c&&(w.F=F[E][1])}if(b.t==null&&w.v===void 0)if(w.f||w.F)w.v=0,w.t="n";else if(j)w.t="z";else continue;else w.t=b.t||"n";switch(d.s.c>_&&(d.s.c=_),d.e.c<_&&(d.e.c=_),w.t){case"n":if(w.v==""||w.v==null){if(!j)continue;w.t="z"}else w.v=parseFloat(w.v);break;case"s":if(typeof w.v>"u"){if(!j)continue;w.t="z"}else S=ju[parseInt(w.v,10)],w.v=S.t,w.r=S.r,u.cellHTML&&(w.h=S.h);break;case"str":w.t="s",w.v=w.v!=null?xr(w.v):"",u.cellHTML&&(w.h=Mx(w.v));break;case"inlineStr":y=P.match(n),w.t="s",y!=null&&(S=zx(y[1]))?(w.v=S.t,u.cellHTML&&(w.h=S.h)):w.v="";break;case"b":w.v=Ar(w.v);break;case"d":u.cellDates?w.v=fn(w.v,1):(w.v=os(fn(w.v,1)),w.t="n");break;case"e":(!u||u.cellText!==!1)&&(w.w=w.v),w.v=II[w.v];break}if(A=D=0,R=null,N&&b.s!==void 0&&(R=p.CellXf[b.s],R!=null&&(R.numFmtId!=null&&(A=R.numFmtId),u.cellStyles&&R.fillId!=null&&(D=R.fillId))),ik(w,A,D,u,h,p),u.cellDates&&N&&w.t=="n"&&Nc(Nt[A])&&(w.t="d",w.v=Sp(w.v)),b.cm&&u.xlmeta){var Ee=(u.xlmeta.Cell||[])[+b.cm-1];Ee&&Ee.type=="XLDAPR"&&(w.D=!0)}if(B){var X=ss(b.r);c[X.r]||(c[X.r]=[]),c[X.r][X.c]=w}else c[b.r]=w}}}}V.length>0&&(c["!rows"]=V)}}();function jte(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var Hte=dl;function Gte(){}function Wte(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=hY(t),r}function zte(t){var e=Gs(t);return[e]}function Kte(t){var e=ul(t);return[e]}function qte(t){var e=Gs(t),r=t.read_shift(1);return[e,r,"b"]}function Xte(t){var e=ul(t),r=t.read_shift(1);return[e,r,"b"]}function Yte(t){var e=Gs(t),r=t.read_shift(1);return[e,r,"e"]}function Jte(t){var e=ul(t),r=t.read_shift(1);return[e,r,"e"]}function Qte(t){var e=Gs(t),r=t.read_shift(4);return[e,r,"s"]}function Zte(t){var e=ul(t),r=t.read_shift(4);return[e,r,"s"]}function ere(t){var e=Gs(t),r=$n(t);return[e,r,"n"]}function lk(t){var e=ul(t),r=$n(t);return[e,r,"n"]}function tre(t){var e=Gs(t),r=Hx(t);return[e,r,"n"]}function rre(t){var e=ul(t),r=Hx(t);return[e,r,"n"]}function nre(t){var e=Gs(t),r=Vx(t);return[e,r,"is"]}function sre(t){var e=Gs(t),r=zn(t);return[e,r,"str"]}function are(t){var e=ul(t),r=zn(t);return[e,r,"str"]}function ire(t,e,r){var n=t.l+e,s=Gs(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=Ap(t,n-t.l,r);a[3]=Ln(o,null,s,r.supbooks,r)}else t.l=n;return a}function ore(t,e,r){var n=t.l+e,s=Gs(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=Ap(t,n-t.l,r);a[3]=Ln(o,null,s,r.supbooks,r)}else t.l=n;return a}function lre(t,e,r){var n=t.l+e,s=Gs(t);s.r=r["!row"];var i=$n(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=Ap(t,n-t.l,r);a[3]=Ln(o,null,s,r.supbooks,r)}else t.l=n;return a}function cre(t,e,r){var n=t.l+e,s=Gs(t);s.r=r["!row"];var i=zn(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=Ap(t,n-t.l,r);a[3]=Ln(o,null,s,r.supbooks,r)}else t.l=n;return a}var ure=dl;function dre(t,e){var r=t.l+e,n=dl(t),s=jx(t),i=zn(t),a=zn(t),o=zn(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function fre(){}function hre(t,e,r){var n=t.l+e,s=wI(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=xte(t,n-t.l,r);a[1]=o}else t.l=n;return a}function pre(t,e,r){var n=t.l+e,s=dl(t),i=[s];if(r.cellFormula){var a=Ete(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}var mre=["left","right","top","bottom","header","footer"];function gre(t){var e={};return mre.forEach(function(r){e[r]=$n(t)}),e}function vre(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function xre(){}function yre(){}function Ere(t,e,r,n,s,i,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,h=!1,p,m,g,v,y,x,E,I,P,w=[];o.biff=12,o["!row"]=0;var b=0,T=!1,_=[],S={},k=o.supbooks||s.supbooks||[[]];if(k.sharedf=S,k.arrayf=_,k.SheetNames=s.SheetNames||s.Sheets.map(function(B){return B.name}),!o.supbooks&&(o.supbooks=k,s.Names))for(var A=0;A<s.Names.length;++A)k[0][A+1]=s.Names[A];var D=[],N=[],R=!1;ph[16]={n:"BrtShortReal",f:lk};var F;if(_i(t,function(V,z,H){if(!h)switch(H){case 148:c=V;break;case 0:p=V,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),I=In(v=p.r),o["!row"]=p.r,(V.hidden||V.hpt||V.level!=null)&&(V.hpt&&(V.hpx=Sd(V.hpt)),N[V.r]=V);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:V[2]},V[2]){case"n":m.v=V[1];break;case"s":E=ju[V[1]],m.v=E.t,m.r=E.r;break;case"b":m.v=!!V[1];break;case"e":m.v=V[1],o.cellText!==!1&&(m.w=fl[m.v]);break;case"str":m.t="s",m.v=V[1];break;case"is":m.t="s",m.v=V[1].t;break}if((g=a.CellXf[V[0].iStyleRef])&&ik(m,g.numFmtId,null,o,i,a),y=V[0].c==-1?y+1:V[0].c,o.dense?(l[v]||(l[v]=[]),l[v][y]=m):l[sn(y)+I]=m,o.cellFormula){for(T=!1,b=0;b<_.length;++b){var j=_[b];p.r>=j[0].s.r&&p.r<=j[0].e.r&&y>=j[0].s.c&&y<=j[0].e.c&&(m.F=er(j[0]),T=!0)}!T&&V.length>3&&(m.f=V[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),o.cellDates&&g&&m.t=="n"&&Nc(Nt[g.numFmtId])){var W=Do(m.v);W&&(m.t="d",m.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}F&&(F.type=="XLDAPR"&&(m.D=!0),F=void 0);break;case 1:case 12:if(!o.sheetStubs||d)break;m={t:"z",v:void 0},y=V[0].c==-1?y+1:V[0].c,o.dense?(l[v]||(l[v]=[]),l[v][y]=m):l[sn(y)+I]=m,u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),F&&(F.type=="XLDAPR"&&(m.D=!0),F=void 0);break;case 176:w.push(V);break;case 49:F=((o.xlmeta||{}).Cell||[])[V-1];break;case 494:var K=n["!id"][V.relId];for(K?(V.Target=K.Target,V.loc&&(V.Target+="#"+V.loc),V.Rel=K):V.relId==""&&(V.Target="#"+V.loc),v=V.rfx.s.r;v<=V.rfx.e.r;++v)for(y=V.rfx.s.c;y<=V.rfx.e.c;++y)o.dense?(l[v]||(l[v]=[]),l[v][y]||(l[v][y]={t:"z",v:void 0}),l[v][y].l=V):(x=Pt({c:y,r:v}),l[x]||(l[x]={t:"z",v:void 0}),l[x].l=V);break;case 426:if(!o.cellFormula)break;_.push(V),P=o.dense?l[v][y]:l[sn(y)+I],P.f=Ln(V[1],u,{r:p.r,c:y},k,o),P.F=er(V[0]);break;case 427:if(!o.cellFormula)break;S[Pt(V[0].s)]=V[1],P=o.dense?l[v][y]:l[sn(y)+I],P.f=Ln(V[1],u,{r:p.r,c:y},k,o);break;case 60:if(!o.cellStyles)break;for(;V.e>=V.s;)D[V.e--]={width:V.w/256,hidden:!!(V.flags&1),level:V.level},R||(R=!0,Kx(V.w/256)),_c(D[V.e+1]);break;case 161:l["!autofilter"]={ref:er(V)};break;case 476:l["!margins"]=V;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),V.name&&(s.Sheets[r].CodeName=V.name),(V.above||V.left)&&(l["!outline"]={above:V.above,left:V.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),V.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!z.T){if(!d||o.WTF)throw new Error("Unexpected record 0x"+H.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=er(c||u)),o.sheetRows&&l["!ref"]){var O=Lr(l["!ref"]);o.sheetRows<=+O.e.r&&(O.e.r=o.sheetRows-1,O.e.r>u.e.r&&(O.e.r=u.e.r),O.e.r<O.s.r&&(O.s.r=O.e.r),O.e.c>u.e.c&&(O.e.c=u.e.c),O.e.c<O.s.c&&(O.s.c=O.e.c),l["!fullref"]=l["!ref"],l["!ref"]=er(O))}return w.length>0&&(l["!merges"]=w),D.length>0&&(l["!cols"]=D),N.length>0&&(l["!rows"]=N),l}function bre(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var a=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var s=tr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function _re(t,e,r,n,s,i){var a=i||{"!type":"chart"};if(!t)return i;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var h=bre(d);u.s.r=u.s.c=0,u.e.c=o,c=sn(o),h[0].forEach(function(p,m){a[c+In(m)]={t:"n",v:p,z:h[1]},l=m}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=er(u)),a}function Sre(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(ok);return o&&Xx(o[0],i,s,r),(a=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function Tre(t,e){t.l+=10;var r=zn(t);return{name:r}}function wre(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a=!1;return _i(t,function(l,c,u){switch(u){case 550:i["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var ck=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Are=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Cre=[],Ire=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function X2(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Ar(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function Y2(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Ar(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function uk(t){Y2(t.WBProps,ck),Y2(t.CalcPr,Ire),X2(t.WBView,Are),X2(t.Sheets,Cre),sc.date1904=Ar(t.WBProps.date1904)}var kre="][*?/\\".split("");function Dre(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return kre.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var Pre=/<\w+:workbook/;function Fre(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},a=0;if(t.replace(Xn,function(l,c){var u=St(l);switch(Ma(u[0])){case"<?xml":break;case"<workbook":l.match(Pre)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":ck.forEach(function(d){if(u[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=Ar(u[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(u[d[0]],10);break;default:r.WBProps[d[0]]=u[d[0]]}}),u.codeName&&(r.WBProps.CodeName=xr(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=tr(xr(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=xr(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Ar(u.hidden||"0")&&(i.Hidden=!0),a=c+l.length;break;case"</definedName>":i.Ref=tr(xr(t.slice(a,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),YX.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return uk(r),r}function Rre(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Ev(t),r.name=zn(t),r}function Ore(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?zn(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Nre(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function Mre(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=pY(t),a=yte(t,0,r),o=jx(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function Lre(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],a=[[]];return a.SheetNames=[],a.XTI=[],ph[16]={n:"BrtFRTArchID$",f:Nre},_i(t,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Ln(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),uk(r),r.Names=i,r.supbooks=a,r}function Bre(t,e,r){return e.slice(-4)===".bin"?Lre(t,r):Fre(t,r)}function Ure(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Ere(t,n,r,s,i,a,o):Rte(t,n,r,s,i,a,o)}function $re(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?wre(t,n,r,s,i):Sre(t,n,r,s,i)}function Vre(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?XZ():YZ()}function jre(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?KZ():qZ()}function Hre(t,e,r,n){return e.slice(-4)===".bin"?uZ(t,r,n):sZ(t,r,n)}function Gre(t,e,r){return YI(t,r)}function Wre(t,e,r){return e.slice(-4)===".bin"?AQ(t,r):TQ(t,r)}function zre(t,e,r){return e.slice(-4)===".bin"?GZ(t,r):UZ(t,r)}function Kre(t,e,r){return e.slice(-4)===".bin"?MZ(t):OZ(t)}function qre(t,e,r,n){return r.slice(-4)===".bin"?LZ(t,e,r,n):void 0}function Xre(t,e,r){return e.slice(-4)===".bin"?FZ(t,e,r):RZ(t,e,r)}var dk=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,fk=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function qs(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(dk),i,a,o,l;if(s)for(l=0;l!=s.length;++l)i=s[l].match(fk),(a=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(a+1),n[o]=i[2].slice(1,i[2].length-1));return n}function Yre(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(dk),s,i,a,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(fk),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?a="xmlns"+s[1].slice(6):a=s[1].slice(i+1),r[a]=s[2].slice(1,s[2].length-1));return r}var Gu;function Jre(t,e){var r=Gu[t]||tr(t);return r==="General"?Xo(e):$s(r,e)}function Qre(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ar(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=fn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[tr(e)]=s}function Zre(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||fl[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=xd(t.v):t.w=Xo(t.v):t.w=Jre(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=Gu[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Nc(n)){var s=Do(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function ene(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=QQ[n.Pattern]||n.Pattern)}t[e.ID]=e}function tne(t,e,r,n,s,i,a,o,l,c){var u="General",d=n.StyleID,h={};c=c||{};var p=[],m=0;for(d===void 0&&o&&(d=o.StyleID),d===void 0&&a&&(d=a.StyleID);i[d]!==void 0&&(i[d].nf&&(u=i[d].nf),i[d].Interior&&p.push(i[d].Interior),!!i[d].Parent);)d=i[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ar(t);break;case"String":n.t="s",n.r=x2(tr(t)),n.v=t.indexOf("<")>-1?tr(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(fn(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=tr(t):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=II[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=x2(e||t));break}if(Zre(n,u,c),c.cellFormula!==!1)if(n.Formula){var g=tr(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=nc(g,s),delete n.Formula,n.ArrayRange=="RC"?n.F=nc("RC:RC",s):n.ArrayRange&&(n.F=nc(n.ArrayRange,s),l.push([Lr(n.F),n.F]))}else for(m=0;m<l.length;++m)s.r>=l[m][0].s.r&&s.r<=l[m][0].e.r&&s.c>=l[m][0].s.c&&s.c<=l[m][0].e.c&&(n.F=l[m][1]);c.cellStyles&&(p.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function rne(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function tg(t,e){var r=e||{};eI();var n=du(Lx(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=xr(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var a=Cn(r);return a.type="string",bd.to_workbook(n,a)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(le){s.indexOf("<"+le)>=0&&(i=!0)}),i)return dne(n,r);Gu={"General Number":"General","General Date":Nt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Nt[15],"Short Date":Nt[14],"Long Time":Nt[19],"Medium Time":Nt[18],"Short Time":Nt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Nt[2],Standard:Nt[4],Percent:Nt[10],Scientific:Nt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},d=[],h=r.dense?[]:{},p="",m={},g={},v=qs('<Data ss:Type="String">'),y=0,x=0,E=0,I={s:{r:2e6,c:2e6},e:{r:0,c:0}},P={},w={},b="",T=0,_=[],S={},k={},A=0,D=[],N=[],R={},F=[],O,B=!1,V=[],z=[],H={},j=0,W=0,K={Sheets:[],WBProps:{date1904:!1}},re={};Ed.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var he="";o=Ed.exec(n);)switch(o[3]=(he=o[3]).toLowerCase()){case"data":if(he=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?tne(n.slice(y,o.index),b,v,l[l.length-1][0]=="comment"?R:m,{c:x,r:E},P,F[x],g,V,r):(b="",v=qs(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(N.length>0&&(m.c=N),(!r.sheetRows||r.sheetRows>E)&&m.v!==void 0&&(r.dense?(h[E]||(h[E]=[]),h[E][x]=m):h[sn(x)+In(E)]=m),m.HRef&&(m.l={Target:tr(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(j=x+(parseInt(m.MergeAcross,10)|0),W=E+(parseInt(m.MergeDown,10)|0),_.push({s:{c:x,r:E},e:{c:j,r:W}})),!r.sheetStubs)m.MergeAcross?x=j+1:++x;else if(m.MergeAcross||m.MergeDown){for(var ue=x;ue<=j;++ue)for(var pe=E;pe<=W;++pe)(ue>x||pe>E)&&(r.dense?(h[pe]||(h[pe]=[]),h[pe][ue]={t:"z"}):h[sn(ue)+In(pe)]={t:"z"});x=j+1}else++x;else m=Yre(o[0]),m.Index&&(x=+m.Index-1),x<I.s.c&&(I.s.c=x),x>I.e.c&&(I.e.c=x),o[0].slice(-2)==="/>"&&++x,N=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(E<I.s.r&&(I.s.r=E),E>I.e.r&&(I.e.r=E),o[0].slice(-2)==="/>"&&(g=qs(o[0]),g.Index&&(E=+g.Index-1)),x=0,++E):(g=qs(o[0]),g.Index&&(E=+g.Index-1),H={},(g.AutoFitHeight=="0"||g.Height)&&(H.hpx=parseInt(g.Height,10),H.hpt=XI(H.hpx),z[E]=H),g.Hidden=="1"&&(H.hidden=!0,z[E]=H));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));d.push(p),I.s.r<=I.e.r&&I.s.c<=I.e.c&&(h["!ref"]=er(I),r.sheetRows&&r.sheetRows<=I.e.r&&(h["!fullref"]=h["!ref"],I.e.r=r.sheetRows-1,h["!ref"]=er(I))),_.length&&(h["!merges"]=_),F.length>0&&(h["!cols"]=F),z.length>0&&(h["!rows"]=z),u[p]=h}else I={s:{r:2e6,c:2e6},e:{r:0,c:0}},E=x=0,l.push([o[3],!1]),c=qs(o[0]),p=tr(c.Name),h=r.dense?[]:{},_=[],V=[],z=[],re={name:p,Hidden:0},K.Sheets.push(re);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),F=[],B=!1}break;case"style":o[1]==="/"?ene(P,w,r):w=qs(o[0]);break;case"numberformat":w.nf=tr(qs(o[0]).Format||"General"),Gu[w.nf]&&(w.nf=Gu[w.nf]);for(var te=0;te!=392&&Nt[te]!=w.nf;++te);if(te==392){for(te=57;te!=392;++te)if(Nt[te]==null){Lo(w.nf,te);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(O=qs(o[0]),O.Hidden&&(O.hidden=!0,delete O.Hidden),O.Width&&(O.wpx=parseInt(O.Width,10)),!B&&O.wpx>10){B=!0,ns=KI;for(var Y=0;Y<F.length;++Y)F[Y]&&_c(F[Y])}B&&_c(O),F[O.Index-1||F.length]=O;for(var Ee=0;Ee<+O.Span;++Ee)F[F.length]=Cn(O);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var X=St(o[0]),q={Name:X.Name,Ref:nc(X.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(q.Sheet=K.Sheets.length-1),K.Names.push(q);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?b+=n.slice(T,o.index):T=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;w.Interior=qs(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?UY(S,he,n.slice(A,o.index)):A=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));rne(R),N.push(R)}else l.push([o[3],!1]),c=qs(o[0]),R={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var J=qs(o[0]);h["!autofilter"]={ref:nc(J.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return rS(n,r);var ge=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ge=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ge=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ge=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ge=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(A,o.index)){case"SheetHidden":re.Hidden=1;break;case"SheetVeryHidden":re.Hidden=2;break}else A=o.index+o[0].length;break;case"header":h["!margins"]||Hu(h["!margins"]={},"xlml"),isNaN(+St(o[0]).Margin)||(h["!margins"].header=+St(o[0]).Margin);break;case"footer":h["!margins"]||Hu(h["!margins"]={},"xlml"),isNaN(+St(o[0]).Margin)||(h["!margins"].footer=+St(o[0]).Margin);break;case"pagemargins":var ae=St(o[0]);h["!margins"]||Hu(h["!margins"]={},"xlml"),isNaN(+ae.Top)||(h["!margins"].top=+ae.Top),isNaN(+ae.Left)||(h["!margins"].left=+ae.Left),isNaN(+ae.Right)||(h["!margins"].right=+ae.Right),isNaN(+ae.Bottom)||(h["!margins"].bottom=+ae.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ge=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ge=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ge=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ge=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ge=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ge=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ge=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ge=!1}break;case"smarttags":break;default:ge=!1;break}if(ge||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Qre(k,he,D,n.slice(A,o.index)):(D=o,A=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var se={};return!r.bookSheets&&!r.bookProps&&(se.Sheets=u),se.SheetNames=d,se.Workbook=K,se.SSF=Cn(Nt),se.Props=S,se.Custprops=k,se}function Tv(t,e){switch(Qx(e=e||{}),e.type||"base64"){case"base64":return tg(Cs(t),e);case"binary":case"buffer":case"file":return tg(t,e);case"array":return tg(cl(t),e)}}function nne(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=vY(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=xY(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var sne=[60,1084,2066,2165,2175];function ane(t,e,r,n,s){var i=n,a=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}a.push(o),r.l+=i;for(var l=ri(r,r.l),c=wv[l],u=0;c!=null&&sne.indexOf(l)>-1;)i=ri(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+i),a.push(o),r.l+=4+i,c=wv[l=ri(r,r.l)];var d=ji(a);bn(d,0);var h=0;d.lens=[];for(var p=0;p<a.length;++p)d.lens.push(h),h+=a[p].length;if(d.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+d.length+" < "+n;return e.f(d,d.length,s)}function va(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Nt[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||fl[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=xd(t.v):t.w=Xo(t.v):t.w=$s(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&Nc(Nt[n]||String(n))){var s=Do(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Hf(t,e,r){return{v:t,ixfe:e,t:r}}function ine(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},a={},o=null,l=[],c="",u={},d,h="",p,m,g,v,y={},x=[],E,I,P=[],w=[],b={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},_=function(ye){return ye<8?Bo[ye]:ye<64&&w[ye-8]||Bo[ye]},S=function(ye,Te,Ne){var He=Te.XF.data;if(!(!He||!He.patternType||!Ne||!Ne.cellStyles)){Te.s={},Te.s.patternType=He.patternType;var ot;(ot=_d(_(He.icvFore)))&&(Te.s.fgColor={rgb:ot}),(ot=_d(_(He.icvBack)))&&(Te.s.bgColor={rgb:ot})}},k=function(ye,Te,Ne){if(!(H>1)&&!(Ne.sheetRows&&ye.r>=Ne.sheetRows)){if(Ne.cellStyles&&Te.XF&&Te.XF.data&&S(ye,Te,Ne),delete Te.ixfe,delete Te.XF,d=ye,h=Pt(ye),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),ye.r<a.s.r&&(a.s.r=ye.r),ye.c<a.s.c&&(a.s.c=ye.c),ye.r+1>a.e.r&&(a.e.r=ye.r+1),ye.c+1>a.e.c&&(a.e.c=ye.c+1),Ne.cellFormula&&Te.f){for(var He=0;He<x.length;++He)if(!(x[He][0].s.c>ye.c||x[He][0].s.r>ye.r)&&!(x[He][0].e.c<ye.c||x[He][0].e.r<ye.r)){Te.F=er(x[He][0]),(x[He][0].s.c!=ye.c||x[He][0].s.r!=ye.r)&&delete Te.f,Te.f&&(Te.f=""+Ln(x[He][1],a,ye,V,A));break}}Ne.dense?(s[ye.r]||(s[ye.r]=[]),s[ye.r][ye.c]=Te):s[h]=Te}},A={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:x,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(A.password=e.password);var D,N=[],R=[],F=[],O=[],B=!1,V=[];V.SheetNames=A.snames,V.sharedf=A.sharedf,V.arrayf=A.arrayf,V.names=[],V.XTI=[];var z=0,H=0,j=0,W=[],K=[],re;A.codepage=1200,na(1200);for(var he=!1;t.l<t.length-1;){var ue=t.l,pe=t.read_shift(2);if(pe===0&&z===10)break;var te=t.l===t.length?0:t.read_shift(2),Y=wv[pe];if(Y&&Y.f){if(e.bookSheets&&z===133&&pe!==133)break;if(z=pe,Y.r===2||Y.r==12){var Ee=t.read_shift(2);if(te-=2,!A.enc&&Ee!==pe&&((Ee&255)<<8|Ee>>8)!==pe)throw new Error("rt mismatch: "+Ee+"!="+pe);Y.r==12&&(t.l+=10,te-=10)}var X={};if(pe===10?X=Y.f(t,te,A):X=ane(pe,Y,t,te,A),H==0&&[9,521,1033,2057].indexOf(z)===-1)continue;switch(pe){case 34:r.opts.Date1904=b.WBProps.date1904=X;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(A.enc||(t.l=0),A.enc=X,!e.password)throw new Error("File is password-protected");if(X.valid==null)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:A.lastuser=X;break;case 66:var q=Number(X);switch(q){case 21010:q=1200;break;case 32768:q=1e4;break;case 32769:q=1252;break}na(A.codepage=q),he=!0;break;case 317:A.rrtabid=X;break;case 25:A.winlocked=X;break;case 439:r.opts.RefreshAll=X;break;case 12:r.opts.CalcCount=X;break;case 16:r.opts.CalcDelta=X;break;case 17:r.opts.CalcIter=X;break;case 13:r.opts.CalcMode=X;break;case 14:r.opts.CalcPrecision=X;break;case 95:r.opts.CalcSaveRecalc=X;break;case 15:A.CalcRefMode=X;break;case 2211:r.opts.FullCalc=X;break;case 129:X.fDialog&&(s["!type"]="dialog"),X.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),X.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:P.push(X);break;case 430:V.push([X]),V[V.length-1].XTI=[];break;case 35:case 547:V[V.length-1].push(X);break;case 24:case 536:re={Name:X.Name,Ref:Ln(X.rgce,a,null,V,A)},X.itab>0&&(re.Sheet=X.itab-1),V.names.push(re),V[0]||(V[0]=[],V[0].XTI=[]),V[V.length-1].push(X),X.Name=="_xlnm._FilterDatabase"&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&X.rgce[0][0][0]=="PtgArea3d"&&(K[X.itab-1]={ref:er(X.rgce[0][0][1][2])});break;case 22:A.ExternCount=X;break;case 23:V.length==0&&(V[0]=[],V[0].XTI=[]),V[V.length-1].XTI=V[V.length-1].XTI.concat(X),V.XTI=V.XTI.concat(X);break;case 2196:if(A.biff<8)break;re!=null&&(re.Comment=X[1]);break;case 18:s["!protect"]=X;break;case 19:X!==0&&A.WTF&&console.error("Password verifier: "+X);break;case 133:i[X.pos]=X,A.snames.push(X.name);break;case 10:{if(--H)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,s["!ref"]=er(a),e.sheetRows&&e.sheetRows<=a.e.r){var J=a.e.r;a.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=er(a),a.e.r=J}a.e.r++,a.e.c++}N.length>0&&(s["!merges"]=N),R.length>0&&(s["!objects"]=R),F.length>0&&(s["!cols"]=F),O.length>0&&(s["!rows"]=O),b.Sheets.push(T)}c===""?u=s:n[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(A.biff===8&&(A.biff={9:2,521:3,1033:4}[pe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),A.biffguess=X.BIFFVer==0,X.BIFFVer==0&&X.dt==4096&&(A.biff=5,he=!0,na(A.codepage=28591)),A.biff==8&&X.BIFFVer==0&&X.dt==16&&(A.biff=2),H++)break;if(s=e.dense?[]:{},A.biff<8&&!he&&(he=!0,na(A.codepage=e.codepage||1252)),A.biff<5||X.BIFFVer==0&&X.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var ge={pos:t.l-te,name:c};i[ge.pos]=ge,A.snames.push(c)}else c=(i[ue]||{name:""}).name;X.dt==32&&(s["!type"]="chart"),X.dt==64&&(s["!type"]="macro"),N=[],R=[],A.arrayf=x=[],F=[],O=[],B=!1,T={Hidden:(i[ue]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[X.r]||[])[X.c]:s[Pt({c:X.c,r:X.r})])&&++X.c,E={ixfe:X.ixfe,XF:P[X.ixfe]||{},v:X.val,t:"n"},j>0&&(E.z=W[E.ixfe>>8&63]),va(E,e,r.opts.Date1904),k({c:X.c,r:X.r},E,e);break;case 5:case 517:E={ixfe:X.ixfe,XF:P[X.ixfe],v:X.val,t:X.t},j>0&&(E.z=W[E.ixfe>>8&63]),va(E,e,r.opts.Date1904),k({c:X.c,r:X.r},E,e);break;case 638:E={ixfe:X.ixfe,XF:P[X.ixfe],v:X.rknum,t:"n"},j>0&&(E.z=W[E.ixfe>>8&63]),va(E,e,r.opts.Date1904),k({c:X.c,r:X.r},E,e);break;case 189:for(var ae=X.c;ae<=X.C;++ae){var se=X.rkrec[ae-X.c][0];E={ixfe:se,XF:P[se],v:X.rkrec[ae-X.c][1],t:"n"},j>0&&(E.z=W[E.ixfe>>8&63]),va(E,e,r.opts.Date1904),k({c:ae,r:X.r},E,e)}break;case 6:case 518:case 1030:{if(X.val=="String"){o=X;break}if(E=Hf(X.val,X.cell.ixfe,X.tt),E.XF=P[E.ixfe],e.cellFormula){var le=X.formula;if(le&&le[0]&&le[0][0]&&le[0][0][0]=="PtgExp"){var xe=le[0][0][1][0],ve=le[0][0][1][1],Ce=Pt({r:xe,c:ve});y[Ce]?E.f=""+Ln(X.formula,a,X.cell,V,A):E.F=((e.dense?(s[xe]||[])[ve]:s[Ce])||{}).F}else E.f=""+Ln(X.formula,a,X.cell,V,A)}j>0&&(E.z=W[E.ixfe>>8&63]),va(E,e,r.opts.Date1904),k(X.cell,E,e),o=X}break;case 7:case 519:if(o)o.val=X,E=Hf(X,o.cell.ixfe,"s"),E.XF=P[E.ixfe],e.cellFormula&&(E.f=""+Ln(o.formula,a,o.cell,V,A)),j>0&&(E.z=W[E.ixfe>>8&63]),va(E,e,r.opts.Date1904),k(o.cell,E,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{x.push(X);var we=Pt(X[0].s);if(p=e.dense?(s[X[0].s.r]||[])[X[0].s.c]:s[we],e.cellFormula&&p){if(!o||!we||!p)break;p.f=""+Ln(X[1],a,X[0],V,A),p.F=er(X[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!o)break;y[Pt(o.cell)]=X[0],p=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Pt(o.cell)],(p||{}).f=""+Ln(X[0],a,d,V,A)}}break;case 253:E=Hf(l[X.isst].t,X.ixfe,"s"),l[X.isst].h&&(E.h=l[X.isst].h),E.XF=P[E.ixfe],j>0&&(E.z=W[E.ixfe>>8&63]),va(E,e,r.opts.Date1904),k({c:X.c,r:X.r},E,e);break;case 513:e.sheetStubs&&(E={ixfe:X.ixfe,XF:P[X.ixfe],t:"z"},j>0&&(E.z=W[E.ixfe>>8&63]),va(E,e,r.opts.Date1904),k({c:X.c,r:X.r},E,e));break;case 190:if(e.sheetStubs)for(var Ge=X.c;Ge<=X.C;++Ge){var ke=X.ixfe[Ge-X.c];E={ixfe:ke,XF:P[ke],t:"z"},j>0&&(E.z=W[E.ixfe>>8&63]),va(E,e,r.opts.Date1904),k({c:Ge,r:X.r},E,e)}break;case 214:case 516:case 4:E=Hf(X.val,X.ixfe,"s"),E.XF=P[E.ixfe],j>0&&(E.z=W[E.ixfe>>8&63]),va(E,e,r.opts.Date1904),k({c:X.c,r:X.r},E,e);break;case 0:case 512:H===1&&(a=X);break;case 252:l=X;break;case 1054:if(A.biff==4){W[j++]=X[1];for(var $e=0;$e<j+163&&Nt[$e]!=X[1];++$e);$e>=163&&Lo(X[1],j+163)}else Lo(X[1],X[0]);break;case 30:{W[j++]=X;for(var Be=0;Be<j+163&&Nt[Be]!=X;++Be);Be>=163&&Lo(X,j+163)}break;case 229:N=N.concat(X);break;case 93:R[X.cmo[0]]=A.lastobj=X;break;case 438:A.lastobj.TxO=X;break;case 127:A.lastobj.ImData=X;break;case 440:for(v=X[0].s.r;v<=X[0].e.r;++v)for(g=X[0].s.c;g<=X[0].e.c;++g)p=e.dense?(s[v]||[])[g]:s[Pt({c:g,r:v})],p&&(p.l=X[1]);break;case 2048:for(v=X[0].s.r;v<=X[0].e.r;++v)for(g=X[0].s.c;g<=X[0].e.c;++g)p=e.dense?(s[v]||[])[g]:s[Pt({c:g,r:v})],p&&p.l&&(p.l.Tooltip=X[1]);break;case 28:{if(A.biff<=5&&A.biff>=2)break;p=e.dense?(s[X[0].r]||[])[X[0].c]:s[Pt(X[0])];var We=R[X[2]];p||(e.dense?(s[X[0].r]||(s[X[0].r]=[]),p=s[X[0].r][X[0].c]={t:"z"}):p=s[Pt(X[0])]={t:"z"},a.e.r=Math.max(a.e.r,X[0].r),a.s.r=Math.min(a.s.r,X[0].r),a.e.c=Math.max(a.e.c,X[0].c),a.s.c=Math.min(a.s.c,X[0].c)),p.c||(p.c=[]),m={a:X[1],t:We.TxO.t},p.c.push(m)}break;case 2173:IZ(P[X.ixfe],X.ext);break;case 125:{if(!A.cellStyles)break;for(;X.e>=X.s;)F[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(X.flags&1)},B||(B=!0,Kx(X.w/256)),_c(F[X.e+1])}break;case 520:{var ze={};X.level!=null&&(O[X.r]=ze,ze.level=X.level),X.hidden&&(O[X.r]=ze,ze.hidden=!0),X.hpt&&(O[X.r]=ze,ze.hpt=X.hpt,ze.hpx=Sd(X.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Hu(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[pe]]=X;break;case 161:s["!margins"]||Hu(s["!margins"]={}),s["!margins"].header=X.header,s["!margins"].footer=X.footer;break;case 574:X.RTL&&(b.Views[0].RTL=!0);break;case 146:w=X;break;case 2198:D=X;break;case 140:I=X;break;case 442:c?T.CodeName=X||T.name:b.WBProps.CodeName=X||"ThisWorkbook";break}}else Y||console.error("Missing Info for XLS Record 0x"+pe.toString(16)),t.l+=te}return r.SheetNames=Pa(i).sort(function(be,ye){return Number(be)-Number(ye)}).map(function(be){return i[be].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&K.forEach(function(be,ye){r.Sheets[r.SheetNames[ye]]["!autofilter"]=be}),r.Strings=l,r.SSF=Cn(Nt),A.enc&&(r.Encryption=A.enc),D&&(r.Themes=D),r.Metadata={},I!==void 0&&(r.Metadata.Country=I),V.names.length>0&&(b.Names=V.names),r.Workbook=b,r}var J2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function one(t,e,r){var n=Qt.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=O2(n,TY,J2.DSI);for(var i in s)e[i]=s[i]}catch(c){if(r.WTF)throw c}var a=Qt.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=O2(a,wY,J2.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(DI(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function hk(t,e){e||(e={}),Qx(e),j4(),e.codepage&&Dx(e.codepage);var r,n;if(t.FullPaths){if(Qt.find(t,"/encryption"))throw new Error("File is password-protected");r=Qt.find(t,"!CompObj"),n=Qt.find(t,"/Workbook")||Qt.find(t,"/Book")}else{switch(e.type){case"base64":t=ta(Cs(t));break;case"binary":t=ta(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}bn(t,0),n={content:t}}var s,i;if(r&&nne(r),e.bookProps&&!e.bookSheets)s={};else{var a=Xt?"buffer":"array";if(n&&n.content)s=ine(n.content,e);else if((i=Qt.find(t,"PerfectOffice_MAIN"))&&i.content)s=Vu.to_workbook(i.content,(e.type=a,e));else if((i=Qt.find(t,"NativeContent_MAIN"))&&i.content)s=Vu.to_workbook(i.content,(e.type=a,e));else throw(i=Qt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Qt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=zZ(t))}var o={};return t.FullPaths&&one(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}var ph={0:{f:jte},1:{f:zte},2:{f:tre},3:{f:Yte},4:{f:qte},5:{f:ere},6:{f:sre},7:{f:Qte},8:{f:cre},9:{f:lre},10:{f:ire},11:{f:ore},12:{f:Kte},13:{f:rre},14:{f:Jte},15:{f:Xte},16:{f:lk},17:{f:are},18:{f:Zte},19:{f:Vx},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Mre},40:{},42:{},43:{f:iZ},44:{f:aZ},45:{f:oZ},46:{f:cZ},47:{f:lZ},48:{},49:{f:uY},50:{},51:{f:DZ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:jI},62:{f:nre},63:{f:NZ},64:{f:xre},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:qn,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:vre},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Wte},148:{f:Hte,p:16},151:{f:fre},152:{},153:{f:Ore},154:{},155:{},156:{f:Rre},157:{},158:{},159:{T:1,f:wQ},160:{T:-1},161:{T:1,f:dl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:ure},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:kZ},336:{T:-1},337:{f:PZ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Ev},357:{},358:{},359:{},360:{T:1},361:{},362:{f:VI},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:hre},427:{f:pre},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:gre},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Gte},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:dre},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Ev},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:HZ},633:{T:1},634:{T:-1},635:{T:1,f:jZ},636:{T:-1},637:{f:fY},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Tre},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:yre},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},wv={6:{f:Zm},10:{f:Fi},12:{f:qr},13:{f:qr},14:{f:Ur},15:{f:Ur},16:{f:$n},17:{f:Ur},18:{f:Ur},19:{f:qr},20:{f:B2},21:{f:B2},23:{f:VI},24:{f:$2},25:{f:Ur},26:{},27:{},28:{f:$J},29:{},34:{f:Ur},35:{f:U2},38:{f:$n},39:{f:$n},40:{f:$n},41:{f:$n},42:{f:Ur},43:{f:Ur},47:{f:GQ},49:{f:bJ},51:{f:qr},60:{},61:{f:xJ},64:{f:Ur},65:{f:EJ},66:{f:qr},77:{},80:{},81:{},82:{},85:{f:qr},89:{},90:{},91:{},92:{f:uJ},93:{f:jJ},94:{},95:{f:Ur},96:{},97:{},99:{f:Ur},125:{f:jI},128:{f:PJ},129:{f:dJ},130:{f:qr},131:{f:Ur},132:{f:Ur},133:{f:fJ},134:{},140:{f:qJ},141:{f:qr},144:{},146:{f:YJ},151:{},152:{},153:{},154:{},155:{},156:{f:qr},157:{},158:{},160:{f:tQ},161:{f:QJ},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:CJ},190:{f:IJ},193:{f:Fi},197:{},198:{},199:{},200:{},201:{},202:{f:Ur},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:qr},220:{},221:{f:Ur},222:{},224:{f:DJ},225:{f:cJ},226:{f:Fi},227:{},229:{f:VJ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:hJ},253:{f:_J},255:{f:pJ},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:NI},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ur},353:{f:Fi},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:RJ},431:{f:Ur},432:{},433:{},434:{},437:{},438:{f:WJ},439:{f:Ur},440:{f:zJ},441:{},442:{f:Qd},443:{},444:{f:qr},445:{},446:{},448:{f:Fi},449:{f:vJ,r:2},450:{f:Fi},512:{f:M2},513:{f:eQ},515:{f:FJ},516:{f:SJ},517:{f:L2},519:{f:rQ},520:{f:mJ},523:{},545:{f:V2},549:{f:N2},566:{},574:{f:yJ},638:{f:AJ},659:{},1048:{},1054:{f:TJ},1084:{},1212:{f:LJ},2048:{f:KJ},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:$f},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Fi},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:JJ,r:12},2173:{f:CZ,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ur,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:MJ,r:12},2197:{},2198:{f:bZ,r:12},2199:{},2200:{},2201:{},2202:{f:BJ,r:12},2203:{f:Fi},2204:{},2205:{},2206:{},2207:{},2211:{f:gJ},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:qr},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:ZJ},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:XJ},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:M2},1:{},2:{f:iQ},3:{f:aQ},4:{f:sQ},5:{f:L2},7:{f:oQ},8:{},9:{f:$f},11:{},22:{f:qr},30:{f:wJ},31:{},32:{},33:{f:V2},36:{},37:{f:N2},50:{f:lQ},62:{},52:{},67:{},68:{f:qr},69:{},86:{},126:{},127:{f:nQ},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:cQ},223:{},234:{},354:{},421:{},518:{f:Zm},521:{f:$f},536:{f:$2},547:{f:U2},561:{},579:{},1030:{f:Zm},1033:{f:$f},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Xs(t,e,r,n){var s=e;if(!isNaN(s)){var i=(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&_I(r)&&t.push(r)}}function Q2(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),a=s.index,o=i&&i.index||t.length,l=FX(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,d=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(a=0;a<l.length;++a){var g=l[a].trim(),v=g.slice(0,3).toLowerCase();if(v=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(v!="<td"&&v!="<th")){var y=g.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var x=y[o].trim();if(x.match(/<t[dh]/i)){for(var E=x,I=0;E.charAt(0)=="<"&&(I=E.indexOf(">"))>-1;)E=E.slice(I+1);for(var P=0;P<m.length;++P){var w=m[P];w.s.c==u&&w.s.r<c&&c<=w.e.r&&(u=w.e.c+1,P=-1)}var b=St(x.slice(0,x.indexOf(">")));h=b.colspan?+b.colspan:1,((d=+b.rowspan)>1||h>1)&&m.push({s:{r:c,c:u},e:{r:c+(d||1)-1,c:u+h-1}});var T=b.t||b["data-t"]||"";if(!E.length){u+=h;continue}if(E=cI(E),p.s.r>c&&(p.s.r=c),p.e.r<c&&(p.e.r=c),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!E.length){u+=h;continue}var _={t:"s",v:E};r.raw||!E.trim().length||T=="s"||(E==="TRUE"?_={t:"b",v:!0}:E==="FALSE"?_={t:"b",v:!1}:isNaN(oa(E))?isNaN(bc(E).getDate())||(_={t:"d",v:fn(E)},r.cellDates||(_={t:"n",v:os(_.v)}),_.z=r.dateNF||Nt[14]):_={t:"n",v:oa(E)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=_):n[Pt({r:c,c:u})]=_,u+=h}}}}return n["!ref"]=er(p),m.length&&(n["!merges"]=m),n}function lne(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var u=Pt({r,c:a}),d=n.dense?(t[r]||[])[a]:t[u],h=d&&d.v!=null&&(d.h||Mx(d.w||(yi(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+d.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+u,i.push(qX("td",h,p))}}var m="<tr>";return m+i.join("")+"</tr>"}var cne='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',une="</body></html>";function dne(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return po(Q2(r[0],e),e);var n=ey();return r.forEach(function(s,i){ty(n,Q2(s,e),"Sheet"+(i+1))}),n}function fne(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function hne(t,e){var r=e||{},n=r.header!=null?r.header:cne,s=r.footer!=null?r.footer:une,i=[n],a=Mc(t["!ref"]);r.dense=Array.isArray(t),i.push(fne(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(lne(t,a,o,r));return i.push("</table>"+s),i.join("")}function pk(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?ss(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var u=Mc(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),s==-1&&(c.e.r=s=u.e.r+1)}var d=[],h=0,p=t["!rows"]||(t["!rows"]=[]),m=0,g=0,v=0,y=0,x=0,E=0;for(t["!cols"]||(t["!cols"]=[]);m<o.length&&g<l;++m){var I=o[m];if(Z2(I)){if(n.display)continue;p[g]={hidden:!0}}var P=I.children;for(v=y=0;v<P.length;++v){var w=P[v];if(!(n.display&&Z2(w))){var b=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):cI(w.innerHTML),T=w.getAttribute("data-z")||w.getAttribute("z");for(h=0;h<d.length;++h){var _=d[h];_.s.c==y+i&&_.s.r<g+s&&g+s<=_.e.r&&(y=_.e.c+1-i,h=-1)}E=+w.getAttribute("colspan")||1,((x=+w.getAttribute("rowspan")||1)>1||E>1)&&d.push({s:{r:g+s,c:y+i},e:{r:g+s+(x||1)-1,c:y+i+(E||1)-1}});var S={t:"s",v:b},k=w.getAttribute("data-t")||w.getAttribute("t")||"";b!=null&&(b.length==0?S.t=k||"z":n.raw||b.trim().length==0||k=="s"||(b==="TRUE"?S={t:"b",v:!0}:b==="FALSE"?S={t:"b",v:!1}:isNaN(oa(b))?isNaN(bc(b).getDate())||(S={t:"d",v:fn(b)},n.cellDates||(S={t:"n",v:os(S.v)}),S.z=n.dateNF||Nt[14]):S={t:"n",v:oa(b)})),S.z===void 0&&T!=null&&(S.z=T);var A="",D=w.getElementsByTagName("A");if(D&&D.length)for(var N=0;N<D.length&&!(D[N].hasAttribute("href")&&(A=D[N].getAttribute("href"),A.charAt(0)!="#"));++N);A&&A.charAt(0)!="#"&&(S.l={Target:A}),n.dense?(t[g+s]||(t[g+s]=[]),t[g+s][y+i]=S):t[Pt({c:y+i,r:g+s})]=S,c.e.c<y+i&&(c.e.c=y+i),y+=E}}++g}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,g-1+s),t["!ref"]=er(c),g>=l&&(t["!fullref"]=er((c.e.r=o.length-m+g-1+s,c))),t}function mk(t,e){var r=e||{},n=r.dense?[]:{};return pk(n,t,e)}function pne(t,e){return po(mk(t,e),e)}function Z2(t){var e="",r=mne(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function mne(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function gne(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=tr(e.replace(/<[^>]*>/g,""));return[r]}var eS={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function gk(t,e){var r=e||{},n=Lx(t),s=[],i,a,o={name:""},l="",c=0,u,d,h={},p=[],m=r.dense?[]:{},g,v,y={value:""},x="",E=0,I=[],P=-1,w=-1,b={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,_={},S=[],k={},A=0,D=0,N=[],R=1,F=1,O=[],B={Names:[]},V={},z=["",""],H=[],j={},W="",K=0,re=!1,he=!1,ue=0;for(Ed.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=Ed.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(b.e.c>=b.s.c&&b.e.r>=b.s.r?m["!ref"]=er(b):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=b.e.r&&(m["!fullref"]=m["!ref"],b.e.r=r.sheetRows-1,m["!ref"]=er(b)),S.length&&(m["!merges"]=S),N.length&&(m["!rows"]=N),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),h[u.name]=m,he=!1):g[0].charAt(g[0].length-2)!=="/"&&(u=St(g[0],!1),P=w=-1,b.s.r=b.s.c=1e7,b.e.r=b.e.c=0,m=r.dense?[]:{},S=[],N=[],he=!0);break;case"table-row-group":g[1]==="/"?--T:++T;break;case"table-row":case"":if(g[1]==="/"){P+=R,R=1;break}if(d=St(g[0],!1),d.?P=d.-1:P==-1&&(P=0),R=+d["number-rows-repeated"]||1,R<10)for(ue=0;ue<R;++ue)T>0&&(N[P+ue]={level:T});w=-1;break;case"covered-table-cell":g[1]!=="/"&&++w,r.sheetStubs&&(r.dense?(m[P]||(m[P]=[]),m[P][w]={t:"z"}):m[Pt({r:P,c:w})]={t:"z"}),x="",I=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++w,y=St(g[0],!1),F=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=q2(tr(y.formula))),(y.||y["value-type"])=="string"&&(v.t="s",v.v=tr(y["string-value"]||""),r.dense?(m[P]||(m[P]=[]),m[P][w]=v):m[Pt({r:P,c:w})]=v),w+=F-1;else if(g[1]!=="/"){++w,x="",E=0,I=[],F=1;var pe=R?P+R-1:P;if(w>b.e.c&&(b.e.c=w),w<b.s.c&&(b.s.c=w),P<b.s.r&&(b.s.r=P),pe>b.e.r&&(b.e.r=pe),y=St(g[0],!1),H=[],j={},v={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=tr(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(A=parseInt(y["number-matrix-rows-spanned"],10)||0,D=parseInt(y["number-matrix-columns-spanned"],10)||0,k={s:{r:P,c:w},e:{r:P+A-1,c:w+D-1}},v.F=er(k),O.push([k,v.F])),y.formula)v.f=q2(y.formula);else for(ue=0;ue<O.length;++ue)P>=O[ue][0].s.r&&P<=O[ue][0].e.r&&w>=O[ue][0].s.c&&w<=O[ue][0].e.c&&(v.F=O[ue][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(A=parseInt(y["number-rows-spanned"],10)||0,D=parseInt(y["number-columns-spanned"],10)||0,k={s:{r:P,c:w},e:{r:P+A-1,c:w+D-1}},S.push(k)),y["number-columns-repeated"]&&(F=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ar(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=fn(y["date-value"]),r.cellDates||(v.t="n",v.v=os(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=kX(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=Sp(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(x=tr(y["string-value"]),I=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(re=!1,v.t==="s"&&(v.v=x||"",I.length&&(v.R=I),re=E==0),V.Target&&(v.l=V),H.length>0&&(v.c=H,H=[]),x&&r.cellText!==!1&&(v.w=x),re&&(v.t="z",delete v.v),(!re||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=P))for(var te=0;te<R;++te){if(F=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(m[P+te]||(m[P+te]=[]),m[P+te][w]=te==0?v:Cn(v);--F>0;)m[P+te][w+F]=Cn(v);else for(m[Pt({r:P+te,c:w})]=v;--F>0;)m[Pt({r:P+te,c:w+F})]=Cn(v);b.e.c<=w&&(b.e.c=w)}F=parseInt(y["number-columns-repeated"]||"1",10),w+=F-1,F=0,v={},x="",I=[]}V={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i;j.t=x,I.length&&(j.R=I),j.a=W,H.push(j)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);W="",K=0,x="",E=0,I=[];break;case"creator":g[1]==="/"?W=n.slice(K,g.index):K=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);x="",E=0,I=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(_[o.name]=l,(i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(l="",o=St(g[0],!1),s.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":a=St(g[0],!1),l+=eS[g[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":a=St(g[0],!1),l+=eS[g[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,g.index);break}else c=g.index+g[0].length;break;case"named-range":a=St(g[0],!1),z=eg(a["cell-range-address"]);var Y={Name:a.name,Ref:z[0]+"!"+z[1]};he&&(Y.Sheet=p.length),B.Names.push(Y);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!y||!y["string-value"])){var Ee=gne(n.slice(E,g.index));x=(x.length>0?x+`
`:"")+Ee[0]}else St(g[0],!1),E=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{z=eg(St(g[0])["target-range-address"]),h[z[0]]["!autofilter"]={ref:z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(V=St(g[0],!1),!V.href)break;V.Target=tr(V.href),delete V.href,V.Target.charAt(0)=="#"&&V.Target.indexOf(".")>-1?(z=eg(V.Target.slice(1)),V.Target="#"+z[0]+"!"+z[1]):V.Target.match(/^\.\.[\\\/]/)&&(V.Target=V.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var X={Sheets:h,SheetNames:p,Workbook:B};return r.bookSheets&&delete X.Sheets,X}function tS(t,e){e=e||{},Fs(t,"META-INF/manifest.xml")&&FY(Kr(t,"META-INF/manifest.xml"),e);var r=_s(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=gk(xr(r),e);return Fs(t,"meta.xml")&&(n.Props=kI(Kr(t,"meta.xml"))),n}function rS(t,e){return gk(t,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Yx(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Av(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):xr(cl(t))}function Cv(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function nS(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function vne(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function Td(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function an(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Gn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=Td(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=Td(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function Jx(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function xne(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=Td(t,n),i=Gn(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:an(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=Gn(o.data),c=an(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=an(i[3][0].data)>>>0>0),r.push(a)}return r}function yne(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Td(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Cv(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var u=Cv(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function Ene(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(yne(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Cv(e)}function bne(t,e,r,n){var s=Yx(t),i=s.getUint32(4,!0),a=(n>1?12:8)+nS(i&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);i&512&&(o=s.getUint32(a,!0),a+=4),a+=nS(i&(n>1?12288:4096))*4,i&16&&(l=s.getUint32(a,!0),a+=4),i&32&&(c=s.getFloat64(a,!0),a+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(a,!0)*1e3),a+=8);var d;switch(t[2]){case 0:break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:e[l]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else if(l>-1)d={t:"s",v:e[l]};else if(!isNaN(c))d={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return d}function _ne(t,e,r){var n=Yx(t),s=n.getUint32(8,!0),i=12,a=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);s&1&&(l=vne(t,i),i+=16),s&2&&(c=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=n.getUint32(i,!0),i+=4),s&16&&(a=n.getUint32(i,!0),i+=4);var d;switch(t[1]){case 0:break;case 2:d={t:"n",v:l};break;case 3:d={t:"s",v:e[o]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(a>-1)d={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:d={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return d}function Sne(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return bne(t,e,r,t[0]);case 5:return _ne(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Qi(t){var e=Gn(t);return Td(e[1][0].data)}function sS(t,e){var r=Gn(e.data),n=an(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(a){var o=Gn(a.data),l=an(o[1][0].data)>>>0;switch(n){case 1:i[l]=Av(o[3][0].data);break;case 8:{var c=t[Qi(o[9][0].data)][0],u=Gn(c.data),d=t[Qi(u[1][0].data)][0],h=an(d.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=Gn(d.data);i[l]=p[3].map(function(m){return Av(m.data)}).join("")}break}}),i}function Tne(t,e){var r,n,s,i,a,o,l,c,u,d,h,p,m,g,v=Gn(t),y=an(v[1][0].data)>>>0,x=an(v[2][0].data)>>>0,E=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&an(v[8][0].data)>0||!1,I,P;if((i=(s=v[7])==null?void 0:s[0])!=null&&i.data&&e!=0)I=(o=(a=v[7])==null?void 0:a[0])==null?void 0:o.data,P=(c=(l=v[6])==null?void 0:l[0])==null?void 0:c.data;else if((d=(u=v[4])==null?void 0:u[0])!=null&&d.data&&e!=1)I=(p=(h=v[4])==null?void 0:h[0])==null?void 0:p.data,P=(g=(m=v[3])==null?void 0:m[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var w=E?4:1,b=Yx(I),T=[],_=0;_<I.length/2;++_){var S=b.getUint16(_*2,!0);S<65535&&T.push([_,S])}if(T.length!=x)throw"Expected ".concat(x," cells, found ").concat(T.length);var k=[];for(_=0;_<T.length-1;++_)k[T[_][0]]=P.subarray(T[_][1]*w,T[_+1][1]*w);return T.length>=1&&(k[T[T.length-1][0]]=P.subarray(T[T.length-1][1]*w)),{R:y,cells:k}}function wne(t,e){var r,n=Gn(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?an(n[7][0].data)>>>0>0?1:0:-1,i=Jx(n[5],function(a){return Tne(a,s)});return{nrows:an(n[4][0].data)>>>0,data:i.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function Ane(t,e,r){var n,s=Gn(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(an(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(an(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=er(i);var a=Gn(s[4][0].data),o=sS(t,t[Qi(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?sS(t,t[Qi(a[17][0].data)][0]):[],c=Gn(a[3][0].data),u=0;c[1].forEach(function(d){var h=Gn(d.data),p=t[Qi(h[2][0].data)][0],m=an(p.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var g=wne(t,p);g.data.forEach(function(v,y){v.forEach(function(x,E){var I=Pt({r:u+y,c:E}),P=Sne(x,o,l);P&&(r[I]=P)})}),u+=g.nrows})}function Cne(t,e){var r=Gn(e.data),n={"!ref":"A1"},s=t[Qi(r[2][0].data)],i=an(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Ane(t,s[0],n),n}function Ine(t,e){var r,n=Gn(e.data),s={name:(r=n[1])!=null&&r[0]?Av(n[1][0].data):"",sheets:[]},i=Jx(n[2],Qi);return i.forEach(function(a){t[a].forEach(function(o){var l=an(o.meta[1][0].data);l==6e3&&s.sheets.push(Cne(t,o))})}),s}function kne(t,e){var r=ey(),n=Gn(e.data),s=Jx(n[1],Qi);if(s.forEach(function(i){t[i].forEach(function(a){var o=an(a.meta[1][0].data);if(o==2){var l=Ine(t,a);l.sheets.forEach(function(c,u){ty(r,c,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function rg(t){var e,r,n,s,i={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Ene(l.content)}catch(d){return console.log("?? "+l.content.length+" "+(d.message||d))}var u;try{u=xne(c)}catch(d){return console.log("## "+(d.message||d))}u.forEach(function(d){i[d.id]=d.messages,a.push(d.id)})}}),!a.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&an(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||a.forEach(function(l){i[l].forEach(function(c){var u=an(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return kne(i,o)}function Dne(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function Qx(t){Dne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function Pne(t){return $l.WS.indexOf(t)>-1?"sheet":t==$l.CS?"chart":t==$l.DS?"dialog":t==$l.MS?"macro":t&&t.length?t:"sheet"}function Fne(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,Pne(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Rne(t,e,r,n,s,i,a,o,l,c,u,d){try{i[n]=Uu(_s(t,r,!0),e);var h=Kr(t,e),p;switch(o){case"sheet":p=Ure(h,e,s,l,i[n],c,u,d);break;case"chart":if(p=$re(h,e,s,l,i[n],c,u,d),!p||!p["!drawel"])break;var m=hu(p["!drawel"].Target,e),g=bv(m),v=BZ(_s(t,m,!0),Uu(_s(t,g,!0),m)),y=hu(v,m),x=bv(y);p=_re(_s(t,y,!0),y,l,Uu(_s(t,x,!0),y),c,p);break;case"macro":p=Vre(h,e,s,l,i[n],c,u,d);break;case"dialog":p=jre(h,e,s,l,i[n],c,u,d);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=p;var E=[];i&&i[n]&&Pa(i[n]).forEach(function(I){var P="";if(i[n][I].Type==$l.CMNT){P=hu(i[n][I].Target,e);var w=zre(Kr(t,P,!0),P,l);if(!w||!w.length)return;H2(p,w,!1)}i[n][I].Type==$l.TCMNT&&(P=hu(i[n][I].Target,e),E=E.concat($Z(Kr(t,P,!0),l)))}),E&&E.length&&H2(p,E,!0,l.people||[])}catch(I){if(l.WTF)throw I}}function ks(t){return t.charAt(0)=="/"?t.slice(1):t}function One(t,e){if(eI(),e=e||{},Qx(e),Fs(t,"META-INF/manifest.xml")||Fs(t,"objectdata.xml"))return tS(t,e);if(Fs(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof rg<"u"){if(t.FileIndex)return rg(t);var r=Qt.utils.cfb_new();return g2(t).forEach(function(N){NX(r,N,OX(t,N))}),rg(r)}throw new Error("Unsupported NUMBERS file")}if(!Fs(t,"[Content_Types].xml"))throw Fs(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Fs(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=g2(t),s=DY(_s(t,"[Content_Types].xml")),i=!1,a,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Kr(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Kr(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(ju=[],s.sst)try{ju=Wre(Kr(t,ks(s.sst)),s.sst,e)}catch(N){if(e.WTF)throw N}e.cellStyles&&s.themes.length&&(l=Gre(_s(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=Hre(Kr(t,ks(s.style)),s.style,l,e))}s.links.map(function(N){try{var R=Uu(_s(t,bv(ks(N))),N);return qre(Kr(t,ks(N)),R,N,e)}catch{}});var u=Bre(Kr(t,ks(s.workbooks[0])),s.workbooks[0],e),d={},h="";s.coreprops.length&&(h=Kr(t,ks(s.coreprops[0]),!0),h&&(d=kI(h)),s.extprops.length!==0&&(h=Kr(t,ks(s.extprops[0]),!0),h&&NY(h,d,e)));var p={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(h=_s(t,ks(s.custprops[0]),!0),h&&(p=LY(h,e)));var m={};if((e.bookSheets||e.bookProps)&&(u.Sheets?a=u.Sheets.map(function(R){return R.name}):d.Worksheets&&d.SheetNames.length>0&&(a=d.SheetNames),e.bookProps&&(m.Props=d,m.Custprops=p),e.bookSheets&&typeof a<"u"&&(m.SheetNames=a),e.bookSheets?m.SheetNames:e.bookProps))return m;a={};var g={};e.bookDeps&&s.calcchain&&(g=Kre(Kr(t,ks(s.calcchain)),s.calcchain));var v=0,y={},x,E;{var I=u.Sheets;d.Worksheets=I.length,d.SheetNames=[];for(var P=0;P!=I.length;++P)d.SheetNames[P]=I[P].name}var w=i?"bin":"xml",b=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,b+1)+"_rels/"+s.workbooks[0].slice(b+1)+".rels").replace(/^\//,"");Fs(t,T)||(T="xl/_rels/workbook."+w+".rels");var _=Uu(_s(t,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=Xre(Kr(t,ks(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=VZ(Kr(t,ks(s.people[0])),e)),_&&(_=Fne(_,u.Sheets));var S=Kr(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=d.Worksheets;++v){var k="sheet";if(_&&_[v]?(x="xl/"+_[v][1].replace(/[\/]?xl\//,""),Fs(t,x)||(x=_[v][1]),Fs(t,x)||(x=T.replace(/_rels\/.*$/,"")+_[v][1]),k=_[v][2]):(x="xl/worksheets/sheet"+(v+1-S)+"."+w,x=x.replace(/sheet0\./,"sheet.")),E=x.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(v!=e.sheets)continue e;break;case"string":if(d.SheetNames[v].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var A=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==v&&(A=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==d.SheetNames[v].toLowerCase()&&(A=1);if(!A)continue e}}Rne(t,x,E,d.SheetNames[v],v,y,a,k,e,u,l,c)}return m={Directory:s,Workbook:u,Props:d,Custprops:p,Deps:g,Sheets:a,SheetNames:d.SheetNames,Strings:ju,Styles:c,Themes:l,SSF:Cn(Nt)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(N,R){N=N.replace(/^Root Entry[\/]/,""),m.keys.push(N),m.files[N]=t.FileIndex[R]}))),e&&e.bookVBA&&(s.vba.length>0?m.vbaraw=Kr(t,ks(s.vba[0]),!0):s.defaults&&s.defaults.bin===WZ&&(m.vbaraw=Kr(t,"xl/vbaProject.bin",!0))),m}function Nne(t,e){var r=e||{},n="Workbook",s=Qt.find(t,n);try{if(n="/!DataSpaces/Version",s=Qt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(CQ(s.content),n="/!DataSpaces/DataSpaceMap",s=Qt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=kQ(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Qt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=DQ(s.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Qt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);FQ(s.content)}catch{}if(n="/EncryptionInfo",s=Qt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=RQ(s.content);if(n="/EncryptedPackage",s=Qt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Zx(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Cs(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Mne(t,e){return Qt.find(t,"EncryptedPackage")?Nne(t,e):hk(t,e)}function Lne(t,e){var r,n=t,s=e||{};return s.type||(s.type=Xt&&Buffer.isBuffer(t)?"buffer":"base64"),r=iI(n,s),One(r,s)}function vk(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Tv(t.slice(r),e);default:break e}return bd.to_workbook(t,e)}function Bne(t,e){var r="",n=Zx(t,e);switch(e.type){case"base64":r=Cs(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Yo(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=xr(r)),e.type="binary",vk(r,e)}function Une(t,e){var r=t;return e.type=="base64"&&(r=Cs(r)),r=vd.utils.decode(1200,r.slice(2),"str"),e.type="binary",vk(r,e)}function $ne(t){return t.match(/[^\x00-\x7F]/)?pu(t):t}function ng(t,e,r,n){return n?(r.type="string",bd.to_workbook(t,r)):bd.to_workbook(e,r)}function mh(t,e){j4();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return mh(new Uint8Array(t),(r=Cn(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),sc={},r.dateNF&&(sc.dateNF=r.dateNF),r.type||(r.type=Xt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Xt?"buffer":"binary",n=CX(t),typeof Uint8Array<"u"&&!Xt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=$ne(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=Cn(r),r.type="array",mh(Px(n),r)}switch((s=Zx(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Mne(Qt.read(n,r),r);break;case 9:if(s[1]<=8)return hk(n,r);break;case 60:return Tv(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return pQ(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return fQ.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Lne(n,r):ng(t,n,r,i);case 239:return s[3]===60?Tv(n,r):ng(t,n,r,i);case 255:if(s[1]===254)return Une(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Vu.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Vu.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return j2.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return WQ.to_workbook(n,r);break;case 10:case 13:case 32:return Bne(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return uQ.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?j2.to_workbook(n,r):ng(t,n,r,i)}function Vne(t,e,r,n,s,i,a,o){var l=In(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!a||t[r])for(var p=e.s.c;p<=e.e.c;++p){var m=a?t[r][p]:t[n[p]+l];if(m===void 0||m.t===void 0){if(c===void 0)continue;i[p]!=null&&(h[i[p]]=c);continue}var g=m.v;switch(m.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(i[p]!=null){if(g==null)if(m.t=="e"&&g===null)h[i[p]]=null;else if(c!==void 0)h[i[p]]=c;else if(u&&g===null)h[i[p]]=null;else continue;else h[i[p]]=u&&(m.t!=="n"||m.t==="n"&&o.rawNumbers!==!1)?g:yi(m,g,o);g!=null&&(d=!1)}}return{row:h,isempty:d}}function Iv(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=Lr(u);break;case"number":l=Lr(t["!ref"]),l.s.r=u;break;default:l=u}n>0&&(s=0);var d=In(l.s.r),h=[],p=[],m=0,g=0,v=Array.isArray(t),y=l.s.r,x=0,E={};v&&!t[y]&&(t[y]=[]);var I=c.skipHidden&&t["!cols"]||[],P=c.skipHidden&&t["!rows"]||[];for(x=l.s.c;x<=l.e.c;++x)if(!(I[x]||{}).hidden)switch(h[x]=sn(x),r=v?t[y][x]:t[h[x]+d],n){case 1:i[x]=x-l.s.c;break;case 2:i[x]=h[x];break;case 3:i[x]=c.header[x-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=yi(r,null,c),g=E[a]||0,!g)E[a]=1;else{do o=a+"_"+g++;while(E[o]);E[a]=g,E[o]=1}i[x]=o}for(y=l.s.r+s;y<=l.e.r;++y)if(!(P[y]||{}).hidden){var w=Vne(t,l,y,h,n,i,v,c);(w.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(p[m++]=w.row)}return p.length=m,p}var aS=/"/g;function jne(t,e,r,n,s,i,a,o){for(var l=!0,c=[],u="",d=In(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var p=o.dense?(t[r]||[])[h]:t[n[h]+d];if(p==null)u="";else if(p.v!=null){l=!1,u=""+(o.rawNumbers&&p.t=="n"?p.v:yi(p,null,o));for(var m=0,g=0;m!==u.length;++m)if((g=u.charCodeAt(m))===s||g===i||g===34||o.forceQuotes){u='"'+u.replace(aS,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(l=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(aS,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(a)}function xk(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Lr(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),u="",d=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],p=n.skipHidden&&t["!rows"]||[],m=s.s.c;m<=s.e.c;++m)(h[m]||{}).hidden||(d[m]=sn(m));for(var g=0,v=s.s.r;v<=s.e.r;++v)(p[v]||{}).hidden||(u=jne(t,s,v,d,a,l,i,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((g++?o:"")+u)));return delete n.dense,r.join("")}function Hne(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=xk(t,e);return r}function Gne(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Lr(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=sn(o);for(var u=s.s.r;u<=s.e.r;++u)for(i=In(u),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[u]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function yk(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?ss(n.origin):n.origin;a=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var d=Lr(i["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),a==-1&&(a=d.e.r+1,u.e.r=a+e.length-1+s)}else a==-1&&(a=0,u.e.r=e.length-1+s);var h=n.header||[],p=0;e.forEach(function(g,v){Pa(g).forEach(function(y){(p=h.indexOf(y))==-1&&(h[p=h.length]=y);var x=g[y],E="z",I="",P=Pt({c:o+p,r:a+v+s});c=wd(i,P),x&&typeof x=="object"&&!(x instanceof Date)?i[P]=x:(typeof x=="number"?E="n":typeof x=="boolean"?E="b":typeof x=="string"?E="s":x instanceof Date?(E="d",n.cellDates||(E="n",x=os(x)),I=n.dateNF||Nt[14]):x===null&&n.nullError&&(E="e",x=0),c?(c.t=E,c.v=x,delete c.w,delete c.R,I&&(c.z=I)):i[P]=c={t:E,v:x},I&&(c.z=I))})}),u.e.c=Math.max(u.e.c,o+h.length-1);var m=In(a);if(s)for(p=0;p<h.length;++p)i[sn(p+o)+m]={t:"s",v:h[p]};return i["!ref"]=er(u),i}function Wne(t,e){return yk(null,t,e)}function wd(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=ss(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?wd(t,Pt(e)):wd(t,Pt({r:e,c:r||0}))}function zne(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function ey(){return{SheetNames:[],Sheets:{}}}function ty(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(Dre(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Kne(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=zne(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function qne(t,e){return t.z=e,t}function Ek(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Xne(t,e,r){return Ek(t,"#"+e,r)}function Yne(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Jne(t,e,r,n){for(var s=typeof e!="string"?e:Lr(e),i=typeof e=="string"?e:er(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=wd(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Qne={encode_col:sn,encode_row:In,encode_cell:Pt,encode_range:er,decode_col:$x,decode_row:Ux,split_cell:cY,decode_cell:ss,decode_range:Mc,format_cell:yi,sheet_add_aoa:TI,sheet_add_json:yk,sheet_add_dom:pk,aoa_to_sheet:Lc,json_to_sheet:Wne,table_to_sheet:mk,table_to_book:pne,sheet_to_csv:xk,sheet_to_txt:Hne,sheet_to_json:Iv,sheet_to_html:hne,sheet_to_formulae:Gne,sheet_to_row_object_array:Iv,sheet_get_cell:wd,book_new:ey,book_append_sheet:ty,book_set_sheet_visibility:Kne,cell_set_number_format:qne,cell_set_hyperlink:Ek,cell_set_internal_link:Xne,cell_add_comment:Yne,sheet_set_array_formula:Jne,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Zne={class:"admin-time-table"},ese={class:"header"},tse={class:"admin-action-btns"},rse=["disabled"],nse={class:"import-section"},sse={key:0,class:"import-preview"},ase={class:"import-options"},ise={class:"import-option-group"},ose=["disabled"],lse=["value"],cse={class:"import-option-group"},use=["disabled"],dse={class:"import-actions"},fse=["disabled"],hse={class:"content"},pse={key:0,class:"loading"},mse={key:1,class:"time-tables-container"},gse={key:0,class:"empty-state"},vse={key:1,class:"time-tables-list"},xse={class:"time-table-header"},yse={class:"time-table-info"},Ese={class:"time-table-days"},bse={class:"admin-action-btns"},_se=["onClick"],Sse=["onClick"],Tse={class:"time-table-schedule"},wse={class:"schedule-item-info"},Ase={class:"item-name"},Cse={class:"item-time"},Ise={class:"schedule-item-type"},kse={class:"dialog-header"},Dse={class:"dialog-content"},Pse={class:"form-group"},Fse={class:"form-group"},Rse={class:"days-checkboxes"},Ose=["value"],Nse={class:"form-group"},Mse={class:"schedule-items"},Lse={class:"item-row"},Bse=["onUpdate:modelValue"],Use=["onUpdate:modelValue"],$se=["onUpdate:modelValue"],Vse=["onUpdate:modelValue"],jse=["onClick"],Hse={__name:"AdminTimeTable",setup(t){const{saveAppSettings:e}=Hs(),r=ne(!0),n=ne(!1),s=ne([]),i=ne(!1),a=ne(-1),o=ne({name:"",days:[],schedule:[]}),l=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],c=ne(null),u=ne([]),d=ne([]),h=ne("overwrite"),p=ne(""),m=ne(""),g=_e(()=>h.value==="overwrite"?p.value!=="":m.value.trim()!==""),v=()=>{const O=un(o.value.name,{trim:!0,maxLength:100,removeDangerous:!0}),B=Hr(O);if(!B.isSafe)return alert(`Security threat detected in time table name: ${B.threats.join(", ")}`),!1;if(o.value.name=O,!o.value.name.trim())return alert("Please enter a time table name"),!1;if(o.value.days.length===0)return alert("Please select at least one day"),!1;if(o.value.schedule.length===0)return alert("Please add at least one schedule item"),!1;for(let V=0;V<o.value.schedule.length;V++){const z=o.value.schedule[V],H=un(z.name,{trim:!0,maxLength:50,removeDangerous:!0}),j=Hr(H);if(!j.isSafe)return alert(`Security threat detected in schedule item ${V+1}: ${j.threats.join(", ")}`),!1;if(z.name=H,!z.name.trim())return alert(`Please enter a name for schedule item ${V+1}`),!1;if(!z.startTime||!z.endTime)return alert(`Please enter start and end times for ${z.name}`),!1;if(z.startTime>=z.endTime)return alert(`${z.name}: Start time must be before end time`),!1}return!0},y=O=>{const B=un(O,{trim:!0,maxLength:100,removeDangerous:!0}),V=Hr(B);return V.isSafe?B:(alert(`Security threat detected in import name: ${V.threats.join(", ")}`),null)};async function x(){try{console.log("Loading time tables..."),r.value=!0;const O=await Zt(Qe(Xe,"app_settings","global"));if(O.exists()){const B=O.data();s.value=B.timeTables||[],console.log("Loaded time tables:",s.value)}else s.value=[],console.log("No time tables found, starting with empty array");r.value=!1}catch(O){console.error("Error loading time tables:",O),r.value=!1}}function E(){a.value=-1,o.value={name:"",days:[],schedule:[]},i.value=!0}function I(O){a.value=O,o.value=JSON.parse(JSON.stringify(s.value[O])),i.value=!0}function P(O){confirm("Are you sure you want to delete this time table?")&&s.value.splice(O,1)}function w(){o.value.schedule.push({name:"",type:"period",startTime:"",endTime:""})}function b(O){o.value.schedule.splice(O,1)}function T(){if(!v())return;if(!Ts("saveTimeTable",10,6e4).allowed){alert("Too many save requests. Please wait before saving again.");return}a.value===-1?s.value.push(JSON.parse(JSON.stringify(o.value))):s.value[a.value]=JSON.parse(JSON.stringify(o.value)),_()}function _(){i.value=!1,a.value=-1,o.value={name:"",days:[],schedule:[]}}async function S(){try{if(!Ts("saveAllTimeTables",5,3e5).allowed){alert("Too many save all requests. Please wait before saving again.");return}n.value=!0,console.log("Saving time tables:",s.value);const B=await Zt(Qe(Xe,"app_settings","global")),z={...B.exists()?B.data():{},timeTables:s.value};await e(z),n.value=!1,console.log("Time tables saved successfully")}catch(O){console.error("Error saving time tables:",O),n.value=!1}}function k(O){return O.length===0?"No days selected":O.length===7?"Every day":O.length===5&&O.includes("monday")&&O.includes("friday")?"Weekdays":O.map(B=>{const V=l.find(z=>z.value===B);return V?V.label:B}).join(", ")}function A(O){if(!O)return"";const[B,V]=O.split(":"),z=parseInt(B),H=z>=12?"PM":"AM";return`${z===0?12:z>12?z-12:z}:${V} ${H}`}function D(){c.value&&c.value.click()}function N(O){const B=O.target.files[0];if(!B)return;const V=Oc(B,{allowedTypes:["csv","excel"],maxSize:5*1024*1024,fieldName:"Time Table Import File"});if(!V.isValid){alert(V.error),O.target.value="";return}const z=Hr(B.name);if(!z.isSafe){alert(`File name contains potentially dangerous content: ${z.threats.join(", ")}`),O.target.value="";return}const H=new FileReader;H.onload=j=>{try{let W=j.target.result,K;B.name.endsWith(".csv")?K=mh(W,{type:"binary"}):K=mh(W,{type:"binary"});const re=K.SheetNames[0],he=K.Sheets[re],pe=Qne.sheet_to_json(he,{defval:""}).map(te=>{const Y={};return Object.entries(te).forEach(([Ee,X])=>{const q=un(Ee,{trim:!0,maxLength:50,removeDangerous:!0}),J=un(String(X),{trim:!0,maxLength:100,removeDangerous:!0});Y[q]=J}),Y});u.value=pe,d.value=pe.length?Object.keys(pe[0]):[]}catch(W){alert("Error parsing file. Please check the file format and try again."),console.error("File parsing error:",W)}},H.readAsBinaryString(B)}function R(){try{if(!Ts("importTimeTable",3,3e5).allowed){alert("Too many import requests. Please wait before importing again.");return}const B=u.value.map(V=>{const z=V.name||V.Name||V.period||V.Period||V.item||V.Item||"Unknown",H=V.startTime||V["Start Time"]||V.start||V.Start||"08:00",j=V.endTime||V["End Time"]||V.end||V.End||"08:55",W=un(z,{trim:!0,maxLength:50,removeDangerous:!0}),K=Hr(W);if(!K.isSafe)return console.warn(`Security threat detected in imported item: ${K.threats.join(", ")}`),null;let re="period";const he=V.type||V.Type||"",ue=W.toLowerCase();return he.toLowerCase().includes("lunch")||ue.includes("lunch")?re="lunch":he.toLowerCase().includes("break")||ue.includes("break")?re="break":(he.toLowerCase().includes("other")||ue.includes("other"))&&(re="other"),{name:W,type:re,startTime:H,endTime:j}}).filter(V=>V&&V.name&&V.name!=="Unknown");if(B.length===0){alert("No valid schedule items found in the imported data. Please check your file format.");return}if(h.value==="overwrite"){if(p.value===""){alert("Please select a time table to overwrite");return}const V=parseInt(p.value);s.value[V]={...s.value[V],schedule:B}}else{const V=y(m.value);if(!V)return;const z={name:V,days:["monday","tuesday","wednesday","thursday","friday"],schedule:B};s.value.push(z)}u.value=[],d.value=[],h.value="overwrite",p.value="",m.value="",alert("Time table imported successfully!")}catch(O){console.error("Error importing time table:",O),alert("Error importing time table. Please check your file format and try again.")}}function F(){u.value=[],d.value=[],h.value="overwrite",p.value="",m.value=""}return Bt(x),(O,B)=>(L(),U("div",Zne,[f("div",ese,[B[7]||(B[7]=f("h1",null,"Time Table Management",-1)),f("div",tse,[f("button",{onClick:S,class:"admin-action-btn primary",disabled:n.value,style:{"min-width":"160px","max-width":"160px"}},Q(n.value?"Saving...":"Save Time Tables"),9,rse),f("button",{onClick:E,class:"admin-action-btn secondary",style:{"min-width":"140px","max-width":"140px"}}," Add Time Table ")])]),f("div",nse,[f("button",{onClick:D,class:"admin-action-btn info",style:{"min-width":"150px","max-width":"150px"}},"Import CSV/XLSX"),f("input",{ref_key:"fileInput",ref:c,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:N},null,544),B[8]||(B[8]=f("div",{class:"import-note"}," You can export from Google Sheets or Excel as CSV, or upload your Excel file directly. ",-1))]),u.value.length?(L(),U("div",sse,[B[13]||(B[13]=f("h3",null,"Preview Imported Time Table",-1)),f("table",null,[f("thead",null,[f("tr",null,[(L(!0),U(Fe,null,Ve(d.value,V=>(L(),U("th",{key:V},Q(V),1))),128))])]),f("tbody",null,[(L(!0),U(Fe,null,Ve(u.value,(V,z)=>(L(),U("tr",{key:z},[(L(!0),U(Fe,null,Ve(d.value,H=>(L(),U("td",{key:H},Q(V[H]),1))),128))]))),128))])]),f("div",ase,[B[12]||(B[12]=f("h4",null,"Import Options",-1)),f("div",ise,[f("label",null,[Ae(f("input",{type:"radio","onUpdate:modelValue":B[0]||(B[0]=V=>h.value=V),value:"overwrite"},null,512),[[hi,h.value]]),B[9]||(B[9]=Oe(" Overwrite existing time table: "))]),Ae(f("select",{"onUpdate:modelValue":B[1]||(B[1]=V=>p.value=V),disabled:h.value!=="overwrite",class:"form-select"},[B[10]||(B[10]=f("option",{value:""},"Select a time table...",-1)),(L(!0),U(Fe,null,Ve(s.value,(V,z)=>(L(),U("option",{key:z,value:z},Q(V.name),9,lse))),128))],8,ose),[[hr,p.value]])]),f("div",cse,[f("label",null,[Ae(f("input",{type:"radio","onUpdate:modelValue":B[2]||(B[2]=V=>h.value=V),value:"create"},null,512),[[hi,h.value]]),B[11]||(B[11]=Oe(" Create new time table: "))]),Ae(f("input",{"onUpdate:modelValue":B[3]||(B[3]=V=>m.value=V),type:"text",placeholder:"Enter time table name...",disabled:h.value!=="create",class:"form-input"},null,8,use),[[Je,m.value]])])]),f("div",dse,[f("button",{onClick:R,class:"btn btn-primary",disabled:!g.value},Q(h.value==="overwrite"?"Overwrite Time Table":"Create New Time Table"),9,fse),f("button",{onClick:F,class:"btn btn-secondary"},"Cancel")])])):Se("",!0),f("div",hse,[r.value?(L(),U("div",pse," Loading time tables... ")):(L(),U("div",mse,[s.value.length===0?(L(),U("div",gse,[B[14]||(B[14]=f("h3",null,"No Time Tables Created",-1)),B[15]||(B[15]=f("p",null,"Create your first time table to get started.",-1)),f("button",{onClick:E,class:"btn btn-primary"},"Create Time Table")])):(L(),U("div",vse,[(L(!0),U(Fe,null,Ve(s.value,(V,z)=>(L(),U("div",{key:z,class:"time-table-card"},[f("div",xse,[f("div",yse,[f("h3",null,Q(V.name),1),f("p",Ese,Q(k(V.days)),1)]),f("div",bse,[f("button",{onClick:H=>I(z),class:"admin-action-btn edit"}," Edit ",8,_se),f("button",{onClick:H=>P(z),class:"admin-action-btn delete"}," Delete ",8,Sse)])]),f("div",Tse,[(L(!0),U(Fe,null,Ve(V.schedule,(H,j)=>(L(),U("div",{key:j,class:"schedule-item"},[f("div",wse,[f("span",Ase,Q(H.name),1),f("span",Cse,Q(A(H.startTime))+" - "+Q(A(H.endTime)),1)]),f("div",Ise,[f("span",{class:Ze(["type-badge",H.type])},Q(H.type),3)])]))),128))])]))),128))]))]))]),i.value?(L(),U("div",{key:1,class:"edit-dialog-overlay",onClick:_},[f("div",{class:"edit-dialog",onClick:B[6]||(B[6]=hn(()=>{},["stop"]))},[f("div",kse,[f("h2",null,Q(a.value===-1?"Create Time Table":"Edit Time Table"),1),f("button",{onClick:_,class:"btn-close"},"")]),f("div",Dse,[f("div",Pse,[B[16]||(B[16]=f("label",{for:"timeTableName"},"Time Table Name",-1)),Ae(f("input",{id:"timeTableName","onUpdate:modelValue":B[4]||(B[4]=V=>o.value.name=V),type:"text",placeholder:"e.g., Regular Schedule, Rally Day, Minimum Day",class:"form-input"},null,512),[[Je,o.value.name]])]),f("div",Fse,[B[17]||(B[17]=f("label",null,"Days This Schedule Applies",-1)),f("div",Rse,[(L(),U(Fe,null,Ve(l,V=>f("label",{key:V.value,class:"day-checkbox"},[Ae(f("input",{type:"checkbox",value:V.value,"onUpdate:modelValue":B[5]||(B[5]=z=>o.value.days=z)},null,8,Ose),[[Et,o.value.days]]),Oe(" "+Q(V.label),1)])),64))])]),f("div",Nse,[B[20]||(B[20]=f("label",null,"Schedule Items",-1)),f("div",Mse,[(L(!0),U(Fe,null,Ve(o.value.schedule,(V,z)=>(L(),U("div",{key:z,class:"schedule-item-edit"},[f("div",Lse,[Ae(f("input",{"onUpdate:modelValue":H=>V.name=H,type:"text",placeholder:"Period 1, Lunch, Break, etc.",class:"form-input item-name-input"},null,8,Bse),[[Je,V.name]]),Ae(f("select",{"onUpdate:modelValue":H=>V.type=H,class:"form-select item-type-select"},B[18]||(B[18]=[f("option",{value:"period"},"Period",-1),f("option",{value:"break"},"Break",-1),f("option",{value:"lunch"},"Lunch",-1),f("option",{value:"other"},"Other",-1)]),8,Use),[[hr,V.type]]),Ae(f("input",{"onUpdate:modelValue":H=>V.startTime=H,type:"time",class:"form-input time-input"},null,8,$se),[[Je,V.startTime]]),B[19]||(B[19]=f("span",{class:"time-separator"},"to",-1)),Ae(f("input",{"onUpdate:modelValue":H=>V.endTime=H,type:"time",class:"form-input time-input"},null,8,Vse),[[Je,V.endTime]]),f("button",{onClick:H=>b(z),class:"admin-action-btn delete"}," Delete ",8,jse)])]))),128)),f("button",{onClick:w,class:"admin-action-btn secondary",style:{"min-width":"150px","max-width":"150px"}}," Add Schedule Item ")])])]),f("div",{class:"admin-action-btns"},[f("button",{onClick:_,class:"admin-action-btn cancel",style:{"min-width":"100px","max-width":"100px"}},"Cancel"),f("button",{onClick:T,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},"Save Time Table")])])])):Se("",!0)]))}},bk=xt(Hse,[["__scopeId","data-v-428c8e72"]]);function Gse(){const t=ne({}),e=ne(!1);async function r(){e.value=!0;try{const d=await jt(wt(Xe,"aideSchedules")),h={};d.forEach(p=>{h[p.id]=p.data()}),t.value=h}catch(d){console.error("Error loading aide schedules:",d),t.value={}}finally{e.value=!1}}async function n(d){e.value=!0;try{const h=await Zt(Qe(Xe,"aideSchedules",d));h.exists()?t.value[d]=h.data():t.value[d]={schedule:{},directAssignment:[]}}catch(h){console.error("Error loading aide schedule:",h),t.value[d]={schedule:{},directAssignment:[]}}finally{e.value=!1}}async function s(d,h,p=!0){try{const m=JSON.parse(JSON.stringify(h));p?await Wt(Qe(Xe,"aideSchedules",d),m,{merge:!0}):await Wt(Qe(Xe,"aideSchedules",d),m),t.value[d]=m}catch(m){throw console.error("Error saving aide schedule:",m),m}}async function i(){try{const d=Object.entries(t.value);for(const[h,p]of d){const m=JSON.parse(JSON.stringify(p));await Wt(Qe(Xe,"aideSchedules",h),m,{merge:!0})}}catch(d){throw console.error("Error saving all aide schedules:",d),d}}function a(d,h){const p=[];return Object.entries(t.value).forEach(([m,g])=>{g.schedule&&g.schedule[h]&&(Array.isArray(g.schedule[h])?g.schedule[h]:[g.schedule[h]]).includes(d)&&p.push(m)}),p}function o(d){var p;const h=(p=t.value[d])==null?void 0:p.directAssignment;return Array.isArray(h)?h.length>0?h[0]:null:h||null}function l(d){return Object.keys(t.value).find(p=>{var g;const m=(g=t.value[p])==null?void 0:g.directAssignment;return Array.isArray(m)?m.includes(d):m===d})||null}function c(d,h,p){const m=[],g=t.value[d];return g&&((Array.isArray(g.directAssignment)?g.directAssignment:g.directAssignment?[g.directAssignment]:[]).forEach(y=>{if(y){const x=h.find(E=>E.id===y);x&&m.push({...x,assignmentType:"direct"})}}),Object.entries(g.schedule||{}).forEach(([y,x])=>{x&&(Array.isArray(x)?x:[x]).forEach(I=>{I&&h.forEach(P=>{if(P.schedule&&P.schedule[y]===I){const w=m.findIndex(b=>b.id===P.id);w===-1?m.push({...P,assignmentType:"class",period:y,teacherId:I}):(m[w].assignmentType="both",m[w].period=y,m[w].teacherId=I)}})})})),m}function u(d,h,p,m){if(!d||!h||!p||!m)return!1;const g=p.find(I=>I.id===h);if(!g)return!1;const v=t.value[d];if(!v)return!1;if((Array.isArray(v.directAssignment)?v.directAssignment:v.directAssignment?[v.directAssignment]:[]).includes(h))return!0;if(!g.schedule)return!1;const x=v.schedule||{};return Object.entries(g.schedule).some(([I,P])=>{const w=x[I];return w?(Array.isArray(w)?w:[w]).includes(P):!1})}return{aideSchedule:_e(()=>t.value),loading:_e(()=>e.value),loadAideSchedules:r,loadAideSchedule:n,saveAideSchedule:s,saveAllAideSchedules:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}var Wse={exports:{}};const zse=Tx(PF);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function iS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Fa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iS(Object(r),!0).forEach(function(n){Kse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m0=function(e){return typeof e}:m0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m0(t)}function Kse(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vs(){return Vs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vs.apply(this,arguments)}function qse(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Xse(t,e){if(t==null)return{};var r=qse(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yse(t){return Jse(t)||Qse(t)||Zse(t)||eae()}function Jse(t){if(Array.isArray(t))return kv(t)}function Qse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zse(t,e){if(t){if(typeof t=="string")return kv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kv(t,e)}}function kv(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function eae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tae="1.14.0";function oi(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Si=oi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),rf=oi(/Edge/i),oS=oi(/firefox/i),Wu=oi(/safari/i)&&!oi(/chrome/i)&&!oi(/android/i),_k=oi(/iP(ad|od|hone)/i),rae=oi(/chrome/i)&&oi(/android/i),Sk={capture:!1,passive:!1};function Ht(t,e,r){t.addEventListener(e,r,!Si&&Sk)}function Vt(t,e,r){t.removeEventListener(e,r,!Si&&Sk)}function gh(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function nae(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Qs(t,e,r,n){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&gh(t,e):gh(t,e))||n&&t===r)return t;if(t===r)break}while(t=nae(t))}return null}var lS=/\s+/g;function kr(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(lS," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(lS," ")}}function pt(t,e,r){var n=t&&t.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=r+(typeof r=="string"?"":"px")}}function Uo(t,e){var r="";if(typeof t=="string")r=t;else do{var n=pt(t,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function Tk(t,e,r){if(t){var n=t.getElementsByTagName(e),s=0,i=n.length;if(r)for(;s<i;s++)r(n[s],s);return n}return[]}function Ca(){var t=document.scrollingElement;return t||document.documentElement}function Cr(t,e,r,n,s){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,o,l,c,u,d;if(t!==window&&t.parentNode&&t!==Ca()?(i=t.getBoundingClientRect(),a=i.top,o=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||r)&&t!==window&&(s=s||t.parentNode,!Si))do if(s&&s.getBoundingClientRect&&(pt(s,"transform")!=="none"||r&&pt(s,"position")!=="static")){var h=s.getBoundingClientRect();a-=h.top+parseInt(pt(s,"border-top-width")),o-=h.left+parseInt(pt(s,"border-left-width")),l=a+i.height,c=o+i.width;break}while(s=s.parentNode);if(n&&t!==window){var p=Uo(s||t),m=p&&p.a,g=p&&p.d;p&&(a/=g,o/=m,d/=m,u/=g,l=a+u,c=o+d)}return{top:a,left:o,bottom:l,right:c,width:d,height:u}}}function cS(t,e,r){for(var n=Ki(t,!0),s=Cr(t)[e];n;){var i=Cr(n)[r],a=void 0;if(a=s>=i,!a)return n;if(n===Ca())break;n=Ki(n,!1)}return!1}function Sc(t,e,r,n){for(var s=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==_t.ghost&&(n||a[i]!==_t.dragged)&&Qs(a[i],r.draggable,t,!1)){if(s===e)return a[i];s++}i++}return null}function ry(t,e){for(var r=t.lastElementChild;r&&(r===_t.ghost||pt(r,"display")==="none"||e&&!gh(r,e));)r=r.previousElementSibling;return r||null}function Or(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==_t.clone&&(!e||gh(t,e))&&r++;return r}function uS(t){var e=0,r=0,n=Ca();if(t)do{var s=Uo(t),i=s.a,a=s.d;e+=t.scrollLeft*i,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function sae(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r)}return-1}function Ki(t,e){if(!t||!t.getBoundingClientRect)return Ca();var r=t,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=pt(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return Ca();if(n||e)return r;n=!0}}while(r=r.parentNode);return Ca()}function aae(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function sg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var zu;function wk(t,e){return function(){if(!zu){var r=arguments,n=this;r.length===1?t.call(n,r[0]):t.apply(n,r),zu=setTimeout(function(){zu=void 0},e)}}}function iae(){clearTimeout(zu),zu=void 0}function Ak(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function ny(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function dS(t,e){pt(t,"position","absolute"),pt(t,"top",e.top),pt(t,"left",e.left),pt(t,"width",e.width),pt(t,"height",e.height)}function ag(t){pt(t,"position",""),pt(t,"top",""),pt(t,"left",""),pt(t,"width",""),pt(t,"height","")}var Vn="Sortable"+new Date().getTime();function oae(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(pt(s,"display")==="none"||s===_t.ghost)){t.push({target:s,rect:Cr(s)});var i=Fa({},t[t.length-1].rect);if(s.thisAnimationDuration){var a=Uo(s,!0);a&&(i.top-=a.f,i.left-=a.e)}s.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(sae(t,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,a=0;t.forEach(function(o){var l=0,c=o.target,u=c.fromRect,d=Cr(c),h=c.prevFromRect,p=c.prevToRect,m=o.rect,g=Uo(c,!0);g&&(d.top-=g.f,d.left-=g.e),c.toRect=d,c.thisAnimationDuration&&sg(h,d)&&!sg(u,d)&&(m.top-d.top)/(m.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=cae(m,h,p,s.options)),sg(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=s.options.animation),s.animate(c,m,d,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,s,i,a){if(a){pt(n,"transition",""),pt(n,"transform","");var o=Uo(this.el),l=o&&o.a,c=o&&o.d,u=(s.left-i.left)/(l||1),d=(s.top-i.top)/(c||1);n.animatingX=!!u,n.animatingY=!!d,pt(n,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=lae(n),pt(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),pt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){pt(n,"transition",""),pt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function lae(t){return t.offsetWidth}function cae(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}var Al=[],ig={initializeByDefault:!0},nf={mount:function(e){for(var r in ig)ig.hasOwnProperty(r)&&!(r in e)&&(e[r]=ig[r]);Al.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Al.push(e)},pluginEvent:function(e,r,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var i=e+"Global";Al.forEach(function(a){r[a.pluginName]&&(r[a.pluginName][i]&&r[a.pluginName][i](Fa({sortable:r},n)),r.options[a.pluginName]&&r[a.pluginName][e]&&r[a.pluginName][e](Fa({sortable:r},n)))})},initializePlugins:function(e,r,n,s){Al.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,r,e.options);c.sortable=e,c.options=e.options,e[l]=c,Vs(n,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,r){var n={};return Al.forEach(function(s){typeof s.eventProperties=="function"&&Vs(n,s.eventProperties.call(r[s.pluginName],e))}),n},modifyOption:function(e,r,n){var s;return Al.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(s=i.optionListeners[r].call(e[i.pluginName],n))}),s}};function mu(t){var e=t.sortable,r=t.rootEl,n=t.name,s=t.targetEl,i=t.cloneEl,a=t.toEl,o=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,p=t.putSortable,m=t.extraEventProperties;if(e=e||r&&r[Vn],!!e){var g,v=e.options,y="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Si&&!rf?g=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(n,!0,!0)),g.to=a||r,g.from=o||r,g.item=s||r,g.clone=i,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=h,g.pullMode=p?p.lastPutMode:void 0;var x=Fa(Fa({},m),nf.getEventProperties(n,e));for(var E in x)g[E]=x[E];r&&r.dispatchEvent(g),v[y]&&v[y].call(e,g)}}var uae=["evt"],cs=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,i=Xse(n,uae);nf.pluginEvent.bind(_t)(e,r,Fa({dragEl:rt,parentEl:Fr,ghostEl:Ot,rootEl:wr,nextEl:wo,lastDownEl:g0,cloneEl:Rr,cloneHidden:Hi,dragStarted:gu,putSortable:xn,activeSortable:_t.active,originalEvent:s,oldIndex:Vl,oldDraggableIndex:Ku,newIndex:Es,newDraggableIndex:$i,hideGhostForTarget:Dk,unhideGhostForTarget:Pk,cloneNowHidden:function(){Hi=!0},cloneNowShown:function(){Hi=!1},dispatchSortableEvent:function(o){Zn({sortable:r,name:o,originalEvent:s})}},i))};function Zn(t){mu(Fa({putSortable:xn,cloneEl:Rr,targetEl:rt,rootEl:wr,oldIndex:Vl,oldDraggableIndex:Ku,newIndex:Es,newDraggableIndex:$i},t))}var rt,Fr,Ot,wr,wo,g0,Rr,Hi,Vl,Es,Ku,$i,Gf,xn,Ml=!1,vh=!1,xh=[],_o,Ys,og,lg,fS,hS,gu,Cl,qu,Xu=!1,Wf=!1,v0,On,cg=[],Dv=!1,yh=[],Cp=typeof document<"u",zf=_k,pS=rf||Si?"cssFloat":"float",dae=Cp&&!rae&&!_k&&"draggable"in document.createElement("div"),Ck=function(){if(Cp){if(Si)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Ik=function(e,r){var n=pt(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Sc(e,0,r),a=Sc(e,1,r),o=i&&pt(i),l=a&&pt(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+Cr(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Cr(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&o.float!=="none"){var d=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=s&&n[pS]==="none"||a&&n[pS]==="none"&&c+u>s)?"vertical":"horizontal"},fae=function(e,r,n){var s=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?r.left:r.top,l=n?r.right:r.bottom,c=n?r.width:r.height;return s===o||i===l||s+a/2===o+c/2},hae=function(e,r){var n;return xh.some(function(s){var i=s[Vn].options.emptyInsertThreshold;if(!(!i||ry(s))){var a=Cr(s),o=e>=a.left-i&&e<=a.right+i,l=r>=a.top-i&&r<=a.bottom+i;if(o&&l)return n=s}}),n},kk=function(e){function r(i,a){return function(o,l,c,u){var d=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(i==null&&(a||d))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return r(i(o,l,c,u),a)(o,l,c,u);var h=(a?o:l).options.group.name;return i===!0||typeof i=="string"&&i===h||i.join&&i.indexOf(h)>-1}}var n={},s=e.group;(!s||m0(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=r(s.pull,!0),n.checkPut=r(s.put),n.revertClone=s.revertClone,e.group=n},Dk=function(){!Ck&&Ot&&pt(Ot,"display","none")},Pk=function(){!Ck&&Ot&&pt(Ot,"display","")};Cp&&document.addEventListener("click",function(t){if(vh)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),vh=!1,!1},!0);var So=function(e){if(rt){e=e.touches?e.touches[0]:e;var r=hae(e.clientX,e.clientY);if(r){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[Vn]._onDragOver(n)}}},pae=function(e){rt&&rt.parentNode[Vn]._isOutsideThisEl(e.target)};function _t(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Vs({},e),t[Vn]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ik(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_t.supportPointer!==!1&&"PointerEvent"in window&&!Wu,emptyInsertThreshold:5};nf.initializePlugins(this,t,r);for(var n in r)!(n in e)&&(e[n]=r[n]);kk(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:dae,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ht(t,"pointerdown",this._onTapStart):(Ht(t,"mousedown",this._onTapStart),Ht(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ht(t,"dragover",this),Ht(t,"dragenter",this)),xh.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Vs(this,oae())}_t.prototype={constructor:_t,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Cl=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,rt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,s=this.options,i=s.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=s.filter;if(_ae(n),!rt&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Wu&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Qs(l,s.draggable,n,!1),!(l&&l.animated)&&g0!==l)){if(Vl=Or(l),Ku=Or(l,s.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Zn({sortable:r,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),cs("filter",r,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=Qs(c,d.trim(),n,!1),d)return Zn({sortable:r,rootEl:d,name:"filter",targetEl:l,fromEl:n,toEl:n}),cs("filter",r,{evt:e}),!0}),u)){i&&e.cancelable&&e.preventDefault();return}s.handle&&!Qs(c,s.handle,n,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,r,n){var s=this,i=s.el,a=s.options,o=i.ownerDocument,l;if(n&&!rt&&n.parentNode===i){var c=Cr(n);if(wr=i,rt=n,Fr=rt.parentNode,wo=rt.nextSibling,g0=n,Gf=a.group,_t.dragged=rt,_o={target:rt,clientX:(r||e).clientX,clientY:(r||e).clientY},fS=_o.clientX-c.left,hS=_o.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,rt.style["will-change"]="all",l=function(){if(cs("delayEnded",s,{evt:e}),_t.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!oS&&s.nativeDraggable&&(rt.draggable=!0),s._triggerDragStart(e,r),Zn({sortable:s,name:"choose",originalEvent:e}),kr(rt,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){Tk(rt,u.trim(),ug)}),Ht(o,"dragover",So),Ht(o,"mousemove",So),Ht(o,"touchmove",So),Ht(o,"mouseup",s._onDrop),Ht(o,"touchend",s._onDrop),Ht(o,"touchcancel",s._onDrop),oS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,rt.draggable=!0),cs("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(rf||Si))){if(_t.eventCanceled){this._onDrop();return}Ht(o,"mouseup",s._disableDelayedDrag),Ht(o,"touchend",s._disableDelayedDrag),Ht(o,"touchcancel",s._disableDelayedDrag),Ht(o,"mousemove",s._delayedDragTouchMoveHandler),Ht(o,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&Ht(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){rt&&ug(rt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Vt(e,"mouseup",this._disableDelayedDrag),Vt(e,"touchend",this._disableDelayedDrag),Vt(e,"touchcancel",this._disableDelayedDrag),Vt(e,"mousemove",this._delayedDragTouchMoveHandler),Vt(e,"touchmove",this._delayedDragTouchMoveHandler),Vt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?Ht(document,"pointermove",this._onTouchMove):r?Ht(document,"touchmove",this._onTouchMove):Ht(document,"mousemove",this._onTouchMove):(Ht(rt,"dragend",this),Ht(wr,"dragstart",this._onDragStart));try{document.selection?x0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Ml=!1,wr&&rt){cs("dragStarted",this,{evt:r}),this.nativeDraggable&&Ht(document,"dragover",pae);var n=this.options;!e&&kr(rt,n.dragClass,!1),kr(rt,n.ghostClass,!0),_t.active=this,e&&this._appendGhost(),Zn({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(Ys){this._lastX=Ys.clientX,this._lastY=Ys.clientY,Dk();for(var e=document.elementFromPoint(Ys.clientX,Ys.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ys.clientX,Ys.clientY),e!==r);)r=e;if(rt.parentNode[Vn]._isOutsideThisEl(e),r)do{if(r[Vn]){var n=void 0;if(n=r[Vn]._onDragOver({clientX:Ys.clientX,clientY:Ys.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=r.parentNode);Pk()}},_onTouchMove:function(e){if(_o){var r=this.options,n=r.fallbackTolerance,s=r.fallbackOffset,i=e.touches?e.touches[0]:e,a=Ot&&Uo(Ot,!0),o=Ot&&a&&a.a,l=Ot&&a&&a.d,c=zf&&On&&uS(On),u=(i.clientX-_o.clientX+s.x)/(o||1)+(c?c[0]-cg[0]:0)/(o||1),d=(i.clientY-_o.clientY+s.y)/(l||1)+(c?c[1]-cg[1]:0)/(l||1);if(!_t.active&&!Ml){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Ot){a?(a.e+=u-(og||0),a.f+=d-(lg||0)):a={a:1,b:0,c:0,d:1,e:u,f:d};var h="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");pt(Ot,"webkitTransform",h),pt(Ot,"mozTransform",h),pt(Ot,"msTransform",h),pt(Ot,"transform",h),og=u,lg=d,Ys=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ot){var e=this.options.fallbackOnBody?document.body:wr,r=Cr(rt,!0,zf,!0,e),n=this.options;if(zf){for(On=e;pt(On,"position")==="static"&&pt(On,"transform")==="none"&&On!==document;)On=On.parentNode;On!==document.body&&On!==document.documentElement?(On===document&&(On=Ca()),r.top+=On.scrollTop,r.left+=On.scrollLeft):On=Ca(),cg=uS(On)}Ot=rt.cloneNode(!0),kr(Ot,n.ghostClass,!1),kr(Ot,n.fallbackClass,!0),kr(Ot,n.dragClass,!0),pt(Ot,"transition",""),pt(Ot,"transform",""),pt(Ot,"box-sizing","border-box"),pt(Ot,"margin",0),pt(Ot,"top",r.top),pt(Ot,"left",r.left),pt(Ot,"width",r.width),pt(Ot,"height",r.height),pt(Ot,"opacity","0.8"),pt(Ot,"position",zf?"absolute":"fixed"),pt(Ot,"zIndex","100000"),pt(Ot,"pointerEvents","none"),_t.ghost=Ot,e.appendChild(Ot),pt(Ot,"transform-origin",fS/parseInt(Ot.style.width)*100+"% "+hS/parseInt(Ot.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,s=e.dataTransfer,i=n.options;if(cs("dragStart",this,{evt:e}),_t.eventCanceled){this._onDrop();return}cs("setupClone",this),_t.eventCanceled||(Rr=ny(rt),Rr.draggable=!1,Rr.style["will-change"]="",this._hideClone(),kr(Rr,this.options.chosenClass,!1),_t.clone=Rr),n.cloneId=x0(function(){cs("clone",n),!_t.eventCanceled&&(n.options.removeCloneOnHide||wr.insertBefore(Rr,rt),n._hideClone(),Zn({sortable:n,name:"clone"}))}),!r&&kr(rt,i.dragClass,!0),r?(vh=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Vt(document,"mouseup",n._onDrop),Vt(document,"touchend",n._onDrop),Vt(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,rt)),Ht(document,"drop",n),pt(rt,"transform","translateZ(0)")),Ml=!0,n._dragStartId=x0(n._dragStarted.bind(n,r,e)),Ht(document,"selectstart",n),gu=!0,Wu&&pt(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,s,i,a,o=this.options,l=o.group,c=_t.active,u=Gf===l,d=o.sort,h=xn||c,p,m=this,g=!1;if(Dv)return;function v(B,V){cs(B,m,Fa({evt:e,isOwner:u,axis:p?"vertical":"horizontal",revert:a,dragRect:s,targetRect:i,canSort:d,fromSortable:h,target:n,completed:x,onMove:function(H,j){return Kf(wr,r,rt,s,H,Cr(H),e,j)},changed:E},V))}function y(){v("dragOverAnimationCapture"),m.captureAnimationState(),m!==h&&h.captureAnimationState()}function x(B){return v("dragOverCompleted",{insertion:B}),B&&(u?c._hideClone():c._showClone(m),m!==h&&(kr(rt,xn?xn.options.ghostClass:c.options.ghostClass,!1),kr(rt,o.ghostClass,!0)),xn!==m&&m!==_t.active?xn=m:m===_t.active&&xn&&(xn=null),h===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){v("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(n===rt&&!rt.animated||n===r&&!n.animated)&&(Cl=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(rt.parentNode[Vn]._isOutsideThisEl(e.target),!B&&So(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function E(){Es=Or(rt),$i=Or(rt,o.draggable),Zn({sortable:m,name:"change",toEl:r,newIndex:Es,newDraggableIndex:$i,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Qs(n,o.draggable,r,!0),v("dragOver"),_t.eventCanceled)return g;if(rt.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return x(!1);if(vh=!1,c&&!o.disabled&&(u?d||(a=Fr!==wr):xn===this||(this.lastPutMode=Gf.checkPull(this,c,rt,e))&&l.checkPut(this,c,rt,e))){if(p=this._getDirection(e,n)==="vertical",s=Cr(rt),v("dragOverValid"),_t.eventCanceled)return g;if(a)return Fr=wr,y(),this._hideClone(),v("revert"),_t.eventCanceled||(wo?wr.insertBefore(rt,wo):wr.appendChild(rt)),x(!0);var I=ry(r,o.draggable);if(!I||xae(e,p,this)&&!I.animated){if(I===rt)return x(!1);if(I&&r===e.target&&(n=I),n&&(i=Cr(n)),Kf(wr,r,rt,s,n,i,e,!!n)!==!1)return y(),r.appendChild(rt),Fr=r,E(),x(!0)}else if(I&&vae(e,p,this)){var P=Sc(r,0,o,!0);if(P===rt)return x(!1);if(n=P,i=Cr(n),Kf(wr,r,rt,s,n,i,e,!1)!==!1)return y(),r.insertBefore(rt,P),Fr=r,E(),x(!0)}else if(n.parentNode===r){i=Cr(n);var w=0,b,T=rt.parentNode!==r,_=!fae(rt.animated&&rt.toRect||s,n.animated&&n.toRect||i,p),S=p?"top":"left",k=cS(n,"top","top")||cS(rt,"top","top"),A=k?k.scrollTop:void 0;Cl!==n&&(b=i[S],Xu=!1,Wf=!_&&o.invertSwap||T),w=yae(e,n,i,p,_?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,Wf,Cl===n);var D;if(w!==0){var N=Or(rt);do N-=w,D=Fr.children[N];while(D&&(pt(D,"display")==="none"||D===Ot))}if(w===0||D===n)return x(!1);Cl=n,qu=w;var R=n.nextElementSibling,F=!1;F=w===1;var O=Kf(wr,r,rt,s,n,i,e,F);if(O!==!1)return(O===1||O===-1)&&(F=O===1),Dv=!0,setTimeout(gae,30),y(),F&&!R?r.appendChild(rt):n.parentNode.insertBefore(rt,F?R:n),k&&Ak(k,0,A-k.scrollTop),Fr=rt.parentNode,b!==void 0&&!Wf&&(v0=Math.abs(b-Cr(n)[S])),E(),x(!0)}if(r.contains(rt))return x(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Vt(document,"mousemove",this._onTouchMove),Vt(document,"touchmove",this._onTouchMove),Vt(document,"pointermove",this._onTouchMove),Vt(document,"dragover",So),Vt(document,"mousemove",So),Vt(document,"touchmove",So)},_offUpEvents:function(){var e=this.el.ownerDocument;Vt(e,"mouseup",this._onDrop),Vt(e,"touchend",this._onDrop),Vt(e,"pointerup",this._onDrop),Vt(e,"touchcancel",this._onDrop),Vt(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(Es=Or(rt),$i=Or(rt,n.draggable),cs("drop",this,{evt:e}),Fr=rt&&rt.parentNode,Es=Or(rt),$i=Or(rt,n.draggable),_t.eventCanceled){this._nulling();return}Ml=!1,Wf=!1,Xu=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Pv(this.cloneId),Pv(this._dragStartId),this.nativeDraggable&&(Vt(document,"drop",this),Vt(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wu&&pt(document.body,"user-select",""),pt(rt,"transform",""),e&&(gu&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Ot&&Ot.parentNode&&Ot.parentNode.removeChild(Ot),(wr===Fr||xn&&xn.lastPutMode!=="clone")&&Rr&&Rr.parentNode&&Rr.parentNode.removeChild(Rr),rt&&(this.nativeDraggable&&Vt(rt,"dragend",this),ug(rt),rt.style["will-change"]="",gu&&!Ml&&kr(rt,xn?xn.options.ghostClass:this.options.ghostClass,!1),kr(rt,this.options.chosenClass,!1),Zn({sortable:this,name:"unchoose",toEl:Fr,newIndex:null,newDraggableIndex:null,originalEvent:e}),wr!==Fr?(Es>=0&&(Zn({rootEl:Fr,name:"add",toEl:Fr,fromEl:wr,originalEvent:e}),Zn({sortable:this,name:"remove",toEl:Fr,originalEvent:e}),Zn({rootEl:Fr,name:"sort",toEl:Fr,fromEl:wr,originalEvent:e}),Zn({sortable:this,name:"sort",toEl:Fr,originalEvent:e})),xn&&xn.save()):Es!==Vl&&Es>=0&&(Zn({sortable:this,name:"update",toEl:Fr,originalEvent:e}),Zn({sortable:this,name:"sort",toEl:Fr,originalEvent:e})),_t.active&&((Es==null||Es===-1)&&(Es=Vl,$i=Ku),Zn({sortable:this,name:"end",toEl:Fr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){cs("nulling",this),wr=rt=Fr=Ot=wo=Rr=g0=Hi=_o=Ys=gu=Es=$i=Vl=Ku=Cl=qu=xn=Gf=_t.dragged=_t.ghost=_t.clone=_t.active=null,yh.forEach(function(e){e.checked=!0}),yh.length=og=lg=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":rt&&(this._onDragOver(e),mae(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,s=0,i=n.length,a=this.options;s<i;s++)r=n[s],Qs(r,a.draggable,this.el,!1)&&e.push(r.getAttribute(a.dataIdAttr)||bae(r));return e},sort:function(e,r){var n={},s=this.el;this.toArray().forEach(function(i,a){var o=s.children[a];Qs(o,this.options.draggable,s,!1)&&(n[i]=o)},this),r&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(s.removeChild(n[i]),s.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return Qs(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var s=nf.modifyOption(this,e,r);typeof s<"u"?n[e]=s:n[e]=r,e==="group"&&kk(n)},destroy:function(){cs("destroy",this);var e=this.el;e[Vn]=null,Vt(e,"mousedown",this._onTapStart),Vt(e,"touchstart",this._onTapStart),Vt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Vt(e,"dragover",this),Vt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),xh.splice(xh.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Hi){if(cs("hideClone",this),_t.eventCanceled)return;pt(Rr,"display","none"),this.options.removeCloneOnHide&&Rr.parentNode&&Rr.parentNode.removeChild(Rr),Hi=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Hi){if(cs("showClone",this),_t.eventCanceled)return;rt.parentNode==wr&&!this.options.group.revertClone?wr.insertBefore(Rr,rt):wo?wr.insertBefore(Rr,wo):wr.appendChild(Rr),this.options.group.revertClone&&this.animate(rt,Rr),pt(Rr,"display",""),Hi=!1}}};function mae(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Kf(t,e,r,n,s,i,a,o){var l,c=t[Vn],u=c.options.onMove,d;return window.CustomEvent&&!Si&&!rf?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=r,l.draggedRect=n,l.related=s||e,l.relatedRect=i||Cr(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),u&&(d=u.call(c,l,a)),d}function ug(t){t.draggable=!1}function gae(){Dv=!1}function vae(t,e,r){var n=Cr(Sc(r.el,0,r.options,!0)),s=10;return e?t.clientX<n.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-s||t.clientY<n.bottom&&t.clientX<n.left}function xae(t,e,r){var n=Cr(ry(r.el,r.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}function yae(t,e,r,n,s,i,a,o){var l=n?t.clientY:t.clientX,c=n?r.height:r.width,u=n?r.top:r.left,d=n?r.bottom:r.right,h=!1;if(!a){if(o&&v0<c*s){if(!Xu&&(qu===1?l>u+c*i/2:l<d-c*i/2)&&(Xu=!0),Xu)h=!0;else if(qu===1?l<u+v0:l>d-v0)return-qu}else if(l>u+c*(1-s)/2&&l<d-c*(1-s)/2)return Eae(e)}return h=h||a,h&&(l<u+c*i/2||l>d-c*i/2)?l>u+c/2?1:-1:0}function Eae(t){return Or(rt)<Or(t)?1:-1}function bae(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function _ae(t){yh.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&yh.push(n)}}function x0(t){return setTimeout(t,0)}function Pv(t){return clearTimeout(t)}Cp&&Ht(document,"touchmove",function(t){(_t.active||Ml)&&t.cancelable&&t.preventDefault()});_t.utils={on:Ht,off:Vt,css:pt,find:Tk,is:function(e,r){return!!Qs(e,r,e,!1)},extend:aae,throttle:wk,closest:Qs,toggleClass:kr,clone:ny,index:Or,nextTick:x0,cancelNextTick:Pv,detectDirection:Ik,getChild:Sc};_t.get=function(t){return t[Vn]};_t.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(_t.utils=Fa(Fa({},_t.utils),n.utils)),nf.mount(n)})};_t.create=function(t,e){return new _t(t,e)};_t.version=tae;var zr=[],vu,Fv,Rv=!1,dg,fg,Eh,xu;function Sae(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?Ht(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ht(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Ht(document,"touchmove",this._handleFallbackAutoScroll):Ht(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Vt(document,"dragover",this._handleAutoScroll):(Vt(document,"pointermove",this._handleFallbackAutoScroll),Vt(document,"touchmove",this._handleFallbackAutoScroll),Vt(document,"mousemove",this._handleFallbackAutoScroll)),mS(),y0(),iae()},nulling:function(){Eh=Fv=vu=Rv=xu=dg=fg=null,zr.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var s=this,i=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,o=document.elementFromPoint(i,a);if(Eh=r,n||this.options.forceAutoScrollFallback||rf||Si||Wu){hg(r,this.options,o,n);var l=Ki(o,!0);Rv&&(!xu||i!==dg||a!==fg)&&(xu&&mS(),xu=setInterval(function(){var c=Ki(document.elementFromPoint(i,a),!0);c!==l&&(l=c,y0()),hg(r,s.options,c,n)},10),dg=i,fg=a)}else{if(!this.options.bubbleScroll||Ki(o,!0)===Ca()){y0();return}hg(r,this.options,Ki(o,!1),!1)}}},Vs(t,{pluginName:"scroll",initializeByDefault:!0})}function y0(){zr.forEach(function(t){clearInterval(t.pid)}),zr=[]}function mS(){clearInterval(xu)}var hg=wk(function(t,e,r,n){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=Ca(),c=!1,u;Fv!==r&&(Fv=r,y0(),vu=e.scroll,u=e.scrollFn,vu===!0&&(vu=Ki(r,!0)));var d=0,h=vu;do{var p=h,m=Cr(p),g=m.top,v=m.bottom,y=m.left,x=m.right,E=m.width,I=m.height,P=void 0,w=void 0,b=p.scrollWidth,T=p.scrollHeight,_=pt(p),S=p.scrollLeft,k=p.scrollTop;p===l?(P=E<b&&(_.overflowX==="auto"||_.overflowX==="scroll"||_.overflowX==="visible"),w=I<T&&(_.overflowY==="auto"||_.overflowY==="scroll"||_.overflowY==="visible")):(P=E<b&&(_.overflowX==="auto"||_.overflowX==="scroll"),w=I<T&&(_.overflowY==="auto"||_.overflowY==="scroll"));var A=P&&(Math.abs(x-s)<=a&&S+E<b)-(Math.abs(y-s)<=a&&!!S),D=w&&(Math.abs(v-i)<=a&&k+I<T)-(Math.abs(g-i)<=a&&!!k);if(!zr[d])for(var N=0;N<=d;N++)zr[N]||(zr[N]={});(zr[d].vx!=A||zr[d].vy!=D||zr[d].el!==p)&&(zr[d].el=p,zr[d].vx=A,zr[d].vy=D,clearInterval(zr[d].pid),(A!=0||D!=0)&&(c=!0,zr[d].pid=setInterval((function(){n&&this.layer===0&&_t.active._onTouchMove(Eh);var R=zr[this.layer].vy?zr[this.layer].vy*o:0,F=zr[this.layer].vx?zr[this.layer].vx*o:0;typeof u=="function"&&u.call(_t.dragged.parentNode[Vn],F,R,t,Eh,zr[this.layer].el)!=="continue"||Ak(zr[this.layer].el,F,R)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==l&&(h=Ki(h,!1)));Rv=c}},30),Fk=function(e){var r=e.originalEvent,n=e.putSortable,s=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(r){var c=n||i;o();var u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(a("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function sy(){}sy.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=Sc(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:Fk};Vs(sy,{pluginName:"revertOnSpill"});function ay(){}ay.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,s=n||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop:Fk};Vs(ay,{pluginName:"removeOnSpill"});var Ds;function Tae(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(r){var n=r.dragEl;Ds=n},dragOverValid:function(r){var n=r.completed,s=r.target,i=r.onMove,a=r.activeSortable,o=r.changed,l=r.cancel;if(a.options.swap){var c=this.sortable.el,u=this.options;if(s&&s!==c){var d=Ds;i(s)!==!1?(kr(s,u.swapClass,!0),Ds=s):Ds=null,d&&d!==Ds&&kr(d,u.swapClass,!1)}o(),n(!0),l()}},drop:function(r){var n=r.activeSortable,s=r.putSortable,i=r.dragEl,a=s||this.sortable,o=this.options;Ds&&kr(Ds,o.swapClass,!1),Ds&&(o.swap||s&&s.options.swap)&&i!==Ds&&(a.captureAnimationState(),a!==n&&n.captureAnimationState(),wae(i,Ds),a.animateAll(),a!==n&&n.animateAll())},nulling:function(){Ds=null}},Vs(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Ds}}})}function wae(t,e){var r=t.parentNode,n=e.parentNode,s,i;!r||!n||r.isEqualNode(e)||n.isEqualNode(t)||(s=Or(t),i=Or(e),r.isEqualNode(n)&&s<i&&i++,r.insertBefore(e,r.children[s]),n.insertBefore(t,n.children[i]))}var kt=[],ys=[],nu,Js,su=!1,us=!1,Il=!1,mr,au,qf;function Aae(){function t(e){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));e.options.supportPointer?Ht(document,"pointerup",this._deselectMultiDrag):(Ht(document,"mouseup",this._deselectMultiDrag),Ht(document,"touchend",this._deselectMultiDrag)),Ht(document,"keydown",this._checkKeyDown),Ht(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,i){var a="";kt.length&&Js===e?kt.forEach(function(o,l){a+=(l?", ":"")+o.textContent}):a=i.textContent,s.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var n=r.dragEl;mr=n},delayEnded:function(){this.isMultiDrag=~kt.indexOf(mr)},setupClone:function(r){var n=r.sortable,s=r.cancel;if(this.isMultiDrag){for(var i=0;i<kt.length;i++)ys.push(ny(kt[i])),ys[i].sortableIndex=kt[i].sortableIndex,ys[i].draggable=!1,ys[i].style["will-change"]="",kr(ys[i],this.options.selectedClass,!1),kt[i]===mr&&kr(ys[i],this.options.chosenClass,!1);n._hideClone(),s()}},clone:function(r){var n=r.sortable,s=r.rootEl,i=r.dispatchSortableEvent,a=r.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||kt.length&&Js===n&&(gS(!0,s),i("clone"),a()))},showClone:function(r){var n=r.cloneNowShown,s=r.rootEl,i=r.cancel;this.isMultiDrag&&(gS(!1,s),ys.forEach(function(a){pt(a,"display","")}),n(),qf=!1,i())},hideClone:function(r){var n=this;r.sortable;var s=r.cloneNowHidden,i=r.cancel;this.isMultiDrag&&(ys.forEach(function(a){pt(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),s(),qf=!0,i())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&Js&&Js.multiDrag._deselectMultiDrag(),kt.forEach(function(n){n.sortableIndex=Or(n)}),kt=kt.sort(function(n,s){return n.sortableIndex-s.sortableIndex}),Il=!0},dragStarted:function(r){var n=this,s=r.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){kt.forEach(function(a){a!==mr&&pt(a,"position","absolute")});var i=Cr(mr,!1,!0,!0);kt.forEach(function(a){a!==mr&&dS(a,i)}),us=!0,su=!0}s.animateAll(function(){us=!1,su=!1,n.options.animation&&kt.forEach(function(a){ag(a)}),n.options.sort&&Xf()})}},dragOver:function(r){var n=r.target,s=r.completed,i=r.cancel;us&&~kt.indexOf(n)&&(s(!1),i())},revert:function(r){var n=r.fromSortable,s=r.rootEl,i=r.sortable,a=r.dragRect;kt.length>1&&(kt.forEach(function(o){i.addAnimationState({target:o,rect:us?Cr(o):a}),ag(o),o.fromRect=a,n.removeAnimationState(o)}),us=!1,Cae(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(r){var n=r.sortable,s=r.isOwner,i=r.insertion,a=r.activeSortable,o=r.parentEl,l=r.putSortable,c=this.options;if(i){if(s&&a._hideClone(),su=!1,c.animation&&kt.length>1&&(us||!s&&!a.options.sort&&!l)){var u=Cr(mr,!1,!0,!0);kt.forEach(function(h){h!==mr&&(dS(h,u),o.appendChild(h))}),us=!0}if(!s)if(us||Xf(),kt.length>1){var d=qf;a._showClone(n),a.options.animation&&!qf&&d&&ys.forEach(function(h){a.addAnimationState({target:h,rect:au}),h.fromRect=au,h.thisAnimationDuration=null})}else a._showClone(n)}},dragOverAnimationCapture:function(r){var n=r.dragRect,s=r.isOwner,i=r.activeSortable;if(kt.forEach(function(o){o.thisAnimationDuration=null}),i.options.animation&&!s&&i.multiDrag.isMultiDrag){au=Vs({},n);var a=Uo(mr,!0);au.top-=a.f,au.left-=a.e}},dragOverAnimationComplete:function(){us&&(us=!1,Xf())},drop:function(r){var n=r.originalEvent,s=r.rootEl,i=r.parentEl,a=r.sortable,o=r.dispatchSortableEvent,l=r.oldIndex,c=r.putSortable,u=c||this.sortable;if(n){var d=this.options,h=i.children;if(!Il)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),kr(mr,d.selectedClass,!~kt.indexOf(mr)),~kt.indexOf(mr))kt.splice(kt.indexOf(mr),1),nu=null,mu({sortable:a,rootEl:s,name:"deselect",targetEl:mr});else{if(kt.push(mr),mu({sortable:a,rootEl:s,name:"select",targetEl:mr}),n.shiftKey&&nu&&a.el.contains(nu)){var p=Or(nu),m=Or(mr);if(~p&&~m&&p!==m){var g,v;for(m>p?(v=p,g=m):(v=m,g=p+1);v<g;v++)~kt.indexOf(h[v])||(kr(h[v],d.selectedClass,!0),kt.push(h[v]),mu({sortable:a,rootEl:s,name:"select",targetEl:h[v]}))}}else nu=mr;Js=u}if(Il&&this.isMultiDrag){if(us=!1,(i[Vn].options.sort||i!==s)&&kt.length>1){var y=Cr(mr),x=Or(mr,":not(."+this.options.selectedClass+")");if(!su&&d.animation&&(mr.thisAnimationDuration=null),u.captureAnimationState(),!su&&(d.animation&&(mr.fromRect=y,kt.forEach(function(I){if(I.thisAnimationDuration=null,I!==mr){var P=us?Cr(I):y;I.fromRect=P,u.addAnimationState({target:I,rect:P})}})),Xf(),kt.forEach(function(I){h[x]?i.insertBefore(I,h[x]):i.appendChild(I),x++}),l===Or(mr))){var E=!1;kt.forEach(function(I){if(I.sortableIndex!==Or(I)){E=!0;return}}),E&&o("update")}kt.forEach(function(I){ag(I)}),u.animateAll()}Js=u}(s===i||c&&c.lastPutMode!=="clone")&&ys.forEach(function(I){I.parentNode&&I.parentNode.removeChild(I)})}},nullingGlobal:function(){this.isMultiDrag=Il=!1,ys.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Vt(document,"pointerup",this._deselectMultiDrag),Vt(document,"mouseup",this._deselectMultiDrag),Vt(document,"touchend",this._deselectMultiDrag),Vt(document,"keydown",this._checkKeyDown),Vt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof Il<"u"&&Il)&&Js===this.sortable&&!(r&&Qs(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;kt.length;){var n=kt[0];kr(n,this.options.selectedClass,!1),kt.shift(),mu({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Vs(t,{pluginName:"multiDrag",utils:{select:function(r){var n=r.parentNode[Vn];!n||!n.options.multiDrag||~kt.indexOf(r)||(Js&&Js!==n&&(Js.multiDrag._deselectMultiDrag(),Js=n),kr(r,n.options.selectedClass,!0),kt.push(r))},deselect:function(r){var n=r.parentNode[Vn],s=kt.indexOf(r);!n||!n.options.multiDrag||!~s||(kr(r,n.options.selectedClass,!1),kt.splice(s,1))}},eventProperties:function(){var r=this,n=[],s=[];return kt.forEach(function(i){n.push({multiDragElement:i,index:i.sortableIndex});var a;us&&i!==mr?a=-1:us?a=Or(i,":not(."+r.options.selectedClass+")"):a=Or(i),s.push({multiDragElement:i,index:a})}),{items:Yse(kt),clones:[].concat(ys),oldIndicies:n,newIndicies:s}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function Cae(t,e){kt.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function gS(t,e){ys.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function Xf(){kt.forEach(function(t){t!==mr&&t.parentNode&&t.parentNode.removeChild(t)})}_t.mount(new Sae);_t.mount(ay,sy);const Iae=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Aae,Sortable:_t,Swap:Tae,default:_t},Symbol.toStringTag,{value:"Module"})),kae=Tx(Iae);(function(t,e){(function(n,s){t.exports=s(zse,kae)})(typeof self<"u"?self:Lt,function(r,n){return function(s){var i={};function a(o){if(i[o])return i[o].exports;var l=i[o]={i:o,l:!1,exports:{}};return s[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=s,a.c=i,a.d=function(o,l,c){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:c})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var u in o)a.d(c,u,(function(d){return o[d]}).bind(null,u));return c},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s="fb15")}({"00ee":function(s,i,a){var o=a("b622"),l=o("toStringTag"),c={};c[l]="z",s.exports=String(c)==="[object z]"},"0366":function(s,i,a){var o=a("1c0b");s.exports=function(l,c,u){if(o(l),c===void 0)return l;switch(u){case 0:return function(){return l.call(c)};case 1:return function(d){return l.call(c,d)};case 2:return function(d,h){return l.call(c,d,h)};case 3:return function(d,h,p){return l.call(c,d,h,p)}}return function(){return l.apply(c,arguments)}}},"057f":function(s,i,a){var o=a("fc6a"),l=a("241c").f,c={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(h){try{return l(h)}catch{return u.slice()}};s.exports.f=function(p){return u&&c.call(p)=="[object Window]"?d(p):l(o(p))}},"06cf":function(s,i,a){var o=a("83ab"),l=a("d1e7"),c=a("5c6c"),u=a("fc6a"),d=a("c04e"),h=a("5135"),p=a("0cfb"),m=Object.getOwnPropertyDescriptor;i.f=o?m:function(v,y){if(v=u(v),y=d(y,!0),p)try{return m(v,y)}catch{}if(h(v,y))return c(!l.f.call(v,y),v[y])}},"0cfb":function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("cc12");s.exports=!o&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,i,a){var o=a("23e7"),l=a("d58f").left,c=a("a640"),u=a("ae40"),d=c("reduce"),h=u("reduce",{1:0});o({target:"Array",proto:!0,forced:!d||!h},{reduce:function(m){return l(this,m,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,i,a){var o=a("c6b6"),l=a("9263");s.exports=function(c,u){var d=c.exec;if(typeof d=="function"){var h=d.call(c,u);if(typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(o(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,u)}},"159b":function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("17c2"),u=a("9112");for(var d in l){var h=o[d],p=h&&h.prototype;if(p&&p.forEach!==c)try{u(p,"forEach",c)}catch{p.forEach=c}}},"17c2":function(s,i,a){var o=a("b727").forEach,l=a("a640"),c=a("ae40"),u=l("forEach"),d=c("forEach");s.exports=!u||!d?function(p){return o(this,p,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,i,a){var o=a("d066");s.exports=o("document","documentElement")},"1c0b":function(s,i){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},"1c7e":function(s,i,a){var o=a("b622"),l=o("iterator"),c=!1;try{var u=0,d={next:function(){return{done:!!u++}},return:function(){c=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}s.exports=function(h,p){if(!p&&!c)return!1;var m=!1;try{var g={};g[l]=function(){return{next:function(){return{done:m=!0}}}},h(g)}catch{}return m}},"1d80":function(s,i){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},"1dde":function(s,i,a){var o=a("d039"),l=a("b622"),c=a("2d00"),u=l("species");s.exports=function(d){return c>=51||!o(function(){var h=[],p=h.constructor={};return p[u]=function(){return{foo:1}},h[d](Boolean).foo!==1})}},"23cb":function(s,i,a){var o=a("a691"),l=Math.max,c=Math.min;s.exports=function(u,d){var h=o(u);return h<0?l(h+d,0):c(h,d)}},"23e7":function(s,i,a){var o=a("da84"),l=a("06cf").f,c=a("9112"),u=a("6eeb"),d=a("ce4e"),h=a("e893"),p=a("94ca");s.exports=function(m,g){var v=m.target,y=m.global,x=m.stat,E,I,P,w,b,T;if(y?I=o:x?I=o[v]||d(v,{}):I=(o[v]||{}).prototype,I)for(P in g){if(b=g[P],m.noTargetGet?(T=l(I,P),w=T&&T.value):w=I[P],E=p(y?P:v+(x?".":"#")+P,m.forced),!E&&w!==void 0){if(typeof b==typeof w)continue;h(b,w)}(m.sham||w&&w.sham)&&c(b,"sham",!0),u(I,P,b,m)}}},"241c":function(s,i,a){var o=a("ca84"),l=a("7839"),c=l.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(d){return o(d,c)}},"25f0":function(s,i,a){var o=a("6eeb"),l=a("825a"),c=a("d039"),u=a("ad6d"),d="toString",h=RegExp.prototype,p=h[d],m=c(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),g=p.name!=d;(m||g)&&o(RegExp.prototype,d,function(){var y=l(this),x=String(y.source),E=y.flags,I=String(E===void 0&&y instanceof RegExp&&!("flags"in h)?u.call(y):E);return"/"+x+"/"+I},{unsafe:!0})},"2ca0":function(s,i,a){var o=a("23e7"),l=a("06cf").f,c=a("50c4"),u=a("5a34"),d=a("1d80"),h=a("ab13"),p=a("c430"),m="".startsWith,g=Math.min,v=h("startsWith"),y=!p&&!v&&!!function(){var x=l(String.prototype,"startsWith");return x&&!x.writable}();o({target:"String",proto:!0,forced:!y&&!v},{startsWith:function(E){var I=String(d(this));u(E);var P=c(g(arguments.length>1?arguments[1]:void 0,I.length)),w=String(E);return m?m.call(I,w,P):I.slice(P,P+w.length)===w}})},"2d00":function(s,i,a){var o=a("da84"),l=a("342f"),c=o.process,u=c&&c.versions,d=u&&u.v8,h,p;d?(h=d.split("."),p=h[0]+h[1]):l&&(h=l.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=l.match(/Chrome\/(\d+)/),h&&(p=h[1]))),s.exports=p&&+p},"342f":function(s,i,a){var o=a("d066");s.exports=o("navigator","userAgent")||""},"35a1":function(s,i,a){var o=a("f5df"),l=a("3f8c"),c=a("b622"),u=c("iterator");s.exports=function(d){if(d!=null)return d[u]||d["@@iterator"]||l[o(d)]}},"37e8":function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("825a"),u=a("df75");s.exports=o?Object.defineProperties:function(h,p){c(h);for(var m=u(p),g=m.length,v=0,y;g>v;)l.f(h,y=m[v++],p[y]);return h}},"3bbe":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(s,i,a){var o=a("6547").charAt,l=a("69f3"),c=a("7dd0"),u="String Iterator",d=l.set,h=l.getterFor(u);c(String,"String",function(p){d(this,{type:u,string:String(p),index:0})},function(){var m=h(this),g=m.string,v=m.index,y;return v>=g.length?{value:void 0,done:!0}:(y=o(g,v),m.index+=y.length,{value:y,done:!1})})},"3f8c":function(s,i){s.exports={}},4160:function(s,i,a){var o=a("23e7"),l=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(s,i,a){var o=a("da84");s.exports=o},"44ad":function(s,i,a){var o=a("d039"),l=a("c6b6"),c="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return l(u)=="String"?c.call(u,""):Object(u)}:Object},"44d2":function(s,i,a){var o=a("b622"),l=a("7c73"),c=a("9bf2"),u=o("unscopables"),d=Array.prototype;d[u]==null&&c.f(d,u,{configurable:!0,value:l(null)}),s.exports=function(h){d[u][h]=!0}},"44e7":function(s,i,a){var o=a("861d"),l=a("c6b6"),c=a("b622"),u=c("match");s.exports=function(d){var h;return o(d)&&((h=d[u])!==void 0?!!h:l(d)=="RegExp")}},4930:function(s,i,a){var o=a("d039");s.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(s,i,a){var o=a("fc6a"),l=a("50c4"),c=a("23cb"),u=function(d){return function(h,p,m){var g=o(h),v=l(g.length),y=c(m,v),x;if(d&&p!=p){for(;v>y;)if(x=g[y++],x!=x)return!0}else for(;v>y;y++)if((d||y in g)&&g[y]===p)return d||y||0;return!d&&-1}};s.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(s,i,a){var o=a("23e7"),l=a("b727").filter,c=a("1dde"),u=a("ae40"),d=c("filter"),h=u("filter");o({target:"Array",proto:!0,forced:!d||!h},{filter:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,i,a){var o=a("0366"),l=a("7b0b"),c=a("9bdd"),u=a("e95a"),d=a("50c4"),h=a("8418"),p=a("35a1");s.exports=function(g){var v=l(g),y=typeof this=="function"?this:Array,x=arguments.length,E=x>1?arguments[1]:void 0,I=E!==void 0,P=p(v),w=0,b,T,_,S,k,A;if(I&&(E=o(E,x>2?arguments[2]:void 0,2)),P!=null&&!(y==Array&&u(P)))for(S=P.call(v),k=S.next,T=new y;!(_=k.call(S)).done;w++)A=I?c(S,E,[_.value,w],!0):_.value,h(T,w,A);else for(b=d(v.length),T=new y(b);b>w;w++)A=I?E(v[w],w):v[w],h(T,w,A);return T.length=w,T}},"4fad":function(s,i,a){var o=a("23e7"),l=a("6f53").entries;o({target:"Object",stat:!0},{entries:function(u){return l(u)}})},"50c4":function(s,i,a){var o=a("a691"),l=Math.min;s.exports=function(c){return c>0?l(o(c),9007199254740991):0}},5135:function(s,i){var a={}.hasOwnProperty;s.exports=function(o,l){return a.call(o,l)}},5319:function(s,i,a){var o=a("d784"),l=a("825a"),c=a("7b0b"),u=a("50c4"),d=a("a691"),h=a("1d80"),p=a("8aa5"),m=a("14c3"),g=Math.max,v=Math.min,y=Math.floor,x=/\$([$&'`]|\d\d?|<[^>]*>)/g,E=/\$([$&'`]|\d\d?)/g,I=function(P){return P===void 0?P:String(P)};o("replace",2,function(P,w,b,T){var _=T.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,S=T.REPLACE_KEEPS_$0,k=_?"$":"$0";return[function(N,R){var F=h(this),O=N==null?void 0:N[P];return O!==void 0?O.call(N,F,R):w.call(String(F),N,R)},function(D,N){if(!_&&S||typeof N=="string"&&N.indexOf(k)===-1){var R=b(w,D,this,N);if(R.done)return R.value}var F=l(D),O=String(this),B=typeof N=="function";B||(N=String(N));var V=F.global;if(V){var z=F.unicode;F.lastIndex=0}for(var H=[];;){var j=m(F,O);if(j===null||(H.push(j),!V))break;var W=String(j[0]);W===""&&(F.lastIndex=p(O,u(F.lastIndex),z))}for(var K="",re=0,he=0;he<H.length;he++){j=H[he];for(var ue=String(j[0]),pe=g(v(d(j.index),O.length),0),te=[],Y=1;Y<j.length;Y++)te.push(I(j[Y]));var Ee=j.groups;if(B){var X=[ue].concat(te,pe,O);Ee!==void 0&&X.push(Ee);var q=String(N.apply(void 0,X))}else q=A(ue,O,pe,te,Ee,N);pe>=re&&(K+=O.slice(re,pe)+q,re=pe+ue.length)}return K+O.slice(re)}];function A(D,N,R,F,O,B){var V=R+D.length,z=F.length,H=E;return O!==void 0&&(O=c(O),H=x),w.call(B,H,function(j,W){var K;switch(W.charAt(0)){case"$":return"$";case"&":return D;case"`":return N.slice(0,R);case"'":return N.slice(V);case"<":K=O[W.slice(1,-1)];break;default:var re=+W;if(re===0)return j;if(re>z){var he=y(re/10);return he===0?j:he<=z?F[he-1]===void 0?W.charAt(1):F[he-1]+W.charAt(1):j}K=F[re-1]}return K===void 0?"":K})}})},5692:function(s,i,a){var o=a("c430"),l=a("c6cd");(s.exports=function(c,u){return l[c]||(l[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,i,a){var o=a("d066"),l=a("241c"),c=a("7418"),u=a("825a");s.exports=o("Reflect","ownKeys")||function(h){var p=l.f(u(h)),m=c.f;return m?p.concat(m(h)):p}},"5a34":function(s,i,a){var o=a("44e7");s.exports=function(l){if(o(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(s,i){s.exports=function(a,o){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:o}}},"5db7":function(s,i,a){var o=a("23e7"),l=a("a2bf"),c=a("7b0b"),u=a("50c4"),d=a("1c0b"),h=a("65f0");o({target:"Array",proto:!0},{flatMap:function(m){var g=c(this),v=u(g.length),y;return d(m),y=h(g,0),y.length=l(y,g,g,v,0,1,m,arguments.length>1?arguments[1]:void 0),y}})},6547:function(s,i,a){var o=a("a691"),l=a("1d80"),c=function(u){return function(d,h){var p=String(l(d)),m=o(h),g=p.length,v,y;return m<0||m>=g?u?"":void 0:(v=p.charCodeAt(m),v<55296||v>56319||m+1===g||(y=p.charCodeAt(m+1))<56320||y>57343?u?p.charAt(m):v:u?p.slice(m,m+2):(v-55296<<10)+(y-56320)+65536)}};s.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(s,i,a){var o=a("861d"),l=a("e8b5"),c=a("b622"),u=c("species");s.exports=function(d,h){var p;return l(d)&&(p=d.constructor,typeof p=="function"&&(p===Array||l(p.prototype))?p=void 0:o(p)&&(p=p[u],p===null&&(p=void 0))),new(p===void 0?Array:p)(h===0?0:h)}},"69f3":function(s,i,a){var o=a("7f9a"),l=a("da84"),c=a("861d"),u=a("9112"),d=a("5135"),h=a("f772"),p=a("d012"),m=l.WeakMap,g,v,y,x=function(_){return y(_)?v(_):g(_,{})},E=function(_){return function(S){var k;if(!c(S)||(k=v(S)).type!==_)throw TypeError("Incompatible receiver, "+_+" required");return k}};if(o){var I=new m,P=I.get,w=I.has,b=I.set;g=function(_,S){return b.call(I,_,S),S},v=function(_){return P.call(I,_)||{}},y=function(_){return w.call(I,_)}}else{var T=h("state");p[T]=!0,g=function(_,S){return u(_,T,S),S},v=function(_){return d(_,T)?_[T]:{}},y=function(_){return d(_,T)}}s.exports={set:g,get:v,has:y,enforce:x,getterFor:E}},"6eeb":function(s,i,a){var o=a("da84"),l=a("9112"),c=a("5135"),u=a("ce4e"),d=a("8925"),h=a("69f3"),p=h.get,m=h.enforce,g=String(String).split("String");(s.exports=function(v,y,x,E){var I=E?!!E.unsafe:!1,P=E?!!E.enumerable:!1,w=E?!!E.noTargetGet:!1;if(typeof x=="function"&&(typeof y=="string"&&!c(x,"name")&&l(x,"name",y),m(x).source=g.join(typeof y=="string"?y:"")),v===o){P?v[y]=x:u(y,x);return}else I?!w&&v[y]&&(P=!0):delete v[y];P?v[y]=x:l(v,y,x)})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||d(this)})},"6f53":function(s,i,a){var o=a("83ab"),l=a("df75"),c=a("fc6a"),u=a("d1e7").f,d=function(h){return function(p){for(var m=c(p),g=l(m),v=g.length,y=0,x=[],E;v>y;)E=g[y++],(!o||u.call(m,E))&&x.push(h?[E,m[E]]:m[E]);return x}};s.exports={entries:d(!0),values:d(!1)}},"73d9":function(s,i,a){var o=a("44d2");o("flatMap")},7418:function(s,i){i.f=Object.getOwnPropertySymbols},"746f":function(s,i,a){var o=a("428f"),l=a("5135"),c=a("e538"),u=a("9bf2").f;s.exports=function(d){var h=o.Symbol||(o.Symbol={});l(h,d)||u(h,d,{value:c.f(d)})}},7839:function(s,i){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,i,a){var o=a("1d80");s.exports=function(l){return Object(o(l))}},"7c73":function(s,i,a){var o=a("825a"),l=a("37e8"),c=a("7839"),u=a("d012"),d=a("1be4"),h=a("cc12"),p=a("f772"),m=">",g="<",v="prototype",y="script",x=p("IE_PROTO"),E=function(){},I=function(_){return g+y+m+_+g+"/"+y+m},P=function(_){_.write(I("")),_.close();var S=_.parentWindow.Object;return _=null,S},w=function(){var _=h("iframe"),S="java"+y+":",k;return _.style.display="none",d.appendChild(_),_.src=String(S),k=_.contentWindow.document,k.open(),k.write(I("document.F=Object")),k.close(),k.F},b,T=function(){try{b=document.domain&&new ActiveXObject("htmlfile")}catch{}T=b?P(b):w();for(var _=c.length;_--;)delete T[v][c[_]];return T()};u[x]=!0,s.exports=Object.create||function(S,k){var A;return S!==null?(E[v]=o(S),A=new E,E[v]=null,A[x]=S):A=T(),k===void 0?A:l(A,k)}},"7dd0":function(s,i,a){var o=a("23e7"),l=a("9ed3"),c=a("e163"),u=a("d2bb"),d=a("d44e"),h=a("9112"),p=a("6eeb"),m=a("b622"),g=a("c430"),v=a("3f8c"),y=a("ae93"),x=y.IteratorPrototype,E=y.BUGGY_SAFARI_ITERATORS,I=m("iterator"),P="keys",w="values",b="entries",T=function(){return this};s.exports=function(_,S,k,A,D,N,R){l(k,S,A);var F=function(he){if(he===D&&H)return H;if(!E&&he in V)return V[he];switch(he){case P:return function(){return new k(this,he)};case w:return function(){return new k(this,he)};case b:return function(){return new k(this,he)}}return function(){return new k(this)}},O=S+" Iterator",B=!1,V=_.prototype,z=V[I]||V["@@iterator"]||D&&V[D],H=!E&&z||F(D),j=S=="Array"&&V.entries||z,W,K,re;if(j&&(W=c(j.call(new _)),x!==Object.prototype&&W.next&&(!g&&c(W)!==x&&(u?u(W,x):typeof W[I]!="function"&&h(W,I,T)),d(W,O,!0,!0),g&&(v[O]=T))),D==w&&z&&z.name!==w&&(B=!0,H=function(){return z.call(this)}),(!g||R)&&V[I]!==H&&h(V,I,H),v[S]=H,D)if(K={values:F(w),keys:N?H:F(P),entries:F(b)},R)for(re in K)(E||B||!(re in V))&&p(V,re,K[re]);else o({target:S,proto:!0,forced:E||B},K);return K}},"7f9a":function(s,i,a){var o=a("da84"),l=a("8925"),c=o.WeakMap;s.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(s,i,a){var o=a("d039");s.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,i,a){var o=a("c04e"),l=a("9bf2"),c=a("5c6c");s.exports=function(u,d,h){var p=o(d);p in u?l.f(u,p,c(0,h)):u[p]=h}},"861d":function(s,i){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},8875:function(s,i,a){var o,l,c;(function(u,d){l=[],o=d,c=typeof o=="function"?o.apply(i,l):o,c!==void 0&&(s.exports=c)})(typeof self<"u"?self:this,function(){function u(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(b){var h=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,p=/@([^@]*):(\d+):(\d+)\s*$/ig,m=h.exec(b.stack)||p.exec(b.stack),g=m&&m[1]||!1,v=m&&m[2]||!1,y=document.location.href.replace(document.location.hash,""),x,E,I,P=document.getElementsByTagName("script");g===y&&(x=document.documentElement.outerHTML,E=new RegExp("(?:[^\\n]+?\\n){0,"+(v-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),I=x.replace(E,"$1").trim());for(var w=0;w<P.length;w++)if(P[w].readyState==="interactive"||P[w].src===g||g===y&&P[w].innerHTML&&P[w].innerHTML.trim()===I)return P[w];return null}}return u})},8925:function(s,i,a){var o=a("c6cd"),l=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(c){return l.call(c)}),s.exports=o.inspectSource},"8aa5":function(s,i,a){var o=a("6547").charAt;s.exports=function(l,c,u){return c+(u?o(l,c).length:1)}},"8bbf":function(s,i){s.exports=r},"90e3":function(s,i){var a=0,o=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+o).toString(36)}},9112:function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("5c6c");s.exports=o?function(u,d,h){return l.f(u,d,c(1,h))}:function(u,d,h){return u[d]=h,u}},9263:function(s,i,a){var o=a("ad6d"),l=a("9f7f"),c=RegExp.prototype.exec,u=String.prototype.replace,d=c,h=function(){var v=/a/,y=/b*/g;return c.call(v,"a"),c.call(y,"a"),v.lastIndex!==0||y.lastIndex!==0}(),p=l.UNSUPPORTED_Y||l.BROKEN_CARET,m=/()??/.exec("")[1]!==void 0,g=h||m||p;g&&(d=function(y){var x=this,E,I,P,w,b=p&&x.sticky,T=o.call(x),_=x.source,S=0,k=y;return b&&(T=T.replace("y",""),T.indexOf("g")===-1&&(T+="g"),k=String(y).slice(x.lastIndex),x.lastIndex>0&&(!x.multiline||x.multiline&&y[x.lastIndex-1]!==`
`)&&(_="(?: "+_+")",k=" "+k,S++),I=new RegExp("^(?:"+_+")",T)),m&&(I=new RegExp("^"+_+"$(?!\\s)",T)),h&&(E=x.lastIndex),P=c.call(b?I:x,k),b?P?(P.input=P.input.slice(S),P[0]=P[0].slice(S),P.index=x.lastIndex,x.lastIndex+=P[0].length):x.lastIndex=0:h&&P&&(x.lastIndex=x.global?P.index+P[0].length:E),m&&P&&P.length>1&&u.call(P[0],I,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(P[w]=void 0)}),P}),s.exports=d},"94ca":function(s,i,a){var o=a("d039"),l=/#|\.prototype\./,c=function(m,g){var v=d[u(m)];return v==p?!0:v==h?!1:typeof g=="function"?o(g):!!g},u=c.normalize=function(m){return String(m).replace(l,".").toLowerCase()},d=c.data={},h=c.NATIVE="N",p=c.POLYFILL="P";s.exports=c},"99af":function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("e8b5"),u=a("861d"),d=a("7b0b"),h=a("50c4"),p=a("8418"),m=a("65f0"),g=a("1dde"),v=a("b622"),y=a("2d00"),x=v("isConcatSpreadable"),E=9007199254740991,I="Maximum allowed index exceeded",P=y>=51||!l(function(){var _=[];return _[x]=!1,_.concat()[0]!==_}),w=g("concat"),b=function(_){if(!u(_))return!1;var S=_[x];return S!==void 0?!!S:c(_)},T=!P||!w;o({target:"Array",proto:!0,forced:T},{concat:function(S){var k=d(this),A=m(k,0),D=0,N,R,F,O,B;for(N=-1,F=arguments.length;N<F;N++)if(B=N===-1?k:arguments[N],b(B)){if(O=h(B.length),D+O>E)throw TypeError(I);for(R=0;R<O;R++,D++)R in B&&p(A,D,B[R])}else{if(D>=E)throw TypeError(I);p(A,D++,B)}return A.length=D,A}})},"9bdd":function(s,i,a){var o=a("825a");s.exports=function(l,c,u,d){try{return d?c(o(u)[0],u[1]):c(u)}catch(p){var h=l.return;throw h!==void 0&&o(h.call(l)),p}}},"9bf2":function(s,i,a){var o=a("83ab"),l=a("0cfb"),c=a("825a"),u=a("c04e"),d=Object.defineProperty;i.f=o?d:function(p,m,g){if(c(p),m=u(m,!0),c(g),l)try{return d(p,m,g)}catch{}if("get"in g||"set"in g)throw TypeError("Accessors not supported");return"value"in g&&(p[m]=g.value),p}},"9ed3":function(s,i,a){var o=a("ae93").IteratorPrototype,l=a("7c73"),c=a("5c6c"),u=a("d44e"),d=a("3f8c"),h=function(){return this};s.exports=function(p,m,g){var v=m+" Iterator";return p.prototype=l(o,{next:c(1,g)}),u(p,v,!1,!0),d[v]=h,p}},"9f7f":function(s,i,a){var o=a("d039");function l(c,u){return RegExp(c,u)}i.UNSUPPORTED_Y=o(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),i.BROKEN_CARET=o(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(s,i,a){var o=a("e8b5"),l=a("50c4"),c=a("0366"),u=function(d,h,p,m,g,v,y,x){for(var E=g,I=0,P=y?c(y,x,3):!1,w;I<m;){if(I in p){if(w=P?P(p[I],I,h):p[I],v>0&&o(w))E=u(d,h,w,l(w.length),E,v-1)-1;else{if(E>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[E]=w}E++}I++}return E};s.exports=u},a352:function(s,i){s.exports=n},a434:function(s,i,a){var o=a("23e7"),l=a("23cb"),c=a("a691"),u=a("50c4"),d=a("7b0b"),h=a("65f0"),p=a("8418"),m=a("1dde"),g=a("ae40"),v=m("splice"),y=g("splice",{ACCESSORS:!0,0:0,1:2}),x=Math.max,E=Math.min,I=9007199254740991,P="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!v||!y},{splice:function(b,T){var _=d(this),S=u(_.length),k=l(b,S),A=arguments.length,D,N,R,F,O,B;if(A===0?D=N=0:A===1?(D=0,N=S-k):(D=A-2,N=E(x(c(T),0),S-k)),S+D-N>I)throw TypeError(P);for(R=h(_,N),F=0;F<N;F++)O=k+F,O in _&&p(R,F,_[O]);if(R.length=N,D<N){for(F=k;F<S-N;F++)O=F+N,B=F+D,O in _?_[B]=_[O]:delete _[B];for(F=S;F>S-N+D;F--)delete _[F-1]}else if(D>N)for(F=S-N;F>k;F--)O=F+N-1,B=F+D-1,O in _?_[B]=_[O]:delete _[B];for(F=0;F<D;F++)_[F+k]=arguments[F+2];return _.length=S-N+D,R}})},a4d3:function(s,i,a){var o=a("23e7"),l=a("da84"),c=a("d066"),u=a("c430"),d=a("83ab"),h=a("4930"),p=a("fdbf"),m=a("d039"),g=a("5135"),v=a("e8b5"),y=a("861d"),x=a("825a"),E=a("7b0b"),I=a("fc6a"),P=a("c04e"),w=a("5c6c"),b=a("7c73"),T=a("df75"),_=a("241c"),S=a("057f"),k=a("7418"),A=a("06cf"),D=a("9bf2"),N=a("d1e7"),R=a("9112"),F=a("6eeb"),O=a("5692"),B=a("f772"),V=a("d012"),z=a("90e3"),H=a("b622"),j=a("e538"),W=a("746f"),K=a("d44e"),re=a("69f3"),he=a("b727").forEach,ue=B("hidden"),pe="Symbol",te="prototype",Y=H("toPrimitive"),Ee=re.set,X=re.getterFor(pe),q=Object[te],J=l.Symbol,ge=c("JSON","stringify"),ae=A.f,se=D.f,le=S.f,xe=N.f,ve=O("symbols"),Ce=O("op-symbols"),we=O("string-to-symbol-registry"),Ge=O("symbol-to-string-registry"),ke=O("wks"),$e=l.QObject,Be=!$e||!$e[te]||!$e[te].findChild,We=d&&m(function(){return b(se({},"a",{get:function(){return se(this,"a",{value:7}).a}})).a!=7})?function(ft,ct,mt){var It=ae(q,ct);It&&delete q[ct],se(ft,ct,mt),It&&ft!==q&&se(q,ct,It)}:se,ze=function(ft,ct){var mt=ve[ft]=b(J[te]);return Ee(mt,{type:pe,tag:ft,description:ct}),d||(mt.description=ct),mt},be=p?function(ft){return typeof ft=="symbol"}:function(ft){return Object(ft)instanceof J},ye=function(ct,mt,It){ct===q&&ye(Ce,mt,It),x(ct);var Rt=P(mt,!0);return x(It),g(ve,Rt)?(It.enumerable?(g(ct,ue)&&ct[ue][Rt]&&(ct[ue][Rt]=!1),It=b(It,{enumerable:w(0,!1)})):(g(ct,ue)||se(ct,ue,w(1,{})),ct[ue][Rt]=!0),We(ct,Rt,It)):se(ct,Rt,It)},Te=function(ct,mt){x(ct);var It=I(mt),Rt=T(It).concat(yt(It));return he(Rt,function(Er){(!d||He.call(It,Er))&&ye(ct,Er,It[Er])}),ct},Ne=function(ct,mt){return mt===void 0?b(ct):Te(b(ct),mt)},He=function(ct){var mt=P(ct,!0),It=xe.call(this,mt);return this===q&&g(ve,mt)&&!g(Ce,mt)?!1:It||!g(this,mt)||!g(ve,mt)||g(this,ue)&&this[ue][mt]?It:!0},ot=function(ct,mt){var It=I(ct),Rt=P(mt,!0);if(!(It===q&&g(ve,Rt)&&!g(Ce,Rt))){var Er=ae(It,Rt);return Er&&g(ve,Rt)&&!(g(It,ue)&&It[ue][Rt])&&(Er.enumerable=!0),Er}},gt=function(ct){var mt=le(I(ct)),It=[];return he(mt,function(Rt){!g(ve,Rt)&&!g(V,Rt)&&It.push(Rt)}),It},yt=function(ct){var mt=ct===q,It=le(mt?Ce:I(ct)),Rt=[];return he(It,function(Er){g(ve,Er)&&(!mt||g(q,Er))&&Rt.push(ve[Er])}),Rt};if(h||(J=function(){if(this instanceof J)throw TypeError("Symbol is not a constructor");var ct=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),mt=z(ct),It=function(Rt){this===q&&It.call(Ce,Rt),g(this,ue)&&g(this[ue],mt)&&(this[ue][mt]=!1),We(this,mt,w(1,Rt))};return d&&Be&&We(q,mt,{configurable:!0,set:It}),ze(mt,ct)},F(J[te],"toString",function(){return X(this).tag}),F(J,"withoutSetter",function(ft){return ze(z(ft),ft)}),N.f=He,D.f=ye,A.f=ot,_.f=S.f=gt,k.f=yt,j.f=function(ft){return ze(H(ft),ft)},d&&(se(J[te],"description",{configurable:!0,get:function(){return X(this).description}}),u||F(q,"propertyIsEnumerable",He,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:J}),he(T(ke),function(ft){W(ft)}),o({target:pe,stat:!0,forced:!h},{for:function(ft){var ct=String(ft);if(g(we,ct))return we[ct];var mt=J(ct);return we[ct]=mt,Ge[mt]=ct,mt},keyFor:function(ct){if(!be(ct))throw TypeError(ct+" is not a symbol");if(g(Ge,ct))return Ge[ct]},useSetter:function(){Be=!0},useSimple:function(){Be=!1}}),o({target:"Object",stat:!0,forced:!h,sham:!d},{create:Ne,defineProperty:ye,defineProperties:Te,getOwnPropertyDescriptor:ot}),o({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:gt,getOwnPropertySymbols:yt}),o({target:"Object",stat:!0,forced:m(function(){k.f(1)})},{getOwnPropertySymbols:function(ct){return k.f(E(ct))}}),ge){var Mt=!h||m(function(){var ft=J();return ge([ft])!="[null]"||ge({a:ft})!="{}"||ge(Object(ft))!="{}"});o({target:"JSON",stat:!0,forced:Mt},{stringify:function(ct,mt,It){for(var Rt=[ct],Er=1,Yn;arguments.length>Er;)Rt.push(arguments[Er++]);if(Yn=mt,!(!y(mt)&&ct===void 0||be(ct)))return v(mt)||(mt=function(Ti,ls){if(typeof Yn=="function"&&(ls=Yn.call(this,Ti,ls)),!be(ls))return ls}),Rt[1]=mt,ge.apply(null,Rt)}})}J[te][Y]||R(J[te],Y,J[te].valueOf),K(J,pe),V[ue]=!0},a630:function(s,i,a){var o=a("23e7"),l=a("4df4"),c=a("1c7e"),u=!c(function(d){Array.from(d)});o({target:"Array",stat:!0,forced:u},{from:l})},a640:function(s,i,a){var o=a("d039");s.exports=function(l,c){var u=[][l];return!!u&&o(function(){u.call(null,c||function(){throw 1},1)})}},a691:function(s,i){var a=Math.ceil,o=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(l>0?o:a)(l)}},ab13:function(s,i,a){var o=a("b622"),l=o("match");s.exports=function(c){var u=/./;try{"/./"[c](u)}catch{try{return u[l]=!1,"/./"[c](u)}catch{}}return!1}},ac1f:function(s,i,a){var o=a("23e7"),l=a("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(s,i,a){var o=a("825a");s.exports=function(){var l=o(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("5135"),u=Object.defineProperty,d={},h=function(p){throw p};s.exports=function(p,m){if(c(d,p))return d[p];m||(m={});var g=[][p],v=c(m,"ACCESSORS")?m.ACCESSORS:!1,y=c(m,0)?m[0]:h,x=c(m,1)?m[1]:void 0;return d[p]=!!g&&!l(function(){if(v&&!o)return!0;var E={length:-1};v?u(E,1,{enumerable:!0,get:h}):E[1]=1,g.call(E,y,x)})}},ae93:function(s,i,a){var o=a("e163"),l=a("9112"),c=a("5135"),u=a("b622"),d=a("c430"),h=u("iterator"),p=!1,m=function(){return this},g,v,y;[].keys&&(y=[].keys(),"next"in y?(v=o(o(y)),v!==Object.prototype&&(g=v)):p=!0),g==null&&(g={}),!d&&!c(g,h)&&l(g,h,m),s.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:p}},b041:function(s,i,a){var o=a("00ee"),l=a("f5df");s.exports=o?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(s,i,a){var o=a("83ab"),l=a("9bf2").f,c=Function.prototype,u=c.toString,d=/^\s*function ([^ (]*)/,h="name";o&&!(h in c)&&l(c,h,{configurable:!0,get:function(){try{return u.call(this).match(d)[1]}catch{return""}}})},b622:function(s,i,a){var o=a("da84"),l=a("5692"),c=a("5135"),u=a("90e3"),d=a("4930"),h=a("fdbf"),p=l("wks"),m=o.Symbol,g=h?m:m&&m.withoutSetter||u;s.exports=function(v){return c(p,v)||(d&&c(m,v)?p[v]=m[v]:p[v]=g("Symbol."+v)),p[v]}},b64b:function(s,i,a){var o=a("23e7"),l=a("7b0b"),c=a("df75"),u=a("d039"),d=u(function(){c(1)});o({target:"Object",stat:!0,forced:d},{keys:function(p){return c(l(p))}})},b727:function(s,i,a){var o=a("0366"),l=a("44ad"),c=a("7b0b"),u=a("50c4"),d=a("65f0"),h=[].push,p=function(m){var g=m==1,v=m==2,y=m==3,x=m==4,E=m==6,I=m==5||E;return function(P,w,b,T){for(var _=c(P),S=l(_),k=o(w,b,3),A=u(S.length),D=0,N=T||d,R=g?N(P,A):v?N(P,0):void 0,F,O;A>D;D++)if((I||D in S)&&(F=S[D],O=k(F,D,_),m)){if(g)R[D]=O;else if(O)switch(m){case 3:return!0;case 5:return F;case 6:return D;case 2:h.call(R,F)}else if(x)return!1}return E?-1:y||x?x:R}};s.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6)}},c04e:function(s,i,a){var o=a("861d");s.exports=function(l,c){if(!o(l))return l;var u,d;if(c&&typeof(u=l.toString)=="function"&&!o(d=u.call(l))||typeof(u=l.valueOf)=="function"&&!o(d=u.call(l))||!c&&typeof(u=l.toString)=="function"&&!o(d=u.call(l)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(s,i){s.exports=!1},c6b6:function(s,i){var a={}.toString;s.exports=function(o){return a.call(o).slice(8,-1)}},c6cd:function(s,i,a){var o=a("da84"),l=a("ce4e"),c="__core-js_shared__",u=o[c]||l(c,{});s.exports=u},c740:function(s,i,a){var o=a("23e7"),l=a("b727").findIndex,c=a("44d2"),u=a("ae40"),d="findIndex",h=!0,p=u(d);d in[]&&Array(1)[d](function(){h=!1}),o({target:"Array",proto:!0,forced:h||!p},{findIndex:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}}),c(d)},c8ba:function(s,i){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}s.exports=a},c975:function(s,i,a){var o=a("23e7"),l=a("4d64").indexOf,c=a("a640"),u=a("ae40"),d=[].indexOf,h=!!d&&1/[1].indexOf(1,-0)<0,p=c("indexOf"),m=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:h||!p||!m},{indexOf:function(v){return h?d.apply(this,arguments)||0:l(this,v,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,i,a){var o=a("5135"),l=a("fc6a"),c=a("4d64").indexOf,u=a("d012");s.exports=function(d,h){var p=l(d),m=0,g=[],v;for(v in p)!o(u,v)&&o(p,v)&&g.push(v);for(;h.length>m;)o(p,v=h[m++])&&(~c(g,v)||g.push(v));return g}},caad:function(s,i,a){var o=a("23e7"),l=a("4d64").includes,c=a("44d2"),u=a("ae40"),d=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!d},{includes:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(s,i,a){var o=a("da84"),l=a("861d"),c=o.document,u=l(c)&&l(c.createElement);s.exports=function(d){return u?c.createElement(d):{}}},ce4e:function(s,i,a){var o=a("da84"),l=a("9112");s.exports=function(c,u){try{l(o,c,u)}catch{o[c]=u}return u}},d012:function(s,i){s.exports={}},d039:function(s,i){s.exports=function(a){try{return!!a()}catch{return!0}}},d066:function(s,i,a){var o=a("428f"),l=a("da84"),c=function(u){return typeof u=="function"?u:void 0};s.exports=function(u,d){return arguments.length<2?c(o[u])||c(l[u]):o[u]&&o[u][d]||l[u]&&l[u][d]}},d1e7:function(s,i,a){var o={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!o.call({1:2},1);i.f=c?function(d){var h=l(this,d);return!!h&&h.enumerable}:o},d28b:function(s,i,a){var o=a("746f");o("iterator")},d2bb:function(s,i,a){var o=a("825a"),l=a("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,u={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(u,[]),c=u instanceof Array}catch{}return function(p,m){return o(p),l(m),c?d.call(p,m):p.__proto__=m,p}}():void 0)},d3b7:function(s,i,a){var o=a("00ee"),l=a("6eeb"),c=a("b041");o||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(s,i,a){var o=a("9bf2").f,l=a("5135"),c=a("b622"),u=c("toStringTag");s.exports=function(d,h,p){d&&!l(d=p?d:d.prototype,u)&&o(d,u,{configurable:!0,value:h})}},d58f:function(s,i,a){var o=a("1c0b"),l=a("7b0b"),c=a("44ad"),u=a("50c4"),d=function(h){return function(p,m,g,v){o(m);var y=l(p),x=c(y),E=u(y.length),I=h?E-1:0,P=h?-1:1;if(g<2)for(;;){if(I in x){v=x[I],I+=P;break}if(I+=P,h?I<0:E<=I)throw TypeError("Reduce of empty array with no initial value")}for(;h?I>=0:E>I;I+=P)I in x&&(v=m(v,x[I],I,y));return v}};s.exports={left:d(!1),right:d(!0)}},d784:function(s,i,a){a("ac1f");var o=a("6eeb"),l=a("d039"),c=a("b622"),u=a("9263"),d=a("9112"),h=c("species"),p=!l(function(){var x=/./;return x.exec=function(){var E=[];return E.groups={a:"7"},E},"".replace(x,"$<a>")!=="7"}),m=function(){return"a".replace(/./,"$0")==="$0"}(),g=c("replace"),v=function(){return/./[g]?/./[g]("a","$0")==="":!1}(),y=!l(function(){var x=/(?:)/,E=x.exec;x.exec=function(){return E.apply(this,arguments)};var I="ab".split(x);return I.length!==2||I[0]!=="a"||I[1]!=="b"});s.exports=function(x,E,I,P){var w=c(x),b=!l(function(){var D={};return D[w]=function(){return 7},""[x](D)!=7}),T=b&&!l(function(){var D=!1,N=/a/;return x==="split"&&(N={},N.constructor={},N.constructor[h]=function(){return N},N.flags="",N[w]=/./[w]),N.exec=function(){return D=!0,null},N[w](""),!D});if(!b||!T||x==="replace"&&!(p&&m&&!v)||x==="split"&&!y){var _=/./[w],S=I(w,""[x],function(D,N,R,F,O){return N.exec===u?b&&!O?{done:!0,value:_.call(N,R,F)}:{done:!0,value:D.call(R,N,F)}:{done:!1}},{REPLACE_KEEPS_$0:m,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:v}),k=S[0],A=S[1];o(String.prototype,x,k),o(RegExp.prototype,w,E==2?function(D,N){return A.call(D,this,N)}:function(D){return A.call(D,this)})}P&&d(RegExp.prototype[w],"sham",!0)}},d81d:function(s,i,a){var o=a("23e7"),l=a("b727").map,c=a("1dde"),u=a("ae40"),d=c("map"),h=u("map");o({target:"Array",proto:!0,forced:!d||!h},{map:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,i,a){(function(o){var l=function(c){return c&&c.Math==Math&&c};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof o=="object"&&o)||Function("return this")()}).call(this,a("c8ba"))},dbb4:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("56ef"),u=a("fc6a"),d=a("06cf"),h=a("8418");o({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(m){for(var g=u(m),v=d.f,y=c(g),x={},E=0,I,P;y.length>E;)P=v(g,I=y[E++]),P!==void 0&&h(x,I,P);return x}})},dbf1:function(s,i,a){(function(o){a.d(i,"a",function(){return c});function l(){return typeof window<"u"?window.console:o.console}var c=l()}).call(this,a("c8ba"))},ddb0:function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("e260"),u=a("9112"),d=a("b622"),h=d("iterator"),p=d("toStringTag"),m=c.values;for(var g in l){var v=o[g],y=v&&v.prototype;if(y){if(y[h]!==m)try{u(y,h,m)}catch{y[h]=m}if(y[p]||u(y,p,g),l[g]){for(var x in c)if(y[x]!==c[x])try{u(y,x,c[x])}catch{y[x]=c[x]}}}}},df75:function(s,i,a){var o=a("ca84"),l=a("7839");s.exports=Object.keys||function(u){return o(u,l)}},e01a:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("da84"),u=a("5135"),d=a("861d"),h=a("9bf2").f,p=a("e893"),m=c.Symbol;if(l&&typeof m=="function"&&(!("description"in m.prototype)||m().description!==void 0)){var g={},v=function(){var w=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),b=this instanceof v?new m(w):w===void 0?m():m(w);return w===""&&(g[b]=!0),b};p(v,m);var y=v.prototype=m.prototype;y.constructor=v;var x=y.toString,E=String(m("test"))=="Symbol(test)",I=/^Symbol\((.*)\)[^)]+$/;h(y,"description",{configurable:!0,get:function(){var w=d(this)?this.valueOf():this,b=x.call(w);if(u(g,w))return"";var T=E?b.slice(7,-1):b.replace(I,"$1");return T===""?void 0:T}}),o({global:!0,forced:!0},{Symbol:v})}},e163:function(s,i,a){var o=a("5135"),l=a("7b0b"),c=a("f772"),u=a("e177"),d=c("IE_PROTO"),h=Object.prototype;s.exports=u?Object.getPrototypeOf:function(p){return p=l(p),o(p,d)?p[d]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?h:null}},e177:function(s,i,a){var o=a("d039");s.exports=!o(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(s,i,a){var o=a("fc6a"),l=a("44d2"),c=a("3f8c"),u=a("69f3"),d=a("7dd0"),h="Array Iterator",p=u.set,m=u.getterFor(h);s.exports=d(Array,"Array",function(g,v){p(this,{type:h,target:o(g),index:0,kind:v})},function(){var g=m(this),v=g.target,y=g.kind,x=g.index++;return!v||x>=v.length?(g.target=void 0,{value:void 0,done:!0}):y=="keys"?{value:x,done:!1}:y=="values"?{value:v[x],done:!1}:{value:[x,v[x]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("fc6a"),u=a("06cf").f,d=a("83ab"),h=l(function(){u(1)}),p=!d||h;o({target:"Object",stat:!0,forced:p,sham:!d},{getOwnPropertyDescriptor:function(g,v){return u(c(g),v)}})},e538:function(s,i,a){var o=a("b622");i.f=o},e893:function(s,i,a){var o=a("5135"),l=a("56ef"),c=a("06cf"),u=a("9bf2");s.exports=function(d,h){for(var p=l(h),m=u.f,g=c.f,v=0;v<p.length;v++){var y=p[v];o(d,y)||m(d,y,g(h,y))}}},e8b5:function(s,i,a){var o=a("c6b6");s.exports=Array.isArray||function(c){return o(c)=="Array"}},e95a:function(s,i,a){var o=a("b622"),l=a("3f8c"),c=o("iterator"),u=Array.prototype;s.exports=function(d){return d!==void 0&&(l.Array===d||u[c]===d)}},f5df:function(s,i,a){var o=a("00ee"),l=a("c6b6"),c=a("b622"),u=c("toStringTag"),d=l(function(){return arguments}())=="Arguments",h=function(p,m){try{return p[m]}catch{}};s.exports=o?l:function(p){var m,g,v;return p===void 0?"Undefined":p===null?"Null":typeof(g=h(m=Object(p),u))=="string"?g:d?l(m):(v=l(m))=="Object"&&typeof m.callee=="function"?"Arguments":v}},f772:function(s,i,a){var o=a("5692"),l=a("90e3"),c=o("keys");s.exports=function(u){return c[u]||(c[u]=l(u))}},fb15:function(s,i,a){if(a.r(i),typeof window<"u"){var o=window.document.currentScript;{var l=a("8875");o=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(a.p=c[1])}a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("159b"),a("a4d3"),a("e439"),a("dbb4"),a("b64b");function u(be,ye,Te){return ye in be?Object.defineProperty(be,ye,{value:Te,enumerable:!0,configurable:!0,writable:!0}):be[ye]=Te,be}function d(be,ye){var Te=Object.keys(be);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(be);ye&&(Ne=Ne.filter(function(He){return Object.getOwnPropertyDescriptor(be,He).enumerable})),Te.push.apply(Te,Ne)}return Te}function h(be){for(var ye=1;ye<arguments.length;ye++){var Te=arguments[ye]!=null?arguments[ye]:{};ye%2?d(Object(Te),!0).forEach(function(Ne){u(be,Ne,Te[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(Te)):d(Object(Te)).forEach(function(Ne){Object.defineProperty(be,Ne,Object.getOwnPropertyDescriptor(Te,Ne))})}return be}function p(be){if(Array.isArray(be))return be}a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function m(be,ye){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(be)))){var Te=[],Ne=!0,He=!1,ot=void 0;try{for(var gt=be[Symbol.iterator](),yt;!(Ne=(yt=gt.next()).done)&&(Te.push(yt.value),!(ye&&Te.length===ye));Ne=!0);}catch(Mt){He=!0,ot=Mt}finally{try{!Ne&&gt.return!=null&&gt.return()}finally{if(He)throw ot}}return Te}}a("a630"),a("fb6a"),a("b0c0"),a("25f0");function g(be,ye){(ye==null||ye>be.length)&&(ye=be.length);for(var Te=0,Ne=new Array(ye);Te<ye;Te++)Ne[Te]=be[Te];return Ne}function v(be,ye){if(be){if(typeof be=="string")return g(be,ye);var Te=Object.prototype.toString.call(be).slice(8,-1);if(Te==="Object"&&be.constructor&&(Te=be.constructor.name),Te==="Map"||Te==="Set")return Array.from(be);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return g(be,ye)}}function y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x(be,ye){return p(be)||m(be,ye)||v(be,ye)||y()}function E(be){if(Array.isArray(be))return g(be)}function I(be){if(typeof Symbol<"u"&&Symbol.iterator in Object(be))return Array.from(be)}function P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w(be){return E(be)||I(be)||v(be)||P()}var b=a("a352"),T=a.n(b);function _(be){be.parentElement!==null&&be.parentElement.removeChild(be)}function S(be,ye,Te){var Ne=Te===0?be.children[0]:be.children[Te-1].nextSibling;be.insertBefore(ye,Ne)}var k=a("dbf1");a("13d5"),a("4fad"),a("ac1f"),a("5319");function A(be){var ye=Object.create(null);return function(Ne){var He=ye[Ne];return He||(ye[Ne]=be(Ne))}}var D=/-(\w)/g,N=A(function(be){return be.replace(D,function(ye,Te){return Te.toUpperCase()})});a("5db7"),a("73d9");var R=["Start","Add","Remove","Update","End"],F=["Choose","Unchoose","Sort","Filter","Clone"],O=["Move"],B=[O,R,F].flatMap(function(be){return be}).map(function(be){return"on".concat(be)}),V={manage:O,manageAndEmit:R,emit:F};function z(be){return B.indexOf(be)!==-1}a("caad"),a("2ca0");var H=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function j(be){return H.includes(be)}function W(be){return["transition-group","TransitionGroup"].includes(be)}function K(be){return["id","class","role","style"].includes(be)||be.startsWith("data-")||be.startsWith("aria-")||be.startsWith("on")}function re(be){return be.reduce(function(ye,Te){var Ne=x(Te,2),He=Ne[0],ot=Ne[1];return ye[He]=ot,ye},{})}function he(be){var ye=be.$attrs,Te=be.componentData,Ne=Te===void 0?{}:Te,He=re(Object.entries(ye).filter(function(ot){var gt=x(ot,2),yt=gt[0];return gt[1],K(yt)}));return h(h({},He),Ne)}function ue(be){var ye=be.$attrs,Te=be.callBackBuilder,Ne=re(pe(ye));Object.entries(Te).forEach(function(ot){var gt=x(ot,2),yt=gt[0],Mt=gt[1];V[yt].forEach(function(ft){Ne["on".concat(ft)]=Mt(ft)})});var He="[data-draggable]".concat(Ne.draggable||"");return h(h({},Ne),{},{draggable:He})}function pe(be){return Object.entries(be).filter(function(ye){var Te=x(ye,2),Ne=Te[0];return Te[1],!K(Ne)}).map(function(ye){var Te=x(ye,2),Ne=Te[0],He=Te[1];return[N(Ne),He]}).filter(function(ye){var Te=x(ye,2),Ne=Te[0];return Te[1],!z(Ne)})}a("c740");function te(be,ye){if(!(be instanceof ye))throw new TypeError("Cannot call a class as a function")}function Y(be,ye){for(var Te=0;Te<ye.length;Te++){var Ne=ye[Te];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(be,Ne.key,Ne)}}function Ee(be,ye,Te){return ye&&Y(be.prototype,ye),be}var X=function(ye){var Te=ye.el;return Te},q=function(ye,Te){return ye.__draggable_context=Te},J=function(ye){return ye.__draggable_context},ge=function(){function be(ye){var Te=ye.nodes,Ne=Te.header,He=Te.default,ot=Te.footer,gt=ye.root,yt=ye.realList;te(this,be),this.defaultNodes=He,this.children=[].concat(w(Ne),w(He),w(ot)),this.externalComponent=gt.externalComponent,this.rootTransition=gt.transition,this.tag=gt.tag,this.realList=yt}return Ee(be,[{key:"render",value:function(Te,Ne){var He=this.tag,ot=this.children,gt=this._isRootComponent,yt=gt?{default:function(){return ot}}:ot;return Te(He,Ne,yt)}},{key:"updated",value:function(){var Te=this.defaultNodes,Ne=this.realList;Te.forEach(function(He,ot){q(X(He),{element:Ne[ot],index:ot})})}},{key:"getUnderlyingVm",value:function(Te){return J(Te)}},{key:"getVmIndexFromDomIndex",value:function(Te,Ne){var He=this.defaultNodes,ot=He.length,gt=Ne.children,yt=gt.item(Te);if(yt===null)return ot;var Mt=J(yt);if(Mt)return Mt.index;if(ot===0)return 0;var ft=X(He[0]),ct=w(gt).findIndex(function(mt){return mt===ft});return Te<ct?0:ot}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),be}(),ae=a("8bbf");function se(be,ye){var Te=be[ye];return Te?Te():[]}function le(be){var ye=be.$slots,Te=be.realList,Ne=be.getKey,He=Te||[],ot=["header","footer"].map(function(mt){return se(ye,mt)}),gt=x(ot,2),yt=gt[0],Mt=gt[1],ft=ye.item;if(!ft)throw new Error("draggable element must have an item slot");var ct=He.flatMap(function(mt,It){return ft({element:mt,index:It}).map(function(Rt){return Rt.key=Ne(mt),Rt.props=h(h({},Rt.props||{}),{},{"data-draggable":!0}),Rt})});if(ct.length!==He.length)throw new Error("Item slot must have only one child");return{header:yt,footer:Mt,default:ct}}function xe(be){var ye=W(be),Te=!j(be)&&!ye;return{transition:ye,externalComponent:Te,tag:Te?Object(ae.resolveComponent)(be):ye?ae.TransitionGroup:be}}function ve(be){var ye=be.$slots,Te=be.tag,Ne=be.realList,He=be.getKey,ot=le({$slots:ye,realList:Ne,getKey:He}),gt=xe(Te);return new ge({nodes:ot,root:gt,realList:Ne})}function Ce(be,ye){var Te=this;Object(ae.nextTick)(function(){return Te.$emit(be.toLowerCase(),ye)})}function we(be){var ye=this;return function(Te,Ne){if(ye.realList!==null)return ye["onDrag".concat(be)](Te,Ne)}}function Ge(be){var ye=this,Te=we.call(this,be);return function(Ne,He){Te.call(ye,Ne,He),Ce.call(ye,be,Ne)}}var ke=null,$e={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ye){return ye}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Be=["update:modelValue","change"].concat(w([].concat(w(V.manageAndEmit),w(V.emit)).map(function(be){return be.toLowerCase()}))),We=Object(ae.defineComponent)({name:"draggable",inheritAttrs:!1,props:$e,emits:Be,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ye=this.$slots,Te=this.$attrs,Ne=this.tag,He=this.componentData,ot=this.realList,gt=this.getKey,yt=ve({$slots:ye,tag:Ne,realList:ot,getKey:gt});this.componentStructure=yt;var Mt=he({$attrs:Te,componentData:He});return yt.render(ae.h,Mt)}catch(ft){return this.error=!0,Object(ae.h)("pre",{style:{color:"red"}},ft.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&k.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ye=this;if(!this.error){var Te=this.$attrs,Ne=this.$el,He=this.componentStructure;He.updated();var ot=ue({$attrs:Te,callBackBuilder:{manageAndEmit:function(Mt){return Ge.call(ye,Mt)},emit:function(Mt){return Ce.bind(ye,Mt)},manage:function(Mt){return we.call(ye,Mt)}}}),gt=Ne.nodeType===1?Ne:Ne.parentElement;this._sortable=new T.a(gt,ot),this.targetDomElement=gt,gt.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ye=this.list;return ye||this.modelValue},getKey:function(){var ye=this.itemKey;return typeof ye=="function"?ye:function(Te){return Te[ye]}}},watch:{$attrs:{handler:function(ye){var Te=this._sortable;Te&&pe(ye).forEach(function(Ne){var He=x(Ne,2),ot=He[0],gt=He[1];Te.option(ot,gt)})},deep:!0}},methods:{getUnderlyingVm:function(ye){return this.componentStructure.getUnderlyingVm(ye)||null},getUnderlyingPotencialDraggableComponent:function(ye){return ye.__draggable_component__},emitChanges:function(ye){var Te=this;Object(ae.nextTick)(function(){return Te.$emit("change",ye)})},alterList:function(ye){if(this.list){ye(this.list);return}var Te=w(this.modelValue);ye(Te),this.$emit("update:modelValue",Te)},spliceList:function(){var ye=arguments,Te=function(He){return He.splice.apply(He,w(ye))};this.alterList(Te)},updatePosition:function(ye,Te){var Ne=function(ot){return ot.splice(Te,0,ot.splice(ye,1)[0])};this.alterList(Ne)},getRelatedContextFromMoveEvent:function(ye){var Te=ye.to,Ne=ye.related,He=this.getUnderlyingPotencialDraggableComponent(Te);if(!He)return{component:He};var ot=He.realList,gt={list:ot,component:He};if(Te!==Ne&&ot){var yt=He.getUnderlyingVm(Ne)||{};return h(h({},yt),gt)}return gt},getVmIndexFromDomIndex:function(ye){return this.componentStructure.getVmIndexFromDomIndex(ye,this.targetDomElement)},onDragStart:function(ye){this.context=this.getUnderlyingVm(ye.item),ye.item._underlying_vm_=this.clone(this.context.element),ke=ye.item},onDragAdd:function(ye){var Te=ye.item._underlying_vm_;if(Te!==void 0){_(ye.item);var Ne=this.getVmIndexFromDomIndex(ye.newIndex);this.spliceList(Ne,0,Te);var He={element:Te,newIndex:Ne};this.emitChanges({added:He})}},onDragRemove:function(ye){if(S(this.$el,ye.item,ye.oldIndex),ye.pullMode==="clone"){_(ye.clone);return}var Te=this.context,Ne=Te.index,He=Te.element;this.spliceList(Ne,1);var ot={element:He,oldIndex:Ne};this.emitChanges({removed:ot})},onDragUpdate:function(ye){_(ye.item),S(ye.from,ye.item,ye.oldIndex);var Te=this.context.index,Ne=this.getVmIndexFromDomIndex(ye.newIndex);this.updatePosition(Te,Ne);var He={element:this.context.element,oldIndex:Te,newIndex:Ne};this.emitChanges({moved:He})},computeFutureIndex:function(ye,Te){if(!ye.element)return 0;var Ne=w(Te.to.children).filter(function(yt){return yt.style.display!=="none"}),He=Ne.indexOf(Te.related),ot=ye.component.getVmIndexFromDomIndex(He),gt=Ne.indexOf(ke)!==-1;return gt||!Te.willInsertAfter?ot:ot+1},onDragMove:function(ye,Te){var Ne=this.move,He=this.realList;if(!Ne||!He)return!0;var ot=this.getRelatedContextFromMoveEvent(ye),gt=this.computeFutureIndex(ot,ye),yt=h(h({},this.context),{},{futureIndex:gt}),Mt=h(h({},ye),{},{relatedContext:ot,draggedContext:yt});return Ne(Mt,Te)},onDragEnd:function(){ke=null}}}),ze=We;i.default=ze},fb6a:function(s,i,a){var o=a("23e7"),l=a("861d"),c=a("e8b5"),u=a("23cb"),d=a("50c4"),h=a("fc6a"),p=a("8418"),m=a("b622"),g=a("1dde"),v=a("ae40"),y=g("slice"),x=v("slice",{ACCESSORS:!0,0:0,1:2}),E=m("species"),I=[].slice,P=Math.max;o({target:"Array",proto:!0,forced:!y||!x},{slice:function(b,T){var _=h(this),S=d(_.length),k=u(b,S),A=u(T===void 0?S:T,S),D,N,R;if(c(_)&&(D=_.constructor,typeof D=="function"&&(D===Array||c(D.prototype))?D=void 0:l(D)&&(D=D[E],D===null&&(D=void 0)),D===Array||D===void 0))return I.call(_,k,A);for(N=new(D===void 0?Array:D)(P(A-k,0)),R=0;k<A;k++,R++)k in _&&p(N,R,_[k]);return N.length=R,N}})},fc6a:function(s,i,a){var o=a("44ad"),l=a("1d80");s.exports=function(c){return o(l(c))}},fdbc:function(s,i){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,i,a){var o=a("4930");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(Wse);const Dae={class:"assignment-dialog-modal"},Pae={class:"form-row"},Fae={key:0,class:"form-row"},Rae=["value"],Oae={key:1,class:"form-row"},Nae=["value"],Mae={key:2,class:"form-row"},Lae={class:"form-row"},Bae={class:"form-row"},Uae={class:"form-row"},$ae={class:"dialog-actions"},Vae={__name:"AssignmentDialog",props:{teachers:Array,students:Array,assignment:Object},emits:["save","close"],setup(t,{emit:e}){const r=t,n=e,s=ne("lunch"),i=ne(""),a=ne(""),o=ne(""),l=ne("12:00"),c=ne("12:30"),u=ne(""),d=ne(""),h=ne("");Ut(()=>r.assignment,g=>{g?(d.value=g.id||Date.now().toString(),h.value=g.blockId||d.value||`block-${Date.now()}`,s.value=g.type||"lunch",i.value=g.teacherId||"",a.value=g.studentId||"",o.value=g.type==="other"?g.label:"",l.value=g.start||"12:00",c.value=g.end||"12:30",u.value=g.note||""):(d.value=Date.now().toString(),h.value=`block-${d.value}`,s.value="lunch",i.value="",a.value="",o.value="",l.value="12:00",c.value="12:30",u.value="")},{immediate:!0});const p=_e(()=>{if(s.value==="lunch")return"Lunch";if(s.value==="break")return"Break";if(s.value==="class"){const g=r.teachers.find(v=>v.id===i.value);return g?g.name||g.email||g.id:""}if(s.value==="student"){const g=r.students.find(v=>v.id===a.value);return g?`${g.firstName} ${g.lastName}`:""}return s.value==="other"?o.value:""});function m(){!l.value||!c.value||s.value==="class"&&!i.value||s.value==="student"&&!a.value||s.value==="other"&&!o.value||n("save",{id:d.value,blockId:h.value,type:s.value,label:p.value,start:l.value,end:c.value,note:u.value,teacherId:i.value,studentId:a.value})}return(g,v)=>(L(),U("div",{class:"assignment-dialog-overlay",onClick:v[8]||(v[8]=hn(y=>g.$emit("close"),["self"]))},[f("div",Dae,[v[20]||(v[20]=f("h2",null,"Add Assignment",-1)),f("form",{onSubmit:hn(m,["prevent"])},[f("div",Pae,[v[10]||(v[10]=f("label",null,"Type:",-1)),Ae(f("select",{"onUpdate:modelValue":v[0]||(v[0]=y=>s.value=y)},v[9]||(v[9]=[tn('<option value="lunch" data-v-f2af98a0>Lunch</option><option value="break" data-v-f2af98a0>Break</option><option value="class" data-v-f2af98a0>Class</option><option value="student" data-v-f2af98a0>Student</option><option value="other" data-v-f2af98a0>Other</option>',5)]),512),[[hr,s.value]])]),s.value==="class"?(L(),U("div",Fae,[v[12]||(v[12]=f("label",null,"Teacher:",-1)),Ae(f("select",{"onUpdate:modelValue":v[1]||(v[1]=y=>i.value=y)},[v[11]||(v[11]=f("option",{value:""},"Select teacher...",-1)),(L(!0),U(Fe,null,Ve(t.teachers,y=>(L(),U("option",{key:y.id,value:y.id},Q(y.name||y.email||y.id),9,Rae))),128))],512),[[hr,i.value]])])):Se("",!0),s.value==="student"?(L(),U("div",Oae,[v[14]||(v[14]=f("label",null,"Student:",-1)),Ae(f("select",{"onUpdate:modelValue":v[2]||(v[2]=y=>a.value=y)},[v[13]||(v[13]=f("option",{value:""},"Select student...",-1)),(L(!0),U(Fe,null,Ve(t.students,y=>(L(),U("option",{key:y.id,value:y.id},Q(y.firstName)+" "+Q(y.lastName),9,Nae))),128))],512),[[hr,a.value]])])):Se("",!0),s.value==="other"?(L(),U("div",Mae,[v[15]||(v[15]=f("label",null,"Label:",-1)),Ae(f("input",{"onUpdate:modelValue":v[3]||(v[3]=y=>o.value=y),placeholder:"Custom label"},null,512),[[Je,o.value]])])):Se("",!0),f("div",Lae,[v[16]||(v[16]=f("label",null,"Start Time:",-1)),Ae(f("input",{"onUpdate:modelValue":v[4]||(v[4]=y=>l.value=y),type:"time",required:""},null,512),[[Je,l.value]])]),f("div",Bae,[v[17]||(v[17]=f("label",null,"End Time:",-1)),Ae(f("input",{"onUpdate:modelValue":v[5]||(v[5]=y=>c.value=y),type:"time",required:""},null,512),[[Je,c.value]])]),f("div",Uae,[v[18]||(v[18]=f("label",null,"Note:",-1)),Ae(f("input",{"onUpdate:modelValue":v[6]||(v[6]=y=>u.value=y),placeholder:"Optional note"},null,512),[[Je,u.value]])]),f("div",$ae,[v[19]||(v[19]=f("button",{type:"submit",class:"btn btn-primary"},"Add",-1)),f("button",{type:"button",class:"btn btn-secondary",onClick:v[7]||(v[7]=y=>g.$emit("close"))},"Cancel")])],32)])]))}},jae=xt(Vae,[["__scopeId","data-v-f2af98a0"]]),Hae={class:"vertical-time-grid-wrapper"},Gae={class:"grid-block-label-time"},Wae=["title"],zae=["title"],Kae=["onDragstart","onDrag","onDragend"],qae={class:"assignment-content"},Xae={class:"assignment-label-time"},Yae={class:"assignment-time-label"},Jae={class:"assignment-actions"},Qae=["onClick"],Zae=["onClick"],eie=["onMousedown"],vS=24,tie={__name:"VerticalTimeGrid",props:{assignments:Array,teachers:Array,students:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,blocks:Array},emits:["update:assignments","edit-assignment"],setup(t,{emit:e}){const r=t,n=e,s=ne(null);ne(!1);const i=ne(r.assignments?r.assignments.map(F=>({...F})):[]);Ut(()=>r.assignments,F=>{i.value=F?F.map(O=>({...O})):[]},{immediate:!0});function a(F){const[O,B]=F.split(":").map(Number);return O*60+B}function o(F){const O=Math.floor(F/60),B=F%60;return`${O<10?"0":""}${O}:${B<10?"0":""}${B}`}const l=_e(()=>!r.blocks||r.blocks.length===0?"08:00":r.blocks.reduce((F,O)=>O.startTime<F?O.startTime:F,r.blocks[0].startTime)),c=_e(()=>!r.blocks||r.blocks.length===0?"16:00":r.blocks.reduce((F,O)=>O.endTime>F?O.endTime:F,r.blocks[0].endTime)),u=_e(()=>a(l.value)),d=_e(()=>a(c.value)),h=_e(()=>d.value-u.value),p=_e(()=>h.value*2.5+vS*2);_e(()=>{if(!r.blocks)return[];const F=[];return r.blocks.forEach(O=>{F.includes(O.startTime)||F.push(O.startTime),F.includes(O.endTime)||F.push(O.endTime)}),F.sort((O,B)=>a(O)-a(B))});function m(F){return(a(F)-u.value)*2.5+vS-10}function g(F,O){if(!F||!O)return!1;const B=a(F.startTime),V=a(F.endTime),z=a(O.startTime),H=a(O.endTime);return B<H&&V>z}function v(F){const O=[];for(let V=0;V<F.length;V++){const z=F[V];let H=null;for(let j=0;j<O.length;j++)if(O[j].ids.some(W=>g(z,F.find(K=>K.id===W)))){H=O[j];break}H?(H.ids.push(z.id),H.blocks.push(z)):O.push({ids:[z.id],blocks:[z]})}let B=!0;for(;B;){B=!1;for(let V=0;V<O.length;V++){for(let z=V+1;z<O.length;z++)if(O[V].ids.some(H=>O[z].ids.some(j=>g(F.find(W=>W.id===H),F.find(W=>W.id===j))))){O[V].ids=Array.from(new Set([...O[V].ids,...O[z].ids])),O[V].blocks=Array.from(new Set([...O[V].blocks,...O[z].blocks])),O.splice(z,1),B=!0;break}if(B)break}}return O.map(V=>{const z=V.blocks.sort((W,K)=>W.startTime.localeCompare(K.startTime)||W.id.localeCompare(K.id)),H=z.reduce((W,K)=>K.startTime<W?K.startTime:W,z[0].startTime),j=z.reduce((W,K)=>K.endTime>W?K.endTime:W,z[0].endTime);return{ids:V.ids,startTime:H,endTime:j}})}_e(()=>v(y.value));const y=_e(()=>(r.blocks||[]).map((F,O)=>({...F,id:F.id||`block-${O}`})));function x(F){const O=[];for(let z=0;z<F.length;z++){const H=F[z];let j=null;for(let W=0;W<O.length;W++)if(O[W].some(K=>g(H,F.find(re=>re.id===K)))){j=O[W];break}j?j.push(H.id):O.push([H.id])}let B=!0;for(;B;){B=!1;for(let z=0;z<O.length;z++){for(let H=z+1;H<O.length;H++)if(O[z].some(j=>O[H].some(W=>g(F.find(K=>K.id===j),F.find(K=>K.id===W))))){O[z]=Array.from(new Set([...O[z],...O[H]])),O.splice(H,1),B=!0;break}if(B)break}}const V={};for(const z of O){const H=z.map(j=>F.find(W=>W.id===j)).sort((j,W)=>j.startTime.localeCompare(W.startTime)||j.id.localeCompare(W.id));H.forEach((j,W)=>{V[j.id]={groupSize:H.length,colIndex:W}})}return V}function E(F,O){const B=x(y.value)[F.id]||{groupSize:1,colIndex:0},V=m(F.startTime),z=(a(F.endTime)-a(F.startTime))*2.5,H=100/B.groupSize;return{position:"absolute",left:H*B.colIndex+"%",width:H+"%",top:V+"px",height:z+"px",zIndex:1,opacity:.38,boxSizing:"border-box",overflow:"hidden"}}function I(F,O){const B=i.value.filter((te,Y)=>{if(te.id===F.id)return!1;const Ee=a(te.start),X=a(te.end),q=a(F.start),J=a(F.end);return Ee<J&&X>q}),V=B.length+1,H=[F,...B].sort((te,Y)=>te.start.localeCompare(Y.start)||te.id.localeCompare(Y.id)).findIndex(te=>te.id===F.id),j=m(F.start),W=(a(F.end)-a(F.start))*2.5,K=Math.max(W,2.5),re=73,he=27,ue=re/V;return{position:"absolute",left:he+ue*H+"%",width:ue+"%",top:j+"px",height:K+"px",zIndex:2,minWidth:"80px",boxSizing:"border-box",padding:"4px",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",cursor:"grab",transition:"top 0.2s, height 0.2s"}}const P=ne(null),w=ne(0),b=ne(0),T=ne(null);function _(F,O){P.value=O,w.value=F.clientY,b.value=a(O.start),T.value="move",O.isDragging=!0,F.target.classList.add("background-dragging-div");const V=document.createElement("div");V.className="drag-preview-div",V.style.width="160px",V.style.height="40px",V.style.background="transparent",V.style.border="2px solid #007bff",V.style.position="absolute",V.style.top="-9999px",V.style.left="-9999px",document.body.appendChild(V),F.dataTransfer.setDragImage(V,80,20),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",O.id)}function S(F,O){if(!P.value||F.clientY===0)return;const B=F.clientY-w.value,V=Math.round(B/2.5);if(T.value==="move"){let z=b.value+V,H=z+(a(O.end)-a(O.start));z=Math.max(u.value,Math.min(z,d.value-1)),H=Math.max(z+1,Math.min(H,d.value)),O.start=o(z),O.end=o(H)}}function k(F,O){P.value=null,T.value=null,O.isDragging=!1,n("update:assignments",i.value)}function A(F,O){P.value=O,w.value=F.clientY,b.value=a(O.end),T.value="resize",window.addEventListener("mousemove",D),window.addEventListener("mouseup",N)}function D(F){if(!P.value)return;const O=F.clientY-w.value;let B=b.value+Math.round(O/2.5);const V=a(P.value.start);B=Math.max(V+1,Math.min(B,d.value)),P.value.end=o(B)}function N(F){P.value=null,T.value=null,window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",N)}function R(F){const O=i.value.findIndex(B=>B.id===F);O!==-1&&(i.value.splice(O,1),n("update:assignments",i.value))}return(F,O)=>(L(),U("div",Hae,[f("div",{class:"vertical-time-grid",ref_key:"timeGridRef",ref:s,style:_n({position:"relative",height:p.value+"px"})},[(L(!0),U(Fe,null,Ve(y.value,(B,V)=>(L(),U("div",{key:B.id,class:Ze(["grid-block-bg",B.type==="period"?"blocktype-period":"blocktype-"+(B.type||"period")]),style:_n(E(B))},[f("div",Gae,[f("span",{class:"grid-block-label",title:B.name||(B.type==="period"?B.label||B.periodName||B.periodNumber||"Period":B.type?B.type.charAt(0).toUpperCase()+B.type.slice(1):"")},Q(B.name||(B.type==="period"?B.label||B.periodName||B.periodNumber||"Period":B.type?B.type.charAt(0).toUpperCase()+B.type.slice(1):"")),9,Wae),f("span",{class:"grid-block-time",title:B.startTime},Q(B.startTime),9,zae)])],6))),128)),(L(!0),U(Fe,null,Ve(i.value,(B,V)=>(L(),U("div",{key:B.id,class:Ze(["dialog-assignment-box",["type-"+(B.type||"other"),{dragging:B.isDragging}]]),style:_n(I(B)),draggable:"true",onDragstart:z=>_(z,B),onDrag:z=>S(z,B),onDragend:z=>k(z,B)},[f("div",qae,[f("div",Xae,[f("span",Yae,Q(B.start)+""+Q(B.end)+" "+Q(B.label),1)])]),f("div",Jae,[f("button",{class:"edit-btn",onClick:z=>F.$emit("edit-assignment",B)},"",8,Qae),f("button",{class:"delete-btn",onClick:z=>R(B.id)},"",8,Zae)]),f("div",{class:"resize-handle",onMousedown:hn(z=>A(z,B),["stop"]),title:"Drag to resize block"},null,40,eie)],46,Kae))),128))],4)]))}},rie=xt(tie,[["__scopeId","data-v-8f5880e4"]]),nie={class:"dialog-header"},sie={class:"dialog-header-actions"},aie={class:"dialog-content"},iie={style:{display:"flex","align-items":"flex-start"}},oie={class:"dialog-actions"},lie=["disabled"],cie={key:0},uie={key:1},die={__name:"AideScheduleEditDialog",props:{aideName:String,timeTicks:Array,isTickInAnyBlock:Function,aideAssignments:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,showAddAssignment:Boolean,addAssignment:Function,onImportAssignments:Function,onSave:Function,onClose:Function,saving:Boolean,blocks:Array,teachers:Array,students:Array},setup(t){const e=t,r=ne([]),n=ne(!1),s=ne(null);Bt(()=>{console.log("DEBUG: AideScheduleEditDialog mounted, blocks:",e.blocks)}),Ut(()=>e.blocks,d=>{console.log("DEBUG: props.blocks in AideScheduleEditDialog",d)});function i(){e.onSave(r.value)}function a(){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],n.value=!0}function o(d){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],s.value={...d},n.value=!0}function l(d){if(s.value){const h=r.value.findIndex(p=>p.id===d.id);h!==-1&&(r.value[h]={...d}),s.value=null}else r.value=[...r.value,d];n.value=!1}function c(){s.value=null,n.value=!1}function u(d){console.log("handleUpdateAssignments called with:",d),r.value=d}return(d,h)=>(L(),U("div",{class:"dialog-overlay",onClick:h[4]||(h[4]=(...p)=>t.onClose&&t.onClose(...p))},[f("div",{class:"edit-dialog",onClick:h[3]||(h[3]=hn(()=>{},["stop"]))},[f("div",nie,[f("h2",null,"Edit Schedule: "+Q(t.aideName),1),f("div",sie,[f("button",{onClick:h[0]||(h[0]=(...p)=>t.onImportAssignments&&t.onImportAssignments(...p)),class:"btn btn-secondary btn-import-assignments"},"Import Aide Assignments"),f("button",{onClick:a,class:"btn btn-primary btn-add-assignment"},"Add Assignment"),f("button",{onClick:h[1]||(h[1]=(...p)=>t.onClose&&t.onClose(...p)),class:"btn btn-secondary close-btn"},"")])]),f("div",aie,[f("div",iie,[st(rie,{timeTicks:t.timeTicks,isTickInAnyBlock:t.isTickInAnyBlock,assignments:r.value,getAssignmentBoxStyle:t.getAssignmentBoxStyle,onAssignmentDragStart:t.onAssignmentDragStart,onAssignmentDrag:t.onAssignmentDrag,onAssignmentDragEnd:t.onAssignmentDragEnd,onResizeStart:t.onResizeStart,blocks:t.blocks,onEditAssignment:o,"onUpdate:assignments":u},null,8,["timeTicks","isTickInAnyBlock","assignments","getAssignmentBoxStyle","onAssignmentDragStart","onAssignmentDrag","onAssignmentDragEnd","onResizeStart","blocks"])]),n.value?(L(),Xr(jae,{key:0,teachers:t.teachers,students:t.students,assignment:s.value,onSave:l,onClose:c},null,8,["teachers","students","assignment"])):Se("",!0)]),f("div",oie,[f("button",{onClick:i,class:"btn btn-primary",disabled:t.saving},[t.saving?(L(),U("span",cie,"")):(L(),U("span",uie,"")),Oe(" "+Q(t.saving?"Saving...":"Save Schedule"),1)],8,lie),f("button",{onClick:h[2]||(h[2]=(...p)=>t.onClose&&t.onClose(...p)),class:"btn btn-secondary"},"Cancel")])])]))}},fie={class:"master-schedule"},hie={key:0,class:"no-time-table"},pie={class:"no-data-message"},mie={key:1,class:"schedule-graph-container"},gie={class:"timeline-header"},vie={class:"block-time"},xie={class:"block-name"},yie={class:"block-time"},Eie={class:"aide-header"},bie={class:"aide-name"},_ie=["onClick"],Sie={class:"time-line-container"},Tie={class:"time-blocks-background"},wie={class:"assignment-bars"},Aie={class:"assignment-label"},pg=30,Cie={__name:"AideScheduleMasterTable",props:{paraeducators:Array,blocks:Array,getAideTimeBlocks:Function,getAideName:Function,currentTimeTable:Object},emits:["editAideAssignment","gotoTimeTableConfig"],setup(t,{emit:e}){const r=t,n=ne([]);function s(y){const x=r.getAideTimeBlocks(y).filter(E=>E.assignment).map(E=>({id:E.id,label:E.assignment,type:E.assignmentType,start:E.start||E.displayTime.split(" - ")[0],end:E.end||E.displayTime.split(" - ")[1]}));return i(x)}function i(y){if(y.length===0)return[];const x=[...y].sort((w,b)=>d(w.start)-d(b.start)),E=[];let I=[];for(const w of x)I.length===0?I=[w]:I.some(T=>d(w.start)<d(T.end)&&d(w.end)>d(T.start))?I.push(w):(E.push(I),I=[w]);I.length>0&&E.push(I);const P=[];for(const w of E)w.forEach((b,T)=>{b.overlapIndex=T,b.overlapCount=w.length,P.push(b)});return P}function a(y){if(!y.overlapCount||y.overlapCount<=1)return 10;const x=40;return(60-(y.overlapCount*x+(y.overlapCount-1)*2))/2+y.overlapIndex*(x+2)}function o(y){if(!r.blocks||r.blocks.length===0)return 0;const x=r.blocks[0],E=r.blocks[r.blocks.length-1],I=d(x.startTime),w=d(E.endTime)-I,T=(d(y)-I)/w*100;return Math.max(0,Math.min(95,T))}function l(y,x){if(!r.blocks||r.blocks.length===0)return 10;const E=r.blocks[0],I=r.blocks[r.blocks.length-1],P=d(E.startTime),b=d(I.endTime)-P,T=d(y),S=(d(x)-T)/b*100;return Math.max(5,Math.min(95,S))}function c(y){if(!r.blocks||r.blocks.length===0)return 0;const x=r.blocks[0],E=r.blocks[r.blocks.length-1],I=d(x.startTime),w=d(E.endTime)-I,T=(d(y)-I)/w*100;return Math.max(0,Math.min(95,T))}function u(y,x){if(!r.blocks||r.blocks.length===0)return 10;const E=r.blocks[0],I=r.blocks[r.blocks.length-1],P=d(E.startTime),b=d(I.endTime)-P,T=d(y),S=(d(x)-T)/b*100;return Math.max(5,Math.min(95,S))}function d(y){const[x,E]=y.split(":").map(Number);return x*60+E}function h(y){var E;const x=((E=y.name)==null?void 0:E.toLowerCase())||"";return x.includes("lunch")?"lunch":x.includes("break")||x.includes("recess")?"break":x.includes("period")||x.includes("class")?"period":"other"}function p(y){const x=[...y].sort((P,w)=>d(P.startTime)-d(w.startTime)),E=[];for(const P of x){let w=!1;for(let b=0;b<E.length;b++){const T=E[b];if(!T.some(S=>d(P.startTime)<d(S.endTime)&&d(P.endTime)>d(S.startTime))){T.push(P),P.overlapIndex=b,w=!0;break}}w||(P.overlapIndex=E.length,E.push([P]))}const I=E.length;return x.map(P=>({...P,overlapIndex:P.overlapIndex,overlapCount:I}))}const m=_e(()=>p(r.blocks||[])),g=_e(()=>Math.max(...m.value.map(y=>y.overlapCount||1),1)),v=_e(()=>g.value*pg);return Ut(()=>r.aideAssignments,y=>{n.value=y?JSON.parse(JSON.stringify(y)):[]},{immediate:!0}),(y,x)=>(L(),U("div",fie,[x[4]||(x[4]=f("h2",null,"Master Schedule View",-1)),fT(y.$slots,"tab-bar",{},void 0,!0),!t.currentTimeTable||!t.currentTimeTable.schedule||t.currentTimeTable.schedule.length===0?(L(),U("div",hie,[f("div",pie,[x[1]||(x[1]=f("h3",null,"No Time Table Configured",-1)),x[2]||(x[2]=f("p",null,"You need to configure a time table first before you can create aide assignments.",-1)),f("button",{onClick:x[0]||(x[0]=E=>y.$emit("gotoTimeTableConfig")),class:"btn btn-primary"}," Go to Time Table Configuration ")])])):(L(),U("div",mie,[f("div",gie,[x[3]||(x[3]=f("div",{class:"aide-name-header"},"Aide Name",-1)),f("div",{class:"timeline-container",style:_n({height:v.value+"px"})},[f("div",{class:"time-blocks-header",style:_n({height:v.value+"px"})},[(L(!0),U(Fe,null,Ve(m.value,E=>(L(),U("div",{key:E.id+"-"+E.overlapIndex,class:Ze(["time-block-header",h(E)]),style:_n({left:o(E.startTime)+"%",width:l(E.startTime,E.endTime)+"%",top:E.overlapIndex*pg+"px",height:pg+"px",zIndex:10})},[f("div",vie,Q(E.startTime),1),f("div",xie,Q(E.name||E.type),1),f("div",yie,Q(E.endTime),1)],6))),128))],4)],4)]),(L(!0),U(Fe,null,Ve(t.paraeducators,E=>(L(),U("div",{key:E.id,class:"aide-row"},[f("div",Eie,[f("span",bie,Q(t.getAideName(E.id)),1),f("button",{onClick:I=>y.$emit("editAideAssignment",E.id),class:"btn btn-small btn-primary edit-btn"}," Edit ",8,_ie)]),f("div",Sie,[f("div",Tie,[(L(!0),U(Fe,null,Ve(t.blocks,I=>(L(),U("div",{key:I.id,class:Ze(["time-block-bg",h(I)]),style:_n({left:o(I.startTime)+"%",width:l(I.startTime,I.endTime)+"%"})},null,6))),128)),(L(!0),U(Fe,null,Ve(t.blocks.slice(0,-1),(I,P)=>(L(),U("div",{key:`bg-gap-${I.id}`,class:"time-block-bg-gap",style:_n({left:o(I.endTime)-.5+"%",width:"1%"})},null,4))),128))]),f("div",wie,[(L(!0),U(Fe,null,Ve(s(E.id),I=>(L(),U("div",{key:I.id,class:Ze(["master-assignment-bar",I.type]),style:_n({left:c(I.start)+"%",width:u(I.start,I.end)+"%",top:a(I)+"px"})},[f("span",Aie,Q(I.label),1)],6))),128))])])]))),128))]))]))}},Iie=xt(Cie,[["__scopeId","data-v-40c5158e"]]);function Yf(t){return(t==null?void 0:t.schedule)||[]}function kie(t){let e="23:59",r="00:00";for(const n of t)n.startTime&&n.startTime<e&&(e=n.startTime),n.endTime&&n.endTime>r&&(r=n.endTime);return{min:e,max:r}}function Die(t){return _e(()=>{const{min:e,max:r}=kie(t.value||t),[n,s]=e.split(":").map(Number),[i,a]=r.split(":").map(Number);let o=[],l=n,c=s;for(;l<i||l===i&&c<=a;){const d=l<10?`0${l}`:`${l}`,h=c<10?`0${c}`:`${c}`;o.push({time:`${d}:${h}`}),c+=5,c>=60&&(c=0,l++)}const u=(t.value||t).map(d=>d.startTime);for(const d of u)o.find(h=>h.time===d)||o.push({time:d});return o=Array.from(new Set(o.map(d=>d.time))).sort().map(d=>({time:d})),o})}function Pie(t,e){return e.some(r=>r.startTime<=t&&r.endTime>=t)}const Fie={class:"admin-aide-schedule-detailed"},Rie={class:"header"},Oie={class:"header-actions"},Nie=["disabled"],Mie={key:0},Lie={key:1},Bie={class:"content"},Uie={key:0,class:"error-message"},$ie={key:1,class:"error-message"},Vie={key:2,class:"loading"},jie={key:3,class:"schedule-container"},Hie={key:0,class:"time-table-tab-bar"},Gie=["onClick"],Rk={__name:"AdminAideSchedule",setup(t){const e=bi(),r=pa(),{userList:n,fetchUsers:s}=Na(),{students:i,fetchStudents:a}=Oa(),{appSettings:o,loadAppSettings:l,saveAppSettings:c}=Hs(),{labels:u}=fo(),{aideSchedule:d,loadAideSchedules:h,saveAideSchedule:p}=Gse(),{aideAssignment:m}=_x(),g=ne(!0),v=ne(!1),y=ne(null),x=ne({}),E=ne({}),I=ne(null);ne([]);const P=ne({}),w=_e(()=>x.value&&Array.isArray(x.value.timeTables)&&x.value.timeTables.length>0?x.value.timeTables.map((le,xe)=>({id:le.name?le.name.toLowerCase().replace(/\s+/g,"-"):`tt-${xe}`,label:le.name||`Time Table ${xe+1}`,...le})):x.value&&x.value.schedule?[{id:"default",label:x.value.label||"Default Schedule",schedule:x.value.schedule}]:[]);Bt(async()=>{console.log("Loaded timeTableData:",x.value),console.log("Computed allTimeTables:",w.value),w.value.length>0&&!I.value&&(I.value=w.value[0].id,console.log("Set selectedTimeTable:",I.value)),await l(),o.value.timeTables&&Array.isArray(o.value.timeTables)?(x.value={timeTables:o.value.timeTables},console.log("Set timeTableData to timeTables array:",x.value)):o.value.schedule&&(x.value={schedule:o.value.schedule},console.log("Set timeTableData to single schedule:",x.value))}),Ut(w,le=>{console.log("allTimeTables changed:",le)}),Ut(I,le=>{console.log("selectedTimeTable changed:",le)});const b=_e(()=>{const le=w.value.find(xe=>xe.id===I.value)||w.value[0];return console.log("currentTimeTable:",le),le}),T=_e(()=>Yf(b.value)),_=Die(T);function S(le){return Pie(le,T.value)}const k=_e(()=>{var xe;const le=(xe=r.currentUser)==null?void 0:xe.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(le)}),A=_e(()=>{var le;return((le=n.value)==null?void 0:le.filter(xe=>xe.role==="paraeducator"))||[]}),D=_e(()=>{var le;return((le=n.value)==null?void 0:le.filter(xe=>xe.role==="teacher"))||[]});_e(()=>u.value);function N(le){if(!T.value)return[];console.log("DEBUG: getAideTimeBlocks called for aide:",le),console.log("DEBUG: aideSchedule.value:",d.value),console.log("DEBUG: aideAssignment.value:",m.value);const ve=(d.value[le]||{}).schedule||{};console.log("DEBUG: aideScheduleData:",ve);const Ce=Object.values(ve).filter(we=>we.start&&we.end&&we.label).map(we=>({id:we.id||we.blockId||`assignment-${Date.now()}`,assignment:we.label,assignmentType:we.type||"custom",displayTime:`${we.start} - ${we.end}`,start:we.start,end:we.end}));return console.log("DEBUG: individualAssignments:",Ce),Ce.length>0?Ce:(console.log("DEBUG: No individual assignments found, adding test data"),[{id:"test-1",assignment:"Test Class Assignment",assignmentType:"class",displayTime:"08:00 - 09:00",start:"08:00",end:"09:00"},{id:"test-2",assignment:"Test Student Assignment",assignmentType:"student",displayTime:"10:00 - 11:00",start:"10:00",end:"11:00"}])}function R(le){const xe=A.value.find(ve=>ve.id===le);return xe?xe.name||xe.email:"Unknown Aide"}function F(le){y.value=le,te.value=!0}function O(){y.value=null}async function B(){try{v.value=!0;const xe={...await l(),detailedAideSchedule:E.value};await c(xe),console.log("Detailed aide schedule saved successfully")}catch(le){console.error("Error saving detailed aide schedule:",le)}finally{v.value=!1}}function V(){e.push("/admin")}async function z(){try{g.value=!0,await Promise.all([s(),a(),l()]);const le=await Zt(Qe(Xe,"app_settings","global"));if(le.exists()){const xe=le.data();E.value=xe.detailedAideSchedule||{}}g.value=!1}catch(le){console.error("Error loading aide schedule data:",le),g.value=!1}}Bt(z);function H(le,xe){return le.assignments&&le.assignments[xe]||""}function j(){var we,Ge;if(console.log("DEBUG: handleImportAssignments called"),console.log("DEBUG: editingAideId.value:",y.value),console.log("DEBUG: aideAssignment.value:",m.value),console.log("DEBUG: All aide IDs:",Object.keys(m.value)),console.log("DEBUG: All aide data:",Object.entries(m.value).map(([ke,$e])=>({id:ke,keys:Object.keys($e)}))),!y.value||!m.value[y.value]){console.log("DEBUG: No aide data found"),alert("No aide assignment data found for this aide.");return}const le=J.value.length;if(le>0&&!confirm(`WARNING: This will remove ${le} current assignments and replace them with imported assignments.

Do you want to continue?`))return;const xe=m.value[y.value];console.log("DEBUG: aideData:",xe),console.log("DEBUG: aideData.classAssignment:",xe.classAssignment),console.log("DEBUG: aideData.directAssignment:",xe.directAssignment),console.log("DEBUG: Object.keys(aideData):",Object.keys(xe)),console.log("DEBUG: aideData.schedule:",xe.schedule),console.log("DEBUG: typeof aideData.schedule:",typeof xe.schedule),console.log("DEBUG: Array.isArray(aideData.schedule):",Array.isArray(xe.schedule));let ve=0;J.value=[];const Ce=Yf(b.value);console.log("DEBUG: timeTableBlocks:",Ce),console.log("DEBUG: timeTableBlocks with period numbers:",Ce.map(ke=>({name:ke.name,periodNumber:ke.periodNumber,type:ke.type})));for(const ke of Ce){console.log("DEBUG: Processing block:",ke),console.log("DEBUG: Block periodNumber:",ke.periodNumber),console.log("DEBUG: Block name:",ke.name),console.log("DEBUG: Available classAssignment keys:",Object.keys(xe.classAssignment||{}));let $e=ke.periodNumber;if(!$e&&ke.name){const ze=ke.name.match(/Period\s*(\d+)/i);ze&&($e=ze[1],console.log("DEBUG: Extracted periodNumber from name:",$e))}let Be="",We=[];if($e&&xe.classAssignment&&xe.classAssignment[$e]){console.log("DEBUG: Found class assignment for periodNumber:",$e);const ze=Array.isArray(xe.classAssignment[$e])?xe.classAssignment[$e]:[xe.classAssignment[$e]];We=ze.filter(Boolean).map(be=>{const ye=D.value.find(Te=>Te.id===be);return ye?ye.name||ye.email:"Unknown Teacher"}),Be=ze.filter(Boolean).map(be=>`teacher:${be}`).join(","),console.log("DEBUG: Created assignment for periodNumber:",Be)}if(!Be&&ke.name&&xe.classAssignment){console.log("DEBUG: Trying to match by block name:",ke.name);const ze=Object.keys(xe.classAssignment).find(be=>be.toLowerCase().trim()===ke.name.toLowerCase().trim());if(ze){console.log("DEBUG: Found match by block name:",ze);const be=Array.isArray(xe.classAssignment[ze])?xe.classAssignment[ze]:[xe.classAssignment[ze]];We=be.filter(Boolean).map(ye=>{const Te=D.value.find(Ne=>Ne.id===ye);return Te?Te.name||Te.email:"Unknown Teacher"}),Be=be.filter(Boolean).map(ye=>`teacher:${ye}`).join(","),console.log("DEBUG: Created assignment for block name:",Be)}}if(Be){const ze=ke.startTime,be=W(ke.startTime,30),ye=Be.split(",").map(Ne=>Ne.replace("teacher:","")).filter(Boolean),Te={id:`imported-class-${Date.now()}-${ve}`,label:We.join(", "),start:ze,end:be,type:"class",blockId:`imported-block-${ve}`,teacherId:ye[0]||"",note:ye.length>1?`Multiple teachers: ${We.join(", ")}`:""};console.log("DEBUG: Adding new assignment:",Te),J.value.push(Te),ve++}}if(console.log("DEBUG: Checking direct assignments..."),console.log("DEBUG: aideData.directAssignment:",xe.directAssignment),console.log("DEBUG: typeof aideData.directAssignment:",typeof xe.directAssignment),console.log("DEBUG: Array.isArray(aideData.directAssignment):",Array.isArray(xe.directAssignment)),xe.directAssignment){console.log("DEBUG: Found directAssignment:",xe.directAssignment);const ke=Array.isArray(xe.directAssignment)?xe.directAssignment:[xe.directAssignment];console.log("DEBUG: directStudentIds:",ke),console.log("DEBUG: students.value length:",(we=i.value)==null?void 0:we.length),console.log("DEBUG: students.value sample:",(Ge=i.value)==null?void 0:Ge.slice(0,3));for(const $e of ke)if(console.log("DEBUG: Processing studentId:",$e),$e&&$e!==""){const Be=i.value.find(We=>We.id===$e);if(console.log("DEBUG: Found student:",Be),Be){const We=`${ut(Be,"firstName")} ${ut(Be,"lastName")}`;console.log("DEBUG: Student name:",We);const ze=Yf(b.value).find(be=>be.type==="period");if(console.log("DEBUG: First period block:",ze),ze){const be=ze.startTime,ye=W(ze.startTime,30),Te={id:`imported-direct-${Date.now()}-${ve}`,label:We,start:be,end:ye,type:"student",blockId:`imported-direct-block-${ve}`,studentId:$e};console.log("DEBUG: Adding direct assignment:",Te),J.value.push(Te),ve++}}}}else console.log("DEBUG: No directAssignment found");if(console.log("DEBUG: Final importedCount:",ve),console.log("DEBUG: Final localAideAssignments:",J.value),ve>0){alert(`Successfully imported ${ve} assignments with 30-minute time spans.

Types: Class assignments set to 'class', Direct assignments set to 'student'
Labels: Teacher names for class assignments, Student names for direct assignments
Duration: 30 minutes each`);const ke=y.value,$e=d.value[ke]||{},Be={};J.value.forEach(ze=>{const be=ze.blockId||ze.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;Be[be]={id:ze.id,blockId:be,type:ze.type,label:ze.label,start:ze.start,end:ze.end,note:ze.note,teacherId:ze.teacherId,studentId:ze.studentId}});const We={...$e,schedule:Be};p(ke,We).then(()=>{h().then(()=>{O(),el(()=>{F(ke)})})})}else alert("No matching assignments found in the Aide Assignment data for this schedule.")}function W(le,xe){const[ve,Ce]=le.split(":").map(Number),we=ve*60+Ce+xe,Ge=Math.floor(we/60),ke=we%60;return`${Ge.toString().padStart(2,"0")}:${ke.toString().padStart(2,"0")}`}Ut(()=>Yf(b.value),le=>{const xe={};for(const ve of le){const Ce=H(ve,y.value);xe[ve.id]=Ce?[{id:Ce,value:Ce}]:[]}P.value=xe},{immediate:!0});function K(le,xe){Y.value=xe,Ee.value=le.clientY,X.value=_.value.findIndex(ve=>ve.time===xe.start),q.value=0,le.dataTransfer.effectAllowed="move",le.dataTransfer.setData("text/plain",xe.id)}function re(le,xe){if(!Y.value||le.clientY===0)return;const ve=le.clientY-Ee.value;q.value=ve,xe._dragOffset=ve}function he(le,xe){if(!Y.value)return;const ve=24,Ce=_.value.length;let we=X.value+Math.round(q.value/ve);we=Math.max(0,Math.min(Ce-2,we));const Ge=_.value[we].time,ke=_.value.findIndex(We=>We.time===xe.end)-X.value;let $e=we+ke;$e=Math.max(we+1,Math.min(Ce-1,$e));const Be=_.value[$e].time;xe.start=Ge,xe.end=Be,xe._dragOffset=0,Y.value=null,q.value=0}function ue(le){const xe=_.value.findIndex(Be=>Be.time===le.start),ve=_.value.findIndex(Be=>Be.time===le.end),Ce=24;if(xe===-1||ve===-1)return{display:"none"};const we=xe*Ce+(le._dragOffset||0),Ge=Math.max((ve-xe)*Ce,Ce);let ke,$e;return le.type==="class"?(ke="#e8f4fd",$e="#4a90e2"):le.type==="student"?(ke="#f0f8e8",$e="#7cb342"):(ke="#f5f5f5",$e="#9e9e9e"),{position:"absolute",left:"20px",top:`${we}px`,height:`${Ge}px`,width:"200px",minHeight:"24px",background:ke,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"#333",border:`2px solid ${$e}`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"grab",zIndex:2,transition:Y.value===le?"none":"top 0.2s"}}function pe(){const le=T.value&&T.value.length>0?T.value[0].startTime:"08:00",xe=T.value&&T.value.length>0?T.value[0].endTime:"08:30";J.value.push({id:`custom:${Date.now()}`,label:"",start:le,end:xe,blockId:`block-${Date.now()}`})}const te=ne(!1);ne(null);const Y=ne(null),Ee=ne(0),X=ne(0),q=ne(0),J=ne([]);Ut(y,le=>{if(!le){J.value=[];return}const ve=(d.value[le]||{}).schedule||{};J.value=Object.entries(ve).map(([Ce,we])=>({id:Ce+"-"+(le||""),label:we.label||"",start:we.start,end:we.end,blockId:Ce,type:we.type||"lunch",teacherId:we.teacherId||"",studentId:we.studentId||"",note:we.note||""}))},{immediate:!0});async function ge(le){if(y.value)try{v.value=!0;const xe=d.value[y.value]||{},ve={};le.forEach(we=>{const Ge=we.blockId||we.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;ve[Ge]={id:we.id,blockId:Ge,type:we.type,label:we.label,start:we.start,end:we.end,note:we.note,teacherId:we.teacherId,studentId:we.studentId}});const Ce={...xe,schedule:ve};await p(y.value,Ce),await h(),O(),alert("Schedule saved!")}catch(xe){alert("Failed to save schedule: "+xe.message)}finally{v.value=!1}}Ut(()=>T,le=>{console.log("DEBUG: blocks",le)},{immediate:!0}),Ut(y,le=>{le&&(console.log("DEBUG: Opening edit dialog for aide",le),console.log("DEBUG: blocks passed to dialog",T.value))});function ae(le,xe){console.log("Resize start:",xe)}function se(){pe()}return(le,xe)=>(L(),U("div",Fie,[f("div",Rie,[xe[4]||(xe[4]=f("h1",null,"Aide Schedule Management",-1)),f("div",Oie,[f("button",{onClick:B,class:"btn btn-primary",disabled:v.value},[v.value?(L(),U("span",Mie,"")):(L(),U("span",Lie,"")),Oe(" "+Q(v.value?"Saving...":"Save Schedule"),1)],8,Nie),f("button",{onClick:V,class:"btn btn-secondary"},xe[3]||(xe[3]=[f("span",null,"",-1),Oe(" Back ")]))])]),f("div",Bie,[Z(r).currentUser?k.value?g.value?(L(),U("div",Vie," Loading aide schedules... ")):(L(),U("div",jie,[st(Iie,{paraeducators:A.value,blocks:T.value,getAideTimeBlocks:N,getAideName:R,currentTimeTable:b.value,onEditAideAssignment:F,onGotoTimeTableConfig:xe[2]||(xe[2]=()=>Z(e).push("/admin?tab=time-table"))},{"tab-bar":Rh(()=>[w.value.length>1?(L(),U("div",Hie,[(L(!0),U(Fe,null,Ve(w.value,ve=>(L(),U("div",{key:ve.id,class:Ze(["tab-btn",{active:I.value===ve.id}]),onClick:Ce=>I.value=ve.id},Q(ve.label),11,Gie))),128))])):Se("",!0)]),_:1},8,["paraeducators","blocks","currentTimeTable"]),y.value?(L(),Xr(die,{key:0,aideName:R(y.value),timeTicks:Z(_),isTickInAnyBlock:S,aideAssignments:J.value,getAssignmentBoxStyle:ue,onAssignmentDragStart:K,onAssignmentDrag:re,onAssignmentDragEnd:he,onResizeStart:ae,showAddAssignment:te.value,addAssignment:se,onImportAssignments:j,onSave:ge,onClose:O,saving:v.value,blocks:T.value,teachers:D.value,students:Z(i)},null,8,["aideName","timeTicks","aideAssignments","showAddAssignment","saving","blocks","teachers","students"])):Se("",!0)])):(L(),U("div",$ie,[xe[7]||(xe[7]=f("h2",null,"Access Denied",-1)),xe[8]||(xe[8]=f("p",null,"You do not have permission to access this page.",-1)),f("button",{onClick:xe[1]||(xe[1]=ve=>Z(e).push("/")),class:"btn btn-primary"},"Go Home")])):(L(),U("div",Uie,[xe[5]||(xe[5]=f("h2",null,"Authentication Required",-1)),xe[6]||(xe[6]=f("p",null,"Please log in to access this page.",-1)),f("button",{onClick:xe[0]||(xe[0]=ve=>Z(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},Wie={name:"AdminBackupRestore",setup(){const t=ne([{id:"users",name:"Users"},{id:"students",name:"Students"},{id:"app_settings",name:"App Settings"},{id:"aideSchedules",name:"Aide Schedules"},{id:"aideAssignments",name:"Aide Assignments"}]),e=ne(["users","students","app_settings"]),r=ne(""),n=ne(!1),s=ne(!1),i=ne(null),a=ne(null),o=ne([]),l=ne(""),c=ne("info"),u=gs({overwrite:!1,validate:!0}),d=ne(null),h=async()=>{try{const N=wt(Xe,"backups"),R=lr(N,cn("createdAt","desc"),Rs(20)),F=await jt(R);o.value=F.docs.map(O=>({id:O.id,...O.data()}))}catch(N){console.error("Error loading backups:",N),I("Error loading backups","error")}},p=async()=>{if(e.value.length===0){I("Please select at least one collection","error");return}n.value=!0,I("Creating backup...","info");try{const N={metadata:{version:"1.0",createdAt:new Date().toISOString(),createdBy:"admin",description:r.value||"Manual backup"},collections:{}};for(const O of e.value)if(O==="app_settings"){const B=Qe(Xe,"app_settings","global"),V=await Zt(B);N.collections[O]=V.exists()?V.data():{}}else{const B=wt(Xe,O),V=await jt(B);N.collections[O]=V.docs.map(z=>({id:z.id,...z.data()}))}const R=`backup_${Date.now()}`,F=Qe(Xe,"backups",R);await Wt(F,{name:r.value||`Backup ${new Date().toLocaleDateString()}`,createdAt:new Date().toISOString(),collections:e.value,size:JSON.stringify(N).length,data:N}),r.value="",await h(),I("Backup created successfully!","success")}catch(N){console.error("Error creating backup:",N),I("Error creating backup: "+N.message,"error")}finally{n.value=!1}},m=N=>{const R=N.target.files[0];if(!R)return;i.value=R,a.value=null;const F=new FileReader;F.onload=O=>{try{const B=JSON.parse(O.target.result);B.metadata&&B.collections?(a.value=B,I("Backup file loaded successfully","success")):I("Invalid backup file format","error")}catch{I("Error parsing JSON file","error")}},F.readAsText(R)},g=async()=>{if(!i.value||!a.value){I("Please select a valid backup file","error");return}if(u.overwrite){if(!confirm("This will overwrite existing data. This action cannot be undone. Continue?"))return}else if(!confirm("This will add new data without overwriting existing records. Continue?"))return;s.value=!0,I("Restoring backup...","info");try{for(const[N,R]of Object.entries(a.value.collections))if(N==="app_settings"||N==="appSettings"){const F=Qe(Xe,"app_settings","global");await Wt(F,R,{merge:!u.overwrite})}else{const F=wt(Xe,N);if(Array.isArray(R))for(const O of R){const B=Qe(F,O.id);u.overwrite?await Wt(B,O):await Wt(B,O,{merge:!0})}}I("Backup restored successfully!","success"),i.value=null,a.value=null,d.value&&(d.value.value="")}catch(N){console.error("Error restoring backup:",N),I("Error restoring backup: "+N.message,"error")}finally{s.value=!1}},v=N=>{const R=JSON.stringify(N.data,null,2),F=new Blob([R],{type:"application/json"}),O=URL.createObjectURL(F),B=document.createElement("a");B.href=O,B.download=`${N.name||"backup"}.json`,B.click(),URL.revokeObjectURL(O)},y=async N=>{if(confirm("Are you sure you want to delete this backup?"))try{await io(Qe(Xe,"backups",N)),await h(),I("Backup deleted successfully","success")}catch(F){console.error("Error deleting backup:",F),I("Error deleting backup","error")}},x=N=>{if(N===0)return"0 Bytes";const R=1024,F=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(N)/Math.log(R));return parseFloat((N/Math.pow(R,O)).toFixed(2))+" "+F[O]},E=N=>new Date(N).toLocaleString(),I=(N,R="info")=>{l.value=N,c.value=R,setTimeout(()=>{l.value=""},5e3)},P=ne(!1),w=ne(""),b=ne(null),T=ne({total:0,processed:0,updated:0}),_={1:1,P1:1,2:2,P2:2,3:3,P3:3,4:4,P4:4,5:5,P5:5,6:6,P6:6,7:7,SH:7,F:7};function S(N){const R=new Date().toLocaleTimeString();w.value+=`[${R}] ${N}
`,b.value&&(b.value.scrollTop=b.value.scrollHeight)}function k(N){if(!N||typeof N!="object")return{};const R={};return Object.entries(N).forEach(([F,O])=>{const B=_[F];B&&O&&(R[B]?(typeof R[B]=="string"&&typeof O=="object"||typeof R[B]=="object"&&typeof O=="object"&&O.coTeaching&&!R[B].coTeaching)&&(R[B]=O):R[B]=O)}),R}async function A(){var N,R;if(!P.value){P.value=!0,w.value="",T.value={total:0,processed:0,updated:0};try{S(" Starting schedule normalization...");const O=(await jt(wt(Xe,"students"))).docs;T.value.total=O.length,S(` Found ${O.length} students to process`);for(const B of O){const V=B.data(),z=B.id;if(T.value.processed++,(R=(N=V.app)==null?void 0:N.schedule)!=null&&R.periods){const H=V.app.schedule.periods,j=k(H),W=Object.keys(H).sort(),K=Object.keys(j).map(he=>String(he)).sort();(JSON.stringify(W)!==JSON.stringify(K)||JSON.stringify(H)!==JSON.stringify(j))&&(S(` Updating student ${z}:`),S(`   Before: ${JSON.stringify(H)}`),S(`   After:  ${JSON.stringify(j)}`),await Xd(Qe(Xe,"students",z),{"app.schedule.periods":j}),T.value.updated++)}T.value.processed%10===0&&await new Promise(H=>setTimeout(H,100))}S(" Schedule normalization complete!"),S(` Final stats: ${T.value.processed} processed, ${T.value.updated} updated`)}catch(F){S(` Error during normalization: ${F.message}`),console.error("Normalization error:",F)}finally{P.value=!1}}}function D(){w.value="",T.value={total:0,processed:0,updated:0}}return Bt(()=>{h()}),{collections:t,selectedCollections:e,backupName:r,isBackingUp:n,isRestoring:s,selectedFile:i,backupData:a,backups:o,statusMessage:l,statusType:c,restoreOptions:u,fileInput:d,createBackup:p,handleFileSelect:m,restoreBackup:g,downloadBackup:v,deleteBackup:y,formatFileSize:x,formatDate:E,normalizationInProgress:P,normalizationLog:w,normalizationLogRef:b,normalizationProgress:T,startNormalization:A,clearNormalizationLog:D}}},zie={class:"admin-backup-restore"},Kie={class:"content"},qie={class:"section"},Xie={class:"backup-options"},Yie={class:"option-group"},Jie={class:"checkbox-group"},Qie=["value","disabled"],Zie={class:"option-group"},eoe=["disabled"],toe=["disabled"],roe={key:0},noe={key:1},soe={class:"section"},aoe={class:"restore-options"},ioe={class:"file-upload"},ooe=["disabled"],loe={key:0,class:"file-info"},coe={key:0,class:"option-group"},uoe={class:"backup-info"},doe={class:"collection-name"},foe={class:"collection-count"},hoe={key:1,class:"option-group"},poe={class:"checkbox-group"},moe={class:"checkbox"},goe=["disabled"],voe={class:"checkbox"},xoe=["disabled"],yoe=["disabled"],Eoe={key:0},boe={key:1},_oe={class:"section"},Soe={key:0,class:"backup-list"},Toe={class:"backup-info"},woe={class:"admin-action-btns"},Aoe=["onClick"],Coe=["onClick"],Ioe={key:1,class:"no-backups"},koe={class:"section"},Doe={class:"admin-action-btns"},Poe=["disabled"],Foe={key:0,class:"progress-section"},Roe={class:"progress-bar"},Ooe={class:"progress-text"},Noe={class:"log-container"};function Moe(t,e,r,n,s,i){return L(),U("div",zie,[e[22]||(e[22]=f("h1",null," Admin Tools",-1)),e[23]||(e[23]=f("div",{class:"header"},[f("h1",null,"Backup & Restore"),f("p",null,"Manage database backups and restore data from JSON files")],-1)),f("div",Kie,[f("div",qie,[e[11]||(e[11]=f("h2",null,"Create Backup",-1)),f("div",Xie,[f("div",Yie,[e[9]||(e[9]=f("label",null,"Collections to backup:",-1)),f("div",Jie,[(L(!0),U(Fe,null,Ve(n.collections,a=>(L(),U("label",{key:a.id,class:"checkbox"},[Ae(f("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>n.selectedCollections=o),value:a.id,disabled:n.isBackingUp},null,8,Qie),[[Et,n.selectedCollections]]),Oe(" "+Q(a.name),1)]))),128))])]),f("div",Zie,[e[10]||(e[10]=f("label",null,"Backup name (optional):",-1)),Ae(f("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.backupName=a),placeholder:"e.g., backup-2024-01-15",disabled:n.isBackingUp},null,8,eoe),[[Je,n.backupName]])]),f("button",{onClick:e[2]||(e[2]=(...a)=>n.createBackup&&n.createBackup(...a)),disabled:n.isBackingUp||n.selectedCollections.length===0,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},[n.isBackingUp?(L(),U("span",roe,"Creating Backup...")):(L(),U("span",noe,"Create Backup"))],8,toe)])]),f("div",soe,[e[17]||(e[17]=f("h2",null,"Restore from Backup",-1)),f("div",aoe,[f("div",ioe,[e[12]||(e[12]=f("label",null,"Select JSON backup file:",-1)),f("input",{type:"file",onChange:e[3]||(e[3]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a)),accept:".json",disabled:n.isRestoring,ref:"fileInput"},null,40,ooe),n.selectedFile?(L(),U("p",loe," Selected: "+Q(n.selectedFile.name)+" ("+Q(n.formatFileSize(n.selectedFile.size))+") ",1)):Se("",!0)]),n.backupData?(L(),U("div",coe,[e[13]||(e[13]=f("label",null,"Collections in backup:",-1)),f("div",uoe,[(L(!0),U(Fe,null,Ve(n.backupData.collections,(a,o)=>(L(),U("div",{key:o,class:"collection-info"},[f("span",doe,Q(o)+":",1),f("span",foe,Q(Array.isArray(a)?a.length:"1")+" items",1)]))),128))])])):Se("",!0),n.backupData?(L(),U("div",hoe,[e[16]||(e[16]=f("label",null,"Restore options:",-1)),f("div",poe,[f("label",moe,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>n.restoreOptions.overwrite=a),disabled:n.isRestoring},null,8,goe),[[Et,n.restoreOptions.overwrite]]),e[14]||(e[14]=Oe(" Overwrite existing data "))]),f("label",voe,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=a=>n.restoreOptions.validate=a),disabled:n.isRestoring},null,8,xoe),[[Et,n.restoreOptions.validate]]),e[15]||(e[15]=Oe(" Validate data before restore "))])])])):Se("",!0),f("button",{onClick:e[6]||(e[6]=(...a)=>n.restoreBackup&&n.restoreBackup(...a)),disabled:n.isRestoring||!n.selectedFile||!n.backupData,class:"admin-action-btn warning",style:{"min-width":"140px","max-width":"140px"}},[n.isRestoring?(L(),U("span",Eoe,"Restoring...")):(L(),U("span",boe,"Restore Backup"))],8,yoe)])]),f("div",_oe,[e[18]||(e[18]=f("h2",null,"Backup History",-1)),n.backups.length>0?(L(),U("div",Soe,[(L(!0),U(Fe,null,Ve(n.backups,a=>(L(),U("div",{key:a.id,class:"backup-item"},[f("div",Toe,[f("h3",null,Q(a.name||"Unnamed Backup"),1),f("p",null,"Created: "+Q(n.formatDate(a.createdAt)),1),f("p",null,"Size: "+Q(n.formatFileSize(a.size)),1),f("p",null,"Collections: "+Q(a.collections.join(", ")),1)]),f("div",woe,[f("button",{onClick:o=>n.downloadBackup(a),class:"admin-action-btn secondary"},"Download",8,Aoe),f("button",{onClick:o=>n.deleteBackup(a.id),class:"admin-action-btn delete"},"Delete",8,Coe)])]))),128))])):(L(),U("p",Ioe,"No backups found"))]),f("div",koe,[e[19]||(e[19]=f("h2",null," Schedule Period Normalization",-1)),e[20]||(e[20]=f("p",{class:"description"}," This tool normalizes all student schedule periods to use numeric format (1-7) and merges co-teaching data from string periods (P1, P2, etc.) into numeric periods. ",-1)),e[21]||(e[21]=f("div",{class:"warning-box"},[f("strong",null," Important:"),Oe(" This operation will modify all student records. Make sure to backup first! ")],-1)),f("div",Doe,[f("button",{onClick:e[7]||(e[7]=(...a)=>n.startNormalization&&n.startNormalization(...a)),disabled:n.normalizationInProgress,class:"admin-action-btn primary",style:{"min-width":"220px","max-width":"220px"}},Q(n.normalizationInProgress?"Normalizing...":"Start Schedule Normalization"),9,Poe),f("button",{onClick:e[8]||(e[8]=(...a)=>n.clearNormalizationLog&&n.clearNormalizationLog(...a)),class:"admin-action-btn secondary",style:{"min-width":"100px","max-width":"100px"}},"Clear Log")]),n.normalizationProgress.total>0?(L(),U("div",Foe,[f("div",Roe,[f("div",{class:"progress-fill",style:_n({width:n.normalizationProgress.processed/n.normalizationProgress.total*100+"%"})},null,4)]),f("p",Ooe," Progress: "+Q(n.normalizationProgress.processed)+"/"+Q(n.normalizationProgress.total)+" processed, "+Q(n.normalizationProgress.updated)+" updated ",1)])):Se("",!0),f("div",Noe,[f("pre",{class:"log-output",ref:"normalizationLogRef"},Q(n.normalizationLog),513)])])]),n.statusMessage?(L(),U("div",{key:0,class:Ze(["status-message",n.statusType])},Q(n.statusMessage),3)):Se("",!0)])}const Ok=xt(Wie,[["render",Moe],["__scopeId","data-v-b8a17214"]]),Loe={class:"teacher-feedback-admin"},Boe={key:0,class:"status-message loading"},Uoe={key:1,class:"status-message success"},$oe={key:2,class:"status-message error"},Voe={class:"quick-actions"},joe=["disabled"],Hoe={class:"modal-body"},Goe={class:"form-group"},Woe={class:"form-group"},zoe={class:"form-group"},Koe={class:"form-group"},qoe={class:"modal-footer"},Xoe=["disabled"],Yoe={key:0},Joe={key:1},Qoe={class:"setup-section"},Zoe={key:0,class:"loading-state"},ele={key:1,class:"status-card"},tle={class:"status-header"},rle={class:"status-indicator"},nle={key:0,class:"status-badge success"},sle={key:1,class:"status-badge info"},ale={class:"status-details"},ile={key:0},ole={key:1},lle={key:0},cle={key:1,class:"info-note"},ule={key:0,class:"drive-actions"},dle=["href"],fle={key:2,class:"setup-options"},hle={class:"setup-card"},ple={class:"workspace-setup"},mle={class:"form-group"},gle=["disabled"],vle=["disabled"],xle={key:0},yle={key:1},Ele={class:"forms-list"},ble={key:0,class:"loading"},_le={key:1,class:"empty-state"},Sle={key:2,class:"forms-grid"},Tle={class:"form-header"},wle={class:"admin-action-btns"},Ale=["onClick"],Cle=["onClick"],Ile=["onClick"],kle={class:"form-meta"},Dle={key:0},Ple=["href"],Fle={key:1},Rle=["href"],Ole={key:2,class:"sheet-status pending"},Nle={__name:"AdminTeacherFeedback",setup(t){const{isLoading:e,error:r,successMessage:n,formsLoading:s,activeForms:i,createFeedbackFormWithUserAuth:a,deleteFeedbackForm:o,clearMessages:l}=Sx();Oa(),Na();const c=pa(),u=ne(!1),d=ne(""),h=ne(""),p=ne(""),m=ne(""),g=ne(null),v=ne(!0),y=ne(""),x=ne("info"),E=ne(""),I=ne(!1),P=_e(()=>d.value.trim()&&p.value.trim()),w=async()=>{if(P.value)try{l();const{GoogleAuthProvider:R,signInWithPopup:F,getAuth:O}=await ra(async()=>{const{GoogleAuthProvider:K,signInWithPopup:re,getAuth:he}=await Promise.resolve().then(()=>tO);return{GoogleAuthProvider:K,signInWithPopup:re,getAuth:he}},void 0),B=O(),V=new R;V.addScope("https://www.googleapis.com/auth/drive.file"),V.addScope("https://www.googleapis.com/auth/spreadsheets");const z=await F(B,V),j=R.credentialFromResult(z).accessToken;if(!j)throw new Error("Failed to get Google access token. Please try again.");console.log(" Got Google access token for feedback form creation");const W={title:d.value.trim(),description:h.value.trim(),formUrl:p.value.trim(),sheetTemplateUrl:m.value.trim(),createdBy:c.user.uid};await a(W,j),b()}catch(R){console.error("Error adding form:",R),R.code==="auth/popup-closed-by-user"?R.value=" Authentication cancelled. Please try again and allow Google Drive access.":R.code==="auth/popup-blocked"?R.value=" Popup blocked. Please allow popups for this site and try again.":R.value=R.message||"Failed to create feedback form"}},b=()=>{u.value=!1,d.value="",h.value="",p.value="",m.value="",l()},T=R=>{window.open(R.formUrl,"_blank")},_=async R=>{window.open(R.formUrl,"_blank")},S=async R=>{if(confirm(`Are you sure you want to delete "${R.title}"?`))try{await o(R.id)}catch(F){console.error("Error deleting form:",F)}},k=R=>R?(R.seconds?new Date(R.seconds*1e3):new Date(R)).toLocaleDateString():"N/A",A=async()=>{try{v.value=!0;const{getFunctions:R,httpsCallable:F}=await ra(async()=>{const{getFunctions:z,httpsCallable:H}=await Promise.resolve().then(()=>d0);return{getFunctions:z,httpsCallable:H}},void 0),O=R(),V=await F(O,"getUserSchool")();V.data.success&&V.data.school?g.value=V.data.school:await D()}catch(R){console.error("Error loading school info:",R),y.value="Error loading Google Drive settings",x.value="error"}finally{v.value=!1}},D=async()=>{try{const{getFunctions:R,httpsCallable:F}=await ra(async()=>{const{getFunctions:z,httpsCallable:H}=await Promise.resolve().then(()=>d0);return{getFunctions:z,httpsCallable:H}},void 0),O=R(),V=await F(O,"getOrCreateSchool")();V.data.success&&(g.value=V.data.school,V.data.school.isNew&&(y.value="Google Drive settings initialized! You can now create feedback forms.",x.value="success"))}catch(R){console.error("Error creating school:",R),y.value="Error initializing Google Drive settings: "+R.message,x.value="error"}},N=async()=>{if(E.value.trim()){I.value=!0,y.value="";try{const{getFunctions:R,httpsCallable:F}=await ra(async()=>{const{getFunctions:z,httpsCallable:H}=await Promise.resolve().then(()=>d0);return{getFunctions:z,httpsCallable:H}},void 0),O=R(),V=await F(O,"createSharedDrive")({schoolId:g.value.schoolId,driveName:E.value.trim()});if(V.data.requiresManualCreation){const z=V.data.instructions,H=V.data.serviceAccountEmail;y.value=`Google Workspace setup requires manual configuration:

1. ${z.join(`
2. `)}

Service Account Email: ${H}`,x.value="info"}else V.data.success?(y.value="Google Workspace setup completed successfully!",x.value="success",await A(),E.value=""):(y.value="Error setting up Google Workspace: "+V.data.error,x.value="error")}catch(R){console.error("Error setting up workspace:",R),y.value="Error setting up Google Workspace: "+R.message,x.value="error"}finally{I.value=!1}}};return Bt(async()=>{await A()}),(R,F)=>{var O;return L(),U("div",Loe,[F[35]||(F[35]=f("div",{class:"admin-header"},[f("h2",null,"Teacher Feedback Forms"),f("p",{class:"admin-description"}," Create and manage Google Forms for collecting teacher feedback on students. Each case manager will have their own response sheet automatically created when they first use the form. ")],-1)),Z(e)?(L(),U("div",Boe," Processing... ")):Se("",!0),Z(n)?(L(),U("div",Uoe,Q(Z(n)),1)):Se("",!0),Z(r)?(L(),U("div",$oe,Q(Z(r)),1)):Se("",!0),f("div",Voe,[f("button",{onClick:F[0]||(F[0]=B=>u.value=!0),class:"primary-btn",disabled:Z(e)},F[7]||(F[7]=[f("span",null,"",-1),Oe(" Add Form ")]),8,joe)]),u.value?(L(),U("div",{key:3,class:"modal-overlay",onClick:b},[f("div",{class:"modal-content",onClick:F[5]||(F[5]=hn(()=>{},["stop"]))},[f("div",{class:"modal-header"},[F[8]||(F[8]=f("h3",null,"Add Teacher Feedback Form",-1)),f("button",{onClick:b,class:"close-btn"},"")]),f("div",Hoe,[f("div",Goe,[F[9]||(F[9]=f("label",null,"Form Title:",-1)),Ae(f("input",{type:"text","onUpdate:modelValue":F[1]||(F[1]=B=>d.value=B),placeholder:"Enter a descriptive title for this form",class:"form-input",required:""},null,512),[[Je,d.value]])]),f("div",Woe,[F[10]||(F[10]=f("label",null,"Form Description (optional):",-1)),Ae(f("textarea",{"onUpdate:modelValue":F[2]||(F[2]=B=>h.value=B),placeholder:"Brief description of what this form is for",class:"form-textarea",rows:"3"},null,512),[[Je,h.value]])]),f("div",zoe,[F[11]||(F[11]=f("label",null,"Google Form URL:",-1)),Ae(f("input",{type:"url","onUpdate:modelValue":F[3]||(F[3]=B=>p.value=B),placeholder:"https://docs.google.com/forms/d/your-form-id/viewform",class:"form-input",required:""},null,512),[[Je,p.value]]),F[12]||(F[12]=f("small",{class:"form-help"},"Paste the Google Form URL here (viewform link)",-1))]),f("div",Koe,[F[13]||(F[13]=f("label",null,"Google Sheet Template URL (optional):",-1)),Ae(f("input",{type:"url","onUpdate:modelValue":F[4]||(F[4]=B=>m.value=B),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id/edit",class:"form-input"},null,512),[[Je,m.value]]),F[14]||(F[14]=f("small",{class:"form-help"},"Optional: Provide a Google Sheet template that case managers can duplicate for collecting responses",-1))]),F[15]||(F[15]=f("div",{class:"form-info"},[f("h4",null," Setup Instructions:"),f("ol",null,[f("li",null,"Create your Google Form manually with the questions you want"),f("li",null,'Make sure to enable "Collect email addresses" in form settings'),f("li",null,"Copy the form's view URL and paste it above"),f("li",null,'Click "Add Form" - a Google Sheet will be automatically created for responses')]),f("p",{class:"info-note"},[f("strong",null," Automatic:"),Oe(" A Google Sheet will be created immediately when you add the form. Each case manager will get their own copy of this sheet when they use the form. ")])],-1))]),f("div",qoe,[f("button",{onClick:b,class:"secondary-btn"},"Cancel"),f("button",{onClick:w,class:"primary-btn",disabled:!P.value||Z(e)},[Z(e)?(L(),U("span",Yoe,"Adding Form...")):(L(),U("span",Joe,"Add Form"))],8,Xoe)])])])):Se("",!0),f("div",Qoe,[F[25]||(F[25]=f("h3",null,"Google Drive Setup",-1)),F[26]||(F[26]=f("p",{class:"section-description"}," Configure how the system accesses Google Drive for creating feedback forms and response sheets. ",-1)),v.value?(L(),U("div",Zoe,F[16]||(F[16]=[f("p",null,"Loading Google Drive settings...",-1)]))):g.value?(L(),U("div",ele,[f("div",tle,[f("h4",null,Q(g.value.name||"Your School"),1),f("div",rle,[g.value.sharedDriveId?(L(),U("span",nle,"  Google Workspace Mode ")):(L(),U("span",sle,"  Personal Google Drive Mode "))])]),f("div",ale,[f("p",null,[F[17]||(F[17]=f("strong",null,"Current Mode:",-1)),g.value.sharedDriveId?(L(),U("span",ile,"Google Workspace Shared Drive")):(L(),U("span",ole,"Personal Google Drive"))]),g.value.sharedDriveId?(L(),U("p",lle,[F[18]||(F[18]=f("strong",null,"Shared Drive:",-1)),Oe(" "+Q(g.value.sharedDriveName||"CaseManageVue Templates"),1)])):Se("",!0),g.value.sharedDriveId?Se("",!0):(L(),U("p",cle,F[19]||(F[19]=[f("strong",null,"Note:",-1),Oe(" Files will be created in your personal Google Drive when you create forms. ")])))]),g.value.sharedDriveId?(L(),U("div",ule,[f("a",{href:`https://drive.google.com/drive/folders/${g.value.sharedDriveId}`,target:"_blank",class:"secondary-btn"},"  Open Shared Drive ",8,dle)])):Se("",!0)])):Se("",!0),!v.value&&!((O=g.value)!=null&&O.sharedDriveId)?(L(),U("div",fle,[F[24]||(F[24]=f("div",{class:"setup-card"},[f("h4",null," Personal Google Drive (Recommended for Testing)"),f("p",{class:"setup-description"}," Use your personal Google account to create forms and sheets. Files will be created in your personal Drive. "),f("div",{class:"setup-note"},[f("strong",null," Ready to use:"),Oe(" No additional setup required. When you create forms, you'll be prompted to sign in with your Google account. ")])],-1)),f("div",hle,[F[22]||(F[22]=f("h4",null," Google Workspace (For Organizations)",-1)),F[23]||(F[23]=f("p",{class:"setup-description"}," Use a Google Workspace Shared Drive for organization-wide access and management. ",-1)),f("div",ple,[f("div",mle,[F[20]||(F[20]=f("label",{for:"workspaceDriveName"},"Shared Drive Name:",-1)),Ae(f("input",{id:"workspaceDriveName","onUpdate:modelValue":F[6]||(F[6]=B=>E.value=B),type:"text",class:"form-input",placeholder:"e.g., CaseManageVue - School Name",disabled:I.value},null,8,gle),[[Je,E.value]])]),f("button",{onClick:N,class:"primary-btn",disabled:I.value||!E.value.trim()},[I.value?(L(),U("span",xle," Setting up...")):(L(),U("span",yle,"Setup Google Workspace"))],8,vle),F[21]||(F[21]=f("div",{class:"workspace-note"},[f("strong",null,"Note:"),Oe(" This requires Google Workspace admin permissions and manual configuration. ")],-1))])])])):Se("",!0),y.value?(L(),U("div",{key:3,class:Ze(["alert",x.value])},Q(y.value),3)):Se("",!0)]),f("div",Ele,[F[34]||(F[34]=f("h3",null,"Feedback Forms",-1)),Z(s)?(L(),U("div",ble,"Loading forms...")):Z(i).length===0?(L(),U("div",_le,F[27]||(F[27]=[f("p",null,"No feedback forms added yet.",-1),f("p",null,'Click "Add Form" to get started.',-1)]))):(L(),U("div",Sle,[(L(!0),U(Fe,null,Ve(Z(i),B=>(L(),U("div",{key:B.id,class:"form-card"},[f("div",Tle,[f("h4",null,Q(B.title||"Untitled Form"),1),f("div",wle,[f("button",{onClick:V=>T(B),class:"admin-action-btn info",title:"View Form"},"  ",8,Ale),f("button",{onClick:V=>_(B),class:"admin-action-btn edit",title:"Edit Form"},"  ",8,Cle),f("button",{onClick:V=>S(B),class:"admin-action-btn delete",title:"Delete Form"},"  ",8,Ile)])]),f("div",kle,[f("p",null,[F[28]||(F[28]=f("strong",null,"Created:",-1)),Oe(" "+Q(k(B.createdAt)),1)]),B.description?(L(),U("p",Dle,[F[29]||(F[29]=f("strong",null,"Description:",-1)),Oe(" "+Q(B.description),1)])):Se("",!0),f("p",null,[F[30]||(F[30]=f("strong",null,"Form URL:",-1)),F[31]||(F[31]=Oe()),f("a",{href:B.formUrl,target:"_blank",class:"form-link"},"Open Form",8,Ple)]),B.spreadsheetUrl?(L(),U("p",Fle,[F[32]||(F[32]=f("strong",null,"Response Sheet:",-1)),f("a",{href:B.spreadsheetUrl,target:"_blank",class:"form-link"},"View Responses",8,Rle),F[33]||(F[33]=f("span",{class:"sheet-status"}," Auto-created",-1))])):(L(),U("p",Ole," Sheet will be created when form is first used"))])]))),128))]))])])}}},Mle=xt(Nle,[["__scopeId","data-v-4e2713cd"]]);function Lle(t,e,r){const{getLabel:n}=fo(),s=_e(()=>{var h;const d=((h=r.value)==null?void 0:h.numPeriods)||7;return Array.from({length:d},(p,m)=>({value:m.toString(),label:n(m+1),periodIndex:m}))}),i=_e(()=>{const d=new Set;return console.log(" Finding teachers from students:",t.value.length),t.value.forEach(h=>{var p,m,g,v,y;(p=h.aeries)!=null&&p.schedule&&Object.values(h.aeries.schedule).forEach(x=>{x&&x.teacherId&&(console.log(" Found teacher ID in aeries.schedule:",x.teacherId),d.add(String(x.teacherId)))}),(g=(m=h.app)==null?void 0:m.schedule)!=null&&g.periods&&Object.values(h.app.schedule.periods).forEach(x=>{x&&(console.log(" Found teacher ID in app.schedule.periods:",x),d.add(String(x)))});for(let x=1;x<=7;x++){const E=`period${x}TeacherId`,I=h[E]||((v=h.aeries)==null?void 0:v[E])||((y=h.app)==null?void 0:y[E]);I&&(console.log(" Found teacher ID in",E,":",I),d.add(String(I)))}}),console.log(" Unique teacher IDs found:",Array.from(d)),console.log(" Users available:",e.value.length),Array.from(d).map(h=>{let p=e.value.find(m=>m.id===h);return!p&&/^\d+$/.test(h)&&(p=e.value.find(m=>m.aeriesId===h)),{id:h,name:p?p.name||`${p.firstName} ${p.lastName}`:`Teacher ${h}`,actualUserId:p?p.id:null}}).sort((h,p)=>h.name.localeCompare(p.name))}),a=(d,h=[])=>{let p=-1;if(/^\d+$/.test(d))p=parseInt(d)-1;else if(d==="SH")p=6;else if(d.startsWith("Per")){const m=d.replace("Per","");/^\d+$/.test(m)&&(p=parseInt(m)-1)}return h.includes(p.toString())};return{availablePeriods:s,availableTeachers:i,getStudentsForTeachers:(d,h=[])=>t.value.filter(p=>{var g,v,y,x,E,I,P;if(!(((v=(g=p.app)==null?void 0:g.flags)==null?void 0:v.flag1)||p.flag1||!1))return!1;if((y=p.aeries)!=null&&y.schedule){const w=Object.entries(p.aeries.schedule);for(let b=0;b<w.length;b++){const[T,_]=w[b];if(_&&_.teacherId&&d.includes(String(_.teacherId))&&!a(T,h))return!0}}if((E=(x=p.app)==null?void 0:x.schedule)!=null&&E.periods){const w=Object.entries(p.app.schedule.periods);for(let b=0;b<w.length;b++){const[T,_]=w[b];if(_&&d.includes(String(_))&&!a(T,h))return!0}}for(let w=0;w<7;w++){const b=`period${w+1}TeacherId`,T=p[b]||((I=p.aeries)==null?void 0:I[b])||((P=p.app)==null?void 0:P[b]);if(T&&d.includes(String(T))&&!h.includes(w.toString()))return!0}return!1}),getStudentTeacherPeriods:(d,h,p=[])=>{var g,v,y,x,E;const m=[];if((g=d.aeries)!=null&&g.schedule){const I=Object.entries(d.aeries.schedule);for(let P=0;P<I.length;P++){const[w,b]=I[P];if(b&&b.teacherId&&h.includes(String(b.teacherId))&&!a(w,p)){let T=e.value.find(S=>S.id===String(b.teacherId));!T&&/^\d+$/.test(b.teacherId)&&(T=e.value.find(S=>S.aeriesId===String(b.teacherId)));const _=n(P+1);m.push({period:_,teacherName:T?T.name||`${T.firstName} ${T.lastName}`:`Teacher ${b.teacherId}`})}}}if((y=(v=d.app)==null?void 0:v.schedule)!=null&&y.periods){const I=Object.entries(d.app.schedule.periods);for(let P=0;P<I.length;P++){const[w,b]=I[P];if(b&&h.includes(String(b))&&!a(w,p)){const T=e.value.find(S=>S.id===String(b)),_=n(parseInt(w));m.push({period:_,teacherName:T?T.name||`${T.firstName} ${T.lastName}`:`Teacher ${b}`})}}}for(let I=0;I<7;I++){const P=`period${I+1}TeacherId`,w=d[P]||((x=d.aeries)==null?void 0:x[P])||((E=d.app)==null?void 0:E[P]);if(w&&h.includes(String(w))&&!p.includes(I.toString())){let b=e.value.find(_=>_.id===String(w));!b&&/^\d+$/.test(w)&&(b=e.value.find(_=>_.aeriesId===String(w)));const T=n(I+1);m.push({period:T,teacherName:b?b.name||`${b.firstName} ${b.lastName}`:`Teacher ${w}`})}}return m},generateCSV:()=>{const d=["Student ID","First Name","Last Name","Grade","Case Manager","Assessment Accommodations","Services"],h=t.value.map(m=>{var P,w,b,T,_;const g=ut(m,"firstName")||"",v=ut(m,"lastName")||"",y=ut(m,"grade")||"",x=m.caseManagerId||((w=(P=m.app)==null?void 0:P.studentData)==null?void 0:w.caseManagerId)||"",E=((T=(b=m.app)==null?void 0:b.accommodations)==null?void 0:T.assessment)||[],I=((_=m.app)==null?void 0:_.classServices)||[];return[m.id||"",g,v,y,x,Array.isArray(E)?E.join("; "):E,Array.isArray(I)?I.map(S=>S.name||S).join("; "):I]});return[d,...h].map(m=>m.map(g=>`"${String(g).replace(/"/g,'""')}"`).join(",")).join(`
`)},downloadCSV:(d,h)=>{const p=new Blob([d],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");m.href=URL.createObjectURL(p),m.download=h,m.click(),URL.revokeObjectURL(m.href)},isPeriodExcluded:a}}const mg="casemanage_linked_sheet_id",Jf="Student Data";function iy(){const t=ne(!1),e=ne(localStorage.getItem(mg)||""),r=ne(""),n=ne(null),s=ne("idle"),i=ne(""),a=ne(null),o=ne("");let l=null;const c=()=>new Promise((b,T)=>{var S,k,A;if((k=(S=window.google)==null?void 0:S.accounts)!=null&&k.oauth2&&((A=window.gapi)!=null&&A.client)){b();return}const _=document.createElement("script");_.src="https://accounts.google.com/gsi/client",_.onload=()=>{a.value=window.google.accounts.oauth2.initTokenClient({client_id:"756483333257-kh1cv865e0buv0cv9g0v1h7ghq7s0e70.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",callback:N=>{N.access_token?(o.value=N.access_token,t.value=!0,window.gapi.client.setToken({access_token:N.access_token}),l&&(l(N),l=null)):(console.error("Failed to get access token"),l&&(l(null),l=null))}});const D=document.createElement("script");D.src="https://apis.google.com/js/api.js",D.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]}),b()})},document.head.appendChild(D)},_.onerror=()=>T(new Error("Failed to load Google Identity Services")),document.head.appendChild(_)}),u=async()=>{if(!a.value)throw new Error("Google auth not initialized");if(o.value)try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:"1BxiMVs0XRA5nFMRigcZ_6g3D6P6dNTMhvBSm1x7kFNg"}),{access_token:o.value}}catch{console.log("Token expired, requesting new one"),o.value=""}return new Promise((b,T)=>{l=b;const _=setTimeout(()=>{l=null,T(new Error("Token request timed out"))},3e4),S=a.value.callback;a.value.callback=k=>{clearTimeout(_),a.value.callback=S,k.access_token?(o.value=k.access_token,t.value=!0,window.gapi.client.setToken({access_token:k.access_token}),l&&(l(k),l=null)):(console.error("Failed to get access token:",k),l&&(l(null),l=null))};try{a.value.requestAccessToken()}catch(k){clearTimeout(_),a.value.callback=S,T(k)}})},d=async(b,T=[])=>{var _;try{s.value="syncing",i.value="Creating new Google Sheet...",o.value||await u();const k=((_=jo().currentUser)==null?void 0:_.email)||"",A=await window.gapi.client.sheets.spreadsheets.create({properties:{title:`CaseManage Student Data - ${new Date().toLocaleDateString()}`,locale:"en_US",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},sheets:[{properties:{title:Jf,gridProperties:{rowCount:1e3,columnCount:9,frozenRowCount:1}}}]}),D=A.result.spreadsheetId;e.value=D,r.value=`https://docs.google.com/spreadsheets/d/${D}`,localStorage.setItem(mg,D),await h(b,T);const N=A.result.sheets[0].properties.sheetId;return await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:D,resource:{requests:[{repeatCell:{range:{sheetId:N,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:N,dimension:"COLUMNS",startIndex:0,endIndex:9}}},{addProtectedRange:{protectedRange:{range:{sheetId:N},description:`Read-only protection for ${Jf}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),s.value="success",i.value="Sheet created and linked successfully!",n.value=new Date,window.open(r.value,"_blank"),{spreadsheetId:D,url:r.value}}catch(S){throw console.error("Error creating sheet:",S),s.value="error",i.value=`Failed to create sheet: ${S.message}`,S}},h=async(b,T=[])=>{if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{s.value="syncing",i.value="Updating Google Sheet...",o.value||await u();const _=b.filter(N=>{var F,O;return((O=(F=N.app)==null?void 0:F.flags)==null?void 0:O.flag1)||N.flag1||!1});console.log(" Google Sheets - Original students:",b.length),console.log(" Google Sheets - Filtered students (separate setting only):",_.length),console.log(" Google Sheets - Students data:",_),_&&_.length>0&&console.log(" Google Sheets - First student:",_[0]);const S=["Student ID","First Name","Last Name","Grade","Case Manager","Separate Setting","Assessment Accommodations","Services","Last Updated"],k=_.map(N=>{var R,F,O,B,V,z,H,j,W,K,re,he;return console.log(" Processing student:",N.id,{firstName:N.firstName||((F=(R=N.app)==null?void 0:R.studentData)==null?void 0:F.firstName),lastName:N.lastName||((B=(O=N.app)==null?void 0:O.studentData)==null?void 0:B.lastName),grade:N.grade||((z=(V=N.app)==null?void 0:V.studentData)==null?void 0:z.grade)}),[N.id||"",N.firstName||((j=(H=N.app)==null?void 0:H.studentData)==null?void 0:j.firstName)||"",N.lastName||((K=(W=N.app)==null?void 0:W.studentData)==null?void 0:K.lastName)||"",N.grade||((he=(re=N.app)==null?void 0:re.studentData)==null?void 0:he.grade)||"",m(N,T)||"",y(N)||"",g(N,"assessment")||"",v(N)||"",new Date().toLocaleString()]}),A=[S,...k];console.log(" Google Sheets - Data to write:",A),await window.gapi.client.sheets.spreadsheets.values.clear({spreadsheetId:e.value,range:`${Jf}!A:Z`});const D=await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${Jf}!A1`,valueInputOption:"RAW",resource:{values:A}});console.log(" Google Sheets - Update response:",D),s.value="success",i.value=`Updated ${k.length} students (separate setting only)`,n.value=new Date}catch(_){throw console.error("Error updating sheet:",_),s.value="error",i.value=`Failed to update: ${_.message}`,_.status===401&&(o.value="",await u()),_}},p=()=>{e.value="",r.value="",localStorage.removeItem(mg),s.value="idle",i.value="",n.value=null},m=(b,T=[])=>{var k,A;const _=b.caseManagerId||((A=(k=b.app)==null?void 0:k.studentData)==null?void 0:A.caseManagerId)||b.casemanager_id;if(!_)return"Not Assigned";const S=T.find(D=>D.id===_);return S&&(S.name||`${S.firstName} ${S.lastName}`||S.email)||_},g=(b,T)=>{var S,k,A;const _=((k=(S=b.app)==null?void 0:S.accommodations)==null?void 0:k[T])||((A=b.accommodations)==null?void 0:A[T])||[];return Array.isArray(_)?_.join(", "):_},v=b=>{var _;const T=((_=b.app)==null?void 0:_.classServices)||b.classServices||[];return Array.isArray(T)?T.map(S=>S.name||S).join(", "):T},y=b=>{var _,S;return((S=(_=b.app)==null?void 0:_.flags)==null?void 0:S.flag1)||b.flag1||!1?"True":"False"},x=async()=>{if(!e.value)return!1;try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:e.value}),!0}catch(b){return b.status===404&&p(),!1}},E=async(b,T,_,S=[],k=[])=>{var A;if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{o.value||await u();const N=((A=jo().currentUser)==null?void 0:A.email)||"";console.log(" Creating custom tab:",b,"for teachers:",_,"excluding periods:",k);const F=(await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{addSheet:{properties:{title:b,gridProperties:{rowCount:1e3,columnCount:12,frozenRowCount:1}}}}]}})).result.replies[0].addSheet.properties.sheetId;console.log(" Created sheet with ID:",F);const O=T.filter(H=>{var W,K;return((K=(W=H.app)==null?void 0:W.flags)==null?void 0:K.flag1)||H.flag1||!1});console.log(" Custom tab - Original students:",T.length),console.log(" Custom tab - Filtered students (separate setting only):",O.length);const B=["Student ID","First Name","Last Name","Grade","Case Manager","Period","Teacher","Subject","Separate Setting","Assessment Accommodations","Services","Last Updated"],V=[];O.forEach(H=>{const j=I(H,_,S,k);console.log(" Student:",H.id,"Periods found:",j.length,"Excluded periods:",k),j.forEach(W=>{console.log(" Adding row for period:",W.period,"teacher:",W.teacherName,"source:",W.source||"unknown")}),j.forEach(W=>{var K,re,he,ue,pe,te;V.push([H.id||"",H.firstName||((re=(K=H.app)==null?void 0:K.studentData)==null?void 0:re.firstName)||"",H.lastName||((ue=(he=H.app)==null?void 0:he.studentData)==null?void 0:ue.lastName)||"",H.grade||((te=(pe=H.app)==null?void 0:pe.studentData)==null?void 0:te.grade)||"",m(H,S)||"",W.period||"",W.teacherName||"",W.subject||"",y(H)||"",g(H,"assessment")||"",v(H)||"",new Date().toLocaleString()])})});const z=[B,...V];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${b}!A1`,valueInputOption:"RAW",resource:{values:z}}),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{repeatCell:{range:{sheetId:F,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:F,dimension:"COLUMNS",startIndex:0,endIndex:12}}},{addProtectedRange:{protectedRange:{range:{sheetId:F},description:`Read-only protection for ${b}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),console.log(" Custom tab created successfully with",V.length,"rows and read-only protection"),{sheetId:F,rowCount:V.length}}catch(D){throw console.error("Error creating custom tab:",D),D}},I=(b,T,_=[],S=[])=>{var D,N,R,F,O;const k=[];console.log(" getStudentPeriodsForTeachers for student:",b.id,"teacherIds:",T,"excludedPeriods:",S,"excludedPeriods array:",JSON.stringify(S));const A=B=>{let V=-1;if(/^\d+$/.test(B))V=parseInt(B)-1;else if(B==="SH")V=6;else if(B.startsWith("Per")){const z=B.replace("Per","");/^\d+$/.test(z)&&(V=parseInt(z)-1)}return console.log(" Period",B,"maps to index",V,"excluded?",S.includes(V.toString())),S.includes(V.toString())};if((D=b.aeries)!=null&&D.schedule){const B=Object.entries(b.aeries.schedule);console.log(" Aeries schedule entries:",B.length);for(let V=0;V<B.length;V++){const[z,H]=B[V],j=A(z);console.log(" Checking aeries period key:",z,"teacherId:",H==null?void 0:H.teacherId,"excluded?",j),H&&H.teacherId&&T.includes(String(H.teacherId))&&(j?console.log(" Excluding aeries period",z):(console.log(" Including aeries period",z),k.push({period:z.replace("period",""),teacherId:H.teacherId,teacherName:P(H.teacherId,_),subject:H.subject||"",source:"aeries"})))}}if((R=(N=b.app)==null?void 0:N.schedule)!=null&&R.periods){const B=Object.entries(b.app.schedule.periods);console.log(" App schedule entries:",B.length);for(let V=0;V<B.length;V++){const[z,H]=B[V],j=A(z);console.log(" Checking app period key:",z,"teacherId:",H,"excluded?",j),H&&T.includes(String(H))&&(j?console.log(" Excluding app period",z):(console.log(" Including app period",z),k.push({period:z,teacherId:H,teacherName:P(H,_),subject:"",source:"app"})))}}for(let B=0;B<7;B++){const V=`period${B+1}TeacherId`,z=b[V]||((F=b.aeries)==null?void 0:F[V])||((O=b.app)==null?void 0:O[V]);if(z&&T.includes(String(z))){const H=S.includes(B.toString());console.log(" Checking CSV period index",B,"field:",V,"teacherId:",z,"excluded?",H),H?console.log(" Excluding CSV period",B):(console.log(" Including CSV period",B),k.push({period:(B+1).toString(),teacherId:z,teacherName:P(z,_),subject:"",source:"csv"}))}}return console.log(" Final periods for student",b.id,":",k.length,k),k},P=(b,T=[])=>{let _=T.find(S=>S.id===b);return!_&&/^\d+$/.test(b)&&(_=T.find(S=>S.aeriesId===b)),_?_.name||`${_.firstName} ${_.lastName}`||`Teacher ${b}`:`Teacher ${b}`};return{isInitialized:t,linkedSheetId:e,linkedSheetUrl:r,lastSyncTime:n,syncStatus:s,syncMessage:i,initializeGoogleAuth:c,requestAccessToken:u,createLinkedSheet:d,updateSheetData:h,createCustomTab:E,deleteCustomTab:async b=>{if(!e.value)throw new Error("No linked sheet.");try{o.value||await u(),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{deleteSheet:{sheetId:b}}]}}),console.log(" Deleted custom tab with sheet ID:",b)}catch(T){throw console.error("Error deleting custom tab:",T),T}},unlinkSheet:p,checkSheetConnection:x}}const Ble=Object.freeze(Object.defineProperty({__proto__:null,useGoogleSheetsRealtime:iy},Symbol.toStringTag,{value:"Module"}));function Ule(t,e,r){const{generateCSV:n,downloadCSV:s}=r,{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeGoogleAuth:u,createLinkedSheet:d,updateSheetData:h,createCustomTab:p,deleteCustomTab:m,unlinkSheet:g,checkSheetConnection:v}=iy();let y=null,x=!1;const E=async()=>{try{const D=localStorage.getItem("casemanage_linked_sheet_id");D&&D.startsWith("1XSL0Sl7")&&(console.log("Clearing old sheet ID that was causing 403 errors"),localStorage.removeItem("casemanage_linked_sheet_id")),await u(),i.value&&await v()&&(await b(),I())}catch(D){console.error("Failed to initialize Google Auth:",D)}};Ut(()=>t.value,(D,N)=>{D&&N&&D!==N&&(x=!0,console.log(" Student data changed, will sync on next interval")),D!=null&&D.length},{deep:!0});const I=()=>{y&&clearInterval(y),y=setInterval(async()=>{if(i.value&&x&&l.value!=="syncing")try{console.log(" Hourly auto-sync starting..."),await b(),x=!1,console.log(" Hourly auto-sync completed")}catch(D){console.error(" Hourly auto-sync failed:",D)}},36e5)},P=()=>{y&&clearInterval(y)},w=async()=>{try{await d(t.value,e.value),I()}catch(D){console.error("Failed to create linked sheet:",D),alert("Failed to create Google Sheet. Please make sure you are signed in to Google.")}},b=async()=>{if(!(!i.value||l.value==="syncing"))try{await h(t.value,e.value)}catch(D){console.error("Failed to sync sheet:",D),alert("Failed to sync sheet. Please try again.")}};return{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeIntegration:E,createLinkedGoogleSheet:w,syncNow:b,openGoogleSheet:()=>{a.value&&(window.open(a.value,"_blank","noopener,noreferrer")||(window.location.href=a.value))},unlinkSheet:g,createCustomTab:p,deleteCustomTab:m,createGoogleSheetWithData:()=>{const D=n();s(D,"student_data.csv"),window.open("https://sheets.new","_blank")},createBlankGoogleSheet:()=>{window.open("https://sheets.new","_blank")},exportToCSV:()=>{const D=n();s(D,"student_data_export.csv")},formatTime:D=>new Date(D).toLocaleString(),setupAutoSync:I,cleanupAutoSync:P}}function $le(t,e){const{getStudentsForTeachers:r}=t,{createCustomTab:n,deleteCustomTab:s}=e,i=ne([]),a=ne(!1),o=ne(""),l=ne([]),c=ne([]),u=5,d=_e(()=>l.value.length===0?[]:r(l.value,c.value)),h=async v=>{if(!o.value.trim()||l.value.length===0){alert("Please enter a tab name and select at least one teacher");return}if(i.value.length>=u){alert(`Maximum of ${u} custom tabs allowed`);return}try{const y=r(l.value,c.value),x=await n(o.value.trim(),y,l.value,v,c.value),E={id:Date.now().toString(),name:o.value.trim(),teachers:[...l.value],studentCount:x.rowCount,sheetId:x.sheetId};i.value.push(E),m(),console.log("Custom tab added:",E),alert(`Custom tab "${E.name}" created successfully with ${x.rowCount} student entries!`)}catch(y){console.error("Failed to create custom tab:",y),alert("Failed to create custom tab in Google Sheet. Please try again.")}},p=async v=>{const y=i.value.find(x=>x.id===v);if(y&&confirm(`Are you sure you want to remove the "${y.name}" tab?`))try{y.sheetId&&await s(y.sheetId),i.value=i.value.filter(x=>x.id!==v),console.log("Custom tab removed:",v),alert(`Tab "${y.name}" removed successfully.`)}catch(x){console.error("Failed to delete custom tab:",x),alert("Failed to delete tab from Google Sheet. You may need to delete it manually."),i.value=i.value.filter(E=>E.id!==v)}},m=()=>{o.value="",l.value=[],c.value=[],a.value=!1};return{customTabs:i,showAddTabForm:a,newTabName:o,selectedTeachers:l,selectedExcludedPeriods:c,maxCustomTabs:u,filteredStudentsPreview:d,addCustomTab:h,removeCustomTab:p,resetForm:m,toggleAddTabForm:()=>{a.value=!a.value,a.value||m()}}}const Vle={class:"sheets-section"},jle={key:0,class:"linked-sheet-status"},Hle={class:"status-card success"},Gle={class:"sync-info"},Wle={key:0},zle={key:1,class:"syncing"},Kle={key:2,class:"success"},qle={key:3,class:"error"},Xle={class:"sheet-actions"},Yle=["disabled"],Jle={key:1,class:"create-sheet-section"},Qle={class:"alternative-options"},Zle={class:"button-group"},ece={__name:"GoogleSheetsConnector",props:{linkedSheetId:String,lastSyncTime:[String,Date],syncStatus:String,syncMessage:String},emits:["openGoogleSheet","syncNow","unlinkSheet","createLinkedGoogleSheet","createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){const e=r=>new Date(r).toLocaleString();return(r,n)=>(L(),U("div",Vle,[n[12]||(n[12]=f("h4",null,"Google Sheets Integration",-1)),t.linkedSheetId?(L(),U("div",jle,[f("div",Hle,[n[7]||(n[7]=f("h5",null," Linked Google Sheet",-1)),n[8]||(n[8]=f("p",null,"Your student data is synced to Google Sheets",-1)),f("button",{onClick:n[0]||(n[0]=s=>r.$emit("openGoogleSheet")),class:"sheet-link"}," Open Google Sheet  "),f("div",Gle,[t.lastSyncTime?(L(),U("span",Wle,"Last synced: "+Q(e(t.lastSyncTime)),1)):Se("",!0),t.syncStatus==="syncing"?(L(),U("span",zle," Syncing...")):t.syncStatus==="success"?(L(),U("span",Kle," Synced")):t.syncStatus==="error"?(L(),U("span",qle," "+Q(t.syncMessage),1)):Se("",!0)]),n[9]||(n[9]=f("div",{class:"auto-sync-info"},[f("span",{class:"auto-sync-badge"},[f("span",{class:"pulse"}),Oe(" Auto-sync enabled ")]),f("p",{class:"auto-sync-description"}," Changes to student data, accommodations, and services are automatically synced to your Google Sheet. ")],-1)),f("div",Xle,[f("button",{onClick:n[1]||(n[1]=s=>r.$emit("syncNow")),disabled:t.syncStatus==="syncing",class:"btn-sync"}," Sync Now ",8,Yle),f("button",{onClick:n[2]||(n[2]=s=>r.$emit("unlinkSheet")),class:"btn-unlink"}," Unlink Sheet ")])])])):(L(),U("div",Jle,[n[10]||(n[10]=tn('<h5 data-v-ec72cef0>Create a Linked Google Sheet</h5><p data-v-ec72cef0>Link your student data to a Google Sheet that automatically updates when changes are made.</p><div class="features-list" data-v-ec72cef0><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Auto-syncs when students are added or updated</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Updates accommodations and services in real-time</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Maintains a live connection to your data</span></div></div>',3)),f("button",{onClick:n[3]||(n[3]=s=>r.$emit("createLinkedGoogleSheet")),class:"btn-primary"},"  Create & Link Google Sheet ")])),f("div",Qle,[n[11]||(n[11]=f("h5",null,"Other Export Options",-1)),f("div",Zle,[f("button",{onClick:n[4]||(n[4]=s=>r.$emit("createGoogleSheetWithData")),class:"btn-secondary"},"  Create Google Sheet with Data (One-time) "),f("button",{onClick:n[5]||(n[5]=s=>r.$emit("createBlankGoogleSheet")),class:"btn-secondary"},"  Create Blank Google Sheet "),f("button",{onClick:n[6]||(n[6]=s=>r.$emit("exportToCSV")),class:"btn-secondary"},"  Export to CSV Only ")])])]))}},tce=xt(ece,[["__scopeId","data-v-ec72cef0"]]),rce={class:"preview-section"},nce={class:"preview-table"},sce={key:0},ace={key:0},ice={key:0,class:"preview-note"},gg=5,oce={__name:"StudentPreview",props:{filteredStudents:{type:Array,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},setup(t){const e=t,r=_e(()=>e.filteredStudents.slice(0,gg)),n=a=>{const o=ut(a,"firstName")||"",l=ut(a,"lastName")||"";return`${o} ${l}`.trim()},s=a=>ut(a,"grade")||"",i=a=>e.getStudentTeacherPeriods(a,e.selectedTeachers,e.selectedExcludedPeriods);return(a,o)=>(L(),U("div",rce,[f("h6",null,"Preview ("+Q(t.filteredStudents.length)+" students)",1),f("div",nce,[f("table",null,[o[0]||(o[0]=f("thead",null,[f("tr",null,[f("th",null,"Name"),f("th",null,"Grade"),f("th",null,"Period"),f("th",null,"Teacher")])],-1)),f("tbody",null,[(L(!0),U(Fe,null,Ve(r.value,l=>(L(),U("tr",{key:l.id},[f("td",null,Q(n(l)),1),f("td",null,Q(s(l)),1),f("td",null,[(L(!0),U(Fe,null,Ve(i(l),(c,u)=>(L(),U("span",{key:u},[Oe(Q(c.period),1),u<i(l).length-1?(L(),U("span",sce,", ")):Se("",!0)]))),128))]),f("td",null,[(L(!0),U(Fe,null,Ve(i(l),(c,u)=>(L(),U("span",{key:u},[Oe(Q(c.teacherName),1),u<i(l).length-1?(L(),U("span",ace,", ")):Se("",!0)]))),128))])]))),128))])]),t.filteredStudents.length>gg?(L(),U("p",ice," ... and "+Q(t.filteredStudents.length-gg)+" more students ",1)):Se("",!0)])]))}},lce=xt(oce,[["__scopeId","data-v-936b1ce9"]]),cce={class:"custom-tabs-config"},uce={class:"add-tab-controls"},dce=["disabled"],fce={key:0,class:"max-tabs-warning"},hce={key:0,class:"add-tab-form"},pce={class:"form-group"},mce=["value"],gce={class:"form-group"},vce={class:"teacher-checkboxes"},xce=["value","checked","onChange"],yce={class:"form-group"},Ece={class:"period-checkboxes"},bce=["value","checked","onChange"],_ce={class:"form-actions"},Sce={key:1,class:"existing-tabs"},Tce={class:"tab-teachers"},wce=["onClick"],Ace={__name:"CustomTabManager",props:{customTabs:{type:Array,required:!0},showAddTabForm:{type:Boolean,required:!0},newTabName:{type:String,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},maxCustomTabs:{type:Number,required:!0},availableTeachers:{type:Array,required:!0},availablePeriods:{type:Array,required:!0},filteredStudentsPreview:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},emits:["toggleAddTabForm","update:newTabName","updateSelectedTeachers","updateSelectedExcludedPeriods","addCustomTab","removeCustomTab","resetForm"],setup(t){return(e,r)=>(L(),U("div",cce,[r[8]||(r[8]=f("h5",null,"Custom Teacher Tabs",-1)),r[9]||(r[9]=f("p",null,"Create custom tabs with data filtered by specific teachers",-1)),f("div",uce,[f("button",{onClick:r[0]||(r[0]=n=>e.$emit("toggleAddTabForm")),disabled:t.customTabs.length>=t.maxCustomTabs,class:"btn-primary"}," + Add Custom Tab ",8,dce),t.customTabs.length>=t.maxCustomTabs?(L(),U("span",fce," Maximum of "+Q(t.maxCustomTabs)+" custom tabs allowed ",1)):Se("",!0)]),t.showAddTabForm?(L(),U("div",hce,[f("div",pce,[r[4]||(r[4]=f("label",null,"Tab Name",-1)),f("input",{value:t.newTabName,onInput:r[1]||(r[1]=n=>e.$emit("update:newTabName",n.target.value)),type:"text",class:"form-input",placeholder:"e.g., Math Teachers",maxlength:"30"},null,40,mce)]),f("div",gce,[r[5]||(r[5]=f("label",null,"Select Teachers",-1)),f("div",vce,[(L(!0),U(Fe,null,Ve(t.availableTeachers,n=>(L(),U("label",{key:n.id,class:"checkbox-label"},[f("input",{type:"checkbox",value:n.id,checked:t.selectedTeachers.includes(n.id),onChange:s=>e.$emit("updateSelectedTeachers",n.id,s.target.checked)},null,40,xce),Oe(" "+Q(n.name),1)]))),128))])]),f("div",yce,[r[6]||(r[6]=f("label",null,"Exclude Periods (Optional)",-1)),f("div",Ece,[(L(!0),U(Fe,null,Ve(t.availablePeriods,n=>(L(),U("label",{key:n.value,class:"checkbox-label"},[f("input",{type:"checkbox",value:n.value,checked:t.selectedExcludedPeriods.includes(n.value),onChange:s=>e.$emit("updateSelectedExcludedPeriods",n.value,s.target.checked)},null,40,bce),Oe(" "+Q(n.label),1)]))),128))])]),t.selectedTeachers.length>0?(L(),Xr(lce,{key:0,"filtered-students":t.filteredStudentsPreview,"selected-teachers":t.selectedTeachers,"selected-excluded-periods":t.selectedExcludedPeriods,"get-student-teacher-periods":t.getStudentTeacherPeriods},null,8,["filtered-students","selected-teachers","selected-excluded-periods","get-student-teacher-periods"])):Se("",!0),f("div",_ce,[f("button",{onClick:r[2]||(r[2]=n=>e.$emit("addCustomTab")),class:"btn-primary"}," Create Tab "),f("button",{onClick:r[3]||(r[3]=n=>e.$emit("resetForm")),class:"btn-secondary"}," Cancel ")])])):Se("",!0),t.customTabs.length>0?(L(),U("div",Sce,[r[7]||(r[7]=f("h6",null,"Current Custom Tabs",-1)),(L(!0),U(Fe,null,Ve(t.customTabs,n=>(L(),U("div",{key:n.id,class:"tab-item"},[f("div",null,[f("strong",null,Q(n.name),1),f("span",Tce,Q(n.teachers.length)+" teacher(s), "+Q(n.studentCount)+" students ",1)]),f("button",{onClick:s=>e.$emit("removeCustomTab",n.id),class:"btn-danger btn-small"}," Remove ",8,wce)]))),128))])):Se("",!0)]))}},Cce=xt(Ace,[["__scopeId","data-v-236484db"]]),Ice={class:"export-options-section"},kce={class:"export-grid"},Dce={class:"export-card"},Pce={class:"export-card"},Fce={class:"export-card"},Rce={__name:"TestingExportOptions",emits:["createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){return(e,r)=>(L(),U("div",Ice,[r[12]||(r[12]=f("h4",null,"Export Options",-1)),r[13]||(r[13]=f("p",null,"Additional ways to export and work with your student data",-1)),f("div",kce,[f("div",Dce,[r[3]||(r[3]=f("div",{class:"export-icon"},"",-1)),r[4]||(r[4]=f("h5",null,"Google Sheets with Data",-1)),r[5]||(r[5]=f("p",null,"Create a new Google Sheet and populate it with current student data (one-time export)",-1)),f("button",{onClick:r[0]||(r[0]=n=>e.$emit("createGoogleSheetWithData")),class:"btn-primary"}," Create Sheet with Data ")]),f("div",Pce,[r[6]||(r[6]=f("div",{class:"export-icon"},"",-1)),r[7]||(r[7]=f("h5",null,"Blank Google Sheet",-1)),r[8]||(r[8]=f("p",null,"Create a new blank Google Sheet that you can customize yourself",-1)),f("button",{onClick:r[1]||(r[1]=n=>e.$emit("createBlankGoogleSheet")),class:"btn-primary"}," Create Blank Sheet ")]),f("div",Fce,[r[9]||(r[9]=f("div",{class:"export-icon"},"",-1)),r[10]||(r[10]=f("h5",null,"CSV Export",-1)),r[11]||(r[11]=f("p",null,"Download student data as a CSV file for use in Excel or other applications",-1)),f("button",{onClick:r[2]||(r[2]=n=>e.$emit("exportToCSV")),class:"btn-primary"}," Download CSV ")])]),r[14]||(r[14]=f("div",{class:"export-info"},[f("h5",null,"Export Information"),f("ul",null,[f("li",null,[f("strong",null,"Linked Sheets:"),Oe(" Automatically sync when data changes")]),f("li",null,[f("strong",null,"One-time Exports:"),Oe(" Snapshot of data at export time")]),f("li",null,[f("strong",null,"CSV Files:"),Oe(" Compatible with Excel, Numbers, and other spreadsheet apps")])])],-1))]))}},Oce=xt(Rce,[["__scopeId","data-v-3bc6896f"]]),Nce={class:"testing-links-container"},Mce={__name:"TestingLinks",setup(t){const{students:e,fetchStudents:r}=Oa(),{userList:n,fetchUsers:s}=Na(),{appSettings:i,loadAppSettings:a}=Hs(),o=Lle(e,n,i),{availablePeriods:l,availableTeachers:c,getStudentTeacherPeriods:u}=o,d=Ule(e,n,o),{linkedSheetId:h,lastSyncTime:p,syncStatus:m,syncMessage:g,initializeIntegration:v,createLinkedGoogleSheet:y,syncNow:x,openGoogleSheet:E,unlinkSheet:I,createGoogleSheetWithData:P,createBlankGoogleSheet:w,exportToCSV:b,cleanupAutoSync:T}=d,_=$le(o,d),{customTabs:S,showAddTabForm:k,newTabName:A,selectedTeachers:D,selectedExcludedPeriods:N,maxCustomTabs:R,filteredStudentsPreview:F,addCustomTab:O,removeCustomTab:B,resetForm:V,toggleAddTabForm:z}=_,H=(K,re)=>{if(re)D.value.includes(K)||D.value.push(K);else{const he=D.value.indexOf(K);he>-1&&D.value.splice(he,1)}},j=(K,re)=>{if(re)N.value.includes(K)||N.value.push(K);else{const he=N.value.indexOf(K);he>-1&&N.value.splice(he,1)}},W=async()=>{await O(n.value)};return Bt(async()=>{try{await Promise.all([r(),s(),a()]),console.log("Students loaded:",e.value.length),console.log("Users loaded:",n.value.length),console.log("App settings loaded:",i.value),await v()}catch(K){console.error("Failed to initialize TestingLinks:",K)}}),Ra(()=>{T()}),(K,re)=>(L(),U("div",Nce,[re[1]||(re[1]=f("h3",null,"Testing Links & Google Sheets Integration",-1)),st(tce,{"linked-sheet-id":Z(h),"last-sync-time":Z(p),"sync-status":Z(m),"sync-message":Z(g),onOpenGoogleSheet:Z(E),onSyncNow:Z(x),onUnlinkSheet:Z(I),onCreateLinkedGoogleSheet:Z(y),onCreateGoogleSheetWithData:Z(P),onCreateBlankGoogleSheet:Z(w),onExportToCsv:Z(b)},null,8,["linked-sheet-id","last-sync-time","sync-status","sync-message","onOpenGoogleSheet","onSyncNow","onUnlinkSheet","onCreateLinkedGoogleSheet","onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"]),Z(h)?(L(),Xr(Cce,{key:0,"custom-tabs":Z(S),"show-add-tab-form":Z(k),"new-tab-name":Z(A),"selected-teachers":Z(D),"selected-excluded-periods":Z(N),"max-custom-tabs":Z(R),"available-teachers":Z(c),"available-periods":Z(l),"filtered-students-preview":Z(F),"get-student-teacher-periods":Z(u),onToggleAddTabForm:Z(z),"onUpdate:newTabName":re[0]||(re[0]=he=>A.value=he),onUpdateSelectedTeachers:H,onUpdateSelectedExcludedPeriods:j,onAddCustomTab:W,onRemoveCustomTab:Z(B),onResetForm:Z(V)},null,8,["custom-tabs","show-add-tab-form","new-tab-name","selected-teachers","selected-excluded-periods","max-custom-tabs","available-teachers","available-periods","filtered-students-preview","get-student-teacher-periods","onToggleAddTabForm","onRemoveCustomTab","onResetForm"])):Se("",!0),st(Oce,{onCreateGoogleSheetWithData:Z(P),onCreateBlankGoogleSheet:Z(w),onExportToCsv:Z(b)},null,8,["onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"])]))}},Lce=xt(Mce,[["__scopeId","data-v-8d441fb1"]]),Bce={class:"admin-dashboard"},Uce={class:"stats-grid"},$ce={class:"stat-card"},Vce={class:"stat-content"},jce={class:"stat-card"},Hce={class:"stat-content"},Gce={class:"stat-card"},Wce={class:"stat-content"},zce={class:"stat-card"},Kce={class:"stat-content"},qce={class:"categories-grid"},Xce={class:"category-card"},Yce={class:"category-header"},Jce={class:"category-card"},Qce={class:"category-header"},Zce={class:"category-card"},eue={class:"category-header"},tue={class:"category-card"},rue={class:"category-header"},nue={class:"system-status"},sue={class:"status-grid"},aue={class:"status-card"},iue={class:"sync-status"},oue={class:"sync-item"},lue={key:0,class:"sync-time"},cue={class:"sync-item"},uue={class:"sync-time"},due={class:"status-card"},fue={class:"user-activity"},hue={class:"activity-item"},pue={class:"activity-count"},mue={class:"activity-item"},gue={class:"activity-count"},vue={class:"quick-actions"},xue={class:"actions-grid"},yue={__name:"AdminDashboard",emits:["goToCategory","goToStudents"],setup(t){const{students:e,fetchStudents:r}=Oa(),{userList:n,fetchUsers:s}=Na(),{linkedSheetId:i,lastSyncTime:a}=iy(),o=ne(12),l=ne(8),c=ne(!0),u=ne("Connected"),d=_e(()=>{var y;return((y=e.value)==null?void 0:y.length)||0}),h=_e(()=>{var y;return((y=n.value)==null?void 0:y.length)||0}),p=_e(()=>{var y;return((y=n.value)==null?void 0:y.filter(x=>x.role==="paraeducator").length)||0}),m=_e(()=>i.value?1:0),g=_e(()=>!!i.value),v=y=>y?new Date(y).toLocaleString():"Never";return Bt(async()=>{try{await Promise.all([r(),s()])}catch(y){console.error("Error loading dashboard data:",y)}}),(y,x)=>(L(),U("div",Bce,[f("div",Uce,[f("div",$ce,[x[9]||(x[9]=f("div",{class:"stat-icon"},"",-1)),f("div",Vce,[f("h3",null,Q(d.value),1),x[8]||(x[8]=f("p",null,"Total Students",-1))])]),f("div",jce,[x[11]||(x[11]=f("div",{class:"stat-icon"},"",-1)),f("div",Hce,[f("h3",null,Q(h.value),1),x[10]||(x[10]=f("p",null,"System Users",-1))])]),f("div",Gce,[x[13]||(x[13]=f("div",{class:"stat-icon"},"",-1)),f("div",Wce,[f("h3",null,Q(p.value),1),x[12]||(x[12]=f("p",null,"Paraeducators",-1))])]),f("div",zce,[x[15]||(x[15]=f("div",{class:"stat-icon"},"",-1)),f("div",Kce,[f("h3",null,Q(m.value),1),x[14]||(x[14]=f("p",null,"Linked Sheets",-1))])])]),f("div",qce,[f("div",Xce,[f("div",Yce,[x[16]||(x[16]=f("h2",null," User & Student Management",-1)),f("button",{onClick:x[0]||(x[0]=E=>y.$emit("goToCategory","users-students")),class:"category-btn"}," Manage  ")]),x[17]||(x[17]=tn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Add Users</h4><p data-v-ecd98979>Create new user accounts with role assignments</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Manage Users</h4><p data-v-ecd98979>Edit existing users, roles, and permissions</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Student Administration</h4><p data-v-ecd98979>Comprehensive student data management</p></div></div></div></div>',1))]),f("div",Jce,[f("div",Qce,[x[18]||(x[18]=f("h2",null," Aide Management",-1)),f("button",{onClick:x[1]||(x[1]=E=>y.$emit("goToCategory","aide-management")),class:"category-btn"}," Manage  ")]),x[19]||(x[19]=tn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Aide Assignment</h4><p data-v-ecd98979>Assign paraeducators to students and periods</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Aide Schedule</h4><p data-v-ecd98979>Manage paraeducator schedules and assignments</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Time Table</h4><p data-v-ecd98979>Configure school periods and time slots</p></div></div></div></div>',1))]),f("div",Zce,[f("div",eue,[x[20]||(x[20]=f("h2",null," Data & Integration",-1)),f("button",{onClick:x[2]||(x[2]=E=>y.$emit("goToCategory","data-integration")),class:"category-btn"}," Manage  ")]),x[21]||(x[21]=tn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>SEIS Import</h4><p data-v-ecd98979>Import student data from SEIS system</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Aeries API &amp; Import</h4><p data-v-ecd98979>Connect to Aeries SIS for data synchronization</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Testing Links</h4><p data-v-ecd98979>Google Sheets integration and export tools</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Teacher Feedback</h4><p data-v-ecd98979>Manage teacher feedback forms and responses</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Backup &amp; Restore</h4><p data-v-ecd98979>System backup and data restoration tools</p></div></div></div></div>',1))]),f("div",tue,[f("div",rue,[x[22]||(x[22]=f("h2",null," System Configuration",-1)),f("button",{onClick:x[3]||(x[3]=E=>y.$emit("goToCategory","system-config")),class:"category-btn"}," Manage  ")]),x[23]||(x[23]=tn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>Permissions</h4><p data-v-ecd98979>Role-based access control and permissions matrix</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979></span><div data-v-ecd98979><h4 data-v-ecd98979>App Settings</h4><p data-v-ecd98979>Configure application settings and preferences</p></div></div></div></div>',1))])]),f("div",nue,[x[31]||(x[31]=f("h2",null," System Status",-1)),f("div",sue,[f("div",aue,[x[26]||(x[26]=f("h3",null," Data Sync Status",-1)),f("div",iue,[f("div",oue,[f("span",{class:Ze(["sync-indicator",{active:g.value}])},null,2),x[24]||(x[24]=f("span",null,"Google Sheets",-1)),Z(a)?(L(),U("span",lue,Q(v(Z(a))),1)):Se("",!0)]),f("div",cue,[f("span",{class:Ze(["sync-indicator",{active:c.value}])},null,2),x[25]||(x[25]=f("span",null,"Aeries SIS",-1)),f("span",uue,Q(u.value),1)])])]),f("div",due,[x[29]||(x[29]=f("h3",null," User Activity",-1)),f("div",fue,[f("div",hue,[x[27]||(x[27]=f("span",null,"Active Users Today",-1)),f("span",pue,Q(o.value),1)]),f("div",mue,[x[28]||(x[28]=f("span",null,"Recent Logins",-1)),f("span",gue,Q(l.value),1)])])]),x[30]||(x[30]=tn('<div class="status-card" data-v-ecd98979><h3 data-v-ecd98979> System Health</h3><div class="health-indicators" data-v-ecd98979><div class="health-item" data-v-ecd98979><span data-v-ecd98979>Database</span><span class="health-status healthy" data-v-ecd98979> Healthy</span></div><div class="health-item" data-v-ecd98979><span data-v-ecd98979>Functions</span><span class="health-status healthy" data-v-ecd98979> Operational</span></div></div></div>',1))])]),f("div",vue,[x[36]||(x[36]=f("h2",null," Quick Actions",-1)),f("div",xue,[f("button",{onClick:x[4]||(x[4]=E=>y.$emit("goToStudents")),class:"admin-action-btn primary",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},x[32]||(x[32]=[f("span",{class:"action-icon"},"",-1),f("span",null,"View Students",-1)])),f("button",{onClick:x[5]||(x[5]=E=>y.$emit("goToCategory","users-students")),class:"admin-action-btn success",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},x[33]||(x[33]=[f("span",{class:"action-icon"},"",-1),f("span",null,"Manage Users",-1)])),f("button",{onClick:x[6]||(x[6]=E=>y.$emit("goToCategory","aide-management")),class:"admin-action-btn warning",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},x[34]||(x[34]=[f("span",{class:"action-icon"},"",-1),f("span",null,"Aide Management",-1)])),f("button",{onClick:x[7]||(x[7]=E=>y.$emit("goToCategory","data-integration")),class:"admin-action-btn info",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},x[35]||(x[35]=[f("span",{class:"action-icon"},"",-1),f("span",null,"Data & Integration",-1)]))])])]))}},Eue=xt(yue,[["__scopeId","data-v-ecd98979"]]);var bue={};class _ue{constructor(){this.encryptionKey="default-dev-key-replace-in-production",this.encryptionEnabled=!0,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled")}setEncryptionEnabled(e){this.encryptionEnabled=e,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled"),e||console.warn(" Warning: Encryption disabled in production environment")}encryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.encryptField(i);this.setNestedValue(n,s,a)}}),n}decryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.decryptField(i);this.setNestedValue(n,s,a)}}),n}encryptField(e){if(!this.encryptionEnabled)return e;try{const r=typeof e=="object"?JSON.stringify(e):String(e);return Vi.AES.encrypt(r,this.encryptionKey).toString()}catch(r){return console.error("Encryption failed:",r),e}}decryptField(e){if(!this.encryptionEnabled)return e;try{const n=Vi.AES.decrypt(e,this.encryptionKey).toString(Vi.enc.Utf8);try{return JSON.parse(n)}catch{return n}}catch(r){return console.error("Decryption failed:",r),e}}getNestedValue(e,r){return r.split(".").reduce((n,s)=>n&&n[s],e)}setNestedValue(e,r,n){const s=r.split("."),i=s.pop(),a=s.reduce((o,l)=>o[l]=o[l]||{},e);return a[i]=n,e}async logAccess(e,r,n){var s,i;try{const a=Qe(wt(Xe,"iepAccessLogs"));await Wt(a,{studentId:e,userId:(s=$t.currentUser)==null?void 0:s.uid,userEmail:(i=$t.currentUser)==null?void 0:i.email,action:r,fields:n,timestamp:Bs(),userAgent:navigator.userAgent,encryptionEnabled:this.encryptionEnabled})}catch(a){console.error("Failed to log access:",a)}}async verifyAccess(e,r="read"){var n,s,i,a,o,l;if(!$t.currentUser)return!1;try{const u=(await Zt(Qe(Xe,"users",$t.currentUser.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager"){const h=((i=(s=(n=(await Zt(Qe(Xe,"students",e))).data())==null?void 0:n.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===$t.currentUser.uid;return await this.logAccess(e,`access_attempt_${r}`,{success:h,role:"case_manager"}),h}if(u.role==="teacher"&&r==="read"){const h=((l=(o=(a=(await Zt(Qe(Xe,"students",e))).data())==null?void 0:a.app)==null?void 0:o.schedule)==null?void 0:l.periods)||{},p=Object.values(h).includes($t.currentUser.uid);return await this.logAccess(e,`access_attempt_${r}`,{success:p,role:"teacher"}),p}return!1}catch(c){return console.error("Access verification failed:",c),!1}}async getAccessHistory(e){try{const r=lr(wt(Xe,"iepAccessLogs"),Vr("studentId","==",e),Vr("timestamp",">=",new Date(Date.now()-2592e6)));return(await jt(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Failed to fetch access history:",r),[]}}maskSensitiveData(e){var n,s,i;const r=JSON.parse(JSON.stringify(e));return(n=r.app)!=null&&n.accommodations&&(r.app.accommodations={assessment:"[RESTRICTED]",instruction:"[RESTRICTED]"}),(i=(s=r.app)==null?void 0:s.schedule)!=null&&i.classServices&&(r.app.schedule.classServices=["[RESTRICTED]"]),r}isEncryptionEnabled(){return this.encryptionEnabled}isValueEncrypted(e){try{return typeof e!="string"?!1:(Vi.AES.decrypt(e,this.encryptionKey).toString(Vi.enc.Utf8),!0)}catch{return!1}}getEncryptionStatus(){return{enabled:this.encryptionEnabled,environment:"production",keyAvailable:!!this.encryptionKey,environmentVariable:bue.VUE_APP_ENABLE_ENCRYPTION}}}const Qf=new _ue,Sue={class:"debug-encryption"},Tue={class:"debug-header"},wue={class:"encryption-status"},Aue={class:"status-row"},Cue={class:"encryption-toggle"},Iue=["checked"],kue={key:0,class:"warning"},Due={class:"status-details"},Pue={class:"status-row"},Fue={class:"status-value"},Rue={class:"status-row"},Oue={class:"status-value"},Nue={class:"status-row"},Mue={class:"status-value"},Lue={key:0,class:"debug-info"},Bue={class:"field-name"},Uue={class:"field-value"},$ue={class:"value-preview"},Vue={__name:"DebugEncryption",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=t,r=_e(()=>Qf.getEncryptionStatus()),n=_e(()=>Qf.isEncryptionEnabled()),s=_e(()=>r.value.environment),i=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],a=()=>{Qf.setEncryptionEnabled(!n.value)},o=(u,d)=>d.split(".").reduce((h,p)=>h&&h[p],u),l=u=>{if(!e.selectedStudent)return!1;const d=o(e.selectedStudent,u);return d?Qf.isValueEncrypted(d):!1},c=u=>{if(!e.selectedStudent)return"No data";const d=o(e.selectedStudent,u);if(!d)return"Empty";if(l(u))return d.substring(0,20)+"...";const h=typeof d=="object"?JSON.stringify(d):String(d);return h.length>40?h.substring(0,40)+"...":h};return(u,d)=>(L(),U("div",Sue,[f("div",Tue,[d[0]||(d[0]=f("h3",null," IEP Encryption Control",-1)),f("div",{class:Ze(["environment-badge",s.value])},Q(s.value.toUpperCase()),3)]),f("div",wue,[f("div",Aue,[d[1]||(d[1]=f("div",{class:"status-label"},"Status:",-1)),f("div",{class:Ze(["status-value",{enabled:n.value}])},Q(n.value?" Enabled":" Disabled"),3)]),f("div",Cue,[f("label",null,[f("input",{type:"checkbox",checked:n.value,onChange:a},null,40,Iue),d[2]||(d[2]=Oe(" Toggle Encryption "))]),s.value==="production"&&!n.value?(L(),U("div",kue,"  Warning: Encryption disabled in production ")):Se("",!0)]),f("div",Due,[f("div",Pue,[d[3]||(d[3]=f("div",{class:"status-label"},"Environment:",-1)),f("div",Fue,Q(s.value),1)]),f("div",Rue,[d[4]||(d[4]=f("div",{class:"status-label"},"Encryption Key:",-1)),f("div",Oue,Q(r.value.keyAvailable?" Available":" Missing"),1)]),f("div",Nue,[d[5]||(d[5]=f("div",{class:"status-label"},"ENV Variable:",-1)),f("div",Mue,Q(r.value.environmentVariable||"Not set"),1)])])]),t.selectedStudent?(L(),U("div",Lue,[d[6]||(d[6]=f("h4",null,"Selected Student Data:",-1)),(L(),U(Fe,null,Ve(i,h=>f("div",{class:"field-status",key:h},[f("div",Bue,Q(h)+":",1),f("div",Uue,[f("div",{class:Ze(["encryption-status",{encrypted:l(h)}])},Q(l(h)?" Encrypted":" Plain Text"),3),f("div",$ue,Q(c(h)),1)])])),64))])):Se("",!0)]))}},Nk=xt(Vue,[["__scopeId","data-v-94726d44"]]),jue={class:"session-debug"},Hue={class:"debug-info"},Gue={class:"info-row"},Wue={class:"info-row"},zue={class:"info-row"},Kue={class:"info-row"},que={key:0,class:"info-row"},Xue={class:"countdown"},Yue={class:"debug-actions"},Jue={class:"timeout-setter"},Que={__name:"SessionTimeoutDebug",setup(t){const{isEnabled:e,timeoutMinutes:r,showWarning:n,warningCountdown:s,updateSettings:i,resetTimeout:a}=bx(),{currentUser:o}=gd(),l=ne(!1),c=ne(30),u=ne(.17);Bt(()=>{l.value=e.value,c.value=r.value});const d=async()=>{!l.value&&!c.value&&(l.value=e.value,c.value=r.value),await i(!0,u.value),setTimeout(()=>{a()},100)},h=async()=>{await i(l.value,c.value),setTimeout(()=>{a()},100)},p=()=>{document.dispatchEvent(new Event("click"))},m=()=>{};return(g,v)=>(L(),U("div",jue,[v[8]||(v[8]=f("h4",null," Session Timeout Debug",-1)),f("div",Hue,[f("div",Gue,[v[1]||(v[1]=f("strong",null,"Timeout Enabled:",-1)),f("span",{class:Ze({"status-active":Z(e),"status-inactive":!Z(e)})},Q(Z(e)?" YES":" NO"),3)]),f("div",Wue,[v[2]||(v[2]=f("strong",null,"Timeout Minutes:",-1)),f("span",null,Q(Z(r))+" minutes",1)]),f("div",zue,[v[3]||(v[3]=f("strong",null,"User Logged In:",-1)),f("span",{class:Ze({"status-active":!!Z(o),"status-inactive":!Z(o)})},Q(Z(o)?" YES":" NO"),3)]),f("div",Kue,[v[4]||(v[4]=f("strong",null,"Warning Showing:",-1)),f("span",{class:Ze({"status-warning":Z(n),"status-inactive":!Z(n)})},Q(Z(n)?" YES":" NO"),3)]),Z(n)?(L(),U("div",que,[v[5]||(v[5]=f("strong",null,"Countdown:",-1)),f("span",Xue,Q(Z(s))+"s",1)])):Se("",!0)]),f("div",Yue,[f("div",Jue,[f("label",null,[v[7]||(v[7]=Oe(" Set Test Timeout: ")),Ae(f("select",{"onUpdate:modelValue":v[0]||(v[0]=y=>u.value=y),class:"timeout-select"},v[6]||(v[6]=[tn('<option value="0.05" data-v-bea6538b>3 seconds</option><option value="0.17" data-v-bea6538b>10 seconds</option><option value="0.5" data-v-bea6538b>30 seconds</option><option value="1" data-v-bea6538b>1 minute</option><option value="2" data-v-bea6538b>2 minutes</option><option value="5" data-v-bea6538b>5 minutes</option>',6)]),512),[[hr,u.value]])]),f("button",{onClick:d,class:"btn btn-warning"}," Apply Test Timeout ")]),f("div",{class:"admin-action-btns"},[f("button",{onClick:p,class:"admin-action-btn",style:{"min-width":"120px","max-width":"120px"}}," Trigger Activity "),f("button",{onClick:m,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Show Console Info "),f("button",{onClick:h,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Reset to Original ")])])]))}},Zue=xt(Que,[["__scopeId","data-v-bea6538b"]]),ede={class:"security-control-center"},tde={class:"security-section"},rde={class:"security-section"},nde={class:"log-filters"},sde={key:0,class:"log-table"},ade={key:1,class:"no-logs"},ide={class:"security-section"},ode={class:"setting-group"},lde={key:0,class:"setting-group"},cde={class:"setting-group"},ude={class:"setting-group"},dde={class:"security-section"},fde={class:"setting-group"},hde={class:"setting-group"},pde={class:"setting-group"},mde={class:"security-section"},gde={class:"ip-list"},vde={class:"ip-input"},xde={key:0,class:"ip-table"},yde=["onClick"],Ede={key:1,class:"no-ips"},bde={class:"security-section"},_de={class:"alert-settings"},Sde={class:"setting-group"},Tde={class:"setting-group"},wde={class:"setting-group"},Ade={class:"alert-emails"},Cde={class:"email-input"},Ide={key:0,class:"email-list"},kde=["onClick"],Dde={__name:"SecurityControlCenter",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=ne([]),r=ne(1),{isEnabled:n,timeoutMinutes:s,updateSettings:i}=bx(),a=ne(!1),o=ne(!1),l=ne(!0),c=ne(!0),u=ne(5),d=ne([]),h=ne(""),p=ne({failedLogins:!0,unusualAccess:!0,bulkExport:!0}),m=ne([]),g=ne(""),v=async()=>{try{const N=new Date;N.setDate(N.getDate()-r.value);try{const O=lr(wt(Xe,"auditLogs"),Vr("timestamp",">=",N),cn("timestamp","desc"),Rs(100)),B=await jt(O);if(e.value=B.docs.map(V=>({id:V.id,...V.data()})),e.value.length>0){console.log(" Loaded",e.value.length,"audit logs");return}}catch{console.log(" No audit logs found, trying legacy iepAccessLogs")}const R=lr(wt(Xe,"iepAccessLogs"),Vr("timestamp",">=",N),cn("timestamp","desc"),Rs(100)),F=await jt(R);e.value=F.docs.map(O=>({id:O.id,...O.data()})),console.log(" Loaded",e.value.length,"legacy access logs")}catch(N){console.error("Failed to fetch logs:",N),e.value=[]}},y=N=>{if(!N)return"";const R=N.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(R)},x=async()=>{try{await i(n.value,s.value)}catch(N){console.error("Failed to toggle session timeout:",N)}},E=async()=>{try{await i(n.value,s.value)}catch(N){console.error("Failed to update session timeout:",N)}},I=()=>{console.log("Password policy updated:",a.value)},P=()=>{console.log("MFA policy updated:",o.value)},w=()=>{console.log("Export policy updated:",l.value)},b=()=>{console.log("PDF policy updated:",c.value)},T=()=>{console.log("Login policy updated:",u.value)},_=()=>{h.value&&!d.value.includes(h.value)&&(d.value.push(h.value),h.value="")},S=N=>{d.value=d.value.filter(R=>R!==N)},k=()=>{console.log("Alert settings updated:",p.value)},A=()=>{g.value&&!m.value.includes(g.value)&&(m.value.push(g.value),g.value="")},D=N=>{m.value=m.value.filter(R=>R!==N)};return Bt(()=>{v()}),(N,R)=>(L(),U("div",ede,[f("div",tde,[R[13]||(R[13]=f("h3",null," IEP Data Encryption",-1)),st(Nk,{"selected-student":t.selectedStudent},null,8,["selected-student"])]),f("div",rde,[R[16]||(R[16]=f("h3",null," Access Logs",-1)),f("div",nde,[Ae(f("select",{"onUpdate:modelValue":R[0]||(R[0]=F=>r.value=F),class:"form-select"},R[14]||(R[14]=[f("option",{value:"1"},"Last 24 hours",-1),f("option",{value:"7"},"Last 7 days",-1),f("option",{value:"30"},"Last 30 days",-1)]),512),[[hr,r.value]]),f("button",{onClick:v,class:"btn btn-secondary"}," Refresh ")]),e.value.length?(L(),U("div",sde,[f("table",null,[R[15]||(R[15]=f("thead",null,[f("tr",null,[f("th",null,"Time"),f("th",null,"User"),f("th",null,"Action"),f("th",null,"Student"),f("th",null,"Status")])],-1)),f("tbody",null,[(L(!0),U(Fe,null,Ve(e.value,F=>(L(),U("tr",{key:F.id},[f("td",null,Q(y(F.timestamp)),1),f("td",null,Q(F.userEmail),1),f("td",null,Q(F.action),1),f("td",null,Q(F.studentId),1),f("td",{class:Ze(F.success?"success":"error")},Q(F.success?"":""),3)]))),128))])])])):(L(),U("div",ade," No access logs found for selected period "))]),f("div",ide,[R[23]||(R[23]=f("h3",null," Session Security",-1)),st(Zue),f("div",ode,[f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":R[1]||(R[1]=F=>_r(n)?n.value=F:null),onChange:x},null,544),[[Et,Z(n)]]),R[17]||(R[17]=Oe(" Enable Auto Logout Timer "))]),R[18]||(R[18]=f("div",{class:"setting-description"}," Automatically log out users after a period of inactivity ",-1))]),Z(n)?(L(),U("div",lde,[f("label",null,[R[19]||(R[19]=Oe(" Auto Logout Timer (minutes): ")),Ae(f("input",{type:"number","onUpdate:modelValue":R[2]||(R[2]=F=>_r(s)?s.value=F:null),min:"5",max:"120",onChange:E},null,544),[[Je,Z(s)]])]),R[20]||(R[20]=f("div",{class:"setting-description"}," Users will be automatically logged out after this period of inactivity ",-1))])):Se("",!0),f("div",cde,[f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":R[3]||(R[3]=F=>a.value=F),onChange:I},null,544),[[Et,a.value]]),R[21]||(R[21]=Oe(" Enforce Password Change Every 90 Days "))])]),f("div",ude,[f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":R[4]||(R[4]=F=>o.value=F),onChange:P},null,544),[[Et,o.value]]),R[22]||(R[22]=Oe(" Require Two-Factor Authentication for Admin Access "))])])]),f("div",dde,[R[27]||(R[27]=f("h3",null," Data Access Controls",-1)),f("div",fde,[f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":R[5]||(R[5]=F=>l.value=F),onChange:w},null,544),[[Et,l.value]]),R[24]||(R[24]=Oe(" Restrict Data Export to Admins Only "))])]),f("div",hde,[f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":R[6]||(R[6]=F=>c.value=F),onChange:b},null,544),[[Et,c.value]]),R[25]||(R[25]=Oe(" Add Watermark to Exported PDFs "))])]),f("div",pde,[f("label",null,[R[26]||(R[26]=Oe(" Maximum Failed Login Attempts: ")),Ae(f("input",{type:"number","onUpdate:modelValue":R[7]||(R[7]=F=>u.value=F),min:"3",max:"10",onChange:T},null,544),[[Je,u.value]])])])]),f("div",mde,[R[28]||(R[28]=f("h3",null," IP Access Control",-1)),f("div",gde,[f("div",vde,[Ae(f("input",{type:"text","onUpdate:modelValue":R[8]||(R[8]=F=>h.value=F),placeholder:"Enter IP address or range"},null,512),[[Je,h.value]]),f("button",{onClick:_,class:"btn btn-primary"}," Add IP ")]),d.value.length?(L(),U("div",xde,[(L(!0),U(Fe,null,Ve(d.value,F=>(L(),U("div",{key:F,class:"ip-row"},[f("span",null,Q(F),1),f("button",{onClick:O=>S(F),class:"btn btn-danger btn-sm"}," Remove ",8,yde)]))),128))])):(L(),U("div",Ede," No IP restrictions configured "))])]),f("div",bde,[R[33]||(R[33]=f("h3",null," Security Alerts",-1)),f("div",_de,[f("div",Sde,[f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":R[9]||(R[9]=F=>p.value.failedLogins=F),onChange:k},null,544),[[Et,p.value.failedLogins]]),R[29]||(R[29]=Oe(" Alert on Multiple Failed Login Attempts "))])]),f("div",Tde,[f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":R[10]||(R[10]=F=>p.value.unusualAccess=F),onChange:k},null,544),[[Et,p.value.unusualAccess]]),R[30]||(R[30]=Oe(" Alert on Unusual Access Patterns "))])]),f("div",wde,[f("label",null,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":R[11]||(R[11]=F=>p.value.bulkExport=F),onChange:k},null,544),[[Et,p.value.bulkExport]]),R[31]||(R[31]=Oe(" Alert on Bulk Data Exports "))])]),f("div",Ade,[R[32]||(R[32]=f("h4",null,"Alert Recipients:",-1)),f("div",Cde,[Ae(f("input",{type:"email","onUpdate:modelValue":R[12]||(R[12]=F=>g.value=F),placeholder:"Enter email address"},null,512),[[Je,g.value]]),f("button",{onClick:A,class:"btn btn-primary"}," Add ")]),m.value.length?(L(),U("div",Ide,[(L(!0),U(Fe,null,Ve(m.value,F=>(L(),U("div",{key:F,class:"email-row"},[f("span",null,Q(F),1),f("button",{onClick:O=>D(F),class:"btn btn-danger btn-sm"}," Remove ",8,kde)]))),128))])):Se("",!0)])])])]))}},Pde=xt(Dde,[["__scopeId","data-v-de4ac33f"]]),Fde={class:"card-header"},Rde={class:"component-info"},Ode={class:"component-name"},Nde={class:"component-description"},Mde={class:"card-body"},Lde={class:"status-details"},Bde={class:"detail-row"},Ude={key:0,class:"detail-row"},$de={key:1,class:"detail-row"},Vde={class:"detail-value"},jde={key:0,class:"errors-section"},Hde={class:"errors-list"},Gde={class:"card-actions"},Wde=["disabled"],zde={key:1,class:"details-section"},Kde={class:"details-content"},qde={class:"detail-item"},Xde={class:"detail-item"},Yde={key:0,class:"detail-item"},Jde={class:"detail-item"},Qde={key:0,class:"loading-overlay"},Zde={__name:"ComponentHealthCard",props:{component:{type:Object,required:!0}},emits:["test","toggle"],setup(t){const e=t,r=ne(!1),n=ne(!1);Ut(()=>e.component.status,(u,d)=>{d==="checking"&&u!=="checking"?n.value=!1:u==="checking"&&(n.value=!0)},{immediate:!0});const s=u=>{switch(u){case"operational":return"";case"degraded":return"";case"down":return"";case"disabled":return"";case"checking":return"";default:return""}},i=u=>{switch(u){case"operational":return"Healthy";case"degraded":return"Issues";case"down":return"Failed";case"disabled":return"Disabled";case"checking":return"Testing...";default:return"Unknown"}},a=u=>u<100?"latency-good":u<500?"latency-ok":"latency-poor",o=u=>u?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(u):"Never",l=u=>u?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(u):"Never",c=u=>u.toLowerCase().replace(/\s+/g,"-");return(u,d)=>(L(),U("div",{class:Ze(["health-card",[t.component.status,{disabled:!t.component.enabled}]])},[f("div",Fde,[f("div",Rde,[f("h4",Ode,Q(t.component.name),1),f("p",Nde,Q(t.component.description),1)]),f("div",{class:Ze(["status-indicator",t.component.status])},Q(s(t.component.status)),3)]),f("div",Mde,[f("div",Lde,[f("div",Bde,[d[3]||(d[3]=f("span",{class:"detail-label"},"Status:",-1)),f("span",{class:Ze(["detail-value",t.component.status])},Q(i(t.component.status)),3)]),t.component.latency!==null?(L(),U("div",Ude,[d[4]||(d[4]=f("span",{class:"detail-label"},"Latency:",-1)),f("span",{class:Ze(["detail-value",a(t.component.latency)])},Q(t.component.latency)+"ms ",3)])):Se("",!0),t.component.lastCheck?(L(),U("div",$de,[d[5]||(d[5]=f("span",{class:"detail-label"},"Last Check:",-1)),f("span",Vde,Q(o(t.component.lastCheck)),1)])):Se("",!0)]),t.component.errors&&t.component.errors.length?(L(),U("div",jde,[d[6]||(d[6]=f("div",{class:"errors-header"}," Issues:",-1)),f("ul",Hde,[(L(!0),U(Fe,null,Ve(t.component.errors,h=>(L(),U("li",{key:h,class:"error-item"},Q(h),1))),128))])])):Se("",!0),f("div",Gde,[f("button",{onClick:d[0]||(d[0]=h=>u.$emit("test",t.component)),disabled:n.value,class:"btn btn-primary btn-sm"},Q(n.value?"":"")+" Test ",9,Wde),f("button",{onClick:d[1]||(d[1]=h=>u.$emit("toggle",t.component)),class:Ze(["btn btn-sm",t.component.enabled?"btn-warning":"btn-success"])},Q(t.component.enabled?" Disable":" Enable"),3),f("button",{onClick:d[2]||(d[2]=h=>r.value=!r.value),class:"btn btn-secondary btn-sm"},Q(r.value?" Less":" More"),1)]),r.value?(L(),U("div",zde,[f("div",Kde,[f("div",qde,[d[7]||(d[7]=f("strong",null,"Test Function:",-1)),Oe(" "+Q(t.component.testFunction||"N/A"),1)]),f("div",Xde,[d[8]||(d[8]=f("strong",null,"Enabled:",-1)),Oe(" "+Q(t.component.enabled?"Yes":"No"),1)]),t.component.lastCheck?(L(),U("div",Yde,[d[9]||(d[9]=f("strong",null,"Last Test:",-1)),Oe(" "+Q(l(t.component.lastCheck)),1)])):Se("",!0),f("div",Jde,[d[10]||(d[10]=f("strong",null,"Component ID:",-1)),Oe(" "+Q(c(t.component.name)),1)])])])):Se("",!0)]),n.value?(L(),U("div",Qde,d[11]||(d[11]=[f("div",{class:"loading-spinner"},"",-1),f("div",{class:"loading-text"},"Testing component...",-1)]))):Se("",!0)],2))}},xS=xt(Zde,[["__scopeId","data-v-18cc0437"]]),efe={class:"health-dashboard"},tfe={class:"dashboard-header"},rfe={class:"header-controls"},nfe=["disabled"],sfe={key:0,class:"last-update"},afe={class:"status-overview"},ife={class:"status-icon"},ofe={class:"status-info"},lfe={class:"status-details"},cfe={class:"component-categories"},ufe={class:"category-section"},dfe={class:"components-grid"},ffe={class:"category-section"},hfe={class:"components-grid"},pfe={class:"quick-actions"},mfe={class:"admin-action-btns"},gfe=["disabled"],vfe={class:"logs-section"},xfe={class:"logs-container"},yfe={class:"log-time"},Efe={class:"log-component"},bfe={class:"log-message"},_fe={key:0,class:"no-logs"},Sfe={class:"modal-header"},Tfe={class:"modal-content"},wfe={__name:"ComponentHealthDashboard",setup(t){const e=ne(!1),r=ne(null),n=ne(!1),s=ne({}),i=ne([]),a=ne(!1),o=ne([{name:"Firebase Auth",status:"operational",description:"User authentication service",lastCheck:new Date,enabled:!0,latency:150,errors:[]},{name:"Firestore Database",status:"operational",description:"Main database service",lastCheck:new Date,enabled:!0,latency:200,errors:[]},{name:"Firebase Storage",status:"operational",description:"File storage service",lastCheck:new Date,enabled:!0,latency:180,errors:[]},{name:"Cloud Functions",status:"operational",description:"Server-side functions",lastCheck:new Date,enabled:!0,latency:300,errors:[]}]),l=ne([{name:"Session Timeout",status:"operational",description:"Automatic user logout system",lastCheck:new Date,enabled:!0,latency:50,errors:[]},{name:"IEP Encryption",status:"operational",description:"Sensitive data encryption",lastCheck:new Date,enabled:!0,latency:80,errors:[]},{name:"Access Control",status:"operational",description:"Role-based permissions",lastCheck:new Date,enabled:!0,latency:120,errors:[]},{name:"Audit Logging",status:"operational",description:"Activity tracking system",lastCheck:new Date,enabled:!0,latency:90,errors:[]}]),c=_e(()=>[...o.value,...l.value]),u=_e(()=>c.value.length),d=_e(()=>c.value.filter(T=>T.status==="operational").length),h=_e(()=>{const T=c.value.map(_=>_.status);return T.every(_=>_==="operational"||_==="disabled")?"operational":T.some(_=>_==="down"||_==="error")?"down":"degraded"}),p=T=>{switch(T){case"operational":return"";case"degraded":return"";case"down":return"";case"disabled":return"";default:return""}},m=T=>{switch(T){case"operational":return"All systems operational";case"degraded":return"Some issues detected";case"down":return"Critical issues found";case"checking":return"Running diagnostics...";default:return"Unknown status"}},g=T=>T?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(T):"",v=(T,_,S="info")=>{i.value.unshift({id:Date.now()+Math.random(),timestamp:new Date,component:T,message:_,type:S}),i.value.length>20&&(i.value=i.value.slice(0,20))},y=async T=>{v(T.name,"Starting component test...","info");try{const _=performance.now();await new Promise(A=>setTimeout(A,Math.random()*1e3+500));const S=Math.round(performance.now()-_),k=c.value.find(A=>A.name===T.name);k&&(k.status=Math.random()>.1?"operational":"degraded",k.latency=S,k.lastCheck=new Date,k.errors=k.status==="degraded"?["Minor performance issue detected"]:[]),v(T.name,`Test completed - ${k.status} (${S}ms)`,k.status==="operational"?"success":"warning"),s.value={component:T.name,data:{status:k.status,latency:`${S}ms`,timestamp:new Date().toISOString(),details:k.status==="operational"?"All checks passed successfully":"Minor performance issues detected"}},n.value=!0}catch(_){v(T.name,`Test failed: ${_.message}`,"error")}},x=T=>{const _=c.value.find(S=>S.name===T.name);_&&(_.enabled=!_.enabled,_.status=_.enabled?"operational":"disabled",v(T.name,`Component ${_.enabled?"enabled":"disabled"}`,"info"))},E=async()=>{if(!e.value){e.value=!0,r.value=new Date,v("System","Starting full system refresh...","info");try{const T=c.value.filter(_=>_.enabled).map(_=>y(_));await Promise.all(T),v("System","Full system refresh completed","success")}catch(T){v("System",`Refresh failed: ${T.message}`,"error")}finally{e.value=!1}}},I=async()=>{a.value=!0,v("System","Starting comprehensive system test...","info");try{await E(),v("System","Comprehensive system test completed","success")}catch(T){v("System",`System test failed: ${T.message}`,"error")}finally{a.value=!1}},P=()=>{const T={timestamp:new Date().toISOString(),overallStatus:h.value,components:c.value.map(A=>({name:A.name,status:A.status,enabled:A.enabled,latency:A.latency,lastCheck:A.lastCheck,errors:A.errors})),logs:i.value.slice(0,10)},_=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),S=URL.createObjectURL(_),k=document.createElement("a");k.href=S,k.download=`health-report-${Date.now()}.json`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(S),v("System","Health report exported","info")},w=()=>{i.value=[]},b=()=>{n.value=!1,s.value={}};return Bt(()=>{v("System","Component Health Dashboard initialized","success")}),(T,_)=>(L(),U("div",efe,[f("div",tfe,[_[1]||(_[1]=f("h2",null," Component Health Dashboard",-1)),f("div",rfe,[f("button",{onClick:E,disabled:e.value,class:"btn btn-primary"},Q(e.value?" Refreshing...":" Refresh All"),9,nfe),r.value?(L(),U("span",sfe," Last update: "+Q(g(r.value)),1)):Se("",!0)])]),f("div",afe,[f("div",{class:Ze(["status-card overall",h.value])},[f("div",ife,Q(p(h.value)),1),f("div",ofe,[_[2]||(_[2]=f("h3",null,"System Status",-1)),f("p",null,Q(m(h.value)),1),f("div",lfe,Q(d.value)+"/"+Q(u.value)+" components healthy ",1)])],2)]),f("div",cfe,[f("div",ufe,[_[3]||(_[3]=f("h3",null," Core Services",-1)),f("div",dfe,[(L(!0),U(Fe,null,Ve(o.value,S=>(L(),Xr(xS,{key:S.name,component:S,onTest:y,onToggle:x},null,8,["component"]))),128))])]),f("div",ffe,[_[4]||(_[4]=f("h3",null," Authentication & Security",-1)),f("div",hfe,[(L(!0),U(Fe,null,Ve(l.value,S=>(L(),Xr(xS,{key:S.name,component:S,onTest:y,onToggle:x},null,8,["component"]))),128))])])]),f("div",pfe,[_[5]||(_[5]=f("h3",null," Quick Tests",-1)),f("div",mfe,[f("button",{onClick:I,disabled:a.value,class:"admin-action-btn",style:{"min-width":"160px","max-width":"160px"}},Q(a.value?" Testing...":" Full System Test"),9,gfe),f("button",{onClick:P,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},"  Export Report ")])]),f("div",vfe,[f("div",{class:"logs-header"},[_[6]||(_[6]=f("h3",null," Component Activity Logs",-1)),f("div",{class:"log-controls"},[f("button",{onClick:w,class:"btn btn-sm btn-secondary"},"Clear")])]),f("div",xfe,[(L(!0),U(Fe,null,Ve(i.value,S=>(L(),U("div",{key:S.id,class:Ze(["log-entry",S.type])},[f("span",yfe,Q(g(S.timestamp)),1),f("span",Efe,Q(S.component),1),f("span",bfe,Q(S.message),1)],2))),128)),i.value.length===0?(L(),U("div",_fe,' No activity logs yet. Click "Refresh All" to start monitoring. ')):Se("",!0)])]),n.value?(L(),U("div",{key:0,class:"test-modal-overlay",onClick:b},[f("div",{class:"test-modal",onClick:_[0]||(_[0]=hn(()=>{},["stop"]))},[f("div",Sfe,[f("h3",null,Q(s.value.component)+" Test Results",1),f("button",{onClick:b,class:"btn btn-sm btn-secondary"},"")]),f("div",Tfe,[f("pre",null,Q(JSON.stringify(s.value.data,null,2)),1)])])])):Se("",!0)]))}},Afe=xt(wfe,[["__scopeId","data-v-106cd980"]]),Cfe={class:"admin-permissions-matrix"},Ife={class:"matrix-container"},kfe={class:"permissions-table"},Dfe={class:"page-info"},Pfe={class:"page-name"},Ffe={class:"page-category"},Rfe={class:"page-description"},Ofe={class:"permission-cell"},Nfe={class:"permission-toggle"},Mfe=["onUpdate:modelValue","onChange"],Lfe={class:"permission-cell"},Bfe={class:"permission-toggle"},Ufe=["onUpdate:modelValue","onChange"],$fe={class:"permission-cell"},Vfe={class:"permission-toggle"},jfe=["onUpdate:modelValue","onChange"],Hfe={class:"matrix-actions"},Gfe={class:"bulk-actions"},Wfe={class:"bulk-buttons"},zfe={key:0,class:"save-status"},Kfe={__name:"AdminPermissionsMatrix",setup(t){const e=ne(null),r=ne([{key:"dashboard",label:"Dashboard",category:"Dashboard",description:"Main admin overview and statistics"},{key:"usersAdd",label:"Add Users",category:"User Management",description:"Create new user accounts"},{key:"usersEdit",label:"Manage Users",category:"User Management",description:"Edit existing user accounts"},{key:"students",label:"Students",category:"Student Management",description:"View and manage student records"},{key:"addStudents",label:"Add Students",category:"Student Management",description:"Bulk import student data"},{key:"aide-assignment",label:"Aide Assignment",category:"Aide Management",description:"Assign aides to students"},{key:"aide-schedule",label:"Aide Schedule",category:"Aide Management",description:"Manage aide schedules"},{key:"time-table",label:"Time Table",category:"Aide Management",description:"Configure school time periods"},{key:"seis",label:"SEIS Import",category:"Data Integration",description:"Import SEIS student data"},{key:"aeries",label:"Aeries API & Import",category:"Data Integration",description:"Connect to Aeries SIS"},{key:"testing-links",label:"Testing Links",category:"Data Integration",description:"Google Sheets integration for testing"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"Data Integration",description:"Manage teacher feedback system"},{key:"backup-restore",label:"Backup & Restore",category:"Data Integration",description:"Database backup and restore"},{key:"permissions",label:"Permissions",category:"System Config",description:"User role and permission management"},{key:"settings",label:"App Settings",category:"System Config",description:"Global application settings"},{key:"iep-security",label:"IEP Security",category:"System Config",description:"IEP data encryption and security"},{key:"security",label:"Security Controls",category:"System Config",description:"Security monitoring and controls"},{key:"component-health",label:"Component Debug",category:"System Monitoring",description:"Component health and debugging"}]),n=gs({}),s={administrator:{dashboard:!0,usersAdd:!0,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!0,aeries:!0,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!0,permissions:!1,settings:!0,"iep-security":!1,security:!1,"component-health":!0},administrator_504_CM:{dashboard:!0,usersAdd:!1,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!1,"aide-schedule":!1,"time-table":!1,seis:!0,aeries:!0,"testing-links":!1,"teacher-feedback":!0,"backup-restore":!1,permissions:!1,settings:!1,"iep-security":!1,security:!1,"component-health":!1},sped_chair:{dashboard:!0,usersAdd:!1,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!0,aeries:!0,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!0,permissions:!1,settings:!0,"iep-security":!0,security:!0,"component-health":!0}},i=()=>{r.value.forEach(p=>{n[p.key]={administrator:s.administrator[p.key]||!1,administrator_504_CM:s.administrator_504_CM[p.key]||!1,sped_chair:s.sped_chair[p.key]||!1}})},a=async()=>{try{const p=Qe(Xe,"app_settings","admin_panel_permissions"),m=await Zt(p);if(m.exists()){const g=m.data();r.value.forEach(v=>{g[v.key]&&(n[v.key]={administrator:g[v.key].administrator??s.administrator[v.key],administrator_504_CM:g[v.key].administrator_504_CM??s.administrator_504_CM[v.key],sped_chair:g[v.key].sped_chair??s.sped_chair[v.key]})}),h("Permissions loaded successfully","success")}else i(),h("Using default permissions","info")}catch(p){console.error("Error loading permissions:",p),h("Error loading permissions","error"),i()}},o=async()=>{try{const p=Qe(Xe,"app_settings","admin_panel_permissions");await Wt(p,n),h("Permissions saved successfully","success")}catch(p){console.error("Error saving permissions:",p),h("Error saving permissions","error")}},l=async(p,m,g)=>{n[p][m]=g,await o()},c=async p=>{r.value.forEach(m=>{n[m.key][p]=!0}),await o(),h(`All permissions granted to ${p}`,"success")},u=async()=>{r.value.forEach(p=>{n[p.key].administrator=!1,n[p.key].administrator_504_CM=!1,n[p.key].sped_chair=!1}),await o(),h("All permissions revoked","warning")},d=async()=>{i(),await o(),h("Permissions reset to defaults","info")},h=(p,m)=>{e.value={message:p,type:m},setTimeout(()=>{e.value=null},3e3)};return Bt(()=>{i(),a()}),(p,m)=>(L(),U("div",Cfe,[m[8]||(m[8]=f("div",{class:"matrix-header"},[f("h2",null," Admin Panel Permissions Matrix"),f("p",{class:"matrix-description"}," Control which admin panel pages different admin roles can access. Changes are saved automatically. ")],-1)),f("div",Ife,[f("table",kfe,[m[6]||(m[6]=f("thead",null,[f("tr",null,[f("th",{class:"page-column"},"Admin Panel Page"),f("th",{class:"role-column"},"Administrator"),f("th",{class:"role-column"},"Administrator 504/CM"),f("th",{class:"role-column"},"SPED Chair")])],-1)),f("tbody",null,[(L(!0),U(Fe,null,Ve(r.value,g=>(L(),U("tr",{key:g.key,class:"permission-row"},[f("td",Dfe,[f("div",Pfe,Q(g.label),1),f("div",Ffe,Q(g.category),1),f("div",Rfe,Q(g.description),1)]),f("td",Ofe,[f("label",Nfe,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":v=>n[g.key].administrator=v,onChange:v=>l(g.key,"administrator",v.target.checked)},null,40,Mfe),[[Et,n[g.key].administrator]]),m[3]||(m[3]=f("span",{class:"toggle-slider"},null,-1))])]),f("td",Lfe,[f("label",Bfe,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":v=>n[g.key].administrator_504_CM=v,onChange:v=>l(g.key,"administrator_504_CM",v.target.checked)},null,40,Ufe),[[Et,n[g.key].administrator_504_CM]]),m[4]||(m[4]=f("span",{class:"toggle-slider"},null,-1))])]),f("td",$fe,[f("label",Vfe,[Ae(f("input",{type:"checkbox","onUpdate:modelValue":v=>n[g.key].sped_chair=v,onChange:v=>l(g.key,"sped_chair",v.target.checked)},null,40,jfe),[[Et,n[g.key].sped_chair]]),m[5]||(m[5]=f("span",{class:"toggle-slider"},null,-1))])])]))),128))])])]),f("div",Hfe,[f("div",Gfe,[m[7]||(m[7]=f("h3",null,"Bulk Actions",-1)),f("div",Wfe,[f("button",{onClick:m[0]||(m[0]=g=>c("administrator")),class:"btn btn-success"}," Grant All to Administrator "),f("button",{onClick:m[1]||(m[1]=g=>c("administrator_504_CM")),class:"btn btn-success"}," Grant All to Administrator 504/CM "),f("button",{onClick:m[2]||(m[2]=g=>c("sped_chair")),class:"btn btn-success"}," Grant All to SPED Chair "),f("button",{onClick:u,class:"btn btn-warning"}," Revoke All Permissions "),f("button",{onClick:d,class:"btn btn-secondary"}," Reset to Defaults ")])])]),e.value?(L(),U("div",zfe,[f("div",{class:Ze(["status-message",e.value.type])},Q(e.value.message),3)])):Se("",!0)]))}},qfe=xt(Kfe,[["__scopeId","data-v-3c083134"]]),Xfe={class:"theme-manager"},Yfe={key:0,class:"loading-state"},Jfe={key:1,class:"error-state"},Qfe={class:"error-message"},Zfe={key:2,class:"theme-editor"},e0e={class:"theme-actions"},t0e=["disabled"],r0e=["disabled"],n0e=["disabled"],s0e={class:"theme-sections"},a0e={class:"theme-section"},i0e={class:"color-grid"},o0e={class:"color-group"},l0e={class:"color-inputs"},c0e={class:"color-input"},u0e={class:"color-picker-wrapper"},d0e={class:"color-input"},f0e={class:"color-picker-wrapper"},h0e={class:"color-input"},p0e={class:"color-picker-wrapper"},m0e={class:"color-input"},g0e={class:"color-picker-wrapper"},v0e={class:"color-group"},x0e={class:"color-inputs"},y0e={class:"color-input"},E0e={class:"color-picker-wrapper"},b0e={class:"color-input"},_0e={class:"color-picker-wrapper"},S0e={class:"color-group"},T0e={class:"color-inputs"},w0e={class:"color-input"},A0e={class:"color-picker-wrapper"},C0e={class:"color-input"},I0e={class:"color-picker-wrapper"},k0e={class:"color-input"},D0e={class:"color-picker-wrapper"},P0e={class:"color-input"},F0e={class:"color-picker-wrapper"},R0e={class:"theme-section"},O0e={class:"color-grid"},N0e={class:"color-input"},M0e={class:"color-picker-wrapper"},L0e={class:"color-input"},B0e={class:"color-picker-wrapper"},U0e={class:"color-input"},$0e={class:"color-picker-wrapper"},V0e={class:"color-input"},j0e={class:"color-picker-wrapper"},H0e={class:"theme-section"},G0e={class:"color-grid"},W0e={class:"color-input"},z0e={class:"color-picker-wrapper"},K0e={class:"color-input"},q0e={class:"color-picker-wrapper"},X0e={class:"color-input"},Y0e={class:"color-picker-wrapper"},J0e={class:"color-input"},Q0e={class:"color-picker-wrapper"},Z0e={class:"theme-section"},ehe={class:"input-grid"},the={class:"input-group"},rhe={class:"input-group"},nhe={class:"input-group"},she={class:"input-group"},ahe={class:"theme-section"},ihe={class:"input-grid"},ohe={class:"input-group"},lhe={class:"input-group"},che={__name:"ThemeManager",setup(t){const{currentTheme:e,loading:r,error:n,loadTheme:s,saveTheme:i,resetTheme:a,updateThemeProperty:o,DEFAULT_THEME:l}=I4(),c=gs({...l}),u=ne(!1),d=ne(""),h=ne(!1),p=ne(null);Ut(e,P=>{Object.assign(c,P)},{deep:!0});const m=(P,w=!1)=>{d.value=P,h.value=w,setTimeout(()=>{d.value="",h.value=!1},5e3)},g=async()=>{u.value=!0;try{await i(c),m("Theme saved successfully!")}catch(P){m("Error saving theme: "+P.message,!0)}finally{u.value=!1}},v=async()=>{if(confirm("Are you sure you want to reset the theme to defaults? This cannot be undone."))try{await a(),m("Theme reset to defaults")}catch(P){m("Error resetting theme: "+P.message,!0)}},y=()=>{Object.assign(c,e.value),m("Changes reverted")},x=()=>{const P=JSON.stringify(c,null,2),w=new Blob([P],{type:"application/json"}),b=URL.createObjectURL(w),T=document.createElement("a");T.href=b,T.download=`theme-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(b),m("Theme exported successfully")},E=()=>{p.value.click()},I=P=>{const w=P.target.files[0];if(!w)return;const b=new FileReader;b.onload=T=>{try{const _=JSON.parse(T.target.result);if(!Object.keys(l).every(k=>_.hasOwnProperty(k))){m("Invalid theme file format",!0);return}Object.assign(c,_),m("Theme imported successfully")}catch(_){m("Error importing theme: "+_.message,!0)}},b.readAsText(w),P.target.value=""};return Bt(async()=>{try{await s()}catch(P){console.error("Error loading theme:",P)}}),(P,w)=>(L(),U("div",Xfe,[w[120]||(w[120]=f("div",{class:"theme-header"},[f("h2",null," Theme Customization"),f("p",{class:"theme-description"}," Customize the visual appearance of the application. Changes are applied in real-time and saved to the database. ")],-1)),Z(r)?(L(),U("div",Yfe,w[85]||(w[85]=[f("div",{class:"spinner"},null,-1),f("p",null,"Loading theme settings...",-1)]))):Z(n)?(L(),U("div",Jfe,[f("p",Qfe,Q(Z(n)),1),f("button",{onClick:w[0]||(w[0]=(...b)=>Z(s)&&Z(s)(...b)),class:"btn btn-primary"},"Retry")])):(L(),U("div",Zfe,[f("div",e0e,[f("button",{onClick:g,disabled:u.value,class:"btn btn-primary"},Q(u.value?" Saving...":" Save Theme"),9,t0e),f("button",{onClick:v,disabled:u.value,class:"btn btn-warning"},"  Reset to Defaults ",8,r0e),f("button",{onClick:y,disabled:u.value,class:"btn btn-secondary"},"  Revert Changes ",8,n0e),f("button",{onClick:x,class:"btn btn-info"},"  Export Theme "),f("button",{onClick:E,class:"btn btn-info"},"  Import Theme ")]),d.value?(L(),U("div",{key:0,class:Ze(["status-message",{error:h.value,success:!h.value}])},Q(d.value),3)):Se("",!0),f("div",s0e,[f("section",a0e,[w[99]||(w[99]=f("h3",null," Color Palette",-1)),f("div",i0e,[f("div",o0e,[w[90]||(w[90]=f("h4",null,"Primary Colors",-1)),f("div",l0e,[f("div",c0e,[w[86]||(w[86]=f("label",null,"Primary Color",-1)),f("div",u0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[1]||(w[1]=b=>c.primaryColor=b),onInput:w[2]||(w[2]=b=>Z(o)("primaryColor",b.target.value)),class:"color-picker"},null,544),[[Je,c.primaryColor]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[3]||(w[3]=b=>c.primaryColor=b),onInput:w[4]||(w[4]=b=>Z(o)("primaryColor",b.target.value)),class:"color-text",placeholder:"#1976d2"},null,544),[[Je,c.primaryColor]])])]),f("div",d0e,[w[87]||(w[87]=f("label",null,"Primary Hover",-1)),f("div",f0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[5]||(w[5]=b=>c.primaryHover=b),onInput:w[6]||(w[6]=b=>Z(o)("primaryHover",b.target.value)),class:"color-picker"},null,544),[[Je,c.primaryHover]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[7]||(w[7]=b=>c.primaryHover=b),onInput:w[8]||(w[8]=b=>Z(o)("primaryHover",b.target.value)),class:"color-text",placeholder:"#1565c0"},null,544),[[Je,c.primaryHover]])])]),f("div",h0e,[w[88]||(w[88]=f("label",null,"Primary Light",-1)),f("div",p0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[9]||(w[9]=b=>c.primaryLight=b),onInput:w[10]||(w[10]=b=>Z(o)("primaryLight",b.target.value)),class:"color-picker"},null,544),[[Je,c.primaryLight]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[11]||(w[11]=b=>c.primaryLight=b),onInput:w[12]||(w[12]=b=>Z(o)("primaryLight",b.target.value)),class:"color-text",placeholder:"#e3f2fd"},null,544),[[Je,c.primaryLight]])])]),f("div",m0e,[w[89]||(w[89]=f("label",null,"Primary Dark",-1)),f("div",g0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[13]||(w[13]=b=>c.primaryDark=b),onInput:w[14]||(w[14]=b=>Z(o)("primaryDark",b.target.value)),class:"color-picker"},null,544),[[Je,c.primaryDark]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[15]||(w[15]=b=>c.primaryDark=b),onInput:w[16]||(w[16]=b=>Z(o)("primaryDark",b.target.value)),class:"color-text",placeholder:"#0d47a1"},null,544),[[Je,c.primaryDark]])])])])]),f("div",v0e,[w[93]||(w[93]=f("h4",null,"Secondary Colors",-1)),f("div",x0e,[f("div",y0e,[w[91]||(w[91]=f("label",null,"Secondary Color",-1)),f("div",E0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[17]||(w[17]=b=>c.secondaryColor=b),onInput:w[18]||(w[18]=b=>Z(o)("secondaryColor",b.target.value)),class:"color-picker"},null,544),[[Je,c.secondaryColor]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[19]||(w[19]=b=>c.secondaryColor=b),onInput:w[20]||(w[20]=b=>Z(o)("secondaryColor",b.target.value)),class:"color-text",placeholder:"#6c757d"},null,544),[[Je,c.secondaryColor]])])]),f("div",b0e,[w[92]||(w[92]=f("label",null,"Secondary Hover",-1)),f("div",_0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[21]||(w[21]=b=>c.secondaryHover=b),onInput:w[22]||(w[22]=b=>Z(o)("secondaryHover",b.target.value)),class:"color-picker"},null,544),[[Je,c.secondaryHover]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[23]||(w[23]=b=>c.secondaryHover=b),onInput:w[24]||(w[24]=b=>Z(o)("secondaryHover",b.target.value)),class:"color-text",placeholder:"#545b62"},null,544),[[Je,c.secondaryHover]])])])])]),f("div",S0e,[w[98]||(w[98]=f("h4",null,"Status Colors",-1)),f("div",T0e,[f("div",w0e,[w[94]||(w[94]=f("label",null,"Success",-1)),f("div",A0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[25]||(w[25]=b=>c.successColor=b),onInput:w[26]||(w[26]=b=>Z(o)("successColor",b.target.value)),class:"color-picker"},null,544),[[Je,c.successColor]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[27]||(w[27]=b=>c.successColor=b),onInput:w[28]||(w[28]=b=>Z(o)("successColor",b.target.value)),class:"color-text",placeholder:"#28a745"},null,544),[[Je,c.successColor]])])]),f("div",C0e,[w[95]||(w[95]=f("label",null,"Warning",-1)),f("div",I0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[29]||(w[29]=b=>c.warningColor=b),onInput:w[30]||(w[30]=b=>Z(o)("warningColor",b.target.value)),class:"color-picker"},null,544),[[Je,c.warningColor]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[31]||(w[31]=b=>c.warningColor=b),onInput:w[32]||(w[32]=b=>Z(o)("warningColor",b.target.value)),class:"color-text",placeholder:"#ffc107"},null,544),[[Je,c.warningColor]])])]),f("div",k0e,[w[96]||(w[96]=f("label",null,"Error",-1)),f("div",D0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[33]||(w[33]=b=>c.errorColor=b),onInput:w[34]||(w[34]=b=>Z(o)("errorColor",b.target.value)),class:"color-picker"},null,544),[[Je,c.errorColor]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[35]||(w[35]=b=>c.errorColor=b),onInput:w[36]||(w[36]=b=>Z(o)("errorColor",b.target.value)),class:"color-text",placeholder:"#dc3545"},null,544),[[Je,c.errorColor]])])]),f("div",P0e,[w[97]||(w[97]=f("label",null,"Info",-1)),f("div",F0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[37]||(w[37]=b=>c.infoColor=b),onInput:w[38]||(w[38]=b=>Z(o)("infoColor",b.target.value)),class:"color-picker"},null,544),[[Je,c.infoColor]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[39]||(w[39]=b=>c.infoColor=b),onInput:w[40]||(w[40]=b=>Z(o)("infoColor",b.target.value)),class:"color-text",placeholder:"#17a2b8"},null,544),[[Je,c.infoColor]])])])])])])]),f("section",R0e,[w[104]||(w[104]=f("h3",null," Background Colors",-1)),f("div",O0e,[f("div",N0e,[w[100]||(w[100]=f("label",null,"Primary Background",-1)),f("div",M0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[41]||(w[41]=b=>c.bgPrimary=b),onInput:w[42]||(w[42]=b=>Z(o)("bgPrimary",b.target.value)),class:"color-picker"},null,544),[[Je,c.bgPrimary]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[43]||(w[43]=b=>c.bgPrimary=b),onInput:w[44]||(w[44]=b=>Z(o)("bgPrimary",b.target.value)),class:"color-text",placeholder:"#f4f6f9"},null,544),[[Je,c.bgPrimary]])])]),f("div",L0e,[w[101]||(w[101]=f("label",null,"Secondary Background",-1)),f("div",B0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[45]||(w[45]=b=>c.bgSecondary=b),onInput:w[46]||(w[46]=b=>Z(o)("bgSecondary",b.target.value)),class:"color-picker"},null,544),[[Je,c.bgSecondary]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[47]||(w[47]=b=>c.bgSecondary=b),onInput:w[48]||(w[48]=b=>Z(o)("bgSecondary",b.target.value)),class:"color-text",placeholder:"#ffffff"},null,544),[[Je,c.bgSecondary]])])]),f("div",U0e,[w[102]||(w[102]=f("label",null,"Tertiary Background",-1)),f("div",$0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[49]||(w[49]=b=>c.bgTertiary=b),onInput:w[50]||(w[50]=b=>Z(o)("bgTertiary",b.target.value)),class:"color-picker"},null,544),[[Je,c.bgTertiary]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[51]||(w[51]=b=>c.bgTertiary=b),onInput:w[52]||(w[52]=b=>Z(o)("bgTertiary",b.target.value)),class:"color-text",placeholder:"#f8f9fa"},null,544),[[Je,c.bgTertiary]])])]),f("div",V0e,[w[103]||(w[103]=f("label",null,"Muted Background",-1)),f("div",j0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[53]||(w[53]=b=>c.bgMuted=b),onInput:w[54]||(w[54]=b=>Z(o)("bgMuted",b.target.value)),class:"color-picker"},null,544),[[Je,c.bgMuted]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[55]||(w[55]=b=>c.bgMuted=b),onInput:w[56]||(w[56]=b=>Z(o)("bgMuted",b.target.value)),class:"color-text",placeholder:"#e9ecef"},null,544),[[Je,c.bgMuted]])])])])]),f("section",H0e,[w[109]||(w[109]=f("h3",null," Text Colors",-1)),f("div",G0e,[f("div",W0e,[w[105]||(w[105]=f("label",null,"Primary Text",-1)),f("div",z0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[57]||(w[57]=b=>c.textPrimary=b),onInput:w[58]||(w[58]=b=>Z(o)("textPrimary",b.target.value)),class:"color-picker"},null,544),[[Je,c.textPrimary]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[59]||(w[59]=b=>c.textPrimary=b),onInput:w[60]||(w[60]=b=>Z(o)("textPrimary",b.target.value)),class:"color-text",placeholder:"#333333"},null,544),[[Je,c.textPrimary]])])]),f("div",K0e,[w[106]||(w[106]=f("label",null,"Secondary Text",-1)),f("div",q0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[61]||(w[61]=b=>c.textSecondary=b),onInput:w[62]||(w[62]=b=>Z(o)("textSecondary",b.target.value)),class:"color-picker"},null,544),[[Je,c.textSecondary]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[63]||(w[63]=b=>c.textSecondary=b),onInput:w[64]||(w[64]=b=>Z(o)("textSecondary",b.target.value)),class:"color-text",placeholder:"#666666"},null,544),[[Je,c.textSecondary]])])]),f("div",X0e,[w[107]||(w[107]=f("label",null,"Muted Text",-1)),f("div",Y0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[65]||(w[65]=b=>c.textMuted=b),onInput:w[66]||(w[66]=b=>Z(o)("textMuted",b.target.value)),class:"color-picker"},null,544),[[Je,c.textMuted]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[67]||(w[67]=b=>c.textMuted=b),onInput:w[68]||(w[68]=b=>Z(o)("textMuted",b.target.value)),class:"color-text",placeholder:"#999999"},null,544),[[Je,c.textMuted]])])]),f("div",J0e,[w[108]||(w[108]=f("label",null,"Inverse Text",-1)),f("div",Q0e,[Ae(f("input",{type:"color","onUpdate:modelValue":w[69]||(w[69]=b=>c.textInverse=b),onInput:w[70]||(w[70]=b=>Z(o)("textInverse",b.target.value)),class:"color-picker"},null,544),[[Je,c.textInverse]]),Ae(f("input",{type:"text","onUpdate:modelValue":w[71]||(w[71]=b=>c.textInverse=b),onInput:w[72]||(w[72]=b=>Z(o)("textInverse",b.target.value)),class:"color-text",placeholder:"#ffffff"},null,544),[[Je,c.textInverse]])])])])]),f("section",Z0e,[w[114]||(w[114]=f("h3",null," Border Radius",-1)),f("div",ehe,[f("div",the,[w[110]||(w[110]=f("label",null,"Small Border Radius",-1)),Ae(f("input",{type:"text","onUpdate:modelValue":w[73]||(w[73]=b=>c.borderRadiusSm=b),onInput:w[74]||(w[74]=b=>Z(o)("borderRadiusSm",b.target.value)),placeholder:"4px"},null,544),[[Je,c.borderRadiusSm]])]),f("div",rhe,[w[111]||(w[111]=f("label",null,"Medium Border Radius",-1)),Ae(f("input",{type:"text","onUpdate:modelValue":w[75]||(w[75]=b=>c.borderRadiusMd=b),onInput:w[76]||(w[76]=b=>Z(o)("borderRadiusMd",b.target.value)),placeholder:"6px"},null,544),[[Je,c.borderRadiusMd]])]),f("div",nhe,[w[112]||(w[112]=f("label",null,"Large Border Radius",-1)),Ae(f("input",{type:"text","onUpdate:modelValue":w[77]||(w[77]=b=>c.borderRadiusLg=b),onInput:w[78]||(w[78]=b=>Z(o)("borderRadiusLg",b.target.value)),placeholder:"8px"},null,544),[[Je,c.borderRadiusLg]])]),f("div",she,[w[113]||(w[113]=f("label",null,"Extra Large Border Radius",-1)),Ae(f("input",{type:"text","onUpdate:modelValue":w[79]||(w[79]=b=>c.borderRadiusXl=b),onInput:w[80]||(w[80]=b=>Z(o)("borderRadiusXl",b.target.value)),placeholder:"12px"},null,544),[[Je,c.borderRadiusXl]])])])]),f("section",ahe,[w[118]||(w[118]=f("h3",null," Typography",-1)),f("div",ihe,[f("div",ohe,[w[116]||(w[116]=f("label",null,"Font Family",-1)),Ae(f("select",{"onUpdate:modelValue":w[81]||(w[81]=b=>c.fontFamilyBase=b),onChange:w[82]||(w[82]=b=>Z(o)("fontFamilyBase",b.target.value))},w[115]||(w[115]=[tn('<option value="&#39;Inter&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Inter (Default)</option><option value="&#39;Roboto&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Roboto</option><option value="&#39;Open Sans&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Open Sans</option><option value="&#39;Lato&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Lato</option><option value="&#39;Poppins&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Poppins</option><option value="&#39;Montserrat&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Montserrat</option><option value="&#39;Source Sans Pro&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Source Sans Pro</option><option value="&#39;Ubuntu&#39;, &#39;Segoe UI&#39;, &#39;Arial&#39;, sans-serif" data-v-626c9c7f>Ubuntu</option>',8)]),544),[[hr,c.fontFamilyBase]])]),f("div",lhe,[w[117]||(w[117]=f("label",null,"Base Font Size",-1)),Ae(f("input",{type:"text","onUpdate:modelValue":w[83]||(w[83]=b=>c.fontSizeBase=b),onInput:w[84]||(w[84]=b=>Z(o)("fontSizeBase",b.target.value)),placeholder:"1rem"},null,544),[[Je,c.fontSizeBase]])])])]),w[119]||(w[119]=tn('<section class="theme-section" data-v-626c9c7f><h3 data-v-626c9c7f> Live Preview</h3><div class="preview-container" data-v-626c9c7f><div class="preview-card" data-v-626c9c7f><h4 data-v-626c9c7f>Sample Card</h4><p data-v-626c9c7f>This is a sample card to preview your theme changes in real-time.</p><div class="preview-buttons" data-v-626c9c7f><button class="btn btn-primary" data-v-626c9c7f>Primary Button</button><button class="btn btn-secondary" data-v-626c9c7f>Secondary Button</button><button class="btn btn-success" data-v-626c9c7f>Success Button</button><button class="btn btn-warning" data-v-626c9c7f>Warning Button</button><button class="btn btn-error" data-v-626c9c7f>Error Button</button></div></div></div></section>',1))])])),f("input",{ref_key:"fileInput",ref:p,type:"file",accept:".json",style:{display:"none"},onChange:I},null,544)]))}},uhe=xt(che,[["__scopeId","data-v-626c9c7f"]]),dhe={name:"AdminView",components:{TabBar:aH,UserAddForm:mH,UserTable:BH,PermissionsMatrix:XH,AdminStudents:mG,StudentBulkImporter:xW,AdminPermissions:YW,SeisImport:fz,AeriesImport:_z,AeriesAPIConnector:PK,AppSettings:wq,AdminAideAssignment:$4,AdminTimeTable:bk,AdminAideSchedule:Rk,AdminBackupRestore:Ok,AdminTeacherFeedback:Mle,TestingLinks:Lce,AdminDashboard:Eue,DebugEncryption:Nk,SecurityControlCenter:Pde,ComponentHealthDashboard:Afe,AdminPermissionsMatrix:qfe,ThemeManager:uhe},setup(){const t=bi(),e=kL(),r=ne("dashboard"),n=ne("dashboard"),{students:s,fetchStudents:i}=Oa(),{users:a,fetchUsers:o}=Na(),{currentUser:l}=gd();Bt(async()=>{try{await Promise.all([i(),o()]);const I=e.query.category;I&&p(I)}catch(I){console.error("Error loading data:",I)}});const c=[{key:"dashboard",label:"Dashboard",category:"dashboard"},{key:"usersAdd",label:"Add Users",category:"users-students"},{key:"usersEdit",label:"Manage Users",category:"users-students"},{key:"students",label:"Students",category:"users-students"},{key:"addStudents",label:"Add Students",category:"users-students"},{key:"aide-assignment",label:"Aide Assignment",category:"aide-management"},{key:"aide-schedule",label:"Aide Schedule",category:"aide-management",status:"not-working"},{key:"time-table",label:"Time Table",category:"aide-management"},{key:"seis",label:"SEIS Import",category:"data-integration",status:"not-active"},{key:"aeries",label:"Aeries API & Import",category:"data-integration",status:"not-active"},{key:"testing-links",label:"Testing Links",category:"data-integration"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"data-integration"},{key:"backup-restore",label:"Backup & Restore",category:"data-integration"},{key:"permissions",label:"Permissions",category:"system-config"},{key:"settings",label:"App Settings",category:"system-config"},{key:"theme",label:"Theme Customization",category:"system-config"},{key:"iep-security",label:"IEP Security",category:"system-config"},{key:"security",label:"Security Controls",category:"system-config"},{key:"component-health",label:"Component Debug",category:"monitoring"}],u=[{key:"admin-permissions",label:"Admin Panel Permissions",category:"system-config"}],d=_e(()=>{var P;return((P=l.value)==null?void 0:P.role)==="admin"?[...c,...u]:c}),h=I=>d.value.filter(P=>P.category===I),p=I=>{n.value=I;const P=h(I);P.length>0&&(r.value=P[0].key)};return{activeTab:r,activeCategory:n,tabs:d,students:s,userMap:a,getTabsForCategory:h,setActiveCategory:p,handleTabChange:I=>{r.value=I},goToStudents:()=>{t.push("/students")},goToDashboard:()=>{t.push("/admin/dashboard")},handleGoToCategory:I=>{p(I)},handleBulkImporterClose:()=>{r.value="students"},handleStudentsImported:async I=>{console.log("Students imported:",I);try{await i()}catch(P){console.error("Failed to refresh students after import:",P)}}}}},fhe={class:"admin-header"},hhe={class:"admin-nav"},phe={class:"admin-actions"},mhe={key:0,class:"sub-tab-container"},ghe={class:"admin-section"},vhe={key:0,class:"admin-section"},xhe={key:1,class:"admin-section"},yhe={key:2,class:"admin-section"},Ehe={key:3,class:"admin-section"},bhe={key:4,class:"admin-section"},_he={key:5,class:"admin-section"},She={key:6,class:"admin-section"},The={key:7,class:"admin-section"},whe={key:8,class:"admin-section"},Ahe={key:9,class:"admin-section"},Che={key:10,class:"admin-section"},Ihe={key:11,class:"admin-section"},khe={key:12,class:"admin-section"},Dhe={key:13,class:"admin-section"},Phe={key:14,class:"admin-section"},Fhe={key:15,class:"admin-section"},Rhe={key:16,class:"admin-section"},Ohe={key:17,class:"admin-section"},Nhe={key:18,class:"admin-section"},Mhe={key:19,class:"admin-section"};function Lhe(t,e,r,n,s,i){const a=Tr("TabBar"),o=Tr("AdminDashboard"),l=Tr("UserAddForm"),c=Tr("UserTable"),u=Tr("AdminStudents"),d=Tr("StudentBulkImporter"),h=Tr("AdminPermissions"),p=Tr("AdminAideAssignment"),m=Tr("AdminAideSchedule"),g=Tr("AdminTimeTable"),v=Tr("SeisImport"),y=Tr("AeriesAPIConnector"),x=Tr("AeriesImport"),E=Tr("AppSettings"),I=Tr("ThemeManager"),P=Tr("TestingLinks"),w=Tr("AdminTeacherFeedback"),b=Tr("AdminBackupRestore"),T=Tr("DebugEncryption"),_=Tr("SecurityControlCenter"),S=Tr("ComponentHealthDashboard"),k=Tr("AdminPermissionsMatrix");return L(),U("div",null,[f("div",fhe,[e[8]||(e[8]=f("h1",null,"Admin Panel",-1)),f("div",hhe,[f("button",{onClick:e[0]||(e[0]=A=>n.setActiveCategory("dashboard")),class:Ze([{active:n.activeCategory==="dashboard"},"category-btn"])}," Dashboard ",2),f("button",{onClick:e[1]||(e[1]=A=>n.setActiveCategory("users-students")),class:Ze([{active:n.activeCategory==="users-students"},"category-btn"])}," User & Student Management ",2),f("button",{onClick:e[2]||(e[2]=A=>n.setActiveCategory("aide-management")),class:Ze([{active:n.activeCategory==="aide-management"},"category-btn"])}," Aide Management ",2),f("button",{onClick:e[3]||(e[3]=A=>n.setActiveCategory("data-integration")),class:Ze([{active:n.activeCategory==="data-integration"},"category-btn"])}," Data & Integration ",2),f("button",{onClick:e[4]||(e[4]=A=>n.setActiveCategory("system-config")),class:Ze([{active:n.activeCategory==="system-config"},"category-btn"])}," System Configuration ",2),f("button",{onClick:e[5]||(e[5]=A=>n.setActiveCategory("monitoring")),class:Ze([{active:n.activeCategory==="monitoring"},"category-btn"])}," System Monitoring ",2)]),f("div",phe,[f("button",{onClick:e[6]||(e[6]=(...A)=>n.goToStudents&&n.goToStudents(...A)),class:"return-btn"},e[7]||(e[7]=[f("span",null,"",-1),Oe(" Return to Students ")]))])]),n.activeCategory?(L(),U("div",mhe,[st(a,{tabs:n.getTabsForCategory(n.activeCategory),"active-tab":n.activeTab,onTabChange:n.handleTabChange},null,8,["tabs","active-tab","onTabChange"])])):Se("",!0),f("div",ghe,[n.activeTab==="dashboard"?(L(),U("div",vhe,[st(o,{onGoToCategory:n.handleGoToCategory,onGoToStudents:n.goToStudents},null,8,["onGoToCategory","onGoToStudents"])])):Se("",!0),n.activeTab==="usersAdd"?(L(),U("div",xhe,[st(l)])):Se("",!0),n.activeTab==="usersEdit"?(L(),U("div",yhe,[st(c)])):Se("",!0),n.activeTab==="students"?(L(),U("div",Ehe,[st(u)])):Se("",!0),n.activeTab==="addStudents"?(L(),U("div",bhe,[st(d,{onClose:n.handleBulkImporterClose,onImported:n.handleStudentsImported},null,8,["onClose","onImported"])])):Se("",!0),n.activeTab==="permissions"?(L(),U("div",_he,[st(h)])):Se("",!0),n.activeTab==="aide-assignment"?(L(),U("div",She,[st(p)])):Se("",!0),n.activeTab==="aide-schedule"?(L(),U("div",The,[st(m)])):Se("",!0),n.activeTab==="time-table"?(L(),U("div",whe,[st(g)])):Se("",!0),n.activeTab==="seis"?(L(),U("div",Ahe,[st(v)])):Se("",!0),n.activeTab==="aeries"?(L(),U("div",Che,[st(y),e[9]||(e[9]=f("hr",{style:{margin:"2rem 0",border:"1px solid #ddd"}},null,-1)),st(x)])):Se("",!0),n.activeTab==="settings"?(L(),U("div",Ihe,[st(E)])):Se("",!0),n.activeTab==="theme"?(L(),U("div",khe,[st(I)])):Se("",!0),n.activeTab==="testing-links"?(L(),U("div",Dhe,[st(P,{students:n.students,userMap:n.userMap},null,8,["students","userMap"])])):Se("",!0),n.activeTab==="teacher-feedback"?(L(),U("div",Phe,[st(w)])):Se("",!0),n.activeTab==="backup-restore"?(L(),U("div",Fhe,[st(b)])):Se("",!0),n.activeTab==="iep-security"?(L(),U("div",Rhe,[e[10]||(e[10]=f("h2",null,"IEP Data Security",-1)),st(T,{"selected-student":t.currentStudent},null,8,["selected-student"])])):Se("",!0),n.activeTab==="security"?(L(),U("div",Ohe,[st(_,{"selected-student":t.currentStudent},null,8,["selected-student"])])):Se("",!0),n.activeTab==="component-health"?(L(),U("div",Nhe,[st(S)])):Se("",!0),n.activeTab==="admin-permissions"?(L(),U("div",Mhe,[st(k)])):Se("",!0)])])}const Bhe=xt(dhe,[["render",Lhe],["__scopeId","data-v-434f1fd6"]]),Uhe={class:"aide-schedule-view"},$he={class:"header"},Vhe={class:"user-info"},jhe={class:"content"},Hhe={key:0,class:"error-message"},Ghe={key:1,class:"error-message"},Whe={key:2,class:"loading"},zhe={key:3,class:"schedule-container"},Khe={class:"schedule-display"},qhe={class:"schedule-timeline"},Xhe={class:"time-info"},Yhe={class:"time"},Jhe={class:"type-badge"},Qhe={class:"assignment-info"},Zhe={key:0},epe={key:1,class:"no-assignment"},tpe={class:"schedule-editor"},rpe={class:"editor-content"},npe={class:"time-block-header"},spe={class:"time"},ape={class:"type-badge"},ipe={class:"assignment-editor"},ope=["onUpdate:modelValue"],lpe=["value"],cpe=["value"],upe={class:"editor-actions"},dpe=["disabled"],fpe={key:0},hpe={key:1},ppe={__name:"AideScheduleView",setup(t){const e=bi(),r=pa(),{userList:n,fetchUsers:s}=Na(),{students:i,fetchStudents:a}=Oa(),{loadAppSettings:o,saveAppSettings:l}=Hs(),c=ne(!0),u=ne(!1),d=ne({}),h=ne({}),p=_e(()=>{var w;return((w=r.currentUser)==null?void 0:w.role)==="paraeducator"}),m=_e(()=>{var w;return(w=r.currentUser)==null?void 0:w.uid}),g=_e(()=>{var w;return((w=n.value)==null?void 0:w.filter(b=>b.role==="teacher"))||[]});async function v(){var w;try{const b=await Zt(Qe(Xe,"app_settings","global"));if(b.exists()){const T=b.data();d.value=((w=T.timeTables)==null?void 0:w[0])||T.timeTable||{}}}catch(b){console.error("Error loading time table:",b)}}function y(){return d.value.schedule?d.value.schedule.map((w,b)=>({...w,id:w.id||`block-${b}`,assignments:h.value[w.id||`block-${b}`]||{}})):[]}function x(){return y().map(b=>{const T=b.assignments[m.value];let _="";if(T){if(T.startsWith("teacher:")){const S=T.replace("teacher:",""),k=g.value.find(A=>A.id===S);_=k?k.name||k.email:"Unknown Teacher"}else if(T.startsWith("student:")){const S=T.replace("student:",""),k=i.value.find(A=>A.id===S);_=k?`${ut(k,"firstName")} ${ut(k,"lastName")}`:"Unknown Student"}}return{...b,assignment:_}})}async function E(){try{u.value=!0;const w=await o(),b={...w.detailedAideSchedule};y().forEach(_=>{b[_.id]||(b[_.id]={}),b[_.id][m.value]=_.assignments[m.value]});const T={...w,detailedAideSchedule:b};await l(T),console.log("My schedule saved successfully")}catch(w){console.error("Error saving my schedule:",w)}finally{u.value=!1}}function I(){r.logout(),e.push("/login")}async function P(){try{c.value=!0,await Promise.all([s(),a(),o(),v()]);const w=await Zt(Qe(Xe,"app_settings","global"));if(w.exists()){const b=w.data();h.value=b.detailedAideSchedule||{}}c.value=!1}catch(w){console.error("Error loading aide schedule data:",w),c.value=!1}}return Bt(P),(w,b)=>{var T,_;return L(),U("div",Uhe,[f("div",$he,[b[2]||(b[2]=f("h1",null,"My Schedule",-1)),f("div",Vhe,[f("span",null,Q(((T=Z(r).currentUser)==null?void 0:T.name)||((_=Z(r).currentUser)==null?void 0:_.email)),1),f("button",{onClick:I,class:"btn btn-secondary"}," Logout ")])]),f("div",jhe,[Z(r).currentUser?p.value?c.value?(L(),U("div",Whe," Loading your schedule... ")):(L(),U("div",zhe,[f("div",Khe,[b[7]||(b[7]=f("h2",null,"My Daily Schedule",-1)),f("div",qhe,[(L(!0),U(Fe,null,Ve(x(),S=>(L(),U("div",{key:S.id,class:Ze(["time-block",S.type])},[f("div",Xhe,[f("span",Yhe,Q(S.startTime)+" - "+Q(S.endTime),1),f("span",Jhe,Q(S.type),1)]),f("div",Qhe,[S.assignment?(L(),U("span",Zhe,Q(S.assignment),1)):(L(),U("span",epe,"No Assignment"))])],2))),128))])]),f("div",tpe,[b[9]||(b[9]=f("h2",null,"Edit My Schedule",-1)),f("div",rpe,[(L(!0),U(Fe,null,Ve(y(),S=>(L(),U("div",{key:S.id,class:"time-block-editor"},[f("div",npe,[f("span",spe,Q(S.startTime)+" - "+Q(S.endTime),1),f("span",ape,Q(S.type),1)]),f("div",ipe,[Ae(f("select",{"onUpdate:modelValue":k=>S.assignments[m.value]=k,class:"assignment-select"},[b[8]||(b[8]=f("option",{value:""},"No Assignment",-1)),(L(!0),U(Fe,null,Ve(g.value,k=>(L(),U("option",{key:k.id,value:`teacher:${k.id}`},Q(k.name||k.email),9,lpe))),128)),(L(!0),U(Fe,null,Ve(Z(i),k=>(L(),U("option",{key:k.id,value:`student:${k.id}`},Q(Z(ut)(k,"firstName"))+" "+Q(Z(ut)(k,"lastName")),9,cpe))),128))],8,ope),[[hr,S.assignments[m.value]]])])]))),128))]),f("div",upe,[f("button",{onClick:E,class:"btn btn-primary",disabled:u.value},[u.value?(L(),U("span",fpe,"")):(L(),U("span",hpe,"")),Oe(" "+Q(u.value?"Saving...":"Save My Schedule"),1)],8,dpe)])])])):(L(),U("div",Ghe,[b[5]||(b[5]=f("h2",null,"Access Denied",-1)),b[6]||(b[6]=f("p",null,"This page is only available to paraeducators.",-1)),f("button",{onClick:b[1]||(b[1]=S=>Z(e).push("/")),class:"btn btn-primary"},"Go Home")])):(L(),U("div",Hhe,[b[3]||(b[3]=f("h2",null,"Authentication Required",-1)),b[4]||(b[4]=f("p",null,"Please log in to access this page.",-1)),f("button",{onClick:b[0]||(b[0]=S=>Z(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])])}}},mpe=xt(ppe,[["__scopeId","data-v-f2c7a0cd"]]),gpe={class:"secure-pdf-test"},vpe={class:"test-section"},xpe={class:"status-grid"},ype={class:"status-item"},Epe={class:"status-value"},bpe={class:"status-item"},_pe={class:"status-value"},Spe={class:"status-item"},Tpe={class:"status-value"},wpe={class:"status-item"},Ape={class:"status-value"},Cpe={class:"test-section"},Ipe=["disabled"],kpe=["disabled"],Dpe={class:"test-section"},Ppe=["disabled"],Fpe={key:0,class:"error-message"},Rpe={key:1,class:"success-message"},Ope={key:0,class:"test-section"},Npe=["disabled"],Mpe={key:0,class:"error-message"},Lpe={key:1,class:"success-message"},Bpe={class:"test-section"},Upe=["disabled"],$pe={key:0,class:"error-message"},Vpe={key:1,class:"success-message"},jpe={class:"test-section"},Hpe=["disabled"],Gpe={key:0,class:"error-message"},Wpe={key:1,class:"success-message"},zpe={__name:"SecurePdfTest",setup(t){const e=ne(null),r=ne("test-student-123"),n=ne(null),s=ne(!1),i=ne(!1),a=ne(!1),o=ne(null),l=ne(null),c=ne(!1),u=ne(null),d=ne(null),h=ne("Checking..."),p=ne("Checking..."),m=ne("Checking..."),g=ne("Checking..."),v=ne(null),y=ne(null),x=ne(null),E=ne(null),{uploadPdf:I,downloadPdf:P,isUploading:w,isDownloading:b}=Cx();_e(()=>{var F,O,B;return((F=$t.currentUser)==null?void 0:F.role)||((B=(O=$t.currentUser)==null?void 0:O.claims)==null?void 0:B.role)||"unknown"});const T=F=>{const O=F.target.files[0];if(O){if(O.type!=="application/pdf"){alert("Please select a PDF file"),F.target.value="";return}e.value=O,y.value=null,v.value=null,o.value=null,l.value=null}},_=async()=>{var F,O;if(!r.value){alert("Please enter a student ID");return}try{s.value=!0;const B=$t.currentUser;if(B){const H=await B.getIdTokenResult();console.log(" User token result:",H),console.log(" User role from token:",H.claims.role)}const V=Qe(Xe,"students",r.value);(await Zt(V)).exists()?alert(" Test student already exists"):(await Wt(V,{app:{studentData:{firstName:"Test",lastName:"Student",grade:"7",plan:"IEP",caseManagerId:((F=$t.currentUser)==null?void 0:F.uid)||"test-case-manager"},staffIds:[((O=$t.currentUser)==null?void 0:O.uid)||"test-user"],schedule:{periods:{},classServices:[]},providers:{},accommodations:{instruction:"",assessment:""},flags:{flag1:!1,flag2:!1}},createdAt:Bs()}),alert(" Test student created successfully!"))}catch(B){alert(` Error creating test student: ${B.message}`),console.error("Error creating test student:",B),B.message.includes("permissions")&&alert(" Admin permissions required. Try using an existing student ID instead.")}finally{s.value=!1}},S=async()=>{var F,O,B,V;try{i.value=!0;const z=wt(Xe,"students"),H=lr(z,Rs(5)),j=await jt(H);if(j.empty)alert(" No students found in database");else{const W=j.docs.map(re=>({id:re.id,...re.data()}));console.log(" Available students:",W);const K=W[0];r.value=K.id,alert(` Found student: ${((O=(F=K.app)==null?void 0:F.studentData)==null?void 0:O.firstName)||"Unknown"} ${((V=(B=K.app)==null?void 0:B.studentData)==null?void 0:V.lastName)||"Student"} (ID: ${K.id})`)}}catch(z){alert(` Error finding student: ${z.message}`),console.error("Error finding student:",z)}finally{i.value=!1}},k=async()=>{if(!e.value||!r.value){alert("Please select a file and enter a student ID");return}try{y.value=null,v.value=null;const F=await I(e.value,r.value);v.value=F,console.log(" Test PDF uploaded successfully:",F)}catch(F){y.value=F.message,console.error(" Test PDF upload failed:",F)}},A=async()=>{if(!v.value||!r.value){alert("Please upload a PDF first");return}try{x.value=null,E.value=null,await P(v.value,r.value,"test-document.pdf"),E.value=!0,console.log(" Test PDF downloaded successfully")}catch(F){x.value=F.message,console.error(" Test PDF download failed:",F)}},D=async()=>{if(!e.value){alert("Please select a file first");return}try{a.value=!0,o.value=null,l.value=null;const F=th(xc,`public/test-${Date.now()}.pdf`);await a4(F,e.value),l.value=!0,console.log(" Direct upload successful")}catch(F){o.value=F.message,console.error(" Direct upload failed:",F)}finally{a.value=!1}},N=async()=>{if(!r.value){alert("Please enter a student ID first");return}try{c.value=!0,u.value=null,d.value=null;const{getFunctions:F,httpsCallable:O}=await ra(async()=>{const{getFunctions:W,httpsCallable:K}=await Promise.resolve().then(()=>d0);return{getFunctions:W,httpsCallable:K}},void 0),B=F(),V=O(B,"getStudentFileUrl"),z="test-document.pdf";console.log(` Testing cloud function with studentId: ${r.value}, fileName: ${z}`);const H=await V({studentId:r.value,fileName:z});console.log(" Cloud function result:",H.data),d.value=!0;const j=H.data.url;j&&!j.includes("token=")?console.log(" URL is private (no download token)"):console.warn(" URL may not be private")}catch(F){u.value=F.message,console.error(" Cloud function test failed:",F)}finally{c.value=!1}},R=async()=>{try{const F=p0.encryptionKey;h.value=F&&F!=="your-dev-key-here"?" Configured":" Using default key";try{const O=th(xc,"public/test-access");await o4(O),p.value=" Accessible"}catch(O){O.code==="storage/unauthorized"?p.value=" Limited access (expected)":p.value=" Access denied"}try{const O=Qe(Xe,"test","test");await Zt(O),m.value=" Accessible"}catch{m.value=" Access denied"}try{const O=$t.currentUser;if(O){const B=await O.getIdTokenResult();g.value=B.claims.role||"unknown",console.log(" User role detected:",g.value)}else g.value="not authenticated"}catch(O){g.value="error reading role",console.error("Error reading user role:",O)}}catch(F){console.error("Error checking system status:",F)}};return Bt(()=>{R()}),(F,O)=>(L(),U("div",gpe,[O[16]||(O[16]=f("h2",null," Secure PDF System Test",-1)),f("div",vpe,[O[5]||(O[5]=f("h3",null,"System Status",-1)),f("div",xpe,[f("div",ype,[O[1]||(O[1]=f("span",{class:"status-label"},"Encryption Key:",-1)),f("span",Epe,Q(h.value),1)]),f("div",bpe,[O[2]||(O[2]=f("span",{class:"status-label"},"Storage Access:",-1)),f("span",_pe,Q(p.value),1)]),f("div",Spe,[O[3]||(O[3]=f("span",{class:"status-label"},"Firestore Access:",-1)),f("span",Tpe,Q(m.value),1)]),f("div",wpe,[O[4]||(O[4]=f("span",{class:"status-label"},"User Role:",-1)),f("span",Ape,Q(g.value),1)])])]),f("div",Cpe,[O[6]||(O[6]=f("h3",null,"Test Student ID",-1)),Ae(f("input",{"onUpdate:modelValue":O[0]||(O[0]=B=>r.value=B),placeholder:"Enter test student ID",class:"student-id-input"},null,512),[[Je,r.value]]),O[7]||(O[7]=f("p",{class:"help-text"},"Enter a student ID to test with. You can:",-1)),O[8]||(O[8]=f("ul",{class:"help-text"},[f("li",null,"Use an existing student ID from your database"),f("li",null,"Create a new test student (requires admin permissions)"),f("li",null,'Use "test-student-123" for testing')],-1)),f("button",{onClick:_,disabled:s.value,class:"btn btn-secondary"},Q(s.value?"Creating...":"Create Test Student"),9,Ipe),f("button",{onClick:S,disabled:i.value,class:"btn btn-secondary"},Q(i.value?"Finding...":"Find Existing Student"),9,kpe)]),f("div",Dpe,[O[9]||(O[9]=f("h3",null,"Upload Test PDF",-1)),f("input",{type:"file",accept:"application/pdf",onChange:T,ref_key:"fileInput",ref:n},null,544),f("button",{onClick:k,disabled:!e.value||Z(w)},Q(Z(w)?" Uploading...":" Upload PDF"),9,Ppe),y.value?(L(),U("div",Fpe,Q(y.value),1)):Se("",!0),v.value?(L(),U("div",Rpe,"  PDF uploaded successfully! Secure filename: "+Q(v.value),1)):Se("",!0)]),v.value?(L(),U("div",Ope,[O[10]||(O[10]=f("h3",null,"Download Test PDF",-1)),f("button",{onClick:A,disabled:Z(b)},Q(Z(b)?" Downloading...":" Download PDF"),9,Npe),x.value?(L(),U("div",Mpe,Q(x.value),1)):Se("",!0),E.value?(L(),U("div",Lpe,"  PDF downloaded successfully! ")):Se("",!0)])):Se("",!0),f("div",Bpe,[O[11]||(O[11]=f("h3",null,"Alternative Test: Direct Storage Upload",-1)),O[12]||(O[12]=f("p",{class:"help-text"},"This test bypasses the secure PDF system and uploads directly to storage for comparison.",-1)),f("button",{onClick:D,disabled:!e.value||a.value},Q(a.value?" Uploading...":" Test Direct Upload"),9,Upe),o.value?(L(),U("div",$pe,Q(o.value),1)):Se("",!0),l.value?(L(),U("div",Vpe,"  Direct upload successful! This confirms storage permissions are working. ")):Se("",!0)]),f("div",jpe,[O[14]||(O[14]=f("h3",null,"Test Cloud Function: Private URL Generation",-1)),O[15]||(O[15]=f("p",{class:"help-text"},"Test if the cloud function can generate private URLs for existing files.",-1)),f("button",{onClick:N,disabled:c.value},Q(c.value?" Testing...":" Test Cloud Function"),9,Hpe),u.value?(L(),U("div",Gpe,Q(u.value),1)):Se("",!0),d.value?(L(),U("div",Wpe,O[13]||(O[13]=[Oe("  Cloud function working! Private URL generated successfully. "),f("br",null,null,-1),f("small",null,"URL expires in 5 minutes",-1)]))):Se("",!0)])]))}},Kpe=xt(zpe,[["__scopeId","data-v-4c041459"]]);async function qpe(){var t;console.log("Starting student ID migration...");try{const e=wt(Xe,"students"),r=await jt(e);console.log(`Found ${r.size} students to migrate`);let n=0,s=0;for(const i of r.docs){const a=i.data(),o=i.id;if(!/^\d+$/.test(o)){console.log(`Student ${o} already uses auto-generated ID, skipping`);continue}const l=o;try{const c=Qe(wt(Xe,"students")),u={...a,app:{...a.app,studentData:{...(t=a.app)==null?void 0:t.studentData,ssid:l}},migratedFrom:o,migratedAt:new Date().toISOString()};await Wt(c,u),await io(Qe(Xe,"students",o)),console.log(` Migrated student ${o}  ${c.id}`),n++}catch(c){console.error(` Failed to migrate student ${o}:`,c),s++}}return console.log(`Migration complete: ${n} migrated, ${s} errors`),{migratedCount:n,errorCount:s}}catch(e){throw console.error("Migration failed:",e),e}}async function Xpe(){var t,e;console.log("Verifying migration...");try{const r=wt(Xe,"students"),n=await jt(r);let s=0,i=0;for(const a of n.docs){const o=a.data(),l=a.id,c=(e=(t=o.app)==null?void 0:t.studentData)==null?void 0:e.ssid;c?(console.log(` Student ${l} has SSID: ${c}`),s++):(console.warn(` Student ${l} missing SSID in app data`),i++)}return console.log(`Verification complete: ${s} verified, ${i} issues`),{verifiedCount:s,issuesCount:i}}catch(r){throw console.error("Verification failed:",r),r}}async function Ype(){var s,i,a,o;console.log(" Starting period label migration...");const{getNumber:t}=fo();let e=0,r=0,n=[];try{const l=wt(Xe,"students"),c=await jt(l);e=c.size,console.log(` Found ${e} students to check`);for(const u of c.docs)try{const d=u.data();let h=!1,p={};const m=((i=(s=d.app)==null?void 0:s.schedule)==null?void 0:i.periods)||d.schedule||{};if(Object.entries(m).forEach(([g,v])=>{if(isNaN(parseInt(g))){const y=t(g);if(y)p[y]=v,h=!0,console.log(` Converting "${g}"  ${y} for student ${u.id}`);else{const x=g.match(/^(?:period|per)(\d+)$/i);x?(p[parseInt(x[1])]=v,h=!0,console.log(` Converting "${g}"  ${x[1]} for student ${u.id}`)):(console.warn(` Could not convert period key "${g}" for student ${u.id}`),p[g]=v)}}else p[g]=v}),h){const g={};(o=(a=d.app)==null?void 0:a.schedule)!=null&&o.periods?g["app.schedule.periods"]=p:d.schedule&&(g.schedule=p),Object.keys(g).length>0&&(await Xd(Qe(Xe,"students",u.id),g),r++,console.log(` Updated student ${u.id}`))}}catch(d){console.error(` Error processing student ${u.id}:`,d),n.push({studentId:u.id,error:d.message})}return console.log(" Migration completed!"),console.log(" Results:"),console.log(`   - Total students checked: ${e}`),console.log(`   - Students migrated: ${r}`),console.log(`   - Errors: ${n.length}`),n.length>0&&(console.warn(" Errors encountered:"),n.forEach(({studentId:u,error:d})=>{console.warn(`   - ${u}: ${d}`)})),{success:!0,totalStudents:e,migratedStudents:r,errors:n}}catch(l){return console.error(" Migration failed:",l),{success:!1,error:l.message,totalStudents:e,migratedStudents:r,errors:n}}}async function Jpe(){var n,s;console.log(" Starting migration preview...");const{getNumber:t}=fo();let e=0,r=[];try{const i=wt(Xe,"students"),a=await jt(i);e=a.size;for(const o of a.docs){const l=o.data(),c=((s=(n=l.app)==null?void 0:n.schedule)==null?void 0:s.periods)||l.schedule||{};let u=[];Object.keys(c).forEach(d=>{if(isNaN(parseInt(d))){const h=t(d);if(h)u.push({from:d,to:h});else{const p=d.match(/^(?:period|per)(\d+)$/i);p&&u.push({from:d,to:parseInt(p[1])})}}}),u.length>0&&r.push({id:o.id,name:`${l.firstName||""} ${l.lastName||""}`.trim(),changes:u})}return console.log(" Migration Preview Results:"),console.log(`   - Total students: ${e}`),console.log(`   - Students needing migration: ${r.length}`),r.length>0&&(console.log("   - Changes needed:"),r.forEach(o=>{console.log(`      ${o.name} (${o.id}):`),o.changes.forEach(l=>{console.log(`        "${l.from}"  ${l.to}`)})})),{totalStudents:e,studentsNeedingMigration:r,changesNeeded:r.length>0}}catch(i){return console.error(" Preview failed:",i),{error:i.message,totalStudents:0,studentsNeedingMigration:[],changesNeeded:!1}}}const Qpe={class:"testing-view"},Zpe={class:"test-section"},eme={class:"status-grid"},tme={class:"status-item"},rme={class:"status-item"},nme={class:"status-item"},sme={key:0,class:"test-section"},ame={class:"settings-display"},ime={class:"setting-group"},ome={class:"setting-values"},lme={class:"setting-group"},cme={class:"setting-values"},ume={class:"setting-group"},dme={class:"setting-values"},fme={class:"setting-group"},hme={class:"setting-values"},pme={class:"test-section"},mme={class:"admin-action-btns"},gme=["disabled"],vme=["disabled"],xme={class:"test-section"},yme={class:"integration-test"},Eme={key:0,class:"test-form-container"},bme={class:"test-section"},_me={class:"admin-action-btns"},Sme=["disabled"],Tme=["disabled"],wme={key:0,class:"migration-result"},Ame={class:"test-section"},Cme={class:"period-migration-controls"},Ime=["disabled"],kme=["disabled"],Dme={key:0,class:"migration-result"},Pme={class:"test-section"},Fme={class:"ssid-test-controls"},Rme=["disabled"],Ome={key:0,class:"ssid-test-result"},Nme={class:"test-section"},Mme={__name:"TestingView",setup(t){const{appSettings:e,loadAppSettings:r,resetAppSettings:n,loading:s,error:i}=Hs(),{labels:a}=fo(),o=ne(!1),l=ne(!1),c=ne(!1),u=ne(null),d=ne(!1),h=ne(null),p=ne(!1),m=ne(null);Bt(async()=>{console.log("TestingView: Component mounted, checking app settings...")});const g=async()=>{try{await r(),console.log("TestingView: Settings reloaded successfully")}catch(T){console.error("TestingView: Error reloading settings:",T)}},v=async()=>{try{await n(),console.log("TestingView: Settings reset successfully")}catch(T){console.error("TestingView: Error resetting settings:",T)}},y=T=>{console.log("TestingView: Test student saved:",T),o.value=!1},x=async()=>{l.value=!0,u.value=null;try{const T=await qpe();u.value=T,console.log("Migration completed:",T)}catch(T){u.value={error:T.message},console.error("Migration failed:",T)}finally{l.value=!1}},E=async()=>{c.value=!0,u.value=null;try{const T=await Xpe();u.value=T,console.log("Verification completed:",T)}catch(T){u.value={error:T.message},console.error("Verification failed:",T)}finally{c.value=!1}},I=async()=>{d.value=!0,h.value=null;try{const T=[{sourcedId:"123456789",givenName:"John",familyName:"Doe",specialEducation:"true"},{SSID:"987654321",FirstName:"Jane",LastName:"Smith",IEP:"Yes"},{ssid:"555666777",FirstName:"Bob",LastName:"Johnson",iep:"1"},{StateStudentID:"111222333",FirstName:"Alice",LastName:"Brown",504:"true"}],_={aeriesMapping:{},seisMapping:{},ssidExtraction:{},fieldMapping:{}};T.forEach((k,A)=>{const D={};Object.keys(k).forEach(N=>{D[N]=vv(N)}),_.aeriesMapping[`row_${A}`]=D}),T.forEach((k,A)=>{const D={};Object.keys(k).forEach(N=>{D[N]=xv(N)}),_.seisMapping[`row_${A}`]=D}),T.forEach((k,A)=>{var N;const D=(N=k.sourcedId||k.SSID||k.ssid||k.StateStudentID||k.stateStudentId)==null?void 0:N.trim();_.ssidExtraction[`row_${A}`]={original:k,extractedSSID:D,success:!!D}});const S=["specialEducation","iep","IEP","plan504","504","disabilities","accommodations"];_.fieldMapping={aeries:S.map(k=>({field:k,mapped:vv(k)})),seis:S.map(k=>({field:k,mapped:xv(k)}))},h.value={success:!0,message:"SSID resolution test completed successfully",results:_},console.log("SSID resolution test completed:",_)}catch(T){h.value={success:!1,error:T.message,message:"SSID resolution test failed"},console.error("SSID resolution test failed:",T)}finally{d.value=!1}},P=()=>{h.value=null},w=async()=>{p.value=!0,m.value=null;try{console.log("Starting period label migration preview...");const T=await Jpe();T.error?m.value=`Preview failed: ${T.error}`:T.changesNeeded?m.value=`Preview completed: ${T.studentsNeedingMigration.length} students need migration (see console for details)`:m.value="No migration needed - all students already use numeric period keys"}catch(T){console.error("Period migration preview failed:",T),m.value=`Preview error: ${T.message}`}finally{p.value=!1}},b=async()=>{if(confirm("This will update period keys from labels to numbers for all students. Continue?")){p.value=!0,m.value=null;try{console.log("Starting period label migration...");const T=await Ype();T.success?(m.value=`Migration completed: ${T.migratedStudents}/${T.totalStudents} students updated`,T.errors.length>0&&(m.value+=` (${T.errors.length} errors - see console)`)):m.value=`Migration failed: ${T.error}`}catch(T){console.error("Period migration failed:",T),m.value=`Migration error: ${T.message}`}finally{p.value=!1}}};return(T,_)=>{var S,k,A,D,N,R;return L(),U("div",Qpe,[_[21]||(_[21]=f("h2",null,"App Settings Testing",-1)),f("div",Zpe,[_[5]||(_[5]=f("h3",null,"App Settings Status",-1)),f("div",eme,[f("div",tme,[_[2]||(_[2]=f("strong",null,"Loading:",-1)),Oe(" "+Q(Z(s)?"Yes":"No"),1)]),f("div",rme,[_[3]||(_[3]=f("strong",null,"Error:",-1)),Oe(" "+Q(Z(i)||"None"),1)]),f("div",nme,[_[4]||(_[4]=f("strong",null,"Loaded:",-1)),Oe(" "+Q(Z(e)&&Object.keys(Z(e)).length>0?"Yes":"No"),1)])])]),Z(e)?(L(),U("div",sme,[_[10]||(_[10]=f("h3",null,"Current Settings",-1)),f("div",ame,[f("div",ime,[f("h4",null,"Grades ("+Q(((S=Z(e).grades)==null?void 0:S.length)||0)+")",1),f("div",ome,Q(((k=Z(e).grades)==null?void 0:k.join(", "))||"None configured"),1)]),f("div",lme,[f("h4",null,"Class Services ("+Q(((A=Z(e).classServices)==null?void 0:A.length)||0)+")",1),f("div",cme,[(L(!0),U(Fe,null,Ve(Z(e).classServices,F=>{var O;return L(),U("div",{key:F.name,class:"service-item"},[f("strong",null,Q(F.name)+":",1),Oe(" "+Q(((O=F.enabledSubcategories)==null?void 0:O.join(", "))||"None enabled"),1)])}),128))])]),f("div",ume,[f("h4",null,"Service Providers ("+Q(((D=Z(e).serviceProviders)==null?void 0:D.length)||0)+")",1),f("div",dme,Q(((N=Z(e).serviceProviders)==null?void 0:N.join(", "))||"None configured"),1)]),f("div",fme,[_[9]||(_[9]=f("h4",null,"Periods",-1)),f("div",hme,[_[6]||(_[6]=f("strong",null,"Number:",-1)),Oe(" "+Q(Z(e).numPeriods||0),1),_[7]||(_[7]=f("br",null,null,-1)),_[8]||(_[8]=f("strong",null,"Labels:",-1)),Oe(" "+Q(((R=Z(a))==null?void 0:R.join(", "))||"None"),1)])])])])):Se("",!0),f("div",pme,[_[11]||(_[11]=f("h3",null,"Test Actions",-1)),f("div",mme,[f("button",{onClick:g,disabled:Z(s),class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},Q(Z(s)?"Loading...":"Reload Settings"),9,gme),f("button",{onClick:v,disabled:Z(s),class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Reset to Defaults ",8,vme)])]),f("div",xme,[_[13]||(_[13]=f("h3",null,"Component Integration Test",-1)),f("div",yme,[_[12]||(_[12]=f("p",null,"This section tests if the StudentForm can access app settings:",-1)),f("button",{onClick:_[0]||(_[0]=F=>o.value=!o.value),class:"btn btn-primary"},Q(o.value?"Hide":"Show")+" Test Student Form ",1),o.value?(L(),U("div",Eme,[st(Ix,{users:{userRoles:{}},mode:"new",onClose:_[1]||(_[1]=F=>o.value=!1),onSaved:y})])):Se("",!0)])]),f("div",bme,[_[15]||(_[15]=f("h3",null,"Migration Tools",-1)),f("div",_me,[f("button",{onClick:x,disabled:l.value,class:"admin-action-btn",style:{"min-width":"160px","max-width":"160px"}},Q(l.value?"Migrating...":"Migrate Student IDs"),9,Sme),f("button",{onClick:E,disabled:c.value,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}},Q(c.value?"Verifying...":"Verify Migration"),9,Tme)]),u.value?(L(),U("div",wme,[_[14]||(_[14]=f("h4",null,"Migration Result:",-1)),f("pre",null,Q(JSON.stringify(u.value,null,2)),1)])):Se("",!0)]),f("div",Ame,[_[17]||(_[17]=f("h3",null,"Period Label Migration",-1)),f("div",Cme,[f("button",{onClick:w,disabled:p.value,class:"btn btn-secondary"},Q(p.value?"Previewing...":"Preview Period Migration"),9,Ime),f("button",{onClick:b,disabled:p.value,class:"btn btn-warning"},Q(p.value?"Migrating...":"Run Period Migration"),9,kme)]),m.value?(L(),U("div",Dme,[_[16]||(_[16]=f("h4",null,"Period Migration Result:",-1)),f("p",null,Q(m.value),1)])):Se("",!0)]),f("div",Pme,[_[19]||(_[19]=f("h3",null,"SSID Resolution Test",-1)),f("div",Fme,[f("button",{onClick:I,disabled:d.value,class:"btn btn-primary"},Q(d.value?"Testing...":"Test SSID Resolution"),9,Rme),f("button",{onClick:P,class:"btn btn-secondary"}," Clear Results ")]),h.value?(L(),U("div",Ome,[_[18]||(_[18]=f("h4",null,"SSID Resolution Test Result:",-1)),f("pre",null,Q(JSON.stringify(h.value,null,2)),1)])):Se("",!0)]),f("div",Nme,[_[20]||(_[20]=f("h3",null," Secure PDF System Test",-1)),st(Kpe)])])}}},Lme=xt(Mme,[["__scopeId","data-v-16ace2fd"]]);function Bme(t){const{waitForAuthInit:e}=gd();e.then(()=>{t.beforeEach((r,n,s)=>{const{currentUser:i}=gd(),a=r.meta.requiresAuth,o=r.meta.allowedRoles;a&&!i.value?s({name:"Login"}):a&&i.value&&!i.value.role?(console.log(`User ${i.value.uid} exists in Auth but has no role - redirecting to login for role assignment`),s({name:"Login"})):a&&o&&i.value&&!o.includes(i.value.role)?(console.warn(`User with role '${i.value.role}' tried to access restricted route: ${r.path}`),s({name:"Home"})):s()})})}const Ume=[{path:"/login",name:"Login",component:eH},{path:"/",name:"Home",component:t2,meta:{requiresAuth:!0,allowedRoles:u_}},{path:"/students",name:"Students",component:t2,meta:{requiresAuth:!0,allowedRoles:u_}},{path:"/admin",name:"Admin",component:Bhe,meta:{requiresAuth:!0,allowedRoles:Qc}},{path:"/admin/aide-assignment",name:"AdminAideAssignment",component:$4,meta:{requiresAuth:!0,allowedRoles:Qc}},{path:"/admin/time-table",name:"AdminTimeTable",component:bk,meta:{requiresAuth:!0,allowedRoles:Qc}},{path:"/admin/aide-schedule",name:"AdminAideSchedule",component:Rk,meta:{requiresAuth:!0,allowedRoles:Qc}},{path:"/admin/backup-restore",name:"AdminBackupRestore",component:Ok,meta:{requiresAuth:!0,allowedRoles:Qc}},{path:"/aide-schedule",name:"AideSchedule",component:mpe,meta:{requiresAuth:!0,allowedRoles:["paraeducator"]}},{path:"/testing",name:"Testing",component:Lme,meta:{requiresAuth:!0,allowedRoles:["admin","administrator","sped_chair","administrator_504_CM"]}}],Mk=CL({history:rL("/"),routes:Ume});Bme(Mk);const oy=N0(uB),$me=FF();oy.use(Mk);oy.use($me);oy.mount("#app");
